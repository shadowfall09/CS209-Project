{"items":[{"tags":["java","android","android-studio","delphi","r.java-file"],"answers":[{"tags":[],"owner":{"account_id":26318201,"reputation":5076,"user_id":19980636,"display_name":"Krokomot"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1681127212,"creation_date":1681070977,"answer_id":75972640,"question_id":73892624,"body_markdown":"You can (and should) use at least one of these:\r\n\r\n - The code shrinker [**r8**][1], which has been [introduced][2] to replace ProGuard (together with d8 which replaced dx). For a start take a look at the corresponding Android Dev Docs on how to [shrink, obfuscate, and optimize your app][3] and this [guide][4]. Especially the doc&#39;s section on [resource shrinking][5] may be of interest.\r\n\r\n - The code inspector [**lint**][6] will help you to find various problems with the code, inter alia unused resources which also unnecessarily bloat your `R.java` file.\r\n\r\n------------\r\n\r\nFor an elaboration on purpose and structure of resource IDs in `R.java` you might take a look at [this Stackoverflow thread][7].\r\n\r\nNote, that it&#39;s highly unrecommended to manipulate `R.java` manually. As it is written in *B.Burd &amp; J.P.Mueller, [Android Application Development All-in-One For Dummies][8], 3rd Ed., 2020, Wiley, pp.87* (a serious book, despite the name) in respect to `R.java` and Android Studio:\r\n\r\n&gt; Each Android project has an `R.java` file. Android Studio generates this file and protects it as if the file were made of gold. You, the developer, never create or modify the `R.java` file’s text.\r\n\r\nas well as\r\n\r\n&gt; Android’s documentation tells you to put `R.java` and its hex values out of your mind, and that’s probably good advice.\r\n\r\nand finally \r\n\r\n&gt; You cannot edit `R.java`. Long after the creation of a project, your IDE continues to monitor (and, if necessary, update) the contents of the `R.java` file. If you delete `R.java`, Android Studio recreates the file. If you edit `R.java`, Android Studio undoes your edit.\r\n\r\nThough I don&#39;t agree on such kind of paternalism, one really shouldn&#39;t manually edit `R.java` (even if one could when not using Android Studio, like in your case). As I&#39;ve put it once [somewhere][9]:\r\n\r\n&gt; Though human-readable, this file should never be edited manually as it is highly probable to crash the app because of erroneous references. There is no good reason imaginable why one should want to edit `R.java` anyway.\r\n\r\nThe last sentence would also be valid in your case.\r\n\r\n\r\n  [1]: https://r8.googlesource.com/r8\r\n  [2]: https://android-developers.googleblog.com/2018/11/r8-new-code-shrinker-from-google-is.html?m=1\r\n  [3]: https://developer.android.com/build/shrink-code\r\n  [4]: https://blog.logrocket.com/r8-code-shrinking-android-guide\r\n  [5]: https://developer.android.com/build/shrink-code#shrink-resources\r\n  [6]: https://developer.android.com/studio/write/lint\r\n  [7]: https://stackoverflow.com/questions/74382059/why-aapt2-does-not-generate-the-same-id-than-aapt-and-what-the-purpose-of-ids-l/75975892#75975892\r\n  [8]: https://www.oreilly.com/library/view/android-application-development/9781119660453/\r\n  [9]: https://timeout.userpage.fu-berlin.de/apkbuilder/#resources","title":"How to manually generate R.java","body":"<p>You can (and should) use at least one of these:</p>\n<ul>\n<li><p>The code shrinker <a href=\"https://r8.googlesource.com/r8\" rel=\"nofollow noreferrer\"><strong>r8</strong></a>, which has been <a href=\"https://android-developers.googleblog.com/2018/11/r8-new-code-shrinker-from-google-is.html?m=1\" rel=\"nofollow noreferrer\">introduced</a> to replace ProGuard (together with d8 which replaced dx). For a start take a look at the corresponding Android Dev Docs on how to <a href=\"https://developer.android.com/build/shrink-code\" rel=\"nofollow noreferrer\">shrink, obfuscate, and optimize your app</a> and this <a href=\"https://blog.logrocket.com/r8-code-shrinking-android-guide\" rel=\"nofollow noreferrer\">guide</a>. Especially the doc's section on <a href=\"https://developer.android.com/build/shrink-code#shrink-resources\" rel=\"nofollow noreferrer\">resource shrinking</a> may be of interest.</p>\n</li>\n<li><p>The code inspector <a href=\"https://developer.android.com/studio/write/lint\" rel=\"nofollow noreferrer\"><strong>lint</strong></a> will help you to find various problems with the code, inter alia unused resources which also unnecessarily bloat your <code>R.java</code> file.</p>\n</li>\n</ul>\n<hr />\n<p>For an elaboration on purpose and structure of resource IDs in <code>R.java</code> you might take a look at <a href=\"https://stackoverflow.com/questions/74382059/why-aapt2-does-not-generate-the-same-id-than-aapt-and-what-the-purpose-of-ids-l/75975892#75975892\">this Stackoverflow thread</a>.</p>\n<p>Note, that it's highly unrecommended to manipulate <code>R.java</code> manually. As it is written in <em>B.Burd &amp; J.P.Mueller, <a href=\"https://www.oreilly.com/library/view/android-application-development/9781119660453/\" rel=\"nofollow noreferrer\">Android Application Development All-in-One For Dummies</a>, 3rd Ed., 2020, Wiley, pp.87</em> (a serious book, despite the name) in respect to <code>R.java</code> and Android Studio:</p>\n<blockquote>\n<p>Each Android project has an <code>R.java</code> file. Android Studio generates this file and protects it as if the file were made of gold. You, the developer, never create or modify the <code>R.java</code> file’s text.</p>\n</blockquote>\n<p>as well as</p>\n<blockquote>\n<p>Android’s documentation tells you to put <code>R.java</code> and its hex values out of your mind, and that’s probably good advice.</p>\n</blockquote>\n<p>and finally</p>\n<blockquote>\n<p>You cannot edit <code>R.java</code>. Long after the creation of a project, your IDE continues to monitor (and, if necessary, update) the contents of the <code>R.java</code> file. If you delete <code>R.java</code>, Android Studio recreates the file. If you edit <code>R.java</code>, Android Studio undoes your edit.</p>\n</blockquote>\n<p>Though I don't agree on such kind of paternalism, one really shouldn't manually edit <code>R.java</code> (even if one could when not using Android Studio, like in your case). As I've put it once <a href=\"https://timeout.userpage.fu-berlin.de/apkbuilder/#resources\" rel=\"nofollow noreferrer\">somewhere</a>:</p>\n<blockquote>\n<p>Though human-readable, this file should never be edited manually as it is highly probable to crash the app because of erroneous references. There is no good reason imaginable why one should want to edit <code>R.java</code> anyway.</p>\n</blockquote>\n<p>The last sentence would also be valid in your case.</p>\n"}],"owner":{"account_id":1127005,"reputation":12375,"user_id":1114043,"accept_rate":51,"display_name":"zeus"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":176,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":75972640,"answer_count":1,"score":2,"last_activity_date":1681127212,"creation_date":1664440672,"question_id":73892624,"body_markdown":"My project (made in Delphi) need to manually generate for each package it&#39;s include the R.java file manually. Actually I put all resources of each library in a single .res directory and I run aapt.exe on this directory for each package like this for android.support.compat:\r\n\r\n\r\n    &quot;aapt.exe&quot; package -v -f -m \r\n      -M &quot;\\libraries\\android.support.compat\\AndroidManifest.xml&quot;\r\n      -I &quot;C:\\SDKs\\android\\platforms\\android-32\\android.jar&quot; \r\n      -S &quot;.\\res&quot;\r\n      -J &quot;.\\tmp\\src&quot; \r\n      --auto-add-overlay \r\n      --output-text-symbols .\\tmp\\\r\n\r\nand this for each package ex for android.support.coreui\r\n\r\n    &quot;aapt.exe&quot; package -v -f -m \r\n      -M &quot;\\libraries\\android.support.coreui\\AndroidManifest.xml&quot;\r\n      -I &quot;C:\\SDKs\\android\\platforms\\android-32\\android.jar&quot; \r\n      -S &quot;.\\res&quot;\r\n      -J &quot;.\\tmp\\src&quot; \r\n      --auto-add-overlay \r\n      --output-text-symbols .\\tmp\\\r\n\r\nThe problem is that at the end I have for each package **the same R.java that is quite big** because it&#39;s include all resources ids of the whole App. ex :\r\n\r\n    package androidx.core;\r\n    \r\n    public final class R {\r\n       public static final class styleable {\r\n          public static final int[] ActionBar = new int[]{2130771969, 2130771971, 2130771972, 2130771973, 2130771974, 2130771975, 2130771976, 2130771977, 2130771978, 2130771979, 2130771980, 2130771981, 2130771982, 2130771983, 2130771984, 2130771985, 2130771986, 2130771987, 2130771988, 2130771989, 2130771990, 2130771991, 2130771992, 2130771993, 2130771994, 2130771995, 2130771996, 2130771997, 2130772082};\r\n          public static final int ActionBar_background = 10;\r\n          public static final int ActionBar_backgroundSplit = 12;\r\n    ....\r\n\r\nand\r\n\r\n    package android.support.coreui;\r\n    \r\n    public final class R {\r\n       public static final class styleable {\r\n          public static final int[] ActionBar = new int[]{2130771969, 2130771971, 2130771972, 2130771973, 2130771974, 2130771975, 2130771976, 2130771977, 2130771978, 2130771979, 2130771980, 2130771981, 2130771982, 2130771983, 2130771984, 2130771985, 2130771986, 2130771987, 2130771988, 2130771989, 2130771990, 2130771991, 2130771992, 2130771993, 2130771994, 2130771995, 2130771996, 2130771997, 2130772082};\r\n          public static final int ActionBar_background = 10;\r\n          public static final int ActionBar_backgroundSplit = 12;\r\n    \r\nIs there a way to generate for each package a R.java with only the resource ids need by the package?","title":"How to manually generate R.java","body":"<p>My project (made in Delphi) need to manually generate for each package it's include the R.java file manually. Actually I put all resources of each library in a single .res directory and I run aapt.exe on this directory for each package like this for android.support.compat:</p>\n<pre><code>&quot;aapt.exe&quot; package -v -f -m \n  -M &quot;\\libraries\\android.support.compat\\AndroidManifest.xml&quot;\n  -I &quot;C:\\SDKs\\android\\platforms\\android-32\\android.jar&quot; \n  -S &quot;.\\res&quot;\n  -J &quot;.\\tmp\\src&quot; \n  --auto-add-overlay \n  --output-text-symbols .\\tmp\\\n</code></pre>\n<p>and this for each package ex for android.support.coreui</p>\n<pre><code>&quot;aapt.exe&quot; package -v -f -m \n  -M &quot;\\libraries\\android.support.coreui\\AndroidManifest.xml&quot;\n  -I &quot;C:\\SDKs\\android\\platforms\\android-32\\android.jar&quot; \n  -S &quot;.\\res&quot;\n  -J &quot;.\\tmp\\src&quot; \n  --auto-add-overlay \n  --output-text-symbols .\\tmp\\\n</code></pre>\n<p>The problem is that at the end I have for each package <strong>the same R.java that is quite big</strong> because it's include all resources ids of the whole App. ex :</p>\n<pre><code>package androidx.core;\n\npublic final class R {\n   public static final class styleable {\n      public static final int[] ActionBar = new int[]{2130771969, 2130771971, 2130771972, 2130771973, 2130771974, 2130771975, 2130771976, 2130771977, 2130771978, 2130771979, 2130771980, 2130771981, 2130771982, 2130771983, 2130771984, 2130771985, 2130771986, 2130771987, 2130771988, 2130771989, 2130771990, 2130771991, 2130771992, 2130771993, 2130771994, 2130771995, 2130771996, 2130771997, 2130772082};\n      public static final int ActionBar_background = 10;\n      public static final int ActionBar_backgroundSplit = 12;\n....\n</code></pre>\n<p>and</p>\n<pre><code>package android.support.coreui;\n\npublic final class R {\n   public static final class styleable {\n      public static final int[] ActionBar = new int[]{2130771969, 2130771971, 2130771972, 2130771973, 2130771974, 2130771975, 2130771976, 2130771977, 2130771978, 2130771979, 2130771980, 2130771981, 2130771982, 2130771983, 2130771984, 2130771985, 2130771986, 2130771987, 2130771988, 2130771989, 2130771990, 2130771991, 2130771992, 2130771993, 2130771994, 2130771995, 2130771996, 2130771997, 2130772082};\n      public static final int ActionBar_background = 10;\n      public static final int ActionBar_backgroundSplit = 12;\n</code></pre>\n<p>Is there a way to generate for each package a R.java with only the resource ids need by the package?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":108033,"reputation":17201,"user_id":286934,"display_name":"Progman"},"score":3,"creation_date":1681127349,"post_id":75976785,"comment_id":134002342,"body_markdown":"Do not use static fields for your calculations, these are messing up your calculations, specially when you call `PressButton()` multiple times. Use return values and/or local variables instead.","body":"Do not use static fields for your calculations, these are messing up your calculations, specially when you call <code>PressButton()</code> multiple times. Use return values and/or local variables instead."},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1681129649,"post_id":75976785,"comment_id":134002747,"body_markdown":"Basically, you want the number of [permutations](https://en.wikipedia.org/wiki/Permutation) of _n_ things. (In your question, each &quot;thing&quot; is a number.) For 3 things, the number of permutations is 6. Why do you say that it should be 7? And why is it 14 for 4 things?","body":"Basically, you want the number of <a href=\"https://en.wikipedia.org/wiki/Permutation\" rel=\"nofollow noreferrer\">permutations</a> of <i>n</i> things. (In your question, each &quot;thing&quot; is a number.) For 3 things, the number of permutations is 6. Why do you say that it should be 7? And why is it 14 for 4 things?"}],"owner":{"account_id":28264839,"reputation":1,"user_id":21608963,"display_name":"David"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1681129258,"answer_count":0,"score":0,"last_activity_date":1681126964,"creation_date":1681126964,"question_id":75976785,"body_markdown":"Task:\r\n\r\nA lock has n buttons in it, numbered from 1 to n. To open the lock, you have to press all buttons in some order, i.e. a key to the lock is a permutation of the first n integers. If you push the right button in the right order, it will be pressed into the lock. Otherwise all pressed buttons will pop out. When all buttons are pressed into the lock, it opens.\r\n\r\nYour task is to calculate the number of times you&#39;ve got to push buttons in order to open the lock in the worst-case scenario.\r\n\r\nMy decision:\r\n\r\n```\r\npublic class Main {\r\n    public static long pressCounter = 0;\r\n    public static long step = 2;\r\n\r\n    public static long PressButton(long n)\r\n    {\r\n        if (n == 0) return 0;\r\n        if (n == 1) return 1;\r\n        if (n == 2) return 2;\r\n\r\n        long temp = (n - step) * step + 1;\r\n        pressCounter += temp;\r\n        \r\n        if ((n - step) != 0) {\r\n            step++;\r\n            PressButton(n);\r\n        }\r\n        \r\n        long result = n + pressCounter;\r\n        return result;\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        System.out.println(PressButton(3));\r\n        System.out.println(PressButton(4));\r\n    }\r\n}\r\n```\r\n\r\n\r\nTwo or more runs of this method give an unexpected solution. I think it&#39;s the pressCounter and step variables. How can I fix it?\r\n\r\n```\r\nSystem.out.println(PressButton(3)); \r\n```\r\nexpecting - 7  \r\n```\r\nSystem.out.println(PressButton(4)); \r\n```\r\nexpecting - 14","title":"Problem with initialization outside the method","body":"<p>Task:</p>\n<p>A lock has n buttons in it, numbered from 1 to n. To open the lock, you have to press all buttons in some order, i.e. a key to the lock is a permutation of the first n integers. If you push the right button in the right order, it will be pressed into the lock. Otherwise all pressed buttons will pop out. When all buttons are pressed into the lock, it opens.</p>\n<p>Your task is to calculate the number of times you've got to push buttons in order to open the lock in the worst-case scenario.</p>\n<p>My decision:</p>\n<pre><code>public class Main {\n    public static long pressCounter = 0;\n    public static long step = 2;\n\n    public static long PressButton(long n)\n    {\n        if (n == 0) return 0;\n        if (n == 1) return 1;\n        if (n == 2) return 2;\n\n        long temp = (n - step) * step + 1;\n        pressCounter += temp;\n        \n        if ((n - step) != 0) {\n            step++;\n            PressButton(n);\n        }\n        \n        long result = n + pressCounter;\n        return result;\n    }\n\n    public static void main(String[] args) {\n        System.out.println(PressButton(3));\n        System.out.println(PressButton(4));\n    }\n}\n</code></pre>\n<p>Two or more runs of this method give an unexpected solution. I think it's the pressCounter and step variables. How can I fix it?</p>\n<pre><code>System.out.println(PressButton(3)); \n</code></pre>\n<p>expecting - 7</p>\n<pre><code>System.out.println(PressButton(4)); \n</code></pre>\n<p>expecting - 14</p>\n"},{"tags":["java","android","frameworks","executorservice","android-lifecycle"],"answers":[{"tags":[],"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1563548775,"creation_date":1563548775,"answer_id":57115197,"question_id":57115092,"body_markdown":"If a thread is still running, it continues to run even after onDestroy is called.  A thread cannot safely be cancelled by outside the thread itself, so nothing in the system will try. (Why not-  because its possible this will cause deadlock.  The system doesn&#39;t know what conditions a thread may be waiting for or locks it may be holding, or resources it may have claimed that will block other threads).\r\n\r\nIf all threads are finished, then shutting down the executorservice will kill all the threads.\r\n\r\nAs an aside-  your comments in the first paragraph shows you may not fully be aware of all the ins and outs of various asynchronous technologies available.  The reason you&#39;d use thread pools and async tasks are very different, and a Service has nothing to do with threading on Android.","title":"Will a thread pool automatically be shut down when changing Activities (should it even be used)?","body":"<p>If a thread is still running, it continues to run even after onDestroy is called.  A thread cannot safely be cancelled by outside the thread itself, so nothing in the system will try. (Why not-  because its possible this will cause deadlock.  The system doesn't know what conditions a thread may be waiting for or locks it may be holding, or resources it may have claimed that will block other threads).</p>\n\n<p>If all threads are finished, then shutting down the executorservice will kill all the threads.</p>\n\n<p>As an aside-  your comments in the first paragraph shows you may not fully be aware of all the ins and outs of various asynchronous technologies available.  The reason you'd use thread pools and async tasks are very different, and a Service has nothing to do with threading on Android.</p>\n"},{"comments":[{"owner":{"account_id":7219356,"reputation":1156,"user_id":9057867,"accept_rate":75,"display_name":"Jo Momma"},"score":0,"creation_date":1563555706,"post_id":57116542,"comment_id":100752243,"body_markdown":"but, my real question/curiosity is, can you still access it from another activity if it&#39;s public? Or, does it&#39;s variable need to be labeled static","body":"but, my real question/curiosity is, can you still access it from another activity if it&#39;s public? Or, does it&#39;s variable need to be labeled static"}],"tags":[],"owner":{"account_id":3319559,"reputation":2575,"user_id":2791067,"display_name":"Roman"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681126902,"creation_date":1563554392,"answer_id":57116542,"question_id":57115092,"body_markdown":"Thread pool is independent from activity, fragment lifecycle. So, yes it will run even after destroying activity.","title":"Will a thread pool automatically be shut down when changing Activities (should it even be used)?","body":"<p>Thread pool is independent from activity, fragment lifecycle. So, yes it will run even after destroying activity.</p>\n"}],"owner":{"account_id":7219356,"reputation":1156,"user_id":9057867,"accept_rate":75,"display_name":"Jo Momma"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":377,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1681126902,"creation_date":1563548376,"question_id":57115092,"body_markdown":"I understand that it may not be the best option to use an `ExecuterService` (thread pools) in an `Android` application. I know how to use `AsyncTaskLoader` and `AsyncTask` as well as `services`. My question is more about better understanding the framework. \r\n\r\nIf I create a thread pool using the Executer framework in my Android application, and I don&#39;t declare the pool as static, will the threads still be available to the rest of the application when I leave the `Activity` it is created in? Will I have created &quot;zombie threads&quot; that aren&#39;t accessible but continue to use memory resources (memory leak). \r\n\r\nI know that you need to shut down the service and this can be done in `onDestroy()`. I&#39;m just curious if the pool is still reachable if it is created, not shutdown and also declared public. Thank you for you explanations in advance.","title":"Will a thread pool automatically be shut down when changing Activities (should it even be used)?","body":"<p>I understand that it may not be the best option to use an <code>ExecuterService</code> (thread pools) in an <code>Android</code> application. I know how to use <code>AsyncTaskLoader</code> and <code>AsyncTask</code> as well as <code>services</code>. My question is more about better understanding the framework. </p>\n\n<p>If I create a thread pool using the Executer framework in my Android application, and I don't declare the pool as static, will the threads still be available to the rest of the application when I leave the <code>Activity</code> it is created in? Will I have created \"zombie threads\" that aren't accessible but continue to use memory resources (memory leak). </p>\n\n<p>I know that you need to shut down the service and this can be done in <code>onDestroy()</code>. I'm just curious if the pool is still reachable if it is created, not shutdown and also declared public. Thank you for you explanations in advance.</p>\n"},{"tags":["java","android"],"owner":{"account_id":27553818,"reputation":150,"user_id":21028409,"display_name":"Khuong Viet Tai"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681126757,"creation_date":1681122972,"question_id":75976336,"body_markdown":"hi everyone i am looking to use SharePreference to save values of calculations. i want each time pressing &quot;=&quot; will save the value of the calculation in the form tvMath = tvResult which I don&#39;t know how to do now.\r\n\r\nAfter saving I want to show it on Another screen\r\n\r\nthis is my code\r\n\r\nMain Activity \r\n\r\n```\r\npackage com.khuongviettai.caculatorsharedpreferences;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.content.Intent;\r\nimport android.content.SharedPreferences;\r\nimport android.os.Bundle;\r\nimport android.os.Environment;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport org.mozilla.javascript.Context;\r\nimport org.mozilla.javascript.Scriptable;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.HashSet;\r\nimport java.util.Set;\r\n\r\n\r\npublic class MainActivity extends AppCompatActivity implements View.OnClickListener {\r\n\r\n    private TextView tvMath, tvResult;\r\n    private Button btnC, btnOpen, btnClose, btnDiv, btn7, btn8, btn9, btnMul, btn4, btn5, btn6, btnSub, btn1, btn2, btn3, btnPlus, btn0, btnDot, btnResult, btnBack;\r\n\r\n\r\n\r\n    private String currentMath = &quot;&quot;;\r\n\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n\r\n        tvMath = findViewById(R.id.tvMath);\r\n        tvResult = findViewById(R.id.tvResult);\r\n        assignID(btnC, R.id.btnC);\r\n        assignID(btnOpen, R.id.btnOpen);\r\n        assignID(btnClose, R.id.btnClose);\r\n        assignID(btnDiv, R.id.btnDiv);\r\n        assignID(btn0, R.id.btn0);\r\n        assignID(btn1, R.id.btn1);\r\n        assignID(btn2, R.id.btn2);\r\n        assignID(btn3, R.id.btn3);\r\n        assignID(btn4, R.id.btn4);\r\n        assignID(btn5, R.id.btn5);\r\n        assignID(btn6, R.id.btn6);\r\n        assignID(btn7, R.id.btn7);\r\n        assignID(btn8, R.id.btn8);\r\n        assignID(btn9, R.id.btn9);\r\n        assignID(btnMul, R.id.btnMul);\r\n        assignID(btnSub, R.id.btnSub);\r\n        assignID(btnPlus, R.id.btnPlus);\r\n        assignID(btnDot, R.id.btnDot);\r\n        assignID(btnResult, R.id.btnResult);\r\n        assignID(btnBack, R.id.btnBack);\r\n\r\n\r\n\r\n\r\n    }\r\n\r\n    void assignID(Button btn, int id) {\r\n        btn = findViewById(id);\r\n        btn.setOnClickListener(this);\r\n    }\r\n\r\n\r\n\r\n\r\n    @Override\r\n    public void onClick(View view) {\r\n        Button button = (Button) view;\r\n        String buttonText = button.getText().toString();\r\n        if (buttonText.equals(&quot;=&quot;)) {\r\n            if (currentMath.equals(&quot;&quot;)) {\r\n                tvResult.setText(&quot;0&quot;);\r\n                return;\r\n            }\r\n            String finalResult = getResult(currentMath);\r\n            if (!finalResult.equals(&quot;Err&quot;)) {\r\n\r\n\r\n                tvResult.setText(finalResult);\r\n                Toast.makeText(this, &quot;Saved&quot;, Toast.LENGTH_SHORT).show();\r\n            } else {\r\n                tvResult.setText(&quot;Err&quot;);\r\n            }\r\n            return;\r\n\r\n        } else if (buttonText.equals(&quot;C&quot;)) {\r\n            tvMath.setText(&quot;&quot;);\r\n            tvResult.setText(&quot;0&quot;);\r\n            currentMath = &quot;&quot;;\r\n            return;\r\n\r\n        } else if (buttonText.equals(&quot;BACK&quot;)) {\r\n            Intent intent = new Intent(MainActivity.this, HistoryActivity.class);\r\n\r\n            startActivity(intent);\r\n            return;\r\n\r\n        }\r\n\r\n        currentMath += buttonText;\r\n        tvMath.setText(currentMath);\r\n    }\r\n\r\n\r\n\r\n\r\n    String getResult(String data) {\r\n        try {\r\n            Context context = Context.enter();\r\n            context.setOptimizationLevel(-1);\r\n            Scriptable scriptable = context.initStandardObjects();\r\n            String finalResult = context.evaluateString(scriptable, data, &quot;Javascript&quot;, 1, null).toString();\r\n            if (finalResult.endsWith(&quot;.0&quot;)) {\r\n                finalResult = finalResult.replace(&quot;.0&quot;, &quot;&quot;);\r\n            }\r\n            if (data.equals(&quot;16052001&quot;)) {\r\n                finalResult = &quot;I love Tai&quot;;\r\n            }\r\n            return finalResult;\r\n        } catch (Exception e\r\n        ) {\r\n            return &quot;Err&quot;;\r\n        }\r\n    }\r\n\r\n\r\n```\r\n\r\nHistoryActivity\r\n\r\n```\r\npackage com.khuongviettai.caculatorsharedpreferences;\r\nimport android.content.SharedPreferences;\r\nimport android.os.Bundle;\r\nimport android.widget.ArrayAdapter;\r\nimport android.widget.ListView;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.HashSet;\r\nimport java.util.List;\r\nimport java.util.Map;\r\nimport java.util.Set;\r\n\r\npublic class HistoryActivity extends AppCompatActivity {\r\n    private ListView listView;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_history);\r\n\r\n        listView = findViewById(R.id.listView);\r\n\r\n    }\r\n}\r\n```\r\n\r\nthe above code when I press BACK will switch to HistoryActyvity\r\n\r\n[![image app][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/jVsD6.png","title":"how can save value with SharePreference Android","body":"<p>hi everyone i am looking to use SharePreference to save values of calculations. i want each time pressing &quot;=&quot; will save the value of the calculation in the form tvMath = tvResult which I don't know how to do now.</p>\n<p>After saving I want to show it on Another screen</p>\n<p>this is my code</p>\n<p>Main Activity</p>\n<pre><code>package com.khuongviettai.caculatorsharedpreferences;\n\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport android.content.Intent;\nimport android.content.SharedPreferences;\nimport android.os.Bundle;\nimport android.os.Environment;\nimport android.view.View;\nimport android.widget.Button;\nimport android.widget.TextView;\nimport android.widget.Toast;\n\nimport org.mozilla.javascript.Context;\nimport org.mozilla.javascript.Scriptable;\n\nimport java.util.ArrayList;\nimport java.util.HashSet;\nimport java.util.Set;\n\n\npublic class MainActivity extends AppCompatActivity implements View.OnClickListener {\n\n    private TextView tvMath, tvResult;\n    private Button btnC, btnOpen, btnClose, btnDiv, btn7, btn8, btn9, btnMul, btn4, btn5, btn6, btnSub, btn1, btn2, btn3, btnPlus, btn0, btnDot, btnResult, btnBack;\n\n\n\n    private String currentMath = &quot;&quot;;\n\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n\n        tvMath = findViewById(R.id.tvMath);\n        tvResult = findViewById(R.id.tvResult);\n        assignID(btnC, R.id.btnC);\n        assignID(btnOpen, R.id.btnOpen);\n        assignID(btnClose, R.id.btnClose);\n        assignID(btnDiv, R.id.btnDiv);\n        assignID(btn0, R.id.btn0);\n        assignID(btn1, R.id.btn1);\n        assignID(btn2, R.id.btn2);\n        assignID(btn3, R.id.btn3);\n        assignID(btn4, R.id.btn4);\n        assignID(btn5, R.id.btn5);\n        assignID(btn6, R.id.btn6);\n        assignID(btn7, R.id.btn7);\n        assignID(btn8, R.id.btn8);\n        assignID(btn9, R.id.btn9);\n        assignID(btnMul, R.id.btnMul);\n        assignID(btnSub, R.id.btnSub);\n        assignID(btnPlus, R.id.btnPlus);\n        assignID(btnDot, R.id.btnDot);\n        assignID(btnResult, R.id.btnResult);\n        assignID(btnBack, R.id.btnBack);\n\n\n\n\n    }\n\n    void assignID(Button btn, int id) {\n        btn = findViewById(id);\n        btn.setOnClickListener(this);\n    }\n\n\n\n\n    @Override\n    public void onClick(View view) {\n        Button button = (Button) view;\n        String buttonText = button.getText().toString();\n        if (buttonText.equals(&quot;=&quot;)) {\n            if (currentMath.equals(&quot;&quot;)) {\n                tvResult.setText(&quot;0&quot;);\n                return;\n            }\n            String finalResult = getResult(currentMath);\n            if (!finalResult.equals(&quot;Err&quot;)) {\n\n\n                tvResult.setText(finalResult);\n                Toast.makeText(this, &quot;Saved&quot;, Toast.LENGTH_SHORT).show();\n            } else {\n                tvResult.setText(&quot;Err&quot;);\n            }\n            return;\n\n        } else if (buttonText.equals(&quot;C&quot;)) {\n            tvMath.setText(&quot;&quot;);\n            tvResult.setText(&quot;0&quot;);\n            currentMath = &quot;&quot;;\n            return;\n\n        } else if (buttonText.equals(&quot;BACK&quot;)) {\n            Intent intent = new Intent(MainActivity.this, HistoryActivity.class);\n\n            startActivity(intent);\n            return;\n\n        }\n\n        currentMath += buttonText;\n        tvMath.setText(currentMath);\n    }\n\n\n\n\n    String getResult(String data) {\n        try {\n            Context context = Context.enter();\n            context.setOptimizationLevel(-1);\n            Scriptable scriptable = context.initStandardObjects();\n            String finalResult = context.evaluateString(scriptable, data, &quot;Javascript&quot;, 1, null).toString();\n            if (finalResult.endsWith(&quot;.0&quot;)) {\n                finalResult = finalResult.replace(&quot;.0&quot;, &quot;&quot;);\n            }\n            if (data.equals(&quot;16052001&quot;)) {\n                finalResult = &quot;I love Tai&quot;;\n            }\n            return finalResult;\n        } catch (Exception e\n        ) {\n            return &quot;Err&quot;;\n        }\n    }\n\n\n</code></pre>\n<p>HistoryActivity</p>\n<pre><code>package com.khuongviettai.caculatorsharedpreferences;\nimport android.content.SharedPreferences;\nimport android.os.Bundle;\nimport android.widget.ArrayAdapter;\nimport android.widget.ListView;\n\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport java.util.ArrayList;\nimport java.util.HashSet;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.Set;\n\npublic class HistoryActivity extends AppCompatActivity {\n    private ListView listView;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_history);\n\n        listView = findViewById(R.id.listView);\n\n    }\n}\n</code></pre>\n<p>the above code when I press BACK will switch to HistoryActyvity</p>\n<p><a href=\"https://i.stack.imgur.com/jVsD6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jVsD6.png\" alt=\"image app\" /></a></p>\n"},{"tags":["java","swing","user-interface"],"comments":[{"owner":{"account_id":3836705,"reputation":179,"user_id":3180823,"accept_rate":67,"display_name":"Yousuf Soomro"},"score":0,"creation_date":1390752821,"post_id":21365570,"comment_id":32217546,"body_markdown":"I am creating an order form and I use panels to add details to that order,\nSomething like [this](http://www.mustbebuilt.co.uk/demo/jquery/adding-form-fields/adding-fields-example.php)\nI want to add remove function to that","body":"I am creating an order form and I use panels to add details to that order, Something like <a href=\"http://www.mustbebuilt.co.uk/demo/jquery/adding-form-fields/adding-fields-example.php\" rel=\"nofollow noreferrer\">this</a> I want to add remove function to that"}],"answers":[{"comments":[{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":4,"creation_date":1390755189,"post_id":21366261,"comment_id":32218450,"body_markdown":"*&quot;your question presupposes a way to do things,&quot;*  Indeed.  This sounds like a classic [XY problem](http://meta.stackexchange.com/q/66377/155831).","body":"<i>&quot;your question presupposes a way to do things,&quot;</i>  Indeed.  This sounds like a classic <a href=\"http://meta.stackexchange.com/q/66377/155831\">XY problem</a>."},{"owner":{"account_id":3836705,"reputation":179,"user_id":3180823,"accept_rate":67,"display_name":"Yousuf Soomro"},"score":0,"creation_date":1390760518,"post_id":21366261,"comment_id":32220456,"body_markdown":"sorry for such question, I am new to this forum, I got XY problem I will try avoiding such questions.\n\n@rcook: Thanks jPanelParent.remove(last); worked.","body":"sorry for such question, I am new to this forum, I got XY problem I will try avoiding such questions.  @rcook: Thanks jPanelParent.remove(last); worked."}],"tags":[],"owner":{"account_id":997513,"reputation":12945,"user_id":3893496,"accept_rate":54,"display_name":"arcy"},"comment_count":2,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1390754692,"creation_date":1390754692,"answer_id":21366261,"question_id":21365570,"body_markdown":"This is a classic case of looking in the wrong place for an answer; your question presupposes a way to do things, and you ask how to do that presupposed and erroneous operation, and confusion ensues.  It doesn&#39;t help that &quot;dispose&quot; is a term used for an operation you don&#39;t need at all, having to do with making memory available for reclaiming in an environment where programmers do these things.\r\n\r\nI *believe* what you want to do is remove the reference that the parent component has to the JPanel.  That would fit your desire that getComponents() in the parent panel not return the panel you are getting rid of. \r\n\r\nIn order for the panel that you are removing to do this, it needs a reference to the parent panel, and then you can remove it from the parent panel just like you&#39;ve removed components from the target panel.  In fact, if the parent panel is the only place that references the target, and the target&#39;s components are only referenced in the target, you don&#39;t have to remove the target components if you just remove the parent panel reference to the target.\r\n\r\nSo pass a reference to your parent panel to your target panel, and do a remove() of the target panel from the parent panel in place of your hypothesized dispose() call.\r\n\r\n","title":"How to Dispose a JPanel - jPanel1.dispose() Or equivalent","body":"<p>This is a classic case of looking in the wrong place for an answer; your question presupposes a way to do things, and you ask how to do that presupposed and erroneous operation, and confusion ensues.  It doesn't help that \"dispose\" is a term used for an operation you don't need at all, having to do with making memory available for reclaiming in an environment where programmers do these things.</p>\n\n<p>I <em>believe</em> what you want to do is remove the reference that the parent component has to the JPanel.  That would fit your desire that getComponents() in the parent panel not return the panel you are getting rid of. </p>\n\n<p>In order for the panel that you are removing to do this, it needs a reference to the parent panel, and then you can remove it from the parent panel just like you've removed components from the target panel.  In fact, if the parent panel is the only place that references the target, and the target's components are only referenced in the target, you don't have to remove the target components if you just remove the parent panel reference to the target.</p>\n\n<p>So pass a reference to your parent panel to your target panel, and do a remove() of the target panel from the parent panel in place of your hypothesized dispose() call.</p>\n"},{"tags":[],"owner":{"account_id":257449,"reputation":39,"user_id":2008850,"display_name":"Douglas Tybel"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1432758462,"creation_date":1432758462,"answer_id":30492513,"question_id":21365570,"body_markdown":"Dispose em JPanel Netbeans java\r\n\r\n       Component comp = SwingUtilities.getRoot(this);\r\n       ((Window) comp).dispose();","title":"How to Dispose a JPanel - jPanel1.dispose() Or equivalent","body":"<p>Dispose em JPanel Netbeans java</p>\n\n<pre><code>   Component comp = SwingUtilities.getRoot(this);\n   ((Window) comp).dispose();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":400760,"reputation":16402,"user_id":766911,"accept_rate":73,"display_name":"gdbj"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1492539281,"creation_date":1492539281,"answer_id":43479434,"question_id":21365570,"body_markdown":"In my case, my one panel was on a JDialog, and the following can work:\r\n\r\n    public void dispose() {\r\n\t\tJFrame parent = (JFrame) this.getTopLevelAncestor();\r\n        parent.dispose();\r\n\t}\r\n\r\nHowever, I think explicitly keeping a reference to the parent in the panel might be a less error prone way, as described in another answer.","title":"How to Dispose a JPanel - jPanel1.dispose() Or equivalent","body":"<p>In my case, my one panel was on a JDialog, and the following can work:</p>\n\n<pre><code>public void dispose() {\n    JFrame parent = (JFrame) this.getTopLevelAncestor();\n    parent.dispose();\n}\n</code></pre>\n\n<p>However, I think explicitly keeping a reference to the parent in the panel might be a less error prone way, as described in another answer.</p>\n"},{"tags":[],"owner":{"account_id":26501835,"reputation":3,"user_id":20138656,"display_name":"rainbow"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681126749,"creation_date":1681126496,"answer_id":75976732,"question_id":21365570,"body_markdown":"I am having similar issues as I switch between panels and the next panel is created only based on a choice from the previous one, so I want to dispose as I return from the second panel to the first one until new selection is made on the first panel. \r\n\r\n```\r\nmypanel.removeAll();\r\n```\r\n\r\n\r\n fixed this issue","title":"How to Dispose a JPanel - jPanel1.dispose() Or equivalent","body":"<p>I am having similar issues as I switch between panels and the next panel is created only based on a choice from the previous one, so I want to dispose as I return from the second panel to the first one until new selection is made on the first panel.</p>\n<pre><code>mypanel.removeAll();\n</code></pre>\n<p>fixed this issue</p>\n"}],"owner":{"account_id":3836705,"reputation":179,"user_id":3180823,"accept_rate":67,"display_name":"Yousuf Soomro"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":18537,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":21366261,"answer_count":4,"score":0,"last_activity_date":1681126749,"creation_date":1390751504,"question_id":21365570,"body_markdown":"How can we dispose() a JPanel?\r\n\r\nI&#39;ve done `jPanel1.removeAll()` and now I want JPanel to be disposed so that `jPanelParent.getComponents()` can&#39;t return it\r\n\r\n    Component[] components = this.jPanelParent.getComponents();  /// Returns 5 Components      \r\n    JPanel last = (JPanel)components[components.length];\r\n    last.removeAll();\r\n    //last.dispose()   NOT AVAILABLE\r\n\r\n\r\n&gt;Now after above code if I run .getComponents() I don&#39;t want to get &quot;last&quot; in above code","title":"How to Dispose a JPanel - jPanel1.dispose() Or equivalent","body":"<p>How can we dispose() a JPanel?</p>\n\n<p>I've done <code>jPanel1.removeAll()</code> and now I want JPanel to be disposed so that <code>jPanelParent.getComponents()</code> can't return it</p>\n\n<pre><code>Component[] components = this.jPanelParent.getComponents();  /// Returns 5 Components      \nJPanel last = (JPanel)components[components.length];\nlast.removeAll();\n//last.dispose()   NOT AVAILABLE\n</code></pre>\n\n<blockquote>\n  <p>Now after above code if I run .getComponents() I don't want to get \"last\" in above code</p>\n</blockquote>\n"},{"tags":["java","android","proguard","android-r8"],"answers":[{"comments":[{"owner":{"account_id":26136616,"reputation":194,"user_id":19826534,"display_name":"Ozgur Baykal"},"score":0,"creation_date":1681126617,"post_id":75976654,"comment_id":134002214,"body_markdown":"I added what you posted but it didn&#39;t work. Is it possible to find out what exactly is causing the error? Or will I have to scan one by one? My proguard-rules.pro file was like this:\nhttps://codeshare.io/loLlQd","body":"I added what you posted but it didn&#39;t work. Is it possible to find out what exactly is causing the error? Or will I have to scan one by one? My proguard-rules.pro file was like this: <a href=\"https://codeshare.io/loLlQd\" rel=\"nofollow noreferrer\">codeshare.io/loLlQd</a>"},{"owner":{"account_id":9135654,"reputation":81,"user_id":6795426,"display_name":" Godrick"},"score":0,"creation_date":1681128879,"post_id":75976654,"comment_id":134002607,"body_markdown":"No, That I post is just a sample, not real code","body":"No, That I post is just a sample, not real code"},{"owner":{"account_id":9135654,"reputation":81,"user_id":6795426,"display_name":" Godrick"},"score":0,"creation_date":1681129099,"post_id":75976654,"comment_id":134002640,"body_markdown":"I checked your proguard file, A lot of &quot;demo&quot; things in it, read this https://developer.android.com/build/shrink-code","body":"I checked your proguard file, A lot of &quot;demo&quot; things in it, read this <a href=\"https://developer.android.com/build/shrink-code\" rel=\"nofollow noreferrer\">developer.android.com/build/shrink-code</a>"}],"tags":[],"owner":{"account_id":9135654,"reputation":81,"user_id":6795426,"display_name":" Godrick"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681125809,"creation_date":1681125809,"answer_id":75976654,"question_id":75976440,"body_markdown":"You didn&#39;t add any rule for proguard file equals that mix EVERYTHING when compile apks\r\n\r\nHere is a normally proguard file \r\n\r\n    -dontwarn com.android.**\r\n    -keep class * extends com.android.View {*;}\r\n    -keep public class * extends android.webkit.WebChromeClient\r\n    -keep class * implements java.io.Serializable {*;}\r\n    -dontwarn okhttp3.**\r\n    -dontwarn org.**\r\n\r\n    -keep public class * implements com.bumptech.glide.module.GlideModule\r\n    -keep public class * extends com.bumptech.glide.AppGlideModule\r\n\r\n    -keep class com.google.** {*;}\r\n    -keep class com.facebook.** {*;}\r\n    -keep class com.com.appsflyer.** {*;}\r\n\r\n\r\n    -optimizationpasses 5\r\n    -dontusemixedcaseclassnames\r\n    -verbose\r\n    -keepattributes Signature\r\n    -keepattributes SourceFile,LineNumberTable\r\n    -keepclasseswithmembernames class * {\r\n        native &lt;methods&gt;;\r\n     }\r\n    -adaptclassstrings\r\n    -keepattributes InnerClasses, EnclosingMethod, Signature, *Annotation*\r\n\r\n\r\n\r\n    -keep class androidx.**{*;}\r\n\r\n\r\nExcept those items, you still need add your json convert java bean or data class stuff(That&#39;s why your socket structure is broken), and some third party lib need to keep","title":"My project&#39;s structure is broken when using Proguard","body":"<p>You didn't add any rule for proguard file equals that mix EVERYTHING when compile apks</p>\n<p>Here is a normally proguard file</p>\n<pre><code>-dontwarn com.android.**\n-keep class * extends com.android.View {*;}\n-keep public class * extends android.webkit.WebChromeClient\n-keep class * implements java.io.Serializable {*;}\n-dontwarn okhttp3.**\n-dontwarn org.**\n\n-keep public class * implements com.bumptech.glide.module.GlideModule\n-keep public class * extends com.bumptech.glide.AppGlideModule\n\n-keep class com.google.** {*;}\n-keep class com.facebook.** {*;}\n-keep class com.com.appsflyer.** {*;}\n\n\n-optimizationpasses 5\n-dontusemixedcaseclassnames\n-verbose\n-keepattributes Signature\n-keepattributes SourceFile,LineNumberTable\n-keepclasseswithmembernames class * {\n    native &lt;methods&gt;;\n }\n-adaptclassstrings\n-keepattributes InnerClasses, EnclosingMethod, Signature, *Annotation*\n\n\n\n-keep class androidx.**{*;}\n</code></pre>\n<p>Except those items, you still need add your json convert java bean or data class stuff(That's why your socket structure is broken), and some third party lib need to keep</p>\n"}],"owner":{"account_id":26136616,"reputation":194,"user_id":19826534,"display_name":"Ozgur Baykal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":104,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681125809,"creation_date":1681123816,"question_id":75976440,"body_markdown":"I&#39;m trying to add proguard rules. Even if I don&#39;t add these rules, some things break in my project the moment I set minifyEnabled to true. For example, the socket structure is broken, while trying to communicate with another device over socket, it receives requests but cannot send a response. Another example is not printing some values while writing xml. All of this happens the moment I set minifyEnabled to true. The project is huge and I&#39;m not sure what caused it.\r\n\r\nCan you suggest an idea or alternative tool to find the source of the problem and solve it?\r\n\r\nAs I said, even if the rules file is empty, even if I just set the minifyEnabled value to true, these problems occur and I have no idea how to prevent these problems by adding them to the rules file.\r\n\r\n**build.gradle**\r\n```\r\n        release {\r\n            shrinkResources false\r\n            minifyEnabled true\r\n            proguardFiles getDefaultProguardFile(&#39;proguard-android-optimize.txt&#39;), &#39;proguard-rules.pro&#39;\r\n            buildConfigField(&quot;String&quot;, &#39;BUNDLE_DATE&#39;, &#39;&quot;17.06.2021 09:08&quot;&#39;)\r\n            buildConfigField(&quot;String&quot;, &#39;BUNDLE_ID&#39;, &#39;&quot;13&quot;&#39;)\r\n        }\r\n        debug {\r\n            minifyEnabled true\r\n            shrinkResources false\r\n            proguardFiles getDefaultProguardFile(&#39;proguard-android-optimize.txt&#39;), &#39;proguard-rules.pro&#39;\r\n            ext.enableCrashlytics = false\r\n            ext.alwaysUpdateBuildId = false\r\n            aaptOptions {\r\n                cruncherEnabled false\r\n            }\r\n\r\n```\r\n\r\n**implementations**\r\n\r\n```\r\n    implementation &#39;org.bouncycastle:bcprov-jdk15to18:1.68&#39;\r\n    implementation &#39;org.owasp.encoder:encoder:1.2.3&#39;\r\n\r\n    compile fileTree(include: [&#39;*.jar&#39;], dir: &#39;libs&#39;)\r\n    compile project(&#39;:logfilemanager&#39;)\r\n    compile files(&#39;libs/ormlite-android-4.48.jar&#39;)\r\n    compile files(&#39;libs/ormlite-core-4.48.jar&#39;)\r\n    compile files(&#39;libs/zxing.jar&#39;)\r\n    compile files(&#39;libs/calimero-2.0.4.jar&#39;)\r\n    implementation &#39;com.android.volley:volley:1.2.1&#39;\r\n    implementation &#39;androidx.multidex:multidex:2.0.1&#39;\r\n    implementation &#39;androidx.appcompat:appcompat:1.5.1&#39;\r\n    implementation &#39;androidx.cardview:cardview:1.0.0&#39;\r\n    implementation &#39;cat.ereza:customactivityoncrash:2.4.0&#39;\r\n    compile group: &#39;cz.msebera.android&#39;, name: &#39;httpclient&#39;, version: &#39;4.5.8&#39;\r\n    implementation &#39;com.google.android.gms:play-services-location:20.0.0&#39;\r\n    implementation &#39;org.kie.modules:org-apache-commons-net:6.5.0.Final&#39;\r\n    implementation &#39;com.github.bumptech.glide:glide:4.13.2&#39;\r\n    implementation &#39;com.github.justzak:dilatingdotsprogressbar:1.0.1&#39;\r\n    implementation &#39;com.google.code.gson:gson:2.9.1&#39;\r\n    implementation &quot;androidx.recyclerview:recyclerview:1.2.1&quot;\r\n    implementation &#39;org.java-websocket:Java-WebSocket:1.5.3&#39;\r\n    implementation(&quot;com.squareup.okhttp3:okhttp:4.10.0&quot;)\r\n    implementation group: &#39;commons-fileupload&#39;, name: &#39;commons-fileupload&#39;, version: &#39;1.4&#39;\r\n    implementation &#39;javax.servlet:javax.servlet-api:4.0.1&#39;\r\n```","title":"My project&#39;s structure is broken when using Proguard","body":"<p>I'm trying to add proguard rules. Even if I don't add these rules, some things break in my project the moment I set minifyEnabled to true. For example, the socket structure is broken, while trying to communicate with another device over socket, it receives requests but cannot send a response. Another example is not printing some values while writing xml. All of this happens the moment I set minifyEnabled to true. The project is huge and I'm not sure what caused it.</p>\n<p>Can you suggest an idea or alternative tool to find the source of the problem and solve it?</p>\n<p>As I said, even if the rules file is empty, even if I just set the minifyEnabled value to true, these problems occur and I have no idea how to prevent these problems by adding them to the rules file.</p>\n<p><strong>build.gradle</strong></p>\n<pre><code>        release {\n            shrinkResources false\n            minifyEnabled true\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n            buildConfigField(&quot;String&quot;, 'BUNDLE_DATE', '&quot;17.06.2021 09:08&quot;')\n            buildConfigField(&quot;String&quot;, 'BUNDLE_ID', '&quot;13&quot;')\n        }\n        debug {\n            minifyEnabled true\n            shrinkResources false\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n            ext.enableCrashlytics = false\n            ext.alwaysUpdateBuildId = false\n            aaptOptions {\n                cruncherEnabled false\n            }\n\n</code></pre>\n<p><strong>implementations</strong></p>\n<pre><code>    implementation 'org.bouncycastle:bcprov-jdk15to18:1.68'\n    implementation 'org.owasp.encoder:encoder:1.2.3'\n\n    compile fileTree(include: ['*.jar'], dir: 'libs')\n    compile project(':logfilemanager')\n    compile files('libs/ormlite-android-4.48.jar')\n    compile files('libs/ormlite-core-4.48.jar')\n    compile files('libs/zxing.jar')\n    compile files('libs/calimero-2.0.4.jar')\n    implementation 'com.android.volley:volley:1.2.1'\n    implementation 'androidx.multidex:multidex:2.0.1'\n    implementation 'androidx.appcompat:appcompat:1.5.1'\n    implementation 'androidx.cardview:cardview:1.0.0'\n    implementation 'cat.ereza:customactivityoncrash:2.4.0'\n    compile group: 'cz.msebera.android', name: 'httpclient', version: '4.5.8'\n    implementation 'com.google.android.gms:play-services-location:20.0.0'\n    implementation 'org.kie.modules:org-apache-commons-net:6.5.0.Final'\n    implementation 'com.github.bumptech.glide:glide:4.13.2'\n    implementation 'com.github.justzak:dilatingdotsprogressbar:1.0.1'\n    implementation 'com.google.code.gson:gson:2.9.1'\n    implementation &quot;androidx.recyclerview:recyclerview:1.2.1&quot;\n    implementation 'org.java-websocket:Java-WebSocket:1.5.3'\n    implementation(&quot;com.squareup.okhttp3:okhttp:4.10.0&quot;)\n    implementation group: 'commons-fileupload', name: 'commons-fileupload', version: '1.4'\n    implementation 'javax.servlet:javax.servlet-api:4.0.1'\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-security"],"comments":[{"owner":{"account_id":6388117,"reputation":706,"user_id":4955304,"accept_rate":89,"display_name":"Adam Gerard"},"score":1,"creation_date":1494034912,"post_id":43815455,"comment_id":74670956,"body_markdown":"Does .antMatchers(&quot;/*.html&quot;).permitAll() work for you? I was under the impression that ** is for directories and * for characters: http://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/util/AntPathMatcher.html","body":"Does .antMatchers(&quot;/*.html&quot;).permitAll() work for you? I was under the impression that ** is for directories and * for characters: <a href=\"http://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/util/AntPathMatcher.html\" rel=\"nofollow noreferrer\">docs.spring.io/spring-framework/docs/current/javadoc-api/org&zwnj;&#8203;/&hellip;</a>"},{"owner":{"account_id":159676,"reputation":88203,"user_id":379235,"accept_rate":62,"display_name":"daydreamer"},"score":0,"creation_date":1494037034,"post_id":43815455,"comment_id":74671262,"body_markdown":"that does not work either","body":"that does not work either"},{"owner":{"account_id":6463892,"reputation":15974,"user_id":5277820,"accept_rate":68,"display_name":"dur"},"score":0,"creation_date":1494063359,"post_id":43815455,"comment_id":74676318,"body_markdown":"Did you annotate your `WebSecurityConfig` class with `@Configuration`? And show your `LoginFilter` and `TokenFilter`.","body":"Did you annotate your <code>WebSecurityConfig</code> class with <code>@Configuration</code>? And show your <code>LoginFilter</code> and <code>TokenFilter</code>."},{"owner":{"account_id":6463892,"reputation":15974,"user_id":5277820,"accept_rate":68,"display_name":"dur"},"score":0,"creation_date":1494063644,"post_id":43815455,"comment_id":74676401,"body_markdown":"And what response do you get? 401, 403 or ...","body":"And what response do you get? 401, 403 or ..."}],"answers":[{"comments":[{"owner":{"account_id":159676,"reputation":88203,"user_id":379235,"accept_rate":62,"display_name":"daydreamer"},"score":0,"creation_date":1494052400,"post_id":43816569,"comment_id":74673785,"body_markdown":"nope, there is somethings about the order I guess which is wrong","body":"nope, there is somethings about the order I guess which is wrong"},{"owner":{"account_id":2067188,"reputation":2606,"user_id":1842482,"accept_rate":100,"display_name":"chaoluo"},"score":1,"creation_date":1494058801,"post_id":43816569,"comment_id":74675166,"body_markdown":"You can debug in `org.springframework.security.web.FilterChainProxy#doFilterInternal` to watch all the filter chains. or you can enable the spring security debugger to watch the logger.","body":"You can debug in <code>org.springframework.security.web.FilterChainProxy#doFilterIn&zwnj;&#8203;ternal</code> to watch all the filter chains. or you can enable the spring security debugger to watch the logger."}],"tags":[],"owner":{"account_id":2067188,"reputation":2606,"user_id":1842482,"accept_rate":100,"display_name":"chaoluo"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1494051879,"creation_date":1494043083,"answer_id":43816569,"question_id":43815455,"body_markdown":"try to change to `/**/index.html`. For Ant path matcher\r\n\r\n\r\n    ? matches one character\r\n    * matches zero or more characters\r\n    ** matches zero or more directories in a path\r\n    {spring:[a-z]+} matches the regexp [a-z]+ as a path variable named &quot;spring&quot;","title":"Spring Boot doesn&#39;t serve HTML after Spring Security is enabled","body":"<p>try to change to <code>/**/index.html</code>. For Ant path matcher</p>\n\n<pre><code>? matches one character\n* matches zero or more characters\n** matches zero or more directories in a path\n{spring:[a-z]+} matches the regexp [a-z]+ as a path variable named \"spring\"\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17558126,"reputation":53,"user_id":13350024,"display_name":"Abraham Zsombor Nagy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681125740,"creation_date":1681124443,"answer_id":75976504,"question_id":43815455,"body_markdown":"I came across the same issue. I followed [this](https://stackoverflow.com/questions/24661289/spring-boot-not-serving-static-content) to solve basic static content issue where adding a configuration class that extends WebMvcConfigurer solved that issue.\r\n\r\nBut it was just a `@Configuration` bean.\r\n\r\nWhen I changed it to `@EnableWebMvc` as mentioned [here](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/servlet/config/annotation/WebMvcConfigurer.html), static content loaded after enabling Spring Security.\r\n\r\nInterestingly when I had both annotation, it didn&#39;t work.","title":"Spring Boot doesn&#39;t serve HTML after Spring Security is enabled","body":"<p>I came across the same issue. I followed <a href=\"https://stackoverflow.com/questions/24661289/spring-boot-not-serving-static-content\">this</a> to solve basic static content issue where adding a configuration class that extends WebMvcConfigurer solved that issue.</p>\n<p>But it was just a <code>@Configuration</code> bean.</p>\n<p>When I changed it to <code>@EnableWebMvc</code> as mentioned <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/servlet/config/annotation/WebMvcConfigurer.html\" rel=\"nofollow noreferrer\">here</a>, static content loaded after enabling Spring Security.</p>\n<p>Interestingly when I had both annotation, it didn't work.</p>\n"}],"owner":{"account_id":159676,"reputation":88203,"user_id":379235,"accept_rate":62,"display_name":"daydreamer"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1033,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1681125740,"creation_date":1494030612,"question_id":43815455,"body_markdown":"In my Spring Boot application, I configure Spring Security as\r\n\r\n    @EnableWebSecurity\r\n    public class WebSecurityConfig extends WebSecurityConfigurerAdapter {\r\n    \r\n      @Override\r\n      public void configure(HttpSecurity http) throws Exception {\r\n        http.csrf().disable().authorizeRequests()\r\n            .antMatchers(&quot;/css/**&quot;, &quot;/js/**&quot;, &quot;/images/**&quot;, &quot;**/index.html&quot;).permitAll()\r\n            .antMatchers(&quot;/**.html&quot;).permitAll()\r\n            .antMatchers(HttpMethod.POST, &quot;/login&quot;).permitAll()\r\n            .anyRequest().authenticated()\r\n            .and()\r\n            .addFilterBefore(new LoginFilter(&quot;/login&quot;), BasicAuthenticationFilter.class)\r\n            .addFilterBefore(new TokenFilter(), BasicAuthenticationFilter.class);\r\n      }\r\n    }\r\n\r\nI have `index.html` under `resources/static/index.html`. This stopped serving after I enabled security. What am I missing?\r\n \r\nIf I go back when I do not have any security, I get my HTML rendered on server.","title":"Spring Boot doesn&#39;t serve HTML after Spring Security is enabled","body":"<p>In my Spring Boot application, I configure Spring Security as</p>\n\n<pre><code>@EnableWebSecurity\npublic class WebSecurityConfig extends WebSecurityConfigurerAdapter {\n\n  @Override\n  public void configure(HttpSecurity http) throws Exception {\n    http.csrf().disable().authorizeRequests()\n        .antMatchers(\"/css/**\", \"/js/**\", \"/images/**\", \"**/index.html\").permitAll()\n        .antMatchers(\"/**.html\").permitAll()\n        .antMatchers(HttpMethod.POST, \"/login\").permitAll()\n        .anyRequest().authenticated()\n        .and()\n        .addFilterBefore(new LoginFilter(\"/login\"), BasicAuthenticationFilter.class)\n        .addFilterBefore(new TokenFilter(), BasicAuthenticationFilter.class);\n  }\n}\n</code></pre>\n\n<p>I have <code>index.html</code> under <code>resources/static/index.html</code>. This stopped serving after I enabled security. What am I missing?</p>\n\n<p>If I go back when I do not have any security, I get my HTML rendered on server.</p>\n"},{"tags":["java","drools","optaplanner","constraint-programming","optaweb-employee-rostering"],"owner":{"account_id":27452345,"reputation":3,"user_id":20944374,"display_name":"Ubaid Ghante"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681125366,"creation_date":1681125366,"question_id":75976595,"body_markdown":"I have this constraint\r\n```\r\nConstraint noOverlappingShifts(ConstraintFactory constraintFactory) {\r\n        return constraintFactory.forEachUniquePair(Shift.class,\r\n                equal(Shift::getEmployee),\r\n                overlapping(Shift::getStartDateTime, Shift::getEndDateTime),\r\n                equal(Shift::getstatus))\r\n                .penalizeConfigurableLong(CONSTRAINT_NO_OVERLAPPING_SHIFTS,\r\n                        (shift, otherShift) -&gt; otherShift.getLengthInMinutes());\r\n    }\r\n```\r\nNow i want to change the second equal to not equal but Joiner class in optaplanner does not contain this. There is a filtering method but not sure how to use it.I am using employee rostering pre complied optaplanner, if possible suggest code changes in the above code rather than core.\r\n\r\nAlso this is how the filtering method is defined\r\n```\r\npublic static &lt;A, B&gt; BiJoiner&lt;A, B&gt; filtering(BiPredicate&lt;A, B&gt; filter) {\r\n        return JoinerSupport.getJoinerService()\r\n                .newBiJoiner(filter);\r\n    }\r\n```\r\nThanks in advance.\r\nAlso can you let me know where can i ask optaplanner related queries.\r\n\r\nI tried filter like this\r\n```\r\nConstraint noOverlappingShifts(ConstraintFactory constraintFactory) {\r\n        return constraintFactory.forEachUniquePair(Shift.class,\r\n                equal(Shift::getEmployee),\r\n                overlapping(Shift::getStartDateTime, Shift::getEndDateTime),\r\n                filtering((shift, otherShift) -&gt; !Objects.equals(shift.getstatus(), \r\n                .penalizeConfigurableLong(CONSTRAINT_NO_OVERLAPPING_SHIFTS,\r\n                        (shift, otherShift) -&gt; otherShift.getLengthInMinutes());\r\n    } \r\n```\r\n\r\nInstead of using java can i directly use a drool file to write constraints. If so how do link it in my code.","title":"How to change constraints in optaplanner?","body":"<p>I have this constraint</p>\n<pre><code>Constraint noOverlappingShifts(ConstraintFactory constraintFactory) {\n        return constraintFactory.forEachUniquePair(Shift.class,\n                equal(Shift::getEmployee),\n                overlapping(Shift::getStartDateTime, Shift::getEndDateTime),\n                equal(Shift::getstatus))\n                .penalizeConfigurableLong(CONSTRAINT_NO_OVERLAPPING_SHIFTS,\n                        (shift, otherShift) -&gt; otherShift.getLengthInMinutes());\n    }\n</code></pre>\n<p>Now i want to change the second equal to not equal but Joiner class in optaplanner does not contain this. There is a filtering method but not sure how to use it.I am using employee rostering pre complied optaplanner, if possible suggest code changes in the above code rather than core.</p>\n<p>Also this is how the filtering method is defined</p>\n<pre><code>public static &lt;A, B&gt; BiJoiner&lt;A, B&gt; filtering(BiPredicate&lt;A, B&gt; filter) {\n        return JoinerSupport.getJoinerService()\n                .newBiJoiner(filter);\n    }\n</code></pre>\n<p>Thanks in advance.\nAlso can you let me know where can i ask optaplanner related queries.</p>\n<p>I tried filter like this</p>\n<pre><code>Constraint noOverlappingShifts(ConstraintFactory constraintFactory) {\n        return constraintFactory.forEachUniquePair(Shift.class,\n                equal(Shift::getEmployee),\n                overlapping(Shift::getStartDateTime, Shift::getEndDateTime),\n                filtering((shift, otherShift) -&gt; !Objects.equals(shift.getstatus(), \n                .penalizeConfigurableLong(CONSTRAINT_NO_OVERLAPPING_SHIFTS,\n                        (shift, otherShift) -&gt; otherShift.getLengthInMinutes());\n    } \n</code></pre>\n<p>Instead of using java can i directly use a drool file to write constraints. If so how do link it in my code.</p>\n"},{"tags":["java","spring","spring-boot","open-telemetry","spring-cloud-sleuth"],"owner":{"account_id":246941,"reputation":1582,"user_id":521347,"accept_rate":60,"display_name":"Sumit Desai"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":448,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681125150,"creation_date":1681124086,"question_id":75976465,"body_markdown":"I had created a Spring-boot micro-service using spring-cloud-sleuth for distributed-tracing. I had a otel-collector which was receiving logs and traces from the application and it was exporting it to Datadog. The flow was working properly.\r\n\r\nHowever, starting from Spring-boot 3.0.5, support of sleuth is removed and observability has been split into two parts some in Spring-boot itself and some part in micrometer. I upgraded my spring-boot version and made changes to export traces to otel-collector but I am not able to get it working. I enabled the Spring debug logs and I can see that the bean for [OpenTelemetryAutoConfiguration][1] is being created. Can someone help me understand if I am doing anything wrong? I am posting the debug logs related to class OpenTelemetryAutoConfiguration below. The messages indicate all the beans in this class are properly loaded. I am expecting an error saying unable to connect at some IP and port but getting nothing\r\n\r\n    OpenTelemetryAutoConfiguration matched:\r\n          - @ConditionalOnClass found required classes &#39;io.micrometer.tracing.otel.bridge.OtelTracer&#39;, &#39;io.opentelemetry.sdk.trace.SdkTracerProvider&#39;, &#39;io.opentelemetry.api.OpenTelemetry&#39; (OnClassCondition)\r\n          - @ConditionalOnProperty (management.tracing.enabled) matched (OnPropertyCondition)\r\n    \r\n       OpenTelemetryAutoConfiguration#micrometerOtelTracer matched:\r\n          - @ConditionalOnMissingBean (types: io.micrometer.tracing.Tracer; SearchStrategy: all) did not find any beans (OnBeanCondition)\r\n    \r\n       OpenTelemetryAutoConfiguration#openTelemetry matched:\r\n          - @ConditionalOnMissingBean (types: io.opentelemetry.api.OpenTelemetry; SearchStrategy: all) did not find any beans (OnBeanCondition)\r\n    \r\n       OpenTelemetryAutoConfiguration#otelContextPropagators matched:\r\n          - @ConditionalOnMissingBean (types: io.opentelemetry.context.propagation.ContextPropagators; SearchStrategy: all) did not find any beans (OnBeanCondition)\r\n    \r\n       OpenTelemetryAutoConfiguration#otelCurrentTraceContext matched:\r\n          - @ConditionalOnMissingBean (types: io.micrometer.tracing.otel.bridge.OtelCurrentTraceContext; SearchStrategy: all) did not find any beans (OnBeanCondition)\r\n    \r\n       OpenTelemetryAutoConfiguration#otelPropagator matched:\r\n          - @ConditionalOnMissingBean (types: io.micrometer.tracing.otel.bridge.OtelPropagator; SearchStrategy: all) did not find any beans (OnBeanCondition)\r\n    \r\n       OpenTelemetryAutoConfiguration#otelSampler matched:\r\n          - @ConditionalOnMissingBean (types: io.opentelemetry.sdk.trace.samplers.Sampler; SearchStrategy: all) did not find any beans (OnBeanCondition)\r\n    \r\n       OpenTelemetryAutoConfiguration#otelSdkTracerProvider matched:\r\n          - @ConditionalOnMissingBean (types: io.opentelemetry.sdk.trace.SdkTracerProvider; SearchStrategy: all) did not find any beans (OnBeanCondition)\r\n    \r\n       OpenTelemetryAutoConfiguration#otelSlf4JEventListener matched:\r\n          - @ConditionalOnMissingBean (types: io.micrometer.tracing.otel.bridge.Slf4JEventListener; SearchStrategy: all) did not find any beans (OnBeanCondition)\r\n    \r\n       OpenTelemetryAutoConfiguration#otelSpanCustomizer matched:\r\n          - @ConditionalOnMissingBean (types: io.micrometer.tracing.SpanCustomizer; SearchStrategy: all) did not find any beans (OnBeanCondition)\r\n    \r\n       OpenTelemetryAutoConfiguration#otelTracer matched:\r\n          - @ConditionalOnMissingBean (types: io.opentelemetry.api.trace.Tracer; SearchStrategy: all) did not find any beans (OnBeanCondition)\r\n    \r\n       OpenTelemetryAutoConfiguration#otelTracerEventPublisher matched:\r\n          - @ConditionalOnMissingBean (types: io.micrometer.tracing.otel.bridge.OtelTracer$EventPublisher; SearchStrategy: all) did not find any beans (OnBeanCondition)\r\n    \r\n       OpenTelemetryAutoConfiguration.BaggageConfiguration matched:\r\n          - @ConditionalOnProperty (management.tracing.baggage.enabled) matched (OnPropertyCondition)\r\n    \r\n       OpenTelemetryAutoConfiguration.BaggageConfiguration#otelSlf4JBaggageEventListener matched:\r\n          - @ConditionalOnProperty (management.tracing.baggage.correlation.enabled) matched (OnPropertyCondition)\r\n          - @ConditionalOnMissingBean (types: io.micrometer.tracing.otel.bridge.Slf4JBaggageEventListener; SearchStrategy: all) did not find any beans (OnBeanCondition)\r\n    \r\n       OpenTelemetryAutoConfiguration.BaggageConfiguration#w3cTextMapPropagatorWithBaggage matched:\r\n          - @ConditionalOnProperty (management.tracing.propagation.type=W3C) matched (OnPropertyCondition)\r\n\r\n\r\n  [1]: https://github.com/spring-projects/spring-boot/blob/main/spring-boot-project/spring-boot-actuator-autoconfigure/src/main/java/org/springframework/boot/actuate/autoconfigure/tracing/OpenTelemetryAutoConfiguration.java","title":"Unable to get automatic-instrumentation with Spring boot and otel-collector working","body":"<p>I had created a Spring-boot micro-service using spring-cloud-sleuth for distributed-tracing. I had a otel-collector which was receiving logs and traces from the application and it was exporting it to Datadog. The flow was working properly.</p>\n<p>However, starting from Spring-boot 3.0.5, support of sleuth is removed and observability has been split into two parts some in Spring-boot itself and some part in micrometer. I upgraded my spring-boot version and made changes to export traces to otel-collector but I am not able to get it working. I enabled the Spring debug logs and I can see that the bean for <a href=\"https://github.com/spring-projects/spring-boot/blob/main/spring-boot-project/spring-boot-actuator-autoconfigure/src/main/java/org/springframework/boot/actuate/autoconfigure/tracing/OpenTelemetryAutoConfiguration.java\" rel=\"nofollow noreferrer\">OpenTelemetryAutoConfiguration</a> is being created. Can someone help me understand if I am doing anything wrong? I am posting the debug logs related to class OpenTelemetryAutoConfiguration below. The messages indicate all the beans in this class are properly loaded. I am expecting an error saying unable to connect at some IP and port but getting nothing</p>\n<pre><code>OpenTelemetryAutoConfiguration matched:\n      - @ConditionalOnClass found required classes 'io.micrometer.tracing.otel.bridge.OtelTracer', 'io.opentelemetry.sdk.trace.SdkTracerProvider', 'io.opentelemetry.api.OpenTelemetry' (OnClassCondition)\n      - @ConditionalOnProperty (management.tracing.enabled) matched (OnPropertyCondition)\n\n   OpenTelemetryAutoConfiguration#micrometerOtelTracer matched:\n      - @ConditionalOnMissingBean (types: io.micrometer.tracing.Tracer; SearchStrategy: all) did not find any beans (OnBeanCondition)\n\n   OpenTelemetryAutoConfiguration#openTelemetry matched:\n      - @ConditionalOnMissingBean (types: io.opentelemetry.api.OpenTelemetry; SearchStrategy: all) did not find any beans (OnBeanCondition)\n\n   OpenTelemetryAutoConfiguration#otelContextPropagators matched:\n      - @ConditionalOnMissingBean (types: io.opentelemetry.context.propagation.ContextPropagators; SearchStrategy: all) did not find any beans (OnBeanCondition)\n\n   OpenTelemetryAutoConfiguration#otelCurrentTraceContext matched:\n      - @ConditionalOnMissingBean (types: io.micrometer.tracing.otel.bridge.OtelCurrentTraceContext; SearchStrategy: all) did not find any beans (OnBeanCondition)\n\n   OpenTelemetryAutoConfiguration#otelPropagator matched:\n      - @ConditionalOnMissingBean (types: io.micrometer.tracing.otel.bridge.OtelPropagator; SearchStrategy: all) did not find any beans (OnBeanCondition)\n\n   OpenTelemetryAutoConfiguration#otelSampler matched:\n      - @ConditionalOnMissingBean (types: io.opentelemetry.sdk.trace.samplers.Sampler; SearchStrategy: all) did not find any beans (OnBeanCondition)\n\n   OpenTelemetryAutoConfiguration#otelSdkTracerProvider matched:\n      - @ConditionalOnMissingBean (types: io.opentelemetry.sdk.trace.SdkTracerProvider; SearchStrategy: all) did not find any beans (OnBeanCondition)\n\n   OpenTelemetryAutoConfiguration#otelSlf4JEventListener matched:\n      - @ConditionalOnMissingBean (types: io.micrometer.tracing.otel.bridge.Slf4JEventListener; SearchStrategy: all) did not find any beans (OnBeanCondition)\n\n   OpenTelemetryAutoConfiguration#otelSpanCustomizer matched:\n      - @ConditionalOnMissingBean (types: io.micrometer.tracing.SpanCustomizer; SearchStrategy: all) did not find any beans (OnBeanCondition)\n\n   OpenTelemetryAutoConfiguration#otelTracer matched:\n      - @ConditionalOnMissingBean (types: io.opentelemetry.api.trace.Tracer; SearchStrategy: all) did not find any beans (OnBeanCondition)\n\n   OpenTelemetryAutoConfiguration#otelTracerEventPublisher matched:\n      - @ConditionalOnMissingBean (types: io.micrometer.tracing.otel.bridge.OtelTracer$EventPublisher; SearchStrategy: all) did not find any beans (OnBeanCondition)\n\n   OpenTelemetryAutoConfiguration.BaggageConfiguration matched:\n      - @ConditionalOnProperty (management.tracing.baggage.enabled) matched (OnPropertyCondition)\n\n   OpenTelemetryAutoConfiguration.BaggageConfiguration#otelSlf4JBaggageEventListener matched:\n      - @ConditionalOnProperty (management.tracing.baggage.correlation.enabled) matched (OnPropertyCondition)\n      - @ConditionalOnMissingBean (types: io.micrometer.tracing.otel.bridge.Slf4JBaggageEventListener; SearchStrategy: all) did not find any beans (OnBeanCondition)\n\n   OpenTelemetryAutoConfiguration.BaggageConfiguration#w3cTextMapPropagatorWithBaggage matched:\n      - @ConditionalOnProperty (management.tracing.propagation.type=W3C) matched (OnPropertyCondition)\n</code></pre>\n"},{"tags":["java","postgresql","jpa","spring-data-jpa","nativequery"],"comments":[{"owner":{"display_name":"user330315"},"score":0,"creation_date":1681124484,"post_id":75976346,"comment_id":134001854,"body_markdown":"`right` is a reserved keyword. So you need double quotes: `where &quot;right&quot; = ...`. If you are using a native query in JPQL, the `ARRAY[...]` syntax should work. Alternatively use a string constant for the array `where &quot;right&quot; = &#39;{1,2}&#39;`","body":"<code>right</code> is a reserved keyword. So you need double quotes: <code>where &quot;right&quot; = ...</code>. If you are using a native query in JPQL, the <code>ARRAY[...]</code> syntax should work. Alternatively use a string constant for the array <code>where &quot;right&quot; = &#39;{1,2}&#39;</code>"},{"owner":{"account_id":25192367,"reputation":55,"user_id":19032411,"display_name":"stakeika"},"score":0,"creation_date":1681125383,"post_id":75976346,"comment_id":134001989,"body_markdown":"@a_horse_with_no_name I&#39;m sorry for confusion, the field name is actually `authority_right`, I shortened it intentionally in the question. I&#39;ve tried your suggestion `where &quot;right&quot; = &#39;{1,2}&#39;`, unfortunately it produces another validation error `person is not mapped`","body":"@a_horse_with_no_name I&#39;m sorry for confusion, the field name is actually <code>authority_right</code>, I shortened it intentionally in the question. I&#39;ve tried your suggestion <code>where &quot;right&quot; = &#39;{1,2}&#39;</code>, unfortunately it produces another validation error <code>person is not mapped</code>"}],"owner":{"account_id":25192367,"reputation":55,"user_id":19032411,"display_name":"stakeika"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":109,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681125064,"creation_date":1681123067,"question_id":75976346,"body_markdown":"My query is:\r\n\r\n    SELECT id\r\n    FROM person\r\n    WHERE authority_right = ARRAY[1,2]\r\n\r\n`authority_right` is integer array. My goal is to find people who have \r\n`authority_right` exactly equal to [1,2], not [1] and not [2]. This query is executed successfully in console, but a validation error occurs when I launch my application with `@Query` using the exact same code.\r\nError occurs in this area: `ARRAY[1,2]`. \r\nMessage in logs:\r\n\r\n    expecting CLOSE_BRACKET, found &#39;,&#39;\r\n\r\nMessage in editor:\r\n\r\n    &lt;expression&gt;, &lt;operator&gt;, GROUP, HAVING or ORDER expected, got &#39;{&#39;\r\n\r\nI also tried using `INT{1, 2}` and some combinations of brackets, but I haven&#39;t succeed. How can I make it work?\r\n","title":"JPA Native Query doesn&#39;t seem to support PostgreSQL ARRAY function","body":"<p>My query is:</p>\n<pre><code>SELECT id\nFROM person\nWHERE authority_right = ARRAY[1,2]\n</code></pre>\n<p><code>authority_right</code> is integer array. My goal is to find people who have\n<code>authority_right</code> exactly equal to [1,2], not [1] and not [2]. This query is executed successfully in console, but a validation error occurs when I launch my application with <code>@Query</code> using the exact same code.\nError occurs in this area: <code>ARRAY[1,2]</code>.\nMessage in logs:</p>\n<pre><code>expecting CLOSE_BRACKET, found ','\n</code></pre>\n<p>Message in editor:</p>\n<pre><code>&lt;expression&gt;, &lt;operator&gt;, GROUP, HAVING or ORDER expected, got '{'\n</code></pre>\n<p>I also tried using <code>INT{1, 2}</code> and some combinations of brackets, but I haven't succeed. How can I make it work?</p>\n"},{"tags":["java","gradle","environment-variables","gradle-task","system-variable"],"comments":[{"owner":{"account_id":15994883,"reputation":3427,"user_id":11543023,"display_name":"djmonki"},"score":0,"creation_date":1680523291,"post_id":75900667,"comment_id":133907516,"body_markdown":"Assume this is to have the variable available during build/deploy time, but not during runtime?","body":"Assume this is to have the variable available during build/deploy time, but not during runtime?"},{"owner":{"account_id":5218565,"reputation":1034,"user_id":6540591,"display_name":"User51"},"score":0,"creation_date":1680616460,"post_id":75900667,"comment_id":133925862,"body_markdown":"It looks like you referenced this question, https://stackoverflow.com/questions/36322536/how-to-set-an-environment-variable-from-a-gradle-build .  The issue is scope for most of these...  You set an env var for a task, but then it disappears when the task completes.  For the `Exec` task, environment lasts for the task, same with most others.  In the same question, it suggested `run.doFirst { environment &#39;A&#39;, &#39;B&#39; }`.  I assume you tried that as well?  The `run` would apply the env value for a `run`, but it depends what your target task and type are.","body":"It looks like you referenced this question, <a href=\"https://stackoverflow.com/questions/36322536/how-to-set-an-environment-variable-from-a-gradle-build\" title=\"how to set an environment variable from a gradle build\">stackoverflow.com/questions/36322536/&hellip;</a> .  The issue is scope for most of these...  You set an env var for a task, but then it disappears when the task completes.  For the <code>Exec</code> task, environment lasts for the task, same with most others.  In the same question, it suggested <code>run.doFirst { environment &#39;A&#39;, &#39;B&#39; }</code>.  I assume you tried that as well?  The <code>run</code> would apply the env value for a <code>run</code>, but it depends what your target task and type are."},{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":3,"creation_date":1680626470,"post_id":75900667,"comment_id":133928615,"body_markdown":"Stepping back a moment, what are you trying to achieve by setting this environment variable? The notions of scope are already addressed: your variable only lives as long as the thing that defined it (unix shells have `.bashrc`, programs on both OSes inherit env variables from their parent process). Ask yourself this as well: do you have any other storage medium that _would_ be persistent (e.g. a file in a common config dir)?","body":"Stepping back a moment, what are you trying to achieve by setting this environment variable? The notions of scope are already addressed: your variable only lives as long as the thing that defined it (unix shells have <code>.bashrc</code>, programs on both OSes inherit env variables from their parent process). Ask yourself this as well: do you have any other storage medium that <i>would</i> be persistent (e.g. a file in a common config dir)?"}],"answers":[{"tags":[],"owner":{"account_id":288740,"reputation":36435,"user_id":589329,"accept_rate":40,"display_name":"Vampire"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680736627,"creation_date":1680736627,"answer_id":75944663,"question_id":75900667,"body_markdown":"&gt; The problem I&#39;m facing is that if I specify it like this\r\n&gt; ```\r\n&gt; test {\r\n&gt;     environment &#39;PROJECT_DIR&#39;, &quot;${projectDir}&quot;\r\n&gt; }\r\n&gt; ```\r\n\r\nThis is exactly the right way to set an environment variable that is accessible while you are executing the `test` task.\r\n\r\n&gt; and access it like this from my java file\r\n&gt; ```\r\n&gt; String projectDir = System.getenv(&quot;PROJECT_DIR&quot;);\r\n&gt; ```\r\n&gt; projectDir is null because I assume it&#39;s not part of test files. \r\n\r\nIt does not matter whether it is a &quot;test file&quot; or a &quot;production file&quot;.\r\nAs you set the environment variable on the `test` task, it will be available and accessible during execution of the `test` task. So it can hardly be that it is `null` during the exeuction of the test task, except if you have a typo somewhere or missed to provide complete information.\r\n\r\n&gt; If I specify it like this\r\n&gt; ```\r\n&gt; task MyTask(type: Exec) {\r\n&gt;     environment &#39;PROJECT_DIR&#39;, &quot;${projectDir}&quot;\r\n&gt; }\r\n&gt; \r\n&gt; tasks.withType(JavaCompile) {\r\n&gt;     compileTask -&gt; compileTask.dependsOn MyTask\r\n&gt; }\r\n&gt; ```\r\n\r\nThis does not make any sense, really.\r\nYou define an `Exec` task, which is a task that executes some executable.\r\nDuring execution of that executable, the environment variable would be set.\r\nBut you do not configure which executable to execute, so what should happen?\r\n\r\nThen you make your Java compilation task depend on that `Exec` task which makes even less sense. Besides that any `dependsOn` is a code-smell (except if a lifecycle task is on the left-hand side) and should be avoided.\r\n\r\n&gt; and accessing the same way as before, it gives an error saying \r\n&gt; ```\r\n&gt; Execution failed for task &#39;&lt;project-name&gt;:MyTask&#39;.\r\n&gt; &gt; execCommand == null!\r\n&gt; ```\r\n\r\nYep, that is because you did not tell the `Exec` task which executable to execute as I just explained above.\r\n\r\n&gt; If I try to do something similar for system property like \r\n&gt; ```\r\n&gt; task setProp(type: Exec) {\r\n&gt;     systemProperty &#39;PROJECT_DIR&#39;, &quot;${projectDir}&quot;\r\n&gt; }\r\n&gt; tasks.withType(JavaCompile) {\r\n&gt;     compileTask -&gt; compileTask.dependsOn MyTask\r\n&gt; }\r\n&gt; ```\r\n&gt; and accessing it like\r\n&gt; ```\r\n&gt; String projectDir = System.getProperty(&quot;PROJECT_DIR&quot;);\r\n&gt; ```\r\n&gt; it ends up with this error\r\n&gt; ```\r\n&gt; Could not find method systemProperty() for arguments [PROJECT_DIR, &lt;path&gt;]\r\n&gt; ```\r\n\r\nSame comments as with the last example above.\r\nBut additionally, what should a system property be in the context of an `Exec` task that executes an arbitrary executable.\r\nSystem properties are a Java specific thing, so you cannot set a system property on a generic `Exec` task.\r\n\r\n&gt; At the end of the day, I could find nothing that works out. However, both `environment &#39;PROJECT_DIR&#39;, &quot;${projectDir}&quot;` and `systemProperty &#39;PROJECT_DIR&#39;, &quot;${projectDir}&quot;` work if I include them in an existing JavaExec task. The problem is that my file cannot be triggered by any kind of JavaExec tasks as it is part of a bigger deployed service, so setting it through build.gradle seems like my only resort. \r\n\r\nIf I got you right here, then this paragraph is the most important in your question.\r\nDo I get you right, that you want to set this property at build time using your build script, but then expect it to be available to your production code when running outside of Gradle in the &quot;bigger deployed service&quot;?\r\n\r\nThis cannot work, what you set in Gradle is only available during the execution of the task you are setting them on. They cannot be persisted automagically or something like that. That would also be completely against what they are for. They are there so that you can configure things at runtime, not at build time, so that for example a user of a program can configure certain things.\r\n\r\nIf you want to set the property at build time and then access it at runtime, you need to generate this value into a file. For this you can for example use a task of type `WriteProperties`, but be aware that you should properly configure it as task generating resources, by giving it to `sourceSets.main.resources.srcDir(...)` as argument, or maybe the easier way is to have a template file in your resources and then configure the `processResources` task to fill in the placeholders in the template for example using `expand`. Then at runtime you can read that properties file to get the value you need.\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"Cannot set environment variable or property in Gradle outside test","body":"<blockquote>\n<p>The problem I'm facing is that if I specify it like this</p>\n<pre><code>test {\n    environment 'PROJECT_DIR', &quot;${projectDir}&quot;\n}\n</code></pre>\n</blockquote>\n<p>This is exactly the right way to set an environment variable that is accessible while you are executing the <code>test</code> task.</p>\n<blockquote>\n<p>and access it like this from my java file</p>\n<pre><code>String projectDir = System.getenv(&quot;PROJECT_DIR&quot;);\n</code></pre>\n<p>projectDir is null because I assume it's not part of test files.</p>\n</blockquote>\n<p>It does not matter whether it is a &quot;test file&quot; or a &quot;production file&quot;.\nAs you set the environment variable on the <code>test</code> task, it will be available and accessible during execution of the <code>test</code> task. So it can hardly be that it is <code>null</code> during the exeuction of the test task, except if you have a typo somewhere or missed to provide complete information.</p>\n<blockquote>\n<p>If I specify it like this</p>\n<pre><code>task MyTask(type: Exec) {\n    environment 'PROJECT_DIR', &quot;${projectDir}&quot;\n}\n\ntasks.withType(JavaCompile) {\n    compileTask -&gt; compileTask.dependsOn MyTask\n}\n</code></pre>\n</blockquote>\n<p>This does not make any sense, really.\nYou define an <code>Exec</code> task, which is a task that executes some executable.\nDuring execution of that executable, the environment variable would be set.\nBut you do not configure which executable to execute, so what should happen?</p>\n<p>Then you make your Java compilation task depend on that <code>Exec</code> task which makes even less sense. Besides that any <code>dependsOn</code> is a code-smell (except if a lifecycle task is on the left-hand side) and should be avoided.</p>\n<blockquote>\n<p>and accessing the same way as before, it gives an error saying</p>\n<pre><code>Execution failed for task '&lt;project-name&gt;:MyTask'.\n&gt; execCommand == null!\n</code></pre>\n</blockquote>\n<p>Yep, that is because you did not tell the <code>Exec</code> task which executable to execute as I just explained above.</p>\n<blockquote>\n<p>If I try to do something similar for system property like</p>\n<pre><code>task setProp(type: Exec) {\n    systemProperty 'PROJECT_DIR', &quot;${projectDir}&quot;\n}\ntasks.withType(JavaCompile) {\n    compileTask -&gt; compileTask.dependsOn MyTask\n}\n</code></pre>\n<p>and accessing it like</p>\n<pre><code>String projectDir = System.getProperty(&quot;PROJECT_DIR&quot;);\n</code></pre>\n<p>it ends up with this error</p>\n<pre><code>Could not find method systemProperty() for arguments [PROJECT_DIR, &lt;path&gt;]\n</code></pre>\n</blockquote>\n<p>Same comments as with the last example above.\nBut additionally, what should a system property be in the context of an <code>Exec</code> task that executes an arbitrary executable.\nSystem properties are a Java specific thing, so you cannot set a system property on a generic <code>Exec</code> task.</p>\n<blockquote>\n<p>At the end of the day, I could find nothing that works out. However, both <code>environment 'PROJECT_DIR', &quot;${projectDir}&quot;</code> and <code>systemProperty 'PROJECT_DIR', &quot;${projectDir}&quot;</code> work if I include them in an existing JavaExec task. The problem is that my file cannot be triggered by any kind of JavaExec tasks as it is part of a bigger deployed service, so setting it through build.gradle seems like my only resort.</p>\n</blockquote>\n<p>If I got you right here, then this paragraph is the most important in your question.\nDo I get you right, that you want to set this property at build time using your build script, but then expect it to be available to your production code when running outside of Gradle in the &quot;bigger deployed service&quot;?</p>\n<p>This cannot work, what you set in Gradle is only available during the execution of the task you are setting them on. They cannot be persisted automagically or something like that. That would also be completely against what they are for. They are there so that you can configure things at runtime, not at build time, so that for example a user of a program can configure certain things.</p>\n<p>If you want to set the property at build time and then access it at runtime, you need to generate this value into a file. For this you can for example use a task of type <code>WriteProperties</code>, but be aware that you should properly configure it as task generating resources, by giving it to <code>sourceSets.main.resources.srcDir(...)</code> as argument, or maybe the easier way is to have a template file in your resources and then configure the <code>processResources</code> task to fill in the placeholders in the template for example using <code>expand</code>. Then at runtime you can read that properties file to get the value you need.</p>\n"},{"tags":[],"owner":{"account_id":1692034,"reputation":3196,"user_id":1554195,"display_name":"tquadrat"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681125031,"creation_date":1681080093,"answer_id":75973235,"question_id":75900667,"body_markdown":"If your goal is to ensure that a particular environment variable (or system property) is set when your program (that one you build with gradle …) starts, then you may want to have a look to [this answer][1].\r\n\r\nGradle generates a start script for each application, and that – as anything else, too – can be configured. The linked answer gives a starting point on how this can be achieved.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/51111231/1554195","title":"Cannot set environment variable or property in Gradle outside test","body":"<p>If your goal is to ensure that a particular environment variable (or system property) is set when your program (that one you build with gradle …) starts, then you may want to have a look to <a href=\"https://stackoverflow.com/a/51111231/1554195\">this answer</a>.</p>\n<p>Gradle generates a start script for each application, and that – as anything else, too – can be configured. The linked answer gives a starting point on how this can be achieved.</p>\n"}],"owner":{"account_id":8495965,"reputation":155,"user_id":6370552,"accept_rate":100,"display_name":"scottstots"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":900,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1681125031,"creation_date":1680279193,"question_id":75900667,"body_markdown":"I have been trying to set a simple environment variable (or system property, whatever works really) through build.gradle file to access it from a java method (which is not part of integration tests) but after exhausting almost every answer on this forum and elsewhere that I could find, I have still not been able to find a working solution. For reference I have to access it from a file in src/main folder.\r\n\r\nThe problem I&#39;m facing is that if I specify it like this\r\n```\r\ntest {\r\n    environment &#39;PROJECT_DIR&#39;, &quot;${projectDir}&quot;\r\n}\r\n```\r\nand access it like this from my java file\r\n```\r\nString projectDir = System.getenv(&quot;PROJECT_DIR&quot;);\r\n```\r\nprojectDir is null because I assume it&#39;s not part of test files. \r\n\r\nIf I specify it like this\r\n```\r\ntask MyTask(type: Exec) {\r\n    environment &#39;PROJECT_DIR&#39;, &quot;${projectDir}&quot;\r\n}\r\n\r\ntasks.withType(JavaCompile) {\r\n    compileTask -&gt; compileTask.dependsOn MyTask\r\n}\r\n```\r\nand accessing the same way as before, it gives an error saying \r\n```\r\nExecution failed for task &#39;&lt;project-name&gt;:MyTask&#39;.\r\n&gt; execCommand == null!\r\n```\r\nIf I try to do something similar for system property like \r\n```\r\ntask setProp(type: Exec) {\r\n    systemProperty &#39;PROJECT_DIR&#39;, &quot;${projectDir}&quot;\r\n}\r\ntasks.withType(JavaCompile) {\r\n    compileTask -&gt; compileTask.dependsOn MyTask\r\n}\r\n```\r\nand accessing it like\r\n```\r\nString projectDir = System.getProperty(&quot;PROJECT_DIR&quot;);\r\n```\r\nit ends up with this error\r\n```\r\nCould not find method systemProperty() for arguments [PROJECT_DIR, &lt;path&gt;]\r\n```\r\nAt the end of the day, I could find nothing that works out. However, both `environment &#39;PROJECT_DIR&#39;, &quot;${projectDir}&quot;` and `systemProperty &#39;PROJECT_DIR&#39;, &quot;${projectDir}&quot;` work if I include them in an existing JavaExec task. The problem is that my file cannot be triggered by any kind of JavaExec tasks as it is part of a bigger deployed service, so setting it through build.gradle seems like my only resort. \r\n\r\nI wanted to check if there is something I&#39;ve missed or some other way I could just make the project directory accessible to my java class. ","title":"Cannot set environment variable or property in Gradle outside test","body":"<p>I have been trying to set a simple environment variable (or system property, whatever works really) through build.gradle file to access it from a java method (which is not part of integration tests) but after exhausting almost every answer on this forum and elsewhere that I could find, I have still not been able to find a working solution. For reference I have to access it from a file in src/main folder.</p>\n<p>The problem I'm facing is that if I specify it like this</p>\n<pre><code>test {\n    environment 'PROJECT_DIR', &quot;${projectDir}&quot;\n}\n</code></pre>\n<p>and access it like this from my java file</p>\n<pre><code>String projectDir = System.getenv(&quot;PROJECT_DIR&quot;);\n</code></pre>\n<p>projectDir is null because I assume it's not part of test files.</p>\n<p>If I specify it like this</p>\n<pre><code>task MyTask(type: Exec) {\n    environment 'PROJECT_DIR', &quot;${projectDir}&quot;\n}\n\ntasks.withType(JavaCompile) {\n    compileTask -&gt; compileTask.dependsOn MyTask\n}\n</code></pre>\n<p>and accessing the same way as before, it gives an error saying</p>\n<pre><code>Execution failed for task '&lt;project-name&gt;:MyTask'.\n&gt; execCommand == null!\n</code></pre>\n<p>If I try to do something similar for system property like</p>\n<pre><code>task setProp(type: Exec) {\n    systemProperty 'PROJECT_DIR', &quot;${projectDir}&quot;\n}\ntasks.withType(JavaCompile) {\n    compileTask -&gt; compileTask.dependsOn MyTask\n}\n</code></pre>\n<p>and accessing it like</p>\n<pre><code>String projectDir = System.getProperty(&quot;PROJECT_DIR&quot;);\n</code></pre>\n<p>it ends up with this error</p>\n<pre><code>Could not find method systemProperty() for arguments [PROJECT_DIR, &lt;path&gt;]\n</code></pre>\n<p>At the end of the day, I could find nothing that works out. However, both <code>environment 'PROJECT_DIR', &quot;${projectDir}&quot;</code> and <code>systemProperty 'PROJECT_DIR', &quot;${projectDir}&quot;</code> work if I include them in an existing JavaExec task. The problem is that my file cannot be triggered by any kind of JavaExec tasks as it is part of a bigger deployed service, so setting it through build.gradle seems like my only resort.</p>\n<p>I wanted to check if there is something I've missed or some other way I could just make the project directory accessible to my java class.</p>\n"},{"tags":["java","apache-camel"],"answers":[{"tags":[],"owner":{"account_id":22100069,"reputation":21,"user_id":16356680,"display_name":"SomeDevDoingStuff"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1681124798,"creation_date":1679675254,"answer_id":75836107,"question_id":69928785,"body_markdown":"In the end, we managed to implement a separate integration server that used the following class to send the test responses:\r\n\r\n    @Component\r\n    public class MllpRoute extends EndpointRouteBuilder {\r\n    \r\n        @Override\r\n        public void configure() {\r\n            onException(HL7Exception.class)\r\n                    .log(&quot;Handling Exception&quot;)\r\n                    .transform(ack(AcknowledgmentCode.AE,&quot;Error transforming the message&quot;,\r\n                            ErrorCode.UNSUPPORTED_MESSAGE_TYPE))\r\n                    .handled(true)\r\n                    .end();\r\n    \r\n            // Successful ack\r\n            from(&quot;mllp://4441&quot;)\r\n                    .log(&quot;Message Received...&quot;)\r\n                    .unmarshal().hl7()\r\n                    .log(&quot;Done unmarshalling...&quot;)\r\n                    .validate(messageConforms())\r\n                    .log(&quot;Done validation...&quot;)\r\n                    .setProperty(MLLP_ACKNOWLEDGEMENT_STRING, ack(AcknowledgmentCode.valueOf(&quot;AA&quot;)))\r\n                    .end();\r\n    \r\n            // Internal Error ack\r\n            from(&quot;mllp://4442&quot;)\r\n                    .log(&quot;Message Received...&quot;)\r\n                    .unmarshal().hl7()\r\n                    .log(&quot;Done unmarshalling...&quot;)\r\n                    .validate(messageConforms())\r\n                    .log(&quot;Done validation...&quot;)\r\n                    .setProperty(MLLP_ACKNOWLEDGEMENT_STRING, ack(AcknowledgmentCode.valueOf(&quot;AE&quot;)))\r\n                    .end();\r\n    \r\n            // Unknown ack\r\n            from(&quot;mllp:4443&quot;)\r\n                    .log(&quot;Message Received...&quot;)\r\n                    .unmarshal().hl7()\r\n                    .log(&quot;Done unmarshalling...&quot;)\r\n                    .validate(messageConforms())\r\n                    .log(&quot;Done validation...&quot;)\r\n                    .setProperty(MLLP_ACKNOWLEDGEMENT_STRING, () -&gt; &quot;UNKNOWN&quot;)\r\n                    .end();\r\n        }\r\n    }\r\n\r\nFor additional context around `messageConforms()` see page: \r\nhttps://camel.apache.org/components/3.20.x/languages/hl7terser-language.html","title":"How to handle [MLLP] acknowledgments using [apache-camel]","body":"<p>In the end, we managed to implement a separate integration server that used the following class to send the test responses:</p>\n<pre><code>@Component\npublic class MllpRoute extends EndpointRouteBuilder {\n\n    @Override\n    public void configure() {\n        onException(HL7Exception.class)\n                .log(&quot;Handling Exception&quot;)\n                .transform(ack(AcknowledgmentCode.AE,&quot;Error transforming the message&quot;,\n                        ErrorCode.UNSUPPORTED_MESSAGE_TYPE))\n                .handled(true)\n                .end();\n\n        // Successful ack\n        from(&quot;mllp://4441&quot;)\n                .log(&quot;Message Received...&quot;)\n                .unmarshal().hl7()\n                .log(&quot;Done unmarshalling...&quot;)\n                .validate(messageConforms())\n                .log(&quot;Done validation...&quot;)\n                .setProperty(MLLP_ACKNOWLEDGEMENT_STRING, ack(AcknowledgmentCode.valueOf(&quot;AA&quot;)))\n                .end();\n\n        // Internal Error ack\n        from(&quot;mllp://4442&quot;)\n                .log(&quot;Message Received...&quot;)\n                .unmarshal().hl7()\n                .log(&quot;Done unmarshalling...&quot;)\n                .validate(messageConforms())\n                .log(&quot;Done validation...&quot;)\n                .setProperty(MLLP_ACKNOWLEDGEMENT_STRING, ack(AcknowledgmentCode.valueOf(&quot;AE&quot;)))\n                .end();\n\n        // Unknown ack\n        from(&quot;mllp:4443&quot;)\n                .log(&quot;Message Received...&quot;)\n                .unmarshal().hl7()\n                .log(&quot;Done unmarshalling...&quot;)\n                .validate(messageConforms())\n                .log(&quot;Done validation...&quot;)\n                .setProperty(MLLP_ACKNOWLEDGEMENT_STRING, () -&gt; &quot;UNKNOWN&quot;)\n                .end();\n    }\n}\n</code></pre>\n<p>For additional context around <code>messageConforms()</code> see page:\n<a href=\"https://camel.apache.org/components/3.20.x/languages/hl7terser-language.html\" rel=\"nofollow noreferrer\">https://camel.apache.org/components/3.20.x/languages/hl7terser-language.html</a></p>\n"}],"owner":{"account_id":22100069,"reputation":21,"user_id":16356680,"display_name":"SomeDevDoingStuff"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":341,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":75836107,"answer_count":1,"score":2,"last_activity_date":1681124798,"creation_date":1636635923,"question_id":69928785,"body_markdown":"I&#39;m attempting to send a HL7 message between two MLLP apache-camel components: \r\n\r\n```\r\n@Component\r\npublic class Producer extends RouteBuilder {\r\n\r\n    @Override\r\n    public void configure() {\r\n        from(&quot;direct:hl7-recipient&quot;)\r\n                .marshal(new HL7DataFormat())\r\n                .to(mllp(&quot;localhost:4444&quot;))\r\n                .end();\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\n\r\n    \r\n```\r\n@Component\r\npublic class Consumer extends RouteBuilder {\r\n\r\n    @Override\r\n    public void configure() {\r\n        from(mllp(&quot;localhost:4444&quot;))\r\n                .log(&quot;received&quot;)\r\n                .unmarshal(new HL7DataFormat())\r\n                .log(&quot;unmarshalled&quot;)\r\n                .setProperty(MLLP_ACKNOWLEDGEMENT_TYPE, ack(AcknowledgmentCode.AA))\r\n                .log(&quot;responding&quot;)\r\n                .end();\r\n    }\r\n}\r\n\r\n```\r\n\r\nI can see the `received`, `unmarshalled` and `responding` log messages.  \r\n\r\nThe exception that is occurring:\r\n\r\n    java.net.SocketTimeoutException: Read timed out\r\n\r\nWith this extract from the stacktrace:\r\n\r\n    Failed delivery for (MessageId: 0D423F22CDC26D9-0000000000000000 on ExchangeId: 0D423F22CDC26D9-0000000000000000). Exhausted after delivery attempt: 1 caught: org.apache.camel.component.mllp.MllpAcknowledgementTimeoutException: process(0D423F22CDC26D9-0000000000000000) [Socket[addr=localhost/127.0.0.1,port=4444,localport=64357]] - timeout receiving MLLP Acknowledgment\r\n\r\n\r\nIt appears that the acknowledgment is not being returned. \r\n\r\n\r\nI have been following the apache-camel [official documentation][1] by setting the acknowledgment property on the exchange.\r\n\r\nThank you for any support.   \r\n\r\n\r\n  [1]: https://camel.apache.org/components/3.12.x/mllp-component.html#_exchange_properties","title":"How to handle [MLLP] acknowledgments using [apache-camel]","body":"<p>I'm attempting to send a HL7 message between two MLLP apache-camel components:</p>\n<pre><code>@Component\npublic class Producer extends RouteBuilder {\n\n    @Override\n    public void configure() {\n        from(&quot;direct:hl7-recipient&quot;)\n                .marshal(new HL7DataFormat())\n                .to(mllp(&quot;localhost:4444&quot;))\n                .end();\n    }\n}\n\n</code></pre>\n<pre><code>@Component\npublic class Consumer extends RouteBuilder {\n\n    @Override\n    public void configure() {\n        from(mllp(&quot;localhost:4444&quot;))\n                .log(&quot;received&quot;)\n                .unmarshal(new HL7DataFormat())\n                .log(&quot;unmarshalled&quot;)\n                .setProperty(MLLP_ACKNOWLEDGEMENT_TYPE, ack(AcknowledgmentCode.AA))\n                .log(&quot;responding&quot;)\n                .end();\n    }\n}\n\n</code></pre>\n<p>I can see the <code>received</code>, <code>unmarshalled</code> and <code>responding</code> log messages.</p>\n<p>The exception that is occurring:</p>\n<pre><code>java.net.SocketTimeoutException: Read timed out\n</code></pre>\n<p>With this extract from the stacktrace:</p>\n<pre><code>Failed delivery for (MessageId: 0D423F22CDC26D9-0000000000000000 on ExchangeId: 0D423F22CDC26D9-0000000000000000). Exhausted after delivery attempt: 1 caught: org.apache.camel.component.mllp.MllpAcknowledgementTimeoutException: process(0D423F22CDC26D9-0000000000000000) [Socket[addr=localhost/127.0.0.1,port=4444,localport=64357]] - timeout receiving MLLP Acknowledgment\n</code></pre>\n<p>It appears that the acknowledgment is not being returned.</p>\n<p>I have been following the apache-camel <a href=\"https://camel.apache.org/components/3.12.x/mllp-component.html#_exchange_properties\" rel=\"nofollow noreferrer\">official documentation</a> by setting the acknowledgment property on the exchange.</p>\n<p>Thank you for any support.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":379763,"reputation":29886,"user_id":733345,"display_name":"Joe"},"score":1,"creation_date":1598277434,"post_id":63562389,"comment_id":112398088,"body_markdown":"Related [How to open user system preferred editor for given file?](https://stackoverflow.com/questions/526037/how-to-open-user-system-preferred-editor-for-given-file), but without a documented way to determine what application was run.","body":"Related <a href=\"https://stackoverflow.com/questions/526037/how-to-open-user-system-preferred-editor-for-given-file\">How to open user system preferred editor for given file?</a>, but without a documented way to determine what application was run."},{"owner":{"account_id":5175641,"reputation":830,"user_id":4142878,"display_name":"Carlos Bazilio"},"score":0,"creation_date":1598277544,"post_id":63562389,"comment_id":112398151,"body_markdown":".example is a Java application? Is it a jar file?","body":".example is a Java application? Is it a jar file?"},{"owner":{"account_id":16478274,"reputation":393,"user_id":11905620,"display_name":"MaS"},"score":1,"creation_date":1598279097,"post_id":63562389,"comment_id":112398993,"body_markdown":"I don&#39;t think there is a general answer for every OS. But maybe the answer [here](https://stackoverflow.com/a/13576250/11905620) might help you for Windows.","body":"I don&#39;t think there is a general answer for every OS. But maybe the answer <a href=\"https://stackoverflow.com/a/13576250/11905620\">here</a> might help you for Windows."},{"owner":{"account_id":9929807,"reputation":562,"user_id":7350192,"accept_rate":100,"display_name":"KUSH42"},"score":0,"creation_date":1598279361,"post_id":63562389,"comment_id":112399126,"body_markdown":"@MaS does not work for Java 11/12","body":"@MaS does not work for Java 11/12"}],"answers":[{"tags":[],"owner":{"account_id":9929807,"reputation":562,"user_id":7350192,"accept_rate":100,"display_name":"KUSH42"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1598278310,"creation_date":1598278310,"answer_id":63562770,"question_id":63562389,"body_markdown":"I do not think that this is possible just using *pure* Java.\r\n\r\nThe only way that comes to my mind right now (using Java) is to use [JNA][1] to directly interface with the Win32-API (note that this is written in C and not Java). See [this answer][2] for how to achieve the Win32-API-part and [this link][3] for how to use JNA.\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Java_Native_Access\r\n  [2]: https://stackoverflow.com/a/17773402/7350192\r\n  [3]: https://www.techbeamers.com/write-a-simple-jna-program-in-java/","title":"Get application associated with a file java","body":"<p>I do not think that this is possible just using <em>pure</em> Java.</p>\n<p>The only way that comes to my mind right now (using Java) is to use <a href=\"https://en.wikipedia.org/wiki/Java_Native_Access\" rel=\"nofollow noreferrer\">JNA</a> to directly interface with the Win32-API (note that this is written in C and not Java). See <a href=\"https://stackoverflow.com/a/17773402/7350192\">this answer</a> for how to achieve the Win32-API-part and <a href=\"https://www.techbeamers.com/write-a-simple-jna-program-in-java/\" rel=\"nofollow noreferrer\">this link</a> for how to use JNA.</p>\n"}],"owner":{"account_id":17322209,"reputation":54,"user_id":12547339,"display_name":"hms11"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":107,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":63562770,"answer_count":1,"score":-1,"last_activity_date":1681124751,"creation_date":1598276974,"question_id":63562389,"body_markdown":"I am trying to get the associated program of a file, for example\r\nif I have a file ```C:/foo/bar.example``` I want to get what program\r\nopens ```.example``` (Kind of like Notepad.exe opens .txt Files).\r\n\r\nI tried creating a process to open that file using ```runtime.exec(&quot;rundll32 url.dll,FileProtocolHandler C:/foo/bar.example&quot;)``` \r\nbut there is no way to get the associated application using [Process][1].\r\n\r\nThis example shows what I am trying to achieve in Windows, although I want something cross platform.\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/lang/Process.html","title":"Get application associated with a file java","body":"<p>I am trying to get the associated program of a file, for example\nif I have a file <code>C:/foo/bar.example</code> I want to get what program\nopens <code>.example</code> (Kind of like Notepad.exe opens .txt Files).</p>\n<p>I tried creating a process to open that file using <code>runtime.exec(&quot;rundll32 url.dll,FileProtocolHandler C:/foo/bar.example&quot;)</code>\nbut there is no way to get the associated application using <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Process.html\" rel=\"nofollow noreferrer\">Process</a>.</p>\n<p>This example shows what I am trying to achieve in Windows, although I want something cross platform.</p>\n"},{"tags":["java","linux","kotlin","raspberry-pi","raspberry-pi-os"],"owner":{"account_id":18596311,"reputation":1,"user_id":13552237,"display_name":"Govind yadav"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681124740,"creation_date":1681124259,"question_id":75976481,"body_markdown":"I have a Raspberry PI 4 with a dual display setup I wanted to show different operations on both displays depending on some logic.\r\n\r\nMy application is built with compose multiplatform I can make two screens by just following the code\r\n\r\n```\r\n\r\nfun main(args: Array&lt;String&gt;) = application {\r\n\r\n    Window(\r\n        onCloseRequest = app::onDestroy, title = &quot; WINDOW 1 &quot;, state = \r\n    rememberWindowState(\r\n            placement = WindowPlacement.Fullscreen\r\n        )\r\n    ) {\r\n        App(app)\r\n    }\r\n\r\n    Window(\r\n        onCloseRequest = app::onDestroy, title = &quot; WINDOW 2 &quot;, state = \r\n     rememberWindowState(\r\n            placement = WindowPlacement.Fullscreen\r\n        )\r\n    ) {\r\n        App(app)\r\n    }\r\n   \r\n}\r\n\r\n```\r\n\r\nBut I want to set WINDOW 1 to HDMI 1 and WINDOW 2 to HDMI 2 in full screen programmatically any idea how can I do that?\r\n\r\nCan anyone help me with it I tried using screen but no luck \r\n\r\n```\r\nsudo apt-get install screen \r\n```","title":"Changing HDMI diplay for specific scrrens programmatically (PI-4)","body":"<p>I have a Raspberry PI 4 with a dual display setup I wanted to show different operations on both displays depending on some logic.</p>\n<p>My application is built with compose multiplatform I can make two screens by just following the code</p>\n<pre><code>\nfun main(args: Array&lt;String&gt;) = application {\n\n    Window(\n        onCloseRequest = app::onDestroy, title = &quot; WINDOW 1 &quot;, state = \n    rememberWindowState(\n            placement = WindowPlacement.Fullscreen\n        )\n    ) {\n        App(app)\n    }\n\n    Window(\n        onCloseRequest = app::onDestroy, title = &quot; WINDOW 2 &quot;, state = \n     rememberWindowState(\n            placement = WindowPlacement.Fullscreen\n        )\n    ) {\n        App(app)\n    }\n   \n}\n\n</code></pre>\n<p>But I want to set WINDOW 1 to HDMI 1 and WINDOW 2 to HDMI 2 in full screen programmatically any idea how can I do that?</p>\n<p>Can anyone help me with it I tried using screen but no luck</p>\n<pre><code>sudo apt-get install screen \n</code></pre>\n"},{"tags":["java","android-softkeyboard","custom-keyboard","android-input-method"],"comments":[{"owner":{"account_id":1950118,"reputation":1353,"user_id":1754401,"display_name":"tagy22"},"score":0,"creation_date":1678965528,"post_id":55417232,"comment_id":133636838,"body_markdown":"I don&#39;t think `onCreateInputView` is being called. I tried setting the label in a function that I manually call and it works as expected.","body":"I don&#39;t think <code>onCreateInputView</code> is being called. I tried setting the label in a function that I manually call and it works as expected."}],"answers":[{"comments":[{"owner":{"account_id":14688437,"reputation":5100,"user_id":10607772,"display_name":"double-beep"},"score":1,"creation_date":1559055966,"post_id":56345063,"comment_id":99295217,"body_markdown":"This post doesn&#39;t look like an attempt to answer this question. Every post here is expected to be an explicit attempt to *answer* this question; if you have a critique or need a clarification of the question or another answer, you can [post a comment](//stackoverflow.com/help/privileges/comment) (like this one) directly below it. Please remove this answer and create either a comment or a new question. See: [Ask questions, get answers, no distractions](//stackoverflow.com/tour).","body":"This post doesn&#39;t look like an attempt to answer this question. Every post here is expected to be an explicit attempt to <i>answer</i> this question; if you have a critique or need a clarification of the question or another answer, you can <a href=\"//stackoverflow.com/help/privileges/comment\">post a comment</a> (like this one) directly below it. Please remove this answer and create either a comment or a new question. See: <a href=\"//stackoverflow.com/tour\">Ask questions, get answers, no distractions</a>."},{"owner":{"display_name":"user9599745"},"score":0,"creation_date":1559070673,"post_id":56345063,"comment_id":99302287,"body_markdown":"I did answer the question. Except for the other nicities.","body":"I did answer the question. Except for the other nicities."},{"owner":{"account_id":14688437,"reputation":5100,"user_id":10607772,"display_name":"double-beep"},"score":0,"creation_date":1559070760,"post_id":56345063,"comment_id":99302325,"body_markdown":"Currently, it isn&#39;t very clear. Can you [edit] your answer to both format your code according to [editing help](/editing-help) and make it a clearer answer.","body":"Currently, it isn&#39;t very clear. Can you <a href=\"https://stackoverflow.com/posts/56345063/edit\">edit</a> your answer to both format your code according to <a href=\"/editing-help\">editing help</a> and make it a clearer answer."}],"tags":[],"owner":{"display_name":"user9599745"},"comment_count":3,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1559070759,"creation_date":1559055627,"answer_id":56345063,"question_id":55417232,"body_markdown":"List&lt;&gt;.get() returns the key with the particular index, not the key with the particular code. For example, List&lt;&gt;.get(0) returns the first key.","title":"How to change key label of the custom android keyboard in java","body":"<p>List&lt;>.get() returns the key with the particular index, not the key with the particular code. For example, List&lt;>.get(0) returns the first key.</p>\n"},{"tags":[],"owner":{"account_id":3188886,"reputation":189,"user_id":2693743,"accept_rate":60,"display_name":"flide"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681124422,"creation_date":1681124422,"answer_id":75976501,"question_id":55417232,"body_markdown":"I had a similar issue with my keyboard. I wanted to have a button showing currency symbol most relevant to the user based on the user&#39;s locale.\r\n\r\nSo, the first hurdle in changing the label for a button is to identify the button. I added a static label to the key using which I identify the key in the code.\r\n\r\n            &lt;Key\r\n                android:isRepeatable=&quot;true&quot;\r\n                android:keyLabel=&quot;@string/currencySymbol&quot;\r\n                android:keyWidth=&quot;25%p&quot;/&gt;\r\n\r\nNext item of business was to change the label to my desire. In the view class, during initialisation (Object construction), I setup the label.\r\n\r\n    public NumberKeypadView(Context context, AttributeSet attrs, int defStyleAttr) {\r\n        super(context, attrs, defStyleAttr);\r\n        initialize(context);\r\n    }\r\n\r\n    public void initialize(Context context) {\r\n        ...\r\n        setCurrencySymbolBasedOnLocale(keyboard);\r\n        ...\r\n    }\r\n\r\n    private void setCurrencySymbolBasedOnLocale(Keyboard keyboard) {\r\n        for (Keyboard.Key key: keyboard.getKeys()) {\r\n            if(key.label != null &amp;&amp; key.label.toString().equals(getResources().getString(R.string.currencySymbol))) {\r\n            Currency currency = Currency.getInstance(Locale.getDefault());\r\n            key.label = currency.getSymbol();\r\n            key.text = currency.getSymbol();\r\n            }\r\n        }\r\n    } \r\n\r\n\r\nAnd that is all.\r\n","title":"How to change key label of the custom android keyboard in java","body":"<p>I had a similar issue with my keyboard. I wanted to have a button showing currency symbol most relevant to the user based on the user's locale.</p>\n<p>So, the first hurdle in changing the label for a button is to identify the button. I added a static label to the key using which I identify the key in the code.</p>\n<pre><code>        &lt;Key\n            android:isRepeatable=&quot;true&quot;\n            android:keyLabel=&quot;@string/currencySymbol&quot;\n            android:keyWidth=&quot;25%p&quot;/&gt;\n</code></pre>\n<p>Next item of business was to change the label to my desire. In the view class, during initialisation (Object construction), I setup the label.</p>\n<pre><code>public NumberKeypadView(Context context, AttributeSet attrs, int defStyleAttr) {\n    super(context, attrs, defStyleAttr);\n    initialize(context);\n}\n\npublic void initialize(Context context) {\n    ...\n    setCurrencySymbolBasedOnLocale(keyboard);\n    ...\n}\n\nprivate void setCurrencySymbolBasedOnLocale(Keyboard keyboard) {\n    for (Keyboard.Key key: keyboard.getKeys()) {\n        if(key.label != null &amp;&amp; key.label.toString().equals(getResources().getString(R.string.currencySymbol))) {\n        Currency currency = Currency.getInstance(Locale.getDefault());\n        key.label = currency.getSymbol();\n        key.text = currency.getSymbol();\n        }\n    }\n} \n</code></pre>\n<p>And that is all.</p>\n"}],"owner":{"account_id":15630506,"reputation":1,"user_id":11276950,"display_name":"pete_yoe"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":835,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1681124422,"creation_date":1553861618,"question_id":55417232,"body_markdown":"I want to change the key label on my custom keyboard at run time, passing through java. I can&#39;t find any solution anywhere.\r\n\r\njava file\r\n```\r\n\r\npublic class MyKeyboardService extends InputMethodService implements KeyboardView.OnKeyboardActionListener {\r\n\r\n    public final static int keyToChange = 257;\r\n\r\n\r\n    KeyboardView kv;\r\n    Intent intent;\r\n\r\n    void updateInputView() {\r\n        if (kv == null)\r\n            return;\r\n        Keyboard currentKeyboard = kv.getKeyboard();\r\n        List&lt;Keyboard.Key&gt; keys = currentKeyboard.getKeys();\r\n        keys.get(keyToChange).label = &quot;Change Label&quot;;\r\n        kv.invalidateKey(keyToChange);\r\n    }\r\n\r\n    @Override\r\n    public View onCreateInputView() {\r\n\r\n        checkIfFirstRun();\r\n\r\n        KeyboardView kv = (KeyboardView) getLayoutInflater().inflate(R.layout.keyboard, null);\r\n        Keyboard keyboard = new Keyboard(this, R.xml.layout_keys);\r\n\r\n        kv.setKeyboard(keyboard);\r\n        kv.setPreviewEnabled(false);\r\n        kv.setOnKeyboardActionListener(this);\r\n        updateInputView();\r\n\r\n\r\n        return kv;\r\n```\r\n\r\nxml file\r\n```\r\n        &lt;Key\r\n            android:codes=&quot;257&quot;\r\n            android:keyWidth=&quot;60%p&quot;/&gt;\r\n```\r\n\r\nNow, I still get blank label on the key.\r\nI want it to display &quot;Change Label&quot;","title":"How to change key label of the custom android keyboard in java","body":"<p>I want to change the key label on my custom keyboard at run time, passing through java. I can't find any solution anywhere.</p>\n<p>java file</p>\n<pre><code>\npublic class MyKeyboardService extends InputMethodService implements KeyboardView.OnKeyboardActionListener {\n\n    public final static int keyToChange = 257;\n\n\n    KeyboardView kv;\n    Intent intent;\n\n    void updateInputView() {\n        if (kv == null)\n            return;\n        Keyboard currentKeyboard = kv.getKeyboard();\n        List&lt;Keyboard.Key&gt; keys = currentKeyboard.getKeys();\n        keys.get(keyToChange).label = &quot;Change Label&quot;;\n        kv.invalidateKey(keyToChange);\n    }\n\n    @Override\n    public View onCreateInputView() {\n\n        checkIfFirstRun();\n\n        KeyboardView kv = (KeyboardView) getLayoutInflater().inflate(R.layout.keyboard, null);\n        Keyboard keyboard = new Keyboard(this, R.xml.layout_keys);\n\n        kv.setKeyboard(keyboard);\n        kv.setPreviewEnabled(false);\n        kv.setOnKeyboardActionListener(this);\n        updateInputView();\n\n\n        return kv;\n</code></pre>\n<p>xml file</p>\n<pre><code>        &lt;Key\n            android:codes=&quot;257&quot;\n            android:keyWidth=&quot;60%p&quot;/&gt;\n</code></pre>\n<p>Now, I still get blank label on the key.\nI want it to display &quot;Change Label&quot;</p>\n"},{"tags":["java","android","image","bitmap","crop"],"answers":[{"tags":[],"owner":{"account_id":22264521,"reputation":329,"user_id":20837030,"display_name":"jcredking"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681124395,"creation_date":1681124395,"answer_id":75976497,"question_id":75970748,"body_markdown":"For Image crop, you can use the below dependency. It&#39;s very simple and easy to use more useful I personally use it \r\n\r\n\r\n        implementation &#39;com.isseiaoki:simplecropview:1.1.8&#39;\r\n\r\n \r\n\r\n - For How To Implement this visit this on [GitHub here][1] \r\n\r\n    \r\n\r\n\r\n  [1]: https://github.com/igreenwood/SimpleCropView","title":"Android java: Crop image function not working","body":"<p>For Image crop, you can use the below dependency. It's very simple and easy to use more useful I personally use it</p>\n<pre><code>    implementation 'com.isseiaoki:simplecropview:1.1.8'\n</code></pre>\n<ul>\n<li>For How To Implement this visit this on <a href=\"https://github.com/igreenwood/SimpleCropView\" rel=\"nofollow noreferrer\">GitHub here</a></li>\n</ul>\n"}],"owner":{"account_id":25518433,"reputation":1,"user_id":21601999,"display_name":"Dylan Reik Salas Deza"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":201,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681124395,"creation_date":1681046202,"question_id":75970748,"body_markdown":"The function calls the name of the image then where it is going to be put then from where to where it is going to be cropped and to where but it doesn&#39;t seem to work correctly it doesn&#39;t execute it\r\n\r\n```\r\npublic void _cropImage(final ImageView _img, final String _nameImg, final double _x, final double _y, final double _x1, final double _y1) {\r\n\t\t    // Get the resource ID of the drawable image specified\r\n\t\t    int resId = getResources().getIdentifier(_nameImg, &quot;drawable&quot;, getPackageName());\r\n\t\t\r\n\t\t    // Decode the image resource into a Bitmap object\r\n\t\t    Bitmap originalBitmap = BitmapFactory.decodeResource(getResources(), resId);\r\n\t\t\r\n\t\t    // Calculate the scale factor to convert pixels to image coordinates\r\n\t\t    float scaleFactor = (float) originalBitmap.getWidth() / (float) _img.getWidth();\r\n\t\t\r\n\t\t    // Convert the clip dimensions from pixels to image coordinates\r\n\t\t    int x_1 = (int) (_x * scaleFactor);\r\n\t\t    int y_1 = (int) (_y * scaleFactor);\r\n\t\t    int x_2 = (int) ((_x + _x1) * scaleFactor);\r\n\t\t    int y_2 = (int) ((_y + _y1) * scaleFactor);\r\n\t\t\r\n\t\t    // Ensure that the crop dimensions are within the bounds of the original bitmap\r\n\t\t    x_1 = Math.max(x_1, 0);\r\n\t\t    y_1 = Math.max(y_1, 0);\r\n\t\t    x_2 = Math.min(x_2, originalBitmap.getWidth());\r\n\t\t    y_2 = Math.min(y_2, originalBitmap.getHeight());\r\n\t\t\r\n\t\t    // Create a new bitmap to hold the clipped region\r\n\t\t    Bitmap croppedBitmap = Bitmap.createBitmap(originalBitmap, x_1, y_1, x_2 - x_1, y_2 - y_1);\r\n\t\t\r\n\t\t    // Display the cropped bitmap in the ImageView\r\n\t\t    _img.setImageBitmap(croppedBitmap);\r\n\t}\r\n```\r\n\r\n\r\nThe function doesn&#39;t crop the image from x,y at x,y","title":"Android java: Crop image function not working","body":"<p>The function calls the name of the image then where it is going to be put then from where to where it is going to be cropped and to where but it doesn't seem to work correctly it doesn't execute it</p>\n<pre><code>public void _cropImage(final ImageView _img, final String _nameImg, final double _x, final double _y, final double _x1, final double _y1) {\n            // Get the resource ID of the drawable image specified\n            int resId = getResources().getIdentifier(_nameImg, &quot;drawable&quot;, getPackageName());\n        \n            // Decode the image resource into a Bitmap object\n            Bitmap originalBitmap = BitmapFactory.decodeResource(getResources(), resId);\n        \n            // Calculate the scale factor to convert pixels to image coordinates\n            float scaleFactor = (float) originalBitmap.getWidth() / (float) _img.getWidth();\n        \n            // Convert the clip dimensions from pixels to image coordinates\n            int x_1 = (int) (_x * scaleFactor);\n            int y_1 = (int) (_y * scaleFactor);\n            int x_2 = (int) ((_x + _x1) * scaleFactor);\n            int y_2 = (int) ((_y + _y1) * scaleFactor);\n        \n            // Ensure that the crop dimensions are within the bounds of the original bitmap\n            x_1 = Math.max(x_1, 0);\n            y_1 = Math.max(y_1, 0);\n            x_2 = Math.min(x_2, originalBitmap.getWidth());\n            y_2 = Math.min(y_2, originalBitmap.getHeight());\n        \n            // Create a new bitmap to hold the clipped region\n            Bitmap croppedBitmap = Bitmap.createBitmap(originalBitmap, x_1, y_1, x_2 - x_1, y_2 - y_1);\n        \n            // Display the cropped bitmap in the ImageView\n            _img.setImageBitmap(croppedBitmap);\n    }\n</code></pre>\n<p>The function doesn't crop the image from x,y at x,y</p>\n"},{"tags":["java","testng"],"answers":[{"comments":[{"owner":{"account_id":1005202,"reputation":1197,"user_id":1019159,"accept_rate":45,"display_name":"ricb"},"score":0,"creation_date":1405455571,"post_id":24766349,"comment_id":38431178,"body_markdown":"Good idea. This will meet my needs. Thanks. If anybody knows of a more testng-y way, I would like to learn it as well.","body":"Good idea. This will meet my needs. Thanks. If anybody knows of a more testng-y way, I would like to learn it as well."},{"owner":{"account_id":8417919,"reputation":125,"user_id":6317667,"display_name":"Yogesh"},"score":0,"creation_date":1543347552,"post_id":24766349,"comment_id":93883632,"body_markdown":"Hi, where do we get &#39;TestRepository&#39; class from? is it part of any library? or is it new class that you have created","body":"Hi, where do we get &#39;TestRepository&#39; class from? is it part of any library? or is it new class that you have created"},{"owner":{"account_id":1288640,"reputation":8167,"user_id":1241193,"display_name":"Bob Dalgleish"},"score":0,"creation_date":1543414863,"post_id":24766349,"comment_id":93911805,"body_markdown":"`TestRepository` would be a class that you create for the purpose of returning acting as a repository.","body":"<code>TestRepository</code> would be a class that you create for the purpose of returning acting as a repository."}],"tags":[],"owner":{"account_id":1288640,"reputation":8167,"user_id":1241193,"display_name":"Bob Dalgleish"},"comment_count":3,"down_vote_count":1,"up_vote_count":2,"is_accepted":true,"score":1,"last_activity_date":1405451698,"creation_date":1405451698,"answer_id":24766349,"question_id":24766147,"body_markdown":"Use a factory to create a repository. The repository stores &quot;interesting test state&quot; properties.\r\n\r\n      TestRepository tr = TestRepositoryFactory.getInstance();\r\n      ...\r\n      tr.store(&quot;test13.PKID&quot;, pkid.toString());\r\n\r\nand then in your subsequent code, repeat the call to the factory and then get the value:\r\n\r\n      String spkid = tr.get(&quot;test13.PKID&quot;);\r\n\r\n","title":"TestNG - sharing state between test classes","body":"<p>Use a factory to create a repository. The repository stores \"interesting test state\" properties.</p>\n\n<pre><code>  TestRepository tr = TestRepositoryFactory.getInstance();\n  ...\n  tr.store(\"test13.PKID\", pkid.toString());\n</code></pre>\n\n<p>and then in your subsequent code, repeat the call to the factory and then get the value:</p>\n\n<pre><code>  String spkid = tr.get(\"test13.PKID\");\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2276132,"reputation":404,"user_id":2002340,"accept_rate":100,"display_name":"raman rayat"},"score":2,"creation_date":1533717103,"post_id":38792029,"comment_id":90444029,"body_markdown":"its not working when I try to use in another test class","body":"its not working when I try to use in another test class"}],"tags":[],"owner":{"account_id":3034445,"reputation":315,"user_id":2572861,"accept_rate":62,"display_name":"Dmitry Glushonkov"},"comment_count":1,"down_vote_count":2,"up_vote_count":6,"is_accepted":false,"score":4,"last_activity_date":1470408315,"creation_date":1470408315,"answer_id":38792029,"question_id":24766147,"body_markdown":"Really Testng-y way to do this is to set ITestContext attribute with desired value and then get it from other test class.\r\n\r\nSet value:\r\n\r\n    @Test\r\n    public void setvaluetest(ITestContext context) {\r\n            String customerId = &quot;GDFg34fDF&quot;;\r\n            context.setAttribute(&quot;customerId&quot;, customerId);\r\n    }\r\n\r\nGet value:\r\n\r\n    @Test\r\n    public void getvaluetest(ITestContext context) {\r\n            String id = context.getAttribute(&quot;customerId&quot;);\r\n    }","title":"TestNG - sharing state between test classes","body":"<p>Really Testng-y way to do this is to set ITestContext attribute with desired value and then get it from other test class.</p>\n\n<p>Set value:</p>\n\n<pre><code>@Test\npublic void setvaluetest(ITestContext context) {\n        String customerId = \"GDFg34fDF\";\n        context.setAttribute(\"customerId\", customerId);\n}\n</code></pre>\n\n<p>Get value:</p>\n\n<pre><code>@Test\npublic void getvaluetest(ITestContext context) {\n        String id = context.getAttribute(\"customerId\");\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3191086,"reputation":2391,"user_id":2695298,"accept_rate":79,"display_name":"Ivan Gerasimenko"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1522759457,"creation_date":1521552956,"answer_id":49385709,"question_id":24766147,"body_markdown":"Another way is to use means of object oriented programming.\r\n\r\nCommon structure of tests for example:\r\n\r\n - `TestBase.java` (parent class for all other test classes, has methods like @BeforeTest, @AfterSuite, etc.)\r\n  - `RegistrationTests.java` (extends TestBase, )\r\n  - `ShoppingTests.java` (extends TestBase)\r\n  - and `WhateverElseTests.java` (extends TestBase)\r\n\r\nSo `TestBase` has all shared data as static fields e.g. `Customer` object:\r\n\r\n    public class TestBase {\r\n    \r\n        protected static final BrowserManager bw = new BrowserManager();\r\n        protected static Customer customer;\r\n    \r\n        @BeforeSuite\r\n        public void initBrowser() {\r\n            bw.init();\r\n        }\r\n    \r\n        @AfterSuite\r\n        public void terminateBrowser() {\r\n            bw.terminate();\r\n        }\r\n    \r\n    }\r\n\r\nAnd access to `customer` in tests, e.g. `ShoppingTests.java`:\r\n\r\n    public class ShoppingTests extends TestBase {\r\n\r\n        @Test\r\n        public void doSomethingTest() {\r\n            \r\n            bw.navigateTo().shoppingPage();\r\n\r\n            bw.shoppingPreparationHelper().checkDisplayedName(customer.name);\r\n            ...\r\n\r\n**N.B.:** tests that share objects should go in a strict sequence (first - test that init object, then - test that uses object&#39;s data), so use `@Test(dependsOnMethods = &quot;someMethodTest&quot;)`. Otherwise you are in risk of NullPointerException for `customer`.\r\n\r\n**P.S.:** Object-oriented way has great advantage over `ITestContext` because you can pass any object(s) from test to test (also between classes), not just string attribute.","title":"TestNG - sharing state between test classes","body":"<p>Another way is to use means of object oriented programming.</p>\n\n<p>Common structure of tests for example:</p>\n\n<ul>\n<li><code>TestBase.java</code> (parent class for all other test classes, has methods like @BeforeTest, @AfterSuite, etc.)\n\n<ul>\n<li><code>RegistrationTests.java</code> (extends TestBase, )</li>\n<li><code>ShoppingTests.java</code> (extends TestBase)</li>\n<li>and <code>WhateverElseTests.java</code> (extends TestBase)</li>\n</ul></li>\n</ul>\n\n<p>So <code>TestBase</code> has all shared data as static fields e.g. <code>Customer</code> object:</p>\n\n<pre><code>public class TestBase {\n\n    protected static final BrowserManager bw = new BrowserManager();\n    protected static Customer customer;\n\n    @BeforeSuite\n    public void initBrowser() {\n        bw.init();\n    }\n\n    @AfterSuite\n    public void terminateBrowser() {\n        bw.terminate();\n    }\n\n}\n</code></pre>\n\n<p>And access to <code>customer</code> in tests, e.g. <code>ShoppingTests.java</code>:</p>\n\n<pre><code>public class ShoppingTests extends TestBase {\n\n    @Test\n    public void doSomethingTest() {\n\n        bw.navigateTo().shoppingPage();\n\n        bw.shoppingPreparationHelper().checkDisplayedName(customer.name);\n        ...\n</code></pre>\n\n<p><strong>N.B.:</strong> tests that share objects should go in a strict sequence (first - test that init object, then - test that uses object's data), so use <code>@Test(dependsOnMethods = \"someMethodTest\")</code>. Otherwise you are in risk of NullPointerException for <code>customer</code>.</p>\n\n<p><strong>P.S.:</strong> Object-oriented way has great advantage over <code>ITestContext</code> because you can pass any object(s) from test to test (also between classes), not just string attribute.</p>\n"},{"tags":[],"owner":{"account_id":2729575,"reputation":536,"user_id":2353652,"display_name":"Sam"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1550106926,"creation_date":1550106926,"answer_id":54681845,"question_id":24766147,"body_markdown":"\r\nAs we know from TestNG JavaDoc, ITestContext defines a test context which contains all the information for a given test run. An instance of this context is passed to the test listeners so they can query information about their environment.\r\nSo we can share generated data from one class in this test with another class in this test.\r\n\r\nProducer.java\r\n\r\n    public List&lt;String&gt; groupIds = ...;\r\n    @AfterClass(alwaysRun = true)\r\n    public void reserveGroupIds(ITestContext ctx) {\r\n        ctx.setAttribute(GROUPS_ATTR, groupIds);\r\n    }\r\n\r\nConsumer.java\r\n\r\n    public List&lt;String&gt; groupIds;\r\n    @BeforeClass(alwaysRun = true)\r\n    public void fetchGroupIds(ITestContext ctx) {\r\n        groupIds = (List&lt;String&gt;) ctx.getAttribute(Producer.GROUPS_ATTR);\r\n    }\r\n\r\nmySuite.xml\r\n\r\n    ...\r\n    &lt;test&gt;\r\n      &lt;classes&gt;\r\n        &lt;class name= &quot;Producer&quot;/&gt;\r\n        &lt;class name= &quot;Consumer&quot;/&gt;\r\n      &lt;/classes&gt;\r\n    &lt;/test&gt;\r\n    ...\r\n","title":"TestNG - sharing state between test classes","body":"<p>As we know from TestNG JavaDoc, ITestContext defines a test context which contains all the information for a given test run. An instance of this context is passed to the test listeners so they can query information about their environment.\nSo we can share generated data from one class in this test with another class in this test.</p>\n\n<p>Producer.java</p>\n\n<pre><code>public List&lt;String&gt; groupIds = ...;\n@AfterClass(alwaysRun = true)\npublic void reserveGroupIds(ITestContext ctx) {\n    ctx.setAttribute(GROUPS_ATTR, groupIds);\n}\n</code></pre>\n\n<p>Consumer.java</p>\n\n<pre><code>public List&lt;String&gt; groupIds;\n@BeforeClass(alwaysRun = true)\npublic void fetchGroupIds(ITestContext ctx) {\n    groupIds = (List&lt;String&gt;) ctx.getAttribute(Producer.GROUPS_ATTR);\n}\n</code></pre>\n\n<p>mySuite.xml</p>\n\n<pre><code>...\n&lt;test&gt;\n  &lt;classes&gt;\n    &lt;class name= \"Producer\"/&gt;\n    &lt;class name= \"Consumer\"/&gt;\n  &lt;/classes&gt;\n&lt;/test&gt;\n...\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3106827,"reputation":762,"user_id":2629440,"display_name":"Vivek Goel"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681124331,"creation_date":1681124331,"answer_id":75976490,"question_id":24766147,"body_markdown":"ITestContext will work fine if both the test cases are in same test scope. If we have to share data between tests in different test context but same suite then we have to set the data in suite context.\r\n\r\n    public class SharingDataSuiteLevelISuiteFirstTest {\r\n    \t\r\n    \t// Passing ITestContext as a parameter to @Test method to use it. \r\n    \t@Test\r\n    \tpublic void generateData(ITestContext context)\r\n    \t{\r\n    \t\tString firstName = &quot;Amod&quot;;\r\n    \t\t// Get the suite\r\n    \t\tISuite suite = context.getSuite();\r\n    \t\t// Setting an attribute with name and its value at suite level in stead of test level\r\n    \t\tsuite.setAttribute(&quot;FirstName&quot;, firstName);\r\n    \t}\r\n    }\r\n\r\n    public class SharingDataSuiteLevelISuiteSecondTest {\r\n    \t\r\n    \t// Passing ITestContext as a parameter to @Test method to use it. \r\n    \t@Test\r\n    \tpublic void useData(ITestContext context)\r\n    \t{\r\n    \t\tString lastName = &quot;Mahajan&quot;;\r\n    \t\t// Retrieving attribute value set in ITestContext\r\n    \t\tISuite suite = context.getSuite();\r\n    \t\tString FN = (String) suite.getAttribute(&quot;FirstName&quot;);\r\n    \t\tString fullName = FN +&quot; &quot;+lastName;\r\n    \t\tSystem.out.println(&quot;Full Name is : &quot;+fullName);\r\n    \t}\r\n    }\r\n\r\nMore explanation to the above problem can be found here: http://makeseleniumeasy.com/2020/01/06/testng-tutorials-68-sharing-data-between-tests-in-a-suite-using-isuite-itestcontext/\r\n\r\n","title":"TestNG - sharing state between test classes","body":"<p>ITestContext will work fine if both the test cases are in same test scope. If we have to share data between tests in different test context but same suite then we have to set the data in suite context.</p>\n<pre><code>public class SharingDataSuiteLevelISuiteFirstTest {\n    \n    // Passing ITestContext as a parameter to @Test method to use it. \n    @Test\n    public void generateData(ITestContext context)\n    {\n        String firstName = &quot;Amod&quot;;\n        // Get the suite\n        ISuite suite = context.getSuite();\n        // Setting an attribute with name and its value at suite level in stead of test level\n        suite.setAttribute(&quot;FirstName&quot;, firstName);\n    }\n}\n\npublic class SharingDataSuiteLevelISuiteSecondTest {\n    \n    // Passing ITestContext as a parameter to @Test method to use it. \n    @Test\n    public void useData(ITestContext context)\n    {\n        String lastName = &quot;Mahajan&quot;;\n        // Retrieving attribute value set in ITestContext\n        ISuite suite = context.getSuite();\n        String FN = (String) suite.getAttribute(&quot;FirstName&quot;);\n        String fullName = FN +&quot; &quot;+lastName;\n        System.out.println(&quot;Full Name is : &quot;+fullName);\n    }\n}\n</code></pre>\n<p>More explanation to the above problem can be found here: <a href=\"http://makeseleniumeasy.com/2020/01/06/testng-tutorials-68-sharing-data-between-tests-in-a-suite-using-isuite-itestcontext/\" rel=\"nofollow noreferrer\">http://makeseleniumeasy.com/2020/01/06/testng-tutorials-68-sharing-data-between-tests-in-a-suite-using-isuite-itestcontext/</a></p>\n"}],"owner":{"account_id":1005202,"reputation":1197,"user_id":1019159,"accept_rate":45,"display_name":"ricb"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6097,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":24766349,"answer_count":5,"score":6,"last_activity_date":1681124331,"creation_date":1405451059,"question_id":24766147,"body_markdown":"I have a [tag:TestNG] suite of test classes that I am running via a testng.xml file. This works fine. All tests are run serially, so no parallel-execution hurdles.\r\n\r\nMy goal now is to take state that was generated by the test methods in one test class (e.g., a `customerId` primary key value generated by a database insert) and pass it along to another test class, so that the test methods in that second class can take further action based on that shared state (e.g., look up the just-inserted customer using the `customerId` value from the first class).\r\n\r\nIt&#39;s easy to share state between test methods in a single class, of course, via class member variables, but I don&#39;t see how to share it across test classes.","title":"TestNG - sharing state between test classes","body":"<p>I have a <a href=\"/questions/tagged/testng\" class=\"post-tag\" title=\"show questions tagged &#39;testng&#39;\" rel=\"tag\">testng</a> suite of test classes that I am running via a testng.xml file. This works fine. All tests are run serially, so no parallel-execution hurdles.</p>\n\n<p>My goal now is to take state that was generated by the test methods in one test class (e.g., a <code>customerId</code> primary key value generated by a database insert) and pass it along to another test class, so that the test methods in that second class can take further action based on that shared state (e.g., look up the just-inserted customer using the <code>customerId</code> value from the first class).</p>\n\n<p>It's easy to share state between test methods in a single class, of course, via class member variables, but I don't see how to share it across test classes.</p>\n"},{"tags":["java","jsoup","pretty-print"],"answers":[{"comments":[{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":1,"creation_date":1600757000,"post_id":59402227,"comment_id":113179711,"body_markdown":"Okay, after 9 months without a single comment or alternative answer, I am accepting my own workaround as an answer. My request on the mailing list also was not answered. So I am not expecting any progress there feature-wise. &#128532;","body":"Okay, after 9 months without a single comment or alternative answer, I am accepting my own workaround as an answer. My request on the mailing list also was not answered. So I am not expecting any progress there feature-wise. 😔"}],"tags":[],"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1681123711,"creation_date":1576719270,"answer_id":59402227,"question_id":59367234,"body_markdown":"What I ended up doing, because I got no answer here so far and found no better solution either, is horrible, but it works:\r\n\r\n  1. **Parse** + clean document\r\n  2. Get (via `toString()`) + preserve pretty-printed HTML content\r\n  3. Deactivate pretty-printing, then get (via `toString()`) + **re-parse** content in original formatting into temporary document\r\n  4. **Re-parse** pretty-printed content from step 2 and assign to original document (overwriting it), then deactivate pretty-printing for the newly assigned document\r\n  5. Replace content for which pretty-printing would destroy formatting (e.g. elements with CSS `white-space: pre-wrap`) by preserved original from step 2 via iterating over both documents in parallel via something like\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    for (int i = 0; i &lt; elementsToBeFixed.size(); i++) \r\n      elementsToBeFixed.get(i).replaceWith(originalElements.get(i));\r\n\r\nConclusion: This is ugly because the same document which has already been parsed + cleaned up before needs to be re-parsed two more times, i.e. we have a total of 3 `Jsoup.parse(..)` calls. But - it works. `:-/`\r\n\r\nI am still waiting for a better answer here, though.","title":"Selectively deactivate pretty-print in jsoup for certain regions in a document","body":"<p>What I ended up doing, because I got no answer here so far and found no better solution either, is horrible, but it works:</p>\n<ol>\n<li><strong>Parse</strong> + clean document</li>\n<li>Get (via <code>toString()</code>) + preserve pretty-printed HTML content</li>\n<li>Deactivate pretty-printing, then get (via <code>toString()</code>) + <strong>re-parse</strong> content in original formatting into temporary document</li>\n<li><strong>Re-parse</strong> pretty-printed content from step 2 and assign to original document (overwriting it), then deactivate pretty-printing for the newly assigned document</li>\n<li>Replace content for which pretty-printing would destroy formatting (e.g. elements with CSS <code>white-space: pre-wrap</code>) by preserved original from step 2 via iterating over both documents in parallel via something like</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>for (int i = 0; i &lt; elementsToBeFixed.size(); i++) \n  elementsToBeFixed.get(i).replaceWith(originalElements.get(i));\n</code></pre>\n<p>Conclusion: This is ugly because the same document which has already been parsed + cleaned up before needs to be re-parsed two more times, i.e. we have a total of 3 <code>Jsoup.parse(..)</code> calls. But - it works. <code>:-/</code></p>\n<p>I am still waiting for a better answer here, though.</p>\n"}],"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":480,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":59402227,"answer_count":1,"score":2,"last_activity_date":1681123711,"creation_date":1576553389,"question_id":59367234,"body_markdown":"When cleaning HTML documents with _**jsoup**_ I like the fact that it automatically applies pretty-printing. I know I can deactivate it on a per-document basis, but I like to apply it for most of the document with the exception of certain problematic regions in which jsoup does not do a good job.\r\n\r\nAn example would be `DIV` tags with [CSS specifying `white-space: pre-wrap;`](https://css-tricks.com/almanac/properties/w/whitespace/), i.e. semantically they behave like `PRE` tags, which means that the browser will be sensitive to line feeds and other whitespace (indentation). It gets worse if inside those regions there are more tags like `BR`, `SPAN` etc. because pretty-printing is applied and destroys the intended formatting of those regions.\r\n\r\nSo instead of deactivating pretty-printing completely for the whole HTML document, I like to selectively deactivate it whenever the parser meets something like `div.listing` (yes, I know the CSS class name of the problematic region) and retain the original HTML there. How would I go about implementing this?\r\n\r\n**Update:** I forgot to mention that I print the cleaned document using \r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    output.print(document);\r\n\r\nwhere `output` is a `PrintStream` and `document` is the jsoup `Document` instance. So if there is a better way to output the document, I am also open for suggestions.","title":"Selectively deactivate pretty-print in jsoup for certain regions in a document","body":"<p>When cleaning HTML documents with <em><strong>jsoup</strong></em> I like the fact that it automatically applies pretty-printing. I know I can deactivate it on a per-document basis, but I like to apply it for most of the document with the exception of certain problematic regions in which jsoup does not do a good job.</p>\n\n<p>An example would be <code>DIV</code> tags with <a href=\"https://css-tricks.com/almanac/properties/w/whitespace/\" rel=\"nofollow noreferrer\">CSS specifying <code>white-space: pre-wrap;</code></a>, i.e. semantically they behave like <code>PRE</code> tags, which means that the browser will be sensitive to line feeds and other whitespace (indentation). It gets worse if inside those regions there are more tags like <code>BR</code>, <code>SPAN</code> etc. because pretty-printing is applied and destroys the intended formatting of those regions.</p>\n\n<p>So instead of deactivating pretty-printing completely for the whole HTML document, I like to selectively deactivate it whenever the parser meets something like <code>div.listing</code> (yes, I know the CSS class name of the problematic region) and retain the original HTML there. How would I go about implementing this?</p>\n\n<p><strong>Update:</strong> I forgot to mention that I print the cleaned document using </p>\n\n<pre class=\"lang-java prettyprint-override\"><code>output.print(document);\n</code></pre>\n\n<p>where <code>output</code> is a <code>PrintStream</code> and <code>document</code> is the jsoup <code>Document</code> instance. So if there is a better way to output the document, I am also open for suggestions.</p>\n"},{"tags":["java","rest","ssl","grizzly"],"comments":[{"owner":{"account_id":3013228,"reputation":205797,"user_id":2587435,"accept_rate":88,"display_name":"Paul Samsotha"},"score":0,"creation_date":1448038591,"post_id":33831480,"comment_id":55429233,"body_markdown":"You only need the client cert in the server trust store for mutual (two way) ssl. If the server cert is self signed, what you will need to do is add the server cert to the client trust store","body":"You only need the client cert in the server trust store for mutual (two way) ssl. If the server cert is self signed, what you will need to do is add the server cert to the client trust store"},{"owner":{"account_id":3013228,"reputation":205797,"user_id":2587435,"accept_rate":88,"display_name":"Paul Samsotha"},"score":1,"creation_date":1448039269,"post_id":33831480,"comment_id":55429647,"body_markdown":"Take a look at [this example](https://github.com/jersey/jersey/tree/master/examples/https-clientserver-grizzly)","body":"Take a look at <a href=\"https://github.com/jersey/jersey/tree/master/examples/https-clientserver-grizzly\" rel=\"nofollow noreferrer\">this example</a>"},{"owner":{"account_id":293805,"reputation":233,"user_id":3426462,"accept_rate":20,"display_name":"jmsimpson68"},"score":0,"creation_date":1448041526,"post_id":33831480,"comment_id":55430927,"body_markdown":"@peetskillet - that is the example I started with.  The only difference is that I&#39;m not using the jersey-container-grizzly2-servlet setup.  Just using the regular jersey-container-grizzly2-http version as a dependency.  I don&#39;t think that would make any difference.","body":"@peetskillet - that is the example I started with.  The only difference is that I&#39;m not using the jersey-container-grizzly2-servlet setup.  Just using the regular jersey-container-grizzly2-http version as a dependency.  I don&#39;t think that would make any difference."},{"owner":{"account_id":3013228,"reputation":205797,"user_id":2587435,"accept_rate":88,"display_name":"Paul Samsotha"},"score":0,"creation_date":1448041869,"post_id":33831480,"comment_id":55431101,"body_markdown":"Are you using the Jersey client or a different client? Did you follow the instructions to create the stores and imports? The example as is works for me (also create new stores from the instructions). You can see the Jersey client set up in the test case. I don&#39;t think changing from the servlet to http config should make a different, though I didn&#39;t test","body":"Are you using the Jersey client or a different client? Did you follow the instructions to create the stores and imports? The example as is works for me (also create new stores from the instructions). You can see the Jersey client set up in the test case. I don&#39;t think changing from the servlet to http config should make a different, though I didn&#39;t test"},{"owner":{"account_id":293805,"reputation":233,"user_id":3426462,"accept_rate":20,"display_name":"jmsimpson68"},"score":0,"creation_date":1448042565,"post_id":33831480,"comment_id":55431482,"body_markdown":"Right now I&#39;m just using a web browser (Safari, Firefox, Chrome) to attempt to access the resource.  No luck with them.  It should be setup to allow simple 1-way SSL with a browser.  I&#39;m not using a special client.","body":"Right now I&#39;m just using a web browser (Safari, Firefox, Chrome) to attempt to access the resource.  No luck with them.  It should be setup to allow simple 1-way SSL with a browser.  I&#39;m not using a special client."},{"owner":{"account_id":3013228,"reputation":205797,"user_id":2587435,"accept_rate":88,"display_name":"Paul Samsotha"},"score":0,"creation_date":1448042725,"post_id":33831480,"comment_id":55431572,"body_markdown":"Does it at least show you something asking if you want to trust the cert when testing in the browser?","body":"Does it at least show you something asking if you want to trust the cert when testing in the browser?"},{"owner":{"account_id":293805,"reputation":233,"user_id":3426462,"accept_rate":20,"display_name":"jmsimpson68"},"score":0,"creation_date":1448043407,"post_id":33831480,"comment_id":55431931,"body_markdown":"Unfortunately, no.  That was what I was expecting (the &quot;get me out of here&quot; dialog).  It just fails in the handshake before it gets there and the browser tell me that the connection was unsecure and interrupted.","body":"Unfortunately, no.  That was what I was expecting (the &quot;get me out of here&quot; dialog).  It just fails in the handshake before it gets there and the browser tell me that the connection was unsecure and interrupted."},{"owner":{"account_id":293805,"reputation":233,"user_id":3426462,"accept_rate":20,"display_name":"jmsimpson68"},"score":0,"creation_date":1448044621,"post_id":33831480,"comment_id":55432596,"body_markdown":"Let us [continue this discussion in chat](http://chat.stackoverflow.com/rooms/95735/discussion-between-jms-and-peeskillet).","body":"Let us <a href=\"http://chat.stackoverflow.com/rooms/95735/discussion-between-jms-and-peeskillet\">continue this discussion in chat</a>."},{"owner":{"account_id":9111310,"reputation":871,"user_id":6779950,"display_name":"Steve Owens"},"score":0,"creation_date":1520366975,"post_id":33831480,"comment_id":85283467,"body_markdown":"I sure would have loved to been in on that chat, I am having the same issue with my configuration.  Just hangs waiting for the certs.","body":"I sure would have loved to been in on that chat, I am having the same issue with my configuration.  Just hangs waiting for the certs."},{"owner":{"account_id":467725,"reputation":19389,"user_id":873282,"accept_rate":55,"display_name":"koppor"},"score":0,"creation_date":1681123047,"post_id":33831480,"comment_id":134001658,"body_markdown":"Similar question: https://stackoverflow.com/q/21098105/873282","body":"Similar question: <a href=\"https://stackoverflow.com/q/21098105/873282\">stackoverflow.com/q/21098105/873282</a>"}],"answers":[{"tags":[],"owner":{"account_id":293805,"reputation":233,"user_id":3426462,"accept_rate":20,"display_name":"jmsimpson68"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1448046706,"creation_date":1448046706,"answer_id":33834327,"question_id":33831480,"body_markdown":"I have seen this type of handshake issue come up in other posts while trying to run this issue to ground.  In all of these handshake posts, the server key algorithm was never discussed - I wish it had been.  It would have saved me a couple of hours.  The issue that caused the above errors stemmed from assuming that the keystores that were created as part of the Jersey sample project would work.  The server key was the problem.\r\n\r\nThe sample server certs are generated using the DSA algorithm.  Apparently this is an issue.\r\n\r\nI recreated the server keys using a RSA algorithm and 2048 bit strength.  I restarted the server and the everything started to work like one would expect.  \r\n\r\nThe error was that I assumed that the &quot;sample&quot; keys would work.  Oops.","title":"How to setup basic Jersey/Grizzly 2.21 SSL startup configuration","body":"<p>I have seen this type of handshake issue come up in other posts while trying to run this issue to ground.  In all of these handshake posts, the server key algorithm was never discussed - I wish it had been.  It would have saved me a couple of hours.  The issue that caused the above errors stemmed from assuming that the keystores that were created as part of the Jersey sample project would work.  The server key was the problem.</p>\n\n<p>The sample server certs are generated using the DSA algorithm.  Apparently this is an issue.</p>\n\n<p>I recreated the server keys using a RSA algorithm and 2048 bit strength.  I restarted the server and the everything started to work like one would expect.  </p>\n\n<p>The error was that I assumed that the \"sample\" keys would work.  Oops.</p>\n"},{"comments":[{"owner":{"account_id":467725,"reputation":19389,"user_id":873282,"accept_rate":55,"display_name":"koppor"},"score":0,"creation_date":1681123162,"post_id":37175710,"comment_id":134001669,"body_markdown":"Note that this misses `AltName`, thus it won&#39;t work in newest Chrome: https://stackoverflow.com/a/42917227/873282.","body":"Note that this misses <code>AltName</code>, thus it won&#39;t work in newest Chrome: <a href=\"https://stackoverflow.com/a/42917227/873282\">stackoverflow.com/a/42917227/873282</a>."}],"tags":[],"owner":{"account_id":5509958,"reputation":59,"user_id":4376572,"display_name":"Steve Low"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1463015828,"creation_date":1463015828,"answer_id":37175710,"question_id":33831480,"body_markdown":"To add on top of JMS comment, his answer solve my problem too .\r\nHere is the command i used to generate the RSA certificate .\r\n\r\n    keytool -genkey -keystore ./keystore_client -alias clientKey -keyalg RSA -keypass changeit -storepass changeit -dname &quot;CN=Client, OU=Jersey, O=changeit, L=KL, ST=SEL, C=MY&quot;\r\n    keytool -export -alias clientKey -storepass changeit -keystore ./keystore_client -file ./client.cert\r\n    keytool -import -alias clientCert -file ./client.cert -storepass changeit -keystore ./truststore_server\r\n    \r\n    \r\n    keytool -genkey -keystore ./keystore_server -alias serverKey -keyalg RSA -keyalg RSA -keypass changeit -storepass changeit -dname &quot;CN=changeit, OU=Jersey, O=changeit, L=KL, ST=SEL, C=MY&quot;\r\n    keytool -export -alias serverKey -storepass changeit -keystore ./keystore_server -file ./server.cert\r\n    keytool -import -alias serverCert -file ./server.cert -storepass changeit -keystore ./truststore_client","title":"How to setup basic Jersey/Grizzly 2.21 SSL startup configuration","body":"<p>To add on top of JMS comment, his answer solve my problem too .\nHere is the command i used to generate the RSA certificate .</p>\n\n<pre><code>keytool -genkey -keystore ./keystore_client -alias clientKey -keyalg RSA -keypass changeit -storepass changeit -dname \"CN=Client, OU=Jersey, O=changeit, L=KL, ST=SEL, C=MY\"\nkeytool -export -alias clientKey -storepass changeit -keystore ./keystore_client -file ./client.cert\nkeytool -import -alias clientCert -file ./client.cert -storepass changeit -keystore ./truststore_server\n\n\nkeytool -genkey -keystore ./keystore_server -alias serverKey -keyalg RSA -keyalg RSA -keypass changeit -storepass changeit -dname \"CN=changeit, OU=Jersey, O=changeit, L=KL, ST=SEL, C=MY\"\nkeytool -export -alias serverKey -storepass changeit -keystore ./keystore_server -file ./server.cert\nkeytool -import -alias serverCert -file ./server.cert -storepass changeit -keystore ./truststore_client\n</code></pre>\n"},{"tags":[],"owner":{"account_id":467725,"reputation":19389,"user_id":873282,"accept_rate":55,"display_name":"koppor"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681123371,"creation_date":1681123371,"answer_id":75976392,"question_id":33831480,"body_markdown":"The SSL certificate needs an `AltName`. See &lt;https://stackoverflow.com/a/42917227/873282&gt; for details.\r\n\r\nUse [`mkcert`](https://github.com/FiloSottile/mkcert) to generate a valid SSL certificate (based on &lt;https://stackoverflow.com/a/57511038/873282&gt;)\r\n\r\n1. As admin `choco install mkcert`\r\n2. As admin: `mkcert -install`\r\n3. `cd \\temp`\r\n4. `mkcert -pkcs12 app localhost 127.0.0.1 ::1`\r\n5. Rename the file to `server.p12`\r\n\r\nIn Java, you can use that file as keystore:\r\n\r\n```java\r\n        SSLContextConfigurator sslContextConfig = new SSLContextConfigurator();\r\n        sslContextConfig.setKeyStoreFile(Path.of(&quot;c:\\\\temp\\\\server.p12&quot;).toString());\r\n        sslContextConfig.setKeyStorePass(&quot;changeit&quot;);\r\n        sslContextConfig.createSSLContext();\r\n```","title":"How to setup basic Jersey/Grizzly 2.21 SSL startup configuration","body":"<p>The SSL certificate needs an <code>AltName</code>. See <a href=\"https://stackoverflow.com/a/42917227/873282\">https://stackoverflow.com/a/42917227/873282</a> for details.</p>\n<p>Use <a href=\"https://github.com/FiloSottile/mkcert\" rel=\"nofollow noreferrer\"><code>mkcert</code></a> to generate a valid SSL certificate (based on <a href=\"https://stackoverflow.com/a/57511038/873282\">https://stackoverflow.com/a/57511038/873282</a>)</p>\n<ol>\n<li>As admin <code>choco install mkcert</code></li>\n<li>As admin: <code>mkcert -install</code></li>\n<li><code>cd \\temp</code></li>\n<li><code>mkcert -pkcs12 app localhost 127.0.0.1 ::1</code></li>\n<li>Rename the file to <code>server.p12</code></li>\n</ol>\n<p>In Java, you can use that file as keystore:</p>\n<pre class=\"lang-java prettyprint-override\"><code>        SSLContextConfigurator sslContextConfig = new SSLContextConfigurator();\n        sslContextConfig.setKeyStoreFile(Path.of(&quot;c:\\\\temp\\\\server.p12&quot;).toString());\n        sslContextConfig.setKeyStorePass(&quot;changeit&quot;);\n        sslContextConfig.createSSLContext();\n</code></pre>\n"}],"owner":{"account_id":293805,"reputation":233,"user_id":3426462,"accept_rate":20,"display_name":"jmsimpson68"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1945,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":3,"score":3,"last_activity_date":1681123371,"creation_date":1448036805,"question_id":33831480,"body_markdown":"I&#39;m trying to get a very basic Grizzly server up and running to allow for one-way SSL (HTTPS) connections to access jax-rs REST services.  Eventually I want two-way SSL security.\r\n\r\nI&#39;ve gone through many of the examples and I just can&#39;t get anything to work.  I keep running into a SSL Handshake error.  Clearly I must be doing something stupid.  Any help is appreciated.\r\n\r\nHere is my code to start my embedded Grizzly server using the Jersey wrapper classes:\r\n\r\n\r\n\r\n    public static HttpServer startHttpsServer(URI listenerURI) throws IOException  {\r\n      ResourceConfig resourceConfig = new ResourceConfig().packages(&quot;ws.argo.experiment.ssl&quot;);\r\n    \r\n      // First I tried this configuration using the certs from the Jersey sample code\r\n      // Grizzly ssl configuration\r\n      SSLContextConfigurator sslContext = new SSLContextConfigurator();\r\n    \r\n      // set up security context\r\n      sslContext.setKeyStoreFile(&quot;./src/main/resources/keystore_server&quot;); // contains server keypair\r\n      sslContext.setKeyStorePass(&quot;asdfgh&quot;);\r\n      sslContext.setTrustStoreFile(&quot;./src/main/resources/truststore_server&quot;); // contains client certificate\r\n      sslContext.setTrustStorePass(&quot;asdfgh&quot;);\r\n       \r\n      // Then I tried just using a default config - didn&#39;t work either\r\n      //    sslContext = SSLContextConfigurator.DEFAULT_CONFIG;\r\n    \r\n    \r\n      if (!sslContext.validateConfiguration(true)) {\r\n        LOGGER.severe(&quot;Context is not valid&quot;);\r\n      \r\n      }\r\n    \r\n      LOGGER.finer(&quot;Starting Jersey-Grizzly2 JAX-RS secure server...&quot;);\r\n      HttpServer httpServer; //=   GrizzlyHttpServerFactory.createHttpServer(listenerURI, resourceConfig, false);\r\n    \r\n    \r\n      httpServer= GrizzlyHttpServerFactory.createHttpServer(\r\n          listenerURI,\r\n          resourceConfig,\r\n          true,\r\n          new   SSLEngineConfigurator(sslContext).setClientMode(false).setNeedClientAuth(false)\r\n          );\r\n    \r\n    \r\n    \r\n      httpServer.getServerConfiguration().setName(&quot;Test HTTPS Server&quot;);\r\n      httpServer.start();\r\n      LOGGER.info(&quot;Started Jersey-Grizzly2 JAX-RS secure server.&quot;);\r\n    \r\n      return httpServer;\r\n    }\r\n\r\nI also tried replaced SSLEngineConfigurator(sslContext).setClientMode(false).setNeedClientAuth(false)  with null to see if that would help.  Nope.\r\n\r\nI always get the following error:\r\n\r\n    grizzly-nio-kernel(3) SelectorRunner, fatal error: 40: no cipher suites in common\r\n    javax.net.ssl.SSLHandshakeException: no cipher suites in common\r\n    %% Invalidated:  [Session-2, SSL_NULL_WITH_NULL_NULL]\r\n    grizzly-nio-kernel(3) SelectorRunner, SEND TLSv1.2 ALERT:  fatal, description = handshake_failure\r\n    grizzly-nio-kernel(3) SelectorRunner, WRITE: TLSv1.2 Alert, length = 2\r\n    grizzly-nio-kernel(3) SelectorRunner, fatal: engine already closed.  Rethrowing javax.net.ssl.SSLHandshakeException: no cipher suites in common\r\n\r\n","title":"How to setup basic Jersey/Grizzly 2.21 SSL startup configuration","body":"<p>I'm trying to get a very basic Grizzly server up and running to allow for one-way SSL (HTTPS) connections to access jax-rs REST services.  Eventually I want two-way SSL security.</p>\n\n<p>I've gone through many of the examples and I just can't get anything to work.  I keep running into a SSL Handshake error.  Clearly I must be doing something stupid.  Any help is appreciated.</p>\n\n<p>Here is my code to start my embedded Grizzly server using the Jersey wrapper classes:</p>\n\n<pre><code>public static HttpServer startHttpsServer(URI listenerURI) throws IOException  {\n  ResourceConfig resourceConfig = new ResourceConfig().packages(\"ws.argo.experiment.ssl\");\n\n  // First I tried this configuration using the certs from the Jersey sample code\n  // Grizzly ssl configuration\n  SSLContextConfigurator sslContext = new SSLContextConfigurator();\n\n  // set up security context\n  sslContext.setKeyStoreFile(\"./src/main/resources/keystore_server\"); // contains server keypair\n  sslContext.setKeyStorePass(\"asdfgh\");\n  sslContext.setTrustStoreFile(\"./src/main/resources/truststore_server\"); // contains client certificate\n  sslContext.setTrustStorePass(\"asdfgh\");\n\n  // Then I tried just using a default config - didn't work either\n  //    sslContext = SSLContextConfigurator.DEFAULT_CONFIG;\n\n\n  if (!sslContext.validateConfiguration(true)) {\n    LOGGER.severe(\"Context is not valid\");\n\n  }\n\n  LOGGER.finer(\"Starting Jersey-Grizzly2 JAX-RS secure server...\");\n  HttpServer httpServer; //=   GrizzlyHttpServerFactory.createHttpServer(listenerURI, resourceConfig, false);\n\n\n  httpServer= GrizzlyHttpServerFactory.createHttpServer(\n      listenerURI,\n      resourceConfig,\n      true,\n      new   SSLEngineConfigurator(sslContext).setClientMode(false).setNeedClientAuth(false)\n      );\n\n\n\n  httpServer.getServerConfiguration().setName(\"Test HTTPS Server\");\n  httpServer.start();\n  LOGGER.info(\"Started Jersey-Grizzly2 JAX-RS secure server.\");\n\n  return httpServer;\n}\n</code></pre>\n\n<p>I also tried replaced SSLEngineConfigurator(sslContext).setClientMode(false).setNeedClientAuth(false)  with null to see if that would help.  Nope.</p>\n\n<p>I always get the following error:</p>\n\n<pre><code>grizzly-nio-kernel(3) SelectorRunner, fatal error: 40: no cipher suites in common\njavax.net.ssl.SSLHandshakeException: no cipher suites in common\n%% Invalidated:  [Session-2, SSL_NULL_WITH_NULL_NULL]\ngrizzly-nio-kernel(3) SelectorRunner, SEND TLSv1.2 ALERT:  fatal, description = handshake_failure\ngrizzly-nio-kernel(3) SelectorRunner, WRITE: TLSv1.2 Alert, length = 2\ngrizzly-nio-kernel(3) SelectorRunner, fatal: engine already closed.  Rethrowing javax.net.ssl.SSLHandshakeException: no cipher suites in common\n</code></pre>\n"},{"tags":["java","opencv","cmake"],"owner":{"account_id":17784177,"reputation":47,"user_id":12914645,"display_name":"Alyona"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1681123076,"creation_date":1680854205,"question_id":75956530,"body_markdown":"I develop an Android application that uses face recognition. But the standard library does not contain the org.opencv.face package. \r\n\r\nAs I found out, it needs to be generated from OpenCV Contrib using cmake. I used the following command to do this. \r\n\r\n```\r\ncmake -D CMAKE_BUILD_TYPE=Release -D OPENCV_EXTRA_MODULES_PATH=&lt;path to opencv_contrib&gt; &lt;opencv_source_directory&gt;\r\n```\r\n\r\nBut there is no Java code in the generated files. \r\n\r\nThe console displays the following output. \r\n\r\n```\r\n-- Java:\r\n-- ant:                         NO.\r\n-- JNI:                         C:/Program Files/Java/jdk-17/include C:/Program Files/Java/jdk-17/include/win32 C:/Program Files/Java/jdk-17/include\r\n-- Java wrappers:               NO\r\n-- Java tests:                  NO\r\n```\r\n\r\n\r\n\r\n\r\n\r\nI tried adding the following parameters to the command.\r\n\r\n```\r\n-D BUILD_opencv_java=ON\r\n-D WITH_JAVA=ON\r\n```\r\n\r\nBut nothing changes. ","title":"Generating additional OpenCV libraries for Java using cmake","body":"<p>I develop an Android application that uses face recognition. But the standard library does not contain the org.opencv.face package.</p>\n<p>As I found out, it needs to be generated from OpenCV Contrib using cmake. I used the following command to do this.</p>\n<pre><code>cmake -D CMAKE_BUILD_TYPE=Release -D OPENCV_EXTRA_MODULES_PATH=&lt;path to opencv_contrib&gt; &lt;opencv_source_directory&gt;\n</code></pre>\n<p>But there is no Java code in the generated files.</p>\n<p>The console displays the following output.</p>\n<pre><code>-- Java:\n-- ant:                         NO.\n-- JNI:                         C:/Program Files/Java/jdk-17/include C:/Program Files/Java/jdk-17/include/win32 C:/Program Files/Java/jdk-17/include\n-- Java wrappers:               NO\n-- Java tests:                  NO\n</code></pre>\n<p>I tried adding the following parameters to the command.</p>\n<pre><code>-D BUILD_opencv_java=ON\n-D WITH_JAVA=ON\n</code></pre>\n<p>But nothing changes.</p>\n"},{"tags":["java","java-11","lib",".so"],"comments":[{"owner":{"account_id":7258992,"reputation":2411,"user_id":5536516,"accept_rate":86,"display_name":"nyg"},"score":0,"creation_date":1691328451,"post_id":75976241,"comment_id":135473952,"body_markdown":"“_Based on java official documentation, Agent_OnAttach is present in libmanagement_agent.so._” Do you have a link? Looking at the [source code](https://github.com/openjdk/jdk/blob/jdk-11%2B28/src/jdk.management.agent/unix/native/libmanagement_agent/FileSystemImpl.c) `Agent_OnAttach` is not present.","body":"“<i>Based on java official documentation, Agent_OnAttach is present in libmanagement_agent.so.</i>” Do you have a link? Looking at the <a href=\"https://github.com/openjdk/jdk/blob/jdk-11%2B28/src/jdk.management.agent/unix/native/libmanagement_agent/FileSystemImpl.c\" rel=\"nofollow noreferrer\">source code</a> <code>Agent_OnAttach</code> is not present."}],"owner":{"account_id":28262251,"reputation":1,"user_id":21606747,"display_name":"user1234"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":84,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681122773,"creation_date":1681122043,"question_id":75976241,"body_markdown":"**QUESTION-1**\r\n\r\nI&#39;m trying to load the management_agent (libmanagement_agent.so library) into the jvm to set gc compilation vm argument on runtime.\r\nThis is my code snippet \r\n\r\n```\r\nlong pid = getProcessId();\r\nVirtualMachine vm = VirtualMachine.attach(Long.toString(pid));\r\nvm = VirtualMachine.attach(Long.toString(pid));\r\nProperties agentProperties = vm.getAgentProperties();\r\n\r\nString options = agentProperties.getProperty(&quot;sun.jvm.args&quot;);\t\t\t\t\r\nString connectorAddress = vm.getAgentProperties().getProperty(&quot;com.sun.management.jmxremote.localConnectorAddress&quot;);\r\noptions += &quot; -Xlog:gc*:file=gc.log&quot;;\r\nagentProperties.setProperty(&quot;sun.jvm.args&quot;, options);\r\n\t\t\t\r\nvm.loadAgentLibrary(&quot;management_agent&quot;,options);\r\nvm.detach();\r\n```\r\nI&#39;m trying to load the manage_agent library along with the updated set of vm arguments\r\n\r\nBut the agent is not loaded, I&#39;m getting the following error\r\n \r\n&gt; com.sun.tools.attach.AgentLoadException: Failed to load agent library: Agent_OnAttach is not available in management_agent\r\n\tat jdk.attach/sun.tools.attach.VirtualMachineImpl.execute(VirtualMachineImpl.java:220)\r\n\tat jdk.attach/sun.tools.attach.HotSpotVirtualMachine.loadAgentLibrary(HotSpotVirtualMachine.java:94)\r\n\tat jdk.attach/sun.tools.attach.HotSpotVirtualMachine.loadAgentLibrary(HotSpotVirtualMachine.java:119)\r\n\tat JdkLogs.main(gclogs.java:48)\r\n\r\nBased on java official documentation, Agent_OnAttach is present in libmanagement_agent.so. My java version is 11.\r\n\r\n\r\n**QUESTION-2**\r\n\r\nI can load the agent by uing local manage agent\r\n`vm.startLocalManagementAgent();`\r\n\r\nIs there any possibility to add the vm argument to the agent loaded by this way\r\n\r\n------------------\r\n\r\nAny help would be appreciated","title":"Failed to load agent library: Agent_OnAttach is not available in management_agent","body":"<p><strong>QUESTION-1</strong></p>\n<p>I'm trying to load the management_agent (libmanagement_agent.so library) into the jvm to set gc compilation vm argument on runtime.\nThis is my code snippet</p>\n<pre><code>long pid = getProcessId();\nVirtualMachine vm = VirtualMachine.attach(Long.toString(pid));\nvm = VirtualMachine.attach(Long.toString(pid));\nProperties agentProperties = vm.getAgentProperties();\n\nString options = agentProperties.getProperty(&quot;sun.jvm.args&quot;);               \nString connectorAddress = vm.getAgentProperties().getProperty(&quot;com.sun.management.jmxremote.localConnectorAddress&quot;);\noptions += &quot; -Xlog:gc*:file=gc.log&quot;;\nagentProperties.setProperty(&quot;sun.jvm.args&quot;, options);\n            \nvm.loadAgentLibrary(&quot;management_agent&quot;,options);\nvm.detach();\n</code></pre>\n<p>I'm trying to load the manage_agent library along with the updated set of vm arguments</p>\n<p>But the agent is not loaded, I'm getting the following error</p>\n<blockquote>\n<p>com.sun.tools.attach.AgentLoadException: Failed to load agent library: Agent_OnAttach is not available in management_agent\nat jdk.attach/sun.tools.attach.VirtualMachineImpl.execute(VirtualMachineImpl.java:220)\nat jdk.attach/sun.tools.attach.HotSpotVirtualMachine.loadAgentLibrary(HotSpotVirtualMachine.java:94)\nat jdk.attach/sun.tools.attach.HotSpotVirtualMachine.loadAgentLibrary(HotSpotVirtualMachine.java:119)\nat JdkLogs.main(gclogs.java:48)</p>\n</blockquote>\n<p>Based on java official documentation, Agent_OnAttach is present in libmanagement_agent.so. My java version is 11.</p>\n<p><strong>QUESTION-2</strong></p>\n<p>I can load the agent by uing local manage agent\n<code>vm.startLocalManagementAgent();</code></p>\n<p>Is there any possibility to add the vm argument to the agent loaded by this way</p>\n<hr />\n<p>Any help would be appreciated</p>\n"},{"tags":["java","loops","chess"],"comments":[{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1681058717,"post_id":75971611,"comment_id":133994509,"body_markdown":"Please add some sourcecode of your existing routines, so we can see what it actually does - and not just what you described ;-) You could insert a comment at the position where you would like to test the possible blockings of a check.","body":"Please add some sourcecode of your existing routines, so we can see what it actually does - and not just what you described ;-) You could insert a comment at the position where you would like to test the possible blockings of a check."},{"owner":{"account_id":27424694,"reputation":7,"user_id":20922422,"display_name":"deprexit"},"score":0,"creation_date":1681059922,"post_id":75971611,"comment_id":133994683,"body_markdown":"@cyberbrain Sorry about that! I added the method I&#39;m trying to use, let me know if there&#39;s anything else you&#39;d like me to add :)","body":"@cyberbrain Sorry about that! I added the method I&#39;m trying to use, let me know if there&#39;s anything else you&#39;d like me to add :)"}],"answers":[{"comments":[{"owner":{"account_id":27424694,"reputation":7,"user_id":20922422,"display_name":"deprexit"},"score":0,"creation_date":1681081882,"post_id":75972787,"comment_id":133997238,"body_markdown":"Oh my god, I&#39;m so dumb. I was doing it backwards. You&#39;re brilliant tysm :)","body":"Oh my god, I&#39;m so dumb. I was doing it backwards. You&#39;re brilliant tysm :)"}],"tags":[],"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"comment_count":1,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1681073159,"creation_date":1681073159,"answer_id":75972787,"question_id":75971611,"body_markdown":"You need to identify all fields that a figure can move to.\r\nIf one of the enemy figures can move to your king&#39;s field, a check is active (you have it with `seenSquares()`).\r\n\r\nNext understand which fields need to be blocked to prevent this. This list depends on the position and the type of the figure initiating the check. This includes the field of that figure (a horse will only have that field as a possibility to remove the check).\r\n\r\nNext check, which of your figures can access such a field. Of those evaluated moves pick the one most suitable.\r\nDo not forget to compare moving your king out of the check condition as well.\r\n\r\nBut all this is algorithm, not java related.","title":"How do I see if a chess piece can move to block a check?","body":"<p>You need to identify all fields that a figure can move to.\nIf one of the enemy figures can move to your king's field, a check is active (you have it with <code>seenSquares()</code>).</p>\n<p>Next understand which fields need to be blocked to prevent this. This list depends on the position and the type of the figure initiating the check. This includes the field of that figure (a horse will only have that field as a possibility to remove the check).</p>\n<p>Next check, which of your figures can access such a field. Of those evaluated moves pick the one most suitable.\nDo not forget to compare moving your king out of the check condition as well.</p>\n<p>But all this is algorithm, not java related.</p>\n"}],"owner":{"account_id":27424694,"reputation":7,"user_id":20922422,"display_name":"deprexit"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":129,"favorite_count":0,"down_vote_count":4,"up_vote_count":1,"answer_count":1,"score":-3,"last_activity_date":1681122035,"creation_date":1681057201,"question_id":75971611,"body_markdown":"I&#39;m working on a chess bot for a personal project (in Java) and for the life of me, I can&#39;t figure out how to see if a piece can block a check. Here is the setup:\r\n\r\nBoard: Holds a 2d array of Squares, all of the Squares on the Board, and all of the Pieces. All of these fields are static so I didn&#39;t have to make like 80 getters. Also holds these ArrayLists: white&#39;s legal moves, black&#39;s legal moves, all of white&#39;s moves, all of black&#39;s moves, all of white&#39;s pieces, and all of black&#39;s pieces.\r\n\r\nSquare: Holds Pieces.\r\n\r\nPiece (And its child classes): Has two ArrayLists: moveset (all of the squares it could move to on an empty board from its current position, this is how I&#39;m going to deal with pins) and seen squares (all of the squares it can move to without hitting a piece of its own color). King has a boolean inCheck field.\r\n\r\nMove: Takes a piece and a square, has a play() method that deals with the logic of actually moving a piece, setting the square&#39;s new piece, etc.\r\n\r\nLogic: The Board&#39;s vision() method gets called after every move.  This updates the moveset and seen squares for all of the pieces and sets the King&#39;s inCheck field. It then adds all possible moves to the all moves ArrayLists. And then it should add all of the legal moves (taking checks into account) to the legal moves ArrayLists. \r\n\r\nAccounting for checks is where I&#39;m having trouble. The first part of is easy: Loop through all of white&#39;s moves, and if the King is in check, the King can move, so add it to the legal list. All moves that block a check would also be added (unless that piece is pinned), and everything else would be illegal until the King gets out of check.\r\n\r\nBut how do I see if a piece can block a check? This is the last thing I have to do before I get to actually work on the bot logic which is the part I&#39;m really excited about.\r\n\r\nI&#39;ve tried:\r\n\r\n-Seeing if one of white&#39;s pieces sees the same square as a piece giving the check (I think this is the right approach, I just can&#39;t figure out how to do it).\r\n\r\n-I made a method that returns an ArrayList of pieces that are giving checks, but got nowhere with that too.\r\n\r\nThank you for reading this! I know this was a novel lol I just wanted to make sure I gave all of the relevant information.\r\n\r\nHere is the vision method and the get checking pieces method:\r\n\r\n    public static void vision() {\r\n\r\n\r\n         //updateBoardVision is an overridden method in all of the\r\n         //Piece subclasses. It reevaluates all theoretically possible moves \r\n         //from the current square and all the squares it can move to\r\n\r\n        for (Piece p : whitePieces) {\r\n            p.updateBoardVision();\r\n        }\r\n\r\n        for (Piece p : blackPieces) {\r\n            p.updateBoardVision();\r\n        }\r\n        \r\n         //if a white piece can see the square the black king is on,\r\n         //the black king is in check\r\n        for (Piece p : whitePieces) {\r\n            if (p.seenSquares.contains(Board.bK.square)) {\r\n                Board.bK.setInCheck(true);\r\n            }\r\n        }\r\n        \r\n        //and vice versa\r\n        for (Piece p : blackPieces) {\r\n            if (p.seenSquares.contains(Board.wK.square)) {\r\n                Board.wK.setInCheck(true);\r\n            }\r\n        }\r\n        \r\n       //all possible moves, discounting checks\r\n        for (Piece p : whitePieces) {\r\n            for (Square s : p.seenSquares) {\r\n                Move m = new Move(p, s);\r\n                allWhiteMoves.add(m);\r\n            }\r\n        }\r\n        \r\n        for (Piece p : blackPieces) {\r\n            for (Square s : p.seenSquares) {\r\n                Move m = new Move(p, s);\r\n                allBlackMoves.add(m);\r\n            }\r\n        }\r\n        \r\n        //set every move to invalid\r\n        for (Move wm : allWhiteMoves) {\r\n            wm.setValid(false);\r\n        }\r\n        \r\n        for (Move bm : allBlackMoves) {\r\n            bm.setValid(false);\r\n        }\r\n        \r\n\r\n        \r\n        for (Move aWhiteMove : allWhiteMoves) {\r\n            \r\n            //if the king is in check\r\n            if (wK.isInCheck()) {\r\n                \r\n                //then we can move it\r\n                if (aWhiteMove.getPiece().equals(wK)) {\r\n                    aWhiteMove.setValid(true);\r\n                }\r\n                \r\n                //if there is a white piece, in white moves, that\r\n                //sees the same square as a checking piece, it can\r\n                //block the check so it&#39;s valid,\r\n                //but I also need to account for double checks.\r\n                //and then i need to do the same for black\r\n                //this whole part is where I&#39;m confused \r\n            }\r\n        }\r\n        \r\n        //after that i&#39;ll add all of the legal moves\r\n        for (Move r : allWhiteMoves) {\r\n            if (r.isValid()) {\r\n                whiteLegalMoves.add(r);\r\n            }\r\n        }\r\n        \r\n        for (Move s : allBlackMoves) {\r\n            if (s.isValid()) {\r\n                blackLegalMoves.add(s);\r\n            }\r\n        }\r\n        \r\n\r\n    }\r\n    \r\n     //this is where i see what piece(s) is/are giving the check\r\n     //it&#39;s an arraylist not a piece to account for multiple\r\n     //pieces giving a check at the same time\r\n    public static ArrayList&lt;Piece&gt; findCheckPieceWhite() {\r\n        ArrayList&lt;Piece&gt; checkPieces = new ArrayList();\r\n        \r\n        for (Piece p : blackPieces) {\r\n            if (p.seenSquares.contains(wK.square)) {\r\n                checkPieces.add(p);\r\n            }\r\n        }\r\n        \r\n        return checkPieces;\r\n    }\r\n    \r\n    public static ArrayList&lt;Piece&gt; findCheckPieceBlack() {\r\n        ArrayList&lt;Piece&gt; checkPieces = new ArrayList();\r\n        \r\n        for (Piece p : whitePieces) {\r\n            if (p.seenSquares.contains(bK.square)) {\r\n                checkPieces.add(p);\r\n            }\r\n        }\r\n        \r\n        return checkPieces;\r\n    }","title":"How do I see if a chess piece can move to block a check?","body":"<p>I'm working on a chess bot for a personal project (in Java) and for the life of me, I can't figure out how to see if a piece can block a check. Here is the setup:</p>\n<p>Board: Holds a 2d array of Squares, all of the Squares on the Board, and all of the Pieces. All of these fields are static so I didn't have to make like 80 getters. Also holds these ArrayLists: white's legal moves, black's legal moves, all of white's moves, all of black's moves, all of white's pieces, and all of black's pieces.</p>\n<p>Square: Holds Pieces.</p>\n<p>Piece (And its child classes): Has two ArrayLists: moveset (all of the squares it could move to on an empty board from its current position, this is how I'm going to deal with pins) and seen squares (all of the squares it can move to without hitting a piece of its own color). King has a boolean inCheck field.</p>\n<p>Move: Takes a piece and a square, has a play() method that deals with the logic of actually moving a piece, setting the square's new piece, etc.</p>\n<p>Logic: The Board's vision() method gets called after every move.  This updates the moveset and seen squares for all of the pieces and sets the King's inCheck field. It then adds all possible moves to the all moves ArrayLists. And then it should add all of the legal moves (taking checks into account) to the legal moves ArrayLists.</p>\n<p>Accounting for checks is where I'm having trouble. The first part of is easy: Loop through all of white's moves, and if the King is in check, the King can move, so add it to the legal list. All moves that block a check would also be added (unless that piece is pinned), and everything else would be illegal until the King gets out of check.</p>\n<p>But how do I see if a piece can block a check? This is the last thing I have to do before I get to actually work on the bot logic which is the part I'm really excited about.</p>\n<p>I've tried:</p>\n<p>-Seeing if one of white's pieces sees the same square as a piece giving the check (I think this is the right approach, I just can't figure out how to do it).</p>\n<p>-I made a method that returns an ArrayList of pieces that are giving checks, but got nowhere with that too.</p>\n<p>Thank you for reading this! I know this was a novel lol I just wanted to make sure I gave all of the relevant information.</p>\n<p>Here is the vision method and the get checking pieces method:</p>\n<pre><code>public static void vision() {\n\n\n     //updateBoardVision is an overridden method in all of the\n     //Piece subclasses. It reevaluates all theoretically possible moves \n     //from the current square and all the squares it can move to\n\n    for (Piece p : whitePieces) {\n        p.updateBoardVision();\n    }\n\n    for (Piece p : blackPieces) {\n        p.updateBoardVision();\n    }\n    \n     //if a white piece can see the square the black king is on,\n     //the black king is in check\n    for (Piece p : whitePieces) {\n        if (p.seenSquares.contains(Board.bK.square)) {\n            Board.bK.setInCheck(true);\n        }\n    }\n    \n    //and vice versa\n    for (Piece p : blackPieces) {\n        if (p.seenSquares.contains(Board.wK.square)) {\n            Board.wK.setInCheck(true);\n        }\n    }\n    \n   //all possible moves, discounting checks\n    for (Piece p : whitePieces) {\n        for (Square s : p.seenSquares) {\n            Move m = new Move(p, s);\n            allWhiteMoves.add(m);\n        }\n    }\n    \n    for (Piece p : blackPieces) {\n        for (Square s : p.seenSquares) {\n            Move m = new Move(p, s);\n            allBlackMoves.add(m);\n        }\n    }\n    \n    //set every move to invalid\n    for (Move wm : allWhiteMoves) {\n        wm.setValid(false);\n    }\n    \n    for (Move bm : allBlackMoves) {\n        bm.setValid(false);\n    }\n    \n\n    \n    for (Move aWhiteMove : allWhiteMoves) {\n        \n        //if the king is in check\n        if (wK.isInCheck()) {\n            \n            //then we can move it\n            if (aWhiteMove.getPiece().equals(wK)) {\n                aWhiteMove.setValid(true);\n            }\n            \n            //if there is a white piece, in white moves, that\n            //sees the same square as a checking piece, it can\n            //block the check so it's valid,\n            //but I also need to account for double checks.\n            //and then i need to do the same for black\n            //this whole part is where I'm confused \n        }\n    }\n    \n    //after that i'll add all of the legal moves\n    for (Move r : allWhiteMoves) {\n        if (r.isValid()) {\n            whiteLegalMoves.add(r);\n        }\n    }\n    \n    for (Move s : allBlackMoves) {\n        if (s.isValid()) {\n            blackLegalMoves.add(s);\n        }\n    }\n    \n\n}\n\n //this is where i see what piece(s) is/are giving the check\n //it's an arraylist not a piece to account for multiple\n //pieces giving a check at the same time\npublic static ArrayList&lt;Piece&gt; findCheckPieceWhite() {\n    ArrayList&lt;Piece&gt; checkPieces = new ArrayList();\n    \n    for (Piece p : blackPieces) {\n        if (p.seenSquares.contains(wK.square)) {\n            checkPieces.add(p);\n        }\n    }\n    \n    return checkPieces;\n}\n\npublic static ArrayList&lt;Piece&gt; findCheckPieceBlack() {\n    ArrayList&lt;Piece&gt; checkPieces = new ArrayList();\n    \n    for (Piece p : whitePieces) {\n        if (p.seenSquares.contains(bK.square)) {\n            checkPieces.add(p);\n        }\n    }\n    \n    return checkPieces;\n}\n</code></pre>\n"},{"tags":["java","spring","spring-aop","spring-cloud-sleuth"],"comments":[{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1681030354,"post_id":75649841,"comment_id":133991150,"body_markdown":"Welcome to SO. Please learn [how to ask a question on SO](https://stackoverflow.com/help/how-to-ask) and provide a [minimal, complete, and verifiable example](https://stackoverflow.com/help/mcve). Thank you. Your error message helps. I think I know what is happening. But in order to help you, I need to see your code. Only then, I can tell you how to fix it.","body":"Welcome to SO. Please learn <a href=\"https://stackoverflow.com/help/how-to-ask\">how to ask a question on SO</a> and provide a <a href=\"https://stackoverflow.com/help/mcve\">minimal, complete, and verifiable example</a>. Thank you. Your error message helps. I think I know what is happening. But in order to help you, I need to see your code. Only then, I can tell you how to fix it."}],"owner":{"account_id":1518554,"reputation":175,"user_id":1418931,"accept_rate":0,"display_name":"Shankar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681121875,"creation_date":1678099478,"question_id":75649841,"body_markdown":"I am trying to integrate Spring Sleuth with an existing Spring Boot application with below version. For some reason, during the start up, it;s failing to create bean with below error\r\n\r\nThe BatchEnrollment class as @EnableScheduling and @Scheduled methods\r\n\r\n```xml\r\n&lt;spring-cloud.version&gt;2021.0.3&lt;/spring-cloud.version&gt;\r\n&lt;spring-cloud-starter-sleuth.version&gt;3.1.3&lt;/spring-cloud-starter-sleuth.version&gt;\r\n\r\n  &lt;artifactId&gt;spring-boot-starter-aop&lt;/artifactId&gt;\r\n  &lt;version&gt;2.6.13&lt;/version&gt;\r\n  &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n  &lt;version&gt;2.6.13&lt;/version&gt;\r\n```\r\n\r\n&gt; org.springframework.aop.framework.AopConfigException: Could not\r\n&gt; generate CGLIB subclass of class com.scheduler.BatchEnrollment: Common\r\n&gt; causes of this problem include using a final class or a non-visible\r\n&gt; class; nested exception is java.lang.IllegalArgumentException: No\r\n&gt; visible constructors in class","title":"Spring Sleuth - AOP Bean Creation Exception","body":"<p>I am trying to integrate Spring Sleuth with an existing Spring Boot application with below version. For some reason, during the start up, it;s failing to create bean with below error</p>\n<p>The BatchEnrollment class as @EnableScheduling and @Scheduled methods</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;spring-cloud.version&gt;2021.0.3&lt;/spring-cloud.version&gt;\n&lt;spring-cloud-starter-sleuth.version&gt;3.1.3&lt;/spring-cloud-starter-sleuth.version&gt;\n\n  &lt;artifactId&gt;spring-boot-starter-aop&lt;/artifactId&gt;\n  &lt;version&gt;2.6.13&lt;/version&gt;\n  &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n  &lt;version&gt;2.6.13&lt;/version&gt;\n</code></pre>\n<blockquote>\n<p>org.springframework.aop.framework.AopConfigException: Could not\ngenerate CGLIB subclass of class com.scheduler.BatchEnrollment: Common\ncauses of this problem include using a final class or a non-visible\nclass; nested exception is java.lang.IllegalArgumentException: No\nvisible constructors in class</p>\n</blockquote>\n"},{"tags":["java","mongodb","spring-boot"],"answers":[{"comments":[{"owner":{"account_id":3197891,"reputation":157,"user_id":2700673,"accept_rate":47,"display_name":"The Old County"},"score":0,"creation_date":1680378423,"post_id":75907726,"comment_id":133889787,"body_markdown":"but it needs to use the Java Springboot framework as I started -- and sort by distance which is a virtual field that needs to be tabulated from the lat/lng of the users against the logged in persons lat/lng","body":"but it needs to use the Java Springboot framework as I started -- and sort by distance which is a virtual field that needs to be tabulated from the lat/lng of the users against the logged in persons lat/lng"},{"owner":{"account_id":25550460,"reputation":33,"user_id":20507625,"display_name":"Vaibhav Tamakuwala"},"score":0,"creation_date":1681635444,"post_id":75907726,"comment_id":134085592,"body_markdown":"Doesn&#39;t matter if it&#39;s Java Springboot or javascript MongoDB aggregation is the same for all. And Yes, sorting will also work in virtual fields. use sorting once you declare the virtual field.  You can also use `$near` for location near by lat/long. Here is the [link](https://www.mongodb.com/docs/manual/reference/operator/query/near/)","body":"Doesn&#39;t matter if it&#39;s Java Springboot or javascript MongoDB aggregation is the same for all. And Yes, sorting will also work in virtual fields. use sorting once you declare the virtual field.  You can also use <code>$near</code> for location near by lat/long. Here is the <a href=\"https://www.mongodb.com/docs/manual/reference/operator/query/near/\" rel=\"nofollow noreferrer\">link</a>"},{"owner":{"account_id":3197891,"reputation":157,"user_id":2700673,"accept_rate":47,"display_name":"The Old County"},"score":0,"creation_date":1681723221,"post_id":75907726,"comment_id":134096857,"body_markdown":"It did matter to be awarded the bounty for this problem.","body":"It did matter to be awarded the bounty for this problem."},{"owner":{"account_id":25550460,"reputation":33,"user_id":20507625,"display_name":"Vaibhav Tamakuwala"},"score":0,"creation_date":1681743801,"post_id":75907726,"comment_id":134102148,"body_markdown":"Can you send me your aggregation query with 2-3 sample data? so I can test it on my side.","body":"Can you send me your aggregation query with 2-3 sample data? so I can test it on my side."},{"owner":{"account_id":3197891,"reputation":157,"user_id":2700673,"accept_rate":47,"display_name":"The Old County"},"score":0,"creation_date":1681789269,"post_id":75907726,"comment_id":134109697,"body_markdown":"I&#39;ve added the usercontroller here - https://jsfiddle.net/0jxvoybt/ - but I had to comment out an attempt as a class isnt defined.","body":"I&#39;ve added the usercontroller here - <a href=\"https://jsfiddle.net/0jxvoybt/\" rel=\"nofollow noreferrer\">jsfiddle.net/0jxvoybt</a> - but I had to comment out an attempt as a class isnt defined."}],"tags":[],"owner":{"account_id":25550460,"reputation":33,"user_id":20507625,"display_name":"Vaibhav Tamakuwala"},"comment_count":5,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680369243,"creation_date":1680369243,"answer_id":75907726,"question_id":75825625,"body_markdown":"I have worked with MongoDB, not with springboot but as i understand you issue is you want to do sorting/filtering in aggregation with different fields. Right?\r\n\r\nFor sorting, you can use:\r\n\r\n```\r\ncollectionName.aggregate([\r\n  {\r\n    $match: {\r\n     //... use the filter from the req body, just make sure that which fields you are filtering are introduced/used in aggregation.\r\n    }\r\n  },\r\n  {\r\n    $sort :{\r\n     //... use the sorting option from the req body that will help you with custom fields, just make sure that which fields you are sorting are introduced/used before this portion of aggregation.\r\n    }\r\n  }\r\n])\r\n``` \r\nHere is the reference [link][1] for sorting.\r\n\r\n\r\n  [1]: https://www.mongodb.com/docs/manual/reference/operator/aggregation/sort/","title":"Aggerate distance in a query that sorts via distance between a logged in user and user lists using mongodb/java springboot","body":"<p>I have worked with MongoDB, not with springboot but as i understand you issue is you want to do sorting/filtering in aggregation with different fields. Right?</p>\n<p>For sorting, you can use:</p>\n<pre><code>collectionName.aggregate([\n  {\n    $match: {\n     //... use the filter from the req body, just make sure that which fields you are filtering are introduced/used in aggregation.\n    }\n  },\n  {\n    $sort :{\n     //... use the sorting option from the req body that will help you with custom fields, just make sure that which fields you are sorting are introduced/used before this portion of aggregation.\n    }\n  }\n])\n</code></pre>\n<p>Here is the reference <a href=\"https://www.mongodb.com/docs/manual/reference/operator/aggregation/sort/\" rel=\"nofollow noreferrer\">link</a> for sorting.</p>\n"}],"owner":{"account_id":3197891,"reputation":157,"user_id":2700673,"accept_rate":47,"display_name":"The Old County"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":249,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"answer_count":1,"score":0,"last_activity_date":1681121381,"creation_date":1679588961,"question_id":75825625,"body_markdown":"\r\nI am working on a Java/Mongodb system - where each user has their own lat/lng coordinates\r\n\r\nI have made an api query to user collection -- and I want to start filtering/sorting through the users.\r\n\r\nI want to complete this sort process -- it works fine for options 2-5 -- but I need to work out how to create an aggregate I think in mongo (which I am new at).\r\n\r\na user record looks like this - where I have placed the coordinates in a locations object, the other filters are mostly in the root - like createdAt, lastLoginAt ...\r\n\r\n[![enter image description here][1]][1]\r\n\r\nHow do I start creating the required aggregate using the current code base -- so I can sort a user that is logged in -- get their coordinates - and sort against those with the viewed list.\r\n\r\nusing the springframework imports\r\n\r\n    import org.springframework.data.mongodb.core.query.Criteria;\r\n    import org.springframework.data.mongodb.core.query.Query;\r\n\r\n----------\r\n\r\n\r\n    @CrossOrigin\r\n    @GetMapping(&quot;/api/users&quot;)\r\n    @ResponseBody\r\n    public BasicDBObject listUsers (@RequestHeader(&quot;Authorization&quot;) String bearerToken, @RequestParam(&quot;sort_by&quot;) String sort_by, @RequestParam(defaultValue = &quot;0&quot;) int page,\r\n    @RequestParam(defaultValue = &quot;3&quot;) int size) {\r\n\r\n        String email = tokenHandler.getEmailFromBearerToken(bearerToken);\r\n\r\n        //get logged in user\r\n        Query q = new Query();\r\n        q.addCriteria(Criteria.where(&quot;email&quot;).is(email));\r\n        List&lt;Person&gt; lp = MongoApp.mongoOps().find(q, Person.class);\r\n        Person loggedInUser = null;\r\n        if (!lp.isEmpty()) {\r\n            for (Person person : lp) {\r\n                loggedInUser = person;\r\n            }\r\n        }\r\n\r\n\r\n        String field = &quot;&quot;;//createdAt\r\n        switch (sort_by) {\r\n            case &quot;1&quot;:\r\n                System.out.println(&quot;Distance&quot;);\r\n                break;\r\n            case &quot;2&quot;:\r\n                System.out.println(&quot;Last online&quot;);\r\n                field = &quot;lastLoginAt&quot;;\r\n                break;\r\n            case &quot;3&quot;:\r\n                System.out.println(&quot;Latest joined&quot;);\r\n                field = &quot;createdAt&quot;;\r\n                break;\r\n            case &quot;4&quot;:\r\n                System.out.println(&quot;Newest photo&quot;);\r\n                field = &quot;newestImageAt&quot;;\r\n                break;\r\n            case &quot;5&quot;:\r\n                System.out.println(&quot;Recently Updated&quot;);\r\n                field = &quot;updatedAt&quot;;\r\n                break;\r\n            default:\r\n                System.out.println(&quot;default&quot;);\r\n                field = &quot;createdAt&quot;;\r\n        }\r\n\r\n        Query query = new Query();\r\n\r\n        long totalUsercount = MongoApp.mongoOps().count(query, Person.class);\r\n\r\n        //only show isActive users\r\n        query.addCriteria(Criteria.where(&quot;isActive&quot;).is(true));\r\n\r\n        //dont show yourself - loggedin user excluded from list\r\n        query.addCriteria(Criteria.where(&quot;id&quot;).ne(loggedInUser.getId()));\r\n \r\n        query.with(Sort.by(Sort.Direction.DESC, field));\r\n\r\n        Pageable pageable = PageRequest.of(page, size);\r\n        List&lt;Person&gt; totalPeople = new ArrayList&lt;&gt;();\r\n        totalPeople = queryPeopleAddImages(totalPeople, query);\r\n        long totalCount = totalPeople.size();\r\n        query.with(pageable);\r\n\r\n        // List People\r\n        List&lt;Person&gt; people = new ArrayList&lt;&gt;();\r\n        people = queryPeopleAddImages(people, query);\r\n\r\n        BasicDBObject obj = userListResponse(loggedInUser, people, totalCount, totalUsercount);\r\n\r\n        return obj;\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n-----------\r\n\r\nI&#39;ve added some research links here - which I think is on track to complete this functionality\r\n\r\n\r\nResearch\r\n\r\nhttps://stackoverflow.com/questions/43137589/how-to-write-mongodb-aggregation-for-this-criteria-query\r\n\r\n    AggregationOperation match = Aggregation.match(Criteria.where(&quot;careGiverId&quot;).is(careTakerId).and(&quot;careType&quot;).is(careType));\r\n     AggregationOperation count = Aggregation.count().as(&quot;count&quot;);\r\n     Aggregation agg = Aggregation.newAggregation(match, count);\r\n     mongoOperations.aggregate(agg, CareLogBean.class);\r\n\r\nhttps://stackoverflow.com/questions/18521009/spring-mongodb-query-sorting\r\n\r\n\r\n    AggregationOperation match = Aggregation.match(matching criteria);\r\n    AggregationOperation group = Aggregation.group(&quot;fieldname&quot;);\r\n    AggregationOperation sort = Aggregation.sort(Sort.Direction.ASC, &quot;fieldname&quot;);\r\n    Aggregation aggregation = Aggregation.newAggregation(Aggregation.unwind(&quot;fieldname&quot;),match,group,sort);\r\n\r\n\r\n\r\nhttps://stackoverflow.com/questions/33864461/mongodb-print-distance-between-two-points\r\n\r\n     db.new_stores.aggregate([\r\n        { &quot;$geoNear&quot;: {\r\n            &quot;near&quot;: {\r\n                &quot;type&quot;: &quot;Point&quot;,\r\n                &quot;coordinates&quot;: [ -81.093699, 32.074673 ]\r\n            }, \r\n            &quot;maxDistance&quot;: 500 * 1609,\r\n            &quot;key&quot; : &quot;myLocation&quot;,\r\n            &quot;spherical&quot;: true,\r\n            &quot;distanceField&quot;: &quot;distance&quot;,\r\n            &quot;distanceMultiplier&quot;: 0.000621371\r\n        }}\r\n    ]).pretty()\r\n\r\n&gt; &quot;This allows you to specify &quot;distanceField&quot; which will produce another\r\n&gt; field in the output documents containing the distance from the queried\r\n&gt; point. You can also use &quot;distanceMultiplier&quot; to apply any conversion\r\n&gt; to the output distance as required ( i.e meters to miles, and noting\r\n&gt; that all GeoJSON distances are returned in meters )\r\n&gt; \r\n&gt; There is also the geoNear command with similar options, but it of\r\n&gt; course does not return a cursor as output.\r\n&gt; \r\n&gt; if you have more than one 2dsphere, you should specify a &quot;key&quot;.&quot;\r\n\r\n\r\n-----\r\n\r\nI have this working on the frontend to calculate distance in km\r\n\r\nhttps://stackoverflow.com/questions/27928/calculate-distance-between-two-latitude-longitude-points-haversine-formula/27943#27943\r\n\r\nusing the ‘Haversine’ formula\r\n\r\n\r\n    function getDistanceFromLatLonInKm(lat1,lon1,lat2,lon2) {\r\n      var R = 6371; // Radius of the earth in km\r\n      var dLat = deg2rad(lat2-lat1);  // deg2rad below\r\n      var dLon = deg2rad(lon2-lon1); \r\n      var a = \r\n        Math.sin(dLat/2) * Math.sin(dLat/2) +\r\n        Math.cos(deg2rad(lat1)) * Math.cos(deg2rad(lat2)) * \r\n        Math.sin(dLon/2) * Math.sin(dLon/2)\r\n        ; \r\n      var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a)); \r\n      var d = R * c; // Distance in km\r\n      return d;\r\n    }\r\n    \r\n    function deg2rad(deg) {\r\n      return deg * (Math.PI/180)\r\n    }\r\n\r\n\r\n----------------------\r\n28th March 2023\r\ncurrent research\r\n\r\n\r\nI am working on a mongobdb application - using Java springboot.\r\n\r\nIts a user website -- where members will log in and be able to search/filter/sort for other members.\r\n\r\nI&#39;ve started building an api with basic queries --\r\n\r\nI need to complete part of the api to allow you to sort via distance. Each user has lat/lng details -- I believe its a case of building an aggregate query.\r\n\r\nhttps://stackoverflow.com/questions/75825625/aggerate-distance-in-a-query-that-sorts-via-distance-between-a-logged-in-user-an\r\n\r\n---\r\n\r\n* Handle the distance sorting -- aggregate query part.\r\n* I want to clean the codebase up - as there are separate apis made to do similar/same searches but for specific filters -- getUsers, getFavs, getBlocks, getViewedMe -\r\n* Also make pagination options optional -(or have a part of the code in its own function to isolate it with optional pagination handling - aka reduce repeated code effort)- so I could acquire ALL user data and not chunks of it for analysis - again similar searches/same but scalable - aka provide just 5 of the latest results, provide paginated data with or with sorting/filtering.\r\n* Be able to add multiple types of filters -- with AND and OR operations -- image only, blonde hair, blue eyes, ethnicities\r\n\r\n--- \r\n\r\n\r\n-- so you can see here -- that the other cases work - because they are actual fields --- lastLoginAt, createdAt ----- etc.. -- whereas distance is like a virtual field that needs to be made -- I think with the aggregate\r\n\r\n    String field = &quot;&quot;;//createdAt\r\n    switch (sort_by) {\r\n    case &quot;1&quot;:\r\n    System.out.println(&quot;Distance&quot;);\r\n    break;\r\n    case &quot;2&quot;:\r\n    System.out.println(&quot;Last online&quot;);\r\n    field = &quot;lastLoginAt&quot;;\r\n    break;\r\n    case &quot;3&quot;:\r\n    System.out.println(&quot;Latest joined&quot;);\r\n    field = &quot;createdAt&quot;;\r\n    break;\r\n    case &quot;4&quot;:\r\n    System.out.println(&quot;Newest photo&quot;);\r\n    field = &quot;newestImageAt&quot;;\r\n    break;\r\n    case &quot;5&quot;:\r\n    System.out.println(&quot;Recently Updated&quot;);\r\n    field = &quot;updatedAt&quot;;\r\n    break;\r\n    default:\r\n    System.out.println(&quot;default&quot;);\r\n    field = &quot;createdAt&quot;;\r\n    }\r\n    \r\n    Query query = new Query();\r\n    \r\n    long totalUsercount = MongoApp.mongoOps().count(query, Person.class);\r\n    System.out.println(&quot;totalUsercount &quot;+ totalUsercount);\r\n    \r\n    ///default filters (only active users, no admins, no self)\r\n    query = addDefaultFilters(query, loggedInUser);\r\n    ///default filters\r\n    \r\n    //country filter\r\n    //query.addCriteria(Criteria.where(&quot;country&quot;).is(&quot;AR&quot;));\r\n    \r\n    query.with(Sort.by(Sort.Direction.DESC, field));\r\n\r\n\r\n----------------\r\n\r\n&quot;MongoDB Compass terminal which is great to test out queries and aggregations&quot;\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\nAdded here documentations for indexes in mongodb and the 2dsphere index type.\r\n\r\n\r\n2dshpere: https://www.mongodb.com/docs/manual/core/2dsphere/#:~:text=A%202dsphere%20index%20supports%20queries,geospatial%20queries%2C%20see%20Geospatial%20Queries.\r\nIndexes: https://www.mongodb.com/docs/manual/indexes/\r\n\r\n\r\nThe 2dsphere index is required for MongoDB&#39;s $geoNear aggregation stage to work correctly with geospatial data. This is because $geoNear uses the 2dsphere index to efficiently perform geospatial queries\r\n\r\n\r\nthere is already a default filter in place\r\n\r\n    public Query addDefaultFilters(Query query, Person loggedInUser) {\r\n    \r\n    ///default filters\r\n    //only show isActive users\r\n    query.addCriteria(Criteria.where(&quot;isActive&quot;).is(true));\r\n    \r\n    //dont show admins\r\n    query.addCriteria(Criteria.where(&quot;role&quot;).ne(&quot;ROLE_ADMIN&quot;));\r\n    \r\n    //dont show yourself - loggedin user excluded from list\r\n    query.addCriteria(Criteria.where(&quot;id&quot;).ne(loggedInUser.getId()));\r\n    ///default filters\r\n    \r\n    return query;\r\n    }\r\n\r\n--\r\n\r\n\r\n    Query query = new Query();\r\n    \r\n    long totalUsercount = MongoApp.mongoOps().count(query, Person.class);\r\n    System.out.println(&quot;totalUsercount &quot;+ totalUsercount);\r\n    \r\n    ///default filters (only active users, no admins, no self)\r\n    query = addDefaultFilters(query, loggedInUser);\r\n    ///default filters\r\n    \r\n    //country filter\r\n    //query.addCriteria(Criteria.where(&quot;country&quot;).is(&quot;AR&quot;));\r\n    \r\n    query.with(Sort.by(Sort.Direction.DESC, field));\r\n    \r\n    Pageable pageable = PageRequest.of(page, size);\r\n    List totalPeople = new ArrayList();\r\n    totalPeople = queryPeopleAddImages(totalPeople, query);\r\n    long totalCount = totalPeople.size();\r\n    System.out.println(&quot;xxxxxxxxxxxxxtotalCount &quot;+totalCount);\r\n    query.with(pageable);\r\n    \r\n    // List People\r\n    //List people = MongoApp.mongoOps().findAll(Person.class);\r\n    List people = new ArrayList();\r\n    people = queryPeopleAddImages(people, query);\r\n\r\n--------\r\n[![enter image description here][3]][3]\r\n\r\n-------\r\n[![enter image description here][4]][4]\r\n\r\n[![enter image description here][5]][5]\r\n[![enter image description here][6]][6]\r\n[![enter image description here][7]][7]\r\n[![enter image description here][8]][8]\r\n[![enter image description here][9]][9]\r\n[![enter image description here][10]][10]\r\n[![enter image description here][11]][11]\r\n\r\n-----\r\nanother java example\r\n[![enter image description here][12]][12]\r\n[![enter image description here][13]][13]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/RL8yb.png\r\n  [2]: https://i.stack.imgur.com/ivmww.png\r\n  [3]: https://i.stack.imgur.com/VQdXg.png\r\n  [4]: https://i.stack.imgur.com/9cIzk.png\r\n  [5]: https://i.stack.imgur.com/HmGr4.png\r\n  [6]: https://i.stack.imgur.com/2zOsT.png\r\n  [7]: https://i.stack.imgur.com/3yZU9.png\r\n  [8]: https://i.stack.imgur.com/ZvjTm.png\r\n  [9]: https://i.stack.imgur.com/6yXcZ.png\r\n  [10]: https://i.stack.imgur.com/foOxF.png\r\n  [11]: https://i.stack.imgur.com/0p25x.png\r\n  [12]: https://i.stack.imgur.com/CDIbF.png\r\n  [13]: https://i.stack.imgur.com/OYPst.png\r\n\r\n\r\n-----------\r\n10th April 2023\r\n\r\nthere was another solution given to me that may solve these issues -please evaluate.\r\n\r\n----\r\n\r\nTo handle the distance sorting using MongoDB aggregation query, you can use the following steps:\r\n\r\nCreate a GeoJSON object for the user&#39;s location, using the coordinates stored in the user&#39;s document.\r\n\r\nUse the $geoNear stage in the aggregation pipeline to find other users who are within a certain radius of the user&#39;s location. You can specify the maximum distance and the field that contains the other users&#39; location information.\r\n\r\nUse the $sort stage to sort the results based on the distance from the user&#39;s location.\r\n\r\nHere&#39;s an example code snippet that demonstrates how you can implement this in Java using Spring Boot and the MongoDB Java driver:\r\n\r\n----------------------\r\n\r\n    import org.springframework.data.mongodb.core.geo.GeoJsonPoint;\r\n    import org.springframework.data.mongodb.core.query.Criteria;\r\n    import org.springframework.data.mongodb.core.query.Query;\r\n    import org.springframework.data.mongodb.core.aggregation.Aggregation;\r\n    import org.springframework.data.mongodb.core.aggregation.AggregationResults;\r\n    import org.springframework.data.mongodb.core.aggregation.GeoNearAggregation;\r\n    import org.springframework.data.mongodb.core.aggregation.SortOperation;\r\n    import org.springframework.data.mongodb.core.aggregation.TypedAggregation;\r\n    \r\n    import static org.springframework.data.mongodb.core.aggregation.Aggregation.*;\r\n    \r\n    GeoJsonPoint userLocation = new GeoJsonPoint(user.getLongitude(), user.getLatitude());\r\n    double maxDistance = 10000.0; // 10km\r\n    \r\n    GeoNearAggregation geoNearAggregation = new GeoNearAggregation(\r\n        near(userLocation).spherical(true).maxDistance(maxDistance),\r\n        &quot;distance&quot;\r\n    );\r\n    \r\n    SortOperation sortOperation = sort(Sort.by(&quot;distance&quot;));\r\n    \r\n    TypedAggregation[User] aggregation = newAggregation(User.class, geoNearAggregation, sortOperation);\r\n    AggregationResults[User] results = mongoTemplate.aggregate(aggregation, User.class);\r\n    List[User] nearbyUsers = results.getMappedResults();\r\n\r\n---------------------------------\r\n\r\n\r\nTo clean up the codebase and reduce repeated code effort, you can create a generic search function that takes in filter parameters and pagination options as parameters. You can use the Query class to build up the filter criteria and the PageRequest class to handle pagination.\r\n\r\nHere&#39;s an example code snippet that demonstrates how you can implement this:\r\n\r\n\r\n-----------------------------------\r\n\r\n\r\n    public Page[User] searchUsers(String keyword, List[Criteria] filters, Sort sort, int page, int size) {\r\n        Query query = new Query();\r\n    \r\n        // Add the keyword search criteria\r\n        if (keyword != null) {\r\n            Criteria keywordCriteria = new Criteria()\r\n                .orOperator(\r\n                    Criteria.where(&quot;firstName&quot;).regex(keyword, &quot;i&quot;),\r\n                    Criteria.where(&quot;lastName&quot;).regex(keyword, &quot;i&quot;)\r\n                );\r\n            query.addCriteria(keywordCriteria);\r\n        }\r\n    \r\n        // Add the filters\r\n        if (filters != null) {\r\n            Criteria filterCriteria = new Criteria().andOperator(filters.toArray(new Criteria[0]));\r\n            query.addCriteria(filterCriteria);\r\n        }\r\n    \r\n        // Add the pagination options\r\n        PageRequest pageRequest = PageRequest.of(page, size, sort);\r\n    \r\n        query.with(pageRequest);\r\n    \r\n        return mongoTemplate.find(query, User.class, &quot;users&quot;);\r\n    }\r\n\r\n","title":"Aggerate distance in a query that sorts via distance between a logged in user and user lists using mongodb/java springboot","body":"<p>I am working on a Java/Mongodb system - where each user has their own lat/lng coordinates</p>\n<p>I have made an api query to user collection -- and I want to start filtering/sorting through the users.</p>\n<p>I want to complete this sort process -- it works fine for options 2-5 -- but I need to work out how to create an aggregate I think in mongo (which I am new at).</p>\n<p>a user record looks like this - where I have placed the coordinates in a locations object, the other filters are mostly in the root - like createdAt, lastLoginAt ...</p>\n<p><a href=\"https://i.stack.imgur.com/RL8yb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RL8yb.png\" alt=\"enter image description here\" /></a></p>\n<p>How do I start creating the required aggregate using the current code base -- so I can sort a user that is logged in -- get their coordinates - and sort against those with the viewed list.</p>\n<p>using the springframework imports</p>\n<pre><code>import org.springframework.data.mongodb.core.query.Criteria;\nimport org.springframework.data.mongodb.core.query.Query;\n</code></pre>\n<hr />\n<pre><code>@CrossOrigin\n@GetMapping(&quot;/api/users&quot;)\n@ResponseBody\npublic BasicDBObject listUsers (@RequestHeader(&quot;Authorization&quot;) String bearerToken, @RequestParam(&quot;sort_by&quot;) String sort_by, @RequestParam(defaultValue = &quot;0&quot;) int page,\n@RequestParam(defaultValue = &quot;3&quot;) int size) {\n\n    String email = tokenHandler.getEmailFromBearerToken(bearerToken);\n\n    //get logged in user\n    Query q = new Query();\n    q.addCriteria(Criteria.where(&quot;email&quot;).is(email));\n    List&lt;Person&gt; lp = MongoApp.mongoOps().find(q, Person.class);\n    Person loggedInUser = null;\n    if (!lp.isEmpty()) {\n        for (Person person : lp) {\n            loggedInUser = person;\n        }\n    }\n\n\n    String field = &quot;&quot;;//createdAt\n    switch (sort_by) {\n        case &quot;1&quot;:\n            System.out.println(&quot;Distance&quot;);\n            break;\n        case &quot;2&quot;:\n            System.out.println(&quot;Last online&quot;);\n            field = &quot;lastLoginAt&quot;;\n            break;\n        case &quot;3&quot;:\n            System.out.println(&quot;Latest joined&quot;);\n            field = &quot;createdAt&quot;;\n            break;\n        case &quot;4&quot;:\n            System.out.println(&quot;Newest photo&quot;);\n            field = &quot;newestImageAt&quot;;\n            break;\n        case &quot;5&quot;:\n            System.out.println(&quot;Recently Updated&quot;);\n            field = &quot;updatedAt&quot;;\n            break;\n        default:\n            System.out.println(&quot;default&quot;);\n            field = &quot;createdAt&quot;;\n    }\n\n    Query query = new Query();\n\n    long totalUsercount = MongoApp.mongoOps().count(query, Person.class);\n\n    //only show isActive users\n    query.addCriteria(Criteria.where(&quot;isActive&quot;).is(true));\n\n    //dont show yourself - loggedin user excluded from list\n    query.addCriteria(Criteria.where(&quot;id&quot;).ne(loggedInUser.getId()));\n\n    query.with(Sort.by(Sort.Direction.DESC, field));\n\n    Pageable pageable = PageRequest.of(page, size);\n    List&lt;Person&gt; totalPeople = new ArrayList&lt;&gt;();\n    totalPeople = queryPeopleAddImages(totalPeople, query);\n    long totalCount = totalPeople.size();\n    query.with(pageable);\n\n    // List People\n    List&lt;Person&gt; people = new ArrayList&lt;&gt;();\n    people = queryPeopleAddImages(people, query);\n\n    BasicDBObject obj = userListResponse(loggedInUser, people, totalCount, totalUsercount);\n\n    return obj;\n}\n</code></pre>\n<hr />\n<p>I've added some research links here - which I think is on track to complete this functionality</p>\n<p>Research</p>\n<p><a href=\"https://stackoverflow.com/questions/43137589/how-to-write-mongodb-aggregation-for-this-criteria-query\">How to write MongoDb Aggregation for this Criteria query</a></p>\n<pre><code>AggregationOperation match = Aggregation.match(Criteria.where(&quot;careGiverId&quot;).is(careTakerId).and(&quot;careType&quot;).is(careType));\n AggregationOperation count = Aggregation.count().as(&quot;count&quot;);\n Aggregation agg = Aggregation.newAggregation(match, count);\n mongoOperations.aggregate(agg, CareLogBean.class);\n</code></pre>\n<p><a href=\"https://stackoverflow.com/questions/18521009/spring-mongodb-query-sorting\">Spring MongoDB query sorting</a></p>\n<pre><code>AggregationOperation match = Aggregation.match(matching criteria);\nAggregationOperation group = Aggregation.group(&quot;fieldname&quot;);\nAggregationOperation sort = Aggregation.sort(Sort.Direction.ASC, &quot;fieldname&quot;);\nAggregation aggregation = Aggregation.newAggregation(Aggregation.unwind(&quot;fieldname&quot;),match,group,sort);\n</code></pre>\n<p><a href=\"https://stackoverflow.com/questions/33864461/mongodb-print-distance-between-two-points\">MongoDB print distance between two points</a></p>\n<pre><code> db.new_stores.aggregate([\n    { &quot;$geoNear&quot;: {\n        &quot;near&quot;: {\n            &quot;type&quot;: &quot;Point&quot;,\n            &quot;coordinates&quot;: [ -81.093699, 32.074673 ]\n        }, \n        &quot;maxDistance&quot;: 500 * 1609,\n        &quot;key&quot; : &quot;myLocation&quot;,\n        &quot;spherical&quot;: true,\n        &quot;distanceField&quot;: &quot;distance&quot;,\n        &quot;distanceMultiplier&quot;: 0.000621371\n    }}\n]).pretty()\n</code></pre>\n<blockquote>\n<p>&quot;This allows you to specify &quot;distanceField&quot; which will produce another\nfield in the output documents containing the distance from the queried\npoint. You can also use &quot;distanceMultiplier&quot; to apply any conversion\nto the output distance as required ( i.e meters to miles, and noting\nthat all GeoJSON distances are returned in meters )</p>\n<p>There is also the geoNear command with similar options, but it of\ncourse does not return a cursor as output.</p>\n<p>if you have more than one 2dsphere, you should specify a &quot;key&quot;.&quot;</p>\n</blockquote>\n<hr />\n<p>I have this working on the frontend to calculate distance in km</p>\n<p><a href=\"https://stackoverflow.com/questions/27928/calculate-distance-between-two-latitude-longitude-points-haversine-formula/27943#27943\">Calculate distance between two latitude-longitude points? (Haversine formula)</a></p>\n<p>using the ‘Haversine’ formula</p>\n<pre><code>function getDistanceFromLatLonInKm(lat1,lon1,lat2,lon2) {\n  var R = 6371; // Radius of the earth in km\n  var dLat = deg2rad(lat2-lat1);  // deg2rad below\n  var dLon = deg2rad(lon2-lon1); \n  var a = \n    Math.sin(dLat/2) * Math.sin(dLat/2) +\n    Math.cos(deg2rad(lat1)) * Math.cos(deg2rad(lat2)) * \n    Math.sin(dLon/2) * Math.sin(dLon/2)\n    ; \n  var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a)); \n  var d = R * c; // Distance in km\n  return d;\n}\n\nfunction deg2rad(deg) {\n  return deg * (Math.PI/180)\n}\n</code></pre>\n<hr />\n<p>28th March 2023\ncurrent research</p>\n<p>I am working on a mongobdb application - using Java springboot.</p>\n<p>Its a user website -- where members will log in and be able to search/filter/sort for other members.</p>\n<p>I've started building an api with basic queries --</p>\n<p>I need to complete part of the api to allow you to sort via distance. Each user has lat/lng details -- I believe its a case of building an aggregate query.</p>\n<p><a href=\"https://stackoverflow.com/questions/75825625/aggerate-distance-in-a-query-that-sorts-via-distance-between-a-logged-in-user-an\">Aggerate distance in a query that sorts via distance between a logged in user and user lists using mongodb/java springboot</a></p>\n<hr />\n<ul>\n<li>Handle the distance sorting -- aggregate query part.</li>\n<li>I want to clean the codebase up - as there are separate apis made to do similar/same searches but for specific filters -- getUsers, getFavs, getBlocks, getViewedMe -</li>\n<li>Also make pagination options optional -(or have a part of the code in its own function to isolate it with optional pagination handling - aka reduce repeated code effort)- so I could acquire ALL user data and not chunks of it for analysis - again similar searches/same but scalable - aka provide just 5 of the latest results, provide paginated data with or with sorting/filtering.</li>\n<li>Be able to add multiple types of filters -- with AND and OR operations -- image only, blonde hair, blue eyes, ethnicities</li>\n</ul>\n<hr />\n<p>-- so you can see here -- that the other cases work - because they are actual fields --- lastLoginAt, createdAt ----- etc.. -- whereas distance is like a virtual field that needs to be made -- I think with the aggregate</p>\n<pre><code>String field = &quot;&quot;;//createdAt\nswitch (sort_by) {\ncase &quot;1&quot;:\nSystem.out.println(&quot;Distance&quot;);\nbreak;\ncase &quot;2&quot;:\nSystem.out.println(&quot;Last online&quot;);\nfield = &quot;lastLoginAt&quot;;\nbreak;\ncase &quot;3&quot;:\nSystem.out.println(&quot;Latest joined&quot;);\nfield = &quot;createdAt&quot;;\nbreak;\ncase &quot;4&quot;:\nSystem.out.println(&quot;Newest photo&quot;);\nfield = &quot;newestImageAt&quot;;\nbreak;\ncase &quot;5&quot;:\nSystem.out.println(&quot;Recently Updated&quot;);\nfield = &quot;updatedAt&quot;;\nbreak;\ndefault:\nSystem.out.println(&quot;default&quot;);\nfield = &quot;createdAt&quot;;\n}\n\nQuery query = new Query();\n\nlong totalUsercount = MongoApp.mongoOps().count(query, Person.class);\nSystem.out.println(&quot;totalUsercount &quot;+ totalUsercount);\n\n///default filters (only active users, no admins, no self)\nquery = addDefaultFilters(query, loggedInUser);\n///default filters\n\n//country filter\n//query.addCriteria(Criteria.where(&quot;country&quot;).is(&quot;AR&quot;));\n\nquery.with(Sort.by(Sort.Direction.DESC, field));\n</code></pre>\n<hr />\n<p>&quot;MongoDB Compass terminal which is great to test out queries and aggregations&quot;</p>\n<p><a href=\"https://i.stack.imgur.com/ivmww.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ivmww.png\" alt=\"enter image description here\" /></a></p>\n<p>Added here documentations for indexes in mongodb and the 2dsphere index type.</p>\n<p>2dshpere: <a href=\"https://www.mongodb.com/docs/manual/core/2dsphere/#:%7E:text=A%202dsphere%20index%20supports%20queries,geospatial%20queries%2C%20see%20Geospatial%20Queries\" rel=\"nofollow noreferrer\">https://www.mongodb.com/docs/manual/core/2dsphere/#:~:text=A%202dsphere%20index%20supports%20queries,geospatial%20queries%2C%20see%20Geospatial%20Queries</a>.\nIndexes: <a href=\"https://www.mongodb.com/docs/manual/indexes/\" rel=\"nofollow noreferrer\">https://www.mongodb.com/docs/manual/indexes/</a></p>\n<p>The 2dsphere index is required for MongoDB's $geoNear aggregation stage to work correctly with geospatial data. This is because $geoNear uses the 2dsphere index to efficiently perform geospatial queries</p>\n<p>there is already a default filter in place</p>\n<pre><code>public Query addDefaultFilters(Query query, Person loggedInUser) {\n\n///default filters\n//only show isActive users\nquery.addCriteria(Criteria.where(&quot;isActive&quot;).is(true));\n\n//dont show admins\nquery.addCriteria(Criteria.where(&quot;role&quot;).ne(&quot;ROLE_ADMIN&quot;));\n\n//dont show yourself - loggedin user excluded from list\nquery.addCriteria(Criteria.where(&quot;id&quot;).ne(loggedInUser.getId()));\n///default filters\n\nreturn query;\n}\n</code></pre>\n<p>--</p>\n<pre><code>Query query = new Query();\n\nlong totalUsercount = MongoApp.mongoOps().count(query, Person.class);\nSystem.out.println(&quot;totalUsercount &quot;+ totalUsercount);\n\n///default filters (only active users, no admins, no self)\nquery = addDefaultFilters(query, loggedInUser);\n///default filters\n\n//country filter\n//query.addCriteria(Criteria.where(&quot;country&quot;).is(&quot;AR&quot;));\n\nquery.with(Sort.by(Sort.Direction.DESC, field));\n\nPageable pageable = PageRequest.of(page, size);\nList totalPeople = new ArrayList();\ntotalPeople = queryPeopleAddImages(totalPeople, query);\nlong totalCount = totalPeople.size();\nSystem.out.println(&quot;xxxxxxxxxxxxxtotalCount &quot;+totalCount);\nquery.with(pageable);\n\n// List People\n//List people = MongoApp.mongoOps().findAll(Person.class);\nList people = new ArrayList();\npeople = queryPeopleAddImages(people, query);\n</code></pre>\n<hr />\n<p><a href=\"https://i.stack.imgur.com/VQdXg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VQdXg.png\" alt=\"enter image description here\" /></a></p>\n<hr />\n<p><a href=\"https://i.stack.imgur.com/9cIzk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9cIzk.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/HmGr4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HmGr4.png\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.stack.imgur.com/2zOsT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2zOsT.png\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.stack.imgur.com/3yZU9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3yZU9.png\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.stack.imgur.com/ZvjTm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZvjTm.png\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.stack.imgur.com/6yXcZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6yXcZ.png\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.stack.imgur.com/foOxF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/foOxF.png\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.stack.imgur.com/0p25x.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0p25x.png\" alt=\"enter image description here\" /></a></p>\n<hr />\n<p>another java example\n<a href=\"https://i.stack.imgur.com/CDIbF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CDIbF.png\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.stack.imgur.com/OYPst.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OYPst.png\" alt=\"enter image description here\" /></a></p>\n<hr />\n<p>10th April 2023</p>\n<p>there was another solution given to me that may solve these issues -please evaluate.</p>\n<hr />\n<p>To handle the distance sorting using MongoDB aggregation query, you can use the following steps:</p>\n<p>Create a GeoJSON object for the user's location, using the coordinates stored in the user's document.</p>\n<p>Use the $geoNear stage in the aggregation pipeline to find other users who are within a certain radius of the user's location. You can specify the maximum distance and the field that contains the other users' location information.</p>\n<p>Use the $sort stage to sort the results based on the distance from the user's location.</p>\n<p>Here's an example code snippet that demonstrates how you can implement this in Java using Spring Boot and the MongoDB Java driver:</p>\n<hr />\n<pre><code>import org.springframework.data.mongodb.core.geo.GeoJsonPoint;\nimport org.springframework.data.mongodb.core.query.Criteria;\nimport org.springframework.data.mongodb.core.query.Query;\nimport org.springframework.data.mongodb.core.aggregation.Aggregation;\nimport org.springframework.data.mongodb.core.aggregation.AggregationResults;\nimport org.springframework.data.mongodb.core.aggregation.GeoNearAggregation;\nimport org.springframework.data.mongodb.core.aggregation.SortOperation;\nimport org.springframework.data.mongodb.core.aggregation.TypedAggregation;\n\nimport static org.springframework.data.mongodb.core.aggregation.Aggregation.*;\n\nGeoJsonPoint userLocation = new GeoJsonPoint(user.getLongitude(), user.getLatitude());\ndouble maxDistance = 10000.0; // 10km\n\nGeoNearAggregation geoNearAggregation = new GeoNearAggregation(\n    near(userLocation).spherical(true).maxDistance(maxDistance),\n    &quot;distance&quot;\n);\n\nSortOperation sortOperation = sort(Sort.by(&quot;distance&quot;));\n\nTypedAggregation[User] aggregation = newAggregation(User.class, geoNearAggregation, sortOperation);\nAggregationResults[User] results = mongoTemplate.aggregate(aggregation, User.class);\nList[User] nearbyUsers = results.getMappedResults();\n</code></pre>\n<hr />\n<p>To clean up the codebase and reduce repeated code effort, you can create a generic search function that takes in filter parameters and pagination options as parameters. You can use the Query class to build up the filter criteria and the PageRequest class to handle pagination.</p>\n<p>Here's an example code snippet that demonstrates how you can implement this:</p>\n<hr />\n<pre><code>public Page[User] searchUsers(String keyword, List[Criteria] filters, Sort sort, int page, int size) {\n    Query query = new Query();\n\n    // Add the keyword search criteria\n    if (keyword != null) {\n        Criteria keywordCriteria = new Criteria()\n            .orOperator(\n                Criteria.where(&quot;firstName&quot;).regex(keyword, &quot;i&quot;),\n                Criteria.where(&quot;lastName&quot;).regex(keyword, &quot;i&quot;)\n            );\n        query.addCriteria(keywordCriteria);\n    }\n\n    // Add the filters\n    if (filters != null) {\n        Criteria filterCriteria = new Criteria().andOperator(filters.toArray(new Criteria[0]));\n        query.addCriteria(filterCriteria);\n    }\n\n    // Add the pagination options\n    PageRequest pageRequest = PageRequest.of(page, size, sort);\n\n    query.with(pageRequest);\n\n    return mongoTemplate.find(query, User.class, &quot;users&quot;);\n}\n</code></pre>\n"},{"tags":["java","editorconfig"],"comments":[{"owner":{"account_id":1535561,"reputation":7664,"user_id":1431720,"accept_rate":89,"display_name":"Robert"},"score":0,"creation_date":1681161188,"post_id":75976157,"comment_id":134009135,"body_markdown":"I don&#39;t use IntelliJ, so no idea how to enforce the rules there. I&#39;d just have the linter run in a pre-commit hook. Check the pre-commit framework.","body":"I don&#39;t use IntelliJ, so no idea how to enforce the rules there. I&#39;d just have the linter run in a pre-commit hook. Check the pre-commit framework."}],"owner":{"account_id":16637097,"reputation":1,"user_id":12023509,"display_name":"mani shankar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":134,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681121361,"creation_date":1681121361,"question_id":75976157,"body_markdown":"I have configured editorconfig in intellij which is helping me in formatting the code as i require. Is there any way i can throw compile time errors when .editorconfig rules are not followed. \r\n\r\nI went through some existing plugins they are fine but wondering if there is any formal way or universally accpeted way. It would be helpful if anyone can point be in right way.\r\n\r\nFollowing plugin is close to my requirements.\r\n[editorconfig-maven-plugin](https://ec4j.github.io/editorconfig-maven-plugin/)","title":"how to enforce that a java/spring boot project is following .editorconfig rules","body":"<p>I have configured editorconfig in intellij which is helping me in formatting the code as i require. Is there any way i can throw compile time errors when .editorconfig rules are not followed.</p>\n<p>I went through some existing plugins they are fine but wondering if there is any formal way or universally accpeted way. It would be helpful if anyone can point be in right way.</p>\n<p>Following plugin is close to my requirements.\n<a href=\"https://ec4j.github.io/editorconfig-maven-plugin/\" rel=\"nofollow noreferrer\">editorconfig-maven-plugin</a></p>\n"},{"tags":["java","spring","design-patterns","service","dto"],"answers":[{"tags":[],"owner":{"account_id":17520379,"reputation":1536,"user_id":12706564,"display_name":"Emanuel Trandafir"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1681120889,"creation_date":1681120889,"answer_id":75976084,"question_id":75975645,"body_markdown":"It looks like you drew the boundaries between the services based on the data model rather than use cases. One option would be to change them and allow OperationService to save Posts (or even rename/ create a different service called CreateOperationSevice or CreateOperationUseCase for this purpose). If you find this approach interesting, take a look at this [video][1].\r\n\r\nOn the other hand, if you want to keep them decoupled like this, you can create a common facade that calls the 2 services in turn, inside the same transaction. something like this:\r\n\r\n    @Component\r\n    class OperationFacade {\r\n        final OperationService operationService;\r\n        final PostService postService;\r\n    \r\n        @Transactional\r\n        public void createOperation(CreateOperationDto dto) {\r\n            long operationId = operationService.save(dto.operation());\r\n            postService.saveAll(dto.posts(), operationId);\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://www.youtube.com/watch?v=YDNR_gfBk0Q","title":"Service pattern store one to one with Dtos","body":"<p>It looks like you drew the boundaries between the services based on the data model rather than use cases. One option would be to change them and allow OperationService to save Posts (or even rename/ create a different service called CreateOperationSevice or CreateOperationUseCase for this purpose). If you find this approach interesting, take a look at this <a href=\"https://www.youtube.com/watch?v=YDNR_gfBk0Q\" rel=\"nofollow noreferrer\">video</a>.</p>\n<p>On the other hand, if you want to keep them decoupled like this, you can create a common facade that calls the 2 services in turn, inside the same transaction. something like this:</p>\n<pre><code>@Component\nclass OperationFacade {\n    final OperationService operationService;\n    final PostService postService;\n\n    @Transactional\n    public void createOperation(CreateOperationDto dto) {\n        long operationId = operationService.save(dto.operation());\n        postService.saveAll(dto.posts(), operationId);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":9201088,"reputation":113,"user_id":6837992,"display_name":"Jan K&#252;ck"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75976084,"answer_count":1,"score":0,"last_activity_date":1681120889,"creation_date":1681116888,"question_id":75975645,"body_markdown":"I have a OperationService and a PostService, they handle some operations and business logic about operations and posts. On database level the operation has a one to one relationship to a post. What is the design approach to persists this? My services return only Dtos. And no concrete database entities. For example i persists a operation with a CreateOperationDto but in this there should only the id of the post. Than i have the postservice how return me a PostDto but i can not persists the PostDto directly. Hopefully can help someone.","title":"Service pattern store one to one with Dtos","body":"<p>I have a OperationService and a PostService, they handle some operations and business logic about operations and posts. On database level the operation has a one to one relationship to a post. What is the design approach to persists this? My services return only Dtos. And no concrete database entities. For example i persists a operation with a CreateOperationDto but in this there should only the id of the post. Than i have the postservice how return me a PostDto but i can not persists the PostDto directly. Hopefully can help someone.</p>\n"},{"tags":["java","spring","spring-boot","parameters"],"comments":[{"owner":{"account_id":23128,"reputation":13127,"user_id":57719,"display_name":"Chin Huang"},"score":2,"creation_date":1681118301,"post_id":75975664,"comment_id":134000853,"body_markdown":"Why invent a paging parameters DTO when Spring Boot auto-configures support for [Pageable as a controller method argument](https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#core.web.basic.paging-and-sorting)?","body":"Why invent a paging parameters DTO when Spring Boot auto-configures support for <a href=\"https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#core.web.basic.paging-and-sorting\" rel=\"nofollow noreferrer\">Pageable as a controller method argument</a>?"},{"owner":{"account_id":17520379,"reputation":1536,"user_id":12706564,"display_name":"Emanuel Trandafir"},"score":0,"creation_date":1681119734,"post_id":75975664,"comment_id":134001072,"body_markdown":"the API should look the same. maybe they did the change for a different display in swagger-ui / openAPI?","body":"the API should look the same. maybe they did the change for a different display in swagger-ui / openAPI?"},{"owner":{"account_id":22506547,"reputation":980,"user_id":16702058,"display_name":"Hi computer"},"score":0,"creation_date":1681121910,"post_id":75975664,"comment_id":134001497,"body_markdown":"@ChinHuang Good to know, but I think even if I changed to Pageable, it is still considered as violating the rules","body":"@ChinHuang Good to know, but I think even if I changed to Pageable, it is still considered as violating the rules"},{"owner":{"account_id":22506547,"reputation":980,"user_id":16702058,"display_name":"Hi computer"},"score":0,"creation_date":1681122453,"post_id":75975664,"comment_id":134001574,"body_markdown":"@EmanuelTrandafir Yeah, probably. If you got a minute, could you like share some information on the difference it will make to swagger ui when provided with / without PageDTO?","body":"@EmanuelTrandafir Yeah, probably. If you got a minute, could you like share some information on the difference it will make to swagger ui when provided with / without PageDTO?"}],"owner":{"account_id":22506547,"reputation":980,"user_id":16702058,"display_name":"Hi computer"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":145,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681120769,"creation_date":1681117025,"question_id":75975664,"body_markdown":"I&#39;m working on a Spring project, and the class shown below is one that some GET requests use as &quot;paging parameters.&quot;\r\n\r\n```\r\n// PageDTO.java\r\npublic class PageDTO {\r\n    int size = 10;\r\n    int current = 0;\r\n}\r\n\r\n// RoomController.java - how I would use PageDTO\r\n@GetMapping(&quot;get/rooms&quot;)\r\npublic List&lt;Room&gt; getUserRooms(\r\n    PageDTO pageDTO, \r\n    @RequestParam(value = &quot;user_id&quot;, required = true) Integer userId\r\n) {\r\n    List&lt;Room&gt; rooms = roomMapper.getByUserId(userId, pageDTO.getCurrent(), pageDTO.getSize());\r\n    return rooms;\r\n}\r\n```\r\n\r\nProblem is: \r\n\r\nAccording to the regulations we use at work, PageDTO for GET requests is a bad design, but it did not explain why. The parameters should be changed to:\r\n\r\n```\r\nPageDTO pageDTO, \r\n@RequestParam(value = &quot;user_id&quot;, required = true) Integer userId\r\n\r\n// -&gt;\r\n\r\n@RequestParam(value = &quot;current&quot;, defaultValue = &quot;0&quot;, required = false) Integer current,\r\n@RequestParam(value = &quot;size&quot;, defaultValue = &quot;10&quot;, required = false) Integer size,\r\n@RequestParam(value = &quot;user_id&quot;, required = true) Integer userId\r\n```\r\n\r\nI see a lot of same code on Internet that use PageDTO or other similar classes. Can you clarify whether this design has any drawbacks? why it might be detrimental?","title":"Spring paging parameters put to one DTO","body":"<p>I'm working on a Spring project, and the class shown below is one that some GET requests use as &quot;paging parameters.&quot;</p>\n<pre><code>// PageDTO.java\npublic class PageDTO {\n    int size = 10;\n    int current = 0;\n}\n\n// RoomController.java - how I would use PageDTO\n@GetMapping(&quot;get/rooms&quot;)\npublic List&lt;Room&gt; getUserRooms(\n    PageDTO pageDTO, \n    @RequestParam(value = &quot;user_id&quot;, required = true) Integer userId\n) {\n    List&lt;Room&gt; rooms = roomMapper.getByUserId(userId, pageDTO.getCurrent(), pageDTO.getSize());\n    return rooms;\n}\n</code></pre>\n<p>Problem is:</p>\n<p>According to the regulations we use at work, PageDTO for GET requests is a bad design, but it did not explain why. The parameters should be changed to:</p>\n<pre><code>PageDTO pageDTO, \n@RequestParam(value = &quot;user_id&quot;, required = true) Integer userId\n\n// -&gt;\n\n@RequestParam(value = &quot;current&quot;, defaultValue = &quot;0&quot;, required = false) Integer current,\n@RequestParam(value = &quot;size&quot;, defaultValue = &quot;10&quot;, required = false) Integer size,\n@RequestParam(value = &quot;user_id&quot;, required = true) Integer userId\n</code></pre>\n<p>I see a lot of same code on Internet that use PageDTO or other similar classes. Can you clarify whether this design has any drawbacks? why it might be detrimental?</p>\n"},{"tags":["java","methods","java-8","java-stream","option-type"],"comments":[{"owner":{"account_id":1056871,"reputation":117749,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":2,"creation_date":1530010023,"post_id":51040929,"comment_id":89072997,"body_markdown":"what are you asking? this is really unclear, and did you read the docs and numerous other posts here about one and the other?","body":"what are you asking? this is really unclear, and did you read the docs and numerous other posts here about one and the other?"},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":2,"creation_date":1530011528,"post_id":51040929,"comment_id":89073870,"body_markdown":"They perform very similar operations, hence the same name. The main difference is that one requires an `Optional` and a method that returns an `Optional` while the other requires a `Stream` and a method that returns a `Stream`.","body":"They perform very similar operations, hence the same name. The main difference is that one requires an <code>Optional</code> and a method that returns an <code>Optional</code> while the other requires a <code>Stream</code> and a method that returns a <code>Stream</code>."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1530011659,"post_id":51040929,"comment_id":89073964,"body_markdown":"Could you elaborate your examples into [MCVE](https://stackoverflow.com/help/mcve)? That would help.","body":"Could you elaborate your examples into <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a>? That would help."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1530096974,"post_id":51040929,"comment_id":89111875,"body_markdown":"Also the stacktrace from the exception that you say that you get would be helpful.","body":"Also the stacktrace from the exception that you say that you get would be helpful."},{"owner":{"account_id":249169,"reputation":19388,"user_id":525036,"accept_rate":25,"display_name":"Didier L"},"score":1,"creation_date":1530102409,"post_id":51040929,"comment_id":89115324,"body_markdown":"It would be good that you clarify your question to indicate exactly what you are trying to do, and give self-sufficient code snippets that show your problem ([mcve]). Even if you already got your answer, that will be helpful for future readers.","body":"It would be good that you clarify your question to indicate exactly what you are trying to do, and give self-sufficient code snippets that show your problem (<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>). Even if you already got your answer, that will be helpful for future readers."}],"answers":[{"tags":[],"owner":{"account_id":393510,"reputation":3285,"user_id":755401,"accept_rate":82,"display_name":"arthur"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1681120498,"creation_date":1530012692,"answer_id":51041866,"question_id":51040929,"body_markdown":"`Optional` and `Stream` are two different beasts intended for separated purposes.\r\n\r\n[`Optional`][1] is a ***wrapper*** that holds a result that can be or not be &quot;present&quot; (`null`) and provided methods to deal which these two  conditions (present, or Not Present).\r\n\r\nThe `flatMap()` operation is an operation applied to the value held in your `Optional` wrapper. That operation must return an `Optional` as a result:\r\n\r\n    Optional&lt;String&gt; s = Optional.of(&quot;test input&quot;);\r\n    s.flatMap( input -&gt; Optional.of(input));\r\n\r\nStream&#39;s [`flatMap()`][2] helps you to get and process nested elements of list elements. \r\n\r\n---\r\n### Additional reading\r\n* [What is the difference between Optional.flatMap and Optional.map?][3]\r\n* [What&#39;s the difference between map() and flatMap() methods in Java 8?][4]\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#flatMap-java.util.function.Function-\r\n  [3]: https://stackoverflow.com/questions/30864583/java-8-difference-between-optional-flatmap-and-optional-map\r\n  [4]: https://stackoverflow.com/questions/26684562/whats-the-difference-between-map-and-flatmap-methods-in-java-8/49297863#49297863","title":"Whats the difference between Optional.flatMap() and Stream.flatMap()","body":"<p><code>Optional</code> and <code>Stream</code> are two different beasts intended for separated purposes.</p>\n<p><a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html\" rel=\"nofollow noreferrer\"><code>Optional</code></a> is a <em><strong>wrapper</strong></em> that holds a result that can be or not be &quot;present&quot; (<code>null</code>) and provided methods to deal which these two  conditions (present, or Not Present).</p>\n<p>The <code>flatMap()</code> operation is an operation applied to the value held in your <code>Optional</code> wrapper. That operation must return an <code>Optional</code> as a result:</p>\n<pre><code>Optional&lt;String&gt; s = Optional.of(&quot;test input&quot;);\ns.flatMap( input -&gt; Optional.of(input));\n</code></pre>\n<p>Stream's <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#flatMap-java.util.function.Function-\" rel=\"nofollow noreferrer\"><code>flatMap()</code></a> helps you to get and process nested elements of list elements.</p>\n<hr />\n<h3>Additional reading</h3>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/30864583/java-8-difference-between-optional-flatmap-and-optional-map\">What is the difference between Optional.flatMap and Optional.map?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/26684562/whats-the-difference-between-map-and-flatmap-methods-in-java-8/49297863#49297863\">What's the difference between map() and flatMap() methods in Java 8?</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":25684,"reputation":3449,"user_id":66207,"accept_rate":100,"display_name":"keuleJ"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1530023421,"creation_date":1530023421,"answer_id":51045392,"question_id":51040929,"body_markdown":"From the javadoc: \r\nOptional.flatMap:\r\n\r\n    flatMap(Function&lt;? super T,Optional&lt;U&gt;&gt; mapper)\r\nIf a value is present, apply the provided Optional-bearing mapping function to it, return that result, otherwise return an empty Optional.\r\n\r\nStream.flatMap:\r\n\r\n    flatMap(Function&lt;? super T,? extends Stream&lt;? extends R&gt;&gt; mapper)\r\nReturns a stream consisting of the results of replacing each element of this stream with the contents of a mapped stream produced by applying the provided mapping function to each element.\r\n\r\nSo the main difference is, that one returns a Stream, the other an Optional","title":"Whats the difference between Optional.flatMap() and Stream.flatMap()","body":"<p>From the javadoc: \nOptional.flatMap:</p>\n\n<pre><code>flatMap(Function&lt;? super T,Optional&lt;U&gt;&gt; mapper)\n</code></pre>\n\n<p>If a value is present, apply the provided Optional-bearing mapping function to it, return that result, otherwise return an empty Optional.</p>\n\n<p>Stream.flatMap:</p>\n\n<pre><code>flatMap(Function&lt;? super T,? extends Stream&lt;? extends R&gt;&gt; mapper)\n</code></pre>\n\n<p>Returns a stream consisting of the results of replacing each element of this stream with the contents of a mapped stream produced by applying the provided mapping function to each element.</p>\n\n<p>So the main difference is, that one returns a Stream, the other an Optional</p>\n"},{"comments":[{"owner":{"account_id":10451564,"reputation":69,"user_id":7705012,"display_name":"Jakub"},"score":0,"creation_date":1530100157,"post_id":51061263,"comment_id":89113778,"body_markdown":"Excuse me, that was my first question in stackoverflow. This answer fulfills my expectations. Thank you so much!","body":"Excuse me, that was my first question in stackoverflow. This answer fulfills my expectations. Thank you so much!"},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1530107475,"post_id":51061263,"comment_id":89119012,"body_markdown":"We’re all learning. And yes, it takes a bit to learn how to use this site. Welcome! BTW I thought of a different solution and added it to the answer.","body":"We’re all learning. And yes, it takes a bit to learn how to use this site. Welcome! BTW I thought of a different solution and added it to the answer."}],"tags":[],"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1530107512,"creation_date":1530097756,"answer_id":51061263,"question_id":51040929,"body_markdown":"It’s hard to be sure from your code snippets where we don’t know the types of the variables you use nor the return types of the methods. But I *think* that the source of your error is that you are trying to pass a lambda that returns a `Stream` to `Optional.flatMap()`.\r\n\r\nLet’s look at `Stream` first. [`Stream.flatMap()`](https://docs.oracle.com/javase/9/docs/api/java/util/stream/Stream.html#flatMap-java.util.function.Function-) takes a function that returns a `Stream`. This seems to be exactly what you are giving it in your first code snippet.\r\n\r\n`Optional` on the other hand: [`Optional.flatMap()`](https://docs.oracle.com/javase/9/docs/api/java/util/Optional.html#flatMap-java.util.function.Function-) requires a function that returns an `Optional`. If `getBrowse()` returns an `Optional`, then what you pass to `Optional.flatMap` is `uri -&gt; physicalInventoryClient.getSublocationsByIds(uri).stream()`. This looks like your lambda returns a stream, not an `Optional`. When I try the same in my Eclipse, I get a compile error like the following:\r\n\r\n&gt; The method flatMap(Function&amp;lt;? super String,? extends Optional&amp;lt;?\r\n&gt; extends U&gt;&gt;) in the type Optional&amp;lt;String&gt; is not applicable for the\r\n&gt; arguments ((Object x) -&gt; {})\r\n\r\nThe solution? From Java 9 `Optional` has [a `stream` method](https://docs.oracle.com/javase/9/docs/api/java/util/Optional.html#stream--) that will probably let you achieve what you are trying. Again, without knowing your code it’s hard to suggest, but probably something like:\r\n\r\n        List&lt;SublocationBrowseDTO&gt; collect2 = physicalInventoryClient.getSublocationsByLocation(masterLocation.get(), null)\r\n                .getBrowse()\r\n                .stream()\r\n                .flatMap(uri -&gt; physicalInventoryClient.getSublocationsByIds(uri).stream())\r\n                .collect(Collectors.toList());\r\n\r\n**Edit:** Alternative without stream:\r\n\r\n        List&lt;SublocationBrowseDTO&gt; collect2 = physicalInventoryClient.getSublocationsByLocation(masterLocation.get(), null)\r\n                .getBrowse()\r\n                .map(uri -&gt; physicalInventoryClient.getSublocationsByIds(uri))\r\n                .orElse(Collections.emptyList());\r\n\r\nThe latter version requires that `getSublocationsById()` returns a list, but can probably be modified to work if the return type is something else. IMHO it’s a bit simpler.","title":"Whats the difference between Optional.flatMap() and Stream.flatMap()","body":"<p>It’s hard to be sure from your code snippets where we don’t know the types of the variables you use nor the return types of the methods. But I <em>think</em> that the source of your error is that you are trying to pass a lambda that returns a <code>Stream</code> to <code>Optional.flatMap()</code>.</p>\n\n<p>Let’s look at <code>Stream</code> first. <a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/stream/Stream.html#flatMap-java.util.function.Function-\" rel=\"nofollow noreferrer\"><code>Stream.flatMap()</code></a> takes a function that returns a <code>Stream</code>. This seems to be exactly what you are giving it in your first code snippet.</p>\n\n<p><code>Optional</code> on the other hand: <a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/Optional.html#flatMap-java.util.function.Function-\" rel=\"nofollow noreferrer\"><code>Optional.flatMap()</code></a> requires a function that returns an <code>Optional</code>. If <code>getBrowse()</code> returns an <code>Optional</code>, then what you pass to <code>Optional.flatMap</code> is <code>uri -&gt; physicalInventoryClient.getSublocationsByIds(uri).stream()</code>. This looks like your lambda returns a stream, not an <code>Optional</code>. When I try the same in my Eclipse, I get a compile error like the following:</p>\n\n<blockquote>\n  <p>The method flatMap(Function&lt;? super String,? extends Optional&lt;?\n  extends U>>) in the type Optional&lt;String> is not applicable for the\n  arguments ((Object x) -> {})</p>\n</blockquote>\n\n<p>The solution? From Java 9 <code>Optional</code> has <a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/Optional.html#stream--\" rel=\"nofollow noreferrer\">a <code>stream</code> method</a> that will probably let you achieve what you are trying. Again, without knowing your code it’s hard to suggest, but probably something like:</p>\n\n<pre><code>    List&lt;SublocationBrowseDTO&gt; collect2 = physicalInventoryClient.getSublocationsByLocation(masterLocation.get(), null)\n            .getBrowse()\n            .stream()\n            .flatMap(uri -&gt; physicalInventoryClient.getSublocationsByIds(uri).stream())\n            .collect(Collectors.toList());\n</code></pre>\n\n<p><strong>Edit:</strong> Alternative without stream:</p>\n\n<pre><code>    List&lt;SublocationBrowseDTO&gt; collect2 = physicalInventoryClient.getSublocationsByLocation(masterLocation.get(), null)\n            .getBrowse()\n            .map(uri -&gt; physicalInventoryClient.getSublocationsByIds(uri))\n            .orElse(Collections.emptyList());\n</code></pre>\n\n<p>The latter version requires that <code>getSublocationsById()</code> returns a list, but can probably be modified to work if the return type is something else. IMHO it’s a bit simpler.</p>\n"}],"owner":{"account_id":10451564,"reputation":69,"user_id":7705012,"display_name":"Jakub"},"comment_count":5,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2060,"favorite_count":0,"down_vote_count":3,"up_vote_count":4,"closed_date":1530102245,"accepted_answer_id":51061263,"answer_count":3,"score":1,"last_activity_date":1681120498,"creation_date":1530009777,"question_id":51040929,"body_markdown":"What is the difference between Optional.flatMap() and Stream.flatMap().\r\n\r\nCorrect flatMap on Stream:\r\n\r\n        List&lt;ObjectDTO&gt; collect = types.stream()\r\n                .flatMap(a -&gt; client.getSthById(new URI(a)).stream())\r\n                .collect(Collectors.toList());\r\n\r\nException while using flatMap on Optional:\r\n\r\n            List&lt;ObjectDTO&gt; collect2 = client.getSthByObj(obje.get(), null).getBrowse()\r\n                    .flatMap(uri -&gt; client.getSthById(uri).stream())\r\n                    .collect(Collectors.toList());\r\n\r\nWhy can&#39;t I use it in the same way?","title":"Whats the difference between Optional.flatMap() and Stream.flatMap()","body":"<p>What is the difference between Optional.flatMap() and Stream.flatMap().</p>\n\n<p>Correct flatMap on Stream:</p>\n\n<pre><code>    List&lt;ObjectDTO&gt; collect = types.stream()\n            .flatMap(a -&gt; client.getSthById(new URI(a)).stream())\n            .collect(Collectors.toList());\n</code></pre>\n\n<p>Exception while using flatMap on Optional:</p>\n\n<pre><code>        List&lt;ObjectDTO&gt; collect2 = client.getSthByObj(obje.get(), null).getBrowse()\n                .flatMap(uri -&gt; client.getSthById(uri).stream())\n                .collect(Collectors.toList());\n</code></pre>\n\n<p>Why can't I use it in the same way?</p>\n"},{"tags":["java","android","view","onclicklistener","lottie"],"answers":[{"tags":[],"owner":{"account_id":6539531,"reputation":55,"user_id":5057663,"display_name":"naqi"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681120368,"creation_date":1681120131,"answer_id":75976010,"question_id":69056856,"body_markdown":"    animationView.isClickable = true\r\n\r\nYou have to make it clickable so that no event can pass through the animation. ","title":"How to prevent click through on LottieAnimationView","body":"<pre><code>animationView.isClickable = true\n</code></pre>\n<p>You have to make it clickable so that no event can pass through the animation.</p>\n"}],"owner":{"account_id":14658045,"reputation":23,"user_id":11503443,"display_name":"Hoax"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":160,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1681120368,"creation_date":1630770983,"question_id":69056856,"body_markdown":"     public void  showProgress(LottieAnimationView lottieview) {\r\n        lottieview.setVisibility(LottieAnimationView.VISIBLE);\r\n        lottieview.bringToFront();\r\n        lottieview.setAnimation(R.raw.wesocialdot);\r\n        lottieview.setAlpha(0.85f);\r\n        lottieview.setRepeatMode(LottieDrawable.REVERSE);\r\n        lottieview.setRepeatCount(9999999);\r\n        lottieview.setEnabled(false);\r\n        lottieview.setClickable(false);\r\n        lottieview.playAnimation();\r\n\r\n    }\r\n\r\nI have a method for displaying my LottieView, but the issue i have now...Whenever i click on the LottieAnimationView when it is visible, the click passes onto the views below it.\r\n\r\nI have tried\r\n\r\n    lottieview.setEnabled(false);\r\n    lottieview.setClickable(false);\r\n\r\nIt is still not working...","title":"How to prevent click through on LottieAnimationView","body":"<pre><code> public void  showProgress(LottieAnimationView lottieview) {\n    lottieview.setVisibility(LottieAnimationView.VISIBLE);\n    lottieview.bringToFront();\n    lottieview.setAnimation(R.raw.wesocialdot);\n    lottieview.setAlpha(0.85f);\n    lottieview.setRepeatMode(LottieDrawable.REVERSE);\n    lottieview.setRepeatCount(9999999);\n    lottieview.setEnabled(false);\n    lottieview.setClickable(false);\n    lottieview.playAnimation();\n\n}\n</code></pre>\n<p>I have a method for displaying my LottieView, but the issue i have now...Whenever i click on the LottieAnimationView when it is visible, the click passes onto the views below it.</p>\n<p>I have tried</p>\n<pre><code>lottieview.setEnabled(false);\nlottieview.setClickable(false);\n</code></pre>\n<p>It is still not working...</p>\n"},{"tags":["java","spring","spring-boot","hibernate"],"answers":[{"tags":[],"owner":{"account_id":10491586,"reputation":179,"user_id":7864377,"display_name":"Dmitry Pukhov"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1637004932,"creation_date":1637004932,"answer_id":69979904,"question_id":69977910,"body_markdown":"Your application.yml contains logger configuration. It states that all classes in package org.hibernate.SQL will have log level *debug* unless the log level is not defined more specifically, i.e. configuring log level for org.hibernate.SQL.XXX will override log level inherited from org.hibernate.SQL.\r\n\r\nThere are multiple log levels: error, warn, info, debug, trace.\r\n- Message with level *error* has maximum importance so it will be printed always (unless you disable logging at all).\r\n- Message with level *info* will be printed if class log level is one of *info*, *debug*, *trace*.\r\n- Message with level *trace* has near to zero importance: it will be printed if and only if log level is set to *trace*.\r\n\r\nThe link you provided gives enough details to understand what will be logged. To check real logs you have to run your application and execute some SQL query using Hibernate.","title":"What means the logging.level.org.hibernate.type option in Spring boot","body":"<p>Your application.yml contains logger configuration. It states that all classes in package org.hibernate.SQL will have log level <em>debug</em> unless the log level is not defined more specifically, i.e. configuring log level for org.hibernate.SQL.XXX will override log level inherited from org.hibernate.SQL.</p>\n<p>There are multiple log levels: error, warn, info, debug, trace.</p>\n<ul>\n<li>Message with level <em>error</em> has maximum importance so it will be printed always (unless you disable logging at all).</li>\n<li>Message with level <em>info</em> will be printed if class log level is one of <em>info</em>, <em>debug</em>, <em>trace</em>.</li>\n<li>Message with level <em>trace</em> has near to zero importance: it will be printed if and only if log level is set to <em>trace</em>.</li>\n</ul>\n<p>The link you provided gives enough details to understand what will be logged. To check real logs you have to run your application and execute some SQL query using Hibernate.</p>\n"},{"tags":[],"owner":{"account_id":3098417,"reputation":1074,"user_id":2623162,"accept_rate":67,"display_name":"Alex"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1681119792,"creation_date":1681116976,"answer_id":75975656,"question_id":69977910,"body_markdown":"You can use\r\n\r\n    logging:\r\n      level:\r\n        org:\r\n          hibernate:\r\n            type: trace   #For prepared statements   \r\nin order to see the values of the data injected (the binding parameters) into the prepared statement.\r\n\r\nInstead of just seeing question marks (&#39;?&#39;):\r\n\r\n    Hibernate: \r\n    insert \r\n    into\r\n        persons\r\n        (age, name, id) \r\n    values\r\n        (?, ?, ?)\r\n\r\nyou can see the actual data injected in the binding parameters:\r\n\r\n    2022-12-07 09:30:41.889 TRACE 8004 [main] o.h.type.descriptor.sql.BasicBinder : binding parameter [1] as [INTEGER] - [10]\r\n    2022-12-07 09:30:41.890 TRACE 8004 [main] o.h.type.descriptor.sql.BasicBinder : binding parameter [2] as [VARCHAR] - [Tom]\r\n    2022-12-07 09:30:41.891 TRACE 8004 [main] o.h.type.descriptor.sql.BasicBinder : binding parameter [3] as [BIGINT] - [12]\r\nThis way you can see that:\r\n\r\n    the first  &quot;?&quot; will get the value of 10\r\n    the second &quot;?&quot; will get the value of &#39;Tom&#39;\r\n    the third  &quot;?&quot; will get the value of 12\r\nFrom https://stackoverflow.com/a/63167967/2623162 and https://howtodoinjava.com/spring-boot/spring-data-jpa-sql-logging/   \r\n\r\n**ANOTHER OPTION** \r\nfrom https://www.baeldung.com/hibernate-logging-levels is to have these in the logback.xml file (or log4j2 if you use log4j2):\r\n\r\n    &lt;logger name=&quot;org.springframework.data.repository.CrudRepository&quot; level=&quot;TRACE&quot;/&gt;\r\n    &lt;logger name=&quot;org.hibernate.type.descriptor.sql&quot; level=&quot;TRACE&quot; /&gt;","title":"What means the logging.level.org.hibernate.type option in Spring boot","body":"<p>You can use</p>\n<pre><code>logging:\n  level:\n    org:\n      hibernate:\n        type: trace   #For prepared statements   \n</code></pre>\n<p>in order to see the values of the data injected (the binding parameters) into the prepared statement.</p>\n<p>Instead of just seeing question marks ('?'):</p>\n<pre><code>Hibernate: \ninsert \ninto\n    persons\n    (age, name, id) \nvalues\n    (?, ?, ?)\n</code></pre>\n<p>you can see the actual data injected in the binding parameters:</p>\n<pre><code>2022-12-07 09:30:41.889 TRACE 8004 [main] o.h.type.descriptor.sql.BasicBinder : binding parameter [1] as [INTEGER] - [10]\n2022-12-07 09:30:41.890 TRACE 8004 [main] o.h.type.descriptor.sql.BasicBinder : binding parameter [2] as [VARCHAR] - [Tom]\n2022-12-07 09:30:41.891 TRACE 8004 [main] o.h.type.descriptor.sql.BasicBinder : binding parameter [3] as [BIGINT] - [12]\n</code></pre>\n<p>This way you can see that:</p>\n<pre><code>the first  &quot;?&quot; will get the value of 10\nthe second &quot;?&quot; will get the value of 'Tom'\nthe third  &quot;?&quot; will get the value of 12\n</code></pre>\n<p>From <a href=\"https://stackoverflow.com/a/63167967/2623162\">https://stackoverflow.com/a/63167967/2623162</a> and <a href=\"https://howtodoinjava.com/spring-boot/spring-data-jpa-sql-logging/\" rel=\"nofollow noreferrer\">https://howtodoinjava.com/spring-boot/spring-data-jpa-sql-logging/</a></p>\n<p><strong>ANOTHER OPTION</strong>\nfrom <a href=\"https://www.baeldung.com/hibernate-logging-levels\" rel=\"nofollow noreferrer\">https://www.baeldung.com/hibernate-logging-levels</a> is to have these in the logback.xml file (or log4j2 if you use log4j2):</p>\n<pre><code>&lt;logger name=&quot;org.springframework.data.repository.CrudRepository&quot; level=&quot;TRACE&quot;/&gt;\n&lt;logger name=&quot;org.hibernate.type.descriptor.sql&quot; level=&quot;TRACE&quot; /&gt;\n</code></pre>\n"}],"owner":{"account_id":20976511,"reputation":159,"user_id":15412354,"display_name":"JinYeong Kim"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4145,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":75975656,"answer_count":2,"score":3,"last_activity_date":1681119792,"creation_date":1636994579,"question_id":69977910,"body_markdown":"```\r\nlogging:\r\n  level:\r\n    org.hibernate.SQL: debug\r\n    org.hibernate.type: trace\r\n```\r\nIt is part of my `application.yml` config.  \r\nAnd I was curios about `org.hibernate.type` option.  \r\nSo, I have found the information about this.  \r\nI could only find this link. [jboss doc](https://docs.jboss.org/hibernate/stable/core.old/reference/en/html/configuration-logging.html)  \r\n\r\nI found this option is for tracing binding parameters by programming myself.  \r\nHowever, I want doc or specific explanation.","title":"What means the logging.level.org.hibernate.type option in Spring boot","body":"<pre><code>logging:\n  level:\n    org.hibernate.SQL: debug\n    org.hibernate.type: trace\n</code></pre>\n<p>It is part of my <code>application.yml</code> config.<br />\nAnd I was curios about <code>org.hibernate.type</code> option.<br />\nSo, I have found the information about this.<br />\nI could only find this link. <a href=\"https://docs.jboss.org/hibernate/stable/core.old/reference/en/html/configuration-logging.html\" rel=\"nofollow noreferrer\">jboss doc</a></p>\n<p>I found this option is for tracing binding parameters by programming myself.<br />\nHowever, I want doc or specific explanation.</p>\n"},{"tags":["java","angular","spring-boot","server","tomcat9"],"comments":[{"owner":{"account_id":551394,"reputation":8315,"user_id":916225,"accept_rate":69,"display_name":"seenukarthi"},"score":1,"creation_date":1681101687,"post_id":75974268,"comment_id":133998804,"body_markdown":"You need to check the server log. 500 response means some thing gone wrong at the server side which can be any thing.","body":"You need to check the server log. 500 response means some thing gone wrong at the server side which can be any thing."},{"owner":{"account_id":22808924,"reputation":11,"user_id":16960582,"display_name":"Ashish Vyas"},"score":0,"creation_date":1681103388,"post_id":75974268,"comment_id":133998940,"body_markdown":"@seenukarthi error is not logged in the log of springboot","body":"@seenukarthi error is not logged in the log of springboot"}],"owner":{"account_id":22808924,"reputation":11,"user_id":16960582,"display_name":"Ashish Vyas"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1681119546,"creation_date":1681100972,"question_id":75974268,"body_markdown":"I have Angular and Spring Boot deployed on same tomcat server and when I hit a specific API, I get 500 response from server and when I again hit the same, it gets loaded. What maybe the possible error here?\r\n\r\nI have Angular and Spring Boot deployed on same tomcat server and when I hit a specific API, I get 500 response from server and when I again hit the same, it gets loaded. Expected output is the API must perform the same way first time as it is behaving the second time.","title":"Intermittent 500 Response from Server for API Call in Angular and Spring Boot Deployment on Tomcat&quot;","body":"<p>I have Angular and Spring Boot deployed on same tomcat server and when I hit a specific API, I get 500 response from server and when I again hit the same, it gets loaded. What maybe the possible error here?</p>\n<p>I have Angular and Spring Boot deployed on same tomcat server and when I hit a specific API, I get 500 response from server and when I again hit the same, it gets loaded. Expected output is the API must perform the same way first time as it is behaving the second time.</p>\n"},{"tags":["java","static"],"comments":[{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":3,"creation_date":1385218294,"post_id":20163665,"comment_id":30057022,"body_markdown":"Java is not a functional language. It is a OOP language, so I suggest you use object orientated programming or use a functional language.","body":"Java is not a functional language. It is a OOP language, so I suggest you use object orientated programming or use a functional language."},{"owner":{"account_id":2466460,"reputation":17100,"user_id":2149440,"accept_rate":82,"display_name":"Bart"},"score":0,"creation_date":1385218426,"post_id":20163665,"comment_id":30057058,"body_markdown":"Static methods should be stateless while instance methods are mostly used to alter the state of the instance.","body":"Static methods should be stateless while instance methods are mostly used to alter the state of the instance."},{"owner":{"account_id":373773,"reputation":5879,"user_id":723618,"accept_rate":54,"display_name":"ddoor"},"score":0,"creation_date":1385218721,"post_id":20163665,"comment_id":30057135,"body_markdown":"sometimes i throw useful logic functions into a util.java type class. However for array converters, I would have this as part of the instance, since any memory associated will get cleaned up when the instance is destroyed. It is safer to avoid static as soon as things get complicated or lots of memory moves around.","body":"sometimes i throw useful logic functions into a util.java type class. However for array converters, I would have this as part of the instance, since any memory associated will get cleaned up when the instance is destroyed. It is safer to avoid static as soon as things get complicated or lots of memory moves around."},{"owner":{"account_id":137777,"reputation":194868,"user_id":342235,"accept_rate":77,"display_name":"Freewind"},"score":0,"creation_date":1385219079,"post_id":20163665,"comment_id":30057212,"body_markdown":"@PeterLawrey, thank you for pointing this, I just found the word I want to use is &quot;stateless&quot;, which is better to express my idea","body":"@PeterLawrey, thank you for pointing this, I just found the word I want to use is &quot;stateless&quot;, which is better to express my idea"},{"owner":{"account_id":1957056,"reputation":1805,"user_id":1759834,"accept_rate":62,"display_name":"Michael D."},"score":0,"creation_date":1385219556,"post_id":20163665,"comment_id":30057348,"body_markdown":"I would think Iterator or Adapter would be the OOP answer?","body":"I would think Iterator or Adapter would be the OOP answer?"},{"owner":{"account_id":1114067,"reputation":196801,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":1,"creation_date":1385220460,"post_id":20163665,"comment_id":30057642,"body_markdown":"@PeterLawrey As of Java 8 that characterisation of Java will not be as clear anymore.","body":"@PeterLawrey As of Java 8 that characterisation of Java will not be as clear anymore."},{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1385229213,"post_id":20163665,"comment_id":30060582,"body_markdown":"@MarkoTopolnik Very true, IMHO it will be a while before it really makes sense to do functional programming in Java.  The syntax is still pretty clunky (the streams part, not the closures) and the execution much slower.","body":"@MarkoTopolnik Very true, IMHO it will be a while before it really makes sense to do functional programming in Java.  The syntax is still pretty clunky (the streams part, not the closures) and the execution much slower."},{"owner":{"account_id":1114067,"reputation":196801,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":0,"creation_date":1385229855,"post_id":20163665,"comment_id":30060790,"body_markdown":"@PeterLawrey I guess the only real use case is seamless parallelisation, which seems to be the primary motivator behind that API.","body":"@PeterLawrey I guess the only real use case is seamless parallelisation, which seems to be the primary motivator behind that API."},{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1385230009,"post_id":20163665,"comment_id":30060850,"body_markdown":"@MarkoTopolnik IMHO Parallelism is over used by developer who don&#39;t understand that it can create more overhead than benefit.  Yes, all the CPU light up as busy, but the program is slower.  Now there is an easy way to make all the CPUs busy, not sure that is a good thing. ;)","body":"@MarkoTopolnik IMHO Parallelism is over used by developer who don&#39;t understand that it can create more overhead than benefit.  Yes, all the CPU light up as busy, but the program is slower.  Now there is an easy way to make all the CPUs busy, not sure that is a good thing. ;)"},{"owner":{"account_id":1114067,"reputation":196801,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":1,"creation_date":1385230996,"post_id":20163665,"comment_id":30061186,"body_markdown":"@PeterLawrey But the only way to push performance today and in the future will be parallelisation; however it will take quite a while until everything is designed around that scheme, and until then there will be many lines of wishful thinking around.","body":"@PeterLawrey But the only way to push performance today and in the future will be parallelisation; however it will take quite a while until everything is designed around that scheme, and until then there will be many lines of wishful thinking around."}],"answers":[{"comments":[{"owner":{"account_id":67966,"reputation":12546,"user_id":2145769,"accept_rate":67,"display_name":"Leonard Br&#252;nings"},"score":1,"creation_date":1385218467,"post_id":20163728,"comment_id":30057064,"body_markdown":"The method `MyHelper.getContentOfUrl(&quot;http://google.com&quot;);` on the other hand is problematic, since it accesses external state.","body":"The method <code>MyHelper.getContentOfUrl(&quot;http:&#47;&#47;google.com&quot;);</code> on the other hand is problematic, since it accesses external state."},{"owner":{"account_id":137777,"reputation":194868,"user_id":342235,"accept_rate":77,"display_name":"Freewind"},"score":1,"creation_date":1385219145,"post_id":20163728,"comment_id":30057234,"body_markdown":"So for the `UrlHelper` one, I should avoid using static methods, right?","body":"So for the <code>UrlHelper</code> one, I should avoid using static methods, right?"},{"owner":{"account_id":277416,"reputation":681878,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":1,"creation_date":1385221326,"post_id":20163728,"comment_id":30057938,"body_markdown":"Right. Accessing an external URL is typically the sort of thing that you want to be able to mock in a test.","body":"Right. Accessing an external URL is typically the sort of thing that you want to be able to mock in a test."},{"owner":{"account_id":261142,"reputation":47118,"user_id":545127,"accept_rate":69,"display_name":"Raedwald"},"score":0,"creation_date":1385814588,"post_id":20163728,"comment_id":30289952,"body_markdown":"The broader answer is that you do not need to, and should not, mock everything execept the class under test when unit testing.","body":"The broader answer is that you do not need to, and should not, mock everything execept the class under test when unit testing."}],"tags":[],"owner":{"account_id":277416,"reputation":681878,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"comment_count":4,"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1385221804,"creation_date":1385218001,"answer_id":20163728,"question_id":20163665,"body_markdown":"You&#39;ll probably never want to mock a method that converts an array to a list (or set), and this method doesn&#39;t need any state and doesn&#39;t depend on any environment, so a static method looks fine to me. \r\n\r\nJust like the standard `Arrays.asList()` (which you should probably use).\r\n\r\nOn the other hand, accessing an external URL is typically the sort of thing that you want to be able to mock easily, because not mocking it would\r\n\r\n - make the test an integration test\r\n - require to have this external URL up every time you run your tests, which you probably can&#39;t guarantee\r\n - require to have this external URL return exactly what you want it to return in your test (including errors if you want to test the event of an error).","title":"Shall we avoid writing static methods in our java code for better testability?","body":"<p>You'll probably never want to mock a method that converts an array to a list (or set), and this method doesn't need any state and doesn't depend on any environment, so a static method looks fine to me. </p>\n\n<p>Just like the standard <code>Arrays.asList()</code> (which you should probably use).</p>\n\n<p>On the other hand, accessing an external URL is typically the sort of thing that you want to be able to mock easily, because not mocking it would</p>\n\n<ul>\n<li>make the test an integration test</li>\n<li>require to have this external URL up every time you run your tests, which you probably can't guarantee</li>\n<li>require to have this external URL return exactly what you want it to return in your test (including errors if you want to test the event of an error).</li>\n</ul>\n"},{"comments":[{"owner":{"account_id":137777,"reputation":194868,"user_id":342235,"accept_rate":77,"display_name":"Freewind"},"score":1,"creation_date":1385220192,"post_id":20163767,"comment_id":30057545,"body_markdown":"Thanks for the word &quot;stateless&quot;, that&#39;s what I want to express in my first sentence. (It was &quot;functional&quot;)","body":"Thanks for the word &quot;stateless&quot;, that&#39;s what I want to express in my first sentence. (It was &quot;functional&quot;)"}],"tags":[],"owner":{"account_id":373773,"reputation":5879,"user_id":723618,"accept_rate":54,"display_name":"ddoor"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1385218201,"creation_date":1385218201,"answer_id":20163767,"question_id":20163665,"body_markdown":"Static means you can call the method without instantiating the class. Its good if you want to package your code into a class and you have a function that just does some logic or something basic.\r\n\r\nJust don&#39;t use a static function to try and edit member variables in the class (obviously).\r\n\r\nPersonally I think its fine to use the static function, since it is stateless. \r\n","title":"Shall we avoid writing static methods in our java code for better testability?","body":"<p>Static means you can call the method without instantiating the class. Its good if you want to package your code into a class and you have a function that just does some logic or something basic.</p>\n\n<p>Just don't use a static function to try and edit member variables in the class (obviously).</p>\n\n<p>Personally I think its fine to use the static function, since it is stateless. </p>\n"},{"comments":[{"owner":{"account_id":137777,"reputation":194868,"user_id":342235,"accept_rate":77,"display_name":"Freewind"},"score":0,"creation_date":1385220482,"post_id":20163795,"comment_id":30057653,"body_markdown":"I agree the point of &quot;according to design&quot;, but we have to write unit-tests for them, but the static methods depend on external resources are hard to test","body":"I agree the point of &quot;according to design&quot;, but we have to write unit-tests for them, but the static methods depend on external resources are hard to test"}],"tags":[],"owner":{"account_id":41850,"reputation":132328,"user_id":121747,"accept_rate":89,"display_name":"Jack"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1385218375,"creation_date":1385218375,"answer_id":20163795,"question_id":20163665,"body_markdown":"Static methods should be used by answering the question _&quot;is this method a functionality of a specific instance?&quot;_.\r\n\r\nYou shouldn&#39;t decide about a `static` method according to tests, you should do it according to design. Your examples doesn&#39;t need an instance because it makes no sense. So `static` is the better choice. You can always wrap these methods inside specific tester classes to do your tests.\r\n\r\nThe only situation in which a self-contained functionality is not static is just when you want to provide multiple implementation, so that you are forced to avoid `static` because you need inheritance.","title":"Shall we avoid writing static methods in our java code for better testability?","body":"<p>Static methods should be used by answering the question <em>\"is this method a functionality of a specific instance?\"</em>.</p>\n\n<p>You shouldn't decide about a <code>static</code> method according to tests, you should do it according to design. Your examples doesn't need an instance because it makes no sense. So <code>static</code> is the better choice. You can always wrap these methods inside specific tester classes to do your tests.</p>\n\n<p>The only situation in which a self-contained functionality is not static is just when you want to provide multiple implementation, so that you are forced to avoid <code>static</code> because you need inheritance.</p>\n"},{"comments":[{"owner":{"account_id":373773,"reputation":5879,"user_id":723618,"accept_rate":54,"display_name":"ddoor"},"score":0,"creation_date":1385218766,"post_id":20163825,"comment_id":30057143,"body_markdown":"Remember math uses lots of primitive types. You are right about garbage collection I think. Static won&#39;t get destoyed along with the instance.","body":"Remember math uses lots of primitive types. You are right about garbage collection I think. Static won&#39;t get destoyed along with the instance."},{"owner":{"account_id":137777,"reputation":194868,"user_id":342235,"accept_rate":77,"display_name":"Freewind"},"score":0,"creation_date":1385219863,"post_id":20163825,"comment_id":30057446,"body_markdown":"`java.lang.Math` is just like the `ArrayHelper` example in my question. But I confused on the `UrlHelper` one","body":"<code>java.lang.Math</code> is just like the <code>ArrayHelper</code> example in my question. But I confused on the <code>UrlHelper</code> one"}],"tags":[],"owner":{"account_id":1957056,"reputation":1805,"user_id":1759834,"accept_rate":62,"display_name":"Michael D."},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1385218559,"creation_date":1385218559,"answer_id":20163825,"question_id":20163665,"body_markdown":"java.lang.Math is static which is a good example. I thought statics are not beeing garbage collected and should be avoided if possible.","title":"Shall we avoid writing static methods in our java code for better testability?","body":"<p>java.lang.Math is static which is a good example. I thought statics are not beeing garbage collected and should be avoided if possible.</p>\n"},{"comments":[{"owner":{"account_id":373773,"reputation":5879,"user_id":723618,"accept_rate":54,"display_name":"ddoor"},"score":0,"creation_date":1385218922,"post_id":20163841,"comment_id":30057175,"body_markdown":"There is a place for static, you don&#39;t have to be a wizard to know it. But I agree, &quot;avoid unless you have a reason to use&quot; is a good ideology. Also Java is practically the definition of OOP.","body":"There is a place for static, you don&#39;t have to be a wizard to know it. But I agree, &quot;avoid unless you have a reason to use&quot; is a good ideology. Also Java is practically the definition of OOP."},{"owner":{"account_id":137777,"reputation":194868,"user_id":342235,"accept_rate":77,"display_name":"Freewind"},"score":0,"creation_date":1385219744,"post_id":20163841,"comment_id":30057413,"body_markdown":"&quot;functional java&quot; is really not the point in this question, sorry ~","body":"&quot;functional java&quot; is really not the point in this question, sorry ~"}],"tags":[],"owner":{"account_id":19115,"reputation":29081,"user_id":44523,"accept_rate":95,"display_name":"Esko"},"comment_count":2,"down_vote_count":4,"up_vote_count":0,"is_accepted":false,"score":-4,"last_activity_date":1385218702,"creation_date":1385218702,"answer_id":20163841,"question_id":20163665,"body_markdown":"No.\r\n\r\nAs mentioned by Peter Lawrey in the comment for the question, Java is all about object oriented programming. While certain functional aspects are doable and being put into eg. Java 8, at its core Java is not functional. `static` breaks so much of the benefits of learning how to do modern Java - not to mention all kinds of not-fun-at-all scoping problems - that there&#39;s no purpose to use them ***unless*** you&#39;re some kind of a Java wizard who really knows what happens when you use that magical keyword.\r\n\r\nYou are not a wizard. Java is not functional. If you want to be a wizard, you can learn. If you want to program in functional fashion, look into hybrid languages such as Scala or Groovy or alternatively explore the fully functional world, eg. Clojure.","title":"Shall we avoid writing static methods in our java code for better testability?","body":"<p>No.</p>\n\n<p>As mentioned by Peter Lawrey in the comment for the question, Java is all about object oriented programming. While certain functional aspects are doable and being put into eg. Java 8, at its core Java is not functional. <code>static</code> breaks so much of the benefits of learning how to do modern Java - not to mention all kinds of not-fun-at-all scoping problems - that there's no purpose to use them <strong><em>unless</em></strong> you're some kind of a Java wizard who really knows what happens when you use that magical keyword.</p>\n\n<p>You are not a wizard. Java is not functional. If you want to be a wizard, you can learn. If you want to program in functional fashion, look into hybrid languages such as Scala or Groovy or alternatively explore the fully functional world, eg. Clojure.</p>\n"},{"comments":[{"owner":{"account_id":137777,"reputation":194868,"user_id":342235,"accept_rate":77,"display_name":"Freewind"},"score":0,"creation_date":1385220257,"post_id":20163928,"comment_id":30057568,"body_markdown":"Your idea is very similar with my friend&#39;s :)","body":"Your idea is very similar with my friend&#39;s :)"}],"tags":[],"owner":{"account_id":1397403,"reputation":12323,"user_id":1326913,"accept_rate":89,"display_name":"ᴇʟᴇvᴀтᴇ"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1385219649,"creation_date":1385219309,"answer_id":20163928,"question_id":20163665,"body_markdown":"I often use static methods:\r\n\r\n- for factory methods (explicitly named constructors)\r\n- to provide a functional layer above an object-oriented layer, to compose the objects\r\n- and sometimes for general-purpose functions (Apache Commons has many good examples of this)\r\n\r\nI never use &quot;singletons&quot; (static objects) and methods that *refer to* static objects because they are a complete headache to test and reuse. I also avoid hardcoding anything into a static method that could feasibly need to be changed. Sometimes I will provide multiple methods - one with all the dependencies as parameters and others, with fewer parameters, that call the more flexible method with some default (hardcoded) values.","title":"Shall we avoid writing static methods in our java code for better testability?","body":"<p>I often use static methods:</p>\n\n<ul>\n<li>for factory methods (explicitly named constructors)</li>\n<li>to provide a functional layer above an object-oriented layer, to compose the objects</li>\n<li>and sometimes for general-purpose functions (Apache Commons has many good examples of this)</li>\n</ul>\n\n<p>I never use \"singletons\" (static objects) and methods that <em>refer to</em> static objects because they are a complete headache to test and reuse. I also avoid hardcoding anything into a static method that could feasibly need to be changed. Sometimes I will provide multiple methods - one with all the dependencies as parameters and others, with fewer parameters, that call the more flexible method with some default (hardcoded) values.</p>\n"},{"comments":[{"owner":{"account_id":137777,"reputation":194868,"user_id":342235,"accept_rate":77,"display_name":"Freewind"},"score":0,"creation_date":1385220129,"post_id":20164039,"comment_id":30057528,"body_markdown":"I was trying to use `static` methods as much as possible before, but I have to agree that the solution of my friend is much easier to write unit tests. And we have to write unit tests for every non-private methods.","body":"I was trying to use <code>static</code> methods as much as possible before, but I have to agree that the solution of my friend is much easier to write unit tests. And we have to write unit tests for every non-private methods."},{"owner":{"account_id":1114067,"reputation":196801,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":0,"creation_date":1385220279,"post_id":20164039,"comment_id":30057577,"body_markdown":"A I understand from your question, you *don&#39;t* see an issue with array-helper methods. If you say testing is easier with instance methods in all cases, then what exactly is your question?","body":"A I understand from your question, you <i>don&#39;t</i> see an issue with array-helper methods. If you say testing is easier with instance methods in all cases, then what exactly is your question?"},{"owner":{"account_id":137777,"reputation":194868,"user_id":342235,"accept_rate":77,"display_name":"Freewind"},"score":0,"creation_date":1385220744,"post_id":20164039,"comment_id":30057735,"body_markdown":"Will your solution be: 1. static methods for `ArrayHelper` 2. Instance methods for `UrlHelper`?","body":"Will your solution be: 1. static methods for <code>ArrayHelper</code> 2. Instance methods for <code>UrlHelper</code>?"},{"owner":{"account_id":1114067,"reputation":196801,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":0,"creation_date":1385220837,"post_id":20164039,"comment_id":30057771,"body_markdown":"In the situation as you have described it, yes.","body":"In the situation as you have described it, yes."},{"owner":{"account_id":137777,"reputation":194868,"user_id":342235,"accept_rate":77,"display_name":"Freewind"},"score":0,"creation_date":1385221157,"post_id":20164039,"comment_id":30057875,"body_markdown":"Good, this is what I prefer too :)","body":"Good, this is what I prefer too :)"}],"tags":[],"owner":{"account_id":1114067,"reputation":196801,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"comment_count":5,"down_vote_count":1,"up_vote_count":7,"is_accepted":true,"score":6,"last_activity_date":1681119270,"creation_date":1385219906,"answer_id":20164039,"question_id":20163665,"body_markdown":"Beware of overengineering.\r\n\r\nIn your specific example, you either *do* or *don&#39;t* have a mockability issue. Since you are asking this in general, I&#39;ll assume you don&#39;t have a specific issue at the moment.\r\n\r\nThe general argument is that `static` methods are simpler and therefore the preferred choice, whenever there is a choice. A would-be instance method must first prove itself of needing to be an instance method.\r\n\r\nIf this was my project, I would defer any makeovers into instance methods until such a moment where the need for that became clear and present.","title":"Shall we avoid writing static methods in our java code for better testability?","body":"<p>Beware of overengineering.</p>\n<p>In your specific example, you either <em>do</em> or <em>don't</em> have a mockability issue. Since you are asking this in general, I'll assume you don't have a specific issue at the moment.</p>\n<p>The general argument is that <code>static</code> methods are simpler and therefore the preferred choice, whenever there is a choice. A would-be instance method must first prove itself of needing to be an instance method.</p>\n<p>If this was my project, I would defer any makeovers into instance methods until such a moment where the need for that became clear and present.</p>\n"}],"owner":{"account_id":137777,"reputation":194868,"user_id":342235,"accept_rate":77,"display_name":"Freewind"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6843,"favorite_count":0,"down_vote_count":0,"up_vote_count":14,"accepted_answer_id":20164039,"answer_count":7,"score":14,"last_activity_date":1681119270,"creation_date":1385217659,"question_id":20163665,"body_markdown":"I was prefer using static methods in my java code, since I think they are &lt;s&gt;&quot;functional&quot;&lt;/s&gt;&quot;stateless&quot; and has less side-effect. So there may be some helper classes and methods like this:\r\n\r\n    public class MyHelper {\r\n        public static Set&lt;String&gt; array2set(String[] items) { ... }\r\n        public static List&lt;String&gt; array2list(String[] items) { ...}\r\n        public static String getContentOfUrl(String url) {\r\n            // visit the url, and return the content of response\r\n        }\r\n    }\r\n\r\n    public class MyApp {\r\n        public void doSomething() {\r\n            String[] myarray = new String[]{ &quot;aa&quot;,&quot;bb&quot;};\r\n            Set&lt;String&gt; set = MyHelper.array2set(myarray);\r\n            String content = MyHelper.getContentOfUrl(&quot;http://google.com&quot;);\r\n        }\r\n    }\r\n\r\nBut my friend says we should avoid defining such static utility methods, since we call them directly in our code, it will be hard to mock them or test them if they have external dependencies. He thinks the code should be:\r\n\r\n    public class ArrayHelper {\r\n        public Set&lt;String&gt; array2set(String[] items) { ... }\r\n        public List&lt;String&gt; array2list(String[] items) { ...}\r\n    }\r\n    public class UrlHelper {\r\n        public String getContentOfUrl(String url) {\r\n            // visit the url, and return the content of response\r\n        }\r\n    }\r\n\r\n    public class MyApp {\r\n        private final ArrayHelper arrayHelper;\r\n        private final UrlHelper urlHelper;\r\n        public MyApp(ArrayHelper arrayHelper, UrlHelper urlHelper) {\r\n            this.arrayHelper = arrayHelper;\r\n            this.urlHelper = urlHelper;\r\n        }\r\n        public void doSomething() {\r\n            String[] myarray = new String[]{ &quot;aa&quot;,&quot;bb&quot;};\r\n            Set&lt;String&gt; set = arrayHelper.array2set(myarray);\r\n            String content = urlHelper.getContentOfUrl(&quot;http://google.com&quot;);\r\n        }\r\n    }\r\n\r\nIn this way, if we want to write unit tests for `MyApp`, we can just mock the `ArrayHelper` and `UrlHelper` and pass them to the constructor of `MyApp`.\r\n\r\nI agree totally about the `UrlHelper` part of his opinion, since the origin static code make `MyApp` untestable. \r\n\r\nBut I have a little confused about the `ArrayHelper` part, since it doesn&#39;t depend on any external resources and the logic will be very simple. Shall we avoid using static methods at this case too?\r\n\r\nAnd when to use static methods? Or just avoid using it as much as possible?\r\n\r\n----\r\n\r\nupdate:\r\n\r\nWe are using &quot;TDD&quot; in our development, so the testability of a class often is the most important concern for us.\r\n\r\nAnd I just replace the word &quot;functional&quot; with &quot;stateless&quot; in the first sentence since the that&#39;s real what I meant.","title":"Shall we avoid writing static methods in our java code for better testability?","body":"<p>I was prefer using static methods in my java code, since I think they are <s>\"functional\"</s>\"stateless\" and has less side-effect. So there may be some helper classes and methods like this:</p>\n\n<pre><code>public class MyHelper {\n    public static Set&lt;String&gt; array2set(String[] items) { ... }\n    public static List&lt;String&gt; array2list(String[] items) { ...}\n    public static String getContentOfUrl(String url) {\n        // visit the url, and return the content of response\n    }\n}\n\npublic class MyApp {\n    public void doSomething() {\n        String[] myarray = new String[]{ \"aa\",\"bb\"};\n        Set&lt;String&gt; set = MyHelper.array2set(myarray);\n        String content = MyHelper.getContentOfUrl(\"http://google.com\");\n    }\n}\n</code></pre>\n\n<p>But my friend says we should avoid defining such static utility methods, since we call them directly in our code, it will be hard to mock them or test them if they have external dependencies. He thinks the code should be:</p>\n\n<pre><code>public class ArrayHelper {\n    public Set&lt;String&gt; array2set(String[] items) { ... }\n    public List&lt;String&gt; array2list(String[] items) { ...}\n}\npublic class UrlHelper {\n    public String getContentOfUrl(String url) {\n        // visit the url, and return the content of response\n    }\n}\n\npublic class MyApp {\n    private final ArrayHelper arrayHelper;\n    private final UrlHelper urlHelper;\n    public MyApp(ArrayHelper arrayHelper, UrlHelper urlHelper) {\n        this.arrayHelper = arrayHelper;\n        this.urlHelper = urlHelper;\n    }\n    public void doSomething() {\n        String[] myarray = new String[]{ \"aa\",\"bb\"};\n        Set&lt;String&gt; set = arrayHelper.array2set(myarray);\n        String content = urlHelper.getContentOfUrl(\"http://google.com\");\n    }\n}\n</code></pre>\n\n<p>In this way, if we want to write unit tests for <code>MyApp</code>, we can just mock the <code>ArrayHelper</code> and <code>UrlHelper</code> and pass them to the constructor of <code>MyApp</code>.</p>\n\n<p>I agree totally about the <code>UrlHelper</code> part of his opinion, since the origin static code make <code>MyApp</code> untestable. </p>\n\n<p>But I have a little confused about the <code>ArrayHelper</code> part, since it doesn't depend on any external resources and the logic will be very simple. Shall we avoid using static methods at this case too?</p>\n\n<p>And when to use static methods? Or just avoid using it as much as possible?</p>\n\n<hr>\n\n<p>update:</p>\n\n<p>We are using \"TDD\" in our development, so the testability of a class often is the most important concern for us.</p>\n\n<p>And I just replace the word \"functional\" with \"stateless\" in the first sentence since the that's real what I meant.</p>\n"},{"tags":["java","udp","nio"],"comments":[{"owner":{"account_id":27925481,"reputation":175,"user_id":21324690,"display_name":"chunkynuggy"},"score":2,"creation_date":1681129061,"post_id":75964509,"comment_id":134002635,"body_markdown":"I found the answer by chance here at this [link](https://www.oreilly.com/library/view/java-nio/0596002882/ch04.html). There is also a provided sample code in the link. _&quot;A better approach is to use one selector for all selectable channels and delegate the servicing of ready channels to other threads. You have a single point to monitor channel readiness and a decoupled pool of worker threads to handle the incoming data. The thread pool size can be tuned (or tune itself, dynamically) according to deployment conditions. Management of selectable channels remains simple, and simple is good.&quot;_","body":"I found the answer by chance here at this <a href=\"https://www.oreilly.com/library/view/java-nio/0596002882/ch04.html\" rel=\"nofollow noreferrer\">link</a>. There is also a provided sample code in the link. <i>&quot;A better approach is to use one selector for all selectable channels and delegate the servicing of ready channels to other threads. You have a single point to monitor channel readiness and a decoupled pool of worker threads to handle the incoming data. The thread pool size can be tuned (or tune itself, dynamically) according to deployment conditions. Management of selectable channels remains simple, and simple is good.&quot;</i>"},{"owner":{"account_id":27925481,"reputation":175,"user_id":21324690,"display_name":"chunkynuggy"},"score":0,"creation_date":1681365043,"post_id":75964509,"comment_id":134045060,"body_markdown":"I did as the link stated, and removed the READ from the key&#39;s interestOps before passing it to a separate thread. I think this is not the case for DatagramChannel compared to a socketChannel, because it is causing some errors where it eventually stops running entirely and blocks","body":"I did as the link stated, and removed the READ from the key&#39;s interestOps before passing it to a separate thread. I think this is not the case for DatagramChannel compared to a socketChannel, because it is causing some errors where it eventually stops running entirely and blocks"}],"owner":{"account_id":27925481,"reputation":175,"user_id":21324690,"display_name":"chunkynuggy"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1681119251,"creation_date":1680947434,"question_id":75964509,"body_markdown":"I m reading how Selector can multiplex multiple channels and do I/O operations whenever the channels are ready to be processed. Many online tutorials/resources uses something similar where they sequentially read each key, then process it.\r\n\r\n                Set&lt;SelectionKey&gt; selectedKeys = selector.selectedKeys();\r\n                Iterator&lt;SelectionKey&gt; iter = selectedKeys.iterator();\r\n                while (iter.hasNext()) {\r\n                    SelectionKey key = iter.next();\r\n                    if (key.isReadable()) {\r\n                        //processKey(key);\r\n                    }\r\n                    iter.remove();\r\n                }\r\n\r\nI m thinking that while Key 1 is being processed, all the keys (the sockets it represents) will still receive more incoming packets\r\n\r\n    Key 1 : [packet] [packet] [packet] [packet]\r\n    .\r\n    .\r\n    .\r\n    Key N : [packet] [packet] [packet] [packet]\r\n\r\nSo, if all channels receive 1 packets while key 1 has just processed 1 packets in the same time, wouldnt some channels have lost packets?\r\n\r\n    Key 1 :  [packet] [packet] [packet] [newPacket] \r\n    .\r\n    .\r\n    .\r\n    Key N : [packet] [packet] [packet] [packet] [newPacket] \r\n\r\nprocessing key 2\r\n\r\n    Key 1 : [packet] [packet] [packet] [newPacket] [newPacket] \r\n    .\r\n    .\r\n    .\r\n    Key N : [packet] [packet] [packet] [packet] [newPacket] [newPacket] \r\n\r\nprocessing key 3\r\n\r\n    Key 1 : [packet] [packet] [packet] [newPacket] [newPacket] {packet lost socket receive buffer full}\r\n    .\r\n    .\r\n    .\r\n    Key N : [packet] [packet] [packet] [packet] [newPacket] [newPacket] {packet lost socket receive buffer full}\r\n\r\nShould each key be passed to a queue (then some other thread can poll for it) so that all keys can be processed in a multithreaded manner? What is an &quot;optimal&quot; number of channels I can register to a selector?\r\n","title":"NIO SelectionKey processing should it be single or multi threaded?","body":"<p>I m reading how Selector can multiplex multiple channels and do I/O operations whenever the channels are ready to be processed. Many online tutorials/resources uses something similar where they sequentially read each key, then process it.</p>\n<pre><code>            Set&lt;SelectionKey&gt; selectedKeys = selector.selectedKeys();\n            Iterator&lt;SelectionKey&gt; iter = selectedKeys.iterator();\n            while (iter.hasNext()) {\n                SelectionKey key = iter.next();\n                if (key.isReadable()) {\n                    //processKey(key);\n                }\n                iter.remove();\n            }\n</code></pre>\n<p>I m thinking that while Key 1 is being processed, all the keys (the sockets it represents) will still receive more incoming packets</p>\n<pre><code>Key 1 : [packet] [packet] [packet] [packet]\n.\n.\n.\nKey N : [packet] [packet] [packet] [packet]\n</code></pre>\n<p>So, if all channels receive 1 packets while key 1 has just processed 1 packets in the same time, wouldnt some channels have lost packets?</p>\n<pre><code>Key 1 :  [packet] [packet] [packet] [newPacket] \n.\n.\n.\nKey N : [packet] [packet] [packet] [packet] [newPacket] \n</code></pre>\n<p>processing key 2</p>\n<pre><code>Key 1 : [packet] [packet] [packet] [newPacket] [newPacket] \n.\n.\n.\nKey N : [packet] [packet] [packet] [packet] [newPacket] [newPacket] \n</code></pre>\n<p>processing key 3</p>\n<pre><code>Key 1 : [packet] [packet] [packet] [newPacket] [newPacket] {packet lost socket receive buffer full}\n.\n.\n.\nKey N : [packet] [packet] [packet] [packet] [newPacket] [newPacket] {packet lost socket receive buffer full}\n</code></pre>\n<p>Should each key be passed to a queue (then some other thread can poll for it) so that all keys can be processed in a multithreaded manner? What is an &quot;optimal&quot; number of channels I can register to a selector?</p>\n"},{"tags":["java","terminal","azul-zulu"],"answers":[{"comments":[{"owner":{"account_id":468289,"reputation":178225,"user_id":874188,"accept_rate":62,"display_name":"tripleee"},"score":1,"creation_date":1659605396,"post_id":69508614,"comment_id":129335994,"body_markdown":"To somewhat expand on this, `apt` is a package manager which was developed for Debian and which is also available on derived platforms like Mint and Ubuntu. MacOS is very much not one of them, but ships an unrelated utility with the same name. It doesn&#39;t come with a man page, but appears to be a copy of `/usr/libexec/java_home` which is a [utility for listing your JVMs.](https://github.com/kendfinger/MacHack/blob/main/README.md#java_home)","body":"To somewhat expand on this, <code>apt</code> is a package manager which was developed for Debian and which is also available on derived platforms like Mint and Ubuntu. MacOS is very much not one of them, but ships an unrelated utility with the same name. It doesn&#39;t come with a man page, but appears to be a copy of <code>&#47;usr&#47;libexec&#47;java_home</code> which is a <a href=\"https://github.com/kendfinger/MacHack/blob/main/README.md#java_home\" rel=\"nofollow noreferrer\">utility for listing your JVMs.</a>"}],"tags":[],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":1,"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1660333923,"creation_date":1633796638,"answer_id":69508614,"question_id":69508381,"body_markdown":"# APT is for Linux\r\n\r\n[*APT*](https://en.wikipedia.org/wiki/APT_(software)) is for [Linux][1], not [macOS][2]. Similarly, [BSD][3] has their own tools in [*Packages and Ports*][4]. \r\n\r\n# *Homebrew*\r\n\r\nYou can add a similar package-management tool to macOS developed by a third party: [*Homebrew*](https://en.wikipedia.org/wiki/Homebrew_(package_manager)). \r\n\r\nI have not used Homebrew myself, but some folks are big fans. \r\n\r\nFor only installing JDKs, I would consider this tool to be overkill, and would recommend  SDKMAN or manual installers as discussed further down. But if you might want to install other kinds of software besides just JDKs in this manner, then consider Homebrew.\r\n\r\nHere is a question that gives instructions for how to install Java from Homebrew on macOS: https://stackoverflow.com/questions/65601196/how-to-brew-install-java/70786302#70786302 \r\n\r\n# SDKMAN \r\n\r\n[SDKMAN][5] is a tool rapidly growing in popularity. As a collection of shell scripts, SDKMAN works across any Unix-oriented host OSes including macOS, BSD, Linux, and more. \r\n\r\nSDKMAN works to manage the downloading, installing, and setting as default any of the many JDK offerings from a variety of vendors. This command-line tool has a simple well-defined API. \r\n\r\nI only recently decided to avail myself of this tool. I expect this to be my new preferred way to manage my JDKs on my Macs and BSD servers. \r\n\r\n# IDEs\r\n\r\nSome [IDE][6]s such as [*IntelliJ*][7] have a feature for downloading and installing a [JDK][8]. This is for the convenience of the Java programmer. \r\n\r\n# Manual installers\r\n\r\nTo install Java, I use an installer app for macOS from [Adoptium][9] or [Azul Systems][10], or from any of the several other vendors providing distributions of Java such as BellSoft, Amazon, Microsoft, Oracle, SAP, Red Hat/IBM, Pivotal, etc. \r\n\r\nTo update I simply:\r\n\r\n - Delete the existing [JDK][8] found in `/Library/Java/JavaVirtualMachines`. \r\n - Run a freshly-downloaded installer.\r\n\r\nThis approach is a manual operation. And this requires the Mac’s admin password. \r\n\r\nSo for mass updates across many computers I can imagine that shell-scripting with SDKMAN would be a better solution. Also, some JDK vendors are releasing installers that can be controlled by a shell script. \r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Linux\r\n  [2]: https://en.wikipedia.org/wiki/MacOS\r\n  [3]: https://en.wikipedia.org/wiki/Berkeley_Software_Distribution\r\n  [4]: https://docs.freebsd.org/en/books/handbook/ports/\r\n  [5]: https://sdkman.io/\r\n  [6]: https://en.wikipedia.org/wiki/Integrated_development_environment\r\n  [7]: https://en.wikipedia.org/wiki/IntelliJ_IDEA\r\n  [8]: https://en.wikipedia.org/wiki/Java_Development_Kit\r\n  [9]: https://adoptium.net/\r\n  [10]: https://en.wikipedia.org/wiki/Azul_Systems","title":"The operation couldn’t be completed. Unable to locate a Java Runtime that supports apt","body":"<h1>APT is for Linux</h1>\n<p><a href=\"https://en.wikipedia.org/wiki/APT_(software)\" rel=\"nofollow noreferrer\"><em>APT</em></a> is for <a href=\"https://en.wikipedia.org/wiki/Linux\" rel=\"nofollow noreferrer\">Linux</a>, not <a href=\"https://en.wikipedia.org/wiki/MacOS\" rel=\"nofollow noreferrer\">macOS</a>. Similarly, <a href=\"https://en.wikipedia.org/wiki/Berkeley_Software_Distribution\" rel=\"nofollow noreferrer\">BSD</a> has their own tools in <a href=\"https://docs.freebsd.org/en/books/handbook/ports/\" rel=\"nofollow noreferrer\"><em>Packages and Ports</em></a>.</p>\n<h1><em>Homebrew</em></h1>\n<p>You can add a similar package-management tool to macOS developed by a third party: <a href=\"https://en.wikipedia.org/wiki/Homebrew_(package_manager)\" rel=\"nofollow noreferrer\"><em>Homebrew</em></a>.</p>\n<p>I have not used Homebrew myself, but some folks are big fans.</p>\n<p>For only installing JDKs, I would consider this tool to be overkill, and would recommend  SDKMAN or manual installers as discussed further down. But if you might want to install other kinds of software besides just JDKs in this manner, then consider Homebrew.</p>\n<p>Here is a question that gives instructions for how to install Java from Homebrew on macOS: <a href=\"https://stackoverflow.com/questions/65601196/how-to-brew-install-java/70786302#70786302\">How to brew install java?</a></p>\n<h1>SDKMAN</h1>\n<p><a href=\"https://sdkman.io/\" rel=\"nofollow noreferrer\">SDKMAN</a> is a tool rapidly growing in popularity. As a collection of shell scripts, SDKMAN works across any Unix-oriented host OSes including macOS, BSD, Linux, and more.</p>\n<p>SDKMAN works to manage the downloading, installing, and setting as default any of the many JDK offerings from a variety of vendors. This command-line tool has a simple well-defined API.</p>\n<p>I only recently decided to avail myself of this tool. I expect this to be my new preferred way to manage my JDKs on my Macs and BSD servers.</p>\n<h1>IDEs</h1>\n<p>Some <a href=\"https://en.wikipedia.org/wiki/Integrated_development_environment\" rel=\"nofollow noreferrer\">IDE</a>s such as <a href=\"https://en.wikipedia.org/wiki/IntelliJ_IDEA\" rel=\"nofollow noreferrer\"><em>IntelliJ</em></a> have a feature for downloading and installing a <a href=\"https://en.wikipedia.org/wiki/Java_Development_Kit\" rel=\"nofollow noreferrer\">JDK</a>. This is for the convenience of the Java programmer.</p>\n<h1>Manual installers</h1>\n<p>To install Java, I use an installer app for macOS from <a href=\"https://adoptium.net/\" rel=\"nofollow noreferrer\">Adoptium</a> or <a href=\"https://en.wikipedia.org/wiki/Azul_Systems\" rel=\"nofollow noreferrer\">Azul Systems</a>, or from any of the several other vendors providing distributions of Java such as BellSoft, Amazon, Microsoft, Oracle, SAP, Red Hat/IBM, Pivotal, etc.</p>\n<p>To update I simply:</p>\n<ul>\n<li>Delete the existing <a href=\"https://en.wikipedia.org/wiki/Java_Development_Kit\" rel=\"nofollow noreferrer\">JDK</a> found in <code>/Library/Java/JavaVirtualMachines</code>.</li>\n<li>Run a freshly-downloaded installer.</li>\n</ul>\n<p>This approach is a manual operation. And this requires the Mac’s admin password.</p>\n<p>So for mass updates across many computers I can imagine that shell-scripting with SDKMAN would be a better solution. Also, some JDK vendors are releasing installers that can be controlled by a shell script.</p>\n"}],"owner":{"account_id":22672248,"reputation":289,"user_id":16843823,"display_name":"ktakehi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":32479,"favorite_count":0,"down_vote_count":1,"up_vote_count":13,"accepted_answer_id":69508614,"answer_count":1,"score":12,"last_activity_date":1681119021,"creation_date":1633794957,"question_id":69508381,"body_markdown":"I am using M1 Mac OS11.5.2.  \r\nI&#39;ve already downloaded zulu.jdk and zulu.jre, in &quot;/Library/Java/JavaVirtualMachines&quot;.  \r\nI also exported the PATH.\r\n```\r\necho export &quot;JAVA_HOME=\\$(/usr/libexec/java_home)&quot; &gt;&gt; ~/.bash_profile\r\n```\r\nWhen I type\r\n```\r\nsudo apt update\r\n```\r\nI get this:\r\n\r\n&gt; The operation couldn’t be completed. Unable to locate a Java Runtime that supports apt.  \r\n&gt; Please visit http://www.java.com for information on installing Java.\r\n\r\nI hope some kind person could tell me the solution.","title":"The operation couldn’t be completed. Unable to locate a Java Runtime that supports apt","body":"<p>I am using M1 Mac OS11.5.2.<br />\nI've already downloaded zulu.jdk and zulu.jre, in &quot;/Library/Java/JavaVirtualMachines&quot;.<br />\nI also exported the PATH.</p>\n<pre><code>echo export &quot;JAVA_HOME=\\$(/usr/libexec/java_home)&quot; &gt;&gt; ~/.bash_profile\n</code></pre>\n<p>When I type</p>\n<pre><code>sudo apt update\n</code></pre>\n<p>I get this:</p>\n<blockquote>\n<p>The operation couldn’t be completed. Unable to locate a Java Runtime that supports apt.<br />\nPlease visit <a href=\"http://www.java.com\" rel=\"noreferrer\">http://www.java.com</a> for information on installing Java.</p>\n</blockquote>\n<p>I hope some kind person could tell me the solution.</p>\n"},{"tags":["java","multithreading","wait"],"answers":[{"tags":[],"owner":{"account_id":1296974,"reputation":28447,"user_id":1247781,"accept_rate":100,"display_name":"FThompson"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1430110407,"creation_date":1430110407,"answer_id":29887452,"question_id":29887395,"body_markdown":"From [the Javadocs][1]:\r\n\r\n&gt;  If `timeout` is zero, however, then real time is not taken into consideration and the thread simply waits until notified.\r\n\r\nIf your goal is to avoid waiting when your `wait` value is zero, you can add a condition:\r\n\r\n    if (wait &gt; 0) {\r\n        synchronized (monitor) {\r\n            try {\r\n                monitor.wait(wait);\r\n            } catch (InterruptedException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    }\r\n\r\n  [1]: http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait-long-","title":"Object.wait(0) waits forever","body":"<p>From <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait-long-\" rel=\"noreferrer\">the Javadocs</a>:</p>\n\n<blockquote>\n  <p>If <code>timeout</code> is zero, however, then real time is not taken into consideration and the thread simply waits until notified.</p>\n</blockquote>\n\n<p>If your goal is to avoid waiting when your <code>wait</code> value is zero, you can add a condition:</p>\n\n<pre><code>if (wait &gt; 0) {\n    synchronized (monitor) {\n        try {\n            monitor.wait(wait);\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8326,"reputation":258555,"user_id":14955,"accept_rate":55,"display_name":"Thilo"},"comment_count":0,"down_vote_count":0,"up_vote_count":17,"is_accepted":true,"score":17,"last_activity_date":1430110415,"creation_date":1430110415,"answer_id":29887453,"question_id":29887395,"body_markdown":"The [Javadocs say][1]:\r\n\r\n&gt;  If timeout is zero, however, then real time is not taken into consideration and the thread simply waits until notified. \r\n\r\nSo specifying `wait(0)` means wait indefinitely.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait-long-","title":"Object.wait(0) waits forever","body":"<p>The <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait-long-\">Javadocs say</a>:</p>\n\n<blockquote>\n  <p>If timeout is zero, however, then real time is not taken into consideration and the thread simply waits until notified. </p>\n</blockquote>\n\n<p>So specifying <code>wait(0)</code> means wait indefinitely.</p>\n"},{"tags":[],"owner":{"account_id":4303549,"reputation":79,"user_id":3516616,"display_name":"Janitha"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1430116113,"creation_date":1430116113,"answer_id":29888658,"question_id":29887395,"body_markdown":"    Object.wait(0);\r\n\r\nwill simply make it wait forever. So you can embed your code inside an `if` condition,\r\n\r\n    if(wait&gt;0)\r\n    {\r\n    //your code\r\n    }","title":"Object.wait(0) waits forever","body":"<pre><code>Object.wait(0);\n</code></pre>\n\n<p>will simply make it wait forever. So you can embed your code inside an <code>if</code> condition,</p>\n\n<pre><code>if(wait&gt;0)\n{\n//your code\n}\n</code></pre>\n"}],"owner":{"account_id":82956,"reputation":3291,"user_id":232899,"accept_rate":75,"display_name":"Ravisha"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5098,"favorite_count":0,"down_vote_count":4,"up_vote_count":5,"accepted_answer_id":29887453,"answer_count":3,"score":1,"last_activity_date":1681119013,"creation_date":1430110056,"question_id":29887395,"body_markdown":"I have below piece of code, where the wait time is calculated elsewhere.  \r\nIn some of the situations the wait time value is 0. What I notice is that when the wait time is zero the thread seem to wait forever. I could not find anything specific to this case in the Javadoc. I could just add a check for this, but I just need to understand why this is happening and is it allowed to pass 0 wait time \r\n\r\n    synchronized (monitor) {\r\n    \ttry {\r\n    \t\tmonitor.wait(wait); // &lt;-- sometime 0\r\n    \t} catch (InterruptedException e) {\r\n    \t\te.printStackTrace();\r\n    \t}\r\n    }","title":"Object.wait(0) waits forever","body":"<p>I have below piece of code, where the wait time is calculated elsewhere.<br />\nIn some of the situations the wait time value is 0. What I notice is that when the wait time is zero the thread seem to wait forever. I could not find anything specific to this case in the Javadoc. I could just add a check for this, but I just need to understand why this is happening and is it allowed to pass 0 wait time</p>\n<pre><code>synchronized (monitor) {\n    try {\n        monitor.wait(wait); // &lt;-- sometime 0\n    } catch (InterruptedException e) {\n        e.printStackTrace();\n    }\n}\n</code></pre>\n"},{"tags":["java","arrays","xml","jackson"],"answers":[{"comments":[{"owner":{"account_id":23926861,"reputation":1,"user_id":17921872,"display_name":"EverSpring"},"score":0,"creation_date":1681008055,"post_id":75964847,"comment_id":133989489,"body_markdown":"Thank you for your answer, I cannot specify the creation of an Entity object because the content received here is variable. Entity maybe is\n&lt;ENTITY&gt; \n    &lt;COUNTRY&gt;U.S&lt;/COUNTRY&gt; \n    &lt;ADDRESS&gt;Nottingham&lt;/ADDRESS&gt;\n&lt;/ENTITY&gt;","body":"Thank you for your answer, I cannot specify the creation of an Entity object because the content received here is variable. Entity maybe is &lt;ENTITY&gt;      &lt;COUNTRY&gt;U.S&lt;/COUNTRY&gt;      &lt;ADDRESS&gt;Nottingham&lt;/ADDRESS&gt; &lt;/ENTITY&gt;"},{"owner":{"account_id":16211352,"reputation":4324,"user_id":11713777,"display_name":"dariosicily"},"score":0,"creation_date":1681026148,"post_id":75964847,"comment_id":133990718,"body_markdown":"@EverSpring You are welcome,  if you have different types probably you have to define one subclass for one type, try to experiment the different scenarios starting from the code I posted.","body":"@EverSpring You are welcome,  if you have different types probably you have to define one subclass for one type, try to experiment the different scenarios starting from the code I posted."},{"owner":{"account_id":23926861,"reputation":1,"user_id":17921872,"display_name":"EverSpring"},"score":0,"creation_date":1681027019,"post_id":75964847,"comment_id":133990803,"body_markdown":"I have solved the problem. In the jackson-databind github, issue 2732 , the author resolve. Here is my solution:  Upgrade jackson-databind to version 2.12.0","body":"I have solved the problem. In the jackson-databind github, issue 2732 , the author resolve. Here is my solution:  Upgrade jackson-databind to version 2.12.0"}],"tags":[],"owner":{"account_id":16211352,"reputation":4324,"user_id":11713777,"display_name":"dariosicily"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681118890,"creation_date":1680951897,"answer_id":75964847,"question_id":75964207,"body_markdown":"For lists there is the specific [`JacksonXmlElementWrapper`](http://fasterxml.github.io/jackson-dataformat-xml/javadoc/2.14/com/fasterxml/jackson/dataformat/xml/annotation/JacksonXmlElementWrapper.html) annotation that must be used with the [`JacksonXmlProperty`](http://fasterxml.github.io/jackson-dataformat-xml/javadoc/2.14/com/fasterxml/jackson/dataformat/xml/annotation/JacksonXmlProperty.html#localName--) indicating the wrapper list tag; focusing on the xml structure you want to deserialize the xml structure below to a list:\r\n\r\n~~~\r\n&lt;ENTITY&gt; \r\n    &lt;USER_NAME&gt;xcc&lt;/USER_NAME&gt; \r\n    &lt;COMPANYS&gt;\r\n        &lt;COMPANY&gt;\r\n            &lt;COMPANYNAME&gt;NAME-1&lt;/COMPANYNAME&gt;\r\n        &lt;/COMPANY&gt;\r\n        &lt;COMPANY&gt;\r\n            &lt;COMPANYNAME&gt;NAME-2&lt;/COMPANYNAME&gt;\r\n        &lt;/COMPANY&gt;\r\n   &lt;/COMPANYS&gt;\r\n&lt;/ENTITY&gt; \r\n~~~\r\n\r\nThis structure can be converted to an `Entity` class containing a `Companies` class field containg a `List&lt;Company&gt;` field like below:\r\n\r\n~~~\r\n@Data\r\n@JsonIgnoreProperties(ignoreUnknown = true) //&lt;-- up to you insert other properties\r\n@JacksonXmlRootElement(localName = &quot;TX&quot;)\r\npublic class ServiceBusReq {\r\n\r\n    @JacksonXmlProperty(localName = &quot;ENTITY&quot;)\r\n    private Entity entity;\r\n}\r\n\r\n@Data\r\npublic class Entity {\r\n\r\n    @JacksonXmlProperty(localName = &quot;USER_NAME&quot;)\r\n    private String username;\r\n    @JacksonXmlProperty(localName = &quot;COMPANYS&quot;) \r\n    private Companies companies;\r\n}\r\n\r\n@Data\r\npublic class Companies {\r\n\r\n    @JacksonXmlProperty(localName = &quot;COMPANY&quot;)\r\n    @JacksonXmlElementWrapper(useWrapping = false)\r\n    private List&lt;Company&gt; companies;\r\n}\r\n\r\n@Data\r\npublic class Company {\r\n\r\n    @JacksonXmlProperty(localName = &quot;COMPANYNAME&quot;)\r\n    private String companyName;\r\n}\r\n~~~","title":"Jackson XML deserialize to ObjectNode, cannot get array value","body":"<p>For lists there is the specific <a href=\"http://fasterxml.github.io/jackson-dataformat-xml/javadoc/2.14/com/fasterxml/jackson/dataformat/xml/annotation/JacksonXmlElementWrapper.html\" rel=\"nofollow noreferrer\"><code>JacksonXmlElementWrapper</code></a> annotation that must be used with the <a href=\"http://fasterxml.github.io/jackson-dataformat-xml/javadoc/2.14/com/fasterxml/jackson/dataformat/xml/annotation/JacksonXmlProperty.html#localName--\" rel=\"nofollow noreferrer\"><code>JacksonXmlProperty</code></a> indicating the wrapper list tag; focusing on the xml structure you want to deserialize the xml structure below to a list:</p>\n<pre><code>&lt;ENTITY&gt; \n    &lt;USER_NAME&gt;xcc&lt;/USER_NAME&gt; \n    &lt;COMPANYS&gt;\n        &lt;COMPANY&gt;\n            &lt;COMPANYNAME&gt;NAME-1&lt;/COMPANYNAME&gt;\n        &lt;/COMPANY&gt;\n        &lt;COMPANY&gt;\n            &lt;COMPANYNAME&gt;NAME-2&lt;/COMPANYNAME&gt;\n        &lt;/COMPANY&gt;\n   &lt;/COMPANYS&gt;\n&lt;/ENTITY&gt; \n</code></pre>\n<p>This structure can be converted to an <code>Entity</code> class containing a <code>Companies</code> class field containg a <code>List&lt;Company&gt;</code> field like below:</p>\n<pre><code>@Data\n@JsonIgnoreProperties(ignoreUnknown = true) //&lt;-- up to you insert other properties\n@JacksonXmlRootElement(localName = &quot;TX&quot;)\npublic class ServiceBusReq {\n\n    @JacksonXmlProperty(localName = &quot;ENTITY&quot;)\n    private Entity entity;\n}\n\n@Data\npublic class Entity {\n\n    @JacksonXmlProperty(localName = &quot;USER_NAME&quot;)\n    private String username;\n    @JacksonXmlProperty(localName = &quot;COMPANYS&quot;) \n    private Companies companies;\n}\n\n@Data\npublic class Companies {\n\n    @JacksonXmlProperty(localName = &quot;COMPANY&quot;)\n    @JacksonXmlElementWrapper(useWrapping = false)\n    private List&lt;Company&gt; companies;\n}\n\n@Data\npublic class Company {\n\n    @JacksonXmlProperty(localName = &quot;COMPANYNAME&quot;)\n    private String companyName;\n}\n</code></pre>\n"}],"owner":{"account_id":23926861,"reputation":1,"user_id":17921872,"display_name":"EverSpring"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":139,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681118890,"creation_date":1680943359,"question_id":75964207,"body_markdown":"When I use jackson deserialization xml, xml has node is array, java bean has attribute is ObjectNode, ObjectNode cannot get array value,Here is the sample code\r\njackson version: 2.10.5\r\n\r\njava bean:\r\n```\r\nimport com.fasterxml.jackson.databind.node.ObjectNode;\r\nimport com.fasterxml.jackson.dataformat.xml.annotation.JacksonXmlProperty;\r\nimport com.fasterxml.jackson.dataformat.xml.annotation.JacksonXmlRootElement;\r\nimport lombok.Data;\r\n\r\n@Data\r\n@JacksonXmlRootElement(localName = &quot;TX&quot;)\r\npublic class ServiceBusReq&lt;T&gt; {\r\n\r\n\t@JacksonXmlProperty(localName = &quot;TX_HEADER&quot;)\r\n\tprivate ServiceBusHeaderReq txHeader;\r\n\t\r\n\t@JacksonXmlProperty(localName = &quot;TX_EMB&quot;)\r\n\tprivate String txEmb;\r\n\r\n    /**\r\n     **Notice:** I cannot specify the creation of an Entity object because the content received here is variable\r\n     */    \r\n    @JacksonXmlProperty(localName = &quot;ENTITY&quot;)\r\n\tprivate ObjectNode entity;\r\n\r\n\tprivate T msgObject;\r\n}\r\n```\r\n\r\nXML content:\r\n```\r\n&lt;TX&gt; \r\n  &lt;TX_HEADER&gt; \r\n    &lt;SYS_HDR_LEN/&gt;  \r\n    &lt;SYS_PKG_VRSN&gt;01&lt;/SYS_PKG_VRSN&gt;  \r\n    &lt;SYS_TTL_LEN/&gt;  \r\n    &lt;SYS_REQ_SEC_ID&gt;402205&lt;/SYS_REQ_SEC_ID&gt;  \r\n    &lt;SYS_SND_SEC_ID&gt;402205&lt;/SYS_SND_SEC_ID&gt; \r\n  &lt;/TX_HEADER&gt; \r\n  &lt;TX_EMB/&gt;  \r\n  &lt;ENTITY&gt; \r\n    &lt;USER_NAME&gt;xcc&lt;/USER_NAME&gt; \r\n    &lt;COMPANYS&gt;\r\n\t\t&lt;COMPANY&gt;\r\n\t\t\t&lt;COMPANYNAME&gt;NAME-1&lt;/COMPANYNAME&gt;\r\n\t\t&lt;/COMPANY&gt;\r\n\t\t&lt;COMPANY&gt;\r\n\t\t\t&lt;COMPANYNAME&gt;NAME-2&lt;/COMPANYNAME&gt;\r\n\t\t&lt;/COMPANY&gt;\r\n&lt;/COMPANYS&gt;\r\n  &lt;/ENTITY&gt; \r\n&lt;/TX&gt;\r\n```\r\n\r\nmain :\r\n```\r\nXmlMapper xmlMapper = XmlMapper.xmlBuilder().build();\r\nServiceBusReq serviceBusReq = xmlMapper.readValue(xml, ServiceBusReq.class);\r\nSystem.out.println(serviceBusReq);\r\n```\r\n\r\nresult:\r\n```\r\nServiceBusReq(txHeader=ServiceBusHeaderReq(sysHdrLen=null, sysPkgVrsn=01, sysTtlLen=null, sysReqSecId=402205, sysSndSecId=402205, sysTxCode=null, sysTxVrsn=null, sysTxType=null, sysReserved=null, sysEvtTraceId=null, sysSndSerialNo=null, sysPkgType=null, sysMsgLen=null, sysIsEncrypted=null, sysEncryptType=null, sysCompressType=null, sysEmbMsgLen=null, sysReqTime=null, sysTimeLeft=null, sysPkgStsType=null), txBody=null, txEmb=null, entity={&quot;USER_NAME&quot;:&quot;xcc&quot;,&quot;COMPANYS&quot;:{&quot;COMPANY&quot;:{&quot;COMPANYNAME&quot;:&quot;NAME-2&quot;}}}, msgObject=null)\r\n```\r\n\r\n\r\n\r\n\r\nThe reason I use ObjectNode instead of classes is because classes are uncertain. I want COMPANYS to get an array,who can help me,Thank you!  if not use ObjectNode, what can use","title":"Jackson XML deserialize to ObjectNode, cannot get array value","body":"<p>When I use jackson deserialization xml, xml has node is array, java bean has attribute is ObjectNode, ObjectNode cannot get array value,Here is the sample code\njackson version: 2.10.5</p>\n<p>java bean:</p>\n<pre><code>import com.fasterxml.jackson.databind.node.ObjectNode;\nimport com.fasterxml.jackson.dataformat.xml.annotation.JacksonXmlProperty;\nimport com.fasterxml.jackson.dataformat.xml.annotation.JacksonXmlRootElement;\nimport lombok.Data;\n\n@Data\n@JacksonXmlRootElement(localName = &quot;TX&quot;)\npublic class ServiceBusReq&lt;T&gt; {\n\n    @JacksonXmlProperty(localName = &quot;TX_HEADER&quot;)\n    private ServiceBusHeaderReq txHeader;\n    \n    @JacksonXmlProperty(localName = &quot;TX_EMB&quot;)\n    private String txEmb;\n\n    /**\n     **Notice:** I cannot specify the creation of an Entity object because the content received here is variable\n     */    \n    @JacksonXmlProperty(localName = &quot;ENTITY&quot;)\n    private ObjectNode entity;\n\n    private T msgObject;\n}\n</code></pre>\n<p>XML content:</p>\n<pre><code>&lt;TX&gt; \n  &lt;TX_HEADER&gt; \n    &lt;SYS_HDR_LEN/&gt;  \n    &lt;SYS_PKG_VRSN&gt;01&lt;/SYS_PKG_VRSN&gt;  \n    &lt;SYS_TTL_LEN/&gt;  \n    &lt;SYS_REQ_SEC_ID&gt;402205&lt;/SYS_REQ_SEC_ID&gt;  \n    &lt;SYS_SND_SEC_ID&gt;402205&lt;/SYS_SND_SEC_ID&gt; \n  &lt;/TX_HEADER&gt; \n  &lt;TX_EMB/&gt;  \n  &lt;ENTITY&gt; \n    &lt;USER_NAME&gt;xcc&lt;/USER_NAME&gt; \n    &lt;COMPANYS&gt;\n        &lt;COMPANY&gt;\n            &lt;COMPANYNAME&gt;NAME-1&lt;/COMPANYNAME&gt;\n        &lt;/COMPANY&gt;\n        &lt;COMPANY&gt;\n            &lt;COMPANYNAME&gt;NAME-2&lt;/COMPANYNAME&gt;\n        &lt;/COMPANY&gt;\n&lt;/COMPANYS&gt;\n  &lt;/ENTITY&gt; \n&lt;/TX&gt;\n</code></pre>\n<p>main :</p>\n<pre><code>XmlMapper xmlMapper = XmlMapper.xmlBuilder().build();\nServiceBusReq serviceBusReq = xmlMapper.readValue(xml, ServiceBusReq.class);\nSystem.out.println(serviceBusReq);\n</code></pre>\n<p>result:</p>\n<pre><code>ServiceBusReq(txHeader=ServiceBusHeaderReq(sysHdrLen=null, sysPkgVrsn=01, sysTtlLen=null, sysReqSecId=402205, sysSndSecId=402205, sysTxCode=null, sysTxVrsn=null, sysTxType=null, sysReserved=null, sysEvtTraceId=null, sysSndSerialNo=null, sysPkgType=null, sysMsgLen=null, sysIsEncrypted=null, sysEncryptType=null, sysCompressType=null, sysEmbMsgLen=null, sysReqTime=null, sysTimeLeft=null, sysPkgStsType=null), txBody=null, txEmb=null, entity={&quot;USER_NAME&quot;:&quot;xcc&quot;,&quot;COMPANYS&quot;:{&quot;COMPANY&quot;:{&quot;COMPANYNAME&quot;:&quot;NAME-2&quot;}}}, msgObject=null)\n</code></pre>\n<p>The reason I use ObjectNode instead of classes is because classes are uncertain. I want COMPANYS to get an array,who can help me,Thank you!  if not use ObjectNode, what can use</p>\n"},{"tags":["java","html","css","spring","spring-boot"],"answers":[{"comments":[{"owner":{"account_id":21932089,"reputation":160,"user_id":16213900,"display_name":"covenant"},"score":0,"creation_date":1681082625,"post_id":75973340,"comment_id":133997317,"body_markdown":"You mean like this sir?\nbackground-image: url(/background.jpg);\nThat didn&#39;t work either.","body":"You mean like this sir? background-image: url(/background.jpg); That didn&#39;t work either."},{"owner":{"account_id":2203408,"reputation":5012,"user_id":1947216,"display_name":"mentallurg"},"score":0,"creation_date":1681092265,"post_id":75973340,"comment_id":133998120,"body_markdown":"Now you use wrong syntax. It should be `url(&quot;background.jpg&quot;);`.","body":"Now you use wrong syntax. It should be <code>url(&quot;background.jpg&quot;);</code>."},{"owner":{"account_id":21932089,"reputation":160,"user_id":16213900,"display_name":"covenant"},"score":0,"creation_date":1681114698,"post_id":75973340,"comment_id":134000304,"body_markdown":"Unfortunately sir, that did not work too.","body":"Unfortunately sir, that did not work too."},{"owner":{"account_id":21932089,"reputation":160,"user_id":16213900,"display_name":"covenant"},"score":0,"creation_date":1681117846,"post_id":75973340,"comment_id":134000770,"body_markdown":"I solved it sir. I guess it was because i&#39;m using Spring Security. I posted an answer, can you check it?","body":"I solved it sir. I guess it was because i&#39;m using Spring Security. I posted an answer, can you check it?"},{"owner":{"account_id":2203408,"reputation":5012,"user_id":1947216,"display_name":"mentallurg"},"score":1,"creation_date":1681130091,"post_id":75973340,"comment_id":134002823,"body_markdown":"@covenant: It was not only because of security. You used &quot;/static&quot; in the path and that was not correct. &quot;/static&quot; is mapped to the root, &quot;/&quot;, and should not be present in the path. Now you correctly removed it from the path.","body":"@covenant: It was not only because of security. You used &quot;/static&quot; in the path and that was not correct. &quot;/static&quot; is mapped to the root, &quot;/&quot;, and should not be present in the path. Now you correctly removed it from the path."}],"tags":[],"owner":{"account_id":2203408,"reputation":5012,"user_id":1947216,"display_name":"mentallurg"},"comment_count":5,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681082106,"creation_date":1681082106,"answer_id":75973340,"question_id":75973287,"body_markdown":"Resources in `resources/static` are mapped to the root, `/`. Templates are also mapped to the root, `/`. That&#39;s why the reference in the template should be `background.jpg`.\r\n","title":"CSS background-image not working with Spring Boot application","body":"<p>Resources in <code>resources/static</code> are mapped to the root, <code>/</code>. Templates are also mapped to the root, <code>/</code>. That's why the reference in the template should be <code>background.jpg</code>.</p>\n"},{"tags":[],"owner":{"account_id":21932089,"reputation":160,"user_id":16213900,"display_name":"covenant"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1681117767,"creation_date":1681117767,"answer_id":75975743,"question_id":75973287,"body_markdown":"For those who struggle with this, if you are using Spring Security dependency, give permission to your files like this:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nThen put your image under the static/img folder like this:\r\n\r\n[![enter image description here][2]][2]\r\n\r\nPut the CSS into your CSS file:\r\n\r\n    body {\r\n        background-image: url(../img/background.jpg);\r\n        background-repeat: no-repeat;\r\n        background-size: cover;\r\n    }\r\n\r\nLastly, add CSS link to your HTML file:\r\n\r\n    &lt;link rel=&quot;stylesheet&quot; th:href=&quot;@{/css/register.css}&quot;&gt;\r\n\r\nHope this helps to someone!\r\n\r\n  [1]: https://i.stack.imgur.com/jlJff.png\r\n  [2]: https://i.stack.imgur.com/xV6Ml.png","title":"CSS background-image not working with Spring Boot application","body":"<p>For those who struggle with this, if you are using Spring Security dependency, give permission to your files like this:</p>\n<p><a href=\"https://i.stack.imgur.com/jlJff.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jlJff.png\" alt=\"enter image description here\" /></a></p>\n<p>Then put your image under the static/img folder like this:</p>\n<p><a href=\"https://i.stack.imgur.com/xV6Ml.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xV6Ml.png\" alt=\"enter image description here\" /></a></p>\n<p>Put the CSS into your CSS file:</p>\n<pre><code>body {\n    background-image: url(../img/background.jpg);\n    background-repeat: no-repeat;\n    background-size: cover;\n}\n</code></pre>\n<p>Lastly, add CSS link to your HTML file:</p>\n<pre><code>&lt;link rel=&quot;stylesheet&quot; th:href=&quot;@{/css/register.css}&quot;&gt;\n</code></pre>\n<p>Hope this helps to someone!</p>\n"}],"owner":{"account_id":21932089,"reputation":160,"user_id":16213900,"display_name":"covenant"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":436,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75975743,"answer_count":2,"score":0,"last_activity_date":1681117767,"creation_date":1681080995,"question_id":75973287,"body_markdown":"I read so many posts about this issue but I just couldn&#39;t solve it. I am trying to add a simple background image in my html page as follows:\r\n\r\n    &lt;!DOCTYPE html&gt;\r\n    &lt;html lang=&quot;en&quot;&gt;\r\n    &lt;head&gt;\r\n        &lt;meta charset=&quot;UTF-8&quot;&gt;\r\n        &lt;title&gt;Title&lt;/title&gt;\r\n        &lt;style&gt;\r\n            body {\r\n                background-image: url(../static/background.jpg);\r\n                background-repeat: no-repeat;\r\n                background-size: cover;\r\n            }\r\n        &lt;/style&gt;\r\n    &lt;/head&gt;\r\n    &lt;body&gt;\r\n    &lt;/body&gt;\r\n    &lt;/html&gt;\r\n\r\nWhen I run the Spring application and went to `localhost:8080/temp`, I gotta see my html page which I set in my controller as get request but all I got is just a white blank page. The thing is, if I manually right click my `temp.html` file and open it in chrome, it works just fine, I can see my image. So I think there is a problem with spring boot or something?\r\n\r\nHere&#39;s my resources directory:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/raGQN.png","title":"CSS background-image not working with Spring Boot application","body":"<p>I read so many posts about this issue but I just couldn't solve it. I am trying to add a simple background image in my html page as follows:</p>\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=&quot;en&quot;&gt;\n&lt;head&gt;\n    &lt;meta charset=&quot;UTF-8&quot;&gt;\n    &lt;title&gt;Title&lt;/title&gt;\n    &lt;style&gt;\n        body {\n            background-image: url(../static/background.jpg);\n            background-repeat: no-repeat;\n            background-size: cover;\n        }\n    &lt;/style&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>When I run the Spring application and went to <code>localhost:8080/temp</code>, I gotta see my html page which I set in my controller as get request but all I got is just a white blank page. The thing is, if I manually right click my <code>temp.html</code> file and open it in chrome, it works just fine, I can see my image. So I think there is a problem with spring boot or something?</p>\n<p>Here's my resources directory:</p>\n<p><a href=\"https://i.stack.imgur.com/raGQN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/raGQN.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","arrays","collections"],"comments":[{"owner":{"account_id":76626,"reputation":6476,"user_id":219210,"display_name":"Hardcoded"},"score":11,"creation_date":1278344901,"post_id":960431,"comment_id":3274883,"body_markdown":"You can only cast to Integer[] by using: `Integer[] arr = (Integer[])list.toArray(new Integer[list.size]);`","body":"You can only cast to Integer[] by using: <code>Integer[] arr = (Integer[])list.toArray(new Integer[list.size]);</code>"},{"owner":{"account_id":266709,"reputation":11856,"user_id":554431,"display_name":"bestsss"},"score":0,"creation_date":1324027891,"post_id":960431,"comment_id":10567114,"body_markdown":"@ripper234, eddie&#39;s solution is worse than the one on the question. actually the original one is technically the best as long as the List is RandomAccess impl (even it will be properly unrolled and the bounds check for array removed)","body":"@ripper234, eddie&#39;s solution is worse than the one on the question. actually the original one is technically the best as long as the List is RandomAccess impl (even it will be properly unrolled and the bounds check for array removed)"},{"owner":{"account_id":181983,"reputation":22075,"user_id":416369,"accept_rate":29,"display_name":"sactiw"},"score":1,"creation_date":1365523813,"post_id":960431,"comment_id":22654090,"body_markdown":"@Hardcoded you might want to edit your comment to use list.size() method and drop the unnecessary cast.","body":"@Hardcoded you might want to edit your comment to use list.size() method and drop the unnecessary cast."},{"owner":{"account_id":76626,"reputation":6476,"user_id":219210,"display_name":"Hardcoded"},"score":0,"creation_date":1367238155,"post_id":960431,"comment_id":23297049,"body_markdown":"@sactiw How should I do this? This comment is written 3 years ago and you can only edit your comments for the first 5 minutes.","body":"@sactiw How should I do this? This comment is written 3 years ago and you can only edit your comments for the first 5 minutes."},{"owner":{"account_id":320401,"reputation":1520,"user_id":638661,"accept_rate":55,"display_name":"Makoto"},"score":2,"creation_date":1402877655,"post_id":960431,"comment_id":37429195,"body_markdown":"Is there a better way to do this now in Java 8?","body":"Is there a better way to do this now in Java 8?"},{"owner":{"account_id":4680926,"reputation":2259,"user_id":3789665,"accept_rate":57,"display_name":"greybeard"},"score":2,"creation_date":1455045115,"post_id":960431,"comment_id":58310624,"body_markdown":"(@Makoto : see [Pshemo&#39;s answer](http://stackoverflow.com/a/23945015/3789665))","body":"(@Makoto : see <a href=\"http://stackoverflow.com/a/23945015/3789665\">Pshemo&#39;s answer</a>)"},{"owner":{"account_id":1228802,"reputation":279,"user_id":1193815,"accept_rate":50,"display_name":"old_soul_on_the_run"},"score":7,"creation_date":1537660165,"post_id":960431,"comment_id":91865730,"body_markdown":"int[] arr = listOfIntegers.stream().mapToInt(x-&gt;x).toArray();","body":"int[] arr = listOfIntegers.stream().mapToInt(x-&gt;x).toArray();"}],"answers":[{"comments":[{"owner":{"account_id":60328,"reputation":9294,"user_id":180258,"accept_rate":92,"display_name":"ron"},"score":33,"creation_date":1308227661,"post_id":960449,"comment_id":7462300,"body_markdown":"Also see ColinD&#39;s answer about guava&#39;s Ints.toArray(Collection&lt;Integer&gt;)","body":"Also see ColinD&#39;s answer about guava&#39;s Ints.toArray(Collection&lt;Integer&gt;)"},{"owner":{"account_id":1376679,"reputation":13172,"user_id":1310566,"accept_rate":94,"display_name":"Simon Forsberg"},"score":9,"creation_date":1369427447,"post_id":960449,"comment_id":24114986,"body_markdown":"@JonSkeet you mean like the horrible overloads that exists already in the Arrays class for `binarySearch`, `copyOf`, `copyOfRange`...? I wonder why they couldn&#39;t add another set of horrible overloads.","body":"@JonSkeet you mean like the horrible overloads that exists already in the Arrays class for <code>binarySearch</code>, <code>copyOf</code>, <code>copyOfRange</code>...? I wonder why they couldn&#39;t add another set of horrible overloads."},{"owner":{"account_id":300331,"reputation":50777,"user_id":607407,"accept_rate":71,"display_name":"Tom&#225;š Zato"},"score":1,"creation_date":1425671238,"post_id":960449,"comment_id":46072280,"body_markdown":"@ron ColinD&#39;s answer doesn&#39;t give anything but what the OP already had - for loop to fill primitive array with non-primitive one.","body":"@ron ColinD&#39;s answer doesn&#39;t give anything but what the OP already had - for loop to fill primitive array with non-primitive one."},{"owner":{"account_id":63782,"reputation":6252,"user_id":188622,"accept_rate":44,"display_name":"Gubatron"},"score":0,"creation_date":1455741698,"post_id":960449,"comment_id":58630222,"body_markdown":"meanwhile at Oracle java engineers are fixated with overcomplicating the language with modules...","body":"meanwhile at Oracle java engineers are fixated with overcomplicating the language with modules..."},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":2,"creation_date":1466430644,"post_id":960449,"comment_id":63298902,"body_markdown":"@bvdb: I&#39;m saying that without other libraries (which basically still have the loop, but in their code not yours), I don&#39;t believe there&#39;s a better approach. That&#39;s a significantly stronger assertion than saying I don&#39;t know whether or not there is a better approach.","body":"@bvdb: I&#39;m saying that without other libraries (which basically still have the loop, but in their code not yours), I don&#39;t believe there&#39;s a better approach. That&#39;s a significantly stronger assertion than saying I don&#39;t know whether or not there is a better approach."}],"tags":[],"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"comment_count":5,"down_vote_count":8,"up_vote_count":269,"is_accepted":true,"score":261,"last_activity_date":1244320098,"creation_date":1244320098,"answer_id":960449,"question_id":960431,"body_markdown":"Unfortunately, I don&#39;t believe there really *is* a better way of doing this due to the nature of Java&#39;s handling of primitive types, boxing, arrays and generics. In particular:\r\n\r\n- `List&lt;T&gt;.toArray` won&#39;t work because there&#39;s no conversion from `Integer` to `int`\r\n- You can&#39;t use `int` as a type argument for generics, so it would *have* to be an `int`-specific method (or one which used reflection to do nasty trickery).\r\n\r\nI believe there are libraries which have autogenerated versions of this kind of method for all the primitive types (i.e. there&#39;s a template which is copied for each type). It&#39;s ugly, but that&#39;s the way it is I&#39;m afraid :(\r\n\r\nEven though the [`Arrays`][1] class came out before generics arrived in Java, it would still have to include all the horrible overloads if it were introduced today (assuming you want to use primitive arrays).\r\n\r\n\r\n  [1]: http://java.sun.com/javase/6/docs/api/java/util/Arrays.html","title":"How can I convert List&lt;Integer&gt; to int[] in Java?","body":"<p>Unfortunately, I don't believe there really <em>is</em> a better way of doing this due to the nature of Java's handling of primitive types, boxing, arrays and generics. In particular:</p>\n\n<ul>\n<li><code>List&lt;T&gt;.toArray</code> won't work because there's no conversion from <code>Integer</code> to <code>int</code></li>\n<li>You can't use <code>int</code> as a type argument for generics, so it would <em>have</em> to be an <code>int</code>-specific method (or one which used reflection to do nasty trickery).</li>\n</ul>\n\n<p>I believe there are libraries which have autogenerated versions of this kind of method for all the primitive types (i.e. there's a template which is copied for each type). It's ugly, but that's the way it is I'm afraid :(</p>\n\n<p>Even though the <a href=\"http://java.sun.com/javase/6/docs/api/java/util/Arrays.html\" rel=\"noreferrer\"><code>Arrays</code></a> class came out before generics arrived in Java, it would still have to include all the horrible overloads if it were introduced today (assuming you want to use primitive arrays).</p>\n"},{"comments":[{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":5,"creation_date":1244320523,"post_id":960466,"comment_id":769157,"body_markdown":"You *can* cast between Object[] and Integer[] due to array covariance - but you can&#39;t cast between int[] and Integer[].","body":"You <i>can</i> cast between Object[] and Integer[] due to array covariance - but you can&#39;t cast between int[] and Integer[]."},{"owner":{"account_id":18929,"reputation":5197,"user_id":43864,"accept_rate":62,"display_name":"neesh"},"score":0,"creation_date":1244320729,"post_id":960466,"comment_id":769164,"body_markdown":"thanks for correcting me I will edit my answer to reflect what you said.","body":"thanks for correcting me I will edit my answer to reflect what you said."}],"tags":[],"owner":{"account_id":18929,"reputation":5197,"user_id":43864,"accept_rate":62,"display_name":"neesh"},"comment_count":2,"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1649876831,"creation_date":1244320407,"answer_id":960466,"question_id":960431,"body_markdown":"There is really no way of &quot;one-lining&quot; what you are trying to do, because toArray returns an Object[] and you cannot cast from Object[] to int[] or Integer[] to int[].\r\n","title":"How can I convert List&lt;Integer&gt; to int[] in Java?","body":"<p>There is really no way of &quot;one-lining&quot; what you are trying to do, because toArray returns an Object[] and you cannot cast from Object[] to int[] or Integer[] to int[].</p>\n"},{"comments":[{"owner":{"account_id":24377,"reputation":818073,"user_id":61974,"display_name":"Mark Byers"},"score":0,"creation_date":1354181721,"post_id":960507,"comment_id":18681575,"body_markdown":"The `toPrimitive` link is broken.","body":"The <code>toPrimitive</code> link is broken."},{"owner":{"account_id":186647,"reputation":344,"user_id":424174,"display_name":"StackEng2010"},"score":0,"creation_date":1363191031,"post_id":960507,"comment_id":21754469,"body_markdown":"Here&#39;s a link to 2.6 Commons Lang API: [toPrimitive](http://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/ArrayUtils.html#toPrimitive(java.lang.Integer[]))","body":"Here&#39;s a link to 2.6 Commons Lang API: <a href=\"http://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/ArrayUtils.html#toPrimitive(java.lang.Integer%5B%5D)\" rel=\"nofollow noreferrer\">toPrimitive</a>"},{"owner":{"account_id":92737,"reputation":4853,"user_id":254025,"accept_rate":64,"display_name":"atanamir"},"score":12,"creation_date":1369364196,"post_id":960507,"comment_id":24085972,"body_markdown":"Note that this will entail 2 allocations and copies: `myList.toArray()` will create an `Integer[]` and populate it, while `ArrayUtils.toPrimitive()` will allocate an `int[]` and unbox the input.","body":"Note that this will entail 2 allocations and copies: <code>myList.toArray()</code> will create an <code>Integer[]</code> and populate it, while <code>ArrayUtils.toPrimitive()</code> will allocate an <code>int[]</code> and unbox the input."}],"tags":[],"owner":{"account_id":23143,"reputation":53986,"user_id":57752,"accept_rate":73,"display_name":"Eddie"},"comment_count":3,"down_vote_count":3,"up_vote_count":185,"is_accepted":false,"score":182,"last_activity_date":1363248575,"creation_date":1244321308,"answer_id":960507,"question_id":960431,"body_markdown":"The easiest way to do this is to make use of [Apache Commons Lang][1].  It has a handy ArrayUtils class that can do what you want.  Use the [`toPrimitive`][2] method with the overload for an array of `Integer`s.\r\n\r\n    List&lt;Integer&gt; myList;\r\n     ... assign and fill the list\r\n    int[] intArray = ArrayUtils.toPrimitive(myList.toArray(new Integer[myList.size()]));\r\n\r\nThis way you don&#39;t reinvent the wheel.  Commons Lang has a great many useful things that Java left out.  Above, I chose to create an Integer list of the right size.  You can also use a 0-length static Integer array and let Java allocate an array of the right size:\r\n\r\n    static final Integer[] NO_INTS = new Integer[0];\r\n       ....\r\n    int[] intArray2 = ArrayUtils.toPrimitive(myList.toArray(NO_INTS));\r\n\r\n[1]: http://commons.apache.org/lang\r\n[2]: http://commons.apache.org/proper/commons-lang/javadocs/api-3.1/org/apache/commons/lang3/ArrayUtils.html#toPrimitive%28java.lang.Integer%5b%5d%29\r\n","title":"How can I convert List&lt;Integer&gt; to int[] in Java?","body":"<p>The easiest way to do this is to make use of <a href=\"http://commons.apache.org/lang\" rel=\"noreferrer\">Apache Commons Lang</a>.  It has a handy ArrayUtils class that can do what you want.  Use the <a href=\"http://commons.apache.org/proper/commons-lang/javadocs/api-3.1/org/apache/commons/lang3/ArrayUtils.html#toPrimitive%28java.lang.Integer%5b%5d%29\" rel=\"noreferrer\"><code>toPrimitive</code></a> method with the overload for an array of <code>Integer</code>s.</p>\n\n<pre><code>List&lt;Integer&gt; myList;\n ... assign and fill the list\nint[] intArray = ArrayUtils.toPrimitive(myList.toArray(new Integer[myList.size()]));\n</code></pre>\n\n<p>This way you don't reinvent the wheel.  Commons Lang has a great many useful things that Java left out.  Above, I chose to create an Integer list of the right size.  You can also use a 0-length static Integer array and let Java allocate an array of the right size:</p>\n\n<pre><code>static final Integer[] NO_INTS = new Integer[0];\n   ....\nint[] intArray2 = ArrayUtils.toPrimitive(myList.toArray(NO_INTS));\n</code></pre>\n"},{"comments":[{"owner":{"account_id":73951,"reputation":8115,"user_id":212731,"accept_rate":73,"display_name":"Hugh Perkins"},"score":0,"creation_date":1278206802,"post_id":965289,"comment_id":3265471,"body_markdown":"I dont understand: looking up an elepment in an array is not slow.  It runs in O, where n is the size of the array, ie it&#39;s not dependent on the size of the array at all or anything.\n\nIn C:\n\nmyarray[c] is the same as:\n\nmyarray + c * sizeof( myarray[0] )\n\n... which runs *very* fast.","body":"I dont understand: looking up an elepment in an array is not slow.  It runs in O, where n is the size of the array, ie it&#39;s not dependent on the size of the array at all or anything.  In C:  myarray[c] is the same as:  myarray + c * sizeof( myarray[0] )  ... which runs <i>very</i> fast."},{"owner":{"account_id":43794,"reputation":20415,"user_id":128186,"display_name":"Arjan"},"score":5,"creation_date":1278281022,"post_id":965289,"comment_id":3269447,"body_markdown":"The method takes List as argument, not all implementations have fast random access (like ArrayList)","body":"The method takes List as argument, not all implementations have fast random access (like ArrayList)"},{"owner":{"account_id":160088,"reputation":3119,"user_id":379894,"display_name":"Lajnold"},"score":1,"creation_date":1278281210,"post_id":965289,"comment_id":3269458,"body_markdown":"@Hugh: The difference is not how the array is accessed, but how the List is accessed. `list.get(i)` performs bounds checks and stuff for each access. I don&#39;t know whether the new solution is actually better, but Mike says so at least, so perhaps it is.  \n\nEdit: I forgot that Java allows indexing into a linked list (I&#39;m used to C++&#39;s std::list, which does not allow it). So what arjantop said about non-ArrayList is true as well; indexing isn&#39;t necessarily fast even without the bounds checks.","body":"@Hugh: The difference is not how the array is accessed, but how the List is accessed. <code>list.get(i)</code> performs bounds checks and stuff for each access. I don&#39;t know whether the new solution is actually better, but Mike says so at least, so perhaps it is.    Edit: I forgot that Java allows indexing into a linked list (I&#39;m used to C++&#39;s std::list, which does not allow it). So what arjantop said about non-ArrayList is true as well; indexing isn&#39;t necessarily fast even without the bounds checks."},{"owner":{"account_id":283609,"reputation":45044,"user_id":581205,"accept_rate":72,"display_name":"maaartinus"},"score":0,"creation_date":1429984657,"post_id":965289,"comment_id":47862464,"body_markdown":"@Lajnold The bounds checks for an `ArrayList` are free in a modern JIT. However, I&#39;d prefer if Java more followed STL and implemented only methods which really make sense (`LinkedList::get(int)` does not as it may be arbitrary slow).","body":"@Lajnold The bounds checks for an <code>ArrayList</code> are free in a modern JIT. However, I&#39;d prefer if Java more followed STL and implemented only methods which really make sense (<code>LinkedList::get(int)</code> does not as it may be arbitrary slow)."},{"owner":{"account_id":4178685,"reputation":4554,"user_id":3424423,"accept_rate":47,"display_name":"Nearoo"},"score":0,"creation_date":1523639742,"post_id":965289,"comment_id":86659656,"body_markdown":"@maaartinus The entire purpose of interfaces is to separate implementation from interface. It makes perfect sense the way it is solved in Java if you understand the underlying idea. [Here](https://www2.ccs.neu.edu/research/demeter/papers/context-journal/node16.html) is some information about it.","body":"@maaartinus The entire purpose of interfaces is to separate implementation from interface. It makes perfect sense the way it is solved in Java if you understand the underlying idea. <a href=\"https://www2.ccs.neu.edu/research/demeter/papers/context-journal/node16.html\" rel=\"nofollow noreferrer\">Here</a> is some information about it."},{"owner":{"account_id":16641188,"reputation":449,"user_id":12026681,"display_name":"lue"},"score":0,"creation_date":1591285968,"post_id":965289,"comment_id":110004609,"body_markdown":"Is there a reason behind only allowing Lists instead of Iterables? Or is it just to fit the question? Thanks.","body":"Is there a reason behind only allowing Lists instead of Iterables? Or is it just to fit the question? Thanks."}],"tags":[],"owner":{"display_name":"Mike"},"comment_count":6,"down_vote_count":1,"up_vote_count":63,"is_accepted":false,"score":62,"last_activity_date":1649876921,"creation_date":1244472947,"answer_id":965289,"question_id":960431,"body_markdown":"Use:\r\n\r\n    int[] toIntArray(List&lt;Integer&gt; list)  {\r\n        int[] ret = new int[list.size()];\r\n        int i = 0;\r\n        for (Integer e : list)\r\n            ret[i++] = e;\r\n        return ret;\r\n    }\r\n\r\nThis slight change to your code is to avoid expensive list indexing (since a List is not necessarily an ArrayList, but it could be a linked list, for which random access is expensive).\r\n\r\n\r\n","title":"How can I convert List&lt;Integer&gt; to int[] in Java?","body":"<p>Use:</p>\n<pre><code>int[] toIntArray(List&lt;Integer&gt; list)  {\n    int[] ret = new int[list.size()];\n    int i = 0;\n    for (Integer e : list)\n        ret[i++] = e;\n    return ret;\n}\n</code></pre>\n<p>This slight change to your code is to avoid expensive list indexing (since a List is not necessarily an ArrayList, but it could be a linked list, for which random access is expensive).</p>\n"},{"comments":[{"owner":{"account_id":2287025,"reputation":545,"user_id":2010794,"display_name":"kamczak"},"score":4,"creation_date":1393329904,"post_id":3176296,"comment_id":33366961,"body_markdown":"Unfortunately, the intermediate array is hidden inside Guava:\n`Object[] boxedArray = collection.toArray();`","body":"Unfortunately, the intermediate array is hidden inside Guava: <code>Object[] boxedArray = collection.toArray();</code>"},{"owner":{"account_id":32132,"reputation":3094,"user_id":88821,"accept_rate":95,"display_name":"Eddified"},"score":9,"creation_date":1470431012,"post_id":3176296,"comment_id":64965783,"body_markdown":"&quot;Fortunately, the intermediate array is hidden inside Guava.&quot; - Fixed that for you. ;)","body":"&quot;Fortunately, the intermediate array is hidden inside Guava.&quot; - Fixed that for you. ;)"}],"tags":[],"owner":{"account_id":7848,"reputation":108920,"user_id":13792,"accept_rate":100,"display_name":"ColinD"},"comment_count":2,"down_vote_count":2,"up_vote_count":224,"is_accepted":false,"score":222,"last_activity_date":1463463301,"creation_date":1278279154,"answer_id":3176296,"question_id":960431,"body_markdown":"In addition to Commons Lang, you can do this with [Guava][1]&#39;s method [`Ints.toArray(Collection&lt;Integer&gt; collection)`][2]:\r\n\r\n    List&lt;Integer&gt; list = ...\r\n    int[] ints = Ints.toArray(list);\r\n\r\nThis saves you having to do the intermediate array conversion that the Commons Lang equivalent requires yourself.\r\n\r\n  [1]: https://github.com/google/guava\r\n  [2]: http://google.github.io/guava/releases/snapshot/api/docs/com/google/common/primitives/Ints.html#toArray(java.util.Collection)","title":"How can I convert List&lt;Integer&gt; to int[] in Java?","body":"<p>In addition to Commons Lang, you can do this with <a href=\"https://github.com/google/guava\" rel=\"noreferrer\">Guava</a>'s method <a href=\"http://google.github.io/guava/releases/snapshot/api/docs/com/google/common/primitives/Ints.html#toArray(java.util.Collection)\" rel=\"noreferrer\"><code>Ints.toArray(Collection&lt;Integer&gt; collection)</code></a>:</p>\n\n<pre><code>List&lt;Integer&gt; list = ...\nint[] ints = Ints.toArray(list);\n</code></pre>\n\n<p>This saves you having to do the intermediate array conversion that the Commons Lang equivalent requires yourself.</p>\n"},{"comments":[{"owner":{"account_id":1497191,"reputation":9670,"user_id":1402846,"accept_rate":90,"display_name":"Pang"},"score":0,"creation_date":1693374622,"post_id":3180339,"comment_id":135750424,"body_markdown":"Links in answer give *&quot;404 | Repository not found&quot;*.","body":"Links in answer give <i>&quot;404 | Repository not found&quot;</i>."}],"tags":[],"owner":{"account_id":32251,"reputation":114942,"user_id":89266,"accept_rate":91,"display_name":"dfa"},"comment_count":1,"down_vote_count":2,"up_vote_count":5,"is_accepted":false,"score":3,"last_activity_date":1649876959,"creation_date":1278340820,"answer_id":3180339,"question_id":960431,"body_markdown":"Also try [Dollar][1] ([check this revision][2]):\r\n\r\n    import static com.humaorie.dollar.Dollar.*\r\n    ...\r\n\r\n    List&lt;Integer&gt; source = ...;\r\n    int[] ints = $(source).convert().toIntArray();\r\n\r\n  [1]: http://bitbucket.org/dfa/dollar/\r\n  [2]: http://bitbucket.org/dfa/dollar/changeset/cea42757d873\r\n\r\n\r\n","title":"How can I convert List&lt;Integer&gt; to int[] in Java?","body":"<p>Also try <a href=\"http://bitbucket.org/dfa/dollar/\" rel=\"nofollow noreferrer\">Dollar</a> (<a href=\"http://bitbucket.org/dfa/dollar/changeset/cea42757d873\" rel=\"nofollow noreferrer\">check this revision</a>):</p>\n<pre><code>import static com.humaorie.dollar.Dollar.*\n...\n\nList&lt;Integer&gt; source = ...;\nint[] ints = $(source).convert().toIntArray();\n</code></pre>\n"},{"comments":[{"owner":{"account_id":291917,"reputation":1489,"user_id":594366,"display_name":"John Velonis"},"score":1,"creation_date":1394144167,"post_id":6291107,"comment_id":33768969,"body_markdown":"This doesn&#39;t answer the OP&#39;s question -- the OP asked how to convert from a List to an array.","body":"This doesn&#39;t answer the OP&#39;s question -- the OP asked how to convert from a List to an array."}],"tags":[],"owner":{"account_id":321153,"reputation":67,"user_id":639802,"display_name":"DennisTemper"},"comment_count":1,"down_vote_count":2,"up_vote_count":4,"is_accepted":false,"score":2,"last_activity_date":1649877131,"creation_date":1307613836,"answer_id":6291107,"question_id":960431,"body_markdown":"I would recommend you to use the `List&lt;?&gt;` skeletal implementation from the Java collections API. It appears to be quite helpful in this particular case:\r\n\r\n    package mypackage;\r\n\r\n    import java.util.AbstractList;\r\n    import java.util.Arrays;\r\n    import java.util.Collections;\r\n    import java.util.List;\r\n\r\n    public class Test {\r\n\r\n        // Helper method to convert int arrays into Lists\r\n        static List&lt;Integer&gt; intArrayAsList(final int[] a) {\r\n            if(a == null)\r\n                throw new NullPointerException();\r\n            return new AbstractList&lt;Integer&gt;() {\r\n\r\n                @Override\r\n                public Integer get(int i) {\r\n                    return a[i]; // Autoboxing\r\n                }\r\n                @Override\r\n                public Integer set(int i, Integer val) {\r\n                    final int old = a[i];\r\n                    a[i] = val; // Auto-unboxing\r\n                    return old; // Autoboxing\r\n                }\r\n                @Override\r\n                public int size() {\r\n                    return a.length;\r\n                }\r\n            };\r\n        }\r\n\r\n        public static void main(final String[] args) {\r\n            int[] a = {1, 2, 3, 4, 5};\r\n            Collections.reverse(intArrayAsList(a));\r\n            System.out.println(Arrays.toString(a));\r\n        }\r\n    }\r\n\r\nBeware of boxing/unboxing drawbacks.\r\n\r\n\r\n","title":"How can I convert List&lt;Integer&gt; to int[] in Java?","body":"<p>I would recommend you to use the <code>List&lt;?&gt;</code> skeletal implementation from the Java collections API. It appears to be quite helpful in this particular case:</p>\n<pre><code>package mypackage;\n\nimport java.util.AbstractList;\nimport java.util.Arrays;\nimport java.util.Collections;\nimport java.util.List;\n\npublic class Test {\n\n    // Helper method to convert int arrays into Lists\n    static List&lt;Integer&gt; intArrayAsList(final int[] a) {\n        if(a == null)\n            throw new NullPointerException();\n        return new AbstractList&lt;Integer&gt;() {\n\n            @Override\n            public Integer get(int i) {\n                return a[i]; // Autoboxing\n            }\n            @Override\n            public Integer set(int i, Integer val) {\n                final int old = a[i];\n                a[i] = val; // Auto-unboxing\n                return old; // Autoboxing\n            }\n            @Override\n            public int size() {\n                return a.length;\n            }\n        };\n    }\n\n    public static void main(final String[] args) {\n        int[] a = {1, 2, 3, 4, 5};\n        Collections.reverse(intArrayAsList(a));\n        System.out.println(Arrays.toString(a));\n    }\n}\n</code></pre>\n<p>Beware of boxing/unboxing drawbacks.</p>\n"},{"comments":[{"owner":{"account_id":24885,"reputation":30828,"user_id":63550,"accept_rate":78,"display_name":"Peter Mortensen"},"score":0,"creation_date":1649877172,"post_id":9470875,"comment_id":126989707,"body_markdown":"An explanation would be in order. What is the idea/gist?","body":"An explanation would be in order. What is the idea/gist?"}],"tags":[],"owner":{"account_id":325916,"reputation":5887,"user_id":697099,"accept_rate":40,"display_name":"gerardw"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1378235303,"creation_date":1330370325,"answer_id":9470875,"question_id":960431,"body_markdown":"    int[] ret = new int[list.size()];       \r\n    Iterator&lt;Integer&gt; iter = list.iterator();\r\n    for (int i=0; iter.hasNext(); i++) {       \r\n        ret[i] = iter.next();                \r\n    }                                        \r\n    return ret;                              ","title":"How can I convert List&lt;Integer&gt; to int[] in Java?","body":"<pre><code>int[] ret = new int[list.size()];       \nIterator&lt;Integer&gt; iter = list.iterator();\nfor (int i=0; iter.hasNext(); i++) {       \n    ret[i] = iter.next();                \n}                                        \nreturn ret;                              \n</code></pre>\n"},{"comments":[{"owner":{"account_id":153967,"reputation":1960,"user_id":369604,"accept_rate":77,"display_name":"Loduwijk"},"score":2,"creation_date":1374594228,"post_id":13311659,"comment_id":25995714,"body_markdown":"You could not have done that when the question was asked, but this is a good way to handle the situation now (assuming you have upgraded Java). What you have done could be further modified to provide a general way to transform lots of things with the same methodology. +1","body":"You could not have done that when the question was asked, but this is a good way to handle the situation now (assuming you have upgraded Java). What you have done could be further modified to provide a general way to transform lots of things with the same methodology. +1"},{"owner":{"account_id":723954,"reputation":1847,"user_id":666583,"display_name":"AndrewF"},"score":7,"creation_date":1518482739,"post_id":13311659,"comment_id":84516726,"body_markdown":"The solution here is only in the loop code. The rest (functional interface, lambda, main method, list with dummy data) is extraneous and doesn&#39;t help answer the question.","body":"The solution here is only in the loop code. The rest (functional interface, lambda, main method, list with dummy data) is extraneous and doesn&#39;t help answer the question."}],"tags":[],"owner":{"account_id":37187,"reputation":46693,"user_id":106261,"accept_rate":87,"display_name":"NimChimpsky"},"comment_count":2,"down_vote_count":3,"up_vote_count":3,"is_accepted":false,"score":0,"last_activity_date":1649877548,"creation_date":1352477285,"answer_id":13311659,"question_id":960431,"body_markdown":"Using a lambda you could do this (compiles in JDK lambda):\r\n\r\n    public static void main(String ars[]) {\r\n        TransformService transformService = (inputs) -&gt; {\r\n            int[] ints = new int[inputs.size()];\r\n            int i = 0;\r\n            for (Integer element : inputs) {\r\n                ints[ i++ ] = element;\r\n            }\r\n            return ints;\r\n        };\r\n\r\n        List&lt;Integer&gt; inputs = new ArrayList&lt;Integer&gt;(5) { {add(10); add(10);} };\r\n\r\n        int[] results = transformService.transform(inputs);\r\n    }\r\n\r\n    public interface TransformService {\r\n        int[] transform(List&lt;Integer&gt; inputs);\r\n    }\r\n\r\n\r\n\r\n","title":"How can I convert List&lt;Integer&gt; to int[] in Java?","body":"<p>Using a lambda you could do this (compiles in JDK lambda):</p>\n<pre><code>public static void main(String ars[]) {\n    TransformService transformService = (inputs) -&gt; {\n        int[] ints = new int[inputs.size()];\n        int i = 0;\n        for (Integer element : inputs) {\n            ints[ i++ ] = element;\n        }\n        return ints;\n    };\n\n    List&lt;Integer&gt; inputs = new ArrayList&lt;Integer&gt;(5) { {add(10); add(10);} };\n\n    int[] results = transformService.transform(inputs);\n}\n\npublic interface TransformService {\n    int[] transform(List&lt;Integer&gt; inputs);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":153967,"reputation":1960,"user_id":369604,"accept_rate":77,"display_name":"Loduwijk"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1649877696,"creation_date":1374595029,"answer_id":17815188,"question_id":960431,"body_markdown":"I&#39;ve noticed several uses of *for* loops, but you don&#39;t even need anything inside the loop. I mention this only because the original question was trying to find less verbose code.\r\n\r\n    int[] toArray(List&lt;Integer&gt; list) {\r\n        int[] ret = new int[ list.size() ];\r\n        int i = 0;\r\n        for( Iterator&lt;Integer&gt; it = list.iterator();\r\n             it.hasNext();\r\n             ret[i++] = it.next() );\r\n        return ret;\r\n    }\r\n\r\nIf Java allowed multiple declarations in a *for* loop the way C++ does, we could go a step further and do for(int i = 0, Iterator&lt;Integer&gt; it...\r\n\r\nIn the end though (this part is just my opinion), if you are going to have a helping function or method to do something for you, just set it up and forget about it. It can be a one-liner or ten; if you&#39;ll never look at it again you won&#39;t know the difference.\r\n\r\n\r\n","title":"How can I convert List&lt;Integer&gt; to int[] in Java?","body":"<p>I've noticed several uses of <em>for</em> loops, but you don't even need anything inside the loop. I mention this only because the original question was trying to find less verbose code.</p>\n<pre><code>int[] toArray(List&lt;Integer&gt; list) {\n    int[] ret = new int[ list.size() ];\n    int i = 0;\n    for( Iterator&lt;Integer&gt; it = list.iterator();\n         it.hasNext();\n         ret[i++] = it.next() );\n    return ret;\n}\n</code></pre>\n<p>If Java allowed multiple declarations in a <em>for</em> loop the way C++ does, we could go a step further and do for(int i = 0, Iterator it...</p>\n<p>In the end though (this part is just my opinion), if you are going to have a helping function or method to do something for you, just set it up and forget about it. It can be a one-liner or ten; if you'll never look at it again you won't know the difference.</p>\n"},{"comments":[{"owner":{"account_id":355150,"reputation":19342,"user_id":693927,"display_name":"Pimp Trizkit"},"score":7,"creation_date":1448549618,"post_id":23945015,"comment_id":55642125,"body_markdown":"Clearly the best solution. Too bad it lacks explanation.","body":"Clearly the best solution. Too bad it lacks explanation."},{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":22,"creation_date":1448551964,"post_id":23945015,"comment_id":55643607,"body_markdown":"@PimpTrizkit Updated this answer a little. Hope it is clearer now.","body":"@PimpTrizkit Updated this answer a little. Hope it is clearer now."},{"owner":{"account_id":355150,"reputation":19342,"user_id":693927,"display_name":"Pimp Trizkit"},"score":3,"creation_date":1448594986,"post_id":23945015,"comment_id":55658458,"body_markdown":"@Pshemo - Thanks! I didn&#39;t personally need an explanation. But I hate seeing the perfect answer without one!  Regardless, your explanation did educate me and was helpful. I wonder why the `mapTo...` functions don&#39;t allow for `null` lambda.... like sort does.... which makes it default to a default behavior... in this case,  `i -&gt; i` would be a perfect default behavior.","body":"@Pshemo - Thanks! I didn&#39;t personally need an explanation. But I hate seeing the perfect answer without one!  Regardless, your explanation did educate me and was helpful. I wonder why the <code>mapTo...</code> functions don&#39;t allow for <code>null</code> lambda.... like sort does.... which makes it default to a default behavior... in this case,  <code>i -&gt; i</code> would be a perfect default behavior."},{"owner":{"account_id":2937730,"reputation":7422,"user_id":2516301,"accept_rate":100,"display_name":"vefthym"},"score":0,"creation_date":1488451654,"post_id":23945015,"comment_id":72241296,"body_markdown":"I guess this answer is faster than ColinD&#39;s answer using Guava, right?","body":"I guess this answer is faster than ColinD&#39;s answer using Guava, right?"},{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":2,"creation_date":1488470159,"post_id":23945015,"comment_id":72254320,"body_markdown":"@vefthym I didn&#39;t test it, but I suspect that both solution work on same simple principle so I would expect similar speed (but feel free to benchmark it). One advantage of this answer is that it doesn&#39;t require additional libraries as long as we have Java 8.","body":"@vefthym I didn&#39;t test it, but I suspect that both solution work on same simple principle so I would expect similar speed (but feel free to benchmark it). One advantage of this answer is that it doesn&#39;t require additional libraries as long as we have Java 8."},{"owner":{"account_id":404669,"reputation":262,"user_id":773138,"display_name":"S3lvatico"},"score":0,"creation_date":1578131693,"post_id":23945015,"comment_id":105344922,"body_markdown":"thanks to this, I learned about streams of primitive types. Great solution and explanation, thank you.","body":"thanks to this, I learned about streams of primitive types. Great solution and explanation, thank you."},{"owner":{"account_id":4062194,"reputation":518,"user_id":3338418,"accept_rate":10,"display_name":"Adi Sivasankaran"},"score":0,"creation_date":1588052853,"post_id":23945015,"comment_id":108743636,"body_markdown":"Hands down the best solution!","body":"Hands down the best solution!"},{"owner":{"account_id":7121054,"reputation":5814,"user_id":5445670,"display_name":"Solomon Ucko"},"score":0,"creation_date":1597777098,"post_id":23945015,"comment_id":112243229,"body_markdown":"Unfortunately, this doesn&#39;t seem to work with `byte`, `short`, `char`, or `float` arrays...","body":"Unfortunately, this doesn&#39;t seem to work with <code>byte</code>, <code>short</code>, <code>char</code>, or <code>float</code> arrays..."},{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":0,"creation_date":1597778113,"post_id":23945015,"comment_id":112243599,"body_markdown":"@SolomonUcko True, there are no `Stream`s corresponding to those primitive types, so also there are no methods in Stream class like `mapToByte(...)`.","body":"@SolomonUcko True, there are no <code>Stream</code>s corresponding to those primitive types, so also there are no methods in Stream class like <code>mapToByte(...)</code>."},{"owner":{"account_id":7487560,"reputation":145,"user_id":5690287,"display_name":"Dhruv Singhal"},"score":0,"creation_date":1606970431,"post_id":23945015,"comment_id":115126559,"body_markdown":"This should be the accepted answer in my opinion. Also, could you please update the answer to use method reference (if you feel so)?","body":"This should be the accepted answer in my opinion. Also, could you please update the answer to use method reference (if you feel so)?"},{"owner":{"account_id":1062360,"reputation":37721,"user_id":1063716,"accept_rate":94,"display_name":"Steve Chambers"},"score":0,"creation_date":1634024473,"post_id":23945015,"comment_id":122908627,"body_markdown":"Here&#39;s the equivalent for a byte array, borrowing from [this answer](https://stackoverflow.com/questions/32459683#answer-32470838) (and its comments): `byte[] array = list.stream().filter(Objects::nonNull).mapToInt(i -&gt; i).collect(ByteArrayOutputStream::new, (b, i) -&gt; b.write((byte) i), (b1, b2) -&gt; { try { b2.writeTo(b1); } catch(IOException e) { } }).toByteArray();`","body":"Here&#39;s the equivalent for a byte array, borrowing from <a href=\"https://stackoverflow.com/questions/32459683#answer-32470838\">this answer</a> (and its comments): <code>byte[] array = list.stream().filter(Objects::nonNull).mapToInt(i -&gt; i).collect(ByteArrayOutputStream::new, (b, i) -&gt; b.write((byte) i), (b1, b2) -&gt; { try { b2.writeTo(b1); } catch(IOException e) { } }).toByteArray();</code>"},{"owner":{"account_id":9696339,"reputation":345,"user_id":7192651,"display_name":"Yuqiu G."},"score":0,"creation_date":1684064927,"post_id":23945015,"comment_id":134459142,"body_markdown":"This exactly why people prefer Python to Java.","body":"This exactly why people prefer Python to Java."}],"tags":[],"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"comment_count":12,"down_vote_count":1,"up_vote_count":1051,"is_accepted":false,"score":1050,"last_activity_date":1681117697,"creation_date":1401408317,"answer_id":23945015,"question_id":960431,"body_markdown":"With streams added in Java 8 we can write code like:\r\n\r\n```\r\nint[] example1 = list.stream().mapToInt(i-&gt;i).toArray();\r\n// OR\r\nint[] example2 = list.stream().mapToInt(Integer::intValue).toArray();\r\n```\r\n\r\n---\r\nThought process:\r\n\r\n- The simple `Stream#toArray` returns an `Object[]` array, so it is not what we want. Also, `Stream#toArray(IntFunction&lt;A[]&gt; generator)` which returns `A[]` doesn&#39;t do what we want, because the generic type `A` can&#39;t represent the primitive type `int`\r\n- So it would be nice to have some kind of stream which would be designed to handle primitive type `int` instead of the reference type like `Integer`, because its `toArray` method will most likely also return an `int[]` array (returning something else like `Object[]` or even boxed `Integer[]` would be unnatural for `int`). And fortunately Java 8 has such a stream which is [`IntStream`][1]\r\n- So now the only thing we need to figure out is how to convert our `Stream&lt;Integer&gt;` (which will be returned from `list.stream()`) to that shiny `IntStream`.  \r\n \r\n  Quick searching in documentation of `Stream` while looking for methods which return `IntStream` points us to our solution which is [`mapToInt(ToIntFunction&lt;? super T&gt; mapper)`][2] method. All we need to do is provide a mapping from `Integer` to `int`.\r\n\r\n  Since [`ToIntFunction`][3] is *functional interface* we can also provide its instance via *lambda* or *method reference*.\r\n\r\n  Anyway to convert Integer to int we can use [`Integer#intValue`][4] so inside `mapToInt` we can write:\r\n\r\n    ```\r\n    mapToInt( (Integer i) -&gt; i.intValue() )\r\n    ```\r\n\r\n    (or some may prefer: `mapToInt(Integer::intValue)`.)\r\n\r\n    But similar code can be generated using unboxing, since the compiler knows that the result of this lambda must be of type `int` (the lambda used in `mapToInt` is an implementation of the `ToIntFunction` interface which expects as body a method of type: `int applyAsInt(T value)` which is expected to return an `int`).\r\n\r\n    So we can simply write:\r\n\r\n    ```\r\n    mapToInt((Integer i)-&gt;i)\r\n    ```\r\n\r\n    Also, since the `Integer` type in `(Integer i)` can be inferred by the compiler because `List&lt;Integer&gt;#stream()` returns a `Stream&lt;Integer&gt;`, we can also skip it which leaves us with\r\n\r\n    ```\r\n    mapToInt(i -&gt; i)\r\n    ```\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#mapToInt-java.util.function.ToIntFunction-\r\n  [3]: https://docs.oracle.com/javase/8/docs/api/java/util/function/ToIntFunction.html\r\n  [4]: https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html#intValue--","title":"How can I convert List&lt;Integer&gt; to int[] in Java?","body":"<p>With streams added in Java 8 we can write code like:</p>\n<pre><code>int[] example1 = list.stream().mapToInt(i-&gt;i).toArray();\n// OR\nint[] example2 = list.stream().mapToInt(Integer::intValue).toArray();\n</code></pre>\n<hr />\n<p>Thought process:</p>\n<ul>\n<li><p>The simple <code>Stream#toArray</code> returns an <code>Object[]</code> array, so it is not what we want. Also, <code>Stream#toArray(IntFunction&lt;A[]&gt; generator)</code> which returns <code>A[]</code> doesn't do what we want, because the generic type <code>A</code> can't represent the primitive type <code>int</code></p>\n</li>\n<li><p>So it would be nice to have some kind of stream which would be designed to handle primitive type <code>int</code> instead of the reference type like <code>Integer</code>, because its <code>toArray</code> method will most likely also return an <code>int[]</code> array (returning something else like <code>Object[]</code> or even boxed <code>Integer[]</code> would be unnatural for <code>int</code>). And fortunately Java 8 has such a stream which is <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html\" rel=\"noreferrer\"><code>IntStream</code></a></p>\n</li>\n<li><p>So now the only thing we need to figure out is how to convert our <code>Stream&lt;Integer&gt;</code> (which will be returned from <code>list.stream()</code>) to that shiny <code>IntStream</code>.</p>\n<p>Quick searching in documentation of <code>Stream</code> while looking for methods which return <code>IntStream</code> points us to our solution which is <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#mapToInt-java.util.function.ToIntFunction-\" rel=\"noreferrer\"><code>mapToInt(ToIntFunction&lt;? super T&gt; mapper)</code></a> method. All we need to do is provide a mapping from <code>Integer</code> to <code>int</code>.</p>\n<p>Since <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/function/ToIntFunction.html\" rel=\"noreferrer\"><code>ToIntFunction</code></a> is <em>functional interface</em> we can also provide its instance via <em>lambda</em> or <em>method reference</em>.</p>\n<p>Anyway to convert Integer to int we can use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html#intValue--\" rel=\"noreferrer\"><code>Integer#intValue</code></a> so inside <code>mapToInt</code> we can write:</p>\n<pre><code>mapToInt( (Integer i) -&gt; i.intValue() )\n</code></pre>\n<p>(or some may prefer: <code>mapToInt(Integer::intValue)</code>.)</p>\n<p>But similar code can be generated using unboxing, since the compiler knows that the result of this lambda must be of type <code>int</code> (the lambda used in <code>mapToInt</code> is an implementation of the <code>ToIntFunction</code> interface which expects as body a method of type: <code>int applyAsInt(T value)</code> which is expected to return an <code>int</code>).</p>\n<p>So we can simply write:</p>\n<pre><code>mapToInt((Integer i)-&gt;i)\n</code></pre>\n<p>Also, since the <code>Integer</code> type in <code>(Integer i)</code> can be inferred by the compiler because <code>List&lt;Integer&gt;#stream()</code> returns a <code>Stream&lt;Integer&gt;</code>, we can also skip it which leaves us with</p>\n<pre><code>mapToInt(i -&gt; i)\n</code></pre>\n</li>\n</ul>\n"},{"comments":[{"owner":{"account_id":723954,"reputation":1847,"user_id":666583,"display_name":"AndrewF"},"score":1,"creation_date":1518482327,"post_id":33999155,"comment_id":84516620,"body_markdown":"Note that `mapToInt(Integer::intValue)` and `mapToInt(i -&gt; i.intValue())` are strictly identical (two ways of expressing the exact same method call), and all three are effectively identical (same bytecode).","body":"Note that <code>mapToInt(Integer::intValue)</code> and <code>mapToInt(i -&gt; i.intValue())</code> are strictly identical (two ways of expressing the exact same method call), and all three are effectively identical (same bytecode)."},{"owner":{"account_id":1647191,"reputation":1813,"user_id":1518516,"accept_rate":88,"display_name":"kzs"},"score":0,"creation_date":1622645967,"post_id":33999155,"comment_id":119852824,"body_markdown":"This is awesome, thanks for sharing it.!","body":"This is awesome, thanks for sharing it.!"}],"tags":[],"owner":{"account_id":1960454,"reputation":44539,"user_id":1762224,"accept_rate":61,"display_name":"Mr. Polywhirl"},"comment_count":2,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1448888080,"creation_date":1448888080,"answer_id":33999155,"question_id":960431,"body_markdown":"If you are simply mapping an `Integer` to an `int` then you should consider [using parallelism][1], since your mapping logic does not rely on any variables outside its scope.\r\n\r\n    int[] arr = list.parallelStream().mapToInt(Integer::intValue).toArray();\r\n\r\nJust be aware of this \r\n\r\n&gt; Note that parallelism is not automatically faster than performing operations serially, although it can be if you have enough data and processor cores. While aggregate operations enable you to more easily implement parallelism, it is still your responsibility to determine if your application is suitable for parallelism.\r\n\r\n---\r\n\r\nThere are two ways to map Integers to their primitive form:\r\n\r\n1. Via a `ToIntFunction`.\r\n\r\n        mapToInt(Integer::intValue)\r\n2. Via explicit [unboxing][3] with lambda expression.\r\n\r\n        mapToInt(i -&gt; i.intValue())\r\n3. Via implicit (auto-) unboxing with lambda expression.\r\n\r\n        mapToInt(i -&gt; i)\r\n\r\n---\r\n\r\nGiven a list with a `null` value\r\n\r\n    List&lt;Integer&gt; list = Arrays.asList(1, 2, null, 4, 5);\r\n\r\nHere are three options to handle `null`:\r\n\r\n1. Filter out the `null` values before mapping.\r\n\r\n        int[] arr = list.parallelStream().filter(Objects::nonNull).mapToInt(Integer::intValue).toArray();\r\n\r\n2. Map the `null` values to a default value.\r\n\r\n        int[] arr = list.parallelStream().map(i -&gt; i == null ? -1 : i).mapToInt(Integer::intValue).toArray();\r\n\r\n3. Handle `null` inside the lambda expression.\r\n\r\n        int[] arr = list.parallelStream().mapToInt(i -&gt; i == null ? -1 : i.intValue()).toArray();\r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/collections/streams/parallelism.html\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/util/Collection.html#parallelStream--\r\n  [3]: https://docs.oracle.com/javase/tutorial/java/data/autoboxing.html","title":"How can I convert List&lt;Integer&gt; to int[] in Java?","body":"<p>If you are simply mapping an <code>Integer</code> to an <code>int</code> then you should consider <a href=\"https://docs.oracle.com/javase/tutorial/collections/streams/parallelism.html\" rel=\"noreferrer\">using parallelism</a>, since your mapping logic does not rely on any variables outside its scope.</p>\n\n<pre><code>int[] arr = list.parallelStream().mapToInt(Integer::intValue).toArray();\n</code></pre>\n\n<p>Just be aware of this </p>\n\n<blockquote>\n  <p>Note that parallelism is not automatically faster than performing operations serially, although it can be if you have enough data and processor cores. While aggregate operations enable you to more easily implement parallelism, it is still your responsibility to determine if your application is suitable for parallelism.</p>\n</blockquote>\n\n<hr>\n\n<p>There are two ways to map Integers to their primitive form:</p>\n\n<ol>\n<li><p>Via a <code>ToIntFunction</code>.</p>\n\n<pre><code>mapToInt(Integer::intValue)\n</code></pre></li>\n<li><p>Via explicit <a href=\"https://docs.oracle.com/javase/tutorial/java/data/autoboxing.html\" rel=\"noreferrer\">unboxing</a> with lambda expression.</p>\n\n<pre><code>mapToInt(i -&gt; i.intValue())\n</code></pre></li>\n<li><p>Via implicit (auto-) unboxing with lambda expression.</p>\n\n<pre><code>mapToInt(i -&gt; i)\n</code></pre></li>\n</ol>\n\n<hr>\n\n<p>Given a list with a <code>null</code> value</p>\n\n<pre><code>List&lt;Integer&gt; list = Arrays.asList(1, 2, null, 4, 5);\n</code></pre>\n\n<p>Here are three options to handle <code>null</code>:</p>\n\n<ol>\n<li><p>Filter out the <code>null</code> values before mapping.</p>\n\n<pre><code>int[] arr = list.parallelStream().filter(Objects::nonNull).mapToInt(Integer::intValue).toArray();\n</code></pre></li>\n<li><p>Map the <code>null</code> values to a default value.</p>\n\n<pre><code>int[] arr = list.parallelStream().map(i -&gt; i == null ? -1 : i).mapToInt(Integer::intValue).toArray();\n</code></pre></li>\n<li><p>Handle <code>null</code> inside the lambda expression.</p>\n\n<pre><code>int[] arr = list.parallelStream().mapToInt(i -&gt; i == null ? -1 : i.intValue()).toArray();\n</code></pre></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":1712726,"reputation":6528,"user_id":1570415,"display_name":"Donald Raab"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1456860767,"creation_date":1456786614,"answer_id":35711427,"question_id":960431,"body_markdown":"With [Eclipse Collections][1], you can do the following if you have a list of type  `java.util.List&lt;Integer&gt;`:\r\n\r\n    List&lt;Integer&gt; integers = Lists.mutable.with(1, 2, 3, 4, 5);\r\n    int[] ints = LazyIterate.adapt(integers).collectInt(i -&gt; i).toArray();\r\n    \r\n    Assert.assertArrayEquals(new int[]{1, 2, 3, 4, 5}, ints);\r\n\r\nIf you already have an Eclipse Collections type like [`MutableList`][2], you can do the following:\r\n\r\n    MutableList&lt;Integer&gt; integers = Lists.mutable.with(1, 2, 3, 4, 5);\r\n    int[] ints = integers.asLazy().collectInt(i -&gt; i).toArray();\r\n    \r\n    Assert.assertArrayEquals(new int[]{1, 2, 3, 4, 5}, ints);\r\n\r\n\r\nNote: I am a committer for Eclipse Collections\r\n\r\n\r\n  [1]: https://www.eclipse.org/collections/\r\n  [2]: https://www.eclipse.org/collections/javadoc/7.0.0/org/eclipse/collections/api/list/MutableList.html","title":"How can I convert List&lt;Integer&gt; to int[] in Java?","body":"<p>With <a href=\"https://www.eclipse.org/collections/\" rel=\"nofollow\">Eclipse Collections</a>, you can do the following if you have a list of type  <code>java.util.List&lt;Integer&gt;</code>:</p>\n\n<pre><code>List&lt;Integer&gt; integers = Lists.mutable.with(1, 2, 3, 4, 5);\nint[] ints = LazyIterate.adapt(integers).collectInt(i -&gt; i).toArray();\n\nAssert.assertArrayEquals(new int[]{1, 2, 3, 4, 5}, ints);\n</code></pre>\n\n<p>If you already have an Eclipse Collections type like <a href=\"https://www.eclipse.org/collections/javadoc/7.0.0/org/eclipse/collections/api/list/MutableList.html\" rel=\"nofollow\"><code>MutableList</code></a>, you can do the following:</p>\n\n<pre><code>MutableList&lt;Integer&gt; integers = Lists.mutable.with(1, 2, 3, 4, 5);\nint[] ints = integers.asLazy().collectInt(i -&gt; i).toArray();\n\nAssert.assertArrayEquals(new int[]{1, 2, 3, 4, 5}, ints);\n</code></pre>\n\n<p>Note: I am a committer for Eclipse Collections</p>\n"},{"tags":[],"owner":{"account_id":3050838,"reputation":2195,"user_id":2585433,"accept_rate":64,"display_name":"Noor Nawaz"},"comment_count":0,"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1649878105,"creation_date":1468233494,"answer_id":38304849,"question_id":960431,"body_markdown":"Here is a **Java 8** single line code for this:\r\n\r\n    public int[] toIntArray(List&lt;Integer&gt; intList){\r\n        return intList.stream().mapToInt(Integer::intValue).toArray();\r\n    }\r\n\r\n","title":"How can I convert List&lt;Integer&gt; to int[] in Java?","body":"<p>Here is a <strong>Java 8</strong> single line code for this:</p>\n<pre><code>public int[] toIntArray(List&lt;Integer&gt; intList){\n    return intList.stream().mapToInt(Integer::intValue).toArray();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":464810,"reputation":2023,"user_id":868540,"accept_rate":72,"display_name":"Pumphouse"},"comment_count":0,"down_vote_count":0,"up_vote_count":85,"is_accepted":false,"score":85,"last_activity_date":1541570151,"creation_date":1473395402,"answer_id":39403890,"question_id":960431,"body_markdown":"**Java 8** has given us an easy way to do this via streams...\r\n\r\nUsing the collections `stream()` function and then mapping to ints, you&#39;ll get an IntStream. With the `IntStream` we can call toArray() which gives us `int []`\r\n\r\n    int [] ints = list.stream().mapToInt(Integer::intValue).toArray();\r\n\r\n[to int []][1]\r\n\r\n[to IntStream][2]\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html\r\n  [2]: https://stackoverflow.com/questions/24633913/how-do-i-get-an-intstream-from-a-listinteger","title":"How can I convert List&lt;Integer&gt; to int[] in Java?","body":"<p><strong>Java 8</strong> has given us an easy way to do this via streams...</p>\n\n<p>Using the collections <code>stream()</code> function and then mapping to ints, you'll get an IntStream. With the <code>IntStream</code> we can call toArray() which gives us <code>int []</code></p>\n\n<pre><code>int [] ints = list.stream().mapToInt(Integer::intValue).toArray();\n</code></pre>\n\n<p><a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html\" rel=\"noreferrer\">to int []</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/24633913/how-do-i-get-an-intstream-from-a-listinteger\">to IntStream</a></p>\n"},{"comments":[{"owner":{"account_id":723954,"reputation":1847,"user_id":666583,"display_name":"AndrewF"},"score":3,"creation_date":1518481833,"post_id":40338454,"comment_id":84516492,"body_markdown":"&quot;Valid&quot; is not the same as &quot;ideal&quot;, and performance problems can be considered bugs. `List#get(int)` is not guaranteed to be a constant-time operation, as you may have assumed, so it shouldn&#39;t be used for iteration. Instead, use an iterator, which is designed for this use case. Either use the Java 5+ foreach loop or call `List#iterator()` and work with the iterator. Also, the list&#39;s size could change during this loop, leading to either an `IndexOutOfBoundsException` or an incomplete array. Many iterator implementations have well-documented strategies to handle this situation.","body":"&quot;Valid&quot; is not the same as &quot;ideal&quot;, and performance problems can be considered bugs. <code>List#get(int)</code> is not guaranteed to be a constant-time operation, as you may have assumed, so it shouldn&#39;t be used for iteration. Instead, use an iterator, which is designed for this use case. Either use the Java 5+ foreach loop or call <code>List#iterator()</code> and work with the iterator. Also, the list&#39;s size could change during this loop, leading to either an <code>IndexOutOfBoundsException</code> or an incomplete array. Many iterator implementations have well-documented strategies to handle this situation."},{"owner":{"account_id":4139180,"reputation":5596,"user_id":3395015,"accept_rate":85,"display_name":"garryp"},"score":1,"creation_date":1637193406,"post_id":40338454,"comment_id":123763989,"body_markdown":"Far better than the dog&#39;s dinner that is Java streams","body":"Far better than the dog&#39;s dinner that is Java streams"},{"owner":{"account_id":24885,"reputation":30828,"user_id":63550,"accept_rate":78,"display_name":"Peter Mortensen"},"score":0,"creation_date":1649878640,"post_id":40338454,"comment_id":126990145,"body_markdown":"This is ***identical*** to the one in the question. The question was *&quot;Is there&#39;s a better way to do this?&quot;*. How does this answer the question? Most of the other answers attempt to answer the question.","body":"This is <b><i>identical</i></b> to the one in the question. The question was <i>&quot;Is there&#39;s a better way to do this?&quot;</i>. How does this answer the question? Most of the other answers attempt to answer the question."}],"tags":[],"owner":{"account_id":2094393,"reputation":1989,"user_id":1863510,"display_name":"THANN Phearum"},"comment_count":3,"down_vote_count":1,"up_vote_count":10,"is_accepted":false,"score":9,"last_activity_date":1477901065,"creation_date":1477901065,"answer_id":40338454,"question_id":960431,"body_markdown":"This simple loop is always correct! no bugs\r\n\r\n      int[] integers = new int[myList.size()];\r\n      for (int i = 0; i &lt; integers.length; i++) {\r\n          integers[i] = myList.get(i);\r\n      }","title":"How can I convert List&lt;Integer&gt; to int[] in Java?","body":"<p>This simple loop is always correct! no bugs</p>\n\n<pre><code>  int[] integers = new int[myList.size()];\n  for (int i = 0; i &lt; integers.length; i++) {\n      integers[i] = myList.get(i);\n  }\n</code></pre>\n"}],"owner":{"display_name":"unknown"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":776503,"favorite_count":0,"down_vote_count":1,"up_vote_count":768,"closed_date":1540381860,"accepted_answer_id":960449,"answer_count":16,"score":767,"last_activity_date":1681117697,"creation_date":1244319618,"question_id":960431,"body_markdown":"How can I convert a `List&lt;Integer&gt;` to `int[]` in Java?\r\n\r\nI&#39;m confused because `List.toArray()` actually returns an `Object[]`, which can be cast to neither `Integer[]` nor `int[]`.\r\n\r\nRight now I&#39;m using a loop to do so:\r\n\r\n    int[] toIntArray(List&lt;Integer&gt; list) {\r\n      int[] ret = new int[list.size()];\r\n      for(int i = 0; i &lt; ret.length; i++)\r\n        ret[i] = list.get(i);\r\n      return ret;\r\n    }\r\n\r\nIs there&#39;s a better way to do this?\r\n\r\n&lt;sub&gt;This is similar to the question\r\n*https://stackoverflow.com/questions/880581/java-convert-int-to-integer*.&lt;/sub&gt;\r\n\r\n\r\n","title":"How can I convert List&lt;Integer&gt; to int[] in Java?","body":"<p>How can I convert a <code>List&lt;Integer&gt;</code> to <code>int[]</code> in Java?</p>\n<p>I'm confused because <code>List.toArray()</code> actually returns an <code>Object[]</code>, which can be cast to neither <code>Integer[]</code> nor <code>int[]</code>.</p>\n<p>Right now I'm using a loop to do so:</p>\n<pre><code>int[] toIntArray(List&lt;Integer&gt; list) {\n  int[] ret = new int[list.size()];\n  for(int i = 0; i &lt; ret.length; i++)\n    ret[i] = list.get(i);\n  return ret;\n}\n</code></pre>\n<p>Is there's a better way to do this?</p>\n<p><sub>This is similar to the question\n<em><a href=\"https://stackoverflow.com/questions/880581/java-convert-int-to-integer\">How can I convert int[] to Integer[] in Java?</a></em>.</sub></p>\n"},{"tags":["java","urlencode","oauth-1.0a"],"answers":[{"tags":[],"owner":{"account_id":7655262,"reputation":7506,"user_id":5802417,"display_name":"Michael Gantman"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1681117429,"creation_date":1681117429,"answer_id":75975708,"question_id":75974411,"body_markdown":"You are overthinking it. The way java stores strings internally is completely irrelevant to the matter and is transparent to you as a programmer. Just set your string as a header value and it will work. I wrote my own simplified Http client based on `HttpsURLConnection` class and I used it it to set auth header for authentication as well as many other headers and it works just fine. Here is a [Javadoc for my HttpClient][1] and here is a [GitHub][2] page for my MgntUtils Library. There you can see the source code. Here is the [HttpClient class source code][3]. See the line 344.\r\n\r\n\r\n  [1]: http://michaelgantman.github.io/Mgnt/docs/com/mgnt/lifecycle/management/httpclient/HttpClient.html\r\n  [2]: https://github.com/michaelgantman/Mgnt\r\n  [3]: https://github.com/michaelgantman/Mgnt/blob/master/src/main/java/com/mgnt/lifecycle/management/httpclient/HttpClient.java","title":"Set Authorization Header with UTF-8 in Java","body":"<p>You are overthinking it. The way java stores strings internally is completely irrelevant to the matter and is transparent to you as a programmer. Just set your string as a header value and it will work. I wrote my own simplified Http client based on <code>HttpsURLConnection</code> class and I used it it to set auth header for authentication as well as many other headers and it works just fine. Here is a <a href=\"http://michaelgantman.github.io/Mgnt/docs/com/mgnt/lifecycle/management/httpclient/HttpClient.html\" rel=\"nofollow noreferrer\">Javadoc for my HttpClient</a> and here is a <a href=\"https://github.com/michaelgantman/Mgnt\" rel=\"nofollow noreferrer\">GitHub</a> page for my MgntUtils Library. There you can see the source code. Here is the <a href=\"https://github.com/michaelgantman/Mgnt/blob/master/src/main/java/com/mgnt/lifecycle/management/httpclient/HttpClient.java\" rel=\"nofollow noreferrer\">HttpClient class source code</a>. See the line 344.</p>\n"}],"owner":{"account_id":14337166,"reputation":69,"user_id":19422364,"display_name":"HLR"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":141,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1681121395,"accepted_answer_id":75975708,"answer_count":1,"score":0,"last_activity_date":1681117429,"creation_date":1681103403,"question_id":75974411,"body_markdown":"I am trying to perform the OAuth 1.0a authentication flow using Java. OAuth 1.0a requires &quot;All parameter names and values [to be] escaped using the RFC3985 percent-encoding mechanism... Text names and values MUST be encoded as UTF-8 octets.&quot; I would like to use the HttpsURLConnection class and use the setRequestProperty method to add the oauth parameters to the Authentication header. However, Java internally stores strings with UTF-16 encoding. I built a method that performs the percent encoding for me, so the string &quot;Hello World!&quot; is successfully changed to &quot;Hello%20World%21&quot;. Even though it follows percent-encoding, it is still internally stored in UTF-16. If I pass this string into the setRequestProperty under an arbitrary key, this would be unreadable to a server accepting UTF-8 data. How do I add UTF-8 text to an HTTP header? The setRequestProperty method takes two Strings, so no matter what, I can only pass in data stored in UTF-16. I have also converted the text data to a byte array that is in UTF-8 format, but I cannot use an array as input to the setRequestProperty.","title":"Set Authorization Header with UTF-8 in Java","body":"<p>I am trying to perform the OAuth 1.0a authentication flow using Java. OAuth 1.0a requires &quot;All parameter names and values [to be] escaped using the RFC3985 percent-encoding mechanism... Text names and values MUST be encoded as UTF-8 octets.&quot; I would like to use the HttpsURLConnection class and use the setRequestProperty method to add the oauth parameters to the Authentication header. However, Java internally stores strings with UTF-16 encoding. I built a method that performs the percent encoding for me, so the string &quot;Hello World!&quot; is successfully changed to &quot;Hello%20World%21&quot;. Even though it follows percent-encoding, it is still internally stored in UTF-16. If I pass this string into the setRequestProperty under an arbitrary key, this would be unreadable to a server accepting UTF-8 data. How do I add UTF-8 text to an HTTP header? The setRequestProperty method takes two Strings, so no matter what, I can only pass in data stored in UTF-16. I have also converted the text data to a byte array that is in UTF-8 format, but I cannot use an array as input to the setRequestProperty.</p>\n"},{"tags":["java","kotlin","generics"],"comments":[{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1681118447,"post_id":75975585,"comment_id":134000872,"body_markdown":"The most viable solution is going to be to remove the generics on the method and to override it in SettingColor to return a SettingColor.  That&#39;s as good as it&#39;s going to get.","body":"The most viable solution is going to be to remove the generics on the method and to override it in SettingColor to return a SettingColor.  That&#39;s as good as it&#39;s going to get."}],"owner":{"account_id":25807987,"reputation":63,"user_id":19549245,"display_name":"OffeeX"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":315,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1681117021,"creation_date":1681116367,"question_id":75975585,"body_markdown":"`val color = setting(&quot;Color&quot;).color().depend(mode) { mode.like(&quot;Lightmap&quot;) }`\r\n\r\n```\r\nclass SettingColor(n: String, d: String, val color: ColorMutable) : Setting(n, d)\r\n```\r\n\r\n```\r\nabstract class Setting(var name: String, val description: String) {\r\n    fun &lt;T : Setting&gt;depend(vararg dependencies: Setting, resolver: () -&gt; Boolean): T {\r\n\t\treturn this as T\r\n\t}\r\n    class Builder(\r\n\t    private val m: Module,\r\n\t    private val n: String,\r\n\t    private val d: String\r\n    ) {\r\n        private fun &lt;S : Setting&gt;Module.setup(s: S): S {\r\n\t\t\t  g?.settings?.add(s)\r\n\t\t\t  this.addSetting(s)\r\n\t\t\t  return s\r\n\t\t}\r\n        fun color(color: ColorMutable = ColorMutable.WHITE) = m.setup(SettingColor(n, d, color))\r\n}\r\n```\r\n\r\n\r\nProblem with the `depend()` method. My IDE says, there are not enough info to infer type of T. However  `color()` method i&#39;m using here instantiates `SettingColor`, which is a direct child of the \r\n`Setting` class, in which `depend()` method is written in.\r\n\r\nThe only possible solution, which i don&#39;t really want to stick to, is to explicitly set type for `depend()` like this:\r\n\r\n`val color = setting(&quot;Color&quot;).color().depend&lt;SettingColor&gt;(mode) { mode.like(&quot;Lightmap&quot;) }`\r\n\r\nUPD: Kotlin version is 1.8.10","title":"Kotlin: Not enough information to infer type variable T","body":"<p><code>val color = setting(&quot;Color&quot;).color().depend(mode) { mode.like(&quot;Lightmap&quot;) }</code></p>\n<pre><code>class SettingColor(n: String, d: String, val color: ColorMutable) : Setting(n, d)\n</code></pre>\n<pre><code>abstract class Setting(var name: String, val description: String) {\n    fun &lt;T : Setting&gt;depend(vararg dependencies: Setting, resolver: () -&gt; Boolean): T {\n        return this as T\n    }\n    class Builder(\n        private val m: Module,\n        private val n: String,\n        private val d: String\n    ) {\n        private fun &lt;S : Setting&gt;Module.setup(s: S): S {\n              g?.settings?.add(s)\n              this.addSetting(s)\n              return s\n        }\n        fun color(color: ColorMutable = ColorMutable.WHITE) = m.setup(SettingColor(n, d, color))\n}\n</code></pre>\n<p>Problem with the <code>depend()</code> method. My IDE says, there are not enough info to infer type of T. However  <code>color()</code> method i'm using here instantiates <code>SettingColor</code>, which is a direct child of the\n<code>Setting</code> class, in which <code>depend()</code> method is written in.</p>\n<p>The only possible solution, which i don't really want to stick to, is to explicitly set type for <code>depend()</code> like this:</p>\n<p><code>val color = setting(&quot;Color&quot;).color().depend&lt;SettingColor&gt;(mode) { mode.like(&quot;Lightmap&quot;) }</code></p>\n<p>UPD: Kotlin version is 1.8.10</p>\n"},{"tags":["java","audio"],"answers":[{"tags":[],"owner":{"account_id":9934708,"reputation":997,"user_id":7353417,"display_name":"pierpy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681116773,"creation_date":1681116773,"answer_id":75975633,"question_id":75971209,"body_markdown":"The reverb is tied to MIDI CC 91. You need to set a message to that controller with value `0` , before sending `channel.noteOn` message. Maybe you want to set to `0` all other effects, so take a look at [Control change messages specifications](https://www.midi.org/specifications-old/item/table-3-control-change-messages-data-bytes-2)","title":"How can I create a sound with Java without special effects being added to it?","body":"<p>The reverb is tied to MIDI CC 91. You need to set a message to that controller with value <code>0</code> , before sending <code>channel.noteOn</code> message. Maybe you want to set to <code>0</code> all other effects, so take a look at <a href=\"https://www.midi.org/specifications-old/item/table-3-control-change-messages-data-bytes-2\" rel=\"nofollow noreferrer\">Control change messages specifications</a></p>\n"}],"owner":{"account_id":25160220,"reputation":1,"user_id":19004507,"display_name":"RyanJK5"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1681116773,"creation_date":1681052178,"question_id":75971209,"body_markdown":"I&#39;ve been trying to figure this out for a while now. This is the code I&#39;m using to play sounds:\r\n\r\n    private void playSound(int num) {\r\n        if (num &lt; 0) {\r\n            return;\r\n        }\r\n        MidiChannel channel = synth.getChannels()[0];\r\n        final int note = (int) (127f / maxNum * num);\r\n        channel.noteOn(note, 80);\r\n    }\r\nAll the MIDI channels have some kind of reverb or added effects on them. I tried stopping the sound after sleeping for a given amount of time (tried using both noteOff and noteOn with a velocity of 0), but the note never stops playing when I call these methods. For context, I&#39;m trying to recreate one of those [sorting algorithm visualizers](https://youtu.be/kPRA0W1kECg), so I want the sounds being played to sound similar to that.","title":"How can I create a sound with Java without special effects being added to it?","body":"<p>I've been trying to figure this out for a while now. This is the code I'm using to play sounds:</p>\n<pre><code>private void playSound(int num) {\n    if (num &lt; 0) {\n        return;\n    }\n    MidiChannel channel = synth.getChannels()[0];\n    final int note = (int) (127f / maxNum * num);\n    channel.noteOn(note, 80);\n}\n</code></pre>\n<p>All the MIDI channels have some kind of reverb or added effects on them. I tried stopping the sound after sleeping for a given amount of time (tried using both noteOff and noteOn with a velocity of 0), but the note never stops playing when I call these methods. For context, I'm trying to recreate one of those <a href=\"https://youtu.be/kPRA0W1kECg\" rel=\"nofollow noreferrer\">sorting algorithm visualizers</a>, so I want the sounds being played to sound similar to that.</p>\n"},{"tags":["java","intellij-idea","casting","compiler-warnings","redundancy"],"answers":[{"comments":[{"owner":{"account_id":4108248,"reputation":552,"user_id":3371582,"display_name":"IJR"},"score":0,"creation_date":1681119536,"post_id":75975567,"comment_id":134001045,"body_markdown":"But I want to map a collection of objects to desired type. Some case (first function), I know this collection contains `String` values as `Object`, this is the reason I want to do this mapping. I want to map `Collection&lt;Object&gt;` that contains `String`s to `Collection&lt;String&gt;`. Other case (second function), I know this collection contains `Map`s (each entry is an attribute of `Foo`) as `Object`. I want to map `Collection&lt;Object&gt;` that contains `Map&lt;String, Object&gt;` to `Collection&lt;Foo&gt;`.","body":"But I want to map a collection of objects to desired type. Some case (first function), I know this collection contains <code>String</code> values as <code>Object</code>, this is the reason I want to do this mapping. I want to map <code>Collection&lt;Object&gt;</code> that contains <code>String</code>s to <code>Collection&lt;String&gt;</code>. Other case (second function), I know this collection contains <code>Map</code>s (each entry is an attribute of <code>Foo</code>) as <code>Object</code>. I want to map <code>Collection&lt;Object&gt;</code> that contains <code>Map&lt;String, Object&gt;</code> to <code>Collection&lt;Foo&gt;</code>."}],"tags":[],"owner":{"account_id":2818342,"reputation":299906,"user_id":2422776,"display_name":"Mureinik"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1681116199,"creation_date":1681116199,"answer_id":75975567,"question_id":75975539,"body_markdown":"The value type of the map is `Function&lt;Object, ?&gt;` - i.e., it doesn&#39;t matter what the return type of the function is.\r\n\r\nSince casting doesn&#39;t really &quot;do&quot; anything, just let&#39;s the compiler know the type of the object, and since you don&#39;t need it to be a string in order to compile, you can just remove it.\r\n\r\nHaving said that, there also is no reason to &quot;reimplement&quot; the function `v -&gt; v`, and you could use `Function.identity()` instead.","title":"Casting to String is redundant","body":"<p>The value type of the map is <code>Function&lt;Object, ?&gt;</code> - i.e., it doesn't matter what the return type of the function is.</p>\n<p>Since casting doesn't really &quot;do&quot; anything, just let's the compiler know the type of the object, and since you don't need it to be a string in order to compile, you can just remove it.</p>\n<p>Having said that, there also is no reason to &quot;reimplement&quot; the function <code>v -&gt; v</code>, and you could use <code>Function.identity()</code> instead.</p>\n"}],"owner":{"account_id":4108248,"reputation":552,"user_id":3371582,"display_name":"IJR"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":167,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":75975567,"answer_count":1,"score":0,"last_activity_date":1681116357,"creation_date":1681115860,"question_id":75975539,"body_markdown":"Why does IntelliJ tell this casting from Object to String is redundant?\r\n\r\n\r\n    public class Utils {\r\n    \t\r\n    \tprivate static Map&lt;Class, Function&lt;Object, ?&gt;&gt; functions = new HashMap&lt;&gt;();\r\n    \t\r\n    \tstatic {\r\n    \t\tfunctions.put(String.class, v -&gt; (String) v);\r\n    \t\tfunctions.put(Foo.class, v -&gt; {\r\n    \t\t\tFoo foo = new Foo();\r\n    \t\t\tfoo.setA((String) ((Map&lt;String, Object&gt;) v).get(&quot;A&quot;));\r\n    \t\t\tfoo.setB((String) ((Map&lt;String, Object&gt;) v).get(&quot;B&quot;));\r\n    \t\t\treturn foo;\r\n    \t\t});\r\n    \t}\r\n    }\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/1nv0I.png","title":"Casting to String is redundant","body":"<p>Why does IntelliJ tell this casting from Object to String is redundant?</p>\n<pre><code>public class Utils {\n    \n    private static Map&lt;Class, Function&lt;Object, ?&gt;&gt; functions = new HashMap&lt;&gt;();\n    \n    static {\n        functions.put(String.class, v -&gt; (String) v);\n        functions.put(Foo.class, v -&gt; {\n            Foo foo = new Foo();\n            foo.setA((String) ((Map&lt;String, Object&gt;) v).get(&quot;A&quot;));\n            foo.setB((String) ((Map&lt;String, Object&gt;) v).get(&quot;B&quot;));\n            return foo;\n        });\n    }\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/1nv0I.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1nv0I.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","spring","hibernate","jackson"],"comments":[{"owner":{"account_id":24109083,"reputation":150,"user_id":18079889,"display_name":"Mohammed Fataka"},"score":0,"creation_date":1681045924,"post_id":75969017,"comment_id":133992811,"body_markdown":"Does this answer your question? [Spring Boot @ManyToOne only Id @JsonProperty](https://stackoverflow.com/questions/60357405/spring-boot-manytoone-only-id-jsonproperty)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/60357405/spring-boot-manytoone-only-id-jsonproperty\">Spring Boot @ManyToOne only Id @JsonProperty</a>"}],"answers":[{"comments":[{"owner":{"account_id":26929571,"reputation":25,"user_id":20502277,"display_name":"velovatik"},"score":0,"creation_date":1681291814,"post_id":75975563,"comment_id":134031541,"body_markdown":"Actually now it creates new manufacturer w/o reference to already existing","body":"Actually now it creates new manufacturer w/o reference to already existing"}],"tags":[],"owner":{"account_id":2261604,"reputation":72,"user_id":1991545,"display_name":"abhi_88"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681116158,"creation_date":1681116158,"answer_id":75975563,"question_id":75969017,"body_markdown":"Try to implement link using hateoas.  Here is a sample request data.    \r\n\r\n    {\r\n    &quot;title&quot;: &quot;Model&quot;,\r\n    &quot;sex&quot;: &quot;CHILD&quot;,\r\n    &quot;manufacturer&quot;: \r\n\t            &quot;_links&quot;: {\r\n                &quot;self&quot;: {\r\n                    &quot;href&quot;: &quot;/manufacturers/1&quot;\r\n                }\r\n            },\r\n    &quot;sizes&quot;: [\r\n      {\r\n        &quot;size&quot;: 37,\r\n        &quot;quantity&quot;: 5\r\n      },\r\n      {\r\n        &quot;size&quot;: 39,\r\n        &quot;quantity&quot;: 4\r\n      }\r\n    ]\r\n  }\r\nNow no need to provide all Manufacturer fields in request data, instead you need to provide only id/","title":"How to send only Id foreign key in POST request via JSON?","body":"<p>Try to implement link using hateoas.  Here is a sample request data.</p>\n<pre><code>{\n&quot;title&quot;: &quot;Model&quot;,\n&quot;sex&quot;: &quot;CHILD&quot;,\n&quot;manufacturer&quot;: \n            &quot;_links&quot;: {\n            &quot;self&quot;: {\n                &quot;href&quot;: &quot;/manufacturers/1&quot;\n            }\n        },\n&quot;sizes&quot;: [\n  {\n    &quot;size&quot;: 37,\n    &quot;quantity&quot;: 5\n  },\n  {\n    &quot;size&quot;: 39,\n    &quot;quantity&quot;: 4\n  }\n]\n</code></pre>\n<p>}\nNow no need to provide all Manufacturer fields in request data, instead you need to provide only id/</p>\n"}],"owner":{"account_id":26929571,"reputation":25,"user_id":20502277,"display_name":"velovatik"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":133,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1681116158,"creation_date":1681020352,"question_id":75969017,"body_markdown":"I make internet shoe shop and now I create REST Controller for its goods, so now I&#39;m testing POST request and I have relation to good&#39;s manufacturer with manufacturerId\r\n[![DB Architecture](https://i.stack.imgur.com/asonT.png)](https://i.stack.imgur.com/asonT.png)\r\nBut now I need to write all information about manufacturer into JSON, but I think it&#39;s not a good practice to act like that.\r\n\r\nGood entity:\r\n```\r\n@Entity\r\n@Table(name = &quot;goods&quot;)\r\npublic class Good {\r\n    @Id\r\n    @Column(name = &quot;id&quot;)\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    //@JsonIgnore\r\n    private int id;\r\n\r\n    @Column(name = &quot;Title&quot;)\r\n    private String title;\r\n\r\n//    @Enumerated(EnumType.STRING)\r\n//    @Column(name = &quot;sex&quot;)\r\n//    private sexType sexType;\r\n\r\n    @Column(name = &quot;sex&quot;)\r\n    private String sex;\r\n\r\n    /**\r\n     * proved and it actually works!\r\n     */\r\n    //@JsonManagedReference\r\n    @ManyToOne(cascade = {CascadeType.PERSIST, CascadeType.DETACH,\r\n    CascadeType.REFRESH, CascadeType.MERGE})\r\n    @JoinColumn(name = &quot;ManufacturerId&quot;)\r\n    //@JsonIgnoreProperties\r\n    Manufacturer manufacturer; //Many goods can refer to one manufacturer\r\n\r\n\r\n    @JsonManagedReference\r\n    @OneToMany(cascade = {CascadeType.PERSIST, CascadeType.DETACH,\r\n            CascadeType.REFRESH, CascadeType.MERGE}, mappedBy = &quot;good&quot;)//Uni-directional reference to size array\r\n    List&lt;Size&gt; sizes;\r\n```\r\n\r\nManufacturer entity:\r\n\r\n```\r\n@Entity\r\n@Table(name = &quot;manufacturers&quot;)\r\npublic class Manufacturer {\r\n    @Id\r\n    @Column(name = &quot;id&quot;)\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private int id;\r\n\r\n    @Column(name = &quot;ManufacturerName&quot;)\r\n    private String manufacturerName;\r\n\r\n    @Column(name = &quot;Address&quot;)\r\n    private String address;\r\n\r\n    @Column(name = &quot;Telephone&quot;)\r\n    private String telephone;\r\n\r\n    //@JsonBackReference\r\n    @OneToMany(cascade = {CascadeType.PERSIST, CascadeType.DETACH,\r\n            CascadeType.REFRESH, CascadeType.MERGE},\r\n            mappedBy = &quot;manufacturer&quot;)\r\n    @JsonIgnore\r\n    private List&lt;Good&gt; goods;\r\n```\r\nJSON example for POST request:\r\n\r\n```\r\n  {\r\n    &quot;title&quot;: &quot;Model&quot;,\r\n    &quot;sex&quot;: &quot;CHILD&quot;,\r\n    &quot;manufacturer&quot;: {\r\n      &quot;id&quot;: 1,\r\n      &quot;manufacturerName&quot;: &quot;Ralf&quot;,\r\n      &quot;address&quot;: &quot;Moscow&quot;,\r\n      &quot;telephone&quot;: &quot;9-999-999-99-99&quot;\r\n    },\r\n    &quot;sizes&quot;: [\r\n      {\r\n        &quot;size&quot;: 37,\r\n        &quot;quantity&quot;: 5\r\n      },\r\n      {\r\n        &quot;size&quot;: 39,\r\n        &quot;quantity&quot;: 4\r\n      }\r\n    ]\r\n  }\r\n```\r\nHow can I send only manufacturerId?\r\n\r\n\r\nIf I use `@JsonIgnore` annotatinon, I think I won&#39;t get additional info about manufacturer","title":"How to send only Id foreign key in POST request via JSON?","body":"<p>I make internet shoe shop and now I create REST Controller for its goods, so now I'm testing POST request and I have relation to good's manufacturer with manufacturerId\n<a href=\"https://i.stack.imgur.com/asonT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/asonT.png\" alt=\"DB Architecture\" /></a>\nBut now I need to write all information about manufacturer into JSON, but I think it's not a good practice to act like that.</p>\n<p>Good entity:</p>\n<pre><code>@Entity\n@Table(name = &quot;goods&quot;)\npublic class Good {\n    @Id\n    @Column(name = &quot;id&quot;)\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    //@JsonIgnore\n    private int id;\n\n    @Column(name = &quot;Title&quot;)\n    private String title;\n\n//    @Enumerated(EnumType.STRING)\n//    @Column(name = &quot;sex&quot;)\n//    private sexType sexType;\n\n    @Column(name = &quot;sex&quot;)\n    private String sex;\n\n    /**\n     * proved and it actually works!\n     */\n    //@JsonManagedReference\n    @ManyToOne(cascade = {CascadeType.PERSIST, CascadeType.DETACH,\n    CascadeType.REFRESH, CascadeType.MERGE})\n    @JoinColumn(name = &quot;ManufacturerId&quot;)\n    //@JsonIgnoreProperties\n    Manufacturer manufacturer; //Many goods can refer to one manufacturer\n\n\n    @JsonManagedReference\n    @OneToMany(cascade = {CascadeType.PERSIST, CascadeType.DETACH,\n            CascadeType.REFRESH, CascadeType.MERGE}, mappedBy = &quot;good&quot;)//Uni-directional reference to size array\n    List&lt;Size&gt; sizes;\n</code></pre>\n<p>Manufacturer entity:</p>\n<pre><code>@Entity\n@Table(name = &quot;manufacturers&quot;)\npublic class Manufacturer {\n    @Id\n    @Column(name = &quot;id&quot;)\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private int id;\n\n    @Column(name = &quot;ManufacturerName&quot;)\n    private String manufacturerName;\n\n    @Column(name = &quot;Address&quot;)\n    private String address;\n\n    @Column(name = &quot;Telephone&quot;)\n    private String telephone;\n\n    //@JsonBackReference\n    @OneToMany(cascade = {CascadeType.PERSIST, CascadeType.DETACH,\n            CascadeType.REFRESH, CascadeType.MERGE},\n            mappedBy = &quot;manufacturer&quot;)\n    @JsonIgnore\n    private List&lt;Good&gt; goods;\n</code></pre>\n<p>JSON example for POST request:</p>\n<pre><code>  {\n    &quot;title&quot;: &quot;Model&quot;,\n    &quot;sex&quot;: &quot;CHILD&quot;,\n    &quot;manufacturer&quot;: {\n      &quot;id&quot;: 1,\n      &quot;manufacturerName&quot;: &quot;Ralf&quot;,\n      &quot;address&quot;: &quot;Moscow&quot;,\n      &quot;telephone&quot;: &quot;9-999-999-99-99&quot;\n    },\n    &quot;sizes&quot;: [\n      {\n        &quot;size&quot;: 37,\n        &quot;quantity&quot;: 5\n      },\n      {\n        &quot;size&quot;: 39,\n        &quot;quantity&quot;: 4\n      }\n    ]\n  }\n</code></pre>\n<p>How can I send only manufacturerId?</p>\n<p>If I use <code>@JsonIgnore</code> annotatinon, I think I won't get additional info about manufacturer</p>\n"},{"tags":["java","spring-boot","hibernate","jpa"],"comments":[{"owner":{"account_id":1223835,"reputation":75888,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":0,"creation_date":1617492659,"post_id":66936394,"comment_id":118320327,"body_markdown":"Note that assigning this as a field default means that your application will be consuming a huge amount of randomness for no reason (as most object instances are not about to be persisted); using `@GeneratedValue` is nearly always preferable.","body":"Note that assigning this as a field default means that your application will be consuming a huge amount of randomness for no reason (as most object instances are not about to be persisted); using <code>@GeneratedValue</code> is nearly always preferable."}],"answers":[{"comments":[{"owner":{"account_id":97313,"reputation":6321,"user_id":264028,"accept_rate":75,"display_name":"Joaqu&#237;n L. Robles"},"score":0,"creation_date":1664889230,"post_id":66936685,"comment_id":130569408,"body_markdown":"totally agree on &quot;In general, using the UUID is not always a good idea&quot;, could you expand on use cases where it would be useful?","body":"totally agree on &quot;In general, using the UUID is not always a good idea&quot;, could you expand on use cases where it would be useful?"}],"tags":[],"owner":{"account_id":298886,"reputation":40480,"user_id":605153,"accept_rate":67,"display_name":"Mark Bramnik"},"comment_count":1,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1667728969,"creation_date":1617491723,"answer_id":66936685,"question_id":66936394,"body_markdown":"I&#39;m not a hibernate specialist, however, if you do it like this, in general, it should be kind of ok, which means that the probability of collision is low, however &quot;what if&quot; there is a collision? In other words, you can&#39;t be 100% sure that you&#39;re &quot;guaranteed to avoid collision&quot;. If your system can deal with collision (re-create a UUID for example, assuming that performance penalty is negligible because this will happen in extremely rare cases) then no problem of course.\r\n\r\nNow the real question is whether there is something else that can be done here?\r\nWell, Hibernate is able to generate the `UUID` in a way that also uses an IP of the machine as a parameter of generation: \r\n\r\n~~~\r\n@Entity\r\npublic class SampleEntity {\r\n \r\n    @Id\r\n    @GeneratedValue(generator = &quot;UUID&quot;)\r\n    @GenericGenerator(\r\n        name = &quot;UUID&quot;,\r\n        strategy = &quot;org.hibernate.id.UUIDGenerator&quot;,\r\n        parameters = {\r\n            @Parameter(\r\n                name = &quot;uuid_gen_strategy_class&quot;,\r\n                value = &quot;org.hibernate.id.uuid.CustomVersionOneStrategy&quot;\r\n            )\r\n        }\r\n    )\r\n    @Column(name = &quot;id&quot;, updatable = false, nullable = false)\r\n    private UUID id;\r\n     \r\n    …\r\n}\r\n~~~\r\n\r\nFor more information read [here][1] for example\r\n\r\nOf course, the best approach would be to let the DB deal with the ID generation. You haven&#39;t specified which database do you use. For example, Postgresql allows generating UUID keys with the help of extension:\r\n\r\nRead [here][2] for example.\r\n\r\nIn general, using the UUID is not always a good idea - it&#39;s hard to deal with them in day-to-day life, and in general they introduce an overhead that might be significant if there are many rows in the table. So you might consider using an auto-increment sequence or something for the primary key - DB will be able to do it and you won&#39;t need to bother. \r\n\r\n\r\n  [1]: https://thorben-janssen.com/generate-uuids-primary-keys-hibernate/\r\n  [2]: https://www.postgresqltutorial.com/postgresql-uuid/","title":"UUID primary key for JPA Entity: safe approach to use unique values on multiple instances","body":"<p>I'm not a hibernate specialist, however, if you do it like this, in general, it should be kind of ok, which means that the probability of collision is low, however &quot;what if&quot; there is a collision? In other words, you can't be 100% sure that you're &quot;guaranteed to avoid collision&quot;. If your system can deal with collision (re-create a UUID for example, assuming that performance penalty is negligible because this will happen in extremely rare cases) then no problem of course.</p>\n<p>Now the real question is whether there is something else that can be done here?\nWell, Hibernate is able to generate the <code>UUID</code> in a way that also uses an IP of the machine as a parameter of generation:</p>\n<pre><code>@Entity\npublic class SampleEntity {\n \n    @Id\n    @GeneratedValue(generator = &quot;UUID&quot;)\n    @GenericGenerator(\n        name = &quot;UUID&quot;,\n        strategy = &quot;org.hibernate.id.UUIDGenerator&quot;,\n        parameters = {\n            @Parameter(\n                name = &quot;uuid_gen_strategy_class&quot;,\n                value = &quot;org.hibernate.id.uuid.CustomVersionOneStrategy&quot;\n            )\n        }\n    )\n    @Column(name = &quot;id&quot;, updatable = false, nullable = false)\n    private UUID id;\n     \n    …\n}\n</code></pre>\n<p>For more information read <a href=\"https://thorben-janssen.com/generate-uuids-primary-keys-hibernate/\" rel=\"nofollow noreferrer\">here</a> for example</p>\n<p>Of course, the best approach would be to let the DB deal with the ID generation. You haven't specified which database do you use. For example, Postgresql allows generating UUID keys with the help of extension:</p>\n<p>Read <a href=\"https://www.postgresqltutorial.com/postgresql-uuid/\" rel=\"nofollow noreferrer\">here</a> for example.</p>\n<p>In general, using the UUID is not always a good idea - it's hard to deal with them in day-to-day life, and in general they introduce an overhead that might be significant if there are many rows in the table. So you might consider using an auto-increment sequence or something for the primary key - DB will be able to do it and you won't need to bother.</p>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":0,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1667755851,"creation_date":1617491733,"answer_id":66936686,"question_id":66936394,"body_markdown":"&gt;`UUID uuid = UUID.randomUUID()`\r\n&gt;\r\n&gt;My doubt is this: Is this approach safe? Can I be sure ids will always be unique?\r\n\r\nYes, *extremely* safe. \r\n\r\nA [UUID Version 4][1] has 122 bits of randomly generated data. That is a *vast* range of numbers. Assuming your UUID is being generated with a [cryptographically-strong random number generator][2], you have no practical concerns with using a randomly-generated UUID. \r\n\r\nFor details, see the [*Collisions*][3] section on Wikipedia.\r\n\r\nIf you want to worry, apply your worry to things that are *much* more likely to happen. Top in my mind: [Cosmic rays][4] [flipping bits][5] in non-[EEC memory][6]. (See valid [rant by Linus Torvalds][7] on the issue.) \r\n\r\nPersonally, I consider the point-in-space-and-time versions such as Version 1 to be even less of a concern for collisions. But others debate this. Either way, Version 1 or Version 4, I would sleep well.\r\n\r\nDespite saying the above, you should still ensure that your code is written to be robust in the face of collisions. Not because of collisions from randomly-generated duplicates, but because of collision from the all-too-human possibilities such as a bug in your code that double-posts the record to database, or a DBA who mistakenly loads back-up data twice, and so on. \r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Universally_unique_identifier#Version_4_(random)\r\n  [2]: https://en.wikipedia.org/wiki/Cryptographically_secure_pseudorandom_number_generator\r\n  [3]: https://en.wikipedia.org/wiki/Universally_unique_identifier#Collisions\r\n  [4]: https://en.m.wikipedia.org/wiki/Cosmic_ray\r\n  [5]: https://en.m.wikipedia.org/wiki/Cosmic_ray#Effect_on_electronics\r\n  [6]: https://en.wikipedia.org/wiki/ECC_memory\r\n  [7]: https://www.theregister.com/2021/01/04/linus_torvalds_intel_killed_ecc/","title":"UUID primary key for JPA Entity: safe approach to use unique values on multiple instances","body":"<blockquote>\n<p><code>UUID uuid = UUID.randomUUID()</code></p>\n<p>My doubt is this: Is this approach safe? Can I be sure ids will always be unique?</p>\n</blockquote>\n<p>Yes, <em>extremely</em> safe.</p>\n<p>A <a href=\"https://en.wikipedia.org/wiki/Universally_unique_identifier#Version_4_(random)\" rel=\"nofollow noreferrer\">UUID Version 4</a> has 122 bits of randomly generated data. That is a <em>vast</em> range of numbers. Assuming your UUID is being generated with a <a href=\"https://en.wikipedia.org/wiki/Cryptographically_secure_pseudorandom_number_generator\" rel=\"nofollow noreferrer\">cryptographically-strong random number generator</a>, you have no practical concerns with using a randomly-generated UUID.</p>\n<p>For details, see the <a href=\"https://en.wikipedia.org/wiki/Universally_unique_identifier#Collisions\" rel=\"nofollow noreferrer\"><em>Collisions</em></a> section on Wikipedia.</p>\n<p>If you want to worry, apply your worry to things that are <em>much</em> more likely to happen. Top in my mind: <a href=\"https://en.m.wikipedia.org/wiki/Cosmic_ray\" rel=\"nofollow noreferrer\">Cosmic rays</a> <a href=\"https://en.m.wikipedia.org/wiki/Cosmic_ray#Effect_on_electronics\" rel=\"nofollow noreferrer\">flipping bits</a> in non-<a href=\"https://en.wikipedia.org/wiki/ECC_memory\" rel=\"nofollow noreferrer\">EEC memory</a>. (See valid <a href=\"https://www.theregister.com/2021/01/04/linus_torvalds_intel_killed_ecc/\" rel=\"nofollow noreferrer\">rant by Linus Torvalds</a> on the issue.)</p>\n<p>Personally, I consider the point-in-space-and-time versions such as Version 1 to be even less of a concern for collisions. But others debate this. Either way, Version 1 or Version 4, I would sleep well.</p>\n<p>Despite saying the above, you should still ensure that your code is written to be robust in the face of collisions. Not because of collisions from randomly-generated duplicates, but because of collision from the all-too-human possibilities such as a bug in your code that double-posts the record to database, or a DBA who mistakenly loads back-up data twice, and so on.</p>\n"},{"comments":[{"owner":{"account_id":8971970,"reputation":101,"user_id":12658560,"display_name":"benyamynbrkyc"},"score":0,"creation_date":1684139340,"post_id":75975553,"comment_id":134467484,"body_markdown":"I&#39;ve heard the UUID strategy is somewhat worse efficiency-wise than e.g. IDENTITY. Is this true?","body":"I&#39;ve heard the UUID strategy is somewhat worse efficiency-wise than e.g. IDENTITY. Is this true?"}],"tags":[],"owner":{"account_id":19370048,"reputation":659,"user_id":14163532,"display_name":"PKS"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1681116089,"creation_date":1681116089,"answer_id":75975553,"question_id":66936394,"body_markdown":"For those who are using hibernate 6.0+ then write the following way\r\n\r\n      @Id\r\n      @GeneratedValue(strategy = UUID)\r\n      UUID id;","title":"UUID primary key for JPA Entity: safe approach to use unique values on multiple instances","body":"<p>For those who are using hibernate 6.0+ then write the following way</p>\n<pre><code>  @Id\n  @GeneratedValue(strategy = UUID)\n  UUID id;\n</code></pre>\n"}],"owner":{"account_id":254664,"reputation":11551,"user_id":534218,"accept_rate":54,"display_name":"Safari"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35771,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"answer_count":3,"score":12,"last_activity_date":1681116089,"creation_date":1617488714,"question_id":66936394,"body_markdown":"I&#39;m using SpringBoot, JPA and Hibernate.\r\n\r\nI have a doubt.\r\n\r\nFor my entities I need to have an UUID as primary key (and I would like to save this id in &quot;clear mode&quot; (string) and not binary)\r\n\r\nI&#39;m using this code:\r\n\r\n    @Id\r\n    @Column(name = &quot;id&quot;)\r\n    @Type(type = &quot;uuid-char&quot;)\r\n    private UUID uuid = UUID.randomUUID();\r\n\r\nMy doubt is this: Is this approach safe? Can I be sure ids will always be unique?  \r\n\r\nI understand that, using this code, the UUID will be generated code side so, what&#39;s happen if I will have multiple instances for my service using the same DB service for all instances?\r\n\r\nIs it possible that more instances  will generate the same UUID?\r\n","title":"UUID primary key for JPA Entity: safe approach to use unique values on multiple instances","body":"<p>I'm using SpringBoot, JPA and Hibernate.</p>\n<p>I have a doubt.</p>\n<p>For my entities I need to have an UUID as primary key (and I would like to save this id in &quot;clear mode&quot; (string) and not binary)</p>\n<p>I'm using this code:</p>\n<pre><code>@Id\n@Column(name = &quot;id&quot;)\n@Type(type = &quot;uuid-char&quot;)\nprivate UUID uuid = UUID.randomUUID();\n</code></pre>\n<p>My doubt is this: Is this approach safe? Can I be sure ids will always be unique?</p>\n<p>I understand that, using this code, the UUID will be generated code side so, what's happen if I will have multiple instances for my service using the same DB service for all instances?</p>\n<p>Is it possible that more instances  will generate the same UUID?</p>\n"},{"tags":["java","spring-boot"],"answers":[{"comments":[{"owner":{"account_id":15558166,"reputation":302,"user_id":11223954,"display_name":"Dattq2303"},"score":0,"creation_date":1681228987,"post_id":75975547,"comment_id":134021295,"body_markdown":"This problem is very interesting. Can I ask how much time does the other process take when it actually success?","body":"This problem is very interesting. Can I ask how much time does the other process take when it actually success?"},{"owner":{"account_id":1866848,"reputation":18503,"user_id":1690193,"accept_rate":93,"display_name":"Nick.Mc"},"score":1,"creation_date":1681723543,"post_id":75975547,"comment_id":134096936,"body_markdown":"The &quot;other process&quot; is fast, like less than seconds, but it happens many many times a second. (it&#39;s a web page under high usage)","body":"The &quot;other process&quot; is fast, like less than seconds, but it happens many many times a second. (it&#39;s a web page under high usage)"}],"tags":[],"owner":{"account_id":1866848,"reputation":18503,"user_id":1690193,"accept_rate":93,"display_name":"Nick.Mc"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1681115958,"creation_date":1681115958,"answer_id":75975547,"question_id":74569662,"body_markdown":"The root cause was that the springboot queries were using the wrong data type for a parameter, making the select queries non sargable, in turn requiring a table scan (rather than utilising the index)..... lots and lots of table scans that were hidden by scaling the server up to a huge core count. After we fixed the parameter data type in the query to match the search fields data type, db activity went waaaaaaay down and the problem disappeared. AFAIK the CannotAcquireLockException was a legitimate message - it couldn&#39;t actually acquire a shared lock it was simply too busy doing table scans and dealing with the data merge.","title":"Troubleshooting springboot locking issues","body":"<p>The root cause was that the springboot queries were using the wrong data type for a parameter, making the select queries non sargable, in turn requiring a table scan (rather than utilising the index)..... lots and lots of table scans that were hidden by scaling the server up to a huge core count. After we fixed the parameter data type in the query to match the search fields data type, db activity went waaaaaaay down and the problem disappeared. AFAIK the CannotAcquireLockException was a legitimate message - it couldn't actually acquire a shared lock it was simply too busy doing table scans and dealing with the data merge.</p>\n"}],"owner":{"account_id":1866848,"reputation":18503,"user_id":1690193,"accept_rate":93,"display_name":"Nick.Mc"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75975547,"answer_count":1,"score":1,"last_activity_date":1681115958,"creation_date":1669362614,"question_id":74569662,"body_markdown":"I&#39;m a DB guy with some app experience. I do not have a code sample so hoping someone with springboot experience can shed light on this.\r\n\r\nWe have Java code using springboot to select single rows out of the database all day (for a web  application)\r\n\r\nWe have a morning process which needs to merge into the same table. Target table has 1.3 million rows. Source table has between 8k to 16k rows\r\n\r\nUnder normal circumstances this merge is complete in under five minutes or so\r\n\r\nHowever in 3 out of 14 runs we have an issue where this activity collides with springboot select activity\r\n\r\nNote that all tables are indexes, queries optmised etc.\r\n\r\nWhat confuses me is that springboot is running a `select` query, however the error returned is\r\n\r\n&gt; CannotAcquireLockException\r\n\r\nWhen I check the [docs][1] it says\r\n\r\n&gt; Exception thrown on failure to acquire a lock during an update, for example during a &quot;select for update&quot; statement.\r\n\r\n**But this is not an update statement**\r\n\r\nAs far as I know it is not a SELECT FOR UPDATE statement.\r\n\r\nI&#39;m not too sharp on the Java code but I can see this code fragment:\r\n\r\n(Sorry for screenshot I&#39;ll come back and convert to code if anyone shows any interest)\r\n\r\n[![enter image description here][2]][2]\r\n\r\nIs `CrudRepository` automatically assuming this is write query and needlessly applying locks? can anyone tell me what to look for to confirm this query is set to read only?\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/dao/CannotAcquireLockException.html\r\n  [2]: https://i.stack.imgur.com/WVUxz.png","title":"Troubleshooting springboot locking issues","body":"<p>I'm a DB guy with some app experience. I do not have a code sample so hoping someone with springboot experience can shed light on this.</p>\n<p>We have Java code using springboot to select single rows out of the database all day (for a web  application)</p>\n<p>We have a morning process which needs to merge into the same table. Target table has 1.3 million rows. Source table has between 8k to 16k rows</p>\n<p>Under normal circumstances this merge is complete in under five minutes or so</p>\n<p>However in 3 out of 14 runs we have an issue where this activity collides with springboot select activity</p>\n<p>Note that all tables are indexes, queries optmised etc.</p>\n<p>What confuses me is that springboot is running a <code>select</code> query, however the error returned is</p>\n<blockquote>\n<p>CannotAcquireLockException</p>\n</blockquote>\n<p>When I check the <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/dao/CannotAcquireLockException.html\" rel=\"nofollow noreferrer\">docs</a> it says</p>\n<blockquote>\n<p>Exception thrown on failure to acquire a lock during an update, for example during a &quot;select for update&quot; statement.</p>\n</blockquote>\n<p><strong>But this is not an update statement</strong></p>\n<p>As far as I know it is not a SELECT FOR UPDATE statement.</p>\n<p>I'm not too sharp on the Java code but I can see this code fragment:</p>\n<p>(Sorry for screenshot I'll come back and convert to code if anyone shows any interest)</p>\n<p><a href=\"https://i.stack.imgur.com/WVUxz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WVUxz.png\" alt=\"enter image description here\" /></a></p>\n<p>Is <code>CrudRepository</code> automatically assuming this is write query and needlessly applying locks? can anyone tell me what to look for to confirm this query is set to read only?</p>\n"},{"tags":["java","security","ssl"],"answers":[{"comments":[{"owner":{"account_id":4923650,"reputation":985,"user_id":3965524,"accept_rate":91,"display_name":"JavaTec"},"score":0,"creation_date":1460509336,"post_id":36586720,"comment_id":60772102,"body_markdown":"Hi EJP thank you for looking into this. Yes i added this to the JRE inside the JDK (i double checked that my class path is pointing to my JDK), but the error persists","body":"Hi EJP thank you for looking into this. Yes i added this to the JRE inside the JDK (i double checked that my class path is pointing to my JDK), but the error persists"},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1460509600,"post_id":36586720,"comment_id":60772168,"body_markdown":"`C:\\Java\\jre` is the installed JRE, not the one inside the JDK.","body":"<code>C:\\Java\\jre</code> is the installed JRE, not the one inside the JDK."},{"owner":{"account_id":4923650,"reputation":985,"user_id":3965524,"accept_rate":91,"display_name":"JavaTec"},"score":0,"creation_date":1460510817,"post_id":36586720,"comment_id":60772520,"body_markdown":"Actually the folder java is JDK only, i had named it as java earlier. It contains readme file which also confirms its JDK. it has its own bin, jre, lib etc. folders as well","body":"Actually the folder java is JDK only, i had named it as java earlier. It contains readme file which also confirms its JDK. it has its own bin, jre, lib etc. folders as well"},{"owner":{"account_id":4923650,"reputation":985,"user_id":3965524,"accept_rate":91,"display_name":"JavaTec"},"score":1,"creation_date":1460511599,"post_id":36586720,"comment_id":60772707,"body_markdown":"Something hit and trial i tried seems to have worked: instead of updating cacerts of jdk/jre/lib/security, i instead updated the jdk/lib/security (no jre) and its working right now!!!! But really thank you EJP, that answer you posted got my thought process working and i tried to look at things from outside of book perspective. thank you for your time and effort!","body":"Something hit and trial i tried seems to have worked: instead of updating cacerts of jdk/jre/lib/security, i instead updated the jdk/lib/security (no jre) and its working right now!!!! But really thank you EJP, that answer you posted got my thought process working and i tried to look at things from outside of book perspective. thank you for your time and effort!"}],"tags":[],"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"comment_count":4,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1460509243,"creation_date":1460509243,"answer_id":36586720,"question_id":36585744,"body_markdown":"If you&#39;re using a JDK, adding it to the JRE truststore won&#39;t help. You need to add it to the truststore of the JRE that comes inside the JDK.","title":"added certificate to java keystore, still error","body":"<p>If you're using a JDK, adding it to the JRE truststore won't help. You need to add it to the truststore of the JRE that comes inside the JDK.</p>\n"},{"comments":[{"owner":{"account_id":4923650,"reputation":985,"user_id":3965524,"accept_rate":91,"display_name":"JavaTec"},"score":0,"creation_date":1460573570,"post_id":36602661,"comment_id":60811104,"body_markdown":"And here is another thing, that worked on a colleagues machine. Post installation they had under C:\\Program Files\\Java - one jdk_1.8 folder created and one jre_1.8 folder. First we tried adding certificates in jdk_1.8/jre/lib/security/cacerts, did not work. Then we added certificates to jre_1.8/lib/security/cacerts - it worked. There was no jdk_1.8/lib/security folder on their machine (which actually existed on my machine)","body":"And here is another thing, that worked on a colleagues machine. Post installation they had under C:\\Program Files\\Java - one jdk_1.8 folder created and one jre_1.8 folder. First we tried adding certificates in jdk_1.8/jre/lib/security/cacerts, did not work. Then we added certificates to jre_1.8/lib/security/cacerts - it worked. There was no jdk_1.8/lib/security folder on their machine (which actually existed on my machine)"},{"owner":{"account_id":3187272,"reputation":3749,"user_id":5362244,"accept_rate":74,"display_name":"dhS"},"score":0,"creation_date":1617121992,"post_id":36602661,"comment_id":118212736,"body_markdown":"i am still struggling in this i added the certificate still i am getting the error ..can you help me in this ... i m using AdoptOpenJDK 11... I am still not understood how two machines","body":"i am still struggling in this i added the certificate still i am getting the error ..can you help me in this ... i m using AdoptOpenJDK 11... I am still not understood how two machines"},{"owner":{"account_id":4923650,"reputation":985,"user_id":3965524,"accept_rate":91,"display_name":"JavaTec"},"score":0,"creation_date":1617301948,"post_id":36602661,"comment_id":118273610,"body_markdown":"@dhS can you please share your folder structure and show what&#39;s in your PATH variable. I want to ensure that you are using same java which you are adding certs to","body":"@dhS can you please share your folder structure and show what&#39;s in your PATH variable. I want to ensure that you are using same java which you are adding certs to"},{"owner":{"account_id":3187272,"reputation":3749,"user_id":5362244,"accept_rate":74,"display_name":"dhS"},"score":0,"creation_date":1617305317,"post_id":36602661,"comment_id":118274769,"body_markdown":"I am really confused in this i updated the java and the certificate was successfully connecting yesterday, but today i found again it is giving the same exception, I am unable to understand how it was working yesterday and today it is not working. If you are online can we chat.","body":"I am really confused in this i updated the java and the certificate was successfully connecting yesterday, but today i found again it is giving the same exception, I am unable to understand how it was working yesterday and today it is not working. If you are online can we chat."},{"owner":{"account_id":2554069,"reputation":1281,"user_id":2216472,"accept_rate":79,"display_name":"Ajeetkumar"},"score":0,"creation_date":1682023133,"post_id":36602661,"comment_id":134154867,"body_markdown":"I&#39;m using java 11 and adding at C:\\Program Files\\Java\\jdk-11.0.17\\lib\\security\\cacert certificate shows added but it doesn&#39;t work. pls help","body":"I&#39;m using java 11 and adding at C:\\Program Files\\Java\\jdk-11.0.17\\lib\\security\\cacert certificate shows added but it doesn&#39;t work. pls help"},{"owner":{"account_id":4923650,"reputation":985,"user_id":3965524,"accept_rate":91,"display_name":"JavaTec"},"score":0,"creation_date":1683568249,"post_id":36602661,"comment_id":134383324,"body_markdown":"@Ajeetkumar - For what its worth, are you able to confirm that your application is using the same JDK as above?","body":"@Ajeetkumar - For what its worth, are you able to confirm that your application is using the same JDK as above?"},{"owner":{"account_id":2554069,"reputation":1281,"user_id":2216472,"accept_rate":79,"display_name":"Ajeetkumar"},"score":1,"creation_date":1683662120,"post_id":36602661,"comment_id":134400384,"body_markdown":"Hi @JavaTec, it was my mistake that I used wrong name of keystore as cacert instead of cacerts.","body":"Hi @JavaTec, it was my mistake that I used wrong name of keystore as cacert instead of cacerts."}],"tags":[],"owner":{"account_id":4923650,"reputation":985,"user_id":3965524,"accept_rate":91,"display_name":"JavaTec"},"comment_count":7,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1461181963,"creation_date":1460560291,"answer_id":36602661,"question_id":36585744,"body_markdown":"There were two types of setup where we were able to make it work:\r\n\r\n1. On one machine, the person installing the JDk had done some changes to the folder structure for installing Java and had the following structure: Java/jre/lib/security as well as Java/lib/security. We added certificates to cacerts of Java/lib/security and it started to work\r\n\r\n2. On a second machine, where the user did the default istallation, the following folder structure existed: Java/jre_1.8/lib/security and Java/jdk_1.8/jre/lib/security. We updated cacerts at Java/jre_1.8/lib/security and it started to work (For some reason, updating cacartes at Java/jdk_1.8/jre/lib/security did not work)","title":"added certificate to java keystore, still error","body":"<p>There were two types of setup where we were able to make it work:</p>\n\n<ol>\n<li><p>On one machine, the person installing the JDk had done some changes to the folder structure for installing Java and had the following structure: Java/jre/lib/security as well as Java/lib/security. We added certificates to cacerts of Java/lib/security and it started to work</p></li>\n<li><p>On a second machine, where the user did the default istallation, the following folder structure existed: Java/jre_1.8/lib/security and Java/jdk_1.8/jre/lib/security. We updated cacerts at Java/jre_1.8/lib/security and it started to work (For some reason, updating cacartes at Java/jdk_1.8/jre/lib/security did not work)</p></li>\n</ol>\n"}],"owner":{"account_id":4923650,"reputation":985,"user_id":3965524,"accept_rate":91,"display_name":"JavaTec"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12841,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":36602661,"answer_count":2,"score":4,"last_activity_date":1681115878,"creation_date":1460502822,"question_id":36585744,"body_markdown":"Based on various web inputs, I have followed the following steps to add certificate to my local jdk keystore:\r\n\r\n1. Downloaded the certificates by hitting the following command from a Linux host: openssl s_client -connect MyService:443 -showcerts\r\n\r\n2. Copied the content between (and including) ------BEGIN CERTIFICATE-------- and --------END CERTIFICATE---------, saved it as C:\\Java\\jre\\lib\\security\\cer1.cer\r\n\r\n3. Typed: C:\\Java\\jre\\bin&gt;keytool -keystore C:\\Java\\jre\\lib\\security\\cacerts -importcert -alias cer1 -file C:\\Java\\jre\\lib\\security\\cer1.cer\r\n\r\nThis showed a message the certificate added successfully. Which i verified by using list command for keytool\r\n\r\n4. Then i restarted my machine, and tried to run my Java program again, but still keep getting error:     \r\n\r\n&quot;sun.security.validator.ValidatorException: PKIX path building failed:     sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid     certification path to requested target&quot;\r\n\r\nJDK Used: 1.8.0_31, Windows 7\r\n\r\nPlease help!","title":"added certificate to java keystore, still error","body":"<p>Based on various web inputs, I have followed the following steps to add certificate to my local jdk keystore:</p>\n\n<ol>\n<li><p>Downloaded the certificates by hitting the following command from a Linux host: openssl s_client -connect MyService:443 -showcerts</p></li>\n<li><p>Copied the content between (and including) ------BEGIN CERTIFICATE-------- and --------END CERTIFICATE---------, saved it as C:\\Java\\jre\\lib\\security\\cer1.cer</p></li>\n<li><p>Typed: C:\\Java\\jre\\bin>keytool -keystore C:\\Java\\jre\\lib\\security\\cacerts -importcert -alias cer1 -file C:\\Java\\jre\\lib\\security\\cer1.cer</p></li>\n</ol>\n\n<p>This showed a message the certificate added successfully. Which i verified by using list command for keytool</p>\n\n<ol start=\"4\">\n<li>Then i restarted my machine, and tried to run my Java program again, but still keep getting error:     </li>\n</ol>\n\n<p>\"sun.security.validator.ValidatorException: PKIX path building failed:     sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid     certification path to requested target\"</p>\n\n<p>JDK Used: 1.8.0_31, Windows 7</p>\n\n<p>Please help!</p>\n"},{"tags":["java","java-8","option-type"],"comments":[{"owner":{"account_id":1734091,"reputation":92376,"user_id":1587046,"accept_rate":62,"display_name":"Alexis C."},"score":1,"creation_date":1434449698,"post_id":30864583,"comment_id":49771187,"body_markdown":"See http://stackoverflow.com/questions/26684562/java-8-map-and-flatmap-methods","body":"See <a href=\"http://stackoverflow.com/questions/26684562/java-8-map-and-flatmap-methods\" title=\"java 8 map and flatmap methods\">stackoverflow.com/questions/26684562/&hellip;</a>"},{"owner":{"account_id":1263831,"reputation":388998,"user_id":1221571,"accept_rate":67,"display_name":"Eran"},"score":7,"creation_date":1434449768,"post_id":30864583,"comment_id":49771235,"body_markdown":"@AlexisC. Your link is about Stream&#39;s map and flatMap, not Optional.","body":"@AlexisC. Your link is about Stream&#39;s map and flatMap, not Optional."},{"owner":{"account_id":5797135,"reputation":2134,"user_id":4572590,"accept_rate":83,"display_name":"griFlo"},"score":0,"creation_date":1434449801,"post_id":30864583,"comment_id":49771251,"body_markdown":"from the java doc: If a value is present, apply the provided Optional-bearing mapping function to it, return that result, otherwise return an empty Optional. This method is similar to map(Function), but the provided mapper is one whose result is already an Optional, and if invoked, flatMap does not wrap it with an additional Optional.","body":"from the java doc: If a value is present, apply the provided Optional-bearing mapping function to it, return that result, otherwise return an empty Optional. This method is similar to map(Function), but the provided mapper is one whose result is already an Optional, and if invoked, flatMap does not wrap it with an additional Optional."},{"owner":{"account_id":1734091,"reputation":92376,"user_id":1587046,"accept_rate":62,"display_name":"Alexis C."},"score":1,"creation_date":1434449930,"post_id":30864583,"comment_id":49771336,"body_markdown":"@Eran That doesn&#39;t matter, if you understand how map/flatMap works whether it&#39;s for a Stream or not, it&#39;s the same for an Optional. If the op understood how it works for a Stream, then he shouldn&#39;t asked this question. The concept is the same.","body":"@Eran That doesn&#39;t matter, if you understand how map/flatMap works whether it&#39;s for a Stream or not, it&#39;s the same for an Optional. If the op understood how it works for a Stream, then he shouldn&#39;t asked this question. The concept is the same."},{"owner":{"account_id":1263831,"reputation":388998,"user_id":1221571,"accept_rate":67,"display_name":"Eran"},"score":4,"creation_date":1434450178,"post_id":30864583,"comment_id":49771487,"body_markdown":"@AlexisC. Not really. Optional&#39;s flatMap has little in common with Stream&#39;s flatMap.","body":"@AlexisC. Not really. Optional&#39;s flatMap has little in common with Stream&#39;s flatMap."},{"owner":{"account_id":1734091,"reputation":92376,"user_id":1587046,"accept_rate":62,"display_name":"Alexis C."},"score":1,"creation_date":1434450480,"post_id":30864583,"comment_id":49771683,"body_markdown":"@Eran I&#39;m speaking about the **conceptual** difference between a map and a flatMap, I&#39;m not making a one-to-one correspondance between `Stream#flatMap` and `Optional#flatMap`.","body":"@Eran I&#39;m speaking about the <b>conceptual</b> difference between a map and a flatMap, I&#39;m not making a one-to-one correspondance between <code>Stream#flatMap</code> and <code>Optional#flatMap</code>."}],"answers":[{"tags":[],"owner":{"account_id":2770660,"reputation":4602,"user_id":2385324,"accept_rate":87,"display_name":"Diego Martinoia"},"comment_count":0,"down_vote_count":0,"up_vote_count":92,"is_accepted":false,"score":92,"last_activity_date":1539714923,"creation_date":1434449763,"answer_id":30864727,"question_id":30864583,"body_markdown":"They both take a function from the type of the optional to something.\r\n\r\n`map()` applies the function &quot;***as is***&quot; on the optional you have:\r\n\r\n    if (optional.isEmpty()) return Optional.empty();\r\n    else return Optional.of(f(optional.get()));\r\n\r\nWhat happens if your function is a function from `T -&gt; Optional&lt;U&gt;`?   \r\nYour result is now an `Optional&lt;Optional&lt;U&gt;&gt;`!\r\n\r\nThat&#39;s what `flatMap()` is about: if your function already returns an `Optional`, `flatMap()` is a bit smarter and doesn&#39;t double wrap it, returning `Optional&lt;U&gt;`. \r\n \r\nIt&#39;s the composition of two functional idioms: `map` and `flatten`.\r\n\r\n","title":"What is the difference between Optional.flatMap and Optional.map?","body":"<p>They both take a function from the type of the optional to something.</p>\n\n<p><code>map()</code> applies the function \"<strong><em>as is</em></strong>\" on the optional you have:</p>\n\n<pre><code>if (optional.isEmpty()) return Optional.empty();\nelse return Optional.of(f(optional.get()));\n</code></pre>\n\n<p>What happens if your function is a function from <code>T -&gt; Optional&lt;U&gt;</code>?<br>\nYour result is now an <code>Optional&lt;Optional&lt;U&gt;&gt;</code>!</p>\n\n<p>That's what <code>flatMap()</code> is about: if your function already returns an <code>Optional</code>, <code>flatMap()</code> is a bit smarter and doesn't double wrap it, returning <code>Optional&lt;U&gt;</code>. </p>\n\n<p>It's the composition of two functional idioms: <code>map</code> and <code>flatten</code>.</p>\n"},{"comments":[{"owner":{"account_id":2366187,"reputation":60162,"user_id":2071828,"accept_rate":88,"display_name":"Boris the Spider"},"score":6,"creation_date":1455877462,"post_id":30864741,"comment_id":58696925,"body_markdown":"Question: would `[flat]Map` ever call the mapping function with an `input == null`? My understanding is that `Optional` sortcuts if it&#39;s absent - the [JavaDoc ](https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html#flatMap-java.util.function.Function-) seems to back this up - &quot;_If a value is present, apply ..._&quot;.","body":"Question: would <code>[flat]Map</code> ever call the mapping function with an <code>input == null</code>? My understanding is that <code>Optional</code> sortcuts if it&#39;s absent - the [JavaDoc ](<a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html#flatMap-java.util.function.Function-\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/8/docs/api/java/util/&hellip;</a>) seems to back this up - &quot;<i>If a value is present, apply ...</i>&quot;."},{"owner":{"account_id":2770660,"reputation":4602,"user_id":2385324,"accept_rate":87,"display_name":"Diego Martinoia"},"score":1,"creation_date":1475746562,"post_id":30864741,"comment_id":67070922,"body_markdown":"@BoristheSpider Optional.of(null) != Optional.empty()","body":"@BoristheSpider Optional.of(null) != Optional.empty()"},{"owner":{"account_id":2366187,"reputation":60162,"user_id":2071828,"accept_rate":88,"display_name":"Boris the Spider"},"score":18,"creation_date":1475746709,"post_id":30864741,"comment_id":67071010,"body_markdown":"@DiegoMartinoia `Optional.of(null)` is an `Exception`. `Optional.ofNullable(null) == Optional.empty()`.","body":"@DiegoMartinoia <code>Optional.of(null)</code> is an <code>Exception</code>. <code>Optional.ofNullable(null) == Optional.empty()</code>."},{"owner":{"account_id":2770660,"reputation":4602,"user_id":2385324,"accept_rate":87,"display_name":"Diego Martinoia"},"score":1,"creation_date":1475747085,"post_id":30864741,"comment_id":67071257,"body_markdown":"@BoristheSpider yes, you are right,. I was trying to reply to your question but I think I made it even more unclear: conceptually, Optional.ofNullable(null) should NOT be empty, but in practice it&#39;s considered to be, and therefore map/flatmap do not execute.","body":"@BoristheSpider yes, you are right,. I was trying to reply to your question but I think I made it even more unclear: conceptually, Optional.ofNullable(null) should NOT be empty, but in practice it&#39;s considered to be, and therefore map/flatmap do not execute."},{"owner":{"account_id":1004927,"reputation":161,"user_id":1018942,"display_name":"DanyalBurke"},"score":2,"creation_date":1489492029,"post_id":30864741,"comment_id":72684308,"body_markdown":"I think input should never be null in either getOutputOpt or getOutput","body":"I think input should never be null in either getOutputOpt or getOutput"},{"owner":{"account_id":3585957,"reputation":4619,"user_id":3241889,"accept_rate":72,"display_name":"Alex"},"score":0,"creation_date":1518000001,"post_id":30864741,"comment_id":84320681,"body_markdown":"Now that I&#39;ve trained with Optional and streams, I feel like I&#39;m writing cleaner code, thanks for the simple comparison. You can really focus on more important things and just wrapping your checks, parsings and throwing exceptions with one liners :) About Optionals, I suggest you to read this awesome small post : https://leanjava.co/2018/02/01/optional-get-is-code-smell/","body":"Now that I&#39;ve trained with Optional and streams, I feel like I&#39;m writing cleaner code, thanks for the simple comparison. You can really focus on more important things and just wrapping your checks, parsings and throwing exceptions with one liners :) About Optionals, I suggest you to read this awesome small post : <a href=\"https://leanjava.co/2018/02/01/optional-get-is-code-smell/\" rel=\"nofollow noreferrer\">leanjava.co/2018/02/01/optional-get-is-code-smell</a>"},{"owner":{"account_id":1810895,"reputation":523,"user_id":1646991,"accept_rate":38,"display_name":"Josh Grinberg"},"score":0,"creation_date":1579207929,"post_id":30864741,"comment_id":105699288,"body_markdown":"Beware! if `s` is empty, then the functions passed to `s.map()` and `s.flatMap()` will not get called.","body":"Beware! if <code>s</code> is empty, then the functions passed to <code>s.map()</code> and <code>s.flatMap()</code> will not get called."},{"owner":{"account_id":8699950,"reputation":116,"user_id":6510200,"display_name":"Caio"},"score":0,"creation_date":1585070009,"post_id":30864741,"comment_id":107634676,"body_markdown":"Good explanation.","body":"Good explanation."}],"tags":[],"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"comment_count":8,"down_vote_count":0,"up_vote_count":230,"is_accepted":true,"score":230,"last_activity_date":1536333328,"creation_date":1434449799,"answer_id":30864741,"question_id":30864583,"body_markdown":"Use `map` if the function returns the object you need or `flatMap` if the function returns an `Optional`. For example:\r\n\r\n    public static void main(String[] args) {\r\n      Optional&lt;String&gt; s = Optional.of(&quot;input&quot;);\r\n      System.out.println(s.map(Test::getOutput));\r\n      System.out.println(s.flatMap(Test::getOutputOpt));\r\n    }\r\n\r\n    static String getOutput(String input) {\r\n      return input == null ? null : &quot;output for &quot; + input;\r\n    }\r\n\r\n    static Optional&lt;String&gt; getOutputOpt(String input) {\r\n      return input == null ? Optional.empty() : Optional.of(&quot;output for &quot; + input);\r\n    }\r\n\r\nBoth print statements print the same thing.","title":"What is the difference between Optional.flatMap and Optional.map?","body":"<p>Use <code>map</code> if the function returns the object you need or <code>flatMap</code> if the function returns an <code>Optional</code>. For example:</p>\n\n<pre><code>public static void main(String[] args) {\n  Optional&lt;String&gt; s = Optional.of(\"input\");\n  System.out.println(s.map(Test::getOutput));\n  System.out.println(s.flatMap(Test::getOutputOpt));\n}\n\nstatic String getOutput(String input) {\n  return input == null ? null : \"output for \" + input;\n}\n\nstatic Optional&lt;String&gt; getOutputOpt(String input) {\n  return input == null ? Optional.empty() : Optional.of(\"output for \" + input);\n}\n</code></pre>\n\n<p>Both print statements print the same thing.</p>\n"},{"comments":[{"owner":{"account_id":329906,"reputation":12901,"user_id":653708,"accept_rate":90,"display_name":"8bitjunkie"},"score":1,"creation_date":1510842496,"post_id":42818673,"comment_id":81615206,"body_markdown":"I think this example is likely to distract from the nature of your answer because your class `Person` is misusing `Optional`. It is against the intention of the API to use `Optional` on members like this - see http://mail.openjdk.java.net/pipermail/jdk8-dev/2013-September/003274.html","body":"I think this example is likely to distract from the nature of your answer because your class <code>Person</code> is misusing <code>Optional</code>. It is against the intention of the API to use <code>Optional</code> on members like this - see <a href=\"http://mail.openjdk.java.net/pipermail/jdk8-dev/2013-September/003274.html\" rel=\"nofollow noreferrer\">mail.openjdk.java.net/pipermail/jdk8-dev/2013-September/&hellip;</a>"},{"owner":{"account_id":2172622,"reputation":1478,"user_id":1924182,"display_name":"SandeepGodara"},"score":0,"creation_date":1511256060,"post_id":42818673,"comment_id":81771999,"body_markdown":"@8bitjunkie Thanks for pointing that out, it differs from Scala&#39;s Option..","body":"@8bitjunkie Thanks for pointing that out, it differs from Scala&#39;s Option.."}],"tags":[],"owner":{"account_id":2172622,"reputation":1478,"user_id":1924182,"display_name":"SandeepGodara"},"comment_count":2,"down_vote_count":1,"up_vote_count":11,"is_accepted":false,"score":10,"last_activity_date":1681115717,"creation_date":1489604966,"answer_id":42818673,"question_id":30864583,"body_markdown":"### NOTE\r\nBelow is the illustration of `map()` and `flatMap()` functions, otherwise `Optional` is primarily designed to be used as a return type only.\r\n\r\n---\r\nAs you already may know `Optional` is a kind of container which may or may not contain a single object, so it can be used wherever you anticipate a `null` value (you may never see NPE if you use `Optional` properly).\r\n\r\nFor example if you have a method which expects a `Person` object which may be *nullable* you may want to write the method something like this:\r\n\r\n    void doSome(Optional&lt;Person&gt; person) {\r\n        /* and here you want to retrieve some property phone out of person\r\n           you may write something like this:\r\n        */\r\n        Optional&lt;String&gt; phone = person.map((p) -&gt; p.getPhone());\r\n        phone.ifPresent((ph) -&gt; dial(ph));\r\n    }\r\n\r\n    class Person {\r\n        private String phone;\r\n        // setters, getters\r\n    }\r\n\r\nHere you have returned a `String` type which is automatically wrapped in an `Optional` type.\r\n\r\nIf `Person` class looked like this (i.e. `phone` is also `Optional`):\r\n\r\n    class Person {\r\n        private Optional&lt;String&gt; phone;\r\n        // setters, getters\r\n    }\r\n\r\nIn this case invoking `map()` function will wrap the returned value in `Optional` and yield something like:\r\n\r\n    Optional&lt;Optional&lt;String&gt;&gt;\r\n\r\nBut you may want `Optional&lt;String&gt;` instead, so here comes `flatMap()`:\r\n\r\n    void doSome(Optional&lt;Person&gt; person) {\r\n        Optional&lt;String&gt; phone = person.flatMap((p) -&gt; p.getPhone());\r\n        phone.ifPresent((ph) -&gt; dial(ph));\r\n    }\r\n\r\n---\r\n### P.S.\r\nNever call `get()` method (if you need to) on an `Optional` without checking it with `isPresent()` unless you can&#39;t live without `NullPointerException`.","title":"What is the difference between Optional.flatMap and Optional.map?","body":"<h3>NOTE</h3>\n<p>Below is the illustration of <code>map()</code> and <code>flatMap()</code> functions, otherwise <code>Optional</code> is primarily designed to be used as a return type only.</p>\n<hr />\n<p>As you already may know <code>Optional</code> is a kind of container which may or may not contain a single object, so it can be used wherever you anticipate a <code>null</code> value (you may never see NPE if you use <code>Optional</code> properly).</p>\n<p>For example if you have a method which expects a <code>Person</code> object which may be <em>nullable</em> you may want to write the method something like this:</p>\n<pre><code>void doSome(Optional&lt;Person&gt; person) {\n    /* and here you want to retrieve some property phone out of person\n       you may write something like this:\n    */\n    Optional&lt;String&gt; phone = person.map((p) -&gt; p.getPhone());\n    phone.ifPresent((ph) -&gt; dial(ph));\n}\n\nclass Person {\n    private String phone;\n    // setters, getters\n}\n</code></pre>\n<p>Here you have returned a <code>String</code> type which is automatically wrapped in an <code>Optional</code> type.</p>\n<p>If <code>Person</code> class looked like this (i.e. <code>phone</code> is also <code>Optional</code>):</p>\n<pre><code>class Person {\n    private Optional&lt;String&gt; phone;\n    // setters, getters\n}\n</code></pre>\n<p>In this case invoking <code>map()</code> function will wrap the returned value in <code>Optional</code> and yield something like:</p>\n<pre><code>Optional&lt;Optional&lt;String&gt;&gt;\n</code></pre>\n<p>But you may want <code>Optional&lt;String&gt;</code> instead, so here comes <code>flatMap()</code>:</p>\n<pre><code>void doSome(Optional&lt;Person&gt; person) {\n    Optional&lt;String&gt; phone = person.flatMap((p) -&gt; p.getPhone());\n    phone.ifPresent((ph) -&gt; dial(ph));\n}\n</code></pre>\n<hr />\n<h3>P.S.</h3>\n<p>Never call <code>get()</code> method (if you need to) on an <code>Optional</code> without checking it with <code>isPresent()</code> unless you can't live without <code>NullPointerException</code>.</p>\n"},{"comments":[{"owner":{"account_id":37484,"reputation":27768,"user_id":107158,"accept_rate":87,"display_name":"Derek Mahar"},"score":2,"creation_date":1570610761,"post_id":49948146,"comment_id":102963268,"body_markdown":"What do you mean by `flatMap` &quot;returns the &#39;raw&#39; object&quot;? `flatMap` also returns the mapped object &quot;wrapped&quot; in an `Optional`. The difference is that in the case of `flatMap`, the mapper function wraps the mapped object in the `Optional` while `map` itself wraps the object in `Optional`.","body":"What do you mean by <code>flatMap</code> &quot;returns the &#39;raw&#39; object&quot;? <code>flatMap</code> also returns the mapped object &quot;wrapped&quot; in an <code>Optional</code>. The difference is that in the case of <code>flatMap</code>, the mapper function wraps the mapped object in the <code>Optional</code> while <code>map</code> itself wraps the object in <code>Optional</code>."},{"owner":{"account_id":337881,"reputation":2204,"user_id":666414,"accept_rate":50,"display_name":"maxxyme"},"score":0,"creation_date":1570709065,"post_id":49948146,"comment_id":103003663,"body_markdown":"@DerekMahar deleted mine, no need to re-post it, because you&#39;ve edited your comment right.","body":"@DerekMahar deleted mine, no need to re-post it, because you&#39;ve edited your comment right."},{"owner":{"account_id":5537973,"reputation":73,"user_id":4395614,"accept_rate":75,"display_name":"sebastian89n"},"score":0,"creation_date":1674727032,"post_id":49948146,"comment_id":132776998,"body_markdown":"Thank you, that helped me get a nice picture of it!","body":"Thank you, that helped me get a nice picture of it!"}],"tags":[],"owner":{"account_id":255080,"reputation":15519,"user_id":534877,"accept_rate":65,"display_name":"Robert Niestroj"},"comment_count":3,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1537789905,"creation_date":1524250857,"answer_id":49948146,"question_id":30864583,"body_markdown":"What helped me was a look at the source code of the two functions. \r\n\r\n**Map** - wraps the result in an Optional.\r\n\r\n    public&lt;U&gt; Optional&lt;U&gt; map(Function&lt;? super T, ? extends U&gt; mapper) {\r\n        Objects.requireNonNull(mapper);\r\n        if (!isPresent())\r\n            return empty();\r\n        else {\r\n            return Optional.ofNullable(mapper.apply(value)); //&lt;--- wraps in an optional\r\n        }\r\n    }\r\n\r\n**flatMap** - returns the &#39;raw&#39; object\r\n\r\n    public&lt;U&gt; Optional&lt;U&gt; flatMap(Function&lt;? super T, Optional&lt;U&gt;&gt; mapper) {\r\n        Objects.requireNonNull(mapper);\r\n        if (!isPresent())\r\n            return empty();\r\n        else {\r\n            return Objects.requireNonNull(mapper.apply(value)); //&lt;---  returns &#39;raw&#39; object\r\n        }\r\n    }","title":"What is the difference between Optional.flatMap and Optional.map?","body":"<p>What helped me was a look at the source code of the two functions. </p>\n\n<p><strong>Map</strong> - wraps the result in an Optional.</p>\n\n<pre><code>public&lt;U&gt; Optional&lt;U&gt; map(Function&lt;? super T, ? extends U&gt; mapper) {\n    Objects.requireNonNull(mapper);\n    if (!isPresent())\n        return empty();\n    else {\n        return Optional.ofNullable(mapper.apply(value)); //&lt;--- wraps in an optional\n    }\n}\n</code></pre>\n\n<p><strong>flatMap</strong> - returns the 'raw' object</p>\n\n<pre><code>public&lt;U&gt; Optional&lt;U&gt; flatMap(Function&lt;? super T, Optional&lt;U&gt;&gt; mapper) {\n    Objects.requireNonNull(mapper);\n    if (!isPresent())\n        return empty();\n    else {\n        return Objects.requireNonNull(mapper.apply(value)); //&lt;---  returns 'raw' object\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":5010108,"reputation":1772,"user_id":4026629,"display_name":"JL_SO"},"score":1,"creation_date":1559719921,"post_id":52860979,"comment_id":99504124,"body_markdown":"This does not compile. Both of your expressions return an Optional&lt;Double&gt; rather than the Double that you are assigning the result to.","body":"This does not compile. Both of your expressions return an Optional&lt;Double&gt; rather than the Double that you are assigning the result to."},{"owner":{"account_id":1622089,"reputation":17709,"user_id":1498427,"accept_rate":89,"display_name":"catch23"},"score":0,"creation_date":1559745775,"post_id":52860979,"comment_id":99517133,"body_markdown":"@JL_SO you are right. Because inverse has `Optional&lt;Double&gt;` type as return type.","body":"@JL_SO you are right. Because inverse has <code>Optional&lt;Double&gt;</code> type as return type."}],"tags":[],"owner":{"account_id":1622089,"reputation":17709,"user_id":1498427,"accept_rate":89,"display_name":"catch23"},"comment_count":2,"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1658777928,"creation_date":1539799179,"answer_id":52860979,"question_id":30864583,"body_markdown":" - `Optional.map()`:\r\n   \r\nTakes every element and if the value exists, it is passed to the function:\r\n\r\n    Optional&lt;T&gt; optionalValue = ...;\r\n    Optional&lt;Boolean&gt; added = optionalValue.map(results::add);\r\n\r\nNow **added** has one of three values: `true` or `false` wrapped into an ***Optional*** , if `optionalValue` was present, or an ***empty Optional*** otherwise.\r\n\r\nIf you don&#39;t need to process the result you can simply use `ifPresent()`, it doesn&#39;t have return value:\r\n\r\n    optionalValue.ifPresent(results::add); \r\n\r\n - `Optional.flatMap()`:\r\n\r\nWorks similar to the same method of streams. Flattens out the stream of streams. With the difference that if the value is presented it is applied to function. Otherwise, an empty optional is returned.\r\n\r\nYou can use it for composing optional value functions calls. \r\n\r\nSuppose we have methods:\r\n\r\n    public static Optional&lt;Double&gt; inverse(Double x) {\r\n        return x == 0 ? Optional.empty() : Optional.of(1 / x);\r\n    }\r\n    \r\n    public static Optional&lt;Double&gt; squareRoot(Double x) {\r\n        return x &lt; 0 ? Optional.empty() : Optional.of(Math.sqrt(x));\r\n    }\r\n\r\nThen you can compute the square root of the inverse, like:\r\n\r\n    Optional&lt;Double&gt; result = inverse(-4.0).flatMap(MyMath::squareRoot);\r\n\r\nor, if you prefer:\r\n\r\n    Optional&lt;Double&gt; result = Optional.of(-4.0)\r\n                         .flatMap(MyMath::inverse)\r\n                         .flatMap(MyMath::squareRoot);\r\n\r\nIf either the `inverse()` or the `squareRoot()` returns `Optional.empty()`, the result is empty.\r\n\r\n\r\n","title":"What is the difference between Optional.flatMap and Optional.map?","body":"<ul>\n<li><code>Optional.map()</code>:</li>\n</ul>\n<p>Takes every element and if the value exists, it is passed to the function:</p>\n<pre><code>Optional&lt;T&gt; optionalValue = ...;\nOptional&lt;Boolean&gt; added = optionalValue.map(results::add);\n</code></pre>\n<p>Now <strong>added</strong> has one of three values: <code>true</code> or <code>false</code> wrapped into an <em><strong>Optional</strong></em> , if <code>optionalValue</code> was present, or an <em><strong>empty Optional</strong></em> otherwise.</p>\n<p>If you don't need to process the result you can simply use <code>ifPresent()</code>, it doesn't have return value:</p>\n<pre><code>optionalValue.ifPresent(results::add); \n</code></pre>\n<ul>\n<li><code>Optional.flatMap()</code>:</li>\n</ul>\n<p>Works similar to the same method of streams. Flattens out the stream of streams. With the difference that if the value is presented it is applied to function. Otherwise, an empty optional is returned.</p>\n<p>You can use it for composing optional value functions calls.</p>\n<p>Suppose we have methods:</p>\n<pre><code>public static Optional&lt;Double&gt; inverse(Double x) {\n    return x == 0 ? Optional.empty() : Optional.of(1 / x);\n}\n\npublic static Optional&lt;Double&gt; squareRoot(Double x) {\n    return x &lt; 0 ? Optional.empty() : Optional.of(Math.sqrt(x));\n}\n</code></pre>\n<p>Then you can compute the square root of the inverse, like:</p>\n<pre><code>Optional&lt;Double&gt; result = inverse(-4.0).flatMap(MyMath::squareRoot);\n</code></pre>\n<p>or, if you prefer:</p>\n<pre><code>Optional&lt;Double&gt; result = Optional.of(-4.0)\n                     .flatMap(MyMath::inverse)\n                     .flatMap(MyMath::squareRoot);\n</code></pre>\n<p>If either the <code>inverse()</code> or the <code>squareRoot()</code> returns <code>Optional.empty()</code>, the result is empty.</p>\n"},{"comments":[{"owner":{"account_id":75804,"reputation":94840,"user_id":217324,"accept_rate":96,"display_name":"Nathan Hughes"},"score":0,"creation_date":1661378844,"post_id":59767176,"comment_id":129761325,"body_markdown":"This answer needs to explicitly state that the example is pulled from Java 8 in Action, just to make sure this doesn&#39;t get flagged as unattributed copying.","body":"This answer needs to explicitly state that the example is pulled from Java 8 in Action, just to make sure this doesn&#39;t get flagged as unattributed copying."}],"tags":[],"owner":{"account_id":17541523,"reputation":161,"user_id":12723614,"display_name":"momonannan"},"comment_count":1,"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1579169192,"creation_date":1579169192,"answer_id":59767176,"question_id":30864583,"body_markdown":"Okay. You **only need to use &#39;flatMap&#39; when you&#39;re facing nested Optionals**. Here&#39;s the example.\r\n```\r\npublic class Person {\r\n\r\n    private Optional&lt;Car&gt; optionalCar;\r\n\r\n    public Optional&lt;Car&gt; getOptionalCar() {\r\n        return optionalCar;\r\n    }\r\n}\r\n\r\npublic class Car {\r\n\r\n    private Optional&lt;Insurance&gt; optionalInsurance;\r\n\r\n    public Optional&lt;Insurance&gt; getOptionalInsurance() {\r\n        return optionalInsurance;\r\n    }\r\n}\r\n\r\npublic class Insurance {\r\n\r\n    private String name;\r\n\r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\n}\r\n\r\npublic class Test {\r\n\r\n    // map cannot deal with nested Optionals\r\n    public Optional&lt;String&gt; getCarInsuranceName(Person person) {\r\n        return person.getOptionalCar()\r\n                .map(Car::getOptionalInsurance) // ① leads to a Optional&lt;Optional&lt;Insurance&gt;\r\n                .map(Insurance::getName);       // ②\r\n    }\r\n\r\n}\r\n```\r\nLike Stream, Optional#map will return a value wrapped by a Optional. That&#39;s why we get a nested Optional -- `Optional&lt;Optional&lt;Insurance&gt;`. And at ②, we want to map it as an Insurance instance, that&#39;s how the tragedy happened.\r\nThe root is nested Optionals. If we can get the core value regardless the shells, we&#39;ll get it done. That&#39;s what flatMap does.\r\n```\r\npublic Optional&lt;String&gt; getCarInsuranceName(Person person) {\r\n    return person.getOptionalCar()\r\n                 .flatMap(Car::getOptionalInsurance)\r\n                 .map(Insurance::getName);\r\n}\r\n```\r\nIn the end, I stronly recommed the *Java 8 In Action* to you if you&#39;d like to study Java8 Systematicly.","title":"What is the difference between Optional.flatMap and Optional.map?","body":"<p>Okay. You <strong>only need to use 'flatMap' when you're facing nested Optionals</strong>. Here's the example.</p>\n\n<pre><code>public class Person {\n\n    private Optional&lt;Car&gt; optionalCar;\n\n    public Optional&lt;Car&gt; getOptionalCar() {\n        return optionalCar;\n    }\n}\n\npublic class Car {\n\n    private Optional&lt;Insurance&gt; optionalInsurance;\n\n    public Optional&lt;Insurance&gt; getOptionalInsurance() {\n        return optionalInsurance;\n    }\n}\n\npublic class Insurance {\n\n    private String name;\n\n    public String getName() {\n        return name;\n    }\n\n}\n\npublic class Test {\n\n    // map cannot deal with nested Optionals\n    public Optional&lt;String&gt; getCarInsuranceName(Person person) {\n        return person.getOptionalCar()\n                .map(Car::getOptionalInsurance) // ① leads to a Optional&lt;Optional&lt;Insurance&gt;\n                .map(Insurance::getName);       // ②\n    }\n\n}\n</code></pre>\n\n<p>Like Stream, Optional#map will return a value wrapped by a Optional. That's why we get a nested Optional -- <code>Optional&lt;Optional&lt;Insurance&gt;</code>. And at ②, we want to map it as an Insurance instance, that's how the tragedy happened.\nThe root is nested Optionals. If we can get the core value regardless the shells, we'll get it done. That's what flatMap does.</p>\n\n<pre><code>public Optional&lt;String&gt; getCarInsuranceName(Person person) {\n    return person.getOptionalCar()\n                 .flatMap(Car::getOptionalInsurance)\n                 .map(Insurance::getName);\n}\n</code></pre>\n\n<p>In the end, I stronly recommed the <em>Java 8 In Action</em> to you if you'd like to study Java8 Systematicly.</p>\n"},{"comments":[{"owner":{"account_id":7748883,"reputation":6720,"user_id":5865514,"accept_rate":93,"display_name":"Yu Chen"},"score":0,"creation_date":1642282629,"post_id":65664997,"comment_id":125031165,"body_markdown":"In your method signatures both return types are streams? I thought that `flatMap` would simply unwrap nested optional? Can you explain more how this relates to streams?","body":"In your method signatures both return types are streams? I thought that <code>flatMap</code> would simply unwrap nested optional? Can you explain more how this relates to streams?"},{"owner":{"account_id":20636918,"reputation":97,"user_id":15150382,"display_name":"kistlers"},"score":0,"creation_date":1663752489,"post_id":65664997,"comment_id":130311340,"body_markdown":"These are the signatures of Stream::map and Stream::flatMap. While similar in what they do, they are not the same. This answer is mostly irrelevant.","body":"These are the signatures of Stream::map and Stream::flatMap. While similar in what they do, they are not the same. This answer is mostly irrelevant."}],"tags":[],"owner":{"account_id":9929434,"reputation":319,"user_id":7349926,"display_name":"Mathew Stephen"},"comment_count":2,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1610360459,"creation_date":1610360459,"answer_id":65664997,"question_id":30864583,"body_markdown":"You can refer below link to understand in detail (best explanation which I could find):\r\n\r\nhttps://www.programmergirl.com/java-8-map-flatmap-difference/\r\n\r\nBoth map and flatMap - accept Function. The return type of map() is a single value whereas flatMap  is returning stream of values\r\n\r\n    &lt;R&gt; Stream&lt;R&gt; map(Function&lt;? super T, ? extends R&gt; mapper)\r\n    \r\n    &lt;R&gt; Stream&lt;R&gt; flatMap(Function&lt;? super T, ? extends Stream&lt;? extends R&gt;&gt; mapper)\r\n\r\n\r\n","title":"What is the difference between Optional.flatMap and Optional.map?","body":"<p>You can refer below link to understand in detail (best explanation which I could find):</p>\n<p><a href=\"https://www.programmergirl.com/java-8-map-flatmap-difference/\" rel=\"nofollow noreferrer\">https://www.programmergirl.com/java-8-map-flatmap-difference/</a></p>\n<p>Both map and flatMap - accept Function. The return type of map() is a single value whereas flatMap  is returning stream of values</p>\n<pre><code>&lt;R&gt; Stream&lt;R&gt; map(Function&lt;? super T, ? extends R&gt; mapper)\n\n&lt;R&gt; Stream&lt;R&gt; flatMap(Function&lt;? super T, ? extends Stream&lt;? extends R&gt;&gt; mapper)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6829513,"reputation":3942,"user_id":5254103,"accept_rate":0,"display_name":"BaiJiFeiLong"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1641721928,"creation_date":1641721928,"answer_id":70640109,"question_id":30864583,"body_markdown":"They do the **same** thing.\r\n\r\nThe **only difference** is that, the `lambda` return&#39;s type is **wrapped** by `Optional` or not.\r\n\r\nFor normal usage, `map` is shorter than `flatMap`\r\n\r\nExample:\r\n\r\n    package bj;\r\n\r\n    import java.util.Optional;\r\n\r\n    import static java.lang.System.out;\r\n\r\n    public class App {\r\n\r\n        public static void main(String[] args) {\r\n            out.println(Optional.of(10).map    (x -&gt;             x * x));\r\n            out.println(Optional.of(10).flatMap(x -&gt; Optional.of(x * x)));\r\n            out.println(Optional.of(10).map    (x -&gt; Optional.of(x * x).get()));\r\n\r\n            out.println(Optional.&lt;Integer&gt;empty().map    (x -&gt;             x * x));\r\n            out.println(Optional.&lt;Integer&gt;empty().flatMap(x -&gt; Optional.of(x * x)));\r\n            out.println(Optional.&lt;Integer&gt;empty().map    (x -&gt; Optional.of(x * x).get()));\r\n        }\r\n    }\r\n\r\n\r\nOutput:\r\n\r\n    Optional[100]\r\n    Optional[100]\r\n    Optional[100]\r\n    Optional.empty\r\n    Optional.empty\r\n    Optional.empty\r\n\r\n","title":"What is the difference between Optional.flatMap and Optional.map?","body":"<p>They do the <strong>same</strong> thing.</p>\n<p>The <strong>only difference</strong> is that, the <code>lambda</code> return's type is <strong>wrapped</strong> by <code>Optional</code> or not.</p>\n<p>For normal usage, <code>map</code> is shorter than <code>flatMap</code></p>\n<p>Example:</p>\n<pre><code>package bj;\n\nimport java.util.Optional;\n\nimport static java.lang.System.out;\n\npublic class App {\n\n    public static void main(String[] args) {\n        out.println(Optional.of(10).map    (x -&gt;             x * x));\n        out.println(Optional.of(10).flatMap(x -&gt; Optional.of(x * x)));\n        out.println(Optional.of(10).map    (x -&gt; Optional.of(x * x).get()));\n\n        out.println(Optional.&lt;Integer&gt;empty().map    (x -&gt;             x * x));\n        out.println(Optional.&lt;Integer&gt;empty().flatMap(x -&gt; Optional.of(x * x)));\n        out.println(Optional.&lt;Integer&gt;empty().map    (x -&gt; Optional.of(x * x).get()));\n    }\n}\n</code></pre>\n<p>Output:</p>\n<pre><code>Optional[100]\nOptional[100]\nOptional[100]\nOptional.empty\nOptional.empty\nOptional.empty\n</code></pre>\n"}],"owner":{"account_id":1917510,"reputation":23561,"user_id":1729795,"accept_rate":83,"display_name":"codependent"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":164652,"favorite_count":0,"down_vote_count":0,"up_vote_count":240,"accepted_answer_id":30864741,"answer_count":8,"score":240,"last_activity_date":1681115717,"creation_date":1434449396,"question_id":30864583,"body_markdown":"What&#39;s the difference between these two methods: `Optional.flatMap()` and `Optional.map()`?\r\n\r\nAn example would be appreciated.","title":"What is the difference between Optional.flatMap and Optional.map?","body":"<p>What's the difference between these two methods: <code>Optional.flatMap()</code> and <code>Optional.map()</code>?</p>\n\n<p>An example would be appreciated.</p>\n"},{"tags":["java","elasticsearch","bulk"],"comments":[{"owner":{"account_id":9775903,"reputation":199,"user_id":7245951,"accept_rate":75,"display_name":"TheDominus"},"score":0,"creation_date":1681114991,"post_id":75975424,"comment_id":134000354,"body_markdown":"Is this issue related to this question - https://stackoverflow.com/questions/57109948/sockettimeoutexception-while-retrieving-or-inserting-data-into-elastic-search-by ?","body":"Is this issue related to this question - <a href=\"https://stackoverflow.com/questions/57109948/sockettimeoutexception-while-retrieving-or-inserting-data-into-elastic-search-by\" title=\"sockettimeoutexception while retrieving or inserting data into elastic search by\">stackoverflow.com/questions/57109948/&hellip;</a> ?"}],"owner":{"account_id":9775903,"reputation":199,"user_id":7245951,"accept_rate":75,"display_name":"TheDominus"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":122,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1681114831,"creation_date":1681114831,"question_id":75975424,"body_markdown":"I am trying to do a bulk update (sync) to Elastic Search. \r\nThe Bulk Update to Elastic Search is wrapped over a service and other application call that API to Bulk Update which internally calls ES Bulk API. \r\n\r\nApplication (Client) -&gt; BulkUpdateToES (Wrapper Service) -&gt; esclient.bulk()\r\n\r\n\r\nNow, esclient.[bulk][1]() is failing with a socket timeout exception. \r\n\r\n```\r\njava.net.SocketTimeoutException: 30,000 milliseconds timeout on connection http-outgoing-44 [ACTIVE]\\n\\tat org.apache.http.nio.protocol.HttpAsyncRequestExecutor.timeout(HttpAsyncRequestExecutor.java:387)\\n\\tat org.apache.http.impl.nio.client.InternalIODispatch.onTimeout(InternalIODispatch.java:98)\\n\\tat org.apache.http.impl.nio.client.InternalIODispatch.onTimeout(InternalIODispatch.java:40)\\n\\tat org.apache.http.impl.nio.reactor.AbstractIODispatch.timeout(AbstractIODispatch.java:175)\\n\\tat org.apache.http.impl.nio.reactor.BaseIOReactor.sessionTimedOut(BaseIOReactor.java:261)\\n\\tat org.apache.http.impl.nio.reactor.AbstractIOReactor.timeoutCheck(AbstractIOReactor.java:506)\\n\\tat org.apache.http.impl.nio.reactor.BaseIOReactor.validate(BaseIOReactor.java:211)\\n\\tat org.apache.http.impl.nio.reactor.AbstractIOReactor.execute(AbstractIOReactor.java:280)\\n\\tat org.apache.http.impl.nio.reactor.BaseIOReactor.execute(BaseIOReactor.java:104)\\n\\tat org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor$Worker.run(AbstractMultiworkerIOReactor.java:591)\\n\\t... 1 more\r\n```\r\n\r\nHowever, the service call seems to not timeout i.e the response from BulkUpdateToES is returned under 1 sec.\r\n\r\nI am trying to reproduce the issue and will update the response data once I get it. \r\n\r\nHowever, I could not understand even though the ES is using a sync bulk update. How did the Wrapper API call did not had a timeout issue though ES had a timeout issue. \r\n\r\n\r\n  [1]: https://www.elastic.co/guide/en/elasticsearch/client/java-rest/current/java-rest-high-document-bulk.html","title":"SocketTimeout Exception in Elastic Search, But No timeout at API Level","body":"<p>I am trying to do a bulk update (sync) to Elastic Search.\nThe Bulk Update to Elastic Search is wrapped over a service and other application call that API to Bulk Update which internally calls ES Bulk API.</p>\n<p>Application (Client) -&gt; BulkUpdateToES (Wrapper Service) -&gt; esclient.bulk()</p>\n<p>Now, esclient.<a href=\"https://www.elastic.co/guide/en/elasticsearch/client/java-rest/current/java-rest-high-document-bulk.html\" rel=\"nofollow noreferrer\">bulk</a>() is failing with a socket timeout exception.</p>\n<pre><code>java.net.SocketTimeoutException: 30,000 milliseconds timeout on connection http-outgoing-44 [ACTIVE]\\n\\tat org.apache.http.nio.protocol.HttpAsyncRequestExecutor.timeout(HttpAsyncRequestExecutor.java:387)\\n\\tat org.apache.http.impl.nio.client.InternalIODispatch.onTimeout(InternalIODispatch.java:98)\\n\\tat org.apache.http.impl.nio.client.InternalIODispatch.onTimeout(InternalIODispatch.java:40)\\n\\tat org.apache.http.impl.nio.reactor.AbstractIODispatch.timeout(AbstractIODispatch.java:175)\\n\\tat org.apache.http.impl.nio.reactor.BaseIOReactor.sessionTimedOut(BaseIOReactor.java:261)\\n\\tat org.apache.http.impl.nio.reactor.AbstractIOReactor.timeoutCheck(AbstractIOReactor.java:506)\\n\\tat org.apache.http.impl.nio.reactor.BaseIOReactor.validate(BaseIOReactor.java:211)\\n\\tat org.apache.http.impl.nio.reactor.AbstractIOReactor.execute(AbstractIOReactor.java:280)\\n\\tat org.apache.http.impl.nio.reactor.BaseIOReactor.execute(BaseIOReactor.java:104)\\n\\tat org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor$Worker.run(AbstractMultiworkerIOReactor.java:591)\\n\\t... 1 more\n</code></pre>\n<p>However, the service call seems to not timeout i.e the response from BulkUpdateToES is returned under 1 sec.</p>\n<p>I am trying to reproduce the issue and will update the response data once I get it.</p>\n<p>However, I could not understand even though the ES is using a sync bulk update. How did the Wrapper API call did not had a timeout issue though ES had a timeout issue.</p>\n"},{"tags":["java","aws-sdk","apache-beam","amazon-sqs"],"owner":{"account_id":27911298,"reputation":21,"user_id":21313440,"display_name":"Alon Harell"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":79,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1681114543,"creation_date":1681114543,"question_id":75975401,"body_markdown":"I have a data pipeline processor written in Java using Apache Beam 2.46, with AWS SDK v2.\r\n\r\nPart of the pipeline includes reading messages as a stream from AWS SQS queue, and then if processing of the message fails rewriting them to the queue.\r\nBeam uses the SqsUnboundedReader class to manage the stream-reading from SQS.\r\n\r\nApparently, after reading a message from the queue, beam gives it a processing timeout of about 2 minutes (unconfigurable) and then deletes the message from the queue.\r\n\r\n\r\n\r\n\r\nMy pipeline logic requires that I &quot;manually&quot; send the acknowledgements to SQS (meaning, manually delete the read message from the queue).\r\nIs it possible?","title":"Apache Beam SqsIO Messages Acknowledge","body":"<p>I have a data pipeline processor written in Java using Apache Beam 2.46, with AWS SDK v2.</p>\n<p>Part of the pipeline includes reading messages as a stream from AWS SQS queue, and then if processing of the message fails rewriting them to the queue.\nBeam uses the SqsUnboundedReader class to manage the stream-reading from SQS.</p>\n<p>Apparently, after reading a message from the queue, beam gives it a processing timeout of about 2 minutes (unconfigurable) and then deletes the message from the queue.</p>\n<p>My pipeline logic requires that I &quot;manually&quot; send the acknowledgements to SQS (meaning, manually delete the read message from the queue).\nIs it possible?</p>\n"},{"tags":["java","regex","objectmapper","jsonnode"],"answers":[{"tags":[],"owner":{"account_id":17520379,"reputation":1536,"user_id":12706564,"display_name":"Emanuel Trandafir"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1681114193,"creation_date":1681114193,"answer_id":75975373,"question_id":75974991,"body_markdown":"if you are interested in the regex, you can use this: `#\\\\w+#\\\\w+` to match (and remove) 2 groups of #abc or something like `#\\\\d+#\\\\w+` if the first one is always going to be numeric:\r\n\r\n    @Test\r\n    void test() throws JsonProcessingException {\r\n    \tString eventData = &quot;&quot;&quot;\r\n    \t\t{\r\n    \t\t\t&quot;uniqueCode&quot;: &quot;ZZ&quot;,\r\n    \t\t\t&quot;entity&quot;: &quot;PROFILE&quot;,\r\n    \t\t\t&quot;id&quot;: &quot;e2b627b360d664377b227b--70378143#1&quot;,\r\n    \t\t\t&quot;data&quot;: [\r\n    \t\t\t\t&quot;DynamicAttribute&quot;\r\n    \t\t\t],\r\n    \t\t\t&quot;values&quot;: {\r\n    \t\t\t\t&quot;DynamicAttribute#1279930005#ZZ8400&quot;: [\r\n    \t\t\t\t\t{\r\n    \t\t\t\t\t\t&quot;property&quot;: &quot;activeFlag&quot;,\r\n    \t\t\t\t\t\t&quot;currentState&quot;: true,\r\n    \t\t\t\t\t\t&quot;previousState&quot;: null\r\n    \t\t\t\t\t}\r\n    \t\t\t\t]\r\n    \t\t\t},\r\n    \t\t\t&quot;DATE_TIME&quot;: &quot;05-Apr-2023 19:17:14.376&quot;\r\n    \t\t}\r\n    \t\t&quot;&quot;&quot;;\r\n    \r\n    \tObjectMapper objectMapper = new ObjectMapper();\r\n    \tJsonNode jsonNode = objectMapper.readTree(eventData);\r\n    \tObjectNode objectNode = objectMapper.convertValue(jsonNode.get(&quot;values&quot;), ObjectNode.class);\r\n    \r\n    \tString json = objectNode.toString().replaceAll(&quot;#\\\\w+#\\\\w+&quot;, &quot;&quot;);\r\n    \tassertEquals(json, &quot;{\\&quot;DynamicAttribute\\&quot;:[{\\&quot;property\\&quot;:\\&quot;activeFlag\\&quot;,\\&quot;currentState\\&quot;:true,\\&quot;previousState\\&quot;:null}]}&quot;);\r\n    }","title":"Regex to remove special characters from a Json node","body":"<p>if you are interested in the regex, you can use this: <code>#\\\\w+#\\\\w+</code> to match (and remove) 2 groups of #abc or something like <code>#\\\\d+#\\\\w+</code> if the first one is always going to be numeric:</p>\n<pre><code>@Test\nvoid test() throws JsonProcessingException {\n    String eventData = &quot;&quot;&quot;\n        {\n            &quot;uniqueCode&quot;: &quot;ZZ&quot;,\n            &quot;entity&quot;: &quot;PROFILE&quot;,\n            &quot;id&quot;: &quot;e2b627b360d664377b227b--70378143#1&quot;,\n            &quot;data&quot;: [\n                &quot;DynamicAttribute&quot;\n            ],\n            &quot;values&quot;: {\n                &quot;DynamicAttribute#1279930005#ZZ8400&quot;: [\n                    {\n                        &quot;property&quot;: &quot;activeFlag&quot;,\n                        &quot;currentState&quot;: true,\n                        &quot;previousState&quot;: null\n                    }\n                ]\n            },\n            &quot;DATE_TIME&quot;: &quot;05-Apr-2023 19:17:14.376&quot;\n        }\n        &quot;&quot;&quot;;\n\n    ObjectMapper objectMapper = new ObjectMapper();\n    JsonNode jsonNode = objectMapper.readTree(eventData);\n    ObjectNode objectNode = objectMapper.convertValue(jsonNode.get(&quot;values&quot;), ObjectNode.class);\n\n    String json = objectNode.toString().replaceAll(&quot;#\\\\w+#\\\\w+&quot;, &quot;&quot;);\n    assertEquals(json, &quot;{\\&quot;DynamicAttribute\\&quot;:[{\\&quot;property\\&quot;:\\&quot;activeFlag\\&quot;,\\&quot;currentState\\&quot;:true,\\&quot;previousState\\&quot;:null}]}&quot;);\n}\n</code></pre>\n"}],"owner":{"account_id":13004388,"reputation":111,"user_id":9399421,"display_name":"Scarlett John"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":135,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75975373,"answer_count":1,"score":0,"last_activity_date":1681114193,"creation_date":1681110548,"question_id":75974991,"body_markdown":"I have a JSON node as below from which I need to remove all the values after # like DynamicAttribute#1279930005#ZZ8400  to  DynamicAttribute\r\n\r\n    {\r\n    &quot;uniqueCode&quot;: &quot;ZZ&quot;,\r\n    &quot;entity&quot;: &quot;PROFILE&quot;,\r\n    &quot;id&quot;: &quot;e2b627b360d664377b227b--70378143#1&quot;,\r\n    &quot;data&quot;: [\r\n        &quot;DynamicAttribute&quot;\r\n    ],\r\n    &quot;values&quot;: {\r\n        &quot;DynamicAttribute#1279930005#ZZ8400&quot;: [\r\n            {\r\n                &quot;property&quot;: &quot;activeFlag&quot;,\r\n                &quot;currentState&quot;: true,\r\n                &quot;previousState&quot;: null\r\n            }\r\n        ]\r\n    },\r\n    &quot;DATE_TIME&quot;: &quot;05-Apr-2023 19:17:14.376&quot;}\r\n\r\n What i tried so far was as below :\r\n\r\n    \r\n    String eventData; //Has the above json payload\r\n    ObjectMapper objectMapper = new ObjectMapper();\r\n    JsonNode jsonNode = objectMapper.readTree(eventData);\r\n    ObjectNode objectNode = objectMapper.convertValue(jsonNode.get(&quot;values&quot;), ObjectNode.class);\r\n    objectNode.toString().replaceAll(&quot;\\\\#.*&quot;, &quot;\\&quot;:[&quot;);\r\n\r\nBut the above is giving me only like below and removing the rest of the fields from json :\r\n\r\n&quot;{\\&quot;DynamicAttribute\\&quot;:[&quot;\r\n","title":"Regex to remove special characters from a Json node","body":"<p>I have a JSON node as below from which I need to remove all the values after # like DynamicAttribute#1279930005#ZZ8400  to  DynamicAttribute</p>\n<pre><code>{\n&quot;uniqueCode&quot;: &quot;ZZ&quot;,\n&quot;entity&quot;: &quot;PROFILE&quot;,\n&quot;id&quot;: &quot;e2b627b360d664377b227b--70378143#1&quot;,\n&quot;data&quot;: [\n    &quot;DynamicAttribute&quot;\n],\n&quot;values&quot;: {\n    &quot;DynamicAttribute#1279930005#ZZ8400&quot;: [\n        {\n            &quot;property&quot;: &quot;activeFlag&quot;,\n            &quot;currentState&quot;: true,\n            &quot;previousState&quot;: null\n        }\n    ]\n},\n&quot;DATE_TIME&quot;: &quot;05-Apr-2023 19:17:14.376&quot;}\n</code></pre>\n<p>What i tried so far was as below :</p>\n<pre><code>String eventData; //Has the above json payload\nObjectMapper objectMapper = new ObjectMapper();\nJsonNode jsonNode = objectMapper.readTree(eventData);\nObjectNode objectNode = objectMapper.convertValue(jsonNode.get(&quot;values&quot;), ObjectNode.class);\nobjectNode.toString().replaceAll(&quot;\\\\#.*&quot;, &quot;\\&quot;:[&quot;);\n</code></pre>\n<p>But the above is giving me only like below and removing the rest of the fields from json :</p>\n<p>&quot;{&quot;DynamicAttribute&quot;:[&quot;</p>\n"},{"tags":["java","spring","spring-boot","maven"],"answers":[{"comments":[{"owner":{"account_id":17663169,"reputation":1,"user_id":12821154,"display_name":"Guan"},"score":0,"creation_date":1681092291,"post_id":75973825,"comment_id":133998122,"body_markdown":"common install success. pms package fail。still this problem","body":"common install success. pms package fail。still this problem"}],"tags":[],"owner":{"account_id":28261166,"reputation":1,"user_id":21605845,"display_name":"Thomas"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681092017,"creation_date":1681092017,"answer_id":75973825,"question_id":75973795,"body_markdown":"There was a missing dependency package during compilation. Please package com. atgui: gmall common: jar: 0.0.1 SNAPSHOT first\r\n\r\n","title":"Maven packaging failed","body":"<p>There was a missing dependency package during compilation. Please package com. atgui: gmall common: jar: 0.0.1 SNAPSHOT first</p>\n"},{"tags":[],"owner":{"account_id":13524226,"reputation":45,"user_id":9756492,"display_name":"Japhy Fan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681113900,"creation_date":1681113900,"answer_id":75975331,"question_id":75973795,"body_markdown":"Try to change gmall common version to 0.0.2 SNAPSHOT and reinstall.Or restart idea. Once there are too many dependencies, maven will make mistakes.","title":"Maven packaging failed","body":"<p>Try to change gmall common version to 0.0.2 SNAPSHOT and reinstall.Or restart idea. Once there are too many dependencies, maven will make mistakes.</p>\n"}],"owner":{"account_id":17663169,"reputation":1,"user_id":12821154,"display_name":"Guan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1681113900,"creation_date":1681091629,"question_id":75973795,"body_markdown":"```\r\n[ERROR] Failed to execute goal on project gmall-pms: Could not resolve dependencies for project com.atguigu:gmall-pms:jar:0.0.1-SNAPSHOT: Could not find artifact com.atguigu:gmall-common:jar:0.0.1-SNAPSHOT -&gt; [Help 1]\r\n[ERROR] \r\n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\r\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\r\n[ERROR] \r\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\r\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/DependencyResolutionException\r\n```\r\n\r\n[enter image description here](https://i.stack.imgur.com/o9q91.png)\r\n\r\n[enter image description here](https://i.stack.imgur.com/QO7MM.jpg)\r\n\r\nDelete the original file and repackage\r\n\r\n","title":"Maven packaging failed","body":"<pre><code>[ERROR] Failed to execute goal on project gmall-pms: Could not resolve dependencies for project com.atguigu:gmall-pms:jar:0.0.1-SNAPSHOT: Could not find artifact com.atguigu:gmall-common:jar:0.0.1-SNAPSHOT -&gt; [Help 1]\n[ERROR] \n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR] \n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/DependencyResolutionException\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/o9q91.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p><a href=\"https://i.stack.imgur.com/QO7MM.jpg\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>Delete the original file and repackage</p>\n"},{"tags":["java","spring","spring-integration","sftp","spring-integration-sftp"],"answers":[{"comments":[{"owner":{"account_id":23029514,"reputation":3,"user_id":17149233,"display_name":"Margarita"},"score":0,"creation_date":1681113621,"post_id":75959442,"comment_id":134000141,"body_markdown":"Thanks, Artem. I edited the post: added the description of my problem regarding integration test which does not receive data","body":"Thanks, Artem. I edited the post: added the description of my problem regarding integration test which does not receive data"},{"owner":{"account_id":23029514,"reputation":3,"user_id":17149233,"display_name":"Margarita"},"score":0,"creation_date":1681132896,"post_id":75959442,"comment_id":134003336,"body_markdown":"I changed defaultPoller bean, and now I set adviceChain directly into it. The behaviour has changed and now I get the following error: `The &#39;MessageSourceMutator&#39; supports only a &#39;MessageSource&#39; in the before/after hooks: bean &#39;sftpChannel&#39;; defined in: &#39;class path resource [...SFTPConfig.class]&#39;; from source: &#39;org.springframework.core.type.classreading.SimpleMethodMetadata@1a45d5d3&#39;`","body":"I changed defaultPoller bean, and now I set adviceChain directly into it. The behaviour has changed and now I get the following error: <code>The &#39;MessageSourceMutator&#39; supports only a &#39;MessageSource&#39; in the before&#47;after hooks: bean &#39;sftpChannel&#39;; defined in: &#39;class path resource [...SFTPConfig.class]&#39;; from source: &#39;org.springframework.core.type.classreading.SimpleMethodMeta&zwnj;&#8203;data@1a45d5d3&#39;</code>"},{"owner":{"account_id":3273937,"reputation":114870,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"score":0,"creation_date":1681133532,"post_id":75959442,"comment_id":134003468,"body_markdown":"You must not modify a `defaultPoller`. Not sure why would you do that since you already have a proper config: ` e -&gt; e.poller(Pollers.cron(cronParse).advice(advice())))` - exactly on a `Sftp.inboundAdapter()`.","body":"You must not modify a <code>defaultPoller</code>. Not sure why would you do that since you already have a proper config: ` e -&gt; e.poller(Pollers.cron(cronParse).advice(advice())))` - exactly on a <code>Sftp.inboundAdapter()</code>."},{"owner":{"account_id":3273937,"reputation":114870,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"score":0,"creation_date":1681133823,"post_id":75959442,"comment_id":134003535,"body_markdown":"Your `messageSource.receive();` might not receive the file for several reason: 1. Are you sure that you have configured your session factory for that `/files/good/` dir? 2. Your `integrationFlow` may have already pulled the file before you try to call that `messageSource.receive();`.","body":"Your <code>messageSource.receive();</code> might not receive the file for several reason: 1. Are you sure that you have configured your session factory for that <code>&#47;files&#47;good&#47;</code> dir? 2. Your <code>integrationFlow</code> may have already pulled the file before you try to call that <code>messageSource.receive();</code>."},{"owner":{"account_id":3273937,"reputation":114870,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"score":0,"creation_date":1681133918,"post_id":75959442,"comment_id":134003552,"body_markdown":"See if `MockIntegration` can help you somehow. I mean you may just mock your `handle()` in the end of the flow and verify it from the unit test: https://docs.spring.io/spring-integration/docs/current/reference/html/testing.html#testing-mocks","body":"See if <code>MockIntegration</code> can help you somehow. I mean you may just mock your <code>handle()</code> in the end of the flow and verify it from the unit test: <a href=\"https://docs.spring.io/spring-integration/docs/current/reference/html/testing.html#testing-mocks\" rel=\"nofollow noreferrer\">docs.spring.io/spring-integration/docs/current/reference/htm&zwnj;&#8203;l/&hellip;</a>"},{"owner":{"account_id":23029514,"reputation":3,"user_id":17149233,"display_name":"Margarita"},"score":0,"creation_date":1681135989,"post_id":75959442,"comment_id":134003984,"body_markdown":"Thank you for your answers, Artem. Answering your question about why would I change something in defaultPoller bean: Now, thanks to you, I realized that I shouldn&#39;t change it. But when I leave `e -&gt; e.poller(Pollers.cron(cronParse).advice(advice())))` I get `BeanCreationException: Error creating bean with name &#39;integrationFlow&#39; IllegalArgumentException: No poller has been defined for endpoint &#39;integrationFlow.org.springframework.integration.config.ConsumerEndpointFactoryBean#0&#39;, and no default poller is available within the context.` Is there another way to make a poller with my adviceChain?","body":"Thank you for your answers, Artem. Answering your question about why would I change something in defaultPoller bean: Now, thanks to you, I realized that I shouldn&#39;t change it. But when I leave <code>e -&gt; e.poller(Pollers.cron(cronParse).advice(advice())))</code> I get <code>BeanCreationException: Error creating bean with name &#39;integrationFlow&#39; IllegalArgumentException: No poller has been defined for endpoint &#39;integrationFlow.org.springframework.integration.config.Cons&zwnj;&#8203;umerEndpointFactoryB&zwnj;&#8203;ean#0&#39;, and no default poller is available within the context.</code> Is there another way to make a poller with my adviceChain?"},{"owner":{"account_id":3273937,"reputation":114870,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"score":0,"creation_date":1681137197,"post_id":75959442,"comment_id":134004211,"body_markdown":"That error has nothing to do with your source. You have that `sftpChannel` as a `QueueChannel` and its consumer requires a poller. Yes, you still can configure a `defaultPoller` for this type of endpoints, but it must come without the mentioned advice. Your SFTP message source endpoint must keep its own local poller.","body":"That error has nothing to do with your source. You have that <code>sftpChannel</code> as a <code>QueueChannel</code> and its consumer requires a poller. Yes, you still can configure a <code>defaultPoller</code> for this type of endpoints, but it must come without the mentioned advice. Your SFTP message source endpoint must keep its own local poller."}],"tags":[],"owner":{"account_id":3273937,"reputation":114870,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"comment_count":7,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680878480,"creation_date":1680878480,"answer_id":75959442,"question_id":75958454,"body_markdown":"That `.remoteDirectory(&quot;.&quot;)` is just a placeholder. When the polling is in action, that `RotatingServerAdvice` sets a current directory into the `Sftp.inboundAdapter()` overriding your initial placeholder. Not clear what the problem you have. Would you mind to share an error or suspicious behavior? \r\n\r\nIt is clearly explained in that doc:\r\n\r\n&gt; This advice will poll directory `foo` on server `one` until no new files exist then move to directory `bar` and then directory `baz` on server `two`, etc.","title":"What is a proper way to specify different remote directories when using DelegatingSessionFactory?","body":"<p>That <code>.remoteDirectory(&quot;.&quot;)</code> is just a placeholder. When the polling is in action, that <code>RotatingServerAdvice</code> sets a current directory into the <code>Sftp.inboundAdapter()</code> overriding your initial placeholder. Not clear what the problem you have. Would you mind to share an error or suspicious behavior?</p>\n<p>It is clearly explained in that doc:</p>\n<blockquote>\n<p>This advice will poll directory <code>foo</code> on server <code>one</code> until no new files exist then move to directory <code>bar</code> and then directory <code>baz</code> on server <code>two</code>, etc.</p>\n</blockquote>\n"}],"owner":{"account_id":23029514,"reputation":3,"user_id":17149233,"display_name":"Margarita"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681113438,"creation_date":1680870719,"question_id":75958454,"body_markdown":"I want my DelegatingSessionFactory to search for files in different remote directories on the same server. I try to use RotatingServerAdvice. The [documentation ](https://docs.spring.io/spring-integration/reference/html/sftp.html#sftp-rotating-server-advice) says I need to specify bean IntegrationFlow, which should be defined as \r\n\r\n```\r\n@Bean\r\npublic IntegrationFlow flow() {\r\n    return IntegrationFlow.from(Sftp.inboundAdapter(sf())\r\n                    .filter(new SftpPersistentAcceptOnceFileListFilter(new SimpleMetadataStore(), &quot;rotate&quot;))\r\n                    .localDirectory(new File(tmpDir))\r\n                    .localFilenameExpression(&quot;#remoteDirectory + T(java.io.File).separator + #root&quot;)\r\n                    .remoteDirectory(&quot;.&quot;),\r\n                e -&gt; e.poller(Pollers.fixedDelay(1).advice(advice())))\r\n            .channel(MessageChannels.queue(&quot;files&quot;))\r\n            .get();\r\n}\r\n```\r\n\r\nthe problem is that I don&#39;t know what to specify in &quot;remoteDirectory&quot; field (they use &quot;.&quot;, which I don&#39;t know why), also the application won&#39;t start unless I use this field. When using RotatingServerAdvice I provide remote directories this way:\r\n\r\n```\r\n@Bean\r\n    public RotatingServerAdvice advice() {\r\n        List&lt;RotationPolicy.KeyDirectory&gt; keyDirectories = new ArrayList&lt;&gt;();\r\n        for (String remoteDir: properties.getRemoteDirectory()) {\r\n            keyDirectories.add(new RotationPolicy.KeyDirectory(SESSION_1_KEY, remoteDir));\r\n        }\r\n        return new RotatingServerAdvice(sftpSessionFactory(), keyDirectories);\r\n    }\r\n```\r\n\r\nSo, what do I need to do with *.remoteDirectory(&quot;.&quot;)* to make it work properly? \r\n\r\n\r\nThe full code of my SFTP config is below:\r\n\r\n```\r\n@Configuration\r\n@RequiredArgsConstructor\r\npublic class SFTPConfig {\r\n\r\n    private static final String SESSION_1_KEY = &quot;SESSION_1&quot;;\r\n\r\n    private final SFTPProperties properties;\r\n    private final TimeService timeService;\r\n\r\n    @Value(&quot;${cron.parse}&quot;)\r\n    private String cronParse;\r\n\r\n    @Bean\r\n    public DelegatingSessionFactory&lt;ChannelSftp.LsEntry&gt; sftpSessionFactory() {\r\n        DefaultSftpSessionFactory defaultSftpSessionFactory = new DefaultSftpSessionFactory();\r\n        defaultSftpSessionFactory.setHost(properties.getHost());\r\n        defaultSftpSessionFactory.setPort(properties.getPort());\r\n        defaultSftpSessionFactory.setUser(properties.getUsername());\r\n        defaultSftpSessionFactory.setPassword(properties.getPassword());\r\n        defaultSftpSessionFactory.setAllowUnknownKeys(true);\r\n\r\n        CachingSessionFactory&lt;LsEntry&gt; cachingSessionFactory =\r\n                new CachingSessionFactory&lt;&gt;(defaultSftpSessionFactory);\r\n        cachingSessionFactory.setPoolSize(properties.getPoolSize());\r\n        cachingSessionFactory.setSessionWaitTimeout(properties.getTimeout());\r\n\r\n        Map&lt;Object, SessionFactory&lt;ChannelSftp.LsEntry&gt;&gt; sessionMap = new HashMap&lt;&gt;();\r\n        sessionMap.put(SESSION_1_KEY, cachingSessionFactory);\r\n        return new DelegatingSessionFactory&lt;&gt;(sessionMap, cachingSessionFactory);\r\n    }\r\n\r\n    @Bean\r\n    public PollableChannel sftpChannel() {\r\n        return new QueueChannel();\r\n    }\r\n\r\n    @Bean(name = PollerMetadata.DEFAULT_POLLER)\r\n    public PollerMetadata defaultPoller() {\r\n        PollerMetadata pollerMetadata = new PollerMetadata();\r\n        pollerMetadata.setTrigger(new PeriodicTrigger(10));\r\n        return pollerMetadata;\r\n    }\r\n\r\n    @Bean\r\n    public MessageHandler messageHandler(MyService myService, DirectoriesProperties directoriesProperties,\r\n                                         FileService fileService, IHub hub) {\r\n        return new MyMessageHandler(myService, directoriesProperties, fileService, hub);\r\n    }\r\n\r\n    @Bean\r\n    public IntegrationFlow integrationFlow(MyService myService, DirectoriesProperties directoriesProperties,FileService fileService, IHub hub) {\r\n\r\n        return IntegrationFlows\r\n                .from(Sftp.inboundAdapter(sftpSessionFactory())\r\n                                .filter(filter())\r\n                                .localDirectory(new File(properties.getLocalDirectory()))\r\n                                .autoCreateLocalDirectory(true)\r\n                                .deleteRemoteFiles(true)\r\n                                .localFilter(new AcceptOnceFileListFilter&lt;&gt;())\r\n                                .remoteDirectory(&quot;.&quot;),\r\n                        e -&gt; e.poller(Pollers.cron(cronParse).advice(advice())))\r\n                .channel(sftpChannel())\r\n                .handle(messageHandler(myService, directoriesProperties, fileService, hub))\r\n                .get();\r\n    }\r\n\r\n    @Bean\r\n    public RotatingServerAdvice advice() {\r\n        List&lt;RotationPolicy.KeyDirectory&gt; keyDirectories = new ArrayList&lt;&gt;();\r\n        for (String remoteDir: properties.getRemoteDirectory()) {\r\n            keyDirectories.add(new RotationPolicy.KeyDirectory(SESSION_1_KEY, remoteDir));\r\n        }\r\n        return new RotatingServerAdvice(sftpSessionFactory(), keyDirectories);\r\n    }\r\n\r\n    private ChainFileListFilter&lt;LsEntry&gt; filter() {\r\n        ChainFileListFilter&lt;LsEntry&gt; filter = new ChainFileListFilter&lt;&gt;();\r\n        filter.addFilter(new SftpRegexPatternFileListFilter(&quot;files_\\\\d{12}.txt&quot;));\r\n        filter.addFilter(new TimestampPeriodFileListFilter(timeService, properties.getPeriod()));\r\n        return filter;\r\n    }\r\n}\r\n```\r\n\r\nI&#39;ve spent a few days trying to make DelegatingSession work. Before, it used to be just CachingSessionFactory with one remote directory to use. Please, help me to understand what do I have to do with `.remoteDirectory(&quot;.&quot;)` part. Thanks in advance\r\n\r\n\r\n**UPDATE**\r\n\r\nArtem, thank you for your explanation. I thought my problem was with `.remoteDirectory(&quot;.&quot;)`, but now I have no suggestion why my integration test fails... Here is the code:\r\n\r\n```\r\npublic class ParsingTest extends BaseTest {\r\n\r\n    @Autowired\r\n    private MessageHandler messageHandler;\r\n    @Autowired\r\n    private MessageSource&lt;File&gt; messageSource;\r\n\r\n    @Test\r\n    void shouldSaveAllCalls() {\r\n        String filename = &quot;files_010120230300.txt&quot;;\r\n        String resourcePath = &quot;/files/good/&quot; + filename;\r\n        prepareFileInRemoteSftpServer(resourcePath, filename);\r\n\r\n        receiveAndHandleFileFromSftp();\r\n\r\n    }\r\n\r\n    private void prepareFileInRemoteSftpServer(String resourcePath, String remoteFilename) {\r\n        MountableFile mountableFile = MountableFile.forClasspathResource(resourcePath);\r\n        sftpContainer.copyFileToContainer(mountableFile, sftpRemotePath + remoteFilename);\r\n    }\r\n\r\n    private void receiveAndHandleFileFromSftp() {\r\n        Message&lt;?&gt; message = messageSource.receive();\r\n        assertThat(message).isNotNull();\r\n        messageHandler.handleMessage(message);\r\n    }\r\n\r\n}\r\n\r\n```\r\nIt fails on the line `assertThat(message).isNotNull();` because message is null. \r\n\r\nWould you mind telling me where I am wrong? My only suggestion is about wrong usage of `messageSource.receive();` but I don&#39;t know how else I can receive data","title":"What is a proper way to specify different remote directories when using DelegatingSessionFactory?","body":"<p>I want my DelegatingSessionFactory to search for files in different remote directories on the same server. I try to use RotatingServerAdvice. The <a href=\"https://docs.spring.io/spring-integration/reference/html/sftp.html#sftp-rotating-server-advice\" rel=\"nofollow noreferrer\">documentation </a> says I need to specify bean IntegrationFlow, which should be defined as</p>\n<pre><code>@Bean\npublic IntegrationFlow flow() {\n    return IntegrationFlow.from(Sftp.inboundAdapter(sf())\n                    .filter(new SftpPersistentAcceptOnceFileListFilter(new SimpleMetadataStore(), &quot;rotate&quot;))\n                    .localDirectory(new File(tmpDir))\n                    .localFilenameExpression(&quot;#remoteDirectory + T(java.io.File).separator + #root&quot;)\n                    .remoteDirectory(&quot;.&quot;),\n                e -&gt; e.poller(Pollers.fixedDelay(1).advice(advice())))\n            .channel(MessageChannels.queue(&quot;files&quot;))\n            .get();\n}\n</code></pre>\n<p>the problem is that I don't know what to specify in &quot;remoteDirectory&quot; field (they use &quot;.&quot;, which I don't know why), also the application won't start unless I use this field. When using RotatingServerAdvice I provide remote directories this way:</p>\n<pre><code>@Bean\n    public RotatingServerAdvice advice() {\n        List&lt;RotationPolicy.KeyDirectory&gt; keyDirectories = new ArrayList&lt;&gt;();\n        for (String remoteDir: properties.getRemoteDirectory()) {\n            keyDirectories.add(new RotationPolicy.KeyDirectory(SESSION_1_KEY, remoteDir));\n        }\n        return new RotatingServerAdvice(sftpSessionFactory(), keyDirectories);\n    }\n</code></pre>\n<p>So, what do I need to do with <em>.remoteDirectory(&quot;.&quot;)</em> to make it work properly?</p>\n<p>The full code of my SFTP config is below:</p>\n<pre><code>@Configuration\n@RequiredArgsConstructor\npublic class SFTPConfig {\n\n    private static final String SESSION_1_KEY = &quot;SESSION_1&quot;;\n\n    private final SFTPProperties properties;\n    private final TimeService timeService;\n\n    @Value(&quot;${cron.parse}&quot;)\n    private String cronParse;\n\n    @Bean\n    public DelegatingSessionFactory&lt;ChannelSftp.LsEntry&gt; sftpSessionFactory() {\n        DefaultSftpSessionFactory defaultSftpSessionFactory = new DefaultSftpSessionFactory();\n        defaultSftpSessionFactory.setHost(properties.getHost());\n        defaultSftpSessionFactory.setPort(properties.getPort());\n        defaultSftpSessionFactory.setUser(properties.getUsername());\n        defaultSftpSessionFactory.setPassword(properties.getPassword());\n        defaultSftpSessionFactory.setAllowUnknownKeys(true);\n\n        CachingSessionFactory&lt;LsEntry&gt; cachingSessionFactory =\n                new CachingSessionFactory&lt;&gt;(defaultSftpSessionFactory);\n        cachingSessionFactory.setPoolSize(properties.getPoolSize());\n        cachingSessionFactory.setSessionWaitTimeout(properties.getTimeout());\n\n        Map&lt;Object, SessionFactory&lt;ChannelSftp.LsEntry&gt;&gt; sessionMap = new HashMap&lt;&gt;();\n        sessionMap.put(SESSION_1_KEY, cachingSessionFactory);\n        return new DelegatingSessionFactory&lt;&gt;(sessionMap, cachingSessionFactory);\n    }\n\n    @Bean\n    public PollableChannel sftpChannel() {\n        return new QueueChannel();\n    }\n\n    @Bean(name = PollerMetadata.DEFAULT_POLLER)\n    public PollerMetadata defaultPoller() {\n        PollerMetadata pollerMetadata = new PollerMetadata();\n        pollerMetadata.setTrigger(new PeriodicTrigger(10));\n        return pollerMetadata;\n    }\n\n    @Bean\n    public MessageHandler messageHandler(MyService myService, DirectoriesProperties directoriesProperties,\n                                         FileService fileService, IHub hub) {\n        return new MyMessageHandler(myService, directoriesProperties, fileService, hub);\n    }\n\n    @Bean\n    public IntegrationFlow integrationFlow(MyService myService, DirectoriesProperties directoriesProperties,FileService fileService, IHub hub) {\n\n        return IntegrationFlows\n                .from(Sftp.inboundAdapter(sftpSessionFactory())\n                                .filter(filter())\n                                .localDirectory(new File(properties.getLocalDirectory()))\n                                .autoCreateLocalDirectory(true)\n                                .deleteRemoteFiles(true)\n                                .localFilter(new AcceptOnceFileListFilter&lt;&gt;())\n                                .remoteDirectory(&quot;.&quot;),\n                        e -&gt; e.poller(Pollers.cron(cronParse).advice(advice())))\n                .channel(sftpChannel())\n                .handle(messageHandler(myService, directoriesProperties, fileService, hub))\n                .get();\n    }\n\n    @Bean\n    public RotatingServerAdvice advice() {\n        List&lt;RotationPolicy.KeyDirectory&gt; keyDirectories = new ArrayList&lt;&gt;();\n        for (String remoteDir: properties.getRemoteDirectory()) {\n            keyDirectories.add(new RotationPolicy.KeyDirectory(SESSION_1_KEY, remoteDir));\n        }\n        return new RotatingServerAdvice(sftpSessionFactory(), keyDirectories);\n    }\n\n    private ChainFileListFilter&lt;LsEntry&gt; filter() {\n        ChainFileListFilter&lt;LsEntry&gt; filter = new ChainFileListFilter&lt;&gt;();\n        filter.addFilter(new SftpRegexPatternFileListFilter(&quot;files_\\\\d{12}.txt&quot;));\n        filter.addFilter(new TimestampPeriodFileListFilter(timeService, properties.getPeriod()));\n        return filter;\n    }\n}\n</code></pre>\n<p>I've spent a few days trying to make DelegatingSession work. Before, it used to be just CachingSessionFactory with one remote directory to use. Please, help me to understand what do I have to do with <code>.remoteDirectory(&quot;.&quot;)</code> part. Thanks in advance</p>\n<p><strong>UPDATE</strong></p>\n<p>Artem, thank you for your explanation. I thought my problem was with <code>.remoteDirectory(&quot;.&quot;)</code>, but now I have no suggestion why my integration test fails... Here is the code:</p>\n<pre><code>public class ParsingTest extends BaseTest {\n\n    @Autowired\n    private MessageHandler messageHandler;\n    @Autowired\n    private MessageSource&lt;File&gt; messageSource;\n\n    @Test\n    void shouldSaveAllCalls() {\n        String filename = &quot;files_010120230300.txt&quot;;\n        String resourcePath = &quot;/files/good/&quot; + filename;\n        prepareFileInRemoteSftpServer(resourcePath, filename);\n\n        receiveAndHandleFileFromSftp();\n\n    }\n\n    private void prepareFileInRemoteSftpServer(String resourcePath, String remoteFilename) {\n        MountableFile mountableFile = MountableFile.forClasspathResource(resourcePath);\n        sftpContainer.copyFileToContainer(mountableFile, sftpRemotePath + remoteFilename);\n    }\n\n    private void receiveAndHandleFileFromSftp() {\n        Message&lt;?&gt; message = messageSource.receive();\n        assertThat(message).isNotNull();\n        messageHandler.handleMessage(message);\n    }\n\n}\n\n</code></pre>\n<p>It fails on the line <code>assertThat(message).isNotNull();</code> because message is null.</p>\n<p>Would you mind telling me where I am wrong? My only suggestion is about wrong usage of <code>messageSource.receive();</code> but I don't know how else I can receive data</p>\n"},{"tags":["java","android","dalvik","smali"],"comments":[{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":0,"creation_date":1681080286,"post_id":75964676,"comment_id":133997057,"body_markdown":"Searching the error in your tile returns some results here on Stackoverflow. Have you checked them if their answers are applicable in your case?","body":"Searching the error in your tile returns some results here on Stackoverflow. Have you checked them if their answers are applicable in your case?"},{"owner":{"account_id":28248364,"reputation":1,"user_id":21595024,"display_name":"aviation_hacker"},"score":0,"creation_date":1681111548,"post_id":75964676,"comment_id":133999852,"body_markdown":"Hey Robert, indeed I have had a look through all of those, but nothing is quite like my application usecase - most of them seem to be to do with instances of various viewers and forgetting to declare an object or something along those lines, whereas here I guess this used to work, but something has changed?\n\nI&#39;ve actually just been thinking about this now, and looking at the errors/code again, I&#39;m actually wondering if it&#39;s failing to get a resource ID, which is what is causing the getResourceEntryName to fail? I&#39;ll keep looking into this and will report back regardless :)","body":"Hey Robert, indeed I have had a look through all of those, but nothing is quite like my application usecase - most of them seem to be to do with instances of various viewers and forgetting to declare an object or something along those lines, whereas here I guess this used to work, but something has changed?  I&#39;ve actually just been thinking about this now, and looking at the errors/code again, I&#39;m actually wondering if it&#39;s failing to get a resource ID, which is what is causing the getResourceEntryName to fail? I&#39;ll keep looking into this and will report back regardless :)"}],"answers":[{"tags":[],"owner":{"account_id":28248364,"reputation":1,"user_id":21595024,"display_name":"aviation_hacker"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681113359,"creation_date":1681113359,"answer_id":75975285,"question_id":75964676,"body_markdown":"So, referencing the [Android Developer Website][1], I managed to change the getResourceEntryName element to GetResourceName and then had a look at the LogCat - what were previously the ResourceEntryNames I&#39;m supposing changed to android:id/EntryName due to how the application logging would append it all together.\r\n\r\nSo in this case, it looks like there isn&#39;t a global issue with the code itself (the rest seem to work fine), but it instead has to do with a particular element it is retrieving not having an ID, hence the issue appearing in the logs.\r\n\r\n\r\n  [1]: https://developer.android.com/reference/android/content/res/Resources#getResourceEntryName(int)","title":"android.content.res.Resources$NotFoundException: Unable to find resource ID #0xffffffff?","body":"<p>So, referencing the <a href=\"https://developer.android.com/reference/android/content/res/Resources#getResourceEntryName(int)\" rel=\"nofollow noreferrer\">Android Developer Website</a>, I managed to change the getResourceEntryName element to GetResourceName and then had a look at the LogCat - what were previously the ResourceEntryNames I'm supposing changed to android:id/EntryName due to how the application logging would append it all together.</p>\n<p>So in this case, it looks like there isn't a global issue with the code itself (the rest seem to work fine), but it instead has to do with a particular element it is retrieving not having an ID, hence the issue appearing in the logs.</p>\n"}],"owner":{"account_id":28248364,"reputation":1,"user_id":21595024,"display_name":"aviation_hacker"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":303,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1681113359,"creation_date":1680949636,"question_id":75964676,"body_markdown":"I&#39;m trying to repair an old android app that I&#39;ve been using for years (not the original developer). I&#39;ve got all the other issues fixed (yay! By pure luck almost) and I&#39;m running into this issue, where it seems to have an issue getting the ResourceEntryName? Unfortunately I can&#39;t figure out exactly what&#39;s wrong with it and where it&#39;s throwing the error apart from the line references given, nor am I particularly java/android dalvik familiar either, so I may be out of my depth on this one.\r\n\r\nI&#39;ve double checked as many of the obvious resource issues that I could find in terms of specific references (maneuvers etc, as it&#39;s designed to take data from Maps notifications and display them on a Pebble Watch), and have also tried reordering the order that it getID&#39;s and getResources as some of the other issues were to do with the order things were executed in, due to the application parsing notification data to then display on the watch - no practical difference here, and depending on the order these were loaded in it came back with Fatal Errors so I&#39;ve put them back to original using a backup file. Also tried commenting out the line as well, results in the app crashing and a Fatal Error, same with removing the integer in brackets as well. Another thread suggested moving the drawables into the base drawable folders rather than version specific eg. drawable-v23 but that didn&#39;t make a difference either, nor did moving layout files incase there was one missing/in another folder.\r\n\r\nAny help/suggestions you could provide would be appreciated! \r\nI did have a search through on similar errors, and the causes seemed to be rather wide ranging and application specific, so I thought it best to ask my own question instead. I&#39;ve attached both the LogCat that&#39;s throwing the error (seems to repeat pretty frequently in the logs, but doesn&#39;t affect functionality seemingly at all?) and also the code from the .smali file in question.\r\n\r\nThanks in advance! :)\r\n\r\n```\r\n04-08 21:43:14.890 25573 27081 E corp.pebble.nav: No package ID ff found for ID 0xffffffff.\r\n04-08 21:43:14.890 25573 27081 D NotificationHandler: getResources failed\r\n04-08 21:43:14.890 25573 27081 D NotificationHandler: android.content.res.Resources$NotFoundException: Unable to find resource ID #0xffffffff\r\n04-08 21:43:14.890 25573 27081 D NotificationHandler: \tat android.content.res.ResourcesImpl.getResourceEntryName(ResourcesImpl.java:289)\r\n04-08 21:43:14.890 25573 27081 D NotificationHandler: \tat android.content.res.Resources.getResourceEntryName(Resources.java:2335)\r\n04-08 21:43:14.890 25573 27081 D NotificationHandler: \tat com.batescorp.pebble.nav.lib.NotificationHandler.a(SourceFile:259)\r\n04-08 21:43:14.890 25573 27081 D NotificationHandler: \tat com.batescorp.pebble.nav.lib.NotificationHandler.a(SourceFile:333)\r\n04-08 21:43:14.890 25573 27081 D NotificationHandler: \tat com.batescorp.pebble.nav.lib.NotificationHandler.a(SourceFile:333)\r\n04-08 21:43:14.890 25573 27081 D NotificationHandler: \tat com.batescorp.pebble.nav.lib.NotificationHandler.a(SourceFile:333)\r\n04-08 21:43:14.890 25573 27081 D NotificationHandler: \tat com.batescorp.pebble.nav.lib.NotificationHandler.a(SourceFile:27)\r\n04-08 21:43:14.890 25573 27081 D NotificationHandler: \tat com.batescorp.pebble.nav.lib.NotificationHandler$1.run(SourceFile:210)\r\n04-08 21:43:14.890 25573 27081 D NotificationHandler: \tat java.lang.Thread.run(Thread.java:1012)\r\n```\r\n\r\n\r\n```\r\n# instance fields\r\n.field private a:Ljava/lang/String;\r\n```\r\n\r\n```\r\n.line 67\r\n    const-string v0, &quot;&quot;\r\n\r\n    iput-object v0, p0, Lcom/batescorp/pebble/nav/lib/NotificationHandler;-&gt;a:Ljava/lang/String;\r\n```\r\n\r\n\r\n```\r\n.line 259\r\n    :try_start_1\r\n    invoke-virtual {p2}, Landroid/content/Context;-&gt;getResources()Landroid/content/res/Resources;\r\n\r\n    move-result-object v4\r\n\r\n    invoke-virtual {v1}, Landroid/view/View;-&gt;getId()I\r\n\r\n    move-result v5\r\n\r\n    invoke-virtual {v4, v5}, Landroid/content/res/Resources;-&gt;getResourceEntryName(I)Ljava/lang/String;\r\n    :try_end_1\r\n    .catch Ljava/lang/Exception; {:try_start_1 .. :try_end_1} :catch_0\r\n\r\n    move-result-object v0\r\n\r\n    move-object v4, v0\r\n```\r\n\r\n\r\n```\r\n.line 333\r\n    check-cast v1, Landroid/view/ViewGroup;\r\n\r\n    invoke-direct {p0, p1, p2, v1}, Lcom/batescorp/pebble/nav/lib/NotificationHandler;-&gt;a(Landroid/content/Context;Landroid/content/Context;Landroid/view/ViewGroup;)Ljava/lang/String;\r\n\r\n    goto/16 :goto_1\r\n```","title":"android.content.res.Resources$NotFoundException: Unable to find resource ID #0xffffffff?","body":"<p>I'm trying to repair an old android app that I've been using for years (not the original developer). I've got all the other issues fixed (yay! By pure luck almost) and I'm running into this issue, where it seems to have an issue getting the ResourceEntryName? Unfortunately I can't figure out exactly what's wrong with it and where it's throwing the error apart from the line references given, nor am I particularly java/android dalvik familiar either, so I may be out of my depth on this one.</p>\n<p>I've double checked as many of the obvious resource issues that I could find in terms of specific references (maneuvers etc, as it's designed to take data from Maps notifications and display them on a Pebble Watch), and have also tried reordering the order that it getID's and getResources as some of the other issues were to do with the order things were executed in, due to the application parsing notification data to then display on the watch - no practical difference here, and depending on the order these were loaded in it came back with Fatal Errors so I've put them back to original using a backup file. Also tried commenting out the line as well, results in the app crashing and a Fatal Error, same with removing the integer in brackets as well. Another thread suggested moving the drawables into the base drawable folders rather than version specific eg. drawable-v23 but that didn't make a difference either, nor did moving layout files incase there was one missing/in another folder.</p>\n<p>Any help/suggestions you could provide would be appreciated!\nI did have a search through on similar errors, and the causes seemed to be rather wide ranging and application specific, so I thought it best to ask my own question instead. I've attached both the LogCat that's throwing the error (seems to repeat pretty frequently in the logs, but doesn't affect functionality seemingly at all?) and also the code from the .smali file in question.</p>\n<p>Thanks in advance! :)</p>\n<pre><code>04-08 21:43:14.890 25573 27081 E corp.pebble.nav: No package ID ff found for ID 0xffffffff.\n04-08 21:43:14.890 25573 27081 D NotificationHandler: getResources failed\n04-08 21:43:14.890 25573 27081 D NotificationHandler: android.content.res.Resources$NotFoundException: Unable to find resource ID #0xffffffff\n04-08 21:43:14.890 25573 27081 D NotificationHandler:   at android.content.res.ResourcesImpl.getResourceEntryName(ResourcesImpl.java:289)\n04-08 21:43:14.890 25573 27081 D NotificationHandler:   at android.content.res.Resources.getResourceEntryName(Resources.java:2335)\n04-08 21:43:14.890 25573 27081 D NotificationHandler:   at com.batescorp.pebble.nav.lib.NotificationHandler.a(SourceFile:259)\n04-08 21:43:14.890 25573 27081 D NotificationHandler:   at com.batescorp.pebble.nav.lib.NotificationHandler.a(SourceFile:333)\n04-08 21:43:14.890 25573 27081 D NotificationHandler:   at com.batescorp.pebble.nav.lib.NotificationHandler.a(SourceFile:333)\n04-08 21:43:14.890 25573 27081 D NotificationHandler:   at com.batescorp.pebble.nav.lib.NotificationHandler.a(SourceFile:333)\n04-08 21:43:14.890 25573 27081 D NotificationHandler:   at com.batescorp.pebble.nav.lib.NotificationHandler.a(SourceFile:27)\n04-08 21:43:14.890 25573 27081 D NotificationHandler:   at com.batescorp.pebble.nav.lib.NotificationHandler$1.run(SourceFile:210)\n04-08 21:43:14.890 25573 27081 D NotificationHandler:   at java.lang.Thread.run(Thread.java:1012)\n</code></pre>\n<pre><code># instance fields\n.field private a:Ljava/lang/String;\n</code></pre>\n<pre><code>.line 67\n    const-string v0, &quot;&quot;\n\n    iput-object v0, p0, Lcom/batescorp/pebble/nav/lib/NotificationHandler;-&gt;a:Ljava/lang/String;\n</code></pre>\n<pre><code>.line 259\n    :try_start_1\n    invoke-virtual {p2}, Landroid/content/Context;-&gt;getResources()Landroid/content/res/Resources;\n\n    move-result-object v4\n\n    invoke-virtual {v1}, Landroid/view/View;-&gt;getId()I\n\n    move-result v5\n\n    invoke-virtual {v4, v5}, Landroid/content/res/Resources;-&gt;getResourceEntryName(I)Ljava/lang/String;\n    :try_end_1\n    .catch Ljava/lang/Exception; {:try_start_1 .. :try_end_1} :catch_0\n\n    move-result-object v0\n\n    move-object v4, v0\n</code></pre>\n<pre><code>.line 333\n    check-cast v1, Landroid/view/ViewGroup;\n\n    invoke-direct {p0, p1, p2, v1}, Lcom/batescorp/pebble/nav/lib/NotificationHandler;-&gt;a(Landroid/content/Context;Landroid/content/Context;Landroid/view/ViewGroup;)Ljava/lang/String;\n\n    goto/16 :goto_1\n</code></pre>\n"},{"tags":["java","multithreading","concurrency","synchronize","reentrantlock"],"comments":[{"owner":{"account_id":2784842,"reputation":67281,"user_id":2396539,"accept_rate":78,"display_name":"Aniket Thakur"},"score":4,"creation_date":1465237050,"post_id":11821801,"comment_id":62806822,"body_markdown":"BTW all java intrinsic locks are reentrant by nature.","body":"BTW all java intrinsic locks are reentrant by nature."},{"owner":{"account_id":2784842,"reputation":67281,"user_id":2396539,"accept_rate":78,"display_name":"Aniket Thakur"},"score":0,"creation_date":1473867405,"post_id":11821801,"comment_id":66306406,"body_markdown":"@pongapundit so `synchronized(this){synchronized(this){//some code}}` will not cause dead lock. For intrinsic lock if they obtain monitor on a resource and if they want it again they can get it without a dead lock.","body":"@pongapundit so <code>synchronized(this){synchronized(this){&#47;&#47;some code}}</code> will not cause dead lock. For intrinsic lock if they obtain monitor on a resource and if they want it again they can get it without a dead lock."},{"owner":{"account_id":17121470,"reputation":381,"user_id":12389586,"display_name":"trilocho"},"score":0,"creation_date":1633362254,"post_id":11821801,"comment_id":122733765,"body_markdown":"object.lock;......;object.unlock equals synchronized(this.class) it is at class-level lock not object-level","body":"object.lock;......;object.unlock equals synchronized(this.class) it is at class-level lock not object-level"}],"answers":[{"comments":[{"owner":{"account_id":1663401,"reputation":1536,"user_id":1531271,"display_name":"sushicutta"},"score":3,"creation_date":1555576736,"post_id":11821823,"comment_id":98161324,"body_markdown":"to prevent potential dead-locks because somebody else not knowingly might try to lock against your object somewhere else in the progame use a private Object instance as synchronization Monitor like this:\n\n`public class MyLock {\n    private final Object protectedLongLockingMonitor = new Object();\n    private long protectedLong = 0L;\n    public void incrementProtectedLong() {\n        synchronized(protectedLongLockingMonitor) {\n            protectedLong++;\n        }\n    }\n}`","body":"to prevent potential dead-locks because somebody else not knowingly might try to lock against your object somewhere else in the progame use a private Object instance as synchronization Monitor like this:  <code>public class MyLock {     private final Object protectedLongLockingMonitor = new Object();     private long protectedLong = 0L;     public void incrementProtectedLong() {         synchronized(protectedLongLockingMonitor) {             protectedLong++;         }     } }</code>"}],"tags":[],"owner":{"account_id":24725,"reputation":54596,"user_id":63074,"accept_rate":55,"display_name":"Mike Dinescu"},"comment_count":1,"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1557192332,"creation_date":1344219055,"answer_id":11821823,"question_id":11821801,"body_markdown":"[`ReentrantReadWriteLock`][1] is a specialized lock whereas `synchronized(this)` is a general purpose lock. They are similar but not quite the same.\r\n\r\nYou are right in that you could use `synchronized(this)` instead of `ReentrantReadWriteLock` but the opposite is not always true.\r\n\r\nIf you&#39;d like to better understand what makes `ReentrantReadWriteLock` special look up some information about producer-consumer thread synchronization.\r\n\r\nIn general you can remember that whole-method synchronization and general purpose synchronization (using the `synchronized` keyword) can be used in most applications without thinking *too much* about the semantics of the synchronization but if you need to squeeze performance out of your code you may need to explore other more fine-grained, or special-purpose synchronization mechanisms.\r\n\r\nBy the way, using `synchronized(this)` - and in general locking using a public class instance - can be problematic because it opens up your code to potential dead-locks because somebody else not knowingly might try to lock against your object somewhere else in the program.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/9/docs/api/java/util/concurrent/locks/ReentrantReadWriteLock.html","title":"Why use a ReentrantLock if one can use synchronized(this)?","body":"<p><a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/concurrent/locks/ReentrantReadWriteLock.html\" rel=\"nofollow noreferrer\"><code>ReentrantReadWriteLock</code></a> is a specialized lock whereas <code>synchronized(this)</code> is a general purpose lock. They are similar but not quite the same.</p>\n\n<p>You are right in that you could use <code>synchronized(this)</code> instead of <code>ReentrantReadWriteLock</code> but the opposite is not always true.</p>\n\n<p>If you'd like to better understand what makes <code>ReentrantReadWriteLock</code> special look up some information about producer-consumer thread synchronization.</p>\n\n<p>In general you can remember that whole-method synchronization and general purpose synchronization (using the <code>synchronized</code> keyword) can be used in most applications without thinking <em>too much</em> about the semantics of the synchronization but if you need to squeeze performance out of your code you may need to explore other more fine-grained, or special-purpose synchronization mechanisms.</p>\n\n<p>By the way, using <code>synchronized(this)</code> - and in general locking using a public class instance - can be problematic because it opens up your code to potential dead-locks because somebody else not knowingly might try to lock against your object somewhere else in the program.</p>\n"},{"comments":[{"owner":{"account_id":95764,"reputation":12019,"user_id":260633,"accept_rate":100,"display_name":"Dev"},"score":28,"creation_date":1380573713,"post_id":11821900,"comment_id":28245369,"body_markdown":"The &#39;known to be more scalable&#39; link to lycog.com should be removed. In the reentrant lock test, a new lock is created each time, thus there is no exclusive locking and the resulting data is invalid. Also, the IBM link offers no source code for the underlying benchmark so its impossible to characterize whether the test was even conducted correctly. Personally, I&#39;d just remove the whole line about scalability, as the entire claim is essentially unsupported.","body":"The &#39;known to be more scalable&#39; link to lycog.com should be removed. In the reentrant lock test, a new lock is created each time, thus there is no exclusive locking and the resulting data is invalid. Also, the IBM link offers no source code for the underlying benchmark so its impossible to characterize whether the test was even conducted correctly. Personally, I&#39;d just remove the whole line about scalability, as the entire claim is essentially unsupported."},{"owner":{"account_id":290123,"reputation":29330,"user_id":591495,"display_name":"obataku"},"score":3,"creation_date":1380579541,"post_id":11821900,"comment_id":28247867,"body_markdown":"I modified the post in light of your response.","body":"I modified the post in light of your response."},{"owner":{"account_id":1861044,"reputation":1917,"user_id":1901896,"display_name":"Akash5288"},"score":1,"creation_date":1393481341,"post_id":11821900,"comment_id":33451032,"body_markdown":"We can achieve timed locking using wait() also, so can&#39;t we apply ReentrantLock functionality in it?","body":"We can achieve timed locking using wait() also, so can&#39;t we apply ReentrantLock functionality in it?"},{"owner":{"account_id":4509047,"reputation":3905,"user_id":3665698,"display_name":"mcoolive"},"score":8,"creation_date":1416926893,"post_id":11821900,"comment_id":42758471,"body_markdown":"If the performance is a high concern for you, don&#39;t forget to look for a way where you need NO synchronization at all.","body":"If the performance is a high concern for you, don&#39;t forget to look for a way where you need NO synchronization at all."},{"owner":{"account_id":1810034,"reputation":1794,"user_id":1646298,"accept_rate":82,"display_name":"ZZ 5"},"score":0,"creation_date":1452514346,"post_id":11821900,"comment_id":57188129,"body_markdown":"Worth mentioning about locking vs synchronization: http://mechanical-sympathy.blogspot.com/2011/11/java-lock-implementations.html","body":"Worth mentioning about locking vs synchronization: <a href=\"http://mechanical-sympathy.blogspot.com/2011/11/java-lock-implementations.html\" rel=\"nofollow noreferrer\">mechanical-sympathy.blogspot.com/2011/11/&hellip;</a>"},{"owner":{"account_id":85850,"reputation":8741,"user_id":239101,"accept_rate":57,"display_name":"David Soroko"},"score":0,"creation_date":1455802709,"post_id":11821900,"comment_id":58659453,"body_markdown":"Regarding benchmarking `ReentrantLock` vs `synchronized`, see here: http://david-soroko.blogspot.co.uk/2016/02/synchronized-vs-reentrantlock.html.","body":"Regarding benchmarking <code>ReentrantLock</code> vs <code>synchronized</code>, see here: <a href=\"http://david-soroko.blogspot.co.uk/2016/02/synchronized-vs-reentrantlock.html\" rel=\"nofollow noreferrer\">david-soroko.blogspot.co.uk/2016/02/&hellip;</a>."},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1463553375,"post_id":11821900,"comment_id":62107790,"body_markdown":"More generally, `Lock` objects can be implemented (or overridden) with custom logic, e.g. read/write, distributed locking etc.","body":"More generally, <code>Lock</code> objects can be implemented (or overridden) with custom logic, e.g. read/write, distributed locking etc."},{"owner":{"account_id":386444,"reputation":1894,"user_id":744207,"accept_rate":82,"display_name":"tObi"},"score":4,"creation_date":1485213701,"post_id":11821900,"comment_id":70822989,"body_markdown":"The performance thing doesn&#39;t make sense to me at all. If reantrant lock would perform better then why wouldn&#39;t synchronzied not just be implemented the same way a reantrant lock internatlly?","body":"The performance thing doesn&#39;t make sense to me at all. If reantrant lock would perform better then why wouldn&#39;t synchronzied not just be implemented the same way a reantrant lock internatlly?"},{"owner":{"account_id":3281355,"reputation":1461,"user_id":2761895,"accept_rate":0,"display_name":"user2761895"},"score":0,"creation_date":1500395808,"post_id":11821900,"comment_id":77313105,"body_markdown":"I&#39;m confused with the sentence, &quot;In the reentrant lock test, a new lock is created each time, thus there is no exclusive locking and the resulting data is invalid&quot;. If the resulting data is invalid, why do we use ReentrantLock? The reason to use ReentrantLock or synchronized is having valid data which is shared by many threads. Can someone clarify this? Maybe I misunderstand something.","body":"I&#39;m confused with the sentence, &quot;In the reentrant lock test, a new lock is created each time, thus there is no exclusive locking and the resulting data is invalid&quot;. If the resulting data is invalid, why do we use ReentrantLock? The reason to use ReentrantLock or synchronized is having valid data which is shared by many threads. Can someone clarify this? Maybe I misunderstand something."},{"owner":{"account_id":290123,"reputation":29330,"user_id":591495,"display_name":"obataku"},"score":2,"creation_date":1500784397,"post_id":11821900,"comment_id":77486494,"body_markdown":"@user2761895 the `ReentrantLockPseudoRandom` code in the Lycog link is using brand new, uncontended locks every invocation of `setSeed` and `next`","body":"@user2761895 the <code>ReentrantLockPseudoRandom</code> code in the Lycog link is using brand new, uncontended locks every invocation of <code>setSeed</code> and <code>next</code>"},{"owner":{"account_id":8689428,"reputation":273,"user_id":6502722,"accept_rate":75,"display_name":"legend"},"score":0,"creation_date":1536415512,"post_id":11821900,"comment_id":91420640,"body_markdown":"Can we write our own Lock implementation by implementing it and providing definition to all its method","body":"Can we write our own Lock implementation by implementing it and providing definition to all its method"}],"tags":[],"owner":{"account_id":290123,"reputation":29330,"user_id":591495,"display_name":"obataku"},"comment_count":11,"down_vote_count":0,"up_vote_count":557,"is_accepted":true,"score":557,"last_activity_date":1593290613,"creation_date":1344220188,"answer_id":11821900,"question_id":11821801,"body_markdown":"A [ReentrantLock][1] is _unstructured_, unlike `synchronized` constructs -- i.e.  you don&#39;t need to use a block structure for locking and can even hold a lock across methods. An example:\r\n\r\n    private ReentrantLock lock;\r\n\r\n    public void foo() {\r\n      ...\r\n      lock.lock();\r\n      ...\r\n    }\r\n\r\n    public void bar() {\r\n      ...\r\n      lock.unlock();\r\n      ...\r\n    }\r\n\r\nSuch flow is impossible to represent via a single monitor in a `synchronized` construct.\r\n___\r\nAside from that, `ReentrantLock` supports [lock polling](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/ReentrantLock.html#tryLock()) and [interruptible lock waits that support time-out](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/ReentrantLock.html#tryLock(long,%20java.util.concurrent.TimeUnit)). `ReentrantLock` also has support for [configurable _fairness_ policy](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/ReentrantLock.html#ReentrantLock(boolean)), allowing more flexible thread scheduling.\r\n\r\n&gt;The constructor for this class accepts an optional _fairness_ parameter. When set `true`, under contention, locks favor granting access to the longest-waiting thread. Otherwise this lock does not guarantee any particular access order. Programs using fair locks accessed by many threads may display lower overall throughput (i.e., are slower; often much slower) than those using the default setting, but have smaller variances in times to obtain locks and guarantee lack of starvation. Note however, that fairness of locks does not guarantee fairness of thread scheduling. Thus, one of many threads using a fair lock may obtain it multiple times in succession while other active threads are not progressing and not currently holding the lock. Also note that the untimed `tryLock` method does not honor the fairness setting. It will succeed if the lock is available even if other threads are waiting.\r\n\r\n___\r\n`ReentrantLock` **may** also be [__more scalable__](http://lycog.com/concurency/performance-reentrantlock-synchronized/), performing much better under higher contention. You can read more about this [here](http://www.ibm.com/developerworks/java/library/j-jtp10264/).\r\n\r\nThis claim has been contested, however; see the following comment:\r\n&gt;In the reentrant lock test, a new lock is created each time, thus there is no exclusive locking and the resulting data is invalid. Also, the IBM link offers no source code for the underlying benchmark so its impossible to characterize whether the test was even conducted correctly. \r\n\r\n___\r\nWhen should you use `ReentrantLock`s? According to that developerWorks article...\r\n&gt;The answer is pretty simple -- use it when you actually need something it provides that `synchronized` doesn&#39;t, like timed lock waits, interruptible lock waits, non-block-structured locks, multiple condition variables, or lock polling. `ReentrantLock` also has scalability benefits, and you should use it if you actually have a situation that exhibits high contention, but remember that the vast majority of `synchronized` blocks hardly ever exhibit any contention, let alone high contention. I would advise developing with synchronization until synchronization has proven to be inadequate, rather than simply assuming &quot;the performance will be better&quot; if you use `ReentrantLock`. Remember, these are advanced tools for advanced users. (And truly advanced users tend to prefer the simplest tools they can find until they&#39;re convinced the simple tools are inadequate.) As always, make it right first, and then worry about whether or not you have to make it faster.\r\n\r\n___\r\n\r\nOne final aspect that&#39;s gonna become more relevant in the near future has to do with [Java 15 and Project Loom][2]. In the (new) world of virtual threads, the underlying scheduler would be able to work much better with `ReentrantLock` than it&#39;s able to do with `synchronized`, that&#39;s true at least in the initial Java 15 release but may be optimized later. \r\n\r\n&gt; In the current Loom implementation, a virtual thread can be pinned in two situations: when there is a native frame on the stack — when Java code calls into native code (JNI) that then calls back into Java — and when inside a `synchronized` block or method. In those cases, blocking the virtual thread will block the physical thread that carries it. Once the native call completes or the monitor released (the `synchronized` block/method is exited) the thread is unpinned.\r\n\r\n&gt; If you have a common I/O operation guarded by a `synchronized`, replace the monitor with a `ReentrantLock` to let your application benefit fully from Loom’s scalability boost even before we fix pinning by monitors (or, better yet, use the higher-performance `StampedLock` if you can).\r\n\r\n  [1]: http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/locks/ReentrantLock.html\r\n  [2]:\r\nhttp://cr.openjdk.java.net/~rpressler/loom/loom/sol1_part1.html#pinning","title":"Why use a ReentrantLock if one can use synchronized(this)?","body":"<p>A <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/locks/ReentrantLock.html\" rel=\"noreferrer\">ReentrantLock</a> is <em>unstructured</em>, unlike <code>synchronized</code> constructs -- i.e.  you don't need to use a block structure for locking and can even hold a lock across methods. An example:</p>\n<pre><code>private ReentrantLock lock;\n\npublic void foo() {\n  ...\n  lock.lock();\n  ...\n}\n\npublic void bar() {\n  ...\n  lock.unlock();\n  ...\n}\n</code></pre>\n<p>Such flow is impossible to represent via a single monitor in a <code>synchronized</code> construct.</p>\n<hr />\n<p>Aside from that, <code>ReentrantLock</code> supports <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/ReentrantLock.html#tryLock()\" rel=\"noreferrer\">lock polling</a> and <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/ReentrantLock.html#tryLock(long,%20java.util.concurrent.TimeUnit)\" rel=\"noreferrer\">interruptible lock waits that support time-out</a>. <code>ReentrantLock</code> also has support for <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/ReentrantLock.html#ReentrantLock(boolean)\" rel=\"noreferrer\">configurable <em>fairness</em> policy</a>, allowing more flexible thread scheduling.</p>\n<blockquote>\n<p>The constructor for this class accepts an optional <em>fairness</em> parameter. When set <code>true</code>, under contention, locks favor granting access to the longest-waiting thread. Otherwise this lock does not guarantee any particular access order. Programs using fair locks accessed by many threads may display lower overall throughput (i.e., are slower; often much slower) than those using the default setting, but have smaller variances in times to obtain locks and guarantee lack of starvation. Note however, that fairness of locks does not guarantee fairness of thread scheduling. Thus, one of many threads using a fair lock may obtain it multiple times in succession while other active threads are not progressing and not currently holding the lock. Also note that the untimed <code>tryLock</code> method does not honor the fairness setting. It will succeed if the lock is available even if other threads are waiting.</p>\n</blockquote>\n<hr />\n<p><code>ReentrantLock</code> <strong>may</strong> also be <a href=\"http://lycog.com/concurency/performance-reentrantlock-synchronized/\" rel=\"noreferrer\"><strong>more scalable</strong></a>, performing much better under higher contention. You can read more about this <a href=\"http://www.ibm.com/developerworks/java/library/j-jtp10264/\" rel=\"noreferrer\">here</a>.</p>\n<p>This claim has been contested, however; see the following comment:</p>\n<blockquote>\n<p>In the reentrant lock test, a new lock is created each time, thus there is no exclusive locking and the resulting data is invalid. Also, the IBM link offers no source code for the underlying benchmark so its impossible to characterize whether the test was even conducted correctly.</p>\n</blockquote>\n<hr />\n<p>When should you use <code>ReentrantLock</code>s? According to that developerWorks article...</p>\n<blockquote>\n<p>The answer is pretty simple -- use it when you actually need something it provides that <code>synchronized</code> doesn't, like timed lock waits, interruptible lock waits, non-block-structured locks, multiple condition variables, or lock polling. <code>ReentrantLock</code> also has scalability benefits, and you should use it if you actually have a situation that exhibits high contention, but remember that the vast majority of <code>synchronized</code> blocks hardly ever exhibit any contention, let alone high contention. I would advise developing with synchronization until synchronization has proven to be inadequate, rather than simply assuming &quot;the performance will be better&quot; if you use <code>ReentrantLock</code>. Remember, these are advanced tools for advanced users. (And truly advanced users tend to prefer the simplest tools they can find until they're convinced the simple tools are inadequate.) As always, make it right first, and then worry about whether or not you have to make it faster.</p>\n</blockquote>\n<hr />\n<p>One final aspect that's gonna become more relevant in the near future has to do with <a href=\"http://cr.openjdk.java.net/%7Erpressler/loom/loom/sol1_part1.html#pinning\" rel=\"noreferrer\">Java 15 and Project Loom</a>. In the (new) world of virtual threads, the underlying scheduler would be able to work much better with <code>ReentrantLock</code> than it's able to do with <code>synchronized</code>, that's true at least in the initial Java 15 release but may be optimized later.</p>\n<blockquote>\n<p>In the current Loom implementation, a virtual thread can be pinned in two situations: when there is a native frame on the stack — when Java code calls into native code (JNI) that then calls back into Java — and when inside a <code>synchronized</code> block or method. In those cases, blocking the virtual thread will block the physical thread that carries it. Once the native call completes or the monitor released (the <code>synchronized</code> block/method is exited) the thread is unpinned.</p>\n</blockquote>\n<blockquote>\n<p>If you have a common I/O operation guarded by a <code>synchronized</code>, replace the monitor with a <code>ReentrantLock</code> to let your application benefit fully from Loom’s scalability boost even before we fix pinning by monitors (or, better yet, use the higher-performance <code>StampedLock</code> if you can).</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":6453072,"reputation":37996,"user_id":4999394,"accept_rate":98,"display_name":"Ravindra babu"},"comment_count":0,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1681112681,"creation_date":1461522547,"answer_id":36827191,"question_id":11821801,"body_markdown":"\r\nA simple example using `ReentrantLock`\r\n\r\n    import java.util.concurrent.locks.ReentrantLock;\r\n\r\n    class ReentrantLockDemo {\r\n\t    private final ReentrantLock lock = new ReentrantLock();\r\n\r\n\t    public void safeMethod1() {\r\n\t\t    try {\r\n\t\t\t    lock.lock();\r\n\t\t\t    /* your business logic goes here */\r\n\r\n\t\t    } finally {\r\n\t\t\t    lock.unlock();\r\n\t\t    }\r\n\t     }\r\n    }\r\n\r\nFrom oracle documentation page about [ReentrantLock][1]:\r\n\r\n&gt; A reentrant mutual exclusion Lock with the same basic behaviour and semantics as the implicit monitor lock accessed using synchronized methods and statements, but with extended capabilities.\r\n\r\n&gt;The constructor for this class accepts an optional *fairness* parameter. When set true, under contention,  *locks favor granting access to the longest-waiting thread*. Otherwise this lock does not guarantee any particular access order.\r\n\r\n*ReentrantLock* key APIs, which are better over **synchronized**\r\n\r\n1. `lockInterruptibly()` : Acquires the lock unless the current thread is interrupted.\r\n2. \t`tryLock()` :  Acquires the lock only if it is not held by another thread at the time of invocation\r\n3.\t`tryLock(long timeout, TimeUnit unit)`\r\nAcquires the lock if it is not held by another thread within the given waiting time and the current thread has not been interrupted. This API avoid thread starvation, which is a drawback with `synchronized`\r\n4. `public ReentrantLock(boolean fair)` : ReentrantLock with the fairness policy.\r\n\r\n\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/locks/ReentrantLock.html\r\n ","title":"Why use a ReentrantLock if one can use synchronized(this)?","body":"<p>A simple example using <code>ReentrantLock</code></p>\n<pre><code>import java.util.concurrent.locks.ReentrantLock;\n\nclass ReentrantLockDemo {\n    private final ReentrantLock lock = new ReentrantLock();\n\n    public void safeMethod1() {\n        try {\n            lock.lock();\n            /* your business logic goes here */\n\n        } finally {\n            lock.unlock();\n        }\n     }\n}\n</code></pre>\n<p>From oracle documentation page about <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/locks/ReentrantLock.html\" rel=\"nofollow noreferrer\">ReentrantLock</a>:</p>\n<blockquote>\n<p>A reentrant mutual exclusion Lock with the same basic behaviour and semantics as the implicit monitor lock accessed using synchronized methods and statements, but with extended capabilities.</p>\n</blockquote>\n<blockquote>\n<p>The constructor for this class accepts an optional <em>fairness</em> parameter. When set true, under contention,  <em>locks favor granting access to the longest-waiting thread</em>. Otherwise this lock does not guarantee any particular access order.</p>\n</blockquote>\n<p><em>ReentrantLock</em> key APIs, which are better over <strong>synchronized</strong></p>\n<ol>\n<li><code>lockInterruptibly()</code> : Acquires the lock unless the current thread is interrupted.</li>\n<li><code>tryLock()</code> :  Acquires the lock only if it is not held by another thread at the time of invocation</li>\n<li><code>tryLock(long timeout, TimeUnit unit)</code>\nAcquires the lock if it is not held by another thread within the given waiting time and the current thread has not been interrupted. This API avoid thread starvation, which is a drawback with <code>synchronized</code></li>\n<li><code>public ReentrantLock(boolean fair)</code> : ReentrantLock with the fairness policy.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":444211,"reputation":61229,"user_id":835883,"accept_rate":81,"display_name":"j2emanue"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1466276355,"creation_date":1466276355,"answer_id":37900587,"question_id":11821801,"body_markdown":"You can use reentrant locks with a fairness policy  or timeout to avoid thread starvation.  You can apply a  thread fairness policy.   it will help avoid a thread waiting forever to get to your resources. \r\n\r\n    private final ReentrantLock lock = new ReentrantLock(true);\r\n    //the param true turns on the fairness policy. \r\n\r\nThe &quot;fairness policy&quot; picks the next runnable thread to execute. It is based on priority, time since last run, blah blah\r\n\r\nalso,\r\nSynchronize can block indefinitely if it cant escape the block. Reentrantlock can have timeout set.  ","title":"Why use a ReentrantLock if one can use synchronized(this)?","body":"<p>You can use reentrant locks with a fairness policy  or timeout to avoid thread starvation.  You can apply a  thread fairness policy.   it will help avoid a thread waiting forever to get to your resources. </p>\n\n<pre><code>private final ReentrantLock lock = new ReentrantLock(true);\n//the param true turns on the fairness policy. \n</code></pre>\n\n<p>The \"fairness policy\" picks the next runnable thread to execute. It is based on priority, time since last run, blah blah</p>\n\n<p>also,\nSynchronize can block indefinitely if it cant escape the block. Reentrantlock can have timeout set.  </p>\n"},{"tags":[],"owner":{"account_id":5236368,"reputation":1089,"user_id":4184808,"accept_rate":0,"display_name":"Sumit Kapoor"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1538829281,"creation_date":1538829281,"answer_id":52679146,"question_id":11821801,"body_markdown":"**Synchronized locks** does not offer any mechanism of waiting queue in which after the execution of one thread any thread running in parallel can acquire the lock. Due to which the thread which is there in the system and running for a longer period of time never gets chance to access the shared resource thus leading to starvation.\r\n\r\n**Reentrant locks** are very much flexible and has a fairness policy in which if a thread is waiting for a longer time and after the completion of the currently executing thread we can make sure that the longer waiting thread gets the chance of accessing the shared resource hereby decreasing the throughput of the system and making it more time consuming. \r\n\r\n","title":"Why use a ReentrantLock if one can use synchronized(this)?","body":"<p><strong>Synchronized locks</strong> does not offer any mechanism of waiting queue in which after the execution of one thread any thread running in parallel can acquire the lock. Due to which the thread which is there in the system and running for a longer period of time never gets chance to access the shared resource thus leading to starvation.</p>\n\n<p><strong>Reentrant locks</strong> are very much flexible and has a fairness policy in which if a thread is waiting for a longer time and after the completion of the currently executing thread we can make sure that the longer waiting thread gets the chance of accessing the shared resource hereby decreasing the throughput of the system and making it more time consuming. </p>\n"},{"comments":[{"owner":{"account_id":723954,"reputation":1847,"user_id":666583,"display_name":"AndrewF"},"score":3,"creation_date":1597447184,"post_id":53295187,"comment_id":112145600,"body_markdown":"A `synchronized` block has exactly the same reentrance behavior (reference counting). That is not one of the advantages/features of `ReentrantLock`.","body":"A <code>synchronized</code> block has exactly the same reentrance behavior (reference counting). That is not one of the advantages/features of <code>ReentrantLock</code>."}],"tags":[],"owner":{"account_id":7422340,"reputation":2446,"user_id":5646176,"accept_rate":50,"display_name":"RonTLV"},"comment_count":1,"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1542181179,"creation_date":1542181179,"answer_id":53295187,"question_id":11821801,"body_markdown":"Lets assume this code is running in a thread:\r\n\r\n    private static ReentrantLock lock = new ReentrantLock();\r\n    \r\n    void accessResource() {\r\n        lock.lock();\r\n        if( checkSomeCondition() ) {\r\n            accessResource();\r\n        }\r\n        lock.unlock();\r\n    }\r\n\r\nBecause the thread owns the lock it will allow multiple calls to lock(), so it re-enter the lock. This can be achieved with a reference count so it doesn&#39;t has to acquire lock again.","title":"Why use a ReentrantLock if one can use synchronized(this)?","body":"<p>Lets assume this code is running in a thread:</p>\n\n<pre><code>private static ReentrantLock lock = new ReentrantLock();\n\nvoid accessResource() {\n    lock.lock();\n    if( checkSomeCondition() ) {\n        accessResource();\n    }\n    lock.unlock();\n}\n</code></pre>\n\n<p>Because the thread owns the lock it will allow multiple calls to lock(), so it re-enter the lock. This can be achieved with a reference count so it doesn't has to acquire lock again.</p>\n"},{"tags":[],"owner":{"account_id":2700381,"reputation":1167,"user_id":2331225,"accept_rate":75,"display_name":"Dhaval D"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1558502105,"creation_date":1558502105,"answer_id":56249714,"question_id":11821801,"body_markdown":"One thing to keep in mind is : &lt;br/&gt;&lt;br/&gt;\r\nThe name &#39;*ReentrantLock*&#39; gives out a wrong message about other locking mechanism that they are not re-entrant. **This is not true.** Lock acquired via &#39;synchronized&#39; is also re-entrant in Java. \r\n\r\nKey difference is that &#39;synchronized&#39; uses intrinsic lock ( one that every Object has ) while Lock API doesn&#39;t.","title":"Why use a ReentrantLock if one can use synchronized(this)?","body":"<p>One thing to keep in mind is : <br/><br/>\nThe name '<em>ReentrantLock</em>' gives out a wrong message about other locking mechanism that they are not re-entrant. <strong>This is not true.</strong> Lock acquired via 'synchronized' is also re-entrant in Java. </p>\n\n<p>Key difference is that 'synchronized' uses intrinsic lock ( one that every Object has ) while Lock API doesn't.</p>\n"},{"tags":[],"owner":{"account_id":1630934,"reputation":3623,"user_id":1505487,"accept_rate":40,"display_name":"Solubris"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1586998937,"creation_date":1586998937,"answer_id":61241052,"question_id":11821801,"body_markdown":"I think the wait/notify/notifyAll methods don&#39;t belong on the Object class as it pollutes all objects with methods that are rarely used.  They make much more sense on a dedicated Lock class.  So from this point of view, perhaps it&#39;s better to use a tool that is explicitly designed for the job at hand - ie ReentrantLock.\r\n","title":"Why use a ReentrantLock if one can use synchronized(this)?","body":"<p>I think the wait/notify/notifyAll methods don't belong on the Object class as it pollutes all objects with methods that are rarely used.  They make much more sense on a dedicated Lock class.  So from this point of view, perhaps it's better to use a tool that is explicitly designed for the job at hand - ie ReentrantLock.</p>\n"}],"owner":{"account_id":357639,"reputation":10547,"user_id":992600,"accept_rate":74,"display_name":"adhg"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":189394,"favorite_count":0,"down_vote_count":1,"up_vote_count":385,"accepted_answer_id":11821900,"answer_count":8,"score":384,"last_activity_date":1681112681,"creation_date":1344218919,"question_id":11821801,"body_markdown":"I&#39;m trying to understand what makes the lock in concurrency so important if one can use `synchronized (this)`. In the dummy code below, I can do either:\r\n\r\n 1. synchronized the entire method or synchronize the vulnerable area (`synchronized(this){...}`)\r\n 2. OR lock the vulnerable code area with a ReentrantLock.\r\n\r\nCode:\r\n\r\n        private final ReentrantLock lock = new ReentrantLock(); \r\n        private static List&lt;Integer&gt; ints;\r\n\t\r\n        public Integer getResult(String name) { \r\n            .\r\n            .\r\n            .\r\n            lock.lock();\r\n            try {\r\n                if (ints.size()==3) {\r\n                    ints=null;\r\n                    return -9;\r\n                }\t\r\n\t\t\t\r\n                for (int x=0; x&lt;ints.size(); x++) {\r\n                    System.out.println(&quot;[&quot;+name+&quot;] &quot;+x+&quot;/&quot;+ints.size()+&quot;. values &gt;&gt;&gt;&gt;&quot;+ints.get(x));\r\n                }\r\n\t\t\t\r\n            } finally {\r\n                lock.unlock();\r\n            } \r\n            return random;\r\n    }\r\n\r\n ","title":"Why use a ReentrantLock if one can use synchronized(this)?","body":"<p>I'm trying to understand what makes the lock in concurrency so important if one can use <code>synchronized (this)</code>. In the dummy code below, I can do either:</p>\n\n<ol>\n<li>synchronized the entire method or synchronize the vulnerable area (<code>synchronized(this){...}</code>)</li>\n<li>OR lock the vulnerable code area with a ReentrantLock.</li>\n</ol>\n\n<p>Code:</p>\n\n<pre><code>    private final ReentrantLock lock = new ReentrantLock(); \n    private static List&lt;Integer&gt; ints;\n\n    public Integer getResult(String name) { \n        .\n        .\n        .\n        lock.lock();\n        try {\n            if (ints.size()==3) {\n                ints=null;\n                return -9;\n            }   \n\n            for (int x=0; x&lt;ints.size(); x++) {\n                System.out.println(\"[\"+name+\"] \"+x+\"/\"+ints.size()+\". values &gt;&gt;&gt;&gt;\"+ints.get(x));\n            }\n\n        } finally {\n            lock.unlock();\n        } \n        return random;\n}\n</code></pre>\n"},{"tags":["java","csv","apache-commons-csv"],"comments":[{"owner":{"account_id":957028,"reputation":15143,"user_id":982149,"accept_rate":100,"display_name":"Fildor"},"score":1,"creation_date":1503578400,"post_id":45861824,"comment_id":78681865,"body_markdown":"Have you tried reading until newLine before giving the fileReader to the parser?","body":"Have you tried reading until newLine before giving the fileReader to the parser?"}],"answers":[{"comments":[{"owner":{"account_id":3658649,"reputation":1521,"user_id":3049036,"accept_rate":57,"display_name":"Suresh"},"score":0,"creation_date":1532930419,"post_id":45861940,"comment_id":90140696,"body_markdown":"In case of my `,` seperated csv file, I need to change `CSVFormat.DEFAULT.withDelimiter(&#39;;&#39;);` to `CSVFormat.DEFAULT.withDelimiter(&#39;,&#39;);`. Is this correct?","body":"In case of my <code>,</code> seperated csv file, I need to change <code>CSVFormat.DEFAULT.withDelimiter(&#39;;&#39;);</code> to <code>CSVFormat.DEFAULT.withDelimiter(&#39;,&#39;);</code>. Is this correct?"},{"owner":{"account_id":20375424,"reputation":517,"user_id":14946729,"display_name":"grigouille"},"score":0,"creation_date":1681060789,"post_id":45861940,"comment_id":133994796,"body_markdown":"readLine ? What if the first record contains &quot;bla\\r\\nbli&quot;.","body":"readLine ? What if the first record contains &quot;bla\\r\\nbli&quot;."}],"tags":[],"owner":{"account_id":7373320,"reputation":17364,"user_id":5612858,"display_name":"Arnaud"},"comment_count":2,"down_vote_count":0,"up_vote_count":12,"is_accepted":true,"score":12,"last_activity_date":1503578489,"creation_date":1503578489,"answer_id":45861940,"question_id":45861824,"body_markdown":"\r\nYou may want to read the first line, before passing the reader to the `CSVParser` :\r\n\r\n    static void processFile(final File file) {\r\n        FileReader filereader = new FileReader(file);\r\n        BufferedReader bufferedReader = new BufferedReader(filereader);\r\n        bufferedReader.readLine();// try-catch omitted\r\n        final CSVFormat format = CSVFormat.DEFAULT.withDelimiter(&#39;;&#39;);\r\n        CSVParser parser = new CSVParser(bufferedReader, format);\r\n        final List&lt;CSVRecord&gt; records = parser.getRecords();\r\n        //stuff\r\n    }","title":"How can I skip the first line of a csv in Java?","body":"<p>You may want to read the first line, before passing the reader to the <code>CSVParser</code> :</p>\n\n<pre><code>static void processFile(final File file) {\n    FileReader filereader = new FileReader(file);\n    BufferedReader bufferedReader = new BufferedReader(filereader);\n    bufferedReader.readLine();// try-catch omitted\n    final CSVFormat format = CSVFormat.DEFAULT.withDelimiter(';');\n    CSVParser parser = new CSVParser(bufferedReader, format);\n    final List&lt;CSVRecord&gt; records = parser.getRecords();\n    //stuff\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":10422949,"reputation":603,"user_id":7685112,"accept_rate":100,"display_name":"Medusa"},"score":1,"creation_date":1503580624,"post_id":45861956,"comment_id":78683506,"body_markdown":"the problem is the line isn&#39;t empty. But using BufferedReader (which has a readLine method) solved it.","body":"the problem is the line isn&#39;t empty. But using BufferedReader (which has a readLine method) solved it."}],"tags":[],"owner":{"account_id":5644665,"reputation":35951,"user_id":4467208,"accept_rate":51,"display_name":"Murat Karag&#246;z"},"comment_count":1,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1503579154,"creation_date":1503578529,"answer_id":45861956,"question_id":45861824,"body_markdown":"You could consume the first line and then pass it to the CSVParser. Other than that there is a method [#withIgnoreEmptyLines](https://commons.apache.org/proper/commons-csv/apidocs/org/apache/commons/csv/CSVFormat.html#withIgnoreEmptyLines-boolean-) which might solve the issue.","title":"How can I skip the first line of a csv in Java?","body":"<p>You could consume the first line and then pass it to the CSVParser. Other than that there is a method <a href=\"https://commons.apache.org/proper/commons-csv/apidocs/org/apache/commons/csv/CSVFormat.html#withIgnoreEmptyLines-boolean-\" rel=\"nofollow noreferrer\">#withIgnoreEmptyLines</a> which might solve the issue.</p>\n"},{"comments":[{"owner":{"account_id":42251,"reputation":1740,"user_id":123043,"accept_rate":67,"display_name":"keni"},"score":0,"creation_date":1534873372,"post_id":51843471,"comment_id":90858479,"body_markdown":"+1 for withFirstRecordAsHeader(), I use it with CSVParser and it skips the header when you iterate  over the parser.","body":"+1 for withFirstRecordAsHeader(), I use it with CSVParser and it skips the header when you iterate  over the parser."},{"owner":{"account_id":4864939,"reputation":1044,"user_id":3923525,"accept_rate":80,"display_name":"jmm"},"score":4,"creation_date":1574974454,"post_id":51843471,"comment_id":104425488,"body_markdown":"This should be the accepted answer, since it uses the library, instead of an ad-hoc pure Java solution","body":"This should be the accepted answer, since it uses the library, instead of an ad-hoc pure Java solution"},{"owner":{"account_id":8502134,"reputation":115,"user_id":6374770,"display_name":"A MJ"},"score":0,"creation_date":1631002878,"post_id":51843471,"comment_id":122099378,"body_markdown":"This should be the accepted answer. Thanks","body":"This should be the accepted answer. Thanks"},{"owner":{"account_id":55217,"reputation":8498,"user_id":165292,"display_name":"avandeursen"},"score":1,"creation_date":1639241020,"post_id":51843471,"comment_id":124300562,"body_markdown":"I think the original question was about the first *two* lines, where the second contains the header.","body":"I think the original question was about the first <i>two</i> lines, where the second contains the header."},{"owner":{"account_id":10324417,"reputation":350,"user_id":7616297,"display_name":"Maik"},"score":0,"creation_date":1656494959,"post_id":51843471,"comment_id":128584461,"body_markdown":"for me it currently shows withDelimiter as deprecated.","body":"for me it currently shows withDelimiter as deprecated."},{"owner":{"account_id":1901517,"reputation":70,"user_id":1717289,"display_name":"fdm"},"score":1,"creation_date":1660304384,"post_id":51843471,"comment_id":129507102,"body_markdown":"I think the setHeader() method must be call too:\nCSVFormat.DEFAULT.builder()                                                                  \n    .setDelimiter(&#39;;&#39;).setHeader()\n    .setSkipHeaderRecord(true)  // skip header\n    .build();","body":"I think the setHeader() method must be call too: CSVFormat.DEFAULT.builder()                                                                       .setDelimiter(&#39;;&#39;).setHeader()     .setSkipHeaderRecord(true)  // skip header     .build();"},{"owner":{"account_id":20375424,"reputation":517,"user_id":14946729,"display_name":"grigouille"},"score":0,"creation_date":1681111639,"post_id":51843471,"comment_id":133999865,"body_markdown":"setHeader() will read the first record as the headers. The question says the headers are in the second record.","body":"setHeader() will read the first record as the headers. The question says the headers are in the second record."}],"tags":[],"owner":{"account_id":323466,"reputation":14771,"user_id":643500,"display_name":"Sully"},"comment_count":7,"down_vote_count":1,"up_vote_count":32,"is_accepted":false,"score":31,"last_activity_date":1660626544,"creation_date":1534255754,"answer_id":51843471,"question_id":45861824,"body_markdown":"The correct way to skip the first line if it is a header is by using a different `CSVFormat`\r\n\r\n    CSVFormat format = CSVFormat.DEFAULT.withDelimiter(&#39;;&#39;).withFirstRecordAsHeader();\r\n\r\n**Update: June 30 2022**\r\n\r\nFor 1.9+, use\r\n\r\n    CSVFormat.DEFAULT.builder()                                                                  \r\n        .setDelimiter(&#39;;&#39;)\r\n        .setHeader()\r\n        .setSkipHeaderRecord(true)  // skip header\r\n        .build();","title":"How can I skip the first line of a csv in Java?","body":"<p>The correct way to skip the first line if it is a header is by using a different <code>CSVFormat</code></p>\n<pre><code>CSVFormat format = CSVFormat.DEFAULT.withDelimiter(';').withFirstRecordAsHeader();\n</code></pre>\n<p><strong>Update: June 30 2022</strong></p>\n<p>For 1.9+, use</p>\n<pre><code>CSVFormat.DEFAULT.builder()                                                                  \n    .setDelimiter(';')\n    .setHeader()\n    .setSkipHeaderRecord(true)  // skip header\n    .build();\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1129881,"reputation":11551,"user_id":1116230,"display_name":"Nico Haase"},"score":0,"creation_date":1535625125,"post_id":52094514,"comment_id":91139690,"body_markdown":"Can you explain your code? What&#39;s that `csvRecordToPayerCodeMapping` needed for?","body":"Can you explain your code? What&#39;s that <code>csvRecordToPayerCodeMapping</code> needed for?"},{"owner":{"account_id":2043107,"reputation":111,"user_id":1823828,"display_name":"Musab Qamri"},"score":0,"creation_date":1536931218,"post_id":52094514,"comment_id":91612486,"body_markdown":"Sorry that is for internal use, you can skip .map(). Will edit the same","body":"Sorry that is for internal use, you can skip .map(). Will edit the same"}],"tags":[],"owner":{"account_id":2043107,"reputation":111,"user_id":1823828,"display_name":"Musab Qamri"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1536931241,"creation_date":1535624032,"answer_id":52094514,"question_id":45861824,"body_markdown":"You can filter it using Java Streams:\r\n\r\n    parser.getRecords().stream()\r\n         .filter(record -&gt; record.getRecordNumber() != 1) \r\n         .collect(Collectors.toList());\r\n","title":"How can I skip the first line of a csv in Java?","body":"<p>You can filter it using Java Streams:</p>\n\n<pre><code>parser.getRecords().stream()\n     .filter(record -&gt; record.getRecordNumber() != 1) \n     .collect(Collectors.toList());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5649194,"reputation":86,"user_id":4470400,"display_name":"Frank Why"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1563865142,"creation_date":1563865142,"answer_id":57158354,"question_id":45861824,"body_markdown":"You can skip the first record using stream:\r\n\r\n    List&lt;CSVRecord&gt; noHeadersLine = records.stream.skip(1).collect(toList());","title":"How can I skip the first line of a csv in Java?","body":"<p>You can skip the first record using stream:</p>\n\n<pre><code>List&lt;CSVRecord&gt; noHeadersLine = records.stream.skip(1).collect(toList());\n</code></pre>\n"},{"comments":[{"owner":{"account_id":238684,"reputation":22543,"user_id":507738,"accept_rate":71,"display_name":"MC Emperor"},"score":0,"creation_date":1636451455,"post_id":69130644,"comment_id":123554274,"body_markdown":"Or: `CSVFormat.DEFAULT.builder()...`.","body":"Or: <code>CSVFormat.DEFAULT.builder()...</code>."},{"owner":{"account_id":20375424,"reputation":517,"user_id":14946729,"display_name":"grigouille"},"score":0,"creation_date":1681111694,"post_id":69130644,"comment_id":133999874,"body_markdown":"The headers are in the second record.","body":"The headers are in the second record."}],"tags":[],"owner":{"account_id":1974565,"reputation":529,"user_id":1772653,"display_name":"Markus Lenger"},"comment_count":2,"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1631268592,"creation_date":1631268592,"answer_id":69130644,"question_id":45861824,"body_markdown":"In version 1.9.0 of org.apache.commons:commons-csv use:\r\n\r\n    val format = CSVFormat.Builder.create(CSVFormat.DEFAULT)\r\n            .setHeader()\r\n            .setSkipHeaderRecord(true)\r\n            .build()\r\n\r\n    val parser = CSVParser.parse(reader, format)","title":"How can I skip the first line of a csv in Java?","body":"<p>In version 1.9.0 of org.apache.commons:commons-csv use:</p>\n<pre><code>val format = CSVFormat.Builder.create(CSVFormat.DEFAULT)\n        .setHeader()\n        .setSkipHeaderRecord(true)\n        .build()\n\nval parser = CSVParser.parse(reader, format)\n</code></pre>\n"},{"comments":[{"owner":{"account_id":20375424,"reputation":517,"user_id":14946729,"display_name":"grigouille"},"score":0,"creation_date":1681111786,"post_id":71684776,"comment_id":133999885,"body_markdown":"readLine ? What if a column contains CR LF ?","body":"readLine ? What if a column contains CR LF ?"}],"tags":[],"owner":{"account_id":6222965,"reputation":25,"user_id":4842096,"display_name":"Matt Minton"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1648678850,"creation_date":1648678850,"answer_id":71684776,"question_id":45861824,"body_markdown":"I am assuming your file format looks something like:\r\n\r\n    &lt;garbage line here&gt;\r\n    &lt;header data&gt;\r\n    &lt;record data starts here&gt;\r\n\r\nFor version 1.9.0, use, as given above, but with one addition:\r\n\r\n    Reader in = new FileReader(fileName);\r\n    BufferedReader bufferedReader = new BufferedReader(in);\r\n    System.out.println(bufferedReader.readLine());\r\n    CSVFormat format = CSVFormat.Builder.create(CSVFormat.DEFAULT)\r\n                .setHeader()\r\n                .setSkipHeaderRecord(true)\r\n                .build();\r\n    CSVParser parser = CSVParser.parse(bufferedReader, format);\r\n    for (CSVRecord record : parser.getRecords()) {\r\n        &lt;do something&gt;\r\n    }\r\n\r\nIf you don&#39;t skip that first line somehow, you will throw an IllegalArgumentException.\r\n","title":"How can I skip the first line of a csv in Java?","body":"<p>I am assuming your file format looks something like:</p>\n<pre><code>&lt;garbage line here&gt;\n&lt;header data&gt;\n&lt;record data starts here&gt;\n</code></pre>\n<p>For version 1.9.0, use, as given above, but with one addition:</p>\n<pre><code>Reader in = new FileReader(fileName);\nBufferedReader bufferedReader = new BufferedReader(in);\nSystem.out.println(bufferedReader.readLine());\nCSVFormat format = CSVFormat.Builder.create(CSVFormat.DEFAULT)\n            .setHeader()\n            .setSkipHeaderRecord(true)\n            .build();\nCSVParser parser = CSVParser.parse(bufferedReader, format);\nfor (CSVRecord record : parser.getRecords()) {\n    &lt;do something&gt;\n}\n</code></pre>\n<p>If you don't skip that first line somehow, you will throw an IllegalArgumentException.</p>\n"},{"tags":[],"owner":{"account_id":1901517,"reputation":70,"user_id":1717289,"display_name":"fdm"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660304544,"creation_date":1660304544,"answer_id":73333608,"question_id":45861824,"body_markdown":"the .setHeader() method must be call for the .setSkipHeaderRecord(true)  to take effect. \r\n```\r\nCSVFormat.DEFAULT.builder()                                                                  \r\n    .setDelimiter(&#39;;&#39;)\r\n    .setHeader()    \r\n    .setSkipHeaderRecord(true)  // skip header\r\n    .build();\r\n```","title":"How can I skip the first line of a csv in Java?","body":"<p>the .setHeader() method must be call for the .setSkipHeaderRecord(true)  to take effect.</p>\n<pre><code>CSVFormat.DEFAULT.builder()                                                                  \n    .setDelimiter(';')\n    .setHeader()    \n    .setSkipHeaderRecord(true)  // skip header\n    .build();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20375424,"reputation":517,"user_id":14946729,"display_name":"grigouille"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681112598,"creation_date":1681112598,"answer_id":75975216,"question_id":45861824,"body_markdown":"If your first record doesn&#39;t contain CR LF characters, you can use the &quot;readLine&quot; method. Otherwise you have to read twice.\r\n\r\nFirst get the headers :\r\n\r\n    CSVFormat format;\r\n    List&lt;String&gt; headers = null;\r\n    try(Reader reader = getReader()) {\r\n      Iterator&lt;CSVRecord&gt; iter = format.parse(reader).iterator();\r\n      if(iter.hasNext()) iter.next();\r\n      if(iter.hasNext()) {\r\n        headers = iter.next().toList();\r\n      }\r\n    }\r\n\r\nThen read again :\r\n\r\n    try(Reader reader = getReader()) {\r\n      format = format.builder().setHeader(headers.toArray(new String[0])).build();\r\n      Iterator&lt;CSVRecord&gt; iter = format.parse(reader).iterator();\r\n      if(iter.hasNext()) iter.next();\r\n      if(iter.hasNext()) iter.next();\r\n      while(iter.hasNext()) {\r\n        CSVRecord record = iter.next();\r\n        //do stuff\r\n      }\r\n    }\r\n","title":"How can I skip the first line of a csv in Java?","body":"<p>If your first record doesn't contain CR LF characters, you can use the &quot;readLine&quot; method. Otherwise you have to read twice.</p>\n<p>First get the headers :</p>\n<pre><code>CSVFormat format;\nList&lt;String&gt; headers = null;\ntry(Reader reader = getReader()) {\n  Iterator&lt;CSVRecord&gt; iter = format.parse(reader).iterator();\n  if(iter.hasNext()) iter.next();\n  if(iter.hasNext()) {\n    headers = iter.next().toList();\n  }\n}\n</code></pre>\n<p>Then read again :</p>\n<pre><code>try(Reader reader = getReader()) {\n  format = format.builder().setHeader(headers.toArray(new String[0])).build();\n  Iterator&lt;CSVRecord&gt; iter = format.parse(reader).iterator();\n  if(iter.hasNext()) iter.next();\n  if(iter.hasNext()) iter.next();\n  while(iter.hasNext()) {\n    CSVRecord record = iter.next();\n    //do stuff\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":10422949,"reputation":603,"user_id":7685112,"accept_rate":100,"display_name":"Medusa"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":22664,"favorite_count":0,"down_vote_count":0,"up_vote_count":16,"accepted_answer_id":45861940,"answer_count":9,"score":16,"last_activity_date":1681112598,"creation_date":1503578133,"question_id":45861824,"body_markdown":"I want to skip the first line and use the second as header.\r\n\r\nI am using classes from apache commons csv to process a CSV file.\r\n\r\nThe header of the CSV file is in the second row, not the first (which contains coordinates). \r\n\r\nMy code looks like this: \r\n    \r\n    static void processFile(final File file) {\r\n        FileReader filereader = new FileReader(file);\r\n    \tfinal CSVFormat format = CSVFormat.DEFAULT.withDelimiter(&#39;;&#39;);\r\n        CSVParser parser = new CSVParser(filereader, format);\r\n        final List&lt;CSVRecord&gt; records = parser.getRecords();\r\n        //stuff\r\n    }\r\n\r\nI naively thought,\r\n\r\n    CSVFormat format = CSVFormat.DEFAULT.withFirstRecordAsHeader().withDelimiter(;)\r\n\r\nwould solve the problem, as it&#39;s different from withFirstRowAsHeader and I thought it would detect that the first row doesn&#39;t contain any semicolons and is not a record. It doesn&#39;t. I tried to skip the first line (that CSVFormat seems to think is the header) with\r\n\r\n    CSVFormat format = CSVFormat.DEFAULT.withSkipHeaderRecord().withFirstRecordAsHeader().withDelimiter(;);\r\n\r\nbut that also doesn&#39;t work. What can I do?  What&#39;s the difference between withFirstRowAsHeader and withFirstRecordAsHeader?","title":"How can I skip the first line of a csv in Java?","body":"<p>I want to skip the first line and use the second as header.</p>\n\n<p>I am using classes from apache commons csv to process a CSV file.</p>\n\n<p>The header of the CSV file is in the second row, not the first (which contains coordinates). </p>\n\n<p>My code looks like this: </p>\n\n<pre><code>static void processFile(final File file) {\n    FileReader filereader = new FileReader(file);\n    final CSVFormat format = CSVFormat.DEFAULT.withDelimiter(';');\n    CSVParser parser = new CSVParser(filereader, format);\n    final List&lt;CSVRecord&gt; records = parser.getRecords();\n    //stuff\n}\n</code></pre>\n\n<p>I naively thought,</p>\n\n<pre><code>CSVFormat format = CSVFormat.DEFAULT.withFirstRecordAsHeader().withDelimiter(;)\n</code></pre>\n\n<p>would solve the problem, as it's different from withFirstRowAsHeader and I thought it would detect that the first row doesn't contain any semicolons and is not a record. It doesn't. I tried to skip the first line (that CSVFormat seems to think is the header) with</p>\n\n<pre><code>CSVFormat format = CSVFormat.DEFAULT.withSkipHeaderRecord().withFirstRecordAsHeader().withDelimiter(;);\n</code></pre>\n\n<p>but that also doesn't work. What can I do?  What's the difference between withFirstRowAsHeader and withFirstRecordAsHeader?</p>\n"},{"tags":["java","spring","grpc","channel","grpc-java"],"comments":[{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1681117997,"post_id":75975183,"comment_id":134000798,"body_markdown":"Are you trying to set a timeout per request, or per attempt?","body":"Are you trying to set a timeout per request, or per attempt?"},{"owner":{"account_id":8389289,"reputation":723,"user_id":6298537,"display_name":"yashjain12yj"},"score":0,"creation_date":1681118567,"post_id":75975183,"comment_id":134000900,"body_markdown":"@LouisWasserman I want to set timeout per attempt","body":"@LouisWasserman I want to set timeout per attempt"},{"owner":{"account_id":5967476,"reputation":24635,"user_id":4690866,"display_name":"Eric Anderson"},"score":0,"creation_date":1681150130,"post_id":75975183,"comment_id":134006885,"body_markdown":"Per-attempt timeouts are not supported. They might be part of a future effort to add hedging xds support (due to how xds structures hedging, they are related).","body":"Per-attempt timeouts are not supported. They might be part of a future effort to add hedging xds support (due to how xds structures hedging, they are related)."}],"owner":{"account_id":8389289,"reputation":723,"user_id":6298537,"display_name":"yashjain12yj"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":188,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1681112311,"creation_date":1681112311,"question_id":75975183,"body_markdown":"I&#39;m creating a Java GRPC client. Here I&#39;m using a managed channel to create a channel and further passing that channel to create a blocking stub.\r\n\r\n\r\n```\r\nManagedChannelBuilder.forAddress(this.getServiceHost(), this.getServicePort())\r\n    .usePlaintext()\r\n    .keepAliveWithoutCalls(this.isKeepAliveWithoutCall())\r\n    .keepAliveTime(this.getKeepAliveTime(), TimeUnit.MILLISECONDS)\r\n    .idleTimeout(this.getIdleTimeoutInMilliseconds(), TimeUnit.MILLISECONDS)\r\n    .keepAliveTimeout(this.getKeepAliveTimeoutInMilliseconds(), TimeUnit.MILLISECONDS)\r\n    .defaultServiceConfig(this.getRetryConfig())\r\n    .enableRetry()\r\n    .build();\r\n```\r\n\r\nWhile doing retries, if I have given `maxAttempts` as 3, I want to set a timeout for each of the attempts.\r\n\r\nIn which parameter should I set that value?","title":"How to give request timeout per request in Java Grpc","body":"<p>I'm creating a Java GRPC client. Here I'm using a managed channel to create a channel and further passing that channel to create a blocking stub.</p>\n<pre><code>ManagedChannelBuilder.forAddress(this.getServiceHost(), this.getServicePort())\n    .usePlaintext()\n    .keepAliveWithoutCalls(this.isKeepAliveWithoutCall())\n    .keepAliveTime(this.getKeepAliveTime(), TimeUnit.MILLISECONDS)\n    .idleTimeout(this.getIdleTimeoutInMilliseconds(), TimeUnit.MILLISECONDS)\n    .keepAliveTimeout(this.getKeepAliveTimeoutInMilliseconds(), TimeUnit.MILLISECONDS)\n    .defaultServiceConfig(this.getRetryConfig())\n    .enableRetry()\n    .build();\n</code></pre>\n<p>While doing retries, if I have given <code>maxAttempts</code> as 3, I want to set a timeout for each of the attempts.</p>\n<p>In which parameter should I set that value?</p>\n"},{"tags":["java","list","jmeter","beanshell"],"answers":[{"comments":[{"owner":{"account_id":3364245,"reputation":5,"user_id":7373607,"display_name":"ilf"},"score":0,"creation_date":1683251756,"post_id":75974979,"comment_id":134341986,"body_markdown":"Hi, it&#39;s working. Got this as a result `JSR223 PostProcessor: All Car: [283, 284]`.  I slightly modified the syntax with the one suggested by @lucas-nguyen-17 , for the declaration of the list and for loop.","body":"Hi, it&#39;s working. Got this as a result <code>JSR223 PostProcessor: All Car: [283, 284]</code>.  I slightly modified the syntax with the one suggested by @lucas-nguyen-17 , for the declaration of the list and for loop."}],"tags":[],"owner":{"account_id":3460456,"reputation":162758,"user_id":2897748,"display_name":"Dmitri T"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1681110349,"creation_date":1681110349,"answer_id":75974979,"question_id":75969128,"body_markdown":" 1. You&#39;re trying to pass a [String][1] to the [ArrayList.addAll()][2] function, it won&#39;t work as the function expects a [Collection][3].\r\n 2. [Since JMeter 3.1 it&#39;s recommended to use JSR223 Test Elements and Groovy language for scripting][4] so consider migrating\r\n\r\n 3. The code you wrote doesn&#39;t compile so I fail to see how did you get this output\r\n\r\nIf you have these `carID_1=[307,308,304]` stored as Strings you could do something like:\r\n\r\n\tvars.put(&#39;carID_1&#39;, &#39;[307,308,304]&#39;)\r\n\tvars.put(&#39;carID_2&#39;, &#39;[305]&#39;)\r\n\tvars.put(&#39;carID_3&#39;, &#39;[306]&#39;)\r\n\tvars.put(&quot;carID_matchNr&quot;, &quot;3&quot;)\r\n\t\r\n\tList&lt;Integer&gt; allCarID = new ArrayList&lt;Integer&gt;();\r\n\t\r\n\t1.upto((vars.get(&#39;carID_matchNr&#39;) as int), {\r\n\t    def carIDs = new groovy.json.JsonSlurper().parseText(vars.get(&#39;carID_&#39; + it))\r\n\t    allCarID.addAll(carIDs)\r\n\t})\r\n\t\r\n\tlog.info(&#39;All Car: &#39; + allCarID)\r\n    \r\n[![enter image description here][5]][5]\r\n\r\nMore information on Groovy scripting in JMeter: [Apache Groovy: What Is Groovy Used For?][6]\r\n\r\n\r\n\r\n\r\n    \r\n\r\n \r\n\r\n\r\n\r\n \r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/lang/String.html\r\n  [2]: https://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html#addAll(java.util.Collection)\r\n  [3]: https://docs.oracle.com/javase/7/docs/api/java/util/Collection.html\r\n  [4]: https://jmeter.apache.org/usermanual/best-practices.html#bsh_scripting\r\n  [5]: https://i.stack.imgur.com/qQJpU.png\r\n  [6]: https://www.blazemeter.com/blog/apache-groovy","title":"Can&#39;t merge a list using addAll method in Jmeter&#39;s BeanShell","body":"<ol>\n<li><p>You're trying to pass a <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/String.html\" rel=\"nofollow noreferrer\">String</a> to the <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html#addAll(java.util.Collection)\" rel=\"nofollow noreferrer\">ArrayList.addAll()</a> function, it won't work as the function expects a <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/Collection.html\" rel=\"nofollow noreferrer\">Collection</a>.</p>\n</li>\n<li><p><a href=\"https://jmeter.apache.org/usermanual/best-practices.html#bsh_scripting\" rel=\"nofollow noreferrer\">Since JMeter 3.1 it's recommended to use JSR223 Test Elements and Groovy language for scripting</a> so consider migrating</p>\n</li>\n<li><p>The code you wrote doesn't compile so I fail to see how did you get this output</p>\n</li>\n</ol>\n<p>If you have these <code>carID_1=[307,308,304]</code> stored as Strings you could do something like:</p>\n<pre><code>vars.put('carID_1', '[307,308,304]')\nvars.put('carID_2', '[305]')\nvars.put('carID_3', '[306]')\nvars.put(&quot;carID_matchNr&quot;, &quot;3&quot;)\n\nList&lt;Integer&gt; allCarID = new ArrayList&lt;Integer&gt;();\n\n1.upto((vars.get('carID_matchNr') as int), {\n    def carIDs = new groovy.json.JsonSlurper().parseText(vars.get('carID_' + it))\n    allCarID.addAll(carIDs)\n})\n\nlog.info('All Car: ' + allCarID)\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/qQJpU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qQJpU.png\" alt=\"enter image description here\" /></a></p>\n<p>More information on Groovy scripting in JMeter: <a href=\"https://www.blazemeter.com/blog/apache-groovy\" rel=\"nofollow noreferrer\">Apache Groovy: What Is Groovy Used For?</a></p>\n"},{"comments":[{"owner":{"account_id":3364245,"reputation":5,"user_id":7373607,"display_name":"ilf"},"score":0,"creation_date":1683251370,"post_id":75975020,"comment_id":134341937,"body_markdown":"Hi, I&#39;ve tried the solutions you&#39;ve provided, but I still get the same results `JSR223 PostProcessor: All Car: [[283], [284]]`","body":"Hi, I&#39;ve tried the solutions you&#39;ve provided, but I still get the same results <code>JSR223 PostProcessor: All Car: [[283], [284]]</code>"}],"tags":[],"owner":{"account_id":10263942,"reputation":5676,"user_id":7574461,"display_name":"lucas-nguyen-17"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681110803,"creation_date":1681110803,"answer_id":75975020,"question_id":75969128,"body_markdown":"I think the problem might come from `vars.get(&quot;carID_&quot;+i)`, it will return String instead of List. Therefore, use `vars.getObject(&quot;carID_&quot;+i)` and `flatten()` of groovy methods will help you.\r\n\r\n1. Use JSR223\r\n2. Choose language: groovy\r\n3. Sample code as below:\r\n\r\n```groovy\r\nvars.putObject(&quot;carID_1&quot;, [307,308,304])\r\nvars.putObject(&quot;carID_2&quot;, [305])\r\nvars.putObject(&quot;carID_3&quot;, [306])\r\n\r\ndef allCarID = []\r\n\r\nfor (int i = 1; i &lt;= 3; i++){\r\n    def x = vars.getObject(&quot;carID_&quot;+i)\r\n    allCarID.add(x)\r\n}\r\n\r\nallCarID = allCarID.flatten()\r\n\r\nlog.info(&quot;All Car: &quot; + allCarID)\r\n```\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/XAMl6.png","title":"Can&#39;t merge a list using addAll method in Jmeter&#39;s BeanShell","body":"<p>I think the problem might come from <code>vars.get(&quot;carID_&quot;+i)</code>, it will return String instead of List. Therefore, use <code>vars.getObject(&quot;carID_&quot;+i)</code> and <code>flatten()</code> of groovy methods will help you.</p>\n<ol>\n<li>Use JSR223</li>\n<li>Choose language: groovy</li>\n<li>Sample code as below:</li>\n</ol>\n<pre><code>vars.putObject(&quot;carID_1&quot;, [307,308,304])\nvars.putObject(&quot;carID_2&quot;, [305])\nvars.putObject(&quot;carID_3&quot;, [306])\n\ndef allCarID = []\n\nfor (int i = 1; i &lt;= 3; i++){\n    def x = vars.getObject(&quot;carID_&quot;+i)\n    allCarID.add(x)\n}\n\nallCarID = allCarID.flatten()\n\nlog.info(&quot;All Car: &quot; + allCarID)\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/XAMl6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XAMl6.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":3364245,"reputation":5,"user_id":7373607,"display_name":"ilf"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75974979,"answer_count":2,"score":0,"last_activity_date":1681110803,"creation_date":1681022515,"question_id":75969128,"body_markdown":"Trying to merge a list using addAll method in Jmeter&#39;s BeanShell, but the BeanShellInterpreter said the method not found.\r\n\r\nI tried to merge 2 lists using the tutorial from [here](https://www.digitalocean.com/community/tutorials/merge-two-lists-in-java).\r\n\r\n# The list that I want to merge, looks like this:\r\n\r\n1. carID_1=\\[307,308,304\\]\r\n2. carID_2=\\[305\\]\r\n3. carID_3=\\[306\\]\r\n\r\n# And here&#39;s the code I wrote:\r\n\r\n```java\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\nList&lt;Integer&gt; allCarID = new ArrayList&lt;Integer&gt;();\r\nnumOfCarID = vars.get(&quot;carID_matchNr&quot;); //contains the number of list used for looping\r\nint numOfCarID = Integer.parseInt(numOfCarID);\r\n\r\nfor (int i = 1; i &lt;= numOfCarID; i++){\r\n\tx = vars.get(&quot;carID_&quot;+i);\r\n\tallCarID.addAll(x);\r\n}\r\n\r\nlog.info(&quot;All Car: &quot; + allCarID);\r\n```\r\n\r\nWhen I try to run the code, it gives me an error said that `Encountered &quot;=&quot; at line 4, column 25.`. After some research, I try to change the code to `List allCarID = new ArrayList();` and code successfully reached the addAll method.\r\n\r\nIt show an error like this:\r\n`Error in method invocation: Method addAll( java.lang.String ) not found in class&#39;java.util.ArrayList&#39;`.\r\n\r\nTry to change `addAll`to &#39;add&#39;, the code executed successfully and didn&#39;t show an error, but the result I wanted was different.\r\n\r\nWhat I want is a list `[307,308,304,305,306]`, but I got a `[[307,308,304], [305], [306]]` instead.  \r\n  \r\nAny kind of help is very helpful, thank you in advance.","title":"Can&#39;t merge a list using addAll method in Jmeter&#39;s BeanShell","body":"<p>Trying to merge a list using addAll method in Jmeter's BeanShell, but the BeanShellInterpreter said the method not found.</p>\n<p>I tried to merge 2 lists using the tutorial from <a href=\"https://www.digitalocean.com/community/tutorials/merge-two-lists-in-java\" rel=\"nofollow noreferrer\">here</a>.</p>\n<h1>The list that I want to merge, looks like this:</h1>\n<ol>\n<li>carID_1=[307,308,304]</li>\n<li>carID_2=[305]</li>\n<li>carID_3=[306]</li>\n</ol>\n<h1>And here's the code I wrote:</h1>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.ArrayList;\nimport java.util.List;\n\nList&lt;Integer&gt; allCarID = new ArrayList&lt;Integer&gt;();\nnumOfCarID = vars.get(&quot;carID_matchNr&quot;); //contains the number of list used for looping\nint numOfCarID = Integer.parseInt(numOfCarID);\n\nfor (int i = 1; i &lt;= numOfCarID; i++){\n    x = vars.get(&quot;carID_&quot;+i);\n    allCarID.addAll(x);\n}\n\nlog.info(&quot;All Car: &quot; + allCarID);\n</code></pre>\n<p>When I try to run the code, it gives me an error said that <code>Encountered &quot;=&quot; at line 4, column 25.</code>. After some research, I try to change the code to <code>List allCarID = new ArrayList();</code> and code successfully reached the addAll method.</p>\n<p>It show an error like this:\n<code>Error in method invocation: Method addAll( java.lang.String ) not found in class'java.util.ArrayList'</code>.</p>\n<p>Try to change <code>addAll</code>to 'add', the code executed successfully and didn't show an error, but the result I wanted was different.</p>\n<p>What I want is a list <code>[307,308,304,305,306]</code>, but I got a <code>[[307,308,304], [305], [306]]</code> instead.</p>\n<p>Any kind of help is very helpful, thank you in advance.</p>\n"},{"tags":["java","android","reactjs","react-native","kotlin"],"owner":{"account_id":6586032,"reputation":1672,"user_id":5088774,"accept_rate":6,"display_name":"DIGITAL JEDI"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681110753,"creation_date":1681110753,"question_id":75975014,"body_markdown":"I want to integrate my existing Android and ios projects into react native. So I create a new react native project using expo bare flow. I have followed all the steps mentioned in the official React native document: https://reactnative.dev/docs/integration-with-existing-apps?language=kotlin\r\n\r\nThis is my MainActivity code, which just navigates to RNModuleActivity\r\n\r\n    class MainActivity : AppCompatActivity() {\r\n        override fun onCreate(savedInstanceState: Bundle?) {\r\n            super.onCreate(savedInstanceState)\r\n            setContentView(R.layout.activity_main)\r\n            val btnGoRNScreen = findViewById&lt;Button&gt;(R.id.button)\r\n            btnGoRNScreen.setOnClickListener {\r\n                \r\n                val intent = Intent(this@MainActivity, RNModuleActivity::class.java)\r\n                intent.putExtra(&quot;message_from_native&quot;, &quot;yes&quot;)\r\n                startActivity(intent)\r\n            }\r\n        }\r\n    }\r\n\r\nMy RNModuleActivity code:\r\n\r\n    class RNModuleActivity : Activity(), DefaultHardwareBackBtnHandler {\r\n        private lateinit var reactRootView: ReactRootView\r\n        private lateinit var reactInstanceManager: ReactInstanceManager\r\n        override fun onCreate(savedInstanceState: Bundle?) {\r\n            super.onCreate(savedInstanceState)\r\n            SoLoader.init(this, false)\r\n            reactRootView = ReactRootView(this)\r\n            val packages: List&lt;ReactPackage&gt; = PackageList(application).packages\r\n            // Packages that cannot be autolinked yet can be added manually here, for example:\r\n            // packages.add(MyReactNativePackage())\r\n            // Remember to include them in `settings.gradle` and `app/build.gradle` too.\r\n            reactInstanceManager = ReactInstanceManager.builder()\r\n                .setApplication(application)\r\n                .setCurrentActivity(this)\r\n                .setBundleAssetName(&quot;index.android.bundle&quot;)\r\n                .setJSMainModulePath(&quot;index&quot;)\r\n                .addPackages(packages)\r\n                .setUseDeveloperSupport(BuildConfig.DEBUG)\r\n                .setInitialLifecycleState(LifecycleState.RESUMED)\r\n                .build()\r\n            \r\n            // the string in AppRegistry.registerComponent() in index.js\r\n            reactRootView?.startReactApplication(reactInstanceManager, &quot;testapp&quot;, null)\r\n            setContentView(reactRootView)\r\n        }\r\n    \r\n        override fun invokeDefaultOnBackPressed() {\r\n            super.onBackPressed()\r\n        }\r\n    \r\n        override fun onPause() {\r\n            super.onPause()\r\n            reactInstanceManager.onHostPause(this)\r\n        }\r\n    \r\n        override fun onResume() {\r\n            super.onResume()\r\n            reactInstanceManager.onHostResume(this, this)\r\n        }\r\n    \r\n        override fun onDestroy() {\r\n            super.onDestroy()\r\n            reactInstanceManager.onHostDestroy(this)\r\n            reactRootView.unmountReactApplication()\r\n        }\r\n    \r\n        override fun onBackPressed() {\r\n            reactInstanceManager.onBackPressed()\r\n            super.onBackPressed()\r\n        }\r\n    \r\n        override fun onKeyUp(keyCode: Int, event: KeyEvent?): Boolean {\r\n            if (keyCode == KeyEvent.KEYCODE_MENU &amp;&amp; reactInstanceManager != null) {\r\n                reactInstanceManager.showDevOptionsDialog()\r\n                return true\r\n            }\r\n            return super.onKeyUp(keyCode, event)\r\n        }\r\n    }\r\n\r\nI have set the default activity to MainActivity in my manifest file. But when I click on the button to navigate to RNModuleActivity it returns this error\r\n\r\n    java.lang.NoClassDefFoundError: com.facebook.react.jscexecutor.JSCExecutor\r\n                                                                                                        \tat com.facebook.react.jscexecutor.JSCExecutor.loadLibrary(JSCExecutor.java:24)\r\n                                                                                                        \tat com.facebook.react.ReactInstanceManagerBuilder.getDefaultJSExecutorFactory(ReactInstanceManagerBuilder.java:363)\r\n                                                                                                        \tat com.facebook.react.ReactInstanceManagerBuilder.build(ReactInstanceManagerBuilder.java:316)\r\n                                                                                                        \tat com.krytron.RNModuleActivity.onCreate","title":"Integrate existing Anroid App into React Native Project","body":"<p>I want to integrate my existing Android and ios projects into react native. So I create a new react native project using expo bare flow. I have followed all the steps mentioned in the official React native document: <a href=\"https://reactnative.dev/docs/integration-with-existing-apps?language=kotlin\" rel=\"nofollow noreferrer\">https://reactnative.dev/docs/integration-with-existing-apps?language=kotlin</a></p>\n<p>This is my MainActivity code, which just navigates to RNModuleActivity</p>\n<pre><code>class MainActivity : AppCompatActivity() {\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n        val btnGoRNScreen = findViewById&lt;Button&gt;(R.id.button)\n        btnGoRNScreen.setOnClickListener {\n            \n            val intent = Intent(this@MainActivity, RNModuleActivity::class.java)\n            intent.putExtra(&quot;message_from_native&quot;, &quot;yes&quot;)\n            startActivity(intent)\n        }\n    }\n}\n</code></pre>\n<p>My RNModuleActivity code:</p>\n<pre><code>class RNModuleActivity : Activity(), DefaultHardwareBackBtnHandler {\n    private lateinit var reactRootView: ReactRootView\n    private lateinit var reactInstanceManager: ReactInstanceManager\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        SoLoader.init(this, false)\n        reactRootView = ReactRootView(this)\n        val packages: List&lt;ReactPackage&gt; = PackageList(application).packages\n        // Packages that cannot be autolinked yet can be added manually here, for example:\n        // packages.add(MyReactNativePackage())\n        // Remember to include them in `settings.gradle` and `app/build.gradle` too.\n        reactInstanceManager = ReactInstanceManager.builder()\n            .setApplication(application)\n            .setCurrentActivity(this)\n            .setBundleAssetName(&quot;index.android.bundle&quot;)\n            .setJSMainModulePath(&quot;index&quot;)\n            .addPackages(packages)\n            .setUseDeveloperSupport(BuildConfig.DEBUG)\n            .setInitialLifecycleState(LifecycleState.RESUMED)\n            .build()\n        \n        // the string in AppRegistry.registerComponent() in index.js\n        reactRootView?.startReactApplication(reactInstanceManager, &quot;testapp&quot;, null)\n        setContentView(reactRootView)\n    }\n\n    override fun invokeDefaultOnBackPressed() {\n        super.onBackPressed()\n    }\n\n    override fun onPause() {\n        super.onPause()\n        reactInstanceManager.onHostPause(this)\n    }\n\n    override fun onResume() {\n        super.onResume()\n        reactInstanceManager.onHostResume(this, this)\n    }\n\n    override fun onDestroy() {\n        super.onDestroy()\n        reactInstanceManager.onHostDestroy(this)\n        reactRootView.unmountReactApplication()\n    }\n\n    override fun onBackPressed() {\n        reactInstanceManager.onBackPressed()\n        super.onBackPressed()\n    }\n\n    override fun onKeyUp(keyCode: Int, event: KeyEvent?): Boolean {\n        if (keyCode == KeyEvent.KEYCODE_MENU &amp;&amp; reactInstanceManager != null) {\n            reactInstanceManager.showDevOptionsDialog()\n            return true\n        }\n        return super.onKeyUp(keyCode, event)\n    }\n}\n</code></pre>\n<p>I have set the default activity to MainActivity in my manifest file. But when I click on the button to navigate to RNModuleActivity it returns this error</p>\n<pre><code>java.lang.NoClassDefFoundError: com.facebook.react.jscexecutor.JSCExecutor\n                                                                                                        at com.facebook.react.jscexecutor.JSCExecutor.loadLibrary(JSCExecutor.java:24)\n                                                                                                        at com.facebook.react.ReactInstanceManagerBuilder.getDefaultJSExecutorFactory(ReactInstanceManagerBuilder.java:363)\n                                                                                                        at com.facebook.react.ReactInstanceManagerBuilder.build(ReactInstanceManagerBuilder.java:316)\n                                                                                                        at com.krytron.RNModuleActivity.onCreate\n</code></pre>\n"},{"tags":["java","multithreading","java-me","synchronized","volatile"],"answers":[{"comments":[{"owner":{"account_id":141278,"reputation":12438,"user_id":348183,"accept_rate":97,"display_name":"Albus Dumbledore"},"score":7,"creation_date":1282210486,"post_id":3519736,"comment_id":3681343,"body_markdown":"Thanks very much! The example with the counter is simple to understand. However, when things get real, it&#39;s a bit different.","body":"Thanks very much! The example with the counter is simple to understand. However, when things get real, it&#39;s a bit different."},{"owner":{"account_id":1904296,"reputation":1716,"user_id":1719473,"accept_rate":67,"display_name":"NishM"},"score":0,"creation_date":1442354905,"post_id":3519736,"comment_id":53046307,"body_markdown":"&quot;In practical terms, on current hardware, this typically causes flushing of the CPU caches when a monitor is acquired and writes to main memory when it is released, both of which are expensive (relatively speaking).&quot; . When you say CPU caches, is it the same as Java Stacks local to each thread? or does a thread has its own local version of Heap? Apologize if i am being silly here.","body":"&quot;In practical terms, on current hardware, this typically causes flushing of the CPU caches when a monitor is acquired and writes to main memory when it is released, both of which are expensive (relatively speaking).&quot; . When you say CPU caches, is it the same as Java Stacks local to each thread? or does a thread has its own local version of Heap? Apologize if i am being silly here."},{"owner":{"account_id":5530,"reputation":63236,"user_id":8946,"accept_rate":84,"display_name":"Lawrence Dol"},"score":1,"creation_date":1442548562,"post_id":3519736,"comment_id":53135195,"body_markdown":"@nishm It&#39;s not the same, but it would include the local caches of the threads involved. .","body":"@nishm It&#39;s not the same, but it would include the local caches of the threads involved. ."},{"owner":{"account_id":1904296,"reputation":1716,"user_id":1719473,"accept_rate":67,"display_name":"NishM"},"score":0,"creation_date":1442611304,"post_id":3519736,"comment_id":53168837,"body_markdown":"Thanks. That clears my ridiculous assumption of cpu caches being equal to thread local java stacks. I should be shot for even thinking that. Nevertheless, it is still not clear what happens when the shared entity is primitive compared to an object ( since sharing a reference would still not affect the visibility aspect of the object data )  . Found an unanswered thread though. http://stackoverflow.com/questions/20552945/thread-caching-and-java-memory-model","body":"Thanks. That clears my ridiculous assumption of cpu caches being equal to thread local java stacks. I should be shot for even thinking that. Nevertheless, it is still not clear what happens when the shared entity is primitive compared to an object ( since sharing a reference would still not affect the visibility aspect of the object data )  . Found an unanswered thread though. <a href=\"http://stackoverflow.com/questions/20552945/thread-caching-and-java-memory-model\" title=\"thread caching and java memory model\">stackoverflow.com/questions/20552945/&hellip;</a>"},{"owner":{"account_id":2775886,"reputation":8871,"user_id":2401535,"accept_rate":47,"display_name":"Marian Paździoch"},"score":0,"creation_date":1459939358,"post_id":3519736,"comment_id":60510177,"body_markdown":"&quot;including the increment which is a non-atomic&quot; doesn&#39;t it depend on what type is counter variable? If it&#39;s for example int then incrementing is atomic, isn&#39;t it?","body":"&quot;including the increment which is a non-atomic&quot; doesn&#39;t it depend on what type is counter variable? If it&#39;s for example int then incrementing is atomic, isn&#39;t it?"},{"owner":{"account_id":5530,"reputation":63236,"user_id":8946,"accept_rate":84,"display_name":"Lawrence Dol"},"score":0,"creation_date":1460072781,"post_id":3519736,"comment_id":60587028,"body_markdown":"@Marian: Nope. Per my pseudo-assembler example. It&#39;s a set of read + update + write instructions. Or, more precisely, it might be and is allowed by the JVM spec. I&#39;ve no idea what current CPU optimizations there may be.","body":"@Marian: Nope. Per my pseudo-assembler example. It&#39;s a set of read + update + write instructions. Or, more precisely, it might be and is allowed by the JVM spec. I&#39;ve no idea what current CPU optimizations there may be."},{"owner":{"account_id":2775886,"reputation":8871,"user_id":2401535,"accept_rate":47,"display_name":"Marian Paździoch"},"score":0,"creation_date":1460105114,"post_id":3519736,"comment_id":60598312,"body_markdown":"But you wrote &quot;Making the counter volatile is insufficient for thread-safety of this code&quot; and here https://docs.oracle.com/javase/tutorial/essential/concurrency/atomic.html it says &quot;Reads and writes are atomic for all variables declared volatile (including long and double variables).&quot;, what do you think?","body":"But you wrote &quot;Making the counter volatile is insufficient for thread-safety of this code&quot; and here <a href=\"https://docs.oracle.com/javase/tutorial/essential/concurrency/atomic.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/tutorial/essential/concurrency/&hellip;</a> it says &quot;Reads and writes are atomic for all variables declared volatile (including long and double variables).&quot;, what do you think?"},{"owner":{"account_id":5530,"reputation":63236,"user_id":8946,"accept_rate":84,"display_name":"Lawrence Dol"},"score":3,"creation_date":1460144355,"post_id":3519736,"comment_id":60622869,"body_markdown":"@MarianPaździoch: An increment or decrement is NOT a read **or** a write, it&#39;s a read **and** a write; it&#39;s a read into a register, then a register increment, then a write back to memory. Reads and writes are *individually* atomic, but multiple such operations are not.","body":"@MarianPaździoch: An increment or decrement is NOT a read <b>or</b> a write, it&#39;s a read <b>and</b> a write; it&#39;s a read into a register, then a register increment, then a write back to memory. Reads and writes are <i>individually</i> atomic, but multiple such operations are not."},{"owner":{"account_id":204515,"reputation":11679,"user_id":452775,"accept_rate":63,"display_name":"Lii"},"score":0,"creation_date":1470484919,"post_id":3519736,"comment_id":64976878,"body_markdown":"In this answer and this [comment](https://stackoverflow.com/questions/3519664#comment39420456_3519746) you state the following: _&quot;anything that is done **after some thread acquires a lock** appears to another thread&quot;_. To me this seems to be contradictory to what the [Java Memory Model FAQ](https://www.cs.umd.edu/~pugh/java/memoryModel/jsr-133-faq.html#synchronization) states. To me the FAQ seems to say that *every* action on a thread before the unlock of a particular monitor happens-before the lock of the same monitor by another thread (see bullet point list in linked section).","body":"In this answer and this <a href=\"https://stackoverflow.com/questions/3519664#comment39420456_3519746\">comment</a> you state the following: <i>&quot;anything that is done <b>after some thread acquires a lock</b> appears to another thread&quot;</i>. To me this seems to be contradictory to what the <a href=\"https://www.cs.umd.edu/~pugh/java/memoryModel/jsr-133-faq.html#synchronization\" rel=\"nofollow noreferrer\">Java Memory Model FAQ</a> states. To me the FAQ seems to say that <i>every</i> action on a thread before the unlock of a particular monitor happens-before the lock of the same monitor by another thread (see bullet point list in linked section)."},{"owner":{"account_id":204515,"reputation":11679,"user_id":452775,"accept_rate":63,"display_name":"Lii"},"score":2,"creation_date":1470498142,"post_id":3519736,"comment_id":64980548,"body_markdown":"So, according to the FAQ, *not* only the actions made *since a lock acquisition* are made visible after unlock, but *all* actions made by that thread are made visible. Even actions made before the lock acquisition.","body":"So, according to the FAQ, <i>not</i> only the actions made <i>since a lock acquisition</i> are made visible after unlock, but <i>all</i> actions made by that thread are made visible. Even actions made before the lock acquisition."},{"owner":{"account_id":1251686,"reputation":29348,"user_id":1531054,"accept_rate":95,"display_name":"s.d"},"score":0,"creation_date":1589548070,"post_id":3519736,"comment_id":109345106,"body_markdown":"@LawrenceDol Great answer. Should also introduce [AtomicReference](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/atomic/AtomicReference.html) in it.","body":"@LawrenceDol Great answer. Should also introduce <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/atomic/AtomicReference.html\" rel=\"nofollow noreferrer\">AtomicReference</a> in it."},{"owner":{"account_id":2043549,"reputation":1360,"user_id":1824182,"accept_rate":83,"display_name":"Ti Strga"},"score":1,"creation_date":1666800235,"post_id":3519736,"comment_id":131023020,"body_markdown":"The paragraph beginning _&quot;One use of volatile is for a shared but immutable object&quot;_ introduces a code example, but `volatile` does not appear anywhere in the example.","body":"The paragraph beginning <i>&quot;One use of volatile is for a shared but immutable object&quot;</i> introduces a code example, but <code>volatile</code> does not appear anywhere in the example."},{"owner":{"account_id":5530,"reputation":63236,"user_id":8946,"accept_rate":84,"display_name":"Lawrence Dol"},"score":1,"creation_date":1667442202,"post_id":3519736,"comment_id":131170127,"body_markdown":"@TiStrga : Oops, yeah. I had originally implied that, thinking it was obvious -- I&#39;ve now added an explicit declaration.","body":"@TiStrga : Oops, yeah. I had originally implied that, thinking it was obvious -- I&#39;ve now added an explicit declaration."}],"tags":[],"owner":{"account_id":5530,"reputation":63236,"user_id":8946,"accept_rate":84,"display_name":"Lawrence Dol"},"comment_count":13,"down_vote_count":2,"up_vote_count":469,"is_accepted":true,"score":467,"last_activity_date":1667442130,"creation_date":1282204113,"answer_id":3519736,"question_id":3519664,"body_markdown":"It&#39;s important to understand that there are *two* aspects to thread safety.\r\n\r\n1. execution control, and\r\n2. memory visibility  \r\n\r\nThe first has to do with controlling when code executes (including the order in which instructions are executed) and whether it can execute concurrently, and the second to do with when the effects in memory of what has been done are visible to other threads.  Because each CPU has several levels of cache between it and main memory, threads running on different CPUs or cores can see &quot;memory&quot; differently at any given moment in time because threads are permitted to obtain and work on private copies of main memory.\r\n\r\nUsing `synchronized` prevents any other thread from obtaining the monitor (or lock) ***for the same object***, thereby preventing all code blocks protected by synchronization ***on the same object*** from executing concurrently.  Synchronization *also* creates a &quot;happens-before&quot; memory barrier, causing a memory visibility constraint such that anything done up to the point some thread releases a lock *appears* to another thread subsequently acquiring ***the same lock*** to have happened before it acquired the lock. In practical terms, on current hardware, this typically causes flushing of the CPU caches when a monitor is acquired and writes to main memory when it is released, both of which are (relatively) expensive.\r\n\r\nUsing `volatile`, on the other hand, forces all accesses (read or write) to the volatile variable to occur to main memory, effectively keeping the volatile variable out of CPU caches. This can be useful for some actions where it is simply required that visibility of the variable be correct and order of accesses is not important. Using `volatile` also changes treatment of `long` and `double` to require accesses to them to be atomic; on some (older) hardware this might require locks, though not on modern 64 bit hardware. Under the new (JSR-133) memory model for Java 5+, the semantics of volatile have been strengthened to be almost as strong as synchronized with respect to memory visibility and instruction ordering (see http://www.cs.umd.edu/users/pugh/java/memoryModel/jsr-133-faq.html#volatile).  For the purposes of visibility, each access to a volatile field acts like half a synchronization.\r\n\r\n&gt; Under the new memory model, it is still true that volatile variables cannot be reordered with each other. The difference is that it is now no longer so easy to reorder normal field accesses around them. Writing to a volatile field has the same memory effect as a monitor release, and reading from a volatile field has the same memory effect as a monitor acquire. In effect, because the new memory model places stricter constraints on reordering of volatile field accesses with other field accesses, volatile or not, anything that was visible to thread `A` when it writes to volatile field `f` becomes visible to thread `B` when it reads `f`.\r\n&gt;\r\n&gt; -- [JSR 133 (Java Memory Model) FAQ](http://www.cs.umd.edu/~pugh/java/memoryModel/jsr-133-faq.html)\r\n\r\nSo, now both forms of memory barrier (under the current JMM) cause an instruction re-ordering barrier which prevents the compiler or run-time from re-ordering instructions across the barrier. In the old JMM, volatile did not prevent re-ordering. This can be important, because apart from memory barriers the only limitation imposed is that,  *for any particular thread*, the net effect of the code is the same as it would be if the instructions were executed in precisely the order in which they appear in the source.\r\n\r\nOne use of volatile is for a shared but immutable object is recreated on the fly, with many other threads taking a reference to the object at a particular point in their execution cycle.  One needs the other threads to begin using the recreated object once it is published, but does not need the additional overhead of full synchronization and it&#39;s attendant contention and cache flushing.\r\n\r\n    // Declaration\r\n    public class SharedLocation {\r\n        static public volatile SomeObject someObject=new SomeObject(); // default object\r\n        }\r\n    \r\n    // Publishing code\r\n    SharedLocation.someObject=new SomeObject(...); // new object is published\r\n\r\n    // Using code\r\n    // Note: do not simply use SharedLocation.someObject.xxx(), since although\r\n    //       someObject will be internally consistent for xxx(), a subsequent \r\n    //       call to yyy() might be inconsistent with xxx() if the object was \r\n    //       replaced in between calls.\r\n    private String getError() {\r\n        SomeObject myCopy=SharedLocation.someObject; // gets current copy\r\n        ...\r\n        int cod=myCopy.getErrorCode();\r\n        String txt=myCopy.getErrorText();\r\n        return (cod+&quot; - &quot;+txt);\r\n        }\r\n    // And so on, with myCopy always in a consistent state within and across calls\r\n    // Eventually we will return to the code that gets the current SomeObject.\r\n\r\nSpeaking to your read-update-write question, specifically.  Consider the following unsafe code:\r\n\r\n    public void updateCounter() {\r\n        if(counter==1000) { counter=0; }\r\n        else              { counter++; }\r\n        }\r\n\r\nNow, with the updateCounter() method unsynchronized, two threads may enter it at the same time.  Among the many permutations of what could happen, one is that thread-1 does the test for counter==1000 and finds it true and is then suspended. Then thread-2 does the same test and also sees it true and is suspended. Then thread-1 resumes and sets counter to 0. Then thread-2 resumes and again sets counter to 0 because it missed the update from thread-1.  This can also happen even if thread switching does not occur as I have described, but simply because two different cached copies of counter were present in two different CPU cores and the threads each ran on a separate core. For that matter, one thread could have counter at one value and the other could have counter at some entirely different value just because of caching.\r\n\r\nWhat&#39;s important in this example is that the variable *counter* was read from main memory into cache, updated in cache and only written back to main memory at some indeterminate point later when a memory barrier occurred or when the cache memory was needed for something else. Making the counter `volatile` is insufficient for thread-safety of this code, because the test for the maximum and the assignments are discrete operations, including the increment which is a set of non-atomic `read+increment+write` machine instructions, something like: \r\n\r\n    MOV EAX,counter\r\n    INC EAX\r\n    MOV counter,EAX\r\n\r\nVolatile variables are useful only when ***all*** operations performed on them are &quot;atomic&quot;, such as my example where a reference to a fully formed object is only read or written (and, indeed, typically it&#39;s only written from a single point). Another example would be a volatile array reference backing a copy-on-write list, provided the array was only read by first taking a local copy of the reference to it.\r\n","title":"Difference between volatile and synchronized in Java","body":"<p>It's important to understand that there are <em>two</em> aspects to thread safety.</p>\n<ol>\n<li>execution control, and</li>\n<li>memory visibility</li>\n</ol>\n<p>The first has to do with controlling when code executes (including the order in which instructions are executed) and whether it can execute concurrently, and the second to do with when the effects in memory of what has been done are visible to other threads.  Because each CPU has several levels of cache between it and main memory, threads running on different CPUs or cores can see &quot;memory&quot; differently at any given moment in time because threads are permitted to obtain and work on private copies of main memory.</p>\n<p>Using <code>synchronized</code> prevents any other thread from obtaining the monitor (or lock) <em><strong>for the same object</strong></em>, thereby preventing all code blocks protected by synchronization <em><strong>on the same object</strong></em> from executing concurrently.  Synchronization <em>also</em> creates a &quot;happens-before&quot; memory barrier, causing a memory visibility constraint such that anything done up to the point some thread releases a lock <em>appears</em> to another thread subsequently acquiring <em><strong>the same lock</strong></em> to have happened before it acquired the lock. In practical terms, on current hardware, this typically causes flushing of the CPU caches when a monitor is acquired and writes to main memory when it is released, both of which are (relatively) expensive.</p>\n<p>Using <code>volatile</code>, on the other hand, forces all accesses (read or write) to the volatile variable to occur to main memory, effectively keeping the volatile variable out of CPU caches. This can be useful for some actions where it is simply required that visibility of the variable be correct and order of accesses is not important. Using <code>volatile</code> also changes treatment of <code>long</code> and <code>double</code> to require accesses to them to be atomic; on some (older) hardware this might require locks, though not on modern 64 bit hardware. Under the new (JSR-133) memory model for Java 5+, the semantics of volatile have been strengthened to be almost as strong as synchronized with respect to memory visibility and instruction ordering (see <a href=\"http://www.cs.umd.edu/users/pugh/java/memoryModel/jsr-133-faq.html#volatile\" rel=\"noreferrer\">http://www.cs.umd.edu/users/pugh/java/memoryModel/jsr-133-faq.html#volatile</a>).  For the purposes of visibility, each access to a volatile field acts like half a synchronization.</p>\n<blockquote>\n<p>Under the new memory model, it is still true that volatile variables cannot be reordered with each other. The difference is that it is now no longer so easy to reorder normal field accesses around them. Writing to a volatile field has the same memory effect as a monitor release, and reading from a volatile field has the same memory effect as a monitor acquire. In effect, because the new memory model places stricter constraints on reordering of volatile field accesses with other field accesses, volatile or not, anything that was visible to thread <code>A</code> when it writes to volatile field <code>f</code> becomes visible to thread <code>B</code> when it reads <code>f</code>.</p>\n<p>-- <a href=\"http://www.cs.umd.edu/%7Epugh/java/memoryModel/jsr-133-faq.html\" rel=\"noreferrer\">JSR 133 (Java Memory Model) FAQ</a></p>\n</blockquote>\n<p>So, now both forms of memory barrier (under the current JMM) cause an instruction re-ordering barrier which prevents the compiler or run-time from re-ordering instructions across the barrier. In the old JMM, volatile did not prevent re-ordering. This can be important, because apart from memory barriers the only limitation imposed is that,  <em>for any particular thread</em>, the net effect of the code is the same as it would be if the instructions were executed in precisely the order in which they appear in the source.</p>\n<p>One use of volatile is for a shared but immutable object is recreated on the fly, with many other threads taking a reference to the object at a particular point in their execution cycle.  One needs the other threads to begin using the recreated object once it is published, but does not need the additional overhead of full synchronization and it's attendant contention and cache flushing.</p>\n<pre><code>// Declaration\npublic class SharedLocation {\n    static public volatile SomeObject someObject=new SomeObject(); // default object\n    }\n\n// Publishing code\nSharedLocation.someObject=new SomeObject(...); // new object is published\n\n// Using code\n// Note: do not simply use SharedLocation.someObject.xxx(), since although\n//       someObject will be internally consistent for xxx(), a subsequent \n//       call to yyy() might be inconsistent with xxx() if the object was \n//       replaced in between calls.\nprivate String getError() {\n    SomeObject myCopy=SharedLocation.someObject; // gets current copy\n    ...\n    int cod=myCopy.getErrorCode();\n    String txt=myCopy.getErrorText();\n    return (cod+&quot; - &quot;+txt);\n    }\n// And so on, with myCopy always in a consistent state within and across calls\n// Eventually we will return to the code that gets the current SomeObject.\n</code></pre>\n<p>Speaking to your read-update-write question, specifically.  Consider the following unsafe code:</p>\n<pre><code>public void updateCounter() {\n    if(counter==1000) { counter=0; }\n    else              { counter++; }\n    }\n</code></pre>\n<p>Now, with the updateCounter() method unsynchronized, two threads may enter it at the same time.  Among the many permutations of what could happen, one is that thread-1 does the test for counter==1000 and finds it true and is then suspended. Then thread-2 does the same test and also sees it true and is suspended. Then thread-1 resumes and sets counter to 0. Then thread-2 resumes and again sets counter to 0 because it missed the update from thread-1.  This can also happen even if thread switching does not occur as I have described, but simply because two different cached copies of counter were present in two different CPU cores and the threads each ran on a separate core. For that matter, one thread could have counter at one value and the other could have counter at some entirely different value just because of caching.</p>\n<p>What's important in this example is that the variable <em>counter</em> was read from main memory into cache, updated in cache and only written back to main memory at some indeterminate point later when a memory barrier occurred or when the cache memory was needed for something else. Making the counter <code>volatile</code> is insufficient for thread-safety of this code, because the test for the maximum and the assignments are discrete operations, including the increment which is a set of non-atomic <code>read+increment+write</code> machine instructions, something like:</p>\n<pre><code>MOV EAX,counter\nINC EAX\nMOV counter,EAX\n</code></pre>\n<p>Volatile variables are useful only when <em><strong>all</strong></em> operations performed on them are &quot;atomic&quot;, such as my example where a reference to a fully formed object is only read or written (and, indeed, typically it's only written from a single point). Another example would be a volatile array reference backing a copy-on-write list, provided the array was only read by first taking a local copy of the reference to it.</p>\n"},{"comments":[{"owner":{"account_id":4276,"reputation":14213,"user_id":6365,"accept_rate":65,"display_name":"Michael Barker"},"score":47,"creation_date":1294560204,"post_id":3519746,"comment_id":5104229,"body_markdown":"-1, Volatile does not acquire a lock, it uses the underlying CPU architecture to ensure visibility across all threads after the write.","body":"-1, Volatile does not acquire a lock, it uses the underlying CPU architecture to ensure visibility across all threads after the write."},{"owner":{"account_id":4276,"reputation":14213,"user_id":6365,"accept_rate":65,"display_name":"Michael Barker"},"score":0,"creation_date":1330373731,"post_id":3519746,"comment_id":11985567,"body_markdown":"It&#39;s worth noting that there may be some cases where a lock may be used to guarantee atomicity of writes.  E.g. writing a long on a 32 bit platform that doesn&#39;t support extended width rights.  Intel avoids this by using SSE2 registers (128 bits wide) to handle volatile longs.  However, considering a volatile as a lock will likely lead to nasty bugs in your code.","body":"It&#39;s worth noting that there may be some cases where a lock may be used to guarantee atomicity of writes.  E.g. writing a long on a 32 bit platform that doesn&#39;t support extended width rights.  Intel avoids this by using SSE2 registers (128 bits wide) to handle volatile longs.  However, considering a volatile as a lock will likely lead to nasty bugs in your code."},{"owner":{"account_id":4276,"reputation":14213,"user_id":6365,"accept_rate":65,"display_name":"Michael Barker"},"score":3,"creation_date":1330374190,"post_id":3519746,"comment_id":11985733,"body_markdown":"The important semantic shared by locks a volatile variables is that they both provide Happens-Before edges (Java 1.5 and later).  Entering a synchronized block, taking out a lock and reading from a volatile are all considered as an &quot;acquire&quot; and the release of a lock, exiting a synchronized block and writing a volatile are all forms of a &quot;release&quot;.","body":"The important semantic shared by locks a volatile variables is that they both provide Happens-Before edges (Java 1.5 and later).  Entering a synchronized block, taking out a lock and reading from a volatile are all considered as an &quot;acquire&quot; and the release of a lock, exiting a synchronized block and writing a volatile are all forms of a &quot;release&quot;."}],"tags":[],"owner":{"account_id":184855,"reputation":10523,"user_id":421162,"display_name":"Kerem Baydoğan"},"comment_count":3,"down_vote_count":11,"up_vote_count":125,"is_accepted":false,"score":114,"last_activity_date":1470476829,"creation_date":1282204255,"answer_id":3519746,"question_id":3519664,"body_markdown":"&gt; **volatile** is a **field modifier**, while **synchronized** modifies **code blocks** and **methods**. So we can specify three variations of a simple accessor using those two keywords:\r\n&gt;\r\n&gt;\r\n&gt;         int i1;\r\n&gt;         int geti1() {return i1;}\r\n&gt;\r\n&gt;         volatile int i2;\r\n&gt;         int geti2() {return i2;}\r\n&gt;\r\n&gt;         int i3;\r\n&gt;         synchronized int geti3() {return i3;}\r\n&gt;\r\n&gt; `geti1()` accesses the value currently stored in `i1` in the current thread.\r\nThreads can have local copies of variables, and the data does not have to be the same as the data held in other threads.In particular, another thread may have updated `i1` in it&#39;s thread, but the value in the current thread could be different from that updated value. In fact Java has the idea of a &quot;main&quot; memory, and this is the memory that holds the current &quot;correct&quot; value for variables. Threads can have their own copy of data for variables, and the thread copy can be different from the &quot;main&quot; memory. So in fact, it is possible for the &quot;main&quot; memory to have a value of **1** for `i1`, for thread1 to have a value of **2** for `i1` and for **thread2** to have a value of **3** for `i1` if **thread1** and **thread2** have both updated i1 but those updated value has not yet been propagated to &quot;main&quot; memory or other threads.\r\n\r\n&gt; On the other hand, `geti2()` effectively accesses the value of `i2` from &quot;main&quot; memory. A volatile variable is not allowed to have a local copy of a variable that is different from the value currently held in &quot;main&quot; memory. Effectively, a variable declared volatile must have it&#39;s data synchronized across all threads, so that whenever you access or update the variable in any thread, all other threads immediately see the same value. Generally volatile variables have a higher access and update overhead than &quot;plain&quot; variables. Generally threads are allowed to have their own copy of data is for better efficiency.\r\n\r\n&gt; There are two differences between volitile and synchronized.\r\n\r\n&gt; Firstly synchronized obtains and releases locks on monitors which can force only one thread at a time to execute a code block. That&#39;s the fairly well known aspect to synchronized. But synchronized also synchronizes memory. In fact synchronized synchronizes the whole of thread memory with &quot;main&quot; memory. So executing `geti3()` does the following:\r\n\r\n&gt;   1. The thread acquires the lock on the monitor for object this .\r\n&gt;   2. The thread memory flushes all its variables, i.e. it has all of its variables effectively read from &quot;main&quot; memory .\r\n&gt;   3. The code block is executed (in this case setting the return value to the current value of i3, which may have just been reset from &quot;main&quot; memory).\r\n&gt;   4. (Any changes to variables would normally now be written out to &quot;main&quot; memory, but for geti3() we have no changes.)\r\n&gt;   5. The thread releases the lock on the monitor for object this. \r\n\r\n&gt; So where volatile only synchronizes the value of one variable between thread memory and &quot;main&quot; memory, synchronized synchronizes the value of all variables between thread memory and &quot;main&quot; memory, and locks and releases a monitor to boot. Clearly synchronized is likely to have more overhead than volatile. \r\n\r\n\r\nhttp://javaexp.blogspot.com/2007/12/difference-between-volatile-and.html","title":"Difference between volatile and synchronized in Java","body":"<blockquote>\n  <p><strong>volatile</strong> is a <strong>field modifier</strong>, while <strong>synchronized</strong> modifies <strong>code blocks</strong> and <strong>methods</strong>. So we can specify three variations of a simple accessor using those two keywords:</p>\n\n<pre><code>    int i1;\n    int geti1() {return i1;}\n\n    volatile int i2;\n    int geti2() {return i2;}\n\n    int i3;\n    synchronized int geti3() {return i3;}\n</code></pre>\n  \n  <p><code>geti1()</code> accesses the value currently stored in <code>i1</code> in the current thread.\n  Threads can have local copies of variables, and the data does not have to be the same as the data held in other threads.In particular, another thread may have updated <code>i1</code> in it's thread, but the value in the current thread could be different from that updated value. In fact Java has the idea of a \"main\" memory, and this is the memory that holds the current \"correct\" value for variables. Threads can have their own copy of data for variables, and the thread copy can be different from the \"main\" memory. So in fact, it is possible for the \"main\" memory to have a value of <strong>1</strong> for <code>i1</code>, for thread1 to have a value of <strong>2</strong> for <code>i1</code> and for <strong>thread2</strong> to have a value of <strong>3</strong> for <code>i1</code> if <strong>thread1</strong> and <strong>thread2</strong> have both updated i1 but those updated value has not yet been propagated to \"main\" memory or other threads.</p>\n  \n  <p>On the other hand, <code>geti2()</code> effectively accesses the value of <code>i2</code> from \"main\" memory. A volatile variable is not allowed to have a local copy of a variable that is different from the value currently held in \"main\" memory. Effectively, a variable declared volatile must have it's data synchronized across all threads, so that whenever you access or update the variable in any thread, all other threads immediately see the same value. Generally volatile variables have a higher access and update overhead than \"plain\" variables. Generally threads are allowed to have their own copy of data is for better efficiency.</p>\n  \n  <p>There are two differences between volitile and synchronized.</p>\n  \n  <p>Firstly synchronized obtains and releases locks on monitors which can force only one thread at a time to execute a code block. That's the fairly well known aspect to synchronized. But synchronized also synchronizes memory. In fact synchronized synchronizes the whole of thread memory with \"main\" memory. So executing <code>geti3()</code> does the following:</p>\n  \n  <ol>\n  <li>The thread acquires the lock on the monitor for object this .</li>\n  <li>The thread memory flushes all its variables, i.e. it has all of its variables effectively read from \"main\" memory .</li>\n  <li>The code block is executed (in this case setting the return value to the current value of i3, which may have just been reset from \"main\" memory).</li>\n  <li>(Any changes to variables would normally now be written out to \"main\" memory, but for geti3() we have no changes.)</li>\n  <li>The thread releases the lock on the monitor for object this. </li>\n  </ol>\n  \n  <p>So where volatile only synchronizes the value of one variable between thread memory and \"main\" memory, synchronized synchronizes the value of all variables between thread memory and \"main\" memory, and locks and releases a monitor to boot. Clearly synchronized is likely to have more overhead than volatile. </p>\n</blockquote>\n\n<p><a href=\"http://javaexp.blogspot.com/2007/12/difference-between-volatile-and.html\" rel=\"noreferrer\">http://javaexp.blogspot.com/2007/12/difference-between-volatile-and.html</a></p>\n"},{"comments":[{"owner":{"account_id":3216945,"reputation":8445,"user_id":2715384,"accept_rate":55,"display_name":"the_prole"},"score":0,"creation_date":1578348363,"post_id":34355995,"comment_id":105402507,"body_markdown":"So read can happen at same time, and all thread will read latest value because CPU does not cache main memory to CPU thread cache, but what about write? Write must not be concurrent correct? Second question: if a block is synchronized, but variable is not volatile, the value of a variable in a synchronized block can still be changed by another thread in another code block right?","body":"So read can happen at same time, and all thread will read latest value because CPU does not cache main memory to CPU thread cache, but what about write? Write must not be concurrent correct? Second question: if a block is synchronized, but variable is not volatile, the value of a variable in a synchronized block can still be changed by another thread in another code block right?"}],"tags":[],"owner":{"account_id":6453072,"reputation":37996,"user_id":4999394,"accept_rate":98,"display_name":"Ravindra babu"},"comment_count":1,"down_vote_count":0,"up_vote_count":26,"is_accepted":false,"score":26,"last_activity_date":1681110174,"creation_date":1450442588,"answer_id":34355995,"question_id":3519664,"body_markdown":"[synchronized][1]\r\n\r\nis keyword used to guard a method or code block.  By making method as synchronized , you achieve two things.\r\n\r\n\r\n &gt;1. Two executions of `synchronized` methods on the same object never run\r\n &gt;2. Change in the object state is visible to other threads\r\n\r\n`volatile` is variable access modifier which forces all threads to get latest value of the variable from main memory. All threads can access volatile variable value at same time with out any locks. \r\n\r\nA good example to use volatile variable : `Date` variable.\r\n\r\nAssume that you have made Date variable `volatile`. You don&#39;t need different threads showing different time for same variable. All the threads, which access this variable always get latest data from main memory so that all threads show real (actual) Date value. \r\n\r\nLawrence Dol cleary explained your `read-write-update query`. \r\n\r\nRegarding your other queries\r\n\r\n *When is it more suitable to declare variables volatile than access them through synchronized?* \r\n\r\nYou have to use `volatile` if you think all threads should get actual value of the variable in real time like Data example covered above.\r\n\r\n*Is it a good idea to use volatile for variables that depend on input?*\r\n\r\nAnswer will be same as in first query. \r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/essential/concurrency/syncmeth.html","title":"Difference between volatile and synchronized in Java","body":"<p><a href=\"https://docs.oracle.com/javase/tutorial/essential/concurrency/syncmeth.html\" rel=\"nofollow noreferrer\">synchronized</a></p>\n<p>is keyword used to guard a method or code block.  By making method as synchronized , you achieve two things.</p>\n<blockquote>\n<ol>\n<li>Two executions of <code>synchronized</code> methods on the same object never run</li>\n<li>Change in the object state is visible to other threads</li>\n</ol>\n</blockquote>\n<p><code>volatile</code> is variable access modifier which forces all threads to get latest value of the variable from main memory. All threads can access volatile variable value at same time with out any locks.</p>\n<p>A good example to use volatile variable : <code>Date</code> variable.</p>\n<p>Assume that you have made Date variable <code>volatile</code>. You don't need different threads showing different time for same variable. All the threads, which access this variable always get latest data from main memory so that all threads show real (actual) Date value.</p>\n<p>Lawrence Dol cleary explained your <code>read-write-update query</code>.</p>\n<p>Regarding your other queries</p>\n<p><em>When is it more suitable to declare variables volatile than access them through synchronized?</em></p>\n<p>You have to use <code>volatile</code> if you think all threads should get actual value of the variable in real time like Data example covered above.</p>\n<p><em>Is it a good idea to use volatile for variables that depend on input?</em></p>\n<p>Answer will be same as in first query.</p>\n"},{"comments":[{"owner":{"account_id":9540,"reputation":25179,"user_id":17675,"accept_rate":81,"display_name":"Zombies"},"score":1,"creation_date":1578312783,"post_id":54592753,"comment_id":105386844,"body_markdown":"&quot;While it may look like one operation, it&#39;s actually 3: reading the current value of x from memory, adding 1 to it, and saving it back to memory.&quot; - Right, because values from memory must go through the CPU circuitry in order to be added/modified. Even though this just turns into a single Assembly `INC` operation, the underlying CPU operations are still 3 fold and requires locking for thread safety. Good point. Although, the `INC/DEC` commands can be atomicly flagged in assembly and still be 1 atomic operation.","body":"&quot;While it may look like one operation, it&#39;s actually 3: reading the current value of x from memory, adding 1 to it, and saving it back to memory.&quot; - Right, because values from memory must go through the CPU circuitry in order to be added/modified. Even though this just turns into a single Assembly <code>INC</code> operation, the underlying CPU operations are still 3 fold and requires locking for thread safety. Good point. Although, the <code>INC&#47;DEC</code> commands can be atomicly flagged in assembly and still be 1 atomic operation."},{"owner":{"account_id":8344713,"reputation":5886,"user_id":6296435,"accept_rate":71,"display_name":"Maverick Meerkat"},"score":0,"creation_date":1578337314,"post_id":54592753,"comment_id":105398441,"body_markdown":"@Zombies so when I create a synchronized block for x++, does it turn it into a flagged atomic INC/DEC or does it use a regular lock?","body":"@Zombies so when I create a synchronized block for x++, does it turn it into a flagged atomic INC/DEC or does it use a regular lock?"},{"owner":{"account_id":9540,"reputation":25179,"user_id":17675,"accept_rate":81,"display_name":"Zombies"},"score":0,"creation_date":1578424215,"post_id":54592753,"comment_id":105431467,"body_markdown":"I don&#39;t know! What I do know is that INC/DEC are not atomic because for a CPU, it has to load the value and READ it and also WRITE it (to memory), just like any other arithmetic operation.","body":"I don&#39;t know! What I do know is that INC/DEC are not atomic because for a CPU, it has to load the value and READ it and also WRITE it (to memory), just like any other arithmetic operation."},{"owner":{"account_id":15328195,"reputation":2461,"user_id":11058704,"display_name":"RamPrakash"},"score":0,"creation_date":1619032409,"post_id":54592753,"comment_id":118785239,"body_markdown":"@MaverickMeerkat - man your #3 example clarified my question. extraordinary explanation. thanks.","body":"@MaverickMeerkat - man your #3 example clarified my question. extraordinary explanation. thanks."}],"tags":[],"owner":{"account_id":8344713,"reputation":5886,"user_id":6296435,"accept_rate":71,"display_name":"Maverick Meerkat"},"comment_count":4,"down_vote_count":0,"up_vote_count":62,"is_accepted":false,"score":62,"last_activity_date":1647225154,"creation_date":1549629804,"answer_id":54592753,"question_id":3519664,"body_markdown":"There are 3 main issues with multithreading:\r\n\r\n1) Race Conditions\r\n\r\n2) Caching / stale memory\r\n\r\n3) Compiler and CPU optimisations\r\n\r\n`volatile` can solve 2 &amp; 3, but can&#39;t solve 1. `synchronized`/explicit locks can solve 1, 2 &amp; 3.\r\n\r\n**Elaboration**:\r\n----------------\r\n\r\n1) Consider this thread unsafe code:\r\n\r\n`x++;` \r\n\r\nWhile it may look like one operation, it&#39;s actually 3: reading the current value of x from memory, adding 1 to it, and saving it back to memory. If few threads try to do it at the same time, the result of the operation is undefined. If `x` originally was 1, after 2 threads operating the code it may be 2 and it may be 3, depending on which thread completed which part of the operation before control was transferred to the other thread. This is a form of **race condition**. \r\n\r\nUsing `synchronized` on a block of code makes it **atomic** - meaning it make it as if the 3 operations happen at once, and there&#39;s no way for another thread to come in the middle and interfere. So if `x` was 1, and 2 threads try to preform `x++` we **know** in the end it will be equal to 3. So it solves the race condition problem. \r\n\r\n    synchronized (this) {\r\n       x++; // no problem now\r\n    }\r\n\r\nMarking `x` as `volatile` does not make `x++;` atomic, so it doesn&#39;t solve this problem.\r\n\r\n2) In addition, threads have their own context - i.e. they can cache values from main memory. That means that a few threads can have copies of a variable, but they operate on their working copy without sharing the new state of the variable among other threads. \r\n\r\nConsider that on one thread, `x = 10;`. And somewhat later, in another thread, `x = 20;`. The change in value of `x` might not appear in the first thread, because the other thread has saved the new value to its working memory, but hasn&#39;t copied it to the main memory. Or that it did copy it to the main memory, but the first thread hasn&#39;t updated its working copy. So if now the first thread checks `if (x == 20)` the answer will be `false`. \r\n\r\nMarking a variable as `volatile` basically tells all threads to do read and write operations on main memory only. `synchronized` tells every thread to go update their value from main memory when they enter the block, and flush the result back to main memory when they exit the block. \r\n\r\nNote that unlike data races, stale memory is not so easy to (re)produce, as flushes to main memory occur anyway. \r\n\r\n3) The complier and CPU can (without any form of synchronization between threads) treat all code as single threaded. Meaning it can look at some code, that is very meaningful in a multithreading aspect, and treat it as if it’s single threaded, where it’s not so meaningful. So it can look at a code and decide, in sake of optimisation, to reorder it, or even remove parts of it completely, if it doesn’t know that this code is designed to work on multiple threads.  \r\n\r\nConsider the following code:\r\n\r\n    boolean b = false;\r\n    int x = 10;\r\n    \r\n    void threadA() {\r\n    \tx = 20;\r\n    \tb = true;\r\n    }\r\n    \r\n    void threadB() {\r\n    \tif (b) {\r\n    \t\tSystem.out.println(x);\r\n    \t}\r\n    }\r\n\r\n \r\nYou would think that threadB could only print 20 (or not print anything at all if threadB if-check is executed before setting `b` to true), as `b` is set to true only after `x` is set to 20, but the compiler/CPU might decide to reorder threadA, in that case threadB could also print 10. Marking `b` as `volatile` ensures that it won’t be reordered (or discarded in certain cases). Which mean threadB could only print 20 (or nothing at all). Marking the methods as syncrhonized will achieve the same result. Also marking a variable as `volatile` only ensures that it won’t get reordered, but everything before/after it can still be reordered, so synchronization can be more suited in some scenarios.\r\n\r\nNote that before Java 5 New Memory Model, volatile didn’t solve this issue. \r\n\r\n","title":"Difference between volatile and synchronized in Java","body":"<p>There are 3 main issues with multithreading:</p>\n<ol>\n<li><p>Race Conditions</p>\n</li>\n<li><p>Caching / stale memory</p>\n</li>\n<li><p>Compiler and CPU optimisations</p>\n</li>\n</ol>\n<p><code>volatile</code> can solve 2 &amp; 3, but can't solve 1. <code>synchronized</code>/explicit locks can solve 1, 2 &amp; 3.</p>\n<h2><strong>Elaboration</strong>:</h2>\n<ol>\n<li>Consider this thread unsafe code:</li>\n</ol>\n<p><code>x++;</code></p>\n<p>While it may look like one operation, it's actually 3: reading the current value of x from memory, adding 1 to it, and saving it back to memory. If few threads try to do it at the same time, the result of the operation is undefined. If <code>x</code> originally was 1, after 2 threads operating the code it may be 2 and it may be 3, depending on which thread completed which part of the operation before control was transferred to the other thread. This is a form of <strong>race condition</strong>.</p>\n<p>Using <code>synchronized</code> on a block of code makes it <strong>atomic</strong> - meaning it make it as if the 3 operations happen at once, and there's no way for another thread to come in the middle and interfere. So if <code>x</code> was 1, and 2 threads try to preform <code>x++</code> we <strong>know</strong> in the end it will be equal to 3. So it solves the race condition problem.</p>\n<pre><code>synchronized (this) {\n   x++; // no problem now\n}\n</code></pre>\n<p>Marking <code>x</code> as <code>volatile</code> does not make <code>x++;</code> atomic, so it doesn't solve this problem.</p>\n<ol start=\"2\">\n<li>In addition, threads have their own context - i.e. they can cache values from main memory. That means that a few threads can have copies of a variable, but they operate on their working copy without sharing the new state of the variable among other threads.</li>\n</ol>\n<p>Consider that on one thread, <code>x = 10;</code>. And somewhat later, in another thread, <code>x = 20;</code>. The change in value of <code>x</code> might not appear in the first thread, because the other thread has saved the new value to its working memory, but hasn't copied it to the main memory. Or that it did copy it to the main memory, but the first thread hasn't updated its working copy. So if now the first thread checks <code>if (x == 20)</code> the answer will be <code>false</code>.</p>\n<p>Marking a variable as <code>volatile</code> basically tells all threads to do read and write operations on main memory only. <code>synchronized</code> tells every thread to go update their value from main memory when they enter the block, and flush the result back to main memory when they exit the block.</p>\n<p>Note that unlike data races, stale memory is not so easy to (re)produce, as flushes to main memory occur anyway.</p>\n<ol start=\"3\">\n<li>The complier and CPU can (without any form of synchronization between threads) treat all code as single threaded. Meaning it can look at some code, that is very meaningful in a multithreading aspect, and treat it as if it’s single threaded, where it’s not so meaningful. So it can look at a code and decide, in sake of optimisation, to reorder it, or even remove parts of it completely, if it doesn’t know that this code is designed to work on multiple threads.</li>\n</ol>\n<p>Consider the following code:</p>\n<pre><code>boolean b = false;\nint x = 10;\n\nvoid threadA() {\n    x = 20;\n    b = true;\n}\n\nvoid threadB() {\n    if (b) {\n        System.out.println(x);\n    }\n}\n</code></pre>\n<p>You would think that threadB could only print 20 (or not print anything at all if threadB if-check is executed before setting <code>b</code> to true), as <code>b</code> is set to true only after <code>x</code> is set to 20, but the compiler/CPU might decide to reorder threadA, in that case threadB could also print 10. Marking <code>b</code> as <code>volatile</code> ensures that it won’t be reordered (or discarded in certain cases). Which mean threadB could only print 20 (or nothing at all). Marking the methods as syncrhonized will achieve the same result. Also marking a variable as <code>volatile</code> only ensures that it won’t get reordered, but everything before/after it can still be reordered, so synchronization can be more suited in some scenarios.</p>\n<p>Note that before Java 5 New Memory Model, volatile didn’t solve this issue.</p>\n"}],"owner":{"account_id":141278,"reputation":12438,"user_id":348183,"accept_rate":97,"display_name":"Albus Dumbledore"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":134452,"favorite_count":0,"down_vote_count":1,"up_vote_count":307,"accepted_answer_id":3519736,"answer_count":4,"score":306,"last_activity_date":1681110174,"creation_date":1282203284,"question_id":3519664,"body_markdown":"I am wondering at the difference between declaring a variable as `volatile` and always accessing the variable in a `synchronized(this)` block in Java?\r\n\r\nAccording to this article http://www.javamex.com/tutorials/synchronization_volatile.shtml there is a lot to be said and there are many differences but also some similarities.\r\n\r\nI am particularly interested in this piece of info:\r\n\r\n&gt; ...\r\n&gt;\r\n- access to a volatile variable never has the potential to block: we&#39;re only ever doing a simple read or write, so unlike a synchronized block we will never hold on to any lock;\r\n- because accessing a volatile variable never holds a lock, it is not suitable for cases where we want to **read-update-write** as an atomic operation (unless we&#39;re prepared to &quot;miss an update&quot;);\r\n\r\nWhat do they mean by **read-update-write**? Isn&#39;t a write also an update or do they simply mean that the **update** is a write that depends on the read?\r\n\r\nMost of all, when is it more suitable to declare variables `volatile` rather than access them through a `synchronized` block? Is it a good idea to use `volatile` for variables that depend on input? For instance, there is a variable called `render` that is read through the rendering loop and set by a keypress event?","title":"Difference between volatile and synchronized in Java","body":"<p>I am wondering at the difference between declaring a variable as <code>volatile</code> and always accessing the variable in a <code>synchronized(this)</code> block in Java?</p>\n\n<p>According to this article <a href=\"http://www.javamex.com/tutorials/synchronization_volatile.shtml\" rel=\"noreferrer\">http://www.javamex.com/tutorials/synchronization_volatile.shtml</a> there is a lot to be said and there are many differences but also some similarities.</p>\n\n<p>I am particularly interested in this piece of info:</p>\n\n<blockquote>\n  <p>...</p>\n  \n  <ul>\n  <li>access to a volatile variable never has the potential to block: we're only ever doing a simple read or write, so unlike a synchronized block we will never hold on to any lock;</li>\n  <li>because accessing a volatile variable never holds a lock, it is not suitable for cases where we want to <strong>read-update-write</strong> as an atomic operation (unless we're prepared to \"miss an update\");</li>\n  </ul>\n</blockquote>\n\n<p>What do they mean by <strong>read-update-write</strong>? Isn't a write also an update or do they simply mean that the <strong>update</strong> is a write that depends on the read?</p>\n\n<p>Most of all, when is it more suitable to declare variables <code>volatile</code> rather than access them through a <code>synchronized</code> block? Is it a good idea to use <code>volatile</code> for variables that depend on input? For instance, there is a variable called <code>render</code> that is read through the rendering loop and set by a keypress event?</p>\n"},{"tags":["java","android","android-permissions"],"comments":[{"owner":{"account_id":10396927,"reputation":68267,"user_id":7666442,"display_name":"AskNilesh"},"score":1,"creation_date":1537508017,"post_id":52437112,"comment_id":91817330,"body_markdown":"https://developer.android.com/reference/android/content/Context.html#getExternalFilesDir(java.lang.String)","body":"<a href=\"https://developer.android.com/reference/android/content/Context.html#getExternalFilesDir(java.lang.String)\" rel=\"nofollow noreferrer\">developer.android.com/reference/android/content/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":6657226,"reputation":16109,"user_id":5137352,"accept_rate":89,"display_name":"Nabin Bhandari"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1537508150,"creation_date":1537507809,"answer_id":52437155,"question_id":52437112,"body_markdown":"Although it returns path to external storage, you don&#39;t need permission to access directory returned by `getExternalFilesDir()`.\r\n\r\nIt is same as `getFilesDir()` but it is public to other apps as well.\r\n\r\nAlso note that if you write anything in that directory and clear app data or uninstall the app, everything will be deleted.\r\n\r\nFor more information, read the documentation at https://developer.android.com/reference/android/content/Context.html#getExternalFilesDir(java.lang.String)","title":"getExternalFilesDir permissions","body":"<p>Although it returns path to external storage, you don't need permission to access directory returned by <code>getExternalFilesDir()</code>.</p>\n\n<p>It is same as <code>getFilesDir()</code> but it is public to other apps as well.</p>\n\n<p>Also note that if you write anything in that directory and clear app data or uninstall the app, everything will be deleted.</p>\n\n<p>For more information, read the documentation at <a href=\"https://developer.android.com/reference/android/content/Context.html#getExternalFilesDir(java.lang.String)\" rel=\"noreferrer\">https://developer.android.com/reference/android/content/Context.html#getExternalFilesDir(java.lang.String)</a></p>\n"},{"comments":[{"owner":{"account_id":10875141,"reputation":2530,"user_id":8199772,"accept_rate":55,"display_name":"ClassA"},"score":0,"creation_date":1537508187,"post_id":52437162,"comment_id":91817388,"body_markdown":"I&#39;m sorry but this doesn&#39;t answer my question. I know how to ask for permissions, but that was not my question.","body":"I&#39;m sorry but this doesn&#39;t answer my question. I know how to ask for permissions, but that was not my question."}],"tags":[],"owner":{"account_id":14279418,"reputation":215,"user_id":10314536,"display_name":"Archu Mohan"},"comment_count":1,"down_vote_count":4,"up_vote_count":0,"is_accepted":false,"score":-4,"last_activity_date":1537507838,"creation_date":1537507838,"answer_id":52437162,"question_id":52437112,"body_markdown":"    String[] permissions = {Manifest.permission.WRITE_EXTERNAL_STORAGE};\r\n    requestPermissions(permissions, WRITE_REQUEST_CODE);\r\n\r\n use this code\r\n\r\n  \r\n\r\n    @Override\r\n    public void onRequestPermissionsResult(int requestCode, String permissions[], int[] \r\n    grantResults) {\r\n    switch (requestCode) {\r\n       case WRITE_REQUEST_CODE:\r\n         if(grantResults[0] == PackageManager.PERMISSION_GRANTED){\r\n           //Granted.\r\n\r\n\r\n         }\r\n       else{\r\n           //Denied.\r\n         }\r\n        break;\r\n    }\r\n    }","title":"getExternalFilesDir permissions","body":"<pre><code>String[] permissions = {Manifest.permission.WRITE_EXTERNAL_STORAGE};\nrequestPermissions(permissions, WRITE_REQUEST_CODE);\n</code></pre>\n\n<p>use this code</p>\n\n<pre><code>@Override\npublic void onRequestPermissionsResult(int requestCode, String permissions[], int[] \ngrantResults) {\nswitch (requestCode) {\n   case WRITE_REQUEST_CODE:\n     if(grantResults[0] == PackageManager.PERMISSION_GRANTED){\n       //Granted.\n\n\n     }\n   else{\n       //Denied.\n     }\n    break;\n}\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7359103,"reputation":449,"user_id":5602887,"display_name":"Xt Z"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681110159,"creation_date":1681110159,"answer_id":75974959,"question_id":52437112,"body_markdown":"not need ask runtime permission, but if your app&#39;s minSdkVersion less then 19 and you need write to getExternalFilesDir() path , you need declare WRITE_EXTERNAL_STORAGE in your AndroidManifest.xml\r\n\r\ncheck this :https://developer.android.com/reference/android/Manifest.permission#WRITE_EXTERNAL_STORAGE","title":"getExternalFilesDir permissions","body":"<p>not need ask runtime permission, but if your app's minSdkVersion less then 19 and you need write to getExternalFilesDir() path , you need declare WRITE_EXTERNAL_STORAGE in your AndroidManifest.xml</p>\n<p>check this :<a href=\"https://developer.android.com/reference/android/Manifest.permission#WRITE_EXTERNAL_STORAGE\" rel=\"nofollow noreferrer\">https://developer.android.com/reference/android/Manifest.permission#WRITE_EXTERNAL_STORAGE</a></p>\n"}],"owner":{"account_id":10875141,"reputation":2530,"user_id":8199772,"accept_rate":55,"display_name":"ClassA"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3616,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":52437155,"answer_count":3,"score":8,"last_activity_date":1681110159,"creation_date":1537507534,"question_id":52437112,"body_markdown":"My application is live on Play Store, I noticed that I was not asking permissions when calling:\r\n\r\n    File savedImagesDirectory = getBaseContext.getExternalFilesDir(&quot;SavedImages&quot;);\r\n    if(savedImagesDirectory != null) {\r\n        if (!savedImagesDirectory.exists()) {\r\n            if (savedImagesDirectory.mkdir()) ; //directory is created;\r\n        }\r\n    }\r\n\r\nStrange thing is, I&#39;m not getting any crashes when calling this without runtime permissions. I tested on my device running Nougat and the files are created and I experienced no crashes.\r\n\r\nI only have permissions in my Manifest, but I don&#39;t ask runtime permissions.\r\n\r\nI&#39;ve seen A LOT of answers on SO that say that runtime permissions should be asked when creating a folder/file in external file directory.\r\n\r\n\r\n----------\r\n\r\n\r\n**My question:**\r\n\r\nShould I ask runtime permissions when calling the above? If yes, why am I not experiencing any crashes? \r\n\r\nIt would also be helpful if someone can provide a link where I can read up about this.","title":"getExternalFilesDir permissions","body":"<p>My application is live on Play Store, I noticed that I was not asking permissions when calling:</p>\n\n<pre><code>File savedImagesDirectory = getBaseContext.getExternalFilesDir(\"SavedImages\");\nif(savedImagesDirectory != null) {\n    if (!savedImagesDirectory.exists()) {\n        if (savedImagesDirectory.mkdir()) ; //directory is created;\n    }\n}\n</code></pre>\n\n<p>Strange thing is, I'm not getting any crashes when calling this without runtime permissions. I tested on my device running Nougat and the files are created and I experienced no crashes.</p>\n\n<p>I only have permissions in my Manifest, but I don't ask runtime permissions.</p>\n\n<p>I've seen A LOT of answers on SO that say that runtime permissions should be asked when creating a folder/file in external file directory.</p>\n\n<hr>\n\n<p><strong>My question:</strong></p>\n\n<p>Should I ask runtime permissions when calling the above? If yes, why am I not experiencing any crashes? </p>\n\n<p>It would also be helpful if someone can provide a link where I can read up about this.</p>\n"},{"tags":["java","hadoop","mapreduce"],"comments":[{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1681109016,"post_id":75974496,"comment_id":133999527,"body_markdown":"You seem to be missing your Driver class and sample of your input data. Refer [mcve]","body":"You seem to be missing your Driver class and sample of your input data. Refer <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"},{"owner":{"account_id":8324450,"reputation":17075,"user_id":6933993,"accept_rate":97,"display_name":"thebluephantom"},"score":0,"creation_date":1681123659,"post_id":75974496,"comment_id":134001738,"body_markdown":"May be move to Spark and make life easier.","body":"May be move to Spark and make life easier."}],"answers":[{"comments":[{"owner":{"account_id":21130232,"reputation":27,"user_id":15534758,"display_name":"wirly"},"score":0,"creation_date":1681114611,"post_id":75974861,"comment_id":134000291,"body_markdown":"Hi @OneCricketeer thanks so much for your answer!  You cleared up a lot of how MapReduce was working for me and got it all implemented now.   However, in my testing it would appear that by only having a single reducer you are able to save intermittent values between keys.  This appears to be consistent with KaiZhao&#39;s answer here [too](https://stackoverflow.com/questions/10889152/setup-and-cleanup-methods-of-mapper-reducer-in-hadoop-mapreduce).  Might I be misinterpreting something?","body":"Hi @OneCricketeer thanks so much for your answer!  You cleared up a lot of how MapReduce was working for me and got it all implemented now.   However, in my testing it would appear that by only having a single reducer you are able to save intermittent values between keys.  This appears to be consistent with KaiZhao&#39;s answer here <a href=\"https://stackoverflow.com/questions/10889152/setup-and-cleanup-methods-of-mapper-reducer-in-hadoop-mapreduce\">too</a>.  Might I be misinterpreting something?"},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":1,"creation_date":1681115187,"post_id":75974861,"comment_id":134000373,"body_markdown":"You should only force all data to one reducer if you have one key (e.g. null). Otherwise, there really is no point to using mapreduce as you&#39;re not distributing your dataset","body":"You should only force all data to one reducer if you have one key (e.g. null). Otherwise, there really is no point to using mapreduce as you&#39;re not distributing your dataset"}],"tags":[],"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681110025,"creation_date":1681109207,"answer_id":75974861,"question_id":75974496,"body_markdown":"Reducers are distributed, so cannot be used to store state between each instance, such as a Map. More particularly, notice that `key` parameter is one instance - you get one Reducer class instance per unique key; not all keys are passed through that one instance function. \r\n\r\nYou can use Hadoop `DistributedCache` or `Counter` for maintaining some state across tasks, but you should already have all values from the same ID in a single `Iterable&lt;Text&gt;` object. E.g. all reviews (with star count) by-id. Therefore, filter by `value.getStars() == 5`. (Look into defining a Writable `Movie` class, rather than using `Text`), then define a simple counter, e.g.\r\n```\r\nint fiveStarCount = 0;\r\nfor (Text t : values) {\r\n  // todo: get stars\r\n  fiveStarCount += parseStars(t) == 5 ? 1 : 0;\r\n}\r\nif (fiveStarCount &gt;= 500) {\r\n  context.write(movieId, NullWritable.get());  // assuming you only care about the movie id\r\n}\r\n```\r\n\r\nThen, there is nothing to sort here... You need a second MapReduce job to read that output, then you write `(null,id)` tuples, then the reducer can sort the value by dumping all data into something like `TreeSet` object and writing back to the context. \r\n\r\n---\r\n\r\nIf you really need to filter, join, and sort, I&#39;d recommend Hive or Spark over pure Mapreduce","title":"Why is My MapReduce job Not Counting Correctly?","body":"<p>Reducers are distributed, so cannot be used to store state between each instance, such as a Map. More particularly, notice that <code>key</code> parameter is one instance - you get one Reducer class instance per unique key; not all keys are passed through that one instance function.</p>\n<p>You can use Hadoop <code>DistributedCache</code> or <code>Counter</code> for maintaining some state across tasks, but you should already have all values from the same ID in a single <code>Iterable&lt;Text&gt;</code> object. E.g. all reviews (with star count) by-id. Therefore, filter by <code>value.getStars() == 5</code>. (Look into defining a Writable <code>Movie</code> class, rather than using <code>Text</code>), then define a simple counter, e.g.</p>\n<pre><code>int fiveStarCount = 0;\nfor (Text t : values) {\n  // todo: get stars\n  fiveStarCount += parseStars(t) == 5 ? 1 : 0;\n}\nif (fiveStarCount &gt;= 500) {\n  context.write(movieId, NullWritable.get());  // assuming you only care about the movie id\n}\n</code></pre>\n<p>Then, there is nothing to sort here... You need a second MapReduce job to read that output, then you write <code>(null,id)</code> tuples, then the reducer can sort the value by dumping all data into something like <code>TreeSet</code> object and writing back to the context.</p>\n<hr />\n<p>If you really need to filter, join, and sort, I'd recommend Hive or Spark over pure Mapreduce</p>\n"}],"owner":{"account_id":21130232,"reputation":27,"user_id":15534758,"display_name":"wirly"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681110025,"creation_date":1681104651,"question_id":75974496,"body_markdown":"I am currently writing a MapReduce task to parse through a dataset and list movies that have 500+ 5-star ratings.\r\n\r\nTo do this, I already have a mapreduce jobs that filter action movies from a list of movies, and one that filters 5-star reviews for movies.  The inputs to this new job, and to each mapper, is a list of movieIDS.\r\n\r\nThe input to the first mapper is a list of MovieIDS that are applicable to be counted FOR.  And the input to the second mapper is a movieID that has gotten a single 5-star review.\r\n\r\nMy task is then to join these in the reducer, by counting the number of 5-star reviews a particular movie (key) has gotten, seeing if it has gotten a total of 500 reviews, and then seeing if that particular movie has been filtered in the list of applicable movies.\r\n\r\nMy problem, however, is that the HashMap data structure I&#39;m using to count the number of 5-star reviews for a particular movie ID is only ever initialized to one.\r\n\r\nHere is the code:\r\n\r\n    public class JoinRatings extends Configured implements Tool {\r\n\tpublic static class TokenizerMapperA extends Mapper&lt;Object, Text, Text, Text&gt; {\r\n\t\tprivate Text node1;\r\n\t\tprivate Text node2 = new Text(&quot;1&quot;);\r\n\r\n\t\t@Override\r\n\t\tprotected void map(Object key, Text value, Context context) throws IOException, InterruptedException {\r\n\t\t\t//Write movie ID and int writeable 1\r\n\t\t\tnode1 = new Text(value.toString());\r\n\t\t\tcontext.write(node1, node2);\r\n\t\t}\r\n\t}\r\n\tpublic static class TokenizerMapperB extends Mapper&lt;Object, Text, Text, Text&gt; {\r\n\t\tprivate Text node1;\r\n\t\tprivate Text node2 = new Text(&quot;2&quot;);\r\n\r\n\t\t@Override\r\n\t\tprotected void map(Object key, Text value, Context context) throws IOException, InterruptedException {\r\n\t\t\tnode1 = new Text(value.toString());\r\n\t\t\tcontext.write(node1, node2);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic static class CountReducer extends Reducer&lt;Text, Text, Text, NullWritable&gt;{\r\n\t\tprivate Text node1;\r\n\t\tprivate Set&lt;String&gt; distinctNodes;\r\n\t\tMap&lt;String, Integer&gt; map;\r\n\t\tprivate final static IntWritable one = new IntWritable(1);\r\n\t\tprivate final static IntWritable two = new IntWritable(2);\r\n\r\n\t\t@Override\r\n\t\tprotected void setup(Context context) {\r\n\t\t\tdistinctNodes = new HashSet&lt;String&gt;(); \r\n\t\t\tmap = new HashMap&lt;String,Integer&gt;();\r\n\t\t }\r\n\r\n\t\t @Override\r\n\t\t protected void reduce(Text key, Iterable&lt;Text&gt; values, Context context) {\r\n\t\t\t//Add all action movie IDs to unique set distinctNodes\r\n\t\t\tString keyString = key.toString().strip();\r\n\t\t\tString valueString = &quot;NULL&quot;;\r\n\t\t\tint counter = 0\r\n\r\n\t\t\t\tfor (Text text : values) {\r\n\t\t\t\t\tString value = text.toString().strip();\r\n\r\n\t\t\t\t\t\t// try {\r\n\t\t\t\t\t\t// \tText testText = new Text(value);\r\n\t\t\t\t\t\t// \tcontext.write(testText, NullWritable.get());\r\n\t\t\t\t\t\t// } catch (IOException e) {\r\n\t\t\t\t\t\t// \te.printStackTrace();\r\n\t\t\t\t\t\t// } catch (InterruptedException e) {\r\n\t\t\t\t\t\t// \te.printStackTrace();\r\n\t\t\t\t\t\t// }\r\n\r\n\t\t\t\t\tif (value.equals(&quot;1&quot;)) {\r\n\t\t\t\t\t\tdistinctNodes.add(keyString);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (value.equals(&quot;2&quot;)) {\r\n\t\t\t\t\t\tif (map.containsKey(keyString)) {\r\n\t\t\t\t\t\t\tmap.put(keyString, map.get(keyString) + 1);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tmap.put(keyString, 1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\r\n\t\t }\r\n\r\n\t\t @Override\r\n\t\t protected void cleanup(Context context) throws IOException, InterruptedException {\r\n\r\n\t\t\tString numOfDistinctNodes = Integer.toString(distinctNodes.size());\r\n\t\t\tcontext.write(new Text(numOfDistinctNodes), NullWritable.get());\r\n\t\t\tString sizeOfMap = Integer.toString(map.size());\r\n\t\t\tcontext.write(new Text(sizeOfMap), NullWritable.get());\r\n\r\n\r\n\t\t\tfor(Map.Entry&lt;String, Integer&gt; mapElement : map.entrySet()) {\r\n\t\t\t\t\tString test = Integer.toString(mapElement.getValue());\r\n\t\t\t\t\tcontext.write(new Text(test), NullWritable.get());\r\n\t\t\t}\r\n\r\n\t\t\tfor (String s: distinct nodes) {\r\n\t\t\t\tif (map.containsKey(s)) {\r\n\t\t\t\t\tif (map.get(s) &gt;= 500) {\r\n\t\t\t\t\t\tnode1 = new Text(s);\r\n\t\t\t\t\t\tcontext.write(node1, NullWritable.get());\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//Order movieID by ascending\r\n\r\n\t\t\t//Write all movie IDs with 500+ 5-star reviews (to context)\r\n\t\t }\r\n\t}\r\n\r\nAs you can see I am using a Text value from the mappers to distinguish between which data-structure the reducer should be adding to.  This seems to work well for Text &quot;1&quot;, which is adding applicable movies the 5 star ratings can count towards to a HashSet, but my HashMap is not counting the number of 5 star reviews for a particular key/MovieID, only ever initializing values to 1.\r\n\r\nMy inclination is that I&#39;m using MapReduce incorrectly, and that the reducer is getting only a single input of {MovieID, 2}, instead of {MovieID, 2, 2, 2, 2}.  \r\n","title":"Why is My MapReduce job Not Counting Correctly?","body":"<p>I am currently writing a MapReduce task to parse through a dataset and list movies that have 500+ 5-star ratings.</p>\n<p>To do this, I already have a mapreduce jobs that filter action movies from a list of movies, and one that filters 5-star reviews for movies.  The inputs to this new job, and to each mapper, is a list of movieIDS.</p>\n<p>The input to the first mapper is a list of MovieIDS that are applicable to be counted FOR.  And the input to the second mapper is a movieID that has gotten a single 5-star review.</p>\n<p>My task is then to join these in the reducer, by counting the number of 5-star reviews a particular movie (key) has gotten, seeing if it has gotten a total of 500 reviews, and then seeing if that particular movie has been filtered in the list of applicable movies.</p>\n<p>My problem, however, is that the HashMap data structure I'm using to count the number of 5-star reviews for a particular movie ID is only ever initialized to one.</p>\n<p>Here is the code:</p>\n<pre><code>public class JoinRatings extends Configured implements Tool {\npublic static class TokenizerMapperA extends Mapper&lt;Object, Text, Text, Text&gt; {\n    private Text node1;\n    private Text node2 = new Text(&quot;1&quot;);\n\n    @Override\n    protected void map(Object key, Text value, Context context) throws IOException, InterruptedException {\n        //Write movie ID and int writeable 1\n        node1 = new Text(value.toString());\n        context.write(node1, node2);\n    }\n}\npublic static class TokenizerMapperB extends Mapper&lt;Object, Text, Text, Text&gt; {\n    private Text node1;\n    private Text node2 = new Text(&quot;2&quot;);\n\n    @Override\n    protected void map(Object key, Text value, Context context) throws IOException, InterruptedException {\n        node1 = new Text(value.toString());\n        context.write(node1, node2);\n    }\n}\n\npublic static class CountReducer extends Reducer&lt;Text, Text, Text, NullWritable&gt;{\n    private Text node1;\n    private Set&lt;String&gt; distinctNodes;\n    Map&lt;String, Integer&gt; map;\n    private final static IntWritable one = new IntWritable(1);\n    private final static IntWritable two = new IntWritable(2);\n\n    @Override\n    protected void setup(Context context) {\n        distinctNodes = new HashSet&lt;String&gt;(); \n        map = new HashMap&lt;String,Integer&gt;();\n     }\n\n     @Override\n     protected void reduce(Text key, Iterable&lt;Text&gt; values, Context context) {\n        //Add all action movie IDs to unique set distinctNodes\n        String keyString = key.toString().strip();\n        String valueString = &quot;NULL&quot;;\n        int counter = 0\n\n            for (Text text : values) {\n                String value = text.toString().strip();\n\n                    // try {\n                    //  Text testText = new Text(value);\n                    //  context.write(testText, NullWritable.get());\n                    // } catch (IOException e) {\n                    //  e.printStackTrace();\n                    // } catch (InterruptedException e) {\n                    //  e.printStackTrace();\n                    // }\n\n                if (value.equals(&quot;1&quot;)) {\n                    distinctNodes.add(keyString);\n                }\n                else if (value.equals(&quot;2&quot;)) {\n                    if (map.containsKey(keyString)) {\n                        map.put(keyString, map.get(keyString) + 1);\n                    } else {\n                        map.put(keyString, 1);\n                    }\n                }\n            }\n\n\n    \n     }\n\n     @Override\n     protected void cleanup(Context context) throws IOException, InterruptedException {\n\n        String numOfDistinctNodes = Integer.toString(distinctNodes.size());\n        context.write(new Text(numOfDistinctNodes), NullWritable.get());\n        String sizeOfMap = Integer.toString(map.size());\n        context.write(new Text(sizeOfMap), NullWritable.get());\n\n\n        for(Map.Entry&lt;String, Integer&gt; mapElement : map.entrySet()) {\n                String test = Integer.toString(mapElement.getValue());\n                context.write(new Text(test), NullWritable.get());\n        }\n\n        for (String s: distinct nodes) {\n            if (map.containsKey(s)) {\n                if (map.get(s) &gt;= 500) {\n                    node1 = new Text(s);\n                    context.write(node1, NullWritable.get());\n                }\n            }\n        }\n        \n        //Order movieID by ascending\n\n        //Write all movie IDs with 500+ 5-star reviews (to context)\n     }\n}\n</code></pre>\n<p>As you can see I am using a Text value from the mappers to distinguish between which data-structure the reducer should be adding to.  This seems to work well for Text &quot;1&quot;, which is adding applicable movies the 5 star ratings can count towards to a HashSet, but my HashMap is not counting the number of 5 star reviews for a particular key/MovieID, only ever initializing values to 1.</p>\n<p>My inclination is that I'm using MapReduce incorrectly, and that the reducer is getting only a single input of {MovieID, 2}, instead of {MovieID, 2, 2, 2, 2}.</p>\n"},{"tags":["java","spring-boot","oauth-2.0"],"owner":{"account_id":25757934,"reputation":23,"user_id":19509326,"display_name":"AndyTingWeiYang"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681109639,"creation_date":1681109170,"question_id":75974857,"body_markdown":"Couldn&#39;t get the tokenValue from Google login\r\n\r\nI&#39;m trying to use oAuth login through Google and successfully get the OAuth2AuthenticationToken from Google. Please see below picture.\r\n\r\nI would like to save the token value into Redis to keep the login status in my website. However, I couldn&#39;t find the method to retrieve the tokenValue in the Principal &gt; idToken. Is there any method to get it?\r\n\r\n\r\n[![OAuth2AuthenticationToken from Google](https://i.stack.imgur.com/yt1BL.png)](https://i.stack.imgur.com/yt1BL.png)\r\n\r\n\r\nController\r\n\r\n`@RestController\r\n@RequestMapping(&quot;/&quot;)\r\npublic class LoginController {\r\n\r\n    @GetMapping\r\n    public Map&lt;String, Object&gt; login(OAuth2AuthenticationToken token){\r\n        return token.getPrincipal().getAttributes();\r\n    }\r\n\r\n}`","title":"How to get oAuth2 tokenValue from Google login","body":"<p>Couldn't get the tokenValue from Google login</p>\n<p>I'm trying to use oAuth login through Google and successfully get the OAuth2AuthenticationToken from Google. Please see below picture.</p>\n<p>I would like to save the token value into Redis to keep the login status in my website. However, I couldn't find the method to retrieve the tokenValue in the Principal &gt; idToken. Is there any method to get it?</p>\n<p><a href=\"https://i.stack.imgur.com/yt1BL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yt1BL.png\" alt=\"OAuth2AuthenticationToken from Google\" /></a></p>\n<p>Controller</p>\n<p>`@RestController\n@RequestMapping(&quot;/&quot;)\npublic class LoginController {</p>\n<pre><code>@GetMapping\npublic Map&lt;String, Object&gt; login(OAuth2AuthenticationToken token){\n    return token.getPrincipal().getAttributes();\n}\n</code></pre>\n<p>}`</p>\n"},{"tags":["java","garbage-collection"],"comments":[{"owner":{"account_id":6104455,"reputation":4456,"user_id":4762502,"accept_rate":73,"display_name":"Gaurav Jeswani"},"score":0,"creation_date":1681108931,"post_id":75974815,"comment_id":133999512,"body_markdown":"GC is totally dependent on your JVM. You have no control on this.","body":"GC is totally dependent on your JVM. You have no control on this."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1681109332,"post_id":75974815,"comment_id":133999570,"body_markdown":"Maybe there is another memory leak.  Maybe your application is simply generating excessive garbage.  (And when you say *&quot;... way more than ...&quot;*, can you be more precise?)","body":"Maybe there is another memory leak.  Maybe your application is simply generating excessive garbage.  (And when you say <i>&quot;... way more than ...&quot;</i>, can you be more precise?)"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1681109421,"post_id":75974815,"comment_id":133999587,"body_markdown":"What exactly do you mean by &quot;going wrong&quot;? What behaviour do you expect?","body":"What exactly do you mean by &quot;going wrong&quot;? What behaviour do you expect?"},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1681109486,"post_id":75974815,"comment_id":133999596,"body_markdown":"Don&#39;t link to information in a git repo like that.  As soon as you delete the repo containing the logs, your question makes no sense.  Information that is relevant to the question should be &gt;in the question&lt;.","body":"Don&#39;t link to information in a git repo like that.  As soon as you delete the repo containing the logs, your question makes no sense.  Information that is relevant to the question should be &gt;in the question&lt;."},{"owner":{"account_id":9132976,"reputation":69,"user_id":6793827,"display_name":"P K"},"score":0,"creation_date":1681109873,"post_id":75974815,"comment_id":133999634,"body_markdown":"Added more information to the question @StephenC","body":"Added more information to the question @StephenC"},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1681109919,"post_id":75974815,"comment_id":133999642,"body_markdown":"After briefly scanning the logs, I don&#39;t think there is anything &quot;wrong&quot; here.  This *appears to be* a simple case of an application generating a lot of garbage.  That leads to lots of young gen GCs and occasional old gen GCs to deal with tenured objects.  If you want to fix this:  1) look for more storage leaks, 2) look for ways (i.e. application algorithm changes) to reduce the rate of garbage generation and 3) look for ways to reduce the total amount / number of reachable (non-leaking) objects.","body":"After briefly scanning the logs, I don&#39;t think there is anything &quot;wrong&quot; here.  This <i>appears to be</i> a simple case of an application generating a lot of garbage.  That leads to lots of young gen GCs and occasional old gen GCs to deal with tenured objects.  If you want to fix this:  1) look for more storage leaks, 2) look for ways (i.e. application algorithm changes) to reduce the rate of garbage generation and 3) look for ways to reduce the total amount / number of reachable (non-leaking) objects."},{"owner":{"account_id":9132976,"reputation":69,"user_id":6793827,"display_name":"P K"},"score":0,"creation_date":1681110601,"post_id":75974815,"comment_id":133999736,"body_markdown":"@StephenC the amount of garbage per second after the restart is not more than before. If you look closely in the GC log before restart the young gen sizes are bigger before a minor GC whereas they are happening at smaller sizes and taking more time later. This is my worry. I worked on this application for the past year trying to reduce the garbage and this is the best till date. Unfortunately it is turning out to be too expensive in terms of garbage and resource consumption","body":"@StephenC the amount of garbage per second after the restart is not more than before. If you look closely in the GC log before restart the young gen sizes are bigger before a minor GC whereas they are happening at smaller sizes and taking more time later. This is my worry. I worked on this application for the past year trying to reduce the garbage and this is the best till date. Unfortunately it is turning out to be too expensive in terms of garbage and resource consumption"},{"owner":{"account_id":9132976,"reputation":69,"user_id":6793827,"display_name":"P K"},"score":0,"creation_date":1681110914,"post_id":75974815,"comment_id":133999776,"body_markdown":"@StephenC my worry is that the GCs will start happening all the time after some time rendering the app unresponsive. This is what happens when there is a mem leak but a mem leak makes the old gen grow which I don’t see here.","body":"@StephenC my worry is that the GCs will start happening all the time after some time rendering the app unresponsive. This is what happens when there is a mem leak but a mem leak makes the old gen grow which I don’t see here."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1681110969,"post_id":75974815,"comment_id":133999781,"body_markdown":"There is not enough information on what precisely you have changed.  For instance, you must have done something to cause 1) the new space to be smaller and 2) more objects to be retained in the old space.  As to your broader problem, we can&#39;t advise you how to tune an application based on zero information about the application, what it does, and how it is implemented.  My advice would be to hire a consultant ...","body":"There is not enough information on what precisely you have changed.  For instance, you must have done something to cause 1) the new space to be smaller and 2) more objects to be retained in the old space.  As to your broader problem, we can&#39;t advise you how to tune an application based on zero information about the application, what it does, and how it is implemented.  My advice would be to hire a consultant ..."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1681111113,"post_id":75974815,"comment_id":133999795,"body_markdown":"But if you are *actually* worrying about response times, try switching to G1GC or maybe ZGC; i.e. a low pause GC.","body":"But if you are <i>actually</i> worrying about response times, try switching to G1GC or maybe ZGC; i.e. a low pause GC."},{"owner":{"account_id":9132976,"reputation":69,"user_id":6793827,"display_name":"P K"},"score":0,"creation_date":1681270365,"post_id":75974815,"comment_id":134027761,"body_markdown":"@StephenC Hiring a consultant is going to pretty difficult. I did try G1GC with defaults and it led to frequent GCs. The eden space was not growing enough (~2GB) leading to frequent GCs and also the old gen kept stable. This led to the slowdown of the app. I then tried the following params  as suggested as basic tuning on Redhat&#39;s GC guide and I saw increase eden and old gen but the performance of the app is still not up to the mark. I will keep you posted","body":"@StephenC Hiring a consultant is going to pretty difficult. I did try G1GC with defaults and it led to frequent GCs. The eden space was not growing enough (~2GB) leading to frequent GCs and also the old gen kept stable. This led to the slowdown of the app. I then tried the following params  as suggested as basic tuning on Redhat&#39;s GC guide and I saw increase eden and old gen but the performance of the app is still not up to the mark. I will keep you posted"},{"owner":{"account_id":9132976,"reputation":69,"user_id":6793827,"display_name":"P K"},"score":0,"creation_date":1681270374,"post_id":75974815,"comment_id":134027762,"body_markdown":"@StephenC (-Xms40960m -Xmx40960m -XX:+AlwaysPreTouch -XX:+UseG1GC -Dinactivity.days.to.expiry=60 -agentpath:/dasd/share/yourkit-2021.3-b231/bin/linux-x86-64/libyjpagent.so=port=10001,listen=all,telemetrylimit=1 -XX:+PrintGCDetails -XX:+PrintGCDateStamps -Xloggc:/logs/ade_gc.log -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/logs/heap_dump.bin -XX:MaxGCPauseMillis=500 -XX:ParallelGCThreads=20 -XX:ConcGCThreads=5 -XX:InitiatingHeapOccupancyPercent=70)","body":"@StephenC (-Xms40960m -Xmx40960m -XX:+AlwaysPreTouch -XX:+UseG1GC -Dinactivity.days.to.expiry=60 -agentpath:/dasd/share/yourkit-2021.3-b231/bin/linux-x86-64/&zwnj;&#8203;libyjpagent.so=port=&zwnj;&#8203;10001,listen=all,tel&zwnj;&#8203;emetrylimit=1 -XX:+PrintGCDetails -XX:+PrintGCDateStamps -Xloggc:/logs/ade_gc.log -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/logs/heap_dump.bin -XX:MaxGCPauseMillis=500 -XX:ParallelGCThreads=20 -XX:ConcGCThreads=5 -XX:InitiatingHeapOccupancyPercent=70)"},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1681271359,"post_id":75974815,"comment_id":134027851,"body_markdown":"Frequent GCs is not the real problem.  The problem you are trying to avoid is long or uneven response times.  But if the long responses are actually due to your application generating too much garbage, then GC tuning is not going to help.  You need to fix the application.  Or get faster hardware.","body":"Frequent GCs is not the real problem.  The problem you are trying to avoid is long or uneven response times.  But if the long responses are actually due to your application generating too much garbage, then GC tuning is not going to help.  You need to fix the application.  Or get faster hardware."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1681280416,"post_id":75974815,"comment_id":134028964,"body_markdown":"*&quot;Hiring a consultant is going to pretty difficult&quot;* - The flip side is that spending another a year trying to get your application to go faster will also be pretty difficult ... to explain to your boss or client or whoever is waiting for your project completion. (I assume you are doing this because the application&#39;s performance actually matters ... to them.)","body":"<i>&quot;Hiring a consultant is going to pretty difficult&quot;</i> - The flip side is that spending another a year trying to get your application to go faster will also be pretty difficult ... to explain to your boss or client or whoever is waiting for your project completion. (I assume you are doing this because the application&#39;s performance actually matters ... to them.)"}],"owner":{"account_id":9132976,"reputation":69,"user_id":6793827,"display_name":"P K"},"comment_count":14,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681109531,"creation_date":1681108711,"question_id":75974815,"body_markdown":"My application is doing frequent Major GCs after a restart and both Minor and Major GCs are happening more frequently as well as the GC times have increased significantly especially the minor GC times. I&#39;m unable to understand why this is happening. Even though the xmx (40GB) is way more than the current consumption (12GB to 28GB) the GCs are happening more frequently. Please guide me on what could be going wrong. There was a memory leak and I fixed it but now this is something I really don&#39;t understand. \r\n\r\nBefore restart:\r\n[![enter image description here][1]][1]\r\n[![enter image description here][2]][2]\r\n\r\nAfter restart:\r\n[![enter image description here][3]][3]\r\n[![enter image description here][4]][4] Following are the JAVA_OPTIONS:\r\n```\r\nopenjdk version &quot;1.8.0_362&quot;\r\nOpenJDK Runtime Environment (build 1.8.0_362-b08)\r\nOpenJDK 64-Bit Server VM (build 25.362-b08, mixed mode)\r\n```\r\n\r\n```\r\n-XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/logs/heap_dump.bin -XX:InitialHeapSize=268435456 -XX:MaxHeapFreeRatio=70 -XX:MaxHeapSize=42949672960 -XX:MinHeapFreeRatio=10 -XX:+PrintGC -XX:+PrintGCDateStamps -XX:+PrintGCDetails -XX:+PrintGCTimeStamps -XX:+UseParallelGC \r\n```\r\nPlease find the GC logs here - https://github.com/kprateek777/gc\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/epCqq.png\r\n  [2]: https://i.stack.imgur.com/nAXOj.png\r\n  [3]: https://i.stack.imgur.com/Gj290.png\r\n  [4]: https://i.stack.imgur.com/LXgNR.png","title":"java application doing frequent major GCs though xmx is yet to reach","body":"<p>My application is doing frequent Major GCs after a restart and both Minor and Major GCs are happening more frequently as well as the GC times have increased significantly especially the minor GC times. I'm unable to understand why this is happening. Even though the xmx (40GB) is way more than the current consumption (12GB to 28GB) the GCs are happening more frequently. Please guide me on what could be going wrong. There was a memory leak and I fixed it but now this is something I really don't understand.</p>\n<p>Before restart:\n<a href=\"https://i.stack.imgur.com/epCqq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/epCqq.png\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.stack.imgur.com/nAXOj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nAXOj.png\" alt=\"enter image description here\" /></a></p>\n<p>After restart:\n<a href=\"https://i.stack.imgur.com/Gj290.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Gj290.png\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.stack.imgur.com/LXgNR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LXgNR.png\" alt=\"enter image description here\" /></a> Following are the JAVA_OPTIONS:</p>\n<pre><code>openjdk version &quot;1.8.0_362&quot;\nOpenJDK Runtime Environment (build 1.8.0_362-b08)\nOpenJDK 64-Bit Server VM (build 25.362-b08, mixed mode)\n</code></pre>\n<pre><code>-XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/logs/heap_dump.bin -XX:InitialHeapSize=268435456 -XX:MaxHeapFreeRatio=70 -XX:MaxHeapSize=42949672960 -XX:MinHeapFreeRatio=10 -XX:+PrintGC -XX:+PrintGCDateStamps -XX:+PrintGCDetails -XX:+PrintGCTimeStamps -XX:+UseParallelGC \n</code></pre>\n<p>Please find the GC logs here - <a href=\"https://github.com/kprateek777/gc\" rel=\"nofollow noreferrer\">https://github.com/kprateek777/gc</a></p>\n"},{"tags":["java","sql","jpa"],"comments":[{"owner":{"account_id":15138451,"reputation":460,"user_id":12083015,"display_name":"Erwin"},"score":1,"creation_date":1681110509,"post_id":75974869,"comment_id":133999721,"body_markdown":"check [this](https://stackoverflow.com/a/12459909/12083015)","body":"check <a href=\"https://stackoverflow.com/a/12459909/12083015\">this</a>"},{"owner":{"account_id":22866981,"reputation":131,"user_id":17010647,"display_name":"Ksu"},"score":1,"creation_date":1681118225,"post_id":75974869,"comment_id":134000832,"body_markdown":"https://stackoverflow.com/questions/12459779/query-specified-join-fetching-but-the-owner-of-the-fetched-association-was-not","body":"<a href=\"https://stackoverflow.com/questions/12459779/query-specified-join-fetching-but-the-owner-of-the-fetched-association-was-not\" title=\"query specified join fetching but the owner of the fetched association was not\">stackoverflow.com/questions/12459779/&hellip;</a>"}],"owner":{"account_id":2174240,"reputation":1419,"user_id":1925356,"accept_rate":33,"display_name":"Alex Mi"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681109306,"creation_date":1681109306,"question_id":75974869,"body_markdown":"I would like to create a JPA query that selects all entities matching some conditions, but I receive an error.\r\n\r\nMy select is:\r\n\r\n     select count(*) from Employee emplWithLicence  JOIN FETCH emplWithLicence.firma fa JOIN FETCH emplWithLicence.user userWithLicence JOIN FETCH userWithLicence.contact ctc LEFT OUTER JOIN FETCH userWithLicence.licence lice where userWithLicence.active = true and emplWithLicence.firma.name like &#39;Be%&#39; \r\n\r\nIn the future more conditions may come to the where clause, but this should not change my logic. Now, when I try to execute the logic above I receive the error below:\r\n\r\n    Caused by: org.hibernate.QueryException: query specified join fetching, but the owner of the fetched association was not present in the select list [FromElement{explicit,not a collection join,fetch join,fetch non-lazy properties,classAlias=fa,role=at.home.digest.model.dave.Employee.firma,tableName=firma,tableAlias=firma1_,origin=empl employee0_,columns={employee0_.firma_id ,className=at.home.digest.model.dave.Firma}}]\r\n\tat org.hibernate@5.3.10.Final//org.hibernate.hql.internal.ast.tree.SelectClause.initializeExplicitSelectClause(SelectClause.java:217)\r\n\tat org.hibernate@5.3.10.Final//org.hibernate.hql.internal.ast.HqlSqlWalker.useSelectClause(HqlSqlWalker.java:1018)\r\n\tat org.hibernate@5.3.10.Final//org.hibernate.hql.internal.ast.HqlSqlWalker.processQuery(HqlSqlWalker.java:786)\r\n\tat org.hibernate@5.3.10.Final//org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.query(HqlSqlBaseWalker.java:677)\r\n\tat org.hibernate@5.3.10.Final//org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.selectStatement(HqlSqlBaseWalker.java:313)\r\n\tat org.hibernate@5.3.10.Final//org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.statement(HqlSqlBaseWalker.java:261)\r\n\tat org.hibernate@5.3.10.Final//org.hibernate.hql.internal.ast.QueryTranslatorImpl.analyze(QueryTranslatorImpl.java:271)\r\n\tat org.hibernate@5.3.10.Final//org.hibernate.hql.internal.ast.QueryTranslatorImpl.doCompile(QueryTranslatorImpl.java:191)\r\n\t... 162 more\r\n\r\nwhat is my problem, how can I fix it?\r\n\r\n","title":"JPA select count of all entitties matching some conditions","body":"<p>I would like to create a JPA query that selects all entities matching some conditions, but I receive an error.</p>\n<p>My select is:</p>\n<pre><code> select count(*) from Employee emplWithLicence  JOIN FETCH emplWithLicence.firma fa JOIN FETCH emplWithLicence.user userWithLicence JOIN FETCH userWithLicence.contact ctc LEFT OUTER JOIN FETCH userWithLicence.licence lice where userWithLicence.active = true and emplWithLicence.firma.name like 'Be%' \n</code></pre>\n<p>In the future more conditions may come to the where clause, but this should not change my logic. Now, when I try to execute the logic above I receive the error below:</p>\n<pre><code>Caused by: org.hibernate.QueryException: query specified join fetching, but the owner of the fetched association was not present in the select list [FromElement{explicit,not a collection join,fetch join,fetch non-lazy properties,classAlias=fa,role=at.home.digest.model.dave.Employee.firma,tableName=firma,tableAlias=firma1_,origin=empl employee0_,columns={employee0_.firma_id ,className=at.home.digest.model.dave.Firma}}]\nat org.hibernate@5.3.10.Final//org.hibernate.hql.internal.ast.tree.SelectClause.initializeExplicitSelectClause(SelectClause.java:217)\nat org.hibernate@5.3.10.Final//org.hibernate.hql.internal.ast.HqlSqlWalker.useSelectClause(HqlSqlWalker.java:1018)\nat org.hibernate@5.3.10.Final//org.hibernate.hql.internal.ast.HqlSqlWalker.processQuery(HqlSqlWalker.java:786)\nat org.hibernate@5.3.10.Final//org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.query(HqlSqlBaseWalker.java:677)\nat org.hibernate@5.3.10.Final//org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.selectStatement(HqlSqlBaseWalker.java:313)\nat org.hibernate@5.3.10.Final//org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.statement(HqlSqlBaseWalker.java:261)\nat org.hibernate@5.3.10.Final//org.hibernate.hql.internal.ast.QueryTranslatorImpl.analyze(QueryTranslatorImpl.java:271)\nat org.hibernate@5.3.10.Final//org.hibernate.hql.internal.ast.QueryTranslatorImpl.doCompile(QueryTranslatorImpl.java:191)\n... 162 more\n</code></pre>\n<p>what is my problem, how can I fix it?</p>\n"},{"tags":["java","azure","apache-kafka","apache-flink","azure-eventhub"],"comments":[{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1680882039,"post_id":75958333,"comment_id":133975337,"body_markdown":"1) You&#39;ve cut off ConsumerConfig from the logs 2) You&#39;ve not set `auto.offset.reset=earliest`","body":"1) You&#39;ve cut off ConsumerConfig from the logs 2) You&#39;ve not set <code>auto.offset.reset=earliest</code>"},{"owner":{"account_id":7796739,"reputation":11,"user_id":5897548,"display_name":"ClockWork"},"score":0,"creation_date":1681032384,"post_id":75958333,"comment_id":133991397,"body_markdown":"First of all, thank you @OneCricketeer for the solution that you propose. Can you please elaborate what do you mean with the phrase &quot;You&#39;ve cut off ConsumerConfig from the logs&quot;?","body":"First of all, thank you @OneCricketeer for the solution that you propose. Can you please elaborate what do you mean with the phrase &quot;You&#39;ve cut off ConsumerConfig from the logs&quot;?"},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1681053368,"post_id":75958333,"comment_id":133993799,"body_markdown":"Did that solve the problem? Your question here only shows AdminClientConfig from Kafka logs, but there&#39;s more output, and the problem you&#39;re asking about is related to the consumer config","body":"Did that solve the problem? Your question here only shows AdminClientConfig from Kafka logs, but there&#39;s more output, and the problem you&#39;re asking about is related to the consumer config"},{"owner":{"account_id":7796739,"reputation":11,"user_id":5897548,"display_name":"ClockWork"},"score":0,"creation_date":1681057647,"post_id":75958333,"comment_id":133994355,"body_markdown":"No this didn&#39;t solve my problem. If I include the rest of the output, my question exceeds the maximum allowed characters. The output above is produced at the Flink JobManger. I have posted from it what is related to the connection to Kafka. Do you want me to include anything else? What I haven&#39;t included at the main post is that another consumer is subscribed to the same topic but with a completely different group-id.","body":"No this didn&#39;t solve my problem. If I include the rest of the output, my question exceeds the maximum allowed characters. The output above is produced at the Flink JobManger. I have posted from it what is related to the connection to Kafka. Do you want me to include anything else? What I haven&#39;t included at the main post is that another consumer is subscribed to the same topic but with a completely different group-id."},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1681107214,"post_id":75958333,"comment_id":133999301,"body_markdown":"I am interested in seeing what you have as `auto.offset.reset` from the ConsumerConfig, as mentioned since any Kafka consumer defaults to start at the end of the topic, where there may be no data, if your producer is not active. The adminclient logs are unnecessary, so I suggested removing them","body":"I am interested in seeing what you have as <code>auto.offset.reset</code> from the ConsumerConfig, as mentioned since any Kafka consumer defaults to start at the end of the topic, where there may be no data, if your producer is not active. The adminclient logs are unnecessary, so I suggested removing them"},{"owner":{"account_id":7796739,"reputation":11,"user_id":5897548,"display_name":"ClockWork"},"score":0,"creation_date":1681111210,"post_id":75958333,"comment_id":133999807,"body_markdown":"I found a way of running the Job. Instead of starting the cluster and then submitting the job from a .jar, I run the **mvn exec:java -Dexec.mainClass=&quot;FlinkKafkaConsumer&quot;** command. I assume that the main reason of not connecting is the runtime environment that is been set by the start-cluster.sh of Flink, when I start the cluster. I will investigate it further and I will come back with the answer.","body":"I found a way of running the Job. Instead of starting the cluster and then submitting the job from a .jar, I run the <b>mvn exec:java -Dexec.mainClass=&quot;FlinkKafkaConsumer&quot;</b> command. I assume that the main reason of not connecting is the runtime environment that is been set by the start-cluster.sh of Flink, when I start the cluster. I will investigate it further and I will come back with the answer."},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1681115377,"post_id":75958333,"comment_id":134000397,"body_markdown":"You should be able to run the main class direct from your IDE without maven command, but yes, that is one way to run any Java class from Maven directly without a JAR file","body":"You should be able to run the main class direct from your IDE without maven command, but yes, that is one way to run any Java class from Maven directly without a JAR file"}],"owner":{"account_id":7796739,"reputation":11,"user_id":5897548,"display_name":"ClockWork"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":124,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681108865,"creation_date":1680869829,"question_id":75958333,"body_markdown":"I have created an Azure VM with Ubuntu OS, where I have installed Flink 1.16.1 with all its prerequisite. The VM is in a VNet.\r\n\r\nAt the other side I have an Azure Event Hub for Apache Kafka, which is public.\r\n\r\nAt the Vnet of the VM I have created Inbound and Outbound security rules for the 9093 port, in order to communicate with my event hub.\r\n\r\nI have started a cluster at my ubuntu VM by using the following command at the terminal:\r\n\r\n    $FLINK_HOME/bin/start-cluster.sh\r\n\r\nI have created a fat jar with mvn clean package and I deployed it to the Flink cluster by using the following command:\r\n\r\n    $FLINK_HOME/bin/flink run -d -c event-hub-kafka-consumer.jar\r\n\r\nThe Java code of the FlinkKafkaConsumer that I am trying to deploy is included below:\r\n\r\n    import org.apache.flink.streaming.api.datastream.DataStream;\r\n    import org.apache.flink.streaming.api.environment.StreamExecutionEnvironment;\r\n    import org.apache.flink.connector.kafka.source.KafkaSource;\r\n    import org.apache.flink.api.common.serialization.SimpleStringSchema;\r\n    import org.apache.flink.connector.kafka.source.enumerator.initializer.OffsetsInitializer;\r\n    import org.apache.flink.api.common.eventtime.WatermarkStrategy;\r\n\r\n    public class FlinkKafkaConsumer {\r\n\r\n        public static void main(String[] args) throws Exception {\r\n\r\n            final StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();\r\n\r\n            KafkaSource&lt;String&gt; source = KafkaSource.&lt;String&gt;builder()\r\n                .setBootstrapServers(&quot;namespace.servicebus.windows.net:9093&quot;)\r\n                .setProperty(&quot;sasl.mechanism&quot;, &quot;PLAIN&quot;)\r\n                .setProperty(&quot;sasl.jaas.config&quot;, &quot;org.apache.kafka.common.security.plain.PlainLoginModule required username=\\&quot;$ConnectionString\\&quot; password=\\&quot;Endpoint=sb://namespace.servicebus.windows.net/;SharedAccessKeyName=*********;SharedAccessKey=****************\\&quot;;&quot;)\r\n                .setProperty(&quot;security.protocol&quot;, &quot;SASL_SSL&quot;)\r\n                .setTopics(&quot;topicA&quot;)\r\n                .setGroupId(&quot;flink-consumer&quot;)\r\n                .setStartingOffsets(OffsetsInitializer.latest())\r\n                .setValueOnlyDeserializer(new SimpleStringSchema())\r\n                .build();\r\n\r\n            DataStream&lt;String&gt; stream = env.fromSource(source, WatermarkStrategy.noWatermarks(), &quot;KafkaSource&quot;);\r\n\r\n            stream.print();\r\n            env.execute(&quot;Testing flink consumer&quot;);\r\n        }\r\n    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nIt seems that, the Flink Job is been created, event hub receives the requests but then Flink receives 0 messages.\r\n\r\nIs there any possible explanation to this? \r\n\r\n**Note: Another consumer is subscribed to the same topic with a completely different group-id.**\r\n ","title":"Connecting Standalone Flink Cluster on Azure VM with Azure Event Hub Kafka","body":"<p>I have created an Azure VM with Ubuntu OS, where I have installed Flink 1.16.1 with all its prerequisite. The VM is in a VNet.</p>\n<p>At the other side I have an Azure Event Hub for Apache Kafka, which is public.</p>\n<p>At the Vnet of the VM I have created Inbound and Outbound security rules for the 9093 port, in order to communicate with my event hub.</p>\n<p>I have started a cluster at my ubuntu VM by using the following command at the terminal:</p>\n<pre><code>$FLINK_HOME/bin/start-cluster.sh\n</code></pre>\n<p>I have created a fat jar with mvn clean package and I deployed it to the Flink cluster by using the following command:</p>\n<pre><code>$FLINK_HOME/bin/flink run -d -c event-hub-kafka-consumer.jar\n</code></pre>\n<p>The Java code of the FlinkKafkaConsumer that I am trying to deploy is included below:</p>\n<pre><code>import org.apache.flink.streaming.api.datastream.DataStream;\nimport org.apache.flink.streaming.api.environment.StreamExecutionEnvironment;\nimport org.apache.flink.connector.kafka.source.KafkaSource;\nimport org.apache.flink.api.common.serialization.SimpleStringSchema;\nimport org.apache.flink.connector.kafka.source.enumerator.initializer.OffsetsInitializer;\nimport org.apache.flink.api.common.eventtime.WatermarkStrategy;\n\npublic class FlinkKafkaConsumer {\n\n    public static void main(String[] args) throws Exception {\n\n        final StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();\n\n        KafkaSource&lt;String&gt; source = KafkaSource.&lt;String&gt;builder()\n            .setBootstrapServers(&quot;namespace.servicebus.windows.net:9093&quot;)\n            .setProperty(&quot;sasl.mechanism&quot;, &quot;PLAIN&quot;)\n            .setProperty(&quot;sasl.jaas.config&quot;, &quot;org.apache.kafka.common.security.plain.PlainLoginModule required username=\\&quot;$ConnectionString\\&quot; password=\\&quot;Endpoint=sb://namespace.servicebus.windows.net/;SharedAccessKeyName=*********;SharedAccessKey=****************\\&quot;;&quot;)\n            .setProperty(&quot;security.protocol&quot;, &quot;SASL_SSL&quot;)\n            .setTopics(&quot;topicA&quot;)\n            .setGroupId(&quot;flink-consumer&quot;)\n            .setStartingOffsets(OffsetsInitializer.latest())\n            .setValueOnlyDeserializer(new SimpleStringSchema())\n            .build();\n\n        DataStream&lt;String&gt; stream = env.fromSource(source, WatermarkStrategy.noWatermarks(), &quot;KafkaSource&quot;);\n\n        stream.print();\n        env.execute(&quot;Testing flink consumer&quot;);\n    }\n}\n</code></pre>\n\n<p>It seems that, the Flink Job is been created, event hub receives the requests but then Flink receives 0 messages.</p>\n<p>Is there any possible explanation to this?</p>\n<p><strong>Note: Another consumer is subscribed to the same topic with a completely different group-id.</strong></p>\n"},{"tags":["java","spring-data-jpa","java-11","jparepository"],"owner":{"account_id":27889969,"reputation":1,"user_id":21296567,"display_name":"Thanh Tuyen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681108789,"creation_date":1680840257,"question_id":75955387,"body_markdown":"I have a case related to delete an entity using java JpaRepository.\r\n\r\nclass UserLanguage:\r\n\r\n```\r\n@EmbeddedId\r\n@JsonUnwrapped\r\nprivate UserLanguageId userLanguageId;\r\n\r\nprivate String nameEn;\r\nprivate String icon;\r\n\r\npublic UserLanguage (Long userId, Long languageId) {\r\n   this.userLanguageId = new UserLanguageId(userId, languageId);\r\n}\r\n```\r\n\r\nwhenever I try to delete a record using method deleteAllByUserLanguageId_UserId(userId) , it will cause\r\n\r\n&gt; IllegalArgumentException: attempt to create delete event with null entity.\r\n\r\n- userId is not null when I put log in my code.\r\n\r\n- I have tried to debug to catch the exception, and searched many topics but still no solution.","title":"JpaRepository - Cannot delete because exception &quot;attempt to create delete event with null entity&quot;","body":"<p>I have a case related to delete an entity using java JpaRepository.</p>\n<p>class UserLanguage:</p>\n<pre><code>@EmbeddedId\n@JsonUnwrapped\nprivate UserLanguageId userLanguageId;\n\nprivate String nameEn;\nprivate String icon;\n\npublic UserLanguage (Long userId, Long languageId) {\n   this.userLanguageId = new UserLanguageId(userId, languageId);\n}\n</code></pre>\n<p>whenever I try to delete a record using method deleteAllByUserLanguageId_UserId(userId) , it will cause</p>\n<blockquote>\n<p>IllegalArgumentException: attempt to create delete event with null entity.</p>\n</blockquote>\n<ul>\n<li><p>userId is not null when I put log in my code.</p>\n</li>\n<li><p>I have tried to debug to catch the exception, and searched many topics but still no solution.</p>\n</li>\n</ul>\n"},{"tags":["java","swing","maven"],"comments":[{"owner":{"account_id":2838423,"reputation":4567,"user_id":2438518,"accept_rate":53,"display_name":"mrbela"},"score":0,"creation_date":1460379430,"post_id":36549292,"comment_id":60699336,"body_markdown":"Have you added all depedencies to the classpath?","body":"Have you added all depedencies to the classpath?"},{"owner":{"account_id":8176094,"reputation":79,"user_id":6154767,"display_name":"Sanchita Sonawane"},"score":0,"creation_date":1460379678,"post_id":36549292,"comment_id":60699534,"body_markdown":"i have added dependency in pom.xml file","body":"i have added dependency in pom.xml file"},{"owner":{"account_id":8034427,"reputation":1287,"user_id":6058076,"accept_rate":100,"display_name":"LearningPhase"},"score":1,"creation_date":1460379975,"post_id":36549292,"comment_id":60699769,"body_markdown":"Please post your pom.xml","body":"Please post your pom.xml"},{"owner":{"account_id":8034427,"reputation":1287,"user_id":6058076,"accept_rate":100,"display_name":"LearningPhase"},"score":2,"creation_date":1460380019,"post_id":36549292,"comment_id":60699798,"body_markdown":"Also after adding your dependencies did you do a Maven&gt;update project to download the dependencies","body":"Also after adding your dependencies did you do a Maven&gt;update project to download the dependencies"},{"owner":{"account_id":8176094,"reputation":79,"user_id":6154767,"display_name":"Sanchita Sonawane"},"score":0,"creation_date":1460380182,"post_id":36549292,"comment_id":60699928,"body_markdown":"yes i did that.my project is working properly from sts.but when i build jar then its giving  me the above mentioned error","body":"yes i did that.my project is working properly from sts.but when i build jar then its giving  me the above mentioned error"},{"owner":{"account_id":6265568,"reputation":1555,"user_id":4871427,"accept_rate":60,"display_name":"Hohenheim"},"score":1,"creation_date":1460381100,"post_id":36549292,"comment_id":60700665,"body_markdown":"if you dl your jars from maven repository. You&#39;ll able to build your jar. So with this error. You have a class not found which is `org.hibernate.cfg.configuration` and this class is present in all of the jars of hibernate : core ... So maybe you don&#39;t have the right configuration so the wrong version of hibernate. Show us your pom.xml maybe we can find a solution","body":"if you dl your jars from maven repository. You&#39;ll able to build your jar. So with this error. You have a class not found which is <code>org.hibernate.cfg.configuration</code> and this class is present in all of the jars of hibernate : core ... So maybe you don&#39;t have the right configuration so the wrong version of hibernate. Show us your pom.xml maybe we can find a solution"},{"owner":{"account_id":898124,"reputation":7147,"user_id":934960,"accept_rate":72,"display_name":"Raunak Agarwal"},"score":0,"creation_date":1460436246,"post_id":36549292,"comment_id":60727739,"body_markdown":"@SanchitaSonawane: Are you sure your jar packages all the dependent jar as well?","body":"@SanchitaSonawane: Are you sure your jar packages all the dependent jar as well?"},{"owner":{"account_id":8176094,"reputation":79,"user_id":6154767,"display_name":"Sanchita Sonawane"},"score":0,"creation_date":1460436781,"post_id":36549292,"comment_id":60727890,"body_markdown":"@RaunakAgarwal : yes i have added all the dependencies as per program requirement.Kindly refer the above attached pom file.","body":"@RaunakAgarwal : yes i have added all the dependencies as per program requirement.Kindly refer the above attached pom file."},{"owner":{"account_id":8034427,"reputation":1287,"user_id":6058076,"accept_rate":100,"display_name":"LearningPhase"},"score":0,"creation_date":1460637738,"post_id":36549292,"comment_id":60842739,"body_markdown":"Can you pleas verify that the jar that you have has all the required files in it","body":"Can you pleas verify that the jar that you have has all the required files in it"}],"owner":{"account_id":8176094,"reputation":79,"user_id":6154767,"display_name":"Sanchita Sonawane"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":3102,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":0,"score":4,"last_activity_date":1681106742,"creation_date":1460379249,"question_id":36549292,"body_markdown":"I have added the following dependency: `hibernate-core,hibernate-commons-annotations`, `hibernate-jpa-2.0-api`, `hibernate-entitymanager`, `hibernate-validator`.\r\nI am getting the following exception while running jar:\r\n\r\n&gt;    Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError:\r\n    org/hibernate/cfg/Configuration\r\n    Caused by: java.lang.ClassNotFoundException:     org.hibernate.cfg.Configuration\r\n    at java.net.URLClassLoader$1.run(URLClassLoader.java:217)\r\n    at java.security.AccessController.doPrivileged(Native Method)\r\n    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)\r\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:319)\r\n    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)\r\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:264)\r\n    at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:332)\r\n\r\npom.xml as below:\r\n\r\n   &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;com.install&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;install&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;/parent&gt;\r\n\r\n\t&lt;artifactId&gt;installer&lt;/artifactId&gt;\r\n\t&lt;packaging&gt;jar&lt;/packaging&gt;\r\n\t&lt;name&gt;Installer&lt;/name&gt;\r\n\t&lt;description&gt;Installer main&lt;/description&gt;\r\n\r\n\t&lt;properties&gt;\r\n\t\t&lt;slf4j.version&gt;1.7.12&lt;/slf4j.version&gt;\r\n\t&lt;/properties&gt;\r\n\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.quickfixj&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;quickfixj-core&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.6.0&lt;/version&gt;\r\n\t\t\t&lt;exclusions&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;slf4j-jdk14&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;log4j&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;log4j&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t&lt;/exclusions&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${slf4j.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jcl-over-slf4j&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${slf4j.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jul-to-slf4j&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${slf4j.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;log4j-over-slf4j&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${slf4j.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;log4j-slf4j-impl&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.4&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.4&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.jboss.logging&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jboss-logging&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.2.0.Final&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;log4j-web&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.4&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;commons-io&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;commons-io&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.4&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;mysql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;5.1.36&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;net.sourceforge.jtds&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jtds&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.2.4&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;dom4j&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;dom4j&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.6.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;commons-logging&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;commons-logging&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.2&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;commons-collections&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;commons-collections&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.2.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;4.0.1.Final&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.2.2&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.hibernate.common&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;hibernate-commons-annotations&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;4.0.1.Final&lt;/version&gt;\r\n\t\t\t&lt;classifier&gt;tests&lt;/classifier&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.hibernate.javax.persistence&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;hibernate-jpa-2.0-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.0.1.Final&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;4.0.1.Final&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;4.2.0.Final&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.avalon.framework&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;avalon-framework-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;4.3.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;commons-io&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.3.2&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;javax.transaction&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jta&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;!-- Build an executable JAR --&gt;\r\n\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;2.4&lt;/version&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;archive&gt;\r\n\t\t\t\t\t\t&lt;manifest&gt;\r\n\t\t\t\t\t\t\t&lt;mainClass&gt;com.installer&lt;/mainClass&gt;\r\n\t\t\t\t\t\t&lt;/manifest&gt;\r\n\t\t\t\t\t&lt;/archive&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n\r\n\t\t","title":"NoClassDefFoundError: org/hibernate/cfg/Configuration error message when trying to load a Configuration:","body":"<p>I have added the following dependency: <code>hibernate-core,hibernate-commons-annotations</code>, <code>hibernate-jpa-2.0-api</code>, <code>hibernate-entitymanager</code>, <code>hibernate-validator</code>.\nI am getting the following exception while running jar:</p>\n\n<blockquote>\n  <p>Exception in thread \"main\" java.lang.NoClassDefFoundError:\n      org/hibernate/cfg/Configuration\n      Caused by: java.lang.ClassNotFoundException:     org.hibernate.cfg.Configuration\n      at java.net.URLClassLoader$1.run(URLClassLoader.java:217)\n      at java.security.AccessController.doPrivileged(Native Method)\n      at java.net.URLClassLoader.findClass(URLClassLoader.java:205)\n      at java.lang.ClassLoader.loadClass(ClassLoader.java:319)\n      at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)\n      at java.lang.ClassLoader.loadClass(ClassLoader.java:264)\n      at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:332)</p>\n</blockquote>\n\n<p>pom.xml as below:</p>\n\n<p>http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n    4.0.0\n    \n        com.install\n        install\n        0.0.1-SNAPSHOT\n    </p>\n\n<pre><code>&lt;artifactId&gt;installer&lt;/artifactId&gt;\n&lt;packaging&gt;jar&lt;/packaging&gt;\n&lt;name&gt;Installer&lt;/name&gt;\n&lt;description&gt;Installer main&lt;/description&gt;\n\n&lt;properties&gt;\n    &lt;slf4j.version&gt;1.7.12&lt;/slf4j.version&gt;\n&lt;/properties&gt;\n\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.quickfixj&lt;/groupId&gt;\n        &lt;artifactId&gt;quickfixj-core&lt;/artifactId&gt;\n        &lt;version&gt;1.6.0&lt;/version&gt;\n        &lt;exclusions&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n                &lt;artifactId&gt;slf4j-jdk14&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;log4j&lt;/groupId&gt;\n                &lt;artifactId&gt;log4j&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n        &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n        &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\n        &lt;version&gt;${slf4j.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n        &lt;artifactId&gt;jcl-over-slf4j&lt;/artifactId&gt;\n        &lt;version&gt;${slf4j.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n        &lt;artifactId&gt;jul-to-slf4j&lt;/artifactId&gt;\n        &lt;version&gt;${slf4j.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n        &lt;artifactId&gt;log4j-over-slf4j&lt;/artifactId&gt;\n        &lt;version&gt;${slf4j.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n        &lt;artifactId&gt;log4j-slf4j-impl&lt;/artifactId&gt;\n        &lt;version&gt;2.4&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n        &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\n        &lt;version&gt;2.4&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.jboss.logging&lt;/groupId&gt;\n        &lt;artifactId&gt;jboss-logging&lt;/artifactId&gt;\n        &lt;version&gt;3.2.0.Final&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n        &lt;artifactId&gt;log4j-web&lt;/artifactId&gt;\n        &lt;version&gt;2.4&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;commons-io&lt;/groupId&gt;\n        &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\n        &lt;version&gt;2.4&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;mysql&lt;/groupId&gt;\n        &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n        &lt;version&gt;5.1.36&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;net.sourceforge.jtds&lt;/groupId&gt;\n        &lt;artifactId&gt;jtds&lt;/artifactId&gt;\n        &lt;version&gt;1.2.4&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;dom4j&lt;/groupId&gt;\n        &lt;artifactId&gt;dom4j&lt;/artifactId&gt;\n        &lt;version&gt;1.6.1&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;commons-logging&lt;/groupId&gt;\n        &lt;artifactId&gt;commons-logging&lt;/artifactId&gt;\n        &lt;version&gt;1.2&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;commons-collections&lt;/groupId&gt;\n        &lt;artifactId&gt;commons-collections&lt;/artifactId&gt;\n        &lt;version&gt;3.2.1&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n        &lt;version&gt;4.0.1.Final&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\n        &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\n        &lt;version&gt;2.2.2&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.hibernate.common&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-commons-annotations&lt;/artifactId&gt;\n        &lt;version&gt;4.0.1.Final&lt;/version&gt;\n        &lt;classifier&gt;tests&lt;/classifier&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.hibernate.javax.persistence&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-jpa-2.0-api&lt;/artifactId&gt;\n        &lt;version&gt;1.0.1.Final&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\n        &lt;version&gt;4.0.1.Final&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;\n        &lt;version&gt;4.2.0.Final&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.avalon.framework&lt;/groupId&gt;\n        &lt;artifactId&gt;avalon-framework-api&lt;/artifactId&gt;\n        &lt;version&gt;4.3.1&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n        &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\n        &lt;version&gt;1.3.2&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;javax.transaction&lt;/groupId&gt;\n        &lt;artifactId&gt;jta&lt;/artifactId&gt;\n        &lt;version&gt;1.1&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;!-- Build an executable JAR --&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n            &lt;version&gt;2.4&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;archive&gt;\n                    &lt;manifest&gt;\n                        &lt;mainClass&gt;com.installer&lt;/mainClass&gt;\n                    &lt;/manifest&gt;\n                &lt;/archive&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n\n<p></p>\n"},{"tags":["java","android","android-studio","xiaomi"],"owner":{"account_id":26490976,"reputation":1,"user_id":20129150,"display_name":"gautam v"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":133,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681106519,"creation_date":1681102458,"question_id":75974342,"body_markdown":"How can I enable &quot;show on lock screen&quot; permission on Xiaomi phones? Is it possible by programmatically or add custom permission in manifest or still somehow?","title":"How can I enable show on lock screen permission programatically on Xiaomi phones?","body":"<p>How can I enable &quot;show on lock screen&quot; permission on Xiaomi phones? Is it possible by programmatically or add custom permission in manifest or still somehow?</p>\n"},{"tags":["java","android","kotlin","android-jetpack","android-workmanager"],"comments":[{"owner":{"account_id":14474123,"reputation":1147,"user_id":12469165,"display_name":"Amit pandey"},"score":0,"creation_date":1680614267,"post_id":75929716,"comment_id":133925234,"body_markdown":"Yes its possible with WorkManger","body":"Yes its possible with WorkManger"},{"owner":{"account_id":18002107,"reputation":552,"user_id":13083841,"display_name":"mrzbn"},"score":0,"creation_date":1680614897,"post_id":75929716,"comment_id":133925376,"body_markdown":"@Amitpandey ok. how?","body":"@Amitpandey ok. how?"},{"owner":{"account_id":238127,"reputation":86162,"user_id":506796,"accept_rate":83,"display_name":"Tenfour04"},"score":0,"creation_date":1680616036,"post_id":75929716,"comment_id":133925739,"body_markdown":"Can you rephrase this? I don&#39;t understand what you mean. &quot;I want app killed to continue work, not in background.&quot; It doesn&#39;t make sense to say Work Manager is doing work when the app is not running. The WorkManager task is part of your app, so if it&#39;s doing work, your app is running. Also, when you say the app is &quot;killed&quot;, do you just mean the activity is closed, or when the OS terminates the whole application to save memory?","body":"Can you rephrase this? I don&#39;t understand what you mean. &quot;I want app killed to continue work, not in background.&quot; It doesn&#39;t make sense to say Work Manager is doing work when the app is not running. The WorkManager task is part of your app, so if it&#39;s doing work, your app is running. Also, when you say the app is &quot;killed&quot;, do you just mean the activity is closed, or when the OS terminates the whole application to save memory?"},{"owner":{"account_id":18002107,"reputation":552,"user_id":13083841,"display_name":"mrzbn"},"score":0,"creation_date":1680619006,"post_id":75929716,"comment_id":133926558,"body_markdown":"@Tenfour04 thanks. I rephrased my question.","body":"@Tenfour04 thanks. I rephrased my question."},{"owner":{"account_id":238127,"reputation":86162,"user_id":506796,"accept_rate":83,"display_name":"Tenfour04"},"score":0,"creation_date":1680619334,"post_id":75929716,"comment_id":133926653,"body_markdown":"Sorry, I still don&#39;t understand. Why does it matter if the activity is open or closed while you are scheduling work? And you didn&#39;t answer the question about the word &quot;killed&quot;.","body":"Sorry, I still don&#39;t understand. Why does it matter if the activity is open or closed while you are scheduling work? And you didn&#39;t answer the question about the word &quot;killed&quot;."},{"owner":{"account_id":18002107,"reputation":552,"user_id":13083841,"display_name":"mrzbn"},"score":0,"creation_date":1680624543,"post_id":75929716,"comment_id":133928116,"body_markdown":"@Tenfour04 let me explain it this way: I have a coroutine scope bound to application (MainScope). I want when this scope stops working, schedule a work using WorkManager.","body":"@Tenfour04 let me explain it this way: I have a coroutine scope bound to application (MainScope). I want when this scope stops working, schedule a work using WorkManager."}],"owner":{"account_id":18002107,"reputation":552,"user_id":13083841,"display_name":"mrzbn"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":104,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681106458,"creation_date":1680613372,"question_id":75929716,"body_markdown":"I have a work that I want to run immediately when app starts running. but I&#39;m only using **Coroutines** for that. \r\n\r\nAfter app is **killed** I want to schedule **WorkManager** to continue that work. Is that possible for WorkManager? \r\n\r\nNote that I want app activity to be closed when I schedule the work with WorkManager.","title":"How to force WorkManager to do work when app is NOT running?","body":"<p>I have a work that I want to run immediately when app starts running. but I'm only using <strong>Coroutines</strong> for that.</p>\n<p>After app is <strong>killed</strong> I want to schedule <strong>WorkManager</strong> to continue that work. Is that possible for WorkManager?</p>\n<p>Note that I want app activity to be closed when I schedule the work with WorkManager.</p>\n"},{"tags":["java","android","android-room"],"answers":[{"tags":[],"owner":{"account_id":6077735,"reputation":52951,"user_id":4744514,"accept_rate":96,"display_name":"MikeT"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1681106035,"creation_date":1681106035,"answer_id":75974597,"question_id":75971714,"body_markdown":"I believe that you will encounter issues with what you have.\r\n\r\nThat is an AdjacencyList row **parent** column has to be a value, due to the Foreign Key, of an **id** that exists in the AdjacencyList.\r\n\r\n- when you specify @ForeignKey then you are defining an SQLite Foreign Key constraint(rule) that enforces referential integrity.\r\n\r\nWhen you say nested, what level of nesting? \r\n\r\n- For a single level of nesting then, taking a nested project, then a higher level project could have multiple nested projects but those nested projects could not have projects nested.\r\n\r\n- For a multi-level nesting than, a lower level project, could itself have lower level projects.\r\n\r\n- obviously the same for tasks, although at a guess tasks would be part of a project.\r\n\r\nI would suggest that you consider utilising what are termed as associative/mapping/reference (and many other descriptive names) table(s).\r\n\r\nSuch a table has 2 core columns one that references the parent, the other that reference a child of the parent (the child being nested). The 2 columns are then used as the primary key thus catering for a multi-level nesting, albeit it requiring some form of recursion to move through the hierarchy.\r\n\r\nAs an example, using raw/native SQLite, for which Room is a wrapper around, then perhaps consider the following SQL created and tested using an SQLite tool (Navicat for SQLite, there are others freely available) to demonstrate an associative/mapping/reference table that caters not only for multi-level nesting but also for a project to be nested in multiple projects (if so desired).\r\n\r\n    DROP TABLE IF EXISTS project_hierarchy;\r\n    DROP TABLE IF EXISTS project;\r\n    CREATE TABLE IF NOT EXISTS project (\r\n    \tid INTEGER PRIMARY KEY, \r\n    \tname TEXT, \r\n    \tetc TEXT\r\n    );\r\n    \r\n    /* The mapping/associative/refernce .... table */\r\n    CREATE TABLE IF NOT EXISTS project_hierarchy (\r\n    \tparent_project INTEGER REFERENCES project(id) ON DELETE CASCADE /* REFERENCES defines a FOREIGN KEY constraint(rule) saying the value MUST be an existing project id */, \r\n    \tchild_project INTEGER REFERENCES project(id) ON UPDATE CASCADE, /* REFERENCES defines a FOREIGN KEY constraint(rule) saying the value MUST be an existing project id */\r\n    \tPRIMARY KEY (parent_project, child_project)\r\n    );\r\n    /* note that the more conside column level foreign key definition has been used */\r\n    /* Room will build table level foreign key definitiions e.g. */\r\n    /* CREATE TABLE IF NOT EXISTS project_hierarchy */\r\n    /*     parent_project INTEGER, */\r\n    /*     child_project INTEGER, */\r\n    /* PRIMARY KEY (parent_project,child_project), */\r\n    /* FOREIGN KEY parent_project REFERENCES project(id) ON DELETE CASCADE ON UPDATE CASCADE, */\r\n    /* FOREIGN KEY child_project REFERENCES project(id) ON DELETE CASCADE ON UPDATE CASCADE */\r\n    /*;*/\r\n    \r\n    /* Add some Projects (not any nestings at all)*/\r\n    INSERT INTO project VALUES\r\n    \t(1,&#39;P1&#39;,&#39;blah1&#39;) \r\n    \t,(2,&#39;P2&#39;,&#39;blah2&#39;)\r\n    \t,(3,&#39;P3&#39;,&#39;blah3&#39;)\r\n    \t,(4,&#39;P4&#39;,&#39;blah4&#39;)\r\n    \t,(5,&#39;P5&#39;,&#39;blah5&#39;)\r\n    \t,(6,&#39;P6&#39;,&#39;blah6&#39;)\r\n    \t,(7,&#39;P7&#39;,&#39;blah7&#39;)\r\n    \t,(8,&#39;P8&#39;,&#39;blah8&#39;)\r\n    \t,(9,&#39;P9&#39;,&#39;blah9&#39;)\r\n    ;\r\n    \r\n    INSERT INTO project_hierarchy VALUES\r\n    \t(1,2) /* Project 2 nested in project 1 */\r\n    \t,(1,3) /* Project 3 nested in project 1 as well */\r\n    \t,(4,5) /* Project 5 nested in project 4 */\r\n    \t,(2,6) /* project 6 is nested in project 2 which is nested in project 1 */\r\n    \t,(4,7) /* Project 7 is nested in project 4 as well as project 5 */\r\n    \t,(6,8) /* Project 8 is nested in project 6 which is nested in project 2 which is nested in project 1 */\r\n    \t,(4,6) /* Project 6 is additionally nested in Project 4 */ \r\n    ;\r\n    \r\n    SELECT *\r\n    FROM project \r\n        /* More importantly, how do I deal with the fact that the name of the table for project and task is different from the one I would use for the Adjacency List? */\r\n    \t/* JOIN the associative table to the project table where the parent_project is the same as the id in the project */\r\n    \tJOIN project_hierarchy ON project_hierarchy.parent_project = project.id /* Joins the project_hierarchy table to the project table */\r\n    \t/* JOIN the project table, for the nested projects, onto the associative table so the child_project is retrieved*/ \r\n    \tJOIN project AS nested /* aliased to circumvent ambiguous column names */ ON nested.id = project_hierarchy.child_project\r\n    ;\r\n    /* Note as there is nothing to JOIN for Project 9 then in this select nothing is output */\r\n    \r\n    /* Cleanup the demo environment */\r\n    DROP TABLE IF EXISTS project_hierarchy;\r\n    DROP TABLE IF EXISTS project;\r\n\r\n\r\nThe result being:-\r\n\r\n[![enter image description here][1]][1]\r\n\r\n**Using the above in Room**\r\n\r\nAdapting the above for Room, would have two `@Entity` annotated classes:-\r\n\r\n**Project**:-\r\n\r\n    @Entity\r\n    class Project {\r\n        @PrimaryKey\r\n        Long id=null;\r\n        String name;\r\n        String etc;\r\n    \r\n        Project(){}\r\n        Project(String name, String etc) {\r\n            this.name = name;\r\n            this.etc = etc;\r\n        }\r\n        Project(Long id, String name, String etc) {\r\n            this.id = id;\r\n            this.name = name;\r\n            this.etc = etc;\r\n        }\r\n    }\r\n\r\nand **Project_Hierarchy** :-\r\n\r\n    @Entity(\r\n            primaryKeys = {&quot;parent_project&quot;,&quot;child_project&quot;},\r\n            foreignKeys = {\r\n                    @ForeignKey(\r\n                            entity = Project.class,\r\n                            parentColumns = {&quot;id&quot;},\r\n                            childColumns = {&quot;parent_project&quot;},\r\n                            onDelete = ForeignKey.CASCADE,\r\n                            onUpdate = ForeignKey.CASCADE\r\n                    ),\r\n                    @ForeignKey(\r\n                            entity = Project.class,\r\n                            parentColumns = {&quot;id&quot;},\r\n                            childColumns = {&quot;child_project&quot;},\r\n                            onDelete = ForeignKey.CASCADE,\r\n                            onUpdate = ForeignKey.CASCADE\r\n                    )\r\n            }\r\n    )\r\n    class Project_Hierarchy {\r\n        long parent_project;\r\n        @ColumnInfo(index = true)\r\n        long child_project;\r\n    \r\n        Project_Hierarchy(){}\r\n        Project_Hierarchy(long parent_project, long child_project) {\r\n            this.parent_project = parent_project;\r\n            this.child_project = child_project;\r\n        }\r\n    }\r\n\r\nAlthough not exactly the same result wise in Room you would have a POJO for getting a Project with it&#39;s nested (1st Level) projects:-\r\n\r\n    class ProjectWithFirstLevelNestedProjects {\r\n       @Embedded\r\n       Project project;\r\n       @Relation(\r\n               entity = Project.class,\r\n               parentColumn = &quot;id&quot;,\r\n               entityColumn = &quot;id&quot;,\r\n               associateBy = @Junction(value = Project_Hierarchy.class,parentColumn = &quot;parent_project&quot;, entityColumn = &quot;child_project&quot;)\r\n       )\r\n       List&lt;Project&gt; nestedProject;\r\n    }\r\n\r\n- the associate by  and Junction combination is how Room knows to do the join (actually it is an equivalent to a join that is used)\r\n\r\nSome methods in an `@Dao` annotated **interface** so they are implicitly abstract **BUT** cannot have bodies. \r\n\r\nAn abstract class, which then requires the DAO methods to be abstract but have bodies can be used and as such is more flexible.\r\n\r\n    @Dao\r\n    interface AllDAOs {\r\n        @Insert(onConflict = OnConflictStrategy.IGNORE)\r\n        long insert(Project project);\r\n        @Insert(onConflict = OnConflictStrategy.IGNORE)\r\n        long insert(Project_Hierarchy project_hierarchy);\r\n        @Transaction\r\n        @Query(&quot;SELECT * FROM project&quot;)\r\n        List&lt;ProjectWithFirstLevelNestedProjects&gt; getAllProjectsWithFirstLevelProjects();\r\n    }\r\n\r\n- note the last method and it&#39;s apparent simplicity\r\n\r\nPutting it all together from a Room perspective is the `@Database` annotated class:-\r\n\r\n    @Database(entities = {Project.class,Project_Hierarchy.class},exportSchema = false,version = 1)\r\n    abstract class TheDatabase extends RoomDatabase {\r\n    \r\n        abstract AllDAOs getAllDAOs();\r\n    \r\n        private static volatile TheDatabase instance;\r\n        static TheDatabase getInstance(Context context) {\r\n            if (instance==null) {\r\n                instance = Room.databaseBuilder(context,TheDatabase.class,&quot;the_database.db&quot;)\r\n                        .allowMainThreadQueries()\r\n                        .build();\r\n            }\r\n            return instance;\r\n        }\r\n    }\r\n\r\n- note that for brevity and convenience `.allowMainThreadQueries` has been utilised, so the main thread can be used. It is not recommended to use the Main thread for an App this is to be distributed.\r\n\r\nFinally replicating the SQLite, noting that as we are dealing with Objects that the result will be different albeit that the underlying data in the tables will be the same. Some Activity code:-\r\n\r\n    public class MainActivity extends AppCompatActivity {\r\n        TheDatabase db;\r\n        AllDAOs dao;\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n            db = TheDatabase.getInstance(this);\r\n            dao = db.getAllDAOs();\r\n    \r\n            long p1Id = dao.insert(new Project(&quot;P1&quot;,&quot;blah1&quot;));\r\n            long p2Id = dao.insert(new Project(&quot;P2&quot;,&quot;blah2&quot;));\r\n            long p3Id = dao.insert(new Project(&quot;P3&quot;,&quot;blah3&quot;));\r\n            long p4Id = dao.insert(new Project(&quot;P4&quot;,&quot;blah4&quot;));\r\n            long p5Id = dao.insert(new Project(&quot;P5&quot;,&quot;blah5&quot;));\r\n            long p6Id = dao.insert(new Project(&quot;P6&quot;,&quot;blah6&quot;));\r\n            long p7Id = dao.insert(new Project(&quot;P7&quot;,&quot;blah7&quot;));\r\n            long p8Id = dao.insert(new Project(&quot;P8&quot;,&quot;blah8&quot;));\r\n            long p9Id = dao.insert(new Project(&quot;P9&quot;,&quot;blah9&quot;));\r\n    \r\n            dao.insert(new Project_Hierarchy(p1Id,p2Id));\r\n            dao.insert(new Project_Hierarchy(p1Id,p3Id));\r\n            dao.insert(new Project_Hierarchy(p4Id,p5Id));\r\n            dao.insert(new Project_Hierarchy(p2Id,p6Id));\r\n            dao.insert(new Project_Hierarchy(p4Id,p7Id));\r\n            dao.insert(new Project_Hierarchy(p6Id,p8Id));\r\n            dao.insert(new Project_Hierarchy(p4Id,p6Id));\r\n            logProjectsWithFirstLevelNestings(dao.getAllProjectsWithFirstLevelProjects());\r\n        }\r\n    \r\n        void logProjectsWithFirstLevelNestings(List&lt;ProjectWithFirstLevelNestedProjects&gt; nestings) {\r\n            StringBuilder sb = new StringBuilder();\r\n            for (ProjectWithFirstLevelNestedProjects pwflnp: nestings) {\r\n                sb = new StringBuilder();\r\n                for (Project project: pwflnp.nestedProject) {\r\n                    sb.append(&quot;\\n\\tNested Project Name is &quot;).append(project.name).append(&quot; ETC is &quot;).append(project.etc).append(&quot; ID is &quot;).append(project.id);\r\n                }\r\n                Log.d(&quot;DBINFO&quot;,\r\n                        &quot;Project is &quot; + pwflnp.project.name +\r\n                                &quot; ETC is &quot; + pwflnp.project.etc +\r\n                                &quot; ID is &quot; + pwflnp.project.id +\r\n                                &quot;. It has &quot; + pwflnp.nestedProject.size() + &quot; First Level Nested Projects; They are:-&quot; +\r\n                                sb\r\n                );\r\n            }\r\n        }\r\n    }\r\n\r\n**The Result**\r\n\r\nThe output to the Log is:-\r\n\r\n    D/DBINFO: Project is P1 ETC is blah1 ID is 1. It has 2 First Level Nested Projects; They are:-\r\n        \tNested Project Name is P2 ETC is blah2 ID is 2\r\n        \tNested Project Name is P3 ETC is blah3 ID is 3\r\n    \t\t\r\n    \t\t\r\n    D/DBINFO: Project is P2 ETC is blah2 ID is 2. It has 1 First Level Nested Projects; They are:-\r\n        \tNested Project Name is P6 ETC is blah6 ID is 6\r\n    \t\t\r\n    \t\t\r\n    D/DBINFO: Project is P3 ETC is blah3 ID is 3. It has 0 First Level Nested Projects; They are:-\r\n    D/DBINFO: Project is P4 ETC is blah4 ID is 4. It has 3 First Level Nested Projects; They are:-\r\n        \tNested Project Name is P5 ETC is blah5 ID is 5\r\n        \tNested Project Name is P6 ETC is blah6 ID is 6\r\n        \tNested Project Name is P7 ETC is blah7 ID is 7\r\n    \t\t\r\n    \t\t\r\n    D/DBINFO: Project is P5 ETC is blah5 ID is 5. It has 0 First Level Nested Projects; They are:-\r\n    D/DBINFO: Project is P6 ETC is blah6 ID is 6. It has 1 First Level Nested Projects; They are:-\r\n        \tNested Project Name is P8 ETC is blah8 ID is 8\r\n    \t\t\r\n    \t\t\r\n    D/DBINFO: Project is P7 ETC is blah7 ID is 7. It has 0 First Level Nested Projects; They are:-\r\n    D/DBINFO: Project is P8 ETC is blah8 ID is 8. It has 0 First Level Nested Projects; They are:-\r\n    D/DBINFO: Project is P9 ETC is blah9 ID is 9. It has 0 First Level Nested Projects; They are:-\r\n\r\nThis is clearly different to the original output. However the nestings are the equivalent and furthermore all Projects, nestings or not, have been output.\r\n\r\n\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/7aHrJ.png","title":"How can I properly implement an extendable adjacency list database in Android Room?","body":"<p>I believe that you will encounter issues with what you have.</p>\n<p>That is an AdjacencyList row <strong>parent</strong> column has to be a value, due to the Foreign Key, of an <strong>id</strong> that exists in the AdjacencyList.</p>\n<ul>\n<li>when you specify @ForeignKey then you are defining an SQLite Foreign Key constraint(rule) that enforces referential integrity.</li>\n</ul>\n<p>When you say nested, what level of nesting?</p>\n<ul>\n<li><p>For a single level of nesting then, taking a nested project, then a higher level project could have multiple nested projects but those nested projects could not have projects nested.</p>\n</li>\n<li><p>For a multi-level nesting than, a lower level project, could itself have lower level projects.</p>\n</li>\n<li><p>obviously the same for tasks, although at a guess tasks would be part of a project.</p>\n</li>\n</ul>\n<p>I would suggest that you consider utilising what are termed as associative/mapping/reference (and many other descriptive names) table(s).</p>\n<p>Such a table has 2 core columns one that references the parent, the other that reference a child of the parent (the child being nested). The 2 columns are then used as the primary key thus catering for a multi-level nesting, albeit it requiring some form of recursion to move through the hierarchy.</p>\n<p>As an example, using raw/native SQLite, for which Room is a wrapper around, then perhaps consider the following SQL created and tested using an SQLite tool (Navicat for SQLite, there are others freely available) to demonstrate an associative/mapping/reference table that caters not only for multi-level nesting but also for a project to be nested in multiple projects (if so desired).</p>\n<pre><code>DROP TABLE IF EXISTS project_hierarchy;\nDROP TABLE IF EXISTS project;\nCREATE TABLE IF NOT EXISTS project (\n    id INTEGER PRIMARY KEY, \n    name TEXT, \n    etc TEXT\n);\n\n/* The mapping/associative/refernce .... table */\nCREATE TABLE IF NOT EXISTS project_hierarchy (\n    parent_project INTEGER REFERENCES project(id) ON DELETE CASCADE /* REFERENCES defines a FOREIGN KEY constraint(rule) saying the value MUST be an existing project id */, \n    child_project INTEGER REFERENCES project(id) ON UPDATE CASCADE, /* REFERENCES defines a FOREIGN KEY constraint(rule) saying the value MUST be an existing project id */\n    PRIMARY KEY (parent_project, child_project)\n);\n/* note that the more conside column level foreign key definition has been used */\n/* Room will build table level foreign key definitiions e.g. */\n/* CREATE TABLE IF NOT EXISTS project_hierarchy */\n/*     parent_project INTEGER, */\n/*     child_project INTEGER, */\n/* PRIMARY KEY (parent_project,child_project), */\n/* FOREIGN KEY parent_project REFERENCES project(id) ON DELETE CASCADE ON UPDATE CASCADE, */\n/* FOREIGN KEY child_project REFERENCES project(id) ON DELETE CASCADE ON UPDATE CASCADE */\n/*;*/\n\n/* Add some Projects (not any nestings at all)*/\nINSERT INTO project VALUES\n    (1,'P1','blah1') \n    ,(2,'P2','blah2')\n    ,(3,'P3','blah3')\n    ,(4,'P4','blah4')\n    ,(5,'P5','blah5')\n    ,(6,'P6','blah6')\n    ,(7,'P7','blah7')\n    ,(8,'P8','blah8')\n    ,(9,'P9','blah9')\n;\n\nINSERT INTO project_hierarchy VALUES\n    (1,2) /* Project 2 nested in project 1 */\n    ,(1,3) /* Project 3 nested in project 1 as well */\n    ,(4,5) /* Project 5 nested in project 4 */\n    ,(2,6) /* project 6 is nested in project 2 which is nested in project 1 */\n    ,(4,7) /* Project 7 is nested in project 4 as well as project 5 */\n    ,(6,8) /* Project 8 is nested in project 6 which is nested in project 2 which is nested in project 1 */\n    ,(4,6) /* Project 6 is additionally nested in Project 4 */ \n;\n\nSELECT *\nFROM project \n    /* More importantly, how do I deal with the fact that the name of the table for project and task is different from the one I would use for the Adjacency List? */\n    /* JOIN the associative table to the project table where the parent_project is the same as the id in the project */\n    JOIN project_hierarchy ON project_hierarchy.parent_project = project.id /* Joins the project_hierarchy table to the project table */\n    /* JOIN the project table, for the nested projects, onto the associative table so the child_project is retrieved*/ \n    JOIN project AS nested /* aliased to circumvent ambiguous column names */ ON nested.id = project_hierarchy.child_project\n;\n/* Note as there is nothing to JOIN for Project 9 then in this select nothing is output */\n\n/* Cleanup the demo environment */\nDROP TABLE IF EXISTS project_hierarchy;\nDROP TABLE IF EXISTS project;\n</code></pre>\n<p>The result being:-</p>\n<p><a href=\"https://i.stack.imgur.com/7aHrJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7aHrJ.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>Using the above in Room</strong></p>\n<p>Adapting the above for Room, would have two <code>@Entity</code> annotated classes:-</p>\n<p><strong>Project</strong>:-</p>\n<pre><code>@Entity\nclass Project {\n    @PrimaryKey\n    Long id=null;\n    String name;\n    String etc;\n\n    Project(){}\n    Project(String name, String etc) {\n        this.name = name;\n        this.etc = etc;\n    }\n    Project(Long id, String name, String etc) {\n        this.id = id;\n        this.name = name;\n        this.etc = etc;\n    }\n}\n</code></pre>\n<p>and <strong>Project_Hierarchy</strong> :-</p>\n<pre><code>@Entity(\n        primaryKeys = {&quot;parent_project&quot;,&quot;child_project&quot;},\n        foreignKeys = {\n                @ForeignKey(\n                        entity = Project.class,\n                        parentColumns = {&quot;id&quot;},\n                        childColumns = {&quot;parent_project&quot;},\n                        onDelete = ForeignKey.CASCADE,\n                        onUpdate = ForeignKey.CASCADE\n                ),\n                @ForeignKey(\n                        entity = Project.class,\n                        parentColumns = {&quot;id&quot;},\n                        childColumns = {&quot;child_project&quot;},\n                        onDelete = ForeignKey.CASCADE,\n                        onUpdate = ForeignKey.CASCADE\n                )\n        }\n)\nclass Project_Hierarchy {\n    long parent_project;\n    @ColumnInfo(index = true)\n    long child_project;\n\n    Project_Hierarchy(){}\n    Project_Hierarchy(long parent_project, long child_project) {\n        this.parent_project = parent_project;\n        this.child_project = child_project;\n    }\n}\n</code></pre>\n<p>Although not exactly the same result wise in Room you would have a POJO for getting a Project with it's nested (1st Level) projects:-</p>\n<pre><code>class ProjectWithFirstLevelNestedProjects {\n   @Embedded\n   Project project;\n   @Relation(\n           entity = Project.class,\n           parentColumn = &quot;id&quot;,\n           entityColumn = &quot;id&quot;,\n           associateBy = @Junction(value = Project_Hierarchy.class,parentColumn = &quot;parent_project&quot;, entityColumn = &quot;child_project&quot;)\n   )\n   List&lt;Project&gt; nestedProject;\n}\n</code></pre>\n<ul>\n<li>the associate by  and Junction combination is how Room knows to do the join (actually it is an equivalent to a join that is used)</li>\n</ul>\n<p>Some methods in an <code>@Dao</code> annotated <strong>interface</strong> so they are implicitly abstract <strong>BUT</strong> cannot have bodies.</p>\n<p>An abstract class, which then requires the DAO methods to be abstract but have bodies can be used and as such is more flexible.</p>\n<pre><code>@Dao\ninterface AllDAOs {\n    @Insert(onConflict = OnConflictStrategy.IGNORE)\n    long insert(Project project);\n    @Insert(onConflict = OnConflictStrategy.IGNORE)\n    long insert(Project_Hierarchy project_hierarchy);\n    @Transaction\n    @Query(&quot;SELECT * FROM project&quot;)\n    List&lt;ProjectWithFirstLevelNestedProjects&gt; getAllProjectsWithFirstLevelProjects();\n}\n</code></pre>\n<ul>\n<li>note the last method and it's apparent simplicity</li>\n</ul>\n<p>Putting it all together from a Room perspective is the <code>@Database</code> annotated class:-</p>\n<pre><code>@Database(entities = {Project.class,Project_Hierarchy.class},exportSchema = false,version = 1)\nabstract class TheDatabase extends RoomDatabase {\n\n    abstract AllDAOs getAllDAOs();\n\n    private static volatile TheDatabase instance;\n    static TheDatabase getInstance(Context context) {\n        if (instance==null) {\n            instance = Room.databaseBuilder(context,TheDatabase.class,&quot;the_database.db&quot;)\n                    .allowMainThreadQueries()\n                    .build();\n        }\n        return instance;\n    }\n}\n</code></pre>\n<ul>\n<li>note that for brevity and convenience <code>.allowMainThreadQueries</code> has been utilised, so the main thread can be used. It is not recommended to use the Main thread for an App this is to be distributed.</li>\n</ul>\n<p>Finally replicating the SQLite, noting that as we are dealing with Objects that the result will be different albeit that the underlying data in the tables will be the same. Some Activity code:-</p>\n<pre><code>public class MainActivity extends AppCompatActivity {\n    TheDatabase db;\n    AllDAOs dao;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        db = TheDatabase.getInstance(this);\n        dao = db.getAllDAOs();\n\n        long p1Id = dao.insert(new Project(&quot;P1&quot;,&quot;blah1&quot;));\n        long p2Id = dao.insert(new Project(&quot;P2&quot;,&quot;blah2&quot;));\n        long p3Id = dao.insert(new Project(&quot;P3&quot;,&quot;blah3&quot;));\n        long p4Id = dao.insert(new Project(&quot;P4&quot;,&quot;blah4&quot;));\n        long p5Id = dao.insert(new Project(&quot;P5&quot;,&quot;blah5&quot;));\n        long p6Id = dao.insert(new Project(&quot;P6&quot;,&quot;blah6&quot;));\n        long p7Id = dao.insert(new Project(&quot;P7&quot;,&quot;blah7&quot;));\n        long p8Id = dao.insert(new Project(&quot;P8&quot;,&quot;blah8&quot;));\n        long p9Id = dao.insert(new Project(&quot;P9&quot;,&quot;blah9&quot;));\n\n        dao.insert(new Project_Hierarchy(p1Id,p2Id));\n        dao.insert(new Project_Hierarchy(p1Id,p3Id));\n        dao.insert(new Project_Hierarchy(p4Id,p5Id));\n        dao.insert(new Project_Hierarchy(p2Id,p6Id));\n        dao.insert(new Project_Hierarchy(p4Id,p7Id));\n        dao.insert(new Project_Hierarchy(p6Id,p8Id));\n        dao.insert(new Project_Hierarchy(p4Id,p6Id));\n        logProjectsWithFirstLevelNestings(dao.getAllProjectsWithFirstLevelProjects());\n    }\n\n    void logProjectsWithFirstLevelNestings(List&lt;ProjectWithFirstLevelNestedProjects&gt; nestings) {\n        StringBuilder sb = new StringBuilder();\n        for (ProjectWithFirstLevelNestedProjects pwflnp: nestings) {\n            sb = new StringBuilder();\n            for (Project project: pwflnp.nestedProject) {\n                sb.append(&quot;\\n\\tNested Project Name is &quot;).append(project.name).append(&quot; ETC is &quot;).append(project.etc).append(&quot; ID is &quot;).append(project.id);\n            }\n            Log.d(&quot;DBINFO&quot;,\n                    &quot;Project is &quot; + pwflnp.project.name +\n                            &quot; ETC is &quot; + pwflnp.project.etc +\n                            &quot; ID is &quot; + pwflnp.project.id +\n                            &quot;. It has &quot; + pwflnp.nestedProject.size() + &quot; First Level Nested Projects; They are:-&quot; +\n                            sb\n            );\n        }\n    }\n}\n</code></pre>\n<p><strong>The Result</strong></p>\n<p>The output to the Log is:-</p>\n<pre><code>D/DBINFO: Project is P1 ETC is blah1 ID is 1. It has 2 First Level Nested Projects; They are:-\n        Nested Project Name is P2 ETC is blah2 ID is 2\n        Nested Project Name is P3 ETC is blah3 ID is 3\n        \n        \nD/DBINFO: Project is P2 ETC is blah2 ID is 2. It has 1 First Level Nested Projects; They are:-\n        Nested Project Name is P6 ETC is blah6 ID is 6\n        \n        \nD/DBINFO: Project is P3 ETC is blah3 ID is 3. It has 0 First Level Nested Projects; They are:-\nD/DBINFO: Project is P4 ETC is blah4 ID is 4. It has 3 First Level Nested Projects; They are:-\n        Nested Project Name is P5 ETC is blah5 ID is 5\n        Nested Project Name is P6 ETC is blah6 ID is 6\n        Nested Project Name is P7 ETC is blah7 ID is 7\n        \n        \nD/DBINFO: Project is P5 ETC is blah5 ID is 5. It has 0 First Level Nested Projects; They are:-\nD/DBINFO: Project is P6 ETC is blah6 ID is 6. It has 1 First Level Nested Projects; They are:-\n        Nested Project Name is P8 ETC is blah8 ID is 8\n        \n        \nD/DBINFO: Project is P7 ETC is blah7 ID is 7. It has 0 First Level Nested Projects; They are:-\nD/DBINFO: Project is P8 ETC is blah8 ID is 8. It has 0 First Level Nested Projects; They are:-\nD/DBINFO: Project is P9 ETC is blah9 ID is 9. It has 0 First Level Nested Projects; They are:-\n</code></pre>\n<p>This is clearly different to the original output. However the nestings are the equivalent and furthermore all Projects, nestings or not, have been output.</p>\n"}],"owner":{"account_id":17070296,"reputation":73,"user_id":13246574,"display_name":"ndaniel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75974597,"answer_count":1,"score":1,"last_activity_date":1681106035,"creation_date":1681058270,"question_id":75971714,"body_markdown":"I am currently trying to develop a time tracker app for Android. For that purpose, I want to store three things:\r\n* Projects\r\n* Tasks\r\n* Time Intervals\r\n\r\nSince I want to support nested projects and tasks, I need to be able to represent both using some hierarchical SQL schema. For now, I have chosen to go with an adjacency list due to its simplicity. The Android docs recommend to use Android Room, which is what I am going with for now.\r\n\r\nMy current goal is to implement and test the data entity and DAO for an adjacency list once, such that I can simply reuse it for the project and task database entities.\r\n\r\nI am unsure about how to properly define the most general adjacency list in Android Room. In particular, should the entities/DAOs be abstract? More importantly, how do I deal with the fact that the name of the table for project and task is different from the one I would use for the Adjacency List?\r\n\r\n\r\n```\r\n@Entity(foreignKeys = @ForeignKey(entity = AdjacencyList.class, parentColumns = &quot;id&quot;, childColumns = &quot;parent&quot;, onDelete = CASCADE, onUpdate = CASCADE, deferred = false))\r\npublic class AdjacencyList {\r\n    @PrimaryKey\r\n    public int id;\r\n    public int parent;\r\n}\r\n\r\n@Dao\r\npublic interface AdjacencyListDao {\r\n    // Queries will be coupled to the name adjacency_list\r\n    // is there a way to generalize this?\r\n    @Query(&quot;SELECT * FROM adjacency_list&quot;)\r\n    List&lt;User&gt; getAll();\r\n}\r\n\r\n```","title":"How can I properly implement an extendable adjacency list database in Android Room?","body":"<p>I am currently trying to develop a time tracker app for Android. For that purpose, I want to store three things:</p>\n<ul>\n<li>Projects</li>\n<li>Tasks</li>\n<li>Time Intervals</li>\n</ul>\n<p>Since I want to support nested projects and tasks, I need to be able to represent both using some hierarchical SQL schema. For now, I have chosen to go with an adjacency list due to its simplicity. The Android docs recommend to use Android Room, which is what I am going with for now.</p>\n<p>My current goal is to implement and test the data entity and DAO for an adjacency list once, such that I can simply reuse it for the project and task database entities.</p>\n<p>I am unsure about how to properly define the most general adjacency list in Android Room. In particular, should the entities/DAOs be abstract? More importantly, how do I deal with the fact that the name of the table for project and task is different from the one I would use for the Adjacency List?</p>\n<pre><code>@Entity(foreignKeys = @ForeignKey(entity = AdjacencyList.class, parentColumns = &quot;id&quot;, childColumns = &quot;parent&quot;, onDelete = CASCADE, onUpdate = CASCADE, deferred = false))\npublic class AdjacencyList {\n    @PrimaryKey\n    public int id;\n    public int parent;\n}\n\n@Dao\npublic interface AdjacencyListDao {\n    // Queries will be coupled to the name adjacency_list\n    // is there a way to generalize this?\n    @Query(&quot;SELECT * FROM adjacency_list&quot;)\n    List&lt;User&gt; getAll();\n}\n\n</code></pre>\n"},{"tags":["java","configuration","spring-security"],"comments":[{"owner":{"account_id":246686,"reputation":58068,"user_id":520957,"accept_rate":94,"display_name":"J&#233;r&#244;me Verstrynge"},"score":0,"creation_date":1342799736,"post_id":11581058,"comment_id":15325788,"body_markdown":"I have posted what I believe to be the correct answer to my questions. I&#39;ll give it some time for experts to give their input/feedback if necessary.","body":"I have posted what I believe to be the correct answer to my questions. I&#39;ll give it some time for experts to give their input/feedback if necessary."}],"answers":[{"tags":[],"owner":{"account_id":312560,"reputation":1308,"user_id":626698,"accept_rate":75,"display_name":"Mark Bakker"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1342794384,"creation_date":1342794384,"answer_id":11581349,"question_id":11581058,"body_markdown":"I use the following config with a custom auth providerl;\r\n\r\n\r\n\t\t&lt;authentication-manager&gt;\r\n\r\n\t\t\t&lt;authentication-provider user-service-ref=&quot;myUserDetailsService&quot;&gt;\r\n\t\t\t\t&lt;password-encoder hash=&quot;md5&quot;&gt;\r\n\t\t\t\t\t&lt;salt-source user-property=&quot;username&quot; /&gt;\r\n\t\t\t\t&lt;/password-encoder&gt;\r\n\t\t\t&lt;/authentication-provider&gt;\r\n\t\t&lt;/authentication-manager&gt;\r\n\r\n\t\t&lt;beans:bean id=&quot;myUserDetailsService&quot; autowire=&quot;byType&quot; class=&quot;my.user.UserDetailsServiceImpl&quot;&gt;\r\n\t\t\t&lt;beans:property name=&quot;userManagementService&quot; ref=&quot;userManagementService&quot;&gt;&lt;/beans:property&gt;\r\n\t\t&lt;/beans:bean&gt;\r\n\r\n","title":"How to set-up and configure a ProviderManager using Spring Security namespace?","body":"<p>I use the following config with a custom auth providerl;</p>\n\n<pre><code>    &lt;authentication-manager&gt;\n\n        &lt;authentication-provider user-service-ref=\"myUserDetailsService\"&gt;\n            &lt;password-encoder hash=\"md5\"&gt;\n                &lt;salt-source user-property=\"username\" /&gt;\n            &lt;/password-encoder&gt;\n        &lt;/authentication-provider&gt;\n    &lt;/authentication-manager&gt;\n\n    &lt;beans:bean id=\"myUserDetailsService\" autowire=\"byType\" class=\"my.user.UserDetailsServiceImpl\"&gt;\n        &lt;beans:property name=\"userManagementService\" ref=\"userManagementService\"&gt;&lt;/beans:property&gt;\n    &lt;/beans:bean&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":246686,"reputation":58068,"user_id":520957,"accept_rate":94,"display_name":"J&#233;r&#244;me Verstrynge"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1342799655,"creation_date":1342799655,"answer_id":11582846,"question_id":11581058,"body_markdown":"&gt; In other words, will such configuration automatically create an\r\n&gt; instance of ProviderManager:\r\n\r\n\r\nAccording to section B2 of the appendix, the answer is yes.\r\n\r\n&gt; Assuming I would want to plug my own implementation of\r\n&gt; AuthenticationManager, how would I configure this using the namespace?\r\n\r\n\r\nAccording to section B.3.1:\r\n\r\n    &lt;global-method-security authentication-manager-ref=&quot;...&quot; &gt;\r\n\r\n\r\n&gt; What is the right way to declare the list of AuthenticationProvider?\r\n\r\nFrom a [blog post][1], instead of using `&lt;authentication-manager&gt; ... &lt;/authentication-manager&gt;`, one should use something like similar to this:\r\n\r\n    &lt;bean id=&quot;authenticationManager&quot; class=&quot;org.springframework.security.authentication.ProviderManager&quot;&gt;\r\n        &lt;property name=&quot;providers&quot;&gt;\r\n            &lt;list&gt;\r\n                &lt;ref bean=&quot;authenticationProvider&quot; /&gt;\r\n                &lt;ref bean=&quot;anonymousProvider&quot; /&gt;\r\n            &lt;/list&gt;\r\n        &lt;/property&gt;\r\n    &lt;/bean&gt;\r\n \r\n    &lt;bean id=&quot;authenticationProvider&quot; class=&quot;org.springframework.security.authentication.dao.DaoAuthenticationProvider&quot;&gt;\r\n        &lt;property name=&quot;passwordEncoder&quot;&gt;\r\n            &lt;bean class=&quot;org.springframework.security.authentication.encoding.Md5PasswordEncoder&quot; /&gt;\r\n        &lt;/property&gt;\r\n        &lt;property name=&quot;userDetailsService&quot; ref=&quot;userService&quot; /&gt;\r\n    &lt;/bean&gt;\r\n \r\n    &lt;bean id=&quot;anonymousProvider&quot; class=&quot;org.springframework.security.authentication.AnonymousAuthenticationProvider&quot;&gt;\r\n        &lt;property name=&quot;key&quot; value=&quot;SomeUniqueKeyForThisApplication&quot; /&gt;\r\n    &lt;/bean&gt;\r\n\r\n\r\n  [1]: http://blog.springsource.org/2010/03/06/behind-the-spring-security-namespace/","title":"How to set-up and configure a ProviderManager using Spring Security namespace?","body":"<blockquote>\n  <p>In other words, will such configuration automatically create an\n  instance of ProviderManager:</p>\n</blockquote>\n\n<p>According to section B2 of the appendix, the answer is yes.</p>\n\n<blockquote>\n  <p>Assuming I would want to plug my own implementation of\n  AuthenticationManager, how would I configure this using the namespace?</p>\n</blockquote>\n\n<p>According to section B.3.1:</p>\n\n<pre><code>&lt;global-method-security authentication-manager-ref=\"...\" &gt;\n</code></pre>\n\n<blockquote>\n  <p>What is the right way to declare the list of AuthenticationProvider?</p>\n</blockquote>\n\n<p>From a <a href=\"http://blog.springsource.org/2010/03/06/behind-the-spring-security-namespace/\" rel=\"nofollow\">blog post</a>, instead of using <code>&lt;authentication-manager&gt; ... &lt;/authentication-manager&gt;</code>, one should use something like similar to this:</p>\n\n<pre><code>&lt;bean id=\"authenticationManager\" class=\"org.springframework.security.authentication.ProviderManager\"&gt;\n    &lt;property name=\"providers\"&gt;\n        &lt;list&gt;\n            &lt;ref bean=\"authenticationProvider\" /&gt;\n            &lt;ref bean=\"anonymousProvider\" /&gt;\n        &lt;/list&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"authenticationProvider\" class=\"org.springframework.security.authentication.dao.DaoAuthenticationProvider\"&gt;\n    &lt;property name=\"passwordEncoder\"&gt;\n        &lt;bean class=\"org.springframework.security.authentication.encoding.Md5PasswordEncoder\" /&gt;\n    &lt;/property&gt;\n    &lt;property name=\"userDetailsService\" ref=\"userService\" /&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"anonymousProvider\" class=\"org.springframework.security.authentication.AnonymousAuthenticationProvider\"&gt;\n    &lt;property name=\"key\" value=\"SomeUniqueKeyForThisApplication\" /&gt;\n&lt;/bean&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25995041,"reputation":21,"user_id":19706579,"display_name":"Prashik Hingaspure"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1681105289,"creation_date":1681105289,"answer_id":75974543,"question_id":11581058,"body_markdown":"These answers are outdated. Sprinboot3 and Spring security 6 doesnot support these configuration any more","title":"How to set-up and configure a ProviderManager using Spring Security namespace?","body":"<p>These answers are outdated. Sprinboot3 and Spring security 6 doesnot support these configuration any more</p>\n"}],"owner":{"account_id":246686,"reputation":58068,"user_id":520957,"accept_rate":94,"display_name":"J&#233;r&#244;me Verstrynge"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15080,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":11582846,"answer_count":3,"score":7,"last_activity_date":1681105289,"creation_date":1342793296,"question_id":11581058,"body_markdown":"Spring documentation says that `ProviderManager` is the default implementation of the `AuthenticationManager`, but is an instance of `ProviderManager` automatically created and wired by the security namespace?\r\n\r\nIn other words, will such configuration automatically create an instance of `ProviderManager`:\r\n\r\n    &lt;authentication-manager&gt;\r\n        &lt;authentication-provider&gt;\r\n           &lt;password-encoder hash=&quot;md5&quot;/&gt;\r\n           &lt;jdbc-user-service data-source-ref=&quot;dataSource&quot;/&gt;\r\n        &lt;/authentication-provider&gt;\r\n    &lt;/authentication-manager&gt;\r\n\r\nElse, what do I need to do (or declare)?\r\n\r\nAssuming I would want to plug my own implementation of `AuthenticationManager`, how would I configure this using the namespace?\r\n\r\nI also want to specify which `AuthenticationProvider` should be registered in the `ProviderManager`. I have found the following piece of configuration code:\r\n\r\n    &lt;bean id=&quot;authenticationManager&quot;\r\n        class=&quot;org.springframework.security.authentication.ProviderManager&quot;&gt;\r\n        &lt;property name=&quot;providers&quot;&gt;\r\n            &lt;list&gt;\r\n                &lt;ref local=&quot;daoAuthenticationProvider&quot;/&gt;\r\n                &lt;ref local=&quot;anonymousAuthenticationProvider&quot;/&gt;\r\n            &lt;/list&gt; \r\n        &lt;/property&gt;\r\n    &lt;/bean&gt;\r\n\r\nBut is it enough? What is the right way to declare the list of `AuthenticationProvider`? Documentation is not very clear and complete regarding this issue. \r\n\r\n\r\n\r\n","title":"How to set-up and configure a ProviderManager using Spring Security namespace?","body":"<p>Spring documentation says that <code>ProviderManager</code> is the default implementation of the <code>AuthenticationManager</code>, but is an instance of <code>ProviderManager</code> automatically created and wired by the security namespace?</p>\n\n<p>In other words, will such configuration automatically create an instance of <code>ProviderManager</code>:</p>\n\n<pre><code>&lt;authentication-manager&gt;\n    &lt;authentication-provider&gt;\n       &lt;password-encoder hash=\"md5\"/&gt;\n       &lt;jdbc-user-service data-source-ref=\"dataSource\"/&gt;\n    &lt;/authentication-provider&gt;\n&lt;/authentication-manager&gt;\n</code></pre>\n\n<p>Else, what do I need to do (or declare)?</p>\n\n<p>Assuming I would want to plug my own implementation of <code>AuthenticationManager</code>, how would I configure this using the namespace?</p>\n\n<p>I also want to specify which <code>AuthenticationProvider</code> should be registered in the <code>ProviderManager</code>. I have found the following piece of configuration code:</p>\n\n<pre><code>&lt;bean id=\"authenticationManager\"\n    class=\"org.springframework.security.authentication.ProviderManager\"&gt;\n    &lt;property name=\"providers\"&gt;\n        &lt;list&gt;\n            &lt;ref local=\"daoAuthenticationProvider\"/&gt;\n            &lt;ref local=\"anonymousAuthenticationProvider\"/&gt;\n        &lt;/list&gt; \n    &lt;/property&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>But is it enough? What is the right way to declare the list of <code>AuthenticationProvider</code>? Documentation is not very clear and complete regarding this issue. </p>\n"},{"tags":["java","android","networking"],"answers":[{"tags":[],"owner":{"account_id":1931338,"reputation":192,"user_id":1740663,"display_name":"chksr"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1539344467,"creation_date":1508102114,"answer_id":46760070,"question_id":39823886,"body_markdown":"my way (Android &gt;= 22)\r\n    \r\n   \r\n\r\n    int getDefaultDataSubscriptionId(final SubscriptionManager subscriptionManager)  {\r\n            if (android.os.Build.VERSION.SDK_INT &gt;= 24)  {\r\n                int nDataSubscriptionId = SubscriptionManager.getDefaultDataSubscriptionId();\r\n    \r\n                if (nDataSubscriptionId != SubscriptionManager.INVALID_SUBSCRIPTION_ID)  {\r\n                    return (nDataSubscriptionId);\r\n                }\r\n            }\r\n            \r\n            try  {\r\n                Class&lt;?&gt; subscriptionClass = Class.forName(subscriptionManager.getClass().getName());\r\n                try {\r\n                    Method getDefaultDataSubscriptionId = subscriptionClass.getMethod(&quot;getDefaultDataSubId&quot;);\r\n    \r\n                    try {\r\n                        return ((int) getDefaultDataSubscriptionId.invoke(subscriptionManager));\r\n                    }\r\n                    catch (IllegalAccessException e1) {\r\n                        e1.printStackTrace();\r\n                    } catch (InvocationTargetException e1) {\r\n                        e1.printStackTrace();\r\n                    }\r\n                } catch (NoSuchMethodException e1) {\r\n                    e1.printStackTrace();\r\n                }\r\n            } catch (ClassNotFoundException e1) {\r\n                e1.printStackTrace();\r\n            }\r\n            \r\n            return (SubscriptionManager.INVALID_SUBSCRIPTION_ID);\r\n        }\r\n    \r\n        @TargetApi(22)\r\n        public String getUIText22(final TelephonyManager telephonyManager) {\r\n            SubscriptionManager subscriptionManager = (SubscriptionManager) getContext().getApplicationContext().getSystemService(Context.TELEPHONY_SUBSCRIPTION_SERVICE);\r\n    \r\n            int nDataSubscriptionId = getDefaultDataSubscriptionId(subscriptionManager);\r\n    \r\n            if (nDataSubscriptionId != SubscriptionManager.INVALID_SUBSCRIPTION_ID) {\r\n                SubscriptionInfo si = subscriptionManager.getActiveSubscriptionInfo(nDataSubscriptionId);\r\n    \r\n                if (si != null) {\r\n                    return (si.getCarrierName().toString());\r\n                }\r\n            }\r\n        }\r\n\r\n","title":"Check mobile data is on from sim one or sim two android","body":"<p>my way (Android >= 22)</p>\n\n<pre><code>int getDefaultDataSubscriptionId(final SubscriptionManager subscriptionManager)  {\n        if (android.os.Build.VERSION.SDK_INT &gt;= 24)  {\n            int nDataSubscriptionId = SubscriptionManager.getDefaultDataSubscriptionId();\n\n            if (nDataSubscriptionId != SubscriptionManager.INVALID_SUBSCRIPTION_ID)  {\n                return (nDataSubscriptionId);\n            }\n        }\n\n        try  {\n            Class&lt;?&gt; subscriptionClass = Class.forName(subscriptionManager.getClass().getName());\n            try {\n                Method getDefaultDataSubscriptionId = subscriptionClass.getMethod(\"getDefaultDataSubId\");\n\n                try {\n                    return ((int) getDefaultDataSubscriptionId.invoke(subscriptionManager));\n                }\n                catch (IllegalAccessException e1) {\n                    e1.printStackTrace();\n                } catch (InvocationTargetException e1) {\n                    e1.printStackTrace();\n                }\n            } catch (NoSuchMethodException e1) {\n                e1.printStackTrace();\n            }\n        } catch (ClassNotFoundException e1) {\n            e1.printStackTrace();\n        }\n\n        return (SubscriptionManager.INVALID_SUBSCRIPTION_ID);\n    }\n\n    @TargetApi(22)\n    public String getUIText22(final TelephonyManager telephonyManager) {\n        SubscriptionManager subscriptionManager = (SubscriptionManager) getContext().getApplicationContext().getSystemService(Context.TELEPHONY_SUBSCRIPTION_SERVICE);\n\n        int nDataSubscriptionId = getDefaultDataSubscriptionId(subscriptionManager);\n\n        if (nDataSubscriptionId != SubscriptionManager.INVALID_SUBSCRIPTION_ID) {\n            SubscriptionInfo si = subscriptionManager.getActiveSubscriptionInfo(nDataSubscriptionId);\n\n            if (si != null) {\n                return (si.getCarrierName().toString());\n            }\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5438128,"reputation":11717,"user_id":4326936,"accept_rate":39,"display_name":"alijandro"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1591965443,"creation_date":1591965443,"answer_id":62344442,"question_id":39823886,"body_markdown":"Here is a simple solution to get current active data sim operator for dual sim environment. It works after api level 22.\r\n\r\n```\r\n    public static String getDataSimOperator(Context context) {\r\n        if (context == null) {\r\n            return null;\r\n        }\r\n\r\n        TelephonyManager tm = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);\r\n        if (tm != null) {\r\n            if (android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.LOLLIPOP_MR1) {\r\n                if (android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.N) {\r\n                    int dataSubId = SubscriptionManager.getDefaultDataSubscriptionId();\r\n                    TelephonyManager dataSimManager = tm.createForSubscriptionId(dataSubId);\r\n                    return dataSimManager.getSimOperator();\r\n                } else {\r\n                    String operator = getDataSimOperatorBeforeN(context);\r\n                    if (operator != null) {\r\n                        return operator;\r\n                    } else {\r\n                        return tm.getSimOperator();\r\n                    }\r\n                }\r\n            } else {\r\n                return tm.getSimOperator();\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    @RequiresApi(api = Build.VERSION_CODES.LOLLIPOP_MR1)\r\n    private static String getDataSimOperatorBeforeN(Context context) {\r\n        if (context == null) {\r\n            return null;\r\n        }\r\n\r\n        int dataSubId = -1;\r\n        try {\r\n            Method getDefaultDataSubId = SubscriptionManager.class.getDeclaredMethod(&quot;getDefaultDataSubId&quot;);\r\n            if (getDefaultDataSubId != null) {\r\n                getDefaultDataSubId.setAccessible(true);\r\n                dataSubId = (int) getDefaultDataSubId.invoke(null);\r\n            }\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n        if (dataSubId != -1) {\r\n            SubscriptionManager sm = (SubscriptionManager) context.getSystemService(Context.TELEPHONY_SUBSCRIPTION_SERVICE);\r\n            if (sm != null &amp;&amp; ActivityCompat.checkSelfPermission(context, Manifest.permission.READ_PHONE_STATE)\r\n                    == PackageManager.PERMISSION_GRANTED) {\r\n                SubscriptionInfo si = sm.getActiveSubscriptionInfo(dataSubId);\r\n                if (si != null) {\r\n                    // format keep the same with android.telephony.TelephonyManager#getSimOperator\r\n                    // MCC + MNC format\r\n                    return String.valueOf(si.getMcc()) + si.getMnc();\r\n                }\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n```","title":"Check mobile data is on from sim one or sim two android","body":"<p>Here is a simple solution to get current active data sim operator for dual sim environment. It works after api level 22.</p>\n\n<pre><code>    public static String getDataSimOperator(Context context) {\n        if (context == null) {\n            return null;\n        }\n\n        TelephonyManager tm = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);\n        if (tm != null) {\n            if (android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.LOLLIPOP_MR1) {\n                if (android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.N) {\n                    int dataSubId = SubscriptionManager.getDefaultDataSubscriptionId();\n                    TelephonyManager dataSimManager = tm.createForSubscriptionId(dataSubId);\n                    return dataSimManager.getSimOperator();\n                } else {\n                    String operator = getDataSimOperatorBeforeN(context);\n                    if (operator != null) {\n                        return operator;\n                    } else {\n                        return tm.getSimOperator();\n                    }\n                }\n            } else {\n                return tm.getSimOperator();\n            }\n        }\n        return null;\n    }\n\n    @RequiresApi(api = Build.VERSION_CODES.LOLLIPOP_MR1)\n    private static String getDataSimOperatorBeforeN(Context context) {\n        if (context == null) {\n            return null;\n        }\n\n        int dataSubId = -1;\n        try {\n            Method getDefaultDataSubId = SubscriptionManager.class.getDeclaredMethod(\"getDefaultDataSubId\");\n            if (getDefaultDataSubId != null) {\n                getDefaultDataSubId.setAccessible(true);\n                dataSubId = (int) getDefaultDataSubId.invoke(null);\n            }\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n        if (dataSubId != -1) {\n            SubscriptionManager sm = (SubscriptionManager) context.getSystemService(Context.TELEPHONY_SUBSCRIPTION_SERVICE);\n            if (sm != null &amp;&amp; ActivityCompat.checkSelfPermission(context, Manifest.permission.READ_PHONE_STATE)\n                    == PackageManager.PERMISSION_GRANTED) {\n                SubscriptionInfo si = sm.getActiveSubscriptionInfo(dataSubId);\n                if (si != null) {\n                    // format keep the same with android.telephony.TelephonyManager#getSimOperator\n                    // MCC + MNC format\n                    return String.valueOf(si.getMcc()) + si.getMnc();\n                }\n            }\n        }\n        return null;\n    }\n</code></pre>\n"}],"owner":{"account_id":8391539,"reputation":11,"user_id":6300122,"display_name":"looie"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2652,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1681105233,"creation_date":1475462282,"question_id":39823886,"body_markdown":"Is there anyway to check mobile data is active from sim 1 or sim 2 in Android programmatically?? \r\n\r\nAlso i want to get the carrier provider in which the data is active. \r\n\r\nEq : \r\nsim 1 : carrier 1\r\nSim 2 : carrier 2\r\n\r\nIf data is active on sim 2 \r\nIt should return the carrier 2 name. \r\n\r\n","title":"Check mobile data is on from sim one or sim two android","body":"<p>Is there anyway to check mobile data is active from sim 1 or sim 2 in Android programmatically?? </p>\n\n<p>Also i want to get the carrier provider in which the data is active. </p>\n\n<p>Eq : \nsim 1 : carrier 1\nSim 2 : carrier 2</p>\n\n<p>If data is active on sim 2 \nIt should return the carrier 2 name. </p>\n"},{"tags":["java","for-loop","while-loop"],"answers":[{"tags":[],"owner":{"account_id":1040676,"reputation":61,"user_id":1046766,"display_name":"bulgakov"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681104844,"creation_date":1681104413,"answer_id":75974482,"question_id":75974447,"body_markdown":"```java\r\npublic static void main(String[] args) {\r\n    int sum = 0;\r\n\r\n    Scanner sc = new Scanner(System.in);\r\n\r\n    for (int counter = 1; counter &lt;= 5; counter++) {\r\n        System.out.println(&quot;Enter number #&quot; + counter + &quot;:&quot;);\r\n        String nextNum = sc.nextLine();\r\n\r\n        try {\r\n            int num = Integer.parseInt(nextNum);\r\n            sum += num;\r\n        } catch (NumberFormatException e) {\r\n            System.out.println(&quot;Invalid Number!&quot;);\r\n            counter--;\r\n        }\r\n    }\r\n}\r\n```","title":"How to convert this WHILE LOOP to FOR LOOP?","body":"<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) {\n    int sum = 0;\n\n    Scanner sc = new Scanner(System.in);\n\n    for (int counter = 1; counter &lt;= 5; counter++) {\n        System.out.println(&quot;Enter number #&quot; + counter + &quot;:&quot;);\n        String nextNum = sc.nextLine();\n\n        try {\n            int num = Integer.parseInt(nextNum);\n            sum += num;\n        } catch (NumberFormatException e) {\n            System.out.println(&quot;Invalid Number!&quot;);\n            counter--;\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":25654681,"reputation":1,"user_id":19421328,"display_name":"Eriz Rai"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1681285239,"answer_count":1,"score":-2,"last_activity_date":1681104844,"creation_date":1681103944,"question_id":75974447,"body_markdown":"```java\r\npackage scannerConsole;\r\n\r\nimport java.util.Scanner;\r\n\r\npublic class ReadingInputChallenge {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tint counter = 1;\r\n\t\tint sum = 0;\r\n\r\n\t\tScanner sc = new Scanner(System.in);\r\n\r\n\t\twhile (counter &lt;= 5) {\r\n\t\t\tSystem.out.println(&quot;Enter number #&quot; + counter + &quot;:&quot;);\r\n\t\t\tString nextNum = sc.nextLine();\r\n\r\n\t\t\ttry {\r\n\t\t\t\tint num = Integer.parseInt(nextNum);\r\n\t\t\t\tcounter++;\r\n\t\t\t\tsum += num;\r\n\t\t\t} catch (NumberFormatException e) {\r\n\t\t\t\tSystem.out.println(&quot;Invalid Number!&quot;);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n```","title":"How to convert this WHILE LOOP to FOR LOOP?","body":"<pre class=\"lang-java prettyprint-override\"><code>package scannerConsole;\n\nimport java.util.Scanner;\n\npublic class ReadingInputChallenge {\n\n    public static void main(String[] args) {\n        int counter = 1;\n        int sum = 0;\n\n        Scanner sc = new Scanner(System.in);\n\n        while (counter &lt;= 5) {\n            System.out.println(&quot;Enter number #&quot; + counter + &quot;:&quot;);\n            String nextNum = sc.nextLine();\n\n            try {\n                int num = Integer.parseInt(nextNum);\n                counter++;\n                sum += num;\n            } catch (NumberFormatException e) {\n                System.out.println(&quot;Invalid Number!&quot;);\n            }\n        }\n\n    }\n\n}\n</code></pre>\n"},{"tags":["java","format","locale","currency","price"],"answers":[{"comments":[{"owner":{"account_id":26730682,"reputation":1,"user_id":20333085,"display_name":"Siddhant"},"score":0,"creation_date":1681156073,"post_id":75974143,"comment_id":134008128,"body_markdown":"The given regular expression assumes the currency symbol is at the start, the fraction is at the end and does not consider the comma separator for thousand . Can you help me update the regex for sample values like:\n1,213.22 $\nR$ 1213,22","body":"The given regular expression assumes the currency symbol is at the start, the fraction is at the end and does not consider the comma separator for thousand . Can you help me update the regex for sample values like: 1,213.22 $ R$ 1213,22"},{"owner":{"account_id":26730682,"reputation":1,"user_id":20333085,"display_name":"Siddhant"},"score":0,"creation_date":1681156660,"post_id":75974143,"comment_id":134008247,"body_markdown":"I was able to update it for the below 2 sample data like:\n```^([A-Z]*\\p{Sc})\\s*(\\d+)(,*)(\\d+)([,.])(\\d\\d)$```\n\n$ 1,213.22\nR$ 1213,22\n\nBut the one where currency symbol can be at the end is still pending..","body":"I was able to update it for the below 2 sample data like: <code>^([A-Z]*\\p{Sc})\\s*(\\d+)(,*)(\\d+)([,.])(\\d\\d)$</code>  $ 1,213.22 R$ 1213,22  But the one where currency symbol can be at the end is still pending.."},{"owner":{"account_id":19359275,"reputation":81,"user_id":14154849,"display_name":"Kaustubh"},"score":0,"creation_date":1681200672,"post_id":75974143,"comment_id":134013911,"body_markdown":"`^(\\p{Sc}|\\p{Sc}\\s)?(\\d{1,3}(?:[., ]\\d{3})*)([,.])(\\d{2})\\s?(\\p{Sc})?$` I believe this should fit your case.","body":"<code>^(\\p{Sc}|\\p{Sc}\\s)?(\\d{1,3}(?:[., ]\\d{3})*)([,.])(\\d{2})\\s?(\\p{Sc})?$</code> I believe this should fit your case."}],"tags":[],"owner":{"account_id":19359275,"reputation":81,"user_id":14154849,"display_name":"Kaustubh"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681104191,"creation_date":1681098229,"answer_id":75974143,"question_id":75973896,"body_markdown":"1) You can create a class like this and have methods to return the value you want.\r\n\r\n        public class Price {\r\n        private String currency;\r\n        private String separator;\r\n        private int wholePrice;\r\n        private int fractionalPrice;\r\n    \r\n        public Price(String currency, String separator, int wholePrice, int fractionalPrice) {\r\n            this.currency = currency;\r\n            this.separator = separator;\r\n            this.wholePrice = wholePrice;\r\n            this.fractionalPrice = fractionalPrice;\r\n        }\r\n    \r\n        public String getCurrency() {\r\n            return currency;\r\n        }\r\n    \r\n        public String getSeparator() {\r\n            return separator;\r\n        }\r\n    \r\n        public int getWholePrice() {\r\n            return wholePrice;\r\n        }\r\n    \r\n        public int getFractionalPrice() {\r\n            return fractionalPrice;\r\n        }\r\n        }\r\n\r\nOr if immutable, use a [record][1]. \r\n\r\n    record Price ( String currency, String separator, int wholePrice, int fractionalPrice ) {}\r\n    \r\n\r\n2) And then have this code to update your class and this way you will be able to access any attribute as required.\r\n\r\n    ```String priceStr = &quot;$ 1213.22&quot;;\r\n    Pattern pattern = Pattern.compile(&quot;^(\\\\p{Sc})\\\\s*(\\\\d+)([,.])(\\\\d+)$&quot;);\r\n    Matcher matcher = pattern.matcher(priceStr);\r\n    \r\n    if (matcher.find()) {\r\n        String currency = matcher.group(1);\r\n        String separator = matcher.group(3);\r\n        int wholePrice = Integer.parseInt(matcher.group(2));\r\n        int fractionalPrice = Integer.parseInt(matcher.group(4));\r\n        Price price = new Price(currency, separator, wholePrice, fractionalPrice);\r\n        System.out.println(&quot;Currency: &quot; + price.getCurrency());\r\n        System.out.println(&quot;Separator: &quot; + price.getSeparator());\r\n        System.out.println(&quot;Whole price: &quot; + price.getWholePrice());\r\n        System.out.println(&quot;Fractional price: &quot; + price.getFractionalPrice());\r\n    } else {\r\n        System.out.println(&quot;Invalid price format&quot;);\r\n    }\r\n\r\n\r\nHope This helps\r\n\r\n\r\n  [1]: https://openjdk.org/jeps/395","title":"How to extract currency and number attributes from a sample price in java","body":"<ol>\n<li><p>You can create a class like this and have methods to return the value you want.</p>\n<pre><code> public class Price {\n private String currency;\n private String separator;\n private int wholePrice;\n private int fractionalPrice;\n\n public Price(String currency, String separator, int wholePrice, int fractionalPrice) {\n     this.currency = currency;\n     this.separator = separator;\n     this.wholePrice = wholePrice;\n     this.fractionalPrice = fractionalPrice;\n }\n\n public String getCurrency() {\n     return currency;\n }\n\n public String getSeparator() {\n     return separator;\n }\n\n public int getWholePrice() {\n     return wholePrice;\n }\n\n public int getFractionalPrice() {\n     return fractionalPrice;\n }\n }\n</code></pre>\n</li>\n</ol>\n<p>Or if immutable, use a <a href=\"https://openjdk.org/jeps/395\" rel=\"nofollow noreferrer\">record</a>.</p>\n<pre><code>record Price ( String currency, String separator, int wholePrice, int fractionalPrice ) {}\n</code></pre>\n<ol start=\"2\">\n<li><p>And then have this code to update your class and this way you will be able to access any attribute as required.</p>\n<pre><code>Pattern pattern = Pattern.compile(&quot;^(\\\\p{Sc})\\\\s*(\\\\d+)([,.])(\\\\d+)$&quot;);\nMatcher matcher = pattern.matcher(priceStr);\n\nif (matcher.find()) {\n    String currency = matcher.group(1);\n    String separator = matcher.group(3);\n    int wholePrice = Integer.parseInt(matcher.group(2));\n    int fractionalPrice = Integer.parseInt(matcher.group(4));\n    Price price = new Price(currency, separator, wholePrice, fractionalPrice);\n    System.out.println(&quot;Currency: &quot; + price.getCurrency());\n    System.out.println(&quot;Separator: &quot; + price.getSeparator());\n    System.out.println(&quot;Whole price: &quot; + price.getWholePrice());\n    System.out.println(&quot;Fractional price: &quot; + price.getFractionalPrice());\n} else {\n    System.out.println(&quot;Invalid price format&quot;);\n}\n\n\n</code></pre>\n</li>\n</ol>\n<p>Hope This helps</p>\n"}],"owner":{"account_id":26730682,"reputation":1,"user_id":20333085,"display_name":"Siddhant"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":162,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681104191,"creation_date":1681093404,"question_id":75973896,"body_markdown":"I am retrieving different values for my product price in different currencies\r\nEg:\r\n```\r\n$ 1213.22\r\n1213\\.22 $\r\nR$ 1213,22\r\n```\r\nI want to store these values in a formatted Java object such that I can extract:\r\n\r\n1. The currency symbol\r\n2. The separator between whole price and fractional price\r\n3. The whole price\r\n4. The fractional price\r\n\r\nIs there a utility to do this apart from using regex?\r\n\r\n**Solutions explored**\r\n\r\n1. I cant find a way to reverse engineer the below solution so that I can get NumberFormat to accept my retrieved values\r\n\r\n   ```\r\n   java.util.Currency usd = java.util.Currency.getInstance(&quot;USD&quot;);\r\n   java.text.NumberFormat format = java.text.NumberFormat.getCurrencyInstance(Locale.US);\r\n   format.setCurrency(usd);\r\n   ```\r\n\r\n2. Same problem as no.1\r\n \r\n   ```\r\n   StringBuilder builder=new StringBuilder();\r\n   Formatter f=new Formatter(builder);\r\n   f.format(Locale.FRANCE,&quot;%.5f&quot;, -1325.789);\r\n   ```","title":"How to extract currency and number attributes from a sample price in java","body":"<p>I am retrieving different values for my product price in different currencies\nEg:</p>\n<pre><code>$ 1213.22\n1213\\.22 $\nR$ 1213,22\n</code></pre>\n<p>I want to store these values in a formatted Java object such that I can extract:</p>\n<ol>\n<li>The currency symbol</li>\n<li>The separator between whole price and fractional price</li>\n<li>The whole price</li>\n<li>The fractional price</li>\n</ol>\n<p>Is there a utility to do this apart from using regex?</p>\n<p><strong>Solutions explored</strong></p>\n<ol>\n<li><p>I cant find a way to reverse engineer the below solution so that I can get NumberFormat to accept my retrieved values</p>\n<pre><code>java.util.Currency usd = java.util.Currency.getInstance(&quot;USD&quot;);\njava.text.NumberFormat format = java.text.NumberFormat.getCurrencyInstance(Locale.US);\nformat.setCurrency(usd);\n</code></pre>\n</li>\n<li><p>Same problem as no.1</p>\n<pre><code>StringBuilder builder=new StringBuilder();\nFormatter f=new Formatter(builder);\nf.format(Locale.FRANCE,&quot;%.5f&quot;, -1325.789);\n</code></pre>\n</li>\n</ol>\n"},{"tags":["java","encoding"],"comments":[{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":3,"creation_date":1681003823,"post_id":75968378,"comment_id":133989215,"body_markdown":"You don&#39;t need to explicitly add support for other languages.  What you&#39;ve described here _should_ work; which means that there are details that you haven&#39;t told us.  Can you perhaps show us the test code, and the full code for the method that you&#39;re testing?","body":"You don&#39;t need to explicitly add support for other languages.  What you&#39;ve described here <i>should</i> work; which means that there are details that you haven&#39;t told us.  Can you perhaps show us the test code, and the full code for the method that you&#39;re testing?"},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":1,"creation_date":1681004018,"post_id":75968378,"comment_id":133989231,"body_markdown":"Likely you didn&#39;t specify the decoder correctly, so the decoding produces these placeholder characters.  You&#39;ll need to show us the full code.","body":"Likely you didn&#39;t specify the decoder correctly, so the decoding produces these placeholder characters.  You&#39;ll need to show us the full code."},{"owner":{"account_id":28225169,"reputation":35,"user_id":21575309,"display_name":"John_Cena"},"score":0,"creation_date":1681006673,"post_id":75968378,"comment_id":133989420,"body_markdown":"yes I know, that is not the mistake tho I forgot about it while writing example","body":"yes I know, that is not the mistake tho I forgot about it while writing example"},{"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"score":3,"creation_date":1681007717,"post_id":75968378,"comment_id":133989469,"body_markdown":"Your question shows code that makes no sense (`String str = str.substring(0, 2);`). Instead of pasting code snippets into your question, show us the complete method that is causing you problems. Help us to help you.","body":"Your question shows code that makes no sense (<code>String str = str.substring(0, 2);</code>). Instead of pasting code snippets into your question, show us the complete method that is causing you problems. Help us to help you."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1681015521,"post_id":75968378,"comment_id":133989926,"body_markdown":"We need a [MCVE](https://stackoverflow.com/help/mcve).","body":"We need a <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a>."}],"answers":[{"tags":[],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1681058037,"creation_date":1681016746,"answer_id":75968851,"question_id":75968378,"body_markdown":"Just use the call to `substring`. That works, at least in your particular case. \r\n\r\n    System.out.println( &quot;наше&quot;.substring( 0 , 2 ) );\r\n\r\nSee that code [run at Ideone.com][1].\r\n\r\n&gt;на\r\n\r\nYour text is composed of `CYRILLIC SMALL LETTER` characters, defined within the [Cyrillic block in Unicode][2].\r\n\r\nIf your text still does not appear correctly, verify that your console app is set to handle text in [UTF-8][3] encoding. \r\n\r\nIf you are new to character sets and character encoding, read this surprisingly entertaining post, [*The Absolute Minimum Every Software Developer Absolutely, Positively Must Know About Unicode and Character Sets (No Excuses!)*][4]. \r\n\r\n----------\r\n\r\n\r\nUsing `String#substring` does *not* work with all Unicode text. Works only with text composed of characters entirely from the [*Basic Multilingual Plane*][5], the first 64K of the 149,186 characters defined in Unicode. \r\n\r\nTo manipulate all Unicode text, you will need to learn about [code point][6] integers and the inherent complexities of digitally representing text.\r\n\r\n    &quot;наше&quot;.codePoints().forEach( System.out :: println );\r\n\r\n```none\r\n1085\r\n1072\r\n1096\r\n1077\r\n```\r\n\r\n\r\n  [1]: https://ideone.com/Z1lnsF\r\n  [2]: https://en.wikipedia.org/wiki/List_of_Unicode_characters#Cyrillic\r\n  [3]: https://en.wikipedia.org/wiki/UTF-8\r\n  [4]: https://www.joelonsoftware.com/2003/10/08/the-absolute-minimum-every-software-developer-absolutely-positively-must-know-about-unicode-and-character-sets-no-excuses/\r\n  [5]: https://en.wikipedia.org/wiki/Plane_(Unicode)#Basic_Multilingual_Plane\r\n  [6]: https://en.wikipedia.org/wiki/Code_point","title":"Java - Strings in different languages","body":"<p>Just use the call to <code>substring</code>. That works, at least in your particular case.</p>\n<pre><code>System.out.println( &quot;наше&quot;.substring( 0 , 2 ) );\n</code></pre>\n<p>See that code <a href=\"https://ideone.com/Z1lnsF\" rel=\"nofollow noreferrer\">run at Ideone.com</a>.</p>\n<blockquote>\n<p>на</p>\n</blockquote>\n<p>Your text is composed of <code>CYRILLIC SMALL LETTER</code> characters, defined within the <a href=\"https://en.wikipedia.org/wiki/List_of_Unicode_characters#Cyrillic\" rel=\"nofollow noreferrer\">Cyrillic block in Unicode</a>.</p>\n<p>If your text still does not appear correctly, verify that your console app is set to handle text in <a href=\"https://en.wikipedia.org/wiki/UTF-8\" rel=\"nofollow noreferrer\">UTF-8</a> encoding.</p>\n<p>If you are new to character sets and character encoding, read this surprisingly entertaining post, <a href=\"https://www.joelonsoftware.com/2003/10/08/the-absolute-minimum-every-software-developer-absolutely-positively-must-know-about-unicode-and-character-sets-no-excuses/\" rel=\"nofollow noreferrer\"><em>The Absolute Minimum Every Software Developer Absolutely, Positively Must Know About Unicode and Character Sets (No Excuses!)</em></a>.</p>\n<hr />\n<p>Using <code>String#substring</code> does <em>not</em> work with all Unicode text. Works only with text composed of characters entirely from the <a href=\"https://en.wikipedia.org/wiki/Plane_(Unicode)#Basic_Multilingual_Plane\" rel=\"nofollow noreferrer\"><em>Basic Multilingual Plane</em></a>, the first 64K of the 149,186 characters defined in Unicode.</p>\n<p>To manipulate all Unicode text, you will need to learn about <a href=\"https://en.wikipedia.org/wiki/Code_point\" rel=\"nofollow noreferrer\">code point</a> integers and the inherent complexities of digitally representing text.</p>\n<pre><code>&quot;наше&quot;.codePoints().forEach( System.out :: println );\n</code></pre>\n<pre class=\"lang-none prettyprint-override\"><code>1085\n1072\n1096\n1077\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5512797,"reputation":72,"user_id":4378540,"display_name":"Jinendra"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1681104048,"creation_date":1681104048,"answer_id":75974457,"question_id":75968378,"body_markdown":"To add support for other languages to the function, you need to make sure that the encoding of the String is properly handled.\r\n\r\nFirst, check the encoding of the source file. If it is not in UTF-8 or another encoding that supports the language of the String, you may need to convert the file to the appropriate encoding.\r\n\r\nNext, make sure that the encoding is also handled properly when the String is passed into the function. You can do this by specifying the encoding when converting the String to bytes, like this:\r\n\r\n    byte[] bytes = str.getBytes(&quot;UTF-8&quot;);\r\n    String substring = new String(bytes, begin, end - begin, &quot;UTF-8&quot;);\r\n\r\nFinally, when concatenating the substring to the empty string, make sure that the encoding is also handled properly:\r\n\r\n    result = new String(result.getBytes(&quot;UTF-8&quot;), &quot;UTF-8&quot;);\r\n\r\nBy handling the encoding properly throughout the function, you should be able to correctly handle Strings in languages other than English.","title":"Java - Strings in different languages","body":"<p>To add support for other languages to the function, you need to make sure that the encoding of the String is properly handled.</p>\n<p>First, check the encoding of the source file. If it is not in UTF-8 or another encoding that supports the language of the String, you may need to convert the file to the appropriate encoding.</p>\n<p>Next, make sure that the encoding is also handled properly when the String is passed into the function. You can do this by specifying the encoding when converting the String to bytes, like this:</p>\n<pre><code>byte[] bytes = str.getBytes(&quot;UTF-8&quot;);\nString substring = new String(bytes, begin, end - begin, &quot;UTF-8&quot;);\n</code></pre>\n<p>Finally, when concatenating the substring to the empty string, make sure that the encoding is also handled properly:</p>\n<pre><code>result = new String(result.getBytes(&quot;UTF-8&quot;), &quot;UTF-8&quot;);\n</code></pre>\n<p>By handling the encoding properly throughout the function, you should be able to correctly handle Strings in languages other than English.</p>\n"}],"owner":{"account_id":28225169,"reputation":35,"user_id":21575309,"display_name":"John_Cena"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":187,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1681122016,"answer_count":2,"score":0,"last_activity_date":1681104048,"creation_date":1681003350,"question_id":75968378,"body_markdown":"I have a String in a different language.\r\nFor example:\r\n```String str = &quot;наше&quot;```\r\nThat String is passed into a function, which makes ```str.substring(begin, end)``` between some indexes and concatenates it to an empty string and returns that string.\r\nLet&#39;s assume that substring is &quot;на&quot;.\r\n\r\nI have assertEquals in a test file that tests whether the returned value of the function is equal to &quot;на&quot;.\r\nBut it gives me false, because the result of the function is in the form of: &quot;��&quot; and not &quot;на&quot;.\r\n\r\nHow can I add support for other languages than English to the function?\r\n\r\n```\r\nString str = str.substring(0, 2);\r\nString result = &quot;&quot;;\r\nresult += str;\r\nreturn result;\r\n```","title":"Java - Strings in different languages","body":"<p>I have a String in a different language.\nFor example:\n<code>String str = &quot;наше&quot;</code>\nThat String is passed into a function, which makes <code>str.substring(begin, end)</code> between some indexes and concatenates it to an empty string and returns that string.\nLet's assume that substring is &quot;на&quot;.</p>\n<p>I have assertEquals in a test file that tests whether the returned value of the function is equal to &quot;на&quot;.\nBut it gives me false, because the result of the function is in the form of: &quot;��&quot; and not &quot;на&quot;.</p>\n<p>How can I add support for other languages than English to the function?</p>\n<pre><code>String str = str.substring(0, 2);\nString result = &quot;&quot;;\nresult += str;\nreturn result;\n</code></pre>\n"},{"tags":["java","or-tools"],"answers":[{"tags":[],"owner":{"account_id":13814932,"reputation":9106,"user_id":9971759,"display_name":"Laurent Perron"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1681103927,"creation_date":1681103927,"answer_id":75974444,"question_id":75973900,"body_markdown":"The hint for a LP solver is not a set of values, but the basis. Computing the basis from a set of values is not trivial. So the answer is no.","title":"Can a set of initial values be hinted to MPModelProto?","body":"<p>The hint for a LP solver is not a set of values, but the basis. Computing the basis from a set of values is not trivial. So the answer is no.</p>\n"}],"owner":{"account_id":8082685,"reputation":1042,"user_id":6091258,"display_name":"epol"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75974444,"answer_count":1,"score":0,"last_activity_date":1681103927,"creation_date":1681093453,"question_id":75973900,"body_markdown":"I am working with MPModelProto + GLOP. We have implemented an heuristic that continuously runs the linear model while changing some constraints, so by setting a hint for the linear optimizer at each run with the actual solution from the last run would in thesis improve performance.\r\n\r\nI wonder if the following implementation in Java makes sense : it runs fine but I cannot see a sensible difference in performance. \r\n\r\nThe code basically takes the variable values from the previous solution response and plugs it into a **PartialVariableAssignment**, which is then assigned as the **MPModelProto.Builder** solution hint.\r\n\r\n\r\n            PartialVariableAssignment partialVariableAssignment = PartialVariableAssignment.newBuilder()\r\n                    .addAllVarIndex(IntStream\r\n                            .range(0, mpSolutionResponse.getVariableValueCount() - 1)\r\n                            .boxed()\r\n                            .collect(Collectors.toList()))\r\n                    .addAllVarValue(mpSolutionResponse.getVariableValueList())\r\n                    .build();      \r\n\r\n            model.setSolutionHint(partialVariableAssignment);\r\n","title":"Can a set of initial values be hinted to MPModelProto?","body":"<p>I am working with MPModelProto + GLOP. We have implemented an heuristic that continuously runs the linear model while changing some constraints, so by setting a hint for the linear optimizer at each run with the actual solution from the last run would in thesis improve performance.</p>\n<p>I wonder if the following implementation in Java makes sense : it runs fine but I cannot see a sensible difference in performance.</p>\n<p>The code basically takes the variable values from the previous solution response and plugs it into a <strong>PartialVariableAssignment</strong>, which is then assigned as the <strong>MPModelProto.Builder</strong> solution hint.</p>\n<pre><code>        PartialVariableAssignment partialVariableAssignment = PartialVariableAssignment.newBuilder()\n                .addAllVarIndex(IntStream\n                        .range(0, mpSolutionResponse.getVariableValueCount() - 1)\n                        .boxed()\n                        .collect(Collectors.toList()))\n                .addAllVarValue(mpSolutionResponse.getVariableValueList())\n                .build();      \n\n        model.setSolutionHint(partialVariableAssignment);\n</code></pre>\n"},{"tags":["javascript","java","spring-boot"],"comments":[{"owner":{"account_id":15062605,"reputation":967,"user_id":10870817,"display_name":"SoT"},"score":0,"creation_date":1680859853,"post_id":75956020,"comment_id":133971046,"body_markdown":"are you using spring security?","body":"are you using spring security?"},{"owner":{"account_id":6159106,"reputation":1686,"user_id":4801267,"accept_rate":85,"display_name":"whitefang1993"},"score":0,"creation_date":1680865984,"post_id":75956020,"comment_id":133972114,"body_markdown":"Nope, the project is a poc in a very incipient phase, so not yet.","body":"Nope, the project is a poc in a very incipient phase, so not yet."},{"owner":{"account_id":15062605,"reputation":967,"user_id":10870817,"display_name":"SoT"},"score":0,"creation_date":1680874893,"post_id":75956020,"comment_id":133973775,"body_markdown":"I think you should provide jdk version, pom.xml etc","body":"I think you should provide jdk version, pom.xml etc"},{"owner":{"account_id":5440348,"reputation":247,"user_id":4328601,"display_name":"Alexander Prisadkov"},"score":0,"creation_date":1680875116,"post_id":75956020,"comment_id":133973839,"body_markdown":"You can use Base64 encoding","body":"You can use Base64 encoding"},{"owner":{"account_id":22585429,"reputation":286,"user_id":16769477,"display_name":"Jay Yadav"},"score":0,"creation_date":1681104883,"post_id":75956020,"comment_id":133999055,"body_markdown":"Does your RDF database allows CORS request, if not enable them first, also you can use URldecode to decode encoded URI","body":"Does your RDF database allows CORS request, if not enable them first, also you can use URldecode to decode encoded URI"},{"owner":{"account_id":6159106,"reputation":1686,"user_id":4801267,"accept_rate":85,"display_name":"whitefang1993"},"score":0,"creation_date":1681113572,"post_id":75956020,"comment_id":134000135,"body_markdown":"It allows CORS... my issue it has nothing to do with the DB config... the DB interogtion from Spring Boot has no idea about the request. I can totally take out the DB service from the controller and the issue still persists. The issue is related to path variables... if I move the ID in the query string the ecncode/decode process works perfectly. The problem is when I am trying to use the ID in the path variable.","body":"It allows CORS... my issue it has nothing to do with the DB config... the DB interogtion from Spring Boot has no idea about the request. I can totally take out the DB service from the controller and the issue still persists. The issue is related to path variables... if I move the ID in the query string the ecncode/decode process works perfectly. The problem is when I am trying to use the ID in the path variable."},{"owner":{"account_id":169505,"reputation":4356,"user_id":395631,"accept_rate":65,"display_name":"Petar Tahchiev"},"score":0,"creation_date":1691179983,"post_id":75956020,"comment_id":135462341,"body_markdown":"I have the same problem. Did you find any solution?","body":"I have the same problem. Did you find any solution?"},{"owner":{"account_id":6159106,"reputation":1686,"user_id":4801267,"accept_rate":85,"display_name":"whitefang1993"},"score":0,"creation_date":1694170371,"post_id":75956020,"comment_id":135859436,"body_markdown":"Unfortunately no... for the moment I moved temporary the URI in the query variable... so I don&#39;t block development...","body":"Unfortunately no... for the moment I moved temporary the URI in the query variable... so I don&#39;t block development..."}],"owner":{"account_id":6159106,"reputation":1686,"user_id":4801267,"accept_rate":85,"display_name":"whitefang1993"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":306,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":0,"score":3,"last_activity_date":1681103680,"creation_date":1680849210,"question_id":75956020,"body_markdown":"I want to create an endpoint in Spring Boot which gives me the details of an Entity. The controller for the moment looks like this:\r\n\r\n&lt;pre&gt;&lt;code&gt;\r\n\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\nimport org.springframework.web.bind.annotation.PathVariable;\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\nimport org.springframework.web.bind.annotation.RestController;\r\n\r\n\r\nimport com.semdetect.server.entities.models.Entity;\r\nimport com.semdetect.server.entities.services.EntityService;\r\n\r\n@RestController\r\n@RequestMapping(&quot;api/entity&quot;)\r\npublic class EntityController {\r\n    private final EntityService entityService;\r\n\r\n    @Autowired\r\n    public EntityController(EntityService entityService) {\r\n        this.entityService = entityService;\r\n    }\r\n\r\n    @GetMapping(&quot;/{iri}&quot;)\r\n    public Entity getEntityByIri(@PathVariable String iri) {\r\n        System.out.println(&quot;In controller: &quot; + iri);\r\n        return this.entityService.getEntityByIri(iri);\r\n    }\r\n}\r\n&lt;/code&gt;&lt;/pre&gt;\r\n\r\nI am using the @PathVarible annotation to get the ID of the Entity from the URI.\r\n\r\nMy CORS config looks like this:\r\n\r\n&lt;pre&gt;&lt;code&gt;\r\n\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.web.servlet.config.annotation.CorsRegistry;\r\nimport org.springframework.web.servlet.config.annotation.WebMvcConfigurer;\r\n\r\n@SpringBootApplication\r\npublic class ServerApplication {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(ServerApplication.class, args);\r\n\t}\r\n\r\n\t@Bean\r\n\tpublic WebMvcConfigurer corsConfigurer() {\r\n\t\treturn new WebMvcConfigurer() {\r\n\t\t\t@Override\r\n\t\t\tpublic void addCorsMappings(CorsRegistry registry) {\r\n\t\t\tregistry.addMapping(&quot;/**&quot;).allowedOrigins(&quot;http://localhost:4200&quot;);\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n}\r\n&lt;/code&gt;&lt;/pre&gt;\r\n\r\nWhen I do a request like this:\r\n\r\nGET http://localhost:8080/api/entity/12345869\r\n\r\nIt enters the controller and console logs the ID: &lt;code&gt;12345869&lt;/code&gt;.\r\n\r\nEverything fine until now... but my database is an RDF database, so my **IDs are URIs** and look like this:\r\n\r\n\r\n\\&lt;http://www.semanticweb.org/blah/ontologies/2022/6/blah#12345869\\&gt;\r\n\r\nSo my request will actually look like this, containing special characters:\r\n\r\nGET http://localhost:8080/api/entity/\\&lt;http://www.semanticweb.org/blah/ontologies/2022/6/blah#12345869\\&gt;\r\n\r\nBecause of the special characters I am using the &lt;code&gt;encodeURIComponent&lt;/code&gt; from JavaScript to encode the path variable (https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURIComponent): \r\n\r\n`http://localhost:8080/api/entity/${encodeURIComponent(&quot;\\&lt;http://www.semanticweb.org/blah/ontologies/2022/6/blah#12345869\\&gt;&quot;)}`\r\n\r\nWhich will turn the request into this:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/X3Wrn.png\r\n\r\nWhen I do this request with the path variable encoded... Spring Boot returns CORS error, although with normal IDs it works.\r\n\r\nI don&#39;t know how to resolve this issue, is there any way I can use a string like \\&lt;http://www.semanticweb.org/blah/ontologies/2022/6/blah#12345869\\&gt; as a path variable?\r\n\r\nEDIT (AS REUQESTED IN THE COMMENTS):\r\n\r\nPOM:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \t&lt;parent&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;2.7.1&lt;/version&gt;\r\n    \t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n    \t&lt;/parent&gt;\r\n    \t&lt;groupId&gt;com.sem-detect&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;server&lt;/artifactId&gt;\r\n    \t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    \t&lt;name&gt;server&lt;/name&gt;\r\n    \t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n    \t&lt;properties&gt;\r\n    \t\t&lt;java.version&gt;18&lt;/java.version&gt;\r\n    \t&lt;/properties&gt;\r\n    \t&lt;dependencyManagement&gt;\r\n    \t\t&lt;dependencies&gt;\r\n    \t\t\t&lt;dependency&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.eclipse.rdf4j&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;rdf4j-bom&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;3.0.4&lt;/version&gt;\r\n    \t\t\t\t&lt;type&gt;pom&lt;/type&gt;\r\n    \t\t\t\t&lt;scope&gt;import&lt;/scope&gt;\r\n    \t\t\t&lt;/dependency&gt;\r\n    \t\t&lt;/dependencies&gt;\r\n    \t&lt;/dependencyManagement&gt;\r\n    \t&lt;dependencies&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.eclipse.rdf4j&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;rdf4j-client&lt;/artifactId&gt;\r\n    \t\t\t&lt;type&gt;pom&lt;/type&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.eclipse.rdf4j&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;rdf4j-repository-sparql&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n    \t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t&lt;/dependencies&gt;\r\n    \r\n    \t&lt;build&gt;\r\n    \t\t&lt;plugins&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t&lt;/plugins&gt;\r\n    \t&lt;/build&gt;\r\n    \r\n    &lt;/project&gt;\r\n\r\nI am using JDK 18.","title":"Spring Boot gives CORS error when PathVariable is encoded due to special characters","body":"<p>I want to create an endpoint in Spring Boot which gives me the details of an Entity. The controller for the moment looks like this:</p>\n<pre><code>\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.PathVariable;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\n\nimport com.semdetect.server.entities.models.Entity;\nimport com.semdetect.server.entities.services.EntityService;\n\n@RestController\n@RequestMapping(\"api/entity\")\npublic class EntityController {\n    private final EntityService entityService;\n\n    @Autowired\n    public EntityController(EntityService entityService) {\n        this.entityService = entityService;\n    }\n\n    @GetMapping(\"/{iri}\")\n    public Entity getEntityByIri(@PathVariable String iri) {\n        System.out.println(\"In controller: \" + iri);\n        return this.entityService.getEntityByIri(iri);\n    }\n}\n</code></pre>\n<p>I am using the @PathVarible annotation to get the ID of the Entity from the URI.</p>\n<p>My CORS config looks like this:</p>\n<pre><code>\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.web.servlet.config.annotation.CorsRegistry;\nimport org.springframework.web.servlet.config.annotation.WebMvcConfigurer;\n\n@SpringBootApplication\npublic class ServerApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(ServerApplication.class, args);\n    }\n\n    @Bean\n    public WebMvcConfigurer corsConfigurer() {\n        return new WebMvcConfigurer() {\n            @Override\n            public void addCorsMappings(CorsRegistry registry) {\n            registry.addMapping(\"/**\").allowedOrigins(\"http://localhost:4200\");\n            }\n        };\n    }\n}\n</code></pre>\n<p>When I do a request like this:</p>\n<p>GET http://localhost:8080/api/entity/12345869</p>\n<p>It enters the controller and console logs the ID: <code>12345869</code>.</p>\n<p>Everything fine until now... but my database is an RDF database, so my <strong>IDs are URIs</strong> and look like this:</p>\n<p>&lt;http://www.semanticweb.org/blah/ontologies/2022/6/blah#12345869&gt;</p>\n<p>So my request will actually look like this, containing special characters:</p>\n<p>GET http://localhost:8080/api/entity/&lt;http://www.semanticweb.org/blah/ontologies/2022/6/blah#12345869&gt;</p>\n<p>Because of the special characters I am using the <code>encodeURIComponent</code> from JavaScript to encode the path variable (<a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURIComponent\" rel=\"nofollow noreferrer\">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURIComponent</a>):</p>\n<p><code>http://localhost:8080/api/entity/${encodeURIComponent(&quot;\\&lt;http://www.semanticweb.org/blah/ontologies/2022/6/blah#12345869\\&gt;&quot;)}</code></p>\n<p>Which will turn the request into this:</p>\n<p><a href=\"https://i.stack.imgur.com/X3Wrn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/X3Wrn.png\" alt=\"enter image description here\" /></a></p>\n<p>When I do this request with the path variable encoded... Spring Boot returns CORS error, although with normal IDs it works.</p>\n<p>I don't know how to resolve this issue, is there any way I can use a string like &lt;http://www.semanticweb.org/blah/ontologies/2022/6/blah#12345869&gt; as a path variable?</p>\n<p>EDIT (AS REUQESTED IN THE COMMENTS):</p>\n<p>POM:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.7.1&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.sem-detect&lt;/groupId&gt;\n    &lt;artifactId&gt;server&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;server&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;18&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencyManagement&gt;\n        &lt;dependencies&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.eclipse.rdf4j&lt;/groupId&gt;\n                &lt;artifactId&gt;rdf4j-bom&lt;/artifactId&gt;\n                &lt;version&gt;3.0.4&lt;/version&gt;\n                &lt;type&gt;pom&lt;/type&gt;\n                &lt;scope&gt;import&lt;/scope&gt;\n            &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n    &lt;/dependencyManagement&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.eclipse.rdf4j&lt;/groupId&gt;\n            &lt;artifactId&gt;rdf4j-client&lt;/artifactId&gt;\n            &lt;type&gt;pom&lt;/type&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.eclipse.rdf4j&lt;/groupId&gt;\n            &lt;artifactId&gt;rdf4j-repository-sparql&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>I am using JDK 18.</p>\n"},{"tags":["java","image","graphics","gif","graphics2d"],"comments":[{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1681108478,"post_id":75974415,"comment_id":133999453,"body_markdown":"You need to change the `disposalMethod` for [example](https://stackoverflow.com/questions/20318146/java-gif-creator-needs-tweaking/20318211#20318211); [example](https://stackoverflow.com/questions/26330550/java-gif-animation-not-repainting-correctly/26331052#26331052); [example](https://stackoverflow.com/questions/36671767/java-swing-gif-partly-transparent-when-its-not-supposed-to-be/36683021#36683021); [example](https://stackoverflow.com/questions/18117283/mirroring-animated-gif-on-load-in-java-imageicon/18117326#18117326)","body":"You need to change the <code>disposalMethod</code> for <a href=\"https://stackoverflow.com/questions/20318146/java-gif-creator-needs-tweaking/20318211#20318211\">example</a>; <a href=\"https://stackoverflow.com/questions/26330550/java-gif-animation-not-repainting-correctly/26331052#26331052\">example</a>; <a href=\"https://stackoverflow.com/questions/36671767/java-swing-gif-partly-transparent-when-its-not-supposed-to-be/36683021#36683021\">example</a>; <a href=\"https://stackoverflow.com/questions/18117283/mirroring-animated-gif-on-load-in-java-imageicon/18117326#18117326\">example</a>"},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1681108554,"post_id":75974415,"comment_id":133999458,"body_markdown":"[example](https://stackoverflow.com/questions/36682135/java-animated-gifs-go-automatically-partially-transparent/36682907#36682907)","body":"<a href=\"https://stackoverflow.com/questions/36682135/java-animated-gifs-go-automatically-partially-transparent/36682907#36682907\">example</a>"},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1681108769,"post_id":75974415,"comment_id":133999484,"body_markdown":"Don&#39;t load the image in the `paintComponent` method and pass `this` as the `ImageObserver` to the `drawImage` method","body":"Don&#39;t load the image in the <code>paintComponent</code> method and pass <code>this</code> as the <code>ImageObserver</code> to the <code>drawImage</code> method"}],"owner":{"account_id":27584113,"reputation":11,"user_id":21052691,"display_name":"Carter Reid"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":86,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1681103561,"creation_date":1681103561,"question_id":75974415,"body_markdown":"I am using a GIF with a transparent background as a sprite for a game I am making as it is easier than manually animating each frame of the idle animation, especially since that is the only animation I will be using for a while. My issue is that each frame of the GIF is rendered, but is still visible once the next appears. For example, when the sprite&#39;s wing lowers, the previous frame is still visible behind the newest frame with the wing higher up. I dont think that this an issue with the GIF, since it looks just fine outside of my program, but here it is anyways:\r\n[Sprite](https://i.stack.imgur.com/9LMxL.gif)\r\n\r\n\r\nI&#39;ve tried reworking the code, trying to use clearRect(); and g2.dispose(); but nothing seemed to work. Here is my code for the graphics:\r\n\r\n\r\n```\r\npublic void paintComponent(Graphics g) {\r\n\t\tsuper.paintComponent(g);\r\n\t\tGraphics2D g2 = (Graphics2D) g;\r\n\t\t// drawing food and powerups\r\n\t\tg2.clearRect(px, py, pw, ph);\r\n\t\t\r\n\t\tColor transGray = new Color(126, 126, 126, 50);\r\n\t\tColor transGreen = new Color(0, 255, 0, 150);\r\n\t\tImage icon = new ImageIcon(getClass().getResource(&quot;/resources/Anti_Virus_Sprite.gif&quot;)).getImage();\r\n\t\tg2.drawImage(icon,px, py, pw, ph, null);\r\n\t\tg2.drawRect(px, py, pw, ph);\r\n\t\t\r\n\t\t//g2.dispose();\r\n\r\n\t}\r\n\r\n\r\n```\r\n\r\nEverything else works fine I should also add, only this GIF is doing it, no issues with drawRect();\r\n\r\nI did find that with a different GIF, one completely unrelated for a different game, it didnt seem to had the same issue, but that GIF didn&#39;t move much so it could have just been difficult to notice. A side note, some of the GIFs I use flicker weirdly sometimes, but only in my programs.\r\n\r\n\r\n","title":"How do I stop a transparent GIF from rendering previous frames behind it?","body":"<p>I am using a GIF with a transparent background as a sprite for a game I am making as it is easier than manually animating each frame of the idle animation, especially since that is the only animation I will be using for a while. My issue is that each frame of the GIF is rendered, but is still visible once the next appears. For example, when the sprite's wing lowers, the previous frame is still visible behind the newest frame with the wing higher up. I dont think that this an issue with the GIF, since it looks just fine outside of my program, but here it is anyways:\n<a href=\"https://i.stack.imgur.com/9LMxL.gif\" rel=\"nofollow noreferrer\">Sprite</a></p>\n<p>I've tried reworking the code, trying to use clearRect(); and g2.dispose(); but nothing seemed to work. Here is my code for the graphics:</p>\n<pre><code>public void paintComponent(Graphics g) {\n        super.paintComponent(g);\n        Graphics2D g2 = (Graphics2D) g;\n        // drawing food and powerups\n        g2.clearRect(px, py, pw, ph);\n        \n        Color transGray = new Color(126, 126, 126, 50);\n        Color transGreen = new Color(0, 255, 0, 150);\n        Image icon = new ImageIcon(getClass().getResource(&quot;/resources/Anti_Virus_Sprite.gif&quot;)).getImage();\n        g2.drawImage(icon,px, py, pw, ph, null);\n        g2.drawRect(px, py, pw, ph);\n        \n        //g2.dispose();\n\n    }\n\n\n</code></pre>\n<p>Everything else works fine I should also add, only this GIF is doing it, no issues with drawRect();</p>\n<p>I did find that with a different GIF, one completely unrelated for a different game, it didnt seem to had the same issue, but that GIF didn't move much so it could have just been difficult to notice. A side note, some of the GIFs I use flicker weirdly sometimes, but only in my programs.</p>\n"},{"tags":["java","stream","flatmap"],"comments":[{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":1,"creation_date":1666000222,"post_id":74095311,"comment_id":130823009,"body_markdown":"What have you tried? There are **no** streams in your code, which by the way would fail to compile. Please share your attempt and specify the issue you&#39;ve encountered? Every question of SO is expected to demonstrate an **effort**. Please get familiar with the guide-lines on how to ask questions [How do I ask a good question?](https://stackoverflow.com/help/how-to-ask)","body":"What have you tried? There are <b>no</b> streams in your code, which by the way would fail to compile. Please share your attempt and specify the issue you&#39;ve encountered? Every question of SO is expected to demonstrate an <b>effort</b>. Please get familiar with the guide-lines on how to ask questions <a href=\"https://stackoverflow.com/help/how-to-ask\">How do I ask a good question?</a>"},{"owner":{"display_name":"user17233545"},"score":0,"creation_date":1666000432,"post_id":74095311,"comment_id":130823068,"body_markdown":"`list.stream().flatMap(map -&gt; map.values().stream().flatMap(List::stream)).toList()`","body":"<code>list.stream().flatMap(map -&gt; map.values().stream().flatMap(List::stream)).toList()</code>"},{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":1,"creation_date":1666000594,"post_id":74095311,"comment_id":130823114,"body_markdown":"Possible duplicate https://stackoverflow.com/questions/22382453/java-8-streams-flatmap-method-example","body":"Possible duplicate <a href=\"https://stackoverflow.com/questions/22382453/java-8-streams-flatmap-method-example\" title=\"java 8 streams flatmap method example\">stackoverflow.com/questions/22382453/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":17026449,"reputation":11,"user_id":21589896,"display_name":"Rafael Iakupov"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681082595,"creation_date":1681082595,"answer_id":75973367,"question_id":74095311,"body_markdown":"    List&lt;Object&gt; collect = list\r\n                    .stream()\r\n                    .flatMap(x -&gt; x.entrySet().stream())\r\n                    .map(Map.Entry::getValue)\r\n                    .flatMap(x -&gt; {\r\n                                if (x instanceof Collection&lt;?&gt;) {\r\n                                    return ((Collection&lt;?&gt;) x).stream();\r\n                                } else {\r\n                                    return Stream.of(x);\r\n                                }\r\n                            }\r\n                    )\r\n                    .collect(Collectors.toList());","title":"How to use flat map for flating HashMap keys value into one set when there is a list of Map in Java stream","body":"<pre><code>List&lt;Object&gt; collect = list\n                .stream()\n                .flatMap(x -&gt; x.entrySet().stream())\n                .map(Map.Entry::getValue)\n                .flatMap(x -&gt; {\n                            if (x instanceof Collection&lt;?&gt;) {\n                                return ((Collection&lt;?&gt;) x).stream();\n                            } else {\n                                return Stream.of(x);\n                            }\n                        }\n                )\n                .collect(Collectors.toList());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681102332,"creation_date":1681086607,"answer_id":75973568,"question_id":74095311,"body_markdown":"Change the Maps to have typed values, eg\r\n\r\n    List&lt;Map&lt;String, List&lt;String&gt;&gt;&gt; list = new ArrayList&lt;&gt;();\r\n    Map&lt;String, List&lt;String&gt;&gt; map1 = new HashMap&lt;&gt;();\r\n\r\n\r\nThen use `flatMap()` twice to double flatten the collections:\r\n\r\n```\r\nList&lt;String&gt; allValues = list.stream() // a stream of Maps\r\n  .map(Map::values) // a stream of Collection&lt;List&lt;String&gt;&gt;\r\n  .flatMap(Collection::stream) // a stream of List&lt;String&gt;\r\n  .flatMap(List::stream) // a stream of String\r\n  .collect(toList());\r\n```\r\n\r\nSee [live demo][1].\r\n\r\n---\r\n\r\nIf you leave the values of the Maps as `Object`, you need the cast them:\r\n\r\n```\r\nList&lt;String&gt; allValues = list.stream() // a stream of Maps\r\n  .map(Map::values) // a stream of Collection&lt;Object&gt;\r\n  .map(o -&gt; (Collection&lt;List&lt;String&gt;&gt;)o)\r\n  .flatMap(Collection::stream) // a stream of List&lt;Object&gt;\r\n  .map(o -&gt; (List&lt;String&gt;)o)\r\n  .flatMap(List::stream) // a stream of String\r\n  .collect(toList());\r\n```\r\n\r\nWhich is uglier, less safe and unnecessary with the correct typing.\r\n\r\n  [1]: https://ideone.com/Rt68Ia","title":"How to use flat map for flating HashMap keys value into one set when there is a list of Map in Java stream","body":"<p>Change the Maps to have typed values, eg</p>\n<pre><code>List&lt;Map&lt;String, List&lt;String&gt;&gt;&gt; list = new ArrayList&lt;&gt;();\nMap&lt;String, List&lt;String&gt;&gt; map1 = new HashMap&lt;&gt;();\n</code></pre>\n<p>Then use <code>flatMap()</code> twice to double flatten the collections:</p>\n<pre><code>List&lt;String&gt; allValues = list.stream() // a stream of Maps\n  .map(Map::values) // a stream of Collection&lt;List&lt;String&gt;&gt;\n  .flatMap(Collection::stream) // a stream of List&lt;String&gt;\n  .flatMap(List::stream) // a stream of String\n  .collect(toList());\n</code></pre>\n<p>See <a href=\"https://ideone.com/Rt68Ia\" rel=\"nofollow noreferrer\">live demo</a>.</p>\n<hr />\n<p>If you leave the values of the Maps as <code>Object</code>, you need the cast them:</p>\n<pre><code>List&lt;String&gt; allValues = list.stream() // a stream of Maps\n  .map(Map::values) // a stream of Collection&lt;Object&gt;\n  .map(o -&gt; (Collection&lt;List&lt;String&gt;&gt;)o)\n  .flatMap(Collection::stream) // a stream of List&lt;Object&gt;\n  .map(o -&gt; (List&lt;String&gt;)o)\n  .flatMap(List::stream) // a stream of String\n  .collect(toList());\n</code></pre>\n<p>Which is uglier, less safe and unnecessary with the correct typing.</p>\n"}],"owner":{"account_id":19342653,"reputation":11,"user_id":14141838,"display_name":"Nishant Kumar"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":762,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1681102332,"creation_date":1665999692,"question_id":74095311,"body_markdown":"```\r\nList&lt;Map&lt;String, Object&gt;&gt; list =new ArrayList();\r\nMap&lt;String, Object&gt; map1 =new HashMap();\r\nList&lt;String&gt; values =new ArrayList();\r\nvalues.add(&quot;TEST&quot;)\r\nvalues.add(&quot;TEST1&quot;)\r\nmap1.put(&quot;level&quot;,values);\r\nMap&lt;String, Object&gt; map2 =new HashMap();\r\nList&lt;String&gt; values2 =new ArrayList();\r\nvalues2.add(&quot;TEST2&quot;)\r\nvalues2.add(&quot;TEST3&quot;)\r\nmap2.put(&quot;level&quot;,values2);\r\nlist.add(map1);\r\nlist.add(map2);\r\n```\r\n\r\nI want the result like a list of flat string values \r\n```\r\nList&lt;String&gt; values =[&quot;TEST&quot;,&quot;TEST1&quot;,&quot;TES2&quot;,&quot;TEST3&quot;]\r\n```\r\n    \r\n\r\n","title":"How to use flat map for flating HashMap keys value into one set when there is a list of Map in Java stream","body":"<pre><code>List&lt;Map&lt;String, Object&gt;&gt; list =new ArrayList();\nMap&lt;String, Object&gt; map1 =new HashMap();\nList&lt;String&gt; values =new ArrayList();\nvalues.add(&quot;TEST&quot;)\nvalues.add(&quot;TEST1&quot;)\nmap1.put(&quot;level&quot;,values);\nMap&lt;String, Object&gt; map2 =new HashMap();\nList&lt;String&gt; values2 =new ArrayList();\nvalues2.add(&quot;TEST2&quot;)\nvalues2.add(&quot;TEST3&quot;)\nmap2.put(&quot;level&quot;,values2);\nlist.add(map1);\nlist.add(map2);\n</code></pre>\n<p>I want the result like a list of flat string values</p>\n<pre><code>List&lt;String&gt; values =[&quot;TEST&quot;,&quot;TEST1&quot;,&quot;TES2&quot;,&quot;TEST3&quot;]\n</code></pre>\n"},{"tags":["java","flutter","gradle","semantic-analysis","java-19"],"comments":[{"owner":{"account_id":184870,"reputation":118711,"user_id":421195,"accept_rate":83,"display_name":"paulsm4"},"score":0,"creation_date":1681101252,"post_id":75969480,"comment_id":133998772,"body_markdown":"Class file version &quot;63&quot; corresponds to Java 19.  PROBLEM: You&#39;re compiling classes for Java 19 (like you expect) ... but your Gradle JRE is a *lower* Java version!  Look here: https://stackoverflow.com/a/74840295/421195.  If you were using Android Studio (vs. VSCode), this would also be applicable: https://stackoverflow.com/a/74840295/421195, and https://stackoverflow.com/a/75221829/421195","body":"Class file version &quot;63&quot; corresponds to Java 19.  PROBLEM: You&#39;re compiling classes for Java 19 (like you expect) ... but your Gradle JRE is a <i>lower</i> Java version!  Look here: <a href=\"https://stackoverflow.com/a/74840295/421195\">stackoverflow.com/a/74840295/421195</a>.  If you were using Android Studio (vs. VSCode), this would also be applicable: <a href=\"https://stackoverflow.com/a/74840295/421195\">stackoverflow.com/a/74840295/421195</a>, and <a href=\"https://stackoverflow.com/a/75221829/421195\">stackoverflow.com/a/75221829/421195</a>"}],"owner":{"account_id":28250173,"reputation":1,"user_id":21596544,"display_name":"Nishwa Nishwa"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1681033679,"answer_count":0,"score":0,"last_activity_date":1681100739,"creation_date":1681029047,"question_id":75969480,"body_markdown":"I am trying to run my flutter project in VScode. But this error is * shown. Any ideas on how to resolve this issue? \r\n\r\n* Java version is 19.0.1 \r\n* gradle version is 7.1.2 \r\n* Flutter 3.3.9 \r\n\r\nTools\r\n\r\n• Dart 2.18.5 \r\n\r\n• DevTools 2.15.0\r\n\r\n\r\nFAILURE: Build failed with an exception.\r\n\r\n* What went wrong:\r\nCould not open settings generic class cache for settings file &#39;C:\\Users\\user\\Desktop\\Nish\\face_recognition\\android\\settings.gradle&#39; (C:\\Users\\user\\.gradle\\caches\\7.1\\scripts\\el377zxjtiubuolyxhieyiuv6).\r\n&gt; BUG! exception in phase &#39;semantic analysis&#39; in source unit &#39;_BuildScript_&#39; Unsupported class file major version 63\r\n\r\n","title":"unsupported class file major version 63","body":"<p>I am trying to run my flutter project in VScode. But this error is * shown. Any ideas on how to resolve this issue?</p>\n<ul>\n<li>Java version is 19.0.1</li>\n<li>gradle version is 7.1.2</li>\n<li>Flutter 3.3.9</li>\n</ul>\n<p>Tools</p>\n<p>• Dart 2.18.5</p>\n<p>• DevTools 2.15.0</p>\n<p>FAILURE: Build failed with an exception.</p>\n<ul>\n<li>What went wrong:\nCould not open settings generic class cache for settings file 'C:\\Users\\user\\Desktop\\Nish\\face_recognition\\android\\settings.gradle' (C:\\Users\\user.gradle\\caches\\7.1\\scripts\\el377zxjtiubuolyxhieyiuv6).</li>\n</ul>\n<blockquote>\n<p>BUG! exception in phase 'semantic analysis' in source unit '<em>BuildScript</em>' Unsupported class file major version 63</p>\n</blockquote>\n"},{"tags":["java","android","android-studio","android-fragments","fragmentstatepageradapter"],"comments":[{"owner":{"account_id":1233070,"reputation":9484,"user_id":1197251,"display_name":"dominicoder"},"score":0,"creation_date":1681101224,"post_id":75973703,"comment_id":133998767,"body_markdown":"Have you read the documentation on this topic? https://developer.android.com/guide/fragments/communicate#fragments","body":"Have you read the documentation on this topic? <a href=\"https://developer.android.com/guide/fragments/communicate#fragments\" rel=\"nofollow noreferrer\">developer.android.com/guide/fragments/communicate#fragments</a>"}],"answers":[{"comments":[{"owner":{"account_id":16398039,"reputation":13,"user_id":11844920,"display_name":"Ron R"},"score":0,"creation_date":1681106264,"post_id":75974235,"comment_id":133999209,"body_markdown":"Thank you so much. I had not thought of using a viewModel class. I will implement it and get back","body":"Thank you so much. I had not thought of using a viewModel class. I will implement it and get back"}],"tags":[],"owner":{"account_id":10038794,"reputation":802,"user_id":8229399,"display_name":"philoopher97"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681100363,"creation_date":1681100363,"answer_id":75974235,"question_id":75973703,"body_markdown":"You&#39;re creating a new fragment when sending data, which you souldn&#39;t. The `viewPager` has no reference of the new fragment with data. That&#39;s why you&#39;re getting the `NullPointerException`.\r\n\r\nThere are several ways to pass data from one activity to another. The most convinient way is to use a common `ViewModel` class. Here is an example:\r\n\r\n&gt; Create a Common view model class.\r\n```kotlin\r\nclass CommonViewModel: ViewModel() {\r\n\r\n// your variables to share\r\n\r\n}\r\n```\r\n\r\n&gt; Send data from a fragment\r\n```kotlin\r\nclass FragmentOne: Fragment() {\r\n    private lateinit var viewModel: CommonViewModel\r\n    override fun onViewCreated() {\r\n        veiwModel = ViewModelProvider(requireActivity())[CommonViewModel::class.java]\r\n        \r\n        veiwModel.data_1 = &quot;some_data&quot;\r\n    }\r\n}\r\n```\r\n\r\n&gt; Get the data from the other fragment.\r\n```kotlin\r\nclass FragmentTwo: Fragment() {\r\n    private lateinit var viewModel: CommonViewModel\r\n    override fun onViewCreated() {\r\n        veiwModel = ViewModelProvider(requireActivity())[CommonViewModel::class.java]\r\n        \r\n        val dataFromOtherFragment = veiwModel.data_1\r\n    }\r\n}\r\n```\r\n\r\nRemember the `requireActivity()` is crucial since we want the same `viewModel` in both fragments.","title":"How to pass text from one fragment to another? Both hosted by the MainActivity","body":"<p>You're creating a new fragment when sending data, which you souldn't. The <code>viewPager</code> has no reference of the new fragment with data. That's why you're getting the <code>NullPointerException</code>.</p>\n<p>There are several ways to pass data from one activity to another. The most convinient way is to use a common <code>ViewModel</code> class. Here is an example:</p>\n<blockquote>\n<p>Create a Common view model class.</p>\n</blockquote>\n<pre class=\"lang-kotlin prettyprint-override\"><code>class CommonViewModel: ViewModel() {\n\n// your variables to share\n\n}\n</code></pre>\n<blockquote>\n<p>Send data from a fragment</p>\n</blockquote>\n<pre class=\"lang-kotlin prettyprint-override\"><code>class FragmentOne: Fragment() {\n    private lateinit var viewModel: CommonViewModel\n    override fun onViewCreated() {\n        veiwModel = ViewModelProvider(requireActivity())[CommonViewModel::class.java]\n        \n        veiwModel.data_1 = &quot;some_data&quot;\n    }\n}\n</code></pre>\n<blockquote>\n<p>Get the data from the other fragment.</p>\n</blockquote>\n<pre class=\"lang-kotlin prettyprint-override\"><code>class FragmentTwo: Fragment() {\n    private lateinit var viewModel: CommonViewModel\n    override fun onViewCreated() {\n        veiwModel = ViewModelProvider(requireActivity())[CommonViewModel::class.java]\n        \n        val dataFromOtherFragment = veiwModel.data_1\n    }\n}\n</code></pre>\n<p>Remember the <code>requireActivity()</code> is crucial since we want the same <code>viewModel</code> in both fragments.</p>\n"},{"comments":[{"owner":{"account_id":16398039,"reputation":13,"user_id":11844920,"display_name":"Ron R"},"score":0,"creation_date":1681106332,"post_id":75974253,"comment_id":133999217,"body_markdown":"I had used an interface class to send the data but still ran into issues. Maybe due to a fault from my end. I will follow this approach and get back. Thanks for the reply","body":"I had used an interface class to send the data but still ran into issues. Maybe due to a fault from my end. I will follow this approach and get back. Thanks for the reply"},{"owner":{"account_id":22415217,"reputation":185,"user_id":16623378,"display_name":"Quốc H&#249;ng"},"score":0,"creation_date":1681107854,"post_id":75974253,"comment_id":133999373,"body_markdown":"@Ron R if there are issues about not updating, please make sure you are using one instance of Frag1 and Frag2 in ViewPagerAdapter and return these instances in createFragment() method. In the old approach, you are creating new instance every time createFragment() called and it may lose the listener set from constructor of ViewPagerAdapter.","body":"@Ron R if there are issues about not updating, please make sure you are using one instance of Frag1 and Frag2 in ViewPagerAdapter and return these instances in createFragment() method. In the old approach, you are creating new instance every time createFragment() called and it may lose the listener set from constructor of ViewPagerAdapter."}],"tags":[],"owner":{"account_id":22415217,"reputation":185,"user_id":16623378,"display_name":"Quốc H&#249;ng"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681100713,"creation_date":1681100713,"answer_id":75974253,"question_id":75973703,"body_markdown":"I&#39;m not sure it is the best idea, but it can solve your requirement.\r\n\r\nYou can create a listener to listen to your button and pass the text to the other fragment.\r\n```java\r\npublic interface OnFragmentSubmitListener {\r\n    void onSubmitted(String text);\r\n}\r\n```\r\nAnd then place the listener on the first fragment.\r\n```java\r\npublic class Frag1 extends Fragment {\r\n    private EditText editText;\r\n    private Button button;\r\n    private OnFragmentSubmitListener listener;\r\n\r\n    public Frag1(){\r\n\r\n    }\r\n\r\n    public void setOnFragmentSubmit(OnFragmentSubmitListener listener) {\r\n        this.listener = listener;\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\r\n        View view = inflater.inflate(R.layout.fragment_frag1, container, false);\r\n\r\n        editText = view.findViewById(R.id.frag1ET);\r\n        button = view.findViewById(R.id.frag1btn);\r\n\r\n\r\n        button.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                String text = editText.getText().toString();\r\n                listener.onSubmitted(text);\r\n                editText.setText(&quot;&quot;);\r\n            }\r\n        });\r\n\r\n        return view;\r\n    }\r\n\r\n}\r\n```\r\nThen finally handle the listener on Adapter.\r\n```java\r\npublic class ViewPagerAdapter extends FragmentStateAdapter {\r\n    private Frag1 frag1 = new Frag1();\r\n    private Frag2 frag2 = new Frag2();\r\n\r\n    public ViewPagerAdapter(@NonNull FragmentActivity fragmentActivity) {\r\n        super(fragmentActivity);\r\n        frag1.setOnFragmentSubmit((text -&gt; {\r\n            Bundle bundle = new Bundle();\r\n            bundle.putString(&quot;tex&quot;, text);\r\n            frag2.setArguments(bundle);\r\n        }));\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public Fragment createFragment(int position) {\r\n        switch (position)\r\n        {\r\n            case 0: return frag1;\r\n\r\n            case 1: return frag2;\r\n\r\n            default: return frag1;\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public int getItemCount() {\r\n        return 2;\r\n    }\r\n}\r\n```","title":"How to pass text from one fragment to another? Both hosted by the MainActivity","body":"<p>I'm not sure it is the best idea, but it can solve your requirement.</p>\n<p>You can create a listener to listen to your button and pass the text to the other fragment.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface OnFragmentSubmitListener {\n    void onSubmitted(String text);\n}\n</code></pre>\n<p>And then place the listener on the first fragment.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Frag1 extends Fragment {\n    private EditText editText;\n    private Button button;\n    private OnFragmentSubmitListener listener;\n\n    public Frag1(){\n\n    }\n\n    public void setOnFragmentSubmit(OnFragmentSubmitListener listener) {\n        this.listener = listener;\n    }\n\n    @Override\n    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\n        View view = inflater.inflate(R.layout.fragment_frag1, container, false);\n\n        editText = view.findViewById(R.id.frag1ET);\n        button = view.findViewById(R.id.frag1btn);\n\n\n        button.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                String text = editText.getText().toString();\n                listener.onSubmitted(text);\n                editText.setText(&quot;&quot;);\n            }\n        });\n\n        return view;\n    }\n\n}\n</code></pre>\n<p>Then finally handle the listener on Adapter.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class ViewPagerAdapter extends FragmentStateAdapter {\n    private Frag1 frag1 = new Frag1();\n    private Frag2 frag2 = new Frag2();\n\n    public ViewPagerAdapter(@NonNull FragmentActivity fragmentActivity) {\n        super(fragmentActivity);\n        frag1.setOnFragmentSubmit((text -&gt; {\n            Bundle bundle = new Bundle();\n            bundle.putString(&quot;tex&quot;, text);\n            frag2.setArguments(bundle);\n        }));\n    }\n\n    @NonNull\n    @Override\n    public Fragment createFragment(int position) {\n        switch (position)\n        {\n            case 0: return frag1;\n\n            case 1: return frag2;\n\n            default: return frag1;\n        }\n    }\n\n    @Override\n    public int getItemCount() {\n        return 2;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":16398039,"reputation":13,"user_id":11844920,"display_name":"Ron R"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1681117057,"answer_count":2,"score":0,"last_activity_date":1681100713,"creation_date":1681089700,"question_id":75973703,"body_markdown":"I have been trying to use Fragments in Android Studio and have been successful in the implementation of it. But, when I am trying to pass any data (Text/String here) I&#39;m getting a Null Pointer Exception. \r\n\r\nThe Fragment doesn&#39;t appear to get received by the second Fragment. Here is the code:\r\n\r\nMainActivity.java\r\n\r\n```\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    TabLayout tb;\r\n    ViewPager2 vp;\r\n    viewPagerAdapter vpa;\r\n\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        tb=findViewById(R.id.tab_lyt);\r\n        vp= findViewById(R.id.pager);\r\n        vpa= new viewPagerAdapter(this);\r\n\r\n        vp.setAdapter(vpa);\r\n\r\n        tb.addOnTabSelectedListener(new TabLayout.OnTabSelectedListener() {\r\n            @Override\r\n            public void onTabSelected(TabLayout.Tab tab) {\r\n                vp.setCurrentItem(tab.getPosition());\r\n            }\r\n\r\n            @Override\r\n            public void onTabUnselected(TabLayout.Tab tab) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onTabReselected(TabLayout.Tab tab) {\r\n\r\n            }\r\n        });\r\n\r\n        vp.registerOnPageChangeCallback(new ViewPager2.OnPageChangeCallback() {\r\n            @Override\r\n            public void onPageSelected(int position) {\r\n                super.onPageSelected(position);\r\n\r\n                tb.getTabAt(position).select();\r\n            }\r\n        });\r\n    }\r\n}\r\n```\r\n\r\nactivity_main.xml\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    tools:context=&quot;.MainActivity&quot;&gt;\r\n\r\n    &lt;androidx.viewpager2.widget.ViewPager2\r\n        android:id=&quot;@+id/pager&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        android:layout_below=&quot;@id/tab_lyt&quot;\r\n        android:layout_marginTop=&quot;0dp&quot; /&gt;\r\n\r\n    &lt;com.google.android.material.tabs.TabLayout\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:id=&quot;@+id/tab_lyt&quot;&gt;\r\n\r\n        &lt;com.google.android.material.tabs.TabItem\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:text=&quot;Menu 1&quot;/&gt;\r\n\r\n        &lt;com.google.android.material.tabs.TabItem\r\n            android:id=&quot;@+id/frag2&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:text=&quot;Menu 2&quot;/&gt;\r\n\r\n\r\n\r\n    &lt;/com.google.android.material.tabs.TabLayout&gt;\r\n\r\n\r\n\r\n\r\n&lt;/RelativeLayout&gt;\r\n```\r\nviewPagerAdapter.java\r\n```\r\npublic class viewPagerAdapter extends FragmentStateAdapter {\r\n    public viewPagerAdapter(@NonNull FragmentActivity fragmentActivity) {\r\n        super(fragmentActivity);\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public Fragment createFragment(int position) {\r\n        switch (position)\r\n        {\r\n            case 0: return new frag1();\r\n\r\n            case 1: return new frag2();\r\n\r\n            default: return new frag1();\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public int getItemCount() {\r\n        return 2;\r\n    }\r\n}\r\n```\r\nfrag1.java\r\n```\r\npublic class frag1 extends Fragment {\r\n    private EditText editText;\r\n    private Button button;\r\n\r\n    public frag1(){\r\n\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\r\n        View view = inflater.inflate(R.layout.fragment_frag1, container, false);\r\n\r\n        editText = view.findViewById(R.id.frag1ET);\r\n        button = view.findViewById(R.id.frag1btn);\r\n\r\n\r\n        button.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                String text = editText.getText().toString();\r\n                Bundle bundle = new Bundle();\r\n                bundle.putString(&quot;tex&quot;, text);\r\n                Toast.makeText(getContext(), &quot;&quot;+bundle.toString(), Toast.LENGTH_LONG).show();\r\n                frag2 f2 = new frag2();\r\n                f2.setArguments(bundle);\r\n                editText.setText(&quot;&quot;);\r\n            }\r\n        });\r\n\r\n        return view;\r\n    }\r\n}\r\n```\r\nfrag1.xml\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    tools:context=&quot;.frgmnts.frag1&quot;&gt;\r\n\r\n\r\n    &lt;EditText\r\n        android:id=&quot;@+id/frag1ET&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:layout_marginTop=&quot;116dp&quot;\r\n        android:ems=&quot;10&quot;\r\n        android:hint=&quot;Enter text&quot;\r\n        android:inputType=&quot;textPersonName&quot;\r\n        app:layout_constraintHorizontal_bias=&quot;0.497&quot;\r\n        app:layout_constraintLeft_toLeftOf=&quot;parent&quot;\r\n        app:layout_constraintRight_toRightOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\r\n\r\n    &lt;Button\r\n        android:id=&quot;@+id/frag1btn&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:layout_marginTop=&quot;28dp&quot;\r\n        android:text=&quot;Button&quot;\r\n        app:layout_constraintEnd_toEndOf=&quot;@+id/frag1ET&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;@+id/frag1ET&quot;\r\n        app:layout_constraintTop_toBottomOf=&quot;@+id/frag1ET&quot; /&gt;\r\n\r\n    &lt;TextView\r\n        android:id=&quot;@+id/frag1tv&quot;\r\n        android:layout_width=&quot;260dp&quot;\r\n        android:layout_height=&quot;56dp&quot;\r\n        android:layout_marginTop=&quot;56dp&quot;\r\n        android:textAlignment=&quot;textStart&quot;\r\n        android:hint=&quot;Text from Frag 2&quot;\r\n        android:textSize=&quot;20sp&quot;\r\n        app:layout_constraintEnd_toEndOf=&quot;@+id/frag1ET&quot;\r\n        app:layout_constraintHorizontal_bias=&quot;0.506&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;@+id/frag1ET&quot;\r\n        app:layout_constraintTop_toBottomOf=&quot;@+id/frag1btn&quot; /&gt;\r\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n```\r\nfrag2.java\r\n```\r\npublic class frag2 extends Fragment {\r\n    private TextView tv2;\r\n\r\n    public frag2(){\r\n\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\r\n        View view = inflater.inflate(R.layout.fragment_frag2, container, false);\r\n\r\n        tv2 = view.findViewById(R.id.frag2tv);\r\n\r\n\r\n        return view;\r\n    }\r\n\r\n    @Override\r\n    public void onResume() {\r\n        super.onResume();\r\n        Bundle bundle = getArguments();\r\n        if (bundle != null) {\r\n            String text = bundle.getString(&quot;tex&quot;);\r\n            tv2.setText(text);\r\n        }\r\n        else\r\n            tv2.setText(&quot;Text not received&quot;);\r\n    }\r\n}\r\n```\r\nfrag2.xml\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    tools:context=&quot;.frgmnts.frag2&quot;&gt;\r\n\r\n    &lt;EditText\r\n        android:id=&quot;@+id/frag2ET&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:layout_marginTop=&quot;116dp&quot;\r\n        android:ems=&quot;10&quot;\r\n        android:hint=&quot;Enter text&quot;\r\n        android:inputType=&quot;textPersonName&quot;\r\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n        app:layout_constraintHorizontal_bias=&quot;0.497&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\r\n\r\n    &lt;Button\r\n        android:id=&quot;@+id/frag2btn&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:layout_marginTop=&quot;40dp&quot;\r\n        android:text=&quot;Button&quot;\r\n        app:layout_constraintEnd_toEndOf=&quot;@+id/frag2ET&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;@+id/frag2ET&quot;\r\n        app:layout_constraintTop_toBottomOf=&quot;@+id/frag2ET&quot; /&gt;\r\n\r\n    &lt;TextView\r\n        android:id=&quot;@+id/frag2tv&quot;\r\n        android:layout_width=&quot;260dp&quot;\r\n        android:layout_height=&quot;56dp&quot;\r\n        android:layout_marginTop=&quot;44dp&quot;\r\n        android:hint=&quot;Text from Frag 1&quot;\r\n        android:textAlignment=&quot;textStart&quot;\r\n        android:textSize=&quot;20sp&quot;\r\n        app:layout_constraintEnd_toEndOf=&quot;@+id/frag2ET&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;@+id/frag2ET&quot;\r\n        app:layout_constraintTop_toBottomOf=&quot;@+id/frag2btn&quot; /&gt;\r\n\r\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n```\r\n\r\nAny help and inputs in this regard will be helpful. Thank you\r\n","title":"How to pass text from one fragment to another? Both hosted by the MainActivity","body":"<p>I have been trying to use Fragments in Android Studio and have been successful in the implementation of it. But, when I am trying to pass any data (Text/String here) I'm getting a Null Pointer Exception.</p>\n<p>The Fragment doesn't appear to get received by the second Fragment. Here is the code:</p>\n<p>MainActivity.java</p>\n<pre><code>public class MainActivity extends AppCompatActivity {\n\n    TabLayout tb;\n    ViewPager2 vp;\n    viewPagerAdapter vpa;\n\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        tb=findViewById(R.id.tab_lyt);\n        vp= findViewById(R.id.pager);\n        vpa= new viewPagerAdapter(this);\n\n        vp.setAdapter(vpa);\n\n        tb.addOnTabSelectedListener(new TabLayout.OnTabSelectedListener() {\n            @Override\n            public void onTabSelected(TabLayout.Tab tab) {\n                vp.setCurrentItem(tab.getPosition());\n            }\n\n            @Override\n            public void onTabUnselected(TabLayout.Tab tab) {\n\n            }\n\n            @Override\n            public void onTabReselected(TabLayout.Tab tab) {\n\n            }\n        });\n\n        vp.registerOnPageChangeCallback(new ViewPager2.OnPageChangeCallback() {\n            @Override\n            public void onPageSelected(int position) {\n                super.onPageSelected(position);\n\n                tb.getTabAt(position).select();\n            }\n        });\n    }\n}\n</code></pre>\n<p>activity_main.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    tools:context=&quot;.MainActivity&quot;&gt;\n\n    &lt;androidx.viewpager2.widget.ViewPager2\n        android:id=&quot;@+id/pager&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot;\n        android:layout_below=&quot;@id/tab_lyt&quot;\n        android:layout_marginTop=&quot;0dp&quot; /&gt;\n\n    &lt;com.google.android.material.tabs.TabLayout\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:id=&quot;@+id/tab_lyt&quot;&gt;\n\n        &lt;com.google.android.material.tabs.TabItem\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:text=&quot;Menu 1&quot;/&gt;\n\n        &lt;com.google.android.material.tabs.TabItem\n            android:id=&quot;@+id/frag2&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:text=&quot;Menu 2&quot;/&gt;\n\n\n\n    &lt;/com.google.android.material.tabs.TabLayout&gt;\n\n\n\n\n&lt;/RelativeLayout&gt;\n</code></pre>\n<p>viewPagerAdapter.java</p>\n<pre><code>public class viewPagerAdapter extends FragmentStateAdapter {\n    public viewPagerAdapter(@NonNull FragmentActivity fragmentActivity) {\n        super(fragmentActivity);\n    }\n\n    @NonNull\n    @Override\n    public Fragment createFragment(int position) {\n        switch (position)\n        {\n            case 0: return new frag1();\n\n            case 1: return new frag2();\n\n            default: return new frag1();\n        }\n    }\n\n    @Override\n    public int getItemCount() {\n        return 2;\n    }\n}\n</code></pre>\n<p>frag1.java</p>\n<pre><code>public class frag1 extends Fragment {\n    private EditText editText;\n    private Button button;\n\n    public frag1(){\n\n    }\n\n    @Override\n    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\n        View view = inflater.inflate(R.layout.fragment_frag1, container, false);\n\n        editText = view.findViewById(R.id.frag1ET);\n        button = view.findViewById(R.id.frag1btn);\n\n\n        button.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                String text = editText.getText().toString();\n                Bundle bundle = new Bundle();\n                bundle.putString(&quot;tex&quot;, text);\n                Toast.makeText(getContext(), &quot;&quot;+bundle.toString(), Toast.LENGTH_LONG).show();\n                frag2 f2 = new frag2();\n                f2.setArguments(bundle);\n                editText.setText(&quot;&quot;);\n            }\n        });\n\n        return view;\n    }\n}\n</code></pre>\n<p>frag1.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    tools:context=&quot;.frgmnts.frag1&quot;&gt;\n\n\n    &lt;EditText\n        android:id=&quot;@+id/frag1ET&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_marginTop=&quot;116dp&quot;\n        android:ems=&quot;10&quot;\n        android:hint=&quot;Enter text&quot;\n        android:inputType=&quot;textPersonName&quot;\n        app:layout_constraintHorizontal_bias=&quot;0.497&quot;\n        app:layout_constraintLeft_toLeftOf=&quot;parent&quot;\n        app:layout_constraintRight_toRightOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\n\n    &lt;Button\n        android:id=&quot;@+id/frag1btn&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_marginTop=&quot;28dp&quot;\n        android:text=&quot;Button&quot;\n        app:layout_constraintEnd_toEndOf=&quot;@+id/frag1ET&quot;\n        app:layout_constraintStart_toStartOf=&quot;@+id/frag1ET&quot;\n        app:layout_constraintTop_toBottomOf=&quot;@+id/frag1ET&quot; /&gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/frag1tv&quot;\n        android:layout_width=&quot;260dp&quot;\n        android:layout_height=&quot;56dp&quot;\n        android:layout_marginTop=&quot;56dp&quot;\n        android:textAlignment=&quot;textStart&quot;\n        android:hint=&quot;Text from Frag 2&quot;\n        android:textSize=&quot;20sp&quot;\n        app:layout_constraintEnd_toEndOf=&quot;@+id/frag1ET&quot;\n        app:layout_constraintHorizontal_bias=&quot;0.506&quot;\n        app:layout_constraintStart_toStartOf=&quot;@+id/frag1ET&quot;\n        app:layout_constraintTop_toBottomOf=&quot;@+id/frag1btn&quot; /&gt;\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n<p>frag2.java</p>\n<pre><code>public class frag2 extends Fragment {\n    private TextView tv2;\n\n    public frag2(){\n\n    }\n\n    @Override\n    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\n        View view = inflater.inflate(R.layout.fragment_frag2, container, false);\n\n        tv2 = view.findViewById(R.id.frag2tv);\n\n\n        return view;\n    }\n\n    @Override\n    public void onResume() {\n        super.onResume();\n        Bundle bundle = getArguments();\n        if (bundle != null) {\n            String text = bundle.getString(&quot;tex&quot;);\n            tv2.setText(text);\n        }\n        else\n            tv2.setText(&quot;Text not received&quot;);\n    }\n}\n</code></pre>\n<p>frag2.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    tools:context=&quot;.frgmnts.frag2&quot;&gt;\n\n    &lt;EditText\n        android:id=&quot;@+id/frag2ET&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_marginTop=&quot;116dp&quot;\n        android:ems=&quot;10&quot;\n        android:hint=&quot;Enter text&quot;\n        android:inputType=&quot;textPersonName&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintHorizontal_bias=&quot;0.497&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\n\n    &lt;Button\n        android:id=&quot;@+id/frag2btn&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_marginTop=&quot;40dp&quot;\n        android:text=&quot;Button&quot;\n        app:layout_constraintEnd_toEndOf=&quot;@+id/frag2ET&quot;\n        app:layout_constraintStart_toStartOf=&quot;@+id/frag2ET&quot;\n        app:layout_constraintTop_toBottomOf=&quot;@+id/frag2ET&quot; /&gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/frag2tv&quot;\n        android:layout_width=&quot;260dp&quot;\n        android:layout_height=&quot;56dp&quot;\n        android:layout_marginTop=&quot;44dp&quot;\n        android:hint=&quot;Text from Frag 1&quot;\n        android:textAlignment=&quot;textStart&quot;\n        android:textSize=&quot;20sp&quot;\n        app:layout_constraintEnd_toEndOf=&quot;@+id/frag2ET&quot;\n        app:layout_constraintStart_toStartOf=&quot;@+id/frag2ET&quot;\n        app:layout_constraintTop_toBottomOf=&quot;@+id/frag2btn&quot; /&gt;\n\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n<p>Any help and inputs in this regard will be helpful. Thank you</p>\n"},{"tags":["java","multithreading","synchronization"],"comments":[{"owner":{"account_id":93935,"reputation":6609,"user_id":256763,"accept_rate":100,"display_name":"yassin"},"score":11,"creation_date":1284814641,"post_id":3741765,"comment_id":3954467,"body_markdown":"Then what is the purpose of using threads? Use a sequential code instead","body":"Then what is the purpose of using threads? Use a sequential code instead"},{"owner":{"account_id":124725,"reputation":2291,"user_id":320007,"accept_rate":70,"display_name":"keshav84"},"score":5,"creation_date":1284815173,"post_id":3741765,"comment_id":3954494,"body_markdown":"this was just a simple code for illustration, i actually have some parts that i want to execute in parallel and then once the results are generated i want to merge the results in certain order","body":"this was just a simple code for illustration, i actually have some parts that i want to execute in parallel and then once the results are generated i want to merge the results in certain order"},{"owner":{"account_id":55151,"reputation":8058,"user_id":165103,"accept_rate":88,"display_name":"Mahmoud Hanafy"},"score":0,"creation_date":1284817342,"post_id":3741765,"comment_id":3954605,"body_markdown":"starting a thread in the way illustrated above is nowhere near readable,try assigning the runnable to a reference variable,that&#39;ll make it more readable","body":"starting a thread in the way illustrated above is nowhere near readable,try assigning the runnable to a reference variable,that&#39;ll make it more readable"},{"owner":{"account_id":124725,"reputation":2291,"user_id":320007,"accept_rate":70,"display_name":"keshav84"},"score":0,"creation_date":1284824018,"post_id":3741765,"comment_id":3955066,"body_markdown":"hi all, the soln from finw does this really nicely, it starts all the tasks together waits for each of the task to complete in order. the merge operation in my case allows this to be optimized futher since the result produced by task &#39;n&#39; can be merged with result from &#39;n+1&#39;, is it possible to achieve this with callables and futures such that if any one of the callable completes then we can execute the merge step or that the main thread is allowed to execute the merge with task n+1","body":"hi all, the soln from finw does this really nicely, it starts all the tasks together waits for each of the task to complete in order. the merge operation in my case allows this to be optimized futher since the result produced by task &#39;n&#39; can be merged with result from &#39;n+1&#39;, is it possible to achieve this with callables and futures such that if any one of the callable completes then we can execute the merge step or that the main thread is allowed to execute the merge with task n+1"}],"answers":[{"comments":[{"owner":{"account_id":40256,"reputation":46474,"user_id":116639,"accept_rate":25,"display_name":"Tom Anderson"},"score":1,"creation_date":1284818984,"post_id":3741773,"comment_id":3954688,"body_markdown":"This isn&#39;t about having the threads run in a given order (despite what the OP said), but producing output in a given order. You can still run the threads in parallel, as long as there is a way to coordinate their output.","body":"This isn&#39;t about having the threads run in a given order (despite what the OP said), but producing output in a given order. You can still run the threads in parallel, as long as there is a way to coordinate their output."},{"owner":{"account_id":42704,"reputation":8824,"user_id":124493,"accept_rate":96,"display_name":"San Jacinto"},"score":0,"creation_date":1284831074,"post_id":3741773,"comment_id":3955649,"body_markdown":"@Tom I answered the question when it looked merely like an academic question. So, thanks for your comment but I answered what he asked :)","body":"@Tom I answered the question when it looked merely like an academic question. So, thanks for your comment but I answered what he asked :)"},{"owner":{"account_id":40256,"reputation":46474,"user_id":116639,"accept_rate":25,"display_name":"Tom Anderson"},"score":0,"creation_date":1284903316,"post_id":3741773,"comment_id":3959585,"body_markdown":"No, even in the earliest version of this question, the OP asked &quot;how can i make the below program print the numbers 1...10 in order&quot; which makes it clear he&#39;s talking about ordering the *output* of the threads, not their executions. To me, at least.","body":"No, even in the earliest version of this question, the OP asked &quot;how can i make the below program print the numbers 1...10 in order&quot; which makes it clear he&#39;s talking about ordering the <i>output</i> of the threads, not their executions. To me, at least."},{"owner":{"account_id":42704,"reputation":8824,"user_id":124493,"accept_rate":96,"display_name":"San Jacinto"},"score":0,"creation_date":1284927997,"post_id":3741773,"comment_id":3961396,"body_markdown":"@Tom but that would be in willful neglect of the earlier part of the question where he asked how to _order the threads_, where the common illustration of printing to console is an example of sharing a common resource. You can disagree with me all you want; that&#39;s great. I considered the emphasis of the question as scheduling threads (a VERY common novice question), and you considered it to be a problem in data collation. The line is drawn. I understand your point, but nothing will change the fact that I thought he was asking a different question because of his wording.","body":"@Tom but that would be in willful neglect of the earlier part of the question where he asked how to <i>order the threads</i>, where the common illustration of printing to console is an example of sharing a common resource. You can disagree with me all you want; that&#39;s great. I considered the emphasis of the question as scheduling threads (a VERY common novice question), and you considered it to be a problem in data collation. The line is drawn. I understand your point, but nothing will change the fact that I thought he was asking a different question because of his wording."},{"owner":{"account_id":40256,"reputation":46474,"user_id":116639,"accept_rate":25,"display_name":"Tom Anderson"},"score":0,"creation_date":1285003404,"post_id":3741773,"comment_id":3969398,"body_markdown":"You&#39;re quite right - it&#39;s clearly the case that we interpreted the question differently. And, naturally, that we both feel our interpretations are correct. Thus, we have most of human history in a nutshell, sadly.","body":"You&#39;re quite right - it&#39;s clearly the case that we interpreted the question differently. And, naturally, that we both feel our interpretations are correct. Thus, we have most of human history in a nutshell, sadly."}],"tags":[],"owner":{"account_id":42704,"reputation":8824,"user_id":124493,"accept_rate":96,"display_name":"San Jacinto"},"comment_count":5,"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1441648523,"creation_date":1284814711,"answer_id":3741773,"question_id":3741765,"body_markdown":"Simply put, the scheduling of threads is indeterminate.\r\n\r\n&lt;strike&gt;`http://www.janeg.ca/scjp/threads/scheduling.html`&lt;/strike&gt; *Dead domain - do not click*\r\n\r\n[WaybackMachine version of the above page][1]\r\n\r\nThe longer answer is that if you want to do this, you&#39;ll need to manually wait for each thread to complete its work before you allow another to run. Note that in this fashion, all the threads will still interleave but they won&#39;t accomplish any work until you give the go-ahead. Have a look at the synchronize reserved word.\r\n\r\n\r\n  [1]: https://web.archive.org/web/20120503024923/http://janeg.ca/scjp/threads/scheduling.html","title":"Ordering threads to run in the order they were created/started","body":"<p>Simply put, the scheduling of threads is indeterminate.</p>\n\n<p><strike><code>http://www.janeg.ca/scjp/threads/scheduling.html</code></strike> <em>Dead domain - do not click</em></p>\n\n<p><a href=\"https://web.archive.org/web/20120503024923/http://janeg.ca/scjp/threads/scheduling.html\" rel=\"nofollow noreferrer\">WaybackMachine version of the above page</a></p>\n\n<p>The longer answer is that if you want to do this, you'll need to manually wait for each thread to complete its work before you allow another to run. Note that in this fashion, all the threads will still interleave but they won't accomplish any work until you give the go-ahead. Have a look at the synchronize reserved word.</p>\n"},{"comments":[{"owner":{"account_id":7052,"reputation":48090,"user_id":12048,"accept_rate":94,"display_name":"finnw"},"score":0,"creation_date":1284820964,"post_id":3741775,"comment_id":3954805,"body_markdown":"Are you referring to `Executors.newSingleThreadExecutor()`?  Based on the OP&#39;s response to [Peter DeWeese&#39;s answer](http://stackoverflow.com/questions/3741765/ordering-threads-to-run-in-the-order-they-were-created-started/3741815#3741815) I don&#39;t think this is what they want.","body":"Are you referring to <code>Executors.newSingleThreadExecutor()</code>?  Based on the OP&#39;s response to <a href=\"http://stackoverflow.com/questions/3741765/ordering-threads-to-run-in-the-order-they-were-created-started/3741815#3741815\">Peter DeWeese&#39;s answer</a> I don&#39;t think this is what they want."}],"tags":[],"owner":{"account_id":21994,"reputation":73808,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1284814744,"creation_date":1284814744,"answer_id":3741775,"question_id":3741765,"body_markdown":"If you need that fine-grained control, you should not use threads but instead look into using a suitable Executor with Callables or Runnables.  See the Executors class for a wide selection.","title":"Ordering threads to run in the order they were created/started","body":"<p>If you need that fine-grained control, you should not use threads but instead look into using a suitable Executor with Callables or Runnables.  See the Executors class for a wide selection.</p>\n"},{"comments":[{"owner":{"account_id":124725,"reputation":2291,"user_id":320007,"accept_rate":70,"display_name":"keshav84"},"score":0,"creation_date":1284815990,"post_id":3741815,"comment_id":3954547,"body_markdown":"hi peter, i am sorry i should have mentioned this earlier.\ni dont want the threads to run one after the other i want them to start together, as my goal is to execute some parts in parallel and then i want to end the threads in a certain order. i also added this comment much later just below the question","body":"hi peter, i am sorry i should have mentioned this earlier. i dont want the threads to run one after the other i want them to start together, as my goal is to execute some parts in parallel and then i want to end the threads in a certain order. i also added this comment much later just below the question"},{"owner":{"account_id":190859,"reputation":18190,"user_id":431053,"accept_rate":88,"display_name":"Peter DeWeese"},"score":0,"creation_date":1284816060,"post_id":3741815,"comment_id":3954553,"body_markdown":"No vote down necessary, to whomever did that.  I was working with the original question.","body":"No vote down necessary, to whomever did that.  I was working with the original question."}],"tags":[],"owner":{"account_id":190859,"reputation":18190,"user_id":431053,"accept_rate":88,"display_name":"Peter DeWeese"},"comment_count":2,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1284815540,"creation_date":1284815540,"answer_id":3741815,"question_id":3741765,"body_markdown":"You can chain them – that is, have the first one start the second, the second start the third, etc.  They won&#39;t really be running at the same time except for a bit of overlap when each one is started.\r\n\r\n    public class ThreadOrdering\r\n    {\r\n        public static void main(String[] args)\r\n        {\r\n            MyRunnable[] threads = new MyRunnable[10];//index 0 represents thread 1;\r\n            for(int i=1; i&lt;=10; i++)\r\n                threads[i] = new MyRunnable(i, threads); \r\n            new Thread(threads[0].start);  \r\n        }\r\n    }\r\n\r\n    public class MyRunnable extends Runnable\r\n    {\r\n        int threadNumber;\r\n        MyRunnable[] threads;\r\n\r\n        public MyRunnable(int threadNumber, MyRunnable[] threads)\r\n        {\r\n            this.threadnumber = threadnumber;\r\n            this.threads = threads;\r\n        }\r\n\r\n        public void run()\r\n        {\r\n            System.out.println(threadnumber);\r\n            if(threadnumber!=10)\r\n                new Thread(threadnumber).start();\r\n        }\r\n    }","title":"Ordering threads to run in the order they were created/started","body":"<p>You can chain them – that is, have the first one start the second, the second start the third, etc.  They won't really be running at the same time except for a bit of overlap when each one is started.</p>\n\n<pre><code>public class ThreadOrdering\n{\n    public static void main(String[] args)\n    {\n        MyRunnable[] threads = new MyRunnable[10];//index 0 represents thread 1;\n        for(int i=1; i&lt;=10; i++)\n            threads[i] = new MyRunnable(i, threads); \n        new Thread(threads[0].start);  \n    }\n}\n\npublic class MyRunnable extends Runnable\n{\n    int threadNumber;\n    MyRunnable[] threads;\n\n    public MyRunnable(int threadNumber, MyRunnable[] threads)\n    {\n        this.threadnumber = threadnumber;\n        this.threads = threads;\n    }\n\n    public void run()\n    {\n        System.out.println(threadnumber);\n        if(threadnumber!=10)\n            new Thread(threadnumber).start();\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":93935,"reputation":6609,"user_id":256763,"accept_rate":100,"display_name":"yassin"},"score":0,"creation_date":1284817702,"post_id":3741889,"comment_id":3954625,"body_markdown":"This way you can&#39;t overlap the computation and the results merging (which is done sequentially)","body":"This way you can&#39;t overlap the computation and the results merging (which is done sequentially)"},{"owner":{"account_id":144311,"reputation":5575,"user_id":353267,"accept_rate":100,"display_name":"jbindel"},"score":0,"creation_date":1284819215,"post_id":3741889,"comment_id":3954700,"body_markdown":"That could be true if the threads need to keep running---doing more computations after they get their `result`, but I understood the problem to be needing to do one task in the thread.   If the threads need to continue their computations, then the solution would be to use `worker.wait()` in each loop because you do have to wait() rather than join() for the results in order to be able to print them out.","body":"That could be true if the threads need to keep running---doing more computations after they get their <code>result</code>, but I understood the problem to be needing to do one task in the thread.   If the threads need to continue their computations, then the solution would be to use <code>worker.wait()</code> in each loop because you do have to wait() rather than join() for the results in order to be able to print them out."},{"owner":{"account_id":144311,"reputation":5575,"user_id":353267,"accept_rate":100,"display_name":"jbindel"},"score":0,"creation_date":1284819294,"post_id":3741889,"comment_id":3954705,"body_markdown":"Another possibility for getting results from a `worker` that never finishes would be to have each `worker` make a callback to some collector object with its result as its result became available, but that seems more complicated than the original question.","body":"Another possibility for getting results from a <code>worker</code> that never finishes would be to have each <code>worker</code> make a callback to some collector object with its result as its result became available, but that seems more complicated than the original question."},{"owner":{"account_id":144311,"reputation":5575,"user_id":353267,"accept_rate":100,"display_name":"jbindel"},"score":0,"creation_date":1284819828,"post_id":3741889,"comment_id":3954743,"body_markdown":"But this solution absolutes does allow computations to overlap.  None of the workers wait on any of the other workers.","body":"But this solution absolutes does allow computations to overlap.  None of the workers wait on any of the other workers."}],"tags":[],"owner":{"account_id":144311,"reputation":5575,"user_id":353267,"accept_rate":100,"display_name":"jbindel"},"comment_count":4,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1284817103,"creation_date":1284817103,"answer_id":3741889,"question_id":3741765,"body_markdown":"&quot;I actually have some parts that i want to execute in parallel, and then once the results are generated, I want to merge the results in certain order.&quot;  Thanks, this clarifies what you&#39;re asking.\r\n\r\nYou can run them all at once, but the important thing is to get their results in order when the threads finish their computation. Either [`Thread#join()`][1] them in the order in which you want to get their results, or just [`Thread#join()`][1] them all and then iterate through them to get their results.\r\n\r\n    // Joins the threads back to the main thread in the order we want their results.\r\n    public class ThreadOrdering {\r\n        private class MyWorker extends Thread {\r\n            final int input;\r\n            int result;\r\n            MyWorker(final int input) {\r\n                this.input = input;\r\n            }\r\n            @Override\r\n            public void run() {\r\n                this.result = input; // Or some other computation.\r\n            }\r\n            int getResult() { return result; }\r\n        }\r\n\r\n        public static void main(String[] args) throws InterruptedException {\r\n            MyWorker[] workers = new MyWorker[10];\r\n            for(int i=1; i&lt;=10; i++) {\r\n                workers[i] = new MyWorker(i);\r\n                workers[i].start();\r\n            }\r\n\r\n            // Assume it may take a while to do the real computation in the threads.\r\n\r\n            for (MyWorker worker : workers) {\r\n                // This can throw InterruptedException, but we&#39;re just passing that.\r\n                worker.join();\r\n                System.out.println(worker.getResult());\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n  [1]: http://download.oracle.com/javase/6/docs/api/java/lang/Thread.html#join() &quot;Thread#join()&quot;","title":"Ordering threads to run in the order they were created/started","body":"<p>\"I actually have some parts that i want to execute in parallel, and then once the results are generated, I want to merge the results in certain order.\"  Thanks, this clarifies what you're asking.</p>\n\n<p>You can run them all at once, but the important thing is to get their results in order when the threads finish their computation. Either <a href=\"http://download.oracle.com/javase/6/docs/api/java/lang/Thread.html#join()\" rel=\"noreferrer\" title=\"Thread#join()\"><code>Thread#join()</code></a> them in the order in which you want to get their results, or just <a href=\"http://download.oracle.com/javase/6/docs/api/java/lang/Thread.html#join()\" rel=\"noreferrer\" title=\"Thread#join()\"><code>Thread#join()</code></a> them all and then iterate through them to get their results.</p>\n\n<pre><code>// Joins the threads back to the main thread in the order we want their results.\npublic class ThreadOrdering {\n    private class MyWorker extends Thread {\n        final int input;\n        int result;\n        MyWorker(final int input) {\n            this.input = input;\n        }\n        @Override\n        public void run() {\n            this.result = input; // Or some other computation.\n        }\n        int getResult() { return result; }\n    }\n\n    public static void main(String[] args) throws InterruptedException {\n        MyWorker[] workers = new MyWorker[10];\n        for(int i=1; i&lt;=10; i++) {\n            workers[i] = new MyWorker(i);\n            workers[i].start();\n        }\n\n        // Assume it may take a while to do the real computation in the threads.\n\n        for (MyWorker worker : workers) {\n            // This can throw InterruptedException, but we're just passing that.\n            worker.join();\n            System.out.println(worker.getResult());\n        }\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":144311,"reputation":5575,"user_id":353267,"accept_rate":100,"display_name":"jbindel"},"score":0,"creation_date":1284819748,"post_id":3741922,"comment_id":3954732,"body_markdown":"When the main thread is controlling the collection of results, an idiomatic way to wait for a thread to finish is to call `Thread#join()`.  Your solution to have each result be a &quot;future&quot; that depends on the next future result might be useful in some situations, too, but it seems more complicated than `Thread#join()`.","body":"When the main thread is controlling the collection of results, an idiomatic way to wait for a thread to finish is to call <code>Thread#join()</code>.  Your solution to have each result be a &quot;future&quot; that depends on the next future result might be useful in some situations, too, but it seems more complicated than <code>Thread#join()</code>."},{"owner":{"account_id":144311,"reputation":5575,"user_id":353267,"accept_rate":100,"display_name":"jbindel"},"score":0,"creation_date":1284819948,"post_id":3741922,"comment_id":3954750,"body_markdown":"If each worker does somehow depend on another worker, one could put the dependencies in the worker threads.  It would also work to have the main thread control the interaction of results and do any post/merging computations in order to keep the workers as simple as possible.","body":"If each worker does somehow depend on another worker, one could put the dependencies in the worker threads.  It would also work to have the main thread control the interaction of results and do any post/merging computations in order to keep the workers as simple as possible."}],"tags":[],"owner":{"account_id":93935,"reputation":6609,"user_id":256763,"accept_rate":100,"display_name":"yassin"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1284818487,"creation_date":1284817566,"answer_id":3741922,"question_id":3741765,"body_markdown":"A simple solution would be to use an array `A` of locks (one lock per thread). When thread `i` begins its executions, it acquires its associated lock `A[i]`. When it&#39;s ready to merge its results, it releases its lock `A[i]` and waits for locks `A[0], A[1], ..., A[i - 1]` to be released; then it merges the results.\r\n\r\n(In this context, thread `i` means the `i`-th launched thread)\r\n\r\nI don&#39;t know what classes to use in Java, but it must be easy to implement. You can begin reading [this][1].\r\n\r\nIf you have more questions, feel free to ask.\r\n\r\n  [1]: http://download.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Lock.html","title":"Ordering threads to run in the order they were created/started","body":"<p>A simple solution would be to use an array <code>A</code> of locks (one lock per thread). When thread <code>i</code> begins its executions, it acquires its associated lock <code>A[i]</code>. When it's ready to merge its results, it releases its lock <code>A[i]</code> and waits for locks <code>A[0], A[1], ..., A[i - 1]</code> to be released; then it merges the results.</p>\n\n<p>(In this context, thread <code>i</code> means the <code>i</code>-th launched thread)</p>\n\n<p>I don't know what classes to use in Java, but it must be easy to implement. You can begin reading <a href=\"http://download.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Lock.html\" rel=\"nofollow noreferrer\">this</a>.</p>\n\n<p>If you have more questions, feel free to ask.</p>\n"},{"comments":[{"owner":{"account_id":40256,"reputation":46474,"user_id":116639,"accept_rate":25,"display_name":"Tom Anderson"},"score":0,"creation_date":1284820368,"post_id":3742031,"comment_id":3954776,"body_markdown":"Nice. A difference between this and Fly&#39;s and my solutions is that this produces all the output in one lump at the end, whereas our solutions produce each bit of output as it becomes possible. Depending on what the OP is actually doing, he might prefer one or the other. Or not, of course. It would be nice if there was an invokeAll variant that returned an Iterator rather than a list.","body":"Nice. A difference between this and Fly&#39;s and my solutions is that this produces all the output in one lump at the end, whereas our solutions produce each bit of output as it becomes possible. Depending on what the OP is actually doing, he might prefer one or the other. Or not, of course. It would be nice if there was an invokeAll variant that returned an Iterator rather than a list."},{"owner":{"account_id":7052,"reputation":48090,"user_id":12048,"accept_rate":94,"display_name":"finnw"},"score":0,"creation_date":1284821173,"post_id":3742031,"comment_id":3954824,"body_markdown":"@Tom Anderson, how would you handle interruption in an `Iterator`?","body":"@Tom Anderson, how would you handle interruption in an <code>Iterator</code>?"},{"owner":{"account_id":124725,"reputation":2291,"user_id":320007,"accept_rate":70,"display_name":"keshav84"},"score":0,"creation_date":1284823695,"post_id":3742031,"comment_id":3955042,"body_markdown":"superb.. this does the job for me thank u.\n\nthe merge operation in my case allows this to be optimized futher since the result produced by task &#39;n&#39; can be merged with result from &#39;n+1&#39;, is it possible to achieve this with callables and futures such that if any one of the callable completes then we can execute the merge step or that the main thread is allowed to execute the merge with task n+1","body":"superb.. this does the job for me thank u.  the merge operation in my case allows this to be optimized futher since the result produced by task &#39;n&#39; can be merged with result from &#39;n+1&#39;, is it possible to achieve this with callables and futures such that if any one of the callable completes then we can execute the merge step or that the main thread is allowed to execute the merge with task n+1"},{"owner":{"account_id":144311,"reputation":5575,"user_id":353267,"accept_rate":100,"display_name":"jbindel"},"score":1,"creation_date":1284834622,"post_id":3742031,"comment_id":3955929,"body_markdown":"Do you want to `merge(r(n), r(n+1))` immediately?  Can you `merge(r(n), merge(r(n), r(n-1)))` at some point after that?  With `invokeAll`, the main thread will have to wait for all of the tasks to complete before the list of futures is returned, so you would just merge them by iterating over the results list.  Is that not what you want to do?","body":"Do you want to <code>merge(r(n), r(n+1))</code> immediately?  Can you <code>merge(r(n), merge(r(n), r(n-1)))</code> at some point after that?  With <code>invokeAll</code>, the main thread will have to wait for all of the tasks to complete before the list of futures is returned, so you would just merge them by iterating over the results list.  Is that not what you want to do?"},{"owner":{"account_id":40256,"reputation":46474,"user_id":116639,"accept_rate":25,"display_name":"Tom Anderson"},"score":0,"creation_date":1284903669,"post_id":3742031,"comment_id":3959610,"body_markdown":"@finnw: good question. I assume you mean interruption of the main thread while it&#39;s waiting in in Iterator.next()? I think the best option is probably to throw a NoSuchElementException with the InterruptedException as its cause. There&#39;s not a lot else you can do with an interface as narrow as Iterator. I suppose you could treat it as cancellation of the Callable being waited for, and return a Future that behaves accordingly. You&#39;d probably also actually cancel the running tasks. It would all be a bit weird, though.","body":"@finnw: good question. I assume you mean interruption of the main thread while it&#39;s waiting in in Iterator.next()? I think the best option is probably to throw a NoSuchElementException with the InterruptedException as its cause. There&#39;s not a lot else you can do with an interface as narrow as Iterator. I suppose you could treat it as cancellation of the Callable being waited for, and return a Future that behaves accordingly. You&#39;d probably also actually cancel the running tasks. It would all be a bit weird, though."},{"owner":{"account_id":124725,"reputation":2291,"user_id":320007,"accept_rate":70,"display_name":"keshav84"},"score":0,"creation_date":1284923078,"post_id":3742031,"comment_id":3961021,"body_markdown":"@Fly :: Yes it can be done, but even the merge operation is kind of a heavy operation and so i would like to trigger the merge right after any of the task is processed. It seems that i use countdownlatch to achieve this. once all the tasks are started make the main thread await on countdownlatch, once any of the tasks are completed update the countdownlatch so that main thread can proceed. at this point when main thread is notified i can find if any of the results are available and start the merge operation and then make the main wait until next result is available.","body":"@Fly :: Yes it can be done, but even the merge operation is kind of a heavy operation and so i would like to trigger the merge right after any of the task is processed. It seems that i use countdownlatch to achieve this. once all the tasks are started make the main thread await on countdownlatch, once any of the tasks are completed update the countdownlatch so that main thread can proceed. at this point when main thread is notified i can find if any of the results are available and start the merge operation and then make the main wait until next result is available."},{"owner":{"account_id":40256,"reputation":46474,"user_id":116639,"accept_rate":25,"display_name":"Tom Anderson"},"score":0,"creation_date":1285003636,"post_id":3742031,"comment_id":3969433,"body_markdown":"@finnw: update! ExecutorCompletionService, which i only came across this afternoon, allows you to do more or less exactly what i want, albeit not through an actual Iterator, and with a few more lines of code.","body":"@finnw: update! ExecutorCompletionService, which i only came across this afternoon, allows you to do more or less exactly what i want, albeit not through an actual Iterator, and with a few more lines of code."}],"tags":[],"owner":{"account_id":7052,"reputation":48090,"user_id":12048,"accept_rate":94,"display_name":"finnw"},"comment_count":7,"down_vote_count":0,"up_vote_count":15,"is_accepted":true,"score":15,"last_activity_date":1284820514,"creation_date":1284819897,"answer_id":3742031,"question_id":3741765,"body_markdown":"Sounds like you want &lt;code&gt;[ExecutorService.invokeAll](http://download.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html#invokeAll%28java.util.Collection%29)&lt;/code&gt;, which will return results from worker threads in a fixed order, even though they may be scheduled in arbitrary order:\r\n\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    import java.util.concurrent.Callable;\r\n    import java.util.concurrent.ExecutionException;\r\n    import java.util.concurrent.ExecutorService;\r\n    import java.util.concurrent.Executors;\r\n    import java.util.concurrent.Future;\r\n    \r\n    public class ThreadOrdering {\r\n    \r\n        static int NUM_THREADS = 10;\r\n    \r\n        public static void main(String[] args) {\r\n            ExecutorService exec = Executors.newFixedThreadPool(NUM_THREADS);\r\n            class MyCallable implements Callable&lt;Integer&gt; {\r\n                private final int threadnumber;\r\n    \r\n                MyCallable(int threadnumber){\r\n                    this.threadnumber = threadnumber;\r\n                }\r\n    \r\n                public Integer call() {\r\n                    System.out.println(&quot;Running thread #&quot; + threadnumber);\r\n                    return threadnumber;\r\n                }\r\n            }\r\n    \r\n            List&lt;Callable&lt;Integer&gt;&gt; callables =\r\n                new ArrayList&lt;Callable&lt;Integer&gt;&gt;();\r\n            for(int i=1; i&lt;=NUM_THREADS; i++) {\r\n                callables.add(new MyCallable(i));\r\n            }\r\n            try {\r\n                List&lt;Future&lt;Integer&gt;&gt; results =\r\n                    exec.invokeAll(callables);\r\n                for(Future&lt;Integer&gt; result: results) {\r\n                    System.out.println(&quot;Got result of thread #&quot; + result.get());\r\n                }\r\n            } catch (InterruptedException ex) {\r\n                ex.printStackTrace();\r\n            } catch (ExecutionException ex) {\r\n                ex.printStackTrace();\r\n            } finally {\r\n                exec.shutdownNow();\r\n            }\r\n        }\r\n    \r\n    }\r\n\r\n","title":"Ordering threads to run in the order they were created/started","body":"<p>Sounds like you want <code><a href=\"http://download.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html#invokeAll%28java.util.Collection%29\" rel=\"noreferrer\">ExecutorService.invokeAll</a></code>, which will return results from worker threads in a fixed order, even though they may be scheduled in arbitrary order:</p>\n\n<pre><code>import java.util.ArrayList;\nimport java.util.List;\nimport java.util.concurrent.Callable;\nimport java.util.concurrent.ExecutionException;\nimport java.util.concurrent.ExecutorService;\nimport java.util.concurrent.Executors;\nimport java.util.concurrent.Future;\n\npublic class ThreadOrdering {\n\n    static int NUM_THREADS = 10;\n\n    public static void main(String[] args) {\n        ExecutorService exec = Executors.newFixedThreadPool(NUM_THREADS);\n        class MyCallable implements Callable&lt;Integer&gt; {\n            private final int threadnumber;\n\n            MyCallable(int threadnumber){\n                this.threadnumber = threadnumber;\n            }\n\n            public Integer call() {\n                System.out.println(\"Running thread #\" + threadnumber);\n                return threadnumber;\n            }\n        }\n\n        List&lt;Callable&lt;Integer&gt;&gt; callables =\n            new ArrayList&lt;Callable&lt;Integer&gt;&gt;();\n        for(int i=1; i&lt;=NUM_THREADS; i++) {\n            callables.add(new MyCallable(i));\n        }\n        try {\n            List&lt;Future&lt;Integer&gt;&gt; results =\n                exec.invokeAll(callables);\n            for(Future&lt;Integer&gt; result: results) {\n                System.out.println(\"Got result of thread #\" + result.get());\n            }\n        } catch (InterruptedException ex) {\n            ex.printStackTrace();\n        } catch (ExecutionException ex) {\n            ex.printStackTrace();\n        } finally {\n            exec.shutdownNow();\n        }\n    }\n\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":40256,"reputation":46474,"user_id":116639,"accept_rate":25,"display_name":"Tom Anderson"},"score":0,"creation_date":1284822175,"post_id":3742051,"comment_id":3954909,"body_markdown":"If you have a large number of threads, you might want something a bit cleverer than an arraylist, so you don&#39;t have all the old results hanging around. Maybe a heap, ordered by order number, where the root is only popped if it has the next undelivered order number.","body":"If you have a large number of threads, you might want something a bit cleverer than an arraylist, so you don&#39;t have all the old results hanging around. Maybe a heap, ordered by order number, where the root is only popped if it has the next undelivered order number."}],"tags":[],"owner":{"account_id":40256,"reputation":46474,"user_id":116639,"accept_rate":25,"display_name":"Tom Anderson"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1284820152,"creation_date":1284820152,"answer_id":3742051,"question_id":3741765,"body_markdown":"Here&#39;s a way to do it without having a master thread that waits for each result. Instead, have the worker threads share an object which orders the results.\r\n\r\n    import java.util.*;\r\n    \r\n    public class OrderThreads {\r\n    \tpublic static void main(String... args) {\r\n    \t\tResults results = new Results();\r\n    \t\tnew Thread(new Task(0, &quot;red&quot;, results)).start();\r\n    \t\tnew Thread(new Task(1, &quot;orange&quot;, results)).start();\r\n    \t\tnew Thread(new Task(2, &quot;yellow&quot;, results)).start();\r\n    \t\tnew Thread(new Task(3, &quot;green&quot;, results)).start();\r\n    \t\tnew Thread(new Task(4, &quot;blue&quot;, results)).start();\r\n    \t\tnew Thread(new Task(5, &quot;indigo&quot;, results)).start();\r\n    \t\tnew Thread(new Task(6, &quot;violet&quot;, results)).start();\r\n    \t}\r\n    }\r\n    \r\n    class Results {\r\n    \tprivate List&lt;String&gt; results = new ArrayList&lt;String&gt;();\r\n    \tprivate int i = 0;\r\n    \t\r\n    \tpublic synchronized void submit(int order, String result) {\r\n    \t\twhile (results.size() &lt;= order) results.add(null);\r\n    \t\tresults.set(order, result);\r\n    \t\twhile ((i &lt; results.size()) &amp;&amp; (results.get(i) != null)) {\r\n    \t\t\tSystem.out.println(&quot;result delivered: &quot; + i + &quot; &quot; + results.get(i));\r\n    \t\t\t++i;\r\n    \t\t}\r\n    \t}\r\n    }\r\n    \r\n    \r\n    class Task implements Runnable {\r\n    \tprivate final int order;\r\n    \tprivate final String result;\r\n    \tprivate final Results results;\r\n    \t\r\n    \tpublic Task(int order, String result, Results results) {\r\n    \t\tthis.order = order;\r\n    \t\tthis.result = result;\r\n    \t\tthis.results = results;\r\n    \t}\r\n    \t\r\n    \tpublic void run() {\r\n    \t\ttry {\r\n    \t\t\tThread.sleep(Math.abs(result.hashCode() % 1000)); // simulate a long-running computation\r\n    \t\t}\r\n    \t\tcatch (InterruptedException e) {} // you&#39;d want to think about what to do if interrupted\r\n    \t\tSystem.out.println(&quot;task finished: &quot; + order + &quot; &quot; + result);\r\n    \t\tresults.submit(order, result);\r\n    \t}\r\n    }\r\n\r\n","title":"Ordering threads to run in the order they were created/started","body":"<p>Here's a way to do it without having a master thread that waits for each result. Instead, have the worker threads share an object which orders the results.</p>\n\n<pre><code>import java.util.*;\n\npublic class OrderThreads {\n    public static void main(String... args) {\n        Results results = new Results();\n        new Thread(new Task(0, \"red\", results)).start();\n        new Thread(new Task(1, \"orange\", results)).start();\n        new Thread(new Task(2, \"yellow\", results)).start();\n        new Thread(new Task(3, \"green\", results)).start();\n        new Thread(new Task(4, \"blue\", results)).start();\n        new Thread(new Task(5, \"indigo\", results)).start();\n        new Thread(new Task(6, \"violet\", results)).start();\n    }\n}\n\nclass Results {\n    private List&lt;String&gt; results = new ArrayList&lt;String&gt;();\n    private int i = 0;\n\n    public synchronized void submit(int order, String result) {\n        while (results.size() &lt;= order) results.add(null);\n        results.set(order, result);\n        while ((i &lt; results.size()) &amp;&amp; (results.get(i) != null)) {\n            System.out.println(\"result delivered: \" + i + \" \" + results.get(i));\n            ++i;\n        }\n    }\n}\n\n\nclass Task implements Runnable {\n    private final int order;\n    private final String result;\n    private final Results results;\n\n    public Task(int order, String result, Results results) {\n        this.order = order;\n        this.result = result;\n        this.results = results;\n    }\n\n    public void run() {\n        try {\n            Thread.sleep(Math.abs(result.hashCode() % 1000)); // simulate a long-running computation\n        }\n        catch (InterruptedException e) {} // you'd want to think about what to do if interrupted\n        System.out.println(\"task finished: \" + order + \" \" + result);\n        results.submit(order, result);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2127621,"reputation":1565,"user_id":1889310,"accept_rate":0,"display_name":"Diana"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1405598340,"creation_date":1355052875,"answer_id":13787010,"question_id":3741765,"body_markdown":"    public static void main(String[] args) throws InterruptedException{\r\n\t\tMyRunnable r = new MyRunnable();\r\n\t\tThread t1 = new Thread(r,&quot;A&quot;);\r\n\t\tThread t2 = new Thread(r,&quot;B&quot;);\r\n\t\tThread t3 = new Thread(r,&quot;C&quot;);\r\n\t\t\r\n\t\tt1.start();\r\n\t\tThread.sleep(1000);\r\n\t\t\r\n\t\tt2.start();\r\n\t\tThread.sleep(1000);\r\n\t\tt3.start();\r\n\t}","title":"Ordering threads to run in the order they were created/started","body":"<pre><code>public static void main(String[] args) throws InterruptedException{\n    MyRunnable r = new MyRunnable();\n    Thread t1 = new Thread(r,\"A\");\n    Thread t2 = new Thread(r,\"B\");\n    Thread t3 = new Thread(r,\"C\");\n\n    t1.start();\n    Thread.sleep(1000);\n\n    t2.start();\n    Thread.sleep(1000);\n    t3.start();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4228142,"reputation":1,"user_id":7990942,"display_name":"Marek"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1494409914,"creation_date":1494409914,"answer_id":43889005,"question_id":3741765,"body_markdown":"Control of thread execution order may be implemented quite easily with the semaphores. The code attached is based on the ideas presented in Schildt&#39;s book on Java (The complete reference....).\r\n\t// Based on the ideas presented in:\r\n\t// Schildt H.: Java.The.Complete.Reference.9th.Edition.\r\n\r\n\timport java.util.concurrent.Semaphore;\r\n\r\n\tclass Manager {\r\n\t\tint n;\r\n\t// Initially red on semaphores 2&amp;3; green semaphore 1.\r\n\t\tstatic Semaphore SemFirst = new Semaphore(1);\r\n\t\tstatic Semaphore SemSecond = new Semaphore(0);\r\n\t\tstatic Semaphore SemThird = new Semaphore(0);\r\n\r\n\tvoid firstAction () {\r\n\t\ttry {\r\n\t\t\tSemFirst.acquire();\r\n\t\t} catch(InterruptedException e) {\r\n\t\t\tSystem.out.println(&quot;Exception InterruptedException catched&quot;);\r\n\t\t}\r\n\t\tSystem.out.println(&quot;First: &quot; );\r\n\t\tSystem.out.println(&quot;-----&gt; 111&quot;);\r\n\t\tSemSecond.release();\r\n\t}\r\n\tvoid secondAction() {\r\n\t\ttry{\r\n\t\t\tSemSecond.acquire();\r\n\t\t} catch(InterruptedException e) {\r\n\t\t\tSystem.out.println(&quot;Exception InterruptedException catched&quot;);\r\n\t\t}\r\n\t\tSystem.out.println(&quot;Second: &quot;);\r\n\t\tSystem.out.println(&quot;-----&gt; 222&quot;);\r\n\t\tSemThird.release();\r\n\t}\r\n\tvoid thirdAction() {\r\n\t\ttry{\r\n\t\t\tSemThird.acquire();\r\n\t\t} catch(InterruptedException e) {\r\n\t\t\tSystem.out.println(&quot;Exception InterruptedException catched&quot;);\r\n\t\t}\r\n\t\tSystem.out.println(&quot;Third: &quot;);\r\n\t\tSystem.out.println(&quot;-----&gt; 333&quot;);\r\n\t\tSemFirst.release();\r\n\t}\r\n\t}\r\n\r\n\tclass Thread1 implements Runnable {\r\n\t\tManager q;\r\n   \r\n\t\tThread1(Manager q) {\r\n\t\tthis.q = q;\r\n\t\tnew Thread(this, &quot;Thread1&quot;).start();\r\n\t}\r\n  \r\n\tpublic void run() {\r\n\t\tq.firstAction();\r\n\t}\r\n\t}\r\n\r\n\tclass Thread2 implements Runnable {\r\n\t\tManager q;\r\n\r\n\t\tThread2(Manager q) {\r\n\t\tthis.q = q;\r\n\t\tnew Thread(this, &quot;Thread2&quot;).start();\r\n\t}\r\n\r\n\tpublic void run() {\r\n\t\tq.secondAction();\r\n\t}\r\n\t}\r\n\r\n\tclass Thread3 implements Runnable {\r\n\t\tManager q;\r\n\r\n\t\tThread3(Manager q) {\r\n\t\tthis.q = q;\r\n\t\tnew Thread(this, &quot;Thread3&quot;).start();\r\n\t}\r\n\r\n\tpublic void run() {\r\n\t\tq.thirdAction();\r\n\t}\r\n\t}\r\n\r\n\tclass ThreadOrder {\r\n\t\tpublic static void main(String args[]) {\r\n\t\tManager q = new Manager();\r\n\t\tnew Thread3(q);\r\n\t\tnew Thread2(q);\r\n\t\tnew Thread1(q);\r\n\t\t}\r\n\t}\r\n","title":"Ordering threads to run in the order they were created/started","body":"<p>Control of thread execution order may be implemented quite easily with the semaphores. The code attached is based on the ideas presented in Schildt's book on Java (The complete reference....).\n    // Based on the ideas presented in:\n    // Schildt H.: Java.The.Complete.Reference.9th.Edition.</p>\n\n<pre><code>import java.util.concurrent.Semaphore;\n\nclass Manager {\n    int n;\n// Initially red on semaphores 2&amp;3; green semaphore 1.\n    static Semaphore SemFirst = new Semaphore(1);\n    static Semaphore SemSecond = new Semaphore(0);\n    static Semaphore SemThird = new Semaphore(0);\n\nvoid firstAction () {\n    try {\n        SemFirst.acquire();\n    } catch(InterruptedException e) {\n        System.out.println(\"Exception InterruptedException catched\");\n    }\n    System.out.println(\"First: \" );\n    System.out.println(\"-----&gt; 111\");\n    SemSecond.release();\n}\nvoid secondAction() {\n    try{\n        SemSecond.acquire();\n    } catch(InterruptedException e) {\n        System.out.println(\"Exception InterruptedException catched\");\n    }\n    System.out.println(\"Second: \");\n    System.out.println(\"-----&gt; 222\");\n    SemThird.release();\n}\nvoid thirdAction() {\n    try{\n        SemThird.acquire();\n    } catch(InterruptedException e) {\n        System.out.println(\"Exception InterruptedException catched\");\n    }\n    System.out.println(\"Third: \");\n    System.out.println(\"-----&gt; 333\");\n    SemFirst.release();\n}\n}\n\nclass Thread1 implements Runnable {\n    Manager q;\n\n    Thread1(Manager q) {\n    this.q = q;\n    new Thread(this, \"Thread1\").start();\n}\n\npublic void run() {\n    q.firstAction();\n}\n}\n\nclass Thread2 implements Runnable {\n    Manager q;\n\n    Thread2(Manager q) {\n    this.q = q;\n    new Thread(this, \"Thread2\").start();\n}\n\npublic void run() {\n    q.secondAction();\n}\n}\n\nclass Thread3 implements Runnable {\n    Manager q;\n\n    Thread3(Manager q) {\n    this.q = q;\n    new Thread(this, \"Thread3\").start();\n}\n\npublic void run() {\n    q.thirdAction();\n}\n}\n\nclass ThreadOrder {\n    public static void main(String args[]) {\n    Manager q = new Manager();\n    new Thread3(q);\n    new Thread2(q);\n    new Thread1(q);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13684630,"reputation":101,"user_id":9874027,"display_name":"sankar banerjee"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1528042826,"creation_date":1527944581,"answer_id":50657206,"question_id":3741765,"body_markdown":"This can be done **without using synchronized keyword** and with the help of **volatile** keyword. Following is the code.\r\n\r\n    package threadOrderingVolatile;\r\n    \r\n    public class Solution {\r\n    \tstatic volatile int counter = 0;\r\n    \tstatic int print = 1;\r\n    \tstatic char c = &#39;A&#39;;\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\t// TODO Auto-generated method stub\r\n    \t\tThread[] ths = new Thread[4];\r\n    \t\tfor (int i = 0; i &lt; ths.length; i++) {\r\n    \t\t\tths[i] = new Thread(new MyRunnable(i, ths.length));\r\n    \t\t\tths[i].start();\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tstatic class MyRunnable implements Runnable {\r\n    \t\tfinal int thID;\r\n    \t\tfinal int total;\r\n    \r\n    \t\tpublic MyRunnable(int id, int total) {\r\n    \t\t\tthID = id;\r\n    \t\t\tthis.total = total;\r\n    \t\t}\r\n    \r\n    \t\t@Override\r\n    \t\tpublic void run() {\r\n    \t\t\twhile(true) {\r\n    \t\t\t\tif (thID == (counter%total)) {\r\n    \t\t\t\t\tSystem.out.println(&quot;thread &quot; + thID + &quot; prints &quot; + c);\r\n    \t\t\t\t\tif(c==&#39;Z&#39;){\r\n    \t\t\t\t\t\tc=&#39;A&#39;;\r\n    \t\t\t\t\t}else{\r\n    \t\t\t\t\t\tc=(char)((int)c+1);\r\n    \t\t\t\t\t}\r\n    \t\t\t\t\tSystem.out.println(&quot;thread &quot; + thID + &quot; prints &quot; + print++);\r\n    \t\t\t\t\tcounter++;\t\t\t\t\t\r\n    \t\t\t\t} else {\r\n    \t\t\t\t\ttry {\r\n    \t\t\t\t\t\tThread.sleep(30);\r\n    \t\t\t\t\t} catch (InterruptedException e) {\r\n    \t\t\t\t\t\t// log it\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t}\r\n    \r\n    \t}\r\n    \r\n    }\r\n\r\nFollowing is the github link which has a readme, that gives detailed explanation about how it happens.\r\nhttps://github.com/sankar4git/volatile_thread_ordering\r\n","title":"Ordering threads to run in the order they were created/started","body":"<p>This can be done <strong>without using synchronized keyword</strong> and with the help of <strong>volatile</strong> keyword. Following is the code.</p>\n\n<pre><code>package threadOrderingVolatile;\n\npublic class Solution {\n    static volatile int counter = 0;\n    static int print = 1;\n    static char c = 'A';\n\n    public static void main(String[] args) {\n        // TODO Auto-generated method stub\n        Thread[] ths = new Thread[4];\n        for (int i = 0; i &lt; ths.length; i++) {\n            ths[i] = new Thread(new MyRunnable(i, ths.length));\n            ths[i].start();\n        }\n    }\n\n    static class MyRunnable implements Runnable {\n        final int thID;\n        final int total;\n\n        public MyRunnable(int id, int total) {\n            thID = id;\n            this.total = total;\n        }\n\n        @Override\n        public void run() {\n            while(true) {\n                if (thID == (counter%total)) {\n                    System.out.println(\"thread \" + thID + \" prints \" + c);\n                    if(c=='Z'){\n                        c='A';\n                    }else{\n                        c=(char)((int)c+1);\n                    }\n                    System.out.println(\"thread \" + thID + \" prints \" + print++);\n                    counter++;                  \n                } else {\n                    try {\n                        Thread.sleep(30);\n                    } catch (InterruptedException e) {\n                        // log it\n                    }\n                }\n            }\n        }\n\n    }\n\n}\n</code></pre>\n\n<p>Following is the github link which has a readme, that gives detailed explanation about how it happens.\n<a href=\"https://github.com/sankar4git/volatile_thread_ordering\" rel=\"nofollow noreferrer\">https://github.com/sankar4git/volatile_thread_ordering</a></p>\n"},{"tags":[],"owner":{"account_id":1972029,"reputation":4738,"user_id":1770724,"accept_rate":43,"display_name":"quickbug"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681100535,"creation_date":1681099689,"answer_id":75974206,"question_id":3741765,"body_markdown":"In case someone needs, this is my take at this problem in Python. My approach is to use a deque. Each instance of the class places itself on the queue, does the working task right at construction, then waits for the previous member of the queue to terminate its output to do his. The trick is that each instance has two locks (aka semaphores) to control printing. One which is copied from the last instance entered in the queue: I wil wait for this lock to print. Another one that is created and locked at construction. The next instance to enter the queue will copy that one and will have to wait for me to release it, which I will do after my printing is done.\r\n\r\n    import random\r\n    from functools import \\\r\n        partial  # an object made of a function ready to call with prefilled arguments\r\n    import threading, time\r\n    from collections import deque\r\n    \r\n    printing_lock = threading.Lock()  # for debuging: avoid threads printing debug infos in the middle of each other\r\n    \r\n    \r\n    class WorkNowPrintLater:\r\n        def __init__(self, id: int, work_func: partial, print_func: partial, my_queue: deque, queue_lock: threading.Lock):\r\n            &quot;&quot;&quot;\r\n            Create an instance of this class does the whole thing:\r\n                1/ do some job immediately\r\n                2/ do some other job (usually an output) in the same order as instances were created\r\n            :param id:\r\n                id of this instance. for debug purpose only\r\n            :param work_func:\r\n                the working function.\r\n                Note for non python users: a partial is an object made of a function with its arguments\r\n                already in place, ready to launch\r\n            :param print_func:\r\n                the output function\r\n            :param my_queue:\r\n                a double-end-queue (deque) where each instance of WorkNowPrintLater will put itself on construction\r\n                Must be the same for all instances to synchronize\r\n            :param queue_lock:\r\n                a semaphore to protect access to the queue\r\n                Must be the same for all instances to synchronize\r\n            &quot;&quot;&quot;\r\n            with printing_lock:\r\n                print(f&quot;{id} being created&quot;)\r\n            self.id = id\r\n            self.work_func = work_func\r\n            self.print_func = print_func\r\n            self.my_queue = my_queue\r\n            self.queue_lock = queue_lock\r\n            self.done = False\r\n            self.lock_i_wait_before_i_printing = threading.Lock() if len(my_queue) == 0 else my_queue[\r\n                -1].lock_you_wait_before_you_print\r\n            self.lock_you_wait_before_you_print = threading.Lock()\r\n            self.lock_you_wait_before_you_print.acquire()  # Block access to printer to the next element in the queue until I&#39;m done\r\n    \r\n            with printing_lock:\r\n                print(f&quot;{self.id} waits for queue lock to put myself in&quot;)\r\n            with self.queue_lock:\r\n                self.my_queue.append(self)\r\n    \r\n            my_worker = threading.Thread(target=self.worker)\r\n            my_worker.start()\r\n            print(f&quot;{id} is alive&quot;)\r\n    \r\n        def worker(self):\r\n            with printing_lock:\r\n                print(f&quot;{self.id} working starts&quot;)\r\n            self.work_func()\r\n    \r\n            with printing_lock:\r\n                print(f&quot;{self.id} working done. wait for printer&quot;)\r\n            with self.lock_i_wait_before_i_printing:\r\n                self.print_func()\r\n                self.lock_you_wait_before_you_print.release()\r\n                self.done = True\r\n    \r\n            with printing_lock:\r\n                print(f&quot;{self.id} waits for queue lock to do housekeeping&quot;)\r\n            with self.queue_lock:\r\n                with printing_lock:\r\n                    print(f&quot;{self.id} housekeeping starts&quot;)\r\n                if len(self.my_queue) &lt;= 1:\r\n                    return\r\n                while self.my_queue[0].done and len(self.my_queue) &gt;= 2:\r\n                    _ = self.my_queue.popleft()\r\n    \r\n\r\n     &quot;&quot;&quot; MAIN PROGRAM &quot;&quot;&quot;\r\n\r\n\r\n    threads_queue = deque()\r\n    semaphore = threading.Lock()\r\n    \r\n    \r\n    def wait(id):\r\n        t = random.random() * 10\r\n        print(f&quot;{id} is working for {t} seconds&quot;)\r\n        time.sleep(t)\r\n    \r\n    \r\n    def output(id):\r\n        print(f&quot;output {id}&quot;)\r\n    \r\n    \r\n    for i in range(5):\r\n        _ = WorkNowPrintLater(i, partial(wait, i), partial(output, i), threads_queue, semaphore)\r\n\r\n","title":"Ordering threads to run in the order they were created/started","body":"<p>In case someone needs, this is my take at this problem in Python. My approach is to use a deque. Each instance of the class places itself on the queue, does the working task right at construction, then waits for the previous member of the queue to terminate its output to do his. The trick is that each instance has two locks (aka semaphores) to control printing. One which is copied from the last instance entered in the queue: I wil wait for this lock to print. Another one that is created and locked at construction. The next instance to enter the queue will copy that one and will have to wait for me to release it, which I will do after my printing is done.</p>\n<pre><code>import random\nfrom functools import \\\n    partial  # an object made of a function ready to call with prefilled arguments\nimport threading, time\nfrom collections import deque\n\nprinting_lock = threading.Lock()  # for debuging: avoid threads printing debug infos in the middle of each other\n\n\nclass WorkNowPrintLater:\n    def __init__(self, id: int, work_func: partial, print_func: partial, my_queue: deque, queue_lock: threading.Lock):\n        &quot;&quot;&quot;\n        Create an instance of this class does the whole thing:\n            1/ do some job immediately\n            2/ do some other job (usually an output) in the same order as instances were created\n        :param id:\n            id of this instance. for debug purpose only\n        :param work_func:\n            the working function.\n            Note for non python users: a partial is an object made of a function with its arguments\n            already in place, ready to launch\n        :param print_func:\n            the output function\n        :param my_queue:\n            a double-end-queue (deque) where each instance of WorkNowPrintLater will put itself on construction\n            Must be the same for all instances to synchronize\n        :param queue_lock:\n            a semaphore to protect access to the queue\n            Must be the same for all instances to synchronize\n        &quot;&quot;&quot;\n        with printing_lock:\n            print(f&quot;{id} being created&quot;)\n        self.id = id\n        self.work_func = work_func\n        self.print_func = print_func\n        self.my_queue = my_queue\n        self.queue_lock = queue_lock\n        self.done = False\n        self.lock_i_wait_before_i_printing = threading.Lock() if len(my_queue) == 0 else my_queue[\n            -1].lock_you_wait_before_you_print\n        self.lock_you_wait_before_you_print = threading.Lock()\n        self.lock_you_wait_before_you_print.acquire()  # Block access to printer to the next element in the queue until I'm done\n\n        with printing_lock:\n            print(f&quot;{self.id} waits for queue lock to put myself in&quot;)\n        with self.queue_lock:\n            self.my_queue.append(self)\n\n        my_worker = threading.Thread(target=self.worker)\n        my_worker.start()\n        print(f&quot;{id} is alive&quot;)\n\n    def worker(self):\n        with printing_lock:\n            print(f&quot;{self.id} working starts&quot;)\n        self.work_func()\n\n        with printing_lock:\n            print(f&quot;{self.id} working done. wait for printer&quot;)\n        with self.lock_i_wait_before_i_printing:\n            self.print_func()\n            self.lock_you_wait_before_you_print.release()\n            self.done = True\n\n        with printing_lock:\n            print(f&quot;{self.id} waits for queue lock to do housekeeping&quot;)\n        with self.queue_lock:\n            with printing_lock:\n                print(f&quot;{self.id} housekeeping starts&quot;)\n            if len(self.my_queue) &lt;= 1:\n                return\n            while self.my_queue[0].done and len(self.my_queue) &gt;= 2:\n                _ = self.my_queue.popleft()\n\n\n &quot;&quot;&quot; MAIN PROGRAM &quot;&quot;&quot;\n\n\nthreads_queue = deque()\nsemaphore = threading.Lock()\n\n\ndef wait(id):\n    t = random.random() * 10\n    print(f&quot;{id} is working for {t} seconds&quot;)\n    time.sleep(t)\n\n\ndef output(id):\n    print(f&quot;output {id}&quot;)\n\n\nfor i in range(5):\n    _ = WorkNowPrintLater(i, partial(wait, i), partial(output, i), threads_queue, semaphore)\n</code></pre>\n"}],"owner":{"account_id":124725,"reputation":2291,"user_id":320007,"accept_rate":70,"display_name":"keshav84"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37157,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"accepted_answer_id":3742031,"answer_count":11,"score":12,"last_activity_date":1681100535,"creation_date":1284814517,"question_id":3741765,"body_markdown":"How can i order threads in the order they were instantiated.e.g. how can i make the below program print the numbers 1...10 in order.\r\n\r\n    public class ThreadOrdering {\r\n    \tpublic static void main(String[] args) {\r\n    \t\t\r\n    \t\tclass MyRunnable implements Runnable{\r\n    \t\t\tprivate final int threadnumber;\r\n    \r\n    \t\t\tMyRunnable(int threadnumber){\r\n    \t\t\t\tthis.threadnumber = threadnumber;\r\n    \t\t\t}\r\n    \t\t\t\r\n    \t\t\tpublic void run() {\r\n    \t\t\t\tSystem.out.println(threadnumber);\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\t\r\n    \t\tfor(int i=1; i&lt;=10; i++){\r\n    \t\t\tnew Thread(new MyRunnable(i)).start();\r\n    \t\t}\r\n    \t}\r\n    }","title":"Ordering threads to run in the order they were created/started","body":"<p>How can i order threads in the order they were instantiated.e.g. how can i make the below program print the numbers 1...10 in order.</p>\n\n<pre><code>public class ThreadOrdering {\n    public static void main(String[] args) {\n\n        class MyRunnable implements Runnable{\n            private final int threadnumber;\n\n            MyRunnable(int threadnumber){\n                this.threadnumber = threadnumber;\n            }\n\n            public void run() {\n                System.out.println(threadnumber);\n            }\n        }\n\n        for(int i=1; i&lt;=10; i++){\n            new Thread(new MyRunnable(i)).start();\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":20582528,"reputation":71,"user_id":15108250,"display_name":"Nemo9703"},"score":2,"creation_date":1681094010,"post_id":75973923,"comment_id":133998235,"body_markdown":"You&#39;re splitting the array into parts which are all of type ```String```. To convert this to an int, you need the ```Integer.parseInt()``` method.","body":"You&#39;re splitting the array into parts which are all of type <code>String</code>. To convert this to an int, you need the <code>Integer.parseInt()</code> method."},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1681094022,"post_id":75973923,"comment_id":133998237,"body_markdown":"I might be tempted to use a `Scanner`","body":"I might be tempted to use a <code>Scanner</code>"},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1681103935,"post_id":75973923,"comment_id":133998977,"body_markdown":"Search Stack Overflow before posting.","body":"Search Stack Overflow before posting."}],"answers":[{"comments":[{"owner":{"account_id":28261252,"reputation":9,"user_id":21605921,"display_name":"Jah"},"score":0,"creation_date":1681094412,"post_id":75973935,"comment_id":133998280,"body_markdown":"I appreciate the feedback! I&#39;m new to java/coding in general so I&#39;ll definitely look into ways to avoid parallel arrays","body":"I appreciate the feedback! I&#39;m new to java/coding in general so I&#39;ll definitely look into ways to avoid parallel arrays"},{"owner":{"account_id":20780824,"reputation":29149,"user_id":15261315,"display_name":"Chris"},"score":0,"creation_date":1681094457,"post_id":75973935,"comment_id":133998283,"body_markdown":"You can say thank you on SO by marking as &quot;accepted&quot; whichever answer you feel has best answered your question. And glad I could help.","body":"You can say thank you on SO by marking as &quot;accepted&quot; whichever answer you feel has best answered your question. And glad I could help."},{"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"score":0,"creation_date":1681162477,"post_id":75973935,"comment_id":134009368,"body_markdown":"@Chris There are nearly two million questions tagged [java] on SO. Any basic question on Java, including this one, has almost certainly been asked and answered already. Check for duplicates before answering any basic question.","body":"@Chris There are nearly two million questions tagged [java] on SO. Any basic question on Java, including this one, has almost certainly been asked and answered already. Check for duplicates before answering any basic question."}],"tags":[],"owner":{"account_id":20780824,"reputation":29149,"user_id":15261315,"display_name":"Chris"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1681094012,"creation_date":1681094012,"answer_id":75973935,"question_id":75973923,"body_markdown":"You have to explicitly convert from `String` to `int`. Java will not do this for you automatically.\r\n\r\n```\r\nnumfields[0] = Integer.parseInt(fields[2]);\r\n// and so on...\r\n```\r\n\r\nPresumably this line of data pertains to a single &quot;thing&quot; in whatever problem you&#39;re working on. Parallel arrays area bad habit to get into. Rather you want one array/list/whatever composed of objects which hold all of the data pertaining to a single &quot;thing.&quot;","title":"How to convert string to int in array","body":"<p>You have to explicitly convert from <code>String</code> to <code>int</code>. Java will not do this for you automatically.</p>\n<pre><code>numfields[0] = Integer.parseInt(fields[2]);\n// and so on...\n</code></pre>\n<p>Presumably this line of data pertains to a single &quot;thing&quot; in whatever problem you're working on. Parallel arrays area bad habit to get into. Rather you want one array/list/whatever composed of objects which hold all of the data pertaining to a single &quot;thing.&quot;</p>\n"},{"tags":[],"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681094289,"creation_date":1681094289,"answer_id":75973950,"question_id":75973923,"body_markdown":"Personally, I might be tempted to make use of another `Scanner` to parse the line, for example...\r\n\r\n    String line = &quot;Barrett Edan 70 45 59&quot;;\r\n    Scanner scanner = new Scanner(line);\r\n    String firstName = scanner.next();\r\n    String lastName = scanner.next();\r\n    while (scanner.hasNextInt()) {\r\n        System.out.println(scanner.nextInt());\r\n    }\r\n\r\nNow, you &quot;could&quot; make use of the `reader` to do this directly, but I&#39;d find it easier to use a seperate `Scanner`, but that&#39;s me","title":"How to convert string to int in array","body":"<p>Personally, I might be tempted to make use of another <code>Scanner</code> to parse the line, for example...</p>\n<pre><code>String line = &quot;Barrett Edan 70 45 59&quot;;\nScanner scanner = new Scanner(line);\nString firstName = scanner.next();\nString lastName = scanner.next();\nwhile (scanner.hasNextInt()) {\n    System.out.println(scanner.nextInt());\n}\n</code></pre>\n<p>Now, you &quot;could&quot; make use of the <code>reader</code> to do this directly, but I'd find it easier to use a seperate <code>Scanner</code>, but that's me</p>\n"},{"comments":[{"owner":{"account_id":20780824,"reputation":29149,"user_id":15261315,"display_name":"Chris"},"score":0,"creation_date":1681100198,"post_id":75974127,"comment_id":133998690,"body_markdown":"The helper method is not necessarily a great way to do things. If the value can be parsed as an int, you&#39;ll have to do the work of parsing the value _twice_. Better to just call `Integer.parseInt` once and handle the exception.","body":"The helper method is not necessarily a great way to do things. If the value can be parsed as an int, you&#39;ll have to do the work of parsing the value <i>twice</i>. Better to just call <code>Integer.parseInt</code> once and handle the exception."}],"tags":[],"owner":{"account_id":8762570,"reputation":1,"user_id":6552124,"display_name":"Manish Vishwakarma"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681099831,"creation_date":1681098029,"answer_id":75974127,"question_id":75973923,"body_markdown":"You should first check that array element is integer or not then convert element from string to int using **Integer.parseInt(String s)** method. \r\n\r\nOne example of your code:\r\n\r\n    if (isInteger(fields[2])) {\r\n\t    numfields[0] = Integer.parseInt(fields[2]);\r\n\t}\r\n## helper method\r\n\r\n```java\r\npublic static boolean isInteger(String s) {\r\n    try {\r\n        Integer.parseInt(s);\r\n    } catch (NumberFormatException nfe) {\r\n        // if provided string is not an integer\r\n\t  return false;\r\n    }\r\n\t // if provided string is an integer\r\n\t return true;\r\n}\r\n```","title":"How to convert string to int in array","body":"<p>You should first check that array element is integer or not then convert element from string to int using <strong>Integer.parseInt(String s)</strong> method.</p>\n<p>One example of your code:</p>\n<pre><code>if (isInteger(fields[2])) {\n    numfields[0] = Integer.parseInt(fields[2]);\n}\n</code></pre>\n<h2>helper method</h2>\n<pre class=\"lang-java prettyprint-override\"><code>public static boolean isInteger(String s) {\n    try {\n        Integer.parseInt(s);\n    } catch (NumberFormatException nfe) {\n        // if provided string is not an integer\n      return false;\n    }\n     // if provided string is an integer\n     return true;\n}\n</code></pre>\n"}],"owner":{"account_id":28261252,"reputation":9,"user_id":21605921,"display_name":"Jah"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":68,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1681103927,"accepted_answer_id":75973935,"answer_count":3,"score":-2,"last_activity_date":1681099831,"creation_date":1681093834,"question_id":75973923,"body_markdown":"Im trying to read a line of file that has words and numbers in it and save it into a array\r\n\r\nThe file reads:\r\n\r\nBarrett    Edan    70  45  59\r\n\r\n\r\nPart of the code that has a problem:\r\n\r\n    ** let it be known that field was declared as a string array earlier in the code**\r\n    String [] fields = new String[100];\r\n    int [] numfields = new int[100];\r\n\r\n    while (reader.hasNext()) {     //while reader reads a line\r\n      line = reader.nextLine();  //line reads reach line of file\r\n      fields = line.split(&quot;\\t&quot;);  //splits line by tab space and saves it into fields\r\n      \r\n      last[count] = fields[0];   // saves first word to first element of array\r\n      first[count] = fields[1]; //saves second word to second element\r\n      numfields[0] = fields[2]; /* THE PROBLEM: now i expected the 3rd word (70) of fields to be able to save into numfields array , but thats when i get cannot be converted to int error\r\n      numfields[1] = fields[3];\r\n      numfields[2] = fields[4];    */\r\n   ","title":"How to convert string to int in array","body":"<p>Im trying to read a line of file that has words and numbers in it and save it into a array</p>\n<p>The file reads:</p>\n<p>Barrett    Edan    70  45  59</p>\n<p>Part of the code that has a problem:</p>\n<pre><code>** let it be known that field was declared as a string array earlier in the code**\nString [] fields = new String[100];\nint [] numfields = new int[100];\n\nwhile (reader.hasNext()) {     //while reader reads a line\n  line = reader.nextLine();  //line reads reach line of file\n  fields = line.split(&quot;\\t&quot;);  //splits line by tab space and saves it into fields\n  \n  last[count] = fields[0];   // saves first word to first element of array\n  first[count] = fields[1]; //saves second word to second element\n  numfields[0] = fields[2]; /* THE PROBLEM: now i expected the 3rd word (70) of fields to be able to save into numfields array , but thats when i get cannot be converted to int error\n  numfields[1] = fields[3];\n  numfields[2] = fields[4];    */\n</code></pre>\n"},{"tags":["java","selenium-webdriver","stream"],"answers":[{"tags":[],"owner":{"account_id":2772450,"reputation":22416,"user_id":2386774,"display_name":"JeffC"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681084600,"creation_date":1681084600,"answer_id":75973475,"question_id":75971402,"body_markdown":"You can use `WebDriverWait` to fetch all of your elements from the start rather than waiting for the element somewhere inside the `stream`.\r\n\r\n    List&lt;String&gt; elementTexts = wait\r\n                                .until(ExpectedConditions.visibilityOfAllElementsLocatedBy(By.xpath(&quot;...&quot;)))\r\n                                .stream()\r\n                                .map(WebElement::getText)\r\n                                .map(String::trim)\r\n                                .collect(Collectors.toList());\r\n\r\n`wait.until()` will return values based on what `ExpectedCondition` is used. For example,\r\n\r\n|Return|ExpectedCondition|\r\n|---|---|\r\n|List\\&lt;WebElement\\&gt;|wait.until(ExpectedConditions.visibilityOfAllElementsLocatedBy(...))|\r\n|WebElement|wait.until(ExpectedConditions.visibilityOfElementLocated(...))|\r\n|Alert|wait.until(ExpectedConditions.alertIsPresent())|","title":"Java Selenium - how to add wait for element in stream?","body":"<p>You can use <code>WebDriverWait</code> to fetch all of your elements from the start rather than waiting for the element somewhere inside the <code>stream</code>.</p>\n<pre><code>List&lt;String&gt; elementTexts = wait\n                            .until(ExpectedConditions.visibilityOfAllElementsLocatedBy(By.xpath(&quot;...&quot;)))\n                            .stream()\n                            .map(WebElement::getText)\n                            .map(String::trim)\n                            .collect(Collectors.toList());\n</code></pre>\n<p><code>wait.until()</code> will return values based on what <code>ExpectedCondition</code> is used. For example,</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>Return</th>\n<th>ExpectedCondition</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>List&lt;WebElement&gt;</td>\n<td>wait.until(ExpectedConditions.visibilityOfAllElementsLocatedBy(...))</td>\n</tr>\n<tr>\n<td>WebElement</td>\n<td>wait.until(ExpectedConditions.visibilityOfElementLocated(...))</td>\n</tr>\n<tr>\n<td>Alert</td>\n<td>wait.until(ExpectedConditions.alertIsPresent())</td>\n</tr>\n</tbody>\n</table>\n</div>"}],"owner":{"account_id":13200788,"reputation":21,"user_id":21689286,"display_name":"javabeginer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":99,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681098896,"creation_date":1681054390,"question_id":75971402,"body_markdown":"can you tell me how to add explicit wait time for webelement in a stream of webelements ?\r\n\r\n```\r\ndriver.findElements(By.xpath(&quot;thisIsXpath&quot;))\r\n.stream()\r\n.map(WebElement::getText)\r\n.map(String::trim)\r\n.collect(Collectors.toList());\r\n```\r\n","title":"Java Selenium - how to add wait for element in stream?","body":"<p>can you tell me how to add explicit wait time for webelement in a stream of webelements ?</p>\n<pre><code>driver.findElements(By.xpath(&quot;thisIsXpath&quot;))\n.stream()\n.map(WebElement::getText)\n.map(String::trim)\n.collect(Collectors.toList());\n</code></pre>\n"},{"tags":["java","arrays","json","android-studio","android-volley"],"answers":[{"tags":[],"owner":{"account_id":15361500,"reputation":281,"user_id":11082213,"display_name":"Nrohpos"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681096435,"creation_date":1681096435,"answer_id":75974059,"question_id":74911826,"body_markdown":"Basically you want to convert your json to your java object model.\r\n\r\n**First** , you need a mapping lib for your case\r\nIt the best so far with [Gson][1]\r\n\r\n**Second** , you need to create a model of your need.\r\n\r\nI personally use this for [java class][2]\r\n\r\nAfter all that 2 setup all you have to do convert\r\n\r\n     Gson gson = new Gson();\r\n     String json = gson.toJson(anything); // serializes target to Json\r\n     YourClass your class = gson.fromJson(json, YourClass.class); // \r\n\r\n\r\nYou don&#39;t have to call loop for i either for each , while you can map your while object itself.\r\n\r\n  [1]: https://github.com/google/gson\r\n  [2]: https://www.jsonschema2pojo.org/","title":"How to parse complex data from Json via volley library in android studio?","body":"<p>Basically you want to convert your json to your java object model.</p>\n<p><strong>First</strong> , you need a mapping lib for your case\nIt the best so far with <a href=\"https://github.com/google/gson\" rel=\"nofollow noreferrer\">Gson</a></p>\n<p><strong>Second</strong> , you need to create a model of your need.</p>\n<p>I personally use this for <a href=\"https://www.jsonschema2pojo.org/\" rel=\"nofollow noreferrer\">java class</a></p>\n<p>After all that 2 setup all you have to do convert</p>\n<pre><code> Gson gson = new Gson();\n String json = gson.toJson(anything); // serializes target to Json\n YourClass your class = gson.fromJson(json, YourClass.class); // \n</code></pre>\n<p>You don't have to call loop for i either for each , while you can map your while object itself.</p>\n"}],"owner":{"account_id":27347263,"reputation":11,"user_id":20856968,"display_name":"Sahil Sharma"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1681096435,"creation_date":1671949754,"question_id":74911826,"body_markdown":"I want to fetch data from api through volley library. \r\n\r\n\r\nI am retrieving a JSON Object And Json Arrray via the Volley class in Android .I know how to get request but I am really struggling to parse this giant nested json .\r\n\r\nI want to get [synonyms ](https://api.dictionaryapi.dev/api/v2/entries/en/bad)And antonyms From the list\r\n\r\nI want to get data from **Synonmys Array** and **antonyms** **array**....... Here is the link to api . [Link](https://api.dictionaryapi.dev/api/v2/entries/en/bad)\r\n\r\nor Image Of Json Api - [enter image description here](https://i.stack.imgur.com/NYbNZ.png)\r\n\r\n\r\n\r\n\r\nMy Main Activity\r\n\r\n\r\n\r\n```\r\n  JsonArrayRequest jsonArrayRequest = new JsonArrayRequest(Request.Method.GET, JSON_URL, null, new Response.Listener&lt;JSONArray&gt;() {\r\n        @Override\r\n        public void onResponse(JSONArray response) {\r\n            for (int i = 0; i &lt; response.length(); i++) {\r\n                // creating a new json object and\r\n                // getting each object from our json array.\r\n                try {\r\n                    // we are getting each json object.\r\n                    JSONObject responseObj = response.getJSONObject(i);\r\n\r\n                    String word = responseObj.getString(&quot;word&quot;);\r\n                    String phonetic = responseObj.getString(&quot;phonetic&quot;);\r\n\r\n                    JSONArray jsonArray = responseObj.getJSONArray(&quot;meaning&quot;);\r\n                    for (int k = 0; k &lt; response.length(); k++) {\r\n\r\n                      ?? what to do here ????????\r\n\r\n------------------------need help here-------------------------------\r\n\r\n\r\n                    }\r\n\r\n                    synonymsList.add(new synonymsModel(word,phonetic, synonyms,antonyms));\r\n                    buildRecyclerView();\r\n                } catch (JSONException e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n        }\r\n    }, new Response.ErrorListener() {\r\n        @Override\r\n        public void onErrorResponse(VolleyError error) {\r\n            Toast.makeText(getApplicationContext(), error.getMessage(), Toast.LENGTH_LONG).show();\r\n        }\r\n    });\r\n    queue.add(jsonArrayRequest);\r\n}\r\n```\r\nModel class\r\n\r\n\r\n```\r\n\r\npublic class synonymsModel {\r\n\r\n  String word, phonetic , antonyms, synonyms;\r\n\r\n    public synonymsModel(String word, String phonetic, String antonyms, String synonyms) {\r\n        this.word = word;\r\n        this.phonetic = phonetic;\r\n        this.antonyms = antonyms;\r\n        this.synonyms = synonyms;\r\n    }\r\n\r\n    public String getWord() {\r\n        return word;\r\n    }\r\n\r\n    public void setWord(String word) {\r\n        this.word = word;\r\n    }\r\n\r\n    public String getPhonetic() {\r\n        return phonetic;\r\n    }\r\n\r\n    public void setPhonetic(String phonetic) {\r\n        this.phonetic = phonetic;\r\n    }\r\n\r\n    public String getAntonyms() {\r\n        return antonyms;\r\n    }\r\n\r\n    public void setAntonyms(String antonyms) {\r\n        this.antonyms = antonyms;\r\n    }\r\n\r\n    public String getSynonyms() {\r\n        return synonyms;\r\n    }\r\n\r\n    public void setSynonyms(String synonyms) {\r\n        this.synonyms = synonyms;\r\n    }\r\n}\r\n\r\n\r\n```\r\n\r\n\r\n\r\n\r\n","title":"How to parse complex data from Json via volley library in android studio?","body":"<p>I want to fetch data from api through volley library.</p>\n<p>I am retrieving a JSON Object And Json Arrray via the Volley class in Android .I know how to get request but I am really struggling to parse this giant nested json .</p>\n<p>I want to get <a href=\"https://api.dictionaryapi.dev/api/v2/entries/en/bad\" rel=\"nofollow noreferrer\">synonyms </a>And antonyms From the list</p>\n<p>I want to get data from <strong>Synonmys Array</strong> and <strong>antonyms</strong> <strong>array</strong>....... Here is the link to api . <a href=\"https://api.dictionaryapi.dev/api/v2/entries/en/bad\" rel=\"nofollow noreferrer\">Link</a></p>\n<p>or Image Of Json Api - <a href=\"https://i.stack.imgur.com/NYbNZ.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>My Main Activity</p>\n<pre><code>  JsonArrayRequest jsonArrayRequest = new JsonArrayRequest(Request.Method.GET, JSON_URL, null, new Response.Listener&lt;JSONArray&gt;() {\n        @Override\n        public void onResponse(JSONArray response) {\n            for (int i = 0; i &lt; response.length(); i++) {\n                // creating a new json object and\n                // getting each object from our json array.\n                try {\n                    // we are getting each json object.\n                    JSONObject responseObj = response.getJSONObject(i);\n\n                    String word = responseObj.getString(&quot;word&quot;);\n                    String phonetic = responseObj.getString(&quot;phonetic&quot;);\n\n                    JSONArray jsonArray = responseObj.getJSONArray(&quot;meaning&quot;);\n                    for (int k = 0; k &lt; response.length(); k++) {\n\n                      ?? what to do here ????????\n\n------------------------need help here-------------------------------\n\n\n                    }\n\n                    synonymsList.add(new synonymsModel(word,phonetic, synonyms,antonyms));\n                    buildRecyclerView();\n                } catch (JSONException e) {\n                    e.printStackTrace();\n                }\n            }\n        }\n    }, new Response.ErrorListener() {\n        @Override\n        public void onErrorResponse(VolleyError error) {\n            Toast.makeText(getApplicationContext(), error.getMessage(), Toast.LENGTH_LONG).show();\n        }\n    });\n    queue.add(jsonArrayRequest);\n}\n</code></pre>\n<p>Model class</p>\n<pre><code>\npublic class synonymsModel {\n\n  String word, phonetic , antonyms, synonyms;\n\n    public synonymsModel(String word, String phonetic, String antonyms, String synonyms) {\n        this.word = word;\n        this.phonetic = phonetic;\n        this.antonyms = antonyms;\n        this.synonyms = synonyms;\n    }\n\n    public String getWord() {\n        return word;\n    }\n\n    public void setWord(String word) {\n        this.word = word;\n    }\n\n    public String getPhonetic() {\n        return phonetic;\n    }\n\n    public void setPhonetic(String phonetic) {\n        this.phonetic = phonetic;\n    }\n\n    public String getAntonyms() {\n        return antonyms;\n    }\n\n    public void setAntonyms(String antonyms) {\n        this.antonyms = antonyms;\n    }\n\n    public String getSynonyms() {\n        return synonyms;\n    }\n\n    public void setSynonyms(String synonyms) {\n        this.synonyms = synonyms;\n    }\n}\n\n\n</code></pre>\n"},{"tags":["java","jpa","criteria-api"],"comments":[{"owner":{"account_id":8324875,"reputation":11755,"user_id":6413377,"accept_rate":25,"display_name":"pirho"},"score":0,"creation_date":1513606529,"post_id":47830390,"comment_id":82705641,"body_markdown":"Is it possible to see your entities? `@OneToOne`? Also 3-4 rows what you expect as a result? Is it like  `true, 1: false, 2; false,3, true:4`","body":"Is it possible to see your entities? <code>@OneToOne</code>? Also 3-4 rows what you expect as a result? Is it like  <code>true, 1: false, 2; false,3, true:4</code>"},{"owner":{"account_id":8324875,"reputation":11755,"user_id":6413377,"accept_rate":25,"display_name":"pirho"},"score":0,"creation_date":1513614905,"post_id":47830390,"comment_id":82710670,"body_markdown":"And for the stretch goal&#39;s `GROUP BY` : have  _an aggregate_  or what to group on ?","body":"And for the stretch goal&#39;s <code>GROUP BY</code> : have  <i>an aggregate</i>  or what to group on ?"},{"owner":{"account_id":8324875,"reputation":11755,"user_id":6413377,"accept_rate":25,"display_name":"pirho"},"score":0,"creation_date":1513768698,"post_id":47830390,"comment_id":82776237,"body_markdown":"Updated my answer. Can you check yet this `GROUP BY ticket.ticket_id IS NOT NULL`?","body":"Updated my answer. Can you check yet this <code>GROUP BY ticket.ticket_id IS NOT NULL</code>?"},{"owner":{"display_name":"user8558216"},"score":0,"creation_date":1515582410,"post_id":47830390,"comment_id":83351732,"body_markdown":"Your second approach description is wrong. `isNotNull` returns a `Predicate&lt;Boolean&gt;`, which indeed is an `Expression&lt;Boolean&gt;` and also extending `Selection&lt;Boolean&gt;`. The problem is the Boolean generic type clashing with whatever the CriteriaQuery generic type is defined as. Perhaps if you&#39;d posted the rest of your query construction then it would be a more complete definition ...","body":"Your second approach description is wrong. <code>isNotNull</code> returns a <code>Predicate&lt;Boolean&gt;</code>, which indeed is an <code>Expression&lt;Boolean&gt;</code> and also extending <code>Selection&lt;Boolean&gt;</code>. The problem is the Boolean generic type clashing with whatever the CriteriaQuery generic type is defined as. Perhaps if you&#39;d posted the rest of your query construction then it would be a more complete definition ..."}],"answers":[{"comments":[{"owner":{"account_id":3402939,"reputation":6414,"user_id":2854723,"accept_rate":73,"display_name":"thomas.mc.work"},"score":0,"creation_date":1513954810,"post_id":47871193,"comment_id":82856521,"body_markdown":"That&#39;s what i did in my second approach which failed.","body":"That&#39;s what i did in my second approach which failed."}],"tags":[],"owner":{"account_id":341811,"reputation":853,"user_id":672632,"accept_rate":88,"display_name":"Faton"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1513609575,"creation_date":1513609575,"answer_id":47871193,"question_id":47830390,"body_markdown":"You can use the following example below to generate the *is not null* in the select expression:\r\n\r\n    CriteriaQuery&lt;Tuple&gt; cq = entityManager.getCriteriaBuilder().createTupleQuery();\r\n    Root&lt;Test&gt; pet = cq.from(Test.class);\r\n    cq.multiselect(pet.get(&quot;id1&quot;).isNotNull(), pet.get(&quot;id2&quot;));\r\n\r\nI think that the generated query will throw a query syntax exception as it might not be supported by jpa/hibernate to have the *is not null* in the select expression. If this is the case then maybe one possible solution would be to place the *is not null* in the where clause. You can find examples here for that case https://docs.oracle.com/cd/E19798-01/821-1841/gjitv/index.html\r\n","title":"Criteria API: Select Expression IF [NOT] NULL &lt;value&gt;","body":"<p>You can use the following example below to generate the <em>is not null</em> in the select expression:</p>\n\n<pre><code>CriteriaQuery&lt;Tuple&gt; cq = entityManager.getCriteriaBuilder().createTupleQuery();\nRoot&lt;Test&gt; pet = cq.from(Test.class);\ncq.multiselect(pet.get(\"id1\").isNotNull(), pet.get(\"id2\"));\n</code></pre>\n\n<p>I think that the generated query will throw a query syntax exception as it might not be supported by jpa/hibernate to have the <em>is not null</em> in the select expression. If this is the case then maybe one possible solution would be to place the <em>is not null</em> in the where clause. You can find examples here for that case <a href=\"https://docs.oracle.com/cd/E19798-01/821-1841/gjitv/index.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/cd/E19798-01/821-1841/gjitv/index.html</a></p>\n"},{"comments":[{"owner":{"account_id":3402939,"reputation":6414,"user_id":2854723,"accept_rate":73,"display_name":"thomas.mc.work"},"score":0,"creation_date":1513954729,"post_id":47871905,"comment_id":82856483,"body_markdown":"While this looked promising in the first place, it created an odd SQL query like `SELECT …, CASE WHEN NOT (NOT EXISTS (SELECT t6.ID FROM ticket_action t7, ticket t6 WHERE (t7.ticket_id = t1.ID)) ) THEN ? ELSE ? END  FROM …`. What to group?: by the fact whether a relation exists or not: `group by ticket_action.id IS NOT NULL`","body":"While this looked promising in the first place, it created an odd SQL query like <code>SELECT …, CASE WHEN NOT (NOT EXISTS (SELECT t6.ID FROM ticket_action t7, ticket t6 WHERE (t7.ticket_id = t1.ID)) ) THEN ? ELSE ? END  FROM …</code>. What to group?: by the fact whether a relation exists or not: <code>group by ticket_action.id IS NOT NULL</code>"}],"tags":[],"owner":{"account_id":8324875,"reputation":11755,"user_id":6413377,"accept_rate":25,"display_name":"pirho"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1513770868,"creation_date":1513612187,"answer_id":47871905,"question_id":47830390,"body_markdown":"One working approach is to use `CriteriaBuilder.selectCase(..)`.\r\n\r\nWith `DTO` like (`Object[]` does the same but this is typesafe from the beginning)\r\n\r\n    @Getter\r\n    @AllArgsConstructor\r\n    public class TicketTuple {\r\n       private Boolean hasAction;\r\n       private Long ticketId;\r\n    }\r\n\r\nthe result can be obtained with following query\r\n\r\n    CriteriaBuilder cb = em.getCriteriaBuilder();\r\n    CriteriaQuery&lt;TicketTuple&gt; cq = cb.createQuery(TicketTuple.class);\r\n    Root&lt;Ticket&gt; from = cq.from(Ticket.class);\r\n    Join&lt;Ticket, TicketAction&gt; join = from.join(&quot;ticketAction&quot;, JoinType.LEFT);\r\n    \r\n    Expression&lt;Boolean&gt; caseHasAction = cb.&lt;Boolean&gt;selectCase()\r\n          .when(cb.isNotNull(join), true)\r\n          .otherwise(false);\r\n\r\n    cq.multiselect(\r\n          caseHasAction.as(Boolean.class)\r\n         ,from.get(&quot;id&quot;)\r\n    );\r\n\r\nabout grouping, I do not quite get what you need to group, but for example\r\n\r\n    cq.multiselect(\r\n         caseHasAction.as(Boolean.class)\r\n         ,cb.count(from.get(&quot;id&quot;))\r\n    ).groupBy(caseHasAction.as(Boolean.class));\r\n\r\nwill return counts of `Ticket`s having and not having a `TicketAction`.\r\n\r\nI do not know the actual reason but the problem _seems to be_ that with `cb.isNotNull(..)`  (my) `JPA`  implementation **either** always fetches something that is seems not to be `null` **or** depending on the way the `null` is checked it creates some `INNER JOIN` so that the `null` values are dropped out from the result set.\r\n\r\n(I am using OpenJPA)\r\n","title":"Criteria API: Select Expression IF [NOT] NULL &lt;value&gt;","body":"<p>One working approach is to use <code>CriteriaBuilder.selectCase(..)</code>.</p>\n\n<p>With <code>DTO</code> like (<code>Object[]</code> does the same but this is typesafe from the beginning)</p>\n\n<pre><code>@Getter\n@AllArgsConstructor\npublic class TicketTuple {\n   private Boolean hasAction;\n   private Long ticketId;\n}\n</code></pre>\n\n<p>the result can be obtained with following query</p>\n\n<pre><code>CriteriaBuilder cb = em.getCriteriaBuilder();\nCriteriaQuery&lt;TicketTuple&gt; cq = cb.createQuery(TicketTuple.class);\nRoot&lt;Ticket&gt; from = cq.from(Ticket.class);\nJoin&lt;Ticket, TicketAction&gt; join = from.join(\"ticketAction\", JoinType.LEFT);\n\nExpression&lt;Boolean&gt; caseHasAction = cb.&lt;Boolean&gt;selectCase()\n      .when(cb.isNotNull(join), true)\n      .otherwise(false);\n\ncq.multiselect(\n      caseHasAction.as(Boolean.class)\n     ,from.get(\"id\")\n);\n</code></pre>\n\n<p>about grouping, I do not quite get what you need to group, but for example</p>\n\n<pre><code>cq.multiselect(\n     caseHasAction.as(Boolean.class)\n     ,cb.count(from.get(\"id\"))\n).groupBy(caseHasAction.as(Boolean.class));\n</code></pre>\n\n<p>will return counts of <code>Ticket</code>s having and not having a <code>TicketAction</code>.</p>\n\n<p>I do not know the actual reason but the problem <em>seems to be</em> that with <code>cb.isNotNull(..)</code>  (my) <code>JPA</code>  implementation <strong>either</strong> always fetches something that is seems not to be <code>null</code> <strong>or</strong> depending on the way the <code>null</code> is checked it creates some <code>INNER JOIN</code> so that the <code>null</code> values are dropped out from the result set.</p>\n\n<p>(I am using OpenJPA)</p>\n"},{"tags":[],"owner":{"account_id":465793,"reputation":16048,"user_id":870122,"accept_rate":88,"display_name":"perissf"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1514392506,"creation_date":1514382311,"answer_id":47993292,"question_id":47830390,"body_markdown":"For this query you need to have a collection property of type [`@OneToMany`][1]. \r\nAlso I had to use [`Tuple`][2] instead of `TicketTuple` (referenced in [this][3] answer) because it was giving an `IllegalArgumentException` (argument type mismatch) when dealing with ticket_actions without a ticket, I don&#39;t know if you have this kind of possibility in your schema. \r\n\r\nEclipseLink JPA implementation, Derby db.\r\n\r\nIn class `Ticket` you have to have this property:\r\n\r\n    @OneToMany(mappedBy = &quot;ticket&quot;)\r\n    private Collection&lt;TicketAction&gt; ticketActions;\r\n\r\nCriteria Query code:\r\n\r\n    CriteriaBuilder cb = em.getCriteriaBuilder();\r\n    CriteriaQuery&lt;Tuple&gt; cq = cb.createQuery(Tuple.class);\r\n    Root&lt;Ticket&gt; from = cq.from(Ticket.class);\r\n    Join&lt;Ticket, TicketAction&gt; join = from.join(&quot;ticketActions&quot;, JoinType.LEFT);\r\n\r\n    Expression&lt;Boolean&gt; caseHasAction = cb.&lt;Boolean&gt;selectCase()\r\n          .when(cb.isNotNull(join.get(&quot;id&quot;)), true)\r\n          .otherwise(false);\r\n\r\n    cq.multiselect(\r\n          caseHasAction.as(Boolean.class)\r\n         ,from.get(&quot;id&quot;)\r\n    );\r\n    TypedQuery&lt;Tuple&gt; tq = em.createQuery(cq);\r\n\r\n    for (Tuple tt : tq.getResultList()) {\r\n        System.out.println(&quot;Res: &quot; + tt.get(0) + &quot; &quot; + (tt.get(1) == null ? &quot;null&quot; : tt.get(1).toString()));\r\n    }\r\n\r\nThe resulting query:\r\n\r\n    SELECT CASE WHEN (t0.ID IS NOT NULL) THEN 1 ELSE 0 END , t1.ID FROM TICKET t1 LEFT OUTER JOIN TICKET_ACTION t0 ON (t0.TICKET_ID = t1.ID)\r\n\r\n\r\n  [1]: https://docs.oracle.com/javaee/6/api/javax/persistence/OneToMany.html\r\n  [2]: https://docs.oracle.com/javaee/6/api/javax/persistence/Tuple.html\r\n  [3]: https://stackoverflow.com/a/47871905/870122","title":"Criteria API: Select Expression IF [NOT] NULL &lt;value&gt;","body":"<p>For this query you need to have a collection property of type <a href=\"https://docs.oracle.com/javaee/6/api/javax/persistence/OneToMany.html\" rel=\"nofollow noreferrer\"><code>@OneToMany</code></a>. \nAlso I had to use <a href=\"https://docs.oracle.com/javaee/6/api/javax/persistence/Tuple.html\" rel=\"nofollow noreferrer\"><code>Tuple</code></a> instead of <code>TicketTuple</code> (referenced in <a href=\"https://stackoverflow.com/a/47871905/870122\">this</a> answer) because it was giving an <code>IllegalArgumentException</code> (argument type mismatch) when dealing with ticket_actions without a ticket, I don't know if you have this kind of possibility in your schema. </p>\n\n<p>EclipseLink JPA implementation, Derby db.</p>\n\n<p>In class <code>Ticket</code> you have to have this property:</p>\n\n<pre><code>@OneToMany(mappedBy = \"ticket\")\nprivate Collection&lt;TicketAction&gt; ticketActions;\n</code></pre>\n\n<p>Criteria Query code:</p>\n\n<pre><code>CriteriaBuilder cb = em.getCriteriaBuilder();\nCriteriaQuery&lt;Tuple&gt; cq = cb.createQuery(Tuple.class);\nRoot&lt;Ticket&gt; from = cq.from(Ticket.class);\nJoin&lt;Ticket, TicketAction&gt; join = from.join(\"ticketActions\", JoinType.LEFT);\n\nExpression&lt;Boolean&gt; caseHasAction = cb.&lt;Boolean&gt;selectCase()\n      .when(cb.isNotNull(join.get(\"id\")), true)\n      .otherwise(false);\n\ncq.multiselect(\n      caseHasAction.as(Boolean.class)\n     ,from.get(\"id\")\n);\nTypedQuery&lt;Tuple&gt; tq = em.createQuery(cq);\n\nfor (Tuple tt : tq.getResultList()) {\n    System.out.println(\"Res: \" + tt.get(0) + \" \" + (tt.get(1) == null ? \"null\" : tt.get(1).toString()));\n}\n</code></pre>\n\n<p>The resulting query:</p>\n\n<pre><code>SELECT CASE WHEN (t0.ID IS NOT NULL) THEN 1 ELSE 0 END , t1.ID FROM TICKET t1 LEFT OUTER JOIN TICKET_ACTION t0 ON (t0.TICKET_ID = t1.ID)\n</code></pre>\n"}],"owner":{"account_id":3402939,"reputation":6414,"user_id":2854723,"accept_rate":73,"display_name":"thomas.mc.work"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9624,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":3,"score":4,"last_activity_date":1681095915,"creation_date":1513333781,"question_id":47830390,"body_markdown":"I&#39;m trying to translate the following simple query into JPA criteria API:\r\n\r\n    SELECT ticket_action.ticket_id IS NOT NULL, ticket.id\r\n    FROM ticket\r\n    LEFT OUTER JOIN ticket_action ON ticket.id = ticket_action.ticket_id\r\n\r\nI&#39;ve tried two approaches:\r\n\r\n1. Using `criteriaBuilder.function(&quot;ISNULL&quot;, Boolean.class, ticketAction.get(TicketAction_.ticketId))`: the problem is there is no negation if `ISNULL` like `ISNOTNULL` (for a MySQL/MariaDB database)\r\n2. Using `criteriaBuilder.isNotNull(ticketAction.get(TicketAction_.ticketId))`: but this return a `Predicate` whereas the select statement accepts only `Expression`s\r\n\r\nStretch goal: The same with `GROUP BY ticket.ticket_id IS NOT NULL`\r\n\r\n---\r\n\r\n## The table structure as requested\r\n\r\n    +-----------+---------+\r\n    |         ticket      |\r\n    +-----------+---------+\r\n    |   name    |  type   |\r\n    +-----------+---------+\r\n    | id        | integer |\r\n    | title     | varchar |\r\n    +-----------+---------+\r\n\r\n    +-----------+---------+\r\n    |    ticket_action    |\r\n    +-----------+---------+\r\n    |   name    |  type   |\r\n    +-----------+---------+\r\n    | id        | integer |\r\n    | ticket_id | integer |\r\n    | title     | varchar |\r\n    +-----------+---------+\r\n\r\n# Result:\r\n\r\nFinally I ended up using a construtor query which receives the `id` of `ticket_action` among others. In the constructor there is the decision about the state: `this.hasTicketAction = ticketActionId != null;`\r\nNot very satisfying, but working.\r\n\r\n__Thank you though anybody for posting your answers!__","title":"Criteria API: Select Expression IF [NOT] NULL &lt;value&gt;","body":"<p>I'm trying to translate the following simple query into JPA criteria API:</p>\n\n<pre><code>SELECT ticket_action.ticket_id IS NOT NULL, ticket.id\nFROM ticket\nLEFT OUTER JOIN ticket_action ON ticket.id = ticket_action.ticket_id\n</code></pre>\n\n<p>I've tried two approaches:</p>\n\n<ol>\n<li>Using <code>criteriaBuilder.function(\"ISNULL\", Boolean.class, ticketAction.get(TicketAction_.ticketId))</code>: the problem is there is no negation if <code>ISNULL</code> like <code>ISNOTNULL</code> (for a MySQL/MariaDB database)</li>\n<li>Using <code>criteriaBuilder.isNotNull(ticketAction.get(TicketAction_.ticketId))</code>: but this return a <code>Predicate</code> whereas the select statement accepts only <code>Expression</code>s</li>\n</ol>\n\n<p>Stretch goal: The same with <code>GROUP BY ticket.ticket_id IS NOT NULL</code></p>\n\n<hr>\n\n<h2>The table structure as requested</h2>\n\n<pre><code>+-----------+---------+\n|         ticket      |\n+-----------+---------+\n|   name    |  type   |\n+-----------+---------+\n| id        | integer |\n| title     | varchar |\n+-----------+---------+\n\n+-----------+---------+\n|    ticket_action    |\n+-----------+---------+\n|   name    |  type   |\n+-----------+---------+\n| id        | integer |\n| ticket_id | integer |\n| title     | varchar |\n+-----------+---------+\n</code></pre>\n\n<h1>Result:</h1>\n\n<p>Finally I ended up using a construtor query which receives the <code>id</code> of <code>ticket_action</code> among others. In the constructor there is the decision about the state: <code>this.hasTicketAction = ticketActionId != null;</code>\nNot very satisfying, but working.</p>\n\n<p><strong>Thank you though anybody for posting your answers!</strong></p>\n"},{"tags":["java","chess"],"comments":[{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1681103553,"post_id":75973891,"comment_id":133998948,"body_markdown":"Poor title. Rewrite to summarize your specific technical issue.","body":"Poor title. Rewrite to summarize your specific technical issue."}],"answers":[{"comments":[{"owner":{"account_id":27473022,"reputation":1,"user_id":20961512,"display_name":"rana"},"score":0,"creation_date":1681094378,"post_id":75973904,"comment_id":133998277,"body_markdown":"thank you you helped me , i modifed my  method to first count the number of valid moves the knight can make, and then create an array of that size  .","body":"thank you you helped me , i modifed my  method to first count the number of valid moves the knight can make, and then create an array of that size  ."}],"tags":[],"owner":{"account_id":20780824,"reputation":29149,"user_id":15261315,"display_name":"Chris"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681093498,"creation_date":1681093498,"answer_id":75973904,"question_id":75973891,"body_markdown":"If you don&#39;t want to use an `ArrayList` you can keep track of the number of moves possible, create a new `double[]` with that many elements, copy the data into it and return that new array.\r\n\r\n[`java.util.Arrays.copyOfRange`](https://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#copyOfRange(double[],%20int,%20int)) may prove useful.","title":"my method is incorrect I want help to modify it","body":"<p>If you don't want to use an <code>ArrayList</code> you can keep track of the number of moves possible, create a new <code>double[]</code> with that many elements, copy the data into it and return that new array.</p>\n<p><a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#copyOfRange(double%5B%5D,%20int,%20int)\" rel=\"nofollow noreferrer\"><code>java.util.Arrays.copyOfRange</code></a> may prove useful.</p>\n"}],"owner":{"account_id":27473022,"reputation":1,"user_id":20961512,"display_name":"rana"},"comment_count":1,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43,"favorite_count":0,"down_vote_count":4,"up_vote_count":0,"closed_date":1681103563,"answer_count":1,"score":-4,"last_activity_date":1681093498,"creation_date":1681093297,"question_id":75973891,"body_markdown":"this is a method that return array have all the positions that a knight(in chess) make in one move , the problem that i put the size of array 8 ,  the chess board is (8x8) , the problem that , example : if the knight at position (1,1) this method will return {(2,3),(3,2),null,null,null,null,null,null} , i want it to return this {(2,3),(3,2)} . without using arraylist\r\n\r\n```\r\npublic Position[] moves(Position p) {\r\n    Position[] positions = new Position[8];\r\n    int row = p.getRow();\r\n    int col = p.getCol();\r\n\r\n    int[][] moves = {{-1,-2},{1,-2},{-1,2},{1,2},{-2,-1},{-2,1},{2,-1},{2,1}};\r\n\r\n        for (int k=0 ; k&lt; moves.length;k++) {\r\n            int newCol = col + moves[k][1];\r\n            int newRow = row + moves[k][0];\r\n            if(newCol &gt;= 1 &amp;&amp; newCol&lt;= 8 &amp;&amp; newRow &gt;= 1 &amp;&amp; newRow &lt;= 8)\r\n            {\r\n                positions[k] = new Position(newRow, newCol);\r\n            }\r\n            else\r\n                positions[k] = null ;\r\n        }\r\n    return positions;\r\n}\r\n```","title":"my method is incorrect I want help to modify it","body":"<p>this is a method that return array have all the positions that a knight(in chess) make in one move , the problem that i put the size of array 8 ,  the chess board is (8x8) , the problem that , example : if the knight at position (1,1) this method will return {(2,3),(3,2),null,null,null,null,null,null} , i want it to return this {(2,3),(3,2)} . without using arraylist</p>\n<pre><code>public Position[] moves(Position p) {\n    Position[] positions = new Position[8];\n    int row = p.getRow();\n    int col = p.getCol();\n\n    int[][] moves = {{-1,-2},{1,-2},{-1,2},{1,2},{-2,-1},{-2,1},{2,-1},{2,1}};\n\n        for (int k=0 ; k&lt; moves.length;k++) {\n            int newCol = col + moves[k][1];\n            int newRow = row + moves[k][0];\n            if(newCol &gt;= 1 &amp;&amp; newCol&lt;= 8 &amp;&amp; newRow &gt;= 1 &amp;&amp; newRow &lt;= 8)\n            {\n                positions[k] = new Position(newRow, newCol);\n            }\n            else\n                positions[k] = null ;\n        }\n    return positions;\n}\n</code></pre>\n"},{"tags":["java","probability"],"answers":[{"tags":[],"owner":{"account_id":5035911,"reputation":19220,"user_id":4044696,"accept_rate":73,"display_name":"Severin Pappadeux"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1681092450,"creation_date":1681092450,"answer_id":75973850,"question_id":75953440,"body_markdown":"You could likely to solve this with Mote Carlo simulation. You have  n-variate Bernoulli distribution, but each Bernoulli sample is independent, so\r\n\r\n- set count to 0\r\n- simulate n-dim {0,1} vector using Bernoulli with probability p&lt;sub&gt;i&lt;/sub&gt;\r\n- sum vector, and if sum is &gt;= x, then increment count\r\n- repeat simulation N times, answer would be count/N\r\n\r\nDon&#39;t know much of a Java, could write something in Python. Ping me if you need the code","title":"Inclusion/Exclusion for at least x in n question","body":"<p>You could likely to solve this with Mote Carlo simulation. You have  n-variate Bernoulli distribution, but each Bernoulli sample is independent, so</p>\n<ul>\n<li>set count to 0</li>\n<li>simulate n-dim {0,1} vector using Bernoulli with probability p<sub>i</sub></li>\n<li>sum vector, and if sum is &gt;= x, then increment count</li>\n<li>repeat simulation N times, answer would be count/N</li>\n</ul>\n<p>Don't know much of a Java, could write something in Python. Ping me if you need the code</p>\n"}],"owner":{"account_id":28143333,"reputation":11,"user_id":21583968,"display_name":"000222"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1681092450,"creation_date":1680812232,"question_id":75953440,"body_markdown":"I need to solve a probability question where someone invited n guests to his birthdayparty. I am given an integer x and a list with n entries. Every ith entry is giving the probability that guest i will  come to the party. \r\n\r\nthe question is to find the probability that at least x guests will be at the party.\r\ni know there are several different better algorithms for this question but i wondered if i can solve this with the exclusion/inclusion principle.\r\n\r\ni tried doing it like this:\r\n-create all subsets of the quest probability list with at least x elements;\r\n-then for every subset multiply the probabilities together, which should give the probability that at least those guests in the subset will be at the party.\r\n\r\n-add the values of the subsets with cardinality x or x+k*2;\r\n-substract values of the subsets with cardinality x+1 +k*2;\r\n\r\nthis doesn&#39;t work in the end because i get values much higher than 1 or -1. what am i doing wrong here?\r\n\r\ncan the principle of exclusion/inclusion only be used if we start with the most basic subsets with at least 1 element?\r\n\r\n        int x = 5;\r\n   \r\n        double[] guests = new double[] {0.34, 0.24, 0.72, 0.28, 0.55, 0.88, 0.91, 0.0.99, 0.01, 0.46};\r\n        \r\n        ArrayList&lt;Double&gt; subset = new ArrayList&lt;Double&gt;();\r\n        ArrayList&lt;ArrayList&lt;Double&gt;&gt; Subsets = new ArrayList&lt;&gt;();\r\n        getSubsets(subset,Subsets,0,guests,x);\r\n        \r\n        double probx = 0;\r\n        \r\n        for(int i = 0;i&lt;Subsets.size();i++){\r\n          double prob = 1;\r\n          for(int j = 0;j&lt;Subsets.get(i).size();j++){\r\n            prob = Subsets.get(i).get(j)*prob;\r\n          }\r\n         \r\n          if((Subsets.get(i).size()%x)%2==0){\r\n        \t  \r\n            probx += prob;\r\n          }else{\r\n        \t  \r\n            probx -= prob;\r\n          }\r\n        }\r\n        \r\n        System.out.println(probx);\r\n    }\r\n    public static void getSubsets(ArrayList&lt;Double&gt; tmp, ArrayList&lt;ArrayList&lt;Double&gt;&gt; subsets, int i, double[] guests, int maxlength) {\r\n      if(i==tage.length) {\r\n        if(tmp.size()&gt;=maxlength) {\r\n          subsets.add(tmp);\r\n        }\r\n        return;\r\n      }\r\n      ArrayList&lt;Double&gt; newSet = new ArrayList&lt;&gt;(tmp);\r\n      newSet.add(guests[i]);\r\n    \r\n      getSubsets(newSet,subsets,i+1,guests,maxlength);\r\n      getSubsets(tmp,subsets,i+1,guests,maxlength);\r\n    }","title":"Inclusion/Exclusion for at least x in n question","body":"<p>I need to solve a probability question where someone invited n guests to his birthdayparty. I am given an integer x and a list with n entries. Every ith entry is giving the probability that guest i will  come to the party.</p>\n<p>the question is to find the probability that at least x guests will be at the party.\ni know there are several different better algorithms for this question but i wondered if i can solve this with the exclusion/inclusion principle.</p>\n<p>i tried doing it like this:\n-create all subsets of the quest probability list with at least x elements;\n-then for every subset multiply the probabilities together, which should give the probability that at least those guests in the subset will be at the party.</p>\n<p>-add the values of the subsets with cardinality x or x+k<em>2;\n-substract values of the subsets with cardinality x+1 +k</em>2;</p>\n<p>this doesn't work in the end because i get values much higher than 1 or -1. what am i doing wrong here?</p>\n<p>can the principle of exclusion/inclusion only be used if we start with the most basic subsets with at least 1 element?</p>\n<pre><code>    int x = 5;\n\n    double[] guests = new double[] {0.34, 0.24, 0.72, 0.28, 0.55, 0.88, 0.91, 0.0.99, 0.01, 0.46};\n    \n    ArrayList&lt;Double&gt; subset = new ArrayList&lt;Double&gt;();\n    ArrayList&lt;ArrayList&lt;Double&gt;&gt; Subsets = new ArrayList&lt;&gt;();\n    getSubsets(subset,Subsets,0,guests,x);\n    \n    double probx = 0;\n    \n    for(int i = 0;i&lt;Subsets.size();i++){\n      double prob = 1;\n      for(int j = 0;j&lt;Subsets.get(i).size();j++){\n        prob = Subsets.get(i).get(j)*prob;\n      }\n     \n      if((Subsets.get(i).size()%x)%2==0){\n          \n        probx += prob;\n      }else{\n          \n        probx -= prob;\n      }\n    }\n    \n    System.out.println(probx);\n}\npublic static void getSubsets(ArrayList&lt;Double&gt; tmp, ArrayList&lt;ArrayList&lt;Double&gt;&gt; subsets, int i, double[] guests, int maxlength) {\n  if(i==tage.length) {\n    if(tmp.size()&gt;=maxlength) {\n      subsets.add(tmp);\n    }\n    return;\n  }\n  ArrayList&lt;Double&gt; newSet = new ArrayList&lt;&gt;(tmp);\n  newSet.add(guests[i]);\n\n  getSubsets(newSet,subsets,i+1,guests,maxlength);\n  getSubsets(tmp,subsets,i+1,guests,maxlength);\n}\n</code></pre>\n"},{"tags":["java","spring","spring-security","cors","auth0"],"answers":[{"comments":[{"owner":{"account_id":26366719,"reputation":37,"user_id":20022057,"display_name":"Pablo Costa"},"score":0,"creation_date":1681078437,"post_id":75973059,"comment_id":133996846,"body_markdown":"Im considering restart the project. I was able to test everything with  postman (managed to get the token, update video details, etc). But trough the browser there are issues. I fought I had problems with http interceptor but it’s fine also. I can also view the token on inspect/network tab.","body":"Im considering restart the project. I was able to test everything with  postman (managed to get the token, update video details, etc). But trough the browser there are issues. I fought I had problems with http interceptor but it’s fine also. I can also view the token on inspect/network tab."}],"tags":[],"owner":{"account_id":20699305,"reputation":11,"user_id":15198797,"display_name":"SwedishFish"},"comment_count":1,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1681077020,"creation_date":1681077020,"answer_id":75973059,"question_id":75972707,"body_markdown":"I&#39;m also making a youtube clone with React Native/JSX. \r\n\r\nLooks like you&#39;re using Java but I also got the same error when trying to implement. I was using RapidAPI&#39;s youtube API. \r\n\r\n - verify the server permissions\r\n - check the server logs \r\n - verify the software version \r\n - test the endpoints with Postman or on the site \r\n - restart/re-install packages  \r\n\r\n ","title":"SpringBoot + Auth0 - CORS Problems","body":"<p>I'm also making a youtube clone with React Native/JSX.</p>\n<p>Looks like you're using Java but I also got the same error when trying to implement. I was using RapidAPI's youtube API.</p>\n<ul>\n<li>verify the server permissions</li>\n<li>check the server logs</li>\n<li>verify the software version</li>\n<li>test the endpoints with Postman or on the site</li>\n<li>restart/re-install packages</li>\n</ul>\n"},{"comments":[{"owner":{"account_id":26366719,"reputation":37,"user_id":20022057,"display_name":"Pablo Costa"},"score":0,"creation_date":1681093629,"post_id":75973813,"comment_id":133998209,"body_markdown":"I used the documentation from Auth0 and rebuilt my filterChain. After that, i fixed the cors problem i suppose (since now i can see trough Inttelij log that requests are being received and authorized). However, when i try to save something there&#39;s an CSRF error (Invalid CSRF token found for http://localhost:8080/api/videos), Trying to debug\\understand.","body":"I used the documentation from Auth0 and rebuilt my filterChain. After that, i fixed the cors problem i suppose (since now i can see trough Inttelij log that requests are being received and authorized). However, when i try to save something there&#39;s an CSRF error (Invalid CSRF token found for <a href=\"http://localhost:8080/api/videos\" rel=\"nofollow noreferrer\">localhost:8080/api/videos</a>), Trying to debug\\understand."},{"owner":{"account_id":25538,"reputation":8293,"user_id":65681,"accept_rate":73,"display_name":"Matt Raible"},"score":0,"creation_date":1681140940,"post_id":75973813,"comment_id":134004976,"body_markdown":"If you&#39;re not serving up any server-rendered pages, you likely don&#39;t need CSRF and can disable it with `http.csrf().disable()`. If you&#39;d still like to use it, you&#39;ll need to set a CSRF cookie and read it/send it as a header on the client side. This article shows you how to do that with React and Spring Boot: https://developer.okta.com/blog/2022/06/17/simple-crud-react-and-spring-boot","body":"If you&#39;re not serving up any server-rendered pages, you likely don&#39;t need CSRF and can disable it with <code>http.csrf().disable()</code>. If you&#39;d still like to use it, you&#39;ll need to set a CSRF cookie and read it/send it as a header on the client side. This article shows you how to do that with React and Spring Boot: <a href=\"https://developer.okta.com/blog/2022/06/17/simple-crud-react-and-spring-boot\" rel=\"nofollow noreferrer\">developer.okta.com/blog/2022/06/17/&hellip;</a>"}],"tags":[],"owner":{"account_id":25538,"reputation":8293,"user_id":65681,"accept_rate":73,"display_name":"Matt Raible"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681091854,"creation_date":1681091854,"answer_id":75973813,"question_id":75972707,"body_markdown":"I think you need to set your `CorsConfiguration` to allow credentials. Here&#39;s what I have in Kotlin. It works without any additional Spring Boot configuration.\r\n\r\n```kotlin\r\nimport org.springframework.web.cors.CorsConfiguration\r\nimport org.springframework.web.cors.CorsConfigurationSource\r\nimport org.springframework.web.cors.UrlBasedCorsConfigurationSource\r\n\r\n@Configuration\r\nclass SecurityConfiguration {\r\n\r\n    @Bean\r\n    fun webSecurity(http: HttpSecurity): SecurityFilterChain {\r\n        ...\r\n\r\n        http.cors()\r\n        return http.build()\r\n    }\r\n\r\n    @Bean\r\n    fun corsConfigurationSource(): CorsConfigurationSource {\r\n        val source = UrlBasedCorsConfigurationSource()\r\n        val config = CorsConfiguration()\r\n        config.allowCredentials = true\r\n        config.allowedOrigins = listOf(&quot;http://localhost:4200&quot;)\r\n        config.allowedMethods = listOf(&quot;*&quot;)\r\n        config.allowedHeaders = listOf(&quot;*&quot;)\r\n        source.registerCorsConfiguration(&quot;/**&quot;, config)\r\n        return source\r\n    }\r\n}\r\n```","title":"SpringBoot + Auth0 - CORS Problems","body":"<p>I think you need to set your <code>CorsConfiguration</code> to allow credentials. Here's what I have in Kotlin. It works without any additional Spring Boot configuration.</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>import org.springframework.web.cors.CorsConfiguration\nimport org.springframework.web.cors.CorsConfigurationSource\nimport org.springframework.web.cors.UrlBasedCorsConfigurationSource\n\n@Configuration\nclass SecurityConfiguration {\n\n    @Bean\n    fun webSecurity(http: HttpSecurity): SecurityFilterChain {\n        ...\n\n        http.cors()\n        return http.build()\n    }\n\n    @Bean\n    fun corsConfigurationSource(): CorsConfigurationSource {\n        val source = UrlBasedCorsConfigurationSource()\n        val config = CorsConfiguration()\n        config.allowCredentials = true\n        config.allowedOrigins = listOf(&quot;http://localhost:4200&quot;)\n        config.allowedMethods = listOf(&quot;*&quot;)\n        config.allowedHeaders = listOf(&quot;*&quot;)\n        source.registerCorsConfiguration(&quot;/**&quot;, config)\n        return source\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":26366719,"reputation":37,"user_id":20022057,"display_name":"Pablo Costa"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":160,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1681091854,"creation_date":1681072098,"question_id":75972707,"body_markdown":"Even after configuring everything according to the docs, i&#39;m still having sobe CORS issues while trying to do some operations on my site.\r\n\r\nI&#39;m making an YouTube clone using a tutorial. So far so good, i managed to cover and adapt the parts in there that weren&#39;t working \\ were deprecated (this includes the use of filterChain instead of WebSecurityConfigureAdpter on SecurityConfig.java).\r\n\r\nHowever, when i try to request an endpoint (for uploading the videos), the moment i click the upload button i receive a 401 XHR error - related to cross origin issues.\r\n\r\nOn my SecurityConfig.java everything looks setup correctly. On the WebMvc config also, allowing anything from everywhere.\r\n\r\nI&#39;ve tried to implement a function inside SecurityConfig.java as a Bean, to configure cors separatedly (without the WebMvcConfig class) but it didn&#39;t worked also. I&#39;m kinda lost here.\r\n\r\n\r\nThis projects runs angular  in the FrontEnd. I added a small part to identify if the user was logged in (just showing user details after login), and the user is authenticated (after logging in i can display the user details).\r\n\r\nAny input would be appreciated. Also, if i missed anything here in order to describe my problem, i&#39;ll be glad to edit the post and provide the information.\r\n\r\nThanks in advance!\r\n\r\nSecurityConfig.java\r\n\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    public class SecurityConfig {\r\n        @Value(&quot;${spring.security.oauth2.resourceserver.jwt.issuer.uri}&quot;)\r\n        private String issuer;\r\n        @Value(&quot;${auth0.audience}&quot;)\r\n        private String audience;\r\n        @Bean\r\n        public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n    \r\n    \r\n            http.authorizeRequests()\r\n                    .anyRequest().authenticated()\r\n                    .and()\r\n                    .sessionManagement()\r\n                    .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\r\n                    .and()\r\n                    .cors(Customizer.withDefaults())\r\n                    .oauth2ResourceServer()\r\n                    .jwt();\r\n    \r\n            return http.build();\r\n    \r\n    \r\n    \r\n        }\r\n    \r\n        @Bean\r\n        CorsConfigurationSource corsConfigurationSource() {\r\n            CorsConfiguration configuration = new CorsConfiguration();\r\n            configuration.setAllowedOrigins(Collections.singletonList(&quot;http://localhost:4200&quot;));\r\n            configuration.setAllowedMethods(Arrays.asList(&quot;GET&quot;,&quot;POST&quot;, &quot;PUT&quot;, &quot;DELETE&quot;, &quot;PATCH&quot;, &quot;OPTIONS&quot;));\r\n            configuration.setExposedHeaders(Arrays.asList(&quot;Authorization&quot;, &quot;content-type&quot;));\r\n            configuration.setAllowedHeaders(Arrays.asList(&quot;Authorization&quot;, &quot;content-type&quot;));\r\n            UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\r\n            source.registerCorsConfiguration(&quot;/**&quot;, configuration);\r\n            return source;\r\n        }\r\n    \r\n    \r\n        @Bean\r\n        public JwtDecoder jwtDecoder(){\r\n            NimbusJwtDecoder jwtDecoder = JwtDecoders.fromOidcIssuerLocation(issuer);\r\n    \r\n            OAuth2TokenValidator&lt;Jwt&gt; audienceValidator = new AudienceValidator(audience);\r\n            OAuth2TokenValidator&lt;Jwt&gt; withIssuer = JwtValidators.createDefaultWithIssuer(issuer);\r\n            OAuth2TokenValidator&lt;Jwt&gt; withAudience = new DelegatingOAuth2TokenValidator&lt;&gt;(withIssuer);\r\n    \r\n            jwtDecoder.setJwtValidator(withAudience);\r\n    \r\n            return jwtDecoder;\r\n        }\r\n    }\r\n\r\nWebMvcConfig.java\r\npackage com.pablo.portfolio.youtubeclone.config;\r\n\r\n    @EnableWebMvc\r\n    @Configuration\r\n    \r\n    public class WebMvcConfig  implements WebMvcConfigurer {\r\n        @Override\r\n        public void addCorsMappings(CorsRegistry corsRegistry){\r\n            corsRegistry.addMapping(&quot;/**&quot;)\r\n                    .allowedOrigins(&quot;*&quot;)\r\n                    .allowedMethods(&quot;GET&quot;, &quot;PUT&quot;,&quot;POST&quot;,&quot;DELETE&quot;,&quot;PATCH&quot;,&quot;OPTIONS&quot;)\r\n                    .allowedHeaders(&quot;*&quot;)\r\n                    .maxAge(3600);\r\n    \r\n        }\r\n    }\r\n\r\nVideoController.java\r\n\r\n    package com.pablo.portfolio.youtubeclone.controller;\r\n    \r\n    \r\n    @RestController\r\n    @CrossOrigin\r\n    @RequestMapping(&quot;/api/videos&quot;)\r\n    @RequiredArgsConstructor\r\n    public class VideoController {\r\n    \r\n        private final VideoService videoService;\r\n    \r\n    \r\n        @CrossOrigin\r\n        @PostMapping\r\n        @ResponseStatus(HttpStatus.CREATED)\r\n        public UploadVideoResponse uploadVideo(@RequestParam(&quot;file&quot;)MultipartFile file){\r\n            return videoService.uploadVideo(file);\r\n    \r\n        }\r\n        @CrossOrigin\r\n        @PostMapping(&quot;/thumbnail&quot;)\r\n        @ResponseStatus(HttpStatus.CREATED)\r\n        public String uploadThumbnail\r\n                (@RequestParam(&quot;file&quot;)MultipartFile file, @RequestParam(&quot;videoId&quot;) String videoId){\r\n            return videoService.uploadThumbnail(file, videoId);\r\n        }\r\n        @CrossOrigin\r\n        @PutMapping\r\n        @ResponseStatus(HttpStatus.OK)\r\n        public VideoDto editVideoMetaData(@RequestBody VideoDto videoDto){\r\n            return videoService.editVideo(videoDto);\r\n        }\r\n    \r\n        @CrossOrigin\r\n        @GetMapping(&quot;/{videoId}&quot;)\r\n        public VideoDto getVideoDetails(@PathVariable String videoId){\r\n            return videoService.getVideoDetails(videoId);\r\n        }\r\n    \r\n    }\r\n\r\nEDIT:\r\nI noticed the following information on my log:\r\n\r\n    2023-04-09T18:13:20.032-03:00 DEBUG 1197563 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /api/videos\r\n    2023-04-09T18:13:20.045-03:00 DEBUG 1197563 --- [nio-8080-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext\r\n\r\nMaybe it isn&#39;t loading the correct authentication filter?","title":"SpringBoot + Auth0 - CORS Problems","body":"<p>Even after configuring everything according to the docs, i'm still having sobe CORS issues while trying to do some operations on my site.</p>\n<p>I'm making an YouTube clone using a tutorial. So far so good, i managed to cover and adapt the parts in there that weren't working \\ were deprecated (this includes the use of filterChain instead of WebSecurityConfigureAdpter on SecurityConfig.java).</p>\n<p>However, when i try to request an endpoint (for uploading the videos), the moment i click the upload button i receive a 401 XHR error - related to cross origin issues.</p>\n<p>On my SecurityConfig.java everything looks setup correctly. On the WebMvc config also, allowing anything from everywhere.</p>\n<p>I've tried to implement a function inside SecurityConfig.java as a Bean, to configure cors separatedly (without the WebMvcConfig class) but it didn't worked also. I'm kinda lost here.</p>\n<p>This projects runs angular  in the FrontEnd. I added a small part to identify if the user was logged in (just showing user details after login), and the user is authenticated (after logging in i can display the user details).</p>\n<p>Any input would be appreciated. Also, if i missed anything here in order to describe my problem, i'll be glad to edit the post and provide the information.</p>\n<p>Thanks in advance!</p>\n<p>SecurityConfig.java</p>\n<pre><code>@Configuration\n@EnableWebSecurity\npublic class SecurityConfig {\n    @Value(&quot;${spring.security.oauth2.resourceserver.jwt.issuer.uri}&quot;)\n    private String issuer;\n    @Value(&quot;${auth0.audience}&quot;)\n    private String audience;\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n\n\n        http.authorizeRequests()\n                .anyRequest().authenticated()\n                .and()\n                .sessionManagement()\n                .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\n                .and()\n                .cors(Customizer.withDefaults())\n                .oauth2ResourceServer()\n                .jwt();\n\n        return http.build();\n\n\n\n    }\n\n    @Bean\n    CorsConfigurationSource corsConfigurationSource() {\n        CorsConfiguration configuration = new CorsConfiguration();\n        configuration.setAllowedOrigins(Collections.singletonList(&quot;http://localhost:4200&quot;));\n        configuration.setAllowedMethods(Arrays.asList(&quot;GET&quot;,&quot;POST&quot;, &quot;PUT&quot;, &quot;DELETE&quot;, &quot;PATCH&quot;, &quot;OPTIONS&quot;));\n        configuration.setExposedHeaders(Arrays.asList(&quot;Authorization&quot;, &quot;content-type&quot;));\n        configuration.setAllowedHeaders(Arrays.asList(&quot;Authorization&quot;, &quot;content-type&quot;));\n        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\n        source.registerCorsConfiguration(&quot;/**&quot;, configuration);\n        return source;\n    }\n\n\n    @Bean\n    public JwtDecoder jwtDecoder(){\n        NimbusJwtDecoder jwtDecoder = JwtDecoders.fromOidcIssuerLocation(issuer);\n\n        OAuth2TokenValidator&lt;Jwt&gt; audienceValidator = new AudienceValidator(audience);\n        OAuth2TokenValidator&lt;Jwt&gt; withIssuer = JwtValidators.createDefaultWithIssuer(issuer);\n        OAuth2TokenValidator&lt;Jwt&gt; withAudience = new DelegatingOAuth2TokenValidator&lt;&gt;(withIssuer);\n\n        jwtDecoder.setJwtValidator(withAudience);\n\n        return jwtDecoder;\n    }\n}\n</code></pre>\n<p>WebMvcConfig.java\npackage com.pablo.portfolio.youtubeclone.config;</p>\n<pre><code>@EnableWebMvc\n@Configuration\n\npublic class WebMvcConfig  implements WebMvcConfigurer {\n    @Override\n    public void addCorsMappings(CorsRegistry corsRegistry){\n        corsRegistry.addMapping(&quot;/**&quot;)\n                .allowedOrigins(&quot;*&quot;)\n                .allowedMethods(&quot;GET&quot;, &quot;PUT&quot;,&quot;POST&quot;,&quot;DELETE&quot;,&quot;PATCH&quot;,&quot;OPTIONS&quot;)\n                .allowedHeaders(&quot;*&quot;)\n                .maxAge(3600);\n\n    }\n}\n</code></pre>\n<p>VideoController.java</p>\n<pre><code>package com.pablo.portfolio.youtubeclone.controller;\n\n\n@RestController\n@CrossOrigin\n@RequestMapping(&quot;/api/videos&quot;)\n@RequiredArgsConstructor\npublic class VideoController {\n\n    private final VideoService videoService;\n\n\n    @CrossOrigin\n    @PostMapping\n    @ResponseStatus(HttpStatus.CREATED)\n    public UploadVideoResponse uploadVideo(@RequestParam(&quot;file&quot;)MultipartFile file){\n        return videoService.uploadVideo(file);\n\n    }\n    @CrossOrigin\n    @PostMapping(&quot;/thumbnail&quot;)\n    @ResponseStatus(HttpStatus.CREATED)\n    public String uploadThumbnail\n            (@RequestParam(&quot;file&quot;)MultipartFile file, @RequestParam(&quot;videoId&quot;) String videoId){\n        return videoService.uploadThumbnail(file, videoId);\n    }\n    @CrossOrigin\n    @PutMapping\n    @ResponseStatus(HttpStatus.OK)\n    public VideoDto editVideoMetaData(@RequestBody VideoDto videoDto){\n        return videoService.editVideo(videoDto);\n    }\n\n    @CrossOrigin\n    @GetMapping(&quot;/{videoId}&quot;)\n    public VideoDto getVideoDetails(@PathVariable String videoId){\n        return videoService.getVideoDetails(videoId);\n    }\n\n}\n</code></pre>\n<p>EDIT:\nI noticed the following information on my log:</p>\n<pre><code>2023-04-09T18:13:20.032-03:00 DEBUG 1197563 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /api/videos\n2023-04-09T18:13:20.045-03:00 DEBUG 1197563 --- [nio-8080-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext\n</code></pre>\n<p>Maybe it isn't loading the correct authentication filter?</p>\n"},{"tags":["java","android","android-studio","camera"],"comments":[{"owner":{"account_id":39846,"reputation":991173,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1671129584,"post_id":74815726,"comment_id":132037502,"body_markdown":"Remove the `CAMERA` permission. You only need that if you are working with the camera APIs directly. If you continue to crash after that, please edit your question to provide the complete stack trace.","body":"Remove the <code>CAMERA</code> permission. You only need that if you are working with the camera APIs directly. If you continue to crash after that, please edit your question to provide the complete stack trace."}],"answers":[{"tags":[],"owner":{"account_id":28261124,"reputation":1,"user_id":21605813,"display_name":"user21605813"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681091395,"creation_date":1681091395,"answer_id":75973784,"question_id":74815726,"body_markdown":"I had the same issue, Just disable your CAMERA permissions in your manifest and you are good.","title":"App crashes when trying to use camera in Android App / Andoid studio","body":"<p>I had the same issue, Just disable your CAMERA permissions in your manifest and you are good.</p>\n"}],"owner":{"account_id":16991746,"reputation":15,"user_id":19283908,"display_name":"J_R"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":755,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681091395,"creation_date":1671127179,"question_id":74815726,"body_markdown":"I&#39;m doing a meal tracker app, where you can track what you eat and also upload images of your  meals to be stored on your phone and then used in the app to display your past meals.\r\n\r\nI&#39;m currently trying to add the camera/upload image functionality and I was following along to a tutorial I found on YouTube, however, the app keeps crashing as soon as the &quot;tap to add photo&quot;-Button is clicked.\r\n\r\nThis is the code inside the &quot;TrackFragment&quot; (where you enter the data for one meal):\r\n\r\n```\r\n(...)\r\npublic class TrackFragment extends Fragment{\r\n\r\n    final int CAMERA_REQ_CODE = 100;\r\n    ImageView imgCamera;\r\n\r\n    private final Context trackFragmentContext = this.getContext();\r\n\r\n(...)\r\n\r\n    \r\n    @Override\r\n    public void onViewCreated(@NonNull View view, @Nullable Bundle savedInstanceState) {\r\n        super.onViewCreated(view, savedInstanceState);\r\n\r\n\r\n        // TODO handling camera input to upload image\r\n        imgCamera = view.findViewById(R.id.imgCamera);\r\n        Button btnCamera = view.findViewById(R.id.btnCamera);\r\n\r\n        btnCamera.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n\r\n                // start intent (one of these causes crash)\r\n                Intent iCamera = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);\r\n                startActivityForResult(iCamera, CAMERA_REQ_CODE);\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    // show photo on track fragment below button\r\n    @Override\r\n    public void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n\r\n        if(resultCode==RESULT_OK){\r\n            if(requestCode==CAMERA_REQ_CODE){\r\n                Bitmap img = (Bitmap) (data.getExtras().get(&quot;data&quot;));\r\n                imgCamera.setImageBitmap(img);\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nAccording to the log it seems to be an issue regarding security because of the camera access, however I did include in the manifest.\r\n```\r\n&lt;uses-permission android:name=&quot;android.permission.CAMERA&quot; /&gt;\r\n&lt;uses-permission android:name=&quot;ANDROID.PERMISSION.READ_EXTERNAL_STORAGE&quot;/&gt;\r\n&lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; /&gt;\r\n```\r\n\r\nI know some of the methods are deprecated but I couldn&#39;t find any other tutorials on how to do this.[screenshot of the track-fragment / general UI][1]\r\nAny ideas on how I can fix this? \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Fgnp1.jpg","title":"App crashes when trying to use camera in Android App / Andoid studio","body":"<p>I'm doing a meal tracker app, where you can track what you eat and also upload images of your  meals to be stored on your phone and then used in the app to display your past meals.</p>\n<p>I'm currently trying to add the camera/upload image functionality and I was following along to a tutorial I found on YouTube, however, the app keeps crashing as soon as the &quot;tap to add photo&quot;-Button is clicked.</p>\n<p>This is the code inside the &quot;TrackFragment&quot; (where you enter the data for one meal):</p>\n<pre><code>(...)\npublic class TrackFragment extends Fragment{\n\n    final int CAMERA_REQ_CODE = 100;\n    ImageView imgCamera;\n\n    private final Context trackFragmentContext = this.getContext();\n\n(...)\n\n    \n    @Override\n    public void onViewCreated(@NonNull View view, @Nullable Bundle savedInstanceState) {\n        super.onViewCreated(view, savedInstanceState);\n\n\n        // TODO handling camera input to upload image\n        imgCamera = view.findViewById(R.id.imgCamera);\n        Button btnCamera = view.findViewById(R.id.btnCamera);\n\n        btnCamera.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n\n                // start intent (one of these causes crash)\n                Intent iCamera = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);\n                startActivityForResult(iCamera, CAMERA_REQ_CODE);\n            }\n        });\n\n    }\n\n    // show photo on track fragment below button\n    @Override\n    public void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\n        super.onActivityResult(requestCode, resultCode, data);\n\n        if(resultCode==RESULT_OK){\n            if(requestCode==CAMERA_REQ_CODE){\n                Bitmap img = (Bitmap) (data.getExtras().get(&quot;data&quot;));\n                imgCamera.setImageBitmap(img);\n            }\n        }\n    }\n}\n</code></pre>\n<p>According to the log it seems to be an issue regarding security because of the camera access, however I did include in the manifest.</p>\n<pre><code>&lt;uses-permission android:name=&quot;android.permission.CAMERA&quot; /&gt;\n&lt;uses-permission android:name=&quot;ANDROID.PERMISSION.READ_EXTERNAL_STORAGE&quot;/&gt;\n&lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; /&gt;\n</code></pre>\n<p>I know some of the methods are deprecated but I couldn't find any other tutorials on how to do this.<a href=\"https://i.stack.imgur.com/Fgnp1.jpg\" rel=\"nofollow noreferrer\">screenshot of the track-fragment / general UI</a>\nAny ideas on how I can fix this?</p>\n"},{"tags":["java","eclipse"],"answers":[{"tags":[],"owner":{"account_id":13796,"reputation":19353,"user_id":27905,"display_name":"nitind"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1489812479,"creation_date":1489812479,"answer_id":42870568,"question_id":42870395,"body_markdown":"You are importing a class named `Random` and *in* a class named `Random`. Change your own class&#39; name.","title":"solve this error &quot;The import java.util.Random conflicts with a type defined in the same file&quot;","body":"<p>You are importing a class named <code>Random</code> and <em>in</em> a class named <code>Random</code>. Change your own class' name.</p>\n"},{"tags":[],"owner":{"account_id":26065269,"reputation":1,"user_id":21373864,"display_name":"Roberto Gabriel Jim&#233;nez"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681091113,"creation_date":1681091113,"answer_id":75973767,"question_id":42870395,"body_markdown":"The problem is because your class has the same name as the function. Try changing the name of your class.\r\n\r\nChange Random in your class by RandomProgram by example.","title":"solve this error &quot;The import java.util.Random conflicts with a type defined in the same file&quot;","body":"<p>The problem is because your class has the same name as the function. Try changing the name of your class.</p>\n<p>Change Random in your class by RandomProgram by example.</p>\n"}],"owner":{"account_id":10486988,"reputation":9,"user_id":7730184,"display_name":"amarjit"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1739,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1681091113,"creation_date":1489810527,"question_id":42870395,"body_markdown":"    package amar;\r\n    import java.util.Random;\r\n\r\n    package amar;\r\n    import java.util.Random;\r\n    public class Random {\r\n    public static void main(String args[]){\r\n    \tRandom dice = new Random();\r\n    \tint number;\r\n    \tfor(int counter=1;counter&lt;=10;counter++)\r\n    \t{\r\n    \t\tnumber = 1+dice.nextInt(6);\r\n    \t\tSystem.out.println(number +&quot; &quot;);\r\n    \t}\r\n    }\r\n    }\r\n\r\nWhy am I getting an error while I am trying to run this in Eclipse Luna?\r\n","title":"solve this error &quot;The import java.util.Random conflicts with a type defined in the same file&quot;","body":"<pre><code>package amar;\nimport java.util.Random;\n\npackage amar;\nimport java.util.Random;\npublic class Random {\npublic static void main(String args[]){\n    Random dice = new Random();\n    int number;\n    for(int counter=1;counter&lt;=10;counter++)\n    {\n        number = 1+dice.nextInt(6);\n        System.out.println(number +\" \");\n    }\n}\n}\n</code></pre>\n\n<p>Why am I getting an error while I am trying to run this in Eclipse Luna?</p>\n"},{"tags":["java","dns","network-programming","jndi"],"comments":[{"owner":{"account_id":40721,"reputation":357298,"user_id":118068,"display_name":"Marc B"},"score":2,"creation_date":1435939354,"post_id":31210645,"comment_id":50423050,"body_markdown":"www.google.com is not a DNS server. it&#39;s a **WEB** server. if you want to use google&#39;s public dns, then the ip is 8.8.8.8","body":"www.google.com is not a DNS server. it&#39;s a <b>WEB</b> server. if you want to use google&#39;s public dns, then the ip is 8.8.8.8"},{"owner":{"account_id":4516986,"reputation":3493,"user_id":3671509,"accept_rate":54,"display_name":"Edijae Crusar"},"score":0,"creation_date":1435939681,"post_id":31210645,"comment_id":50423182,"body_markdown":"@MarcB  i have replaced www.google.com with 8.8.8.8 but i get the following exception:   **javax.naming.NameNotFoundException: DNS name not found [response code 3]; remaining name &#39;user&#39;**                                 even when i replace computer name **user** with another computer name.","body":"@MarcB  i have replaced www.google.com with 8.8.8.8 but i get the following exception:   <b>javax.naming.NameNotFoundException: DNS name not found [response code 3]; remaining name &#39;user&#39;</b>                                 even when i replace computer name <b>user</b> with another computer name."},{"owner":{"account_id":40721,"reputation":357298,"user_id":118068,"display_name":"Marc B"},"score":0,"creation_date":1435940030,"post_id":31210645,"comment_id":50423324,"body_markdown":"then perhaps `google-public-dns-a.google.com`, which is the reverse mapping of 8.8.8.8","body":"then perhaps <code>google-public-dns-a.google.com</code>, which is the reverse mapping of 8.8.8.8"},{"owner":{"account_id":4516986,"reputation":3493,"user_id":3671509,"accept_rate":54,"display_name":"Edijae Crusar"},"score":0,"creation_date":1435940642,"post_id":31210645,"comment_id":50423574,"body_markdown":"@MarcB  same same error. it seems like the statement cant find **google-public-dns-a.google.com**. have any other alternative bro?","body":"@MarcB  same same error. it seems like the statement cant find <b>google-public-dns-a.google.com</b>. have any other alternative bro?"},{"owner":{"account_id":4516986,"reputation":3493,"user_id":3671509,"accept_rate":54,"display_name":"Edijae Crusar"},"score":0,"creation_date":1435942128,"post_id":31210645,"comment_id":50424195,"body_markdown":"@MarcB i have changed to onther google dns which is **8.4.4.4** but i get another error **javax.naming.CommunicationException: DNS error [Root exception is java.net.SocketTimeoutException: Receive timed out]; remaining name &#39;user**","body":"@MarcB i have changed to onther google dns which is <b>8.4.4.4</b> but i get another error <b>javax.naming.CommunicationException: DNS error [Root exception is java.net.SocketTimeoutException: Receive timed out]; remaining name &#39;user</b>"},{"owner":{"account_id":40721,"reputation":357298,"user_id":118068,"display_name":"Marc B"},"score":0,"creation_date":1435942837,"post_id":31210645,"comment_id":50424496,"body_markdown":"`receive timeout`. check that your system can receive DNS traffic.","body":"<code>receive timeout</code>. check that your system can receive DNS traffic."},{"owner":{"account_id":4516986,"reputation":3493,"user_id":3671509,"accept_rate":54,"display_name":"Edijae Crusar"},"score":0,"creation_date":1436001219,"post_id":31210645,"comment_id":50438140,"body_markdown":"@MarcB still not working even after changing `com.sun.jndi.dns.timeout.initial` and `com.sun.jndi.dns.timeout.retries`. when i resolve a website, am getting the web server IP address. but when i try to resolve my colleague computer name who is also running on our intranet which is using 8.8.8.8 as DNS, that the time am getting the exception.","body":"@MarcB still not working even after changing <code>com.sun.jndi.dns.timeout.initial</code> and <code>com.sun.jndi.dns.timeout.retries</code>. when i resolve a website, am getting the web server IP address. but when i try to resolve my colleague computer name who is also running on our intranet which is using 8.8.8.8 as DNS, that the time am getting the exception."}],"answers":[{"comments":[{"owner":{"account_id":4516986,"reputation":3493,"user_id":3671509,"accept_rate":54,"display_name":"Edijae Crusar"},"score":0,"creation_date":1435999423,"post_id":31211741,"comment_id":50437721,"body_markdown":"The only thing i get is IP address of domains. e.g **www.yahoo.com**. **BUT** what i want is IP address of my friend&#39;s computer which is running on a LAN. not the IP address of a certain webserver. thats what i&#39;ve been trying barthel.","body":"The only thing i get is IP address of domains. e.g <b>www.yahoo.com</b>. <b>BUT</b> what i want is IP address of my friend&#39;s computer which is running on a LAN. not the IP address of a certain webserver. thats what i&#39;ve been trying barthel."},{"owner":{"account_id":6389360,"reputation":865,"user_id":4956096,"display_name":"barthel"},"score":0,"creation_date":1436000058,"post_id":31211741,"comment_id":50437866,"body_markdown":"Do you use a DNS server in your LAN or are the IP addresses &#39;hardcoded&#39;? The error message in your question show me, that you would like ask Google for the IP of the host `clientname`. Use your internal DNS server instead if any.","body":"Do you use a DNS server in your LAN or are the IP addresses &#39;hardcoded&#39;? The error message in your question show me, that you would like ask Google for the IP of the host <code>clientname</code>. Use your internal DNS server instead if any."},{"owner":{"account_id":4516986,"reputation":3493,"user_id":3671509,"accept_rate":54,"display_name":"Edijae Crusar"},"score":0,"creation_date":1436000806,"post_id":31211741,"comment_id":50438037,"body_markdown":"our internal DNS server IP address is **8.8.8.8** which is the same as **google-public-dns-a.google.com**. when i resolve yahoo.com, am getting it IP address but when i resolve my collegue laptop am getting the error ! e.g resolving computer name  **mycomp-PC**.","body":"our internal DNS server IP address is <b>8.8.8.8</b> which is the same as <b>google-public-dns-a.google.com</b>. when i resolve yahoo.com, am getting it IP address but when i resolve my collegue laptop am getting the error ! e.g resolving computer name  <b>mycomp-PC</b>."},{"owner":{"account_id":6389360,"reputation":865,"user_id":4956096,"display_name":"barthel"},"score":0,"creation_date":1436001056,"post_id":31211741,"comment_id":50438106,"body_markdown":"**8.8.8.8** is the DNS server of **Google**. But `mycomp-PC` isn&#39;t registered in Googles DNS. You have to provide your own DNS or use the DNS provided by your internet service provider.","body":"<b>8.8.8.8</b> is the DNS server of <b>Google</b>. But <code>mycomp-PC</code> isn&#39;t registered in Googles DNS. You have to provide your own DNS or use the DNS provided by your internet service provider."},{"owner":{"account_id":4516986,"reputation":3493,"user_id":3671509,"accept_rate":54,"display_name":"Edijae Crusar"},"score":0,"creation_date":1436002995,"post_id":31211741,"comment_id":50438647,"body_markdown":"I&#39;ve tried using my ISP DNS but all in vain. i think setting my own DNS seems to be the last option. but before that, do you think a router can be playing a part in this exception? since we do have a router and what i know, it can prevent a direct connection from a  computer(DNS server)  on a WAN to  a computer on a LAN. you know, something of that sort.","body":"I&#39;ve tried using my ISP DNS but all in vain. i think setting my own DNS seems to be the last option. but before that, do you think a router can be playing a part in this exception? since we do have a router and what i know, it can prevent a direct connection from a  computer(DNS server)  on a WAN to  a computer on a LAN. you know, something of that sort."},{"owner":{"account_id":6389360,"reputation":865,"user_id":4956096,"display_name":"barthel"},"score":0,"creation_date":1436003366,"post_id":31211741,"comment_id":50438752,"body_markdown":"Do you use DHCP provided by your router (dsl/cable modem)? The most dsl/cable modem with router are providing a DNS server instead. Often it is configured as the standard network gateway on your computer. But if you don&#39;t know what I&#39;m talking about, please give my other answer a try.","body":"Do you use DHCP provided by your router (dsl/cable modem)? The most dsl/cable modem with router are providing a DNS server instead. Often it is configured as the standard network gateway on your computer. But if you don&#39;t know what I&#39;m talking about, please give my other answer a try."},{"owner":{"account_id":4516986,"reputation":3493,"user_id":3671509,"accept_rate":54,"display_name":"Edijae Crusar"},"score":0,"creation_date":1436005422,"post_id":31211741,"comment_id":50439336,"body_markdown":"i know what you are talking about. but all have failed even after providing that DHCP IP address (which is router&#39;s IP). but your other answer worked. don&#39;t know why i couldn&#39;t think that for the last 5 days!","body":"i know what you are talking about. but all have failed even after providing that DHCP IP address (which is router&#39;s IP). but your other answer worked. don&#39;t know why i couldn&#39;t think that for the last 5 days!"}],"tags":[],"owner":{"account_id":6389360,"reputation":865,"user_id":4956096,"display_name":"barthel"},"comment_count":7,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1435944903,"creation_date":1435944083,"answer_id":31211741,"question_id":31210645,"body_markdown":"Did you read http://docs.oracle.com/javase/7/docs/technotes/guides/jndi/jndi-dns.html ?\n\nIt seams like:\n\n    Hashtable env = new Hashtable();\n    env.put(&quot;java.naming.factory.initial&quot;, &quot;com.sun.jndi.dns.DnsContextFactory&quot;);\n    env.put(&quot;java.naming.provider.url&quot;,    &quot;dns://google-public-dns-a.google.com&quot;);\n\n    DirContext ictx = new InitialDirContext(env);\n    Attributes attrs1 = ictx.getAttributes(&quot;clientname&quot;, new String[] {&quot;A&quot;});\n\nis what you want.\n\nThe timeout values are configurable either:\n\n&gt; env.put(&quot;com.sun.jndi.dns.timeout.initial&quot;, &quot;2000&quot;);\n&gt;\n&gt; env.put(&quot;com.sun.jndi.dns.timeout.retries&quot;, &quot;3&quot;);\n\nUse FQDN (full qualified domain name) if you will use a public DNS server instead of `clientname` like shown in your Exception. Google doesn&#39;t hopefully know anything about `clientname` ;-).","title":"How to resolve a remote computer name to get its IP address in Java?","body":"<p>Did you read <a href=\"http://docs.oracle.com/javase/7/docs/technotes/guides/jndi/jndi-dns.html\" rel=\"nofollow noreferrer\">http://docs.oracle.com/javase/7/docs/technotes/guides/jndi/jndi-dns.html</a> ?</p>\n<p>It seams like:</p>\n<pre><code>Hashtable env = new Hashtable();\nenv.put(&quot;java.naming.factory.initial&quot;, &quot;com.sun.jndi.dns.DnsContextFactory&quot;);\nenv.put(&quot;java.naming.provider.url&quot;,    &quot;dns://google-public-dns-a.google.com&quot;);\n\nDirContext ictx = new InitialDirContext(env);\nAttributes attrs1 = ictx.getAttributes(&quot;clientname&quot;, new String[] {&quot;A&quot;});\n</code></pre>\n<p>is what you want.</p>\n<p>The timeout values are configurable either:</p>\n<blockquote>\n<p>env.put(&quot;com.sun.jndi.dns.timeout.initial&quot;, &quot;2000&quot;);</p>\n<p>env.put(&quot;com.sun.jndi.dns.timeout.retries&quot;, &quot;3&quot;);</p>\n</blockquote>\n<p>Use FQDN (full qualified domain name) if you will use a public DNS server instead of <code>clientname</code> like shown in your Exception. Google doesn't hopefully know anything about <code>clientname</code> ;-).</p>\n"},{"comments":[{"owner":{"account_id":4516986,"reputation":3493,"user_id":3671509,"accept_rate":54,"display_name":"Edijae Crusar"},"score":0,"creation_date":1436004862,"post_id":31218999,"comment_id":50439184,"body_markdown":"**That what i was looking for !**  i thought `inetAddress.getHostAddress()` can only retrive IP address of the local machine men.  problem solved. mission 101 accomplished.","body":"<b>That what i was looking for !</b>  i thought <code>inetAddress.getHostAddress()</code> can only retrive IP address of the local machine men.  problem solved. mission 101 accomplished."}],"tags":[],"owner":{"account_id":6389360,"reputation":865,"user_id":4956096,"display_name":"barthel"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1436002836,"creation_date":1436001473,"answer_id":31218999,"question_id":31210645,"body_markdown":"Use of `JNDI` is only useful if you need specific DNS attributes/entries.\n\nMaybe the following is more suitable for you:\n\n    final InetAddress inetAddress = InetAddress.getByName(&quot;clientname&quot;);\n    final String ipAddress = inetAddress.getHostAddress();\n\nThe local DNS infrastructure - like the OS it does - will be use and you don&#39;t need to provide an DNS server by yourself.\n\nhttp://docs.oracle.com/javase/7/docs/api/java/net/InetAddress.html\n\nhttp://docs.oracle.com/javase/7/docs/api/java/net/InetAddress.html#getByName%28java.lang.String%29\n\n&gt; Determines the IP address of a host, given the host&#39;s name.\n&gt;\n&gt; The host name can either be a machine name, such as &quot;java.sun.com&quot;, or a textual representation of its IP address. If a literal IP address is supplied, only the validity of the address format is checked.\n&gt;\n&gt; For host specified in literal IPv6 address, either the form defined in RFC 2732 or the literal IPv6 address format defined in RFC 2373 is accepted. IPv6 scoped addresses are also supported. ","title":"How to resolve a remote computer name to get its IP address in Java?","body":"<p>Use of <code>JNDI</code> is only useful if you need specific DNS attributes/entries.</p>\n<p>Maybe the following is more suitable for you:</p>\n<pre><code>final InetAddress inetAddress = InetAddress.getByName(&quot;clientname&quot;);\nfinal String ipAddress = inetAddress.getHostAddress();\n</code></pre>\n<p>The local DNS infrastructure - like the OS it does - will be use and you don't need to provide an DNS server by yourself.</p>\n<p><a href=\"http://docs.oracle.com/javase/7/docs/api/java/net/InetAddress.html\" rel=\"nofollow noreferrer\">http://docs.oracle.com/javase/7/docs/api/java/net/InetAddress.html</a></p>\n<p><a href=\"http://docs.oracle.com/javase/7/docs/api/java/net/InetAddress.html#getByName%28java.lang.String%29\" rel=\"nofollow noreferrer\">http://docs.oracle.com/javase/7/docs/api/java/net/InetAddress.html#getByName%28java.lang.String%29</a></p>\n<blockquote>\n<p>Determines the IP address of a host, given the host's name.</p>\n<p>The host name can either be a machine name, such as &quot;java.sun.com&quot;, or a textual representation of its IP address. If a literal IP address is supplied, only the validity of the address format is checked.</p>\n<p>For host specified in literal IPv6 address, either the form defined in RFC 2732 or the literal IPv6 address format defined in RFC 2373 is accepted. IPv6 scoped addresses are also supported.</p>\n</blockquote>\n"}],"owner":{"account_id":4516986,"reputation":3493,"user_id":3671509,"accept_rate":54,"display_name":"Edijae Crusar"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2895,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":31218999,"answer_count":2,"score":1,"last_activity_date":1681090524,"creation_date":1435939128,"question_id":31210645,"body_markdown":"I&#39;m trying to come up with a program that send packets from  computer **A** to computer **B**. Both computers must have a copy of my Java program. This  require one to enter the name of the  remote computer **B** in a `JTextField` object, enter the message in a `JTextArea` object and then click the button send.\r\n\r\nMy program should be able to resolve the given computer name to IP address so to include the IP address as a parameter in my `DatagramPacket` constuctor.\r\n\r\nI have tried using the below method to do the resolving, but I get a `javax.naming.CommunicationException`:\r\n    \r\n    String clientname = &quot;user&quot;;\r\n    Hashtable&lt;String,Object&gt; env = new Hashtable&lt;String,Object&gt;();\r\n    env.put(Context.INITIAL_CONTEXT_FACTORY, &quot;com.sun.jndi.dns.DnsContextFactory&quot;);\r\n    env.put(Context.PROVIDER_URL, &quot;dns://www.google.com&quot;);\r\n    DirContext con = new InitialDirContext(env);\r\n    Object obj = con.lookup(&quot;clientname&quot;);\r\n\r\n#### Exception thrown:\r\n\r\n    javax.naming.CommunicationException: DNS error [Root exception is java.net.SocketTimeoutException: Receive timed out]; remaining name &#39;user&#39;\r\n\tat com.sun.jndi.dns.DnsClient.query(DnsClient.java:300)\r\n\tat com.sun.jndi.dns.Resolver.query(Resolver.java:81)\r\n\tat com.sun.jndi.dns.DnsContext.c_lookup(DnsContext.java:286)\r\n\tat com.sun.jndi.toolkit.ctx.ComponentContext.p_lookup(ComponentContext.java:544)\r\n\tat com.sun.jndi.toolkit.ctx.PartialCompositeContext.lookup(PartialCompositeContext.java:177)\r\n\tat com.sun.jndi.toolkit.ctx.PartialCompositeContext.lookup(PartialCompositeContext.java:166)\r\n\tat javax.naming.InitialContext.lookup(InitialContext.java:411)\r\n    Caused by: java.net.SocketTimeoutException: Receive timed out\r\n\tat java.net.DualStackPlainDatagramSocketImpl.socketReceiveOrPeekData(Native Method)\r\n\tat java.net.DualStackPlainDatagramSocketImpl.receive0(DualStackPlainDatagramSocketImpl.java:121)\r\n\tat java.net.AbstractPlainDatagramSocketImpl.receive(AbstractPlainDatagramSocketImpl.java:145)\r\n\tat java.net.DatagramSocket.receive(DatagramSocket.java:786)\r\n\tat com.sun.jndi.dns.DnsClient.doUdpQuery(DnsClient.java:411)\r\n\tat com.sun.jndi.dns.DnsClient.query(DnsClient.java:203)\r\n\t... 7 more\r\n\r\n## Question\r\nHow can I achieve my goal, because it seems to me like Java DNS service provider can only resolve *domain names* and not individual computer names?\r\n\r\nI&#39;ve been struggling with this for 3 days.  \r\nAny help is appreciated.\r\n    ","title":"How to resolve a remote computer name to get its IP address in Java?","body":"<p>I'm trying to come up with a program that send packets from  computer <strong>A</strong> to computer <strong>B</strong>. Both computers must have a copy of my Java program. This  require one to enter the name of the  remote computer <strong>B</strong> in a <code>JTextField</code> object, enter the message in a <code>JTextArea</code> object and then click the button send.</p>\n<p>My program should be able to resolve the given computer name to IP address so to include the IP address as a parameter in my <code>DatagramPacket</code> constuctor.</p>\n<p>I have tried using the below method to do the resolving, but I get a <code>javax.naming.CommunicationException</code>:</p>\n<pre><code>String clientname = &quot;user&quot;;\nHashtable&lt;String,Object&gt; env = new Hashtable&lt;String,Object&gt;();\nenv.put(Context.INITIAL_CONTEXT_FACTORY, &quot;com.sun.jndi.dns.DnsContextFactory&quot;);\nenv.put(Context.PROVIDER_URL, &quot;dns://www.google.com&quot;);\nDirContext con = new InitialDirContext(env);\nObject obj = con.lookup(&quot;clientname&quot;);\n</code></pre>\n<h4>Exception thrown:</h4>\n<pre><code>javax.naming.CommunicationException: DNS error [Root exception is java.net.SocketTimeoutException: Receive timed out]; remaining name 'user'\nat com.sun.jndi.dns.DnsClient.query(DnsClient.java:300)\nat com.sun.jndi.dns.Resolver.query(Resolver.java:81)\nat com.sun.jndi.dns.DnsContext.c_lookup(DnsContext.java:286)\nat com.sun.jndi.toolkit.ctx.ComponentContext.p_lookup(ComponentContext.java:544)\nat com.sun.jndi.toolkit.ctx.PartialCompositeContext.lookup(PartialCompositeContext.java:177)\nat com.sun.jndi.toolkit.ctx.PartialCompositeContext.lookup(PartialCompositeContext.java:166)\nat javax.naming.InitialContext.lookup(InitialContext.java:411)\nCaused by: java.net.SocketTimeoutException: Receive timed out\nat java.net.DualStackPlainDatagramSocketImpl.socketReceiveOrPeekData(Native Method)\nat java.net.DualStackPlainDatagramSocketImpl.receive0(DualStackPlainDatagramSocketImpl.java:121)\nat java.net.AbstractPlainDatagramSocketImpl.receive(AbstractPlainDatagramSocketImpl.java:145)\nat java.net.DatagramSocket.receive(DatagramSocket.java:786)\nat com.sun.jndi.dns.DnsClient.doUdpQuery(DnsClient.java:411)\nat com.sun.jndi.dns.DnsClient.query(DnsClient.java:203)\n... 7 more\n</code></pre>\n<h2>Question</h2>\n<p>How can I achieve my goal, because it seems to me like Java DNS service provider can only resolve <em>domain names</em> and not individual computer names?</p>\n<p>I've been struggling with this for 3 days.<br />\nAny help is appreciated.</p>\n"},{"tags":["java","android","xml","navbar"],"comments":[{"owner":{"account_id":19044113,"reputation":704,"user_id":13903584,"display_name":"Muhammad Asad"},"score":0,"creation_date":1681107483,"post_id":75973666,"comment_id":133999328,"body_markdown":"you can give the working idea from this: https://github.com/ittianyu/BottomNavigationViewEx","body":"you can give the working idea from this: <a href=\"https://github.com/ittianyu/BottomNavigationViewEx\" rel=\"nofollow noreferrer\">github.com/ittianyu/BottomNavigationViewEx</a>"},{"owner":{"account_id":72095,"reputation":18817,"user_id":208273,"display_name":"Ryan M"},"score":0,"creation_date":1681348096,"post_id":75973666,"comment_id":134043366,"body_markdown":"Instead of posting code, error messages, data, or other text as images or links, please [edit] your post to copy/paste or type the actual text directly into the post (for code, use a [code block](/editing-help#code)). [Text in images cannot be copied to reproduce the issue, and error messages in images cannot be searched](//meta.stackoverflow.com/a/285557/208273). Links may become invalid if the linked site changes.  If your code is too long to fit in the post, we have tips on [how to create a minimal, reproducible example](//stackoverflow.com/help/mcve).","body":"Instead of posting code, error messages, data, or other text as images or links, please <a href=\"https://stackoverflow.com/posts/75973666/edit\">edit</a> your post to copy/paste or type the actual text directly into the post (for code, use a <a href=\"/editing-help#code\">code block</a>). <a href=\"//meta.stackoverflow.com/a/285557/208273\">Text in images cannot be copied to reproduce the issue, and error messages in images cannot be searched</a>. Links may become invalid if the linked site changes.  If your code is too long to fit in the post, we have tips on <a href=\"//stackoverflow.com/help/mcve\">how to create a minimal, reproducible example</a>."}],"owner":{"account_id":27924374,"reputation":19,"user_id":21323775,"display_name":"devfreeguy"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1681348154,"answer_count":0,"score":1,"last_activity_date":1681089116,"creation_date":1681089116,"question_id":75973666,"body_markdown":"How can I disable a single navigation bar item from clicking, rippling or focusing when touched or pressed (I use java)\r\n\r\n[![How can disable or stop the item at the middle to stop focusing or pressing](https://i.stack.imgur.com/hCliX.jpg)](https://i.stack.imgur.com/hCliX.jpg)\r\n\r\nMy [![XML](https://i.stack.imgur.com/kgYly.jpg)](https://i.stack.imgur.com/kgYly.jpg) code is here","title":"How can I disable a single navigation bar item in android studio, java","body":"<p>How can I disable a single navigation bar item from clicking, rippling or focusing when touched or pressed (I use java)</p>\n<p><a href=\"https://i.stack.imgur.com/hCliX.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hCliX.jpg\" alt=\"How can disable or stop the item at the middle to stop focusing or pressing\" /></a></p>\n<p>My <a href=\"https://i.stack.imgur.com/kgYly.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kgYly.jpg\" alt=\"XML\" /></a> code is here</p>\n"},{"tags":["java","android","material-design","androidx"],"answers":[{"tags":[],"owner":{"account_id":5054372,"reputation":183,"user_id":4058038,"display_name":"Timur Ugurlu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681087740,"creation_date":1681087740,"answer_id":75973615,"question_id":75973443,"body_markdown":"I just solved it:\r\n\r\nI have a base application theme where I had added \r\n\r\n```&lt;item name=&quot;preferenceTheme&quot;&gt;@style/AppPreferenceTheme&lt;/item&gt;```\r\n\r\nThis was the problem. What I made now is that deleted this line and I added the following to my Preference Fragment inside the onCreateView \r\n\r\n``` activity.setTheme(R.style.AppPreferenceTheme); ```","title":"SwitchPreference not switching visibly (no color switch, no animation) API &gt;=23","body":"<p>I just solved it:</p>\n<p>I have a base application theme where I had added</p>\n<p><code>&lt;item name=&quot;preferenceTheme&quot;&gt;@style/AppPreferenceTheme&lt;/item&gt;</code></p>\n<p>This was the problem. What I made now is that deleted this line and I added the following to my Preference Fragment inside the onCreateView</p>\n<p><code>activity.setTheme(R.style.AppPreferenceTheme);</code></p>\n"}],"owner":{"account_id":5054372,"reputation":183,"user_id":4058038,"display_name":"Timur Ugurlu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681087740,"creation_date":1681084017,"question_id":75973443,"body_markdown":"So I recently made a small update for my app and users on older APIs (equal lower 23) complained that the PreferenceSwitch work for the logic but there is no visible sign it was switched. API over 24 is working fine.\r\n\r\nEven if I preset the Switches and reload the Fragment the switches are not set visibly.\r\n\r\nI would like to fix this but I have no clue why this bug appears.\r\n\r\nI am using takisoft preferencex and com.takisoft.preferencex.PreferenceFragmentCompat\r\nBut a quick change to the official one didnt work, same behavior\r\n\r\nI searched online and on github but I couldnt come up with a solution.\r\n\r\nEdit: I just installed my old version on an Emulator running API 23 and the switches are still not working.\r\n\r\nA small sample of my code:\r\n\r\n    vib.setOnPreferenceChangeListener(new Preference.OnPreferenceChangeListener() {\r\n\r\n            @Override\r\n            public boolean onPreferenceChange(Preference preference, Object newValue) {\r\n               \r\n                    if (vibrate) {\r\n                        SharedPreferences.Editor editor = sharedPref.edit();\r\n                        editor.putBoolean(&quot;vibrate&quot;, false);\r\n                        editor.commit();\r\n                        editor.apply();\r\n                        vibrate = sharedPref.getBoolean(&quot;vibrate&quot;, false);\r\n                        vib.setChecked(vibrate);\r\n\r\n\r\n                    } else {\r\n\r\n                        SharedPreferences.Editor editor = sharedPref.edit();\r\n                        editor.putBoolean(&quot;vibrate&quot;, true);\r\n                        editor.commit();\r\n                        editor.apply();\r\n                        vibrate = sharedPref.getBoolean(&quot;vibrate&quot;, false);\r\n                        vib.setChecked(vibrate);\r\n\r\n                    }\r\n\r\n                return false;\r\n            }\r\n        });","title":"SwitchPreference not switching visibly (no color switch, no animation) API &gt;=23","body":"<p>So I recently made a small update for my app and users on older APIs (equal lower 23) complained that the PreferenceSwitch work for the logic but there is no visible sign it was switched. API over 24 is working fine.</p>\n<p>Even if I preset the Switches and reload the Fragment the switches are not set visibly.</p>\n<p>I would like to fix this but I have no clue why this bug appears.</p>\n<p>I am using takisoft preferencex and com.takisoft.preferencex.PreferenceFragmentCompat\nBut a quick change to the official one didnt work, same behavior</p>\n<p>I searched online and on github but I couldnt come up with a solution.</p>\n<p>Edit: I just installed my old version on an Emulator running API 23 and the switches are still not working.</p>\n<p>A small sample of my code:</p>\n<pre><code>vib.setOnPreferenceChangeListener(new Preference.OnPreferenceChangeListener() {\n\n        @Override\n        public boolean onPreferenceChange(Preference preference, Object newValue) {\n           \n                if (vibrate) {\n                    SharedPreferences.Editor editor = sharedPref.edit();\n                    editor.putBoolean(&quot;vibrate&quot;, false);\n                    editor.commit();\n                    editor.apply();\n                    vibrate = sharedPref.getBoolean(&quot;vibrate&quot;, false);\n                    vib.setChecked(vibrate);\n\n\n                } else {\n\n                    SharedPreferences.Editor editor = sharedPref.edit();\n                    editor.putBoolean(&quot;vibrate&quot;, true);\n                    editor.commit();\n                    editor.apply();\n                    vibrate = sharedPref.getBoolean(&quot;vibrate&quot;, false);\n                    vib.setChecked(vibrate);\n\n                }\n\n            return false;\n        }\n    });\n</code></pre>\n"},{"tags":["java","spring-mvc"],"comments":[{"owner":{"account_id":11568110,"reputation":37,"user_id":8475665,"display_name":"aeromic"},"score":0,"creation_date":1502940745,"post_id":45726148,"comment_id":78409820,"body_markdown":"I am using boot 1.5.6 ,thx","body":"I am using boot 1.5.6 ,thx"},{"owner":{"account_id":195331,"reputation":275428,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":0,"creation_date":1502945012,"post_id":45726148,"comment_id":78410831,"body_markdown":"What is this `PathVariableMissingException` you speak of? Why should that be thrown?","body":"What is this <code>PathVariableMissingException</code> you speak of? Why should that be thrown?"},{"owner":{"account_id":11568110,"reputation":37,"user_id":8475665,"display_name":"aeromic"},"score":0,"creation_date":1502955235,"post_id":45726148,"comment_id":78415788,"body_markdown":"sorry for typo , MissingPathVariableException is a Spring build-in exception , &quot;typically that means the URI template does not match the path variable name declared on the method parameter.&quot;(from Spring original comment).","body":"sorry for typo , MissingPathVariableException is a Spring build-in exception , &quot;typically that means the URI template does not match the path variable name declared on the method parameter.&quot;(from Spring original comment)."},{"owner":{"account_id":195331,"reputation":275428,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":1,"creation_date":1502982254,"post_id":45726148,"comment_id":78435139,"body_markdown":"`MissingPathVariableException` is thrown if you have a `@Path` variable with name `example`, but no `{example}` uri variable in the `@RequestMapping` path. _Typically that means the URI template does not match the path variable name declared on the method parameter._","body":"<code>MissingPathVariableException</code> is thrown if you have a <code>@Path</code> variable with name <code>example</code>, but no <code>{example}</code> uri variable in the <code>@RequestMapping</code> path. <i>Typically that means the URI template does not match the path variable name declared on the method parameter.</i>"},{"owner":{"account_id":11568110,"reputation":37,"user_id":8475665,"display_name":"aeromic"},"score":0,"creation_date":1503040620,"post_id":45726148,"comment_id":78458611,"body_markdown":"Oh , this is the point I really don&#39;t know. Let me try it .","body":"Oh , this is the point I really don&#39;t know. Let me try it ."},{"owner":{"account_id":11568110,"reputation":37,"user_id":8475665,"display_name":"aeromic"},"score":0,"creation_date":1503041256,"post_id":45726148,"comment_id":78458980,"body_markdown":"yes,finally figure it out , thx","body":"yes,finally figure it out , thx"}],"answers":[{"comments":[{"owner":{"account_id":11568110,"reputation":37,"user_id":8475665,"display_name":"aeromic"},"score":0,"creation_date":1502941231,"post_id":45726194,"comment_id":78409927,"body_markdown":"that is no problem, the problem is how to catch the exception path variable is missing to return friendly message to client?","body":"that is no problem, the problem is how to catch the exception path variable is missing to return friendly message to client?"},{"owner":{"account_id":3819371,"reputation":898,"user_id":3639398,"display_name":"raksa"},"score":0,"creation_date":1502941682,"post_id":45726194,"comment_id":78410043,"body_markdown":"so you should search for how to customize spring-boot 404 page","body":"so you should search for how to customize spring-boot 404 page"},{"owner":{"account_id":11568110,"reputation":37,"user_id":8475665,"display_name":"aeromic"},"score":0,"creation_date":1502941814,"post_id":45726194,"comment_id":78410074,"body_markdown":"no ,  hope to catch path variable missing exception , then return some message to client, thx","body":"no ,  hope to catch path variable missing exception , then return some message to client, thx"},{"owner":{"account_id":2143546,"reputation":166,"user_id":1901693,"display_name":"Aditya Yada"},"score":0,"creation_date":1599153305,"post_id":45726194,"comment_id":112693101,"body_markdown":"this answer does not deserve minus merits . Also this answer should be just a comment which describes the issue but not answering the issue .","body":"this answer does not deserve minus merits . Also this answer should be just a comment which describes the issue but not answering the issue ."}],"tags":[],"owner":{"account_id":3819371,"reputation":898,"user_id":3639398,"display_name":"raksa"},"comment_count":4,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1502940910,"creation_date":1502940910,"answer_id":45726194,"question_id":45726148,"body_markdown":"base on your url mapping: you can&#39;t leave it blank like &quot;**///**&quot; it must be &quot;**/number/number/**&quot;\r\n\r\ni.e **http://localhost:8080/channel/getId/0/0/**","title":"Spring Boot some path variable are missing but return 404","body":"<p>base on your url mapping: you can't leave it blank like \"<strong>///</strong>\" it must be \"<strong>/number/number/</strong>\"</p>\n\n<p>i.e <strong><a href=\"http://localhost:8080/channel/getId/0/0/\" rel=\"nofollow noreferrer\">http://localhost:8080/channel/getId/0/0/</a></strong></p>\n"},{"comments":[{"owner":{"account_id":1502497,"reputation":2147,"user_id":1406702,"accept_rate":50,"display_name":"happy_marmoset"},"score":1,"creation_date":1618115971,"post_id":45726995,"comment_id":118501990,"body_markdown":"This is actually proper answer I think. Is this the only way to convert MissingPathVariableException into 4XX error? Why Spring Boot doesn&#39;t do this automatically when @PathVariable is entity?","body":"This is actually proper answer I think. Is this the only way to convert MissingPathVariableException into 4XX error? Why Spring Boot doesn&#39;t do this automatically when @PathVariable is entity?"},{"owner":{"account_id":2411630,"reputation":72,"user_id":2106569,"display_name":"Viki Cullen"},"score":0,"creation_date":1634973548,"post_id":45726995,"comment_id":123175323,"body_markdown":"This is not working for Path variable missing :(","body":"This is not working for Path variable missing :("}],"tags":[],"owner":{"account_id":2292980,"reputation":84,"user_id":2015226,"display_name":"cjcrobin"},"comment_count":2,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1502946537,"creation_date":1502946537,"answer_id":45726995,"question_id":45726148,"body_markdown":"I guess what you are asking for is to customized the exception. Then what you need is to provide a handler, you can just simply extend abstract class ResponseEntityExceptionHandler and override the method handleMissingPathVariable.\r\n\r\nOne example:\r\n\r\n    @Override\r\n    protected ResponseEntity&lt;Object&gt; handleMissingPathVariable(MissingPathVariableException ex, HttpHeaders headers,\r\n            HttpStatus status, WebRequest request) {\r\n    \r\n        String error = ex.getParameter() + &quot; parameter is missing&quot;;\r\n        ErrorMessageHandler error =message(HttpStatus.BAD_REQUEST, ex.toString(), error) ;\r\n        return new ResponseEntity&lt;Object&gt;(error, new HttpHeaders(), HttpStatus.BAD_REQUEST);\r\n    \r\n    }","title":"Spring Boot some path variable are missing but return 404","body":"<p>I guess what you are asking for is to customized the exception. Then what you need is to provide a handler, you can just simply extend abstract class ResponseEntityExceptionHandler and override the method handleMissingPathVariable.</p>\n\n<p>One example:</p>\n\n<pre><code>@Override\nprotected ResponseEntity&lt;Object&gt; handleMissingPathVariable(MissingPathVariableException ex, HttpHeaders headers,\n        HttpStatus status, WebRequest request) {\n\n    String error = ex.getParameter() + \" parameter is missing\";\n    ErrorMessageHandler error =message(HttpStatus.BAD_REQUEST, ex.toString(), error) ;\n    return new ResponseEntity&lt;Object&gt;(error, new HttpHeaders(), HttpStatus.BAD_REQUEST);\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1502497,"reputation":2147,"user_id":1406702,"accept_rate":50,"display_name":"happy_marmoset"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1618116920,"creation_date":1618116920,"answer_id":67041591,"question_id":45726148,"body_markdown":"You can use `@PathVariable(required = false)` and handle the logic manually:\r\n\r\n```\r\n@RestController\r\n@RequestMapping(&quot;/channel&quot;)\r\npublic class ChannelController \r\n{\r\n    @GetMapping(&quot;/getId/{participantId}/{walletType}&quot;)\r\n    Map&lt;String,Object&gt; getChannelId(@PathVariable(required = false) Integer participantId , @PathVariable(required = false) Integer walletType) {\r\n\r\n        if (participantId == null) {\r\n            throw new ResponseStatusException(HttpStatus.BAD_REQUEST, &quot;Participant is required&quot;);\r\n        }\r\n\r\n        if (walletType == null) {\r\n            throw new ResponseStatusException(HttpStatus.BAD_REQUEST, &quot;Wallet type is required&quot;);\r\n        }\r\n\r\n        return demoDAOImpl.getChannel(participantId, walletType);\r\n    }\r\n}\r\n```","title":"Spring Boot some path variable are missing but return 404","body":"<p>You can use <code>@PathVariable(required = false)</code> and handle the logic manually:</p>\n<pre><code>@RestController\n@RequestMapping(&quot;/channel&quot;)\npublic class ChannelController \n{\n    @GetMapping(&quot;/getId/{participantId}/{walletType}&quot;)\n    Map&lt;String,Object&gt; getChannelId(@PathVariable(required = false) Integer participantId , @PathVariable(required = false) Integer walletType) {\n\n        if (participantId == null) {\n            throw new ResponseStatusException(HttpStatus.BAD_REQUEST, &quot;Participant is required&quot;);\n        }\n\n        if (walletType == null) {\n            throw new ResponseStatusException(HttpStatus.BAD_REQUEST, &quot;Wallet type is required&quot;);\n        }\n\n        return demoDAOImpl.getChannel(participantId, walletType);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9507708,"reputation":2869,"user_id":7066647,"display_name":"dbaltor"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681084119,"creation_date":1681084119,"answer_id":75973449,"question_id":45726148,"body_markdown":"For a `MissingPathVariableException` to be thrown, the request has to match a request mapping. To make your controller to handle the `http://localhost:8080/channel/getId///` request, you would need to declare your **GetMapping** annotation as follows:\r\n```\r\n@GetMapping(value = {&quot;getId///&quot;, &quot;/getId/{participantId}/{walletType}&quot;})","title":"Spring Boot some path variable are missing but return 404","body":"<p>For a <code>MissingPathVariableException</code> to be thrown, the request has to match a request mapping. To make your controller to handle the <code>http://localhost:8080/channel/getId///</code> request, you would need to declare your <strong>GetMapping</strong> annotation as follows:</p>\n<pre><code>@GetMapping(value = {&quot;getId///&quot;, &quot;/getId/{participantId}/{walletType}&quot;})\n</code></pre>\n"}],"owner":{"account_id":11568110,"reputation":37,"user_id":8475665,"display_name":"aeromic"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5177,"favorite_count":0,"down_vote_count":2,"up_vote_count":4,"answer_count":4,"score":2,"last_activity_date":1681084119,"creation_date":1502940495,"question_id":45726148,"body_markdown":"I am a beginner of boot . Code as below \r\n\r\n    @RestController\r\n    @RequestMapping(&quot;/channel&quot;)\r\n    \r\n    public class ChannelController \r\n\t{\r\n    \t@GetMapping(&quot;/getId/{participantId}/{walletType}&quot;)\r\n    \tMap&lt;String,Object&gt; getChannelId(@PathVariable Integer participantId , @PathVariable Integer walletType ){\r\n    \t\treturn demoDAOImpl.getChannel(participantId, walletType);\r\n    \t}\r\n    }\r\n\r\nWhen I hit `http://localhost:8080/channel/getId///`, it returns the default Whitelabel Error Page, which states \r\n\r\n&gt; There was an unexpected error (type=Not Found, status=404).\r\n\r\nHere I am confused. I thought Spring MVC should throw a `MissingPathVariableException`. Why is it responding with a 404 response, resource not found?\r\n\r\n","title":"Spring Boot some path variable are missing but return 404","body":"<p>I am a beginner of boot . Code as below </p>\n\n<pre><code>@RestController\n@RequestMapping(\"/channel\")\n\npublic class ChannelController \n{\n    @GetMapping(\"/getId/{participantId}/{walletType}\")\n    Map&lt;String,Object&gt; getChannelId(@PathVariable Integer participantId , @PathVariable Integer walletType ){\n        return demoDAOImpl.getChannel(participantId, walletType);\n    }\n}\n</code></pre>\n\n<p>When I hit <code>http://localhost:8080/channel/getId///</code>, it returns the default Whitelabel Error Page, which states </p>\n\n<blockquote>\n  <p>There was an unexpected error (type=Not Found, status=404).</p>\n</blockquote>\n\n<p>Here I am confused. I thought Spring MVC should throw a <code>MissingPathVariableException</code>. Why is it responding with a 404 response, resource not found?</p>\n"},{"tags":["java","amazon-s3","amazon-web-services"],"comments":[{"owner":{"account_id":5124438,"reputation":2515,"user_id":4107038,"accept_rate":44,"display_name":"Rajat"},"score":0,"creation_date":1580799910,"post_id":10975475,"comment_id":106206589,"body_markdown":"https://stackoverflow.com/questions/6524041/how-do-you-make-an-s3-object-public-via-the-aws-java-sdk/60052151#60052151","body":"<a href=\"https://stackoverflow.com/questions/6524041/how-do-you-make-an-s3-object-public-via-the-aws-java-sdk/60052151#60052151\" title=\"how do you make an s3 object public via the aws java sdk\">stackoverflow.com/questions/6524041/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":483587,"reputation":10614,"user_id":898749,"accept_rate":70,"display_name":"Sangram Anand"},"score":0,"creation_date":1339398460,"post_id":10975577,"comment_id":14334095,"body_markdown":"After uploading the file from AWS management console, the following links works for a single file, so which one could be the response.. https://s3.amazonaws.com/cdn.generalsentiment.com/MVR/reports/2010-11_Hollywood_Buzz_Digest.pdf   --  http://cdn.generalsentiment.com.s3.amazonaws.com/MVR/reports/2010-11_Hollywood_Buzz_Digest.pdf   -- http://cdn.generalsentiment.com/MVR/reports/2010-11_Hollywood_Buzz_Digest.pdf","body":"After uploading the file from AWS management console, the following links works for a single file, so which one could be the response.. <a href=\"https://s3.amazonaws.com/cdn.generalsentiment.com/MVR/reports/2010-11_Hollywood_Buzz_Digest.pdf\" rel=\"nofollow noreferrer\">s3.amazonaws.com/cdn.generalsentiment.com/MVR/reports/&hellip;</a>   --  <a href=\"http://cdn.generalsentiment.com.s3.amazonaws.com/MVR/reports/2010-11_Hollywood_Buzz_Digest.pdf\" rel=\"nofollow noreferrer\">cdn.generalsentiment.com.s3.amazonaws.com/MVR/reports/&hellip;</a>   -- <a href=\"http://cdn.generalsentiment.com/MVR/reports/2010-11_Hollywood_Buzz_Digest.pdf\" rel=\"nofollow noreferrer\">cdn.generalsentiment.com/MVR/reports/&hellip;</a>"},{"owner":{"account_id":36261,"reputation":59415,"user_id":103295,"accept_rate":95,"display_name":"Jeffrey Kemp"},"score":1,"creation_date":1339399675,"post_id":10975577,"comment_id":14334461,"body_markdown":"Yes, there are variations to the url that should work. Pick the one you want to use and go with it.","body":"Yes, there are variations to the url that should work. Pick the one you want to use and go with it."},{"owner":{"account_id":483587,"reputation":10614,"user_id":898749,"accept_rate":70,"display_name":"Sangram Anand"},"score":0,"creation_date":1339401416,"post_id":10975577,"comment_id":14335022,"body_markdown":"Kool..  thanks for the info..  By the way the uploading part am going to do with AWS sdk library right?","body":"Kool..  thanks for the info..  By the way the uploading part am going to do with AWS sdk library right?"},{"owner":{"account_id":36261,"reputation":59415,"user_id":103295,"accept_rate":95,"display_name":"Jeffrey Kemp"},"score":0,"creation_date":1339577589,"post_id":10975577,"comment_id":14391422,"body_markdown":"Yes, I believe so. But I have no experience with struts.","body":"Yes, I believe so. But I have no experience with struts."},{"owner":{"account_id":483587,"reputation":10614,"user_id":898749,"accept_rate":70,"display_name":"Sangram Anand"},"score":0,"creation_date":1339577743,"post_id":10975577,"comment_id":14391478,"body_markdown":"I am almost done with uploading thing.. but strucked at the permissions. Is there a way in the AWS java sdk for S3 to let us make a file public before uploading.","body":"I am almost done with uploading thing.. but strucked at the permissions. Is there a way in the AWS java sdk for S3 to let us make a file public before uploading."},{"owner":{"account_id":36261,"reputation":59415,"user_id":103295,"accept_rate":95,"display_name":"Jeffrey Kemp"},"score":0,"creation_date":1339650565,"post_id":10975577,"comment_id":14417535,"body_markdown":"I suggest you raise a new question, you might get an answer that way.","body":"I suggest you raise a new question, you might get an answer that way."},{"owner":{"account_id":598920,"reputation":1666,"user_id":299421,"accept_rate":100,"display_name":"Federico"},"score":0,"creation_date":1377284206,"post_id":10975577,"comment_id":27042664,"body_markdown":"Note that using dev.mybucket.s3.amazonaws.com/myfilename vs s3.amazonaws.com/dev.mybucket/myfilename can make a difference in terms of certificates if the bucket name uses dots. This happens because amazon&#39;s s3 certificate doesn&#39;t support multi subdomains.","body":"Note that using dev.mybucket.s3.amazonaws.com/myfilename vs s3.amazonaws.com/dev.mybucket/myfilename can make a difference in terms of certificates if the bucket name uses dots. This happens because amazon&#39;s s3 certificate doesn&#39;t support multi subdomains."},{"owner":{"account_id":1993660,"reputation":1295,"user_id":1787081,"accept_rate":53,"display_name":"oko"},"score":0,"creation_date":1392628973,"post_id":10975577,"comment_id":33031529,"body_markdown":"@Federico what happens if we use bucket name with dots. for ex : &quot;dev.mybucket.com&quot;, &quot;static.mybucket.com&quot; etc. can you explain a bit more please ?","body":"@Federico what happens if we use bucket name with dots. for ex : &quot;dev.mybucket.com&quot;, &quot;static.mybucket.com&quot; etc. can you explain a bit more please ?"},{"owner":{"account_id":598920,"reputation":1666,"user_id":299421,"accept_rate":100,"display_name":"Federico"},"score":0,"creation_date":1395151198,"post_id":10975577,"comment_id":34199003,"body_markdown":"@oko this is related to certificate subdomain policies. Take sub.domain.com and subsub.sub.domain.com. If the certificate supports multiple subdomain *.domain.com will work for both. If it doesn&#39;t it would only work for sub.domain.com. Last time I checked amazon didn&#39;t support multiple subdomain, so using a bucket name with dots can make a difference if you use it in the domain part of the url.","body":"@oko this is related to certificate subdomain policies. Take sub.domain.com and subsub.sub.domain.com. If the certificate supports multiple subdomain *.domain.com will work for both. If it doesn&#39;t it would only work for sub.domain.com. Last time I checked amazon didn&#39;t support multiple subdomain, so using a bucket name with dots can make a difference if you use it in the domain part of the url."},{"owner":{"account_id":72109,"reputation":3992,"user_id":208308,"accept_rate":83,"display_name":"Pradeep Reddy Kypa"},"score":0,"creation_date":1504803502,"post_id":10975577,"comment_id":79165822,"body_markdown":"@JeffreyKemp With the URL Format mentioned above, I am able to access all the Files inside the Bucket but I am not able to access Individual Files. Can you Please guide me in How to get the UploadPathURL once the upload is completed?","body":"@JeffreyKemp With the URL Format mentioned above, I am able to access all the Files inside the Bucket but I am not able to access Individual Files. Can you Please guide me in How to get the UploadPathURL once the upload is completed?"},{"owner":{"account_id":36261,"reputation":59415,"user_id":103295,"accept_rate":95,"display_name":"Jeffrey Kemp"},"score":0,"creation_date":1504877817,"post_id":10975577,"comment_id":79197847,"body_markdown":"Sorry mate I have no idea what you mean. If you know the filename, the path and the bucket, you can work out the URL.","body":"Sorry mate I have no idea what you mean. If you know the filename, the path and the bucket, you can work out the URL."},{"owner":{"account_id":5305456,"reputation":1084,"user_id":4816322,"accept_rate":83,"display_name":"RvPr"},"score":0,"creation_date":1519360841,"post_id":10975577,"comment_id":84889363,"body_markdown":"I&#39;m assuming this doesn&#39;t work if {myfilename} includes spaces. Example: &quot;picture from vacation.jpg&quot;. That&#39;s a valid file name which Amazon will accept and display accordingly, though the url will look like &quot;picture+from+vacation.jpg&quot;","body":"I&#39;m assuming this doesn&#39;t work if {myfilename} includes spaces. Example: &quot;picture from vacation.jpg&quot;. That&#39;s a valid file name which Amazon will accept and display accordingly, though the url will look like &quot;picture+from+vacation.jpg&quot;"},{"owner":{"account_id":36261,"reputation":59415,"user_id":103295,"accept_rate":95,"display_name":"Jeffrey Kemp"},"score":0,"creation_date":1519374751,"post_id":10975577,"comment_id":84894386,"body_markdown":"@RvPr of course, it should go without saying that you must encode the filename before rendering any links in a web page. There&#39;s more risks than just spaces in a filename if you&#39;re accepting end user-specified filenames...","body":"@RvPr of course, it should go without saying that you must encode the filename before rendering any links in a web page. There&#39;s more risks than just spaces in a filename if you&#39;re accepting end user-specified filenames..."},{"owner":{"account_id":5305456,"reputation":1084,"user_id":4816322,"accept_rate":83,"display_name":"RvPr"},"score":0,"creation_date":1519394907,"post_id":10975577,"comment_id":84905617,"body_markdown":"@Jeffrey Kemp, call me stupid, but after reading your answer above, I walked away with the impression that a simple string concatenation would do the job. I hadn&#39;t considered that complications may arise, where this approach wouldn&#39;t work.  &quot;You can work it out for yourself&quot; doesn&#39;t do sufficient justice to the additional parsing that needs to be done. I would recommend editing your answer to mention this complication, and referencing the other answer given below. The getUrl method referenced below doesn&#39;t even make a network call, so there&#39;s little reason not to use it","body":"@Jeffrey Kemp, call me stupid, but after reading your answer above, I walked away with the impression that a simple string concatenation would do the job. I hadn&#39;t considered that complications may arise, where this approach wouldn&#39;t work.  &quot;You can work it out for yourself&quot; doesn&#39;t do sufficient justice to the additional parsing that needs to be done. I would recommend editing your answer to mention this complication, and referencing the other answer given below. The getUrl method referenced below doesn&#39;t even make a network call, so there&#39;s little reason not to use it"}],"tags":[],"owner":{"account_id":36261,"reputation":59415,"user_id":103295,"accept_rate":95,"display_name":"Jeffrey Kemp"},"comment_count":14,"down_vote_count":3,"up_vote_count":95,"is_accepted":false,"score":92,"last_activity_date":1339397551,"creation_date":1339397551,"answer_id":10975577,"question_id":10975475,"body_markdown":"You can work it out for yourself given the bucket and the file name you specify in the upload request.\r\n\r\ne.g. if your bucket is `mybucket` and your file is named `myfilename`:\r\n\r\n    https://mybucket.s3.amazonaws.com/myfilename\r\n\r\nThe `s3` bit will be different depending on which region your bucket is in. For example, I use the south-east asia region so my urls are like:\r\n\r\n    https://mybucket.s3-ap-southeast-1.amazonaws.com/myfilename","title":"Amazon S3 upload file and get URL","body":"<p>You can work it out for yourself given the bucket and the file name you specify in the upload request.</p>\n\n<p>e.g. if your bucket is <code>mybucket</code> and your file is named <code>myfilename</code>:</p>\n\n<pre><code>https://mybucket.s3.amazonaws.com/myfilename\n</code></pre>\n\n<p>The <code>s3</code> bit will be different depending on which region your bucket is in. For example, I use the south-east asia region so my urls are like:</p>\n\n<pre><code>https://mybucket.s3-ap-southeast-1.amazonaws.com/myfilename\n</code></pre>\n"},{"comments":[{"owner":{"account_id":265633,"reputation":1226,"user_id":552733,"accept_rate":38,"display_name":"Andreas Rudolph"},"score":49,"creation_date":1409333652,"post_id":12769383,"comment_id":39939867,"body_markdown":"How do I get the link out of this request?","body":"How do I get the link out of this request?"},{"owner":{"account_id":3431530,"reputation":5970,"user_id":2875803,"accept_rate":71,"display_name":"Valentin Waeselynck"},"score":64,"creation_date":1413160499,"post_id":12769383,"comment_id":41326635,"body_markdown":"This does not tell us how to get the public url of the uploaded resource.","body":"This does not tell us how to get the public url of the uploaded resource."}],"tags":[],"owner":{"account_id":1913647,"reputation":226,"user_id":1726771,"display_name":"Michael Astreiko"},"comment_count":2,"down_vote_count":85,"up_vote_count":38,"is_accepted":true,"score":-47,"last_activity_date":1625979384,"creation_date":1349617789,"answer_id":12769383,"question_id":10975475,"body_markdown":"To make the file public before uploading you can use the `#withCannedAcl` method of `PutObjectRequest`:\r\n\r\n    myAmazonS3Client.putObject(new PutObjectRequest(&#39;some-grails-bucket&#39;,  &#39;somePath/someKey.jpg&#39;, new    File(&#39;/Users/ben/Desktop/photo.jpg&#39;)).withCannedAcl(CannedAccessControlList.PublicRead))\r\n\r\n    String url = myAmazonS3Client.getUrl(&#39;some-grails-bucket&#39;,  &#39;somePath/someKey.jpg&#39;).toString();\r\n","title":"Amazon S3 upload file and get URL","body":"<p>To make the file public before uploading you can use the <code>#withCannedAcl</code> method of <code>PutObjectRequest</code>:</p>\n<pre><code>myAmazonS3Client.putObject(new PutObjectRequest('some-grails-bucket',  'somePath/someKey.jpg', new    File('/Users/ben/Desktop/photo.jpg')).withCannedAcl(CannedAccessControlList.PublicRead))\n\nString url = myAmazonS3Client.getUrl('some-grails-bucket',  'somePath/someKey.jpg').toString();\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4958101,"reputation":2602,"user_id":3990127,"accept_rate":25,"display_name":"sihil"},"score":37,"creation_date":1475232779,"post_id":31079371,"comment_id":66872700,"body_markdown":"It&#39;s worth noting that this only results in a single call to AWS. If you dig into the Java SDK you&#39;ll see that `s3Client.getResourceUrl(&quot;your-bucket&quot;, &quot;some-path/some-key.jpg&quot;)` works out the URL without a call to AWS.","body":"It&#39;s worth noting that this only results in a single call to AWS. If you dig into the Java SDK you&#39;ll see that <code>s3Client.getResourceUrl(&quot;your-bucket&quot;, &quot;some-path&#47;some-key.jpg&quot;)</code> works out the URL without a call to AWS."},{"owner":{"account_id":5305456,"reputation":1084,"user_id":4816322,"accept_rate":83,"display_name":"RvPr"},"score":3,"creation_date":1519361907,"post_id":31079371,"comment_id":84889646,"body_markdown":"This really should be the recommended answer. The other answer fails for cases where the file-name includes spaces. In such scenarios, the file-name displayed on S3, and the URL suffix, are different from one another. The above s3Client.getUrl method handles this scenario correctly","body":"This really should be the recommended answer. The other answer fails for cases where the file-name includes spaces. In such scenarios, the file-name displayed on S3, and the URL suffix, are different from one another. The above s3Client.getUrl method handles this scenario correctly"},{"owner":{"account_id":1081514,"reputation":3747,"user_id":1078390,"accept_rate":100,"display_name":"Martin Serrano"},"score":9,"creation_date":1521669707,"post_id":31079371,"comment_id":85836285,"body_markdown":"Note, `getResourceUrl` is not in the latest sdk.","body":"Note, <code>getResourceUrl</code> is not in the latest sdk."},{"owner":{"account_id":2593070,"reputation":4352,"user_id":2247309,"display_name":"hussachai"},"score":1,"creation_date":1521698225,"post_id":31079371,"comment_id":85843923,"body_markdown":"It&#39;s still there. You may have to cast the interface (AmazonS3) to the  class (AmazonS3Client).","body":"It&#39;s still there. You may have to cast the interface (AmazonS3) to the  class (AmazonS3Client)."},{"owner":{"account_id":2595962,"reputation":65,"user_id":2249647,"display_name":"kristianva"},"score":8,"creation_date":1528734868,"post_id":31079371,"comment_id":88610606,"body_markdown":"for latest sdk `s3Client.getUrl(&quot;your-bucket&quot;, &quot;some-path/some-key.jpg&quot;).toString();` will get the public url.","body":"for latest sdk <code>s3Client.getUrl(&quot;your-bucket&quot;, &quot;some-path&#47;some-key.jpg&quot;).toString();</code> will get the public url."},{"owner":{"account_id":177610,"reputation":1980,"user_id":1664198,"accept_rate":88,"display_name":"mrog"},"score":16,"creation_date":1562967566,"post_id":31079371,"comment_id":100560631,"body_markdown":"For even newer SDK versions, try `s3Client.utilities().getUrl(getUrlRequest);`","body":"For even newer SDK versions, try <code>s3Client.utilities().getUrl(getUrlRequest);</code>"},{"owner":{"account_id":21637162,"reputation":129,"user_id":15959923,"display_name":"Mavic More"},"score":0,"creation_date":1677254536,"post_id":31079371,"comment_id":133307556,"body_markdown":"`s3.getUrl(bucketName, fileName).toExternalForm()` does the trick in most recent version","body":"<code>s3.getUrl(bucketName, fileName).toExternalForm()</code> does the trick in most recent version"}],"tags":[],"owner":{"account_id":2593070,"reputation":4352,"user_id":2247309,"display_name":"hussachai"},"comment_count":7,"down_vote_count":1,"up_vote_count":145,"is_accepted":false,"score":144,"last_activity_date":1521704045,"creation_date":1435341496,"answer_id":31079371,"question_id":10975475,"body_markdown":"No you cannot get the URL in single action but two :)\r\n\r\nFirst of all, you may have to make the file public before uploading because it makes no sense to get the URL that no one can access. You can do so by setting ACL as Michael Astreiko suggested.\r\nYou can get the resource URL either by calling `getResourceUrl` or `getUrl`.\r\n\r\n    AmazonS3Client s3Client = (AmazonS3Client)AmazonS3ClientBuilder.defaultClient();\r\n    s3Client.putObject(new PutObjectRequest(&quot;your-bucket&quot;, &quot;some-path/some-key.jpg&quot;, new File(&quot;somePath/someKey.jpg&quot;)).withCannedAcl(CannedAccessControlList.PublicRead))\r\n    s3Client.getResourceUrl(&quot;your-bucket&quot;, &quot;some-path/some-key.jpg&quot;);\r\n\r\n**Note1:**\r\nThe different between `getResourceUrl` and `getUrl` is that getResourceUrl will return null when exception occurs.\r\n\r\n**Note2:**\r\n`getUrl` method is not defined in the AmazonS3 interface. You have to cast the object to AmazonS3Client if you use the standard builder.","title":"Amazon S3 upload file and get URL","body":"<p>No you cannot get the URL in single action but two :)</p>\n\n<p>First of all, you may have to make the file public before uploading because it makes no sense to get the URL that no one can access. You can do so by setting ACL as Michael Astreiko suggested.\nYou can get the resource URL either by calling <code>getResourceUrl</code> or <code>getUrl</code>.</p>\n\n<pre><code>AmazonS3Client s3Client = (AmazonS3Client)AmazonS3ClientBuilder.defaultClient();\ns3Client.putObject(new PutObjectRequest(\"your-bucket\", \"some-path/some-key.jpg\", new File(\"somePath/someKey.jpg\")).withCannedAcl(CannedAccessControlList.PublicRead))\ns3Client.getResourceUrl(\"your-bucket\", \"some-path/some-key.jpg\");\n</code></pre>\n\n<p><strong>Note1:</strong>\nThe different between <code>getResourceUrl</code> and <code>getUrl</code> is that getResourceUrl will return null when exception occurs.</p>\n\n<p><strong>Note2:</strong>\n<code>getUrl</code> method is not defined in the AmazonS3 interface. You have to cast the object to AmazonS3Client if you use the standard builder.</p>\n"},{"tags":[],"owner":{"account_id":8219471,"reputation":101,"user_id":6184558,"accept_rate":50,"display_name":"rollcage"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1502376559,"creation_date":1502376559,"answer_id":45617001,"question_id":10975475,"body_markdown":"a bit old but still for anyone stumbling upon this in the future:\r\n\r\nyou can do it with one line assuming you already wrote the CredentialProvider and the AmazonS3Client. \r\n\r\nit will look like this:\r\n\r\n\r\n     String ImageURL = String.valueOf(s3.getUrl(\r\n                                      ConstantsAWS3.BUCKET_NAME, //The S3 Bucket To Upload To\r\n                                      file.getName())); //The key for the uploaded object\r\n\r\nand if you didn&#39;t wrote the CredentialProvider and the AmazonS3Client then just add them before getting the URL like this:\r\n\r\n\r\n      CognitoCachingCredentialsProvider credentialsProvider = new CognitoCachingCredentialsProvider(\r\n            getApplicationContext(),\r\n            &quot;POOL_ID&quot;, // Identity pool ID\r\n            Regions.US_EAST_1 // Region\r\n    );\r\n\r\n","title":"Amazon S3 upload file and get URL","body":"<p>a bit old but still for anyone stumbling upon this in the future:</p>\n\n<p>you can do it with one line assuming you already wrote the CredentialProvider and the AmazonS3Client. </p>\n\n<p>it will look like this:</p>\n\n<pre><code> String ImageURL = String.valueOf(s3.getUrl(\n                                  ConstantsAWS3.BUCKET_NAME, //The S3 Bucket To Upload To\n                                  file.getName())); //The key for the uploaded object\n</code></pre>\n\n<p>and if you didn't wrote the CredentialProvider and the AmazonS3Client then just add them before getting the URL like this:</p>\n\n<pre><code>  CognitoCachingCredentialsProvider credentialsProvider = new CognitoCachingCredentialsProvider(\n        getApplicationContext(),\n        \"POOL_ID\", // Identity pool ID\n        Regions.US_EAST_1 // Region\n);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13551498,"reputation":89,"user_id":9776239,"display_name":"Omkar Ayachit"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1618251031,"creation_date":1527233027,"answer_id":50523639,"question_id":10975475,"body_markdown":"```\r\nSystem.out.println(&quot;Link : &quot; + s3Object.getObjectContent().getHttpRequest().getURI());\r\n```\r\n\r\nWith this code you can retrieve the link of already uploaded file to S3 bucket.\r\n","title":"Amazon S3 upload file and get URL","body":"<pre><code>System.out.println(&quot;Link : &quot; + s3Object.getObjectContent().getHttpRequest().getURI());\n</code></pre>\n<p>With this code you can retrieve the link of already uploaded file to S3 bucket.</p>\n"},{"comments":[{"owner":{"account_id":6646617,"reputation":53,"user_id":5130496,"display_name":"Shender Ramos"},"score":0,"creation_date":1659838544,"post_id":50529954,"comment_id":129389073,"body_markdown":"i tried every single solution and this is the only one that worked for me. thanks","body":"i tried every single solution and this is the only one that worked for me. thanks"}],"tags":[],"owner":{"account_id":13551498,"reputation":89,"user_id":9776239,"display_name":"Omkar Ayachit"},"comment_count":1,"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1527254852,"creation_date":1527253551,"answer_id":50529954,"question_id":10975475,"body_markdown":"Similarly if you want link through s3Client you can use below.\r\n\r\n    System.out.println(&quot;filelink: &quot; + s3Client.getUrl(&quot;your_bucket_name&quot;, &quot;your_file_key&quot;));\r\n\t\t\t\t\r\n","title":"Amazon S3 upload file and get URL","body":"<p>Similarly if you want link through s3Client you can use below.</p>\n\n<pre><code>System.out.println(\"filelink: \" + s3Client.getUrl(\"your_bucket_name\", \"your_file_key\"));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8694541,"reputation":191,"user_id":6506415,"display_name":"james"},"comment_count":0,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1563911992,"creation_date":1563911992,"answer_id":57171367,"question_id":10975475,"body_markdown":"@hussachai and @Jeffrey Kemp answers are pretty good. But they have something in common is the url returned is of virtual-host-style, not in path style. For more info regarding to the s3 url style, can refer to [AWS S3 URL Styles][1]. In case of some people want to have path style s3 url generated. Here&#39;s the step. Basically everything will be the same as @hussachai and @Jeffrey Kemp answers, only with one line setting change as below:\r\n\r\n    AmazonS3Client s3Client = (AmazonS3Client) AmazonS3ClientBuilder.standard()\r\n                        .withRegion(&quot;us-west-2&quot;)\r\n                        .withCredentials(DefaultAWSCredentialsProviderChain.getInstance())\r\n                        .withPathStyleAccessEnabled(true)\r\n                        .build();\r\n\r\n    // Upload a file as a new object with ContentType and title specified.\r\n    PutObjectRequest request = new PutObjectRequest(bucketName, stringObjKeyName, fileToUpload);\r\n    s3Client.putObject(request);\r\n    URL s3Url = s3Client.getUrl(bucketName, stringObjKeyName);\r\n    logger.info(&quot;S3 url is &quot; + s3Url.toExternalForm());\r\n\r\n\r\nThis will generate url like:\r\n    https://s3.us-west-2.amazonaws.com/mybucket/myfilename\r\n   \r\n  [1]: http://www.wryway.com/blog/aws-s3-url-styles/","title":"Amazon S3 upload file and get URL","body":"<p>@hussachai and @Jeffrey Kemp answers are pretty good. But they have something in common is the url returned is of virtual-host-style, not in path style. For more info regarding to the s3 url style, can refer to <a href=\"http://www.wryway.com/blog/aws-s3-url-styles/\" rel=\"noreferrer\">AWS S3 URL Styles</a>. In case of some people want to have path style s3 url generated. Here's the step. Basically everything will be the same as @hussachai and @Jeffrey Kemp answers, only with one line setting change as below:</p>\n\n<pre><code>AmazonS3Client s3Client = (AmazonS3Client) AmazonS3ClientBuilder.standard()\n                    .withRegion(\"us-west-2\")\n                    .withCredentials(DefaultAWSCredentialsProviderChain.getInstance())\n                    .withPathStyleAccessEnabled(true)\n                    .build();\n\n// Upload a file as a new object with ContentType and title specified.\nPutObjectRequest request = new PutObjectRequest(bucketName, stringObjKeyName, fileToUpload);\ns3Client.putObject(request);\nURL s3Url = s3Client.getUrl(bucketName, stringObjKeyName);\nlogger.info(\"S3 url is \" + s3Url.toExternalForm());\n</code></pre>\n\n<p>This will generate url like:\n    <a href=\"https://s3.us-west-2.amazonaws.com/mybucket/myfilename\" rel=\"noreferrer\">https://s3.us-west-2.amazonaws.com/mybucket/myfilename</a></p>\n"},{"tags":[],"owner":{"account_id":3606254,"reputation":7,"user_id":3422296,"display_name":"Ankitech"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1599980767,"creation_date":1599980767,"answer_id":63868109,"question_id":10975475,"body_markdown":"Below method uploads file in a particular folder in a bucket and return the generated url of the file uploaded.\r\n\r\n``` java\r\nprivate String uploadFileToS3Bucket(final String bucketName, final File file) {\r\n    final String uniqueFileName = uploadFolder + &quot;/&quot; + file.getName();\r\n    LOGGER.info(&quot;Uploading file with name= &quot; + uniqueFileName);\r\n    final PutObjectRequest putObjectRequest = new PutObjectRequest(bucketName, uniqueFileName, file);\r\n    amazonS3.putObject(putObjectRequest);\r\n    return ((AmazonS3Client) amazonS3).getResourceUrl(bucketName, uniqueFileName);\r\n}\r\n```","title":"Amazon S3 upload file and get URL","body":"<p>Below method uploads file in a particular folder in a bucket and return the generated url of the file uploaded.</p>\n<pre class=\"lang-java prettyprint-override\"><code>private String uploadFileToS3Bucket(final String bucketName, final File file) {\n    final String uniqueFileName = uploadFolder + &quot;/&quot; + file.getName();\n    LOGGER.info(&quot;Uploading file with name= &quot; + uniqueFileName);\n    final PutObjectRequest putObjectRequest = new PutObjectRequest(bucketName, uniqueFileName, file);\n    amazonS3.putObject(putObjectRequest);\n    return ((AmazonS3Client) amazonS3).getResourceUrl(bucketName, uniqueFileName);\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1626128,"reputation":3775,"user_id":1501661,"accept_rate":90,"display_name":"Iwo Kucharski"},"score":0,"creation_date":1695985665,"post_id":63981823,"comment_id":136099202,"body_markdown":"There is even a more elegant way (in my opinion) by using consumer builder:\n`s3client.utilities().getUrl(r -&gt; r.bucket(bucketName).key(objectKey));`","body":"There is even a more elegant way (in my opinion) by using consumer builder: <code>s3client.utilities().getUrl(r -&gt; r.bucket(bucketName).key(objectKey));</code>"}],"tags":[],"owner":{"account_id":2251275,"reputation":1325,"user_id":1983465,"accept_rate":83,"display_name":"Bala"},"comment_count":1,"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1600623166,"creation_date":1600623166,"answer_id":63981823,"question_id":10975475,"body_markdown":"For AWS SDK 2+\r\n\r\n    String key = &quot;filePath&quot;;\r\n    String bucketName = &quot;bucketName&quot;;\r\n    PutObjectResponse response = s3Client\r\n                .putObject(PutObjectRequest.builder().bucket(bucketName ).key(key).build(), RequestBody.fromFile(file));\r\n     GetUrlRequest request = GetUrlRequest.builder().bucket(bucketName ).key(key).build();\r\n     String url = s3Client.utilities().getUrl(request).toExternalForm();","title":"Amazon S3 upload file and get URL","body":"<p>For AWS SDK 2+</p>\n<pre><code>String key = &quot;filePath&quot;;\nString bucketName = &quot;bucketName&quot;;\nPutObjectResponse response = s3Client\n            .putObject(PutObjectRequest.builder().bucket(bucketName ).key(key).build(), RequestBody.fromFile(file));\n GetUrlRequest request = GetUrlRequest.builder().bucket(bucketName ).key(key).build();\n String url = s3Client.utilities().getUrl(request).toExternalForm();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6892878,"reputation":53,"user_id":5295723,"display_name":"Jatin Verma"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640750304,"creation_date":1640750304,"answer_id":70514980,"question_id":10975475,"body_markdown":"If you&#39;re using AWS-SDK, the `data` object returned contains the Object URL in `data.Location`\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    const AWS = require(&#39;aws-sdk&#39;)\r\n    const s3 = new AWS.S3(config)\r\n    \r\n    s3.upload(params).promise()\r\n        .then((data)=&gt;{\r\n            console.log(data.Location)\r\n        })\r\n        .catch(err=&gt;console.log(err))\r\n\r\n&lt;!-- end snippet --&gt;\r\n","title":"Amazon S3 upload file and get URL","body":"<p>If you're using AWS-SDK, the <code>data</code> object returned contains the Object URL in <code>data.Location</code></p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>const AWS = require('aws-sdk')\nconst s3 = new AWS.S3(config)\n\ns3.upload(params).promise()\n    .then((data)=&gt;{\n        console.log(data.Location)\n    })\n    .catch(err=&gt;console.log(err))</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}],"owner":{"account_id":483587,"reputation":10614,"user_id":898749,"accept_rate":70,"display_name":"Sangram Anand"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":187664,"favorite_count":0,"down_vote_count":0,"up_vote_count":131,"accepted_answer_id":12769383,"answer_count":10,"score":131,"last_activity_date":1681083668,"creation_date":1339396987,"question_id":10975475,"body_markdown":"Is it possible to upload a txt/pdf/png file to Amazon [S3][1] in a single action, and get the uploaded file URL as the response?\r\n\r\nIf so, is AWS Java SDK the right library that I need to add in my java struts2 web application?\r\n\r\nPlease suggest me a solution for this.\r\n\r\n  [1]: https://aws.amazon.com/s3/","title":"Amazon S3 upload file and get URL","body":"<p>Is it possible to upload a txt/pdf/png file to Amazon <a href=\"https://aws.amazon.com/s3/\" rel=\"noreferrer\">S3</a> in a single action, and get the uploaded file URL as the response?</p>\n<p>If so, is AWS Java SDK the right library that I need to add in my java struts2 web application?</p>\n<p>Please suggest me a solution for this.</p>\n"},{"tags":["java","parallel-processing","sieve"],"owner":{"account_id":25333394,"reputation":23,"user_id":20415613,"display_name":"feter"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1681082181,"creation_date":1681081441,"question_id":75973310,"body_markdown":"I am trying to parelleize Sieve Of Eratosthenes, the idea to do this is this: First find the primes to square root of N. these primes will be evenly distributed to the number of threads. These threas will now for each prime they have cross multiples and mark in a byteArray if the number is prime or not. in the end I will sequentially go through this byte array and collect all the values that are prime. \r\n\r\nThe problem I am facing is, that the number of primes that are found are not correct, and that there must be a synch problem somewhere I cannot see since the numOfPrimes changes everytime\r\n\r\nI will paste the code as much as I can.\r\n\r\n    public class Para_SieveOfEratosthenes {\r\n\r\n    static int number_to_find_primes = 2000000;\r\n    static int square_of_num = (int) Math.sqrt(number_to_find_primes);\r\n    static int square_of_square = (int) Math.sqrt(square_of_num);\r\n\r\n\r\n    static int cells = (number_to_find_primes / 16) + 1;\r\n    static public byte[] byteArray2 = new byte[cells];\r\n    static int num_of_threads = 3;\r\n    static int numOfPrimes = 2;\r\n\r\nIn the main I am using first another method in another class to find the primes. I thought maybe this might be the problem, because maybe the crossing of in the byte array done in this method does not go over to byteArray2?\r\n\r\n    public static void main(String[] args) {\r\n        SieveOfEratosthenes seqSiev = new SieveOfEratosthenes(square_of_square);\r\n        int[] primes = seqSiev.getPrimes();\r\n        //Get the num of primes found in the seq algo\r\n        numOfPrimes += primes.length;\r\n\r\nThis part of the code seems all good since it divides the primes evenly and creates the threads as they should\r\n\r\n\r\n     Thread[] threads = new Thread[num_of_threads];\r\n        int primes_per_thread = primes.length / num_of_threads;\r\n        int extra_primes = primes.length % num_of_threads;\r\n        int start_index = 0;\r\n        int end_index = 0;\r\n\r\n      \r\n        int value_length = number_to_find_primes / num_of_threads;\r\n      \r\n\r\n        for (int i = 0; i &lt; num_of_threads; i++, extra_primes--) {\r\n            start_index = end_index;\r\n            end_index = start_index + primes_per_thread + (extra_primes &gt; 0 ? 1 : 0);\r\n            int[] thread_primes = Arrays.copyOfRange(primes, start_index, end_index);\r\n            \r\n           \r\n            threads[i] = new Thread(new SieveWorker(i,thread_primes));\r\n\r\n         }\r\n\r\nI now start the threads and wait for the join, and then collect the primes\r\n\r\n     for (int i = 0; i &lt; num_of_threads; i++) {\r\n            threads[i].start();\r\n        }\r\n\r\n        for (int i = 0; i &lt; num_of_threads; i++) {\r\n            try { threads[i].join(); } catch (InterruptedException e) {}\r\n        }\r\n\r\n        int[] arr=collectPrimes();\r\n        System.out.println(arr.length);\r\n\r\n\r\nThis is the collectPrime method, it is taken from the SieveOfEratosthenes, which is promissed to be correct since its the precode\r\n\r\n\r\n     private static int[] collectPrimes() {\r\n        \r\n\r\n        int start = (square_of_num % 2 == 0) ? square_of_num + 1 : square_of_num + 2;\r\n        \r\n        for (int i = start; i &lt;= number_to_find_primes; i += 2){\r\n           \r\n          if (isPrime(i))\r\n            numOfPrimes++;\r\n        }\r\n        System.out.println(numOfPrimes);\r\n        int[] primes = new int[numOfPrimes];\r\n    \r\n        primes[0] = 2;\r\n    \r\n        int j = 1;\r\n    \r\n        for (int i = 3; i &lt;= number_to_find_primes; i += 2)\r\n          if (isPrime(i))\r\n           {\r\n            primes[j++] = i;\r\n           }\r\n    \r\n        return primes;\r\n      }\r\n\r\n\r\nThis is the thread Class:\r\n\r\n    static class SieveWorker implements Runnable{\r\n\r\n        public int id;\r\n        public int[] work;\r\n        public int num_primes;\r\n        public int value_start;\r\n        public int value_end = number_to_find_primes;\r\n        \r\n    \r\n        public SieveWorker(int id,int[] work  ){\r\n            this.id = id;\r\n            this.work = work;\r\n           }\r\n       @Override\r\n        public void run() {\r\n            for (int i = 0; i &lt; work.length; i++) {\r\n                this.value_start = work[i];\r\n                sieve(work[i]);\r\n            }}\r\n\r\n\r\nThese are the methods that does the sieve\r\n\r\n\r\n    static  void sieve(int prime) {\r\n        //System.out.println(&quot;We are traversing: &quot;+prime);\r\n        \r\n        while (prime != -1) {\r\n            traverse(prime);\r\n            prime = nextPrime(prime);\r\n            numOfPrimes++;\r\n          }}\r\n\r\n    private static void traverse(int prime) {\r\n        for (int i = prime*prime; i &lt;= number_to_find_primes; i += prime * 2)\r\n          mark(i);\r\n      }\r\n\r\n    private static void mark(int num) {\r\n        int bitIndex = (num % 16) / 2;\r\n        int byteIndex = num / 16;\r\n        byteArray2[byteIndex] |= (1 &lt;&lt; bitIndex);\r\n      }\r\n\r\n     private static int nextPrime(int prev) {\r\n        for (int i = prev + 2; i &lt;= square_of_num; i += 2)\r\n          if (isPrime(i))\r\n            return i;\r\n    \r\n        return -1;\r\n      }\r\n\r\nIf anyone has any idea on where the mistake is, I would really appreciate a comment, not sure how to make this post smaller without loosing the value of the code. Thank you","title":"Parallel SieveOfEratosthenes","body":"<p>I am trying to parelleize Sieve Of Eratosthenes, the idea to do this is this: First find the primes to square root of N. these primes will be evenly distributed to the number of threads. These threas will now for each prime they have cross multiples and mark in a byteArray if the number is prime or not. in the end I will sequentially go through this byte array and collect all the values that are prime.</p>\n<p>The problem I am facing is, that the number of primes that are found are not correct, and that there must be a synch problem somewhere I cannot see since the numOfPrimes changes everytime</p>\n<p>I will paste the code as much as I can.</p>\n<pre><code>public class Para_SieveOfEratosthenes {\n\nstatic int number_to_find_primes = 2000000;\nstatic int square_of_num = (int) Math.sqrt(number_to_find_primes);\nstatic int square_of_square = (int) Math.sqrt(square_of_num);\n\n\nstatic int cells = (number_to_find_primes / 16) + 1;\nstatic public byte[] byteArray2 = new byte[cells];\nstatic int num_of_threads = 3;\nstatic int numOfPrimes = 2;\n</code></pre>\n<p>In the main I am using first another method in another class to find the primes. I thought maybe this might be the problem, because maybe the crossing of in the byte array done in this method does not go over to byteArray2?</p>\n<pre><code>public static void main(String[] args) {\n    SieveOfEratosthenes seqSiev = new SieveOfEratosthenes(square_of_square);\n    int[] primes = seqSiev.getPrimes();\n    //Get the num of primes found in the seq algo\n    numOfPrimes += primes.length;\n</code></pre>\n<p>This part of the code seems all good since it divides the primes evenly and creates the threads as they should</p>\n<pre><code> Thread[] threads = new Thread[num_of_threads];\n    int primes_per_thread = primes.length / num_of_threads;\n    int extra_primes = primes.length % num_of_threads;\n    int start_index = 0;\n    int end_index = 0;\n\n  \n    int value_length = number_to_find_primes / num_of_threads;\n  \n\n    for (int i = 0; i &lt; num_of_threads; i++, extra_primes--) {\n        start_index = end_index;\n        end_index = start_index + primes_per_thread + (extra_primes &gt; 0 ? 1 : 0);\n        int[] thread_primes = Arrays.copyOfRange(primes, start_index, end_index);\n        \n       \n        threads[i] = new Thread(new SieveWorker(i,thread_primes));\n\n     }\n</code></pre>\n<p>I now start the threads and wait for the join, and then collect the primes</p>\n<pre><code> for (int i = 0; i &lt; num_of_threads; i++) {\n        threads[i].start();\n    }\n\n    for (int i = 0; i &lt; num_of_threads; i++) {\n        try { threads[i].join(); } catch (InterruptedException e) {}\n    }\n\n    int[] arr=collectPrimes();\n    System.out.println(arr.length);\n</code></pre>\n<p>This is the collectPrime method, it is taken from the SieveOfEratosthenes, which is promissed to be correct since its the precode</p>\n<pre><code> private static int[] collectPrimes() {\n    \n\n    int start = (square_of_num % 2 == 0) ? square_of_num + 1 : square_of_num + 2;\n    \n    for (int i = start; i &lt;= number_to_find_primes; i += 2){\n       \n      if (isPrime(i))\n        numOfPrimes++;\n    }\n    System.out.println(numOfPrimes);\n    int[] primes = new int[numOfPrimes];\n\n    primes[0] = 2;\n\n    int j = 1;\n\n    for (int i = 3; i &lt;= number_to_find_primes; i += 2)\n      if (isPrime(i))\n       {\n        primes[j++] = i;\n       }\n\n    return primes;\n  }\n</code></pre>\n<p>This is the thread Class:</p>\n<pre><code>static class SieveWorker implements Runnable{\n\n    public int id;\n    public int[] work;\n    public int num_primes;\n    public int value_start;\n    public int value_end = number_to_find_primes;\n    \n\n    public SieveWorker(int id,int[] work  ){\n        this.id = id;\n        this.work = work;\n       }\n   @Override\n    public void run() {\n        for (int i = 0; i &lt; work.length; i++) {\n            this.value_start = work[i];\n            sieve(work[i]);\n        }}\n</code></pre>\n<p>These are the methods that does the sieve</p>\n<pre><code>static  void sieve(int prime) {\n    //System.out.println(&quot;We are traversing: &quot;+prime);\n    \n    while (prime != -1) {\n        traverse(prime);\n        prime = nextPrime(prime);\n        numOfPrimes++;\n      }}\n\nprivate static void traverse(int prime) {\n    for (int i = prime*prime; i &lt;= number_to_find_primes; i += prime * 2)\n      mark(i);\n  }\n\nprivate static void mark(int num) {\n    int bitIndex = (num % 16) / 2;\n    int byteIndex = num / 16;\n    byteArray2[byteIndex] |= (1 &lt;&lt; bitIndex);\n  }\n\n private static int nextPrime(int prev) {\n    for (int i = prev + 2; i &lt;= square_of_num; i += 2)\n      if (isPrime(i))\n        return i;\n\n    return -1;\n  }\n</code></pre>\n<p>If anyone has any idea on where the mistake is, I would really appreciate a comment, not sure how to make this post smaller without loosing the value of the code. Thank you</p>\n"},{"tags":["java","utf-8","encode","non-unicode"],"comments":[{"owner":{"account_id":2188639,"reputation":2082,"user_id":1936390,"accept_rate":20,"display_name":"shreyansh jogi"},"score":0,"creation_date":1372076696,"post_id":17275383,"comment_id":25043268,"body_markdown":"what you have tried so far?","body":"what you have tried so far?"},{"owner":{"account_id":22194,"reputation":18092,"user_id":54506,"accept_rate":78,"display_name":"Jayan"},"score":0,"creation_date":1372076699,"post_id":17275383,"comment_id":25043271,"body_markdown":"Fix your library. That will help a lot","body":"Fix your library. That will help a lot"}],"answers":[{"tags":[],"owner":{"account_id":2865008,"reputation":340,"user_id":2459497,"accept_rate":33,"display_name":"Steven M. Wurster"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1372077892,"creation_date":1372077892,"answer_id":17275810,"question_id":17275383,"body_markdown":"Take a look at String.codePointAt(index).  That can give you the Unicode code point for a given character, and from there you could remove those outside your range.\r\n\r\nHow you handle the fact that a character has been removed is on your end, but keep in mind that the string you&#39;ll be sending to the library isn&#39;t necessarily the same as that provided by the client.  This may or may not cause problems.\r\n\r\nI&#39;m not sure what you mean by ANSI here.  Do you mean the Windows 1252 character encoding that people typically call ANSI?  That&#39;s not ASCII and it&#39;s also not IS0-8859-1, so make sure you get your code pages correct.","title":"Remove Non-Ansi Chars from a UTF String and Keep Others","body":"<p>Take a look at String.codePointAt(index).  That can give you the Unicode code point for a given character, and from there you could remove those outside your range.</p>\n\n<p>How you handle the fact that a character has been removed is on your end, but keep in mind that the string you'll be sending to the library isn't necessarily the same as that provided by the client.  This may or may not cause problems.</p>\n\n<p>I'm not sure what you mean by ANSI here.  Do you mean the Windows 1252 character encoding that people typically call ANSI?  That's not ASCII and it's also not IS0-8859-1, so make sure you get your code pages correct.</p>\n"},{"tags":[],"owner":{"account_id":2888638,"reputation":10719,"user_id":2477916,"accept_rate":100,"display_name":"Java Devil"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1372077961,"creation_date":1372077961,"answer_id":17275833,"question_id":17275383,"body_markdown":"Try this, I pulled this from [here][1] so haven&#39;t tested it\r\n\r\n    // Create a encoder and decoder for the character encoding\r\n    Charset charset = Charset.forName(&quot;US-ASCII&quot;);\r\n    CharsetDecoder decoder = charset.newDecoder();\r\n    CharsetEncoder encoder = charset.newEncoder();\r\n\r\n    // This line is the key to removing &quot;unmappable&quot; characters.\r\n    encoder.onUnmappableCharacter(CodingErrorAction.IGNORE);\r\n    String result = inString;\r\n    \r\n    try {\r\n    \t// Convert a string to bytes in a ByteBuffer\r\n    \tByteBuffer bbuf = encoder.encode(CharBuffer.wrap(inString));\r\n    \r\n    \t// Convert bytes in a ByteBuffer to a character ByteBuffer and then to a string.\r\n    \tCharBuffer cbuf = decoder.decode(bbuf);\r\n    \tresult = cbuf.toString();\r\n    } catch (CharacterCodingException cce) {\r\n    \tString errorMessage = &quot;Exception during character encoding/decoding: &quot; + cce.getMessage();\r\n    \tcce.printStackTrace()\r\n    }\r\n\r\n\r\n  [1]: http://www.velocityreviews.com/forums/t140837-convert-utf-8-to-ascii.html","title":"Remove Non-Ansi Chars from a UTF String and Keep Others","body":"<p>Try this, I pulled this from <a href=\"http://www.velocityreviews.com/forums/t140837-convert-utf-8-to-ascii.html\" rel=\"nofollow\">here</a> so haven't tested it</p>\n\n<pre><code>// Create a encoder and decoder for the character encoding\nCharset charset = Charset.forName(\"US-ASCII\");\nCharsetDecoder decoder = charset.newDecoder();\nCharsetEncoder encoder = charset.newEncoder();\n\n// This line is the key to removing \"unmappable\" characters.\nencoder.onUnmappableCharacter(CodingErrorAction.IGNORE);\nString result = inString;\n\ntry {\n    // Convert a string to bytes in a ByteBuffer\n    ByteBuffer bbuf = encoder.encode(CharBuffer.wrap(inString));\n\n    // Convert bytes in a ByteBuffer to a character ByteBuffer and then to a string.\n    CharBuffer cbuf = decoder.decode(bbuf);\n    result = cbuf.toString();\n} catch (CharacterCodingException cce) {\n    String errorMessage = \"Exception during character encoding/decoding: \" + cce.getMessage();\n    cce.printStackTrace()\n}\n</code></pre>\n"}],"owner":{"account_id":2764274,"reputation":129,"user_id":2380488,"accept_rate":83,"display_name":"Meilun Sheng"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1099,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1681079393,"creation_date":1372076589,"question_id":17275383,"body_markdown":"We have a java lib accpeting a UTF8 string as the input. But if there is any char which is a non-ansi char in the input, the lib may crash. So, we want to remove all non-ansi char from the string. But how to do that in java?\r\n\r\nThanks,","title":"Remove Non-Ansi Chars from a UTF String and Keep Others","body":"<p>We have a java lib accpeting a UTF8 string as the input. But if there is any char which is a non-ansi char in the input, the lib may crash. So, we want to remove all non-ansi char from the string. But how to do that in java?</p>\n\n<p>Thanks,</p>\n"},{"tags":["java","junit","mockito","junit5"],"comments":[{"owner":{"account_id":21330249,"reputation":297,"user_id":15702124,"display_name":"LenglBoy"},"score":0,"creation_date":1681077775,"post_id":75973084,"comment_id":133996765,"body_markdown":"Hint: A test should always use independent testdata. You should just mock your business-logic and not data layers and basic functions like lists/collections/... The only extern dependency you have here is the `dynamoDb` instance. That should be mocked. All other calles are basic functions you dont mock - just assert by comparing result data at the end. Just keep the scope small and clear.","body":"Hint: A test should always use independent testdata. You should just mock your business-logic and not data layers and basic functions like lists/collections/... The only extern dependency you have here is the <code>dynamoDb</code> instance. That should be mocked. All other calles are basic functions you dont mock - just assert by comparing result data at the end. Just keep the scope small and clear."},{"owner":{"account_id":28107709,"reputation":111,"user_id":21476047,"display_name":"user21476047"},"score":0,"creation_date":1681077889,"post_id":75973084,"comment_id":133996781,"body_markdown":"@LenglBoy Yes I agree but Dynamodb testing makes it difficult to mock without mocking external dependency.","body":"@LenglBoy Yes I agree but Dynamodb testing makes it difficult to mock without mocking external dependency."},{"owner":{"account_id":21330249,"reputation":297,"user_id":15702124,"display_name":"LenglBoy"},"score":0,"creation_date":1681077937,"post_id":75973084,"comment_id":133996787,"body_markdown":"Depending on the `Table` object and complexity you can use a stub there as well - never the elss can you show the real full error trace as well?","body":"Depending on the <code>Table</code> object and complexity you can use a stub there as well - never the elss can you show the real full error trace as well?"},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":0,"creation_date":1681081964,"post_id":75973084,"comment_id":133997249,"body_markdown":"How does the `dynamoDB` value get into the class that you&#39;re testing?  Your test suggests that you need this to be a mock, but you don&#39;t seem to be injecting a mock for it anywhere.","body":"How does the <code>dynamoDB</code> value get into the class that you&#39;re testing?  Your test suggests that you need this to be a mock, but you don&#39;t seem to be injecting a mock for it anywhere."}],"answers":[{"comments":[{"owner":{"account_id":21330249,"reputation":297,"user_id":15702124,"display_name":"LenglBoy"},"score":0,"creation_date":1681080586,"post_id":75973145,"comment_id":133997098,"body_markdown":"It definitly is since you mixed up the mock statements so that&#39;s why they are complaining about a missing `thenReturn` even if you have already declared a `doReturn`. Try to refactor the code, simplify mocking and rephrase your statements. If there is still a failure share the stacktrace as well and the new code.","body":"It definitly is since you mixed up the mock statements so that&#39;s why they are complaining about a missing <code>thenReturn</code> even if you have already declared a <code>doReturn</code>. Try to refactor the code, simplify mocking and rephrase your statements. If there is still a failure share the stacktrace as well and the new code."},{"owner":{"account_id":21330249,"reputation":297,"user_id":15702124,"display_name":"LenglBoy"},"score":0,"creation_date":1681081713,"post_id":75973145,"comment_id":133997225,"body_markdown":"@user21476047 specially take care of the brackets and when-statement combined with your matching phrase","body":"@user21476047 specially take care of the brackets and when-statement combined with your matching phrase"},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":1,"creation_date":1681081777,"post_id":75973145,"comment_id":133997231,"body_markdown":"This answer is correct.  The line with the problem is `doReturn(mockTable).when(dynamoDB.getTable(&quot;users&quot;));` which has the `doReturn`, but doesn&#39;t have a method call after the `when`.  Perhaps it was intended to be `doReturn(mockTable).when(dynamoDB).getTable(&quot;users&quot;);` - it&#39;s really important to get those parentheses in the right places.","body":"This answer is correct.  The line with the problem is <code>doReturn(mockTable).when(dynamoDB.getTable(&quot;users&quot;));</code> which has the <code>doReturn</code>, but doesn&#39;t have a method call after the <code>when</code>.  Perhaps it was intended to be <code>doReturn(mockTable).when(dynamoDB).getTable(&quot;users&quot;);</code> - it&#39;s really important to get those parentheses in the right places."}],"tags":[],"owner":{"account_id":21330249,"reputation":297,"user_id":15702124,"display_name":"LenglBoy"},"comment_count":3,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1681078444,"creation_date":1681078444,"answer_id":75973145,"question_id":75973084,"body_markdown":"The failure is the correct mockito grammar. So it is all about how you want you statements to be shown up and what your codestyle is about.\r\n`doReturn` and `thenReturn` are more or less the same BUT used in different ways of accessing mocking statements.\r\n\r\n    // Gramar styled: code can be read like a book. Might be longer\r\n    doReturn(&quot;mockedResult&quot;).when(myMock).theMocksCalledMethod();\r\n    \r\n    // Technical style: short but you might need to think about it shortly. Not intuitive\r\n    when(myMock.theMocksCalledMethod()).thenReturn(&quot;mockedResult&quot;);\r\n\r\n\r\nSo the conclusion is: you mixed up the styles and they are not 100% behaving the same way so you cant mix it up. Correct your syntak in one of those ways and it will work - even beside you mocked way to much :) \r\n","title":"I am using doReturn in Mockito but I keep getting UnfinishedStubbingException error because I don&#39;t have thenReturn","body":"<p>The failure is the correct mockito grammar. So it is all about how you want you statements to be shown up and what your codestyle is about.\n<code>doReturn</code> and <code>thenReturn</code> are more or less the same BUT used in different ways of accessing mocking statements.</p>\n<pre><code>// Gramar styled: code can be read like a book. Might be longer\ndoReturn(&quot;mockedResult&quot;).when(myMock).theMocksCalledMethod();\n\n// Technical style: short but you might need to think about it shortly. Not intuitive\nwhen(myMock.theMocksCalledMethod()).thenReturn(&quot;mockedResult&quot;);\n</code></pre>\n<p>So the conclusion is: you mixed up the styles and they are not 100% behaving the same way so you cant mix it up. Correct your syntak in one of those ways and it will work - even beside you mocked way to much :)</p>\n"}],"owner":{"account_id":28107709,"reputation":111,"user_id":21476047,"display_name":"user21476047"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":400,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681078444,"creation_date":1681077428,"question_id":75973084,"body_markdown":"When using `doReturn` in Mockito it doesn&#39;t have a `thenReturn` so I am confused why it keeps throwing an `UnfinishedStubbingException Unfinished stubbing detected here:\r\nE.g. thenReturn() may be missing.`. It is throwing that error for all my `doReturn`. \r\n\r\nMy code:\r\n\r\n    public List&lt;Users&gt; getUsers(String userId) {\r\n        List&lt;Users&gt; usersList = new ArrayList&lt;&gt;();\r\n        Table table = dynamoDB.getTable(&quot;users&quot;);\r\n        ItemCollection&lt;QueryOutcome&gt; items = table.getIndex(&quot;userIndex&quot;).query(QuerySpec);\r\n        Iterator&lt;Item&gt; iterator = items.iterator();\r\n        while (iterator.hasNext()) {\r\n            list.add(Util.jsonToObject(iterator.next().toJSONPretty(), Users.class));\r\n        }\r\n        return usersList;\r\n    }\r\n\r\nTest class:\r\n\r\n        List&lt;Users&gt; mockList = mock(List.class);\r\n    \tTable mockTable = mock(Table.class);\r\n    \tUsers details = new Users(&quot;&quot;, &quot;&quot;, &quot;&quot;);\r\n    \tItemCollection&lt;QueryOutcome&gt; mockCollection = mock(ItemCollection.class);\r\n    \tIteratorSupport&lt;Item, QueryOutcome&gt; mockIterator = mock(IteratorSupport.class);\r\n    \tdoReturn(mockTable).when(dynamoDB.getTable(&quot;users&quot;));\r\n    \tdoReturn(mockCollection).when(mockTable.getIndex(&quot;&quot;)).query(mock(QuerySpec.class));\r\n    \tdoReturn(mockIterator).when(mockCollection).iterator();\r\n    \tdoReturn(true).doReturn(false).when(mockIterator).hasNext();\r\n    \tdoReturn(true).when(mockList).add(details);\r\n    \tassertNotNull(dynamoService.getUser(&quot;&quot;).get(0));","title":"I am using doReturn in Mockito but I keep getting UnfinishedStubbingException error because I don&#39;t have thenReturn","body":"<p>When using <code>doReturn</code> in Mockito it doesn't have a <code>thenReturn</code> so I am confused why it keeps throwing an <code>UnfinishedStubbingException Unfinished stubbing detected here: E.g. thenReturn() may be missing.</code>. It is throwing that error for all my <code>doReturn</code>.</p>\n<p>My code:</p>\n<pre><code>public List&lt;Users&gt; getUsers(String userId) {\n    List&lt;Users&gt; usersList = new ArrayList&lt;&gt;();\n    Table table = dynamoDB.getTable(&quot;users&quot;);\n    ItemCollection&lt;QueryOutcome&gt; items = table.getIndex(&quot;userIndex&quot;).query(QuerySpec);\n    Iterator&lt;Item&gt; iterator = items.iterator();\n    while (iterator.hasNext()) {\n        list.add(Util.jsonToObject(iterator.next().toJSONPretty(), Users.class));\n    }\n    return usersList;\n}\n</code></pre>\n<p>Test class:</p>\n<pre><code>    List&lt;Users&gt; mockList = mock(List.class);\n    Table mockTable = mock(Table.class);\n    Users details = new Users(&quot;&quot;, &quot;&quot;, &quot;&quot;);\n    ItemCollection&lt;QueryOutcome&gt; mockCollection = mock(ItemCollection.class);\n    IteratorSupport&lt;Item, QueryOutcome&gt; mockIterator = mock(IteratorSupport.class);\n    doReturn(mockTable).when(dynamoDB.getTable(&quot;users&quot;));\n    doReturn(mockCollection).when(mockTable.getIndex(&quot;&quot;)).query(mock(QuerySpec.class));\n    doReturn(mockIterator).when(mockCollection).iterator();\n    doReturn(true).doReturn(false).when(mockIterator).hasNext();\n    doReturn(true).when(mockList).add(details);\n    assertNotNull(dynamoService.getUser(&quot;&quot;).get(0));\n</code></pre>\n"},{"tags":["java","android","android-fragments"],"comments":[{"owner":{"account_id":483434,"reputation":25487,"user_id":898478,"accept_rate":86,"display_name":"m0skit0"},"score":0,"creation_date":1681079044,"post_id":75972010,"comment_id":133996922,"body_markdown":"You can just [use FragmentManager and transition to your new fragment](https://developer.android.com/guide/fragments/transactions), is there any issue with that?","body":"You can just <a href=\"https://developer.android.com/guide/fragments/transactions\" rel=\"nofollow noreferrer\">use FragmentManager and transition to your new fragment</a>, is there any issue with that?"},{"owner":{"account_id":18960191,"reputation":3,"user_id":13835894,"display_name":"wabhou"},"score":0,"creation_date":1681207060,"post_id":75972010,"comment_id":134015427,"body_markdown":"thanks for your response, i try to use : getSupportFragmentManager().beginTransaction()\n                .add(R.id.container, BlankFragment.class, null);\nbut nothing is happening, i just want to show this fragment","body":"thanks for your response, i try to use : getSupportFragmentManager().beginTransaction()                 .add(R.id.container, BlankFragment.class, null); but nothing is happening, i just want to show this fragment"},{"owner":{"account_id":483434,"reputation":25487,"user_id":898478,"accept_rate":86,"display_name":"m0skit0"},"score":0,"creation_date":1681217723,"post_id":75972010,"comment_id":134017921,"body_markdown":"You didn&#39;t commit the transaction. Please read the docs again carefully.","body":"You didn&#39;t commit the transaction. Please read the docs again carefully."},{"owner":{"account_id":18960191,"reputation":3,"user_id":13835894,"display_name":"wabhou"},"score":0,"creation_date":1681641111,"post_id":75972010,"comment_id":134086265,"body_markdown":"thanks a lot, sorry that i bother you for that.","body":"thanks a lot, sorry that i bother you for that."}],"owner":{"account_id":18960191,"reputation":3,"user_id":13835894,"display_name":"wabhou"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681077813,"creation_date":1681062438,"question_id":75972010,"body_markdown":"I want to make a simple thing, but I didn&#39;t succeed to do it. I have a viewpager with five fragments and I just want that when I click on a button which is on a fragment, another fragment appears and I want to be able to handle the transition between these two fragments.\r\n\r\nSo I have my fragments and I try to put them in another viewpager so I could interact with the other fragment, but I think there is more simple and I didn&#39;t succeed to do it. I discovered dialogs, I think that what I want to do is close to that but that not exactly that because I want that my fragment takes all the screen. To be clear, I want to recreate the fragment that appears when you want to add friends on the snapchat app.\r\n\r\nIf you could help me, I would be very grateful. ","title":"fragment to another fragment like a dialog","body":"<p>I want to make a simple thing, but I didn't succeed to do it. I have a viewpager with five fragments and I just want that when I click on a button which is on a fragment, another fragment appears and I want to be able to handle the transition between these two fragments.</p>\n<p>So I have my fragments and I try to put them in another viewpager so I could interact with the other fragment, but I think there is more simple and I didn't succeed to do it. I discovered dialogs, I think that what I want to do is close to that but that not exactly that because I want that my fragment takes all the screen. To be clear, I want to recreate the fragment that appears when you want to add friends on the snapchat app.</p>\n<p>If you could help me, I would be very grateful.</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9712,"page":513,"page_size":100}
