{"items":[{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1684365376,"post_id":76273311,"comment_id":134509719,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"tags":[],"owner":{"account_id":1310169,"reputation":3813,"user_id":1258319,"accept_rate":81,"display_name":"Julian"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684356152,"creation_date":1684356152,"answer_id":76276059,"question_id":76273311,"body_markdown":"I don&#39;t think any serious application will hard code an user name and a password in their `application.properties` configuration file without providing a way to provide your own. And they should clearly document how to do this.\r\n\r\nWhat you can do is to unzip their jar and have a look at `application.properties` file and hopefully they control these values via some environment variables. If this is the case then your problem is solved. If not I am afraid you will have to stick your nose in their decompiled code and try to understand how they load those vales. Those ones from `application.properties` might be just some default values and support a different way of injecting the runtime ones such as bringing them from a config server a secrets vault, etc\r\n\r\nUltimately you should come in touch with the third party provider and ask for support.\r\n\r\nHope some of the above ideas will help.   ","title":"Is there a way to customize application properties for a third party spring boot application without source code","body":"<p>I don't think any serious application will hard code an user name and a password in their <code>application.properties</code> configuration file without providing a way to provide your own. And they should clearly document how to do this.</p>\n<p>What you can do is to unzip their jar and have a look at <code>application.properties</code> file and hopefully they control these values via some environment variables. If this is the case then your problem is solved. If not I am afraid you will have to stick your nose in their decompiled code and try to understand how they load those vales. Those ones from <code>application.properties</code> might be just some default values and support a different way of injecting the runtime ones such as bringing them from a config server a secrets vault, etc</p>\n<p>Ultimately you should come in touch with the third party provider and ask for support.</p>\n<p>Hope some of the above ideas will help.</p>\n"}],"owner":{"account_id":28621116,"reputation":1,"user_id":21914149,"display_name":"codestuck"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1684356152,"creation_date":1684334324,"question_id":76273311,"body_markdown":"I have a requirement where we use third party spring boot application jar that can be used as a stand alone application.  In the application properties file, it allows specifying user name and password.  I need to inject secret like this programmatically without source code for the third party spring boot application.  Is there a way to do this?  Thanks.\r\n\r\nI tried using the jar as a dependency but since it is an executable jar, it doesn&#39;t work.","title":"Is there a way to customize application properties for a third party spring boot application without source code","body":"<p>I have a requirement where we use third party spring boot application jar that can be used as a stand alone application.  In the application properties file, it allows specifying user name and password.  I need to inject secret like this programmatically without source code for the third party spring boot application.  Is there a way to do this?  Thanks.</p>\n<p>I tried using the jar as a dependency but since it is an executable jar, it doesn't work.</p>\n"},{"tags":["java","exception","try-catch"],"comments":[{"owner":{"account_id":1432485,"reputation":10153,"user_id":1354590,"accept_rate":100,"display_name":"kuporific"},"score":5,"creation_date":1430687533,"post_id":30019453,"comment_id":48156238,"body_markdown":"Why not put it in the `try` block below the exception throwing call?","body":"Why not put it in the <code>try</code> block below the exception throwing call?"}],"answers":[{"comments":[{"owner":{"account_id":2088642,"reputation":1076,"user_id":1858954,"display_name":"spalac24"},"score":7,"creation_date":1449853610,"post_id":30019480,"comment_id":56201549,"body_markdown":"But what if `doSomething2` throws an exception? I don&#39;t want it to be catched.","body":"But what if <code>doSomething2</code> throws an exception? I don&#39;t want it to be catched."},{"owner":{"account_id":4808328,"reputation":1059,"user_id":3882583,"display_name":"Rani Kheir"},"score":0,"creation_date":1460279424,"post_id":30019480,"comment_id":60659898,"body_markdown":"So you&#39;d want `doSomething2()` to stay in that order, but if it throws an exception it won&#39;t get caught and execute `doSomething3()`? You could place `doSomething2()` in a try catch block of its own (nested try block), and your catch could do nothing like `catch (Exception e) {}`.","body":"So you&#39;d want <code>doSomething2()</code> to stay in that order, but if it throws an exception it won&#39;t get caught and execute <code>doSomething3()</code>? You could place <code>doSomething2()</code> in a try catch block of its own (nested try block), and your catch could do nothing like <code>catch (Exception e) {}</code>."},{"owner":{"account_id":2299435,"reputation":9252,"user_id":4451732,"accept_rate":75,"display_name":"Franklin Yu"},"score":1,"creation_date":1460926177,"post_id":30019480,"comment_id":60953870,"body_markdown":"I want to initialize some final value at `doSomething()`, and if exception is thrown, I then want the final value to hold some fall-back value. How to do that then?","body":"I want to initialize some final value at <code>doSomething()</code>, and if exception is thrown, I then want the final value to hold some fall-back value. How to do that then?"},{"owner":{"account_id":1068638,"reputation":3078,"user_id":1068470,"accept_rate":82,"display_name":"ThePerson"},"score":0,"creation_date":1461189636,"post_id":30019480,"comment_id":61092046,"body_markdown":"If you want to change the value, it isn&#39;t final.","body":"If you want to change the value, it isn&#39;t final."},{"owner":{"account_id":7928636,"reputation":814,"user_id":5987269,"accept_rate":89,"display_name":"pavitran"},"score":0,"creation_date":1483888514,"post_id":30019480,"comment_id":70273448,"body_markdown":"`try {\n    doSomething1();\n    doSomething2();\n    doSomething3();\n} catch (Exception e) {\n    doSomething4();\n}`  \n@ThePerson I want to do someting like `doSomething1,2,3` execute only file all three have no exception how can I achive that?","body":"<code>try {     doSomething1();     doSomething2();     doSomething3(); } catch (Exception e) {     doSomething4(); }</code>   @ThePerson I want to do someting like <code>doSomething1,2,3</code> execute only file all three have no exception how can I achive that?"}],"tags":[],"owner":{"account_id":1068638,"reputation":3078,"user_id":1068470,"accept_rate":82,"display_name":"ThePerson"},"comment_count":5,"down_vote_count":1,"up_vote_count":22,"is_accepted":false,"score":21,"last_activity_date":1430688265,"creation_date":1430687622,"answer_id":30019480,"question_id":30019453,"body_markdown":"    try {\r\n        doSomething();\r\n        doSomething2();\r\n    } catch (Exception e) {\r\n        doSomething3();\r\n    }\r\n\r\n\r\nIn this example, `doSomething2()` will only be executed if no exception is thrown by `doSomething()`.\r\n\r\nIf an exception is thrown by `doSomething()`, `doSomething2();` will be skipped and execution will jump to `doSomething3();`\r\n\r\nAlso note, `doSomething3()` will be executed if there is an exception thrown by `doSomething2();`\r\n\r\nIf no exception is thrown, `doSomething3();` will not be executed.","title":"Java run code only if no exception is thrown in try and catch block?","body":"<pre><code>try {\n    doSomething();\n    doSomething2();\n} catch (Exception e) {\n    doSomething3();\n}\n</code></pre>\n\n<p>In this example, <code>doSomething2()</code> will only be executed if no exception is thrown by <code>doSomething()</code>.</p>\n\n<p>If an exception is thrown by <code>doSomething()</code>, <code>doSomething2();</code> will be skipped and execution will jump to <code>doSomething3();</code></p>\n\n<p>Also note, <code>doSomething3()</code> will be executed if there is an exception thrown by <code>doSomething2();</code></p>\n\n<p>If no exception is thrown, <code>doSomething3();</code> will not be executed.</p>\n"},{"comments":[{"owner":{"account_id":1816532,"reputation":427,"user_id":1651508,"accept_rate":83,"display_name":"T_T"},"score":3,"creation_date":1434483589,"post_id":30019496,"comment_id":49794449,"body_markdown":"Problem with this becomes: If `SomeException` is very general – if it could be thrown down the line by `codeThatShouldBeRunIfNoExceptionThrown`, or if that method changes to throw that exception in the future – then your catch block will (silently) no longer handle just the original exception.","body":"Problem with this becomes: If <code>SomeException</code> is very general – if it could be thrown down the line by <code>codeThatShouldBeRunIfNoExceptionThrown</code>, or if that method changes to throw that exception in the future – then your catch block will (silently) no longer handle just the original exception."},{"owner":{"account_id":100270,"reputation":127154,"user_id":270371,"accept_rate":33,"display_name":"davidxxx"},"score":0,"creation_date":1522409658,"post_id":30019496,"comment_id":86154571,"body_markdown":"@pathfinderelite You answer is fine (+1). I updated by focusing on the original requirement.","body":"@pathfinderelite You answer is fine (+1). I updated by focusing on the original requirement."}],"tags":[],"owner":{"account_id":338170,"reputation":3057,"user_id":666884,"display_name":"pathfinderelite"},"comment_count":2,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1522409605,"creation_date":1430687679,"answer_id":30019496,"question_id":30019453,"body_markdown":"Just put the code in the `try` block.  If an exception is thrown, it will skip to the `catch` block.  If no exception is thrown, the code will just run.\r\n\r\n    try {\r\n        someMethodThatMayThrowException();\r\n        codeThatShouldBeRunIfNoExceptionThrown();\r\n    } catch (Exception e) {...}","title":"Java run code only if no exception is thrown in try and catch block?","body":"<p>Just put the code in the <code>try</code> block.  If an exception is thrown, it will skip to the <code>catch</code> block.  If no exception is thrown, the code will just run.</p>\n\n<pre><code>try {\n    someMethodThatMayThrowException();\n    codeThatShouldBeRunIfNoExceptionThrown();\n} catch (Exception e) {...}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1556313,"reputation":13459,"user_id":1447296,"accept_rate":100,"display_name":"adjan"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1430688187,"creation_date":1430687707,"answer_id":30019503,"question_id":30019453,"body_markdown":"Exceptions for flow control is kind of a bad practice. If you insist, use a `boolean` variable.\r\n\r\n\r\n    boolean thrown = false;\r\n\r\n    try {\r\n       //do something\r\n    } catch (Exception e) {\r\n       thrown = true;\r\n    }\r\n\r\n    //do something only if nothing was thrown\r\n\r\n    if (!thrown) { \r\n        // do stuff\r\n    }","title":"Java run code only if no exception is thrown in try and catch block?","body":"<p>Exceptions for flow control is kind of a bad practice. If you insist, use a <code>boolean</code> variable.</p>\n\n<pre><code>boolean thrown = false;\n\ntry {\n   //do something\n} catch (Exception e) {\n   thrown = true;\n}\n\n//do something only if nothing was thrown\n\nif (!thrown) { \n    // do stuff\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":100270,"reputation":127154,"user_id":270371,"accept_rate":33,"display_name":"davidxxx"},"score":0,"creation_date":1522409519,"post_id":30019506,"comment_id":86154507,"body_markdown":"The first way is really the natural way to do. The second that introduces a local variable and a reading indirection brings no advantage here.","body":"The first way is really the natural way to do. The second that introduces a local variable and a reading indirection brings no advantage here."},{"owner":{"account_id":4819600,"reputation":56500,"user_id":3890632,"display_name":"khelwood"},"score":6,"creation_date":1531210286,"post_id":30019506,"comment_id":89498526,"body_markdown":"@davidxxx &quot;brings no advantage&quot; -- It depends on the use case. There are situations where you might want the second task to be executed outside the `try` block instead of inside. You might not want executions from the second block to be handled the same way as exceptions in the first block.","body":"@davidxxx &quot;brings no advantage&quot; -- It depends on the use case. There are situations where you might want the second task to be executed outside the <code>try</code> block instead of inside. You might not want executions from the second block to be handled the same way as exceptions in the first block."}],"tags":[],"owner":{"account_id":4819600,"reputation":56500,"user_id":3890632,"display_name":"khelwood"},"comment_count":2,"down_vote_count":1,"up_vote_count":64,"is_accepted":true,"score":63,"last_activity_date":1522329988,"creation_date":1430687724,"answer_id":30019506,"question_id":30019453,"body_markdown":"Here are two ways:\r\n\r\n    try {\r\n        somethingThatMayThrowAnException();\r\n        somethingElseAfterwards();\r\n    } catch (...) {\r\n        ...\r\n    }\r\n\r\nOr if you want your second block of code to be outside the `try` block:\r\n    \r\n    boolean success = false;\r\n    try {\r\n        somethingThatMayThrowAnException();\r\n        success = true;\r\n    } catch (...) {\r\n        ...\r\n    }\r\n    if (success) {\r\n        somethingElseAfterwards();\r\n    }\r\n\r\nYou could also put the `if` statement in a `finally` block, but there is not enough information in your question to tell if that would be preferable or not.","title":"Java run code only if no exception is thrown in try and catch block?","body":"<p>Here are two ways:</p>\n\n<pre><code>try {\n    somethingThatMayThrowAnException();\n    somethingElseAfterwards();\n} catch (...) {\n    ...\n}\n</code></pre>\n\n<p>Or if you want your second block of code to be outside the <code>try</code> block:</p>\n\n<pre><code>boolean success = false;\ntry {\n    somethingThatMayThrowAnException();\n    success = true;\n} catch (...) {\n    ...\n}\nif (success) {\n    somethingElseAfterwards();\n}\n</code></pre>\n\n<p>You could also put the <code>if</code> statement in a <code>finally</code> block, but there is not enough information in your question to tell if that would be preferable or not.</p>\n"},{"comments":[{"owner":{"account_id":100270,"reputation":127154,"user_id":270371,"accept_rate":33,"display_name":"davidxxx"},"score":0,"creation_date":1522409767,"post_id":49557427,"comment_id":86154610,"body_markdown":"Best part of the accepted answer (first part and not the second :)) with a bonus ! :)","body":"Best part of the accepted answer (first part and not the second :)) with a bonus ! :)"},{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":0,"creation_date":1522412762,"post_id":49557427,"comment_id":86156197,"body_markdown":"@davidxxx Thanks. Always a pleasure hearing from you ;-)","body":"@davidxxx Thanks. Always a pleasure hearing from you ;-)"}],"tags":[],"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1522330289,"creation_date":1522330289,"answer_id":49557427,"question_id":30019453,"body_markdown":"An enhancement to the proposed\r\n\r\n    try {\r\n        somethingThatMayThrowAnException();\r\n        somethingElseAfterwards();\r\n    } catch (...) {\r\n        ...\r\n    }\r\n\r\nfrom the accepted answer. What you should do is:\r\n\r\n    void foo() {\r\n      try {\r\n        doStuff();\r\n      } catch (...) {\r\n        handleException();\r\n      }\r\n    }\r\n\r\nThe above feels like overkill to someone who hasn&#39;t been exposed to &quot;clean code thinking&quot;. \r\n\r\nBut the point here: you do **not** want to mix different abstractions within one method. In other words: you don&#39;t have one try block, and more code following behind that within the same method. \r\n\r\nYou make sure that each and any method contains a straight forward path - you avoid anything that complicates your reading flow. As soon as you get used to writing and reading *such* kind of code you will find that it takes you dramatically less time to understand your code. ","title":"Java run code only if no exception is thrown in try and catch block?","body":"<p>An enhancement to the proposed</p>\n\n<pre><code>try {\n    somethingThatMayThrowAnException();\n    somethingElseAfterwards();\n} catch (...) {\n    ...\n}\n</code></pre>\n\n<p>from the accepted answer. What you should do is:</p>\n\n<pre><code>void foo() {\n  try {\n    doStuff();\n  } catch (...) {\n    handleException();\n  }\n}\n</code></pre>\n\n<p>The above feels like overkill to someone who hasn't been exposed to \"clean code thinking\". </p>\n\n<p>But the point here: you do <strong>not</strong> want to mix different abstractions within one method. In other words: you don't have one try block, and more code following behind that within the same method. </p>\n\n<p>You make sure that each and any method contains a straight forward path - you avoid anything that complicates your reading flow. As soon as you get used to writing and reading <em>such</em> kind of code you will find that it takes you dramatically less time to understand your code. </p>\n"},{"tags":[],"owner":{"account_id":5418293,"reputation":26,"user_id":4312815,"display_name":"Mobus Dorphin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1592020302,"creation_date":1592020302,"answer_id":62355310,"question_id":30019453,"body_markdown":"I was trying to solve this exact problem when I came across this question, and the answers here helped me think it through and realize, at least in my particular case, this was the wrong question I should have been asking.  \r\n\r\nI wanted to create this method because I was already doing it in main() and wanted to do it elsewhere for portability.  So I copied a block of code that contained a try/catch block.  However, it turns out, I don&#39;t want to copy the catch block at all, because if the creation of the Connection failed, I just wanted to fail completely.  \r\n\r\nIt seems obvious now, but I never wanted to actually catch the exception in the first place.  That code was only there because I copy and pasted it.  So if you find yourself asking this question because you&#39;re in a try block and you might not generate a value, then consider if you just wanted to fail completely and not return anything that way this extra code is unnecessary. ","title":"Java run code only if no exception is thrown in try and catch block?","body":"<p>I was trying to solve this exact problem when I came across this question, and the answers here helped me think it through and realize, at least in my particular case, this was the wrong question I should have been asking.  </p>\n\n<p>I wanted to create this method because I was already doing it in main() and wanted to do it elsewhere for portability.  So I copied a block of code that contained a try/catch block.  However, it turns out, I don't want to copy the catch block at all, because if the creation of the Connection failed, I just wanted to fail completely.  </p>\n\n<p>It seems obvious now, but I never wanted to actually catch the exception in the first place.  That code was only there because I copy and pasted it.  So if you find yourself asking this question because you're in a try block and you might not generate a value, then consider if you just wanted to fail completely and not return anything that way this extra code is unnecessary. </p>\n"},{"tags":[],"owner":{"account_id":17017620,"reputation":185,"user_id":12311071,"display_name":"Harry"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684355950,"creation_date":1684355950,"answer_id":76276034,"question_id":30019453,"body_markdown":"In my opinion the cleanest way to solve this, if you don&#39;t need the function to anything extra if an exception was raised, is return.\r\n```java\r\ntry  {\r\n    doSomthing();\r\n}\r\ncatch (Exception e) {\r\n    handleException();\r\n    return;\r\n}\r\n\r\nonlyIfSuccess();\r\n```","title":"Java run code only if no exception is thrown in try and catch block?","body":"<p>In my opinion the cleanest way to solve this, if you don't need the function to anything extra if an exception was raised, is return.</p>\n<pre class=\"lang-java prettyprint-override\"><code>try  {\n    doSomthing();\n}\ncatch (Exception e) {\n    handleException();\n    return;\n}\n\nonlyIfSuccess();\n</code></pre>\n"}],"owner":{"account_id":1388354,"reputation":17373,"user_id":1319799,"accept_rate":46,"display_name":"Muhammad Umer"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":61881,"favorite_count":0,"down_vote_count":0,"up_vote_count":36,"accepted_answer_id":30019506,"answer_count":7,"score":36,"last_activity_date":1684355950,"creation_date":1430687444,"question_id":30019453,"body_markdown":"How do I make it so the code runs only if there was no exception thrown?\r\n\r\nWith finally code runs whether there was an exception or not.\r\n\r\n    try {\r\n       //do something\r\n    } catch (Exception e) {}\r\n    //do something only if nothing was thrown\r\n","title":"Java run code only if no exception is thrown in try and catch block?","body":"<p>How do I make it so the code runs only if there was no exception thrown?</p>\n\n<p>With finally code runs whether there was an exception or not.</p>\n\n<pre><code>try {\n   //do something\n} catch (Exception e) {}\n//do something only if nothing was thrown\n</code></pre>\n"},{"tags":["java","project-reactor","nonblocking","reactive-streams"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1684348416,"post_id":76275150,"comment_id":134506849,"body_markdown":"Don&#39;t use `sleep`, that will halt the reactor thread. If you want to pause use `delayElement`.","body":"Don&#39;t use <code>sleep</code>, that will halt the reactor thread. If you want to pause use <code>delayElement</code>."},{"owner":{"account_id":8023174,"reputation":9194,"user_id":6051176,"display_name":"Martin Tarj&#225;nyi"},"score":1,"creation_date":1684349678,"post_id":76275150,"comment_id":134507084,"body_markdown":"use `Mono.fromCallable(this::getString)`","body":"use <code>Mono.fromCallable(this::getString)</code>"},{"owner":{"account_id":78088,"reputation":35600,"user_id":222467,"accept_rate":67,"display_name":"Igor Artamonov"},"score":2,"creation_date":1684350360,"post_id":76275150,"comment_id":134507240,"body_markdown":"You block it _before_ the Mono even started, when you call `getString` to pass the resulting into the Mono. Just call it from the inside of a Mono, like `fromCallable`","body":"You block it <i>before</i> the Mono even started, when you call <code>getString</code> to pass the resulting into the Mono. Just call it from the inside of a Mono, like <code>fromCallable</code>"},{"owner":{"account_id":16453853,"reputation":29,"user_id":11886595,"display_name":"Rionash"},"score":0,"creation_date":1684357519,"post_id":76275150,"comment_id":134508608,"body_markdown":"Thank you all for the answer!\nI have another question, if I&#39;d like to use Flux instead of Mono to in this case, but Flux doesn&#39;t provide fromCallable() or fromSupplier() feature, how can I achieve the same result?","body":"Thank you all for the answer! I have another question, if I&#39;d like to use Flux instead of Mono to in this case, but Flux doesn&#39;t provide fromCallable() or fromSupplier() feature, how can I achieve the same result?"},{"owner":{"account_id":78088,"reputation":35600,"user_id":222467,"accept_rate":67,"display_name":"Igor Artamonov"},"score":1,"creation_date":1684358809,"post_id":76275150,"comment_id":134508846,"body_markdown":"Flux is a version of a Publisher with multiple elements, while a `Callable` result is just a single value. That&#39;s why it supposed to be used as a single-element Mono. But if you want to make a Flux with just one element in it you can do `Flux.from(Mono.fromCallable {})`","body":"Flux is a version of a Publisher with multiple elements, while a <code>Callable</code> result is just a single value. That&#39;s why it supposed to be used as a single-element Mono. But if you want to make a Flux with just one element in it you can do <code>Flux.from(Mono.fromCallable {})</code>"}],"answers":[{"comments":[{"owner":{"account_id":9339990,"reputation":1712,"user_id":6933090,"display_name":"Yevhenii Semenov"},"score":0,"creation_date":1684692091,"post_id":76275996,"comment_id":134550493,"body_markdown":"@rionash Did this answer assist you in resolving your issue?","body":"@rionash Did this answer assist you in resolving your issue?"}],"tags":[],"owner":{"account_id":9339990,"reputation":1712,"user_id":6933090,"display_name":"Yevhenii Semenov"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1684355553,"creation_date":1684355553,"answer_id":76275996,"question_id":76275150,"body_markdown":"First of all, it is crucial to understand that Reactor does not perform any magical conversion of blocking calls to non-blocking ones. To make an end-to-end non-blocking application, you need to use non-blocking drivers, NIO, etc. If you wrap your blocking code to the `Mono` or `Flux`, the thread is still will be blocked. \r\n\r\nAs for your second example, with sleep in the `getString` method. There are two points to pay attention at:\r\n\r\n**The first one**: you use `Mono.just`. The important thing is that it is usually used to provide a known value immediately. It means that the `getString` calculation is happening not in the scope of the reactor chain, but in the main thread during the reactor chain assembling phase. That&#39;s why you see &quot;sequential&quot; behavior. If you replace it with `Mono.fromCallable`, then the calculation will be in the reactor chain (parallel scheduler threads), and you will see the same behavior as in the 1 or 3 examples. \r\n\r\n**The second one**: It&#39;s important to note, that wrapping your `getString` method to the `Mono.fromCallable` does not make your code non-blocking. Your `sleep` still halts the threads of the parallel scheduler. In your production code, your `getString` method will likely be some database call or other service call that should be done via a non-blocking driver or NIO-based lib like Netty. To emulate it use `delayElement` instead of `sleep`, it works in a non-blocking way. Here is an example:\r\n\r\n```java\r\npublic static void main(String[] args) throws InterruptedException {\r\n    for (int i = 0; i &lt; 3; i++) {\r\n        getString()\r\n            .map(s -&gt; {\r\n                System.out.println(Instant.now() + &quot; Thread:&quot; + Thread.currentThread().getName() + &quot; &quot; + s);\r\n                return s.length();\r\n            })\r\n            .subscribeOn(Schedulers.parallel())\r\n            .subscribe();\r\n        System.out.println(Instant.now() + &quot; Loop: &quot; + i + &quot; &quot; + &quot;after MONO&quot;);\r\n    }\r\n\r\n    TimeUnit.SECONDS.sleep(10);\r\n}\r\n\r\npublic static Mono&lt;String&gt; getString() {\r\n    return Mono.delay(Duration.ofSeconds(3))\r\n        .map(it -&gt; &quot;hello world&quot;);\r\n}\r\n```\r\n\r\nIt prints\r\n```java\r\n2023-05-17T20:31:12.099464Z Loop: 0 after MONO\r\n2023-05-17T20:31:12.112953Z Loop: 1 after MONO\r\n2023-05-17T20:31:12.113145Z Loop: 2 after MONO\r\n2023-05-17T20:31:15.105750Z Thread:parallel-2 hello world\r\n2023-05-17T20:31:15.117944Z Thread:parallel-5 hello world\r\n2023-05-17T20:31:15.117944Z Thread:parallel-6 hello world\r\n```\r\n","title":"Mono.just() is still blocking in my use case when the emitted element is pending","body":"<p>First of all, it is crucial to understand that Reactor does not perform any magical conversion of blocking calls to non-blocking ones. To make an end-to-end non-blocking application, you need to use non-blocking drivers, NIO, etc. If you wrap your blocking code to the <code>Mono</code> or <code>Flux</code>, the thread is still will be blocked.</p>\n<p>As for your second example, with sleep in the <code>getString</code> method. There are two points to pay attention at:</p>\n<p><strong>The first one</strong>: you use <code>Mono.just</code>. The important thing is that it is usually used to provide a known value immediately. It means that the <code>getString</code> calculation is happening not in the scope of the reactor chain, but in the main thread during the reactor chain assembling phase. That's why you see &quot;sequential&quot; behavior. If you replace it with <code>Mono.fromCallable</code>, then the calculation will be in the reactor chain (parallel scheduler threads), and you will see the same behavior as in the 1 or 3 examples.</p>\n<p><strong>The second one</strong>: It's important to note, that wrapping your <code>getString</code> method to the <code>Mono.fromCallable</code> does not make your code non-blocking. Your <code>sleep</code> still halts the threads of the parallel scheduler. In your production code, your <code>getString</code> method will likely be some database call or other service call that should be done via a non-blocking driver or NIO-based lib like Netty. To emulate it use <code>delayElement</code> instead of <code>sleep</code>, it works in a non-blocking way. Here is an example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) throws InterruptedException {\n    for (int i = 0; i &lt; 3; i++) {\n        getString()\n            .map(s -&gt; {\n                System.out.println(Instant.now() + &quot; Thread:&quot; + Thread.currentThread().getName() + &quot; &quot; + s);\n                return s.length();\n            })\n            .subscribeOn(Schedulers.parallel())\n            .subscribe();\n        System.out.println(Instant.now() + &quot; Loop: &quot; + i + &quot; &quot; + &quot;after MONO&quot;);\n    }\n\n    TimeUnit.SECONDS.sleep(10);\n}\n\npublic static Mono&lt;String&gt; getString() {\n    return Mono.delay(Duration.ofSeconds(3))\n        .map(it -&gt; &quot;hello world&quot;);\n}\n</code></pre>\n<p>It prints</p>\n<pre class=\"lang-java prettyprint-override\"><code>2023-05-17T20:31:12.099464Z Loop: 0 after MONO\n2023-05-17T20:31:12.112953Z Loop: 1 after MONO\n2023-05-17T20:31:12.113145Z Loop: 2 after MONO\n2023-05-17T20:31:15.105750Z Thread:parallel-2 hello world\n2023-05-17T20:31:15.117944Z Thread:parallel-5 hello world\n2023-05-17T20:31:15.117944Z Thread:parallel-6 hello world\n</code></pre>\n"}],"owner":{"account_id":16453853,"reputation":29,"user_id":11886595,"display_name":"Rionash"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":418,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1684355553,"creation_date":1684347806,"question_id":76275150,"body_markdown":"I have two test that use sleep() to simulate an api call which takes time to process, and test if Mono.just() make it non-blocking.\r\n\r\nIn my first test, I emitted a String directly, but made it blocking in map().\r\n```\r\n    @Test\r\n    public void testMono() throws InterruptedException {\r\n\r\n        for (int i = 0; i &lt; 10; i++) {\r\n            Mono.just(&quot;Hello World&quot;)\r\n                    .map(s -&gt; {\r\n                        System.out.println(&quot;Thread:&quot; + Thread.currentThread().getName() + &quot; &quot; + s);\r\n                        try {\r\n                            sleep(2000);\r\n                        } catch (InterruptedException e) {\r\n                            e.printStackTrace();\r\n                        }\r\n                        return s.length();\r\n                    })\r\n                    .map(integer -&gt; {\r\n                        try {\r\n                            sleep(3000);\r\n                        } catch (InterruptedException e) {\r\n                            e.printStackTrace();\r\n                        }\r\n                        return integer.toString();\r\n                    })\r\n                    .subscribeOn(Schedulers.parallel())\r\n\r\n                    .subscribe(System.out::println);\r\n\r\n            System.out.println(&quot;Loop: &quot; + i + &quot; &quot; + &quot;after MONO&quot;);\r\n        }\r\n\r\n        sleep(10000);\r\n    }\r\n```\r\n\r\nAnd the result is expected as non-blocking, since all the outputs `System.out.println(&quot;Loop: &quot; + i + &quot; &quot; + &quot;after MONO&quot;);` show up together at the same time.\r\n\r\nHowever, in the second test, I replace the emitted element from &quot;Hello world&quot; to a blocking getString() method. The purpose of put sleep() in getString() is that, I&#39;d like to simulate the scenario that it&#39;s taking time to get the emitted element. \r\nAnd the result is now blocking since the output shows up one by one after it finished receiving the emitted element.  \r\n```\r\n    @Test\r\n    public void testMono2() throws InterruptedException {\r\n\r\n        for (int i = 0; i &lt; 10; i++) {\r\n            Mono.just(getString())\r\n                    .map(s -&gt; {\r\n                        System.out.println(&quot;Thread:&quot; + Thread.currentThread().getName() + &quot; &quot; + s);\r\n                        try {\r\n                            sleep(2000);\r\n                        } catch (InterruptedException e) {\r\n                            e.printStackTrace();\r\n                        }\r\n                        return s.length();\r\n                    })\r\n                    .map(integer -&gt; {\r\n                        try {\r\n                            sleep(3000);\r\n                        } catch (InterruptedException e) {\r\n                            e.printStackTrace();\r\n                        }\r\n                        return integer.toString();\r\n                    })\r\n                    .subscribeOn(Schedulers.parallel())\r\n\r\n                    .subscribe(System.out::println);\r\n\r\n            System.out.println(&quot;Loop: &quot; + i + &quot; &quot; + &quot;after MONO&quot;);\r\n        }\r\n\r\n        sleep(10000);\r\n    }\r\n\r\n    public String getString(){\r\n        try {\r\n            sleep(2000);\r\n        } catch (InterruptedException e) {\r\n            e.printStackTrace();\r\n        }\r\n        return &quot;Hello world&quot;;\r\n    }\r\n```\r\n\r\nAnd in the third test, it&#39;s also acting as non-blocking.\r\n```\r\n    int count = 0;\r\n\r\n    @Test\r\n    public void testFluxSink() throws InterruptedException {\r\n        for (int i = 0; i &lt; 10; i++) {\r\n            System.out.println(&quot;Start Loop: &quot; + i);\r\n            int curLoop = count++;\r\n            Flux.create(fluxSink -&gt; {\r\n                try {\r\n                    System.out.println(&quot;Loop: &quot; + curLoop + &quot; &quot; + &quot; start sleeping&quot;);\r\n                    sleep(5000);\r\n                    System.out.println(&quot;Loop: &quot; + curLoop + &quot; &quot; + &quot; end sleeping&quot;);\r\n                    fluxSink.next(onNext());\r\n                } catch (InterruptedException e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }).subscribeOn(Schedulers.parallel()).subscribe(s -&gt; {\r\n                System.out.println(Thread.currentThread());\r\n                System.out.println(&quot;Loop: &quot; + curLoop + &quot; &quot; + &quot;completed receiving&quot; + &quot; &quot; + s);\r\n            });\r\n        }\r\n        sleep(100000);\r\n    }\r\n\r\n    public String onNext() throws InterruptedException {\r\n        sleep(5000);\r\n        return &quot;onNext&quot;;\r\n    }\r\n```\r\n\r\n\r\nWondering if I misunderstand the concept of reactor, and would like to know how did I use it in the wrong way for the 2nd test?\r\n","title":"Mono.just() is still blocking in my use case when the emitted element is pending","body":"<p>I have two test that use sleep() to simulate an api call which takes time to process, and test if Mono.just() make it non-blocking.</p>\n<p>In my first test, I emitted a String directly, but made it blocking in map().</p>\n<pre><code>    @Test\n    public void testMono() throws InterruptedException {\n\n        for (int i = 0; i &lt; 10; i++) {\n            Mono.just(&quot;Hello World&quot;)\n                    .map(s -&gt; {\n                        System.out.println(&quot;Thread:&quot; + Thread.currentThread().getName() + &quot; &quot; + s);\n                        try {\n                            sleep(2000);\n                        } catch (InterruptedException e) {\n                            e.printStackTrace();\n                        }\n                        return s.length();\n                    })\n                    .map(integer -&gt; {\n                        try {\n                            sleep(3000);\n                        } catch (InterruptedException e) {\n                            e.printStackTrace();\n                        }\n                        return integer.toString();\n                    })\n                    .subscribeOn(Schedulers.parallel())\n\n                    .subscribe(System.out::println);\n\n            System.out.println(&quot;Loop: &quot; + i + &quot; &quot; + &quot;after MONO&quot;);\n        }\n\n        sleep(10000);\n    }\n</code></pre>\n<p>And the result is expected as non-blocking, since all the outputs <code>System.out.println(&quot;Loop: &quot; + i + &quot; &quot; + &quot;after MONO&quot;);</code> show up together at the same time.</p>\n<p>However, in the second test, I replace the emitted element from &quot;Hello world&quot; to a blocking getString() method. The purpose of put sleep() in getString() is that, I'd like to simulate the scenario that it's taking time to get the emitted element.\nAnd the result is now blocking since the output shows up one by one after it finished receiving the emitted element.</p>\n<pre><code>    @Test\n    public void testMono2() throws InterruptedException {\n\n        for (int i = 0; i &lt; 10; i++) {\n            Mono.just(getString())\n                    .map(s -&gt; {\n                        System.out.println(&quot;Thread:&quot; + Thread.currentThread().getName() + &quot; &quot; + s);\n                        try {\n                            sleep(2000);\n                        } catch (InterruptedException e) {\n                            e.printStackTrace();\n                        }\n                        return s.length();\n                    })\n                    .map(integer -&gt; {\n                        try {\n                            sleep(3000);\n                        } catch (InterruptedException e) {\n                            e.printStackTrace();\n                        }\n                        return integer.toString();\n                    })\n                    .subscribeOn(Schedulers.parallel())\n\n                    .subscribe(System.out::println);\n\n            System.out.println(&quot;Loop: &quot; + i + &quot; &quot; + &quot;after MONO&quot;);\n        }\n\n        sleep(10000);\n    }\n\n    public String getString(){\n        try {\n            sleep(2000);\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n        return &quot;Hello world&quot;;\n    }\n</code></pre>\n<p>And in the third test, it's also acting as non-blocking.</p>\n<pre><code>    int count = 0;\n\n    @Test\n    public void testFluxSink() throws InterruptedException {\n        for (int i = 0; i &lt; 10; i++) {\n            System.out.println(&quot;Start Loop: &quot; + i);\n            int curLoop = count++;\n            Flux.create(fluxSink -&gt; {\n                try {\n                    System.out.println(&quot;Loop: &quot; + curLoop + &quot; &quot; + &quot; start sleeping&quot;);\n                    sleep(5000);\n                    System.out.println(&quot;Loop: &quot; + curLoop + &quot; &quot; + &quot; end sleeping&quot;);\n                    fluxSink.next(onNext());\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                }\n            }).subscribeOn(Schedulers.parallel()).subscribe(s -&gt; {\n                System.out.println(Thread.currentThread());\n                System.out.println(&quot;Loop: &quot; + curLoop + &quot; &quot; + &quot;completed receiving&quot; + &quot; &quot; + s);\n            });\n        }\n        sleep(100000);\n    }\n\n    public String onNext() throws InterruptedException {\n        sleep(5000);\n        return &quot;onNext&quot;;\n    }\n</code></pre>\n<p>Wondering if I misunderstand the concept of reactor, and would like to know how did I use it in the wrong way for the 2nd test?</p>\n"},{"tags":["java","generics"],"comments":[{"owner":{"account_id":1761010,"reputation":1567,"user_id":1608143,"display_name":"Mason T."},"score":0,"creation_date":1390832232,"post_id":21383139,"comment_id":32248997,"body_markdown":"Which java version are you using?","body":"Which java version are you using?"},{"owner":{"account_id":3452279,"reputation":37360,"user_id":2891664,"accept_rate":100,"display_name":"Radiodef"},"score":1,"creation_date":1390832252,"post_id":21383139,"comment_id":32249016,"body_markdown":"@Mason It must be Java 7+ because of the `&lt;&gt;`.","body":"@Mason It must be Java 7+ because of the <code>&lt;&gt;</code>."},{"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"score":0,"creation_date":1390832288,"post_id":21383139,"comment_id":32249042,"body_markdown":"possible duplicate of [java generic and wild card](http://stackoverflow.com/questions/7344330/java-generic-and-wild-card)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/7344330/java-generic-and-wild-card\">java generic and wild card</a>"},{"owner":{"account_id":1761010,"reputation":1567,"user_id":1608143,"display_name":"Mason T."},"score":0,"creation_date":1390832384,"post_id":21383139,"comment_id":32249119,"body_markdown":"@Radiodef Never know could have had an error with his initialization of the List.","body":"@Radiodef Never know could have had an error with his initialization of the List."},{"owner":{"account_id":2095246,"reputation":43828,"user_id":1864167,"accept_rate":90,"display_name":"Jeroen Vannevel"},"score":0,"creation_date":1390832418,"post_id":21383139,"comment_id":32249139,"body_markdown":"Just make it `List&lt;Number&gt;` instead of the generic wildcard. You can&#39;t know how the type will get filled in so it will throw an error.","body":"Just make it <code>List&lt;Number&gt;</code> instead of the generic wildcard. You can&#39;t know how the type will get filled in so it will throw an error."},{"owner":{"account_id":3452279,"reputation":37360,"user_id":2891664,"accept_rate":100,"display_name":"Radiodef"},"score":0,"creation_date":1390832469,"post_id":21383139,"comment_id":32249172,"body_markdown":"@Mason That said, I am actually not sure why this would compile because `&lt;&gt;` implies type inference. You cannot do `new ArrayList&lt;? extends Number&gt;` so I don&#39;t know why the `&lt;&gt;` would be allowed. I am not sure what Java 7 would infer in that case.","body":"@Mason That said, I am actually not sure why this would compile because <code>&lt;&gt;</code> implies type inference. You cannot do <code>new ArrayList&lt;? extends Number&gt;</code> so I don&#39;t know why the <code>&lt;&gt;</code> would be allowed. I am not sure what Java 7 would infer in that case."},{"owner":{"account_id":1761010,"reputation":1567,"user_id":1608143,"display_name":"Mason T."},"score":0,"creation_date":1390832549,"post_id":21383139,"comment_id":32249238,"body_markdown":"@Radiodef good point, I need to test.","body":"@Radiodef good point, I need to test."}],"answers":[{"comments":[{"owner":{"account_id":14105282,"reputation":657,"user_id":10189517,"display_name":"HKIT"},"score":0,"creation_date":1665287643,"post_id":21383175,"comment_id":130662997,"body_markdown":"why can&#39;t we add Number type, all elements inside are Number, just like we can get list item as number.","body":"why can&#39;t we add Number type, all elements inside are Number, just like we can get list item as number."},{"owner":{"account_id":1559142,"reputation":4127,"user_id":3084258,"accept_rate":100,"display_name":"Filipp Voronov"},"score":0,"creation_date":1665991504,"post_id":21383175,"comment_id":130820140,"body_markdown":"because for example in a cell with type `Lost&lt;? extends Number&gt;` can be `List&lt;Integer&gt;` and you can&#39;t add `Number` in case it&#39;s 3.14","body":"because for example in a cell with type <code>Lost&lt;? extends Number&gt;</code> can be <code>List&lt;Integer&gt;</code> and you can&#39;t add <code>Number</code> in case it&#39;s 3.14"}],"tags":[],"owner":{"account_id":1559142,"reputation":4127,"user_id":3084258,"accept_rate":100,"display_name":"Filipp Voronov"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1390832266,"creation_date":1390832266,"answer_id":21383175,"question_id":21383139,"body_markdown":"Because `List&lt;? extends Number&gt;` means that your variable `l` holds a value of type `List` with **concrete** (but unknown!) type argument that extends `Number`.\r\n\r\nYou can add only `null`, because `l` can hold a `List&lt;MyClass&gt;` for example, where `MyClass` is your class that extends `Number`, but nor `Integer`, nor `Double` value can be casted to `MyClass`.","title":"Why can&#39;t add element in a upper bound generics List?","body":"<p>Because <code>List&lt;? extends Number&gt;</code> means that your variable <code>l</code> holds a value of type <code>List</code> with <strong>concrete</strong> (but unknown!) type argument that extends <code>Number</code>.</p>\n\n<p>You can add only <code>null</code>, because <code>l</code> can hold a <code>List&lt;MyClass&gt;</code> for example, where <code>MyClass</code> is your class that extends <code>Number</code>, but nor <code>Integer</code>, nor <code>Double</code> value can be casted to <code>MyClass</code>.</p>\n"},{"comments":[{"owner":{"account_id":3452279,"reputation":37360,"user_id":2891664,"accept_rate":100,"display_name":"Radiodef"},"score":3,"creation_date":1390832692,"post_id":21383293,"comment_id":32249331,"body_markdown":"Crucially, the wildcard means that the List *once had a type* but *we don&#39;t know what it is anymore*.","body":"Crucially, the wildcard means that the List <i>once had a type</i> but <i>we don&#39;t know what it is anymore</i>."},{"owner":{"account_id":265464,"reputation":38253,"user_id":552438,"display_name":"Anthony Grist"},"score":4,"creation_date":1390832718,"post_id":21383293,"comment_id":32249354,"body_markdown":"&quot;boy, this is harder to explain than it is to understand :)&quot; That&#39;s true of most things, I think.","body":"&quot;boy, this is harder to explain than it is to understand :)&quot; That&#39;s true of most things, I think."},{"owner":{"account_id":65834,"reputation":9352,"user_id":193467,"accept_rate":83,"display_name":"angryITguy"},"score":0,"creation_date":1581385296,"post_id":21383293,"comment_id":106406938,"body_markdown":"@AnthonyGrist true, you have to read it a couple of times, but it is correctly written..","body":"@AnthonyGrist true, you have to read it a couple of times, but it is correctly written.."}],"tags":[],"owner":{"account_id":1049814,"reputation":11925,"user_id":1054021,"accept_rate":81,"display_name":"Tobb"},"comment_count":3,"down_vote_count":0,"up_vote_count":43,"is_accepted":false,"score":43,"last_activity_date":1539674773,"creation_date":1390832562,"answer_id":21383293,"question_id":21383139,"body_markdown":"`List&lt;? extends Number&gt;` does not mean &quot;a list that can hold all objects of subclasses of `Number`&quot;, it means &quot;a list parameterized to one concrete class that extends `Number`&quot;. It&#39;s not the contents of the list itself you are defining, it&#39;s what the parameterized type of the actual list-object assigned to the variable can be (boy, this is harder to explain than it is to understand :) )\r\n\r\nSo, you can do:\r\n\r\n    List&lt;? extends Number&gt; l = new ArrayList&lt;Integer&gt;();\r\n    List&lt;? extends Number&gt; l = new ArrayList&lt;Double&gt;();\r\n\r\nIf you want a list that is able to hold any object of class Number or its subclasses, just do this:\r\n\r\n    List&lt;Number&gt; l = new ArrayList&lt;&gt;();\r\n\r\n    l.add(new Integer(33));\r\n    l.add(new Double(33.3d));\r\n\r\n(The boxing of the values inserted is unnecessary, but there for clarity..)","title":"Why can&#39;t add element in a upper bound generics List?","body":"<p><code>List&lt;? extends Number&gt;</code> does not mean \"a list that can hold all objects of subclasses of <code>Number</code>\", it means \"a list parameterized to one concrete class that extends <code>Number</code>\". It's not the contents of the list itself you are defining, it's what the parameterized type of the actual list-object assigned to the variable can be (boy, this is harder to explain than it is to understand :) )</p>\n\n<p>So, you can do:</p>\n\n<pre><code>List&lt;? extends Number&gt; l = new ArrayList&lt;Integer&gt;();\nList&lt;? extends Number&gt; l = new ArrayList&lt;Double&gt;();\n</code></pre>\n\n<p>If you want a list that is able to hold any object of class Number or its subclasses, just do this:</p>\n\n<pre><code>List&lt;Number&gt; l = new ArrayList&lt;&gt;();\n\nl.add(new Integer(33));\nl.add(new Double(33.3d));\n</code></pre>\n\n<p>(The boxing of the values inserted is unnecessary, but there for clarity..)</p>\n"},{"tags":[],"owner":{"account_id":3200341,"reputation":12790,"user_id":2702504,"accept_rate":68,"display_name":"Keerthivasan"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1390833018,"creation_date":1390833018,"answer_id":21383465,"question_id":21383139,"body_markdown":"I will add one more way to add the subtypes of `Number` to this list. i.e\r\n\r\n    List&lt;? super Number&gt; l = new ArrayList&lt;&gt;();\r\n     l.add(new Integer(3));  //OK\r\n     l.add(new Double(3.3)); //OK\r\n\r\nThis is allowed since the list is parameterized to be any *unknown supertype* of `Number` class. so, compiler allows the known subtype of `Number`. i.e `Integer` and `Double` types\r\n\r\n\r\n\r\n","title":"Why can&#39;t add element in a upper bound generics List?","body":"<p>I will add one more way to add the subtypes of <code>Number</code> to this list. i.e</p>\n\n<pre><code>List&lt;? super Number&gt; l = new ArrayList&lt;&gt;();\n l.add(new Integer(3));  //OK\n l.add(new Double(3.3)); //OK\n</code></pre>\n\n<p>This is allowed since the list is parameterized to be any <em>unknown supertype</em> of <code>Number</code> class. so, compiler allows the known subtype of <code>Number</code>. i.e <code>Integer</code> and <code>Double</code> types</p>\n"},{"tags":[],"owner":{"account_id":938724,"reputation":35,"user_id":967193,"display_name":"punitusingh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1400519229,"creation_date":1400519229,"answer_id":23743411,"question_id":21383139,"body_markdown":"Yes in case of \r\n\r\n    List&lt;? extends Number&gt; \r\n\r\nthis is just a reference, may be the actual object will be \r\n\r\n    List&lt;Integer&gt;\r\n\r\nso you should not be allowed to add new Double(5.0) in a list of Integer.","title":"Why can&#39;t add element in a upper bound generics List?","body":"<p>Yes in case of </p>\n\n<pre><code>List&lt;? extends Number&gt; \n</code></pre>\n\n<p>this is just a reference, may be the actual object will be </p>\n\n<pre><code>List&lt;Integer&gt;\n</code></pre>\n\n<p>so you should not be allowed to add new Double(5.0) in a list of Integer.</p>\n"},{"comments":[{"owner":{"account_id":4823489,"reputation":1072,"user_id":3893543,"accept_rate":84,"display_name":"CBA110"},"score":0,"creation_date":1518729797,"post_id":47585485,"comment_id":84636901,"body_markdown":"Ok so could you give me an example of a list instantiation using &quot;upper bound&quot; and adding elements to it. I don&#39;t think it&#39;s possible! When creating a list you can only use &quot;lower bound&quot; since it&#39;s never going to be immutable. &quot;Upper bound&quot; can still be used with a Collection in a method parameter. Could you confirm this.","body":"Ok so could you give me an example of a list instantiation using &quot;upper bound&quot; and adding elements to it. I don&#39;t think it&#39;s possible! When creating a list you can only use &quot;lower bound&quot; since it&#39;s never going to be immutable. &quot;Upper bound&quot; can still be used with a Collection in a method parameter. Could you confirm this."},{"owner":{"account_id":1974638,"reputation":3842,"user_id":1876775,"accept_rate":68,"display_name":"Zippy"},"score":2,"creation_date":1522954258,"post_id":47585485,"comment_id":86370609,"body_markdown":"&quot;Upper bounded and unbounded wildcard collections are immutable&quot; - not exactly, they can still have elements removed and can also be cleared :-)","body":"&quot;Upper bounded and unbounded wildcard collections are immutable&quot; - not exactly, they can still have elements removed and can also be cleared :-)"},{"owner":{"account_id":8625770,"reputation":2811,"user_id":6459056,"accept_rate":77,"display_name":"aName"},"score":0,"creation_date":1530737444,"post_id":47585485,"comment_id":89343610,"body_markdown":"element of which type ??","body":"element of which type ??"},{"owner":{"account_id":17319340,"reputation":528,"user_id":12545137,"display_name":"Dinh Quang Tuan"},"score":0,"creation_date":1655630622,"post_id":47585485,"comment_id":128373370,"body_markdown":"Your explanation is simple and understandable.","body":"Your explanation is simple and understandable."}],"tags":[],"owner":{"account_id":7769028,"reputation":327,"user_id":5879277,"display_name":"Test1 Test2"},"comment_count":4,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1512161377,"creation_date":1512093022,"answer_id":47585485,"question_id":21383139,"body_markdown":"Upper bounded and unbounded wildcard collections are immutable. \r\n\r\nFor example, you cannot do:\r\n\r\n    List&lt;? extends Number&gt; myList = new ArrayList&lt;Integer&gt;();\r\n    myList.add(new Integer(3)); //will not compile\r\nThis fails to compile because java does not know what type of List `List&lt;? extends Number&gt;` is at compilation time. \r\n\r\nSo the example above, at compile time,  `myList` could be `List&lt;Double&gt;`or `List&lt;Integer&gt;` or a `List` of any subclass of `Number`. And since you cannot add a `Double` to a `List&lt;Integer&gt;` or vise-versa, the compilation fails.","title":"Why can&#39;t add element in a upper bound generics List?","body":"<p>Upper bounded and unbounded wildcard collections are immutable. </p>\n\n<p>For example, you cannot do:</p>\n\n<pre><code>List&lt;? extends Number&gt; myList = new ArrayList&lt;Integer&gt;();\nmyList.add(new Integer(3)); //will not compile\n</code></pre>\n\n<p>This fails to compile because java does not know what type of List <code>List&lt;? extends Number&gt;</code> is at compilation time. </p>\n\n<p>So the example above, at compile time,  <code>myList</code> could be <code>List&lt;Double&gt;</code>or <code>List&lt;Integer&gt;</code> or a <code>List</code> of any subclass of <code>Number</code>. And since you cannot add a <code>Double</code> to a <code>List&lt;Integer&gt;</code> or vise-versa, the compilation fails.</p>\n"},{"comments":[{"owner":{"account_id":14105282,"reputation":657,"user_id":10189517,"display_name":"HKIT"},"score":0,"creation_date":1665287285,"post_id":60374978,"comment_id":130662954,"body_markdown":"why can&#39;t the compiler just add the value as Number to the list for the upperbounded wildcard, it should be fine? just like we can read from upper bounded list item as Number","body":"why can&#39;t the compiler just add the value as Number to the list for the upperbounded wildcard, it should be fine? just like we can read from upper bounded list item as Number"},{"owner":{"account_id":10793477,"reputation":81,"user_id":7940105,"display_name":"flounder"},"score":0,"creation_date":1666177433,"post_id":60374978,"comment_id":130872464,"body_markdown":"@HKIT then we would still have this problem:\n&lt;pre&gt;&lt;code&gt;List&lt;Integer&gt; integers = new ArrayList&lt;Integer&gt;\nList&lt;? extends Number&gt; numbers = integers;\n// now &#39;numbers&#39; and &#39;integers&#39; refer to the same list\nnumbers.add(1.0); // 1.0 extends Number but not Integer, adding this to &#39;integers&#39; would be an error\nfor (Integer integer : integers) {\n    // and we would have problems with casting\n    System.out.println(integer);\n}\n&lt;/code&gt;&lt;/pre&gt;","body":"@HKIT then we would still have this problem: &lt;pre&gt;&lt;code&gt;List&lt;Integer&gt; integers = new ArrayList&lt;Integer&gt; List&lt;? extends Number&gt; numbers = integers; // now &#39;numbers&#39; and &#39;integers&#39; refer to the same list numbers.add(1.0); // 1.0 extends Number but not Integer, adding this to &#39;integers&#39; would be an error for (Integer integer : integers) {     // and we would have problems with casting     System.out.println(integer); } &lt;/code&gt;&lt;/pre&gt;"}],"tags":[],"owner":{"account_id":10793477,"reputation":81,"user_id":7940105,"display_name":"flounder"},"comment_count":2,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1582543663,"creation_date":1582543663,"answer_id":60374978,"question_id":21383139,"body_markdown":"The problem with upper-bounded generics is that the compiler doesn&#39;t know the exact type that is going to be used, for example:\r\n```\r\nList&lt;? extends Number&gt; upperBounded = new ArrayList&lt;Integer&gt;();\r\nupperBounded = new ArrayList&lt;Double&gt;();\r\n```\r\n`upperBounded` can be a List of Integers as well as a list of Doubles or any other descendant of Number. Now imagine what will happen if Java allowed us to add any subclass of Number to that List.\r\n```\r\nList&lt;? extends Number&gt; upperBounded = new ArrayList&lt;Integer&gt;();\r\nupperBounded.add(1.0); // compile-time error\r\n```\r\nGood thing that Java prevents us from doing that because this would introduce a lot of bugs.\r\n\r\nThe same applies to the unbounded generic types.\r\n\r\nNow what about the lower-bounded generics?\r\n\r\n```\r\nList&lt;? super Integer&gt; lowerBounded = new ArrayList&lt;Integer&gt;();\r\nlowerBounded.add(0);\r\n```\r\nThis is is perfectly fine because we are safe to assume that we can add Integers to any List of an Integer superclass and this will not lead to inconsistency, for example:\r\n```\r\nList&lt;? super Integer&gt; lowerBounded = new ArrayList&lt;Number&gt;();\r\nlowerBounded.add(0);\r\n```\r\nHere we have a reference that allows a List of Integers or one of the Integer supertypes. ArrayList of Numbers fits into that definition, so we are able to assign it to that reference. Then we can add an Integer to this list, and this is also fine because a List of Numbers can contain an Integer (because Integer is a Number).\r\n\r\nIt may be surprising, but you can&#39;t add anything not assignable to Integer to this list for the same reason as I explained above for lower-bounded generics.\r\n```\r\nList&lt;? super Integer&gt; lowerBounded = new ArrayList&lt;Number&gt;();\r\nlowerBounded.add(1.0); // compile-time error\r\n```\r\nAs the compiler does not know the List of which exact type will be used, it does not allow us to add anything that could potentially break the promise given by generics.\r\n\r\nHope that helps.\r\n\r\n","title":"Why can&#39;t add element in a upper bound generics List?","body":"<p>The problem with upper-bounded generics is that the compiler doesn't know the exact type that is going to be used, for example:</p>\n\n<pre><code>List&lt;? extends Number&gt; upperBounded = new ArrayList&lt;Integer&gt;();\nupperBounded = new ArrayList&lt;Double&gt;();\n</code></pre>\n\n<p><code>upperBounded</code> can be a List of Integers as well as a list of Doubles or any other descendant of Number. Now imagine what will happen if Java allowed us to add any subclass of Number to that List.</p>\n\n<pre><code>List&lt;? extends Number&gt; upperBounded = new ArrayList&lt;Integer&gt;();\nupperBounded.add(1.0); // compile-time error\n</code></pre>\n\n<p>Good thing that Java prevents us from doing that because this would introduce a lot of bugs.</p>\n\n<p>The same applies to the unbounded generic types.</p>\n\n<p>Now what about the lower-bounded generics?</p>\n\n<pre><code>List&lt;? super Integer&gt; lowerBounded = new ArrayList&lt;Integer&gt;();\nlowerBounded.add(0);\n</code></pre>\n\n<p>This is is perfectly fine because we are safe to assume that we can add Integers to any List of an Integer superclass and this will not lead to inconsistency, for example:</p>\n\n<pre><code>List&lt;? super Integer&gt; lowerBounded = new ArrayList&lt;Number&gt;();\nlowerBounded.add(0);\n</code></pre>\n\n<p>Here we have a reference that allows a List of Integers or one of the Integer supertypes. ArrayList of Numbers fits into that definition, so we are able to assign it to that reference. Then we can add an Integer to this list, and this is also fine because a List of Numbers can contain an Integer (because Integer is a Number).</p>\n\n<p>It may be surprising, but you can't add anything not assignable to Integer to this list for the same reason as I explained above for lower-bounded generics.</p>\n\n<pre><code>List&lt;? super Integer&gt; lowerBounded = new ArrayList&lt;Number&gt;();\nlowerBounded.add(1.0); // compile-time error\n</code></pre>\n\n<p>As the compiler does not know the List of which exact type will be used, it does not allow us to add anything that could potentially break the promise given by generics.</p>\n\n<p>Hope that helps.</p>\n"}],"owner":{"account_id":3189208,"reputation":2492,"user_id":2693979,"accept_rate":50,"display_name":"user2693979"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5361,"favorite_count":0,"down_vote_count":0,"up_vote_count":22,"answer_count":6,"score":22,"last_activity_date":1684355235,"creation_date":1390832139,"question_id":21383139,"body_markdown":"I have a list with upper bound generics.\r\n\r\n     List&lt;? extends Number&gt; l = new ArrayList&lt;&gt;();\r\n     l.add(new Integer(3));  //ERROR\r\n     l.add(new Double(3.3)); // ERROR\r\n\r\nI don&#39;t understand the problem, because Integer and Double extend Number.","title":"Why can&#39;t add element in a upper bound generics List?","body":"<p>I have a list with upper bound generics.</p>\n\n<pre><code> List&lt;? extends Number&gt; l = new ArrayList&lt;&gt;();\n l.add(new Integer(3));  //ERROR\n l.add(new Double(3.3)); // ERROR\n</code></pre>\n\n<p>I don't understand the problem, because Integer and Double extend Number.</p>\n"},{"tags":["java","android","flutter","dart","wifi"],"owner":{"account_id":8260582,"reputation":131,"user_id":6212158,"display_name":"Ababwa"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":177,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684355153,"creation_date":1684355153,"question_id":76275958,"body_markdown":"I have a device emitting a Wi-Fi access point with a known SSID and password. I&#39;m trying to connect my Android phone to that AP programmatically. I can connect my phone to it manually using the Wi-Fi settings, so I&#39;m sure I have the right SSID and password and that the network is up. I&#39;m using Flutter and a MethodChannel to talk to Java from Flutter.\r\n\r\nHere&#39;s my Java-side code:\r\n```\r\npublic class MainActivity extends FlutterActivity {\r\n\tprivate static final String CHANNEL = &quot;wifi&quot;;\r\n\tprivate static final int TIMEOUT = 60000;\r\n\t\r\n\tprivate static ConnectivityManager.NetworkCallback callback;\r\n\t\r\n\t@Override\r\n\tpublic void configureFlutterEngine(FlutterEngine flutterEngine) {\r\n\t\tsuper.configureFlutterEngine(flutterEngine);\r\n\t\tnew MethodChannel(flutterEngine.getDartExecutor().getBinaryMessenger(), CHANNEL)\r\n\t\t\t.setMethodCallHandler((call, result) -&gt; {\r\n\t\t\t\tConnectivityManager cm = (ConnectivityManager)getApplicationContext()\r\n\t\t\t\t\t.getSystemService(Context.CONNECTIVITY_SERVICE);\r\n\t\t\t\tif(call.method.equals(&quot;request&quot;)) {\r\n\t\t\t\t\tString ssid = call.argument(&quot;ssid&quot;);\r\n\t\t\t\t\tString pass = call.argument(&quot;password&quot;);\r\n\t\t\t\t\tif(callback != null) {\r\n\t\t\t\t\t\tcm.unregisterNetworkCallback(callback);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcallback = new ConnectivityManager.NetworkCallback() {\r\n\t\t\t\t\t\tboolean first = true;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t@Override\r\n\t\t\t\t\t\tpublic void onAvailable(Network network) {\r\n\t\t\t\t\t\t\tif(first) {\r\n\t\t\t\t\t\t\t\tfirst = false;\r\n\t\t\t\t\t\t\t\tresult.success(cm.bindProcessToNetwork(network));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t@Override\r\n\t\t\t\t\t\tpublic void onUnavailable() {\r\n\t\t\t\t\t\t\tcallback = null;\r\n\t\t\t\t\t\t\tresult.success(false);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t\tWifiNetworkSpecifier wfNetSpec = new WifiNetworkSpecifier.Builder()\r\n\t\t\t\t\t\t.setSsid(ssid)\r\n\t\t\t\t\t\t.setWpa2Passphrase(pass)\r\n\t\t\t\t\t\t.build();\r\n\t\t\t\t\tNetworkRequest netReq = new NetworkRequest.Builder()\r\n\t\t\t\t\t\t.addTransportType(NetworkCapabilities.TRANSPORT_WIFI)\r\n\t\t\t\t\t\t.setNetworkSpecifier(wfNetSpec)\r\n\t\t\t\t\t\t.build();\r\n\t\t\t\t\tcm.requestNetwork(netReq, callback, TIMEOUT);\r\n\t\t\t\t} else if(call.method.equals(&quot;release&quot;)) {\r\n\t\t\t\t\tif(callback != null) {\r\n\t\t\t\t\t\tcm.unregisterNetworkCallback(callback);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcm.bindProcessToNetwork(null);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t);\r\n\t}\r\n}\r\n```\r\nHere is my Flutter-side Dart code:\r\n```\r\nconst MethodChannel _channel = MethodChannel(&#39;wifi&#39;);\r\n\r\nFuture&lt;bool&gt; request(String ssid, String password) async {\r\n  return await _channel.invokeMethod&lt;bool&gt;(&#39;request&#39;, {\r\n    &#39;ssid&#39;: ssid,\r\n    &#39;password&#39;: password,\r\n  }) == true;\r\n}\r\n\r\nvoid release() {\r\n  _channel.invokeMethod(&#39;release&#39;);\r\n}\r\n```\r\nThis approach was inspired by the questions below, yet `onAvailable` is never called in my code:\r\n\r\nhttps://stackoverflow.com/questions/68904640/ask-user-to-connect-to-a-specific-wifi-flutter\r\n\r\nhttps://stackoverflow.com/questions/64913185/after-called-bindprocesstonetworknetwork-app-never-connect-to-internet-throug\r\n\r\nWhat is the problem with this approach?\r\n\r\nI&#39;m using a Pixel 4a with Android 13.\r\n\r\nAdditionally, when I call the Dart `request` function, a box will appear on-screen with &quot;Searching for device...&quot; and will fail after 30 seconds with the message &quot;No devices found. Make sure devices are turned on and available to connect.&quot; with options &quot;Cancel&quot; and &quot;Try again&quot;. If I hit &quot;Try again&quot; it will repeat and fail again after 30 seconds. This is not a UI I created. I believe it&#39;s an OS-created UI. What am I doing that is triggering this UI, could it be getting in the way of connecting to the AP, and how might I suppress it?","title":"Android Network Request Fails","body":"<p>I have a device emitting a Wi-Fi access point with a known SSID and password. I'm trying to connect my Android phone to that AP programmatically. I can connect my phone to it manually using the Wi-Fi settings, so I'm sure I have the right SSID and password and that the network is up. I'm using Flutter and a MethodChannel to talk to Java from Flutter.</p>\n<p>Here's my Java-side code:</p>\n<pre><code>public class MainActivity extends FlutterActivity {\n    private static final String CHANNEL = &quot;wifi&quot;;\n    private static final int TIMEOUT = 60000;\n    \n    private static ConnectivityManager.NetworkCallback callback;\n    \n    @Override\n    public void configureFlutterEngine(FlutterEngine flutterEngine) {\n        super.configureFlutterEngine(flutterEngine);\n        new MethodChannel(flutterEngine.getDartExecutor().getBinaryMessenger(), CHANNEL)\n            .setMethodCallHandler((call, result) -&gt; {\n                ConnectivityManager cm = (ConnectivityManager)getApplicationContext()\n                    .getSystemService(Context.CONNECTIVITY_SERVICE);\n                if(call.method.equals(&quot;request&quot;)) {\n                    String ssid = call.argument(&quot;ssid&quot;);\n                    String pass = call.argument(&quot;password&quot;);\n                    if(callback != null) {\n                        cm.unregisterNetworkCallback(callback);\n                    }\n                    callback = new ConnectivityManager.NetworkCallback() {\n                        boolean first = true;\n                        \n                        @Override\n                        public void onAvailable(Network network) {\n                            if(first) {\n                                first = false;\n                                result.success(cm.bindProcessToNetwork(network));\n                            }\n                        }\n                        \n                        @Override\n                        public void onUnavailable() {\n                            callback = null;\n                            result.success(false);\n                        }\n                    };\n                    WifiNetworkSpecifier wfNetSpec = new WifiNetworkSpecifier.Builder()\n                        .setSsid(ssid)\n                        .setWpa2Passphrase(pass)\n                        .build();\n                    NetworkRequest netReq = new NetworkRequest.Builder()\n                        .addTransportType(NetworkCapabilities.TRANSPORT_WIFI)\n                        .setNetworkSpecifier(wfNetSpec)\n                        .build();\n                    cm.requestNetwork(netReq, callback, TIMEOUT);\n                } else if(call.method.equals(&quot;release&quot;)) {\n                    if(callback != null) {\n                        cm.unregisterNetworkCallback(callback);\n                    }\n                    cm.bindProcessToNetwork(null);\n                }\n            }\n        );\n    }\n}\n</code></pre>\n<p>Here is my Flutter-side Dart code:</p>\n<pre><code>const MethodChannel _channel = MethodChannel('wifi');\n\nFuture&lt;bool&gt; request(String ssid, String password) async {\n  return await _channel.invokeMethod&lt;bool&gt;('request', {\n    'ssid': ssid,\n    'password': password,\n  }) == true;\n}\n\nvoid release() {\n  _channel.invokeMethod('release');\n}\n</code></pre>\n<p>This approach was inspired by the questions below, yet <code>onAvailable</code> is never called in my code:</p>\n<p><a href=\"https://stackoverflow.com/questions/68904640/ask-user-to-connect-to-a-specific-wifi-flutter\">Ask user to connect to a specific WiFi flutter</a></p>\n<p><a href=\"https://stackoverflow.com/questions/64913185/after-called-bindprocesstonetworknetwork-app-never-connect-to-internet-throug\">after called BindProcessToNetwork(network). APP never connect to internet through mobile data</a></p>\n<p>What is the problem with this approach?</p>\n<p>I'm using a Pixel 4a with Android 13.</p>\n<p>Additionally, when I call the Dart <code>request</code> function, a box will appear on-screen with &quot;Searching for device...&quot; and will fail after 30 seconds with the message &quot;No devices found. Make sure devices are turned on and available to connect.&quot; with options &quot;Cancel&quot; and &quot;Try again&quot;. If I hit &quot;Try again&quot; it will repeat and fail again after 30 seconds. This is not a UI I created. I believe it's an OS-created UI. What am I doing that is triggering this UI, could it be getting in the way of connecting to the AP, and how might I suppress it?</p>\n"},{"tags":["java","spring-boot","graphql","graphql-java","scalar"],"comments":[{"owner":{"account_id":5771601,"reputation":742,"user_id":4554899,"display_name":"Vinay"},"score":1,"creation_date":1684096556,"post_id":76249529,"comment_id":134463110,"body_markdown":"Create a JSON object  of the data and Encode the JSON object into a string using JSON.stringify() or directly convert your Json to string and pass the string as the value of the JSON field in your GraphQL query.","body":"Create a JSON object  of the data and Encode the JSON object into a string using JSON.stringify() or directly convert your Json to string and pass the string as the value of the JSON field in your GraphQL query."},{"owner":{"account_id":3338251,"reputation":19359,"user_id":2805154,"accept_rate":75,"display_name":"Michel Floyd"},"score":0,"creation_date":1684197863,"post_id":76249529,"comment_id":134479112,"body_markdown":"Use *query variables* and stringify the JSON before passing it.","body":"Use <i>query variables</i> and stringify the JSON before passing it."},{"owner":{"account_id":28272474,"reputation":3,"user_id":21615435,"display_name":"Vishruth S"},"score":0,"creation_date":1684217603,"post_id":76249529,"comment_id":134481038,"body_markdown":"I need to pass 100s of key-value pair, so passing it as a string would be difficult. Need to pass it a JSON itself.","body":"I need to pass 100s of key-value pair, so passing it as a string would be difficult. Need to pass it a JSON itself."}],"answers":[{"comments":[{"owner":{"account_id":28272474,"reputation":3,"user_id":21615435,"display_name":"Vishruth S"},"score":0,"creation_date":1684132725,"post_id":76249685,"comment_id":134466182,"body_markdown":"Thank you for the input, But I need to add 10 to 15 key-value pairs like this. So using backslash and double quotes all the time would be difficult for us. That&#39;s why I was looking for a better way to store.","body":"Thank you for the input, But I need to add 10 to 15 key-value pairs like this. So using backslash and double quotes all the time would be difficult for us. That&#39;s why I was looking for a better way to store."},{"owner":{"account_id":28272474,"reputation":3,"user_id":21615435,"display_name":"Vishruth S"},"score":0,"creation_date":1684217724,"post_id":76249685,"comment_id":134481060,"body_markdown":"Hi, I tried your edited version, I am getting the same problem. It&#39;s taking it as NULL. No value is getting passed into the database. Can you please share your full code?","body":"Hi, I tried your edited version, I am getting the same problem. It&#39;s taking it as NULL. No value is getting passed into the database. Can you please share your full code?"}],"tags":[],"owner":{"account_id":16909157,"reputation":163,"user_id":12228688,"display_name":"Skerdi Velo"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684354437,"creation_date":1684098461,"answer_id":76249685,"question_id":76249529,"body_markdown":"to pass a JSON value while storing data in GraphQL I tried to use the JSON scalar type that you have already defined in your schema. To pass a JSON value, you can simply provide a valid JSON string as the value for the attributes field in your mutation.\r\nI tried your code and this works for me:\r\n\r\n    import { gql } from &#39;@apollo/client&#39;;\r\n    \r\n    const CREATE_PRODUCT_MUTATION = gql`\r\n      mutation CreateProduct($productRequest: ProductInput!) {\r\n        createProduct(ProductRequest: $productRequest) {\r\n          id\r\n          name\r\n          attributes\r\n        }\r\n      }\r\n    `;\r\n    \r\n    const productRequest = {\r\n      id: 1,\r\n      name: &quot;ABC&quot;,\r\n      attributes: {\r\n        Key1: &quot;Value1&quot;,\r\n        Key2: &quot;Value2&quot;,\r\n        Key3: &quot;Value3&quot;\r\n      }\r\n    };\r\n    \r\n    client.mutate({\r\n      mutation: CREATE_PRODUCT_MUTATION,\r\n      variables: {\r\n        productRequest: productRequest\r\n      }\r\n    }).then(result =&gt; {\r\n      console.log(result.data.createProduct);\r\n    }).catch(error =&gt; {\r\n      console.error(error);\r\n    });\r\n\r\n\r\n\r\nIn this piece of code , I&#39;m passing a JSON string as the value for the attributes field. Which should fix your problem.\r\n","title":"How to pass JSON value from GraphQL to back-end?","body":"<p>to pass a JSON value while storing data in GraphQL I tried to use the JSON scalar type that you have already defined in your schema. To pass a JSON value, you can simply provide a valid JSON string as the value for the attributes field in your mutation.\nI tried your code and this works for me:</p>\n<pre><code>import { gql } from '@apollo/client';\n\nconst CREATE_PRODUCT_MUTATION = gql`\n  mutation CreateProduct($productRequest: ProductInput!) {\n    createProduct(ProductRequest: $productRequest) {\n      id\n      name\n      attributes\n    }\n  }\n`;\n\nconst productRequest = {\n  id: 1,\n  name: &quot;ABC&quot;,\n  attributes: {\n    Key1: &quot;Value1&quot;,\n    Key2: &quot;Value2&quot;,\n    Key3: &quot;Value3&quot;\n  }\n};\n\nclient.mutate({\n  mutation: CREATE_PRODUCT_MUTATION,\n  variables: {\n    productRequest: productRequest\n  }\n}).then(result =&gt; {\n  console.log(result.data.createProduct);\n}).catch(error =&gt; {\n  console.error(error);\n});\n</code></pre>\n<p>In this piece of code , I'm passing a JSON string as the value for the attributes field. Which should fix your problem.</p>\n"}],"owner":{"account_id":28272474,"reputation":3,"user_id":21615435,"display_name":"Vishruth S"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":763,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1684354437,"creation_date":1684095824,"question_id":76249529,"body_markdown":"Using the Extended graphQL scalars we can display the &quot;`Map&lt;String, String&gt;`&quot; value as JSON with the help of JSON Scalar. But how to pass JSON value while storing the Data?\r\n\r\nThe schema :\r\n\r\n```\r\nType Mutation{\r\n               createProduct(ProductRequest: ProductInput) : Product\r\n             }\r\n\r\ninput ProductInput{\r\n\tid : Int\r\n\tname: String\r\n\tattributes: JSON\r\n}\r\n```\r\n\r\nThe Query :\r\n\r\n```\r\nmutation {\r\n  createProduct(ProductRequest: {\r\n        id:1,\r\n        name:&quot;ABC&quot;\r\n  attributes:{\r\n    Key: &quot;Value&quot;\r\n  }\r\n  })\r\n  {\r\n    id\r\n    name\r\n    attributes\r\n  }\r\n}\r\n\r\n```\r\n\r\nIf I pass like this, for &quot;Attributes&quot; it&#39;s taking as null. So nothing is getting stored in database. If anybody knows to pass JSON value in graphQL, please let me know. \r\n\r\nI tried passing the data using &quot;PostMapping&quot; and it worked! But I need to pass from GraphQL.","title":"How to pass JSON value from GraphQL to back-end?","body":"<p>Using the Extended graphQL scalars we can display the &quot;<code>Map&lt;String, String&gt;</code>&quot; value as JSON with the help of JSON Scalar. But how to pass JSON value while storing the Data?</p>\n<p>The schema :</p>\n<pre><code>Type Mutation{\n               createProduct(ProductRequest: ProductInput) : Product\n             }\n\ninput ProductInput{\n    id : Int\n    name: String\n    attributes: JSON\n}\n</code></pre>\n<p>The Query :</p>\n<pre><code>mutation {\n  createProduct(ProductRequest: {\n        id:1,\n        name:&quot;ABC&quot;\n  attributes:{\n    Key: &quot;Value&quot;\n  }\n  })\n  {\n    id\n    name\n    attributes\n  }\n}\n\n</code></pre>\n<p>If I pass like this, for &quot;Attributes&quot; it's taking as null. So nothing is getting stored in database. If anybody knows to pass JSON value in graphQL, please let me know.</p>\n<p>I tried passing the data using &quot;PostMapping&quot; and it worked! But I need to pass from GraphQL.</p>\n"},{"tags":["java","testing","mockito"],"comments":[{"owner":{"account_id":18251257,"reputation":53,"user_id":18974278,"display_name":"user18974278"},"score":0,"creation_date":1684343925,"post_id":76274587,"comment_id":134505917,"body_markdown":"Just a typo, I edited it","body":"Just a typo, I edited it"},{"owner":{"account_id":4599240,"reputation":816,"user_id":3730470,"display_name":"Klitos G."},"score":0,"creation_date":1684344060,"post_id":76274587,"comment_id":134505944,"body_markdown":"please add how you create the mock service and the class of it","body":"please add how you create the mock service and the class of it"},{"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"score":0,"creation_date":1684347402,"post_id":76274587,"comment_id":134506645,"body_markdown":"Could it be possible that Mockito just wants to tell zou the mocked call was never used during the test, so you may have mocked the wrong method/parameter?","body":"Could it be possible that Mockito just wants to tell zou the mocked call was never used during the test, so you may have mocked the wrong method/parameter?"}],"answers":[{"comments":[{"owner":{"account_id":18251257,"reputation":53,"user_id":18974278,"display_name":"user18974278"},"score":0,"creation_date":1684344319,"post_id":76274672,"comment_id":134505997,"body_markdown":"This is not working, I already tried that","body":"This is not working, I already tried that"}],"tags":[],"owner":{"account_id":9427779,"reputation":336,"user_id":7012221,"display_name":"Abhishek"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684344020,"creation_date":1684344020,"answer_id":76274672,"question_id":76274587,"body_markdown":"you can use use Mockito argument matchers eq() method like below,\r\n\r\nimport the org.mockito.ArgumentMatchers \r\n\r\n    @Test\r\n    public void firstTest() {\r\n        Mockito.when(service.getValue(eq(&quot;parameter1&quot;))).thenReturn(1);\r\n    }\r\n    \r\n    @Test\r\n    public void secondTest() {\r\n        Mockito.when(service.getValue(eq(&quot;parameter2&quot;))).thenReturn(2);\r\n    }","title":"How to deal with mocks in Mockito in different test classes?","body":"<p>you can use use Mockito argument matchers eq() method like below,</p>\n<p>import the org.mockito.ArgumentMatchers</p>\n<pre><code>@Test\npublic void firstTest() {\n    Mockito.when(service.getValue(eq(&quot;parameter1&quot;))).thenReturn(1);\n}\n\n@Test\npublic void secondTest() {\n    Mockito.when(service.getValue(eq(&quot;parameter2&quot;))).thenReturn(2);\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1233070,"reputation":9484,"user_id":1197251,"display_name":"dominicoder"},"score":1,"creation_date":1684353961,"post_id":76275747,"comment_id":134507956,"body_markdown":"&quot;You cannot use a mock with literal arguments.&quot; - this is incorrect. [For example](https://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Mockito.html#10).","body":"&quot;You cannot use a mock with literal arguments.&quot; - this is incorrect. <a href=\"https://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Mockito.html#10\" rel=\"nofollow noreferrer\">For example</a>."},{"owner":{"account_id":4599240,"reputation":816,"user_id":3730470,"display_name":"Klitos G."},"score":0,"creation_date":1684398886,"post_id":76275747,"comment_id":134513149,"body_markdown":"@dominicoder \nAs far I know you cannot use a mock with direct values, you need to have an argument matcher, simplest case being something like `someMock.someMethod(eq(&quot;string&quot;))`.\nI might be wrong, happy to learn something new, but could you please provide a more useful link to prove your point? the link you sent is the full mockito documentation.","body":"@dominicoder  As far I know you cannot use a mock with direct values, you need to have an argument matcher, simplest case being something like <code>someMock.someMethod(eq(&quot;string&quot;))</code>. I might be wrong, happy to learn something new, but could you please provide a more useful link to prove your point? the link you sent is the full mockito documentation."},{"owner":{"account_id":1233070,"reputation":9484,"user_id":1197251,"display_name":"dominicoder"},"score":0,"creation_date":1684438250,"post_id":76275747,"comment_id":134521493,"body_markdown":"See item #10 in the link (I don&#39;t know why the anchor link doesn&#39;t work). - `when(mock.someMethod(&quot;some arg&quot;))\n   .thenThrow(new RuntimeException())\n   .thenReturn(&quot;foo&quot;);`","body":"See item #10 in the link (I don&#39;t know why the anchor link doesn&#39;t work). - <code>when(mock.someMethod(&quot;some arg&quot;))    .thenThrow(new RuntimeException())    .thenReturn(&quot;foo&quot;);</code>"},{"owner":{"account_id":4599240,"reputation":816,"user_id":3730470,"display_name":"Klitos G."},"score":0,"creation_date":1684482761,"post_id":76275747,"comment_id":134526793,"body_markdown":"thanks for this, I will try it out and figure out how this works. it might be that it was not possible in older mockito library but it is now","body":"thanks for this, I will try it out and figure out how this works. it might be that it was not possible in older mockito library but it is now"}],"tags":[],"owner":{"account_id":4599240,"reputation":816,"user_id":3730470,"display_name":"Klitos G."},"comment_count":4,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1684353232,"creation_date":1684353232,"answer_id":76275747,"question_id":76274587,"body_markdown":"You cannot use a mock with literal arguments.\r\nWhen you want to mock a method and act based on identified argument you need to use ArgumentCaptors\r\n\r\nTake a look at this link\r\nhttps://www.digitalocean.com/community/tutorials/mockito-argumentcaptor-captor-annotation\r\n\r\nIn your case you should do something like\r\n\r\n```\r\n@Test\r\npublic void firstTest() {\r\n    ArgumentCaptor acString = ArgumentCaptor.forClass(String.class);\r\n    Mockito.when(service.getValue(acString.capture()))\r\n        .thenReturn(chooseReturn(acString.value));\r\n\r\n    // run code ...\r\n    // assert ...\r\n}\r\n\r\nprivate int chooseReturn(String arg) {\r\n    if (arg.equals(&quot;parameter1&quot;)) {\r\n        return 1;\r\n    } else if (arg.equals(&quot;parameter2&quot;)) {\r\n        return 2;\r\n    } else {\r\n        throw new InvalidArgumentException(&quot;cannot identify &quot; + arg);\r\n    }\r\n}\r\n```","title":"How to deal with mocks in Mockito in different test classes?","body":"<p>You cannot use a mock with literal arguments.\nWhen you want to mock a method and act based on identified argument you need to use ArgumentCaptors</p>\n<p>Take a look at this link\n<a href=\"https://www.digitalocean.com/community/tutorials/mockito-argumentcaptor-captor-annotation\" rel=\"nofollow noreferrer\">https://www.digitalocean.com/community/tutorials/mockito-argumentcaptor-captor-annotation</a></p>\n<p>In your case you should do something like</p>\n<pre><code>@Test\npublic void firstTest() {\n    ArgumentCaptor acString = ArgumentCaptor.forClass(String.class);\n    Mockito.when(service.getValue(acString.capture()))\n        .thenReturn(chooseReturn(acString.value));\n\n    // run code ...\n    // assert ...\n}\n\nprivate int chooseReturn(String arg) {\n    if (arg.equals(&quot;parameter1&quot;)) {\n        return 1;\n    } else if (arg.equals(&quot;parameter2&quot;)) {\n        return 2;\n    } else {\n        throw new InvalidArgumentException(&quot;cannot identify &quot; + arg);\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":18251257,"reputation":53,"user_id":18974278,"display_name":"user18974278"},"score":0,"creation_date":1684391808,"post_id":76275874,"comment_id":134512026,"body_markdown":"No, I am calling the method later, I just didn&#39;t include it in my question","body":"No, I am calling the method later, I just didn&#39;t include it in my question"},{"owner":{"account_id":1233070,"reputation":9484,"user_id":1197251,"display_name":"dominicoder"},"score":0,"creation_date":1684438063,"post_id":76275874,"comment_id":134521453,"body_markdown":"Then, for completeness and clarity, please post a complete example that illustrates exactly what you&#39;re doing and exactly what error you&#39;re getting and exactly where the error is showing up.","body":"Then, for completeness and clarity, please post a complete example that illustrates exactly what you&#39;re doing and exactly what error you&#39;re getting and exactly where the error is showing up."}],"tags":[],"owner":{"account_id":1233070,"reputation":9484,"user_id":1197251,"display_name":"dominicoder"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684354233,"creation_date":1684354233,"answer_id":76275874,"question_id":76274587,"body_markdown":"If your tests are literally as shown:\r\n\r\n    @Test\r\n    public void firstTest() {\r\n        Mockito.when(service.getValue(&quot;parameter1&quot;)).thenReturn(1);\r\n    }\r\n    \r\n    @Test\r\n    public void secondTest() {\r\n        Mockito.when(service.getValue(&quot;parameter2&quot;)).thenReturn(2);\r\n    }\r\n\r\nThen the problem is that you have mocked out a return value for a method call but done absolutely nothing that actually causes the methods to be called. So your mocking is &quot;unused&quot; and pointless.\r\n\r\nAdd to your tests to actually do something and verify behavior:\r\n\r\n    @Test\r\n    public void firstTest() {\r\n        Mockito.when(service.getValue(&quot;parameter1&quot;)).thenReturn(1);\r\n    \r\n        // Do something with service that causes `getValue` to be called with &quot;parameter1&quot;\r\n    \r\n        assertThat(service.someOtherFunctionThatReturnsSomethingBasedOnGetValue()).isEqualTo(1);\r\n    }","title":"How to deal with mocks in Mockito in different test classes?","body":"<p>If your tests are literally as shown:</p>\n<pre><code>@Test\npublic void firstTest() {\n    Mockito.when(service.getValue(&quot;parameter1&quot;)).thenReturn(1);\n}\n\n@Test\npublic void secondTest() {\n    Mockito.when(service.getValue(&quot;parameter2&quot;)).thenReturn(2);\n}\n</code></pre>\n<p>Then the problem is that you have mocked out a return value for a method call but done absolutely nothing that actually causes the methods to be called. So your mocking is &quot;unused&quot; and pointless.</p>\n<p>Add to your tests to actually do something and verify behavior:</p>\n<pre><code>@Test\npublic void firstTest() {\n    Mockito.when(service.getValue(&quot;parameter1&quot;)).thenReturn(1);\n\n    // Do something with service that causes `getValue` to be called with &quot;parameter1&quot;\n\n    assertThat(service.someOtherFunctionThatReturnsSomethingBasedOnGetValue()).isEqualTo(1);\n}\n</code></pre>\n"}],"owner":{"account_id":18251257,"reputation":53,"user_id":18974278,"display_name":"user18974278"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":96,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1684354233,"creation_date":1684343360,"question_id":76274587,"body_markdown":"I am trying to understand how Mockito works and I have come to one issue - I have two different test cases and I want to mock the same method from service but with different parameters. When I tried to do it like that:\r\n\r\n    @Test\r\n    public void firstTest() {\r\n        Mockito.when(service.getValue(&quot;parameter1&quot;)).thenReturn(1);\r\n    }\r\n\r\n    @Test\r\n    public void secondTest() {\r\n        Mockito.when(service.getValue(&quot;parameter2&quot;)).thenReturn(2);\r\n    }\r\n\r\nI get an error:\r\n[MockitoHint] 1. Unused... -&gt; at path.getValue(MyTest.java:95)\r\n[MockitoHint]  ...args ok? -&gt; at path...\r\n\r\nCan someone explain to me why this is happening? When I use Mockito.anyString() as an argument this is not happening anymore...\r\n\r\nMock class:\r\n\r\n    @RunWith(MockitoJUnitRunner.class)\r\n\r\n    public class MyTest {\r\n\r\n    @Mock\r\n    private MyService myService;\r\n    \r\n    ...\r\n    \r\n    @InjectMocks\r\n    private TestingService testingService = new TestingService();\r\n    }\r\n\r\n\r\n\r\n","title":"How to deal with mocks in Mockito in different test classes?","body":"<p>I am trying to understand how Mockito works and I have come to one issue - I have two different test cases and I want to mock the same method from service but with different parameters. When I tried to do it like that:</p>\n<pre><code>@Test\npublic void firstTest() {\n    Mockito.when(service.getValue(&quot;parameter1&quot;)).thenReturn(1);\n}\n\n@Test\npublic void secondTest() {\n    Mockito.when(service.getValue(&quot;parameter2&quot;)).thenReturn(2);\n}\n</code></pre>\n<p>I get an error:\n[MockitoHint] 1. Unused... -&gt; at path.getValue(MyTest.java:95)\n[MockitoHint]  ...args ok? -&gt; at path...</p>\n<p>Can someone explain to me why this is happening? When I use Mockito.anyString() as an argument this is not happening anymore...</p>\n<p>Mock class:</p>\n<pre><code>@RunWith(MockitoJUnitRunner.class)\n\npublic class MyTest {\n\n@Mock\nprivate MyService myService;\n\n...\n\n@InjectMocks\nprivate TestingService testingService = new TestingService();\n}\n</code></pre>\n"},{"tags":["java","multithreading","executorservice","thread-sleep","forkjoinpool"],"comments":[{"owner":{"account_id":75804,"reputation":94840,"user_id":217324,"accept_rate":96,"display_name":"Nathan Hughes"},"score":0,"creation_date":1642537807,"post_id":70761704,"comment_id":125096218,"body_markdown":"What version of Java? It&#39;s like you expect fibers to be implemented?","body":"What version of Java? It&#39;s like you expect fibers to be implemented?"},{"owner":{"account_id":13639787,"reputation":3,"user_id":9840022,"display_name":"Sunny Bhan"},"score":0,"creation_date":1642538332,"post_id":70761704,"comment_id":125096373,"body_markdown":"Hi Nathan, Its Java 15. I expected threads in ForkJoinPool to switch to non blocking task when their current assigned task does some IO. As per Project Loom , ForkJoinPool will be used for Fibers so was expecting it to behave that way. https://cr.openjdk.java.net/~rpressler/loom/Loom-Proposal.html","body":"Hi Nathan, Its Java 15. I expected threads in ForkJoinPool to switch to non blocking task when their current assigned task does some IO. As per Project Loom , ForkJoinPool will be used for Fibers so was expecting it to behave that way. <a href=\"https://cr.openjdk.java.net/~rpressler/loom/Loom-Proposal.html\" rel=\"nofollow noreferrer\">cr.openjdk.java.net/~rpressler/loom/Loom-Proposal.html</a>"}],"answers":[{"tags":[],"owner":{"account_id":81495,"reputation":3962,"user_id":229743,"display_name":"Taylor"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1642537888,"creation_date":1642537888,"answer_id":70762022,"question_id":70761704,"body_markdown":"&gt; If the Thread inside the ForkJoinPool does a blocking I/O activity ( simulated below in code using Thread.sleep(10000)) , it should pick up another task which is not causing blocking IO.\r\n\r\nThis is not how threads behave.  A thread represents an inflight execution.  It can&#39;t arbitrarily jump to another `Runnable`.  The thread has no way of knowing whether the thread is blocking for I/O or performing intense calculations, _unless_ the threading engine AND the particular I/O is desgined for this (e.g. jdbc vs. r2dbc).\r\n\r\nIn other words if you use Reactor/Spring Reactive/some other reactive programming framework with a traditional blocking I/O, like JDBC, your threads will still hang up waiting for I/O.\r\n\r\nBlocking I/O is often implemented as a loop while polling a socket, there is no way for anything outside the particular I/O to know that this is in fact blocking I/O.\r\n\r\nTo my knowledge the ```ForkJoinPool``` is not reactive, it hands Runnables to threads, that&#39;s it.","title":"Behaviour of Threads during blocking IO in Java ForkJoinPool","body":"<blockquote>\n<p>If the Thread inside the ForkJoinPool does a blocking I/O activity ( simulated below in code using Thread.sleep(10000)) , it should pick up another task which is not causing blocking IO.</p>\n</blockquote>\n<p>This is not how threads behave.  A thread represents an inflight execution.  It can't arbitrarily jump to another <code>Runnable</code>.  The thread has no way of knowing whether the thread is blocking for I/O or performing intense calculations, <em>unless</em> the threading engine AND the particular I/O is desgined for this (e.g. jdbc vs. r2dbc).</p>\n<p>In other words if you use Reactor/Spring Reactive/some other reactive programming framework with a traditional blocking I/O, like JDBC, your threads will still hang up waiting for I/O.</p>\n<p>Blocking I/O is often implemented as a loop while polling a socket, there is no way for anything outside the particular I/O to know that this is in fact blocking I/O.</p>\n<p>To my knowledge the <code>ForkJoinPool</code> is not reactive, it hands Runnables to threads, that's it.</p>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1642582570,"post_id":70767204,"comment_id":125106091,"body_markdown":"As it’s currently written, your answer is unclear. Please [edit] to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"As it’s currently written, your answer is unclear. Please <a href=\"https://stackoverflow.com/posts/70767204/edit\">edit</a> to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":23985085,"reputation":16,"user_id":17971986,"display_name":"Alwin"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1642579852,"creation_date":1642579852,"answer_id":70767204,"question_id":70761704,"body_markdown":"ForkJoinPool is used only as a scheduler as mentioned in the Loom Proposal. Only Virtual Threads have the ability to relinquish the blocking task and switch to another task. Based on what I remember from reading a mail in the loom mailing list,  the loom team is currently not planning to redesign java.util.concurrent&#39;s ForkJoinPool to use Virtual Threads.","title":"Behaviour of Threads during blocking IO in Java ForkJoinPool","body":"<p>ForkJoinPool is used only as a scheduler as mentioned in the Loom Proposal. Only Virtual Threads have the ability to relinquish the blocking task and switch to another task. Based on what I remember from reading a mail in the loom mailing list,  the loom team is currently not planning to redesign java.util.concurrent's ForkJoinPool to use Virtual Threads.</p>\n"},{"tags":[],"owner":{"account_id":288740,"reputation":36435,"user_id":589329,"accept_rate":40,"display_name":"Vampire"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684354161,"creation_date":1684354161,"answer_id":76275864,"question_id":70761704,"body_markdown":"The `ForkJoinPool` cannot arbitrarily detect situations where it should start other tasks to maintain the parallelism and where not.\r\n\r\nSo are work item that is waiting for something has to explicitly tell the `ForkJoinPool` that it should start other tasks to maintain the parallelism.\r\n\r\nTo achieve this you have to use `ForkJoinPool#managedBlock` or any API that uses it underneath.\r\n\r\nIf you for example use `CompletableFuture#join` or `CompletableFuture#get`, then these methods under the hood use `ForkJoinPool#managedBlock` and thus would allow the `ForkJoinPool` to start other tasks to maintain intended parallelism.\r\n\r\nA simple `Thread.sleep` is not working for this.\r\n\r\nIf you replace in your example the `Thread.sleep(10000);` by `CompletableFuture.runAsync(() -&gt; { try { Thread.sleep(10000); } catch (Exception e) {}; }).join();`, then you get exactly the behavior you intended.\r\n\r\n","title":"Behaviour of Threads during blocking IO in Java ForkJoinPool","body":"<p>The <code>ForkJoinPool</code> cannot arbitrarily detect situations where it should start other tasks to maintain the parallelism and where not.</p>\n<p>So are work item that is waiting for something has to explicitly tell the <code>ForkJoinPool</code> that it should start other tasks to maintain the parallelism.</p>\n<p>To achieve this you have to use <code>ForkJoinPool#managedBlock</code> or any API that uses it underneath.</p>\n<p>If you for example use <code>CompletableFuture#join</code> or <code>CompletableFuture#get</code>, then these methods under the hood use <code>ForkJoinPool#managedBlock</code> and thus would allow the <code>ForkJoinPool</code> to start other tasks to maintain intended parallelism.</p>\n<p>A simple <code>Thread.sleep</code> is not working for this.</p>\n<p>If you replace in your example the <code>Thread.sleep(10000);</code> by <code>CompletableFuture.runAsync(() -&gt; { try { Thread.sleep(10000); } catch (Exception e) {}; }).join();</code>, then you get exactly the behavior you intended.</p>\n"}],"owner":{"account_id":13639787,"reputation":3,"user_id":9840022,"display_name":"Sunny Bhan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1408,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70767204,"answer_count":3,"score":0,"last_activity_date":1684354161,"creation_date":1642536001,"question_id":70761704,"body_markdown":"If the Thread inside the ForkJoinPool does a blocking I/O activity ( simulated below in code using ```Thread.sleep(10000)```) , it should pick up another task which is not causing blocking IO.\r\nHowever, running below code with parallelism of 1 or 2 with ForkJoinPool the results don&#39;t match it. The Thread doesn&#39;t relinquish the blocking task(i.e task 1 and task2 ) and moves to non blocking ( task 3 ). \r\nIn case of pool size =1 , all tasks execute in sequence whereas I expected Task 3 to complete first as it was non blocking in both cases ( pool size=1 or 2)\r\n\r\nWhat is the actual behaviour of Threads in ForkJoinPool in case of blocking IO ?\r\n\r\n    \tForkJoinPool pool = new  ForkJoinPool(1);\r\n    \t\r\n    \tList&lt;Future&lt;String&gt;&gt; tasks = new ArrayList&lt;Future&lt;String&gt;&gt;();\r\n    \t\r\n\r\n        //Blocking\r\n    \ttasks.add(pool.submit(() -&gt;  {  Thread.sleep(10000); System.out.println(&quot;Task 1 woke up&quot;+ Thread.currentThread().isDaemon()); return &quot;task1&quot;; }));\r\n    \t//Blocking\r\n    \ttasks.add(pool.submit(() -&gt;  { Thread.sleep(10000); System.out.println(&quot;Task 2 woke up&quot;+Thread.currentThread().isDaemon()); return &quot;task2&quot;; }));\r\n    \t//Non Blocking\r\n    \ttasks.add(pool.submit(() -&gt;  {  System.out.println(&quot;Task 3 Runs&quot;+Thread.currentThread().isDaemon()); return &quot;task3&quot;; }));\r\n    \t\r\n    \r\n    \t\r\n    \tint i=0;\r\n    \tSystem.out.println(&quot;pool size = &quot; + pool.getParallelism() + &quot;Thread count=&quot; +pool.getPoolSize() + &quot;Stealing =&quot; + pool.getStealCount());\r\n    \tSystem.out.println(&quot;waiting&quot;);\r\n    \t\r\n    \tString str1 = tasks.get(0).get();\r\n    \tString str2 = tasks.get(1).get();\r\n    \tString str3 = tasks.get(2).get();\r\n    \t\r\n    \tSystem.out.println(&quot;Results = &quot; +  str1+ str2 +str3);\r\n    \t\r\n    \tSystem.out.println(&quot;done&quot;);\r\n    \r\nResults :  \r\n\r\n&gt;//Pool size = 2    \r\n&gt;Task 2 woke uptrue  \r\n&gt;Task 1 woke uptrue  \r\n&gt;Task 3 Runstrue  \r\n\r\n&gt;//Pool size = 1   \r\n&gt;Task 1 woke uptrue  \r\n&gt;Task 2 woke uptrue  \r\n&gt;Task 3 Runstrue  \r\n\r\nAnother observation:  \r\nWhen we submit Task 3( non blocking ) first then only it is invoked first.","title":"Behaviour of Threads during blocking IO in Java ForkJoinPool","body":"<p>If the Thread inside the ForkJoinPool does a blocking I/O activity ( simulated below in code using <code>Thread.sleep(10000)</code>) , it should pick up another task which is not causing blocking IO.\nHowever, running below code with parallelism of 1 or 2 with ForkJoinPool the results don't match it. The Thread doesn't relinquish the blocking task(i.e task 1 and task2 ) and moves to non blocking ( task 3 ).\nIn case of pool size =1 , all tasks execute in sequence whereas I expected Task 3 to complete first as it was non blocking in both cases ( pool size=1 or 2)</p>\n<p>What is the actual behaviour of Threads in ForkJoinPool in case of blocking IO ?</p>\n<pre><code>    ForkJoinPool pool = new  ForkJoinPool(1);\n    \n    List&lt;Future&lt;String&gt;&gt; tasks = new ArrayList&lt;Future&lt;String&gt;&gt;();\n    \n\n    //Blocking\n    tasks.add(pool.submit(() -&gt;  {  Thread.sleep(10000); System.out.println(&quot;Task 1 woke up&quot;+ Thread.currentThread().isDaemon()); return &quot;task1&quot;; }));\n    //Blocking\n    tasks.add(pool.submit(() -&gt;  { Thread.sleep(10000); System.out.println(&quot;Task 2 woke up&quot;+Thread.currentThread().isDaemon()); return &quot;task2&quot;; }));\n    //Non Blocking\n    tasks.add(pool.submit(() -&gt;  {  System.out.println(&quot;Task 3 Runs&quot;+Thread.currentThread().isDaemon()); return &quot;task3&quot;; }));\n    \n\n    \n    int i=0;\n    System.out.println(&quot;pool size = &quot; + pool.getParallelism() + &quot;Thread count=&quot; +pool.getPoolSize() + &quot;Stealing =&quot; + pool.getStealCount());\n    System.out.println(&quot;waiting&quot;);\n    \n    String str1 = tasks.get(0).get();\n    String str2 = tasks.get(1).get();\n    String str3 = tasks.get(2).get();\n    \n    System.out.println(&quot;Results = &quot; +  str1+ str2 +str3);\n    \n    System.out.println(&quot;done&quot;);\n</code></pre>\n<p>Results :</p>\n<blockquote>\n<p>//Pool size = 2<br />\nTask 2 woke uptrue<br />\nTask 1 woke uptrue<br />\nTask 3 Runstrue</p>\n</blockquote>\n<blockquote>\n<p>//Pool size = 1<br />\nTask 1 woke uptrue<br />\nTask 2 woke uptrue<br />\nTask 3 Runstrue</p>\n</blockquote>\n<p>Another observation:<br />\nWhen we submit Task 3( non blocking ) first then only it is invoked first.</p>\n"},{"tags":["java","bitmap","unsigned","bitboard"],"comments":[{"owner":{"account_id":2792262,"reputation":163877,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"score":2,"creation_date":1684351626,"post_id":76275571,"comment_id":134507522,"body_markdown":"You can use Java type `long`, which is 64 bits wide.  That it is a signed integer type would be an issue in C or C++, but it should not present a problem in Java.  For example, `1L &lt;&lt; 63` is well-defined in Java.","body":"You can use Java type <code>long</code>, which is 64 bits wide.  That it is a signed integer type would be an issue in C or C++, but it should not present a problem in Java.  For example, <code>1L &lt;&lt; 63</code> is well-defined in Java."},{"owner":{"account_id":2792262,"reputation":163877,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"score":0,"creation_date":1684351982,"post_id":76275571,"comment_id":134507586,"body_markdown":"Side note: there is one unsigned primitive type in Java: `char` is a 16-bit unsigned integer.  Not that I think that helps you.","body":"Side note: there is one unsigned primitive type in Java: <code>char</code> is a 16-bit unsigned integer.  Not that I think that helps you."},{"owner":{"account_id":974021,"reputation":63348,"user_id":995891,"accept_rate":83,"display_name":"zapl"},"score":2,"creation_date":1684352257,"post_id":76275571,"comment_id":134507642,"body_markdown":"There are also classes like [`BitSet`](https://docs.oracle.com/javase/8/docs/api/java/util/BitSet.html) that can help when your goal is to have an easier time. If you want to keep memory space to a minimum it&#39;s probably better to go with sometimes slightly awkward bit operations. E.g. keep in mind that java automatically widens `0xFF` to a full 32bit int","body":"There are also classes like <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/BitSet.html\" rel=\"nofollow noreferrer\"><code>BitSet</code></a> that can help when your goal is to have an easier time. If you want to keep memory space to a minimum it&#39;s probably better to go with sometimes slightly awkward bit operations. E.g. keep in mind that java automatically widens <code>0xFF</code> to a full 32bit int"},{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":1,"creation_date":1684352403,"post_id":76275571,"comment_id":134507667,"body_markdown":"Are you actually doing bit operations? Otherwise you should use objects that better represent the domain of the problem. You have more tools for that in Java than in C, like objects, enums.","body":"Are you actually doing bit operations? Otherwise you should use objects that better represent the domain of the problem. You have more tools for that in Java than in C, like objects, enums."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1684352797,"post_id":76275571,"comment_id":134507742,"body_markdown":"Like @aled suggests… Enums in Java are much more powerful and flexible than seen in most other languages. An enum in Java can have state (member fields), constructors, and methods. So each enum object per square can store its color, and store what piece rests on it, if you so choose. And `EnumSet` &amp; `EnumMap` can very efficiently store a collection of enum objects.","body":"Like @aled suggests… Enums in Java are much more powerful and flexible than seen in most other languages. An enum in Java can have state (member fields), constructors, and methods. So each enum object per square can store its color, and store what piece rests on it, if you so choose. And <code>EnumSet</code> &amp; <code>EnumMap</code> can very efficiently store a collection of enum objects."},{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1684352862,"post_id":76275571,"comment_id":134507755,"body_markdown":"I wouldn&#39;t tend to use enums here, if only because chessboards are best expressed as grids with numeric coordinates.  There&#39;s specific advantage to be gained by sticking to numbers.","body":"I wouldn&#39;t tend to use enums here, if only because chessboards are best expressed as grids with numeric coordinates.  There&#39;s specific advantage to be gained by sticking to numbers."},{"owner":{"account_id":27878698,"reputation":1,"user_id":21287675,"display_name":"Radoslav Khun"},"score":0,"creation_date":1684359109,"post_id":76275571,"comment_id":134508890,"body_markdown":"That long is signed, is problem in Java for me, because I&#39;m not able to handle with the last bit properly, or at least I personely don&#39;t know how to manage it.","body":"That long is signed, is problem in Java for me, because I&#39;m not able to handle with the last bit properly, or at least I personely don&#39;t know how to manage it."},{"owner":{"account_id":27878698,"reputation":1,"user_id":21287675,"display_name":"Radoslav Khun"},"score":0,"creation_date":1684359182,"post_id":76275571,"comment_id":134508899,"body_markdown":"I am doing bit operations, that&#39;s the point why to use bitboards, there is a far faster moves generator and so on.","body":"I am doing bit operations, that&#39;s the point why to use bitboards, there is a far faster moves generator and so on."},{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1684361521,"post_id":76275571,"comment_id":134509231,"body_markdown":"The last bit works exactly like all the other bits, you just have to use `&gt;&gt;&gt;` instead of `&gt;&gt;`.","body":"The last bit works exactly like all the other bits, you just have to use <code>&gt;&gt;&gt;</code> instead of <code>&gt;&gt;</code>."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1684370742,"post_id":76275571,"comment_id":134510222,"body_markdown":"Off-topic:  Although Java doesn&#39;t  have an `unsigned` type, it does have some support. Check out the methods in the [Long API](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Long.html) .  There is a brief [bitwise operators tutorial](https://docs.oracle.com/javase/tutorial/java/nutsandbolts/op3.html) .","body":"Off-topic:  Although Java doesn&#39;t  have an <code>unsigned</code> type, it does have some support. Check out the methods in the <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Long.html\" rel=\"nofollow noreferrer\">Long API</a> .  There is a brief <a href=\"https://docs.oracle.com/javase/tutorial/java/nutsandbolts/op3.html\" rel=\"nofollow noreferrer\">bitwise operators tutorial</a> ."}],"answers":[{"tags":[],"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1684352942,"creation_date":1684352942,"answer_id":76275719,"question_id":76275571,"body_markdown":"Signedness doesn&#39;t actually make a significant difference to using numbers as bit masks -- at least, not in Java.\r\n\r\nYou can use a `long` just fine, even though it is signed.  `1L &lt;&lt; 63` works.  Just note that you will want to use `&gt;&gt;&gt;` instead of `&gt;&gt;` to when shifting your mask right.\r\n\r\nNote that if you want to store _more_ than 64 bits, you may wish to use `java.util.BitSet`, which is designed specifically as a bitmap that scales as necessary.","title":"Bitmaps/bitboards in Java","body":"<p>Signedness doesn't actually make a significant difference to using numbers as bit masks -- at least, not in Java.</p>\n<p>You can use a <code>long</code> just fine, even though it is signed.  <code>1L &lt;&lt; 63</code> works.  Just note that you will want to use <code>&gt;&gt;&gt;</code> instead of <code>&gt;&gt;</code> to when shifting your mask right.</p>\n<p>Note that if you want to store <em>more</em> than 64 bits, you may wish to use <code>java.util.BitSet</code>, which is designed specifically as a bitmap that scales as necessary.</p>\n"}],"owner":{"account_id":27878698,"reputation":1,"user_id":21287675,"display_name":"Radoslav Khun"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":69,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1684352942,"creation_date":1684351494,"question_id":76275571,"body_markdown":"I&#39;m programming a chess engine in Java and I would like to represent all pieces positions in one variable called bitmap or bitboard. In C++ I would simply use unsigned long, or so-called uint64_t. But because there are no unsigned variables in Java (as far as I know), what is some efficient way, how to implement this method?\r\n\r\nI tried everything I was able to think of","title":"Bitmaps/bitboards in Java","body":"<p>I'm programming a chess engine in Java and I would like to represent all pieces positions in one variable called bitmap or bitboard. In C++ I would simply use unsigned long, or so-called uint64_t. But because there are no unsigned variables in Java (as far as I know), what is some efficient way, how to implement this method?</p>\n<p>I tried everything I was able to think of</p>\n"},{"tags":["java","sap-cloud-foundry"],"comments":[{"owner":{"account_id":2299521,"reputation":619,"user_id":2020124,"display_name":"Apache"},"score":0,"creation_date":1579203074,"post_id":59776499,"comment_id":105697224,"body_markdown":"Hi, welcome to Stack Overflow. Please see this example of [how to create a Minimal, Reproducible Example](https://stackoverflow.com/help/minimal-reproducible-example)","body":"Hi, welcome to Stack Overflow. Please see this example of <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">how to create a Minimal, Reproducible Example</a>"}],"answers":[{"tags":[],"owner":{"account_id":2904628,"reputation":6707,"user_id":2490343,"accept_rate":100,"display_name":"Shiva"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1579588553,"creation_date":1579588553,"answer_id":59835417,"question_id":59776499,"body_markdown":"There are a few ways in which you can pass `Environment Variables` in a cloud foundry \r\n\r\n 1. Using the set-env variable command using cf commandline: The general syntax is `cf set-env APP_NAME ENV_VAR_NAME ENV_VAR_VALUE`\r\n 2. Using Manifest file: If you are using manifest file with `cf push` you can set the environamet valriables in it like so. Official documenttaion can be found [here][1]\r\n\r\n    `env:\r\n        ENV_VARIABLE1: value1\r\n        ENV_VARIABLE1: value2`\r\n\r\n 3. Using mtar descriptor: This might be specific to SAP Cloud Foundry, if you are using SAP Cloud platrom and are deploying applications as `mtar`, in the mtar deployment descriptor, you can set the `PROPERTIES` field in under the deployment section to add additional env varables. Additional documentation can be found [here][2]. e.g.\r\n\r\n\r\n    `properties:\r\n          POPULATE_ALBUM_REPOSITORY: true`\r\n\r\n\r\n  [1]: https://docs.cloudfoundry.org/devguide/deploy-apps/manifest-attributes.html#env-block\r\n  [2]: https://github.com/cloudfoundry-incubator/multiapps-controller/wiki/Deployment-Descriptor","title":"How can I pass json file or object to start the application in cloud foundry?","body":"<p>There are a few ways in which you can pass <code>Environment Variables</code> in a cloud foundry </p>\n\n<ol>\n<li>Using the set-env variable command using cf commandline: The general syntax is <code>cf set-env APP_NAME ENV_VAR_NAME ENV_VAR_VALUE</code></li>\n<li><p>Using Manifest file: If you are using manifest file with <code>cf push</code> you can set the environamet valriables in it like so. Official documenttaion can be found <a href=\"https://docs.cloudfoundry.org/devguide/deploy-apps/manifest-attributes.html#env-block\" rel=\"nofollow noreferrer\">here</a></p>\n\n<p><code>env:\n    ENV_VARIABLE1: value1\n    ENV_VARIABLE1: value2</code></p></li>\n<li><p>Using mtar descriptor: This might be specific to SAP Cloud Foundry, if you are using SAP Cloud platrom and are deploying applications as <code>mtar</code>, in the mtar deployment descriptor, you can set the <code>PROPERTIES</code> field in under the deployment section to add additional env varables. Additional documentation can be found <a href=\"https://github.com/cloudfoundry-incubator/multiapps-controller/wiki/Deployment-Descriptor\" rel=\"nofollow noreferrer\">here</a>. e.g.</p>\n\n<p><code>properties:\n      POPULATE_ALBUM_REPOSITORY: true</code></p></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":575816,"reputation":21,"user_id":229797,"display_name":"Mike Mountrakis"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684352557,"creation_date":1684352557,"answer_id":76275673,"question_id":59776499,"body_markdown":"Adding to the answer above you can use also:\r\n```\r\ncf set-env myapplication env1=val1 env2=val2 env3=val3 ...\r\n```\r\nwhere `...` is another set of `env=val` to set more than one variable in the same line\r\n\r\nFor large JSON variables you can use:\r\n```\r\nexport MYVAR=`cat mylarge.json`\r\ncf set-env myapplication MIKEVAR &quot;$MYVAR&quot;\r\n```\r\n\r\nFinally, in order to rewrite the entire configuration you can use the following example:\r\n\r\n```\r\ncf curl -X PUT /v2/apps/&lt;app-guid&gt; -d &#39;{&quot;environment_json&quot;:{&quot;ENV1&quot;:&quot;VAL1&quot;, &quot;ENV2&quot;: &quot;VAL2&quot;}}&#39;\r\n```\r\nThat overwrites everything and replaces it with what is in the JSON, so if you have existing env variables you&#39;d have to include those as well as the new ones you want to set.","title":"How can I pass json file or object to start the application in cloud foundry?","body":"<p>Adding to the answer above you can use also:</p>\n<pre><code>cf set-env myapplication env1=val1 env2=val2 env3=val3 ...\n</code></pre>\n<p>where <code>...</code> is another set of <code>env=val</code> to set more than one variable in the same line</p>\n<p>For large JSON variables you can use:</p>\n<pre><code>export MYVAR=`cat mylarge.json`\ncf set-env myapplication MIKEVAR &quot;$MYVAR&quot;\n</code></pre>\n<p>Finally, in order to rewrite the entire configuration you can use the following example:</p>\n<pre><code>cf curl -X PUT /v2/apps/&lt;app-guid&gt; -d '{&quot;environment_json&quot;:{&quot;ENV1&quot;:&quot;VAL1&quot;, &quot;ENV2&quot;: &quot;VAL2&quot;}}'\n</code></pre>\n<p>That overwrites everything and replaces it with what is in the JSON, so if you have existing env variables you'd have to include those as well as the new ones you want to set.</p>\n"}],"owner":{"account_id":17545520,"reputation":1,"user_id":12726900,"display_name":"Nikita"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":792,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1684352557,"creation_date":1579202667,"question_id":59776499,"body_markdown":"I have a java application. Which needs json object to start the app. In my local environment I pass this through VM options but not able to figure out this in cloud foundry. \r\n\r\nI tried passing in .profile file but it did not work. In this file I provide export variablename=&quot;{jsonObject}&quot; \r\n\r\nAny help will be appreciated.\r\n\r\nThank you","title":"How can I pass json file or object to start the application in cloud foundry?","body":"<p>I have a java application. Which needs json object to start the app. In my local environment I pass this through VM options but not able to figure out this in cloud foundry. </p>\n\n<p>I tried passing in .profile file but it did not work. In this file I provide export variablename=\"{jsonObject}\" </p>\n\n<p>Any help will be appreciated.</p>\n\n<p>Thank you</p>\n"},{"tags":["java","eclipse"],"comments":[{"owner":{"account_id":1937019,"reputation":4428,"user_id":1744230,"accept_rate":100,"display_name":"QBrute"},"score":1,"creation_date":1684317246,"post_id":76270769,"comment_id":134499560,"body_markdown":"Please note that SO is an english-only site. Also there are too many infos missing. You said that your code doesn&#39;t do what it should. *What* should it do? Where is your code? What is expected and what is actually happening?","body":"Please note that SO is an english-only site. Also there are too many infos missing. You said that your code doesn&#39;t do what it should. <i>What</i> should it do? Where is your code? What is expected and what is actually happening?"},{"owner":{"account_id":28618695,"reputation":38,"user_id":21912136,"display_name":"FlobiusKane"},"score":0,"creation_date":1684317729,"post_id":76270769,"comment_id":134499664,"body_markdown":"Sorry first time here","body":"Sorry first time here"},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1684320376,"post_id":76270769,"comment_id":134500219,"body_markdown":"*&quot;... for some reason, filtering for the earliest and latest Easter Sunday doesn&#39;t seem to work.&quot;* - Tell us explicitly what output you are expecting and what output you are getting.   And the inputs ...","body":"<i>&quot;... for some reason, filtering for the earliest and latest Easter Sunday doesn&#39;t seem to work.&quot;</i> - Tell us explicitly what output you are expecting and what output you are getting.   And the inputs ..."},{"owner":{"account_id":114128,"reputation":50467,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":1,"creation_date":1684321551,"post_id":76270769,"comment_id":134500482,"body_markdown":"Which Easter?  In the Western world, Easter in 2023 was April 9th.  In the Orthodox world, April 16th.","body":"Which Easter?  In the Western world, Easter in 2023 was April 9th.  In the Orthodox world, April 16th."},{"owner":{"account_id":28618695,"reputation":38,"user_id":21912136,"display_name":"FlobiusKane"},"score":0,"creation_date":1684322410,"post_id":76270769,"comment_id":134500643,"body_markdown":"The easter sunday of the Western world. I`m in europe.","body":"The easter sunday of the Western world. I`m in europe."},{"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1684327062,"post_id":76270769,"comment_id":134501661,"body_markdown":"I know that Easter can occur between March 22 and April 25 inclusive.  But its date is determined by the first full moon of Spring.  Your code may well be computing that but using single letters for values does not really explain what you&#39;re doing.  I presume you will fully document your code but you should also use meaningful variable names.","body":"I know that Easter can occur between March 22 and April 25 inclusive.  But its date is determined by the first full moon of Spring.  Your code may well be computing that but using single letters for values does not really explain what you&#39;re doing.  I presume you will fully document your code but you should also use meaningful variable names."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":1,"creation_date":1684331856,"post_id":76270769,"comment_id":134502919,"body_markdown":"@WJS I think at least some of the variables are taken from [this algorithm](https://en.wikipedia.org/wiki/Date_of_Easter#Gauss&#39;s_Easter_algorithm) or the ones that follow it.","body":"@WJS I think at least some of the variables are taken from <a href=\"https://en.wikipedia.org/wiki/Date_of_Easter#Gauss&#39;s_Easter_algorithm\" rel=\"nofollow noreferrer\">this algorithm</a> or the ones that follow it."},{"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1684343366,"post_id":76270769,"comment_id":134505805,"body_markdown":"@VGR Yep.  Interesting article which I may study at some point. But the OP&#39;s problem was using `isBefore` and `isAfter` to check for differences which also include the year.  The OP only wants day of year differences.","body":"@VGR Yep.  Interesting article which I may study at some point. But the OP&#39;s problem was using <code>isBefore</code> and <code>isAfter</code> to check for differences which also include the year.  The OP only wants day of year differences."}],"answers":[{"comments":[{"owner":{"account_id":28618695,"reputation":38,"user_id":21912136,"display_name":"FlobiusKane"},"score":0,"creation_date":1684834356,"post_id":76273603,"comment_id":134571460,"body_markdown":"Thanks for the help. By using the comparator the code finaly works. I struggled for at least 1,5 Weeks to find a solution for my problem.","body":"Thanks for the help. By using the comparator the code finaly works. I struggled for at least 1,5 Weeks to find a solution for my problem."}],"tags":[],"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1684351843,"creation_date":1684336326,"answer_id":76273603,"question_id":76270769,"body_markdown":"One problem is that you are incrementing years. And using the `isBefore` and `isAfter` methods also include the year which is incorrectly reporting `min` and `max` dates for Easter. Example. `2023-04-09 isBefore 2024-03-31` from a date perspective but not from a `month/day` perspective. Note: I had to print the actual values you were comparing to see what was going on and at first it wasn&#39;t obvious to me.  *Print statements are your friend when it comes to debugging*.  So you just compare the day of the year to previous days of the year for Easter. So here is what I did.\r\n\r\n- define a comparator to compare month and day using the day of year.\r\n- initialize your `min` and `max` to the current year date for Easter.\r\n- then starting with &#39;1&#39;, increment your years.\r\n```\r\nint x = 20;\r\n\r\nint currentYear = 2023;\r\nComparator&lt;LocalDate&gt; comp = Comparator.comparing(LocalDate::getDayOfYear);\r\n\r\nLocalDate ostersonntag = berechneOstersonntag(currentYear);\r\nLocalDate sp&#228;testerOstersonntag = ostersonntag;\r\nLocalDate fr&#252;hesterOstersonntag = ostersonntag;\r\n\r\n    for (int i = 0; i &lt; x; i++) {\r\n       ostersonntag = berechneOstersonntag(currentYear + \r\n    i);\r\n\r\n        if (comp.compare(ostersonntag, sp&#228;testerOstersonntag) &gt; 0) {\r\n            sp&#228;testerOstersonntag = ostersonntag;\r\n        } else if (comp.compare(ostersonntag, fr&#252;hesterOstersonntag) &lt; 0) {\r\n            fr&#252;hesterOstersonntag = ostersonntag;\r\n        }\r\n    }\r\n\r\n    System.out.println(&quot;Spaetester Ostersonntag: &quot; + \r\n    sp&#228;testerOstersonntag);\r\n    System.out.println(&quot;Fruehester Ostersonntag: &quot; + \r\n    fr&#252;hesterOstersonntag);     \r\n}\r\n```\r\nprints\r\n```\r\nSpaetester Ostersonntag: 2038-04-25\r\nFruehester Ostersonntag: 2035-03-25\r\n```\r\nNote:  Another issue is that you and I are using different calculations to determine Easter. I used [this algorithm](https://en.wikipedia.org/wiki/Date_of_Easter#Gauss&#39;s_Easter_algorithm) posted by @VGR.  I verified the above using [Easter Dates]( https://www.census.gov/data/software/x13as/genhol/easter-dates.html#par_textimage_1067001717)","title":"Calculation of Easter Sunday with earliest and latest date","body":"<p>One problem is that you are incrementing years. And using the <code>isBefore</code> and <code>isAfter</code> methods also include the year which is incorrectly reporting <code>min</code> and <code>max</code> dates for Easter. Example. <code>2023-04-09 isBefore 2024-03-31</code> from a date perspective but not from a <code>month/day</code> perspective. Note: I had to print the actual values you were comparing to see what was going on and at first it wasn't obvious to me.  <em>Print statements are your friend when it comes to debugging</em>.  So you just compare the day of the year to previous days of the year for Easter. So here is what I did.</p>\n<ul>\n<li>define a comparator to compare month and day using the day of year.</li>\n<li>initialize your <code>min</code> and <code>max</code> to the current year date for Easter.</li>\n<li>then starting with '1', increment your years.</li>\n</ul>\n<pre><code>int x = 20;\n\nint currentYear = 2023;\nComparator&lt;LocalDate&gt; comp = Comparator.comparing(LocalDate::getDayOfYear);\n\nLocalDate ostersonntag = berechneOstersonntag(currentYear);\nLocalDate spätesterOstersonntag = ostersonntag;\nLocalDate frühesterOstersonntag = ostersonntag;\n\n    for (int i = 0; i &lt; x; i++) {\n       ostersonntag = berechneOstersonntag(currentYear + \n    i);\n\n        if (comp.compare(ostersonntag, spätesterOstersonntag) &gt; 0) {\n            spätesterOstersonntag = ostersonntag;\n        } else if (comp.compare(ostersonntag, frühesterOstersonntag) &lt; 0) {\n            frühesterOstersonntag = ostersonntag;\n        }\n    }\n\n    System.out.println(&quot;Spaetester Ostersonntag: &quot; + \n    spätesterOstersonntag);\n    System.out.println(&quot;Fruehester Ostersonntag: &quot; + \n    frühesterOstersonntag);     \n}\n</code></pre>\n<p>prints</p>\n<pre><code>Spaetester Ostersonntag: 2038-04-25\nFruehester Ostersonntag: 2035-03-25\n</code></pre>\n<p>Note:  Another issue is that you and I are using different calculations to determine Easter. I used <a href=\"https://en.wikipedia.org/wiki/Date_of_Easter#Gauss%27s_Easter_algorithm\" rel=\"nofollow noreferrer\">this algorithm</a> posted by @VGR.  I verified the above using <a href=\"https://www.census.gov/data/software/x13as/genhol/easter-dates.html#par_textimage_1067001717\" rel=\"nofollow noreferrer\">Easter Dates</a></p>\n"}],"owner":{"account_id":28618695,"reputation":38,"user_id":21912136,"display_name":"FlobiusKane"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":141,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"accepted_answer_id":76273603,"answer_count":1,"score":0,"last_activity_date":1684351843,"creation_date":1684317078,"question_id":76270769,"body_markdown":"&quot;I have been assigned the task of programming a calculator in Java (C# would also work) that, based on the current year and user input, outputs the dates for the earliest and latest Easter Sunday. The program should work in such a way that the user enters a number representing the number of years to be checked in the future. The current year is 2023. The output should then display the earliest and latest dates on which Easter Sunday occurred within the specified number of years.\r\n\r\nUnfortunately, my code doesn&#39;t seem to solve it. The calculation of Easter Sundays is correct, but for some reason, filtering for the earliest and latest Easter Sunday doesn&#39;t seem to work.&quot;\r\n\r\n````\r\n        import java.time.LocalDate;\r\n        import java.util.Scanner;\r\n\r\n        public class Ostersonntag3 {\r\n        public static void main(String[] args) {\r\n        Scanner scanner = new Scanner(System.in);\r\n\r\n        System.out.print(&quot;Bitte geben Sie eine Anzahl an Jahren ein: &quot;);\r\n        int x = scanner.nextInt();\r\n\r\n        LocalDate sp&#228;testerOstersonntag = LocalDate.MAX;\r\n        LocalDate fr&#252;hesterOstersonntag = LocalDate.MIN;\r\n\r\n        int currentYear = 2023;\r\n\r\n        for (int i = 0; i &lt; x; i++) {\r\n            LocalDate ostersonntag = berechneOstersonntag(currentYear + \r\n        i);\r\n\r\n            if (ostersonntag.isBefore(sp&#228;testerOstersonntag)) {\r\n            \tsp&#228;testerOstersonntag = ostersonntag;\r\n            }\r\n\r\n            if (ostersonntag.isAfter(fr&#252;hesterOstersonntag)) {\r\n            \tfr&#252;hesterOstersonntag = ostersonntag;\r\n            }\r\n        }\r\n\r\n        System.out.println(&quot;Spaetester Ostersonntag: &quot; + \r\n        sp&#228;testerOstersonntag);\r\n        System.out.println(&quot;Fruehester Ostersonntag: &quot; + \r\n        fr&#252;hesterOstersonntag);\r\n\r\n        scanner.close();\r\n        }\r\n \r\n        private static LocalDate berechneOstersonntag(int jahr) {\r\n        int a = jahr % 19;\r\n        int b = jahr % 4;\r\n        int c = jahr % 7;\r\n        int m = (8 * (jahr / 100) + 13) / 25 - 2;\r\n        int s = jahr / 100 - jahr / 400 - 2;\r\n        int n = (6 + s) % 7;\r\n        int d = (m + 19 * a) % 30;\r\n\r\n        if (d == 29) {\r\n            d = 28;\r\n        }\r\n\r\n        if (d == 28 &amp;&amp; a &gt;= 11) {\r\n            d = 27;\r\n        }\r\n\r\n        int e = (2 * b + 4 * c + 6 * d + n) % 7;\r\n\r\n        int tag = 21 + d + e + 1;\r\n        int monat;\r\n\r\n        if (tag &gt; 31) {\r\n            tag = tag % 31;\r\n            monat = 4;\r\n        } else {\r\n            monat = 3;\r\n        }\r\n\r\n        return LocalDate.of(jahr, monat, tag);\r\n        }\r\n        }\r\n````\r\n\r\nThe Input is as you can see a number (int) and the Output that i want is a date (for example 2023.04.22, etc.) the dates should represent the earliest and latest easter sunday in the amount of years the user put in. \r\nBut the Output does not seem to be giving me the correct dates:\r\n[(for example the input is 20; the output is 2023.04.16 as the latest easter sunday and 2023.04.20 is the date for the closest easter sunday)\r\n(But if the Input is 200; the output is 2023.04.16 for the latest and 2023.04.14 for the earliest easter sunday)\r\n(And if the input is 30; the output is 2023.04.16 for the latest and 2023.03.31 for the earliest easter sunday)].\r\nThis does not make sense for me like at all??","title":"Calculation of Easter Sunday with earliest and latest date","body":"<p>&quot;I have been assigned the task of programming a calculator in Java (C# would also work) that, based on the current year and user input, outputs the dates for the earliest and latest Easter Sunday. The program should work in such a way that the user enters a number representing the number of years to be checked in the future. The current year is 2023. The output should then display the earliest and latest dates on which Easter Sunday occurred within the specified number of years.</p>\n<p>Unfortunately, my code doesn't seem to solve it. The calculation of Easter Sundays is correct, but for some reason, filtering for the earliest and latest Easter Sunday doesn't seem to work.&quot;</p>\n<pre><code>        import java.time.LocalDate;\n        import java.util.Scanner;\n\n        public class Ostersonntag3 {\n        public static void main(String[] args) {\n        Scanner scanner = new Scanner(System.in);\n\n        System.out.print(&quot;Bitte geben Sie eine Anzahl an Jahren ein: &quot;);\n        int x = scanner.nextInt();\n\n        LocalDate spätesterOstersonntag = LocalDate.MAX;\n        LocalDate frühesterOstersonntag = LocalDate.MIN;\n\n        int currentYear = 2023;\n\n        for (int i = 0; i &lt; x; i++) {\n            LocalDate ostersonntag = berechneOstersonntag(currentYear + \n        i);\n\n            if (ostersonntag.isBefore(spätesterOstersonntag)) {\n                spätesterOstersonntag = ostersonntag;\n            }\n\n            if (ostersonntag.isAfter(frühesterOstersonntag)) {\n                frühesterOstersonntag = ostersonntag;\n            }\n        }\n\n        System.out.println(&quot;Spaetester Ostersonntag: &quot; + \n        spätesterOstersonntag);\n        System.out.println(&quot;Fruehester Ostersonntag: &quot; + \n        frühesterOstersonntag);\n\n        scanner.close();\n        }\n \n        private static LocalDate berechneOstersonntag(int jahr) {\n        int a = jahr % 19;\n        int b = jahr % 4;\n        int c = jahr % 7;\n        int m = (8 * (jahr / 100) + 13) / 25 - 2;\n        int s = jahr / 100 - jahr / 400 - 2;\n        int n = (6 + s) % 7;\n        int d = (m + 19 * a) % 30;\n\n        if (d == 29) {\n            d = 28;\n        }\n\n        if (d == 28 &amp;&amp; a &gt;= 11) {\n            d = 27;\n        }\n\n        int e = (2 * b + 4 * c + 6 * d + n) % 7;\n\n        int tag = 21 + d + e + 1;\n        int monat;\n\n        if (tag &gt; 31) {\n            tag = tag % 31;\n            monat = 4;\n        } else {\n            monat = 3;\n        }\n\n        return LocalDate.of(jahr, monat, tag);\n        }\n        }\n</code></pre>\n<p>The Input is as you can see a number (int) and the Output that i want is a date (for example 2023.04.22, etc.) the dates should represent the earliest and latest easter sunday in the amount of years the user put in.\nBut the Output does not seem to be giving me the correct dates:\n[(for example the input is 20; the output is 2023.04.16 as the latest easter sunday and 2023.04.20 is the date for the closest easter sunday)\n(But if the Input is 200; the output is 2023.04.16 for the latest and 2023.04.14 for the earliest easter sunday)\n(And if the input is 30; the output is 2023.04.16 for the latest and 2023.03.31 for the earliest easter sunday)].\nThis does not make sense for me like at all??</p>\n"},{"tags":["java","validation"],"comments":[{"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1684365351,"post_id":76275480,"comment_id":134509712,"body_markdown":"I don&#39;t really understand what you&#39;re asking, but can&#39;t you just add a `boolean allowNull` attribute to the validation annotation and implement it? Or perhaps make optional fields `Optional&lt;String&gt;`, which also requires implementation, but more strongly telegraphs that it is optional (I have done this and it worked very well).","body":"I don&#39;t really understand what you&#39;re asking, but can&#39;t you just add a <code>boolean allowNull</code> attribute to the validation annotation and implement it? Or perhaps make optional fields <code>Optional&lt;String&gt;</code>, which also requires implementation, but more strongly telegraphs that it is optional (I have done this and it worked very well)."}],"owner":{"account_id":17814639,"reputation":63,"user_id":12938483,"display_name":"PoCiTo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684350669,"creation_date":1684350669,"question_id":76275480,"body_markdown":"I have some fields which I want to be validated only for certain validation groups. Also I want these field to be optional, meaning that they can contain null, but otherwise they should have valid value.\r\n\r\nexample:\r\n\r\n```\r\nclass Test{\r\n    @CustomValidation1\r\n    private String alwaysValidatedField;\r\n\r\n    @CustomValidation2(groups = A.class)\r\n    private String mandatoryFieldForGroupA;\r\n    \r\n    @CustomValidation2(groups = {B.class, C.class})\r\n    private String optionalFieldForGroupB_C;\r\n    \r\n    interface A{}\r\n    interface B{}\r\n    interface C{}\r\n}\r\n```\r\n\r\nIs there any way other than creating additional custom validations that do the same but allows null values? ","title":"Java bean validation with optional fields and groups","body":"<p>I have some fields which I want to be validated only for certain validation groups. Also I want these field to be optional, meaning that they can contain null, but otherwise they should have valid value.</p>\n<p>example:</p>\n<pre><code>class Test{\n    @CustomValidation1\n    private String alwaysValidatedField;\n\n    @CustomValidation2(groups = A.class)\n    private String mandatoryFieldForGroupA;\n    \n    @CustomValidation2(groups = {B.class, C.class})\n    private String optionalFieldForGroupB_C;\n    \n    interface A{}\n    interface B{}\n    interface C{}\n}\n</code></pre>\n<p>Is there any way other than creating additional custom validations that do the same but allows null values?</p>\n"},{"tags":["java","jar","helidon"],"comments":[{"owner":{"account_id":59417,"reputation":7474,"user_id":177784,"accept_rate":100,"display_name":"Ashwin Prabhu"},"score":0,"creation_date":1684340905,"post_id":76274101,"comment_id":134505303,"body_markdown":"A simple google returns the following link for MODULES_SILENT_SHELL_DEBUG:\n\nhttps://modules.readthedocs.io/en/stable/module.html#mconfig-silent_shell_debug\n\nSo it looks like the value of MODULES_SILENT_SHELL_DEBUG is messing up something within Helidon which could be trying to introspect the property value looking for ${} expressions to expand.","body":"A simple google returns the following link for MODULES_SILENT_SHELL_DEBUG:  <a href=\"https://modules.readthedocs.io/en/stable/module.html#mconfig-silent_shell_debug\" rel=\"nofollow noreferrer\">modules.readthedocs.io/en/stable/&hellip;</a>  So it looks like the value of MODULES_SILENT_SHELL_DEBUG is messing up something within Helidon which could be trying to introspect the property value looking for ${} expressions to expand."}],"answers":[{"tags":[],"owner":{"account_id":59417,"reputation":7474,"user_id":177784,"accept_rate":100,"display_name":"Ashwin Prabhu"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1684344114,"creation_date":1684344114,"answer_id":76274685,"question_id":76274101,"body_markdown":"`MODULES_SILENT_SHELL_DEBUG` appears to be an [environment variable][1] defined to a shell script in your specific shell. If you look carefully, you will notice an expression &quot;`${IFS+x}`&quot; which matches the syntax of [token expected by Helidon][2]. This is unfortunate but it looks like you would need to unset the environment variables carrying token-like expressions: ${ref} if you want to use environment variables as a configuration source (which you are very likely to need for any K8s deployments)\r\n\r\nIf this is a VM, resetting the offending envs in the execution shell might be a workaround. If this happens within the docker image, consider using a different base image that does not contain those modules.   \r\n\r\nMeanwhile, you may try your luck by filing a bug report on Helidon config requesting Helidon to ignore token-like expressions for values derived from environment and system properties, as it is highly unlikely they are substitution tokens.\r\n\r\n\r\n  [1]: https://modules.readthedocs.io/en/stable/module.html#mconfig-silent_shell_debug\r\n  [2]: https://helidon.io/docs/v3/#/se/config/advanced-configuration#filters-and-overrides","title":"Not able to run the helidon java jar in oracle linux 8","body":"<p><code>MODULES_SILENT_SHELL_DEBUG</code> appears to be an <a href=\"https://modules.readthedocs.io/en/stable/module.html#mconfig-silent_shell_debug\" rel=\"nofollow noreferrer\">environment variable</a> defined to a shell script in your specific shell. If you look carefully, you will notice an expression &quot;<code>${IFS+x}</code>&quot; which matches the syntax of <a href=\"https://helidon.io/docs/v3/#/se/config/advanced-configuration#filters-and-overrides\" rel=\"nofollow noreferrer\">token expected by Helidon</a>. This is unfortunate but it looks like you would need to unset the environment variables carrying token-like expressions: ${ref} if you want to use environment variables as a configuration source (which you are very likely to need for any K8s deployments)</p>\n<p>If this is a VM, resetting the offending envs in the execution shell might be a workaround. If this happens within the docker image, consider using a different base image that does not contain those modules.</p>\n<p>Meanwhile, you may try your luck by filing a bug report on Helidon config requesting Helidon to ignore token-like expressions for values derived from environment and system properties, as it is highly unlikely they are substitution tokens.</p>\n"},{"tags":[],"owner":{"account_id":1824964,"reputation":468,"user_id":1658022,"display_name":"Romain Grecourt"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684350553,"creation_date":1684350553,"answer_id":76275464,"question_id":76274101,"body_markdown":"It seems that you have some exported shell function in your environment.\r\n\r\nYou can try to remove environment variables with names like `BASH_FUNC_`, either manually, one by one or with something like this:\r\n\r\n`unset -f $(env | cut -d &#39;=&#39; -f1 | grep BASH_FUNC_)`\r\n","title":"Not able to run the helidon java jar in oracle linux 8","body":"<p>It seems that you have some exported shell function in your environment.</p>\n<p>You can try to remove environment variables with names like <code>BASH_FUNC_</code>, either manually, one by one or with something like this:</p>\n<p><code>unset -f $(env | cut -d '=' -f1 | grep BASH_FUNC_)</code></p>\n"}],"owner":{"account_id":28621788,"reputation":21,"user_id":21914682,"display_name":"apoorva vejarla"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":99,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1684350553,"creation_date":1684339714,"question_id":76274101,"body_markdown":"I have a helidon MP java project with helidon 3.1.0 and I&#39;m facing the issue below when I&#39;m trying to run the generated jar file in oracle linux 8 machine where as same jar file works in other machines. Here are the details.\r\njava version: 17.0.6\r\nhelidon version: 3.1.0\r\nOS : Oracle linux 8\r\nThanks for your support in advance.\r\n```\r\nException in thread &quot;main&quot; java.lang.ExceptionInInitializerError\r\n\tat io.helidon.microprofile.cdi.ContainerInstanceHolder.fromBuildTimeInitializer(ContainerInstanceHolder.java:65)\r\n\tat io.helidon.microprofile.cdi.ContainerInstanceHolder.lambda$get$1(ContainerInstanceHolder.java:56)\r\n\tat io.helidon.microprofile.cdi.ContainerInstanceHolder.access(ContainerInstanceHolder.java:91)\r\n\tat io.helidon.microprofile.cdi.ContainerInstanceHolder.get(ContainerInstanceHolder.java:53)\r\n\tat io.helidon.microprofile.cdi.HelidonContainer.instance(HelidonContainer.java:48)\r\n\tat io.helidon.microprofile.server.Server$Builder.build(Server.java:190)\r\n\tat io.helidon.microprofile.server.Server.create(Server.java:83)\r\n\tat oracle.communications.sam.performance.KpiApplication.main(KpiApplication.java:61)\r\nCaused by: org.jboss.weld.exceptions.DefinitionException: Exception List with 1 exceptions:\r\nException 0 :\r\njava.util.NoSuchElementException: Property IFS+x used in expression () { unset _mlshdbg;\r\n if [ &quot;${MODULES_SILENT_SHELL_DEBUG:-0}&quot; = &#39;1&#39; ]; then\r\n case &quot;$-&quot; in\r\n *v*x*)\r\n set +vx;\r\n _mlshdbg=&#39;vx&#39;\r\n ;;\r\n *v*)\r\n set +v;\r\n _mlshdbg=&#39;v&#39;\r\n ;;\r\n *x*)\r\n set +x;\r\n _mlshdbg=&#39;x&#39;\r\n ;;\r\n *)\r\n _mlshdbg=&#39;&#39;\r\n ;;\r\n esac;\r\n fi;\r\n unset _mlre _mlIFS;\r\n if [ -n &quot;${IFS+x}&quot; ]; then\r\n _mlIFS=$IFS;\r\n fi;\r\n IFS=&#39; &#39;;\r\n for _mlv in ${MODULES_RUN_QUARANTINE:-};\r\n do\r\n if [ &quot;${_mlv}&quot; = &quot;${_mlv##*[!A-Za-z0-9_]}&quot; -a &quot;${_mlv}&quot; = &quot;${_mlv#[0-9]}&quot; ]; then\r\n if [ -n &quot;`eval &#39;echo ${&#39;$_mlv&#39;+x}&#39;`&quot; ]; then\r\n _mlre=&quot;${_mlre:-}${_mlv}_modquar=&#39;`eval &#39;echo ${&#39;$_mlv&#39;}&#39;`&#39; &quot;;\r\n fi;\r\n _mlrv=&quot;MODULES_RUNENV_${_mlv}&quot;;\r\n _mlre=&quot;${_mlre:-}${_mlv}=&#39;`eval &#39;echo ${&#39;$_mlrv&#39;:-}&#39;`&#39; &quot;;\r\n fi;\r\n done;\r\n if [ -n &quot;${_mlre:-}&quot; ]; then\r\n eval `eval ${_mlre} /usr/bin/tclsh /usr/share/Modules/libexec/modulecmd.tcl bash &#39;&quot;$@&quot;&#39;`;\r\n else\r\n eval `/usr/bin/tclsh /usr/share/Modules/libexec/modulecmd.tcl bash &quot;$@&quot;`;\r\n fi;\r\n _mlstatus=$?;\r\n if [ -n &quot;${_mlIFS+x}&quot; ]; then\r\n IFS=$_mlIFS;\r\n else\r\n unset IFS;\r\n fi;\r\n unset _mlre _mlv _mlrv _mlIFS;\r\n if [ -n &quot;${_mlshdbg:-}&quot; ]; then\r\n set -$_mlshdbg;\r\n fi;\r\n unset _mlshdbg;\r\n return $_mlstatus\r\n} does not exist\r\n\tat io.helidon.config.mp.MpConfigImpl.lambda$format$14(MpConfigImpl.java:421)\r\n\tat java.base/java.util.Optional.orElseThrow(Optional.java:403)\r\n\tat io.helidon.config.mp.MpConfigImpl.format(MpConfigImpl.java:421)\r\n\tat io.helidon.config.mp.MpConfigImpl.processExpressions(MpConfigImpl.java:399)\r\n\tat io.helidon.config.mp.MpConfigImpl.resolveReferences(MpConfigImpl.java:379)\r\n\tat io.helidon.config.mp.MpConfigImpl.lambda$findConfigValue$12(MpConfigImpl.java:340)\r\n\tat java.base/java.util.Optional.map(Optional.java:260)\r\n\tat io.helidon.config.mp.MpConfigImpl.findConfigValue(MpConfigImpl.java:340)\r\n\tat io.helidon.config.mp.MpConfigImpl.optionalValue(MpConfigImpl.java:191)\r\n\tat io.helidon.config.mp.MpConfigImpl.getOptionalValue(MpConfigImpl.java:131)\r\n\tat io.helidon.config.mp.MpConfigProviderResolver$ConfigDelegate.getOptionalValue(MpConfigProviderResolver.java:356)\r\n\tat io.helidon.integrations.datasource.cdi.AbstractDataSourceExtension.initializeMasterProperties(AbstractDataSourceExtension.java:233)\r\n\tat io.helidon.integrations.datasource.cdi.AbstractDataSourceExtension.afterBeanDiscovery(AbstractDataSourceExtension.java:293)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\tat org.jboss.weld.injection.StaticMethodInjectionPoint.invoke(StaticMethodInjectionPoint.java:95)\r\n\tat org.jboss.weld.injection.StaticMethodInjectionPoint.invoke(StaticMethodInjectionPoint.java:85)\r\n\tat org.jboss.weld.injection.MethodInvocationStrategy$SimpleMethodInvocationStrategy.invoke(MethodInvocationStrategy.java:168)\r\n\tat org.jboss.weld.event.ObserverMethodImpl.sendEvent(ObserverMethodImpl.java:330)\r\n\tat org.jboss.weld.event.ExtensionObserverMethodImpl.sendEvent(ExtensionObserverMethodImpl.java:123)\r\n\tat org.jboss.weld.event.ObserverMethodImpl.sendEvent(ObserverMethodImpl.java:308)\r\n\tat org.jboss.weld.event.ObserverMethodImpl.notify(ObserverMethodImpl.java:286)\r\n\tat jakarta.enterprise.inject.spi.ObserverMethod.notify(ObserverMethod.java:125)\r\n\tat org.jboss.weld.util.Observers.notify(Observers.java:166)\r\n\tat org.jboss.weld.event.ObserverNotifier.notifySyncObservers(ObserverNotifier.java:285)\r\n\tat org.jboss.weld.event.ObserverNotifier.notify(ObserverNotifier.java:273)\r\n\tat org.jboss.weld.event.ObserverNotifier.fireEvent(ObserverNotifier.java:177)\r\n\tat org.jboss.weld.event.ObserverNotifier.fireEvent(ObserverNotifier.java:171)\r\n\tat org.jboss.weld.bootstrap.events.AbstractContainerEvent.fire(AbstractContainerEvent.java:53)\r\n\tat org.jboss.weld.bootstrap.events.AbstractDefinitionContainerEvent.fire(AbstractDefinitionContainerEvent.java:44)\r\n\tat org.jboss.weld.bootstrap.events.AfterBeanDiscoveryImpl.fire(AfterBeanDiscoveryImpl.java:75)\r\n\tat org.jboss.weld.bootstrap.WeldStartup.deployBeans(WeldStartup.java:467)\r\n\tat org.jboss.weld.bootstrap.WeldBootstrap.deployBeans(WeldBootstrap.java:86)\r\n\tat io.helidon.microprofile.cdi.HelidonContainerImpl.init(HelidonContainerImpl.java:214)\r\n\tat io.helidon.common.context.Contexts.runInContext(Contexts.java:137)\r\n\tat io.helidon.microprofile.cdi.HelidonContainerImpl.initInContext(HelidonContainerImpl.java:135)\r\n\tat io.helidon.microprofile.cdi.HelidonContainerImpl.create(HelidonContainerImpl.java:127)\r\n\tat io.helidon.microprofile.cdi.BuildTimeInitializer.lambda$createContainer$2(BuildTimeInitializer.java:63)\r\n\tat io.helidon.microprofile.cdi.BuildTimeInitializer.accessContainer(BuildTimeInitializer.java:72)\r\n\tat io.helidon.microprofile.cdi.BuildTimeInitializer.createContainer(BuildTimeInitializer.java:62)\r\n\tat io.helidon.microprofile.cdi.BuildTimeInitializer.&lt;clinit&gt;(BuildTimeInitializer.java:37)\r\n\tat io.helidon.microprofile.cdi.ContainerInstanceHolder.fromBuildTimeInitializer(ContainerInstanceHolder.java:65)\r\n\tat io.helidon.microprofile.cdi.ContainerInstanceHolder.lambda$get$1(ContainerInstanceHolder.java:56)\r\n\tat io.helidon.microprofile.cdi.ContainerInstanceHolder.access(ContainerInstanceHolder.java:91)\r\n\tat io.helidon.microprofile.cdi.ContainerInstanceHolder.get(ContainerInstanceHolder.java:53)\r\n\tat io.helidon.microprofile.cdi.HelidonContainer.instance(HelidonContainer.java:48)\r\n\tat io.helidon.microprofile.server.Server$Builder.build(Server.java:190)\r\n\tat io.helidon.microprofile.server.Server.create(Server.java:83)\r\n\tat oracle.communications.sam.performance.KpiApplication.main(KpiApplication.java:61)\r\n\r\n\tat org.jboss.weld.bootstrap.events.AbstractDefinitionContainerEvent.fire(AbstractDefinitionContainerEvent.java:46)\r\n\tat org.jboss.weld.bootstrap.events.AfterBeanDiscoveryImpl.fire(AfterBeanDiscoveryImpl.java:75)\r\n\tat org.jboss.weld.bootstrap.WeldStartup.deployBeans(WeldStartup.java:467)\r\n\tat org.jboss.weld.bootstrap.WeldBootstrap.deployBeans(WeldBootstrap.java:86)\r\n\tat io.helidon.microprofile.cdi.HelidonContainerImpl.init(HelidonContainerImpl.java:214)\r\n\tat io.helidon.common.context.Contexts.runInContext(Contexts.java:137)\r\n\tat io.helidon.microprofile.cdi.HelidonContainerImpl.initInContext(HelidonContainerImpl.java:135)\r\n\tat io.helidon.microprofile.cdi.HelidonContainerImpl.create(HelidonContainerImpl.java:127)\r\n\tat io.helidon.microprofile.cdi.BuildTimeInitializer.lambda$createContainer$2(BuildTimeInitializer.java:63)\r\n\tat io.helidon.microprofile.cdi.BuildTimeInitializer.accessContainer(BuildTimeInitializer.java:72)\r\n\tat io.helidon.microprofile.cdi.BuildTimeInitializer.createContainer(BuildTimeInitializer.java:62)\r\n\tat io.helidon.microprofile.cdi.BuildTimeInitializer.&lt;clinit&gt;(BuildTimeInitializer.java:37)\r\n\t... 8 more\r\n\tSuppressed: java.util.NoSuchElementException: Property IFS+x used in expression () { unset _mlshdbg;\r\n if [ &quot;${MODULES_SILENT_SHELL_DEBUG:-0}&quot; = &#39;1&#39; ]; then\r\n case &quot;$-&quot; in\r\n *v*x*)\r\n set +vx;\r\n _mlshdbg=&#39;vx&#39;\r\n ;;\r\n *v*)\r\n set +v;\r\n _mlshdbg=&#39;v&#39;\r\n ;;\r\n *x*)\r\n set +x;\r\n _mlshdbg=&#39;x&#39;\r\n ;;\r\n *)\r\n _mlshdbg=&#39;&#39;\r\n ;;\r\n esac;\r\n fi;\r\n unset _mlre _mlIFS;\r\n if [ -n &quot;${IFS+x}&quot; ]; then\r\n _mlIFS=$IFS;\r\n fi;\r\n IFS=&#39; &#39;;\r\n for _mlv in ${MODULES_RUN_QUARANTINE:-};\r\n do\r\n if [ &quot;${_mlv}&quot; = &quot;${_mlv##*[!A-Za-z0-9_]}&quot; -a &quot;${_mlv}&quot; = &quot;${_mlv#[0-9]}&quot; ]; then\r\n if [ -n &quot;`eval &#39;echo ${&#39;$_mlv&#39;+x}&#39;`&quot; ]; then\r\n _mlre=&quot;${_mlre:-}${_mlv}_modquar=&#39;`eval &#39;echo ${&#39;$_mlv&#39;}&#39;`&#39; &quot;;\r\n fi;\r\n _mlrv=&quot;MODULES_RUNENV_${_mlv}&quot;;\r\n _mlre=&quot;${_mlre:-}${_mlv}=&#39;`eval &#39;echo ${&#39;$_mlrv&#39;:-}&#39;`&#39; &quot;;\r\n fi;\r\n done;\r\n if [ -n &quot;${_mlre:-}&quot; ]; then\r\n eval `eval ${_mlre} /usr/bin/tclsh /usr/share/Modules/libexec/modulecmd.tcl bash &#39;&quot;$@&quot;&#39;`;\r\n else\r\n eval `/usr/bin/tclsh /usr/share/Modules/libexec/modulecmd.tcl bash &quot;$@&quot;`;\r\n fi;\r\n _mlstatus=$?;\r\n if [ -n &quot;${_mlIFS+x}&quot; ]; then\r\n IFS=$_mlIFS;\r\n else\r\n unset IFS;\r\n fi;\r\n unset _mlre _mlv _mlrv _mlIFS;\r\n if [ -n &quot;${_mlshdbg:-}&quot; ]; then\r\n set -$_mlshdbg;\r\n fi;\r\n unset _mlshdbg;\r\n return $_mlstatus\r\n} does not exist\r\n\t\tat io.helidon.config.mp.MpConfigImpl.lambda$format$14(MpConfigImpl.java:421)\r\n\t\tat java.base/java.util.Optional.orElseThrow(Optional.java:403)\r\n\t\tat io.helidon.config.mp.MpConfigImpl.format(MpConfigImpl.java:421)\r\n\t\tat io.helidon.config.mp.MpConfigImpl.processExpressions(MpConfigImpl.java:399)\r\n\t\tat io.helidon.config.mp.MpConfigImpl.resolveReferences(MpConfigImpl.java:379)\r\n\t\tat io.helidon.config.mp.MpConfigImpl.lambda$findConfigValue$12(MpConfigImpl.java:340)\r\n\t\tat java.base/java.util.Optional.map(Optional.java:260)\r\n\t\tat io.helidon.config.mp.MpConfigImpl.findConfigValue(MpConfigImpl.java:340)\r\n\t\tat io.helidon.config.mp.MpConfigImpl.optionalValue(MpConfigImpl.java:191)\r\n\t\tat io.helidon.config.mp.MpConfigImpl.getOptionalValue(MpConfigImpl.java:131)\r\n\t\tat io.helidon.config.mp.MpConfigProviderResolver$ConfigDelegate.getOptionalValue(MpConfigProviderResolver.java:356)\r\n\t\tat io.helidon.integrations.datasource.cdi.AbstractDataSourceExtension.initializeMasterProperties(AbstractDataSourceExtension.java:233)\r\n\t\tat io.helidon.integrations.datasource.cdi.AbstractDataSourceExtension.afterBeanDiscovery(AbstractDataSourceExtension.java:293)\r\n\t\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\t\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\t\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\t\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\t\tat org.jboss.weld.injection.StaticMethodInjectionPoint.invoke(StaticMethodInjectionPoint.java:95)\r\n\t\tat org.jboss.weld.injection.StaticMethodInjectionPoint.invoke(StaticMethodInjectionPoint.java:85)\r\n\t\tat org.jboss.weld.injection.MethodInvocationStrategy$SimpleMethodInvocationStrategy.invoke(MethodInvocationStrategy.java:168)\r\n\t\tat org.jboss.weld.event.ObserverMethodImpl.sendEvent(ObserverMethodImpl.java:330)\r\n\t\tat org.jboss.weld.event.ExtensionObserverMethodImpl.sendEvent(ExtensionObserverMethodImpl.java:123)\r\n\t\tat org.jboss.weld.event.ObserverMethodImpl.sendEvent(ObserverMethodImpl.java:308)\r\n\t\tat org.jboss.weld.event.ObserverMethodImpl.notify(ObserverMethodImpl.java:286)\r\n\t\tat jakarta.enterprise.inject.spi.ObserverMethod.notify(ObserverMethod.java:125)\r\n\t\tat org.jboss.weld.util.Observers.notify(Observers.java:166)\r\n\t\tat org.jboss.weld.event.ObserverNotifier.notifySyncObservers(ObserverNotifier.java:285)\r\n\t\tat org.jboss.weld.event.ObserverNotifier.notify(ObserverNotifier.java:273)\r\n\t\tat org.jboss.weld.event.ObserverNotifier.fireEvent(ObserverNotifier.java:177)\r\n\t\tat org.jboss.weld.event.ObserverNotifier.fireEvent(ObserverNotifier.java:171)\r\n\t\tat org.jboss.weld.bootstrap.events.AbstractContainerEvent.fire(AbstractContainerEvent.java:53)\r\n\t\tat org.jboss.weld.bootstrap.events.AbstractDefinitionContainerEvent.fire(AbstractDefinitionContainerEvent.java:44)\r\n\t\t... 19 more```\r\n","title":"Not able to run the helidon java jar in oracle linux 8","body":"<p>I have a helidon MP java project with helidon 3.1.0 and I'm facing the issue below when I'm trying to run the generated jar file in oracle linux 8 machine where as same jar file works in other machines. Here are the details.\njava version: 17.0.6\nhelidon version: 3.1.0\nOS : Oracle linux 8\nThanks for your support in advance.</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.ExceptionInInitializerError\n    at io.helidon.microprofile.cdi.ContainerInstanceHolder.fromBuildTimeInitializer(ContainerInstanceHolder.java:65)\n    at io.helidon.microprofile.cdi.ContainerInstanceHolder.lambda$get$1(ContainerInstanceHolder.java:56)\n    at io.helidon.microprofile.cdi.ContainerInstanceHolder.access(ContainerInstanceHolder.java:91)\n    at io.helidon.microprofile.cdi.ContainerInstanceHolder.get(ContainerInstanceHolder.java:53)\n    at io.helidon.microprofile.cdi.HelidonContainer.instance(HelidonContainer.java:48)\n    at io.helidon.microprofile.server.Server$Builder.build(Server.java:190)\n    at io.helidon.microprofile.server.Server.create(Server.java:83)\n    at oracle.communications.sam.performance.KpiApplication.main(KpiApplication.java:61)\nCaused by: org.jboss.weld.exceptions.DefinitionException: Exception List with 1 exceptions:\nException 0 :\njava.util.NoSuchElementException: Property IFS+x used in expression () { unset _mlshdbg;\n if [ &quot;${MODULES_SILENT_SHELL_DEBUG:-0}&quot; = '1' ]; then\n case &quot;$-&quot; in\n *v*x*)\n set +vx;\n _mlshdbg='vx'\n ;;\n *v*)\n set +v;\n _mlshdbg='v'\n ;;\n *x*)\n set +x;\n _mlshdbg='x'\n ;;\n *)\n _mlshdbg=''\n ;;\n esac;\n fi;\n unset _mlre _mlIFS;\n if [ -n &quot;${IFS+x}&quot; ]; then\n _mlIFS=$IFS;\n fi;\n IFS=' ';\n for _mlv in ${MODULES_RUN_QUARANTINE:-};\n do\n if [ &quot;${_mlv}&quot; = &quot;${_mlv##*[!A-Za-z0-9_]}&quot; -a &quot;${_mlv}&quot; = &quot;${_mlv#[0-9]}&quot; ]; then\n if [ -n &quot;`eval 'echo ${'$_mlv'+x}'`&quot; ]; then\n _mlre=&quot;${_mlre:-}${_mlv}_modquar='`eval 'echo ${'$_mlv'}'`' &quot;;\n fi;\n _mlrv=&quot;MODULES_RUNENV_${_mlv}&quot;;\n _mlre=&quot;${_mlre:-}${_mlv}='`eval 'echo ${'$_mlrv':-}'`' &quot;;\n fi;\n done;\n if [ -n &quot;${_mlre:-}&quot; ]; then\n eval `eval ${_mlre} /usr/bin/tclsh /usr/share/Modules/libexec/modulecmd.tcl bash '&quot;$@&quot;'`;\n else\n eval `/usr/bin/tclsh /usr/share/Modules/libexec/modulecmd.tcl bash &quot;$@&quot;`;\n fi;\n _mlstatus=$?;\n if [ -n &quot;${_mlIFS+x}&quot; ]; then\n IFS=$_mlIFS;\n else\n unset IFS;\n fi;\n unset _mlre _mlv _mlrv _mlIFS;\n if [ -n &quot;${_mlshdbg:-}&quot; ]; then\n set -$_mlshdbg;\n fi;\n unset _mlshdbg;\n return $_mlstatus\n} does not exist\n    at io.helidon.config.mp.MpConfigImpl.lambda$format$14(MpConfigImpl.java:421)\n    at java.base/java.util.Optional.orElseThrow(Optional.java:403)\n    at io.helidon.config.mp.MpConfigImpl.format(MpConfigImpl.java:421)\n    at io.helidon.config.mp.MpConfigImpl.processExpressions(MpConfigImpl.java:399)\n    at io.helidon.config.mp.MpConfigImpl.resolveReferences(MpConfigImpl.java:379)\n    at io.helidon.config.mp.MpConfigImpl.lambda$findConfigValue$12(MpConfigImpl.java:340)\n    at java.base/java.util.Optional.map(Optional.java:260)\n    at io.helidon.config.mp.MpConfigImpl.findConfigValue(MpConfigImpl.java:340)\n    at io.helidon.config.mp.MpConfigImpl.optionalValue(MpConfigImpl.java:191)\n    at io.helidon.config.mp.MpConfigImpl.getOptionalValue(MpConfigImpl.java:131)\n    at io.helidon.config.mp.MpConfigProviderResolver$ConfigDelegate.getOptionalValue(MpConfigProviderResolver.java:356)\n    at io.helidon.integrations.datasource.cdi.AbstractDataSourceExtension.initializeMasterProperties(AbstractDataSourceExtension.java:233)\n    at io.helidon.integrations.datasource.cdi.AbstractDataSourceExtension.afterBeanDiscovery(AbstractDataSourceExtension.java:293)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at org.jboss.weld.injection.StaticMethodInjectionPoint.invoke(StaticMethodInjectionPoint.java:95)\n    at org.jboss.weld.injection.StaticMethodInjectionPoint.invoke(StaticMethodInjectionPoint.java:85)\n    at org.jboss.weld.injection.MethodInvocationStrategy$SimpleMethodInvocationStrategy.invoke(MethodInvocationStrategy.java:168)\n    at org.jboss.weld.event.ObserverMethodImpl.sendEvent(ObserverMethodImpl.java:330)\n    at org.jboss.weld.event.ExtensionObserverMethodImpl.sendEvent(ExtensionObserverMethodImpl.java:123)\n    at org.jboss.weld.event.ObserverMethodImpl.sendEvent(ObserverMethodImpl.java:308)\n    at org.jboss.weld.event.ObserverMethodImpl.notify(ObserverMethodImpl.java:286)\n    at jakarta.enterprise.inject.spi.ObserverMethod.notify(ObserverMethod.java:125)\n    at org.jboss.weld.util.Observers.notify(Observers.java:166)\n    at org.jboss.weld.event.ObserverNotifier.notifySyncObservers(ObserverNotifier.java:285)\n    at org.jboss.weld.event.ObserverNotifier.notify(ObserverNotifier.java:273)\n    at org.jboss.weld.event.ObserverNotifier.fireEvent(ObserverNotifier.java:177)\n    at org.jboss.weld.event.ObserverNotifier.fireEvent(ObserverNotifier.java:171)\n    at org.jboss.weld.bootstrap.events.AbstractContainerEvent.fire(AbstractContainerEvent.java:53)\n    at org.jboss.weld.bootstrap.events.AbstractDefinitionContainerEvent.fire(AbstractDefinitionContainerEvent.java:44)\n    at org.jboss.weld.bootstrap.events.AfterBeanDiscoveryImpl.fire(AfterBeanDiscoveryImpl.java:75)\n    at org.jboss.weld.bootstrap.WeldStartup.deployBeans(WeldStartup.java:467)\n    at org.jboss.weld.bootstrap.WeldBootstrap.deployBeans(WeldBootstrap.java:86)\n    at io.helidon.microprofile.cdi.HelidonContainerImpl.init(HelidonContainerImpl.java:214)\n    at io.helidon.common.context.Contexts.runInContext(Contexts.java:137)\n    at io.helidon.microprofile.cdi.HelidonContainerImpl.initInContext(HelidonContainerImpl.java:135)\n    at io.helidon.microprofile.cdi.HelidonContainerImpl.create(HelidonContainerImpl.java:127)\n    at io.helidon.microprofile.cdi.BuildTimeInitializer.lambda$createContainer$2(BuildTimeInitializer.java:63)\n    at io.helidon.microprofile.cdi.BuildTimeInitializer.accessContainer(BuildTimeInitializer.java:72)\n    at io.helidon.microprofile.cdi.BuildTimeInitializer.createContainer(BuildTimeInitializer.java:62)\n    at io.helidon.microprofile.cdi.BuildTimeInitializer.&lt;clinit&gt;(BuildTimeInitializer.java:37)\n    at io.helidon.microprofile.cdi.ContainerInstanceHolder.fromBuildTimeInitializer(ContainerInstanceHolder.java:65)\n    at io.helidon.microprofile.cdi.ContainerInstanceHolder.lambda$get$1(ContainerInstanceHolder.java:56)\n    at io.helidon.microprofile.cdi.ContainerInstanceHolder.access(ContainerInstanceHolder.java:91)\n    at io.helidon.microprofile.cdi.ContainerInstanceHolder.get(ContainerInstanceHolder.java:53)\n    at io.helidon.microprofile.cdi.HelidonContainer.instance(HelidonContainer.java:48)\n    at io.helidon.microprofile.server.Server$Builder.build(Server.java:190)\n    at io.helidon.microprofile.server.Server.create(Server.java:83)\n    at oracle.communications.sam.performance.KpiApplication.main(KpiApplication.java:61)\n\n    at org.jboss.weld.bootstrap.events.AbstractDefinitionContainerEvent.fire(AbstractDefinitionContainerEvent.java:46)\n    at org.jboss.weld.bootstrap.events.AfterBeanDiscoveryImpl.fire(AfterBeanDiscoveryImpl.java:75)\n    at org.jboss.weld.bootstrap.WeldStartup.deployBeans(WeldStartup.java:467)\n    at org.jboss.weld.bootstrap.WeldBootstrap.deployBeans(WeldBootstrap.java:86)\n    at io.helidon.microprofile.cdi.HelidonContainerImpl.init(HelidonContainerImpl.java:214)\n    at io.helidon.common.context.Contexts.runInContext(Contexts.java:137)\n    at io.helidon.microprofile.cdi.HelidonContainerImpl.initInContext(HelidonContainerImpl.java:135)\n    at io.helidon.microprofile.cdi.HelidonContainerImpl.create(HelidonContainerImpl.java:127)\n    at io.helidon.microprofile.cdi.BuildTimeInitializer.lambda$createContainer$2(BuildTimeInitializer.java:63)\n    at io.helidon.microprofile.cdi.BuildTimeInitializer.accessContainer(BuildTimeInitializer.java:72)\n    at io.helidon.microprofile.cdi.BuildTimeInitializer.createContainer(BuildTimeInitializer.java:62)\n    at io.helidon.microprofile.cdi.BuildTimeInitializer.&lt;clinit&gt;(BuildTimeInitializer.java:37)\n    ... 8 more\n    Suppressed: java.util.NoSuchElementException: Property IFS+x used in expression () { unset _mlshdbg;\n if [ &quot;${MODULES_SILENT_SHELL_DEBUG:-0}&quot; = '1' ]; then\n case &quot;$-&quot; in\n *v*x*)\n set +vx;\n _mlshdbg='vx'\n ;;\n *v*)\n set +v;\n _mlshdbg='v'\n ;;\n *x*)\n set +x;\n _mlshdbg='x'\n ;;\n *)\n _mlshdbg=''\n ;;\n esac;\n fi;\n unset _mlre _mlIFS;\n if [ -n &quot;${IFS+x}&quot; ]; then\n _mlIFS=$IFS;\n fi;\n IFS=' ';\n for _mlv in ${MODULES_RUN_QUARANTINE:-};\n do\n if [ &quot;${_mlv}&quot; = &quot;${_mlv##*[!A-Za-z0-9_]}&quot; -a &quot;${_mlv}&quot; = &quot;${_mlv#[0-9]}&quot; ]; then\n if [ -n &quot;`eval 'echo ${'$_mlv'+x}'`&quot; ]; then\n _mlre=&quot;${_mlre:-}${_mlv}_modquar='`eval 'echo ${'$_mlv'}'`' &quot;;\n fi;\n _mlrv=&quot;MODULES_RUNENV_${_mlv}&quot;;\n _mlre=&quot;${_mlre:-}${_mlv}='`eval 'echo ${'$_mlrv':-}'`' &quot;;\n fi;\n done;\n if [ -n &quot;${_mlre:-}&quot; ]; then\n eval `eval ${_mlre} /usr/bin/tclsh /usr/share/Modules/libexec/modulecmd.tcl bash '&quot;$@&quot;'`;\n else\n eval `/usr/bin/tclsh /usr/share/Modules/libexec/modulecmd.tcl bash &quot;$@&quot;`;\n fi;\n _mlstatus=$?;\n if [ -n &quot;${_mlIFS+x}&quot; ]; then\n IFS=$_mlIFS;\n else\n unset IFS;\n fi;\n unset _mlre _mlv _mlrv _mlIFS;\n if [ -n &quot;${_mlshdbg:-}&quot; ]; then\n set -$_mlshdbg;\n fi;\n unset _mlshdbg;\n return $_mlstatus\n} does not exist\n        at io.helidon.config.mp.MpConfigImpl.lambda$format$14(MpConfigImpl.java:421)\n        at java.base/java.util.Optional.orElseThrow(Optional.java:403)\n        at io.helidon.config.mp.MpConfigImpl.format(MpConfigImpl.java:421)\n        at io.helidon.config.mp.MpConfigImpl.processExpressions(MpConfigImpl.java:399)\n        at io.helidon.config.mp.MpConfigImpl.resolveReferences(MpConfigImpl.java:379)\n        at io.helidon.config.mp.MpConfigImpl.lambda$findConfigValue$12(MpConfigImpl.java:340)\n        at java.base/java.util.Optional.map(Optional.java:260)\n        at io.helidon.config.mp.MpConfigImpl.findConfigValue(MpConfigImpl.java:340)\n        at io.helidon.config.mp.MpConfigImpl.optionalValue(MpConfigImpl.java:191)\n        at io.helidon.config.mp.MpConfigImpl.getOptionalValue(MpConfigImpl.java:131)\n        at io.helidon.config.mp.MpConfigProviderResolver$ConfigDelegate.getOptionalValue(MpConfigProviderResolver.java:356)\n        at io.helidon.integrations.datasource.cdi.AbstractDataSourceExtension.initializeMasterProperties(AbstractDataSourceExtension.java:233)\n        at io.helidon.integrations.datasource.cdi.AbstractDataSourceExtension.afterBeanDiscovery(AbstractDataSourceExtension.java:293)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n        at org.jboss.weld.injection.StaticMethodInjectionPoint.invoke(StaticMethodInjectionPoint.java:95)\n        at org.jboss.weld.injection.StaticMethodInjectionPoint.invoke(StaticMethodInjectionPoint.java:85)\n        at org.jboss.weld.injection.MethodInvocationStrategy$SimpleMethodInvocationStrategy.invoke(MethodInvocationStrategy.java:168)\n        at org.jboss.weld.event.ObserverMethodImpl.sendEvent(ObserverMethodImpl.java:330)\n        at org.jboss.weld.event.ExtensionObserverMethodImpl.sendEvent(ExtensionObserverMethodImpl.java:123)\n        at org.jboss.weld.event.ObserverMethodImpl.sendEvent(ObserverMethodImpl.java:308)\n        at org.jboss.weld.event.ObserverMethodImpl.notify(ObserverMethodImpl.java:286)\n        at jakarta.enterprise.inject.spi.ObserverMethod.notify(ObserverMethod.java:125)\n        at org.jboss.weld.util.Observers.notify(Observers.java:166)\n        at org.jboss.weld.event.ObserverNotifier.notifySyncObservers(ObserverNotifier.java:285)\n        at org.jboss.weld.event.ObserverNotifier.notify(ObserverNotifier.java:273)\n        at org.jboss.weld.event.ObserverNotifier.fireEvent(ObserverNotifier.java:177)\n        at org.jboss.weld.event.ObserverNotifier.fireEvent(ObserverNotifier.java:171)\n        at org.jboss.weld.bootstrap.events.AbstractContainerEvent.fire(AbstractContainerEvent.java:53)\n        at org.jboss.weld.bootstrap.events.AbstractDefinitionContainerEvent.fire(AbstractDefinitionContainerEvent.java:44)\n        ... 19 more```\n</code></pre>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":974021,"reputation":63348,"user_id":995891,"accept_rate":83,"display_name":"zapl"},"score":0,"creation_date":1684348165,"post_id":76275130,"comment_id":134506811,"body_markdown":"your &quot;End Date&quot; is in seconds, what you calculate is in milliseconds. `book.endDate * 1000` might fix your issue. E.g. `1684159940` when treated as millis would be Tue Jan 20 1970 11:49:19 UTC so it&#39;s way past 1 week ago (see https://currentmillis.com/ for example)","body":"your &quot;End Date&quot; is in seconds, what you calculate is in milliseconds. <code>book.endDate * 1000</code> might fix your issue. E.g. <code>1684159940</code> when treated as millis would be Tue Jan 20 1970 11:49:19 UTC so it&#39;s way past 1 week ago (see <a href=\"https://currentmillis.com/\" rel=\"nofollow noreferrer\">currentmillis.com</a> for example)"},{"owner":{"account_id":23851807,"reputation":23,"user_id":17855665,"display_name":"Muhammed Mustafa Geldi"},"score":0,"creation_date":1684350205,"post_id":76275130,"comment_id":134507200,"body_markdown":"Yes, you are right, I was actually keeping it as a unix timestamp in the object. However, the Unix timestamp is a value in seconds. I had forgotten that. Thanks for giving me your valuable time.","body":"Yes, you are right, I was actually keeping it as a unix timestamp in the object. However, the Unix timestamp is a value in seconds. I had forgotten that. Thanks for giving me your valuable time."}],"answers":[{"comments":[{"owner":{"account_id":23851807,"reputation":23,"user_id":17855665,"display_name":"Muhammed Mustafa Geldi"},"score":0,"creation_date":1684349977,"post_id":76275195,"comment_id":134507147,"body_markdown":"Thank you for taking your valuable time to help me. I guess I&#39;m too tired to see the numbers.","body":"Thank you for taking your valuable time to help me. I guess I&#39;m too tired to see the numbers."}],"tags":[],"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1684348177,"creation_date":1684348177,"answer_id":76275195,"question_id":76275130,"body_markdown":"The date from the book -which is really a timestamp- doesn&#39;t include milliseconds. Notice that the length has 3 less digits. Multiply it by 1000 to make it comparable to the other timestamp.","title":"When comparing dates, put the objects that fall in the last week on the list","body":"<p>The date from the book -which is really a timestamp- doesn't include milliseconds. Notice that the length has 3 less digits. Multiply it by 1000 to make it comparable to the other timestamp.</p>\n"},{"comments":[{"owner":{"account_id":23851807,"reputation":23,"user_id":17855665,"display_name":"Muhammed Mustafa Geldi"},"score":0,"creation_date":1684350088,"post_id":76275399,"comment_id":134507168,"body_markdown":"Thank you for taking your valuable time to help me.","body":"Thank you for taking your valuable time to help me."}],"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1684349925,"creation_date":1684349925,"answer_id":76275399,"question_id":76275130,"body_markdown":"It appears that `book.endDate` is returning an incorrectly computed value.\r\n\r\n```java\r\nlong endDateMillis = book.endDate;\r\n```\r\n&gt; I/System.out: End Date: 1684159940\r\n\r\nEssentially, it is off by a multiple of 1000.\r\n\r\nYou can fix this either within the `book` object class, or simply multiply `endDateMillis` by 1000.\r\n\r\n```java\r\nlong endDateMillis = book.endDate * 1000L;\r\n```","title":"When comparing dates, put the objects that fall in the last week on the list","body":"<p>It appears that <code>book.endDate</code> is returning an incorrectly computed value.</p>\n<pre class=\"lang-java prettyprint-override\"><code>long endDateMillis = book.endDate;\n</code></pre>\n<blockquote>\n<p>I/System.out: End Date: 1684159940</p>\n</blockquote>\n<p>Essentially, it is off by a multiple of 1000.</p>\n<p>You can fix this either within the <code>book</code> object class, or simply multiply <code>endDateMillis</code> by 1000.</p>\n<pre class=\"lang-java prettyprint-override\"><code>long endDateMillis = book.endDate * 1000L;\n</code></pre>\n"}],"owner":{"account_id":23851807,"reputation":23,"user_id":17855665,"display_name":"Muhammed Mustafa Geldi"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76275399,"answer_count":2,"score":1,"last_activity_date":1684349925,"creation_date":1684347690,"question_id":76275130,"body_markdown":"I am working on a project where the user adds a completion date when adding a book. I save it in an object called `FinishedBooks` with the completion date and other data of the book. I list these books in another activity. I have a filter button in the corner of the screen. This button will list the books that have been finished in the last week. I wrote a method for this before, here is my method:\r\n\r\n```java\r\nprivate void lastWeekFilter(List&lt;FinishedBooks&gt; finishedBooks) {\r\n    List&lt;FinishedBooks&gt; lastWeekList = new ArrayList&lt;&gt;();\r\n\r\n    // take now time\r\n    long currentTimeMillis = System.currentTimeMillis();\r\n\r\n    // Calculate the time one week ago\r\n    long oneWeekMillis = 7L * 24L * 60L * 60L * 1000L;\r\n    long oneWeekAgoMillis = currentTimeMillis - oneWeekMillis;\r\n\r\n    // Check each item in the list\r\n    for (FinishedBooks book : finishedBooks) {\r\n        long endDateMillis = book.endDate;\r\n\r\n        System.out.println(&quot;End Date: &quot; + endDateMillis);\r\n        System.out.println(&quot;One Week Ago Millis: &quot; + oneWeekAgoMillis);\r\n        System.out.println(&quot;******************************&quot;);\r\n\r\n        // If the due date falls within the last 1 week, add the item to the filteredList\r\n        if (endDateMillis &gt;= oneWeekAgoMillis &amp;&amp; endDateMillis &lt;= currentTimeMillis) {\r\n            lastWeekList.add(book);\r\n        }\r\n    }\r\n    finishedBooksAdapter.setLastWeekFilter(lastWeekList);\r\n}\r\n```\r\n\r\nMy code didn&#39;t work as I wanted, it never enters the if block. So I used a `System.out.println();` to see if the values meet the if conditions. Here&#39;s my logcat output:\r\n\r\n```\r\nI/System.out: End Date: 1684159940\r\nI/System.out: One Week Ago Millis: 1683740684856\r\nI/System.out: ******************************\r\nI/System.out: End Date: 1683987159\r\nI/System.out: One Week Ago Millis: 1683740684856\r\nI/System.out: ******************************\r\n```\r\n\r\nAlthough my incoming data meets the conditions, the object I want is not included in the list. It does not enter the if block. `lastWeekList.size()` returns 0.\r\n\r\nI am grateful for your help in advance.\r\n\r\nI was expecting the conditions to be met and these objects to be listed, but the list remains empty.\r\n","title":"When comparing dates, put the objects that fall in the last week on the list","body":"<p>I am working on a project where the user adds a completion date when adding a book. I save it in an object called <code>FinishedBooks</code> with the completion date and other data of the book. I list these books in another activity. I have a filter button in the corner of the screen. This button will list the books that have been finished in the last week. I wrote a method for this before, here is my method:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private void lastWeekFilter(List&lt;FinishedBooks&gt; finishedBooks) {\n    List&lt;FinishedBooks&gt; lastWeekList = new ArrayList&lt;&gt;();\n\n    // take now time\n    long currentTimeMillis = System.currentTimeMillis();\n\n    // Calculate the time one week ago\n    long oneWeekMillis = 7L * 24L * 60L * 60L * 1000L;\n    long oneWeekAgoMillis = currentTimeMillis - oneWeekMillis;\n\n    // Check each item in the list\n    for (FinishedBooks book : finishedBooks) {\n        long endDateMillis = book.endDate;\n\n        System.out.println(&quot;End Date: &quot; + endDateMillis);\n        System.out.println(&quot;One Week Ago Millis: &quot; + oneWeekAgoMillis);\n        System.out.println(&quot;******************************&quot;);\n\n        // If the due date falls within the last 1 week, add the item to the filteredList\n        if (endDateMillis &gt;= oneWeekAgoMillis &amp;&amp; endDateMillis &lt;= currentTimeMillis) {\n            lastWeekList.add(book);\n        }\n    }\n    finishedBooksAdapter.setLastWeekFilter(lastWeekList);\n}\n</code></pre>\n<p>My code didn't work as I wanted, it never enters the if block. So I used a <code>System.out.println();</code> to see if the values meet the if conditions. Here's my logcat output:</p>\n<pre><code>I/System.out: End Date: 1684159940\nI/System.out: One Week Ago Millis: 1683740684856\nI/System.out: ******************************\nI/System.out: End Date: 1683987159\nI/System.out: One Week Ago Millis: 1683740684856\nI/System.out: ******************************\n</code></pre>\n<p>Although my incoming data meets the conditions, the object I want is not included in the list. It does not enter the if block. <code>lastWeekList.size()</code> returns 0.</p>\n<p>I am grateful for your help in advance.</p>\n<p>I was expecting the conditions to be met and these objects to be listed, but the list remains empty.</p>\n"},{"tags":["java","scala","apache-spark"],"comments":[{"owner":{"account_id":24418385,"reputation":731,"user_id":18632985,"display_name":"Hoang Minh Quang FX15045"},"score":0,"creation_date":1684288424,"post_id":76266757,"comment_id":134495163,"body_markdown":"So basically you want a way to compare 2 Columns with Map type?","body":"So basically you want a way to compare 2 Columns with Map type?"},{"owner":{"account_id":27963688,"reputation":1,"user_id":21354969,"display_name":"redisLearner"},"score":0,"creation_date":1684348928,"post_id":76266757,"comment_id":134506952,"body_markdown":"Yes @HoangMinhQuangFX15045","body":"Yes @HoangMinhQuangFX15045"}],"owner":{"account_id":27963688,"reputation":1,"user_id":21354969,"display_name":"redisLearner"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684348981,"creation_date":1684268055,"question_id":76266757,"body_markdown":"I have two datasets (baseline and dataset) in this Structure:\r\n\r\n```\r\npublic static final StructType SCHEMA =  new StructType()\r\n.add(KEY, StringType, false)\r\n.add(DATASETS, createMapType(StringType, createArrayType(StringType)), true);\r\n\r\n// Find rows (just same keys) in newDataset (dataset) that are in oldDataset(baseline) but with different values\r\nDataset&lt;Row&gt; joined = dataset\r\n.join(baselineData, dataset.col(KEY).equalTo(baselineData.col(KEY)), &quot;inner&quot;)\r\n.withColumn(&quot;datasets_baseline&quot;, baselineData.col(DATASETS))\r\n.withColumn(&quot;datasets_new&quot;, dataset.col(DATASETS))\r\n.drop(baselineData.col(DATASETS))\r\n.drop(dataset.col(DATASETS));\r\n```\r\n\r\nI couldn&#39;t do datasets_baseline.notEqualTo(datasets_new) because it is a map type.\r\n\r\nIs there any other option to get what I am looking for ?\r\n\r\nTried this :\r\n\r\n```\r\nDataset&lt;Row&gt; newRows = joined     \r\n.select(col(KEY), \r\nexpr(&quot;arrays_zip(datasets_baseline, datasets_new) as datasets_diff&quot;))     \r\n.filter(expr(&quot;exists(transform(datasets_diff, x -&gt; exists(transform(x, y -&gt; y._1 != y._2))), element -&gt; element)&quot;)\r\n.join(dataset, dataset.col(KEY).equalTo(joined.col(KEY)), &quot;inner&quot;)\r\n.select(dataset.col(KEY), dataset.col(DATASETS)); \r\n```\r\nbut different values implies different in order inside the list (map&#39;s value) so this doesn&#39;t work for me.","title":"How to compare two dataset with complex value if they are different or not in spark","body":"<p>I have two datasets (baseline and dataset) in this Structure:</p>\n<pre><code>public static final StructType SCHEMA =  new StructType()\n.add(KEY, StringType, false)\n.add(DATASETS, createMapType(StringType, createArrayType(StringType)), true);\n\n// Find rows (just same keys) in newDataset (dataset) that are in oldDataset(baseline) but with different values\nDataset&lt;Row&gt; joined = dataset\n.join(baselineData, dataset.col(KEY).equalTo(baselineData.col(KEY)), &quot;inner&quot;)\n.withColumn(&quot;datasets_baseline&quot;, baselineData.col(DATASETS))\n.withColumn(&quot;datasets_new&quot;, dataset.col(DATASETS))\n.drop(baselineData.col(DATASETS))\n.drop(dataset.col(DATASETS));\n</code></pre>\n<p>I couldn't do datasets_baseline.notEqualTo(datasets_new) because it is a map type.</p>\n<p>Is there any other option to get what I am looking for ?</p>\n<p>Tried this :</p>\n<pre><code>Dataset&lt;Row&gt; newRows = joined     \n.select(col(KEY), \nexpr(&quot;arrays_zip(datasets_baseline, datasets_new) as datasets_diff&quot;))     \n.filter(expr(&quot;exists(transform(datasets_diff, x -&gt; exists(transform(x, y -&gt; y._1 != y._2))), element -&gt; element)&quot;)\n.join(dataset, dataset.col(KEY).equalTo(joined.col(KEY)), &quot;inner&quot;)\n.select(dataset.col(KEY), dataset.col(DATASETS)); \n</code></pre>\n<p>but different values implies different in order inside the list (map's value) so this doesn't work for me.</p>\n"},{"tags":["java","javascript","currency","currency-formatting"],"comments":[{"owner":{"account_id":2524996,"reputation":2764,"user_id":2194537,"accept_rate":50,"display_name":"Nikhil Talreja"},"score":0,"creation_date":1403235161,"post_id":24319420,"comment_id":37589639,"body_markdown":"http://www.oracle.com/technetwork/java/javase/locales-137662.html","body":"<a href=\"http://www.oracle.com/technetwork/java/javase/locales-137662.html\" rel=\"nofollow noreferrer\">oracle.com/technetwork/java/javase/locales-137662.html</a>"}],"answers":[{"tags":[],"owner":{"account_id":2524996,"reputation":2764,"user_id":2194537,"accept_rate":50,"display_name":"Nikhil Talreja"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1403235611,"creation_date":1403235611,"answer_id":24319555,"question_id":24319420,"body_markdown":"Try this:   \r\n\r\n    NumberFormat brl = NumberFormat.getCurrencyInstance(Locale.forLanguageTag(&quot;pt_BR&quot;));\r\n\r\n ","title":"Currency Locale- How to get the locale for the different countries","body":"<p>Try this:   </p>\n\n<pre><code>NumberFormat brl = NumberFormat.getCurrencyInstance(Locale.forLanguageTag(\"pt_BR\"));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14340865,"reputation":23,"user_id":10359104,"display_name":"Giulio"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1684348824,"creation_date":1684348824,"answer_id":76275263,"question_id":24319420,"body_markdown":"UPDATING 2023 (KOTLIN):\r\n\r\nWhen I tried to use &quot;Locale.forLanguageTag(&quot;pt_BR&quot;)&quot; it didn&#39;t work for me, it&#39;s not formatting correctly and it&#39;s showing an unknown character: \r\n\r\n[![unknown character appearing when using Locale.forLanguageTag(&quot;pt_BR&quot;)][1]][1]\r\n\r\n\r\nSo I googled and used the following code and it worked:\r\n```\r\nval brl = NumberFormat.getCurrencyInstance(Locale(&quot;pt&quot;, &quot;BR&quot;))\r\n```\r\n\r\n[![Brazil currency character displayed correctly by using Locale(&quot;pt&quot;, &quot;BR&quot;)][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/sngK5.png\r\n  [2]: https://i.stack.imgur.com/uHulP.png","title":"Currency Locale- How to get the locale for the different countries","body":"<p>UPDATING 2023 (KOTLIN):</p>\n<p>When I tried to use &quot;Locale.forLanguageTag(&quot;pt_BR&quot;)&quot; it didn't work for me, it's not formatting correctly and it's showing an unknown character:</p>\n<p><a href=\"https://i.stack.imgur.com/sngK5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sngK5.png\" alt=\"unknown character appearing when using Locale.forLanguageTag(&quot;pt_BR&quot;)\" /></a></p>\n<p>So I googled and used the following code and it worked:</p>\n<pre><code>val brl = NumberFormat.getCurrencyInstance(Locale(&quot;pt&quot;, &quot;BR&quot;))\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/uHulP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uHulP.png\" alt=\"Brazil currency character displayed correctly by using Locale(&quot;pt&quot;, &quot;BR&quot;)\" /></a></p>\n"}],"owner":{"account_id":4623031,"reputation":33,"user_id":3747555,"accept_rate":40,"display_name":"pretzels04"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":830,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":24319555,"answer_count":2,"score":0,"last_activity_date":1684348824,"creation_date":1403234378,"question_id":24319420,"body_markdown":"    public  double showinbrl(double amount, double rate) {\r\n    \t\tdouble amountinbrl = amount * rate; \r\n    \t\tNumberFormat brl = NumberFormat.getCurrencyInstance(Locale.BRAZIL); \r\n    \t\tbrl.format(amountinbrl);\r\n    \t\treturn amountinbrl;\r\n    \t}\r\n\r\n\r\nhow to get the locale for the different countries... i cant find locale for brazil..","title":"Currency Locale- How to get the locale for the different countries","body":"<pre><code>public  double showinbrl(double amount, double rate) {\n        double amountinbrl = amount * rate; \n        NumberFormat brl = NumberFormat.getCurrencyInstance(Locale.BRAZIL); \n        brl.format(amountinbrl);\n        return amountinbrl;\n    }\n</code></pre>\n\n<p>how to get the locale for the different countries... i cant find locale for brazil..</p>\n"},{"tags":["java","spring-boot","gradle"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1684348574,"post_id":76275013,"comment_id":134506883,"body_markdown":"You changed your package structure as well, which is not covered by Spring Boot and thus it isn&#39;t detecting the entities anymore.","body":"You changed your package structure as well, which is not covered by Spring Boot and thus it isn&#39;t detecting the entities anymore."},{"owner":{"account_id":12204971,"reputation":1227,"user_id":8908318,"accept_rate":100,"display_name":"monamona"},"score":0,"creation_date":1684349681,"post_id":76275013,"comment_id":134507085,"body_markdown":"Adding an annotation to include the package in the search path fron https://stackoverflow.com/questions/39539508/spring-data-entities-in-different-packages did not help. I think I still have to remove the duplicate dependency","body":"Adding an annotation to include the package in the search path fron <a href=\"https://stackoverflow.com/questions/39539508/spring-data-entities-in-different-packages\" title=\"spring data entities in different packages\">stackoverflow.com/questions/39539508/&hellip;</a> did not help. I think I still have to remove the duplicate dependency"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1684739522,"post_id":76275013,"comment_id":134555150,"body_markdown":"If it is the same you don&#39;t need to remove it. I would suggest to make it compile only instead of implementation.","body":"If it is the same you don&#39;t need to remove it. I would suggest to make it compile only instead of implementation."}],"owner":{"account_id":12204971,"reputation":1227,"user_id":8908318,"accept_rate":100,"display_name":"monamona"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":133,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684348014,"creation_date":1684346687,"question_id":76275013,"body_markdown":"In relation to [this][1] question, I have encountered a problem. \r\n\r\nI have two projects, a `authlib` and a `server`. `server` is a spring boot 2.4.4 project with java, and `authlib` is a Kotlin project meant to be used as a library to facilitate web requests to the `server`.\r\n\r\nI decided to move the entity classes from the `server` to the `authlib`, so I could use them directly when handling the web requests and didn&#39;t have to define basically duplicate classes. I use `javax.persistence` for the entity definitions and stuff, so I added the dependency to the build.gradle.kts of the authlib:\r\n\r\n```\r\ndependencies {\r\n    implementation(kotlin(&quot;stdlib&quot;))\r\n    implementation(&quot;org.projectlombok:lombok:1.18.18&quot;)\r\n    implementation(&quot;com.fasterxml.jackson.core:jackson-databind:2.9.6&quot;)\r\n\r\n    // https://mvnrepository.com/artifact/javax.persistence/persistence-api\r\n    implementation(&quot;javax.persistence:persistence-api:1.0.2&quot;)\r\n}\r\n```\r\n\r\nThe `server` uses the `authlib` project like this:\r\n\r\n```\r\ndependencies {\r\n    implementation(project(&quot;:authlib&quot;))\r\n\r\n    implementation(&quot;net.dv8tion:JDA:5.0.0-alpha.12&quot;)\r\n    implementation(&quot;com.github.theholywaffle:teamspeak3-api:1.3.0&quot;)\r\n\r\n    implementation(&quot;org.springframework.boot:spring-boot-starter-data-jpa&quot;)\r\n    implementation(&quot;org.springframework.boot:spring-boot-starter-web&quot;)\r\n    implementation(&quot;org.springframework.boot:spring-boot-starter-freemarker&quot;)\r\n    implementation(&quot;org.springframework.boot:spring-boot-starter-validation&quot;)\r\n    implementation(&quot;org.springframework.boot:spring-boot-starter-mail&quot;)\r\n    implementation(&quot;org.jboss.aerogear:aerogear-otp-java:1.0.0&quot;)\r\n    implementation(&quot;org.mindrot:jbcrypt:0.4&quot;)\r\n    implementation(&quot;org.mariadb.jdbc:mariadb-java-client:1.5.7&quot;)\r\n    implementation(&quot;com.google.code.gson:gson:2.9.0&quot;)\r\n    //implementation(&quot;com.google.api-client:google-api-client:1.32.1&quot;)\r\n    //implementation(&quot;com.google.oauth-client:google-oauth-client-jetty:1.32.1&quot;)\r\n    //implementation(&quot;com.google.apis:google-api-services-youtube:v3-rev20210811-1.32.1&quot;)\r\n\r\n    compileOnly(&quot;org.projectlombok:lombok&quot;)\r\n    runtimeOnly(&quot;mysql:mysql-connector-java&quot;)\r\n    annotationProcessor(&quot;org.projectlombok:lombok&quot;)\r\n\r\n\r\n    testImplementation(&quot;org.springframework.boot:spring-boot-starter-test&quot;)\r\n    testImplementation(&quot;org.springframework.security:spring-security-test&quot;)\r\n    testImplementation(&quot;io.springfox:springfox-boot-starter:3.0.0&quot;)\r\n    testImplementation(&quot;io.springfox:springfox-swagger2:3.0.0&quot;)\r\n    testImplementation(&quot;io.springfox:springfox-swagger-ui:2.9.2&quot;)\r\n}\r\n```\r\n\r\nThis seemed all fine and dandy to me, except for the fact I had to provide a version number to the `javax.persistence` in the authlib. I thought this would be handled automatically, but oh well. I then built the project and ran it, and it indeed gave me a version conflict:\r\n\r\n```\r\nError starting ApplicationContext. To display the conditions report re-run your application with &#39;debug&#39; enabled.\r\n\r\nAn attempt was made to call a method that does not exist. The attempt was made from the following location:\r\n    org.hibernate.jpa.boot.internal.PersistenceUnitInfoDescriptor.getValidationMode(PersistenceUnitInfoDescriptor.java:88)\r\n\r\nThe following method did not exist:\r\n    javax.persistence.spi.PersistenceUnitInfo.getValidationMode()Ljavax/persistence/ValidationMode;\r\n\r\nThe method&#39;s class, javax.persistence.spi.PersistenceUnitInfo, is available from the following locations:\r\n    jar:file:/workspace/BOOT-INF/lib/persistence-api-1.0.2.jar!/javax/persistence/spi/PersistenceUnitInfo.class\r\n    jar:file:/workspace/BOOT-INF/lib/jakarta.persistence-api-2.2.3.jar!/javax/persistence/spi/PersistenceUnitInfo.class\r\n\r\nThe class hierarchy was loaded from the following locations:\r\n    javax.persistence.spi.PersistenceUnitInfo: file:/workspace/BOOT-INF/lib/persistence-api-1.0.2.jar\r\n\r\n```\r\n\r\nI understand that the problem lies in me basically including two different versions of the persistence api in my server project. However, I do not know how to fix this. Do I have to remove the dependency `javax.persistence` from my `implementation(project(&quot;:authlib&quot;))`? Or is there some other way to prevent this from happening?\r\n\r\nEDIT:\r\n\r\nI decided to try to include the exact version of the jakarta.persistence api in my `authlib` and that did something. However, the error indicates that the problem is unchanged and the persistence api is still present twice:\r\n\r\n```\r\norg.springframework.beans.factory.BeanCreationException: Error creating bean\r\n with name &#39;entityManagerFactory&#39; defined in class path resource \r\n[org/springframework/boot/autoconfigure/orm/jpa\r\n/HibernateJpaConfiguration.class]: Invocation of init method failed; nested \r\nexception is org.hibernate.AnnotationException: @OneToOne or @ManyToOne on \r\nnet.xxx.auth.entity.UserSession.user references an unknown entity: \r\nnet.xxx.authlib.entity.User\r\n\r\n```\r\n\r\n  [1]: https://stackoverflow.com/questions/76268254/does-it-matter-if-an-entity-for-a-jpa-repository-is-defined-in-another-gradle-pr","title":"Remove javax.persistence as duplicate dependency in two part spring boot project","body":"<p>In relation to <a href=\"https://stackoverflow.com/questions/76268254/does-it-matter-if-an-entity-for-a-jpa-repository-is-defined-in-another-gradle-pr\">this</a> question, I have encountered a problem.</p>\n<p>I have two projects, a <code>authlib</code> and a <code>server</code>. <code>server</code> is a spring boot 2.4.4 project with java, and <code>authlib</code> is a Kotlin project meant to be used as a library to facilitate web requests to the <code>server</code>.</p>\n<p>I decided to move the entity classes from the <code>server</code> to the <code>authlib</code>, so I could use them directly when handling the web requests and didn't have to define basically duplicate classes. I use <code>javax.persistence</code> for the entity definitions and stuff, so I added the dependency to the build.gradle.kts of the authlib:</p>\n<pre><code>dependencies {\n    implementation(kotlin(&quot;stdlib&quot;))\n    implementation(&quot;org.projectlombok:lombok:1.18.18&quot;)\n    implementation(&quot;com.fasterxml.jackson.core:jackson-databind:2.9.6&quot;)\n\n    // https://mvnrepository.com/artifact/javax.persistence/persistence-api\n    implementation(&quot;javax.persistence:persistence-api:1.0.2&quot;)\n}\n</code></pre>\n<p>The <code>server</code> uses the <code>authlib</code> project like this:</p>\n<pre><code>dependencies {\n    implementation(project(&quot;:authlib&quot;))\n\n    implementation(&quot;net.dv8tion:JDA:5.0.0-alpha.12&quot;)\n    implementation(&quot;com.github.theholywaffle:teamspeak3-api:1.3.0&quot;)\n\n    implementation(&quot;org.springframework.boot:spring-boot-starter-data-jpa&quot;)\n    implementation(&quot;org.springframework.boot:spring-boot-starter-web&quot;)\n    implementation(&quot;org.springframework.boot:spring-boot-starter-freemarker&quot;)\n    implementation(&quot;org.springframework.boot:spring-boot-starter-validation&quot;)\n    implementation(&quot;org.springframework.boot:spring-boot-starter-mail&quot;)\n    implementation(&quot;org.jboss.aerogear:aerogear-otp-java:1.0.0&quot;)\n    implementation(&quot;org.mindrot:jbcrypt:0.4&quot;)\n    implementation(&quot;org.mariadb.jdbc:mariadb-java-client:1.5.7&quot;)\n    implementation(&quot;com.google.code.gson:gson:2.9.0&quot;)\n    //implementation(&quot;com.google.api-client:google-api-client:1.32.1&quot;)\n    //implementation(&quot;com.google.oauth-client:google-oauth-client-jetty:1.32.1&quot;)\n    //implementation(&quot;com.google.apis:google-api-services-youtube:v3-rev20210811-1.32.1&quot;)\n\n    compileOnly(&quot;org.projectlombok:lombok&quot;)\n    runtimeOnly(&quot;mysql:mysql-connector-java&quot;)\n    annotationProcessor(&quot;org.projectlombok:lombok&quot;)\n\n\n    testImplementation(&quot;org.springframework.boot:spring-boot-starter-test&quot;)\n    testImplementation(&quot;org.springframework.security:spring-security-test&quot;)\n    testImplementation(&quot;io.springfox:springfox-boot-starter:3.0.0&quot;)\n    testImplementation(&quot;io.springfox:springfox-swagger2:3.0.0&quot;)\n    testImplementation(&quot;io.springfox:springfox-swagger-ui:2.9.2&quot;)\n}\n</code></pre>\n<p>This seemed all fine and dandy to me, except for the fact I had to provide a version number to the <code>javax.persistence</code> in the authlib. I thought this would be handled automatically, but oh well. I then built the project and ran it, and it indeed gave me a version conflict:</p>\n<pre><code>Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.\n\nAn attempt was made to call a method that does not exist. The attempt was made from the following location:\n    org.hibernate.jpa.boot.internal.PersistenceUnitInfoDescriptor.getValidationMode(PersistenceUnitInfoDescriptor.java:88)\n\nThe following method did not exist:\n    javax.persistence.spi.PersistenceUnitInfo.getValidationMode()Ljavax/persistence/ValidationMode;\n\nThe method's class, javax.persistence.spi.PersistenceUnitInfo, is available from the following locations:\n    jar:file:/workspace/BOOT-INF/lib/persistence-api-1.0.2.jar!/javax/persistence/spi/PersistenceUnitInfo.class\n    jar:file:/workspace/BOOT-INF/lib/jakarta.persistence-api-2.2.3.jar!/javax/persistence/spi/PersistenceUnitInfo.class\n\nThe class hierarchy was loaded from the following locations:\n    javax.persistence.spi.PersistenceUnitInfo: file:/workspace/BOOT-INF/lib/persistence-api-1.0.2.jar\n\n</code></pre>\n<p>I understand that the problem lies in me basically including two different versions of the persistence api in my server project. However, I do not know how to fix this. Do I have to remove the dependency <code>javax.persistence</code> from my <code>implementation(project(&quot;:authlib&quot;))</code>? Or is there some other way to prevent this from happening?</p>\n<p>EDIT:</p>\n<p>I decided to try to include the exact version of the jakarta.persistence api in my <code>authlib</code> and that did something. However, the error indicates that the problem is unchanged and the persistence api is still present twice:</p>\n<pre><code>org.springframework.beans.factory.BeanCreationException: Error creating bean\n with name 'entityManagerFactory' defined in class path resource \n[org/springframework/boot/autoconfigure/orm/jpa\n/HibernateJpaConfiguration.class]: Invocation of init method failed; nested \nexception is org.hibernate.AnnotationException: @OneToOne or @ManyToOne on \nnet.xxx.auth.entity.UserSession.user references an unknown entity: \nnet.xxx.authlib.entity.User\n\n</code></pre>\n"},{"tags":["java","github","jgit"],"owner":{"account_id":26472979,"reputation":51,"user_id":20113319,"display_name":"Glitch"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684347936,"creation_date":1684342111,"question_id":76274433,"body_markdown":"My program needs to add files to a github repo. I&#39;ve looked into JGit, but it&#39;s been extremely confusing. I just want to:\r\nGive the program the url of my repository.\r\nCreate a file with a certain name with some contents.\r\nCommit the file to the repository.\r\n\r\nHow do I do this?! After tons of searching I thought you needed to clone the repository from github, then make your edits, then &quot;push&quot; it back to github. But I couldn&#39;t even get the clone command to work!","title":"How to create a file in an existing github repo (that is on the github website; it&#39;s not local!) using a Java program?","body":"<p>My program needs to add files to a github repo. I've looked into JGit, but it's been extremely confusing. I just want to:\nGive the program the url of my repository.\nCreate a file with a certain name with some contents.\nCommit the file to the repository.</p>\n<p>How do I do this?! After tons of searching I thought you needed to clone the repository from github, then make your edits, then &quot;push&quot; it back to github. But I couldn't even get the clone command to work!</p>\n"},{"tags":["java","qr-code","zxing"],"answers":[{"comments":[{"owner":{"account_id":3043063,"reputation":51,"user_id":9771468,"display_name":"Bayu Sri Hernogo"},"score":0,"creation_date":1670510051,"post_id":74730965,"comment_id":131895393,"body_markdown":"Hi, thanks for the answer.  But unfortunately, I have tried all the level corrections and other hint parameters.  The result is still the same, I can&#39;t generate qr version 1. There is an online generator with the same result but after trying the same properties I still get NG result. https://www.morovia.com/free-online-barcode-generator/qrcode-maker.php","body":"Hi, thanks for the answer.  But unfortunately, I have tried all the level corrections and other hint parameters.  The result is still the same, I can&#39;t generate qr version 1. There is an online generator with the same result but after trying the same properties I still get NG result. <a href=\"https://www.morovia.com/free-online-barcode-generator/qrcode-maker.php\" rel=\"nofollow noreferrer\">morovia.com/free-online-barcode-generator/qrcode-maker.php</a>"}],"tags":[],"owner":{"account_id":7557680,"reputation":2844,"user_id":5736633,"accept_rate":71,"display_name":"vatbub"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1670505845,"creation_date":1670505845,"answer_id":74730965,"question_id":74729019,"body_markdown":"QR Codes have some redundancy built in to correct for damaged QR codes. When creating a QR code, you may choose the level of error correction. The higher the level, the more information must be included in the QR code for redundancy and thus the larger the QR code must be. It appears that the level of error correction in your reference is lower than in the QR code you created. You may want to have a look at [this StackOverflow answer](https://stackoverflow.com/a/11968724/5736633) to see how this can be specified in Z-Xing.","title":"Different pattern between qrcode image","body":"<p>QR Codes have some redundancy built in to correct for damaged QR codes. When creating a QR code, you may choose the level of error correction. The higher the level, the more information must be included in the QR code for redundancy and thus the larger the QR code must be. It appears that the level of error correction in your reference is lower than in the QR code you created. You may want to have a look at <a href=\"https://stackoverflow.com/a/11968724/5736633\">this StackOverflow answer</a> to see how this can be specified in Z-Xing.</p>\n"},{"comments":[{"owner":{"account_id":3043063,"reputation":51,"user_id":9771468,"display_name":"Bayu Sri Hernogo"},"score":0,"creation_date":1670556884,"post_id":74737723,"comment_id":131907002,"body_markdown":"Thank you sir, this is what I mean, I have done several ways but haven&#39;t found a way to do the compression in question, can you give an example maybe?","body":"Thank you sir, this is what I mean, I have done several ways but haven&#39;t found a way to do the compression in question, can you give an example maybe?"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1671017348,"post_id":74737723,"comment_id":132004921,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/74737723/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":461214,"reputation":73,"user_id":3814773,"display_name":"oki"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1670545504,"creation_date":1670545504,"answer_id":74737723,"question_id":74729019,"body_markdown":"If I checked your expected QR Code have size 41x41 modules which is using version 6.\r\nThe version 6 have only one alignment pattern. Your data contains of 1244 bits and the version 6 only have maximum size 1,088 bits for mixed data bits with lower (L) error correction. So, the exception raised because your data is bigger than maximum capacity of QR Code in Version 6 below.\r\nThe most possible version for your data is version 7 that have 1,248 bits capacity with lower error correction. But this version have more than one alignment pattern.\r\nI suggest you to try to compress your data to lower your size of data.\r\n[Version 6 Size Description source: https://www.qrcode.com/en/about/version.html][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/YVrGQ.png","title":"Different pattern between qrcode image","body":"<p>If I checked your expected QR Code have size 41x41 modules which is using version 6.\nThe version 6 have only one alignment pattern. Your data contains of 1244 bits and the version 6 only have maximum size 1,088 bits for mixed data bits with lower (L) error correction. So, the exception raised because your data is bigger than maximum capacity of QR Code in Version 6 below.\nThe most possible version for your data is version 7 that have 1,248 bits capacity with lower error correction. But this version have more than one alignment pattern.\nI suggest you to try to compress your data to lower your size of data.\n<a href=\"https://i.stack.imgur.com/YVrGQ.png\" rel=\"nofollow noreferrer\">Version 6 Size Description source: https://www.qrcode.com/en/about/version.html</a></p>\n"}],"owner":{"account_id":3043063,"reputation":51,"user_id":9771468,"display_name":"Bayu Sri Hernogo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":347,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1684347425,"creation_date":1670496211,"question_id":74729019,"body_markdown":"I need to implement an old system that doesn&#39;t have source code.\r\nThe system prints labels with the following qrcode output: (QR version 6 41x41, **alignment patterns** only 1)\r\n\r\n[![Version 1][1]][1]\r\n\r\nI tried to make the program in Java using the Zxing library.\r\nHowever, the resulting output has different as with previous below: (QR version &gt;= 7,**alignment patterns** = 6)\r\n\r\n[![Version 2][2]][2]\r\n\r\nEven if both reading scanners will produce the same output and character length (154@char)\r\n\r\n    &quot;H 4A91K       BB7998  M11AU10406   CBU 4A91471     H 000160        69H 69578 00009Y000                            @N                                      &quot;\r\n\r\nMaybe, it seems related to the qr lower version.\r\nI tried to make a lower qr.version but got the following error:\r\n\r\n    com.google.zxing.WriterException: Data too big for requested version\r\n        at com.google.zxing.qrcode.encoder.Encoder.encode(Encoder.java:123)\r\n        at com.google.zxing.qrcode.QRCodeWriter.encode(QRCodeWriter.java:78)\r\n\r\n\r\nCan anyone help me how to make qrcode output same as version 1 (**alignment patterns** only 1) ?\r\n\r\nThank you for your support.\r\n\r\n  [1]: https://i.stack.imgur.com/9OJv0.png?s=128\r\n  [2]: https://i.stack.imgur.com/z1PTw.png?s=175","title":"Different pattern between qrcode image","body":"<p>I need to implement an old system that doesn't have source code.\nThe system prints labels with the following qrcode output: (QR version 6 41x41, <strong>alignment patterns</strong> only 1)</p>\n<p><a href=\"https://i.stack.imgur.com/9OJv0.png?s=128\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9OJv0.png?s=128\" alt=\"Version 1\" /></a></p>\n<p>I tried to make the program in Java using the Zxing library.\nHowever, the resulting output has different as with previous below: (QR version &gt;= 7,<strong>alignment patterns</strong> = 6)</p>\n<p><a href=\"https://i.stack.imgur.com/z1PTw.png?s=175\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/z1PTw.png?s=175\" alt=\"Version 2\" /></a></p>\n<p>Even if both reading scanners will produce the same output and character length (154@char)</p>\n<pre><code>&quot;H 4A91K       BB7998  M11AU10406   CBU 4A91471     H 000160        69H 69578 00009Y000                            @N                                      &quot;\n</code></pre>\n<p>Maybe, it seems related to the qr lower version.\nI tried to make a lower qr.version but got the following error:</p>\n<pre><code>com.google.zxing.WriterException: Data too big for requested version\n    at com.google.zxing.qrcode.encoder.Encoder.encode(Encoder.java:123)\n    at com.google.zxing.qrcode.QRCodeWriter.encode(QRCodeWriter.java:78)\n</code></pre>\n<p>Can anyone help me how to make qrcode output same as version 1 (<strong>alignment patterns</strong> only 1) ?</p>\n<p>Thank you for your support.</p>\n"},{"tags":["java","regex"],"answers":[{"comments":[{"owner":{"account_id":9216321,"reputation":486,"user_id":6847323,"accept_rate":14,"display_name":"srinivas gowda"},"score":0,"creation_date":1495615130,"post_id":6805035,"comment_id":75323257,"body_markdown":"how to do reverse operation of the above like str=str.replace(&quot;\\&quot;,&quot;//&quot;);","body":"how to do reverse operation of the above like str=str.replace(&quot;\\&quot;,&quot;//&quot;);"},{"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1495617699,"post_id":6805035,"comment_id":75325016,"body_markdown":"@srinivasgowda if you mean you want to replace forward slashes with backslashes, just swap the parameters: `str = str.replace(&quot;/&quot;, &quot;\\\\&quot;);`","body":"@srinivasgowda if you mean you want to replace forward slashes with backslashes, just swap the parameters: <code>str = str.replace(&quot;&#47;&quot;, &quot;\\\\&quot;);</code>"},{"owner":{"account_id":9216321,"reputation":486,"user_id":6847323,"accept_rate":14,"display_name":"srinivas gowda"},"score":0,"creation_date":1495618352,"post_id":6805035,"comment_id":75325481,"body_markdown":"No for single backward slash(\\) to double forward slash(//)","body":"No for single backward slash(&#41; to double forward slash(//)"},{"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1495618663,"post_id":6805035,"comment_id":75325728,"body_markdown":"@sri `str = str.replace(&quot;\\\\&quot;, &quot;//&quot;);`","body":"@sri <code>str = str.replace(&quot;\\\\&quot;, &quot;&#47;&#47;&quot;);</code>"},{"owner":{"account_id":2412588,"reputation":694,"user_id":2107357,"display_name":"Umashankar"},"score":0,"creation_date":1535092851,"post_id":6805035,"comment_id":90946667,"body_markdown":"how to replace it globally","body":"how to replace it globally"},{"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1535094235,"post_id":6805035,"comment_id":90947263,"body_markdown":"@Umashankar please read my answer: `replace()` replaces **all** occurrences - ie &quot;globally&quot;","body":"@Umashankar please read my answer: <code>replace()</code> replaces <b>all</b> occurrences - ie &quot;globally&quot;"}],"tags":[],"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"comment_count":6,"down_vote_count":2,"up_vote_count":71,"is_accepted":true,"score":69,"last_activity_date":1343869006,"creation_date":1311483747,"answer_id":6805035,"question_id":6805028,"body_markdown":"In java, use this:\r\n\r\n    str = str.replace(&quot;\\\\&quot;, &quot;/&quot;);\r\n\r\nNote that the regex version of replace, ie [`replaceAll()`][1], is not required here; [`replace()`][2] still replaces all occurrences of the search term, but it searches for *literal* Strings, not regex matches.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29\r\n  [2]: http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replace%28java.lang.CharSequence,%20java.lang.CharSequence%29","title":"How to replace backward slash to forward slash using java?","body":"<p>In java, use this:</p>\n\n<pre><code>str = str.replace(\"\\\\\", \"/\");\n</code></pre>\n\n<p>Note that the regex version of replace, ie <a href=\"http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29\" rel=\"noreferrer\"><code>replaceAll()</code></a>, is not required here; <a href=\"http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replace%28java.lang.CharSequence,%20java.lang.CharSequence%29\" rel=\"noreferrer\"><code>replace()</code></a> still replaces all occurrences of the search term, but it searches for <em>literal</em> Strings, not regex matches.</p>\n"},{"comments":[{"owner":{"account_id":395357,"reputation":44547,"user_id":758280,"accept_rate":100,"display_name":"Jeffrey"},"score":0,"creation_date":1311483963,"post_id":6805045,"comment_id":8080047,"body_markdown":"You need to escape the backslash.","body":"You need to escape the backslash."}],"tags":[],"owner":{"account_id":403973,"reputation":140184,"user_id":772035,"accept_rate":95,"display_name":"Paul"},"comment_count":1,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1311484288,"creation_date":1311483909,"answer_id":6805045,"question_id":6805028,"body_markdown":"If you have:\r\n\r\n`String s = &quot;c:\\\\upload\\\\date\\\\csv\\\\sample.csv&quot;;`\r\n\r\nIn Java, you can just use:\r\n\r\n`s = s.replace(&quot;\\\\&quot;, &quot;/&quot;);`\r\n\r\nWhich will make s equal to:\r\n\r\n`c:/upload/date/csv/sample.csv`","title":"How to replace backward slash to forward slash using java?","body":"<p>If you have:</p>\n\n<p><code>String s = \"c:\\\\upload\\\\date\\\\csv\\\\sample.csv\";</code></p>\n\n<p>In Java, you can just use:</p>\n\n<p><code>s = s.replace(\"\\\\\", \"/\");</code></p>\n\n<p>Which will make s equal to:</p>\n\n<p><code>c:/upload/date/csv/sample.csv</code></p>\n"},{"tags":[],"owner":{"account_id":48093,"reputation":2175,"user_id":142716,"display_name":"Raze"},"comment_count":0,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1311484710,"creation_date":1311484710,"answer_id":6805072,"question_id":6805028,"body_markdown":"The String.replace(CharSequence, CharSequence) example provided by @PaulPRO and @Bohemian will work, but its better to use the String.replace(char, char) version. Slightly faster. Though you won&#39;t have a noticeable speed difference, its better to do such optimisations where possible.\r\n\r\n    String replacedStr = str.replace(&#39;\\\\&#39;, &#39;/&#39;);","title":"How to replace backward slash to forward slash using java?","body":"<p>The String.replace(CharSequence, CharSequence) example provided by @PaulPRO and @Bohemian will work, but its better to use the String.replace(char, char) version. Slightly faster. Though you won't have a noticeable speed difference, its better to do such optimisations where possible.</p>\n\n<pre><code>String replacedStr = str.replace('\\\\', '/');\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7113794,"reputation":141,"user_id":5440798,"display_name":"Vibhu Vikram Singh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684347353,"creation_date":1684347353,"answer_id":76275091,"question_id":6805028,"body_markdown":"For double back slash (&quot;\\\\\\\\&quot;)\r\n\r\nFor Java you can use string.replaceAll(&quot;\\\\\\\\\\\\\\\\&quot;,&quot;/&quot;)\r\n\r\n&amp;\r\n\r\nFor Kotlin you can use string.replace(&quot;\\\\\\\\\\\\\\\\&quot;.toRegex(),&quot;/&quot;)","title":"How to replace backward slash to forward slash using java?","body":"<p>For double back slash (&quot;\\\\&quot;)</p>\n<p>For Java you can use string.replaceAll(&quot;\\\\\\\\&quot;,&quot;/&quot;)</p>\n<p>&amp;</p>\n<p>For Kotlin you can use string.replace(&quot;\\\\\\\\&quot;.toRegex(),&quot;/&quot;)</p>\n"}],"owner":{"account_id":186312,"reputation":9244,"user_id":423620,"accept_rate":88,"display_name":"Sameek Mishra"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":104284,"favorite_count":0,"down_vote_count":0,"up_vote_count":37,"accepted_answer_id":6805035,"answer_count":4,"score":37,"last_activity_date":1684347353,"creation_date":1311483642,"question_id":6805028,"body_markdown":"I&#39;m importing a CSV file to MySQL database. This can be done using `java.mysql` support for forward slash in file path. If user gives the path \r\n\r\n    c:\\upload\\date\\csv\\sample.csv\r\n\r\nMySQL doesn&#39;t support this type of path pattern. I want to search for backslashes in the path and replace them with a forward slash, to give this:\r\n\r\n      c:/upload/date/csv/sample.csv\r\n\r\nHow is that done?","title":"How to replace backward slash to forward slash using java?","body":"<p>I'm importing a CSV file to MySQL database. This can be done using <code>java.mysql</code> support for forward slash in file path. If user gives the path </p>\n\n<pre><code>c:\\upload\\date\\csv\\sample.csv\n</code></pre>\n\n<p>MySQL doesn't support this type of path pattern. I want to search for backslashes in the path and replace them with a forward slash, to give this:</p>\n\n<pre><code>  c:/upload/date/csv/sample.csv\n</code></pre>\n\n<p>How is that done?</p>\n"},{"tags":["java","arrays","oracle","jdbc","plsql"],"answers":[{"tags":[],"owner":{"account_id":28606093,"reputation":1,"user_id":21902007,"display_name":"Dan Sievewright"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684346612,"creation_date":1684338732,"answer_id":76273977,"question_id":56634669,"body_markdown":"That documentation seems a bit out of date as setPlsqlIndexTable is deprecated in ojdbc8.  I can confirm that the example in the documentation does not work, but if you have t_indices defined in a package, then you can use the setObject and createOracleArray method with OracleData.  \r\n\r\n```plsql\r\n    create or replace package pkg_test\r\n    as \r\n        type t_indices is table of pls_integer index by pls_integer;\r\n    end;\r\n```\r\n\r\nThen the call would go through something like\r\n\r\n```java\r\n    void exampleCall() {\r\n\r\n        // set up connection\r\n\r\n        //inputs\r\n        int[] values = {1, 2, 3};\r\n  \r\n        // I&#39;m assuming you&#39;d probably just call a procedure instead of \r\n        // running an anonymous block, but idea is the same.\r\n        OracleCallableStatement procin = (OracleCallableStatement)\r\n          conn.prepareCall(&quot;declare \\n&quot; +\r\n                           &quot;a_indices   pkg_test.t_indices;\\n&quot; +\r\n                           &quot;begin\\n&quot; +\r\n                           &quot;  a_indices := ?;\\n&quot; +\r\n                           &quot;end;&quot;\r\n                          );\r\n\r\n        procin.setObject(1, (OracleData) arg0 -&gt; ((OracleConnection) arg0).createOracleArray(&quot;PKG_TEST.T_INDICES&quot;, values));\r\n\r\n        procin.execute();\r\n    }\r\n```\r\n\r\nI will note that with an associative array like this, converting from the array will mean using a zero-based index.  Instead, you could set up values as a `Map&lt;Integer, Integer&gt;` and have the keys line up with the usual one-based index.  And for associative arrays indexed by VARCHAR2(XX), then use `Map&lt;String, Integer&gt;` as your values.\r\n\r\nHere&#39;s the docs for more details\r\nhttps://docs.oracle.com/en/database/oracle/oracle-database/19/jjdbc/Oracle-object-types.html","title":"Pass array of int from Java to Oracle PlSql","body":"<p>That documentation seems a bit out of date as setPlsqlIndexTable is deprecated in ojdbc8.  I can confirm that the example in the documentation does not work, but if you have t_indices defined in a package, then you can use the setObject and createOracleArray method with OracleData.</p>\n<pre class=\"lang-sql prettyprint-override\"><code>    create or replace package pkg_test\n    as \n        type t_indices is table of pls_integer index by pls_integer;\n    end;\n</code></pre>\n<p>Then the call would go through something like</p>\n<pre class=\"lang-java prettyprint-override\"><code>    void exampleCall() {\n\n        // set up connection\n\n        //inputs\n        int[] values = {1, 2, 3};\n  \n        // I'm assuming you'd probably just call a procedure instead of \n        // running an anonymous block, but idea is the same.\n        OracleCallableStatement procin = (OracleCallableStatement)\n          conn.prepareCall(&quot;declare \\n&quot; +\n                           &quot;a_indices   pkg_test.t_indices;\\n&quot; +\n                           &quot;begin\\n&quot; +\n                           &quot;  a_indices := ?;\\n&quot; +\n                           &quot;end;&quot;\n                          );\n\n        procin.setObject(1, (OracleData) arg0 -&gt; ((OracleConnection) arg0).createOracleArray(&quot;PKG_TEST.T_INDICES&quot;, values));\n\n        procin.execute();\n    }\n</code></pre>\n<p>I will note that with an associative array like this, converting from the array will mean using a zero-based index.  Instead, you could set up values as a <code>Map&lt;Integer, Integer&gt;</code> and have the keys line up with the usual one-based index.  And for associative arrays indexed by VARCHAR2(XX), then use <code>Map&lt;String, Integer&gt;</code> as your values.</p>\n<p>Here's the docs for more details\n<a href=\"https://docs.oracle.com/en/database/oracle/oracle-database/19/jjdbc/Oracle-object-types.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/en/database/oracle/oracle-database/19/jjdbc/Oracle-object-types.html</a></p>\n"}],"owner":{"account_id":16150634,"reputation":21,"user_id":11659178,"display_name":"Arjen van Eerde"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":237,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1684346612,"creation_date":1560786059,"question_id":56634669,"body_markdown":"When I try to pass a Java array of int to Oracle PLSQL, I get an exception. I use the example that is in the docs, but for me it&#39;s not working.\r\n\r\nI&#39;m using JDK 1.8 and ojdbc8 to an Oracle 18 XE database.\r\n\r\n```java\r\n  @Test\r\n  void flush() {\r\n    try {\r\n      final Driver     oraDriver    = new OracleDriver();\r\n      System.out.println(&quot;Driver Major version is &quot;+oraDriver.getMajorVersion());\r\n      final Properties myProperties = new Properties();\r\n      myProperties.setProperty(&quot;user&quot;, &quot;kafka&quot;);\r\n      myProperties.setProperty(&quot;password&quot;, &quot;kafka&quot;);\r\n      Connection conn = oraDriver.connect(JDBC_URL, myProperties);\r\n      OracleCallableStatement procin = (OracleCallableStatement)\r\n          conn.prepareCall(&quot;declare type t_indices is table of pls_integer index by pls_integer;\\n&quot; +\r\n                           &quot;a_indices   t_indices;\\n&quot; +\r\n                           &quot;begin\\n&quot; +\r\n                           &quot;  a_indices := ?;\\n&quot; +\r\n                           &quot;end;&quot;\r\n                          );\r\n// Associative Array bind value\r\n      int[] values = {1, 2, 3};\r\n\r\n// maximum length of the Associative Array bind value. This\r\n// value defines the maximum possible &quot;currentLen&quot; for batch\r\n// updates. For standalone binds, &quot;maxLen&quot; should be the\r\n// same as &quot;currentLen&quot;.\r\n      int maxLen = values.length;\r\n\r\n// actual size of the Associative Array bind value\r\n      int currentLen = values.length;\r\n\r\n// Associative Array element type\r\n      int elemSqlType = OracleTypes.NUMBER;\r\n\r\n// Associative Array element length in case the element type\r\n// is CHAR, VARCHAR or RAW. This value is ignored for other\r\n// types.\r\n      int elemMaxLen = 0;\r\n\r\n// set the value\r\n      procin.setPlsqlIndexTable(1, values,\r\n                                maxLen, currentLen,\r\n                                elemSqlType, elemMaxLen);\r\n\r\n// execute the call\r\n      procin.execute();\r\n    }\r\n    catch (Exception e) {\r\n      throw new ConnectException(e);\r\n    }\r\n  }\r\n```\r\nThis is based on the example in, chapter &quot;Accessing PL/SQL Associative Arrays&quot;. https://docs.oracle.com/database/121/JJDBC/oraint.htm#JJDBC28179 .\r\n\r\nThe output / error text is below. I expected no error. What is the solution?\r\n```text\r\nC:\\Ls\\java\\jdk1.8.0\\bin\\java.exe ...\r\nDriver Major version is 18\r\n\r\norg.apache.kafka.connect.errors.ConnectException: java.sql.SQLException: ORA-06550: Regel 4, kolom 16:\r\nPLS-00382: Uitdrukking heeft onjuist type..\r\nORA-06550: Regel 4, kolom 3:\r\nPL/SQL: Statement ignored.\r\n\r\n\r\n\tat nl.ave.kafka.connect.oracle.OracleBatchedOutputWriterTest.flush(OracleBatchedOutputWriterTest.java:230)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:675)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:117)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:185)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:181)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:128)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:135)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)\r\n\tat java.util.ArrayList.forEach(ArrayList.java:1257)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)\r\n\tat java.util.ArrayList.forEach(ArrayList.java:1257)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:229)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:197)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:211)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:191)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)\r\n\tat com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:69)\r\n\tat com.intellij.rt.execution.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:47)\r\n\tat com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:242)\r\n\tat com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:70)\r\nCaused by: java.sql.SQLException: ORA-06550: Regel 4, kolom 16:\r\nPLS-00382: Uitdrukking heeft onjuist type..\r\nORA-06550: Regel 4, kolom 3:\r\nPL/SQL: Statement ignored.\r\n\r\n\tat oracle.jdbc.driver.T4CTTIoer11.processError(T4CTTIoer11.java:494)\r\n\tat oracle.jdbc.driver.T4CTTIoer11.processError(T4CTTIoer11.java:446)\r\n\tat oracle.jdbc.driver.T4C8Oall.processError(T4C8Oall.java:1052)\r\n\tat oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:537)\r\n\tat oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:255)\r\n\tat oracle.jdbc.driver.T4C8Oall.doOALL(T4C8Oall.java:610)\r\n\tat oracle.jdbc.driver.T4CCallableStatement.doOall8(T4CCallableStatement.java:249)\r\n\tat oracle.jdbc.driver.T4CCallableStatement.doOall8(T4CCallableStatement.java:82)\r\n\tat oracle.jdbc.driver.T4CCallableStatement.executeForRows(T4CCallableStatement.java:924)\r\n\tat oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1136)\r\n\tat oracle.jdbc.driver.OraclePreparedStatement.executeInternal(OraclePreparedStatement.java:3640)\r\n\tat oracle.jdbc.driver.T4CCallableStatement.executeInternal(T4CCallableStatement.java:1318)\r\n\tat oracle.jdbc.driver.OraclePreparedStatement.execute(OraclePreparedStatement.java:3752)\r\n\tat oracle.jdbc.driver.OracleCallableStatement.execute(OracleCallableStatement.java:4242)\r\n\tat oracle.jdbc.driver.OraclePreparedStatementWrapper.execute(OraclePreparedStatementWrapper.java:1079)\r\n\tat nl.ave.kafka.connect.oracle.OracleBatchedOutputWriterTest.flush(OracleBatchedOutputWriterTest.java:227)\r\n\t... 51 more\r\nCaused by: Error : 6550, Position : 113, Sql = declare type t_indices is table of pls_integer index by pls_integer;\r\na_indices   t_indices;\r\nbegin\r\n  a_indices := :1 ;\r\nend;, OriginalSql = declare type t_indices is table of pls_integer index by pls_integer;\r\na_indices   t_indices;\r\nbegin\r\n  a_indices := ?;\r\nend;, Error Msg = ORA-06550: Regel 4, kolom 16:\r\nPLS-00382: Uitdrukking heeft onjuist type..\r\nORA-06550: Regel 4, kolom 3:\r\nPL/SQL: Statement ignored.\r\n\r\n\tat oracle.jdbc.driver.T4CTTIoer11.processError(T4CTTIoer11.java:498)\r\n\t... 66 more\r\n\r\n\r\nProcess finished with exit code -1\r\n```","title":"Pass array of int from Java to Oracle PlSql","body":"<p>When I try to pass a Java array of int to Oracle PLSQL, I get an exception. I use the example that is in the docs, but for me it's not working.</p>\n\n<p>I'm using JDK 1.8 and ojdbc8 to an Oracle 18 XE database.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>  @Test\n  void flush() {\n    try {\n      final Driver     oraDriver    = new OracleDriver();\n      System.out.println(\"Driver Major version is \"+oraDriver.getMajorVersion());\n      final Properties myProperties = new Properties();\n      myProperties.setProperty(\"user\", \"kafka\");\n      myProperties.setProperty(\"password\", \"kafka\");\n      Connection conn = oraDriver.connect(JDBC_URL, myProperties);\n      OracleCallableStatement procin = (OracleCallableStatement)\n          conn.prepareCall(\"declare type t_indices is table of pls_integer index by pls_integer;\\n\" +\n                           \"a_indices   t_indices;\\n\" +\n                           \"begin\\n\" +\n                           \"  a_indices := ?;\\n\" +\n                           \"end;\"\n                          );\n// Associative Array bind value\n      int[] values = {1, 2, 3};\n\n// maximum length of the Associative Array bind value. This\n// value defines the maximum possible \"currentLen\" for batch\n// updates. For standalone binds, \"maxLen\" should be the\n// same as \"currentLen\".\n      int maxLen = values.length;\n\n// actual size of the Associative Array bind value\n      int currentLen = values.length;\n\n// Associative Array element type\n      int elemSqlType = OracleTypes.NUMBER;\n\n// Associative Array element length in case the element type\n// is CHAR, VARCHAR or RAW. This value is ignored for other\n// types.\n      int elemMaxLen = 0;\n\n// set the value\n      procin.setPlsqlIndexTable(1, values,\n                                maxLen, currentLen,\n                                elemSqlType, elemMaxLen);\n\n// execute the call\n      procin.execute();\n    }\n    catch (Exception e) {\n      throw new ConnectException(e);\n    }\n  }\n</code></pre>\n\n<p>This is based on the example in, chapter \"Accessing PL/SQL Associative Arrays\". <a href=\"https://docs.oracle.com/database/121/JJDBC/oraint.htm#JJDBC28179\" rel=\"nofollow noreferrer\">https://docs.oracle.com/database/121/JJDBC/oraint.htm#JJDBC28179</a> .</p>\n\n<p>The output / error text is below. I expected no error. What is the solution?</p>\n\n<pre><code>C:\\Ls\\java\\jdk1.8.0\\bin\\java.exe ...\nDriver Major version is 18\n\norg.apache.kafka.connect.errors.ConnectException: java.sql.SQLException: ORA-06550: Regel 4, kolom 16:\nPLS-00382: Uitdrukking heeft onjuist type..\nORA-06550: Regel 4, kolom 3:\nPL/SQL: Statement ignored.\n\n\n    at nl.ave.kafka.connect.oracle.OracleBatchedOutputWriterTest.flush(OracleBatchedOutputWriterTest.java:230)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:675)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:117)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:185)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:181)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:128)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:135)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)\n    at java.util.ArrayList.forEach(ArrayList.java:1257)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)\n    at java.util.ArrayList.forEach(ArrayList.java:1257)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:229)\n    at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:197)\n    at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:211)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:191)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)\n    at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:69)\n    at com.intellij.rt.execution.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:47)\n    at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:242)\n    at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:70)\nCaused by: java.sql.SQLException: ORA-06550: Regel 4, kolom 16:\nPLS-00382: Uitdrukking heeft onjuist type..\nORA-06550: Regel 4, kolom 3:\nPL/SQL: Statement ignored.\n\n    at oracle.jdbc.driver.T4CTTIoer11.processError(T4CTTIoer11.java:494)\n    at oracle.jdbc.driver.T4CTTIoer11.processError(T4CTTIoer11.java:446)\n    at oracle.jdbc.driver.T4C8Oall.processError(T4C8Oall.java:1052)\n    at oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:537)\n    at oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:255)\n    at oracle.jdbc.driver.T4C8Oall.doOALL(T4C8Oall.java:610)\n    at oracle.jdbc.driver.T4CCallableStatement.doOall8(T4CCallableStatement.java:249)\n    at oracle.jdbc.driver.T4CCallableStatement.doOall8(T4CCallableStatement.java:82)\n    at oracle.jdbc.driver.T4CCallableStatement.executeForRows(T4CCallableStatement.java:924)\n    at oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1136)\n    at oracle.jdbc.driver.OraclePreparedStatement.executeInternal(OraclePreparedStatement.java:3640)\n    at oracle.jdbc.driver.T4CCallableStatement.executeInternal(T4CCallableStatement.java:1318)\n    at oracle.jdbc.driver.OraclePreparedStatement.execute(OraclePreparedStatement.java:3752)\n    at oracle.jdbc.driver.OracleCallableStatement.execute(OracleCallableStatement.java:4242)\n    at oracle.jdbc.driver.OraclePreparedStatementWrapper.execute(OraclePreparedStatementWrapper.java:1079)\n    at nl.ave.kafka.connect.oracle.OracleBatchedOutputWriterTest.flush(OracleBatchedOutputWriterTest.java:227)\n    ... 51 more\nCaused by: Error : 6550, Position : 113, Sql = declare type t_indices is table of pls_integer index by pls_integer;\na_indices   t_indices;\nbegin\n  a_indices := :1 ;\nend;, OriginalSql = declare type t_indices is table of pls_integer index by pls_integer;\na_indices   t_indices;\nbegin\n  a_indices := ?;\nend;, Error Msg = ORA-06550: Regel 4, kolom 16:\nPLS-00382: Uitdrukking heeft onjuist type..\nORA-06550: Regel 4, kolom 3:\nPL/SQL: Statement ignored.\n\n    at oracle.jdbc.driver.T4CTTIoer11.processError(T4CTTIoer11.java:498)\n    ... 66 more\n\n\nProcess finished with exit code -1\n</code></pre>\n"},{"tags":["java","docker","gradle","apache-kafka"],"comments":[{"owner":{"account_id":6926363,"reputation":2155,"user_id":5317332,"display_name":"Alez"},"score":0,"creation_date":1684322563,"post_id":76271198,"comment_id":134500671,"body_markdown":"Can you try running without Docker? Do you have the same issue?","body":"Can you try running without Docker? Do you have the same issue?"},{"owner":{"account_id":6926363,"reputation":2155,"user_id":5317332,"display_name":"Alez"},"score":1,"creation_date":1684322630,"post_id":76271198,"comment_id":134500688,"body_markdown":"I don&#39;t understand why you&#39;re using `RUN bash -c &#39;touch /parallel.jar&#39;`. What are you aiming for?","body":"I don&#39;t understand why you&#39;re using <code>RUN bash -c &#39;touch &#47;parallel.jar&#39;</code>. What are you aiming for?"}],"answers":[{"comments":[{"owner":{"account_id":1889504,"reputation":2570,"user_id":1707976,"accept_rate":43,"display_name":"Dixit Singla"},"score":0,"creation_date":1684410628,"post_id":76274929,"comment_id":134515270,"body_markdown":"Thanks for the suggestion, I created a jar file using `shadowJar`. I am able to run the jar file in my system but when I try to run it in the container getting an error `Error: Unable to access jarfile parallel.jar io.confluent.developer.ParallelConsumerApplication`\ndocker last line is `ENTRYPOINT [&quot;java&quot;, &quot;-jar&quot;, &quot;parallel.jar io.confluent.developer.ParallelConsumerApplication&quot;]`","body":"Thanks for the suggestion, I created a jar file using <code>shadowJar</code>. I am able to run the jar file in my system but when I try to run it in the container getting an error <code>Error: Unable to access jarfile parallel.jar io.confluent.developer.ParallelConsumerApplication</code> docker last line is <code>ENTRYPOINT [&quot;java&quot;, &quot;-jar&quot;, &quot;parallel.jar io.confluent.developer.ParallelConsumerApplication&quot;]</code>"},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1684443165,"post_id":76274929,"comment_id":134522369,"body_markdown":"I think you meant `&quot;parallel.jar&quot;, &quot;...&quot;]` (separate arguments)? But also, `java -jar` command doesn&#39;t accept a classname , only a JAR file. Anything afterwards is passed as a plain string into `String[] args` of the JAR&#39;s own `MainClass`... Plus, you seem to have ignored my recommendation to use Jib and not write a Dockerfile at all","body":"I think you meant <code>&quot;parallel.jar&quot;, &quot;...&quot;]</code> (separate arguments)? But also, <code>java -jar</code> command doesn&#39;t accept a classname , only a JAR file. Anything afterwards is passed as a plain string into <code>String[] args</code> of the JAR&#39;s own <code>MainClass</code>... Plus, you seem to have ignored my recommendation to use Jib and not write a Dockerfile at all"},{"owner":{"account_id":1889504,"reputation":2570,"user_id":1707976,"accept_rate":43,"display_name":"Dixit Singla"},"score":0,"creation_date":1684476255,"post_id":76274929,"comment_id":134525693,"body_markdown":"I will be taking a look at the Jib as well. It&#39;s just that I was already using the ShadowJar to create the jar file so though of using it to create the docker image. In my local once the jar is created I run the jar by passing the class like this `java -cp build/libs/paralelConsumer.jar io.confluent.developer.ParallelConsumerApplication` where `io.confluent.developer.ParallelConsumerApplication` is the class which contains the main function if I don&#39;t mention the main class I get the error `no main manifest attribute`. So while creating the jar where can I mention about the main class","body":"I will be taking a look at the Jib as well. It&#39;s just that I was already using the ShadowJar to create the jar file so though of using it to create the docker image. In my local once the jar is created I run the jar by passing the class like this <code>java -cp build&#47;libs&#47;paralelConsumer.jar io.confluent.developer.ParallelConsumerApplication</code> where <code>io.confluent.developer.ParallelConsumerApplication</code> is the class which contains the main function if I don&#39;t mention the main class I get the error <code>no main manifest attribute</code>. So while creating the jar where can I mention about the main class"},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":1,"creation_date":1684498600,"post_id":76274929,"comment_id":134529863,"body_markdown":"The main class should be an option in the shadowJar config in your grade file. `java -cp` takes a class name, yes. `java -jar` does not","body":"The main class should be an option in the shadowJar config in your grade file. <code>java -cp</code> takes a class name, yes. <code>java -jar</code> does not"}],"tags":[],"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1684345964,"creation_date":1684345964,"answer_id":76274929,"question_id":76271198,"body_markdown":"Gradle doesn&#39;t include dependencies, by default. You&#39;d get the same error when running `java jar` outside of the container.\r\n\r\nYou need to use shadow plugin to get dependencies packaged in your JAR.  \r\n\r\nAlternatively, don&#39;t write a Dockerfile manually... Use `jib-gradle-plugin`. Plus, it&#39;ll create a more optimized Docker image, which doesn&#39;t create an Uber JAR like the shadow plugin would. ","title":"Error while running the docker image | JNI error","body":"<p>Gradle doesn't include dependencies, by default. You'd get the same error when running <code>java jar</code> outside of the container.</p>\n<p>You need to use shadow plugin to get dependencies packaged in your JAR.</p>\n<p>Alternatively, don't write a Dockerfile manually... Use <code>jib-gradle-plugin</code>. Plus, it'll create a more optimized Docker image, which doesn't create an Uber JAR like the shadow plugin would.</p>\n"}],"owner":{"account_id":1889504,"reputation":2570,"user_id":1707976,"accept_rate":43,"display_name":"Dixit Singla"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":119,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76274929,"answer_count":1,"score":0,"last_activity_date":1684345964,"creation_date":1684319994,"question_id":76271198,"body_markdown":"I am getting an error while running a docker image. I have created a core java application using gradle.\r\n\r\nusing `docker build` command to create the docker image and while running the docker image I am getting the following error\r\n\r\n    Error: A JNI error has occurred, please check your installation and try again\r\n    Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/apache/kafka/clients/consumer/Consumer\r\n            at java.lang.Class.getDeclaredMethods0(Native Method)\r\n            at java.lang.Class.privateGetDeclaredMethods(Class.java:2701)\r\n            at java.lang.Class.privateGetMethodRecursive(Class.java:3048)\r\n            at java.lang.Class.getMethod0(Class.java:3018)\r\n            at java.lang.Class.getMethod(Class.java:1784)\r\n            at sun.launcher.LauncherHelper.validateMainClass(LauncherHelper.java:650)\r\n            at sun.launcher.LauncherHelper.checkAndLoadMain(LauncherHelper.java:632)\r\n    Caused by: java.lang.ClassNotFoundException: org.apache.kafka.clients.consumer.Consumer\r\n            at java.net.URLClassLoader.findClass(URLClassLoader.java:387)\r\n            at java.lang.ClassLoader.loadClass(ClassLoader.java:418)\r\n            at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:352)\r\n            at java.lang.ClassLoader.loadClass(ClassLoader.java:351)\r\n            ... 7 more\r\n\r\nI can see that the error is due to missing kafka consumer library, but I am not able to understand what I have missed in the docker file which is causing this issue.\r\n\r\nHere is the dockerfile\r\n\r\n    FROM openjdk:8\r\n    ADD build/libs/*.jar parallel.jar\r\n    \r\n    RUN bash -c &#39;touch /parallel.jar&#39;\r\n    ENTRYPOINT [&quot;java&quot;, &quot;-jar&quot;, &quot;parallel.jar&quot;]\r\n\r\nBefore I ran the `docker build` command, I made sure to run the `gradle clean build` command.\r\n\r\nHere are the dependencies I have used in `build.gradle`\r\n\r\n        implementation &quot;io.confluent.parallelconsumer:parallel-consumer-core:0.5.2.4&quot;\r\n        implementation &quot;org.apache.avro:avro:1.11.1&quot;\r\n        implementation &quot;io.confluent:kafka-avro-serializer:3.3.0&quot;\r\n        implementation &quot;org.springframework.boot:spring-boot-starter-web&quot;\r\n        implementation &quot;org.codehaus.jackson:jackson-core-asl:1.9.13&quot;\r\n        implementation &quot;org.codehaus.jackson:jackson-mapper-asl:1.9.13&quot;\r\n        implementation &quot;org.apache.commons:commons-lang3:3.12.0&quot;\r\n        implementation &quot;org.slf4j:slf4j-simple:2.0.0&quot;\r\n        implementation &quot;me.tongfei:progressbar:0.9.3&quot;\r\n        implementation &#39;org.awaitility:awaitility:4.2.0&#39;\r\n        implementation(&quot;log4j:log4j:1.2.17&quot;)\r\n\r\n","title":"Error while running the docker image | JNI error","body":"<p>I am getting an error while running a docker image. I have created a core java application using gradle.</p>\n<p>using <code>docker build</code> command to create the docker image and while running the docker image I am getting the following error</p>\n<pre><code>Error: A JNI error has occurred, please check your installation and try again\nException in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/apache/kafka/clients/consumer/Consumer\n        at java.lang.Class.getDeclaredMethods0(Native Method)\n        at java.lang.Class.privateGetDeclaredMethods(Class.java:2701)\n        at java.lang.Class.privateGetMethodRecursive(Class.java:3048)\n        at java.lang.Class.getMethod0(Class.java:3018)\n        at java.lang.Class.getMethod(Class.java:1784)\n        at sun.launcher.LauncherHelper.validateMainClass(LauncherHelper.java:650)\n        at sun.launcher.LauncherHelper.checkAndLoadMain(LauncherHelper.java:632)\nCaused by: java.lang.ClassNotFoundException: org.apache.kafka.clients.consumer.Consumer\n        at java.net.URLClassLoader.findClass(URLClassLoader.java:387)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:418)\n        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:352)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:351)\n        ... 7 more\n</code></pre>\n<p>I can see that the error is due to missing kafka consumer library, but I am not able to understand what I have missed in the docker file which is causing this issue.</p>\n<p>Here is the dockerfile</p>\n<pre><code>FROM openjdk:8\nADD build/libs/*.jar parallel.jar\n\nRUN bash -c 'touch /parallel.jar'\nENTRYPOINT [&quot;java&quot;, &quot;-jar&quot;, &quot;parallel.jar&quot;]\n</code></pre>\n<p>Before I ran the <code>docker build</code> command, I made sure to run the <code>gradle clean build</code> command.</p>\n<p>Here are the dependencies I have used in <code>build.gradle</code></p>\n<pre><code>    implementation &quot;io.confluent.parallelconsumer:parallel-consumer-core:0.5.2.4&quot;\n    implementation &quot;org.apache.avro:avro:1.11.1&quot;\n    implementation &quot;io.confluent:kafka-avro-serializer:3.3.0&quot;\n    implementation &quot;org.springframework.boot:spring-boot-starter-web&quot;\n    implementation &quot;org.codehaus.jackson:jackson-core-asl:1.9.13&quot;\n    implementation &quot;org.codehaus.jackson:jackson-mapper-asl:1.9.13&quot;\n    implementation &quot;org.apache.commons:commons-lang3:3.12.0&quot;\n    implementation &quot;org.slf4j:slf4j-simple:2.0.0&quot;\n    implementation &quot;me.tongfei:progressbar:0.9.3&quot;\n    implementation 'org.awaitility:awaitility:4.2.0'\n    implementation(&quot;log4j:log4j:1.2.17&quot;)\n</code></pre>\n"},{"tags":["java","mysql","spring","spring-boot","spring-data-jpa"],"comments":[{"owner":{"account_id":6528825,"reputation":21455,"user_id":5050667,"accept_rate":91,"display_name":"Yassin Hajaj"},"score":0,"creation_date":1684235641,"post_id":76262339,"comment_id":134485025,"body_markdown":"What queries does it fire ? Can you provide a bit more information ?","body":"What queries does it fire ? Can you provide a bit more information ?"},{"owner":{"account_id":3701688,"reputation":3357,"user_id":3081206,"display_name":"takendarkk"},"score":0,"creation_date":1684235779,"post_id":76262339,"comment_id":134485053,"body_markdown":"`userRepository.findById(userId)` should only execute 1 query - something like `SELECT * FROM table WHERE id = userId`.","body":"<code>userRepository.findById(userId)</code> should only execute 1 query - something like <code>SELECT * FROM table WHERE id = userId</code>."},{"owner":{"account_id":5879019,"reputation":1195,"user_id":4629025,"display_name":"Raushan Kumar"},"score":0,"creation_date":1684235957,"post_id":76262339,"comment_id":134485089,"body_markdown":"please update question with query logs.","body":"please update question with query logs."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1684237444,"post_id":76262339,"comment_id":134485411,"body_markdown":"`findById` isn&#39;t the problem, your mapping is the problem and the fact that you are using `Lombok`. Don&#39;t use Lombok with entities that only results in trouble. Write your own proper equals/hashcode method as well as toString. THe one generated by Lombok is wrong for JPA usage. I would suggest you start with that and see if it improves, how to write a proper equals/hashCode for JPA can be found [here](https://vladmihalcea.com/the-best-way-to-implement-equals-hashcode-and-tostring-with-jpa-and-hibernate/). If you want to use lombok only use `@Getter`/`@Setter` but not `@Data`.","body":"<code>findById</code> isn&#39;t the problem, your mapping is the problem and the fact that you are using <code>Lombok</code>. Don&#39;t use Lombok with entities that only results in trouble. Write your own proper equals/hashcode method as well as toString. THe one generated by Lombok is wrong for JPA usage. I would suggest you start with that and see if it improves, how to write a proper equals/hashCode for JPA can be found <a href=\"https://vladmihalcea.com/the-best-way-to-implement-equals-hashcode-and-tostring-with-jpa-and-hibernate/\" rel=\"nofollow noreferrer\">here</a>. If you want to use lombok only use <code>@Getter</code>/<code>@Setter</code> but not <code>@Data</code>."},{"owner":{"account_id":529143,"reputation":136619,"user_id":1766831,"display_name":"Rick James"},"score":0,"creation_date":1684257685,"post_id":76262339,"comment_id":134490932,"body_markdown":"Please provide the generated SQL and `SHOW CREATE TABLE`.","body":"Please provide the generated SQL and <code>SHOW CREATE TABLE</code>."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1684345909,"post_id":76262339,"comment_id":134506363,"body_markdown":"Please show the code that is using this (so the controller, service etc.).","body":"Please show the code that is using this (so the controller, service etc.)."}],"answers":[{"comments":[{"owner":{"account_id":28611909,"reputation":3,"user_id":21906718,"display_name":"Codephetamine"},"score":0,"creation_date":1684342201,"post_id":76262778,"comment_id":134505557,"body_markdown":"I have made the changes that you showed me but it is still firing so many queries when I try issueRepository.findById(issueId). Logs are like 2023-05-17T22:21:00.421+05:30 DEBUG 72248 --- [nio-8080-exec-3] org.hibernate.SQL                        : select i1_0.id,i1_0.community_id,i1_0.date_created,i1_0.description,i1_0.is_open,i1_0.title,i1_0.user_id from issue i1_0\norg.hibernate.SQL                       : select u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from user u1_0 where u1_0.id=? so many more","body":"I have made the changes that you showed me but it is still firing so many queries when I try issueRepository.findById(issueId). Logs are like 2023-05-17T22:21:00.421+05:30 DEBUG 72248 --- [nio-8080-exec-3] org.hibernate.SQL                        : select i1_0.id,i1_0.community_id,i1_0.date_created,i1_0.description&zwnj;&#8203;,i1_0.is_open,i1_0.t&zwnj;&#8203;itle,i1_0.user_id from issue i1_0 org.hibernate.SQL                       : select u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.passw&zwnj;&#8203;ord,u1_0.role from user u1_0 where u1_0.id=? so many more"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1684345819,"post_id":76262778,"comment_id":134506330,"body_markdown":"Did you also include the `toString` and did it for all entities? Make sure you aren&#39;t logging the entities if you haven&#39; overridden the `toString`. That being said if you are using this `User` directly in your controller it will serialize all the fields and thus lazy load all the other fields as well. Finally I would probably remove all the not needed collections from the user, or at least make them uni-directional (so remove them from the `User`) instead of bi-directional. Why would the user need to access the comments, issues etc. etc. directly, you can query them if needed!","body":"Did you also include the <code>toString</code> and did it for all entities? Make sure you aren&#39;t logging the entities if you haven&#39; overridden the <code>toString</code>. That being said if you are using this <code>User</code> directly in your controller it will serialize all the fields and thus lazy load all the other fields as well. Finally I would probably remove all the not needed collections from the user, or at least make them uni-directional (so remove them from the <code>User</code>) instead of bi-directional. Why would the user need to access the comments, issues etc. etc. directly, you can query them if needed!"}],"tags":[],"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1684345689,"creation_date":1684238253,"answer_id":76262778,"question_id":76262339,"body_markdown":"First stop using `@Data` (or better Lombok all together) with JPA entities. When using `@Data` it will generate an `equals`/`hashCode`/`toString` method including all collections (which are lazy) in your entity. (I wrote [a blog][1] about it about 4 years ago and yet we still haven&#39;t learned). \r\n\r\nThose `hashCode` and `equals` method are important as those are used to determine if an object is already in the cache or not. Now to calculate the `hashCode` what do you think will happen.... Exactly queries, queries and some more queries. \r\n\r\nI would suggest to create a `BaseEntity` which include a regular `hashCode`, `equals` and basic `toString` method. Then let all your entities extend this base class. \r\n\r\nNext replace the `@Data` with only `@Getter`/`@Setter` to generate the getters/setters. \r\n\r\n```java\r\n@MappedSuperclass\r\n@Getter\r\npublic abstract BaseEntity {\r\n\r\n  @Id\r\n  @GeneratedValue(strategy = GenerationType.AUTO)\r\n  private Long id;\r\n\r\n  @Override\r\n  public int hashCode() {\r\n    return getClass().hashCode();\r\n  }\r\n  \r\n  @Override\r\n  public boolean equals(Object o) {\r\n    if (this == o) return true;\r\n \r\n    if (getClass().isInstance(o) &amp;&amp; o instanceof BaseEntity other) {\r\n      return this.id != null &amp;&amp; Objects.equals(this.id, other.id);\r\n    }\r\n    return false;\r\n  }\r\n\r\n  @Override\r\n  public String toString() {\r\n    return String.format(&quot;%s [id=%d]&quot;, getClass().getSimpleName(), this.id);\r\n  }  \r\n}\r\n```\r\n\r\nNow for example let your `Comment` class extend this and drop the usage of `@Data`. \r\n\r\n```\r\n@AllArgsConstructor\r\n@Getter\r\n@Setter\r\n@Entity\r\n@NoArgsConstructor\r\n@Table(name = &quot;comment&quot;)\r\npublic class Comment extends BaseEntity {\r\n\r\n    private String content;\r\n\r\n    @ManyToOne\r\n    private User user;\r\n\r\n    @ManyToOne\r\n    @JoinColumn(name = &quot;issue_id&quot;)\r\n    private Issue issue;\r\n\r\n    private LocalDate dateCreated;\r\n}\r\n```\r\n\r\nThis should already reduce the number of queries that are being issued. Another optimization you could do is to use bytecode enhancements to lazy load the `Issue` in the `Comment` (the sample ofcourse applies to other fields that can be lazy loaded). But this requires bytecode enhancements.\r\n\r\n[1]: https://deinum.biz/2019-02-13-Lombok-Data-Ojects-Arent-Entities/","title":"Too many queries problem with JPA using Mysql","body":"<p>First stop using <code>@Data</code> (or better Lombok all together) with JPA entities. When using <code>@Data</code> it will generate an <code>equals</code>/<code>hashCode</code>/<code>toString</code> method including all collections (which are lazy) in your entity. (I wrote <a href=\"https://deinum.biz/2019-02-13-Lombok-Data-Ojects-Arent-Entities/\" rel=\"nofollow noreferrer\">a blog</a> about it about 4 years ago and yet we still haven't learned).</p>\n<p>Those <code>hashCode</code> and <code>equals</code> method are important as those are used to determine if an object is already in the cache or not. Now to calculate the <code>hashCode</code> what do you think will happen.... Exactly queries, queries and some more queries.</p>\n<p>I would suggest to create a <code>BaseEntity</code> which include a regular <code>hashCode</code>, <code>equals</code> and basic <code>toString</code> method. Then let all your entities extend this base class.</p>\n<p>Next replace the <code>@Data</code> with only <code>@Getter</code>/<code>@Setter</code> to generate the getters/setters.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@MappedSuperclass\n@Getter\npublic abstract BaseEntity {\n\n  @Id\n  @GeneratedValue(strategy = GenerationType.AUTO)\n  private Long id;\n\n  @Override\n  public int hashCode() {\n    return getClass().hashCode();\n  }\n  \n  @Override\n  public boolean equals(Object o) {\n    if (this == o) return true;\n \n    if (getClass().isInstance(o) &amp;&amp; o instanceof BaseEntity other) {\n      return this.id != null &amp;&amp; Objects.equals(this.id, other.id);\n    }\n    return false;\n  }\n\n  @Override\n  public String toString() {\n    return String.format(&quot;%s [id=%d]&quot;, getClass().getSimpleName(), this.id);\n  }  \n}\n</code></pre>\n<p>Now for example let your <code>Comment</code> class extend this and drop the usage of <code>@Data</code>.</p>\n<pre><code>@AllArgsConstructor\n@Getter\n@Setter\n@Entity\n@NoArgsConstructor\n@Table(name = &quot;comment&quot;)\npublic class Comment extends BaseEntity {\n\n    private String content;\n\n    @ManyToOne\n    private User user;\n\n    @ManyToOne\n    @JoinColumn(name = &quot;issue_id&quot;)\n    private Issue issue;\n\n    private LocalDate dateCreated;\n}\n</code></pre>\n<p>This should already reduce the number of queries that are being issued. Another optimization you could do is to use bytecode enhancements to lazy load the <code>Issue</code> in the <code>Comment</code> (the sample ofcourse applies to other fields that can be lazy loaded). But this requires bytecode enhancements.</p>\n"}],"owner":{"account_id":28611909,"reputation":3,"user_id":21906718,"display_name":"Codephetamine"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":94,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76262778,"answer_count":1,"score":0,"last_activity_date":1684345689,"creation_date":1684235441,"question_id":76262339,"body_markdown":"I am developing REST application using spring boot and I am trying to optimize the performance of the queries. I am currently using findById from the repositories which is causing performance issues. Code is given below:\r\n\r\nUser Entity\r\n\r\n```\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@Data\r\n@Builder\r\n@Entity\r\n@Table(name=&quot;user&quot;, uniqueConstraints = @UniqueConstraint(columnNames = &quot;email&quot;))\r\n@JsonIgnoreProperties({&quot;comments&quot;})\r\npublic class User implements UserDetails {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.AUTO)\r\n    private Long id;\r\n\r\n    @NotEmpty(message = &quot;first name should not be empty&quot;)\r\n    @Column(name = &quot;first_name&quot;)\r\n    private String firstName;\r\n\r\n    @NotEmpty(message = &quot;last name should not be empty&quot;)\r\n    @Column(name = &quot;last_name&quot;)\r\n    private String lastName;\r\n\r\n    @Email(message = &quot;Not a valid email&quot;)\r\n    private String email;\r\n\r\n    @NotEmpty\r\n//    @Pattern(regexp = &quot;^(?=.*[a-z])(?=.*[A-Z])(?=.*\\\\d)(?=.*[#$@!%&amp;*?])[A-Za-z\\\\d#$@!%&amp;*?]{8,}$&quot;,\r\n//            message =&quot;1 Uppercase, 1 Lowercase, 1 special character, 1 number, Min 8 characters &quot;)\r\n    @Size(min = 8, message = &quot;password should have at least 8 characters&quot;)\r\n    private String password;\r\n\r\n    @Enumerated(EnumType.STRING)\r\n    private Role role;\r\n\r\n    @OneToMany(mappedBy = &quot;user&quot;,\r\n            cascade = CascadeType.ALL)\r\n    private Set&lt;Comment&gt; comments = new HashSet&lt;&gt;();\r\n\r\n    @ManyToMany(mappedBy = &quot;assignees&quot;)\r\n    private Set&lt;Issue&gt; issues = new HashSet&lt;&gt;();\r\n\r\n    @ManyToMany(mappedBy = &quot;voters&quot;)\r\n    private Set&lt;Issue&gt; votedIssues = new HashSet&lt;&gt;();\r\n\r\n    @ManyToMany(mappedBy = &quot;members&quot;)\r\n    private Set&lt;Community&gt; communities = new HashSet&lt;&gt;();\r\n\r\n    @ManyToMany(mappedBy = &quot;requestingMembers&quot;)\r\n    private Set&lt;Community&gt; requestedCommunities = new HashSet&lt;&gt;();\r\n\r\n    @OneToMany(mappedBy = &quot;admin&quot;, cascade = CascadeType.ALL)\r\n    private Set&lt;Community&gt; communitiesCreated = new HashSet&lt;&gt;();\r\n\r\n    @Override\r\n    public Collection&lt;? extends GrantedAuthority&gt; getAuthorities() {\r\n        return List.of(new SimpleGrantedAuthority(role.name()));\r\n    }\r\n\r\n    @Override\r\n    public String getUsername() {\r\n        return email;\r\n    }\r\n\r\n    @Override\r\n    public boolean isAccountNonExpired() {\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public boolean isAccountNonLocked() {\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public boolean isCredentialsNonExpired() {\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public boolean isEnabled() {\r\n        return true;\r\n    }\r\n}\r\n```\r\n\r\nIssue Entity\r\n\r\n```\r\n@AllArgsConstructor\r\n@Data\r\n@Entity\r\n@NoArgsConstructor\r\n@Table(name=&quot;issue&quot;)\r\npublic class Issue {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.AUTO)\r\n    private Long id;\r\n    private String title;\r\n    private String description;\r\n    private LocalDate dateCreated;\r\n    private boolean isOpen;\r\n\r\n    @ManyToOne\r\n    private User user;\r\n\r\n    @OneToMany(mappedBy = &quot;issue&quot;, cascade = CascadeType.ALL)\r\n    private List&lt;Comment&gt; comments = new ArrayList&lt;&gt;();\r\n\r\n    @ManyToMany(cascade = CascadeType.ALL)\r\n    private List&lt;User&gt; voters = new ArrayList&lt;&gt;();\r\n\r\n    @ManyToMany(cascade = CascadeType.ALL)\r\n    private List&lt;User&gt; assignees = new ArrayList&lt;&gt;();\r\n\r\n    @ManyToOne\r\n    @JoinColumn(name = &quot;community_id&quot;)\r\n    private Community community;\r\n\r\n}\r\n```\r\n\r\n\r\nComment Entity\r\n```\r\n\r\n@AllArgsConstructor\r\n@Data\r\n@Entity\r\n@NoArgsConstructor\r\n@Table(name = &quot;comment&quot;)\r\npublic class Comment {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.AUTO)\r\n    private Long id;\r\n    private String content;\r\n\r\n    @ManyToOne\r\n    private User user;\r\n\r\n    @ManyToOne\r\n    @JoinColumn(name = &quot;issue_id&quot;)\r\n    private Issue issue;\r\n\r\n    private LocalDate dateCreated;\r\n}\r\n```\r\n\r\n\r\nRole Enum\r\n\r\n```\r\npublic enum Role {\r\n    CUSTOMER(&quot;CUSTOMER&quot;),\r\n    EXPERT(&quot;EXPERT&quot;),\r\n    ADMIN(&quot;ADMIN&quot;);\r\n\r\n    private String role;\r\n\r\n    Role(String role) {\r\n        this.role = role;\r\n    }\r\n\r\n    public String getRoleName() {\r\n        return role;\r\n    }\r\n}\r\n```\r\n\r\nWhen I do a userRepository.findById(userId) there are so many select queries being fired. I am looking for a way to optimize the queries so that findById produces result in less queries. Currenlty it is making so many queries just for one api request for example :\r\n\r\n    2023-05-16T16:21:48.837+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from user u1_0 where u1_0.id=?\r\n    2023-05-16T16:21:48.911+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select i1_0.assignees_id,i1_1.id,c1_0.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_0.description,c1_0.name,i1_1.date_created,i1_1.description,i1_1.is_open,i1_1.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from issue_assignees i1_0 join issue i1_1 on i1_1.id=i1_0.issues_id left join community c1_0 on c1_0.id=i1_1.community_id left join user a1_0 on a1_0.id=c1_0.user_id left join user u1_0 on u1_0.id=i1_1.user_id where i1_0.assignees_id=?\r\n    2023-05-16T16:21:48.921+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.user_id,c1_0.id,c1_0.content,c1_0.date_created,i1_0.id,c2_0.id,c2_0.user_id,c2_0.description,c2_0.name,i1_0.date_created,i1_0.description,i1_0.is_open,i1_0.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from comment c1_0 left join issue i1_0 on i1_0.id=c1_0.issue_id left join community c2_0 on c2_0.id=i1_0.community_id left join user u1_0 on u1_0.id=i1_0.user_id where c1_0.user_id=?\r\n    2023-05-16T16:21:48.927+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.user_id,c1_0.id,c1_0.content,c1_0.date_created,i1_0.id,c2_0.id,c2_0.user_id,c2_0.description,c2_0.name,i1_0.date_created,i1_0.description,i1_0.is_open,i1_0.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from comment c1_0 left join issue i1_0 on i1_0.id=c1_0.issue_id left join community c2_0 on c2_0.id=i1_0.community_id left join user u1_0 on u1_0.id=i1_0.user_id where c1_0.user_id=?\r\n    2023-05-16T16:21:48.930+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select i1_0.assignees_id,i1_1.id,c1_0.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_0.description,c1_0.name,i1_1.date_created,i1_1.description,i1_1.is_open,i1_1.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from issue_assignees i1_0 join issue i1_1 on i1_1.id=i1_0.issues_id left join community c1_0 on c1_0.id=i1_1.community_id left join user a1_0 on a1_0.id=c1_0.user_id left join user u1_0 on u1_0.id=i1_1.user_id where i1_0.assignees_id=?\r\n    2023-05-16T16:21:48.932+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select v1_0.voters_id,v1_1.id,c1_0.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_0.description,c1_0.name,v1_1.date_created,v1_1.description,v1_1.is_open,v1_1.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from issue_voters v1_0 join issue v1_1 on v1_1.id=v1_0.voted_issues_id left join community c1_0 on c1_0.id=v1_1.community_id left join user a1_0 on a1_0.id=c1_0.user_id left join user u1_0 on u1_0.id=v1_1.user_id where v1_0.voters_id=?\r\n    2023-05-16T16:21:48.933+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.members_id,c1_1.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_1.description,c1_1.name from community_members c1_0 join community c1_1 on c1_1.id=c1_0.communities_id left join user a1_0 on a1_0.id=c1_1.user_id where c1_0.members_id=?\r\n    2023-05-16T16:21:48.936+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select r1_0.requesting_members_id,r1_1.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,r1_1.description,r1_1.name from community_requesting_members r1_0 join community r1_1 on r1_1.id=r1_0.requested_communities_id left join user a1_0 on a1_0.id=r1_1.user_id where r1_0.requesting_members_id=?\r\n    2023-05-16T16:21:48.937+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.user_id,c1_0.id,c1_0.description,c1_0.name from community c1_0 where c1_0.user_id=?\r\n    2023-05-16T16:21:48.938+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select m1_0.communities_id,m1_1.id,m1_1.email,m1_1.first_name,m1_1.last_name,m1_1.password,m1_1.role from community_members m1_0 join user m1_1 on m1_1.id=m1_0.members_id where m1_0.communities_id=?\r\n    2023-05-16T16:21:48.938+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.user_id,c1_0.id,c1_0.content,c1_0.date_created,i1_0.id,c2_0.id,c2_0.user_id,c2_0.description,c2_0.name,i1_0.date_created,i1_0.description,i1_0.is_open,i1_0.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from comment c1_0 left join issue i1_0 on i1_0.id=c1_0.issue_id left join community c2_0 on c2_0.id=i1_0.community_id left join user u1_0 on u1_0.id=i1_0.user_id where c1_0.user_id=?\r\n    2023-05-16T16:21:48.940+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.user_id,c1_0.id,c1_0.content,c1_0.date_created,i1_0.id,c2_0.id,c2_0.user_id,c2_0.description,c2_0.name,i1_0.date_created,i1_0.description,i1_0.is_open,i1_0.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from comment c1_0 left join issue i1_0 on i1_0.id=c1_0.issue_id left join community c2_0 on c2_0.id=i1_0.community_id left join user u1_0 on u1_0.id=i1_0.user_id where c1_0.user_id=?\r\n    2023-05-16T16:21:48.941+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select i1_0.assignees_id,i1_1.id,c1_0.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_0.description,c1_0.name,i1_1.date_created,i1_1.description,i1_1.is_open,i1_1.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from issue_assignees i1_0 join issue i1_1 on i1_1.id=i1_0.issues_id left join community c1_0 on c1_0.id=i1_1.community_id left join user a1_0 on a1_0.id=c1_0.user_id left join user u1_0 on u1_0.id=i1_1.user_id where i1_0.assignees_id=?\r\n    2023-05-16T16:21:48.942+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select v1_0.voters_id,v1_1.id,c1_0.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_0.description,c1_0.name,v1_1.date_created,v1_1.description,v1_1.is_open,v1_1.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from issue_voters v1_0 join issue v1_1 on v1_1.id=v1_0.voted_issues_id left join community c1_0 on c1_0.id=v1_1.community_id left join user a1_0 on a1_0.id=c1_0.user_id left join user u1_0 on u1_0.id=v1_1.user_id where v1_0.voters_id=?\r\n    2023-05-16T16:21:48.943+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select v1_0.voters_id,v1_1.id,c1_0.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_0.description,c1_0.name,v1_1.date_created,v1_1.description,v1_1.is_open,v1_1.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from issue_voters v1_0 join issue v1_1 on v1_1.id=v1_0.voted_issues_id left join community c1_0 on c1_0.id=v1_1.community_id left join user a1_0 on a1_0.id=c1_0.user_id left join user u1_0 on u1_0.id=v1_1.user_id where v1_0.voters_id=?\r\n    2023-05-16T16:21:48.944+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.members_id,c1_1.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_1.description,c1_1.name from community_members c1_0 join community c1_1 on c1_1.id=c1_0.communities_id left join user a1_0 on a1_0.id=c1_1.user_id where c1_0.members_id=?\r\n    2023-05-16T16:21:48.945+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select m1_0.communities_id,m1_1.id,m1_1.email,m1_1.first_name,m1_1.last_name,m1_1.password,m1_1.role from community_members m1_0 join user m1_1 on m1_1.id=m1_0.members_id where m1_0.communities_id=?\r\n    2023-05-16T16:21:48.945+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.user_id,c1_0.id,c1_0.description,c1_0.name from community c1_0 where c1_0.user_id=?\r\n    2023-05-16T16:21:48.946+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select i1_0.community_id,i1_0.id,i1_0.date_created,i1_0.description,i1_0.is_open,i1_0.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from issue i1_0 left join user u1_0 on u1_0.id=i1_0.user_id where i1_0.community_id=?\r\n    2023-05-16T16:21:48.947+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select r1_0.requesting_members_id,r1_1.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,r1_1.description,r1_1.name from community_requesting_members r1_0 join community r1_1 on r1_1.id=r1_0.requested_communities_id left join user a1_0 on a1_0.id=r1_1.user_id where r1_0.requesting_members_id=?\r\n    2023-05-16T16:21:48.947+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.user_id,c1_0.id,c1_0.description,c1_0.name from community c1_0 where c1_0.user_id=?\r\n    2023-05-16T16:21:48.948+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.user_id,c1_0.id,c1_0.content,c1_0.date_created,i1_0.id,c2_0.id,c2_0.user_id,c2_0.description,c2_0.name,i1_0.date_created,i1_0.description,i1_0.is_open,i1_0.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from comment c1_0 left join issue i1_0 on i1_0.id=c1_0.issue_id left join community c2_0 on c2_0.id=i1_0.community_id left join user u1_0 on u1_0.id=i1_0.user_id where c1_0.user_id=?\r\n    2023-05-16T16:21:48.949+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select i1_0.assignees_id,i1_1.id,c1_0.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_0.description,c1_0.name,i1_1.date_created,i1_1.description,i1_1.is_open,i1_1.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from issue_assignees i1_0 join issue i1_1 on i1_1.id=i1_0.issues_id left join community c1_0 on c1_0.id=i1_1.community_id left join user a1_0 on a1_0.id=c1_0.user_id left join user u1_0 on u1_0.id=i1_1.user_id where i1_0.assignees_id=?\r\n    2023-05-16T16:21:48.950+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select v1_0.voters_id,v1_1.id,c1_0.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_0.description,c1_0.name,v1_1.date_created,v1_1.description,v1_1.is_open,v1_1.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from issue_voters v1_0 join issue v1_1 on v1_1.id=v1_0.voted_issues_id left join community c1_0 on c1_0.id=v1_1.community_id left join user a1_0 on a1_0.id=c1_0.user_id left join user u1_0 on u1_0.id=v1_1.user_id where v1_0.voters_id=?\r\n    2023-05-16T16:21:48.951+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.members_id,c1_1.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_1.description,c1_1.name from community_members c1_0 join community c1_1 on c1_1.id=c1_0.communities_id left join user a1_0 on a1_0.id=c1_1.user_id where c1_0.members_id=?\r\n    2023-05-16T16:21:48.951+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select r1_0.requesting_members_id,r1_1.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,r1_1.description,r1_1.name from community_requesting_members r1_0 join community r1_1 on r1_1.id=r1_0.requested_communities_id left join user a1_0 on a1_0.id=r1_1.user_id where r1_0.requesting_members_id=?\r\n    2023-05-16T16:21:48.952+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.user_id,c1_0.id,c1_0.description,c1_0.name from community c1_0 where c1_0.user_id=?\r\n    2023-05-16T16:21:48.953+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.user_id,c1_0.id,c1_0.content,c1_0.date_created,i1_0.id,c2_0.id,c2_0.user_id,c2_0.description,c2_0.name,i1_0.date_created,i1_0.description,i1_0.is_open,i1_0.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from comment c1_0 left join issue i1_0 on i1_0.id=c1_0.issue_id left join community c2_0 on c2_0.id=i1_0.community_id left join user u1_0 on u1_0.id=i1_0.user_id where c1_0.user_id=?\r\n    2023-05-16T16:21:48.953+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select i1_0.assignees_id,i1_1.id,c1_0.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_0.description,c1_0.name,i1_1.date_created,i1_1.description,i1_1.is_open,i1_1.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from issue_assignees i1_0 join issue i1_1 on i1_1.id=i1_0.issues_id left join community c1_0 on c1_0.id=i1_1.community_id left join user a1_0 on a1_0.id=c1_0.user_id left join user u1_0 on u1_0.id=i1_1.user_id where i1_0.assignees_id=?\r\n    2023-05-16T16:21:48.954+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select v1_0.voters_id,v1_1.id,c1_0.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_0.description,c1_0.name,v1_1.date_created,v1_1.description,v1_1.is_open,v1_1.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from issue_voters v1_0 join issue v1_1 on v1_1.id=v1_0.voted_issues_id left join community c1_0 on c1_0.id=v1_1.community_id left join user a1_0 on a1_0.id=c1_0.user_id left join user u1_0 on u1_0.id=v1_1.user_id where v1_0.voters_id=?\r\n    2023-05-16T16:21:48.954+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.members_id,c1_1.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_1.description,c1_1.name from community_members c1_0 join community c1_1 on c1_1.id=c1_0.communities_id left join user a1_0 on a1_0.id=c1_1.user_id where c1_0.members_id=?\r\n    2023-05-16T16:21:48.955+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select r1_0.requesting_members_id,r1_1.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,r1_1.description,r1_1.name from community_requesting_members r1_0 join community r1_1 on r1_1.id=r1_0.requested_communities_id left join user a1_0 on a1_0.id=r1_1.user_id where r1_0.requesting_members_id=?\r\n    2023-05-16T16:21:48.955+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.user_id,c1_0.id,c1_0.description,c1_0.name from community c1_0 where c1_0.user_id=? \r\n\r\n**I am expecting just one or two select queries.**\r\n","title":"Too many queries problem with JPA using Mysql","body":"<p>I am developing REST application using spring boot and I am trying to optimize the performance of the queries. I am currently using findById from the repositories which is causing performance issues. Code is given below:</p>\n<p>User Entity</p>\n<pre><code>@AllArgsConstructor\n@NoArgsConstructor\n@Data\n@Builder\n@Entity\n@Table(name=&quot;user&quot;, uniqueConstraints = @UniqueConstraint(columnNames = &quot;email&quot;))\n@JsonIgnoreProperties({&quot;comments&quot;})\npublic class User implements UserDetails {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private Long id;\n\n    @NotEmpty(message = &quot;first name should not be empty&quot;)\n    @Column(name = &quot;first_name&quot;)\n    private String firstName;\n\n    @NotEmpty(message = &quot;last name should not be empty&quot;)\n    @Column(name = &quot;last_name&quot;)\n    private String lastName;\n\n    @Email(message = &quot;Not a valid email&quot;)\n    private String email;\n\n    @NotEmpty\n//    @Pattern(regexp = &quot;^(?=.*[a-z])(?=.*[A-Z])(?=.*\\\\d)(?=.*[#$@!%&amp;*?])[A-Za-z\\\\d#$@!%&amp;*?]{8,}$&quot;,\n//            message =&quot;1 Uppercase, 1 Lowercase, 1 special character, 1 number, Min 8 characters &quot;)\n    @Size(min = 8, message = &quot;password should have at least 8 characters&quot;)\n    private String password;\n\n    @Enumerated(EnumType.STRING)\n    private Role role;\n\n    @OneToMany(mappedBy = &quot;user&quot;,\n            cascade = CascadeType.ALL)\n    private Set&lt;Comment&gt; comments = new HashSet&lt;&gt;();\n\n    @ManyToMany(mappedBy = &quot;assignees&quot;)\n    private Set&lt;Issue&gt; issues = new HashSet&lt;&gt;();\n\n    @ManyToMany(mappedBy = &quot;voters&quot;)\n    private Set&lt;Issue&gt; votedIssues = new HashSet&lt;&gt;();\n\n    @ManyToMany(mappedBy = &quot;members&quot;)\n    private Set&lt;Community&gt; communities = new HashSet&lt;&gt;();\n\n    @ManyToMany(mappedBy = &quot;requestingMembers&quot;)\n    private Set&lt;Community&gt; requestedCommunities = new HashSet&lt;&gt;();\n\n    @OneToMany(mappedBy = &quot;admin&quot;, cascade = CascadeType.ALL)\n    private Set&lt;Community&gt; communitiesCreated = new HashSet&lt;&gt;();\n\n    @Override\n    public Collection&lt;? extends GrantedAuthority&gt; getAuthorities() {\n        return List.of(new SimpleGrantedAuthority(role.name()));\n    }\n\n    @Override\n    public String getUsername() {\n        return email;\n    }\n\n    @Override\n    public boolean isAccountNonExpired() {\n        return true;\n    }\n\n    @Override\n    public boolean isAccountNonLocked() {\n        return true;\n    }\n\n    @Override\n    public boolean isCredentialsNonExpired() {\n        return true;\n    }\n\n    @Override\n    public boolean isEnabled() {\n        return true;\n    }\n}\n</code></pre>\n<p>Issue Entity</p>\n<pre><code>@AllArgsConstructor\n@Data\n@Entity\n@NoArgsConstructor\n@Table(name=&quot;issue&quot;)\npublic class Issue {\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private Long id;\n    private String title;\n    private String description;\n    private LocalDate dateCreated;\n    private boolean isOpen;\n\n    @ManyToOne\n    private User user;\n\n    @OneToMany(mappedBy = &quot;issue&quot;, cascade = CascadeType.ALL)\n    private List&lt;Comment&gt; comments = new ArrayList&lt;&gt;();\n\n    @ManyToMany(cascade = CascadeType.ALL)\n    private List&lt;User&gt; voters = new ArrayList&lt;&gt;();\n\n    @ManyToMany(cascade = CascadeType.ALL)\n    private List&lt;User&gt; assignees = new ArrayList&lt;&gt;();\n\n    @ManyToOne\n    @JoinColumn(name = &quot;community_id&quot;)\n    private Community community;\n\n}\n</code></pre>\n<p>Comment Entity</p>\n<pre><code>\n@AllArgsConstructor\n@Data\n@Entity\n@NoArgsConstructor\n@Table(name = &quot;comment&quot;)\npublic class Comment {\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private Long id;\n    private String content;\n\n    @ManyToOne\n    private User user;\n\n    @ManyToOne\n    @JoinColumn(name = &quot;issue_id&quot;)\n    private Issue issue;\n\n    private LocalDate dateCreated;\n}\n</code></pre>\n<p>Role Enum</p>\n<pre><code>public enum Role {\n    CUSTOMER(&quot;CUSTOMER&quot;),\n    EXPERT(&quot;EXPERT&quot;),\n    ADMIN(&quot;ADMIN&quot;);\n\n    private String role;\n\n    Role(String role) {\n        this.role = role;\n    }\n\n    public String getRoleName() {\n        return role;\n    }\n}\n</code></pre>\n<p>When I do a userRepository.findById(userId) there are so many select queries being fired. I am looking for a way to optimize the queries so that findById produces result in less queries. Currenlty it is making so many queries just for one api request for example :</p>\n<pre><code>2023-05-16T16:21:48.837+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from user u1_0 where u1_0.id=?\n2023-05-16T16:21:48.911+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select i1_0.assignees_id,i1_1.id,c1_0.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_0.description,c1_0.name,i1_1.date_created,i1_1.description,i1_1.is_open,i1_1.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from issue_assignees i1_0 join issue i1_1 on i1_1.id=i1_0.issues_id left join community c1_0 on c1_0.id=i1_1.community_id left join user a1_0 on a1_0.id=c1_0.user_id left join user u1_0 on u1_0.id=i1_1.user_id where i1_0.assignees_id=?\n2023-05-16T16:21:48.921+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.user_id,c1_0.id,c1_0.content,c1_0.date_created,i1_0.id,c2_0.id,c2_0.user_id,c2_0.description,c2_0.name,i1_0.date_created,i1_0.description,i1_0.is_open,i1_0.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from comment c1_0 left join issue i1_0 on i1_0.id=c1_0.issue_id left join community c2_0 on c2_0.id=i1_0.community_id left join user u1_0 on u1_0.id=i1_0.user_id where c1_0.user_id=?\n2023-05-16T16:21:48.927+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.user_id,c1_0.id,c1_0.content,c1_0.date_created,i1_0.id,c2_0.id,c2_0.user_id,c2_0.description,c2_0.name,i1_0.date_created,i1_0.description,i1_0.is_open,i1_0.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from comment c1_0 left join issue i1_0 on i1_0.id=c1_0.issue_id left join community c2_0 on c2_0.id=i1_0.community_id left join user u1_0 on u1_0.id=i1_0.user_id where c1_0.user_id=?\n2023-05-16T16:21:48.930+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select i1_0.assignees_id,i1_1.id,c1_0.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_0.description,c1_0.name,i1_1.date_created,i1_1.description,i1_1.is_open,i1_1.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from issue_assignees i1_0 join issue i1_1 on i1_1.id=i1_0.issues_id left join community c1_0 on c1_0.id=i1_1.community_id left join user a1_0 on a1_0.id=c1_0.user_id left join user u1_0 on u1_0.id=i1_1.user_id where i1_0.assignees_id=?\n2023-05-16T16:21:48.932+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select v1_0.voters_id,v1_1.id,c1_0.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_0.description,c1_0.name,v1_1.date_created,v1_1.description,v1_1.is_open,v1_1.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from issue_voters v1_0 join issue v1_1 on v1_1.id=v1_0.voted_issues_id left join community c1_0 on c1_0.id=v1_1.community_id left join user a1_0 on a1_0.id=c1_0.user_id left join user u1_0 on u1_0.id=v1_1.user_id where v1_0.voters_id=?\n2023-05-16T16:21:48.933+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.members_id,c1_1.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_1.description,c1_1.name from community_members c1_0 join community c1_1 on c1_1.id=c1_0.communities_id left join user a1_0 on a1_0.id=c1_1.user_id where c1_0.members_id=?\n2023-05-16T16:21:48.936+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select r1_0.requesting_members_id,r1_1.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,r1_1.description,r1_1.name from community_requesting_members r1_0 join community r1_1 on r1_1.id=r1_0.requested_communities_id left join user a1_0 on a1_0.id=r1_1.user_id where r1_0.requesting_members_id=?\n2023-05-16T16:21:48.937+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.user_id,c1_0.id,c1_0.description,c1_0.name from community c1_0 where c1_0.user_id=?\n2023-05-16T16:21:48.938+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select m1_0.communities_id,m1_1.id,m1_1.email,m1_1.first_name,m1_1.last_name,m1_1.password,m1_1.role from community_members m1_0 join user m1_1 on m1_1.id=m1_0.members_id where m1_0.communities_id=?\n2023-05-16T16:21:48.938+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.user_id,c1_0.id,c1_0.content,c1_0.date_created,i1_0.id,c2_0.id,c2_0.user_id,c2_0.description,c2_0.name,i1_0.date_created,i1_0.description,i1_0.is_open,i1_0.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from comment c1_0 left join issue i1_0 on i1_0.id=c1_0.issue_id left join community c2_0 on c2_0.id=i1_0.community_id left join user u1_0 on u1_0.id=i1_0.user_id where c1_0.user_id=?\n2023-05-16T16:21:48.940+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.user_id,c1_0.id,c1_0.content,c1_0.date_created,i1_0.id,c2_0.id,c2_0.user_id,c2_0.description,c2_0.name,i1_0.date_created,i1_0.description,i1_0.is_open,i1_0.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from comment c1_0 left join issue i1_0 on i1_0.id=c1_0.issue_id left join community c2_0 on c2_0.id=i1_0.community_id left join user u1_0 on u1_0.id=i1_0.user_id where c1_0.user_id=?\n2023-05-16T16:21:48.941+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select i1_0.assignees_id,i1_1.id,c1_0.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_0.description,c1_0.name,i1_1.date_created,i1_1.description,i1_1.is_open,i1_1.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from issue_assignees i1_0 join issue i1_1 on i1_1.id=i1_0.issues_id left join community c1_0 on c1_0.id=i1_1.community_id left join user a1_0 on a1_0.id=c1_0.user_id left join user u1_0 on u1_0.id=i1_1.user_id where i1_0.assignees_id=?\n2023-05-16T16:21:48.942+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select v1_0.voters_id,v1_1.id,c1_0.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_0.description,c1_0.name,v1_1.date_created,v1_1.description,v1_1.is_open,v1_1.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from issue_voters v1_0 join issue v1_1 on v1_1.id=v1_0.voted_issues_id left join community c1_0 on c1_0.id=v1_1.community_id left join user a1_0 on a1_0.id=c1_0.user_id left join user u1_0 on u1_0.id=v1_1.user_id where v1_0.voters_id=?\n2023-05-16T16:21:48.943+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select v1_0.voters_id,v1_1.id,c1_0.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_0.description,c1_0.name,v1_1.date_created,v1_1.description,v1_1.is_open,v1_1.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from issue_voters v1_0 join issue v1_1 on v1_1.id=v1_0.voted_issues_id left join community c1_0 on c1_0.id=v1_1.community_id left join user a1_0 on a1_0.id=c1_0.user_id left join user u1_0 on u1_0.id=v1_1.user_id where v1_0.voters_id=?\n2023-05-16T16:21:48.944+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.members_id,c1_1.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_1.description,c1_1.name from community_members c1_0 join community c1_1 on c1_1.id=c1_0.communities_id left join user a1_0 on a1_0.id=c1_1.user_id where c1_0.members_id=?\n2023-05-16T16:21:48.945+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select m1_0.communities_id,m1_1.id,m1_1.email,m1_1.first_name,m1_1.last_name,m1_1.password,m1_1.role from community_members m1_0 join user m1_1 on m1_1.id=m1_0.members_id where m1_0.communities_id=?\n2023-05-16T16:21:48.945+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.user_id,c1_0.id,c1_0.description,c1_0.name from community c1_0 where c1_0.user_id=?\n2023-05-16T16:21:48.946+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select i1_0.community_id,i1_0.id,i1_0.date_created,i1_0.description,i1_0.is_open,i1_0.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from issue i1_0 left join user u1_0 on u1_0.id=i1_0.user_id where i1_0.community_id=?\n2023-05-16T16:21:48.947+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select r1_0.requesting_members_id,r1_1.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,r1_1.description,r1_1.name from community_requesting_members r1_0 join community r1_1 on r1_1.id=r1_0.requested_communities_id left join user a1_0 on a1_0.id=r1_1.user_id where r1_0.requesting_members_id=?\n2023-05-16T16:21:48.947+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.user_id,c1_0.id,c1_0.description,c1_0.name from community c1_0 where c1_0.user_id=?\n2023-05-16T16:21:48.948+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.user_id,c1_0.id,c1_0.content,c1_0.date_created,i1_0.id,c2_0.id,c2_0.user_id,c2_0.description,c2_0.name,i1_0.date_created,i1_0.description,i1_0.is_open,i1_0.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from comment c1_0 left join issue i1_0 on i1_0.id=c1_0.issue_id left join community c2_0 on c2_0.id=i1_0.community_id left join user u1_0 on u1_0.id=i1_0.user_id where c1_0.user_id=?\n2023-05-16T16:21:48.949+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select i1_0.assignees_id,i1_1.id,c1_0.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_0.description,c1_0.name,i1_1.date_created,i1_1.description,i1_1.is_open,i1_1.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from issue_assignees i1_0 join issue i1_1 on i1_1.id=i1_0.issues_id left join community c1_0 on c1_0.id=i1_1.community_id left join user a1_0 on a1_0.id=c1_0.user_id left join user u1_0 on u1_0.id=i1_1.user_id where i1_0.assignees_id=?\n2023-05-16T16:21:48.950+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select v1_0.voters_id,v1_1.id,c1_0.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_0.description,c1_0.name,v1_1.date_created,v1_1.description,v1_1.is_open,v1_1.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from issue_voters v1_0 join issue v1_1 on v1_1.id=v1_0.voted_issues_id left join community c1_0 on c1_0.id=v1_1.community_id left join user a1_0 on a1_0.id=c1_0.user_id left join user u1_0 on u1_0.id=v1_1.user_id where v1_0.voters_id=?\n2023-05-16T16:21:48.951+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.members_id,c1_1.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_1.description,c1_1.name from community_members c1_0 join community c1_1 on c1_1.id=c1_0.communities_id left join user a1_0 on a1_0.id=c1_1.user_id where c1_0.members_id=?\n2023-05-16T16:21:48.951+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select r1_0.requesting_members_id,r1_1.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,r1_1.description,r1_1.name from community_requesting_members r1_0 join community r1_1 on r1_1.id=r1_0.requested_communities_id left join user a1_0 on a1_0.id=r1_1.user_id where r1_0.requesting_members_id=?\n2023-05-16T16:21:48.952+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.user_id,c1_0.id,c1_0.description,c1_0.name from community c1_0 where c1_0.user_id=?\n2023-05-16T16:21:48.953+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.user_id,c1_0.id,c1_0.content,c1_0.date_created,i1_0.id,c2_0.id,c2_0.user_id,c2_0.description,c2_0.name,i1_0.date_created,i1_0.description,i1_0.is_open,i1_0.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from comment c1_0 left join issue i1_0 on i1_0.id=c1_0.issue_id left join community c2_0 on c2_0.id=i1_0.community_id left join user u1_0 on u1_0.id=i1_0.user_id where c1_0.user_id=?\n2023-05-16T16:21:48.953+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select i1_0.assignees_id,i1_1.id,c1_0.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_0.description,c1_0.name,i1_1.date_created,i1_1.description,i1_1.is_open,i1_1.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from issue_assignees i1_0 join issue i1_1 on i1_1.id=i1_0.issues_id left join community c1_0 on c1_0.id=i1_1.community_id left join user a1_0 on a1_0.id=c1_0.user_id left join user u1_0 on u1_0.id=i1_1.user_id where i1_0.assignees_id=?\n2023-05-16T16:21:48.954+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select v1_0.voters_id,v1_1.id,c1_0.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_0.description,c1_0.name,v1_1.date_created,v1_1.description,v1_1.is_open,v1_1.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from issue_voters v1_0 join issue v1_1 on v1_1.id=v1_0.voted_issues_id left join community c1_0 on c1_0.id=v1_1.community_id left join user a1_0 on a1_0.id=c1_0.user_id left join user u1_0 on u1_0.id=v1_1.user_id where v1_0.voters_id=?\n2023-05-16T16:21:48.954+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.members_id,c1_1.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_1.description,c1_1.name from community_members c1_0 join community c1_1 on c1_1.id=c1_0.communities_id left join user a1_0 on a1_0.id=c1_1.user_id where c1_0.members_id=?\n2023-05-16T16:21:48.955+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select r1_0.requesting_members_id,r1_1.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,r1_1.description,r1_1.name from community_requesting_members r1_0 join community r1_1 on r1_1.id=r1_0.requested_communities_id left join user a1_0 on a1_0.id=r1_1.user_id where r1_0.requesting_members_id=?\n2023-05-16T16:21:48.955+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.user_id,c1_0.id,c1_0.description,c1_0.name from community c1_0 where c1_0.user_id=? \n</code></pre>\n<p><strong>I am expecting just one or two select queries.</strong></p>\n"},{"tags":["java","minecraft-fabric"],"answers":[{"comments":[{"owner":{"account_id":17747824,"reputation":15,"user_id":12886716,"display_name":"Captain"},"score":0,"creation_date":1684508282,"post_id":76274875,"comment_id":134532059,"body_markdown":"Ah got it, thanks a bunch! Sadly cannot give you any points for the answer, so this will suffice and I will focus on that when programming :D","body":"Ah got it, thanks a bunch! Sadly cannot give you any points for the answer, so this will suffice and I will focus on that when programming :D"}],"tags":[],"owner":{"account_id":37136,"reputation":57822,"user_id":106104,"accept_rate":62,"display_name":"user253751"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1684345514,"creation_date":1684345514,"answer_id":76274875,"question_id":76138601,"body_markdown":"You can&#39;t make a 2-block-tall block. You have to make two separate blocks or block states - one for the top and one for the bottom.\r\n\r\nFor example, the game only calls your block&#39;s `canReplace` function when *your block* is replaced. It doesn&#39;t call it if the player replaces the air block on top of your block because that&#39;s not your block. So you have to put one of your blocks in that spot and not try to pretend there&#39;s one when there isn&#39;t.\r\n\r\nYour block has a GUI, so it probably has a bunch of tile entity data. You will find it convenient to pick one half (e.g. the bottom) to store the data, and make the top one be a completely boring block that, when you right-click it, acts like you right-clicked the bottom one instead. And if one half sees that the other half is missing, it breaks.","title":"2-Tall Minecraft Block with same interaction on both Blocks","body":"<p>You can't make a 2-block-tall block. You have to make two separate blocks or block states - one for the top and one for the bottom.</p>\n<p>For example, the game only calls your block's <code>canReplace</code> function when <em>your block</em> is replaced. It doesn't call it if the player replaces the air block on top of your block because that's not your block. So you have to put one of your blocks in that spot and not try to pretend there's one when there isn't.</p>\n<p>Your block has a GUI, so it probably has a bunch of tile entity data. You will find it convenient to pick one half (e.g. the bottom) to store the data, and make the top one be a completely boring block that, when you right-click it, acts like you right-clicked the bottom one instead. And if one half sees that the other half is missing, it breaks.</p>\n"}],"owner":{"account_id":17747824,"reputation":15,"user_id":12886716,"display_name":"Captain"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":133,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76274875,"answer_count":1,"score":1,"last_activity_date":1684345514,"creation_date":1682805032,"question_id":76138601,"body_markdown":"Thank you for any help in advance and sorry if this way to simple.\r\n\r\nVersioning: MC 1.19.3, Fabric\r\nJSON is either a singular one for 2 Tall Block or a Top and Bottom Half\r\n\r\nSo i want to create a GUI displaying Block, which is 2 Blocks tall. I got the Collision working, but it&#39;s still rendering only and not interactable/eats Blocks when placed from above.\r\n\r\nI have read about Custom Entities and or Tiling (Like with doors), but nothing for something simple like my issue. \r\n\r\nMy current working Class looks as follows and works for the bottom Block. I am using the singular JSON currently.\r\n\r\n\r\n```\r\npublic class VendingMachineBlock extends Block {\r\n    private static final VoxelShape SHAPE = Block.createCuboidShape(0, 0, 0, 16, 32, 16);\r\n\r\n    public VendingMachineBlock() {\r\n        super(Settings.of(Material.METAL)\r\n                .nonOpaque()\r\n                .strength(4.0f)\r\n                .requiresTool()\r\n                .sounds(BlockSoundGroup.METAL)\r\n        );\r\n    }\r\n\r\n    public VoxelShape getOutlineShape(BlockState state, BlockView world, BlockPos pos, ShapeContext context) {\r\n        return SHAPE;\r\n    }\r\n\r\n    public VoxelShape getCollisionShape(BlockState state, BlockView world, BlockPos pos, ShapeContext context) {\r\n        return SHAPE;\r\n    }\r\n\r\n    @Override\r\n    public boolean canReplace(BlockState state, ItemPlacementContext context) {\r\n        BlockPos pos = context.getBlockPos();\r\n        if (context.getWorld().getBlockState(pos.down()).isOf(this)) {\r\n            // Prevent block placement in the top part of the VendingMachineBlock\r\n            return false;\r\n        }\r\n        return super.canReplace(state, context);\r\n    }\r\n\r\n    @Override\r\n    public ActionResult onUse(BlockState state, World world, BlockPos pos, PlayerEntity player, Hand hand, BlockHitResult hit) {\r\n        double relativeHitY = hit.getPos().y - pos.getY();\r\n        if (relativeHitY &gt; 0.5 || relativeHitY &lt; 0) {\r\n            // Player is interacting with the top or bottom part of the VendingMachineBlock\r\n            if (!world.isClient) {\r\n                player.sendMessage(Text.of(&quot;Hello, world!&quot;), false);\r\n            }\r\n            return ActionResult.SUCCESS;\r\n        }\r\n        return super.onUse(state, world, pos, player, hand, hit);\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\nI have looked at various videos and even asked Bing AI to find resources for me, but neither the official Docs nor the videos have shown a solution for this &quot;simple&quot; issue. Most of what i have found were dynamic animations of floating blocks above, or far outdated stuff.\r\n\r\nThanks again for reading and sorry if i am just unknowledged. Just trying to get startet with Java and MC Modding again.\r\n\r\nAll the best,\r\nCap","title":"2-Tall Minecraft Block with same interaction on both Blocks","body":"<p>Thank you for any help in advance and sorry if this way to simple.</p>\n<p>Versioning: MC 1.19.3, Fabric\nJSON is either a singular one for 2 Tall Block or a Top and Bottom Half</p>\n<p>So i want to create a GUI displaying Block, which is 2 Blocks tall. I got the Collision working, but it's still rendering only and not interactable/eats Blocks when placed from above.</p>\n<p>I have read about Custom Entities and or Tiling (Like with doors), but nothing for something simple like my issue.</p>\n<p>My current working Class looks as follows and works for the bottom Block. I am using the singular JSON currently.</p>\n<pre><code>public class VendingMachineBlock extends Block {\n    private static final VoxelShape SHAPE = Block.createCuboidShape(0, 0, 0, 16, 32, 16);\n\n    public VendingMachineBlock() {\n        super(Settings.of(Material.METAL)\n                .nonOpaque()\n                .strength(4.0f)\n                .requiresTool()\n                .sounds(BlockSoundGroup.METAL)\n        );\n    }\n\n    public VoxelShape getOutlineShape(BlockState state, BlockView world, BlockPos pos, ShapeContext context) {\n        return SHAPE;\n    }\n\n    public VoxelShape getCollisionShape(BlockState state, BlockView world, BlockPos pos, ShapeContext context) {\n        return SHAPE;\n    }\n\n    @Override\n    public boolean canReplace(BlockState state, ItemPlacementContext context) {\n        BlockPos pos = context.getBlockPos();\n        if (context.getWorld().getBlockState(pos.down()).isOf(this)) {\n            // Prevent block placement in the top part of the VendingMachineBlock\n            return false;\n        }\n        return super.canReplace(state, context);\n    }\n\n    @Override\n    public ActionResult onUse(BlockState state, World world, BlockPos pos, PlayerEntity player, Hand hand, BlockHitResult hit) {\n        double relativeHitY = hit.getPos().y - pos.getY();\n        if (relativeHitY &gt; 0.5 || relativeHitY &lt; 0) {\n            // Player is interacting with the top or bottom part of the VendingMachineBlock\n            if (!world.isClient) {\n                player.sendMessage(Text.of(&quot;Hello, world!&quot;), false);\n            }\n            return ActionResult.SUCCESS;\n        }\n        return super.onUse(state, world, pos, player, hand, hit);\n    }\n}\n</code></pre>\n<p>I have looked at various videos and even asked Bing AI to find resources for me, but neither the official Docs nor the videos have shown a solution for this &quot;simple&quot; issue. Most of what i have found were dynamic animations of floating blocks above, or far outdated stuff.</p>\n<p>Thanks again for reading and sorry if i am just unknowledged. Just trying to get startet with Java and MC Modding again.</p>\n<p>All the best,\nCap</p>\n"},{"tags":["java","spring","spring-boot","spring-security"],"comments":[{"owner":{"account_id":10645250,"reputation":3023,"user_id":7838169,"display_name":"badger"},"score":0,"creation_date":1649570209,"post_id":71813844,"comment_id":126906088,"body_markdown":"why you insert `XHeaderAuthenticationFilter` one time using `FilterRegistrationBean` and another time using `addFilterBefore`?","body":"why you insert <code>XHeaderAuthenticationFilter</code> one time using <code>FilterRegistrationBean</code> and another time using <code>addFilterBefore</code>?"},{"owner":{"account_id":10309761,"reputation":944,"user_id":7605967,"display_name":"Keshavram Kuduwa"},"score":0,"creation_date":1649570443,"post_id":71813844,"comment_id":126906118,"body_markdown":"@hatefalipoor I&#39;ve included the beans. I have added using FilterRegistrationBean because the filter was getting called multiple times.","body":"@hatefalipoor I&#39;ve included the beans. I have added using FilterRegistrationBean because the filter was getting called multiple times."}],"answers":[{"tags":[],"owner":{"account_id":10645250,"reputation":3023,"user_id":7838169,"display_name":"badger"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1649571126,"creation_date":1649570793,"answer_id":71814175,"question_id":71813844,"body_markdown":"The way you register `XHeaderAuthenticationFilter` in `FilterRegistrationBean` causes the problem because you yourself create the `XHeaderAuthenticationFilter` with `new` not `Spring` with all resolving DI stuff. change your code like:\r\n\r\n    @Autowired\r\n    XHeaderAuthenticationFilter xHeaderAuthenticationFilter;\r\n    \r\n    @Bean\r\n    public FilterRegistrationBean filterRegistrationBean() {\r\n    \tFilterRegistrationBean registrationBean = new FilterRegistrationBean();\r\n    \tregistrationBean.setFilter(xHeaderAuthenticationFilter);\r\n    \treturn registrationBean;\r\n    }\r\n\r\nSame applies if you want to register `XHeaderAuthenticationFilter` using `addFilterBefore`","title":"Unable to inject bean in OncePerRequestFilter","body":"<p>The way you register <code>XHeaderAuthenticationFilter</code> in <code>FilterRegistrationBean</code> causes the problem because you yourself create the <code>XHeaderAuthenticationFilter</code> with <code>new</code> not <code>Spring</code> with all resolving DI stuff. change your code like:</p>\n<pre><code>@Autowired\nXHeaderAuthenticationFilter xHeaderAuthenticationFilter;\n\n@Bean\npublic FilterRegistrationBean filterRegistrationBean() {\n    FilterRegistrationBean registrationBean = new FilterRegistrationBean();\n    registrationBean.setFilter(xHeaderAuthenticationFilter);\n    return registrationBean;\n}\n</code></pre>\n<p>Same applies if you want to register <code>XHeaderAuthenticationFilter</code> using <code>addFilterBefore</code></p>\n"},{"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1684345999,"post_id":76274861,"comment_id":134506387,"body_markdown":"If you want to do injection they need to be a bean, there is one thing you need to take care of (and this is mentioned in the documentation as well, but who reads that) that you need a `FilterRegistrationBean` if you use this only in your security filter chain.","body":"If you want to do injection they need to be a bean, there is one thing you need to take care of (and this is mentioned in the documentation as well, but who reads that) that you need a <code>FilterRegistrationBean</code> if you use this only in your security filter chain."},{"owner":{"account_id":18253860,"reputation":418,"user_id":13288265,"display_name":"jksevend"},"score":0,"creation_date":1684346957,"post_id":76274861,"comment_id":134506572,"body_markdown":"ahh so you would define a filterregistrationbean and add filters there, map them to urls without needing to call addFilter in the filterchain?","body":"ahh so you would define a filterregistrationbean and add filters there, map them to urls without needing to call addFilter in the filterchain?"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1684347781,"post_id":76274861,"comment_id":134506731,"body_markdown":"No. You would disable them with the `FilterRegistationBean` so that they don&#39;t get added to the regular filter chain. It is just the other way around.","body":"No. You would disable them with the <code>FilterRegistationBean</code> so that they don&#39;t get added to the regular filter chain. It is just the other way around."}],"tags":[],"owner":{"account_id":18253860,"reputation":418,"user_id":13288265,"display_name":"jksevend"},"comment_count":3,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1684345454,"creation_date":1684345454,"answer_id":76274861,"question_id":71813844,"body_markdown":"I don&#39;t know whether this will be relevant to you but I would avoid making your onceperrequest filters a bean. \r\n\r\nWe had a problem which took us one week to figure out that for multiple security configurations which are mapped to specific antMatchers, adding a bean filter to one security chain would also trigger the filter in another security chain. Even with with the addFilter line commented! We never called addFilter in our code yet this filter was still picked up.","title":"Unable to inject bean in OncePerRequestFilter","body":"<p>I don't know whether this will be relevant to you but I would avoid making your onceperrequest filters a bean.</p>\n<p>We had a problem which took us one week to figure out that for multiple security configurations which are mapped to specific antMatchers, adding a bean filter to one security chain would also trigger the filter in another security chain. Even with with the addFilter line commented! We never called addFilter in our code yet this filter was still picked up.</p>\n"}],"owner":{"account_id":10309761,"reputation":944,"user_id":7605967,"display_name":"Keshavram Kuduwa"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1403,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"accepted_answer_id":71814175,"answer_count":2,"score":2,"last_activity_date":1684345454,"creation_date":1649566262,"question_id":71813844,"body_markdown":"I&#39;m not being able to inject beans into my `OncePerRequestFilter`. Here&#39;s the `XHeaderAuthenticationFilter`:\r\n```java\r\n\r\n@Component\r\npublic class XHeaderAuthenticationFilter extends OncePerRequestFilter {\r\n\r\n  public XHeaderAuthenticationFilter() {\r\n    SpringBeanAutowiringSupport.processInjectionBasedOnCurrentContext(this);\r\n  }\r\n\r\n  @Autowired private JwtUtils jwtUtils; // null\r\n  @Autowired private UserService userService; // null\r\n\r\n  @Override\r\n  @SneakyThrows\r\n  protected void doFilterInternal(\r\n      HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) {\r\n\r\n    String path = request.getRequestURI();\r\n    if (new AntPathMatcher().match(&quot;/getToken&quot;, path)\r\n        || HttpMethod.OPTIONS.name().equalsIgnoreCase(request.getMethod())) {\r\n      filterChain.doFilter(request, response);\r\n      return;\r\n    }\r\n\r\n    String jwt = parseJwt(request);\r\n    jwtUtils.validateJwtToken(jwt); // NullPointerException here\r\n\r\n    // ...\r\n\r\n    filterChain.doFilter(request, response);\r\n  }\r\n}\r\n\r\n```\r\nAnd here the registration part:\r\n```java\r\n  @Bean\r\n  public FilterRegistrationBean filterRegistrationBean() {\r\n    FilterRegistrationBean registrationBean = new FilterRegistrationBean();\r\n    registrationBean.setFilter(new XHeaderAuthenticationFilter());\r\n    registrationBean.setEnabled(false);\r\n    return registrationBean;\r\n  }\r\n```\r\nI set `enabled` to false as the filter was getting called multiple times. I&#39;m new to SpringSecurity and need much exposure to the concept. I also want to add the configuration part just in case I did something wrong there:\r\n```java\r\n  @Override\r\n  protected void configure(HttpSecurity http) throws Exception {\r\n    http.cors()\r\n        .and()\r\n        .csrf()\r\n        .disable()\r\n        .sessionManagement()\r\n        .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\r\n        .and()\r\n        .authorizeRequests()\r\n        .antMatchers(&quot;/getToken&quot;)\r\n        .permitAll()\r\n        .anyRequest()\r\n        .authenticated()\r\n        .and()\r\n        .exceptionHandling()\r\n        .authenticationEntryPoint(new HttpStatusEntryPoint(HttpStatus.UNAUTHORIZED))\r\n        .and()\r\n        .addFilterBefore(\r\n            new XHeaderAuthenticationFilter(), UsernamePasswordAuthenticationFilter.class);\r\n  }\r\n```\r\n\r\nThere are a lot of fixes for this issue but none worked for me. I don&#39;t know where I&#39;m going wrong.\r\n\r\n## Update 1 ##\r\n\r\nIncluding JwtUtils:\r\n```java\r\n@Component\r\npublic class JwtUtils {\r\n\r\n  @Value(&quot;${security.jwtSecret}&quot;)\r\n  private String jwtSecret;\r\n\r\n  @Value(&quot;${security.jwtExpirationMs}&quot;)\r\n  private int jwtExpirationMs;\r\n\r\n  public String getJWTToken(String username) {}\r\n\r\n  public boolean validateJwtToken(String authToken) {}\r\n\r\n  public Claims getAllClaimsFromToken(String token) {}\r\n}\r\n\r\n```\r\nand UserService:\r\n```java\r\n@Service\r\npublic class UserServiceImpl implements UserService {\r\n\r\n  @Autowired private UserRepository userRepository;\r\n\r\n  @Override\r\n  public User saveUser(UserModel userModel) {}\r\n\r\n  @Override\r\n  public UserModel findUserByEmail(String email) {}\r\n\r\n  @Override\r\n  public UserListViewResponse findAllUsers(Specification&lt;User&gt; userSpecification, Pageable paging) {}\r\n\r\n  @Override\r\n  public UserModel deleteUser(String email) {}\r\n\r\n  private UserListViewResponse populateUserListViewResponse(Page&lt;User&gt; pagedResult) {}\r\n\r\n  private List&lt;User&gt; filterAdmins(List&lt;User&gt; userEntityList) {}\r\n```","title":"Unable to inject bean in OncePerRequestFilter","body":"<p>I'm not being able to inject beans into my <code>OncePerRequestFilter</code>. Here's the <code>XHeaderAuthenticationFilter</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n@Component\npublic class XHeaderAuthenticationFilter extends OncePerRequestFilter {\n\n  public XHeaderAuthenticationFilter() {\n    SpringBeanAutowiringSupport.processInjectionBasedOnCurrentContext(this);\n  }\n\n  @Autowired private JwtUtils jwtUtils; // null\n  @Autowired private UserService userService; // null\n\n  @Override\n  @SneakyThrows\n  protected void doFilterInternal(\n      HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) {\n\n    String path = request.getRequestURI();\n    if (new AntPathMatcher().match(&quot;/getToken&quot;, path)\n        || HttpMethod.OPTIONS.name().equalsIgnoreCase(request.getMethod())) {\n      filterChain.doFilter(request, response);\n      return;\n    }\n\n    String jwt = parseJwt(request);\n    jwtUtils.validateJwtToken(jwt); // NullPointerException here\n\n    // ...\n\n    filterChain.doFilter(request, response);\n  }\n}\n\n</code></pre>\n<p>And here the registration part:</p>\n<pre class=\"lang-java prettyprint-override\"><code>  @Bean\n  public FilterRegistrationBean filterRegistrationBean() {\n    FilterRegistrationBean registrationBean = new FilterRegistrationBean();\n    registrationBean.setFilter(new XHeaderAuthenticationFilter());\n    registrationBean.setEnabled(false);\n    return registrationBean;\n  }\n</code></pre>\n<p>I set <code>enabled</code> to false as the filter was getting called multiple times. I'm new to SpringSecurity and need much exposure to the concept. I also want to add the configuration part just in case I did something wrong there:</p>\n<pre class=\"lang-java prettyprint-override\"><code>  @Override\n  protected void configure(HttpSecurity http) throws Exception {\n    http.cors()\n        .and()\n        .csrf()\n        .disable()\n        .sessionManagement()\n        .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\n        .and()\n        .authorizeRequests()\n        .antMatchers(&quot;/getToken&quot;)\n        .permitAll()\n        .anyRequest()\n        .authenticated()\n        .and()\n        .exceptionHandling()\n        .authenticationEntryPoint(new HttpStatusEntryPoint(HttpStatus.UNAUTHORIZED))\n        .and()\n        .addFilterBefore(\n            new XHeaderAuthenticationFilter(), UsernamePasswordAuthenticationFilter.class);\n  }\n</code></pre>\n<p>There are a lot of fixes for this issue but none worked for me. I don't know where I'm going wrong.</p>\n<h2>Update 1</h2>\n<p>Including JwtUtils:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\npublic class JwtUtils {\n\n  @Value(&quot;${security.jwtSecret}&quot;)\n  private String jwtSecret;\n\n  @Value(&quot;${security.jwtExpirationMs}&quot;)\n  private int jwtExpirationMs;\n\n  public String getJWTToken(String username) {}\n\n  public boolean validateJwtToken(String authToken) {}\n\n  public Claims getAllClaimsFromToken(String token) {}\n}\n\n</code></pre>\n<p>and UserService:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\npublic class UserServiceImpl implements UserService {\n\n  @Autowired private UserRepository userRepository;\n\n  @Override\n  public User saveUser(UserModel userModel) {}\n\n  @Override\n  public UserModel findUserByEmail(String email) {}\n\n  @Override\n  public UserListViewResponse findAllUsers(Specification&lt;User&gt; userSpecification, Pageable paging) {}\n\n  @Override\n  public UserModel deleteUser(String email) {}\n\n  private UserListViewResponse populateUserListViewResponse(Page&lt;User&gt; pagedResult) {}\n\n  private List&lt;User&gt; filterAdmins(List&lt;User&gt; userEntityList) {}\n</code></pre>\n"},{"tags":["java","math","angle","trigonometry"],"comments":[{"owner":{"account_id":973998,"reputation":138710,"user_id":995876,"display_name":"Esailija"},"score":3,"creation_date":1351340859,"post_id":13100144,"comment_id":17804599,"body_markdown":"http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html","body":"<a href=\"http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html\" rel=\"nofollow noreferrer\">docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html</a>"},{"owner":{"account_id":1867252,"reputation":1795,"user_id":1690481,"accept_rate":93,"display_name":"Nitesh Verma"},"score":1,"creation_date":1375440619,"post_id":13100144,"comment_id":26345887,"body_markdown":"System.out.println(Math.round(Math.cos(Math.toRadians(90)));","body":"System.out.println(Math.round(Math.cos(Math.toRadians(90)));"},{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":0,"creation_date":1684439488,"post_id":13100144,"comment_id":134521727,"body_markdown":"I’m voting to close this question because this is how floating point arithmetic works.  https://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html","body":"I’m voting to close this question because this is how floating point arithmetic works.  <a href=\"https://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html\" rel=\"nofollow noreferrer\">docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html</a>"}],"answers":[{"comments":[{"owner":{"account_id":408372,"reputation":8732,"user_id":778990,"display_name":"ignis"},"score":2,"creation_date":1351341007,"post_id":13100168,"comment_id":17804626,"body_markdown":"That&#39;s the expected IEEE 574 floating point behavior, I wouldn&#39;t call it an &#39;&#39;issue&#39;&#39;. See Esailija&#39;s comment.","body":"That&#39;s the expected IEEE 574 floating point behavior, I wouldn&#39;t call it an &#39;&#39;issue&#39;&#39;. See Esailija&#39;s comment."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":1,"creation_date":1351341197,"post_id":13100168,"comment_id":17804668,"body_markdown":"@ignis The value of Math.cos() is required to be within 1ulp of the correct result. No amount of Goldberg can explain that away.","body":"@ignis The value of Math.cos() is required to be within 1ulp of the correct result. No amount of Goldberg can explain that away."},{"owner":{"display_name":"user85109"},"score":1,"creation_date":1351343266,"post_id":13100168,"comment_id":17805087,"body_markdown":"While I did not vote down your answer, I think the downvote comes from how you stated it. By implying this is an &quot;issue&quot;, a loss of precision, as opposed to the expected result working with floating point arithmetic, you confuse things.","body":"While I did not vote down your answer, I think the downvote comes from how you stated it. By implying this is an &quot;issue&quot;, a loss of precision, as opposed to the expected result working with floating point arithmetic, you confuse things."},{"owner":{"account_id":633608,"reputation":32281,"user_id":391554,"accept_rate":93,"display_name":"Dan D."},"score":0,"creation_date":1351343500,"post_id":13100168,"comment_id":17805131,"body_markdown":"OK, it&#39;s not an issue, I removed the word and explained it a little bit differently.","body":"OK, it&#39;s not an issue, I removed the word and explained it a little bit differently."}],"tags":[],"owner":{"account_id":633608,"reputation":32281,"user_id":391554,"accept_rate":93,"display_name":"Dan D."},"comment_count":4,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1351343440,"creation_date":1351340818,"answer_id":13100168,"question_id":13100144,"body_markdown":"The value is very close to the correct result. It seems like a loss of precision in the floating point operations of transforming degrees to radians.\r\n","title":"Java Math.cos(Math.toRadians(&lt;angle&gt;)) returns weird values","body":"<p>The value is very close to the correct result. It seems like a loss of precision in the floating point operations of transforming degrees to radians.</p>\n"},{"comments":[{"owner":{"account_id":1900362,"reputation":19274,"user_id":1716339,"display_name":"Aki Suihkonen"},"score":0,"creation_date":1351341033,"post_id":13100182,"comment_id":17804629,"body_markdown":"cos x-pi/2 = sin x ~= x at smaller values and unfortunately 90/180*pi - just that much off of the actual value of pi/2.","body":"cos x-pi/2 = sin x ~= x at smaller values and unfortunately 90/180*pi - just that much off of the actual value of pi/2."}],"tags":[],"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1351340915,"creation_date":1351340915,"answer_id":13100182,"question_id":13100144,"body_markdown":"See the Javadoc. &quot;The conversion from degrees to radians is generally inexact.&quot;","title":"Java Math.cos(Math.toRadians(&lt;angle&gt;)) returns weird values","body":"<p>See the Javadoc. \"The conversion from degrees to radians is generally inexact.\"</p>\n"},{"tags":[],"owner":{"account_id":1900362,"reputation":19274,"user_id":1716339,"display_name":"Aki Suihkonen"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1351341292,"creation_date":1351341292,"answer_id":13100229,"question_id":13100144,"body_markdown":"From trigonometry:\r\n\r\n    sin x ~= x, for small values of x\r\n    sin x = cos x+pi/2\r\n\r\nBecause pi/2 can&#39;t be represented exactly in IEEE-754 Floating point, it means, that it must be off by some value x, i.e it is represented by pi/2 +- x, where x &lt; the least significant bit in the floating point system. Which in this case is 2^-53 = 1.1102e-16.\r\n\r\nIn this particular case x ~= 6.123233995736766E-17, which is about 55% of the maximum error.\r\nSo, it&#39;s a rather good result...\r\n\r\n\r\n","title":"Java Math.cos(Math.toRadians(&lt;angle&gt;)) returns weird values","body":"<p>From trigonometry:</p>\n\n<pre><code>sin x ~= x, for small values of x\nsin x = cos x+pi/2\n</code></pre>\n\n<p>Because pi/2 can't be represented exactly in IEEE-754 Floating point, it means, that it must be off by some value x, i.e it is represented by pi/2 +- x, where x &lt; the least significant bit in the floating point system. Which in this case is 2^-53 = 1.1102e-16.</p>\n\n<p>In this particular case x ~= 6.123233995736766E-17, which is about 55% of the maximum error.\nSo, it's a rather good result...</p>\n"},{"tags":[],"owner":{"display_name":"user85109"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1351348615,"creation_date":1351348615,"answer_id":13101100,"question_id":13100144,"body_markdown":"Standing temporarily on a soapbox, I think people are confused about the concepts of [accuracy versus precision][1]. Is this an issue as some have said? Is it a problem? A bug? Or is it an expected behavior of floating point arithmetic?\r\n\r\n90 degrees is a number that is representable perfectly as an integer, even though a double. But pi/2 radians is a real number that is not represented exactly, so that representation will be slightly inaccurate. The loss is in accuracy. The fact is, this is expected behavior. We should never trust the least significant bits of a result.\r\n\r\nNext, when we compute the value of a trigonometric function, there MAY be an additional loss of accuracy. We don&#39;t get exactly the result that we know to be true in a symbolic sense. Thus sin(pi/3) may not be exactly sqrt(3)/2, but then we can&#39;t represent sqrt(3)/2 exactly anyway. All of this is expected, and is behavior that should be dealt with by good code, not trusting the LSBs of those numbers.\r\n\r\n  [1]: http://www.mathsisfun.com/accuracy-precision.html","title":"Java Math.cos(Math.toRadians(&lt;angle&gt;)) returns weird values","body":"<p>Standing temporarily on a soapbox, I think people are confused about the concepts of <a href=\"http://www.mathsisfun.com/accuracy-precision.html\" rel=\"nofollow\">accuracy versus precision</a>. Is this an issue as some have said? Is it a problem? A bug? Or is it an expected behavior of floating point arithmetic?</p>\n\n<p>90 degrees is a number that is representable perfectly as an integer, even though a double. But pi/2 radians is a real number that is not represented exactly, so that representation will be slightly inaccurate. The loss is in accuracy. The fact is, this is expected behavior. We should never trust the least significant bits of a result.</p>\n\n<p>Next, when we compute the value of a trigonometric function, there MAY be an additional loss of accuracy. We don't get exactly the result that we know to be true in a symbolic sense. Thus sin(pi/3) may not be exactly sqrt(3)/2, but then we can't represent sqrt(3)/2 exactly anyway. All of this is expected, and is behavior that should be dealt with by good code, not trusting the LSBs of those numbers.</p>\n"},{"tags":[],"owner":{"account_id":28622205,"reputation":1,"user_id":21915007,"display_name":"Rajiv Shah"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684344199,"creation_date":1684344199,"answer_id":76274696,"question_id":13100144,"body_markdown":"As value of PI is irrational because of that value of trigonometry function giving approximate value. For precise value in calculator use this:\r\n\r\npublic class MyClass {\r\n    public static void main(String args[]) {\r\n      \r\n      double b1=Math.cos(Math.toRadians(90));\r\n      //approximate value \r\n      System.out.println(b1);\r\n      //exact value   System.out.println(String.format(&quot;%.15f&quot;,b1));\r\n      // I recommend you to using it upto 15f for precisely value\r\n      double b2=Math.sin(Math.toRadians(30));\r\n      //approximate value \r\n      System.out.println(b2);\r\n      //exact value\r\n      System.out.println(String.format(&quot;%.15f&quot;,b2));\r\n    }\r\n}","title":"Java Math.cos(Math.toRadians(&lt;angle&gt;)) returns weird values","body":"<p>As value of PI is irrational because of that value of trigonometry function giving approximate value. For precise value in calculator use this:</p>\n<p>public class MyClass {\npublic static void main(String args[]) {</p>\n<pre><code>  double b1=Math.cos(Math.toRadians(90));\n  //approximate value \n  System.out.println(b1);\n  //exact value   System.out.println(String.format(&quot;%.15f&quot;,b1));\n  // I recommend you to using it upto 15f for precisely value\n  double b2=Math.sin(Math.toRadians(30));\n  //approximate value \n  System.out.println(b2);\n  //exact value\n  System.out.println(String.format(&quot;%.15f&quot;,b2));\n}\n</code></pre>\n<p>}</p>\n"}],"owner":{"account_id":1536892,"reputation":17,"user_id":1432679,"accept_rate":100,"display_name":"user1432679"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5628,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":13100229,"answer_count":5,"score":-1,"last_activity_date":1684344199,"creation_date":1351340591,"question_id":13100144,"body_markdown":"I&#39;ve got a little Problem with the `Math.cos()` method. I know, I have to convert the angle to Radians before using `Math.cos()`. But if I just do:\r\n\r\n    System.out.println(Math.cos(Math.toRadians(90));\r\n\r\nIt outputs: 6.123233995736766E-17\r\n\r\n`Math.sin()` is working well.","title":"Java Math.cos(Math.toRadians(&lt;angle&gt;)) returns weird values","body":"<p>I've got a little Problem with the <code>Math.cos()</code> method. I know, I have to convert the angle to Radians before using <code>Math.cos()</code>. But if I just do:</p>\n\n<pre><code>System.out.println(Math.cos(Math.toRadians(90));\n</code></pre>\n\n<p>It outputs: 6.123233995736766E-17</p>\n\n<p><code>Math.sin()</code> is working well.</p>\n"},{"tags":["java","sorting","arraylist"],"comments":[{"owner":{"account_id":13170666,"reputation":78679,"user_id":9513184,"display_name":"Unmitigated"},"score":1,"creation_date":1684341660,"post_id":76274356,"comment_id":134505449,"body_markdown":"Please explain clearly what you are trying to do. What is the exact problem description?","body":"Please explain clearly what you are trying to do. What is the exact problem description?"},{"owner":{"account_id":1976379,"reputation":608,"user_id":1774084,"display_name":"M. Yousfi"},"score":1,"creation_date":1684341780,"post_id":76274356,"comment_id":134505468,"body_markdown":"This is not obvious how you want to sort the remainingList ? please clarify what you want to achieve.","body":"This is not obvious how you want to sort the remainingList ? please clarify what you want to achieve."},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1684342685,"post_id":76274356,"comment_id":134505664,"body_markdown":"You&#39;re using `k &lt; list.size() - 1` as the condition of your for-loop, are you sure you want the `- 1`?","body":"You&#39;re using <code>k &lt; list.size() - 1</code> as the condition of your for-loop, are you sure you want the <code>- 1</code>?"},{"owner":{"account_id":28557053,"reputation":1,"user_id":21861111,"display_name":"MaFiore"},"score":0,"creation_date":1684342825,"post_id":76274356,"comment_id":134505698,"body_markdown":"it is a card game , i have my Players Object inside an ArrayList&lt;Players&gt;.\nat the end of a round i have to remove the winning player and let other player keep doing a last round, following the order","body":"it is a card game , i have my Players Object inside an ArrayList&lt;Players&gt;. at the end of a round i have to remove the winning player and let other player keep doing a last round, following the order"},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1684342906,"post_id":76274356,"comment_id":134505714,"body_markdown":"So, you&#39;re looking to place any players before the removed player, to the end of the list?","body":"So, you&#39;re looking to place any players before the removed player, to the end of the list?"},{"owner":{"account_id":28557053,"reputation":1,"user_id":21861111,"display_name":"MaFiore"},"score":0,"creation_date":1684343027,"post_id":76274356,"comment_id":134505732,"body_markdown":"@Reilas that&#39;s what i wanted to ask, thank you. I m&#39;not that good at summarizing :)","body":"@Reilas that&#39;s what i wanted to ask, thank you. I m&#39;not that good at summarizing :)"}],"answers":[{"tags":[],"owner":{"account_id":9190353,"reputation":457,"user_id":6831116,"display_name":"Gopinath Radhakrishnan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684343303,"creation_date":1684343303,"answer_id":76274579,"question_id":76274356,"body_markdown":"Instead of creating too many variable to track your iteration, creating new List from existing using subList method might be efficient. For sake of simplicity, I am taking list of integer below:\r\n\r\n```\r\nList&lt;Integer&gt; integerList = List.of(1,2,3,4,5);\r\nInteger objToRemove = 5;\r\nint removeObjectIndex = integerList.indexOf(objToRemove);\r\nList&lt;Integer&gt; finalList = new ArrayList&lt;&gt;(integerList.subList(removeObjectIndex + 1, integerList.size()));\r\nfinalList.addAll(integerList.subList(0, removeObjectIndex));\r\nSystem.out.println(finalList);\r\n```","title":"ArrayList sorting after remove a specific item","body":"<p>Instead of creating too many variable to track your iteration, creating new List from existing using subList method might be efficient. For sake of simplicity, I am taking list of integer below:</p>\n<pre><code>List&lt;Integer&gt; integerList = List.of(1,2,3,4,5);\nInteger objToRemove = 5;\nint removeObjectIndex = integerList.indexOf(objToRemove);\nList&lt;Integer&gt; finalList = new ArrayList&lt;&gt;(integerList.subList(removeObjectIndex + 1, integerList.size()));\nfinalList.addAll(integerList.subList(0, removeObjectIndex));\nSystem.out.println(finalList);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684344039,"creation_date":1684344039,"answer_id":76274675,"question_id":76274356,"body_markdown":"This will remove the specified player, and place any players that were before that player, to the end of the list.\r\n\r\nKeep in mind, this presumes that `player` exists.\r\n\r\n```java\r\nvoid removePlayer(Players player) {\r\n    int indexOf = list.indexOf(player);\r\n    List&lt;Players&gt; sublist = new ArrayList&lt;&gt;(list.subList(0, indexOf));\r\n    remainingList = new ArrayList&lt;&gt;(list);\r\n    Iterator&lt;Players&gt; iterator = remainingList.iterator();\r\n    int index = 0;\r\n    while (iterator.hasNext() &amp;&amp; index &lt;= indexOf) {\r\n        iterator.next();\r\n        iterator.remove();\r\n        index++;\r\n    }\r\n    remainingList.addAll(sublist);\r\n}\r\n```","title":"ArrayList sorting after remove a specific item","body":"<p>This will remove the specified player, and place any players that were before that player, to the end of the list.</p>\n<p>Keep in mind, this presumes that <code>player</code> exists.</p>\n<pre class=\"lang-java prettyprint-override\"><code>void removePlayer(Players player) {\n    int indexOf = list.indexOf(player);\n    List&lt;Players&gt; sublist = new ArrayList&lt;&gt;(list.subList(0, indexOf));\n    remainingList = new ArrayList&lt;&gt;(list);\n    Iterator&lt;Players&gt; iterator = remainingList.iterator();\n    int index = 0;\n    while (iterator.hasNext() &amp;&amp; index &lt;= indexOf) {\n        iterator.next();\n        iterator.remove();\n        index++;\n    }\n    remainingList.addAll(sublist);\n}\n</code></pre>\n"}],"owner":{"account_id":28557053,"reputation":1,"user_id":21861111,"display_name":"MaFiore"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1684344039,"creation_date":1684341551,"question_id":76274356,"body_markdown":"i need to sort the elements of an ArrayList&lt;Object&gt; oredering from the elements who is next to the removed one.\r\n\r\nsomethink like this:\r\n\r\nif i have\r\nArraylist&lt;Object&gt; list = [ obj1 , obj2 , obj3, obj4 ]\r\n\r\nand i remove from the list obj2, i have to remain with a list ordered like this:\r\n\r\nArraylist&lt;Object&gt; remainingList = [ obj3, obj4, obj1  ]\r\n\r\ni tryed a for cycle with 2 variables that iterates list.size()-1 times\r\nobj is the element i dont need in remainingLIst \r\n\r\n\t\r\n\r\n       for(int i=list.indexOf(obj),  k= 0 ; k&lt;list.size()-1; k++)\r\n\t\t{\r\n\t\t\tif (i==giocatori.size()) i=0;\r\n\t\t\telse i++;\r\n\t\t\tremainingList.add(List.get(i));\r\n\t\t}\r\n\r\n\r\n\r\nis there a more efficent way to to this?\r\n\t\t","title":"ArrayList sorting after remove a specific item","body":"<p>i need to sort the elements of an ArrayList oredering from the elements who is next to the removed one.</p>\n<p>somethink like this:</p>\n<p>if i have\nArraylist list = [ obj1 , obj2 , obj3, obj4 ]</p>\n<p>and i remove from the list obj2, i have to remain with a list ordered like this:</p>\n<p>Arraylist remainingList = [ obj3, obj4, obj1  ]</p>\n<p>i tryed a for cycle with 2 variables that iterates list.size()-1 times\nobj is the element i dont need in remainingLIst</p>\n<pre><code>   for(int i=list.indexOf(obj),  k= 0 ; k&lt;list.size()-1; k++)\n    {\n        if (i==giocatori.size()) i=0;\n        else i++;\n        remainingList.add(List.get(i));\n    }\n</code></pre>\n<p>is there a more efficent way to to this?</p>\n"},{"tags":["java","spring","spring-boot","configuration-files"],"comments":[{"owner":{"account_id":357760,"reputation":1492,"user_id":2304483,"display_name":"user2304483"},"score":0,"creation_date":1684466940,"post_id":76274551,"comment_id":134524893,"body_markdown":"I can&#39;t understand what you want to do, you have properties file with values and you want to access these properties in the code ?","body":"I can&#39;t understand what you want to do, you have properties file with values and you want to access these properties in the code ?"},{"owner":{"account_id":8415969,"reputation":45,"user_id":6316404,"display_name":"Kostov"},"score":0,"creation_date":1684743140,"post_id":76274551,"comment_id":134555872,"body_markdown":"Hi, thanks for the response!\nWhat I&#39;m trying to do is to keep my application.properties absolutely clean, without any properties there. With most of the cases until now, I&#39;m able to find a way to expose the specific configuration bean, instead of writing into the properties file, but I found it very difficult for some conf beans, as I&#39;m unable to &#39;browse&#39; all of the spring beans. So I&#39;m searching a universal way to configure these properties, without adding them to app.properties file. \nThanks!","body":"Hi, thanks for the response! What I&#39;m trying to do is to keep my application.properties absolutely clean, without any properties there. With most of the cases until now, I&#39;m able to find a way to expose the specific configuration bean, instead of writing into the properties file, but I found it very difficult for some conf beans, as I&#39;m unable to &#39;browse&#39; all of the spring beans. So I&#39;m searching a universal way to configure these properties, without adding them to app.properties file.  Thanks!"}],"owner":{"account_id":8415969,"reputation":45,"user_id":6316404,"display_name":"Kostov"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":103,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684343058,"creation_date":1684343058,"question_id":76274551,"body_markdown":"In our team, we agreed that we are gonna use all of the configurations as a code (let&#39;s Say AppConfiguration class) i.e :\r\n```\r\n@Value(&quot;${spring.datasource.url:jdbc:postgresql://localhost:5432/postgres}&quot;);\r\nprivate String jdbcUrl;\r\n```\r\nand later use them to configure beans with this value:\r\n```\r\n@Bean\r\n@Primary\r\n@ConfigurationProperties(prefix = &quot;spring.datasource.configuration&quot;)\r\npublic DataSource teamDataSource() {\r\n        return dataSourceProperties().initializeDataSourceBuilder().build();\r\n}\r\n\r\n@Bean\r\n@Primary\r\npublic DataSourceProperties telemetryControlServiceDataSourceProperties() {\r\n    DataSourceProperties dataSourceProperties = new DataSourceProperties();\r\n    dataSourceProperties.setUrl(appConfig.getJdbcUrl());\r\n....\r\n    return dataSourceProperties;\r\n}\r\n```\r\n\r\n\r\n**My Question:**\r\nAs configuration properties rise, I can&#39;t put anything in application.properties files per our agreement, and I have to search for pojos for @ConfigurationProperties which I could not find sometimes. Is there a general/universal way for exposing all kinds of configuration properties from applications.properties?\r\nI.e I&#39;m able to find some of the actuator properties, but most of them I cannot:\r\n\r\n```\r\nmanagement.endpoints.web.base-path=/debug\r\nmanagement.endpoints.web.exposure.include=*\r\nmanagement.endpoints.web.exposure.exclude=env,beans\r\nmanagement.endpoint.health.show-details=always\r\nmanagement.endpoint.metrics.enabled=true\r\nmanagement.endpoint.prometheus.enabled=true\r\nmanagement.endpoint.loggers.enabled=true\r\n```","title":"How to replace application.properties entries and expose them as a code or bean","body":"<p>In our team, we agreed that we are gonna use all of the configurations as a code (let's Say AppConfiguration class) i.e :</p>\n<pre><code>@Value(&quot;${spring.datasource.url:jdbc:postgresql://localhost:5432/postgres}&quot;);\nprivate String jdbcUrl;\n</code></pre>\n<p>and later use them to configure beans with this value:</p>\n<pre><code>@Bean\n@Primary\n@ConfigurationProperties(prefix = &quot;spring.datasource.configuration&quot;)\npublic DataSource teamDataSource() {\n        return dataSourceProperties().initializeDataSourceBuilder().build();\n}\n\n@Bean\n@Primary\npublic DataSourceProperties telemetryControlServiceDataSourceProperties() {\n    DataSourceProperties dataSourceProperties = new DataSourceProperties();\n    dataSourceProperties.setUrl(appConfig.getJdbcUrl());\n....\n    return dataSourceProperties;\n}\n</code></pre>\n<p><strong>My Question:</strong>\nAs configuration properties rise, I can't put anything in application.properties files per our agreement, and I have to search for pojos for @ConfigurationProperties which I could not find sometimes. Is there a general/universal way for exposing all kinds of configuration properties from applications.properties?\nI.e I'm able to find some of the actuator properties, but most of them I cannot:</p>\n<pre><code>management.endpoints.web.base-path=/debug\nmanagement.endpoints.web.exposure.include=*\nmanagement.endpoints.web.exposure.exclude=env,beans\nmanagement.endpoint.health.show-details=always\nmanagement.endpoint.metrics.enabled=true\nmanagement.endpoint.prometheus.enabled=true\nmanagement.endpoint.loggers.enabled=true\n</code></pre>\n"},{"tags":["java","object","inheritance"],"comments":[{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":2,"creation_date":1684342719,"post_id":76274470,"comment_id":134505672,"body_markdown":"because that is one of the main features of Object Oriented programming - since `Derived` is extending `Base`, it has all members of `Base` (and eventually some more), so it can be used as `Base`. (Maybe better example `Cat` extends `Animal` , so I can assign an instance of `Cat` to a variable of type `Animal` - a `Cat` is an `Animal` (and some more specific characteristics)","body":"because that is one of the main features of Object Oriented programming - since <code>Derived</code> is extending <code>Base</code>, it has all members of <code>Base</code> (and eventually some more), so it can be used as <code>Base</code>. (Maybe better example <code>Cat</code> extends <code>Animal</code> , so I can assign an instance of <code>Cat</code> to a variable of type <code>Animal</code> - a <code>Cat</code> is an <code>Animal</code> (and some more specific characteristics)"},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":0,"creation_date":1684343818,"post_id":76274470,"comment_id":134505898,"body_markdown":"&quot;Why is java allowing me to assign a reference of child to base class&quot;  Because you&#39;re allowed to do this in Java.","body":"&quot;Why is java allowing me to assign a reference of child to base class&quot;  Because you&#39;re allowed to do this in Java."},{"owner":{"account_id":5998820,"reputation":12676,"user_id":4712734,"display_name":"DuncG"},"score":0,"creation_date":1684429475,"post_id":76274470,"comment_id":134519711,"body_markdown":"Your final example won&#39;t compile, you cannot call `b.poo();` via `Base b`","body":"Your final example won&#39;t compile, you cannot call <code>b.poo();</code> via <code>Base b</code>"}],"answers":[{"comments":[{"owner":{"account_id":15437885,"reputation":39,"user_id":11137450,"display_name":"Goutham"},"score":0,"creation_date":1684345811,"post_id":76274536,"comment_id":134506328,"body_markdown":"I&#39;m getting how it can be done / the features java is providing for this approach.Is there a reason why programmers generally use this approach.","body":"I&#39;m getting how it can be done / the features java is providing for this approach.Is there a reason why programmers generally use this approach."},{"owner":{"account_id":15437885,"reputation":39,"user_id":11137450,"display_name":"Goutham"},"score":0,"creation_date":1684345943,"post_id":76274536,"comment_id":134506371,"body_markdown":"cant they use the Derived reference instead of using the base class reference. I mean Isn&#39;t it restricting the access only to the variables or methods available in base class ?","body":"cant they use the Derived reference instead of using the base class reference. I mean Isn&#39;t it restricting the access only to the variables or methods available in base class ?"}],"tags":[],"owner":{"account_id":13170666,"reputation":78679,"user_id":9513184,"display_name":"Unmitigated"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1684342906,"creation_date":1684342906,"answer_id":76274536,"question_id":76274470,"body_markdown":"This is called [polymorphism](https://en.wikipedia.org/wiki/Polymorphism_(computer_science)). Any derived class can necessarily be considered an instance of a parent class (without explicit casting). \r\n\r\nThe methods you can call and fields you can access depend on the static type of the object. In the case of `Base b = new Derived();`, the static type of `b` is `Base`, so you can only call methods visible on `Base`. New methods defined in `Derived` cannot be used.","title":"Why is the compiler not throwing error when Assigning object of sub class to parent reference","body":"<p>This is called <a href=\"https://en.wikipedia.org/wiki/Polymorphism_(computer_science)\" rel=\"nofollow noreferrer\">polymorphism</a>. Any derived class can necessarily be considered an instance of a parent class (without explicit casting).</p>\n<p>The methods you can call and fields you can access depend on the static type of the object. In the case of <code>Base b = new Derived();</code>, the static type of <code>b</code> is <code>Base</code>, so you can only call methods visible on <code>Base</code>. New methods defined in <code>Derived</code> cannot be used.</p>\n"}],"owner":{"account_id":15437885,"reputation":39,"user_id":11137450,"display_name":"Goutham"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76274536,"answer_count":1,"score":0,"last_activity_date":1684342906,"creation_date":1684342412,"question_id":76274470,"body_markdown":"```\r\nclass Base {\r\n\tpublic void show() {\r\n\t\tSystem.out.println(&quot;Base class show() method called&quot;);\r\n\t}\r\n}\r\n\r\nclass Derived extends Base {\r\n\tpublic void show() {\r\n\t\tSystem.out.println(&quot;Derived class show () method called&quot;);\r\n\t}\r\n}\r\n\r\npublic class Main {\r\npublic static void main(String[] args) {\r\n\tBase b = new Derived();//why is java allowing me to create an object of child class\r\n\tb.show();              //how can the Base class hold and use the reference of child\r\n\t}                              \r\n}\r\n```\r\n\r\n\r\nWhat if I create an new method in the child class ??\r\nWill the parent class still be able to access the new method ??\r\n\r\n```\r\nclass Derived extends Base {\r\n\tpublic void show() {\r\n\t\tSystem.out.println(&quot;Derived class show () method called&quot;);\r\n\t}\r\n\tpublic void poo() {\r\n\t\tSystem.out.println(&quot;take a poo&quot;);\r\n\t}\r\n}\r\n\r\npublic class Main {\r\npublic static void main(String[] args) {\r\n\tBase b = new Derived();\r\n\tb.show();   \r\n        b.poo(); \r\n\t}                              \r\n}\r\n```\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nWhy is java allowing me to assign a reference of child to base class and not throwing any warnings or errors.","title":"Why is the compiler not throwing error when Assigning object of sub class to parent reference","body":"<pre><code>class Base {\n    public void show() {\n        System.out.println(&quot;Base class show() method called&quot;);\n    }\n}\n\nclass Derived extends Base {\n    public void show() {\n        System.out.println(&quot;Derived class show () method called&quot;);\n    }\n}\n\npublic class Main {\npublic static void main(String[] args) {\n    Base b = new Derived();//why is java allowing me to create an object of child class\n    b.show();              //how can the Base class hold and use the reference of child\n    }                              \n}\n</code></pre>\n<p>What if I create an new method in the child class ??\nWill the parent class still be able to access the new method ??</p>\n<pre><code>class Derived extends Base {\n    public void show() {\n        System.out.println(&quot;Derived class show () method called&quot;);\n    }\n    public void poo() {\n        System.out.println(&quot;take a poo&quot;);\n    }\n}\n\npublic class Main {\npublic static void main(String[] args) {\n    Base b = new Derived();\n    b.show();   \n        b.poo(); \n    }                              \n}\n</code></pre>\n<p>Why is java allowing me to assign a reference of child to base class and not throwing any warnings or errors.</p>\n"},{"tags":["java","arrays","oop","object"],"comments":[{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":4,"creation_date":1491495993,"post_id":43260752,"comment_id":73590219,"body_markdown":"Pretty much you have to iterate.  You can use streams but for small lists they are not efficient.","body":"Pretty much you have to iterate.  You can use streams but for small lists they are not efficient."},{"owner":{"account_id":2386596,"reputation":644,"user_id":3767398,"display_name":"matfax"},"score":3,"creation_date":1491496145,"post_id":43260752,"comment_id":73590327,"body_markdown":"You are using an imperative language. Therefore, explicit iterations are the way to go. If you don&#39;t like writing loops, go with a functional language such as Scala. There you could use a simple one-liner and have it.","body":"You are using an imperative language. Therefore, explicit iterations are the way to go. If you don&#39;t like writing loops, go with a functional language such as Scala. There you could use a simple one-liner and have it."},{"owner":{"display_name":"user7158855"},"score":0,"creation_date":1491496253,"post_id":43260752,"comment_id":73590395,"body_markdown":"Could you elaborate more on the difference between the two, perhaps as an answer?","body":"Could you elaborate more on the difference between the two, perhaps as an answer?"},{"owner":{"account_id":3156329,"reputation":5805,"user_id":2668666,"accept_rate":76,"display_name":"jmrah"},"score":0,"creation_date":1491496534,"post_id":43260752,"comment_id":73590590,"body_markdown":"@MatthiasFax, you do not need to explicitly iterate if using Java 8&#39;s streaming API, which is functional in nature.","body":"@MatthiasFax, you do not need to explicitly iterate if using Java 8&#39;s streaming API, which is functional in nature."},{"owner":{"account_id":2386596,"reputation":644,"user_id":3767398,"display_name":"matfax"},"score":0,"creation_date":1491496888,"post_id":43260752,"comment_id":73590810,"body_markdown":"@jrahhali Yes, you can use streams, but they are not performant. Java is not made for it, the Streaming API is just built &quot;around&quot;, not from the bottom up. They are not performant and in my view also ugly and difficult to read.","body":"@jrahhali Yes, you can use streams, but they are not performant. Java is not made for it, the Streaming API is just built &quot;around&quot;, not from the bottom up. They are not performant and in my view also ugly and difficult to read."},{"owner":{"account_id":3156329,"reputation":5805,"user_id":2668666,"accept_rate":76,"display_name":"jmrah"},"score":1,"creation_date":1491497146,"post_id":43260752,"comment_id":73590990,"body_markdown":"@MatthiasFax, I agree with you that the streaming API is built around the core language and not from the bottom up, but it does allow you to use functional idioms, and therefore, not have to explicit iterate.  The &#39;explicit iterating&#39; was the only point I was addressing.","body":"@MatthiasFax, I agree with you that the streaming API is built around the core language and not from the bottom up, but it does allow you to use functional idioms, and therefore, not have to explicit iterate.  The &#39;explicit iterating&#39; was the only point I was addressing."}],"answers":[{"tags":[],"owner":{"account_id":6975617,"reputation":676,"user_id":5350482,"accept_rate":75,"display_name":"ZhenyaM"},"comment_count":0,"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1491496133,"creation_date":1491496133,"answer_id":43260835,"question_id":43260752,"body_markdown":"java 8:\r\n \r\n    String[] names = Arrays.asStream(people).map(Person::getName).asArray(String[]::new);","title":"Java - Easiest way to get single property from each object in a list/array?","body":"<p>java 8:</p>\n\n<pre><code>String[] names = Arrays.asStream(people).map(Person::getName).asArray(String[]::new);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"score":0,"creation_date":1491497570,"post_id":43260942,"comment_id":73591298,"body_markdown":"Since OP would accept `List` as result type (*&quot;For example, to create an array or **list** of just names or hair color&quot;*), a for-each loop adding to a `List&lt;String&gt;` would be another nice option to show, for completeness, i.e. `for (Person p : people) { names.add(p.name); }`","body":"Since OP would accept <code>List</code> as result type (<i>&quot;For example, to create an array or <b>list</b> of just names or hair color&quot;</i>), a for-each loop adding to a <code>List&lt;String&gt;</code> would be another nice option to show, for completeness, i.e. <code>for (Person p : people) { names.add(p.name); }</code>"},{"owner":{"account_id":6854823,"reputation":6160,"user_id":5270744,"accept_rate":76,"display_name":"m_callens"},"score":0,"creation_date":1491497792,"post_id":43260942,"comment_id":73591431,"body_markdown":"@Andreas ah yup! I was gunna do a `List&lt;String&gt;` initially but didn&#39;t notice that in the question","body":"@Andreas ah yup! I was gunna do a <code>List&lt;String&gt;</code> initially but didn&#39;t notice that in the question"}],"tags":[],"owner":{"account_id":6854823,"reputation":6160,"user_id":5270744,"accept_rate":76,"display_name":"m_callens"},"comment_count":2,"down_vote_count":0,"up_vote_count":11,"is_accepted":true,"score":11,"last_activity_date":1491497857,"creation_date":1491496425,"answer_id":43260942,"question_id":43260752,"body_markdown":"Two options:\r\n\r\n1. Iteration\r\n2. Streams (*Java 8*)\r\n\r\n*__Iteration__*\r\n\r\n    List&lt;String&gt; names = new ArrayList&lt;&gt;();\r\n    for (Person p : people) {\r\n        names.add(p.name);\r\n    }\r\n\r\n*__Streams__*\r\n\r\n    String[] names = Arrays.stream(people).map(p -&gt; p.name).toArray(size -&gt; new String[people.length]);","title":"Java - Easiest way to get single property from each object in a list/array?","body":"<p>Two options:</p>\n\n<ol>\n<li>Iteration</li>\n<li>Streams (<em>Java 8</em>)</li>\n</ol>\n\n<p><em><strong>Iteration</strong></em></p>\n\n<pre><code>List&lt;String&gt; names = new ArrayList&lt;&gt;();\nfor (Person p : people) {\n    names.add(p.name);\n}\n</code></pre>\n\n<p><em><strong>Streams</strong></em></p>\n\n<pre><code>String[] names = Arrays.stream(people).map(p -&gt; p.name).toArray(size -&gt; new String[people.length]);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2386596,"reputation":644,"user_id":3767398,"display_name":"matfax"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1491499535,"creation_date":1491498973,"answer_id":43261794,"question_id":43260752,"body_markdown":"You are seeking a functional feature in an initially imperative-only language Java. As already mentioned in other answers, since Java 8, you also have functional elements (e.g., streams). However, they are not yet recommended to be used. This [blog post][1] explains the disadvantages of streams over loops (i.e., performance, readability, maintainability).\r\n\r\nIf you are looking for functional and safe code without such major implications, try Scala:\r\n\r\n    case class Person(name: String)\r\n    val persons = Array(Person(&quot;george&quot;), Person(&quot;michael&quot;), Person(&quot;dexter&quot;))\r\n    val personNames = persons.map(_.name)\r\n\r\nThe main difference is that this Scala code is simple to read and it is comparably performant as a Java code that uses a loop because the translated Scala-to-Java code uses a while loop internally.\r\n\r\n  [1]: https://blog.jooq.org/2015/12/08/3-reasons-why-you-shouldnt-replace-your-for-loops-by-stream-foreach/","title":"Java - Easiest way to get single property from each object in a list/array?","body":"<p>You are seeking a functional feature in an initially imperative-only language Java. As already mentioned in other answers, since Java 8, you also have functional elements (e.g., streams). However, they are not yet recommended to be used. This <a href=\"https://blog.jooq.org/2015/12/08/3-reasons-why-you-shouldnt-replace-your-for-loops-by-stream-foreach/\" rel=\"nofollow noreferrer\">blog post</a> explains the disadvantages of streams over loops (i.e., performance, readability, maintainability).</p>\n\n<p>If you are looking for functional and safe code without such major implications, try Scala:</p>\n\n<pre><code>case class Person(name: String)\nval persons = Array(Person(\"george\"), Person(\"michael\"), Person(\"dexter\"))\nval personNames = persons.map(_.name)\n</code></pre>\n\n<p>The main difference is that this Scala code is simple to read and it is comparably performant as a Java code that uses a loop because the translated Scala-to-Java code uses a while loop internally.</p>\n"},{"tags":[],"owner":{"account_id":1829075,"reputation":1414,"user_id":2502267,"accept_rate":0,"display_name":"fjkjava"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684342778,"creation_date":1684342778,"answer_id":76274522,"question_id":43260752,"body_markdown":"    List&lt;Integer&gt; vendorIdList = ledgersList.stream().map(Ledger::getVendorId).collect(Collectors.toList());","title":"Java - Easiest way to get single property from each object in a list/array?","body":"<pre><code>List&lt;Integer&gt; vendorIdList = ledgersList.stream().map(Ledger::getVendorId).collect(Collectors.toList());\n</code></pre>\n"}],"owner":{"display_name":"user7158855"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":16685,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":43260942,"answer_count":4,"score":10,"last_activity_date":1684342778,"creation_date":1491495889,"question_id":43260752,"body_markdown":"Say I have a person object with properties such as `name`, `hair color`, and `eye color`. I have the following array `Person[] people` that contains instances of person objects.\r\n\r\nI know I can get the `name` property of one the `Person` objects with \r\n\r\n    // create a new instance of Person\r\n    Person george = new Person(&#39;george&#39;,&#39;brown&#39;,&#39;blue&#39;);\r\n    // &lt;&lt;&lt; make a people array that contains the george instance here... &gt;&gt;&gt;\r\n    // access the name property\r\n    String georgesName = people[0].name;\r\n\r\nBut what if I want to access the `name` property of everyone without using indexes? For example, to create an array or list of just names or hair color? Do I have to manually iterate through my `people` array? Or is there something cool in Java like `String[] peopleNames = people.name`?","title":"Java - Easiest way to get single property from each object in a list/array?","body":"<p>Say I have a person object with properties such as <code>name</code>, <code>hair color</code>, and <code>eye color</code>. I have the following array <code>Person[] people</code> that contains instances of person objects.</p>\n\n<p>I know I can get the <code>name</code> property of one the <code>Person</code> objects with </p>\n\n<pre><code>// create a new instance of Person\nPerson george = new Person('george','brown','blue');\n// &lt;&lt;&lt; make a people array that contains the george instance here... &gt;&gt;&gt;\n// access the name property\nString georgesName = people[0].name;\n</code></pre>\n\n<p>But what if I want to access the <code>name</code> property of everyone without using indexes? For example, to create an array or list of just names or hair color? Do I have to manually iterate through my <code>people</code> array? Or is there something cool in Java like <code>String[] peopleNames = people.name</code>?</p>\n"},{"tags":["java","android","ms-office","openoffice.org"],"comments":[{"owner":{"account_id":238730,"reputation":46651,"user_id":507810,"accept_rate":82,"display_name":"FoamyGuy"},"score":0,"creation_date":1296503796,"post_id":4854947,"comment_id":5393935,"body_markdown":"Some devices come with a doc viewer. Galaxy Tab does, I am not sure how many of the total devices out there do though.","body":"Some devices come with a doc viewer. Galaxy Tab does, I am not sure how many of the total devices out there do though."}],"answers":[{"comments":[{"owner":{"account_id":481839,"reputation":13673,"user_id":895876,"accept_rate":49,"display_name":"Jason"},"score":4,"creation_date":1420898893,"post_id":4855286,"comment_id":44155567,"body_markdown":"Apache POI does not work on Android.","body":"Apache POI does not work on Android."},{"owner":{"account_id":4841971,"reputation":933,"user_id":3907873,"accept_rate":40,"display_name":"hitesh141"},"score":0,"creation_date":1439274790,"post_id":4855286,"comment_id":51780508,"body_markdown":"yes it is not working in Android..","body":"yes it is not working in Android.."},{"owner":{"account_id":6585981,"reputation":301,"user_id":5088733,"accept_rate":40,"display_name":"Ronak Khandelwal"},"score":0,"creation_date":1465810863,"post_id":4855286,"comment_id":63039087,"body_markdown":"@hitesh141 can you post an example?","body":"@hitesh141 can you post an example?"},{"owner":{"account_id":8646935,"reputation":8115,"user_id":6473867,"accept_rate":44,"display_name":"Gowthaman M"},"score":0,"creation_date":1497421438,"post_id":4855286,"comment_id":76064828,"body_markdown":"@Jason  why  Apache poi is not working in android please give some explanation.","body":"@Jason  why  Apache poi is not working in android please give some explanation."},{"owner":{"account_id":10671711,"reputation":821,"user_id":7856586,"display_name":"Roman Soviak"},"score":0,"creation_date":1523026311,"post_id":4855286,"comment_id":86403693,"body_markdown":"It works on Android, but you should waste a lot of time for configuring it. Download this project : https://github.com/andruhon/android5xlsx","body":"It works on Android, but you should waste a lot of time for configuring it. Download this project : <a href=\"https://github.com/andruhon/android5xlsx\" rel=\"nofollow noreferrer\">github.com/andruhon/android5xlsx</a>"},{"owner":{"account_id":9109500,"reputation":1728,"user_id":6778758,"display_name":"Nainal"},"score":0,"creation_date":1525419695,"post_id":4855286,"comment_id":87356763,"body_markdown":"As far as I know Apache POI is for creating ,reading and updating the documents, but how to use it for viewing documents.","body":"As far as I know Apache POI is for creating ,reading and updating the documents, but how to use it for viewing documents."}],"tags":[],"owner":{"account_id":68136,"reputation":5468,"user_id":198996,"accept_rate":83,"display_name":"TomTasche"},"comment_count":6,"down_vote_count":2,"up_vote_count":9,"is_accepted":false,"score":7,"last_activity_date":1319808155,"creation_date":1296503069,"answer_id":4855286,"question_id":4854947,"body_markdown":"Most of the Microsoft Document viewers are heavy and expensive.\r\n\r\nIf you want to create a viewer yourself, you should take a look at [Apache POI][1].\r\n\r\n\r\n  [1]: https://poi.apache.org/","title":"Android Microsoft Office Library (.doc, .docx, .xls, .ppt, etc.)","body":"<p>Most of the Microsoft Document viewers are heavy and expensive.</p>\n\n<p>If you want to create a viewer yourself, you should take a look at <a href=\"https://poi.apache.org/\" rel=\"noreferrer\">Apache POI</a>.</p>\n"},{"comments":[{"owner":{"account_id":5526397,"reputation":1237,"user_id":4387738,"accept_rate":100,"display_name":"A Maharaja"},"score":3,"creation_date":1514904844,"post_id":5266527,"comment_id":83098932,"body_markdown":"Now it not available.\n\n400. That’s an error.\n\nThe requested URL was not found on this server. That’s all we know.","body":"Now it not available.  400. That’s an error.  The requested URL was not found on this server. That’s all we know."},{"owner":{"account_id":448670,"reputation":1563,"user_id":843001,"accept_rate":47,"display_name":"Duna"},"score":0,"creation_date":1656505120,"post_id":5266527,"comment_id":128588443,"body_markdown":"This is not an option is the user has no internet connection or in case of handling high sensitive data documents. PDFTron comes here.","body":"This is not an option is the user has no internet connection or in case of handling high sensitive data documents. PDFTron comes here."}],"tags":[],"owner":{"account_id":120646,"reputation":1714,"user_id":313207,"accept_rate":88,"display_name":"matheeeny"},"comment_count":2,"down_vote_count":0,"up_vote_count":15,"is_accepted":true,"score":15,"last_activity_date":1299794956,"creation_date":1299794956,"answer_id":5266527,"question_id":4854947,"body_markdown":"Since most of the documents we need to display are already hosted on the web, we opted to use an embedded web view that opens the document using [google docs viewer][1].  \r\n\r\nWe still have a few locally stored documents though that this approach doesn&#39;t work with.  For these, our solution was to rely on the support of existing apps. After spending some more time with Android, It seems that most devices come equipped with some sort of document/pdf reading capability installed fresh out of the box.  In the event that they don&#39;t have a capable app, we direct them to a market search for a free reader.  \r\n\r\n\r\n\r\n  [1]: http://docs.google.com/viewer","title":"Android Microsoft Office Library (.doc, .docx, .xls, .ppt, etc.)","body":"<p>Since most of the documents we need to display are already hosted on the web, we opted to use an embedded web view that opens the document using <a href=\"http://docs.google.com/viewer\" rel=\"noreferrer\">google docs viewer</a>.  </p>\n\n<p>We still have a few locally stored documents though that this approach doesn't work with.  For these, our solution was to rely on the support of existing apps. After spending some more time with Android, It seems that most devices come equipped with some sort of document/pdf reading capability installed fresh out of the box.  In the event that they don't have a capable app, we direct them to a market search for a free reader.  </p>\n"},{"comments":[{"owner":{"account_id":3518504,"reputation":1545,"user_id":2941375,"accept_rate":21,"display_name":"Om Infowave Developers"},"score":0,"creation_date":1511504688,"post_id":34540302,"comment_id":81889247,"body_markdown":"joseph, please suggest me any demo link.","body":"joseph, please suggest me any demo link."},{"owner":{"account_id":110410,"reputation":37243,"user_id":292166,"accept_rate":77,"display_name":"JosephH"},"score":0,"creation_date":1511505830,"post_id":34540302,"comment_id":81889688,"body_markdown":"@OmInfowaveDevelopers http://smartoffice.artifex.com/ has links to Google Play &amp; iOS App Store apps that show you what SmartOffice can do, or email sosales@artifex.com to get an evaluation SDK.","body":"@OmInfowaveDevelopers <a href=\"http://smartoffice.artifex.com/\" rel=\"nofollow noreferrer\">smartoffice.artifex.com</a> has links to Google Play &amp; iOS App Store apps that show you what SmartOffice can do, or email sosales@artifex.com to get an evaluation SDK."},{"owner":{"account_id":9109500,"reputation":1728,"user_id":6778758,"display_name":"Nainal"},"score":0,"creation_date":1525419522,"post_id":34540302,"comment_id":87356669,"body_markdown":"In smartOffice official site there is no documentation and sdk provided to integrate it in app. And I have got no response from their contact support. @JosephH","body":"In smartOffice official site there is no documentation and sdk provided to integrate it in app. And I have got no response from their contact support. @JosephH"},{"owner":{"account_id":110410,"reputation":37243,"user_id":292166,"accept_rate":77,"display_name":"JosephH"},"score":0,"creation_date":1525441427,"post_id":34540302,"comment_id":87369830,"body_markdown":"@Nainal I don&#39;t know why that would be - if you drop me an email at my home address ( joseph@heenan.me.uk ) I&#39;ll make sure someone gets in touch.","body":"@Nainal I don&#39;t know why that would be - if you drop me an email at my home address ( joseph@heenan.me.uk ) I&#39;ll make sure someone gets in touch."}],"tags":[],"owner":{"account_id":110410,"reputation":37243,"user_id":292166,"accept_rate":77,"display_name":"JosephH"},"comment_count":4,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1684342710,"creation_date":1451529913,"answer_id":34540302,"question_id":4854947,"body_markdown":"Unfortunately there&#39;s no built in Android control to edit MS Office files, or even to display them! It&#39;s a pretty big omission given iOS has built in support for displaying Office files (albeit the iOS one often displays more complex documents incorrectly). There don&#39;t seem to be viewer app consistently enough available to rely on (and they may not provide the kind of user experience you&#39;re hoping for either).\r\n\r\nIf you want to display or edit docx etc **within** your android application, you have to embed some third party code that adds this functionality. I&#39;m not aware of any pre-packaged open source code that can do this, so unless you want to build/port a solution yourself you will need to commercially license something. \r\n\r\nAs others have noted, there are some open source projects in this area, but they&#39;re not packaged/ported to Android. If you did manage to get them ported and integrated, they&#39;d add a huge overhead to your Android app download (eg. 80+ megabytes) and you&#39;d need to then add a mobile suitable UI for them (see https://play.google.com/store/apps/details?id=com.andropenoffice&amp;hl=en_GB for an example of a port with ui that I personally think is not suitable/user friendly for an Android application.)\r\n\r\nOne such SDK that I&#39;m familiar with which solves this problem is based on the SmartOffice application:\r\n\r\nhttps://artifex.com/products-smart-office-overview/\r\n\r\nIt&#39;s available as an secure embeddable library that supports both display and (optionally) editing of Office documents. You can contact sosales@artifex.com for licensing information.\r\n\r\nDisclosure: One of my jobs involves working on the SmartOffice code.","title":"Android Microsoft Office Library (.doc, .docx, .xls, .ppt, etc.)","body":"<p>Unfortunately there's no built in Android control to edit MS Office files, or even to display them! It's a pretty big omission given iOS has built in support for displaying Office files (albeit the iOS one often displays more complex documents incorrectly). There don't seem to be viewer app consistently enough available to rely on (and they may not provide the kind of user experience you're hoping for either).</p>\n<p>If you want to display or edit docx etc <strong>within</strong> your android application, you have to embed some third party code that adds this functionality. I'm not aware of any pre-packaged open source code that can do this, so unless you want to build/port a solution yourself you will need to commercially license something.</p>\n<p>As others have noted, there are some open source projects in this area, but they're not packaged/ported to Android. If you did manage to get them ported and integrated, they'd add a huge overhead to your Android app download (eg. 80+ megabytes) and you'd need to then add a mobile suitable UI for them (see <a href=\"https://play.google.com/store/apps/details?id=com.andropenoffice&amp;hl=en_GB\" rel=\"nofollow noreferrer\">https://play.google.com/store/apps/details?id=com.andropenoffice&amp;hl=en_GB</a> for an example of a port with ui that I personally think is not suitable/user friendly for an Android application.)</p>\n<p>One such SDK that I'm familiar with which solves this problem is based on the SmartOffice application:</p>\n<p><a href=\"https://artifex.com/products-smart-office-overview/\" rel=\"nofollow noreferrer\">https://artifex.com/products-smart-office-overview/</a></p>\n<p>It's available as an secure embeddable library that supports both display and (optionally) editing of Office documents. You can contact sosales@artifex.com for licensing information.</p>\n<p>Disclosure: One of my jobs involves working on the SmartOffice code.</p>\n"},{"tags":[],"owner":{"account_id":7405824,"reputation":2593,"user_id":5634798,"display_name":"Gundu Bandgar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1451539832,"creation_date":1451539103,"answer_id":34541409,"question_id":4854947,"body_markdown":"    You can use this example for read MS word document file in android application.\r\n    I give a link below, you follow this for example.\r\n     &lt;https://github.com/AsposeShowcase/Document_Viewer_and_Converter_for_Android&gt;\r\n\r\n    And follow below link for Aspose Word library for android.\r\n     &lt;http://www.aspose.com/android/word-component.aspx&gt;\r\n  \r\n    **You Mostly use for this to Read Ms word document.**\r\n    I hope, you will using these Library and make you application better.\r\n    Best of Luck.\r\n\r\n\r\n    [1]: http://www.aspose.com/android/word-component.aspx","title":"Android Microsoft Office Library (.doc, .docx, .xls, .ppt, etc.)","body":"<pre><code>You can use this example for read MS word document file in android application.\nI give a link below, you follow this for example.\n &lt;https://github.com/AsposeShowcase/Document_Viewer_and_Converter_for_Android&gt;\n\nAnd follow below link for Aspose Word library for android.\n &lt;http://www.aspose.com/android/word-component.aspx&gt;\n\n**You Mostly use for this to Read Ms word document.**\nI hope, you will using these Library and make you application better.\nBest of Luck.\n\n\n[1]: http://www.aspose.com/android/word-component.aspx\n</code></pre>\n"},{"comments":[{"owner":{"account_id":5113734,"reputation":50640,"user_id":4099593,"accept_rate":100,"display_name":"Bhargav Rao"},"score":0,"creation_date":1459173370,"post_id":36263759,"comment_id":60155630,"body_markdown":"Whilst this may theoretically answer the question, [it would be preferable](//meta.stackoverflow.com/q/8259) to include the essential parts of the answer here, and provide the link for reference.","body":"Whilst this may theoretically answer the question, <a href=\"//meta.stackoverflow.com/q/8259\">it would be preferable</a> to include the essential parts of the answer here, and provide the link for reference."}],"tags":[],"owner":{"account_id":4931798,"reputation":116,"user_id":3971337,"display_name":"masoud"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1459174423,"creation_date":1459173062,"answer_id":36263759,"question_id":4854947,"body_markdown":"A suitable solution might be using Jword in the link below. It&#39;s not free but easy to use.\r\nhttp://www.independentsoft.de/jword/index.html\r\n\r\nUsing the library is as simple as this sample code\r\n\r\n    private String docxRead(String filePath) {\r\n\t\ttry {\r\n        \tWordDocument doc = new WordDocument(filePath);\r\n        \tString text = doc.toText();\r\n        \treturn text;\r\n        }\r\n        catch (Exception e) {\r\n            Toast.makeText(context, e.getMessage(), Toast.LENGTH_SHORT).show();\r\n            e.printStackTrace();\r\n        }\r\n\t\treturn &quot;&quot;;\r\n\t}    \r\n","title":"Android Microsoft Office Library (.doc, .docx, .xls, .ppt, etc.)","body":"<p>A suitable solution might be using Jword in the link below. It's not free but easy to use.\n<a href=\"http://www.independentsoft.de/jword/index.html\" rel=\"nofollow\">http://www.independentsoft.de/jword/index.html</a></p>\n\n<p>Using the library is as simple as this sample code</p>\n\n<pre><code>private String docxRead(String filePath) {\n    try {\n        WordDocument doc = new WordDocument(filePath);\n        String text = doc.toText();\n        return text;\n    }\n    catch (Exception e) {\n        Toast.makeText(context, e.getMessage(), Toast.LENGTH_SHORT).show();\n        e.printStackTrace();\n    }\n    return \"\";\n}    \n</code></pre>\n"}],"owner":{"account_id":120646,"reputation":1714,"user_id":313207,"accept_rate":88,"display_name":"matheeeny"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35488,"favorite_count":0,"down_vote_count":0,"up_vote_count":29,"closed_date":1459183031,"accepted_answer_id":5266527,"answer_count":5,"score":29,"last_activity_date":1684342710,"creation_date":1296500860,"question_id":4854947,"body_markdown":"Does anyone know of a good Java Microsoft Office API capable or running on an Android?  I know there is an OpenOffice Java API, but I haven&#39;t heard of anyone using it on Android.\r\n\r\nI know that using intents is another option, but how common are pre-installed office viewers on the varying Android distributions?  Would it be reasonable for a developer to expect the user to have one of these viewers installed?  Is it reasonable to request that they install one of these applications if they don&#39;t already have one?","title":"Android Microsoft Office Library (.doc, .docx, .xls, .ppt, etc.)","body":"<p>Does anyone know of a good Java Microsoft Office API capable or running on an Android?  I know there is an OpenOffice Java API, but I haven't heard of anyone using it on Android.</p>\n\n<p>I know that using intents is another option, but how common are pre-installed office viewers on the varying Android distributions?  Would it be reasonable for a developer to expect the user to have one of these viewers installed?  Is it reasonable to request that they install one of these applications if they don't already have one?</p>\n"},{"tags":["java","reflection","implementation"],"comments":[{"owner":{"account_id":284109,"reputation":47153,"user_id":581994,"accept_rate":57,"display_name":"Hot Licks"},"score":0,"creation_date":1386554819,"post_id":20461851,"comment_id":30575099,"body_markdown":"Pretty much smoke and mirrors.  Lots of `native` methods that dork around in the innards of objects.  A `native` method pretty much can do anything it wants.","body":"Pretty much smoke and mirrors.  Lots of <code>native</code> methods that dork around in the innards of objects.  A <code>native</code> method pretty much can do anything it wants."}],"answers":[{"tags":[],"owner":{"account_id":195331,"reputation":275428,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1386556063,"creation_date":1386555567,"answer_id":20462012,"question_id":20461851,"body_markdown":"The main entry point of any Reflection activity is the `Class` class. From it you can get `Method`, `Field`, `Class`, `Constructor`, and `Annotation` instances.\r\n\r\nIf you look at the source code, you will notice that to retrieve any of the above, Java has to make a [`native`][1] call. For example,\r\n\r\n    private native Field[]       getDeclaredFields0(boolean publicOnly);\r\n    private native Method[]      getDeclaredMethods0(boolean publicOnly);\r\n    private native Constructor&lt;T&gt;[] getDeclaredConstructors0(boolean publicOnly);\r\n    private native Class&lt;?&gt;[]   getDeclaredClasses0();\r\n    private native byte[] getRawAnnotations(); // get converted to Annotation instances later\r\n\r\nThe implementation is done in native C code (and/or C++). Each JDK might differ, but you can look up the source code if it&#39;s available and you have patience. Details on the OpenJDK source code can be found [in this question][2].\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/6101311/what-is-the-native-keyword-in-java-for\r\n  [2]: https://stackoverflow.com/questions/12594046/java-native-method-source-code","title":"How is Reflection Implemented in Java?","body":"<p>The main entry point of any Reflection activity is the <code>Class</code> class. From it you can get <code>Method</code>, <code>Field</code>, <code>Class</code>, <code>Constructor</code>, and <code>Annotation</code> instances.</p>\n\n<p>If you look at the source code, you will notice that to retrieve any of the above, Java has to make a <a href=\"https://stackoverflow.com/questions/6101311/what-is-the-native-keyword-in-java-for\"><code>native</code></a> call. For example,</p>\n\n<pre><code>private native Field[]       getDeclaredFields0(boolean publicOnly);\nprivate native Method[]      getDeclaredMethods0(boolean publicOnly);\nprivate native Constructor&lt;T&gt;[] getDeclaredConstructors0(boolean publicOnly);\nprivate native Class&lt;?&gt;[]   getDeclaredClasses0();\nprivate native byte[] getRawAnnotations(); // get converted to Annotation instances later\n</code></pre>\n\n<p>The implementation is done in native C code (and/or C++). Each JDK might differ, but you can look up the source code if it's available and you have patience. Details on the OpenJDK source code can be found <a href=\"https://stackoverflow.com/questions/12594046/java-native-method-source-code\">in this question</a>.</p>\n"}],"owner":{"account_id":2698695,"reputation":5321,"user_id":2329988,"accept_rate":73,"display_name":"en_Knight"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1446,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":20462012,"answer_count":1,"score":4,"last_activity_date":1684342327,"creation_date":1386554467,"question_id":20461851,"body_markdown":"The Java 7 Language Specifications say pretty early on:\r\n\r\n&gt; &quot;this specification does not describe reflection in any detail.&quot;\r\n\r\nI&#39;m wondering just that: how is Reflection implemented in Java? \r\n\r\nI&#39;m not asking how it&#39;s used, and I understand there might not be as specific an answer I&#39;m looking for, but any information would be much appreciated.\r\n\r\nI&#39;ve found this on Stackoverflow, the analogous question about C#: https://stackoverflow.com/questions/15105575/how-is-reflection-implemented-in-c","title":"How is Reflection Implemented in Java?","body":"<p>The Java 7 Language Specifications say pretty early on:</p>\n\n<blockquote>\n  <p>\"this specification does not describe reflection in any detail.\"</p>\n</blockquote>\n\n<p>I'm wondering just that: how is Reflection implemented in Java? </p>\n\n<p>I'm not asking how it's used, and I understand there might not be as specific an answer I'm looking for, but any information would be much appreciated.</p>\n\n<p>I've found this on Stackoverflow, the analogous question about C#: <a href=\"https://stackoverflow.com/questions/15105575/how-is-reflection-implemented-in-c\">How is reflection implemented in C#?</a></p>\n"},{"tags":["java","jfreechart"],"comments":[{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":0,"creation_date":1684270480,"post_id":76266902,"comment_id":134493300,"body_markdown":"The endpoints look aligned on the domain; they look offset on the range by about what I&#39;d expect for a stacked renderer.","body":"The endpoints look aligned on the domain; they look offset on the range by about what I&#39;d expect for a stacked renderer."},{"owner":{"account_id":16209077,"reputation":389,"user_id":11703579,"display_name":"gbossa"},"score":0,"creation_date":1684270700,"post_id":76266902,"comment_id":134493345,"body_markdown":"So, you guess the problem is the range of the renderers? Will check it out","body":"So, you guess the problem is the range of the renderers? Will check it out"},{"owner":{"account_id":16209077,"reputation":389,"user_id":11703579,"display_name":"gbossa"},"score":1,"creation_date":1684340601,"post_id":76266902,"comment_id":134505221,"body_markdown":"So, your tip did the trick. If you please, post it as an answer so I can accept it, and then I will post the code editing the question. Thank you @trashgod","body":"So, your tip did the trick. If you please, post it as an answer so I can accept it, and then I will post the code editing the question. Thank you @trashgod"}],"answers":[{"tags":[],"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1684342294,"creation_date":1684340923,"answer_id":76274276,"question_id":76266902,"body_markdown":"In the chart [shown][1], the endpoints look aligned on the domain, but they appear offset on the range by about what I&#39;d expect for a stacked renderer. The exact solution, seen [here][2], modifies a second axis, also seen [here][3]. Also consider a `CombinedDomainCategoryPlot`, mentioned [here][4].\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/zyLgY.png\r\n  [2]: https://stackoverflow.com/q/76266902/230513\r\n  [3]: https://stackoverflow.com/a/13362809/230513\r\n  [4]: https://stackoverflow.com/search?q=user%3A230513%20CombinedDomainCategoryPlot","title":"JFreeChart - Lines with same starting value not in the same initial position","body":"<p>In the chart <a href=\"https://i.stack.imgur.com/zyLgY.png\" rel=\"nofollow noreferrer\">shown</a>, the endpoints look aligned on the domain, but they appear offset on the range by about what I'd expect for a stacked renderer. The exact solution, seen <a href=\"https://stackoverflow.com/q/76266902/230513\">here</a>, modifies a second axis, also seen <a href=\"https://stackoverflow.com/a/13362809/230513\">here</a>. Also consider a <code>CombinedDomainCategoryPlot</code>, mentioned <a href=\"https://stackoverflow.com/search?q=user%3A230513%20CombinedDomainCategoryPlot\">here</a>.</p>\n"}],"owner":{"account_id":16209077,"reputation":389,"user_id":11703579,"display_name":"gbossa"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76274276,"answer_count":1,"score":1,"last_activity_date":1684342294,"creation_date":1684269683,"question_id":76266902,"body_markdown":"I am developing a graphic representation of some info.\r\nThe two lines have the same starting value, so they should be starting in the same position on the chart. But, one of them is starting a lot below the other.\r\nI don&#180;t know what I am missing here. Can someone please give a hand?\r\nThanks in advance.\r\n(The values / datasets are coming from another method, just asume that the lines have the same initial value)\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nThe snippet of code where the lines (and bars) are rendered.\r\n\r\n    private JFreeChart createChart(List&lt;SpartaConsolidadoDistribuidora&gt; listCons, int idCenario, String usina) {\r\n        //Cria o Renderer das StackBars.\r\n        GroupedStackedBarRenderer renderer = new GroupedStackedBarRenderer();\r\n        KeyToGroupMap map = new KeyToGroupMap(&quot;G1&quot;);\r\n        \r\n        int g = 1;\r\n        for (int j = 0; j &lt; 5; j++) {\r\n        \tfor (int i = 0; i &lt; contratos.size(); i++) {\r\n            \tmap.mapKeyToGroup(contratos.get(i), &quot;G&quot; + g);\r\n            }\r\n        \tg++;\r\n    \t}\r\n        \r\n        renderer.setSeriesToGroupMap(map);\r\n        \r\n        renderer.setItemMargin(0.0);\r\n        Paint p1 = new GradientPaint(0.0f, 0.0f, azul, 0.0f, 0.0f, azul);\r\n        renderer.setSeriesPaint(0, p1);\r\n        renderer.setSeriesPaint(7, p1);\r\n        renderer.setSeriesPaint(14, p1);\r\n        renderer.setSeriesPaint(21, p1);\r\n        renderer.setSeriesPaint(28, p1);\r\n        renderer.setSeriesPaint(35, p1);\r\n        renderer.setSeriesPaint(42, p1);\r\n         \r\n        Paint p2 = new GradientPaint(0.0f, 0.0f, roxo, 0.0f, 0.0f, roxo);\r\n        renderer.setSeriesPaint(1, p2);\r\n        renderer.setSeriesPaint(8, p2);\r\n        renderer.setSeriesPaint(15, p2);\r\n        renderer.setSeriesPaint(22, p2);\r\n        renderer.setSeriesPaint(29, p2);\r\n        renderer.setSeriesPaint(36, p2);\r\n        renderer.setSeriesPaint(43, p2);\r\n        \r\n        Paint p3 = new GradientPaint(0.0f, 0.0f, verde, 0.0f, 0.0f, verde);\r\n        renderer.setSeriesPaint(2, p3);\r\n        renderer.setSeriesPaint(9, p3);\r\n        renderer.setSeriesPaint(16, p3);\r\n        renderer.setSeriesPaint(23, p3);\r\n        renderer.setSeriesPaint(30, p3);\r\n        renderer.setSeriesPaint(37, p3);\r\n        renderer.setSeriesPaint(44, p3);\r\n\r\n        Paint p4 = new GradientPaint(0.0f, 0.0f, rosa, 0.0f, 0.0f, rosa);\r\n        renderer.setSeriesPaint(3, p4);\r\n        renderer.setSeriesPaint(10, p4);\r\n        renderer.setSeriesPaint(17, p4);\r\n        renderer.setSeriesPaint(24, p4);\r\n        renderer.setSeriesPaint(31, p4);\r\n        renderer.setSeriesPaint(38, p4);\r\n        renderer.setSeriesPaint(45, p4);\r\n        \r\n        Paint p5 = new GradientPaint(0.0f, 0.0f, amarelo, 0.0f, 0.0f, amarelo);\r\n        renderer.setSeriesPaint(4, p5);\r\n        renderer.setSeriesPaint(11, p5);\r\n        renderer.setSeriesPaint(18, p5);\r\n        renderer.setSeriesPaint(25, p5);\r\n        renderer.setSeriesPaint(32, p5);\r\n        renderer.setSeriesPaint(39, p5);\r\n        renderer.setSeriesPaint(46, p5);\r\n        \r\n        Paint p6 = new GradientPaint(0.0f, 0.0f, azulClaro, 0.0f, 0.0f, azulClaro);\r\n        renderer.setSeriesPaint(5, p6);\r\n        renderer.setSeriesPaint(12, p6);\r\n        renderer.setSeriesPaint(19, p6);\r\n        renderer.setSeriesPaint(26, p6);\r\n        renderer.setSeriesPaint(33, p6);\r\n        renderer.setSeriesPaint(40, p6);\r\n        renderer.setSeriesPaint(47, p6);\r\n        \r\n        Paint p7 = new GradientPaint(0.0f, 0.0f, azulEscuro, 0.0f, 0.0f, azulEscuro);\r\n        renderer.setSeriesPaint(6, p7);\r\n        renderer.setSeriesPaint(13, p7);\r\n        renderer.setSeriesPaint(20, p7);\r\n        renderer.setSeriesPaint(27, p7);\r\n        renderer.setSeriesPaint(34, p7);\r\n        renderer.setSeriesPaint(41, p7);\r\n        renderer.setSeriesPaint(49, p7);\r\n\r\n        renderer.setGradientPaintTransformer(new StandardGradientPaintTransformer(GradientPaintTransformType.HORIZONTAL));\r\n        \r\n        SubCategoryAxis domainAxis = new SubCategoryAxis(&quot;&quot;);\r\n        \r\n        List&lt;CategoryDataset&gt; listDS = createDatasets(listCons, idCenario);\r\n        \r\n        CategoryPlot plot = new CategoryPlot();\r\n        \r\n        plot.setDataset(listDS.get(0));\r\n        plot.setRenderer(renderer);\r\n        plot.setDomainAxis(domainAxis);\r\n        \r\n        NumberAxis nAxis = new NumberAxis(&quot;MWm&quot;);\r\n        nAxis.setAutoRange(true);\r\n        nAxis.setTickUnit(new NumberTickUnit(100000));\r\n        plot.setRangeAxis(nAxis);\r\n        plot.setFixedLegendItems(createLegendItems());\r\n        \r\n        plot.setOrientation(PlotOrientation.VERTICAL);\r\n        plot.setRangeGridlinesVisible(true);\r\n        plot.setDomainGridlinesVisible(true);\r\n                \r\n        //Agora crio o segundo renderer - Line - LINE 1 RENDER\r\n        CategoryItemRenderer renderer2 = new LineAndShapeRenderer();\r\n        renderer2.setSeriesStroke(0, new BasicStroke(4));\r\n        renderer2.setSeriesPaint(0, preto);\r\n        plot.setDataset(1, listDS.get(1));\r\n        plot.setRenderer(1, renderer2);\r\n        \r\n        final ValueAxis rangeAxis2 = new NumberAxis(&quot;&quot;);\r\n        rangeAxis2.setTickLabelsVisible(false);\r\n        plot.setRangeAxis(1, rangeAxis2);\r\n        plot.getRangeAxis().setAutoRange(true);\r\n        \r\n        //Agora crio o terceiro renderer - Line - LINE 2 RENDER\r\n        CategoryItemRenderer renderer3 = new LineAndShapeRenderer();\r\n        renderer3.setSeriesStroke(0, new BasicStroke(4));\r\n        renderer3.setSeriesPaint(0, vermelho);\r\n        plot.setDataset(2, listDS.get(2));\r\n        plot.setRenderer(2, renderer3);\r\n        plot.mapDatasetToRangeAxis(2, 1);\r\n        \r\n        plot.setDatasetRenderingOrder(DatasetRenderingOrder.FORWARD);\r\n        \r\n        final JFreeChart chart = new JFreeChart(plot);\r\n        chart.setTitle(usina);\r\n        \r\n        return chart;\r\n    }\r\n\r\n\r\n**EDIT:**\r\n\r\nAs the tip provided by @trashgod in the comments, here is the snippet that did the trick:\r\n\r\n    NumberAxis nAxis = new NumberAxis(&quot;MWm&quot;);\r\n        nAxis.setAutoRange(true);\r\n        nAxis.setLabelFont(new Font(&quot;Arial Black&quot;,0, 18));\r\n        nAxis.setTickUnit(tickUnit);\r\n        nAxis.setTickLabelsVisible(true);\r\n        \r\n        plot.setRangeAxis(nAxis);\r\n        plot.setFixedLegendItems(createLegendItems());\r\n                \r\n        //Agora crio o segundo renderer - Line\r\n        CategoryItemRenderer renderer2 = new LineAndShapeRenderer();\r\n        renderer2.setSeriesStroke(0, new BasicStroke(4));\r\n        renderer2.setSeriesPaint(0, vermelho);\r\n        \r\n        plot.setDataset(1, listDS.get(1));\r\n        plot.setRenderer(1, renderer2);\r\n        \r\n        NumberAxis rangeAxis2 = new NumberAxis(&quot;&quot;);\r\n        rangeAxis2.setAutoRange(true);\r\n        rangeAxis2.setTickUnit(tickUnit);\r\n        rangeAxis2.setTickUnit(new NumberTickUnit(1000000), false, false);\r\n        rangeAxis2.setAutoTickUnitSelection(true);\r\n        rangeAxis2.setTickLabelsVisible(false);\r\n        \r\n        plot.setRangeAxis(1, rangeAxis2);\r\n        \r\n        //Agora crio o terceiro renderer - Line\r\n        CategoryItemRenderer renderer3 = new LineAndShapeRenderer();\r\n        renderer3.setSeriesStroke(0, new BasicStroke(4));\r\n        renderer3.setSeriesPaint(0, preto);\r\n        \r\n        plot.setDataset(2, listDS.get(2));\r\n        plot.setRenderer(2, renderer3);\r\n\r\n  [1]: https://i.stack.imgur.com/zyLgY.png","title":"JFreeChart - Lines with same starting value not in the same initial position","body":"<p>I am developing a graphic representation of some info.\nThe two lines have the same starting value, so they should be starting in the same position on the chart. But, one of them is starting a lot below the other.\nI don´t know what I am missing here. Can someone please give a hand?\nThanks in advance.\n(The values / datasets are coming from another method, just asume that the lines have the same initial value)</p>\n<p><a href=\"https://i.stack.imgur.com/zyLgY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zyLgY.png\" alt=\"enter image description here\" /></a></p>\n<p>The snippet of code where the lines (and bars) are rendered.</p>\n<pre><code>private JFreeChart createChart(List&lt;SpartaConsolidadoDistribuidora&gt; listCons, int idCenario, String usina) {\n    //Cria o Renderer das StackBars.\n    GroupedStackedBarRenderer renderer = new GroupedStackedBarRenderer();\n    KeyToGroupMap map = new KeyToGroupMap(&quot;G1&quot;);\n    \n    int g = 1;\n    for (int j = 0; j &lt; 5; j++) {\n        for (int i = 0; i &lt; contratos.size(); i++) {\n            map.mapKeyToGroup(contratos.get(i), &quot;G&quot; + g);\n        }\n        g++;\n    }\n    \n    renderer.setSeriesToGroupMap(map);\n    \n    renderer.setItemMargin(0.0);\n    Paint p1 = new GradientPaint(0.0f, 0.0f, azul, 0.0f, 0.0f, azul);\n    renderer.setSeriesPaint(0, p1);\n    renderer.setSeriesPaint(7, p1);\n    renderer.setSeriesPaint(14, p1);\n    renderer.setSeriesPaint(21, p1);\n    renderer.setSeriesPaint(28, p1);\n    renderer.setSeriesPaint(35, p1);\n    renderer.setSeriesPaint(42, p1);\n     \n    Paint p2 = new GradientPaint(0.0f, 0.0f, roxo, 0.0f, 0.0f, roxo);\n    renderer.setSeriesPaint(1, p2);\n    renderer.setSeriesPaint(8, p2);\n    renderer.setSeriesPaint(15, p2);\n    renderer.setSeriesPaint(22, p2);\n    renderer.setSeriesPaint(29, p2);\n    renderer.setSeriesPaint(36, p2);\n    renderer.setSeriesPaint(43, p2);\n    \n    Paint p3 = new GradientPaint(0.0f, 0.0f, verde, 0.0f, 0.0f, verde);\n    renderer.setSeriesPaint(2, p3);\n    renderer.setSeriesPaint(9, p3);\n    renderer.setSeriesPaint(16, p3);\n    renderer.setSeriesPaint(23, p3);\n    renderer.setSeriesPaint(30, p3);\n    renderer.setSeriesPaint(37, p3);\n    renderer.setSeriesPaint(44, p3);\n\n    Paint p4 = new GradientPaint(0.0f, 0.0f, rosa, 0.0f, 0.0f, rosa);\n    renderer.setSeriesPaint(3, p4);\n    renderer.setSeriesPaint(10, p4);\n    renderer.setSeriesPaint(17, p4);\n    renderer.setSeriesPaint(24, p4);\n    renderer.setSeriesPaint(31, p4);\n    renderer.setSeriesPaint(38, p4);\n    renderer.setSeriesPaint(45, p4);\n    \n    Paint p5 = new GradientPaint(0.0f, 0.0f, amarelo, 0.0f, 0.0f, amarelo);\n    renderer.setSeriesPaint(4, p5);\n    renderer.setSeriesPaint(11, p5);\n    renderer.setSeriesPaint(18, p5);\n    renderer.setSeriesPaint(25, p5);\n    renderer.setSeriesPaint(32, p5);\n    renderer.setSeriesPaint(39, p5);\n    renderer.setSeriesPaint(46, p5);\n    \n    Paint p6 = new GradientPaint(0.0f, 0.0f, azulClaro, 0.0f, 0.0f, azulClaro);\n    renderer.setSeriesPaint(5, p6);\n    renderer.setSeriesPaint(12, p6);\n    renderer.setSeriesPaint(19, p6);\n    renderer.setSeriesPaint(26, p6);\n    renderer.setSeriesPaint(33, p6);\n    renderer.setSeriesPaint(40, p6);\n    renderer.setSeriesPaint(47, p6);\n    \n    Paint p7 = new GradientPaint(0.0f, 0.0f, azulEscuro, 0.0f, 0.0f, azulEscuro);\n    renderer.setSeriesPaint(6, p7);\n    renderer.setSeriesPaint(13, p7);\n    renderer.setSeriesPaint(20, p7);\n    renderer.setSeriesPaint(27, p7);\n    renderer.setSeriesPaint(34, p7);\n    renderer.setSeriesPaint(41, p7);\n    renderer.setSeriesPaint(49, p7);\n\n    renderer.setGradientPaintTransformer(new StandardGradientPaintTransformer(GradientPaintTransformType.HORIZONTAL));\n    \n    SubCategoryAxis domainAxis = new SubCategoryAxis(&quot;&quot;);\n    \n    List&lt;CategoryDataset&gt; listDS = createDatasets(listCons, idCenario);\n    \n    CategoryPlot plot = new CategoryPlot();\n    \n    plot.setDataset(listDS.get(0));\n    plot.setRenderer(renderer);\n    plot.setDomainAxis(domainAxis);\n    \n    NumberAxis nAxis = new NumberAxis(&quot;MWm&quot;);\n    nAxis.setAutoRange(true);\n    nAxis.setTickUnit(new NumberTickUnit(100000));\n    plot.setRangeAxis(nAxis);\n    plot.setFixedLegendItems(createLegendItems());\n    \n    plot.setOrientation(PlotOrientation.VERTICAL);\n    plot.setRangeGridlinesVisible(true);\n    plot.setDomainGridlinesVisible(true);\n            \n    //Agora crio o segundo renderer - Line - LINE 1 RENDER\n    CategoryItemRenderer renderer2 = new LineAndShapeRenderer();\n    renderer2.setSeriesStroke(0, new BasicStroke(4));\n    renderer2.setSeriesPaint(0, preto);\n    plot.setDataset(1, listDS.get(1));\n    plot.setRenderer(1, renderer2);\n    \n    final ValueAxis rangeAxis2 = new NumberAxis(&quot;&quot;);\n    rangeAxis2.setTickLabelsVisible(false);\n    plot.setRangeAxis(1, rangeAxis2);\n    plot.getRangeAxis().setAutoRange(true);\n    \n    //Agora crio o terceiro renderer - Line - LINE 2 RENDER\n    CategoryItemRenderer renderer3 = new LineAndShapeRenderer();\n    renderer3.setSeriesStroke(0, new BasicStroke(4));\n    renderer3.setSeriesPaint(0, vermelho);\n    plot.setDataset(2, listDS.get(2));\n    plot.setRenderer(2, renderer3);\n    plot.mapDatasetToRangeAxis(2, 1);\n    \n    plot.setDatasetRenderingOrder(DatasetRenderingOrder.FORWARD);\n    \n    final JFreeChart chart = new JFreeChart(plot);\n    chart.setTitle(usina);\n    \n    return chart;\n}\n</code></pre>\n<p><strong>EDIT:</strong></p>\n<p>As the tip provided by @trashgod in the comments, here is the snippet that did the trick:</p>\n<pre><code>NumberAxis nAxis = new NumberAxis(&quot;MWm&quot;);\n    nAxis.setAutoRange(true);\n    nAxis.setLabelFont(new Font(&quot;Arial Black&quot;,0, 18));\n    nAxis.setTickUnit(tickUnit);\n    nAxis.setTickLabelsVisible(true);\n    \n    plot.setRangeAxis(nAxis);\n    plot.setFixedLegendItems(createLegendItems());\n            \n    //Agora crio o segundo renderer - Line\n    CategoryItemRenderer renderer2 = new LineAndShapeRenderer();\n    renderer2.setSeriesStroke(0, new BasicStroke(4));\n    renderer2.setSeriesPaint(0, vermelho);\n    \n    plot.setDataset(1, listDS.get(1));\n    plot.setRenderer(1, renderer2);\n    \n    NumberAxis rangeAxis2 = new NumberAxis(&quot;&quot;);\n    rangeAxis2.setAutoRange(true);\n    rangeAxis2.setTickUnit(tickUnit);\n    rangeAxis2.setTickUnit(new NumberTickUnit(1000000), false, false);\n    rangeAxis2.setAutoTickUnitSelection(true);\n    rangeAxis2.setTickLabelsVisible(false);\n    \n    plot.setRangeAxis(1, rangeAxis2);\n    \n    //Agora crio o terceiro renderer - Line\n    CategoryItemRenderer renderer3 = new LineAndShapeRenderer();\n    renderer3.setSeriesStroke(0, new BasicStroke(4));\n    renderer3.setSeriesPaint(0, preto);\n    \n    plot.setDataset(2, listDS.get(2));\n    plot.setRenderer(2, renderer3);\n</code></pre>\n"},{"tags":["java","eclipse"],"comments":[{"owner":{"account_id":13796,"reputation":19353,"user_id":27905,"display_name":"nitind"},"score":0,"creation_date":1684342713,"post_id":76274408,"comment_id":134505670,"body_markdown":"Have you modified the eclipse.ini file? -1 usually means invalid arguments, and `--add-modules=ALL-SYSTEM` is not a valid argument for Java 1.8.","body":"Have you modified the eclipse.ini file? -1 usually means invalid arguments, and <code>--add-modules=ALL-SYSTEM</code> is not a valid argument for Java 1.8."},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1684425878,"post_id":76274408,"comment_id":134518902,"body_markdown":"What exactly prevents you from upgrading?","body":"What exactly prevents you from upgrading?"}],"owner":{"account_id":28132203,"reputation":1,"user_id":21496538,"display_name":"Manasak Aongsirimongkon"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684341938,"creation_date":1684341938,"question_id":76274408,"body_markdown":"I need to use eclipse-java-2019-03-R-win32-x86_64 with WebSphere 8.5.\r\nwhen open eclipse it show error &quot;java virtual machine launcher&quot;\r\nI follow up solve method from google 3 method is still unable.\r\n\r\n1.Insert variable \r\nVariable name (1): _JAVA_OPTIONS\r\nVariable name (2):  –Xmx512M\r\n\r\n2.Run JAVA on Administator\r\n\r\n3.Re-install JAVA\r\n\r\nPlease see error below picture\r\n[enter image description here](https://i.stack.imgur.com/WGm25.png)\r\n\r\nRemark:Eclipse 2023 is can be used normally.\r\n\r\nI want to use Eclipse 2019-03R in normally","title":"I couldn&#39;t open Eclipse and show error java virtual machine launcher","body":"<p>I need to use eclipse-java-2019-03-R-win32-x86_64 with WebSphere 8.5.\nwhen open eclipse it show error &quot;java virtual machine launcher&quot;\nI follow up solve method from google 3 method is still unable.</p>\n<p>1.Insert variable\nVariable name (1): _JAVA_OPTIONS\nVariable name (2):  –Xmx512M</p>\n<p>2.Run JAVA on Administator</p>\n<p>3.Re-install JAVA</p>\n<p>Please see error below picture\n<a href=\"https://i.stack.imgur.com/WGm25.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>Remark:Eclipse 2023 is can be used normally.</p>\n<p>I want to use Eclipse 2019-03R in normally</p>\n"},{"tags":["java","xml"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1684337936,"post_id":76273811,"comment_id":134504572,"body_markdown":"`replaceAll(&quot;\\r\\n&quot;, &quot;&quot;);` has a limited scope - basically Windows line separators that are &#39;error free&#39;. `replaceAll(&quot;[\\r\\n]&quot;, &quot;&quot;);` would be better","body":"<code>replaceAll(&quot;\\r\\n&quot;, &quot;&quot;);</code> has a limited scope - basically Windows line separators that are &#39;error free&#39;. <code>replaceAll(&quot;[\\r\\n]&quot;, &quot;&quot;);</code> would be better"},{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1684338076,"post_id":76273811,"comment_id":134504594,"body_markdown":"Changing any character after signing may break the signature.","body":"Changing any character after signing may break the signature."},{"owner":{"account_id":28568364,"reputation":11,"user_id":21870932,"display_name":"felixrojas"},"score":0,"creation_date":1684338291,"post_id":76273811,"comment_id":134504654,"body_markdown":"Thanks for your answer. I did it but  it still throws invalid signature  when i try to to validate the file.","body":"Thanks for your answer. I did it but  it still throws invalid signature  when i try to to validate the file."},{"owner":{"account_id":28568364,"reputation":11,"user_id":21870932,"display_name":"felixrojas"},"score":0,"creation_date":1684338702,"post_id":76273811,"comment_id":134504776,"body_markdown":"thanks @aled i deleted all the  changes after signing but still  invalid","body":"thanks @aled i deleted all the  changes after signing but still  invalid"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1684340162,"post_id":76273811,"comment_id":134505117,"body_markdown":"You haven&#39;t told us *how* you&#39;re testing the signature","body":"You haven&#39;t told us <i>how</i> you&#39;re testing the signature"},{"owner":{"account_id":28568364,"reputation":11,"user_id":21870932,"display_name":"felixrojas"},"score":0,"creation_date":1684340942,"post_id":76273811,"comment_id":134505315,"body_markdown":"I have to send the  signed XML to the server of the entity  that  gave me the  certificate but i want to know if  my  code meet all of the criteria that  the entity told me that they need for this  to be valid   because  I&#39;m a c# developer and  i did it on c# and worked perfectly   but in java  with the same XML  I&#39;m generating different SignatureValue and DigestValue.","body":"I have to send the  signed XML to the server of the entity  that  gave me the  certificate but i want to know if  my  code meet all of the criteria that  the entity told me that they need for this  to be valid   because  I&#39;m a c# developer and  i did it on c# and worked perfectly   but in java  with the same XML  I&#39;m generating different SignatureValue and DigestValue."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1684341416,"post_id":76273811,"comment_id":134505405,"body_markdown":"Wouldn&#39;t hurt to post the C#. There are many things that could break it - right from the start, e.g. the encoding with which it&#39;s read","body":"Wouldn&#39;t hurt to post the C#. There are many things that could break it - right from the start, e.g. the encoding with which it&#39;s read"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1684342486,"post_id":76273811,"comment_id":134505610,"body_markdown":"That doesn&#39;t help me but might help someone else ;)","body":"That doesn&#39;t help me but might help someone else ;)"},{"owner":{"account_id":28568364,"reputation":11,"user_id":21870932,"display_name":"felixrojas"},"score":0,"creation_date":1684342644,"post_id":76273811,"comment_id":134505653,"body_markdown":"It&#39;s okey thanks for your help @g00se","body":"It&#39;s okey thanks for your help @g00se"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1684343570,"post_id":76273811,"comment_id":134505849,"body_markdown":"Have you inspected in detail the differences in the C# and Java output?","body":"Have you inspected in detail the differences in the C# and Java output?"},{"owner":{"account_id":28568364,"reputation":11,"user_id":21870932,"display_name":"felixrojas"},"score":0,"creation_date":1684346891,"post_id":76273811,"comment_id":134506563,"body_markdown":"The only difference in the output file generated is the SignatureValue and DigestValue.","body":"The only difference in the output file generated is the SignatureValue and DigestValue."}],"owner":{"account_id":28568364,"reputation":11,"user_id":21870932,"display_name":"felixrojas"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":79,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1684341883,"creation_date":1684337638,"question_id":76273811,"body_markdown":"I have this java code with which I can sign an XML file with a .p12 certificate. \r\n\r\nThe requirements for this signature are the signatureMethod and the digetsMethod need to use sha256 as the encryption algorithm. \r\n\r\nThe DigestValue should be the Property that contains the value encoded in Base 64 format of the summary of the object described by the Uri property in the reference tag.\r\n\r\nIn this case, what changes should we make in order to meet all of this requirements. Also the requirement needs that the xml does not preserve white spaces.\r\n\r\nCurrently I am getting invalid signature when I test the signed XML.\r\n\r\nHere is my code bellow so far: \r\n\r\n```\r\npackage xmlCreateSignature;\r\nimport java.io.*;\r\nimport java.security.*;\r\nimport java.security.cert.Certificate;\r\nimport java.security.cert.CertificateException;\r\nimport java.util.Collections;\r\nimport javax.xml.XMLConstants;\r\nimport javax.xml.crypto.*;\r\nimport javax.xml.crypto.dom.*;\r\nimport javax.xml.crypto.dsig.*;\r\nimport javax.xml.crypto.dsig.dom.*;\r\nimport javax.xml.crypto.dsig.keyinfo.*;\r\nimport javax.xml.crypto.dsig.spec.C14NMethodParameterSpec;\r\nimport javax.xml.crypto.dsig.spec.TransformParameterSpec;\r\nimport javax.xml.parsers.*;\r\nimport javax.xml.transform.*;\r\nimport javax.xml.transform.dom.*;\r\nimport javax.xml.transform.stream.*;\r\nimport org.w3c.dom.Element;\r\nimport org.w3c.dom.Node;\r\n\r\npublic class testesas {\t\r\n  public static  void main(String[] args) throws Exception {\r\n\t  \r\n System.setProperty(&quot;com.sun.org.apache.xml.internal.security.ignoreLineBreaks&quot;, &quot;true&quot;);\r\n String pass =&quot;pass&quot; ;\r\n // Load the XML document\r\n DocumentBuilderFactory dbf =  DocumentBuilderFactory.newInstance( );\r\n  \r\n dbf.setIgnoringElementContentWhitespace(true);\r\n// dbf.setNamespaceAware(false);\r\n dbf.setFeature(XMLConstants.FEATURE_SECURE_PROCESSING, true);\r\n DocumentBuilder builder = dbf.newDocumentBuilder();\r\n\r\n org.w3c.dom.Document doc = builder.parse(new File(&quot;./documents/request.xml&quot;));\r\n doc.getDocumentElement().normalize();\r\n\r\n // Load the certificate and private key from the .p12 file\r\n String providerName=&quot;SunJSSE&quot;;\r\n KeyStore ks = KeyStore.getInstance(&quot;PKCS12&quot;, providerName);\r\n ks.load(new FileInputStream(&quot;./documents/4300648_identity.p12&quot;), pass.toCharArray());\r\n String alias = (String) ks.aliases().nextElement();\r\n PrivateKey privateKey = (PrivateKey) ks.getKey(alias, pass.toCharArray());\r\n Certificate cert = ks.getCertificate(alias);\r\n\r\n // Create a DOM XMLSignatureFactory that will be used to generate the signature\r\n XMLSignatureFactory fac = XMLSignatureFactory.getInstance(&quot;DOM&quot;);\r\n\r\n  // Create a Reference to the whole document, using SHA256 digest algorithm\r\n  Reference ref = fac.newReference(&quot;&quot;, fac.newDigestMethod(DigestMethod.SHA256, null),\r\n Collections.singletonList(\r\n\t\t fac.newTransform(Transform.ENVELOPED, (TransformParameterSpec) null)), null, null);\r\n\r\n // Create a SignedInfo with the above Reference\r\n SignedInfo si = fac.newSignedInfo( \r\n fac.newCanonicalizationMethod(CanonicalizationMethod.INCLUSIVE,\r\n(C14NMethodParameterSpec) null), fac.newSignatureMethod(SignatureMethod.RSA_SHA256 , null),\r\nCollections.singletonList(ref));\r\n\r\n // Create a KeyInfo with the certificate information\r\n KeyInfoFactory kif = fac.getKeyInfoFactory();\r\n\r\n X509Data x509d = kif.newX509Data(Collections.singletonList(cert));\r\n KeyInfo ki = kif.newKeyInfo(Collections.singletonList(x509d));\r\n\r\n // Create a new XML signature and sign the document with the private key\r\n DOMSignContext dsc = new DOMSignContext(privateKey, doc.getDocumentElement());\r\n XMLSignature signature = fac.newXMLSignature(si, ki);\r\n \r\n signature.sign(dsc);\r\n\r\n // Save the signed document to a file\r\n TransformerFactory tf = TransformerFactory.newInstance();\r\n Transformer trans = tf.newTransformer();\r\n\r\n StreamResult result = new StreamResult(new FileOutputStream(&quot;./documents/response.xml&quot;));\r\n \r\n\r\n trans.transform(new DOMSource(doc), result);\r\n System.out.println(&quot;XML document signed successfully.&quot;);\r\n  \r\n  } \r\n}\r\n```\r\n\r\n**Bellow code is a fully functional C# code that is  generating valid signatures but for this case I need this to be generated on java**\r\n\r\n```\r\n//this is the class that generates the XML signed\r\n  using System;\r\nusing System.Collections.Generic;\r\nusing System.Linq;\r\nusing System.Runtime.Intrinsics.X86;\r\nusing System.Security.Cryptography.X509Certificates;\r\nusing System.Security.Cryptography.Xml;\r\nusing System.Text;\r\nusing System.Threading.Tasks;\r\nusing System.Xml;\r\n\r\nnamespace ConsoleApp2\r\n{\r\n     class xmlSign\r\n    {\r\n\r\n\r\n      \r\n\r\n        public XmlDocument SignXmlWithP12(XmlDocument? xmlDoc, X509Certificate2 cert)\r\n        {\r\n            //Obtenemos la llave privada del certificado\r\n            var llavePrivada = cert.PrivateKey;\r\n            //Creamos un SignedXml object que contendr&#225; el documento.\r\n            SignedXml xmlFirmado = new SignedXml(xmlDoc);\r\n            //Atachamos la llave privada al SignedXml document.\r\n            xmlFirmado.SigningKey = llavePrivada;\r\n            //Creamos una referencia del documento a ser firmado.\r\n            Reference reference = new Reference(); \r\n            reference.Uri   = &quot;&quot;; //Todo el documento\r\n                  //Agregamos un enveloped transformation a la referencia.\r\n            XmlDsigEnvelopedSignatureTransform env = new\r\n            XmlDsigEnvelopedSignatureTransform(true);\r\n            reference.AddTransform(env);\r\n            //Agregamos la referencia al SignedXml object.\r\n            xmlFirmado.AddReference(reference);\r\n            //Creamos un KeyInfo object.\r\n            KeyInfo keyInfo = new KeyInfo();\r\n            //Cargamos el certificado dentro de un KeyInfoX509Data object\r\n            //y luego lo a&#241;adimos al KeyInfo object.\r\n            KeyInfoX509Data clause = new KeyInfoX509Data();\r\n            //Opcionalmente se podr&#237;a agregar el Subject del certificado\r\n            //clause.AddSubjectName(cert.Subject);\r\n            clause.AddCertificate(cert);\r\n            keyInfo.AddClause(clause);\r\n            //Asignamos el KeyInfo object al SignedXml object.\r\n            xmlFirmado.KeyInfo = keyInfo; //Procedemos a\r\n            //computar la firma.\r\n                xmlFirmado.ComputeSignature();\r\n            //Obtenemos la representaci&#243;n del XML firmado y la guardamos en un\r\n          //  XmlElement object\r\n            XmlElement xmlFirmaDigital = xmlFirmado.GetXml();\r\n            //Adicionamos el elemento de la firma al documento XML.\r\n            xmlDoc.DocumentElement.AppendChild(xmlDoc.ImportNode(xmlFirmaDigital, true));\r\n            \r\n            return xmlDoc;\r\n        }\r\n\r\n\r\n\r\n\r\n\r\n\r\n      \r\n\r\n\r\n    }\r\n}\r\n\r\n \r\n\r\n\r\n// this is the main class\r\n\r\n\r\nusing ConsoleApp2;\r\nusing System.Security.Cryptography.X509Certificates;\r\nusing System.Xml;\r\n\r\nxmlSign xmlsignedDOC= new xmlSign();\r\nXmlDocument doc = new XmlDocument(  );\r\n\r\ndoc.PreserveWhitespace = false;\r\ndoc.Load(&quot;C:\\\\Users\\\\FelixRojas\\\\source\\\\repos\\\\ConsoleApp2\\\\ConsoleApp2\\\\docs\\\\request.xml&quot;);\r\n\r\n\r\n\r\nX509Certificate2 cert =\r\n\r\n    new X509Certificate2(\r\n\r\n\r\n        fileName: &quot;C:\\\\Users\\\\FelixRojas\\\\source\\\\repos\\\\ConsoleApp2\\\\ConsoleApp2\\\\docs\\\\4300648_identity.p12&quot;,\r\n        password:\r\n\r\n        &quot;pass&quot;\r\n\r\n        );\r\n   \r\n\r\ndoc = xmlsignedDOC.SignXmlWithP12(doc, cert) ;\r\n\r\n\r\ndoc.Save(&quot;C:\\\\Users\\\\FelixRojas\\\\source\\\\repos\\\\ConsoleApp2\\\\ConsoleApp2\\\\docs\\\\request.xml&quot;);\r\n\r\n```\r\nI am able to generate the signed xml, but the digestValue and the SignatureValue are different that what are expected to be, and this results in invalid signature when I test it. \r\n\r\n","title":"Invalid XML sign response with java signature method","body":"<p>I have this java code with which I can sign an XML file with a .p12 certificate.</p>\n<p>The requirements for this signature are the signatureMethod and the digetsMethod need to use sha256 as the encryption algorithm.</p>\n<p>The DigestValue should be the Property that contains the value encoded in Base 64 format of the summary of the object described by the Uri property in the reference tag.</p>\n<p>In this case, what changes should we make in order to meet all of this requirements. Also the requirement needs that the xml does not preserve white spaces.</p>\n<p>Currently I am getting invalid signature when I test the signed XML.</p>\n<p>Here is my code bellow so far:</p>\n<pre><code>package xmlCreateSignature;\nimport java.io.*;\nimport java.security.*;\nimport java.security.cert.Certificate;\nimport java.security.cert.CertificateException;\nimport java.util.Collections;\nimport javax.xml.XMLConstants;\nimport javax.xml.crypto.*;\nimport javax.xml.crypto.dom.*;\nimport javax.xml.crypto.dsig.*;\nimport javax.xml.crypto.dsig.dom.*;\nimport javax.xml.crypto.dsig.keyinfo.*;\nimport javax.xml.crypto.dsig.spec.C14NMethodParameterSpec;\nimport javax.xml.crypto.dsig.spec.TransformParameterSpec;\nimport javax.xml.parsers.*;\nimport javax.xml.transform.*;\nimport javax.xml.transform.dom.*;\nimport javax.xml.transform.stream.*;\nimport org.w3c.dom.Element;\nimport org.w3c.dom.Node;\n\npublic class testesas { \n  public static  void main(String[] args) throws Exception {\n      \n System.setProperty(&quot;com.sun.org.apache.xml.internal.security.ignoreLineBreaks&quot;, &quot;true&quot;);\n String pass =&quot;pass&quot; ;\n // Load the XML document\n DocumentBuilderFactory dbf =  DocumentBuilderFactory.newInstance( );\n  \n dbf.setIgnoringElementContentWhitespace(true);\n// dbf.setNamespaceAware(false);\n dbf.setFeature(XMLConstants.FEATURE_SECURE_PROCESSING, true);\n DocumentBuilder builder = dbf.newDocumentBuilder();\n\n org.w3c.dom.Document doc = builder.parse(new File(&quot;./documents/request.xml&quot;));\n doc.getDocumentElement().normalize();\n\n // Load the certificate and private key from the .p12 file\n String providerName=&quot;SunJSSE&quot;;\n KeyStore ks = KeyStore.getInstance(&quot;PKCS12&quot;, providerName);\n ks.load(new FileInputStream(&quot;./documents/4300648_identity.p12&quot;), pass.toCharArray());\n String alias = (String) ks.aliases().nextElement();\n PrivateKey privateKey = (PrivateKey) ks.getKey(alias, pass.toCharArray());\n Certificate cert = ks.getCertificate(alias);\n\n // Create a DOM XMLSignatureFactory that will be used to generate the signature\n XMLSignatureFactory fac = XMLSignatureFactory.getInstance(&quot;DOM&quot;);\n\n  // Create a Reference to the whole document, using SHA256 digest algorithm\n  Reference ref = fac.newReference(&quot;&quot;, fac.newDigestMethod(DigestMethod.SHA256, null),\n Collections.singletonList(\n         fac.newTransform(Transform.ENVELOPED, (TransformParameterSpec) null)), null, null);\n\n // Create a SignedInfo with the above Reference\n SignedInfo si = fac.newSignedInfo( \n fac.newCanonicalizationMethod(CanonicalizationMethod.INCLUSIVE,\n(C14NMethodParameterSpec) null), fac.newSignatureMethod(SignatureMethod.RSA_SHA256 , null),\nCollections.singletonList(ref));\n\n // Create a KeyInfo with the certificate information\n KeyInfoFactory kif = fac.getKeyInfoFactory();\n\n X509Data x509d = kif.newX509Data(Collections.singletonList(cert));\n KeyInfo ki = kif.newKeyInfo(Collections.singletonList(x509d));\n\n // Create a new XML signature and sign the document with the private key\n DOMSignContext dsc = new DOMSignContext(privateKey, doc.getDocumentElement());\n XMLSignature signature = fac.newXMLSignature(si, ki);\n \n signature.sign(dsc);\n\n // Save the signed document to a file\n TransformerFactory tf = TransformerFactory.newInstance();\n Transformer trans = tf.newTransformer();\n\n StreamResult result = new StreamResult(new FileOutputStream(&quot;./documents/response.xml&quot;));\n \n\n trans.transform(new DOMSource(doc), result);\n System.out.println(&quot;XML document signed successfully.&quot;);\n  \n  } \n}\n</code></pre>\n<p><strong>Bellow code is a fully functional C# code that is  generating valid signatures but for this case I need this to be generated on java</strong></p>\n<pre><code>//this is the class that generates the XML signed\n  using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Runtime.Intrinsics.X86;\nusing System.Security.Cryptography.X509Certificates;\nusing System.Security.Cryptography.Xml;\nusing System.Text;\nusing System.Threading.Tasks;\nusing System.Xml;\n\nnamespace ConsoleApp2\n{\n     class xmlSign\n    {\n\n\n      \n\n        public XmlDocument SignXmlWithP12(XmlDocument? xmlDoc, X509Certificate2 cert)\n        {\n            //Obtenemos la llave privada del certificado\n            var llavePrivada = cert.PrivateKey;\n            //Creamos un SignedXml object que contendrá el documento.\n            SignedXml xmlFirmado = new SignedXml(xmlDoc);\n            //Atachamos la llave privada al SignedXml document.\n            xmlFirmado.SigningKey = llavePrivada;\n            //Creamos una referencia del documento a ser firmado.\n            Reference reference = new Reference(); \n            reference.Uri   = &quot;&quot;; //Todo el documento\n                  //Agregamos un enveloped transformation a la referencia.\n            XmlDsigEnvelopedSignatureTransform env = new\n            XmlDsigEnvelopedSignatureTransform(true);\n            reference.AddTransform(env);\n            //Agregamos la referencia al SignedXml object.\n            xmlFirmado.AddReference(reference);\n            //Creamos un KeyInfo object.\n            KeyInfo keyInfo = new KeyInfo();\n            //Cargamos el certificado dentro de un KeyInfoX509Data object\n            //y luego lo añadimos al KeyInfo object.\n            KeyInfoX509Data clause = new KeyInfoX509Data();\n            //Opcionalmente se podría agregar el Subject del certificado\n            //clause.AddSubjectName(cert.Subject);\n            clause.AddCertificate(cert);\n            keyInfo.AddClause(clause);\n            //Asignamos el KeyInfo object al SignedXml object.\n            xmlFirmado.KeyInfo = keyInfo; //Procedemos a\n            //computar la firma.\n                xmlFirmado.ComputeSignature();\n            //Obtenemos la representación del XML firmado y la guardamos en un\n          //  XmlElement object\n            XmlElement xmlFirmaDigital = xmlFirmado.GetXml();\n            //Adicionamos el elemento de la firma al documento XML.\n            xmlDoc.DocumentElement.AppendChild(xmlDoc.ImportNode(xmlFirmaDigital, true));\n            \n            return xmlDoc;\n        }\n\n\n\n\n\n\n      \n\n\n    }\n}\n\n \n\n\n// this is the main class\n\n\nusing ConsoleApp2;\nusing System.Security.Cryptography.X509Certificates;\nusing System.Xml;\n\nxmlSign xmlsignedDOC= new xmlSign();\nXmlDocument doc = new XmlDocument(  );\n\ndoc.PreserveWhitespace = false;\ndoc.Load(&quot;C:\\\\Users\\\\FelixRojas\\\\source\\\\repos\\\\ConsoleApp2\\\\ConsoleApp2\\\\docs\\\\request.xml&quot;);\n\n\n\nX509Certificate2 cert =\n\n    new X509Certificate2(\n\n\n        fileName: &quot;C:\\\\Users\\\\FelixRojas\\\\source\\\\repos\\\\ConsoleApp2\\\\ConsoleApp2\\\\docs\\\\4300648_identity.p12&quot;,\n        password:\n\n        &quot;pass&quot;\n\n        );\n   \n\ndoc = xmlsignedDOC.SignXmlWithP12(doc, cert) ;\n\n\ndoc.Save(&quot;C:\\\\Users\\\\FelixRojas\\\\source\\\\repos\\\\ConsoleApp2\\\\ConsoleApp2\\\\docs\\\\request.xml&quot;);\n\n</code></pre>\n<p>I am able to generate the signed xml, but the digestValue and the SignatureValue are different that what are expected to be, and this results in invalid signature when I test it.</p>\n"},{"tags":["java","spring-boot","spring-data-jpa"],"comments":[{"owner":{"account_id":6463892,"reputation":15974,"user_id":5277820,"accept_rate":68,"display_name":"dur"},"score":0,"creation_date":1684342100,"post_id":76273769,"comment_id":134505535,"body_markdown":"What version of Spring Boot do you use?","body":"What version of Spring Boot do you use?"},{"owner":{"account_id":28621417,"reputation":1,"user_id":21914390,"display_name":"ksushagolubeffa"},"score":0,"creation_date":1684425050,"post_id":76273769,"comment_id":134518702,"body_markdown":"I found a problem. Instead of &quot;public&quot; modificator on Controller&#39;‎s methods I used &quot;private&quot;. So it didn&#39;‎t work.","body":"I found a problem. Instead of &quot;public&quot; modificator on Controller&#39;‎s methods I used &quot;private&quot;. So it didn&#39;‎t work."}],"answers":[{"tags":[],"owner":{"account_id":794766,"reputation":158675,"user_id":871026,"accept_rate":76,"display_name":"Reimeus"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684337996,"creation_date":1684337996,"answer_id":76273861,"question_id":76273769,"body_markdown":"The service needs to be injected before using\r\n\r\n    @Autowired\r\n    private final MediaContentServiceImpl service;\r\n\r\nThe same applies to the other dependencies, e.g. repositories","title":"Cannot invoke &quot;org.example.service.impl.MediaContentServiceImpl.findAllContent()&quot; because &quot;this.service&quot; is null","body":"<p>The service needs to be injected before using</p>\n<pre><code>@Autowired\nprivate final MediaContentServiceImpl service;\n</code></pre>\n<p>The same applies to the other dependencies, e.g. repositories</p>\n"}],"owner":{"account_id":28621417,"reputation":1,"user_id":21914390,"display_name":"ksushagolubeffa"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1684341730,"creation_date":1684337351,"question_id":76273769,"body_markdown":"I am creating Spring Boot App. \r\nThere I have MediaContent Entity:\r\n\r\n```\r\n@Entity\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@Data\r\n@Table(name = &quot;media_content&quot;)\r\npublic class MediaContent extends AbstractEntity{\r\n\r\n    @Column(unique = true)\r\n    private String name;\r\n    @Column\r\n    @Lob\r\n    private byte[] video;\r\n    @Column\r\n    @Lob\r\n    private byte[] previewImage;\r\n    @Column\r\n    private String description;\r\n    @Column\r\n    @Enumerated(value = EnumType.STRING)\r\n    private Status status;\r\n\r\n    @ManyToOne(cascade = CascadeType.REFRESH, fetch = FetchType.EAGER)\r\n    @JoinColumn\r\n    private User user;\r\n\r\n    @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY, mappedBy = &quot;content&quot;)\r\n    private List&lt;Like&gt; likes = new ArrayList&lt;&gt;();\r\n\r\n    @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY, mappedBy = &quot;content&quot;)\r\n    private List&lt;MediaComments&gt; comments = new ArrayList&lt;&gt;();\r\n\r\n    public enum Status{\r\n        ACCEPTED, REJECTED, UNDER_REVIEW\r\n        }\r\n}\r\n```\r\n\r\nAlso I have MediaConentRepository, Service and Service Implementation\r\n\r\n```\r\npublic interface MediaContentRepository extends JpaRepository&lt;MediaContent, UUID&gt; {\r\n    MediaContent findMediaContentByName(String name);\r\n}\r\n```\r\n\r\n```\r\npublic interface MediaContentService {\r\n\r\n    List&lt;MediaContent&gt; findAllContent();\r\n\r\n    List&lt;MediaComments&gt; findAllComments(MediaContent content);\r\n\r\n    Integer getAllLikes(MediaContent content);\r\n\r\n    boolean isLiked(MediaContent content, Principal principal);\r\n\r\n    User getUserByPrincipal(Principal principal);\r\n\r\n    MediaContent findContentById(UUID id);\r\n\r\n    void updateMediaContent(MediaContent content, MultipartFile imageFile, MultipartFile videoFile) throws IOException;\r\n\r\n    void addMediaContent(Principal principal, MediaContent content, MultipartFile imageFile, MultipartFile videoFile) throws IOException;\r\n\r\n    boolean deleteMediaContent(User user, UUID id);\r\n}\r\n```\r\n\r\n```\r\n@Service\r\n@RequiredArgsConstructor\r\npublic class MediaContentServiceImpl implements MediaContentService {\r\n\r\n    private final MediaContentRepository repository;\r\n    private final UserRepository userRepository;\r\n    private final MediaCommentsRepository commentsRepository;\r\n\r\n    @Override\r\n    public List&lt;MediaContent&gt; findAllContent() {\r\n        return repository.findAll().stream().filter(content -&gt; content.getStatus()== MediaContent.Status.ACCEPTED).collect(Collectors.toList());\r\n    }\r\n\r\n    @Override\r\n    public List&lt;MediaComments&gt; findAllComments(MediaContent content) {\r\n        List&lt;MediaComments&gt; commentList = new ArrayList&lt;&gt;();\r\n        commentsRepository.findAll().forEach(comments -&gt; {\r\n            if(comments.getMediaID().equals(content.getUuid())){\r\n                commentList.add(comments);\r\n            }\r\n        });\r\n        return commentList;\r\n    }\r\n\r\n    @Override\r\n    public Integer getAllLikes(MediaContent content) {\r\n        return content.getLikes().size();\r\n    }\r\n\r\n    @Override\r\n    public boolean isLiked(MediaContent content, Principal principal) {\r\n        User user = userRepository.findUserByUsername(principal.getName());\r\n        if(content.getLikes().stream().filter(like-&gt;like.getUser()==user).count() == 1){\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    @Override\r\n    public MediaContent findContentById(UUID id) {\r\n        return repository.findById(id).orElse(null);\r\n    }\r\n\r\n    @Override\r\n    public void updateMediaContent(MediaContent content, MultipartFile imageFile, MultipartFile videoFile) throws IOException {\r\n        MediaContent content1 = repository.findById(content.getUuid()).orElse(null);\r\n        if(content1!=null){\r\n            byte[] imageBytes = imageFile.getBytes();\r\n            content.setPreviewImage(imageBytes);\r\n            byte[] videoBytes = videoFile.getBytes();\r\n            content.setVideo(videoBytes);\r\n            content.setStatus(MediaContent.Status.UNDER_REVIEW);\r\n            repository.delete(content1);\r\n            repository.save(content);\r\n        } else{\r\n            log.error(&quot;not such content1 in database&quot;);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void addMediaContent(Principal principal, MediaContent content, MultipartFile imageFile, MultipartFile videoFile) throws IOException {\r\n        User user = getUserByPrincipal(principal);\r\n        if(user.getRole() == User.Role.ADMIN){\r\n            content.setStatus(MediaContent.Status.ACCEPTED);\r\n        }\r\n        content.setUser(user);\r\n        byte[] imageBytes = imageFile.getBytes();\r\n        byte[] videoBytes = videoFile.getBytes();\r\n        content.setVideo(videoBytes);\r\n        content.setPreviewImage(imageBytes);\r\n        repository.save(content);\r\n    }\r\n\r\n    @Override\r\n    public User getUserByPrincipal(Principal principal) {\r\n        if (principal == null) return new User();\r\n        return userRepository.findUserByUsername(principal.getName());\r\n    }\r\n\r\n    @Override\r\n    public boolean deleteMediaContent(User user, UUID id) {\r\n        MediaContent content = repository.findById(id).orElse(null);\r\n        if(content!=null){\r\n            if(content.getUser().getUuid().equals(user.getUuid())){\r\n                repository.delete(content);\r\n                return true;\r\n            }\r\n            log.error(&quot;Media content with id = {} is not found&quot;, id);\r\n\r\n        } else{\r\n            log.error(&quot;not such content in database&quot;);\r\n        }\r\n        return false;\r\n    }\r\n}\r\n```\r\n\r\nI want to get all my media content. I wrote 2 different methods for RestController:\r\n\r\n```\r\n@RestController\r\n@RequiredArgsConstructor\r\npublic class MediaContentController {\r\n    private final MediaContentServiceImpl service;\r\n\r\n    @PermitAll\r\n    @GetMapping(&quot;/media&quot;)\r\n    @ResponseBody\r\n    private List&lt;MediaContentResponse&gt; getAllMediaContents(){\r\n        List&lt;MediaContent&gt; contentList = service.findAllContent();\r\n        List&lt;MediaContentResponse&gt; list = new ArrayList&lt;&gt;();\r\n        contentList.forEach(content -&gt; {\r\n            list.add(new MediaContentResponse(\r\n                    content.getUuid(), content.getName(), content.getDescription(), content.getUser()\r\n            ));\r\n        });\r\n        return list;\r\n    }\r\n\r\n    @PermitAll\r\n    @GetMapping(&quot;/media&quot;)\r\n    public ResponseEntity&lt;List&lt;MediaContent&gt;&gt; getAll(){\r\n        List&lt;MediaContent&gt; mediaContents = service.findAllContent();\r\n        return ResponseEntity.ok(mediaContents);\r\n    }\r\n}\r\n```\r\n\r\nbut in first case I have this exception &quot;Cannot invoke &quot;org.example.service.impl.MediaContentServiceImpl.findAllContent()&quot; because &quot;this.service&quot; is null&quot;. when I use the second one, I get data\r\n\r\nPlease, help me, where is the problem? I have exception like this in my other controllers. I tried to remove some annotations, change RestController to Controller, but all this didn`t help me.`your text`","title":"Cannot invoke &quot;org.example.service.impl.MediaContentServiceImpl.findAllContent()&quot; because &quot;this.service&quot; is null","body":"<p>I am creating Spring Boot App.\nThere I have MediaContent Entity:</p>\n<pre><code>@Entity\n@AllArgsConstructor\n@NoArgsConstructor\n@Data\n@Table(name = &quot;media_content&quot;)\npublic class MediaContent extends AbstractEntity{\n\n    @Column(unique = true)\n    private String name;\n    @Column\n    @Lob\n    private byte[] video;\n    @Column\n    @Lob\n    private byte[] previewImage;\n    @Column\n    private String description;\n    @Column\n    @Enumerated(value = EnumType.STRING)\n    private Status status;\n\n    @ManyToOne(cascade = CascadeType.REFRESH, fetch = FetchType.EAGER)\n    @JoinColumn\n    private User user;\n\n    @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY, mappedBy = &quot;content&quot;)\n    private List&lt;Like&gt; likes = new ArrayList&lt;&gt;();\n\n    @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY, mappedBy = &quot;content&quot;)\n    private List&lt;MediaComments&gt; comments = new ArrayList&lt;&gt;();\n\n    public enum Status{\n        ACCEPTED, REJECTED, UNDER_REVIEW\n        }\n}\n</code></pre>\n<p>Also I have MediaConentRepository, Service and Service Implementation</p>\n<pre><code>public interface MediaContentRepository extends JpaRepository&lt;MediaContent, UUID&gt; {\n    MediaContent findMediaContentByName(String name);\n}\n</code></pre>\n<pre><code>public interface MediaContentService {\n\n    List&lt;MediaContent&gt; findAllContent();\n\n    List&lt;MediaComments&gt; findAllComments(MediaContent content);\n\n    Integer getAllLikes(MediaContent content);\n\n    boolean isLiked(MediaContent content, Principal principal);\n\n    User getUserByPrincipal(Principal principal);\n\n    MediaContent findContentById(UUID id);\n\n    void updateMediaContent(MediaContent content, MultipartFile imageFile, MultipartFile videoFile) throws IOException;\n\n    void addMediaContent(Principal principal, MediaContent content, MultipartFile imageFile, MultipartFile videoFile) throws IOException;\n\n    boolean deleteMediaContent(User user, UUID id);\n}\n</code></pre>\n<pre><code>@Service\n@RequiredArgsConstructor\npublic class MediaContentServiceImpl implements MediaContentService {\n\n    private final MediaContentRepository repository;\n    private final UserRepository userRepository;\n    private final MediaCommentsRepository commentsRepository;\n\n    @Override\n    public List&lt;MediaContent&gt; findAllContent() {\n        return repository.findAll().stream().filter(content -&gt; content.getStatus()== MediaContent.Status.ACCEPTED).collect(Collectors.toList());\n    }\n\n    @Override\n    public List&lt;MediaComments&gt; findAllComments(MediaContent content) {\n        List&lt;MediaComments&gt; commentList = new ArrayList&lt;&gt;();\n        commentsRepository.findAll().forEach(comments -&gt; {\n            if(comments.getMediaID().equals(content.getUuid())){\n                commentList.add(comments);\n            }\n        });\n        return commentList;\n    }\n\n    @Override\n    public Integer getAllLikes(MediaContent content) {\n        return content.getLikes().size();\n    }\n\n    @Override\n    public boolean isLiked(MediaContent content, Principal principal) {\n        User user = userRepository.findUserByUsername(principal.getName());\n        if(content.getLikes().stream().filter(like-&gt;like.getUser()==user).count() == 1){\n            return true;\n        }\n        return false;\n    }\n\n    @Override\n    public MediaContent findContentById(UUID id) {\n        return repository.findById(id).orElse(null);\n    }\n\n    @Override\n    public void updateMediaContent(MediaContent content, MultipartFile imageFile, MultipartFile videoFile) throws IOException {\n        MediaContent content1 = repository.findById(content.getUuid()).orElse(null);\n        if(content1!=null){\n            byte[] imageBytes = imageFile.getBytes();\n            content.setPreviewImage(imageBytes);\n            byte[] videoBytes = videoFile.getBytes();\n            content.setVideo(videoBytes);\n            content.setStatus(MediaContent.Status.UNDER_REVIEW);\n            repository.delete(content1);\n            repository.save(content);\n        } else{\n            log.error(&quot;not such content1 in database&quot;);\n        }\n    }\n\n    @Override\n    public void addMediaContent(Principal principal, MediaContent content, MultipartFile imageFile, MultipartFile videoFile) throws IOException {\n        User user = getUserByPrincipal(principal);\n        if(user.getRole() == User.Role.ADMIN){\n            content.setStatus(MediaContent.Status.ACCEPTED);\n        }\n        content.setUser(user);\n        byte[] imageBytes = imageFile.getBytes();\n        byte[] videoBytes = videoFile.getBytes();\n        content.setVideo(videoBytes);\n        content.setPreviewImage(imageBytes);\n        repository.save(content);\n    }\n\n    @Override\n    public User getUserByPrincipal(Principal principal) {\n        if (principal == null) return new User();\n        return userRepository.findUserByUsername(principal.getName());\n    }\n\n    @Override\n    public boolean deleteMediaContent(User user, UUID id) {\n        MediaContent content = repository.findById(id).orElse(null);\n        if(content!=null){\n            if(content.getUser().getUuid().equals(user.getUuid())){\n                repository.delete(content);\n                return true;\n            }\n            log.error(&quot;Media content with id = {} is not found&quot;, id);\n\n        } else{\n            log.error(&quot;not such content in database&quot;);\n        }\n        return false;\n    }\n}\n</code></pre>\n<p>I want to get all my media content. I wrote 2 different methods for RestController:</p>\n<pre><code>@RestController\n@RequiredArgsConstructor\npublic class MediaContentController {\n    private final MediaContentServiceImpl service;\n\n    @PermitAll\n    @GetMapping(&quot;/media&quot;)\n    @ResponseBody\n    private List&lt;MediaContentResponse&gt; getAllMediaContents(){\n        List&lt;MediaContent&gt; contentList = service.findAllContent();\n        List&lt;MediaContentResponse&gt; list = new ArrayList&lt;&gt;();\n        contentList.forEach(content -&gt; {\n            list.add(new MediaContentResponse(\n                    content.getUuid(), content.getName(), content.getDescription(), content.getUser()\n            ));\n        });\n        return list;\n    }\n\n    @PermitAll\n    @GetMapping(&quot;/media&quot;)\n    public ResponseEntity&lt;List&lt;MediaContent&gt;&gt; getAll(){\n        List&lt;MediaContent&gt; mediaContents = service.findAllContent();\n        return ResponseEntity.ok(mediaContents);\n    }\n}\n</code></pre>\n<p>but in first case I have this exception &quot;Cannot invoke &quot;org.example.service.impl.MediaContentServiceImpl.findAllContent()&quot; because &quot;this.service&quot; is null&quot;. when I use the second one, I get data</p>\n<p>Please, help me, where is the problem? I have exception like this in my other controllers. I tried to remove some annotations, change RestController to Controller, but all this didn<code>t help me.</code>your text`</p>\n"},{"tags":["java","amazon-web-services","testcontainers","aws-secrets-manager","localstack"],"comments":[{"owner":{"account_id":4641623,"reputation":8841,"user_id":3761297,"accept_rate":94,"display_name":"committedandroider"},"score":0,"creation_date":1574105923,"post_id":58914341,"comment_id":104104795,"body_markdown":"&#39;How could I configure the LocalStackContainer to accept requests without any credentials validation going on?&#39;    - I don&#39;t think you can because you&#39;re trying to make requests to aws secretsmanager which requires valid aws credentials","body":"&#39;How could I configure the LocalStackContainer to accept requests without any credentials validation going on?&#39;    - I don&#39;t think you can because you&#39;re trying to make requests to aws secretsmanager which requires valid aws credentials"},{"owner":{"account_id":230866,"reputation":653,"user_id":494724,"accept_rate":26,"display_name":"unknown"},"score":0,"creation_date":1616464196,"post_id":58914341,"comment_id":118005093,"body_markdown":"@Ira Re, I am also facing the same issue. did you find any solution?","body":"@Ira Re, I am also facing the same issue. did you find any solution?"},{"owner":{"account_id":4430189,"reputation":730,"user_id":3607513,"accept_rate":80,"display_name":"Ira Re"},"score":0,"creation_date":1616505597,"post_id":58914341,"comment_id":118018453,"body_markdown":"I don&#39;t exactly remember how the error was solved. I can see now that my LocalStackContainer has two other env vars:\n.withEnv(&quot;HOSTNAME&quot;, &quot;https://secretsmanager.eu-west-1.amazonaws.com&quot;)\n.withEnv(&quot;LOCALSTACK_HOSTNAME&quot;, &quot;https://secretsmanager.eu-west-1.amazonaws.com&quot;)\nNot sure though, if that&#39;s what I was missing.","body":"I don&#39;t exactly remember how the error was solved. I can see now that my LocalStackContainer has two other env vars: .withEnv(&quot;HOSTNAME&quot;, &quot;<a href=\"https://secretsmanager.eu-west-1.amazonaws.com&quot;\" rel=\"nofollow noreferrer\">secretsmanager.eu-west-1.amazonaws.com&quot;</a>) .withEnv(&quot;LOCALSTACK_HOSTNAME&quot;, &quot;<a href=\"https://secretsmanager.eu-west-1.amazonaws.com&quot;\" rel=\"nofollow noreferrer\">secretsmanager.eu-west-1.amazonaws.com&quot;</a>) Not sure though, if that&#39;s what I was missing."},{"owner":{"account_id":230866,"reputation":653,"user_id":494724,"accept_rate":26,"display_name":"unknown"},"score":0,"creation_date":1616594674,"post_id":58914341,"comment_id":118051425,"body_markdown":"Thanks for the quick reply. I have tried but still, I get the same error. Could you please have a look https://github.com/testcontainers/testcontainers-java/issues/3926.","body":"Thanks for the quick reply. I have tried but still, I get the same error. Could you please have a look <a href=\"https://github.com/testcontainers/testcontainers-java/issues/3926\" rel=\"nofollow noreferrer\">github.com/testcontainers/testcontainers-java/issues/3926</a>."},{"owner":{"account_id":230866,"reputation":653,"user_id":494724,"accept_rate":26,"display_name":"unknown"},"score":0,"creation_date":1616602117,"post_id":58914341,"comment_id":118055604,"body_markdown":"@Ira Re instead of secretsmanager.eu-west-1.amazonaws.com I use localhost.. – unknown 2 hours ago   Delete","body":"@Ira Re instead of secretsmanager.eu-west-1.amazonaws.com I use localhost.. – unknown 2 hours ago   Delete"},{"owner":{"account_id":230866,"reputation":653,"user_id":494724,"accept_rate":26,"display_name":"unknown"},"score":0,"creation_date":1616647253,"post_id":58914341,"comment_id":118069912,"body_markdown":"@Ira Re, it would be great if you post the answer here with a sample working code","body":"@Ira Re, it would be great if you post the answer here with a sample working code"},{"owner":{"account_id":230866,"reputation":653,"user_id":494724,"accept_rate":26,"display_name":"unknown"},"score":0,"creation_date":1616762770,"post_id":58914341,"comment_id":118111373,"body_markdown":"you can find the working sample here https://stackoverflow.com/questions/66811893/localstack-throws-the-security-token-included-in-the-request-is-invalid","body":"you can find the working sample here <a href=\"https://stackoverflow.com/questions/66811893/localstack-throws-the-security-token-included-in-the-request-is-invalid\" title=\"localstack throws the security token included in the request is invalid\">stackoverflow.com/questions/66811893/&hellip;</a>"},{"owner":{"account_id":4430189,"reputation":730,"user_id":3607513,"accept_rate":80,"display_name":"Ira Re"},"score":0,"creation_date":1617275047,"post_id":58914341,"comment_id":118262014,"body_markdown":"Thanks for posting the answer here. Sorry, didn&#39;t have time to get to it earlier.","body":"Thanks for posting the answer here. Sorry, didn&#39;t have time to get to it earlier."}],"answers":[{"tags":[],"owner":{"account_id":15398959,"reputation":1,"user_id":11109107,"display_name":"Глеб Заборовский"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1684341565,"creation_date":1640049937,"answer_id":70429727,"question_id":58914341,"body_markdown":"Assuming you prefer spring boot test and junit5 over alternatives, `@DynamicPropertySource` can be quite handy here\r\n```java\r\nprivate static final LocalStackContainer LOCALSTACK = ...;\r\n\r\n@DynamicPropertySource\r\nstatic void setCredentials(DynamicPropertyRegistry registry) {\r\n    var credentials = LOCALSTACK.getDefaultCredentialsProvider().getCredentials();\r\n    registry.add(&quot;cloud.aws.region.static&quot;, () -&gt; &quot;eu-central-1&quot;);\r\n    registry.add(&quot;cloud.aws.credentials.access-key&quot;, () -&gt; credentials.getAWSAccessKeyId());\r\n    registry.add(&quot;cloud.aws.credentials.secret-key&quot;, () -&gt; credentials.getAWSSecretKey());\r\n    registry.add(&quot;cloud.aws.s3.endpoint&quot;, () -&gt; LOCALSTACK.getEndpointOverride(S3));\r\n}\r\n```\r\nAlso please doublecheck you&#39;ve overridden the endpoints you rely on (s3 in my example), otherwise you may request real AWS API instead of the containerized one","title":"How to setup Localstack container not requiring credentials?","body":"<p>Assuming you prefer spring boot test and junit5 over alternatives, <code>@DynamicPropertySource</code> can be quite handy here</p>\n<pre class=\"lang-java prettyprint-override\"><code>private static final LocalStackContainer LOCALSTACK = ...;\n\n@DynamicPropertySource\nstatic void setCredentials(DynamicPropertyRegistry registry) {\n    var credentials = LOCALSTACK.getDefaultCredentialsProvider().getCredentials();\n    registry.add(&quot;cloud.aws.region.static&quot;, () -&gt; &quot;eu-central-1&quot;);\n    registry.add(&quot;cloud.aws.credentials.access-key&quot;, () -&gt; credentials.getAWSAccessKeyId());\n    registry.add(&quot;cloud.aws.credentials.secret-key&quot;, () -&gt; credentials.getAWSSecretKey());\n    registry.add(&quot;cloud.aws.s3.endpoint&quot;, () -&gt; LOCALSTACK.getEndpointOverride(S3));\n}\n</code></pre>\n<p>Also please doublecheck you've overridden the endpoints you rely on (s3 in my example), otherwise you may request real AWS API instead of the containerized one</p>\n"}],"owner":{"account_id":4430189,"reputation":730,"user_id":3607513,"accept_rate":80,"display_name":"Ira Re"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2955,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":1,"score":4,"last_activity_date":1684341565,"creation_date":1574079309,"question_id":58914341,"body_markdown":"I have following code snippet, that is supposed to run in a AWS Lambda function:\r\n\r\n    AWSSecretsManager client = AWSSecretsManagerClientBuilder.standard().withRegion(AWS_REGION).build();\r\n    GetSecretValueRequest getSecretValueRequest = new GetSecretValueRequest().withSecretId(SECRET_NAME);\r\n    GetSecretValueResult secretValue = client.getSecretValue(getSecretValueRequest);\r\n\r\nAs the lambda function is going to be run in the same VPC as the secret manager I don&#39;t have to provide credentials (`AWS_ACCESS_KEY_ID`, `AWS_SECRET_ACCESS_KEY`) for it.\r\n\r\nI use Localstack with Testcontainers for integration tests and set up the secret in the test setup like this:\r\n\r\n    AWSSecretsManager secretsManager = AWSSecretsManagerClientBuilder.standard()\r\n            .withEndpointConfiguration(secretsmanager.getEndpointConfiguration(SECRETSMANAGER))\r\n            .withCredentials(secretsmanager.getDefaultCredentialsProvider())\r\n            .build();\r\n    String secretString = &quot;{&#39;engine&#39;:&#39;mysql&#39;,&#39;port&#39;:&quot; + mysql.getMappedPort(3306) + &quot;,&#39;host&#39;:&#39;&quot; + mysql.getContainerIpAddress() + &quot;&#39;}&quot;;\r\n    CreateSecretRequest request = new CreateSecretRequest().withName(&quot;aurora&quot;)\r\n            .withSecretString(secretString)\r\n            .withRequestCredentialsProvider(secretsmanager.getDefaultCredentialsProvider());\r\n    secretsManager.createSecret(request);\r\n\r\nNow the test crashes with an error:\r\n\r\n    com.amazonaws.services.secretsmanager.model.AWSSecretsManagerException: \r\n    The security token included in the request is invalid. \r\n    (Service: AWSSecretsManager; \r\n    Status Code: 400; Error Code: \r\n    UnrecognizedClientException; \r\n    Request ID: ...\r\n\r\nHere is also the definition of the localstack container used in the test:\r\n\r\n    @ClassRule\r\n    public static LocalStackContainer secretsmanager = new LocalStackContainer(&quot;0.10.4&quot;)\r\n        .withServices(LocalStackContainer.Service.SECRETSMANAGER)\r\n        .withEnv(&quot;DEFAULT_REGION&quot;, &quot;eu-west-1&quot;)\r\n        .withExposedPorts(4584);\r\n\r\nHow could I configure the LocalStackContainer to accept requests without any credentials validation going on?","title":"How to setup Localstack container not requiring credentials?","body":"<p>I have following code snippet, that is supposed to run in a AWS Lambda function:</p>\n\n<pre><code>AWSSecretsManager client = AWSSecretsManagerClientBuilder.standard().withRegion(AWS_REGION).build();\nGetSecretValueRequest getSecretValueRequest = new GetSecretValueRequest().withSecretId(SECRET_NAME);\nGetSecretValueResult secretValue = client.getSecretValue(getSecretValueRequest);\n</code></pre>\n\n<p>As the lambda function is going to be run in the same VPC as the secret manager I don't have to provide credentials (<code>AWS_ACCESS_KEY_ID</code>, <code>AWS_SECRET_ACCESS_KEY</code>) for it.</p>\n\n<p>I use Localstack with Testcontainers for integration tests and set up the secret in the test setup like this:</p>\n\n<pre><code>AWSSecretsManager secretsManager = AWSSecretsManagerClientBuilder.standard()\n        .withEndpointConfiguration(secretsmanager.getEndpointConfiguration(SECRETSMANAGER))\n        .withCredentials(secretsmanager.getDefaultCredentialsProvider())\n        .build();\nString secretString = \"{'engine':'mysql','port':\" + mysql.getMappedPort(3306) + \",'host':'\" + mysql.getContainerIpAddress() + \"'}\";\nCreateSecretRequest request = new CreateSecretRequest().withName(\"aurora\")\n        .withSecretString(secretString)\n        .withRequestCredentialsProvider(secretsmanager.getDefaultCredentialsProvider());\nsecretsManager.createSecret(request);\n</code></pre>\n\n<p>Now the test crashes with an error:</p>\n\n<pre><code>com.amazonaws.services.secretsmanager.model.AWSSecretsManagerException: \nThe security token included in the request is invalid. \n(Service: AWSSecretsManager; \nStatus Code: 400; Error Code: \nUnrecognizedClientException; \nRequest ID: ...\n</code></pre>\n\n<p>Here is also the definition of the localstack container used in the test:</p>\n\n<pre><code>@ClassRule\npublic static LocalStackContainer secretsmanager = new LocalStackContainer(\"0.10.4\")\n    .withServices(LocalStackContainer.Service.SECRETSMANAGER)\n    .withEnv(\"DEFAULT_REGION\", \"eu-west-1\")\n    .withExposedPorts(4584);\n</code></pre>\n\n<p>How could I configure the LocalStackContainer to accept requests without any credentials validation going on?</p>\n"},{"tags":["java","lambda","java-8","java-stream"],"answers":[{"comments":[{"owner":{"account_id":13944236,"reputation":13,"user_id":10069344,"display_name":"sowmya"},"score":0,"creation_date":1684322352,"post_id":76259274,"comment_id":134500626,"body_markdown":"can you please suggest me how to write code vice versa  output will be my input and output should be like my input","body":"can you please suggest me how to write code vice versa  output will be my input and output should be like my input"},{"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"score":2,"creation_date":1684328235,"post_id":76259274,"comment_id":134501948,"body_markdown":"`JSONArray` is `Iterable`, therefore instead of using an index, you can directly iterate using `notification.forEach`.","body":"<code>JSONArray</code> is <code>Iterable</code>, therefore instead of using an index, you can directly iterate using <code>notification.forEach</code>."}],"tags":[],"owner":{"account_id":9190353,"reputation":457,"user_id":6831116,"display_name":"Gopinath Radhakrishnan"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1684341394,"creation_date":1684208840,"answer_id":76259274,"question_id":76248485,"body_markdown":"Simple way to convert a for loop into Stream is to use IntStream with forEach method. The solution defers based on the version of JSON Library that you are using. Older version throws exception that needs to be handled within the Lambda, something like below:\r\n\r\n```\r\nJSONObject nameJson = new JSONObject();\r\nJSONObject sectionJson=new JSONObject();\r\nIntStream.range(0, notification.length()).forEach(index -&gt; {\r\n\ttry {\r\n\t\tnameJson.put(notification.getJSONObject(index).get(&quot;language&quot;).toString(),notification.getJSONObject(index).get(&quot;name&quot;).toString());\r\n\t\tsectionJson.put(notification.getJSONObject(index).get(&quot;language&quot;).toString(),notification.getJSONObject(index).get(&quot;section&quot;).toString());\r\n\t} catch (JSONException e) {\r\n\t\tthrow new RuntimeException(e);\r\n\t}\r\n});\r\n\r\n``` \r\n\r\nNewer version of the JSON Library does not throw Exception on get method, sample code that works with org.json:json:20230227 version looks like below:\r\n\r\n```\r\nJSONObject nameJson = new JSONObject();\r\nJSONObject sectionJson=new JSONObject();\r\nIntStream.range(0, notification.length()).mapToObj(notification::getJSONObject).forEach(jsonObject -&gt; {\r\n\tnameJson.put(jsonObject.getString(&quot;language&quot;),jsonObject.getString(&quot;name&quot;));\r\n\tsectionJson.put(jsonObject.getString(&quot;language&quot;),jsonObject.getString(&quot;section&quot;));\r\n});\r\n```\r\n\r\n\r\nFor performing reverse, assuming that you have nameJson and sectionJson objects handy you can try something like (works with latest version of org.json:json):\r\n\r\n```\r\nList&lt;JSONObject&gt; jsonObjectList = nameJson.keySet().stream().map(language -&gt; {\r\n\tJSONObject notificationJson = new JSONObject();\r\n\tnotificationJson.put(&quot;name&quot;, nameJson.getString(language));\r\n\tnotificationJson.put(&quot;section&quot;, sectionJson.getString(language));\r\n\treturn notificationJson.put(&quot;language&quot;, language);\r\n}).collect(Collectors.toList());\r\nJSONArray notificationsJson = new JSONArray().putAll(jsonObjectList);\r\n```","title":"How to write lambda streams function to work with jsonobject with different keys and json array","body":"<p>Simple way to convert a for loop into Stream is to use IntStream with forEach method. The solution defers based on the version of JSON Library that you are using. Older version throws exception that needs to be handled within the Lambda, something like below:</p>\n<pre><code>JSONObject nameJson = new JSONObject();\nJSONObject sectionJson=new JSONObject();\nIntStream.range(0, notification.length()).forEach(index -&gt; {\n    try {\n        nameJson.put(notification.getJSONObject(index).get(&quot;language&quot;).toString(),notification.getJSONObject(index).get(&quot;name&quot;).toString());\n        sectionJson.put(notification.getJSONObject(index).get(&quot;language&quot;).toString(),notification.getJSONObject(index).get(&quot;section&quot;).toString());\n    } catch (JSONException e) {\n        throw new RuntimeException(e);\n    }\n});\n\n</code></pre>\n<p>Newer version of the JSON Library does not throw Exception on get method, sample code that works with org.json:json:20230227 version looks like below:</p>\n<pre><code>JSONObject nameJson = new JSONObject();\nJSONObject sectionJson=new JSONObject();\nIntStream.range(0, notification.length()).mapToObj(notification::getJSONObject).forEach(jsonObject -&gt; {\n    nameJson.put(jsonObject.getString(&quot;language&quot;),jsonObject.getString(&quot;name&quot;));\n    sectionJson.put(jsonObject.getString(&quot;language&quot;),jsonObject.getString(&quot;section&quot;));\n});\n</code></pre>\n<p>For performing reverse, assuming that you have nameJson and sectionJson objects handy you can try something like (works with latest version of org.json:json):</p>\n<pre><code>List&lt;JSONObject&gt; jsonObjectList = nameJson.keySet().stream().map(language -&gt; {\n    JSONObject notificationJson = new JSONObject();\n    notificationJson.put(&quot;name&quot;, nameJson.getString(language));\n    notificationJson.put(&quot;section&quot;, sectionJson.getString(language));\n    return notificationJson.put(&quot;language&quot;, language);\n}).collect(Collectors.toList());\nJSONArray notificationsJson = new JSONArray().putAll(jsonObjectList);\n</code></pre>\n"}],"owner":{"account_id":13944236,"reputation":13,"user_id":10069344,"display_name":"sowmya"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":98,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76259274,"answer_count":1,"score":0,"last_activity_date":1684341394,"creation_date":1684080843,"question_id":76248485,"body_markdown":"I&#39;m very new to Java 8 lambdas... I want to write a lambda function that takes a JSONArray, goes over its JSONObjects and creates a Json object of certain field.\r\n\r\nFor example, a function that takes the JSONArray:\r\n\r\n   \r\n\r\n    &quot;students&quot;: [\r\n        {\r\n                &quot;name&quot;: &quot;tom&quot;,\r\n                &quot;section&quot;: &quot;A&quot;,\r\n                &quot;language&quot;:&quot;english&quot;\r\n            \r\n        },\r\n        {\r\n                &quot;name&quot;: &quot;john&quot;,\r\n                &quot;section&quot;: &quot;B&quot;,\r\n                &quot;language&quot;:&quot;dutch&quot;\r\n        },\r\n        {\r\n               &quot;name&quot;: &quot;sam&quot;,\r\n                &quot;section&quot;: &quot;C&quot;,\r\n                &quot;language&quot;:&quot;spanish&quot;\r\n        }]\r\n\r\nMy output should be like-\r\n\r\n    nameJson : {&quot;english&quot;:&quot;tom&quot;,&quot;dutch&quot;:&quot;john&quot;,&quot;spanish&quot;:&quot;sam&quot;}\r\n    sectionJson: {&quot;english&quot;:&quot;A&quot;,&quot;dutch&quot;:&quot;B&quot;,&quot;spanish&quot;:&quot;C&quot;}\r\n\r\n```\r\nJSONArray notification=json.optJSONArray(&quot;studentData&quot;);\r\nJSONObject nameJson = new JSONObject();\r\nJSONObject sectionJson=new JSONObject();\r\nfor (int i=0;i&lt;notification.length();i++){\r\n    nameJson.put(notification.getJSONObject(i).get(&quot;language&quot;).toString(),notification.getJSONObject(i).get(&quot;name&quot;).toString());\r\n    sectionJson.put(notification.getJSONObject(i).get(&quot;language&quot;).toString(),notification.getJSONObject(i).getString(&quot;section&quot;).toString());\r\n    \r\n}\r\n```\r\n\r\nPlease help me out to write using lambda and streams\r\n","title":"How to write lambda streams function to work with jsonobject with different keys and json array","body":"<p>I'm very new to Java 8 lambdas... I want to write a lambda function that takes a JSONArray, goes over its JSONObjects and creates a Json object of certain field.</p>\n<p>For example, a function that takes the JSONArray:</p>\n<pre><code>&quot;students&quot;: [\n    {\n            &quot;name&quot;: &quot;tom&quot;,\n            &quot;section&quot;: &quot;A&quot;,\n            &quot;language&quot;:&quot;english&quot;\n        \n    },\n    {\n            &quot;name&quot;: &quot;john&quot;,\n            &quot;section&quot;: &quot;B&quot;,\n            &quot;language&quot;:&quot;dutch&quot;\n    },\n    {\n           &quot;name&quot;: &quot;sam&quot;,\n            &quot;section&quot;: &quot;C&quot;,\n            &quot;language&quot;:&quot;spanish&quot;\n    }]\n</code></pre>\n<p>My output should be like-</p>\n<pre><code>nameJson : {&quot;english&quot;:&quot;tom&quot;,&quot;dutch&quot;:&quot;john&quot;,&quot;spanish&quot;:&quot;sam&quot;}\nsectionJson: {&quot;english&quot;:&quot;A&quot;,&quot;dutch&quot;:&quot;B&quot;,&quot;spanish&quot;:&quot;C&quot;}\n</code></pre>\n<pre><code>JSONArray notification=json.optJSONArray(&quot;studentData&quot;);\nJSONObject nameJson = new JSONObject();\nJSONObject sectionJson=new JSONObject();\nfor (int i=0;i&lt;notification.length();i++){\n    nameJson.put(notification.getJSONObject(i).get(&quot;language&quot;).toString(),notification.getJSONObject(i).get(&quot;name&quot;).toString());\n    sectionJson.put(notification.getJSONObject(i).get(&quot;language&quot;).toString(),notification.getJSONObject(i).getString(&quot;section&quot;).toString());\n    \n}\n</code></pre>\n<p>Please help me out to write using lambda and streams</p>\n"},{"tags":["java","android","apache-poi"],"answers":[{"tags":[],"owner":{"account_id":10647346,"reputation":5559,"user_id":7839518,"display_name":"Tonnie"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684341333,"creation_date":1684341333,"answer_id":76274329,"question_id":67998260,"body_markdown":"I was having the same error on a **`Multi-Modular`** Android Project.\r\n\r\nI had the app module with 3 other modules.\r\n\r\nIn each module I had specified **`coreLibraryDesugaringEnabled true`** on the compile options - see last line on this snippet.\r\n\r\n    compileOptions {\r\n            sourceCompatibility JavaVersion.VERSION_18\r\n            targetCompatibility JavaVersion.VERSION_18\r\n            coreLibraryDesugaringEnabled true\r\n        }\r\n\r\nThe way to get around this error in a Multi-Modular Project is to leave `coreLibraryDesugaringEnabled true` just on the app module file.\r\n\r\nYou should remove it in all other modules together with dependencies implementation.","title":"Android Build Error - MethodHandle.invoke and MethodHandle.invokeExact are only supported starting with Android O (--min-api 26) (apache poi)","body":"<p>I was having the same error on a <strong><code>Multi-Modular</code></strong> Android Project.</p>\n<p>I had the app module with 3 other modules.</p>\n<p>In each module I had specified <strong><code>coreLibraryDesugaringEnabled true</code></strong> on the compile options - see last line on this snippet.</p>\n<pre><code>compileOptions {\n        sourceCompatibility JavaVersion.VERSION_18\n        targetCompatibility JavaVersion.VERSION_18\n        coreLibraryDesugaringEnabled true\n    }\n</code></pre>\n<p>The way to get around this error in a Multi-Modular Project is to leave <code>coreLibraryDesugaringEnabled true</code> just on the app module file.</p>\n<p>You should remove it in all other modules together with dependencies implementation.</p>\n"}],"owner":{"account_id":21962882,"reputation":21,"user_id":16240539,"display_name":"justSalkin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":561,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1684341333,"creation_date":1623828751,"question_id":67998260,"body_markdown":"i&#39;m getting the following error message.\r\nTrying to read a xls file using apache poi (version 5.0.0).\r\nI&#39;m quit new working with java and android studio so maybe i am just to dumb to see, what went wrong. \r\n\r\nhope someone can help me. ^^\r\n\r\n(if you need more infos, code or something like this, just ask for it. I&#39;m not sure, what you need to solve my problem.)\r\n\r\n**Error**\r\n\r\n``` \r\n&gt; Transform artifact poi-5.0.0.jar (project :poi-5.0.0) with DexingWithClasspathTransform\r\nAGPBI: {&quot;kind&quot;:&quot;error&quot;,&quot;text&quot;:&quot;com.android.tools.r8.a: MethodHandle.invoke and MethodHandle.invokeExact are only supported starting with Android O (--min-api 26)&quot;,&quot;sources&quot;:[{&quot;file&quot;:&quot;C:\\\\Users\\\\nikla\\\\AndroidStudioProjects\\\\controlling_szenario\\\\poi-5.0.0\\\\build\\\\.transforms\\\\74c17dc26c0bf73dd6362c9c309eb5e9\\\\jetified-poi-5.0.0.jar&quot;}],&quot;tool&quot;:&quot;D8&quot;}\r\n\r\n&gt; Task :app:mergeLibDexDebug FAILED\r\n\r\nFAILURE: Build failed with an exception.\r\n\r\n* What went wrong:\r\nExecution failed for task &#39;:app:mergeLibDexDebug&#39;.\r\n&gt; Could not resolve all files for configuration &#39;:app:debugRuntimeClasspath&#39;.\r\n   &gt; Failed to transform poi-5.0.0.jar (project :poi-5.0.0) to match attributes {artifactType=android-dex, dexing-enable-desugaring=true, dexing-incremental-transform=false, dexing-is-debuggable=true, dexing-min-sdk=23, org.gradle.libraryelements=jar, org.gradle.usage=java-runtime}.\r\n      &gt; Execution failed for DexingWithClasspathTransform: C:\\Users\\nikla\\AndroidStudioProjects\\controlling_szenario\\poi-5.0.0\\build\\.transforms\\74c17dc26c0bf73dd6362c9c309eb5e9\\jetified-poi-5.0.0.jar.\r\n         &gt; Error while dexing.\r\n``` \r\n**build.gradle**\r\n``` \r\nplugins {\r\n    id &#39;com.android.application&#39;\r\n}\r\n\r\nandroid {\r\n    compileSdkVersion 30\r\n    buildToolsVersion &quot;30.0.3&quot;\r\n\r\n    defaultConfig {\r\n        applicationId &quot;com.example.controlling_szenario&quot;\r\n        minSdkVersion 26\r\n        targetSdkVersion 30\r\n        versionCode 1\r\n        versionName &quot;1.0&quot;\r\n\r\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\r\n        multiDexEnabled true\r\n    }\r\n\r\n    buildTypes {\r\n        release {\r\n            minifyEnabled false\r\n            proguardFiles getDefaultProguardFile(&#39;proguard-android-optimize.txt&#39;), &#39;proguard-rules.pro&#39;\r\n        }\r\n    }\r\n    compileOptions {\r\n        sourceCompatibility JavaVersion.VERSION_1_8\r\n        targetCompatibility JavaVersion.VERSION_1_8\r\n    }\r\n}\r\n\r\ndependencies {\r\n\r\n    implementation &#39;androidx.appcompat:appcompat:1.3.0&#39;\r\n    implementation &#39;com.google.android.material:material:1.3.0&#39;\r\n    implementation &#39;androidx.constraintlayout:constraintlayout:2.0.4&#39;\r\n    implementation project(path: &#39;:poi-5.0.0&#39;)\r\n    testImplementation &#39;junit:junit:4.+&#39;\r\n    androidTestImplementation &#39;androidx.test.ext:junit:1.1.2&#39;\r\n    androidTestImplementation &#39;androidx.test.espresso:espresso-core:3.3.0&#39;\r\n\timplementation &#39;com.aldebaran:qisdk:1.7.5&#39;\r\n\timplementation &#39;com.aldebaran:qisdk-design:1.7.5&#39;\r\n\r\n}","title":"Android Build Error - MethodHandle.invoke and MethodHandle.invokeExact are only supported starting with Android O (--min-api 26) (apache poi)","body":"<p>i'm getting the following error message.\nTrying to read a xls file using apache poi (version 5.0.0).\nI'm quit new working with java and android studio so maybe i am just to dumb to see, what went wrong.</p>\n<p>hope someone can help me. ^^</p>\n<p>(if you need more infos, code or something like this, just ask for it. I'm not sure, what you need to solve my problem.)</p>\n<p><strong>Error</strong></p>\n<pre><code>&gt; Transform artifact poi-5.0.0.jar (project :poi-5.0.0) with DexingWithClasspathTransform\nAGPBI: {&quot;kind&quot;:&quot;error&quot;,&quot;text&quot;:&quot;com.android.tools.r8.a: MethodHandle.invoke and MethodHandle.invokeExact are only supported starting with Android O (--min-api 26)&quot;,&quot;sources&quot;:[{&quot;file&quot;:&quot;C:\\\\Users\\\\nikla\\\\AndroidStudioProjects\\\\controlling_szenario\\\\poi-5.0.0\\\\build\\\\.transforms\\\\74c17dc26c0bf73dd6362c9c309eb5e9\\\\jetified-poi-5.0.0.jar&quot;}],&quot;tool&quot;:&quot;D8&quot;}\n\n&gt; Task :app:mergeLibDexDebug FAILED\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nExecution failed for task ':app:mergeLibDexDebug'.\n&gt; Could not resolve all files for configuration ':app:debugRuntimeClasspath'.\n   &gt; Failed to transform poi-5.0.0.jar (project :poi-5.0.0) to match attributes {artifactType=android-dex, dexing-enable-desugaring=true, dexing-incremental-transform=false, dexing-is-debuggable=true, dexing-min-sdk=23, org.gradle.libraryelements=jar, org.gradle.usage=java-runtime}.\n      &gt; Execution failed for DexingWithClasspathTransform: C:\\Users\\nikla\\AndroidStudioProjects\\controlling_szenario\\poi-5.0.0\\build\\.transforms\\74c17dc26c0bf73dd6362c9c309eb5e9\\jetified-poi-5.0.0.jar.\n         &gt; Error while dexing.\n</code></pre>\n<p><strong>build.gradle</strong></p>\n<pre><code>plugins {\n    id 'com.android.application'\n}\n\nandroid {\n    compileSdkVersion 30\n    buildToolsVersion &quot;30.0.3&quot;\n\n    defaultConfig {\n        applicationId &quot;com.example.controlling_szenario&quot;\n        minSdkVersion 26\n        targetSdkVersion 30\n        versionCode 1\n        versionName &quot;1.0&quot;\n\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\n        multiDexEnabled true\n    }\n\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n        }\n    }\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n}\n\ndependencies {\n\n    implementation 'androidx.appcompat:appcompat:1.3.0'\n    implementation 'com.google.android.material:material:1.3.0'\n    implementation 'androidx.constraintlayout:constraintlayout:2.0.4'\n    implementation project(path: ':poi-5.0.0')\n    testImplementation 'junit:junit:4.+'\n    androidTestImplementation 'androidx.test.ext:junit:1.1.2'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.3.0'\n    implementation 'com.aldebaran:qisdk:1.7.5'\n    implementation 'com.aldebaran:qisdk-design:1.7.5'\n\n}\n</code></pre>\n"},{"tags":["java","swing","outlook","drag-and-drop"],"comments":[{"owner":{"account_id":131793,"reputation":64015,"user_id":332059,"accept_rate":57,"display_name":"Dmitry Streblechenko"},"score":0,"creation_date":1684345011,"post_id":76274302,"comment_id":134506142,"body_markdown":"I am not sure I understand the requirement - you want to drag **to** Outlook, but you don&#39;t want to open/use Outlook. How is that possible?","body":"I am not sure I understand the requirement - you want to drag <b>to</b> Outlook, but you don&#39;t want to open/use Outlook. How is that possible?"},{"owner":{"account_id":24010276,"reputation":11,"user_id":17993945,"display_name":"lstephenpost"},"score":0,"creation_date":1684349825,"post_id":76274302,"comment_id":134507117,"body_markdown":"@DmitryStreblechenko I&#39;m looking for a way to drag/drop attachments to an area of the enterprise application and let an ActiveX control send an email with attachment without opening the desktop client.  The web client should be fine though.","body":"@DmitryStreblechenko I&#39;m looking for a way to drag/drop attachments to an area of the enterprise application and let an ActiveX control send an email with attachment without opening the desktop client.  The web client should be fine though."},{"owner":{"account_id":114128,"reputation":50467,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":0,"creation_date":1684352032,"post_id":76274302,"comment_id":134507599,"body_markdown":"[Sending Emails with Java](https://www.baeldung.com/java-email)","body":"<a href=\"https://www.baeldung.com/java-email\" rel=\"nofollow noreferrer\">Sending Emails with Java</a>"},{"owner":{"account_id":131793,"reputation":64015,"user_id":332059,"accept_rate":57,"display_name":"Dmitry Streblechenko"},"score":0,"creation_date":1684354275,"post_id":76274302,"comment_id":134508034,"body_markdown":"So you don&#39;t want to use Outlook, you only want to send a message with attachment to some Exchange mailbox, right? You can use EWS or Graph for that.","body":"So you don&#39;t want to use Outlook, you only want to send a message with attachment to some Exchange mailbox, right? You can use EWS or Graph for that."},{"owner":{"account_id":24010276,"reputation":11,"user_id":17993945,"display_name":"lstephenpost"},"score":0,"creation_date":1684425610,"post_id":76274302,"comment_id":134518836,"body_markdown":"@DmitryStreblechenko thank you - this looks exactly like what i am needing.","body":"@DmitryStreblechenko thank you - this looks exactly like what i am needing."},{"owner":{"account_id":131793,"reputation":64015,"user_id":332059,"accept_rate":57,"display_name":"Dmitry Streblechenko"},"score":0,"creation_date":1684427476,"post_id":76274302,"comment_id":134519239,"body_markdown":"Keep in mind that sending though SMTP and an Office 365 server won&#39;t work unless you enable Basic auth for the tenant.","body":"Keep in mind that sending though SMTP and an Office 365 server won&#39;t work unless you enable Basic auth for the tenant."}],"owner":{"account_id":24010276,"reputation":11,"user_id":17993945,"display_name":"lstephenpost"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684341119,"creation_date":1684341119,"question_id":76274302,"body_markdown":"I am investigating the feasibility of drag/drop files **into** outlook email from a Java Swing application.  I have found several examples of dragging **from** outlook, but I want to do the opposite. Currently, the application relies on the Outlook desktop client for this.  I would like to replace this functionality with a drag/drop ActiveX control (yes, this is an old legacy application) or something similar.  The current solution relies on Outlook seat licenses for the desktop client, and that is the part that I am wanting to replace without opening the desktop client.  \r\n\r\nSo far I am in the exploratory phase of this project.  What I want to do may not even be an option within the parameters of the application.\r\n\r\nAny ideas/experience is much appreciated.\r\n","title":"Way to drag/drop attachment files from Java Swing application to Outlook without invoking Outlook client application","body":"<p>I am investigating the feasibility of drag/drop files <strong>into</strong> outlook email from a Java Swing application.  I have found several examples of dragging <strong>from</strong> outlook, but I want to do the opposite. Currently, the application relies on the Outlook desktop client for this.  I would like to replace this functionality with a drag/drop ActiveX control (yes, this is an old legacy application) or something similar.  The current solution relies on Outlook seat licenses for the desktop client, and that is the part that I am wanting to replace without opening the desktop client.</p>\n<p>So far I am in the exploratory phase of this project.  What I want to do may not even be an option within the parameters of the application.</p>\n<p>Any ideas/experience is much appreciated.</p>\n"},{"tags":["java","memory","jvm","java-11","jcmd"],"comments":[{"owner":{"account_id":4555218,"reputation":32585,"user_id":3699139,"display_name":"Jorn Vernee"},"score":0,"creation_date":1677513343,"post_id":75581702,"comment_id":133347868,"body_markdown":"For G1 memory use (as reported by the OS), this may also be relevant: https://openjdk.org/jeps/346","body":"For G1 memory use (as reported by the OS), this may also be relevant: <a href=\"https://openjdk.org/jeps/346\" rel=\"nofollow noreferrer\">openjdk.org/jeps/346</a>"},{"owner":{"account_id":1217449,"reputation":4099,"user_id":1184752,"accept_rate":43,"display_name":"Juraj Martinka"},"score":1,"creation_date":1677520130,"post_id":75581702,"comment_id":133350063,"body_markdown":"For better understanding JVM&#39;s memory usage I recommend the following excellent post: https://stackoverflow.com/questions/53451103/java-using-much-more-memory-than-heap-size-or-size-correctly-docker-memory-limi/53624438#53624438","body":"For better understanding JVM&#39;s memory usage I recommend the following excellent post: <a href=\"https://stackoverflow.com/questions/53451103/java-using-much-more-memory-than-heap-size-or-size-correctly-docker-memory-limi/53624438#53624438\" title=\"java using much more memory than heap size or size correctly docker memory limi\">stackoverflow.com/questions/53451103/&hellip;</a>"},{"owner":{"account_id":312603,"reputation":1450,"user_id":626761,"accept_rate":83,"display_name":"nodots"},"score":0,"creation_date":1677573162,"post_id":75581702,"comment_id":133359657,"body_markdown":"@JornVernee After re-reading JEP 346 I&#39;m still unclear how it applies (or if at all). Yes, 6 GB heap are fully committed, confirmed by jcmd. So apparently no heap mem has been returned to the OS. But there are ~4 GB unaccounted for. How could JEP 346 play a role in this?","body":"@JornVernee After re-reading JEP 346 I&#39;m still unclear how it applies (or if at all). Yes, 6 GB heap are fully committed, confirmed by jcmd. So apparently no heap mem has been returned to the OS. But there are ~4 GB unaccounted for. How could JEP 346 play a role in this?"},{"owner":{"account_id":312603,"reputation":1450,"user_id":626761,"accept_rate":83,"display_name":"nodots"},"score":0,"creation_date":1677573596,"post_id":75581702,"comment_id":133359770,"body_markdown":"Thanks @JurajMartinka , excellent overview indeed, I&#39;ll research further starting from there","body":"Thanks @JurajMartinka , excellent overview indeed, I&#39;ll research further starting from there"},{"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"score":0,"creation_date":1677593725,"post_id":75581702,"comment_id":133365832,"body_markdown":"If you look at the JEP, it states that it was delivered in Java 12, you are using Java 11. Still, the JEP describes the behavior before, which does apply to you.","body":"If you look at the JEP, it states that it was delivered in Java 12, you are using Java 11. Still, the JEP describes the behavior before, which does apply to you."},{"owner":{"account_id":312603,"reputation":1450,"user_id":626761,"accept_rate":83,"display_name":"nodots"},"score":0,"creation_date":1677655815,"post_id":75581702,"comment_id":133378694,"body_markdown":"@JohannesKuhn I agree that JEP 346 describes potentially relevant G1 GC behavior in Java 11. However, I fail to understand how it helps explaining the observed difference in reported memory usage. I think (and perhaps this is incorrect?) that as long as the GC does not return committed memory to the OS, the JVM still has it and jcmd should report it.","body":"@JohannesKuhn I agree that JEP 346 describes potentially relevant G1 GC behavior in Java 11. However, I fail to understand how it helps explaining the observed difference in reported memory usage. I think (and perhaps this is incorrect?) that as long as the GC does not return committed memory to the OS, the JVM still has it and jcmd should report it."}],"owner":{"account_id":312603,"reputation":1450,"user_id":626761,"accept_rate":83,"display_name":"nodots"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":411,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684341003,"creation_date":1677507919,"question_id":75581702,"body_markdown":"I&#39;m at a loss regarding the reported memory usage of my Java application (deployed on JBoss EAP) when under load. The ```java.exe``` process memory as shown by **Windows Resource Monitor** is much higher than what is reported by ```jcmd VM.native_memory```.\r\n\r\nHow can I investigate the difference?\r\n\r\n### Example ###\r\n- jcmd: Total: reserved=8417542KB, committed=7308422KB\r\n- Windows Resource Monitor: Commit (&quot;zugesichert&quot;) 12270304 KB\r\n[![java.exe as reported by Windows Resource Monitor][1]][1]\r\n\r\n### Environment ###\r\n\r\n - Oracle JDK 11.0.18\r\n   - Heap size (Xmx) 6 GB [fully committed according to jcmd]\r\n   - G1 GC\r\n - JBoss EAP 7.4.8\r\n - Windows Server 2016\r\n - The machine is a Hyper-V hosted VM with 8 GB RAM\r\n\r\n\r\n### Further observations #####\r\n\r\nMemory usage as per Resource Monitor keeps growing continually while under load whereas the values reported by ```jcmd``` seem to stabilize around 8.5 GB reserved and 7ish GB committed.\r\n\r\n  [1]: https://i.stack.imgur.com/ZR9Jr.png","title":"Java process memory usage: jcmd vs Windows Resource Monitor","body":"<p>I'm at a loss regarding the reported memory usage of my Java application (deployed on JBoss EAP) when under load. The <code>java.exe</code> process memory as shown by <strong>Windows Resource Monitor</strong> is much higher than what is reported by <code>jcmd VM.native_memory</code>.</p>\n<p>How can I investigate the difference?</p>\n<h3>Example</h3>\n<ul>\n<li>jcmd: Total: reserved=8417542KB, committed=7308422KB</li>\n<li>Windows Resource Monitor: Commit (&quot;zugesichert&quot;) 12270304 KB\n<a href=\"https://i.stack.imgur.com/ZR9Jr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZR9Jr.png\" alt=\"java.exe as reported by Windows Resource Monitor\" /></a></li>\n</ul>\n<h3>Environment</h3>\n<ul>\n<li>Oracle JDK 11.0.18\n<ul>\n<li>Heap size (Xmx) 6 GB [fully committed according to jcmd]</li>\n<li>G1 GC</li>\n</ul>\n</li>\n<li>JBoss EAP 7.4.8</li>\n<li>Windows Server 2016</li>\n<li>The machine is a Hyper-V hosted VM with 8 GB RAM</li>\n</ul>\n<h3>Further observations</h3>\n<p>Memory usage as per Resource Monitor keeps growing continually while under load whereas the values reported by <code>jcmd</code> seem to stabilize around 8.5 GB reserved and 7ish GB committed.</p>\n"},{"tags":["java","spring","spring-transactions","transactional"],"answers":[{"comments":[{"owner":{"account_id":679279,"reputation":1321,"user_id":782123,"display_name":"goe"},"score":0,"creation_date":1307071114,"post_id":6222624,"comment_id":7248036,"body_markdown":"is that the spring default behavior ?","body":"is that the spring default behavior ?"},{"owner":{"account_id":39580,"reputation":385624,"user_id":114251,"accept_rate":87,"display_name":"Arun P Johny"},"score":0,"creation_date":1307071222,"post_id":6222624,"comment_id":7248051,"body_markdown":"Yes. It is the default behavior.","body":"Yes. It is the default behavior."},{"owner":{"account_id":28814,"reputation":5771,"user_id":77278,"accept_rate":79,"display_name":"Tomasz Błachowicz"},"score":0,"creation_date":1307105012,"post_id":6222624,"comment_id":7254443,"body_markdown":"@Arun There is one more dimension to that which is transaction propagation attribute. In [`@Transactional`](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/transaction/annotation/Transactional.html) you can specify propagation attribute that is enumeration value of type [`@Propagation`](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/transaction/annotation/Propagation.html).","body":"@Arun There is one more dimension to that which is transaction propagation attribute. In <a href=\"http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/transaction/annotation/Transactional.html\" rel=\"nofollow noreferrer\"><code>@Transactional</code></a> you can specify propagation attribute that is enumeration value of type <a href=\"http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/transaction/annotation/Propagation.html\" rel=\"nofollow noreferrer\"><code>@Propagation</code></a>."},{"owner":{"account_id":78014,"reputation":2016,"user_id":222325,"accept_rate":93,"display_name":"Fil"},"score":2,"creation_date":1307121214,"post_id":6222624,"comment_id":7259147,"body_markdown":"@Tomasz Yes. But it should also be mentioned that changing transaction propagation on a method that is called from another @Transactional method will have no effect.","body":"@Tomasz Yes. But it should also be mentioned that changing transaction propagation on a method that is called from another @Transactional method will have no effect."},{"owner":{"account_id":39580,"reputation":385624,"user_id":114251,"accept_rate":87,"display_name":"Arun P Johny"},"score":1,"creation_date":1307168945,"post_id":6222624,"comment_id":7266120,"body_markdown":"@Tomasz, That was what I meant by saying `will follow the transaction definitions given in the called method`. But if the call is comes from the same object instance it will not have any effect since the call will not propagate through the aop proxies which are responsible for the transaction maintenance.","body":"@Tomasz, That was what I meant by saying <code>will follow the transaction definitions given in the called method</code>. But if the call is comes from the same object instance it will not have any effect since the call will not propagate through the aop proxies which are responsible for the transaction maintenance."},{"owner":{"account_id":39580,"reputation":385624,"user_id":114251,"accept_rate":87,"display_name":"Arun P Johny"},"score":8,"creation_date":1307169227,"post_id":6222624,"comment_id":7266142,"body_markdown":"@Filip, That is not completely correct, If you call a method with a `@Transactional` definition from a different object/instance then even though the calling method have a different `@Transactional` attributes, the called method will follow the it own transaction definition.","body":"@Filip, That is not completely correct, If you call a method with a <code>@Transactional</code> definition from a different object/instance then even though the calling method have a different <code>@Transactional</code> attributes, the called method will follow the it own transaction definition."},{"owner":{"account_id":78014,"reputation":2016,"user_id":222325,"accept_rate":93,"display_name":"Fil"},"score":0,"creation_date":1307189487,"post_id":6222624,"comment_id":7268233,"body_markdown":"@Arun You&#39;re right, I was strictly speaking about self-invocation where the container isn&#39;t involved in serving up a proxy.","body":"@Arun You&#39;re right, I was strictly speaking about self-invocation where the container isn&#39;t involved in serving up a proxy."},{"owner":{"account_id":2258168,"reputation":30504,"user_id":1988876,"accept_rate":73,"display_name":"brain storm"},"score":0,"creation_date":1527195680,"post_id":6222624,"comment_id":88048791,"body_markdown":"&quot;.. will not have any impact on the transaction.&quot; - what does that mean? the inner method with `@transactional` is executed in same transaction as parent with `@transactional` method correct?","body":"&quot;.. will not have any impact on the transaction.&quot; - what does that mean? the inner method with <code>@transactional</code> is executed in same transaction as parent with <code>@transactional</code> method correct?"},{"owner":{"account_id":5398390,"reputation":1649,"user_id":4298881,"display_name":"Surely"},"score":0,"creation_date":1537868168,"post_id":6222624,"comment_id":91930414,"body_markdown":"so does it means that if I call a transactional method from the same instance&#39;s method that has no transactional annotation, the transaction will not working? I think due to spring aop it will not working since it cannot get the proxy call.","body":"so does it means that if I call a transactional method from the same instance&#39;s method that has no transactional annotation, the transaction will not working? I think due to spring aop it will not working since it cannot get the proxy call."},{"owner":{"account_id":6241436,"reputation":2512,"user_id":4854931,"accept_rate":33,"display_name":"Alex78191"},"score":0,"creation_date":1570468565,"post_id":6222624,"comment_id":102915180,"body_markdown":"But default propogation is `REQUIRED\n          Support a current transaction, create a new one if none exists.`","body":"But default propogation is <code>REQUIRED           Support a current transaction, create a new one if none exists.</code>"},{"owner":{"account_id":7980951,"reputation":2013,"user_id":6022333,"accept_rate":100,"display_name":"Matley"},"score":1,"creation_date":1618781687,"post_id":6222624,"comment_id":118700439,"body_markdown":"@ArunPJohny what does it mean: &quot;within the same instance&quot;? Eg. I have parent method with Transactional annotation and within this method I call another method with Transactional from another service... When in child method something woll go wrong with exception, then I want to rollback everything...","body":"@ArunPJohny what does it mean: &quot;within the same instance&quot;? Eg. I have parent method with Transactional annotation and within this method I call another method with Transactional from another service... When in child method something woll go wrong with exception, then I want to rollback everything..."}],"tags":[],"owner":{"account_id":39580,"reputation":385624,"user_id":114251,"accept_rate":87,"display_name":"Arun P Johny"},"comment_count":11,"down_vote_count":1,"up_vote_count":171,"is_accepted":false,"score":170,"last_activity_date":1684340965,"creation_date":1307071029,"answer_id":6222624,"question_id":6222600,"body_markdown":"When you call a method without `@Transactional` within a transaction block, the parent transaction will propagate to the new method. It will use the same connection from the parent method (with `@Transactional`) and any exception caused in the called method (without `@Transactional`) will cause the transaction to rollback as configured in the transaction definition.\r\n\r\nIf you call a method with a `@Transactional` annotation from a method with `@Transactional` belonging to the same Spring Bean, then the called method&#39;s transactional behavior will not have any impact on the transaction. But if you call a method with a transaction definition from another method with a transaction definition, and they belong to different Spring Beans, then the code in the called method will follow its own transaction definitions.\r\n\r\nYou can find more details in the section *Declarative transaction management* of [Spring Transaction Management documentation][1].\r\n\r\nSpring declarative transaction model uses an AOP proxy, so the AOP proxy is responsible for the creation of the transactions. The AOP proxy will be active only if the called method belongs to a different Spring `Bean` than the caller one.\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/5.3.x/reference/html/data-access.html#transaction-declarative","title":"@Transactional method calling another method without @Transactional anotation?","body":"<p>When you call a method without <code>@Transactional</code> within a transaction block, the parent transaction will propagate to the new method. It will use the same connection from the parent method (with <code>@Transactional</code>) and any exception caused in the called method (without <code>@Transactional</code>) will cause the transaction to rollback as configured in the transaction definition.</p>\n<p>If you call a method with a <code>@Transactional</code> annotation from a method with <code>@Transactional</code> belonging to the same Spring Bean, then the called method's transactional behavior will not have any impact on the transaction. But if you call a method with a transaction definition from another method with a transaction definition, and they belong to different Spring Beans, then the code in the called method will follow its own transaction definitions.</p>\n<p>You can find more details in the section <em>Declarative transaction management</em> of <a href=\"https://docs.spring.io/spring-framework/docs/5.3.x/reference/html/data-access.html#transaction-declarative\" rel=\"noreferrer\">Spring Transaction Management documentation</a>.</p>\n<p>Spring declarative transaction model uses an AOP proxy, so the AOP proxy is responsible for the creation of the transactions. The AOP proxy will be active only if the called method belongs to a different Spring <code>Bean</code> than the caller one.</p>\n"},{"comments":[{"owner":{"account_id":1710481,"reputation":22873,"user_id":1568658,"accept_rate":82,"display_name":"Eric"},"score":1,"creation_date":1553680332,"post_id":6226981,"comment_id":97470622,"body_markdown":"The 3 answers conflict with each other in some degree, not sure which is more accurate.","body":"The 3 answers conflict with each other in some degree, not sure which is more accurate."},{"owner":{"account_id":10052023,"reputation":467,"user_id":7431546,"display_name":"Vinay Vissh"},"score":1,"creation_date":1582618794,"post_id":6226981,"comment_id":106829836,"body_markdown":"@EricWang Just wanted to share that I tested out this scenario today and the answer by [Arun P Johny](https://stackoverflow.com/questions/6222600/transactional-method-calling-another-method-without-transactional-anotation#6222624) *(with comments)* is the most accurate for this scenario of **internal** invocations.","body":"@EricWang Just wanted to share that I tested out this scenario today and the answer by <a href=\"https://stackoverflow.com/questions/6222600/transactional-method-calling-another-method-without-transactional-anotation#6222624\">Arun P Johny</a> <i>(with comments)</i> is the most accurate for this scenario of <b>internal</b> invocations."}],"tags":[],"owner":{"account_id":53073,"reputation":24000,"user_id":158658,"accept_rate":75,"display_name":"sourcedelica"},"comment_count":2,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1684340559,"creation_date":1307103453,"answer_id":6226981,"question_id":6222600,"body_markdown":"`@Transactional` marks the transaction boundary (begin/end), but the transaction itself is bound to the thread. Once a transaction starts, it propagates across method calls until the original method returns and the transaction commits/rolls back.\r\n\r\nIf another method is called that has a `@Transactional` annotation, then the propagation depends on the propagation attribute of that annotation.\r\n\r\n","title":"@Transactional method calling another method without @Transactional anotation?","body":"<p><code>@Transactional</code> marks the transaction boundary (begin/end), but the transaction itself is bound to the thread. Once a transaction starts, it propagates across method calls until the original method returns and the transaction commits/rolls back.</p>\n<p>If another method is called that has a <code>@Transactional</code> annotation, then the propagation depends on the propagation attribute of that annotation.</p>\n"},{"comments":[{"owner":{"account_id":5430278,"reputation":241,"user_id":4321369,"accept_rate":40,"display_name":"Dave"},"score":0,"creation_date":1499461670,"post_id":8902699,"comment_id":76934627,"body_markdown":"What about subcalls of NOT_SUPPORTED which dont have any annotation? Does it inherit NOT_Supported or did they open a new transaction as REQURED is the default? For example:  f1.call(){  f2() } with the annotation NOT_SUPPORTED for f1 and non for f2.","body":"What about subcalls of NOT_SUPPORTED which dont have any annotation? Does it inherit NOT_Supported or did they open a new transaction as REQURED is the default? For example:  f1.call(){  f2() } with the annotation NOT_SUPPORTED for f1 and non for f2."}],"tags":[],"owner":{"account_id":73352,"reputation":22219,"user_id":211277,"accept_rate":78,"display_name":"tolitius"},"comment_count":1,"down_vote_count":0,"up_vote_count":26,"is_accepted":false,"score":26,"last_activity_date":1326839929,"creation_date":1326839929,"answer_id":8902699,"question_id":6222600,"body_markdown":"* _Does that mean the call to separate methods are causing the application to open separate connections to DB or suspend the parent transaction, etc?_\r\n\r\nThat depends on a [propagation level](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/htmlsingle/spring-framework-reference.html#tx-propagation). Here are all the possible level [values](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/transaction/annotation/Propagation.html).\r\n\r\nFor example in case a propagation level is [NESTED](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/transaction/annotation/Propagation.html#NESTED) a current transaction will &quot;suspend&quot; and a new transaction will be created ( _note: actual creation of a nested transaction will only work on specific transaction managers_ )\r\n\r\n* _What&#39;s the default behavior for a method without any annotations that is called by another method with @Transactional annotation?_\r\n\r\nThe default propagation level ( what you call &quot;behavior&quot; ) is [REQUIRED](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/transaction/annotation/Propagation.html#REQUIRED). In case an &quot;inner&quot; method is called that has a `@Transactional` annotation on it ( or transacted declaratively via XML ), it will execute within the **same transaction**, e.g. &quot;nothing new&quot; is created.","title":"@Transactional method calling another method without @Transactional anotation?","body":"<ul>\n<li><em>Does that mean the call to separate methods are causing the application to open separate connections to DB or suspend the parent transaction, etc?</em></li>\n</ul>\n\n<p>That depends on a <a href=\"http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/htmlsingle/spring-framework-reference.html#tx-propagation\" rel=\"noreferrer\">propagation level</a>. Here are all the possible level <a href=\"http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/transaction/annotation/Propagation.html\" rel=\"noreferrer\">values</a>.</p>\n\n<p>For example in case a propagation level is <a href=\"http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/transaction/annotation/Propagation.html#NESTED\" rel=\"noreferrer\">NESTED</a> a current transaction will \"suspend\" and a new transaction will be created ( <em>note: actual creation of a nested transaction will only work on specific transaction managers</em> )</p>\n\n<ul>\n<li><em>What's the default behavior for a method without any annotations that is called by another method with @Transactional annotation?</em></li>\n</ul>\n\n<p>The default propagation level ( what you call \"behavior\" ) is <a href=\"http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/transaction/annotation/Propagation.html#REQUIRED\" rel=\"noreferrer\">REQUIRED</a>. In case an \"inner\" method is called that has a <code>@Transactional</code> annotation on it ( or transacted declaratively via XML ), it will execute within the <strong>same transaction</strong>, e.g. \"nothing new\" is created.</p>\n"},{"comments":[{"owner":{"account_id":2857294,"reputation":350,"user_id":2453293,"accept_rate":56,"display_name":"johnsimer"},"score":9,"creation_date":1598218410,"post_id":55540186,"comment_id":112378910,"body_markdown":"To clarify for beginners, I&#39;m pretty sure innerMethod() needs to be on a different bean (aka Spring-managed java Object) than outerMethod(). If they are both on the same bean, I don&#39;t think the innerMethod will actually use the Transactional behavior declared in its annotation. Rather it will use what is declared in the outerMethod() declaration. This is because of how Spring handles AOP, which is used for it&#39;s @Transactional annotations (https://docs.spring.io/spring/docs/3.0.x/spring-framework-reference/html/transaction.html#tx-decl-explained)","body":"To clarify for beginners, I&#39;m pretty sure innerMethod() needs to be on a different bean (aka Spring-managed java Object) than outerMethod(). If they are both on the same bean, I don&#39;t think the innerMethod will actually use the Transactional behavior declared in its annotation. Rather it will use what is declared in the outerMethod() declaration. This is because of how Spring handles AOP, which is used for it&#39;s @Transactional annotations (<a href=\"https://docs.spring.io/spring/docs/3.0.x/spring-framework-reference/html/transaction.html#tx-decl-explained\" rel=\"nofollow noreferrer\">docs.spring.io/spring/docs/3.0.x/spring-framework-reference&zwnj;&#8203;/&hellip;</a>)"}],"tags":[],"owner":{"account_id":4308682,"reputation":12633,"user_id":3520404,"display_name":"saran3h"},"comment_count":1,"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1684340766,"creation_date":1554483320,"answer_id":55540186,"question_id":6222600,"body_markdown":"The inner method will affect the outer method if the inner method is not annotated with `@Transactional`.\r\n\r\nIn case the inner method is also annotated with `@Transactional` with `Propagation.REQUIRES_NEW`, the following will happen.\r\n\r\n    ...\r\n    @Autowired\r\n    private TestDAO testDAO;\r\n    \r\n    @Autowired\r\n    private SomeBean someBean;\r\n    \r\n    @Override\r\n    @Transactional(propagation = Propagation.REQUIRED)\r\n    public void outerMethod(User user) {\r\n      testDAO.insertUser(user);\r\n\r\n      try {\r\n        someBean.innerMethod();\r\n      } catch(RuntimeException e) {\r\n        // handle exception\r\n      }\r\n    }\r\n\r\n\r\n    @Override\r\n    @Transactional(propagation = Propagation.REQUIRES_NEW)\r\n    public void innerMethod() {\r\n      throw new RuntimeException(&quot;Rollback this transaction!&quot;);\r\n    }\r\n\r\n\r\nThe inner method is annotated with `REQUIRES_NEW` and throws a `RuntimeException`, so it will set its transaction to rollback but WILL NOT EFFECT the outer transaction. The outer transaction is PAUSED when the inner transaction starts and then RESUMES AFTER the inner transaction is concluded. They run independently of each other, so the outer transaction MAY commit successfully.","title":"@Transactional method calling another method without @Transactional anotation?","body":"<p>The inner method will affect the outer method if the inner method is not annotated with <code>@Transactional</code>.</p>\n<p>In case the inner method is also annotated with <code>@Transactional</code> with <code>Propagation.REQUIRES_NEW</code>, the following will happen.</p>\n<pre><code>...\n@Autowired\nprivate TestDAO testDAO;\n\n@Autowired\nprivate SomeBean someBean;\n\n@Override\n@Transactional(propagation = Propagation.REQUIRED)\npublic void outerMethod(User user) {\n  testDAO.insertUser(user);\n\n  try {\n    someBean.innerMethod();\n  } catch(RuntimeException e) {\n    // handle exception\n  }\n}\n\n\n@Override\n@Transactional(propagation = Propagation.REQUIRES_NEW)\npublic void innerMethod() {\n  throw new RuntimeException(&quot;Rollback this transaction!&quot;);\n}\n</code></pre>\n<p>The inner method is annotated with <code>REQUIRES_NEW</code> and throws a <code>RuntimeException</code>, so it will set its transaction to rollback but WILL NOT EFFECT the outer transaction. The outer transaction is PAUSED when the inner transaction starts and then RESUMES AFTER the inner transaction is concluded. They run independently of each other, so the outer transaction MAY commit successfully.</p>\n"}],"owner":{"account_id":679279,"reputation":1321,"user_id":782123,"display_name":"goe"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":117829,"favorite_count":0,"down_vote_count":0,"up_vote_count":132,"answer_count":4,"score":132,"last_activity_date":1684340965,"creation_date":1307070848,"question_id":6222600,"body_markdown":"I&#39;ve seen a method in a Service class that was marked as `@Transactional`, but it was also calling some other methods in that same class which were not marked as `@Transactional`.\r\n\r\nDoes it mean that the call to separate methods are causing the application to open separate connections to DB or suspend the parent transaction, etc?\r\n\r\nWhat&#39;s the default behavior for a method without any annotations which is called by another method with `@Transactional` annotation?","title":"@Transactional method calling another method without @Transactional anotation?","body":"<p>I've seen a method in a Service class that was marked as <code>@Transactional</code>, but it was also calling some other methods in that same class which were not marked as <code>@Transactional</code>.</p>\n\n<p>Does it mean that the call to separate methods are causing the application to open separate connections to DB or suspend the parent transaction, etc?</p>\n\n<p>What's the default behavior for a method without any annotations which is called by another method with <code>@Transactional</code> annotation?</p>\n"},{"tags":["java","try-catch","finally"],"comments":[{"owner":{"display_name":"user6073886"},"score":2,"creation_date":1684331599,"post_id":76272878,"comment_id":134502850,"body_markdown":"And what would that implicit finally block do? In case of try with resources it is clear that it closes the resources, but I am having trouble thinking of something that could generally done with any try block and therefor provide a basis for a need of an implicit finally.","body":"And what would that implicit finally block do? In case of try with resources it is clear that it closes the resources, but I am having trouble thinking of something that could generally done with any try block and therefor provide a basis for a need of an implicit finally."}],"answers":[{"tags":[],"owner":{"account_id":75804,"reputation":94840,"user_id":217324,"accept_rate":96,"display_name":"Nathan Hughes"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1684339975,"creation_date":1684338003,"answer_id":76273863,"question_id":76272878,"body_markdown":"No. The closest thing i can think of like &quot;implicit closing functionality&quot; is finalization: Some classes may have a finalize method implemented that executes at some later time, whenever the object is garbage collected. That would have to have the close method called so not sure implicit is the right word. There was no Closeable interface to indicate things that needed closing before 1.7 and try-with-resources, there was no interface you could tag a class with to tell the jvm it needed closing. And that has nothing to do with any kind of try block. \r\n\r\n\r\nThe try block came first and is entirely explicit. Try-with-resources came along later, it addresses exception masking issues that can happen when using try-finally blocks. This is [my explanation of why try-with-resources was created](https://stackoverflow.com/a/26516323/217324).","title":"Is implicit finally block being applied for try statements other than try-with-resources?","body":"<p>No. The closest thing i can think of like &quot;implicit closing functionality&quot; is finalization: Some classes may have a finalize method implemented that executes at some later time, whenever the object is garbage collected. That would have to have the close method called so not sure implicit is the right word. There was no Closeable interface to indicate things that needed closing before 1.7 and try-with-resources, there was no interface you could tag a class with to tell the jvm it needed closing. And that has nothing to do with any kind of try block.</p>\n<p>The try block came first and is entirely explicit. Try-with-resources came along later, it addresses exception masking issues that can happen when using try-finally blocks. This is <a href=\"https://stackoverflow.com/a/26516323/217324\">my explanation of why try-with-resources was created</a>.</p>\n"}],"owner":{"account_id":15903012,"reputation":191,"user_id":11521880,"display_name":"bridgemnc"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76273863,"answer_count":1,"score":1,"last_activity_date":1684339975,"creation_date":1684331464,"question_id":76272878,"body_markdown":"Does implicit finally block exist for all try statements (try, try-finally, try-catch-finally) or only for try-with-resources?","title":"Is implicit finally block being applied for try statements other than try-with-resources?","body":"<p>Does implicit finally block exist for all try statements (try, try-finally, try-catch-finally) or only for try-with-resources?</p>\n"},{"tags":["java","variables"],"comments":[{"owner":{"account_id":38772,"reputation":7239,"user_id":111495,"accept_rate":86,"display_name":"ctford"},"score":0,"creation_date":1255088587,"post_id":1543268,"comment_id":1399870,"body_markdown":"You might want to mention which language you are using. The answer will probably be the same across the C/C++/C#/Java family, but there&#39;s a chance that it might not be.","body":"You might want to mention which language you are using. The answer will probably be the same across the C/C++/C#/Java family, but there&#39;s a chance that it might not be."}],"answers":[{"comments":[{"owner":{"account_id":45934,"reputation":203679,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"score":0,"creation_date":1255093962,"post_id":1543279,"comment_id":1400296,"body_markdown":"Except if this is Java, where `const` does not exist.","body":"Except if this is Java, where <code>const</code> does not exist."},{"owner":{"account_id":23033,"reputation":168102,"user_id":57428,"accept_rate":72,"display_name":"sharptooth"},"score":0,"creation_date":1255096456,"post_id":1543279,"comment_id":1400557,"body_markdown":"Isn&#39;t `final` for the same in Java?","body":"Isn&#39;t <code>final</code> for the same in Java?"}],"tags":[],"owner":{"account_id":23033,"reputation":168102,"user_id":57428,"accept_rate":72,"display_name":"sharptooth"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1255088378,"creation_date":1255088378,"answer_id":1543279,"question_id":1543268,"body_markdown":"In this very case the effect is the same, but an instance of the class in the first snippet will occupy more memory.\r\n\r\nOther than that in the first case it&#39;s a variable with the same address on each call and it retains the value, but in the second case it&#39;s not necessarily a variable with the same address - it is reallocated and reinitialized on each call.\r\n\r\nSince you actually don&#39;t ever change `i` variable value you should declare it as `const` - this will give more clear code.","title":"Declaration of variables?","body":"<p>In this very case the effect is the same, but an instance of the class in the first snippet will occupy more memory.</p>\n\n<p>Other than that in the first case it's a variable with the same address on each call and it retains the value, but in the second case it's not necessarily a variable with the same address - it is reallocated and reinitialized on each call.</p>\n\n<p>Since you actually don't ever change <code>i</code> variable value you should declare it as <code>const</code> - this will give more clear code.</p>\n"},{"comments":[{"owner":{"account_id":45934,"reputation":203679,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"score":0,"creation_date":1255094002,"post_id":1543636,"comment_id":1400299,"body_markdown":"Except if this is Java, where local static variables don&#39;t exist.","body":"Except if this is Java, where local static variables don&#39;t exist."}],"tags":[],"owner":{"account_id":19343,"reputation":67135,"user_id":45249,"accept_rate":75,"display_name":"mouviciel"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1255093615,"creation_date":1255093615,"answer_id":1543636,"question_id":1543268,"body_markdown":"In first case `i` exists outside of any method\r\n\r\nIn second case `i` exists only when `display()` method is called. If you want to give it persistence you can declare it as `static`.\r\n","title":"Declaration of variables?","body":"<p>In first case <code>i</code> exists outside of any method</p>\n\n<p>In second case <code>i</code> exists only when <code>display()</code> method is called. If you want to give it persistence you can declare it as <code>static</code>.</p>\n"},{"tags":[],"owner":{"account_id":53717,"reputation":582,"user_id":160653,"accept_rate":83,"display_name":"H2O"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1255095367,"creation_date":1255095367,"answer_id":1543794,"question_id":1543268,"body_markdown":"In first case i is a part of the object. When u create an object from class A, the object allocates memory for the variable &quot;i&quot;. And it will remain until the object deleted. \r\n\r\nBut in the second way when you create the object from class B, there will be no memory allocation for the variable i. But only when you call the display function -in class B- memory variable &quot;i&quot; will be allocated temporarily. (When function&#39;s work is done all local variables will free)\r\n","title":"Declaration of variables?","body":"<p>In first case i is a part of the object. When u create an object from class A, the object allocates memory for the variable \"i\". And it will remain until the object deleted. </p>\n\n<p>But in the second way when you create the object from class B, there will be no memory allocation for the variable i. But only when you call the display function -in class B- memory variable \"i\" will be allocated temporarily. (When function's work is done all local variables will free)</p>\n"}],"owner":{"account_id":58153,"reputation":5728,"user_id":2922388,"accept_rate":65,"display_name":"Gopi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":189,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":1543279,"answer_count":3,"score":0,"last_activity_date":1684339584,"creation_date":1255088212,"question_id":1543268,"body_markdown":"Case:1\r\n\r\n        class A\r\n        {\r\n            private int i=0;\r\n\r\n            public void display()\r\n            {\r\n                this.getValue();\r\n            }\r\n\r\n            private int getValue()\r\n            {\r\n                return i+2;\r\n            }\r\n\r\n        }\r\n\r\nCase:2\r\n\r\n        class B\r\n        {\r\n            public void display()\r\n            {\r\n                int i=0;\r\n                this. getValue(i);\r\n            }\r\n    \r\n            private int getValue(int i)\r\n            {\r\n                return i+2;\r\n            }\r\n        }\r\n\r\nDoes the declaration of &quot;i&quot; in both cases have any great \r\ndifference (other than the global access) whenever I call \r\ndisplay() ?\r\n","title":"Declaration of variables?","body":"<p>Case:1</p>\n<pre><code>    class A\n    {\n        private int i=0;\n\n        public void display()\n        {\n            this.getValue();\n        }\n\n        private int getValue()\n        {\n            return i+2;\n        }\n\n    }\n</code></pre>\n<p>Case:2</p>\n<pre><code>    class B\n    {\n        public void display()\n        {\n            int i=0;\n            this. getValue(i);\n        }\n\n        private int getValue(int i)\n        {\n            return i+2;\n        }\n    }\n</code></pre>\n<p>Does the declaration of &quot;i&quot; in both cases have any great\ndifference (other than the global access) whenever I call\ndisplay() ?</p>\n"},{"tags":["java","variables"],"answers":[{"tags":[],"owner":{"account_id":25297,"reputation":34832,"user_id":64960,"accept_rate":55,"display_name":"aJ."},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1259813974,"creation_date":1259813722,"answer_id":1837596,"question_id":1837577,"body_markdown":"something like this: \r\n\r\n    int  opcode = 0;\r\n\r\nopcode  is a local variable and hence, you should initialize within the function.\r\n","title":"variable initialization","body":"<p>something like this: </p>\n\n<pre><code>int  opcode = 0;\n</code></pre>\n\n<p>opcode  is a local variable and hence, you should initialize within the function.</p>\n"}],"owner":{"account_id":78503,"reputation":129,"user_id":223392,"accept_rate":59,"display_name":"Alpdog14"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":129,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":1837596,"answer_count":1,"score":0,"last_activity_date":1684339522,"creation_date":1259813412,"question_id":1837577,"body_markdown":"If I am getting an error on a function that a variable *opcode* may not have been initialized, should this be done inside this method or in the beginning of the class.\r\n\r\n    private void compileDo() {\r\n            int endLabel, endLabelLoc, topLabel, opcode;\r\n            accept(&quot;do&quot;);\r\n            accept(&quot;(&quot;);\r\n            compileExpr();\r\n            accept(&quot;)&quot;);\r\n            topLabel = cs.getPos();\r\n            endLabelLoc = cs.emit(opcode, topLabel); \r\n            compileStatement();\r\n            \r\n        }\r\nAny help would be most appreciated.","title":"variable initialization","body":"<p>If I am getting an error on a function that a variable <em>opcode</em> may not have been initialized, should this be done inside this method or in the beginning of the class.</p>\n\n<pre><code>private void compileDo() {\n        int endLabel, endLabelLoc, topLabel, opcode;\n        accept(\"do\");\n        accept(\"(\");\n        compileExpr();\n        accept(\")\");\n        topLabel = cs.getPos();\n        endLabelLoc = cs.emit(opcode, topLabel); \n        compileStatement();\n\n    }\n</code></pre>\n\n<p>Any help would be most appreciated.</p>\n"},{"tags":["java","return-type"],"comments":[{"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1684328916,"post_id":76272449,"comment_id":134502140,"body_markdown":"Yes, you *can* use `Object`, that&#39;s how all collections worked before generics were added to Java. Yes, it *does* get annoying and is a potential source for problems. If you can&#39;t change your design to be able to give a specific type for each method return value, then this might be the best you can do.","body":"Yes, you <i>can</i> use <code>Object</code>, that&#39;s how all collections worked before generics were added to Java. Yes, it <i>does</i> get annoying and is a potential source for problems. If you can&#39;t change your design to be able to give a specific type for each method return value, then this might be the best you can do."},{"owner":{"account_id":184203,"reputation":3430,"user_id":420096,"accept_rate":71,"display_name":"Sombriks"},"score":0,"creation_date":1684328939,"post_id":76272449,"comment_id":134502146,"body_markdown":"you can, but you lose static type analysis which is one of keystones of java programming","body":"you can, but you lose static type analysis which is one of keystones of java programming"},{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":2,"creation_date":1684328942,"post_id":76272449,"comment_id":134502147,"body_markdown":"Which are the 2 different datatypes? To those have a common superclass other than `Object`? Can you make them implement the same interface maybe? Otherwise you might be stuck with `Queue&lt;T extends Object&gt;`","body":"Which are the 2 different datatypes? To those have a common superclass other than <code>Object</code>? Can you make them implement the same interface maybe? Otherwise you might be stuck with <code>Queue&lt;T extends Object&gt;</code>"}],"answers":[{"tags":[],"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684332972,"creation_date":1684329579,"answer_id":76272566,"question_id":76272449,"body_markdown":"Declaring a method to return `Object` in and of itself is not &quot;dangerous&quot;. However, if the caller casts the returned `Object` to a type which it isn&#39;t, an exception would be thrown, and that can be considered dangerous.\r\n\r\nIf you want to prevent the caller from doing that, you can design the API so that it is safer for the caller by implementing different methods that deals with `T` and `U` specifically.\r\n\r\n```\r\nclass DualQueue&lt;T, U&gt;{\r\n\r\n    private final Class&lt;T&gt; tClass;\r\n    private final Class&lt;U&gt; uClass;\r\n\r\n    private final Queue&lt;Object&gt; queue;\r\n\r\n    public DualQueue(Class&lt;T&gt; tClass, Class&lt;U&gt; uClass){\r\n        this.tClass = tClass;\r\n        this.uClass = uClass;\r\n        queue = new LinkedList&lt;&gt;();\r\n    }\r\n\r\n    public void enqueueT(T item) {\r\n        queue.add(item);\r\n    }\r\n\r\n    public void enqueueU(U item) {\r\n        queue.add(item);\r\n    }\r\n\r\n    public T dequeueT() {\r\n        if (peekT() != null) {\r\n            return tClass.cast(queue.poll());\r\n        }\r\n        return null;\r\n    }\r\n\r\n    public U dequeueU() {\r\n        if (peekU() != null) {\r\n            return uClass.cast(queue.poll());\r\n        }\r\n        return null;\r\n    }\r\n\r\n    public T peekT() {\r\n        var t =  queue.peek();\r\n        if (tClass.isInstance(t)) {\r\n            return tClass.cast(t);\r\n        }\r\n        return null;\r\n    }\r\n\r\n    public U peekU() {\r\n        var u =  queue.peek();\r\n        if (uClass.isInstance(u)) {\r\n            return uClass.cast(u);\r\n        }\r\n        return null;\r\n    }\r\n\r\n    public boolean queueIsEmpty() {\r\n        return queue.isEmpty();\r\n    }\r\n}\r\n```\r\n\r\n`dequeueT`, `dequeueU`, `peekT`, `peekU` will all return null if the next item in the queue isn&#39;t that type.","title":"Can I use the return type &quot;object&quot; in Java? Dangers?","body":"<p>Declaring a method to return <code>Object</code> in and of itself is not &quot;dangerous&quot;. However, if the caller casts the returned <code>Object</code> to a type which it isn't, an exception would be thrown, and that can be considered dangerous.</p>\n<p>If you want to prevent the caller from doing that, you can design the API so that it is safer for the caller by implementing different methods that deals with <code>T</code> and <code>U</code> specifically.</p>\n<pre><code>class DualQueue&lt;T, U&gt;{\n\n    private final Class&lt;T&gt; tClass;\n    private final Class&lt;U&gt; uClass;\n\n    private final Queue&lt;Object&gt; queue;\n\n    public DualQueue(Class&lt;T&gt; tClass, Class&lt;U&gt; uClass){\n        this.tClass = tClass;\n        this.uClass = uClass;\n        queue = new LinkedList&lt;&gt;();\n    }\n\n    public void enqueueT(T item) {\n        queue.add(item);\n    }\n\n    public void enqueueU(U item) {\n        queue.add(item);\n    }\n\n    public T dequeueT() {\n        if (peekT() != null) {\n            return tClass.cast(queue.poll());\n        }\n        return null;\n    }\n\n    public U dequeueU() {\n        if (peekU() != null) {\n            return uClass.cast(queue.poll());\n        }\n        return null;\n    }\n\n    public T peekT() {\n        var t =  queue.peek();\n        if (tClass.isInstance(t)) {\n            return tClass.cast(t);\n        }\n        return null;\n    }\n\n    public U peekU() {\n        var u =  queue.peek();\n        if (uClass.isInstance(u)) {\n            return uClass.cast(u);\n        }\n        return null;\n    }\n\n    public boolean queueIsEmpty() {\n        return queue.isEmpty();\n    }\n}\n</code></pre>\n<p><code>dequeueT</code>, <code>dequeueU</code>, <code>peekT</code>, <code>peekU</code> will all return null if the next item in the queue isn't that type.</p>\n"},{"tags":[],"owner":{"account_id":28620637,"reputation":3,"user_id":21913765,"display_name":"Foolix"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684332430,"creation_date":1684332430,"answer_id":76273013,"question_id":76272449,"body_markdown":"Are the types you want to add to the queue defined by you? In that case you could create an interface and have the two classes implement it. That way you can add them to the queue. It can also be a generic interface kind-of-a-wrapper, e.g.:\r\n\r\n        interface QueueAddable {\r\n            &lt;T extends QueueAddable&gt; T get(Class&lt;T&gt; type);\r\n        }\r\n\r\nThis is something I may do - honestly I don&#39;t know it that is a good solution, but it&#39;s definitely a way to put different types in your queue with typesafe casts to get them out. A little example of what I mean.\r\n\r\n    public class MyClass {\r\n    \r\n        interface QueueAddable {\r\n            &lt;T extends QueueAddable&gt; T get(Class&lt;T&gt; type);\r\n        }\r\n    \r\n        public static class MyOtherClass implements QueueAddable {\r\n            public &lt;T extends QueueAddable&gt; T get(Class&lt;T&gt; type) {\r\n                return type.cast(this);\r\n            }\r\n        }\r\n    \r\n        public static class MyThirdClass implements QueueAddable {\r\n            public &lt;T extends QueueAddable&gt; T get(Class&lt;T&gt; type) {\r\n                return type.cast(this);\r\n            }\r\n        }\r\n    \r\n        public static void main(String args[]) {\r\n            Queue&lt;QueueAddable&gt; queue = new LinkedList&lt;&gt;();\r\n            queue.add(new MyOtherClass());\r\n            queue.add(new MyThirdClass());\r\n    \r\n            QueueAddable a = queue.poll();\r\n            if (a instanceof MyOtherClass) {\r\n                MyOtherClass object = a.get(MyOtherClass.class);\r\n            }\r\n    \r\n            if (a instanceof MyThirdClass) {\r\n                MyThirdClass object = a.get(MyThirdClass.class);\r\n            }\r\n        }\r\n    }","title":"Can I use the return type &quot;object&quot; in Java? Dangers?","body":"<p>Are the types you want to add to the queue defined by you? In that case you could create an interface and have the two classes implement it. That way you can add them to the queue. It can also be a generic interface kind-of-a-wrapper, e.g.:</p>\n<pre><code>    interface QueueAddable {\n        &lt;T extends QueueAddable&gt; T get(Class&lt;T&gt; type);\n    }\n</code></pre>\n<p>This is something I may do - honestly I don't know it that is a good solution, but it's definitely a way to put different types in your queue with typesafe casts to get them out. A little example of what I mean.</p>\n<pre><code>public class MyClass {\n\n    interface QueueAddable {\n        &lt;T extends QueueAddable&gt; T get(Class&lt;T&gt; type);\n    }\n\n    public static class MyOtherClass implements QueueAddable {\n        public &lt;T extends QueueAddable&gt; T get(Class&lt;T&gt; type) {\n            return type.cast(this);\n        }\n    }\n\n    public static class MyThirdClass implements QueueAddable {\n        public &lt;T extends QueueAddable&gt; T get(Class&lt;T&gt; type) {\n            return type.cast(this);\n        }\n    }\n\n    public static void main(String args[]) {\n        Queue&lt;QueueAddable&gt; queue = new LinkedList&lt;&gt;();\n        queue.add(new MyOtherClass());\n        queue.add(new MyThirdClass());\n\n        QueueAddable a = queue.poll();\n        if (a instanceof MyOtherClass) {\n            MyOtherClass object = a.get(MyOtherClass.class);\n        }\n\n        if (a instanceof MyThirdClass) {\n            MyThirdClass object = a.get(MyThirdClass.class);\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684339393,"creation_date":1684338443,"answer_id":76273937,"question_id":76272449,"body_markdown":"The simple answer is, the task you&#39;re looking to do isn&#39;t necessarily possible in a statically-typed language, like Java.\r\n\r\nYou&#39;re essentially telling the compiler to infer the data type, which is not its abstraction.\r\n\r\nSo, there are a few work arounds.  Many will say to simply use the `Object` class, although this is not recommended by the Java implementors, for several reasons.\r\n\r\nMy first recommendation is, if you&#39;re storing `String` values and numbers, then just store the numbers as `String` values also.\r\n\r\nAnother approach would be to create an empty `interface`.\r\n\r\n    interface Example { }\r\n\r\nAnd, then create an implementation for each type of value.\r\n\r\n    class ValueA implements Example {\r\n        String string;\r\n    \r\n        ValueA(String string) {\r\n            this.string = string;\r\n        }\r\n    }\r\n    \r\n    class ValueB implements Example {\r\n        int integer;\r\n    \r\n        ValueB(int integer) {\r\n            this.integer = integer;\r\n        }\r\n    }\r\n\r\nAnd, then use the following `DualQueue` implementation.\r\n\r\n    private static class DualQueue {\r\n    \r\n        private final Queue&lt;Example&gt; queue;\r\n    \r\n        public DualQueue() {\r\n            queue = new LinkedList&lt;&gt;();\r\n        }\r\n    \r\n        public void enqueueT(ValueA item) {\r\n            queue.add(item);\r\n        }\r\n    \r\n        public void enqueueU(ValueB item) {\r\n            queue.add(item);\r\n        }\r\n    \r\n        public Example dequeue() {\r\n            return queue.poll();\r\n        }\r\n    \r\n        public Example peek() {\r\n            return queue.peek();\r\n        }\r\n    \r\n        public boolean queueIsEmpty() {\r\n            return queue.isEmpty();\r\n        }\r\n    }","title":"Can I use the return type &quot;object&quot; in Java? Dangers?","body":"<p>The simple answer is, the task you're looking to do isn't necessarily possible in a statically-typed language, like Java.</p>\n<p>You're essentially telling the compiler to infer the data type, which is not its abstraction.</p>\n<p>So, there are a few work arounds.  Many will say to simply use the <code>Object</code> class, although this is not recommended by the Java implementors, for several reasons.</p>\n<p>My first recommendation is, if you're storing <code>String</code> values and numbers, then just store the numbers as <code>String</code> values also.</p>\n<p>Another approach would be to create an empty <code>interface</code>.</p>\n<pre><code>interface Example { }\n</code></pre>\n<p>And, then create an implementation for each type of value.</p>\n<pre><code>class ValueA implements Example {\n    String string;\n\n    ValueA(String string) {\n        this.string = string;\n    }\n}\n\nclass ValueB implements Example {\n    int integer;\n\n    ValueB(int integer) {\n        this.integer = integer;\n    }\n}\n</code></pre>\n<p>And, then use the following <code>DualQueue</code> implementation.</p>\n<pre><code>private static class DualQueue {\n\n    private final Queue&lt;Example&gt; queue;\n\n    public DualQueue() {\n        queue = new LinkedList&lt;&gt;();\n    }\n\n    public void enqueueT(ValueA item) {\n        queue.add(item);\n    }\n\n    public void enqueueU(ValueB item) {\n        queue.add(item);\n    }\n\n    public Example dequeue() {\n        return queue.poll();\n    }\n\n    public Example peek() {\n        return queue.peek();\n    }\n\n    public boolean queueIsEmpty() {\n        return queue.isEmpty();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":26672298,"reputation":29,"user_id":20283575,"display_name":"Boosen"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":98,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":3,"score":1,"last_activity_date":1684339393,"creation_date":1684328786,"question_id":76272449,"body_markdown":"During a project the need for a queue supporting two different datatypes arose. I solved this by creating a java.util linked list using java.util queue interface. I do however need to use the return type Object\r\n\r\n```\r\npublic Object dequeue(){\r\n    return queue.poll();\r\n}\r\n```\r\nReturning &quot;Object&quot; feels weird and feels like it could cause a lot of errors.\r\nMy question is really, is this okay? Is there a better solution to solve my problem?\r\n\r\nI&#39;m including the full code below.\r\n\r\n```\r\nprivate static class DualQueue&lt;T, U&gt;{\r\n\r\n    private final Queue&lt;Object&gt; queue;\r\n\r\n    public DualQueue(){\r\n        queue = new LinkedList&lt;&gt;();\r\n    }\r\n\r\n    public void enqueueT(T item) {\r\n        queue.add(item);\r\n    }\r\n\r\n    public void enqueueU(U item) {\r\n        queue.add(item);\r\n    }\r\n\r\n    public Object dequeue() {\r\n        return queue.poll();\r\n    }\r\n\r\n    public Object peek() {\r\n        return queue.peek();\r\n    }\r\n\r\n    public boolean queueIsEmpty() {\r\n        return queue.isEmpty();\r\n    }\r\n}\r\n```\r\n","title":"Can I use the return type &quot;object&quot; in Java? Dangers?","body":"<p>During a project the need for a queue supporting two different datatypes arose. I solved this by creating a java.util linked list using java.util queue interface. I do however need to use the return type Object</p>\n<pre><code>public Object dequeue(){\n    return queue.poll();\n}\n</code></pre>\n<p>Returning &quot;Object&quot; feels weird and feels like it could cause a lot of errors.\nMy question is really, is this okay? Is there a better solution to solve my problem?</p>\n<p>I'm including the full code below.</p>\n<pre><code>private static class DualQueue&lt;T, U&gt;{\n\n    private final Queue&lt;Object&gt; queue;\n\n    public DualQueue(){\n        queue = new LinkedList&lt;&gt;();\n    }\n\n    public void enqueueT(T item) {\n        queue.add(item);\n    }\n\n    public void enqueueU(U item) {\n        queue.add(item);\n    }\n\n    public Object dequeue() {\n        return queue.poll();\n    }\n\n    public Object peek() {\n        return queue.peek();\n    }\n\n    public boolean queueIsEmpty() {\n        return queue.isEmpty();\n    }\n}\n</code></pre>\n"},{"tags":["java","multithreading","linkedblockingqueue"],"comments":[{"owner":{"account_id":3011925,"reputation":161,"user_id":2555212,"accept_rate":12,"display_name":"user2555212"},"score":0,"creation_date":1684342682,"post_id":76274046,"comment_id":134505663,"body_markdown":"i am thinking, if i can avoid latch to understand if the threadpool is finished. that also works","body":"i am thinking, if i can avoid latch to understand if the threadpool is finished. that also works"}],"owner":{"account_id":3011925,"reputation":161,"user_id":2555212,"accept_rate":12,"display_name":"user2555212"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684339241,"creation_date":1684339241,"question_id":76274046,"body_markdown":"Hi I have multithread environment.\r\nIts like a producer and subscriber problem.\r\nbut the challenge is i will have multiple producers and consumers also in multi number.\r\nI tried two approaches. Approach1 with BlockingQueue and approach2 with Synchronized List.\r\napproach2 is giving me faster results where as i need to get the approach1 faster.\r\nI found the problem as well. In approach2 i am waiting for the producer to finish producing first. and started consuming it. as i have a full prepared list, i have freedom to process list in partition and i am processing 2 items at a time. \r\nwhere as in BlockingQueue approach, which is ideal for these problems, i can take one item at a time, hence processing is slow.\r\n\r\napproach1 is taking 15310 milli seconds where as approach2 is taking 9755 only\r\ni tried calling take method twice in BlockingQueue approach, but realized latch.countDown wont work perfectly with that.\r\n\r\nCan some one help me approach1 much better than approach2, i have put time outs based on my real scenarios.\r\n\r\nCode i tried here \r\n    \r\n```\r\npackage testjavathread;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\nimport java.util.concurrent.BlockingQueue;\r\nimport java.util.concurrent.CountDownLatch;\r\nimport java.util.concurrent.ExecutorService;\r\nimport java.util.concurrent.Executors;\r\nimport java.util.concurrent.ForkJoinPool;\r\nimport java.util.concurrent.LinkedBlockingQueue;\r\n\r\nclass Consumer {\r\n\r\n\tprivate BlockingQueue&lt;Integer&gt; sharedQueue;\r\n\r\n\tprivate int numThreads;\r\n\r\n\tprivate ExecutorService executor;\r\n\r\n\tprivate CountDownLatch latch;\r\n\r\n\tpublic void consume() {\r\n\t\tfor (int i = 0; i &lt; numThreads; i++) {\r\n\t\t\texecutor.submit(() -&gt; {\r\n\t\t\t\ttry {\r\n\t\t\t\t\twhile (true) {\r\n\t\t\t\t\t\tInteger integer = sharedQueue.take();\r\n//\t\t\t\t\t\tif(!sharedQueue.isEmpty()) {\r\n//\t\t\t\t\t\t\tInteger integer2 = sharedQueue.take();\r\n//\t\t\t\t\t\t\tlatch.countDown();\r\n//\t\t\t\t\t\t}\r\n\t\t\t\t\t\tSystem.out.println(&quot;Consumer &quot; + integer);\r\n\t\t\t\t\t\tThread.sleep(3000);\r\n\t\t\t\t\t\tlatch.countDown();\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (InterruptedException e) {\r\n\t\t\t\t\tThread.currentThread().interrupt();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tpublic ExecutorService getExecutor() {\r\n\t\treturn executor;\r\n\t}\r\n\r\n\tpublic void setExecutor(ExecutorService executor) {\r\n\t\tthis.executor = executor;\r\n\t}\r\n\r\n\tpublic int getNumThreads() {\r\n\t\treturn numThreads;\r\n\t}\r\n\r\n\tpublic void setNumThreads(int numThreads) {\r\n\t\tthis.numThreads = numThreads;\r\n\t}\r\n\r\n\tpublic BlockingQueue&lt;Integer&gt; getSharedQueue() {\r\n\t\treturn sharedQueue;\r\n\t}\r\n\r\n\tpublic void setSharedQueue(BlockingQueue&lt;Integer&gt; sharedQueue) {\r\n\t\tthis.sharedQueue = sharedQueue;\r\n\t}\r\n\r\n\tpublic CountDownLatch getLatch() {\r\n\t\treturn latch;\r\n\t}\r\n\r\n\tpublic void setLatch(CountDownLatch latch) {\r\n\t\tthis.latch = latch;\r\n\t}\r\n}\r\n\r\npublic class BlockingQueueTest {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tBlockingQueueTest testThread = new BlockingQueueTest();\r\n\r\n\t\ttestThread.test();\r\n\r\n\t}\r\n\r\n\tpublic void test() {\r\n\t\tlong startTime = System.currentTimeMillis();\r\n\r\n\t\tList&lt;Integer&gt; inputNumbers = new ArrayList&lt;&gt;();\r\n\t\tfor (int i = 1; i &lt;= 100; i++) {\r\n\t\t\tinputNumbers.add(i);\r\n\t\t}\r\n\r\n\t\tBlockingQueue&lt;Integer&gt; insertData = new LinkedBlockingQueue&lt;Integer&gt;();\r\n\t\tint threadCount = 20;\r\n\t\tCountDownLatch latch = new CountDownLatch(inputNumbers.size());\r\n\r\n\t\t// Consumer started first\r\n\t\tConsumer consumer = new Consumer();\r\n\t\tconsumer.setSharedQueue(insertData);\r\n\t\tconsumer.setNumThreads(threadCount);\r\n\t\tconsumer.setExecutor(Executors.newFixedThreadPool(threadCount));\r\n\t\tconsumer.setLatch(latch);\r\n\t\tconsumer.consume();\r\n\r\n\t\t// Producing the data\r\n\r\n\t\tif (!inputNumbers.isEmpty()) {\r\n\t\t\tfinal int parallelism = 40;\r\n\t\t\tForkJoinPool forkJoinPool = null;\r\n\t\t\ttry {\r\n\t\t\t\tforkJoinPool = new ForkJoinPool(parallelism);\r\n\t\t\t\tfinal List&lt;Boolean&gt; output = (List&lt;Boolean&gt;) forkJoinPool\r\n\t\t\t\t\t\t.submit(() -&gt; inputNumbers.parallelStream().forEach(inputNumber -&gt; {\r\n\t\t\t\t\t\t\tproduce(inputNumber, insertData);\r\n\t\t\t\t\t\t})).get();\r\n\t\t\t} catch (Exception e) {\r\n\t\t\t\tthrow new RuntimeException(e);\r\n\t\t\t} finally {\r\n\t\t\t\tif (forkJoinPool != null) {\r\n\t\t\t\t\tforkJoinPool.shutdown();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\ttry {\r\n\t\t\tlatch.await();\r\n\t\t} catch (InterruptedException e) {\r\n\t\t\tthrow new RuntimeException(e);\r\n\t\t}\r\n\r\n\t\tSystem.out.println(System.currentTimeMillis() - startTime);\r\n\r\n\t}\r\n\r\n\tpublic void produce(Integer inputNumber, BlockingQueue&lt;Integer&gt; insertData) {\r\n\t\ttry {\r\n\t\t\tThread.sleep(200);\r\n\t\t} catch (InterruptedException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\tSystem.out.println(&quot;Producer &quot; + inputNumber);\r\n\t\tinsertData.add(inputNumber);\r\n\r\n\t}\r\n\r\n}\r\n\r\n```\r\nother approach\r\n\r\n\r\n```\r\npackage testjavathread;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.Collections;\r\nimport java.util.List;\r\nimport java.util.concurrent.ForkJoinPool;\r\n\r\nimport com.google.common.collect.Lists;\r\n\r\npublic class TestThreadWithList {\r\n\r\n\tpublic static void main(String[] args) {\r\n\r\n\t\tTestThreadWithList testThread = new TestThreadWithList();\r\n\r\n\t\ttestThread.test();\r\n\r\n\t}\r\n\r\n\tprivate void test() {\r\n\t\tlong startTime = System.currentTimeMillis();\r\n\r\n\t\tList&lt;Integer&gt; inputNumbers = new ArrayList&lt;&gt;();\r\n\t\tfor (int i = 1; i &lt;= 100; i++) {\r\n\t\t\tinputNumbers.add(i);\r\n\t\t}\r\n\r\n\t\tList&lt;Integer&gt; insertData = Collections.synchronizedList(new ArrayList&lt;&gt;());\r\n\r\n\t\t// Producing the data\r\n\r\n\t\tif (!inputNumbers.isEmpty()) {\r\n\t\t\tfinal int parallelism = 40;\r\n\t\t\tForkJoinPool forkJoinPool = null;\r\n\t\t\ttry {\r\n\t\t\t\tforkJoinPool = new ForkJoinPool(parallelism);\r\n\t\t\t\tfinal List&lt;Boolean&gt; output = (List&lt;Boolean&gt;) forkJoinPool\r\n\t\t\t\t\t\t.submit(() -&gt; inputNumbers.parallelStream().forEach(inputNumber -&gt; {\r\n\t\t\t\t\t\t\tproduce(inputNumber, insertData);\r\n\t\t\t\t\t\t})).get();\r\n\t\t\t} catch (Exception e) {\r\n\t\t\t\tthrow new RuntimeException(e);\r\n\t\t\t} finally {\r\n\t\t\t\tif (forkJoinPool != null) {\r\n\t\t\t\t\tforkJoinPool.shutdown();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Consumer\r\n\r\n\t\tfinal int parallelism = 20;\r\n\t\tForkJoinPool forkJoinPool = null;\r\n\t\ttry {\r\n\t\t\tforkJoinPool = new ForkJoinPool(parallelism);\r\n\t\t\tList&lt;Boolean&gt; finalListOutput = (List&lt;Boolean&gt;) forkJoinPool\r\n\t\t\t\t\t.submit(() -&gt; Lists.partition(insertData, 2).parallelStream().forEach(eachNumber -&gt; {\r\n\t\t\t\t\t\tSystem.out.println(&quot;Consumer &quot; + eachNumber.get(0));\r\n\t\t\t\t\t\tSystem.out.println(&quot;Consumer &quot; + eachNumber.get(1));\r\n\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tThread.sleep(3000);\r\n\t\t\t\t\t\t} catch (InterruptedException e) {\r\n\t\t\t\t\t\t\t// TODO Auto-generated catch block\r\n\t\t\t\t\t\t\te.printStackTrace();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})).get();\r\n\t\t} catch (Exception e) {\r\n\t\t} finally {\r\n\t\t\tif (forkJoinPool != null) {\r\n\t\t\t\tforkJoinPool.shutdown();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tSystem.out.println(System.currentTimeMillis() - startTime);\r\n\t}\r\n\r\n\tprivate void produce(Integer inputNumber, List&lt;Integer&gt; insertData) {\r\n\t\ttry {\r\n\t\t\tThread.sleep(200);\r\n\t\t} catch (InterruptedException e) {\r\n\t\t\t// TODO Auto-generated catch block\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\tSystem.out.println(&quot;Producer &quot; + inputNumber);\r\n\t\tinsertData.add(inputNumber);\r\n\r\n\t}\r\n\r\n}\r\n\r\n```\r\n","title":"Take two items from BlockingQueue with latch countDown","body":"<p>Hi I have multithread environment.\nIts like a producer and subscriber problem.\nbut the challenge is i will have multiple producers and consumers also in multi number.\nI tried two approaches. Approach1 with BlockingQueue and approach2 with Synchronized List.\napproach2 is giving me faster results where as i need to get the approach1 faster.\nI found the problem as well. In approach2 i am waiting for the producer to finish producing first. and started consuming it. as i have a full prepared list, i have freedom to process list in partition and i am processing 2 items at a time.\nwhere as in BlockingQueue approach, which is ideal for these problems, i can take one item at a time, hence processing is slow.</p>\n<p>approach1 is taking 15310 milli seconds where as approach2 is taking 9755 only\ni tried calling take method twice in BlockingQueue approach, but realized latch.countDown wont work perfectly with that.</p>\n<p>Can some one help me approach1 much better than approach2, i have put time outs based on my real scenarios.</p>\n<p>Code i tried here</p>\n<pre><code>package testjavathread;\n\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.concurrent.BlockingQueue;\nimport java.util.concurrent.CountDownLatch;\nimport java.util.concurrent.ExecutorService;\nimport java.util.concurrent.Executors;\nimport java.util.concurrent.ForkJoinPool;\nimport java.util.concurrent.LinkedBlockingQueue;\n\nclass Consumer {\n\n    private BlockingQueue&lt;Integer&gt; sharedQueue;\n\n    private int numThreads;\n\n    private ExecutorService executor;\n\n    private CountDownLatch latch;\n\n    public void consume() {\n        for (int i = 0; i &lt; numThreads; i++) {\n            executor.submit(() -&gt; {\n                try {\n                    while (true) {\n                        Integer integer = sharedQueue.take();\n//                      if(!sharedQueue.isEmpty()) {\n//                          Integer integer2 = sharedQueue.take();\n//                          latch.countDown();\n//                      }\n                        System.out.println(&quot;Consumer &quot; + integer);\n                        Thread.sleep(3000);\n                        latch.countDown();\n                    }\n                } catch (InterruptedException e) {\n                    Thread.currentThread().interrupt();\n                }\n            });\n        }\n    }\n\n    public ExecutorService getExecutor() {\n        return executor;\n    }\n\n    public void setExecutor(ExecutorService executor) {\n        this.executor = executor;\n    }\n\n    public int getNumThreads() {\n        return numThreads;\n    }\n\n    public void setNumThreads(int numThreads) {\n        this.numThreads = numThreads;\n    }\n\n    public BlockingQueue&lt;Integer&gt; getSharedQueue() {\n        return sharedQueue;\n    }\n\n    public void setSharedQueue(BlockingQueue&lt;Integer&gt; sharedQueue) {\n        this.sharedQueue = sharedQueue;\n    }\n\n    public CountDownLatch getLatch() {\n        return latch;\n    }\n\n    public void setLatch(CountDownLatch latch) {\n        this.latch = latch;\n    }\n}\n\npublic class BlockingQueueTest {\n\n    public static void main(String[] args) {\n        BlockingQueueTest testThread = new BlockingQueueTest();\n\n        testThread.test();\n\n    }\n\n    public void test() {\n        long startTime = System.currentTimeMillis();\n\n        List&lt;Integer&gt; inputNumbers = new ArrayList&lt;&gt;();\n        for (int i = 1; i &lt;= 100; i++) {\n            inputNumbers.add(i);\n        }\n\n        BlockingQueue&lt;Integer&gt; insertData = new LinkedBlockingQueue&lt;Integer&gt;();\n        int threadCount = 20;\n        CountDownLatch latch = new CountDownLatch(inputNumbers.size());\n\n        // Consumer started first\n        Consumer consumer = new Consumer();\n        consumer.setSharedQueue(insertData);\n        consumer.setNumThreads(threadCount);\n        consumer.setExecutor(Executors.newFixedThreadPool(threadCount));\n        consumer.setLatch(latch);\n        consumer.consume();\n\n        // Producing the data\n\n        if (!inputNumbers.isEmpty()) {\n            final int parallelism = 40;\n            ForkJoinPool forkJoinPool = null;\n            try {\n                forkJoinPool = new ForkJoinPool(parallelism);\n                final List&lt;Boolean&gt; output = (List&lt;Boolean&gt;) forkJoinPool\n                        .submit(() -&gt; inputNumbers.parallelStream().forEach(inputNumber -&gt; {\n                            produce(inputNumber, insertData);\n                        })).get();\n            } catch (Exception e) {\n                throw new RuntimeException(e);\n            } finally {\n                if (forkJoinPool != null) {\n                    forkJoinPool.shutdown();\n                }\n            }\n        }\n\n        try {\n            latch.await();\n        } catch (InterruptedException e) {\n            throw new RuntimeException(e);\n        }\n\n        System.out.println(System.currentTimeMillis() - startTime);\n\n    }\n\n    public void produce(Integer inputNumber, BlockingQueue&lt;Integer&gt; insertData) {\n        try {\n            Thread.sleep(200);\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n        System.out.println(&quot;Producer &quot; + inputNumber);\n        insertData.add(inputNumber);\n\n    }\n\n}\n\n</code></pre>\n<p>other approach</p>\n<pre><code>package testjavathread;\n\nimport java.util.ArrayList;\nimport java.util.Collections;\nimport java.util.List;\nimport java.util.concurrent.ForkJoinPool;\n\nimport com.google.common.collect.Lists;\n\npublic class TestThreadWithList {\n\n    public static void main(String[] args) {\n\n        TestThreadWithList testThread = new TestThreadWithList();\n\n        testThread.test();\n\n    }\n\n    private void test() {\n        long startTime = System.currentTimeMillis();\n\n        List&lt;Integer&gt; inputNumbers = new ArrayList&lt;&gt;();\n        for (int i = 1; i &lt;= 100; i++) {\n            inputNumbers.add(i);\n        }\n\n        List&lt;Integer&gt; insertData = Collections.synchronizedList(new ArrayList&lt;&gt;());\n\n        // Producing the data\n\n        if (!inputNumbers.isEmpty()) {\n            final int parallelism = 40;\n            ForkJoinPool forkJoinPool = null;\n            try {\n                forkJoinPool = new ForkJoinPool(parallelism);\n                final List&lt;Boolean&gt; output = (List&lt;Boolean&gt;) forkJoinPool\n                        .submit(() -&gt; inputNumbers.parallelStream().forEach(inputNumber -&gt; {\n                            produce(inputNumber, insertData);\n                        })).get();\n            } catch (Exception e) {\n                throw new RuntimeException(e);\n            } finally {\n                if (forkJoinPool != null) {\n                    forkJoinPool.shutdown();\n                }\n            }\n        }\n\n        // Consumer\n\n        final int parallelism = 20;\n        ForkJoinPool forkJoinPool = null;\n        try {\n            forkJoinPool = new ForkJoinPool(parallelism);\n            List&lt;Boolean&gt; finalListOutput = (List&lt;Boolean&gt;) forkJoinPool\n                    .submit(() -&gt; Lists.partition(insertData, 2).parallelStream().forEach(eachNumber -&gt; {\n                        System.out.println(&quot;Consumer &quot; + eachNumber.get(0));\n                        System.out.println(&quot;Consumer &quot; + eachNumber.get(1));\n\n                        try {\n                            Thread.sleep(3000);\n                        } catch (InterruptedException e) {\n                            // TODO Auto-generated catch block\n                            e.printStackTrace();\n                        }\n                    })).get();\n        } catch (Exception e) {\n        } finally {\n            if (forkJoinPool != null) {\n                forkJoinPool.shutdown();\n            }\n        }\n\n        System.out.println(System.currentTimeMillis() - startTime);\n    }\n\n    private void produce(Integer inputNumber, List&lt;Integer&gt; insertData) {\n        try {\n            Thread.sleep(200);\n        } catch (InterruptedException e) {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n        }\n        System.out.println(&quot;Producer &quot; + inputNumber);\n        insertData.add(inputNumber);\n\n    }\n\n}\n\n</code></pre>\n"},{"tags":["java","android","variables"],"comments":[{"owner":{"account_id":7562599,"reputation":6043,"user_id":6083675,"accept_rate":29,"display_name":"Laurel"},"score":0,"creation_date":1684357000,"post_id":11037643,"comment_id":134508505,"body_markdown":"Does this answer your question? [How do I pass data between Activities in Android application?](https://stackoverflow.com/questions/2091465/how-do-i-pass-data-between-activities-in-android-application)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/2091465/how-do-i-pass-data-between-activities-in-android-application\">How do I pass data between Activities in Android application?</a>"}],"owner":{"account_id":1525820,"reputation":61,"user_id":1424296,"display_name":"user1424296"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":13130,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":0,"score":5,"last_activity_date":1684339183,"creation_date":1339692154,"question_id":11037643,"body_markdown":"I have a screen where I store a phone number then go to another screen and launch the main part of the activity where I send a text massage where I am trying to get the number I entered in the first activity. I have all the code in to send message but it will not get the number from the previous activity. Here is my code form the first activity:\r\n\r\n \r\n\r\n    public class StoreNumberActivity extends Host_Setting_PageActivity {\r\n    \t /** Called when the activity is first created. */\r\n        @Override\r\n       \r\n    \r\n         public void onCreate(Bundle savedInstanceState) {\r\n                super.on``Create(savedInstanceState);\r\n                setContentView(R.layout.notificationsettings);\r\n                \r\n                final EditText editText= (EditText) findViewById(R.id.HostPhoneNumber);\r\n                \r\n                 //Juston class to schedule edit\r\n                Button Save = (Button) findViewById(R.id.SaveBtn);\r\n                Save.setOnClickListener(new View.OnClickListener() {\r\n                    public void onClick(View view) {\r\n                    \tToast.makeText(StoreNumberActivity.this, &quot;Number was Saved Successfully&quot;, Toast.LENGTH_LONG).show();\r\n                  \r\n                    }\r\n                });\r\n                 Button Send = (Button) findViewById(R.id.SendBtn);\r\n                  Send.setOnClickListener(new View.OnClickListener() {\r\n                      public void onClick(View view) {\r\n                    \t  String Number  =  editText.getText().toString();\r\n                          Intent myIntent = new Intent(StoreNumberActivity.this, Host_Setting_PageActivity.class);\r\n                          myIntent.putExtra(&quot;Phone Num&quot;, Number);\r\n                          startActivity(myIntent);\r\n                      }\r\n        \r\n    \r\nand my code from the second activity:\r\n    \r\n   \r\n\r\n     public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        \r\n        \r\n        /** setting the view of the activity to xml */\r\n        setContentView(R.layout.messageme);\r\n        final Bundle bundle = getIntent().getExtras();\r\n        \r\n        final EditText editText= (EditText) findViewById(R.id.yourname);\r\n        final EditText phonenumber= (EditText) findViewById(R.id.phone);\r\n        final EditText emailaddress= (EditText) findViewById(R.id.email);\r\n        final EditText messagebox= (EditText) findViewById(R.id.messages);\r\n        final EditText number = (EditText) findViewById(R.id.HostPhoneNumber);\r\n        \r\n        button= (Button) findViewById(R.id.btn);\r\n        button.setOnClickListener(new View.OnClickListener() {\r\n         \r\n        public void onClick(View v) {\r\n        // TODO Auto-generated method stub\r\n        \tIntent myIntent = getIntent(); // this is just for example purpose\r\n        \tmyIntent.getStringExtra(&quot;PhoneNum&quot;);\r\n        \tString Number = bundle.getString(&quot;Phone Num&quot;);\r\n        \tString Name  =  editText.getText().toString();\r\n        \tString Phone  = phonenumber.getText().toString();\r\n        \tString Email  = emailaddress.getText().toString();\r\n        \tString Message  = messagebox.getText().toString();\r\n        \r\n        \t\r\n        \t\r\n        \tsendSMS(Number, &quot;Name: &quot; + Name + &quot;\\n&quot; + &quot;\\n&quot; + &quot;Email: &quot; + Email + &quot;\\n&quot; + &quot;\\n&quot; + &quot;Phone: &quot; + Phone + &quot;\\n&quot; + &quot;\\n&quot; + Message);\r\n        }\r\n\r\n","title":"Send Variable from one activity to another one","body":"<p>I have a screen where I store a phone number then go to another screen and launch the main part of the activity where I send a text massage where I am trying to get the number I entered in the first activity. I have all the code in to send message but it will not get the number from the previous activity. Here is my code form the first activity:</p>\n<pre><code>public class StoreNumberActivity extends Host_Setting_PageActivity {\n     /** Called when the activity is first created. */\n    @Override\n   \n\n     public void onCreate(Bundle savedInstanceState) {\n            super.on``Create(savedInstanceState);\n            setContentView(R.layout.notificationsettings);\n            \n            final EditText editText= (EditText) findViewById(R.id.HostPhoneNumber);\n            \n             //Juston class to schedule edit\n            Button Save = (Button) findViewById(R.id.SaveBtn);\n            Save.setOnClickListener(new View.OnClickListener() {\n                public void onClick(View view) {\n                    Toast.makeText(StoreNumberActivity.this, &quot;Number was Saved Successfully&quot;, Toast.LENGTH_LONG).show();\n              \n                }\n            });\n             Button Send = (Button) findViewById(R.id.SendBtn);\n              Send.setOnClickListener(new View.OnClickListener() {\n                  public void onClick(View view) {\n                      String Number  =  editText.getText().toString();\n                      Intent myIntent = new Intent(StoreNumberActivity.this, Host_Setting_PageActivity.class);\n                      myIntent.putExtra(&quot;Phone Num&quot;, Number);\n                      startActivity(myIntent);\n                  }\n    \n</code></pre>\n<p>and my code from the second activity:</p>\n<pre><code> public void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    \n    \n    /** setting the view of the activity to xml */\n    setContentView(R.layout.messageme);\n    final Bundle bundle = getIntent().getExtras();\n    \n    final EditText editText= (EditText) findViewById(R.id.yourname);\n    final EditText phonenumber= (EditText) findViewById(R.id.phone);\n    final EditText emailaddress= (EditText) findViewById(R.id.email);\n    final EditText messagebox= (EditText) findViewById(R.id.messages);\n    final EditText number = (EditText) findViewById(R.id.HostPhoneNumber);\n    \n    button= (Button) findViewById(R.id.btn);\n    button.setOnClickListener(new View.OnClickListener() {\n     \n    public void onClick(View v) {\n    // TODO Auto-generated method stub\n        Intent myIntent = getIntent(); // this is just for example purpose\n        myIntent.getStringExtra(&quot;PhoneNum&quot;);\n        String Number = bundle.getString(&quot;Phone Num&quot;);\n        String Name  =  editText.getText().toString();\n        String Phone  = phonenumber.getText().toString();\n        String Email  = emailaddress.getText().toString();\n        String Message  = messagebox.getText().toString();\n    \n        \n        \n        sendSMS(Number, &quot;Name: &quot; + Name + &quot;\\n&quot; + &quot;\\n&quot; + &quot;Email: &quot; + Email + &quot;\\n&quot; + &quot;\\n&quot; + &quot;Phone: &quot; + Phone + &quot;\\n&quot; + &quot;\\n&quot; + Message);\n    }\n</code></pre>\n"},{"tags":["java","spring-security","vaadin","spring-graphql","vaadin24"],"comments":[{"owner":{"account_id":7372513,"reputation":951,"user_id":5612275,"display_name":"Marco C"},"score":0,"creation_date":1684313661,"post_id":76270077,"comment_id":134498728,"body_markdown":"Is the application using PUSH with LONG_POLLING transport?","body":"Is the application using PUSH with LONG_POLLING transport?"},{"owner":{"account_id":3837378,"reputation":35488,"user_id":3181392,"display_name":"cfrick"},"score":0,"creation_date":1684323023,"post_id":76270077,"comment_id":134500768,"body_markdown":"When you say &quot;Locally this works 100%&quot;: have you tried to stress this\nclaim?   Or in other words, what kind of load triggers this error?  Can\nyou already reproduce with two browser windows open - or do you need\na load tester to make it finally tip over?","body":"When you say &quot;Locally this works 100%&quot;: have you tried to stress this claim?   Or in other words, what kind of load triggers this error?  Can you already reproduce with two browser windows open - or do you need a load tester to make it finally tip over?"},{"owner":{"account_id":25748579,"reputation":45,"user_id":19501464,"display_name":"Sebastian L&#252;tge"},"score":0,"creation_date":1684329545,"post_id":76270077,"comment_id":134502274,"body_markdown":"I switched the polling transport mode to LONG_POLLING, but the issue still occurs. It might be slightly less often, I&#39;m not sure.\nThe error also occurs with just me on the test server, not even using more than 1 browser. I increased the memory of the instance, in case it was very aggressive garbage collection, but this also did not help.","body":"I switched the polling transport mode to LONG_POLLING, but the issue still occurs. It might be slightly less often, I&#39;m not sure. The error also occurs with just me on the test server, not even using more than 1 browser. I increased the memory of the instance, in case it was very aggressive garbage collection, but this also did not help."}],"owner":{"account_id":25748579,"reputation":45,"user_id":19501464,"display_name":"Sebastian L&#252;tge"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":592,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1684338965,"creation_date":1684312507,"question_id":76270077,"body_markdown":"I have the following view, which loads its data asynchronously:\r\n```\r\n@Route(value = NewsAdminView.ROUTE)\r\n@RequiredArgsConstructor\r\npublic class NewsAdminView extends VerticalLayout {\r\n    public static final String ROUTE = &quot;&quot;;\r\n    private final Grid&lt;News&gt; grid = new Grid&lt;&gt;(News.class);\r\n    private final NewsService service;\r\n\r\n    @Override\r\n    protected void onAttach(final AttachEvent attachEvent) {\r\n        if (attachEvent.isInitialAttach()) {\r\n            addComponents();\r\n\r\n            final UI ui = attachEvent.getUI();\r\n            service.getNews().subscribe(items -&gt; updateItems(ui, items), t -&gt; GenericNotifications.graphQlError(ui, t));\r\n        }\r\n    }\r\n\r\n    private void updateItems(final UI ui, final List&lt;News&gt; news) {\r\n        ui.access(() -&gt; {\r\n            grid.setItems(this.newsList);\r\n            grid.setEnabled(true);\r\n        });\r\n    }\r\n}\r\n```\r\nThe service simply passes the correct query to my GraphQL client:\r\n```\r\n@Service\r\n@RequiredArgsConstructor\r\npublic class NewsService {\r\n    private final GraphQlService graphQlService;\r\n\r\n    public Mono&lt;List&lt;News&gt;&gt; getNews() {\r\n        final String query = &quot;&quot;&quot;\r\n            query NewsQuery {\r\n                allNews {\r\n                    author\r\n                    body\r\n                    title\r\n                }\r\n            }&quot;&quot;&quot;;\r\n\r\n        return graphQlService.queryList(query, &quot;allNews&quot;, News.class);\r\n    }\r\n}\r\n```\r\nAnd the GraphQlService finally sends the request via a Spring HttpGraphQlClient. This client needs to be configured for OAuth2 authentication, as the GraphQL endpoint is protected as a resource server.\r\n```\r\n@Service\r\npublic class GraphQlService {\r\n    private final HttpGraphQlClient client;\r\n\r\n    public GraphQlService(final WebClient.Builder webClientBuilder,\r\n        final ClientRegistrationRepository clientRegistrationRepository,\r\n        final OAuth2AuthorizedClientRepository oAuth2AuthorizedClientRepository,\r\n        final @Value(&quot;${graphql.baseUrl}&quot;) String baseUrl) {\r\n        final var oauth2Client = new ServletOAuth2AuthorizedClientExchangeFilterFunction(\r\n            clientRegistrationRepository, oAuth2AuthorizedClientRepository);\r\n        webClientBuilder.apply(oauth2Client.oauth2Configuration())\r\n            .defaultRequest(request -&gt; request.attributes(clientRegistrationId(&quot;custom&quot;)));\r\n        client = HttpGraphQlClient.builder(webClientBuilder.build()).url(baseUrl).build();\r\n    }\r\n\r\n    @NotNull\r\n    public &lt;T&gt; Mono&lt;List&lt;T&gt;&gt; queryList(final String query, final String jsonPath, final Class&lt;T&gt; typeRef) {\r\n        log.debug(&quot;Running GraphQL list query for allNews, expecting News objects&quot;);\r\n        return client.document(query).variables(arguments).retrieve(jsonPath).toEntityList(typeRef);\r\n    }\r\n}\r\n```\r\nLocally this works 100% of the time, but on our test servers it randomly, maybe about 50% of the time, produces this exception:\r\n```\r\nDEBUG 13997 --- [io-10112-exec-2] service.GraphQlService          : Running GraphQL list query for allNews, expecting News objects\r\nERROR 13997 --- [oundedElastic-2] reactor.core.publisher.Operators: Operator called default onErrorDropped\r\n\r\nreactor.core.Exceptions$ErrorCallbackNotImplemented: org.springframework.graphql.client.GraphQlTransportException: GraphQlTransport error: The request object has been recycled and is no longer associated wi\r\nth this facade\r\nCaused by: org.springframework.graphql.client.GraphQlTransportException: GraphQlTransport error: The request object has been recycled and is no longer associated with this facade\r\n        at org.springframework.graphql.client.DefaultGraphQlClient$DefaultRequestSpec.lambda$execute$1(DefaultGraphQlClient.java:161) ~[spring-graphql-1.1.3.jar!/:1.1.3]\r\n        at reactor.core.publisher.Mono.lambda$onErrorResume$29(Mono.java:3849) ~[reactor-core-3.5.5.jar!/:3.5.5]\r\n        at reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onError(FluxOnErrorResume.java:94) ~[reactor-core-3.5.5.jar!/:3.5.5]\r\n        at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onError(FluxMapFuseable.java:142) ~[reactor-core-3.5.5.jar!/:3.5.5]\r\n        at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onError(FluxMapFuseable.java:142) ~[reactor-core-3.5.5.jar!/:3.5.5]\r\n        at reactor.core.publisher.MonoFlatMap$FlatMapMain.onError(MonoFlatMap.java:180) ~[reactor-core-3.5.5.jar!/:3.5.5]\r\n        at reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.onError(FluxContextWrite.java:121) ~[reactor-core-3.5.5.jar!/:3.5.5]\r\n        at reactor.core.publisher.FluxDoFinally$DoFinallySubscriber.onError(FluxDoFinally.java:119) ~[reactor-core-3.5.5.jar!/:3.5.5]\r\n        at reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.onError(MonoPeekTerminal.java:258) ~[reactor-core-3.5.5.jar!/:3.5.5]\r\n        at reactor.core.publisher.FluxPeekFuseable$PeekConditionalSubscriber.onError(FluxPeekFuseable.java:903) ~[reactor-core-3.5.5.jar!/:3.5.5]\r\n        at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onError(Operators.java:2210) ~[reactor-core-3.5.5.jar!/:3.5.5]\r\n        at reactor.core.publisher.FluxOnAssembly$OnAssemblySubscriber.onError(FluxOnAssembly.java:544) ~[reactor-core-3.5.5.jar!/:3.5.5]\r\n        at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onError(Operators.java:2210) ~[reactor-core-3.5.5.jar!/:3.5.5]\r\n        at reactor.core.publisher.MonoFlatMap$FlatMapMain.onError(MonoFlatMap.java:180) ~[reactor-core-3.5.5.jar!/:3.5.5]\r\n        at reactor.core.publisher.FluxMap$MapSubscriber.onError(FluxMap.java:134) ~[reactor-core-3.5.5.jar!/:3.5.5]\r\n        at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onError(Operators.java:2210) ~[reactor-core-3.5.5.jar!/:3.5.5]\r\n        at reactor.core.publisher.MonoFlatMap$FlatMapMain.secondError(MonoFlatMap.java:241) ~[reactor-core-3.5.5.jar!/:3.5.5]\r\n        at reactor.core.publisher.MonoFlatMap$FlatMapInner.onError(MonoFlatMap.java:315) ~[reactor-core-3.5.5.jar!/:3.5.5]\r\n        at reactor.core.publisher.FluxSubscribeOnCallable$CallableSubscribeOnSubscription.run(FluxSubscribeOnCallable.java:230) ~[reactor-core-3.5.5.jar!/:3.5.5]\r\n        at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:68) ~[reactor-core-3.5.5.jar!/:3.5.5]\r\n        at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:28) ~[reactor-core-3.5.5.jar!/:3.5.5]\r\n        at java.base/java.util.concurrent.FutureTask.run(Unknown Source) ~[na:na]\r\n        at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(Unknown Source) ~[na:na]\r\n        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) ~[na:na]\r\n        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) ~[na:na]\r\n        at java.base/java.lang.Thread.run(Unknown Source) ~[na:na]\r\nCaused by: java.lang.IllegalStateException: The request object has been recycled and is no longer associated with this facade\r\n        at org.apache.catalina.connector.RequestFacade.checkFacade(RequestFacade.java:856) ~[tomcat-embed-core-10.1.8.jar!/:na]\r\n        Suppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException:\r\nError has been observed at the following site(s):\r\n        *__checkpoint ⇢ Request to POST null [DefaultWebClient]\r\nOriginal Stack Trace:\r\n                at org.apache.catalina.connector.RequestFacade.checkFacade(RequestFacade.java:856) ~[tomcat-embed-core-10.1.8.jar!/:na]\r\n                at org.apache.catalina.connector.RequestFacade.getParameter(RequestFacade.java:304) ~[tomcat-embed-core-10.1.8.jar!/:na]\r\n                at jakarta.servlet.ServletRequestWrapper.getParameter(ServletRequestWrapper.java:149) ~[tomcat-embed-core-10.1.8.jar!/:na]\r\n                at org.springframework.security.web.firewall.StrictHttpFirewall$StrictFirewalledRequest.getParameter(StrictHttpFirewall.java:769) ~[spring-security-web-6.0.3.jar!/:6.0.3]\r\n                at jakarta.servlet.ServletRequestWrapper.getParameter(ServletRequestWrapper.java:149) ~[tomcat-embed-core-10.1.8.jar!/:na]\r\n                at jakarta.servlet.ServletRequestWrapper.getParameter(ServletRequestWrapper.java:149) ~[tomcat-embed-core-10.1.8.jar!/:na]\r\n                at org.springframework.security.oauth2.client.web.DefaultOAuth2AuthorizedClientManager$DefaultContextAttributesMapper.apply(DefaultOAuth2AuthorizedClientManager.java:298) ~[spring-security-oauth2-client-6.0.3.jar!/:6.0.3]\r\n                at org.springframework.security.oauth2.client.web.DefaultOAuth2AuthorizedClientManager$DefaultContextAttributesMapper.apply(DefaultOAuth2AuthorizedClientManager.java:291) ~[spring-security-oauth2-client-6.0.3.jar!/:6.0.3]\r\n                at org.springframework.security.oauth2.client.web.DefaultOAuth2AuthorizedClientManager.lambda$authorize$2(DefaultOAuth2AuthorizedClientManager.java:168) ~[spring-security-oauth2-client-6.0.3.jar!/:6.0.3]\r\n                at org.springframework.security.oauth2.client.OAuth2AuthorizationContext$Builder.attributes(OAuth2AuthorizationContext.java:185) ~[spring-security-oauth2-client-6.0.3.jar!/:6.0.3]\r\n                at org.springframework.security.oauth2.client.web.DefaultOAuth2AuthorizedClientManager.authorize(DefaultOAuth2AuthorizedClientManager.java:167) ~[spring-security-oauth2-client-6.0.3.jar!/:6.0.3]\r\n                at org.springframework.security.oauth2.client.web.reactive.function.client.ServletOAuth2AuthorizedClientExchangeFilterFunction.lambda$authorizeClient$22(ServletOAuth2AuthorizedClientExchangeFilterFunction.java:485) ~[spring-security-oauth2-client-6.0.3.jar!/:6.0.3]\r\n                at reactor.core.publisher.MonoSupplier.call(MonoSupplier.java:67) ~[reactor-core-3.5.5.jar!/:3.5.5]\r\n                at reactor.core.publisher.FluxSubscribeOnCallable$CallableSubscribeOnSubscription.run(FluxSubscribeOnCallable.java:227) ~[reactor-core-3.5.5.jar!/:3.5.5]\r\n                at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:68) ~[reactor-core-3.5.5.jar!/:3.5.5]\r\n                at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:28) ~[reactor-core-3.5.5.jar!/:3.5.5]\r\n                at java.base/java.util.concurrent.FutureTask.run(Unknown Source) ~[na:na]\r\n                at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(Unknown Source) ~[na:na]\r\n                at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) ~[na:na]\r\n                at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) ~[na:na]\r\n                at java.base/java.lang.Thread.run(Unknown Source) ~[na:na]\r\n```\r\nI suspect some kind of race condition between the GraphQL query being sent and the HTTP request being cleaned up. But I can&#39;t figure out how to prevent the HTTP request from being recycled.\r\n\r\nI compared my code to this Webinar on YouTube: https://www.youtube.com/watch?v=7Mr_pQc_rxA and its corresponding code base here: https://github.com/eriklumme/reactive-vaadin-demo. It is a little bit older, but seems to be basically identical (sans the OAuth2 authentication and usage of GraphQL, but which is based on reactive Monos).\r\n\r\nI have aslo tried a GraphQlService that does not rely on HTTP requests, which works for this error, but prevents the automatic renewal of OAuth2 access tokens:\r\n```\r\n@Service\r\npublic class NoHttpRequestGraphQlService {\r\n    private final HttpGraphQlClient client;\r\n\r\n    public NoHttpRequestGraphQlService(final WebClient.Builder webClientBuilder,\r\n        final ClientRegistrationRepository clientRegistrationRepository,\r\n        final OAuth2AuthorizedClientService oAuth2AuthorizedClientService,\r\n        final @Value(&quot;${graphql.baseUrl}&quot;) String baseUrl) {\r\n        final var authorizedClientManager = new AuthorizedClientServiceOAuth2AuthorizedClientManager(clientRegistrationRepository, oAuth2AuthorizedClientService);\r\n        final var oauth2Client = new ServletOAuth2AuthorizedClientExchangeFilterFunction(authorizedClientManager);\r\n        final var authorizationFailureHandler = new RemoveAuthorizedClientOAuth2AuthorizationFailureHandler(\r\n                (clientRegistrationId, principal, attributes) -&gt; oAuth2AuthorizedClientService.removeAuthorizedClient(clientRegistrationId, principal.getName()));\r\n        authorizedClientManager.setAuthorizationFailureHandler(authorizationFailureHandler);\r\n        oauth2Client.setAuthorizationFailureHandler(authorizationFailureHandler);\r\n        webClientBuilder.apply(oauth2Client.oauth2Configuration())\r\n            .defaultRequest(request -&gt; request.attributes(clientRegistrationId(&quot;custom&quot;)));\r\n        client = HttpGraphQlClient.builder(webClientBuilder.build()).url(baseUrl).build();\r\n    }\r\n\r\n    @NotNull\r\n    public &lt;T&gt; Mono&lt;List&lt;T&gt;&gt; queryList(final String query, final String jsonPath, final Class&lt;T&gt; typeRef) {\r\n        log.debug(&quot;Running GraphQL list query for allNews, expecting News objects&quot;);\r\n        return client.document(query).variables(arguments).retrieve(jsonPath).toEntityList(typeRef);\r\n    }\r\n}\r\n```\r\nI would prefer the HTTP request based version (as that is the actual environment where this code runs), but I would settle for the access token renewal working with my workaround.\r\n\r\nEDIT: After looking into this further, I believe the OAuth2 authorization process is requesting the OAuth2 scope parameter from a stale request. I replaced the default implementation `DefaultOAuth2AuthorizedClientManager.DefaultContextAttributesMapper` with an empty one (as we are not using scopes at the moment). There seem to be no further calls to the stored request, so this might work for us. I&#39;ll investigate further and/or improve the &#39;dirty hack&#39; solution I have now. Due to the long weekend here I&#39;ll only be back on monday.","title":"Asynchronous requests sometimes fail because the RequestFacade is recycled","body":"<p>I have the following view, which loads its data asynchronously:</p>\n<pre><code>@Route(value = NewsAdminView.ROUTE)\n@RequiredArgsConstructor\npublic class NewsAdminView extends VerticalLayout {\n    public static final String ROUTE = &quot;&quot;;\n    private final Grid&lt;News&gt; grid = new Grid&lt;&gt;(News.class);\n    private final NewsService service;\n\n    @Override\n    protected void onAttach(final AttachEvent attachEvent) {\n        if (attachEvent.isInitialAttach()) {\n            addComponents();\n\n            final UI ui = attachEvent.getUI();\n            service.getNews().subscribe(items -&gt; updateItems(ui, items), t -&gt; GenericNotifications.graphQlError(ui, t));\n        }\n    }\n\n    private void updateItems(final UI ui, final List&lt;News&gt; news) {\n        ui.access(() -&gt; {\n            grid.setItems(this.newsList);\n            grid.setEnabled(true);\n        });\n    }\n}\n</code></pre>\n<p>The service simply passes the correct query to my GraphQL client:</p>\n<pre><code>@Service\n@RequiredArgsConstructor\npublic class NewsService {\n    private final GraphQlService graphQlService;\n\n    public Mono&lt;List&lt;News&gt;&gt; getNews() {\n        final String query = &quot;&quot;&quot;\n            query NewsQuery {\n                allNews {\n                    author\n                    body\n                    title\n                }\n            }&quot;&quot;&quot;;\n\n        return graphQlService.queryList(query, &quot;allNews&quot;, News.class);\n    }\n}\n</code></pre>\n<p>And the GraphQlService finally sends the request via a Spring HttpGraphQlClient. This client needs to be configured for OAuth2 authentication, as the GraphQL endpoint is protected as a resource server.</p>\n<pre><code>@Service\npublic class GraphQlService {\n    private final HttpGraphQlClient client;\n\n    public GraphQlService(final WebClient.Builder webClientBuilder,\n        final ClientRegistrationRepository clientRegistrationRepository,\n        final OAuth2AuthorizedClientRepository oAuth2AuthorizedClientRepository,\n        final @Value(&quot;${graphql.baseUrl}&quot;) String baseUrl) {\n        final var oauth2Client = new ServletOAuth2AuthorizedClientExchangeFilterFunction(\n            clientRegistrationRepository, oAuth2AuthorizedClientRepository);\n        webClientBuilder.apply(oauth2Client.oauth2Configuration())\n            .defaultRequest(request -&gt; request.attributes(clientRegistrationId(&quot;custom&quot;)));\n        client = HttpGraphQlClient.builder(webClientBuilder.build()).url(baseUrl).build();\n    }\n\n    @NotNull\n    public &lt;T&gt; Mono&lt;List&lt;T&gt;&gt; queryList(final String query, final String jsonPath, final Class&lt;T&gt; typeRef) {\n        log.debug(&quot;Running GraphQL list query for allNews, expecting News objects&quot;);\n        return client.document(query).variables(arguments).retrieve(jsonPath).toEntityList(typeRef);\n    }\n}\n</code></pre>\n<p>Locally this works 100% of the time, but on our test servers it randomly, maybe about 50% of the time, produces this exception:</p>\n<pre><code>DEBUG 13997 --- [io-10112-exec-2] service.GraphQlService          : Running GraphQL list query for allNews, expecting News objects\nERROR 13997 --- [oundedElastic-2] reactor.core.publisher.Operators: Operator called default onErrorDropped\n\nreactor.core.Exceptions$ErrorCallbackNotImplemented: org.springframework.graphql.client.GraphQlTransportException: GraphQlTransport error: The request object has been recycled and is no longer associated wi\nth this facade\nCaused by: org.springframework.graphql.client.GraphQlTransportException: GraphQlTransport error: The request object has been recycled and is no longer associated with this facade\n        at org.springframework.graphql.client.DefaultGraphQlClient$DefaultRequestSpec.lambda$execute$1(DefaultGraphQlClient.java:161) ~[spring-graphql-1.1.3.jar!/:1.1.3]\n        at reactor.core.publisher.Mono.lambda$onErrorResume$29(Mono.java:3849) ~[reactor-core-3.5.5.jar!/:3.5.5]\n        at reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onError(FluxOnErrorResume.java:94) ~[reactor-core-3.5.5.jar!/:3.5.5]\n        at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onError(FluxMapFuseable.java:142) ~[reactor-core-3.5.5.jar!/:3.5.5]\n        at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onError(FluxMapFuseable.java:142) ~[reactor-core-3.5.5.jar!/:3.5.5]\n        at reactor.core.publisher.MonoFlatMap$FlatMapMain.onError(MonoFlatMap.java:180) ~[reactor-core-3.5.5.jar!/:3.5.5]\n        at reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.onError(FluxContextWrite.java:121) ~[reactor-core-3.5.5.jar!/:3.5.5]\n        at reactor.core.publisher.FluxDoFinally$DoFinallySubscriber.onError(FluxDoFinally.java:119) ~[reactor-core-3.5.5.jar!/:3.5.5]\n        at reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.onError(MonoPeekTerminal.java:258) ~[reactor-core-3.5.5.jar!/:3.5.5]\n        at reactor.core.publisher.FluxPeekFuseable$PeekConditionalSubscriber.onError(FluxPeekFuseable.java:903) ~[reactor-core-3.5.5.jar!/:3.5.5]\n        at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onError(Operators.java:2210) ~[reactor-core-3.5.5.jar!/:3.5.5]\n        at reactor.core.publisher.FluxOnAssembly$OnAssemblySubscriber.onError(FluxOnAssembly.java:544) ~[reactor-core-3.5.5.jar!/:3.5.5]\n        at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onError(Operators.java:2210) ~[reactor-core-3.5.5.jar!/:3.5.5]\n        at reactor.core.publisher.MonoFlatMap$FlatMapMain.onError(MonoFlatMap.java:180) ~[reactor-core-3.5.5.jar!/:3.5.5]\n        at reactor.core.publisher.FluxMap$MapSubscriber.onError(FluxMap.java:134) ~[reactor-core-3.5.5.jar!/:3.5.5]\n        at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onError(Operators.java:2210) ~[reactor-core-3.5.5.jar!/:3.5.5]\n        at reactor.core.publisher.MonoFlatMap$FlatMapMain.secondError(MonoFlatMap.java:241) ~[reactor-core-3.5.5.jar!/:3.5.5]\n        at reactor.core.publisher.MonoFlatMap$FlatMapInner.onError(MonoFlatMap.java:315) ~[reactor-core-3.5.5.jar!/:3.5.5]\n        at reactor.core.publisher.FluxSubscribeOnCallable$CallableSubscribeOnSubscription.run(FluxSubscribeOnCallable.java:230) ~[reactor-core-3.5.5.jar!/:3.5.5]\n        at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:68) ~[reactor-core-3.5.5.jar!/:3.5.5]\n        at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:28) ~[reactor-core-3.5.5.jar!/:3.5.5]\n        at java.base/java.util.concurrent.FutureTask.run(Unknown Source) ~[na:na]\n        at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(Unknown Source) ~[na:na]\n        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) ~[na:na]\n        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) ~[na:na]\n        at java.base/java.lang.Thread.run(Unknown Source) ~[na:na]\nCaused by: java.lang.IllegalStateException: The request object has been recycled and is no longer associated with this facade\n        at org.apache.catalina.connector.RequestFacade.checkFacade(RequestFacade.java:856) ~[tomcat-embed-core-10.1.8.jar!/:na]\n        Suppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException:\nError has been observed at the following site(s):\n        *__checkpoint ⇢ Request to POST null [DefaultWebClient]\nOriginal Stack Trace:\n                at org.apache.catalina.connector.RequestFacade.checkFacade(RequestFacade.java:856) ~[tomcat-embed-core-10.1.8.jar!/:na]\n                at org.apache.catalina.connector.RequestFacade.getParameter(RequestFacade.java:304) ~[tomcat-embed-core-10.1.8.jar!/:na]\n                at jakarta.servlet.ServletRequestWrapper.getParameter(ServletRequestWrapper.java:149) ~[tomcat-embed-core-10.1.8.jar!/:na]\n                at org.springframework.security.web.firewall.StrictHttpFirewall$StrictFirewalledRequest.getParameter(StrictHttpFirewall.java:769) ~[spring-security-web-6.0.3.jar!/:6.0.3]\n                at jakarta.servlet.ServletRequestWrapper.getParameter(ServletRequestWrapper.java:149) ~[tomcat-embed-core-10.1.8.jar!/:na]\n                at jakarta.servlet.ServletRequestWrapper.getParameter(ServletRequestWrapper.java:149) ~[tomcat-embed-core-10.1.8.jar!/:na]\n                at org.springframework.security.oauth2.client.web.DefaultOAuth2AuthorizedClientManager$DefaultContextAttributesMapper.apply(DefaultOAuth2AuthorizedClientManager.java:298) ~[spring-security-oauth2-client-6.0.3.jar!/:6.0.3]\n                at org.springframework.security.oauth2.client.web.DefaultOAuth2AuthorizedClientManager$DefaultContextAttributesMapper.apply(DefaultOAuth2AuthorizedClientManager.java:291) ~[spring-security-oauth2-client-6.0.3.jar!/:6.0.3]\n                at org.springframework.security.oauth2.client.web.DefaultOAuth2AuthorizedClientManager.lambda$authorize$2(DefaultOAuth2AuthorizedClientManager.java:168) ~[spring-security-oauth2-client-6.0.3.jar!/:6.0.3]\n                at org.springframework.security.oauth2.client.OAuth2AuthorizationContext$Builder.attributes(OAuth2AuthorizationContext.java:185) ~[spring-security-oauth2-client-6.0.3.jar!/:6.0.3]\n                at org.springframework.security.oauth2.client.web.DefaultOAuth2AuthorizedClientManager.authorize(DefaultOAuth2AuthorizedClientManager.java:167) ~[spring-security-oauth2-client-6.0.3.jar!/:6.0.3]\n                at org.springframework.security.oauth2.client.web.reactive.function.client.ServletOAuth2AuthorizedClientExchangeFilterFunction.lambda$authorizeClient$22(ServletOAuth2AuthorizedClientExchangeFilterFunction.java:485) ~[spring-security-oauth2-client-6.0.3.jar!/:6.0.3]\n                at reactor.core.publisher.MonoSupplier.call(MonoSupplier.java:67) ~[reactor-core-3.5.5.jar!/:3.5.5]\n                at reactor.core.publisher.FluxSubscribeOnCallable$CallableSubscribeOnSubscription.run(FluxSubscribeOnCallable.java:227) ~[reactor-core-3.5.5.jar!/:3.5.5]\n                at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:68) ~[reactor-core-3.5.5.jar!/:3.5.5]\n                at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:28) ~[reactor-core-3.5.5.jar!/:3.5.5]\n                at java.base/java.util.concurrent.FutureTask.run(Unknown Source) ~[na:na]\n                at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(Unknown Source) ~[na:na]\n                at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) ~[na:na]\n                at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) ~[na:na]\n                at java.base/java.lang.Thread.run(Unknown Source) ~[na:na]\n</code></pre>\n<p>I suspect some kind of race condition between the GraphQL query being sent and the HTTP request being cleaned up. But I can't figure out how to prevent the HTTP request from being recycled.</p>\n<p>I compared my code to this Webinar on YouTube: <a href=\"https://www.youtube.com/watch?v=7Mr_pQc_rxA\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=7Mr_pQc_rxA</a> and its corresponding code base here: <a href=\"https://github.com/eriklumme/reactive-vaadin-demo\" rel=\"nofollow noreferrer\">https://github.com/eriklumme/reactive-vaadin-demo</a>. It is a little bit older, but seems to be basically identical (sans the OAuth2 authentication and usage of GraphQL, but which is based on reactive Monos).</p>\n<p>I have aslo tried a GraphQlService that does not rely on HTTP requests, which works for this error, but prevents the automatic renewal of OAuth2 access tokens:</p>\n<pre><code>@Service\npublic class NoHttpRequestGraphQlService {\n    private final HttpGraphQlClient client;\n\n    public NoHttpRequestGraphQlService(final WebClient.Builder webClientBuilder,\n        final ClientRegistrationRepository clientRegistrationRepository,\n        final OAuth2AuthorizedClientService oAuth2AuthorizedClientService,\n        final @Value(&quot;${graphql.baseUrl}&quot;) String baseUrl) {\n        final var authorizedClientManager = new AuthorizedClientServiceOAuth2AuthorizedClientManager(clientRegistrationRepository, oAuth2AuthorizedClientService);\n        final var oauth2Client = new ServletOAuth2AuthorizedClientExchangeFilterFunction(authorizedClientManager);\n        final var authorizationFailureHandler = new RemoveAuthorizedClientOAuth2AuthorizationFailureHandler(\n                (clientRegistrationId, principal, attributes) -&gt; oAuth2AuthorizedClientService.removeAuthorizedClient(clientRegistrationId, principal.getName()));\n        authorizedClientManager.setAuthorizationFailureHandler(authorizationFailureHandler);\n        oauth2Client.setAuthorizationFailureHandler(authorizationFailureHandler);\n        webClientBuilder.apply(oauth2Client.oauth2Configuration())\n            .defaultRequest(request -&gt; request.attributes(clientRegistrationId(&quot;custom&quot;)));\n        client = HttpGraphQlClient.builder(webClientBuilder.build()).url(baseUrl).build();\n    }\n\n    @NotNull\n    public &lt;T&gt; Mono&lt;List&lt;T&gt;&gt; queryList(final String query, final String jsonPath, final Class&lt;T&gt; typeRef) {\n        log.debug(&quot;Running GraphQL list query for allNews, expecting News objects&quot;);\n        return client.document(query).variables(arguments).retrieve(jsonPath).toEntityList(typeRef);\n    }\n}\n</code></pre>\n<p>I would prefer the HTTP request based version (as that is the actual environment where this code runs), but I would settle for the access token renewal working with my workaround.</p>\n<p>EDIT: After looking into this further, I believe the OAuth2 authorization process is requesting the OAuth2 scope parameter from a stale request. I replaced the default implementation <code>DefaultOAuth2AuthorizedClientManager.DefaultContextAttributesMapper</code> with an empty one (as we are not using scopes at the moment). There seem to be no further calls to the stored request, so this might work for us. I'll investigate further and/or improve the 'dirty hack' solution I have now. Due to the long weekend here I'll only be back on monday.</p>\n"},{"tags":["java","variables"],"comments":[{"owner":{"account_id":3046327,"reputation":10175,"user_id":2581872,"accept_rate":90,"display_name":"hichris123"},"score":1,"creation_date":1386640233,"post_id":20484542,"comment_id":30615320,"body_markdown":"What language is this?","body":"What language is this?"},{"owner":{"account_id":3677426,"reputation":31,"user_id":3063201,"accept_rate":20,"display_name":"user3063201"},"score":0,"creation_date":1386640636,"post_id":20484542,"comment_id":30615428,"body_markdown":"java, sorry for not mentioning","body":"java, sorry for not mentioning"}],"answers":[{"tags":[],"owner":{"account_id":3077175,"reputation":1125,"user_id":2606227,"accept_rate":33,"display_name":"Shamnad P S"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1386640690,"creation_date":1386640690,"answer_id":20484609,"question_id":20484542,"body_markdown":"Try this,\r\n\r\n    if (x == (int)x)\r\n    {\r\n       // Number is integer\r\n    }","title":"Exception for the variable type user input","body":"<p>Try this,</p>\n\n<pre><code>if (x == (int)x)\n{\n   // Number is integer\n}\n</code></pre>\n"}],"owner":{"account_id":3677426,"reputation":31,"user_id":3063201,"accept_rate":20,"display_name":"user3063201"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1684338555,"creation_date":1386640176,"question_id":20484542,"body_markdown":"I&#39;ve got an if statement which accepts integers and i want to use an exception for when the input is anything but an integer value, so basically the users can&#39;t enter text when it requires a number. Does anyone know how to do this, would be appreciated! :D I know how to do the exception, just not for checking the variable type\r\nJAVA!","title":"Exception for the variable type user input","body":"<p>I've got an if statement which accepts integers and i want to use an exception for when the input is anything but an integer value, so basically the users can't enter text when it requires a number. Does anyone know how to do this, would be appreciated! :D I know how to do the exception, just not for checking the variable type\nJAVA!</p>\n"},{"tags":["java","pdf","itext","pdf-generation","digital-signature"],"comments":[{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1684337878,"post_id":76273283,"comment_id":134504556,"body_markdown":"Please clarify which kinds of signature you want to remove. First of all it looks like you want to remove _digital signatures_, not simple electronic ones consisting just of e.g. an image of an ink signature. But there are different kinds of digital signatures, some kinds are specified as _interoperable signatures_ in the PDF specification but the spec also allows for other, custom kinds. Thus, which do you want to remove?","body":"Please clarify which kinds of signature you want to remove. First of all it looks like you want to remove <i>digital signatures</i>, not simple electronic ones consisting just of e.g. an image of an ink signature. But there are different kinds of digital signatures, some kinds are specified as <i>interoperable signatures</i> in the PDF specification but the spec also allows for other, custom kinds. Thus, which do you want to remove?"},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1684338251,"post_id":76273283,"comment_id":134504649,"body_markdown":"That being asked, please be aware that the **Type** *Sig* and the **Type** *Annot* are optional. Furthermore, **FT** *Sig* and **Subtype** *Widget* only are in the same dictionary if field dictionary and widget dictionary are merged - they indeed often are merged but not always. And _usage rights_ signatures are not necessarily indirect objects, so you won&#39;t necessarily find them directly by walking the cross references.","body":"That being asked, please be aware that the <b>Type</b> <i>Sig</i> and the <b>Type</b> <i>Annot</i> are optional. Furthermore, <b>FT</b> <i>Sig</i> and <b>Subtype</b> <i>Widget</i> only are in the same dictionary if field dictionary and widget dictionary are merged - they indeed often are merged but not always. And <i>usage rights</i> signatures are not necessarily indirect objects, so you won&#39;t necessarily find them directly by walking the cross references."},{"owner":{"account_id":21006524,"reputation":1,"user_id":21450831,"display_name":"guilhermeGabrielGorges"},"score":0,"creation_date":1684342722,"post_id":76273283,"comment_id":134505673,"body_markdown":"Any digital signature, i work with a large pdfs flow in my app, i need to remove all signatures before the user upload the pdf file in my app, because when he sign on my app, can have signature conflicts. This conflict will appears when i will create a new hash, above older broken signature, so i remove all the signatures before upload on my app. The second implementation will compose the remove signature method, with the first implementation. Only the first implementation   works well, but not for all cases.","body":"Any digital signature, i work with a large pdfs flow in my app, i need to remove all signatures before the user upload the pdf file in my app, because when he sign on my app, can have signature conflicts. This conflict will appears when i will create a new hash, above older broken signature, so i remove all the signatures before upload on my app. The second implementation will compose the remove signature method, with the first implementation. Only the first implementation   works well, but not for all cases."},{"owner":{"account_id":21006524,"reputation":1,"user_id":21450831,"display_name":"guilhermeGabrielGorges"},"score":0,"creation_date":1684342739,"post_id":76273283,"comment_id":134505676,"body_markdown":"Do you know if exists more than this two dictionary patterns for signatures?","body":"Do you know if exists more than this two dictionary patterns for signatures?"},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1684403739,"post_id":76273283,"comment_id":134514083,"body_markdown":"If you create an app for pdf signing, you surely have read the relevant sections of the pdf specification, haven&#39;t you? That should make clear all about interoperable signature structures... *&quot;because when he sign on my app, can have signature conflicts.&quot;* - this sounds like you either forgot to apply changes as incremental updates or you apply changes that aren&#39;t allowed to signed documents. Or you attempt to sign pdfs a previous signer did not intend to signed by others.","body":"If you create an app for pdf signing, you surely have read the relevant sections of the pdf specification, haven&#39;t you? That should make clear all about interoperable signature structures... <i>&quot;because when he sign on my app, can have signature conflicts.&quot;</i> - this sounds like you either forgot to apply changes as incremental updates or you apply changes that aren&#39;t allowed to signed documents. Or you attempt to sign pdfs a previous signer did not intend to signed by others."},{"owner":{"account_id":21006524,"reputation":1,"user_id":21450831,"display_name":"guilhermeGabrielGorges"},"score":0,"creation_date":1684428530,"post_id":76273283,"comment_id":134519494,"body_markdown":"Regardless of everything you said, my goal is to remove all signatures from the document. My question is if my methods are meeting my objective?","body":"Regardless of everything you said, my goal is to remove all signatures from the document. My question is if my methods are meeting my objective?"},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1684449015,"post_id":76273283,"comment_id":134523302,"body_markdown":"*&quot;Regardless of everything you said, my goal is to remove all signatures from the document. My question is if my methods are meeting my objective?&quot;* - No, obviously not. How should your code recognize simple electronic signatures like images of ink signatures? And your methods don&#39;t even find all interoperative digital signatures, see my remarks on optional entries above.","body":"<i>&quot;Regardless of everything you said, my goal is to remove all signatures from the document. My question is if my methods are meeting my objective?&quot;</i> - No, obviously not. How should your code recognize simple electronic signatures like images of ink signatures? And your methods don&#39;t even find all interoperative digital signatures, see my remarks on optional entries above."},{"owner":{"account_id":21006524,"reputation":1,"user_id":21450831,"display_name":"guilhermeGabrielGorges"},"score":0,"creation_date":1684518385,"post_id":76273283,"comment_id":134534138,"body_markdown":"But the first method can remove several tipes of signatures, the second can remove unusal signatures, it have works for me. \nHave you ever worked with PDF on a large scale or just read the documentation or ISO? Can you tell me where I can find these patterns? Do you have any publications or could you help me with this?","body":"But the first method can remove several tipes of signatures, the second can remove unusal signatures, it have works for me.  Have you ever worked with PDF on a large scale or just read the documentation or ISO? Can you tell me where I can find these patterns? Do you have any publications or could you help me with this?"}],"owner":{"account_id":21006524,"reputation":1,"user_id":21450831,"display_name":"guilhermeGabrielGorges"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":196,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684338442,"creation_date":1684334142,"question_id":76273283,"body_markdown":"I have find problems when i tried to remove signatures from PDF&#39;s With Itext 5.1. \r\n\r\nThis is my Method:\r\n\r\n```\r\nPdfStamper stamper = new PdfStamper(reader, os);\r\nAcroFields acroFields = reader.getAcroFields();\r\nfor (String name : acroFields.getSignatureNames()) {\r\n    acroFields.removeField(name);\r\n}\r\nstamper.close();\r\noutput = os.toByteArray();\r\n```\r\n\r\nThis method works, but not for all PDFs, some PDFs does not find the signatures with this.\r\n\r\nThen i found objects on the PDF that flaged SIG, so i created a new method to complement the signature cleanup method:\r\n\r\n```\r\nprivate void removeSignatureObjects(PdfReader reader) {\r\n    for (int i = 1; i &lt;= reader.getXrefSize(); i++) {\r\n        PdfObject object = reader.getPdfObject(i);\r\n        if (object != null) {\r\n            if (object.isDictionary()) {\r\n                PdfDictionary dict = (PdfDictionary) object;\r\n                if (validateObjectSign(dict)) {\r\n                    dict.clear();\r\n                    reader.resetReleasePage();\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nprivate boolean validateObjectSign(PdfDictionary dict) {\r\n    return PdfName.SIG.equals(dict.get(PdfName.TYPE))\r\n            ||\r\n            (PdfName.ANNOT.equals(dict.get(PdfName.TYPE)) &amp;&amp; PdfName.WIDGET.equals(dict.get(PdfName.SUBTYPE)) &amp;&amp;\r\n            PdfName.SIG.equals(dict.getAsName(PdfName.FT)));\r\n}\r\n```\r\n\r\nIt works from objects i&#39;ve tested it, but now i don&#39;t know if this covers all the pdf signature objects. \r\n\r\nI need help to knowing, what is the pattern of signature objects in PDFs?\r\n","title":"Remove Signatures From PDF File In Java With Itext","body":"<p>I have find problems when i tried to remove signatures from PDF's With Itext 5.1.</p>\n<p>This is my Method:</p>\n<pre><code>PdfStamper stamper = new PdfStamper(reader, os);\nAcroFields acroFields = reader.getAcroFields();\nfor (String name : acroFields.getSignatureNames()) {\n    acroFields.removeField(name);\n}\nstamper.close();\noutput = os.toByteArray();\n</code></pre>\n<p>This method works, but not for all PDFs, some PDFs does not find the signatures with this.</p>\n<p>Then i found objects on the PDF that flaged SIG, so i created a new method to complement the signature cleanup method:</p>\n<pre><code>private void removeSignatureObjects(PdfReader reader) {\n    for (int i = 1; i &lt;= reader.getXrefSize(); i++) {\n        PdfObject object = reader.getPdfObject(i);\n        if (object != null) {\n            if (object.isDictionary()) {\n                PdfDictionary dict = (PdfDictionary) object;\n                if (validateObjectSign(dict)) {\n                    dict.clear();\n                    reader.resetReleasePage();\n                }\n            }\n        }\n    }\n}\n\nprivate boolean validateObjectSign(PdfDictionary dict) {\n    return PdfName.SIG.equals(dict.get(PdfName.TYPE))\n            ||\n            (PdfName.ANNOT.equals(dict.get(PdfName.TYPE)) &amp;&amp; PdfName.WIDGET.equals(dict.get(PdfName.SUBTYPE)) &amp;&amp;\n            PdfName.SIG.equals(dict.getAsName(PdfName.FT)));\n}\n</code></pre>\n<p>It works from objects i've tested it, but now i don't know if this covers all the pdf signature objects.</p>\n<p>I need help to knowing, what is the pattern of signature objects in PDFs?</p>\n"},{"tags":["java","variables"],"comments":[{"owner":{"account_id":13566,"reputation":48845,"user_id":27358,"accept_rate":76,"display_name":"David Moles"},"score":0,"creation_date":1399482973,"post_id":23523539,"comment_id":36084081,"body_markdown":"The compiler doesn&#39;t know that your if statement covers all possible cases. If you remove the `if(x&gt;=0.67)` it should do the same thing and will compile.","body":"The compiler doesn&#39;t know that your if statement covers all possible cases. If you remove the <code>if(x&gt;=0.67)</code> it should do the same thing and will compile."}],"answers":[{"comments":[{"owner":{"account_id":58087,"reputation":8316,"user_id":173964,"accept_rate":67,"display_name":"AndrewS"},"score":0,"creation_date":1399483347,"post_id":23523708,"comment_id":36084303,"body_markdown":"Note that if you get to the first else, then x MUST BE &gt; 0.33, so you don&#39;t need that condition. The chain can be &quot;if x&lt;.33 else if x&lt;.67 else&quot;. Alternately, you can initialize y to 3 and skip the second else clause. Alternately, you can use two ternaries in the initialization.","body":"Note that if you get to the first else, then x MUST BE &gt; 0.33, so you don&#39;t need that condition. The chain can be &quot;if x&lt;.33 else if x&lt;.67 else&quot;. Alternately, you can initialize y to 3 and skip the second else clause. Alternately, you can use two ternaries in the initialization."},{"owner":{"account_id":4437706,"reputation":1,"user_id":3613093,"display_name":"Roasted Legend"},"score":0,"creation_date":1399551765,"post_id":23523708,"comment_id":36116468,"body_markdown":"I actually figured it out at school! i just initialised y where i declared it. Like this &#39;int y = 0&#39;! Thanks for ur help!!","body":"I actually figured it out at school! i just initialised y where i declared it. Like this &#39;int y = 0&#39;! Thanks for ur help!!"}],"tags":[],"owner":{"account_id":2141010,"reputation":118249,"user_id":1899640,"display_name":"that other guy"},"comment_count":2,"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1399481753,"creation_date":1399481401,"answer_id":23523708,"question_id":23523539,"body_markdown":"`javac` is not smart enough to realize that the way your conditions are constructed, one of them will always be true.\r\n\r\nYou can rewrite your if-statements to make `javac` realize one branch will always be triggered:\r\n\r\n    int y;\r\n    if(x&lt;=0.33)\r\n    {\r\n        y=1;\r\n    }\r\n    else if(x&gt;0.33 &amp;&amp; x&lt;0.67)\r\n    {\r\n        y=2;\r\n    }\r\n    else // This only triggers when x &gt;= 0.67, so no need to check\r\n    {\r\n        y=3;\r\n    }\r\n\r\nNow `javac` sees that if the first two don&#39;t trigger, the last will, so `y` will always have a value.\r\n\r\nYou can alternatively add an `else` branch with an error, in case someone breaks the conditions:\r\n\r\n    int y;\r\n    if(x&lt;=0.33)\r\n    {\r\n        y=1;\r\n    }\r\n    else if(x&gt;0.33 &amp;&amp; x&lt;0.67)\r\n    {\r\n        y=2;\r\n    }\r\n    else if(x &gt;= 0.67)\r\n    {\r\n        y=3;\r\n    }\r\n    else \r\n    {\r\n        // This should never happen\r\n        throw new IllegalArgumentException(&quot;Something&#39;s gone terribly wrong for &quot; + x);\r\n    }\r\n\r\nThis also compiles, and if someone later decides to skew the numbers and turns the first condition into `x &lt;= 0.2` but forgets to update the other condition, you&#39;ll get an exception at runtime.","title":"Variable y might not have been initialised in the if&#39;s in the loop","body":"<p><code>javac</code> is not smart enough to realize that the way your conditions are constructed, one of them will always be true.</p>\n\n<p>You can rewrite your if-statements to make <code>javac</code> realize one branch will always be triggered:</p>\n\n<pre><code>int y;\nif(x&lt;=0.33)\n{\n    y=1;\n}\nelse if(x&gt;0.33 &amp;&amp; x&lt;0.67)\n{\n    y=2;\n}\nelse // This only triggers when x &gt;= 0.67, so no need to check\n{\n    y=3;\n}\n</code></pre>\n\n<p>Now <code>javac</code> sees that if the first two don't trigger, the last will, so <code>y</code> will always have a value.</p>\n\n<p>You can alternatively add an <code>else</code> branch with an error, in case someone breaks the conditions:</p>\n\n<pre><code>int y;\nif(x&lt;=0.33)\n{\n    y=1;\n}\nelse if(x&gt;0.33 &amp;&amp; x&lt;0.67)\n{\n    y=2;\n}\nelse if(x &gt;= 0.67)\n{\n    y=3;\n}\nelse \n{\n    // This should never happen\n    throw new IllegalArgumentException(\"Something's gone terribly wrong for \" + x);\n}\n</code></pre>\n\n<p>This also compiles, and if someone later decides to skew the numbers and turns the first condition into <code>x &lt;= 0.2</code> but forgets to update the other condition, you'll get an exception at runtime.</p>\n"}],"owner":{"account_id":4437706,"reputation":1,"user_id":3613093,"display_name":"Roasted Legend"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"accepted_answer_id":23523708,"answer_count":1,"score":-3,"last_activity_date":1684338297,"creation_date":1399480857,"question_id":23523539,"body_markdown":"    import java.util.Scanner;\r\n    public class RPS\r\n    {\r\n    public void show()\r\n    {\r\n        int i;\r\n        System.out.println(&quot;1 - Rock          2 - Paper        3 - Scissor&quot;);\r\n        Scanner in = new Scanner(System.in);\r\n        i = in.nextInt();\r\n        double x = Math.random();\r\n        int y;\r\n        if(x&lt;=0.33)\r\n        {\r\n            y=1;\r\n        }\r\n        else if(x&gt;0.33 &amp;&amp; x&lt;0.67)\r\n        {\r\n            y=2;\r\n        }\r\n        else if(x&gt;=0.67)\r\n        {\r\n            y=3;\r\n        }\r\n        for(;;)    \r\n        {\r\n            if(i==y)\r\n            System.out.println(&quot;It&#39;s a draw!&quot;);\r\n            else if(i==1 &amp;&amp; y==2)\r\n            System.out.println(&quot;Computer wins!&quot;);\r\n            else if(i==1 &amp;&amp; y==3)\r\n            System.out.println(&quot;You win!&quot;);\r\n            else if(i==2 &amp;&amp; y==1)\r\n            System.out.println(&quot;You win!&quot;);\r\n            else if(i==2 &amp;&amp; y==3)\r\n            System.out.println(&quot;Computer wins!&quot;);\r\n            else if(i==3 &amp;&amp; y==1)\r\n            System.out.println(&quot;Computer wins!&quot;);\r\n            else if(i==3 &amp;&amp; y==2)\r\n            System.out.println(&quot;You win!&quot;);\r\n            else\r\n            System.out.println(&quot;Error!&quot;);\r\n        }\r\n        }\r\n     }\r\nWhats wrong?\r\nIt gives an error that variable y might not have been intialised in the if&#39;s in the for loop.\r\nI have assigned a value to y in the previous if-else section.\r\nso why isnt it getting intialised?","title":"Variable y might not have been initialised in the if&#39;s in the loop","body":"<pre><code>import java.util.Scanner;\npublic class RPS\n{\npublic void show()\n{\n    int i;\n    System.out.println(\"1 - Rock          2 - Paper        3 - Scissor\");\n    Scanner in = new Scanner(System.in);\n    i = in.nextInt();\n    double x = Math.random();\n    int y;\n    if(x&lt;=0.33)\n    {\n        y=1;\n    }\n    else if(x&gt;0.33 &amp;&amp; x&lt;0.67)\n    {\n        y=2;\n    }\n    else if(x&gt;=0.67)\n    {\n        y=3;\n    }\n    for(;;)    \n    {\n        if(i==y)\n        System.out.println(\"It's a draw!\");\n        else if(i==1 &amp;&amp; y==2)\n        System.out.println(\"Computer wins!\");\n        else if(i==1 &amp;&amp; y==3)\n        System.out.println(\"You win!\");\n        else if(i==2 &amp;&amp; y==1)\n        System.out.println(\"You win!\");\n        else if(i==2 &amp;&amp; y==3)\n        System.out.println(\"Computer wins!\");\n        else if(i==3 &amp;&amp; y==1)\n        System.out.println(\"Computer wins!\");\n        else if(i==3 &amp;&amp; y==2)\n        System.out.println(\"You win!\");\n        else\n        System.out.println(\"Error!\");\n    }\n    }\n }\n</code></pre>\n\n<p>Whats wrong?\nIt gives an error that variable y might not have been intialised in the if's in the for loop.\nI have assigned a value to y in the previous if-else section.\nso why isnt it getting intialised?</p>\n"},{"tags":["java","inheritance","abstract-class"],"answers":[{"tags":[],"owner":{"account_id":404649,"reputation":57192,"user_id":773113,"accept_rate":72,"display_name":"Mike Nakis"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1684338090,"creation_date":1684338090,"answer_id":76273886,"question_id":76273822,"body_markdown":"It is okay for `B.someFunction()` to return a class more derived than `A.someFunction()`. It is still the same method, and the override works.\r\n\r\nHowever, it is not okay for `B.someFunction()` to ***accept a parameter*** of a class more derived than `A.someFunction()`.  When you try to do that, the override breaks.\r\n\r\nThink of it this way: someone may have a reference to an `A` which is in fact an instance of `B`.  They may invoke it passing it an actual `A`. However, `B.someFunction()` expects an instance of `B`, and it will try to invoke methods of `B` which do not exist in the `A` that was passed. That would not work.","title":"Abstract method is not considered implemented when using Child class as return types","body":"<p>It is okay for <code>B.someFunction()</code> to return a class more derived than <code>A.someFunction()</code>. It is still the same method, and the override works.</p>\n<p>However, it is not okay for <code>B.someFunction()</code> to <em><strong>accept a parameter</strong></em> of a class more derived than <code>A.someFunction()</code>.  When you try to do that, the override breaks.</p>\n<p>Think of it this way: someone may have a reference to an <code>A</code> which is in fact an instance of <code>B</code>.  They may invoke it passing it an actual <code>A</code>. However, <code>B.someFunction()</code> expects an instance of <code>B</code>, and it will try to invoke methods of <code>B</code> which do not exist in the <code>A</code> that was passed. That would not work.</p>\n"}],"owner":{"account_id":14838274,"reputation":347,"user_id":10715700,"display_name":"BBloggsbott"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":76273886,"answer_count":1,"score":2,"last_activity_date":1684338090,"creation_date":1684337720,"question_id":76273822,"body_markdown":"I have the classes\r\n```java\r\nabstract class A&lt;T&gt; {\r\n\r\n    public abstract A&lt;T&gt; someFunction(A&lt;?&gt; obj);\r\n}\r\n\r\npublic class B extends A&lt;Integer&gt;{\r\n\r\n    public B someFunction(B obj){...}\r\n}\r\n```\r\n\r\nI get an error that says `Class B must be declared abstract or must implement the abstract method someFunction(A&lt;?&gt; obj) in A`. My return type and parameter type are children of A. I don&#39;t understand why I am still getting this error.\r\n\r\n[This](https://stackoverflow.com/questions/40072186/how-to-use-abstract-class-child-type-as-the-type-of-an-abstract-methods-parame) is one solution I see where I can change `A` to something like `A&lt;T, ChildName&gt;` and use `ChildName` as the abstract function&#39;s parameter type. Is there a different way of doing this?","title":"Abstract method is not considered implemented when using Child class as return types","body":"<p>I have the classes</p>\n<pre class=\"lang-java prettyprint-override\"><code>abstract class A&lt;T&gt; {\n\n    public abstract A&lt;T&gt; someFunction(A&lt;?&gt; obj);\n}\n\npublic class B extends A&lt;Integer&gt;{\n\n    public B someFunction(B obj){...}\n}\n</code></pre>\n<p>I get an error that says <code>Class B must be declared abstract or must implement the abstract method someFunction(A&lt;?&gt; obj) in A</code>. My return type and parameter type are children of A. I don't understand why I am still getting this error.</p>\n<p><a href=\"https://stackoverflow.com/questions/40072186/how-to-use-abstract-class-child-type-as-the-type-of-an-abstract-methods-parame\">This</a> is one solution I see where I can change <code>A</code> to something like <code>A&lt;T, ChildName&gt;</code> and use <code>ChildName</code> as the abstract function's parameter type. Is there a different way of doing this?</p>\n"},{"tags":["java","rx-java2"],"comments":[{"owner":{"account_id":24127,"reputation":69392,"user_id":61158,"accept_rate":98,"display_name":"akarnokd"},"score":0,"creation_date":1531833876,"post_id":51382154,"comment_id":89736899,"body_markdown":"Not sure what you try to achieve here. Do you want a keep-alive like event which is merged into the main flow? Do you want to execute an action after the source didn&#39;t produce an item without cancelling the source?","body":"Not sure what you try to achieve here. Do you want a keep-alive like event which is merged into the main flow? Do you want to execute an action after the source didn&#39;t produce an item without cancelling the source?"},{"owner":{"account_id":4376692,"reputation":5272,"user_id":3569545,"display_name":"Demigod"},"score":0,"creation_date":1531834159,"post_id":51382154,"comment_id":89737124,"body_markdown":"@akarnokd, the main criteria is described in the question. I don&#39;t care about the source, and I don&#39;t want to keep anything alive.","body":"@akarnokd, the main criteria is described in the question. I don&#39;t care about the source, and I don&#39;t want to keep anything alive."},{"owner":{"account_id":24127,"reputation":69392,"user_id":61158,"accept_rate":98,"display_name":"akarnokd"},"score":0,"creation_date":1531834871,"post_id":51382154,"comment_id":89737652,"body_markdown":"Sounds like you need [`Observable.ambArray()`](http://reactivex.io/RxJava/2.x/javadoc/io/reactivex/Observable.html#ambArray-io.reactivex.ObservableSource...-).","body":"Sounds like you need <a href=\"http://reactivex.io/RxJava/2.x/javadoc/io/reactivex/Observable.html#ambArray-io.reactivex.ObservableSource...-\" rel=\"nofollow noreferrer\"><code>Observable.ambArray()</code></a>."},{"owner":{"account_id":4376692,"reputation":5272,"user_id":3569545,"display_name":"Demigod"},"score":0,"creation_date":1531838761,"post_id":51382154,"comment_id":89740599,"body_markdown":"@akarnokd, looks like it will fit, thanks","body":"@akarnokd, looks like it will fit, thanks"}],"answers":[{"tags":[],"owner":{"account_id":4376692,"reputation":5272,"user_id":3569545,"display_name":"Demigod"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1684338063,"creation_date":1684338063,"answer_id":76273880,"question_id":51382154,"body_markdown":"I ended up using [Observable.ambArray()][1]. \r\n\r\n\r\nThanks to the @akarnokd comment\r\n\r\n  [1]: http://reactivex.io/RxJava/2.x/javadoc/io/reactivex/Observable.html#ambArray-io.reactivex.ObservableSource...-","title":"RX2. How to react on nothing emitted after x seconds?","body":"<p>I ended up using <a href=\"http://reactivex.io/RxJava/2.x/javadoc/io/reactivex/Observable.html#ambArray-io.reactivex.ObservableSource...-\" rel=\"nofollow noreferrer\">Observable.ambArray()</a>.</p>\n<p>Thanks to the @akarnokd comment</p>\n"}],"owner":{"account_id":4376692,"reputation":5272,"user_id":3569545,"display_name":"Demigod"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76273880,"answer_count":1,"score":0,"last_activity_date":1684338063,"creation_date":1531832691,"question_id":51382154,"body_markdown":"Despite that my question seems very common I haven&#39;t found any *nice* solution to this. The situation, of course, is solvable, but I want to solve it in more RX way, if you know what I mean.\r\n\r\n**The situation**\r\n\r\nI have an `Observable` that emits some events. What I want is to subscribe for next upcoming event, and do something, **if** there will be no events emitted for 1 second. So, if something is emitted - call method `doSomething()`. If nothing was emitted during 1 second, call method `doSomething()`.\r\n\r\n**Possible solution**\r\n\r\nOne of the possible solutions is to create `Completable.timer(1000)`, subscribe for both, and wait for first to emit / complete. Something like `Observable.combineLatest` except I don&#39;t have to wait both, but just first event to arrive. But I haven&#39;t found such functionality in RX2 also.\r\n\r\n**Please advice**\r\n\r\nPlease advice solution for both situations, if possible, is there a way to set a waiting delay for next emitted item, or to pick first emitted from several observables?\r\n\r\nThanks!","title":"RX2. How to react on nothing emitted after x seconds?","body":"<p>Despite that my question seems very common I haven't found any <em>nice</em> solution to this. The situation, of course, is solvable, but I want to solve it in more RX way, if you know what I mean.</p>\n\n<p><strong>The situation</strong></p>\n\n<p>I have an <code>Observable</code> that emits some events. What I want is to subscribe for next upcoming event, and do something, <strong>if</strong> there will be no events emitted for 1 second. So, if something is emitted - call method <code>doSomething()</code>. If nothing was emitted during 1 second, call method <code>doSomething()</code>.</p>\n\n<p><strong>Possible solution</strong></p>\n\n<p>One of the possible solutions is to create <code>Completable.timer(1000)</code>, subscribe for both, and wait for first to emit / complete. Something like <code>Observable.combineLatest</code> except I don't have to wait both, but just first event to arrive. But I haven't found such functionality in RX2 also.</p>\n\n<p><strong>Please advice</strong></p>\n\n<p>Please advice solution for both situations, if possible, is there a way to set a waiting delay for next emitted item, or to pick first emitted from several observables?</p>\n\n<p>Thanks!</p>\n"},{"tags":["java","swagger","jax-rs","openapi"],"answers":[{"tags":[],"owner":{"account_id":318652,"reputation":13503,"user_id":635982,"accept_rate":58,"display_name":"stickfigure"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684338043,"creation_date":1684338043,"answer_id":76273877,"question_id":76266845,"body_markdown":"This seems like a mediocre solution to what seems like a common problem, but it does work. Enable this `filterClass` in the swagger config:\r\n\r\n```\r\npackage com.example;\r\n\r\nimport io.swagger.v3.core.filter.AbstractSpecFilter;\r\nimport io.swagger.v3.oas.models.OpenAPI;\r\nimport io.swagger.v3.oas.models.PathItem;\r\nimport io.swagger.v3.oas.models.Paths;\r\n\r\nimport java.util.List;\r\nimport java.util.Map;\r\nimport java.util.Map.Entry;\r\nimport java.util.Optional;\r\n\r\npublic class PathSpecFilter extends AbstractSpecFilter {\r\n\tprivate static final String PUBLIC_PATH = &quot;/thePublicApiPrefix&quot;;\r\n\r\n\t@Override\r\n\tpublic Optional&lt;OpenAPI&gt; filterOpenAPI(final OpenAPI openAPI, final Map&lt;String, List&lt;String&gt;&gt; params, final Map&lt;String, String&gt; cookies, final Map&lt;String, List&lt;String&gt;&gt; headers) {\r\n\t\tfinal Optional&lt;OpenAPI&gt; opt = super.filterOpenAPI(openAPI, params, cookies, headers);\r\n\t\treturn opt.map(openapi -&gt; {\r\n\t\t\topenapi.setPaths(fix(openapi.getPaths()));\r\n\t\t\treturn openapi;\r\n\t\t});\r\n\t}\r\n\r\n\tprivate Paths fix(final Paths paths) {\r\n\t\tfinal Paths next = new Paths();\r\n\r\n\t\tfor (final Entry&lt;String, PathItem&gt; entry : paths.entrySet()) {\r\n\t\t\tfinal String key = entry.getKey().startsWith(PUBLIC_PATH)\r\n\t\t\t\t\t? entry.getKey().substring(PUBLIC_PATH.length())\r\n\t\t\t\t\t: entry.getKey();\r\n\t\t\tnext.put(key, entry.getValue());\r\n\t\t}\r\n\r\n\t\treturn next;\r\n\t}\r\n}\r\n```\r\n","title":"Can we remove or hide path elements from swagger documentation?","body":"<p>This seems like a mediocre solution to what seems like a common problem, but it does work. Enable this <code>filterClass</code> in the swagger config:</p>\n<pre><code>package com.example;\n\nimport io.swagger.v3.core.filter.AbstractSpecFilter;\nimport io.swagger.v3.oas.models.OpenAPI;\nimport io.swagger.v3.oas.models.PathItem;\nimport io.swagger.v3.oas.models.Paths;\n\nimport java.util.List;\nimport java.util.Map;\nimport java.util.Map.Entry;\nimport java.util.Optional;\n\npublic class PathSpecFilter extends AbstractSpecFilter {\n    private static final String PUBLIC_PATH = &quot;/thePublicApiPrefix&quot;;\n\n    @Override\n    public Optional&lt;OpenAPI&gt; filterOpenAPI(final OpenAPI openAPI, final Map&lt;String, List&lt;String&gt;&gt; params, final Map&lt;String, String&gt; cookies, final Map&lt;String, List&lt;String&gt;&gt; headers) {\n        final Optional&lt;OpenAPI&gt; opt = super.filterOpenAPI(openAPI, params, cookies, headers);\n        return opt.map(openapi -&gt; {\n            openapi.setPaths(fix(openapi.getPaths()));\n            return openapi;\n        });\n    }\n\n    private Paths fix(final Paths paths) {\n        final Paths next = new Paths();\n\n        for (final Entry&lt;String, PathItem&gt; entry : paths.entrySet()) {\n            final String key = entry.getKey().startsWith(PUBLIC_PATH)\n                    ? entry.getKey().substring(PUBLIC_PATH.length())\n                    : entry.getKey();\n            next.put(key, entry.getValue());\n        }\n\n        return next;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":318652,"reputation":13503,"user_id":635982,"accept_rate":58,"display_name":"stickfigure"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":220,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1684338043,"creation_date":1684268995,"question_id":76266845,"body_markdown":"My public API is served by my main web application but on a different domain. So that the paths don&#39;t conflict with my normal webapp paths, the public API endpoints have a hidden prefix. That is, when someone visits `https://api.example.com/foo` they are internally forwarded to `/publicApi/foo`; requests to `https://www.example.com/foo` are processed normally.\r\n\r\nOf course this means the JAX-RS classes for my API are all annotated like this:\r\n\r\n    @Path(&quot;/publicApi&quot;)\r\n    public class PublicApiFooResource {\r\n        @Path(&quot;/foo&quot;)\r\n        public Foo getFoo() {...}\r\n    }\r\n\r\nUsing `swagger-jaxrs2` (v2.2.7), this generates an openapi document that includes `/publicApi`:\r\n\r\n    paths: {\r\n        /publicApi/foo: {\r\n            get: { ... } etc\r\n\r\nHow can I get swagger-jaxrs2 to ignore the hidden leading part of the path? The path, from the world&#39;s perspective, is `/foo`; the internal forward shouldn&#39;t leak into the documentation.","title":"Can we remove or hide path elements from swagger documentation?","body":"<p>My public API is served by my main web application but on a different domain. So that the paths don't conflict with my normal webapp paths, the public API endpoints have a hidden prefix. That is, when someone visits <code>https://api.example.com/foo</code> they are internally forwarded to <code>/publicApi/foo</code>; requests to <code>https://www.example.com/foo</code> are processed normally.</p>\n<p>Of course this means the JAX-RS classes for my API are all annotated like this:</p>\n<pre><code>@Path(&quot;/publicApi&quot;)\npublic class PublicApiFooResource {\n    @Path(&quot;/foo&quot;)\n    public Foo getFoo() {...}\n}\n</code></pre>\n<p>Using <code>swagger-jaxrs2</code> (v2.2.7), this generates an openapi document that includes <code>/publicApi</code>:</p>\n<pre><code>paths: {\n    /publicApi/foo: {\n        get: { ... } etc\n</code></pre>\n<p>How can I get swagger-jaxrs2 to ignore the hidden leading part of the path? The path, from the world's perspective, is <code>/foo</code>; the internal forward shouldn't leak into the documentation.</p>\n"},{"tags":["java","class","oop","design-patterns","interface"],"comments":[{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":0,"creation_date":1684335664,"post_id":76273468,"comment_id":134503944,"body_markdown":"There&#39;s no generic answer to this. If it&#39;s a method only applicable to `DataAdapterImplF` then that&#39;s where it should live. If the `DataAdapter`s live in a list and you need to be able call it regardless of implementation then it should be in the interface, with the caveat that calling in on non-`DAIF`s will always be non-sensical--you could implement a default no-op, but this leads to cognitive overhead because it may not be obvious it&#39;s a no-op for everything except the `F`s.","body":"There&#39;s no generic answer to this. If it&#39;s a method only applicable to <code>DataAdapterImplF</code> then that&#39;s where it should live. If the <code>DataAdapter</code>s live in a list and you need to be able call it regardless of implementation then it should be in the interface, with the caveat that calling in on non-<code>DAIF</code>s will always be non-sensical--you could implement a default no-op, but this leads to cognitive overhead because it may not be obvious it&#39;s a no-op for everything except the <code>F</code>s."},{"owner":{"account_id":9735171,"reputation":2264,"user_id":7218656,"accept_rate":75,"display_name":"Arun Sudhakaran"},"score":0,"creation_date":1684339956,"post_id":76273468,"comment_id":134505068,"body_markdown":"My doubt is that how come the `DataAdapterImplF` is not declared abstract? If the arguments are your problem then you can better encapsulate them into a class and use its reference as the method argument. Inside each implementation you can decide which and all attributes to be used.","body":"My doubt is that how come the <code>DataAdapterImplF</code> is not declared abstract? If the arguments are your problem then you can better encapsulate them into a class and use its reference as the method argument. Inside each implementation you can decide which and all attributes to be used."}],"answers":[{"comments":[{"owner":{"account_id":1455702,"reputation":15684,"user_id":1371329,"accept_rate":64,"display_name":"jaco0646"},"score":0,"creation_date":1684445347,"post_id":76273842,"comment_id":134522785,"body_markdown":"[Why should Java 8&#39;s Optional not be used in arguments](https://stackoverflow.com/questions/31922866/why-should-java-8s-optional-not-be-used-in-arguments)","body":"<a href=\"https://stackoverflow.com/questions/31922866/why-should-java-8s-optional-not-be-used-in-arguments\">Why should Java 8&#39;s Optional not be used in arguments</a>"}],"tags":[],"owner":{"account_id":22341068,"reputation":692,"user_id":16560836,"display_name":"yezper"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684337842,"creation_date":1684337842,"answer_id":76273842,"question_id":76273468,"body_markdown":"So I think the problem lays in the question you have asked. Interfaces are a very explicit contract, and in your case the contract is: \r\n\r\n&quot;*You give me three integers and I can calculate you some solution which will also be an integer.*&quot;\r\n\r\nThus, it does not make sense to ask how one would adapt some operation that only takes two integers to this interface. Those are just different things. What you could do is redefine your contract and say:\r\n\r\n &quot;*You give me two integers a, b and a third optional integer c, and I can calculate you some solution which will also be an integer.*&quot;\r\n\r\nThis contract would then look like this:\r\n\r\n    public interface DataAdapter {\r\n    \r\n        int solve(int a, int b, Optional&lt;Integer&gt; c)\r\n    }\r\n\r\n","title":"Best practice on adding a new method in a class implementing an interface with less parameters required","body":"<p>So I think the problem lays in the question you have asked. Interfaces are a very explicit contract, and in your case the contract is:</p>\n<p>&quot;<em>You give me three integers and I can calculate you some solution which will also be an integer.</em>&quot;</p>\n<p>Thus, it does not make sense to ask how one would adapt some operation that only takes two integers to this interface. Those are just different things. What you could do is redefine your contract and say:</p>\n<p>&quot;<em>You give me two integers a, b and a third optional integer c, and I can calculate you some solution which will also be an integer.</em>&quot;</p>\n<p>This contract would then look like this:</p>\n<pre><code>public interface DataAdapter {\n\n    int solve(int a, int b, Optional&lt;Integer&gt; c)\n}\n</code></pre>\n"}],"owner":{"account_id":12000414,"reputation":27,"user_id":8780539,"display_name":"ASHOK KUMAR"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":100,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1684337842,"creation_date":1684335334,"question_id":76273468,"body_markdown":"```\r\npublic interface DataAdapter {\r\n\r\n    int solve(int a, int b, int c)\r\n}\r\n\r\n```\r\n\r\nNow i have multiple classes which implements this interface something like :\r\n\r\n```\r\npublic class DataAdapterImplA implements DataAdapter {\r\n\r\n    int solve(int a, int b, int c) {\r\n\r\n        return ...\r\n    }\r\n}\r\n\r\n```\r\n\r\n```\r\npublic class DataAdapterImplB implements DataAdapter {\r\n\r\n    int solve(int a, int b, int c) {\r\n\r\n        return ...\r\n    }\r\n}\r\n\r\n```\r\n\r\nand similarly multiple others ...\r\n\r\nNow i am adding one more implementing class but with one less parameter in the existing method signature ..something like below :\r\n\r\n```\r\npublic class DataAdapterImplF implements DataAdapter {\r\n\r\n    int solve(int a, int b) {\r\n\r\n        return ...\r\n    }\r\n}\r\n```\r\n\r\nSo , question here is how to go about this :\r\n\r\n 1. Should i override the existing `solve(int, int, int)` method only &amp; in my method body i can ignore this and won&#39;t use it at all ?\r\n\r\n 2. should i create a `default` method `solve(int, int)` in the interface &amp; override that in my new implementation class ?\r\n\r\n or any other better &amp; clean solution ?","title":"Best practice on adding a new method in a class implementing an interface with less parameters required","body":"<pre><code>public interface DataAdapter {\n\n    int solve(int a, int b, int c)\n}\n\n</code></pre>\n<p>Now i have multiple classes which implements this interface something like :</p>\n<pre><code>public class DataAdapterImplA implements DataAdapter {\n\n    int solve(int a, int b, int c) {\n\n        return ...\n    }\n}\n\n</code></pre>\n<pre><code>public class DataAdapterImplB implements DataAdapter {\n\n    int solve(int a, int b, int c) {\n\n        return ...\n    }\n}\n\n</code></pre>\n<p>and similarly multiple others ...</p>\n<p>Now i am adding one more implementing class but with one less parameter in the existing method signature ..something like below :</p>\n<pre><code>public class DataAdapterImplF implements DataAdapter {\n\n    int solve(int a, int b) {\n\n        return ...\n    }\n}\n</code></pre>\n<p>So , question here is how to go about this :</p>\n<ol>\n<li><p>Should i override the existing <code>solve(int, int, int)</code> method only &amp; in my method body i can ignore this and won't use it at all ?</p>\n</li>\n<li><p>should i create a <code>default</code> method <code>solve(int, int)</code> in the interface &amp; override that in my new implementation class ?</p>\n</li>\n</ol>\n<p>or any other better &amp; clean solution ?</p>\n"},{"tags":["java","linux"],"comments":[{"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":8,"creation_date":1684136859,"post_id":76251872,"comment_id":134466996,"body_markdown":"`JAVA_HOME` is frequently misunderstood. The *tl;dr* is that Java itself doesn&#39;t care about that value. Some applications that *use* Java might look at it to decide what Java version to launch, but if you simply run `java` then only what is on your `PATH` matters.","body":"<code>JAVA_HOME</code> is frequently misunderstood. The <i>tl;dr</i> is that Java itself doesn&#39;t care about that value. Some applications that <i>use</i> Java might look at it to decide what Java version to launch, but if you simply run <code>java</code> then only what is on your <code>PATH</code> matters."}],"answers":[{"tags":[],"owner":{"account_id":16082845,"reputation":1,"user_id":11608309,"display_name":"Pisces"},"comment_count":0,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1684137891,"creation_date":1684137891,"answer_id":76252036,"question_id":76251872,"body_markdown":"execute the source command  /etc/profile","title":"Unable to change Java version in Ubuntu Linux","body":"<p>execute the source command  /etc/profile</p>\n"},{"tags":[],"owner":{"account_id":69659,"reputation":9188,"user_id":202553,"accept_rate":71,"display_name":"knb"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684147977,"creation_date":1684147977,"answer_id":76253348,"question_id":76251872,"body_markdown":"In Ubuntu you can run\r\n\r\n`update-alternatives --list java`\r\n\r\nthen you will get a listing of properly installed JDKs/JREs the operating system knows about.\r\n\r\n```text\r\n/usr/lib/jvm/java-11-openjdk-amd64/bin/java\r\n/usr/lib/jvm/java-7-oracle/jre/bin/java\r\n/usr/lib/jvm/java-8-openjdk-amd64/jre/bin/java\r\n```\r\n\r\nthen run  \r\n`update-alternatives --set &lt;one of the list items&gt;` to switch to a different one.\r\n","title":"Unable to change Java version in Ubuntu Linux","body":"<p>In Ubuntu you can run</p>\n<p><code>update-alternatives --list java</code></p>\n<p>then you will get a listing of properly installed JDKs/JREs the operating system knows about.</p>\n<pre><code>/usr/lib/jvm/java-11-openjdk-amd64/bin/java\n/usr/lib/jvm/java-7-oracle/jre/bin/java\n/usr/lib/jvm/java-8-openjdk-amd64/jre/bin/java\n</code></pre>\n<p>then run<br />\n<code>update-alternatives --set &lt;one of the list items&gt;</code> to switch to a different one.</p>\n"}],"owner":{"account_id":1374590,"reputation":3335,"user_id":1308850,"accept_rate":37,"display_name":"FractalBob"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":391,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1684217359,"answer_count":2,"score":1,"last_activity_date":1684337264,"creation_date":1684136626,"question_id":76251872,"body_markdown":"I set JAVA_HOME in .bashrc on my Ubuntu 22.04.2 LTS system, but when I check the version, it&#39;s still the old one:\r\n\r\n    ruomini@ruomini-XPS-13-9370:~$ echo $JAVA_HOME\r\n    /home/ruomini/jdk-17.0.7\r\n    ruomini@ruomini-XPS-13-9370:~$ java -version\r\n    openjdk version &quot;11.0.18&quot; 2023-01-17\r\n    OpenJDK Runtime Environment (build 11.0.18+10-post-Ubuntu-0ubuntu122.04)\r\n    OpenJDK 64-Bit Server VM (build 11.0.18+10-post-Ubuntu-0ubuntu122.04, mixed \r\n    mode, sharing)\r\n    ruomini@ruomini-XPS-13-9370:~$ \r\n\r\nUPDATE: I tried what was suggested below but for some reason, it didn&#39;t help: Java 17 doesn&#39;t appear, even though I installed it in /usr/lib/jvm:\r\n\r\n    ruomini@ruomini-XPS-13-9370:~/android-studio/bin$ update- \r\n    alternatives --list java\r\n\r\n    /usr/lib/jvm/java-11-openjdk-amd64/bin/java\r\n    /usr/lib/jvm/java-8-openjdk-amd64/jre/bin/java\r\n    ruomini@ruomini-XPS-13-9370:~/android-studio/bin$ ls -al \r\n    /usr/lib/jvm\r\n    total 40\r\n    drwxr-xr-x   5 root root  4096 May 15 09:31 .\r\n    drwxr-xr-x 159 root root 16384 Feb 23 18:18 ..\r\n    lrwxrwxrwx   1 root root    10 May 15 09:16 default-java -&gt; jdk-17.0.7\r\n    lrwxrwxrwx   1 root root    21 Jul 18  2019 java-1.11.0- \r\n    openjdk-amd64 -&gt; java-11-openjdk-amd64\r\n    -rw-r--r--   1 root root  2047 Jan 20 10:07 .java-1.11.0- \r\n    openjdk-amd64.jinfo\r\n    drwxr-xr-x   9 root root  4096 Mar  1 06:01 java-11- \r\n    openjdk-amd64\r\n    lrwxrwxrwx   1 root root    20 Mar 12  2018 java-1.8.0- \r\n    openjdk-amd64 -&gt; java-8-openjdk-amd64\r\n    -rw-r--r--   1 root root  2764 Jan 24 20:02 .java-1.8.0- \r\n    openjdk-amd64.jinfo\r\n    drwxr-xr-x   5 root root  4096 Jun 24  2016 java-8- \r\n    openjdk-amd64\r\n    drwxr-xr-x   9 root root  4096 May 15 09:09 jdk-17.0.7\r\n    ruomini@ruomini-XPS-13-9370:~/android-studio/bin$ \r\n\r\n**UPDATE** It turns out that I hadn&#39;t properly installed the Java SDK. Once it was installed correctly, the problem went away.\r\n\r\n\r\n","title":"Unable to change Java version in Ubuntu Linux","body":"<p>I set JAVA_HOME in .bashrc on my Ubuntu 22.04.2 LTS system, but when I check the version, it's still the old one:</p>\n<pre><code>ruomini@ruomini-XPS-13-9370:~$ echo $JAVA_HOME\n/home/ruomini/jdk-17.0.7\nruomini@ruomini-XPS-13-9370:~$ java -version\nopenjdk version &quot;11.0.18&quot; 2023-01-17\nOpenJDK Runtime Environment (build 11.0.18+10-post-Ubuntu-0ubuntu122.04)\nOpenJDK 64-Bit Server VM (build 11.0.18+10-post-Ubuntu-0ubuntu122.04, mixed \nmode, sharing)\nruomini@ruomini-XPS-13-9370:~$ \n</code></pre>\n<p>UPDATE: I tried what was suggested below but for some reason, it didn't help: Java 17 doesn't appear, even though I installed it in /usr/lib/jvm:</p>\n<pre><code>ruomini@ruomini-XPS-13-9370:~/android-studio/bin$ update- \nalternatives --list java\n\n/usr/lib/jvm/java-11-openjdk-amd64/bin/java\n/usr/lib/jvm/java-8-openjdk-amd64/jre/bin/java\nruomini@ruomini-XPS-13-9370:~/android-studio/bin$ ls -al \n/usr/lib/jvm\ntotal 40\ndrwxr-xr-x   5 root root  4096 May 15 09:31 .\ndrwxr-xr-x 159 root root 16384 Feb 23 18:18 ..\nlrwxrwxrwx   1 root root    10 May 15 09:16 default-java -&gt; jdk-17.0.7\nlrwxrwxrwx   1 root root    21 Jul 18  2019 java-1.11.0- \nopenjdk-amd64 -&gt; java-11-openjdk-amd64\n-rw-r--r--   1 root root  2047 Jan 20 10:07 .java-1.11.0- \nopenjdk-amd64.jinfo\ndrwxr-xr-x   9 root root  4096 Mar  1 06:01 java-11- \nopenjdk-amd64\nlrwxrwxrwx   1 root root    20 Mar 12  2018 java-1.8.0- \nopenjdk-amd64 -&gt; java-8-openjdk-amd64\n-rw-r--r--   1 root root  2764 Jan 24 20:02 .java-1.8.0- \nopenjdk-amd64.jinfo\ndrwxr-xr-x   5 root root  4096 Jun 24  2016 java-8- \nopenjdk-amd64\ndrwxr-xr-x   9 root root  4096 May 15 09:09 jdk-17.0.7\nruomini@ruomini-XPS-13-9370:~/android-studio/bin$ \n</code></pre>\n<p><strong>UPDATE</strong> It turns out that I hadn't properly installed the Java SDK. Once it was installed correctly, the problem went away.</p>\n"},{"tags":["java","android","xml","kotlin","imageview"],"owner":{"account_id":10916684,"reputation":3936,"user_id":8024296,"display_name":"Paul"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684336645,"creation_date":1684336645,"question_id":76273657,"body_markdown":"This is the effect I would like to have:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nI have the following image:\r\n\r\n[![enter image description here][3]][3]\r\n\r\n  \r\n[1]: https://i.stack.imgur.com/tOA2t.gif\r\n\r\n[3]: https://i.stack.imgur.com/vaP3b.png\r\n\r\nI have to use this image (loading.xml) in a widget specifically it would be an element of the listview, I have to animate it as seen in the gif.\r\n\r\nThis is the code I use:\r\n\r\n```kotlin\r\noverride fun getViewAt(position: Int): RemoteViews? {\r\n        val remoteView = RemoteViews(context!!.packageName, R.layout.list_row)\r\n        val listItem = listItemList[position]\r\n\r\n        if (listItem.reached!!)\r\n            remoteView.setImageViewResource(R.id.iv_circle, R.drawable.check)\r\n        else\r\n            remoteView.setImageViewResource(R.id.iv_circle, R.drawable.loading)\r\n        return remoteView\r\n\r\n}\r\n```\r\n\r\nlist_row.xml\r\n```xml\r\n...\r\n        &lt;ImageView\r\n            android:id=&quot;@+id/iv_circle&quot;\r\n            android:layout_width=&quot;30dp&quot;\r\n            android:layout_height=&quot;30dp&quot;\r\n            android:paddingLeft=&quot;2dp&quot;\r\n            android:src=&quot;@drawable/loading&quot; /&gt;\r\n...\r\n```\r\n\r\nloading.xml\r\n\r\n```xml\r\n&lt;vector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    android:width=&quot;16dp&quot;\r\n    android:height=&quot;16dp&quot;\r\n    android:viewportWidth=&quot;16&quot;\r\n    android:viewportHeight=&quot;16&quot;&gt;\r\n    &lt;path\r\n        android:fillAlpha=&quot;0.2&quot;\r\n        android:fillColor=&quot;#F5AF45&quot;\r\n        android:pathData=&quot;m8,1.5a6.5,6.5 0 1 0 0,13a6.5,6.5 0 0 0 0,-13zm-8,6.5a8,8 0 1 1 16,0a8,8 0 0 1 -16,0z&quot; /&gt;\r\n    &lt;path\r\n        android:fillColor=&quot;#F5AF45&quot;\r\n        android:pathData=&quot;m7.25,0.75a0.75,0.75 0 0 1 0.75,-0.75a8,8 0 0 1 8,8a0.75,0.75 0 0 1 -1.5,0a6.5,6.5 0 0 0 -6.5,-6.5a0.75,0.75 0 0 1 -0.75,-0.75z&quot; /&gt;\r\n\r\n&lt;/vector&gt;\r\n```\r\n\r\nI tried looking in the documentation:\r\n\r\nhttps://developer.android.com/develop/ui/views/animations/drawable-animation#kotlin\r\n\r\nhttps://developer.android.com/reference/android/graphics/drawable/AnimatedVectorDrawable\r\n\r\nhttps://developer.android.com/reference/android/graphics/drawable/AnimationDrawable\r\n\r\nBut I haven&#39;t found a way to animate it.\r\n\r\nI think that even a rotation of the image is enough to get the result.\r\n\r\nBut I think it should be done only on the xml side, because the `kotlin` code side for the widgets is very limited.\r\n\r\nImage I need to animate is in a `listview`.\r\n\r\nSee code above `getViewAt()` to see how the image is inserted.\r\n\r\nCan you give me a hand?","title":"Android Kotlin Widget animate a vector xml image in listview","body":"<p>This is the effect I would like to have:</p>\n<p><a href=\"https://i.stack.imgur.com/tOA2t.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tOA2t.gif\" alt=\"enter image description here\" /></a></p>\n<p>I have the following image:</p>\n<p><a href=\"https://i.stack.imgur.com/vaP3b.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vaP3b.png\" alt=\"enter image description here\" /></a></p>\n<p>I have to use this image (loading.xml) in a widget specifically it would be an element of the listview, I have to animate it as seen in the gif.</p>\n<p>This is the code I use:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>override fun getViewAt(position: Int): RemoteViews? {\n        val remoteView = RemoteViews(context!!.packageName, R.layout.list_row)\n        val listItem = listItemList[position]\n\n        if (listItem.reached!!)\n            remoteView.setImageViewResource(R.id.iv_circle, R.drawable.check)\n        else\n            remoteView.setImageViewResource(R.id.iv_circle, R.drawable.loading)\n        return remoteView\n\n}\n</code></pre>\n<p>list_row.xml</p>\n<pre class=\"lang-xml prettyprint-override\"><code>...\n        &lt;ImageView\n            android:id=&quot;@+id/iv_circle&quot;\n            android:layout_width=&quot;30dp&quot;\n            android:layout_height=&quot;30dp&quot;\n            android:paddingLeft=&quot;2dp&quot;\n            android:src=&quot;@drawable/loading&quot; /&gt;\n...\n</code></pre>\n<p>loading.xml</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;vector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:width=&quot;16dp&quot;\n    android:height=&quot;16dp&quot;\n    android:viewportWidth=&quot;16&quot;\n    android:viewportHeight=&quot;16&quot;&gt;\n    &lt;path\n        android:fillAlpha=&quot;0.2&quot;\n        android:fillColor=&quot;#F5AF45&quot;\n        android:pathData=&quot;m8,1.5a6.5,6.5 0 1 0 0,13a6.5,6.5 0 0 0 0,-13zm-8,6.5a8,8 0 1 1 16,0a8,8 0 0 1 -16,0z&quot; /&gt;\n    &lt;path\n        android:fillColor=&quot;#F5AF45&quot;\n        android:pathData=&quot;m7.25,0.75a0.75,0.75 0 0 1 0.75,-0.75a8,8 0 0 1 8,8a0.75,0.75 0 0 1 -1.5,0a6.5,6.5 0 0 0 -6.5,-6.5a0.75,0.75 0 0 1 -0.75,-0.75z&quot; /&gt;\n\n&lt;/vector&gt;\n</code></pre>\n<p>I tried looking in the documentation:</p>\n<p><a href=\"https://developer.android.com/develop/ui/views/animations/drawable-animation#kotlin\" rel=\"nofollow noreferrer\">https://developer.android.com/develop/ui/views/animations/drawable-animation#kotlin</a></p>\n<p><a href=\"https://developer.android.com/reference/android/graphics/drawable/AnimatedVectorDrawable\" rel=\"nofollow noreferrer\">https://developer.android.com/reference/android/graphics/drawable/AnimatedVectorDrawable</a></p>\n<p><a href=\"https://developer.android.com/reference/android/graphics/drawable/AnimationDrawable\" rel=\"nofollow noreferrer\">https://developer.android.com/reference/android/graphics/drawable/AnimationDrawable</a></p>\n<p>But I haven't found a way to animate it.</p>\n<p>I think that even a rotation of the image is enough to get the result.</p>\n<p>But I think it should be done only on the xml side, because the <code>kotlin</code> code side for the widgets is very limited.</p>\n<p>Image I need to animate is in a <code>listview</code>.</p>\n<p>See code above <code>getViewAt()</code> to see how the image is inserted.</p>\n<p>Can you give me a hand?</p>\n"},{"tags":["java","image","swing","jframe","jlabel"],"comments":[{"owner":{"account_id":114128,"reputation":50467,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":0,"creation_date":1684337220,"post_id":76273651,"comment_id":134504381,"body_markdown":"Don&#39;t put images in the src folder.  [Location-Independent Access to Resources](https://docs.oracle.com/javase/8/docs/technotes/guides/lang/resources.html).","body":"Don&#39;t put images in the src folder.  <a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/lang/resources.html\" rel=\"nofollow noreferrer\">Location-Independent Access to Resources</a>."},{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1684337305,"post_id":76273651,"comment_id":134504406,"body_markdown":"https://docs.oracle.com/javase/tutorial/uiswing/components/label.html","body":"<a href=\"https://docs.oracle.com/javase/tutorial/uiswing/components/label.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/tutorial/uiswing/components/label.htm&zwnj;&#8203;l</a>"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1684337379,"post_id":76273651,"comment_id":134504428,"body_markdown":"Better to load your files/images as resources:\n[Netbeans](https://technojeeves.com/index.php/aliasjava1/78-loading-files-as-resources-in-java-with-netbeans)\n[Eclipse](https://technojeeves.com/index.php/aliasjava1/80-loading-files-as-resources-in-java-with-eclipse)","body":"Better to load your files/images as resources: <a href=\"https://technojeeves.com/index.php/aliasjava1/78-loading-files-as-resources-in-java-with-netbeans\" rel=\"nofollow noreferrer\">Netbeans</a> <a href=\"https://technojeeves.com/index.php/aliasjava1/80-loading-files-as-resources-in-java-with-eclipse\" rel=\"nofollow noreferrer\">Eclipse</a>"}],"owner":{"account_id":26709907,"reputation":1,"user_id":20315473,"display_name":"nohjilk vanderlust"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684336610,"creation_date":1684336610,"question_id":76273651,"body_markdown":"so I have an image in the folder of my project and I want to upload it on a label in a JFrame so the image will be show in the user interface, but when I run the project I only get the grey screen the picture is not being showed. this is the entire code, thank you eberyone.\r\n\r\n\r\n\r\n\r\n```\r\n\r\n//Main part of Java Eat//\r\npackage programming.javaeat;\r\nimport javax.swing.JFrame;\r\nimport javax.swing.JLabel;\r\nimport javax.swing.ImageIcon;\r\n\r\npublic class JavaEat {\r\n\r\n    public static void main(String[] args) {\r\n    JFrame frame = new JFrame();\r\n    int ancho = 700;\r\n    int largo = 600;\r\n    frame.setSize(ancho,largo);\r\n    \r\n    //Creaci&#243;n del label//\r\n   \r\n    JLabel label = new JLabel();\r\n    \r\n    // im&#225;gen en el label//\r\n    ImageIcon imagen = new ImageIcon(&quot;fondo.jpg&quot;);\r\n        label.setIcon(imagen);\r\n        \r\n    //agregar el label al frame//\r\n     frame.add(label);  \r\n     \r\n     //Mostrar el frame junto con el label//\r\n      frame.setVisible(true);\r\n        \r\n        \r\n    \r\n    }\r\n}\r\n```\r\n\r\n\r\nI have tried everything, using the design and the palette from the JFrame, coding it in another way...","title":"problem with adding an image on a JFrame with a label","body":"<p>so I have an image in the folder of my project and I want to upload it on a label in a JFrame so the image will be show in the user interface, but when I run the project I only get the grey screen the picture is not being showed. this is the entire code, thank you eberyone.</p>\n<pre><code>\n//Main part of Java Eat//\npackage programming.javaeat;\nimport javax.swing.JFrame;\nimport javax.swing.JLabel;\nimport javax.swing.ImageIcon;\n\npublic class JavaEat {\n\n    public static void main(String[] args) {\n    JFrame frame = new JFrame();\n    int ancho = 700;\n    int largo = 600;\n    frame.setSize(ancho,largo);\n    \n    //Creación del label//\n   \n    JLabel label = new JLabel();\n    \n    // imágen en el label//\n    ImageIcon imagen = new ImageIcon(&quot;fondo.jpg&quot;);\n        label.setIcon(imagen);\n        \n    //agregar el label al frame//\n     frame.add(label);  \n     \n     //Mostrar el frame junto con el label//\n      frame.setVisible(true);\n        \n        \n    \n    }\n}\n</code></pre>\n<p>I have tried everything, using the design and the palette from the JFrame, coding it in another way...</p>\n"},{"tags":["java","visual-studio-code","compiler-errors"],"comments":[{"owner":{"account_id":11380920,"reputation":8254,"user_id":8343843,"display_name":"Alexey R."},"score":0,"creation_date":1652955586,"post_id":72302801,"comment_id":127735284,"body_markdown":"file containing your public class has to be named after that public class name.","body":"file containing your public class has to be named after that public class name."},{"owner":{"account_id":15856821,"reputation":2451,"user_id":11441011,"display_name":"maloomeister"},"score":3,"creation_date":1652955626,"post_id":72302801,"comment_id":127735291,"body_markdown":"The _file name_ of your `class main` currently is `tempCodeRunnerFile`. The class name of a public class has to be identical to the file name. So either rename the _class_ to `public class tempCodeRunnerFile` (however it should start uppercase due to java naming conventions but that&#39;s another topic) or rename the _file_ to `main.java`.","body":"The <i>file name</i> of your <code>class main</code> currently is <code>tempCodeRunnerFile</code>. The class name of a public class has to be identical to the file name. So either rename the <i>class</i> to <code>public class tempCodeRunnerFile</code> (however it should start uppercase due to java naming conventions but that&#39;s another topic) or rename the <i>file</i> to <code>main.java</code>."},{"owner":{"account_id":25333047,"reputation":1,"user_id":19152591,"display_name":"Ali Osseili"},"score":1,"creation_date":1652955755,"post_id":72302801,"comment_id":127735340,"body_markdown":"so i need to save the file as main.java ?","body":"so i need to save the file as main.java ?"},{"owner":{"account_id":221272,"reputation":6281,"user_id":479156,"accept_rate":92,"display_name":"Ivar"},"score":0,"creation_date":1652955796,"post_id":72302801,"comment_id":127735356,"body_markdown":"@AliOsseili Yes, that&#39;s what the error message tells you. &quot;[it] _should be declared in a file named main.java_&quot;","body":"@AliOsseili Yes, that&#39;s what the error message tells you. &quot;[it] <i>should be declared in a file named main.java</i>&quot;"},{"owner":{"account_id":25333047,"reputation":1,"user_id":19152591,"display_name":"Ali Osseili"},"score":0,"creation_date":1652955837,"post_id":72302801,"comment_id":127735367,"body_markdown":"@maloomeister thanks man! how do i upvote u?","body":"@maloomeister thanks man! how do i upvote u?"},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1652957056,"post_id":72302801,"comment_id":127735772,"body_markdown":"Doesn&#39;t the error message tell you exactly what is wrong? In the future, you will probably want to do a decent search for [similar questions](https://www.google.com/search?q=site%3Astackoverflow.com+java+error%3A+class+is+public+should+be+declared+in+a+file+named) (please check the link here for an example) and review them before asking. Otherwise, if you ask multiple questions that are considered by the site to be low-quality, you could harm your ability to ask further questions (the site can automatically restrict you), and you will want to avoid that.","body":"Doesn&#39;t the error message tell you exactly what is wrong? In the future, you will probably want to do a decent search for <a href=\"https://www.google.com/search?q=site%3Astackoverflow.com+java+error%3A+class+is+public+should+be+declared+in+a+file+named\" rel=\"nofollow noreferrer\">similar questions</a> (please check the link here for an example) and review them before asking. Otherwise, if you ask multiple questions that are considered by the site to be low-quality, you could harm your ability to ask further questions (the site can automatically restrict you), and you will want to avoid that."}],"answers":[{"tags":[],"owner":{"account_id":13994563,"reputation":67,"user_id":10107721,"display_name":"HTTRCH"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1652955679,"creation_date":1652955679,"answer_id":72302838,"question_id":72302801,"body_markdown":"try naming your file, &quot;main.java&quot;","title":"I&#39;m writing my first ever java program and it&#39;s not compiling for a certain reason","body":"<p>try naming your file, &quot;main.java&quot;</p>\n"},{"tags":[],"owner":{"account_id":25113175,"reputation":321,"user_id":18962551,"display_name":"Eskapone"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1652955725,"creation_date":1652955725,"answer_id":72302850,"question_id":72302801,"body_markdown":"basically the compiler tells you whats wrong. It says, &quot;class main is public, should be declared in a file named main.java&quot;.\r\nJava has a naming rule, that a class inside a java file needs to match that file name.\r\nExample 1:\r\n\r\n  Filename -&gt; File.java\r\n\r\ninside that file:\r\n```\r\npublic class Main{\r\n...\r\n```\r\ndoes violate that rule (class name does not equal the file name)\r\n\r\nExample 2:\r\n\r\n  Filename -&gt; Main.java\r\n\r\ninside that file:\r\n```\r\npublic class Main{\r\n...\r\n```\r\nfollows that rule (class name does equal the file name)\r\n\r\nAlso for beginners:\r\nThis is a good quick read for basic code / naming conventions.\r\nhttps://www.oracle.com/java/technologies/javase/codeconventions-namingconventions.html","title":"I&#39;m writing my first ever java program and it&#39;s not compiling for a certain reason","body":"<p>basically the compiler tells you whats wrong. It says, &quot;class main is public, should be declared in a file named main.java&quot;.\nJava has a naming rule, that a class inside a java file needs to match that file name.\nExample 1:</p>\n<p>Filename -&gt; File.java</p>\n<p>inside that file:</p>\n<pre><code>public class Main{\n...\n</code></pre>\n<p>does violate that rule (class name does not equal the file name)</p>\n<p>Example 2:</p>\n<p>Filename -&gt; Main.java</p>\n<p>inside that file:</p>\n<pre><code>public class Main{\n...\n</code></pre>\n<p>follows that rule (class name does equal the file name)</p>\n<p>Also for beginners:\nThis is a good quick read for basic code / naming conventions.\n<a href=\"https://www.oracle.com/java/technologies/javase/codeconventions-namingconventions.html\" rel=\"nofollow noreferrer\">https://www.oracle.com/java/technologies/javase/codeconventions-namingconventions.html</a></p>\n"}],"owner":{"account_id":25333047,"reputation":1,"user_id":19152591,"display_name":"Ali Osseili"},"comment_count":6,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":145,"favorite_count":0,"down_vote_count":5,"up_vote_count":0,"closed_date":1652956571,"accepted_answer_id":72302850,"answer_count":2,"score":-5,"last_activity_date":1684336599,"creation_date":1652955492,"question_id":72302801,"body_markdown":"This is the code I have tried running\r\n\r\n``` \r\n    public class main\r\n{\r\n    public static void main(String[] args)\r\n    {\r\n        System.out.println(&quot;Hello, world!&quot;);\r\n    }\r\n}\r\n```\r\n  and it gives me this error:\r\n\r\ntempCodeRunnerFile.java:1: error: class main is public, should be declared in a file named main.java\r\npublic class main\r\n\r\nI don&#39;t know what&#39;s wrong tbh I have tried modifying and it looks similar to me like the example they gave..\r\n\r\n\r\n","title":"I&#39;m writing my first ever java program and it&#39;s not compiling for a certain reason","body":"<p>This is the code I have tried running</p>\n<pre><code>    public class main\n{\n    public static void main(String[] args)\n    {\n        System.out.println(&quot;Hello, world!&quot;);\n    }\n}\n</code></pre>\n<p>and it gives me this error:</p>\n<p>tempCodeRunnerFile.java:1: error: class main is public, should be declared in a file named main.java\npublic class main</p>\n<p>I don't know what's wrong tbh I have tried modifying and it looks similar to me like the example they gave..</p>\n"},{"tags":["java","amazon-web-services","spring-boot","amazon-eks","aws-fargate"],"owner":{"account_id":27678502,"reputation":1,"user_id":21127798,"display_name":"Aditya Parikh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":97,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684336418,"creation_date":1684336418,"question_id":76273620,"body_markdown":"We recently migrated a service running in EC2 instances to EKS Fargate. During testing we found some intermittent connection reset exception when trying to connect the the service using a load balancer(NLB).\r\n\r\n```\r\norg.springframework.web.client.ResourceAccessException: I/O error on POST request for &quot;https://go.xxxxxxxxxxx.com/api/push&quot;: Connection reset; nested exception is java.net.SocketException: Connection reset\r\n\tat org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:785) ~[spring-web-5.3.10.jar!/:5.3.10]\r\n\tat org.springframework.web.client.RestTemplate.execute(RestTemplate.java:711) ~[spring-web-5.3.10.jar!/:5.3.10]\r\n\tat org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:437) ~[spring-web-5.3.10.jar!/:5.3.10]\r\n\tat com.venuetize.airship.services.RestService.postObject(RestService.java:49) ~[classes!/:0.0.1-SNAPSHOT]\r\n\tat com.venuetize.airship.services.AirshipIntegrationService.sendNotification(AirshipIntegrationService.java:312) ~[classes!/:0.0.1-SNAPSHOT]\r\n\tat com.venuetize.airship.controllers.NotificationController.sendNotification(NotificationController.java:47) [classes!/:0.0.1-SNAPSHOT]\r\n\tat jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]\r\n\tat jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:?]\r\n\tat jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]\r\n\tat java.lang.reflect.Method.invoke(Method.java:566) ~[?:?]\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) [spring-web-5.3.10.jar!/:5.3.10]\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) [spring-web-5.3.10.jar!/:5.3.10]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) [spring-webmvc-5.3.10.jar!/:5.3.10]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) [spring-webmvc-5.3.10.jar!/:5.3.10]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) [spring-webmvc-5.3.10.jar!/:5.3.10]\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) [spring-webmvc-5.3.10.jar!/:5.3.10]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067) [spring-webmvc-5.3.10.jar!/:5.3.10]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) [spring-webmvc-5.3.10.jar!/:5.3.10]\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) [spring-webmvc-5.3.10.jar!/:5.3.10]\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) [spring-webmvc-5.3.10.jar!/:5.3.10]\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:681) [tomcat-embed-core-9.0.53.jar!/:?]\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) [spring-webmvc-5.3.10.jar!/:5.3.10]\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:764) [tomcat-embed-core-9.0.53.jar!/:?]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) [tomcat-embed-core-9.0.53.jar!/:?]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.53.jar!/:?]\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) [tomcat-embed-websocket-9.0.53.jar!/:?]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.53.jar!/:?]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.53.jar!/:?]\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) [spring-web-5.3.10.jar!/:5.3.10]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) [spring-web-5.3.10.jar!/:5.3.10]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.53.jar!/:?]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.53.jar!/:?]\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) [spring-web-5.3.10.jar!/:5.3.10]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) [spring-web-5.3.10.jar!/:5.3.10]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.53.jar!/:?]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.53.jar!/:?]\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) [spring-web-5.3.10.jar!/:5.3.10]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) [spring-web-5.3.10.jar!/:5.3.10]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.53.jar!/:?]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.53.jar!/:?]\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) [tomcat-embed-core-9.0.53.jar!/:?]\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) [tomcat-embed-core-9.0.53.jar!/:?]\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540) [tomcat-embed-core-9.0.53.jar!/:?]\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) [tomcat-embed-core-9.0.53.jar!/:?]\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) [tomcat-embed-core-9.0.53.jar!/:?]\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) [tomcat-embed-core-9.0.53.jar!/:?]\r\n\tat org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:687) [tomcat-embed-core-9.0.53.jar!/:?]\r\n\tat org.apache.catalina.valves.RemoteIpValve.invoke(RemoteIpValve.java:769) [tomcat-embed-core-9.0.53.jar!/:?]\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357) [tomcat-embed-core-9.0.53.jar!/:?]\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382) [tomcat-embed-core-9.0.53.jar!/:?]\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) [tomcat-embed-core-9.0.53.jar!/:?]\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893) [tomcat-embed-core-9.0.53.jar!/:?]\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1726) [tomcat-embed-core-9.0.53.jar!/:?]\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) [tomcat-embed-core-9.0.53.jar!/:?]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) [tomcat-embed-core-9.0.53.jar!/:?]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) [tomcat-embed-core-9.0.53.jar!/:?]\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-embed-core-9.0.53.jar!/:?]\r\n\tat java.lang.Thread.run(Thread.java:829) [?:?]\r\nCaused by: java.net.SocketException: Connection reset\r\n\tat java.net.SocketInputStream.read(SocketInputStream.java:186) ~[?:?]\r\n\tat java.net.SocketInputStream.read(SocketInputStream.java:140) ~[?:?]\r\n\tat sun.security.ssl.SSLSocketInputRecord.read(SSLSocketInputRecord.java:484) ~[?:?]\r\n\tat sun.security.ssl.SSLSocketInputRecord.readHeader(SSLSocketInputRecord.java:478) ~[?:?]\r\n\tat sun.security.ssl.SSLSocketInputRecord.bytesInCompletePacket(SSLSocketInputRecord.java:70) ~[?:?]\r\n\tat sun.security.ssl.SSLSocketImpl.readApplicationRecord(SSLSocketImpl.java:1455) ~[?:?]\r\n\tat sun.security.ssl.SSLSocketImpl$AppInputStream.read(SSLSocketImpl.java:1066) ~[?:?]\r\n\tat org.apache.http.impl.io.SessionInputBufferImpl.streamRead(SessionInputBufferImpl.java:137) ~[httpcore-4.4.14.jar!/:4.4.14]\r\n\tat org.apache.http.impl.io.SessionInputBufferImpl.fillBuffer(SessionInputBufferImpl.java:153) ~[httpcore-4.4.14.jar!/:4.4.14]\r\n\tat org.apache.http.impl.io.SessionInputBufferImpl.readLine(SessionInputBufferImpl.java:280) ~[httpcore-4.4.14.jar!/:4.4.14]\r\n\tat org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:138) ~[httpclient-4.5.13.jar!/:4.5.13]\r\n\tat org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:56) ~[httpclient-4.5.13.jar!/:4.5.13]\r\n\tat org.apache.http.impl.io.AbstractMessageParser.parse(AbstractMessageParser.java:259) ~[httpcore-4.4.14.jar!/:4.4.14]\r\n\tat org.apache.http.impl.DefaultBHttpClientConnection.receiveResponseHeader(DefaultBHttpClientConnection.java:163) ~[httpcore-4.4.14.jar!/:4.4.14]\r\n\tat org.apache.http.impl.conn.CPoolProxy.receiveResponseHeader(CPoolProxy.java:157) ~[httpclient-4.5.13.jar!/:4.5.13]\r\n\tat org.apache.http.protocol.HttpRequestExecutor.doReceiveResponse(HttpRequestExecutor.java:273) ~[httpcore-4.4.14.jar!/:4.4.14]\r\n\tat org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:125) ~[httpcore-4.4.14.jar!/:4.4.14]\r\n\tat org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:272) ~[httpclient-4.5.13.jar!/:4.5.13]\r\n\tat org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186) ~[httpclient-4.5.13.jar!/:4.5.13]\r\n\tat org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89) ~[httpclient-4.5.13.jar!/:4.5.13]\r\n\tat org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:110) ~[httpclient-4.5.13.jar!/:4.5.13]\r\n\tat org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185) ~[httpclient-4.5.13.jar!/:4.5.13]\r\n\tat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:83) ~[httpclient-4.5.13.jar!/:4.5.13]\r\n\tat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56) ~[httpclient-4.5.13.jar!/:4.5.13]\r\n\tat org.springframework.http.client.HttpComponentsClientHttpRequest.executeInternal(HttpComponentsClientHttpRequest.java:87) ~[spring-web-5.3.10.jar!/:5.3.10]\r\n\tat org.springframework.http.client.AbstractBufferingClientHttpRequest.executeInternal(AbstractBufferingClientHttpRequest.java:48) ~[spring-web-5.3.10.jar!/:5.3.10]\r\n\tat org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:66) ~[spring-web-5.3.10.jar!/:5.3.10]\r\n\tat org.springframework.http.client.BufferingClientHttpRequestWrapper.executeInternal(BufferingClientHttpRequestWrapper.java:63) ~[spring-web-5.3.10.jar!/:5.3.10]\r\n\tat org.springframework.http.client.AbstractBufferingClientHttpRequest.executeInternal(AbstractBufferingClientHttpRequest.java:48) ~[spring-web-5.3.10.jar!/:5.3.10]\r\n\tat org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:66) ~[spring-web-5.3.10.jar!/:5.3.10]\r\n\tat org.springframework.http.client.InterceptingClientHttpRequest$InterceptingRequestExecution.execute(InterceptingClientHttpRequest.java:109) ~[spring-web-5.3.10.jar!/:5.3.10]\r\n\tat com.venuetize.airship.utils.VzRequestResponseLoggingInterceptor.intercept(VzRequestResponseLoggingInterceptor.java:24) ~[classes!/:0.0.1-SNAPSHOT]\r\n\tat org.springframework.http.client.InterceptingClientHttpRequest$InterceptingRequestExecution.execute(InterceptingClientHttpRequest.java:93) ~[spring-web-5.3.10.jar!/:5.3.10]\r\n\tat com.venuetize.xtrace.interceptor.XTraceIdForwardingInterceptor.intercept(XTraceIdForwardingInterceptor.java:77) ~[xtrace-0.5.1.jar!/:?]\r\n\tat org.springframework.http.client.InterceptingClientHttpRequest$InterceptingRequestExecution.execute(InterceptingClientHttpRequest.java:93) ~[spring-web-5.3.10.jar!/:5.3.10]\r\n\tat org.springframework.http.client.InterceptingClientHttpRequest.executeInternal(InterceptingClientHttpRequest.java:77) ~[spring-web-5.3.10.jar!/:5.3.10]\r\n\tat org.springframework.http.client.AbstractBufferingClientHttpRequest.executeInternal(AbstractBufferingClientHttpRequest.java:48) ~[spring-web-5.3.10.jar!/:5.3.10]\r\n\tat org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:66) ~[spring-web-5.3.10.jar!/:5.3.10]\r\n\tat org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:776) ~[spring-web-5.3.10.jar!/:5.3.10]\r\n\t... 57 more\r\n```\r\n\r\n\r\n\r\nThe only observable pattern with multiple days of testing is, if I wait few hours or days between testing I&#39;ll see this exception but then the subsequent calls work fine. So it seems to be some networking issue and would like some guidance into this.","title":"Java-Springboot service running in EKS Fargate throws java.net.SocketException: Connection reset on the first call","body":"<p>We recently migrated a service running in EC2 instances to EKS Fargate. During testing we found some intermittent connection reset exception when trying to connect the the service using a load balancer(NLB).</p>\n<pre><code>org.springframework.web.client.ResourceAccessException: I/O error on POST request for &quot;https://go.xxxxxxxxxxx.com/api/push&quot;: Connection reset; nested exception is java.net.SocketException: Connection reset\n    at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:785) ~[spring-web-5.3.10.jar!/:5.3.10]\n    at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:711) ~[spring-web-5.3.10.jar!/:5.3.10]\n    at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:437) ~[spring-web-5.3.10.jar!/:5.3.10]\n    at com.venuetize.airship.services.RestService.postObject(RestService.java:49) ~[classes!/:0.0.1-SNAPSHOT]\n    at com.venuetize.airship.services.AirshipIntegrationService.sendNotification(AirshipIntegrationService.java:312) ~[classes!/:0.0.1-SNAPSHOT]\n    at com.venuetize.airship.controllers.NotificationController.sendNotification(NotificationController.java:47) [classes!/:0.0.1-SNAPSHOT]\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:?]\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]\n    at java.lang.reflect.Method.invoke(Method.java:566) ~[?:?]\n    at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) [spring-web-5.3.10.jar!/:5.3.10]\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) [spring-web-5.3.10.jar!/:5.3.10]\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) [spring-webmvc-5.3.10.jar!/:5.3.10]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) [spring-webmvc-5.3.10.jar!/:5.3.10]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) [spring-webmvc-5.3.10.jar!/:5.3.10]\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) [spring-webmvc-5.3.10.jar!/:5.3.10]\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067) [spring-webmvc-5.3.10.jar!/:5.3.10]\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) [spring-webmvc-5.3.10.jar!/:5.3.10]\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) [spring-webmvc-5.3.10.jar!/:5.3.10]\n    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) [spring-webmvc-5.3.10.jar!/:5.3.10]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:681) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) [spring-webmvc-5.3.10.jar!/:5.3.10]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:764) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) [tomcat-embed-websocket-9.0.53.jar!/:?]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) [spring-web-5.3.10.jar!/:5.3.10]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) [spring-web-5.3.10.jar!/:5.3.10]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) [spring-web-5.3.10.jar!/:5.3.10]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) [spring-web-5.3.10.jar!/:5.3.10]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) [spring-web-5.3.10.jar!/:5.3.10]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) [spring-web-5.3.10.jar!/:5.3.10]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:687) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.apache.catalina.valves.RemoteIpValve.invoke(RemoteIpValve.java:769) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1726) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-embed-core-9.0.53.jar!/:?]\n    at java.lang.Thread.run(Thread.java:829) [?:?]\nCaused by: java.net.SocketException: Connection reset\n    at java.net.SocketInputStream.read(SocketInputStream.java:186) ~[?:?]\n    at java.net.SocketInputStream.read(SocketInputStream.java:140) ~[?:?]\n    at sun.security.ssl.SSLSocketInputRecord.read(SSLSocketInputRecord.java:484) ~[?:?]\n    at sun.security.ssl.SSLSocketInputRecord.readHeader(SSLSocketInputRecord.java:478) ~[?:?]\n    at sun.security.ssl.SSLSocketInputRecord.bytesInCompletePacket(SSLSocketInputRecord.java:70) ~[?:?]\n    at sun.security.ssl.SSLSocketImpl.readApplicationRecord(SSLSocketImpl.java:1455) ~[?:?]\n    at sun.security.ssl.SSLSocketImpl$AppInputStream.read(SSLSocketImpl.java:1066) ~[?:?]\n    at org.apache.http.impl.io.SessionInputBufferImpl.streamRead(SessionInputBufferImpl.java:137) ~[httpcore-4.4.14.jar!/:4.4.14]\n    at org.apache.http.impl.io.SessionInputBufferImpl.fillBuffer(SessionInputBufferImpl.java:153) ~[httpcore-4.4.14.jar!/:4.4.14]\n    at org.apache.http.impl.io.SessionInputBufferImpl.readLine(SessionInputBufferImpl.java:280) ~[httpcore-4.4.14.jar!/:4.4.14]\n    at org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:138) ~[httpclient-4.5.13.jar!/:4.5.13]\n    at org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:56) ~[httpclient-4.5.13.jar!/:4.5.13]\n    at org.apache.http.impl.io.AbstractMessageParser.parse(AbstractMessageParser.java:259) ~[httpcore-4.4.14.jar!/:4.4.14]\n    at org.apache.http.impl.DefaultBHttpClientConnection.receiveResponseHeader(DefaultBHttpClientConnection.java:163) ~[httpcore-4.4.14.jar!/:4.4.14]\n    at org.apache.http.impl.conn.CPoolProxy.receiveResponseHeader(CPoolProxy.java:157) ~[httpclient-4.5.13.jar!/:4.5.13]\n    at org.apache.http.protocol.HttpRequestExecutor.doReceiveResponse(HttpRequestExecutor.java:273) ~[httpcore-4.4.14.jar!/:4.4.14]\n    at org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:125) ~[httpcore-4.4.14.jar!/:4.4.14]\n    at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:272) ~[httpclient-4.5.13.jar!/:4.5.13]\n    at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186) ~[httpclient-4.5.13.jar!/:4.5.13]\n    at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89) ~[httpclient-4.5.13.jar!/:4.5.13]\n    at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:110) ~[httpclient-4.5.13.jar!/:4.5.13]\n    at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185) ~[httpclient-4.5.13.jar!/:4.5.13]\n    at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:83) ~[httpclient-4.5.13.jar!/:4.5.13]\n    at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56) ~[httpclient-4.5.13.jar!/:4.5.13]\n    at org.springframework.http.client.HttpComponentsClientHttpRequest.executeInternal(HttpComponentsClientHttpRequest.java:87) ~[spring-web-5.3.10.jar!/:5.3.10]\n    at org.springframework.http.client.AbstractBufferingClientHttpRequest.executeInternal(AbstractBufferingClientHttpRequest.java:48) ~[spring-web-5.3.10.jar!/:5.3.10]\n    at org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:66) ~[spring-web-5.3.10.jar!/:5.3.10]\n    at org.springframework.http.client.BufferingClientHttpRequestWrapper.executeInternal(BufferingClientHttpRequestWrapper.java:63) ~[spring-web-5.3.10.jar!/:5.3.10]\n    at org.springframework.http.client.AbstractBufferingClientHttpRequest.executeInternal(AbstractBufferingClientHttpRequest.java:48) ~[spring-web-5.3.10.jar!/:5.3.10]\n    at org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:66) ~[spring-web-5.3.10.jar!/:5.3.10]\n    at org.springframework.http.client.InterceptingClientHttpRequest$InterceptingRequestExecution.execute(InterceptingClientHttpRequest.java:109) ~[spring-web-5.3.10.jar!/:5.3.10]\n    at com.venuetize.airship.utils.VzRequestResponseLoggingInterceptor.intercept(VzRequestResponseLoggingInterceptor.java:24) ~[classes!/:0.0.1-SNAPSHOT]\n    at org.springframework.http.client.InterceptingClientHttpRequest$InterceptingRequestExecution.execute(InterceptingClientHttpRequest.java:93) ~[spring-web-5.3.10.jar!/:5.3.10]\n    at com.venuetize.xtrace.interceptor.XTraceIdForwardingInterceptor.intercept(XTraceIdForwardingInterceptor.java:77) ~[xtrace-0.5.1.jar!/:?]\n    at org.springframework.http.client.InterceptingClientHttpRequest$InterceptingRequestExecution.execute(InterceptingClientHttpRequest.java:93) ~[spring-web-5.3.10.jar!/:5.3.10]\n    at org.springframework.http.client.InterceptingClientHttpRequest.executeInternal(InterceptingClientHttpRequest.java:77) ~[spring-web-5.3.10.jar!/:5.3.10]\n    at org.springframework.http.client.AbstractBufferingClientHttpRequest.executeInternal(AbstractBufferingClientHttpRequest.java:48) ~[spring-web-5.3.10.jar!/:5.3.10]\n    at org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:66) ~[spring-web-5.3.10.jar!/:5.3.10]\n    at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:776) ~[spring-web-5.3.10.jar!/:5.3.10]\n    ... 57 more\n</code></pre>\n<p>The only observable pattern with multiple days of testing is, if I wait few hours or days between testing I'll see this exception but then the subsequent calls work fine. So it seems to be some networking issue and would like some guidance into this.</p>\n"},{"tags":["java","apache-tika","lucee"],"answers":[{"comments":[{"owner":{"account_id":8177368,"reputation":945,"user_id":6155721,"accept_rate":0,"display_name":"asimkon"},"score":0,"creation_date":1652983797,"post_id":72307594,"comment_id":127746162,"body_markdown":"Hello! I have used the JavaLoader version (apache-tika-1.18.jar) and works without any problem for me but the problem is to embed it into the existing apache tika plugin without changing the code (https://github.com/pixl8/preside-ext-tika). Regarding OSGI bundles, i follow your instructions but nothing happens perhaps due to inexperience.I need a ready solution and i have found a repository, but i am not sure if it&#39;s compatible with lucee (https://repo1.maven.org/maven2/org/apache/tika/tika-bundle-standard/). As previously stated,i do not want to change the existing plugin code. Thanks a lot!","body":"Hello! I have used the JavaLoader version (apache-tika-1.18.jar) and works without any problem for me but the problem is to embed it into the existing apache tika plugin without changing the code (<a href=\"https://github.com/pixl8/preside-ext-tika\" rel=\"nofollow noreferrer\">github.com/pixl8/preside-ext-tika</a>). Regarding OSGI bundles, i follow your instructions but nothing happens perhaps due to inexperience.I need a ready solution and i have found a repository, but i am not sure if it&#39;s compatible with lucee (<a href=\"https://repo1.maven.org/maven2/org/apache/tika/tika-bundle-standard/\" rel=\"nofollow noreferrer\">repo1.maven.org/maven2/org/apache/tika/tika-bundle-standard</a>&zwnj;&#8203;). As previously stated,i do not want to change the existing plugin code. Thanks a lot!"},{"owner":{"account_id":70617,"reputation":2353,"user_id":204620,"display_name":"CfSimplicity"},"score":0,"creation_date":1652989275,"post_id":72307594,"comment_id":127747852,"body_markdown":"As I said, I couldn&#39;t get the pre-built tika-bundle (in the repo you found) to work in Lucee due to an osgi &quot;wiring&quot; error. Modifying the tika-app jar and loading it via osgiLoader as I described does work. The code is tested. Make sure all of the files are in the same directory: `extractor.cfc`, `index.cfm`, `osgiLoader.cfc`, and `tika-app-1.28.2.jar` (modified) and the doc you want to parse.","body":"As I said, I couldn&#39;t get the pre-built tika-bundle (in the repo you found) to work in Lucee due to an osgi &quot;wiring&quot; error. Modifying the tika-app jar and loading it via osgiLoader as I described does work. The code is tested. Make sure all of the files are in the same directory: <code>extractor.cfc</code>, <code>index.cfm</code>, <code>osgiLoader.cfc</code>, and <code>tika-app-1.28.2.jar</code> (modified) and the doc you want to parse."},{"owner":{"account_id":8177368,"reputation":945,"user_id":6155721,"accept_rate":0,"display_name":"asimkon"},"score":0,"creation_date":1653034086,"post_id":72307594,"comment_id":127756774,"body_markdown":"Could you mind take a look at this specific tika jar file  (manifest.ml something may be missing) as it can not get loaded via bundle-jar gui? (https://wetransfer.com/downloads/3fbf2577baec48ef7652fba11accc24e20220520075837/7b5f30). I just found another interesting article (https://dev.lucee.org/t/external-jar-file-problem-tika/6525/6).  Regards","body":"Could you mind take a look at this specific tika jar file  (manifest.ml something may be missing) as it can not get loaded via bundle-jar gui? (<a href=\"https://wetransfer.com/downloads/3fbf2577baec48ef7652fba11accc24e20220520075837/7b5f30\" rel=\"nofollow noreferrer\">wetransfer.com/downloads/&hellip;</a>). I just found another interesting article (<a href=\"https://dev.lucee.org/t/external-jar-file-problem-tika/6525/6\" rel=\"nofollow noreferrer\">dev.lucee.org/t/external-jar-file-problem-tika/6525/6</a>).  Regards"},{"owner":{"account_id":70617,"reputation":2353,"user_id":204620,"display_name":"CfSimplicity"},"score":0,"creation_date":1653043716,"post_id":72307594,"comment_id":127760035,"body_markdown":"The jar file is fine but it is version 1.28 whereas as the code I posted was for 1.28.2. If you change the `tikaBundle.version` and `tikaBundle.path` in the index.cfm script it should work (does for me with the your modified jar).","body":"The jar file is fine but it is version 1.28 whereas as the code I posted was for 1.28.2. If you change the <code>tikaBundle.version</code> and <code>tikaBundle.path</code> in the index.cfm script it should work (does for me with the your modified jar)."},{"owner":{"account_id":70617,"reputation":2353,"user_id":204620,"display_name":"CfSimplicity"},"score":0,"creation_date":1653060756,"post_id":72307594,"comment_id":127766714,"body_markdown":"I&#39;ve created a basic wrapper on Github which you should be able to use without having to do any of the OSGi preparation and loading yourself: https://github.com/cfsimplicity/lucee-tika","body":"I&#39;ve created a basic wrapper on Github which you should be able to use without having to do any of the OSGi preparation and loading yourself: <a href=\"https://github.com/cfsimplicity/lucee-tika\" rel=\"nofollow noreferrer\">github.com/cfsimplicity/lucee-tika</a>"},{"owner":{"account_id":8177368,"reputation":945,"user_id":6155721,"accept_rate":0,"display_name":"asimkon"},"score":0,"creation_date":1653121019,"post_id":72307594,"comment_id":127777644,"body_markdown":"I used my own OSGI version and it runs OK and definitely your basic wrapper that you just prepared, no doubt.The problem that i have got is that i use an existing framework (PresideCMS) and not free CF code that takes specific requirements during file upload (https://github.com/pixl8/preside-ext-tika) such as filecontent via java.io.ByteArrayInputStream and not filename.If you could see carefully it&#39;s code and prepare a custom basic wrapper according to its requirements, it would free my hands. Now your solutions are OK for pure CF, but using PresideCMS i get error during file upload. Regards","body":"I used my own OSGI version and it runs OK and definitely your basic wrapper that you just prepared, no doubt.The problem that i have got is that i use an existing framework (PresideCMS) and not free CF code that takes specific requirements during file upload (<a href=\"https://github.com/pixl8/preside-ext-tika\" rel=\"nofollow noreferrer\">github.com/pixl8/preside-ext-tika</a>) such as filecontent via java.io.ByteArrayInputStream and not filename.If you could see carefully it&#39;s code and prepare a custom basic wrapper according to its requirements, it would free my hands. Now your solutions are OK for pure CF, but using PresideCMS i get error during file upload. Regards"},{"owner":{"account_id":70617,"reputation":2353,"user_id":204620,"display_name":"CfSimplicity"},"score":0,"creation_date":1653130326,"post_id":72307594,"comment_id":127779336,"body_markdown":"I&#39;m not familiar with Preside and would recommend you raise this issue with Dom who&#39;s the maintainer. But I&#39;ve added a possible way of hacking the existing extension. Not tested as I don&#39;t use Preside.","body":"I&#39;m not familiar with Preside and would recommend you raise this issue with Dom who&#39;s the maintainer. But I&#39;ve added a possible way of hacking the existing extension. Not tested as I don&#39;t use Preside."},{"owner":{"account_id":8177368,"reputation":945,"user_id":6155721,"accept_rate":0,"display_name":"asimkon"},"score":0,"creation_date":1653130738,"post_id":72307594,"comment_id":127779396,"body_markdown":"I have already spoken  with Dom and it is up to me now as this specific extension is not in use any more. Please visit https://presidecms-slack.herokuapp.com/ for more information regarding this issue between me and Dom. I expect honestly your solution as it would help me a lot! Regards","body":"I have already spoken  with Dom and it is up to me now as this specific extension is not in use any more. Please visit <a href=\"https://presidecms-slack.herokuapp.com/\" rel=\"nofollow noreferrer\">presidecms-slack.herokuapp.com</a> for more information regarding this issue between me and Dom. I expect honestly your solution as it would help me a lot! Regards"},{"owner":{"account_id":70617,"reputation":2353,"user_id":204620,"display_name":"CfSimplicity"},"score":0,"creation_date":1653131137,"post_id":72307594,"comment_id":127779471,"body_markdown":"I don&#39;t have access to the Preside Slack. Did you try the hack I added to my answer?","body":"I don&#39;t have access to the Preside Slack. Did you try the hack I added to my answer?"},{"owner":{"account_id":8177368,"reputation":945,"user_id":6155721,"accept_rate":0,"display_name":"asimkon"},"score":0,"creation_date":1653131389,"post_id":72307594,"comment_id":127779512,"body_markdown":"Sorry I just saw that you just updated your reply now! I will definitely try it and let you know by tomorrow if it&#39;s ok. Thank you a lot!!!","body":"Sorry I just saw that you just updated your reply now! I will definitely try it and let you know by tomorrow if it&#39;s ok. Thank you a lot!!!"},{"owner":{"account_id":8177368,"reputation":945,"user_id":6155721,"accept_rate":0,"display_name":"asimkon"},"score":0,"creation_date":1653208696,"post_id":72307594,"comment_id":127791320,"body_markdown":"Hello!I think that something wrong is happening with this plugin as i use hard-coded value for result.text=&quot;blabla&quot; and even delete everything except return result in _parse function and nothing is finally returned as DB result.Since no support is offered for this specific plugin, i do not know what to do.Regards","body":"Hello!I think that something wrong is happening with this plugin as i use hard-coded value for result.text=&quot;blabla&quot; and even delete everything except return result in _parse function and nothing is finally returned as DB result.Since no support is offered for this specific plugin, i do not know what to do.Regards"},{"owner":{"account_id":8177368,"reputation":945,"user_id":6155721,"accept_rate":0,"display_name":"asimkon"},"score":0,"creation_date":1653209701,"post_id":72307594,"comment_id":127791468,"body_markdown":"This is for getText() in https://github.com/pixl8/Preside-CMS/blob/stable/system/services/assetManager/DocumentMetadataService.cfc. It&#39;s mentioned via comments. Regards","body":"This is for getText() in <a href=\"https://github.com/pixl8/Preside-CMS/blob/stable/system/services/assetManager/DocumentMetadataService.cfc\" rel=\"nofollow noreferrer\">github.com/pixl8/Preside-CMS/blob/stable/system/services/&hellip;</a>. It&#39;s mentioned via comments. Regards"},{"owner":{"account_id":70617,"reputation":2353,"user_id":204620,"display_name":"CfSimplicity"},"score":0,"creation_date":1653215406,"post_id":72307594,"comment_id":127792404,"body_markdown":"Sorry, I can&#39;t help with Preside, I&#39;m not familiar with it. Can&#39;t you just use my wrapper to extract text from your files after they&#39;ve been uploaded via Preside?","body":"Sorry, I can&#39;t help with Preside, I&#39;m not familiar with it. Can&#39;t you just use my wrapper to extract text from your files after they&#39;ve been uploaded via Preside?"},{"owner":{"account_id":8177368,"reputation":945,"user_id":6155721,"accept_rate":0,"display_name":"asimkon"},"score":0,"creation_date":1653215852,"post_id":72307594,"comment_id":127792477,"body_markdown":"That sounds good, but I do not know how to do it via preside framework. psys_asset is system object and not custom object that all information for each asset is stored. Regards","body":"That sounds good, but I do not know how to do it via preside framework. psys_asset is system object and not custom object that all information for each asset is stored. Regards"},{"owner":{"account_id":8177368,"reputation":945,"user_id":6155721,"accept_rate":0,"display_name":"asimkon"},"score":0,"creation_date":1653419482,"post_id":72307594,"comment_id":127847230,"body_markdown":"If I install lucee via commandbox (in this case presidecms), where I see my log files (exact log location) for cfdump output=console. I just need to debug (dump output=console) result variable of _parse function each time is called. If I dump result variable together with function name, it would help me a lot. Regards","body":"If I install lucee via commandbox (in this case presidecms), where I see my log files (exact log location) for cfdump output=console. I just need to debug (dump output=console) result variable of _parse function each time is called. If I dump result variable together with function name, it would help me a lot. Regards"},{"owner":{"account_id":70617,"reputation":2353,"user_id":204620,"display_name":"CfSimplicity"},"score":0,"creation_date":1653491591,"post_id":72307594,"comment_id":127866759,"body_markdown":"For general support with Lucee/commandbox you&#39;re best heading over to http://cfml-slack.herokuapp.com/ or https://dev.lucee.org/","body":"For general support with Lucee/commandbox you&#39;re best heading over to <a href=\"http://cfml-slack.herokuapp.com/\" rel=\"nofollow noreferrer\">cfml-slack.herokuapp.com</a> or <a href=\"https://dev.lucee.org/\" rel=\"nofollow noreferrer\">dev.lucee.org</a>"}],"tags":[],"owner":{"account_id":70617,"reputation":2353,"user_id":204620,"display_name":"CfSimplicity"},"comment_count":16,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1653130232,"creation_date":1652975548,"answer_id":72307594,"question_id":72302812,"body_markdown":"I think the problem is a class clash: The Lucee core engine already loads a version of Tika meaning the one you point to is ignored. But the loaded version doesn&#39;t behave as expected, returning empty strings as you&#39;ve seen.\r\n\r\nI&#39;ve solved this by using OSGi to load the desired Tika version. This involves editing the Manifest of the tika-app jar to include basic OSGi metadata and then loading it via my [osgiLoader][1]\r\n\r\nThere is a pre-built [Tika bundle][2] available but I haven&#39;t been able to get it to work with Lucee.\r\n\r\nHere&#39;s how to convert the latest `tika-app` jar to OSGi:\r\n\r\n1. open the &quot;tika-app-1.28.2.jar&quot; with 7-zip\r\n2. open META-INF then select MANIFEST.MF and press F4 to open it in a text editor\r\n3. add the following to the end of the file:\r\n```\r\nBundle-Name: Apache Tika App Bundle\r\nBundle-SymbolicName: apache-tika-app-bundle\r\nBundle-Description: Apache Tika App jar converted to an OSGi bundle\r\nBundle-ManifestVersion: 2\r\nBundle-Version: 1.28.2\r\nBundle-ClassPath: .,tika-app-1.28.2.jar\r\n```\r\n4. Save choosing to update when prompted.\r\n\r\nYou can then call the jar using osgiLoader as follows:\r\n\r\n**extractor.cfc**\r\n```\r\ncomponent{\r\n\r\n\tproperty name=&quot;loader&quot; type=&quot;object&quot;;\r\n\tproperty name=&quot;tikaBundle&quot; type=&quot;struct&quot;;\r\n\r\n\tpublic extractor function init( required object loader, required struct tikaBundle ){\r\n\t\tvariables.loader = arguments.loader\r\n\t\tvariables.tikaBundle = arguments.tikaBundle\r\n\t\treturn this\r\n\t}\r\n\r\n\tpublic string function parseToString( required string filePath ){\r\n\t\ttry{\r\n\t\t\tvar fileStream = CreateObject( &quot;java&quot;, &quot;java.io.FileInputStream&quot; ).init( JavaCast( &quot;string&quot;, arguments.filePath ) )\r\n\t\t\tvar tikaObject = loader.loadClass( &quot;org.apache.tika.Tika&quot;, tikaBundle.path, tikaBundle.name, tikaBundle.version )\r\n\t\t\tvar result = tikaObject.parseToString( fileStream )\r\n\t\t}\r\n\t\tfinally{\r\n\t\t\tfileStream.close()\r\n\t\t}\r\n\t\treturn result\r\n\t}\r\n\r\n}\r\n```\r\n(The following script assumes `extractor.cfc`, the modified Tika jar, the [`osgiLoader.cfc`][3] and the document to be processed are in the same directory.)\r\n\r\n**index.cfm**\r\n```\r\n&lt;cfscript&gt;\r\ndocPath = ExpandPath( &quot;test.pdf&quot; )\r\nloader = New osgiLoader()\r\ntikaBundle = {\r\n\tversion: &quot;1.28.2&quot;\r\n\t,name: &quot;apache-tika-app-bundle&quot;\r\n\t,path: ExpandPath( &quot;tika-app-1.28.2.jar&quot; )\r\n}\r\nextractor = New extractor( loader, tikaBundle )\r\nresult = extractor.parseToString( docPath )\r\ndump( result )\r\n&lt;/cfscript&gt;\r\n```\r\n\r\nAnother way to get the right version loaded is to use [JavaLoader][4]. For some reason I couldn&#39;t get it to work with the latest `tika-app` jar (`1.28.2`), but `1.19.1` does seem to work.\r\n\r\nHacking the existing extension\r\n------------------------------\r\nI would advise you to raise an issue with Preside to change their extension to avoid the clash, but as a temporary hack you could try amending it yourself as follows:\r\n\r\nFirst, add your modified Tika bundle and the `osgiLoader.cfc` to the `/preside-ext-tika/services/` directory.\r\n\r\nNext, change line 14 of `DocumentMetadataService.cfc` so the name of the Tika jar path matches your modified bundle.\r\n```\r\n_setTikaJarPath( GetDirectoryFromPath( GetCurrentTemplatePath( ) ) &amp; &quot;tika-app-1.28.2.jar&quot; );\r\n```\r\n\r\nThen, modify lines 33-35 of the same cfc to replace:\r\n```\r\nvar parser = CreateObject( &quot;java&quot;, &quot;org.apache.tika.parser.AutoDetectParser&quot;, jarPath );\r\nvar ch     = CreateObject( &quot;java&quot;, &quot;org.apache.tika.sax.BodyContentHandler&quot; , jarPath ).init(-1);\r\nvar md     = CreateObject( &quot;java&quot;, &quot;org.apache.tika.metadata.Metadata&quot;      , jarPath ).init();\r\n```\r\nwith the following:\r\n```\r\nvar loader = New osgiLoader();\r\nvar tikaBundle = { version: &quot;1.28.2&quot;, name: &quot;apache-tika-app-bundle&quot; };\r\n\r\nvar parser = loader.loadClass( &quot;org.apache.tika.parser.AutoDetectParser&quot;, jarPath, tikaBundle.name, tikaBundle.version )\r\nvar ch     = loader.loadClass( &quot;org.apache.tika.sax.BodyContentHandler&quot; , jarPath, tikaBundle.name, tikaBundle.version ).init(-1)\r\nvar md     = loader.loadClass( &quot;org.apache.tika.metadata.Metadata&quot;      , jarPath, tikaBundle.name, tikaBundle.version ).init()\r\n```\r\nNB: I don&#39;t have Preside so can&#39;t test it in context.\r\n\r\n  [1]: https://github.com/cfsimplicity/luceeOsgiLoader\r\n  [2]: https://mvnrepository.com/artifact/org.apache.tika/tika-bundle\r\n  [3]: https://github.com/cfsimplicity/luceeOsgiLoader/blob/main/osgiLoader.cfc\r\n  [4]: https://github.com/markmandel/JavaLoader","title":"Why am I unable to extract text via Apache Tika using Lucee?","body":"<p>I think the problem is a class clash: The Lucee core engine already loads a version of Tika meaning the one you point to is ignored. But the loaded version doesn't behave as expected, returning empty strings as you've seen.</p>\n<p>I've solved this by using OSGi to load the desired Tika version. This involves editing the Manifest of the tika-app jar to include basic OSGi metadata and then loading it via my <a href=\"https://github.com/cfsimplicity/luceeOsgiLoader\" rel=\"nofollow noreferrer\">osgiLoader</a></p>\n<p>There is a pre-built <a href=\"https://mvnrepository.com/artifact/org.apache.tika/tika-bundle\" rel=\"nofollow noreferrer\">Tika bundle</a> available but I haven't been able to get it to work with Lucee.</p>\n<p>Here's how to convert the latest <code>tika-app</code> jar to OSGi:</p>\n<ol>\n<li>open the &quot;tika-app-1.28.2.jar&quot; with 7-zip</li>\n<li>open META-INF then select MANIFEST.MF and press F4 to open it in a text editor</li>\n<li>add the following to the end of the file:</li>\n</ol>\n<pre><code>Bundle-Name: Apache Tika App Bundle\nBundle-SymbolicName: apache-tika-app-bundle\nBundle-Description: Apache Tika App jar converted to an OSGi bundle\nBundle-ManifestVersion: 2\nBundle-Version: 1.28.2\nBundle-ClassPath: .,tika-app-1.28.2.jar\n</code></pre>\n<ol start=\"4\">\n<li>Save choosing to update when prompted.</li>\n</ol>\n<p>You can then call the jar using osgiLoader as follows:</p>\n<p><strong>extractor.cfc</strong></p>\n<pre><code>component{\n\n    property name=&quot;loader&quot; type=&quot;object&quot;;\n    property name=&quot;tikaBundle&quot; type=&quot;struct&quot;;\n\n    public extractor function init( required object loader, required struct tikaBundle ){\n        variables.loader = arguments.loader\n        variables.tikaBundle = arguments.tikaBundle\n        return this\n    }\n\n    public string function parseToString( required string filePath ){\n        try{\n            var fileStream = CreateObject( &quot;java&quot;, &quot;java.io.FileInputStream&quot; ).init( JavaCast( &quot;string&quot;, arguments.filePath ) )\n            var tikaObject = loader.loadClass( &quot;org.apache.tika.Tika&quot;, tikaBundle.path, tikaBundle.name, tikaBundle.version )\n            var result = tikaObject.parseToString( fileStream )\n        }\n        finally{\n            fileStream.close()\n        }\n        return result\n    }\n\n}\n</code></pre>\n<p>(The following script assumes <code>extractor.cfc</code>, the modified Tika jar, the <a href=\"https://github.com/cfsimplicity/luceeOsgiLoader/blob/main/osgiLoader.cfc\" rel=\"nofollow noreferrer\"><code>osgiLoader.cfc</code></a> and the document to be processed are in the same directory.)</p>\n<p><strong>index.cfm</strong></p>\n<pre><code>&lt;cfscript&gt;\ndocPath = ExpandPath( &quot;test.pdf&quot; )\nloader = New osgiLoader()\ntikaBundle = {\n    version: &quot;1.28.2&quot;\n    ,name: &quot;apache-tika-app-bundle&quot;\n    ,path: ExpandPath( &quot;tika-app-1.28.2.jar&quot; )\n}\nextractor = New extractor( loader, tikaBundle )\nresult = extractor.parseToString( docPath )\ndump( result )\n&lt;/cfscript&gt;\n</code></pre>\n<p>Another way to get the right version loaded is to use <a href=\"https://github.com/markmandel/JavaLoader\" rel=\"nofollow noreferrer\">JavaLoader</a>. For some reason I couldn't get it to work with the latest <code>tika-app</code> jar (<code>1.28.2</code>), but <code>1.19.1</code> does seem to work.</p>\n<h2>Hacking the existing extension</h2>\n<p>I would advise you to raise an issue with Preside to change their extension to avoid the clash, but as a temporary hack you could try amending it yourself as follows:</p>\n<p>First, add your modified Tika bundle and the <code>osgiLoader.cfc</code> to the <code>/preside-ext-tika/services/</code> directory.</p>\n<p>Next, change line 14 of <code>DocumentMetadataService.cfc</code> so the name of the Tika jar path matches your modified bundle.</p>\n<pre><code>_setTikaJarPath( GetDirectoryFromPath( GetCurrentTemplatePath( ) ) &amp; &quot;tika-app-1.28.2.jar&quot; );\n</code></pre>\n<p>Then, modify lines 33-35 of the same cfc to replace:</p>\n<pre><code>var parser = CreateObject( &quot;java&quot;, &quot;org.apache.tika.parser.AutoDetectParser&quot;, jarPath );\nvar ch     = CreateObject( &quot;java&quot;, &quot;org.apache.tika.sax.BodyContentHandler&quot; , jarPath ).init(-1);\nvar md     = CreateObject( &quot;java&quot;, &quot;org.apache.tika.metadata.Metadata&quot;      , jarPath ).init();\n</code></pre>\n<p>with the following:</p>\n<pre><code>var loader = New osgiLoader();\nvar tikaBundle = { version: &quot;1.28.2&quot;, name: &quot;apache-tika-app-bundle&quot; };\n\nvar parser = loader.loadClass( &quot;org.apache.tika.parser.AutoDetectParser&quot;, jarPath, tikaBundle.name, tikaBundle.version )\nvar ch     = loader.loadClass( &quot;org.apache.tika.sax.BodyContentHandler&quot; , jarPath, tikaBundle.name, tikaBundle.version ).init(-1)\nvar md     = loader.loadClass( &quot;org.apache.tika.metadata.Metadata&quot;      , jarPath, tikaBundle.name, tikaBundle.version ).init()\n</code></pre>\n<p>NB: I don't have Preside so can't test it in context.</p>\n"}],"owner":{"account_id":8177368,"reputation":945,"user_id":6155721,"accept_rate":0,"display_name":"asimkon"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":307,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":72307594,"answer_count":1,"score":0,"last_activity_date":1684336353,"creation_date":1652955541,"question_id":72302812,"body_markdown":"I would like to extract text from pdf, docx etc via Lucee 5+ (5.2.9), but unfortunately I get empty result set. I have used several [Apache Tika versions][1] (runnable jar with Java 1.8.0) that might fit to my specific Lucee and Java requirements, but the result set always remains empty.   \r\n\r\n**exract.cfc**\r\n\r\n    component {\r\n        \r\n        public any function init() {\r\n    \r\n        \t_setTikaJarPath( GetDirectoryFromPath( GetCurrentTemplatePath( ) ) &amp; &quot;tika-app-1.19.1.jar&quot; );\r\n    \r\n            return this;\r\n    \r\n        }\r\n    \r\n    \r\n        private struct function doParse( required any fileContent, boolean includeMeta=true, boolean includeText=true ) {\r\n    \t\tvar result  = {};\r\n    \t\tvar is      = &quot;&quot;;\r\n    \t\tvar jarPath = _getTikaJarPath();\r\n    \r\n    \t\tif ( IsBinary( arguments.fileContent ) ) {\r\n    \t\t\tis = CreateObject( &quot;java&quot;, &quot;java.io.ByteArrayInputStream&quot; ).init( arguments.fileContent );\r\n    \t\t} else {\r\n    \t\t\t// TODO, support plain string input (i.e. html)\r\n    \t\t\treturn {};\r\n    \t\t}\r\n    \r\n    \t\ttry {\r\n    \t\t\tvar parser = CreateObject( &quot;java&quot;, &quot;org.apache.tika.parser.AutoDetectParser&quot;, jarPath );\r\n    \t\t\tvar ch     = CreateObject( &quot;java&quot;, &quot;org.apache.tika.sax.BodyContentHandler&quot; , jarPath ).init(-1);\r\n    \t\t\tvar md     = CreateObject( &quot;java&quot;, &quot;org.apache.tika.metadata.Metadata&quot;      , jarPath ).init();\r\n    \r\n    \t\t\tparser.parse( is, ch, md );\r\n    \r\n    \t\t\tif ( arguments.includeMeta ) {\r\n    \t\t\t\tresult.metadata = {};\r\n    \r\n    \t\t\t\tfor( var key in md.names() ) {\r\n    \t\t\t\t\tvar mdval = md.get( key );\r\n    \t\t\t\t\tif ( !isNull( mdval ) ) {\r\n    \t\t\t\t\t\tresult.metadata[ key ] = _removeNonUnicodeChars( mdval );\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \r\n    \t\t\tif ( arguments.includeText ) {\r\n    \t\t\t\tresult.text = _removeNonUnicodeChars( ch.toString() );\r\n    \t\t\t}\r\n    \r\n    \t\t} catch( any e ) {\r\n    \t\t\tresult = { error = e };\r\n    \t\t}\r\n    \r\n    \t\treturn result;\r\n    }\r\n    \r\n    \r\n        public function read(required string filename) {\r\n    \t\tvar result = {};\r\n    \r\n    \t\tif(!fileExists(filename)) {\r\n    \t\t\tresult.error = &quot;#filename# does not exist.&quot;;\r\n    \t\t\treturn result;\r\n    \t\t};\r\n    \r\n    \t\tvar f = createObject(&quot;java&quot;, &quot;java.io.File&quot;).init(filename);\r\n    \t\tvar fis = createObject(&quot;java&quot;,&quot;java.io.FileInputStream&quot;).init(f);\r\n    \r\n    \t\ttry {\r\n    \t\t\tresult = doParse(fis);\r\n    \t\t} catch(any e) {\r\n    \t\t\tresult.error = e;\r\n    \t\t}\r\n    \t\tfis.close();\r\n    \t\treturn result;\r\n    \t}\r\n    \r\n    \tprivate string function _removeNonUnicodeChars( required string potentiallyDirtyString ) {\r\n    \t\treturn ReReplace( arguments.potentiallyDirtyString, &quot;[^\\x20-\\x7E]&quot;, &quot;&quot;, &quot;all&quot; );\r\n    \t}\r\n    \r\n    // GETTERS AND SETTERS\r\n    \tprivate string function _getTikaJarPath() {\r\n    \t\treturn _tikaJarPath;\r\n    \t}\r\n    \tprivate void function _setTikaJarPath( required string tikaJarPath ) {\r\n    \t\t_tikaJarPath = arguments.tikaJarPath;\r\n    }\r\n    \r\n    \r\n    }\r\n\r\nand the code that i use to run it\r\n\r\n    &lt;cfset takis = new exract()&gt;\r\n    &lt;cfset files = directoryList(expandPath(&quot;./sources&quot;))&gt;\r\n    &lt;cfloop index=&quot;f&quot; array=&quot;#files#&quot;&gt;\r\n    \t&lt;cfif not findNoCase(&quot;.DS_Store&quot;,f)&gt;\r\n    \t\t&lt;cfdump var=&quot;#takis.read(f)#&quot; label=&quot;#f#&quot;&gt;\r\n    \t&lt;/cfif&gt;\r\n    &lt;/cfloop&gt;\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://repo1.maven.org/maven2/org/apache/tika/tika-app/\r\n  [2]: https://i.stack.imgur.com/cyI9W.png","title":"Why am I unable to extract text via Apache Tika using Lucee?","body":"<p>I would like to extract text from pdf, docx etc via Lucee 5+ (5.2.9), but unfortunately I get empty result set. I have used several <a href=\"https://repo1.maven.org/maven2/org/apache/tika/tika-app/\" rel=\"nofollow noreferrer\">Apache Tika versions</a> (runnable jar with Java 1.8.0) that might fit to my specific Lucee and Java requirements, but the result set always remains empty.</p>\n<p><strong>exract.cfc</strong></p>\n<pre><code>component {\n    \n    public any function init() {\n\n        _setTikaJarPath( GetDirectoryFromPath( GetCurrentTemplatePath( ) ) &amp; &quot;tika-app-1.19.1.jar&quot; );\n\n        return this;\n\n    }\n\n\n    private struct function doParse( required any fileContent, boolean includeMeta=true, boolean includeText=true ) {\n        var result  = {};\n        var is      = &quot;&quot;;\n        var jarPath = _getTikaJarPath();\n\n        if ( IsBinary( arguments.fileContent ) ) {\n            is = CreateObject( &quot;java&quot;, &quot;java.io.ByteArrayInputStream&quot; ).init( arguments.fileContent );\n        } else {\n            // TODO, support plain string input (i.e. html)\n            return {};\n        }\n\n        try {\n            var parser = CreateObject( &quot;java&quot;, &quot;org.apache.tika.parser.AutoDetectParser&quot;, jarPath );\n            var ch     = CreateObject( &quot;java&quot;, &quot;org.apache.tika.sax.BodyContentHandler&quot; , jarPath ).init(-1);\n            var md     = CreateObject( &quot;java&quot;, &quot;org.apache.tika.metadata.Metadata&quot;      , jarPath ).init();\n\n            parser.parse( is, ch, md );\n\n            if ( arguments.includeMeta ) {\n                result.metadata = {};\n\n                for( var key in md.names() ) {\n                    var mdval = md.get( key );\n                    if ( !isNull( mdval ) ) {\n                        result.metadata[ key ] = _removeNonUnicodeChars( mdval );\n                    }\n                }\n            }\n\n            if ( arguments.includeText ) {\n                result.text = _removeNonUnicodeChars( ch.toString() );\n            }\n\n        } catch( any e ) {\n            result = { error = e };\n        }\n\n        return result;\n}\n\n\n    public function read(required string filename) {\n        var result = {};\n\n        if(!fileExists(filename)) {\n            result.error = &quot;#filename# does not exist.&quot;;\n            return result;\n        };\n\n        var f = createObject(&quot;java&quot;, &quot;java.io.File&quot;).init(filename);\n        var fis = createObject(&quot;java&quot;,&quot;java.io.FileInputStream&quot;).init(f);\n\n        try {\n            result = doParse(fis);\n        } catch(any e) {\n            result.error = e;\n        }\n        fis.close();\n        return result;\n    }\n\n    private string function _removeNonUnicodeChars( required string potentiallyDirtyString ) {\n        return ReReplace( arguments.potentiallyDirtyString, &quot;[^\\x20-\\x7E]&quot;, &quot;&quot;, &quot;all&quot; );\n    }\n\n// GETTERS AND SETTERS\n    private string function _getTikaJarPath() {\n        return _tikaJarPath;\n    }\n    private void function _setTikaJarPath( required string tikaJarPath ) {\n        _tikaJarPath = arguments.tikaJarPath;\n}\n\n\n}\n</code></pre>\n<p>and the code that i use to run it</p>\n<pre><code>&lt;cfset takis = new exract()&gt;\n&lt;cfset files = directoryList(expandPath(&quot;./sources&quot;))&gt;\n&lt;cfloop index=&quot;f&quot; array=&quot;#files#&quot;&gt;\n    &lt;cfif not findNoCase(&quot;.DS_Store&quot;,f)&gt;\n        &lt;cfdump var=&quot;#takis.read(f)#&quot; label=&quot;#f#&quot;&gt;\n    &lt;/cfif&gt;\n&lt;/cfloop&gt;\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/cyI9W.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cyI9W.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","spring-boot","hibernate","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":12445560,"reputation":231,"user_id":9061851,"display_name":"Pavel D."},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1684336127,"creation_date":1684334384,"answer_id":76273317,"question_id":76272961,"body_markdown":"Your first solution with a single `@Transactional` method called from an async thread is actually a good solution, since all the operations performed in a single transaction.\r\nAs a side note, you don&#39;t need to call `residentsRepository.saveAll(residents)` when modifying exiting entity instances fetched by Hibernate inside a transaction. `save` is for new or &quot;detached&quot; entity instances (fetched previously, outside current transaction). See: https://stackoverflow.com/a/46708295\r\n\r\nEnabling batching in properties as you did is also very important. Batch size usually can be larger. I use these setting:\r\n```\r\nspring.jpa.properties.hibernate.jdbc.batch_size=200\r\nspring.jpa.properties.hibernate.order_inserts=true\r\nspring.jpa.properties.hibernate.order_updates=true\r\nspring.jpa.properties.hibernate.batch_versioned_data=true\r\n```\r\n\r\nYou don&#39;t show the logic inside `updateResidents()`. If this logic is simple enough, e.g. increment counter column for each, or set some constant value in each etc., you can get much better performance by using an update query in the repository, either JPQL or native. Something like this:\r\n```\r\n@Modifying\r\n@Query(&quot;update Resident r set r.someCounter = r.someCounter + 1, r.lastUpdate =:timestamp where r.cityId =:cityId&quot;)\r\nvoid updateResident(@Param(&quot;cityId&quot;) String cityId, @Param(&quot;timestamp&quot;) long timestamp);\r\n```","title":"Strategies to fetch and update entities using CompletableFuture in spring boot with hibernate","body":"<p>Your first solution with a single <code>@Transactional</code> method called from an async thread is actually a good solution, since all the operations performed in a single transaction.\nAs a side note, you don't need to call <code>residentsRepository.saveAll(residents)</code> when modifying exiting entity instances fetched by Hibernate inside a transaction. <code>save</code> is for new or &quot;detached&quot; entity instances (fetched previously, outside current transaction). See: <a href=\"https://stackoverflow.com/a/46708295\">https://stackoverflow.com/a/46708295</a></p>\n<p>Enabling batching in properties as you did is also very important. Batch size usually can be larger. I use these setting:</p>\n<pre><code>spring.jpa.properties.hibernate.jdbc.batch_size=200\nspring.jpa.properties.hibernate.order_inserts=true\nspring.jpa.properties.hibernate.order_updates=true\nspring.jpa.properties.hibernate.batch_versioned_data=true\n</code></pre>\n<p>You don't show the logic inside <code>updateResidents()</code>. If this logic is simple enough, e.g. increment counter column for each, or set some constant value in each etc., you can get much better performance by using an update query in the repository, either JPQL or native. Something like this:</p>\n<pre><code>@Modifying\n@Query(&quot;update Resident r set r.someCounter = r.someCounter + 1, r.lastUpdate =:timestamp where r.cityId =:cityId&quot;)\nvoid updateResident(@Param(&quot;cityId&quot;) String cityId, @Param(&quot;timestamp&quot;) long timestamp);\n</code></pre>\n"}],"owner":{"account_id":28620727,"reputation":3,"user_id":21913831,"display_name":"Tal Niv"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":441,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76273317,"answer_count":1,"score":0,"last_activity_date":1684336127,"creation_date":1684332075,"question_id":76272961,"body_markdown":"I have a spring boot application running with hibernate. In my scheme I have City which can have multiple Resident(s).\r\nI have the following method to update the residents of a city:\r\n\r\n```\r\npublic void updateResidentsInCity(long cityId) {\r\n        CompletableFuture\r\n                .supplyAsync(() -&gt; residentsRepository.findAllByCityId(cityId))\r\n                .thenApply(residents -&gt; {\r\n                    // update fields of the resident objects\r\n                    updateResidents(residents);\r\n                    return residents;\r\n                })\r\n                .thenAccept(residents -&gt; residentsRepository.saveAll(residents));\r\n}\r\n```\r\n\r\nBut this cause really bad performance issues, because the update running on a different thread, so the hibernate session is expired and when i call `residentsRepository.saveAll(residents)` hibernate needs to fetch all the entities again.\r\n\r\nI thought about two approaches to fix this issue and i&#39;m wondering what is best (or maybe there are another approaches, of course):\r\n\r\n1. Just give up the multiple CompletableFuture(s)- putting all the operations under one `@Transactional` and make blocking calls:\r\n\r\n```\r\n@Transactional\r\npublic void updateResidentsInCity(long cityId) {\r\n        final List&lt;Resident&gt; residents = residentsRepository.findAllByCityId(cityId);\r\n        updateResidents(residents);\r\n        residentsRepository.saveAll(residents);\r\n}\r\n```\r\n\r\nNow I can just call `updateResidentsInCity()` in a different thread:\r\n\r\n```\r\nCompletableFuture.runAsync(() -&gt; updateResidentsInCity(123))\r\n```\r\n\r\nIn addition, allow hibernate to make batch update by adding those properties:\r\n\r\n```\r\nspring.jpa.properties.hibernate.jdbc.batch_size=50\r\nspring.jpa.properties.hibernate.order_updates=true\r\n```\r\n\r\n2. keep the same code with CompletableFuture(s), but make `residentsRepository.findAllByCityId()` a `readOnly` transaction, and implement my own single native query for batch update:\r\n\r\n```\r\npublic void updateResidentsInCity(long cityId) {\r\n    CompletableFuture\r\n        .supplyAsync(() -&gt; residentsRepository.findAllByCityId(cityId))  // readOnly transaction\r\n        .thenApply(residents -&gt; {\r\n             updateResidents(residents);\r\n             return residents;\r\n         })\r\n         .thenAccept(residents -&gt; residentsRepository.batchUpdate(residents));  // new transaction, one native query\r\n}\r\n```\r\n\r\nI will be glad to get some insights about which approach is better, and maybe another approaches I didn&#39;t think of.\r\n**Please note that my application potentially should update many cities in the same time.**","title":"Strategies to fetch and update entities using CompletableFuture in spring boot with hibernate","body":"<p>I have a spring boot application running with hibernate. In my scheme I have City which can have multiple Resident(s).\nI have the following method to update the residents of a city:</p>\n<pre><code>public void updateResidentsInCity(long cityId) {\n        CompletableFuture\n                .supplyAsync(() -&gt; residentsRepository.findAllByCityId(cityId))\n                .thenApply(residents -&gt; {\n                    // update fields of the resident objects\n                    updateResidents(residents);\n                    return residents;\n                })\n                .thenAccept(residents -&gt; residentsRepository.saveAll(residents));\n}\n</code></pre>\n<p>But this cause really bad performance issues, because the update running on a different thread, so the hibernate session is expired and when i call <code>residentsRepository.saveAll(residents)</code> hibernate needs to fetch all the entities again.</p>\n<p>I thought about two approaches to fix this issue and i'm wondering what is best (or maybe there are another approaches, of course):</p>\n<ol>\n<li>Just give up the multiple CompletableFuture(s)- putting all the operations under one <code>@Transactional</code> and make blocking calls:</li>\n</ol>\n<pre><code>@Transactional\npublic void updateResidentsInCity(long cityId) {\n        final List&lt;Resident&gt; residents = residentsRepository.findAllByCityId(cityId);\n        updateResidents(residents);\n        residentsRepository.saveAll(residents);\n}\n</code></pre>\n<p>Now I can just call <code>updateResidentsInCity()</code> in a different thread:</p>\n<pre><code>CompletableFuture.runAsync(() -&gt; updateResidentsInCity(123))\n</code></pre>\n<p>In addition, allow hibernate to make batch update by adding those properties:</p>\n<pre><code>spring.jpa.properties.hibernate.jdbc.batch_size=50\nspring.jpa.properties.hibernate.order_updates=true\n</code></pre>\n<ol start=\"2\">\n<li>keep the same code with CompletableFuture(s), but make <code>residentsRepository.findAllByCityId()</code> a <code>readOnly</code> transaction, and implement my own single native query for batch update:</li>\n</ol>\n<pre><code>public void updateResidentsInCity(long cityId) {\n    CompletableFuture\n        .supplyAsync(() -&gt; residentsRepository.findAllByCityId(cityId))  // readOnly transaction\n        .thenApply(residents -&gt; {\n             updateResidents(residents);\n             return residents;\n         })\n         .thenAccept(residents -&gt; residentsRepository.batchUpdate(residents));  // new transaction, one native query\n}\n</code></pre>\n<p>I will be glad to get some insights about which approach is better, and maybe another approaches I didn't think of.\n<strong>Please note that my application potentially should update many cities in the same time.</strong></p>\n"},{"tags":["java","hibernate","generics","regression"],"comments":[{"owner":{"account_id":13732484,"reputation":158,"user_id":9909690,"display_name":"David Wolff"},"score":0,"creation_date":1674756162,"post_id":75169414,"comment_id":132786641,"body_markdown":"I&#39;m seeing this generics problem as well.  It&#39;s definitely a blocker for my migration up to Hibernate 6/Spring Boot 3.","body":"I&#39;m seeing this generics problem as well.  It&#39;s definitely a blocker for my migration up to Hibernate 6/Spring Boot 3."},{"owner":{"account_id":2126302,"reputation":2590,"user_id":1888372,"accept_rate":83,"display_name":"Albert Lazaro de Lara"},"score":0,"creation_date":1684335036,"post_id":75169414,"comment_id":134503790,"body_markdown":"Did you solved the problem? I have the same problem and, in my case, I think the problem is this line `builder.in(laboratori.get(&quot;id&quot;)).value(subqueryLaboratori)` where the value is a `Subquery` object instead of a String, Integer, Long... \nWith Spring 2.7.2 it worked but after the migration to 3.0.6 it breaks.","body":"Did you solved the problem? I have the same problem and, in my case, I think the problem is this line <code>builder.in(laboratori.get(&quot;id&quot;)).value(subqueryLaboratori)</code> where the value is a <code>Subquery</code> object instead of a String, Integer, Long...  With Spring 2.7.2 it worked but after the migration to 3.0.6 it breaks."},{"owner":{"account_id":2126302,"reputation":2590,"user_id":1888372,"accept_rate":83,"display_name":"Albert Lazaro de Lara"},"score":0,"creation_date":1684402398,"post_id":75169414,"comment_id":134513850,"body_markdown":"I found the solution to my problem in the migration guides https://docs.jboss.org/hibernate/orm/6.0/migration-guide/migration-guide.html and https://docs.jboss.org/hibernate/orm/6.1/migration-guide/migration-guide.html. Read carefully because they are long, but provide all the necessary information.","body":"I found the solution to my problem in the migration guides <a href=\"https://docs.jboss.org/hibernate/orm/6.0/migration-guide/migration-guide.html\" rel=\"nofollow noreferrer\">docs.jboss.org/hibernate/orm/6.0/migration-guide/&hellip;</a> and <a href=\"https://docs.jboss.org/hibernate/orm/6.1/migration-guide/migration-guide.html\" rel=\"nofollow noreferrer\">docs.jboss.org/hibernate/orm/6.1/migration-guide/&hellip;</a>. Read carefully because they are long, but provide all the necessary information."}],"answers":[{"comments":[{"owner":{"account_id":14407351,"reputation":81,"user_id":10407075,"display_name":"Rolf"},"score":0,"creation_date":1677503948,"post_id":75285153,"comment_id":133344535,"body_markdown":"This don&#39;t work for me. We have Generics with Inheritence like\n----\nFoo extends BaseEntity&lt;FooId&gt;\n---\nBaseEntity&lt;S extends UUID&gt;\nprivate S id;\n--- \nFooID extends UUID","body":"This don&#39;t work for me. We have Generics with Inheritence like ---- Foo extends BaseEntity&lt;FooId&gt; --- BaseEntity&lt;S extends UUID&gt; private S id; ---  FooID extends UUID"}],"tags":[],"owner":{"account_id":3252792,"reputation":1390,"user_id":2742642,"accept_rate":75,"display_name":"Uli"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1675085546,"creation_date":1675085546,"answer_id":75285153,"question_id":75169414,"body_markdown":"The solution is to use the cast method for the generic field:\r\n\r\n```java\r\ncr.select(person.get(&quot;name&quot;).as(String.class));\r\n```","title":"Hibernate 6 regression with generics","body":"<p>The solution is to use the cast method for the generic field:</p>\n<pre class=\"lang-java prettyprint-override\"><code>cr.select(person.get(&quot;name&quot;).as(String.class));\n</code></pre>\n"}],"owner":{"account_id":3252792,"reputation":1390,"user_id":2742642,"accept_rate":75,"display_name":"Uli"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":650,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":75285153,"answer_count":1,"score":3,"last_activity_date":1684336091,"creation_date":1674116525,"question_id":75169414,"body_markdown":"I tried to migrate my application from Hibernate `5.4.30.Final` to `6.1.6.Final`, database H2 2.1.214. I observed a different behaviour regarding generics when using a `CriteriaQuery`. I have stripped it down to a testcase (which does not make any sense but shows the problem). In Hibernate 5 the following query to a generic field `name` runs fine whereas Hibernate 6 throws an Exception.\r\n\r\n```java\r\nCriteriaBuilder cb = eMgr.getCriteriaBuilder();\r\nCriteriaQuery&lt;String&gt; cr = cb.createQuery(String.class);\r\nRoot&lt;Person&gt; person = cr.from(Person.class);\r\ncr.select(person.&lt;String&gt; get(&quot;name&quot;));\r\nTypedQuery&lt;String&gt; query = eMgr.createQuery(cr);\r\n```\r\n\r\nException:\r\n\r\n    Converting `org.hibernate.query.QueryTypeMismatchException` to JPA `PersistenceException` : Specified result type [java.lang.String] did not match Query selection type [java.lang.Object] - multiple selections: use Tuple or array\r\n\r\nHere are my sample class definitions:\r\n\r\n```java\r\nimport jakarta.persistence.Entity;\r\nimport jakarta.persistence.GeneratedValue;\r\nimport jakarta.persistence.Id;\r\n\r\n@Entity\r\npublic class GenericPerson&lt;T&gt;\r\n{\r\n\t@Id\r\n\t@GeneratedValue(generator = &quot;increment&quot;)\r\n\tprivate long id;\r\n\tprivate T name;\r\n\r\n\tpublic GenericPerson()\t{\t}\r\n\tpublic GenericPerson(T name)\t{ this.name = name;}\r\n\r\n\tpublic T getName() { return this.name; }\r\n\tpublic void setName(T name) {\tthis.name = name;\t}\r\n\r\n\tpublic long getId() { return this.id;}\r\n\tpublic void setId(long id) { this.id = id; }\r\n}\r\n\r\n@Entity\r\npublic class Person\textends GenericPerson&lt;String&gt;\r\n{\r\n\tpublic Person() { }\r\n\tpublic Person(String name) {\tsuper(name);\t}\r\n}\r\n```\r\n\r\nHibernate 5 seems to handle generics differently to Hibernate 6 but I could not find any hint in the migration document. Why fails the test case with Hibernate 6?\r\n","title":"Hibernate 6 regression with generics","body":"<p>I tried to migrate my application from Hibernate <code>5.4.30.Final</code> to <code>6.1.6.Final</code>, database H2 2.1.214. I observed a different behaviour regarding generics when using a <code>CriteriaQuery</code>. I have stripped it down to a testcase (which does not make any sense but shows the problem). In Hibernate 5 the following query to a generic field <code>name</code> runs fine whereas Hibernate 6 throws an Exception.</p>\n<pre class=\"lang-java prettyprint-override\"><code>CriteriaBuilder cb = eMgr.getCriteriaBuilder();\nCriteriaQuery&lt;String&gt; cr = cb.createQuery(String.class);\nRoot&lt;Person&gt; person = cr.from(Person.class);\ncr.select(person.&lt;String&gt; get(&quot;name&quot;));\nTypedQuery&lt;String&gt; query = eMgr.createQuery(cr);\n</code></pre>\n<p>Exception:</p>\n<pre><code>Converting `org.hibernate.query.QueryTypeMismatchException` to JPA `PersistenceException` : Specified result type [java.lang.String] did not match Query selection type [java.lang.Object] - multiple selections: use Tuple or array\n</code></pre>\n<p>Here are my sample class definitions:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import jakarta.persistence.Entity;\nimport jakarta.persistence.GeneratedValue;\nimport jakarta.persistence.Id;\n\n@Entity\npublic class GenericPerson&lt;T&gt;\n{\n    @Id\n    @GeneratedValue(generator = &quot;increment&quot;)\n    private long id;\n    private T name;\n\n    public GenericPerson()  {   }\n    public GenericPerson(T name)    { this.name = name;}\n\n    public T getName() { return this.name; }\n    public void setName(T name) {   this.name = name;   }\n\n    public long getId() { return this.id;}\n    public void setId(long id) { this.id = id; }\n}\n\n@Entity\npublic class Person extends GenericPerson&lt;String&gt;\n{\n    public Person() { }\n    public Person(String name) {    super(name);    }\n}\n</code></pre>\n<p>Hibernate 5 seems to handle generics differently to Hibernate 6 but I could not find any hint in the migration document. Why fails the test case with Hibernate 6?</p>\n"},{"tags":["java","if-statement","parsing","integer","double"],"answers":[{"comments":[{"owner":{"account_id":1816779,"reputation":384,"user_id":1651720,"display_name":"Andile"},"score":0,"creation_date":1684327585,"post_id":76271976,"comment_id":134501788,"body_markdown":"Still that won&#39;t solve the issue, try getting your double values String text = textView.getText().toString();\ndouble doubleValue = Double.parseDouble(text);","body":"Still that won&#39;t solve the issue, try getting your double values String text = textView.getText().toString(); double doubleValue = Double.parseDouble(text);"},{"owner":{"account_id":28614633,"reputation":1,"user_id":21908917,"display_name":"HSN I"},"score":0,"creation_date":1684329287,"post_id":76271976,"comment_id":134502214,"body_markdown":"Hi, thanks for your reply however like @Andile has said this doesn&#39;t solve my issue.\nI have updated the code but my issue still persists with the Doubles. Any help would be appreciated.","body":"Hi, thanks for your reply however like @Andile has said this doesn&#39;t solve my issue. I have updated the code but my issue still persists with the Doubles. Any help would be appreciated."}],"tags":[],"owner":{"account_id":7900776,"reputation":3946,"user_id":5967872,"display_name":"KYL3R"},"comment_count":2,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1684325579,"creation_date":1684325579,"answer_id":76271976,"question_id":76271941,"body_markdown":"You probably need to get the text from the textview.\r\n\r\nThis is your code: \r\n\r\n    Integer.parseInt(String.valueOf(user_current_steps))\r\nnote, that you use the valueOf `user_current_steps` which is the TextView object. You need to ask it for the actual text:\r\n\r\n    Integer.parseInt(String.valueOf(user_current_steps.getText()))\r\n\r\nAnd then you can most likely omit the `String.valueOf` part, because that already returns a string:\r\n\r\n    Integer.parseInt(user_current_steps.getText())","title":"IF Statement is not returning a result. Android Studio in Java","body":"<p>You probably need to get the text from the textview.</p>\n<p>This is your code:</p>\n<pre><code>Integer.parseInt(String.valueOf(user_current_steps))\n</code></pre>\n<p>note, that you use the valueOf <code>user_current_steps</code> which is the TextView object. You need to ask it for the actual text:</p>\n<pre><code>Integer.parseInt(String.valueOf(user_current_steps.getText()))\n</code></pre>\n<p>And then you can most likely omit the <code>String.valueOf</code> part, because that already returns a string:</p>\n<pre><code>Integer.parseInt(user_current_steps.getText())\n</code></pre>\n"},{"tags":[],"owner":{"account_id":28614633,"reputation":1,"user_id":21908917,"display_name":"HSN I"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684336053,"creation_date":1684336030,"answer_id":76273552,"question_id":76271941,"body_markdown":"ANSWER: Update on my issue. It turned out it was trying to retrieve the values too early which resulted in the if-statement trying to do a (0 &lt; 0) statement.\r\n\r\n\r\nBefore:\r\n```\r\n                public void run () {\r\n                    getUserInfo();\r\n                    getCurrentData();\r\n\r\n                }\r\n```\r\n\r\nAfter:\r\n```\r\n                public void run () {\r\n                    getUserInfo();\r\n                }\r\n\r\n\r\n    public void getUserInfo() {\r\n         //getUserInfo CODE HERE\r\n         getCurrentData();\r\n    }\r\n\r\n\r\n```\r\n\r\nThanks for the help.","title":"IF Statement is not returning a result. Android Studio in Java","body":"<p>ANSWER: Update on my issue. It turned out it was trying to retrieve the values too early which resulted in the if-statement trying to do a (0 &lt; 0) statement.</p>\n<p>Before:</p>\n<pre><code>                public void run () {\n                    getUserInfo();\n                    getCurrentData();\n\n                }\n</code></pre>\n<p>After:</p>\n<pre><code>                public void run () {\n                    getUserInfo();\n                }\n\n\n    public void getUserInfo() {\n         //getUserInfo CODE HERE\n         getCurrentData();\n    }\n\n\n</code></pre>\n<p>Thanks for the help.</p>\n"}],"owner":{"account_id":28614633,"reputation":1,"user_id":21908917,"display_name":"HSN I"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":71,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":2,"score":-2,"last_activity_date":1684336053,"creation_date":1684325346,"question_id":76271941,"body_markdown":"to summarise this function pulls data from TextView value. It then converts it into a double then is supposed to perform an if statement which identifies which value is higher than the other.\r\n\r\nUpdated Code:\r\n\r\n```\r\npublic void getCurrentData();\r\n        TextView user = (TextView) getView().findViewById(R.id.global_text_username);\r\n        String username = getActivity().getIntent().getStringExtra(&quot;email&quot;);\r\n        String userId = username.substring(0, 5);\r\n        user.setText(username);\r\n\r\n        Drawable unreach = getResources().getDrawable(R.drawable.baseline_remove_circle_24, null);\r\n\r\n        TextView user_current_cals = (TextView) getView().findViewById(R.id.home_text_calcode);\r\n        TextView user_current_steps = (TextView) getView().findViewById(R.id.home_text_stepcode);\r\n        TextView user_current_target = (TextView) getView().findViewById(R.id.home_text_targetcode);\r\n\r\n        ImageView current_cals = (ImageView) getView().findViewById(R.id.home_img_calstatus);\r\n        ImageView current_target = (ImageView) getView().findViewById(R.id.home_img_targetstatus);\r\n        ImageView current_steps = (ImageView) getView().findViewById(R.id.home_img_stepstatus);\r\n```\r\n\r\nThe problem happens here. While the code runs without any error, the second if statement is not working.\r\n\r\n```\r\n        String ucc = user_current_cals.getText().toString();\r\n        double check_current_cals = Double.parseDouble(ucc);\r\n\r\n        String uct = user_current_target.getText().toString();\r\n        double check_current_target = Double.parseDouble(uct);\r\n\r\n        String ucs = user_current_steps.getText().toString();\r\n        int check_current_steps = Integer.parseInt(ucs);\r\n\r\n        if (check_current_steps &lt; 1000) {\r\n            current_steps.setColorFilter(Color.argb(255, 244, 57, 57));\r\n            current_steps.setImageDrawable(unreach);\r\n        }\r\n\r\n        if (check_current_cals &lt; check_current_target) {\r\n            current_cals.setColorFilter(Color.argb(255, 244, 57, 57));\r\n            current_target.setColorFilter(Color.argb(255, 244, 57, 57));\r\n            current_cals.setImageDrawable(unreach);\r\n            current_target.setImageDrawable(unreach);\r\n        }\r\n```\r\n\r\nI&#39;m confused to as what&#39;s not going right with this statement and any help and pointing me in the right direction would be greatly appreciated. Thanks.\r\n\r\nI have tried to convert all numbers to Integers and perform the int statement again to no avail.","title":"IF Statement is not returning a result. Android Studio in Java","body":"<p>to summarise this function pulls data from TextView value. It then converts it into a double then is supposed to perform an if statement which identifies which value is higher than the other.</p>\n<p>Updated Code:</p>\n<pre><code>public void getCurrentData();\n        TextView user = (TextView) getView().findViewById(R.id.global_text_username);\n        String username = getActivity().getIntent().getStringExtra(&quot;email&quot;);\n        String userId = username.substring(0, 5);\n        user.setText(username);\n\n        Drawable unreach = getResources().getDrawable(R.drawable.baseline_remove_circle_24, null);\n\n        TextView user_current_cals = (TextView) getView().findViewById(R.id.home_text_calcode);\n        TextView user_current_steps = (TextView) getView().findViewById(R.id.home_text_stepcode);\n        TextView user_current_target = (TextView) getView().findViewById(R.id.home_text_targetcode);\n\n        ImageView current_cals = (ImageView) getView().findViewById(R.id.home_img_calstatus);\n        ImageView current_target = (ImageView) getView().findViewById(R.id.home_img_targetstatus);\n        ImageView current_steps = (ImageView) getView().findViewById(R.id.home_img_stepstatus);\n</code></pre>\n<p>The problem happens here. While the code runs without any error, the second if statement is not working.</p>\n<pre><code>        String ucc = user_current_cals.getText().toString();\n        double check_current_cals = Double.parseDouble(ucc);\n\n        String uct = user_current_target.getText().toString();\n        double check_current_target = Double.parseDouble(uct);\n\n        String ucs = user_current_steps.getText().toString();\n        int check_current_steps = Integer.parseInt(ucs);\n\n        if (check_current_steps &lt; 1000) {\n            current_steps.setColorFilter(Color.argb(255, 244, 57, 57));\n            current_steps.setImageDrawable(unreach);\n        }\n\n        if (check_current_cals &lt; check_current_target) {\n            current_cals.setColorFilter(Color.argb(255, 244, 57, 57));\n            current_target.setColorFilter(Color.argb(255, 244, 57, 57));\n            current_cals.setImageDrawable(unreach);\n            current_target.setImageDrawable(unreach);\n        }\n</code></pre>\n<p>I'm confused to as what's not going right with this statement and any help and pointing me in the right direction would be greatly appreciated. Thanks.</p>\n<p>I have tried to convert all numbers to Integers and perform the int statement again to no avail.</p>\n"},{"tags":["java","database","hibernate","identifier","sequence-generators"],"comments":[{"owner":{"account_id":2439595,"reputation":2897,"user_id":2128503,"accept_rate":22,"display_name":"Moon"},"score":0,"creation_date":1465559025,"post_id":37747218,"comment_id":62964377,"body_markdown":"Similar discussion has happened at: http://stackoverflow.com/a/15470272/2128503","body":"Similar discussion has happened at: <a href=\"http://stackoverflow.com/a/15470272/2128503\">stackoverflow.com/a/15470272/2128503</a>"},{"owner":{"account_id":13144876,"reputation":108,"user_id":9495226,"display_name":"Sumit Anand"},"score":0,"creation_date":1527504861,"post_id":37747218,"comment_id":88139562,"body_markdown":"Check this link for answer ==&gt; &lt;https://stackoverflow.com/a/50564556/9495226&gt;","body":"Check this link for answer ==&gt; &lt;<a href=\"https://stackoverflow.com/a/50564556/9495226\">stackoverflow.com/a/50564556/9495226</a>&gt;"}],"answers":[{"comments":[{"owner":{"account_id":2933975,"reputation":95,"user_id":2513408,"display_name":"Takmashido"},"score":1,"creation_date":1465561470,"post_id":37747715,"comment_id":62965915,"body_markdown":"Ok but I&#39;m trying to do a custom String id generator for having ids like &quot;CTC00001&quot;, CTC00002&quot; ... etc without the sequence_name parameter :)","body":"Ok but I&#39;m trying to do a custom String id generator for having ids like &quot;CTC00001&quot;, CTC00002&quot; ... etc without the sequence_name parameter :)"}],"tags":[],"owner":{"account_id":1184679,"reputation":904,"user_id":3521098,"accept_rate":70,"display_name":"Solorad"},"comment_count":1,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1465559886,"creation_date":1465559886,"answer_id":37747715,"question_id":37747218,"body_markdown":"Yes, hibernate have prebuilt String generators. Just substitute your `@GenericGenerator` definition to another strategy.\r\n\r\n    @Entity\r\n    @Table(name = &quot;contact&quot;)\r\n    public class Contact implements Serializable, Identifiable&lt;String&gt; {\r\n\r\n        private static final long serialVersionUID = 1L;\r\n\r\n        @Id\r\n        @GeneratedValue(generator = &quot;uuid&quot;)\r\n        @GenericGenerator(name = &quot;uuid&quot;, strategy = &quot;uuid2&quot;)\r\n        private String id;\r\n\r\n        public String getId() {\r\n            return id;\r\n        }\r\n\r\n        public void setId(String id) {\r\n            this.id = id;\r\n        }\r\n    }\r\n\r\nFor more information about different hibernate generators you can look at [documentation][1].\r\n\r\n\r\n  [1]: https://docs.jboss.org/hibernate/orm/3.6/reference/en-US/html/mapping.html","title":"How to implement a custom String sequence identifier generator with Hibernate","body":"<p>Yes, hibernate have prebuilt String generators. Just substitute your <code>@GenericGenerator</code> definition to another strategy.</p>\n\n<pre><code>@Entity\n@Table(name = \"contact\")\npublic class Contact implements Serializable, Identifiable&lt;String&gt; {\n\n    private static final long serialVersionUID = 1L;\n\n    @Id\n    @GeneratedValue(generator = \"uuid\")\n    @GenericGenerator(name = \"uuid\", strategy = \"uuid2\")\n    private String id;\n\n    public String getId() {\n        return id;\n    }\n\n    public void setId(String id) {\n        this.id = id;\n    }\n}\n</code></pre>\n\n<p>For more information about different hibernate generators you can look at <a href=\"https://docs.jboss.org/hibernate/orm/3.6/reference/en-US/html/mapping.html\" rel=\"nofollow\">documentation</a>.</p>\n"},{"comments":[{"owner":{"account_id":2486844,"reputation":1057,"user_id":2165125,"display_name":"Zenith"},"score":0,"creation_date":1585990581,"post_id":37749564,"comment_id":107963606,"body_markdown":"I got error for mysql DB\n\norg.hibernate.MappingException: org.hibernate.dialect.MySQL5Dialect does not support sequences\n\nAny solution for this?","body":"I got error for mysql DB  org.hibernate.MappingException: org.hibernate.dialect.MySQL5Dialect does not support sequences  Any solution for this?"},{"owner":{"account_id":1012936,"reputation":145178,"user_id":1025118,"accept_rate":100,"display_name":"Vlad Mihalcea"},"score":0,"creation_date":1585991767,"post_id":37749564,"comment_id":107963907,"body_markdown":"For MySQL, you need to extend the Hibernate [`IdentityGenerator`](https://docs.jboss.org/hibernate/orm/5.4/javadocs/org/hibernate/id/IdentityGenerator.html) and wrap the identity generation logic.","body":"For MySQL, you need to extend the Hibernate <a href=\"https://docs.jboss.org/hibernate/orm/5.4/javadocs/org/hibernate/id/IdentityGenerator.html\" rel=\"nofollow noreferrer\"><code>IdentityGenerator</code></a> and wrap the identity generation logic."},{"owner":{"account_id":12712262,"reputation":65,"user_id":9273157,"display_name":"dubnic"},"score":0,"creation_date":1634542347,"post_id":37749564,"comment_id":123042972,"body_markdown":"Hm.... I got `Could not fetch the SequenceInformation from the database\norg.postgresql.util.PSQLException: The column name start_value was not found in this ResultSet.`","body":"Hm.... I got <code>Could not fetch the SequenceInformation from the database org.postgresql.util.PSQLException: The column name start_value was not found in this ResultSet.</code>"},{"owner":{"account_id":1789975,"reputation":1548,"user_id":1630619,"accept_rate":77,"display_name":"Philippe Gioseffi"},"score":0,"creation_date":1684213239,"post_id":37749564,"comment_id":134480504,"body_markdown":"Can I access the fields of my entity in your class? What I need is a String sequence generator that is composed by some of the fields of my entity.","body":"Can I access the fields of my entity in your class? What I need is a String sequence generator that is composed by some of the fields of my entity."}],"tags":[],"owner":{"account_id":1012936,"reputation":145178,"user_id":1025118,"accept_rate":100,"display_name":"Vlad Mihalcea"},"comment_count":4,"down_vote_count":0,"up_vote_count":13,"is_accepted":true,"score":13,"last_activity_date":1610206162,"creation_date":1465565367,"answer_id":37749564,"question_id":37747218,"body_markdown":"The problem is that `SequenceStyleGenerator` expects to return a numerical value, not a `String`.\r\n\r\nI already tried a solution to this problem and it works like a charm. Therefore, you need to change your generator like this:\r\n\r\n    public class StringSequenceIdentifier implements IdentifierGenerator, Configurable {\r\n    \r\n        private String sequenceCallSyntax;\r\n    \r\n        @Override\r\n        public void configure(Type type, Properties params, ServiceRegistry serviceRegistry) throws MappingException {\r\n            final JdbcEnvironment jdbcEnvironment = serviceRegistry.getService(JdbcEnvironment.class);\r\n            final Dialect dialect = jdbcEnvironment.getDialect();\r\n    \r\n            final String sequencePerEntitySuffix = ConfigurationHelper.getString(CONFIG_SEQUENCE_PER_ENTITY_SUFFIX, params, DEF_SEQUENCE_SUFFIX);\r\n    \r\n            final String defaultSequenceName = ConfigurationHelper.getBoolean(CONFIG_PREFER_SEQUENCE_PER_ENTITY, params, false)\r\n                    ? params.getProperty(JPA_ENTITY_NAME) + sequencePerEntitySuffix\r\n                    : DEF_SEQUENCE_NAME;\r\n    \r\n            sequenceCallSyntax = dialect.getSequenceNextValString(ConfigurationHelper.getString(SEQUENCE_PARAM, params, defaultSequenceName));\r\n        }\r\n    \r\n        @Override\r\n        public Serializable generate(SessionImplementor session, Object obj) {\r\n            if (obj instanceof Identifiable) {\r\n                Identifiable identifiable = (Identifiable) obj;\r\n                Serializable id = identifiable.getId();\r\n                if (id != null) {\r\n                    return id;\r\n                }\r\n            }\r\n            long seqValue = ((Number) Session.class.cast(session)\r\n                .createSQLQuery(sequenceCallSyntax)\r\n                .uniqueResult()).longValue();\r\n    \r\n            return &quot;CTC&quot; + seqValue;\r\n        }\r\n    }\r\n\r\nYour mapping becomes:\r\n\r\n    @Entity(name = &quot;Post&quot;)\r\n    @Table(name = &quot;post&quot;)\r\n    public static class Post implements Identifiable&lt;String&gt; {\r\n    \r\n        @Id\r\n        @GenericGenerator(\r\n            name = &quot;assigned-sequence&quot;,\r\n            strategy = &quot;com.vladmihalcea.book.hpjp.hibernate.identifier.StringSequenceIdentifier&quot;,\r\n            parameters = @org.hibernate.annotations.Parameter(name = &quot;sequence_name&quot;, value = &quot;hibernate_sequence&quot;)\r\n        )\r\n        @GeneratedValue(generator = &quot;assigned-sequence&quot;, strategy = GenerationType.SEQUENCE)\r\n        private String id;\r\n    \r\n        @Version\r\n        private Integer version;\r\n    \r\n        public Post() {\r\n        }\r\n    \r\n        public Post(String id) {\r\n            this.id = id;\r\n        }\r\n    \r\n        @Override\r\n        public String getId() {\r\n            return id;\r\n        }\r\n    }\r\n\r\nNow, when you insert the following entities:\r\n\r\n    doInJPA(entityManager -&gt; {\r\n        entityManager.persist(new Post());\r\n        entityManager.persist(new Post(&quot;ABC&quot;));\r\n        entityManager.persist(new Post());\r\n        entityManager.persist(new Post(&quot;DEF&quot;));\r\n    });\r\n\r\nHibernate generates the right identifier:\r\n\r\n    Query:[&quot;select nextval (&#39;hibernate_sequence&#39;)&quot;], Params:[()]\r\n    Query:[&quot;select nextval (&#39;hibernate_sequence&#39;)&quot;], Params:[()]\r\n    Query:[&quot;insert into post (version, id) values (?, ?)&quot;], Params:[(0, CTC1)]\r\n    Query:[&quot;insert into post (version, id) values (?, ?)&quot;], Params:[(0, ABC)]\r\n    Query:[&quot;insert into post (version, id) values (?, ?)&quot;], Params:[(0, CTC2)]\r\n    Query:[&quot;insert into post (version, id) values (?, ?)&quot;], Params:[(0, DEF)]\r\n\r\nCode available on [GitHub][2].\r\n\r\n\r\n  [1]: https://vladmihalcea.com/how-to-implement-a-custom-string-based-sequence-identifier-generator-with-hibernate/\r\n  [2]: https://github.com/vladmihalcea/high-performance-java-persistence/blob/master/core/src/test/java/com/vladmihalcea/book/hpjp/hibernate/identifier/StringSequenceIdentifierTest.java","title":"How to implement a custom String sequence identifier generator with Hibernate","body":"<p>The problem is that <code>SequenceStyleGenerator</code> expects to return a numerical value, not a <code>String</code>.</p>\n<p>I already tried a solution to this problem and it works like a charm. Therefore, you need to change your generator like this:</p>\n<pre><code>public class StringSequenceIdentifier implements IdentifierGenerator, Configurable {\n\n    private String sequenceCallSyntax;\n\n    @Override\n    public void configure(Type type, Properties params, ServiceRegistry serviceRegistry) throws MappingException {\n        final JdbcEnvironment jdbcEnvironment = serviceRegistry.getService(JdbcEnvironment.class);\n        final Dialect dialect = jdbcEnvironment.getDialect();\n\n        final String sequencePerEntitySuffix = ConfigurationHelper.getString(CONFIG_SEQUENCE_PER_ENTITY_SUFFIX, params, DEF_SEQUENCE_SUFFIX);\n\n        final String defaultSequenceName = ConfigurationHelper.getBoolean(CONFIG_PREFER_SEQUENCE_PER_ENTITY, params, false)\n                ? params.getProperty(JPA_ENTITY_NAME) + sequencePerEntitySuffix\n                : DEF_SEQUENCE_NAME;\n\n        sequenceCallSyntax = dialect.getSequenceNextValString(ConfigurationHelper.getString(SEQUENCE_PARAM, params, defaultSequenceName));\n    }\n\n    @Override\n    public Serializable generate(SessionImplementor session, Object obj) {\n        if (obj instanceof Identifiable) {\n            Identifiable identifiable = (Identifiable) obj;\n            Serializable id = identifiable.getId();\n            if (id != null) {\n                return id;\n            }\n        }\n        long seqValue = ((Number) Session.class.cast(session)\n            .createSQLQuery(sequenceCallSyntax)\n            .uniqueResult()).longValue();\n\n        return &quot;CTC&quot; + seqValue;\n    }\n}\n</code></pre>\n<p>Your mapping becomes:</p>\n<pre><code>@Entity(name = &quot;Post&quot;)\n@Table(name = &quot;post&quot;)\npublic static class Post implements Identifiable&lt;String&gt; {\n\n    @Id\n    @GenericGenerator(\n        name = &quot;assigned-sequence&quot;,\n        strategy = &quot;com.vladmihalcea.book.hpjp.hibernate.identifier.StringSequenceIdentifier&quot;,\n        parameters = @org.hibernate.annotations.Parameter(name = &quot;sequence_name&quot;, value = &quot;hibernate_sequence&quot;)\n    )\n    @GeneratedValue(generator = &quot;assigned-sequence&quot;, strategy = GenerationType.SEQUENCE)\n    private String id;\n\n    @Version\n    private Integer version;\n\n    public Post() {\n    }\n\n    public Post(String id) {\n        this.id = id;\n    }\n\n    @Override\n    public String getId() {\n        return id;\n    }\n}\n</code></pre>\n<p>Now, when you insert the following entities:</p>\n<pre><code>doInJPA(entityManager -&gt; {\n    entityManager.persist(new Post());\n    entityManager.persist(new Post(&quot;ABC&quot;));\n    entityManager.persist(new Post());\n    entityManager.persist(new Post(&quot;DEF&quot;));\n});\n</code></pre>\n<p>Hibernate generates the right identifier:</p>\n<pre><code>Query:[&quot;select nextval ('hibernate_sequence')&quot;], Params:[()]\nQuery:[&quot;select nextval ('hibernate_sequence')&quot;], Params:[()]\nQuery:[&quot;insert into post (version, id) values (?, ?)&quot;], Params:[(0, CTC1)]\nQuery:[&quot;insert into post (version, id) values (?, ?)&quot;], Params:[(0, ABC)]\nQuery:[&quot;insert into post (version, id) values (?, ?)&quot;], Params:[(0, CTC2)]\nQuery:[&quot;insert into post (version, id) values (?, ?)&quot;], Params:[(0, DEF)]\n</code></pre>\n<p>Code available on <a href=\"https://github.com/vladmihalcea/high-performance-java-persistence/blob/master/core/src/test/java/com/vladmihalcea/book/hpjp/hibernate/identifier/StringSequenceIdentifierTest.java\" rel=\"nofollow noreferrer\">GitHub</a>.</p>\n"},{"comments":[{"owner":{"account_id":8740522,"reputation":146,"user_id":6537740,"display_name":"Borin --help"},"score":0,"creation_date":1684650131,"post_id":76270334,"comment_id":134546081,"body_markdown":"It works for my case that was wrong with @override public void configuration(....).","body":"It works for my case that was wrong with @override public void configuration(....)."}],"tags":[],"owner":{"account_id":1562540,"reputation":891,"user_id":1452089,"accept_rate":25,"display_name":"cane"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1684335689,"creation_date":1684314242,"answer_id":76270334,"question_id":37747218,"body_markdown":"it&#39;s possible to reuse sequence style generator by following solution\r\n\r\n    public class AppIdGenerator extends SequenceStyleGenerator {\r\n\r\n\t    public static final String PREFIX_PARAM = &quot;prefix&quot;;\r\n\t    private String prefix;\r\n\r\n\t    @Override\r\n\t    public void configure(Type type, Properties properties,\r\n\t                          ServiceRegistry serviceRegistry) throws MappingException {\r\n\t        super.configure(new NamedBasicTypeImpl&lt;&gt;(new JavaTypeBasicAdaptor&lt;&gt;(Long.class),\r\n\t                NumericJdbcType.INSTANCE, &quot;long&quot;), properties, serviceRegistry);\r\n\t        prefix = StringUtils.capitalize(ConfigurationHelper.getString(PREFIX_PARAM, properties));\r\n\t    }\r\n\r\n\t    @Override\r\n\t    public Serializable generate(SharedSessionContractImplementor session, Object obj) throws HibernateException {\r\n\t        return String.format(&quot;%s%09d&quot;, prefix, ((Long) super.generate(session, obj)));\r\n\t    }\r\n\t}\r\n\r\nand Entity\r\n\r\n    @Data\r\n\t@EqualsAndHashCode(callSuper = false)\r\n\t@Builder\r\n\t@NoArgsConstructor\r\n\t@AllArgsConstructor\r\n\t@Entity\r\n\t@Table(name = Subject.NAME, uniqueConstraints = {@UniqueConstraint(name = &quot;UC_SUBJECT&quot;,\r\n\t        columnNames = {&quot;STUDY_KEY&quot;, &quot;SUBJECT_UNIQUEID&quot;, &quot;SUBJECT_UNIQUEID_SOURCE&quot;})})\r\n\tpublic class Subject extends Auditing {\r\n\r\n\t  static final String NAME = &quot;SUBJECT&quot;;\r\n\r\n\t  static final String PREF = &quot;SUBJ&quot;;\r\n\r\n\t  @Id\r\n\t  @GeneratedValue(generator = &quot;subject_gen&quot;, strategy = GenerationType.SEQUENCE)\r\n\t  @GenericGenerator(name = &quot;subject_gen&quot;, strategy = &quot;com.awesome.db.AppIdGenerator&quot;, parameters = {\r\n\t          @org.hibernate.annotations.Parameter(name = &quot;prefix&quot;, value = Subject.PREF),\r\n\t          @org.hibernate.annotations.Parameter(name = &quot;sequence_name&quot;, value = Subject.NAME + SequenceStyleGenerator.DEF_SEQUENCE_SUFFIX),\r\n\t          @org.hibernate.annotations.Parameter(name = &quot;increment_size&quot;, value = &quot;1&quot;)\r\n\t          //@org.hibernate.annotations.Parameter(name = &quot;initial_value&quot;, value = &quot;21&quot;),\r\n\t          //@org.hibernate.annotations.Parameter(name = &quot;optimizer&quot;, value = &quot;pooled-lo&quot;),\r\n\t  })\r\n\t  @Column(name = &quot;SUBJECT_KEY&quot;, unique = true, nullable = false, updatable = false, length = 13)\r\n\t  private String subjectKey;\r\n\r\n\t  @ManyToOne(optional = false)\r\n\t  @JoinColumn(name = &quot;STUDY_KEY&quot;, referencedColumnName = &quot;STUDY_KEY&quot;, foreignKey = @ForeignKey(name = &quot;FK_STUDY_KEY&quot;),\r\n\t      nullable = false, updatable = false)\r\n\t  private Study study;\r\n\r\n\t  @NotNull\r\n\t  @Column(name = &quot;SUBJECT_UNIQUEID&quot;, length = 120)\r\n\t  private String subjectId;\r\n\r\n\t  @NotNull\r\n\t  @Column(name = &quot;SUBJECT_UNIQUEID_SOURCE&quot;, length = 120)\r\n\t  private String subjectIdSource;\r\n\t}\r\n\r\nIn result:\r\n\r\n 1. uses numeric db sequence counter\r\n 2. supports the database structure and integrated optimizer“s options\r\n\r\nKeep in mind, \r\nif You are using any population scripts like *import.sql/data.sql* then **initial_value** parameter must be synchronised with number of rows in the table manually (hardcoded or provided from outside app) or **nextval** adopted to the id string key format\r\n\r\n    --import.sql\r\n    INSERT INTO SUBJECT (subject_key, subject_uniqueid, subject_uniqueid_source, created_date, modified_date, study_key) VALUES(&#39;SUBJ&#39;||to_char(nextval(&#39;subject_seq&#39;), &#39;FM000000009&#39;),&#39;1234&#39;,&#39;Other.App&#39;,&#39;2023-05-17 14:05:46.521000&#39;,&#39;2023-05-17 14:05:46.521000&#39;,&#39;STUD000000001&#39;);","title":"How to implement a custom String sequence identifier generator with Hibernate","body":"<p>it's possible to reuse sequence style generator by following solution</p>\n<pre><code>public class AppIdGenerator extends SequenceStyleGenerator {\n\n    public static final String PREFIX_PARAM = &quot;prefix&quot;;\n    private String prefix;\n\n    @Override\n    public void configure(Type type, Properties properties,\n                          ServiceRegistry serviceRegistry) throws MappingException {\n        super.configure(new NamedBasicTypeImpl&lt;&gt;(new JavaTypeBasicAdaptor&lt;&gt;(Long.class),\n                NumericJdbcType.INSTANCE, &quot;long&quot;), properties, serviceRegistry);\n        prefix = StringUtils.capitalize(ConfigurationHelper.getString(PREFIX_PARAM, properties));\n    }\n\n    @Override\n    public Serializable generate(SharedSessionContractImplementor session, Object obj) throws HibernateException {\n        return String.format(&quot;%s%09d&quot;, prefix, ((Long) super.generate(session, obj)));\n    }\n}\n</code></pre>\n<p>and Entity</p>\n<pre><code>@Data\n@EqualsAndHashCode(callSuper = false)\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\n@Entity\n@Table(name = Subject.NAME, uniqueConstraints = {@UniqueConstraint(name = &quot;UC_SUBJECT&quot;,\n        columnNames = {&quot;STUDY_KEY&quot;, &quot;SUBJECT_UNIQUEID&quot;, &quot;SUBJECT_UNIQUEID_SOURCE&quot;})})\npublic class Subject extends Auditing {\n\n  static final String NAME = &quot;SUBJECT&quot;;\n\n  static final String PREF = &quot;SUBJ&quot;;\n\n  @Id\n  @GeneratedValue(generator = &quot;subject_gen&quot;, strategy = GenerationType.SEQUENCE)\n  @GenericGenerator(name = &quot;subject_gen&quot;, strategy = &quot;com.awesome.db.AppIdGenerator&quot;, parameters = {\n          @org.hibernate.annotations.Parameter(name = &quot;prefix&quot;, value = Subject.PREF),\n          @org.hibernate.annotations.Parameter(name = &quot;sequence_name&quot;, value = Subject.NAME + SequenceStyleGenerator.DEF_SEQUENCE_SUFFIX),\n          @org.hibernate.annotations.Parameter(name = &quot;increment_size&quot;, value = &quot;1&quot;)\n          //@org.hibernate.annotations.Parameter(name = &quot;initial_value&quot;, value = &quot;21&quot;),\n          //@org.hibernate.annotations.Parameter(name = &quot;optimizer&quot;, value = &quot;pooled-lo&quot;),\n  })\n  @Column(name = &quot;SUBJECT_KEY&quot;, unique = true, nullable = false, updatable = false, length = 13)\n  private String subjectKey;\n\n  @ManyToOne(optional = false)\n  @JoinColumn(name = &quot;STUDY_KEY&quot;, referencedColumnName = &quot;STUDY_KEY&quot;, foreignKey = @ForeignKey(name = &quot;FK_STUDY_KEY&quot;),\n      nullable = false, updatable = false)\n  private Study study;\n\n  @NotNull\n  @Column(name = &quot;SUBJECT_UNIQUEID&quot;, length = 120)\n  private String subjectId;\n\n  @NotNull\n  @Column(name = &quot;SUBJECT_UNIQUEID_SOURCE&quot;, length = 120)\n  private String subjectIdSource;\n}\n</code></pre>\n<p>In result:</p>\n<ol>\n<li>uses numeric db sequence counter</li>\n<li>supports the database structure and integrated optimizer“s options</li>\n</ol>\n<p>Keep in mind,\nif You are using any population scripts like <em>import.sql/data.sql</em> then <strong>initial_value</strong> parameter must be synchronised with number of rows in the table manually (hardcoded or provided from outside app) or <strong>nextval</strong> adopted to the id string key format</p>\n<pre><code>--import.sql\nINSERT INTO SUBJECT (subject_key, subject_uniqueid, subject_uniqueid_source, created_date, modified_date, study_key) VALUES('SUBJ'||to_char(nextval('subject_seq'), 'FM000000009'),'1234','Other.App','2023-05-17 14:05:46.521000','2023-05-17 14:05:46.521000','STUD000000001');\n</code></pre>\n"}],"owner":{"account_id":2933975,"reputation":95,"user_id":2513408,"display_name":"Takmashido"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":30807,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"accepted_answer_id":37749564,"answer_count":3,"score":9,"last_activity_date":1684335689,"creation_date":1465558406,"question_id":37747218,"body_markdown":"I&#39;m using hibernate with spring, h2 and liquibase and I&#39;m trying to make a custom String id generator for my entities by taking example with this [blog post][1] but I&#39;m getting an error : `Caused by: org.hibernate.id.IdentifierGenerationException: Unknown integral data type for ids : java.lang.String`\r\n\r\nHere my SequenceStyleGenerator code :\r\n\r\n    public class CTCIDGenerator extends SequenceStyleGenerator {\r\n    \r\n\t    @Override\r\n\t    public Serializable generate(SessionImplementor session, Object obj) {\r\n\t\t    if (obj instanceof Identifiable) {\r\n\t\t\t    Identifiable identifiable = (Identifiable) obj;\r\n\t\t\t    Serializable id = identifiable.getId();\r\n\t\t\t    if (id != null) {\r\n\t\t\t\t    return id;\r\n\t\t\t    }\r\n\t\t    }\r\n\t\t    return &quot;CTC&quot;+super.generate(session, obj);\r\n\t    }\r\n    }\r\n\r\nMy entity code : \r\n\r\n    @Entity\r\n    @Table(name = &quot;contact&quot;)\r\n    public class Contact implements Serializable, Identifiable&lt;String&gt; {\r\n\r\n\t    private static final long serialVersionUID = 1L;\r\n\r\n\t    @Id\r\n\t    @GenericGenerator(\r\n\t\t    name = &quot;assigned-sequence&quot;,\r\n\t\t    strategy =     &quot;net.atos.seirich.support.domain.idgenerator.CTCIDGenerator&quot;,\r\n    \t\tparameters = @org.hibernate.annotations.Parameter(\r\n                name = &quot;sequence_name&quot;, \r\n                value = &quot;hibernate_sequence&quot;\r\n            )\r\n\t    )\r\n\t    @GeneratedValue(generator = &quot;assigned-sequence&quot;, strategy = GenerationType.SEQUENCE)\r\n\t    private String id;\r\n\r\n\t    public String getId() {\r\n\t\t    return id;\r\n\t    }\r\n\r\n\t    public void setId(String id) {\r\n\t\t    this.id = id;\r\n\t    }\r\n    }\r\n\r\nAnd the liquibase XML :\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;databaseChangeLog\r\n    xmlns=&quot;http://www.liquibase.org/xml/ns/dbchangelog&quot;\r\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    xsi:schemaLocation=&quot;http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.4.xsd&quot;&gt;\r\n\r\n        &lt;property name=&quot;autoIncrement&quot; value=&quot;true&quot; dbms=&quot;mysql,h2,postgresql,oracle&quot;/&gt;\r\n\r\n        &lt;property name=&quot;floatType&quot; value=&quot;float4&quot; dbms=&quot;postgresql, h2&quot;/&gt;\r\n        &lt;property name=&quot;floatType&quot; value=&quot;float&quot; dbms=&quot;mysql, oracle&quot;/&gt;\r\n\r\n        &lt;changeSet id=&quot;20160513091901-1&quot; author=&quot;jhipster&quot;&gt;\r\n            &lt;createTable tableName=&quot;contact&quot;&gt;\r\n                &lt;column name=&quot;id&quot; type=&quot;longvarchar&quot; autoIncrement=&quot;${autoIncrement}&quot;&gt;\r\n                    &lt;constraints primaryKey=&quot;true&quot; nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n        &lt;/changeSet&gt;\r\n    &lt;/databaseChangeLog&gt;\r\n\r\n\r\nBtw is it possible to avoid the parameter sequence_name so hibernate can handle this by itself ?\r\n\r\nIf anyone can help me, Thanks !\r\n\r\n  [1]: https://vladmihalcea.com/how-to-combine-the-hibernate-assigned-generator-with-a-sequence-or-an-identity-column/comment-page-1/#comment-7574","title":"How to implement a custom String sequence identifier generator with Hibernate","body":"<p>I'm using hibernate with spring, h2 and liquibase and I'm trying to make a custom String id generator for my entities by taking example with this <a href=\"https://vladmihalcea.com/how-to-combine-the-hibernate-assigned-generator-with-a-sequence-or-an-identity-column/comment-page-1/#comment-7574\" rel=\"noreferrer\">blog post</a> but I'm getting an error : <code>Caused by: org.hibernate.id.IdentifierGenerationException: Unknown integral data type for ids : java.lang.String</code></p>\n\n<p>Here my SequenceStyleGenerator code :</p>\n\n<pre><code>public class CTCIDGenerator extends SequenceStyleGenerator {\n\n    @Override\n    public Serializable generate(SessionImplementor session, Object obj) {\n        if (obj instanceof Identifiable) {\n            Identifiable identifiable = (Identifiable) obj;\n            Serializable id = identifiable.getId();\n            if (id != null) {\n                return id;\n            }\n        }\n        return \"CTC\"+super.generate(session, obj);\n    }\n}\n</code></pre>\n\n<p>My entity code : </p>\n\n<pre><code>@Entity\n@Table(name = \"contact\")\npublic class Contact implements Serializable, Identifiable&lt;String&gt; {\n\n    private static final long serialVersionUID = 1L;\n\n    @Id\n    @GenericGenerator(\n        name = \"assigned-sequence\",\n        strategy =     \"net.atos.seirich.support.domain.idgenerator.CTCIDGenerator\",\n        parameters = @org.hibernate.annotations.Parameter(\n            name = \"sequence_name\", \n            value = \"hibernate_sequence\"\n        )\n    )\n    @GeneratedValue(generator = \"assigned-sequence\", strategy = GenerationType.SEQUENCE)\n    private String id;\n\n    public String getId() {\n        return id;\n    }\n\n    public void setId(String id) {\n        this.id = id;\n    }\n}\n</code></pre>\n\n<p>And the liquibase XML :</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;databaseChangeLog\nxmlns=\"http://www.liquibase.org/xml/ns/dbchangelog\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\nxsi:schemaLocation=\"http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.4.xsd\"&gt;\n\n    &lt;property name=\"autoIncrement\" value=\"true\" dbms=\"mysql,h2,postgresql,oracle\"/&gt;\n\n    &lt;property name=\"floatType\" value=\"float4\" dbms=\"postgresql, h2\"/&gt;\n    &lt;property name=\"floatType\" value=\"float\" dbms=\"mysql, oracle\"/&gt;\n\n    &lt;changeSet id=\"20160513091901-1\" author=\"jhipster\"&gt;\n        &lt;createTable tableName=\"contact\"&gt;\n            &lt;column name=\"id\" type=\"longvarchar\" autoIncrement=\"${autoIncrement}\"&gt;\n                &lt;constraints primaryKey=\"true\" nullable=\"false\"/&gt;\n            &lt;/column&gt;\n    &lt;/changeSet&gt;\n&lt;/databaseChangeLog&gt;\n</code></pre>\n\n<p>Btw is it possible to avoid the parameter sequence_name so hibernate can handle this by itself ?</p>\n\n<p>If anyone can help me, Thanks !</p>\n"},{"tags":["java","elasticsearch","elasticsearch-dsl"],"comments":[{"owner":{"account_id":3209227,"reputation":471,"user_id":2709542,"display_name":"Mathew"},"score":0,"creation_date":1684315735,"post_id":76269270,"comment_id":134499210,"body_markdown":"It&#39;s confusing to use two kinds of QueryBuilders to build your query.  Do you have a special reason for it ?","body":"It&#39;s confusing to use two kinds of QueryBuilders to build your query.  Do you have a special reason for it ?"}],"answers":[{"tags":[],"owner":{"account_id":20017325,"reputation":319,"user_id":14673018,"display_name":"Sanal M"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1684335401,"creation_date":1684335401,"answer_id":76273477,"question_id":76269270,"body_markdown":"I was able to write the TermQuery as follows,\r\n\r\n```\r\nTermsQueryField numberField = new TermsQueryField.Builder()\r\n .value(List.of(projectNumber).stream().map(FieldValue::of).collect(Collectors.toList()))\r\n .build();\r\n\r\nsubQuery.should(QueryBuilders.terms(term -&gt; term.field(&quot;projects&quot;).terms(numberField)));\r\n```","title":"create elastic search terms query in java using query_dsl package","body":"<p>I was able to write the TermQuery as follows,</p>\n<pre><code>TermsQueryField numberField = new TermsQueryField.Builder()\n .value(List.of(projectNumber).stream().map(FieldValue::of).collect(Collectors.toList()))\n .build();\n\nsubQuery.should(QueryBuilders.terms(term -&gt; term.field(&quot;projects&quot;).terms(numberField)));\n</code></pre>\n"}],"owner":{"account_id":20017325,"reputation":319,"user_id":14673018,"display_name":"Sanal M"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":393,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76273477,"answer_count":1,"score":0,"last_activity_date":1684335401,"creation_date":1684306422,"question_id":76269270,"body_markdown":"```\r\nimport co.elastic.clients.elasticsearch._types.query_dsl.*;\r\n                     *\r\n                     *\r\n\r\n\r\nBoolQuery.Builder mainQuery = QueryBuilders.bool();\r\n                     *\r\n                     *\r\n                     *\r\n //          existing logic, which cannot be changed\r\n                     *\r\n                     *\r\nBoolQuery.Builder subQuery = QueryBuilders.bool();\r\nsubQuery.should(QueryBuilders.wildcard().field(&quot;projectNumber&quot;).value(&#39;*&#39; + projectNumber + &#39;*&#39;).build()._toQuery());\r\nsubQuery.should(org.elasticsearch.index.query.QueryBuilders.termsQuery(&quot;projects&quot;, projectNumber).toQuery());\r\nmainQuery.must(subQuery.build()._toQuery());\r\n```\r\n\r\nI have saved a document in the elastic search and it contains the field &quot;projectNumber&quot; and a list &quot;projects&quot;. Both are strings and I want to select all the documents if the project number is equal to the field &quot;projectNumber&quot; or it is present in the list &quot;projects&quot;. the above-mentioned code has an issue. the &quot;.toQuery()&quot; method in &quot;termsQuery&quot; gives compilation error, &quot;Cannot access org.apache.lucene.search.Query&quot;. and if I remove the &quot;.toQuery()&quot; i will get &quot;Cannot resolve method &#39;should(TermsQueryBuilder)&#39;&quot; error. \r\n\r\nCan anyone help? if the above-mentioned TermsQuery declaration is not possible is it possible to declare the terms query like &quot;TermsQuery.Builder termsQuery = QueryBuilders.terms();&quot;?","title":"create elastic search terms query in java using query_dsl package","body":"<pre><code>import co.elastic.clients.elasticsearch._types.query_dsl.*;\n                     *\n                     *\n\n\nBoolQuery.Builder mainQuery = QueryBuilders.bool();\n                     *\n                     *\n                     *\n //          existing logic, which cannot be changed\n                     *\n                     *\nBoolQuery.Builder subQuery = QueryBuilders.bool();\nsubQuery.should(QueryBuilders.wildcard().field(&quot;projectNumber&quot;).value('*' + projectNumber + '*').build()._toQuery());\nsubQuery.should(org.elasticsearch.index.query.QueryBuilders.termsQuery(&quot;projects&quot;, projectNumber).toQuery());\nmainQuery.must(subQuery.build()._toQuery());\n</code></pre>\n<p>I have saved a document in the elastic search and it contains the field &quot;projectNumber&quot; and a list &quot;projects&quot;. Both are strings and I want to select all the documents if the project number is equal to the field &quot;projectNumber&quot; or it is present in the list &quot;projects&quot;. the above-mentioned code has an issue. the &quot;.toQuery()&quot; method in &quot;termsQuery&quot; gives compilation error, &quot;Cannot access org.apache.lucene.search.Query&quot;. and if I remove the &quot;.toQuery()&quot; i will get &quot;Cannot resolve method 'should(TermsQueryBuilder)'&quot; error.</p>\n<p>Can anyone help? if the above-mentioned TermsQuery declaration is not possible is it possible to declare the terms query like &quot;TermsQuery.Builder termsQuery = QueryBuilders.terms();&quot;?</p>\n"},{"tags":["java","android","runtime-error"],"owner":{"account_id":28520905,"reputation":1,"user_id":21829635,"display_name":"Yash Deshmukh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684335386,"creation_date":1684335304,"question_id":76273463,"body_markdown":"9\r\n\r\nI am facing this issue while I run my android app. Does anyone know about this issue and how to fix it?\r\n\r\nI am facing this issue in my Logcat while I run my android app. Does anyone know about this issue and how to fix it?\r\n\r\nThe app dones&#39;t crash, but when I select option in spinner and click on button then it will not show result on google map\r\n\r\nMainActivity.Java\r\n\r\n```\r\npackage com.example.nearbyplacedemo;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.core.app.ActivityCompat;\r\nimport androidx.loader.content.AsyncTaskLoader;\r\n\r\nimport android.Manifest;\r\nimport android.content.AsyncQueryHandler;\r\nimport android.content.pm.PackageManager;\r\nimport android.location.Location;\r\nimport android.os.AsyncTask;\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\nimport android.view.View;\r\nimport android.widget.ArrayAdapter;\r\nimport android.widget.Button;\r\nimport android.widget.Spinner;\r\n\r\nimport com.google.android.gms.location.FusedLocationProviderClient;\r\nimport com.google.android.gms.location.LocationServices;\r\nimport com.google.android.gms.maps.CameraUpdateFactory;\r\nimport com.google.android.gms.maps.GoogleMap;\r\nimport com.google.android.gms.maps.OnMapReadyCallback;\r\nimport com.google.android.gms.maps.SupportMapFragment;\r\nimport com.google.android.gms.maps.model.LatLng;\r\nimport com.google.android.gms.maps.model.MarkerOptions;\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.android.gms.tasks.Task;\r\n\r\nimport org.json.JSONException;\r\nimport org.json.JSONObject;\r\n\r\nimport java.io.BufferedReader;\r\nimport java.io.IOException;\r\nimport java.io.InputStream;\r\nimport java.io.InputStreamReader;\r\nimport java.net.HttpURLConnection;\r\nimport java.net.URL;\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n    //initialize variable\r\n    Spinner sp_type;\r\n    Button bt_find;\r\n    SupportMapFragment supportMapFragment;\r\n    GoogleMap map;\r\n    FusedLocationProviderClient fusedLocationProviderClient;\r\n    double currentLat = 0, currentLong = 0;\r\n\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n        //Assign Variable\r\n        sp_type = findViewById(R.id.sp_type);\r\n        bt_find = findViewById(R.id.bt_find);\r\n        supportMapFragment = (SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.google_map);\r\n\r\n        //Initialize Array of place list\r\n        String[] placeTypeList = {&quot;hospital&quot;, &quot;medical&quot;, &quot;atm&quot;};\r\n        //Initialize Array of Place name list\r\n        String[] placeNameList = {&quot;Hospital&quot;, &quot;Medical&quot;, &quot;ATM&quot;};\r\n\r\n        //set Adapter on Spinner\r\n        sp_type.setAdapter(new ArrayAdapter&lt;&gt;(MainActivity.this, android.R.layout.simple_spinner_dropdown_item, placeNameList));\r\n\r\n        //Initialize Fused location client\r\n        fusedLocationProviderClient = LocationServices.getFusedLocationProviderClient(this);\r\n\r\n        //check permission\r\n        if (ActivityCompat.checkSelfPermission(MainActivity.this, Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\r\n            //if permission is granted\r\n            //call method\r\n            getCurrentLocation();\r\n        } else {\r\n            //when permission denied\r\n            //request permission\r\n            ActivityCompat.requestPermissions(MainActivity.this, new String[]{Manifest.permission.ACCESS_FINE_LOCATION}, 44);\r\n\r\n        }\r\n        bt_find.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                //get selected position of spinner\r\n                int i = sp_type.getSelectedItemPosition();\r\n                //Initialize Url\r\n                String url = &quot;https://maps.googleapis.com/maps/api/place/nearbysearch/json&quot; +//Url\r\n                        &quot;?location=&quot; + currentLat + &quot;,&quot; + currentLong +//location latitude and longitude\r\n                        &quot;&amp;radius=5000&quot; +//nearby Radius\r\n                        &quot;&amp;type&quot; + placeTypeList[i] +//place type\r\n                        &quot;&amp;sensor = true&quot; +//Sensor\r\n                        &quot;&amp;key=&quot; + &quot;AIzaSyCEidC6oECzj0IexspcvUpqnKPS2_nhKfQ&quot;;\r\n\r\n                //execute place task method to download json data\r\n                new Placetask().execute(url);\r\n            }\r\n        });\r\n\r\n\r\n    }\r\n\r\n    private void getCurrentLocation() {\r\n        if(ActivityCompat.checkSelfPermission(this , Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED\r\n                &amp;&amp; ActivityCompat.checkSelfPermission\r\n                (this , Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED)\r\n        {\r\n            ActivityCompat.requestPermissions(this, new String[]{Manifest.permission.ACCESS_FINE_LOCATION},44);\r\n            return;\r\n        }\r\n\r\n        //Initailize task location\r\n        Task&lt;Location&gt; task = fusedLocationProviderClient.getLastLocation();\r\n        task.addOnSuccessListener(new OnSuccessListener&lt;Location&gt;() {\r\n            @Override\r\n            public void onSuccess(Location location) {\r\n                //when successs\r\n                if(location!=null){\r\n                    //when location is not null\r\n                    //get current latitude\r\n                    currentLat = location.getLatitude();\r\n                    //get current longitude\r\n                    currentLong = location.getLongitude();\r\n                    //sync map\r\n                    supportMapFragment.getMapAsync(new OnMapReadyCallback() {\r\n                        @Override\r\n                        public void onMapReady(@NonNull GoogleMap googleMap) {\r\n                            //when map is ready\r\n                            map = googleMap;\r\n                            //zoom on current location\r\n                            map.animateCamera(CameraUpdateFactory.newLatLngZoom(new LatLng(currentLat,currentLong),14));\r\n\r\n                        }\r\n                    });\r\n\r\n                }\r\n\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    @Override\r\n    public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {\r\n        if(requestCode==44){\r\n            if (grantResults.length &gt;0 &amp;&amp; grantResults[0] == PackageManager.PERMISSION_GRANTED){\r\n                //when permission is granted\r\n                //call methode\r\n                getCurrentLocation();\r\n            }\r\n        }\r\n    }\r\n\r\n    private class Placetask extends AsyncTask&lt;String,Integer,String&gt; {\r\n        @Override\r\n        protected String doInBackground(String... strings) {\r\n            String data ;\r\n            try {\r\n                //Initialize data\r\n                data=downloadUrl(strings[0]);\r\n            } catch (IOException e) {\r\n                throw new RuntimeException(e);\r\n            }\r\n\r\n            return data;\r\n        }\r\n\r\n        @Override\r\n        protected void onPostExecute(String s) {\r\n            //Excute parser task\r\n            new ParserTask().execute(s);\r\n        }\r\n    }\r\n\r\n    private String downloadUrl(String string) throws IOException {\r\n        //Initialize Url\r\n        URL url = new URL(string);\r\n        //Initialize connection\r\n        HttpURLConnection connection = (HttpURLConnection) url.openConnection();\r\n        //connect connection\r\n        connection.connect();\r\n        //initialize inputstream\r\n        InputStream stream = connection.getInputStream();\r\n        //Initialize bufferreader\r\n        BufferedReader reader= new BufferedReader(new InputStreamReader(stream));\r\n        //Initialize string builder\r\n        StringBuilder builder = new StringBuilder();\r\n        //Initailize String variable\r\n        String line = &quot;&quot;;\r\n        //use while loop\r\n        while ((line = reader.readLine())!=null){\r\n            //append line\r\n            builder.append(line);\r\n\r\n        }\r\n        //get append data\r\n        String data = builder.toString();\r\n        //close reader\r\n        reader.close();\r\n        //return data\r\n        return data;\r\n\r\n\r\n    }\r\n\r\n    private class ParserTask extends AsyncTask&lt;String,Integer, List&lt;HashMap&lt;String,String&gt;&gt;&gt; {\r\n        @Override\r\n        protected List&lt;HashMap&lt;String, String&gt;&gt; doInBackground(String... strings) {\r\n           //create jason parser\r\n            JsonPaeser jsonPaeser = new JsonPaeser();\r\n             //Initialize hash map list\r\n            List&lt;HashMap&lt;String,String&gt;&gt; mapList=null;\r\n            JSONObject object ;\r\n            try {\r\n                //intialize jsonobject\r\n                object = new JSONObject(strings[0]);\r\n                //Parse jsonobject\r\n                mapList = jsonPaeser.parseResult(object);\r\n            } catch (JSONException e) {\r\n                throw new RuntimeException(e);\r\n            }\r\n            //return map list\r\n            return mapList;\r\n        }\r\n\r\n        @Override\r\n        protected void onPostExecute(List&lt;HashMap&lt;String, String&gt;&gt; hashMaps) {\r\n            if (map != null) {\r\n                map.clear();\r\n            } else {\r\n                // Handle the case when the GoogleMap object is null\r\n                Log.e(&quot;GoogleMap&quot;, &quot;GoogleMap object is null&quot;);\r\n            }\r\n\r\n            //clear map\r\n           // map.clear();\r\n            //use for loop\r\n            for (int i=0;i&lt;hashMaps.size();i++){\r\n                //initialize hashmap\r\n                HashMap&lt;String,String&gt; hashMapList = hashMaps.get(i);\r\n                //get latitude\r\n                double lat = Double.parseDouble(hashMapList.get(&quot;lat&quot;));\r\n                //get longitude\r\n                double lng = Double.parseDouble(hashMapList.get(&quot;lng&quot;));\r\n                //get name\r\n                String name = hashMapList.get(&quot;name&quot;);\r\n                //concat latitude longitude\r\n                LatLng latLng = new LatLng(lat,lng);\r\n                //Initialize Marker Option\r\n                MarkerOptions options = new MarkerOptions();\r\n                //set position\r\n                options.position(latLng);\r\n                //set title\r\n                options.title(name);\r\n                //add marker option\r\n                map.addMarker(options);\r\n\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nJsonParser.java:-\r\n\r\n```\r\npackage com.example.nearbyplacedemo;\r\nimport org.json.JSONArray;\r\nimport org.json.JSONException;\r\nimport org.json.JSONObject;\r\n\r\nimport java.util.ArrayList;\r\nimport  java.util.HashMap;\r\nimport java.util.List;\r\n\r\npublic class JsonPaeser {\r\n    private HashMap&lt;String , String&gt; parseJsonObject(JSONObject object){\r\n        //initialize hashmap\r\n        HashMap&lt;String,String&gt; datalist = new HashMap&lt;&gt;();\r\n        //get name form object\r\n        try {\r\n            String name = object.getString(&quot;name&quot;);\r\n            //get latitude from object\r\n            String latitude = object.getJSONObject(&quot;geometery&quot;)\r\n                    .getJSONObject(&quot;location&quot;).getString(&quot;lat&quot;);\r\n            //get longitude from object\r\n            String longitude = object.getJSONObject(&quot;geometery&quot;)\r\n                    .getJSONObject(&quot;location&quot;).getString(&quot;lng&quot;);\r\n            //put all value in hashmap\r\n            datalist.put(&quot;name&quot;,name);\r\n            datalist.put(&quot;lat&quot;,latitude);\r\n            datalist.put(&quot;lng&quot;,longitude);\r\n\r\n        } catch (JSONException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n        return datalist;\r\n\r\n    }\r\n    private List&lt;HashMap&lt;String,String&gt;&gt; parseJsonArray(JSONArray jsonArray){\r\n        //Initialize hashmap list\r\n        List&lt;HashMap&lt;String,String&gt;&gt; datalist= new ArrayList&lt;&gt;();\r\n        for (int i=0;i&lt;jsonArray.length();i++){\r\n            try {\r\n                //Initialize Hashmap\r\n                HashMap&lt;String,String&gt; data = parseJsonObject((JSONObject) jsonArray.get(i));\r\n                //add data in hashmap\r\n                datalist.add(data);\r\n            } catch (JSONException e) {\r\n                throw new RuntimeException(e);\r\n            }\r\n        }\r\n        //retuen hashmap list\r\n        return datalist;\r\n    }\r\n    public List&lt;HashMap&lt;String,String&gt;&gt; parseResult(JSONObject object){\r\n        //initialize jsonArray\r\n        JSONArray jsonArray ;\r\n\r\n        try {\r\n            //get result array\r\n            jsonArray = object.getJSONArray(&quot;results&quot;);\r\n        } catch (JSONException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n        //return array\r\n        return parseJsonArray(jsonArray);\r\n\r\n    }\r\n}\r\n```\r\n\r\nI Build Android App in which find user current location and the if user want nearby hospital, medical, atm then it select and the app show result. but in my app app run successfully but at the time user enter input app show error in logcat and don&#39;t show result","title":"E/libprocessgroup: set_timerslack_ns write failed: Operation not permitted","body":"<p>9</p>\n<p>I am facing this issue while I run my android app. Does anyone know about this issue and how to fix it?</p>\n<p>I am facing this issue in my Logcat while I run my android app. Does anyone know about this issue and how to fix it?</p>\n<p>The app dones't crash, but when I select option in spinner and click on button then it will not show result on google map</p>\n<p>MainActivity.Java</p>\n<pre><code>package com.example.nearbyplacedemo;\n\nimport androidx.annotation.NonNull;\nimport androidx.appcompat.app.AppCompatActivity;\nimport androidx.core.app.ActivityCompat;\nimport androidx.loader.content.AsyncTaskLoader;\n\nimport android.Manifest;\nimport android.content.AsyncQueryHandler;\nimport android.content.pm.PackageManager;\nimport android.location.Location;\nimport android.os.AsyncTask;\nimport android.os.Bundle;\nimport android.util.Log;\nimport android.view.View;\nimport android.widget.ArrayAdapter;\nimport android.widget.Button;\nimport android.widget.Spinner;\n\nimport com.google.android.gms.location.FusedLocationProviderClient;\nimport com.google.android.gms.location.LocationServices;\nimport com.google.android.gms.maps.CameraUpdateFactory;\nimport com.google.android.gms.maps.GoogleMap;\nimport com.google.android.gms.maps.OnMapReadyCallback;\nimport com.google.android.gms.maps.SupportMapFragment;\nimport com.google.android.gms.maps.model.LatLng;\nimport com.google.android.gms.maps.model.MarkerOptions;\nimport com.google.android.gms.tasks.OnSuccessListener;\nimport com.google.android.gms.tasks.Task;\n\nimport org.json.JSONException;\nimport org.json.JSONObject;\n\nimport java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.InputStreamReader;\nimport java.net.HttpURLConnection;\nimport java.net.URL;\nimport java.util.HashMap;\nimport java.util.List;\n\npublic class MainActivity extends AppCompatActivity {\n    //initialize variable\n    Spinner sp_type;\n    Button bt_find;\n    SupportMapFragment supportMapFragment;\n    GoogleMap map;\n    FusedLocationProviderClient fusedLocationProviderClient;\n    double currentLat = 0, currentLong = 0;\n\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        //Assign Variable\n        sp_type = findViewById(R.id.sp_type);\n        bt_find = findViewById(R.id.bt_find);\n        supportMapFragment = (SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.google_map);\n\n        //Initialize Array of place list\n        String[] placeTypeList = {&quot;hospital&quot;, &quot;medical&quot;, &quot;atm&quot;};\n        //Initialize Array of Place name list\n        String[] placeNameList = {&quot;Hospital&quot;, &quot;Medical&quot;, &quot;ATM&quot;};\n\n        //set Adapter on Spinner\n        sp_type.setAdapter(new ArrayAdapter&lt;&gt;(MainActivity.this, android.R.layout.simple_spinner_dropdown_item, placeNameList));\n\n        //Initialize Fused location client\n        fusedLocationProviderClient = LocationServices.getFusedLocationProviderClient(this);\n\n        //check permission\n        if (ActivityCompat.checkSelfPermission(MainActivity.this, Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\n            //if permission is granted\n            //call method\n            getCurrentLocation();\n        } else {\n            //when permission denied\n            //request permission\n            ActivityCompat.requestPermissions(MainActivity.this, new String[]{Manifest.permission.ACCESS_FINE_LOCATION}, 44);\n\n        }\n        bt_find.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                //get selected position of spinner\n                int i = sp_type.getSelectedItemPosition();\n                //Initialize Url\n                String url = &quot;https://maps.googleapis.com/maps/api/place/nearbysearch/json&quot; +//Url\n                        &quot;?location=&quot; + currentLat + &quot;,&quot; + currentLong +//location latitude and longitude\n                        &quot;&amp;radius=5000&quot; +//nearby Radius\n                        &quot;&amp;type&quot; + placeTypeList[i] +//place type\n                        &quot;&amp;sensor = true&quot; +//Sensor\n                        &quot;&amp;key=&quot; + &quot;AIzaSyCEidC6oECzj0IexspcvUpqnKPS2_nhKfQ&quot;;\n\n                //execute place task method to download json data\n                new Placetask().execute(url);\n            }\n        });\n\n\n    }\n\n    private void getCurrentLocation() {\n        if(ActivityCompat.checkSelfPermission(this , Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED\n                &amp;&amp; ActivityCompat.checkSelfPermission\n                (this , Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED)\n        {\n            ActivityCompat.requestPermissions(this, new String[]{Manifest.permission.ACCESS_FINE_LOCATION},44);\n            return;\n        }\n\n        //Initailize task location\n        Task&lt;Location&gt; task = fusedLocationProviderClient.getLastLocation();\n        task.addOnSuccessListener(new OnSuccessListener&lt;Location&gt;() {\n            @Override\n            public void onSuccess(Location location) {\n                //when successs\n                if(location!=null){\n                    //when location is not null\n                    //get current latitude\n                    currentLat = location.getLatitude();\n                    //get current longitude\n                    currentLong = location.getLongitude();\n                    //sync map\n                    supportMapFragment.getMapAsync(new OnMapReadyCallback() {\n                        @Override\n                        public void onMapReady(@NonNull GoogleMap googleMap) {\n                            //when map is ready\n                            map = googleMap;\n                            //zoom on current location\n                            map.animateCamera(CameraUpdateFactory.newLatLngZoom(new LatLng(currentLat,currentLong),14));\n\n                        }\n                    });\n\n                }\n\n            }\n        });\n\n    }\n\n    @Override\n    public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {\n        if(requestCode==44){\n            if (grantResults.length &gt;0 &amp;&amp; grantResults[0] == PackageManager.PERMISSION_GRANTED){\n                //when permission is granted\n                //call methode\n                getCurrentLocation();\n            }\n        }\n    }\n\n    private class Placetask extends AsyncTask&lt;String,Integer,String&gt; {\n        @Override\n        protected String doInBackground(String... strings) {\n            String data ;\n            try {\n                //Initialize data\n                data=downloadUrl(strings[0]);\n            } catch (IOException e) {\n                throw new RuntimeException(e);\n            }\n\n            return data;\n        }\n\n        @Override\n        protected void onPostExecute(String s) {\n            //Excute parser task\n            new ParserTask().execute(s);\n        }\n    }\n\n    private String downloadUrl(String string) throws IOException {\n        //Initialize Url\n        URL url = new URL(string);\n        //Initialize connection\n        HttpURLConnection connection = (HttpURLConnection) url.openConnection();\n        //connect connection\n        connection.connect();\n        //initialize inputstream\n        InputStream stream = connection.getInputStream();\n        //Initialize bufferreader\n        BufferedReader reader= new BufferedReader(new InputStreamReader(stream));\n        //Initialize string builder\n        StringBuilder builder = new StringBuilder();\n        //Initailize String variable\n        String line = &quot;&quot;;\n        //use while loop\n        while ((line = reader.readLine())!=null){\n            //append line\n            builder.append(line);\n\n        }\n        //get append data\n        String data = builder.toString();\n        //close reader\n        reader.close();\n        //return data\n        return data;\n\n\n    }\n\n    private class ParserTask extends AsyncTask&lt;String,Integer, List&lt;HashMap&lt;String,String&gt;&gt;&gt; {\n        @Override\n        protected List&lt;HashMap&lt;String, String&gt;&gt; doInBackground(String... strings) {\n           //create jason parser\n            JsonPaeser jsonPaeser = new JsonPaeser();\n             //Initialize hash map list\n            List&lt;HashMap&lt;String,String&gt;&gt; mapList=null;\n            JSONObject object ;\n            try {\n                //intialize jsonobject\n                object = new JSONObject(strings[0]);\n                //Parse jsonobject\n                mapList = jsonPaeser.parseResult(object);\n            } catch (JSONException e) {\n                throw new RuntimeException(e);\n            }\n            //return map list\n            return mapList;\n        }\n\n        @Override\n        protected void onPostExecute(List&lt;HashMap&lt;String, String&gt;&gt; hashMaps) {\n            if (map != null) {\n                map.clear();\n            } else {\n                // Handle the case when the GoogleMap object is null\n                Log.e(&quot;GoogleMap&quot;, &quot;GoogleMap object is null&quot;);\n            }\n\n            //clear map\n           // map.clear();\n            //use for loop\n            for (int i=0;i&lt;hashMaps.size();i++){\n                //initialize hashmap\n                HashMap&lt;String,String&gt; hashMapList = hashMaps.get(i);\n                //get latitude\n                double lat = Double.parseDouble(hashMapList.get(&quot;lat&quot;));\n                //get longitude\n                double lng = Double.parseDouble(hashMapList.get(&quot;lng&quot;));\n                //get name\n                String name = hashMapList.get(&quot;name&quot;);\n                //concat latitude longitude\n                LatLng latLng = new LatLng(lat,lng);\n                //Initialize Marker Option\n                MarkerOptions options = new MarkerOptions();\n                //set position\n                options.position(latLng);\n                //set title\n                options.title(name);\n                //add marker option\n                map.addMarker(options);\n\n            }\n        }\n    }\n}\n</code></pre>\n<p>JsonParser.java:-</p>\n<pre><code>package com.example.nearbyplacedemo;\nimport org.json.JSONArray;\nimport org.json.JSONException;\nimport org.json.JSONObject;\n\nimport java.util.ArrayList;\nimport  java.util.HashMap;\nimport java.util.List;\n\npublic class JsonPaeser {\n    private HashMap&lt;String , String&gt; parseJsonObject(JSONObject object){\n        //initialize hashmap\n        HashMap&lt;String,String&gt; datalist = new HashMap&lt;&gt;();\n        //get name form object\n        try {\n            String name = object.getString(&quot;name&quot;);\n            //get latitude from object\n            String latitude = object.getJSONObject(&quot;geometery&quot;)\n                    .getJSONObject(&quot;location&quot;).getString(&quot;lat&quot;);\n            //get longitude from object\n            String longitude = object.getJSONObject(&quot;geometery&quot;)\n                    .getJSONObject(&quot;location&quot;).getString(&quot;lng&quot;);\n            //put all value in hashmap\n            datalist.put(&quot;name&quot;,name);\n            datalist.put(&quot;lat&quot;,latitude);\n            datalist.put(&quot;lng&quot;,longitude);\n\n        } catch (JSONException e) {\n            throw new RuntimeException(e);\n        }\n        return datalist;\n\n    }\n    private List&lt;HashMap&lt;String,String&gt;&gt; parseJsonArray(JSONArray jsonArray){\n        //Initialize hashmap list\n        List&lt;HashMap&lt;String,String&gt;&gt; datalist= new ArrayList&lt;&gt;();\n        for (int i=0;i&lt;jsonArray.length();i++){\n            try {\n                //Initialize Hashmap\n                HashMap&lt;String,String&gt; data = parseJsonObject((JSONObject) jsonArray.get(i));\n                //add data in hashmap\n                datalist.add(data);\n            } catch (JSONException e) {\n                throw new RuntimeException(e);\n            }\n        }\n        //retuen hashmap list\n        return datalist;\n    }\n    public List&lt;HashMap&lt;String,String&gt;&gt; parseResult(JSONObject object){\n        //initialize jsonArray\n        JSONArray jsonArray ;\n\n        try {\n            //get result array\n            jsonArray = object.getJSONArray(&quot;results&quot;);\n        } catch (JSONException e) {\n            throw new RuntimeException(e);\n        }\n        //return array\n        return parseJsonArray(jsonArray);\n\n    }\n}\n</code></pre>\n<p>I Build Android App in which find user current location and the if user want nearby hospital, medical, atm then it select and the app show result. but in my app app run successfully but at the time user enter input app show error in logcat and don't show result</p>\n"},{"tags":["java","spring-boot","hibernate"],"comments":[{"owner":{"account_id":1938802,"reputation":12091,"user_id":1745544,"accept_rate":23,"display_name":"OldProgrammer"},"score":0,"creation_date":1684323042,"post_id":76271532,"comment_id":134500773,"body_markdown":"is the seuqence a PK?  That is a bad idea to reset sequences once their values are stored in tables.  Use a date or something more appropriate to represent a year.  That&#39;s not what sequences are for.  Either way, post a [mcve]","body":"is the seuqence a PK?  That is a bad idea to reset sequences once their values are stored in tables.  Use a date or something more appropriate to represent a year.  That&#39;s not what sequences are for.  Either way, post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"},{"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"score":0,"creation_date":1684323940,"post_id":76271532,"comment_id":134500957,"body_markdown":"You can add a separate column to the table like orderNumberInFinancialYear leaving the existing primary key as it is. For the new column you can use a different sequence and reset it when the financial year starts.","body":"You can add a separate column to the table like orderNumberInFinancialYear leaving the existing primary key as it is. For the new column you can use a different sequence and reset it when the financial year starts."}],"owner":{"account_id":18466339,"reputation":1,"user_id":19863583,"display_name":"param desai"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684334986,"creation_date":1684322443,"question_id":76271532,"body_markdown":"I am creating a sequence for a table. Starting of every financial year I want that sequence to start again from 1  without deleting the contents of the table for which the sequence is being used. I am using Spring Boot for doing all this work. I am using MySQL as database.\r\n\r\nI tried to truncate the sequence table and manually enter the next value but I received an error of duplication of primary key.","title":"Is there any way to reset a hibernate sequence once created and having data?","body":"<p>I am creating a sequence for a table. Starting of every financial year I want that sequence to start again from 1  without deleting the contents of the table for which the sequence is being used. I am using Spring Boot for doing all this work. I am using MySQL as database.</p>\n<p>I tried to truncate the sequence table and manually enter the next value but I received an error of duplication of primary key.</p>\n"},{"tags":["java","spring-boot","spring-mvc","jackson"],"owner":{"account_id":6420491,"reputation":63,"user_id":4977344,"display_name":"Stanislaw Slodyczka"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":220,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1684334857,"creation_date":1684334857,"question_id":76273395,"body_markdown":"I have an interface called `Response` with a single field named `info`. This interface is implemented by two classes from different packages. Both the interface and the classes have the same name (if that is of importance). The first class contains only the `String info` field, while the second class has an additional field called `Integer number`.\r\n\r\n```\r\npackage com.example;\r\n\r\n@JsonTypeInfo(use = DEDUCTION)\r\n@JsonSubTypes({\r\n        @JsonSubTypes.Type(com.example.package1.Response.class),\r\n        @JsonSubTypes.Type(com.example.package2.Response.class)})\r\npublic interface Response {\r\n    String getInfo();\r\n}\r\n\r\n///\r\ncom.example.package1;\r\n\r\npublic class Response implements com.example.Response {\r\n    String info;\r\n}\r\n\r\n///\r\ncom.example.package2;\r\n\r\npublic class Response implements com.example.Response {\r\n    String info;\r\n    Integer number;\r\n}\r\n\r\n```\r\n\r\nIn my controller, I explicitly specify the usage of com.example.package1.Response\r\n\r\n```\r\n    @PostMapping\r\n    fun start(\r\n        @RequestBody response: com.example.package1.Response\r\n    ): ResponseEntity&lt;&gt; {\r\n        ///code here\r\n    }\r\n```\r\n\r\nWhen pass a JSON object `{ &quot;info&quot;: &quot;info&quot; }`, expecting Jackson to infer the mapping to this class. However, I encounter an exception:\r\n\r\n```\r\nCannot deduce unique subtype of `com.example.package1.Response.class` (2 candidates match)]\r\n```\r\n\r\nHow can I fix this that controller can map to correct type?","title":"Jackson cannot deduce unique subtype in Spring Boot controller with 2 types sharing a common field","body":"<p>I have an interface called <code>Response</code> with a single field named <code>info</code>. This interface is implemented by two classes from different packages. Both the interface and the classes have the same name (if that is of importance). The first class contains only the <code>String info</code> field, while the second class has an additional field called <code>Integer number</code>.</p>\n<pre><code>package com.example;\n\n@JsonTypeInfo(use = DEDUCTION)\n@JsonSubTypes({\n        @JsonSubTypes.Type(com.example.package1.Response.class),\n        @JsonSubTypes.Type(com.example.package2.Response.class)})\npublic interface Response {\n    String getInfo();\n}\n\n///\ncom.example.package1;\n\npublic class Response implements com.example.Response {\n    String info;\n}\n\n///\ncom.example.package2;\n\npublic class Response implements com.example.Response {\n    String info;\n    Integer number;\n}\n\n</code></pre>\n<p>In my controller, I explicitly specify the usage of com.example.package1.Response</p>\n<pre><code>    @PostMapping\n    fun start(\n        @RequestBody response: com.example.package1.Response\n    ): ResponseEntity&lt;&gt; {\n        ///code here\n    }\n</code></pre>\n<p>When pass a JSON object <code>{ &quot;info&quot;: &quot;info&quot; }</code>, expecting Jackson to infer the mapping to this class. However, I encounter an exception:</p>\n<pre><code>Cannot deduce unique subtype of `com.example.package1.Response.class` (2 candidates match)]\n</code></pre>\n<p>How can I fix this that controller can map to correct type?</p>\n"},{"tags":["java","spring-boot","spring-data-jpa","swagger","springfox"],"comments":[{"owner":{"account_id":7646924,"reputation":1248,"user_id":5797253,"accept_rate":46,"display_name":"crimson589"},"score":0,"creation_date":1684330986,"post_id":76272091,"comment_id":134502689,"body_markdown":"What version of spring boot and gradle are you using?","body":"What version of spring boot and gradle are you using?"},{"owner":{"account_id":16116853,"reputation":55,"user_id":11633731,"display_name":"Saverio Mirko Viola"},"score":0,"creation_date":1684335175,"post_id":76272091,"comment_id":134503839,"body_markdown":"I suggest migrate to open api:https://springdoc.org/migrating-from-springfox.html","body":"I suggest migrate to open api:<a href=\"https://springdoc.org/migrating-from-springfox.html\" rel=\"nofollow noreferrer\">springdoc.org/migrating-from-springfox.html</a>"},{"owner":{"account_id":28620081,"reputation":1,"user_id":21913306,"display_name":"danirdev"},"score":0,"creation_date":1684342346,"post_id":76272091,"comment_id":134505584,"body_markdown":"Gradle 7.4 ,  Spring 3.0.6","body":"Gradle 7.4 ,  Spring 3.0.6"}],"owner":{"account_id":28620081,"reputation":1,"user_id":21913306,"display_name":"danirdev"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684334771,"creation_date":1684326367,"question_id":76272091,"body_markdown":"SwaggerConfig.java\r\n\r\n```java\r\npackage com.platzi.market.web.config;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport springfox.documentation.builders.RequestHandlerSelectors;\r\nimport springfox.documentation.spi.DocumentationType;\r\nimport springfox.documentation.spring.web.plugins.Docket;\r\nimport springfox.documentation.swagger2.annotations.EnableSwagger2;\r\n\r\n@Configuration\r\n@EnableSwagger2\r\npublic class SwaggerConfig {\r\n\r\n    @Bean\r\n    public Docket api() {\r\n        return new Docket(DocumentationType.SWAGGER_2)\r\n                \r\n                .select()\r\n                .apis(RequestHandlerSelectors.basePackage(&quot;com.platzi.market.web.controller&quot;))\r\n                .build();\r\n    }\r\n}\r\n```\r\n\r\nIf I remove @Configuration the error is removed but it doesn&#39;t work, because it opens the swagger but I get a browser alert that says &#39;&#39;Unable to infer base url. This is common when using dynamic servlet registration or when the API is behind an API Gateway. The base url is the root of where all the swagger resources are served. For e.g. if the api is available at http://example.org/api/v2/api-docs then the base url is http://example.org/api/. Please enter the location manually&quot; \r\n\r\n\r\nI don&#39;t know how to expose all the code, I leave you the dependencies of the build.gradle document\r\n\r\ndependencies in build.gradle:\r\n\r\n```groovy\r\ndependencies {\r\n\timplementation &#39;org.springframework.boot:spring-boot-starter-data-jpa&#39;\r\n\timplementation &#39;org.springframework.boot:spring-boot-starter-web&#39;\r\n\timplementation &#39;io.springfox:springfox-swagger2:2.9.2&#39;\r\n\timplementation &#39;io.springfox:springfox-swagger-ui:2.9.2&#39;\r\n\truntimeOnly&#39;com.mysql:mysql-connector-j&#39;\r\n\timplementation &#39;org.mapstruct:mapstruct:1.5.5.Final&#39;\r\n\tannotationProcessor &#39;org.mapstruct:mapstruct-processor:1.5.5.Final&#39;\r\n\ttestImplementation &#39;org.springframework.boot:spring-boot-starter-test&#39;\r\n}\r\n```\r\n\r\nI also tried another version 3.0.0 but the same thing happens to me. So I attach an image of the error with both annotations\r\n\r\n```none\r\nError: &quot;Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;apiListingScanner&#39; defined in URL jar:file:/C:/Users////&quot; \r\n```\r\n\r\n  [1]: https://i.stack.imgur.com/cXj40.png","title":"Problem with Swagger in Spring (error with dependencies)","body":"<p>SwaggerConfig.java</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.platzi.market.web.config;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport springfox.documentation.builders.RequestHandlerSelectors;\nimport springfox.documentation.spi.DocumentationType;\nimport springfox.documentation.spring.web.plugins.Docket;\nimport springfox.documentation.swagger2.annotations.EnableSwagger2;\n\n@Configuration\n@EnableSwagger2\npublic class SwaggerConfig {\n\n    @Bean\n    public Docket api() {\n        return new Docket(DocumentationType.SWAGGER_2)\n                \n                .select()\n                .apis(RequestHandlerSelectors.basePackage(&quot;com.platzi.market.web.controller&quot;))\n                .build();\n    }\n}\n</code></pre>\n<p>If I remove @Configuration the error is removed but it doesn't work, because it opens the swagger but I get a browser alert that says ''Unable to infer base url. This is common when using dynamic servlet registration or when the API is behind an API Gateway. The base url is the root of where all the swagger resources are served. For e.g. if the api is available at <a href=\"http://example.org/api/v2/api-docs\" rel=\"nofollow noreferrer\">http://example.org/api/v2/api-docs</a> then the base url is <a href=\"http://example.org/api/\" rel=\"nofollow noreferrer\">http://example.org/api/</a>. Please enter the location manually&quot;</p>\n<p>I don't know how to expose all the code, I leave you the dependencies of the build.gradle document</p>\n<p>dependencies in build.gradle:</p>\n<pre><code>dependencies {\n    implementation 'org.springframework.boot:spring-boot-starter-data-jpa'\n    implementation 'org.springframework.boot:spring-boot-starter-web'\n    implementation 'io.springfox:springfox-swagger2:2.9.2'\n    implementation 'io.springfox:springfox-swagger-ui:2.9.2'\n    runtimeOnly'com.mysql:mysql-connector-j'\n    implementation 'org.mapstruct:mapstruct:1.5.5.Final'\n    annotationProcessor 'org.mapstruct:mapstruct-processor:1.5.5.Final'\n    testImplementation 'org.springframework.boot:spring-boot-starter-test'\n}\n</code></pre>\n<p>I also tried another version 3.0.0 but the same thing happens to me. So I attach an image of the error with both annotations</p>\n<pre class=\"lang-none prettyprint-override\"><code>Error: &quot;Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'apiListingScanner' defined in URL jar:file:/C:/Users////&quot; \n</code></pre>\n"},{"tags":["java","spring-boot","constraints","optaplanner"],"answers":[{"comments":[{"owner":{"account_id":28301624,"reputation":11,"user_id":21640225,"display_name":"Vasavi Bodala"},"score":0,"creation_date":1684405459,"post_id":76273356,"comment_id":134514376,"body_markdown":"I tried working following the above way, but even if I use constraintweight and change the score to zero, it&#39;s considering the constraint and changing the starttime. I want the constraint to disable when this condition is true:- &#39;if(!routingProblem.getConstraintNames().contains(&quot;updateStartTimeConstraint&quot;)) {\n            ConferenceConstraintConfiguration constraintConfig = new ConferenceConstraintConfiguration();\n            constraintConfig.setUpdateStartTime(BendableLongScore.zero(2,1));\n            solution.setConstraintConfiguration(constraintConfig);\n        }`","body":"I tried working following the above way, but even if I use constraintweight and change the score to zero, it&#39;s considering the constraint and changing the starttime. I want the constraint to disable when this condition is true:- &#39;if(!routingProblem.getConstraintNames().contains(&quot;updateSta&zwnj;&#8203;rtTimeConstraint&quot;)) {             ConferenceConstraintConfiguration constraintConfig = new ConferenceConstraintConfiguration();             constraintConfig.setUpdateStartTime(BendableLongScore.zero(2&zwnj;&#8203;,1));             solution.setConstraintConfiguration(constraintConfig);         }`"},{"owner":{"account_id":13441459,"reputation":1433,"user_id":9698517,"display_name":"Christopher Chianelli"},"score":0,"creation_date":1684427787,"post_id":76273356,"comment_id":134519315,"body_markdown":"Constraints should not change the problem/solution during evaluation; if you need to update some fields during solving, use shadow variables instead: (https://www.optaplanner.org/docs/optaplanner/latest/shadow-variable/shadow-variable.html). OptaPlanner may choose a move that updates the start time if it does not decrease the score. So if you don&#39;t want moves that update the start time to be generated in certain conditions, you need to generate the moves yourself (https://www.optaplanner.org/docs/optaplanner/latest/move-and-neighborhood-selection/move-and-neighborhood-selection.html).","body":"Constraints should not change the problem/solution during evaluation; if you need to update some fields during solving, use shadow variables instead: (<a href=\"https://www.optaplanner.org/docs/optaplanner/latest/shadow-variable/shadow-variable.html\" rel=\"nofollow noreferrer\">optaplanner.org/docs/optaplanner/latest/shadow-variable/&hellip;</a>). OptaPlanner may choose a move that updates the start time if it does not decrease the score. So if you don&#39;t want moves that update the start time to be generated in certain conditions, you need to generate the moves yourself (<a href=\"https://www.optaplanner.org/docs/optaplanner/latest/move-and-neighborhood-selection/move-and-neighborhood-selection.html\" rel=\"nofollow noreferrer\">optaplanner.org/docs/optaplanner/latest/&hellip;</a>)."}],"tags":[],"owner":{"account_id":13441459,"reputation":1433,"user_id":9698517,"display_name":"Christopher Chianelli"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1684334624,"creation_date":1684334624,"answer_id":76273356,"question_id":76268815,"body_markdown":"You can disable constraints by using a `@ConstraintConfiguration` class and set the `@ConstraintWeight` field corresponding to the disabled constraint to the zero score (see https://www.optaplanner.org/docs/optaplanner/latest/score-calculation/score-calculation.html#constraintConfiguration for full details).\r\n\r\nPlanning Solution Class:\r\n\r\n    @PlanningSolution\r\n    public class ConferenceSolution {\r\n        \r\n        @ConstraintConfigurationProvider\r\n        private ConferenceConstraintConfiguration constraintConfiguration;\r\n        \r\n        // ...\r\n    }\r\n\r\n\r\nConstraintConfiguration:\r\n\r\n    @ConstraintConfiguration(constraintPackage = &quot;...conferencescheduling.score&quot;)\r\n    public class ConferenceConstraintConfiguration {\r\n    \r\n        @ConstraintWeight(&quot;Speaker conflict&quot;)\r\n        private HardMediumSoftScore speakerConflict = HardMediumSoftScore.ofHard(10);\r\n    \r\n        @ConstraintWeight(&quot;Theme track conflict&quot;)\r\n        private HardMediumSoftScore themeTrackConflict = HardMediumSoftScore.ofSoft(10);\r\n        @ConstraintWeight(&quot;Content conflict&quot;)\r\n        private HardMediumSoftScore contentConflict = HardMediumSoftScore.ofSoft(100);\r\n    \r\n        // ...\r\n    }\r\n\r\nDisabling constraints\r\n\r\n    ConferenceConstraintConfiguration constraintConfig = new ConferenceConstraintConfiguration();\r\n    constraintConfig.contentConflict = HardMediumSoftScore.ZERO;\r\n\r\n","title":"Disabling and enabling constraints during runtime","body":"<p>You can disable constraints by using a <code>@ConstraintConfiguration</code> class and set the <code>@ConstraintWeight</code> field corresponding to the disabled constraint to the zero score (see <a href=\"https://www.optaplanner.org/docs/optaplanner/latest/score-calculation/score-calculation.html#constraintConfiguration\" rel=\"nofollow noreferrer\">https://www.optaplanner.org/docs/optaplanner/latest/score-calculation/score-calculation.html#constraintConfiguration</a> for full details).</p>\n<p>Planning Solution Class:</p>\n<pre><code>@PlanningSolution\npublic class ConferenceSolution {\n    \n    @ConstraintConfigurationProvider\n    private ConferenceConstraintConfiguration constraintConfiguration;\n    \n    // ...\n}\n</code></pre>\n<p>ConstraintConfiguration:</p>\n<pre><code>@ConstraintConfiguration(constraintPackage = &quot;...conferencescheduling.score&quot;)\npublic class ConferenceConstraintConfiguration {\n\n    @ConstraintWeight(&quot;Speaker conflict&quot;)\n    private HardMediumSoftScore speakerConflict = HardMediumSoftScore.ofHard(10);\n\n    @ConstraintWeight(&quot;Theme track conflict&quot;)\n    private HardMediumSoftScore themeTrackConflict = HardMediumSoftScore.ofSoft(10);\n    @ConstraintWeight(&quot;Content conflict&quot;)\n    private HardMediumSoftScore contentConflict = HardMediumSoftScore.ofSoft(100);\n\n    // ...\n}\n</code></pre>\n<p>Disabling constraints</p>\n<pre><code>ConferenceConstraintConfiguration constraintConfig = new ConferenceConstraintConfiguration();\nconstraintConfig.contentConflict = HardMediumSoftScore.ZERO;\n</code></pre>\n"}],"owner":{"account_id":28301624,"reputation":11,"user_id":21640225,"display_name":"Vasavi Bodala"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":139,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1684334624,"creation_date":1684301385,"question_id":76268815,"body_markdown":"I&#39;ve set the constaints like this:-\r\n\r\n```\r\nScoreDirectorFactoryConfig scoreDirectorFactoryConfig = new ScoreDirectorFactoryConfig();         scoreDirectorFactoryConfig.setConstraintProviderClass(VehicleRoutingConstraintProvider.class);\r\n```\r\n\r\nI couldn&#39;t find out anything related to enabling and/or disabling constraints in optaplanner.\r\n\r\nSo, I wanted to know if there&#39;s a way to enable and disable the constraints after or before setting the constraint provider class.\r\n\r\nMy question is:\r\n\r\n**Can we enable and/or disable constraint during runtime in optaplanner based on a condition?**","title":"Disabling and enabling constraints during runtime","body":"<p>I've set the constaints like this:-</p>\n<pre><code>ScoreDirectorFactoryConfig scoreDirectorFactoryConfig = new ScoreDirectorFactoryConfig();         scoreDirectorFactoryConfig.setConstraintProviderClass(VehicleRoutingConstraintProvider.class);\n</code></pre>\n<p>I couldn't find out anything related to enabling and/or disabling constraints in optaplanner.</p>\n<p>So, I wanted to know if there's a way to enable and disable the constraints after or before setting the constraint provider class.</p>\n<p>My question is:</p>\n<p><strong>Can we enable and/or disable constraint during runtime in optaplanner based on a condition?</strong></p>\n"},{"tags":["java","postgresql","spring-boot","hibernate"],"comments":[{"owner":{"account_id":2589149,"reputation":1536,"user_id":2244209,"accept_rate":87,"display_name":"David Fari&#241;a"},"score":0,"creation_date":1689687317,"post_id":76273331,"comment_id":135246725,"body_markdown":"How is there still no answer, Im looking to find a solution to this as well but it seems nobody knows. Did you end up solving it?","body":"How is there still no answer, Im looking to find a solution to this as well but it seems nobody knows. Did you end up solving it?"},{"owner":{"account_id":25965752,"reputation":23,"user_id":19681717,"display_name":"axxa"},"score":0,"creation_date":1692697105,"post_id":76273331,"comment_id":135656060,"body_markdown":"@DavidFari&#241;a I finally did it with the Jsonb collumn and it works fine. But I still don&#39;t know if it&#39;s the best way to do it or if it isn&#39;t optimised.","body":"@DavidFari&#241;a I finally did it with the Jsonb collumn and it works fine. But I still don&#39;t know if it&#39;s the best way to do it or if it isn&#39;t optimised."},{"owner":{"account_id":2589149,"reputation":1536,"user_id":2244209,"accept_rate":87,"display_name":"David Fari&#241;a"},"score":0,"creation_date":1692894536,"post_id":76273331,"comment_id":135689388,"body_markdown":"i thought about that as well but ended up making a new table entity. Seemed somewhat cleaner for my case but made the creating/updating the data a bit more complicated.","body":"i thought about that as well but ended up making a new table entity. Seemed somewhat cleaner for my case but made the creating/updating the data a bit more complicated."}],"owner":{"account_id":25965752,"reputation":23,"user_id":19681717,"display_name":"axxa"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":288,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1684334469,"creation_date":1684334469,"question_id":76273331,"body_markdown":"I&#39;m very new to Spring Boot.\r\n\r\nI have an entity that basically is a kind of &quot;tier list&quot;. It is used as a ranking of objects. Multiple objects could be in the same rank.\r\n\r\nSo I represent it as HashMap\\&lt;Integer, LinkedList\\&lt;ObjectsToRank\\&gt;\\&gt;. The map key is the rank, associated with list of ObjectsToRank.\r\n\r\nTier list entity:\r\n\r\n```java\r\n@Entity\r\n@Table(name = &quot;classements&quot;)\r\npublic class ClassementEntity {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Column(name = &quot;id_classement&quot;)\r\n    private  Long id_classement;\r\n\r\n    @ManyToOne\r\n    @JoinColumn(name = &quot;id_agent&quot;)\r\n    private AgentEntity agent;\r\n\r\n    @Column(name = &quot;max_rank&quot;)\r\n    private Integer max_rank;\r\n    \r\n    private HashMap&lt;Integer, LinkedList&lt;PeriodeProtocolaireEntity&gt;&gt; mapRang;\r\n\r\n}\r\n```\r\n\r\nSo my question is how can I store it in my PostgreSQL DB ?\r\n\r\nI thought about Jsonb column that would look like:\r\n\r\n```json\r\n{\r\n    mapKeyInteger: [\r\n            PeriodeProtocolaireEntity.id,\r\n            PeriodeProtocolaireEntity.id,\r\n    ],\r\n    2: ...\r\n}\r\n```\r\n\r\nBut I don&#39;t know how to do it in a good way with Spring Boot or if there is a better way.","title":"How to store map containing list of objects using Spring Boot and PostgreSQL","body":"<p>I'm very new to Spring Boot.</p>\n<p>I have an entity that basically is a kind of &quot;tier list&quot;. It is used as a ranking of objects. Multiple objects could be in the same rank.</p>\n<p>So I represent it as HashMap&lt;Integer, LinkedList&lt;ObjectsToRank&gt;&gt;. The map key is the rank, associated with list of ObjectsToRank.</p>\n<p>Tier list entity:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Table(name = &quot;classements&quot;)\npublic class ClassementEntity {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;id_classement&quot;)\n    private  Long id_classement;\n\n    @ManyToOne\n    @JoinColumn(name = &quot;id_agent&quot;)\n    private AgentEntity agent;\n\n    @Column(name = &quot;max_rank&quot;)\n    private Integer max_rank;\n    \n    private HashMap&lt;Integer, LinkedList&lt;PeriodeProtocolaireEntity&gt;&gt; mapRang;\n\n}\n</code></pre>\n<p>So my question is how can I store it in my PostgreSQL DB ?</p>\n<p>I thought about Jsonb column that would look like:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n    mapKeyInteger: [\n            PeriodeProtocolaireEntity.id,\n            PeriodeProtocolaireEntity.id,\n    ],\n    2: ...\n}\n</code></pre>\n<p>But I don't know how to do it in a good way with Spring Boot or if there is a better way.</p>\n"},{"tags":["java","intellij-idea","interface","transactions","code-generation"],"comments":[{"owner":{"account_id":24517308,"reputation":401,"user_id":18430882,"display_name":"quickfix"},"score":1,"creation_date":1684336404,"post_id":76273328,"comment_id":134504154,"body_markdown":"there&#39;s an open ticket in IDEA&#39;s tracker for this, vote for https://youtrack.jetbrains.com/issue/IDEA-161642","body":"there&#39;s an open ticket in IDEA&#39;s tracker for this, vote for <a href=\"https://youtrack.jetbrains.com/issue/IDEA-161642\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/IDEA-161642</a>"}],"owner":{"account_id":963056,"reputation":994,"user_id":986966,"accept_rate":80,"display_name":"fall"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684334428,"creation_date":1684334428,"question_id":76273328,"body_markdown":"Like in this method:\r\n\r\n    @Transactional\r\n    @Override\r\n    public boolean deleteConfigDictionary(Long id){\r\n      return false;\r\n    }\r\n\r\nAfter I add @Override to this method, Idea found there is no matching interface method in the interface. So it marks it as error and offer to pull it up:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nBut after the interface method is created, it automatically has @Transactional annotation, which is discouraged in Spring:\r\n\r\n    @Transactional\r\n    boolean deleteConfigDictionary(Long id);\r\n\r\nHow to avoid this? Would be helpful if I can choose what annotations are not pulled up or maybe just disable copying annotation.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/N0S5s.png","title":"How to stop Intellij Idea to put @Transactional on interface method when I pull up its implementation?","body":"<p>Like in this method:</p>\n<pre><code>@Transactional\n@Override\npublic boolean deleteConfigDictionary(Long id){\n  return false;\n}\n</code></pre>\n<p>After I add @Override to this method, Idea found there is no matching interface method in the interface. So it marks it as error and offer to pull it up:</p>\n<p><a href=\"https://i.stack.imgur.com/N0S5s.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/N0S5s.png\" alt=\"enter image description here\" /></a></p>\n<p>But after the interface method is created, it automatically has @Transactional annotation, which is discouraged in Spring:</p>\n<pre><code>@Transactional\nboolean deleteConfigDictionary(Long id);\n</code></pre>\n<p>How to avoid this? Would be helpful if I can choose what annotations are not pulled up or maybe just disable copying annotation.</p>\n"},{"tags":["java","json","jackson","drools","jsonnode"],"comments":[{"owner":{"account_id":183966,"reputation":14640,"user_id":419705,"accept_rate":67,"display_name":"Roddy of the Frozen Peas"},"score":0,"creation_date":1653063146,"post_id":72302405,"comment_id":127767584,"body_markdown":"In your &quot;approach 1&quot; code, you haven&#39;t shown where you declared and defined the `copmpany` and `site` variables.","body":"In your &quot;approach 1&quot; code, you haven&#39;t shown where you declared and defined the <code>copmpany</code> and <code>site</code> variables."},{"owner":{"account_id":5511813,"reputation":9,"user_id":19151307,"display_name":"Mehul Chaturvedi"},"score":0,"creation_date":1653068979,"post_id":72302405,"comment_id":127769403,"body_markdown":"If you see it again, I’ve clearly mentioned the values of the parameters of the object of type PolicyDataToBeVerified, the “company” parameter as “company1” and “site” as “site1”, they both are strings.","body":"If you see it again, I’ve clearly mentioned the values of the parameters of the object of type PolicyDataToBeVerified, the “company” parameter as “company1” and “site” as “site1”, they both are strings."},{"owner":{"account_id":183966,"reputation":14640,"user_id":419705,"accept_rate":67,"display_name":"Roddy of the Frozen Peas"},"score":0,"creation_date":1653069770,"post_id":72302405,"comment_id":127769691,"body_markdown":"Yeah but you&#39;re not referencing `this`. You&#39;re referencing arbitrary declared variables from ... somewhere.","body":"Yeah but you&#39;re not referencing <code>this</code>. You&#39;re referencing arbitrary declared variables from ... somewhere."},{"owner":{"account_id":5511813,"reputation":9,"user_id":19151307,"display_name":"Mehul Chaturvedi"},"score":0,"creation_date":1653210852,"post_id":72302405,"comment_id":127791650,"body_markdown":"`company` and `site` are the parameters of the class `PolicyDataToBeVerified`, so their values are picked automatically from the working memory of DROOLS","body":"<code>company</code> and <code>site</code> are the parameters of the class <code>PolicyDataToBeVerified</code>, so their values are picked automatically from the working memory of DROOLS"}],"answers":[{"tags":[],"owner":{"account_id":5511813,"reputation":9,"user_id":19151307,"display_name":"Mehul Chaturvedi"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":true,"score":-1,"last_activity_date":1653048440,"creation_date":1653048440,"answer_id":72318665,"question_id":72302405,"body_markdown":"**NOTE:** *IntellijIDEA has inaccurate linting for .drl files, so request you to not rely on it.*\r\n\r\nI created a validateSlotsResponse as following for better handling of response:\r\n\r\n\r\n    package com.example.demo;\r\n    import lombok.Builder;\r\n    import lombok.Data;\r\n    import java.util.List;\r\n    \r\n    @Data\r\n    @Builder\r\n    public class ValidateSlotsResponse {\r\n        boolean isRequestValid;\r\n        List&lt;String&gt; comments;\r\n    }\r\n\r\nI&#39;ll pass this class&#39;s object into the working memory of DROOLS, and will update it inside the drools program, which will then be used as the respose for validation.\r\n\r\nBelow are the rules inside my drools file, please make sure you have made the right imports:\r\n\r\n    rule &quot;fetchMaximumAllowedWeeklyWorkingHours&quot;\r\n    when\r\n         $validateSlotsResponse: ValidateSlotsResponse()\r\n         $policyDataToBeVerified: PolicyDataToBeVerified()\r\n         $configJson: JsonNode()\r\n         $workingHoursAllowed:Integer() from $configJson.get($policyDataToBeVerified.getCompany()).get($policyDataToBeVerified.getSite()).get(&quot;maxWeeklyWorkingHours&quot;).intValue()\r\n    then\r\n     end\r\n    \r\n    \r\n     rule &quot;maxWorkingHoursAccept&quot; extends &quot;fetchMaximumAllowedWeeklyWorkingHours&quot;\r\n     when\r\n         eval($policyDataToBeVerified.workerWeeklyWorkingHours() &lt;= $workingHoursAllowed)\r\n     then\r\n         $policyDataToBeVerified.setIsRequestValid(true);\r\n         $validateSlotsResponse.setRequestValid(true);\r\n         $validateSlotsResponse.setComments(new ArrayList&lt;&gt;(Arrays.asList(&quot;Worker allowed to work for &quot;+$policyDataToBeVerified.getMaximumWeeklyWorkingHours() + &quot; hours&quot;)));\r\n      end\r\n    \r\n    \r\n      rule &quot;maxWorkingHoursReject&quot; extends &quot;fetchMaximumAllowedWeeklyWorkingHours&quot;\r\n      when\r\n           eval($policyDataToBeVerified.workerWeeklyWorkingHours() &gt; Integer.parseInt($workingHoursAllowed.toString()))\r\n      then\r\n           $policyDataToBeVerified.setIsRequestValid(false);\r\n           $validateSlotsResponse.setRequestValid(false);\r\n           $validateSlotsResponse.setComments(new ArrayList&lt;&gt;(Arrays.asList(&quot;Worker not allowed to work more than &quot;+ $workingHoursAllowed + &quot; hours&quot;)));\r\n      end","title":"How to compare nested JsonNode field values with Java object parameter values in DROOLS?","body":"<p><strong>NOTE:</strong> <em>IntellijIDEA has inaccurate linting for .drl files, so request you to not rely on it.</em></p>\n<p>I created a validateSlotsResponse as following for better handling of response:</p>\n<pre><code>package com.example.demo;\nimport lombok.Builder;\nimport lombok.Data;\nimport java.util.List;\n\n@Data\n@Builder\npublic class ValidateSlotsResponse {\n    boolean isRequestValid;\n    List&lt;String&gt; comments;\n}\n</code></pre>\n<p>I'll pass this class's object into the working memory of DROOLS, and will update it inside the drools program, which will then be used as the respose for validation.</p>\n<p>Below are the rules inside my drools file, please make sure you have made the right imports:</p>\n<pre><code>rule &quot;fetchMaximumAllowedWeeklyWorkingHours&quot;\nwhen\n     $validateSlotsResponse: ValidateSlotsResponse()\n     $policyDataToBeVerified: PolicyDataToBeVerified()\n     $configJson: JsonNode()\n     $workingHoursAllowed:Integer() from $configJson.get($policyDataToBeVerified.getCompany()).get($policyDataToBeVerified.getSite()).get(&quot;maxWeeklyWorkingHours&quot;).intValue()\nthen\n end\n\n\n rule &quot;maxWorkingHoursAccept&quot; extends &quot;fetchMaximumAllowedWeeklyWorkingHours&quot;\n when\n     eval($policyDataToBeVerified.workerWeeklyWorkingHours() &lt;= $workingHoursAllowed)\n then\n     $policyDataToBeVerified.setIsRequestValid(true);\n     $validateSlotsResponse.setRequestValid(true);\n     $validateSlotsResponse.setComments(new ArrayList&lt;&gt;(Arrays.asList(&quot;Worker allowed to work for &quot;+$policyDataToBeVerified.getMaximumWeeklyWorkingHours() + &quot; hours&quot;)));\n  end\n\n\n  rule &quot;maxWorkingHoursReject&quot; extends &quot;fetchMaximumAllowedWeeklyWorkingHours&quot;\n  when\n       eval($policyDataToBeVerified.workerWeeklyWorkingHours() &gt; Integer.parseInt($workingHoursAllowed.toString()))\n  then\n       $policyDataToBeVerified.setIsRequestValid(false);\n       $validateSlotsResponse.setRequestValid(false);\n       $validateSlotsResponse.setComments(new ArrayList&lt;&gt;(Arrays.asList(&quot;Worker not allowed to work more than &quot;+ $workingHoursAllowed + &quot; hours&quot;)));\n  end\n</code></pre>\n"}],"owner":{"account_id":5511813,"reputation":9,"user_id":19151307,"display_name":"Mehul Chaturvedi"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":335,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":72318665,"answer_count":1,"score":1,"last_activity_date":1684334247,"creation_date":1652953994,"question_id":72302405,"body_markdown":"I&#39;ve been trying to execute a set of rules on a request object on the basis of some set of configuration value. Below is the example on what I am trying to do:\r\n\r\n**Configuration:**\r\nconfig.json\r\n\r\n    {\r\n      &quot;company1&quot;: {\r\n        &quot;site1&quot;: {\r\n          &quot;maxWeeklyWorkingHours&quot;: 40,\r\n          &quot;rule2&quot;: [1, 3, 4],\r\n        },\r\n        &quot;site2&quot;: {\r\n          &quot;maxWeeklyWorkingHours&quot;: 40,\r\n          &quot;rule2&quot;: [1, 3, 4],\r\n        }\r\n      },\r\n      &quot;company2&quot;: {\r\n        &quot;site1&quot;: {\r\n          &quot;maxWeeklyWorkingHours&quot;: 40,\r\n          &quot;rule2&quot;: [1, 3, 4],\r\n        },\r\n        &quot;site2&quot;: {\r\n          &quot;maxWeeklyWorkingHours&quot;: 40,\r\n          &quot;rule2&quot;: [1, 3, 4],\r\n        }\r\n      }\r\n    }\r\n\r\n**Request Class Object:** policyDataToBeVerified\r\n\r\n    PolicyDataToBeVerified(company=company1, site=site1, workerWeeklyWorkingHours=39, isRequestValid=0)\r\n\r\n\r\nI converted the config.json into a JsonNode object:configJson and passed both policyDataToBeVerified and configJson to drools working memory. Below are the approaches I tried to take to frame the rule but failed anyways:\r\n\r\n**APPROACH 1:**\r\ndrools.drl\r\n\r\n    rule &quot;maxWorkingHours&quot;\r\n    when\r\n        $configJson: JsonNode()\r\n        $policyData: PolicyDataToBeVerified(maximumWeeklyWorkingHours &lt;= $configJson.get(company).get(site).get(&quot;workerWeeklyWorkingHours&quot;))\r\n    then\r\n        $policyData.setIsRequestValid(true)\r\n     end\r\n\r\nIssue: I am getting null pointer exception at $configJson.get(company).get(site).get(&quot;workerWeeklyWorkingHours&quot;)\r\n\r\n**APPROACH 2:**\r\nI even tried to use configJSON as a global variable but, then drools didn&#39;t allow me to use get methods of JsonNode to get the nested fields from JSON\r\n\r\n-----\r\n\r\nI&#39;ve been trying to find a solution to my problem for past few days, but nothing worked. I&#39;d be happy to learn even if we can view this problem from a different perspective and solve it in a different way, or if we can debug this, whatever works.\r\n","title":"How to compare nested JsonNode field values with Java object parameter values in DROOLS?","body":"<p>I've been trying to execute a set of rules on a request object on the basis of some set of configuration value. Below is the example on what I am trying to do:</p>\n<p><strong>Configuration:</strong>\nconfig.json</p>\n<pre><code>{\n  &quot;company1&quot;: {\n    &quot;site1&quot;: {\n      &quot;maxWeeklyWorkingHours&quot;: 40,\n      &quot;rule2&quot;: [1, 3, 4],\n    },\n    &quot;site2&quot;: {\n      &quot;maxWeeklyWorkingHours&quot;: 40,\n      &quot;rule2&quot;: [1, 3, 4],\n    }\n  },\n  &quot;company2&quot;: {\n    &quot;site1&quot;: {\n      &quot;maxWeeklyWorkingHours&quot;: 40,\n      &quot;rule2&quot;: [1, 3, 4],\n    },\n    &quot;site2&quot;: {\n      &quot;maxWeeklyWorkingHours&quot;: 40,\n      &quot;rule2&quot;: [1, 3, 4],\n    }\n  }\n}\n</code></pre>\n<p><strong>Request Class Object:</strong> policyDataToBeVerified</p>\n<pre><code>PolicyDataToBeVerified(company=company1, site=site1, workerWeeklyWorkingHours=39, isRequestValid=0)\n</code></pre>\n<p>I converted the config.json into a JsonNode object:configJson and passed both policyDataToBeVerified and configJson to drools working memory. Below are the approaches I tried to take to frame the rule but failed anyways:</p>\n<p><strong>APPROACH 1:</strong>\ndrools.drl</p>\n<pre><code>rule &quot;maxWorkingHours&quot;\nwhen\n    $configJson: JsonNode()\n    $policyData: PolicyDataToBeVerified(maximumWeeklyWorkingHours &lt;= $configJson.get(company).get(site).get(&quot;workerWeeklyWorkingHours&quot;))\nthen\n    $policyData.setIsRequestValid(true)\n end\n</code></pre>\n<p>Issue: I am getting null pointer exception at $configJson.get(company).get(site).get(&quot;workerWeeklyWorkingHours&quot;)</p>\n<p><strong>APPROACH 2:</strong>\nI even tried to use configJSON as a global variable but, then drools didn't allow me to use get methods of JsonNode to get the nested fields from JSON</p>\n<hr />\n<p>I've been trying to find a solution to my problem for past few days, but nothing worked. I'd be happy to learn even if we can view this problem from a different perspective and solve it in a different way, or if we can debug this, whatever works.</p>\n"},{"tags":["java","soap","wsdl","spring-ws","jaxb2-maven-plugin"],"owner":{"account_id":23147042,"reputation":37,"user_id":17249649,"display_name":"spartan712"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684333810,"creation_date":1684333168,"question_id":76273136,"body_markdown":"I have received a wsdl from a client for which I need to create a SOAP service.\r\n\r\nThe Request message is defined as below -&gt;\r\n\r\n    &lt;xs:schema xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot;\r\n           xmlns=&quot;http://xmlns.kt/testservice/V4&quot;\r\n           xmlns:servicestype=&quot;http://xmlns.kt/testservice2/V4&quot;\r\n           targetNamespace=&quot;http://xmlns.kt/testservice/V4&quot;\r\n           elementFormDefault=&quot;qualified&quot;\r\n           attributeFormDefault=&quot;unqualified&quot;&gt;\r\n      &lt;xs:element name=&quot;ReceiveDataReqMsg&quot; type=&quot;servicestype:ReceiveDataRequestType&quot;&gt;\r\n        &lt;xs:annotation&gt;\r\n          &lt;xs:documentation&gt;Request message&lt;/xs:documentation&gt;\r\n        &lt;/xs:annotation&gt;\r\n      &lt;/xs:element&gt;\r\n    &lt;/xs:schema&gt;\r\n\r\nI am using spring boot ws and maven jaxb plugin to generate the service.\r\nThe problem is the plugin generates the RequestMessage class as ReceiveDataRequestType instead of ReceiveDataReqMsg.\r\n\r\nFor this i use a binding xjb and then the plugin creates the class as ReceiveDataReqMsg \r\n\r\n      &lt;bindings xmlns=&quot;http://java.sun.com/xml/ns/jaxb&quot;\r\n          xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n          xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot;\r\n          xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/jaxb http://java.sun.com/xml/ns/jaxb/bindingschema_2_0.xsd&quot;\r\n          version=&quot;2.1&quot;&gt;\r\n    &lt;bindings schemaLocation=&quot;myschema.xsd&quot;&gt;\r\n        &lt;bindings node=&quot;//xs:element[@name=&#39;ReceiveDataReqMsg&#39;]&quot;&gt;\r\n            &lt;class name=&quot;ReceiveDataReqMsg&quot;&gt;\r\n            &lt;/class&gt;\r\n        &lt;/bindings&gt;\r\n    &lt;/bindings&gt;\r\n&lt;/bindings&gt;\r\n\r\nBut the problem is when i call the service it just gives an error that no adapter found for the endpoint.(I have the endpoint correctly configured).\r\n\r\nIf i edit and add a @XMLRootelement to the generated class then i get a nullpointerexception.\r\n\r\nCan someone please help.\r\n\r\nThe generated class looks like this \r\n\r\n    public class ReceiveDataReqMsg\r\n    extends JAXBElement&lt;ReceiveDataRequestType&gt;\r\n    {\r\n    \r\n    protected final static QName NAME = new QName(&quot;http://xmlns.kt/testservice/V4&quot;, &quot;ReceiveDataReqMsg&quot;);\r\n    \r\n    public ReceiveDataReqMsg(ReceiveDataRequestType value) {\r\n        super(NAME, ((Class) ReceiveDataRequestType.class), null, value);\r\n    }\r\n    \r\n    public ReceiveReferenceDataReqMsg() {\r\n        super(NAME, ((Class) ReceiveDataRequestType.class), null, null);\r\n    }\r\n    \r\n    }\r\n\r\n","title":"No adapter endpoint error when calling SOAP service","body":"<p>I have received a wsdl from a client for which I need to create a SOAP service.</p>\n<p>The Request message is defined as below -&gt;</p>\n<pre><code>&lt;xs:schema xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot;\n       xmlns=&quot;http://xmlns.kt/testservice/V4&quot;\n       xmlns:servicestype=&quot;http://xmlns.kt/testservice2/V4&quot;\n       targetNamespace=&quot;http://xmlns.kt/testservice/V4&quot;\n       elementFormDefault=&quot;qualified&quot;\n       attributeFormDefault=&quot;unqualified&quot;&gt;\n  &lt;xs:element name=&quot;ReceiveDataReqMsg&quot; type=&quot;servicestype:ReceiveDataRequestType&quot;&gt;\n    &lt;xs:annotation&gt;\n      &lt;xs:documentation&gt;Request message&lt;/xs:documentation&gt;\n    &lt;/xs:annotation&gt;\n  &lt;/xs:element&gt;\n&lt;/xs:schema&gt;\n</code></pre>\n<p>I am using spring boot ws and maven jaxb plugin to generate the service.\nThe problem is the plugin generates the RequestMessage class as ReceiveDataRequestType instead of ReceiveDataReqMsg.</p>\n<p>For this i use a binding xjb and then the plugin creates the class as ReceiveDataReqMsg</p>\n<pre><code>  &lt;bindings xmlns=&quot;http://java.sun.com/xml/ns/jaxb&quot;\n      xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n      xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot;\n      xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/jaxb http://java.sun.com/xml/ns/jaxb/bindingschema_2_0.xsd&quot;\n      version=&quot;2.1&quot;&gt;\n&lt;bindings schemaLocation=&quot;myschema.xsd&quot;&gt;\n    &lt;bindings node=&quot;//xs:element[@name='ReceiveDataReqMsg']&quot;&gt;\n        &lt;class name=&quot;ReceiveDataReqMsg&quot;&gt;\n        &lt;/class&gt;\n    &lt;/bindings&gt;\n&lt;/bindings&gt;\n</code></pre>\n\n<p>But the problem is when i call the service it just gives an error that no adapter found for the endpoint.(I have the endpoint correctly configured).</p>\n<p>If i edit and add a @XMLRootelement to the generated class then i get a nullpointerexception.</p>\n<p>Can someone please help.</p>\n<p>The generated class looks like this</p>\n<pre><code>public class ReceiveDataReqMsg\nextends JAXBElement&lt;ReceiveDataRequestType&gt;\n{\n\nprotected final static QName NAME = new QName(&quot;http://xmlns.kt/testservice/V4&quot;, &quot;ReceiveDataReqMsg&quot;);\n\npublic ReceiveDataReqMsg(ReceiveDataRequestType value) {\n    super(NAME, ((Class) ReceiveDataRequestType.class), null, value);\n}\n\npublic ReceiveReferenceDataReqMsg() {\n    super(NAME, ((Class) ReceiveDataRequestType.class), null, null);\n}\n\n}\n</code></pre>\n"},{"tags":["java","spring-boot","yaml"],"comments":[{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":1,"creation_date":1684333648,"post_id":76273188,"comment_id":134503368,"body_markdown":"Which `Environment` class are you talking about specifically?","body":"Which <code>Environment</code> class are you talking about specifically?"},{"owner":{"account_id":27648386,"reputation":1,"user_id":21103823,"display_name":"gluttony"},"score":0,"creation_date":1684366630,"post_id":76273188,"comment_id":134509869,"body_markdown":"org.springframework.core.env.Environment","body":"org.springframework.core.env.Environment"}],"owner":{"account_id":27648386,"reputation":1,"user_id":21103823,"display_name":"gluttony"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684333527,"creation_date":1684333527,"question_id":76273188,"body_markdown":"the yml looks like this \r\n\r\n```\r\nclass:\r\n  student:\r\n    name:bob\r\n    number:12213550\r\n    gender:male\r\n```\r\nI want load the &#39;student&#39; as a map via Enviroment.getProperties(&quot;student&quot;,Map.class), but only get a null.\r\n\r\n\r\n\r\n\r\n\r\nI can load it with @ConfigurationProperties, which is weird since I was told they are actually similar.\r\n\r\nwhat&#39;s the difference between them? and how can I get this map with Enviroment Object?","title":"How to load a map object from yml with Enviroment.getProperties","body":"<p>the yml looks like this</p>\n<pre><code>class:\n  student:\n    name:bob\n    number:12213550\n    gender:male\n</code></pre>\n<p>I want load the 'student' as a map via Enviroment.getProperties(&quot;student&quot;,Map.class), but only get a null.</p>\n<p>I can load it with @ConfigurationProperties, which is weird since I was told they are actually similar.</p>\n<p>what's the difference between them? and how can I get this map with Enviroment Object?</p>\n"},{"tags":["java","android","kotlin","datetime-format","time-format"],"comments":[{"owner":{"account_id":111736,"reputation":11811,"user_id":295004,"display_name":"Morrison Chang"},"score":1,"creation_date":1684333876,"post_id":76273181,"comment_id":134503441,"body_markdown":"Have you seen: https://stackoverflow.com/a/39992733/295004","body":"Have you seen: <a href=\"https://stackoverflow.com/a/39992733/295004\">stackoverflow.com/a/39992733/295004</a>"},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1684335036,"post_id":76273181,"comment_id":134503789,"body_markdown":"[`DateTimeFormatter.ofLocalizedTime`](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/format/DateTimeFormatter.html#ofLocalizedTime(java.time.format.FormatStyle))","body":"<a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/format/DateTimeFormatter.html#ofLocalizedTime(java.time.format.FormatStyle)\" rel=\"nofollow noreferrer\"><code>DateTimeFormatter.ofLocalizedTime</code></a>"}],"owner":{"account_id":9634824,"reputation":95,"user_id":7151323,"accept_rate":44,"display_name":"lexraid"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1684334913,"answer_count":0,"score":0,"last_activity_date":1684333500,"creation_date":1684333500,"question_id":76273181,"body_markdown":"I want to format a certain time/date,(HH:mm) to a specific locale type.\r\nFor example, I have 12:05 and I need it to be\r\n             - in french 12h05\r\n             - in dutch 12u05\r\n\r\nIs this possible without checking the current locale and adjust the result?\r\n\r\n``` \r\nfun String.hourFormat() : String {\r\n       val time = LocalTime.parse (this, DateTimeFormatter.ISO_DATE_TIME)\r\n       val result = DateTimeFormatter.ofPattern(&quot;HH:mm&quot;).withLocale(LocaleManager.currentLocale())\r\n       return result\r\n     } \r\n```\r\nDoes there exist something already implemented to format the time based on locale?\r\nThe current approach for me is to manually check the locale :\r\n\r\n```\r\n   fun String.hourFormat() : String {\r\n....\r\nval localePattern = when (LocaleManager.currentLocale().name){\r\n                       &quot;FR&quot; -&gt; &quot;HH&#39;h&#39;mm&quot;\r\n                       &quot;NL&quot; -&gt; &quot;HH&#39;u&#39;mm&quot; \r\n                   }\r\n    DateTimeFormatter.ofPattern(localePattern)\r\n\r\n}\r\n```","title":"Android - format time (hour and minutes) to specific locale (12h05, 12u05.. etc)","body":"<p>I want to format a certain time/date,(HH:mm) to a specific locale type.\nFor example, I have 12:05 and I need it to be\n- in french 12h05\n- in dutch 12u05</p>\n<p>Is this possible without checking the current locale and adjust the result?</p>\n<pre><code>fun String.hourFormat() : String {\n       val time = LocalTime.parse (this, DateTimeFormatter.ISO_DATE_TIME)\n       val result = DateTimeFormatter.ofPattern(&quot;HH:mm&quot;).withLocale(LocaleManager.currentLocale())\n       return result\n     } \n</code></pre>\n<p>Does there exist something already implemented to format the time based on locale?\nThe current approach for me is to manually check the locale :</p>\n<pre><code>   fun String.hourFormat() : String {\n....\nval localePattern = when (LocaleManager.currentLocale().name){\n                       &quot;FR&quot; -&gt; &quot;HH'h'mm&quot;\n                       &quot;NL&quot; -&gt; &quot;HH'u'mm&quot; \n                   }\n    DateTimeFormatter.ofPattern(localePattern)\n\n}\n</code></pre>\n"},{"tags":["java","spring","tomcat","hazelcast"],"answers":[{"tags":[],"owner":{"account_id":3067505,"reputation":137,"user_id":2598888,"display_name":"Nitish Raj"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1483603697,"creation_date":1483603697,"answer_id":41480040,"question_id":41479837,"body_markdown":"I would suggest first you should understand your application requirement. For the real production/live environment, are you going to use Infrastructure as a service or PAAS. \r\n\r\nIf **Infrastructure as a service** then \r\nI would suggest create local cluster environment and use the tomcat and spring application sticky session concept. Persist the session in Hazelcast or redis server installed on different node. Configure load balancer for multiple nodes having tomcat server. 2-3 VMs for testing purpose would be suitable.\r\n\r\nIf requirement is **PAAS** then\r\nDon&#39;t think about local environment. Test directly on OpenShift or AWS free account and trust me you would be able to test on **PAAS** if all setup is fine.","title":"Testing a Spring application on multiple JVMs","body":"<p>I would suggest first you should understand your application requirement. For the real production/live environment, are you going to use Infrastructure as a service or PAAS. </p>\n\n<p>If <strong>Infrastructure as a service</strong> then \nI would suggest create local cluster environment and use the tomcat and spring application sticky session concept. Persist the session in Hazelcast or redis server installed on different node. Configure load balancer for multiple nodes having tomcat server. 2-3 VMs for testing purpose would be suitable.</p>\n\n<p>If requirement is <strong>PAAS</strong> then\nDon't think about local environment. Test directly on OpenShift or AWS free account and trust me you would be able to test on <strong>PAAS</strong> if all setup is fine.</p>\n"},{"tags":[],"owner":{"account_id":5211690,"reputation":561,"user_id":4167902,"display_name":"Vincz777"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684333491,"creation_date":1684333491,"answer_id":76273180,"question_id":41479837,"body_markdown":"I would suggest that your Dockerize your application, then use [Testcontainer][1] in a dedicated testing module, where you can spawn your database, RabbitMQ and multiple instances of your application in the setup of your tests. Then you can perform your tests by calling your API, randomly hitting any of your application containers.\r\n\r\n\r\n  [1]: https://www.testcontainers.org/","title":"Testing a Spring application on multiple JVMs","body":"<p>I would suggest that your Dockerize your application, then use <a href=\"https://www.testcontainers.org/\" rel=\"nofollow noreferrer\">Testcontainer</a> in a dedicated testing module, where you can spawn your database, RabbitMQ and multiple instances of your application in the setup of your tests. Then you can perform your tests by calling your API, randomly hitting any of your application containers.</p>\n"}],"owner":{"account_id":1282323,"reputation":4466,"user_id":1236153,"accept_rate":86,"display_name":"underdog"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":532,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1684333491,"creation_date":1483602856,"question_id":41479837,"body_markdown":"I have coded a Spring MVC Hibernate application with RabbitMQ as a messaging server &amp; a MySQL DB. I have also used Hazelcast an in-memory distributed cache to centralize the state of the application, moving the local tomcat session to a centralized session &amp; implementing distributed locks.\r\n\r\nThe app right now is hosted on a single tomcat server in my local system. \r\n\r\nI want to test my application on a multiple JVM node environment i&#39;e app running on multiple tomcat servers. \r\n\r\nWhat would be the best approach to test the app. \r\n\r\nFew things that come to my mind \r\n\r\nA. Install &amp; configure a load balancer &amp; set up a tomcat cluster in my local system. This I believe is a tedious task &amp; requires much effort.\r\n\r\nB. Host the application on a PAAS like OpenShift, cloudfoundry but I am not sure if I will be able to test my application on several nodes.\r\n\r\nC. Any other way to simulate a clustered environment on my local windows system?\r\n","title":"Testing a Spring application on multiple JVMs","body":"<p>I have coded a Spring MVC Hibernate application with RabbitMQ as a messaging server &amp; a MySQL DB. I have also used Hazelcast an in-memory distributed cache to centralize the state of the application, moving the local tomcat session to a centralized session &amp; implementing distributed locks.</p>\n\n<p>The app right now is hosted on a single tomcat server in my local system. </p>\n\n<p>I want to test my application on a multiple JVM node environment i'e app running on multiple tomcat servers. </p>\n\n<p>What would be the best approach to test the app. </p>\n\n<p>Few things that come to my mind </p>\n\n<p>A. Install &amp; configure a load balancer &amp; set up a tomcat cluster in my local system. This I believe is a tedious task &amp; requires much effort.</p>\n\n<p>B. Host the application on a PAAS like OpenShift, cloudfoundry but I am not sure if I will be able to test my application on several nodes.</p>\n\n<p>C. Any other way to simulate a clustered environment on my local windows system?</p>\n"},{"tags":["java","android","mapbox"],"owner":{"account_id":131842,"reputation":2983,"user_id":332132,"accept_rate":75,"display_name":"SteMa"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":116,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684333403,"creation_date":1675882258,"question_id":75390440,"body_markdown":"I try to migrate my project to map box 10, but I ran into an issue, which I can&#39;t solve. \r\n\r\nWhen I try to import import com.mapbox.maps.plugin.locationcomponent.location; it says &quot;Cannot resolve symbol location&quot;. It seems, that the location does not exists in package location component.\r\n\r\nWhen I do the same import in a kotlin file, it is available ... Strange ....\r\n\r\nIn gradle, I have included the lines\r\n\r\n    implementation &#39;com.mapbox.maps:android:10.10.1&#39;\r\n    implementation &#39;com.mapbox.plugin:maps-locationcomponent:10.11.0-rc.1&#39;\r\n\r\nBut I can still not get the required components to show the users location.\r\n\r\nAny ideas?\r\n","title":"MapBox for Android migration to 10 (Java)","body":"<p>I try to migrate my project to map box 10, but I ran into an issue, which I can't solve.</p>\n<p>When I try to import import com.mapbox.maps.plugin.locationcomponent.location; it says &quot;Cannot resolve symbol location&quot;. It seems, that the location does not exists in package location component.</p>\n<p>When I do the same import in a kotlin file, it is available ... Strange ....</p>\n<p>In gradle, I have included the lines</p>\n<pre><code>implementation 'com.mapbox.maps:android:10.10.1'\nimplementation 'com.mapbox.plugin:maps-locationcomponent:10.11.0-rc.1'\n</code></pre>\n<p>But I can still not get the required components to show the users location.</p>\n<p>Any ideas?</p>\n"},{"tags":["java","json","spring-boot","jackson","json-deserialization"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":2,"creation_date":1684330992,"post_id":76272768,"comment_id":134502690,"body_markdown":"You are really trying to do everythig yourself whic is already provided by the &#167;restTemplate. Also you are writing the `objectMapper` as a string and not the object you want. But instead of using the objectmapper, ditch it and just put the `ObjectForRequestToReporter` in the `HttpEntity`. The `RestTemplate` will take care of the json conversion.","body":"You are really trying to do everythig yourself whic is already provided by the &#167;restTemplate. Also you are writing the <code>objectMapper</code> as a string and not the object you want. But instead of using the objectmapper, ditch it and just put the <code>ObjectForRequestToReporter</code> in the <code>HttpEntity</code>. The <code>RestTemplate</code> will take care of the json conversion."},{"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1684334822,"post_id":76272768,"comment_id":134503718,"body_markdown":"You are serializing the `objectMapper`, not your `objectForRequestToReporter`. `objectMapper` does not have any properties to serialize (it is not a data class). -&gt; caused by a typo","body":"You are serializing the <code>objectMapper</code>, not your <code>objectForRequestToReporter</code>. <code>objectMapper</code> does not have any properties to serialize (it is not a data class). -&gt; caused by a typo"}],"answers":[{"tags":[],"owner":{"account_id":3585451,"reputation":6335,"user_id":2992754,"display_name":"juanlumn"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":true,"score":1,"last_activity_date":1684331083,"creation_date":1684331083,"answer_id":76272817,"question_id":76272768,"body_markdown":"I think you have a mistake in this line:\r\n\r\n    String jsonObject = objectMapper.writeValueAsString(objectMapper);\r\n\r\nMaybe it should be:\r\n\r\n    String jsonObject = objectMapper.writeValueAsString(objectForRequestToReporter);","title":"Why ObjectMapper writeValueAsString return empty string?","body":"<p>I think you have a mistake in this line:</p>\n<pre><code>String jsonObject = objectMapper.writeValueAsString(objectMapper);\n</code></pre>\n<p>Maybe it should be:</p>\n<pre><code>String jsonObject = objectMapper.writeValueAsString(objectForRequestToReporter);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684331267,"creation_date":1684331267,"answer_id":76272843,"question_id":76272768,"body_markdown":"```java\r\nString jsonObject = objectMapper.writeValueAsString(objectMapper);\r\n```\r\n\r\nYou are trying to convert the `ObjectMapper` to json. \r\n\r\nWhat you want:\r\n\r\n```java\r\nString jsonObject = objectMapper.writeValueAsString(objectForRequestToReporter);\r\n```\r\n\r\nHowever your code is doing basically what the `RestTemplate` already does, and thus can be greatly simplified by removing the `ObjectMapper` as you don&#39;t need it. \r\n\r\n```java\r\npublic String getReportsFromReporter(@PathVariable(name = &quot;from&quot;)String from, \r\n  @PathVariable(name = &quot;to&quot;)String to) throws IOException {\r\n    String url = &quot;example.com&quot;;\r\n    \r\n    ObjectForRequestToReporter objectForRequestToReporter =\r\n            new ObjectForRequestToReporter();\r\n    objectForRequestToReporter.setToken(somedata);\r\n    objectForRequestToReporter.setEmployee(somedata);\r\n    objectForRequestToReporter.setFrom(from);\r\n    objectForRequestToReporter.setTo(to);\r\n\r\n    HttpHeaders httpHeaders = new HttpHeaders();\r\n    httpHeaders.setContentType(MediaType.APPLICATION_JSON);\r\n    httpHeaders.setAccept(Collections.singletonList(MediaType.APPLICATION_JSON));\r\n    HttpEntity&lt;String&gt; entity = new HttpEntity&lt;String&gt;(objectForRequestToReporter, httpHeaders);\r\n    return restTemplate.postForObject(url , entity, String.class);\r\n}\r\n\r\n```","title":"Why ObjectMapper writeValueAsString return empty string?","body":"<pre class=\"lang-java prettyprint-override\"><code>String jsonObject = objectMapper.writeValueAsString(objectMapper);\n</code></pre>\n<p>You are trying to convert the <code>ObjectMapper</code> to json.</p>\n<p>What you want:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String jsonObject = objectMapper.writeValueAsString(objectForRequestToReporter);\n</code></pre>\n<p>However your code is doing basically what the <code>RestTemplate</code> already does, and thus can be greatly simplified by removing the <code>ObjectMapper</code> as you don't need it.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public String getReportsFromReporter(@PathVariable(name = &quot;from&quot;)String from, \n  @PathVariable(name = &quot;to&quot;)String to) throws IOException {\n    String url = &quot;example.com&quot;;\n    \n    ObjectForRequestToReporter objectForRequestToReporter =\n            new ObjectForRequestToReporter();\n    objectForRequestToReporter.setToken(somedata);\n    objectForRequestToReporter.setEmployee(somedata);\n    objectForRequestToReporter.setFrom(from);\n    objectForRequestToReporter.setTo(to);\n\n    HttpHeaders httpHeaders = new HttpHeaders();\n    httpHeaders.setContentType(MediaType.APPLICATION_JSON);\n    httpHeaders.setAccept(Collections.singletonList(MediaType.APPLICATION_JSON));\n    HttpEntity&lt;String&gt; entity = new HttpEntity&lt;String&gt;(objectForRequestToReporter, httpHeaders);\n    return restTemplate.postForObject(url , entity, String.class);\n}\n\n</code></pre>\n"}],"owner":{"account_id":28265452,"reputation":29,"user_id":21609481,"display_name":"Khaski"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":437,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":76272817,"answer_count":2,"score":0,"last_activity_date":1684333354,"creation_date":1684330774,"question_id":76272768,"body_markdown":"I need to serialize Java `Object` to `JSON`.\r\n\r\nBut when I use `writeValueAsString` method this method returns me empty JSON Object.\r\n\r\nHere is my `@RestController`:\r\n\r\n    public String getReportsFromReporter(\r\n                @PathVariable(name = &quot;from&quot;) String from, \r\n                @PathVariable(name = &quot;to&quot;) String to) throws IOException {\r\n        String url = &quot;example.com&quot;;\r\n        ObjectMapper objectMapper = new ObjectMapper();\r\n        ObjectForRequestToReporter objectForRequestToReporter =\r\n                                   new ObjectForRequestToReporter();\r\n        objectForRequestToReporter.setToken(somedata);\r\n        objectForRequestToReporter.setEmployee(somedata);\r\n        objectForRequestToReporter.setFrom(from);\r\n        objectForRequestToReporter.setTo(to);\r\n        String jsonObject = objectMapper.writeValueAsString(objectMapper);\r\n        HttpHeaders httpHeaders = new HttpHeaders();\r\n        httpHeaders.setContentType(MediaType.APPLICATION_JSON);\r\n        httpHeaders.setAccept(Collections.singletonList(MediaType.APPLICATION_JSON));\r\n        HttpEntity&lt;String&gt; entity = new HttpEntity&lt;String&gt;(jsonObject, httpHeaders);\r\n        String ans = restTemplate.postForObject(url , entity, String.class);\r\n        String test = objectMapper.writerWithDefaultPrettyPrinter()\r\n                                  .writeValueAsString(objectMapper);\r\n        System.out.println(test);\r\n        System.out.println(jsonObject);\r\n        return ans;\r\n    }\r\n\r\n`System.out.println` shows this:\r\n\r\n     { }\r\n     {}\r\n \r\nGradle depedencies:\r\n\r\n    implementation(&quot;com.fasterxml.jackson.core:jackson-annotations:2.14.2&quot;)\r\n\timplementation(&quot;com.fasterxml.jackson.core:jackson-core:2.14.2&quot;)\r\n\timplementation(&quot;com.fasterxml.jackson.core:jackson-databind:2.14.2&quot;)\r\n\r\nObject class for serialize:\r\n\r\n    @Data\r\n    public class ObjectForRequestToReporter {\r\n        private String token;\r\n        private String employee;\r\n        private String from;\r\n        private String to;\r\n        private final int work_after = 0;\r\n    }\r\n\r\nWhat am I doing wrong? How can I fix this?","title":"Why ObjectMapper writeValueAsString return empty string?","body":"<p>I need to serialize Java <code>Object</code> to <code>JSON</code>.</p>\n<p>But when I use <code>writeValueAsString</code> method this method returns me empty JSON Object.</p>\n<p>Here is my <code>@RestController</code>:</p>\n<pre><code>public String getReportsFromReporter(\n            @PathVariable(name = &quot;from&quot;) String from, \n            @PathVariable(name = &quot;to&quot;) String to) throws IOException {\n    String url = &quot;example.com&quot;;\n    ObjectMapper objectMapper = new ObjectMapper();\n    ObjectForRequestToReporter objectForRequestToReporter =\n                               new ObjectForRequestToReporter();\n    objectForRequestToReporter.setToken(somedata);\n    objectForRequestToReporter.setEmployee(somedata);\n    objectForRequestToReporter.setFrom(from);\n    objectForRequestToReporter.setTo(to);\n    String jsonObject = objectMapper.writeValueAsString(objectMapper);\n    HttpHeaders httpHeaders = new HttpHeaders();\n    httpHeaders.setContentType(MediaType.APPLICATION_JSON);\n    httpHeaders.setAccept(Collections.singletonList(MediaType.APPLICATION_JSON));\n    HttpEntity&lt;String&gt; entity = new HttpEntity&lt;String&gt;(jsonObject, httpHeaders);\n    String ans = restTemplate.postForObject(url , entity, String.class);\n    String test = objectMapper.writerWithDefaultPrettyPrinter()\n                              .writeValueAsString(objectMapper);\n    System.out.println(test);\n    System.out.println(jsonObject);\n    return ans;\n}\n</code></pre>\n<p><code>System.out.println</code> shows this:</p>\n<pre><code> { }\n {}\n</code></pre>\n<p>Gradle depedencies:</p>\n<pre><code>implementation(&quot;com.fasterxml.jackson.core:jackson-annotations:2.14.2&quot;)\nimplementation(&quot;com.fasterxml.jackson.core:jackson-core:2.14.2&quot;)\nimplementation(&quot;com.fasterxml.jackson.core:jackson-databind:2.14.2&quot;)\n</code></pre>\n<p>Object class for serialize:</p>\n<pre><code>@Data\npublic class ObjectForRequestToReporter {\n    private String token;\n    private String employee;\n    private String from;\n    private String to;\n    private final int work_after = 0;\n}\n</code></pre>\n<p>What am I doing wrong? How can I fix this?</p>\n"},{"tags":["java","mysql","maven","spring-mvc","bcrypt"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1684332823,"post_id":76273036,"comment_id":134503159,"body_markdown":"Remove your login method, Spring Security should handle that. Next to that your `register` doesn&#39;t encrypt passwords and for existing users you will need to change the passwords in the database to the encrypted ones","body":"Remove your login method, Spring Security should handle that. Next to that your <code>register</code> doesn&#39;t encrypt passwords and for existing users you will need to change the passwords in the database to the encrypted ones"}],"owner":{"account_id":26608877,"reputation":1,"user_id":20229301,"display_name":"Christian Lorenzen"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684332581,"creation_date":1684332581,"question_id":76273036,"body_markdown":"I am making a Spring Web, java, MySQL, thymeleaf, maven project where I try to encode the passwords to the database. But every time I try to login or register a new user, I get redirected to the login page.\r\n\r\n\r\nUserDetailsService\r\n```\r\n@Service\r\n    public class CustomUserDetailsService implements UserDetailsService\r\n{\r\n\r\n        @Autowired\r\n        private UserRepository userRepository;\r\n\r\n        @Override\r\n        public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\r\n            User user = userRepository.getUserByEmail(username);\r\n            if (user == null) {\r\n                throw new UsernameNotFoundException(&quot;User not found&quot;);\r\n            }\r\n            return new org.springframework.security.core.userdetails.User(user.getEmail(), user.getPassword(), new ArrayList&lt;&gt;());\r\n        }\r\n}\r\n```\r\n\r\nSecurityConfig:\r\n\r\n```\r\n@Configuration\r\npublic class SecurityConfig {\r\n\r\n    @Autowired\r\n    private UserDetailsService userDetailsService;\r\n\r\n    @Bean\r\n    public BCryptPasswordEncoder passwordEncoder() {\r\n        return new BCryptPasswordEncoder();\r\n    }\r\n\r\n    @Bean\r\n    public DaoAuthenticationProvider authenticationProvider() {\r\n        DaoAuthenticationProvider authProvider = new DaoAuthenticationProvider();\r\n        authProvider.setUserDetailsService(userDetailsService);\r\n        authProvider.setPasswordEncoder(passwordEncoder());\r\n        return authProvider;\r\n    }\r\n\r\n    @Bean\r\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\r\n        http\r\n                .authenticationProvider(authenticationProvider())\r\n                .authorizeRequests(authorizeRequests -&gt;\r\n                        authorizeRequests\r\n                                .anyRequest().authenticated()\r\n                )\r\n                .formLogin(formLogin -&gt;\r\n                        formLogin\r\n                                .loginPage(&quot;/login&quot;)\r\n                                .defaultSuccessUrl(&quot;/allTasks&quot;, true)\r\n                                .loginProcessingUrl(&quot;/perform_login&quot;)\r\n                                .usernameParameter(&quot;email&quot;)\r\n                                .passwordParameter(&quot;password&quot;)\r\n                                .permitAll()\r\n                );\r\n        return http.build();\r\n    }\r\n}\r\n```\r\n\r\nHomeController (essential parts):\r\n\r\n```\r\n@PostMapping(&quot;/login&quot;)\r\n    public String login(@RequestParam(&quot;email&quot;) String email,\r\n                        @RequestParam(&quot;password&quot;) String password,\r\n                        Model model,\r\n                        HttpSession session) {\r\n        try {\r\n            Authentication auth = authenticationManager.authenticate(\r\n                    new UsernamePasswordAuthenticationToken(email, password)\r\n            );\r\n            SecurityContextHolder.getContext().setAuthentication(auth);\r\n\r\n            User user = (User) auth.getPrincipal();\r\n            session.setAttribute(&quot;user&quot;, user);\r\n            return &quot;redirect:/allTasks&quot;;\r\n        } catch (BadCredentialsException e) {\r\n            model.addAttribute(&quot;errorMessage&quot;, &quot;Email or password invalid&quot;);\r\n            return &quot;login&quot;;\r\n        }\r\n    }\r\n\r\n@PostMapping(&quot;/addUser&quot;)\r\n    public String addUser(@RequestParam(&quot;user-firstname&quot;) String newFirstName,\r\n                          @RequestParam(&quot;user-lastname&quot;) String newLastName,\r\n                          @RequestParam(&quot;user-email&quot;) String newEmail,\r\n                          @RequestParam(&quot;user-password&quot;) String newPassword,\r\n                          HttpSession session)\r\n    {\r\n        if ( session.getAttribute(&quot;user&quot;) == null )\r\n        {\r\n            return &quot;redirect:/&quot;;\r\n        }\r\n\r\n        //lave en ny User\r\n        User newUser = new User();\r\n        newUser.setFirstName(newFirstName);\r\n        newUser.setLastName(newLastName);\r\n        newUser.setEmail(newEmail);\r\n        // Encrypt the password before setting it\r\n        String encryptedPassword = passwordEncoder.encode(newPassword);\r\n        newUser.setPassword(encryptedPassword);\r\n\r\n        //Gem ny User\r\n        userRepository.addUser(newUser);\r\n\r\n        //Tilbage til start s&#229; man kan logge ind\r\n        return &quot;start&quot;;\r\n    }\r\n\r\n@PostMapping(&quot;/register&quot;)\r\n    public String registerUser(@RequestParam(&quot;first_name&quot;) String firstname,\r\n                               @RequestParam(&quot;last_name&quot;) String lastname,\r\n                               @RequestParam(&quot;email&quot;) String email,\r\n                               @RequestParam(&quot;password&quot;) String password,\r\n                               Model model,\r\n                               HttpSession session)\r\n    {\r\n        //Check if user with mail already exists\r\n        if ( !userRepository.checkIfUserExists(email) )\r\n        {\r\n            User user = new User(firstname, lastname, email, password);\r\n            userRepository.addUser(user);\r\n            session.setAttribute(&quot;user&quot;, user);\r\n            return &quot;redirect:/allTasks&quot;;\r\n        }\r\n        else\r\n        {\r\n            model.addAttribute(&quot;errorMessage&quot;, &quot;Email already in use&quot;);\r\n            return &quot;register&quot;;\r\n        }\r\n    }\r\n```\r\n\r\nEverything worked before I began experimenting with encryption, so I think the problem is in the SecurityConfig or CustomUserDetailsService? Or what do you think?\r\n\r\n\r\n\r\n\r\n\r\n\r\nI tried having the encryption directly in the userRepository addTask, but it gave the same problem.\r\n\r\nI tried to have the verification happen manually in the userRepository but it gave me some problems with the encryption.","title":"Trying to setup Bcrypt on Spring Web app but I keep getting redirected back to the login page","body":"<p>I am making a Spring Web, java, MySQL, thymeleaf, maven project where I try to encode the passwords to the database. But every time I try to login or register a new user, I get redirected to the login page.</p>\n<p>UserDetailsService</p>\n<pre><code>@Service\n    public class CustomUserDetailsService implements UserDetailsService\n{\n\n        @Autowired\n        private UserRepository userRepository;\n\n        @Override\n        public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\n            User user = userRepository.getUserByEmail(username);\n            if (user == null) {\n                throw new UsernameNotFoundException(&quot;User not found&quot;);\n            }\n            return new org.springframework.security.core.userdetails.User(user.getEmail(), user.getPassword(), new ArrayList&lt;&gt;());\n        }\n}\n</code></pre>\n<p>SecurityConfig:</p>\n<pre><code>@Configuration\npublic class SecurityConfig {\n\n    @Autowired\n    private UserDetailsService userDetailsService;\n\n    @Bean\n    public BCryptPasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder();\n    }\n\n    @Bean\n    public DaoAuthenticationProvider authenticationProvider() {\n        DaoAuthenticationProvider authProvider = new DaoAuthenticationProvider();\n        authProvider.setUserDetailsService(userDetailsService);\n        authProvider.setPasswordEncoder(passwordEncoder());\n        return authProvider;\n    }\n\n    @Bean\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n        http\n                .authenticationProvider(authenticationProvider())\n                .authorizeRequests(authorizeRequests -&gt;\n                        authorizeRequests\n                                .anyRequest().authenticated()\n                )\n                .formLogin(formLogin -&gt;\n                        formLogin\n                                .loginPage(&quot;/login&quot;)\n                                .defaultSuccessUrl(&quot;/allTasks&quot;, true)\n                                .loginProcessingUrl(&quot;/perform_login&quot;)\n                                .usernameParameter(&quot;email&quot;)\n                                .passwordParameter(&quot;password&quot;)\n                                .permitAll()\n                );\n        return http.build();\n    }\n}\n</code></pre>\n<p>HomeController (essential parts):</p>\n<pre><code>@PostMapping(&quot;/login&quot;)\n    public String login(@RequestParam(&quot;email&quot;) String email,\n                        @RequestParam(&quot;password&quot;) String password,\n                        Model model,\n                        HttpSession session) {\n        try {\n            Authentication auth = authenticationManager.authenticate(\n                    new UsernamePasswordAuthenticationToken(email, password)\n            );\n            SecurityContextHolder.getContext().setAuthentication(auth);\n\n            User user = (User) auth.getPrincipal();\n            session.setAttribute(&quot;user&quot;, user);\n            return &quot;redirect:/allTasks&quot;;\n        } catch (BadCredentialsException e) {\n            model.addAttribute(&quot;errorMessage&quot;, &quot;Email or password invalid&quot;);\n            return &quot;login&quot;;\n        }\n    }\n\n@PostMapping(&quot;/addUser&quot;)\n    public String addUser(@RequestParam(&quot;user-firstname&quot;) String newFirstName,\n                          @RequestParam(&quot;user-lastname&quot;) String newLastName,\n                          @RequestParam(&quot;user-email&quot;) String newEmail,\n                          @RequestParam(&quot;user-password&quot;) String newPassword,\n                          HttpSession session)\n    {\n        if ( session.getAttribute(&quot;user&quot;) == null )\n        {\n            return &quot;redirect:/&quot;;\n        }\n\n        //lave en ny User\n        User newUser = new User();\n        newUser.setFirstName(newFirstName);\n        newUser.setLastName(newLastName);\n        newUser.setEmail(newEmail);\n        // Encrypt the password before setting it\n        String encryptedPassword = passwordEncoder.encode(newPassword);\n        newUser.setPassword(encryptedPassword);\n\n        //Gem ny User\n        userRepository.addUser(newUser);\n\n        //Tilbage til start så man kan logge ind\n        return &quot;start&quot;;\n    }\n\n@PostMapping(&quot;/register&quot;)\n    public String registerUser(@RequestParam(&quot;first_name&quot;) String firstname,\n                               @RequestParam(&quot;last_name&quot;) String lastname,\n                               @RequestParam(&quot;email&quot;) String email,\n                               @RequestParam(&quot;password&quot;) String password,\n                               Model model,\n                               HttpSession session)\n    {\n        //Check if user with mail already exists\n        if ( !userRepository.checkIfUserExists(email) )\n        {\n            User user = new User(firstname, lastname, email, password);\n            userRepository.addUser(user);\n            session.setAttribute(&quot;user&quot;, user);\n            return &quot;redirect:/allTasks&quot;;\n        }\n        else\n        {\n            model.addAttribute(&quot;errorMessage&quot;, &quot;Email already in use&quot;);\n            return &quot;register&quot;;\n        }\n    }\n</code></pre>\n<p>Everything worked before I began experimenting with encryption, so I think the problem is in the SecurityConfig or CustomUserDetailsService? Or what do you think?</p>\n<p>I tried having the encryption directly in the userRepository addTask, but it gave the same problem.</p>\n<p>I tried to have the verification happen manually in the userRepository but it gave me some problems with the encryption.</p>\n"},{"tags":["java","kotlin","anchor","augmented-reality","arcore"],"owner":{"account_id":28620606,"reputation":1,"user_id":21913739,"display_name":"eschienator"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":14,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684332402,"creation_date":1684329913,"question_id":76272617,"body_markdown":"I&#39;m looping trough a list with coordinates in it and want to place multiple anchors. Now only the last one get rendered because it overrides it.\r\n\r\n\r\n    //loop trough the items in array\r\n    for(item in a){\r\n      //remove the { and } from the string\r\n      var b = item.replace(&quot;}&quot;, &quot;&quot;)\r\n      b = b.replace(&quot;{&quot;, &quot;&quot;)\r\n\r\n      //split the string on the , to get the values\r\n      var c = b.split(&quot;,&quot;)\r\n\r\n      var x = (c[1].split(&quot;:&quot;)[1])\r\n      var y = (c[2].split(&quot;:&quot;)[1])\r\n\r\n      val anchor =\r\n        session?.earth?.createAnchor(\r\n          /* Locational values */\r\n          x.toDouble(),\r\n          y.toDouble(),\r\n          session?.earth?.cameraGeospatialPose?.altitude?.minus(1)!!,\r\n          /* Rotational pose values */\r\n          0f,\r\n          0f,\r\n          0f,\r\n          1f\r\n        )\r\n}\r\n\r\nI don&#39;t mind the first steps for formatting de data from api call and making an array.\r\n\r\nThe item in the loop is an array with the first element being a name and the other two the coordinates.\r\n\r\nOnly the last item in the array is being created.","title":"How can I place mutliple anchors while looping trough a list with the coordinates in ArCore for Java/Kotlin?","body":"<p>I'm looping trough a list with coordinates in it and want to place multiple anchors. Now only the last one get rendered because it overrides it.</p>\n<pre><code>//loop trough the items in array\nfor(item in a){\n  //remove the { and } from the string\n  var b = item.replace(&quot;}&quot;, &quot;&quot;)\n  b = b.replace(&quot;{&quot;, &quot;&quot;)\n\n  //split the string on the , to get the values\n  var c = b.split(&quot;,&quot;)\n\n  var x = (c[1].split(&quot;:&quot;)[1])\n  var y = (c[2].split(&quot;:&quot;)[1])\n\n  val anchor =\n    session?.earth?.createAnchor(\n      /* Locational values */\n      x.toDouble(),\n      y.toDouble(),\n      session?.earth?.cameraGeospatialPose?.altitude?.minus(1)!!,\n      /* Rotational pose values */\n      0f,\n      0f,\n      0f,\n      1f\n    )\n</code></pre>\n<p>}</p>\n<p>I don't mind the first steps for formatting de data from api call and making an array.</p>\n<p>The item in the loop is an array with the first element being a name and the other two the coordinates.</p>\n<p>Only the last item in the array is being created.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":24443549,"reputation":360,"user_id":18366890,"display_name":"Stevie"},"score":0,"creation_date":1684331972,"post_id":76272896,"comment_id":134502956,"body_markdown":"Could you please add your build.gradle file?","body":"Could you please add your build.gradle file?"}],"answers":[{"tags":[],"owner":{"account_id":9339990,"reputation":1712,"user_id":6933090,"display_name":"Yevhenii Semenov"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1684332019,"creation_date":1684332019,"answer_id":76272954,"question_id":76272896,"body_markdown":"You need to ensure you run gradle with java 17 or higher.\r\n\r\nIf you run build via the command line, please check `java -version`\r\n\r\nIf you run a build via IDE (for example, IDEA), ensure your IDE uses the correct Java. For example, for IDEA it can be done in `Settings -&gt; Build,execution,deployment -&gt; Gradle -&gt; Gradle JVM`\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/fcJKW.jpg","title":"No matching variant of org.springframework.boot:spring-boot-gradle-plugin:3.0.5 was found","body":"<p>You need to ensure you run gradle with java 17 or higher.</p>\n<p>If you run build via the command line, please check <code>java -version</code></p>\n<p>If you run a build via IDE (for example, IDEA), ensure your IDE uses the correct Java. For example, for IDEA it can be done in <code>Settings -&gt; Build,execution,deployment -&gt; Gradle -&gt; Gradle JVM</code></p>\n<p><a href=\"https://i.stack.imgur.com/fcJKW.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fcJKW.jpg\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":28620836,"reputation":3,"user_id":21913916,"display_name":"ppp"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":561,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76272954,"answer_count":1,"score":0,"last_activity_date":1684332019,"creation_date":1684331583,"question_id":76272896,"body_markdown":"I updated the springboot version 2.7.9 to 3.0.5 in build.gradle and not able to build project, it says \r\n\r\n      &gt; No matching variant of org.springframework.boot:spring-boot-gradle-plugin:3.0.5 was found. The consumer was configured to find a runtime of a library compatible with Java 14, packaged as a jar, and its dependencies declared externally, as well as attribute &#39;org.gradle.plugin.api-version&#39; with value &#39;7.4.2&#39; but:\r\n          - Variant &#39;apiElements&#39; capability org.springframework.boot:spring-boot-gradle-plugin:3.0.5 declares a library, packaged as a jar, and its dependencies declared externally:\r\n              - Incompatible because this component declares an API of a component compatible with Java 17 and the consumer needed a runtime of a component compatible with Java 14.\r\n\r\n\r\n\r\nI&#39;ve also tried to changed java version from 17 to 14 but still getting same.","title":"No matching variant of org.springframework.boot:spring-boot-gradle-plugin:3.0.5 was found","body":"<p>I updated the springboot version 2.7.9 to 3.0.5 in build.gradle and not able to build project, it says</p>\n<pre><code>  &gt; No matching variant of org.springframework.boot:spring-boot-gradle-plugin:3.0.5 was found. The consumer was configured to find a runtime of a library compatible with Java 14, packaged as a jar, and its dependencies declared externally, as well as attribute 'org.gradle.plugin.api-version' with value '7.4.2' but:\n      - Variant 'apiElements' capability org.springframework.boot:spring-boot-gradle-plugin:3.0.5 declares a library, packaged as a jar, and its dependencies declared externally:\n          - Incompatible because this component declares an API of a component compatible with Java 17 and the consumer needed a runtime of a component compatible with Java 14.\n</code></pre>\n<p>I've also tried to changed java version from 17 to 14 but still getting same.</p>\n"},{"tags":["java","spring-boot","shiro"],"comments":[{"owner":{"account_id":14860286,"reputation":11,"user_id":10731360,"display_name":"SN.Tao"},"score":0,"creation_date":1684335210,"post_id":76272938,"comment_id":134503847,"body_markdown":"I solve this problem by changing the /user/info from authc to anon. It worked, the unit test and axios will be redirect to /user/unauthc successfully. But I don&#39;t know why it worked.","body":"I solve this problem by changing the /user/info from authc to anon. It worked, the unit test and axios will be redirect to /user/unauthc successfully. But I don&#39;t know why it worked."}],"owner":{"account_id":14860286,"reputation":11,"user_id":10731360,"display_name":"SN.Tao"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684331900,"creation_date":1684331900,"question_id":76272938,"body_markdown":"My code is based on Springboot, and I use shiro to implement login and permission manage. \r\n\r\nI have a method to get user info, the data will be returned as json format.\r\n\r\n```\r\n@GetMapping(&quot;/info&quot;)\r\n@RequiresAuthentication\r\npublic User info(HttpSession session) {\r\n    return userService.info(session);\r\n}\r\n```\r\n\r\nThere is my shiro config. **When I logout and call the info method, shiro will redirect the request to loginUrl eg &#39;/user/unauthc&#39;.**\r\n```\r\n@Bean\r\npublic ShiroFilterFactoryBean shiroFilterFactoryBean(DefaultWebSecurityManager securityManager) {\r\n    ShiroFilterFactoryBean factoryBean = new ShiroFilterFactoryBean();\r\n    factoryBean.setSecurityManager(securityManager);\r\n    factoryBean.setLoginUrl(&quot;/user/unauthc&quot;);\r\n    factoryBean.setSuccessUrl(&quot;/&quot;);\r\n    Map&lt;String, String&gt; map = new LinkedHashMap&lt;&gt;();\r\n    map.put(&quot;/user/login&quot;, &quot;anon&quot;);\r\n    map.put(&quot;/**&quot;, &quot;authc&quot;);\r\n    factoryBean.setFilterChainDefinitionMap(map);\r\n    return factoryBean;\r\n}\r\n```\r\n\r\nThere is my &#39;/user/unauthc&#39; method. It will be throw an UnauthenticatedException. And I have a handler to catch this exception and return a 403 response.\r\n\r\n```\r\n@GetMapping(&quot;/unauthc&quot;)\r\npublic void unauthc() {\r\n    throw new UnauthenticatedException();\r\n}\r\n\r\n@ExceptionHandler(UnauthenticatedException.class)\r\nResponseEntity&lt;String&gt; handleUnauthenticatedException(UnauthenticatedException e) {\r\n    log.info(e.getMessage());\r\n    return new ResponseEntity&lt;&gt;(&quot;User not login&quot;, HttpStatus.FORBIDDEN);\r\n}\r\n```\r\n\r\nHere is my question: when I test info method with logout status in unit test, I excepted a 403 code. However, I got a 302 code. Even having the same problem in axios request. So how can I solve this problem.\r\n\r\nThere is my unit test code and the log.\r\n```\r\n@Test\r\npublic void testInfo() throws Exception {\r\n    MockHttpSession session = new MockHttpSession();\r\n    mockMvc.perform(MockMvcRequestBuilders.get(&quot;/user/info&quot;).session(session))\r\n             .andExpect(MockMvcResultMatchers.status().isUnauthorized());\r\n}\r\n```\r\n```\r\nMockHttpServletRequest:\r\n      HTTP Method = GET\r\n      Request URI = /user/info\r\n       Parameters = {}\r\n          Headers = []\r\n             Body = null\r\n    Session Attrs = {shiroSavedRequest=org.apache.shiro.web.util.SavedRequest@6af310c7, org.apache.shiro.web.session.HttpServletSession.HOST_SESSION_KEY=localhost}\r\n\r\nHandler:\r\n             Type = null\r\n\r\nAsync:\r\n    Async started = false\r\n     Async result = null\r\n\r\nResolved Exception:\r\n             Type = null\r\n\r\nModelAndView:\r\n        View name = null\r\n             View = null\r\n            Model = null\r\n\r\nFlashMap:\r\n       Attributes = null\r\n\r\nMockHttpServletResponse:\r\n           Status = 302\r\n    Error message = null\r\n          Headers = [Location:&quot;/user/unauthc&quot;]\r\n     Content type = null\r\n             Body = \r\n    Forwarded URL = null\r\n   Redirected URL = /user/unauthc\r\n          Cookies = []\r\n\r\njava.lang.AssertionError: Status expected:&lt;401&gt; but was:&lt;302&gt;\r\nExpected :401\r\nActual   :302\r\n```\r\n\r\nI try to search this problem but the result I got is to modify `FormAuthenticationFilter`.","title":"Shiro probelm. a 302 problem occurs when I call an interface that requires permission with logout status","body":"<p>My code is based on Springboot, and I use shiro to implement login and permission manage.</p>\n<p>I have a method to get user info, the data will be returned as json format.</p>\n<pre><code>@GetMapping(&quot;/info&quot;)\n@RequiresAuthentication\npublic User info(HttpSession session) {\n    return userService.info(session);\n}\n</code></pre>\n<p>There is my shiro config. <strong>When I logout and call the info method, shiro will redirect the request to loginUrl eg '/user/unauthc'.</strong></p>\n<pre><code>@Bean\npublic ShiroFilterFactoryBean shiroFilterFactoryBean(DefaultWebSecurityManager securityManager) {\n    ShiroFilterFactoryBean factoryBean = new ShiroFilterFactoryBean();\n    factoryBean.setSecurityManager(securityManager);\n    factoryBean.setLoginUrl(&quot;/user/unauthc&quot;);\n    factoryBean.setSuccessUrl(&quot;/&quot;);\n    Map&lt;String, String&gt; map = new LinkedHashMap&lt;&gt;();\n    map.put(&quot;/user/login&quot;, &quot;anon&quot;);\n    map.put(&quot;/**&quot;, &quot;authc&quot;);\n    factoryBean.setFilterChainDefinitionMap(map);\n    return factoryBean;\n}\n</code></pre>\n<p>There is my '/user/unauthc' method. It will be throw an UnauthenticatedException. And I have a handler to catch this exception and return a 403 response.</p>\n<pre><code>@GetMapping(&quot;/unauthc&quot;)\npublic void unauthc() {\n    throw new UnauthenticatedException();\n}\n\n@ExceptionHandler(UnauthenticatedException.class)\nResponseEntity&lt;String&gt; handleUnauthenticatedException(UnauthenticatedException e) {\n    log.info(e.getMessage());\n    return new ResponseEntity&lt;&gt;(&quot;User not login&quot;, HttpStatus.FORBIDDEN);\n}\n</code></pre>\n<p>Here is my question: when I test info method with logout status in unit test, I excepted a 403 code. However, I got a 302 code. Even having the same problem in axios request. So how can I solve this problem.</p>\n<p>There is my unit test code and the log.</p>\n<pre><code>@Test\npublic void testInfo() throws Exception {\n    MockHttpSession session = new MockHttpSession();\n    mockMvc.perform(MockMvcRequestBuilders.get(&quot;/user/info&quot;).session(session))\n             .andExpect(MockMvcResultMatchers.status().isUnauthorized());\n}\n</code></pre>\n<pre><code>MockHttpServletRequest:\n      HTTP Method = GET\n      Request URI = /user/info\n       Parameters = {}\n          Headers = []\n             Body = null\n    Session Attrs = {shiroSavedRequest=org.apache.shiro.web.util.SavedRequest@6af310c7, org.apache.shiro.web.session.HttpServletSession.HOST_SESSION_KEY=localhost}\n\nHandler:\n             Type = null\n\nAsync:\n    Async started = false\n     Async result = null\n\nResolved Exception:\n             Type = null\n\nModelAndView:\n        View name = null\n             View = null\n            Model = null\n\nFlashMap:\n       Attributes = null\n\nMockHttpServletResponse:\n           Status = 302\n    Error message = null\n          Headers = [Location:&quot;/user/unauthc&quot;]\n     Content type = null\n             Body = \n    Forwarded URL = null\n   Redirected URL = /user/unauthc\n          Cookies = []\n\njava.lang.AssertionError: Status expected:&lt;401&gt; but was:&lt;302&gt;\nExpected :401\nActual   :302\n</code></pre>\n<p>I try to search this problem but the result I got is to modify <code>FormAuthenticationFilter</code>.</p>\n"},{"tags":["java","eclipse","algorithm","stdin"],"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1492116441,"post_id":43401347,"comment_id":73863526,"body_markdown":"Try typing ctrl+Z.","body":"Try typing ctrl+Z."},{"owner":{"account_id":10024162,"reputation":731,"user_id":7412836,"accept_rate":36,"display_name":"RB34"},"score":0,"creation_date":1492116598,"post_id":43401347,"comment_id":73863612,"body_markdown":"I tried this already. I am on a mac btw.","body":"I tried this already. I am on a mac btw."},{"owner":{"account_id":1601399,"reputation":289,"user_id":1482356,"display_name":"Peter Adrian"},"score":0,"creation_date":1492117194,"post_id":43401347,"comment_id":73863854,"body_markdown":"I think you should use hasNextLine instead of isEmpty. Try kill command in another window to stop the program (https://www.howtogeek.com/209658/how-to-force-applications-and-processes-to-quit-on-os-x/).","body":"I think you should use hasNextLine instead of isEmpty. Try kill command in another window to stop the program (<a href=\"https://www.howtogeek.com/209658/how-to-force-applications-and-processes-to-quit-on-os-x/\" rel=\"nofollow noreferrer\">howtogeek.com/209658/&hellip;</a>)."},{"owner":{"account_id":10024162,"reputation":731,"user_id":7412836,"accept_rate":36,"display_name":"RB34"},"score":0,"creation_date":1492117427,"post_id":43401347,"comment_id":73863952,"body_markdown":"I am looking for a greater understanding of the method. I haven&#39;t had any trouble with my system getting stuck. (as i said in my post there is a line that reads user input so the program doesn&#39;t infinitely loop without me doing anything)","body":"I am looking for a greater understanding of the method. I haven&#39;t had any trouble with my system getting stuck. (as i said in my post there is a line that reads user input so the program doesn&#39;t infinitely loop without me doing anything)"}],"answers":[{"tags":[],"owner":{"account_id":148005,"reputation":3416,"user_id":359487,"display_name":"Rui Carvalho"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1502034433,"creation_date":1502030129,"answer_id":45533047,"question_id":43401347,"body_markdown":"I think that on Mac you can use `CMD+D` (`⌘+D`) to mark the end of input to the shell. See: https://www.jetbrains.com/help/idea/debug-tool-window-console.html\r\n\r\n&gt; **Keyboard Shortcuts**\r\n&gt; \r\n&gt; The ⌘D key combination allows you to send EOF (end of file), i.e. to\r\n&gt; signal that no more data can be read from a data source.\r\n\r\nOn the issue of the Princeton libraries provided in the Algorithms - Part 1 in Coursera&#39;s course, you can play a bit with their code, particularly in the class `import edu.princeton.cs.algs4.StdIn;`. Their implementation that uses that code is probably not the most sophisticated to play with the concepts:\r\n\r\n    while (!StdIn.isEmpty()) {\r\n         int p = StdIn.readInt();\r\n         int q = StdIn.readInt();\r\n    \r\n         if (!uf.connected(p, q)) {\r\n             uf.union(p, q);\r\n             StdOut.println(p + &quot; &quot; + q);\r\n         }\r\n    }\r\n\r\nHere&#39;s what I did: \r\n\r\n 1. Created new Java project in IntelliJ\r\n 2. Create new java package (will be under src)\r\n 3. Create new class for their examples, that will have a main method\r\n 4. Created libs folder in project\r\n 5. Downloaded their code from http://algs4.cs.princeton.edu/code/algs4.jar and placed that jar in the libs folder\r\n 6. Added that lib to project - on project tab in IntelliJ, right click the project &gt; Open Module Settings  &gt; Click dependencies tab &gt; Click &#39;+&#39; &gt; JAR or directories... &gt; choose the jar from libs folder above\r\n 7. I changed the code in the while loop above to have a better user interaction on the shell (be creative here - instead of using the isEmpty() use a check for p and q to be both 0 to mark end of input, for example. \r\n\r\nNow to run that just do right-click on the code that has the class with the main static method, and choose Run (CTRL+SHIFT+R).\r\n\r\nThis will avoid the dreaded CMD+D and some issues that go with it if you want to write more code after the while loop - for instance, I added code to check if 2 objects are connect:\r\n\r\n    StdOut.println(&quot;Check if 2 objects are connected: &quot;);\r\n    try {\r\n        Scanner reader = new Scanner(System.in);  // Reading from System.in\r\n        System.out.println(&quot;Enter first object: &quot;);\r\n        int n = reader.nextInt(); // Scans the next token of the input as an int.\r\n        System.out.println(&quot;Enter second object: &quot;);\r\n        int m = reader.nextInt(); // Scans the next token of the input as an int.\r\n        StdOut.println(uf.connected(n, m) ? &quot;Connected&quot; : &quot;Not Connected&quot;);\r\n    } catch(Exception e) {\r\n        // whatever...\r\n    }\r\n\r\nHere&#39;s my very quick and dirty approach to the problem:\r\n\r\n    package com.algorithms;\r\n    \r\n    import edu.princeton.cs.algs4.StdIn;\r\n    import edu.princeton.cs.algs4.StdOut;\r\n    import edu.princeton.cs.algs4.UF;\r\n    \r\n    import java.util.Scanner;\r\n    \r\n    public class Week1 {\r\n        private static UF uf;\r\n    \r\n        public static void main(String[] args)\r\n        {\r\n            StdOut.println(&quot;Enter the total number of objects: &quot;);\r\n            int N = StdIn.readInt();\r\n    \r\n            StdOut.println(&quot;Enter the unions between any of those objects...&quot;);\r\n    \r\n            Week1.uf = new UF(N);\r\n            while (true) {\r\n    \r\n                int p = StdIn.readInt();\r\n                int q = StdIn.readInt();\r\n    \r\n                if (!uf.connected(p, q)) {\r\n                    Week1.uf.union(p, q);\r\n                    StdOut.println(p + &quot; &quot; + q);\r\n                }\r\n    \r\n                if(p==0 &amp;&amp; q==0) break;\r\n            }\r\n            checkIfConnected();\r\n        }\r\n    \r\n        private static void checkIfConnected()\r\n        {\r\n            StdOut.println(&quot;Check if 2 objects are connected: &quot;);\r\n            try {\r\n                Scanner reader = new Scanner(System.in);  // Reading from System.in\r\n                System.out.println(&quot;Enter first object: &quot;);\r\n                int n = reader.nextInt(); // Scans the next token of the input as an int.\r\n                System.out.println(&quot;Enter second object: &quot;);\r\n                int m = reader.nextInt(); // Scans the next token of the input as an int.\r\n                StdOut.println(Week1.uf.connected(n, m) ? &quot;Connected&quot; : &quot;Not Connected&quot;);\r\n            } catch(Exception e) {}\r\n        }\r\n    }\r\n\r\n\r\n","title":"how to make StdIn.isEmpty() return true?","body":"<p>I think that on Mac you can use <code>CMD+D</code> (<code>⌘+D</code>) to mark the end of input to the shell. See: <a href=\"https://www.jetbrains.com/help/idea/debug-tool-window-console.html\" rel=\"noreferrer\">https://www.jetbrains.com/help/idea/debug-tool-window-console.html</a></p>\n\n<blockquote>\n  <p><strong>Keyboard Shortcuts</strong></p>\n  \n  <p>The ⌘D key combination allows you to send EOF (end of file), i.e. to\n  signal that no more data can be read from a data source.</p>\n</blockquote>\n\n<p>On the issue of the Princeton libraries provided in the Algorithms - Part 1 in Coursera's course, you can play a bit with their code, particularly in the class <code>import edu.princeton.cs.algs4.StdIn;</code>. Their implementation that uses that code is probably not the most sophisticated to play with the concepts:</p>\n\n<pre><code>while (!StdIn.isEmpty()) {\n     int p = StdIn.readInt();\n     int q = StdIn.readInt();\n\n     if (!uf.connected(p, q)) {\n         uf.union(p, q);\n         StdOut.println(p + \" \" + q);\n     }\n}\n</code></pre>\n\n<p>Here's what I did: </p>\n\n<ol>\n<li>Created new Java project in IntelliJ</li>\n<li>Create new java package (will be under src)</li>\n<li>Create new class for their examples, that will have a main method</li>\n<li>Created libs folder in project</li>\n<li>Downloaded their code from <a href=\"http://algs4.cs.princeton.edu/code/algs4.jar\" rel=\"noreferrer\">http://algs4.cs.princeton.edu/code/algs4.jar</a> and placed that jar in the libs folder</li>\n<li>Added that lib to project - on project tab in IntelliJ, right click the project > Open Module Settings  > Click dependencies tab > Click '+' > JAR or directories... > choose the jar from libs folder above</li>\n<li>I changed the code in the while loop above to have a better user interaction on the shell (be creative here - instead of using the isEmpty() use a check for p and q to be both 0 to mark end of input, for example. </li>\n</ol>\n\n<p>Now to run that just do right-click on the code that has the class with the main static method, and choose Run (CTRL+SHIFT+R).</p>\n\n<p>This will avoid the dreaded CMD+D and some issues that go with it if you want to write more code after the while loop - for instance, I added code to check if 2 objects are connect:</p>\n\n<pre><code>StdOut.println(\"Check if 2 objects are connected: \");\ntry {\n    Scanner reader = new Scanner(System.in);  // Reading from System.in\n    System.out.println(\"Enter first object: \");\n    int n = reader.nextInt(); // Scans the next token of the input as an int.\n    System.out.println(\"Enter second object: \");\n    int m = reader.nextInt(); // Scans the next token of the input as an int.\n    StdOut.println(uf.connected(n, m) ? \"Connected\" : \"Not Connected\");\n} catch(Exception e) {\n    // whatever...\n}\n</code></pre>\n\n<p>Here's my very quick and dirty approach to the problem:</p>\n\n<pre><code>package com.algorithms;\n\nimport edu.princeton.cs.algs4.StdIn;\nimport edu.princeton.cs.algs4.StdOut;\nimport edu.princeton.cs.algs4.UF;\n\nimport java.util.Scanner;\n\npublic class Week1 {\n    private static UF uf;\n\n    public static void main(String[] args)\n    {\n        StdOut.println(\"Enter the total number of objects: \");\n        int N = StdIn.readInt();\n\n        StdOut.println(\"Enter the unions between any of those objects...\");\n\n        Week1.uf = new UF(N);\n        while (true) {\n\n            int p = StdIn.readInt();\n            int q = StdIn.readInt();\n\n            if (!uf.connected(p, q)) {\n                Week1.uf.union(p, q);\n                StdOut.println(p + \" \" + q);\n            }\n\n            if(p==0 &amp;&amp; q==0) break;\n        }\n        checkIfConnected();\n    }\n\n    private static void checkIfConnected()\n    {\n        StdOut.println(\"Check if 2 objects are connected: \");\n        try {\n            Scanner reader = new Scanner(System.in);  // Reading from System.in\n            System.out.println(\"Enter first object: \");\n            int n = reader.nextInt(); // Scans the next token of the input as an int.\n            System.out.println(\"Enter second object: \");\n            int m = reader.nextInt(); // Scans the next token of the input as an int.\n            StdOut.println(Week1.uf.connected(n, m) ? \"Connected\" : \"Not Connected\");\n        } catch(Exception e) {}\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9635834,"reputation":121,"user_id":10166131,"display_name":"eGregius"},"comment_count":0,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1535119698,"creation_date":1535119698,"answer_id":52006268,"question_id":43401347,"body_markdown":"&gt; Before reading each number, the program uses the method StdIn.isEmpty() to check whether there are any more numbers in the input stream. How do we signal that we have no more data to type? By convention, we type a special sequence of characters known as the end-of-file sequence. Unfortunately, the terminal applications that we typically encounter on modern operating systems use different conventions for this critically important sequence. In this book, we use Ctrl-D...\r\n&gt; *Computer Science  Sedgewick*\r\n\r\nTherefore `isEmpty` is actually `isCtrl-D`.\r\n\r\nAlso, try `StdIn.isEmpty()` in the terminal application without anything beforehand will leave you with no boolean but a standard input stream requesting inputs. So when a program like the following one runs:\r\n\r\n    public class Average\r\n      {\r\n         public static void main(String[] args)\r\n         {  // Average the numbers on standard input.\r\n            double sum = 0.0;\r\n            int n = 0;\r\n            while (!StdIn.isEmpty())\r\n            {  // Read a number from standard input and add to sum.\r\n               double value = StdIn.readDouble();\r\n               sum += value;\r\n               n++;\r\n            }\r\n            double average = sum / n;\r\n            StdOut.println(&quot;Average is &quot; + average);\r\n         }\r\n     } \r\n, the standard input stream pops out when decide the conditional `while (!StdIn.isEmpty)` for the first time instead of `StdIn.readDouble()`. If you then type in some numbers, return them, causing standard input stream to be non-empty, the program would then jump inside the while body. I found out this is the case by testing \r\n\r\n    &gt; java Average\r\n     [DrJava Input Box] (And I hit Ctrl+D here)\r\n    Average is NaN\r\nNaN means n = 0 which means the while body was left no touched. ","title":"how to make StdIn.isEmpty() return true?","body":"<blockquote>\n  <p>Before reading each number, the program uses the method StdIn.isEmpty() to check whether there are any more numbers in the input stream. How do we signal that we have no more data to type? By convention, we type a special sequence of characters known as the end-of-file sequence. Unfortunately, the terminal applications that we typically encounter on modern operating systems use different conventions for this critically important sequence. In this book, we use Ctrl-D...\n  <em>Computer Science  Sedgewick</em></p>\n</blockquote>\n\n<p>Therefore <code>isEmpty</code> is actually <code>isCtrl-D</code>.</p>\n\n<p>Also, try <code>StdIn.isEmpty()</code> in the terminal application without anything beforehand will leave you with no boolean but a standard input stream requesting inputs. So when a program like the following one runs:</p>\n\n<pre><code>public class Average\n  {\n     public static void main(String[] args)\n     {  // Average the numbers on standard input.\n        double sum = 0.0;\n        int n = 0;\n        while (!StdIn.isEmpty())\n        {  // Read a number from standard input and add to sum.\n           double value = StdIn.readDouble();\n           sum += value;\n           n++;\n        }\n        double average = sum / n;\n        StdOut.println(\"Average is \" + average);\n     }\n } \n</code></pre>\n\n<p>, the standard input stream pops out when decide the conditional <code>while (!StdIn.isEmpty)</code> for the first time instead of <code>StdIn.readDouble()</code>. If you then type in some numbers, return them, causing standard input stream to be non-empty, the program would then jump inside the while body. I found out this is the case by testing </p>\n\n<pre><code>&gt; java Average\n [DrJava Input Box] (And I hit Ctrl+D here)\nAverage is NaN\n</code></pre>\n\n<p>NaN means n = 0 which means the while body was left no touched. </p>\n"},{"tags":[],"owner":{"account_id":2146055,"reputation":2489,"user_id":1903668,"accept_rate":65,"display_name":"Alen Lee"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1543047006,"creation_date":1543046324,"answer_id":53456289,"question_id":43401347,"body_markdown":"1. press `Enter` to next line\r\n2. Lost cursor\r\n3. Back the windows/cursor, try press `Ctrl + Z`, the `StdIn.isEmpty()` will return `true`\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/mqIbY.jpg","title":"how to make StdIn.isEmpty() return true?","body":"<ol>\n<li>press <code>Enter</code> to next line</li>\n<li>Lost cursor</li>\n<li>Back the windows/cursor, try press <code>Ctrl + Z</code>, the <code>StdIn.isEmpty()</code> will return <code>true</code></li>\n</ol>\n\n<p><a href=\"https://i.stack.imgur.com/mqIbY.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mqIbY.jpg\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":22856917,"reputation":76,"user_id":17001641,"display_name":"Daniel Hu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684331893,"creation_date":1684331893,"answer_id":76272935,"question_id":43401347,"body_markdown":"Same `StdIn.isEmpty()` method from the Princeton libraries provided in the Algorithms Coursera algorithms course.  \r\nThe issue with sending `EOF` in IntelliJ IDEA might be due to a conflict with another shortcut, or because no shortcut is set for `EOF`.\r\nI just fixed it by changing my IDEA shortcut as follows:\r\n1. go to `Settings` -&gt; `Keymap`\r\n2. search `eof`\r\n3. add/change the shortcut for whatever you like.\r\n\r\n[IDEA set EOF shortcut][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/yfPEG.png\r\n\r\nThis should allow you to terminate the while loop in your Java program using the new keyboard shortcut you have set.","title":"how to make StdIn.isEmpty() return true?","body":"<p>Same <code>StdIn.isEmpty()</code> method from the Princeton libraries provided in the Algorithms Coursera algorithms course.<br />\nThe issue with sending <code>EOF</code> in IntelliJ IDEA might be due to a conflict with another shortcut, or because no shortcut is set for <code>EOF</code>.\nI just fixed it by changing my IDEA shortcut as follows:</p>\n<ol>\n<li>go to <code>Settings</code> -&gt; <code>Keymap</code></li>\n<li>search <code>eof</code></li>\n<li>add/change the shortcut for whatever you like.</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/yfPEG.png\" rel=\"nofollow noreferrer\">IDEA set EOF shortcut</a></p>\n<p>This should allow you to terminate the while loop in your Java program using the new keyboard shortcut you have set.</p>\n"}],"owner":{"account_id":10024162,"reputation":731,"user_id":7412836,"accept_rate":36,"display_name":"RB34"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8964,"favorite_count":0,"down_vote_count":0,"up_vote_count":21,"answer_count":4,"score":21,"last_activity_date":1684331893,"creation_date":1492116092,"question_id":43401347,"body_markdown":"I am using the StdIn.isEmpty() method from the Princeton libraries provided in the Algorithms Coursera algorithms course but am confused as to how it works. I have the statement \r\n\r\n    while (!StdIn.isEmpty())\r\n\r\nwith some code enclosed that reads user input but I can&#39;t seem to break out of the loop. By my understanding if I hit enter without typing in any text that should mean that standard input is empty and the while loop should be broken. I looked up the code for isEmpty but it did not clarify anything: \r\n\r\n    public static boolean isEmpty() {\r\n        return !scanner.hasNext();\r\n    }\r\n\r\nCan someone clarify how standard input works and help me fix my misunderstanding of this method?","title":"how to make StdIn.isEmpty() return true?","body":"<p>I am using the StdIn.isEmpty() method from the Princeton libraries provided in the Algorithms Coursera algorithms course but am confused as to how it works. I have the statement </p>\n\n<pre><code>while (!StdIn.isEmpty())\n</code></pre>\n\n<p>with some code enclosed that reads user input but I can't seem to break out of the loop. By my understanding if I hit enter without typing in any text that should mean that standard input is empty and the while loop should be broken. I looked up the code for isEmpty but it did not clarify anything: </p>\n\n<pre><code>public static boolean isEmpty() {\n    return !scanner.hasNext();\n}\n</code></pre>\n\n<p>Can someone clarify how standard input works and help me fix my misunderstanding of this method?</p>\n"},{"tags":["java","spring-boot","google-cloud-platform","google-cloud-pubsub"],"comments":[{"owner":{"account_id":13722712,"reputation":26,"user_id":9902246,"display_name":"tschi"},"score":0,"creation_date":1684334366,"post_id":76272410,"comment_id":134503586,"body_markdown":"I fix it with `@IntegrationComponentScan` , still need to check if the message are realy post to my local pubsub emulator","body":"I fix it with <code>@IntegrationComponentScan</code> , still need to check if the message are realy post to my local pubsub emulator"}],"owner":{"account_id":13722712,"reputation":26,"user_id":9902246,"display_name":"tschi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":157,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684331651,"creation_date":1684328471,"question_id":76272410,"body_markdown":"I trying to use GCP PUB/SUB with springboot 3. I am using example from [Spring](https://spring.io/guides/gs/messaging-gcp-pubsub/) \r\nI have config class\r\n\r\n```\r\n@Configuration\r\npublic class PubSubConfig {\r\n\r\n    @Bean\r\n    @ServiceActivator(inputChannel = &quot;pubsubOutputChannel&quot;)\r\n    public MessageHandler messageSender(PubSubTemplate pubsubTemplate) {\r\n        return new PubSubMessageHandler(\r\n                pubsubTemplate, &quot;check&quot;);\r\n    }\r\n    @MessagingGateway(defaultRequestChannel = &quot;pubsubOutputChannel&quot;)\r\n    public interface PubsubOutboundGateway {\r\n        void sendToPubsub(String text);\r\n    }\r\n}\r\n```\r\nI am trying to inject in my service class\r\n\r\n```\r\n@Service\r\n@Slf4j\r\n@RequiredArgsConstructor\r\npublic class MyService{\r\n  private final PubSubConfig.PubsubOutboundGateway gateway;\r\n```\r\n\r\nBut the application can&#39;t start when I use\r\n\r\n```\r\n  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n  &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n  &lt;version&gt;3.0.6&lt;/version&gt;\r\n```\r\nI have `required a bean of type &#39;....PubSubConfig$PubsubOutboundGateway&#39; that could not be found`\r\nIt&#39;s working with `&lt;version&gt;2.7.6&lt;/version&gt;`","title":"Required bean of type PubsubOutboundGateway&#39; that could not be found, work with springboot 2.7 but not with springboot 3","body":"<p>I trying to use GCP PUB/SUB with springboot 3. I am using example from <a href=\"https://spring.io/guides/gs/messaging-gcp-pubsub/\" rel=\"nofollow noreferrer\">Spring</a>\nI have config class</p>\n<pre><code>@Configuration\npublic class PubSubConfig {\n\n    @Bean\n    @ServiceActivator(inputChannel = &quot;pubsubOutputChannel&quot;)\n    public MessageHandler messageSender(PubSubTemplate pubsubTemplate) {\n        return new PubSubMessageHandler(\n                pubsubTemplate, &quot;check&quot;);\n    }\n    @MessagingGateway(defaultRequestChannel = &quot;pubsubOutputChannel&quot;)\n    public interface PubsubOutboundGateway {\n        void sendToPubsub(String text);\n    }\n}\n</code></pre>\n<p>I am trying to inject in my service class</p>\n<pre><code>@Service\n@Slf4j\n@RequiredArgsConstructor\npublic class MyService{\n  private final PubSubConfig.PubsubOutboundGateway gateway;\n</code></pre>\n<p>But the application can't start when I use</p>\n<pre><code>  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n  &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n  &lt;version&gt;3.0.6&lt;/version&gt;\n</code></pre>\n<p>I have <code>required a bean of type '....PubSubConfig$PubsubOutboundGateway' that could not be found</code>\nIt's working with <code>&lt;version&gt;2.7.6&lt;/version&gt;</code></p>\n"},{"tags":["java","spring-boot","randoop"],"owner":{"account_id":16116853,"reputation":55,"user_id":11633731,"display_name":"Saverio Mirko Viola"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":141,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684331474,"creation_date":1684331474,"question_id":76272881,"body_markdown":"I was able to generate unit tests using Randdop tool. I tried to import those junit in my spring-boot application but I could not figure out how to run them. I have a lot of errors due to unrecognized imports.\r\n\r\nI tried to downgrade spring-boot-starter-junit lib to version 4 by following this guide:\r\nhttps://www.baeldung.com/spring-boot-testing (section 3.1), witn no success.\r\n\r\nthis is the only dependency I included in my project other than proprietary Framework dependency which mainly contains dependencies such as lombook, common to all projects:\r\n\r\n```\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t&lt;scope&gt;test&lt;/scope&gt;\r\n&lt;/dependency&gt;\r\n ```\r\n\r\nAlthough I include junit4, I have some other errors. One of this is about an inport which is missing on classpath: import spring.boot.loader....","title":"How to run unit tests generated with Randoop in Spring-Boot 3.0 or higher?","body":"<p>I was able to generate unit tests using Randdop tool. I tried to import those junit in my spring-boot application but I could not figure out how to run them. I have a lot of errors due to unrecognized imports.</p>\n<p>I tried to downgrade spring-boot-starter-junit lib to version 4 by following this guide:\n<a href=\"https://www.baeldung.com/spring-boot-testing\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-boot-testing</a> (section 3.1), witn no success.</p>\n<p>this is the only dependency I included in my project other than proprietary Framework dependency which mainly contains dependencies such as lombook, common to all projects:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Although I include junit4, I have some other errors. One of this is about an inport which is missing on classpath: import spring.boot.loader....</p>\n"},{"tags":["java","xml"],"comments":[{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":0,"creation_date":1684271382,"post_id":76267055,"comment_id":134493464,"body_markdown":"Please mark the line in your code where the exception occurs. Also the stack trace of the exception would be helpful.","body":"Please mark the line in your code where the exception occurs. Also the stack trace of the exception would be helpful."},{"owner":{"account_id":3421244,"reputation":35883,"user_id":2868801,"display_name":"dave_thompson_085"},"score":1,"creation_date":1684296821,"post_id":76267055,"comment_id":134495920,"body_markdown":"@Robert: there&#39;s only one call to that method and the stacktrace isn&#39;t going to add anything. OP: make sure your ks file contains/uses the alias &#39;cert12&#39;; if it is in PKCS12 format, which the suffix .p12 usually implies but not necessarily, Java&#39;s &#39;alias&#39; is the PKCS12 &#39;friendly name&#39;. The simplest way is `keytool -list -keystore certDir/cert12.p12`.","body":"@Robert: there&#39;s only one call to that method and the stacktrace isn&#39;t going to add anything. OP: make sure your ks file contains/uses the alias &#39;cert12&#39;; if it is in PKCS12 format, which the suffix .p12 usually implies but not necessarily, Java&#39;s &#39;alias&#39; is the PKCS12 &#39;friendly name&#39;. The simplest way is <code>keytool -list -keystore certDir&#47;cert12.p12</code>."},{"owner":{"account_id":2886946,"reputation":15,"user_id":2476575,"accept_rate":75,"display_name":"John Malko"},"score":0,"creation_date":1684331682,"post_id":76267055,"comment_id":134502877,"body_markdown":"I have updated the alias with (String) ks.aliases().nextElement() and it works now. But the problem is that it generates invalid xml. The requirements require the digestValue to be Base 64 encoded. ENcoding int after it is being signed does not makes a lot of difference.","body":"I have updated the alias with (String) ks.aliases().nextElement() and it works now. But the problem is that it generates invalid xml. The requirements require the digestValue to be Base 64 encoded. ENcoding int after it is being signed does not makes a lot of difference."}],"owner":{"account_id":2886946,"reputation":15,"user_id":2476575,"accept_rate":75,"display_name":"John Malko"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":92,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684331315,"creation_date":1684271057,"question_id":76267055,"body_markdown":"I am trying to sign XML with .p12 certificate utilizing the code bellow, but I am getting an error:\r\n\r\n **Exception in thread &quot;main&quot; java.lang.NullPointerException: Cannot invoke &quot;java.security.KeyStore$PrivateKeyEntry.getCertificate()&quot; because &quot;keyEntry&quot; is null\r\n\tat xmlCreateSignature/xmlCreateSignature.xmlSignature.main(xmlSignature.java:38)**\r\n\r\nLine 38 is `X509Certificate cert = (X509Certificate) keyEntry.getCertificate();`\r\n\r\nAny help is appreciated: \r\n\r\nHere is my code: \r\n\r\n  \r\n\r\n    package xmlCreateSignature;\r\n    import java.io.*;\r\n    import java.security.*;\r\n    import java.security.cert.Certificate;\r\n    import java.security.cert.CertificateException;\r\n    import java.util.Collections;\r\n    import java.util.List;\r\n    \r\n    import javax.xml.XMLConstants;\r\n    import javax.xml.crypto.*;\r\n    import javax.xml.crypto.dom.*;\r\n    import javax.xml.crypto.dsig.*;\r\n    import javax.xml.crypto.dsig.dom.*;\r\n    import javax.xml.crypto.dsig.keyinfo.*;\r\n    import javax.xml.crypto.dsig.spec.C14NMethodParameterSpec;\r\n    import javax.xml.crypto.dsig.spec.TransformParameterSpec;\r\n    import javax.xml.parsers.*;\r\n    import javax.xml.transform.*;\r\n    import javax.xml.transform.dom.*;\r\n    import javax.xml.transform.stream.*;\r\n    \r\n    import org.w3c.dom.Document;\r\n    import org.w3c.dom.Element;\r\n    import java.security.cert.X509Certificate;\r\n    import java.util.Base64;\r\n    \r\n    \r\n    public class xmlSignature {\r\n    public static void main(String[] args) throws Exception {\r\n    \tSystem.setProperty(&quot;com.sun.org.apache.xml.internal.security.ignoreLineBreaks&quot;, &quot;true&quot;);\r\n    \t\r\n    \t// Load the XML document\r\n    \tDocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();\r\n    \tDocumentBuilder dBuilder = dbFactory.newDocumentBuilder();\r\n    \tDocument doc = dBuilder.parse(new File(&quot;./certDir/request.xml&quot;));\r\n    \t\r\n    \t// Load the certificate\r\n    \tKeyStore ks = KeyStore.getInstance(&quot;PKCS12&quot;);\r\n    \tks.load(new FileInputStream(&quot;./certDir/4300648_identity.p12&quot;), &quot;DAL00MATIAN&quot;.toCharArray());\r\n    \tKeyStore.PrivateKeyEntry keyEntry = (KeyStore.PrivateKeyEntry) ks.getEntry((String) ks.aliases().nextElement(), new KeyStore.PasswordProtection(&quot;DAL00MATIAN&quot;.toCharArray()));\r\n    \tX509Certificate cert = (X509Certificate) keyEntry.getCertificate();\r\n    \r\n    \t// Create the XML signature\r\n    \tDOMSignContext dsc = new DOMSignContext(keyEntry.getPrivateKey(), doc.getDocumentElement());\r\n    \tXMLSignatureFactory fac = XMLSignatureFactory.getInstance(&quot;DOM&quot;);\r\n    \tReference ref = fac.newReference(&quot;&quot;, fac.newDigestMethod(DigestMethod.SHA256, null), Collections.singletonList(fac.newTransform(Transform.ENVELOPED, (TransformParameterSpec) null)), null, null);\r\n    \tSignedInfo si = fac.newSignedInfo(fac.newCanonicalizationMethod(CanonicalizationMethod.INCLUSIVE, (C14NMethodParameterSpec) null), fac.newSignatureMethod(SignatureMethod.RSA_SHA256, null), Collections.singletonList(ref));\r\n    \tKeyInfoFactory kif = fac.getKeyInfoFactory();\r\n    \tX509Data x509d = kif.newX509Data(Collections.singletonList(cert));\r\n    \tKeyInfo ki = kif.newKeyInfo(Collections.singletonList(x509d));\r\n    \tXMLSignature signature = fac.newXMLSignature(si, ki);\r\n    \r\n    \t// Sign the XML document\r\n    \tsignature.sign(dsc);\r\n    \tSignedInfo signedInfo = signature.getSignedInfo();\r\n    \r\n        // Get the references from the signed info\r\n        List&lt;Reference&gt; references = signedInfo.getReferences();\r\n    \r\n        // Process each reference and encode the digestValue to Base64\r\n        for (Reference reference : references) {\r\n            // Get the digestValue as a byte array\r\n            byte[] digestValue = reference.getDigestValue();\r\n    \r\n            // Encode the digestValue to Base64\r\n            String base64DigestValue = Base64.getEncoder().encodeToString(digestValue);\r\n    \r\n            // Output the Base64-encoded digestValue\r\n            System.out.println(&quot;Base64-encoded DigestValue: &quot; + base64DigestValue);\r\n        }\r\n    \r\n        // Save the signed XML document\r\n    \r\n    \t// Save the signed XML document\r\n    \tTransformerFactory tf = TransformerFactory.newInstance();\r\n    \tTransformer trans = tf.newTransformer();\r\n    \ttrans.transform(new DOMSource(doc), new StreamResult(new File(&quot;./certDir/request_response.xml&quot;)));\r\n    \r\n    }\r\n    }\r\n\r\n","title":"Sign XML with .p12 certificate keyEntry error null","body":"<p>I am trying to sign XML with .p12 certificate utilizing the code bellow, but I am getting an error:</p>\n<p><strong>Exception in thread &quot;main&quot; java.lang.NullPointerException: Cannot invoke &quot;java.security.KeyStore$PrivateKeyEntry.getCertificate()&quot; because &quot;keyEntry&quot; is null\nat xmlCreateSignature/xmlCreateSignature.xmlSignature.main(xmlSignature.java:38)</strong></p>\n<p>Line 38 is <code>X509Certificate cert = (X509Certificate) keyEntry.getCertificate();</code></p>\n<p>Any help is appreciated:</p>\n<p>Here is my code:</p>\n<pre><code>package xmlCreateSignature;\nimport java.io.*;\nimport java.security.*;\nimport java.security.cert.Certificate;\nimport java.security.cert.CertificateException;\nimport java.util.Collections;\nimport java.util.List;\n\nimport javax.xml.XMLConstants;\nimport javax.xml.crypto.*;\nimport javax.xml.crypto.dom.*;\nimport javax.xml.crypto.dsig.*;\nimport javax.xml.crypto.dsig.dom.*;\nimport javax.xml.crypto.dsig.keyinfo.*;\nimport javax.xml.crypto.dsig.spec.C14NMethodParameterSpec;\nimport javax.xml.crypto.dsig.spec.TransformParameterSpec;\nimport javax.xml.parsers.*;\nimport javax.xml.transform.*;\nimport javax.xml.transform.dom.*;\nimport javax.xml.transform.stream.*;\n\nimport org.w3c.dom.Document;\nimport org.w3c.dom.Element;\nimport java.security.cert.X509Certificate;\nimport java.util.Base64;\n\n\npublic class xmlSignature {\npublic static void main(String[] args) throws Exception {\n    System.setProperty(&quot;com.sun.org.apache.xml.internal.security.ignoreLineBreaks&quot;, &quot;true&quot;);\n    \n    // Load the XML document\n    DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();\n    DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();\n    Document doc = dBuilder.parse(new File(&quot;./certDir/request.xml&quot;));\n    \n    // Load the certificate\n    KeyStore ks = KeyStore.getInstance(&quot;PKCS12&quot;);\n    ks.load(new FileInputStream(&quot;./certDir/4300648_identity.p12&quot;), &quot;DAL00MATIAN&quot;.toCharArray());\n    KeyStore.PrivateKeyEntry keyEntry = (KeyStore.PrivateKeyEntry) ks.getEntry((String) ks.aliases().nextElement(), new KeyStore.PasswordProtection(&quot;DAL00MATIAN&quot;.toCharArray()));\n    X509Certificate cert = (X509Certificate) keyEntry.getCertificate();\n\n    // Create the XML signature\n    DOMSignContext dsc = new DOMSignContext(keyEntry.getPrivateKey(), doc.getDocumentElement());\n    XMLSignatureFactory fac = XMLSignatureFactory.getInstance(&quot;DOM&quot;);\n    Reference ref = fac.newReference(&quot;&quot;, fac.newDigestMethod(DigestMethod.SHA256, null), Collections.singletonList(fac.newTransform(Transform.ENVELOPED, (TransformParameterSpec) null)), null, null);\n    SignedInfo si = fac.newSignedInfo(fac.newCanonicalizationMethod(CanonicalizationMethod.INCLUSIVE, (C14NMethodParameterSpec) null), fac.newSignatureMethod(SignatureMethod.RSA_SHA256, null), Collections.singletonList(ref));\n    KeyInfoFactory kif = fac.getKeyInfoFactory();\n    X509Data x509d = kif.newX509Data(Collections.singletonList(cert));\n    KeyInfo ki = kif.newKeyInfo(Collections.singletonList(x509d));\n    XMLSignature signature = fac.newXMLSignature(si, ki);\n\n    // Sign the XML document\n    signature.sign(dsc);\n    SignedInfo signedInfo = signature.getSignedInfo();\n\n    // Get the references from the signed info\n    List&lt;Reference&gt; references = signedInfo.getReferences();\n\n    // Process each reference and encode the digestValue to Base64\n    for (Reference reference : references) {\n        // Get the digestValue as a byte array\n        byte[] digestValue = reference.getDigestValue();\n\n        // Encode the digestValue to Base64\n        String base64DigestValue = Base64.getEncoder().encodeToString(digestValue);\n\n        // Output the Base64-encoded digestValue\n        System.out.println(&quot;Base64-encoded DigestValue: &quot; + base64DigestValue);\n    }\n\n    // Save the signed XML document\n\n    // Save the signed XML document\n    TransformerFactory tf = TransformerFactory.newInstance();\n    Transformer trans = tf.newTransformer();\n    trans.transform(new DOMSource(doc), new StreamResult(new File(&quot;./certDir/request_response.xml&quot;)));\n\n}\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","mocking"],"answers":[{"tags":[],"owner":{"account_id":4153318,"reputation":19445,"user_id":3405171,"display_name":"v.ladynev"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677846992,"creation_date":1677846628,"answer_id":75627101,"question_id":75626455,"body_markdown":"I prefer to use an `interface` for `@Service` because we can make interface public and implementation package access. So it makes the scope tighter.\r\n```java\r\npublic interface FooService {\r\n\r\n}\r\n\r\n@Service\r\nclass FooServiceImpl implements FooService {\r\n\r\n}\r\n```\r\nBut it is for service that is used like a facade only. \r\n`Controller -&gt; Facade Service -&gt; other classes from Spring context`\r\n\r\nFor &quot;other classes&quot; from Spring context that can be used by `Facade Service` I never use interfaces.\r\n\r\n```java\r\n@Service\r\nclass FooServiceImpl {\r\n\r\n    private final FooServiceHelper helper;\r\n\r\n    @Autowired\r\n    public FooServiceImpl(FooServiceHelper helper) {\r\n        this.helper = helper;\r\n    }\r\n\r\n}\r\n```\r\n\r\nWe can go even further and say: even we have multiple implementations, maybe better to have an abstract class or default implementation rather than an interface.  \r\n","title":"Is it worth defining an interface for a service with a single implementation","body":"<p>I prefer to use an <code>interface</code> for <code>@Service</code> because we can make interface public and implementation package access. So it makes the scope tighter.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface FooService {\n\n}\n\n@Service\nclass FooServiceImpl implements FooService {\n\n}\n</code></pre>\n<p>But it is for service that is used like a facade only.\n<code>Controller -&gt; Facade Service -&gt; other classes from Spring context</code></p>\n<p>For &quot;other classes&quot; from Spring context that can be used by <code>Facade Service</code> I never use interfaces.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\nclass FooServiceImpl {\n\n    private final FooServiceHelper helper;\n\n    @Autowired\n    public FooServiceImpl(FooServiceHelper helper) {\n        this.helper = helper;\n    }\n\n}\n</code></pre>\n<p>We can go even further and say: even we have multiple implementations, maybe better to have an abstract class or default implementation rather than an interface.</p>\n"},{"tags":[],"owner":{"account_id":27520390,"reputation":13,"user_id":21000666,"display_name":"Stephen Williams"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1684330908,"creation_date":1684330908,"answer_id":76272791,"question_id":75626455,"body_markdown":"In Java applications, one good reason to create an interface that only has a single implementation is to implement **D**ependency inversion (**D** as in SOLI**D**).\r\n\r\nFor example, in an application that has an onion / hexagonal style architecture with an infrastructure layer surrounding an application layer surrounding a model layer, you might define a `PersonRepository` interface in the application layer and a `JdbcPersonRepository` class that implements `PersonRepository` in the infrastructure layer. Methods of classes defined in the application layer call methods on `PersonRepository` to save and search for `Person` domain objects. `JdbcPersonRepository` in the infrastructure layer allows the application to save and search for `Person` object state in a MySQL database using JDBC.\r\n\r\nIn this design, although code execution flows down from application layer code to infrastructure layer code, code dependencies are directed up from the infrastructure layer to the application layer.\r\n\r\nSearch for explanations of onion architecture, hexagonal architecture, ports and adapters architecture and, in particular, dependency inversion.","title":"Is it worth defining an interface for a service with a single implementation","body":"<p>In Java applications, one good reason to create an interface that only has a single implementation is to implement <strong>D</strong>ependency inversion (<strong>D</strong> as in SOLI<strong>D</strong>).</p>\n<p>For example, in an application that has an onion / hexagonal style architecture with an infrastructure layer surrounding an application layer surrounding a model layer, you might define a <code>PersonRepository</code> interface in the application layer and a <code>JdbcPersonRepository</code> class that implements <code>PersonRepository</code> in the infrastructure layer. Methods of classes defined in the application layer call methods on <code>PersonRepository</code> to save and search for <code>Person</code> domain objects. <code>JdbcPersonRepository</code> in the infrastructure layer allows the application to save and search for <code>Person</code> object state in a MySQL database using JDBC.</p>\n<p>In this design, although code execution flows down from application layer code to infrastructure layer code, code dependencies are directed up from the infrastructure layer to the application layer.</p>\n<p>Search for explanations of onion architecture, hexagonal architecture, ports and adapters architecture and, in particular, dependency inversion.</p>\n"}],"owner":{"account_id":1921,"reputation":185682,"user_id":2648,"accept_rate":52,"display_name":"D&#243;nal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":137,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1684330908,"creation_date":1677842587,"question_id":75626455,"body_markdown":"In my Spring application, there&#39;s typically an interface for each service, even if there&#39;s only a single implementation, e.g.\r\n\r\n```java\r\npublic interface FooService {\r\n  Foo getFoo(long id)\r\n\r\n  Iterable&lt;Foo&gt; findAllFoos()\r\n\r\n  void deleteFoo(long id)\r\n}\r\n\r\n@Service\r\n@Transactional\r\npublic class FooServiceImpl implements FooService {\r\n    // method implementations omitted\r\n}\r\n```\r\n\r\nI think this practice originated in the olden days when mocking libraries could only generate a mock for an interface. But modern mocking libraries like Mockito can mock a class just as easily as an interface, so I&#39;m not sure if there&#39;s any practical benefit to defining an interface for (Spring/Spring Boot) services with a single implementation?","title":"Is it worth defining an interface for a service with a single implementation","body":"<p>In my Spring application, there's typically an interface for each service, even if there's only a single implementation, e.g.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface FooService {\n  Foo getFoo(long id)\n\n  Iterable&lt;Foo&gt; findAllFoos()\n\n  void deleteFoo(long id)\n}\n\n@Service\n@Transactional\npublic class FooServiceImpl implements FooService {\n    // method implementations omitted\n}\n</code></pre>\n<p>I think this practice originated in the olden days when mocking libraries could only generate a mock for an interface. But modern mocking libraries like Mockito can mock a class just as easily as an interface, so I'm not sure if there's any practical benefit to defining an interface for (Spring/Spring Boot) services with a single implementation?</p>\n"},{"tags":["java","randoop"],"answers":[{"comments":[{"owner":{"account_id":16116853,"reputation":55,"user_id":11633731,"display_name":"Saverio Mirko Viola"},"score":0,"creation_date":1684310330,"post_id":76266150,"comment_id":134497957,"body_markdown":"I tried but it didn&#39;t worked. Aftert many attemps I was able to generare tests by mean of this command: java -classpath Randoop/randoop-all-4.3.2.jar:target/myJar.jar randoop.main.Main gentests --testjar=myJar.jar. So, what I did is to add /myJar.jar after target in myclassPath","body":"I tried but it didn&#39;t worked. Aftert many attemps I was able to generare tests by mean of this command: java -classpath Randoop/randoop-all-4.3.2.jar:target/myJar.jar randoop.main.Main gentests --testjar=myJar.jar. So, what I did is to add /myJar.jar after target in myclassPath"}],"tags":[],"owner":{"account_id":58050,"reputation":7570,"user_id":173852,"display_name":"mernst"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684262203,"creation_date":1684262203,"answer_id":76266150,"question_id":76257443,"body_markdown":"&gt; `--testjar=myJar.jar`\r\n&gt;\r\n&gt; The jar whose class I want to test is located and present in the target directory.\r\n\r\nThe `--testjar` command-line argument tells where to find the class.  It doesn&#39;t modify its argument, such as assuming it is in a particular directory.  Can you try `--testjar=target/myJar.jar`?","title":"Randoop --testjar No Such file or directory","body":"<blockquote>\n<p><code>--testjar=myJar.jar</code></p>\n<p>The jar whose class I want to test is located and present in the target directory.</p>\n</blockquote>\n<p>The <code>--testjar</code> command-line argument tells where to find the class.  It doesn't modify its argument, such as assuming it is in a particular directory.  Can you try <code>--testjar=target/myJar.jar</code>?</p>\n"},{"tags":[],"owner":{"account_id":16116853,"reputation":55,"user_id":11633731,"display_name":"Saverio Mirko Viola"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1684330746,"creation_date":1684330746,"answer_id":76272763,"question_id":76257443,"body_markdown":"I was able, after many attempts to solve the problem. I used this command:\r\n\r\n```\r\njava -classpath Randoop/randoop-all-4.3.2.jar:./target/myJar.jar randoop.main.Main gentests --testjar=myJar.jar\r\n``` \r\n\r\nWhat I did is just add /myJar.jar after target in jar location on the classpath.","title":"Randoop --testjar No Such file or directory","body":"<p>I was able, after many attempts to solve the problem. I used this command:</p>\n<pre><code>java -classpath Randoop/randoop-all-4.3.2.jar:./target/myJar.jar randoop.main.Main gentests --testjar=myJar.jar\n</code></pre>\n<p>What I did is just add /myJar.jar after target in jar location on the classpath.</p>\n"}],"owner":{"account_id":16116853,"reputation":55,"user_id":11633731,"display_name":"Saverio Mirko Viola"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76272763,"answer_count":2,"score":0,"last_activity_date":1684330746,"creation_date":1684179423,"question_id":76257443,"body_markdown":"I&#39;m running the following command in Ubuntu, having an openJDK 17: \r\n```\r\njava -classpath Randoop/randoop-all-4.3.2.jar:./target randoop.main.Main gentests --testjar=myJar.jar\r\n```\r\nAs you can see, I&#39;m running the command with --testjar option but I get the following error:\r\nRandoop for Java version 4.3.2.\r\n\r\nError while reading jar file myJar: myJar (No such file or directory).\r\n\r\nThe jar whose class I want to test is located and present in  the target directory. So I do not understand what&#39;s wrong...\r\n\r\nI have also tried to run this command, without ./ before target class:\r\n\r\n```\r\njava -classpath Randoop/randoop-all-4.3.2.jar:target randoop.main.Main gentests --testjar=myJar.jar\r\n```\r\n\r\nI get the same error...\r\n\r\n\r\nAnyone can help?\r\nThanks","title":"Randoop --testjar No Such file or directory","body":"<p>I'm running the following command in Ubuntu, having an openJDK 17:</p>\n<pre><code>java -classpath Randoop/randoop-all-4.3.2.jar:./target randoop.main.Main gentests --testjar=myJar.jar\n</code></pre>\n<p>As you can see, I'm running the command with --testjar option but I get the following error:\nRandoop for Java version 4.3.2.</p>\n<p>Error while reading jar file myJar: myJar (No such file or directory).</p>\n<p>The jar whose class I want to test is located and present in  the target directory. So I do not understand what's wrong...</p>\n<p>I have also tried to run this command, without ./ before target class:</p>\n<pre><code>java -classpath Randoop/randoop-all-4.3.2.jar:target randoop.main.Main gentests --testjar=myJar.jar\n</code></pre>\n<p>I get the same error...</p>\n<p>Anyone can help?\nThanks</p>\n"},{"tags":["java","mongodb","mongodb-java"],"answers":[{"tags":[],"owner":{"account_id":445028,"reputation":2497,"user_id":837208,"accept_rate":94,"display_name":"user837208"},"comment_count":0,"down_vote_count":2,"up_vote_count":3,"is_accepted":true,"score":1,"last_activity_date":1499854834,"creation_date":1332298880,"answer_id":9798055,"question_id":9797935,"body_markdown":"Solved it by using query as- \r\n\r\n    query.putAll((BSONObject)query);","title":"How to query documents using &quot;_id&quot; field in Java mongodb driver?","body":"<p>Solved it by using query as- </p>\n\n<pre><code>query.putAll((BSONObject)query);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4760739,"reputation":370,"user_id":3848187,"accept_rate":50,"display_name":"Stu_Dent"},"score":0,"creation_date":1602417306,"post_id":12788736,"comment_id":113707880,"body_markdown":"Is it outdated?","body":"Is it outdated?"}],"tags":[],"owner":{"account_id":170273,"reputation":737,"user_id":396859,"display_name":"Chris"},"comment_count":1,"down_vote_count":0,"up_vote_count":71,"is_accepted":false,"score":71,"last_activity_date":1499854850,"creation_date":1349726997,"answer_id":12788736,"question_id":9797935,"body_markdown":"Not sure if others might be searching for answers on this topic, but here is the easiest way to search for a MongoDB record based on &quot;_id&quot;. The MongoDB documentation is not updated and still shows ObjectId as being part of the `com.mongodb` package (it also generally does not give a lot of information on searching by ObjectId).\r\n\r\n    import org.bson.types.ObjectId;\r\n\r\n    public DBObject findDocumentById(String id) {\r\n\r\n        BasicDBObject query = new BasicDBObject();\r\n        query.put(&quot;_id&quot;, new ObjectId(id));\r\n\r\n        DBObject dbObj = collection.findOne(query);\r\n        return dbObj;\r\n    }\r\n\r\n","title":"How to query documents using &quot;_id&quot; field in Java mongodb driver?","body":"<p>Not sure if others might be searching for answers on this topic, but here is the easiest way to search for a MongoDB record based on \"_id\". The MongoDB documentation is not updated and still shows ObjectId as being part of the <code>com.mongodb</code> package (it also generally does not give a lot of information on searching by ObjectId).</p>\n\n<pre><code>import org.bson.types.ObjectId;\n\npublic DBObject findDocumentById(String id) {\n\n    BasicDBObject query = new BasicDBObject();\n    query.put(\"_id\", new ObjectId(id));\n\n    DBObject dbObj = collection.findOne(query);\n    return dbObj;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6168961,"reputation":101,"user_id":4807846,"display_name":"Nifras Nipy"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1468318174,"creation_date":1468317201,"answer_id":38325486,"question_id":9797935,"body_markdown":"You can do this\r\n\r\n   \r\n\r\n     ObjectId id= new ObjectId(&quot;4f693d40e4b04cde19f17205&quot;);        \r\n        BasicDBObject obj = new BasicDBObject();        \r\n        obj.append(&quot;_id&quot;, id);        \r\n        BasicDBObject query = new BasicDBObject();        \r\n        query.putAll((BSONObject)query);","title":"How to query documents using &quot;_id&quot; field in Java mongodb driver?","body":"<p>You can do this</p>\n\n<pre><code> ObjectId id= new ObjectId(\"4f693d40e4b04cde19f17205\");        \n    BasicDBObject obj = new BasicDBObject();        \n    obj.append(\"_id\", id);        \n    BasicDBObject query = new BasicDBObject();        \n    query.putAll((BSONObject)query);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":7342678,"reputation":474,"user_id":5591561,"accept_rate":44,"display_name":"neoexpert"},"score":0,"creation_date":1554837856,"post_id":47200057,"comment_id":97896006,"body_markdown":"can we use findOne here?","body":"can we use findOne here?"},{"owner":{"account_id":2407157,"reputation":418,"user_id":3924002,"display_name":"bogolyandras"},"score":0,"creation_date":1554888693,"post_id":47200057,"comment_id":97912866,"body_markdown":"I don&#39;t think that we can use that method anymore. That was part of the old API http://api.mongodb.com/java/2.14/com/mongodb/DBCollection.html\nThe new is a slightly different one http://api.mongodb.com/java/3.0/com/mongodb/async/client/MongoCollection.html","body":"I don&#39;t think that we can use that method anymore. That was part of the old API <a href=\"http://api.mongodb.com/java/2.14/com/mongodb/DBCollection.html\" rel=\"nofollow noreferrer\">api.mongodb.com/java/2.14/com/mongodb/DBCollection.html</a> The new is a slightly different one <a href=\"http://api.mongodb.com/java/3.0/com/mongodb/async/client/MongoCollection.html\" rel=\"nofollow noreferrer\">api.mongodb.com/java/3.0/com/mongodb/async/client/&hellip;</a>"},{"owner":{"account_id":4760739,"reputation":370,"user_id":3848187,"accept_rate":50,"display_name":"Stu_Dent"},"score":1,"creation_date":1602417334,"post_id":47200057,"comment_id":113707887,"body_markdown":"the eq is not applicable to 3.12?","body":"the eq is not applicable to 3.12?"}],"tags":[],"owner":{"account_id":2407157,"reputation":418,"user_id":3924002,"display_name":"bogolyandras"},"comment_count":3,"down_vote_count":0,"up_vote_count":32,"is_accepted":false,"score":32,"last_activity_date":1510225077,"creation_date":1510225077,"answer_id":47200057,"question_id":9797935,"body_markdown":"For those who are seeking a more up to date method, especially with 3.4:\r\n\r\n\r\n\r\n    import com.mongodb.client.MongoCollection;\r\n    import com.mongodb.client.MongoDatabase;\r\n    import org.bson.Document;\r\n    import org.bson.types.ObjectId;\r\n    \r\n    import static com.mongodb.client.model.Filters.eq;\r\n    \r\n    //......\r\n    MongoCollection&lt;Document&gt; myCollection = database.getCollection(&quot;myCollection&quot;);\r\n    Document document = myCollection.find(eq(&quot;_id&quot;, new ObjectId(&quot;4f693d40e4b04cde19f17205&quot;))).first();\r\n    if (document == null) {\r\n        //Document does not exist\r\n    } else {\r\n        //We found the document\r\n    }\r\n\r\n","title":"How to query documents using &quot;_id&quot; field in Java mongodb driver?","body":"<p>For those who are seeking a more up to date method, especially with 3.4:</p>\n\n<pre><code>import com.mongodb.client.MongoCollection;\nimport com.mongodb.client.MongoDatabase;\nimport org.bson.Document;\nimport org.bson.types.ObjectId;\n\nimport static com.mongodb.client.model.Filters.eq;\n\n//......\nMongoCollection&lt;Document&gt; myCollection = database.getCollection(\"myCollection\");\nDocument document = myCollection.find(eq(\"_id\", new ObjectId(\"4f693d40e4b04cde19f17205\"))).first();\nif (document == null) {\n    //Document does not exist\n} else {\n    //We found the document\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":20092469,"reputation":12133,"user_id":14732669,"display_name":"ray"},"score":0,"creation_date":1663003166,"post_id":62793523,"comment_id":130132059,"body_markdown":"How is this different from [Nifras Nipy&#39;s answer](https://stackoverflow.com/a/38325486/14732669)?","body":"How is this different from <a href=\"https://stackoverflow.com/a/38325486/14732669\">Nifras Nipy&#39;s answer</a>?"}],"tags":[],"owner":{"account_id":16535697,"reputation":1,"user_id":11947797,"display_name":"Srushti Maladkar"},"comment_count":1,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1594215468,"creation_date":1594206786,"answer_id":62793523,"question_id":9797935,"body_markdown":"You can try this snippet:\r\n\r\n    ObjectId id= new ObjectId(&quot;4f693d40e4b04cde19f17205&quot;);        \r\n    BasicDBObject obj = new BasicDBObject();        \r\n    obj.append(&quot;_id&quot;, id);        \r\n    BasicDBObject query = new BasicDBObject();        \r\n    query.putAll((BSONObject)obj);","title":"How to query documents using &quot;_id&quot; field in Java mongodb driver?","body":"<p>You can try this snippet:</p>\n<pre><code>ObjectId id= new ObjectId(&quot;4f693d40e4b04cde19f17205&quot;);        \nBasicDBObject obj = new BasicDBObject();        \nobj.append(&quot;_id&quot;, id);        \nBasicDBObject query = new BasicDBObject();        \nquery.putAll((BSONObject)obj);\n</code></pre>\n"},{"tags":[],"owner":{"display_name":"user11006286"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662993583,"creation_date":1662993583,"answer_id":73691029,"question_id":9797935,"body_markdown":"The more simple way to do this is:\r\n\r\n```\r\nBson filter = Filters.eq(&quot;_id&quot;, new ObjectId(&quot;4f693d40e4b04cde19f17205&quot;));\r\nmongoConfig.getMongoTemplate().getCollection(&quot;myCollection&quot;).find(filter);\r\n\r\n```\r\n\r\nReference here:\r\nhttps://www.baeldung.com/mongodb-query-documents-id","title":"How to query documents using &quot;_id&quot; field in Java mongodb driver?","body":"<p>The more simple way to do this is:</p>\n<pre><code>Bson filter = Filters.eq(&quot;_id&quot;, new ObjectId(&quot;4f693d40e4b04cde19f17205&quot;));\nmongoConfig.getMongoTemplate().getCollection(&quot;myCollection&quot;).find(filter);\n\n</code></pre>\n<p>Reference here:\n<a href=\"https://www.baeldung.com/mongodb-query-documents-id\" rel=\"nofollow noreferrer\">https://www.baeldung.com/mongodb-query-documents-id</a></p>\n"},{"tags":[],"owner":{"account_id":20135211,"reputation":1,"user_id":17055467,"display_name":"Giovani Meza"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664497212,"creation_date":1664162053,"answer_id":73849301,"question_id":9797935,"body_markdown":"I found a way around, with a little bit more of code, requires a string representing the id to be found passed as argument.\r\n\r\n\r\n    import com.mongodb.client.MongoDatabase;\r\n    import com.mongodb.client.MongoClient;\r\n    import com.mongodb.client.MongoClients;\r\n    import com.mongodb.client.MongoCollection;\r\n    import com.mongodb.client.model.Filters;\r\n    import org.bson.conversions.Bson;\r\n    import org.bson.Document;\r\n    import org.bson.types.ObjectId;   \r\n\r\n    [...]\r\n\r\n    public static void findCustomerById(String id) {\r\n        try (MongoClient mongoClient = MongoClients.create(&quot;mongodb://localhost:27017&quot;)) {\r\n            MongoDatabase database = mongoClient.getDatabase(&quot;database_name&quot;);\r\n            Bson filter = Filters.eq(&quot;_id&quot;, new ObjectId(id));\r\n            MongoCollection&lt;Document&gt; collection = database.getCollection(&quot;customer&quot;);\r\n\r\n            //Tries to find the document\r\n            Document doc = collection. Find(filter).first();\r\n            //prints the document\r\n            System.out.println(doc.toJson());\r\n        } catch (Exception e) {\r\n            System.out.println(&quot;Error finding document&quot;);\r\n            System.out.println(&quot;Error in: &quot; + e.getMessage());\r\n            e.printStackTrace();\r\n        }","title":"How to query documents using &quot;_id&quot; field in Java mongodb driver?","body":"<p>I found a way around, with a little bit more of code, requires a string representing the id to be found passed as argument.</p>\n<pre><code>import com.mongodb.client.MongoDatabase;\nimport com.mongodb.client.MongoClient;\nimport com.mongodb.client.MongoClients;\nimport com.mongodb.client.MongoCollection;\nimport com.mongodb.client.model.Filters;\nimport org.bson.conversions.Bson;\nimport org.bson.Document;\nimport org.bson.types.ObjectId;   \n\n[...]\n\npublic static void findCustomerById(String id) {\n    try (MongoClient mongoClient = MongoClients.create(&quot;mongodb://localhost:27017&quot;)) {\n        MongoDatabase database = mongoClient.getDatabase(&quot;database_name&quot;);\n        Bson filter = Filters.eq(&quot;_id&quot;, new ObjectId(id));\n        MongoCollection&lt;Document&gt; collection = database.getCollection(&quot;customer&quot;);\n\n        //Tries to find the document\n        Document doc = collection. Find(filter).first();\n        //prints the document\n        System.out.println(doc.toJson());\n    } catch (Exception e) {\n        System.out.println(&quot;Error finding document&quot;);\n        System.out.println(&quot;Error in: &quot; + e.getMessage());\n        e.printStackTrace();\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10294808,"reputation":1177,"user_id":7595371,"display_name":"Michael"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684330646,"creation_date":1684330646,"answer_id":76272740,"question_id":9797935,"body_markdown":"Don&#39;t forget to add the collectionName parameter if your class and collectionName don&#39;t match.  I landed on this question because my _id query wasn&#39;t working even though it looked good at first blush.","title":"How to query documents using &quot;_id&quot; field in Java mongodb driver?","body":"<p>Don't forget to add the collectionName parameter if your class and collectionName don't match.  I landed on this question because my _id query wasn't working even though it looked good at first blush.</p>\n"}],"owner":{"account_id":445028,"reputation":2497,"user_id":837208,"accept_rate":94,"display_name":"user837208"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":89910,"favorite_count":0,"down_vote_count":0,"up_vote_count":49,"accepted_answer_id":9798055,"answer_count":8,"score":49,"last_activity_date":1684330646,"creation_date":1332297782,"question_id":9797935,"body_markdown":"I am trying to find documents in MongoDB by searching on &quot;_id&quot; key. My document looks like this-\r\n\r\n    {\r\n      &quot;_id&quot; : ObjectId(&quot;4f693d40e4b04cde19f17205&quot;),\r\n      &quot;hostname&quot; : &quot;hostnameGoesHere&quot;,\r\n      &quot;OSType&quot; : &quot;OSTypeGoesHere&quot;\r\n    }\r\n\r\nI am trying to search this document as- \r\n\r\n    ObjectId id= new ObjectId(&quot;4f693d40e4b04cde19f17205&quot;);        \r\n    BasicDBObject obj = new BasicDBObject();        \r\n    obj.append(&quot;_id&quot;, id);        \r\n    BasicDBObject query = new BasicDBObject();        \r\n    query.putAll(query);\r\n\r\nBut I get below error- \r\n\r\n    error: reference to putAll is ambiguous, both method putAll(Map) in BasicBSONObject and method putAll(BSONObject) in BasicBSONObject match\r\n            query.putAll(query);\r\n\r\nThe append method of BasicDBObject supports (String Key, Value) and if I pass &quot;_id&quot; as String to this method, no documents are matched. \r\n\r\nSo my question is how do I pass &quot;_id&quot;? ","title":"How to query documents using &quot;_id&quot; field in Java mongodb driver?","body":"<p>I am trying to find documents in MongoDB by searching on \"_id\" key. My document looks like this-</p>\n\n<pre><code>{\n  \"_id\" : ObjectId(\"4f693d40e4b04cde19f17205\"),\n  \"hostname\" : \"hostnameGoesHere\",\n  \"OSType\" : \"OSTypeGoesHere\"\n}\n</code></pre>\n\n<p>I am trying to search this document as- </p>\n\n<pre><code>ObjectId id= new ObjectId(\"4f693d40e4b04cde19f17205\");        \nBasicDBObject obj = new BasicDBObject();        \nobj.append(\"_id\", id);        \nBasicDBObject query = new BasicDBObject();        \nquery.putAll(query);\n</code></pre>\n\n<p>But I get below error- </p>\n\n<pre><code>error: reference to putAll is ambiguous, both method putAll(Map) in BasicBSONObject and method putAll(BSONObject) in BasicBSONObject match\n        query.putAll(query);\n</code></pre>\n\n<p>The append method of BasicDBObject supports (String Key, Value) and if I pass \"_id\" as String to this method, no documents are matched. </p>\n\n<p>So my question is how do I pass \"_id\"? </p>\n"},{"tags":["java","android","firebase","firebase-realtime-database"],"comments":[{"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":1,"creation_date":1684319016,"post_id":76271002,"comment_id":134499935,"body_markdown":"Have you tried to attach a listener to the `setValue()` operation, to see if something went wrong?","body":"Have you tried to attach a listener to the <code>setValue()</code> operation, to see if something went wrong?"},{"owner":{"account_id":28618508,"reputation":1,"user_id":21911980,"display_name":"Ashar Khan"},"score":0,"creation_date":1684319507,"post_id":76271002,"comment_id":134500046,"body_markdown":"I have just added a Toast message in on complete listener. but the toast message is not displaying that means the value is not set.","body":"I have just added a Toast message in on complete listener. but the toast message is not displaying that means the value is not set."},{"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1684320519,"post_id":76271002,"comment_id":134500241,"body_markdown":"Show the code that you&#39;re using.","body":"Show the code that you&#39;re using."},{"owner":{"account_id":28618508,"reputation":1,"user_id":21911980,"display_name":"Ashar Khan"},"score":0,"creation_date":1684320854,"post_id":76271002,"comment_id":134500312,"body_markdown":"`   public void add(){\n        Toast.makeText(this, &quot;before adding&quot;, Toast.LENGTH_SHORT).show();\n        reference.setValue(&quot;ashar khan&quot;).addOnCompleteListener(new OnCompleteListener&lt;Void&gt;() {\n            @Override\n            public void onComplete(@NonNull Task&lt;Void&gt; task) {\n                Toast.makeText(MainActivity.this, &quot;Data inserted successfull&quot;, Toast.LENGTH_SHORT).show();\n            }\n        });\n    }\n}`","body":"`   public void add(){         Toast.makeText(this, &quot;before adding&quot;, Toast.LENGTH_SHORT).show();         reference.setValue(&quot;ashar khan&quot;).addOnCompleteListener(new OnCompleteListener&lt;Void&gt;() {             @Override             public void onComplete(@NonNull Task&lt;Void&gt; task) {                 Toast.makeText(MainActivity.this, &quot;Data inserted successfull&quot;, Toast.LENGTH_SHORT).show();             }         });     } }`"},{"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1684321066,"post_id":76271002,"comment_id":134500362,"body_markdown":"Please add the code to your question. Have you also tried to check what is happening when the task is not successful?","body":"Please add the code to your question. Have you also tried to check what is happening when the task is not successful?"},{"owner":{"account_id":28618508,"reputation":1,"user_id":21911980,"display_name":"Ashar Khan"},"score":0,"creation_date":1684321712,"post_id":76271002,"comment_id":134500508,"body_markdown":"I have edited the code please check. The on complete and on failure both are not displaying the toast message","body":"I have edited the code please check. The on complete and on failure both are not displaying the toast message"},{"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1684322111,"post_id":76271002,"comment_id":134500590,"body_markdown":"How is your `reference` defined? What is the location of your database?","body":"How is your <code>reference</code> defined? What is the location of your database?"},{"owner":{"account_id":28618508,"reputation":1,"user_id":21911980,"display_name":"Ashar Khan"},"score":0,"creation_date":1684322196,"post_id":76271002,"comment_id":134500601,"body_markdown":"please elaborate","body":"please elaborate"},{"owner":{"account_id":28618508,"reputation":1,"user_id":21911980,"display_name":"Ashar Khan"},"score":0,"creation_date":1684323055,"post_id":76271002,"comment_id":134500781,"body_markdown":"So I have edited the code again I hope you will know how the reference is defined. database is located in firebase with same account and link is attached while getting database instance","body":"So I have edited the code again I hope you will know how the reference is defined. database is located in firebase with same account and link is attached while getting database instance"},{"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":1,"creation_date":1684323414,"post_id":76271002,"comment_id":134500835,"body_markdown":"So you say that onComplete, not onFailure are even called? Are you sure you have an internet connection? Have you tried simply using `database = FirebaseDatabase.getInstance();`? without any URL?","body":"So you say that onComplete, not onFailure are even called? Are you sure you have an internet connection? Have you tried simply using <code>database = FirebaseDatabase.getInstance();</code>? without any URL?"},{"owner":{"account_id":28618508,"reputation":1,"user_id":21911980,"display_name":"Ashar Khan"},"score":0,"creation_date":1684323460,"post_id":76271002,"comment_id":134500847,"body_markdown":"Database location: United States (us-central1)","body":"Database location: United States (us-central1)"},{"owner":{"account_id":28618508,"reputation":1,"user_id":21911980,"display_name":"Ashar Khan"},"score":0,"creation_date":1684323750,"post_id":76271002,"comment_id":134500908,"body_markdown":"Yes I have internet connection. Yes I have tried without link. Yes both function are not working","body":"Yes I have internet connection. Yes I have tried without link. Yes both function are not working"},{"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1684324144,"post_id":76271002,"comment_id":134501012,"body_markdown":"Are you sure you&#39;re looking at the right Firebase project in your console?","body":"Are you sure you&#39;re looking at the right Firebase project in your console?"},{"owner":{"account_id":28618508,"reputation":1,"user_id":21911980,"display_name":"Ashar Khan"},"score":0,"creation_date":1684325712,"post_id":76271002,"comment_id":134501362,"body_markdown":"I have created database several time with different accounts I am sure I am targeting the right database","body":"I have created database several time with different accounts I am sure I am targeting the right database"},{"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1684326474,"post_id":76271002,"comment_id":134501527,"body_markdown":"That&#39;s the reason why you most likely cannot write data to Firebase.","body":"That&#39;s the reason why you most likely cannot write data to Firebase."},{"owner":{"account_id":28618508,"reputation":1,"user_id":21911980,"display_name":"Ashar Khan"},"score":0,"creation_date":1684348782,"post_id":76271002,"comment_id":134506920,"body_markdown":"@AlexMamo Yes I am targeting the right database because when I print reference on console it shows the exact same link.","body":"@AlexMamo Yes I am targeting the right database because when I print reference on console it shows the exact same link."}],"answers":[{"comments":[{"owner":{"account_id":28618508,"reputation":1,"user_id":21911980,"display_name":"Ashar Khan"},"score":0,"creation_date":1684333189,"post_id":76272729,"comment_id":134503245,"body_markdown":"Still not working","body":"Still not working"}],"tags":[],"owner":{"account_id":25607206,"reputation":11,"user_id":19381125,"display_name":"Sibbir Shahriyar"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1684330607,"creation_date":1684330607,"answer_id":76272729,"question_id":76271002,"body_markdown":"Pass no parameters in getInstance() of FirebaseDatabase\r\n\r\nFirebaseDatabase fd= FirebaseDatabase.getInstance();\r\n make sure your project is connected with your Firebase console through the google-services.json file provided.","title":"Firebase Realtime database is not showing data that is being written from android studio","body":"<p>Pass no parameters in getInstance() of FirebaseDatabase</p>\n<p>FirebaseDatabase fd= FirebaseDatabase.getInstance();\nmake sure your project is connected with your Firebase console through the google-services.json file provided.</p>\n"}],"owner":{"account_id":28618508,"reputation":1,"user_id":21911980,"display_name":"Ashar Khan"},"comment_count":16,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":209,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1684330607,"creation_date":1684318576,"question_id":76271002,"body_markdown":"I am having a problem writing into Firebase real-time database. The app is running fine with no build errors. but when I look into the database nothing is changing. I am trying to write into the database. The account which is logged in in Android and Firebase is the same. I have also given the internet permission in the manifest file. I have included the JSON file in the project. I have added all the required dependencies in gradle. the gradle file\r\n\r\n   \r\n\r\n\r\n`\r\n```\r\n  package com.example.firebasehometry;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.os.Bundle;\r\nimport android.widget.Toast;\r\n\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.OnFailureListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    FirebaseDatabase database;\r\n    DatabaseReference reference;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n        database = FirebaseDatabase.getInstance(&quot;https://fir-home-53258-default-rtdb.firebaseio.com/&quot;);\r\n        reference = database.getReference(&quot;student&quot;);\r\n    add();\r\n    }\r\n    public void add(){\r\n        Toast.makeText(this, &quot;before adding&quot;, Toast.LENGTH_SHORT).show();\r\n        reference.setValue(&quot;ashar khan&quot;).addOnCompleteListener(new OnCompleteListener&lt;Void&gt;() {\r\n            @Override\r\n            public void onComplete(@NonNull Task&lt;Void&gt; task) {\r\n                Toast.makeText(MainActivity.this, &quot;Successfully inserted&quot;, Toast.LENGTH_SHORT).show();\r\n            }\r\n        }).addOnFailureListener(new OnFailureListener() {\r\n            @Override\r\n            public void onFailure(@NonNull Exception e) {\r\n                Toast.makeText(MainActivity.this, &quot;Error inserting&quot;, Toast.LENGTH_SHORT).show();\r\n            }\r\n        });\r\n    }\r\n}\r\n```\r\n\r\n\r\n```\r\nplugins {\r\n    id &#39;com.android.application&#39;\r\n    id &#39;com.google.gms.google-services&#39;\r\n}\r\n\r\nandroid {\r\n    namespace &#39;com.example.firebasehometry&#39;\r\n    compileSdk 33\r\n\r\n    defaultConfig {\r\n        applicationId &quot;com.example.firebasehometry&quot;\r\n        minSdk 25\r\n        targetSdk 33\r\n        versionCode 1\r\n        versionName &quot;1.0&quot;\r\n\r\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\r\n    }\r\n\r\n    buildTypes {\r\n        release {\r\n            minifyEnabled false\r\n            proguardFiles getDefaultProguardFile(&#39;proguard-android-optimize.txt&#39;), &#39;proguard-rules.pro&#39;\r\n        }\r\n    }\r\n    compileOptions {\r\n        sourceCompatibility JavaVersion.VERSION_1_8\r\n        targetCompatibility JavaVersion.VERSION_1_8\r\n    }\r\n}\r\n\r\ndependencies {\r\n    implementation platform(&#39;com.google.firebase:firebase-bom:32.0.0&#39;)\r\n    implementation &#39;androidx.appcompat:appcompat:1.6.1&#39;\r\n    implementation &#39;com.google.firebase:firebase-analytics&#39;\r\n    implementation &#39;com.google.android.material:material:1.9.0&#39;\r\n    implementation &#39;androidx.constraintlayout:constraintlayout:2.1.4&#39;\r\n    implementation &#39;com.google.firebase:firebase-database:20.0.4&#39;\r\n    testImplementation &#39;junit:junit:4.13.2&#39;\r\n    androidTestImplementation &#39;androidx.test.ext:junit:1.1.5&#39;\r\n    androidTestImplementation &#39;androidx.test.espresso:espresso-core:3.5.1&#39;\r\n}\r\n```\r\n[enter image description here](https://i.stack.imgur.com/cVwrR.jpg)\r\n```\r\nbuildscript {\r\n        repositories {\r\n            // Make sure that you have the following two repositories\r\n            google()  // Google&#39;s Maven repository\r\n            mavenCentral()  // Maven Central repository\r\n        }\r\n    dependencies {\r\n        classpath &#39;com.google.gms:google-services:4.3.15&#39;\r\n    }\r\n}// Top-level build file where you can add configuration options common to all sub-projects/modules.\r\nplugins {\r\n    id &#39;com.android.application&#39; version &#39;7.4.0&#39; apply false\r\n    id &#39;com.android.library&#39; version &#39;7.4.0&#39; apply false\r\n}\r\n```\r\n\r\n\r\n\r\n`\r\n\r\nI tried all the methods that are available on internet but still realtime database is not updating. Anyone who can help me in this matter..","title":"Firebase Realtime database is not showing data that is being written from android studio","body":"<p>I am having a problem writing into Firebase real-time database. The app is running fine with no build errors. but when I look into the database nothing is changing. I am trying to write into the database. The account which is logged in in Android and Firebase is the same. I have also given the internet permission in the manifest file. I have included the JSON file in the project. I have added all the required dependencies in gradle. the gradle file</p>\n<p>`</p>\n<pre><code>  package com.example.firebasehometry;\n\nimport androidx.annotation.NonNull;\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport android.os.Bundle;\nimport android.widget.Toast;\n\nimport com.google.android.gms.tasks.OnCompleteListener;\nimport com.google.android.gms.tasks.OnFailureListener;\nimport com.google.android.gms.tasks.Task;\nimport com.google.firebase.database.DatabaseReference;\nimport com.google.firebase.database.FirebaseDatabase;\n\npublic class MainActivity extends AppCompatActivity {\n\n    FirebaseDatabase database;\n    DatabaseReference reference;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        database = FirebaseDatabase.getInstance(&quot;https://fir-home-53258-default-rtdb.firebaseio.com/&quot;);\n        reference = database.getReference(&quot;student&quot;);\n    add();\n    }\n    public void add(){\n        Toast.makeText(this, &quot;before adding&quot;, Toast.LENGTH_SHORT).show();\n        reference.setValue(&quot;ashar khan&quot;).addOnCompleteListener(new OnCompleteListener&lt;Void&gt;() {\n            @Override\n            public void onComplete(@NonNull Task&lt;Void&gt; task) {\n                Toast.makeText(MainActivity.this, &quot;Successfully inserted&quot;, Toast.LENGTH_SHORT).show();\n            }\n        }).addOnFailureListener(new OnFailureListener() {\n            @Override\n            public void onFailure(@NonNull Exception e) {\n                Toast.makeText(MainActivity.this, &quot;Error inserting&quot;, Toast.LENGTH_SHORT).show();\n            }\n        });\n    }\n}\n</code></pre>\n<pre><code>plugins {\n    id 'com.android.application'\n    id 'com.google.gms.google-services'\n}\n\nandroid {\n    namespace 'com.example.firebasehometry'\n    compileSdk 33\n\n    defaultConfig {\n        applicationId &quot;com.example.firebasehometry&quot;\n        minSdk 25\n        targetSdk 33\n        versionCode 1\n        versionName &quot;1.0&quot;\n\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\n    }\n\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n        }\n    }\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n}\n\ndependencies {\n    implementation platform('com.google.firebase:firebase-bom:32.0.0')\n    implementation 'androidx.appcompat:appcompat:1.6.1'\n    implementation 'com.google.firebase:firebase-analytics'\n    implementation 'com.google.android.material:material:1.9.0'\n    implementation 'androidx.constraintlayout:constraintlayout:2.1.4'\n    implementation 'com.google.firebase:firebase-database:20.0.4'\n    testImplementation 'junit:junit:4.13.2'\n    androidTestImplementation 'androidx.test.ext:junit:1.1.5'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.5.1'\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/cVwrR.jpg\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<pre><code>buildscript {\n        repositories {\n            // Make sure that you have the following two repositories\n            google()  // Google's Maven repository\n            mavenCentral()  // Maven Central repository\n        }\n    dependencies {\n        classpath 'com.google.gms:google-services:4.3.15'\n    }\n}// Top-level build file where you can add configuration options common to all sub-projects/modules.\nplugins {\n    id 'com.android.application' version '7.4.0' apply false\n    id 'com.android.library' version '7.4.0' apply false\n}\n</code></pre>\n<p>`</p>\n<p>I tried all the methods that are available on internet but still realtime database is not updating. Anyone who can help me in this matter..</p>\n"},{"tags":["java","spring-boot","spring-webflux"],"answers":[{"comments":[{"owner":{"account_id":5147236,"reputation":65,"user_id":4122863,"display_name":"Julie"},"score":1,"creation_date":1684343808,"post_id":76272691,"comment_id":134505896,"body_markdown":"Thank you, I just upgraded Spring, and it is not happening so far.  It&#39;s odd how it worked for 3 weeks and then just started happening.  My dev mentioned to me he read an article saying WebFlux is stable on bare metal because it uses the resources of the machine, but in AWS will need some tuning.  I am waiting on him to send me the article.","body":"Thank you, I just upgraded Spring, and it is not happening so far.  It&#39;s odd how it worked for 3 weeks and then just started happening.  My dev mentioned to me he read an article saying WebFlux is stable on bare metal because it uses the resources of the machine, but in AWS will need some tuning.  I am waiting on him to send me the article."}],"tags":[],"owner":{"account_id":15959737,"reputation":21,"user_id":12056322,"display_name":"Stephen Olujare"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1684330311,"creation_date":1684330311,"answer_id":76272691,"question_id":76272426,"body_markdown":"  Let us break this down extensively... \r\nThe `ReadTimeoutException` can\r\n   occur when there is no response from the server within the specified\r\n   timeout period. But in your case, since the issue is happening\r\n   consistently on production and not on your development server, it is\r\n   possible that there could be a network issue between your AWS\r\n   instance and the external service.\r\n   \r\n   Now, let us troubleshoot the problem together.\r\n   \r\n   * Increase the timeout duration and see if it resolves this issue. You can use a debugger to step through the code and determine where\r\n   the timeout is occurring. This can give you an idea of whether the\r\n   issue is with the WebClient or somewhere else in your code.\r\n   \r\n   * It is possible that there is an issue with the network connectivity between your AWS instance and the external service. You can try\r\n   testing the network connectivity by using PING or TRACEROUTE commands\r\n   from the AWS instance to the external service.\r\n   \r\n   * You can as well upgrade to a newer version of Spring and Java. It appears that you are using older versions of Spring and Java, it is\r\n   possible that there are compatibility issues that are causing the\r\n   timeouts. You can try upgrading to newer versions and see if it\r\n   resolves the issue.","title":"io.netty.handler.timeout.ReadTimeoutException: null error on AWS","body":"<p>Let us break this down extensively...\nThe <code>ReadTimeoutException</code> can\noccur when there is no response from the server within the specified\ntimeout period. But in your case, since the issue is happening\nconsistently on production and not on your development server, it is\npossible that there could be a network issue between your AWS\ninstance and the external service.</p>\n<p>Now, let us troubleshoot the problem together.</p>\n<ul>\n<li><p>Increase the timeout duration and see if it resolves this issue. You can use a debugger to step through the code and determine where\nthe timeout is occurring. This can give you an idea of whether the\nissue is with the WebClient or somewhere else in your code.</p>\n</li>\n<li><p>It is possible that there is an issue with the network connectivity between your AWS instance and the external service. You can try\ntesting the network connectivity by using PING or TRACEROUTE commands\nfrom the AWS instance to the external service.</p>\n</li>\n<li><p>You can as well upgrade to a newer version of Spring and Java. It appears that you are using older versions of Spring and Java, it is\npossible that there are compatibility issues that are causing the\ntimeouts. You can try upgrading to newer versions and see if it\nresolves the issue.</p>\n</li>\n</ul>\n"}],"owner":{"account_id":5147236,"reputation":65,"user_id":4122863,"display_name":"Julie"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":788,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1684330311,"creation_date":1684328613,"question_id":76272426,"body_markdown":"We are experiencing the strangest problem.  We are using WebFlux WebClient to make an API call.  It was working fine, and then last week we started seeing the intermittent error:\r\n\r\nio.netty.handler.timeout.ReadTimeoutException: null\r\n\r\nTo give some background.  Our dev server is running on bare metal, and it is stable and has no issues at all.  This is only happening in production on our AWS instance.\r\n\r\nWe see this happening on every second service call, which made me think load balancer, but my infrastructure team cannot see anything obvious.\r\n\r\nThis is the code that makes the service call.\r\n\r\n    Mono&lt;String&gt; responseMono = headersSpec.header(&quot;X-CORRELATION-ID&quot;, correlationId)\r\n\t\t\t.accept(MediaType.APPLICATION_JSON)\r\n\t\t\t.exchangeToMono(response -&gt; {\r\n\t\t\t\tif (response.statusCode().equals(HttpStatus.OK)) {\r\n\t\t\t\t\treturn response.bodyToMono(String.class);\r\n\t\t\t\t} else if (response.statusCode().equals(HttpStatus.BAD_REQUEST)) {\r\n\t\t\t\t\treturn Mono.error(new DataViolationException(&quot;Data rejected&quot;,&quot;Data rejected&quot;,null,&quot;ProductUse.useProduct&quot;));\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn Mono.error(new GeneralServiceException(&quot;Error status received: &quot; + response.statusCode().toString() + &quot; [&quot; + response.bodyToMono(String.class) + &quot;]&quot;,null));\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\nI am wondering if it is an issue with our version of Spring?  We are running the following:\r\n\r\nJava Version: 18\r\n\r\nSpring Version: 3.0.5\r\n\r\nThis application runs on Kubernetes.\r\n\r\nAny suggestions would be much appreciated, at a bit of a loss here, have read other posts about this error but still unable to work out why it is happening to us, and why it only happens on AWS and not bare metal.\r\n\r\n ","title":"io.netty.handler.timeout.ReadTimeoutException: null error on AWS","body":"<p>We are experiencing the strangest problem.  We are using WebFlux WebClient to make an API call.  It was working fine, and then last week we started seeing the intermittent error:</p>\n<p>io.netty.handler.timeout.ReadTimeoutException: null</p>\n<p>To give some background.  Our dev server is running on bare metal, and it is stable and has no issues at all.  This is only happening in production on our AWS instance.</p>\n<p>We see this happening on every second service call, which made me think load balancer, but my infrastructure team cannot see anything obvious.</p>\n<p>This is the code that makes the service call.</p>\n<pre><code>Mono&lt;String&gt; responseMono = headersSpec.header(&quot;X-CORRELATION-ID&quot;, correlationId)\n        .accept(MediaType.APPLICATION_JSON)\n        .exchangeToMono(response -&gt; {\n            if (response.statusCode().equals(HttpStatus.OK)) {\n                return response.bodyToMono(String.class);\n            } else if (response.statusCode().equals(HttpStatus.BAD_REQUEST)) {\n                return Mono.error(new DataViolationException(&quot;Data rejected&quot;,&quot;Data rejected&quot;,null,&quot;ProductUse.useProduct&quot;));\n            } else {\n                return Mono.error(new GeneralServiceException(&quot;Error status received: &quot; + response.statusCode().toString() + &quot; [&quot; + response.bodyToMono(String.class) + &quot;]&quot;,null));\n            }\n        });\n</code></pre>\n<p>I am wondering if it is an issue with our version of Spring?  We are running the following:</p>\n<p>Java Version: 18</p>\n<p>Spring Version: 3.0.5</p>\n<p>This application runs on Kubernetes.</p>\n<p>Any suggestions would be much appreciated, at a bit of a loss here, have read other posts about this error but still unable to work out why it is happening to us, and why it only happens on AWS and not bare metal.</p>\n"},{"tags":["java","android","wifi","hostname","jmdns"],"owner":{"account_id":28562556,"reputation":1,"user_id":21865890,"display_name":"Paul"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":77,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684330073,"creation_date":1684330073,"question_id":76272650,"body_markdown":"I working with IoT (Arduino and ESP32). \r\nI am able to assign a hostname to the board using mDNS.\r\nI want from an Android App to write the url &quot;arduino.local&quot; and get the IP address (for example 198.162.1.25&quot;.\r\nI have tried with jmDNS and I don&#39;t know how to list the services found.\r\n\r\nLibrary: implementation &#39;org.jmdns:jmdns:3.5.7&#39;\r\n\r\nThis is my code:\r\n\r\n```java\r\npackage com.anaconet.jmdns;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.net.wifi.WifiInfo;\r\nimport android.net.wifi.WifiManager;\r\nimport android.net.wifi.WifiManager.MulticastLock;\r\nimport android.os.Bundle;\r\n\r\nimport android.os.Handler;\r\nimport android.content.Context;\r\n\r\n// jmDNS .........................................\r\nimport java.io.IOException;\r\nimport java.net.InetAddress;\r\nimport java.net.UnknownHostException;\r\n\r\nimport android.util.Log;\r\n\r\nimport javax.jmdns.JmDNS;\r\nimport javax.jmdns.ServiceListener;\r\nimport javax.jmdns.ServiceEvent;\r\nimport javax.jmdns.ServiceInfo;\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n    private static final String TAG = &quot;jmDNS (PAUL)... &quot;;\r\n    private static final String SERVICE_TYPE = &quot;_http._tcp.local.&quot;;\r\n    //private static final String SERVICE_TYPE = &quot;_workstation._tcp.local.&quot;;\r\n\r\n    private String type = &quot;_dynamix._tcp.local.&quot;;\r\n    private static JmDNS jmdns = null;\r\n    private ServiceListener listener = null;\r\n    private ServiceInfo serviceInfo;\r\n\r\n    private static MulticastLock multicastLock;\r\n    boolean isDiscovering;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        isDiscovering = false;\r\n        WifiManager wifi = (WifiManager) getApplicationContext().getSystemService(android.content.Context.WIFI_SERVICE);\r\n        multicastLock = wifi.createMulticastLock(&quot;jmdns-multicast-lock&quot;);\r\n        multicastLock.setReferenceCounted(false);\r\n    }\r\n\r\n    private InetAddress getDeviceIpAddress(WifiManager wifi) {\r\n        InetAddress result = null;\r\n        try {\r\n            // default to Android localhost\r\n            result = InetAddress.getByName(&quot;192.168.1.1&quot;);\r\n\r\n            // figure out our wifi address, otherwise bail\r\n            WifiInfo wifiinfo = wifi.getConnectionInfo();\r\n            int intaddr = wifiinfo.getIpAddress();\r\n            byte[] byteaddr = new byte[] { (byte) (intaddr &amp; 0xff), (byte) (intaddr &gt;&gt; 8 &amp; 0xff),\r\n                    (byte) (intaddr &gt;&gt; 16 &amp; 0xff), (byte) (intaddr &gt;&gt; 24 &amp; 0xff) };\r\n            result = InetAddress.getByAddress(byteaddr);\r\n        } catch (UnknownHostException ex) {\r\n            Log.w(TAG, String.format(&quot;getDeviceIpAddress Error: %s&quot;, ex.getMessage()));\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n\r\n    private class ServiceListenerImpl implements ServiceListener {\r\n        @Override\r\n        public void serviceAdded(ServiceEvent event) {\r\n            event.getDNS().requestServiceInfo(event.getType(), event.getName());\r\n            System.out.println(&quot;Service added: &quot; + event.getInfo());\r\n        }\r\n\r\n        @Override\r\n        public void serviceRemoved(ServiceEvent event) {\r\n            //Handle service dropping out.\r\n            System.out.println(&quot;Service removed: &quot; + event.getInfo());\r\n        }\r\n\r\n        @Override\r\n        public void serviceResolved(ServiceEvent event) {\r\n            System.out.println(&quot;Service resolved: &quot; + event.getInfo());\r\n            System.out.println(&quot;Service resolved: &quot;\r\n                    + event.getInfo().getQualifiedName()\r\n                    + &quot; port:&quot; + event.getInfo().getPort());\r\n        }\r\n    }\r\n\r\n\r\n\r\n    @Override\r\n    protected void onStart()  {\r\n        Log.i(TAG, &quot;Starting ServiceActivity...&quot;);\r\n        super.onStart();\r\n        try {\r\n            Log.i(TAG, &quot;Starting Mutlicast Lock...&quot;);\r\n            WifiManager wifi = (WifiManager) this.getSystemService(Context.WIFI_SERVICE);\r\n            // get the device ip address\r\n            final InetAddress deviceIpAddress = getDeviceIpAddress(wifi);\r\n            multicastLock = wifi.createMulticastLock(getClass().getName());\r\n            multicastLock.setReferenceCounted(true);\r\n            multicastLock.acquire();\r\n            Log.i(TAG, &quot;Starting ZeroConf probe....&quot;);\r\n            // Create a JmDNS instance\r\n            // JmDNS jmdns = JmDNS.create(address, &quot;JmDNS-IP-&quot; + (jmdnsInstances.size() + 1));\r\n            jmdns = JmDNS.create(deviceIpAddress, &quot;HOSTNAME&quot;);\r\n            if (jmdns != null) {\r\n                // Add a service listener\r\n                jmdns.addServiceListener(SERVICE_TYPE, new ServiceListenerImpl());\r\n//                jmdns.list(&quot;_exp._tcp.local.&quot;, 10 * 1000);\r\n                isDiscovering = true;\r\n                Log.d(TAG, &quot;discovering services of type: &quot;  + SERVICE_TYPE);\r\n\r\n/*\r\n                serviceInfo = ServiceInfo.create(&quot;_test._tcp.local.&quot;,\r\n                        &quot;AndroidTest&quot;, 0,\r\n                        &quot;test from android&quot;);\r\n                jmdns.registerService(serviceInfo);\r\n\r\n */\r\n            }\r\n        } catch (UnknownHostException e) {\r\n            System.out.println(e.getMessage());\r\n        } catch (IOException e) {\r\n            Log.e(TAG, e.getMessage(), e);\r\n            System.out.println(e.getMessage());\r\n        }\r\n        Log.i(TAG, &quot;Started ZeroConf probe....&quot;);\r\n    }\r\n\r\n    @Override\r\n    protected void onStop() {\r\n        Log.i(TAG, &quot;Stopping ServiceActivity...&quot;);\r\n        super.onStop();\r\n        stopScan();\r\n    }\r\n\r\n    private static void stopScan() {\r\n        try {\r\n            if (jmdns != null) {\r\n                Log.i(TAG, &quot;Stopping ZeroConf probe....&quot;);\r\n                jmdns.unregisterAllServices();\r\n                jmdns.close();\r\n                jmdns = null;\r\n            }\r\n            if (multicastLock != null) {\r\n                Log.i(TAG, &quot;Releasing Mutlicast Lock...&quot;);\r\n                multicastLock.release();\r\n                multicastLock = null;\r\n            }\r\n        } catch (Exception ex) {\r\n            Log.e(TAG, ex.getMessage(), ex);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nList all IP and Hostname connected to WiFi.","title":"How i can find hostname in wifi lan using jmDNS?","body":"<p>I working with IoT (Arduino and ESP32).\nI am able to assign a hostname to the board using mDNS.\nI want from an Android App to write the url &quot;arduino.local&quot; and get the IP address (for example 198.162.1.25&quot;.\nI have tried with jmDNS and I don't know how to list the services found.</p>\n<p>Library: implementation 'org.jmdns:jmdns:3.5.7'</p>\n<p>This is my code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.anaconet.jmdns;\n\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport android.net.wifi.WifiInfo;\nimport android.net.wifi.WifiManager;\nimport android.net.wifi.WifiManager.MulticastLock;\nimport android.os.Bundle;\n\nimport android.os.Handler;\nimport android.content.Context;\n\n// jmDNS .........................................\nimport java.io.IOException;\nimport java.net.InetAddress;\nimport java.net.UnknownHostException;\n\nimport android.util.Log;\n\nimport javax.jmdns.JmDNS;\nimport javax.jmdns.ServiceListener;\nimport javax.jmdns.ServiceEvent;\nimport javax.jmdns.ServiceInfo;\n\npublic class MainActivity extends AppCompatActivity {\n    private static final String TAG = &quot;jmDNS (PAUL)... &quot;;\n    private static final String SERVICE_TYPE = &quot;_http._tcp.local.&quot;;\n    //private static final String SERVICE_TYPE = &quot;_workstation._tcp.local.&quot;;\n\n    private String type = &quot;_dynamix._tcp.local.&quot;;\n    private static JmDNS jmdns = null;\n    private ServiceListener listener = null;\n    private ServiceInfo serviceInfo;\n\n    private static MulticastLock multicastLock;\n    boolean isDiscovering;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        isDiscovering = false;\n        WifiManager wifi = (WifiManager) getApplicationContext().getSystemService(android.content.Context.WIFI_SERVICE);\n        multicastLock = wifi.createMulticastLock(&quot;jmdns-multicast-lock&quot;);\n        multicastLock.setReferenceCounted(false);\n    }\n\n    private InetAddress getDeviceIpAddress(WifiManager wifi) {\n        InetAddress result = null;\n        try {\n            // default to Android localhost\n            result = InetAddress.getByName(&quot;192.168.1.1&quot;);\n\n            // figure out our wifi address, otherwise bail\n            WifiInfo wifiinfo = wifi.getConnectionInfo();\n            int intaddr = wifiinfo.getIpAddress();\n            byte[] byteaddr = new byte[] { (byte) (intaddr &amp; 0xff), (byte) (intaddr &gt;&gt; 8 &amp; 0xff),\n                    (byte) (intaddr &gt;&gt; 16 &amp; 0xff), (byte) (intaddr &gt;&gt; 24 &amp; 0xff) };\n            result = InetAddress.getByAddress(byteaddr);\n        } catch (UnknownHostException ex) {\n            Log.w(TAG, String.format(&quot;getDeviceIpAddress Error: %s&quot;, ex.getMessage()));\n        }\n\n        return result;\n    }\n\n\n    private class ServiceListenerImpl implements ServiceListener {\n        @Override\n        public void serviceAdded(ServiceEvent event) {\n            event.getDNS().requestServiceInfo(event.getType(), event.getName());\n            System.out.println(&quot;Service added: &quot; + event.getInfo());\n        }\n\n        @Override\n        public void serviceRemoved(ServiceEvent event) {\n            //Handle service dropping out.\n            System.out.println(&quot;Service removed: &quot; + event.getInfo());\n        }\n\n        @Override\n        public void serviceResolved(ServiceEvent event) {\n            System.out.println(&quot;Service resolved: &quot; + event.getInfo());\n            System.out.println(&quot;Service resolved: &quot;\n                    + event.getInfo().getQualifiedName()\n                    + &quot; port:&quot; + event.getInfo().getPort());\n        }\n    }\n\n\n\n    @Override\n    protected void onStart()  {\n        Log.i(TAG, &quot;Starting ServiceActivity...&quot;);\n        super.onStart();\n        try {\n            Log.i(TAG, &quot;Starting Mutlicast Lock...&quot;);\n            WifiManager wifi = (WifiManager) this.getSystemService(Context.WIFI_SERVICE);\n            // get the device ip address\n            final InetAddress deviceIpAddress = getDeviceIpAddress(wifi);\n            multicastLock = wifi.createMulticastLock(getClass().getName());\n            multicastLock.setReferenceCounted(true);\n            multicastLock.acquire();\n            Log.i(TAG, &quot;Starting ZeroConf probe....&quot;);\n            // Create a JmDNS instance\n            // JmDNS jmdns = JmDNS.create(address, &quot;JmDNS-IP-&quot; + (jmdnsInstances.size() + 1));\n            jmdns = JmDNS.create(deviceIpAddress, &quot;HOSTNAME&quot;);\n            if (jmdns != null) {\n                // Add a service listener\n                jmdns.addServiceListener(SERVICE_TYPE, new ServiceListenerImpl());\n//                jmdns.list(&quot;_exp._tcp.local.&quot;, 10 * 1000);\n                isDiscovering = true;\n                Log.d(TAG, &quot;discovering services of type: &quot;  + SERVICE_TYPE);\n\n/*\n                serviceInfo = ServiceInfo.create(&quot;_test._tcp.local.&quot;,\n                        &quot;AndroidTest&quot;, 0,\n                        &quot;test from android&quot;);\n                jmdns.registerService(serviceInfo);\n\n */\n            }\n        } catch (UnknownHostException e) {\n            System.out.println(e.getMessage());\n        } catch (IOException e) {\n            Log.e(TAG, e.getMessage(), e);\n            System.out.println(e.getMessage());\n        }\n        Log.i(TAG, &quot;Started ZeroConf probe....&quot;);\n    }\n\n    @Override\n    protected void onStop() {\n        Log.i(TAG, &quot;Stopping ServiceActivity...&quot;);\n        super.onStop();\n        stopScan();\n    }\n\n    private static void stopScan() {\n        try {\n            if (jmdns != null) {\n                Log.i(TAG, &quot;Stopping ZeroConf probe....&quot;);\n                jmdns.unregisterAllServices();\n                jmdns.close();\n                jmdns = null;\n            }\n            if (multicastLock != null) {\n                Log.i(TAG, &quot;Releasing Mutlicast Lock...&quot;);\n                multicastLock.release();\n                multicastLock = null;\n            }\n        } catch (Exception ex) {\n            Log.e(TAG, ex.getMessage(), ex);\n        }\n    }\n}\n</code></pre>\n<p>List all IP and Hostname connected to WiFi.</p>\n"},{"tags":["java","apache-spark","minio"],"answers":[{"tags":[],"owner":{"account_id":20455031,"reputation":173,"user_id":15008906,"display_name":"Jon Hayden"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684330038,"creation_date":1684330038,"answer_id":76272639,"question_id":76267996,"body_markdown":"Finally figured this out.  Because minio was running in a container, I had to do port forwarding so my test could reach minio.\r\n\r\nExample:\r\n\r\nkubectl port-forward -n gossamer-windows deployment/minio-deployment 9001:9000\r\n\r\nOnce I did the port forwarding I was able to read and right to minio in delta format.","title":"Unable to read from minio using spark due to &quot;NoAuthWithAWSException: Credentials requested after provider list was closed&quot;","body":"<p>Finally figured this out.  Because minio was running in a container, I had to do port forwarding so my test could reach minio.</p>\n<p>Example:</p>\n<p>kubectl port-forward -n gossamer-windows deployment/minio-deployment 9001:9000</p>\n<p>Once I did the port forwarding I was able to read and right to minio in delta format.</p>\n"}],"owner":{"account_id":20455031,"reputation":173,"user_id":15008906,"display_name":"Jon Hayden"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":351,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1684330038,"creation_date":1684286417,"question_id":76267996,"body_markdown":"\r\nHere&#39;s the code:\r\n\r\n        public static void main(String[] args) {\r\n        SparkConf sparkConf = new SparkConf()\r\n                .setAppName(&quot;test&quot;)\r\n                .set(&quot;spark.delta.logStore.class&quot;, &quot;org.apache.spark.sql.delta.storage.S3SingleDriverLogStore&quot;)\r\n                .set(&quot;spark.hadoop.fs.s3a.endpoint&quot;, &quot;http://localhost:9000&quot;)\r\n                .set(&quot;spark.hadoop.fs.s3a.access.key&quot;, &quot;minio&quot;)\r\n                .set(&quot;spark.hadoop.fs.s3a.secret.key&quot;, &quot;minio123&quot;)\r\n                .set(&quot;spark.hadoop.fs.s3a.path.style.access&quot;, &quot;true&quot;)\r\n                .set(&quot;spark.hadoop.fs.s3a.connection.ssl.enabled&quot;, &quot;false&quot;)\r\n                .set(&quot;spark.hadoop.fs.s3a.impl&quot;, &quot;org.apache.hadoop.fs.s3a.S3AFileSystem&quot;)\r\n                ;\r\n\r\n        SparkSession sparkSession = SparkSession.builder()\r\n                .master(&quot;local&quot;)\r\n                .config(sparkConf)\r\n                .getOrCreate();\r\n\r\n        System.out.println(&quot;********** Reading from minio **********&quot;);\r\n        Dataset&lt;Row&gt; csv = sparkSession\r\n                .read()\r\n                .format(&quot;csv&quot;)\r\n                .option(&quot;header&quot;,&quot;true&quot;)\r\n                .csv(&quot;s3a://spark-test/test.csv&quot;)\r\n                ;\r\n\r\n        System.out.println(&quot;********** Writing to minio **********&quot;);\r\n        csv.write().mode(&quot;overwrite&quot;).format(&quot;delta&quot;).save(&quot;s3a://spark-test/deltafile&quot;);\r\n\r\nThis is the output and hangs\r\n```\r\n********** Reading from minio **********\r\n23/05/16 20:07:00 INFO SharedState: Setting hive.metastore.warehouse.dir (&#39;null&#39;) to the value of spark.sql.warehouse.dir.\r\n23/05/16 20:07:00 INFO SharedState: Warehouse path is &#39;file:/C:/&lt;...&gt;/spark-warehouse&#39;.\r\n23/05/16 20:07:02 WARN MetricsConfig: Cannot locate configuration: tried hadoop-metrics2-s3a-file-system.properties,hadoop-metrics2.properties\r\n23/05/16 20:07:02 INFO MetricsSystemImpl: Scheduled Metric snapshot period at 10 second(s).\r\n23/05/16 20:07:02 INFO MetricsSystemImpl: s3a-file-system metrics system started\r\n23/05/16 20:07:11 WARN ProcfsMetricsGetter: Exception when trying to compute pagesize, as a result reporting of ProcessTree metrics is stopped\r\n```\r\n\r\nIf I wait about 5 minutes and stop the program, I get this output with no errors:\r\n```\r\n23/05/16 20:11:53 INFO SparkContext: Invoking stop() from shutdown hook\r\n23/05/16 20:11:53 INFO SparkUI: Stopped Spark web UI at http://BAH5CD010DT15.resource.ds.bah.com:4041\r\n23/05/16 20:11:53 INFO MapOutputTrackerMasterEndpoint: MapOutputTrackerMasterEndpoint stopped!\r\n23/05/16 20:11:53 INFO MemoryStore: MemoryStore cleared\r\n23/05/16 20:11:53 INFO BlockManager: BlockManager stopped\r\n23/05/16 20:11:53 INFO BlockManagerMaster: BlockManagerMaster stopped\r\n23/05/16 20:11:53 INFO OutputCommitCoordinator$OutputCommitCoordinatorEndpoint: OutputCommitCoordinator stopped!\r\n23/05/16 20:11:53 INFO SparkContext: Successfully stopped SparkContext\r\n23/05/16 20:11:53 INFO ShutdownHookManager: Shutdown hook called\r\n23/05/16 20:11:53 INFO ShutdownHookManager: Deleting directory C:\\Users\\611528\\AppData\\Local\\Temp\\1\\spark-9f08dab0-3643-4cec-9d40-443b5db388be\r\n23/05/16 20:11:53 INFO MetricsSystemImpl: Stopping s3a-file-system metrics system...\r\n23/05/16 20:11:53 INFO MetricsSystemImpl: s3a-file-system metrics system stopped.\r\n23/05/16 20:11:53 INFO MetricsSystemImpl: s3a-file-system metrics system shutdown complete.\r\n```\r\n\r\nBut if I stop the program at the hanging point after only a minute, I get these additional messages:\r\n```\r\n23/05/16 20:13:26 WARN AWSCredentialProviderList: Credentials requested after provider list was closed\r\n23/05/16 20:13:26 WARN FileStreamSink: Assume no metadata directory. Error while looking for metadata directory in the path: s3a://spark-test/test.csv.\r\njava.nio.file.AccessDeniedException: s3a://spark-test/test.csv: org.apache.hadoop.fs.s3a.auth.NoAuthWithAWSException: Credentials requested after provider list was closed\r\n```\r\n\r\nI&#39;ve spent all day looking at this and haven&#39;t found a solution yet. It never even makes it to the write() portion of the code.  It&#39;s hanging on the read() for some reason.  Any help would be appreciated.\r\n","title":"Unable to read from minio using spark due to &quot;NoAuthWithAWSException: Credentials requested after provider list was closed&quot;","body":"<p>Here's the code:</p>\n<pre><code>    public static void main(String[] args) {\n    SparkConf sparkConf = new SparkConf()\n            .setAppName(&quot;test&quot;)\n            .set(&quot;spark.delta.logStore.class&quot;, &quot;org.apache.spark.sql.delta.storage.S3SingleDriverLogStore&quot;)\n            .set(&quot;spark.hadoop.fs.s3a.endpoint&quot;, &quot;http://localhost:9000&quot;)\n            .set(&quot;spark.hadoop.fs.s3a.access.key&quot;, &quot;minio&quot;)\n            .set(&quot;spark.hadoop.fs.s3a.secret.key&quot;, &quot;minio123&quot;)\n            .set(&quot;spark.hadoop.fs.s3a.path.style.access&quot;, &quot;true&quot;)\n            .set(&quot;spark.hadoop.fs.s3a.connection.ssl.enabled&quot;, &quot;false&quot;)\n            .set(&quot;spark.hadoop.fs.s3a.impl&quot;, &quot;org.apache.hadoop.fs.s3a.S3AFileSystem&quot;)\n            ;\n\n    SparkSession sparkSession = SparkSession.builder()\n            .master(&quot;local&quot;)\n            .config(sparkConf)\n            .getOrCreate();\n\n    System.out.println(&quot;********** Reading from minio **********&quot;);\n    Dataset&lt;Row&gt; csv = sparkSession\n            .read()\n            .format(&quot;csv&quot;)\n            .option(&quot;header&quot;,&quot;true&quot;)\n            .csv(&quot;s3a://spark-test/test.csv&quot;)\n            ;\n\n    System.out.println(&quot;********** Writing to minio **********&quot;);\n    csv.write().mode(&quot;overwrite&quot;).format(&quot;delta&quot;).save(&quot;s3a://spark-test/deltafile&quot;);\n</code></pre>\n<p>This is the output and hangs</p>\n<pre><code>********** Reading from minio **********\n23/05/16 20:07:00 INFO SharedState: Setting hive.metastore.warehouse.dir ('null') to the value of spark.sql.warehouse.dir.\n23/05/16 20:07:00 INFO SharedState: Warehouse path is 'file:/C:/&lt;...&gt;/spark-warehouse'.\n23/05/16 20:07:02 WARN MetricsConfig: Cannot locate configuration: tried hadoop-metrics2-s3a-file-system.properties,hadoop-metrics2.properties\n23/05/16 20:07:02 INFO MetricsSystemImpl: Scheduled Metric snapshot period at 10 second(s).\n23/05/16 20:07:02 INFO MetricsSystemImpl: s3a-file-system metrics system started\n23/05/16 20:07:11 WARN ProcfsMetricsGetter: Exception when trying to compute pagesize, as a result reporting of ProcessTree metrics is stopped\n</code></pre>\n<p>If I wait about 5 minutes and stop the program, I get this output with no errors:</p>\n<pre><code>23/05/16 20:11:53 INFO SparkContext: Invoking stop() from shutdown hook\n23/05/16 20:11:53 INFO SparkUI: Stopped Spark web UI at http://BAH5CD010DT15.resource.ds.bah.com:4041\n23/05/16 20:11:53 INFO MapOutputTrackerMasterEndpoint: MapOutputTrackerMasterEndpoint stopped!\n23/05/16 20:11:53 INFO MemoryStore: MemoryStore cleared\n23/05/16 20:11:53 INFO BlockManager: BlockManager stopped\n23/05/16 20:11:53 INFO BlockManagerMaster: BlockManagerMaster stopped\n23/05/16 20:11:53 INFO OutputCommitCoordinator$OutputCommitCoordinatorEndpoint: OutputCommitCoordinator stopped!\n23/05/16 20:11:53 INFO SparkContext: Successfully stopped SparkContext\n23/05/16 20:11:53 INFO ShutdownHookManager: Shutdown hook called\n23/05/16 20:11:53 INFO ShutdownHookManager: Deleting directory C:\\Users\\611528\\AppData\\Local\\Temp\\1\\spark-9f08dab0-3643-4cec-9d40-443b5db388be\n23/05/16 20:11:53 INFO MetricsSystemImpl: Stopping s3a-file-system metrics system...\n23/05/16 20:11:53 INFO MetricsSystemImpl: s3a-file-system metrics system stopped.\n23/05/16 20:11:53 INFO MetricsSystemImpl: s3a-file-system metrics system shutdown complete.\n</code></pre>\n<p>But if I stop the program at the hanging point after only a minute, I get these additional messages:</p>\n<pre><code>23/05/16 20:13:26 WARN AWSCredentialProviderList: Credentials requested after provider list was closed\n23/05/16 20:13:26 WARN FileStreamSink: Assume no metadata directory. Error while looking for metadata directory in the path: s3a://spark-test/test.csv.\njava.nio.file.AccessDeniedException: s3a://spark-test/test.csv: org.apache.hadoop.fs.s3a.auth.NoAuthWithAWSException: Credentials requested after provider list was closed\n</code></pre>\n<p>I've spent all day looking at this and haven't found a solution yet. It never even makes it to the write() portion of the code.  It's hanging on the read() for some reason.  Any help would be appreciated.</p>\n"},{"tags":["java","amazon-web-services","aws-lambda","aws-ssm"],"answers":[{"comments":[{"owner":{"account_id":7287031,"reputation":109,"user_id":5554802,"display_name":"mjd"},"score":1,"creation_date":1540814027,"post_id":53044842,"comment_id":92989139,"body_markdown":"Ok I get it. But wouldn&#39;t it be better to save the data as org.json.JSONObject then? This way I wouldn&#39;t have a problem when my data contains a &#39;,&#39;...","body":"Ok I get it. But wouldn&#39;t it be better to save the data as org.json.JSONObject then? This way I wouldn&#39;t have a problem when my data contains a &#39;,&#39;..."},{"owner":{"account_id":504212,"reputation":8086,"user_id":2531132,"accept_rate":50,"display_name":"thomasmichaelwallace"},"score":0,"creation_date":1540814216,"post_id":53044842,"comment_id":92989259,"body_markdown":"Well- as I mentioned, you can de/serialise it to/from a string however you want. The only advantage to using a comma separated list is that the SSM web console understands that StringList is a thing, so it is easier to edit in the AWS SSM Console, rather than using json &amp;c which will just appear as string of json.","body":"Well- as I mentioned, you can de/serialise it to/from a string however you want. The only advantage to using a comma separated list is that the SSM web console understands that StringList is a thing, so it is easier to edit in the AWS SSM Console, rather than using json &amp;c which will just appear as string of json."},{"owner":{"account_id":504212,"reputation":8086,"user_id":2531132,"accept_rate":50,"display_name":"thomasmichaelwallace"},"score":0,"creation_date":1540814527,"post_id":53044842,"comment_id":92989458,"body_markdown":"n.b. for the comma-in-value problem specifically, CSV is a proper format and there are java serialisers for it that will handle the use of quotes &amp;c to escape internal commas as per the spec.","body":"n.b. for the comma-in-value problem specifically, CSV is a proper format and there are java serialisers for it that will handle the use of quotes &amp;c to escape internal commas as per the spec."}],"tags":[],"owner":{"account_id":504212,"reputation":8086,"user_id":2531132,"accept_rate":50,"display_name":"thomasmichaelwallace"},"comment_count":3,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1540813558,"creation_date":1540813558,"answer_id":53044842,"question_id":53044174,"body_markdown":"Fundamentally SSM parameters are always strings [(docs)](https://docs.aws.amazon.com/systems-manager/latest/APIReference/API_Parameter.html). Whether they&#39;re _just_ a string, or an encrypted string, or a &quot;list&quot; which is really a string where you&#39;ve agreed to use a comma as a separator for items.\r\n\r\nLuckily strings are incredibly flexible and the trick will be to marshal your data to/from a string representation.\r\n\r\nProbably the most obvious is to use the SSM `StringList` type and require that the string list is ordered, for example `mailInfo = smpt,username,password,defaultToMail `. At which point you can do your own marshalling:\r\n\r\n    GetParameterRequest parameterRequest = new GetParameterRequest().withName(&quot;mailInfo&quot;).withWithDecryption(false);\r\n    AWSSimpleSystemsManagement ssmclient = AWSSimpleSystemsManagementClientBuilder.defaultClient();\r\n    GetParameterResult parameterResult = ssmclient.getParameter(parameterRequest);\r\n    String mailInfo = parameterResult.getParameter().getValue();\r\n\r\n    String[] params = mailInfo.split(&quot;,&quot;);\r\n    String stmp = params[0];\r\n    String username = params[1];\r\n    String password = params[2];\r\n    String defaultToMail = params[3];\r\n\r\nMarshalling a StringList is probably prefered against other options (for example serialising a class and saving the result), as it&#39;s user-editable in the interface. You might, however, want to extend the format to be explicit about the ordering, e.g. `smtp=smtp_value,username=username_value...` and then split each list item by `=` and assign accordingly.","title":"AWS Systems Manager Parameter Store: Using StringList as Key Value Pairs in Java (Lambda)","body":"<p>Fundamentally SSM parameters are always strings <a href=\"https://docs.aws.amazon.com/systems-manager/latest/APIReference/API_Parameter.html\" rel=\"noreferrer\">(docs)</a>. Whether they're <em>just</em> a string, or an encrypted string, or a \"list\" which is really a string where you've agreed to use a comma as a separator for items.</p>\n\n<p>Luckily strings are incredibly flexible and the trick will be to marshal your data to/from a string representation.</p>\n\n<p>Probably the most obvious is to use the SSM <code>StringList</code> type and require that the string list is ordered, for example <code>mailInfo = smpt,username,password,defaultToMail</code>. At which point you can do your own marshalling:</p>\n\n<pre><code>GetParameterRequest parameterRequest = new GetParameterRequest().withName(\"mailInfo\").withWithDecryption(false);\nAWSSimpleSystemsManagement ssmclient = AWSSimpleSystemsManagementClientBuilder.defaultClient();\nGetParameterResult parameterResult = ssmclient.getParameter(parameterRequest);\nString mailInfo = parameterResult.getParameter().getValue();\n\nString[] params = mailInfo.split(\",\");\nString stmp = params[0];\nString username = params[1];\nString password = params[2];\nString defaultToMail = params[3];\n</code></pre>\n\n<p>Marshalling a StringList is probably prefered against other options (for example serialising a class and saving the result), as it's user-editable in the interface. You might, however, want to extend the format to be explicit about the ordering, e.g. <code>smtp=smtp_value,username=username_value...</code> and then split each list item by <code>=</code> and assign accordingly.</p>\n"},{"tags":[],"owner":{"account_id":6750506,"reputation":709,"user_id":5200630,"display_name":"Gogu CelMare"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684329819,"creation_date":1684329819,"answer_id":76272602,"question_id":53044174,"body_markdown":"Checkout GetParametersByPath in java sdk    \r\n[doco:] (https://sdk.amazonaws.com/java/api/latest/software/amazon/awssdk/services/ssm/SsmClient.html#getParametersByPath(software.amazon.awssdk.services.ssm.model.GetParametersByPathRequest)) \r\n\r\nThey are specifically designed for grouping together sets of data.","title":"AWS Systems Manager Parameter Store: Using StringList as Key Value Pairs in Java (Lambda)","body":"<p>Checkout GetParametersByPath in java sdk<br />\n[doco:] (<a href=\"https://sdk.amazonaws.com/java/api/latest/software/amazon/awssdk/services/ssm/SsmClient.html#getParametersByPath(software.amazon.awssdk.services.ssm.model.GetParametersByPathRequest)\" rel=\"nofollow noreferrer\">https://sdk.amazonaws.com/java/api/latest/software/amazon/awssdk/services/ssm/SsmClient.html#getParametersByPath(software.amazon.awssdk.services.ssm.model.GetParametersByPathRequest)</a>)</p>\n<p>They are specifically designed for grouping together sets of data.</p>\n"}],"owner":{"account_id":7287031,"reputation":109,"user_id":5554802,"display_name":"mjd"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15485,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":53044842,"answer_count":2,"score":3,"last_activity_date":1684329819,"creation_date":1540811197,"question_id":53044174,"body_markdown":"Im using Api Gateway and AWS Lambda and AWS RDS to build an API.\r\nMy Lambda Function Code is Java.\r\nCurrently im using the AWS Systems Manager Parameter Store successfully to connect to my Database.\r\nTherefore I created a parameter called &quot;connection&quot; which has the type String and holds my complete connection url.\r\nIn Lambda functions i can access this parameter successfully this way:\r\n\r\n    GetParameterRequest parameterRequest = new GetParameterRequest().withName(&quot;connection&quot;).withWithDecryption(false);\r\n    \t\tAWSSimpleSystemsManagement ssmclient = AWSSimpleSystemsManagementClientBuilder.defaultClient();\r\n    \t\tGetParameterResult parameterResult = ssmclient.getParameter(parameterRequest);\r\n    \t\tString url = parameterResult.getParameter().getValue();\r\n\r\n\r\nNow my question: \r\nIn other lambda functions I want to send mails. Therefor I want to save the **SMTP-Server** and the **username** and the **password** and a **default sender mail** and so on.\r\n\r\nWould it be possible to save this information as Type StringList like Key/Value Pairs (Map)?\r\nThat something like this could be possible:\r\n\r\n        //Get StringList\r\n        GetParameterRequest parameterRequest = new GetParameterRequest().withName(&quot;mailInfo&quot;).withWithDecryption(false);\r\n        AWSSimpleSystemsManagement ssmclient = AWSSimpleSystemsManagementClientBuilder.defaultClient();\r\n    \t\tGetParameterResult parameterResult = ssmclient.getParameter(parameterRequest);\r\n        //Get values from the list\r\n        String smtp_server = parameterResult.getParameter(&quot;smtp&quot;).getValue();\r\n        String to_mail = parameterResult.getParameter(&quot;defaultToMail&quot;).getValue();\r\n        ...\r\n\r\nThanks in advance.","title":"AWS Systems Manager Parameter Store: Using StringList as Key Value Pairs in Java (Lambda)","body":"<p>Im using Api Gateway and AWS Lambda and AWS RDS to build an API.\nMy Lambda Function Code is Java.\nCurrently im using the AWS Systems Manager Parameter Store successfully to connect to my Database.\nTherefore I created a parameter called \"connection\" which has the type String and holds my complete connection url.\nIn Lambda functions i can access this parameter successfully this way:</p>\n\n<pre><code>GetParameterRequest parameterRequest = new GetParameterRequest().withName(\"connection\").withWithDecryption(false);\n        AWSSimpleSystemsManagement ssmclient = AWSSimpleSystemsManagementClientBuilder.defaultClient();\n        GetParameterResult parameterResult = ssmclient.getParameter(parameterRequest);\n        String url = parameterResult.getParameter().getValue();\n</code></pre>\n\n<p>Now my question: \nIn other lambda functions I want to send mails. Therefor I want to save the <strong>SMTP-Server</strong> and the <strong>username</strong> and the <strong>password</strong> and a <strong>default sender mail</strong> and so on.</p>\n\n<p>Would it be possible to save this information as Type StringList like Key/Value Pairs (Map)?\nThat something like this could be possible:</p>\n\n<pre><code>    //Get StringList\n    GetParameterRequest parameterRequest = new GetParameterRequest().withName(\"mailInfo\").withWithDecryption(false);\n    AWSSimpleSystemsManagement ssmclient = AWSSimpleSystemsManagementClientBuilder.defaultClient();\n        GetParameterResult parameterResult = ssmclient.getParameter(parameterRequest);\n    //Get values from the list\n    String smtp_server = parameterResult.getParameter(\"smtp\").getValue();\n    String to_mail = parameterResult.getParameter(\"defaultToMail\").getValue();\n    ...\n</code></pre>\n\n<p>Thanks in advance.</p>\n"},{"tags":["java","apache-kafka","spring-kafka"],"comments":[{"owner":{"account_id":3209227,"reputation":471,"user_id":2709542,"display_name":"Mathew"},"score":0,"creation_date":1684317138,"post_id":76267842,"comment_id":134499534,"body_markdown":"What&#39;s the version of spring-kafka ?","body":"What&#39;s the version of spring-kafka ?"}],"answers":[{"tags":[],"owner":{"account_id":1288095,"reputation":169336,"user_id":1240763,"display_name":"Gary Russell"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1684329783,"creation_date":1684329783,"answer_id":76272594,"question_id":76267842,"body_markdown":"You can add metadata to the `OffsetAndMetadata` by configuring an `OffsetAndMetadataProvider`.\r\n\r\nhttps://docs.spring.io/spring-kafka/docs/current/reference/html/#offsetAndMetadataProvider\r\n\r\nIt is called for each offset that will be committed.\r\n\r\n```java\r\n/**\r\n * Provider for {@link OffsetAndMetadata}. The provider can be used to have more granularity when creating an\r\n * {@link OffsetAndMetadata}. The provider is used for both sync and async commits of the offsets.\r\n *\r\n * @author Francois Rosiere\r\n * @since 2.8.5\r\n * @see org.apache.kafka.clients.consumer.OffsetCommitCallback\r\n */\r\npublic interface OffsetAndMetadataProvider {\r\n\r\n\t/**\r\n\t * Provide an offset and metadata object for the given listener metadata and offset.\r\n\t *\r\n\t * @param listenerMetadata metadata associated to a listener.\r\n\t * @param offset an offset.\r\n\t * @return an offset and metadata.\r\n\t */\r\n\tOffsetAndMetadata provide(ListenerMetadata listenerMetadata, long offset);\r\n}\r\n```","title":"Spring-kafka Record offset commit time for Async manual commits","body":"<p>You can add metadata to the <code>OffsetAndMetadata</code> by configuring an <code>OffsetAndMetadataProvider</code>.</p>\n<p><a href=\"https://docs.spring.io/spring-kafka/docs/current/reference/html/#offsetAndMetadataProvider\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-kafka/docs/current/reference/html/#offsetAndMetadataProvider</a></p>\n<p>It is called for each offset that will be committed.</p>\n<pre class=\"lang-java prettyprint-override\"><code>/**\n * Provider for {@link OffsetAndMetadata}. The provider can be used to have more granularity when creating an\n * {@link OffsetAndMetadata}. The provider is used for both sync and async commits of the offsets.\n *\n * @author Francois Rosiere\n * @since 2.8.5\n * @see org.apache.kafka.clients.consumer.OffsetCommitCallback\n */\npublic interface OffsetAndMetadataProvider {\n\n    /**\n     * Provide an offset and metadata object for the given listener metadata and offset.\n     *\n     * @param listenerMetadata metadata associated to a listener.\n     * @param offset an offset.\n     * @return an offset and metadata.\n     */\n    OffsetAndMetadata provide(ListenerMetadata listenerMetadata, long offset);\n}\n</code></pre>\n"}],"owner":{"account_id":10505209,"reputation":37,"user_id":7742611,"display_name":"Aakanksha Sharma"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":146,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76272594,"answer_count":1,"score":1,"last_activity_date":1684329783,"creation_date":1684283081,"question_id":76267842,"body_markdown":"I have a spring kafka based listener that receives a batch, processes and then manually acknowledges it as in the code below:\r\n\r\n```\r\n    @KafkaListener(topics = my_topic)\r\n    public void consume(@Payload List&lt;String&gt; messages,\r\n                        @Header(KafkaHeaders.ACKNOWLEDGMENT) Acknowledgment acknowledgment) {\r\n    for (String message: messages) {\r\n         // process each message\r\n    }\r\n    // Ideally the timer will record start time here\r\n    acknowledgement.acknowledge();\r\n\r\n```\r\nMy config class has the commit callback logic. I would like to record a timer for the time between when the acknowledge is called and when the callback is received. \r\n\r\n```\r\n    @Bean\r\n    public ConcurrentKafkaListenerContainerFactory&lt;String, String&gt; kafkaListenerContainerFactory() {\r\n\r\n        log.info(&quot;Creating kafka listener factory&quot;);\r\n        ConcurrentKafkaListenerContainerFactory&lt;String, String&gt; factory\r\n                = new ConcurrentKafkaListenerContainerFactory&lt;&gt;();\r\n        factory.setConsumerFactory(consumerFactory());\r\n        factory.setBatchListener(true);\r\n        factory.getContainerProperties().setSyncCommits(false);     \r\n        factory.getContainerProperties()\r\n                .setAckMode(ContainerProperties.AckMode.MANUAL_IMMEDIATE);\r\n        // More config\r\n        factory.getContainerProperties().setCommitCallback((map, ex) -&gt; {\r\n        // Ideally the end time will be recorded here and timer metric published.\r\n            if (ex == null) {\r\n                log.info(&quot;Successful commit for {}&quot;, map);\r\n            } else {\r\n                log.error(&quot;Commit failed for {} with exception: {}&quot;, map, ex.getMessage());\r\n            }\r\n        });\r\n    }\r\n\r\n```\r\nHow can I do it with spring kafka? The acknowledge method doesn&#39;t let me pass any values to refer in the callback.","title":"Spring-kafka Record offset commit time for Async manual commits","body":"<p>I have a spring kafka based listener that receives a batch, processes and then manually acknowledges it as in the code below:</p>\n<pre><code>    @KafkaListener(topics = my_topic)\n    public void consume(@Payload List&lt;String&gt; messages,\n                        @Header(KafkaHeaders.ACKNOWLEDGMENT) Acknowledgment acknowledgment) {\n    for (String message: messages) {\n         // process each message\n    }\n    // Ideally the timer will record start time here\n    acknowledgement.acknowledge();\n\n</code></pre>\n<p>My config class has the commit callback logic. I would like to record a timer for the time between when the acknowledge is called and when the callback is received.</p>\n<pre><code>    @Bean\n    public ConcurrentKafkaListenerContainerFactory&lt;String, String&gt; kafkaListenerContainerFactory() {\n\n        log.info(&quot;Creating kafka listener factory&quot;);\n        ConcurrentKafkaListenerContainerFactory&lt;String, String&gt; factory\n                = new ConcurrentKafkaListenerContainerFactory&lt;&gt;();\n        factory.setConsumerFactory(consumerFactory());\n        factory.setBatchListener(true);\n        factory.getContainerProperties().setSyncCommits(false);     \n        factory.getContainerProperties()\n                .setAckMode(ContainerProperties.AckMode.MANUAL_IMMEDIATE);\n        // More config\n        factory.getContainerProperties().setCommitCallback((map, ex) -&gt; {\n        // Ideally the end time will be recorded here and timer metric published.\n            if (ex == null) {\n                log.info(&quot;Successful commit for {}&quot;, map);\n            } else {\n                log.error(&quot;Commit failed for {} with exception: {}&quot;, map, ex.getMessage());\n            }\n        });\n    }\n\n</code></pre>\n<p>How can I do it with spring kafka? The acknowledge method doesn't let me pass any values to refer in the callback.</p>\n"},{"tags":["java","typescript","maven","openapi","type-mapping"],"comments":[{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1658162145,"post_id":73025534,"comment_id":128977636,"body_markdown":"By the way, both `Date` classes bundled with Java are terribly flawed by poor design. They were years ago supplanted by the modern *java.time* classes defined in JSR 310.","body":"By the way, both <code>Date</code> classes bundled with Java are terribly flawed by poor design. They were years ago supplanted by the modern <i>java.time</i> classes defined in JSR 310."}],"answers":[{"tags":[],"owner":{"account_id":994572,"reputation":8429,"user_id":1010868,"accept_rate":69,"display_name":"Tomasz Gawel"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684329727,"creation_date":1684325158,"answer_id":76271911,"question_id":73025534,"body_markdown":"Define `typeMappings` as below, instead:\r\n\r\n    &lt;typeMappings&gt;\r\n        &lt;mapping&gt;DateTime=Date&lt;/mapping&gt;\r\n        &lt;mapping&gt;Date=Date&lt;/mapping&gt;\r\n    &lt;/typeMappings&gt;\r\n\r\nThis worked with `typescript-angular` generator, at least.","title":"OpenApi&#39;s typeMapping Date=Date is not working","body":"<p>Define <code>typeMappings</code> as below, instead:</p>\n<pre><code>&lt;typeMappings&gt;\n    &lt;mapping&gt;DateTime=Date&lt;/mapping&gt;\n    &lt;mapping&gt;Date=Date&lt;/mapping&gt;\n&lt;/typeMappings&gt;\n</code></pre>\n<p>This worked with <code>typescript-angular</code> generator, at least.</p>\n"}],"owner":{"account_id":19064371,"reputation":441,"user_id":13919748,"display_name":"javaistaucheineinsel"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":667,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1684329727,"creation_date":1658161123,"question_id":73025534,"body_markdown":"I am having trouble generating the client code with the right type mapping. My client is broken because fields of type `date` are generated as `string` :\r\n\r\n    //Server code (Java)\r\n    @ApiModel(description = &quot;ContractExtensionDto&quot;)\r\n    @Data\r\n    @NoArgsConstructor\r\n    public class ContractExtensionDto {\r\n        @NotNull\r\n        protected Integer id;\r\n        @JsonFormat(shape = JsonFormat.Shape.STRING, pattern = PatternConfig.DATE_TIME_FORMAT)\r\n        protected Date dateStart;\r\n        @JsonFormat(shape = JsonFormat.Shape.STRING, pattern = PatternConfig.DATE_TIME_FORMAT)\r\n        protected Date dateEnd;\r\n        //omitted code\r\n    }\r\n\r\n    //Generated client code (Typescript)\r\n    export interface ContractExtensionDto { \r\n        id: number;\r\n        dateStart?: string;\r\n        dateEnd?: string;\r\n        //omitted code\r\n    } \r\n\r\n\r\nIn my pom.xml I have added both `typeMappings` and `importMappings` :\r\n\r\n    &lt;plugin&gt;\r\n            &lt;groupId&gt;org.openapitools&lt;/groupId&gt;\r\n            &lt;artifactId&gt;openapi-generator-maven-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;6.0.0&lt;/version&gt;\r\n            &lt;executions&gt;\r\n                &lt;execution&gt;\r\n                    &lt;goals&gt;\r\n                        &lt;goal&gt;generate&lt;/goal&gt;\r\n                    &lt;/goals&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;inputSpec&gt;${project.build.directory}/classes/swagger/swagger.json&lt;/inputSpec&gt;\r\n                        &lt;generatorName&gt;typescript-angular&lt;/generatorName&gt;\r\n                        &lt;output&gt;frontend/src/app/services/rest-api&lt;/output&gt;\r\n                        &lt;skipValidateSpec&gt;true&lt;/skipValidateSpec&gt;\r\n                        &lt;configOptions&gt;\r\n                            &lt;ngVersion&gt;10.2.5&lt;/ngVersion&gt;\r\n    \t\t\t\t\t\t&lt;dateLibrary&gt;java8&lt;/dateLibrary&gt;\r\n                        &lt;/configOptions&gt;\r\n    \t\t\t\t\t&lt;typeMappings&gt;Date=Date&lt;/typeMappings&gt;\r\n    \t\t\t\t\t&lt;importMappings&gt;Date=Date&lt;/importMappings&gt;\r\n                        &lt;!-- I have tried this as well but in vain --&gt;\r\n                        &lt;!-- \r\n                          &lt;typeMappings&gt;DateTime=Date&lt;/typeMappings&gt;\r\n    \t\t\t\t\t  &lt;importMappings&gt;DateTime=Date&lt;/importMappings&gt;\r\n                        --&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/execution&gt;\r\n            &lt;/executions&gt;\r\n          &lt;/plugin&gt;\r\n\r\nbut still the client `date` fields are generated as `string` typed.","title":"OpenApi&#39;s typeMapping Date=Date is not working","body":"<p>I am having trouble generating the client code with the right type mapping. My client is broken because fields of type <code>date</code> are generated as <code>string</code> :</p>\n<pre><code>//Server code (Java)\n@ApiModel(description = &quot;ContractExtensionDto&quot;)\n@Data\n@NoArgsConstructor\npublic class ContractExtensionDto {\n    @NotNull\n    protected Integer id;\n    @JsonFormat(shape = JsonFormat.Shape.STRING, pattern = PatternConfig.DATE_TIME_FORMAT)\n    protected Date dateStart;\n    @JsonFormat(shape = JsonFormat.Shape.STRING, pattern = PatternConfig.DATE_TIME_FORMAT)\n    protected Date dateEnd;\n    //omitted code\n}\n\n//Generated client code (Typescript)\nexport interface ContractExtensionDto { \n    id: number;\n    dateStart?: string;\n    dateEnd?: string;\n    //omitted code\n} \n</code></pre>\n<p>In my pom.xml I have added both <code>typeMappings</code> and <code>importMappings</code> :</p>\n<pre><code>&lt;plugin&gt;\n        &lt;groupId&gt;org.openapitools&lt;/groupId&gt;\n        &lt;artifactId&gt;openapi-generator-maven-plugin&lt;/artifactId&gt;\n        &lt;version&gt;6.0.0&lt;/version&gt;\n        &lt;executions&gt;\n            &lt;execution&gt;\n                &lt;goals&gt;\n                    &lt;goal&gt;generate&lt;/goal&gt;\n                &lt;/goals&gt;\n                &lt;configuration&gt;\n                    &lt;inputSpec&gt;${project.build.directory}/classes/swagger/swagger.json&lt;/inputSpec&gt;\n                    &lt;generatorName&gt;typescript-angular&lt;/generatorName&gt;\n                    &lt;output&gt;frontend/src/app/services/rest-api&lt;/output&gt;\n                    &lt;skipValidateSpec&gt;true&lt;/skipValidateSpec&gt;\n                    &lt;configOptions&gt;\n                        &lt;ngVersion&gt;10.2.5&lt;/ngVersion&gt;\n                        &lt;dateLibrary&gt;java8&lt;/dateLibrary&gt;\n                    &lt;/configOptions&gt;\n                    &lt;typeMappings&gt;Date=Date&lt;/typeMappings&gt;\n                    &lt;importMappings&gt;Date=Date&lt;/importMappings&gt;\n                    &lt;!-- I have tried this as well but in vain --&gt;\n                    &lt;!-- \n                      &lt;typeMappings&gt;DateTime=Date&lt;/typeMappings&gt;\n                      &lt;importMappings&gt;DateTime=Date&lt;/importMappings&gt;\n                    --&gt;\n                &lt;/configuration&gt;\n            &lt;/execution&gt;\n        &lt;/executions&gt;\n      &lt;/plugin&gt;\n</code></pre>\n<p>but still the client <code>date</code> fields are generated as <code>string</code> typed.</p>\n"},{"tags":["java","spring-boot","apache-spark"],"comments":[{"owner":{"account_id":28293063,"reputation":1,"user_id":21632895,"display_name":"Karuppusamy Mani"},"score":0,"creation_date":1684323702,"post_id":76270607,"comment_id":134500899,"body_markdown":"the issue is maven dependency. i have changed spark-core_2.13 to spark-core_2.12 it&#39;s working fine. but getting another error `Caused by: java.net.UnknownHostException: host.docker.internal`","body":"the issue is maven dependency. i have changed spark-core_2.13 to spark-core_2.12 it&#39;s working fine. but getting another error <code>Caused by: java.net.UnknownHostException: host.docker.internal</code>"},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1684329379,"post_id":76270607,"comment_id":134502232,"body_markdown":"1) You should add provided Maven scope to Spark dependencies 2) If your code isn&#39;t running in a container, that&#39;s an expected error","body":"1) You should add provided Maven scope to Spark dependencies 2) If your code isn&#39;t running in a container, that&#39;s an expected error"},{"owner":{"account_id":28293063,"reputation":1,"user_id":21632895,"display_name":"Karuppusamy Mani"},"score":0,"creation_date":1684571039,"post_id":76270607,"comment_id":134538970,"body_markdown":"Thanks. but the issue is resolved.just added `spark.driver.host` and `spark.driver.bindAddress` in SparkSession.","body":"Thanks. but the issue is resolved.just added <code>spark.driver.host</code> and <code>spark.driver.bindAddress</code> in SparkSession."},{"owner":{"account_id":28293063,"reputation":1,"user_id":21632895,"display_name":"Karuppusamy Mani"},"score":0,"creation_date":1684571103,"post_id":76270607,"comment_id":134538976,"body_markdown":"and one more thing don&#39;t use row.toString(). it will cause run time.","body":"and one more thing don&#39;t use row.toString(). it will cause run time."},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1684589796,"post_id":76270607,"comment_id":134540956,"body_markdown":"You should use dataset.show() rather than a foreach loop","body":"You should use dataset.show() rather than a foreach loop"}],"owner":{"account_id":28293063,"reputation":1,"user_id":21632895,"display_name":"Karuppusamy Mani"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":323,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684329421,"creation_date":1684316043,"question_id":76270607,"body_markdown":"I have one master node and two worker nodes. all nodes are running same version spark 3.4.0. Installed Hadoop 3.3.5 cluster on same. Spring boot dependencies are. \r\n\r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.apache.spark&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spark-core_2.13&lt;/artifactId&gt;\r\n    &lt;version&gt;3.4.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.apache.spark&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spark-sql_2.13&lt;/artifactId&gt;\r\n    &lt;version&gt;3.4.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.apache.spark&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spark-streaming_2.13&lt;/artifactId&gt;\r\n    &lt;version&gt;3.4.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nJava code is.\r\n\r\n```\r\nSparkConf sparkConf = new SparkConf()\r\n        .setAppName(&quot;gbh&quot;)\r\n        .setMaster(sparkUrl)\r\n        .set(&quot;fs.defaultFS&quot;,hdfsUrl)\r\n\r\nSparkSession sparkSession =     SparkSession.builder().master(sparkUrl).config(sparkConf).getOrCreate();\r\nSparkContext sparkContext = sparkSession.sparkContext();\r\nsparkContext.hadoopConfiguration().set(&quot;fs.defaultFS&quot;, hdfsUrl);\r\nsparkContext.hadoopConfiguration().set(&quot;HADOOP_USER_NAME&quot;, username);\r\nFileSystem fs = FileSystem.get(sparkContext.hadoopConfiguration());\r\nDataset&lt;Row&gt; resul = sparkSession.read().option(&quot;header&quot;, true).option(&quot;delimiter&quot;, &quot;,&quot;).csv(&quot;hdfs:///user/root/address.csv&quot;);\r\nresul.createOrReplaceTempView(&quot;Address&quot;);\r\nDataset&lt;Row&gt; dataset = sparkSession.sql(&quot;SELECT COUNT(*) FROM Address&quot;);\r\ndataset.foreach(row -&gt; {\r\nlogger.info(&quot;row data =  &quot;+row.toString());\r\n});\r\n```\r\n\r\nI have tested in spark shell using pyspark --master spark://165.300.90.17:7077 its working same code with Scala. but in java i am getting below error \r\n\r\n`org.apache.spark.SparkException: Exception thrown in awaitResult:  Caused by: java.lang.RuntimeException: java.io.InvalidClassException: org.apache.spark.rpc.netty.RpcEndpointVerifier$CheckExistence; local class incompatible: stream classdesc serialVersionUID = 5378738997755484868, local class serialVersionUID = 7789290765573734431`\r\n\r\nCan you please guide me to resolve this issue. Thanks.\r\n\r\nAnd also How can use Spark Connect for java.","title":"Connect spark 3.4.0 (cluster master) and hadoop 3.3.5 (cluster) from spring boot 2.7.9","body":"<p>I have one master node and two worker nodes. all nodes are running same version spark 3.4.0. Installed Hadoop 3.3.5 cluster on same. Spring boot dependencies are.</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.spark&lt;/groupId&gt;\n    &lt;artifactId&gt;spark-core_2.13&lt;/artifactId&gt;\n    &lt;version&gt;3.4.0&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.spark&lt;/groupId&gt;\n    &lt;artifactId&gt;spark-sql_2.13&lt;/artifactId&gt;\n    &lt;version&gt;3.4.0&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.spark&lt;/groupId&gt;\n    &lt;artifactId&gt;spark-streaming_2.13&lt;/artifactId&gt;\n    &lt;version&gt;3.4.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Java code is.</p>\n<pre><code>SparkConf sparkConf = new SparkConf()\n        .setAppName(&quot;gbh&quot;)\n        .setMaster(sparkUrl)\n        .set(&quot;fs.defaultFS&quot;,hdfsUrl)\n\nSparkSession sparkSession =     SparkSession.builder().master(sparkUrl).config(sparkConf).getOrCreate();\nSparkContext sparkContext = sparkSession.sparkContext();\nsparkContext.hadoopConfiguration().set(&quot;fs.defaultFS&quot;, hdfsUrl);\nsparkContext.hadoopConfiguration().set(&quot;HADOOP_USER_NAME&quot;, username);\nFileSystem fs = FileSystem.get(sparkContext.hadoopConfiguration());\nDataset&lt;Row&gt; resul = sparkSession.read().option(&quot;header&quot;, true).option(&quot;delimiter&quot;, &quot;,&quot;).csv(&quot;hdfs:///user/root/address.csv&quot;);\nresul.createOrReplaceTempView(&quot;Address&quot;);\nDataset&lt;Row&gt; dataset = sparkSession.sql(&quot;SELECT COUNT(*) FROM Address&quot;);\ndataset.foreach(row -&gt; {\nlogger.info(&quot;row data =  &quot;+row.toString());\n});\n</code></pre>\n<p>I have tested in spark shell using pyspark --master spark://165.300.90.17:7077 its working same code with Scala. but in java i am getting below error</p>\n<p><code>org.apache.spark.SparkException: Exception thrown in awaitResult:  Caused by: java.lang.RuntimeException: java.io.InvalidClassException: org.apache.spark.rpc.netty.RpcEndpointVerifier$CheckExistence; local class incompatible: stream classdesc serialVersionUID = 5378738997755484868, local class serialVersionUID = 7789290765573734431</code></p>\n<p>Can you please guide me to resolve this issue. Thanks.</p>\n<p>And also How can use Spark Connect for java.</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9796,"page":429,"page_size":100}
