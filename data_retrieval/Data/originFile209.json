{"items":[{"tags":["java","multithreading"],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1613546127,"creation_date":1613544712,"answer_id":66237016,"question_id":66236874,"body_markdown":"There is not context in your Question to be sure that this is the problem, but one issue with your code is that you are not waiting for the thread to finish before returning the value of `a`.  So, you are *probably* returning the contents of `a` *before* the thread has stored anything in it.\r\n\r\nIn fact, this code is all a bit wrong-headed.  If you want `request(String)` to return the value retrieved from the server, the `request` calll can&#39;t complete until the after you have retrieved the data.  This is unavoidably synchronous.  Using a `Thread` to do the retrieving is actually achieving nothing.  \r\n\r\n(Using `join()` as suggested &quot;fixes&quot; the symptom, but doesn&#39;t the pointless of using a thread here.)\r\n\r\nIf you want this to be asynchronous, you could change `request` to return a `Future&lt;String&gt;` that the caller can use to get hold of the retrieved value at a later time.\r\n\r\nAnd it would be simpler and (probably) more efficient if you used an `Executor` rather than creating once-time-use threads for each &quot;request&quot;.","title":"Java requests in thread","body":"<p>There is not context in your Question to be sure that this is the problem, but one issue with your code is that you are not waiting for the thread to finish before returning the value of <code>a</code>.  So, you are <em>probably</em> returning the contents of <code>a</code> <em>before</em> the thread has stored anything in it.</p>\n<p>In fact, this code is all a bit wrong-headed.  If you want <code>request(String)</code> to return the value retrieved from the server, the <code>request</code> calll can't complete until the after you have retrieved the data.  This is unavoidably synchronous.  Using a <code>Thread</code> to do the retrieving is actually achieving nothing.</p>\n<p>(Using <code>join()</code> as suggested &quot;fixes&quot; the symptom, but doesn't the pointless of using a thread here.)</p>\n<p>If you want this to be asynchronous, you could change <code>request</code> to return a <code>Future&lt;String&gt;</code> that the caller can use to get hold of the retrieved value at a later time.</p>\n<p>And it would be simpler and (probably) more efficient if you used an <code>Executor</code> rather than creating once-time-use threads for each &quot;request&quot;.</p>\n"},{"tags":[],"owner":{"account_id":3807206,"reputation":12673,"user_id":3159267,"display_name":"Rajan Kali"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1613546077,"creation_date":1613546077,"answer_id":66237283,"question_id":66236874,"body_markdown":"It is an asynchronous call, so your `return` statement wont wait until `thread` executes as it non blocking, you can use call back to get the `string` when and ever it is ready\r\n```Java\r\ninterface ResponseCallBack{\r\n   void onResponse(String a);\r\n   void onError(Exception e);\r\n}\r\n```\r\nthen pass this interface while calling your method\r\n```Java\r\npublic static void request(String request, ResponseCallBack responseCallBack) {\r\n    new Thread(() -&gt; {\r\n        try {\r\n            HttpURLConnection conn = (HttpURLConnection) new URL(request).openConnection();\r\n            conn.setRequestMethod(&quot;GET&quot;);\r\n            conn.setDoInput(true);\r\n            BufferedReader br = new BufferedReader(new InputStreamReader(conn.getInputStream()));\r\n            String line, text = &quot;&quot;;\r\n            while((line = br.readLine()) != null) {\r\n                text = line;\r\n            }\r\n            br.close();\r\n            responseCallBack.onResponse(text);\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n            responseCallBack.onError(e);\r\n        }\r\n    }).start();\r\n}\r\n```\r\nThen you can consume it using \r\n```Java\r\nrequest(&quot;&quot;, new ResponseCallBack() {\r\n        @Override\r\n        public void onResponse(String a) {\r\n            //here string will be available\r\n        }\r\n\r\n        @Override\r\n        public void onError(Exception e) {\r\n            //error in case something failed\r\n        }\r\n});\r\n```","title":"Java requests in thread","body":"<p>It is an asynchronous call, so your <code>return</code> statement wont wait until <code>thread</code> executes as it non blocking, you can use call back to get the <code>string</code> when and ever it is ready</p>\n<pre><code>interface ResponseCallBack{\n   void onResponse(String a);\n   void onError(Exception e);\n}\n</code></pre>\n<p>then pass this interface while calling your method</p>\n<pre><code>public static void request(String request, ResponseCallBack responseCallBack) {\n    new Thread(() -&gt; {\n        try {\n            HttpURLConnection conn = (HttpURLConnection) new URL(request).openConnection();\n            conn.setRequestMethod(&quot;GET&quot;);\n            conn.setDoInput(true);\n            BufferedReader br = new BufferedReader(new InputStreamReader(conn.getInputStream()));\n            String line, text = &quot;&quot;;\n            while((line = br.readLine()) != null) {\n                text = line;\n            }\n            br.close();\n            responseCallBack.onResponse(text);\n        } catch (IOException e) {\n            e.printStackTrace();\n            responseCallBack.onError(e);\n        }\n    }).start();\n}\n</code></pre>\n<p>Then you can consume it using</p>\n<pre><code>request(&quot;&quot;, new ResponseCallBack() {\n        @Override\n        public void onResponse(String a) {\n            //here string will be available\n        }\n\n        @Override\n        public void onError(Exception e) {\n            //error in case something failed\n        }\n});\n</code></pre>\n"}],"owner":{"account_id":20468283,"reputation":11,"user_id":15019302,"display_name":"IAmSoCool"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1239,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":66237283,"answer_count":2,"score":1,"last_activity_date":1693599085,"creation_date":1613543994,"question_id":66236874,"body_markdown":"I am stuck in this problem, I am using thread and http request to fetch data, but my method always returns either empty string or response of last request. Here is my code:\r\n\r\n    static String a = &quot;&quot;;\r\n\tpublic static String request(String request) {\r\n\t\tnew Thread(() -&gt; {\r\n\t\t\ttry {\r\n\t\t\t\tHttpURLConnection conn = (HttpURLConnection) new URL(request).openConnection();\r\n\t\t\t\tconn.setRequestMethod(&quot;GET&quot;);\r\n\t\t\t\tconn.setDoInput(true);\r\n\t\t\t\tBufferedReader br = new BufferedReader(new InputStreamReader(conn.getInputStream()));\r\n\t\t\t\tString line, text = &quot;&quot;;\r\n\t\t\t\twhile((line = br.readLine()) != null) {\r\n\t\t\t\t\ttext = line;\r\n\t\t\t\t}\r\n\t\t\t\tbr.close();\r\n\t\t\t\ta = text;\r\n\t\t\t} catch (IOException e) {\r\n\t\t\t\te.printStackTrace();\r\n\t\t\t}\r\n\t\t}).start();\r\n\t\treturn a;\r\n\t}","title":"Java requests in thread","body":"<p>I am stuck in this problem, I am using thread and http request to fetch data, but my method always returns either empty string or response of last request. Here is my code:</p>\n<pre><code>static String a = &quot;&quot;;\npublic static String request(String request) {\n    new Thread(() -&gt; {\n        try {\n            HttpURLConnection conn = (HttpURLConnection) new URL(request).openConnection();\n            conn.setRequestMethod(&quot;GET&quot;);\n            conn.setDoInput(true);\n            BufferedReader br = new BufferedReader(new InputStreamReader(conn.getInputStream()));\n            String line, text = &quot;&quot;;\n            while((line = br.readLine()) != null) {\n                text = line;\n            }\n            br.close();\n            a = text;\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }).start();\n    return a;\n}\n</code></pre>\n"},{"tags":["java"],"answers":[{"comments":[{"owner":{"account_id":1148924,"reputation":839,"user_id":1131057,"accept_rate":75,"display_name":"crig"},"score":0,"creation_date":1631903431,"post_id":69227961,"comment_id":122358583,"body_markdown":"this^  Also, add System outs after you calculate everything and see what your calculations show. For instance, I think the formula determine the dollars is incorrect. Put a system out to see what your calculation produces and go from there.","body":"this^  Also, add System outs after you calculate everything and see what your calculations show. For instance, I think the formula determine the dollars is incorrect. Put a system out to see what your calculation produces and go from there."}],"tags":[],"owner":{"account_id":5519,"reputation":70083,"user_id":8922,"accept_rate":75,"display_name":"Sebastian Redl"},"comment_count":1,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1631902916,"creation_date":1631902916,"answer_id":69227961,"question_id":69227906,"body_markdown":"Your mistake is trying overly complicated formulas to calculate the coin amounts.\r\n\r\nJust do what you would do in the real world: grab full dollars until that&#39;s no longer possible. See how much is left. Grab quarters until that&#39;s no longer possible. See how much is left. And so on.","title":"Exact Change with Java","body":"<p>Your mistake is trying overly complicated formulas to calculate the coin amounts.</p>\n<p>Just do what you would do in the real world: grab full dollars until that's no longer possible. See how much is left. Grab quarters until that's no longer possible. See how much is left. And so on.</p>\n"},{"tags":[],"owner":{"account_id":23423410,"reputation":11,"user_id":17483246,"display_name":"Aly Mos"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637620493,"creation_date":1637620493,"answer_id":70073194,"question_id":69227906,"body_markdown":"So in defining int&#39;s I would change the logic of your formula after the dollar, and first lines for singular use should be == not &gt;= but I would suggest this code:\r\n\r\n    import java.util.Scanner; \r\n    \r\n    public class LabProgram {\r\n       public static void main(String[] args) {\r\n          Scanner scnr = new Scanner(System.in);\r\n          \r\n          int cents = scnr.nextInt();\r\n    \r\n          int numDollars = (cents / 100) % 100;\r\n          int numQuarters = (cents / 25) % 25;\r\n          int numDimes    = (cents / 10) % 10;\r\n          int numNickels  = ((cents / 5) % 5);\r\n          int numPennies  = ((cents / 1) % 1);\r\n    \r\n          // no change\r\n          if (cents == 0) {\r\n             System.out.println(&quot;No change&quot;);\r\n          }\r\n          \r\n          // dollars\r\n          if (numDollars &lt; 2 &amp;&amp; numDollars == 1) {\r\n             System.out.println(numDollars + &quot; Dollar&quot;);\r\n          }\r\n          \r\n          else if (numDollars &gt;= 2) {\r\n              System.out.println(numDollars + &quot; Dollars&quot;);\r\n          }\r\n          \r\n          // quarters\r\n          if (numQuarters &lt; 2 &amp;&amp; numQuarters == 1) {\r\n              System.out.println(numQuarters + &quot; Quarter&quot;);\r\n          }\r\n          \r\n          else if (numQuarters &gt;= 2) {\r\n              System.out.println(numQuarters + &quot; Quarters&quot;);\r\n          }\r\n          \r\n          // dimes      \r\n          if (numDimes &lt; 2 &amp;&amp; numDimes == 1) {\r\n              System.out.println(numDimes + &quot; Dime&quot;);\r\n          }\r\n          \r\n          else if (numDimes &gt;= 2) {\r\n              System.out.println(numDimes + &quot; Dimes&quot;);\r\n          }\r\n          \r\n          // nickels      \r\n          if (numNickels &lt; 2 &amp;&amp; numNickels == 1) {\r\n              System.out.println(numNickels + &quot; Nickel&quot;);\r\n          }\r\n          \r\n          else if (numNickels &gt;= 2) {\r\n              System.out.println(numNickels + &quot; Nickels&quot;);\r\n          }\r\n          \r\n          // pennies      \r\n          if (numPennies &lt; 2 &amp;&amp; numPennies == 1) {\r\n              System.out.println(numPennies + &quot; Penny&quot;);\r\n          }\r\n          \r\n          else if (numPennies &gt;= 2) {\r\n              System.out.println(numPennies + &quot; Pennies&quot;);\r\n          }\r\n          \r\n          \r\n       }\r\n    }\r\n\r\n","title":"Exact Change with Java","body":"<p>So in defining int's I would change the logic of your formula after the dollar, and first lines for singular use should be == not &gt;= but I would suggest this code:</p>\n<pre><code>import java.util.Scanner; \n\npublic class LabProgram {\n   public static void main(String[] args) {\n      Scanner scnr = new Scanner(System.in);\n      \n      int cents = scnr.nextInt();\n\n      int numDollars = (cents / 100) % 100;\n      int numQuarters = (cents / 25) % 25;\n      int numDimes    = (cents / 10) % 10;\n      int numNickels  = ((cents / 5) % 5);\n      int numPennies  = ((cents / 1) % 1);\n\n      // no change\n      if (cents == 0) {\n         System.out.println(&quot;No change&quot;);\n      }\n      \n      // dollars\n      if (numDollars &lt; 2 &amp;&amp; numDollars == 1) {\n         System.out.println(numDollars + &quot; Dollar&quot;);\n      }\n      \n      else if (numDollars &gt;= 2) {\n          System.out.println(numDollars + &quot; Dollars&quot;);\n      }\n      \n      // quarters\n      if (numQuarters &lt; 2 &amp;&amp; numQuarters == 1) {\n          System.out.println(numQuarters + &quot; Quarter&quot;);\n      }\n      \n      else if (numQuarters &gt;= 2) {\n          System.out.println(numQuarters + &quot; Quarters&quot;);\n      }\n      \n      // dimes      \n      if (numDimes &lt; 2 &amp;&amp; numDimes == 1) {\n          System.out.println(numDimes + &quot; Dime&quot;);\n      }\n      \n      else if (numDimes &gt;= 2) {\n          System.out.println(numDimes + &quot; Dimes&quot;);\n      }\n      \n      // nickels      \n      if (numNickels &lt; 2 &amp;&amp; numNickels == 1) {\n          System.out.println(numNickels + &quot; Nickel&quot;);\n      }\n      \n      else if (numNickels &gt;= 2) {\n          System.out.println(numNickels + &quot; Nickels&quot;);\n      }\n      \n      // pennies      \n      if (numPennies &lt; 2 &amp;&amp; numPennies == 1) {\n          System.out.println(numPennies + &quot; Penny&quot;);\n      }\n      \n      else if (numPennies &gt;= 2) {\n          System.out.println(numPennies + &quot; Pennies&quot;);\n      }\n      \n      \n   }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23423410,"reputation":11,"user_id":17483246,"display_name":"Aly Mos"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1637624402,"creation_date":1637624402,"answer_id":70073683,"question_id":69227906,"body_markdown":"So in defining int&#39;s I would change the logic of your formula after the dollar, and first lines for singular use should be == not &gt;= but I would suggest this code:\r\n\r\n    import java.util.Scanner; \r\n    \r\n    public class LabProgram {\r\n       public static void main(String[] args) {\r\n          Scanner scnr = new Scanner(System.in);\r\n          \r\n          int cents = scnr.nextInt();\r\n    \r\n          int numDollars = (cents / 100) % 100;\r\n          int numQuarters = (cents % 100) / 25;\r\n          int numDimes    = (cents % 25) / 10;\r\n          int numNickels  = (((cents % 25) % 10) / 5);\r\n          int numPennies  = (((cents % 25) % 10) % 5);\r\n    \r\n          // no change\r\n          if (cents == 0) {\r\n             System.out.println(&quot;No change&quot;);\r\n          }\r\n          \r\n          // dollars\r\n          if (numDollars &lt; 2 &amp;&amp; numDollars == 1) {\r\n             System.out.println(numDollars + &quot; Dollar&quot;);\r\n          }\r\n          \r\n          else if (numDollars &gt;= 2) {\r\n              System.out.println(numDollars + &quot; Dollars&quot;);\r\n          }\r\n          \r\n          // quarters\r\n          if (numQuarters &lt; 2 &amp;&amp; numQuarters == 1) {\r\n              System.out.println(numQuarters + &quot; Quarter&quot;);\r\n          }\r\n          \r\n          else if (numQuarters &gt;= 2) {\r\n              System.out.println(numQuarters + &quot; Quarters&quot;);\r\n          }\r\n          \r\n          // dimes      \r\n          if (numDimes &lt; 2 &amp;&amp; numDimes == 1) {\r\n              System.out.println(numDimes + &quot; Dime&quot;);\r\n          }\r\n          \r\n          else if (numDimes &gt;= 2) {\r\n              System.out.println(numDimes + &quot; Dimes&quot;);\r\n          }\r\n          \r\n          // nickels      \r\n          if (numNickels &lt; 2 &amp;&amp; numNickels == 1) {\r\n              System.out.println(numNickels + &quot; Nickel&quot;);\r\n          }\r\n          \r\n          else if (numNickels &gt;= 2) {\r\n              System.out.println(numNickels + &quot; Nickels&quot;);\r\n          }\r\n          \r\n          // pennies      \r\n          if (numPennies &lt; 2 &amp;&amp; numPennies == 1) {\r\n              System.out.println(numPennies + &quot; Penny&quot;);\r\n          }\r\n          \r\n          else if (numPennies &gt;= 2) {\r\n              System.out.println(numPennies + &quot; Pennies&quot;);\r\n          }\r\n          \r\n          \r\n       }\r\n    }\r\n\r\n","title":"Exact Change with Java","body":"<p>So in defining int's I would change the logic of your formula after the dollar, and first lines for singular use should be == not &gt;= but I would suggest this code:</p>\n<pre><code>import java.util.Scanner; \n\npublic class LabProgram {\n   public static void main(String[] args) {\n      Scanner scnr = new Scanner(System.in);\n      \n      int cents = scnr.nextInt();\n\n      int numDollars = (cents / 100) % 100;\n      int numQuarters = (cents % 100) / 25;\n      int numDimes    = (cents % 25) / 10;\n      int numNickels  = (((cents % 25) % 10) / 5);\n      int numPennies  = (((cents % 25) % 10) % 5);\n\n      // no change\n      if (cents == 0) {\n         System.out.println(&quot;No change&quot;);\n      }\n      \n      // dollars\n      if (numDollars &lt; 2 &amp;&amp; numDollars == 1) {\n         System.out.println(numDollars + &quot; Dollar&quot;);\n      }\n      \n      else if (numDollars &gt;= 2) {\n          System.out.println(numDollars + &quot; Dollars&quot;);\n      }\n      \n      // quarters\n      if (numQuarters &lt; 2 &amp;&amp; numQuarters == 1) {\n          System.out.println(numQuarters + &quot; Quarter&quot;);\n      }\n      \n      else if (numQuarters &gt;= 2) {\n          System.out.println(numQuarters + &quot; Quarters&quot;);\n      }\n      \n      // dimes      \n      if (numDimes &lt; 2 &amp;&amp; numDimes == 1) {\n          System.out.println(numDimes + &quot; Dime&quot;);\n      }\n      \n      else if (numDimes &gt;= 2) {\n          System.out.println(numDimes + &quot; Dimes&quot;);\n      }\n      \n      // nickels      \n      if (numNickels &lt; 2 &amp;&amp; numNickels == 1) {\n          System.out.println(numNickels + &quot; Nickel&quot;);\n      }\n      \n      else if (numNickels &gt;= 2) {\n          System.out.println(numNickels + &quot; Nickels&quot;);\n      }\n      \n      // pennies      \n      if (numPennies &lt; 2 &amp;&amp; numPennies == 1) {\n          System.out.println(numPennies + &quot; Penny&quot;);\n      }\n      \n      else if (numPennies &gt;= 2) {\n          System.out.println(numPennies + &quot; Pennies&quot;);\n      }\n      \n      \n   }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":27912885,"reputation":1,"user_id":21314674,"display_name":"Gage"},"score":0,"creation_date":1677706262,"post_id":75609043,"comment_id":133393385,"body_markdown":"dollars = userInput/100;\n         userInput = userInput - dollars*100;\n     \n         quarters = userInput/25;\n         userInput = userInput - quarters*25;\n     \n         dimes = userInput/10;\n         userInput = userInput - dimes*10;\n     \n         nickels = userInput/5;\n         userInput = userInput - nickels*5;   //Had to change the division, forgot to do that when copy and pasting.","body":"dollars = userInput/100;          userInput = userInput - dollars*100;                quarters = userInput/25;          userInput = userInput - quarters*25;                dimes = userInput/10;          userInput = userInput - dimes*10;                nickels = userInput/5;          userInput = userInput - nickels*5;   //Had to change the division, forgot to do that when copy and pasting."}],"tags":[],"owner":{"account_id":27912885,"reputation":1,"user_id":21314674,"display_name":"Gage"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677705040,"creation_date":1677705040,"answer_id":75609043,"question_id":69227906,"body_markdown":"I was thinking something like this. But for some reason i am getting only answers in dollars and pennies. It is skipping the other 3 if statements. \r\n\r\n    import java.util.Scanner; \r\n\r\n    public class LabProgram {\r\n       public static void main(String[] args) {\r\n          int pennies;\r\n          int dollars;\r\n          int quarters;\r\n          int nickels;\r\n          int dimes;\r\n          int userInput;\r\n      \r\n          Scanner scnr = new Scanner(System.in); \r\n          userInput = scnr.nextInt();\r\n      \r\n          if(userInput != 0){\r\n         \r\n      \r\n             dollars = userInput/100;\r\n             userInput = userInput - dollars*100;\r\n         \r\n             quarters = userInput/100;\r\n             userInput = userInput - quarters*25;\r\n         \r\n             dimes = userInput/100;\r\n             userInput = userInput - dimes*10;\r\n         \r\n             nickels = userInput/100;\r\n             userInput = userInput - nickels*5;\r\n         \r\n             pennies = userInput;\r\n         \r\n         \r\n             if ( dollars == 1){\r\n                System.out.println (&quot;1 Dollar&quot;);\r\n             }\r\n             else if ( dollars &gt; 1){\r\n                System.out.println (dollars+&quot; Dollars&quot;);\r\n             }\r\n         \r\n             if ( quarters == 1){\r\n                System.out.println (&quot;1 Quarter&quot;);\r\n             }\r\n             else if ( quarters &gt; 1){\r\n                System.out.println (quarters+&quot; Quarters&quot;);\r\n             }\r\n         \r\n             if ( dimes == 1){\r\n                System.out.println (&quot;1 Dime&quot;);\r\n             }\r\n             else if ( dimes &gt; 1){\r\n                System.out.println (dimes+&quot; Dimes&quot;);\r\n             }\r\n         \r\n             if ( nickels == 1){\r\n                System.out.println (&quot;1 Nickel&quot;);\r\n             }\r\n             else if ( nickels &gt; 1){\r\n                System.out.println (nickels+&quot; Nickels&quot;);\r\n             }\r\n             if ( pennies == 1){\r\n                System.out.println (&quot;1 Penny&quot;);\r\n             }\r\n             else if ( pennies &gt; 1){\r\n                System.out.println (pennies+&quot; Pennies&quot;);\r\n             }\r\n          }\r\n          else {\r\n           System.out.println(&quot;No change&quot;);  \r\n          }\r\n\r\n       }\r\n    }\r\n","title":"Exact Change with Java","body":"<p>I was thinking something like this. But for some reason i am getting only answers in dollars and pennies. It is skipping the other 3 if statements.</p>\n<pre><code>import java.util.Scanner; \n\npublic class LabProgram {\n   public static void main(String[] args) {\n      int pennies;\n      int dollars;\n      int quarters;\n      int nickels;\n      int dimes;\n      int userInput;\n  \n      Scanner scnr = new Scanner(System.in); \n      userInput = scnr.nextInt();\n  \n      if(userInput != 0){\n     \n  \n         dollars = userInput/100;\n         userInput = userInput - dollars*100;\n     \n         quarters = userInput/100;\n         userInput = userInput - quarters*25;\n     \n         dimes = userInput/100;\n         userInput = userInput - dimes*10;\n     \n         nickels = userInput/100;\n         userInput = userInput - nickels*5;\n     \n         pennies = userInput;\n     \n     \n         if ( dollars == 1){\n            System.out.println (&quot;1 Dollar&quot;);\n         }\n         else if ( dollars &gt; 1){\n            System.out.println (dollars+&quot; Dollars&quot;);\n         }\n     \n         if ( quarters == 1){\n            System.out.println (&quot;1 Quarter&quot;);\n         }\n         else if ( quarters &gt; 1){\n            System.out.println (quarters+&quot; Quarters&quot;);\n         }\n     \n         if ( dimes == 1){\n            System.out.println (&quot;1 Dime&quot;);\n         }\n         else if ( dimes &gt; 1){\n            System.out.println (dimes+&quot; Dimes&quot;);\n         }\n     \n         if ( nickels == 1){\n            System.out.println (&quot;1 Nickel&quot;);\n         }\n         else if ( nickels &gt; 1){\n            System.out.println (nickels+&quot; Nickels&quot;);\n         }\n         if ( pennies == 1){\n            System.out.println (&quot;1 Penny&quot;);\n         }\n         else if ( pennies &gt; 1){\n            System.out.println (pennies+&quot; Pennies&quot;);\n         }\n      }\n      else {\n       System.out.println(&quot;No change&quot;);  \n      }\n\n   }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"score":1,"creation_date":1693573880,"post_id":77021193,"comment_id":135782844,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/77021193/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":27056230,"reputation":1,"user_id":20608901,"display_name":"Abraham Mendez"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693598519,"creation_date":1693552543,"answer_id":77021193,"question_id":69227906,"body_markdown":"```java\r\nimport java.util.Scanner; \r\n\r\npublic class LabProgram {\r\n   public static void main(String[] args) {\r\n      \r\n      Scanner scnr = new Scanner(System.in);\r\n    \r\n      int userInput = scnr.nextInt();\r\n      \r\n      int change;\r\n     \r\n      int numDollars = (userInput / 100); \r\n      change = userInput % 100;\r\n      int numQuarters = (change / 25);\r\n      change = change % 25;\r\n      int numDimes = (change / 10);\r\n      change = change % 10;\r\n      int numNickels = (change / 5);\r\n      change = change % 5;\r\n      int numPennies = (change / 1);\r\n      change = change % 1;\r\n     \r\n      if (userInput &lt;= 0) {\r\n         System.out.println(&quot;No change&quot;);\r\n      }\r\n      else {\r\n         if (numDollars == 1) {\r\n            System.out.println(numDollars + &quot; Dollar&quot;);\r\n         }\r\n         else if (numDollars &gt; 1){\r\n            System.out.println(numDollars + &quot; Dollars&quot;);\r\n         }\r\n         \r\n         if (numQuarters == 1) {\r\n            System.out.println(numQuarters + &quot; Quarter&quot;);\r\n         }\r\n         else if (numQuarters &gt; 1) {\r\n            System.out.println(numQuarters + &quot; Quarters&quot;);\r\n         }\r\n         \r\n         if (numDimes == 1) {\r\n            System.out.println(numDimes + &quot; Dime&quot;);\r\n         }\r\n         else if (numDimes &gt; 1) {\r\n            System.out.println(numDimes + &quot; Dimes&quot;);\r\n         }\r\n         \r\n         if (numNickels == 1) {\r\n            System.out.println(numNickels + &quot; Nickel&quot;);\r\n         }\r\n         else if (numNickels &gt; 1) {\r\n            System.out.println(numNickels + &quot; Nickels&quot;);\r\n         }\r\n         \r\n         if (numPennies == 1) {\r\n            System.out.println(numPennies + &quot; Penny&quot;);\r\n         }\r\n         else if (numPennies &gt; 1) {\r\n            System.out.println(numPennies + &quot; Pennies&quot;);\r\n         }\r\n      }\r\n   }\r\n}\r\n```","title":"Exact Change with Java","body":"<pre class=\"lang-java prettyprint-override\"><code>import java.util.Scanner; \n\npublic class LabProgram {\n   public static void main(String[] args) {\n      \n      Scanner scnr = new Scanner(System.in);\n    \n      int userInput = scnr.nextInt();\n      \n      int change;\n     \n      int numDollars = (userInput / 100); \n      change = userInput % 100;\n      int numQuarters = (change / 25);\n      change = change % 25;\n      int numDimes = (change / 10);\n      change = change % 10;\n      int numNickels = (change / 5);\n      change = change % 5;\n      int numPennies = (change / 1);\n      change = change % 1;\n     \n      if (userInput &lt;= 0) {\n         System.out.println(&quot;No change&quot;);\n      }\n      else {\n         if (numDollars == 1) {\n            System.out.println(numDollars + &quot; Dollar&quot;);\n         }\n         else if (numDollars &gt; 1){\n            System.out.println(numDollars + &quot; Dollars&quot;);\n         }\n         \n         if (numQuarters == 1) {\n            System.out.println(numQuarters + &quot; Quarter&quot;);\n         }\n         else if (numQuarters &gt; 1) {\n            System.out.println(numQuarters + &quot; Quarters&quot;);\n         }\n         \n         if (numDimes == 1) {\n            System.out.println(numDimes + &quot; Dime&quot;);\n         }\n         else if (numDimes &gt; 1) {\n            System.out.println(numDimes + &quot; Dimes&quot;);\n         }\n         \n         if (numNickels == 1) {\n            System.out.println(numNickels + &quot; Nickel&quot;);\n         }\n         else if (numNickels &gt; 1) {\n            System.out.println(numNickels + &quot; Nickels&quot;);\n         }\n         \n         if (numPennies == 1) {\n            System.out.println(numPennies + &quot; Penny&quot;);\n         }\n         else if (numPennies &gt; 1) {\n            System.out.println(numPennies + &quot; Pennies&quot;);\n         }\n      }\n   }\n}\n</code></pre>\n"}],"owner":{"account_id":22783732,"reputation":27,"user_id":16939239,"display_name":"Tamara"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8823,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69227961,"answer_count":5,"score":0,"last_activity_date":1693598519,"creation_date":1631902581,"question_id":69227906,"body_markdown":"I am struggling with a homework assignment for a Java class. My code is listed below.&lt;br&gt;\r\nI am having a problem with my dollars and quarters and outputting correctly, I am not sure what the mistake is, with the quarters or dollars? For example, I am getting the error from my lab - &lt;br&gt;\r\n&gt;*&quot; Output differs. See highlights below.&lt;br&gt;\r\nInput: 141&lt;br&gt;\r\nYour output&lt;br&gt;\r\n1 Dollar\r\n1 Dime\r\n1 Nickel\r\n1 Penny&lt;br&gt;\r\nExpected output&lt;br&gt;\r\n1 Dollar\r\n1 Quarter\r\n1 Dime\r\n1 Nickel\r\n1 Penny &quot;&lt;br&gt;*\r\n\r\n\r\n&gt;*Input: 45&lt;br&gt;\r\nYour output&lt;br&gt;\r\n2 Dimes&lt;br&gt;\r\nExpected output&lt;br&gt;\r\n1 Quarter\r\n2 Dimes*\r\n\r\nThe prompt is as follows;&lt;br&gt;\r\n\r\n&gt;*Write a program with total change amount in pennies as an integer input, and output the change using the fewest coins, one coin type per line. The coin types are Dollars, Quarters, Dimes, Nickels, and Pennies. Use singular and plural coin names as appropriate, like 1 Penny vs. 2 Pennies.&lt;br&gt;*\r\n*Ex: If the input is:\r\n0&lt;br&gt;\r\nthe output is:&lt;br&gt;\r\nNo change&lt;br&gt;*\r\n*Ex: If the input is:\r\n45\r\nthe output is:&lt;br&gt;\r\n1 Quarter&lt;br&gt;\r\n2 Dimes* \r\n\r\n```\r\nimport java.util.Scanner; \r\n\r\npublic class LabProgram {\r\n   public static void main(String[] args) {\r\n      Scanner scnr = new Scanner(System.in);\r\n      \r\n    int cents = scnr.nextInt();\r\n\r\n    int numDollars = (cents / 100) % 100;\r\n    int numQuarters = (cents % 25) / 25;\r\n    int numDimes    = (cents % 25) / 10;\r\n    int numNickels  = ((cents % 25) % 10) / 5;\r\n    int numPennies  = ((cents % 25) % 10) % 5;\r\n\r\n// no change\r\n      if (cents == 0) {\r\n         System.out.println(&quot;No change&quot;);\r\n      }\r\n      \r\n// dollars\r\n      if (numDollars &lt; 2 &amp;&amp; numDollars &gt;=1) {\r\n      System.out.println(numDollars + &quot; Dollar&quot;);\r\n      }\r\n      \r\n      else if (numDollars &gt;=2) {\r\n      System.out.println(numDollars + &quot; Dollars&quot;);\r\n      }\r\n\r\n// quarters\r\n      if (numQuarters &lt; 2 &amp;&amp; numQuarters &gt;=1) {\r\n      System.out.println(numQuarters + &quot; Quarter&quot;);\r\n      }\r\n      \r\n      else if (numQuarters &gt;=2) {\r\n      System.out.println(numQuarters + &quot; Quarters&quot;);\r\n      }\r\n      \r\n// dimes      \r\n      if (numDimes &lt; 2 &amp;&amp; numDimes &gt;=1) {\r\n      System.out.println(numDimes + &quot; Dime&quot;);\r\n      }\r\n      \r\n      else if (numDimes &gt;=2) {\r\n      System.out.println(numDimes + &quot; Dimes&quot;);\r\n      }\r\n      \r\n// nickels      \r\n      if (numNickels &lt; 2 &amp;&amp; numNickels &gt;=1) {\r\n      System.out.println(numNickels + &quot; Nickel&quot;);\r\n      }\r\n      \r\n      else if (numNickels &gt;=2) {\r\n      System.out.println(numNickels + &quot; Nickels&quot;);\r\n      }\r\n\r\n// pennies      \r\n      if (numPennies &lt; 2 &amp;&amp; numPennies &gt;=1) {\r\n      System.out.println(numPennies + &quot; Penny&quot;);\r\n      }\r\n      \r\n      else if (numPennies &gt;=2) {\r\n      System.out.println(numPennies + &quot; Pennies&quot;);\r\n      }\r\n      \r\n      \r\n   }\r\n}\r\n```","title":"Exact Change with Java","body":"<p>I am struggling with a homework assignment for a Java class. My code is listed below.<br>\nI am having a problem with my dollars and quarters and outputting correctly, I am not sure what the mistake is, with the quarters or dollars? For example, I am getting the error from my lab - <br></p>\n<blockquote>\n<p><em>&quot; Output differs. See highlights below.<br>\nInput: 141<br>\nYour output<br>\n1 Dollar\n1 Dime\n1 Nickel\n1 Penny<br>\nExpected output<br>\n1 Dollar\n1 Quarter\n1 Dime\n1 Nickel\n1 Penny &quot;<br></em></p>\n</blockquote>\n<blockquote>\n<p><em>Input: 45<br>\nYour output<br>\n2 Dimes<br>\nExpected output<br>\n1 Quarter\n2 Dimes</em></p>\n</blockquote>\n<p>The prompt is as follows;<br></p>\n<blockquote>\n<p><em>Write a program with total change amount in pennies as an integer input, and output the change using the fewest coins, one coin type per line. The coin types are Dollars, Quarters, Dimes, Nickels, and Pennies. Use singular and plural coin names as appropriate, like 1 Penny vs. 2 Pennies.<br></em>\n<em>Ex: If the input is:\n0<br>\nthe output is:<br>\nNo change<br></em>\n<em>Ex: If the input is:\n45\nthe output is:<br>\n1 Quarter<br>\n2 Dimes</em></p>\n</blockquote>\n<pre><code>import java.util.Scanner; \n\npublic class LabProgram {\n   public static void main(String[] args) {\n      Scanner scnr = new Scanner(System.in);\n      \n    int cents = scnr.nextInt();\n\n    int numDollars = (cents / 100) % 100;\n    int numQuarters = (cents % 25) / 25;\n    int numDimes    = (cents % 25) / 10;\n    int numNickels  = ((cents % 25) % 10) / 5;\n    int numPennies  = ((cents % 25) % 10) % 5;\n\n// no change\n      if (cents == 0) {\n         System.out.println(&quot;No change&quot;);\n      }\n      \n// dollars\n      if (numDollars &lt; 2 &amp;&amp; numDollars &gt;=1) {\n      System.out.println(numDollars + &quot; Dollar&quot;);\n      }\n      \n      else if (numDollars &gt;=2) {\n      System.out.println(numDollars + &quot; Dollars&quot;);\n      }\n\n// quarters\n      if (numQuarters &lt; 2 &amp;&amp; numQuarters &gt;=1) {\n      System.out.println(numQuarters + &quot; Quarter&quot;);\n      }\n      \n      else if (numQuarters &gt;=2) {\n      System.out.println(numQuarters + &quot; Quarters&quot;);\n      }\n      \n// dimes      \n      if (numDimes &lt; 2 &amp;&amp; numDimes &gt;=1) {\n      System.out.println(numDimes + &quot; Dime&quot;);\n      }\n      \n      else if (numDimes &gt;=2) {\n      System.out.println(numDimes + &quot; Dimes&quot;);\n      }\n      \n// nickels      \n      if (numNickels &lt; 2 &amp;&amp; numNickels &gt;=1) {\n      System.out.println(numNickels + &quot; Nickel&quot;);\n      }\n      \n      else if (numNickels &gt;=2) {\n      System.out.println(numNickels + &quot; Nickels&quot;);\n      }\n\n// pennies      \n      if (numPennies &lt; 2 &amp;&amp; numPennies &gt;=1) {\n      System.out.println(numPennies + &quot; Penny&quot;);\n      }\n      \n      else if (numPennies &gt;=2) {\n      System.out.println(numPennies + &quot; Pennies&quot;);\n      }\n      \n      \n   }\n}\n</code></pre>\n"},{"tags":["java","console","exit"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1693592833,"post_id":77025294,"comment_id":135786362,"body_markdown":"You don&#39;t need to &quot;end the console&quot;. In fact don&#39;t call close on a `Scanner` opened on `System.in`. If you&#39;re talking about the &#39;black window&#39; your Java is running in, your app has no control over that","body":"You don&#39;t need to &quot;end the console&quot;. In fact don&#39;t call close on a <code>Scanner</code> opened on <code>System.in</code>. If you&#39;re talking about the &#39;black window&#39; your Java is running in, your app has no control over that"},{"owner":{"account_id":29347253,"reputation":13,"user_id":22485291,"display_name":"Burguel"},"score":0,"creation_date":1693593019,"post_id":77025294,"comment_id":135786388,"body_markdown":"@g00se\nNo I&#39;m using BlueJ for a school project and there we have the console that appears with ```System.out.println()```, this console I want to close...\nI know you can click on the `X` of the console window, but I want to do it automatically in the method when you click enter for example","body":"@g00se No I&#39;m using BlueJ for a school project and there we have the console that appears with <code>System.out.println()</code>, this console I want to close... I know you can click on the <code>X</code> of the console window, but I want to do it automatically in the method when you click enter for example"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1693646428,"post_id":77025294,"comment_id":135790404,"body_markdown":"If you&#39;re using Windows you can create a shortcut to your app to use `javaw.exe` and the console *will* close with the code you have now. Other OS consoles can probably be made to close too.","body":"If you&#39;re using Windows you can create a shortcut to your app to use <code>javaw.exe</code> and the console <i>will</i> close with the code you have now. Other OS consoles can probably be made to close too."}],"answers":[{"comments":[{"owner":{"account_id":29347253,"reputation":13,"user_id":22485291,"display_name":"Burguel"},"score":0,"creation_date":1693597568,"post_id":77025556,"comment_id":135787071,"body_markdown":"Thanks, for the long but understandable answer! And now I understand that I can&#39;t do it. Thanks again..","body":"Thanks, for the long but understandable answer! And now I understand that I can&#39;t do it. Thanks again.."}],"tags":[],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1693598438,"creation_date":1693596094,"answer_id":77025556,"question_id":77025294,"body_markdown":"## tl;dr\r\n\r\nNo, your Java app cannot control the outer shell app running in a console. Indeed, it makes no sense for your Java app to *want* to manipulate or kill that console.\r\n\r\n## Details\r\n\r\nThe console, where text appears and where the user types, is always under the control of another app, not your Java app. \r\n\r\nTo invoke a non-GUI Java app, you need to already be using a console. That console exists before your Java app runs. And that console exists after your Java app runs. Indeed, the console reports the ultimate result of your Java app — like any console app, your Java app reports an [exit code][1], an integer number generated as it exits. The exit code indicate whether the app ran successfully or not. For example:\r\n\r\n&gt;Process finished with exit code 0\r\n\r\nThe “outer” app providing the console can be:\r\n\r\n - A [shell][2] program within console software running via a [computer terminal][3] (in the old days)\r\n - A shell program within a console running within a [terminal emulator][4] app such as [*Terminal.app*][5] on macOS. \r\n - A shell program running within a console within a [window pane][6] of an [IDE][7]. \r\n\r\nThat last describes your situation in [BlueJ][8]. BlueJ is a specialized IDE that hides much of the elaborate ceremony involved in Java programming. \r\n\r\nBut the basic idea is the same: When you run your Java app, BlueJ constructs a console within its own application windowing, runs some kind of shell within that console, and executes your Java app. BlueJ is designed to hide the nitty-gritty details from you as a beginning student, but the actions underneath are essentially the same. \r\n\r\nYou can think of a computer as concentric circles: \r\n\r\n - In the core middle is the [CPU][9].\r\n - A ring outside that is the [operating system][10].\r\n - A further ring is a console app to interface with a human.\r\n - Next ring out is a shell app run by that console, such as [*zsh*][11], [*bash*][12], etc. The shell provides for convenient interactions with the human through a [command-line interface][13]. A shell is actually an app within the console; the human user can exit one shell and start another such as switching from *bash* to *zsh*. \r\n - Another ring outside that is any app invoked on the command-line interface of the shell. For example, the [*java*][14] [executable][15] (“command”) to run a [JVM][16], inside of which your Java code executes. Eventually your Java app ends, and the *java* command exits, returning an exit code to the shell app.\r\n - Optionally, a [GUI][17] can launch such as seen on a Mac, MS Windows, or Linux/BSD desktop computer. You can think of this as yet another outer ring. You can see GUI computers running the console during boot-up, showing console activity either by default or by alternate booting scenario.\r\n\r\n&#128073;&#127998; The point is: The console &amp; **shell app exist before, during, and after your Java app** execution. \r\n\r\nIn your case, BlueJ is constructing that console &amp; shell, and maintaining it before and after your Java app runs. So your Java app has no control over the creation/destruction of the console &amp; shell.\r\n\r\n\r\n----------\r\n\r\nBy the way, the Java team at Oracle, and the Java community, have been working on providing easier on-ramps for people new to Java.\r\n\r\n - [*JShell*][18] \r\n - [*JEP 330: Launch Single-File Source-Code Programs*][19]\r\n - [*JEP 445: Unnamed Classes and Instance Main Methods (Preview)*][20]\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Exit_status\r\n  [2]: https://en.wikipedia.org/wiki/Shell_(computing)\r\n  [3]: https://en.wikipedia.org/wiki/Computer_terminal\r\n  [4]: https://en.wikipedia.org/wiki/Computer_terminal#Emulation\r\n  [5]: https://en.wikipedia.org/wiki/Terminal_(macOS)\r\n  [6]: https://en.wikipedia.org/wiki/Paned_window_(computing)\r\n  [7]: https://en.wikipedia.org/wiki/Integrated_development_environment\r\n  [8]: https://en.wikipedia.org/wiki/BlueJ\r\n  [9]: https://en.wikipedia.org/wiki/Central_processing_unit\r\n  [10]: https://en.wikipedia.org/wiki/Operating_system\r\n  [11]: https://en.wikipedia.org/wiki/Z_shell\r\n  [12]: https://en.wikipedia.org/wiki/Bash_(Unix_shell)\r\n  [13]: https://en.wikipedia.org/wiki/Command-line_interface\r\n  [14]: https://docs.oracle.com/en/java/javase/20/docs/specs/man/java.html\r\n  [15]: https://en.wikipedia.org/wiki/Executable\r\n  [16]: https://en.wikipedia.org/wiki/Java_virtual_machine\r\n  [17]: https://en.wikipedia.org/wiki/Graphical_user_interface\r\n  [18]: https://en.wikipedia.org/wiki/JShell\r\n  [19]: https://openjdk.org/jeps/330\r\n  [20]: https://openjdk.org/jeps/445","title":"How to auto close the console in BlueJ","body":"<h2>tl;dr</h2>\n<p>No, your Java app cannot control the outer shell app running in a console. Indeed, it makes no sense for your Java app to <em>want</em> to manipulate or kill that console.</p>\n<h2>Details</h2>\n<p>The console, where text appears and where the user types, is always under the control of another app, not your Java app.</p>\n<p>To invoke a non-GUI Java app, you need to already be using a console. That console exists before your Java app runs. And that console exists after your Java app runs. Indeed, the console reports the ultimate result of your Java app — like any console app, your Java app reports an <a href=\"https://en.wikipedia.org/wiki/Exit_status\" rel=\"nofollow noreferrer\">exit code</a>, an integer number generated as it exits. The exit code indicate whether the app ran successfully or not. For example:</p>\n<blockquote>\n<p>Process finished with exit code 0</p>\n</blockquote>\n<p>The “outer” app providing the console can be:</p>\n<ul>\n<li>A <a href=\"https://en.wikipedia.org/wiki/Shell_(computing)\" rel=\"nofollow noreferrer\">shell</a> program within console software running via a <a href=\"https://en.wikipedia.org/wiki/Computer_terminal\" rel=\"nofollow noreferrer\">computer terminal</a> (in the old days)</li>\n<li>A shell program within a console running within a <a href=\"https://en.wikipedia.org/wiki/Computer_terminal#Emulation\" rel=\"nofollow noreferrer\">terminal emulator</a> app such as <a href=\"https://en.wikipedia.org/wiki/Terminal_(macOS)\" rel=\"nofollow noreferrer\"><em>Terminal.app</em></a> on macOS.</li>\n<li>A shell program running within a console within a <a href=\"https://en.wikipedia.org/wiki/Paned_window_(computing)\" rel=\"nofollow noreferrer\">window pane</a> of an <a href=\"https://en.wikipedia.org/wiki/Integrated_development_environment\" rel=\"nofollow noreferrer\">IDE</a>.</li>\n</ul>\n<p>That last describes your situation in <a href=\"https://en.wikipedia.org/wiki/BlueJ\" rel=\"nofollow noreferrer\">BlueJ</a>. BlueJ is a specialized IDE that hides much of the elaborate ceremony involved in Java programming.</p>\n<p>But the basic idea is the same: When you run your Java app, BlueJ constructs a console within its own application windowing, runs some kind of shell within that console, and executes your Java app. BlueJ is designed to hide the nitty-gritty details from you as a beginning student, but the actions underneath are essentially the same.</p>\n<p>You can think of a computer as concentric circles:</p>\n<ul>\n<li>In the core middle is the <a href=\"https://en.wikipedia.org/wiki/Central_processing_unit\" rel=\"nofollow noreferrer\">CPU</a>.</li>\n<li>A ring outside that is the <a href=\"https://en.wikipedia.org/wiki/Operating_system\" rel=\"nofollow noreferrer\">operating system</a>.</li>\n<li>A further ring is a console app to interface with a human.</li>\n<li>Next ring out is a shell app run by that console, such as <a href=\"https://en.wikipedia.org/wiki/Z_shell\" rel=\"nofollow noreferrer\"><em>zsh</em></a>, <a href=\"https://en.wikipedia.org/wiki/Bash_(Unix_shell)\" rel=\"nofollow noreferrer\"><em>bash</em></a>, etc. The shell provides for convenient interactions with the human through a <a href=\"https://en.wikipedia.org/wiki/Command-line_interface\" rel=\"nofollow noreferrer\">command-line interface</a>. A shell is actually an app within the console; the human user can exit one shell and start another such as switching from <em>bash</em> to <em>zsh</em>.</li>\n<li>Another ring outside that is any app invoked on the command-line interface of the shell. For example, the <a href=\"https://docs.oracle.com/en/java/javase/20/docs/specs/man/java.html\" rel=\"nofollow noreferrer\"><em>java</em></a> <a href=\"https://en.wikipedia.org/wiki/Executable\" rel=\"nofollow noreferrer\">executable</a> (“command”) to run a <a href=\"https://en.wikipedia.org/wiki/Java_virtual_machine\" rel=\"nofollow noreferrer\">JVM</a>, inside of which your Java code executes. Eventually your Java app ends, and the <em>java</em> command exits, returning an exit code to the shell app.</li>\n<li>Optionally, a <a href=\"https://en.wikipedia.org/wiki/Graphical_user_interface\" rel=\"nofollow noreferrer\">GUI</a> can launch such as seen on a Mac, MS Windows, or Linux/BSD desktop computer. You can think of this as yet another outer ring. You can see GUI computers running the console during boot-up, showing console activity either by default or by alternate booting scenario.</li>\n</ul>\n<p>👉🏾 The point is: The console &amp; <strong>shell app exist before, during, and after your Java app</strong> execution.</p>\n<p>In your case, BlueJ is constructing that console &amp; shell, and maintaining it before and after your Java app runs. So your Java app has no control over the creation/destruction of the console &amp; shell.</p>\n<hr />\n<p>By the way, the Java team at Oracle, and the Java community, have been working on providing easier on-ramps for people new to Java.</p>\n<ul>\n<li><a href=\"https://en.wikipedia.org/wiki/JShell\" rel=\"nofollow noreferrer\"><em>JShell</em></a></li>\n<li><a href=\"https://openjdk.org/jeps/330\" rel=\"nofollow noreferrer\"><em>JEP 330: Launch Single-File Source-Code Programs</em></a></li>\n<li><a href=\"https://openjdk.org/jeps/445\" rel=\"nofollow noreferrer\"><em>JEP 445: Unnamed Classes and Instance Main Methods (Preview)</em></a></li>\n</ul>\n"}],"owner":{"account_id":29347253,"reputation":13,"user_id":22485291,"display_name":"Burguel"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77025556,"answer_count":1,"score":1,"last_activity_date":1693598438,"creation_date":1693592364,"question_id":77025294,"body_markdown":"I want to exit only the console in a method.\r\n\r\nI tried this:\r\n```\r\nimport java.util.Scanner;\r\n\r\nScanner input = new Scanner(System.in);\r\nSystem.out.print(&quot;Press Enter to quit...&quot;);\r\ninput.nextLine();\r\n```\r\nand now I want only to end the console, I tried `System.exit(0);`, but this only &quot;deletes&quot; the object and the console stays. Is there any other command I can use?\r\n\r\n*I&#39;m using BlueJ for a school project and there we have the console that appears with* `System.out.println()`*, this console I want to close... I know you can click on the* `X` *of the console window, but I want to do it automatically in the method when you click enter for example*","title":"How to auto close the console in BlueJ","body":"<p>I want to exit only the console in a method.</p>\n<p>I tried this:</p>\n<pre><code>import java.util.Scanner;\n\nScanner input = new Scanner(System.in);\nSystem.out.print(&quot;Press Enter to quit...&quot;);\ninput.nextLine();\n</code></pre>\n<p>and now I want only to end the console, I tried <code>System.exit(0);</code>, but this only &quot;deletes&quot; the object and the console stays. Is there any other command I can use?</p>\n<p><em>I'm using BlueJ for a school project and there we have the console that appears with</em> <code>System.out.println()</code><em>, this console I want to close... I know you can click on the</em> <code>X</code> <em>of the console window, but I want to do it automatically in the method when you click enter for example</em></p>\n"},{"tags":["java","android-studio","gradle"],"comments":[{"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"score":0,"creation_date":1693580933,"post_id":77024210,"comment_id":135784357,"body_markdown":"`7.4.0` is actually _later_ than `7.4.0-alpha05` because release versions always come _after_ alpha/beta/preview versions.","body":"<code>7.4.0</code> is actually <i>later</i> than <code>7.4.0-alpha05</code> because release versions always come <i>after</i> alpha/beta/preview versions."}],"answers":[{"tags":[],"owner":{"account_id":288740,"reputation":36435,"user_id":589329,"accept_rate":40,"display_name":"Vampire"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693598014,"creation_date":1693598014,"answer_id":77025699,"question_id":77024210,"body_markdown":"2/3 of your question is your answer twice.  \r\nDepending on point of view, either your Android Studio is too old, or your Android Gradle plugin is too new.  \r\nA release version (7.4.0) is of course newer than a pre-release version (7.4.0-alpha05).","title":"&quot;The project is using an incompatible version (AGP 7.4.0) of the Android Gradle plugin. Latest supported version is AGP 7.4.0-alpha05 !:&amp;&#233;&quot;&#39;(q&#224;&#231;xxc;&quot;:","body":"<p>2/3 of your question is your answer twice.<br />\nDepending on point of view, either your Android Studio is too old, or your Android Gradle plugin is too new.<br />\nA release version (7.4.0) is of course newer than a pre-release version (7.4.0-alpha05).</p>\n"}],"owner":{"account_id":29346024,"reputation":1,"user_id":22484322,"display_name":"UvaxL"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":118,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1693598014,"creation_date":1693580705,"question_id":77024210,"body_markdown":"when i try to open a project\r\n\r\ni get this error in my android studio projct : \r\n\r\nThe project is using an incompatible version (AGP 7.4.0) of the Android Gradle plugin. Latest supported version is AGP 7.4.0-alpha05\r\n\r\nWhere exactly is the error ","title":"&quot;The project is using an incompatible version (AGP 7.4.0) of the Android Gradle plugin. Latest supported version is AGP 7.4.0-alpha05 !:&amp;&#233;&quot;&#39;(q&#224;&#231;xxc;&quot;:","body":"<p>when i try to open a project</p>\n<p>i get this error in my android studio projct :</p>\n<p>The project is using an incompatible version (AGP 7.4.0) of the Android Gradle plugin. Latest supported version is AGP 7.4.0-alpha05</p>\n<p>Where exactly is the error</p>\n"},{"tags":["java","calendar","timezone"],"answers":[{"tags":[],"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1435593237,"creation_date":1435593237,"answer_id":31120213,"question_id":31120039,"body_markdown":"You&#39;re calling `getTime()` to get a `Date` instance, and then calling `toString()` on that, implicitly - that will *always* use the system local time zone.\r\n\r\nYou want to use `SimpleDateFormat` so that you can control the time zone used for formatting. For example:\r\n\r\n    SimpleDateFormat formatter = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm z&quot;, Locale.US);\r\n    formatter.setTimeZone(depart.getTimeZone());\r\n    System.out.println(&quot;Depart: &quot; + formatter.format(depart.getTime()));\r\n    formatter.setTimeZone(arrive.getTimeZone());\r\n    System.out.println(&quot;Arrive: &quot; + formatter.format(arrive.getTime()));\r\n","title":"Using 2 Calendar class instances to get time difference","body":"<p>You're calling <code>getTime()</code> to get a <code>Date</code> instance, and then calling <code>toString()</code> on that, implicitly - that will <em>always</em> use the system local time zone.</p>\n\n<p>You want to use <code>SimpleDateFormat</code> so that you can control the time zone used for formatting. For example:</p>\n\n<pre><code>SimpleDateFormat formatter = new SimpleDateFormat(\"yyyy-MM-dd HH:mm z\", Locale.US);\nformatter.setTimeZone(depart.getTimeZone());\nSystem.out.println(\"Depart: \" + formatter.format(depart.getTime()));\nformatter.setTimeZone(arrive.getTimeZone());\nSystem.out.println(\"Arrive: \" + formatter.format(arrive.getTime()));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":740820,"reputation":47963,"user_id":2353911,"accept_rate":100,"display_name":"Mena"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1435593504,"creation_date":1435593504,"answer_id":31120302,"question_id":31120039,"body_markdown":"You can use `DateFormat`s to present your dates as you wish:\r\n\r\n    DateFormat departDF = DateFormat.getDateTimeInstance(\r\n        DateFormat.LONG, DateFormat.LONG, Locale.US\r\n    );\r\n    departDF.setTimeZone(depart.getTimeZone());\r\n    System.out.println(departDF.format(depart.getTime()));\r\n    DateFormat arriveDF = DateFormat.getDateTimeInstance(\r\n        //                                change to US if you want them homologated\r\n        //                                it won&#39;t change the time zone info or date/time\r\n        DateFormat.LONG, DateFormat.LONG, Locale.GERMANY\r\n    );\r\n    arriveDF.setTimeZone(arrive.getTimeZone());\r\n    System.out.println(arriveDF.format(arrive.getTime()));\r\n\r\n**Output**\r\n\r\n    July 15, 2015 5:35:43 PM CDT\r\n    16. Juli 2015 09:50:43 CEST","title":"Using 2 Calendar class instances to get time difference","body":"<p>You can use <code>DateFormat</code>s to present your dates as you wish:</p>\n\n<pre><code>DateFormat departDF = DateFormat.getDateTimeInstance(\n    DateFormat.LONG, DateFormat.LONG, Locale.US\n);\ndepartDF.setTimeZone(depart.getTimeZone());\nSystem.out.println(departDF.format(depart.getTime()));\nDateFormat arriveDF = DateFormat.getDateTimeInstance(\n    //                                change to US if you want them homologated\n    //                                it won't change the time zone info or date/time\n    DateFormat.LONG, DateFormat.LONG, Locale.GERMANY\n);\narriveDF.setTimeZone(arrive.getTimeZone());\nSystem.out.println(arriveDF.format(arrive.getTime()));\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>July 15, 2015 5:35:43 PM CDT\n16. Juli 2015 09:50:43 CEST\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2179728,"reputation":73077,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1693597346,"creation_date":1693589458,"answer_id":77025050,"question_id":31120039,"body_markdown":"&gt; I am using the Calendar library within Java to try and figure out a\r\n&gt; problem with my application\r\n\r\nYou should have used `java.time` API which had been already in use for more than a year when you posted your question.\r\n\r\njava.time\r\n--\r\nThe `java.util` date-time API and their corresponding parsing/formatting type, `SimpleDateFormat` are outdated and error-prone. In March 2014, the [modern Date-Time API](https://www.oracle.com/technical-resources/articles/java/jf14-Date-Time.html) supplanted the legacy date-time API. Since then, it has been strongly recommended to switch to `java.time`, the modern date-time API.\r\n\r\n&gt; ... leaving at 5:35 pm on 7/15/2015 from Chicago, while arrive is\r\n&gt; landing at 9:50 am on 7/16/15 in Berlin, Germany ...\r\n&gt; ... to display the travel duration\r\n\r\nYou can create `ZonedDateTime` instances and find the `Duration` between them. \r\n\r\n**Demo:**\r\n\r\n    class Main {\r\n        public static void main(String[] args) {\r\n            ZonedDateTime depart = ZonedDateTime.of(LocalDateTime.of(2015, 7, 15, 17, 35), ZoneId.of(&quot;America/Chicago&quot;));\r\n            ZonedDateTime arrive = ZonedDateTime.of(LocalDateTime.of(2015, 7, 16, 9, 50), ZoneId.of(&quot;Europe/Berlin&quot;));\r\n            Duration duration = Duration.between(depart, arrive);\r\n            System.out.println(&quot;Depart: &quot; + depart);\r\n            System.out.println(&quot;Arrive: &quot; + arrive);\r\n            System.out.printf(&quot;Flight duration: %d hours %d minutes%n&quot;, duration.toHoursPart(), duration.toMinutesPart());\r\n    \r\n            //An example of a custom format\r\n            DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;EEE MMM dd HH:mm:ss z uuuu&quot;, Locale.ENGLISH);\r\n            System.out.println(depart.format(formatter));\r\n        }\r\n    }\r\n\r\n**Output:**\r\n\r\n    Depart: 2015-07-15T17:35-05:00[America/Chicago]\r\n    Arrive: 2015-07-16T09:50+02:00[Europe/Berlin]\r\n    Flight duration: 9 hours 15 minutes\r\n    Wed Jul 15 17:35:00 CDT 2015\r\n\r\n[Online Demo](https://ideone.com/OUyAcS)\r\n\r\nLearn about the modern date-time API from **[Trail: Date Time](https://docs.oracle.com/javase/tutorial/datetime/index.html)**","title":"Using 2 Calendar class instances to get time difference","body":"<blockquote>\n<p>I am using the Calendar library within Java to try and figure out a\nproblem with my application</p>\n</blockquote>\n<p>You should have used <code>java.time</code> API which had been already in use for more than a year when you posted your question.</p>\n<h2>java.time</h2>\n<p>The <code>java.util</code> date-time API and their corresponding parsing/formatting type, <code>SimpleDateFormat</code> are outdated and error-prone. In March 2014, the <a href=\"https://www.oracle.com/technical-resources/articles/java/jf14-Date-Time.html\" rel=\"nofollow noreferrer\">modern Date-Time API</a> supplanted the legacy date-time API. Since then, it has been strongly recommended to switch to <code>java.time</code>, the modern date-time API.</p>\n<blockquote>\n<p>... leaving at 5:35 pm on 7/15/2015 from Chicago, while arrive is\nlanding at 9:50 am on 7/16/15 in Berlin, Germany ...\n... to display the travel duration</p>\n</blockquote>\n<p>You can create <code>ZonedDateTime</code> instances and find the <code>Duration</code> between them.</p>\n<p><strong>Demo:</strong></p>\n<pre><code>class Main {\n    public static void main(String[] args) {\n        ZonedDateTime depart = ZonedDateTime.of(LocalDateTime.of(2015, 7, 15, 17, 35), ZoneId.of(&quot;America/Chicago&quot;));\n        ZonedDateTime arrive = ZonedDateTime.of(LocalDateTime.of(2015, 7, 16, 9, 50), ZoneId.of(&quot;Europe/Berlin&quot;));\n        Duration duration = Duration.between(depart, arrive);\n        System.out.println(&quot;Depart: &quot; + depart);\n        System.out.println(&quot;Arrive: &quot; + arrive);\n        System.out.printf(&quot;Flight duration: %d hours %d minutes%n&quot;, duration.toHoursPart(), duration.toMinutesPart());\n\n        //An example of a custom format\n        DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;EEE MMM dd HH:mm:ss z uuuu&quot;, Locale.ENGLISH);\n        System.out.println(depart.format(formatter));\n    }\n}\n</code></pre>\n<p><strong>Output:</strong></p>\n<pre><code>Depart: 2015-07-15T17:35-05:00[America/Chicago]\nArrive: 2015-07-16T09:50+02:00[Europe/Berlin]\nFlight duration: 9 hours 15 minutes\nWed Jul 15 17:35:00 CDT 2015\n</code></pre>\n<p><a href=\"https://ideone.com/OUyAcS\" rel=\"nofollow noreferrer\">Online Demo</a></p>\n<p>Learn about the modern date-time API from <strong><a href=\"https://docs.oracle.com/javase/tutorial/datetime/index.html\" rel=\"nofollow noreferrer\">Trail: Date Time</a></strong></p>\n"}],"owner":{"account_id":5092537,"reputation":7,"user_id":4085116,"accept_rate":80,"display_name":"Joshua"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":334,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":31120213,"answer_count":3,"score":0,"last_activity_date":1693597346,"creation_date":1435592753,"question_id":31120039,"body_markdown":"I am using the Calendar library within Java to try and figure out a problem with my application:\r\n\r\nI have two Calendar instances, `depart` and `arrive`. \r\n\r\n`depart` is leaving at **5:35 pm on 7/15/2015** from Chicago, while `arrive` is landing at **9:50 am on 7/16/15** in Berlin, Germany.\r\n\r\nMy current code to display the travel duration is:\r\n\r\n        Calendar depart = Calendar.getInstance();    \t\r\n    \tCalendar arrive = Calendar.getInstance();\r\n    \t\r\n    \tdepart.setTimeZone(TimeZone.getTimeZone(&quot;America/Chicago&quot;));\r\n    \tarrive.setTimeZone(TimeZone.getTimeZone(&quot;Europe/Berlin&quot;));\r\n    \t\r\n    \tdepart.set(Calendar.MONTH, 6);\r\n    \tdepart.set(Calendar.DAY_OF_MONTH, 15);\r\n    \tdepart.set(Calendar.HOUR_OF_DAY, 17);\r\n    \tdepart.set(Calendar.MINUTE, 35);\r\n    \t\r\n    \tarrive.set(Calendar.MONTH, 6);\r\n    \tarrive.set(Calendar.DAY_OF_MONTH, 16);\r\n    \tarrive.set(Calendar.HOUR_OF_DAY, 9);\r\n    \tarrive.set(Calendar.MINUTE, 50);\r\n\r\n    System.out.println(&quot;Depart: &quot; + depart.getTime() + &quot;\\nArrive: &quot; + arrive.getTime());\r\n\t\t\r\n\tlong hours = (arrive.getTimeInMillis() - depart.getTimeInMillis()) / (1000*60*60);\r\n\tlong minutes = (arrive.getTimeInMillis() - depart.getTimeInMillis()) / (1000*60) - (hours*60);\r\n\t\t\r\n    System.out.println(&quot;Flight duration: &quot; + hours + &quot; hours&quot; + &quot; &quot; + minutes + &quot; minutes&quot;);`\r\n\r\nand the result is:\r\n \r\n`Depart: Wed Jul 15 17:35:53 CDT 2015\r\nArrive: Thu Jul 16 02:50:53 CDT 2015\r\nFlight duration: 9 hours 15 minutes`\r\n\r\n...But I need the result to be:\r\n\r\n`Depart: Wed Jul 15 17:35:53 CDT 2015\r\nArrive: Thu Jul 16 **09:50:53 Central European Timezone** 2015\r\nFlight duration: 9 hours 15 minutes`\r\n\r\n**I need to change both depart and arrive so they display their local time, but still report the correct travel duration of 9 hours and 15 minutes.**\r\n\r\n  ","title":"Using 2 Calendar class instances to get time difference","body":"<p>I am using the Calendar library within Java to try and figure out a problem with my application:</p>\n\n<p>I have two Calendar instances, <code>depart</code> and <code>arrive</code>. </p>\n\n<p><code>depart</code> is leaving at <strong>5:35 pm on 7/15/2015</strong> from Chicago, while <code>arrive</code> is landing at <strong>9:50 am on 7/16/15</strong> in Berlin, Germany.</p>\n\n<p>My current code to display the travel duration is:</p>\n\n<pre><code>    Calendar depart = Calendar.getInstance();       \n    Calendar arrive = Calendar.getInstance();\n\n    depart.setTimeZone(TimeZone.getTimeZone(\"America/Chicago\"));\n    arrive.setTimeZone(TimeZone.getTimeZone(\"Europe/Berlin\"));\n\n    depart.set(Calendar.MONTH, 6);\n    depart.set(Calendar.DAY_OF_MONTH, 15);\n    depart.set(Calendar.HOUR_OF_DAY, 17);\n    depart.set(Calendar.MINUTE, 35);\n\n    arrive.set(Calendar.MONTH, 6);\n    arrive.set(Calendar.DAY_OF_MONTH, 16);\n    arrive.set(Calendar.HOUR_OF_DAY, 9);\n    arrive.set(Calendar.MINUTE, 50);\n\nSystem.out.println(\"Depart: \" + depart.getTime() + \"\\nArrive: \" + arrive.getTime());\n\nlong hours = (arrive.getTimeInMillis() - depart.getTimeInMillis()) / (1000*60*60);\nlong minutes = (arrive.getTimeInMillis() - depart.getTimeInMillis()) / (1000*60) - (hours*60);\n\nSystem.out.println(\"Flight duration: \" + hours + \" hours\" + \" \" + minutes + \" minutes\");`\n</code></pre>\n\n<p>and the result is:</p>\n\n<p><code>Depart: Wed Jul 15 17:35:53 CDT 2015\nArrive: Thu Jul 16 02:50:53 CDT 2015\nFlight duration: 9 hours 15 minutes</code></p>\n\n<p>...But I need the result to be:</p>\n\n<p><code>Depart: Wed Jul 15 17:35:53 CDT 2015\nArrive: Thu Jul 16 **09:50:53 Central European Timezone** 2015\nFlight duration: 9 hours 15 minutes</code></p>\n\n<p><strong>I need to change both depart and arrive so they display their local time, but still report the correct travel duration of 9 hours and 15 minutes.</strong></p>\n"},{"tags":["java","hibernate","jpa","many-to-many","entity-relationship"],"comments":[{"owner":{"account_id":506013,"reputation":124,"user_id":1257295,"display_name":"Iuliana Cosmina"},"score":1,"creation_date":1559078262,"post_id":36803306,"comment_id":99305321,"body_markdown":"I hope this makes it clear for you: https://github.com/iuliana/many-to-many .  You are welcome. :)","body":"I hope this makes it clear for you: <a href=\"https://github.com/iuliana/many-to-many\" rel=\"nofollow noreferrer\">github.com/iuliana/many-to-many</a> .  You are welcome. :)"}],"answers":[{"tags":[],"owner":{"account_id":8265293,"reputation":3800,"user_id":6215069,"display_name":"Dean Clark"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1461359729,"creation_date":1461359729,"answer_id":36803427,"question_id":36803306,"body_markdown":"Nope. Both sides get `@ManyToMany`, but only one has the `@JoinTable`\r\n\r\n[More ManyToMany info here][1]\r\n\r\n\r\n  [1]: http://blog.jbaysolutions.com/2012/12/17/jpa-2-relationships-many-to-many/","title":"Should @JoinTable be specified in both sides of a @ManyToMany relationship?","body":"<p>Nope. Both sides get <code>@ManyToMany</code>, but only one has the <code>@JoinTable</code></p>\n\n<p><a href=\"http://blog.jbaysolutions.com/2012/12/17/jpa-2-relationships-many-to-many/\" rel=\"nofollow\">More ManyToMany info here</a></p>\n"},{"tags":[],"owner":{"account_id":5577435,"reputation":257,"user_id":4420444,"display_name":"unxn3rd"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1461360026,"creation_date":1461360026,"answer_id":36803491,"question_id":36803306,"body_markdown":"For `@ManyToMany` to work on an an existing schema (not made by Hibernate) you will have to use the @JoinTable annotation on both classes to specify the table and which columns map to Java member variables in the appropriate class. I think this example may help you with what properties should be passed to the annotation:\r\n\r\nhttps://dzone.com/tutorials/java/hibernate/hibernate-example/hibernate-mapping-many-to-many-using-annotations-1.html\r\n","title":"Should @JoinTable be specified in both sides of a @ManyToMany relationship?","body":"<p>For <code>@ManyToMany</code> to work on an an existing schema (not made by Hibernate) you will have to use the @JoinTable annotation on both classes to specify the table and which columns map to Java member variables in the appropriate class. I think this example may help you with what properties should be passed to the annotation:</p>\n\n<p><a href=\"https://dzone.com/tutorials/java/hibernate/hibernate-example/hibernate-mapping-many-to-many-using-annotations-1.html\" rel=\"nofollow\">https://dzone.com/tutorials/java/hibernate/hibernate-example/hibernate-mapping-many-to-many-using-annotations-1.html</a></p>\n"},{"tags":[],"owner":{"account_id":4688171,"reputation":11056,"user_id":3795036,"accept_rate":88,"display_name":"K.Nicholas"},"comment_count":0,"down_vote_count":0,"up_vote_count":22,"is_accepted":false,"score":22,"last_activity_date":1461904940,"creation_date":1461602875,"answer_id":36846479,"question_id":36803306,"body_markdown":"It&#39;s actually a good question, and it helps to understand the concept of an &quot;owning&quot; entity because neither side needs a `@JoinTable` annotation. If you want to prevent both sides from having `join tables`, a good idea, then you need to have a `mappedBy=` element on one side. The `@JoinTable` annotation is used to either specify the table name, or the columns that map the association.\r\n\r\nFirst look at the [Javadoc for @JoinTable](http://docs.oracle.com/javaee/7/api/javax/persistence/JoinTable.html):\r\n\r\n&gt; Specifies the mapping of associations. It is applied to the owning side of an association.\r\n\r\nWhether or not there is a `join table` is controlled by the `mappedBy=&quot;name&quot;` element of the `@ManyToMany` annotation. The [Javadoc for mappedBy for the `ManyToMany` annotation says](http://docs.oracle.com/javaee/7/api/javax/persistence/ManyToMany.html#mappedBy--):\r\n&gt; The field that owns the relationship. Required unless the relationship is unidirectional.\r\n\r\nFor your (bidirectional) example in Hibernate (5.0.9.Final), if there were only two `@ManyToMany` annotations and no `mappedBy=` element, the default will have two `Entity` tables and two `Join Tables`:\r\n\r\n    Hibernate: create table Course (id bigint not null, primary key (id))\r\n    Hibernate: create table Course_Member (Course_id bigint not null, members_id bigint not null, primary key (Course_id, members_id))\r\n    Hibernate: create table Member (id bigint not null, primary key (id))\r\n    Hibernate: create table Member_Course (Member_id bigint not null, courses_id bigint not null, primary key (Member_id, courses_id))\r\n\r\nWhile this is saying that each Entity &quot;owns&quot; its `ManyToMany` relationship, the extra `join table` is redundant in the typical use case. However, if I decide to have the `Member` entity &quot;own&quot; the relationship, then I add the `mappedBy=` element to the `Course` entity to specify that it doesn&#39;t own the relationship:\r\n\r\n    @ManyToMany(mappedBy=&quot;courses&quot;)\r\n    Set&lt;Member&gt; members;\r\n\r\nAdding `@JoinTable(name=&quot;Member_Course&quot;)` to the `Member` entity doesn&#39;t change anything: it&#39;s only naming the table the same as it would have been named anyway. \r\n\r\nSince the `Course` entity no longer owns its `ManyToMany` relationship, the extra `JoinTable` will not be created:\r\n\r\n    Hibernate: create table Course (id bigint not null, primary key (id))\r\n    Hibernate: create table Member (id bigint not null, primary key (id))\r\n    Hibernate: create table Member_Course (members_id bigint not null, courses_id bigint not null, primary key (members_id, courses_id))\r\n\r\nThis is important to the developer because he or she must understand that no relationship is persisted unless it&#39;s added to the owning entity, in this case the `Member` entity. However, since this a bidirectional relationship, the developer should be adding **both** a `Course` to `Member.courses` and a `Member` to `Course.members` anyway. \r\n\r\nSo, if you have a `bidirectional` `ManyToMany` relationship, which means you have `ManyToMany` on both entities involved, then you should add a `mappedBy=&quot;name&quot;` on one of them to avoid having a redundant `join table`. Since it&#39;s bidirectional, I don&#39;t think it matters which side you make the `owning` entity. As always, it&#39;s always a good idea to enable the sql logs and see what&#39;s going on in the database:\r\n\r\nReferences: \r\n\r\n[What is the difference between Unidirectional and Bidirectional associations?](https://stackoverflow.com/questions/5360795/what-is-the-difference-between-unidirectional-and-bidirectional-associations).\r\n\r\n[What does relationship owner means in bidirectional relationship?](https://stackoverflow.com/questions/8931342/what-does-relationship-owner-means-in-bidirectional-relationship).\r\n\r\n[What is the “owning side” in an ORM mapping?](https://stackoverflow.com/questions/2749689/what-is-the-owning-side-in-an-orm-mapping).\r\n\r\n[Most efficient way to prevent an infinite recursion in toString()?](https://stackoverflow.com/questions/11300203/most-efficient-way-to-prevent-an-infinite-recursion-in-tostring).","title":"Should @JoinTable be specified in both sides of a @ManyToMany relationship?","body":"<p>It's actually a good question, and it helps to understand the concept of an \"owning\" entity because neither side needs a <code>@JoinTable</code> annotation. If you want to prevent both sides from having <code>join tables</code>, a good idea, then you need to have a <code>mappedBy=</code> element on one side. The <code>@JoinTable</code> annotation is used to either specify the table name, or the columns that map the association.</p>\n\n<p>First look at the <a href=\"http://docs.oracle.com/javaee/7/api/javax/persistence/JoinTable.html\" rel=\"noreferrer\">Javadoc for @JoinTable</a>:</p>\n\n<blockquote>\n  <p>Specifies the mapping of associations. It is applied to the owning side of an association.</p>\n</blockquote>\n\n<p>Whether or not there is a <code>join table</code> is controlled by the <code>mappedBy=\"name\"</code> element of the <code>@ManyToMany</code> annotation. The <a href=\"http://docs.oracle.com/javaee/7/api/javax/persistence/ManyToMany.html#mappedBy--\" rel=\"noreferrer\">Javadoc for mappedBy for the <code>ManyToMany</code> annotation says</a>:</p>\n\n<blockquote>\n  <p>The field that owns the relationship. Required unless the relationship is unidirectional.</p>\n</blockquote>\n\n<p>For your (bidirectional) example in Hibernate (5.0.9.Final), if there were only two <code>@ManyToMany</code> annotations and no <code>mappedBy=</code> element, the default will have two <code>Entity</code> tables and two <code>Join Tables</code>:</p>\n\n<pre><code>Hibernate: create table Course (id bigint not null, primary key (id))\nHibernate: create table Course_Member (Course_id bigint not null, members_id bigint not null, primary key (Course_id, members_id))\nHibernate: create table Member (id bigint not null, primary key (id))\nHibernate: create table Member_Course (Member_id bigint not null, courses_id bigint not null, primary key (Member_id, courses_id))\n</code></pre>\n\n<p>While this is saying that each Entity \"owns\" its <code>ManyToMany</code> relationship, the extra <code>join table</code> is redundant in the typical use case. However, if I decide to have the <code>Member</code> entity \"own\" the relationship, then I add the <code>mappedBy=</code> element to the <code>Course</code> entity to specify that it doesn't own the relationship:</p>\n\n<pre><code>@ManyToMany(mappedBy=\"courses\")\nSet&lt;Member&gt; members;\n</code></pre>\n\n<p>Adding <code>@JoinTable(name=\"Member_Course\")</code> to the <code>Member</code> entity doesn't change anything: it's only naming the table the same as it would have been named anyway. </p>\n\n<p>Since the <code>Course</code> entity no longer owns its <code>ManyToMany</code> relationship, the extra <code>JoinTable</code> will not be created:</p>\n\n<pre><code>Hibernate: create table Course (id bigint not null, primary key (id))\nHibernate: create table Member (id bigint not null, primary key (id))\nHibernate: create table Member_Course (members_id bigint not null, courses_id bigint not null, primary key (members_id, courses_id))\n</code></pre>\n\n<p>This is important to the developer because he or she must understand that no relationship is persisted unless it's added to the owning entity, in this case the <code>Member</code> entity. However, since this a bidirectional relationship, the developer should be adding <strong>both</strong> a <code>Course</code> to <code>Member.courses</code> and a <code>Member</code> to <code>Course.members</code> anyway. </p>\n\n<p>So, if you have a <code>bidirectional</code> <code>ManyToMany</code> relationship, which means you have <code>ManyToMany</code> on both entities involved, then you should add a <code>mappedBy=\"name\"</code> on one of them to avoid having a redundant <code>join table</code>. Since it's bidirectional, I don't think it matters which side you make the <code>owning</code> entity. As always, it's always a good idea to enable the sql logs and see what's going on in the database:</p>\n\n<p>References: </p>\n\n<p><a href=\"https://stackoverflow.com/questions/5360795/what-is-the-difference-between-unidirectional-and-bidirectional-associations\">What is the difference between Unidirectional and Bidirectional associations?</a>.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/8931342/what-does-relationship-owner-means-in-bidirectional-relationship\">What does relationship owner means in bidirectional relationship?</a>.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/2749689/what-is-the-owning-side-in-an-orm-mapping\">What is the “owning side” in an ORM mapping?</a>.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/11300203/most-efficient-way-to-prevent-an-infinite-recursion-in-tostring\">Most efficient way to prevent an infinite recursion in toString()?</a>.</p>\n"},{"comments":[{"owner":{"account_id":12584206,"reputation":542,"user_id":9153802,"display_name":"Balu"},"score":0,"creation_date":1617270321,"post_id":56346649,"comment_id":118259977,"body_markdown":"This is possible though the @JoinTable should not be used like this, refer to the [documentation](https://download.oracle.com/otn-pub/jcp/persistence-2_2-mrel-spec/JavaPersistence.pdf?AuthParam=1617267436_3edd264198c2d080caae57372599aaca) at `11.1.27 JoinTable Annotation`  : \n &gt; A JoinTable annotation is specified on the owning side of the association.","body":"This is possible though the @JoinTable should not be used like this, refer to the <a href=\"https://download.oracle.com/otn-pub/jcp/persistence-2_2-mrel-spec/JavaPersistence.pdf?AuthParam=1617267436_3edd264198c2d080caae57372599aaca\" rel=\"nofollow noreferrer\">documentation</a> at <code>11.1.27 JoinTable Annotation</code>  :   &gt; A JoinTable annotation is specified on the owning side of the association."}],"tags":[],"owner":{"account_id":14141125,"reputation":171,"user_id":10215887,"display_name":"Julia Hin&#223;en IT.NRW"},"comment_count":1,"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1559063831,"creation_date":1559061355,"answer_id":56346649,"question_id":36803306,"body_markdown":"**You actually CAN use @JoinTable on both sides** and often it makes perfect sense! I am talking out of experience after I had been looking for this solution for weeks.\r\n\r\nEven though all throughout the internet, blogs and articles tell a different story - and the Javadoc of JPA is easily misunderstood (or wrong) in this way. I tried it after seeing this uncommented example in a book for professionals - and it worked.\r\n\r\n**How to do it:**\r\n\r\nSinger-Instrument-Association:\r\n**Singer side**:\r\n\r\n    @ManyToMany \r\n    @JoinTable(name = &quot;singer_instrument&quot;, joinColumns =\r\n    @JoinColumn(name = &quot;SINGER_ID&quot;), inverseJoinColumns = @JoinColumn(name = &quot;INSTRUMENT_ID&quot;)) \r\n    public Set&lt;Instrument&gt; instruments;\r\n\r\nAnd exactly the same on the other side!\r\n**Instrument side**:\r\n\r\n    @ManyToMany\r\n    @JoinTable(name = &quot;singer_instrument&quot;,\r\n    joinColumns = @JoinColumn(name = &quot;INSTRUMENT_ID&quot;),\r\n    inverseJoinColumns = @JoinColumn(name = &quot;SINGER_ID&quot;))\r\n    public Set&lt;Singer&gt; singers;\r\n\r\nSo, if you address the same join table, &quot;singer_instrument&quot;, with the same name, it work&#39;s. \r\nIf you address one join table &quot;singer_instrument&quot; and one join table &quot;instrument-singer&quot; though, it will indead result in two different join tables in the database.\r\n\r\nThis makes a lot of sense, because a many-to-many relationship has **no** owning side - seen from the database perspective. Owning side means the side, that owns the **foreign key** of the relationship. But neither the table &quot;singer&quot; nor &quot;instrument&quot; have a foreign key referring to each other. The foreign keys are inside the neccessary **join table** between them.\r\n\r\nThe **advantage of @JoinTable on both sides** of the relation:\r\nLet&#39;s say, a singer starts to learn a new instrument: You can add the instrument to singer (and vise versa, as it is bidirectional) and update/merge the singer. The update will **update only the singer and the join table. It *won&#39;t touch* the instrument-table**.\r\n\r\nNow the other case - a guitar-course has ended, so you want to remove the connection between the guitar and the former course-participants/singers: After removing the instrument &quot;guitar&quot; from the singers (and vise versa!), you update/merge the instrument. The update will **update only the instrument *and the join table*. It *won&#39;t touch* the singer-table**.\r\n\r\nIf you had @JoinTable only on one side, you would always have to update/save/delete *this side* to safely handle the entries in the join table (the relationships between singers and instruments). In this case, you would have to update *each* singer, who ended the guitar course. That is **not reflecting the type of relationship properly** and can cause **performance issues** and **conflicts during data transaction**.","title":"Should @JoinTable be specified in both sides of a @ManyToMany relationship?","body":"<p><strong>You actually CAN use @JoinTable on both sides</strong> and often it makes perfect sense! I am talking out of experience after I had been looking for this solution for weeks.</p>\n\n<p>Even though all throughout the internet, blogs and articles tell a different story - and the Javadoc of JPA is easily misunderstood (or wrong) in this way. I tried it after seeing this uncommented example in a book for professionals - and it worked.</p>\n\n<p><strong>How to do it:</strong></p>\n\n<p>Singer-Instrument-Association:\n<strong>Singer side</strong>:</p>\n\n<pre><code>@ManyToMany \n@JoinTable(name = \"singer_instrument\", joinColumns =\n@JoinColumn(name = \"SINGER_ID\"), inverseJoinColumns = @JoinColumn(name = \"INSTRUMENT_ID\")) \npublic Set&lt;Instrument&gt; instruments;\n</code></pre>\n\n<p>And exactly the same on the other side!\n<strong>Instrument side</strong>:</p>\n\n<pre><code>@ManyToMany\n@JoinTable(name = \"singer_instrument\",\njoinColumns = @JoinColumn(name = \"INSTRUMENT_ID\"),\ninverseJoinColumns = @JoinColumn(name = \"SINGER_ID\"))\npublic Set&lt;Singer&gt; singers;\n</code></pre>\n\n<p>So, if you address the same join table, \"singer_instrument\", with the same name, it work's. \nIf you address one join table \"singer_instrument\" and one join table \"instrument-singer\" though, it will indead result in two different join tables in the database.</p>\n\n<p>This makes a lot of sense, because a many-to-many relationship has <strong>no</strong> owning side - seen from the database perspective. Owning side means the side, that owns the <strong>foreign key</strong> of the relationship. But neither the table \"singer\" nor \"instrument\" have a foreign key referring to each other. The foreign keys are inside the neccessary <strong>join table</strong> between them.</p>\n\n<p>The <strong>advantage of @JoinTable on both sides</strong> of the relation:\nLet's say, a singer starts to learn a new instrument: You can add the instrument to singer (and vise versa, as it is bidirectional) and update/merge the singer. The update will <strong>update only the singer and the join table. It <em>won't touch</em> the instrument-table</strong>.</p>\n\n<p>Now the other case - a guitar-course has ended, so you want to remove the connection between the guitar and the former course-participants/singers: After removing the instrument \"guitar\" from the singers (and vise versa!), you update/merge the instrument. The update will <strong>update only the instrument <em>and the join table</em>. It <em>won't touch</em> the singer-table</strong>.</p>\n\n<p>If you had @JoinTable only on one side, you would always have to update/save/delete <em>this side</em> to safely handle the entries in the join table (the relationships between singers and instruments). In this case, you would have to update <em>each</em> singer, who ended the guitar course. That is <strong>not reflecting the type of relationship properly</strong> and can cause <strong>performance issues</strong> and <strong>conflicts during data transaction</strong>.</p>\n"}],"owner":{"account_id":4148701,"reputation":15584,"user_id":3924118,"accept_rate":35,"display_name":"nbro"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":18333,"favorite_count":0,"down_vote_count":0,"up_vote_count":19,"answer_count":4,"score":19,"last_activity_date":1693596995,"creation_date":1461359188,"question_id":36803306,"body_markdown":"I&#39;ve an entity `Course` and an entity `User`. There&#39;s a _many-to-many_ relationship between course and user, since a course can have many users and a user can be enrolled in many courses. In both entities I&#39;ve put the `@ManyToMany` annotation on the specific field, that is, in `Course` I have:\r\n\r\n\r\n\t@ManyToMany\r\n\tprivate List&lt;RegisteredUser&gt; members;\r\n\r\nand in `User` I have:\r\n\r\n\t@ManyToMany\r\n\tprivate List&lt;Course&gt; coursesTaken;\r\n\r\nNow, I know that this kind of many-to-many relationships are usually represented by a third table. I also know that there&#39;s the annotation `@JoinTable` which allows us to do that. What I don&#39;t know is if I should add this annotation `@JoinTable` over both fields in the two different entities or not. By the way, if I need to add to both, the names need to match right? \r\n\r\n","title":"Should @JoinTable be specified in both sides of a @ManyToMany relationship?","body":"<p>I've an entity <code>Course</code> and an entity <code>User</code>. There's a <em>many-to-many</em> relationship between course and user, since a course can have many users and a user can be enrolled in many courses. In both entities I've put the <code>@ManyToMany</code> annotation on the specific field, that is, in <code>Course</code> I have:</p>\n<pre><code>@ManyToMany\nprivate List&lt;RegisteredUser&gt; members;\n</code></pre>\n<p>and in <code>User</code> I have:</p>\n<pre><code>@ManyToMany\nprivate List&lt;Course&gt; coursesTaken;\n</code></pre>\n<p>Now, I know that this kind of many-to-many relationships are usually represented by a third table. I also know that there's the annotation <code>@JoinTable</code> which allows us to do that. What I don't know is if I should add this annotation <code>@JoinTable</code> over both fields in the two different entities or not. By the way, if I need to add to both, the names need to match right?</p>\n"},{"tags":["java","selenium-webdriver","intellij-idea"],"comments":[{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1693553071,"post_id":77021120,"comment_id":135778947,"body_markdown":"Python is a higher level language than Java, whatever you know about Python probably won&#39;t help you with Java. As for the error, well it&#39;s a classpath issue. If you&#39;ve configured things randomly, it probably won&#39;t work (randomness doesn&#39;t work in software development, you need to understand what you&#39;re doing). Try running on the commandline with `javac / java` instead and set the classpath explicitly.","body":"Python is a higher level language than Java, whatever you know about Python probably won&#39;t help you with Java. As for the error, well it&#39;s a classpath issue. If you&#39;ve configured things randomly, it probably won&#39;t work (randomness doesn&#39;t work in software development, you need to understand what you&#39;re doing). Try running on the commandline with <code>javac &#47; java</code> instead and set the classpath explicitly."},{"owner":{"account_id":17693330,"reputation":3781,"user_id":12844632,"display_name":"Egor Klepikov"},"score":0,"creation_date":1693553456,"post_id":77021120,"comment_id":135779005,"body_markdown":"Do you see WebDriver class in the selenium-java-4.12.0 lib? Please provide screenshots from `File | Project Structure | Modules | Dependencies` and `File | Project Structure | Libraries` and clarify from where did you download this JAR?","body":"Do you see WebDriver class in the selenium-java-4.12.0 lib? Please provide screenshots from <code>File | Project Structure | Modules | Dependencies</code> and <code>File | Project Structure | Libraries</code> and clarify from where did you download this JAR?"},{"owner":{"account_id":6996252,"reputation":432,"user_id":5363840,"accept_rate":50,"display_name":"Dr.Tautology"},"score":0,"creation_date":1693553980,"post_id":77021120,"comment_id":135779105,"body_markdown":"@EgorKlepikov I&#39;ll have to get the screenshots tomorrow. As for the jar files they were downloaded directly from the official selenium site: https://github.com/SeleniumHQ/selenium/releases/download/selenium-4.12.0/selenium-java-4.12.0.zip","body":"@EgorKlepikov I&#39;ll have to get the screenshots tomorrow. As for the jar files they were downloaded directly from the official selenium site: <a href=\"https://github.com/SeleniumHQ/selenium/releases/download/selenium-4.12.0/selenium-java-4.12.0.zip\" rel=\"nofollow noreferrer\">github.com/SeleniumHQ/selenium/releases/download/&hellip;</a>"},{"owner":{"account_id":6996252,"reputation":432,"user_id":5363840,"accept_rate":50,"display_name":"Dr.Tautology"},"score":0,"creation_date":1693582205,"post_id":77021120,"comment_id":135784606,"body_markdown":"@EgorKlepikov I see the WebDriver java file under selenium-api-4.12.0.jar&gt;org.openqa.selenium","body":"@EgorKlepikov I see the WebDriver java file under selenium-api-4.12.0.jar&gt;org.openqa.selenium"},{"owner":{"account_id":6996252,"reputation":432,"user_id":5363840,"accept_rate":50,"display_name":"Dr.Tautology"},"score":0,"creation_date":1693583057,"post_id":77021120,"comment_id":135784799,"body_markdown":"@EgorKlepikov I&#39;ve added the screenshots you have requested as well.","body":"@EgorKlepikov I&#39;ve added the screenshots you have requested as well."},{"owner":{"account_id":17693330,"reputation":3781,"user_id":12844632,"display_name":"Egor Klepikov"},"score":1,"creation_date":1693990698,"post_id":77021120,"comment_id":135831114,"body_markdown":"If you&#39;re building JAR manually from the command line you have to add dependencies to the classpath manually. See https://stackoverflow.com/a/2096298/12844632","body":"If you&#39;re building JAR manually from the command line you have to add dependencies to the classpath manually. See <a href=\"https://stackoverflow.com/a/2096298/12844632\">stackoverflow.com/a/2096298/12844632</a>"},{"owner":{"account_id":17693330,"reputation":3781,"user_id":12844632,"display_name":"Egor Klepikov"},"score":0,"creation_date":1693990823,"post_id":77021120,"comment_id":135831131,"body_markdown":"In IntelliJ IDEA, to build a JAR file you can configure an artifact under `File | Project Structure | Artifacts` and include Selenium dependency there. Then use `Build | Build Artifacts...` action from the IDE main menu. See https://www.jetbrains.com/help/idea/working-with-artifacts.html","body":"In IntelliJ IDEA, to build a JAR file you can configure an artifact under <code>File | Project Structure | Artifacts</code> and include Selenium dependency there. Then use <code>Build | Build Artifacts...</code> action from the IDE main menu. See <a href=\"https://www.jetbrains.com/help/idea/working-with-artifacts.html\" rel=\"nofollow noreferrer\">jetbrains.com/help/idea/working-with-artifacts.html</a>"},{"owner":{"account_id":6996252,"reputation":432,"user_id":5363840,"accept_rate":50,"display_name":"Dr.Tautology"},"score":0,"creation_date":1694619674,"post_id":77021120,"comment_id":135915982,"body_markdown":"@EgorKlepikov I really appreciate it. Adding the classpath to my javac command resolved the issue: &quot;java -classpath &quot;C:\\Users\\Dr.Tautology\\Selenium\\jars\\*&quot; TestSelenium.java&quot;","body":"@EgorKlepikov I really appreciate it. Adding the classpath to my javac command resolved the issue: &quot;java -classpath &quot;C:\\Users\\Dr.Tautology\\Selenium\\jars*&quot; TestSelenium.java&quot;"}],"owner":{"account_id":6996252,"reputation":432,"user_id":5363840,"accept_rate":50,"display_name":"Dr.Tautology"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":166,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693596936,"creation_date":1693551521,"question_id":77021120,"body_markdown":"I continue to get the following error when trying to compile a simple java application using selenium in IntelliJ in Windows 10:\r\n\r\n``` error: package org.openqa.selenium does not exist\r\nimport org.openqa.selenium.WebDriver;\r\n                          ^\r\n.\\SeleniumTest.java:2: error: package org.openqa.selenium.chrome does not exist\r\nimport org.openqa.selenium.chrome.ChromeDriver;\r\n                                 ^\r\n.\\SeleniumTest.java:10: error: cannot find symbol\r\n        WebDriver driver = new ChromeDriver();\r\n        ^\r\n  symbol:   class WebDriver\r\n  location: class SeleniumTest\r\n.\\SeleniumTest.java:10: error: cannot find symbol\r\n        WebDriver driver = new ChromeDriver();\r\n                               ^\r\n  symbol:   class ChromeDriver\r\n  location: class SeleniumTest\r\n4 errors\r\n```\r\n\r\nI have tried everything suggested by gpt and various tutorials. This includes creating a lib folder in my project directory, right clicking and selecting &quot;Add as Library&quot;. \r\n\r\nI have also gone to \r\n&gt;Project Structure&gt;Modules&gt;Dependencies&gt;+&gt;Jars or Directories\r\nAnd added all the jar files in the selenium-java-4.12.0 and selenium-java-4.12.0/lib directories.\r\n\r\nThe only thing I haven&#39;t attempted is using a build manager like Maven or Gradle, simply because I&#39;ve been told that as a beginner it is better to start by managing your packages manually.\r\n\r\nI just can&#39;t figure out why IntelliJ is not finding the jar files. I created JAVA_HOME and added java to my environment variables. I have rebuilt the project and started from scratch probably a dozen times and I&#39;m still getting the same error.\r\n\r\nI&#39;m using JDK 17.0.8 and I have downloaded the most recent stable release of Selenium for Java 4.12.0 (August 31, 2023)\r\n\r\nI am coming from python and not an experienced Java programmer at all. I feel incredibly incompetent especially considering how quickly I&#39;m able to get a Selenium build running in python.\r\n\r\nHere&#39;s some screen shots of my project:\r\n\r\n[![enter image description here][1]][1]\r\n \r\n[![enter image description here][2]][2]\r\n\r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\n[![enter image description here][4]][4]\r\n\r\n\r\n[![enter image description here][5]][5]\r\n\r\n\r\n[![enter image description here][6]][6]\r\n\r\n\r\nSo I have discovered that there is no issue if I simply run the file from intelliJ. However the issue only occurs when I attempt to compile the java file through the IntelliJ terminal. I don&#39;t know why this is or how to resolve it. I assume it is related to the selenium jars not being in the PATH. But I have attempted to add them with no luck.\r\n[![enter image description here][7]][7]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/WAMXs.png\r\n  [2]: https://i.stack.imgur.com/pWONF.png\r\n  [3]: https://i.stack.imgur.com/zCjpC.png\r\n  [4]: https://i.stack.imgur.com/jdgeW.png\r\n  [5]: https://i.stack.imgur.com/gaJsI.png\r\n  [6]: https://i.stack.imgur.com/ybdS3.png\r\n  [7]: https://i.stack.imgur.com/iOFc1.png","title":"Selenium for Intellij &quot;Package does not exist&quot;","body":"<p>I continue to get the following error when trying to compile a simple java application using selenium in IntelliJ in Windows 10:</p>\n<pre><code>import org.openqa.selenium.WebDriver;\n                          ^\n.\\SeleniumTest.java:2: error: package org.openqa.selenium.chrome does not exist\nimport org.openqa.selenium.chrome.ChromeDriver;\n                                 ^\n.\\SeleniumTest.java:10: error: cannot find symbol\n        WebDriver driver = new ChromeDriver();\n        ^\n  symbol:   class WebDriver\n  location: class SeleniumTest\n.\\SeleniumTest.java:10: error: cannot find symbol\n        WebDriver driver = new ChromeDriver();\n                               ^\n  symbol:   class ChromeDriver\n  location: class SeleniumTest\n4 errors\n</code></pre>\n<p>I have tried everything suggested by gpt and various tutorials. This includes creating a lib folder in my project directory, right clicking and selecting &quot;Add as Library&quot;.</p>\n<p>I have also gone to</p>\n<blockquote>\n<p>Project Structure&gt;Modules&gt;Dependencies&gt;+&gt;Jars or Directories\nAnd added all the jar files in the selenium-java-4.12.0 and selenium-java-4.12.0/lib directories.</p>\n</blockquote>\n<p>The only thing I haven't attempted is using a build manager like Maven or Gradle, simply because I've been told that as a beginner it is better to start by managing your packages manually.</p>\n<p>I just can't figure out why IntelliJ is not finding the jar files. I created JAVA_HOME and added java to my environment variables. I have rebuilt the project and started from scratch probably a dozen times and I'm still getting the same error.</p>\n<p>I'm using JDK 17.0.8 and I have downloaded the most recent stable release of Selenium for Java 4.12.0 (August 31, 2023)</p>\n<p>I am coming from python and not an experienced Java programmer at all. I feel incredibly incompetent especially considering how quickly I'm able to get a Selenium build running in python.</p>\n<p>Here's some screen shots of my project:</p>\n<p><a href=\"https://i.stack.imgur.com/WAMXs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WAMXs.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/pWONF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pWONF.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/zCjpC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zCjpC.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/jdgeW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jdgeW.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/gaJsI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gaJsI.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/ybdS3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ybdS3.png\" alt=\"enter image description here\" /></a></p>\n<p>So I have discovered that there is no issue if I simply run the file from intelliJ. However the issue only occurs when I attempt to compile the java file through the IntelliJ terminal. I don't know why this is or how to resolve it. I assume it is related to the selenium jars not being in the PATH. But I have attempted to add them with no luck.\n<a href=\"https://i.stack.imgur.com/iOFc1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/iOFc1.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","web-services","wsdl"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1693838715,"post_id":77025381,"comment_id":135809499,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":29347346,"reputation":1,"user_id":22485363,"display_name":"funkylimb"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693596664,"creation_date":1693593541,"question_id":77025381,"body_markdown":"I am new to Web Service client development and have been tasked to create a client in Java to call an web service outside of our organization.\r\n\r\nI downloaded the WSDL and in the &lt;Policy&gt; section there is this:\r\n```\r\n&lt;AlgorithmnSuite&gt;\r\n    &lt;Policy&gt;\r\n       &lt;Basic128RSASha512/&gt;\r\n    &lt;/Policy&gt;\r\n&lt;/AlgorithmSuite&gt;\r\n```\r\n\r\nWhen I run the client I get the following exception:\r\n\r\nSOAPFaultException: Algorithmn suite Basic128RSASha512 is not registered\r\n\r\nAny insight on how to get past this error is greatly appreciated.\r\n\r\nI found:\r\nhttps://github.com/apache/cxf/blob/main/systests/ws-security/src/test/java/org/apache/cxf/systest/ws/x509/SHA512PolicyLoader.java\r\n\r\nBut I do not know if that will help solve the problem -- and if it will I do not know how to implement it.","title":"Java Web Service Client - SOAPFaultException: Algorithmn suite Basic128RSASha512 is not registered","body":"<p>I am new to Web Service client development and have been tasked to create a client in Java to call an web service outside of our organization.</p>\n<p>I downloaded the WSDL and in the  section there is this:</p>\n<pre><code>&lt;AlgorithmnSuite&gt;\n    &lt;Policy&gt;\n       &lt;Basic128RSASha512/&gt;\n    &lt;/Policy&gt;\n&lt;/AlgorithmSuite&gt;\n</code></pre>\n<p>When I run the client I get the following exception:</p>\n<p>SOAPFaultException: Algorithmn suite Basic128RSASha512 is not registered</p>\n<p>Any insight on how to get past this error is greatly appreciated.</p>\n<p>I found:\n<a href=\"https://github.com/apache/cxf/blob/main/systests/ws-security/src/test/java/org/apache/cxf/systest/ws/x509/SHA512PolicyLoader.java\" rel=\"nofollow noreferrer\">https://github.com/apache/cxf/blob/main/systests/ws-security/src/test/java/org/apache/cxf/systest/ws/x509/SHA512PolicyLoader.java</a></p>\n<p>But I do not know if that will help solve the problem -- and if it will I do not know how to implement it.</p>\n"},{"tags":["java","heap-dump"],"answers":[{"comments":[{"owner":{"account_id":1355087,"reputation":22615,"user_id":1293653,"accept_rate":60,"display_name":"One Two Three"},"score":0,"creation_date":1459456854,"post_id":36343251,"comment_id":60308450,"body_markdown":"That looks useful! Can I ask a dumber question, where do I execute this query? Is there a console builtin to JVisualVm or something?","body":"That looks useful! Can I ask a dumber question, where do I execute this query? Is there a console builtin to JVisualVm or something?"},{"owner":{"account_id":7664695,"reputation":6076,"user_id":5808727,"accept_rate":25,"display_name":"Pooya"},"score":0,"creation_date":1459457037,"post_id":36343251,"comment_id":60308563,"body_markdown":"@OneTwoThree: there is both command line and visual tools, you can see the full documentation on their website. it is a very useful tool","body":"@OneTwoThree: there is both command line and visual tools, you can see the full documentation on their website. it is a very useful tool"}],"tags":[],"owner":{"account_id":7664695,"reputation":6076,"user_id":5808727,"accept_rate":25,"display_name":"Pooya"},"comment_count":2,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1693596174,"creation_date":1459456467,"answer_id":36343251,"question_id":36343037,"body_markdown":"If you use `VisualVM` you can use couple of `OQL` query to read the data in Java heap that you are looking for. One command that may suit your need is:\r\n\r\n     select {instance: s, content: s.toString()} from java.lang.String s\r\n        where /java/(s.toString())\r\n\r\nyou can find a lot more here: https://visualvm.github.io/documentation.html, section *Analyzing a Heap Dump Using OQL*","title":"How do I inspect specifically what Java strings are being kept around, causing memory leak?","body":"<p>If you use <code>VisualVM</code> you can use couple of <code>OQL</code> query to read the data in Java heap that you are looking for. One command that may suit your need is:</p>\n<pre><code> select {instance: s, content: s.toString()} from java.lang.String s\n    where /java/(s.toString())\n</code></pre>\n<p>you can find a lot more here: <a href=\"https://visualvm.github.io/documentation.html\" rel=\"nofollow noreferrer\">https://visualvm.github.io/documentation.html</a>, section <em>Analyzing a Heap Dump Using OQL</em></p>\n"},{"tags":[],"owner":{"account_id":1432415,"reputation":10687,"user_id":1354537,"accept_rate":83,"display_name":"Marged"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1693595983,"creation_date":1459460163,"answer_id":36344275,"question_id":36343037,"body_markdown":"I simulated this with a small Spring Boot application and [Eclipse Memory Analyzer][1]. The heap dump was created from inside MAT but you could also open the heap dump you already created.\r\n\r\nWhen you open the heap dump MAT automatically shows you suspects which are using a lot of memory:\r\n\r\n[![enter image description here][2]][2]\r\n\r\nWhen you open the details you can see the `String` instances and their values (marked in yellow in my screenshot) in the section called `Accumulated Objects in Dominator Tree`\r\n\r\n[![enter image description here][3]][3]\r\n\r\nShort note: you can run OQL from within MAT too:\r\n\r\n[![enter image description here][4]][4]\r\n\r\n\r\n  [1]: https://eclipse.dev/mat/\r\n  [2]: https://i.stack.imgur.com/lIJZi.png\r\n  [3]: https://i.stack.imgur.com/XAL89.png\r\n  [4]: https://i.stack.imgur.com/2uMQ4.png","title":"How do I inspect specifically what Java strings are being kept around, causing memory leak?","body":"<p>I simulated this with a small Spring Boot application and <a href=\"https://eclipse.dev/mat/\" rel=\"nofollow noreferrer\">Eclipse Memory Analyzer</a>. The heap dump was created from inside MAT but you could also open the heap dump you already created.</p>\n<p>When you open the heap dump MAT automatically shows you suspects which are using a lot of memory:</p>\n<p><a href=\"https://i.stack.imgur.com/lIJZi.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lIJZi.png\" alt=\"enter image description here\" /></a></p>\n<p>When you open the details you can see the <code>String</code> instances and their values (marked in yellow in my screenshot) in the section called <code>Accumulated Objects in Dominator Tree</code></p>\n<p><a href=\"https://i.stack.imgur.com/XAL89.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XAL89.png\" alt=\"enter image description here\" /></a></p>\n<p>Short note: you can run OQL from within MAT too:</p>\n<p><a href=\"https://i.stack.imgur.com/2uMQ4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2uMQ4.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":1355087,"reputation":22615,"user_id":1293653,"accept_rate":60,"display_name":"One Two Three"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2633,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":36343251,"answer_count":2,"score":3,"last_activity_date":1693596174,"creation_date":1459455798,"question_id":36343037,"body_markdown":"I can see in the heapdump file that the String class exhausted memory, but how do I know specifically what those strings are?","title":"How do I inspect specifically what Java strings are being kept around, causing memory leak?","body":"<p>I can see in the heapdump file that the String class exhausted memory, but how do I know specifically what those strings are?</p>\n"},{"tags":["java","android","bitmap","libgdx"],"comments":[{"owner":{"account_id":6677355,"reputation":3705,"user_id":5151575,"accept_rate":83,"display_name":"Enigo"},"score":0,"creation_date":1454999880,"post_id":35284583,"comment_id":58281412,"body_markdown":"why would you need to convert something from LibGDX to Android specific? LibGDX is cross-platform game development engine, hence you should avoid such kind of practice.","body":"why would you need to convert something from LibGDX to Android specific? LibGDX is cross-platform game development engine, hence you should avoid such kind of practice."},{"owner":{"account_id":6810483,"reputation":519,"user_id":5244513,"accept_rate":44,"display_name":"Gtzzy"},"score":0,"creation_date":1455000326,"post_id":35284583,"comment_id":58281633,"body_markdown":"Cause I need to create a share button. And since I cannot do this in libgdx, I should just run platform specific code and create a new activity.","body":"Cause I need to create a share button. And since I cannot do this in libgdx, I should just run platform specific code and create a new activity."},{"owner":{"account_id":6677355,"reputation":3705,"user_id":5151575,"accept_rate":83,"display_name":"Enigo"},"score":0,"creation_date":1455000912,"post_id":35284583,"comment_id":58281901,"body_markdown":"what kind of share button? have you seen [this](http://stackoverflow.com/q/32673189/5151575) ?","body":"what kind of share button? have you seen <a href=\"http://stackoverflow.com/q/32673189/5151575\">this</a> ?"},{"owner":{"account_id":6810483,"reputation":519,"user_id":5244513,"accept_rate":44,"display_name":"Gtzzy"},"score":0,"creation_date":1455001218,"post_id":35284583,"comment_id":58282048,"body_markdown":"Yes, I have. But I need not only the Facebook sharing. With http://code.tutsplus.com/tutorials/android-sdk-implement-a-share-intent--mobile-8433/ this way I can access all the available share methods.","body":"Yes, I have. But I need not only the Facebook sharing. With <a href=\"http://code.tutsplus.com/tutorials/android-sdk-implement-a-share-intent--mobile-8433/\" rel=\"nofollow noreferrer\">code.tutsplus.com/tutorials/&hellip;</a> this way I can access all the available share methods."},{"owner":{"account_id":238127,"reputation":86162,"user_id":506796,"accept_rate":83,"display_name":"Tenfour04"},"score":0,"creation_date":1455030395,"post_id":35284583,"comment_id":58300468,"body_markdown":"Save the pixmap to a PNG with PixmapIO. Twitter (and Facebook I think) just want an image file URI anyway; no need to load it as a bitmap yourself.","body":"Save the pixmap to a PNG with PixmapIO. Twitter (and Facebook I think) just want an image file URI anyway; no need to load it as a bitmap yourself."},{"owner":{"account_id":6810483,"reputation":519,"user_id":5244513,"accept_rate":44,"display_name":"Gtzzy"},"score":0,"creation_date":1455098674,"post_id":35284583,"comment_id":58333283,"body_markdown":"I thought about that. Then I will try to save the image and give an already created image path to my method.","body":"I thought about that. Then I will try to save the image and give an already created image path to my method."}],"answers":[{"tags":[],"owner":{"account_id":6810483,"reputation":519,"user_id":5244513,"accept_rate":44,"display_name":"Gtzzy"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1693596155,"creation_date":1455200964,"answer_id":35342038,"question_id":35284583,"body_markdown":"Okay. I just didn&#39;t find the solution exactly to my answer.\r\nBut I&#39;ve found another way to do what I needed. Thanks to Tenfour04.\r\n\r\nI did the following steps:\r\n\r\n 1. Created the pixmap.\r\n 2. Saved that with PixmapIO.writePNG();\r\n 3. And linked that to the Android method.\r\n\r\nThis way it works for a custom static pixmap.","title":"Convert LibGDX pixmap to Android bitmap","body":"<p>Okay. I just didn't find the solution exactly to my answer.\nBut I've found another way to do what I needed. Thanks to Tenfour04.</p>\n<p>I did the following steps:</p>\n<ol>\n<li>Created the pixmap.</li>\n<li>Saved that with PixmapIO.writePNG();</li>\n<li>And linked that to the Android method.</li>\n</ol>\n<p>This way it works for a custom static pixmap.</p>\n"},{"tags":[],"owner":{"account_id":6867226,"reputation":8143,"user_id":5279156,"display_name":"Vlad"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1505817645,"creation_date":1505806523,"answer_id":46294611,"question_id":35284583,"body_markdown":"Simple and fast\r\n\r\n    PNG writer = new PNG((int)(pixmap.getWidth() * pixmap.getHeight() * 1.5 f));\r\n    writer.setFlipY(false);\r\n    ByteArrayOutputStream output = new ByteArrayOutputStream();\r\n    try {\r\n     writer.write(output, pixmap);\r\n    } finally {\r\n     StreamUtils.closeQuietly(output);\r\n     writer.dispose();\r\n     pixmap.dispose();\r\n    }\r\n    byte[] bytes = output.toByteArray();\r\n    Bitmap bitmap = BitmapFactory.decodeByteArray(bytes, 0, bytes.length);","title":"Convert LibGDX pixmap to Android bitmap","body":"<p>Simple and fast</p>\n\n<pre><code>PNG writer = new PNG((int)(pixmap.getWidth() * pixmap.getHeight() * 1.5 f));\nwriter.setFlipY(false);\nByteArrayOutputStream output = new ByteArrayOutputStream();\ntry {\n writer.write(output, pixmap);\n} finally {\n StreamUtils.closeQuietly(output);\n writer.dispose();\n pixmap.dispose();\n}\nbyte[] bytes = output.toByteArray();\nBitmap bitmap = BitmapFactory.decodeByteArray(bytes, 0, bytes.length);\n</code></pre>\n"}],"owner":{"account_id":6810483,"reputation":519,"user_id":5244513,"accept_rate":44,"display_name":"Gtzzy"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1013,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":35342038,"answer_count":2,"score":2,"last_activity_date":1693596155,"creation_date":1454995816,"question_id":35284583,"body_markdown":"I&#39;m just trying to convert Pixmap to the Bitmap.\r\nHere is how I&#39;m creating the pixmap\r\n\r\n    screenShot = ScreenUtils.getFrameBufferTexture().getTexture().getTextureData().consumePixmap();\r\nAnd that&#39;s how I&#39;m trying to convert Pixmap to Bitmap.\r\n\r\n    Bitmap mBitmap = BitmapFactory.decodeByteArray(screenshot.getPixels().array(), 0, screenshot.getPixels().array().length);\r\n\r\nBut that&#39;s crashes on the second line I gave you there.\r\nI would really appreciate any help. Thanks.\r\n\r\n","title":"Convert LibGDX pixmap to Android bitmap","body":"<p>I'm just trying to convert Pixmap to the Bitmap.\nHere is how I'm creating the pixmap</p>\n\n<pre><code>screenShot = ScreenUtils.getFrameBufferTexture().getTexture().getTextureData().consumePixmap();\n</code></pre>\n\n<p>And that's how I'm trying to convert Pixmap to Bitmap.</p>\n\n<pre><code>Bitmap mBitmap = BitmapFactory.decodeByteArray(screenshot.getPixels().array(), 0, screenshot.getPixels().array().length);\n</code></pre>\n\n<p>But that's crashes on the second line I gave you there.\nI would really appreciate any help. Thanks.</p>\n"},{"tags":["java","android","kotlin","android-layout","viewbinding"],"comments":[{"owner":{"account_id":238127,"reputation":86162,"user_id":506796,"accept_rate":83,"display_name":"Tenfour04"},"score":1,"creation_date":1693594835,"post_id":77024027,"comment_id":135786679,"body_markdown":"You can&#39;t fuse bindings because bindings are generated at compile time. Unfortunately, bindings do not generate interfaces, or we could easily fuse the two interfaces by delegation into one class. Also, something to consider regarding the base Activity concept: https://stackoverflow.com/a/72994918/506796 And consider that it is poor encapsulation for a child class to need to directly touch the views (binding) of the parent class. All the more reason to use composition instead of inheritance for this specific case.","body":"You can&#39;t fuse bindings because bindings are generated at compile time. Unfortunately, bindings do not generate interfaces, or we could easily fuse the two interfaces by delegation into one class. Also, something to consider regarding the base Activity concept: <a href=\"https://stackoverflow.com/a/72994918/506796\">stackoverflow.com/a/72994918/506796</a> And consider that it is poor encapsulation for a child class to need to directly touch the views (binding) of the parent class. All the more reason to use composition instead of inheritance for this specific case."}],"answers":[{"tags":[],"owner":{"account_id":7257,"reputation":30102,"user_id":12541,"display_name":"Scott Stanchfield"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693595715,"creation_date":1693594883,"answer_id":77025473,"question_id":77024027,"body_markdown":"Looks like [that answer](https://stackoverflow.com/a/64461332/2474454) is close. I think all you need is a `ViewGroup.addView()`.\r\n\r\nHow about the following. (Not sure if you really need the `CoordinatorLayout` from your example; could replace it with a `FrameLayout` if you don&#39;t need the extra support)\r\n\r\n```kotlin\r\n// Copyright 2023 Google LLC.\r\n// SPDX-License-Identifier: Apache-2.0\r\n\r\nabstract class ParentActivity : AppCompatActivity() {\r\n    private lateinit var binding: ActivityParentBinding // for parent stuff\r\n\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n\r\n        binding = ActivityParentBinding.inflate(layoutInflater)\r\n        binding.abstractViewContainer.addView(createContentView()) // add the child\r\n        setContentView(binding.root)\r\n\r\n        // ...\r\n    }\r\n\r\n    abstract fun createContentView(): View\r\n}\r\n\r\nclass ChildActivity: ParentActivity() {\r\n    private lateinit var binding: ActivityChildBinding // for child stuff\r\n\r\n    override fun createContentView(): View {\r\n        binding = ActivityChildBinding.inflate(layoutInflater)\r\n        return binding.root\r\n    }\r\n}\r\n```","title":"How to dynamically use ViewBinding with nested activities on Android?","body":"<p>Looks like <a href=\"https://stackoverflow.com/a/64461332/2474454\">that answer</a> is close. I think all you need is a <code>ViewGroup.addView()</code>.</p>\n<p>How about the following. (Not sure if you really need the <code>CoordinatorLayout</code> from your example; could replace it with a <code>FrameLayout</code> if you don't need the extra support)</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>// Copyright 2023 Google LLC.\n// SPDX-License-Identifier: Apache-2.0\n\nabstract class ParentActivity : AppCompatActivity() {\n    private lateinit var binding: ActivityParentBinding // for parent stuff\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n\n        binding = ActivityParentBinding.inflate(layoutInflater)\n        binding.abstractViewContainer.addView(createContentView()) // add the child\n        setContentView(binding.root)\n\n        // ...\n    }\n\n    abstract fun createContentView(): View\n}\n\nclass ChildActivity: ParentActivity() {\n    private lateinit var binding: ActivityChildBinding // for child stuff\n\n    override fun createContentView(): View {\n        binding = ActivityChildBinding.inflate(layoutInflater)\n        return binding.root\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":2884204,"reputation":207,"user_id":2474454,"accept_rate":100,"display_name":"Akhu"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":84,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1693595715,"creation_date":1693579147,"question_id":77024027,"body_markdown":"So I have this structure that I wanted to replace the working code with viewBinding instead of findViewById&lt;&gt;\r\n\r\n```kotlin\r\nabstract class ParentActivity: AppCompatActivity() \r\n\r\nclass ChildActivity: ParentActivity() \r\n\r\n```\r\n\r\n`activity_parent.xml` is a layout that contain a placeholder for a dynamically replaced child layout using `setContentView` override below:\r\n\r\nSo in `ParentActivity.kt`\r\n```kotlin\r\nabstract class ParentActivity : AppCompatActivity()\r\n    override fun setContentView(layoutResID: Int) {\r\n        val parent = LayoutInflater.from(this).inflate(R.layout.activity_parent, null)\r\n        LayoutInflater.from(this).inflate(layoutResID, parent.findViewById(R.id.abstractViewContainer) as androidx.coordinatorlayout.widget.CoordinatorLayout, true)\r\n        super.setContentView(parent)\r\n    }\r\n     \r\n    // ... Shared code\r\n\r\n}\r\n```\r\n\r\n`activity_parent.xml`\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:orientation=&quot;vertical&quot;\r\n    tools:context=&quot;.nestedActivity.ParentActivity&quot;&gt;\r\n\r\n    &lt;TextView\r\n        android:id=&quot;@+id/parentTextView&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:text=&quot;Hello I am Parent Activity&quot;\r\n        /&gt;\r\n    &lt;androidx.coordinatorlayout.widget.CoordinatorLayout\r\n        android:id=&quot;@+id/abstractViewContainer&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        android:layout_below=&quot;@id/parentTextView&quot;&gt;\r\n\r\n&lt;/LinearLayout&gt;\r\n\r\n```\r\n\r\n`ChildActivity.kt`\r\n```kotlin\r\nclass ChildActivity : ParentActivity() {\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n        setContentView(R.layout.activity_child)\r\n    }\r\n}\r\n```\r\n\r\nIs there a way to use `ViewBinding` instead of the old solution here?\r\n\r\n&gt; This code is more than 10 years ago, today I would just use `fragments` and `nav_graph` \r\n (or just compose) but here I need to keep the nested activites architecture because of legacy implication of parent activity over thousands of other activites.\r\n\r\nSolutions like this : https://stackoverflow.com/a/64461332/2474454 won&#39;t apply to my case, I want to fusion the ActivityParentBinding with ActivityChildBinding dynamically according to the child.","title":"How to dynamically use ViewBinding with nested activities on Android?","body":"<p>So I have this structure that I wanted to replace the working code with viewBinding instead of findViewById&lt;&gt;</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>abstract class ParentActivity: AppCompatActivity() \n\nclass ChildActivity: ParentActivity() \n\n</code></pre>\n<p><code>activity_parent.xml</code> is a layout that contain a placeholder for a dynamically replaced child layout using <code>setContentView</code> override below:</p>\n<p>So in <code>ParentActivity.kt</code></p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>abstract class ParentActivity : AppCompatActivity()\n    override fun setContentView(layoutResID: Int) {\n        val parent = LayoutInflater.from(this).inflate(R.layout.activity_parent, null)\n        LayoutInflater.from(this).inflate(layoutResID, parent.findViewById(R.id.abstractViewContainer) as androidx.coordinatorlayout.widget.CoordinatorLayout, true)\n        super.setContentView(parent)\n    }\n     \n    // ... Shared code\n\n}\n</code></pre>\n<p><code>activity_parent.xml</code></p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:orientation=&quot;vertical&quot;\n    tools:context=&quot;.nestedActivity.ParentActivity&quot;&gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/parentTextView&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:text=&quot;Hello I am Parent Activity&quot;\n        /&gt;\n    &lt;androidx.coordinatorlayout.widget.CoordinatorLayout\n        android:id=&quot;@+id/abstractViewContainer&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot;\n        android:layout_below=&quot;@id/parentTextView&quot;&gt;\n\n&lt;/LinearLayout&gt;\n\n</code></pre>\n<p><code>ChildActivity.kt</code></p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>class ChildActivity : ParentActivity() {\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_child)\n    }\n}\n</code></pre>\n<p>Is there a way to use <code>ViewBinding</code> instead of the old solution here?</p>\n<blockquote>\n<p>This code is more than 10 years ago, today I would just use <code>fragments</code> and <code>nav_graph</code>\n(or just compose) but here I need to keep the nested activites architecture because of legacy implication of parent activity over thousands of other activites.</p>\n</blockquote>\n<p>Solutions like this : <a href=\"https://stackoverflow.com/a/64461332/2474454\">https://stackoverflow.com/a/64461332/2474454</a> won't apply to my case, I want to fusion the ActivityParentBinding with ActivityChildBinding dynamically according to the child.</p>\n"},{"tags":["java","date","datetime","java-8","difference"],"comments":[{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1410274110,"post_id":25747499,"comment_id":40259336,"body_markdown":"Just a guess, but might `Period.between()` apply some rounding?","body":"Just a guess, but might <code>Period.between()</code> apply some rounding?"},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":3,"creation_date":1410276632,"post_id":25747499,"comment_id":40261063,"body_markdown":"I just looked at the code once more and it seems the website is wrong (Try calculating yourself). If you omit the date, i.e. differences in year, month and day, you&#39;ll get the start time `7:45:55` and the end time `19:46:45` (or `7:46:45` PM). So the difference between those two times is 12 hours, 0 minutes and 50 seconds and _never_ 23 hours, 34 minutes and 12 seconds. So your calculation actualle seems to be correct, at least on the time part.","body":"I just looked at the code once more and it seems the website is wrong (Try calculating yourself). If you omit the date, i.e. differences in year, month and day, you&#39;ll get the start time <code>7:45:55</code> and the end time <code>19:46:45</code> (or <code>7:46:45</code> PM). So the difference between those two times is 12 hours, 0 minutes and 50 seconds and <i>never</i> 23 hours, 34 minutes and 12 seconds. So your calculation actualle seems to be correct, at least on the time part."},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":1,"creation_date":1410276883,"post_id":25747499,"comment_id":40261217,"body_markdown":"Interesting phenomenon on that website: add 10 years to starting date and the difference in hours changes from 23 to 8 - surely a sign of bug.","body":"Interesting phenomenon on that website: add 10 years to starting date and the difference in hours changes from 23 to 8 - surely a sign of bug."},{"owner":{"account_id":1806558,"reputation":4512,"user_id":1643558,"accept_rate":73,"display_name":"tgkprog"},"score":0,"creation_date":1410285937,"post_id":25747499,"comment_id":40265791,"body_markdown":"added 1 year, 4 and 10 - no change in hours","body":"added 1 year, 4 and 10 - no change in hours"},{"owner":{"account_id":280829,"reputation":28956,"user_id":576758,"accept_rate":83,"display_name":"Tapas Bose"},"score":0,"creation_date":1410287362,"post_id":25747499,"comment_id":40266464,"body_markdown":"@Thomas did you see the second link in my update?","body":"@Thomas did you see the second link in my update?"},{"owner":{"account_id":1548079,"reputation":128727,"user_id":1441122,"display_name":"Stuart Marks"},"score":10,"creation_date":1410291590,"post_id":25747499,"comment_id":40268348,"body_markdown":"Note that since `LocalDateTime` has no time zone, there might not be a unique answer. Even if you assume the start and end time zones are the same, in certain zones dates like 2014-09-09 will be in Daylight Saving Time or Summer Time and in others it will not. This might throw things off by an hour. So computing the difference to the second is meaningless unless this is resolved.","body":"Note that since <code>LocalDateTime</code> has no time zone, there might not be a unique answer. Even if you assume the start and end time zones are the same, in certain zones dates like 2014-09-09 will be in Daylight Saving Time or Summer Time and in others it will not. This might throw things off by an hour. So computing the difference to the second is meaningless unless this is resolved."},{"owner":{"account_id":218057,"reputation":67738,"user_id":474189,"accept_rate":72,"display_name":"Duncan Jones"},"score":0,"creation_date":1410331630,"post_id":25747499,"comment_id":40280245,"body_markdown":"&quot;***I  have tested my result from another website and the result I got is different***&quot; &gt; So that matches your Java code. Seems like this question is now redundant - the other website is broken.","body":"&quot;<b><i>I  have tested my result from another website and the result I got is different</i></b>&quot; &gt; So that matches your Java code. Seems like this question is now redundant - the other website is broken."},{"owner":{"account_id":280829,"reputation":28956,"user_id":576758,"accept_rate":83,"display_name":"Tapas Bose"},"score":0,"creation_date":1410334439,"post_id":25747499,"comment_id":40281603,"body_markdown":"@Duncan please see update, the question is not redundant.","body":"@Duncan please see update, the question is not redundant."},{"owner":{"account_id":280829,"reputation":28956,"user_id":576758,"accept_rate":83,"display_name":"Tapas Bose"},"score":0,"creation_date":1410334737,"post_id":25747499,"comment_id":40281757,"body_markdown":"@StuartMarks then I need to use `ZonedDateTime`; right?","body":"@StuartMarks then I need to use <code>ZonedDateTime</code>; right?"},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1410337101,"post_id":25747499,"comment_id":40282965,"body_markdown":"@TapasBose if you look at your code for getting the date period you&#39;ll notice that the time part is stripped and thus only the date is considered. That&#39;s why you get 24 days instead of 23.","body":"@TapasBose if you look at your code for getting the date period you&#39;ll notice that the time part is stripped and thus only the date is considered. That&#39;s why you get 24 days instead of 23."},{"owner":{"account_id":1548079,"reputation":128727,"user_id":1441122,"display_name":"Stuart Marks"},"score":0,"creation_date":1410359178,"post_id":25747499,"comment_id":40296399,"body_markdown":"`ZonedDateTime` will help avoid the particular problem I mentioned.","body":"<code>ZonedDateTime</code> will help avoid the particular problem I mentioned."},{"owner":{"account_id":1042653,"reputation":71,"user_id":1048345,"display_name":"GeT"},"score":0,"creation_date":1462785612,"post_id":25747499,"comment_id":61765420,"body_markdown":"What about `java.time.Duration.between(Temporal a, Temporal b)` ?\n\nAccording to javadoc:\nObtains a Duration representing the duration between two temporal objects.\nThis calculates the duration between two temporal objects. If the objects are of different types, then the duration is calculated based on the type of the first object. For example, if the first argument is a LocalTime then the second argument is converted to a LocalTime.","body":"What about <code>java.time.Duration.between(Temporal a, Temporal b)</code> ?  According to javadoc: Obtains a Duration representing the duration between two temporal objects. This calculates the duration between two temporal objects. If the objects are of different types, then the duration is calculated based on the type of the first object. For example, if the first argument is a LocalTime then the second argument is converted to a LocalTime."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":2,"creation_date":1511546095,"post_id":25747499,"comment_id":81910934,"body_markdown":"Do you understand that using `LocalDateTime` yields unrealistic results, as that class purposely lacks any concept of time zone or offset-from-UTC? For realistic values, assign a time zone via `ZoneId` to use `ZonedDateTime`.","body":"Do you understand that using <code>LocalDateTime</code> yields unrealistic results, as that class purposely lacks any concept of time zone or offset-from-UTC? For realistic values, assign a time zone via <code>ZoneId</code> to use <code>ZonedDateTime</code>."}],"answers":[{"comments":[{"owner":{"account_id":2906108,"reputation":42988,"user_id":2491410,"accept_rate":100,"display_name":"Meno Hochschild"},"score":1,"creation_date":1410350469,"post_id":25760725,"comment_id":40290444,"body_markdown":"You have the same basic idea, therefore my upvote, but please try to use the same input otherwise the different result is confusing.","body":"You have the same basic idea, therefore my upvote, but please try to use the same input otherwise the different result is confusing."},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1410350806,"post_id":25760725,"comment_id":40290646,"body_markdown":"@MenoHochschild it _is_ the same input, just taken from the update where the OP has issues with negative times. ;)","body":"@MenoHochschild it <i>is</i> the same input, just taken from the update where the OP has issues with negative times. ;)"},{"owner":{"account_id":2906108,"reputation":42988,"user_id":2491410,"accept_rate":100,"display_name":"Meno Hochschild"},"score":0,"creation_date":1410351532,"post_id":25760725,"comment_id":40291204,"body_markdown":"Ah I see. Just saw the first input at the start of OPs posting.","body":"Ah I see. Just saw the first input at the start of OPs posting."},{"owner":{"account_id":1622372,"reputation":2581,"user_id":1498669,"display_name":"Bernhard"},"score":0,"creation_date":1411124820,"post_id":25760725,"comment_id":40596446,"body_markdown":"thats bad of JSR310 because JodaTime hat it:\nPeriod p = new Period(date1, date2, PeriodType.yearMonthDayTime());\nint yrs = p.getYears();\nint mon = p.getMonths();\nint day = p.getDays();\nint hrs = p.getHours();\nint min = p.getMinutes();\nint sec = p.getSeconds();\nint mil = p.getMillis();","body":"thats bad of JSR310 because JodaTime hat it: Period p = new Period(date1, date2, PeriodType.yearMonthDayTime()); int yrs = p.getYears(); int mon = p.getMonths(); int day = p.getDays(); int hrs = p.getHours(); int min = p.getMinutes(); int sec = p.getSeconds(); int mil = p.getMillis();"},{"owner":{"account_id":339155,"reputation":8863,"user_id":668455,"accept_rate":80,"display_name":"Tristan"},"score":1,"creation_date":1426618821,"post_id":25760725,"comment_id":46444690,"body_markdown":"Good algorithm, but wrong type (see Thomas disclaimer). Before doing your calculation, you should convert your LocalDateTime variables to ZonedDateTime using default time zone for example (or any time zone you need) : ZonedDateTime fromZonedDateTime = fromDateTime.atZone(ZoneId.systemDefault());","body":"Good algorithm, but wrong type (see Thomas disclaimer). Before doing your calculation, you should convert your LocalDateTime variables to ZonedDateTime using default time zone for example (or any time zone you need) : ZonedDateTime fromZonedDateTime = fromDateTime.atZone(ZoneId.systemDefault());"},{"owner":{"account_id":364905,"reputation":18691,"user_id":709537,"accept_rate":72,"display_name":"Evgeniy Berezovsky"},"score":0,"creation_date":1464922882,"post_id":25760725,"comment_id":62694826,"body_markdown":"No one should be doing it this awkwardly in the presence of `ChronoUnit`, which is part of `java.time`, as presented by satnam.","body":"No one should be doing it this awkwardly in the presence of <code>ChronoUnit</code>, which is part of <code>java.time</code>, as presented by satnam."},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1464939458,"post_id":25760725,"comment_id":62700899,"body_markdown":"@EugeneBeresovsky you&#39;re right, if one is able to use Java 8 (which wasn&#39;t widely spread when I posted the answer) - and even today not everyone is able to use Java 8.","body":"@EugeneBeresovsky you&#39;re right, if one is able to use Java 8 (which wasn&#39;t widely spread when I posted the answer) - and even today not everyone is able to use Java 8."},{"owner":{"account_id":364905,"reputation":18691,"user_id":709537,"accept_rate":72,"display_name":"Evgeniy Berezovsky"},"score":2,"creation_date":1465165463,"post_id":25760725,"comment_id":62774874,"body_markdown":"@Thomas Your example is using Java 8 as well - and the question is tagged as java-8. In fact your example is even using `ChronoUnit` :) but doing the job &quot;by hand&quot;.","body":"@Thomas Your example is using Java 8 as well - and the question is tagged as java-8. In fact your example is even using <code>ChronoUnit</code> :) but doing the job &quot;by hand&quot;."},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":3,"creation_date":1465198643,"post_id":25760725,"comment_id":62783389,"body_markdown":"@EugeneBeresovsky oh yes, you&#39;re right. Totally missed that ;) - Besides that, you&#39;d still have to subtract the larger units from the interval since for example `long minutes = ChronoUnit.MINUTES.between(fromDate, toDate);` would return a number greater than 59 for any interval of at least 1 hour - and that&#39;s not what the OP wants. Taking that into account you&#39;d not be able to just make 6 calls to `ChronoUnit#between()` and be done.","body":"@EugeneBeresovsky oh yes, you&#39;re right. Totally missed that ;) - Besides that, you&#39;d still have to subtract the larger units from the interval since for example <code>long minutes = ChronoUnit.MINUTES.between(fromDate, toDate);</code> would return a number greater than 59 for any interval of at least 1 hour - and that&#39;s not what the OP wants. Taking that into account you&#39;d not be able to just make 6 calls to <code>ChronoUnit#between()</code> and be done."}],"tags":[],"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"comment_count":9,"down_vote_count":8,"up_vote_count":235,"is_accepted":true,"score":227,"last_activity_date":1577700610,"creation_date":1410337883,"answer_id":25760725,"question_id":25747499,"body_markdown":"Unfortunately, there doesn&#39;t seem to be a period class that spans time as well, so you might have to do the calculations on your own.\r\n\r\nFortunately, the date and time classes have a lot of utility methods that simplify that to some degree. Here&#39;s a way to calculate the difference although not necessarily the fastest:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    LocalDateTime fromDateTime = LocalDateTime.of(1984, 12, 16, 7, 45, 55);\r\n    LocalDateTime toDateTime = LocalDateTime.of(2014, 9, 10, 6, 40, 45);\r\n\r\n    LocalDateTime tempDateTime = LocalDateTime.from( fromDateTime );\r\n    \r\n    long years = tempDateTime.until( toDateTime, ChronoUnit.YEARS );\r\n    tempDateTime = tempDateTime.plusYears( years );\r\n    \r\n    long months = tempDateTime.until( toDateTime, ChronoUnit.MONTHS );\r\n    tempDateTime = tempDateTime.plusMonths( months );\r\n    \r\n    long days = tempDateTime.until( toDateTime, ChronoUnit.DAYS );\r\n    tempDateTime = tempDateTime.plusDays( days );\r\n\r\n    \r\n    long hours = tempDateTime.until( toDateTime, ChronoUnit.HOURS );\r\n    tempDateTime = tempDateTime.plusHours( hours );\r\n    \r\n    long minutes = tempDateTime.until( toDateTime, ChronoUnit.MINUTES );\r\n    tempDateTime = tempDateTime.plusMinutes( minutes );\r\n    \r\n    long seconds = tempDateTime.until( toDateTime, ChronoUnit.SECONDS );\r\n    \r\n    System.out.println( years + &quot; years &quot; + \r\n            months + &quot; months &quot; + \r\n            days + &quot; days &quot; +\r\n            hours + &quot; hours &quot; +\r\n            minutes + &quot; minutes &quot; +\r\n            seconds + &quot; seconds.&quot;);\r\n\r\n    //prints: 29 years 8 months 24 days 22 hours 54 minutes 50 seconds.\r\n\r\n\r\nThe basic idea is this: create a temporary start date and get the full years to the end. Then adjust that date by the number of years so that the start date is less then a year from the end. Repeat that for each time unit in descending order.\r\n\r\n_Finally a disclaimer_: I didn&#39;t take different timezones into account (both dates should be in the same timezone) and I also didn&#39;t test/check how daylight saving time or other changes in a calendar (like the timezone changes in Samoa) affect this calculation. So use with care.","title":"Java 8: Difference between two LocalDateTime in multiple units","body":"<p>Unfortunately, there doesn't seem to be a period class that spans time as well, so you might have to do the calculations on your own.</p>\n\n<p>Fortunately, the date and time classes have a lot of utility methods that simplify that to some degree. Here's a way to calculate the difference although not necessarily the fastest:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>LocalDateTime fromDateTime = LocalDateTime.of(1984, 12, 16, 7, 45, 55);\nLocalDateTime toDateTime = LocalDateTime.of(2014, 9, 10, 6, 40, 45);\n\nLocalDateTime tempDateTime = LocalDateTime.from( fromDateTime );\n\nlong years = tempDateTime.until( toDateTime, ChronoUnit.YEARS );\ntempDateTime = tempDateTime.plusYears( years );\n\nlong months = tempDateTime.until( toDateTime, ChronoUnit.MONTHS );\ntempDateTime = tempDateTime.plusMonths( months );\n\nlong days = tempDateTime.until( toDateTime, ChronoUnit.DAYS );\ntempDateTime = tempDateTime.plusDays( days );\n\n\nlong hours = tempDateTime.until( toDateTime, ChronoUnit.HOURS );\ntempDateTime = tempDateTime.plusHours( hours );\n\nlong minutes = tempDateTime.until( toDateTime, ChronoUnit.MINUTES );\ntempDateTime = tempDateTime.plusMinutes( minutes );\n\nlong seconds = tempDateTime.until( toDateTime, ChronoUnit.SECONDS );\n\nSystem.out.println( years + \" years \" + \n        months + \" months \" + \n        days + \" days \" +\n        hours + \" hours \" +\n        minutes + \" minutes \" +\n        seconds + \" seconds.\");\n\n//prints: 29 years 8 months 24 days 22 hours 54 minutes 50 seconds.\n</code></pre>\n\n<p>The basic idea is this: create a temporary start date and get the full years to the end. Then adjust that date by the number of years so that the start date is less then a year from the end. Repeat that for each time unit in descending order.</p>\n\n<p><em>Finally a disclaimer</em>: I didn't take different timezones into account (both dates should be in the same timezone) and I also didn't test/check how daylight saving time or other changes in a calendar (like the timezone changes in Samoa) affect this calculation. So use with care.</p>\n"},{"comments":[{"owner":{"account_id":2906108,"reputation":42988,"user_id":2491410,"accept_rate":100,"display_name":"Meno Hochschild"},"score":10,"creation_date":1421467844,"post_id":26954864,"comment_id":44382444,"body_markdown":"I don&#39;t see a real improvement. Compared with accepted Thomas&#39; answer you just replace `tempDateTime.until( toDateTime, ChronoUnit.YEARS)` with `ChronoUnit.YEARS.between(fromDate, toDate)`. But the important additional lines like `tempDateTime.plusYears( years )` etc. are completely missing in your answer so it does not help the OP. The complete algorithm matters!","body":"I don&#39;t see a real improvement. Compared with accepted Thomas&#39; answer you just replace <code>tempDateTime.until( toDateTime, ChronoUnit.YEARS)</code> with <code>ChronoUnit.YEARS.between(fromDate, toDate)</code>. But the important additional lines like <code>tempDateTime.plusYears( years )</code> etc. are completely missing in your answer so it does not help the OP. The complete algorithm matters!"},{"owner":{"account_id":255184,"reputation":7191,"user_id":535060,"accept_rate":94,"display_name":"Somaiah Kumbera"},"score":20,"creation_date":1463991631,"post_id":26954864,"comment_id":62281768,"body_markdown":"I like this better since it is more succinct, and more read readable. This is the best way to find the difference between two dates.","body":"I like this better since it is more succinct, and more read readable. This is the best way to find the difference between two dates."},{"owner":{"account_id":2906108,"reputation":42988,"user_id":2491410,"accept_rate":100,"display_name":"Meno Hochschild"},"score":8,"creation_date":1465418967,"post_id":26954864,"comment_id":62898977,"body_markdown":"@SomaiahKumbera No you completely miss the critical point. **The OP does not want a duration in only one unit but multiple units**, and therefore this answer is not a real answer at all. The OP&#39;s concern is simply not addressed. Please be so kind to read again the question. (A lot of upvoters seem to have misunderstood the question).","body":"@SomaiahKumbera No you completely miss the critical point. <b>The OP does not want a duration in only one unit but multiple units</b>, and therefore this answer is not a real answer at all. The OP&#39;s concern is simply not addressed. Please be so kind to read again the question. (A lot of upvoters seem to have misunderstood the question)."},{"owner":{"account_id":73141,"reputation":10927,"user_id":210791,"accept_rate":57,"display_name":"satnam"},"score":185,"creation_date":1465423308,"post_id":26954864,"comment_id":62900973,"body_markdown":"@MenoHochschild, I think you are actually the one missing the critical point. The OP got their answer over a year ago. The 36 thousand people who are viewing this question do not care about the OP&#39;s specific question. They were lead here by google and my answer provided them with what they were looking for -- a clean and simple solution for getting the difference between two dates.","body":"@MenoHochschild, I think you are actually the one missing the critical point. The OP got their answer over a year ago. The 36 thousand people who are viewing this question do not care about the OP&#39;s specific question. They were lead here by google and my answer provided them with what they were looking for -- a clean and simple solution for getting the difference between two dates."},{"owner":{"account_id":2906108,"reputation":42988,"user_id":2491410,"accept_rate":100,"display_name":"Meno Hochschild"},"score":4,"creation_date":1465449865,"post_id":26954864,"comment_id":62907808,"body_markdown":"&quot;do not care about the OP&#39;s specific question&quot; is a honest statement and confirms my observation that many people simply misunderstand the question in a shortened way. The aspect about `ChronoUnit.between(...)` is nothing new but can be found several times here on SO - [example link with an answer of the main author of JSR-310](http://stackoverflow.com/q/11187639)","body":"&quot;do not care about the OP&#39;s specific question&quot; is a honest statement and confirms my observation that many people simply misunderstand the question in a shortened way. The aspect about <code>ChronoUnit.between(...)</code> is nothing new but can be found several times here on SO - <a href=\"http://stackoverflow.com/q/11187639\">example link with an answer of the main author of JSR-310</a>"},{"owner":{"account_id":1310169,"reputation":3813,"user_id":1258319,"accept_rate":81,"display_name":"Julian"},"score":16,"creation_date":1479243754,"post_id":26954864,"comment_id":68473476,"body_markdown":"I needed the seconds difference between two date times and started implementing my own solution. Shortly it seems to complex and I took on google. satnam answer may not answer OP question but for sure helped me a lot and I bet many many others like me.","body":"I needed the seconds difference between two date times and started implementing my own solution. Shortly it seems to complex and I took on google. satnam answer may not answer OP question but for sure helped me a lot and I bet many many others like me."},{"owner":{"account_id":1580942,"reputation":669,"user_id":1466346,"display_name":"DHa"},"score":1,"creation_date":1508416463,"post_id":26954864,"comment_id":80607224,"body_markdown":"This answers the title of the question &#39;Calculate difference between two LocalDateTime&#39;. The actual question has little to do with the title, thus the confusion and the many upvotes.","body":"This answers the title of the question &#39;Calculate difference between two LocalDateTime&#39;. The actual question has little to do with the title, thus the confusion and the many upvotes."},{"owner":{"account_id":4888356,"reputation":2983,"user_id":3940133,"accept_rate":100,"display_name":"HendraWD"},"score":0,"creation_date":1528551273,"post_id":26954864,"comment_id":88556537,"body_markdown":"In my case I want to check if the date is yesterday and it will fail if the difference between 24 hours although the days are different. So I had to use my custom checker. I shared the checker here if anyone want to use or can help me to optimize https://gist.github.com/hendrawd/9f9b77557b16579c84759c5c699b5343","body":"In my case I want to check if the date is yesterday and it will fail if the difference between 24 hours although the days are different. So I had to use my custom checker. I shared the checker here if anyone want to use or can help me to optimize <a href=\"https://gist.github.com/hendrawd/9f9b77557b16579c84759c5c699b5343\" rel=\"nofollow noreferrer\">gist.github.com/hendrawd/9f9b77557b16579c84759c5c699b5343</a>"},{"owner":{"account_id":4308682,"reputation":12633,"user_id":3520404,"display_name":"saran3h"},"score":0,"creation_date":1678530713,"post_id":26954864,"comment_id":133553000,"body_markdown":"This is by far the most clear and straightforward solution. Funny seeing people trying all sorts of wizardry for something so simple.","body":"This is by far the most clear and straightforward solution. Funny seeing people trying all sorts of wizardry for something so simple."}],"tags":[],"owner":{"account_id":73141,"reputation":10927,"user_id":210791,"accept_rate":57,"display_name":"satnam"},"comment_count":9,"down_vote_count":4,"up_vote_count":709,"is_accepted":false,"score":705,"last_activity_date":1687385869,"creation_date":1416123282,"answer_id":26954864,"question_id":25747499,"body_markdown":"I found the best way to do this is with **ChronoUnit.**\r\n\r\n    long minutes = ChronoUnit.MINUTES.between(fromDate, toDate);\r\n    long hours = ChronoUnit.HOURS.between(fromDate, toDate);\r\n\r\nAdditional documentation is here: [Period and Duration](https://docs.oracle.com/javase/tutorial/datetime/iso/period.html)","title":"Java 8: Difference between two LocalDateTime in multiple units","body":"<p>I found the best way to do this is with <strong>ChronoUnit.</strong></p>\n<pre><code>long minutes = ChronoUnit.MINUTES.between(fromDate, toDate);\nlong hours = ChronoUnit.HOURS.between(fromDate, toDate);\n</code></pre>\n<p>Additional documentation is here: <a href=\"https://docs.oracle.com/javase/tutorial/datetime/iso/period.html\" rel=\"noreferrer\">Period and Duration</a></p>\n"},{"comments":[{"owner":{"account_id":2906108,"reputation":42988,"user_id":2491410,"accept_rate":100,"display_name":"Meno Hochschild"},"score":0,"creation_date":1434363660,"post_id":30800672,"comment_id":49728902,"body_markdown":"I cannot reproduce your statement that Thomas code using your input above produces mixed signs. My output is: &quot;0 years 0 months 0 days 23 hours 0 minutes 0 seconds.&quot;. And I have tested just now.","body":"I cannot reproduce your statement that Thomas code using your input above produces mixed signs. My output is: &quot;0 years 0 months 0 days 23 hours 0 minutes 0 seconds.&quot;. And I have tested just now."},{"owner":{"account_id":6457596,"reputation":119,"user_id":5002447,"display_name":"Hennadii Kolomoiets"},"score":0,"creation_date":1434659948,"post_id":30800672,"comment_id":49887542,"body_markdown":"Thank you for the comment. I thoroughly tested the Thomas code,  indeed, it is working correctly! The magic is done by LocalDateTime until method correcting chrono units. Negative values in the  Thomas code appear if the first DateTime is later than the second. But this can be easily corrected, for example, as I did in the above code. Thanks again.","body":"Thank you for the comment. I thoroughly tested the Thomas code,  indeed, it is working correctly! The magic is done by LocalDateTime until method correcting chrono units. Negative values in the  Thomas code appear if the first DateTime is later than the second. But this can be easily corrected, for example, as I did in the above code. Thanks again."},{"owner":{"account_id":2906108,"reputation":42988,"user_id":2491410,"accept_rate":100,"display_name":"Meno Hochschild"},"score":0,"creation_date":1434702515,"post_id":30800672,"comment_id":49902045,"body_markdown":"Well, Thomas code and my library Time4J using the same algorithm for calculation of durations can produce negative signs but only for the whole duration. That is the crucial point! The sign relates to the whole duration and hence describes if the start is later than the end and is never related to single duration components. Mixed signs are not possible here and would prevent such an interpretation of start relative to end (counter example are Joda-Time-period or `java.time.Period` where users can enforce/produce such mixed signs due to different internal design).","body":"Well, Thomas code and my library Time4J using the same algorithm for calculation of durations can produce negative signs but only for the whole duration. That is the crucial point! The sign relates to the whole duration and hence describes if the start is later than the end and is never related to single duration components. Mixed signs are not possible here and would prevent such an interpretation of start relative to end (counter example are Joda-Time-period or <code>java.time.Period</code> where users can enforce/produce such mixed signs due to different internal design)."}],"tags":[],"owner":{"account_id":6457596,"reputation":119,"user_id":5002447,"display_name":"Hennadii Kolomoiets"},"comment_count":3,"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1457852166,"creation_date":1434104462,"answer_id":30800672,"question_id":25747499,"body_markdown":"There is some problem for Tapas Bose code and Thomas code. If time differenсe is negative, array gets the negative values. For example if \r\n&lt;!-- begin snippet: js hide: false --&gt;\r\n&lt;!-- language: lang-java --&gt;\r\n   \r\n    LocalDateTime toDateTime = LocalDateTime.of(2014, 9, 10, 6, 46, 45);\r\n    LocalDateTime fromDateTime = LocalDateTime.of(2014, 9, 9, 7, 46, 45);\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nit returns 0 years 0 months 1 days -1 hours 0 minutes 0 seconds.\r\n\r\nI think the right output is: 0 years 0 months 0 days 23 hours 0 minutes 0 seconds.\r\n\r\nI propose to separate the LocalDateTime instances on LocalDate and LocalTime instances. After that we can obtain the Java 8 Period and Duration instances. The Duration instance is separated on the number of days and throughout-the-day time value (&lt; 24h) with subsequent correction of the period value. When the second LocalTime value is before the firstLocalTime value, it is necessary to reduce the period for one day.\r\n\r\nHere&#39;s my way to calculate the LocalDateTime difference:\r\n&lt;!-- begin snippet: js hide: false --&gt;\r\n&lt;!-- language: lang-java --&gt;\r\n   \r\n    private void getChronoUnitForSecondAfterFirst(LocalDateTime firstLocalDateTime, LocalDateTime secondLocalDateTime, long[] chronoUnits) {\r\n        /*Separate LocaldateTime on LocalDate and LocalTime*/\r\n        LocalDate firstLocalDate = firstLocalDateTime.toLocalDate();\r\n        LocalTime firstLocalTime = firstLocalDateTime.toLocalTime();\r\n\r\n        LocalDate secondLocalDate = secondLocalDateTime.toLocalDate();\r\n        LocalTime secondLocalTime = secondLocalDateTime.toLocalTime();\r\n\r\n        /*Calculate the time difference*/\r\n        Duration duration = Duration.between(firstLocalDateTime, secondLocalDateTime);\r\n        long durationDays = duration.toDays();\r\n        Duration throughoutTheDayDuration = duration.minusDays(durationDays);\r\n        Logger.getLogger(PeriodDuration.class.getName()).log(Level.INFO,\r\n                &quot;Duration is: &quot; + duration + &quot; this is &quot; + durationDays\r\n                + &quot; days and &quot; + throughoutTheDayDuration + &quot; time.&quot;);\r\n\r\n        Period period = Period.between(firstLocalDate, secondLocalDate);\r\n\r\n        /*Correct the date difference*/\r\n        if (secondLocalTime.isBefore(firstLocalTime)) {\r\n            period = period.minusDays(1);\r\n            Logger.getLogger(PeriodDuration.class.getName()).log(Level.INFO,\r\n                    &quot;minus 1 day&quot;);\r\n        }\r\n\r\n        Logger.getLogger(PeriodDuration.class.getName()).log(Level.INFO,\r\n                &quot;Period between &quot; + firstLocalDateTime + &quot; and &quot;\r\n                + secondLocalDateTime + &quot; is: &quot; + period + &quot; and duration is: &quot;\r\n                + throughoutTheDayDuration\r\n                + &quot;\\n-----------------------------------------------------------------&quot;);\r\n\r\n        /*Calculate chrono unit values and  write it in array*/\r\n        chronoUnits[0] = period.getYears();\r\n        chronoUnits[1] = period.getMonths();\r\n        chronoUnits[2] = period.getDays();\r\n        chronoUnits[3] = throughoutTheDayDuration.toHours();\r\n        chronoUnits[4] = throughoutTheDayDuration.toMinutes() % 60;\r\n        chronoUnits[5] = throughoutTheDayDuration.getSeconds() % 60;\r\n    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nThe above method can be used to calculate the difference of any local date and time values, for example:\r\n&lt;!-- begin snippet: js hide: false --&gt;\r\n&lt;!-- language: lang-java --&gt;\r\n   \r\n    public long[] getChronoUnits(String firstLocalDateTimeString, String secondLocalDateTimeString) {\r\n        DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss&quot;);\r\n\r\n        LocalDateTime firstLocalDateTime = LocalDateTime.parse(firstLocalDateTimeString, formatter);\r\n        LocalDateTime secondLocalDateTime = LocalDateTime.parse(secondLocalDateTimeString, formatter);\r\n\r\n        long[] chronoUnits = new long[6];\r\n        if (secondLocalDateTime.isAfter(firstLocalDateTime)) {\r\n            getChronoUnitForSecondAfterFirst(firstLocalDateTime, secondLocalDateTime, chronoUnits);\r\n        } else {\r\n            getChronoUnitForSecondAfterFirst(secondLocalDateTime, firstLocalDateTime, chronoUnits);\r\n        }\r\n        return chronoUnits;\r\n    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nIt is convenient to write a unit test for the above method (both of them are PeriodDuration class members). Here&#39;s the code:\r\n&lt;!-- begin snippet: js hide: false --&gt;\r\n&lt;!-- language: lang-java --&gt;\r\n   \r\n    @RunWith(Parameterized.class)\r\n    public class PeriodDurationTest {\r\n\r\n    private final String firstLocalDateTimeString;\r\n    private final String secondLocalDateTimeString;\r\n    private final long[] chronoUnits;\r\n\r\n    public PeriodDurationTest(String firstLocalDateTimeString, String secondLocalDateTimeString, long[] chronoUnits) {\r\n        this.firstLocalDateTimeString = firstLocalDateTimeString;\r\n        this.secondLocalDateTimeString = secondLocalDateTimeString;\r\n        this.chronoUnits = chronoUnits;\r\n    }\r\n\r\n    @Parameters\r\n    public static Collection&lt;Object[]&gt; periodValues() {\r\n        long[] chronoUnits0 = {0, 0, 0, 0, 0, 0};\r\n        long[] chronoUnits1 = {0, 0, 0, 1, 0, 0};\r\n        long[] chronoUnits2 = {0, 0, 0, 23, 0, 0};\r\n        long[] chronoUnits3 = {0, 0, 0, 1, 0, 0};\r\n        long[] chronoUnits4 = {0, 0, 0, 23, 0, 0};\r\n        long[] chronoUnits5 = {0, 0, 1, 23, 0, 0};\r\n        long[] chronoUnits6 = {29, 8, 24, 12, 0, 50};\r\n        long[] chronoUnits7 = {29, 8, 24, 12, 0, 50};\r\n        return Arrays.asList(new Object[][]{\r\n            {&quot;2015-09-09 21:46:44&quot;, &quot;2015-09-09 21:46:44&quot;, chronoUnits0},\r\n            {&quot;2015-09-09 21:46:44&quot;, &quot;2015-09-09 22:46:44&quot;, chronoUnits1},\r\n            {&quot;2015-09-09 21:46:44&quot;, &quot;2015-09-10 20:46:44&quot;, chronoUnits2},\r\n            {&quot;2015-09-09 21:46:44&quot;, &quot;2015-09-09 20:46:44&quot;, chronoUnits3},\r\n            {&quot;2015-09-10 20:46:44&quot;, &quot;2015-09-09 21:46:44&quot;, chronoUnits4},\r\n            {&quot;2015-09-11 20:46:44&quot;, &quot;2015-09-09 21:46:44&quot;, chronoUnits5},\r\n            {&quot;1984-12-16 07:45:55&quot;, &quot;2014-09-09 19:46:45&quot;, chronoUnits6},\r\n            {&quot;2014-09-09 19:46:45&quot;, &quot;1984-12-16 07:45:55&quot;, chronoUnits6}\r\n        });\r\n    }\r\n\r\n    @Test\r\n    public void testGetChronoUnits() {\r\n        PeriodDuration instance = new PeriodDuration();\r\n        long[] expResult = this.chronoUnits;\r\n        long[] result = instance.getChronoUnits(this.firstLocalDateTimeString, this.secondLocalDateTimeString);\r\n        assertArrayEquals(expResult, result);\r\n    }\r\n}\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nAll tests are successful whether or not the value of the first LocalDateTime is before and for any LocalTime values.","title":"Java 8: Difference between two LocalDateTime in multiple units","body":"<p>There is some problem for Tapas Bose code and Thomas code. If time differenсe is negative, array gets the negative values. For example if </p>\n\n<pre class=\"lang-java prettyprint-override\"><code>LocalDateTime toDateTime = LocalDateTime.of(2014, 9, 10, 6, 46, 45);\nLocalDateTime fromDateTime = LocalDateTime.of(2014, 9, 9, 7, 46, 45);\n</code></pre>\n\n<p>it returns 0 years 0 months 1 days -1 hours 0 minutes 0 seconds.</p>\n\n<p>I think the right output is: 0 years 0 months 0 days 23 hours 0 minutes 0 seconds.</p>\n\n<p>I propose to separate the LocalDateTime instances on LocalDate and LocalTime instances. After that we can obtain the Java 8 Period and Duration instances. The Duration instance is separated on the number of days and throughout-the-day time value (&lt; 24h) with subsequent correction of the period value. When the second LocalTime value is before the firstLocalTime value, it is necessary to reduce the period for one day.</p>\n\n<p>Here's my way to calculate the LocalDateTime difference:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>private void getChronoUnitForSecondAfterFirst(LocalDateTime firstLocalDateTime, LocalDateTime secondLocalDateTime, long[] chronoUnits) {\n    /*Separate LocaldateTime on LocalDate and LocalTime*/\n    LocalDate firstLocalDate = firstLocalDateTime.toLocalDate();\n    LocalTime firstLocalTime = firstLocalDateTime.toLocalTime();\n\n    LocalDate secondLocalDate = secondLocalDateTime.toLocalDate();\n    LocalTime secondLocalTime = secondLocalDateTime.toLocalTime();\n\n    /*Calculate the time difference*/\n    Duration duration = Duration.between(firstLocalDateTime, secondLocalDateTime);\n    long durationDays = duration.toDays();\n    Duration throughoutTheDayDuration = duration.minusDays(durationDays);\n    Logger.getLogger(PeriodDuration.class.getName()).log(Level.INFO,\n            \"Duration is: \" + duration + \" this is \" + durationDays\n            + \" days and \" + throughoutTheDayDuration + \" time.\");\n\n    Period period = Period.between(firstLocalDate, secondLocalDate);\n\n    /*Correct the date difference*/\n    if (secondLocalTime.isBefore(firstLocalTime)) {\n        period = period.minusDays(1);\n        Logger.getLogger(PeriodDuration.class.getName()).log(Level.INFO,\n                \"minus 1 day\");\n    }\n\n    Logger.getLogger(PeriodDuration.class.getName()).log(Level.INFO,\n            \"Period between \" + firstLocalDateTime + \" and \"\n            + secondLocalDateTime + \" is: \" + period + \" and duration is: \"\n            + throughoutTheDayDuration\n            + \"\\n-----------------------------------------------------------------\");\n\n    /*Calculate chrono unit values and  write it in array*/\n    chronoUnits[0] = period.getYears();\n    chronoUnits[1] = period.getMonths();\n    chronoUnits[2] = period.getDays();\n    chronoUnits[3] = throughoutTheDayDuration.toHours();\n    chronoUnits[4] = throughoutTheDayDuration.toMinutes() % 60;\n    chronoUnits[5] = throughoutTheDayDuration.getSeconds() % 60;\n}\n</code></pre>\n\n<p>The above method can be used to calculate the difference of any local date and time values, for example:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public long[] getChronoUnits(String firstLocalDateTimeString, String secondLocalDateTimeString) {\n    DateTimeFormatter formatter = DateTimeFormatter.ofPattern(\"yyyy-MM-dd HH:mm:ss\");\n\n    LocalDateTime firstLocalDateTime = LocalDateTime.parse(firstLocalDateTimeString, formatter);\n    LocalDateTime secondLocalDateTime = LocalDateTime.parse(secondLocalDateTimeString, formatter);\n\n    long[] chronoUnits = new long[6];\n    if (secondLocalDateTime.isAfter(firstLocalDateTime)) {\n        getChronoUnitForSecondAfterFirst(firstLocalDateTime, secondLocalDateTime, chronoUnits);\n    } else {\n        getChronoUnitForSecondAfterFirst(secondLocalDateTime, firstLocalDateTime, chronoUnits);\n    }\n    return chronoUnits;\n}\n</code></pre>\n\n<p>It is convenient to write a unit test for the above method (both of them are PeriodDuration class members). Here's the code:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@RunWith(Parameterized.class)\npublic class PeriodDurationTest {\n\nprivate final String firstLocalDateTimeString;\nprivate final String secondLocalDateTimeString;\nprivate final long[] chronoUnits;\n\npublic PeriodDurationTest(String firstLocalDateTimeString, String secondLocalDateTimeString, long[] chronoUnits) {\n    this.firstLocalDateTimeString = firstLocalDateTimeString;\n    this.secondLocalDateTimeString = secondLocalDateTimeString;\n    this.chronoUnits = chronoUnits;\n}\n\n@Parameters\npublic static Collection&lt;Object[]&gt; periodValues() {\n    long[] chronoUnits0 = {0, 0, 0, 0, 0, 0};\n    long[] chronoUnits1 = {0, 0, 0, 1, 0, 0};\n    long[] chronoUnits2 = {0, 0, 0, 23, 0, 0};\n    long[] chronoUnits3 = {0, 0, 0, 1, 0, 0};\n    long[] chronoUnits4 = {0, 0, 0, 23, 0, 0};\n    long[] chronoUnits5 = {0, 0, 1, 23, 0, 0};\n    long[] chronoUnits6 = {29, 8, 24, 12, 0, 50};\n    long[] chronoUnits7 = {29, 8, 24, 12, 0, 50};\n    return Arrays.asList(new Object[][]{\n        {\"2015-09-09 21:46:44\", \"2015-09-09 21:46:44\", chronoUnits0},\n        {\"2015-09-09 21:46:44\", \"2015-09-09 22:46:44\", chronoUnits1},\n        {\"2015-09-09 21:46:44\", \"2015-09-10 20:46:44\", chronoUnits2},\n        {\"2015-09-09 21:46:44\", \"2015-09-09 20:46:44\", chronoUnits3},\n        {\"2015-09-10 20:46:44\", \"2015-09-09 21:46:44\", chronoUnits4},\n        {\"2015-09-11 20:46:44\", \"2015-09-09 21:46:44\", chronoUnits5},\n        {\"1984-12-16 07:45:55\", \"2014-09-09 19:46:45\", chronoUnits6},\n        {\"2014-09-09 19:46:45\", \"1984-12-16 07:45:55\", chronoUnits6}\n    });\n}\n\n@Test\npublic void testGetChronoUnits() {\n    PeriodDuration instance = new PeriodDuration();\n    long[] expResult = this.chronoUnits;\n    long[] result = instance.getChronoUnits(this.firstLocalDateTimeString, this.secondLocalDateTimeString);\n    assertArrayEquals(expResult, result);\n}\n</code></pre>\n\n<p>}</p>\n\n<p>All tests are successful whether or not the value of the first LocalDateTime is before and for any LocalTime values.</p>\n"},{"tags":[],"owner":{"account_id":380582,"reputation":15578,"user_id":734687,"accept_rate":83,"display_name":"ChrLipp"},"comment_count":0,"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1460356152,"creation_date":1456264091,"answer_id":35588906,"question_id":25747499,"body_markdown":"And the version of @Thomas in [Groovy](http://www.groovy-lang.org/) with takes the desired units in a list instead of hardcoding the values. This implementation (which can easily ported to Java - I made the function declaration explicit) makes Thomas approach more reuseable.\r\n\r\n&lt;!-- language: lang-groovy --&gt;\r\n\r\n    def fromDateTime = LocalDateTime.of(1968, 6, 14, 0, 13, 0)\r\n    def toDateTime = LocalDateTime.now()\r\n    def listOfUnits = [\r\n        ChronoUnit.YEARS, ChronoUnit.MONTHS, ChronoUnit.DAYS,\r\n        ChronoUnit.HOURS, ChronoUnit.MINUTES, ChronoUnit.SECONDS,\r\n        ChronoUnit.MILLIS]\r\n    \r\n    println calcDurationInTextualForm(listOfUnits, fromDateTime, toDateTime)    \r\n    \r\n    String calcDurationInTextualForm(List&lt;ChronoUnit&gt; listOfUnits, LocalDateTime ts, LocalDateTime to)\r\n    {\r\n        def result = []\r\n    \r\n        listOfUnits.each { chronoUnit -&gt;\r\n            long amount = ts.until(to, chronoUnit)\r\n            ts = ts.plus(amount, chronoUnit)\r\n    \r\n            if (amount) {\r\n                result &lt;&lt; &quot;$amount ${chronoUnit.toString()}&quot;\r\n            }\r\n        }\r\n    \r\n        result.join(&#39;, &#39;)\r\n    }\r\n\r\nAt the time of this writing,the code above returns `47 Years, 8 Months, 9 Days, 22 Hours, 52 Minutes, 7 Seconds, 140 Millis`. And, for @Gennady Kolomoets input, the code returns `23 Hours`.\r\n\r\nWhen you provide a list of units it must be sorted by size of the units (biggest first):\r\n\r\n&lt;!-- language: lang-groovy --&gt;\r\n\r\n    def listOfUnits = [ChronoUnit.WEEKS, ChronoUnit.DAYS, ChronoUnit.HOURS]\r\n    // returns 2495 Weeks, 3 Days, 8 Hours\r\n","title":"Java 8: Difference between two LocalDateTime in multiple units","body":"<p>And the version of @Thomas in <a href=\"http://www.groovy-lang.org/\" rel=\"noreferrer\">Groovy</a> with takes the desired units in a list instead of hardcoding the values. This implementation (which can easily ported to Java - I made the function declaration explicit) makes Thomas approach more reuseable.</p>\n\n<pre class=\"lang-groovy prettyprint-override\"><code>def fromDateTime = LocalDateTime.of(1968, 6, 14, 0, 13, 0)\ndef toDateTime = LocalDateTime.now()\ndef listOfUnits = [\n    ChronoUnit.YEARS, ChronoUnit.MONTHS, ChronoUnit.DAYS,\n    ChronoUnit.HOURS, ChronoUnit.MINUTES, ChronoUnit.SECONDS,\n    ChronoUnit.MILLIS]\n\nprintln calcDurationInTextualForm(listOfUnits, fromDateTime, toDateTime)    \n\nString calcDurationInTextualForm(List&lt;ChronoUnit&gt; listOfUnits, LocalDateTime ts, LocalDateTime to)\n{\n    def result = []\n\n    listOfUnits.each { chronoUnit -&gt;\n        long amount = ts.until(to, chronoUnit)\n        ts = ts.plus(amount, chronoUnit)\n\n        if (amount) {\n            result &lt;&lt; \"$amount ${chronoUnit.toString()}\"\n        }\n    }\n\n    result.join(', ')\n}\n</code></pre>\n\n<p>At the time of this writing,the code above returns <code>47 Years, 8 Months, 9 Days, 22 Hours, 52 Minutes, 7 Seconds, 140 Millis</code>. And, for @Gennady Kolomoets input, the code returns <code>23 Hours</code>.</p>\n\n<p>When you provide a list of units it must be sorted by size of the units (biggest first):</p>\n\n<pre class=\"lang-groovy prettyprint-override\"><code>def listOfUnits = [ChronoUnit.WEEKS, ChronoUnit.DAYS, ChronoUnit.HOURS]\n// returns 2495 Weeks, 3 Days, 8 Hours\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1873327,"reputation":961,"user_id":1695088,"display_name":"Daantie"},"score":6,"creation_date":1552494002,"post_id":44142896,"comment_id":97033870,"body_markdown":"It&#39;s actually possible to do it like this: `String.format(&quot;%02d:%02d:%02d&quot;,dur.toHoursPart(), dur.toMinutesPart(), dur.toSecondsPart());`. The part methods give you the right numbers to build a string. I think it&#39; more readable.","body":"It&#39;s actually possible to do it like this: <code>String.format(&quot;%02d:%02d:%02d&quot;,dur.toHoursPart(), dur.toMinutesPart(), dur.toSecondsPart());</code>. The part methods give you the right numbers to build a string. I think it&#39; more readable."},{"owner":{"account_id":1873327,"reputation":961,"user_id":1695088,"display_name":"Daantie"},"score":1,"creation_date":1552555498,"post_id":44142896,"comment_id":97056955,"body_markdown":"Side note to my previous comment: the part methods are only available from JDK 9 and up.","body":"Side note to my previous comment: the part methods are only available from JDK 9 and up."}],"tags":[],"owner":{"account_id":10962604,"reputation":587,"user_id":8055410,"display_name":"Junior Batista"},"comment_count":2,"down_vote_count":2,"up_vote_count":59,"is_accepted":false,"score":57,"last_activity_date":1546724247,"creation_date":1495565632,"answer_id":44142896,"question_id":25747499,"body_markdown":"Here a single example using Duration and TimeUnit to get &#39;hh:mm:ss&#39; format.\r\n\r\n    Duration dur = Duration.between(localDateTimeIni, localDateTimeEnd);\r\n    long millis = dur.toMillis();\r\n    \r\n    String.format(&quot;%02d:%02d:%02d&quot;, \r\n            TimeUnit.MILLISECONDS.toHours(millis),\r\n            TimeUnit.MILLISECONDS.toMinutes(millis) - \r\n            TimeUnit.HOURS.toMinutes(TimeUnit.MILLISECONDS.toHours(millis)),\r\n            TimeUnit.MILLISECONDS.toSeconds(millis) - \r\n            TimeUnit.MINUTES.toSeconds(TimeUnit.MILLISECONDS.toMinutes(millis)));","title":"Java 8: Difference between two LocalDateTime in multiple units","body":"<p>Here a single example using Duration and TimeUnit to get 'hh:mm:ss' format.</p>\n\n<pre><code>Duration dur = Duration.between(localDateTimeIni, localDateTimeEnd);\nlong millis = dur.toMillis();\n\nString.format(\"%02d:%02d:%02d\", \n        TimeUnit.MILLISECONDS.toHours(millis),\n        TimeUnit.MILLISECONDS.toMinutes(millis) - \n        TimeUnit.HOURS.toMinutes(TimeUnit.MILLISECONDS.toHours(millis)),\n        TimeUnit.MILLISECONDS.toSeconds(millis) - \n        TimeUnit.MINUTES.toSeconds(TimeUnit.MILLISECONDS.toMinutes(millis)));\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2550207,"reputation":152,"user_id":2214122,"display_name":"Mark Amabile"},"score":1,"creation_date":1574742530,"post_id":47465147,"comment_id":104329373,"body_markdown":"I should mention this is not accurate.  \ntry with this.   it says 1 minute difference.\n\n      LocalDateTime bd = LocalDateTime.of(2019, 11, 26, 15, 03, 55);\n      LocalDateTime cd = LocalDateTime.of(2019, 11, 26, 15, 04, 45);","body":"I should mention this is not accurate.   try with this.   it says 1 minute difference.        LocalDateTime bd = LocalDateTime.of(2019, 11, 26, 15, 03, 55);       LocalDateTime cd = LocalDateTime.of(2019, 11, 26, 15, 04, 45);"},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1588417981,"post_id":47465147,"comment_id":108890145,"body_markdown":"I entered a time last night and got `Age is: 0 years,0 months, 1 days, -10 hours, -48 minutes old`. I don’t think this is what was desired.","body":"I entered a time last night and got <code>Age is: 0 years,0 months, 1 days, -10 hours, -48 minutes old</code>. I don’t think this is what was desired."},{"owner":{"account_id":12241242,"reputation":1072,"user_id":8934265,"display_name":"Tinashe"},"score":0,"creation_date":1588792222,"post_id":47465147,"comment_id":109039139,"body_markdown":"@OleV.V. Fixed that issue","body":"@OleV.V. Fixed that issue"}],"tags":[],"owner":{"account_id":12241242,"reputation":1072,"user_id":8934265,"display_name":"Tinashe"},"comment_count":3,"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1588792141,"creation_date":1511486318,"answer_id":47465147,"question_id":25747499,"body_markdown":"Here is a very simple answer to your question. It works.\r\n\r\n    import java.time.*;\r\n    import java.util.*;\r\n    import java.time.format.DateTimeFormatter;\r\n    import java.time.temporal.ChronoUnit;\r\n\r\n    public class MyClass {\r\n    public static void main(String args[]) {\r\n        DateTimeFormatter T = DateTimeFormatter.ofPattern(&quot;dd/MM/yyyy HH:mm&quot;);\r\n        Scanner h = new Scanner(System.in);\r\n        \r\n        System.out.print(&quot;Enter date of birth[dd/mm/yyyy hh:mm]: &quot;);\r\n        String b = h.nextLine();\r\n        \r\n        LocalDateTime bd = LocalDateTime.parse(b,T);\r\n        LocalDateTime cd = LocalDateTime.now();\r\n        \r\n        long minutes = ChronoUnit.MINUTES.between(bd, cd);\r\n        long hours = ChronoUnit.HOURS.between(bd, cd);\r\n        \r\n        System.out.print(&quot;Age is: &quot;+hours+ &quot; hours, or &quot; +minutes+ &quot; minutes old&quot;);\r\n    }\r\n    }\r\n","title":"Java 8: Difference between two LocalDateTime in multiple units","body":"<p>Here is a very simple answer to your question. It works.</p>\n\n<pre><code>import java.time.*;\nimport java.util.*;\nimport java.time.format.DateTimeFormatter;\nimport java.time.temporal.ChronoUnit;\n\npublic class MyClass {\npublic static void main(String args[]) {\n    DateTimeFormatter T = DateTimeFormatter.ofPattern(\"dd/MM/yyyy HH:mm\");\n    Scanner h = new Scanner(System.in);\n\n    System.out.print(\"Enter date of birth[dd/mm/yyyy hh:mm]: \");\n    String b = h.nextLine();\n\n    LocalDateTime bd = LocalDateTime.parse(b,T);\n    LocalDateTime cd = LocalDateTime.now();\n\n    long minutes = ChronoUnit.MINUTES.between(bd, cd);\n    long hours = ChronoUnit.HOURS.between(bd, cd);\n\n    System.out.print(\"Age is: \"+hours+ \" hours, or \" +minutes+ \" minutes old\");\n}\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":5380159,"reputation":976,"user_id":4285637,"display_name":"Vrakfall"},"score":5,"creation_date":1548364237,"post_id":53947199,"comment_id":95525832,"body_markdown":"I believe this is actually the semantically correct solution starting from Java 8. And before that version, JodaTime does the same.","body":"I believe this is actually the semantically correct solution starting from Java 8. And before that version, JodaTime does the same."},{"owner":{"account_id":8120429,"reputation":2939,"user_id":6117426,"display_name":"Anakhand"},"score":0,"creation_date":1599141992,"post_id":53947199,"comment_id":112687312,"body_markdown":"This does not answer the question at all. &quot;Difference between two LocalDateTime *in multiple units*&quot;","body":"This does not answer the question at all. &quot;Difference between two LocalDateTime <i>in multiple units</i>&quot;"},{"owner":{"account_id":1873786,"reputation":4203,"user_id":1695458,"accept_rate":86,"display_name":"EM-Creations"},"score":0,"creation_date":1664366612,"post_id":53947199,"comment_id":130454378,"body_markdown":"I like this solution, thanks!","body":"I like this solution, thanks!"}],"tags":[],"owner":{"account_id":1125613,"reputation":18964,"user_id":1112963,"accept_rate":59,"display_name":"Zon"},"comment_count":3,"down_vote_count":3,"up_vote_count":130,"is_accepted":false,"score":127,"last_activity_date":1599142478,"creation_date":1545923763,"answer_id":53947199,"question_id":25747499,"body_markdown":"It should be simpler!\r\n\r\n    Duration.between(startLocalDateTime, endLocalDateTime).toMillis();\r\n\r\nYou can convert millis to whatever unit you like:\r\n\r\n    String.format(&quot;%d minutes %d seconds&quot;, \r\n      TimeUnit.MILLISECONDS.toMinutes(millis),\r\n      TimeUnit.MILLISECONDS.toSeconds(millis) - \r\n      TimeUnit.MINUTES.toSeconds(TimeUnit.MILLISECONDS.toMinutes(millis)));","title":"Java 8: Difference between two LocalDateTime in multiple units","body":"<p>It should be simpler!</p>\n<pre><code>Duration.between(startLocalDateTime, endLocalDateTime).toMillis();\n</code></pre>\n<p>You can convert millis to whatever unit you like:</p>\n<pre><code>String.format(&quot;%d minutes %d seconds&quot;, \n  TimeUnit.MILLISECONDS.toMinutes(millis),\n  TimeUnit.MILLISECONDS.toSeconds(millis) - \n  TimeUnit.MINUTES.toSeconds(TimeUnit.MILLISECONDS.toMinutes(millis)));\n</code></pre>\n"},{"comments":[{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":2,"creation_date":1569338678,"post_id":58083128,"comment_id":102561195,"body_markdown":"The *Joda-Time* project is in maintenance-mode, its creator Stephen Colebourne having gone on to create the *java.time* classes defined in JSR 310. Most of the *java.time* functionality is back-ported to Java 6 &amp; 7 in the *ThreeTen-Backport* project. Further adapted for early Android in the *ThreeTenABP* project.","body":"The <i>Joda-Time</i> project is in maintenance-mode, its creator Stephen Colebourne having gone on to create the <i>java.time</i> classes defined in JSR 310. Most of the <i>java.time</i> functionality is back-ported to Java 6 &amp; 7 in the <i>ThreeTen-Backport</i> project. Further adapted for early Android in the <i>ThreeTenABP</i> project."}],"tags":[],"owner":{"account_id":2266395,"reputation":8164,"user_id":1994950,"accept_rate":70,"display_name":"Kushal"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1575252014,"creation_date":1569337048,"answer_id":58083128,"question_id":25747499,"body_markdown":"# Joda-Time\r\n\r\nSince many of the answers required **API 26** support and my min API was 23, I solved it by below code : \r\n\r\n    import org.joda.time.Days\r\n    \r\n    LocalDate startDate = Something\r\n    LocalDate endDate = Something\r\n    // The difference would be exclusive of both dates, \r\n    // so in most of use cases we may need to increment it by 1\r\n    Days.daysBetween(startDate, endDate).days\r\n\r\n","title":"Java 8: Difference between two LocalDateTime in multiple units","body":"<h1>Joda-Time</h1>\n\n<p>Since many of the answers required <strong>API 26</strong> support and my min API was 23, I solved it by below code : </p>\n\n<pre><code>import org.joda.time.Days\n\nLocalDate startDate = Something\nLocalDate endDate = Something\n// The difference would be exclusive of both dates, \n// so in most of use cases we may need to increment it by 1\nDays.daysBetween(startDate, endDate).days\n</code></pre>\n"},{"comments":[{"owner":{"account_id":483424,"reputation":1865,"user_id":898457,"accept_rate":100,"display_name":"Alex Semeniuk"},"score":1,"creation_date":1671014474,"post_id":59119149,"comment_id":132003910,"body_markdown":"I like your answer, but it has a bug. In case when `Period.between()` returns 1, 2 etc. months without any days, the subsequent call to `period.minusDay()` will subtract 1 day from 0 days, relulting in period having -1 days. The months do not translate to days, because the period object does not have enough context to do this correctly (is 1 month = 30 days, or 31?). Thus, subtracting should happen before measuring period. Fo example, like this: `Period period = Period.between(start.toLocalDate().plusDays( (end.toLocalTime() &gt;= start.toLocalTime()) ? 0L : 1L), end.toLocalDate())`","body":"I like your answer, but it has a bug. In case when <code>Period.between()</code> returns 1, 2 etc. months without any days, the subsequent call to <code>period.minusDay()</code> will subtract 1 day from 0 days, relulting in period having -1 days. The months do not translate to days, because the period object does not have enough context to do this correctly (is 1 month = 30 days, or 31?). Thus, subtracting should happen before measuring period. Fo example, like this: <code>Period period = Period.between(start.toLocalDate().plusDays( (end.toLocalTime() &gt;= start.toLocalTime()) ? 0L : 1L), end.toLocalDate())</code>"},{"owner":{"account_id":8120429,"reputation":2939,"user_id":6117426,"display_name":"Anakhand"},"score":0,"creation_date":1671534938,"post_id":59119149,"comment_id":132115362,"body_markdown":"@AlexSemeniuk Thank you for noticing the bug and suggesting a solution! I have now fixed it; I used your idea but wrote it slightly differently, I think it also helped clarify/simplify the solution overall. PS: when I wrote the `.minusDays` code, it felt so hacky that I felt it should go wrong somewhere, and it indeed does, I guess I didn&#39;t test thoroughly at all!","body":"@AlexSemeniuk Thank you for noticing the bug and suggesting a solution! I have now fixed it; I used your idea but wrote it slightly differently, I think it also helped clarify/simplify the solution overall. PS: when I wrote the <code>.minusDays</code> code, it felt so hacky that I felt it should go wrong somewhere, and it indeed does, I guess I didn&#39;t test thoroughly at all!"}],"tags":[],"owner":{"account_id":8120429,"reputation":2939,"user_id":6117426,"display_name":"Anakhand"},"comment_count":2,"down_vote_count":0,"up_vote_count":30,"is_accepted":false,"score":30,"last_activity_date":1671537447,"creation_date":1575139391,"answer_id":59119149,"question_id":25747499,"body_markdown":"*Keep in mind: **calendar months and years *do not* represent a fixed temporal length**. For example, if this code shows a difference of 1 month, it could mean anything from 28 days to 31 days (where 1 day = 24h). If that&#39;s not ok for your use case, I strongly recommend ditching months and years entirely (so you can just use the `Duration` class), or at most setting a fixed temporal value for months and years (e.g. 30 days for a month and 365 days for a year).*\r\n\r\n*If you still want to go ahead (for example because your users already expect months and years to mean calendar months and years), you will notice the code is not as straightforward as one would initially think it should be (this also means it&#39;s more error-prone; thanks to @Alex for noticing a bug, which has now been fixed), and that is precisely because Java library designers were smart enough not to mix calendar periods (`Period` class) and exact durations (`Duration` class) together.*\r\n\r\n---------\r\n\r\n## TL;DR\r\nPrecondition: `start &lt;= end`.\r\n\r\n```java\r\n// Closest start datetime with same time-of-day as the end datetime.\r\n// This is to make sure to only count full 24h days in the period.\r\nLocalDateTime closestFullDaysStart = LocalDateTime.of(\r\n    start.toLocalDate()\r\n         .plusDays(end.toLocalTime().compareTo(start.toLocalTime()) &lt; 0 ? 1 : 0),\r\n    end.toLocalTime()\r\n);\r\n\r\n// Get the calendar period between the dates (full years, months &amp; days).\r\nPeriod period = Period.between(closestFullDaysStart.toLocalDate(), end.toLocalDate());\r\n\r\n// Get the remainder as a duration (hours, minutes, etc.).\r\nDuration duration = Duration.between(start, closestFullDaysStart);\r\n```\r\nand then use the methods `period.getYears()`, `period.getMonths()`, `period.getDays()`, `duration.toHoursPart()`, `duration.toMinutesPart()`, `duration.toSecondsPart()`.\r\n\r\n\r\n[Try it online!](https://tio.run/##dVJNb9swDL37VxAFNtiDo7rZdti6YIcF2w4LUCC5DMUOqqXETm3JkOgWRtHfnlIfTusuNQSY4sfj4xP3/I7P9uL2ULedNgh7ujOsW8k@XCZJ0vU3TV1C2XBrYcVrBQ8J0Bf9FjnS707XAlqKpms0tdpd/wNudjaDh8MfXfJmyVFuCNPlU48FTLxMb9N5MS9yuBhPUWSXybRUKvF24cdQlcPnL1SYnJ/Dj0ZbaTF2FFThhoL7GiuwnCx3nentTPABuAWsQosxkzmQTVVboIOaprsl@r2R7qJVM0Cpe4Ww7ZsG5p8qKhwoV3mgTppaC/ZqgjJQ@kkVS0pev6WFF9jzZqiP0TTzfv@xrumtw0iJ8pjkytOMlbrtuJEbnU4gQjSDb1DAd7iAr1BkuUf8DyKJEv6S6KehAOVwE8eCG4n3UoZJnVwWUq/CILmxObRaYWXhvVckY8lVqIrFCwh3FlHSU6pM585fUgyuVwyNdMsnpHEvyUH0htZSK0gr3XtKteqJJwFhyYjSckw4Zi5g9B2Jefnyk6/m2q8Hi7JlukfW0c5jfLezd2IUgqyghTedGt6InFx0pEW2laVWwp6FN4kLtJP412E5DZ5dKw869flliA86DkWS/Xa9roixy37hX4XOJyLrwCNEaBMODvExeTw8AQ &quot;Java (JDK) – Try It Online&quot;)\r\n\r\n--------------\r\n\r\n## Expanded answer\r\n\r\nI&#39;ll answer the original question, i.e. how to get the time difference between two `LocalDateTimes` in years, months, days, hours &amp; minutes, such that the &quot;sum&quot; (see note below) of all the values for the different units equals the total temporal difference, and such that the value in each unit is smaller than the next bigger unit—i.e. `minutes &lt; 60`, `hours &lt; 24`, and so on.\r\n\r\nGiven two `LocalDateTimes` `start` and `end`, e.g.\r\n```java\r\nLocalDateTime start = LocalDateTime.of(2019, 11, 28, 17, 15);\r\nLocalDateTime end = LocalDateTime.of(2020, 11, 30, 16, 44);\r\n```\r\nwe can represent the absolute timespan between the two with a `Duration`—perhaps using `Duration.between(start, end)`. But the biggest unit we can extract out of a `Duration` is days (as a temporal unit equivalent to 24h)—see the note below for an explanation. To use larger units* (months, years) we can represent this `Duration` with a pair of (`Period`, `Duration`), where the `Period` measures the difference up to a precision of days and the `Duration` represents the remainder.\r\n\r\nWe need to be careful here, because a `Period` is really a *date* difference, not an amount of time, and all its calculations are based on calendar dates (see the section below). For example, from 1st January 2000 at 23:59 to 2nd January 2000 at 00:01, a `Period` would say there is a difference of **1 day**, because that&#39;s the difference between the two dates, even though the time delta is 2 minutes, much less than 24h. So, we need to start counting the calendar period at the next closest point in time which has the same time of day as the end point, so that any *calendar* days that we count actually correspond to full 24h *durations*:\r\n```java\r\nLocalDateTime closestFullDaysStart = LocalDateTime.of(\r\n    start.toLocalDate()\r\n         // if the end time-of-day is earlier than the start time-of-day,\r\n         // the next point in time with that time-of-day is one calendar day ahead\r\n         // (the clock &quot;wraps around&quot; at midnight while advancing to it)\r\n         .plusDays(end.toLocalTime().compareTo(start.toLocalTime()) &lt; 0 ? 1 : 0),\r\n    end.toLocalTime()\r\n);\r\n```\r\n\r\nNow we have effectively split the timespan between `start` and `end` into two parts: the span from `start` to the `closestFullDaysStart`, which by construction will be less than 24h, so we can measure it with a `Duration` object with no days part,\r\n```java\r\nDuration duration = Duration.between(start, closestFullDaysStart);\r\n```\r\nand the span from `closestFullDaysStart` and `end`, which we know we can now reliably* measure with a `Period`.\r\n```java\r\nPeriod period = Period.between(closestFullDaysStart.toLocalDate(), end.toLocalDate());\r\n```\r\n\r\nNow we can simply use the methods defined on `Period` and `Duration` to extract the individual units:\r\n\r\n```java\r\nSystem.out.printf(\r\n    &quot;%d years, %d months, %d days, %d hours, %d minutes, %d seconds&quot;,\r\n    period.getYears(), period.getMonths(), period.getDays(), \r\n    duration.toHoursPart(), duration.toMinutesPart(), duration.toSecondsPart()\r\n);\r\n```\r\n\r\n```none\r\n1 years, 0 months, 1 days, 23 hours, 29 minutes, 0 seconds\r\n```\r\n\r\nor, using the default format:\r\n\r\n```java\r\nSystem.out.println(period + &quot; + &quot; + duration);\r\n```\r\n\r\n```none\r\nP1Y1D + PT23H29M\r\n```\r\n\r\n-------\r\n## *Note on years, months &amp; days\r\n\r\nNote that, in `java.time`&#39;s conception, period &quot;units&quot; like &quot;month&quot; or &quot;year&quot; don&#39;t represent a fixed, absolute temporal value—they&#39;re date- and calendar-dependent, as the following example illustrates:\r\n\r\n```java\r\nLocalDateTime\r\n        start1 = LocalDateTime.of(2020, 1, 1, 0, 0),\r\n        end1 = LocalDateTime.of(2021, 1, 1, 0, 0),\r\n        start2 = LocalDateTime.of(2021, 1, 1, 0, 0),\r\n        end2 = LocalDateTime.of(2022, 1, 1, 0, 0);\r\nSystem.out.println(Period.between(start1.toLocalDate(), end1.toLocalDate()));\r\nSystem.out.println(Duration.between(start1, end1).toDays());\r\nSystem.out.println(Period.between(start2.toLocalDate(), end2.toLocalDate()));\r\nSystem.out.println(Duration.between(start2, end2).toDays());\r\n```\r\n\r\n```none\r\nP1Y\r\n366\r\nP1Y\r\n365\r\n```\r\n\r\nAs another example, from 1st January 2000 at 23:59 to 2nd January 2000 at 00:01, a `Period` would say there is a difference of **1 day**, because that&#39;s the difference between the two dates, even though the time delta is less than 24h.\r\n\r\n\r\n## Negative spans\r\n\r\nIf `start &gt; end`, the code above produces an answer which is technically correct if we sum all the units but is presented in an unexpected way.\r\n\r\nFor example, for\r\n```java\r\nLocalDateTime start = LocalDateTime.of(2020, 1, 1, 1, 00);\r\nLocalDateTime end = LocalDateTime.of(2020, 1, 1, 0, 0);\r\n```\r\nwe get:\r\n```\r\n0 years, 0 months, -1 days, 23 hours, 0 minutes, 0 seconds\r\n```\r\n-1 day plus 23 hours is -1 hour, which is correct. But we would expect the answer to be just -1 hour. \r\n\r\nCurrently durations shown are always positive, and this is because `closestFullDaysStart` is always in the future with respect to `start`.\r\n\r\nIf `start &gt; end`, however, the direction from start to end is &quot;back in time&quot;, and so we need to *retrocede* from `start` in order to find the closest datetime with the end time-of-day that lies between `start` and `end`.\r\nAlso, the wrap-around condition changes: since we are winding the clock *backwards*, we wrap around the clock (and thus need to subtract one calendar day) if the start time-of-day is *earlier* than the end time.\r\n\r\nCombining all of this yields:\r\n```java\r\nint endStartComparison = end.compareTo(start);\r\nint endStartTimeComparison = end.toLocalTime().compareTo(start.toLocalTime());\r\nLocalDateTime closestFullDaysStart = LocalDateTime.of(\r\n    start.toLocalDate()\r\n         .plusDays(\r\n             (\r\n                 (endStartComparison &gt; 0)\r\n                 ? (endStartTimeComparison &lt; 0)\r\n                 : (endStartTimeComparison &gt; 0)\r\n             )\r\n             ? (long) Math.signum(endStartComparison)  // advance one unit in the direction start-&gt;end \r\n             : 0\r\n         ),\r\n    end.toLocalTime()\r\n);\r\n```\r\n\r\nWe can rewrite that ugly nested conditional in a more compact but more hacky way:\r\n```java\r\n(endStartComparison * endStartTimeComparison &lt; 0)\r\n```\r\n\r\n[Try it online!](https://tio.run/##hVPda9swEH/XX3EUNuTiqF7Y07qwh4ZtDwsUkpcx9qDaSqzUlowlt4TSvz27k@wmTlImDD7dx@9@96GtfJKTbfG413VjWw9bvAuvayWubxljTfdQ6RzySjoHC6kNvDDA0@udlx5/T1YXUKOVL32rzebPX5DtxiXwsv9lc1nNpVcrxCR/zDGDkVbYNZ9m0yyFT8OXZcktG4cqU/wvMOsDGbu5gbvKOuV8n7LAEKoKnrUvwUmU6Dqx60khdyAd@DLmGDwFgaxK7QA/b7G8R@TftYou1lQ7yG1nPKy7qoLp5xIDd@hrAlCjWm0LwTQ6IOiSONzZupGtdtZgHagUeVColeWBIxI/dqcCz0K8DQ0gG09OAcbWswbmsSHfke8cqS7fG0WY7wiQrDwJ@nBEU3WOMPhBR4dfKPX6vYK@QpaMw78Br6zZJLhnvhROb0xXX4A8ifoC2UGRpEE@axWjrcB5/lA@zAcN6CPbflDwoPyzUnF2tAAOeJjrTsnWpVBb40sHH8OME8HuY1QfPIN4Fz0Kv9TpcS/TY4pRdcKwVfSeCtXSbkoouhZfGraNl7YLlLTpkCcC@Vwgpfng8OY5g0H3RixMNb24CZR@uXNe1cJ2XjT4jH2/C1cfiqERKMVeBJG6EYSeE1kHWig7lVtTuKs4k/5JbJT/TVjUg4NqEUDHurBg/UCHorBlPynXPTIm7yP9Ima@YFlGHtGCm7AnxFf2uv8H &quot;Java (JDK) – Try It Online&quot;)\r\n","title":"Java 8: Difference between two LocalDateTime in multiple units","body":"<p><em>Keep in mind: <strong>calendar months and years <em>do not</em> represent a fixed temporal length</strong>. For example, if this code shows a difference of 1 month, it could mean anything from 28 days to 31 days (where 1 day = 24h). If that's not ok for your use case, I strongly recommend ditching months and years entirely (so you can just use the <code>Duration</code> class), or at most setting a fixed temporal value for months and years (e.g. 30 days for a month and 365 days for a year).</em></p>\n<p><em>If you still want to go ahead (for example because your users already expect months and years to mean calendar months and years), you will notice the code is not as straightforward as one would initially think it should be (this also means it's more error-prone; thanks to @Alex for noticing a bug, which has now been fixed), and that is precisely because Java library designers were smart enough not to mix calendar periods (<code>Period</code> class) and exact durations (<code>Duration</code> class) together.</em></p>\n<hr />\n<h2>TL;DR</h2>\n<p>Precondition: <code>start &lt;= end</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>// Closest start datetime with same time-of-day as the end datetime.\n// This is to make sure to only count full 24h days in the period.\nLocalDateTime closestFullDaysStart = LocalDateTime.of(\n    start.toLocalDate()\n         .plusDays(end.toLocalTime().compareTo(start.toLocalTime()) &lt; 0 ? 1 : 0),\n    end.toLocalTime()\n);\n\n// Get the calendar period between the dates (full years, months &amp; days).\nPeriod period = Period.between(closestFullDaysStart.toLocalDate(), end.toLocalDate());\n\n// Get the remainder as a duration (hours, minutes, etc.).\nDuration duration = Duration.between(start, closestFullDaysStart);\n</code></pre>\n<p>and then use the methods <code>period.getYears()</code>, <code>period.getMonths()</code>, <code>period.getDays()</code>, <code>duration.toHoursPart()</code>, <code>duration.toMinutesPart()</code>, <code>duration.toSecondsPart()</code>.</p>\n<p><a href=\"https://tio.run/##dVJNb9swDL37VxAFNtiDo7rZdti6YIcF2w4LUCC5DMUOqqXETm3JkOgWRtHfnlIfTusuNQSY4sfj4xP3/I7P9uL2ULedNgh7ujOsW8k@XCZJ0vU3TV1C2XBrYcVrBQ8J0Bf9FjnS707XAlqKpms0tdpd/wNudjaDh8MfXfJmyVFuCNPlU48FTLxMb9N5MS9yuBhPUWSXybRUKvF24cdQlcPnL1SYnJ/Dj0ZbaTF2FFThhoL7GiuwnCx3nentTPABuAWsQosxkzmQTVVboIOaprsl@r2R7qJVM0Cpe4Ww7ZsG5p8qKhwoV3mgTppaC/ZqgjJQ@kkVS0pev6WFF9jzZqiP0TTzfv@xrumtw0iJ8pjkytOMlbrtuJEbnU4gQjSDb1DAd7iAr1BkuUf8DyKJEv6S6KehAOVwE8eCG4n3UoZJnVwWUq/CILmxObRaYWXhvVckY8lVqIrFCwh3FlHSU6pM585fUgyuVwyNdMsnpHEvyUH0htZSK0gr3XtKteqJJwFhyYjSckw4Zi5g9B2Jefnyk6/m2q8Hi7JlukfW0c5jfLezd2IUgqyghTedGt6InFx0pEW2laVWwp6FN4kLtJP412E5DZ5dKw869flliA86DkWS/Xa9roixy37hX4XOJyLrwCNEaBMODvExeTw8AQ\" rel=\"nofollow noreferrer\" title=\"Java (JDK) – Try It Online\">Try it online!</a></p>\n<hr />\n<h2>Expanded answer</h2>\n<p>I'll answer the original question, i.e. how to get the time difference between two <code>LocalDateTimes</code> in years, months, days, hours &amp; minutes, such that the &quot;sum&quot; (see note below) of all the values for the different units equals the total temporal difference, and such that the value in each unit is smaller than the next bigger unit—i.e. <code>minutes &lt; 60</code>, <code>hours &lt; 24</code>, and so on.</p>\n<p>Given two <code>LocalDateTimes</code> <code>start</code> and <code>end</code>, e.g.</p>\n<pre class=\"lang-java prettyprint-override\"><code>LocalDateTime start = LocalDateTime.of(2019, 11, 28, 17, 15);\nLocalDateTime end = LocalDateTime.of(2020, 11, 30, 16, 44);\n</code></pre>\n<p>we can represent the absolute timespan between the two with a <code>Duration</code>—perhaps using <code>Duration.between(start, end)</code>. But the biggest unit we can extract out of a <code>Duration</code> is days (as a temporal unit equivalent to 24h)—see the note below for an explanation. To use larger units* (months, years) we can represent this <code>Duration</code> with a pair of (<code>Period</code>, <code>Duration</code>), where the <code>Period</code> measures the difference up to a precision of days and the <code>Duration</code> represents the remainder.</p>\n<p>We need to be careful here, because a <code>Period</code> is really a <em>date</em> difference, not an amount of time, and all its calculations are based on calendar dates (see the section below). For example, from 1st January 2000 at 23:59 to 2nd January 2000 at 00:01, a <code>Period</code> would say there is a difference of <strong>1 day</strong>, because that's the difference between the two dates, even though the time delta is 2 minutes, much less than 24h. So, we need to start counting the calendar period at the next closest point in time which has the same time of day as the end point, so that any <em>calendar</em> days that we count actually correspond to full 24h <em>durations</em>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>LocalDateTime closestFullDaysStart = LocalDateTime.of(\n    start.toLocalDate()\n         // if the end time-of-day is earlier than the start time-of-day,\n         // the next point in time with that time-of-day is one calendar day ahead\n         // (the clock &quot;wraps around&quot; at midnight while advancing to it)\n         .plusDays(end.toLocalTime().compareTo(start.toLocalTime()) &lt; 0 ? 1 : 0),\n    end.toLocalTime()\n);\n</code></pre>\n<p>Now we have effectively split the timespan between <code>start</code> and <code>end</code> into two parts: the span from <code>start</code> to the <code>closestFullDaysStart</code>, which by construction will be less than 24h, so we can measure it with a <code>Duration</code> object with no days part,</p>\n<pre class=\"lang-java prettyprint-override\"><code>Duration duration = Duration.between(start, closestFullDaysStart);\n</code></pre>\n<p>and the span from <code>closestFullDaysStart</code> and <code>end</code>, which we know we can now reliably* measure with a <code>Period</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Period period = Period.between(closestFullDaysStart.toLocalDate(), end.toLocalDate());\n</code></pre>\n<p>Now we can simply use the methods defined on <code>Period</code> and <code>Duration</code> to extract the individual units:</p>\n<pre class=\"lang-java prettyprint-override\"><code>System.out.printf(\n    &quot;%d years, %d months, %d days, %d hours, %d minutes, %d seconds&quot;,\n    period.getYears(), period.getMonths(), period.getDays(), \n    duration.toHoursPart(), duration.toMinutesPart(), duration.toSecondsPart()\n);\n</code></pre>\n<pre class=\"lang-none prettyprint-override\"><code>1 years, 0 months, 1 days, 23 hours, 29 minutes, 0 seconds\n</code></pre>\n<p>or, using the default format:</p>\n<pre class=\"lang-java prettyprint-override\"><code>System.out.println(period + &quot; + &quot; + duration);\n</code></pre>\n<pre class=\"lang-none prettyprint-override\"><code>P1Y1D + PT23H29M\n</code></pre>\n<hr />\n<h2>*Note on years, months &amp; days</h2>\n<p>Note that, in <code>java.time</code>'s conception, period &quot;units&quot; like &quot;month&quot; or &quot;year&quot; don't represent a fixed, absolute temporal value—they're date- and calendar-dependent, as the following example illustrates:</p>\n<pre class=\"lang-java prettyprint-override\"><code>LocalDateTime\n        start1 = LocalDateTime.of(2020, 1, 1, 0, 0),\n        end1 = LocalDateTime.of(2021, 1, 1, 0, 0),\n        start2 = LocalDateTime.of(2021, 1, 1, 0, 0),\n        end2 = LocalDateTime.of(2022, 1, 1, 0, 0);\nSystem.out.println(Period.between(start1.toLocalDate(), end1.toLocalDate()));\nSystem.out.println(Duration.between(start1, end1).toDays());\nSystem.out.println(Period.between(start2.toLocalDate(), end2.toLocalDate()));\nSystem.out.println(Duration.between(start2, end2).toDays());\n</code></pre>\n<pre class=\"lang-none prettyprint-override\"><code>P1Y\n366\nP1Y\n365\n</code></pre>\n<p>As another example, from 1st January 2000 at 23:59 to 2nd January 2000 at 00:01, a <code>Period</code> would say there is a difference of <strong>1 day</strong>, because that's the difference between the two dates, even though the time delta is less than 24h.</p>\n<h2>Negative spans</h2>\n<p>If <code>start &gt; end</code>, the code above produces an answer which is technically correct if we sum all the units but is presented in an unexpected way.</p>\n<p>For example, for</p>\n<pre class=\"lang-java prettyprint-override\"><code>LocalDateTime start = LocalDateTime.of(2020, 1, 1, 1, 00);\nLocalDateTime end = LocalDateTime.of(2020, 1, 1, 0, 0);\n</code></pre>\n<p>we get:</p>\n<pre><code>0 years, 0 months, -1 days, 23 hours, 0 minutes, 0 seconds\n</code></pre>\n<p>-1 day plus 23 hours is -1 hour, which is correct. But we would expect the answer to be just -1 hour.</p>\n<p>Currently durations shown are always positive, and this is because <code>closestFullDaysStart</code> is always in the future with respect to <code>start</code>.</p>\n<p>If <code>start &gt; end</code>, however, the direction from start to end is &quot;back in time&quot;, and so we need to <em>retrocede</em> from <code>start</code> in order to find the closest datetime with the end time-of-day that lies between <code>start</code> and <code>end</code>.\nAlso, the wrap-around condition changes: since we are winding the clock <em>backwards</em>, we wrap around the clock (and thus need to subtract one calendar day) if the start time-of-day is <em>earlier</em> than the end time.</p>\n<p>Combining all of this yields:</p>\n<pre class=\"lang-java prettyprint-override\"><code>int endStartComparison = end.compareTo(start);\nint endStartTimeComparison = end.toLocalTime().compareTo(start.toLocalTime());\nLocalDateTime closestFullDaysStart = LocalDateTime.of(\n    start.toLocalDate()\n         .plusDays(\n             (\n                 (endStartComparison &gt; 0)\n                 ? (endStartTimeComparison &lt; 0)\n                 : (endStartTimeComparison &gt; 0)\n             )\n             ? (long) Math.signum(endStartComparison)  // advance one unit in the direction start-&gt;end \n             : 0\n         ),\n    end.toLocalTime()\n);\n</code></pre>\n<p>We can rewrite that ugly nested conditional in a more compact but more hacky way:</p>\n<pre class=\"lang-java prettyprint-override\"><code>(endStartComparison * endStartTimeComparison &lt; 0)\n</code></pre>\n<p><a href=\"https://tio.run/##hVPda9swEH/XX3EUNuTiqF7Y07qwh4ZtDwsUkpcx9qDaSqzUlowlt4TSvz27k@wmTlImDD7dx@9@96GtfJKTbfG413VjWw9bvAuvayWubxljTfdQ6RzySjoHC6kNvDDA0@udlx5/T1YXUKOVL32rzebPX5DtxiXwsv9lc1nNpVcrxCR/zDGDkVbYNZ9m0yyFT8OXZcktG4cqU/wvMOsDGbu5gbvKOuV8n7LAEKoKnrUvwUmU6Dqx60khdyAd@DLmGDwFgaxK7QA/b7G8R@TftYou1lQ7yG1nPKy7qoLp5xIDd@hrAlCjWm0LwTQ6IOiSONzZupGtdtZgHagUeVColeWBIxI/dqcCz0K8DQ0gG09OAcbWswbmsSHfke8cqS7fG0WY7wiQrDwJ@nBEU3WOMPhBR4dfKPX6vYK@QpaMw78Br6zZJLhnvhROb0xXX4A8ifoC2UGRpEE@axWjrcB5/lA@zAcN6CPbflDwoPyzUnF2tAAOeJjrTsnWpVBb40sHH8OME8HuY1QfPIN4Fz0Kv9TpcS/TY4pRdcKwVfSeCtXSbkoouhZfGraNl7YLlLTpkCcC@Vwgpfng8OY5g0H3RixMNb24CZR@uXNe1cJ2XjT4jH2/C1cfiqERKMVeBJG6EYSeE1kHWig7lVtTuKs4k/5JbJT/TVjUg4NqEUDHurBg/UCHorBlPynXPTIm7yP9Ima@YFlGHtGCm7AnxFf2uv8H\" rel=\"nofollow noreferrer\" title=\"Java (JDK) – Try It Online\">Try it online!</a></p>\n"},{"comments":[{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1588416166,"post_id":61555919,"comment_id":108889550,"body_markdown":"Thanks for the answer. For the hours and smaller you can benefit from the `toHours`, `toMinutes`and `toSeconds` methods of `Duration`. Since Java 9 even more from `toMinutesPart()` and `toSecondsPart()`. And I don’t see thepoint in wrapping the hours, mins and secs into an array only to take them out again. Generally a good answer, though.","body":"Thanks for the answer. For the hours and smaller you can benefit from the <code>toHours</code>, <code>toMinutes</code>and <code>toSeconds</code> methods of <code>Duration</code>. Since Java 9 even more from <code>toMinutesPart()</code> and <code>toSecondsPart()</code>. And I don’t see thepoint in wrapping the hours, mins and secs into an array only to take them out again. Generally a good answer, though."}],"tags":[],"owner":{"account_id":6457596,"reputation":119,"user_id":5002447,"display_name":"Hennadii Kolomoiets"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1588404953,"creation_date":1588404953,"answer_id":61555919,"question_id":25747499,"body_markdown":"After more than five years I answer my question. I think that the problem with a negative duration can be solved by a simple correction:\r\n\r\n    LocalDateTime fromDateTime = LocalDateTime.of(2014, 9, 9, 7, 46, 45);\r\n    LocalDateTime toDateTime = LocalDateTime.of(2014, 9, 10, 6, 46, 45);\r\n\r\n    Period period = Period.between(fromDateTime.toLocalDate(), toDateTime.toLocalDate());\r\n    Duration duration = Duration.between(fromDateTime.toLocalTime(), toDateTime.toLocalTime());\r\n\r\n    if (duration.isNegative()) {\r\n        period = period.minusDays(1);\r\n        duration = duration.plusDays(1);\r\n    }\r\n    long seconds = duration.getSeconds();\r\n    long hours = seconds / SECONDS_PER_HOUR;\r\n    long minutes = ((seconds % SECONDS_PER_HOUR) / SECONDS_PER_MINUTE);\r\n    long secs = (seconds % SECONDS_PER_MINUTE);\r\n    long time[] = {hours, minutes, secs};\r\n    System.out.println(period.getYears() + &quot; years &quot;\r\n                + period.getMonths() + &quot; months &quot;\r\n                + period.getDays() + &quot; days &quot;\r\n                + time[0] + &quot; hours &quot;\r\n                + time[1] + &quot; minutes &quot;\r\n                + time[2] + &quot; seconds.&quot;);\r\n\r\n**Note:** The site https://www.epochconverter.com/date-difference now correctly calculates the time difference.\r\n\r\nThank you all for your discussion and suggestions.","title":"Java 8: Difference between two LocalDateTime in multiple units","body":"<p>After more than five years I answer my question. I think that the problem with a negative duration can be solved by a simple correction:</p>\n\n<pre><code>LocalDateTime fromDateTime = LocalDateTime.of(2014, 9, 9, 7, 46, 45);\nLocalDateTime toDateTime = LocalDateTime.of(2014, 9, 10, 6, 46, 45);\n\nPeriod period = Period.between(fromDateTime.toLocalDate(), toDateTime.toLocalDate());\nDuration duration = Duration.between(fromDateTime.toLocalTime(), toDateTime.toLocalTime());\n\nif (duration.isNegative()) {\n    period = period.minusDays(1);\n    duration = duration.plusDays(1);\n}\nlong seconds = duration.getSeconds();\nlong hours = seconds / SECONDS_PER_HOUR;\nlong minutes = ((seconds % SECONDS_PER_HOUR) / SECONDS_PER_MINUTE);\nlong secs = (seconds % SECONDS_PER_MINUTE);\nlong time[] = {hours, minutes, secs};\nSystem.out.println(period.getYears() + \" years \"\n            + period.getMonths() + \" months \"\n            + period.getDays() + \" days \"\n            + time[0] + \" hours \"\n            + time[1] + \" minutes \"\n            + time[2] + \" seconds.\");\n</code></pre>\n\n<p><strong>Note:</strong> The site <a href=\"https://www.epochconverter.com/date-difference\" rel=\"nofollow noreferrer\">https://www.epochconverter.com/date-difference</a> now correctly calculates the time difference.</p>\n\n<p>Thank you all for your discussion and suggestions.</p>\n"},{"comments":[{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1664175670,"post_id":73848053,"comment_id":130402470,"body_markdown":"Thanks for the heads-up. This is because `between` measures from start time inclusive to end time *exclusive*. If you want 120 minutes, use 8:00 and 10:00.","body":"Thanks for the heads-up. This is because <code>between</code> measures from start time inclusive to end time <i>exclusive</i>. If you want 120 minutes, use 8:00 and 10:00."},{"owner":{"account_id":10928209,"reputation":51,"user_id":8032275,"display_name":"excitedWithin"},"score":1,"creation_date":1664318411,"post_id":73848053,"comment_id":130443202,"body_markdown":"Yes, exactly. Thank you for the reasoning friend. And In case that the values are given on run-time by the user and you can&#39;t control them, just add 1 after they provide their input e.g. `countMins+=1;`","body":"Yes, exactly. Thank you for the reasoning friend. And In case that the values are given on run-time by the user and you can&#39;t control them, just add 1 after they provide their input e.g. <code>countMins+=1;</code>"},{"owner":{"account_id":2634995,"reputation":123,"user_id":2279957,"display_name":"cowley05"},"score":0,"creation_date":1664445405,"post_id":73848053,"comment_id":130475467,"body_markdown":"What is the exact import for MINUTES here? I cant seem to find it in LocalTime/LocalDateTime classes so not sure where its from","body":"What is the exact import for MINUTES here? I cant seem to find it in LocalTime/LocalDateTime classes so not sure where its from"},{"owner":{"account_id":10928209,"reputation":51,"user_id":8032275,"display_name":"excitedWithin"},"score":1,"creation_date":1664535181,"post_id":73848053,"comment_id":130499436,"body_markdown":"@cowley05 import static java.time.temporal.ChronoUnit.MINUTES;","body":"@cowley05 import static java.time.temporal.ChronoUnit.MINUTES;"}],"tags":[],"owner":{"account_id":10928209,"reputation":51,"user_id":8032275,"display_name":"excitedWithin"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664142572,"creation_date":1664142572,"answer_id":73848053,"question_id":25747499,"body_markdown":"For anyone trying to count the minutes between two LocalTime objects, keep in mind that the result will be minus 1. \r\n\r\nFor example,\r\n\r\n    long countMins = MINUTES.between( LocalTime.of(8,00),LocalTime.of(9,59) );\r\n    System.out.println(&quot;countMins = &quot; + countMins );\r\n\r\nwill give the Output: `countMins = 119 ` instead of 120","title":"Java 8: Difference between two LocalDateTime in multiple units","body":"<p>For anyone trying to count the minutes between two LocalTime objects, keep in mind that the result will be minus 1.</p>\n<p>For example,</p>\n<pre><code>long countMins = MINUTES.between( LocalTime.of(8,00),LocalTime.of(9,59) );\nSystem.out.println(&quot;countMins = &quot; + countMins );\n</code></pre>\n<p>will give the Output: <code>countMins = 119 </code> instead of 120</p>\n"},{"tags":[],"owner":{"account_id":255080,"reputation":15519,"user_id":534877,"accept_rate":65,"display_name":"Robert Niestroj"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1693595663,"creation_date":1693561560,"answer_id":77022078,"question_id":25747499,"body_markdown":"If you don&#39;t need years and months you can use [DurationFormatUtils][1] from [Apache Commons Lang 3][2]. It uses miliseconds as the duration. You can get the miliseconds from java.time Duration class. \r\n\r\n    LocalDateTime start = LocalDateTime.of(2023,10,1,7,14,3);\r\n    LocalDateTime end = LocalDateTime.of(2023,10,1,8,55,22);\r\n    Duration d = Duration.between(start, end);\r\n    DurationFormatUtils.formatDuration(d.toMillis(), &quot;d &#39;days&#39; H &#39;hours&#39; m &#39;minutes&#39; s &#39;seconds&#39;&quot;, true);\r\n\r\n     // &quot;0 days 1 hour 41 minutes 19 seconds&quot;\r\n\r\nFor other possiblities check out the JavaDoc.\r\n\r\n\r\n  [1]: https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/time/DurationFormatUtils.html\r\n  [2]: https://commons.apache.org/proper/commons-lang/","title":"Java 8: Difference between two LocalDateTime in multiple units","body":"<p>If you don't need years and months you can use <a href=\"https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/time/DurationFormatUtils.html\" rel=\"nofollow noreferrer\">DurationFormatUtils</a> from <a href=\"https://commons.apache.org/proper/commons-lang/\" rel=\"nofollow noreferrer\">Apache Commons Lang 3</a>. It uses miliseconds as the duration. You can get the miliseconds from java.time Duration class.</p>\n<pre><code>LocalDateTime start = LocalDateTime.of(2023,10,1,7,14,3);\nLocalDateTime end = LocalDateTime.of(2023,10,1,8,55,22);\nDuration d = Duration.between(start, end);\nDurationFormatUtils.formatDuration(d.toMillis(), &quot;d 'days' H 'hours' m 'minutes' s 'seconds'&quot;, true);\n\n // &quot;0 days 1 hour 41 minutes 19 seconds&quot;\n</code></pre>\n<p>For other possiblities check out the JavaDoc.</p>\n"}],"owner":{"account_id":280829,"reputation":28956,"user_id":576758,"accept_rate":83,"display_name":"Tapas Bose"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":482300,"favorite_count":0,"down_vote_count":0,"up_vote_count":390,"accepted_answer_id":25760725,"answer_count":12,"score":390,"last_activity_date":1693595663,"creation_date":1410273686,"question_id":25747499,"body_markdown":"I am trying to calculate the difference between two `LocalDateTime`. \r\n\r\nThe output needs to be of the format `y years m months d days h hours m minutes s seconds`. Here is what I have written:\r\n\r\n    import java.time.Duration;\r\n    import java.time.Instant;\r\n    import java.time.LocalDateTime;\r\n    import java.time.Period;\r\n    import java.time.ZoneId;\r\n    \r\n    public class Main {\r\n    \r\n    \tstatic final int MINUTES_PER_HOUR = 60;\r\n    \tstatic final int SECONDS_PER_MINUTE = 60;\r\n    \tstatic final int SECONDS_PER_HOUR = SECONDS_PER_MINUTE * MINUTES_PER_HOUR;\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tLocalDateTime toDateTime = LocalDateTime.of(2014, 9, 9, 19, 46, 45);\r\n    \t\tLocalDateTime fromDateTime = LocalDateTime.of(1984, 12, 16, 7, 45, 55);\r\n    \t\t\r\n    \t\tPeriod period = getPeriod(fromDateTime, toDateTime);\r\n    \t\tlong time[] = getTime(fromDateTime, toDateTime);\r\n    \t\t\r\n    \t\tSystem.out.println(period.getYears() + &quot; years &quot; + \r\n    \t\t\t\tperiod.getMonths() + &quot; months &quot; + \r\n    \t\t\t\tperiod.getDays() + &quot; days &quot; +\r\n    \t\t\t\ttime[0] + &quot; hours &quot; +\r\n    \t\t\t\ttime[1] + &quot; minutes &quot; +\r\n    \t\t\t\ttime[2] + &quot; seconds.&quot;);\r\n    \r\n    \t\t\r\n    \t}\r\n    \r\n    \tprivate static Period getPeriod(LocalDateTime dob, LocalDateTime now) {\r\n    \t\treturn Period.between(dob.toLocalDate(), now.toLocalDate());\r\n    \t}\r\n    \r\n    \tprivate static long[] getTime(LocalDateTime dob, LocalDateTime now) {\r\n    \t\tLocalDateTime today = LocalDateTime.of(now.getYear(),\r\n    \t\t\t\tnow.getMonthValue(), now.getDayOfMonth(), dob.getHour(), dob.getMinute(), dob.getSecond());\r\n    \t\tDuration duration = Duration.between(today, now);\r\n    \r\n    \t\tlong seconds = duration.getSeconds();\r\n    \r\n    \t\tlong hours = seconds / SECONDS_PER_HOUR;\r\n    \t\tlong minutes = ((seconds % SECONDS_PER_HOUR) / SECONDS_PER_MINUTE);\r\n    \t\tlong secs = (seconds % SECONDS_PER_MINUTE);\r\n    \r\n    \t\treturn new long[]{hours, minutes, secs};\r\n    \t}\r\n    }\r\n\r\nThe output that I am getting is `29 years 8 months 24 days 12 hours 0 minutes 50 seconds`. I have checked my result from this [website][1] (with values `12/16/1984 07:45:55` and `09/09/2014 19:46:45`). The following screenshot shows the output:\r\n\r\n![Epoch Converter][2]\r\n\r\nI am pretty sure that the fields after the month value is coming wrong from my code. Any suggestion would be very helpful.\r\n\r\nUpdate\r\n-\r\nI have tested my result from another website and the result I got is different. Here it is: [Calculate duration between two dates][3] (result: 29 years, 8 months, 24 days, 12 hours, 0 minutes and 50 seconds).\r\n\r\nUpdate\r\n-\r\nSince I got two different results from two different sites, I am wondering if the algorithm of my calculation is legitimate or not. If I use following two `LocalDateTime` objects:\r\n\r\n    LocalDateTime toDateTime = LocalDateTime.of(2014, 9, 10, 6, 40, 45);\r\n    LocalDateTime fromDateTime = LocalDateTime.of(1984, 12, 16, 7, 45, 55);\r\n\r\nThen the output is coming: `29 years 8 months 25 days -1 hours -5 minutes -10 seconds.`\r\n\r\nFrom this [link][4] it should be `29 years 8 months 24 days 22 hours, 54 minutes and 50 seconds`. So the algorithm needs to handle the negative numbers too.\r\n\r\n**Note the question is not about which site gave me what result, I need to know the right algorithm and need to have right results.**\r\n\r\n\r\n  [1]: http://www.epochconverter.com/epoch/date-difference.php\r\n  [2]: http://i.stack.imgur.com/SAJE4.png\r\n  [3]: http://www.timeanddate.com/date/durationresult.html?d1=16&amp;m1=12&amp;y1=1984&amp;d2=9&amp;m2=9&amp;y2=2014&amp;h1=7&amp;i1=45&amp;s1=55&amp;h2=19&amp;i2=46&amp;s2=45\r\n  [4]: http://www.timeanddate.com/date/durationresult.html?d1=16&amp;m1=12&amp;y1=1984&amp;d2=10&amp;m2=9&amp;y2=2014&amp;h1=7&amp;i1=45&amp;s1=55&amp;h2=6&amp;i2=40&amp;s2=45","title":"Java 8: Difference between two LocalDateTime in multiple units","body":"<p>I am trying to calculate the difference between two <code>LocalDateTime</code>. </p>\n\n<p>The output needs to be of the format <code>y years m months d days h hours m minutes s seconds</code>. Here is what I have written:</p>\n\n<pre><code>import java.time.Duration;\nimport java.time.Instant;\nimport java.time.LocalDateTime;\nimport java.time.Period;\nimport java.time.ZoneId;\n\npublic class Main {\n\n    static final int MINUTES_PER_HOUR = 60;\n    static final int SECONDS_PER_MINUTE = 60;\n    static final int SECONDS_PER_HOUR = SECONDS_PER_MINUTE * MINUTES_PER_HOUR;\n\n    public static void main(String[] args) {\n        LocalDateTime toDateTime = LocalDateTime.of(2014, 9, 9, 19, 46, 45);\n        LocalDateTime fromDateTime = LocalDateTime.of(1984, 12, 16, 7, 45, 55);\n\n        Period period = getPeriod(fromDateTime, toDateTime);\n        long time[] = getTime(fromDateTime, toDateTime);\n\n        System.out.println(period.getYears() + \" years \" + \n                period.getMonths() + \" months \" + \n                period.getDays() + \" days \" +\n                time[0] + \" hours \" +\n                time[1] + \" minutes \" +\n                time[2] + \" seconds.\");\n\n\n    }\n\n    private static Period getPeriod(LocalDateTime dob, LocalDateTime now) {\n        return Period.between(dob.toLocalDate(), now.toLocalDate());\n    }\n\n    private static long[] getTime(LocalDateTime dob, LocalDateTime now) {\n        LocalDateTime today = LocalDateTime.of(now.getYear(),\n                now.getMonthValue(), now.getDayOfMonth(), dob.getHour(), dob.getMinute(), dob.getSecond());\n        Duration duration = Duration.between(today, now);\n\n        long seconds = duration.getSeconds();\n\n        long hours = seconds / SECONDS_PER_HOUR;\n        long minutes = ((seconds % SECONDS_PER_HOUR) / SECONDS_PER_MINUTE);\n        long secs = (seconds % SECONDS_PER_MINUTE);\n\n        return new long[]{hours, minutes, secs};\n    }\n}\n</code></pre>\n\n<p>The output that I am getting is <code>29 years 8 months 24 days 12 hours 0 minutes 50 seconds</code>. I have checked my result from this <a href=\"http://www.epochconverter.com/epoch/date-difference.php\">website</a> (with values <code>12/16/1984 07:45:55</code> and <code>09/09/2014 19:46:45</code>). The following screenshot shows the output:</p>\n\n<p><img src=\"https://i.stack.imgur.com/SAJE4.png\" alt=\"Epoch Converter\"></p>\n\n<p>I am pretty sure that the fields after the month value is coming wrong from my code. Any suggestion would be very helpful.</p>\n\n<h2>Update</h2>\n\n<p>I have tested my result from another website and the result I got is different. Here it is: <a href=\"http://www.timeanddate.com/date/durationresult.html?d1=16&amp;m1=12&amp;y1=1984&amp;d2=9&amp;m2=9&amp;y2=2014&amp;h1=7&amp;i1=45&amp;s1=55&amp;h2=19&amp;i2=46&amp;s2=45\">Calculate duration between two dates</a> (result: 29 years, 8 months, 24 days, 12 hours, 0 minutes and 50 seconds).</p>\n\n<h2>Update</h2>\n\n<p>Since I got two different results from two different sites, I am wondering if the algorithm of my calculation is legitimate or not. If I use following two <code>LocalDateTime</code> objects:</p>\n\n<pre><code>LocalDateTime toDateTime = LocalDateTime.of(2014, 9, 10, 6, 40, 45);\nLocalDateTime fromDateTime = LocalDateTime.of(1984, 12, 16, 7, 45, 55);\n</code></pre>\n\n<p>Then the output is coming: <code>29 years 8 months 25 days -1 hours -5 minutes -10 seconds.</code></p>\n\n<p>From this <a href=\"http://www.timeanddate.com/date/durationresult.html?d1=16&amp;m1=12&amp;y1=1984&amp;d2=10&amp;m2=9&amp;y2=2014&amp;h1=7&amp;i1=45&amp;s1=55&amp;h2=6&amp;i2=40&amp;s2=45\">link</a> it should be <code>29 years 8 months 24 days 22 hours, 54 minutes and 50 seconds</code>. So the algorithm needs to handle the negative numbers too.</p>\n\n<p><strong>Note the question is not about which site gave me what result, I need to know the right algorithm and need to have right results.</strong></p>\n"},{"tags":["java","spreadsheet","odf"],"answers":[{"tags":[],"owner":{"account_id":18716,"reputation":1242,"user_id":43158,"display_name":"xyz"},"comment_count":0,"down_vote_count":0,"up_vote_count":14,"is_accepted":true,"score":14,"last_activity_date":1232352070,"creation_date":1232352070,"answer_id":456838,"question_id":456778,"body_markdown":"Take a look at jOpenDocument:\r\nhttp://www.jopendocument.org/documentation.html\r\n\r\nEspecially:\r\nhttp://www.jopendocument.org/start_spreadsheet_3.html","title":"How can I access spreadsheets in the open document format (.ods) with Java?","body":"<p>Take a look at jOpenDocument:\n<a href=\"http://www.jopendocument.org/documentation.html\" rel=\"noreferrer\">http://www.jopendocument.org/documentation.html</a></p>\n\n<p>Especially:\n<a href=\"http://www.jopendocument.org/start_spreadsheet_3.html\" rel=\"noreferrer\">http://www.jopendocument.org/start_spreadsheet_3.html</a></p>\n"},{"tags":[],"owner":{"account_id":881944,"reputation":19,"user_id":270491,"display_name":"user270491"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1265823299,"creation_date":1265823299,"answer_id":2239000,"question_id":456778,"body_markdown":"jOpenDocument is all you need.","title":"How can I access spreadsheets in the open document format (.ods) with Java?","body":"<p>jOpenDocument is all you need.</p>\n"},{"tags":[],"owner":{"account_id":13694686,"reputation":1029,"user_id":9881679,"display_name":"Adrian Jimenez"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693587973,"creation_date":1693587973,"answer_id":77024906,"question_id":456778,"body_markdown":"First import library \r\n\r\n      &lt;dependency&gt;\r\n            &lt;groupId&gt;com.github.miachm.sods&lt;/groupId&gt;\r\n            &lt;artifactId&gt;SODS&lt;/artifactId&gt;\r\n            &lt;version&gt;1.6.2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\nthen this is an example on how to read the first column of the first sheet\r\n\r\n    public static List&lt;String&gt; readColumnA(String filePath) {\r\n        List&lt;String&gt; movieList = new ArrayList&lt;&gt;();\r\n        try {\r\n            SpreadSheet spread = new SpreadSheet(new File(filePath));\r\n            //     System.out.println(&quot;Number of sheets: &quot; + spread.getNumSheets());\r\n            Sheet sheet = spread.getSheets().get(0);\r\n            //     System.out.println(&quot;In sheet &quot; + sheet.getName());\r\n            Range movies = sheet.getDataRange();\r\n            Object[][] movieColumn = movies.getValues();\r\n            for (int i = 0; i &lt; sheet.getMaxRows(); i++) {\r\n                movieList.add(movieColumn[i][0].toString());\r\n            }\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n        return movieList;\r\n    }","title":"How can I access spreadsheets in the open document format (.ods) with Java?","body":"<p>First import library</p>\n<pre><code>  &lt;dependency&gt;\n        &lt;groupId&gt;com.github.miachm.sods&lt;/groupId&gt;\n        &lt;artifactId&gt;SODS&lt;/artifactId&gt;\n        &lt;version&gt;1.6.2&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>then this is an example on how to read the first column of the first sheet</p>\n<pre><code>public static List&lt;String&gt; readColumnA(String filePath) {\n    List&lt;String&gt; movieList = new ArrayList&lt;&gt;();\n    try {\n        SpreadSheet spread = new SpreadSheet(new File(filePath));\n        //     System.out.println(&quot;Number of sheets: &quot; + spread.getNumSheets());\n        Sheet sheet = spread.getSheets().get(0);\n        //     System.out.println(&quot;In sheet &quot; + sheet.getName());\n        Range movies = sheet.getDataRange();\n        Object[][] movieColumn = movies.getValues();\n        for (int i = 0; i &lt; sheet.getMaxRows(); i++) {\n            movieList.add(movieColumn[i][0].toString());\n        }\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n    return movieList;\n}\n</code></pre>\n"}],"owner":{"account_id":10987,"reputation":50685,"user_id":21005,"accept_rate":78,"display_name":"Mnementh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12907,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":456838,"answer_count":3,"score":11,"last_activity_date":1693594957,"creation_date":1232349654,"question_id":456778,"body_markdown":"I want to read, write and create Spreadsheets in the Open Document Format with Java. And I want the resulting Java-program running on a computer without OpenOffice.org or other ODS-capable programs installed. Exists a library to access this format?","title":"How can I access spreadsheets in the open document format (.ods) with Java?","body":"<p>I want to read, write and create Spreadsheets in the Open Document Format with Java. And I want the resulting Java-program running on a computer without OpenOffice.org or other ODS-capable programs installed. Exists a library to access this format?</p>\n"},{"tags":["java","spring","spring-boot","validation","internationalization"],"answers":[{"comments":[{"owner":{"account_id":7244757,"reputation":850,"user_id":5527079,"display_name":"Nick Wills"},"score":0,"creation_date":1693593476,"post_id":75568376,"comment_id":135786460,"body_markdown":"message.properties or messages.properties ???","body":"message.properties or messages.properties ???"},{"owner":{"account_id":13170666,"reputation":78679,"user_id":9513184,"display_name":"Unmitigated"},"score":0,"creation_date":1693594870,"post_id":75568376,"comment_id":135786684,"body_markdown":"@NickWills It should be messages.properties; that was a typo.","body":"@NickWills It should be messages.properties; that was a typo."}],"tags":[],"owner":{"account_id":13170666,"reputation":78679,"user_id":9513184,"display_name":"Unmitigated"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1693594823,"creation_date":1677358555,"answer_id":75568376,"question_id":75568330,"body_markdown":"You can define properties in `messages.properties` for the validation errors. With Spring Boot, there is no need to register a `MessageSource` bean; it is done automatically and additional configuration can be done via `application.properties`.\r\n\r\n```\r\nname.size-error=min {min}, max {max} character length\r\nname.not-blank=name cannot be empty\r\nemail.error=email is not valid\r\n```\r\n\r\nThen, you can use those properties for the validation message in each annotation.\r\n\r\n```java\r\n@Size(min = 3, max = 50, message = &quot;{name.size-error}&quot;)\r\n@NotBlank(message = &quot;{name.not-blank}&quot;)\r\nprivate String name;\r\n\r\n@Email(message = &quot;{email.error}&quot;)\r\nprivate String email;","title":"Custom Validation Message in Spring Boot with internationalization?","body":"<p>You can define properties in <code>messages.properties</code> for the validation errors. With Spring Boot, there is no need to register a <code>MessageSource</code> bean; it is done automatically and additional configuration can be done via <code>application.properties</code>.</p>\n<pre><code>name.size-error=min {min}, max {max} character length\nname.not-blank=name cannot be empty\nemail.error=email is not valid\n</code></pre>\n<p>Then, you can use those properties for the validation message in each annotation.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Size(min = 3, max = 50, message = &quot;{name.size-error}&quot;)\n@NotBlank(message = &quot;{name.not-blank}&quot;)\nprivate String name;\n\n@Email(message = &quot;{email.error}&quot;)\nprivate String email;\n</code></pre>\n"}],"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":746,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1693594823,"creation_date":1677358128,"question_id":75568330,"body_markdown":"I am trying to apply a proper approach for my validation annotations as shown below:\r\n\r\n```\r\npublic class UserRequest {\r\n\r\n    @Size(min = 3, max = 50)\r\n    @NotBlank(message = &quot;name cannot be empty and min 3, max 50 character length&quot;)\r\n    private String name;\r\n\r\n    @Email(message = &quot;email is not valid&quot;)\r\n    private String email;\r\n}\r\n```\r\n\r\nI need the following features:\r\n\r\n**1.** As shown for the `name` field, I need to get field name, and min-max parameter values in the validation message.\r\n\r\n**2.** I should be able to localize these messages in the future when I need. \r\n\r\nSo, how should I implement such kind of approach in Spring Boot apps? Is `MessageSource` usage mentioned on [Custom Validation MessageSource in Spring Boot](https://www.baeldung.com/spring-custom-validation-message-source) a proper approach for this? \r\n\r\n**Update:** When I try the approach below, I get the following response:\r\n\r\n```\r\n{\r\n    &quot;timestamp&quot;: &quot;26.02.2023 01:10:15&quot;,\r\n    &quot;status&quot;: 400,\r\n    &quot;error&quot;: &quot;Bad Request&quot;,\r\n    &quot;exception&quot;: &quot;org.springframework.web.bind.MethodArgumentNotValidException&quot;,\r\n    &quot;message&quot;: &quot;Validation failed for object=&#39;createPostRequest&#39;. Error count: 1&quot;,\r\n    &quot;errors&quot;: [\r\n        {\r\n            &quot;codes&quot;: [\r\n                &quot;NotBlank.createPostRequest.name&quot;,\r\n                &quot;NotBlank.name&quot;,\r\n                &quot;NotBlank.java.lang.String&quot;,\r\n                &quot;NotBlank&quot;\r\n            ],\r\n            &quot;arguments&quot;: [\r\n                {\r\n                    &quot;codes&quot;: [\r\n                        &quot;createPostRequest.name&quot;,\r\n                        &quot;name&quot;\r\n                    ],\r\n                    &quot;arguments&quot;: null,\r\n                    &quot;defaultMessage&quot;: &quot;name&quot;,\r\n                    &quot;code&quot;: &quot;name&quot;\r\n                }\r\n            ],\r\n            &quot;defaultMessage&quot;: &quot;{name.not-blank}&quot;,\r\n            &quot;objectName&quot;: &quot;createPostRequest&quot;,\r\n            &quot;field&quot;: &quot;name&quot;,\r\n            &quot;rejectedValue&quot;: null,\r\n            &quot;bindingFailure&quot;: false,\r\n            &quot;code&quot;: &quot;NotBlank&quot;\r\n        }\r\n    ],\r\n    &quot;path&quot;: &quot;/api/v1/posts&quot;\r\n}\r\n```\r\n\r\nSo, it does not seem to convert messages provided by `message.properties` in the resources folder.","title":"Custom Validation Message in Spring Boot with internationalization?","body":"<p>I am trying to apply a proper approach for my validation annotations as shown below:</p>\n<pre><code>public class UserRequest {\n\n    @Size(min = 3, max = 50)\n    @NotBlank(message = &quot;name cannot be empty and min 3, max 50 character length&quot;)\n    private String name;\n\n    @Email(message = &quot;email is not valid&quot;)\n    private String email;\n}\n</code></pre>\n<p>I need the following features:</p>\n<p><strong>1.</strong> As shown for the <code>name</code> field, I need to get field name, and min-max parameter values in the validation message.</p>\n<p><strong>2.</strong> I should be able to localize these messages in the future when I need.</p>\n<p>So, how should I implement such kind of approach in Spring Boot apps? Is <code>MessageSource</code> usage mentioned on <a href=\"https://www.baeldung.com/spring-custom-validation-message-source\" rel=\"nofollow noreferrer\">Custom Validation MessageSource in Spring Boot</a> a proper approach for this?</p>\n<p><strong>Update:</strong> When I try the approach below, I get the following response:</p>\n<pre><code>{\n    &quot;timestamp&quot;: &quot;26.02.2023 01:10:15&quot;,\n    &quot;status&quot;: 400,\n    &quot;error&quot;: &quot;Bad Request&quot;,\n    &quot;exception&quot;: &quot;org.springframework.web.bind.MethodArgumentNotValidException&quot;,\n    &quot;message&quot;: &quot;Validation failed for object='createPostRequest'. Error count: 1&quot;,\n    &quot;errors&quot;: [\n        {\n            &quot;codes&quot;: [\n                &quot;NotBlank.createPostRequest.name&quot;,\n                &quot;NotBlank.name&quot;,\n                &quot;NotBlank.java.lang.String&quot;,\n                &quot;NotBlank&quot;\n            ],\n            &quot;arguments&quot;: [\n                {\n                    &quot;codes&quot;: [\n                        &quot;createPostRequest.name&quot;,\n                        &quot;name&quot;\n                    ],\n                    &quot;arguments&quot;: null,\n                    &quot;defaultMessage&quot;: &quot;name&quot;,\n                    &quot;code&quot;: &quot;name&quot;\n                }\n            ],\n            &quot;defaultMessage&quot;: &quot;{name.not-blank}&quot;,\n            &quot;objectName&quot;: &quot;createPostRequest&quot;,\n            &quot;field&quot;: &quot;name&quot;,\n            &quot;rejectedValue&quot;: null,\n            &quot;bindingFailure&quot;: false,\n            &quot;code&quot;: &quot;NotBlank&quot;\n        }\n    ],\n    &quot;path&quot;: &quot;/api/v1/posts&quot;\n}\n</code></pre>\n<p>So, it does not seem to convert messages provided by <code>message.properties</code> in the resources folder.</p>\n"},{"tags":["java","spring-boot","spring-cloud"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":2,"creation_date":1637653385,"post_id":70076913,"comment_id":123877019,"body_markdown":"You have to wait for a compatible version, also if you are using the parent/bom why include the explicit version of the cloud parts? Those should come from the bom.","body":"You have to wait for a compatible version, also if you are using the parent/bom why include the explicit version of the cloud parts? Those should come from the bom."},{"owner":{"account_id":1338998,"reputation":3368,"user_id":1281081,"accept_rate":90,"display_name":"AsfK"},"score":0,"creation_date":1637654213,"post_id":70076913,"comment_id":123877288,"body_markdown":"@M.Deinum thanks. zuul using org.springframework.cloud 2.2.9 RELASE, I tried force use 3.0.4 (hope to solve the issue but not..)","body":"@M.Deinum thanks. zuul using org.springframework.cloud 2.2.9 RELASE, I tried force use 3.0.4 (hope to solve the issue but not..)"},{"owner":{"account_id":1368060,"reputation":24601,"user_id":2730527,"display_name":"spencergibb"},"score":1,"creation_date":1637812376,"post_id":70076913,"comment_id":123927575,"body_markdown":"@AsfK zuul is no longer part of Spring Cloud","body":"@AsfK zuul is no longer part of Spring Cloud"}],"answers":[{"comments":[{"owner":{"account_id":5331956,"reputation":6999,"user_id":4252320,"accept_rate":59,"display_name":"ergonaut"},"score":4,"creation_date":1638360563,"post_id":70077080,"comment_id":124066161,"body_markdown":"It was not released, I guess there is a delay?","body":"It was not released, I guess there is a delay?"},{"owner":{"account_id":6084504,"reputation":2356,"user_id":4749074,"display_name":"Rib47"},"score":0,"creation_date":1678181696,"post_id":70077080,"comment_id":133479412,"body_markdown":"You could found  information about compatibility of versions of Spring Boot and Spring Cloud here: [https://spring.io/projects/spring-cloud#overview](https://spring.io/projects/spring-cloud#overview)","body":"You could found  information about compatibility of versions of Spring Boot and Spring Cloud here: <a href=\"https://spring.io/projects/spring-cloud#overview\" rel=\"nofollow noreferrer\">https://spring.io/projects/spring-cloud#overview</a>"}],"tags":[],"owner":{"account_id":1368060,"reputation":24601,"user_id":2730527,"display_name":"spencergibb"},"comment_count":2,"down_vote_count":0,"up_vote_count":11,"is_accepted":true,"score":11,"last_activity_date":1637653521,"creation_date":1637653521,"answer_id":70077080,"question_id":70076913,"body_markdown":"It will be released on November 30 2021. See https://github.com/spring-cloud/spring-cloud-release/milestones?direction=asc&amp;sort=due_date&amp;state=open","title":"Spring Boot upgrade to 2.6.0 not compatible with Spring Cloud release train","body":"<p>It will be released on November 30 2021. See <a href=\"https://github.com/spring-cloud/spring-cloud-release/milestones?direction=asc&amp;sort=due_date&amp;state=open\" rel=\"noreferrer\">https://github.com/spring-cloud/spring-cloud-release/milestones?direction=asc&amp;sort=due_date&amp;state=open</a></p>\n"},{"comments":[{"owner":{"account_id":5331956,"reputation":6999,"user_id":4252320,"accept_rate":59,"display_name":"ergonaut"},"score":1,"creation_date":1638536451,"post_id":70211566,"comment_id":124121105,"body_markdown":"https://spring.io/projects/spring-cloud should be updated to reflect this if this is true.","body":"<a href=\"https://spring.io/projects/spring-cloud\" rel=\"nofollow noreferrer\">spring.io/projects/spring-cloud</a> should be updated to reflect this if this is true."}],"tags":[],"owner":{"account_id":17074189,"reputation":163,"user_id":12354182,"display_name":"cherish sham"},"comment_count":1,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1638520917,"creation_date":1638520917,"answer_id":70211566,"question_id":70076913,"body_markdown":"You need spring cloud dependencies 2021.0.0 which is now available.","title":"Spring Boot upgrade to 2.6.0 not compatible with Spring Cloud release train","body":"<p>You need spring cloud dependencies 2021.0.0 which is now available.</p>\n"},{"tags":[],"owner":{"account_id":26541714,"reputation":1,"user_id":20172352,"display_name":"Pedro Vieira"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693594469,"creation_date":1693591700,"answer_id":77025235,"question_id":70076913,"body_markdown":"You can add &quot;spring.cloud.compatibility-verifier.enabled=false&quot; in your src/test/resources/application.properties","title":"Spring Boot upgrade to 2.6.0 not compatible with Spring Cloud release train","body":"<p>You can add &quot;spring.cloud.compatibility-verifier.enabled=false&quot; in your src/test/resources/application.properties</p>\n"}],"owner":{"account_id":1338998,"reputation":3368,"user_id":1281081,"accept_rate":90,"display_name":"AsfK"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20932,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":70077080,"answer_count":3,"score":11,"last_activity_date":1693594469,"creation_date":1637652631,"question_id":70076913,"body_markdown":"We&#39;re trying to upgrade spring boot version to 2.6.0 and faced up with &quot;Spring Boot [2.6.0] is not compatible with this Spring Cloud release train&quot; (when running integration tests).\r\n\r\nIn additional\r\n - spring-cloud.version = 2020.0.4\r\n - We&#39;re using org.springframework.cloud (spring-cloud-context &amp; spring-cloud-commons) 3.0.4\r\n - And have (also) this block in the pom:\r\n\r\n\r\n\r\n       &lt;dependency&gt;\r\n           &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n           &lt;artifactId&gt;spring-cloud-starter-netflix-zuul&lt;/artifactId&gt;\r\n           &lt;version&gt;2.2.10.RELEASE&lt;/version&gt;\r\n           &lt;exclusions&gt;\r\n              &lt;exclusion&gt;\r\n                 &lt;artifactId&gt;bcprov-jdk15on&lt;/artifactId&gt;\r\n                 &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\r\n              &lt;/exclusion&gt;\r\n              &lt;exclusion&gt;\r\n                 &lt;artifactId&gt;spring-cloud-starter&lt;/artifactId&gt;\r\n                 &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n              &lt;/exclusion&gt;\r\n           &lt;/exclusions&gt;\r\n       &lt;/dependency&gt;\r\n\r\n       &lt;dependency&gt;\r\n           &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n           &lt;artifactId&gt;spring-cloud-starter&lt;/artifactId&gt;\r\n           &lt;version&gt;3.0.4&lt;/version&gt;\r\n       &lt;/dependency&gt;\r\n\r\n\r\nActually I didn&#39;t find in [Spring docs][1] compobility between Spring Cloud and Spring Boot 2.6.0, it&#39;s sound very odd but Have I wait for newest spring cloud version or I can beat it?\r\n\r\nP.S. :\r\n\r\nSDK: Java 8\r\n\r\nOther tries (each was tried separately):\r\n - `spring.profiles.active=native`\r\n - `spring.cloud.compatibility-verifier.enabled=false`\r\n\r\n\r\n  [1]: https://spring.io/projects/spring-cloud#overview","title":"Spring Boot upgrade to 2.6.0 not compatible with Spring Cloud release train","body":"<p>We're trying to upgrade spring boot version to 2.6.0 and faced up with &quot;Spring Boot [2.6.0] is not compatible with this Spring Cloud release train&quot; (when running integration tests).</p>\n<p>In additional</p>\n<ul>\n<li><p>spring-cloud.version = 2020.0.4</p>\n</li>\n<li><p>We're using org.springframework.cloud (spring-cloud-context &amp; spring-cloud-commons) 3.0.4</p>\n</li>\n<li><p>And have (also) this block in the pom:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-cloud-starter-netflix-zuul&lt;/artifactId&gt;\n    &lt;version&gt;2.2.10.RELEASE&lt;/version&gt;\n    &lt;exclusions&gt;\n       &lt;exclusion&gt;\n          &lt;artifactId&gt;bcprov-jdk15on&lt;/artifactId&gt;\n          &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\n       &lt;/exclusion&gt;\n       &lt;exclusion&gt;\n          &lt;artifactId&gt;spring-cloud-starter&lt;/artifactId&gt;\n          &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n       &lt;/exclusion&gt;\n    &lt;/exclusions&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-cloud-starter&lt;/artifactId&gt;\n    &lt;version&gt;3.0.4&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n</li>\n</ul>\n<p>Actually I didn't find in <a href=\"https://spring.io/projects/spring-cloud#overview\" rel=\"noreferrer\">Spring docs</a> compobility between Spring Cloud and Spring Boot 2.6.0, it's sound very odd but Have I wait for newest spring cloud version or I can beat it?</p>\n<p>P.S. :</p>\n<p>SDK: Java 8</p>\n<p>Other tries (each was tried separately):</p>\n<ul>\n<li><code>spring.profiles.active=native</code></li>\n<li><code>spring.cloud.compatibility-verifier.enabled=false</code></li>\n</ul>\n"},{"tags":["java","spring-boot","hibernate","jpa"],"comments":[{"owner":{"account_id":3040935,"reputation":154,"user_id":2577987,"accept_rate":43,"display_name":"Eric"},"score":0,"creation_date":1693591938,"post_id":77025167,"comment_id":135786239,"body_markdown":"I don&#39;t have an answer to your original question, but a couple of comments:\n1 . it&#39;s not a very good practice to have hibernate generate your schema- that&#39;s ok for small poc type projects, but you would want to have your schema managed separately.\n2. why does it matter that the column names be prefixed with the table name?","body":"I don&#39;t have an answer to your original question, but a couple of comments: 1 . it&#39;s not a very good practice to have hibernate generate your schema- that&#39;s ok for small poc type projects, but you would want to have your schema managed separately. 2. why does it matter that the column names be prefixed with the table name?"},{"owner":{"account_id":23090602,"reputation":59,"user_id":18073200,"display_name":"denstran"},"score":0,"creation_date":1693594228,"post_id":77025167,"comment_id":135786592,"body_markdown":"@Eric 1. Thank you for advice. I think so too, but my project, as you said, is small. Just to practice. 2. Actually same reasons, just practising. Thank you for you advice","body":"@Eric 1. Thank you for advice. I think so too, but my project, as you said, is small. Just to practice. 2. Actually same reasons, just practising. Thank you for you advice"},{"owner":{"account_id":3040935,"reputation":154,"user_id":2577987,"accept_rate":43,"display_name":"Eric"},"score":0,"creation_date":1693616057,"post_id":77025167,"comment_id":135788619,"body_markdown":"ah yes I see-- make sense!!","body":"ah yes I see-- make sense!!"}],"answers":[{"tags":[],"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1693594304,"creation_date":1693592588,"answer_id":77025313,"question_id":77025167,"body_markdown":"It is because the `name` of the `@AttributeOverride` should refer to the name of the field of the `@Embeddable` class but not the database column name. Also, it is case-sensitive.\r\n\r\nSo change to the following should fix the problem : \r\n\r\n``` java\r\n@Embedded\r\n@AttributeOverrides({\r\n        @AttributeOverride(name = &quot;city&quot;,column = @Column(name = &quot;COMPANY_BRANCH_CITY&quot;)),\r\n        @AttributeOverride(name = &quot;zipCode&quot;,column = @Column(name = &quot;COMPANY_BRANCH_ZIP_CODE&quot;)),\r\n        @AttributeOverride(name = &quot;street&quot;,column = @Column(name = &quot;COMPANY_BRANCH_STREET&quot;)),\r\n        @AttributeOverride(name = &quot;country&quot;,column = @Column(name = &quot;COMPANY_BRANCH_COUNTRY&quot;))\r\n})\r\nprivate Address companyBranchAddress;\r\n\r\n```","title":"@AttributeOverrides not working in spring boot project","body":"<p>It is because the <code>name</code> of the <code>@AttributeOverride</code> should refer to the name of the field of the <code>@Embeddable</code> class but not the database column name. Also, it is case-sensitive.</p>\n<p>So change to the following should fix the problem :</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Embedded\n@AttributeOverrides({\n        @AttributeOverride(name = &quot;city&quot;,column = @Column(name = &quot;COMPANY_BRANCH_CITY&quot;)),\n        @AttributeOverride(name = &quot;zipCode&quot;,column = @Column(name = &quot;COMPANY_BRANCH_ZIP_CODE&quot;)),\n        @AttributeOverride(name = &quot;street&quot;,column = @Column(name = &quot;COMPANY_BRANCH_STREET&quot;)),\n        @AttributeOverride(name = &quot;country&quot;,column = @Column(name = &quot;COMPANY_BRANCH_COUNTRY&quot;))\n})\nprivate Address companyBranchAddress;\n\n</code></pre>\n"}],"owner":{"account_id":23090602,"reputation":59,"user_id":18073200,"display_name":"denstran"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77025313,"answer_count":1,"score":0,"last_activity_date":1693594304,"creation_date":1693590778,"question_id":77025167,"body_markdown":"I have got an embeddable class. The problem is that i want to override it attributes via @AttributeOverrides, but it is not working as i am expecting\r\n\r\n    @Embeddable\r\n    @Data\r\n    @Getter\r\n    @Setter\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    public class Address {\r\n        @NotNull\r\n        @NotBlank\r\n        @Column(name = &quot;CITY&quot;)\r\n        private String city;\r\n    \r\n        @NotNull\r\n        @NotBlank\r\n        @Column(name = &quot;ZIP_CODE&quot;)\r\n        private String zipCode;\r\n    \r\n        @NotNull\r\n        @NotBlank\r\n        @Column(name = &quot;STREET&quot;)\r\n        private String street;\r\n    \r\n        @NotNull\r\n        @NotBlank\r\n        @Column(name = &quot;COUNTRY&quot;)\r\n        private String country;\r\n    \r\n        @Override\r\n        public String toString() {\r\n            return String.format(&quot;%s, %s, %s, %s&quot;, country, city, street, zipCode);\r\n        }\r\n    \r\n        @Override\r\n        public boolean equals(Object o) {\r\n            if (this == o) return true;\r\n            if (!(o instanceof Address)) return false;\r\n            Address address = (Address) o;\r\n            return city.equals(address.city) &amp;&amp; zipCode.equals(address.zipCode) &amp;&amp; street.equals(address.street)\r\n                    &amp;&amp; country.equals(address.country);\r\n        }\r\n    \r\n        @Override\r\n        public int hashCode() {\r\n            return Objects.hash(city, zipCode, street, country);\r\n        }\r\n    }\r\n\r\nAnd i have this definition for this field in my entity class\r\n\r\n    @Embedded\r\n        @AttributeOverrides({\r\n                @AttributeOverride(name = &quot;CITY&quot;,\r\n                    column = @Column(name = &quot;COMPANY_BRANCH_CITY&quot;)),\r\n                @AttributeOverride(name = &quot;zip_code&quot;,\r\n                    column = @Column(name = &quot;COMPANY_BRANCH_ZIP_CODE&quot;)),\r\n                @AttributeOverride(name = &quot;STREET&quot;,\r\n                    column = @Column(name = &quot;COMPANY_BRANCH_STREET&quot;)),\r\n                @AttributeOverride(name = &quot;COUNTRY&quot;,\r\n                column = @Column(name = &quot;COMPANY_BRANCH_COUNTRY&quot;))\r\n        })\r\n        private Address companyBranchAddress;\r\n\r\nWhen hibernate generating my schema, it is wrong, attributes names are from embeddable class, they are not changed:\r\n\r\n    Hibernate: \r\n        create table company_branch (\r\n            id bigint generated by default as identity,\r\n            company_branch_budget varchar(63) not null,\r\n            city varchar(255),\r\n            company_branch_phone_number varchar(255) not null,\r\n            country varchar(255),\r\n            street varchar(255),\r\n            zip_code varchar(255),\r\n            primary key (id)\r\n        )\r\n\r\nWhat am I missing?","title":"@AttributeOverrides not working in spring boot project","body":"<p>I have got an embeddable class. The problem is that i want to override it attributes via @AttributeOverrides, but it is not working as i am expecting</p>\n<pre><code>@Embeddable\n@Data\n@Getter\n@Setter\n@NoArgsConstructor\n@AllArgsConstructor\npublic class Address {\n    @NotNull\n    @NotBlank\n    @Column(name = &quot;CITY&quot;)\n    private String city;\n\n    @NotNull\n    @NotBlank\n    @Column(name = &quot;ZIP_CODE&quot;)\n    private String zipCode;\n\n    @NotNull\n    @NotBlank\n    @Column(name = &quot;STREET&quot;)\n    private String street;\n\n    @NotNull\n    @NotBlank\n    @Column(name = &quot;COUNTRY&quot;)\n    private String country;\n\n    @Override\n    public String toString() {\n        return String.format(&quot;%s, %s, %s, %s&quot;, country, city, street, zipCode);\n    }\n\n    @Override\n    public boolean equals(Object o) {\n        if (this == o) return true;\n        if (!(o instanceof Address)) return false;\n        Address address = (Address) o;\n        return city.equals(address.city) &amp;&amp; zipCode.equals(address.zipCode) &amp;&amp; street.equals(address.street)\n                &amp;&amp; country.equals(address.country);\n    }\n\n    @Override\n    public int hashCode() {\n        return Objects.hash(city, zipCode, street, country);\n    }\n}\n</code></pre>\n<p>And i have this definition for this field in my entity class</p>\n<pre><code>@Embedded\n    @AttributeOverrides({\n            @AttributeOverride(name = &quot;CITY&quot;,\n                column = @Column(name = &quot;COMPANY_BRANCH_CITY&quot;)),\n            @AttributeOverride(name = &quot;zip_code&quot;,\n                column = @Column(name = &quot;COMPANY_BRANCH_ZIP_CODE&quot;)),\n            @AttributeOverride(name = &quot;STREET&quot;,\n                column = @Column(name = &quot;COMPANY_BRANCH_STREET&quot;)),\n            @AttributeOverride(name = &quot;COUNTRY&quot;,\n            column = @Column(name = &quot;COMPANY_BRANCH_COUNTRY&quot;))\n    })\n    private Address companyBranchAddress;\n</code></pre>\n<p>When hibernate generating my schema, it is wrong, attributes names are from embeddable class, they are not changed:</p>\n<pre><code>Hibernate: \n    create table company_branch (\n        id bigint generated by default as identity,\n        company_branch_budget varchar(63) not null,\n        city varchar(255),\n        company_branch_phone_number varchar(255) not null,\n        country varchar(255),\n        street varchar(255),\n        zip_code varchar(255),\n        primary key (id)\n    )\n</code></pre>\n<p>What am I missing?</p>\n"},{"tags":["java"],"answers":[{"comments":[{"owner":{"account_id":17898447,"reputation":378,"user_id":13003236,"display_name":"Simon Shkolnik"},"score":0,"creation_date":1595093982,"post_id":62971694,"comment_id":111358257,"body_markdown":"That api is included in tools.jar, and it was removed in Java 9.","body":"That api is included in tools.jar, and it was removed in Java 9."},{"owner":{"account_id":19054692,"reputation":3493,"user_id":13912132,"display_name":"JCWasmx86"},"score":0,"creation_date":1595094019,"post_id":62971694,"comment_id":111358268,"body_markdown":"What about this: https://docs.oracle.com/en/java/javase/14/docs/api/jdk.attach/module-summary.html","body":"What about this: <a href=\"https://docs.oracle.com/en/java/javase/14/docs/api/jdk.attach/module-summary.html\" rel=\"nofollow noreferrer\">docs.oracle.com/en/java/javase/14/docs/api/jdk.attach/&hellip;</a>"},{"owner":{"account_id":17898447,"reputation":378,"user_id":13003236,"display_name":"Simon Shkolnik"},"score":0,"creation_date":1595094283,"post_id":62971694,"comment_id":111358362,"body_markdown":"my question is how to use that in my project","body":"my question is how to use that in my project"}],"tags":[],"owner":{"account_id":19054692,"reputation":3493,"user_id":13912132,"display_name":"JCWasmx86"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1595093742,"creation_date":1595093742,"answer_id":62971694,"question_id":62971569,"body_markdown":"You have to import `com.sun.tools.attach.&lt;className&gt;` or `com.sun.tools.attach.spi.&lt;className&gt;`.\r\nThere are not that many resources, but this one from oracle seems like a good one: https://blogs.oracle.com/corejavatechtips/the-attach-api","title":"Using the attach api in Java","body":"<p>You have to import <code>com.sun.tools.attach.&lt;className&gt;</code> or <code>com.sun.tools.attach.spi.&lt;className&gt;</code>.\nThere are not that many resources, but this one from oracle seems like a good one: <a href=\"https://blogs.oracle.com/corejavatechtips/the-attach-api\" rel=\"nofollow noreferrer\">https://blogs.oracle.com/corejavatechtips/the-attach-api</a></p>\n"},{"comments":[{"owner":{"account_id":17898447,"reputation":378,"user_id":13003236,"display_name":"Simon Shkolnik"},"score":0,"creation_date":1595158512,"post_id":62979134,"comment_id":111371835,"body_markdown":"Thank you! I was able to import it by creating a module","body":"Thank you! I was able to import it by creating a module"},{"owner":{"account_id":5998820,"reputation":12676,"user_id":4712734,"display_name":"DuncG"},"score":0,"creation_date":1693585181,"post_id":62979134,"comment_id":135785212,"body_markdown":"This example should run under JDK11+ (tried 11/14/17/20/21)","body":"This example should run under JDK11+ (tried 11/14/17/20/21)"}],"tags":[],"owner":{"account_id":5998820,"reputation":12676,"user_id":4712734,"display_name":"DuncG"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1693593678,"creation_date":1595154892,"answer_id":62979134,"question_id":62971569,"body_markdown":"I use JDK14 with module definitions, this is all I needed to change to use with my module-info.java:\r\n\r\n    requires transitive jdk.attach;\r\n\r\nHere is a simple call to run it:\r\n\r\n    import com.sun.tools.attach.VirtualMachine;\r\n\r\n    public class AttachApi {\r\n\r\n        public static void main(String[] args) throws Exception {\r\n            System.out.println(&quot;BEGIN&quot;);\r\n            var vms = VirtualMachine.list();\r\n            for (var vm : vms) {\r\n                System.out.println(&quot;vm=&quot;+vm);\r\n            }\r\n\r\n            System.out.println(&quot;END&quot;);\r\n        }\r\n    }\r\n\r\nThe above code runs as-is with a non-module project in newer JDK if saved to a file and compiled then run, or compiled+run in one step with `java`:\r\n\r\n     %JAVA_HOME%\\bin\\java AttachApi.java","title":"Using the attach api in Java","body":"<p>I use JDK14 with module definitions, this is all I needed to change to use with my module-info.java:</p>\n<pre><code>requires transitive jdk.attach;\n</code></pre>\n<p>Here is a simple call to run it:</p>\n<pre><code>import com.sun.tools.attach.VirtualMachine;\n\npublic class AttachApi {\n\n    public static void main(String[] args) throws Exception {\n        System.out.println(&quot;BEGIN&quot;);\n        var vms = VirtualMachine.list();\n        for (var vm : vms) {\n            System.out.println(&quot;vm=&quot;+vm);\n        }\n\n        System.out.println(&quot;END&quot;);\n    }\n}\n</code></pre>\n<p>The above code runs as-is with a non-module project in newer JDK if saved to a file and compiled then run, or compiled+run in one step with <code>java</code>:</p>\n<pre><code> %JAVA_HOME%\\bin\\java AttachApi.java\n</code></pre>\n"}],"owner":{"account_id":17898447,"reputation":378,"user_id":13003236,"display_name":"Simon Shkolnik"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1509,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":62979134,"answer_count":2,"score":2,"last_activity_date":1693593678,"creation_date":1595093127,"question_id":62971569,"body_markdown":"I want to use the attach API in Java 14. To my knowledge, that was moved to jdk.attach in Java 9. I ran `java --list-modules` and I had the module installed. \r\n\r\nHow do I actually use the module in my project? I tried `import jdk.attach` but that threw an error.","title":"Using the attach api in Java","body":"<p>I want to use the attach API in Java 14. To my knowledge, that was moved to jdk.attach in Java 9. I ran <code>java --list-modules</code> and I had the module installed.</p>\n<p>How do I actually use the module in my project? I tried <code>import jdk.attach</code> but that threw an error.</p>\n"},{"tags":["java","junit","mockito","junit5"],"comments":[{"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1693587124,"post_id":77022233,"comment_id":135785482,"body_markdown":"That doesn&#39;t make sense. Your service will always call the same method on its dependencies, it doesn&#39;t make sense to stub different method calls for different test cases","body":"That doesn&#39;t make sense. Your service will always call the same method on its dependencies, it doesn&#39;t make sense to stub different method calls for different test cases"}],"answers":[{"tags":[],"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1693593102,"creation_date":1693591701,"answer_id":77025236,"question_id":77022233,"body_markdown":"As the methods you want to stub always return `List&lt;Element&gt;` , you can use  `Supplier&lt;List&lt;Element&gt;&gt;` to represent a method call. Also use `@MethodSource` to define the parameters is easier and cleaner than `ArgumentsProvider` IMO.\r\n\r\n ``` java\r\n\r\n@ParameterizedTest\r\n@MethodSource(&quot;args&quot;)\r\nvoid findAllTest(Map&lt;String, String&gt; allParamaters, Supplier&lt;List&lt;Element&gt;&gt; methodCall) {\r\n\r\n  when(methodCall.get()).thenReturn(List.of(element));\r\n  var expectedResponse = myService.excute(allParamaters);\r\n\r\n}\r\n\r\nprivate static Stream&lt;Arguments&gt; args() {\r\n\r\n    Supplier&lt;List&lt;Element&gt;&gt; find1 = () -&gt; myRepository.findComponentByKey_1(...);\r\n    Supplier&lt;List&lt;Element&gt;&gt; find2 = () -&gt; myRepository.findComponentByKey_2(...);\r\n\r\n    return Stream.of(\r\n            Arguments.of(Map.of(&quot;k1&quot;, &quot;v1&quot;), find1),\r\n            Arguments.of(Map.of(&quot;k2&quot;, &quot;v2&quot;), find2)\r\n    );\r\n}\r\n\r\n\r\n```\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"Mockito parametrize methodCall in mockito","body":"<p>As the methods you want to stub always return <code>List&lt;Element&gt;</code> , you can use  <code>Supplier&lt;List&lt;Element&gt;&gt;</code> to represent a method call. Also use <code>@MethodSource</code> to define the parameters is easier and cleaner than <code>ArgumentsProvider</code> IMO.</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n@ParameterizedTest\n@MethodSource(&quot;args&quot;)\nvoid findAllTest(Map&lt;String, String&gt; allParamaters, Supplier&lt;List&lt;Element&gt;&gt; methodCall) {\n\n when(methodCall.get()).thenReturn(List.of(element));\n var expectedResponse = myService.excute(allParamaters);\n\n}\n\nprivate static Stream&lt;Arguments&gt; args() {\n\n   Supplier&lt;List&lt;Element&gt;&gt; find1 = () -&gt; myRepository.findComponentByKey_1(...);\n   Supplier&lt;List&lt;Element&gt;&gt; find2 = () -&gt; myRepository.findComponentByKey_2(...);\n\n   return Stream.of(\n           Arguments.of(Map.of(&quot;k1&quot;, &quot;v1&quot;), find1),\n           Arguments.of(Map.of(&quot;k2&quot;, &quot;v2&quot;), find2)\n   );\n}\n\n\n</code></pre>\n"}],"owner":{"account_id":2990507,"reputation":4955,"user_id":2538180,"accept_rate":53,"display_name":"emoleumassi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77025236,"answer_count":1,"score":0,"last_activity_date":1693593102,"creation_date":1693563032,"question_id":77022233,"body_markdown":"```\r\n@ExtendWith(MockitoExtension.class)\r\npublic class MyServiceTest\r\n{\r\n   @Mock\r\n   private static MyRepository myRepository;\r\n   private MyService myService;\r\n\r\n   @BeforeEach\r\n   void setUp()\r\n   {\r\n      myService = new MyService(myRepository);\r\n   }\r\n\r\n@ParameterizedTest\r\n   @ArgumentsSource(TestParameter.class)\r\n   void findAllTest(Map&lt;String, String&gt; allParamaters, Object methodCall) throws JsonProcessingException\r\n   {\r\n\r\n      Element element = Element.builder().identification(&quot;id&quot;).build();\r\n\r\n      // how to pass different methodCall according to parametrized tests\r\n      when(methodCall).thenReturn(List.of(element));\r\n\r\n      var expectedResponse = myService.excute(allParamaters);\r\n\r\n      //assert....;\r\n   }\r\n\r\n   private static class TestParameter implements ArgumentsProvider\r\n   {\r\nprivate static final MyRepository myRepository = mock(MyRepository.class); \r\n      @Override\r\n      public Stream&lt;? extends Arguments&gt; provideArguments(ExtensionContext context)\r\n      {\r\n         return Stream.of(\r\n                  Arguments.of(Map.of(&quot;key_1&quot;, &quot;value_2&quot;, myRepository.findComponentByKey_1(....)),\r\n                  Arguments.of(Map.of(&quot;key_1&quot;, &quot;value_2&quot;, myRepository.findComponentByKey_2(....)),\r\n         );\r\n      }\r\n   }\r\n```\r\n\r\nhow to pass different methodCall according to parametrized tests to `when`. I always return the same list of elements","title":"Mockito parametrize methodCall in mockito","body":"<pre><code>@ExtendWith(MockitoExtension.class)\npublic class MyServiceTest\n{\n   @Mock\n   private static MyRepository myRepository;\n   private MyService myService;\n\n   @BeforeEach\n   void setUp()\n   {\n      myService = new MyService(myRepository);\n   }\n\n@ParameterizedTest\n   @ArgumentsSource(TestParameter.class)\n   void findAllTest(Map&lt;String, String&gt; allParamaters, Object methodCall) throws JsonProcessingException\n   {\n\n      Element element = Element.builder().identification(&quot;id&quot;).build();\n\n      // how to pass different methodCall according to parametrized tests\n      when(methodCall).thenReturn(List.of(element));\n\n      var expectedResponse = myService.excute(allParamaters);\n\n      //assert....;\n   }\n\n   private static class TestParameter implements ArgumentsProvider\n   {\nprivate static final MyRepository myRepository = mock(MyRepository.class); \n      @Override\n      public Stream&lt;? extends Arguments&gt; provideArguments(ExtensionContext context)\n      {\n         return Stream.of(\n                  Arguments.of(Map.of(&quot;key_1&quot;, &quot;value_2&quot;, myRepository.findComponentByKey_1(....)),\n                  Arguments.of(Map.of(&quot;key_1&quot;, &quot;value_2&quot;, myRepository.findComponentByKey_2(....)),\n         );\n      }\n   }\n</code></pre>\n<p>how to pass different methodCall according to parametrized tests to <code>when</code>. I always return the same list of elements</p>\n"},{"tags":["java","glsl","jogl","lighting"],"comments":[{"owner":{"account_id":207965,"reputation":3704,"user_id":458157,"accept_rate":75,"display_name":"gouessej"},"score":0,"creation_date":1693686644,"post_id":77025345,"comment_id":135794227,"body_markdown":"At first, rather ask JOGL specific questions on our official JogAmp forum. Secondly, I advise you to compare your shaders and the rest of your code with our example using shaders: https://jogamp.org/cgit/jogl-demos.git/tree/src/demos/es2/RawGL2ES2demo.java?id=HEAD Finally, using indirect NIO buffers with JOGL works but is less efficient as it forces JOGL to convert them into direct NIO buffers anyway.","body":"At first, rather ask JOGL specific questions on our official JogAmp forum. Secondly, I advise you to compare your shaders and the rest of your code with our example using shaders: <a href=\"https://jogamp.org/cgit/jogl-demos.git/tree/src/demos/es2/RawGL2ES2demo.java?id=HEAD\" rel=\"nofollow noreferrer\">jogamp.org/cgit/jogl-demos.git/tree/src/demos/es2/&hellip;</a> Finally, using indirect NIO buffers with JOGL works but is less efficient as it forces JOGL to convert them into direct NIO buffers anyway."}],"owner":{"account_id":20468283,"reputation":11,"user_id":15019302,"display_name":"IAmSoCool"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693592956,"creation_date":1693592956,"question_id":77025345,"body_markdown":"I am currently working with lighting shaders in JOGL, and they are not working very well.\r\nI dont really know what i did wrong, but the light position is not applying (i think) and overall the light is dropping very weirdly, on the screenshot below you can see my cube render with lighting\r\n\r\n\r\nThe java code to render:\r\n\r\n```\r\n@Override\r\n    public void display(GLAutoDrawable drawable) {\r\n        float mod = 0.1f;\r\n        if(keys.contains(&quot;w&quot;)) player[2]+=mod;\r\n        if(keys.contains(&quot;s&quot;)) player[2]-=mod;\r\n        if(keys.contains(&quot;a&quot;)) player[0]+=mod;\r\n        if(keys.contains(&quot;d&quot;)) player[0]-=mod;\r\n\r\n        GL2 gl = drawable.getGL().getGL2();\r\n        gl.glClear(GL2.GL_COLOR_BUFFER_BIT | GL2.GL_DEPTH_BUFFER_BIT);\r\n\r\n        modelViewMatrix.loadIdentity();\r\n        modelViewMatrix.translate(player[0], player[1], player[2]-6);\r\n        modelViewMatrix.rotate((float) Math.toRadians(angle), 1, 1, 1);\r\n        modelViewMatrix.scale(1, 1, 1);\r\n\r\n        projectionMatrix.loadIdentity();\r\n        projectionMatrix.makePerspective(90f, (float) frame.getWidth()/frame.getHeight(), 1.5f, 20);\r\n\r\n        gl.glMatrixMode(GL2.GL_PROJECTION);\r\n        gl.glLoadIdentity();\r\n        gl.glMultMatrixf(FloatBuffer.wrap(projectionMatrix.getMatrix()));\r\n\r\n        // Vertices and colors for the cube&#39;s faces\r\n        float[][] vertices = {\r\n                {-1.000000f, -1.000000f, 1.000000f},\r\n                {-1.000000f, 1.000000f, 1.000000f},\r\n                {-1.000000f, -1.000000f, -1.000000f},\r\n                {-1.000000f, 1.000000f, -1.000000f},\r\n                {1.000000f, -1.000000f, 1.000000f},\r\n                {1.000000f, 1.000000f, 1.000000f},\r\n                {1.000000f, -1.000000f, -1.000000f},\r\n                {1.000000f, 1.000000f, -1.000000f}\r\n        };\r\n\r\n        float[][] normals = new float[][] {\r\n                {-1.0000f, 0.0000f, 0.0000f},\r\n                {0.0000f, 0.0000f, -1.0000f},\r\n                {1.0000f, 0.0000f, 0.0000f},\r\n                {0.0000f, 0.0000f, 1.0000f},\r\n                {0.0000f, -1.0000f, 0.0000f},\r\n                {0.0000f, 1.0000f, 0.0000f}\r\n        };\r\n        int[] indices = new int[] {\r\n               1, 2, 0,\r\n               3, 6, 2,\r\n               7, 4, 6,\r\n               5, 0, 4,\r\n               6, 0, 2,\r\n               3, 5, 7,\r\n               1, 3, 2,\r\n               3, 7, 6,\r\n               7, 5, 4,\r\n               5, 1, 0,\r\n               6, 4, 0,\r\n               3, 1, 5\r\n        };\r\n        int errorCode = 0;\r\n\r\n        int id = l.getProgramID(gl);\r\n        gl.glUseProgram(id);\r\n\r\n        gl.glUniformMatrix4fv(gl.glGetUniformLocation(id, &quot;modelViewMatrix&quot;), 1, false, modelViewMatrix.getMatrix(), 0);\r\n        gl.glUniformMatrix4fv(gl.glGetUniformLocation(id, &quot;projectionMatrix&quot;), 1, false, projectionMatrix.getMatrix(), 0);\r\n\r\n        gl.glUniform3f(gl.glGetUniformLocation(id, &quot;lightColor&quot;), 1, 1, 1);\r\n        gl.glUniform3f(gl.glGetUniformLocation(id, &quot;lightPosition&quot;), 1, 2, -1);\r\n        gl.glUniform1f(gl.glGetUniformLocation(id, &quot;shininess&quot;), .5f);\r\n\r\n        l.setPosition(Buffers.newDirectFloatBuffer(to1d(vertices)));\r\n        l.setNormal(Buffers.newDirectFloatBuffer(to1d(normals)));\r\n        l.setColor(Buffers.newDirectFloatBuffer(new float[] {1, 0, 1}));\r\n\r\n        l.bindBuffers(gl);\r\n\r\n        gl.glMatrixMode(GL2.GL_MODELVIEW);\r\n        gl.glLoadIdentity();\r\n        gl.glMultMatrixf(FloatBuffer.wrap(modelViewMatrix.getMatrix()));\r\n\r\n        gl.glDrawElements(GL2.GL_TRIANGLES, indices.length, GL2.GL_UNSIGNED_INT, Buffers.newDirectIntBuffer(indices));\r\n\r\n        errorCode = gl.glGetError();\r\n        if(errorCode != GL2.GL_NO_ERROR) {\r\n            String errorString = new GLU().gluErrorString(errorCode);\r\n            System.err.println(&quot;OpenGL error: 1 &quot; + errorString);\r\n        }\r\n\r\n        l.disable(gl);\r\n        l.unbindBuffers(gl);\r\n        gl.glUseProgram(0);\r\n\r\n        angle += 0.5f;\r\n    }\r\n```\r\n\r\nVertex shader:\r\n```\r\n#version 330 core\r\n\r\nlayout(location = 0) in vec3 inPosition;\r\nlayout(location = 1) in vec3 inNormal;\r\nlayout(location = 2) in vec3 inColor;\r\n\r\nout vec3 fragColor;\r\nout vec3 fragNormal;\r\nout vec3 lightVec;\r\n\r\nuniform mat4 modelViewMatrix;\r\nuniform mat4 projectionMatrix;\r\nuniform vec3 lightPosition;\r\n\r\nvoid main() {\r\n    vec4 worldPos = modelViewMatrix * vec4(inPosition, 1.0);\r\n    gl_Position = projectionMatrix * worldPos;\r\n\r\n    fragNormal = (modelViewMatrix * vec4(inNormal, 0.0)).xyz;\r\n    lightVec = lightPosition;\r\n\r\n    fragColor = inColor;\r\n}\r\n```\r\nFragment shader:\r\n```\r\n#version 330 core\r\n\r\nin vec3 fragColor;\r\nin vec3 fragNormal;\r\nin vec3 lightVec;\r\n\r\nout vec4 outColor;\r\n\r\nuniform vec3 lightColor;\r\nuniform float shininess;\r\n\r\nvoid main() {\r\n    vec3 norm = normalize(fragNormal);\r\n    vec3 lightDir = normalize(lightVec);\r\n\r\n    float ndot = max(dot(norm, lightDir), 0.0);\r\n    vec3 diffuse = lightColor * fragColor * ndot;\r\n\r\n    outColor = vec4(diffuse, 1.0);\r\n}\r\n```\r\n\r\n\r\n[![The result i get:](https://i.stack.imgur.com/4ZObU.png)](https://i.stack.imgur.com/4ZObU.png)","title":"Why are my JOGL lighting shaders not working?","body":"<p>I am currently working with lighting shaders in JOGL, and they are not working very well.\nI dont really know what i did wrong, but the light position is not applying (i think) and overall the light is dropping very weirdly, on the screenshot below you can see my cube render with lighting</p>\n<p>The java code to render:</p>\n<pre><code>@Override\n    public void display(GLAutoDrawable drawable) {\n        float mod = 0.1f;\n        if(keys.contains(&quot;w&quot;)) player[2]+=mod;\n        if(keys.contains(&quot;s&quot;)) player[2]-=mod;\n        if(keys.contains(&quot;a&quot;)) player[0]+=mod;\n        if(keys.contains(&quot;d&quot;)) player[0]-=mod;\n\n        GL2 gl = drawable.getGL().getGL2();\n        gl.glClear(GL2.GL_COLOR_BUFFER_BIT | GL2.GL_DEPTH_BUFFER_BIT);\n\n        modelViewMatrix.loadIdentity();\n        modelViewMatrix.translate(player[0], player[1], player[2]-6);\n        modelViewMatrix.rotate((float) Math.toRadians(angle), 1, 1, 1);\n        modelViewMatrix.scale(1, 1, 1);\n\n        projectionMatrix.loadIdentity();\n        projectionMatrix.makePerspective(90f, (float) frame.getWidth()/frame.getHeight(), 1.5f, 20);\n\n        gl.glMatrixMode(GL2.GL_PROJECTION);\n        gl.glLoadIdentity();\n        gl.glMultMatrixf(FloatBuffer.wrap(projectionMatrix.getMatrix()));\n\n        // Vertices and colors for the cube's faces\n        float[][] vertices = {\n                {-1.000000f, -1.000000f, 1.000000f},\n                {-1.000000f, 1.000000f, 1.000000f},\n                {-1.000000f, -1.000000f, -1.000000f},\n                {-1.000000f, 1.000000f, -1.000000f},\n                {1.000000f, -1.000000f, 1.000000f},\n                {1.000000f, 1.000000f, 1.000000f},\n                {1.000000f, -1.000000f, -1.000000f},\n                {1.000000f, 1.000000f, -1.000000f}\n        };\n\n        float[][] normals = new float[][] {\n                {-1.0000f, 0.0000f, 0.0000f},\n                {0.0000f, 0.0000f, -1.0000f},\n                {1.0000f, 0.0000f, 0.0000f},\n                {0.0000f, 0.0000f, 1.0000f},\n                {0.0000f, -1.0000f, 0.0000f},\n                {0.0000f, 1.0000f, 0.0000f}\n        };\n        int[] indices = new int[] {\n               1, 2, 0,\n               3, 6, 2,\n               7, 4, 6,\n               5, 0, 4,\n               6, 0, 2,\n               3, 5, 7,\n               1, 3, 2,\n               3, 7, 6,\n               7, 5, 4,\n               5, 1, 0,\n               6, 4, 0,\n               3, 1, 5\n        };\n        int errorCode = 0;\n\n        int id = l.getProgramID(gl);\n        gl.glUseProgram(id);\n\n        gl.glUniformMatrix4fv(gl.glGetUniformLocation(id, &quot;modelViewMatrix&quot;), 1, false, modelViewMatrix.getMatrix(), 0);\n        gl.glUniformMatrix4fv(gl.glGetUniformLocation(id, &quot;projectionMatrix&quot;), 1, false, projectionMatrix.getMatrix(), 0);\n\n        gl.glUniform3f(gl.glGetUniformLocation(id, &quot;lightColor&quot;), 1, 1, 1);\n        gl.glUniform3f(gl.glGetUniformLocation(id, &quot;lightPosition&quot;), 1, 2, -1);\n        gl.glUniform1f(gl.glGetUniformLocation(id, &quot;shininess&quot;), .5f);\n\n        l.setPosition(Buffers.newDirectFloatBuffer(to1d(vertices)));\n        l.setNormal(Buffers.newDirectFloatBuffer(to1d(normals)));\n        l.setColor(Buffers.newDirectFloatBuffer(new float[] {1, 0, 1}));\n\n        l.bindBuffers(gl);\n\n        gl.glMatrixMode(GL2.GL_MODELVIEW);\n        gl.glLoadIdentity();\n        gl.glMultMatrixf(FloatBuffer.wrap(modelViewMatrix.getMatrix()));\n\n        gl.glDrawElements(GL2.GL_TRIANGLES, indices.length, GL2.GL_UNSIGNED_INT, Buffers.newDirectIntBuffer(indices));\n\n        errorCode = gl.glGetError();\n        if(errorCode != GL2.GL_NO_ERROR) {\n            String errorString = new GLU().gluErrorString(errorCode);\n            System.err.println(&quot;OpenGL error: 1 &quot; + errorString);\n        }\n\n        l.disable(gl);\n        l.unbindBuffers(gl);\n        gl.glUseProgram(0);\n\n        angle += 0.5f;\n    }\n</code></pre>\n<p>Vertex shader:</p>\n<pre><code>#version 330 core\n\nlayout(location = 0) in vec3 inPosition;\nlayout(location = 1) in vec3 inNormal;\nlayout(location = 2) in vec3 inColor;\n\nout vec3 fragColor;\nout vec3 fragNormal;\nout vec3 lightVec;\n\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform vec3 lightPosition;\n\nvoid main() {\n    vec4 worldPos = modelViewMatrix * vec4(inPosition, 1.0);\n    gl_Position = projectionMatrix * worldPos;\n\n    fragNormal = (modelViewMatrix * vec4(inNormal, 0.0)).xyz;\n    lightVec = lightPosition;\n\n    fragColor = inColor;\n}\n</code></pre>\n<p>Fragment shader:</p>\n<pre><code>#version 330 core\n\nin vec3 fragColor;\nin vec3 fragNormal;\nin vec3 lightVec;\n\nout vec4 outColor;\n\nuniform vec3 lightColor;\nuniform float shininess;\n\nvoid main() {\n    vec3 norm = normalize(fragNormal);\n    vec3 lightDir = normalize(lightVec);\n\n    float ndot = max(dot(norm, lightDir), 0.0);\n    vec3 diffuse = lightColor * fragColor * ndot;\n\n    outColor = vec4(diffuse, 1.0);\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/4ZObU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4ZObU.png\" alt=\"The result i get:\" /></a></p>\n"},{"tags":["java","macos","maven"],"comments":[{"owner":{"account_id":3015716,"reputation":758,"user_id":2557955,"accept_rate":100,"display_name":"dev-cyprium"},"score":0,"creation_date":1624399376,"post_id":68091021,"comment_id":120347645,"body_markdown":"Hello, welcome to the community. Unfortunately, we can&#39;t help you with the current state of your question, as we can&#39;t reproduce. Please check https://stackoverflow.com/help/minimal-reproducible-example to help us help you.","body":"Hello, welcome to the community. Unfortunately, we can&#39;t help you with the current state of your question, as we can&#39;t reproduce. Please check <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">stackoverflow.com/help/minimal-reproducible-example</a> to help us help you."}],"answers":[{"comments":[{"owner":{"account_id":22022771,"reputation":61,"user_id":16291317,"display_name":"BiuBiuBiu"},"score":0,"creation_date":1626196309,"post_id":68242150,"comment_id":120826839,"body_markdown":"Thank you very much! I actually did this and maven build again, and it&#39;s working fine now!","body":"Thank you very much! I actually did this and maven build again, and it&#39;s working fine now!"}],"tags":[],"owner":{"account_id":22122434,"reputation":71,"user_id":16375408,"display_name":"Keerthanaa"},"comment_count":1,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1625378603,"creation_date":1625378603,"answer_id":68242150,"question_id":68091021,"body_markdown":"You can delete the downloaded packages inside repository in your /.m2/repository/** folder where your maven dependency downloads(Take a backup for safer side). \r\n\r\nIn your IDE(sts or eclipse), try to do maven build(clean install).\r\n\r\nHope your issue resolved. ","title":"org.apache.maven.InternalErrorException: Internal error: java.lang.IllegalArgumentException: Malformed \\uxxxx encoding for MAC","body":"<p>You can delete the downloaded packages inside repository in your /.m2/repository/** folder where your maven dependency downloads(Take a backup for safer side).</p>\n<p>In your IDE(sts or eclipse), try to do maven build(clean install).</p>\n<p>Hope your issue resolved.</p>\n"},{"tags":[],"owner":{"account_id":25000009,"reputation":11,"user_id":18860492,"display_name":"Lorenzo Puglioli"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667136211,"creation_date":1666772355,"answer_id":74204644,"question_id":68091021,"body_markdown":"Instead of deleting my entire local maven repository, I tried to add a &quot;Java exception breakpoint&quot; for the `IllegalArgumentException` exception in my eclipse IDE. \r\n\r\nSo I launched the maven launch configuration in debug mode, and the IDE stopped when the exception was launched. I navigated the stack watching at local variables and arguments, and I quickly found the corrupted file. \r\n\r\nIn my case was `resolver-status.properties` in `wagon-webdav` library, inside the maven repository. I deleted the folder and the problem has gone.","title":"org.apache.maven.InternalErrorException: Internal error: java.lang.IllegalArgumentException: Malformed \\uxxxx encoding for MAC","body":"<p>Instead of deleting my entire local maven repository, I tried to add a &quot;Java exception breakpoint&quot; for the <code>IllegalArgumentException</code> exception in my eclipse IDE.</p>\n<p>So I launched the maven launch configuration in debug mode, and the IDE stopped when the exception was launched. I navigated the stack watching at local variables and arguments, and I quickly found the corrupted file.</p>\n<p>In my case was <code>resolver-status.properties</code> in <code>wagon-webdav</code> library, inside the maven repository. I deleted the folder and the problem has gone.</p>\n"},{"tags":[],"owner":{"account_id":1164178,"reputation":1598,"user_id":1143126,"accept_rate":80,"display_name":"RobertG"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693592386,"creation_date":1693592386,"answer_id":77025295,"question_id":68091021,"body_markdown":"I had a similar issue.\r\n\r\nSomeone on SO suggested to check for &#39;\\u0000&#39; occurrences using command-line grep, but I needed to check for &#39;\\u000&#39; until I found the &quot;perpetrator&quot; file. \r\n\r\n    $ grep -rnw ~/.m2 -e &#39;\\u000&#39;\r\n    grep: /home/myusername/.m2/repository/net/sourceforge/saxon/saxon/9.1.0.8/saxon-9.1.0.8.jar: binary file matches\r\n    grep: /home/myusername/.m2/repository/com/nimbusds/lang-tag/resolver-status.properties: binary file matches\r\n\r\nI deleted this folder with the second search hit, `/home/myusername/.m2/repository/com/nimbusds`, now it works again.\r\n\r\n(Weird, I thought there was an answer like this here that I just wanted to update. But not finding it, I wrote this new one.)\r\n","title":"org.apache.maven.InternalErrorException: Internal error: java.lang.IllegalArgumentException: Malformed \\uxxxx encoding for MAC","body":"<p>I had a similar issue.</p>\n<p>Someone on SO suggested to check for '\\u0000' occurrences using command-line grep, but I needed to check for '\\u000' until I found the &quot;perpetrator&quot; file.</p>\n<pre><code>$ grep -rnw ~/.m2 -e '\\u000'\ngrep: /home/myusername/.m2/repository/net/sourceforge/saxon/saxon/9.1.0.8/saxon-9.1.0.8.jar: binary file matches\ngrep: /home/myusername/.m2/repository/com/nimbusds/lang-tag/resolver-status.properties: binary file matches\n</code></pre>\n<p>I deleted this folder with the second search hit, <code>/home/myusername/.m2/repository/com/nimbusds</code>, now it works again.</p>\n<p>(Weird, I thought there was an answer like this here that I just wanted to update. But not finding it, I wrote this new one.)</p>\n"}],"owner":{"account_id":22022771,"reputation":61,"user_id":16291317,"display_name":"BiuBiuBiu"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6875,"favorite_count":0,"down_vote_count":1,"up_vote_count":6,"answer_count":3,"score":5,"last_activity_date":1693592386,"creation_date":1624398129,"question_id":68091021,"body_markdown":"I&#39;m running on MAC and I was running mvn install on my Java project and I got this error. I checked online for a whole day but most answers are about the / and \\, however I have no local changes and my team could build the repo fine, and I could build successfully before. Also I saw someone has faced the same issue but after they fixed the JAVA version it worked fine for them.https://stackoverflow.com/questions/68003423/java-lang-illegalargumentexception-malformed-uxxxx-encoding-while-mvn-install?newreg=96abc52a5b8e46d9a72155ef37f33c81. I have tried all the methods and they are not working:\r\nI have tried reinstalling JAVA, MAVEN, also updating JAVA/MAVEN version. I recall I faced similar issue before and when I switch JAVA/MAVEN to older version it worked fine, but this time it does not work anymore. Could anyone help with it? I really appreciate it.\r\nI tried with MAVEN 3.8, MAVEN 3.5, MAVEN 3.3 and they are all having this issue. I was using JAVA11 and having some issues then I switched to JAVA8 and uninstalled JAVA11.\r\n\r\nHere is the full stack trace:\r\n```\r\nApache Maven 3.3.9 (bb52d8502b132ec0a5a3f4c09453c07478323dc5; 2015-11-10T11:41:47-05:00)\r\nMaven home: /usr/local/Cellar/maven@3.3/3.3.9_1/libexec\r\nJava version: 1.8.0_292, vendor: AdoptOpenJDK\r\nJava home: /Library/Java/JavaVirtualMachines/adoptopenjdk-8.jdk/Contents/Home/jre\r\nDefault locale: en_CA, platform encoding: UTF-8\r\nOS name: &quot;mac os x&quot;, version: &quot;10.16&quot;, arch: &quot;x86_64&quot;, family: &quot;mac&quot;\r\n[DEBUG] Created new class realm maven.api\r\n[DEBUG] Importing foreign packages into class realm maven.api\r\n[DEBUG]   Imported: javax.enterprise.inject.* &lt; plexus.core\r\n[DEBUG]   Imported: javax.enterprise.util.* &lt; plexus.core\r\n[DEBUG]   Imported: javax.inject.* &lt; plexus.core\r\n[DEBUG]   Imported: org.apache.maven.* &lt; plexus.core\r\n[DEBUG]   Imported: org.apache.maven.artifact &lt; plexus.core\r\n[DEBUG]   Imported: org.apache.maven.classrealm &lt; plexus.core\r\n[DEBUG]   Imported: org.apache.maven.cli &lt; plexus.core\r\n[DEBUG]   Imported: org.apache.maven.configuration &lt; plexus.core\r\n[DEBUG]   Imported: org.apache.maven.exception &lt; plexus.core\r\n[DEBUG]   Imported: org.apache.maven.execution &lt; plexus.core\r\n[DEBUG]   Imported: org.apache.maven.execution.scope &lt; plexus.core\r\n[DEBUG]   Imported: org.apache.maven.lifecycle &lt; plexus.core\r\n[DEBUG]   Imported: org.apache.maven.model &lt; plexus.core\r\n[DEBUG]   Imported: org.apache.maven.monitor &lt; plexus.core\r\n[DEBUG]   Imported: org.apache.maven.plugin &lt; plexus.core\r\n[DEBUG]   Imported: org.apache.maven.profiles &lt; plexus.core\r\n[DEBUG]   Imported: org.apache.maven.project &lt; plexus.core\r\n[DEBUG]   Imported: org.apache.maven.reporting &lt; plexus.core\r\n[DEBUG]   Imported: org.apache.maven.repository &lt; plexus.core\r\n[DEBUG]   Imported: org.apache.maven.rtinfo &lt; plexus.core\r\n[DEBUG]   Imported: org.apache.maven.settings &lt; plexus.core\r\n[DEBUG]   Imported: org.apache.maven.toolchain &lt; plexus.core\r\n[DEBUG]   Imported: org.apache.maven.usability &lt; plexus.core\r\n[DEBUG]   Imported: org.apache.maven.wagon.* &lt; plexus.core\r\n[DEBUG]   Imported: org.apache.maven.wagon.authentication &lt; plexus.core\r\n[DEBUG]   Imported: org.apache.maven.wagon.authorization &lt; plexus.core\r\n[DEBUG]   Imported: org.apache.maven.wagon.events &lt; plexus.core\r\n[DEBUG]   Imported: org.apache.maven.wagon.observers &lt; plexus.core\r\n[DEBUG]   Imported: org.apache.maven.wagon.proxy &lt; plexus.core\r\n[DEBUG]   Imported: org.apache.maven.wagon.repository &lt; plexus.core\r\n[DEBUG]   Imported: org.apache.maven.wagon.resource &lt; plexus.core\r\n[DEBUG]   Imported: org.codehaus.classworlds &lt; plexus.core\r\n[DEBUG]   Imported: org.codehaus.plexus.* &lt; plexus.core\r\n[DEBUG]   Imported: org.codehaus.plexus.classworlds &lt; plexus.core\r\n[DEBUG]   Imported: org.codehaus.plexus.component &lt; plexus.core\r\n[DEBUG]   Imported: org.codehaus.plexus.configuration &lt; plexus.core\r\n[DEBUG]   Imported: org.codehaus.plexus.container &lt; plexus.core\r\n[DEBUG]   Imported: org.codehaus.plexus.context &lt; plexus.core\r\n[DEBUG]   Imported: org.codehaus.plexus.lifecycle &lt; plexus.core\r\n[DEBUG]   Imported: org.codehaus.plexus.logging &lt; plexus.core\r\n[DEBUG]   Imported: org.codehaus.plexus.personality &lt; plexus.core\r\n[DEBUG]   Imported: org.codehaus.plexus.util.xml.Xpp3Dom &lt; plexus.core\r\n[DEBUG]   Imported: org.codehaus.plexus.util.xml.pull.XmlPullParser &lt; plexus.core\r\n[DEBUG]   Imported: org.codehaus.plexus.util.xml.pull.XmlPullParserException &lt; plexus.core\r\n[DEBUG]   Imported: org.codehaus.plexus.util.xml.pull.XmlSerializer &lt; plexus.core\r\n[DEBUG]   Imported: org.eclipse.aether.* &lt; plexus.core\r\n[DEBUG]   Imported: org.eclipse.aether.artifact &lt; plexus.core\r\n[DEBUG]   Imported: org.eclipse.aether.collection &lt; plexus.core\r\n[DEBUG]   Imported: org.eclipse.aether.deployment &lt; plexus.core\r\n[DEBUG]   Imported: org.eclipse.aether.graph &lt; plexus.core\r\n[DEBUG]   Imported: org.eclipse.aether.impl &lt; plexus.core\r\n[DEBUG]   Imported: org.eclipse.aether.installation &lt; plexus.core\r\n[DEBUG]   Imported: org.eclipse.aether.internal.impl &lt; plexus.core\r\n[DEBUG]   Imported: org.eclipse.aether.metadata &lt; plexus.core\r\n[DEBUG]   Imported: org.eclipse.aether.repository &lt; plexus.core\r\n[DEBUG]   Imported: org.eclipse.aether.resolution &lt; plexus.core\r\n[DEBUG]   Imported: org.eclipse.aether.spi &lt; plexus.core\r\n[DEBUG]   Imported: org.eclipse.aether.transfer &lt; plexus.core\r\n[DEBUG]   Imported: org.eclipse.aether.version &lt; plexus.core\r\n[DEBUG]   Imported: org.slf4j.* &lt; plexus.core\r\n[DEBUG]   Imported: org.slf4j.helpers.* &lt; plexus.core\r\n[DEBUG]   Imported: org.slf4j.spi.* &lt; plexus.core\r\n[DEBUG] Populating class realm maven.api\r\n[INFO] Error stacktraces are turned on.\r\n[DEBUG] Reading global settings from /usr/local/Cellar/maven@3.3/3.3.9_1/libexec/conf/settings.xml\r\n[DEBUG] Reading global toolchains from /usr/local/Cellar/maven@3.3/3.3.9_1/libexec/conf/toolchains.xml\r\n[DEBUG] Using manager EnhancedLocalRepositoryManager with priority 10.0 for /Users/bill.chen/.m2/repository\r\n[INFO] Scanning for projects...\r\n[DEBUG] Could not find metadata com.karauctionservices.itss.scm:parent:1.0-SNAPSHOT/maven-metadata.xml in local \r\n[ERROR] Internal error: java.lang.IllegalArgumentException: Malformed \\uxxxx encoding. -&gt; [Help 1]\r\norg.apache.maven.InternalErrorException: Internal error: java.lang.IllegalArgumentException: Malformed \\uxxxx encoding.\r\n\tat org.apache.maven.DefaultMaven.execute(DefaultMaven.java:121)\r\n\tat org.apache.maven.cli.MavenCli.execute(MavenCli.java:863)\r\n\tat org.apache.maven.cli.MavenCli.doMain(MavenCli.java:288)\r\n\tat org.apache.maven.cli.MavenCli.main(MavenCli.java:199)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:289)\r\n\tat org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:229)\r\n\tat org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:415)\r\n\tat org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:356)\r\nCaused by: java.lang.IllegalArgumentException: Malformed \\uxxxx encoding.\r\n\tat java.util.Properties.loadConvert(Properties.java:574)\r\n\tat java.util.Properties.load0(Properties.java:391)\r\n\tat java.util.Properties.load(Properties.java:341)\r\n\tat org.eclipse.aether.internal.impl.TrackingFileManager.read(TrackingFileManager.java:61)\r\n\tat org.eclipse.aether.internal.impl.DefaultUpdateCheckManager.read(DefaultUpdateCheckManager.java:538)\r\n\tat org.eclipse.aether.internal.impl.DefaultUpdateCheckManager.checkMetadata(DefaultUpdateCheckManager.java:272)\r\n\tat org.eclipse.aether.internal.impl.DefaultMetadataResolver.resolve(DefaultMetadataResolver.java:332)\r\n\tat org.eclipse.aether.internal.impl.DefaultMetadataResolver.resolveMetadata(DefaultMetadataResolver.java:205)\r\n\tat org.apache.maven.repository.internal.DefaultVersionResolver.resolveVersion(DefaultVersionResolver.java:237)\r\n\tat org.eclipse.aether.internal.impl.DefaultArtifactResolver.resolve(DefaultArtifactResolver.java:302)\r\n\tat org.eclipse.aether.internal.impl.DefaultArtifactResolver.resolveArtifacts(DefaultArtifactResolver.java:246)\r\n\tat org.eclipse.aether.internal.impl.DefaultArtifactResolver.resolveArtifact(DefaultArtifactResolver.java:223)\r\n\tat org.eclipse.aether.internal.impl.DefaultRepositorySystem.resolveArtifact(DefaultRepositorySystem.java:294)\r\n\tat org.apache.maven.project.ProjectModelResolver.resolveModel(ProjectModelResolver.java:193)\r\n\tat org.apache.maven.project.ProjectModelResolver.resolveModel(ProjectModelResolver.java:246)\r\n\tat org.apache.maven.model.building.DefaultModelBuilder.readParentExternally(DefaultModelBuilder.java:1000)\r\n\tat org.apache.maven.model.building.DefaultModelBuilder.readParent(DefaultModelBuilder.java:800)\r\n\tat org.apache.maven.model.building.DefaultModelBuilder.build(DefaultModelBuilder.java:329)\r\n\tat org.apache.maven.project.DefaultProjectBuilder.build(DefaultProjectBuilder.java:469)\r\n\tat org.apache.maven.project.DefaultProjectBuilder.build(DefaultProjectBuilder.java:438)\r\n\tat org.apache.maven.project.DefaultProjectBuilder.build(DefaultProjectBuilder.java:401)\r\n\tat org.apache.maven.graph.DefaultGraphBuilder.collectProjects(DefaultGraphBuilder.java:419)\r\n\tat org.apache.maven.graph.DefaultGraphBuilder.getProjectsForMavenReactor(DefaultGraphBuilder.java:410)\r\n\tat org.apache.maven.graph.DefaultGraphBuilder.build(DefaultGraphBuilder.java:83)\r\n\tat org.apache.maven.DefaultMaven.buildGraph(DefaultMaven.java:491)\r\n\tat org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:219)\r\n\tat org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:193)\r\n\tat org.apache.maven.DefaultMaven.execute(DefaultMaven.java:106)\r\n\t... 11 more\r\n[ERROR] \r\n[ERROR] \r\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\r\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/InternalErrorException\r\n```","title":"org.apache.maven.InternalErrorException: Internal error: java.lang.IllegalArgumentException: Malformed \\uxxxx encoding for MAC","body":"<p>I'm running on MAC and I was running mvn install on my Java project and I got this error. I checked online for a whole day but most answers are about the / and , however I have no local changes and my team could build the repo fine, and I could build successfully before. Also I saw someone has faced the same issue but after they fixed the JAVA version it worked fine for them.https://stackoverflow.com/questions/68003423/java-lang-illegalargumentexception-malformed-uxxxx-encoding-while-mvn-install?newreg=96abc52a5b8e46d9a72155ef37f33c81. I have tried all the methods and they are not working:\nI have tried reinstalling JAVA, MAVEN, also updating JAVA/MAVEN version. I recall I faced similar issue before and when I switch JAVA/MAVEN to older version it worked fine, but this time it does not work anymore. Could anyone help with it? I really appreciate it.\nI tried with MAVEN 3.8, MAVEN 3.5, MAVEN 3.3 and they are all having this issue. I was using JAVA11 and having some issues then I switched to JAVA8 and uninstalled JAVA11.</p>\n<p>Here is the full stack trace:</p>\n<pre><code>Apache Maven 3.3.9 (bb52d8502b132ec0a5a3f4c09453c07478323dc5; 2015-11-10T11:41:47-05:00)\nMaven home: /usr/local/Cellar/maven@3.3/3.3.9_1/libexec\nJava version: 1.8.0_292, vendor: AdoptOpenJDK\nJava home: /Library/Java/JavaVirtualMachines/adoptopenjdk-8.jdk/Contents/Home/jre\nDefault locale: en_CA, platform encoding: UTF-8\nOS name: &quot;mac os x&quot;, version: &quot;10.16&quot;, arch: &quot;x86_64&quot;, family: &quot;mac&quot;\n[DEBUG] Created new class realm maven.api\n[DEBUG] Importing foreign packages into class realm maven.api\n[DEBUG]   Imported: javax.enterprise.inject.* &lt; plexus.core\n[DEBUG]   Imported: javax.enterprise.util.* &lt; plexus.core\n[DEBUG]   Imported: javax.inject.* &lt; plexus.core\n[DEBUG]   Imported: org.apache.maven.* &lt; plexus.core\n[DEBUG]   Imported: org.apache.maven.artifact &lt; plexus.core\n[DEBUG]   Imported: org.apache.maven.classrealm &lt; plexus.core\n[DEBUG]   Imported: org.apache.maven.cli &lt; plexus.core\n[DEBUG]   Imported: org.apache.maven.configuration &lt; plexus.core\n[DEBUG]   Imported: org.apache.maven.exception &lt; plexus.core\n[DEBUG]   Imported: org.apache.maven.execution &lt; plexus.core\n[DEBUG]   Imported: org.apache.maven.execution.scope &lt; plexus.core\n[DEBUG]   Imported: org.apache.maven.lifecycle &lt; plexus.core\n[DEBUG]   Imported: org.apache.maven.model &lt; plexus.core\n[DEBUG]   Imported: org.apache.maven.monitor &lt; plexus.core\n[DEBUG]   Imported: org.apache.maven.plugin &lt; plexus.core\n[DEBUG]   Imported: org.apache.maven.profiles &lt; plexus.core\n[DEBUG]   Imported: org.apache.maven.project &lt; plexus.core\n[DEBUG]   Imported: org.apache.maven.reporting &lt; plexus.core\n[DEBUG]   Imported: org.apache.maven.repository &lt; plexus.core\n[DEBUG]   Imported: org.apache.maven.rtinfo &lt; plexus.core\n[DEBUG]   Imported: org.apache.maven.settings &lt; plexus.core\n[DEBUG]   Imported: org.apache.maven.toolchain &lt; plexus.core\n[DEBUG]   Imported: org.apache.maven.usability &lt; plexus.core\n[DEBUG]   Imported: org.apache.maven.wagon.* &lt; plexus.core\n[DEBUG]   Imported: org.apache.maven.wagon.authentication &lt; plexus.core\n[DEBUG]   Imported: org.apache.maven.wagon.authorization &lt; plexus.core\n[DEBUG]   Imported: org.apache.maven.wagon.events &lt; plexus.core\n[DEBUG]   Imported: org.apache.maven.wagon.observers &lt; plexus.core\n[DEBUG]   Imported: org.apache.maven.wagon.proxy &lt; plexus.core\n[DEBUG]   Imported: org.apache.maven.wagon.repository &lt; plexus.core\n[DEBUG]   Imported: org.apache.maven.wagon.resource &lt; plexus.core\n[DEBUG]   Imported: org.codehaus.classworlds &lt; plexus.core\n[DEBUG]   Imported: org.codehaus.plexus.* &lt; plexus.core\n[DEBUG]   Imported: org.codehaus.plexus.classworlds &lt; plexus.core\n[DEBUG]   Imported: org.codehaus.plexus.component &lt; plexus.core\n[DEBUG]   Imported: org.codehaus.plexus.configuration &lt; plexus.core\n[DEBUG]   Imported: org.codehaus.plexus.container &lt; plexus.core\n[DEBUG]   Imported: org.codehaus.plexus.context &lt; plexus.core\n[DEBUG]   Imported: org.codehaus.plexus.lifecycle &lt; plexus.core\n[DEBUG]   Imported: org.codehaus.plexus.logging &lt; plexus.core\n[DEBUG]   Imported: org.codehaus.plexus.personality &lt; plexus.core\n[DEBUG]   Imported: org.codehaus.plexus.util.xml.Xpp3Dom &lt; plexus.core\n[DEBUG]   Imported: org.codehaus.plexus.util.xml.pull.XmlPullParser &lt; plexus.core\n[DEBUG]   Imported: org.codehaus.plexus.util.xml.pull.XmlPullParserException &lt; plexus.core\n[DEBUG]   Imported: org.codehaus.plexus.util.xml.pull.XmlSerializer &lt; plexus.core\n[DEBUG]   Imported: org.eclipse.aether.* &lt; plexus.core\n[DEBUG]   Imported: org.eclipse.aether.artifact &lt; plexus.core\n[DEBUG]   Imported: org.eclipse.aether.collection &lt; plexus.core\n[DEBUG]   Imported: org.eclipse.aether.deployment &lt; plexus.core\n[DEBUG]   Imported: org.eclipse.aether.graph &lt; plexus.core\n[DEBUG]   Imported: org.eclipse.aether.impl &lt; plexus.core\n[DEBUG]   Imported: org.eclipse.aether.installation &lt; plexus.core\n[DEBUG]   Imported: org.eclipse.aether.internal.impl &lt; plexus.core\n[DEBUG]   Imported: org.eclipse.aether.metadata &lt; plexus.core\n[DEBUG]   Imported: org.eclipse.aether.repository &lt; plexus.core\n[DEBUG]   Imported: org.eclipse.aether.resolution &lt; plexus.core\n[DEBUG]   Imported: org.eclipse.aether.spi &lt; plexus.core\n[DEBUG]   Imported: org.eclipse.aether.transfer &lt; plexus.core\n[DEBUG]   Imported: org.eclipse.aether.version &lt; plexus.core\n[DEBUG]   Imported: org.slf4j.* &lt; plexus.core\n[DEBUG]   Imported: org.slf4j.helpers.* &lt; plexus.core\n[DEBUG]   Imported: org.slf4j.spi.* &lt; plexus.core\n[DEBUG] Populating class realm maven.api\n[INFO] Error stacktraces are turned on.\n[DEBUG] Reading global settings from /usr/local/Cellar/maven@3.3/3.3.9_1/libexec/conf/settings.xml\n[DEBUG] Reading global toolchains from /usr/local/Cellar/maven@3.3/3.3.9_1/libexec/conf/toolchains.xml\n[DEBUG] Using manager EnhancedLocalRepositoryManager with priority 10.0 for /Users/bill.chen/.m2/repository\n[INFO] Scanning for projects...\n[DEBUG] Could not find metadata com.karauctionservices.itss.scm:parent:1.0-SNAPSHOT/maven-metadata.xml in local \n[ERROR] Internal error: java.lang.IllegalArgumentException: Malformed \\uxxxx encoding. -&gt; [Help 1]\norg.apache.maven.InternalErrorException: Internal error: java.lang.IllegalArgumentException: Malformed \\uxxxx encoding.\n    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:121)\n    at org.apache.maven.cli.MavenCli.execute(MavenCli.java:863)\n    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:288)\n    at org.apache.maven.cli.MavenCli.main(MavenCli.java:199)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:289)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:229)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:415)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:356)\nCaused by: java.lang.IllegalArgumentException: Malformed \\uxxxx encoding.\n    at java.util.Properties.loadConvert(Properties.java:574)\n    at java.util.Properties.load0(Properties.java:391)\n    at java.util.Properties.load(Properties.java:341)\n    at org.eclipse.aether.internal.impl.TrackingFileManager.read(TrackingFileManager.java:61)\n    at org.eclipse.aether.internal.impl.DefaultUpdateCheckManager.read(DefaultUpdateCheckManager.java:538)\n    at org.eclipse.aether.internal.impl.DefaultUpdateCheckManager.checkMetadata(DefaultUpdateCheckManager.java:272)\n    at org.eclipse.aether.internal.impl.DefaultMetadataResolver.resolve(DefaultMetadataResolver.java:332)\n    at org.eclipse.aether.internal.impl.DefaultMetadataResolver.resolveMetadata(DefaultMetadataResolver.java:205)\n    at org.apache.maven.repository.internal.DefaultVersionResolver.resolveVersion(DefaultVersionResolver.java:237)\n    at org.eclipse.aether.internal.impl.DefaultArtifactResolver.resolve(DefaultArtifactResolver.java:302)\n    at org.eclipse.aether.internal.impl.DefaultArtifactResolver.resolveArtifacts(DefaultArtifactResolver.java:246)\n    at org.eclipse.aether.internal.impl.DefaultArtifactResolver.resolveArtifact(DefaultArtifactResolver.java:223)\n    at org.eclipse.aether.internal.impl.DefaultRepositorySystem.resolveArtifact(DefaultRepositorySystem.java:294)\n    at org.apache.maven.project.ProjectModelResolver.resolveModel(ProjectModelResolver.java:193)\n    at org.apache.maven.project.ProjectModelResolver.resolveModel(ProjectModelResolver.java:246)\n    at org.apache.maven.model.building.DefaultModelBuilder.readParentExternally(DefaultModelBuilder.java:1000)\n    at org.apache.maven.model.building.DefaultModelBuilder.readParent(DefaultModelBuilder.java:800)\n    at org.apache.maven.model.building.DefaultModelBuilder.build(DefaultModelBuilder.java:329)\n    at org.apache.maven.project.DefaultProjectBuilder.build(DefaultProjectBuilder.java:469)\n    at org.apache.maven.project.DefaultProjectBuilder.build(DefaultProjectBuilder.java:438)\n    at org.apache.maven.project.DefaultProjectBuilder.build(DefaultProjectBuilder.java:401)\n    at org.apache.maven.graph.DefaultGraphBuilder.collectProjects(DefaultGraphBuilder.java:419)\n    at org.apache.maven.graph.DefaultGraphBuilder.getProjectsForMavenReactor(DefaultGraphBuilder.java:410)\n    at org.apache.maven.graph.DefaultGraphBuilder.build(DefaultGraphBuilder.java:83)\n    at org.apache.maven.DefaultMaven.buildGraph(DefaultMaven.java:491)\n    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:219)\n    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:193)\n    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:106)\n    ... 11 more\n[ERROR] \n[ERROR] \n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/InternalErrorException\n</code></pre>\n"},{"tags":["java","thymeleaf"],"answers":[{"tags":[],"owner":{"account_id":1229539,"reputation":82701,"user_id":1194415,"accept_rate":76,"display_name":"membersound"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1560335449,"creation_date":1560335449,"answer_id":56560022,"question_id":56559579,"body_markdown":"It&#39;s simple as passing the fragment as id, and nest it below the `th:insert` tag from calling template:\r\n\r\n    &lt;div th:insert=&quot;~{tableview::tableview(~{:: #tbodyFragment})}&quot;&gt;\r\n       &lt;tbody id=&quot;tbodyFragment&quot;&gt;\r\n               ...content here...\r\n       &lt;/tbody&gt;\r\n    &lt;/div&gt;","title":"How to pass a thymeleaf fragment as paramter to another fragment?","body":"<p>It's simple as passing the fragment as id, and nest it below the <code>th:insert</code> tag from calling template:</p>\n\n<pre><code>&lt;div th:insert=\"~{tableview::tableview(~{:: #tbodyFragment})}\"&gt;\n   &lt;tbody id=\"tbodyFragment\"&gt;\n           ...content here...\n   &lt;/tbody&gt;\n&lt;/div&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14141125,"reputation":171,"user_id":10215887,"display_name":"Julia Hin&#223;en IT.NRW"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1693591831,"creation_date":1693591831,"answer_id":77025250,"question_id":56559579,"body_markdown":"See also:\r\n[Thymeleaf Documentation][1],\r\nchapter &quot;8.3 Flexible layouts: beyond mere fragment insertion&quot;.\r\n\r\nYou can hand over fragments as parameters to another fragment. More than shown in the examples of the Thymeleaf Documentation, you can also hand over fragments which have parameters themselves:\r\n\r\nDefining the main fragment:\r\n\r\n    &lt;div th:fragment = &quot;main_fragment (fragment_parameter, text_parameter)&quot;\r\n         th:remove = &quot;tag&quot;&gt;\r\n        some content here ...\r\n        &lt;!-- the handed over fragment is being embedded here: --&gt;\r\n        &lt;div th:replace=&quot;${fragment_parameter}&quot;&gt;\r\n        some more content ...\r\n    &lt;/div&gt;\r\n\r\nDefining the inner fragment:\r\n\r\n    &lt;div th:fragment = &quot;_inner_fragmentname(parameter1, parameter2)&quot;&gt;\r\n        here the inner_fragmentname content depending on the parameters ...\r\n    &lt;/div\r\n\r\nUsing the main fragment:\r\n\r\n    &lt;div th:replace=&quot;{one_filepath/one_filename :: main_fragment(\r\n                      fragment_parameter = ~{filepath/filename :: _inner_fragmentname(\r\n                                                  paramter1 = &#39;blablabla&#39;,\r\n                                                  parameter2= true)},\r\n                      text_parameter = &#39;blublublu&#39;}&quot;&gt;\r\n    &lt;/div&gt;\r\n\r\n\r\n  [1]: https://www.thymeleaf.org/doc/tutorials/3.1/usingthymeleaf.html#fragment-local-variables-without-fragment-arguments\r\n","title":"How to pass a thymeleaf fragment as paramter to another fragment?","body":"<p>See also:\n<a href=\"https://www.thymeleaf.org/doc/tutorials/3.1/usingthymeleaf.html#fragment-local-variables-without-fragment-arguments\" rel=\"nofollow noreferrer\">Thymeleaf Documentation</a>,\nchapter &quot;8.3 Flexible layouts: beyond mere fragment insertion&quot;.</p>\n<p>You can hand over fragments as parameters to another fragment. More than shown in the examples of the Thymeleaf Documentation, you can also hand over fragments which have parameters themselves:</p>\n<p>Defining the main fragment:</p>\n<pre><code>&lt;div th:fragment = &quot;main_fragment (fragment_parameter, text_parameter)&quot;\n     th:remove = &quot;tag&quot;&gt;\n    some content here ...\n    &lt;!-- the handed over fragment is being embedded here: --&gt;\n    &lt;div th:replace=&quot;${fragment_parameter}&quot;&gt;\n    some more content ...\n&lt;/div&gt;\n</code></pre>\n<p>Defining the inner fragment:</p>\n<pre><code>&lt;div th:fragment = &quot;_inner_fragmentname(parameter1, parameter2)&quot;&gt;\n    here the inner_fragmentname content depending on the parameters ...\n&lt;/div\n</code></pre>\n<p>Using the main fragment:</p>\n<pre><code>&lt;div th:replace=&quot;{one_filepath/one_filename :: main_fragment(\n                  fragment_parameter = ~{filepath/filename :: _inner_fragmentname(\n                                              paramter1 = 'blablabla',\n                                              parameter2= true)},\n                  text_parameter = 'blublublu'}&quot;&gt;\n&lt;/div&gt;\n</code></pre>\n"}],"owner":{"account_id":1229539,"reputation":82701,"user_id":1194415,"accept_rate":76,"display_name":"membersound"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":289,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":56560022,"answer_count":2,"score":0,"last_activity_date":1693591831,"creation_date":1560334028,"question_id":56559579,"body_markdown":"Is it possible to pass a tag/fragment to another template in `thymeleaf`?\r\n\r\nExample: I want to create a basic `tableview` layout, and the callers template should only provide the `&lt;tbody&gt;` content that then should get injected into the tableview template layout.\r\n\r\nThis could be the table layout:\r\n\r\n    &lt;div th:fragment=&quot;tableview (tbodyFragment)&quot;&gt;\r\n    \t&lt;table class=...&gt;\r\n    \t\t&lt;thead&gt;...&lt;/thead&gt;\r\n    \r\n    \t\t&lt;!-- the table body should be repaced --&gt;\r\n    \t\t&lt;tbody th:replace=&quot;${tbodyFragment}&quot;/&gt;\r\n    \t&lt;/table&gt;\r\n    &lt;/div&gt;\r\n\r\nCalling template:\r\n\r\n    &lt;tbody id=&quot;tbodyFragment&quot;&gt;\r\n    \t&lt;th:block th:each=&quot;row : ${rows}&quot;&gt;\r\n    \t\t&lt;tr&gt;\r\n    \t\t\t&lt;td th:text=&quot;${row.id}&quot;/&gt;\r\n    \t\t\t&lt;td th:text=&quot;${row.firstname}&quot;/&gt;\r\n    \t\t\t&lt;td th:text=&quot;${row.lastname}&quot;/&gt;\r\n    \t\t\t&lt;td th:text=&quot;${row.age}&quot; style=&quot;text-align:right&quot;/&gt;\r\n    \t\t&lt;/tr&gt;\t\r\n    \t&lt;th:block&gt;\r\n    &lt;/tbody&gt;\r\n    \r\n    &lt;div th:insert=&quot;~{tableview::tableview(tbodyFragment)}&quot;/&gt;\r\n\r\nOf course the syntax above is invalid, but you get the idea. How could I achieve this?\r\n","title":"How to pass a thymeleaf fragment as paramter to another fragment?","body":"<p>Is it possible to pass a tag/fragment to another template in <code>thymeleaf</code>?</p>\n\n<p>Example: I want to create a basic <code>tableview</code> layout, and the callers template should only provide the <code>&lt;tbody&gt;</code> content that then should get injected into the tableview template layout.</p>\n\n<p>This could be the table layout:</p>\n\n<pre><code>&lt;div th:fragment=\"tableview (tbodyFragment)\"&gt;\n    &lt;table class=...&gt;\n        &lt;thead&gt;...&lt;/thead&gt;\n\n        &lt;!-- the table body should be repaced --&gt;\n        &lt;tbody th:replace=\"${tbodyFragment}\"/&gt;\n    &lt;/table&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Calling template:</p>\n\n<pre><code>&lt;tbody id=\"tbodyFragment\"&gt;\n    &lt;th:block th:each=\"row : ${rows}\"&gt;\n        &lt;tr&gt;\n            &lt;td th:text=\"${row.id}\"/&gt;\n            &lt;td th:text=\"${row.firstname}\"/&gt;\n            &lt;td th:text=\"${row.lastname}\"/&gt;\n            &lt;td th:text=\"${row.age}\" style=\"text-align:right\"/&gt;\n        &lt;/tr&gt;   \n    &lt;th:block&gt;\n&lt;/tbody&gt;\n\n&lt;div th:insert=\"~{tableview::tableview(tbodyFragment)}\"/&gt;\n</code></pre>\n\n<p>Of course the syntax above is invalid, but you get the idea. How could I achieve this?</p>\n"},{"tags":["java","deserialization","jackson-databind"],"answers":[{"tags":[],"owner":{"account_id":20867359,"reputation":101,"user_id":15328090,"display_name":"Igor"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693567347,"creation_date":1693567347,"answer_id":77022685,"question_id":77022398,"body_markdown":"You are right about the library not being able to deserialize object into String. You could solve the issue in the following ways:\r\n\r\n - If you expect an arbitrary object in `propertiesJson` property you\r\n   could make it of type `Map&lt;String, Object&gt;` in your\r\n   `ConfigurationProperties` class. \r\n   \r\n - If `propertiesJson` can be of any type(like number, string, array,\r\n   object) you could make it of type `Object`. In such case\r\n   `ObjectMapper` would deserialize the value into an object of the json\r\n   type&#39;s respective counterpart in Java.","title":"Cannot deserialize value of type `java.lang.String` from Object value (token `JsonToken.START_OBJECT`)","body":"<p>You are right about the library not being able to deserialize object into String. You could solve the issue in the following ways:</p>\n<ul>\n<li><p>If you expect an arbitrary object in <code>propertiesJson</code> property you\ncould make it of type <code>Map&lt;String, Object&gt;</code> in your\n<code>ConfigurationProperties</code> class.</p>\n</li>\n<li><p>If <code>propertiesJson</code> can be of any type(like number, string, array,\nobject) you could make it of type <code>Object</code>. In such case\n<code>ObjectMapper</code> would deserialize the value into an object of the json\ntype's respective counterpart in Java.</p>\n</li>\n</ul>\n"}],"owner":{"account_id":13651172,"reputation":804,"user_id":9849018,"display_name":"Shivanshu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":901,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1693591606,"creation_date":1693564583,"question_id":77022398,"body_markdown":"I have one class called `Configurations`\r\n\r\n    public class Configurations {\r\n    \r\n    private List&lt;Configuration&gt; configurations; \r\n    }\r\n\r\n    public class Configuration {\r\n        private String configurationClass;\r\n        private ConfigurationProperties configurationProperties;\r\n    }\r\n\r\n    public class ConfigurationProperties {\r\n        private String propertiesClass;\r\n        private String propertiesJson;\r\n    }\r\n\r\n    public class SchoolProperties {\r\n        @JsonProperty(&quot;serviceName&quot;)\r\n        String serviceName;\r\n    \r\n        @JsonProperty(&quot;operationName&quot;)\r\n        String operationName;\r\n    \r\n        @JsonProperty(&quot;latency&quot;)\r\n        Long latency;\r\n    \r\n        @JsonProperty(&quot;permittedTransactionsPerSecond&quot;)\r\n        int permittedTransactionsPerSecond;\r\n    \r\n        Class&lt;? extends Throwable&gt;[] possibleExceptions;\r\n    }\r\n\r\nthere is one more class called ConfigurationProperties like below :-\r\n\r\nNow i&#39;m passing a Json-Object like below:-\r\n\r\n\r\n      input =   &quot;{\r\n            &quot;configurations&quot;: [{\r\n                &quot;configurationClass&quot;: &quot;src.myProject.OperationHandler&quot;,\r\n                &quot;configurationProperties&quot;: {\r\n                    &quot;propertiesClass&quot;: &quot;src.myProjects.schoolProperties&quot;,\r\n                    &quot;propertiesJson&quot;: {\r\n                        &quot;serviceName&quot;: &quot;SchoolAdministerService&quot;,\r\n                        &quot;operationName&quot;: &quot;handleAdmission&quot;,\r\n                        &quot;latency&quot;: &quot;25&quot;,\r\n                        &quot;permittedTransactionsPerSecond&quot;: &quot;50&quot;,\r\n                        &quot;possibleExceptions&quot;: [&quot;java.io.IOException&quot;, &quot;java.net.SocketException&quot;, &quot;java.net.SocketTimeoutException&quot;]\r\n                    }\r\n                }\r\n            }]\r\n        }&quot;;\r\n\r\n      type = &quot;Configurations.class&quot;;\r\n\r\nWhen i&#39;m trying to deserialize it with below way, it&#39;s getting failed:- \r\n\r\n    ObjectMapper objectMapper = new ObjectMapper();\r\n    \r\n    objectMapper.readValue(input, type);\r\n\r\nAfter running this de-serialization logic, this is getting failed with below-error:- \r\n\r\n        Caused by: com.fasterxml.jackson.databind.exc.MismatchedInputException: Cannot deserialize value of type `java.lang.String` from Object value (token `JsonToken.START_OBJECT`)\r\n    at [Source: (String)&quot;{&quot;configurations&quot;:[{&quot;configurationClass&quot;:&quot;src.myProject.OperationHandler&quot;,&quot;configurationProperties&quot;:{&quot;propertiesClass&quot;:&quot;src.myProjects.schoolProperties&quot;,&quot;propertiesJson&quot;:{\r\n                    &quot;serviceName&quot;: &quot;SchoolAdministerService&quot;,\r\n                    &quot;operationName&quot;: &quot;handleAdmission&quot;,\r\n                    &quot;latency&quot;: &quot;25&quot;,\r\n                    &quot;permittedTransactionsPerSecond&quot;: &quot;50&quot;,\r\n                    &quot;possibleExceptions&quot;: [&quot;java.io.IOException&quot;, &quot;java.net.SocketException&quot;, &quot;java.net.SocketTimeoutException&quot;]\r\n                } (through reference chain: Configurations[&quot;configurations&quot;]-&gt;java.util.ArrayList[0]-&gt;Configuration[&quot;configurationProperties&quot;]-&gt;ConfigurationProperties[&quot;propertiesJson&quot;])\r\n\r\n\r\n\r\nI think the issue is because it&#39;s trying to capture propertiesJson as String, but this is not given as string, this is a object. Can someone help, how we should de-serialize it. \r\n\r\nThanks ! ","title":"Cannot deserialize value of type `java.lang.String` from Object value (token `JsonToken.START_OBJECT`)","body":"<p>I have one class called <code>Configurations</code></p>\n<pre><code>public class Configurations {\n\nprivate List&lt;Configuration&gt; configurations; \n}\n\npublic class Configuration {\n    private String configurationClass;\n    private ConfigurationProperties configurationProperties;\n}\n\npublic class ConfigurationProperties {\n    private String propertiesClass;\n    private String propertiesJson;\n}\n\npublic class SchoolProperties {\n    @JsonProperty(&quot;serviceName&quot;)\n    String serviceName;\n\n    @JsonProperty(&quot;operationName&quot;)\n    String operationName;\n\n    @JsonProperty(&quot;latency&quot;)\n    Long latency;\n\n    @JsonProperty(&quot;permittedTransactionsPerSecond&quot;)\n    int permittedTransactionsPerSecond;\n\n    Class&lt;? extends Throwable&gt;[] possibleExceptions;\n}\n</code></pre>\n<p>there is one more class called ConfigurationProperties like below :-</p>\n<p>Now i'm passing a Json-Object like below:-</p>\n<pre><code>  input =   &quot;{\n        &quot;configurations&quot;: [{\n            &quot;configurationClass&quot;: &quot;src.myProject.OperationHandler&quot;,\n            &quot;configurationProperties&quot;: {\n                &quot;propertiesClass&quot;: &quot;src.myProjects.schoolProperties&quot;,\n                &quot;propertiesJson&quot;: {\n                    &quot;serviceName&quot;: &quot;SchoolAdministerService&quot;,\n                    &quot;operationName&quot;: &quot;handleAdmission&quot;,\n                    &quot;latency&quot;: &quot;25&quot;,\n                    &quot;permittedTransactionsPerSecond&quot;: &quot;50&quot;,\n                    &quot;possibleExceptions&quot;: [&quot;java.io.IOException&quot;, &quot;java.net.SocketException&quot;, &quot;java.net.SocketTimeoutException&quot;]\n                }\n            }\n        }]\n    }&quot;;\n\n  type = &quot;Configurations.class&quot;;\n</code></pre>\n<p>When i'm trying to deserialize it with below way, it's getting failed:-</p>\n<pre><code>ObjectMapper objectMapper = new ObjectMapper();\n\nobjectMapper.readValue(input, type);\n</code></pre>\n<p>After running this de-serialization logic, this is getting failed with below-error:-</p>\n<pre><code>    Caused by: com.fasterxml.jackson.databind.exc.MismatchedInputException: Cannot deserialize value of type `java.lang.String` from Object value (token `JsonToken.START_OBJECT`)\nat [Source: (String)&quot;{&quot;configurations&quot;:[{&quot;configurationClass&quot;:&quot;src.myProject.OperationHandler&quot;,&quot;configurationProperties&quot;:{&quot;propertiesClass&quot;:&quot;src.myProjects.schoolProperties&quot;,&quot;propertiesJson&quot;:{\n                &quot;serviceName&quot;: &quot;SchoolAdministerService&quot;,\n                &quot;operationName&quot;: &quot;handleAdmission&quot;,\n                &quot;latency&quot;: &quot;25&quot;,\n                &quot;permittedTransactionsPerSecond&quot;: &quot;50&quot;,\n                &quot;possibleExceptions&quot;: [&quot;java.io.IOException&quot;, &quot;java.net.SocketException&quot;, &quot;java.net.SocketTimeoutException&quot;]\n            } (through reference chain: Configurations[&quot;configurations&quot;]-&gt;java.util.ArrayList[0]-&gt;Configuration[&quot;configurationProperties&quot;]-&gt;ConfigurationProperties[&quot;propertiesJson&quot;])\n</code></pre>\n<p>I think the issue is because it's trying to capture propertiesJson as String, but this is not given as string, this is a object. Can someone help, how we should de-serialize it.</p>\n<p>Thanks !</p>\n"},{"tags":["java","aggregation-framework"],"owner":{"account_id":13859774,"reputation":111,"user_id":10005690,"display_name":"Rose"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":88,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693591344,"creation_date":1693591344,"question_id":77025208,"body_markdown":"I am trying to write the logic with MongoDB aggregate pipeline, but it is failing with the below error. Below is my syntax of code but it is working with find operator. Could anyone help me with the aggregate pipeline . I am okay with find operator.I need same syntax with Aggregate pipeline . Appreciate any help. \r\n\r\n    Find operator code :working \r\n\r\n    MongoDatabase mongoDatabase = this.mongoClient.getDatabase(database);\r\n            MongoCollection&lt;Document&gt; collectionList = mongoDatabase.getCollection(this.collection);\r\n          List  list = new ArrayList();\r\n            document.append(&quot;$or&quot;, Arrays.asList(\r\n                    new Document()\r\n                            .append(&quot;key&quot;, &quot;S&quot;),\r\n                    new Document()\r\n                            .append(&quot;key&quot;, &quot;P&quot;)\r\n                    ));\r\n           List results = collection.find(document).sort(Sorts.descending(&quot;Period&quot;)).sort(Sorts.descending(&quot;_id&quot;)).limit(1).into(list);\r\n            return results;\r\n    \t\r\n    \t  \r\n    \r\n        Error Description :&quot;message&quot;: &quot;Command failed with error 40324 (Location40324): &#39;Unrecognized pipeline stage name: &#39;$or&#39;&#39; on server pl-0-eu-central-1.fpopz.mongodb.net:1032. The full response is {\\&quot;ok\\&quot;: 0.0, \\&quot;errmsg\\&quot;: \\&quot;Unrecognized pipeline stage name: &#39;$or&#39;\\&quot;, \\&quot;code\\&quot;: 40324, \\&quot;codeName\\&quot;: \\&quot;Location40324\\&quot;, \\&quot;$clusterTime\\&quot;: {\\&quot;clusterTime\\&quot;: {\\&quot;$timestamp\\&quot;: {\\&quot;t\\&quot;: 1693589659, \\&quot;i\\&quot;: 16}}, \\&quot;signature\\&quot;: {\\&quot;hash\\&quot;: {\\&quot;$binary\\&quot;: {\\&quot;base64\\&quot;: \\&quot;PqoVuUAo66TfpZJYVGfnyHuBz9A=\\&quot;, \\&quot;subType\\&quot;: \\&quot;00\\&quot;}}, \\&quot;keyId\\&quot;: 7214365560476270596}}, \\&quot;operationTime\\&quot;: {\\&quot;$timestamp\\&quot;: {\\&quot;t\\&quot;: 1693589659, \\&quot;i\\&quot;: 16}}}&quot;, \r\n    \r\n      \r\n    \r\n        Query searchQuery = new Query();\r\n               \r\n           Document documentMap =  new Document();\r\n                if (values != null &amp;&amp; !values.isEmpty())\r\n                    documentMap.put(&quot;sample.value&quot;, values);\r\n                if (color != null &amp;&amp; !color.isEmpty())\r\n                    documentMap.put(&quot;sample.color&quot;, color);\r\n                 BasicDBObject projectFields=new BasicDBObject();\r\n                projectFields.append(&quot;sample.value&quot;,&quot;$sample.value&quot;);\r\n                projectFields.append(&quot;sample.value&quot;,&quot;$sample.value&quot;);\r\n               List&lt;Document&gt; aggregate = new ArrayList&lt;&gt;();\r\n                List&lt;? extends Bson&gt; pipelines;\t\t\r\n        \t\tpipelines = getDetailsAggregate(queryLimit, projectFields, documentMap);\r\n        \t\tdatabase = collection.aggregate(pipelines).into(aggregate);\r\n        \t\tprivate List&lt;? extends Bson&gt; getDetailsAggregate(int queryLimit, BasicDBObject projectFields,Document documetMaps) {\r\n                return  Arrays.asList(\r\n                        new Document()\r\n                                .append(&quot;$match&quot;, documetMaps),\r\n                        new Document()\r\n                                .append(&quot;$or&quot;, Arrays.asList(\r\n                                        new Document()\r\n                                                .append(&quot;key&quot;, &quot;P&quot;),\r\n                                        new Document()\r\n                                                .append(&quot;key&quot;, &quot;S&quot;)\r\n                                )),\r\n                        new Document()\r\n                                .append(&quot;$project&quot;, projectFields),\r\n                        new Document()\r\n                                .append(&quot;$sort&quot;,Aggregates.sort(Sorts.descending(\r\n                                        &quot;Period&quot;))),\r\n                        new Document()\r\n                                .append(&quot;$sort&quot;,Aggregates.sort(Sorts.descending(\r\n                                        &quot;_id&quot;))),\r\n                        new Document()\r\n                                .append(&quot;$limit&quot;, queryLimit)\r\n                );\r\n        \r\n            }","title":"MongoError :Unrecognized pipeline stage name: &#39;$or with aggregate pipeline","body":"<p>I am trying to write the logic with MongoDB aggregate pipeline, but it is failing with the below error. Below is my syntax of code but it is working with find operator. Could anyone help me with the aggregate pipeline . I am okay with find operator.I need same syntax with Aggregate pipeline . Appreciate any help.</p>\n<pre><code>Find operator code :working \n\nMongoDatabase mongoDatabase = this.mongoClient.getDatabase(database);\n        MongoCollection&lt;Document&gt; collectionList = mongoDatabase.getCollection(this.collection);\n      List  list = new ArrayList();\n        document.append(&quot;$or&quot;, Arrays.asList(\n                new Document()\n                        .append(&quot;key&quot;, &quot;S&quot;),\n                new Document()\n                        .append(&quot;key&quot;, &quot;P&quot;)\n                ));\n       List results = collection.find(document).sort(Sorts.descending(&quot;Period&quot;)).sort(Sorts.descending(&quot;_id&quot;)).limit(1).into(list);\n        return results;\n    \n      \n\n    Error Description :&quot;message&quot;: &quot;Command failed with error 40324 (Location40324): 'Unrecognized pipeline stage name: '$or'' on server pl-0-eu-central-1.fpopz.mongodb.net:1032. The full response is {\\&quot;ok\\&quot;: 0.0, \\&quot;errmsg\\&quot;: \\&quot;Unrecognized pipeline stage name: '$or'\\&quot;, \\&quot;code\\&quot;: 40324, \\&quot;codeName\\&quot;: \\&quot;Location40324\\&quot;, \\&quot;$clusterTime\\&quot;: {\\&quot;clusterTime\\&quot;: {\\&quot;$timestamp\\&quot;: {\\&quot;t\\&quot;: 1693589659, \\&quot;i\\&quot;: 16}}, \\&quot;signature\\&quot;: {\\&quot;hash\\&quot;: {\\&quot;$binary\\&quot;: {\\&quot;base64\\&quot;: \\&quot;PqoVuUAo66TfpZJYVGfnyHuBz9A=\\&quot;, \\&quot;subType\\&quot;: \\&quot;00\\&quot;}}, \\&quot;keyId\\&quot;: 7214365560476270596}}, \\&quot;operationTime\\&quot;: {\\&quot;$timestamp\\&quot;: {\\&quot;t\\&quot;: 1693589659, \\&quot;i\\&quot;: 16}}}&quot;, \n\n  \n\n    Query searchQuery = new Query();\n           \n       Document documentMap =  new Document();\n            if (values != null &amp;&amp; !values.isEmpty())\n                documentMap.put(&quot;sample.value&quot;, values);\n            if (color != null &amp;&amp; !color.isEmpty())\n                documentMap.put(&quot;sample.color&quot;, color);\n             BasicDBObject projectFields=new BasicDBObject();\n            projectFields.append(&quot;sample.value&quot;,&quot;$sample.value&quot;);\n            projectFields.append(&quot;sample.value&quot;,&quot;$sample.value&quot;);\n           List&lt;Document&gt; aggregate = new ArrayList&lt;&gt;();\n            List&lt;? extends Bson&gt; pipelines;     \n            pipelines = getDetailsAggregate(queryLimit, projectFields, documentMap);\n            database = collection.aggregate(pipelines).into(aggregate);\n            private List&lt;? extends Bson&gt; getDetailsAggregate(int queryLimit, BasicDBObject projectFields,Document documetMaps) {\n            return  Arrays.asList(\n                    new Document()\n                            .append(&quot;$match&quot;, documetMaps),\n                    new Document()\n                            .append(&quot;$or&quot;, Arrays.asList(\n                                    new Document()\n                                            .append(&quot;key&quot;, &quot;P&quot;),\n                                    new Document()\n                                            .append(&quot;key&quot;, &quot;S&quot;)\n                            )),\n                    new Document()\n                            .append(&quot;$project&quot;, projectFields),\n                    new Document()\n                            .append(&quot;$sort&quot;,Aggregates.sort(Sorts.descending(\n                                    &quot;Period&quot;))),\n                    new Document()\n                            .append(&quot;$sort&quot;,Aggregates.sort(Sorts.descending(\n                                    &quot;_id&quot;))),\n                    new Document()\n                            .append(&quot;$limit&quot;, queryLimit)\n            );\n    \n        }\n</code></pre>\n"},{"tags":["java","spring","mockito","spring-integration"],"comments":[{"owner":{"account_id":2150734,"reputation":1049,"user_id":1907186,"display_name":"Lucas Ross"},"score":0,"creation_date":1536252047,"post_id":52208554,"comment_id":91366678,"body_markdown":"What if you remove `Utilities.class` from the context config? Then if `@SpyBean` isn&#39;t working, you should see the application context fail to be created.","body":"What if you remove <code>Utilities.class</code> from the context config? Then if <code>@SpyBean</code> isn&#39;t working, you should see the application context fail to be created."},{"owner":{"account_id":5235408,"reputation":530,"user_id":4184155,"display_name":"spl"},"score":0,"creation_date":1536253020,"post_id":52208554,"comment_id":91367154,"body_markdown":"Because the utilities bean is requested in the spring integration flow, within an expression, I get this: org.springframework.messaging.MessageHandlingException: Expression evaluation failed","body":"Because the utilities bean is requested in the spring integration flow, within an expression, I get this: org.springframework.messaging.MessageHandlingException: Expression evaluation failed"},{"owner":{"account_id":3273937,"reputation":114870,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"score":0,"creation_date":1536253624,"post_id":52208554,"comment_id":91367463,"body_markdown":"Show, please, how you use `Utilities` in the integration flow and share with us, please, the whole stack trace.","body":"Show, please, how you use <code>Utilities</code> in the integration flow and share with us, please, the whole stack trace."},{"owner":{"account_id":182955,"reputation":2403,"user_id":418031,"accept_rate":89,"display_name":"Zavael"},"score":0,"creation_date":1641809337,"post_id":52208554,"comment_id":124894609,"body_markdown":"I have the same problem and I think it is because beforeAll (should be static) fires when the instance is not yet created and spybean is instance field. I still dont know how to solve this if I want beforeAll annotation","body":"I have the same problem and I think it is because beforeAll (should be static) fires when the instance is not yet created and spybean is instance field. I still dont know how to solve this if I want beforeAll annotation"}],"answers":[{"tags":[],"owner":{"account_id":2150734,"reputation":1049,"user_id":1907186,"display_name":"Lucas Ross"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1536261038,"creation_date":1536259501,"answer_id":52210404,"question_id":52208554,"body_markdown":"I attempted to recreate your problem with a minimal configuration:\r\n\r\n    @ExtendWith(SpringExtension.class)\r\n    @ContextConfiguration(classes = {Ctx.class})\r\n    public class XTest {\r\n    \r\n      @SpyBean\r\n      private Random random1;\r\n    \r\n      @Autowired private Supplier&lt;Integer&gt; intSupplier;\r\n    \r\n      @Test\r\n      public void test() {\r\n        Mockito.when(random1.nextInt()).thenReturn(Integer.MAX_VALUE);\r\n        int i = intSupplier.get();\r\n        System.out.println(&quot;i=&quot; + i);\r\n      }\r\n    \r\n      @Configuration\r\n      public static class Ctx {\r\n    \r\n        @Bean\r\n        static Random random1() {\r\n          return ThreadLocalRandom.current();\r\n        }\r\n    \r\n        @Bean\r\n        static Supplier&lt;Integer&gt; intSupplier(Random random1) {\r\n          return random1::nextInt;\r\n        }\r\n      }\r\n    }\r\n\r\nAnd as expected it prints\r\n\r\n    i=2147483647\r\n\r\nSo, there must be an issue with your runtime configuration... Could you share that? I’m guessing spring-integration is using another ApplicationContext. I know this isn&#39;t an answer and I will delete it if it doesn&#39;t help.","title":"SpyBean not being injected everywhere","body":"<p>I attempted to recreate your problem with a minimal configuration:</p>\n\n<pre><code>@ExtendWith(SpringExtension.class)\n@ContextConfiguration(classes = {Ctx.class})\npublic class XTest {\n\n  @SpyBean\n  private Random random1;\n\n  @Autowired private Supplier&lt;Integer&gt; intSupplier;\n\n  @Test\n  public void test() {\n    Mockito.when(random1.nextInt()).thenReturn(Integer.MAX_VALUE);\n    int i = intSupplier.get();\n    System.out.println(\"i=\" + i);\n  }\n\n  @Configuration\n  public static class Ctx {\n\n    @Bean\n    static Random random1() {\n      return ThreadLocalRandom.current();\n    }\n\n    @Bean\n    static Supplier&lt;Integer&gt; intSupplier(Random random1) {\n      return random1::nextInt;\n    }\n  }\n}\n</code></pre>\n\n<p>And as expected it prints</p>\n\n<pre><code>i=2147483647\n</code></pre>\n\n<p>So, there must be an issue with your runtime configuration... Could you share that? I’m guessing spring-integration is using another ApplicationContext. I know this isn't an answer and I will delete it if it doesn't help.</p>\n"},{"tags":[],"owner":{"account_id":5235408,"reputation":530,"user_id":4184155,"display_name":"spl"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1536577775,"creation_date":1536577775,"answer_id":52256532,"question_id":52208554,"body_markdown":"Okay, Thank you all for attempts to help. Without meaning to frustrate, posting configuration and flow won&#39;t help I think, because of what I&#39;ve found below:\r\n\r\nThere was an exception on closer inspection:\r\n\r\n    org.springframework.expression.AccessException: Could not resolve bean reference against BeanFactory\r\n\r\nThe reference in question was to a method inside the utilities which I have used @SpyBean on:\r\n\r\n\t\t&lt;int:transformer\r\n\t\t\texpression=&quot;@utilities.asMap(&#39;licence_id&#39;, headers[licenceId], &#39;message&#39;, &#39;Delivered: &#39; + headers[confirmedMessage], &#39;secured_session_id&#39;, headers[visitorSession].getSecureSessionId())&quot; /&gt;\r\n\r\nIt&#39;s not a separate ApplicationContext but rather SpEL won&#39;t accept the spy bean because the reference has changed or similar.\r\n\r\nSo, I&#39;ve left the utilities alone and retrofitted another bean internal to that to generate the numbers, and used SpyBean on that. Now Spring Integration/SpEL is happy again because the utilities bean it&#39;s working with is correct and the mocking happens internal to that bean and transparently to SpEL.\r\n\r\n    @Component\r\n    public class RandomSupplier implements Supplier&lt;Double&gt; {\r\n    \r\n        @Override\r\n        public Double get() {\r\n            return Math.random();\r\n        }\r\n    }\r\n\r\n    public class FullIntegrationTest {\r\n    \r\n        @Autowired\r\n        private MockMvc mvc;\r\n    \r\n        @SpyBean\r\n        private RandomSupplier randomSupplier;\r\n    \r\n        @Autowired // This is only necessary for the toy test below\r\n        private Utilities utilities;\r\n    \r\n        @BeforeEach\r\n        public void setupAfterInit() {\r\n    \r\n            Mockito.when(randomSupplier.get()).thenReturn(0.5);\r\n        }\r\n    \r\n        @Test\r\n        public void t0() throws IOException {\r\n          System.out.println(utilities.getRandom());\r\n        }\r\n    ...\r\n\r\nNow Spring Integration/SpEL is happy again because the utilities bean it&#39;s working is correct and the mocking happens internal to that bean.\r\n\r\nThree lessons: Don&#39;t spy beans directly referenced in SpEL inside a Spring Integration Flow; Read the logs; You can never have enough indirection :)\r\n","title":"SpyBean not being injected everywhere","body":"<p>Okay, Thank you all for attempts to help. Without meaning to frustrate, posting configuration and flow won't help I think, because of what I've found below:</p>\n\n<p>There was an exception on closer inspection:</p>\n\n<pre><code>org.springframework.expression.AccessException: Could not resolve bean reference against BeanFactory\n</code></pre>\n\n<p>The reference in question was to a method inside the utilities which I have used @SpyBean on:</p>\n\n<pre><code>    &lt;int:transformer\n        expression=\"@utilities.asMap('licence_id', headers[licenceId], 'message', 'Delivered: ' + headers[confirmedMessage], 'secured_session_id', headers[visitorSession].getSecureSessionId())\" /&gt;\n</code></pre>\n\n<p>It's not a separate ApplicationContext but rather SpEL won't accept the spy bean because the reference has changed or similar.</p>\n\n<p>So, I've left the utilities alone and retrofitted another bean internal to that to generate the numbers, and used SpyBean on that. Now Spring Integration/SpEL is happy again because the utilities bean it's working with is correct and the mocking happens internal to that bean and transparently to SpEL.</p>\n\n<pre><code>@Component\npublic class RandomSupplier implements Supplier&lt;Double&gt; {\n\n    @Override\n    public Double get() {\n        return Math.random();\n    }\n}\n\npublic class FullIntegrationTest {\n\n    @Autowired\n    private MockMvc mvc;\n\n    @SpyBean\n    private RandomSupplier randomSupplier;\n\n    @Autowired // This is only necessary for the toy test below\n    private Utilities utilities;\n\n    @BeforeEach\n    public void setupAfterInit() {\n\n        Mockito.when(randomSupplier.get()).thenReturn(0.5);\n    }\n\n    @Test\n    public void t0() throws IOException {\n      System.out.println(utilities.getRandom());\n    }\n...\n</code></pre>\n\n<p>Now Spring Integration/SpEL is happy again because the utilities bean it's working is correct and the mocking happens internal to that bean.</p>\n\n<p>Three lessons: Don't spy beans directly referenced in SpEL inside a Spring Integration Flow; Read the logs; You can never have enough indirection :)</p>\n"}],"owner":{"account_id":5235408,"reputation":530,"user_id":4184155,"display_name":"spl"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7910,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1693591215,"creation_date":1536251368,"question_id":52208554,"body_markdown":"I&#39;m having difficulty getting a spy bean into my ApplicationContext. I have a bean called *utilities* of type *Utilities*:\r\n\r\n    @Component(&quot;utilities&quot;)\r\n    public class Utilities {\r\n    \r\n    &lt;snip&gt;\r\n    \r\n        /**\r\n         * Returns a random int. This is provided mostly for testing mock-ability\r\n         *\r\n         * @return a random integer\r\n         */\r\n        public int getRandom() {\r\n            return (int) (Math.random() * Integer.MAX_VALUE);\r\n        }\r\n    }\r\n\r\nAnd it&#39;s used from within a class indirectly referenced by my Spring Integration flow.\r\n\r\nThen I have this Jupiter test:\r\n\r\n    @TestInstance(Lifecycle.PER_CLASS)\r\n    @FixMethodOrder(MethodSorters.NAME_ASCENDING)\r\n    @ExtendWith(SpringExtension.class)\r\n    @ContextConfiguration( classes = {\r\n        XmlLocations.class,\r\n        VisitorManager.class,\r\n        Utilities.class,\r\n        UnixTimeChannel.class\r\n    })\r\n    @WebMvcTest\r\n    //@TestExecutionListeners( { MockitoTestExecutionListener.class })\r\n    public class FullIntegrationTest {\r\n    \r\n        @Autowired\r\n        private MockMvc mvc;\r\n    \r\n        @SpyBean\r\n        private Utilities utilities;\r\n    \r\n        private ClientAndServer mockServer;\r\n    \r\n        private static final int MOCK_SERVER_PORT = 9089;\r\n    \r\n        @BeforeAll\r\n        public void setUpBeforeClass() {\r\n    \r\n            Mockito.when(utilities.getRandom()).thenReturn(Integer.MAX_VALUE);\r\n    \r\n            mockServer = ClientAndServer.startClientAndServer(MOCK_SERVER_PORT);\r\n            RestAssuredMockMvc.mockMvc(mvc);\r\n            (new MockServerPingInit()).initializeExpectations(mockServer);\r\n            (new MockServerFullIntegrationInit()).initializeExpectations(mockServer);\r\n        }\r\n    \r\n        @Test\r\n        public void t00200_IncomingMessage() {\r\n    \r\n            RestAssuredMockMvc.given()\r\n                .queryParam(&quot;example&quot;, &quot;example&quot;)\r\n                .when()\r\n                .request(&quot;POST&quot;, &quot;/api/v1/incoming&quot;)\r\n                .then()\r\n                .statusCode(equalTo(200));\r\n        }\r\n    \r\n    &lt;snip&gt;\r\n\r\nBut even though I create the spy bean and use a when/thenReturn on it it doesn&#39;t float off into my application context waiting to be called and return its mocked random value.\r\n\r\nI know that the method utilities.getRandom() is getting called because I can place a breakpoint on it and debug the test, and it hits the getRandom method, but when I try to add a spy bean as shown above and mock out the getRandom to return a fixed value for testing the breakpoints still hits and so I can tell the real method not the mock is being called.\r\n\r\nI&#39;ve tried putting the when/thenReturn inside the test as well in case it&#39;s too early but it doesn&#39;t help.\r\n\r\nClearly I&#39;m doing something wrong, possibly conceptually wrong. Halp!\r\n\r\n\r\n\r\n","title":"SpyBean not being injected everywhere","body":"<p>I'm having difficulty getting a spy bean into my ApplicationContext. I have a bean called <em>utilities</em> of type <em>Utilities</em>:</p>\n<pre><code>@Component(&quot;utilities&quot;)\npublic class Utilities {\n\n&lt;snip&gt;\n\n    /**\n     * Returns a random int. This is provided mostly for testing mock-ability\n     *\n     * @return a random integer\n     */\n    public int getRandom() {\n        return (int) (Math.random() * Integer.MAX_VALUE);\n    }\n}\n</code></pre>\n<p>And it's used from within a class indirectly referenced by my Spring Integration flow.</p>\n<p>Then I have this Jupiter test:</p>\n<pre><code>@TestInstance(Lifecycle.PER_CLASS)\n@FixMethodOrder(MethodSorters.NAME_ASCENDING)\n@ExtendWith(SpringExtension.class)\n@ContextConfiguration( classes = {\n    XmlLocations.class,\n    VisitorManager.class,\n    Utilities.class,\n    UnixTimeChannel.class\n})\n@WebMvcTest\n//@TestExecutionListeners( { MockitoTestExecutionListener.class })\npublic class FullIntegrationTest {\n\n    @Autowired\n    private MockMvc mvc;\n\n    @SpyBean\n    private Utilities utilities;\n\n    private ClientAndServer mockServer;\n\n    private static final int MOCK_SERVER_PORT = 9089;\n\n    @BeforeAll\n    public void setUpBeforeClass() {\n\n        Mockito.when(utilities.getRandom()).thenReturn(Integer.MAX_VALUE);\n\n        mockServer = ClientAndServer.startClientAndServer(MOCK_SERVER_PORT);\n        RestAssuredMockMvc.mockMvc(mvc);\n        (new MockServerPingInit()).initializeExpectations(mockServer);\n        (new MockServerFullIntegrationInit()).initializeExpectations(mockServer);\n    }\n\n    @Test\n    public void t00200_IncomingMessage() {\n\n        RestAssuredMockMvc.given()\n            .queryParam(&quot;example&quot;, &quot;example&quot;)\n            .when()\n            .request(&quot;POST&quot;, &quot;/api/v1/incoming&quot;)\n            .then()\n            .statusCode(equalTo(200));\n    }\n\n&lt;snip&gt;\n</code></pre>\n<p>But even though I create the spy bean and use a when/thenReturn on it it doesn't float off into my application context waiting to be called and return its mocked random value.</p>\n<p>I know that the method utilities.getRandom() is getting called because I can place a breakpoint on it and debug the test, and it hits the getRandom method, but when I try to add a spy bean as shown above and mock out the getRandom to return a fixed value for testing the breakpoints still hits and so I can tell the real method not the mock is being called.</p>\n<p>I've tried putting the when/thenReturn inside the test as well in case it's too early but it doesn't help.</p>\n<p>Clearly I'm doing something wrong, possibly conceptually wrong. Halp!</p>\n"},{"tags":["java","multithreading","junit","deadlock","synchronized"],"comments":[{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1592490085,"post_id":62441456,"comment_id":110449375,"body_markdown":"There is no reliable test for potential deadlocks. Instrumenting code to trigger a known deadlock at a certain location might be possible, but where’s the sense in that?","body":"There is no reliable test for potential deadlocks. Instrumenting code to trigger a known deadlock at a certain location might be possible, but where’s the sense in that?"},{"owner":{"account_id":8763927,"reputation":1512,"user_id":6553042,"display_name":"fuat"},"score":0,"creation_date":1631484195,"post_id":62441456,"comment_id":122227607,"body_markdown":"you can use a tool https://github.com/devexperts/dlcheck","body":"you can use a tool <a href=\"https://github.com/devexperts/dlcheck\" rel=\"nofollow noreferrer\">github.com/devexperts/dlcheck</a>"}],"answers":[{"comments":[{"owner":{"account_id":112618,"reputation":1131,"user_id":296988,"display_name":"Luke 10X"},"score":0,"creation_date":1592482321,"post_id":62441885,"comment_id":110444822,"body_markdown":"This is a nice answer, but I wanted to test the **potential** for a Deadlock (something that only sometimes happens on production). And I want the test case to demonstrate that potential. Now it blocks every time, and even if I am calling only `method1()`, it is already blocked waiting for a barrier. Deadlock is not something called by a single thread, a single thread calling the method cannot block it. In the example with sleep, it was only deadlocking when two threads were calling those methods at the same time. Maybe is a way to mock monitors to simulate &quot;unlucky&quot; timing.","body":"This is a nice answer, but I wanted to test the <b>potential</b> for a Deadlock (something that only sometimes happens on production). And I want the test case to demonstrate that potential. Now it blocks every time, and even if I am calling only <code>method1()</code>, it is already blocked waiting for a barrier. Deadlock is not something called by a single thread, a single thread calling the method cannot block it. In the example with sleep, it was only deadlocking when two threads were calling those methods at the same time. Maybe is a way to mock monitors to simulate &quot;unlucky&quot; timing."}],"tags":[],"owner":{"account_id":6520606,"reputation":1189,"user_id":6270888,"accept_rate":50,"display_name":"Alanpatchi"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1693591132,"creation_date":1592451206,"answer_id":62441885,"question_id":62441456,"body_markdown":"Essentially, you need `Thread (t1)` executing `method1` to wait inside `synchronized (monitor1)` but outside of`synchronized (monitor2)` until another `Thread (t2)` executing `method2` goes inside `synchronized (monitor2)` and releases `t1` and both threads try to proceed.\r\n\r\nOr vice versa, where `t2` waits until `t1` comes and releases\r\n\r\nYou can code this scenario yourself. But since you are focusing just on `Deadlock` testing, you can use a `java.util.concurrent.CyclicBarrier` between `2 parties` to orchestrate this, where `parties` indicate the number of threads that must invoke `CyclicBarrier.await()` before the barrier is tripped (in other words, all the threads previous awaiting proceeds).\r\n\r\n    class Deadlock {\r\n        final private CyclicBarrier cyclicBarrier = new CyclicBarrier(2);\r\n        final private Object monitor1;\r\n        final private Object monitor2;\r\n\r\n        public Deadlock(Object monitor1, Object monitor2) {\r\n            this.monitor1 = monitor1;\r\n            this.monitor2 = monitor2;\r\n        }\r\n\r\n        public void method1() throws BrokenBarrierException, InterruptedException {\r\n            synchronized (monitor1) {\r\n                cyclicBarrier.await();\r\n                synchronized (monitor2) {\r\n                }\r\n            }\r\n        }\r\n\r\n        public void method2() throws BrokenBarrierException, InterruptedException {\r\n            synchronized (monitor2) {\r\n                cyclicBarrier.await();\r\n                synchronized (monitor1) {\r\n                }\r\n            }\r\n        }\r\n\r\n        public static void tryToSleep(long millis) {\r\n            try {\r\n                Thread.sleep(millis);\r\n            } catch (InterruptedException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    }\r\n\r\nYou will have to handle the checked Exceptions threw by `cyclicBarrier.await()`\r\n\r\n            Thread t1 = new Thread(() -&gt; {\r\n                try {\r\n                    deadlock.method1(); \r\n                } catch (BrokenBarrierException | InterruptedException e) {\r\n                    e.printStackTrace();\r\n                }\r\n            });\r\n            t1.start();\r\n\r\n            Thread t2 = new Thread(() -&gt; {\r\n                try {\r\n                    deadlock.method2();\r\n                } catch (BrokenBarrierException | InterruptedException e) {\r\n                    e.printStackTrace();\r\n                }\r\n            });\r\n            t2.start();\r\n\r\n            deadlock.tryToSleep(5000); // Wait till all threads have a chance to become alive\r\n\r\n            assertEquals(Thread.State.BLOCKED, t1.getState());\r\n            assertTrue(t1.isAlive());\r\n\r\n            assertEquals(Thread.State.BLOCKED, t2.getState());\r\n            assertTrue(t2.isAlive());\r\n","title":"Testing a potential deadlock without sleep in JUnit","body":"<p>Essentially, you need <code>Thread (t1)</code> executing <code>method1</code> to wait inside <code>synchronized (monitor1)</code> but outside of<code>synchronized (monitor2)</code> until another <code>Thread (t2)</code> executing <code>method2</code> goes inside <code>synchronized (monitor2)</code> and releases <code>t1</code> and both threads try to proceed.</p>\n<p>Or vice versa, where <code>t2</code> waits until <code>t1</code> comes and releases</p>\n<p>You can code this scenario yourself. But since you are focusing just on <code>Deadlock</code> testing, you can use a <code>java.util.concurrent.CyclicBarrier</code> between <code>2 parties</code> to orchestrate this, where <code>parties</code> indicate the number of threads that must invoke <code>CyclicBarrier.await()</code> before the barrier is tripped (in other words, all the threads previous awaiting proceeds).</p>\n<pre><code>class Deadlock {\n    final private CyclicBarrier cyclicBarrier = new CyclicBarrier(2);\n    final private Object monitor1;\n    final private Object monitor2;\n\n    public Deadlock(Object monitor1, Object monitor2) {\n        this.monitor1 = monitor1;\n        this.monitor2 = monitor2;\n    }\n\n    public void method1() throws BrokenBarrierException, InterruptedException {\n        synchronized (monitor1) {\n            cyclicBarrier.await();\n            synchronized (monitor2) {\n            }\n        }\n    }\n\n    public void method2() throws BrokenBarrierException, InterruptedException {\n        synchronized (monitor2) {\n            cyclicBarrier.await();\n            synchronized (monitor1) {\n            }\n        }\n    }\n\n    public static void tryToSleep(long millis) {\n        try {\n            Thread.sleep(millis);\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n<p>You will have to handle the checked Exceptions threw by <code>cyclicBarrier.await()</code></p>\n<pre><code>        Thread t1 = new Thread(() -&gt; {\n            try {\n                deadlock.method1(); \n            } catch (BrokenBarrierException | InterruptedException e) {\n                e.printStackTrace();\n            }\n        });\n        t1.start();\n\n        Thread t2 = new Thread(() -&gt; {\n            try {\n                deadlock.method2();\n            } catch (BrokenBarrierException | InterruptedException e) {\n                e.printStackTrace();\n            }\n        });\n        t2.start();\n\n        deadlock.tryToSleep(5000); // Wait till all threads have a chance to become alive\n\n        assertEquals(Thread.State.BLOCKED, t1.getState());\n        assertTrue(t1.isAlive());\n\n        assertEquals(Thread.State.BLOCKED, t2.getState());\n        assertTrue(t2.isAlive());\n</code></pre>\n"}],"owner":{"account_id":112618,"reputation":1131,"user_id":296988,"display_name":"Luke 10X"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1007,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":62441885,"answer_count":1,"score":0,"last_activity_date":1693591132,"creation_date":1592447998,"question_id":62441456,"body_markdown":"In classical Deadlock example, there are two paths in the code acquiring the same two synchronized locks, but in different order like here:\r\n```\r\n// Production code\r\npublic class Deadlock {\r\n    final private Object monitor1;\r\n    final private Object monitor2;\r\n\r\n    public Deadlock(Object monitor1, Object monitor2) {\r\n        this.monitor1 = monitor1;\r\n        this.monitor2 = monitor2;\r\n    }\r\n\r\n    public void method1() {\r\n        synchronized (monitor1) {\r\n            tryToSleep(1000);\r\n            synchronized (monitor2) {\r\n                tryToSleep(1000);\r\n            }\r\n        }\r\n    }\r\n\r\n    public void method2() {\r\n        synchronized (monitor2) {\r\n            tryToSleep(1000);\r\n            synchronized (monitor1) {\r\n                tryToSleep(1000);\r\n            }\r\n        }\r\n    }\r\n\r\n    public static void tryToSleep(long millis) {\r\n        try {\r\n            Thread.sleep(millis);\r\n        } catch (InterruptedException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nThis could potentially result in a deadlock. To increase the chance that it actually deadlocks, I am adding those ```tryToSleep(1000);```, just to ensure that method1 will acquire a lock on monitor1, and method2 will acquire the lock on monitor2, before even trying to acquire next lock. So using the sleep this Deadlock simulates &quot;unlucky&quot; timing. Say, there is a strange requirement, that our code should have the potential to result in a deadlock, and for that reason, we want to test it:\r\n\r\n```\r\n   // Test\r\n   @Test\r\n    void callingBothMethodsWillDeadlock() {\r\n        var deadlock = new Deadlock(Integer.class, String.class);\r\n\r\n        var t1 = new Thread(() -&gt; {\r\n            deadlock.method1(); // Executes for at least 1000ms\r\n        });\r\n        t1.start();\r\n\r\n        var t2 = new Thread(() -&gt; {\r\n            deadlock.method2(); // Executes for at least 1000ms\r\n        });\r\n        t2.start();\r\n\r\n        Deadlock.tryToSleep(5000); // We need to wait for 2s + 2s + some more to be sure...\r\n\r\n        assertEquals(Thread.State.BLOCKED, t1.getState());\r\n        assertTrue(t1.isAlive());\r\n\r\n        assertEquals(Thread.State.BLOCKED, t2.getState());\r\n        assertTrue(t2.isAlive());\r\n    }\r\n```\r\n\r\nThis passes, which is good. Which is not good is that I had to add sleep into the Deadlock class itself, and also in its test. I had to do this just in order to make the test consistently pass. Even though if I remove sleep from everywhere this code could sometimes produce a deadlock, but then there is no guarantee that it happens during the test. Now say having sleep is unacceptable here, then the question is:\r\nHow can I reliably test that this code, has a potential to cause a deadlock without any sleep neither in the test and in the actual code itself?\r\n\r\nedit: I just wanted to emphasize that I am asking for the class to have a potential for a deadlock, only in some &quot;unlucky&quot; timing (when two threads are calling `method1()` and `method2()` at the same time) this deadlock should happen. And in my test, I want to demonstrate deadlock on every run. I  want to remove sleep calls from the production code (hopefully from the test also). Maybe there is a way to use mocks instead of the injected monitors, so we could orchestrate them acquiring locks in a specific order during the test?","title":"Testing a potential deadlock without sleep in JUnit","body":"<p>In classical Deadlock example, there are two paths in the code acquiring the same two synchronized locks, but in different order like here:</p>\n\n<pre><code>// Production code\npublic class Deadlock {\n    final private Object monitor1;\n    final private Object monitor2;\n\n    public Deadlock(Object monitor1, Object monitor2) {\n        this.monitor1 = monitor1;\n        this.monitor2 = monitor2;\n    }\n\n    public void method1() {\n        synchronized (monitor1) {\n            tryToSleep(1000);\n            synchronized (monitor2) {\n                tryToSleep(1000);\n            }\n        }\n    }\n\n    public void method2() {\n        synchronized (monitor2) {\n            tryToSleep(1000);\n            synchronized (monitor1) {\n                tryToSleep(1000);\n            }\n        }\n    }\n\n    public static void tryToSleep(long millis) {\n        try {\n            Thread.sleep(millis);\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n\n<p>This could potentially result in a deadlock. To increase the chance that it actually deadlocks, I am adding those <code>tryToSleep(1000);</code>, just to ensure that method1 will acquire a lock on monitor1, and method2 will acquire the lock on monitor2, before even trying to acquire next lock. So using the sleep this Deadlock simulates \"unlucky\" timing. Say, there is a strange requirement, that our code should have the potential to result in a deadlock, and for that reason, we want to test it:</p>\n\n<pre><code>   // Test\n   @Test\n    void callingBothMethodsWillDeadlock() {\n        var deadlock = new Deadlock(Integer.class, String.class);\n\n        var t1 = new Thread(() -&gt; {\n            deadlock.method1(); // Executes for at least 1000ms\n        });\n        t1.start();\n\n        var t2 = new Thread(() -&gt; {\n            deadlock.method2(); // Executes for at least 1000ms\n        });\n        t2.start();\n\n        Deadlock.tryToSleep(5000); // We need to wait for 2s + 2s + some more to be sure...\n\n        assertEquals(Thread.State.BLOCKED, t1.getState());\n        assertTrue(t1.isAlive());\n\n        assertEquals(Thread.State.BLOCKED, t2.getState());\n        assertTrue(t2.isAlive());\n    }\n</code></pre>\n\n<p>This passes, which is good. Which is not good is that I had to add sleep into the Deadlock class itself, and also in its test. I had to do this just in order to make the test consistently pass. Even though if I remove sleep from everywhere this code could sometimes produce a deadlock, but then there is no guarantee that it happens during the test. Now say having sleep is unacceptable here, then the question is:\nHow can I reliably test that this code, has a potential to cause a deadlock without any sleep neither in the test and in the actual code itself?</p>\n\n<p>edit: I just wanted to emphasize that I am asking for the class to have a potential for a deadlock, only in some \"unlucky\" timing (when two threads are calling <code>method1()</code> and <code>method2()</code> at the same time) this deadlock should happen. And in my test, I want to demonstrate deadlock on every run. I  want to remove sleep calls from the production code (hopefully from the test also). Maybe there is a way to use mocks instead of the injected monitors, so we could orchestrate them acquiring locks in a specific order during the test?</p>\n"},{"tags":["java","spring-boot","spring-webflux","nonblocking"],"owner":{"account_id":1786908,"reputation":135,"user_id":1628191,"accept_rate":40,"display_name":"Libin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":99,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693590711,"creation_date":1693590711,"question_id":77025160,"body_markdown":"I&#39;m not sure if this is doable in reactive way.\r\nMy first query returns Flux&lt;String&gt; and I need to iterate it, to create a custom query which returns Flux&lt;Object&gt; and my method returns Flux&lt;Flux&lt;Object&gt;&gt; \r\n\r\n**First Query**\r\n\r\n    var tableNamesFlux = Mono.from(connectionFactory.create())\r\n                .flatMap((c) -&gt; Mono.from(c.createStatement(&quot;show tables&quot;).execute()).doFinally((st) -&gt; c.close()))\r\n                .flatMapMany(result -&gt; Flux.from(result.map((row, meta)-&gt;\r\n                        row.get(0, String.class)\r\n                )));\r\n\r\n**Second Query**\r\n\r\n\r\n         tableNamesFlux\r\n                .filter(name -&gt; tablesNames.contains(name.toLowerCase()))\r\n                .map(name -&gt; {\r\n                    sql.append(name).append(&quot; where &lt;&lt;conditions&gt;&gt;&quot;) \r\n                 Mono.from(connectionFactory.create())\r\n                                .flatMap((c) -&gt; Mono.from(c.createStatement( sql.toString() )\r\n                                                .execute())\r\n                                        .doFinally((st) -&gt; c.close()))\r\n                                .flatMapMany(result -&gt; Flux.from(result.map((row, meta) -&gt; Object Mapping\r\n\r\n**Response**\r\n\r\n\r\n    &quot;scanAvailable&quot;: true,\r\n            &quot;prefetch&quot;: -1\r\n\r\nCan someone tell me how to handle this is reactive way non blocking? I&#39;m still learning reactive way of doing things using spring.\r\n\r\nThanks","title":"Spring reactive r2dbc - how to loop first query which returns Flux&lt;String&gt; and call second query which returns Flux&lt;Object&gt; in non blocking way?","body":"<p>I'm not sure if this is doable in reactive way.\nMy first query returns Flux and I need to iterate it, to create a custom query which returns Flux and my method returns Flux&lt;Flux&gt;</p>\n<p><strong>First Query</strong></p>\n<pre><code>var tableNamesFlux = Mono.from(connectionFactory.create())\n            .flatMap((c) -&gt; Mono.from(c.createStatement(&quot;show tables&quot;).execute()).doFinally((st) -&gt; c.close()))\n            .flatMapMany(result -&gt; Flux.from(result.map((row, meta)-&gt;\n                    row.get(0, String.class)\n            )));\n</code></pre>\n<p><strong>Second Query</strong></p>\n<pre><code>     tableNamesFlux\n            .filter(name -&gt; tablesNames.contains(name.toLowerCase()))\n            .map(name -&gt; {\n                sql.append(name).append(&quot; where &lt;&lt;conditions&gt;&gt;&quot;) \n             Mono.from(connectionFactory.create())\n                            .flatMap((c) -&gt; Mono.from(c.createStatement( sql.toString() )\n                                            .execute())\n                                    .doFinally((st) -&gt; c.close()))\n                            .flatMapMany(result -&gt; Flux.from(result.map((row, meta) -&gt; Object Mapping\n</code></pre>\n<p><strong>Response</strong></p>\n<pre><code>&quot;scanAvailable&quot;: true,\n        &quot;prefetch&quot;: -1\n</code></pre>\n<p>Can someone tell me how to handle this is reactive way non blocking? I'm still learning reactive way of doing things using spring.</p>\n<p>Thanks</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1693588162,"post_id":77024648,"comment_id":135785642,"body_markdown":"dfFinalDir==null but you are not checking it before use hence the null pointer exception. Know what goes wrong first.","body":"dfFinalDir==null but you are not checking it before use hence the null pointer exception. Know what goes wrong first."},{"owner":{"account_id":17147295,"reputation":87,"user_id":21172734,"display_name":"mnietuniema"},"score":0,"creation_date":1693592450,"post_id":77024648,"comment_id":135786300,"body_markdown":"If you analyze this code you know that it never should be null, because earlier everything is set straightforwardly. It is all about keeping access to this folder when onDestroy and later onCreate is called, then it will not be null.","body":"If you analyze this code you know that it never should be null, because earlier everything is set straightforwardly. It is all about keeping access to this folder when onDestroy and later onCreate is called, then it will not be null."}],"answers":[{"comments":[{"owner":{"account_id":17147295,"reputation":87,"user_id":21172734,"display_name":"mnietuniema"},"score":1,"creation_date":1693592532,"post_id":77025140,"comment_id":135786311,"body_markdown":"Alright thank you, I will test this soluci&#243;n  tommorow and accept if it works.","body":"Alright thank you, I will test this soluci&#243;n  tommorow and accept if it works."}],"tags":[],"owner":{"account_id":7257,"reputation":30102,"user_id":12541,"display_name":"Scott Stanchfield"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1693590442,"creation_date":1693590442,"answer_id":77025140,"question_id":77024648,"body_markdown":"You need to `takePersistableUriPermission()` to keep access across runs without re-asking the user to choose the directory.\r\n\r\nSee [Persist permissions](https://developer.android.com/training/data-storage/shared/documents-files#persist-permissions) for details on how to do this.\r\n","title":"Android access to folder is only granted until app is closed","body":"<p>You need to <code>takePersistableUriPermission()</code> to keep access across runs without re-asking the user to choose the directory.</p>\n<p>See <a href=\"https://developer.android.com/training/data-storage/shared/documents-files#persist-permissions\" rel=\"nofollow noreferrer\">Persist permissions</a> for details on how to do this.</p>\n"}],"owner":{"account_id":17147295,"reputation":87,"user_id":21172734,"display_name":"mnietuniema"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":77025140,"answer_count":1,"score":4,"last_activity_date":1693590442,"creation_date":1693585188,"question_id":77024648,"body_markdown":"When my app is launched for the first time and the Intent.ACTION_OPEN_DOCUMENT_TREE is called then I choose my desired folder in file explorer, my code works fine until I do &quot;Force close app&quot;. After that I get an en exception (`dfFinalDir` is null): \r\n\r\n`java.lang.NullPointerException: Attempt to invoke virtual method &#39;androidx.documentfile.provider.DocumentFile androidx.documentfile.provider.DocumentFile.findFile(java.lang.String)&#39; on a null object reference`\r\n\r\nI guess it happens maybe because after closing the app I lose my access to folder, but shouldn&#39;t it be permanently? I hope so and this is what I want to achieve.\r\n\r\n    private void writeDataToFile(Intent intent) {\r\n\r\n        String uriString = sp.getString(&quot;auto_backup_uri&quot;, &quot;&quot;);\r\n\r\n        if (uriString.equals(&quot;&quot;)) {\r\n            Util.initConfirmDialog(this, getString(R.string.choose_folder_for_auto_backup) + getString(R.string.app_name_no_space) + &quot;/&quot;, new DialogInterface.OnClickListener() {\r\n                @Override\r\n                public void onClick(DialogInterface dialogInterface, int i) {\r\n                    Log.i(&quot;TAG&quot;, &quot;Trying to get access the desired folder&quot;);\r\n                    Intent intent2 = new Intent(Intent.ACTION_OPEN_DOCUMENT_TREE);\r\n                    startActivityForResult(intent2, AppConstants.GRANT_ACCESS_TO_AUTO_BACKUP_FILE);\r\n                }\r\n            });\r\n        }\r\n\r\n        if (!uriString.equals(&quot;&quot;)) {\r\n            Log.i(&quot;TAG&quot;, &quot;Trying to write data to file &quot; + uriString);\r\n            Uri uri = Uri.parse(uriString);\r\n            DocumentFile dfBeforeFinalDir = DocumentFile.fromTreeUri(this, uri);\r\n            DocumentFile dfFinalDir = dfBeforeFinalDir.findFile(getString(R.string.app_name_no_space));\r\n\r\n            // HERE IS AN EXCEPTION\r\n            DocumentFile dfFinalAutoBackupFile = dfFinalDir.findFile(&quot;notatki_a&quot;);\r\n\r\n\r\n            if (dfFinalAutoBackupFile == null) {\r\n                Log.i(&quot;TAG&quot;, &quot;Auto backup file does not exist, creating new one&quot;);\r\n                dfFinalAutoBackupFile = dfFinalDir.createFile(&quot;application/*&quot;, &quot;notatki_a&quot;);\r\n            }\r\n\r\n            OutputStream fileOutputStream = null;\r\n            try {\r\n                fileOutputStream = getContentResolver().openOutputStream(dfFinalAutoBackupFile.getUri());\r\n            } catch (FileNotFoundException e) {\r\n                doWhenException(e, &quot;The provided URI could not be opened&quot;, intent);\r\n            }\r\n            try {\r\n                fileOutputStream.write(jsonNotes.getBytes(StandardCharsets.UTF_8));\r\n                fileOutputStream.close();\r\n                intent.putExtra(&quot;auto_save_status&quot;, AppConstants.SUCCESS);\r\n            } catch (IOException e) {\r\n                doWhenException(e, &quot;An IOException during writing data to newly created file&quot;, intent);\r\n            } finally {\r\n                if (extNoteOrder &gt; 0)\r\n                    intent.putExtra(&quot;ext_note_order&quot;, extNoteOrder);\r\n                startActivity(intent);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    @Override\r\n    public void onActivityResult(int requestCode, int resultCode, Intent resultData) {\r\n        super.onActivityResult(requestCode, resultCode, resultData);\r\n        if (requestCode == AppConstants.GRANT_ACCESS_TO_AUTO_BACKUP_FILE &amp;&amp; resultCode == Activity.RESULT_OK) {\r\n            if (resultData != null) {\r\n                Uri uri = resultData.getData();\r\n                spEditor.putString(&quot;auto_backup_uri&quot;, uri.toString()).apply();\r\n\r\n                DocumentFile documentFile = DocumentFile.fromTreeUri(this, uri);\r\n\r\n                try {\r\n                    DocumentFile dfFinalDir = documentFile.findFile(getString(R.string.app_name_no_space));\r\n                    if (dfFinalDir == null) {\r\n                        dfFinalDir = documentFile.createDirectory(getString(R.string.app_name_no_space));\r\n                    }\r\n                    if (dfFinalDir != null) {\r\n                        Util.initConfirmDialogNoNegButton(this, getString(R.string.you_can_do_with_auto_backup));\r\n                    }\r\n\r\n\r\n                } catch (Exception e) {\r\n                    Util.doWhenException(this, e, &quot;The problem with /&quot; + getString(R.string.app_name_no_space) + &quot;/ folder: &quot; + e.getMessage());\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private void doWhenException(Exception e, String exCause, Intent intent) {\r\n        Log.e(&quot;TAG&quot;, exCause);\r\n        Toast.makeText(ActivityNewEditNote.this, e.getMessage(), Toast.LENGTH_SHORT).show();\r\n        e.printStackTrace();\r\n        intent.putExtra(&quot;auto_save_status&quot;, AppConstants.FAILURE);\r\n    }","title":"Android access to folder is only granted until app is closed","body":"<p>When my app is launched for the first time and the Intent.ACTION_OPEN_DOCUMENT_TREE is called then I choose my desired folder in file explorer, my code works fine until I do &quot;Force close app&quot;. After that I get an en exception (<code>dfFinalDir</code> is null):</p>\n<p><code>java.lang.NullPointerException: Attempt to invoke virtual method 'androidx.documentfile.provider.DocumentFile androidx.documentfile.provider.DocumentFile.findFile(java.lang.String)' on a null object reference</code></p>\n<p>I guess it happens maybe because after closing the app I lose my access to folder, but shouldn't it be permanently? I hope so and this is what I want to achieve.</p>\n<pre><code>private void writeDataToFile(Intent intent) {\n\n    String uriString = sp.getString(&quot;auto_backup_uri&quot;, &quot;&quot;);\n\n    if (uriString.equals(&quot;&quot;)) {\n        Util.initConfirmDialog(this, getString(R.string.choose_folder_for_auto_backup) + getString(R.string.app_name_no_space) + &quot;/&quot;, new DialogInterface.OnClickListener() {\n            @Override\n            public void onClick(DialogInterface dialogInterface, int i) {\n                Log.i(&quot;TAG&quot;, &quot;Trying to get access the desired folder&quot;);\n                Intent intent2 = new Intent(Intent.ACTION_OPEN_DOCUMENT_TREE);\n                startActivityForResult(intent2, AppConstants.GRANT_ACCESS_TO_AUTO_BACKUP_FILE);\n            }\n        });\n    }\n\n    if (!uriString.equals(&quot;&quot;)) {\n        Log.i(&quot;TAG&quot;, &quot;Trying to write data to file &quot; + uriString);\n        Uri uri = Uri.parse(uriString);\n        DocumentFile dfBeforeFinalDir = DocumentFile.fromTreeUri(this, uri);\n        DocumentFile dfFinalDir = dfBeforeFinalDir.findFile(getString(R.string.app_name_no_space));\n\n        // HERE IS AN EXCEPTION\n        DocumentFile dfFinalAutoBackupFile = dfFinalDir.findFile(&quot;notatki_a&quot;);\n\n\n        if (dfFinalAutoBackupFile == null) {\n            Log.i(&quot;TAG&quot;, &quot;Auto backup file does not exist, creating new one&quot;);\n            dfFinalAutoBackupFile = dfFinalDir.createFile(&quot;application/*&quot;, &quot;notatki_a&quot;);\n        }\n\n        OutputStream fileOutputStream = null;\n        try {\n            fileOutputStream = getContentResolver().openOutputStream(dfFinalAutoBackupFile.getUri());\n        } catch (FileNotFoundException e) {\n            doWhenException(e, &quot;The provided URI could not be opened&quot;, intent);\n        }\n        try {\n            fileOutputStream.write(jsonNotes.getBytes(StandardCharsets.UTF_8));\n            fileOutputStream.close();\n            intent.putExtra(&quot;auto_save_status&quot;, AppConstants.SUCCESS);\n        } catch (IOException e) {\n            doWhenException(e, &quot;An IOException during writing data to newly created file&quot;, intent);\n        } finally {\n            if (extNoteOrder &gt; 0)\n                intent.putExtra(&quot;ext_note_order&quot;, extNoteOrder);\n            startActivity(intent);\n        }\n    }\n}\n\n\n@Override\npublic void onActivityResult(int requestCode, int resultCode, Intent resultData) {\n    super.onActivityResult(requestCode, resultCode, resultData);\n    if (requestCode == AppConstants.GRANT_ACCESS_TO_AUTO_BACKUP_FILE &amp;&amp; resultCode == Activity.RESULT_OK) {\n        if (resultData != null) {\n            Uri uri = resultData.getData();\n            spEditor.putString(&quot;auto_backup_uri&quot;, uri.toString()).apply();\n\n            DocumentFile documentFile = DocumentFile.fromTreeUri(this, uri);\n\n            try {\n                DocumentFile dfFinalDir = documentFile.findFile(getString(R.string.app_name_no_space));\n                if (dfFinalDir == null) {\n                    dfFinalDir = documentFile.createDirectory(getString(R.string.app_name_no_space));\n                }\n                if (dfFinalDir != null) {\n                    Util.initConfirmDialogNoNegButton(this, getString(R.string.you_can_do_with_auto_backup));\n                }\n\n\n            } catch (Exception e) {\n                Util.doWhenException(this, e, &quot;The problem with /&quot; + getString(R.string.app_name_no_space) + &quot;/ folder: &quot; + e.getMessage());\n            }\n        }\n    }\n}\n\nprivate void doWhenException(Exception e, String exCause, Intent intent) {\n    Log.e(&quot;TAG&quot;, exCause);\n    Toast.makeText(ActivityNewEditNote.this, e.getMessage(), Toast.LENGTH_SHORT).show();\n    e.printStackTrace();\n    intent.putExtra(&quot;auto_save_status&quot;, AppConstants.FAILURE);\n}\n</code></pre>\n"},{"tags":["java","maven"],"comments":[{"owner":{"account_id":1960454,"reputation":44539,"user_id":1762224,"accept_rate":61,"display_name":"Mr. Polywhirl"},"score":0,"creation_date":1693588844,"post_id":77024972,"comment_id":135785754,"body_markdown":"You should probably link your previous question for some more context: [_How do I use com.sun.tools with Java 11 without modules?_](https://stackoverflow.com/questions/77023967/how-do-i-use-com-sun-tools-with-java-11-without-modules)","body":"You should probably link your previous question for some more context: <a href=\"https://stackoverflow.com/questions/77023967/how-do-i-use-com-sun-tools-with-java-11-without-modules\"><i>How do I use com.sun.tools with Java 11 without modules?</i></a>"},{"owner":{"account_id":1159723,"reputation":1811,"user_id":1139500,"display_name":"Joseph Gagnon"},"score":0,"creation_date":1693588909,"post_id":77024972,"comment_id":135785761,"body_markdown":"It was closed (without my consent I might add).","body":"It was closed (without my consent I might add)."},{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":2,"creation_date":1693589726,"post_id":77024972,"comment_id":135785901,"body_markdown":"You should clarify what is exactly the question. I understand the frustration but it is not clear exactly what you are asking. And provide some code.","body":"You should clarify what is exactly the question. I understand the frustration but it is not clear exactly what you are asking. And provide some code."},{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":1,"creation_date":1693590759,"post_id":77024972,"comment_id":135786047,"body_markdown":"Does this answer your question? [Using the attach api in Java](https://stackoverflow.com/questions/62971569/using-the-attach-api-in-java)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/62971569/using-the-attach-api-in-java\">Using the attach api in Java</a>"},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":3,"creation_date":1693590761,"post_id":77024972,"comment_id":135786048,"body_markdown":"&quot;_without my consent I might add_&quot; – Note that&#39;s how this site works. People with 1000+ score in a specific tag can close a question (that has that tag) as a duplicate singlehandedly. Otherwise, closing (for any reason) requires 3 votes from people with 3000+ reputation.","body":"&quot;<i>without my consent I might add</i>&quot; – Note that&#39;s how this site works. People with 1000+ score in a specific tag can close a question (that has that tag) as a duplicate singlehandedly. Otherwise, closing (for any reason) requires 3 votes from people with 3000+ reputation."},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1693591322,"post_id":77024972,"comment_id":135786132,"body_markdown":"If you&#39;re new to modules, I recommend reading [Understanding Java 9 Modules](https://www.oracle.com/corporate/features/understanding-java-9-modules.html) for a quick overview. With the introduction of modules in Java 9, the `tools.jar` file was removed, and that code was moved into various `jdk.*` modules. Such modules should be part of the run-time image of most (all?) OpenJDK-based distributions, including Oracle JDKs. Using the `jdk.attach` module should &quot;just work&quot;. You don&#39;t even need to modularize your code; all you have to do is import the types from that module like normal.","body":"If you&#39;re new to modules, I recommend reading <a href=\"https://www.oracle.com/corporate/features/understanding-java-9-modules.html\" rel=\"nofollow noreferrer\">Understanding Java 9 Modules</a> for a quick overview. With the introduction of modules in Java 9, the <code>tools.jar</code> file was removed, and that code was moved into various <code>jdk.*</code> modules. Such modules should be part of the run-time image of most (all?) OpenJDK-based distributions, including Oracle JDKs. Using the <code>jdk.attach</code> module should &quot;just work&quot;. You don&#39;t even need to modularize your code; all you have to do is import the types from that module like normal."},{"owner":{"account_id":1159723,"reputation":1811,"user_id":1139500,"display_name":"Joseph Gagnon"},"score":0,"creation_date":1693591834,"post_id":77024972,"comment_id":135786219,"body_markdown":"I read that article and a few others.","body":"I read that article and a few others."},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":1,"creation_date":1693591845,"post_id":77024972,"comment_id":135786223,"body_markdown":"Is it only Eclipse that is having a problem? If you write the code manually, and then execute it, does it compile and run?","body":"Is it only Eclipse that is having a problem? If you write the code manually, and then execute it, does it compile and run?"},{"owner":{"account_id":1159723,"reputation":1811,"user_id":1139500,"display_name":"Joseph Gagnon"},"score":0,"creation_date":1693591861,"post_id":77024972,"comment_id":135786228,"body_markdown":"How do I do that? I tried letting eclipse do autocomplete, but it can&#39;t find a match for the `VirtualMachine` class. I then manually entered a new import line and tried `jdk.attach`. It doesn&#39;t see that either. What am I missing?","body":"How do I do that? I tried letting eclipse do autocomplete, but it can&#39;t find a match for the <code>VirtualMachine</code> class. I then manually entered a new import line and tried <code>jdk.attach</code>. It doesn&#39;t see that either. What am I missing?"},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1693591916,"post_id":77024972,"comment_id":135786236,"body_markdown":"`jdk.attach` is the module name. Import statements work like they did in Java 8; you should have `import com.sun.tools.attach.VirtualMachine`.","body":"<code>jdk.attach</code> is the module name. Import statements work like they did in Java 8; you should have <code>import com.sun.tools.attach.VirtualMachine</code>."},{"owner":{"account_id":1159723,"reputation":1811,"user_id":1139500,"display_name":"Joseph Gagnon"},"score":0,"creation_date":1693591949,"post_id":77024972,"comment_id":135786241,"body_markdown":"I don&#39;t think so. I tried running the `mvn` commands directly on the command line and have problems there as well.","body":"I don&#39;t think so. I tried running the <code>mvn</code> commands directly on the command line and have problems there as well."},{"owner":{"account_id":1159723,"reputation":1811,"user_id":1139500,"display_name":"Joseph Gagnon"},"score":0,"creation_date":1693592249,"post_id":77024972,"comment_id":135786281,"body_markdown":"Let us [continue this discussion in chat](https://chat.stackoverflow.com/rooms/255147/discussion-between-joseph-gagnon-and-slaw).","body":"Let us <a href=\"https://chat.stackoverflow.com/rooms/255147/discussion-between-joseph-gagnon-and-slaw\">continue this discussion in chat</a>."},{"owner":{"account_id":5998820,"reputation":12676,"user_id":4712734,"display_name":"DuncG"},"score":1,"creation_date":1693593555,"post_id":77024972,"comment_id":135786480,"body_markdown":"@JosephGagnon The [example](https://stackoverflow.com/questions/62971569/using-the-attach-api-in-java/62979134#62979134) I showed in your [closed question](https://stackoverflow.com/questions/77023967/how-do-i-use-com-sun-tools-with-java-11-without-modules) works regardless of whether you use modules or not. Save the code to a file and run it. If you use modules you need module-info.java with &quot;requires transitive jdk.attach;&quot;. If you don&#39;t use modules it will work too.","body":"@JosephGagnon The <a href=\"https://stackoverflow.com/questions/62971569/using-the-attach-api-in-java/62979134#62979134\">example</a> I showed in your <a href=\"https://stackoverflow.com/questions/77023967/how-do-i-use-com-sun-tools-with-java-11-without-modules\">closed question</a> works regardless of whether you use modules or not. Save the code to a file and run it. If you use modules you need module-info.java with &quot;requires transitive jdk.attach;&quot;. If you don&#39;t use modules it will work too."},{"owner":{"account_id":29330050,"reputation":76,"user_id":22471702,"display_name":"user22471702"},"score":1,"creation_date":1693608635,"post_id":77024972,"comment_id":135788180,"body_markdown":"have you tried `com.sun.tools.attach.VirtualMachine` ?  That is what Eclipse suggests when using auto-complete on `VirtMach` for example (non-module project), and confirmed by [documentation](https://docs.oracle.com/en/java/javase/20/docs/api/jdk.attach/module-summary.html)","body":"have you tried <code>com.sun.tools.attach.VirtualMachine</code> ?  That is what Eclipse suggests when using auto-complete on <code>VirtMach</code> for example (non-module project), and confirmed by <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/jdk.attach/module-summary.html\" rel=\"nofollow noreferrer\">documentation</a>"},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1693610024,"post_id":77024972,"comment_id":135788279,"body_markdown":"Perhaps a duplicate of [*Using the attach api in Java*](https://stackoverflow.com/q/62971569/642706)","body":"Perhaps a duplicate of <a href=\"https://stackoverflow.com/q/62971569/642706\"><i>Using the attach api in Java</i></a>"}],"owner":{"account_id":1159723,"reputation":1811,"user_id":1139500,"display_name":"Joseph Gagnon"},"comment_count":15,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":111,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1693590200,"creation_date":1693588697,"question_id":77024972,"body_markdown":"Note: This is related to an earlier question. See https://stackoverflow.com/questions/77023967/how-do-i-use-com-sun-tools-with-java-11-without-modules for details.\r\n\r\nI was attempting to use the com.sun.tools package to use the `com.sun.tools.attach.VirtualMachine` class (and any others needed - I am trying to instrument my application to analyze memory usage). I cannot get it to build. I am using Oracle Java JDK 11 (11.0.17). The application also utilizes Spring Boot.\r\n\r\nBased on what I&#39;ve read so far, com.sun.tools used to be part of the JDK distribution prior to Java 9. I checked in the distribution and there is no tools.jar in $JAVA_HOME/lib. If it is no longer part of the JDK, from where do I get it? I tried adding it as a dependency in my pom.xml, but that doesn&#39;t work.\r\n\r\nAfter some more digging apparently this functionality is now part of the jdk.attach &quot;module&quot; (whatever that is - this is a new term to me). Is there a way to access/use this feature *without* modules?\r\n\r\nIn any case, I looked into this a little more (BTW not a lot of helpful info on **HOW** to use it) and did some experimentation. Created a `module-info.java` file in the default package (which is where it seems to want it) and quickly discovered that I now have to &quot;require&quot; a bunch of other stuff that was previously being taken care of by my pom.xml file. This seems a bit backwards.\r\n\r\n**What I tried - FAIL**\r\n\r\nEven so, I tried requiring jdk.attach, but it doesn&#39;t find it. I can&#39;t import the classes I need. So much for that, eh? I ran `java --list-modules` and it shows up in the list. Wonderful, but it doesn&#39;t seem to &quot;see&quot; it.\r\n\r\nI am also coming to the realization that I need to &quot;modularize&quot; other projects I have written so that they will all (theoretically) play together. This is turning into a pain. Why?\r\n\r\nmodule-info.java:\r\n\r\n    module app {\r\n      requires org.slf4j;\r\n      requires spring.context;\r\n      requires spring.beans;\r\n      requires spring.boot;\r\n      requires spring.boot.autoconfigure;\r\n      requires java.instrument;\r\n      requires javassist;\r\n      requires jdk.attach;\r\n    }\r\n\r\nOutput from running `java --list-modules`:\r\n\r\n    $ java --list-modules\r\n    java.base@11.0.17\r\n    java.compiler@11.0.17\r\n    java.datatransfer@11.0.17\r\n    java.desktop@11.0.17\r\n    java.instrument@11.0.17\r\n    java.logging@11.0.17\r\n    java.management@11.0.17\r\n    java.management.rmi@11.0.17\r\n    java.naming@11.0.17\r\n    java.net.http@11.0.17\r\n    java.prefs@11.0.17\r\n    java.rmi@11.0.17\r\n    java.scripting@11.0.17\r\n    java.se@11.0.17\r\n    java.security.jgss@11.0.17\r\n    java.security.sasl@11.0.17\r\n    java.smartcardio@11.0.17\r\n    java.sql@11.0.17\r\n    java.sql.rowset@11.0.17\r\n    java.transaction.xa@11.0.17\r\n    java.xml@11.0.17\r\n    java.xml.crypto@11.0.17\r\n    jdk.accessibility@11.0.17\r\n    jdk.attach@11.0.17\r\n    jdk.charsets@11.0.17\r\n    jdk.compiler@11.0.17\r\n    jdk.crypto.cryptoki@11.0.17\r\n    jdk.crypto.ec@11.0.17\r\n    jdk.crypto.mscapi@11.0.17\r\n    jdk.dynalink@11.0.17\r\n    jdk.editpad@11.0.17\r\n    jdk.hotspot.agent@11.0.17\r\n    jdk.httpserver@11.0.17\r\n    jdk.internal.ed@11.0.17\r\n    jdk.internal.jvmstat@11.0.17\r\n    jdk.internal.le@11.0.17\r\n    jdk.internal.opt@11.0.17\r\n    jdk.internal.vm.ci@11.0.17\r\n    jdk.internal.vm.compiler@11.0.17\r\n    jdk.internal.vm.compiler.management@11.0.17\r\n    jdk.jartool@11.0.17\r\n    jdk.javadoc@11.0.17\r\n    jdk.jcmd@11.0.17\r\n    jdk.jconsole@11.0.17\r\n    jdk.jdeps@11.0.17\r\n    jdk.jdi@11.0.17\r\n    jdk.jdwp.agent@11.0.17\r\n    jdk.jfr@11.0.17\r\n    jdk.jlink@11.0.17\r\n    jdk.jshell@11.0.17\r\n    jdk.jsobject@11.0.17\r\n    jdk.jstatd@11.0.17\r\n    jdk.localedata@11.0.17\r\n    jdk.management@11.0.17\r\n    jdk.management.agent@11.0.17\r\n    jdk.management.jfr@11.0.17\r\n    jdk.naming.dns@11.0.17\r\n    jdk.naming.ldap@11.0.17\r\n    jdk.naming.rmi@11.0.17\r\n    jdk.net@11.0.17\r\n    jdk.pack@11.0.17\r\n    jdk.rmic@11.0.17\r\n    jdk.scripting.nashorn@11.0.17\r\n    jdk.scripting.nashorn.shell@11.0.17\r\n    jdk.sctp@11.0.17\r\n    jdk.security.auth@11.0.17\r\n    jdk.security.jgss@11.0.17\r\n    jdk.unsupported@11.0.17\r\n    jdk.unsupported.desktop@11.0.17\r\n    jdk.xml.dom@11.0.17\r\n    jdk.zipfs@11.0.17\r\n\r\n","title":"How do I use the jdk.attach module?","body":"<p>Note: This is related to an earlier question. See <a href=\"https://stackoverflow.com/questions/77023967/how-do-i-use-com-sun-tools-with-java-11-without-modules\">How do I use com.sun.tools with Java 11 without modules?</a> for details.</p>\n<p>I was attempting to use the com.sun.tools package to use the <code>com.sun.tools.attach.VirtualMachine</code> class (and any others needed - I am trying to instrument my application to analyze memory usage). I cannot get it to build. I am using Oracle Java JDK 11 (11.0.17). The application also utilizes Spring Boot.</p>\n<p>Based on what I've read so far, com.sun.tools used to be part of the JDK distribution prior to Java 9. I checked in the distribution and there is no tools.jar in $JAVA_HOME/lib. If it is no longer part of the JDK, from where do I get it? I tried adding it as a dependency in my pom.xml, but that doesn't work.</p>\n<p>After some more digging apparently this functionality is now part of the jdk.attach &quot;module&quot; (whatever that is - this is a new term to me). Is there a way to access/use this feature <em>without</em> modules?</p>\n<p>In any case, I looked into this a little more (BTW not a lot of helpful info on <strong>HOW</strong> to use it) and did some experimentation. Created a <code>module-info.java</code> file in the default package (which is where it seems to want it) and quickly discovered that I now have to &quot;require&quot; a bunch of other stuff that was previously being taken care of by my pom.xml file. This seems a bit backwards.</p>\n<p><strong>What I tried - FAIL</strong></p>\n<p>Even so, I tried requiring jdk.attach, but it doesn't find it. I can't import the classes I need. So much for that, eh? I ran <code>java --list-modules</code> and it shows up in the list. Wonderful, but it doesn't seem to &quot;see&quot; it.</p>\n<p>I am also coming to the realization that I need to &quot;modularize&quot; other projects I have written so that they will all (theoretically) play together. This is turning into a pain. Why?</p>\n<p>module-info.java:</p>\n<pre><code>module app {\n  requires org.slf4j;\n  requires spring.context;\n  requires spring.beans;\n  requires spring.boot;\n  requires spring.boot.autoconfigure;\n  requires java.instrument;\n  requires javassist;\n  requires jdk.attach;\n}\n</code></pre>\n<p>Output from running <code>java --list-modules</code>:</p>\n<pre><code>$ java --list-modules\njava.base@11.0.17\njava.compiler@11.0.17\njava.datatransfer@11.0.17\njava.desktop@11.0.17\njava.instrument@11.0.17\njava.logging@11.0.17\njava.management@11.0.17\njava.management.rmi@11.0.17\njava.naming@11.0.17\njava.net.http@11.0.17\njava.prefs@11.0.17\njava.rmi@11.0.17\njava.scripting@11.0.17\njava.se@11.0.17\njava.security.jgss@11.0.17\njava.security.sasl@11.0.17\njava.smartcardio@11.0.17\njava.sql@11.0.17\njava.sql.rowset@11.0.17\njava.transaction.xa@11.0.17\njava.xml@11.0.17\njava.xml.crypto@11.0.17\njdk.accessibility@11.0.17\njdk.attach@11.0.17\njdk.charsets@11.0.17\njdk.compiler@11.0.17\njdk.crypto.cryptoki@11.0.17\njdk.crypto.ec@11.0.17\njdk.crypto.mscapi@11.0.17\njdk.dynalink@11.0.17\njdk.editpad@11.0.17\njdk.hotspot.agent@11.0.17\njdk.httpserver@11.0.17\njdk.internal.ed@11.0.17\njdk.internal.jvmstat@11.0.17\njdk.internal.le@11.0.17\njdk.internal.opt@11.0.17\njdk.internal.vm.ci@11.0.17\njdk.internal.vm.compiler@11.0.17\njdk.internal.vm.compiler.management@11.0.17\njdk.jartool@11.0.17\njdk.javadoc@11.0.17\njdk.jcmd@11.0.17\njdk.jconsole@11.0.17\njdk.jdeps@11.0.17\njdk.jdi@11.0.17\njdk.jdwp.agent@11.0.17\njdk.jfr@11.0.17\njdk.jlink@11.0.17\njdk.jshell@11.0.17\njdk.jsobject@11.0.17\njdk.jstatd@11.0.17\njdk.localedata@11.0.17\njdk.management@11.0.17\njdk.management.agent@11.0.17\njdk.management.jfr@11.0.17\njdk.naming.dns@11.0.17\njdk.naming.ldap@11.0.17\njdk.naming.rmi@11.0.17\njdk.net@11.0.17\njdk.pack@11.0.17\njdk.rmic@11.0.17\njdk.scripting.nashorn@11.0.17\njdk.scripting.nashorn.shell@11.0.17\njdk.sctp@11.0.17\njdk.security.auth@11.0.17\njdk.security.jgss@11.0.17\njdk.unsupported@11.0.17\njdk.unsupported.desktop@11.0.17\njdk.xml.dom@11.0.17\njdk.zipfs@11.0.17\n</code></pre>\n"},{"tags":["java","excel","apache-poi","xssf","sxssf"],"comments":[{"owner":{"account_id":350017,"reputation":47555,"user_id":685641,"display_name":"Gagravarr"},"score":0,"creation_date":1693490127,"post_id":77011443,"comment_id":135770349,"body_markdown":"Bigger window size means more memory is required, but allows you to change your mind over a wider range of rows","body":"Bigger window size means more memory is required, but allows you to change your mind over a wider range of rows"},{"owner":{"account_id":6608940,"reputation":620,"user_id":5483731,"accept_rate":72,"display_name":"linuxNoob"},"score":0,"creation_date":1693492434,"post_id":77011443,"comment_id":135770945,"body_markdown":"@Gagravarr but what would be the ideal value for it? I&#39;m wondering if allowing the developer to configure it is a good enough solution or if there are better ways to solve it. I don&#39;t have visibility from a future data standpoint","body":"@Gagravarr but what would be the ideal value for it? I&#39;m wondering if allowing the developer to configure it is a good enough solution or if there are better ways to solve it. I don&#39;t have visibility from a future data standpoint"},{"owner":{"account_id":350017,"reputation":47555,"user_id":685641,"display_name":"Gagravarr"},"score":0,"creation_date":1693499484,"post_id":77011443,"comment_id":135772524,"body_markdown":"There is no ideal for everyone, it depends on how much memory you want to use, and how far back you need to modify rows","body":"There is no ideal for everyone, it depends on how much memory you want to use, and how far back you need to modify rows"}],"owner":{"account_id":6608940,"reputation":620,"user_id":5483731,"accept_rate":72,"display_name":"linuxNoob"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":201,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693590134,"creation_date":1693428625,"question_id":77011443,"body_markdown":"I am trying to produce a large excel (~10 MB) with multiple sheets (5). The current implementation was using `XSSFWorkbook` but now we are running into `OutOfMemoryError` in the deployed environment so made the switch to use `SXSSFWorkbook`. The constructor takes in a window size as an argument. I tried with the default size but ran into this error:\r\n\r\n    java.lang.IllegalArgumentException: Attempting to write a row[4] in the range [0,8] that is already written to disk.\r\n\tat org.apache.poi.xssf.streaming.SXSSFSheet.createRow(SXSSFSheet.java:125)\r\n\tat org.apache.poi.xssf.streaming.SXSSFSheet.createRow(SXSSFSheet.java:61)\r\n\tat org.apache.poi.ss.util.CellUtil.getRow(CellUtil.java:126)\r\n\tat org.apache.poi.ss.util.RegionUtil.setBorderLeft(RegionUtil.java:75)\r\n\r\nUpdating the window size to 500 seems to have &#39;fixed&#39; the issue but I am still wondering if that is the ideal solution for this problem or should I be doing something else?  \r\n\r\n    SXSSFWorkbook workbook = new SXSSFWorkbook(null, 500);\r\n\r\nI saw the answers [here](https://stackoverflow.com/questions/30868325/apache-poi-getrow-returns-null-and-createrow-fails) but still wasn&#39;t clear. I am using JDK 11, poi-ooxml 5.2.2 and am running on a Mac.\r\n","title":"Apache POI SXSSFWorkbook ideal window size","body":"<p>I am trying to produce a large excel (~10 MB) with multiple sheets (5). The current implementation was using <code>XSSFWorkbook</code> but now we are running into <code>OutOfMemoryError</code> in the deployed environment so made the switch to use <code>SXSSFWorkbook</code>. The constructor takes in a window size as an argument. I tried with the default size but ran into this error:</p>\n<pre><code>java.lang.IllegalArgumentException: Attempting to write a row[4] in the range [0,8] that is already written to disk.\nat org.apache.poi.xssf.streaming.SXSSFSheet.createRow(SXSSFSheet.java:125)\nat org.apache.poi.xssf.streaming.SXSSFSheet.createRow(SXSSFSheet.java:61)\nat org.apache.poi.ss.util.CellUtil.getRow(CellUtil.java:126)\nat org.apache.poi.ss.util.RegionUtil.setBorderLeft(RegionUtil.java:75)\n</code></pre>\n<p>Updating the window size to 500 seems to have 'fixed' the issue but I am still wondering if that is the ideal solution for this problem or should I be doing something else?</p>\n<pre><code>SXSSFWorkbook workbook = new SXSSFWorkbook(null, 500);\n</code></pre>\n<p>I saw the answers <a href=\"https://stackoverflow.com/questions/30868325/apache-poi-getrow-returns-null-and-createrow-fails\">here</a> but still wasn't clear. I am using JDK 11, poi-ooxml 5.2.2 and am running on a Mac.</p>\n"},{"tags":["java","pdf","pdfbox"],"comments":[{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1693555926,"post_id":77010598,"comment_id":135779448,"body_markdown":"*&quot;I need to find the placement information of the images&quot;* - what kind of *placement information* do you need? Would the coordinates of the 4 corners suffice?","body":"<i>&quot;I need to find the placement information of the images&quot;</i> - what kind of <i>placement information</i> do you need? Would the coordinates of the 4 corners suffice?"},{"owner":{"account_id":1626378,"reputation":685,"user_id":1501858,"accept_rate":67,"display_name":"Mike Cantrell"},"score":0,"creation_date":1693573127,"post_id":77010598,"comment_id":135782681,"body_markdown":"Yeah, that&#39;s really all I need. Everything works well until the image has been rotated via CM operations.","body":"Yeah, that&#39;s really all I need. Everything works well until the image has been rotated via CM operations."},{"owner":{"account_id":1626378,"reputation":685,"user_id":1501858,"accept_rate":67,"display_name":"Mike Cantrell"},"score":0,"creation_date":1693579805,"post_id":77010598,"comment_id":135784080,"body_markdown":"I feel like I may have greatly over-complicated this because I missed something or I&#39;m doing something wrong.","body":"I feel like I may have greatly over-complicated this because I missed something or I&#39;m doing something wrong."},{"owner":{"account_id":1626378,"reputation":685,"user_id":1501858,"accept_rate":67,"display_name":"Mike Cantrell"},"score":0,"creation_date":1693580418,"post_id":77010598,"comment_id":135784243,"body_markdown":"It&#39;s also a little hard to grok due to the inversion of the y axis and rotation degrees between Java and PDF.","body":"It&#39;s also a little hard to grok due to the inversion of the y axis and rotation degrees between Java and PDF."},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1693584541,"post_id":77010598,"comment_id":135785089,"body_markdown":"Ah, right, in which coordinate system do you need those coordinates? The easiest to calculate coordinates would be the PDF user space coordinates.","body":"Ah, right, in which coordinate system do you need those coordinates? The easiest to calculate coordinates would be the PDF user space coordinates."}],"answers":[{"comments":[{"owner":{"account_id":1626378,"reputation":685,"user_id":1501858,"accept_rate":67,"display_name":"Mike Cantrell"},"score":0,"creation_date":1693925892,"post_id":77025058,"comment_id":135822200,"body_markdown":"Perfect, much simpler. Thanks for pulling me out of the weeds!","body":"Perfect, much simpler. Thanks for pulling me out of the weeds!"}],"tags":[],"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1693589573,"creation_date":1693589573,"answer_id":77025058,"question_id":77010598,"body_markdown":"In a comment you mentioned that _the coordinates of the 4 corners_ would be _all you need_.\r\n\r\nYou can extract the default user space coordinates of the bitmap images used in a PDF by walking the page content stream instructions and, when finding a bitmap image drawing instruction, applying the then _current transformation matrix_ to the corners of the unit square, (0, 0), (0, 1), (1, 0), and (1, 1).\r\n\r\nYou can implement that using a specialized `PDFStreamEngine` like this:\r\n\r\n```lang-java\r\npublic class UserSpaceCoordinatesPrinter extends PrintImageLocations {\r\n    public UserSpaceCoordinatesPrinter() throws IOException {\r\n        super();\r\n    }\r\n\r\n    @Override\r\n    protected void processOperator(Operator operator, List&lt;COSBase&gt; operands) throws IOException {\r\n        String operation = operator.getName();\r\n        if (OperatorName.DRAW_OBJECT.equals(operation)) {\r\n            COSName objectName = (COSName) operands.get(0);\r\n            PDXObject xobject = getResources().getXObject(objectName);\r\n            if (xobject instanceof PDImageXObject) {\r\n                System.out.println(&quot;\\nFound image [&quot; + objectName.getName() + &quot;]&quot;);\r\n                Matrix ctm = getGraphicsState().getCurrentTransformationMatrix();\r\n                System.out.print(&quot;Corner coordinates in user space:&quot;);\r\n                for (Vector corner : UNIT_SQUARE_CORNERS) {\r\n                    System.out.print(&quot; &quot; + ctm.transform(corner));\r\n                }\r\n                System.out.println();\r\n            } else if(xobject instanceof PDFormXObject) {\r\n                PDFormXObject form = (PDFormXObject)xobject;\r\n                showForm(form);\r\n            }\r\n        } else {\r\n            super.processOperator(operator, operands);\r\n        }\r\n    }\r\n\r\n    public static void print(PDDocument document) throws IOException {\r\n        UserSpaceCoordinatesPrinter printer = new UserSpaceCoordinatesPrinter();\r\n        int pageNum = 0;\r\n        for (PDPage page : document.getPages()) {\r\n            pageNum++;\r\n            System.out.println(&quot;\\n\\nProcessing page: &quot; + pageNum);\r\n            System.out.println(&quot;Media box: &quot; + page.getMediaBox());\r\n            System.out.println(&quot;Page rotation: &quot; + page.getRotation());\r\n            printer.processPage(page);\r\n        }\r\n    }\r\n\r\n    final static List&lt;Vector&gt; UNIT_SQUARE_CORNERS = List.of(\r\n            new Vector(0, 0), new Vector(0, 1), new Vector(1, 0), new Vector(1, 1));\r\n}\r\n```\r\n*([PrintImageCornerCoordinates][1] utility class)*\r\n\r\nYou can use it like this:\r\n\r\n```lang-java\r\ntry (PDDocument document = Loader.loadPDF(PDF_SOURCE)) {\r\n    UserSpaceCoordinatesPrinter.print(document);\r\n}\r\n```\r\n*([PrintImageCornerCoordinates][2] test `testUserCoordinatesInput`)*\r\n\r\n\r\n  [1]: https://github.com/mkl-public/testarea-pdfbox3/blob/master/src/test/java/mkl/testarea/pdfbox3/extract/PrintImageCornerCoordinates.java#L31C1-L74C1\r\n  [2]: https://github.com/mkl-public/testarea-pdfbox3/blob/master/src/test/java/mkl/testarea/pdfbox3/extract/PrintImageCornerCoordinates.java#L85\r\n","title":"Problems determining image positioning using PDFBox","body":"<p>In a comment you mentioned that <em>the coordinates of the 4 corners</em> would be <em>all you need</em>.</p>\n<p>You can extract the default user space coordinates of the bitmap images used in a PDF by walking the page content stream instructions and, when finding a bitmap image drawing instruction, applying the then <em>current transformation matrix</em> to the corners of the unit square, (0, 0), (0, 1), (1, 0), and (1, 1).</p>\n<p>You can implement that using a specialized <code>PDFStreamEngine</code> like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class UserSpaceCoordinatesPrinter extends PrintImageLocations {\n    public UserSpaceCoordinatesPrinter() throws IOException {\n        super();\n    }\n\n    @Override\n    protected void processOperator(Operator operator, List&lt;COSBase&gt; operands) throws IOException {\n        String operation = operator.getName();\n        if (OperatorName.DRAW_OBJECT.equals(operation)) {\n            COSName objectName = (COSName) operands.get(0);\n            PDXObject xobject = getResources().getXObject(objectName);\n            if (xobject instanceof PDImageXObject) {\n                System.out.println(&quot;\\nFound image [&quot; + objectName.getName() + &quot;]&quot;);\n                Matrix ctm = getGraphicsState().getCurrentTransformationMatrix();\n                System.out.print(&quot;Corner coordinates in user space:&quot;);\n                for (Vector corner : UNIT_SQUARE_CORNERS) {\n                    System.out.print(&quot; &quot; + ctm.transform(corner));\n                }\n                System.out.println();\n            } else if(xobject instanceof PDFormXObject) {\n                PDFormXObject form = (PDFormXObject)xobject;\n                showForm(form);\n            }\n        } else {\n            super.processOperator(operator, operands);\n        }\n    }\n\n    public static void print(PDDocument document) throws IOException {\n        UserSpaceCoordinatesPrinter printer = new UserSpaceCoordinatesPrinter();\n        int pageNum = 0;\n        for (PDPage page : document.getPages()) {\n            pageNum++;\n            System.out.println(&quot;\\n\\nProcessing page: &quot; + pageNum);\n            System.out.println(&quot;Media box: &quot; + page.getMediaBox());\n            System.out.println(&quot;Page rotation: &quot; + page.getRotation());\n            printer.processPage(page);\n        }\n    }\n\n    final static List&lt;Vector&gt; UNIT_SQUARE_CORNERS = List.of(\n            new Vector(0, 0), new Vector(0, 1), new Vector(1, 0), new Vector(1, 1));\n}\n</code></pre>\n<p><em>(<a href=\"https://github.com/mkl-public/testarea-pdfbox3/blob/master/src/test/java/mkl/testarea/pdfbox3/extract/PrintImageCornerCoordinates.java#L31C1-L74C1\" rel=\"nofollow noreferrer\">PrintImageCornerCoordinates</a> utility class)</em></p>\n<p>You can use it like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>try (PDDocument document = Loader.loadPDF(PDF_SOURCE)) {\n    UserSpaceCoordinatesPrinter.print(document);\n}\n</code></pre>\n<p><em>(<a href=\"https://github.com/mkl-public/testarea-pdfbox3/blob/master/src/test/java/mkl/testarea/pdfbox3/extract/PrintImageCornerCoordinates.java#L85\" rel=\"nofollow noreferrer\">PrintImageCornerCoordinates</a> test <code>testUserCoordinatesInput</code>)</em></p>\n"}],"owner":{"account_id":1626378,"reputation":685,"user_id":1501858,"accept_rate":67,"display_name":"Mike Cantrell"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77025058,"answer_count":1,"score":0,"last_activity_date":1693589573,"creation_date":1693419618,"question_id":77010598,"body_markdown":"**Context:** \r\n\r\nI have two images that I rotated 90 degrees (counterclockwise) and converted to PDF. I used two different tools to convert the images:\r\n\r\n - Document A: Mac Preview \r\n - Document B: ImageMagick\r\n\r\nVisually, the documents appear exactly the same using a PDF client.\r\n\r\n**Problem:**\r\n\r\nI need to find the placement information of the images relative to the PDF page. My code correctly identifies the positioning for one document but is wrong for the other:\r\n\r\n - Document A: Rectangle[x=792.0,y=0.0,w=614.4000244140625,h=792.0]\r\n - Document B: Rectangle[x=0.0,y=0.0,w=792.0,h=614.4000244140625]\r\n\r\nVisualizing the rectangle information, you can see that Document A (red) is not rotated and too far over on the x axis:\r\n\r\n[![Rectangle Positions][1]][1]\r\n\r\n\r\n**Details:**\r\n\r\nUsing the PDFBox debugger, I can see that Document A&#39;s image is rotated via CM operations:\r\n\r\n```\r\nq\r\nQ\r\nq\r\n  /Perceptual ri\r\n  q\r\n    0 614.4 -792 0 792 0 cm\r\n    /Im1 Do\r\n  Q\r\nQ\r\n```\r\n\r\nIt appears that I&#39;m not properly accounting for the rotation.\r\n\r\n**Code:**\r\n\r\n```\r\nMatrix matrix = getGraphicsState().getCurrentTransformationMatrix();\r\nRectangle2D.Double rectangle = new Rectangle2D.Double(\r\n        matrix.getTranslateX(),\r\n        matrix.getTranslateY(),\r\n        matrix.getScalingFactorX(),\r\n        matrix.getScalingFactorY()\r\n);\r\n```\r\n\r\n**Attempted Solution**\r\n\r\nNow I can get the rotation degrees from the matrix:\r\n\r\n```\r\n    protected int getRotation() {\r\n        Matrix matrix = getGraphicsState().getCurrentTransformationMatrix();\r\n        double rotationRadians = -Math.atan2(matrix.getShearY(), matrix.getScaleY());\r\n        return (int) Math.toDegrees(rotationRadians);\r\n    }\r\n```\r\n\r\nAnd then rotate the rectangle:\r\n\r\n```\r\n    public Rectangle2D.Double rotate(Rectangle2D rectangle, int rotationDegrees) {\r\n        double x = rectangle.getX() + rectangle.getWidth();\r\n        double y = rectangle.getY();\r\n        \r\n        AffineTransform rotationTransform = new AffineTransform();\r\n        rotationTransform.rotate(Math.toRadians(rotationDegrees), x, y);\r\n        Shape rotatedRectangle = rotationTransform.createTransformedShape(rectangle);\r\n        Rectangle2D bounds = rotatedRectangle.getBounds2D();\r\n        return (Rectangle2D.Double) bounds;\r\n    }\r\n```\r\n\r\nNow it&#39;s in the right orientation (green rectangle) but it needs to slide over:\r\n\r\n[![Rotated Rectangle Positions][2]][2]    \r\n\r\nI could adjust the new rectangle&#39;s x positioning by subtracting the sum of the original and rotated widths. It feels like maybe I might start getting into brittle territory here. I also feel like I&#39;m probably starting to re-invent a wheel. \r\n\r\nIs there a better way to solve this problem?\r\n\r\n\r\n**Update:**\r\n\r\nAfter further testing, this solution needs adjustments for other angles. I&#39;ve handled 90, 180, 270. Thankfully we don&#39;t usually run across odd angles but I&#39;m a bit concerned when we do.\r\n \r\n\r\n  [1]: https://i.stack.imgur.com/C0eZE.png\r\n  [2]: https://i.stack.imgur.com/NBMBV.png","title":"Problems determining image positioning using PDFBox","body":"<p><strong>Context:</strong></p>\n<p>I have two images that I rotated 90 degrees (counterclockwise) and converted to PDF. I used two different tools to convert the images:</p>\n<ul>\n<li>Document A: Mac Preview</li>\n<li>Document B: ImageMagick</li>\n</ul>\n<p>Visually, the documents appear exactly the same using a PDF client.</p>\n<p><strong>Problem:</strong></p>\n<p>I need to find the placement information of the images relative to the PDF page. My code correctly identifies the positioning for one document but is wrong for the other:</p>\n<ul>\n<li>Document A: Rectangle[x=792.0,y=0.0,w=614.4000244140625,h=792.0]</li>\n<li>Document B: Rectangle[x=0.0,y=0.0,w=792.0,h=614.4000244140625]</li>\n</ul>\n<p>Visualizing the rectangle information, you can see that Document A (red) is not rotated and too far over on the x axis:</p>\n<p><a href=\"https://i.stack.imgur.com/C0eZE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/C0eZE.png\" alt=\"Rectangle Positions\" /></a></p>\n<p><strong>Details:</strong></p>\n<p>Using the PDFBox debugger, I can see that Document A's image is rotated via CM operations:</p>\n<pre><code>q\nQ\nq\n  /Perceptual ri\n  q\n    0 614.4 -792 0 792 0 cm\n    /Im1 Do\n  Q\nQ\n</code></pre>\n<p>It appears that I'm not properly accounting for the rotation.</p>\n<p><strong>Code:</strong></p>\n<pre><code>Matrix matrix = getGraphicsState().getCurrentTransformationMatrix();\nRectangle2D.Double rectangle = new Rectangle2D.Double(\n        matrix.getTranslateX(),\n        matrix.getTranslateY(),\n        matrix.getScalingFactorX(),\n        matrix.getScalingFactorY()\n);\n</code></pre>\n<p><strong>Attempted Solution</strong></p>\n<p>Now I can get the rotation degrees from the matrix:</p>\n<pre><code>    protected int getRotation() {\n        Matrix matrix = getGraphicsState().getCurrentTransformationMatrix();\n        double rotationRadians = -Math.atan2(matrix.getShearY(), matrix.getScaleY());\n        return (int) Math.toDegrees(rotationRadians);\n    }\n</code></pre>\n<p>And then rotate the rectangle:</p>\n<pre><code>    public Rectangle2D.Double rotate(Rectangle2D rectangle, int rotationDegrees) {\n        double x = rectangle.getX() + rectangle.getWidth();\n        double y = rectangle.getY();\n        \n        AffineTransform rotationTransform = new AffineTransform();\n        rotationTransform.rotate(Math.toRadians(rotationDegrees), x, y);\n        Shape rotatedRectangle = rotationTransform.createTransformedShape(rectangle);\n        Rectangle2D bounds = rotatedRectangle.getBounds2D();\n        return (Rectangle2D.Double) bounds;\n    }\n</code></pre>\n<p>Now it's in the right orientation (green rectangle) but it needs to slide over:</p>\n<p><a href=\"https://i.stack.imgur.com/NBMBV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NBMBV.png\" alt=\"Rotated Rectangle Positions\" /></a></p>\n<p>I could adjust the new rectangle's x positioning by subtracting the sum of the original and rotated widths. It feels like maybe I might start getting into brittle territory here. I also feel like I'm probably starting to re-invent a wheel.</p>\n<p>Is there a better way to solve this problem?</p>\n<p><strong>Update:</strong></p>\n<p>After further testing, this solution needs adjustments for other angles. I've handled 90, 180, 270. Thankfully we don't usually run across odd angles but I'm a bit concerned when we do.</p>\n"},{"tags":["java","arrays","dynamic"],"comments":[{"owner":{"display_name":"user6073886"},"score":3,"creation_date":1693578440,"post_id":77023921,"comment_id":135783806,"body_markdown":"What is a `DynamicArray`? Since it isn&#39;t a class that is part of the standard java api you might want to add the code for that class to your question.","body":"What is a <code>DynamicArray</code>? Since it isn&#39;t a class that is part of the standard java api you might want to add the code for that class to your question."},{"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"score":0,"creation_date":1693580413,"post_id":77023921,"comment_id":135784239,"body_markdown":"What&#39;s wrong with the method you have right now? (Except `indexOf` is a misleading name.)","body":"What&#39;s wrong with the method you have right now? (Except <code>indexOf</code> is a misleading name.)"},{"owner":{"account_id":28404187,"reputation":11,"user_id":21728513,"display_name":"Anya Dinger"},"score":0,"creation_date":1693581133,"post_id":77023921,"comment_id":135784396,"body_markdown":"Sorry, the DynamicArray is: public class DynamicArray &lt;E&gt;.","body":"Sorry, the DynamicArray is: public class DynamicArray &lt;E&gt;."},{"owner":{"account_id":28404187,"reputation":11,"user_id":21728513,"display_name":"Anya Dinger"},"score":0,"creation_date":1693581208,"post_id":77023921,"comment_id":135784408,"body_markdown":"k314159 - It just is not giving an output that makes sense. *********\nThe largest number in the array is: 0","body":"k314159 - It just is not giving an output that makes sense. ********* The largest number in the array is: 0"},{"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"score":1,"creation_date":1693581209,"post_id":77023921,"comment_id":135784409,"body_markdown":"@AnyaDinger  That doesn&#39;t help much unless you include the class or a link to its documentation.  But it sounds like it could be similar to an ArrayList.","body":"@AnyaDinger  That doesn&#39;t help much unless you include the class or a link to its documentation.  But it sounds like it could be similar to an ArrayList."},{"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1693581507,"post_id":77023921,"comment_id":135784460,"body_markdown":"My guess is that `base += arr.indexOf(i);` is the problem.  Shouldn&#39;t you just be assigning the value and not adding to base?  And I would set `base` to `Integer.MIN_VALUE;`  But it would also help if you edit your question to explain your thought process.  That might help you understand what is going wrong.","body":"My guess is that <code>base += arr.indexOf(i);</code> is the problem.  Shouldn&#39;t you just be assigning the value and not adding to base?  And I would set <code>base</code> to <code>Integer.MIN_VALUE;</code>  But it would also help if you edit your question to explain your thought process.  That might help you understand what is going wrong."},{"owner":{"account_id":28404187,"reputation":11,"user_id":21728513,"display_name":"Anya Dinger"},"score":0,"creation_date":1693581626,"post_id":77023921,"comment_id":135784491,"body_markdown":"https://docs.google.com/document/d/1dVdYv9OBk_cq5_Vo9_t0-TT4ALemlPQJqi_9O572iyM/edit?usp=sharing","body":"<a href=\"https://docs.google.com/document/d/1dVdYv9OBk_cq5_Vo9_t0-TT4ALemlPQJqi_9O572iyM/edit?usp=sharing\" rel=\"nofollow noreferrer\">docs.google.com/document/d/&hellip;</a>"},{"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1693581850,"post_id":77023921,"comment_id":135784528,"body_markdown":"@AnyaDinger I modified my comment.  In essence you want to set base to a minimum.  e.g Integer.MIN_VALUE.  Then if each subsequent value is greater than base, set base to that value.","body":"@AnyaDinger I modified my comment.  In essence you want to set base to a minimum.  e.g Integer.MIN_VALUE.  Then if each subsequent value is greater than base, set base to that value."},{"owner":{"account_id":28404187,"reputation":11,"user_id":21728513,"display_name":"Anya Dinger"},"score":0,"creation_date":1693582017,"post_id":77023921,"comment_id":135784555,"body_markdown":"@WJS I tried just assigning to the base but it also had the same result: largest number = 0.","body":"@WJS I tried just assigning to the base but it also had the same result: largest number = 0."},{"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1693582276,"post_id":77023921,"comment_id":135784623,"body_markdown":"@AnyaDinger  I think you want `get` instead of `indexOf`  Do you want to return the largest number or its location.  It isn&#39;t clear.","body":"@AnyaDinger  I think you want <code>get</code> instead of <code>indexOf</code>  Do you want to return the largest number or its location.  It isn&#39;t clear."},{"owner":{"account_id":28404187,"reputation":11,"user_id":21728513,"display_name":"Anya Dinger"},"score":0,"creation_date":1693582422,"post_id":77023921,"comment_id":135784659,"body_markdown":"I want to get the largest number. Also I get an error when changing indexOf to get: Operator &#39;&lt;&#39; cannot be applied to &#39;int&#39;, &#39;java.lang.Object&#39;","body":"I want to get the largest number. Also I get an error when changing indexOf to get: Operator &#39;&lt;&#39; cannot be applied to &#39;int&#39;, &#39;java.lang.Object&#39;"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1693582616,"post_id":77023921,"comment_id":135784711,"body_markdown":"You have a type problem in the last analysis. `E` has no connection to &#39;largest.&#39; `E extends Comparable` would, or `E extends Number`. You might also use [reflection](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/reflect/Array.html#newInstance(java.lang.Class,int))","body":"You have a type problem in the last analysis. <code>E</code> has no connection to &#39;largest.&#39; <code>E extends Comparable</code> would, or <code>E extends Number</code>. You might also use <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/reflect/Array.html#newInstance(java.lang.Class,int)\" rel=\"nofollow noreferrer\">reflection</a>"},{"owner":{"account_id":28404187,"reputation":11,"user_id":21728513,"display_name":"Anya Dinger"},"score":0,"creation_date":1693582876,"post_id":77023921,"comment_id":135784759,"body_markdown":"@g00se The thing is this is for an assignment for school. That part of the code was given and can&#39;t be changed.","body":"@g00se The thing is this is for an assignment for school. That part of the code was given and can&#39;t be changed."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1693585031,"post_id":77023921,"comment_id":135785175,"body_markdown":"I see. You could stream it out: `public E max() {Object o = IntStream.range(0, size).mapToObj(i -&gt;(Comparable)data[i]).max(Comparator.naturalOrder()).orElseThrow();return (E)o;}`","body":"I see. You could stream it out: <code>public E max() {Object o = IntStream.range(0, size).mapToObj(i -&gt;(Comparable)data[i]).max(Comparator.naturalOrder()).orElse&zwnj;&#8203;Throw();return (E)o;}</code>"}],"answers":[{"comments":[{"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1693585467,"post_id":77024573,"comment_id":135785265,"body_markdown":"@AnyaDinger  You&#39;re  most welcome.  I hope my explanations were adequate.  Your instructor can surely clarify (or possibly correct) anything I have said.","body":"@AnyaDinger  You&#39;re  most welcome.  I hope my explanations were adequate.  Your instructor can surely clarify (or possibly correct) anything I have said."}],"tags":[],"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693589547,"creation_date":1693584358,"answer_id":77024573,"question_id":77023921,"body_markdown":"You have a couple of problems. Here are the basic ones.\r\n- `for (int i = 0; i == arr.size(); i++){`  - this will iterate zero times unless `arr.size() == 0` and then it will throw an `ArrayIndexOutOfBoundsException` because you are trying to get the `0th` item in an empty array. It should be `&lt; arr.size()`\r\n- `base += arr.indexOf(i)` - you said you wanted to get the number.  This gets the index for that number and adds it to base.  You want `base = arr.get(i)`\r\n\r\nNow for the more complicated problem.  You can&#39;t use `&lt;, ==, etc` when comparing objects.  You need to ensure your `max` routine only handles values that implement the `Comparable&lt;E&gt;` interface.  For example, we understand numbers and how they compare.  But what about Objects like picture frames?  Are they compared on the area, diagonal, frame thickness, or some combination of those?  Without knowing that we are helpless. So max ensures that the object under test has implemented that and we can use it. We don&#39;t have to understand it; just apply it and return the results.   Here is what it should look like.\r\n```\r\npublic static &lt;E extends Comparable&lt;? super E&gt;&gt; E max(DynamicArray&lt;E&gt; arr) {\r\n     //TODO Find and return the largest number in the array\r\n     E base = arr.get(0);\r\n     for (int i = 1; i &lt; arr.size(); i++){\r\n         // compare values\r\n         if (base.compareTo(arr.get(i)) &lt; 0){\r\n             // replace the base number with the highest number\r\n             base = arr.get(i);\r\n         }\r\n     }\r\n     // return highest number\r\n     return base; \r\n}\r\n```\r\n- It allows classes and subclasses of `E` to call this method to find the max of the array as long as they implement the `Comparable` interface.\r\n- First it sets the `base` to item at index `0`.\r\n- then it iterates starting at `1`.\r\n- for `a.compareTo(b)`, Comparators return `-1, 0, 1` if `a is &lt;, ==, or &gt; than b`, respectively.  So you want to check that base &lt; current value and if it is, assign the current value to base.\r\n- When the loop is finished, return `base`\r\n\r\nAll of the above is based on my assumptions and I recognize it may be advanced.  I also suggest you discuss this with your instructor.\r\nAlso, as you stated you wanted to return the actual maximum value.  If you wanted to return the **location** (i.e. indexOf) that value, then an entirely different approach will be required.\r\n","title":"How would you create a function to find the largest number in a Dynamic array?","body":"<p>You have a couple of problems. Here are the basic ones.</p>\n<ul>\n<li><code>for (int i = 0; i == arr.size(); i++){</code>  - this will iterate zero times unless <code>arr.size() == 0</code> and then it will throw an <code>ArrayIndexOutOfBoundsException</code> because you are trying to get the <code>0th</code> item in an empty array. It should be <code>&lt; arr.size()</code></li>\n<li><code>base += arr.indexOf(i)</code> - you said you wanted to get the number.  This gets the index for that number and adds it to base.  You want <code>base = arr.get(i)</code></li>\n</ul>\n<p>Now for the more complicated problem.  You can't use <code>&lt;, ==, etc</code> when comparing objects.  You need to ensure your <code>max</code> routine only handles values that implement the <code>Comparable&lt;E&gt;</code> interface.  For example, we understand numbers and how they compare.  But what about Objects like picture frames?  Are they compared on the area, diagonal, frame thickness, or some combination of those?  Without knowing that we are helpless. So max ensures that the object under test has implemented that and we can use it. We don't have to understand it; just apply it and return the results.   Here is what it should look like.</p>\n<pre><code>public static &lt;E extends Comparable&lt;? super E&gt;&gt; E max(DynamicArray&lt;E&gt; arr) {\n     //TODO Find and return the largest number in the array\n     E base = arr.get(0);\n     for (int i = 1; i &lt; arr.size(); i++){\n         // compare values\n         if (base.compareTo(arr.get(i)) &lt; 0){\n             // replace the base number with the highest number\n             base = arr.get(i);\n         }\n     }\n     // return highest number\n     return base; \n}\n</code></pre>\n<ul>\n<li>It allows classes and subclasses of <code>E</code> to call this method to find the max of the array as long as they implement the <code>Comparable</code> interface.</li>\n<li>First it sets the <code>base</code> to item at index <code>0</code>.</li>\n<li>then it iterates starting at <code>1</code>.</li>\n<li>for <code>a.compareTo(b)</code>, Comparators return <code>-1, 0, 1</code> if <code>a is &lt;, ==, or &gt; than b</code>, respectively.  So you want to check that base &lt; current value and if it is, assign the current value to base.</li>\n<li>When the loop is finished, return <code>base</code></li>\n</ul>\n<p>All of the above is based on my assumptions and I recognize it may be advanced.  I also suggest you discuss this with your instructor.\nAlso, as you stated you wanted to return the actual maximum value.  If you wanted to return the <strong>location</strong> (i.e. indexOf) that value, then an entirely different approach will be required.</p>\n"}],"owner":{"account_id":28404187,"reputation":11,"user_id":21728513,"display_name":"Anya Dinger"},"comment_count":14,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1693589547,"creation_date":1693578337,"question_id":77023921,"body_markdown":"`This is what I have so far and I am new to using a dynamic array instrad of a regular one. Any help would be much appriciated.\r\n\r\n```\r\npublic static int max(DynamicArray arr) {\r\n        //TODO Find and return the largest number in the array\r\n        int base = 0;\r\n        for (int i = 0; i == arr.size(); i++){\r\n            // compare values\r\n            if (base &lt; arr.indexOf(i)){\r\n                // replace the base number with the highest number\r\n                base += arr.indexOf(i);\r\n            }\r\n        }\r\n        // return highest number\r\n        return base; \r\n    }\r\n\r\nprivate int size = 0; // the size the user thinks it is\r\n\r\npublic int size(){ \r\n        return size;\r\n    }\r\n\r\npublic int indexOf(E element){ //TODO((3))\r\n        for(int i = 0; i &lt; size; i++){\r\n            if(data[i].equals(element)){\r\n                return i;\r\n            }\r\n        }\r\n        return -1;\r\n    }\r\n````\r\n\r\nAnd this is the main ouput code.\r\n\r\n```\r\n//Code to call Find the High Number Assignment\r\n        DynamicArray&lt;Integer&gt; highNumberArray = new DynamicArray&lt;Integer&gt;();\r\n        Random randGen = new Random();\r\n        for(int i = 0; i &lt; 14; i++) {\r\n            highNumberArray.add(randGen.nextInt(100));\r\n        }\r\n        System.out.println(&quot;*********&quot;);\r\n        System.out.println(&quot;The largest number in the array is: &quot; + max(highNumberArray));\r\n        System.out.println(&quot;&quot;);\r\n```\r\n\r\n\r\n------------------------------------","title":"How would you create a function to find the largest number in a Dynamic array?","body":"<p>`This is what I have so far and I am new to using a dynamic array instrad of a regular one. Any help would be much appriciated.</p>\n<pre><code>public static int max(DynamicArray arr) {\n        //TODO Find and return the largest number in the array\n        int base = 0;\n        for (int i = 0; i == arr.size(); i++){\n            // compare values\n            if (base &lt; arr.indexOf(i)){\n                // replace the base number with the highest number\n                base += arr.indexOf(i);\n            }\n        }\n        // return highest number\n        return base; \n    }\n\nprivate int size = 0; // the size the user thinks it is\n\npublic int size(){ \n        return size;\n    }\n\npublic int indexOf(E element){ //TODO((3))\n        for(int i = 0; i &lt; size; i++){\n            if(data[i].equals(element)){\n                return i;\n            }\n        }\n        return -1;\n    }\n</code></pre>\n<p>And this is the main ouput code.</p>\n<pre><code>//Code to call Find the High Number Assignment\n        DynamicArray&lt;Integer&gt; highNumberArray = new DynamicArray&lt;Integer&gt;();\n        Random randGen = new Random();\n        for(int i = 0; i &lt; 14; i++) {\n            highNumberArray.add(randGen.nextInt(100));\n        }\n        System.out.println(&quot;*********&quot;);\n        System.out.println(&quot;The largest number in the array is: &quot; + max(highNumberArray));\n        System.out.println(&quot;&quot;);\n</code></pre>\n<hr />\n"},{"tags":["java","appium"],"answers":[{"tags":[],"owner":{"account_id":4837467,"reputation":769,"user_id":3903593,"accept_rate":62,"display_name":"FiXiT"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693589070,"creation_date":1693589070,"answer_id":77025004,"question_id":77017886,"body_markdown":"You can specify the JS path while creating AppiumDriverLocalService . Below is the code in kotlin.\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n          val localAppiumServer = AppiumDriverLocalService.buildService(\r\n                AppiumServiceBuilder().usingAnyFreePort().usingDriverExecutable(\r\n                    File(PropertiesProvider.getNodePath())\r\n                ).withAppiumJS(File((APPIUM_JS_PATH))) // This will set the JS Path\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"Appium looks for Main file in project path and fails","body":"<p>You can specify the JS path while creating AppiumDriverLocalService . Below is the code in kotlin.</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>      val localAppiumServer = AppiumDriverLocalService.buildService(\n            AppiumServiceBuilder().usingAnyFreePort().usingDriverExecutable(\n                File(PropertiesProvider.getNodePath())\n            ).withAppiumJS(File((APPIUM_JS_PATH))) // This will set the JS Path</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}],"owner":{"account_id":8191273,"reputation":163,"user_id":7800452,"display_name":"Deepak Gopal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1693589070,"creation_date":1693500969,"question_id":77017886,"body_markdown":"When I try to create an AndroidDriver, using Appium 2.0.1, I get  `InvalidServerInstanceException` (stacktrace below). \r\n\r\nI have run appium-doctor and that doesn&#39;t show any issues. \r\n\r\nI am not exclusively creating and starting an Appium server now, as I am told that Appium 2.0 will do that for me. It seems to be trying but is trying to find the `main` file in the project path, instead of the appium installation path. \r\n\r\nI have tried re-installing Appium. I have followed all the recommended procedure to install Appium and its depedencies from npm. Cleaning the entire project and rebuilding the dependencies and then the project.\r\n\r\nWhat should I do now to fix this issue? \r\n\r\nIs there a driver capability I can add or should I be exclusively starting the server by giving the JS path, like we used to earlier?\r\n\r\n\r\n```\r\nio.appium.java_client.service.local.InvalidServerInstanceException: The main Appium script does not exist at &#39;/&lt;project path&gt;/appium/build/lib/main.js&#39;\r\n\r\n\tat io.appium.java_client.service.local.AppiumServiceBuilder.findMainScript(AppiumServiceBuilder.java:159)\r\n\tat io.appium.java_client.service.local.AppiumServiceBuilder.loadPathToMainScript(AppiumServiceBuilder.java:304)\r\n\tat io.appium.java_client.service.local.AppiumServiceBuilder.createArgs(AppiumServiceBuilder.java:360)\r\n\tat io.appium.java_client.service.local.AppiumServiceBuilder.createArgs(AppiumServiceBuilder.java:57)\r\n\tat org.openqa.selenium.remote.service.DriverService$Builder.build(DriverService.java:490)\r\n\tat io.appium.java_client.service.local.AppiumDriverLocalService.buildService(AppiumDriverLocalService.java:92)\r\n\tat io.appium.java_client.service.local.AppiumDriverLocalService.buildDefaultService(AppiumDriverLocalService.java:88)\r\n\tat io.appium.java_client.AppiumDriver.&lt;init&gt;(AppiumDriver.java:137)\r\n\tat io.appium.java_client.android.AndroidDriver.&lt;init&gt;(AndroidDriver.java:236)\r\n```\r\n\r\nThis is the code that I am running to create and Android driver\r\n\r\n```\r\n    private AppiumDriver createAndroidDriver(int deviceIndex) {\r\n        this.capabilitiesFactory = new CapabilitiesFactory();\r\n        DesiredCapabilities capabilities = this.capabilitiesFactory.createCapabilities(this.currentTestPlatform);\r\n        return new AndroidDriver(capabilities);\r\n    }\r\n```\r\n","title":"Appium looks for Main file in project path and fails","body":"<p>When I try to create an AndroidDriver, using Appium 2.0.1, I get  <code>InvalidServerInstanceException</code> (stacktrace below).</p>\n<p>I have run appium-doctor and that doesn't show any issues.</p>\n<p>I am not exclusively creating and starting an Appium server now, as I am told that Appium 2.0 will do that for me. It seems to be trying but is trying to find the <code>main</code> file in the project path, instead of the appium installation path.</p>\n<p>I have tried re-installing Appium. I have followed all the recommended procedure to install Appium and its depedencies from npm. Cleaning the entire project and rebuilding the dependencies and then the project.</p>\n<p>What should I do now to fix this issue?</p>\n<p>Is there a driver capability I can add or should I be exclusively starting the server by giving the JS path, like we used to earlier?</p>\n<pre><code>io.appium.java_client.service.local.InvalidServerInstanceException: The main Appium script does not exist at '/&lt;project path&gt;/appium/build/lib/main.js'\n\n    at io.appium.java_client.service.local.AppiumServiceBuilder.findMainScript(AppiumServiceBuilder.java:159)\n    at io.appium.java_client.service.local.AppiumServiceBuilder.loadPathToMainScript(AppiumServiceBuilder.java:304)\n    at io.appium.java_client.service.local.AppiumServiceBuilder.createArgs(AppiumServiceBuilder.java:360)\n    at io.appium.java_client.service.local.AppiumServiceBuilder.createArgs(AppiumServiceBuilder.java:57)\n    at org.openqa.selenium.remote.service.DriverService$Builder.build(DriverService.java:490)\n    at io.appium.java_client.service.local.AppiumDriverLocalService.buildService(AppiumDriverLocalService.java:92)\n    at io.appium.java_client.service.local.AppiumDriverLocalService.buildDefaultService(AppiumDriverLocalService.java:88)\n    at io.appium.java_client.AppiumDriver.&lt;init&gt;(AppiumDriver.java:137)\n    at io.appium.java_client.android.AndroidDriver.&lt;init&gt;(AndroidDriver.java:236)\n</code></pre>\n<p>This is the code that I am running to create and Android driver</p>\n<pre><code>    private AppiumDriver createAndroidDriver(int deviceIndex) {\n        this.capabilitiesFactory = new CapabilitiesFactory();\n        DesiredCapabilities capabilities = this.capabilitiesFactory.createCapabilities(this.currentTestPlatform);\n        return new AndroidDriver(capabilities);\n    }\n</code></pre>\n"},{"tags":["java","jopendocument"],"answers":[{"comments":[{"owner":{"account_id":1674243,"reputation":10078,"user_id":1553537,"accept_rate":29,"display_name":"Giorgi Tsiklauri"},"score":0,"creation_date":1553392729,"post_id":49570778,"comment_id":97367077,"body_markdown":"So, what you have used instead? I have the same problem.. getting millions of rows but there are only 1000 ones having data in them.","body":"So, what you have used instead? I have the same problem.. getting millions of rows but there are only 1000 ones having data in them."},{"owner":{"account_id":8625009,"reputation":84,"user_id":6458479,"display_name":"Nusret &#214;zateş"},"score":0,"creation_date":1553496303,"post_id":49570778,"comment_id":97390068,"body_markdown":"Actually I just enter the number of rows manually because It was temporary code for me. But make it automatic I really don&#39;t know how to get true number.","body":"Actually I just enter the number of rows manually because It was temporary code for me. But make it automatic I really don&#39;t know how to get true number."},{"owner":{"account_id":1674243,"reputation":10078,"user_id":1553537,"accept_rate":29,"display_name":"Giorgi Tsiklauri"},"score":0,"creation_date":1553501120,"post_id":49570778,"comment_id":97392077,"body_markdown":"Seems like bug in library.. it takes all possible (rendered) rows and columns.. which are really huge numbers, whereas we need actual records. Ok, thanks.","body":"Seems like bug in library.. it takes all possible (rendered) rows and columns.. which are really huge numbers, whereas we need actual records. Ok, thanks."}],"tags":[],"owner":{"account_id":8625009,"reputation":84,"user_id":6458479,"display_name":"Nusret &#214;zateş"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1522397306,"creation_date":1522397306,"answer_id":49570778,"question_id":46468272,"body_markdown":"    sheet.getRowCount()\r\n\r\nThis give you a maximum number of rows in a sheet it&#39;s like 19534667,so you should not use it for this.In my project i manually add row and column count.","title":"how to read .ods document by java and jopendocument package","body":"<pre><code>sheet.getRowCount()\n</code></pre>\n\n<p>This give you a maximum number of rows in a sheet it's like 19534667,so you should not use it for this.In my project i manually add row and column count.</p>\n"},{"tags":[],"owner":{"account_id":10078487,"reputation":2156,"user_id":7449706,"display_name":"Kevin Ng"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1544257092,"creation_date":1544257092,"answer_id":53680761,"question_id":46468272,"body_markdown":"I couldn&#39;t reproduce your error using your code. I think you should update to version 1.3 of jOpenDocument. I only made a spreadsheet of 5 lines to test your code. Nonetheless, it worked great.\r\n\r\nJust one thing in your code though, you don&#39;t need to bring nColIndex outside of the &quot;for&quot; loop declaration.\r\n\r\nYour code is great for ods files that only have 1 sheet but you may run into a problem if you have multiple sheets. I just modified your code a bit into a version that you could easily edit in the future to give the program the capability to work with spreadsheets that have multiple sheets that are similar in design.\r\n    \r\n    import java.io.File;\r\n    import java.io.IOException;\r\n    \r\n    import org.jopendocument.dom.spreadsheet.MutableCell;\r\n    import org.jopendocument.dom.spreadsheet.Sheet;\r\n    import org.jopendocument.dom.spreadsheet.SpreadSheet;\r\n    \r\n    public class ODSReader {\r\n      public void readODS(File file)\r\n      {\r\n        SpreadSheet spreadsheet;\r\n        try {\r\n             //Getting the 0th sheet for manipulation| pass sheet name as string\r\n             \r\n             spreadsheet = SpreadSheet.createFromFile(file);\r\n    \r\n             //Get row count and column count\r\n             int nColCount = spreadsheet.getSheet(0).getColumnCount();\r\n             int nRowCount = spreadsheet.getSheet(0).getRowCount();\r\n    \r\n             System.out.println(&quot;Rows :&quot;+nRowCount);\r\n             System.out.println(&quot;Cols :&quot;+nColCount);\r\n             //Iterating through each row of the selected sheet\r\n             MutableCell cell = null;\r\n             for(int nRowIndex = 0; nRowIndex &lt; nRowCount; nRowIndex++)\r\n             {\r\n               //Iterating through each column\r\n               for(int nColIndex = 0; nColIndex &lt; nColCount; nColIndex++)\r\n               {\r\n                 cell = spreadsheet.getSheet(0).getCellAt(nColIndex, nRowIndex);\r\n                 System.out.print(cell.getValue()+ &quot; &quot;);\r\n                }\r\n                System.out.println();\r\n              }\r\n    \r\n            } catch (IOException e) {\r\n              e.printStackTrace();\r\n            }\r\n      }\r\n      public static void main(String[] args) {\r\n            //Creating File object of .ods file\r\n            File file = new File(&quot;test.ods&quot;);\r\n            ODSReader objODSReader = new ODSReader();\r\n            objODSReader.readODS(file);\r\n      }\r\n    }","title":"how to read .ods document by java and jopendocument package","body":"<p>I couldn't reproduce your error using your code. I think you should update to version 1.3 of jOpenDocument. I only made a spreadsheet of 5 lines to test your code. Nonetheless, it worked great.</p>\n\n<p>Just one thing in your code though, you don't need to bring nColIndex outside of the \"for\" loop declaration.</p>\n\n<p>Your code is great for ods files that only have 1 sheet but you may run into a problem if you have multiple sheets. I just modified your code a bit into a version that you could easily edit in the future to give the program the capability to work with spreadsheets that have multiple sheets that are similar in design.</p>\n\n<pre><code>import java.io.File;\nimport java.io.IOException;\n\nimport org.jopendocument.dom.spreadsheet.MutableCell;\nimport org.jopendocument.dom.spreadsheet.Sheet;\nimport org.jopendocument.dom.spreadsheet.SpreadSheet;\n\npublic class ODSReader {\n  public void readODS(File file)\n  {\n    SpreadSheet spreadsheet;\n    try {\n         //Getting the 0th sheet for manipulation| pass sheet name as string\n\n         spreadsheet = SpreadSheet.createFromFile(file);\n\n         //Get row count and column count\n         int nColCount = spreadsheet.getSheet(0).getColumnCount();\n         int nRowCount = spreadsheet.getSheet(0).getRowCount();\n\n         System.out.println(\"Rows :\"+nRowCount);\n         System.out.println(\"Cols :\"+nColCount);\n         //Iterating through each row of the selected sheet\n         MutableCell cell = null;\n         for(int nRowIndex = 0; nRowIndex &lt; nRowCount; nRowIndex++)\n         {\n           //Iterating through each column\n           for(int nColIndex = 0; nColIndex &lt; nColCount; nColIndex++)\n           {\n             cell = spreadsheet.getSheet(0).getCellAt(nColIndex, nRowIndex);\n             System.out.print(cell.getValue()+ \" \");\n            }\n            System.out.println();\n          }\n\n        } catch (IOException e) {\n          e.printStackTrace();\n        }\n  }\n  public static void main(String[] args) {\n        //Creating File object of .ods file\n        File file = new File(\"test.ods\");\n        ODSReader objODSReader = new ODSReader();\n        objODSReader.readODS(file);\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13694686,"reputation":1029,"user_id":9881679,"display_name":"Adrian Jimenez"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693588257,"creation_date":1693588257,"answer_id":77024929,"question_id":46468272,"body_markdown":"if someone is using a maven project you can import the com.github.miachm.sods, you can see complete documentation here : https://com.github.miachm.sods\r\n\r\nin this example i am reading a sample ods file with movie data in the first column \r\n\r\nfirst import the maven dependency\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.github.miachm.sods&lt;/groupId&gt;\r\n            &lt;artifactId&gt;SODS&lt;/artifactId&gt;\r\n            &lt;version&gt;1.6.2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n  take a look at this sample code to read the first column \r\n\r\n     public static List&lt;String&gt; readColumnA(String filePath) {\r\n        List&lt;String&gt; movieList = new ArrayList&lt;&gt;();\r\n        try {\r\n            SpreadSheet spread = new SpreadSheet(new File(filePath));\r\n            //     System.out.println(&quot;Number of sheets: &quot; + spread.getNumSheets());\r\n            Sheet sheet = spread.getSheets().get(0);\r\n            //     System.out.println(&quot;In sheet &quot; + sheet.getName());\r\n            Range movies = sheet.getDataRange();\r\n            Object[][] movieColumn = movies.getValues();\r\n            for (int i = 0; i &lt; sheet.getMaxRows(); i++) {\r\n            //optional    System.out.println(movieColumn[i][0].toString());\r\n                movieList.add(movieColumn[i][0].toString());\r\n            }\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n        return movieList;\r\n    }","title":"how to read .ods document by java and jopendocument package","body":"<p>if someone is using a maven project you can import the com.github.miachm.sods, you can see complete documentation here : <a href=\"https://com.github.miachm.sods\" rel=\"nofollow noreferrer\">https://com.github.miachm.sods</a></p>\n<p>in this example i am reading a sample ods file with movie data in the first column</p>\n<p>first import the maven dependency</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;com.github.miachm.sods&lt;/groupId&gt;\n        &lt;artifactId&gt;SODS&lt;/artifactId&gt;\n        &lt;version&gt;1.6.2&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>take a look at this sample code to read the first column</p>\n<pre><code> public static List&lt;String&gt; readColumnA(String filePath) {\n    List&lt;String&gt; movieList = new ArrayList&lt;&gt;();\n    try {\n        SpreadSheet spread = new SpreadSheet(new File(filePath));\n        //     System.out.println(&quot;Number of sheets: &quot; + spread.getNumSheets());\n        Sheet sheet = spread.getSheets().get(0);\n        //     System.out.println(&quot;In sheet &quot; + sheet.getName());\n        Range movies = sheet.getDataRange();\n        Object[][] movieColumn = movies.getValues();\n        for (int i = 0; i &lt; sheet.getMaxRows(); i++) {\n        //optional    System.out.println(movieColumn[i][0].toString());\n            movieList.add(movieColumn[i][0].toString());\n        }\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n    return movieList;\n}\n</code></pre>\n"}],"owner":{"account_id":5714653,"reputation":111,"user_id":4515354,"accept_rate":0,"display_name":"Eman"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11456,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1693588257,"creation_date":1506598953,"question_id":46468272,"body_markdown":"I have .ods file and I want to read and display it by java program \r\nI used this program :\r\n\r\n    import java.io.File;\r\n    import java.io.IOException;\r\n\r\n    import org.jopendocument.dom.spreadsheet.MutableCell;\r\n    import org.jopendocument.dom.spreadsheet.Sheet;\r\n    import org.jopendocument.dom.spreadsheet.SpreadSheet;\r\n\r\n    public class ODSReader {\r\n      public void readODS(File file)\r\n      {\r\n        Sheet sheet;\r\n        try {\r\n             //Getting the 0th sheet for manipulation| pass sheet name as string\r\n             sheet = SpreadSheet.createFromFile(file).getSheet(0);\r\n              \r\n             //Get row count and column count\r\n             int nColCount = sheet.getColumnCount();\r\n             int nRowCount = sheet.getRowCount();\r\n\r\n             System.out.println(&quot;Rows :&quot;+nRowCount);\r\n             System.out.println(&quot;Cols :&quot;+nColCount);\r\n             //Iterating through each row of the selected sheet\r\n             MutableCell cell = null;\r\n             for(int nRowIndex = 0; nRowIndex &lt; nRowCount; nRowIndex++)\r\n             {\r\n               //Iterating through each column\r\n               int nColIndex = 0;\r\n               for( ;nColIndex &lt; nColCount; nColIndex++)\r\n               {\r\n                 cell = sheet.getCellAt(nColIndex, nRowIndex);\r\n                 System.out.print(cell.getValue()+ &quot; &quot;);\r\n                }\r\n                System.out.println();\r\n              }\r\n\r\n            } catch (IOException e) {\r\n              e.printStackTrace();\r\n            }\r\n      }\r\n      public static void main(String[] args) {\r\n            //Creating File object of .ods file\r\n            File file = new File(&quot;D:\\\\TestData\\\\test.ods&quot;);\r\n            ODSReader objODSReader = new ODSReader();\r\n            objODSReader.readODS(file);\r\n      }\r\n    }\r\n\r\nand the .ods file is that:\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/W7AuT.png\r\n\r\nand the output appears like that:\r\n\r\n    &gt; Date \r\n      Volume \r\n      Open \r\n      Low \r\n      High \r\n      Close \r\n      Exception in thread &quot;main&quot; java.lang.ArrayIndexOutOfBoundsException: 7\r\n    \tat org.jopendocument.dom.spreadsheet.Row.getCellAt(Unknown Source)\r\n    \tat org.jopendocument.dom.spreadsheet.Row.getValidCellAt(UnknownSource)\r\n    \tat org.jopendocument.dom.spreadsheet.Row.getMutableCellAt(Unknown\r\n    Source)\r\n    \tat org.jopendocument.dom.spreadsheet.Table.getCellAt(Unknown Source)\r\n    \tat com.spreadSheets.java.ODSReader.readODS(ODSReader.java:38)\r\n    \tat com.spreadSheets.java.Main.main(Main.java:20)\r\n\r\n**The QUESTION is how I could display the charachters,numbers,and Symbols\r\nusing this jopendocument package and avoid or solve these exceptions ?? **","title":"how to read .ods document by java and jopendocument package","body":"<p>I have .ods file and I want to read and display it by java program \nI used this program :</p>\n\n<pre><code>import java.io.File;\nimport java.io.IOException;\n\nimport org.jopendocument.dom.spreadsheet.MutableCell;\nimport org.jopendocument.dom.spreadsheet.Sheet;\nimport org.jopendocument.dom.spreadsheet.SpreadSheet;\n\npublic class ODSReader {\n  public void readODS(File file)\n  {\n    Sheet sheet;\n    try {\n         //Getting the 0th sheet for manipulation| pass sheet name as string\n         sheet = SpreadSheet.createFromFile(file).getSheet(0);\n\n         //Get row count and column count\n         int nColCount = sheet.getColumnCount();\n         int nRowCount = sheet.getRowCount();\n\n         System.out.println(\"Rows :\"+nRowCount);\n         System.out.println(\"Cols :\"+nColCount);\n         //Iterating through each row of the selected sheet\n         MutableCell cell = null;\n         for(int nRowIndex = 0; nRowIndex &lt; nRowCount; nRowIndex++)\n         {\n           //Iterating through each column\n           int nColIndex = 0;\n           for( ;nColIndex &lt; nColCount; nColIndex++)\n           {\n             cell = sheet.getCellAt(nColIndex, nRowIndex);\n             System.out.print(cell.getValue()+ \" \");\n            }\n            System.out.println();\n          }\n\n        } catch (IOException e) {\n          e.printStackTrace();\n        }\n  }\n  public static void main(String[] args) {\n        //Creating File object of .ods file\n        File file = new File(\"D:\\\\TestData\\\\test.ods\");\n        ODSReader objODSReader = new ODSReader();\n        objODSReader.readODS(file);\n  }\n}\n</code></pre>\n\n<p>and the .ods file is that:\n<a href=\"https://i.stack.imgur.com/W7AuT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/W7AuT.png\" alt=\"enter image description here\"></a></p>\n\n<p>and the output appears like that:</p>\n\n<pre><code>&gt; Date \n  Volume \n  Open \n  Low \n  High \n  Close \n  Exception in thread \"main\" java.lang.ArrayIndexOutOfBoundsException: 7\n    at org.jopendocument.dom.spreadsheet.Row.getCellAt(Unknown Source)\n    at org.jopendocument.dom.spreadsheet.Row.getValidCellAt(UnknownSource)\n    at org.jopendocument.dom.spreadsheet.Row.getMutableCellAt(Unknown\nSource)\n    at org.jopendocument.dom.spreadsheet.Table.getCellAt(Unknown Source)\n    at com.spreadSheets.java.ODSReader.readODS(ODSReader.java:38)\n    at com.spreadSheets.java.Main.main(Main.java:20)\n</code></pre>\n\n<p>**The QUESTION is how I could display the charachters,numbers,and Symbols\nusing this jopendocument package and avoid or solve these exceptions ?? **</p>\n"},{"tags":["java","html","freemarker","number-formatting"],"answers":[{"comments":[{"owner":{"account_id":299854,"reputation":29886,"user_id":606679,"accept_rate":25,"display_name":"ddekany"},"score":0,"creation_date":1389076973,"post_id":20960370,"comment_id":31494780,"body_markdown":"Date and number formatting is better done in `#function`-s then in `#macro`-s, unless you formatting is HTML markup (colors and such).","body":"Date and number formatting is better done in <code>#function</code>-s then in <code>#macro</code>-s, unless you formatting is HTML markup (colors and such)."}],"tags":[],"owner":{"account_id":470281,"reputation":24736,"user_id":877391,"display_name":"Joshua Moore"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1389047192,"creation_date":1389046732,"answer_id":20960370,"question_id":20960069,"body_markdown":"Freemarker uses the currency formatting provided by the Java platform. \r\n\r\nIt requires a little tweaking of the DecimalFormat returned by NumberFormat.getCurrencyInstance() (which is what is called when you call .currency). You can see [examples of it here][1].\r\n\r\nHowever, that said it will likely be more effective for you to create a macro in freemarker to call which will handle your specific formatting.\r\n\r\nSorry for not having an example of what that macro would look like, but it&#39;s a good starter into macros in freemarker since you are just learning.\r\n\r\nYou might investigate if you can supply a custom format using the exposed configuration for [number formats][2] that will meet your needs.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/2056400/format-negative-amount-of-usd-with-a-minus-sign-not-brackets-java\r\n  [2]: http://freemarker.org/docs/ref_builtins_number.html","title":"How to customize number format in freemarker?","body":"<p>Freemarker uses the currency formatting provided by the Java platform. </p>\n\n<p>It requires a little tweaking of the DecimalFormat returned by NumberFormat.getCurrencyInstance() (which is what is called when you call .currency). You can see <a href=\"https://stackoverflow.com/questions/2056400/format-negative-amount-of-usd-with-a-minus-sign-not-brackets-java\">examples of it here</a>.</p>\n\n<p>However, that said it will likely be more effective for you to create a macro in freemarker to call which will handle your specific formatting.</p>\n\n<p>Sorry for not having an example of what that macro would look like, but it's a good starter into macros in freemarker since you are just learning.</p>\n\n<p>You might investigate if you can supply a custom format using the exposed configuration for <a href=\"http://freemarker.org/docs/ref_builtins_number.html\" rel=\"nofollow noreferrer\">number formats</a> that will meet your needs.</p>\n"},{"tags":[],"owner":{"account_id":2519473,"reputation":8288,"user_id":2190115,"accept_rate":79,"display_name":"msapkal"},"comment_count":0,"down_vote_count":0,"up_vote_count":19,"is_accepted":true,"score":19,"last_activity_date":1389077824,"creation_date":1389077824,"answer_id":20965694,"question_id":20960069,"body_markdown":"You can also try `?string(&quot;,##0.00&quot;)`. However in this case you need to explicitly add `$` and `-` sign would be after `$` in case of negative numbers.\r\n\r\n\r\n    &lt;#local total = 3343434/&gt;\r\n    $ ${total?string(&quot;,##0.00&quot;)}  //$ 3,343,434.00\r\n    \r\n    &lt;#local total = -3343434/&gt;\r\n    $ ${total?string(&quot;,##0.00&quot;)}  //$ -3,343,434.00\r\n\r\nOR in case if you want what was expected you can replace the strings.\r\n\r\n    &lt;#local total = -3343434/&gt;\r\n    &lt;#local total = &quot;$ &quot; + total?string(&quot;,##0.00&quot;)/&gt;\r\n    \r\n    ${total?replace(&#39;$ -&#39;,&#39;- $&#39;)}   //- $3,343,434.00","title":"How to customize number format in freemarker?","body":"<p>You can also try <code>?string(\",##0.00\")</code>. However in this case you need to explicitly add <code>$</code> and <code>-</code> sign would be after <code>$</code> in case of negative numbers.</p>\n\n<pre><code>&lt;#local total = 3343434/&gt;\n$ ${total?string(\",##0.00\")}  //$ 3,343,434.00\n\n&lt;#local total = -3343434/&gt;\n$ ${total?string(\",##0.00\")}  //$ -3,343,434.00\n</code></pre>\n\n<p>OR in case if you want what was expected you can replace the strings.</p>\n\n<pre><code>&lt;#local total = -3343434/&gt;\n&lt;#local total = \"$ \" + total?string(\",##0.00\")/&gt;\n\n${total?replace('$ -','- $')}   //- $3,343,434.00\n</code></pre>\n"},{"tags":[],"owner":{"account_id":299854,"reputation":29886,"user_id":606679,"accept_rate":25,"display_name":"ddekany"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1479066656,"creation_date":1389078001,"answer_id":20965738,"question_id":20960069,"body_markdown":"**Update**: Since FreeMarker 2.3.24 you can define named custom number formats, which can be an alias to a number format pattern (or even a formatter implemented in Java, but that level of flexibility isn&#39;t needed in this case). So add a custom number format called &quot;money&quot; as an alias to `&quot;&#164;,##0.00&quot;` to the FreeMarker configuration, and then you can write something like `${total?string.@money}`. See: http://freemarker.org/docs/pgui_config_custom_formats.html\r\n\r\nCurrently FreeMarker just uses the formatting facility of the Java platform, so it&#39;s only as configurable as that (assuming you want to use `?string` and `?string.somethingPredefiendHere`). Which is not much... but, in general, the formatting categories provided by the Java platform is not fine-gradient enough anyway, I mean, you don&#39;t have application-domain categories like, price-of-product, a salary, a price on the stock, etc. (This demand is more frequent with non-currency numbers though.) So I think, generally, you want to make a formatter function, that you can use like `${salary(someNumber)}`, `${price(someNumber)}`, etc. Those functions can be implemented in a commonly `#included`/`#imported` template like a `#function` or in Java by using `#assign salary = &#39;com.example.SalarayMethod&#39;?new()` in place of `#function`, where `com.example.SalarayMethod` is a `TemplateMethodModelEx`.","title":"How to customize number format in freemarker?","body":"<p><strong>Update</strong>: Since FreeMarker 2.3.24 you can define named custom number formats, which can be an alias to a number format pattern (or even a formatter implemented in Java, but that level of flexibility isn't needed in this case). So add a custom number format called \"money\" as an alias to <code>\"¤,##0.00\"</code> to the FreeMarker configuration, and then you can write something like <code>${total?string.@money}</code>. See: <a href=\"http://freemarker.org/docs/pgui_config_custom_formats.html\" rel=\"nofollow noreferrer\">http://freemarker.org/docs/pgui_config_custom_formats.html</a></p>\n\n<p>Currently FreeMarker just uses the formatting facility of the Java platform, so it's only as configurable as that (assuming you want to use <code>?string</code> and <code>?string.somethingPredefiendHere</code>). Which is not much... but, in general, the formatting categories provided by the Java platform is not fine-gradient enough anyway, I mean, you don't have application-domain categories like, price-of-product, a salary, a price on the stock, etc. (This demand is more frequent with non-currency numbers though.) So I think, generally, you want to make a formatter function, that you can use like <code>${salary(someNumber)}</code>, <code>${price(someNumber)}</code>, etc. Those functions can be implemented in a commonly <code>#included</code>/<code>#imported</code> template like a <code>#function</code> or in Java by using <code>#assign salary = 'com.example.SalarayMethod'?new()</code> in place of <code>#function</code>, where <code>com.example.SalarayMethod</code> is a <code>TemplateMethodModelEx</code>.</p>\n"},{"tags":[],"owner":{"account_id":3898055,"reputation":91,"user_id":3226530,"display_name":"scarecrow"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1409728483,"creation_date":1409728483,"answer_id":25638405,"question_id":20960069,"body_markdown":"How about taking a mod of your number, convert it to the required string format and finally add a &#39;-&#39; prefix to the final string. You can retain the default format in just two steps.","title":"How to customize number format in freemarker?","body":"<p>How about taking a mod of your number, convert it to the required string format and finally add a '-' prefix to the final string. You can retain the default format in just two steps.</p>\n"},{"tags":[],"owner":{"account_id":3996319,"reputation":2107,"user_id":3293742,"accept_rate":76,"display_name":"Gabriel Garrett"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1575386376,"creation_date":1575386376,"answer_id":59160233,"question_id":20960069,"body_markdown":"If you want to maintain the default currency formatting (in case you need to use a locale other than &#39;$&#39;), you can just replace the parentheses like so:\r\n\r\n    ${transaction.amount?string.currency?replace(&quot;(&quot;,&quot;-&quot;)?replace(&quot;)&quot;,&quot;&quot;)}\r\n\r\nThis will work without error regardless of if a number is negative or positive.\r\n\r\n**TIP: Make sure the number is actually a number with the `?number` directive before converting to a currency format**","title":"How to customize number format in freemarker?","body":"<p>If you want to maintain the default currency formatting (in case you need to use a locale other than '$'), you can just replace the parentheses like so:</p>\n\n<pre><code>${transaction.amount?string.currency?replace(\"(\",\"-\")?replace(\")\",\"\")}\n</code></pre>\n\n<p>This will work without error regardless of if a number is negative or positive.</p>\n\n<p><strong>TIP: Make sure the number is actually a number with the <code>?number</code> directive before converting to a currency format</strong></p>\n"},{"tags":[],"owner":{"account_id":10878966,"reputation":734,"user_id":8000120,"display_name":"J. Jerez"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693588118,"creation_date":1693588118,"answer_id":77024918,"question_id":20960069,"body_markdown":"    ${amount?string(&quot;$,##0.00&quot;)}\r\nResult: -$100.00 or $100.00 regarding the sign.","title":"How to customize number format in freemarker?","body":"<pre><code>${amount?string(&quot;$,##0.00&quot;)}\n</code></pre>\n<p>Result: -$100.00 or $100.00 regarding the sign.</p>\n"}],"owner":{"account_id":448913,"reputation":3527,"user_id":843400,"accept_rate":64,"display_name":"CustardBun"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47548,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":20965694,"answer_count":6,"score":5,"last_activity_date":1693588118,"creation_date":1389045550,"question_id":20960069,"body_markdown":"I am using freemarker and trying to display numbers in this format: `$3,343,434.00` for example. This was easily taken care of by using `${total?string.currency}` (assuming &quot;total&quot; is some number). \r\n\r\nHowever, when I have negative numbers, it&#39;s showing them like this: `($343.34)` instead of this: `-$343.34`. I need the negative sign instead of the parenthesis. Is there a way I could customize the formatting so it does everything that the `string.currency` did but replace the negative value behavior? I am relatively new to freemarker, so detailed responses are appreciated!","title":"How to customize number format in freemarker?","body":"<p>I am using freemarker and trying to display numbers in this format: <code>$3,343,434.00</code> for example. This was easily taken care of by using <code>${total?string.currency}</code> (assuming \"total\" is some number). </p>\n\n<p>However, when I have negative numbers, it's showing them like this: <code>($343.34)</code> instead of this: <code>-$343.34</code>. I need the negative sign instead of the parenthesis. Is there a way I could customize the formatting so it does everything that the <code>string.currency</code> did but replace the negative value behavior? I am relatively new to freemarker, so detailed responses are appreciated!</p>\n"},{"tags":["java","selenium"],"comments":[{"owner":{"account_id":5178355,"reputation":3548,"user_id":4144749,"display_name":"Fenio"},"score":0,"creation_date":1499250585,"post_id":44923640,"comment_id":76822804,"body_markdown":"Can&#39;t you save your data in `.xls` file?","body":"Can&#39;t you save your data in <code>.xls</code> file?"},{"owner":{"account_id":9208364,"reputation":43,"user_id":6842700,"accept_rate":18,"display_name":"Kanagaraj"},"score":0,"creation_date":1499250627,"post_id":44923640,"comment_id":76822838,"body_markdown":"yes. My company have only open office","body":"yes. My company have only open office"},{"owner":{"account_id":5178355,"reputation":3548,"user_id":4144749,"display_name":"Fenio"},"score":0,"creation_date":1499250650,"post_id":44923640,"comment_id":76822847,"body_markdown":"Open office supports saving and loading from `.xls` extension.","body":"Open office supports saving and loading from <code>.xls</code> extension."},{"owner":{"account_id":9208364,"reputation":43,"user_id":6842700,"accept_rate":18,"display_name":"Kanagaraj"},"score":0,"creation_date":1499250825,"post_id":44923640,"comment_id":76822971,"body_markdown":"ok. thanks for your information","body":"ok. thanks for your information"},{"owner":{"account_id":5178355,"reputation":3548,"user_id":4144749,"display_name":"Fenio"},"score":1,"creation_date":1499252236,"post_id":44923640,"comment_id":76823983,"body_markdown":"And then, you can use `jxl` library to operate on `.xls` files","body":"And then, you can use <code>jxl</code> library to operate on <code>.xls</code> files"}],"answers":[{"tags":[],"owner":{"account_id":9573610,"reputation":1,"user_id":7110526,"display_name":"Mohanraj"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1543057606,"creation_date":1543049571,"answer_id":53456632,"question_id":44923640,"body_markdown":"    File file = new File(&quot;file location&quot;);\r\n    Sheet sheet = SpreadSheet.createFromFile(file).getSheet(0)MutableCell domain = null;\r\n    sheet.getCellAt(row index,column index).setValue(value you want to write in the cell) / getvalue()-fetches the value in the cell;\r\n    sheet.getSpreadSheet().saveAs(file);\r\n\r\n**Note**: \r\nFor using this, you need `openjdocument` jar file added to your project.","title":"Reading data from ods(Open office spreadsheet) for selenium in java","body":"<pre><code>File file = new File(\"file location\");\nSheet sheet = SpreadSheet.createFromFile(file).getSheet(0)MutableCell domain = null;\nsheet.getCellAt(row index,column index).setValue(value you want to write in the cell) / getvalue()-fetches the value in the cell;\nsheet.getSpreadSheet().saveAs(file);\n</code></pre>\n\n<p><strong>Note</strong>: \nFor using this, you need <code>openjdocument</code> jar file added to your project.</p>\n"},{"tags":[],"owner":{"account_id":13694686,"reputation":1029,"user_id":9881679,"display_name":"Adrian Jimenez"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693587751,"creation_date":1693587751,"answer_id":77024886,"question_id":44923640,"body_markdown":"First import library \r\n\r\n      &lt;dependency&gt;\r\n            &lt;groupId&gt;com.github.miachm.sods&lt;/groupId&gt;\r\n            &lt;artifactId&gt;SODS&lt;/artifactId&gt;\r\n            &lt;version&gt;1.6.2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\nthen this is an example on how to read the first column \r\n\r\n    public static List&lt;String&gt; readColumnA(String filePath) {\r\n        List&lt;String&gt; movieList = new ArrayList&lt;&gt;();\r\n        try {\r\n            SpreadSheet spread = new SpreadSheet(new File(filePath));\r\n            //     System.out.println(&quot;Number of sheets: &quot; + spread.getNumSheets());\r\n            Sheet sheet = spread.getSheets().get(0);\r\n            //     System.out.println(&quot;In sheet &quot; + sheet.getName());\r\n            Range movies = sheet.getDataRange();\r\n            Object[][] movieColumn = movies.getValues();\r\n            for (int i = 0; i &lt; sheet.getMaxRows(); i++) {\r\n                movieList.add(movieColumn[i][0].toString());\r\n            }\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n        return movieList;\r\n    }","title":"Reading data from ods(Open office spreadsheet) for selenium in java","body":"<p>First import library</p>\n<pre><code>  &lt;dependency&gt;\n        &lt;groupId&gt;com.github.miachm.sods&lt;/groupId&gt;\n        &lt;artifactId&gt;SODS&lt;/artifactId&gt;\n        &lt;version&gt;1.6.2&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>then this is an example on how to read the first column</p>\n<pre><code>public static List&lt;String&gt; readColumnA(String filePath) {\n    List&lt;String&gt; movieList = new ArrayList&lt;&gt;();\n    try {\n        SpreadSheet spread = new SpreadSheet(new File(filePath));\n        //     System.out.println(&quot;Number of sheets: &quot; + spread.getNumSheets());\n        Sheet sheet = spread.getSheets().get(0);\n        //     System.out.println(&quot;In sheet &quot; + sheet.getName());\n        Range movies = sheet.getDataRange();\n        Object[][] movieColumn = movies.getValues();\n        for (int i = 0; i &lt; sheet.getMaxRows(); i++) {\n            movieList.add(movieColumn[i][0].toString());\n        }\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n    return movieList;\n}\n</code></pre>\n"}],"owner":{"account_id":9208364,"reputation":43,"user_id":6842700,"accept_rate":18,"display_name":"Kanagaraj"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2381,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1693587751,"creation_date":1499250447,"question_id":44923640,"body_markdown":"Is there any possibility of using ods(Open office spreadsheet) files for read and write data in selenium using java. I searched internet and i am not find any way. Pls anyone help me.","title":"Reading data from ods(Open office spreadsheet) for selenium in java","body":"<p>Is there any possibility of using ods(Open office spreadsheet) files for read and write data in selenium using java. I searched internet and i am not find any way. Pls anyone help me.</p>\n"},{"tags":["java","sharepoint","microsoft-graph-api"],"answers":[{"tags":[],"owner":{"account_id":367805,"reputation":143,"user_id":714212,"display_name":"rread"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1693586096,"creation_date":1693586096,"answer_id":77024738,"question_id":77002615,"body_markdown":"i was able to do this by searching for the index field associated with it\r\n\r\n    String queryStringTagged = String.format(&quot;STTagged=false AND isDocument=true AND RefinableString09=false AND path: \\&quot;%s\\&quot; &quot;, webUrl);\r\n\r\n\r\n ","title":"Search for files using Yes/No Custom Column, using GraphApi in Java","body":"<p>i was able to do this by searching for the index field associated with it</p>\n<pre><code>String queryStringTagged = String.format(&quot;STTagged=false AND isDocument=true AND RefinableString09=false AND path: \\&quot;%s\\&quot; &quot;, webUrl);\n</code></pre>\n"}],"owner":{"account_id":367805,"reputation":143,"user_id":714212,"display_name":"rread"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77024738,"answer_count":1,"score":0,"last_activity_date":1693586096,"creation_date":1693331881,"question_id":77002615,"body_markdown":"Is there a way i can do a search for files in a sharepoint site using a Custom Yes/No Column named Tagged?\r\nI am working with Java GraphApi SDK\r\n\r\nIt tried this but i does not seem to work, this is my base code so far. when i add the search tearm for the tagged field everything stop working. You can see the query with the tagged field in the second query string\r\n\r\n    SiteRequestBuilder sitereq = graphClient.sites(siteid);\r\n    String webUrl = sitereq.buildRequest().get().webUrl;\r\n    String queryString = String.format(&quot;isDocument=true AND processed=false AND path: \\&quot;%s\\&quot; &quot;, webUrl);\r\n    String queryStringTagged = String.format(&quot;STTagged=false AND isDocument=true AND processed=false AND path: \\&quot;%s\\&quot; &quot;, webUrl);\r\n    \r\n    LinkedList&lt;SearchRequest&gt; requestsList = new LinkedList&lt;&gt;();\r\n    SearchRequest requests = new SearchRequest();\r\n    \r\n    LinkedList&lt;EntityType&gt; entityTypesList = new LinkedList&lt;&gt;();\r\n    entityTypesList.add(EntityType.DRIVE_ITEM);\r\n    requests.entityTypes = entityTypesList;\r\n    \r\n    LinkedList&lt;SortProperty&gt; sortProperties = new LinkedList&lt;&gt;();\r\n    SortProperty sort = new SortProperty();\r\n    sort.name = &quot;LastModifiedTime&quot;;\r\n    sort.isDescending = false;\r\n    sortProperties.add(sort);\r\n    \r\n    SearchQuery query = new SearchQuery();\r\n    query.queryString = queryString;\r\n    requests.query = query;\r\n    requests.sortProperties = sortProperties;\r\n    requests.size = 500;\r\n    \r\n    requestsList.add(requests);\r\n    \r\n    SearchEntityQueryParameterSet sqp = SearchEntityQueryParameterSet\r\n                    .newBuilder()\r\n                    .withRequests(requestsList)\r\n                    .build();\r\n    \r\n    SearchEntityQueryCollectionRequest searchRequest = graphClient.search().query(sqp).buildRequest();\r\n    SearchEntityQueryCollectionPage searchResult = searchRequest.post();","title":"Search for files using Yes/No Custom Column, using GraphApi in Java","body":"<p>Is there a way i can do a search for files in a sharepoint site using a Custom Yes/No Column named Tagged?\nI am working with Java GraphApi SDK</p>\n<p>It tried this but i does not seem to work, this is my base code so far. when i add the search tearm for the tagged field everything stop working. You can see the query with the tagged field in the second query string</p>\n<pre><code>SiteRequestBuilder sitereq = graphClient.sites(siteid);\nString webUrl = sitereq.buildRequest().get().webUrl;\nString queryString = String.format(&quot;isDocument=true AND processed=false AND path: \\&quot;%s\\&quot; &quot;, webUrl);\nString queryStringTagged = String.format(&quot;STTagged=false AND isDocument=true AND processed=false AND path: \\&quot;%s\\&quot; &quot;, webUrl);\n\nLinkedList&lt;SearchRequest&gt; requestsList = new LinkedList&lt;&gt;();\nSearchRequest requests = new SearchRequest();\n\nLinkedList&lt;EntityType&gt; entityTypesList = new LinkedList&lt;&gt;();\nentityTypesList.add(EntityType.DRIVE_ITEM);\nrequests.entityTypes = entityTypesList;\n\nLinkedList&lt;SortProperty&gt; sortProperties = new LinkedList&lt;&gt;();\nSortProperty sort = new SortProperty();\nsort.name = &quot;LastModifiedTime&quot;;\nsort.isDescending = false;\nsortProperties.add(sort);\n\nSearchQuery query = new SearchQuery();\nquery.queryString = queryString;\nrequests.query = query;\nrequests.sortProperties = sortProperties;\nrequests.size = 500;\n\nrequestsList.add(requests);\n\nSearchEntityQueryParameterSet sqp = SearchEntityQueryParameterSet\n                .newBuilder()\n                .withRequests(requestsList)\n                .build();\n\nSearchEntityQueryCollectionRequest searchRequest = graphClient.search().query(sqp).buildRequest();\nSearchEntityQueryCollectionPage searchResult = searchRequest.post();\n</code></pre>\n"},{"tags":["java","date"],"comments":[{"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":4,"creation_date":1693575014,"post_id":77023476,"comment_id":135783086,"body_markdown":"Double check the seconds, milliseconds in the format string. You probably want `ss.SSSZ` at the end. Also: seriously think about ditching `Date`/`Calendar`/`SimpleDateFormat` and use the newer, saner APIs from `java.time`. And in the future: when something throws an exception **show us the exception**, don&#39;t keep it to yourself. It&#39;s useful information.","body":"Double check the seconds, milliseconds in the format string. You probably want <code>ss.SSSZ</code> at the end. Also: seriously think about ditching <code>Date</code>/<code>Calendar</code>/<code>SimpleDateFormat</code> and use the newer, saner APIs from <code>java.time</code>. And in the future: when something throws an exception <b>show us the exception</b>, don&#39;t keep it to yourself. It&#39;s useful information."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":5,"creation_date":1693575198,"post_id":77023476,"comment_id":135783122,"body_markdown":"Don&#39;t use `java.util.Date`. It&#39;s superseded by `java.time` classes. `java.time.ZonedDateTime.parse(&quot;2022-11-28T20:02:28.215Z&quot;);` works perfectly well","body":"Don&#39;t use <code>java.util.Date</code>. It&#39;s superseded by <code>java.time</code> classes. <code>java.time.ZonedDateTime.parse(&quot;2022-11-28T20:02:28.215Z&quot;);</code> works perfectly well"},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1693585415,"post_id":77023476,"comment_id":135785250,"body_markdown":"If I understand you correctly you are asking the impossible. A `Date` cannot have a time zone.","body":"If I understand you correctly you are asking the impossible. A <code>Date</code> cannot have a time zone."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":2,"creation_date":1693585862,"post_id":77023476,"comment_id":135785329,"body_markdown":"If you need an old-fashioned `Date`  object for a legacy API that you cannot upgrade to java.time just yet, still stay away from `SimpleDateFormat` since it is a notorious troublemaker of a class. Use the simple `Date.from(Instant.parse(&quot;2022-11-28T20:02:28.215Z&quot;))`. On my computer the resulting `Date` prints as `Mon Nov 28 21:02:28 CET 2022`. It hasn’t got a time zone but prints in my default time zone (this confuses many). Since I am 1 hour ahead of UTC in November, the parsed object is correct.","body":"If you need an old-fashioned <code>Date</code>  object for a legacy API that you cannot upgrade to java.time just yet, still stay away from <code>SimpleDateFormat</code> since it is a notorious troublemaker of a class. Use the simple <code>Date.from(Instant.parse(&quot;2022-11-28T20:02:28.215Z&quot;))</code>. On my computer the resulting <code>Date</code> prints as <code>Mon Nov 28 21:02:28 CET 2022</code>. It hasn’t got a time zone but prints in my default time zone (this confuses many). Since I am 1 hour ahead of UTC in November, the parsed object is correct."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1693605357,"post_id":77023476,"comment_id":135787900,"body_markdown":"`Instant.parse( &quot;2022-11-28T20:02:28.215Z&quot; ).atZone( ZoneId.of( &quot;Asia/Tokyo&quot; ) )` to get a `ZonedDateTime` object. To generate text, call `.format( DateTimeFormatter.ofLocalizedDateTime( FormatStyle.FULL ).withLocale( Locale.CANADA_FRENCH ) )` as seen [on Ideone.com](https://ideone.com/YBWBJ9).","body":"<code>Instant.parse( &quot;2022-11-28T20:02:28.215Z&quot; ).atZone( ZoneId.of( &quot;Asia&#47;Tokyo&quot; ) )</code> to get a <code>ZonedDateTime</code> object. To generate text, call <code>.format( DateTimeFormatter.ofLocalizedDateTime( FormatStyle.FULL ).withLocale( Locale.CANADA_FRENCH ) )</code> as seen <a href=\"https://ideone.com/YBWBJ9\" rel=\"nofollow noreferrer\">on Ideone.com</a>."}],"owner":{"account_id":21410522,"reputation":1,"user_id":15770855,"display_name":"Yarik83Men"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":77,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1693585238,"answer_count":0,"score":0,"last_activity_date":1693585980,"creation_date":1693574537,"question_id":77023476,"body_markdown":"Help me please convert string &quot;2022-11-28T20:02:28.215Z&quot; to Date with time zone jn java project. This variant throws exception\r\n\r\n    String DATE_FORMAT_WITH_TIME_ZONE = &quot;yyyy-MM-dd&#39;T&#39;HH:mm:sssZ&quot;;\r\n    public static Date parseString(String date) throws ParseException {\r\n        return new SimpleDateFormat(DATE_FORMAT_WITH_TIME_ZONE).parse(date);\r\n    }\r\n\r\n","title":"Convert string &quot;2022-11-28T20:02:28.215Z&quot; to Date with time zone","body":"<p>Help me please convert string &quot;2022-11-28T20:02:28.215Z&quot; to Date with time zone jn java project. This variant throws exception</p>\n<pre><code>String DATE_FORMAT_WITH_TIME_ZONE = &quot;yyyy-MM-dd'T'HH:mm:sssZ&quot;;\npublic static Date parseString(String date) throws ParseException {\n    return new SimpleDateFormat(DATE_FORMAT_WITH_TIME_ZONE).parse(date);\n}\n</code></pre>\n"},{"tags":["java","spring","spring-security","keycloak"],"answers":[{"tags":[],"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1693585699,"creation_date":1673609443,"answer_id":75108605,"question_id":75103990,"body_markdown":"There is no chance you get any info about current user from `AnonymousAuthenticationToken`: this implementation of `Authentication` is put in security-context when the request was not successfully authorized (user could not be identified). This means that either:\r\n- the wrong type of authorization (or no authorization at all) is attached to the request. This is the case for instance when an Bearer access token is provided but a session expected\r\n- `SecurityFilterChain` bean(s) is (or are) misconfigured. \r\n\r\nA quite common mistake lately is to write **client configuration** and then then send requests with `Bearer` header. When OAuth2 client conf (with `oauth2Login`) is used, incoming requests are authorized with session cookies, not access token. If you want the requests to your REST API be authorized with access tokens provided in a `Bearer` Authorization header, then you have to configure it as a **resource-server**.\r\n\r\nAnother common mistake relates to apps needing more than one authorization mechanism (OAuth2 client, OAuth2 resource server, Basic, etc.). In such cases, you should provide with a filter-chain bean for each. But if one of the first in `@Order`intercepts a request it shouldn&#39;t (misconfigured `securityMatcher`), then the security context initialization fails.\r\n\r\nFor basic info on how to configure Spring-boot 3 resource-server and client with Keycloak, see my answer to this question: [Use Keycloak Spring Adapter with Spring Boot 3][1]\r\n\r\nSpring-security default `Authentication` for successful OAuth2 authorization in resource-servers is `JwtAuthenticationToken` which return a `Jwt` instance as `principal`. You can get any access-token claim from this `Jwt` instance. Here is a sample with `preferred_username`. Open an access-token in a tool like https://jwt.io to find the name of the claim with the username value you are looking for (it could be as well `sub`, `email` or any private claim you configured in Keycloak)\r\n```java\r\n((Jwt) SecurityContextHolder.getContext().getAuthentication().getPrincipal()).getClaims().get(StandardClaimNames.PREFERRED_USERNAME);\r\n```\r\n\r\nIf you want `getPrincipal()` to return the username instead of a `Jwt` instance, you&#39;ll have to provide your own `Authentication` implementation. You might use `JwtAuthenticationToken` as a base (but this not the best option, see the note below):\r\n```java\r\npublic class MyAuthentication extends JwtAuthenticationToken {\r\n\tpublic MyAuthentication(Jwt jwt, Collection&lt;? extends GrantedAuthority&gt; authorities) {\r\n\t\tsuper(jwt, authorities);\r\n\t}\r\n\t\r\n\t@Override\r\n\tpublic String getPrincipal() {\r\n\t\treturn getToken().getClaimAsString(StandardClaimNames.PREFERRED_USERNAME);\r\n\t}\t\r\n}\r\n```\r\n\r\nJust adapt the `Jwt2AuthenticationConverter` from the answer I linked above\r\n```java\r\n@Bean\r\npublic Jwt2AuthenticationConverter authenticationConverter(Jwt2AuthoritiesConverter authoritiesConverter) {\r\n    return jwt -&gt; new MyAuthentication(jwt, authoritiesConverter.convert(jwt));\r\n}\r\n```\r\n\r\n# Important note\r\nYou&#39;d better use `authentication.getName()` instead of `authentication.getPrincipal()` to access username. `principal` is typed as `Object` in `Authentication` which makes your expressions very fragile: you can get absolutely any type of data as principal (depending on the type of authentication in the security context) and there are cases where you don&#39;t really control it (for instance with the `AnonymousAuthenticationToken` instance you currently have because of unauthorized request).\r\n\r\nHowever, `JwtAuthenticationToken::getName` returns subject (`sub` claim), so you&#39;ll still have to provide your own `Authentication` implementation for successful authorizations to return `preferred_username` in a new @Override of `getName()`. `MyAuthentication` would then be:\r\n```java\r\npublic class MyAuthentication extends JwtAuthenticationToken {\r\n\tpublic MyAuthentication(Jwt jwt, Collection&lt;? extends GrantedAuthority&gt; authorities) {\r\n\t\tsuper(jwt, authorities);\r\n\t}\r\n\t\r\n\t//Note that this time getName() is overriden instead of getPrincipal()\r\n\t@Override\r\n\tpublic String getName() {\r\n\t\treturn getToken().getClaimAsString(StandardClaimNames.PREFERRED_USERNAME);\r\n\t}\t\r\n}\r\n```\r\nUse the same `Jwt2AuthenticationConverter` bean to switch from default `JwtAuthenticationToken` to `MyAuthentication` in case of successful request authorization. \r\n\r\n  [1]: https://stackoverflow.com/a/74572732/619830","title":"Spring Boot with Spring Security and Keycloak only providing Anonymous Authentication Token","body":"<p>There is no chance you get any info about current user from <code>AnonymousAuthenticationToken</code>: this implementation of <code>Authentication</code> is put in security-context when the request was not successfully authorized (user could not be identified). This means that either:</p>\n<ul>\n<li>the wrong type of authorization (or no authorization at all) is attached to the request. This is the case for instance when an Bearer access token is provided but a session expected</li>\n<li><code>SecurityFilterChain</code> bean(s) is (or are) misconfigured.</li>\n</ul>\n<p>A quite common mistake lately is to write <strong>client configuration</strong> and then then send requests with <code>Bearer</code> header. When OAuth2 client conf (with <code>oauth2Login</code>) is used, incoming requests are authorized with session cookies, not access token. If you want the requests to your REST API be authorized with access tokens provided in a <code>Bearer</code> Authorization header, then you have to configure it as a <strong>resource-server</strong>.</p>\n<p>Another common mistake relates to apps needing more than one authorization mechanism (OAuth2 client, OAuth2 resource server, Basic, etc.). In such cases, you should provide with a filter-chain bean for each. But if one of the first in <code>@Order</code>intercepts a request it shouldn't (misconfigured <code>securityMatcher</code>), then the security context initialization fails.</p>\n<p>For basic info on how to configure Spring-boot 3 resource-server and client with Keycloak, see my answer to this question: <a href=\"https://stackoverflow.com/a/74572732/619830\">Use Keycloak Spring Adapter with Spring Boot 3</a></p>\n<p>Spring-security default <code>Authentication</code> for successful OAuth2 authorization in resource-servers is <code>JwtAuthenticationToken</code> which return a <code>Jwt</code> instance as <code>principal</code>. You can get any access-token claim from this <code>Jwt</code> instance. Here is a sample with <code>preferred_username</code>. Open an access-token in a tool like <a href=\"https://jwt.io\" rel=\"nofollow noreferrer\">https://jwt.io</a> to find the name of the claim with the username value you are looking for (it could be as well <code>sub</code>, <code>email</code> or any private claim you configured in Keycloak)</p>\n<pre class=\"lang-java prettyprint-override\"><code>((Jwt) SecurityContextHolder.getContext().getAuthentication().getPrincipal()).getClaims().get(StandardClaimNames.PREFERRED_USERNAME);\n</code></pre>\n<p>If you want <code>getPrincipal()</code> to return the username instead of a <code>Jwt</code> instance, you'll have to provide your own <code>Authentication</code> implementation. You might use <code>JwtAuthenticationToken</code> as a base (but this not the best option, see the note below):</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class MyAuthentication extends JwtAuthenticationToken {\n    public MyAuthentication(Jwt jwt, Collection&lt;? extends GrantedAuthority&gt; authorities) {\n        super(jwt, authorities);\n    }\n    \n    @Override\n    public String getPrincipal() {\n        return getToken().getClaimAsString(StandardClaimNames.PREFERRED_USERNAME);\n    }   \n}\n</code></pre>\n<p>Just adapt the <code>Jwt2AuthenticationConverter</code> from the answer I linked above</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\npublic Jwt2AuthenticationConverter authenticationConverter(Jwt2AuthoritiesConverter authoritiesConverter) {\n    return jwt -&gt; new MyAuthentication(jwt, authoritiesConverter.convert(jwt));\n}\n</code></pre>\n<h1>Important note</h1>\n<p>You'd better use <code>authentication.getName()</code> instead of <code>authentication.getPrincipal()</code> to access username. <code>principal</code> is typed as <code>Object</code> in <code>Authentication</code> which makes your expressions very fragile: you can get absolutely any type of data as principal (depending on the type of authentication in the security context) and there are cases where you don't really control it (for instance with the <code>AnonymousAuthenticationToken</code> instance you currently have because of unauthorized request).</p>\n<p>However, <code>JwtAuthenticationToken::getName</code> returns subject (<code>sub</code> claim), so you'll still have to provide your own <code>Authentication</code> implementation for successful authorizations to return <code>preferred_username</code> in a new @Override of <code>getName()</code>. <code>MyAuthentication</code> would then be:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class MyAuthentication extends JwtAuthenticationToken {\n    public MyAuthentication(Jwt jwt, Collection&lt;? extends GrantedAuthority&gt; authorities) {\n        super(jwt, authorities);\n    }\n    \n    //Note that this time getName() is overriden instead of getPrincipal()\n    @Override\n    public String getName() {\n        return getToken().getClaimAsString(StandardClaimNames.PREFERRED_USERNAME);\n    }   \n}\n</code></pre>\n<p>Use the same <code>Jwt2AuthenticationConverter</code> bean to switch from default <code>JwtAuthenticationToken</code> to <code>MyAuthentication</code> in case of successful request authorization.</p>\n"}],"owner":{"account_id":16708758,"reputation":13,"user_id":12076548,"display_name":"jonathan-lee-devel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1992,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":75108605,"answer_count":1,"score":0,"last_activity_date":1693585699,"creation_date":1673573355,"question_id":75103990,"body_markdown":"so I followed a guide which set up Keycloak to secure my Spring Boot REST API with Spring Security. Previously, my application relied on a standard user details service to authenticate users. My code relies on being able to access the currently logged-in user&#39;s username. However, now that I switched to Keycloak, I only receive the username &#39;anonymousUser&#39;.\r\n\r\nHow do I configure this correctly for the following code to return the preferred username:\r\n\r\n\r\n`public static String getCurrentUsername() { `\r\n\r\n`return (String) SecurityContextHolder.getContext().getAuthentication().getPrincipal(); `\r\n\r\n`}`\r\n\r\nI tried to modify the configuration of the client and user on Keycloak, but even for example, adding roles has no effect. Spring Boot only returns the role of [ANONYMOUS_USER].","title":"Spring Boot with Spring Security and Keycloak only providing Anonymous Authentication Token","body":"<p>so I followed a guide which set up Keycloak to secure my Spring Boot REST API with Spring Security. Previously, my application relied on a standard user details service to authenticate users. My code relies on being able to access the currently logged-in user's username. However, now that I switched to Keycloak, I only receive the username 'anonymousUser'.</p>\n<p>How do I configure this correctly for the following code to return the preferred username:</p>\n<p><code>public static String getCurrentUsername() { </code></p>\n<p><code>return (String) SecurityContextHolder.getContext().getAuthentication().getPrincipal(); </code></p>\n<p><code>}</code></p>\n<p>I tried to modify the configuration of the client and user on Keycloak, but even for example, adding roles has no effect. Spring Boot only returns the role of [ANONYMOUS_USER].</p>\n"},{"tags":["java","tree","xul","zk"],"answers":[{"tags":[],"owner":{"account_id":1994592,"reputation":3290,"user_id":1787809,"accept_rate":78,"display_name":"Nabil A."},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1359445889,"creation_date":1359445889,"answer_id":14578045,"question_id":14577824,"body_markdown":"Use \r\n\r\n    setMultiple(true)\r\n\r\non the model instance returned by `vm.employeeTreeModel` not the tree it self.&lt;br&gt;\r\n\r\nIf you want just some to be checkable, change this\r\n\r\n    &lt;treeitem checkable=&quot;true&quot;&gt;\r\n\r\nto something like that\r\n\r\n    &lt;treeitem checkable=&quot;@load(node.checkable)&quot;&gt;","title":"I want to show checkboxes for selected tree nodes only but I am getting radiobuttons for every element in the tree","body":"<p>Use </p>\n\n<pre><code>setMultiple(true)\n</code></pre>\n\n<p>on the model instance returned by <code>vm.employeeTreeModel</code> not the tree it self.<br></p>\n\n<p>If you want just some to be checkable, change this</p>\n\n<pre><code>&lt;treeitem checkable=\"true\"&gt;\n</code></pre>\n\n<p>to something like that</p>\n\n<pre><code>&lt;treeitem checkable=\"@load(node.checkable)\"&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13091561,"reputation":962,"user_id":9458852,"display_name":"amarildo.xyz"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693585027,"creation_date":1693585027,"answer_id":77024636,"question_id":14577824,"body_markdown":"With the help of @Nabil A. answer, I found out that if you&#39;re using TreeitemRenderer, you need to set multiples like this:\r\n\r\n    public class MyItemRenderer implements TreeitemRenderer&lt;DefaultTreeNode&lt;MyObj&gt;&gt; {\r\n        public void render(final Treeitem item, DefaultTreeNode&lt;MyObj&gt; data, int index) {\r\n            data.getModel().setMultiple(true);\r\n            //rest of the code...\r\n        }\r\n    }","title":"I want to show checkboxes for selected tree nodes only but I am getting radiobuttons for every element in the tree","body":"<p>With the help of @Nabil A. answer, I found out that if you're using TreeitemRenderer, you need to set multiples like this:</p>\n<pre><code>public class MyItemRenderer implements TreeitemRenderer&lt;DefaultTreeNode&lt;MyObj&gt;&gt; {\n    public void render(final Treeitem item, DefaultTreeNode&lt;MyObj&gt; data, int index) {\n        data.getModel().setMultiple(true);\n        //rest of the code...\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":302612,"reputation":956,"user_id":611077,"accept_rate":86,"display_name":"Jatin Sehgal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1327,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":14578045,"answer_count":2,"score":0,"last_activity_date":1693585027,"creation_date":1359444831,"question_id":14577824,"body_markdown":"Here is my code \r\n\r\n\r\n    &lt;?page title=&quot;MVVM Tree POC&quot;?&gt;\r\n    &lt;zk&gt;\r\n    \t&lt;borderlayout height=&quot;800px&quot;&gt;\r\n    \t\t&lt;west size=&quot;25%&quot;&gt;&lt;/west&gt;\r\n    \t\t&lt;center&gt;\r\n    \t\t\t&lt;window apply=&quot;org.zkoss.bind.BindComposer&quot;\r\n    \t\t\t\tviewModel=&quot;@id(&#39;vm&#39;) @init(&#39;com.nagarro.controller.TreeController&#39;)&quot;\r\n    \t\t\t\ttitle=&quot;Dynamic Tree&quot; border=&quot;normal&quot;&gt;\r\n    \t\t\t\t&lt;tree multiple=&quot;true&quot; checkmark=&quot;true&quot; rows=&quot;5&quot;\r\n    \t\t\t\t\tmodel=&quot;@bind(vm.employeeTreeModel)&quot;&gt;\r\n    \t\t\t\t\t&lt;treecols&gt;\r\n    \t\t\t\t\t\t&lt;treecol label=&quot;First Name&quot; align=&quot;center&quot; /&gt;\r\n    \t\t\t\t\t\t&lt;treecol label=&quot;Last Name&quot; align=&quot;center&quot; /&gt;\r\n    \t\t\t\t\t\t&lt;treecol label=&quot;Age&quot; align=&quot;center&quot; /&gt;\r\n    \t\t\t\t\t\t&lt;treecol label=&quot;Index&quot; align=&quot;center&quot; /&gt;\r\n    \t\t\t\t\t&lt;/treecols&gt;\r\n    \t\t\t\t\t&lt;template name=&quot;model&quot; var=&quot;node&quot; status=&quot;s&quot;&gt;\r\n    \t\t\t\t\t\t&lt;treeitem checkable=&quot;true&quot;&gt;\r\n    \t\t\t\t\t\t\t&lt;treerow style=&quot;text-align:center;&quot;&gt;\r\n    \t\t\t\t\t\t\t\t&lt;treecell\r\n    \t\t\t\t\t\t\t\t\tlabel=&quot;@bind(node.data.firstName)&quot; style=&quot;text-align:left;&quot; /&gt;\r\n    \t\t\t\t\t\t\t\t&lt;treecell\r\n    \t\t\t\t\t\t\t\t\tlabel=&quot;@bind(node.data.lastName)&quot; /&gt;\r\n    \t\t\t\t\t\t\t\t&lt;treecell label=&quot;@bind(node.data.age)&quot; /&gt;\r\n    \t\t\t\t\t\t\t\t&lt;treecell label=&quot;@bind(s.index)&quot; /&gt;\r\n    \t\t\t\t\t\t\t&lt;/treerow&gt;\r\n    \r\n    \t\t\t\t\t\t&lt;/treeitem&gt;\r\n    \t\t\t\t\t&lt;/template&gt;\r\n    \t\t\t\t&lt;/tree&gt;\r\n    \r\n    \t\t\t&lt;/window&gt;\r\n    \t\t&lt;/center&gt;\r\n    \t&lt;/borderlayout&gt;\r\n    &lt;/zk&gt;\r\n\r\nI checked the zkoss [reference][1] for the multiple selection property and made the necessary changes in the above zul file. Still it doesnt show checkboxes. Instead it shows only radiobuttons. \r\n\r\n**Also, I want to show checkboxes in front of some selected tree nodes and not all of them.** \r\n\r\n\r\n  [1]: http://books.zkoss.org/wiki/ZK_Component_Reference/Data/Tree","title":"I want to show checkboxes for selected tree nodes only but I am getting radiobuttons for every element in the tree","body":"<p>Here is my code </p>\n\n<pre><code>&lt;?page title=\"MVVM Tree POC\"?&gt;\n&lt;zk&gt;\n    &lt;borderlayout height=\"800px\"&gt;\n        &lt;west size=\"25%\"&gt;&lt;/west&gt;\n        &lt;center&gt;\n            &lt;window apply=\"org.zkoss.bind.BindComposer\"\n                viewModel=\"@id('vm') @init('com.nagarro.controller.TreeController')\"\n                title=\"Dynamic Tree\" border=\"normal\"&gt;\n                &lt;tree multiple=\"true\" checkmark=\"true\" rows=\"5\"\n                    model=\"@bind(vm.employeeTreeModel)\"&gt;\n                    &lt;treecols&gt;\n                        &lt;treecol label=\"First Name\" align=\"center\" /&gt;\n                        &lt;treecol label=\"Last Name\" align=\"center\" /&gt;\n                        &lt;treecol label=\"Age\" align=\"center\" /&gt;\n                        &lt;treecol label=\"Index\" align=\"center\" /&gt;\n                    &lt;/treecols&gt;\n                    &lt;template name=\"model\" var=\"node\" status=\"s\"&gt;\n                        &lt;treeitem checkable=\"true\"&gt;\n                            &lt;treerow style=\"text-align:center;\"&gt;\n                                &lt;treecell\n                                    label=\"@bind(node.data.firstName)\" style=\"text-align:left;\" /&gt;\n                                &lt;treecell\n                                    label=\"@bind(node.data.lastName)\" /&gt;\n                                &lt;treecell label=\"@bind(node.data.age)\" /&gt;\n                                &lt;treecell label=\"@bind(s.index)\" /&gt;\n                            &lt;/treerow&gt;\n\n                        &lt;/treeitem&gt;\n                    &lt;/template&gt;\n                &lt;/tree&gt;\n\n            &lt;/window&gt;\n        &lt;/center&gt;\n    &lt;/borderlayout&gt;\n&lt;/zk&gt;\n</code></pre>\n\n<p>I checked the zkoss <a href=\"http://books.zkoss.org/wiki/ZK_Component_Reference/Data/Tree\" rel=\"nofollow\">reference</a> for the multiple selection property and made the necessary changes in the above zul file. Still it doesnt show checkboxes. Instead it shows only radiobuttons. </p>\n\n<p><strong>Also, I want to show checkboxes in front of some selected tree nodes and not all of them.</strong> </p>\n"},{"tags":["java","docker","elasticsearch"],"answers":[{"comments":[{"owner":{"account_id":979501,"reputation":10056,"user_id":999617,"accept_rate":36,"display_name":"Vincent Decaux"},"score":1,"creation_date":1610716740,"post_id":60635732,"comment_id":116226849,"body_markdown":"Save a big day, I tried to upgrade from 6.x to 7.x and I didn&#39;t understand the error...","body":"Save a big day, I tried to upgrade from 6.x to 7.x and I didn&#39;t understand the error..."}],"tags":[],"owner":{"account_id":1023013,"reputation":16655,"user_id":1032890,"accept_rate":100,"display_name":"GeertPt"},"comment_count":1,"down_vote_count":0,"up_vote_count":13,"is_accepted":true,"score":13,"last_activity_date":1583928608,"creation_date":1583928608,"answer_id":60635732,"question_id":60635350,"body_markdown":"Elasticsearch does some bootstrap checks on startup. If you want to start it as a single node in Docker, you need to disable these, or it will not open the TCP/IP port.\r\n\r\nThis can be done by specifying an environment parameter: **discovery.type=single-node**.\r\n\r\n    services:\r\n      es:\r\n        image: docker.elastic.co/elasticsearch/elasticsearch:7.6.1\r\n        ports:\r\n          - &quot;9200:9200&quot;\r\n          - &quot;9300:9300&quot;\r\n        environment:\r\n          - discovery.type=single-node","title":"Connection Refused connecting from docker to Elasticsearch docker container","body":"<p>Elasticsearch does some bootstrap checks on startup. If you want to start it as a single node in Docker, you need to disable these, or it will not open the TCP/IP port.</p>\n\n<p>This can be done by specifying an environment parameter: <strong>discovery.type=single-node</strong>.</p>\n\n<pre><code>services:\n  es:\n    image: docker.elastic.co/elasticsearch/elasticsearch:7.6.1\n    ports:\n      - \"9200:9200\"\n      - \"9300:9300\"\n    environment:\n      - discovery.type=single-node\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5151805,"reputation":53,"user_id":4126218,"display_name":"codediesel"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1693584076,"creation_date":1693584076,"answer_id":77024552,"question_id":60635350,"body_markdown":"On new version you need to disable the \r\nxpack.security.enabled=false\r\n\r\n    services:\r\n       elasticsearch:\r\n       image: docker.elastic.co/elasticsearch/elasticsearch:8.4.3\r\n       container_name: elasticsearch\r\n       environment:\r\n         - cluster.name=es\r\n         - discovery.type=single-node\r\n         - &quot;ES_JAVA_OPTS=-Xms512m -Xmx512m&quot;\r\n         - xpack.security.enabled=false\r\n      ports:\r\n        - 9200:9200\r\n        - 9300:9300\r\n      volumes:\r\n         - ./esdata-8:/var/lib/elasticsearch/data\r\n\r\n\r\n","title":"Connection Refused connecting from docker to Elasticsearch docker container","body":"<p>On new version you need to disable the\nxpack.security.enabled=false</p>\n<pre><code>services:\n   elasticsearch:\n   image: docker.elastic.co/elasticsearch/elasticsearch:8.4.3\n   container_name: elasticsearch\n   environment:\n     - cluster.name=es\n     - discovery.type=single-node\n     - &quot;ES_JAVA_OPTS=-Xms512m -Xmx512m&quot;\n     - xpack.security.enabled=false\n  ports:\n    - 9200:9200\n    - 9300:9300\n  volumes:\n     - ./esdata-8:/var/lib/elasticsearch/data\n</code></pre>\n"}],"owner":{"account_id":13369561,"reputation":181,"user_id":9648495,"display_name":"WhiteW"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10788,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"accepted_answer_id":60635732,"answer_count":2,"score":12,"last_activity_date":1693584076,"creation_date":1583927357,"question_id":60635350,"body_markdown":"I am trying to access Elasticsearch database inside a container from a Java application which is also inside a container.\r\n\r\nBoth of them are in the following docker-compose.yml:\r\n\r\n    version: &quot;3.7&quot;\r\n    services:\r\n      es:\r\n        image: docker.elastic.co/elasticsearch/elasticsearch:7.6.1\r\n        ports:\r\n          - &quot;9200:9200&quot;\r\n          - &quot;9300:9300&quot;\r\n        networks:\r\n          - elastic\r\n    \r\n      java-app:\r\n        image: neileen/dockerhub_app:java-latest\r\n        ports:\r\n          - &quot;8080:8080&quot;\r\n        depends_on:\r\n          - es\r\n        networks:\r\n          - elastic\r\n    \r\n    networks:\r\n      elastic:\r\n        driver: bridge\r\n\r\nAs you can see, I use a bridge network to make the containers visible and accessible to one another.\r\n\r\nIn my Java Application I use RestHighLevelClient:\r\n\r\n    RestHighLevelClient client = new RestHighLevelClient(\r\n                        RestClient.builder(\r\n                                new HttpHost(&quot;es&quot;, 9200, &quot;http&quot;)));\r\n\r\nI also tried using &quot;localhost&quot; and &quot;0.0.0.0&quot; as the hostname instead of &quot;es&quot; with no result.\r\n\r\nThe exception that I keep getting is:\r\n\r\n    java-app_1     | The cluster is unhealthy: Connection refused\r\n    java-app_1     | java.net.ConnectException: Connection refused\r\n    java-app_1     |        at org.elasticsearch.client.RestClient.extractAndWrapCause(RestClient.java:804)\r\n    java-app_1     |        at org.elasticsearch.client.RestClient.performRequest(RestClient.java:225)\r\n    java-app_1     |        at org.elasticsearch.client.RestClient.performRequest(RestClient.java:212)\r\n\r\nI am aware that this is a problem related to the port 9200 not being visible inside the java-app container but I do not know where the problem is as I already provided a custom network and used the container name as the hostname.\r\n\r\nNote\r\n\r\n&gt; ES is accessible through &quot;http://localhost:9200&quot;\r\n\r\nThank you in advance.\r\n\r\n","title":"Connection Refused connecting from docker to Elasticsearch docker container","body":"<p>I am trying to access Elasticsearch database inside a container from a Java application which is also inside a container.</p>\n\n<p>Both of them are in the following docker-compose.yml:</p>\n\n<pre><code>version: \"3.7\"\nservices:\n  es:\n    image: docker.elastic.co/elasticsearch/elasticsearch:7.6.1\n    ports:\n      - \"9200:9200\"\n      - \"9300:9300\"\n    networks:\n      - elastic\n\n  java-app:\n    image: neileen/dockerhub_app:java-latest\n    ports:\n      - \"8080:8080\"\n    depends_on:\n      - es\n    networks:\n      - elastic\n\nnetworks:\n  elastic:\n    driver: bridge\n</code></pre>\n\n<p>As you can see, I use a bridge network to make the containers visible and accessible to one another.</p>\n\n<p>In my Java Application I use RestHighLevelClient:</p>\n\n<pre><code>RestHighLevelClient client = new RestHighLevelClient(\n                    RestClient.builder(\n                            new HttpHost(\"es\", 9200, \"http\")));\n</code></pre>\n\n<p>I also tried using \"localhost\" and \"0.0.0.0\" as the hostname instead of \"es\" with no result.</p>\n\n<p>The exception that I keep getting is:</p>\n\n<pre><code>java-app_1     | The cluster is unhealthy: Connection refused\njava-app_1     | java.net.ConnectException: Connection refused\njava-app_1     |        at org.elasticsearch.client.RestClient.extractAndWrapCause(RestClient.java:804)\njava-app_1     |        at org.elasticsearch.client.RestClient.performRequest(RestClient.java:225)\njava-app_1     |        at org.elasticsearch.client.RestClient.performRequest(RestClient.java:212)\n</code></pre>\n\n<p>I am aware that this is a problem related to the port 9200 not being visible inside the java-app container but I do not know where the problem is as I already provided a custom network and used the container name as the hostname.</p>\n\n<p>Note</p>\n\n<blockquote>\n  <p>ES is accessible through \"<a href=\"http://localhost:9200\" rel=\"noreferrer\">http://localhost:9200</a>\"</p>\n</blockquote>\n\n<p>Thank you in advance.</p>\n"},{"tags":["java","mysql","hibernate","date","jpa"],"comments":[{"owner":{"account_id":1268556,"reputation":48088,"user_id":1225328,"accept_rate":93,"display_name":"sp00m"},"score":0,"creation_date":1417527173,"post_id":27250720,"comment_id":42975510,"body_markdown":"Could you provide the `hotels` table schema (i.e. the `CREATE TABLE hotels...` query)?","body":"Could you provide the <code>hotels</code> table schema (i.e. the <code>CREATE TABLE hotels...</code> query)?"},{"owner":{"account_id":2908151,"reputation":11425,"user_id":2492977,"accept_rate":75,"display_name":"No Idea For Name"},"score":0,"creation_date":1417527418,"post_id":27250720,"comment_id":42975670,"body_markdown":"Could you provide the MySql table description?","body":"Could you provide the MySql table description?"},{"owner":{"account_id":1638661,"reputation":2399,"user_id":1511531,"display_name":"Semih Eker"},"score":1,"creation_date":1417527532,"post_id":27250720,"comment_id":42975735,"body_markdown":"It could be about java.util.Date. Maybe this post helps you http://stackoverflow.com/questions/2305973/java-util-date-vs-java-sql-date","body":"It could be about java.util.Date. Maybe this post helps you <a href=\"http://stackoverflow.com/questions/2305973/java-util-date-vs-java-sql-date\" title=\"java util date vs java sql date\">stackoverflow.com/questions/2305973/&hellip;</a>"},{"owner":{"account_id":2908151,"reputation":11425,"user_id":2492977,"accept_rate":75,"display_name":"No Idea For Name"},"score":2,"creation_date":1417527628,"post_id":27250720,"comment_id":42975799,"body_markdown":"try using java.sql.Date please and lemme know if it helped","body":"try using java.sql.Date please and lemme know if it helped"},{"owner":{"account_id":5046430,"reputation":309,"user_id":4052277,"accept_rate":50,"display_name":"Cooler"},"score":0,"creation_date":1417528061,"post_id":27250720,"comment_id":42976028,"body_markdown":"changed field in entity to java.sql.Date and added it to query, doesnt help :(  I guess Mysql gets date in another format, for instance: (dd-mm-yyyy)","body":"changed field in entity to java.sql.Date and added it to query, doesnt help :(  I guess Mysql gets date in another format, for instance: (dd-mm-yyyy)"},{"owner":{"account_id":1482116,"reputation":27381,"user_id":1391249,"accept_rate":84,"display_name":"Tiny"},"score":0,"creation_date":1417528565,"post_id":27250720,"comment_id":42976361,"body_markdown":"The `@Id` annotation on many columns including the `Date` field? Did you decorate the `Date` field by the `@Temporal` annotation such as `@Temporal(TemporalType.Timestamp)` or `@Temporal(TemporalType.DATE)` in your real code?","body":"The <code>@Id</code> annotation on many columns including the <code>Date</code> field? Did you decorate the <code>Date</code> field by the <code>@Temporal</code> annotation such as <code>@Temporal(TemporalType.Timestamp)</code> or <code>@Temporal(TemporalType.DATE)</code> in your real code?"},{"owner":{"account_id":5046430,"reputation":309,"user_id":4052277,"accept_rate":50,"display_name":"Cooler"},"score":0,"creation_date":1417528843,"post_id":27250720,"comment_id":42976534,"body_markdown":"nope! Let me check it.","body":"nope! Let me check it."},{"owner":{"account_id":5046430,"reputation":309,"user_id":4052277,"accept_rate":50,"display_name":"Cooler"},"score":0,"creation_date":1417529781,"post_id":27250720,"comment_id":42977147,"body_markdown":"Should i write my field as String but add a @Temporal(TemporalType.DATE)?\n\nI changed my field to java.util.Date and add this annotation, still doesnt work","body":"Should i write my field as String but add a @Temporal(TemporalType.DATE)?  I changed my field to java.util.Date and add this annotation, still doesnt work"},{"owner":{"account_id":1482116,"reputation":27381,"user_id":1391249,"accept_rate":84,"display_name":"Tiny"},"score":0,"creation_date":1417530257,"post_id":27250720,"comment_id":42977464,"body_markdown":"It is `Date` (not `String`). This should work unless other concerns (like some configurations) are involved. http://en.wikibooks.org/wiki/Java_Persistence/Basic_Attributes#Temporal.2C_Dates.2C_Times.2C_Timestamps_and_Calendars","body":"It is <code>Date</code> (not <code>String</code>). This should work unless other concerns (like some configurations) are involved. <a href=\"http://en.wikibooks.org/wiki/Java_Persistence/Basic_Attributes#Temporal.2C_Dates.2C_Times.2C_Timestamps_and_Calendars\" rel=\"nofollow noreferrer\">en.wikibooks.org/wiki/Java_Persistence/&hellip;</a>"},{"owner":{"account_id":5046430,"reputation":309,"user_id":4052277,"accept_rate":50,"display_name":"Cooler"},"score":0,"creation_date":1417532353,"post_id":27250720,"comment_id":42978805,"body_markdown":"Ok, i checked it on another table, it works even with java.util.Date.\nI didnt mention, that im using 3 parameters in primary key, therefore i have three id annotation. I will add more details to my topic.","body":"Ok, i checked it on another table, it works even with java.util.Date. I didnt mention, that im using 3 parameters in primary key, therefore i have three id annotation. I will add more details to my topic."},{"owner":{"account_id":1321086,"reputation":4305,"user_id":1266906,"display_name":"TheConstructor"},"score":0,"creation_date":1417532374,"post_id":27250720,"comment_id":42978820,"body_markdown":"Does your JDBC-URL contain `useServerPrepStmts=true`? Try changing it to `useServerPrepStmts=false` and if possible post the URL/Params. See http://stackoverflow.com/a/25135670/1266906","body":"Does your JDBC-URL contain <code>useServerPrepStmts=true</code>? Try changing it to <code>useServerPrepStmts=false</code> and if possible post the URL/Params. See <a href=\"http://stackoverflow.com/a/25135670/1266906\">stackoverflow.com/a/25135670/1266906</a>"},{"owner":{"account_id":2307160,"reputation":358,"user_id":2026214,"display_name":"Jama Djafarov"},"score":0,"creation_date":1417533137,"post_id":27250720,"comment_id":42979290,"body_markdown":"I think Tiny is right. 1) Keep java.utils.Date; 2) add @Temporal(TemporalType.DATE); 3) enable SQL trace to see the actual SQL statement.","body":"I think Tiny is right. 1) Keep java.utils.Date; 2) add @Temporal(TemporalType.DATE); 3) enable SQL trace to see the actual SQL statement."}],"answers":[{"tags":[],"owner":{"account_id":5025776,"reputation":1,"user_id":4037815,"display_name":"Kaushik Gopalakrishnan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1417535041,"creation_date":1417535041,"answer_id":27253355,"question_id":27250720,"body_markdown":"If you are using Java date, your named parameter day  is set as Date with time stamp. So for confirming this, enable the hibernate logs to print sql parameters value\r\n\r\nlog4j.logger.org.hibernate.type=trace\r\n\r\nReference : https://stackoverflow.com/questions/1710476/print-query-string-in-hibernate-with-parameter-values\r\n\r\n\r\nYou can try to use the below query:\r\n&quot;Select h FROM Hotels h where h.roomId=:roomId and h.hotelId=:hotelId and h.day=DATE_FORMAT(:day,format)&quot;\r\n\r\n\r\nThe disadvantage of using the DATE_FORMAT function will have performance hit in your records retrieval if you have millions of records in hotels table.\r\n\r\nSo converting to string in java level and setting the same in named parameter is better option.\r\n\r\n\r\n","title":"query with date using entity manager","body":"<p>If you are using Java date, your named parameter day  is set as Date with time stamp. So for confirming this, enable the hibernate logs to print sql parameters value</p>\n\n<p>log4j.logger.org.hibernate.type=trace</p>\n\n<p>Reference : <a href=\"https://stackoverflow.com/questions/1710476/print-query-string-in-hibernate-with-parameter-values\">How to print a query string with parameter values when using Hibernate</a></p>\n\n<p>You can try to use the below query:\n\"Select h FROM Hotels h where h.roomId=:roomId and h.hotelId=:hotelId and h.day=DATE_FORMAT(:day,format)\"</p>\n\n<p>The disadvantage of using the DATE_FORMAT function will have performance hit in your records retrieval if you have millions of records in hotels table.</p>\n\n<p>So converting to string in java level and setting the same in named parameter is better option.</p>\n"}],"owner":{"account_id":5046430,"reputation":309,"user_id":4052277,"accept_rate":50,"display_name":"Cooler"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":10986,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1693584065,"creation_date":1417527065,"question_id":27250720,"body_markdown":"**Backgound: i use JPA (hibernate impl) + spring**\r\nI have two tables, the first one is ok, it has one primary key and it works even with java.Util.Date fields. Another one has 3 parameters in primary key(it is first time i work with it):\r\n\r\n    PRIMARY KEY (`id_room`,`id_hotel`,`day`),\r\n\r\nFull schema:\r\n\r\n    CREATE TABLE `hotels` (\r\n      `id_room` int(11) NOT NULL DEFAULT &#39;0&#39;,\r\n      `id_hotel` int(11) NOT NULL DEFAULT &#39;0&#39;,\r\n      `day` date NOT NULL,\r\n      PRIMARY KEY (`id_room`,`id_hotel`,`day`),\r\n      KEY `id_hotel` (`id_hotel`,`day`),\r\n      KEY `day` (`day`),\r\n      KEY `day-hotel` (`day`,`id_hotel`),\r\n      KEY `hotel` (`id_hotel`)\r\n    ) ENGINE=MyISAM DEFAULT CHARSET=utf8;\r\n\r\nSo i added code to my Entity:\r\n\r\n    @Entity @IdClass(HotelId.class)\r\n    @Table(name=&quot;hotels&quot;)\r\n    public class Hotels implements Serializable {\r\n        private static final Long serialVersionUID = 1L;\r\n    \r\n        @Id\r\n        @Column(name=&quot;id_room&quot;)\r\n        private int roomId;\r\n        @Id\r\n        @Column(name=&quot;id_hotel&quot;)\r\n        private int hotelId;\r\n        @Id\r\n        @Temporal(TemporalType.DATE)\r\n        private Date day;\r\n    ....\r\n\r\n**HotelId.class**\r\n\r\n    public class HotelId implements Serializable {\r\n        private int roomId;\r\n        private int hotelId;\r\n        private Date day;\r\n    \r\n        public HotelId() {\r\n        }\r\n    \r\n        public HotelId(int roomId, int hotelId, Date day) {\r\n            this.roomId = roomId;\r\n            this.hotelId = hotelId;\r\n            this.day = day;\r\n        }\r\n    \r\n        public int getRoomId() {\r\n            return roomId;\r\n        }\r\n    \r\n        public int getHotelId() {\r\n            return hotelId;\r\n        }\r\n    \r\n        public Date getDay() {\r\n            return day;\r\n        }\r\n    }\r\n\r\nWith this entity i stuck for a long time:\r\n\r\nI spent almost all day today for this problem.\r\nI have database with date column in format(yyyy-mm-dd).\r\nI also have entity class in project with java.util.Date date field.\r\nNow i&#39;m trying to make a select:\r\n\r\n    TypedQuery query = em.createQuery(&quot;Select h FROM Hotels h where h.roomId=:roomId and h.hotelId=:hotelId and h.day=:day&quot;, Hotels.class);\r\n    query.setParameter(&quot;roomId&quot;, roomId);\r\n    query.setParameter(&quot;hotelId&quot;, hotelId);\r\n    query.setParameter(&quot;day&quot;, date);\r\n\r\nIt says there is no data\r\n\r\nNow i change date field from java.util.Date to String and change my query:\r\n\r\n    TypedQuery query = em.createQuery(&quot;Select h FROM Hotels h where h.roomId=:roomId and h.hotelId=:hotelId and h.day=:day&quot;, Hotels.class);\r\n    query.setParameter(&quot;roomId&quot;, roomId);\r\n    query.setParameter(&quot;hotelId&quot;, hotelId);\r\n    query.setParameter(&quot;day&quot;, new SimpleDateFormat(&quot;yyyy-mm-dd&quot;).format(date));\r\n\r\nIt finds data.\r\n\r\nThe question is how to send date(java.util.Date) to MySql DB and get back an information?\r\n\r\nUpdate:\r\n----\r\n\r\nIt doesnt work also\r\n\r\n    @Entity \r\n        @Table(name=&quot;hotels&quot;)\r\n        public class Hotels implements Serializable {\r\n            private static final Long serialVersionUID = 1L;\r\n        \r\n            @Id\r\n            private int id;\r\n            @Column(name=&quot;id_room&quot;)\r\n            private int roomId;\r\n           \r\n            @Column(name=&quot;id_hotel&quot;)\r\n            private int hotelId;\r\n       \r\n            private java.sql.Date day;\r\n            ....\r\n        }\r\n\r\nQuery:\r\n\r\n        java.sql.Date sqlDate = new java.sql.Date(day.getTime());\r\n        TypedQuery query = em.createQuery(&quot;Select h FROM Hotels h where h.roomId=:roomId and h.hotelId=:hotelId and h.day=:day&quot;, Hotels.class);\r\n    query.setParameter(&quot;roomId&quot;, roomId);\r\n    query.setParameter(&quot;hotelId&quot;, hotelId);\r\n                query.setParameter(&quot;day&quot;, sqlDate);\r\n","title":"query with date using entity manager","body":"<p><strong>Backgound: i use JPA (hibernate impl) + spring</strong>\nI have two tables, the first one is ok, it has one primary key and it works even with java.Util.Date fields. Another one has 3 parameters in primary key(it is first time i work with it):</p>\n\n<pre><code>PRIMARY KEY (`id_room`,`id_hotel`,`day`),\n</code></pre>\n\n<p>Full schema:</p>\n\n<pre><code>CREATE TABLE `hotels` (\n  `id_room` int(11) NOT NULL DEFAULT '0',\n  `id_hotel` int(11) NOT NULL DEFAULT '0',\n  `day` date NOT NULL,\n  PRIMARY KEY (`id_room`,`id_hotel`,`day`),\n  KEY `id_hotel` (`id_hotel`,`day`),\n  KEY `day` (`day`),\n  KEY `day-hotel` (`day`,`id_hotel`),\n  KEY `hotel` (`id_hotel`)\n) ENGINE=MyISAM DEFAULT CHARSET=utf8;\n</code></pre>\n\n<p>So i added code to my Entity:</p>\n\n<pre><code>@Entity @IdClass(HotelId.class)\n@Table(name=\"hotels\")\npublic class Hotels implements Serializable {\n    private static final Long serialVersionUID = 1L;\n\n    @Id\n    @Column(name=\"id_room\")\n    private int roomId;\n    @Id\n    @Column(name=\"id_hotel\")\n    private int hotelId;\n    @Id\n    @Temporal(TemporalType.DATE)\n    private Date day;\n....\n</code></pre>\n\n<p><strong>HotelId.class</strong></p>\n\n<pre><code>public class HotelId implements Serializable {\n    private int roomId;\n    private int hotelId;\n    private Date day;\n\n    public HotelId() {\n    }\n\n    public HotelId(int roomId, int hotelId, Date day) {\n        this.roomId = roomId;\n        this.hotelId = hotelId;\n        this.day = day;\n    }\n\n    public int getRoomId() {\n        return roomId;\n    }\n\n    public int getHotelId() {\n        return hotelId;\n    }\n\n    public Date getDay() {\n        return day;\n    }\n}\n</code></pre>\n\n<p>With this entity i stuck for a long time:</p>\n\n<p>I spent almost all day today for this problem.\nI have database with date column in format(yyyy-mm-dd).\nI also have entity class in project with java.util.Date date field.\nNow i'm trying to make a select:</p>\n\n<pre><code>TypedQuery query = em.createQuery(\"Select h FROM Hotels h where h.roomId=:roomId and h.hotelId=:hotelId and h.day=:day\", Hotels.class);\nquery.setParameter(\"roomId\", roomId);\nquery.setParameter(\"hotelId\", hotelId);\nquery.setParameter(\"day\", date);\n</code></pre>\n\n<p>It says there is no data</p>\n\n<p>Now i change date field from java.util.Date to String and change my query:</p>\n\n<pre><code>TypedQuery query = em.createQuery(\"Select h FROM Hotels h where h.roomId=:roomId and h.hotelId=:hotelId and h.day=:day\", Hotels.class);\nquery.setParameter(\"roomId\", roomId);\nquery.setParameter(\"hotelId\", hotelId);\nquery.setParameter(\"day\", new SimpleDateFormat(\"yyyy-mm-dd\").format(date));\n</code></pre>\n\n<p>It finds data.</p>\n\n<p>The question is how to send date(java.util.Date) to MySql DB and get back an information?</p>\n\n<h2>Update:</h2>\n\n<p>It doesnt work also</p>\n\n<pre><code>@Entity \n    @Table(name=\"hotels\")\n    public class Hotels implements Serializable {\n        private static final Long serialVersionUID = 1L;\n\n        @Id\n        private int id;\n        @Column(name=\"id_room\")\n        private int roomId;\n\n        @Column(name=\"id_hotel\")\n        private int hotelId;\n\n        private java.sql.Date day;\n        ....\n    }\n</code></pre>\n\n<p>Query:</p>\n\n<pre><code>    java.sql.Date sqlDate = new java.sql.Date(day.getTime());\n    TypedQuery query = em.createQuery(\"Select h FROM Hotels h where h.roomId=:roomId and h.hotelId=:hotelId and h.day=:day\", Hotels.class);\nquery.setParameter(\"roomId\", roomId);\nquery.setParameter(\"hotelId\", hotelId);\n            query.setParameter(\"day\", sqlDate);\n</code></pre>\n"},{"tags":["java","ant","junit"],"comments":[{"owner":{"account_id":2093164,"reputation":1242,"user_id":1862502,"accept_rate":81,"display_name":"Vignesh Vino"},"score":0,"creation_date":1368878644,"post_id":16624022,"comment_id":23902907,"body_markdown":"this may be helpful :http://stackoverflow.com/a/1792686/1862502","body":"this may be helpful :<a href=\"http://stackoverflow.com/a/1792686/1862502\">stackoverflow.com/a/1792686/1862502</a>"}],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1368879341,"creation_date":1368879005,"answer_id":16624094,"question_id":16624022,"body_markdown":"You need to put &quot;junit.jar&quot; on the classpath when you compile and then when you run the class.\r\n\r\nPlease refer to the manual entries for the [`java`][1] and [`javac`][2] commands, and also to the page on [setting the classpath][3].\r\n\r\nIf you are building from the command line using Ant, then you need to make sure that your &quot;build.xml&quot; sets the compilation classpath correctly.\r\n\r\n--------------\r\n\r\nYou will also need to add `import` statements to import any Junit 4 annotations that you use.  But you need to address the &quot;package org.junit does not exist&quot; issue first.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/technotes/tools/windows/java.html\r\n  [2]: http://docs.oracle.com/javase/7/docs/technotes/tools/windows/javac.html\r\n  [3]: http://docs.oracle.com/javase/7/docs/technotes/tools/windows/classpath.html","title":"Cannot find package org.junit when compiling java file in command prompt","body":"<p>You need to put \"junit.jar\" on the classpath when you compile and then when you run the class.</p>\n\n<p>Please refer to the manual entries for the <a href=\"http://docs.oracle.com/javase/7/docs/technotes/tools/windows/java.html\" rel=\"nofollow\"><code>java</code></a> and <a href=\"http://docs.oracle.com/javase/7/docs/technotes/tools/windows/javac.html\" rel=\"nofollow\"><code>javac</code></a> commands, and also to the page on <a href=\"http://docs.oracle.com/javase/7/docs/technotes/tools/windows/classpath.html\" rel=\"nofollow\">setting the classpath</a>.</p>\n\n<p>If you are building from the command line using Ant, then you need to make sure that your \"build.xml\" sets the compilation classpath correctly.</p>\n\n<hr>\n\n<p>You will also need to add <code>import</code> statements to import any Junit 4 annotations that you use.  But you need to address the \"package org.junit does not exist\" issue first.</p>\n"},{"tags":[],"owner":{"account_id":3139392,"reputation":179,"user_id":2655146,"accept_rate":100,"display_name":"ski"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1376652707,"creation_date":1376652707,"answer_id":18272375,"question_id":16624022,"body_markdown":"I faced the same problem and added the Junit file path to the classpath and that solved it. Be aware that User Environment variable takes precedence over the system environment variable when the EV exists in both. ","title":"Cannot find package org.junit when compiling java file in command prompt","body":"<p>I faced the same problem and added the Junit file path to the classpath and that solved it. Be aware that User Environment variable takes precedence over the system environment variable when the EV exists in both. </p>\n"}],"owner":{"account_id":1270379,"reputation":177,"user_id":2272399,"accept_rate":78,"display_name":"user11998"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":12618,"favorite_count":0,"down_vote_count":1,"up_vote_count":4,"answer_count":2,"score":3,"last_activity_date":1693584065,"creation_date":1368878460,"question_id":16624022,"body_markdown":"Whenever I run my java file in command prompt, I keep getting errors saying:\r\n\r\n    error: package org.junit does not exist\r\n    import static org.junit.Assert.*;\r\n\r\nThis also gives errors on symbols like &quot;@Test&quot;.\r\n\r\nHere&#39;s my java file code:\r\n\r\n    package org.example.antbook.junit; \r\n    //import required JUnit4 classes:\r\n    import static org.junit.Assert.*;\r\n    import org.junit.Test;\r\n    \r\n    public class SimpleTest\r\n    {\r\n        @Test    \r\n    \tpublic void testSomething() \r\n        {\r\n            assertTrue(&quot;MULTIPLICATION???&quot;, 4 == (2 * 2));\r\n        }\r\n    }\r\n\r\nI believe it is something to do with importing junit-4.10.jar which I have already imported, but I may be missing something.\r\nIs there a solution to this?","title":"Cannot find package org.junit when compiling java file in command prompt","body":"<p>Whenever I run my java file in command prompt, I keep getting errors saying:</p>\n\n<pre><code>error: package org.junit does not exist\nimport static org.junit.Assert.*;\n</code></pre>\n\n<p>This also gives errors on symbols like \"@Test\".</p>\n\n<p>Here's my java file code:</p>\n\n<pre><code>package org.example.antbook.junit; \n//import required JUnit4 classes:\nimport static org.junit.Assert.*;\nimport org.junit.Test;\n\npublic class SimpleTest\n{\n    @Test    \n    public void testSomething() \n    {\n        assertTrue(\"MULTIPLICATION???\", 4 == (2 * 2));\n    }\n}\n</code></pre>\n\n<p>I believe it is something to do with importing junit-4.10.jar which I have already imported, but I may be missing something.\nIs there a solution to this?</p>\n"},{"tags":["java","string","char"],"comments":[{"owner":{"account_id":15847779,"reputation":4627,"user_id":11434552,"display_name":"Nexevis"},"score":1,"creation_date":1693507468,"post_id":77018361,"comment_id":135774052,"body_markdown":"Have you taken a look at this [question](https://stackoverflow.com/questions/1327355/is-there-a-java-function-which-parses-escaped-characters)?  It seems to cover your case with an Apache Commons method, if you are able to use that. Just realized that question is really old though, so maybe out of date.","body":"Have you taken a look at this <a href=\"https://stackoverflow.com/questions/1327355/is-there-a-java-function-which-parses-escaped-characters\">question</a>?  It seems to cover your case with an Apache Commons method, if you are able to use that. Just realized that question is really old though, so maybe out of date."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1693534867,"post_id":77018361,"comment_id":135777171,"body_markdown":"@Nexevis The Answers on [that Question](https://stackoverflow.com/q/1327355/642706) are outdated. None use the new functionality built into Java 15+. See [my Answer](https://stackoverflow.com/a/77019207/642706) here for details.","body":"@Nexevis The Answers on <a href=\"https://stackoverflow.com/q/1327355/642706\">that Question</a> are outdated. None use the new functionality built into Java 15+. See <a href=\"https://stackoverflow.com/a/77019207/642706\">my Answer</a> here for details."}],"answers":[{"comments":[{"owner":{"account_id":15481877,"reputation":1067,"user_id":11173594,"display_name":"136"},"score":1,"creation_date":1693510154,"post_id":77018680,"comment_id":135774474,"body_markdown":"`StringEscapeUtils.unescapeJava` seems to do the job!","body":"<code>StringEscapeUtils.unescapeJava</code> seems to do the job!"},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1693516211,"post_id":77018680,"comment_id":135775503,"body_markdown":"No need to add a library. This functionality is now built into Java.","body":"No need to add a library. This functionality is now built into Java."}],"tags":[],"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1693522198,"creation_date":1693509336,"answer_id":77018680,"question_id":77018361,"body_markdown":"You can utilize the [`StringEscapeUtils`][1] class from the [Apache Commons Text library][2] to achieve your goal, this way:\r\n\r\n```java\r\nString str = &quot;\\\\t&quot;;\r\nString unescapedStr = StringEscapeUtils.unescapeJava(str);\r\nchar c = unescapedStr.charAt(0);\r\n```\r\n\r\nThe `StringEscapeUtils.unescapeJava` method converts escape sequences in a string to their corresponding characters. In this case, it will convert `\\\\t` to the tab character `&#39;\\t&#39;`.\r\n\r\nRemember to include the Apache Commons Text library in your project&#39;s dependencies!\r\n\r\nBut, if for some reason you don&#39;t want/can&#39;t use a library, you can do the `toChar` method this way:\r\n\r\n```java\r\npublic static char toChar(String str) {\r\n\tswitch (str) {\r\n\tcase &quot;\\\\t&quot;:\r\n\t\treturn &#39;\\t&#39;;\r\n\tcase &quot;\\\\b&quot;:\r\n\t\treturn &#39;\\b&#39;;\r\n\tcase &quot;\\\\n&quot;:\r\n\t\treturn &#39;\\n&#39;;\r\n\tcase &quot;\\\\r&quot;:\r\n\t\treturn &#39;\\r&#39;;\r\n\tcase &quot;\\\\f&quot;:\r\n\t\treturn &#39;\\f&#39;;\r\n\tcase &quot;\\\\&#39;&quot;:\r\n\t\treturn &#39;\\&#39;&#39;;\r\n\tcase &quot;\\\\\\&quot;&quot;:\r\n\t\treturn &#39;\\&quot;&#39;;\r\n\tcase &quot;\\\\\\\\&quot;:\r\n\t\treturn &#39;\\\\&#39;;\r\n\tdefault:\r\n\t\tthrow new IllegalArgumentException();\r\n\t}\r\n}\r\n```\r\n\r\n\r\n  [1]: https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/StringEscapeUtils.html\r\n  [2]: https://commons.apache.org/proper/commons-lang/apidocs/overview-summary.html","title":"How to transform strings representing &#39;special&#39; characters to their character representation","body":"<p>You can utilize the <a href=\"https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/StringEscapeUtils.html\" rel=\"nofollow noreferrer\"><code>StringEscapeUtils</code></a> class from the <a href=\"https://commons.apache.org/proper/commons-lang/apidocs/overview-summary.html\" rel=\"nofollow noreferrer\">Apache Commons Text library</a> to achieve your goal, this way:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String str = &quot;\\\\t&quot;;\nString unescapedStr = StringEscapeUtils.unescapeJava(str);\nchar c = unescapedStr.charAt(0);\n</code></pre>\n<p>The <code>StringEscapeUtils.unescapeJava</code> method converts escape sequences in a string to their corresponding characters. In this case, it will convert <code>\\\\t</code> to the tab character <code>'\\t'</code>.</p>\n<p>Remember to include the Apache Commons Text library in your project's dependencies!</p>\n<p>But, if for some reason you don't want/can't use a library, you can do the <code>toChar</code> method this way:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static char toChar(String str) {\n    switch (str) {\n    case &quot;\\\\t&quot;:\n        return '\\t';\n    case &quot;\\\\b&quot;:\n        return '\\b';\n    case &quot;\\\\n&quot;:\n        return '\\n';\n    case &quot;\\\\r&quot;:\n        return '\\r';\n    case &quot;\\\\f&quot;:\n        return '\\f';\n    case &quot;\\\\'&quot;:\n        return '\\'';\n    case &quot;\\\\\\&quot;&quot;:\n        return '\\&quot;';\n    case &quot;\\\\\\\\&quot;:\n        return '\\\\';\n    default:\n        throw new IllegalArgumentException();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1693512747,"creation_date":1693512747,"answer_id":77019018,"question_id":77018361,"body_markdown":"The String class itself has a [translateEscapes](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#translateEscapes()) method which does this:\r\n\r\n    String str = &quot;\\\\t&quot;;\r\n    char c = str.translateEscapes().charAt(0);\r\n","title":"How to transform strings representing &#39;special&#39; characters to their character representation","body":"<p>The String class itself has a <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#translateEscapes()\" rel=\"nofollow noreferrer\">translateEscapes</a> method which does this:</p>\n<pre><code>String str = &quot;\\\\t&quot;;\nchar c = str.translateEscapes().charAt(0);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1693583427,"creation_date":1693515238,"answer_id":77019207,"question_id":77018361,"body_markdown":"## tl;dr\r\n\r\nIn Java 15+:\r\n\r\n```none\r\n    ( &quot;\\\\&quot; + &quot;t&quot; ).translateEscapes()  --&gt;  TAB character\r\n    ( &quot;\\\\&quot; + &quot;n&quot; ).translateEscapes()  --&gt;  LINE FEED character\r\n    ( &quot;\\\\&quot; + &quot;s&quot; ).translateEscapes()  --&gt;  SPACE character\r\n    …\r\n```\r\n\r\n\r\n## `String#translateEscapes`\r\n\r\nIn Java 15+, use [`String#translateEscapes`][1] method.\r\n\r\nThe `char` type has been essentially broken since Java 2, legacy since Java 5. Make a habit of using [code point][2] integers and `String` objects instead.\r\n\r\n```java\r\nfinal String input = &quot;\\\\&quot; + &quot;t&quot;;\r\nfinal String TAB = input.translateEscapes ( );\r\n```\r\n\r\nDump to console. Use code points to inspect actual contents of each string.\r\n\r\n```java\r\nSystem.out.println ( &quot;input = &quot; + input );\r\nSystem.out.println ( &quot;input code points = &quot; + Arrays.toString ( input.codePoints ( ).toArray ( ) ) );\r\nSystem.out.println ( &quot;TAB code points = &quot; + Arrays.toString ( TAB.codePoints ( ).toArray ( ) ) );\r\n```\r\n\r\nWhen run, we verify that we indeed began with a two-character string, a back-slash and a &quot;t&quot;. After our call, we transformed that input into a single TAB character with a code point of nine.\r\n\r\n```none\r\ninput = \\t\r\ninput code points = [92, 116]\r\nTAB code points = [9]\r\n```\r\n\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#translateEscapes()\r\n  [2]: https://en.wikipedia.org/wiki/Code_point","title":"How to transform strings representing &#39;special&#39; characters to their character representation","body":"<h2>tl;dr</h2>\n<p>In Java 15+:</p>\n<pre class=\"lang-none prettyprint-override\"><code>    ( &quot;\\\\&quot; + &quot;t&quot; ).translateEscapes()  --&gt;  TAB character\n    ( &quot;\\\\&quot; + &quot;n&quot; ).translateEscapes()  --&gt;  LINE FEED character\n    ( &quot;\\\\&quot; + &quot;s&quot; ).translateEscapes()  --&gt;  SPACE character\n    …\n</code></pre>\n<h2><code>String#translateEscapes</code></h2>\n<p>In Java 15+, use <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#translateEscapes()\" rel=\"nofollow noreferrer\"><code>String#translateEscapes</code></a> method.</p>\n<p>The <code>char</code> type has been essentially broken since Java 2, legacy since Java 5. Make a habit of using <a href=\"https://en.wikipedia.org/wiki/Code_point\" rel=\"nofollow noreferrer\">code point</a> integers and <code>String</code> objects instead.</p>\n<pre class=\"lang-java prettyprint-override\"><code>final String input = &quot;\\\\&quot; + &quot;t&quot;;\nfinal String TAB = input.translateEscapes ( );\n</code></pre>\n<p>Dump to console. Use code points to inspect actual contents of each string.</p>\n<pre class=\"lang-java prettyprint-override\"><code>System.out.println ( &quot;input = &quot; + input );\nSystem.out.println ( &quot;input code points = &quot; + Arrays.toString ( input.codePoints ( ).toArray ( ) ) );\nSystem.out.println ( &quot;TAB code points = &quot; + Arrays.toString ( TAB.codePoints ( ).toArray ( ) ) );\n</code></pre>\n<p>When run, we verify that we indeed began with a two-character string, a back-slash and a &quot;t&quot;. After our call, we transformed that input into a single TAB character with a code point of nine.</p>\n<pre class=\"lang-none prettyprint-override\"><code>input = \\t\ninput code points = [92, 116]\nTAB code points = [9]\n</code></pre>\n"}],"owner":{"account_id":15481877,"reputation":1067,"user_id":11173594,"display_name":"136"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":108,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77019207,"answer_count":3,"score":1,"last_activity_date":1693583427,"creation_date":1693505954,"question_id":77018361,"body_markdown":"I want to turn two-character strings representing special non-printing characters, such as &quot;\\t&quot;,&quot;\\n&quot;,&quot;\\a&quot;,... into their single character representations. Is there any general way to do it (with general, I mean an alternative to explicitly translating each string into each character)?\r\n\r\nIdeal behavior (my strings are being read from a file. This is just an example):\r\n```java\r\nString str = &quot;\\\\t&quot;;\r\nchar c = toChar(str); // c now represents the tab character &#39;\\t&#39;\r\n```","title":"How to transform strings representing &#39;special&#39; characters to their character representation","body":"<p>I want to turn two-character strings representing special non-printing characters, such as &quot;\\t&quot;,&quot;\\n&quot;,&quot;\\a&quot;,... into their single character representations. Is there any general way to do it (with general, I mean an alternative to explicitly translating each string into each character)?</p>\n<p>Ideal behavior (my strings are being read from a file. This is just an example):</p>\n<pre class=\"lang-java prettyprint-override\"><code>String str = &quot;\\\\t&quot;;\nchar c = toChar(str); // c now represents the tab character '\\t'\n</code></pre>\n"},{"tags":["java","json","gson","deserialization","json-deserialization"],"answers":[{"tags":[],"owner":{"account_id":4809624,"reputation":3467,"user_id":3883475,"accept_rate":85,"display_name":"Ironluca"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1566222199,"creation_date":1566222199,"answer_id":57557997,"question_id":57554373,"body_markdown":"This is a feature of Gson, it is actually documented but the documentation is a bit buried. Refer: [Gson.java][1]. The JSON deserialization final call is \r\n\r\n`public &lt;T&gt; T fromJson(JsonReader reader, Type typeOfT) throws JsonIOException, JsonSyntaxException`\r\n\r\nIn the body of the code, refer:\r\n\r\n    reader.setLenient(true);\r\n\r\nNow refer to [JsonReader.java][2]\r\n\r\n     public final void setLenient(boolean lenient)\r\n\r\nThe javadoc on the method states as follows:\r\n\r\n&gt; /**\r\n   * Configure this parser to be liberal in what it accepts. By default,\r\n   * this parser is strict and only accepts JSON as specified by &lt;a\r\n   * href=&quot;http://www.ietf.org/rfc/rfc4627.txt&quot;&gt;RFC 4627&lt;/a&gt;. Setting the\r\n   * parser to lenient causes it to ignore the following syntax errors:\r\n   *\r\n   * &lt;ul&gt;\r\n   *   &lt;li&gt;Streams that start with the &lt;a href=&quot;#nonexecuteprefix&quot;&gt;non-execute\r\n   *       prefix&lt;/a&gt;, &lt;code&gt;&quot;)]}&#39;\\n&quot;&lt;/code&gt;.\r\n   *   &lt;li&gt;Streams that include multiple top-level values. With strict parsing,\r\n   *       each stream must contain exactly one top-level value.\r\n   *   &lt;li&gt;Top-level values of any type. With strict parsing, the top-level\r\n   *       value must be an object or an array.\r\n   *   &lt;li&gt;Numbers may be {@link Double#isNaN() NaNs} or {@link\r\n   *       Double#isInfinite() infinities}.\r\n   *   &lt;li&gt;End of line comments starting with {@code //} or {@code #} and\r\n   *       ending with a newline character.\r\n   *   &lt;li&gt;C-style comments starting with {@code /*} and ending with\r\n   *       {@code *}{@code /}. Such comments may not be nested.\r\n   *   &lt;li&gt;Names that are unquoted or {@code &#39;single quoted&#39;}.\r\n   *   &lt;li&gt;Strings that are unquoted or {@code &#39;single quoted&#39;}.\r\n   *   &lt;li&gt;Array elements separated by {@code ;} instead of {@code ,}.\r\n   *   &lt;li&gt;Unnecessary array separators. These are interpreted as if null\r\n   *       was the omitted value.\r\n   *   &lt;li&gt;Names and values separated by {@code =} or {@code =&gt;} instead of\r\n   *       {@code :}.\r\n   *   &lt;li&gt;Name/value pairs separated by {@code ;} instead of {@code ,}.\r\n   * &lt;/ul&gt;\r\n   */\r\n\r\nThe above is the reason why Gson parses your string and deserializes the same.\r\n\r\nThe above would not work if your name/value (unquoted) have any &#39;:&#39;, reason being Gson would interpret (in your case)as name=[value or anotherName???]:value (Gson is not that lenient).\r\n\r\nUse proper valid JSON and de-serialize.\r\n\r\n\r\n  [1]: https://github.com/google/gson/blob/master/gson/src/main/java/com/google/gson/Gson.java\r\n  [2]: https://github.com/google/gson/blob/master/gson/src/main/java/com/google/gson/stream/JsonReader.java","title":"Gson Parser accepting toString Representation instead of Json syntax","body":"<p>This is a feature of Gson, it is actually documented but the documentation is a bit buried. Refer: <a href=\"https://github.com/google/gson/blob/master/gson/src/main/java/com/google/gson/Gson.java\" rel=\"nofollow noreferrer\">Gson.java</a>. The JSON deserialization final call is </p>\n\n<p><code>public &lt;T&gt; T fromJson(JsonReader reader, Type typeOfT) throws JsonIOException, JsonSyntaxException</code></p>\n\n<p>In the body of the code, refer:</p>\n\n<pre><code>reader.setLenient(true);\n</code></pre>\n\n<p>Now refer to <a href=\"https://github.com/google/gson/blob/master/gson/src/main/java/com/google/gson/stream/JsonReader.java\" rel=\"nofollow noreferrer\">JsonReader.java</a></p>\n\n<pre><code> public final void setLenient(boolean lenient)\n</code></pre>\n\n<p>The javadoc on the method states as follows:</p>\n\n<blockquote>\n  <p>/**\n     * Configure this parser to be liberal in what it accepts. By default,\n     * this parser is strict and only accepts JSON as specified by RFC 4627. Setting the\n     * parser to lenient causes it to ignore the following syntax errors:\n     *\n     * <ul>\n     *   <li>Streams that start with the non-execute\n     *       prefix, <code>\")]}'\\n\"</code>.\n     *   <li>Streams that include multiple top-level values. With strict parsing,\n     *       each stream must contain exactly one top-level value.\n     *   <li>Top-level values of any type. With strict parsing, the top-level\n     *       value must be an object or an array.\n     *   <li>Numbers may be {@link Double#isNaN() NaNs} or {@link\n     *       Double#isInfinite() infinities}.\n     *   <li>End of line comments starting with {@code //} or {@code #} and\n     *       ending with a newline character.\n     *   <li>C-style comments starting with {@code /*} and ending with\n     *       {@code *}{@code /}. Such comments may not be nested.\n     *   <li>Names that are unquoted or {@code 'single quoted'}.\n     *   <li>Strings that are unquoted or {@code 'single quoted'}.\n     *   <li>Array elements separated by {@code ;} instead of {@code ,}.\n     *   <li>Unnecessary array separators. These are interpreted as if null\n     *       was the omitted value.\n     *   <li>Names and values separated by {@code =} or {@code =>} instead of\n     *       {@code :}.\n     *   <li>Name/value pairs separated by {@code ;} instead of {@code ,}.\n     * </ul>\n     */</p>\n</blockquote>\n\n<p>The above is the reason why Gson parses your string and deserializes the same.</p>\n\n<p>The above would not work if your name/value (unquoted) have any ':', reason being Gson would interpret (in your case)as name=[value or anotherName???]:value (Gson is not that lenient).</p>\n\n<p>Use proper valid JSON and de-serialize.</p>\n"},{"tags":[],"owner":{"account_id":26322370,"reputation":1,"user_id":19984207,"display_name":"Mirey Mackey"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693583169,"creation_date":1693583169,"answer_id":77024467,"question_id":57554373,"body_markdown":"You need a Gson with an enabled complex map key serialization.\r\n\r\n    new Gson().newBuilder().enableComplexMapKeySerialization().create();\r\n\r\nhttps://www.javadoc.io/doc/com.google.code.gson/gson/latest/com.google.gson/com/google/gson/GsonBuilder.html#enableComplexMapKeySerialization()","title":"Gson Parser accepting toString Representation instead of Json syntax","body":"<p>You need a Gson with an enabled complex map key serialization.</p>\n<pre><code>new Gson().newBuilder().enableComplexMapKeySerialization().create();\n</code></pre>\n<p><a href=\"https://www.javadoc.io/doc/com.google.code.gson/gson/latest/com.google.gson/com/google/gson/GsonBuilder.html#enableComplexMapKeySerialization()\" rel=\"nofollow noreferrer\">https://www.javadoc.io/doc/com.google.code.gson/gson/latest/com.google.gson/com/google/gson/GsonBuilder.html#enableComplexMapKeySerialization()</a></p>\n"}],"owner":{"account_id":788920,"reputation":3452,"user_id":895429,"accept_rate":60,"display_name":"nikel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":544,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1693583169,"creation_date":1566208497,"question_id":57554373,"body_markdown":"While debugging a piece of code which deserialized string to Object,  i realised the JSON Parsing there is working with toString representation rather than json representation of the object.\r\n\r\nPojo:\r\n\r\n    import lombok.Builder;\r\n    import lombok.Data;\r\n    \r\n    @Data\r\n    @Builder\r\n    public class Pojo {\r\n    \r\n        int a;\r\n        String b;\r\n    }\r\n\r\nParse Logic:\r\n\r\n    Gson gsonInstance =\r\n            new GsonBuilder()\r\n                    .setFieldNamingPolicy(FieldNamingPolicy.LOWER_CASE_WITH_UNDERSCORES)\r\n                    .setDateFormat(&quot;yyyy-MM-dd&quot;)\r\n                    .create();\r\n    String json2 = &quot;{a=5, b=field}&quot;;\r\n    Pojo obj = gsonInstance.fromJson(json2, Pojo.class);\r\n\r\n    System.out.println(obj);\r\n\r\n\r\n\r\nThis started breaking when i added fields containing &quot;:&quot; to the Pojo. Like dates. \r\n\r\nTwo questions around this :\r\n1)How is Gson even supporting this? I couldn&#39;t find any doc. of the same.\r\n2)How do I handle the date related issue i mentioned earlier with this toString kind of implementation? I tried escaping the string for Java, that didn&#39;t help.","title":"Gson Parser accepting toString Representation instead of Json syntax","body":"<p>While debugging a piece of code which deserialized string to Object,  i realised the JSON Parsing there is working with toString representation rather than json representation of the object.</p>\n\n<p>Pojo:</p>\n\n<pre><code>import lombok.Builder;\nimport lombok.Data;\n\n@Data\n@Builder\npublic class Pojo {\n\n    int a;\n    String b;\n}\n</code></pre>\n\n<p>Parse Logic:</p>\n\n<pre><code>Gson gsonInstance =\n        new GsonBuilder()\n                .setFieldNamingPolicy(FieldNamingPolicy.LOWER_CASE_WITH_UNDERSCORES)\n                .setDateFormat(\"yyyy-MM-dd\")\n                .create();\nString json2 = \"{a=5, b=field}\";\nPojo obj = gsonInstance.fromJson(json2, Pojo.class);\n\nSystem.out.println(obj);\n</code></pre>\n\n<p>This started breaking when i added fields containing \":\" to the Pojo. Like dates. </p>\n\n<p>Two questions around this :\n1)How is Gson even supporting this? I couldn't find any doc. of the same.\n2)How do I handle the date related issue i mentioned earlier with this toString kind of implementation? I tried escaping the string for Java, that didn't help.</p>\n"},{"tags":["java","graphql-codegen"],"owner":{"account_id":20035444,"reputation":15,"user_id":14687279,"display_name":"DunderPiper"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":16,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693582292,"creation_date":1693582292,"question_id":77024377,"body_markdown":"I have this java&#39;s field :\r\n\r\n    Optional&lt;List&lt;String&gt;&gt; randomVar\r\n\r\nAnd when i run a codegen the Typescript&#39;s result is:\r\n\r\n    InputMaybe&lt;randomVar&gt;\r\n\r\nHow can I avoid the List deletion?","title":"Is there a way to avoid codegen List deletion when Optional type is used","body":"<p>I have this java's field :</p>\n<pre><code>Optional&lt;List&lt;String&gt;&gt; randomVar\n</code></pre>\n<p>And when i run a codegen the Typescript's result is:</p>\n<pre><code>InputMaybe&lt;randomVar&gt;\n</code></pre>\n<p>How can I avoid the List deletion?</p>\n"},{"tags":["java","maven"],"comments":[{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":1,"creation_date":1693580191,"post_id":77024072,"comment_id":135784169,"body_markdown":"I would try two things. (1) Try upgrading to version `3.11.0` of the plugin, which appears to be the latest version as of this comment. (2) Check that the JDK being used is at least version 17.","body":"I would try two things. (1) Try upgrading to version <code>3.11.0</code> of the plugin, which appears to be the latest version as of this comment. (2) Check that the JDK being used is at least version 17."},{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":1,"creation_date":1693580230,"post_id":77024072,"comment_id":135784182,"body_markdown":"Often one needs to increase the `version`. Often the IDE supports Ctrl-Space into the start of the version text.","body":"Often one needs to increase the <code>version</code>. Often the IDE supports Ctrl-Space into the start of the version text."}],"answers":[{"comments":[{"owner":{"account_id":18025801,"reputation":149,"user_id":13101805,"display_name":"HappyProgrammer"},"score":0,"creation_date":1693582132,"post_id":77024159,"comment_id":135784584,"body_markdown":"After your advices it is still the same, I editet my question - I adde the full error.\nActually, I don;t know what &#39;17&#39; is  wrong, I deleted the source and the target","body":"After your advices it is still the same, I editet my question - I adde the full error. Actually, I don;t know what &#39;17&#39; is  wrong, I deleted the source and the target"},{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":3,"creation_date":1693582524,"post_id":77024159,"comment_id":135784689,"body_markdown":"The error output: `release version 17 not supported` means you are using a JDK less than 17... just check via `mvn --version` and post that output...","body":"The error output: <code>release version 17 not supported</code> means you are using a JDK less than 17... just check via <code>mvn --version</code> and post that output..."},{"owner":{"account_id":18025801,"reputation":149,"user_id":13101805,"display_name":"HappyProgrammer"},"score":0,"creation_date":1693588242,"post_id":77024159,"comment_id":135785659,"body_markdown":"that is the output : \n\nApache Maven 3.9.4 (dfbb324ad4a7c8fb0bf182e6d91b0ae20e3d2dd9)\nMaven home: C:\\Oprogramowanie\\apache-maven-3.9.4-bin\\apache-maven-3.9.4\nJava version: 17.0.7, vendor: Oracle Corporation, runtime: C:\\Program Files\\Java\\jdk-17\nDefault locale: pl_PL, platform encoding: Cp1250\nOS name: &quot;windows 10&quot;, version: &quot;10.0&quot;, arch: &quot;amd64&quot;, family: &quot;windows&quot;","body":"that is the output :   Apache Maven 3.9.4 (dfbb324ad4a7c8fb0bf182e6d91b0ae20e3d2dd9) Maven home: C:\\Oprogramowanie\\apache-maven-3.9.4-bin\\apache-maven-3.9.4 Java version: 17.0.7, vendor: Oracle Corporation, runtime: C:\\Program Files\\Java\\jdk-17 Default locale: pl_PL, platform encoding: Cp1250 OS name: &quot;windows 10&quot;, version: &quot;10.0&quot;, arch: &quot;amd64&quot;, family: &quot;windows&quot;"},{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1693589196,"post_id":77024159,"comment_id":135785802,"body_markdown":"Compiling on plain command line ? Or using Jenkins or from within an IDE? Have you set JAVA_HOME? Have you configured a bin directory of a Java installation via PATH ?","body":"Compiling on plain command line ? Or using Jenkins or from within an IDE? Have you set JAVA_HOME? Have you configured a bin directory of a Java installation via PATH ?"},{"owner":{"account_id":18025801,"reputation":149,"user_id":13101805,"display_name":"HappyProgrammer"},"score":1,"creation_date":1693812664,"post_id":77024159,"comment_id":135804759,"body_markdown":"now it&#39;s ok, I realized that in plain command line I had Java 17, but in the IntelliJ in project Java 11, so I reseted the IntelliJ.. Thank you","body":"now it&#39;s ok, I realized that in plain command line I had Java 17, but in the IntelliJ in project Java 11, so I reseted the IntelliJ.. Thank you"},{"owner":{"account_id":3577370,"reputation":3514,"user_id":2986279,"accept_rate":50,"display_name":"Gaurav Khurana"},"score":0,"creation_date":1697716346,"post_id":77024159,"comment_id":136316324,"body_markdown":"@khmarbaise your comment helped a lot and i was able to solve my issue","body":"@khmarbaise your comment helped a lot and i was able to solve my issue"}],"tags":[],"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"comment_count":6,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693580208,"creation_date":1693580208,"answer_id":77024159,"question_id":77024072,"body_markdown":"The configuration of the [maven-compiler-plugin][1] looks like this:\r\n\r\n&lt;!-- language:language-xml --&gt;\r\n\r\n    &lt;project&gt;\r\n    \r\n      &lt;properties&gt;\r\n        &lt;maven.compiler.release&gt;17&lt;/maven.compiler.release&gt;\r\n      &lt;/properties&gt;\r\n    \r\n      &lt;build&gt;\r\n        &lt;pluginManagement&gt;\r\n          &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n              &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n              &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n              &lt;version&gt;3.11.0&lt;/version&gt;\r\n            &lt;/plugin&gt;\r\n          &lt;/plugins&gt;\r\n        &lt;/pluginManagement&gt;\r\n      &lt;/build&gt;\r\n    \r\n    &lt;/project&gt;\r\n\r\nI would also suggest to use the most recent version of the maven-compiler-plugin as shown here. \r\nAlso it is required to install an appropriate JDK17+ which looks like that because of the error output:\r\n\r\n\r\n    Fatal error compiling: error: release version 17 not supported\r\n\r\n  [1]: https://maven.apache.org/plugins/maven-compiler-plugin/","title":"How to configure maven-compiler-plugin to java 17","body":"<p>The configuration of the <a href=\"https://maven.apache.org/plugins/maven-compiler-plugin/\" rel=\"nofollow noreferrer\">maven-compiler-plugin</a> looks like this:</p>\n\n<pre><code>&lt;project&gt;\n\n  &lt;properties&gt;\n    &lt;maven.compiler.release&gt;17&lt;/maven.compiler.release&gt;\n  &lt;/properties&gt;\n\n  &lt;build&gt;\n    &lt;pluginManagement&gt;\n      &lt;plugins&gt;\n        &lt;plugin&gt;\n          &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n          &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.11.0&lt;/version&gt;\n        &lt;/plugin&gt;\n      &lt;/plugins&gt;\n    &lt;/pluginManagement&gt;\n  &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>I would also suggest to use the most recent version of the maven-compiler-plugin as shown here.\nAlso it is required to install an appropriate JDK17+ which looks like that because of the error output:</p>\n<pre><code>Fatal error compiling: error: release version 17 not supported\n</code></pre>\n"}],"owner":{"account_id":18025801,"reputation":149,"user_id":13101805,"display_name":"HappyProgrammer"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":5115,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1693582006,"creation_date":1693579521,"question_id":77024072,"body_markdown":"Hello I&#39;m upgrading my project from JDK 1.8 to JDK 17.\r\nIn pom.xml i have the configuration \r\n\r\n     &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.7.0&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;source&gt;1.8&lt;/source&gt;\r\n                    &lt;target&gt;1.8&lt;/target&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n\r\nI want to make this to JDK 17, I tried to change the source and target to &#39;17&#39; but I had the error \r\n\r\n&quot;[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.7.0:compile (default-compile) on project routing-service: Fatal error compiling: error: release version 17 not supported -&gt; [Help 1]&quot;\r\n\r\nI can&#39;t find this configuration to JDK 17, do you have any ideas ? \r\n\r\nEdit: \r\nThe full stack of this error is \r\n\r\n&gt; [ERROR] Failed to execute goal\r\n&gt; org.apache.maven.plugins:maven-compiler-plugin:3.11.0:compile\r\n&gt; (default-compile) on project routing-service: Fatal error compiling:\r\n&gt; error: release version 17 not supported -&gt; [Help 1]\r\n&gt; org.apache.maven.lifecycle.LifecycleExecutionException: Failed to\r\n&gt; execute goal\r\n&gt; org.apache.maven.plugins:maven-compiler-plugin:3.11.0:compile\r\n&gt; (default-compile) on project routing-service: Fatal error compiling\r\n&gt;     at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute (MojoExecutor.java:306)\r\n&gt;     at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:211)\r\n&gt;     at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:165)\r\n&gt;     at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:157)\r\n&gt;     at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject\r\n&gt; (LifecycleModuleBuilder.java:121)\r\n&gt;     at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject\r\n&gt; (LifecycleModuleBuilder.java:81)\r\n&gt;     at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build\r\n&gt; (SingleThreadedBuilder.java:56)\r\n&gt;     at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:127)\r\n&gt;     at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:294)\r\n&gt;     at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\r\n&gt;     at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\r\n&gt;     at org.apache.maven.cli.MavenCli.execute (MavenCli.java:960)\r\n&gt;     at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:293)\r\n&gt;     at org.apache.maven.cli.MavenCli.main (MavenCli.java:196)\r\n&gt;     at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\r\n&gt;     at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\r\n&gt;     at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\r\n&gt;     at java.lang.reflect.Method.invoke (Method.java:566)\r\n&gt;     at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced\r\n&gt; (Launcher.java:282)\r\n&gt;     at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\r\n&gt;     at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode\r\n&gt; (Launcher.java:406)\r\n&gt;     at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347) Caused by:\r\n&gt; org.apache.maven.plugin.MojoExecutionException: Fatal error compiling\r\n&gt;     at org.apache.maven.plugin.compiler.AbstractCompilerMojo.execute (AbstractCompilerMojo.java:1143)\r\n&gt;     at org.apache.maven.plugin.compiler.CompilerMojo.execute (CompilerMojo.java:193)\r\n&gt;     at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:137)\r\n&gt;     at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute (MojoExecutor.java:301)\r\n&gt;     at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:211)\r\n&gt;     at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:165)\r\n&gt;     at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:157)\r\n&gt;     at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject\r\n&gt; (LifecycleModuleBuilder.java:121)\r\n&gt;     at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject\r\n&gt; (LifecycleModuleBuilder.java:81)\r\n&gt;     at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build\r\n&gt; (SingleThreadedBuilder.java:56)\r\n&gt;     at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:127)\r\n&gt;     at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:294)\r\n&gt;     at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\r\n&gt;     at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\r\n&gt;     at org.apache.maven.cli.MavenCli.execute (MavenCli.java:960)\r\n&gt;     at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:293)\r\n&gt;     at org.apache.maven.cli.MavenCli.main (MavenCli.java:196)\r\n&gt;     at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\r\n&gt;     at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\r\n&gt;     at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\r\n&gt;     at java.lang.reflect.Method.invoke (Method.java:566)\r\n&gt;     at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced\r\n&gt; (Launcher.java:282)\r\n&gt;     at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\r\n&gt;     at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode\r\n&gt; (Launcher.java:406)\r\n&gt;     at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347) Caused by:\r\n&gt; org.codehaus.plexus.compiler.CompilerException: error: release version\r\n&gt; 17 not supported\r\n&gt;     at org.codehaus.plexus.compiler.javac.JavaxToolsCompiler.compileInProcess\r\n&gt; (JavaxToolsCompiler.java:198)\r\n&gt;     at org.codehaus.plexus.compiler.javac.JavacCompiler.performCompile (JavacCompiler.java:183)\r\n&gt;     at org.apache.maven.plugin.compiler.AbstractCompilerMojo.execute (AbstractCompilerMojo.java:1140)\r\n&gt;     at org.apache.maven.plugin.compiler.CompilerMojo.execute (CompilerMojo.java:193)\r\n&gt;     at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:137)\r\n&gt;     at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute (MojoExecutor.java:301)\r\n&gt;     at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:211)\r\n&gt;     at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:165)\r\n&gt;     at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:157)\r\n&gt;     at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject\r\n&gt; (LifecycleModuleBuilder.java:121)\r\n&gt;     at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject\r\n&gt; (LifecycleModuleBuilder.java:81)\r\n&gt;     at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build\r\n&gt; (SingleThreadedBuilder.java:56)\r\n&gt;     at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:127)\r\n&gt;     at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:294)\r\n&gt;     at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\r\n&gt;     at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\r\n&gt;     at org.apache.maven.cli.MavenCli.execute (MavenCli.java:960)\r\n&gt;     at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:293)\r\n&gt;     at org.apache.maven.cli.MavenCli.main (MavenCli.java:196)\r\n&gt;     at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\r\n&gt;     at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\r\n&gt;     at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\r\n&gt;     at java.lang.reflect.Method.invoke (Method.java:566)\r\n&gt;     at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced\r\n&gt; (Launcher.java:282)\r\n&gt;     at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\r\n&gt;     at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode\r\n&gt; (Launcher.java:406)\r\n&gt;     at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347) Caused by: java.lang.IllegalArgumentException:\r\n&gt; error: release version 17 not supported\r\n&gt;     at com.sun.tools.javac.main.Arguments.reportDiag (Arguments.java:891)\r\n&gt;     at com.sun.tools.javac.main.Arguments.handleReleaseOptions (Arguments.java:311)\r\n&gt;     at com.sun.tools.javac.main.Arguments.processArgs (Arguments.java:350)\r\n&gt;     at com.sun.tools.javac.main.Arguments.init (Arguments.java:246)\r\n&gt;     at com.sun.tools.javac.api.JavacTool.getTask (JavacTool.java:185)\r\n&gt;     at com.sun.tools.javac.api.JavacTool.getTask (JavacTool.java:119)\r\n&gt;     at com.sun.tools.javac.api.JavacTool.getTask (JavacTool.java:68)\r\n&gt;     at org.codehaus.plexus.compiler.javac.JavaxToolsCompiler.compileInProcess\r\n&gt; (JavaxToolsCompiler.java:135)\r\n&gt;     at org.codehaus.plexus.compiler.javac.JavacCompiler.performCompile (JavacCompiler.java:183)\r\n&gt;     at org.apache.maven.plugin.compiler.AbstractCompilerMojo.execute (AbstractCompilerMojo.java:1140)\r\n&gt;     at org.apache.maven.plugin.compiler.CompilerMojo.execute (CompilerMojo.java:193)\r\n&gt;     at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:137)\r\n&gt;     at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute (MojoExecutor.java:301)\r\n&gt;     at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:211)\r\n&gt;     at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:165)\r\n&gt;     at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:157)\r\n&gt;     at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject\r\n&gt; (LifecycleModuleBuilder.java:121)\r\n&gt;     at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject\r\n&gt; (LifecycleModuleBuilder.java:81)\r\n&gt;     at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build\r\n&gt; (SingleThreadedBuilder.java:56)\r\n&gt;     at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:127)\r\n&gt;     at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:294)\r\n&gt;     at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\r\n&gt;     at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\r\n&gt;     at org.apache.maven.cli.MavenCli.execute (MavenCli.java:960)\r\n&gt;     at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:293)\r\n&gt;     at org.apache.maven.cli.MavenCli.main (MavenCli.java:196)\r\n&gt;     at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\r\n&gt;     at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\r\n&gt;     at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\r\n&gt;     at java.lang.reflect.Method.invoke (Method.java:566)\r\n&gt;     at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced\r\n&gt; (Launcher.java:282)\r\n&gt;     at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\r\n&gt;     at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode\r\n&gt; (Launcher.java:406)\r\n&gt;     at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\r\n\r\n","title":"How to configure maven-compiler-plugin to java 17","body":"<p>Hello I'm upgrading my project from JDK 1.8 to JDK 17.\nIn pom.xml i have the configuration</p>\n<pre><code> &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.7.0&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;source&gt;1.8&lt;/source&gt;\n                &lt;target&gt;1.8&lt;/target&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n</code></pre>\n<p>I want to make this to JDK 17, I tried to change the source and target to '17' but I had the error</p>\n<p>&quot;[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.7.0:compile (default-compile) on project routing-service: Fatal error compiling: error: release version 17 not supported -&gt; [Help 1]&quot;</p>\n<p>I can't find this configuration to JDK 17, do you have any ideas ?</p>\n<p>Edit:\nThe full stack of this error is</p>\n<blockquote>\n<p>[ERROR] Failed to execute goal\norg.apache.maven.plugins:maven-compiler-plugin:3.11.0:compile\n(default-compile) on project routing-service: Fatal error compiling:\nerror: release version 17 not supported -&gt; [Help 1]\norg.apache.maven.lifecycle.LifecycleExecutionException: Failed to\nexecute goal\norg.apache.maven.plugins:maven-compiler-plugin:3.11.0:compile\n(default-compile) on project routing-service: Fatal error compiling\nat org.apache.maven.lifecycle.internal.MojoExecutor.doExecute (MojoExecutor.java:306)\nat org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:211)\nat org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:165)\nat org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:157)\nat org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject\n(LifecycleModuleBuilder.java:121)\nat org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject\n(LifecycleModuleBuilder.java:81)\nat org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build\n(SingleThreadedBuilder.java:56)\nat org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:127)\nat org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:294)\nat org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\nat org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\nat org.apache.maven.cli.MavenCli.execute (MavenCli.java:960)\nat org.apache.maven.cli.MavenCli.doMain (MavenCli.java:293)\nat org.apache.maven.cli.MavenCli.main (MavenCli.java:196)\nat jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\nat jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\nat jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\nat java.lang.reflect.Method.invoke (Method.java:566)\nat org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced\n(Launcher.java:282)\nat org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\nat org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode\n(Launcher.java:406)\nat org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347) Caused by:\norg.apache.maven.plugin.MojoExecutionException: Fatal error compiling\nat org.apache.maven.plugin.compiler.AbstractCompilerMojo.execute (AbstractCompilerMojo.java:1143)\nat org.apache.maven.plugin.compiler.CompilerMojo.execute (CompilerMojo.java:193)\nat org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:137)\nat org.apache.maven.lifecycle.internal.MojoExecutor.doExecute (MojoExecutor.java:301)\nat org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:211)\nat org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:165)\nat org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:157)\nat org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject\n(LifecycleModuleBuilder.java:121)\nat org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject\n(LifecycleModuleBuilder.java:81)\nat org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build\n(SingleThreadedBuilder.java:56)\nat org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:127)\nat org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:294)\nat org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\nat org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\nat org.apache.maven.cli.MavenCli.execute (MavenCli.java:960)\nat org.apache.maven.cli.MavenCli.doMain (MavenCli.java:293)\nat org.apache.maven.cli.MavenCli.main (MavenCli.java:196)\nat jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\nat jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\nat jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\nat java.lang.reflect.Method.invoke (Method.java:566)\nat org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced\n(Launcher.java:282)\nat org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\nat org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode\n(Launcher.java:406)\nat org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347) Caused by:\norg.codehaus.plexus.compiler.CompilerException: error: release version\n17 not supported\nat org.codehaus.plexus.compiler.javac.JavaxToolsCompiler.compileInProcess\n(JavaxToolsCompiler.java:198)\nat org.codehaus.plexus.compiler.javac.JavacCompiler.performCompile (JavacCompiler.java:183)\nat org.apache.maven.plugin.compiler.AbstractCompilerMojo.execute (AbstractCompilerMojo.java:1140)\nat org.apache.maven.plugin.compiler.CompilerMojo.execute (CompilerMojo.java:193)\nat org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:137)\nat org.apache.maven.lifecycle.internal.MojoExecutor.doExecute (MojoExecutor.java:301)\nat org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:211)\nat org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:165)\nat org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:157)\nat org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject\n(LifecycleModuleBuilder.java:121)\nat org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject\n(LifecycleModuleBuilder.java:81)\nat org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build\n(SingleThreadedBuilder.java:56)\nat org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:127)\nat org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:294)\nat org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\nat org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\nat org.apache.maven.cli.MavenCli.execute (MavenCli.java:960)\nat org.apache.maven.cli.MavenCli.doMain (MavenCli.java:293)\nat org.apache.maven.cli.MavenCli.main (MavenCli.java:196)\nat jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\nat jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\nat jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\nat java.lang.reflect.Method.invoke (Method.java:566)\nat org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced\n(Launcher.java:282)\nat org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\nat org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode\n(Launcher.java:406)\nat org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347) Caused by: java.lang.IllegalArgumentException:\nerror: release version 17 not supported\nat com.sun.tools.javac.main.Arguments.reportDiag (Arguments.java:891)\nat com.sun.tools.javac.main.Arguments.handleReleaseOptions (Arguments.java:311)\nat com.sun.tools.javac.main.Arguments.processArgs (Arguments.java:350)\nat com.sun.tools.javac.main.Arguments.init (Arguments.java:246)\nat com.sun.tools.javac.api.JavacTool.getTask (JavacTool.java:185)\nat com.sun.tools.javac.api.JavacTool.getTask (JavacTool.java:119)\nat com.sun.tools.javac.api.JavacTool.getTask (JavacTool.java:68)\nat org.codehaus.plexus.compiler.javac.JavaxToolsCompiler.compileInProcess\n(JavaxToolsCompiler.java:135)\nat org.codehaus.plexus.compiler.javac.JavacCompiler.performCompile (JavacCompiler.java:183)\nat org.apache.maven.plugin.compiler.AbstractCompilerMojo.execute (AbstractCompilerMojo.java:1140)\nat org.apache.maven.plugin.compiler.CompilerMojo.execute (CompilerMojo.java:193)\nat org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:137)\nat org.apache.maven.lifecycle.internal.MojoExecutor.doExecute (MojoExecutor.java:301)\nat org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:211)\nat org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:165)\nat org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:157)\nat org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject\n(LifecycleModuleBuilder.java:121)\nat org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject\n(LifecycleModuleBuilder.java:81)\nat org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build\n(SingleThreadedBuilder.java:56)\nat org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:127)\nat org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:294)\nat org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\nat org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\nat org.apache.maven.cli.MavenCli.execute (MavenCli.java:960)\nat org.apache.maven.cli.MavenCli.doMain (MavenCli.java:293)\nat org.apache.maven.cli.MavenCli.main (MavenCli.java:196)\nat jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\nat jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\nat jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\nat java.lang.reflect.Method.invoke (Method.java:566)\nat org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced\n(Launcher.java:282)\nat org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\nat org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode\n(Launcher.java:406)\nat org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)</p>\n</blockquote>\n"},{"tags":["java","collections"],"comments":[{"owner":{"account_id":45892,"reputation":59838,"user_id":135448,"accept_rate":97,"display_name":"Andreas Wong"},"score":2,"creation_date":1291615133,"post_id":4363665,"comment_id":4749669,"body_markdown":"Indent your code properly, it&#39;ll help you get help.","body":"Indent your code properly, it&#39;ll help you get help."}],"answers":[{"comments":[{"owner":{"account_id":678453,"reputation":6627,"user_id":471927,"accept_rate":79,"display_name":"Sumithra"},"score":0,"creation_date":1291615752,"post_id":4363724,"comment_id":4749731,"body_markdown":"hay thanks a lot. Silly i m :-) The code perfectly prints all the characters and occurences. I want to print them in alphabetical order. How to do that?","body":"hay thanks a lot. Silly i m :-) The code perfectly prints all the characters and occurences. I want to print them in alphabetical order. How to do that?"},{"owner":{"account_id":73862,"reputation":2729,"user_id":212476,"accept_rate":67,"display_name":"Paul"},"score":2,"creation_date":1291615859,"post_id":4363724,"comment_id":4749745,"body_markdown":"Use a treemap instead of a hashmap and it should do it. If not you&#39;ll have to sort it using a comparator, google it. http://download.oracle.com/javase/1.4.2/docs/api/java/util/TreeMap.html","body":"Use a treemap instead of a hashmap and it should do it. If not you&#39;ll have to sort it using a comparator, google it. <a href=\"http://download.oracle.com/javase/1.4.2/docs/api/java/util/TreeMap.html\" rel=\"nofollow noreferrer\">download.oracle.com/javase/1.4.2/docs/api/java/util/&hellip;</a>"}],"tags":[],"owner":{"account_id":73862,"reputation":2729,"user_id":212476,"accept_rate":67,"display_name":"Paul"},"comment_count":2,"down_vote_count":0,"up_vote_count":14,"is_accepted":true,"score":14,"last_activity_date":1291615314,"creation_date":1291615314,"answer_id":4363724,"question_id":4363665,"body_markdown":"You&#39;re leaving char ch set as the same character through each execution of the loop. \r\n\r\nIt should be:\r\n\r\n    ch = char_array[i]; \r\n    if(charCounter.containsKey(ch)){\r\n         charCounter.put(ch, charCounter.get(ch)+1);\r\n    }\r\n    else\r\n    {\r\n        charCounter.put(ch, 1);\r\n    }\r\n\r\nInside the for loop. ","title":"Hashmap implementation to count the occurrences of each character","body":"<p>You're leaving char ch set as the same character through each execution of the loop. </p>\n\n<p>It should be:</p>\n\n<pre><code>ch = char_array[i]; \nif(charCounter.containsKey(ch)){\n     charCounter.put(ch, charCounter.get(ch)+1);\n}\nelse\n{\n    charCounter.put(ch, 1);\n}\n</code></pre>\n\n<p>Inside the for loop. </p>\n"},{"tags":[],"owner":{"account_id":1613078,"reputation":2792,"user_id":1491512,"accept_rate":80,"display_name":"atiruz"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1352301161,"creation_date":1352301161,"answer_id":13272505,"question_id":4363665,"body_markdown":"    import java.util.HashMap;\r\n    import java.util.Map;\r\n    ...\r\n    Map&lt;String, Integer&gt; freq = new HashMap&lt;String, Integer&gt;();\r\n    ...\r\n    int count = freq.containsKey(word) ? freq.get(word) : 0;\r\n    freq.put(word, count + 1);","title":"Hashmap implementation to count the occurrences of each character","body":"<pre><code>import java.util.HashMap;\nimport java.util.Map;\n...\nMap&lt;String, Integer&gt; freq = new HashMap&lt;String, Integer&gt;();\n...\nint count = freq.containsKey(word) ? freq.get(word) : 0;\nfreq.put(word, count + 1);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2465458,"reputation":16856,"user_id":2148672,"accept_rate":75,"display_name":"Marc Claesen"},"score":0,"creation_date":1369056545,"post_id":16650314,"comment_id":23949476,"body_markdown":"Hi, welcome to SO. When you post a solution in code, it may be helpful to include a short summary of the line of thought.","body":"Hi, welcome to SO. When you post a solution in code, it may be helpful to include a short summary of the line of thought."}],"tags":[],"owner":{"account_id":1727353,"reputation":41,"user_id":1581734,"display_name":"user1581734"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1369112063,"creation_date":1369055416,"answer_id":16650314,"question_id":4363665,"body_markdown":"Hai All The below code is to count the occurrence of each character and it should print the count. may be helps you..Thanks for seeing     \r\n\r\npackage com.corejava;\r\n    \r\n    import java.util.Map;\r\n    import java.util.TreeMap;\r\n    \r\n    public class Test {\r\n    \tpublic static void main(String[] args) {\r\n    \r\n    \t\tString str = &quot;ramakoteswararao&quot;;\r\n    \r\n    \t\tchar[] char_array = str.toCharArray();\r\n    \r\n    \t\tSystem.out.println(&quot;The Given String is : &quot; + str);\r\n    \r\n    \tMap&lt;Character, Integer&gt; charCounter = new TreeMap&lt;Character, Integer&gt;();\r\n    \r\n    \t\tfor (char i : char_array) {\r\n    \r\n    \tcharCounter.put(i,charCounter.get(i) == null ? 1 : charCounter.get(i) + 1);\r\n    \r\n    \t\t}\r\n    \r\n    \tfor (Character key : charCounter.keySet()) {\r\n      System.out.println(&quot;occurrence of &#39;&quot; + key + &quot;&#39; is  &quot;+ charCounter.get(key));\r\n    \t\t}\r\n    \r\n    \t}\r\n    \r\n    }\r\n","title":"Hashmap implementation to count the occurrences of each character","body":"<p>Hai All The below code is to count the occurrence of each character and it should print the count. may be helps you..Thanks for seeing     </p>\n\n<p>package com.corejava;</p>\n\n<pre><code>import java.util.Map;\nimport java.util.TreeMap;\n\npublic class Test {\n    public static void main(String[] args) {\n\n        String str = \"ramakoteswararao\";\n\n        char[] char_array = str.toCharArray();\n\n        System.out.println(\"The Given String is : \" + str);\n\n    Map&lt;Character, Integer&gt; charCounter = new TreeMap&lt;Character, Integer&gt;();\n\n        for (char i : char_array) {\n\n    charCounter.put(i,charCounter.get(i) == null ? 1 : charCounter.get(i) + 1);\n\n        }\n\n    for (Character key : charCounter.keySet()) {\n  System.out.println(\"occurrence of '\" + key + \"' is  \"+ charCounter.get(key));\n        }\n\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":108817,"reputation":111656,"user_id":288671,"display_name":"Vitalii Fedorenko"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1417288292,"creation_date":1374976869,"answer_id":17904295,"question_id":4363665,"body_markdown":"Java 8 streams:\r\n \r\n    Map&lt;String, Long&gt; map = \r\n        Arrays.stream(string.split(&quot;&quot;)).\r\n        collect(Collectors.groupingBy(c -&gt; c, Collectors.counting()));\r\n\r\nGuava [HashMultiset][2]:\r\n\r\n    Multiset&lt;Character&gt; set = HashMultiset.create(Chars.asList(&quot;bbc&quot;.toCharArray()));\r\n    assertEquals(2, set.count(&#39;b&#39;));\r\n\r\n\r\n  [1]: http://code.google.com/p/guava-libraries/\r\n  [2]: http://google-collections.googlecode.com/svn/trunk/javadoc/com/google/common/collect/HashMultiset.html","title":"Hashmap implementation to count the occurrences of each character","body":"<p>Java 8 streams:</p>\n\n<pre><code>Map&lt;String, Long&gt; map = \n    Arrays.stream(string.split(\"\")).\n    collect(Collectors.groupingBy(c -&gt; c, Collectors.counting()));\n</code></pre>\n\n<p>Guava <a href=\"http://google-collections.googlecode.com/svn/trunk/javadoc/com/google/common/collect/HashMultiset.html\" rel=\"noreferrer\">HashMultiset</a>:</p>\n\n<pre><code>Multiset&lt;Character&gt; set = HashMultiset.create(Chars.asList(\"bbc\".toCharArray()));\nassertEquals(2, set.count('b'));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6009643,"reputation":213,"user_id":4720457,"display_name":"shyam karwa"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1428585662,"creation_date":1428585662,"answer_id":29539691,"question_id":4363665,"body_markdown":"inside the for loop\r\n\r\n&gt;   `ch = char_array[i];     \r\n&gt; charCounter.put(charCounter.contains(ch)?charCounter.get(ch)+1:1);`","title":"Hashmap implementation to count the occurrences of each character","body":"<p>inside the for loop</p>\n\n<blockquote>\n  <p><code>ch = char_array[i];<br>\n  charCounter.put(charCounter.contains(ch)?charCounter.get(ch)+1:1);</code></p>\n</blockquote>\n"},{"comments":[{"owner":{"account_id":10550773,"reputation":1,"user_id":7773556,"display_name":"Teju J Gowda"},"score":0,"creation_date":1497270198,"post_id":44499371,"comment_id":75991873,"body_markdown":"If we need we get any other key in the above example we have taken go","body":"If we need we get any other key in the above example we have taken go"},{"owner":{"account_id":146274,"reputation":3851,"user_id":356629,"accept_rate":100,"display_name":"kenny_k"},"score":0,"creation_date":1497271555,"post_id":44499371,"comment_id":75992898,"body_markdown":"Hi, welcome to SO. A good first try, but your answer doesn&#39;t actually meet a number of requirements:\n\n(1) It counts the words, not the characters\n(2) It does not print the words and the counts at the end - doesn&#39;t work for arbitrary strings (3) It does not Hashmap, as asked (4) It does not actually fix the asker&#39;s code, but offers another solution.\n\nPlease read the question carefully in the future before asking. See this guide: https://stackoverflow.com/help/how-to-answer","body":"Hi, welcome to SO. A good first try, but your answer doesn&#39;t actually meet a number of requirements:  (1) It counts the words, not the characters (2) It does not print the words and the counts at the end - doesn&#39;t work for arbitrary strings (3) It does not Hashmap, as asked (4) It does not actually fix the asker&#39;s code, but offers another solution.  Please read the question carefully in the future before asking. See this guide: <a href=\"https://stackoverflow.com/help/how-to-answer\">stackoverflow.com/help/how-to-answer</a>"}],"tags":[],"owner":{"account_id":10550773,"reputation":1,"user_id":7773556,"display_name":"Teju J Gowda"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1497271363,"creation_date":1497270130,"answer_id":44499371,"question_id":4363665,"body_markdown":"    import java.util.TreeMap;\r\n\r\n    public class OccuranceDemo {\r\n\t    public static void main(String[] args) {\r\n\t\t    TreeMap&lt;String , Integer&gt; mp=new TreeMap();\r\n\t\t    String s=&quot;rain rain go away&quot;;\r\n\t\t    String[] arr = s.split(&quot; &quot;);\r\n\t\t    int length=arr.length;\r\n\t\t    for(int i=0;i&lt;length;i++)\r\n\t\t   {\r\n\t\t\t String h = arr[i];\r\n\t\t\tmp.put(h, mp.get(h)==null?1:mp.get(h)+1);\r\n\t\t}\r\n\t\tSystem.out.println(mp.get(&quot;go&quot;));\r\n\t  }\r\n    }","title":"Hashmap implementation to count the occurrences of each character","body":"<pre><code>import java.util.TreeMap;\n\npublic class OccuranceDemo {\n    public static void main(String[] args) {\n        TreeMap&lt;String , Integer&gt; mp=new TreeMap();\n        String s=\"rain rain go away\";\n        String[] arr = s.split(\" \");\n        int length=arr.length;\n        for(int i=0;i&lt;length;i++)\n       {\n         String h = arr[i];\n        mp.put(h, mp.get(h)==null?1:mp.get(h)+1);\n    }\n    System.out.println(mp.get(\"go\"));\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11766401,"reputation":1,"user_id":8610850,"display_name":"Nikhil M"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1505413911,"creation_date":1505413911,"answer_id":46226076,"question_id":4363665,"body_markdown":"\r\n        String str=new String(&quot;aabbbcddddee&quot;);\r\n        char[] ch=str.toCharArray();\r\n        HashMap&lt;Character,Integer&gt; hm=new HashMap&lt;Character,Integer&gt;();\r\n        for(char ch1:ch)\r\n        {\r\n\r\n            if(hm.containsKey(ch1))\r\n            {\r\n                hm.put(ch1,hm.get(ch1)+1);\r\n            }\r\n            else\r\n            {\r\n                hm.put(ch1,1);\r\n            }\r\n        }\r\n\r\n        Set s1=hm.entrySet();\r\n        Iterator itr=s1.iterator();\r\n\r\n        while(itr.hasNext())\r\n        {\r\n            Map.Entry m1=(Map.Entry)itr.next();\r\n            System.out.println(m1);\r\n        }\r\n\r\n","title":"Hashmap implementation to count the occurrences of each character","body":"<pre><code>    String str=new String(\"aabbbcddddee\");\n    char[] ch=str.toCharArray();\n    HashMap&lt;Character,Integer&gt; hm=new HashMap&lt;Character,Integer&gt;();\n    for(char ch1:ch)\n    {\n\n        if(hm.containsKey(ch1))\n        {\n            hm.put(ch1,hm.get(ch1)+1);\n        }\n        else\n        {\n            hm.put(ch1,1);\n        }\n    }\n\n    Set s1=hm.entrySet();\n    Iterator itr=s1.iterator();\n\n    while(itr.hasNext())\n    {\n        Map.Entry m1=(Map.Entry)itr.next();\n        System.out.println(m1);\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10543185,"reputation":1,"user_id":7768405,"display_name":"T.gautam"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1517219443,"creation_date":1517213795,"answer_id":48496980,"question_id":4363665,"body_markdown":"\timport java.util.*;\r\n\r\n\tpublic class Test {\r\n\t\tpublic static void main(String[] args) {\r\n\r\n\t\t\tString str = &quot;STACKOVERFLOW&quot;;\r\n\r\n\t\t\tchar[] char_array = str.toCharArray();\r\n\r\n\t\t\tSystem.out.println(&quot;The Given String is : &quot; + str);\r\n\r\n\t\tMap&lt;Character, Integer&gt; charCounter = new TreeMap&lt;Character, Integer&gt;();\r\n\r\n\t\t\tfor (char i : char_array) {\r\n\r\n\t\tcharCounter.put(i,charCounter.get(i) == null ? 1 : charCounter.get(i) + 1);\r\n\r\n\t\t\t}\r\n\r\n\t\tfor (Character key : charCounter.keySet()) {\r\n\t  System.out.println(&quot;occurrence of &#39;&quot; + key + &quot;&#39; is  &quot;+ charCounter.get(key));\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}","title":"Hashmap implementation to count the occurrences of each character","body":"<pre><code>import java.util.*;\n\npublic class Test {\n    public static void main(String[] args) {\n\n        String str = \"STACKOVERFLOW\";\n\n        char[] char_array = str.toCharArray();\n\n        System.out.println(\"The Given String is : \" + str);\n\n    Map&lt;Character, Integer&gt; charCounter = new TreeMap&lt;Character, Integer&gt;();\n\n        for (char i : char_array) {\n\n    charCounter.put(i,charCounter.get(i) == null ? 1 : charCounter.get(i) + 1);\n\n        }\n\n    for (Character key : charCounter.keySet()) {\n  System.out.println(\"occurrence of '\" + key + \"' is  \"+ charCounter.get(key));\n        }\n\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9144949,"reputation":53,"user_id":6801527,"display_name":"Kailas Kakade"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1535039715,"creation_date":1534192258,"answer_id":51830114,"question_id":4363665,"body_markdown":" public void mapPractices() {\r\n        \r\n        Map&lt;Character, Integer&gt; map = new HashMap&lt;&gt;();\r\n        String dataString = &quot;!@#$%^&amp;*()__)(*&amp;^%$#@!@#$%^&amp;*(*&amp;^%$#@!@#$%^&amp;*()(*&amp;^%$#@!@#$%^&amp;*()(*&amp;^%$#@!@#$%^&amp;*()(*&amp;^%$#&quot;;\r\n        for (int i = 0; i &lt; dataString.length(); i++) {\r\n            \r\n            char charAt = dataString.charAt(i);\r\n            \r\n            if (map.containsKey(charAt)) {\r\n                int val = map.get(charAt);\r\n                map.put(charAt, val+1);\r\n                \r\n            } else {\r\n                \r\n                map.put(charAt, +1);\r\n            }\r\n            \r\n        }\r\n        System.out.println(&quot;Characters ant the string=&quot; + map);\r\n        \r\n    }","title":"Hashmap implementation to count the occurrences of each character","body":"<p>public void mapPractices() {</p>\n\n<pre><code>    Map&lt;Character, Integer&gt; map = new HashMap&lt;&gt;();\n    String dataString = \"!@#$%^&amp;*()__)(*&amp;^%$#@!@#$%^&amp;*(*&amp;^%$#@!@#$%^&amp;*()(*&amp;^%$#@!@#$%^&amp;*()(*&amp;^%$#@!@#$%^&amp;*()(*&amp;^%$#\";\n    for (int i = 0; i &lt; dataString.length(); i++) {\n\n        char charAt = dataString.charAt(i);\n\n        if (map.containsKey(charAt)) {\n            int val = map.get(charAt);\n            map.put(charAt, val+1);\n\n        } else {\n\n            map.put(charAt, +1);\n        }\n\n    }\n    System.out.println(\"Characters ant the string=\" + map);\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15524669,"reputation":2739,"user_id":11199879,"display_name":"Kaplan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1606408499,"creation_date":1606408499,"answer_id":65025981,"question_id":4363665,"body_markdown":"*a lambda one-liner*&lt;br /&gt;\r\nAfter the bug in the old-school-solution is fixed, here is an alternative solution in lambda that does the same thing:\r\n\r\n    Map&lt;Character,Long&gt; counts =\r\n    &quot;an example string to work with&quot;.codePoints().boxed().collect(\r\n        groupingBy( t -&gt; (char)(int)t, counting() ) );\r\n\r\ngets: `{ =5, a=2, e=2, g=1, h=1, i=2, k=1, l=1, m=1, n=2, o=2, p=1, r=2, s=1, t=3, w=2, x=1}`&lt;br /&gt;\r\nYou can get the number of a specific character eg. `&#39;t&#39;` by:&lt;br /&gt;\r\n`counts.get( &#39;t&#39; )`\r\n\r\n*(I also write a lambda solution out of morbid curiosity to find out how slow my solution is, preferably from the guy with the 10-line solution.)*","title":"Hashmap implementation to count the occurrences of each character","body":"<p><em>a lambda one-liner</em><br />\nAfter the bug in the old-school-solution is fixed, here is an alternative solution in lambda that does the same thing:</p>\n<pre><code>Map&lt;Character,Long&gt; counts =\n&quot;an example string to work with&quot;.codePoints().boxed().collect(\n    groupingBy( t -&gt; (char)(int)t, counting() ) );\n</code></pre>\n<p>gets: <code>{ =5, a=2, e=2, g=1, h=1, i=2, k=1, l=1, m=1, n=2, o=2, p=1, r=2, s=1, t=3, w=2, x=1}</code><br />\nYou can get the number of a specific character eg. <code>'t'</code> by:<br />\n<code>counts.get( 't' )</code></p>\n<p><em>(I also write a lambda solution out of morbid curiosity to find out how slow my solution is, preferably from the guy with the 10-line solution.)</em></p>\n"},{"tags":[],"owner":{"account_id":3155790,"reputation":14985,"user_id":2668232,"accept_rate":100,"display_name":"Oleksandr Pyrohov"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693581841,"creation_date":1693581841,"answer_id":77024335,"question_id":4363665,"body_markdown":"Paul&#39;s [answer][1] contains exact fix, but instead of lengthy *if-else* checks, you may use [`getOrDefault`][2] method available since Java 8 to achieve the same results:\r\n```\r\nMap&lt;Character, Integer&gt; charCounter = new HashMap&lt;&gt;();\r\nfor (char c : str.toCharArray()) {\r\n  charCounter.put(c, charCounter.getOrDefault(c, 0) + 1);\r\n}\r\n```\r\nIn this code snippet, we iterate over each character in the input string and update the count of that character in the map. If the character is not already present in the map, it is added with a default value of 0 using `getOrDefault`.\r\n\r\n  [1]: https://stackoverflow.com/a/4363724/2668232\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/util/Map.html#getOrDefault-java.lang.Object-V-","title":"Hashmap implementation to count the occurrences of each character","body":"<p>Paul's <a href=\"https://stackoverflow.com/a/4363724/2668232\">answer</a> contains exact fix, but instead of lengthy <em>if-else</em> checks, you may use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Map.html#getOrDefault-java.lang.Object-V-\" rel=\"nofollow noreferrer\"><code>getOrDefault</code></a> method available since Java 8 to achieve the same results:</p>\n<pre><code>Map&lt;Character, Integer&gt; charCounter = new HashMap&lt;&gt;();\nfor (char c : str.toCharArray()) {\n  charCounter.put(c, charCounter.getOrDefault(c, 0) + 1);\n}\n</code></pre>\n<p>In this code snippet, we iterate over each character in the input string and update the count of that character in the map. If the character is not already present in the map, it is added with a default value of 0 using <code>getOrDefault</code>.</p>\n"}],"owner":{"account_id":678453,"reputation":6627,"user_id":471927,"accept_rate":79,"display_name":"Sumithra"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":64812,"favorite_count":0,"down_vote_count":0,"up_vote_count":14,"accepted_answer_id":4363724,"answer_count":11,"score":14,"last_activity_date":1693581841,"creation_date":1291614803,"question_id":4363665,"body_markdown":"The below code is to count the occurence of each character and it should print the count. \r\nBut with the code I have tried I get only a 1 I don&#39;t know the changes I should make.\r\n\r\n    import java.io.BufferedReader;\r\n    import java.io.DataInputStream;\r\n    import java.io.FileInputStream;\r\n    import java.io.IOException;\r\n    import java.io.InputStreamReader;\r\n    import java.util.HashMap;\r\n    import java.util.Map;\r\n    \r\n    class Count_CharMap {\r\n    public static void main(String[] args) {\r\n    \ttry\r\n    \t{\r\n            FileInputStream file = new FileInputStream(&quot;D:\\\\trial.txt&quot;);\r\n            DataInputStream dis = new DataInputStream(file);\r\n            BufferedReader br = new BufferedReader(new InputStreamReader(dis));\r\n            String Contents=&quot;&quot;;\r\n            String str=&quot;&quot;;\r\n           \r\n            while ((Contents = br.readLine()) != null) {\r\n                str+=Contents;\r\n            }\r\n            \r\n            char[]char_array =str.toCharArray();\r\n            int count = 0;\r\n            char ch = char_array[count];\r\n            Map&lt;Character,Integer&gt; charCounter=new HashMap&lt;Character,Integer&gt;();\r\n            for(int i=0;i&lt;str.length();i++)\r\n            {\r\n                if(charCounter.containsKey(char_array[i]))\r\n                {\r\n    \t            charCounter.put(ch, charCounter.get(ch)+1);\r\n                } \r\n                else\r\n                {\r\n    \t            charCounter.put(ch, 1);\r\n                }\r\n           }\r\n    \r\n           for(Character key:charCounter.keySet())\r\n           {\r\n    \t       System.out.println(key+&quot;&quot;+charCounter.get(key));\r\n           }\r\n    \t} \r\n        catch(IOException e1){\r\n    \t\tSystem.out.println(e1);\r\n    \t}\r\n    \t}\r\n    }\r\n    \r\n     \r\nActual output should be like \r\nIf i have abcdabc in my trial.txt it should print a 2 b 2c 2 d 1.","title":"Hashmap implementation to count the occurrences of each character","body":"<p>The below code is to count the occurence of each character and it should print the count. \nBut with the code I have tried I get only a 1 I don't know the changes I should make.</p>\n\n<pre><code>import java.io.BufferedReader;\nimport java.io.DataInputStream;\nimport java.io.FileInputStream;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\nimport java.util.HashMap;\nimport java.util.Map;\n\nclass Count_CharMap {\npublic static void main(String[] args) {\n    try\n    {\n        FileInputStream file = new FileInputStream(\"D:\\\\trial.txt\");\n        DataInputStream dis = new DataInputStream(file);\n        BufferedReader br = new BufferedReader(new InputStreamReader(dis));\n        String Contents=\"\";\n        String str=\"\";\n\n        while ((Contents = br.readLine()) != null) {\n            str+=Contents;\n        }\n\n        char[]char_array =str.toCharArray();\n        int count = 0;\n        char ch = char_array[count];\n        Map&lt;Character,Integer&gt; charCounter=new HashMap&lt;Character,Integer&gt;();\n        for(int i=0;i&lt;str.length();i++)\n        {\n            if(charCounter.containsKey(char_array[i]))\n            {\n                charCounter.put(ch, charCounter.get(ch)+1);\n            } \n            else\n            {\n                charCounter.put(ch, 1);\n            }\n       }\n\n       for(Character key:charCounter.keySet())\n       {\n           System.out.println(key+\"\"+charCounter.get(key));\n       }\n    } \n    catch(IOException e1){\n        System.out.println(e1);\n    }\n    }\n}\n</code></pre>\n\n<p>Actual output should be like \nIf i have abcdabc in my trial.txt it should print a 2 b 2c 2 d 1.</p>\n"},{"tags":["java","spring","tomcat","java-8"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1693591802,"post_id":77024320,"comment_id":135786215,"body_markdown":"You should upgrade all modules to the same version never mix jars from different versions of a framework that is trouble waiting to happen. The error you get is a clear indication you are mixing jars from different versions of Spring.","body":"You should upgrade all modules to the same version never mix jars from different versions of a framework that is trouble waiting to happen. The error you get is a clear indication you are mixing jars from different versions of Spring."}],"owner":{"account_id":2414203,"reputation":5,"user_id":2108638,"display_name":"redds1"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693581661,"creation_date":1693581661,"question_id":77024320,"body_markdown":"I am trying to update the spring project so that it runs on Java 8. I updated spring core to 3.2.9 which has support for Jdk 8. I updated spring web to 3.2.9 as I was getting errors with 4.0. Post that, I updated spring beans to 3.2.9. Now, I am getting errors related to spring web:\r\n\r\n    java.lang.NoSuchMethodError: org.springframework.web.context.support.XmlWebApplicationContext.getEnvironment()Lorg/springframework/core/env/ConfigurableEnvironment;\r\n    \torg.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:87)\r\n    \torg.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:123)\r\n    \torg.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:422)\r\n    \torg.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:352)\r\n    \torg.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:402)\r\n    \torg.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:316)\r\n    \torg.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:282)\r\n    \torg.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:126)\r\n    \tjavax.servlet.GenericServlet.init(GenericServlet.java:158)\r\n    \torg.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)\r\n    \torg.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n    \torg.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:687)\r\n    \torg.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360)\r\n    \torg.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)\r\n    \torg.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n    \torg.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)\r\n    \torg.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1789)\r\n    \torg.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\r\n    \torg.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n    \torg.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n    \torg.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n    \tjava.lang.Thread.run(Thread.java:748)\r\n\r\nAny help is appreciated","title":"Java.lang.NoSuchMethodError: org.springframework.web.context.support.XmlWebApplicationContext.getEnvironment","body":"<p>I am trying to update the spring project so that it runs on Java 8. I updated spring core to 3.2.9 which has support for Jdk 8. I updated spring web to 3.2.9 as I was getting errors with 4.0. Post that, I updated spring beans to 3.2.9. Now, I am getting errors related to spring web:</p>\n<pre><code>java.lang.NoSuchMethodError: org.springframework.web.context.support.XmlWebApplicationContext.getEnvironment()Lorg/springframework/core/env/ConfigurableEnvironment;\n    org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:87)\n    org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:123)\n    org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:422)\n    org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:352)\n    org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:402)\n    org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:316)\n    org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:282)\n    org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:126)\n    javax.servlet.GenericServlet.init(GenericServlet.java:158)\n    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)\n    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\n    org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:687)\n    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360)\n    org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)\n    org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\n    org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)\n    org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1789)\n    org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\n    org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\n    org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\n    org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n    java.lang.Thread.run(Thread.java:748)\n</code></pre>\n<p>Any help is appreciated</p>\n"},{"tags":["java","loops","while-loop"],"comments":[{"owner":{"account_id":36137,"reputation":178799,"user_id":102937,"accept_rate":90,"display_name":"Robert Harvey"},"score":3,"creation_date":1693580170,"post_id":77024120,"comment_id":135784163,"body_markdown":"Since you have no exit condition for your loop (it essentially runs forever), I suspect `just_number` integer overflows, and eventually wraps around to zero.  Hence your error.","body":"Since you have no exit condition for your loop (it essentially runs forever), I suspect <code>just_number</code> integer overflows, and eventually wraps around to zero.  Hence your error."},{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":2,"creation_date":1693580340,"post_id":77024120,"comment_id":135784215,"body_markdown":"@RobertHarvey tried on my machine. That&#39;s exactly what&#39;s happening.","body":"@RobertHarvey tried on my machine. That&#39;s exactly what&#39;s happening."}],"answers":[{"tags":[],"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1693580858,"creation_date":1693580858,"answer_id":77024234,"question_id":77024120,"body_markdown":"As already stated, you loop forever, updating `just_number`.  The following corrects that and offers a way to stop the program. The signficant change is to break out of the inner while loop after the result is determined.\r\n```\r\nwhile (true) {\r\n     System.out.print(&quot;Please enter an integer: &quot;);\r\n     int number = new_input.nextInt();\r\n     if (number &lt;= 0) {\r\n         System.out.println(&quot;Bye!&quot;);\r\n         break;\r\n     }\r\n     int just_number = 0;\r\n     int sum = 0;\r\n\r\n     while (true) {\r\n         just_number += 1;\r\n         if (number % just_number == 0) {\r\n             sum += 1;\r\n             if (just_number == number &amp;&amp; sum == 2) {\r\n                 System.out.println(number + &quot; is prime number&quot;);\r\n                 break;\r\n             } else if (just_number == number &amp;&amp; sum != 2) {\r\n                 System.out.println(number + &quot; isn&#39;t prime number&quot;);\r\n                 break;\r\n             }\r\n         }\r\n     }\r\n\r\n }\r\n```\r\nNote that there are more efficient ways to accomplish this and SO has many examples. \r\n","title":"Mistake about &quot;devided by zero&quot;","body":"<p>As already stated, you loop forever, updating <code>just_number</code>.  The following corrects that and offers a way to stop the program. The signficant change is to break out of the inner while loop after the result is determined.</p>\n<pre><code>while (true) {\n     System.out.print(&quot;Please enter an integer: &quot;);\n     int number = new_input.nextInt();\n     if (number &lt;= 0) {\n         System.out.println(&quot;Bye!&quot;);\n         break;\n     }\n     int just_number = 0;\n     int sum = 0;\n\n     while (true) {\n         just_number += 1;\n         if (number % just_number == 0) {\n             sum += 1;\n             if (just_number == number &amp;&amp; sum == 2) {\n                 System.out.println(number + &quot; is prime number&quot;);\n                 break;\n             } else if (just_number == number &amp;&amp; sum != 2) {\n                 System.out.println(number + &quot; isn't prime number&quot;);\n                 break;\n             }\n         }\n     }\n\n }\n</code></pre>\n<p>Note that there are more efficient ways to accomplish this and SO has many examples.</p>\n"}],"owner":{"account_id":23419938,"reputation":11,"user_id":22236533,"display_name":"Nox"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77024234,"answer_count":1,"score":0,"last_activity_date":1693580858,"creation_date":1693579918,"question_id":77024120,"body_markdown":"So , there&#39;s the code where I try to figure out prime number. Its crucial to use while loop instead of for.\r\nWhen I try to run this code its working correctly , but in the end printing &quot;Exception in thread &quot;main&quot; java.lang.ArithmeticException: / by zero&quot; mistake.\r\n\r\n\r\n    Scanner new_input = new Scanner(System.in);\r\n            int number = new_input.nextInt();\r\n            boolean True = true;\r\n            int just_number = 0;\r\n            int sum = 0;\r\n\r\n            while (True){\r\n                just_number += 1;\r\n                if (number % just_number == 0){\r\n                    sum += 1;\r\n                    if (just_number == number &amp;&amp; sum == 2){\r\n                        System.out.println(number + &quot; is prime number&quot;);\r\n                    }\r\n                    else if(just_number == number &amp;&amp; sum != 2){\r\n                        System.out.println(number + &quot; isn&#39;t prime number&quot;);\r\n                    }\r\n                }\r\n                else{\r\n                    continue;\r\n                }\r\n\r\nI specially printed just_number += 1 in the start of the loop to fix this problem , but it isn&#39;t.","title":"Mistake about &quot;devided by zero&quot;","body":"<p>So , there's the code where I try to figure out prime number. Its crucial to use while loop instead of for.\nWhen I try to run this code its working correctly , but in the end printing &quot;Exception in thread &quot;main&quot; java.lang.ArithmeticException: / by zero&quot; mistake.</p>\n<pre><code>Scanner new_input = new Scanner(System.in);\n        int number = new_input.nextInt();\n        boolean True = true;\n        int just_number = 0;\n        int sum = 0;\n\n        while (True){\n            just_number += 1;\n            if (number % just_number == 0){\n                sum += 1;\n                if (just_number == number &amp;&amp; sum == 2){\n                    System.out.println(number + &quot; is prime number&quot;);\n                }\n                else if(just_number == number &amp;&amp; sum != 2){\n                    System.out.println(number + &quot; isn't prime number&quot;);\n                }\n            }\n            else{\n                continue;\n            }\n</code></pre>\n<p>I specially printed just_number += 1 in the start of the loop to fix this problem , but it isn't.</p>\n"},{"tags":["java","docker","selenium-webdriver","firefox","webdrivermanager-java"],"answers":[{"tags":[],"owner":{"account_id":4420200,"reputation":4708,"user_id":3877746,"accept_rate":100,"display_name":"Boni Garc&#237;a"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693580683,"creation_date":1693580683,"answer_id":77024207,"question_id":77013298,"body_markdown":"If you are behind a proxy, you need to set up it, e.g. as follows:\r\n\r\n    WebDriverManager.firefoxdriver().browserInDocker().proxy(&quot;myproxy:port&quot;).create();\r\n\r\n\r\nMore info on the [WebDriverManager doc][1].\r\n\r\n\r\n  [1]: https://bonigarcia.dev/webdrivermanager/","title":"WebDriverManager - Problem with inDocker function","body":"<p>If you are behind a proxy, you need to set up it, e.g. as follows:</p>\n<pre><code>WebDriverManager.firefoxdriver().browserInDocker().proxy(&quot;myproxy:port&quot;).create();\n</code></pre>\n<p>More info on the <a href=\"https://bonigarcia.dev/webdrivermanager/\" rel=\"nofollow noreferrer\">WebDriverManager doc</a>.</p>\n"}],"owner":{"account_id":12951923,"reputation":11,"user_id":9363925,"display_name":"Sabina Firek"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1693580716,"creation_date":1693463090,"question_id":77013298,"body_markdown":"I am using WebDriverManager for over an year, but currently we moved our CI/CD to different tool. There is additional firewall that cut of external libraries. I tried \r\n\r\n    WebDriverManager.firefoxdriver().browserInDocker().create();\r\n\r\nand\r\n\r\n    WebDriverManager.firefoxdriver().browserInDocker().linux().setup(;\r\n\r\nbut without luck. There was decision to move that drivers into our build repo but I don&#39;t know which drivers to move there.\r\n\r\n```\r\nio.github.bonigarcia.wdm.config.WebDriverManagerException: io.github.bonigarcia.wdm.config.WebDriverManagerException: org.apache.hc.client5.http.ConnectTimeoutException: Connect to https://msedgedriver.azureedge.net:443 [msedgedriver.azureedge.net/13.107.246.38, msedgedriver.azureedge.net/13.107.213.38] failed: Read timed out\r\n  at io.github.bonigarcia.wdm.WebDriverManager.handleException(WebDriverManager.java:809)\r\n  at io.github.bonigarcia.wdm.WebDriverManager.manage(WebDriverManager.java:599)\r\n  at io.github.bonigarcia.wdm.WebDriverManager.fallback(WebDriverManager.java:825)\r\n  at io.github.bonigarcia.wdm.WebDriverManager.handleException(WebDriverManager.java:806)\r\n  at io.github.bonigarcia.wdm.WebDriverManager.manage(WebDriverManager.java:599)\r\n  at io.github.bonigarcia.wdm.WebDriverManager.handleException(WebDriverManager.java:799)\r\n  at io.github.bonigarcia.wdm.WebDriverManager.manage(WebDriverManager.java:599)\r\n  at io.github.bonigarcia.wdm.WebDriverManager.setup(WebDriverManager.java:287)\r\n```","title":"WebDriverManager - Problem with inDocker function","body":"<p>I am using WebDriverManager for over an year, but currently we moved our CI/CD to different tool. There is additional firewall that cut of external libraries. I tried</p>\n<pre><code>WebDriverManager.firefoxdriver().browserInDocker().create();\n</code></pre>\n<p>and</p>\n<pre><code>WebDriverManager.firefoxdriver().browserInDocker().linux().setup(;\n</code></pre>\n<p>but without luck. There was decision to move that drivers into our build repo but I don't know which drivers to move there.</p>\n<pre><code>io.github.bonigarcia.wdm.config.WebDriverManagerException: io.github.bonigarcia.wdm.config.WebDriverManagerException: org.apache.hc.client5.http.ConnectTimeoutException: Connect to https://msedgedriver.azureedge.net:443 [msedgedriver.azureedge.net/13.107.246.38, msedgedriver.azureedge.net/13.107.213.38] failed: Read timed out\n  at io.github.bonigarcia.wdm.WebDriverManager.handleException(WebDriverManager.java:809)\n  at io.github.bonigarcia.wdm.WebDriverManager.manage(WebDriverManager.java:599)\n  at io.github.bonigarcia.wdm.WebDriverManager.fallback(WebDriverManager.java:825)\n  at io.github.bonigarcia.wdm.WebDriverManager.handleException(WebDriverManager.java:806)\n  at io.github.bonigarcia.wdm.WebDriverManager.manage(WebDriverManager.java:599)\n  at io.github.bonigarcia.wdm.WebDriverManager.handleException(WebDriverManager.java:799)\n  at io.github.bonigarcia.wdm.WebDriverManager.manage(WebDriverManager.java:599)\n  at io.github.bonigarcia.wdm.WebDriverManager.setup(WebDriverManager.java:287)\n</code></pre>\n"},{"tags":["java","class","local-class"],"comments":[{"owner":{"account_id":264294,"reputation":23543,"user_id":550471,"accept_rate":84,"display_name":"Someone Somewhere"},"score":1,"creation_date":1426890239,"post_id":2428186,"comment_id":46571123,"body_markdown":"I agree, it&#39;s incredibly messy looking. I inspected some code that my colleague wrote and found this local class in a method... it just made me feel like this module was totally defiled.","body":"I agree, it&#39;s incredibly messy looking. I inspected some code that my colleague wrote and found this local class in a method... it just made me feel like this module was totally defiled."},{"owner":{"account_id":1131752,"reputation":2435,"user_id":1117679,"display_name":"sorrymissjackson"},"score":10,"creation_date":1457596058,"post_id":2428186,"comment_id":59480008,"body_markdown":"Sometimes it&#39;s more about hiding away stuff that you need nowhere else, rather than looks ;)","body":"Sometimes it&#39;s more about hiding away stuff that you need nowhere else, rather than looks ;)"}],"answers":[{"comments":[{"owner":{"account_id":50123,"reputation":365473,"user_id":149392,"display_name":"sepp2k"},"score":2,"creation_date":1268337778,"post_id":2428237,"comment_id":2411855,"body_markdown":"2. Ehrm, sure it will. Class files will be generated for every nested, local or anonymous class in your java file.","body":"2. Ehrm, sure it will. Class files will be generated for every nested, local or anonymous class in your java file."},{"owner":{"account_id":102991,"reputation":378292,"user_id":276101,"accept_rate":67,"display_name":"polygenelubricants"},"score":2,"creation_date":1268337846,"post_id":2428237,"comment_id":2411867,"body_markdown":"&quot;2. No such file will be written.&quot; -- this is wrong. It creates `TestClass$1TestMethodClass.class`, analogous to how inner classes `.class` files are named.","body":"&quot;2. No such file will be written.&quot; -- this is wrong. It creates <code>TestClass$1TestMethodClass.class</code>, analogous to how inner classes <code>.class</code> files are named."},{"owner":{"account_id":10340,"reputation":55904,"user_id":19479,"accept_rate":69,"display_name":"Steve B."},"score":0,"creation_date":1268337924,"post_id":2428237,"comment_id":2411877,"body_markdown":"Good answer, exception for 2: you will get the anonymous class generated, in this case &quot;TestClass$1TestMethodClass.class&quot;","body":"Good answer, exception for 2: you will get the anonymous class generated, in this case &quot;TestClass$1TestMethodClass.class&quot;"}],"tags":[],"owner":{"account_id":110220,"reputation":37362,"user_id":291741,"accept_rate":87,"display_name":"Chris Lercher"},"comment_count":3,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1268337656,"creation_date":1268337656,"answer_id":2428237,"question_id":2428186,"body_markdown":"1. The class can&#39;t be seen (i.e. instantiated, its methods accessed without Reflection) from outside the method. Also, it can access the local variables defined in testMethod(), but before the class definition.\r\n\r\n2. I actually thought: &quot;No such file will be written.&quot; until I just tried it: Oh yes, such a file is created! It will be called something like A$1B.class, where A is the outer class, and B is the local class.\r\n\r\n3. Especially for callback functions (event handlers in GUIs, like onClick() when a Button is clicked etc.), it&#39;s quite usual to use &quot;anonymous classes&quot; - first of all because you can end up with a lot of them. But sometimes anonymous classes aren&#39;t good enough - especially, you can&#39;t define a constructor on them. In these cases, these method local classes can be a good alternative.","title":"Use of class definitions inside a method in Java","body":"<ol>\n<li><p>The class can't be seen (i.e. instantiated, its methods accessed without Reflection) from outside the method. Also, it can access the local variables defined in testMethod(), but before the class definition.</p></li>\n<li><p>I actually thought: \"No such file will be written.\" until I just tried it: Oh yes, such a file is created! It will be called something like A$1B.class, where A is the outer class, and B is the local class.</p></li>\n<li><p>Especially for callback functions (event handlers in GUIs, like onClick() when a Button is clicked etc.), it's quite usual to use \"anonymous classes\" - first of all because you can end up with a lot of them. But sometimes anonymous classes aren't good enough - especially, you can't define a constructor on them. In these cases, these method local classes can be a good alternative.</p></li>\n</ol>\n"},{"comments":[{"owner":{"account_id":9640511,"reputation":4079,"user_id":7154924,"accept_rate":86,"display_name":"flow2k"},"score":2,"creation_date":1500244269,"post_id":2428253,"comment_id":77237117,"body_markdown":"Great link (still works after 7+ years!). In particular, note &quot;Like member classes, local classes are associated with a containing instance, and *can access any members, including private members, of the containing class*.&quot;","body":"Great link (still works after 7+ years!). In particular, note &quot;Like member classes, local classes are associated with a containing instance, and <i>can access any members, including private members, of the containing class</i>.&quot;"}],"tags":[],"owner":{"account_id":52822,"reputation":1089035,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"comment_count":1,"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1268337752,"creation_date":1268337752,"answer_id":2428253,"question_id":2428186,"body_markdown":"Those are called **local classes**. You can find a detailed explanation and an example [here][1]. The example returns a specific implementation which we doesn&#39;t need to know about outside the method.\r\n\r\n\r\n  [1]: http://docstore.mik.ua/orelly/java-ent/jnut/ch03_11.htm","title":"Use of class definitions inside a method in Java","body":"<p>Those are called <strong>local classes</strong>. You can find a detailed explanation and an example <a href=\"http://docstore.mik.ua/orelly/java-ent/jnut/ch03_11.htm\" rel=\"noreferrer\">here</a>. The example returns a specific implementation which we doesn't need to know about outside the method.</p>\n"},{"tags":[],"owner":{"account_id":10340,"reputation":55904,"user_id":19479,"accept_rate":69,"display_name":"Steve B."},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1268338065,"creation_date":1268338065,"answer_id":2428284,"question_id":2428186,"body_markdown":"The real purpose of this is to allow us to create classes inline in function calls to console those of us who like to pretend that we&#39;re writing in a functional language ;)","title":"Use of class definitions inside a method in Java","body":"<p>The real purpose of this is to allow us to create classes inline in function calls to console those of us who like to pretend that we're writing in a functional language ;)</p>\n"},{"comments":[{"owner":{"account_id":92937,"reputation":18601,"user_id":254477,"accept_rate":87,"display_name":"Sled"},"score":0,"creation_date":1415295171,"post_id":2428334,"comment_id":42148134,"body_markdown":"Any idea in which version of Java local classes where introduced?","body":"Any idea in which version of Java local classes where introduced?"},{"owner":{"account_id":941,"reputation":50408,"user_id":1237,"accept_rate":95,"display_name":"Jacob Mattison"},"score":1,"creation_date":1415302068,"post_id":2428334,"comment_id":42151923,"body_markdown":"Inner classes were added in Java 1.1 -- I&#39;m guessing local classes were as well but I don&#39;t have documentation on that.","body":"Inner classes were added in Java 1.1 -- I&#39;m guessing local classes were as well but I don&#39;t have documentation on that."},{"owner":{"account_id":5953401,"reputation":5248,"user_id":4680812,"accept_rate":77,"display_name":"S. Pauk"},"score":0,"creation_date":1428994833,"post_id":2428334,"comment_id":47386089,"body_markdown":"Could you provide a better example for what could be a use case of a non-anonymous local class? Your second block of code could be rewritten with anonymous classes.","body":"Could you provide a better example for what could be a use case of a non-anonymous local class? Your second block of code could be rewritten with anonymous classes."},{"owner":{"account_id":941,"reputation":50408,"user_id":1237,"accept_rate":95,"display_name":"Jacob Mattison"},"score":1,"creation_date":1429016932,"post_id":2428334,"comment_id":47399275,"body_markdown":"Most uses of non-anonymous local classes can be accomplished with anonymous classes.  I didn&#39;t flesh out the example but you&#39;d typically use a named local class if you need to create more that one instance of the same class type.","body":"Most uses of non-anonymous local classes can be accomplished with anonymous classes.  I didn&#39;t flesh out the example but you&#39;d typically use a named local class if you need to create more that one instance of the same class type."},{"owner":{"account_id":9640511,"reputation":4079,"user_id":7154924,"accept_rate":86,"display_name":"flow2k"},"score":1,"creation_date":1500244202,"post_id":2428334,"comment_id":77237102,"body_markdown":"For the OP: note that local class provides a way for threads to communicate - the `parameter` above might be declared in the enclosing method, and is accessible by both threads.","body":"For the OP: note that local class provides a way for threads to communicate - the <code>parameter</code> above might be declared in the enclosing method, and is accessible by both threads."},{"owner":{"account_id":338681,"reputation":15574,"user_id":667690,"accept_rate":78,"display_name":"Theodore Norvell"},"score":0,"creation_date":1531678189,"post_id":2428334,"comment_id":89674291,"body_markdown":"Another reason to use non-anonymous local classes is when the local class has a nontrivial constructor.","body":"Another reason to use non-anonymous local classes is when the local class has a nontrivial constructor."},{"owner":{"account_id":19504722,"reputation":383,"user_id":14270627,"display_name":"Tech Expert Wizard"},"score":0,"creation_date":1606513277,"post_id":2428334,"comment_id":114992224,"body_markdown":"[This](docstore.mik.ua/orelly/java-ent/jnut/ch03_11.htm) website states &quot;The addition of local classes in Java 1.1...&quot; in Section 3.11.3.","body":"[This](docstore.mik.ua/orelly/java-ent/jnut/ch03_11.htm) website states &quot;The addition of local classes in Java 1.1...&quot; in Section 3.11.3."}],"tags":[],"owner":{"account_id":941,"reputation":50408,"user_id":1237,"accept_rate":95,"display_name":"Jacob Mattison"},"comment_count":7,"down_vote_count":0,"up_vote_count":83,"is_accepted":true,"score":83,"last_activity_date":1461267265,"creation_date":1268338517,"answer_id":2428334,"question_id":2428186,"body_markdown":"This is called a local class.\r\n\r\n2 is the easy one: yes, a class file will be generated.\r\n\r\n1 and 3 are kind of the same question.  You would use a local class where you never need to instantiate one or know about implementation details anywhere but in one method.\r\n\r\nA typical use would be to create a throw-away implementation of some interface.  For example you&#39;ll often see something like this:\r\n\r\n\r\n      //within some method\r\n      taskExecutor.execute( new Runnable() {\r\n           public void run() {\r\n                classWithMethodToFire.doSomething( parameter );\r\n           }\r\n      }); \r\n\r\nIf you needed to create a bunch of these and do something with them, you might change this to\r\n\r\n      //within some method\r\n      class myFirstRunnableClass implements Runnable {\r\n           public void run() {\r\n                classWithMethodToFire.doSomething( parameter );\r\n           }\r\n      }\r\n      class mySecondRunnableClass implements Runnable {\r\n           public void run() {\r\n                classWithMethodToFire.doSomethingElse( parameter );\r\n           }\r\n      }\r\n      taskExecutor.execute(new myFirstRunnableClass());\r\n      taskExecutor.execute(new mySecondRunnableClass());\r\n\r\nRegarding interfaces: I&#39;m not sure if there&#39;s a technical issue that makes locally-defined interfaces a problem for the compiler, but even if there isn&#39;t, they wouldn&#39;t add any value.  If a local class that implements a local interface were used outside the method, the interface would be meaningless.  And if a local class was only going to be used inside the method, both the interface and the class would be implemented within that method, so the interface definition would be redundant.\r\n","title":"Use of class definitions inside a method in Java","body":"<p>This is called a local class.</p>\n\n<p>2 is the easy one: yes, a class file will be generated.</p>\n\n<p>1 and 3 are kind of the same question.  You would use a local class where you never need to instantiate one or know about implementation details anywhere but in one method.</p>\n\n<p>A typical use would be to create a throw-away implementation of some interface.  For example you'll often see something like this:</p>\n\n<pre><code>  //within some method\n  taskExecutor.execute( new Runnable() {\n       public void run() {\n            classWithMethodToFire.doSomething( parameter );\n       }\n  }); \n</code></pre>\n\n<p>If you needed to create a bunch of these and do something with them, you might change this to</p>\n\n<pre><code>  //within some method\n  class myFirstRunnableClass implements Runnable {\n       public void run() {\n            classWithMethodToFire.doSomething( parameter );\n       }\n  }\n  class mySecondRunnableClass implements Runnable {\n       public void run() {\n            classWithMethodToFire.doSomethingElse( parameter );\n       }\n  }\n  taskExecutor.execute(new myFirstRunnableClass());\n  taskExecutor.execute(new mySecondRunnableClass());\n</code></pre>\n\n<p>Regarding interfaces: I'm not sure if there's a technical issue that makes locally-defined interfaces a problem for the compiler, but even if there isn't, they wouldn't add any value.  If a local class that implements a local interface were used outside the method, the interface would be meaningless.  And if a local class was only going to be used inside the method, both the interface and the class would be implemented within that method, so the interface definition would be redundant.</p>\n"},{"tags":[],"owner":{"account_id":39466,"reputation":3001,"user_id":113839,"accept_rate":68,"display_name":"Fazal"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1268339253,"creation_date":1268339253,"answer_id":2428438,"question_id":2428186,"body_markdown":"The main reason to define inner classes (within a method or a class) is to deal with accessibility of members and variables of the enclosing class and method. \r\nAn inner class can look up private data members and operate on them. If within a method it can deal with final local variable as well.\r\n\r\nHaving inner classes does help in making sure this class is not accessible to outside world. This holds true especially for cases of UI programming in GWT or GXT etc where JS generating code is written in java and behavior for each button or event has to be defined by creating anonymous classes","title":"Use of class definitions inside a method in Java","body":"<p>The main reason to define inner classes (within a method or a class) is to deal with accessibility of members and variables of the enclosing class and method. \nAn inner class can look up private data members and operate on them. If within a method it can deal with final local variable as well.</p>\n\n<p>Having inner classes does help in making sure this class is not accessible to outside world. This holds true especially for cases of UI programming in GWT or GXT etc where JS generating code is written in java and behavior for each button or event has to be defined by creating anonymous classes</p>\n"},{"comments":[{"owner":{"account_id":257480,"reputation":5081,"user_id":538921,"accept_rate":91,"display_name":"Edward J Beckett"},"score":0,"creation_date":1423123188,"post_id":2428534,"comment_id":45023022,"body_markdown":"I abuse #2 quite a bit to assign return values from functions.","body":"I abuse #2 quite a bit to assign return values from functions."}],"tags":[],"owner":{"account_id":62515,"reputation":45036,"user_id":185722,"accept_rate":100,"display_name":"Alexander Pogrebnyak"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1268340350,"creation_date":1268340350,"answer_id":2428534,"question_id":2428186,"body_markdown":"The only case when you would like to have a full blown function inner class vs anonymous class ( a.k.a. Java closure ) is when the following conditions are met\r\n\r\n 1. you need to supply an interface or abstract class implementation\r\n 2. you want to use some final parameters defined in calling function\r\n 3. you need to record some state of execution of the interface call.\r\n\r\nE.g. somebody wants a `Runnable` and you want to record when the execution has started and ended.\r\n\r\nWith anonymous class it is not possible to do, with inner class you can do this.\r\n\r\nHere is an example do demonstrate my point\r\n\r\n    private static void testMethod (\r\n            final Object param1,\r\n            final Object param2\r\n        )\r\n    {\r\n        class RunnableWithStartAndEnd extends Runnable{\r\n            Date start;\r\n            Date end;\r\n\r\n            public void run () {\r\n                start = new Date( );\r\n                try\r\n                {\r\n                    evalParam1( param1 );\r\n                    evalParam2( param2 );\r\n                    ...\r\n                }\r\n                finally\r\n                {\r\n                    end = new Date( );\r\n                }\r\n            }\r\n        }\r\n\r\n        final RunnableWithStartAndEnd runnable = new RunnableWithStartAndEnd( );\r\n\r\n        final Thread thread = new Thread( runnable );\r\n        thread.start( );\r\n        thread.join( );\r\n\r\n        System.out.println( runnable.start );\r\n        System.out.println( runnable.end );\r\n    }\r\n\r\nBefore using this pattern though, please evaluate if plain old top-level class, or inner class, or static inner class are better alternatives.\r\n","title":"Use of class definitions inside a method in Java","body":"<p>The only case when you would like to have a full blown function inner class vs anonymous class ( a.k.a. Java closure ) is when the following conditions are met</p>\n\n<ol>\n<li>you need to supply an interface or abstract class implementation</li>\n<li>you want to use some final parameters defined in calling function</li>\n<li>you need to record some state of execution of the interface call.</li>\n</ol>\n\n<p>E.g. somebody wants a <code>Runnable</code> and you want to record when the execution has started and ended.</p>\n\n<p>With anonymous class it is not possible to do, with inner class you can do this.</p>\n\n<p>Here is an example do demonstrate my point</p>\n\n<pre><code>private static void testMethod (\n        final Object param1,\n        final Object param2\n    )\n{\n    class RunnableWithStartAndEnd extends Runnable{\n        Date start;\n        Date end;\n\n        public void run () {\n            start = new Date( );\n            try\n            {\n                evalParam1( param1 );\n                evalParam2( param2 );\n                ...\n            }\n            finally\n            {\n                end = new Date( );\n            }\n        }\n    }\n\n    final RunnableWithStartAndEnd runnable = new RunnableWithStartAndEnd( );\n\n    final Thread thread = new Thread( runnable );\n    thread.start( );\n    thread.join( );\n\n    System.out.println( runnable.start );\n    System.out.println( runnable.end );\n}\n</code></pre>\n\n<p>Before using this pattern though, please evaluate if plain old top-level class, or inner class, or static inner class are better alternatives.</p>\n"},{"tags":[],"owner":{"account_id":3447004,"reputation":31,"user_id":2887587,"display_name":"s-evgheni"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1586453124,"creation_date":1586452141,"answer_id":61126506,"question_id":2428186,"body_markdown":"I&#39;ve came across a good example in the Spring. The framework is using concept of local class definitions inside of the method to deal with various database operations in a uniform way.\r\n\r\nAssume you have a code like this:\r\n\r\n    JdbcTemplate jdbcOperations = new JdbcTemplate(this.myDataSource);\r\n    jdbcOperations.execute(&quot;call my_stored_procedure()&quot;)\r\n    jdbcOperations.query(queryToRun, new MyCustomRowMapper(), withInputParams);\r\n    jdbcOperations.update(queryToRun, withInputParams);\r\n\r\n\r\nLet&#39;s first look at the implementation of the execute():\r\n    \r\n        @Override\r\n    \tpublic void execute(final String sql) throws DataAccessException {\r\n    \t\tif (logger.isDebugEnabled()) {\r\n    \t\t\tlogger.debug(&quot;Executing SQL statement [&quot; + sql + &quot;]&quot;);\r\n    \t\t}\r\n    \r\n    \t\t/**\r\n    \t\t * Callback to execute the statement.\r\n             (can access method local state like sql input parameter)\r\n    \t\t */\r\n        \tclass ExecuteStatementCallback implements StatementCallback&lt;Object&gt;, SqlProvider {\r\n        \t\t@Override\r\n        \t\t@Nullable\r\n        \t\tpublic Object doInStatement(Statement stmt) throws SQLException {\r\n        \t\t\tstmt.execute(sql);\r\n        \t\t\treturn null;\r\n        \t\t}\r\n        \t\t@Override\r\n        \t\tpublic String getSql() {\r\n        \t\t\treturn sql;\r\n        \t\t}\r\n        \t}\r\n\r\n            //transforms method input into a functional Object\r\n        \texecute(new ExecuteStatementCallback());\r\n        }\r\n\r\n\r\nPlease note the last line. Spring does this exact &quot;trick&quot; for the rest of the methods as well:\r\n\r\n    //uses local class QueryStatementCallback implements StatementCallback&lt;T&gt;, SqlProvider\r\n    jdbcOperations.query(...) \r\n    //uses local class UpdateStatementCallback implements StatementCallback&lt;Integer&gt;, SqlProvider\r\n    jdbcOperations.update(...)\r\n\r\n\r\nThe &quot;trick&quot; with local classes allows the framework to deal with all of those scenarios in a single method which accept those classes via StatementCallback interface. \r\nThis single method acts as a bridge between actions (execute, update) and common operations around them (e.g execution, connection management, error translation and dbms console output)\r\n\r\n    public &lt;T&gt; T execute(StatementCallback&lt;T&gt; action) throws DataAccessException    {\r\n    \t\tAssert.notNull(action, &quot;Callback object must not be null&quot;);\r\n    \r\n    \t\tConnection con = DataSourceUtils.getConnection(obtainDataSource());\r\n    \t\tStatement stmt = null;\r\n    \t\ttry {\r\n    \t\t\tstmt = con.createStatement();\r\n    \t\t\tapplyStatementSettings(stmt);\r\n                //\r\n    \t\t\tT result = action.doInStatement(stmt);\r\n    \t\t\thandleWarnings(stmt);\r\n    \t\t\treturn result;\r\n    \t\t}\r\n    \t\tcatch (SQLException ex) {\r\n    \t\t\t// Release Connection early, to avoid potential connection pool deadlock\r\n    \t\t\t// in the case when the exception translator hasn&#39;t been initialized yet.\r\n    \t\t\tString sql = getSql(action);\r\n    \t\t\tJdbcUtils.closeStatement(stmt);\r\n    \t\t\tstmt = null;\r\n    \t\t\tDataSourceUtils.releaseConnection(con, getDataSource());\r\n    \t\t\tcon = null;\r\n    \t\t\tthrow translateException(&quot;StatementCallback&quot;, sql, ex);\r\n    \t\t}\r\n    \t\tfinally {\r\n    \t\t\tJdbcUtils.closeStatement(stmt);\r\n    \t\t\tDataSourceUtils.releaseConnection(con, getDataSource());\r\n    \t\t}\r\n    \t}","title":"Use of class definitions inside a method in Java","body":"<p>I've came across a good example in the Spring. The framework is using concept of local class definitions inside of the method to deal with various database operations in a uniform way.</p>\n\n<p>Assume you have a code like this:</p>\n\n<pre><code>JdbcTemplate jdbcOperations = new JdbcTemplate(this.myDataSource);\njdbcOperations.execute(\"call my_stored_procedure()\")\njdbcOperations.query(queryToRun, new MyCustomRowMapper(), withInputParams);\njdbcOperations.update(queryToRun, withInputParams);\n</code></pre>\n\n<p>Let's first look at the implementation of the execute():</p>\n\n<pre><code>    @Override\n    public void execute(final String sql) throws DataAccessException {\n        if (logger.isDebugEnabled()) {\n            logger.debug(\"Executing SQL statement [\" + sql + \"]\");\n        }\n\n        /**\n         * Callback to execute the statement.\n         (can access method local state like sql input parameter)\n         */\n        class ExecuteStatementCallback implements StatementCallback&lt;Object&gt;, SqlProvider {\n            @Override\n            @Nullable\n            public Object doInStatement(Statement stmt) throws SQLException {\n                stmt.execute(sql);\n                return null;\n            }\n            @Override\n            public String getSql() {\n                return sql;\n            }\n        }\n\n        //transforms method input into a functional Object\n        execute(new ExecuteStatementCallback());\n    }\n</code></pre>\n\n<p>Please note the last line. Spring does this exact \"trick\" for the rest of the methods as well:</p>\n\n<pre><code>//uses local class QueryStatementCallback implements StatementCallback&lt;T&gt;, SqlProvider\njdbcOperations.query(...) \n//uses local class UpdateStatementCallback implements StatementCallback&lt;Integer&gt;, SqlProvider\njdbcOperations.update(...)\n</code></pre>\n\n<p>The \"trick\" with local classes allows the framework to deal with all of those scenarios in a single method which accept those classes via StatementCallback interface. \nThis single method acts as a bridge between actions (execute, update) and common operations around them (e.g execution, connection management, error translation and dbms console output)</p>\n\n<pre><code>public &lt;T&gt; T execute(StatementCallback&lt;T&gt; action) throws DataAccessException    {\n        Assert.notNull(action, \"Callback object must not be null\");\n\n        Connection con = DataSourceUtils.getConnection(obtainDataSource());\n        Statement stmt = null;\n        try {\n            stmt = con.createStatement();\n            applyStatementSettings(stmt);\n            //\n            T result = action.doInStatement(stmt);\n            handleWarnings(stmt);\n            return result;\n        }\n        catch (SQLException ex) {\n            // Release Connection early, to avoid potential connection pool deadlock\n            // in the case when the exception translator hasn't been initialized yet.\n            String sql = getSql(action);\n            JdbcUtils.closeStatement(stmt);\n            stmt = null;\n            DataSourceUtils.releaseConnection(con, getDataSource());\n            con = null;\n            throw translateException(\"StatementCallback\", sql, ex);\n        }\n        finally {\n            JdbcUtils.closeStatement(stmt);\n            DataSourceUtils.releaseConnection(con, getDataSource());\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4297922,"reputation":184,"user_id":3512451,"accept_rate":75,"display_name":"Rancbar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671200980,"creation_date":1671200980,"answer_id":74825816,"question_id":2428186,"body_markdown":"Everything is clear here but I wanted to place another example of reasonable use case for this definition type of class for the next readers.\r\n\r\nRegarding @jacob-mattison &#39;s answer, If we assume we have some common actions in these throw-away implementations of the interface, So, it&#39;s better to write it once but keep the implementations anonymous too:\r\n\r\n\r\n        //within some method\r\n        abstract class myRunnableClass implements Runnable {\r\n\r\n            protected abstract void DO_AN_SPECIFIC_JOB();\r\n\r\n            public void run() {\r\n                someCommonCode();\r\n                //...\r\n                DO_AN_SPECIFIC_JOB();\r\n                //..\r\n                anotherCommonCode();\r\n            }\r\n        }\r\n\r\nThen it&#39;s easy to use this defined class and just implement the specific task separately:\r\n\r\n        taskExecutor.execute(new myRunnableClass() {\r\n            protected void DO_AN_SPECIFIC_JOB() {\r\n                // Do something\r\n            }\r\n        });\r\n        taskExecutor.execute(new myRunnableClass() {\r\n            protected void DO_AN_SPECIFIC_JOB() {\r\n                // Do another thing\r\n            }\r\n        });","title":"Use of class definitions inside a method in Java","body":"<p>Everything is clear here but I wanted to place another example of reasonable use case for this definition type of class for the next readers.</p>\n<p>Regarding @jacob-mattison 's answer, If we assume we have some common actions in these throw-away implementations of the interface, So, it's better to write it once but keep the implementations anonymous too:</p>\n<pre><code>    //within some method\n    abstract class myRunnableClass implements Runnable {\n\n        protected abstract void DO_AN_SPECIFIC_JOB();\n\n        public void run() {\n            someCommonCode();\n            //...\n            DO_AN_SPECIFIC_JOB();\n            //..\n            anotherCommonCode();\n        }\n    }\n</code></pre>\n<p>Then it's easy to use this defined class and just implement the specific task separately:</p>\n<pre><code>    taskExecutor.execute(new myRunnableClass() {\n        protected void DO_AN_SPECIFIC_JOB() {\n            // Do something\n        }\n    });\n    taskExecutor.execute(new myRunnableClass() {\n        protected void DO_AN_SPECIFIC_JOB() {\n            // Do another thing\n        }\n    });\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1844706,"reputation":3419,"user_id":1673320,"accept_rate":86,"display_name":"itachi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693580382,"creation_date":1693580382,"answer_id":77024176,"question_id":2428186,"body_markdown":"The local classes are a neat way to get default values out of an annotation. Let&#39;s say you implemented a `Foo` annotation with a bunch of parameters with default values:\r\n\r\n```\r\n@Retention(RetentionPolicy.RUNTIME)\r\n@Target(ElementType.TYPE)\r\npublic @interface Foo {\r\n\r\n  String paramBar() default &quot;Bar&quot;;\r\n\r\n  String paramVar() default &quot;Var&quot;;\r\n}\r\n```\r\nNow, let&#39;s say you have a code where you look for your `Foo` annotation on classes given to you in a set of `Class&lt;?&gt;` objects, and when present you read the parameters, but when missing you want to get the default values. Here&#39;s how it could be done:\r\n\r\n```\r\nvoid aMethod(Set&lt;Class&lt;?&gt;&gt; classSet) {\r\n  @Foo\r\n  final class FooDefault { }\r\n\r\n  for (var cls : classSet) {\r\n    Foo foo;\r\n\r\n    if (cls.isAnnotationPresent(Foo.class)) {\r\n      foo = cls.getAnnotation(Foo.class);\r\n    } else {\r\n      foo = FooDefault.class.getAnnotation(Foo.class);\r\n    }\r\n\r\n    doSomethingCool(cls, foo);\r\n  }\r\n}\r\n```","title":"Use of class definitions inside a method in Java","body":"<p>The local classes are a neat way to get default values out of an annotation. Let's say you implemented a <code>Foo</code> annotation with a bunch of parameters with default values:</p>\n<pre><code>@Retention(RetentionPolicy.RUNTIME)\n@Target(ElementType.TYPE)\npublic @interface Foo {\n\n  String paramBar() default &quot;Bar&quot;;\n\n  String paramVar() default &quot;Var&quot;;\n}\n</code></pre>\n<p>Now, let's say you have a code where you look for your <code>Foo</code> annotation on classes given to you in a set of <code>Class&lt;?&gt;</code> objects, and when present you read the parameters, but when missing you want to get the default values. Here's how it could be done:</p>\n<pre><code>void aMethod(Set&lt;Class&lt;?&gt;&gt; classSet) {\n  @Foo\n  final class FooDefault { }\n\n  for (var cls : classSet) {\n    Foo foo;\n\n    if (cls.isAnnotationPresent(Foo.class)) {\n      foo = cls.getAnnotation(Foo.class);\n    } else {\n      foo = FooDefault.class.getAnnotation(Foo.class);\n    }\n\n    doSomethingCool(cls, foo);\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":92026,"reputation":35060,"user_id":1977903,"accept_rate":96,"display_name":"bragboy"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":93073,"favorite_count":0,"down_vote_count":0,"up_vote_count":127,"accepted_answer_id":2428334,"answer_count":9,"score":127,"last_activity_date":1693580382,"creation_date":1268337301,"question_id":2428186,"body_markdown":"Example:\r\n\r\n    public class TestClass {\r\n    \r\n        public static void main(String[] args) {\r\n            TestClass t = new TestClass();\r\n        }\r\n    \r\n        private static void testMethod() {\r\n            abstract class TestMethod {\r\n                int a;\r\n                int b;\r\n                int c;\r\n    \r\n                abstract void implementMe();\r\n            }\r\n    \r\n            class DummyClass extends TestMethod {\r\n                void implementMe() {}\r\n            }\r\n    \r\n            DummyClass dummy = new DummyClass();\r\n        }\r\n    }\r\n\r\nI found out that the above piece of code is perfectly legal in Java. I have the following questions.\r\n\r\n 1. What is the use of ever having a class definition inside a method?\r\n 2. Will a class file be generated for `DummyClass`\r\n 3. It&#39;s hard for me to imagine this concept in an Object Oriented manner. Having a class definition inside a behavior. Probably can someone tell me with equivalent real world examples.\r\n 4. Abstract classes inside a method sounds a bit crazy to me. But no interfaces allowed. Is there any reason behind this?\r\n","title":"Use of class definitions inside a method in Java","body":"<p>Example:</p>\n\n<pre><code>public class TestClass {\n\n    public static void main(String[] args) {\n        TestClass t = new TestClass();\n    }\n\n    private static void testMethod() {\n        abstract class TestMethod {\n            int a;\n            int b;\n            int c;\n\n            abstract void implementMe();\n        }\n\n        class DummyClass extends TestMethod {\n            void implementMe() {}\n        }\n\n        DummyClass dummy = new DummyClass();\n    }\n}\n</code></pre>\n\n<p>I found out that the above piece of code is perfectly legal in Java. I have the following questions.</p>\n\n<ol>\n<li>What is the use of ever having a class definition inside a method?</li>\n<li>Will a class file be generated for <code>DummyClass</code></li>\n<li>It's hard for me to imagine this concept in an Object Oriented manner. Having a class definition inside a behavior. Probably can someone tell me with equivalent real world examples.</li>\n<li>Abstract classes inside a method sounds a bit crazy to me. But no interfaces allowed. Is there any reason behind this?</li>\n</ol>\n"},{"tags":["java","spring","spring-boot","spring-mvc","servlets"],"comments":[{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1693581518,"post_id":77024167,"comment_id":135784465,"body_markdown":"i think it will help you [spring-controller-is-not-supporting-serverhttprequest](https://stackoverflow.com/questions/56320109/spring-controller-is-not-supporting-serverhttprequest).","body":"i think it will help you <a href=\"https://stackoverflow.com/questions/56320109/spring-controller-is-not-supporting-serverhttprequest\">spring-controller-is-not-supporting-serverhttprequest</a>."},{"owner":{"account_id":350117,"reputation":8663,"user_id":685806,"accept_rate":44,"display_name":"Pino"},"score":0,"creation_date":1693754213,"post_id":77024167,"comment_id":135799275,"body_markdown":"Does this answer your question? [Spring controller is not supporting ServerHttpRequest](https://stackoverflow.com/questions/56320109/spring-controller-is-not-supporting-serverhttprequest)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/56320109/spring-controller-is-not-supporting-serverhttprequest\">Spring controller is not supporting ServerHttpRequest</a>"},{"owner":{"account_id":25312750,"reputation":1,"user_id":19135291,"display_name":"Rineeth Saladi"},"score":0,"creation_date":1693904396,"post_id":77024167,"comment_id":135817492,"body_markdown":"@AndreiLisa no, there reactive app is being used. But in my case we are using web mvc app only. I tried few things mentioned but none seem to be working.","body":"@AndreiLisa no, there reactive app is being used. But in my case we are using web mvc app only. I tried few things mentioned but none seem to be working."},{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1693910796,"post_id":77024167,"comment_id":135818699,"body_markdown":"can you also share the packages import for `ServerHttpRequest ` , i mean from what package was it imported ?","body":"can you also share the packages import for <code>ServerHttpRequest </code> , i mean from what package was it imported ?"},{"owner":{"account_id":25312750,"reputation":1,"user_id":19135291,"display_name":"Rineeth Saladi"},"score":0,"creation_date":1693911437,"post_id":77024167,"comment_id":135818837,"body_markdown":"@AndreiLisa have mentioned it in the question. It is coming from &quot;org.springframework.http.server.ServerHttpRequest&quot;","body":"@AndreiLisa have mentioned it in the question. It is coming from &quot;org.springframework.http.server.ServerHttpRequest&quot;"},{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1693912070,"post_id":77024167,"comment_id":135818979,"body_markdown":"yep , sorry now i see but you can do it if you will open documentation of both you will get that these 2 interfaces are total different and have different usages.","body":"yep , sorry now i see but you can do it if you will open documentation of both you will get that these 2 interfaces are total different and have different usages."},{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1693913449,"post_id":77024167,"comment_id":135819239,"body_markdown":"Sorry i mean cant","body":"Sorry i mean cant"},{"owner":{"account_id":25312750,"reputation":1,"user_id":19135291,"display_name":"Rineeth Saladi"},"score":0,"creation_date":1694509697,"post_id":77024167,"comment_id":135896658,"body_markdown":"@AndreiLisa any idea about how to use org.springframework.http.server.ServerHttpRequest as it is not very clear in documentation","body":"@AndreiLisa any idea about how to use org.springframework.http.server.ServerHttpRequest as it is not very clear in documentation"},{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1694510823,"post_id":77024167,"comment_id":135896890,"body_markdown":"here in your case we are talking about two different topics `servlet` and `server`, for more information you can check the answers of this [question](https://stackoverflow.com/questions/5039354/difference-between-an-application-server-and-a-servlet-container) that will give you more details and in your own you can find more details after it","body":"here in your case we are talking about two different topics <code>servlet</code> and <code>server</code>, for more information you can check the answers of this <a href=\"https://stackoverflow.com/questions/5039354/difference-between-an-application-server-and-a-servlet-container\">question</a> that will give you more details and in your own you can find more details after it"}],"owner":{"account_id":25312750,"reputation":1,"user_id":19135291,"display_name":"Rineeth Saladi"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":117,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693580299,"creation_date":1693580299,"question_id":77024167,"body_markdown":"using java 11 in my spring web mvc application and want to use &quot;org.springframework.http.server.ServerHttpRequest&quot; instead of &quot;javax.servlet.http.HttpServletRequest&quot; in my application as &quot;ServerHttpRequest&quot; is provided by spring. Usage of the same is provided in code snippet \r\n```\r\n`@ApiOperation(value = &quot;sample text&quot;&quot;)\r\n  @ApiResponses(\r\n      value = {\r\n        @ApiResponse(\r\n            code = 200,\r\n            message = &quot;Successful retrieval&quot;,\r\n            response = SampleResponse.class)\r\n      })\r\n  @PostMapping(\r\n      consumes = MediaType.APPLICATION_JSON_VALUE,\r\n      produces = MediaType.APPLICATION_JSON_VALUE)\r\n  public DeferredResult&lt;SampleResponse&gt; create(\r\n      @RequestBody RequestBodyDO requestBodyDo, ServerHttpRequest request)`\r\n```\r\nWhen i am hitting the api, getting the following error. Can some one help here?\r\n\r\n```\r\n{&quot;timestamp&quot;:&quot;2023-08-31 14:09:08,276&quot;,&quot;message&quot;:&quot; Servlet.service() for servlet [dispatcherServlet] in context with path [api] threw exception [Request processing failed; nested exception is java.lang.IllegalStateException: No primary or single public constructor found for interface org.springframework.http.server.ServerHttpRequest - and no default constructor found either] with root cause&quot;,&quot;logger&quot;:&quot;org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/api].[dispatcherServlet]&quot;,&quot;level&quot;:&quot;ERROR&quot;,&quot;thread&quot;:&quot;http-nio-8080-exec-1&quot;,&quot;stack_trace&quot;:&quot;j.l.IllegalStateException: No primary or single public constructor found for interface org.springframework.http.server.ServerHttpRequest - and no default constructor found either\r\n\\n\\tat o.s.beans.BeanUtils.getResolvableConstructor(BeanUtils.java:250)\r\n\\n\\tat o.s.w.m.a.ModelAttributeMethodProcessor.createAttribute(ModelAttributeMethodProcessor.java:216)\r\n\\n\\tat o.s.w.s.m.m.a.ServletModelAttributeMethodProcessor.createAttribute(ServletModelAttributeMethodProcessor.java:85)\r\n\\n\\tat o.s.w.m.a.ModelAttributeMethodProcessor.resolveArgument(ModelAttributeMethodProcessor.java:144)\r\n\\n\\tat o.s.w.m.s.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:121)\r\n\\n\\tat o.s.w.m.s.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:170)\r\n\\n\\tat o.s.w.m.s.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)\r\n\\n\\tat o.s.w.s.m.m.a.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)\r\n\\n\\tat o.s.w.s.m.m.a.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:894)\r\n\\n\\tat o.s.w.s.m.m.a.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)\r\n\\n\\tat o.s.w.s.m.m.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\\n\\tat o.s.w.s.DispatcherServlet.doDispatch(DispatcherServlet.java:1063)\r\n\\n\\tat o.s.w.s.DispatcherServlet.doService(DispatcherServlet.java:963)\r\n\\n\\tat o.s.w.s.FrameworkServlet.processRequest(FrameworkServlet.java:1006)\r\n\\n\\tat o.s.w.s.FrameworkServlet.doPost(FrameworkServlet.java:909)\r\n\\n\\tat j.s.http.HttpServlet.service(HttpServlet.java:652)\r\n\\n\\tat o.s.w.s.FrameworkServlet.service(FrameworkServlet.java:883)\r\n\\n\\tat j.s.http.HttpServlet.service(HttpServlet.java:733)\r\n\\n\\tat o.a.c.c.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)\r\n\\n\\tat o.a.c.c.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\\n\\tat o.a.t.w.s.WsFilter.doFilter(WsFilter.java:53)\r\n\\n\\tat o.a.c.c.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n\\n\\tat o.a.c.c.ApplicationFilterChain....\\n&quot;}\r\n\r\n```\r\n\r\n\r\n\r\nHave not found much resources in the net regarding the same","title":"java.lang.IllegalStateException: No primary or single public constructor found for interface org.springframework.http.server.ServerHttpRequest","body":"<p>using java 11 in my spring web mvc application and want to use &quot;org.springframework.http.server.ServerHttpRequest&quot; instead of &quot;javax.servlet.http.HttpServletRequest&quot; in my application as &quot;ServerHttpRequest&quot; is provided by spring. Usage of the same is provided in code snippet</p>\n<pre><code>`@ApiOperation(value = &quot;sample text&quot;&quot;)\n  @ApiResponses(\n      value = {\n        @ApiResponse(\n            code = 200,\n            message = &quot;Successful retrieval&quot;,\n            response = SampleResponse.class)\n      })\n  @PostMapping(\n      consumes = MediaType.APPLICATION_JSON_VALUE,\n      produces = MediaType.APPLICATION_JSON_VALUE)\n  public DeferredResult&lt;SampleResponse&gt; create(\n      @RequestBody RequestBodyDO requestBodyDo, ServerHttpRequest request)`\n</code></pre>\n<p>When i am hitting the api, getting the following error. Can some one help here?</p>\n<pre><code>{&quot;timestamp&quot;:&quot;2023-08-31 14:09:08,276&quot;,&quot;message&quot;:&quot; Servlet.service() for servlet [dispatcherServlet] in context with path [api] threw exception [Request processing failed; nested exception is java.lang.IllegalStateException: No primary or single public constructor found for interface org.springframework.http.server.ServerHttpRequest - and no default constructor found either] with root cause&quot;,&quot;logger&quot;:&quot;org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/api].[dispatcherServlet]&quot;,&quot;level&quot;:&quot;ERROR&quot;,&quot;thread&quot;:&quot;http-nio-8080-exec-1&quot;,&quot;stack_trace&quot;:&quot;j.l.IllegalStateException: No primary or single public constructor found for interface org.springframework.http.server.ServerHttpRequest - and no default constructor found either\n\\n\\tat o.s.beans.BeanUtils.getResolvableConstructor(BeanUtils.java:250)\n\\n\\tat o.s.w.m.a.ModelAttributeMethodProcessor.createAttribute(ModelAttributeMethodProcessor.java:216)\n\\n\\tat o.s.w.s.m.m.a.ServletModelAttributeMethodProcessor.createAttribute(ServletModelAttributeMethodProcessor.java:85)\n\\n\\tat o.s.w.m.a.ModelAttributeMethodProcessor.resolveArgument(ModelAttributeMethodProcessor.java:144)\n\\n\\tat o.s.w.m.s.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:121)\n\\n\\tat o.s.w.m.s.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:170)\n\\n\\tat o.s.w.m.s.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)\n\\n\\tat o.s.w.s.m.m.a.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)\n\\n\\tat o.s.w.s.m.m.a.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:894)\n\\n\\tat o.s.w.s.m.m.a.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)\n\\n\\tat o.s.w.s.m.m.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\n\\n\\tat o.s.w.s.DispatcherServlet.doDispatch(DispatcherServlet.java:1063)\n\\n\\tat o.s.w.s.DispatcherServlet.doService(DispatcherServlet.java:963)\n\\n\\tat o.s.w.s.FrameworkServlet.processRequest(FrameworkServlet.java:1006)\n\\n\\tat o.s.w.s.FrameworkServlet.doPost(FrameworkServlet.java:909)\n\\n\\tat j.s.http.HttpServlet.service(HttpServlet.java:652)\n\\n\\tat o.s.w.s.FrameworkServlet.service(FrameworkServlet.java:883)\n\\n\\tat j.s.http.HttpServlet.service(HttpServlet.java:733)\n\\n\\tat o.a.c.c.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)\n\\n\\tat o.a.c.c.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n\\n\\tat o.a.t.w.s.WsFilter.doFilter(WsFilter.java:53)\n\\n\\tat o.a.c.c.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n\\n\\tat o.a.c.c.ApplicationFilterChain....\\n&quot;}\n\n</code></pre>\n<p>Have not found much resources in the net regarding the same</p>\n"},{"tags":["java","apache-kafka","junit","apache-kafka-streams","ktable"],"comments":[{"owner":{"account_id":6236403,"reputation":10241,"user_id":4851565,"accept_rate":84,"display_name":"entpnerd"},"score":0,"creation_date":1692831301,"post_id":76965312,"comment_id":135679197,"body_markdown":"Would you mind including a stack trace? I&#39;m surmising that it&#39;s happening on the `createInputTopic()` call, but it would be nice to know.","body":"Would you mind including a stack trace? I&#39;m surmising that it&#39;s happening on the <code>createInputTopic()</code> call, but it would be nice to know."},{"owner":{"account_id":4949942,"reputation":827,"user_id":3985332,"accept_rate":45,"display_name":"perplexedDev"},"score":0,"creation_date":1692831635,"post_id":76965312,"comment_id":135679219,"body_markdown":"@entpnerd I have added the stack trace in the question","body":"@entpnerd I have added the stack trace in the question"}],"answers":[{"comments":[{"owner":{"account_id":4949942,"reputation":827,"user_id":3985332,"accept_rate":45,"display_name":"perplexedDev"},"score":0,"creation_date":1693250641,"post_id":76985111,"comment_id":135733200,"body_markdown":"yes that was it. Thank you so much.","body":"yes that was it. Thank you so much."},{"owner":{"account_id":4949942,"reputation":827,"user_id":3985332,"accept_rate":45,"display_name":"perplexedDev"},"score":0,"creation_date":1693250994,"post_id":76985111,"comment_id":135733257,"body_markdown":"I had a follow up question, I have updated the code where I add the name of the ktable store. How do I test the value was added to the ktable?","body":"I had a follow up question, I have updated the code where I add the name of the ktable store. How do I test the value was added to the ktable?"},{"owner":{"account_id":4243,"reputation":1301938,"user_id":6309,"accept_rate":100,"display_name":"VonC"},"score":0,"creation_date":1693251923,"post_id":76985111,"comment_id":135733391,"body_markdown":"@perplexedDev I have edited the answer to address your comment.","body":"@perplexedDev I have edited the answer to address your comment."},{"owner":{"account_id":4949942,"reputation":827,"user_id":3985332,"accept_rate":45,"display_name":"perplexedDev"},"score":0,"creation_date":1693265162,"post_id":76985111,"comment_id":135735093,"body_markdown":"great, thank you for the detailed explanation. I am new to Kafka Stream and TopologyTestDriver so this is really helpful. One last query, how can I input headers to the input topic in the test? I couldn&#39;t find an option. I filter on the header values here inputStream.transformValues(KSExtension::new)","body":"great, thank you for the detailed explanation. I am new to Kafka Stream and TopologyTestDriver so this is really helpful. One last query, how can I input headers to the input topic in the test? I couldn&#39;t find an option. I filter on the header values here inputStream.transformValues(KSExtension::new)"},{"owner":{"account_id":4949942,"reputation":827,"user_id":3985332,"accept_rate":45,"display_name":"perplexedDev"},"score":0,"creation_date":1693265263,"post_id":76985111,"comment_id":135735104,"body_markdown":"I have another question - https://stackoverflow.com/questions/76949239/kafka-streams-use-manually-created-internal-topics-giving-topicauthorizationexce\nYou seem to be very experienced in Kafka Streams, do you have any thoughts on this question?","body":"I have another question - <a href=\"https://stackoverflow.com/questions/76949239/kafka-streams-use-manually-created-internal-topics-giving-topicauthorizationexce\" title=\"kafka streams use manually created internal topics giving topicauthorizationexce\">stackoverflow.com/questions/76949239/&hellip;</a> You seem to be very experienced in Kafka Streams, do you have any thoughts on this question?"},{"owner":{"account_id":4243,"reputation":1301938,"user_id":6309,"accept_rate":100,"display_name":"VonC"},"score":0,"creation_date":1693289191,"post_id":76985111,"comment_id":135737145,"body_markdown":"@perplexedDev I have edited the answer to address your comment","body":"@perplexedDev I have edited the answer to address your comment"}],"tags":[],"owner":{"account_id":4243,"reputation":1301938,"user_id":6309,"accept_rate":100,"display_name":"VonC"},"comment_count":6,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1693580177,"creation_date":1693089554,"answer_id":76985111,"question_id":76965312,"body_markdown":"I see you are creating an *empty* [`Topology`](https://kafka.apache.org/23/javadoc/index.html?org/apache/kafka/streams/Topology.html), used to initialize the [`TopologyTestDriver`](https://kafka.apache.org/23/javadoc/index.html?org/apache/kafka/streams/Topology.html):\r\n\r\n```java\r\ntopology = new Topology();\r\ntd = new TopologyTestDriver(topology, streamConfig);\r\n```\r\n\r\nWhen this empty topology is used to instantiate the `TopologyTestDriver` with `td = new TopologyTestDriver(topology, streamConfig);`, the test driver does not know about any topics, since no topology was effectively built.\r\n\r\nI suppose this is why, when you try to pipe input into `&quot;input-topic&quot;` using `inputTopic.pipeInput(&quot;key1&quot;, &quot;value1&quot;);`, the test driver throws an `IllegalArgumentException` complaining about an &quot;`Unknown topic: input-topic`&quot;.\r\n\r\n---\r\n\r\nYou should call your `buildTopology()` method to generate the actual topology you are testing, and use that when creating your `TopologyTestDriver`.\r\n\r\nMake sure that the topic names in your test (`input-topic`, `output-topic`) match those in your actual application (`&quot;topicname&quot;`).\r\n\r\n\r\n```java\r\n@BeforeEach\r\nvoid setUp() {\r\n    streamConfig = new Properties();\r\n    streamConfig.setProperty(StreamsConfig.APPLICATION_ID_CONFIG, &quot;AppId&quot;);\r\n    streamConfig.setProperty(StreamsConfig.BOOTSTRAP_SERVERS_CONFIG, &quot;foo:1234&quot;);\r\n    streamConfig.setProperty(StreamsConfig.DEFAULT_KEY_SERDE_CLASS_CONFIG, Serdes.String().getClass().getName());\r\n    streamConfig.setProperty(StreamsConfig.DEFAULT_VALUE_SERDE_CLASS_CONFIG, Serdes.String().getClass().getName());\r\n\r\n    // Create the topology using your actual code\r\n    topology = app.buildTopology();\r\n\r\n    // Now create a TopologyTestDriver using the real topology\r\n    td = new TopologyTestDriver(topology, streamConfig);\r\n\r\n    // The topic name here should match the actual topic you use in the real topology\r\n    inputTopic = td.createInputTopic(&quot;topicname&quot;, Serdes.String().serializer(), Serdes.String().serializer());\r\n\r\n    // Create output topic if you need it\r\n    // outputTopic = td.createOutputTopic(&quot;output-topic&quot;, Serdes.String().deserializer(), Serdes.String().deserializer());\r\n}\r\n\r\n@Test\r\nvoid buildTopology(){\r\n    inputTopic.pipeInput(&quot;key1&quot;, &quot;value1&quot;);\r\n    // Your assertions here\r\n}\r\n```\r\n\r\nNote: I removed the output topic from the setup because in your code snippet you did not specify the output topic where your `KTable` gets written to. You may add it back if your actual application writes to an output topic.\r\n\r\n----\r\n\r\n&gt; I have updated the code where I add the name of the ktable store.  \r\n&gt; How do I test the value was added to the ktable?\r\n\r\nYou can query the state store that backs the `KTable` to check its contents.  \r\nIn Kafka Streams, each KTable is backed by a [state store](https://kafka.apache.org/20/documentation/streams/architecture.html#streams_architecture_state) (even a [versioned one very recently, Aug. 2023](https://www.confluent.io/blog/introducing-versioned-state-store-in-kafka-streams/)), and you can directly interact with this store in tests.\r\n\r\nMake sure that you set a store name for your KTable in your topology:\r\n\r\n```java\r\nkTable = filteredStream.groupByKey()\r\n        .reduce(((value1, value2) -&gt; value2), Materialized.as(&quot;myKTableStore&quot;));\r\n```\r\n\r\nHere, `&quot;myKTableStore&quot;` is the name of the state store that backs the KTable.\r\n\r\nIn your test, you can retrieve the store from the `TopologyTestDriver` and check the value for a specific key:\r\n\r\n```java\r\n@Test\r\nvoid buildTopology() {\r\n    inputTopic.pipeInput(&quot;key1&quot;, &quot;value1&quot;);\r\n\r\n    // Retrieve the state store\r\n    ReadOnlyKeyValueStore&lt;String, String&gt; keyValueStore = \r\n        td.getKeyValueStore(&quot;myKTableStore&quot;);\r\n\r\n    // Assert that the KTable contains the expected value for the key\r\n    assertEquals(&quot;value1&quot;, keyValueStore.get(&quot;key1&quot;));\r\n}\r\n```\r\n\r\nThat way, you can validate that your `KTable` contains the expected key-value pairs.\r\n\r\nNote that [`ReadOnlyKeyValueStore`](https://github.com/apache/kafka/blob/3.5/streams/src/main/java/org/apache/kafka/streams/state/ReadOnlyKeyValueStore.java) is a part of the Kafka Streams API. Import it as needed.  \r\nYou can see it used in &quot;[Kafka Streams Interactive Queries / Querying local key-value stores](https://docs.confluent.io/platform/current/streams/developer-guide/interactive-queries.html#querying-local-key-value-stores)&quot;\r\n\r\n[![https://docs.confluent.io/platform/current/_images/streams-interactive-queries-api-01.png][1]][1]\r\n\r\n----\r\n\r\n&gt; How can I input headers to the input topic in the test? I couldn&#39;t find an option. I filter on the header values here `inputStream.transformValues(KSExtension::new)`\r\n\r\nIn Kafka Streams&#39; [`TopologyTestDriver`](https://kafka.apache.org/34/javadoc/org/apache/kafka/streams/TopologyTestDriver.html), the ability to directly add headers to the [`TestInputTopic`](https://kafka.apache.org/34/javadoc/org/apache/kafka/streams/TestInputTopic.html) is somewhat limited.  \r\nHowever, you can use the lower-level `pipeInput()` method that allows you to pass a [`ConsumerRecord` object](https://kafka.apache.org/34/javadoc/org/apache/kafka/clients/consumer/ConsumerRecord.html), which can have headers.\r\n\r\nYou will need to build the `ConsumerRecord` manually and then use it:\r\n\r\n```java\r\n@Test\r\nvoid buildTopology() {\r\n    // Create a Headers object and add your custom headers\r\n    Headers headers = new RecordHeaders();\r\n    headers.add(new RecordHeader(&quot;myHeaderKey&quot;, &quot;myHeaderValue&quot;.getBytes()));\r\n\r\n    // Create a ConsumerRecord with headers\r\n    ConsumerRecord&lt;byte[], byte[]&gt; record = new ConsumerRecord&lt;&gt;(\r\n            &quot;topicname&quot;, // topic\r\n            0, // partition\r\n            0, // offset\r\n            &quot;key1&quot;.getBytes(), // key\r\n            &quot;value1&quot;.getBytes(), // value\r\n            headers // headers\r\n    );\r\n\r\n    // Pipe the record into TopologyTestDriver\r\n    td.pipeInput(record);\r\n\r\n    // The rest of your test\r\n}\r\n```\r\n\r\nMake sure to replace `&quot;topicname&quot;` with the name of the topic you are actually reading from in your topology, and adjust the key, value, and headers as needed for your test.\r\n\r\nThat should allow you to include headers in your test records, which should then be processed by your `transformValues` operation as expected.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/DEFRg.png","title":"Unit test KafkaStreams gives IllegalArgumentException: Unknown topic","body":"<p>I see you are creating an <em>empty</em> <a href=\"https://kafka.apache.org/23/javadoc/index.html?org/apache/kafka/streams/Topology.html\" rel=\"nofollow noreferrer\"><code>Topology</code></a>, used to initialize the <a href=\"https://kafka.apache.org/23/javadoc/index.html?org/apache/kafka/streams/Topology.html\" rel=\"nofollow noreferrer\"><code>TopologyTestDriver</code></a>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>topology = new Topology();\ntd = new TopologyTestDriver(topology, streamConfig);\n</code></pre>\n<p>When this empty topology is used to instantiate the <code>TopologyTestDriver</code> with <code>td = new TopologyTestDriver(topology, streamConfig);</code>, the test driver does not know about any topics, since no topology was effectively built.</p>\n<p>I suppose this is why, when you try to pipe input into <code>&quot;input-topic&quot;</code> using <code>inputTopic.pipeInput(&quot;key1&quot;, &quot;value1&quot;);</code>, the test driver throws an <code>IllegalArgumentException</code> complaining about an &quot;<code>Unknown topic: input-topic</code>&quot;.</p>\n<hr />\n<p>You should call your <code>buildTopology()</code> method to generate the actual topology you are testing, and use that when creating your <code>TopologyTestDriver</code>.</p>\n<p>Make sure that the topic names in your test (<code>input-topic</code>, <code>output-topic</code>) match those in your actual application (<code>&quot;topicname&quot;</code>).</p>\n<pre class=\"lang-java prettyprint-override\"><code>@BeforeEach\nvoid setUp() {\n    streamConfig = new Properties();\n    streamConfig.setProperty(StreamsConfig.APPLICATION_ID_CONFIG, &quot;AppId&quot;);\n    streamConfig.setProperty(StreamsConfig.BOOTSTRAP_SERVERS_CONFIG, &quot;foo:1234&quot;);\n    streamConfig.setProperty(StreamsConfig.DEFAULT_KEY_SERDE_CLASS_CONFIG, Serdes.String().getClass().getName());\n    streamConfig.setProperty(StreamsConfig.DEFAULT_VALUE_SERDE_CLASS_CONFIG, Serdes.String().getClass().getName());\n\n    // Create the topology using your actual code\n    topology = app.buildTopology();\n\n    // Now create a TopologyTestDriver using the real topology\n    td = new TopologyTestDriver(topology, streamConfig);\n\n    // The topic name here should match the actual topic you use in the real topology\n    inputTopic = td.createInputTopic(&quot;topicname&quot;, Serdes.String().serializer(), Serdes.String().serializer());\n\n    // Create output topic if you need it\n    // outputTopic = td.createOutputTopic(&quot;output-topic&quot;, Serdes.String().deserializer(), Serdes.String().deserializer());\n}\n\n@Test\nvoid buildTopology(){\n    inputTopic.pipeInput(&quot;key1&quot;, &quot;value1&quot;);\n    // Your assertions here\n}\n</code></pre>\n<p>Note: I removed the output topic from the setup because in your code snippet you did not specify the output topic where your <code>KTable</code> gets written to. You may add it back if your actual application writes to an output topic.</p>\n<hr />\n<blockquote>\n<p>I have updated the code where I add the name of the ktable store.<br />\nHow do I test the value was added to the ktable?</p>\n</blockquote>\n<p>You can query the state store that backs the <code>KTable</code> to check its contents.<br />\nIn Kafka Streams, each KTable is backed by a <a href=\"https://kafka.apache.org/20/documentation/streams/architecture.html#streams_architecture_state\" rel=\"nofollow noreferrer\">state store</a> (even a <a href=\"https://www.confluent.io/blog/introducing-versioned-state-store-in-kafka-streams/\" rel=\"nofollow noreferrer\">versioned one very recently, Aug. 2023</a>), and you can directly interact with this store in tests.</p>\n<p>Make sure that you set a store name for your KTable in your topology:</p>\n<pre class=\"lang-java prettyprint-override\"><code>kTable = filteredStream.groupByKey()\n        .reduce(((value1, value2) -&gt; value2), Materialized.as(&quot;myKTableStore&quot;));\n</code></pre>\n<p>Here, <code>&quot;myKTableStore&quot;</code> is the name of the state store that backs the KTable.</p>\n<p>In your test, you can retrieve the store from the <code>TopologyTestDriver</code> and check the value for a specific key:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Test\nvoid buildTopology() {\n    inputTopic.pipeInput(&quot;key1&quot;, &quot;value1&quot;);\n\n    // Retrieve the state store\n    ReadOnlyKeyValueStore&lt;String, String&gt; keyValueStore = \n        td.getKeyValueStore(&quot;myKTableStore&quot;);\n\n    // Assert that the KTable contains the expected value for the key\n    assertEquals(&quot;value1&quot;, keyValueStore.get(&quot;key1&quot;));\n}\n</code></pre>\n<p>That way, you can validate that your <code>KTable</code> contains the expected key-value pairs.</p>\n<p>Note that <a href=\"https://github.com/apache/kafka/blob/3.5/streams/src/main/java/org/apache/kafka/streams/state/ReadOnlyKeyValueStore.java\" rel=\"nofollow noreferrer\"><code>ReadOnlyKeyValueStore</code></a> is a part of the Kafka Streams API. Import it as needed.<br />\nYou can see it used in &quot;<a href=\"https://docs.confluent.io/platform/current/streams/developer-guide/interactive-queries.html#querying-local-key-value-stores\" rel=\"nofollow noreferrer\">Kafka Streams Interactive Queries / Querying local key-value stores</a>&quot;</p>\n<p><a href=\"https://i.stack.imgur.com/DEFRg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DEFRg.png\" alt=\"https://docs.confluent.io/platform/current/_images/streams-interactive-queries-api-01.png\" /></a></p>\n<hr />\n<blockquote>\n<p>How can I input headers to the input topic in the test? I couldn't find an option. I filter on the header values here <code>inputStream.transformValues(KSExtension::new)</code></p>\n</blockquote>\n<p>In Kafka Streams' <a href=\"https://kafka.apache.org/34/javadoc/org/apache/kafka/streams/TopologyTestDriver.html\" rel=\"nofollow noreferrer\"><code>TopologyTestDriver</code></a>, the ability to directly add headers to the <a href=\"https://kafka.apache.org/34/javadoc/org/apache/kafka/streams/TestInputTopic.html\" rel=\"nofollow noreferrer\"><code>TestInputTopic</code></a> is somewhat limited.<br />\nHowever, you can use the lower-level <code>pipeInput()</code> method that allows you to pass a <a href=\"https://kafka.apache.org/34/javadoc/org/apache/kafka/clients/consumer/ConsumerRecord.html\" rel=\"nofollow noreferrer\"><code>ConsumerRecord</code> object</a>, which can have headers.</p>\n<p>You will need to build the <code>ConsumerRecord</code> manually and then use it:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Test\nvoid buildTopology() {\n    // Create a Headers object and add your custom headers\n    Headers headers = new RecordHeaders();\n    headers.add(new RecordHeader(&quot;myHeaderKey&quot;, &quot;myHeaderValue&quot;.getBytes()));\n\n    // Create a ConsumerRecord with headers\n    ConsumerRecord&lt;byte[], byte[]&gt; record = new ConsumerRecord&lt;&gt;(\n            &quot;topicname&quot;, // topic\n            0, // partition\n            0, // offset\n            &quot;key1&quot;.getBytes(), // key\n            &quot;value1&quot;.getBytes(), // value\n            headers // headers\n    );\n\n    // Pipe the record into TopologyTestDriver\n    td.pipeInput(record);\n\n    // The rest of your test\n}\n</code></pre>\n<p>Make sure to replace <code>&quot;topicname&quot;</code> with the name of the topic you are actually reading from in your topology, and adjust the key, value, and headers as needed for your test.</p>\n<p>That should allow you to include headers in your test records, which should then be processed by your <code>transformValues</code> operation as expected.</p>\n"}],"owner":{"account_id":4949942,"reputation":827,"user_id":3985332,"accept_rate":45,"display_name":"perplexedDev"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":262,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76985111,"answer_count":1,"score":1,"last_activity_date":1693580177,"creation_date":1692830652,"question_id":76965312,"body_markdown":"I have a app that uses KStream to read from Kafka, filter the data based on the header, and write to KTable.\r\n\r\n    public Topology buildTopology() {\r\n            KStream&lt;String,String&gt; inputStream = builder.stream(&quot;topicname&quot;);\r\n            KStream&lt;String,String&gt; filteredStream = inputStream.transformValues(KSExtension::new)\r\n                    .filter((key,value) -&gt; value!=null);\r\n            \r\n            kTable = filteredStream.groupByKey()\r\n                    .reduce(((value1, value2) -&gt; value2), Materialized.as(&quot;ktable&quot;));\r\n            \r\n            KafkaStreams streams = new KafkaStreams(builder.build(), streamsConfiguration);\r\n            streams.start();\r\n    \r\n            Runtime.getRuntime().addShutdownHook(new Thread(streams::close));\r\n            return builder.build();\r\n        }\r\n\r\n\r\nI&#39;m trying to create a unit test for this using TopologyTestDriver\r\n\r\n    private TopologyTestDriver td;\r\n        private TestInputTopic&lt;String, String&gt; inputTopic;\r\n        private TestOutputTopic&lt;String, String&gt; outputTopic;\r\n        private Topology topology;\r\n        private Properties streamConfig;\r\n    \r\n    @BeforeEach\r\n        void setUp() {\r\n            streamConfig = new Properties();\r\n            streamConfig.setProperty(StreamsConfig.APPLICATION_ID_CONFIG, &quot;AppId&quot;);\r\n            streamConfig.setProperty(StreamsConfig.BOOTSTRAP_SERVERS_CONFIG, &quot;foo:1234&quot;);\r\n            streamConfig.setProperty(StreamsConfig.DEFAULT_KEY_SERDE_CLASS_CONFIG, Serdes.String().getClass().getName());\r\n            streamConfig.setProperty(StreamsConfig.DEFAULT_VALUE_SERDE_CLASS_CONFIG, Serdes.String().getClass().getName());\r\n    \r\n            topology = new Topology();\r\n            td = new TopologyTestDriver(topology, streamConfig);\r\n            inputTopic = td.createInputTopic(&quot;input-topic&quot;, Serdes.String().serializer(), Serdes.String().serializer());\r\n            outputTopic = td.createOutputTopic(&quot;output-topic&quot;, Serdes.String().deserializer(), Serdes.String().deserializer());\r\n        }\r\n     @Test\r\n        void buildTopology(){\r\n            inputTopic.pipeInput(&quot;key1&quot;, &quot;value1&quot;);\r\n            topology = app.buildTopology();\r\n        }\r\n\r\n\r\nWhen I run the test, i get the exception &quot;java.lang.IllegalArgumentException: Unknown topic: input-topic&quot;\r\n\r\n    DEBUG org.apache.kafka.streams.processor.internals.InternalTopologyBuilder - No source topics using pattern subscription found, initializing consumer&#39;s subscription collection.\r\n    \r\n    java.lang.IllegalArgumentException: Unknown topic: input-topic\r\n    \tat org.apache.kafka.streams.TopologyTestDriver.pipeRecord(TopologyTestDriver.java:582)\r\n    \tat org.apache.kafka.streams.TopologyTestDriver.pipeRecord(TopologyTestDriver.java:945)\r\n    \tat org.apache.kafka.streams.TestInputTopic.pipeInput(TestInputTopic.java:115)\r\n    \tat org.apache.kafka.streams.TestInputTopic.pipeInput(TestInputTopic.java:137)\r\n    \tat testclassname.buildTopology()\r\n\r\n\r\n\r\n\r\n\r\n\r\nCan some one help me understand what I am missing here?","title":"Unit test KafkaStreams gives IllegalArgumentException: Unknown topic","body":"<p>I have a app that uses KStream to read from Kafka, filter the data based on the header, and write to KTable.</p>\n<pre><code>public Topology buildTopology() {\n        KStream&lt;String,String&gt; inputStream = builder.stream(&quot;topicname&quot;);\n        KStream&lt;String,String&gt; filteredStream = inputStream.transformValues(KSExtension::new)\n                .filter((key,value) -&gt; value!=null);\n        \n        kTable = filteredStream.groupByKey()\n                .reduce(((value1, value2) -&gt; value2), Materialized.as(&quot;ktable&quot;));\n        \n        KafkaStreams streams = new KafkaStreams(builder.build(), streamsConfiguration);\n        streams.start();\n\n        Runtime.getRuntime().addShutdownHook(new Thread(streams::close));\n        return builder.build();\n    }\n</code></pre>\n<p>I'm trying to create a unit test for this using TopologyTestDriver</p>\n<pre><code>private TopologyTestDriver td;\n    private TestInputTopic&lt;String, String&gt; inputTopic;\n    private TestOutputTopic&lt;String, String&gt; outputTopic;\n    private Topology topology;\n    private Properties streamConfig;\n\n@BeforeEach\n    void setUp() {\n        streamConfig = new Properties();\n        streamConfig.setProperty(StreamsConfig.APPLICATION_ID_CONFIG, &quot;AppId&quot;);\n        streamConfig.setProperty(StreamsConfig.BOOTSTRAP_SERVERS_CONFIG, &quot;foo:1234&quot;);\n        streamConfig.setProperty(StreamsConfig.DEFAULT_KEY_SERDE_CLASS_CONFIG, Serdes.String().getClass().getName());\n        streamConfig.setProperty(StreamsConfig.DEFAULT_VALUE_SERDE_CLASS_CONFIG, Serdes.String().getClass().getName());\n\n        topology = new Topology();\n        td = new TopologyTestDriver(topology, streamConfig);\n        inputTopic = td.createInputTopic(&quot;input-topic&quot;, Serdes.String().serializer(), Serdes.String().serializer());\n        outputTopic = td.createOutputTopic(&quot;output-topic&quot;, Serdes.String().deserializer(), Serdes.String().deserializer());\n    }\n @Test\n    void buildTopology(){\n        inputTopic.pipeInput(&quot;key1&quot;, &quot;value1&quot;);\n        topology = app.buildTopology();\n    }\n</code></pre>\n<p>When I run the test, i get the exception &quot;java.lang.IllegalArgumentException: Unknown topic: input-topic&quot;</p>\n<pre><code>DEBUG org.apache.kafka.streams.processor.internals.InternalTopologyBuilder - No source topics using pattern subscription found, initializing consumer's subscription collection.\n\njava.lang.IllegalArgumentException: Unknown topic: input-topic\n    at org.apache.kafka.streams.TopologyTestDriver.pipeRecord(TopologyTestDriver.java:582)\n    at org.apache.kafka.streams.TopologyTestDriver.pipeRecord(TopologyTestDriver.java:945)\n    at org.apache.kafka.streams.TestInputTopic.pipeInput(TestInputTopic.java:115)\n    at org.apache.kafka.streams.TestInputTopic.pipeInput(TestInputTopic.java:137)\n    at testclassname.buildTopology()\n</code></pre>\n<p>Can some one help me understand what I am missing here?</p>\n"},{"tags":["java","spring","spring-boot","keycloak","spring-cloud-gateway"],"comments":[{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":0,"creation_date":1693496106,"post_id":77015987,"comment_id":135771762,"body_markdown":"In rhe same situation, I don&#39;t access Keycloak through the gateway (but this requires to allow the gateway for cross origin requests in Keycloak conf). I share the same Keycloak in several systems (SSO) and chose to use Gateway instances for what is specific to those system for a user experience similar to Google one: I connect to Google identity, not Gmail or Drive. Sample of such a Gateway there: https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials/bff","body":"In rhe same situation, I don&#39;t access Keycloak through the gateway (but this requires to allow the gateway for cross origin requests in Keycloak conf). I share the same Keycloak in several systems (SSO) and chose to use Gateway instances for what is specific to those system for a user experience similar to Google one: I connect to Google identity, not Gmail or Drive. Sample of such a Gateway there: <a href=\"https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials/bff\" rel=\"nofollow noreferrer\">github.com/ch4mpy/spring-addons/tree/master/samples/tutorial&zwnj;&#8203;s/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":312560,"reputation":1308,"user_id":626698,"accept_rate":75,"display_name":"Mark Bakker"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693580167,"creation_date":1693580167,"answer_id":77024152,"question_id":77015987,"body_markdown":"Did you notice the misconfiguration\r\n\r\n                jwk-set-uri: https://baseurlauth/realms/realmname/protocol/openid-connect/certs\r\n\r\n`baseurlauth` should probably be `baseurl/auth`","title":"Spring Cloud Gateway + KeyCloak Giving 404 Not Found Error","body":"<p>Did you notice the misconfiguration</p>\n<pre><code>            jwk-set-uri: https://baseurlauth/realms/realmname/protocol/openid-connect/certs\n</code></pre>\n<p><code>baseurlauth</code> should probably be <code>baseurl/auth</code></p>\n"}],"owner":{"account_id":13585138,"reputation":1,"user_id":9800058,"display_name":"Dhruv Kapur"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":128,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1693580167,"creation_date":1693486199,"question_id":77015987,"body_markdown":"We have a microservice architecture using spring boot. Hence we have a microservic, a Spring api-gateway and a running instance of Keycloak for managing authentication and authorization.\r\n\r\nIn the configuration for the gateway we have defined\r\n\r\n```\r\n security:\r\n    oauth2:\r\n      client:\r\n        provider:\r\n          keycloak:\r\n            authorization-uri: https://baseurl/auth/realms/realmname/protocol/openid-connect/auth\r\n            jwk-set-uri: https://baseurlauth/realms/realmname/protocol/openid-connect/certs\r\n            token-uri: https://baseurl/auth/realms/cardbyte/protocol/openid-connect/token\r\n            user-name-attribute: preferred_username\r\n            userinfo-uri: https://baseurl/auth/realms/cardbyte/protocol/openid-connect/userinfo\r\n      resourceserver:\r\n        jwt:\r\n          jwk-set-uri: https://baseurlauth/realms/realmname/protocol/openid-connect/certs\r\n          useInsecureTrustManager: true\r\n\r\n```\r\nWe have also enabled the JWKS URL setting in KeyCloak and added the jwk-set-uri in the same.\r\nBut when we try to access the API via the Spring Gateway \r\nWe get the error message\r\nHTTP Get JWKS URL  Response 404 Not Found\r\n\r\nJava.lang.IllegalStateException: Could not obtain the keys","title":"Spring Cloud Gateway + KeyCloak Giving 404 Not Found Error","body":"<p>We have a microservice architecture using spring boot. Hence we have a microservic, a Spring api-gateway and a running instance of Keycloak for managing authentication and authorization.</p>\n<p>In the configuration for the gateway we have defined</p>\n<pre><code> security:\n    oauth2:\n      client:\n        provider:\n          keycloak:\n            authorization-uri: https://baseurl/auth/realms/realmname/protocol/openid-connect/auth\n            jwk-set-uri: https://baseurlauth/realms/realmname/protocol/openid-connect/certs\n            token-uri: https://baseurl/auth/realms/cardbyte/protocol/openid-connect/token\n            user-name-attribute: preferred_username\n            userinfo-uri: https://baseurl/auth/realms/cardbyte/protocol/openid-connect/userinfo\n      resourceserver:\n        jwt:\n          jwk-set-uri: https://baseurlauth/realms/realmname/protocol/openid-connect/certs\n          useInsecureTrustManager: true\n\n</code></pre>\n<p>We have also enabled the JWKS URL setting in KeyCloak and added the jwk-set-uri in the same.\nBut when we try to access the API via the Spring Gateway\nWe get the error message\nHTTP Get JWKS URL  Response 404 Not Found</p>\n<p>Java.lang.IllegalStateException: Could not obtain the keys</p>\n"},{"tags":["java","mysql","spring-boot","gradle","heroku"],"answers":[{"comments":[{"owner":{"account_id":10165842,"reputation":45,"user_id":7507830,"display_name":"namer"},"score":0,"creation_date":1693580237,"post_id":77024118,"comment_id":135784183,"body_markdown":"where do I put the system.properties file? is it the same as the Procfile, or something else?","body":"where do I put the system.properties file? is it the same as the Procfile, or something else?"},{"owner":{"account_id":288740,"reputation":36435,"user_id":589329,"accept_rate":40,"display_name":"Vampire"},"score":0,"creation_date":1693581479,"post_id":77024118,"comment_id":135784453,"body_markdown":"If you mean &quot;in the same location as the Procfile&quot;, yes, in the root of the project. If you meant &quot;same file&quot;, no.","body":"If you mean &quot;in the same location as the Procfile&quot;, yes, in the root of the project. If you meant &quot;same file&quot;, no."}],"tags":[],"owner":{"account_id":288740,"reputation":36435,"user_id":589329,"accept_rate":40,"display_name":"Vampire"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1693579896,"creation_date":1693579896,"answer_id":77024118,"question_id":77022598,"body_markdown":"The version of the Spring Boot Gradle plugin you are applying requires that you run Gradle with at least Java 17.\r\n\r\nLocally you run with Java 17 and all is well.\r\n\r\nBut on Heroku you run with Java 8 which is not supported by the Spring Boot Gradle plugin you use.\r\n\r\nYou need to configure Heroku to run the Gradle build with Java 17 at least.\r\n\r\nAs documented at https://devcenter.heroku.com/articles/java-support#specifying-a-java-version, create a file `system.properties` where you set `java.runtime.version=17` for example.","title":"Deploy Spring Boot with MySQL db to Heroku fails during gradle build","body":"<p>The version of the Spring Boot Gradle plugin you are applying requires that you run Gradle with at least Java 17.</p>\n<p>Locally you run with Java 17 and all is well.</p>\n<p>But on Heroku you run with Java 8 which is not supported by the Spring Boot Gradle plugin you use.</p>\n<p>You need to configure Heroku to run the Gradle build with Java 17 at least.</p>\n<p>As documented at <a href=\"https://devcenter.heroku.com/articles/java-support#specifying-a-java-version\" rel=\"nofollow noreferrer\">https://devcenter.heroku.com/articles/java-support#specifying-a-java-version</a>, create a file <code>system.properties</code> where you set <code>java.runtime.version=17</code> for example.</p>\n"}],"owner":{"account_id":10165842,"reputation":45,"user_id":7507830,"display_name":"namer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77024118,"answer_count":1,"score":1,"last_activity_date":1693579896,"creation_date":1693566438,"question_id":77022598,"body_markdown":"I have an almost ready to deploy app built on my localhost, and my next step of the development is to ready it for deployment. Therefore, I am trying to deploy it on Heroku, but when I try to push the code to Heroku, and it tries to build it, I am getting an error during the process of \r\n`\r\n-----&gt; executing ./gradlew build -x check\r\n`. When I try to run the same command on my localhost it works perfectly. Therefore, I am unsure about what I am doing wrong and how Heroku needs the app to be set up.\r\n\r\n\r\nThis is the build log for the app:\r\n\r\n```\r\n-----&gt; Building on the Heroku-22 stack\r\n-----&gt; Determining which buildpack to use for this app\r\n-----&gt; Gradle app detected\r\n-----&gt; Spring Boot detected\r\n-----&gt; Installing OpenJDK 1.8... done\r\n-----&gt; Building Gradle app...\r\n-----&gt; executing ./gradlew build -x check\r\n       Downloading https://services.gradle.org/distributions/gradle-7.6.1-bin.zip\r\n       ...........10%............20%...........30%............40%............50%...........60%............70%............80%...........90%............100%\r\n       To honour the JVM settings for this build a single-use Daemon process will be forked. See https://docs.gradle.org/7.6.1/userguide/gradle_daemon.html#sec:disabling_the_daemon.\r\n       Daemon will be stopped at the end of the build \r\n       \r\n       FAILURE: Build failed with an exception.\r\n       \r\n       * What went wrong:\r\n       A problem occurred configuring root project &#39;RnR&#39;.\r\n       &gt; Could not resolve all files for configuration &#39;:classpath&#39;.\r\n          &gt; Could not resolve org.springframework.boot:spring-boot-gradle-plugin:3.1.0.\r\n            Required by:\r\n                project : &gt; org.springframework.boot:org.springframework.boot.gradle.plugin:3.1.0\r\n             &gt; No matching variant of org.springframework.boot:spring-boot-gradle-plugin:3.1.0 was found. The consumer was configured to find a runtime of a library compatible with Java 8, packaged as a jar, and its dependencies declared externally, as well as attribute &#39;org.gradle.plugin.api-version&#39; with value &#39;7.6.1&#39; but:\r\n                 - Variant &#39;apiElements&#39; capability org.springframework.boot:spring-boot-gradle-plugin:3.1.0 declares a library, packaged as a jar, and its dependencies declared externally:\r\n                     - Incompatible because this component declares an API of a component compatible with Java 17 and the consumer needed a runtime of a component compatible with Java 8\r\n                     - Other compatible attribute:\r\n                         - Doesn&#39;t say anything about org.gradle.plugin.api-version (required &#39;7.6.1&#39;)\r\n                 - Variant &#39;javadocElements&#39; capability org.springframework.boot:spring-boot-gradle-plugin:3.1.0 declares a runtime of a component, and its dependencies declared externally:\r\n                     - Incompatible because this component declares documentation and the consumer needed a library\r\n                     - Other compatible attributes:\r\n                         - Doesn&#39;t say anything about its target Java version (required compatibility with Java 8)\r\n                         - Doesn&#39;t say anything about its elements (required them packaged as a jar)\r\n                         - Doesn&#39;t say anything about org.gradle.plugin.api-version (required &#39;7.6.1&#39;)\r\n                 - Variant &#39;mavenOptionalApiElements&#39; capability org.springframework.boot:spring-boot-gradle-plugin-maven-optional:3.1.0 declares a library, packaged as a jar, and its dependencies declared externally:\r\n                     - Incompatible because this component declares an API of a component compatible with Java 17 and the consumer needed a runtime of a component compatible with Java 8\r\n                     - Other compatible attribute:\r\n                         - Doesn&#39;t say anything about org.gradle.plugin.api-version (required &#39;7.6.1&#39;)\r\n                 - Variant &#39;mavenOptionalRuntimeElements&#39; capability org.springframework.boot:spring-boot-gradle-plugin-maven-optional:3.1.0 declares a runtime of a library, packaged as a jar, and its dependencies declared externally:\r\n                     - Incompatible because this component declares a component compatible with Java 17 and the consumer needed a component compatible with Java 8\r\n                     - Other compatible attribute:\r\n                         - Doesn&#39;t say anything about org.gradle.plugin.api-version (required &#39;7.6.1&#39;)\r\n                 - Variant &#39;runtimeElements&#39; capability org.springframework.boot:spring-boot-gradle-plugin:3.1.0 declares a runtime of a library, packaged as a jar, and its dependencies declared externally:\r\n                     - Incompatible because this component declares a component compatible with Java 17 and the consumer needed a component compatible with Java 8\r\n                     - Other compatible attribute:\r\n                         - Doesn&#39;t say anything about org.gradle.plugin.api-version (required &#39;7.6.1&#39;)\r\n                 - Variant &#39;sourcesElements&#39; capability org.springframework.boot:spring-boot-gradle-plugin:3.1.0 declares a runtime of a component, and its dependencies declared externally:\r\n                     - Incompatible because this component declares documentation and the consumer needed a library\r\n                     - Other compatible attributes:\r\n                         - Doesn&#39;t say anything about its target Java version (required compatibility with Java 8)\r\n                         - Doesn&#39;t say anything about its elements (required them packaged as a jar)\r\n                         - Doesn&#39;t say anything about org.gradle.plugin.api-version (required &#39;7.6.1&#39;)\r\n       \r\n       * Try:\r\n       &gt; Run with --stacktrace option to get the stack trace.\r\n       &gt; Run with --info or --debug option to get more log output.\r\n       &gt; Run with --scan to get full insights.\r\n       \r\n       * Get more help at https://help.gradle.org\r\n       \r\n       BUILD FAILED in 8s\r\n !     ERROR: Failed to run Gradle!\r\n       We&#39;re sorry this build is failing. If you can&#39;t find the issue in application\r\n       code, please submit a ticket so we can help: https://help.heroku.com\r\n       You can also try reverting to the previous version of the buildpack by running:\r\n       $ heroku buildpacks:set https://github.com/heroku/heroku-buildpack-gradle#previous-version\r\n       \r\n       Thanks,\r\n       Heroku\r\n !     Push rejected, failed to compile Gradle app.\r\n !     Push failed\r\n```\r\n\r\nThis is my build.gradle file:\r\n\r\n```\r\nplugins {\r\n    id &#39;java&#39;\r\n    id &#39;org.springframework.boot&#39; version &#39;3.1.0&#39;\r\n    id &#39;io.spring.dependency-management&#39; version &#39;1.1.0&#39;\r\n    id &#39;checkstyle&#39;\r\n}\r\n\r\ngroup = &#39;FamilyFusion&#39;\r\nversion = &#39;0.0.1-SNAPSHOT&#39;\r\nsourceCompatibility = &#39;17&#39;\r\n\r\nconfigurations {\r\n    compileOnly {\r\n        extendsFrom annotationProcessor\r\n    }\r\n}\r\n\r\nrepositories {\r\n    mavenCentral()\r\n}\r\n\r\ndependencies {\r\n    // Spring Boot Starters\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-data-jpa&#39;\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-mail&#39;\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-security&#39;\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-thymeleaf&#39;\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-web&#39;\r\n\r\n    // Validation\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-validation:3.0.6&#39;\r\n\r\n    // Thymeleaf Extras\r\n    implementation &#39;org.thymeleaf.extras:thymeleaf-extras-springsecurity6&#39;\r\n    implementation &#39;nz.net.ultraq.thymeleaf:thymeleaf-layout-dialect:3.2.1&#39;\r\n\r\n    // File Upload\r\n    implementation &#39;commons-fileupload:commons-fileupload:1.5&#39;\r\n\r\n    // Gedcom4j\r\n    implementation &#39;org.gedcom4j:gedcom4j:4.0.1&#39;\r\n\r\n    // JSON\r\n    implementation &#39;org.json:json:20230618&#39;\r\n\r\n    // Lombok\r\n    compileOnly &#39;org.projectlombok:lombok&#39;\r\n    annotationProcessor &#39;org.projectlombok:lombok&#39;\r\n\r\n    // Development Tools\r\n    developmentOnly &#39;org.springframework.boot:spring-boot-devtools&#39;\r\n\r\n    // Database Connector\r\n    runtimeOnly &#39;com.mysql:mysql-connector-j&#39;\r\n\r\n    // Testing\r\n    testImplementation &#39;org.springframework.boot:spring-boot-starter-test&#39;\r\n    testImplementation &#39;org.springframework.security:spring-security-test&#39;\r\n}\r\n\r\ncheckstyle {\r\n    toolVersion = 8.40\r\n    maxWarnings = 0\r\n    ignoreFailures = true\r\n}\r\n\r\ntasks.withType(Checkstyle).configureEach {\r\n    reports {\r\n        xml.required = true\r\n        html.required = true\r\n    }\r\n}\r\n\r\ntasks.named(&#39;test&#39;) {\r\n    useJUnitPlatform()\r\n}\r\n\r\n```\r\n\r\nThis is my application.properties file:\r\n\r\n```\r\n####    Database     ####\r\nspring.datasource.url=jdbc:mysql://localhost:3306/roots_and_recipes\r\nspring.datasource.username=*****\r\nspring.datasource.password=******\r\nspring.jpa.database-platform=MySQL\r\nspring.jpa.hibernate.ddl-auto=update\r\nspring.jpa.show-sql=false\r\n\r\n####    SSL     ####\r\nserver.port=8443\r\nserver.ssl.enabled=true\r\nserver.ssl.key-store=classpath:FamilyFusionSecurity.p12\r\nserver.ssl.key-store-password=******\r\nserver.ssl.key-store-type=PKCS12\r\nserver.ssl.key-alias=FamilyFusionSecurity\r\nserver.ssl.protocol=TLS\r\n\r\n####    Spring Mail     ####\r\nspring.mail.host=smtp.gmail.com\r\nspring.mail.port=587\r\nspring.mail.username=****\r\nspring.mail.password=******\r\nspring.mail.properties.mail.smtp.starttls.enable=true\r\nspring.mail.properties.mail.smtp.auth=true\r\nspring.mail.properties.mail.smtp.connectiontimeout=5000\r\nspring.mail.properties.mail.smtp.timeout=5000\r\nspring.mail.properties.mail.smtp.writetimeout=5000\r\n```\r\n\r\nI know that currently the db is localhost, but I wanted to see if I can first at least build the app on Heroku and then connect it properly to a cloud based db (was planning on using the free version of JawsDB MySQL)\r\n\r\n","title":"Deploy Spring Boot with MySQL db to Heroku fails during gradle build","body":"<p>I have an almost ready to deploy app built on my localhost, and my next step of the development is to ready it for deployment. Therefore, I am trying to deploy it on Heroku, but when I try to push the code to Heroku, and it tries to build it, I am getting an error during the process of\n<code>-----&gt; executing ./gradlew build -x check</code>. When I try to run the same command on my localhost it works perfectly. Therefore, I am unsure about what I am doing wrong and how Heroku needs the app to be set up.</p>\n<p>This is the build log for the app:</p>\n<pre><code>-----&gt; Building on the Heroku-22 stack\n-----&gt; Determining which buildpack to use for this app\n-----&gt; Gradle app detected\n-----&gt; Spring Boot detected\n-----&gt; Installing OpenJDK 1.8... done\n-----&gt; Building Gradle app...\n-----&gt; executing ./gradlew build -x check\n       Downloading https://services.gradle.org/distributions/gradle-7.6.1-bin.zip\n       ...........10%............20%...........30%............40%............50%...........60%............70%............80%...........90%............100%\n       To honour the JVM settings for this build a single-use Daemon process will be forked. See https://docs.gradle.org/7.6.1/userguide/gradle_daemon.html#sec:disabling_the_daemon.\n       Daemon will be stopped at the end of the build \n       \n       FAILURE: Build failed with an exception.\n       \n       * What went wrong:\n       A problem occurred configuring root project 'RnR'.\n       &gt; Could not resolve all files for configuration ':classpath'.\n          &gt; Could not resolve org.springframework.boot:spring-boot-gradle-plugin:3.1.0.\n            Required by:\n                project : &gt; org.springframework.boot:org.springframework.boot.gradle.plugin:3.1.0\n             &gt; No matching variant of org.springframework.boot:spring-boot-gradle-plugin:3.1.0 was found. The consumer was configured to find a runtime of a library compatible with Java 8, packaged as a jar, and its dependencies declared externally, as well as attribute 'org.gradle.plugin.api-version' with value '7.6.1' but:\n                 - Variant 'apiElements' capability org.springframework.boot:spring-boot-gradle-plugin:3.1.0 declares a library, packaged as a jar, and its dependencies declared externally:\n                     - Incompatible because this component declares an API of a component compatible with Java 17 and the consumer needed a runtime of a component compatible with Java 8\n                     - Other compatible attribute:\n                         - Doesn't say anything about org.gradle.plugin.api-version (required '7.6.1')\n                 - Variant 'javadocElements' capability org.springframework.boot:spring-boot-gradle-plugin:3.1.0 declares a runtime of a component, and its dependencies declared externally:\n                     - Incompatible because this component declares documentation and the consumer needed a library\n                     - Other compatible attributes:\n                         - Doesn't say anything about its target Java version (required compatibility with Java 8)\n                         - Doesn't say anything about its elements (required them packaged as a jar)\n                         - Doesn't say anything about org.gradle.plugin.api-version (required '7.6.1')\n                 - Variant 'mavenOptionalApiElements' capability org.springframework.boot:spring-boot-gradle-plugin-maven-optional:3.1.0 declares a library, packaged as a jar, and its dependencies declared externally:\n                     - Incompatible because this component declares an API of a component compatible with Java 17 and the consumer needed a runtime of a component compatible with Java 8\n                     - Other compatible attribute:\n                         - Doesn't say anything about org.gradle.plugin.api-version (required '7.6.1')\n                 - Variant 'mavenOptionalRuntimeElements' capability org.springframework.boot:spring-boot-gradle-plugin-maven-optional:3.1.0 declares a runtime of a library, packaged as a jar, and its dependencies declared externally:\n                     - Incompatible because this component declares a component compatible with Java 17 and the consumer needed a component compatible with Java 8\n                     - Other compatible attribute:\n                         - Doesn't say anything about org.gradle.plugin.api-version (required '7.6.1')\n                 - Variant 'runtimeElements' capability org.springframework.boot:spring-boot-gradle-plugin:3.1.0 declares a runtime of a library, packaged as a jar, and its dependencies declared externally:\n                     - Incompatible because this component declares a component compatible with Java 17 and the consumer needed a component compatible with Java 8\n                     - Other compatible attribute:\n                         - Doesn't say anything about org.gradle.plugin.api-version (required '7.6.1')\n                 - Variant 'sourcesElements' capability org.springframework.boot:spring-boot-gradle-plugin:3.1.0 declares a runtime of a component, and its dependencies declared externally:\n                     - Incompatible because this component declares documentation and the consumer needed a library\n                     - Other compatible attributes:\n                         - Doesn't say anything about its target Java version (required compatibility with Java 8)\n                         - Doesn't say anything about its elements (required them packaged as a jar)\n                         - Doesn't say anything about org.gradle.plugin.api-version (required '7.6.1')\n       \n       * Try:\n       &gt; Run with --stacktrace option to get the stack trace.\n       &gt; Run with --info or --debug option to get more log output.\n       &gt; Run with --scan to get full insights.\n       \n       * Get more help at https://help.gradle.org\n       \n       BUILD FAILED in 8s\n !     ERROR: Failed to run Gradle!\n       We're sorry this build is failing. If you can't find the issue in application\n       code, please submit a ticket so we can help: https://help.heroku.com\n       You can also try reverting to the previous version of the buildpack by running:\n       $ heroku buildpacks:set https://github.com/heroku/heroku-buildpack-gradle#previous-version\n       \n       Thanks,\n       Heroku\n !     Push rejected, failed to compile Gradle app.\n !     Push failed\n</code></pre>\n<p>This is my build.gradle file:</p>\n<pre><code>plugins {\n    id 'java'\n    id 'org.springframework.boot' version '3.1.0'\n    id 'io.spring.dependency-management' version '1.1.0'\n    id 'checkstyle'\n}\n\ngroup = 'FamilyFusion'\nversion = '0.0.1-SNAPSHOT'\nsourceCompatibility = '17'\n\nconfigurations {\n    compileOnly {\n        extendsFrom annotationProcessor\n    }\n}\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    // Spring Boot Starters\n    implementation 'org.springframework.boot:spring-boot-starter-data-jpa'\n    implementation 'org.springframework.boot:spring-boot-starter-mail'\n    implementation 'org.springframework.boot:spring-boot-starter-security'\n    implementation 'org.springframework.boot:spring-boot-starter-thymeleaf'\n    implementation 'org.springframework.boot:spring-boot-starter-web'\n\n    // Validation\n    implementation 'org.springframework.boot:spring-boot-starter-validation:3.0.6'\n\n    // Thymeleaf Extras\n    implementation 'org.thymeleaf.extras:thymeleaf-extras-springsecurity6'\n    implementation 'nz.net.ultraq.thymeleaf:thymeleaf-layout-dialect:3.2.1'\n\n    // File Upload\n    implementation 'commons-fileupload:commons-fileupload:1.5'\n\n    // Gedcom4j\n    implementation 'org.gedcom4j:gedcom4j:4.0.1'\n\n    // JSON\n    implementation 'org.json:json:20230618'\n\n    // Lombok\n    compileOnly 'org.projectlombok:lombok'\n    annotationProcessor 'org.projectlombok:lombok'\n\n    // Development Tools\n    developmentOnly 'org.springframework.boot:spring-boot-devtools'\n\n    // Database Connector\n    runtimeOnly 'com.mysql:mysql-connector-j'\n\n    // Testing\n    testImplementation 'org.springframework.boot:spring-boot-starter-test'\n    testImplementation 'org.springframework.security:spring-security-test'\n}\n\ncheckstyle {\n    toolVersion = 8.40\n    maxWarnings = 0\n    ignoreFailures = true\n}\n\ntasks.withType(Checkstyle).configureEach {\n    reports {\n        xml.required = true\n        html.required = true\n    }\n}\n\ntasks.named('test') {\n    useJUnitPlatform()\n}\n\n</code></pre>\n<p>This is my application.properties file:</p>\n<pre><code>####    Database     ####\nspring.datasource.url=jdbc:mysql://localhost:3306/roots_and_recipes\nspring.datasource.username=*****\nspring.datasource.password=******\nspring.jpa.database-platform=MySQL\nspring.jpa.hibernate.ddl-auto=update\nspring.jpa.show-sql=false\n\n####    SSL     ####\nserver.port=8443\nserver.ssl.enabled=true\nserver.ssl.key-store=classpath:FamilyFusionSecurity.p12\nserver.ssl.key-store-password=******\nserver.ssl.key-store-type=PKCS12\nserver.ssl.key-alias=FamilyFusionSecurity\nserver.ssl.protocol=TLS\n\n####    Spring Mail     ####\nspring.mail.host=smtp.gmail.com\nspring.mail.port=587\nspring.mail.username=****\nspring.mail.password=******\nspring.mail.properties.mail.smtp.starttls.enable=true\nspring.mail.properties.mail.smtp.auth=true\nspring.mail.properties.mail.smtp.connectiontimeout=5000\nspring.mail.properties.mail.smtp.timeout=5000\nspring.mail.properties.mail.smtp.writetimeout=5000\n</code></pre>\n<p>I know that currently the db is localhost, but I wanted to see if I can first at least build the app on Heroku and then connect it properly to a cloud based db (was planning on using the free version of JawsDB MySQL)</p>\n"},{"tags":["java","gradle","java-8","build.gradle","bitbucket-pipelines"],"answers":[{"tags":[],"owner":{"account_id":14461800,"reputation":177,"user_id":10446433,"display_name":"SimpleJack"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693563183,"creation_date":1693562763,"answer_id":77022203,"question_id":77021867,"body_markdown":"Always stick to the **original** documentation. StackOverflow solutions may become deprecated over time. Therefore, follow the [**Gradle DOCs**](https://docs.gradle.org/current/userguide/building_java_projects.html#sec:java_dependency_management_overview):\r\n\r\n 1. Add your directory (in this example: **libs**) with JARs to your repository\r\n```\r\nrepositories {\r\n    mavenCentral()\r\n    flatDir {\r\n        dirs &#39;/path/to/libs/directory&#39;\r\n    }\r\n}\r\n```\r\n 2. Declare the actual dependency within this JAR\r\n```\r\ndependencies {\r\n   classpath group: &#39;my-jar-group&#39;, name: &#39;my-jar&#39;, version: &#39;1.0&#39;\r\n}\r\n```\r\nIf you don&#39;t know group and/or version, you may use a simplified dependency:\r\n```\r\ndependencies {\r\n   implementation name: &#39;my-jar&#39;\r\n}\r\n```\r\n\r\n 3. Compile your Project\r\n\r\nIf you don&#39;t declare any actual dependency, then your library will be excluded by Gradle to keep your resulting JAR as small as possible.","title":"How to make jar from a master jar in gradle?","body":"<p>Always stick to the <strong>original</strong> documentation. StackOverflow solutions may become deprecated over time. Therefore, follow the <a href=\"https://docs.gradle.org/current/userguide/building_java_projects.html#sec:java_dependency_management_overview\" rel=\"nofollow noreferrer\"><strong>Gradle DOCs</strong></a>:</p>\n<ol>\n<li>Add your directory (in this example: <strong>libs</strong>) with JARs to your repository</li>\n</ol>\n<pre><code>repositories {\n    mavenCentral()\n    flatDir {\n        dirs '/path/to/libs/directory'\n    }\n}\n</code></pre>\n<ol start=\"2\">\n<li>Declare the actual dependency within this JAR</li>\n</ol>\n<pre><code>dependencies {\n   classpath group: 'my-jar-group', name: 'my-jar', version: '1.0'\n}\n</code></pre>\n<p>If you don't know group and/or version, you may use a simplified dependency:</p>\n<pre><code>dependencies {\n   implementation name: 'my-jar'\n}\n</code></pre>\n<ol start=\"3\">\n<li>Compile your Project</li>\n</ol>\n<p>If you don't declare any actual dependency, then your library will be excluded by Gradle to keep your resulting JAR as small as possible.</p>\n"},{"comments":[{"owner":{"account_id":29175158,"reputation":1,"user_id":22350555,"display_name":"Robin William"},"score":0,"creation_date":1693585455,"post_id":77024111,"comment_id":135785259,"body_markdown":"I tried this but still same result the jar size is only 11kb and also it Could not find or load main class com.robin.roh.QuickRouteJobScheduler  the manifest has the name of main class","body":"I tried this but still same result the jar size is only 11kb and also it Could not find or load main class com.robin.roh.QuickRouteJobScheduler  the manifest has the name of main class"}],"tags":[],"owner":{"account_id":312560,"reputation":1308,"user_id":626698,"accept_rate":75,"display_name":"Mark Bakker"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693579829,"creation_date":1693579829,"answer_id":77024111,"question_id":77021867,"body_markdown":"    sourceSets.main.java.srcDirs = [&#39;src/com/robin/roh/QuickRouteJobScheduler&#39;]\r\n\r\nThis seems misconfigured, how I am reading this you are using a package structure `com.robin.roh` if that is the case, this should work better\r\n\r\n    sourceSets.main.java.srcDirs = [&#39;src&#39;]\r\n","title":"How to make jar from a master jar in gradle?","body":"<pre><code>sourceSets.main.java.srcDirs = ['src/com/robin/roh/QuickRouteJobScheduler']\n</code></pre>\n<p>This seems misconfigured, how I am reading this you are using a package structure <code>com.robin.roh</code> if that is the case, this should work better</p>\n<pre><code>sourceSets.main.java.srcDirs = ['src']\n</code></pre>\n"}],"owner":{"account_id":29175158,"reputation":1,"user_id":22350555,"display_name":"Robin William"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1693579829,"creation_date":1693559407,"question_id":77021867,"body_markdown":"I want to create a jar file via gradle. I have the java source code located in the folder and one jar file named master.jar i followed this post \r\n[**https://stackoverflow.com/questions/67725436/simplest-gradle-project-with-local-jar-files]**(Link)\r\n\r\nbut the jar file I got was very much less in size around 10kb but the size of the jar which i get via netbeans is 40kb also when I try to execute the jar file it shows an error that could not find the class file. \r\n\r\nCould not find or load main class com.robin.roh.QuickRouteJobScheduler\r\n\r\ni think its compilation error do i need to change anything else in my file?\r\n\r\nhere is my build.gradle file\r\n\r\n```\r\napply plugin: &#39;java&#39;\r\napply plugin: &#39;application&#39;\r\n\r\n// Define the source directory\r\nsourceSets.main.java.srcDirs = [&#39;src/com/robin/roh/QuickRouteJobScheduler&#39;]\r\n\r\ndependencies {\r\n    implementation fileTree(dir: &#39;libs&#39;, include: [&#39;*.jar&#39;])\r\n}\r\n\r\njar {\r\n    manifest {\r\n        attributes &#39;Main-Class&#39;: &#39;com.robin.roh.QuickRouteJobScheduler&#39;\r\n        attributes(&quot;Class-Path&quot;: configurations.runtimeClasspath { it.getName() }.join(&#39; &#39;))\r\n    }\r\n}\r\n\r\n```\r\n\r\nGradle shows build successful.. but when i run that jar it is showing main class not found on terminal.\r\n\r\nI want to use the jar files on libs folder to create the QuickRouteJobScheduler.jar i can create it with netbeans but want to use gradle for cicd pipeline on bitbucket\r\n\r\nI just want that my jar is created by using the jars on the libs folder anyother simple method too is appreciated..","title":"How to make jar from a master jar in gradle?","body":"<p>I want to create a jar file via gradle. I have the java source code located in the folder and one jar file named master.jar i followed this post\n[<strong>https://stackoverflow.com/questions/67725436/simplest-gradle-project-with-local-jar-files]</strong>(Link)</p>\n<p>but the jar file I got was very much less in size around 10kb but the size of the jar which i get via netbeans is 40kb also when I try to execute the jar file it shows an error that could not find the class file.</p>\n<p>Could not find or load main class com.robin.roh.QuickRouteJobScheduler</p>\n<p>i think its compilation error do i need to change anything else in my file?</p>\n<p>here is my build.gradle file</p>\n<pre><code>apply plugin: 'java'\napply plugin: 'application'\n\n// Define the source directory\nsourceSets.main.java.srcDirs = ['src/com/robin/roh/QuickRouteJobScheduler']\n\ndependencies {\n    implementation fileTree(dir: 'libs', include: ['*.jar'])\n}\n\njar {\n    manifest {\n        attributes 'Main-Class': 'com.robin.roh.QuickRouteJobScheduler'\n        attributes(&quot;Class-Path&quot;: configurations.runtimeClasspath { it.getName() }.join(' '))\n    }\n}\n\n</code></pre>\n<p>Gradle shows build successful.. but when i run that jar it is showing main class not found on terminal.</p>\n<p>I want to use the jar files on libs folder to create the QuickRouteJobScheduler.jar i can create it with netbeans but want to use gradle for cicd pipeline on bitbucket</p>\n<p>I just want that my jar is created by using the jars on the libs folder anyother simple method too is appreciated..</p>\n"},{"tags":["java","apache-kafka","jsonschema","confluent-schema-registry"],"comments":[{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1693516298,"post_id":77018866,"comment_id":135775513,"body_markdown":"1) Please show your property file, we don&#39;t know what serializer you&#39;re using 2) You probably shouldn&#39;t use `Object` for JSONSchema. Use [a custom class](https://github.com/confluentinc/schema-registry/blob/master/json-schema-serializer/src/test/java/io/confluent/kafka/serializers/json/KafkaJsonSchemaSerializerTest.java#L188) or a Map, which both need `age` fields/keys, not `myField1`","body":"1) Please show your property file, we don&#39;t know what serializer you&#39;re using 2) You probably shouldn&#39;t use <code>Object</code> for JSONSchema. Use <a href=\"https://github.com/confluentinc/schema-registry/blob/master/json-schema-serializer/src/test/java/io/confluent/kafka/serializers/json/KafkaJsonSchemaSerializerTest.java#L188\" rel=\"nofollow noreferrer\">a custom class</a> or a Map, which both need <code>age</code> fields/keys, not <code>myField1</code>"},{"owner":{"account_id":301230,"reputation":28997,"user_id":608820,"accept_rate":89,"display_name":"Augusto"},"score":1,"creation_date":1693516326,"post_id":77018866,"comment_id":135775517,"body_markdown":"The schema has the attribute &#39;age&#39; and the code &#39;myField1&#39;. They are not the same.","body":"The schema has the attribute &#39;age&#39; and the code &#39;myField1&#39;. They are not the same."},{"owner":{"account_id":2922851,"reputation":12071,"user_id":2504762,"accept_rate":38,"display_name":"Gaurang Shah"},"score":0,"creation_date":1693572675,"post_id":77018866,"comment_id":135782573,"body_markdown":"@OneCricketeer `myField1` was a typo.","body":"@OneCricketeer <code>myField1</code> was a typo."},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1693575091,"post_id":77018866,"comment_id":135783098,"body_markdown":"Okay. What happens when you don&#39;t use Object class as your value?","body":"Okay. What happens when you don&#39;t use Object class as your value?"},{"owner":{"account_id":2922851,"reputation":12071,"user_id":2504762,"accept_rate":38,"display_name":"Gaurang Shah"},"score":0,"creation_date":1693578957,"post_id":77018866,"comment_id":135783898,"body_markdown":"@OneCricketeer what should I use instead?","body":"@OneCricketeer what should I use instead?"}],"answers":[{"comments":[{"owner":{"account_id":2922851,"reputation":12071,"user_id":2504762,"accept_rate":38,"display_name":"Gaurang Shah"},"score":0,"creation_date":1693575674,"post_id":77023548,"comment_id":135783197,"body_markdown":"I tried with Map, and getting a different error.","body":"I tried with Map, and getting a different error."},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1693588716,"post_id":77023548,"comment_id":135785730,"body_markdown":"Your errors are related to the &quot;old schema&quot;. Issue a delete request to the registry for the subject `gcp.test_schema-value`. The producer automatically registers a schema, so you didn&#39;t need to pre-create one directly in the registry.. Otherwise, as mentioned, download the existing schema in the registry and use the linked maven plugin to create your class, not define one manually. Here is a useful blog about how JSON compatibility works - https://yokota.blog/2021/03/29/understanding-json-schema-compatibility/","body":"Your errors are related to the &quot;old schema&quot;. Issue a delete request to the registry for the subject <code>gcp.test_schema-value</code>. The producer automatically registers a schema, so you didn&#39;t need to pre-create one directly in the registry.. Otherwise, as mentioned, download the existing schema in the registry and use the linked maven plugin to create your class, not define one manually. Here is a useful blog about how JSON compatibility works - <a href=\"https://yokota.blog/2021/03/29/understanding-json-schema-compatibility/\" rel=\"nofollow noreferrer\">yokota.blog/2021/03/29/understanding-json-schema-compatibili&zwnj;&#8203;ty</a>"},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1693589098,"post_id":77023548,"comment_id":135785788,"body_markdown":"Actually, your last update is correct. You are missing `producer.flush()` usage since the send() does not make an immediate network call","body":"Actually, your last update is correct. You are missing <code>producer.flush()</code> usage since the send() does not make an immediate network call"},{"owner":{"account_id":2922851,"reputation":12071,"user_id":2504762,"accept_rate":38,"display_name":"Gaurang Shah"},"score":1,"creation_date":1693589515,"post_id":77023548,"comment_id":135785853,"body_markdown":"it worked, after flush(). so do I have to create `POJO` for my json ? I am getting this events from `dynamodb` as string.","body":"it worked, after flush(). so do I have to create <code>POJO</code> for my json ? I am getting this events from <code>dynamodb</code> as string."},{"owner":{"account_id":2922851,"reputation":12071,"user_id":2504762,"accept_rate":38,"display_name":"Gaurang Shah"},"score":0,"creation_date":1693590125,"post_id":77023548,"comment_id":135785964,"body_markdown":"isn&#39;t there any way I can send either a JSON string or convert JSON to map and send it ?","body":"isn&#39;t there any way I can send either a JSON string or convert JSON to map and send it ?"},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1693592539,"post_id":77023548,"comment_id":135786313,"body_markdown":"Sure. Don&#39;t use the schema registry. Use StringSerializer for the value. Not sure how dynamo is related to the problem. You can still parse string payloads into POJO classes using `ObjectMapper.readTree`","body":"Sure. Don&#39;t use the schema registry. Use StringSerializer for the value. Not sure how dynamo is related to the problem. You can still parse string payloads into POJO classes using <code>ObjectMapper.readTree</code>"},{"owner":{"account_id":2922851,"reputation":12071,"user_id":2504762,"accept_rate":38,"display_name":"Gaurang Shah"},"score":0,"creation_date":1694189508,"post_id":77023548,"comment_id":135863288,"body_markdown":"can I send `Map` instead of serializing object using Java Library and sending pojo. I tried that and now it&#39;s accepting everything. even things which doesn&#39;t match with schema.","body":"can I send <code>Map</code> instead of serializing object using Java Library and sending pojo. I tried that and now it&#39;s accepting everything. even things which doesn&#39;t match with schema."},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1694379854,"post_id":77023548,"comment_id":135879960,"body_markdown":"As mentioned in the answer, yes, a map could be used, but it will be a &quot;map schema&quot; since values in a map cannot be different types... If it&#39;s accepting anything, sounds like you&#39;re no longer using a serializer that&#39;s provided by Confluent","body":"As mentioned in the answer, yes, a map could be used, but it will be a &quot;map schema&quot; since values in a map cannot be different types... If it&#39;s accepting anything, sounds like you&#39;re no longer using a serializer that&#39;s provided by Confluent"}],"tags":[],"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"comment_count":8,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693575547,"creation_date":1693575240,"answer_id":77023548,"question_id":77018866,"body_markdown":"You&#39;re sending a String that&#39;s been type erased to an Object.\r\n\r\nIt has no &quot;schema&quot; other than &quot;string&quot; (no age field)\r\n\r\nYou need to define the Producer with, and send, a Map or class _with fields_ that represents your schema (there&#39;s a [jsonschema2pojo maven plugin](https://github.com/joelittlejohn/jsonschema2pojo/wiki/Getting-Started) that can create such classes)\r\n\r\nYou can find examples in the unit tests for the json schema serializer\r\n\r\nhttps://github.com/confluentinc/schema-registry/blob/master/json-schema-serializer/src/test/java/io/confluent/kafka/serializers/json/KafkaJsonSchemaSerializerTest.java\r\n\r\nSidenote: age should probably be a number, rather than a string ","title":"Message is being rejected for incompatible schema","body":"<p>You're sending a String that's been type erased to an Object.</p>\n<p>It has no &quot;schema&quot; other than &quot;string&quot; (no age field)</p>\n<p>You need to define the Producer with, and send, a Map or class <em>with fields</em> that represents your schema (there's a <a href=\"https://github.com/joelittlejohn/jsonschema2pojo/wiki/Getting-Started\" rel=\"nofollow noreferrer\">jsonschema2pojo maven plugin</a> that can create such classes)</p>\n<p>You can find examples in the unit tests for the json schema serializer</p>\n<p><a href=\"https://github.com/confluentinc/schema-registry/blob/master/json-schema-serializer/src/test/java/io/confluent/kafka/serializers/json/KafkaJsonSchemaSerializerTest.java\" rel=\"nofollow noreferrer\">https://github.com/confluentinc/schema-registry/blob/master/json-schema-serializer/src/test/java/io/confluent/kafka/serializers/json/KafkaJsonSchemaSerializerTest.java</a></p>\n<p>Sidenote: age should probably be a number, rather than a string</p>\n"}],"owner":{"account_id":2922851,"reputation":12071,"user_id":2504762,"accept_rate":38,"display_name":"Gaurang Shah"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":170,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1693578931,"creation_date":1693511383,"question_id":77018866,"body_markdown":"I am trying to send the message to a Kafka topic with schema. Seems like the message matches with schema but message is being rejected with following error. \r\n\r\n**code**\r\n\r\n```java\r\n   String topic = &quot;gcp.test_schema&quot;;\r\n        final Properties props = new Properties();\r\n        InputStream inputStream = Files.newInputStream(Paths.get(&quot;src/main/resources/client.properties&quot;));\r\n        props.load(inputStream);\r\n        // Create Kafka producer\r\n        Producer&lt;String, Object&gt; producer = new KafkaProducer&lt;&gt;(props);\r\n\r\n        String jsonPayload = &quot;{\\&quot;age\\&quot;: \\&quot;30\\&quot;}&quot;;\r\n\r\n        // Create a Kafka record with JSON payload\r\n        ProducerRecord&lt;String, Object&gt; kafkaRecord = new ProducerRecord&lt;&gt;(topic, jsonPayload);\r\n\r\n        // Send the record to Kafka topic\r\n        producer.send(kafkaRecord, (metadata, exception) -&gt; {\r\n            if (exception != null) {\r\n                exception.printStackTrace();\r\n            } else {\r\n                System.out.println(&quot;Message sent successfully!&quot;);\r\n                System.out.println(&quot;Partition: &quot; + metadata.partition());\r\n                System.out.println(&quot;Offset: &quot; + metadata.offset());\r\n            }\r\n        });\r\n\r\n    }\r\n```\r\n\r\n**topic details** \r\n```\r\n❯ ./bin/confluent kafka topic describe gcp.test_schema\r\n                   Name                   |                          Value                           | Read-Only\r\n------------------------------------------+----------------------------------------------------------+------------\r\n  cleanup.policy                          | delete                                                   | false\r\n  compression.type                        | producer                                                 | true\r\n  confluent.key.schema.validation         | false                                                    | false\r\n  confluent.key.subject.name.strategy     | io.confluent.kafka.serializers.subject.TopicNameStrategy | false\r\n  confluent.value.schema.validation       | false                                                    | false\r\n  confluent.value.subject.name.strategy   | io.confluent.kafka.serializers.subject.TopicNameStrategy | false\r\n```\r\n\r\n\r\n**Topic Schema** \r\n```json\r\n{\r\n  &quot;properties&quot;: {\r\n    &quot;age&quot;: {\r\n      &quot;type&quot;: &quot;string&quot;\r\n    }\r\n  }\r\n} \r\n```\r\n\r\n**property file**\r\n```\r\n# Required connection configs for Kafka producer, consumer, and admin\r\nbootstrap.servers=xxx.northamerica-northeast1.gcp.confluent.cloud:9092\r\nsecurity.protocol=SASL_SSL\r\nsasl.jaas.config=org.apache.kafka.common.security.plain.PlainLoginModule required username=&#39;xxx&#39; password=&#39;xxx/iQEXntX/xx&#39;;\r\nsasl.mechanism=PLAIN\r\nkey.serializer=org.apache.kafka.common.serialization.StringSerializer\r\n\r\nvalue.serializer=io.confluent.kafka.serializers.json.KafkaJsonSchemaSerializer\r\nconfluent.value.schema.validation=true\r\n\r\n# Required connection configs for Confluent Cloud Schema Registry\r\nschema.registry.url=https://qqqq.us-east1.gcp.confluent.cloud\r\nbasic.auth.credentials.source=USER_INFO\r\nbasic.auth.user.info=ffff:ssd+ddd+YySi\r\n```\r\n\r\n**Error**\r\n```\r\norg.apache.kafka.common.errors.InvalidConfigurationException: Schema being registered is incompatible with an earlier schema for subject &quot;gcp.test_schema-value&quot;, \r\ndetails: [{errorType:&quot;TYPE_CHANGED&quot;, description:&quot;A type at path &#39;#/&#39; is different between the new schema and the old schema&#39;}, {oldSchemaVersion: 1}, {oldSchema: &#39;{&quot;properties&quot;:{&quot;age&quot;:{&quot;type&quot;:&quot;string&quot;}}}&#39;}, {compatibility: &#39;BACKWARD&#39;}]; error code: 409; error code: 409\r\n\r\n```\r\n\r\n**Update**\r\n\r\n**Tried with Map**\r\n\r\n```java\r\nProducer&lt;String, Map&gt; producer = new KafkaProducer&lt;String, Map&gt;(props);\r\nProducerRecord&lt;String, Map&gt; kafkaRecord = new ProducerRecord&lt;&gt;(topic, Map.of(&quot;age&quot;, &quot;30&quot;));\r\n\r\n```\r\n\r\n**Error**: ADDITIONAL_PROPERTIES_NARROWED\r\n```\r\norg.apache.kafka.common.errors.InvalidConfigurationException: Schema being registered is incompatible with an earlier schema for subject &quot;gcp.test_schema-value&quot;, \r\ndetails: [{errorType:&quot;ADDITIONAL_PROPERTIES_NARROWED&quot;, description:&quot;An array or combined type at path &#39;#/additionalProperties&#39; has fewer elements in the new schema than the old schema&#39;}, {oldSchemaVersion: 1}, {oldSchema: &#39;{&quot;properties&quot;:{&quot;age&quot;:{&quot;type&quot;:&quot;string&quot;}}}&#39;}, {compatibility: &#39;BACKWARD&#39;}]; error code: 409\r\n\r\n```\r\n\r\n**Update 2 - With class** \r\n\r\n```java\r\nclass User {\r\n    @JsonProperty\r\n    public String age;\r\n    public User() {}\r\n    public User(String age) {\r\n        this(age, null);\r\n    }\r\n    public User(String age, Object o) {\r\n    }\r\n}\r\n\r\n\r\nProducer&lt;String, User&gt; producer = new KafkaProducer&lt;String, User&gt;(props);\r\nUser user = new User(&quot;30&quot;);\r\nProducerRecord&lt;String, User&gt; kafkaRecord = new ProducerRecord&lt;&gt;(topic, user);\r\n```\r\n\r\nError - ADDITIONAL_PROPERTIES_REMOVED\r\n```\r\norg.apache.kafka.common.errors.InvalidConfigurationException: Schema being registered is incompatible with an earlier schema for subject &quot;gcp.test_schema-value&quot;, \r\ndetails: [{errorType:&quot;ADDITIONAL_PROPERTIES_REMOVED&quot;, description:&quot;The keyword at path &#39;#/additionalProperties&#39; in the new schema is not present in the old schema&#39;}, {oldSchemaVersion: 1}, {oldSchema: &#39;{&quot;properties&quot;:{&quot;age&quot;:{&quot;type&quot;:&quot;string&quot;}}}&#39;}, {compatibility: &#39;BACKWARD&#39;}]; error code: 409; error code: 409\r\n```\r\n\r\n**Update 3:**\r\n\r\nI tried changing my schema to following \r\n\r\n```json\r\n{\r\n  &quot;$id&quot;: &quot;http://example.com/myURI.schema.json&quot;,\r\n  &quot;$schema&quot;: &quot;http://json-schema.org/draft-07/schema#&quot;,\r\n  &quot;additionalProperties&quot;: false,\r\n  &quot;description&quot;: &quot;Sample schema to help you get started.&quot;,\r\n  &quot;properties&quot;: {\r\n    &quot;age&quot;: {\r\n      &quot;description&quot;: &quot;The string type is used for strings of text.&quot;,\r\n      &quot;type&quot;: &quot;string&quot;\r\n    }\r\n  },\r\n  &quot;title&quot;: &quot;SampleRecord&quot;,\r\n  &quot;type&quot;: &quot;object&quot;\r\n}\r\n```\r\n\r\nNow this doesn&#39;t give me any error, but depends on what I use, either class or map, the schema gets a new version. The message never delivers to the topic, neither I get any error. \r\n\r\nI see following version after I use map \r\n```json \r\n{\r\n  &quot;$schema&quot;: &quot;http://json-schema.org/draft-07/schema#&quot;,\r\n  &quot;additionalProperties&quot;: {},\r\n  &quot;title&quot;: &quot;Map 1&quot;,\r\n  &quot;type&quot;: &quot;object&quot;\r\n}\r\n```","title":"Message is being rejected for incompatible schema","body":"<p>I am trying to send the message to a Kafka topic with schema. Seems like the message matches with schema but message is being rejected with following error.</p>\n<p><strong>code</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>   String topic = &quot;gcp.test_schema&quot;;\n        final Properties props = new Properties();\n        InputStream inputStream = Files.newInputStream(Paths.get(&quot;src/main/resources/client.properties&quot;));\n        props.load(inputStream);\n        // Create Kafka producer\n        Producer&lt;String, Object&gt; producer = new KafkaProducer&lt;&gt;(props);\n\n        String jsonPayload = &quot;{\\&quot;age\\&quot;: \\&quot;30\\&quot;}&quot;;\n\n        // Create a Kafka record with JSON payload\n        ProducerRecord&lt;String, Object&gt; kafkaRecord = new ProducerRecord&lt;&gt;(topic, jsonPayload);\n\n        // Send the record to Kafka topic\n        producer.send(kafkaRecord, (metadata, exception) -&gt; {\n            if (exception != null) {\n                exception.printStackTrace();\n            } else {\n                System.out.println(&quot;Message sent successfully!&quot;);\n                System.out.println(&quot;Partition: &quot; + metadata.partition());\n                System.out.println(&quot;Offset: &quot; + metadata.offset());\n            }\n        });\n\n    }\n</code></pre>\n<p><strong>topic details</strong></p>\n<pre><code>❯ ./bin/confluent kafka topic describe gcp.test_schema\n                   Name                   |                          Value                           | Read-Only\n------------------------------------------+----------------------------------------------------------+------------\n  cleanup.policy                          | delete                                                   | false\n  compression.type                        | producer                                                 | true\n  confluent.key.schema.validation         | false                                                    | false\n  confluent.key.subject.name.strategy     | io.confluent.kafka.serializers.subject.TopicNameStrategy | false\n  confluent.value.schema.validation       | false                                                    | false\n  confluent.value.subject.name.strategy   | io.confluent.kafka.serializers.subject.TopicNameStrategy | false\n</code></pre>\n<p><strong>Topic Schema</strong></p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;properties&quot;: {\n    &quot;age&quot;: {\n      &quot;type&quot;: &quot;string&quot;\n    }\n  }\n} \n</code></pre>\n<p><strong>property file</strong></p>\n<pre><code># Required connection configs for Kafka producer, consumer, and admin\nbootstrap.servers=xxx.northamerica-northeast1.gcp.confluent.cloud:9092\nsecurity.protocol=SASL_SSL\nsasl.jaas.config=org.apache.kafka.common.security.plain.PlainLoginModule required username='xxx' password='xxx/iQEXntX/xx';\nsasl.mechanism=PLAIN\nkey.serializer=org.apache.kafka.common.serialization.StringSerializer\n\nvalue.serializer=io.confluent.kafka.serializers.json.KafkaJsonSchemaSerializer\nconfluent.value.schema.validation=true\n\n# Required connection configs for Confluent Cloud Schema Registry\nschema.registry.url=https://qqqq.us-east1.gcp.confluent.cloud\nbasic.auth.credentials.source=USER_INFO\nbasic.auth.user.info=ffff:ssd+ddd+YySi\n</code></pre>\n<p><strong>Error</strong></p>\n<pre><code>org.apache.kafka.common.errors.InvalidConfigurationException: Schema being registered is incompatible with an earlier schema for subject &quot;gcp.test_schema-value&quot;, \ndetails: [{errorType:&quot;TYPE_CHANGED&quot;, description:&quot;A type at path '#/' is different between the new schema and the old schema'}, {oldSchemaVersion: 1}, {oldSchema: '{&quot;properties&quot;:{&quot;age&quot;:{&quot;type&quot;:&quot;string&quot;}}}'}, {compatibility: 'BACKWARD'}]; error code: 409; error code: 409\n\n</code></pre>\n<p><strong>Update</strong></p>\n<p><strong>Tried with Map</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>Producer&lt;String, Map&gt; producer = new KafkaProducer&lt;String, Map&gt;(props);\nProducerRecord&lt;String, Map&gt; kafkaRecord = new ProducerRecord&lt;&gt;(topic, Map.of(&quot;age&quot;, &quot;30&quot;));\n\n</code></pre>\n<p><strong>Error</strong>: ADDITIONAL_PROPERTIES_NARROWED</p>\n<pre><code>org.apache.kafka.common.errors.InvalidConfigurationException: Schema being registered is incompatible with an earlier schema for subject &quot;gcp.test_schema-value&quot;, \ndetails: [{errorType:&quot;ADDITIONAL_PROPERTIES_NARROWED&quot;, description:&quot;An array or combined type at path '#/additionalProperties' has fewer elements in the new schema than the old schema'}, {oldSchemaVersion: 1}, {oldSchema: '{&quot;properties&quot;:{&quot;age&quot;:{&quot;type&quot;:&quot;string&quot;}}}'}, {compatibility: 'BACKWARD'}]; error code: 409\n\n</code></pre>\n<p><strong>Update 2 - With class</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>class User {\n    @JsonProperty\n    public String age;\n    public User() {}\n    public User(String age) {\n        this(age, null);\n    }\n    public User(String age, Object o) {\n    }\n}\n\n\nProducer&lt;String, User&gt; producer = new KafkaProducer&lt;String, User&gt;(props);\nUser user = new User(&quot;30&quot;);\nProducerRecord&lt;String, User&gt; kafkaRecord = new ProducerRecord&lt;&gt;(topic, user);\n</code></pre>\n<p>Error - ADDITIONAL_PROPERTIES_REMOVED</p>\n<pre><code>org.apache.kafka.common.errors.InvalidConfigurationException: Schema being registered is incompatible with an earlier schema for subject &quot;gcp.test_schema-value&quot;, \ndetails: [{errorType:&quot;ADDITIONAL_PROPERTIES_REMOVED&quot;, description:&quot;The keyword at path '#/additionalProperties' in the new schema is not present in the old schema'}, {oldSchemaVersion: 1}, {oldSchema: '{&quot;properties&quot;:{&quot;age&quot;:{&quot;type&quot;:&quot;string&quot;}}}'}, {compatibility: 'BACKWARD'}]; error code: 409; error code: 409\n</code></pre>\n<p><strong>Update 3:</strong></p>\n<p>I tried changing my schema to following</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;$id&quot;: &quot;http://example.com/myURI.schema.json&quot;,\n  &quot;$schema&quot;: &quot;http://json-schema.org/draft-07/schema#&quot;,\n  &quot;additionalProperties&quot;: false,\n  &quot;description&quot;: &quot;Sample schema to help you get started.&quot;,\n  &quot;properties&quot;: {\n    &quot;age&quot;: {\n      &quot;description&quot;: &quot;The string type is used for strings of text.&quot;,\n      &quot;type&quot;: &quot;string&quot;\n    }\n  },\n  &quot;title&quot;: &quot;SampleRecord&quot;,\n  &quot;type&quot;: &quot;object&quot;\n}\n</code></pre>\n<p>Now this doesn't give me any error, but depends on what I use, either class or map, the schema gets a new version. The message never delivers to the topic, neither I get any error.</p>\n<p>I see following version after I use map</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;$schema&quot;: &quot;http://json-schema.org/draft-07/schema#&quot;,\n  &quot;additionalProperties&quot;: {},\n  &quot;title&quot;: &quot;Map 1&quot;,\n  &quot;type&quot;: &quot;object&quot;\n}\n</code></pre>\n"},{"tags":["java","fatal-error","jvm-crash"],"comments":[{"owner":{"account_id":97762,"reputation":7689,"user_id":265022,"display_name":"lobster1234"},"score":0,"creation_date":1308789846,"post_id":6448163,"comment_id":7571507,"body_markdown":"Do the machines where it works have the same JRE versions as the one that&#39;s crashing?","body":"Do the machines where it works have the same JRE versions as the one that&#39;s crashing?"},{"owner":{"account_id":307527,"reputation":1695,"user_id":618870,"accept_rate":62,"display_name":"evgeni"},"score":0,"creation_date":1308790433,"post_id":6448163,"comment_id":7571595,"body_markdown":"yes, it is the same JRE. I tried both, SUN and OpenJRE, the error appears in both cases.","body":"yes, it is the same JRE. I tried both, SUN and OpenJRE, the error appears in both cases."},{"owner":{"account_id":284299,"reputation":8756,"user_id":582320,"display_name":"jtoberon"},"score":3,"creation_date":1308790608,"post_id":6448163,"comment_id":7571619,"body_markdown":"Smells like a hardware problem. Have you tried running any diagnostics?","body":"Smells like a hardware problem. Have you tried running any diagnostics?"},{"owner":{"account_id":30304,"reputation":27134,"user_id":82559,"display_name":"alphazero"},"score":0,"creation_date":1308790696,"post_id":6448163,"comment_id":7571626,"body_markdown":"Agreed: first make certain it is not hardware before wasting more time chasing software issues.","body":"Agreed: first make certain it is not hardware before wasting more time chasing software issues."},{"owner":{"account_id":307527,"reputation":1695,"user_id":618870,"accept_rate":62,"display_name":"evgeni"},"score":0,"creation_date":1308791053,"post_id":6448163,"comment_id":7571675,"body_markdown":"how could&#160;I find that out? could you give me a hint in that direction?","body":"how could I find that out? could you give me a hint in that direction?"},{"owner":{"account_id":120605,"reputation":24173,"user_id":313137,"display_name":"Romain Hippeau"},"score":1,"creation_date":1308794478,"post_id":6448163,"comment_id":7572075,"body_markdown":"I would try upgrading the JRE to the latest one and then try again. Of course it looks like from your code that you are not closing any resources.","body":"I would try upgrading the JRE to the latest one and then try again. Of course it looks like from your code that you are not closing any resources."},{"owner":{"account_id":125919,"reputation":5073,"user_id":322034,"accept_rate":67,"display_name":"user3111525"},"score":1,"creation_date":1326313155,"post_id":6448163,"comment_id":11017765,"body_markdown":"@evgeni can you share the details? What was the solution?","body":"@evgeni can you share the details? What was the solution?"},{"owner":{"account_id":8979682,"reputation":1220,"user_id":6695297,"accept_rate":56,"display_name":"Shubham Srivastava"},"score":0,"creation_date":1561445407,"post_id":6448163,"comment_id":100054626,"body_markdown":"Hi, if my answer is correct, please mark. Asking this very late...","body":"Hi, if my answer is correct, please mark. Asking this very late..."},{"owner":{"account_id":18648992,"reputation":931,"user_id":13592914,"display_name":"cs1349459"},"score":0,"creation_date":1630882227,"post_id":6448163,"comment_id":122069420,"body_markdown":"I had this same error, and it had to do with an IntBuffer. Even updating the OS and reinstalling java didn&#39;t fix it.","body":"I had this same error, and it had to do with an IntBuffer. Even updating the OS and reinstalling java didn&#39;t fix it."}],"answers":[{"comments":[{"owner":{"account_id":307527,"reputation":1695,"user_id":618870,"accept_rate":62,"display_name":"evgeni"},"score":0,"creation_date":1308852610,"post_id":6448318,"comment_id":7586026,"body_markdown":"I have tried doing some analytics, however since I&#39;m not very familiar with the topic, it took me quite a lot of time. And unfortunately, I am running into a deadline, hence I will use a workaround for this problem. Thanks you for your help, I learned a lot of new things about memory.","body":"I have tried doing some analytics, however since I&#39;m not very familiar with the topic, it took me quite a lot of time. And unfortunately, I am running into a deadline, hence I will use a workaround for this problem. Thanks you for your help, I learned a lot of new things about memory."},{"owner":{"account_id":1709031,"reputation":6388,"user_id":1567452,"accept_rate":50,"display_name":"jwilner"},"score":0,"creation_date":1438313233,"post_id":6448318,"comment_id":51409972,"body_markdown":"Just saved my ass. Thanks @jtoberon!","body":"Just saved my ass. Thanks @jtoberon!"}],"tags":[],"owner":{"account_id":284299,"reputation":8756,"user_id":582320,"display_name":"jtoberon"},"comment_count":2,"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1415889782,"creation_date":1308791501,"answer_id":6448318,"question_id":6448163,"body_markdown":"Generally if something works on various computers but fails on only one computer, then there&#39;s something wrong with that computer. Here are a few things to check: &lt;br/&gt;\r\n(1) Are you running the same stuff on that computer -- OS including patches, etc. &lt;br/&gt;\r\n(2) Does the computer report problems? Where to look depends on the OS, but it looks like you&#39;re using linux, so check [syslog][1] &lt;br/&gt;\r\n(3) Run hardware diagnostics, e.g. the ones recommended [here][2]. Start with [memory][3] and [disk checks][4] in particular.\r\n\r\nIf you can&#39;t turn up any issues, then search for a similar issue in the bug parade for whichever VM you&#39;re using. Unfortunately if you&#39;re already on the latest version of the VM, then you won&#39;t necessarily find a fix.\r\n\r\nFinally, one more option is simply to try another VM -- e.g. OpenJDK or JRockit, instead of Oracle&#39;s standard.\r\n\r\n\r\n  [1]: http://www.linuxhomenetworking.com/wiki/index.php/Quick_HOWTO_:_Ch05_:_Troubleshooting_Linux_with_syslog\r\n  [2]: http://ubuntuforums.org/showthread.php?t=1467216\r\n  [3]: https://serverfault.com/questions/349020/how-to-diagnose-ram\r\n  [4]: https://superuser.com/questions/171195/how-to-check-the-health-of-a-hard-drive","title":"A fatal error has been detected by the Java Runtime Environment: SIGSEGV, libjvm","body":"<p>Generally if something works on various computers but fails on only one computer, then there's something wrong with that computer. Here are a few things to check: <br/>\n(1) Are you running the same stuff on that computer -- OS including patches, etc. <br/>\n(2) Does the computer report problems? Where to look depends on the OS, but it looks like you're using linux, so check <a href=\"http://www.linuxhomenetworking.com/wiki/index.php/Quick_HOWTO_:_Ch05_:_Troubleshooting_Linux_with_syslog\" rel=\"nofollow noreferrer\">syslog</a> <br/>\n(3) Run hardware diagnostics, e.g. the ones recommended <a href=\"http://ubuntuforums.org/showthread.php?t=1467216\" rel=\"nofollow noreferrer\">here</a>. Start with <a href=\"https://serverfault.com/questions/349020/how-to-diagnose-ram\">memory</a> and <a href=\"https://superuser.com/questions/171195/how-to-check-the-health-of-a-hard-drive\">disk checks</a> in particular.</p>\n\n<p>If you can't turn up any issues, then search for a similar issue in the bug parade for whichever VM you're using. Unfortunately if you're already on the latest version of the VM, then you won't necessarily find a fix.</p>\n\n<p>Finally, one more option is simply to try another VM -- e.g. OpenJDK or JRockit, instead of Oracle's standard.</p>\n"},{"comments":[{"owner":{"account_id":307527,"reputation":1695,"user_id":618870,"accept_rate":62,"display_name":"evgeni"},"score":0,"creation_date":1308850741,"post_id":6449527,"comment_id":7585546,"body_markdown":"I get the same problem with 1.6.0_26, see log. Couldn&#39;t post the whole file, due to character limit at SO.","body":"I get the same problem with 1.6.0_26, see log. Couldn&#39;t post the whole file, due to character limit at SO."},{"owner":{"account_id":428914,"reputation":829,"user_id":811535,"display_name":"egridasov"},"score":0,"creation_date":1308873790,"post_id":6449527,"comment_id":7591147,"body_markdown":"Both times I see GC failing. Could you try a different GC?","body":"Both times I see GC failing. Could you try a different GC?"},{"owner":{"account_id":307527,"reputation":1695,"user_id":618870,"accept_rate":62,"display_name":"evgeni"},"score":0,"creation_date":1308934679,"post_id":6449527,"comment_id":7603498,"body_markdown":"I tried all GCs, with the same result. Only with UseConcMarkSweepGC the program runs a bit longer than with the others. Hence, I assume its a hardware problem.","body":"I tried all GCs, with the same result. Only with UseConcMarkSweepGC the program runs a bit longer than with the others. Hence, I assume its a hardware problem."}],"tags":[],"owner":{"account_id":428914,"reputation":829,"user_id":811535,"display_name":"egridasov"},"comment_count":3,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1308805239,"creation_date":1308805239,"answer_id":6449527,"question_id":6448163,"body_markdown":"Here is assembly code:\r\n\r\n    7f0b024734be:       48 8d 14 f5 00 00 00    lea    rdx,[rsi*8]\r\n    7f0b024734c5:       00\r\n    7f0b024734c6:       48 03 13                add    rdx,QWORD PTR [rbx]\r\n    7f0b024734c9:       48 8d 7a 10             lea    rdi,[rdx+16]\r\n    7f0b024734cd:       8b 5f 08                mov    ebx,DWORD PTR [rdi+8]\r\n    7f0b024734d0:       89 d8                   mov    eax,ebx\r\n    7f0b024734d2:       c1 f8 03                sar    eax,0x3\r\n    7f0b024734d5:       85 db                   test   ebx,ebx\r\n    7f0b024734d7:       0f 8e cb 05 00 00       jle    0x7f0b02473aa8\r\n\r\nAnd what it does is:\r\n\r\n    rdx = 0x00007f0a808d4ed2 * 8; // equals 0x0003F854046A7690. WTF???\r\n    rdx = rdx + something from old gen heap; // results 0x000600007f090486\r\n    rdi = rdx + 16; // results 0x000600007f090496\r\n    ebx = something from edi address (0x000600007f090496) + 8\r\n\r\nWell I&#39;ve had a look at the address map and there is nothing mapped to **0x000600007f090496** which is why you are getting a SEGV. Are you getting the same error with 1.6.0_26 JVM? Can you try it on a 32bit JVM? Looks like a JVM issue to me. Why would it do the first **rdx=0x0... * 8** thing?","title":"A fatal error has been detected by the Java Runtime Environment: SIGSEGV, libjvm","body":"<p>Here is assembly code:</p>\n\n<pre><code>7f0b024734be:       48 8d 14 f5 00 00 00    lea    rdx,[rsi*8]\n7f0b024734c5:       00\n7f0b024734c6:       48 03 13                add    rdx,QWORD PTR [rbx]\n7f0b024734c9:       48 8d 7a 10             lea    rdi,[rdx+16]\n7f0b024734cd:       8b 5f 08                mov    ebx,DWORD PTR [rdi+8]\n7f0b024734d0:       89 d8                   mov    eax,ebx\n7f0b024734d2:       c1 f8 03                sar    eax,0x3\n7f0b024734d5:       85 db                   test   ebx,ebx\n7f0b024734d7:       0f 8e cb 05 00 00       jle    0x7f0b02473aa8\n</code></pre>\n\n<p>And what it does is:</p>\n\n<pre><code>rdx = 0x00007f0a808d4ed2 * 8; // equals 0x0003F854046A7690. WTF???\nrdx = rdx + something from old gen heap; // results 0x000600007f090486\nrdi = rdx + 16; // results 0x000600007f090496\nebx = something from edi address (0x000600007f090496) + 8\n</code></pre>\n\n<p>Well I've had a look at the address map and there is nothing mapped to <strong>0x000600007f090496</strong> which is why you are getting a SEGV. Are you getting the same error with 1.6.0_26 JVM? Can you try it on a 32bit JVM? Looks like a JVM issue to me. Why would it do the first <strong>rdx=0x0... * 8</strong> thing?</p>\n"},{"tags":[],"owner":{"account_id":928808,"reputation":161,"user_id":959077,"accept_rate":0,"display_name":"SudhirJ"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1316699338,"creation_date":1316699338,"answer_id":7515836,"question_id":6448163,"body_markdown":"after hardware check on the server and it was found out that memory had gone bad, replaced the memory and the server is now fully accessible.","title":"A fatal error has been detected by the Java Runtime Environment: SIGSEGV, libjvm","body":"<p>after hardware check on the server and it was found out that memory had gone bad, replaced the memory and the server is now fully accessible.</p>\n"},{"tags":[],"owner":{"account_id":2637065,"reputation":7621,"user_id":2281472,"accept_rate":71,"display_name":"Develop4Life"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1580848689,"creation_date":1405930005,"answer_id":24860316,"question_id":6448163,"body_markdown":"# Here is your relief for the problem :\n\nI have a problem of running different versions of STS this morning, the application crash with the similar way as the question did.\n\nExcerpt of my log file.\n\n    A fatal error has been detected by the Java Runtime Environment:\n    #a\n    #  SIGSEGV (0xb) at pc=0x00007f459db082a1, pid=4577, tid=139939015632640\n    #\n    # JRE version: 6.0_30-b12\n    # Java VM: Java HotSpot(TM) 64-Bit Server VM \n    (20.5-b03 mixed mode linux-amd64 compressed oops)\n    # Problematic frame:\n    # C  [libsoup-2.4.so.1+0x6c2a1]  short+0x11\n\nnote that exception occured at # **C  [libsoup-2.4.so.1+0x6c2a1]  short+0x11**\n\nOkay then little below the line:\n\n    R9 =0x00007f461829e550: &lt;offset 0xa85550&gt; in /usr/share/java/jdk1.6.0_30/jre/lib/amd64/server/libjvm.so at 0x00007f4617819000\n    R10=0x00007f461750f7c0 is pointing into the stack for thread: 0x00007f4610008000\n    R11=0x00007f459db08290: soup_session_feature_detach+0 in /usr/lib/x86_64-linux-gnu/libsoup-2.4.so.1 at 0x00007f459da9c000\n    R12=0x0000000000000000 is an unknown value\n    R13=0x000000074404c840 is an oop\n    {method} \n\nThis line tells you where the actual bug or crash is to investigate more on this crash issue please use below links to see more, but let&#39;s continue the crash investigation and how I resolved it and the novelty of this bug :)\n\nlinks are :\n\n[a fATAL ERROR JAVA][1] THIS ONE IS GREAT LOTS OF USER!\n\n[a fATAL ERROR JAVA 2][2]\n\n\n  [1]: https://bugs.launchpad.net/ubuntu-gnome/+bug/1163501\n  [2]: https://stackoverflow.com/questions/6448163/a-fatal-error-has-been-detected-by-the-java-runtime-environment-sigsegv-libjvm\n\nOkay, after that here&#39;s what I found out to casue this case and why it happens as general advise.\n\n 1. Most of the time, check that if you have installed, updated recently on Ubunu and Windows  there are libraries  like **libsoup** in linux which were the casuse of my crash.\n 2. Check also for a new hardware problem and try to investigate the `Logfile` which `STS` or `Java` generated and also `syslog` in `linux` by \n\n        tail - f /var/lib/messages or some other file\n\nThen by carfully looking at those files the one you have the crash log for ... you can really solve the issue as follows:\n\n&gt; sudo unlink /usr/lib/i386-linux-gnu/libsoup-2.4.so.1\n\nor\n\n&gt; sudo unlink /usr/lib/x86_64-linux-gnu/libsoup-2.4.so.1\n\n\n\n**Done !! Cheers!!**","title":"A fatal error has been detected by the Java Runtime Environment: SIGSEGV, libjvm","body":"<h1>Here is your relief for the problem :</h1>\n<p>I have a problem of running different versions of STS this morning, the application crash with the similar way as the question did.</p>\n<p>Excerpt of my log file.</p>\n<pre><code>A fatal error has been detected by the Java Runtime Environment:\n#a\n#  SIGSEGV (0xb) at pc=0x00007f459db082a1, pid=4577, tid=139939015632640\n#\n# JRE version: 6.0_30-b12\n# Java VM: Java HotSpot(TM) 64-Bit Server VM \n(20.5-b03 mixed mode linux-amd64 compressed oops)\n# Problematic frame:\n# C  [libsoup-2.4.so.1+0x6c2a1]  short+0x11\n</code></pre>\n<p>note that exception occured at # <strong>C  [libsoup-2.4.so.1+0x6c2a1]  short+0x11</strong></p>\n<p>Okay then little below the line:</p>\n<pre><code>R9 =0x00007f461829e550: &lt;offset 0xa85550&gt; in /usr/share/java/jdk1.6.0_30/jre/lib/amd64/server/libjvm.so at 0x00007f4617819000\nR10=0x00007f461750f7c0 is pointing into the stack for thread: 0x00007f4610008000\nR11=0x00007f459db08290: soup_session_feature_detach+0 in /usr/lib/x86_64-linux-gnu/libsoup-2.4.so.1 at 0x00007f459da9c000\nR12=0x0000000000000000 is an unknown value\nR13=0x000000074404c840 is an oop\n{method} \n</code></pre>\n<p>This line tells you where the actual bug or crash is to investigate more on this crash issue please use below links to see more, but let's continue the crash investigation and how I resolved it and the novelty of this bug :)</p>\n<p>links are :</p>\n<p><a href=\"https://bugs.launchpad.net/ubuntu-gnome/+bug/1163501\" rel=\"nofollow noreferrer\">a fATAL ERROR JAVA</a> THIS ONE IS GREAT LOTS OF USER!</p>\n<p><a href=\"https://stackoverflow.com/questions/6448163/a-fatal-error-has-been-detected-by-the-java-runtime-environment-sigsegv-libjvm\">a fATAL ERROR JAVA 2</a></p>\n<p>Okay, after that here's what I found out to casue this case and why it happens as general advise.</p>\n<ol>\n<li><p>Most of the time, check that if you have installed, updated recently on Ubunu and Windows  there are libraries  like <strong>libsoup</strong> in linux which were the casuse of my crash.</p>\n</li>\n<li><p>Check also for a new hardware problem and try to investigate the <code>Logfile</code> which <code>STS</code> or <code>Java</code> generated and also <code>syslog</code> in <code>linux</code> by</p>\n<pre><code>tail - f /var/lib/messages or some other file\n</code></pre>\n</li>\n</ol>\n<p>Then by carfully looking at those files the one you have the crash log for ... you can really solve the issue as follows:</p>\n<blockquote>\n<p>sudo unlink /usr/lib/i386-linux-gnu/libsoup-2.4.so.1</p>\n</blockquote>\n<p>or</p>\n<blockquote>\n<p>sudo unlink /usr/lib/x86_64-linux-gnu/libsoup-2.4.so.1</p>\n</blockquote>\n<p><strong>Done !! Cheers!!</strong></p>\n"},{"tags":[],"owner":{"account_id":4215056,"reputation":72,"user_id":3451553,"display_name":"HASNEN LAXMIDHAR"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1470812290,"creation_date":1470812290,"answer_id":38866299,"question_id":6448163,"body_markdown":"**add new server (tomcat) with different location.** if i am not make mistake you are run multiple project with same tomcat and add same tomcat server on same location ..\r\n\r\n**add new tomcat for each new workspace.**","title":"A fatal error has been detected by the Java Runtime Environment: SIGSEGV, libjvm","body":"<p><strong>add new server (tomcat) with different location.</strong> if i am not make mistake you are run multiple project with same tomcat and add same tomcat server on same location ..</p>\n\n<p><strong>add new tomcat for each new workspace.</strong></p>\n"},{"comments":[{"owner":{"account_id":338534,"reputation":148,"user_id":667462,"display_name":"Josip Filipović"},"score":2,"creation_date":1494864427,"post_id":39397405,"comment_id":74997408,"body_markdown":"Thanks, this is the only solution that actually worked.","body":"Thanks, this is the only solution that actually worked."},{"owner":{"account_id":5716014,"reputation":736,"user_id":4516174,"accept_rate":17,"display_name":"yongsunCN"},"score":10,"creation_date":1505927563,"post_id":39397405,"comment_id":79616989,"body_markdown":"can you please explain what this does?","body":"can you please explain what this does?"},{"owner":{"account_id":8979682,"reputation":1220,"user_id":6695297,"accept_rate":56,"display_name":"Shubham Srivastava"},"score":0,"creation_date":1576060246,"post_id":39397405,"comment_id":104773202,"body_markdown":"the dynamic linker resolves data references immediately at run time, it normally delays resolving function references until a function is invoked for the first time. Normally, then, the lack of a definition for a function is not apparent until the function is invoked. By setting the environment variable LD_BIND_NOW","body":"the dynamic linker resolves data references immediately at run time, it normally delays resolving function references until a function is invoked for the first time. Normally, then, the lack of a definition for a function is not apparent until the function is invoked. By setting the environment variable LD_BIND_NOW"},{"owner":{"account_id":10872583,"reputation":143,"user_id":7993986,"display_name":"IHaveHandedInMyResignation"},"score":1,"creation_date":1605889887,"post_id":39397405,"comment_id":114799910,"body_markdown":"@ShubhamSrivastava could you explain why?","body":"@ShubhamSrivastava could you explain why?"},{"owner":{"account_id":2844688,"reputation":510,"user_id":2443434,"display_name":"Qingwei"},"score":2,"creation_date":1656748832,"post_id":39397405,"comment_id":128651596,"body_markdown":"It is explained here: https://man7.org/linux/man-pages/man8/ld.so.8.html\n\n       LD_BIND_NOW (since glibc 2.1.1)\n              If set to a nonempty string, causes the dynamic linker to\n              resolve all symbols at program startup instead of\n              deferring function call resolution to the point when they\n              are first referenced.  This is useful when using a\n              debugger.","body":"It is explained here: <a href=\"https://man7.org/linux/man-pages/man8/ld.so.8.html\" rel=\"nofollow noreferrer\">man7.org/linux/man-pages/man8/ld.so.8.html</a>         LD_BIND_NOW (since glibc 2.1.1)               If set to a nonempty string, causes the dynamic linker to               resolve all symbols at program startup instead of               deferring function call resolution to the point when they               are first referenced.  This is useful when using a               debugger."}],"tags":[],"owner":{"account_id":8979682,"reputation":1220,"user_id":6695297,"accept_rate":56,"display_name":"Shubham Srivastava"},"comment_count":5,"down_vote_count":1,"up_vote_count":23,"is_accepted":false,"score":22,"last_activity_date":1494914861,"creation_date":1473357530,"answer_id":39397405,"question_id":6448163,"body_markdown":"1.Set the following Environment Property on your active Shell.\r\n  - open bash terminal and type in:\r\n\r\n      $ export LD_BIND_NOW=1\r\n\r\n2. Re-Run the Jar or Java File\r\n\r\nNote: for superuser in bash type su and press enter","title":"A fatal error has been detected by the Java Runtime Environment: SIGSEGV, libjvm","body":"<p>1.Set the following Environment Property on your active Shell.\n  - open bash terminal and type in:</p>\n\n<pre><code>  $ export LD_BIND_NOW=1\n</code></pre>\n\n<ol start=\"2\">\n<li>Re-Run the Jar or Java File</li>\n</ol>\n\n<p>Note: for superuser in bash type su and press enter</p>\n"},{"tags":[],"owner":{"account_id":9814729,"reputation":49,"user_id":7271579,"display_name":"Durgarao Maruboina"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1586230006,"creation_date":1491376437,"answer_id":43224296,"question_id":6448163,"body_markdown":"It can happen because of native method calling in your application. For example, in Qtjambi if you use `QApplication.quit()` instead of `QApplication.closeAllWindows()` for closing a Java application it generates an error log.\r\n\r\nIn this case, you can get a stack trace right to your method that called the native code and caused the crash. Just look in the log file it tells you about: \r\n\r\n    # An error report file with more information is saved as hs_err_pid24139.log.\r\n\r\nThe stack trace looks quite unusual, since it has native code mixed with VM code and your code, but each line is prefixed so you can tell which lines are your own code. There&#39;s a key at the top of the stack trace to explain the prefixes:\r\n\r\n&gt; Native frames: (J=compiled Java code, A=aot compiled Java code,\r\n&gt; j=interpreted, Vv=VM code, C=native code)\r\n\r\n","title":"A fatal error has been detected by the Java Runtime Environment: SIGSEGV, libjvm","body":"<p>It can happen because of native method calling in your application. For example, in Qtjambi if you use <code>QApplication.quit()</code> instead of <code>QApplication.closeAllWindows()</code> for closing a Java application it generates an error log.</p>\n\n<p>In this case, you can get a stack trace right to your method that called the native code and caused the crash. Just look in the log file it tells you about: </p>\n\n<pre><code># An error report file with more information is saved as hs_err_pid24139.log.\n</code></pre>\n\n<p>The stack trace looks quite unusual, since it has native code mixed with VM code and your code, but each line is prefixed so you can tell which lines are your own code. There's a key at the top of the stack trace to explain the prefixes:</p>\n\n<blockquote>\n  <p>Native frames: (J=compiled Java code, A=aot compiled Java code,\n  j=interpreted, Vv=VM code, C=native code)</p>\n</blockquote>\n"},{"comments":[{"owner":{"account_id":7614789,"reputation":175,"user_id":5774614,"display_name":"Amine ABBAOUI"},"score":0,"creation_date":1599576239,"post_id":50160807,"comment_id":112812478,"body_markdown":"can you give me more details !!","body":"can you give me more details !!"},{"owner":{"account_id":1425811,"reputation":10732,"user_id":1349366,"display_name":"Aivean"},"score":0,"creation_date":1599664184,"post_id":50160807,"comment_id":112844553,"body_markdown":"@AmineABBAOUI, from what I remember, we had this error on production server. After we replaced RAM it haven&#39;t showed again.","body":"@AmineABBAOUI, from what I remember, we had this error on production server. After we replaced RAM it haven&#39;t showed again."},{"owner":{"account_id":7614789,"reputation":175,"user_id":5774614,"display_name":"Amine ABBAOUI"},"score":2,"creation_date":1599664785,"post_id":50160807,"comment_id":112844880,"body_markdown":"hello, thanks to your answer I thought of changing the version of redhat and my problem is solved","body":"hello, thanks to your answer I thought of changing the version of redhat and my problem is solved"}],"tags":[],"owner":{"account_id":1425811,"reputation":10732,"user_id":1349366,"display_name":"Aivean"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1525368546,"creation_date":1525368546,"answer_id":50160807,"question_id":6448163,"body_markdown":"Not really to answer OP&#39;s question (it&#39;s resolved anyway), but to help people who may stumble into the similar issue.\r\n\r\nHere is what we had:\r\n\r\n    #\r\n    # A fatal error has been detected by the Java Runtime Environment:\r\n    #\r\n    #  SIGSEGV (0xb) at pc=0x0000000000000000, pid=11, tid=139910430250752\r\n    #\r\n    # JRE version: Java(TM) SE Runtime Environment (8.0_77-b03) (build 1.8.0_77-b03)\r\n    # Java VM: Java HotSpot(TM) 64-Bit Server VM (25.77-b03 mixed mode linux-amd64 compressed oops)\r\n    # Problematic frame:\r\n    # C  0x0000000000000000\r\n    #\r\n    # Core dump written. Default location: /builds/c5b22963/0/reporting/arsng2/core or core.11\r\n    #\r\n\r\nThe reason was defective RAM. ","title":"A fatal error has been detected by the Java Runtime Environment: SIGSEGV, libjvm","body":"<p>Not really to answer OP's question (it's resolved anyway), but to help people who may stumble into the similar issue.</p>\n\n<p>Here is what we had:</p>\n\n<pre><code>#\n# A fatal error has been detected by the Java Runtime Environment:\n#\n#  SIGSEGV (0xb) at pc=0x0000000000000000, pid=11, tid=139910430250752\n#\n# JRE version: Java(TM) SE Runtime Environment (8.0_77-b03) (build 1.8.0_77-b03)\n# Java VM: Java HotSpot(TM) 64-Bit Server VM (25.77-b03 mixed mode linux-amd64 compressed oops)\n# Problematic frame:\n# C  0x0000000000000000\n#\n# Core dump written. Default location: /builds/c5b22963/0/reporting/arsng2/core or core.11\n#\n</code></pre>\n\n<p>The reason was defective RAM. </p>\n"},{"comments":[{"owner":{"account_id":19459655,"reputation":498,"user_id":14234217,"display_name":"J Weller"},"score":0,"creation_date":1636287992,"post_id":51238344,"comment_id":123511387,"body_markdown":"What exactly does this command do?","body":"What exactly does this command do?"},{"owner":{"account_id":13318956,"reputation":540,"user_id":9614342,"display_name":"Farhad"},"score":0,"creation_date":1682849048,"post_id":51238344,"comment_id":134277057,"body_markdown":"I don&#39;t know what it does, but it saved my life","body":"I don&#39;t know what it does, but it saved my life"}],"tags":[],"owner":{"account_id":5913142,"reputation":18660,"user_id":4652706,"accept_rate":100,"display_name":"KARTHIKEYAN.A"},"comment_count":2,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1636339912,"creation_date":1531111514,"answer_id":51238344,"question_id":6448163,"body_markdown":"Try this cmd in terminal \r\n\r\n    $ ulimit -c unlimited\r\n\r\nWhere \r\n\r\n**ulimit** is admin access required Linux shell command which is used to see, set, or limit the resource usage of the current user. It is used to return the number of open file descriptors for each process. It is also used to set restrictions on the resources used by a process.\r\n\r\n**-c** is core file size (blocks, -c)\r\n\r\n**unlimited** is Size (o to unlimited)\r\n","title":"A fatal error has been detected by the Java Runtime Environment: SIGSEGV, libjvm","body":"<p>Try this cmd in terminal</p>\n<pre><code>$ ulimit -c unlimited\n</code></pre>\n<p>Where</p>\n<p><strong>ulimit</strong> is admin access required Linux shell command which is used to see, set, or limit the resource usage of the current user. It is used to return the number of open file descriptors for each process. It is also used to set restrictions on the resources used by a process.</p>\n<p><strong>-c</strong> is core file size (blocks, -c)</p>\n<p><strong>unlimited</strong> is Size (o to unlimited)</p>\n"},{"tags":[],"owner":{"account_id":8686155,"reputation":1,"user_id":6500519,"display_name":"Harshad"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661729548,"creation_date":1661344201,"answer_id":73473205,"question_id":6448163,"body_markdown":"I was facing the same issue with JDK 11 in Eclipse, so I removed JDK 11 from the Installed JRE section and added back JDK 11 and then did an Eclipse restart. \r\n\r\nAfterwards, my issue was resolved.","title":"A fatal error has been detected by the Java Runtime Environment: SIGSEGV, libjvm","body":"<p>I was facing the same issue with JDK 11 in Eclipse, so I removed JDK 11 from the Installed JRE section and added back JDK 11 and then did an Eclipse restart.</p>\n<p>Afterwards, my issue was resolved.</p>\n"},{"tags":[],"owner":{"account_id":19820147,"reputation":1,"user_id":15521802,"display_name":"Mercenary"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677035568,"creation_date":1677035568,"answer_id":75527917,"question_id":6448163,"body_markdown":"For mac users, you should load the jdk file in Libaray.\r\nThen restart the Eclipse.\r\n\r\n[Setting -&gt; Java -&gt; Installed JREs][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/S8Vmb.png","title":"A fatal error has been detected by the Java Runtime Environment: SIGSEGV, libjvm","body":"<p>For mac users, you should load the jdk file in Libaray.\nThen restart the Eclipse.</p>\n<p><a href=\"https://i.stack.imgur.com/S8Vmb.png\" rel=\"nofollow noreferrer\">Setting -&gt; Java -&gt; Installed JREs</a></p>\n"},{"tags":[],"owner":{"account_id":2106132,"reputation":1,"user_id":9958382,"display_name":"Ragesh Gopinathan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693578866,"creation_date":1693578866,"answer_id":77023993,"question_id":6448163,"body_markdown":"Reinstalling Java package resolved the issue on RHEL 8.5","title":"A fatal error has been detected by the Java Runtime Environment: SIGSEGV, libjvm","body":"<p>Reinstalling Java package resolved the issue on RHEL 8.5</p>\n"}],"owner":{"account_id":307527,"reputation":1695,"user_id":618870,"accept_rate":62,"display_name":"evgeni"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":217309,"favorite_count":0,"down_vote_count":1,"up_vote_count":64,"answer_count":12,"score":63,"last_activity_date":1693578866,"creation_date":1308789697,"question_id":6448163,"body_markdown":"Hi and thanks for reading,\r\n\r\nI have the following error while running my program and&#160;can&#39;t figure out what the solution would be. I also looked&#160;at all the topics with a similar error here, but could not resolve my issue. Here the error:\r\n\r\n    # A fatal error has been detected by the Java Runtime Environment:\r\n    #\r\n    #  SIGSEGV (0xb) at pc=0x00007f0b024734cd, pid=21947, tid=139676677560592\r\n    #\r\n    # JRE version: 6.0_15-b03\r\n    # Java VM: Java HotSpot(TM) 64-Bit Server VM (14.1-b02 mixed mode linux-amd64 )\r\n    # Problematic frame:\r\n    # V  [libjvm.so+0x5df4cd]\r\n\r\nMy program takes some serialized objects and deserializes them, this is where the problem occurs. The strange thing however is, that the same code with the same objects to deserialize works perfectly fine on other machines with the same hardware, OS, etc. (I&#39;m not sure if this might be hardware related, but I guess its not). \r\n\r\nHere is the code, that I&#39;m executing in Java:\r\n\r\n    \t\tFileInputStream f_in = new FileInputStream(path+&quot;/&quot;+docNum+&quot;/&quot;+docNum+&quot;Part.data&quot;);\r\n    \t\tObjectInputStream obj_in = new ObjectInputStream (f_in);\r\n    \t\tObject obj = obj_in.readObject();\r\n    \t//ERROR\r\n    \t\tFileInputStream f_in5 = new FileInputStream(path+&quot;/&quot;+docNum+&quot;/&quot;+docNum+&quot;Part_clustIdx_pairClustIdxs_.data&quot;);\r\n    \t\tObjectInputStream obj_in5 = new ObjectInputStream (f_in5);\t\t\r\n    \t\tObject clustIdx_pairClustIdxs = obj_in5.readObject();\r\n    \t\t\r\n    \t\tFileInputStream f_in4 = new FileInputStream(path+&quot;/&quot;+docNum+&quot;/&quot;+docNum+&quot;Part_pairClustIdxs_pairPartRootNodeIds_.data&quot;);\r\n    \t\tObjectInputStream obj_in4 = new ObjectInputStream (f_in4);\t\t\r\n    \t\tObject pairClustIdxs_pairPartRootNodeIds = obj_in4.readObject();\r\n    \t\t\r\n    \t\tFileInputStream f_in3 = new FileInputStream(path+&quot;/&quot;+docNum+&quot;/&quot;+docNum+&quot;Part_clustIdx_partRootNodeIds_.data&quot;);\r\n    \t\tObjectInputStream obj_in3 = new ObjectInputStream (f_in3);\t\t\r\n    \t\tObject clustIdx_partRootNodeIds = obj_in3.readObject();\r\n    \t\t\r\n    \t\tFileInputStream f_in2 = new FileInputStream(path+&quot;/&quot;+docNum+&quot;/&quot;+docNum+&quot;Part_rootNodeId_Part.data&quot;);\r\n    \t\tObjectInputStream obj_in2 = new ObjectInputStream (f_in2);\r\n    \t\tObject rootNodeId_Part = obj_in2.readObject();  \r\n    \t\t  \t\t\r\n            Part part = (Part) obj;\r\n    \t\tpart.rootNodeId_part_ = (Map&lt;String, Part&gt;) rootNodeId_Part;\r\n    \t\tpart.clustIdx_partRootNodeIds_ = (Map&lt;Integer,TreeSet&lt;String&gt;&gt; ) clustIdx_partRootNodeIds;\r\n    \t\tpart.pairClustIdxs_pairPartRootNodeIds_ = (Map&lt;Pair&lt;Integer,Integer&gt;,Set&lt;Pair&lt;String,String&gt;&gt;&gt; ) pairClustIdxs_pairPartRootNodeIds;\r\n    \t\tpart.clustIdx_pairClustIdxs_ = (Map&lt;Integer,Set&lt;Pair&lt;Integer,Integer&gt;&gt;&gt; ) clustIdx_pairClustIdxs;\t\r\n\r\nThe error occurs after the first deserialization block. However, if I interchange it with any of the following blocks, the error is still in the second deserialization block. Again, the same code, with the same data works just fine on other machines. I tried reinstalling and&#160;updating Java, but it didn&#39;t help. \r\n\r\nHere the logfile of the error:\r\n\r\n    #\r\n    # A fatal error has been detected by the Java Runtime Environment:\r\n    #\r\n    #  SIGSEGV (0xb) at pc=0x00007f0b024734cd, pid=21947, tid=139676677560592\r\n    #\r\n    # JRE version: 6.0_15-b03\r\n    # Java VM: Java HotSpot(TM) 64-Bit Server VM (14.1-b02 mixed mode linux-amd64 )\r\n    # Problematic frame:\r\n    # V  [libjvm.so+0x5df4cd]\r\n    #\r\n    # If you would like to submit a bug report, please visit:\r\n    #   http://java.sun.com/webapps/bugreport/crash.jsp\r\n    #\r\n    \r\n    ---------------  T H R E A D  ---------------\r\n    \r\n    Current thread (0x00000000408c9000):  GCTaskThread [stack: 0x00007f0902afd000,0x00007f0902bfe000] [id=21951]\r\n    \r\n    siginfo:si_signo=SIGSEGV: si_errno=0, si_code=128 (), si_addr=0x0000000000000000\r\n    \r\n    Registers:\r\n    RAX=0x0000000000000001, RBX=0x00007f09184091a8, RCX=0x00007f0b02748cb0, RDX=0x000600007f090486\r\n    RSP=0x00007f0902bfce00, RBP=0x00007f0902bfce70, RSI=0x00007f0a808d4ed2, RDI=0x000600007f090496\r\n    R8 =0x0000000000000001, R9 =0x00000000aa10002f, R10=0x00007f09184091a8, R11=0x00007f09027a8218\r\n    R12=0x0708000000000000, R13=0x0000000000000000, R14=0x00007f0a808d4ed2, R15=0x0000000040914ef0\r\n    RIP=0x00007f0b024734cd, EFL=0x0000000000010246, CSGSFS=0x0000000000000033, ERR=0x0000000000000000\r\n      TRAPNO=0x000000000000000d\r\n    \r\n    Top of Stack: (sp=0x00007f0902bfce00)\r\n    0x00007f0902bfce00:   0000000000000400 00000000408c06a0\r\n    0x00007f0902bfce10:   0000000000000005 01007f090c6663b8\r\n    0x00007f0902bfce20:   00007f0902bfce50 00007f0b024741d0\r\n    0x00007f0902bfce30:   00007f0918408028 0000000000257071\r\n    0x00007f0902bfce40:   000000000025703f 00007f09184091a8\r\n    0x00007f0902bfce50:   0000000040914fa0 0000000000000000\r\n    0x00007f0902bfce60:   0000000000000001 00007f0902bfcefc\r\n    0x00007f0902bfce70:   00007f0902bfce90 00007f0b02473f50\r\n    0x00007f0902bfce80:   0000000000000001 0000000040914ef0\r\n    0x00007f0902bfce90:   00007f0902bfced0 00007f0b02473092\r\n    0x00007f0902bfcea0:   000000004095dc20 00007f09184091a8\r\n    0x00007f0902bfceb0:   0000000040914ef0 0000000000000002\r\n    0x00007f0902bfcec0:   00007f0b0275d4e0 000000004095dc20\r\n    0x00007f0902bfced0:   00007f0902bfcf30 00007f0b0247672d\r\n    0x00007f0902bfcee0:   00007f0902bfcef0 00007f0902bfcf00\r\n    0x00007f0902bfcef0:   00007f0902bfcf30 6cfb9568021cd407\r\n    0x00007f0902bfcf00:   00007f0ab4e04578 00007f0b027492a4\r\n    0x00007f0902bfcf10:   000000004095dc20 00000000408c9000\r\n    0x00007f0902bfcf20:   00007f0b025b0506 0000000000000000\r\n    0x00007f0902bfcf30:   00007f0902bfd030 00007f0b021ce67a\r\n    0x00007f0902bfcf40:   00007f0902bfcf80 00007f0902bfcf58\r\n    0x00007f0902bfcf50:   00007f0b02760f40 0000000000000000\r\n    0x00007f0902bfcf60:   00000000408c91e0 00000000408c9210\r\n    0x00007f0902bfcf70:   00000000408c9220 00000000408c95f8\r\n    0x00007f0902bfcf80:   00000000408c9000 00000000408c9600\r\n    0x00007f0902bfcf90:   00000000408c9630 00000000408c9640\r\n    0x00007f0902bfcfa0:   00000000408c9a18 00007f0902bfcfd0\r\n    0x00007f0902bfcfb0:   00000000408c91e0 00000000408c9210\r\n    0x00007f0902bfcfc0:   00000000408c9220 00000000408c95f8\r\n    0x00007f0902bfcfd0:   00000000408c9000 00000000408c9600\r\n    0x00007f0902bfcfe0:   00000000408c9630 00000000408c9640\r\n    0x00007f0902bfcff0:   00000000408c9a18 00000000408c9a20 \r\n    \r\n    Instructions: (pc=0x00007f0b024734cd)\r\n    0x00007f0b024734bd:   00 48 8d 14 f5 00 00 00 00 48 03 13 48 8d 7a 10\r\n    0x00007f0b024734cd:   8b 5f 08 89 d8 c1 f8 03 85 db 0f 8e cb 05 00 00 \r\n    \r\n    Stack: [0x00007f0902afd000,0x00007f0902bfe000],  sp=0x00007f0902bfce00,  free space=1023k\r\n    Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)\r\n    V  [libjvm.so+0x5df4cd]\r\n    V  [libjvm.so+0x5dff50]\r\n    V  [libjvm.so+0x5df092]\r\n    V  [libjvm.so+0x5e272d]\r\n    V  [libjvm.so+0x33a67a]\r\n    V  [libjvm.so+0x5971af]\r\n    \r\n    \r\n    ---------------  P R O C E S S  ---------------\r\n    \r\n    Java Threads: ( =&gt; current thread )\r\n      0x0000000040946800 JavaThread &quot;Low Memory Detector&quot; daemon [_thread_blocked, id=21959, stack(0x00007f0902020000,0x00007f0902121000)]\r\n      0x0000000040942800 JavaThread &quot;CompilerThread1&quot; daemon [_thread_blocked, id=21958, stack(0x00007f0902121000,0x00007f0902222000)]\r\n      0x0000000040940000 JavaThread &quot;CompilerThread0&quot; daemon [_thread_blocked, id=21957, stack(0x00007f0902222000,0x00007f0902323000)]\r\n      0x000000004093d800 JavaThread &quot;Signal Dispatcher&quot; daemon [_thread_blocked, id=21956, stack(0x00007f0902323000,0x00007f0902424000)]\r\n      0x000000004091f800 JavaThread &quot;Finalizer&quot; daemon [_thread_blocked, id=21955, stack(0x00007f0902463000,0x00007f0902564000)]\r\n      0x000000004091d800 JavaThread &quot;Reference Handler&quot; daemon [_thread_blocked, id=21954, stack(0x00007f0902564000,0x00007f0902665000)]\r\n      0x00000000408bb000 JavaThread &quot;main&quot; [_thread_blocked, id=21948, stack(0x00007f0b01b0f000,0x00007f0b01c10000)]\r\n    \r\n    Other Threads:\r\n      0x0000000040917000 VMThread [stack: 0x00007f0902665000,0x00007f0902766000] [id=21953]\r\n      0x0000000040949000 WatcherThread [stack: 0x00007f0901f1f000,0x00007f0902020000] [id=21960]\r\n    \r\n    =&gt;0x00000000408c9000 (exited) GCTaskThread [stack: 0x00007f0902afd000,0x00007f0902bfe000] [id=21951]\r\n    \r\n    VM state:at safepoint (normal execution)\r\n    \r\n    VM Mutex/Monitor currently owned by a thread:  ([mutex/lock_event])\r\n    [0x00000000408b7c90] Threads_lock - owner thread: 0x0000000040917000\r\n    [0x00000000408b8190] Heap_lock - owner thread: 0x00000000408bb000\r\n    \r\n    Heap\r\n     PSYoungGen      total 1792000K, used 1536000K [0x00007f0a571c0000, 0x00007f0ad41c0000, 0x00007f0afdc60000)\r\n      eden space 1536000K, 100% used [0x00007f0a571c0000,0x00007f0ab4dc0000,0x00007f0ab4dc0000)\r\n      from space 256000K, 0% used [0x00007f0ac47c0000,0x00007f0ac47c0000,0x00007f0ad41c0000)\r\n      to   space 256000K, 99% used [0x00007f0ab4dc0000,0x00007f0ac47b8068,0x00007f0ac47c0000)\r\n     PSOldGen        total 4096000K, used 237896K [0x00007f0909c60000, 0x00007f0a03c60000, 0x00007f0a571c0000)\r\n      object space 4096000K, 5% used [0x00007f0909c60000,0x00007f09184b2028,0x00007f0a03c60000)\r\n     PSPermGen       total 21248K, used 3845K [0x00007f0904860000, 0x00007f0905d20000, 0x00007f0909c60000)\r\n      object space 21248K, 18% used [0x00007f0904860000,0x00007f0904c21718,0x00007f0905d20000)\r\n    \r\n    Dynamic libraries:\r\n    40000000-40009000 r-xp 00000000 08:01 859892                             /usr/lib/jvm/java-6-sun-1.6.0.15/jre/bin/java\r\n    40108000-4010a000 rwxp 00008000 08:01 859892                             /usr/lib/jvm/java-6-sun-1.6.0.15/jre/bin/java\r\n    408b2000-40d42000 rwxp 00000000 00:00 0                                  [heap]\r\n    7f08fc000000-7f08fc4aa000 rwxp 00000000 00:00 0 \r\n    7f08fc4aa000-7f0900000000 ---p 00000000 00:00 0 \r\n    7f0901f1f000-7f0901f20000 ---p 00000000 00:00 0 \r\n    7f0901f20000-7f0902020000 rwxp 00000000 00:00 0 \r\n    7f0902020000-7f0902023000 ---p 00000000 00:00 0 \r\n    7f0902023000-7f0902121000 rwxp 00000000 00:00 0 \r\n    7f0902121000-7f0902124000 ---p 00000000 00:00 0 \r\n    7f0902124000-7f0902222000 rwxp 00000000 00:00 0 \r\n    7f0902222000-7f0902225000 ---p 00000000 00:00 0 \r\n    7f0902225000-7f0902323000 rwxp 00000000 00:00 0 \r\n    7f0902323000-7f0902326000 ---p 00000000 00:00 0 \r\n    7f0902326000-7f0902424000 rwxp 00000000 00:00 0 \r\n    7f0902424000-7f0902463000 r-xp 00000000 08:01 688275                     /usr/lib/locale/en_US.utf8/LC_CTYPE\r\n    7f0902463000-7f0902466000 ---p 00000000 00:00 0 \r\n    7f0902466000-7f0902564000 rwxp 00000000 00:00 0 \r\n    7f0902564000-7f0902567000 ---p 00000000 00:00 0 \r\n    7f0902567000-7f0902665000 rwxp 00000000 00:00 0 \r\n    7f0902665000-7f0902666000 ---p 00000000 00:00 0 \r\n    7f0902666000-7f090283e000 rwxp 00000000 00:00 0 \r\n    7f090283e000-7f09029d4000 r-xs 02fb3000 08:01 803613                     /usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/rt.jar\r\n    7f09029d4000-7f09029fc000 rwxp 00000000 00:00 0 \r\n    7f09029fc000-7f09029fd000 ---p 00000000 00:00 0 \r\n    7f09029fd000-7f0902afd000 rwxp 00000000 00:00 0 \r\n    7f0902afd000-7f0902afe000 ---p 00000000 00:00 0 \r\n    7f0902afe000-7f0902bfe000 rwxp 00000000 00:00 0 \r\n    7f0902bfe000-7f0902bff000 ---p 00000000 00:00 0 \r\n    7f0902bff000-7f0902cff000 rwxp 00000000 00:00 0 \r\n    7f0902cff000-7f0902d00000 ---p 00000000 00:00 0 \r\n    7f0902d00000-7f0902e0b000 rwxp 00000000 00:00 0 \r\n    7f0902e0b000-7f0902e2a000 rwxp 00000000 00:00 0 \r\n    7f0902e2a000-7f09035fa000 rwxp 00000000 00:00 0 \r\n    7f09035fa000-7f0903895000 rwxp 00000000 00:00 0 \r\n    7f0903895000-7f09038a0000 rwxp 00000000 00:00 0 \r\n    7f09038a0000-7f09038bf000 rwxp 00000000 00:00 0 \r\n    7f09038bf000-7f090408f000 rwxp 00000000 00:00 0 \r\n    7f090408f000-7f0904329000 rwxp 00000000 00:00 0 \r\n    7f0904329000-7f0904712000 rwxp 00000000 00:00 0 \r\n    7f0904712000-7f090485f000 rwxp 00000000 00:00 0 \r\n    7f090485f000-7f0905d20000 rwxp 00000000 00:00 0 \r\n    7f0905d20000-7f0909c60000 rwxp 00000000 00:00 0 \r\n    7f0909c60000-7f0a03c60000 rwxp 00000000 00:00 0 \r\n    7f0a03c60000-7f0a571c0000 rwxp 00000000 00:00 0 \r\n    7f0a571c0000-7f0ad41c0000 rwxp 00000000 00:00 0 \r\n    7f0ad41c0000-7f0afdc60000 rwxp 00000000 00:00 0 \r\n    7f0afdc6f000-7f0afdedf000 rwxp 00000000 00:00 0 \r\n    7f0afdedf000-7f0b00c6f000 rwxp 00000000 00:00 0 \r\n    7f0b00c6f000-7f0b00c7d000 r-xp 00000000 08:01 860090                     /usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64/libzip.so\r\n    7f0b00c7d000-7f0b00d7f000 ---p 0000e000 08:01 860090                     /usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64/libzip.so\r\n    7f0b00d7f000-7f0b00d82000 rwxp 00010000 08:01 860090                     /usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64/libzip.so\r\n    7f0b00d82000-7f0b00d83000 rwxp 00000000 00:00 0 \r\n    7f0b00d83000-7f0b00d8f000 r-xp 00000000 08:01 1251026                    /lib/libnss_files-2.10.1.so\r\n    7f0b00d8f000-7f0b00f8e000 ---p 0000c000 08:01 1251026                    /lib/libnss_files-2.10.1.so\r\n    7f0b00f8e000-7f0b00f8f000 r-xp 0000b000 08:01 1251026                    /lib/libnss_files-2.10.1.so\r\n    7f0b00f8f000-7f0b00f90000 rwxp 0000c000 08:01 1251026                    /lib/libnss_files-2.10.1.so\r\n    7f0b00f90000-7f0b00f9a000 r-xp 00000000 08:01 1251036                    /lib/libnss_nis-2.10.1.so\r\n    7f0b00f9a000-7f0b01199000 ---p 0000a000 08:01 1251036                    /lib/libnss_nis-2.10.1.so\r\n    7f0b01199000-7f0b0119a000 r-xp 00009000 08:01 1251036                    /lib/libnss_nis-2.10.1.so\r\n    7f0b0119a000-7f0b0119b000 rwxp 0000a000 08:01 1251036                    /lib/libnss_nis-2.10.1.so\r\n    7f0b0119b000-7f0b011a2000 r-xp 00000000 08:01 1251022                    /lib/libnss_compat-2.10.1.so\r\n    7f0b011a2000-7f0b013a2000 ---p 00007000 08:01 1251022                    /lib/libnss_compat-2.10.1.so\r\n    7f0b013a2000-7f0b013a3000 r-xp 00007000 08:01 1251022                    /lib/libnss_compat-2.10.1.so\r\n    7f0b013a3000-7f0b013a4000 rwxp 00008000 08:01 1251022                    /lib/libnss_compat-2.10.1.so\r\n    7f0b013a4000-7f0b013ab000 r-xp 00000000 08:01 860092                     /usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64/native_threads/libhpi.so\r\n    7f0b013ab000-7f0b014ac000 ---p 00007000 08:01 860092                     /usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64/native_threads/libhpi.so\r\n    7f0b014ac000-7f0b014ae000 rwxp 00008000 08:01 860092                     /usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64/native_threads/libhpi.so\r\n    7f0b014ae000-7f0b014af000 rwxp 00000000 00:00 0 \r\n    7f0b014af000-7f0b014c5000 r-xp 00000000 08:01 1251020                    /lib/libnsl-2.10.1.so\r\n    7f0b014c5000-7f0b016c5000 ---p 00016000 08:01 1251020                    /lib/libnsl-2.10.1.so\r\n    7f0b016c5000-7f0b016c6000 r-xp 00016000 08:01 1251020                    /lib/libnsl-2.10.1.so\r\n    7f0b016c6000-7f0b016c7000 rwxp 00017000 08:01 1251020                    /lib/libnsl-2.10.1.so\r\n    7f0b016c7000-7f0b016c9000 rwxp 00000000 00:00 0 \r\n    7f0b016c9000-7f0b016f2000 r-xp 00000000 08:01 860157                     /usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64/libjava.so\r\n    7f0b016f2000-7f0b017f1000 ---p 00029000 08:01 860157                     /usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64/libjava.so\r\n    7f0b017f1000-7f0b017f8000 rwxp 00028000 08:01 860157                     /usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64/libjava.so\r\n    7f0b017f8000-7f0b01805000 r-xp 00000000 08:01 860082                     /usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64/libverify.so\r\n    7f0b01805000-7f0b01904000 ---p 0000d000 08:01 860082                     /usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64/libverify.so\r\n    7f0b01904000-7f0b01907000 rwxp 0000c000 08:01 860082                     /usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64/libverify.so\r\n    7f0b01907000-7f0b0190e000 r-xp 00000000 08:01 1251065                    /lib/librt-2.10.1.so\r\n    7f0b0190e000-7f0b01b0d000 ---p 00007000 08:01 1251065                    /lib/librt-2.10.1.so\r\n    7f0b01b0d000-7f0b01b0e000 r-xp 00006000 08:01 1251065                    /lib/librt-2.10.1.so\r\n    7f0b01b0e000-7f0b01b0f000 rwxp 00007000 08:01 1251065                    /lib/librt-2.10.1.so\r\n    7f0b01b0f000-7f0b01b12000 ---p 00000000 00:00 0 \r\n    7f0b01b12000-7f0b01c10000 rwxp 00000000 00:00 0 \r\n    7f0b01c10000-7f0b01c92000 r-xp 00000000 08:01 1251013                    /lib/libm-2.10.1.so\r\n    7f0b01c92000-7f0b01e92000 ---p 00082000 08:01 1251013                    /lib/libm-2.10.1.so\r\n    7f0b01e92000-7f0b01e93000 r-xp 00082000 08:01 1251013                    /lib/libm-2.10.1.so\r\n    7f0b01e93000-7f0b01e94000 rwxp 00083000 08:01 1251013                    /lib/libm-2.10.1.so\r\n    7f0b01e94000-7f0b025f2000 r-xp 00000000 08:01 860164                     /usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64/server/libjvm.so\r\n    7f0b025f2000-7f0b026f1000 ---p 0075e000 08:01 860164                     /usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64/server/libjvm.so\r\n    7f0b026f1000-7f0b02869000 rwxp 0075d000 08:01 860164                     /usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64/server/libjvm.so\r\n    7f0b02869000-7f0b028a7000 rwxp 00000000 00:00 0 \r\n    7f0b028a7000-7f0b02a0d000 r-xp 00000000 08:01 1250971                    /lib/libc-2.10.1.so\r\n    7f0b02a0d000-7f0b02c0c000 ---p 00166000 08:01 1250971                    /lib/libc-2.10.1.so\r\n    7f0b02c0c000-7f0b02c10000 r-xp 00165000 08:01 1250971                    /lib/libc-2.10.1.so\r\n    7f0b02c10000-7f0b02c11000 rwxp 00169000 08:01 1250971                    /lib/libc-2.10.1.so\r\n    7f0b02c11000-7f0b02c16000 rwxp 00000000 00:00 0 \r\n    7f0b02c16000-7f0b02c18000 r-xp 00000000 08:01 1250985                    /lib/libdl-2.10.1.so\r\n    7f0b02c18000-7f0b02e18000 ---p 00002000 08:01 1250985                    /lib/libdl-2.10.1.so\r\n    7f0b02e18000-7f0b02e19000 r-xp 00002000 08:01 1250985                    /lib/libdl-2.10.1.so\r\n    7f0b02e19000-7f0b02e1a000 rwxp 00003000 08:01 1250985                    /lib/libdl-2.10.1.so\r\n    7f0b02e1a000-7f0b02e31000 r-xp 00000000 08:01 1251058                    /lib/libpthread-2.10.1.so\r\n    7f0b02e31000-7f0b03030000 ---p 00017000 08:01 1251058                    /lib/libpthread-2.10.1.so\r\n    7f0b03030000-7f0b03031000 r-xp 00016000 08:01 1251058                    /lib/libpthread-2.10.1.so\r\n    7f0b03031000-7f0b03032000 rwxp 00017000 08:01 1251058                    /lib/libpthread-2.10.1.so\r\n    7f0b03032000-7f0b03036000 rwxp 00000000 00:00 0 \r\n    7f0b03036000-7f0b03055000 r-xp 00000000 08:01 1250947                    /lib/ld-2.10.1.so\r\n    7f0b03069000-7f0b03073000 rwxp 00000000 00:00 0 \r\n    7f0b03073000-7f0b03129000 rwxp 00000000 00:00 0 \r\n    7f0b03129000-7f0b0312b000 rwxp 00000000 00:00 0 \r\n    7f0b0312b000-7f0b03132000 r-xp 00000000 08:01 860069                     /usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64/jli/libjli.so\r\n    7f0b03132000-7f0b03233000 ---p 00007000 08:01 860069                     /usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64/jli/libjli.so\r\n    7f0b03233000-7f0b03235000 rwxp 00008000 08:01 860069                     /usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64/jli/libjli.so\r\n    7f0b03235000-7f0b03236000 rwxp 00000000 00:00 0 \r\n    7f0b0323d000-7f0b03240000 r-xs 00033000 08:06 23371793                   /data/evgeny/usp/jars/pusp08.jar\r\n    7f0b03240000-7f0b03247000 r-xs 00000000 08:01 956835                     /usr/lib/gconv/gconv-modules.cache\r\n    7f0b03247000-7f0b0324f000 rwxs 00000000 08:01 531447                     /tmp/hsperfdata_evgeny/21947\r\n    7f0b0324f000-7f0b03250000 rwxp 00000000 00:00 0 \r\n    7f0b03250000-7f0b03251000 ---p 00000000 00:00 0 \r\n    7f0b03251000-7f0b03254000 rwxp 00000000 00:00 0 \r\n    7f0b03254000-7f0b03255000 r-xp 0001e000 08:01 1250947                    /lib/ld-2.10.1.so\r\n    7f0b03255000-7f0b03256000 rwxp 0001f000 08:01 1250947                    /lib/ld-2.10.1.so\r\n    7fffb0ea5000-7fffb0eba000 rwxp 00000000 00:00 0                          [stack]\r\n    7fffb0f10000-7fffb0f11000 r-xp 00000000 00:00 0                          [vdso]\r\n    ffffffffff600000-ffffffffff601000 r-xp 00000000 00:00 0                  [vsyscall]\r\n    \r\n    VM Arguments:\r\n    jvm_args: -Xms6000m -Xmx8000m -Dfile.encoding=UTF8 -verbose:gc \r\n    java_command: usp.semantic.ParseCreateAgenda /data/evgeny/usp/serialized/pusp_abstracts /data/evgeny/usp/logs 3200 13 16 8 200 5 1\r\n    Launcher Type: SUN_STANDARD\r\n    \r\n    Environment Variables:\r\n    PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games\r\n    LD_LIBRARY_PATH=/usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64/server:/usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64:/usr/lib/jvm/java-6-sun-1.6.0.15/jre/../lib/amd64\r\n    SHELL=/bin/sh\r\n    \r\n    Signal Handlers:\r\n    SIGSEGV: [libjvm.so+0x6bdd00], sa_mask[0]=0x7ffbfeff, sa_flags=0x10000004\r\n    SIGBUS: [libjvm.so+0x6bdd00], sa_mask[0]=0x7ffbfeff, sa_flags=0x10000004\r\n    SIGFPE: [libjvm.so+0x594ed0], sa_mask[0]=0x7ffbfeff, sa_flags=0x10000004\r\n    SIGPIPE: [libjvm.so+0x594ed0], sa_mask[0]=0x7ffbfeff, sa_flags=0x10000004\r\n    SIGXFSZ: [libjvm.so+0x594ed0], sa_mask[0]=0x7ffbfeff, sa_flags=0x10000004\r\n    SIGILL: [libjvm.so+0x594ed0], sa_mask[0]=0x7ffbfeff, sa_flags=0x10000004\r\n    SIGUSR1: SIG_DFL, sa_mask[0]=0x00000000, sa_flags=0x00000000\r\n    SIGUSR2: [libjvm.so+0x597690], sa_mask[0]=0x00000000, sa_flags=0x10000004\r\n    SIGHUP: [libjvm.so+0x5973e0], sa_mask[0]=0x7ffbfeff, sa_flags=0x10000004\r\n    SIGINT: [libjvm.so+0x5973e0], sa_mask[0]=0x7ffbfeff, sa_flags=0x10000004\r\n    SIGTERM: [libjvm.so+0x5973e0], sa_mask[0]=0x7ffbfeff, sa_flags=0x10000004\r\n    SIGQUIT: [libjvm.so+0x5973e0], sa_mask[0]=0x7ffbfeff, sa_flags=0x10000004\r\n    \r\n    \r\n    ---------------  S Y S T E M  ---------------\r\n    \r\n    OS:squeeze/sid\r\n    \r\n    uname:Linux 2.6.31-14-generic #48-Ubuntu SMP Fri Oct 16 14:05:01 UTC 2009 x86_64\r\n    libc:glibc 2.10.1 NPTL 2.10.1 \r\n    rlimit: STACK 8192k, CORE 0k, NPROC infinity, NOFILE 1024, AS infinity\r\n    load average:0.76 0.19 0.06\r\n    \r\n    CPU:total 4 (4 cores per cpu, 1 threads per core) family 6 model 23 stepping 10, cmov, cx8, fxsr, mmx, sse, sse2, sse3, ssse3, sse4.1\r\n    \r\n    Memory: 4k page, physical 8194680k(4274500k free), swap 9767480k(9755964k free)\r\n    \r\n    vm_info: Java HotSpot(TM) 64-Bit Server VM (14.1-b02) for linux-amd64 JRE (1.6.0_15-b03), built on Jul  2 2009 15:26:16 by &quot;java_re&quot; with gcc 3.2.2 (SuSE Linux)\r\n    \r\n    time: Wed Jun 22 10:52:33 2011\r\n    elapsed time: 17 seconds\r\n    \r\n        \r\n\r\nThanks for your help!\r\n\r\nAs suggested by the posters, it does sound like a hardware problem. I have changed the memory parameters of java and after some changes the program stops at different parts. I will investigate the diagnostics proposed below. I&#39;ll give an update as soon as I&#39;ve done that.\r\n\r\n@[egridasov][1], I tried JRE 1.6.0_26, but get the same problem: \r\n\r\n    #\r\n    # A fatal error has been detected by the Java Runtime Environment:\r\n    #\r\n    #  SIGSEGV (0xb) at pc=0x00007f51c12048e1, pid=29200, tid=139989005547792\r\n    #\r\n    # JRE version: 6.0_26-b03\r\n    # Java VM: Java HotSpot(TM) 64-Bit Server VM (20.1-b02 mixed mode linux-amd64 compressed oops)\r\n    # Problematic frame:\r\n    # V  [libjvm.so+0x7608e1]  PSPromotionManager::copy_to_survivor_space(oopDesc*)+0x1f1\r\n    #\r\n    # If you would like to submit a bug report, please visit:\r\n    #   http://java.sun.com/webapps/bugreport/crash.jsp\r\n    #\r\n    \r\n    ---------------  T H R E A D  ---------------\r\n    \r\n    Current thread (0x00000000418da800):  GCTaskThread [stack: 0x00007f51bae2b000,0x00007f51baf2c000] [id=29202]\r\n    \r\n    siginfo:si_signo=SIGSEGV: si_errno=0, si_code=128 (), si_addr=0x0000000000000000\r\n    Register to memory mapping:\r\n    \r\n    RAX=0x0000000000000001 is an unknown value\r\n    RBX=0x0000000606e01eb8 is an oop\r\n    [[I \r\n     - klass: &#39;java/lang/Object&#39;[]\r\n     - length: 2\r\n    RCX=0x0000000000000003 is an unknown value\r\n    RDX=0x000000060ff12000 is an oop\r\n    \r\n    [error occurred during error reporting (printing register info), id 0xb]\r\n    \r\n    Stack: [0x00007f51bae2b000,0x00007f51baf2c000],  sp=0x00007f51baf2ae90,  free space=1023k\r\n    Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)\r\n    V  [libjvm.so+0x7608e1]  PSPromotionManager::copy_to_survivor_space(oopDesc*)+0x1f1\r\n    V  [libjvm.so+0x76114d]  void PSScavenge::copy_and_push_safe_barrier&lt;unsigned&gt;(PSPromotionManager*, unsigned*)+0xcd\r\n    V  [libjvm.so+0x7605bf]  PSPromotionManager::drain_stacks_depth(bool)+0xdf\r\n    V  [libjvm.so+0x76382e]  StealTask::do_it(GCTaskManager*, unsigned)+0x2e\r\n    V  [libjvm.so+0x466efa]  GCTaskThread::run()+0x16a\r\n    V  [libjvm.so+0x710adf]  java_start(Thread*)+0x13f\r\n    \r\n    \r\n    ---------------  P R O C E S S  ---------------\r\n    \r\n    Java Threads: ( =&gt; current thread )\r\n      0x00007f51b406f800 JavaThread &quot;Low Memory Detector&quot; daemon [_thread_blocked, id=29212, stack(0x00007f51b9ce9000,0x00007f51b9dea000)]\r\n      0x00007f51b406d000 JavaThread &quot;C2 CompilerThread1&quot; daemon [_thread_blocked, id=29211, stack(0x00007f51b9dea000,0x00007f51b9eeb000)]\r\n      0x00007f51b406a000 JavaThread &quot;C2 CompilerThread0&quot; daemon [_thread_blocked, id=29210, stack(0x00007f51b9eeb000,0x00007f51b9fec000)]\r\n      0x00007f51b4068000 JavaThread &quot;Signal Dispatcher&quot; daemon [_thread_blocked, id=29209, stack(0x00007f51b9fec000,0x00007f51ba0ed000)]\r\n      0x00007f51b404c800 JavaThread &quot;Finalizer&quot; daemon [_thread_blocked, id=29208, stack(0x00007f51ba12c000,0x00007f51ba22d000)]\r\n      0x00007f51b404a800 JavaThread &quot;Reference Handler&quot; daemon [_thread_blocked, id=29207, stack(0x00007f51ba22d000,0x00007f51ba32e000)]\r\n      0x00000000418c7800 JavaThread &quot;main&quot; [_thread_blocked, id=29201, stack(0x00007f51c071f000,0x00007f51c0820000)]\r\n    \r\n    Other Threads:\r\n      0x00007f51b4044000 VMThread [stack: 0x00007f51ba32e000,0x00007f51ba42f000] [id=29206]\r\n      0x00007f51b407a800 WatcherThread [stack: 0x00007f51b9be8000,0x00007f51b9ce9000] [id=29213]\r\n    \r\n    =&gt;0x00000000418da800 (exited) GCTaskThread [stack: 0x00007f51bae2b000,0x00007f51baf2c000] [id=29202]\r\n    \r\n    VM state:at safepoint (normal execution)\r\n    \r\n    VM Mutex/Monitor currently owned by a thread:  ([mutex/lock_event])\r\n    [0x00000000418c4530] Threads_lock - owner thread: 0x00007f51b4044000\r\n    [0x00000000418c4a30] Heap_lock - owner thread: 0x00000000418c7800\r\n    \r\n\r\n\r\n  [1]: https://stackoverflow.com/users/811535/egridasov","title":"A fatal error has been detected by the Java Runtime Environment: SIGSEGV, libjvm","body":"<p>Hi and thanks for reading,</p>\n\n<p>I have the following error while running my program and can't figure out what the solution would be. I also looked at all the topics with a similar error here, but could not resolve my issue. Here the error:</p>\n\n<pre><code># A fatal error has been detected by the Java Runtime Environment:\n#\n#  SIGSEGV (0xb) at pc=0x00007f0b024734cd, pid=21947, tid=139676677560592\n#\n# JRE version: 6.0_15-b03\n# Java VM: Java HotSpot(TM) 64-Bit Server VM (14.1-b02 mixed mode linux-amd64 )\n# Problematic frame:\n# V  [libjvm.so+0x5df4cd]\n</code></pre>\n\n<p>My program takes some serialized objects and deserializes them, this is where the problem occurs. The strange thing however is, that the same code with the same objects to deserialize works perfectly fine on other machines with the same hardware, OS, etc. (I'm not sure if this might be hardware related, but I guess its not). </p>\n\n<p>Here is the code, that I'm executing in Java:</p>\n\n<pre><code>        FileInputStream f_in = new FileInputStream(path+\"/\"+docNum+\"/\"+docNum+\"Part.data\");\n        ObjectInputStream obj_in = new ObjectInputStream (f_in);\n        Object obj = obj_in.readObject();\n    //ERROR\n        FileInputStream f_in5 = new FileInputStream(path+\"/\"+docNum+\"/\"+docNum+\"Part_clustIdx_pairClustIdxs_.data\");\n        ObjectInputStream obj_in5 = new ObjectInputStream (f_in5);      \n        Object clustIdx_pairClustIdxs = obj_in5.readObject();\n\n        FileInputStream f_in4 = new FileInputStream(path+\"/\"+docNum+\"/\"+docNum+\"Part_pairClustIdxs_pairPartRootNodeIds_.data\");\n        ObjectInputStream obj_in4 = new ObjectInputStream (f_in4);      \n        Object pairClustIdxs_pairPartRootNodeIds = obj_in4.readObject();\n\n        FileInputStream f_in3 = new FileInputStream(path+\"/\"+docNum+\"/\"+docNum+\"Part_clustIdx_partRootNodeIds_.data\");\n        ObjectInputStream obj_in3 = new ObjectInputStream (f_in3);      \n        Object clustIdx_partRootNodeIds = obj_in3.readObject();\n\n        FileInputStream f_in2 = new FileInputStream(path+\"/\"+docNum+\"/\"+docNum+\"Part_rootNodeId_Part.data\");\n        ObjectInputStream obj_in2 = new ObjectInputStream (f_in2);\n        Object rootNodeId_Part = obj_in2.readObject();  \n\n        Part part = (Part) obj;\n        part.rootNodeId_part_ = (Map&lt;String, Part&gt;) rootNodeId_Part;\n        part.clustIdx_partRootNodeIds_ = (Map&lt;Integer,TreeSet&lt;String&gt;&gt; ) clustIdx_partRootNodeIds;\n        part.pairClustIdxs_pairPartRootNodeIds_ = (Map&lt;Pair&lt;Integer,Integer&gt;,Set&lt;Pair&lt;String,String&gt;&gt;&gt; ) pairClustIdxs_pairPartRootNodeIds;\n        part.clustIdx_pairClustIdxs_ = (Map&lt;Integer,Set&lt;Pair&lt;Integer,Integer&gt;&gt;&gt; ) clustIdx_pairClustIdxs;   \n</code></pre>\n\n<p>The error occurs after the first deserialization block. However, if I interchange it with any of the following blocks, the error is still in the second deserialization block. Again, the same code, with the same data works just fine on other machines. I tried reinstalling and updating Java, but it didn't help. </p>\n\n<p>Here the logfile of the error:</p>\n\n<pre><code>#\n# A fatal error has been detected by the Java Runtime Environment:\n#\n#  SIGSEGV (0xb) at pc=0x00007f0b024734cd, pid=21947, tid=139676677560592\n#\n# JRE version: 6.0_15-b03\n# Java VM: Java HotSpot(TM) 64-Bit Server VM (14.1-b02 mixed mode linux-amd64 )\n# Problematic frame:\n# V  [libjvm.so+0x5df4cd]\n#\n# If you would like to submit a bug report, please visit:\n#   http://java.sun.com/webapps/bugreport/crash.jsp\n#\n\n---------------  T H R E A D  ---------------\n\nCurrent thread (0x00000000408c9000):  GCTaskThread [stack: 0x00007f0902afd000,0x00007f0902bfe000] [id=21951]\n\nsiginfo:si_signo=SIGSEGV: si_errno=0, si_code=128 (), si_addr=0x0000000000000000\n\nRegisters:\nRAX=0x0000000000000001, RBX=0x00007f09184091a8, RCX=0x00007f0b02748cb0, RDX=0x000600007f090486\nRSP=0x00007f0902bfce00, RBP=0x00007f0902bfce70, RSI=0x00007f0a808d4ed2, RDI=0x000600007f090496\nR8 =0x0000000000000001, R9 =0x00000000aa10002f, R10=0x00007f09184091a8, R11=0x00007f09027a8218\nR12=0x0708000000000000, R13=0x0000000000000000, R14=0x00007f0a808d4ed2, R15=0x0000000040914ef0\nRIP=0x00007f0b024734cd, EFL=0x0000000000010246, CSGSFS=0x0000000000000033, ERR=0x0000000000000000\n  TRAPNO=0x000000000000000d\n\nTop of Stack: (sp=0x00007f0902bfce00)\n0x00007f0902bfce00:   0000000000000400 00000000408c06a0\n0x00007f0902bfce10:   0000000000000005 01007f090c6663b8\n0x00007f0902bfce20:   00007f0902bfce50 00007f0b024741d0\n0x00007f0902bfce30:   00007f0918408028 0000000000257071\n0x00007f0902bfce40:   000000000025703f 00007f09184091a8\n0x00007f0902bfce50:   0000000040914fa0 0000000000000000\n0x00007f0902bfce60:   0000000000000001 00007f0902bfcefc\n0x00007f0902bfce70:   00007f0902bfce90 00007f0b02473f50\n0x00007f0902bfce80:   0000000000000001 0000000040914ef0\n0x00007f0902bfce90:   00007f0902bfced0 00007f0b02473092\n0x00007f0902bfcea0:   000000004095dc20 00007f09184091a8\n0x00007f0902bfceb0:   0000000040914ef0 0000000000000002\n0x00007f0902bfcec0:   00007f0b0275d4e0 000000004095dc20\n0x00007f0902bfced0:   00007f0902bfcf30 00007f0b0247672d\n0x00007f0902bfcee0:   00007f0902bfcef0 00007f0902bfcf00\n0x00007f0902bfcef0:   00007f0902bfcf30 6cfb9568021cd407\n0x00007f0902bfcf00:   00007f0ab4e04578 00007f0b027492a4\n0x00007f0902bfcf10:   000000004095dc20 00000000408c9000\n0x00007f0902bfcf20:   00007f0b025b0506 0000000000000000\n0x00007f0902bfcf30:   00007f0902bfd030 00007f0b021ce67a\n0x00007f0902bfcf40:   00007f0902bfcf80 00007f0902bfcf58\n0x00007f0902bfcf50:   00007f0b02760f40 0000000000000000\n0x00007f0902bfcf60:   00000000408c91e0 00000000408c9210\n0x00007f0902bfcf70:   00000000408c9220 00000000408c95f8\n0x00007f0902bfcf80:   00000000408c9000 00000000408c9600\n0x00007f0902bfcf90:   00000000408c9630 00000000408c9640\n0x00007f0902bfcfa0:   00000000408c9a18 00007f0902bfcfd0\n0x00007f0902bfcfb0:   00000000408c91e0 00000000408c9210\n0x00007f0902bfcfc0:   00000000408c9220 00000000408c95f8\n0x00007f0902bfcfd0:   00000000408c9000 00000000408c9600\n0x00007f0902bfcfe0:   00000000408c9630 00000000408c9640\n0x00007f0902bfcff0:   00000000408c9a18 00000000408c9a20 \n\nInstructions: (pc=0x00007f0b024734cd)\n0x00007f0b024734bd:   00 48 8d 14 f5 00 00 00 00 48 03 13 48 8d 7a 10\n0x00007f0b024734cd:   8b 5f 08 89 d8 c1 f8 03 85 db 0f 8e cb 05 00 00 \n\nStack: [0x00007f0902afd000,0x00007f0902bfe000],  sp=0x00007f0902bfce00,  free space=1023k\nNative frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)\nV  [libjvm.so+0x5df4cd]\nV  [libjvm.so+0x5dff50]\nV  [libjvm.so+0x5df092]\nV  [libjvm.so+0x5e272d]\nV  [libjvm.so+0x33a67a]\nV  [libjvm.so+0x5971af]\n\n\n---------------  P R O C E S S  ---------------\n\nJava Threads: ( =&gt; current thread )\n  0x0000000040946800 JavaThread \"Low Memory Detector\" daemon [_thread_blocked, id=21959, stack(0x00007f0902020000,0x00007f0902121000)]\n  0x0000000040942800 JavaThread \"CompilerThread1\" daemon [_thread_blocked, id=21958, stack(0x00007f0902121000,0x00007f0902222000)]\n  0x0000000040940000 JavaThread \"CompilerThread0\" daemon [_thread_blocked, id=21957, stack(0x00007f0902222000,0x00007f0902323000)]\n  0x000000004093d800 JavaThread \"Signal Dispatcher\" daemon [_thread_blocked, id=21956, stack(0x00007f0902323000,0x00007f0902424000)]\n  0x000000004091f800 JavaThread \"Finalizer\" daemon [_thread_blocked, id=21955, stack(0x00007f0902463000,0x00007f0902564000)]\n  0x000000004091d800 JavaThread \"Reference Handler\" daemon [_thread_blocked, id=21954, stack(0x00007f0902564000,0x00007f0902665000)]\n  0x00000000408bb000 JavaThread \"main\" [_thread_blocked, id=21948, stack(0x00007f0b01b0f000,0x00007f0b01c10000)]\n\nOther Threads:\n  0x0000000040917000 VMThread [stack: 0x00007f0902665000,0x00007f0902766000] [id=21953]\n  0x0000000040949000 WatcherThread [stack: 0x00007f0901f1f000,0x00007f0902020000] [id=21960]\n\n=&gt;0x00000000408c9000 (exited) GCTaskThread [stack: 0x00007f0902afd000,0x00007f0902bfe000] [id=21951]\n\nVM state:at safepoint (normal execution)\n\nVM Mutex/Monitor currently owned by a thread:  ([mutex/lock_event])\n[0x00000000408b7c90] Threads_lock - owner thread: 0x0000000040917000\n[0x00000000408b8190] Heap_lock - owner thread: 0x00000000408bb000\n\nHeap\n PSYoungGen      total 1792000K, used 1536000K [0x00007f0a571c0000, 0x00007f0ad41c0000, 0x00007f0afdc60000)\n  eden space 1536000K, 100% used [0x00007f0a571c0000,0x00007f0ab4dc0000,0x00007f0ab4dc0000)\n  from space 256000K, 0% used [0x00007f0ac47c0000,0x00007f0ac47c0000,0x00007f0ad41c0000)\n  to   space 256000K, 99% used [0x00007f0ab4dc0000,0x00007f0ac47b8068,0x00007f0ac47c0000)\n PSOldGen        total 4096000K, used 237896K [0x00007f0909c60000, 0x00007f0a03c60000, 0x00007f0a571c0000)\n  object space 4096000K, 5% used [0x00007f0909c60000,0x00007f09184b2028,0x00007f0a03c60000)\n PSPermGen       total 21248K, used 3845K [0x00007f0904860000, 0x00007f0905d20000, 0x00007f0909c60000)\n  object space 21248K, 18% used [0x00007f0904860000,0x00007f0904c21718,0x00007f0905d20000)\n\nDynamic libraries:\n40000000-40009000 r-xp 00000000 08:01 859892                             /usr/lib/jvm/java-6-sun-1.6.0.15/jre/bin/java\n40108000-4010a000 rwxp 00008000 08:01 859892                             /usr/lib/jvm/java-6-sun-1.6.0.15/jre/bin/java\n408b2000-40d42000 rwxp 00000000 00:00 0                                  [heap]\n7f08fc000000-7f08fc4aa000 rwxp 00000000 00:00 0 \n7f08fc4aa000-7f0900000000 ---p 00000000 00:00 0 \n7f0901f1f000-7f0901f20000 ---p 00000000 00:00 0 \n7f0901f20000-7f0902020000 rwxp 00000000 00:00 0 \n7f0902020000-7f0902023000 ---p 00000000 00:00 0 \n7f0902023000-7f0902121000 rwxp 00000000 00:00 0 \n7f0902121000-7f0902124000 ---p 00000000 00:00 0 \n7f0902124000-7f0902222000 rwxp 00000000 00:00 0 \n7f0902222000-7f0902225000 ---p 00000000 00:00 0 \n7f0902225000-7f0902323000 rwxp 00000000 00:00 0 \n7f0902323000-7f0902326000 ---p 00000000 00:00 0 \n7f0902326000-7f0902424000 rwxp 00000000 00:00 0 \n7f0902424000-7f0902463000 r-xp 00000000 08:01 688275                     /usr/lib/locale/en_US.utf8/LC_CTYPE\n7f0902463000-7f0902466000 ---p 00000000 00:00 0 \n7f0902466000-7f0902564000 rwxp 00000000 00:00 0 \n7f0902564000-7f0902567000 ---p 00000000 00:00 0 \n7f0902567000-7f0902665000 rwxp 00000000 00:00 0 \n7f0902665000-7f0902666000 ---p 00000000 00:00 0 \n7f0902666000-7f090283e000 rwxp 00000000 00:00 0 \n7f090283e000-7f09029d4000 r-xs 02fb3000 08:01 803613                     /usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/rt.jar\n7f09029d4000-7f09029fc000 rwxp 00000000 00:00 0 \n7f09029fc000-7f09029fd000 ---p 00000000 00:00 0 \n7f09029fd000-7f0902afd000 rwxp 00000000 00:00 0 \n7f0902afd000-7f0902afe000 ---p 00000000 00:00 0 \n7f0902afe000-7f0902bfe000 rwxp 00000000 00:00 0 \n7f0902bfe000-7f0902bff000 ---p 00000000 00:00 0 \n7f0902bff000-7f0902cff000 rwxp 00000000 00:00 0 \n7f0902cff000-7f0902d00000 ---p 00000000 00:00 0 \n7f0902d00000-7f0902e0b000 rwxp 00000000 00:00 0 \n7f0902e0b000-7f0902e2a000 rwxp 00000000 00:00 0 \n7f0902e2a000-7f09035fa000 rwxp 00000000 00:00 0 \n7f09035fa000-7f0903895000 rwxp 00000000 00:00 0 \n7f0903895000-7f09038a0000 rwxp 00000000 00:00 0 \n7f09038a0000-7f09038bf000 rwxp 00000000 00:00 0 \n7f09038bf000-7f090408f000 rwxp 00000000 00:00 0 \n7f090408f000-7f0904329000 rwxp 00000000 00:00 0 \n7f0904329000-7f0904712000 rwxp 00000000 00:00 0 \n7f0904712000-7f090485f000 rwxp 00000000 00:00 0 \n7f090485f000-7f0905d20000 rwxp 00000000 00:00 0 \n7f0905d20000-7f0909c60000 rwxp 00000000 00:00 0 \n7f0909c60000-7f0a03c60000 rwxp 00000000 00:00 0 \n7f0a03c60000-7f0a571c0000 rwxp 00000000 00:00 0 \n7f0a571c0000-7f0ad41c0000 rwxp 00000000 00:00 0 \n7f0ad41c0000-7f0afdc60000 rwxp 00000000 00:00 0 \n7f0afdc6f000-7f0afdedf000 rwxp 00000000 00:00 0 \n7f0afdedf000-7f0b00c6f000 rwxp 00000000 00:00 0 \n7f0b00c6f000-7f0b00c7d000 r-xp 00000000 08:01 860090                     /usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64/libzip.so\n7f0b00c7d000-7f0b00d7f000 ---p 0000e000 08:01 860090                     /usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64/libzip.so\n7f0b00d7f000-7f0b00d82000 rwxp 00010000 08:01 860090                     /usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64/libzip.so\n7f0b00d82000-7f0b00d83000 rwxp 00000000 00:00 0 \n7f0b00d83000-7f0b00d8f000 r-xp 00000000 08:01 1251026                    /lib/libnss_files-2.10.1.so\n7f0b00d8f000-7f0b00f8e000 ---p 0000c000 08:01 1251026                    /lib/libnss_files-2.10.1.so\n7f0b00f8e000-7f0b00f8f000 r-xp 0000b000 08:01 1251026                    /lib/libnss_files-2.10.1.so\n7f0b00f8f000-7f0b00f90000 rwxp 0000c000 08:01 1251026                    /lib/libnss_files-2.10.1.so\n7f0b00f90000-7f0b00f9a000 r-xp 00000000 08:01 1251036                    /lib/libnss_nis-2.10.1.so\n7f0b00f9a000-7f0b01199000 ---p 0000a000 08:01 1251036                    /lib/libnss_nis-2.10.1.so\n7f0b01199000-7f0b0119a000 r-xp 00009000 08:01 1251036                    /lib/libnss_nis-2.10.1.so\n7f0b0119a000-7f0b0119b000 rwxp 0000a000 08:01 1251036                    /lib/libnss_nis-2.10.1.so\n7f0b0119b000-7f0b011a2000 r-xp 00000000 08:01 1251022                    /lib/libnss_compat-2.10.1.so\n7f0b011a2000-7f0b013a2000 ---p 00007000 08:01 1251022                    /lib/libnss_compat-2.10.1.so\n7f0b013a2000-7f0b013a3000 r-xp 00007000 08:01 1251022                    /lib/libnss_compat-2.10.1.so\n7f0b013a3000-7f0b013a4000 rwxp 00008000 08:01 1251022                    /lib/libnss_compat-2.10.1.so\n7f0b013a4000-7f0b013ab000 r-xp 00000000 08:01 860092                     /usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64/native_threads/libhpi.so\n7f0b013ab000-7f0b014ac000 ---p 00007000 08:01 860092                     /usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64/native_threads/libhpi.so\n7f0b014ac000-7f0b014ae000 rwxp 00008000 08:01 860092                     /usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64/native_threads/libhpi.so\n7f0b014ae000-7f0b014af000 rwxp 00000000 00:00 0 \n7f0b014af000-7f0b014c5000 r-xp 00000000 08:01 1251020                    /lib/libnsl-2.10.1.so\n7f0b014c5000-7f0b016c5000 ---p 00016000 08:01 1251020                    /lib/libnsl-2.10.1.so\n7f0b016c5000-7f0b016c6000 r-xp 00016000 08:01 1251020                    /lib/libnsl-2.10.1.so\n7f0b016c6000-7f0b016c7000 rwxp 00017000 08:01 1251020                    /lib/libnsl-2.10.1.so\n7f0b016c7000-7f0b016c9000 rwxp 00000000 00:00 0 \n7f0b016c9000-7f0b016f2000 r-xp 00000000 08:01 860157                     /usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64/libjava.so\n7f0b016f2000-7f0b017f1000 ---p 00029000 08:01 860157                     /usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64/libjava.so\n7f0b017f1000-7f0b017f8000 rwxp 00028000 08:01 860157                     /usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64/libjava.so\n7f0b017f8000-7f0b01805000 r-xp 00000000 08:01 860082                     /usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64/libverify.so\n7f0b01805000-7f0b01904000 ---p 0000d000 08:01 860082                     /usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64/libverify.so\n7f0b01904000-7f0b01907000 rwxp 0000c000 08:01 860082                     /usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64/libverify.so\n7f0b01907000-7f0b0190e000 r-xp 00000000 08:01 1251065                    /lib/librt-2.10.1.so\n7f0b0190e000-7f0b01b0d000 ---p 00007000 08:01 1251065                    /lib/librt-2.10.1.so\n7f0b01b0d000-7f0b01b0e000 r-xp 00006000 08:01 1251065                    /lib/librt-2.10.1.so\n7f0b01b0e000-7f0b01b0f000 rwxp 00007000 08:01 1251065                    /lib/librt-2.10.1.so\n7f0b01b0f000-7f0b01b12000 ---p 00000000 00:00 0 \n7f0b01b12000-7f0b01c10000 rwxp 00000000 00:00 0 \n7f0b01c10000-7f0b01c92000 r-xp 00000000 08:01 1251013                    /lib/libm-2.10.1.so\n7f0b01c92000-7f0b01e92000 ---p 00082000 08:01 1251013                    /lib/libm-2.10.1.so\n7f0b01e92000-7f0b01e93000 r-xp 00082000 08:01 1251013                    /lib/libm-2.10.1.so\n7f0b01e93000-7f0b01e94000 rwxp 00083000 08:01 1251013                    /lib/libm-2.10.1.so\n7f0b01e94000-7f0b025f2000 r-xp 00000000 08:01 860164                     /usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64/server/libjvm.so\n7f0b025f2000-7f0b026f1000 ---p 0075e000 08:01 860164                     /usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64/server/libjvm.so\n7f0b026f1000-7f0b02869000 rwxp 0075d000 08:01 860164                     /usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64/server/libjvm.so\n7f0b02869000-7f0b028a7000 rwxp 00000000 00:00 0 \n7f0b028a7000-7f0b02a0d000 r-xp 00000000 08:01 1250971                    /lib/libc-2.10.1.so\n7f0b02a0d000-7f0b02c0c000 ---p 00166000 08:01 1250971                    /lib/libc-2.10.1.so\n7f0b02c0c000-7f0b02c10000 r-xp 00165000 08:01 1250971                    /lib/libc-2.10.1.so\n7f0b02c10000-7f0b02c11000 rwxp 00169000 08:01 1250971                    /lib/libc-2.10.1.so\n7f0b02c11000-7f0b02c16000 rwxp 00000000 00:00 0 \n7f0b02c16000-7f0b02c18000 r-xp 00000000 08:01 1250985                    /lib/libdl-2.10.1.so\n7f0b02c18000-7f0b02e18000 ---p 00002000 08:01 1250985                    /lib/libdl-2.10.1.so\n7f0b02e18000-7f0b02e19000 r-xp 00002000 08:01 1250985                    /lib/libdl-2.10.1.so\n7f0b02e19000-7f0b02e1a000 rwxp 00003000 08:01 1250985                    /lib/libdl-2.10.1.so\n7f0b02e1a000-7f0b02e31000 r-xp 00000000 08:01 1251058                    /lib/libpthread-2.10.1.so\n7f0b02e31000-7f0b03030000 ---p 00017000 08:01 1251058                    /lib/libpthread-2.10.1.so\n7f0b03030000-7f0b03031000 r-xp 00016000 08:01 1251058                    /lib/libpthread-2.10.1.so\n7f0b03031000-7f0b03032000 rwxp 00017000 08:01 1251058                    /lib/libpthread-2.10.1.so\n7f0b03032000-7f0b03036000 rwxp 00000000 00:00 0 \n7f0b03036000-7f0b03055000 r-xp 00000000 08:01 1250947                    /lib/ld-2.10.1.so\n7f0b03069000-7f0b03073000 rwxp 00000000 00:00 0 \n7f0b03073000-7f0b03129000 rwxp 00000000 00:00 0 \n7f0b03129000-7f0b0312b000 rwxp 00000000 00:00 0 \n7f0b0312b000-7f0b03132000 r-xp 00000000 08:01 860069                     /usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64/jli/libjli.so\n7f0b03132000-7f0b03233000 ---p 00007000 08:01 860069                     /usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64/jli/libjli.so\n7f0b03233000-7f0b03235000 rwxp 00008000 08:01 860069                     /usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64/jli/libjli.so\n7f0b03235000-7f0b03236000 rwxp 00000000 00:00 0 \n7f0b0323d000-7f0b03240000 r-xs 00033000 08:06 23371793                   /data/evgeny/usp/jars/pusp08.jar\n7f0b03240000-7f0b03247000 r-xs 00000000 08:01 956835                     /usr/lib/gconv/gconv-modules.cache\n7f0b03247000-7f0b0324f000 rwxs 00000000 08:01 531447                     /tmp/hsperfdata_evgeny/21947\n7f0b0324f000-7f0b03250000 rwxp 00000000 00:00 0 \n7f0b03250000-7f0b03251000 ---p 00000000 00:00 0 \n7f0b03251000-7f0b03254000 rwxp 00000000 00:00 0 \n7f0b03254000-7f0b03255000 r-xp 0001e000 08:01 1250947                    /lib/ld-2.10.1.so\n7f0b03255000-7f0b03256000 rwxp 0001f000 08:01 1250947                    /lib/ld-2.10.1.so\n7fffb0ea5000-7fffb0eba000 rwxp 00000000 00:00 0                          [stack]\n7fffb0f10000-7fffb0f11000 r-xp 00000000 00:00 0                          [vdso]\nffffffffff600000-ffffffffff601000 r-xp 00000000 00:00 0                  [vsyscall]\n\nVM Arguments:\njvm_args: -Xms6000m -Xmx8000m -Dfile.encoding=UTF8 -verbose:gc \njava_command: usp.semantic.ParseCreateAgenda /data/evgeny/usp/serialized/pusp_abstracts /data/evgeny/usp/logs 3200 13 16 8 200 5 1\nLauncher Type: SUN_STANDARD\n\nEnvironment Variables:\nPATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games\nLD_LIBRARY_PATH=/usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64/server:/usr/lib/jvm/java-6-sun-1.6.0.15/jre/lib/amd64:/usr/lib/jvm/java-6-sun-1.6.0.15/jre/../lib/amd64\nSHELL=/bin/sh\n\nSignal Handlers:\nSIGSEGV: [libjvm.so+0x6bdd00], sa_mask[0]=0x7ffbfeff, sa_flags=0x10000004\nSIGBUS: [libjvm.so+0x6bdd00], sa_mask[0]=0x7ffbfeff, sa_flags=0x10000004\nSIGFPE: [libjvm.so+0x594ed0], sa_mask[0]=0x7ffbfeff, sa_flags=0x10000004\nSIGPIPE: [libjvm.so+0x594ed0], sa_mask[0]=0x7ffbfeff, sa_flags=0x10000004\nSIGXFSZ: [libjvm.so+0x594ed0], sa_mask[0]=0x7ffbfeff, sa_flags=0x10000004\nSIGILL: [libjvm.so+0x594ed0], sa_mask[0]=0x7ffbfeff, sa_flags=0x10000004\nSIGUSR1: SIG_DFL, sa_mask[0]=0x00000000, sa_flags=0x00000000\nSIGUSR2: [libjvm.so+0x597690], sa_mask[0]=0x00000000, sa_flags=0x10000004\nSIGHUP: [libjvm.so+0x5973e0], sa_mask[0]=0x7ffbfeff, sa_flags=0x10000004\nSIGINT: [libjvm.so+0x5973e0], sa_mask[0]=0x7ffbfeff, sa_flags=0x10000004\nSIGTERM: [libjvm.so+0x5973e0], sa_mask[0]=0x7ffbfeff, sa_flags=0x10000004\nSIGQUIT: [libjvm.so+0x5973e0], sa_mask[0]=0x7ffbfeff, sa_flags=0x10000004\n\n\n---------------  S Y S T E M  ---------------\n\nOS:squeeze/sid\n\nuname:Linux 2.6.31-14-generic #48-Ubuntu SMP Fri Oct 16 14:05:01 UTC 2009 x86_64\nlibc:glibc 2.10.1 NPTL 2.10.1 \nrlimit: STACK 8192k, CORE 0k, NPROC infinity, NOFILE 1024, AS infinity\nload average:0.76 0.19 0.06\n\nCPU:total 4 (4 cores per cpu, 1 threads per core) family 6 model 23 stepping 10, cmov, cx8, fxsr, mmx, sse, sse2, sse3, ssse3, sse4.1\n\nMemory: 4k page, physical 8194680k(4274500k free), swap 9767480k(9755964k free)\n\nvm_info: Java HotSpot(TM) 64-Bit Server VM (14.1-b02) for linux-amd64 JRE (1.6.0_15-b03), built on Jul  2 2009 15:26:16 by \"java_re\" with gcc 3.2.2 (SuSE Linux)\n\ntime: Wed Jun 22 10:52:33 2011\nelapsed time: 17 seconds\n</code></pre>\n\n<p>Thanks for your help!</p>\n\n<p>As suggested by the posters, it does sound like a hardware problem. I have changed the memory parameters of java and after some changes the program stops at different parts. I will investigate the diagnostics proposed below. I'll give an update as soon as I've done that.</p>\n\n<p>@<a href=\"https://stackoverflow.com/users/811535/egridasov\">egridasov</a>, I tried JRE 1.6.0_26, but get the same problem: </p>\n\n<pre><code>#\n# A fatal error has been detected by the Java Runtime Environment:\n#\n#  SIGSEGV (0xb) at pc=0x00007f51c12048e1, pid=29200, tid=139989005547792\n#\n# JRE version: 6.0_26-b03\n# Java VM: Java HotSpot(TM) 64-Bit Server VM (20.1-b02 mixed mode linux-amd64 compressed oops)\n# Problematic frame:\n# V  [libjvm.so+0x7608e1]  PSPromotionManager::copy_to_survivor_space(oopDesc*)+0x1f1\n#\n# If you would like to submit a bug report, please visit:\n#   http://java.sun.com/webapps/bugreport/crash.jsp\n#\n\n---------------  T H R E A D  ---------------\n\nCurrent thread (0x00000000418da800):  GCTaskThread [stack: 0x00007f51bae2b000,0x00007f51baf2c000] [id=29202]\n\nsiginfo:si_signo=SIGSEGV: si_errno=0, si_code=128 (), si_addr=0x0000000000000000\nRegister to memory mapping:\n\nRAX=0x0000000000000001 is an unknown value\nRBX=0x0000000606e01eb8 is an oop\n[[I \n - klass: 'java/lang/Object'[]\n - length: 2\nRCX=0x0000000000000003 is an unknown value\nRDX=0x000000060ff12000 is an oop\n\n[error occurred during error reporting (printing register info), id 0xb]\n\nStack: [0x00007f51bae2b000,0x00007f51baf2c000],  sp=0x00007f51baf2ae90,  free space=1023k\nNative frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)\nV  [libjvm.so+0x7608e1]  PSPromotionManager::copy_to_survivor_space(oopDesc*)+0x1f1\nV  [libjvm.so+0x76114d]  void PSScavenge::copy_and_push_safe_barrier&lt;unsigned&gt;(PSPromotionManager*, unsigned*)+0xcd\nV  [libjvm.so+0x7605bf]  PSPromotionManager::drain_stacks_depth(bool)+0xdf\nV  [libjvm.so+0x76382e]  StealTask::do_it(GCTaskManager*, unsigned)+0x2e\nV  [libjvm.so+0x466efa]  GCTaskThread::run()+0x16a\nV  [libjvm.so+0x710adf]  java_start(Thread*)+0x13f\n\n\n---------------  P R O C E S S  ---------------\n\nJava Threads: ( =&gt; current thread )\n  0x00007f51b406f800 JavaThread \"Low Memory Detector\" daemon [_thread_blocked, id=29212, stack(0x00007f51b9ce9000,0x00007f51b9dea000)]\n  0x00007f51b406d000 JavaThread \"C2 CompilerThread1\" daemon [_thread_blocked, id=29211, stack(0x00007f51b9dea000,0x00007f51b9eeb000)]\n  0x00007f51b406a000 JavaThread \"C2 CompilerThread0\" daemon [_thread_blocked, id=29210, stack(0x00007f51b9eeb000,0x00007f51b9fec000)]\n  0x00007f51b4068000 JavaThread \"Signal Dispatcher\" daemon [_thread_blocked, id=29209, stack(0x00007f51b9fec000,0x00007f51ba0ed000)]\n  0x00007f51b404c800 JavaThread \"Finalizer\" daemon [_thread_blocked, id=29208, stack(0x00007f51ba12c000,0x00007f51ba22d000)]\n  0x00007f51b404a800 JavaThread \"Reference Handler\" daemon [_thread_blocked, id=29207, stack(0x00007f51ba22d000,0x00007f51ba32e000)]\n  0x00000000418c7800 JavaThread \"main\" [_thread_blocked, id=29201, stack(0x00007f51c071f000,0x00007f51c0820000)]\n\nOther Threads:\n  0x00007f51b4044000 VMThread [stack: 0x00007f51ba32e000,0x00007f51ba42f000] [id=29206]\n  0x00007f51b407a800 WatcherThread [stack: 0x00007f51b9be8000,0x00007f51b9ce9000] [id=29213]\n\n=&gt;0x00000000418da800 (exited) GCTaskThread [stack: 0x00007f51bae2b000,0x00007f51baf2c000] [id=29202]\n\nVM state:at safepoint (normal execution)\n\nVM Mutex/Monitor currently owned by a thread:  ([mutex/lock_event])\n[0x00000000418c4530] Threads_lock - owner thread: 0x00007f51b4044000\n[0x00000000418c4a30] Heap_lock - owner thread: 0x00000000418c7800\n</code></pre>\n"},{"tags":["java","spring-boot","jackson","spring-resttemplate"],"comments":[{"owner":{"account_id":2491981,"reputation":1372,"user_id":2169264,"display_name":"Michał Schielmann"},"score":1,"creation_date":1599246707,"post_id":63746595,"comment_id":112726013,"body_markdown":"have you tried building dependency tree to make sure that there are no transitive dependencies pulled? try using `mvn dependency:tree` and look for all lines with `jackson`.","body":"have you tried building dependency tree to make sure that there are no transitive dependencies pulled? try using <code>mvn dependency:tree</code> and look for all lines with <code>jackson</code>."},{"owner":{"account_id":1225968,"reputation":129,"user_id":1191482,"accept_rate":100,"display_name":"Eyowzitgoin"},"score":0,"creation_date":1599247369,"post_id":63746595,"comment_id":112726248,"body_markdown":"When building the dependency tree, all show the same `jackson` version: 2.10.1","body":"When building the dependency tree, all show the same <code>jackson</code> version: 2.10.1"},{"owner":{"account_id":18243171,"reputation":19300,"user_id":13279831,"display_name":"Nowhere Man"},"score":2,"creation_date":1599249761,"post_id":63746595,"comment_id":112727027,"body_markdown":"The issue may be related to the `provided` scope that means that such dependency should be [provided by JDK or container](https://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#dependency-scope), then actual version of the dependency may differ in some environments.  If you use default `compile` scope, this issue should be resolved.","body":"The issue may be related to the <code>provided</code> scope that means that such dependency should be <a href=\"https://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#dependency-scope\" rel=\"nofollow noreferrer\">provided by JDK or container</a>, then actual version of the dependency may differ in some environments.  If you use default <code>compile</code> scope, this issue should be resolved."},{"owner":{"account_id":2491981,"reputation":1372,"user_id":2169264,"display_name":"Michał Schielmann"},"score":0,"creation_date":1599249919,"post_id":63746595,"comment_id":112727080,"body_markdown":"In addition to Alexs comment - maybe it&#39;s worth checking the classpath when running the app, and check if it may contain some unexpected paths.","body":"In addition to Alexs comment - maybe it&#39;s worth checking the classpath when running the app, and check if it may contain some unexpected paths."},{"owner":{"account_id":1225968,"reputation":129,"user_id":1191482,"accept_rate":100,"display_name":"Eyowzitgoin"},"score":0,"creation_date":1599573795,"post_id":63746595,"comment_id":112811271,"body_markdown":"Tried changing the scope to compile but no luck - the issue persists!","body":"Tried changing the scope to compile but no luck - the issue persists!"}],"answers":[{"tags":[],"owner":{"account_id":1225968,"reputation":129,"user_id":1191482,"accept_rate":100,"display_name":"Eyowzitgoin"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1599761578,"creation_date":1599761578,"answer_id":63835462,"question_id":63746595,"body_markdown":"I *finally* worked out what was wrong here and it feels so absurd that I don&#39;t believe anyone would ever have gotten to the right answer without the code in their hands. It was only by pulling all the code back into one place and then seeking to find another means of mapping the object via Jackson (using an `ObjectMapper` directly as opposed to letting the `RestTemplate` figure that out) that I stumbled upon the true problem.\r\n\r\nThere is an audit class which is a property on my Person object which contains the normal, basic properties of created by, created date, modified by, modified date. These dates are `LocalDateTime` objects in the standard ISO-8601 format. It turns out that Jackson can no longer process the string straight into the `LocalDateTime` object and needs &quot;help&quot;. By adding a setter which takes the date as a string and does a `LocalDateTime.parse(date)` to set the actual property, I&#39;m now able to successfully hit the endpoints at will.\r\n\r\nI still have no clue why the exact error above was thrown, but there you have it. By not specifying a way to help translate from a `String` to the `LocalDateTime` object, I received the `JsonFormat$Value.hasLenient()` error from Jackson.","title":"JsonFormat$Value.hasLenient() Error on Rest Call","body":"<p>I <em>finally</em> worked out what was wrong here and it feels so absurd that I don't believe anyone would ever have gotten to the right answer without the code in their hands. It was only by pulling all the code back into one place and then seeking to find another means of mapping the object via Jackson (using an <code>ObjectMapper</code> directly as opposed to letting the <code>RestTemplate</code> figure that out) that I stumbled upon the true problem.</p>\n<p>There is an audit class which is a property on my Person object which contains the normal, basic properties of created by, created date, modified by, modified date. These dates are <code>LocalDateTime</code> objects in the standard ISO-8601 format. It turns out that Jackson can no longer process the string straight into the <code>LocalDateTime</code> object and needs &quot;help&quot;. By adding a setter which takes the date as a string and does a <code>LocalDateTime.parse(date)</code> to set the actual property, I'm now able to successfully hit the endpoints at will.</p>\n<p>I still have no clue why the exact error above was thrown, but there you have it. By not specifying a way to help translate from a <code>String</code> to the <code>LocalDateTime</code> object, I received the <code>JsonFormat$Value.hasLenient()</code> error from Jackson.</p>\n"},{"tags":[],"owner":{"account_id":24665,"reputation":1563,"user_id":62881,"accept_rate":90,"display_name":"Clarkey"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1603817071,"creation_date":1603817071,"answer_id":64559094,"question_id":63746595,"body_markdown":"I had a similar issue.\r\n\r\nIn my case @Eyowzitgoin&#39;s answer helped me figure out my issue. I had a maven dependency conflict on the jackson annotations.\r\n\r\nI was trying to run some tests, and all was fine on the command line but intellij had an issue knowing which version to pick. I had `2.10.3` explicitly declared, but `2.8.5` was being picked up through a transitive dependency. \r\n\r\n`2.10.3` has a method `JsonFormat$Value.hasLenient`, but `2.8.5` doesn&#39;t.\r\n\r\nI was using the JsonFormat annotation on a String variable in a pojo, and intellij was expecting to be able to call the method, but was unable to do so.\r\n\r\nIn my case I didn&#39;t resolve the root of the problem because the variable should have been a LocalDate, so I changed the type and removed the annotation and the issue went away.\r\n\r\nI would expect that if I&#39;d left the types as they were and the annotation in place, and instead resolved the dependency issue and made sure that only one of the versions was present/declared the issue would also have been resolved.","title":"JsonFormat$Value.hasLenient() Error on Rest Call","body":"<p>I had a similar issue.</p>\n<p>In my case @Eyowzitgoin's answer helped me figure out my issue. I had a maven dependency conflict on the jackson annotations.</p>\n<p>I was trying to run some tests, and all was fine on the command line but intellij had an issue knowing which version to pick. I had <code>2.10.3</code> explicitly declared, but <code>2.8.5</code> was being picked up through a transitive dependency.</p>\n<p><code>2.10.3</code> has a method <code>JsonFormat$Value.hasLenient</code>, but <code>2.8.5</code> doesn't.</p>\n<p>I was using the JsonFormat annotation on a String variable in a pojo, and intellij was expecting to be able to call the method, but was unable to do so.</p>\n<p>In my case I didn't resolve the root of the problem because the variable should have been a LocalDate, so I changed the type and removed the annotation and the issue went away.</p>\n<p>I would expect that if I'd left the types as they were and the annotation in place, and instead resolved the dependency issue and made sure that only one of the versions was present/declared the issue would also have been resolved.</p>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1693672719,"post_id":77023959,"comment_id":135792841,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/77023959/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":29345864,"reputation":1,"user_id":22484204,"display_name":"tzdun"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693578860,"creation_date":1693578576,"answer_id":77023959,"question_id":63746595,"body_markdown":"**Working on cucumber-report + playwright + java 1.8** &lt;br&gt;\r\nThese dependencies made my day:\r\n```\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\r\n            &lt;version&gt;2.10.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n            &lt;version&gt;2.10.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\r\n            &lt;version&gt;2.10.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jackson-datatype-jsr310&lt;/artifactId&gt;\r\n            &lt;version&gt;2.10.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n```","title":"JsonFormat$Value.hasLenient() Error on Rest Call","body":"<p><strong>Working on cucumber-report + playwright + java 1.8</strong> <br>\nThese dependencies made my day:</p>\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\n            &lt;version&gt;2.10.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n            &lt;version&gt;2.10.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\n            &lt;version&gt;2.10.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-datatype-jsr310&lt;/artifactId&gt;\n            &lt;version&gt;2.10.1&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":1225968,"reputation":129,"user_id":1191482,"accept_rate":100,"display_name":"Eyowzitgoin"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2199,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":63835462,"answer_count":3,"score":2,"last_activity_date":1693578860,"creation_date":1599245385,"question_id":63746595,"body_markdown":"I&#39;m building a set of microservices in Spring Boot. I&#39;ve got one service which interfaces with the database and has a series of RESTful endpoints which other apps can hit. Many of these table entities are complex objects and are served up as a JSON object but some are simple parameters and so are served as strings. When I hit the main DB service endpoints, all data is returned fine without issue.\r\n\r\nI have a series of other applications which consume this data in various ways. Because many objects are reused across applications (the DB service response shape, the person entity POJO, etc), I&#39;ve got a package made with some common classes. Each app imports these common classes and then makes calls to the main DB service via `RestTemplate`. Because the response is always wrapped in a standard way, I am getting the values by performing an exchange which expects a `ParameterizedTypeReference` of the response wrapper with the appropriate POJO or Java variable (String, int, etc).\r\n\r\nAs of 5 months ago, all was good. The app was deployed to a server and is still operating normally. However, I recently went back in to the code in order to make some modifications and now I find that when I run the app locally some of the endpoints fail with the following error:\r\n\r\n    java.lang.NoSuchMethodError: com.fasterxml.jackson.annotation.JsonFormat$Value.hasLenient()Z\r\n\r\nI thought at first that perhaps the two POMs were out of sync and one was pulling a newer version of Jackson but after hard coding the version in the POM to be 100% certain they were the same (version 2.10.1), it still has the same issue. It should also be noted that the method in the error message appears to have been added in version 2.9 and has not been deprecated as of this moment in time. This error only happens when trying to retrieve data from endpoints returning POJOs and not when the data type is a String. It may also be relevant that the call appears to never actually leave the app before throwing an error as the DB service endpoint never gets hit.\r\n\r\nAny ideas why I&#39;m getting this error and how I could resolve it?\r\n\r\nResponse Object:\r\n\r\n    public class DatabaseServiceResponse&lt;T&gt; {\r\n    \t@JsonInclude(Include.NON_NULL)\r\n    \tprivate List&lt;T&gt; entities;\r\n    \t\r\n    \t@JsonInclude(Include.NON_NULL)\r\n    \tprivate String error;\r\n    \t\r\n    \t[getters and setters ommitted]\r\n    }\r\n\r\nPerson Service:\r\n\r\n    public List&lt;Person&gt; getPeople() {\r\n    \tList&lt;Person&gt; people = new ArrayList&lt;&gt;();\r\n    \tHttpHeaders headers = getHeaders();\r\n    \tHttpEntity&lt;Object&gt; requestEntity = new HttpEntity&lt;&gt;(null, headers);\r\n    \tResponseEntity&lt;DatabaseServiceResponse&lt;Person&gt;&gt; response = restTemplate.exchange(url, HttpMethod.GET, requestEntity, new ParamaterizedTypeReference&lt;DatabaseServiceResponse&lt;Person&gt;&gt;() {});  // Fails on this line\r\n    \tif (response.getStatusCode() == HttpStatus.OK) {\r\n    \t\tpeople = response.getBody().getEntities();\r\n    \t} else {\r\n    \t\tthrow new ServiceException(&quot;Error retrieving people&quot;);\r\n    \t}\r\n    \treturn people;\r\n    }\r\n    \r\n    public List&lt;String&gt; getPersonTypes() {\r\n    \tList&lt;String&gt; personTypes = new ArrayList&lt;&gt;();\r\n    \tHttpHeaders headers = getHeaders();\r\n    \tHttpEntity&lt;Object&gt; requestEntity = new HttpEntity&lt;&gt;(null, headers);\r\n    \tResponseEntity&lt;DatabaseServiceResponse&lt;String&gt;&gt; response = restTemplate.exchange(url, HttpMethod.GET, requestEntity, new ParamaterizedTypeReference&lt;DatabaseServiceResponse&lt;String&gt;&gt;() {});  // Works fine here\r\n    \tif (response.getStatusCode() == HttpStatus.OK) {\r\n    \t\tpersonTypes = response.getBody().getEntities();\r\n    \t} else {\r\n    \t\tthrow new ServiceException(&quot;Error retrieving person types&quot;);\r\n    \t}\r\n    \treturn personTypes;\r\n    }\r\n\r\nPerson App POM:\r\n\r\n    &lt;parent&gt;\r\n    \t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    \t&lt;version&gt;2.2.2.RELEASE&lt;/version&gt;\r\n    \t&lt;relativePath /&gt;\r\n    &lt;/parent&gt;\r\n\r\nCommon Elements POM:\r\n\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n    \t&lt;version&gt;2.10.1&lt;/version&gt;\r\n    \t&lt;scope&gt;provided&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\n\r\n**UPDATE**\r\nI believe the external library and the potentially out-of-sync POM files was a red herring. I have copied all of the relevant classes into the main project to remove the dependency on the external package and I have the same issue. I&#39;ve also tried completely upgrading all versions to the latest and still no luck. Jackson, for whatever reason, will map JSON to a String or a list of Strings but just will not map my JSON to a POJO.","title":"JsonFormat$Value.hasLenient() Error on Rest Call","body":"<p>I'm building a set of microservices in Spring Boot. I've got one service which interfaces with the database and has a series of RESTful endpoints which other apps can hit. Many of these table entities are complex objects and are served up as a JSON object but some are simple parameters and so are served as strings. When I hit the main DB service endpoints, all data is returned fine without issue.</p>\n<p>I have a series of other applications which consume this data in various ways. Because many objects are reused across applications (the DB service response shape, the person entity POJO, etc), I've got a package made with some common classes. Each app imports these common classes and then makes calls to the main DB service via <code>RestTemplate</code>. Because the response is always wrapped in a standard way, I am getting the values by performing an exchange which expects a <code>ParameterizedTypeReference</code> of the response wrapper with the appropriate POJO or Java variable (String, int, etc).</p>\n<p>As of 5 months ago, all was good. The app was deployed to a server and is still operating normally. However, I recently went back in to the code in order to make some modifications and now I find that when I run the app locally some of the endpoints fail with the following error:</p>\n<pre><code>java.lang.NoSuchMethodError: com.fasterxml.jackson.annotation.JsonFormat$Value.hasLenient()Z\n</code></pre>\n<p>I thought at first that perhaps the two POMs were out of sync and one was pulling a newer version of Jackson but after hard coding the version in the POM to be 100% certain they were the same (version 2.10.1), it still has the same issue. It should also be noted that the method in the error message appears to have been added in version 2.9 and has not been deprecated as of this moment in time. This error only happens when trying to retrieve data from endpoints returning POJOs and not when the data type is a String. It may also be relevant that the call appears to never actually leave the app before throwing an error as the DB service endpoint never gets hit.</p>\n<p>Any ideas why I'm getting this error and how I could resolve it?</p>\n<p>Response Object:</p>\n<pre><code>public class DatabaseServiceResponse&lt;T&gt; {\n    @JsonInclude(Include.NON_NULL)\n    private List&lt;T&gt; entities;\n    \n    @JsonInclude(Include.NON_NULL)\n    private String error;\n    \n    [getters and setters ommitted]\n}\n</code></pre>\n<p>Person Service:</p>\n<pre><code>public List&lt;Person&gt; getPeople() {\n    List&lt;Person&gt; people = new ArrayList&lt;&gt;();\n    HttpHeaders headers = getHeaders();\n    HttpEntity&lt;Object&gt; requestEntity = new HttpEntity&lt;&gt;(null, headers);\n    ResponseEntity&lt;DatabaseServiceResponse&lt;Person&gt;&gt; response = restTemplate.exchange(url, HttpMethod.GET, requestEntity, new ParamaterizedTypeReference&lt;DatabaseServiceResponse&lt;Person&gt;&gt;() {});  // Fails on this line\n    if (response.getStatusCode() == HttpStatus.OK) {\n        people = response.getBody().getEntities();\n    } else {\n        throw new ServiceException(&quot;Error retrieving people&quot;);\n    }\n    return people;\n}\n\npublic List&lt;String&gt; getPersonTypes() {\n    List&lt;String&gt; personTypes = new ArrayList&lt;&gt;();\n    HttpHeaders headers = getHeaders();\n    HttpEntity&lt;Object&gt; requestEntity = new HttpEntity&lt;&gt;(null, headers);\n    ResponseEntity&lt;DatabaseServiceResponse&lt;String&gt;&gt; response = restTemplate.exchange(url, HttpMethod.GET, requestEntity, new ParamaterizedTypeReference&lt;DatabaseServiceResponse&lt;String&gt;&gt;() {});  // Works fine here\n    if (response.getStatusCode() == HttpStatus.OK) {\n        personTypes = response.getBody().getEntities();\n    } else {\n        throw new ServiceException(&quot;Error retrieving person types&quot;);\n    }\n    return personTypes;\n}\n</code></pre>\n<p>Person App POM:</p>\n<pre><code>&lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;2.2.2.RELEASE&lt;/version&gt;\n    &lt;relativePath /&gt;\n&lt;/parent&gt;\n</code></pre>\n<p>Common Elements POM:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n    &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n    &lt;version&gt;2.10.1&lt;/version&gt;\n    &lt;scope&gt;provided&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p><strong>UPDATE</strong>\nI believe the external library and the potentially out-of-sync POM files was a red herring. I have copied all of the relevant classes into the main project to remove the dependency on the external package and I have the same issue. I've also tried completely upgrading all versions to the latest and still no luck. Jackson, for whatever reason, will map JSON to a String or a list of Strings but just will not map my JSON to a POJO.</p>\n"},{"tags":["java","xml","spring","apache-commons"],"comments":[{"owner":{"account_id":3377022,"reputation":11135,"user_id":2834978,"display_name":"LMC"},"score":0,"creation_date":1693595067,"post_id":77023950,"comment_id":135786718,"body_markdown":"Unclear problem. That xml fragment can be parsed into a java object using jaxb for example. What apache commons has to do with this?","body":"Unclear problem. That xml fragment can be parsed into a java object using jaxb for example. What apache commons has to do with this?"}],"owner":{"account_id":16518030,"reputation":113,"user_id":11934922,"display_name":"Rishabh Sharma"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693578813,"creation_date":1693578487,"question_id":77023950,"body_markdown":"I am using spring and apache configuration library.\r\n\r\nIs there any way to get the list under authentication tag as an java object?\r\n\r\n    &lt;authentication&gt;\r\n     &lt;entry&gt;\r\n       &lt;key&gt; name  &lt;/key&gt;\r\n       &lt;value&gt; Rishabh &lt;/value&gt;\r\n     &lt;/entry&gt;\r\n      &lt;entry&gt;\r\n       &lt;key&gt; Id  &lt;/key&gt;\r\n       &lt;value&gt; 2515247 &lt;/value&gt;\r\n     &lt;/entry&gt;\r\n      &lt;entry&gt;\r\n       &lt;key&gt;  pass &lt;/key&gt;\r\n       &lt;value&gt;password &lt;/value&gt;\r\n     &lt;/entry&gt;\r\n    &lt;/authentication&gt;\r\nMy authentication POJO looks like this.\r\n\r\n    protected List&lt;Authentication.Entry&gt; entry;\r\n\r\nThanks in advance!!!","title":"Read List of Elements using apache commons","body":"<p>I am using spring and apache configuration library.</p>\n<p>Is there any way to get the list under authentication tag as an java object?</p>\n<pre><code>&lt;authentication&gt;\n &lt;entry&gt;\n   &lt;key&gt; name  &lt;/key&gt;\n   &lt;value&gt; Rishabh &lt;/value&gt;\n &lt;/entry&gt;\n  &lt;entry&gt;\n   &lt;key&gt; Id  &lt;/key&gt;\n   &lt;value&gt; 2515247 &lt;/value&gt;\n &lt;/entry&gt;\n  &lt;entry&gt;\n   &lt;key&gt;  pass &lt;/key&gt;\n   &lt;value&gt;password &lt;/value&gt;\n &lt;/entry&gt;\n&lt;/authentication&gt;\n</code></pre>\n<p>My authentication POJO looks like this.</p>\n<pre><code>protected List&lt;Authentication.Entry&gt; entry;\n</code></pre>\n<p>Thanks in advance!!!</p>\n"},{"tags":["java","maven","selenium-webdriver","testng","webdrivermanager-java"],"answers":[{"tags":[],"owner":{"account_id":11834138,"reputation":91,"user_id":8659981,"display_name":"Jack Vicky"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689428978,"creation_date":1689428978,"answer_id":76694063,"question_id":76694062,"body_markdown":"The Error means that the dependency class may not compiled/downloaded correctly. To fix this issue you need to re-compile the maven file \r\n\r\nif using IntelliJ IDEA, go to maven and run &quot;clean&quot; command and run &quot;install&quot; command this will clean and re-download the dependency class files correctly. if required adjusts the TestNG maven dependency version to a stable version   ","title":"Error: java: cannot access io.github.bonigarcia.wdm.WebDriverManager bad class file","body":"<p>The Error means that the dependency class may not compiled/downloaded correctly. To fix this issue you need to re-compile the maven file</p>\n<p>if using IntelliJ IDEA, go to maven and run &quot;clean&quot; command and run &quot;install&quot; command this will clean and re-download the dependency class files correctly. if required adjusts the TestNG maven dependency version to a stable version</p>\n"},{"comments":[{"owner":{"account_id":5957897,"reputation":364,"user_id":4683883,"accept_rate":50,"display_name":"Jefe infiltrado"},"score":0,"creation_date":1692779411,"post_id":76730632,"comment_id":135669401,"body_markdown":"Nice to get a first hand answer.","body":"Nice to get a first hand answer."}],"tags":[],"owner":{"account_id":4420200,"reputation":4708,"user_id":3877746,"accept_rate":100,"display_name":"Boni Garc&#237;a"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1693578716,"creation_date":1689861334,"answer_id":76730632,"question_id":76694062,"body_markdown":"You need to use Java 11 (or above) with WebDriverManager 5.4.0 (or above).\r\n\r\nUPDATE: To provide a solution to those that cannot bump to Java 11, I  released WebDriverManager 5.5.3, compiled with Java 8. \r\n\r\nIn any case, my personal opinion is that Java 8 is already an ancient version, and I recommend using at least Java 11+ as soon as possible.","title":"Error: java: cannot access io.github.bonigarcia.wdm.WebDriverManager bad class file","body":"<p>You need to use Java 11 (or above) with WebDriverManager 5.4.0 (or above).</p>\n<p>UPDATE: To provide a solution to those that cannot bump to Java 11, I  released WebDriverManager 5.5.3, compiled with Java 8.</p>\n<p>In any case, my personal opinion is that Java 8 is already an ancient version, and I recommend using at least Java 11+ as soon as possible.</p>\n"}],"owner":{"account_id":11834138,"reputation":91,"user_id":8659981,"display_name":"Jack Vicky"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1592,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1693578716,"creation_date":1689428978,"question_id":76694062,"body_markdown":"when I run the below simple @Test selenium code with WebDriver Manager setup, I am facing the following error \r\n\r\n&gt; &quot;java: cannot access io.github.bonigarcia.wdm.WebDriverManager bad class file class file has wrong version 55.0, should be 52.0\r\n\r\nCode Snippet:\r\n\r\n     @Test\r\n    public void driverSetUp(){\r\n        WebDriverManager.chromedriver().setup();\r\n        WebDriver driver = new ChromeDriver();\r\n        driver.get(&quot;https://www.google.com&quot;);\r\n        driver.close();\r\n        driver.quit();\r\n    }\r\n\r\npom.xml content,\r\n\r\n     &lt;dependencies&gt;\r\n        &lt;!-- https://mvnrepository.com/artifact/org.testng/testng --&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.testng&lt;/groupId&gt;\r\n          &lt;artifactId&gt;testng&lt;/artifactId&gt;\r\n          &lt;version&gt;7.4.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- https://mvnrepository.com/artifact/org.seleniumhq.selenium/selenium-java --&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n          &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\r\n          &lt;version&gt;4.10.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;io.github.bonigarcia&lt;/groupId&gt;\r\n          &lt;artifactId&gt;webdrivermanager&lt;/artifactId&gt;\r\n          &lt;version&gt;5.3.2&lt;/version&gt; &lt;!-- Use the appropriate version --&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;junit&lt;/groupId&gt;\r\n          &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n          &lt;version&gt;3.8.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n      &lt;/dependencies&gt;","title":"Error: java: cannot access io.github.bonigarcia.wdm.WebDriverManager bad class file","body":"<p>when I run the below simple @Test selenium code with WebDriver Manager setup, I am facing the following error</p>\n<blockquote>\n<p>&quot;java: cannot access io.github.bonigarcia.wdm.WebDriverManager bad class file class file has wrong version 55.0, should be 52.0</p>\n</blockquote>\n<p>Code Snippet:</p>\n<pre><code> @Test\npublic void driverSetUp(){\n    WebDriverManager.chromedriver().setup();\n    WebDriver driver = new ChromeDriver();\n    driver.get(&quot;https://www.google.com&quot;);\n    driver.close();\n    driver.quit();\n}\n</code></pre>\n<p>pom.xml content,</p>\n<pre><code> &lt;dependencies&gt;\n    &lt;!-- https://mvnrepository.com/artifact/org.testng/testng --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.testng&lt;/groupId&gt;\n      &lt;artifactId&gt;testng&lt;/artifactId&gt;\n      &lt;version&gt;7.4.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;!-- https://mvnrepository.com/artifact/org.seleniumhq.selenium/selenium-java --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n      &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\n      &lt;version&gt;4.10.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;io.github.bonigarcia&lt;/groupId&gt;\n      &lt;artifactId&gt;webdrivermanager&lt;/artifactId&gt;\n      &lt;version&gt;5.3.2&lt;/version&gt; &lt;!-- Use the appropriate version --&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;junit&lt;/groupId&gt;\n      &lt;artifactId&gt;junit&lt;/artifactId&gt;\n      &lt;version&gt;3.8.1&lt;/version&gt;\n    &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n</code></pre>\n"},{"tags":["java","android","dagger-2"],"answers":[{"tags":[],"owner":{"account_id":12476573,"reputation":5021,"user_id":9082728,"display_name":"C&#244;ng Hải"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1591842046,"creation_date":1591842046,"answer_id":62316038,"question_id":62315281,"body_markdown":"You have to implementation `dagger` instead of `dagger-android`. Don&#39;t forget to make project or rebuild\r\n\r\n```\r\nimplementation &#39;com.google.dagger:dagger:2.27&#39;\r\nannotationProcessor &#39;com.google.dagger:dagger-compiler:2.27&#39;\r\n```","title":"Dagger 2 Component class not generated","body":"<p>You have to implementation <code>dagger</code> instead of <code>dagger-android</code>. Don't forget to make project or rebuild</p>\n\n<pre><code>implementation 'com.google.dagger:dagger:2.27'\nannotationProcessor 'com.google.dagger:dagger-compiler:2.27'\n</code></pre>\n"},{"tags":[],"owner":{"display_name":"user13651827"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1591852043,"creation_date":1591852043,"answer_id":62317435,"question_id":62315281,"body_markdown":"Question you asked i encountered many times, And the lucky thing is i know how to solve it.\r\nhere are simple methods you can follow to solve it.\r\n\r\n1. You can clean/rebuild project to solve it.\r\n2. You can invalidate/cache restart your android studio to solve it.\r\n3. You can delete cache folder where you installed your android studio.but you have to make sure your android studio closed. Now you can restart it, your problem is gone.\r\n4. You can rename dagger component and rebuild your project to generate class. This solve your issue.\r\n\r\nHere are some quick methods,you can try to solve it.","title":"Dagger 2 Component class not generated","body":"<p>Question you asked i encountered many times, And the lucky thing is i know how to solve it.\nhere are simple methods you can follow to solve it.</p>\n\n<ol>\n<li>You can clean/rebuild project to solve it.</li>\n<li>You can invalidate/cache restart your android studio to solve it.</li>\n<li>You can delete cache folder where you installed your android studio.but you have to make sure your android studio closed. Now you can restart it, your problem is gone.</li>\n<li>You can rename dagger component and rebuild your project to generate class. This solve your issue.</li>\n</ol>\n\n<p>Here are some quick methods,you can try to solve it.</p>\n"},{"tags":[],"owner":{"account_id":14415045,"reputation":514,"user_id":10412712,"display_name":"jenos kon"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1668600771,"creation_date":1668600771,"answer_id":74460263,"question_id":62315281,"body_markdown":"If someone still faced this problem, just use those dependencies below it works for me : \r\n\r\n    implementation &#39;com.google.dagger:dagger-android:2.44.2&#39;\r\n    annotationProcessor &#39;com.google.dagger:dagger-android-processor:2.20&#39;\r\n    annotationProcessor &#39;com.google.dagger:dagger-compiler:2.20&#39;\r\n\r\ntry always to use the latest version of the dagger, use this link to get the latest version: https://github.com/google/dagger/releases","title":"Dagger 2 Component class not generated","body":"<p>If someone still faced this problem, just use those dependencies below it works for me :</p>\n<pre><code>implementation 'com.google.dagger:dagger-android:2.44.2'\nannotationProcessor 'com.google.dagger:dagger-android-processor:2.20'\nannotationProcessor 'com.google.dagger:dagger-compiler:2.20'\n</code></pre>\n<p>try always to use the latest version of the dagger, use this link to get the latest version: <a href=\"https://github.com/google/dagger/releases\" rel=\"nofollow noreferrer\">https://github.com/google/dagger/releases</a></p>\n"}],"owner":{"account_id":11294865,"reputation":147,"user_id":8282703,"display_name":"user8282703"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1213,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":62316038,"answer_count":3,"score":1,"last_activity_date":1693578636,"creation_date":1591835931,"question_id":62315281,"body_markdown":" i&#39;m currently learn dagger2 but i have problem is daggercomponent class not generated and i can&#39;t know the reason \r\n\r\n    implementation &#39;com.google.dagger:dagger-android:2.27&#39;\r\n    implementation &#39;com.google.dagger:dagger-android-support:2.27&#39;  \r\n    annotationProcessor &#39;com.google.dagger:dagger-android-processor:2.27&#39;\r\n\r\n*****************************************************************************\r\n\r\n    public class Nugets {\r\n        @Inject\r\n        public Nugets() {\r\n        }\r\n    }\r\n***************************************\r\n\r\n    public class Water {\r\n    \r\n        @Inject\r\n        public Water() {\r\n        }\r\n    }\r\n****************************************\r\n\r\n    public class Coffee {\r\n    \r\n        Nugets nugets;\r\n        Water water;\r\n    \r\n        @Inject\r\n        public Coffee(Nugets nugets, Water water) {\r\n            this.nugets = nugets;\r\n            this.water = water;\r\n        }\r\n    }\r\n*****************************************************\r\n\r\n    @Component\r\n    public interface CoffeeComponent {\r\n        Coffee getCoffee();\r\n    }\r\n\r\n*****************************************************\r\nwhen i tried to to find DaggerCoffeeComponent class i didn&#39;t find it.\r\nnote i rebuild project \r\n","title":"Dagger 2 Component class not generated","body":"<p>i'm currently learn dagger2 but i have problem is daggercomponent class not generated and i can't know the reason </p>\n\n<pre><code>implementation 'com.google.dagger:dagger-android:2.27'\nimplementation 'com.google.dagger:dagger-android-support:2.27'  \nannotationProcessor 'com.google.dagger:dagger-android-processor:2.27'\n</code></pre>\n\n<hr>\n\n<pre><code>public class Nugets {\n    @Inject\n    public Nugets() {\n    }\n}\n</code></pre>\n\n<hr>\n\n<pre><code>public class Water {\n\n    @Inject\n    public Water() {\n    }\n}\n</code></pre>\n\n<hr>\n\n<pre><code>public class Coffee {\n\n    Nugets nugets;\n    Water water;\n\n    @Inject\n    public Coffee(Nugets nugets, Water water) {\n        this.nugets = nugets;\n        this.water = water;\n    }\n}\n</code></pre>\n\n<hr>\n\n<pre><code>@Component\npublic interface CoffeeComponent {\n    Coffee getCoffee();\n}\n</code></pre>\n\n<hr>\n\n<p>when i tried to to find DaggerCoffeeComponent class i didn't find it.\nnote i rebuild project </p>\n"},{"tags":["java","common-table-expression","jooq"],"answers":[{"comments":[{"owner":{"account_id":3572516,"reputation":141,"user_id":2982506,"display_name":"Dmitry Shabalin"},"score":0,"creation_date":1693741745,"post_id":77023903,"comment_id":135797948,"body_markdown":"if i close by parenthesis\n\n```\nTable&lt;Record&gt; v = name(&quot;q&quot;)\n            .as(\n                dslContext.select(\n                    ADVERTISING_MAILING_HISTORIES.CONTACT_ID,\n                    DSL.coalesce(ADVERTISING_MAILING_HISTORIES.CREATED_BY, ADVERTISING_MAILING_HISTORIES.CONTACT_ID),\n                    ADVERTISING_MAILING_HISTORIES.CREATED_DATE,\n                    CONTACTS.NAME,\n                    CONTACTS.TYPE\n                ).from(q1))\n```\n\n`v` will be a table not CTE so i can not use it by `with` statement\nIts near but not the same","body":"if i close by parenthesis  ``` Table&lt;Record&gt; v = name(&quot;q&quot;)             .as(                 dslContext.select(                     ADVERTISING_MAILING_HISTORIES.CONTACT_ID,                     DSL.coalesce(ADVERTISING_MAILING_HISTORIES.CREATED_BY, ADVERTISING_MAILING_HISTORIES.CONTACT_ID),                     ADVERTISING_MAILING_HISTORIES.CREATED_DATE,                     CONTACTS.NAME,                     CONTACTS.TYPE                 ).from(q1)) ```  <code>v</code> will be a table not CTE so i can not use it by <code>with</code> statement Its near but not the same"}],"tags":[],"owner":{"account_id":247217,"reputation":213465,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693578225,"creation_date":1693578225,"answer_id":77023903,"question_id":77022303,"body_markdown":"You misplaced a parenthesis. You wrote:\r\n\r\n```java\r\n).asTable(&quot;q1&quot;)\r\n```\r\n\r\nWhen you should have written\r\n\r\n```java\r\n.asTable(&quot;q1&quot;))\r\n```\r\n\r\nIt becomes more obvious when you assign the derived table to a local variable like so:\r\n\r\n```java\r\nTable&lt;?&gt; q1 = \r\n    select(max(HISTORIES.ID), max(HISTORIES.CONTACT_ID))\r\n    .from(HISTORIES)\r\n    .groupBy(HISTORIES.CONTACT_ID)\r\n    .asTable(&quot;q1&quot;);\r\n```\r\n\r\nAnd then:\r\n\r\n```java\r\n...\r\n.from(q1)\r\n.join(HISTORIES)\r\n...\r\n```","title":"Jooq cte with joins not compiling","body":"<p>You misplaced a parenthesis. You wrote:</p>\n<pre class=\"lang-java prettyprint-override\"><code>).asTable(&quot;q1&quot;)\n</code></pre>\n<p>When you should have written</p>\n<pre class=\"lang-java prettyprint-override\"><code>.asTable(&quot;q1&quot;))\n</code></pre>\n<p>It becomes more obvious when you assign the derived table to a local variable like so:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Table&lt;?&gt; q1 = \n    select(max(HISTORIES.ID), max(HISTORIES.CONTACT_ID))\n    .from(HISTORIES)\n    .groupBy(HISTORIES.CONTACT_ID)\n    .asTable(&quot;q1&quot;);\n</code></pre>\n<p>And then:</p>\n<pre class=\"lang-java prettyprint-override\"><code>...\n.from(q1)\n.join(HISTORIES)\n...\n</code></pre>\n"}],"owner":{"account_id":3572516,"reputation":141,"user_id":2982506,"display_name":"Dmitry Shabalin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1693578225,"creation_date":1693563642,"question_id":77022303,"body_markdown":"I need in cte with joins. \r\nIn doc https://www.jooq.org/doc/latest/manual/sql-building/sql-statements/with-clause/ just short example w/o any `joins` and `where` term. \r\n\r\nIf I use `joins` the type of will be TableOnConditionStep but for org.jooq.DerivedColumnList4#as required Select and faced with comile time error\r\n\r\n     method as in interface org.jooq.DerivedColumnList4 cannot be applied to given types;\r\n    [ERROR]   required: org.jooq.ResultQuery&lt;R&gt;\r\n    [ERROR]   found: org.jooq.TableOnConditionStep&lt;org.jooq.Record&gt;\r\n    [ERROR]   reason: cannot infer type-variable(s) R\r\n    [ERROR]     (argument mismatch; org.jooq.TableOnConditionStep&lt;org.jooq.Record&gt; cannot be converted to org.jooq.ResultQuery&lt;R&gt;)\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n     CommonTableExpression cte = name(&quot;amd&quot;)\r\n                .fields(&quot;contact_id&quot;, &quot;created_date&quot;, &quot;name&quot;, &quot;type&quot;)\r\n                .as(\r\n                    select(\r\n                        HISTORIES.CONTACT_ID,\r\n                        DSL.max(HISTORIES.CREATED_DATE),\r\n                        CONTACTS.NAME,\r\n                        CONTACTS.TYPE\r\n                    ).from(\r\n                            dslContext.select(\r\n                                    DSL.max(HISTORIES.ID),\r\n                                    DSL.max(HISTORIES.CONTACT_ID)\r\n                                ).from(HISTORIES)\r\n                                .groupBy(HISTORIES.CONTACT_ID)\r\n                        ).asTable(&quot;q1&quot;)\r\n                        .join(HISTORIES)\r\n                        .on(field(&quot;q1.id&quot;).eq(HISTORIES.ID))\r\n                        .join(CONTACTS)\r\n                        .on(DSL.coalesce(HISTORIES.CREATED_BY, HISTORIES.CONTACT_ID).eq(CONTACTS.ID))\r\n                );\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"Jooq cte with joins not compiling","body":"<p>I need in cte with joins.\nIn doc <a href=\"https://www.jooq.org/doc/latest/manual/sql-building/sql-statements/with-clause/\" rel=\"nofollow noreferrer\">https://www.jooq.org/doc/latest/manual/sql-building/sql-statements/with-clause/</a> just short example w/o any <code>joins</code> and <code>where</code> term.</p>\n<p>If I use <code>joins</code> the type of will be TableOnConditionStep but for org.jooq.DerivedColumnList4#as required Select and faced with comile time error</p>\n<pre><code> method as in interface org.jooq.DerivedColumnList4 cannot be applied to given types;\n[ERROR]   required: org.jooq.ResultQuery&lt;R&gt;\n[ERROR]   found: org.jooq.TableOnConditionStep&lt;org.jooq.Record&gt;\n[ERROR]   reason: cannot infer type-variable(s) R\n[ERROR]     (argument mismatch; org.jooq.TableOnConditionStep&lt;org.jooq.Record&gt; cannot be converted to org.jooq.ResultQuery&lt;R&gt;)\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code> CommonTableExpression cte = name(&quot;amd&quot;)\n            .fields(&quot;contact_id&quot;, &quot;created_date&quot;, &quot;name&quot;, &quot;type&quot;)\n            .as(\n                select(\n                    HISTORIES.CONTACT_ID,\n                    DSL.max(HISTORIES.CREATED_DATE),\n                    CONTACTS.NAME,\n                    CONTACTS.TYPE\n                ).from(\n                        dslContext.select(\n                                DSL.max(HISTORIES.ID),\n                                DSL.max(HISTORIES.CONTACT_ID)\n                            ).from(HISTORIES)\n                            .groupBy(HISTORIES.CONTACT_ID)\n                    ).asTable(&quot;q1&quot;)\n                    .join(HISTORIES)\n                    .on(field(&quot;q1.id&quot;).eq(HISTORIES.ID))\n                    .join(CONTACTS)\n                    .on(DSL.coalesce(HISTORIES.CREATED_BY, HISTORIES.CONTACT_ID).eq(CONTACTS.ID))\n            );\n</code></pre>\n\n"},{"tags":["java","spring","spring-boot","liquibase"],"answers":[{"comments":[{"owner":{"account_id":7938311,"reputation":537,"user_id":6164682,"display_name":"sub"},"score":0,"creation_date":1650353611,"post_id":71917815,"comment_id":127088222,"body_markdown":"Thank you.. I am using &lt;includeAll path=&quot;classpath:/liquibase/db/&quot;/&gt;. \n\nIn this case I will include all the sql files in db folder.","body":"Thank you.. I am using &lt;includeAll path=&quot;classpath:/liquibase/db/&quot;/&gt;.   In this case I will include all the sql files in db folder."},{"owner":{"account_id":477214,"reputation":5260,"user_id":888580,"display_name":"lane.maxwell"},"score":0,"creation_date":1650378112,"post_id":71917815,"comment_id":127097439,"body_markdown":"Same thing applies, add the validCheckSum line to your sql that are failing to pass validation","body":"Same thing applies, add the validCheckSum line to your sql that are failing to pass validation"},{"owner":{"account_id":7938311,"reputation":537,"user_id":6164682,"display_name":"sub"},"score":0,"creation_date":1650452473,"post_id":71917815,"comment_id":127118077,"body_markdown":"is validCheckSum can be a random string? or it is a calculated value. Because I have to deploy across multiple environments?","body":"is validCheckSum can be a random string? or it is a calculated value. Because I have to deploy across multiple environments?"},{"owner":{"account_id":477214,"reputation":5260,"user_id":888580,"display_name":"lane.maxwell"},"score":1,"creation_date":1650461315,"post_id":71917815,"comment_id":127121669,"body_markdown":"The checksum will be the same in all environments provided the same input.  Your best bet is to ensure tighter control over these changesets, otherwise you&#39;re going to go crazy trying to keep up with the checksums","body":"The checksum will be the same in all environments provided the same input.  Your best bet is to ensure tighter control over these changesets, otherwise you&#39;re going to go crazy trying to keep up with the checksums"}],"tags":[],"owner":{"account_id":477214,"reputation":5260,"user_id":888580,"display_name":"lane.maxwell"},"comment_count":4,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1650322101,"creation_date":1650322101,"answer_id":71917815,"question_id":71917324,"body_markdown":"Yeah, you can&#39;t really do that.  Once you&#39;ve applied a changeset it records the checksum in the config database, any changes (even whitespace) will cause this validation error.  If you&#39;re using maven or gradle you can clear the checksums and they will be recomputed on the next run by using the clearChecksums goal on the liquibase plugin.\r\n\r\nYou should pay close attention, when you use the SQL option (via `&lt;include file=&quot;` I presume), it DOES NOT differ the checksum on whitespace so there are probably other differences that you are not seeing.  If you&#39;re confident that the changes are inconsequential, add\r\n\r\n    --validCheckSum 8:47d241e6e1636203501ec72cafe4e5b6\r\n\r\nto the header of your SQL file and this will tell liquibase that even though the original checksum was calculated as `8:600cf084d9c1ea85df2ddaa4f7a8a309`, `8:47d241e6e1636203501ec72cafe4e5b6` is also a valid checksum for this file.\r\n\r\nSome good advice would be to have tighter control of these files using your RCS, otherwise you&#39;re going to be constantly fighting with this.","title":"How to fix ValidationFailedException in liquibase checksum?","body":"<p>Yeah, you can't really do that.  Once you've applied a changeset it records the checksum in the config database, any changes (even whitespace) will cause this validation error.  If you're using maven or gradle you can clear the checksums and they will be recomputed on the next run by using the clearChecksums goal on the liquibase plugin.</p>\n<p>You should pay close attention, when you use the SQL option (via <code>&lt;include file=&quot;</code> I presume), it DOES NOT differ the checksum on whitespace so there are probably other differences that you are not seeing.  If you're confident that the changes are inconsequential, add</p>\n<pre><code>--validCheckSum 8:47d241e6e1636203501ec72cafe4e5b6\n</code></pre>\n<p>to the header of your SQL file and this will tell liquibase that even though the original checksum was calculated as <code>8:600cf084d9c1ea85df2ddaa4f7a8a309</code>, <code>8:47d241e6e1636203501ec72cafe4e5b6</code> is also a valid checksum for this file.</p>\n<p>Some good advice would be to have tighter control of these files using your RCS, otherwise you're going to be constantly fighting with this.</p>\n"},{"tags":[],"owner":{"account_id":1443148,"reputation":561,"user_id":1362619,"display_name":"Andriy Boyko"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693578060,"creation_date":1693578060,"answer_id":77023886,"question_id":71917324,"body_markdown":"In my case with additions to liquibase SQL scripts the same error was resolved by exploring the `databasechangelog` table and manually deleting the last record from it: \r\n\r\n    DELETE FROM public.databasechangelog WHERE id = &#39;id_you_discovered&#39;\r\n","title":"How to fix ValidationFailedException in liquibase checksum?","body":"<p>In my case with additions to liquibase SQL scripts the same error was resolved by exploring the <code>databasechangelog</code> table and manually deleting the last record from it:</p>\n<pre><code>DELETE FROM public.databasechangelog WHERE id = 'id_you_discovered'\n</code></pre>\n"}],"owner":{"account_id":7938311,"reputation":537,"user_id":6164682,"display_name":"sub"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4605,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":71917815,"answer_count":2,"score":1,"last_activity_date":1693578060,"creation_date":1650317602,"question_id":71917324,"body_markdown":"I am using liquibase with spring boot. I am having SQL changesets. I have not changed anything in the liquibase SQL scripts. but I am getting below error\r\n\r\n&gt; Error creating bean with name &#39;liquibase&#39; defined in class path\r\n&gt; resource: Invocation of init method failed; nested exception is\r\n&gt; liquibase.exception.ValidationFailedException: Validation Failed:\\r\\n \r\n&gt; 1 change sets check sum\\r\\n         \r\n&gt; liquibase/db/0001_sample.sql::sample1_2::admin was:\r\n&gt; 8:600cf084d9c1ea85df2ddaa4f7a8a309 but is now:\r\n&gt; 8:47d241e6e1636203501ec72cafe4e5b6\\r\\n&quot;,\r\n&gt;     &quot;class&quot;: &quot;org.springframework.beans.factory.BeanCreationException&quot;,\r\n\r\nBelow is my **0001_table1.sql**\r\n\t\r\n    --liquibase formatted sql\r\n    --changeset admin:sample1_1\r\n    create table....\r\n    --rollback DROP TABLE tablename\r\n    \r\n    --changeset admin:sample1_2\r\n    add column....\r\n\r\nI think this is due to formatting changing from my IDE to another ide. But I like to fix it. I am not looking for clearing checksum. Please suggest how to handle when using plain SQL with liquibase.\r\n\r\n**Note:** I have seen examples with xml version, but I am looking for SQL with liquibase.","title":"How to fix ValidationFailedException in liquibase checksum?","body":"<p>I am using liquibase with spring boot. I am having SQL changesets. I have not changed anything in the liquibase SQL scripts. but I am getting below error</p>\n<blockquote>\n<p>Error creating bean with name 'liquibase' defined in class path\nresource: Invocation of init method failed; nested exception is\nliquibase.exception.ValidationFailedException: Validation Failed:\\r\\n\n1 change sets check sum\\r\\n<br />\nliquibase/db/0001_sample.sql::sample1_2::admin was:\n8:600cf084d9c1ea85df2ddaa4f7a8a309 but is now:\n8:47d241e6e1636203501ec72cafe4e5b6\\r\\n&quot;,\n&quot;class&quot;: &quot;org.springframework.beans.factory.BeanCreationException&quot;,</p>\n</blockquote>\n<p>Below is my <strong>0001_table1.sql</strong></p>\n<pre><code>--liquibase formatted sql\n--changeset admin:sample1_1\ncreate table....\n--rollback DROP TABLE tablename\n\n--changeset admin:sample1_2\nadd column....\n</code></pre>\n<p>I think this is due to formatting changing from my IDE to another ide. But I like to fix it. I am not looking for clearing checksum. Please suggest how to handle when using plain SQL with liquibase.</p>\n<p><strong>Note:</strong> I have seen examples with xml version, but I am looking for SQL with liquibase.</p>\n"},{"tags":["java","android","scroll","android-recyclerview"],"comments":[{"owner":{"account_id":1849514,"reputation":193878,"user_id":1676363,"accept_rate":100,"display_name":"ianhanniballake"},"score":0,"creation_date":1414381334,"post_id":26580723,"comment_id":41778468,"body_markdown":"Are you calling `scrollToPosition` immediately after setting the adapter?","body":"Are you calling <code>scrollToPosition</code> immediately after setting the adapter?"},{"owner":{"account_id":2695345,"reputation":2101,"user_id":2327567,"accept_rate":75,"display_name":"waylaidwanderer"},"score":0,"creation_date":1414387845,"post_id":26580723,"comment_id":41779701,"body_markdown":"@ianhanniballake yes, it&#39;s right after `conversationView.setAdapter(conversationViewAdapter);`.","body":"@ianhanniballake yes, it&#39;s right after <code>conversationView.setAdapter(conversationViewAdapter);</code>."},{"owner":{"account_id":2373566,"reputation":560,"user_id":2077582,"display_name":"RCB"},"score":4,"creation_date":1455295428,"post_id":26580723,"comment_id":58441576,"body_markdown":"It is probably because you are calling +1 instead of -1   so the 5th element would be position [4] because it starts at 0. Doing +1 would give you an ArrayOutOfBounds ... did it not crash there?","body":"It is probably because you are calling +1 instead of -1   so the 5th element would be position [4] because it starts at 0. Doing +1 would give you an ArrayOutOfBounds ... did it not crash there?"},{"owner":{"account_id":4232985,"reputation":2632,"user_id":3464919,"display_name":"Codelaby"},"score":1,"creation_date":1474620982,"post_id":26580723,"comment_id":66615532,"body_markdown":"Add after setadapter mRecyclerView.scrollToPosition(carsList.size()-1);","body":"Add after setadapter mRecyclerView.scrollToPosition(carsList.size()-1);"}],"answers":[{"comments":[{"owner":{"account_id":2695345,"reputation":2101,"user_id":2327567,"accept_rate":75,"display_name":"waylaidwanderer"},"score":1,"creation_date":1414398169,"post_id":26581863,"comment_id":41782799,"body_markdown":"Thanks, but this doesn&#39;t work. It breaks scrolling by stopping flinging from working, and if you drag, it scrolls by oddly fast.","body":"Thanks, but this doesn&#39;t work. It breaks scrolling by stopping flinging from working, and if you drag, it scrolls by oddly fast."},{"owner":{"account_id":1849514,"reputation":193878,"user_id":1676363,"accept_rate":100,"display_name":"ianhanniballake"},"score":0,"creation_date":1414417635,"post_id":26581863,"comment_id":41792792,"body_markdown":"Sounds like you aren&#39;t removing the listener. It should only be called exactly once (right after the elements are first laid out) and not at all during scrolling.","body":"Sounds like you aren&#39;t removing the listener. It should only be called exactly once (right after the elements are first laid out) and not at all during scrolling."},{"owner":{"account_id":887930,"reputation":23705,"user_id":926907,"accept_rate":87,"display_name":"Dmitry Zaytsev"},"score":0,"creation_date":1421062166,"post_id":26581863,"comment_id":44201407,"body_markdown":"`OnGlobalLayoutListener` probably not getting removed because you&#39;re checking for `vto.isAlive()`. I don&#39;t know the reason, but `ViewTreeObserver` sometimes is changed for a `View`, so instead of checking for `isAlive` you better just get current `ViewTreeObserver` with `conversationView.getViewTreeObserver().removeGlobalOnLayoutListener`","body":"<code>OnGlobalLayoutListener</code> probably not getting removed because you&#39;re checking for <code>vto.isAlive()</code>. I don&#39;t know the reason, but <code>ViewTreeObserver</code> sometimes is changed for a <code>View</code>, so instead of checking for <code>isAlive</code> you better just get current <code>ViewTreeObserver</code> with <code>conversationView.getViewTreeObserver().removeGlobalOnLayoutL&zwnj;&#8203;istener</code>"},{"owner":{"account_id":2931845,"reputation":3015,"user_id":2511884,"accept_rate":29,"display_name":"Saket"},"score":0,"creation_date":1512309705,"post_id":26581863,"comment_id":82196295,"body_markdown":"@ianhanniballake I&#39;ve proposed an edit to fix this issue.","body":"@ianhanniballake I&#39;ve proposed an edit to fix this issue."}],"tags":[],"owner":{"account_id":1849514,"reputation":193878,"user_id":1676363,"accept_rate":100,"display_name":"ianhanniballake"},"comment_count":4,"down_vote_count":1,"up_vote_count":13,"is_accepted":false,"score":12,"last_activity_date":1512334145,"creation_date":1414389250,"answer_id":26581863,"question_id":26580723,"body_markdown":"When you call `setAdapter`, that does not immediately lay out and position items on the screen (that takes a single layout pass) hence your `scrollToPosition()` call has no actual elements to scroll to when you call it.\r\n\r\nInstead, you should register a [ViewTreeObserver.OnGlobalLayoutListener][1] (via [addOnGlobalLayoutListner()][2] from a `ViewTreeObserver` created by `conversationView.getViewTreeObserver()`) which delays your `scrollToPosition()` until after the first layout pass:\r\n\r\n    conversationView.getViewTreeObserver().addOnGlobalLayoutListener(new ViewTreeObserver.OnGlobalLayoutListener() {\r\n      public void onGlobalLayout() {\r\n        conversationView.scrollToPosition(GENERIC_MESSAGE_LIST.size();\r\n        // Unregister the listener to only call scrollToPosition once\r\n        conversationView.getViewTreeObserver().removeGlobalOnLayoutListener(this);\r\n        \r\n        // Use vto.removeOnGlobalLayoutListener(this) on API16+ devices as \r\n        // removeGlobalOnLayoutListener is deprecated.\r\n        // They do the same thing, just a rename so your choice.\r\n      }\r\n    });\r\n\r\n\r\n  [1]: http://developer.android.com/reference/android/view/ViewTreeObserver.OnGlobalLayoutListener.html\r\n  [2]: http://developer.android.com/reference/android/view/ViewTreeObserver.html#addOnGlobalLayoutListener(android.view.ViewTreeObserver.OnGlobalLayoutListener)","title":"How to scroll to the bottom of a RecyclerView? scrollToPosition doesn&#39;t work","body":"<p>When you call <code>setAdapter</code>, that does not immediately lay out and position items on the screen (that takes a single layout pass) hence your <code>scrollToPosition()</code> call has no actual elements to scroll to when you call it.</p>\n\n<p>Instead, you should register a <a href=\"http://developer.android.com/reference/android/view/ViewTreeObserver.OnGlobalLayoutListener.html\" rel=\"nofollow noreferrer\">ViewTreeObserver.OnGlobalLayoutListener</a> (via <a href=\"http://developer.android.com/reference/android/view/ViewTreeObserver.html#addOnGlobalLayoutListener(android.view.ViewTreeObserver.OnGlobalLayoutListener)\" rel=\"nofollow noreferrer\">addOnGlobalLayoutListner()</a> from a <code>ViewTreeObserver</code> created by <code>conversationView.getViewTreeObserver()</code>) which delays your <code>scrollToPosition()</code> until after the first layout pass:</p>\n\n<pre><code>conversationView.getViewTreeObserver().addOnGlobalLayoutListener(new ViewTreeObserver.OnGlobalLayoutListener() {\n  public void onGlobalLayout() {\n    conversationView.scrollToPosition(GENERIC_MESSAGE_LIST.size();\n    // Unregister the listener to only call scrollToPosition once\n    conversationView.getViewTreeObserver().removeGlobalOnLayoutListener(this);\n\n    // Use vto.removeOnGlobalLayoutListener(this) on API16+ devices as \n    // removeGlobalOnLayoutListener is deprecated.\n    // They do the same thing, just a rename so your choice.\n  }\n});\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3717858,"reputation":1233,"user_id":3093580,"accept_rate":30,"display_name":"Yuki  Yoshida"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1414503949,"creation_date":1414503949,"answer_id":26609979,"question_id":26580723,"body_markdown":"    class MyLayoutManager extends LinearLayoutManager {\r\n\r\n      public MyLayoutManager(Context context) {\r\n        super(context, LinearLayoutManager.VERTICAL, false);\r\n      }\r\n\r\n      @Override public void smoothScrollToPosition(RecyclerView recyclerView,\r\n          final RecyclerView.State state, final int position) {\r\n\r\n        int fcvip = findFirstCompletelyVisibleItemPosition();\r\n        int lcvip = findLastCompletelyVisibleItemPosition();\r\n\r\n        if (position &lt; fcvip || lcvip &lt; position) {\r\n          // scrolling to invisible position\r\n\r\n          float fcviY = findViewByPosition(fcvip).getY();\r\n          float lcviY = findViewByPosition(lcvip).getY();\r\n\r\n          recyclerView.setOnScrollListener(new RecyclerView.OnScrollListener() {\r\n\r\n            int currentState = RecyclerView.SCROLL_STATE_IDLE;\r\n\r\n            @Override public void onScrollStateChanged(RecyclerView recyclerView, int newState) {\r\n\r\n              if (currentState == RecyclerView.SCROLL_STATE_SETTLING\r\n                  &amp;&amp; newState == RecyclerView.SCROLL_STATE_IDLE) {\r\n\r\n                // recursive scrolling\r\n                smoothScrollToPosition(recyclerView, state, position);\r\n              }\r\n\r\n              currentState = newState;\r\n            }\r\n\r\n            @Override public void onScrolled(RecyclerView recyclerView, int dx, int dy) {\r\n\r\n              int fcvip = findFirstCompletelyVisibleItemPosition();\r\n              int lcvip = findLastCompletelyVisibleItemPosition();\r\n\r\n              if ((dy &lt; 0 &amp;&amp; fcvip == position) || (dy &gt; 0 &amp;&amp; lcvip == position)) {\r\n                // stop scrolling\r\n                recyclerView.setOnScrollListener(null);\r\n              }\r\n            }\r\n          });\r\n\r\n          if (position &lt; fcvip) {\r\n            // scroll up\r\n\r\n            recyclerView.smoothScrollBy(0, (int) (fcviY - lcviY));\r\n          } else {\r\n            // scroll down\r\n\r\n            recyclerView.smoothScrollBy(0, (int) (lcviY - fcviY));\r\n          }\r\n        } else {\r\n          // scrolling to visible position\r\n\r\n          float fromY = findViewByPosition(fcvip).getY();\r\n          float targetY = findViewByPosition(position).getY();\r\n\r\n          recyclerView.smoothScrollBy(0, (int) (targetY - fromY));\r\n        }\r\n      }\r\n    }\r\n\r\n\r\nand\r\n\r\n    MyLayoutManager layoutManager = new MyLayoutManager(context);\r\n    recyclerView.setLayoutManager(layoutManager);\r\n\r\n    RecyclerView.Adapter adapter = new YourAdapter();\r\n    recyclerView.setAdapter(adapter);\r\n\r\n    recyclerView.smoothScrollToPosition(adapter.getItemCount() - 1);\r\n\r\n\r\nabove code works, but it&#39;s not smooth and not cool.","title":"How to scroll to the bottom of a RecyclerView? scrollToPosition doesn&#39;t work","body":"<pre><code>class MyLayoutManager extends LinearLayoutManager {\n\n  public MyLayoutManager(Context context) {\n    super(context, LinearLayoutManager.VERTICAL, false);\n  }\n\n  @Override public void smoothScrollToPosition(RecyclerView recyclerView,\n      final RecyclerView.State state, final int position) {\n\n    int fcvip = findFirstCompletelyVisibleItemPosition();\n    int lcvip = findLastCompletelyVisibleItemPosition();\n\n    if (position &lt; fcvip || lcvip &lt; position) {\n      // scrolling to invisible position\n\n      float fcviY = findViewByPosition(fcvip).getY();\n      float lcviY = findViewByPosition(lcvip).getY();\n\n      recyclerView.setOnScrollListener(new RecyclerView.OnScrollListener() {\n\n        int currentState = RecyclerView.SCROLL_STATE_IDLE;\n\n        @Override public void onScrollStateChanged(RecyclerView recyclerView, int newState) {\n\n          if (currentState == RecyclerView.SCROLL_STATE_SETTLING\n              &amp;&amp; newState == RecyclerView.SCROLL_STATE_IDLE) {\n\n            // recursive scrolling\n            smoothScrollToPosition(recyclerView, state, position);\n          }\n\n          currentState = newState;\n        }\n\n        @Override public void onScrolled(RecyclerView recyclerView, int dx, int dy) {\n\n          int fcvip = findFirstCompletelyVisibleItemPosition();\n          int lcvip = findLastCompletelyVisibleItemPosition();\n\n          if ((dy &lt; 0 &amp;&amp; fcvip == position) || (dy &gt; 0 &amp;&amp; lcvip == position)) {\n            // stop scrolling\n            recyclerView.setOnScrollListener(null);\n          }\n        }\n      });\n\n      if (position &lt; fcvip) {\n        // scroll up\n\n        recyclerView.smoothScrollBy(0, (int) (fcviY - lcviY));\n      } else {\n        // scroll down\n\n        recyclerView.smoothScrollBy(0, (int) (lcviY - fcviY));\n      }\n    } else {\n      // scrolling to visible position\n\n      float fromY = findViewByPosition(fcvip).getY();\n      float targetY = findViewByPosition(position).getY();\n\n      recyclerView.smoothScrollBy(0, (int) (targetY - fromY));\n    }\n  }\n}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>MyLayoutManager layoutManager = new MyLayoutManager(context);\nrecyclerView.setLayoutManager(layoutManager);\n\nRecyclerView.Adapter adapter = new YourAdapter();\nrecyclerView.setAdapter(adapter);\n\nrecyclerView.smoothScrollToPosition(adapter.getItemCount() - 1);\n</code></pre>\n\n<p>above code works, but it's not smooth and not cool.</p>\n"},{"comments":[{"owner":{"account_id":2634101,"reputation":626,"user_id":2279285,"display_name":"Engine Bai"},"score":7,"creation_date":1425636065,"post_id":27063152,"comment_id":46052414,"body_markdown":"`recyclerView.scrollToPosition(messages.size()-1);` really works for me, I just wonder the reason.","body":"<code>recyclerView.scrollToPosition(messages.size()-1);</code> really works for me, I just wonder the reason."},{"owner":{"account_id":3728896,"reputation":468,"user_id":3211023,"display_name":"Calvin"},"score":26,"creation_date":1426837575,"post_id":27063152,"comment_id":46542825,"body_markdown":"This worked for me. It actually makes sense because Java lists are zero based. E.g. list [0,1,2] has a size of 3 but the last position is 2 because it starts with 0.","body":"This worked for me. It actually makes sense because Java lists are zero based. E.g. list [0,1,2] has a size of 3 but the last position is 2 because it starts with 0."},{"owner":{"account_id":37964,"reputation":3107,"user_id":108742,"accept_rate":67,"display_name":"Ivan Morgillo"},"score":22,"creation_date":1437121075,"post_id":27063152,"comment_id":50908061,"body_markdown":"FYI, for a smooth scroll, there is `smoothScrollToPosition(...)`.","body":"FYI, for a smooth scroll, there is <code>smoothScrollToPosition(...)</code>."},{"owner":{"account_id":352570,"reputation":16022,"user_id":689723,"accept_rate":71,"display_name":"cesards"},"score":6,"creation_date":1438243192,"post_id":27063152,"comment_id":51373497,"body_markdown":"@Ivan Morgilo smoothScrollToPosition doesn&#39;t work at all :S","body":"@Ivan Morgilo smoothScrollToPosition doesn&#39;t work at all :S"},{"owner":{"account_id":5093578,"reputation":1155,"user_id":4085779,"accept_rate":11,"display_name":"Roee"},"score":2,"creation_date":1467646929,"post_id":27063152,"comment_id":63802235,"body_markdown":"@IvanMorgillo - your answer seems to work better both with the result wanted and more smooth =D. seems like scroll to position is a bit buggy for me (my guess is that there&#39;s a small delay between the function called and the creation of the view? anyways it&#39;s not working properly)","body":"@IvanMorgillo - your answer seems to work better both with the result wanted and more smooth =D. seems like scroll to position is a bit buggy for me (my guess is that there&#39;s a small delay between the function called and the creation of the view? anyways it&#39;s not working properly)"},{"owner":{"account_id":1804429,"reputation":3335,"user_id":1641882,"accept_rate":41,"display_name":"Ishan"},"score":0,"creation_date":1472506509,"post_id":27063152,"comment_id":65769767,"body_markdown":"I tested manually by recyclerView.scrollToPosition(4), and then realized that when using adapter.getItemCount() I am getting one more than required.","body":"I tested manually by recyclerView.scrollToPosition(4), and then realized that when using adapter.getItemCount() I am getting one more than required."},{"owner":{"account_id":2151840,"reputation":745,"user_id":1908005,"accept_rate":75,"display_name":"M.Baraka"},"score":0,"creation_date":1497267309,"post_id":27063152,"comment_id":75989853,"body_markdown":"haha, you are correct. I totally forgot that position starts at 0, while list.size() starts from 1. That is why it didn&#39;t work. Thanks man","body":"haha, you are correct. I totally forgot that position starts at 0, while list.size() starts from 1. That is why it didn&#39;t work. Thanks man"},{"owner":{"account_id":449201,"reputation":1518,"user_id":843860,"display_name":"CHAN"},"score":1,"creation_date":1561027056,"post_id":27063152,"comment_id":99933961,"body_markdown":"for those with `reverseLayout = true` and `stackFromEnd = true` set, scroll to `0` because it&#39;s the bottom most item.","body":"for those with <code>reverseLayout = true</code> and <code>stackFromEnd = true</code> set, scroll to <code>0</code> because it&#39;s the bottom most item."}],"tags":[],"owner":{"account_id":250813,"reputation":11515,"user_id":2191890,"accept_rate":56,"display_name":"Roc Boronat"},"comment_count":8,"down_vote_count":0,"up_vote_count":444,"is_accepted":false,"score":444,"last_activity_date":1524173683,"creation_date":1416578682,"answer_id":27063152,"question_id":26580723,"body_markdown":"I was looking at this post to find the answer but... I think everyone on this post was facing the same scenario as me: `scrollToPosition()` was fully ignored, for an evident reason.\r\n\r\nWhat I was using?\r\n\r\n    recyclerView.scrollToPosition(items.size());\r\n\r\n... what **WORKED**?\r\n\r\n    recyclerView.scrollToPosition(items.size() - 1);\r\n\r\n","title":"How to scroll to the bottom of a RecyclerView? scrollToPosition doesn&#39;t work","body":"<p>I was looking at this post to find the answer but... I think everyone on this post was facing the same scenario as me: <code>scrollToPosition()</code> was fully ignored, for an evident reason.</p>\n\n<p>What I was using?</p>\n\n<pre><code>recyclerView.scrollToPosition(items.size());\n</code></pre>\n\n<p>... what <strong>WORKED</strong>?</p>\n\n<pre><code>recyclerView.scrollToPosition(items.size() - 1);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3148517,"reputation":1165,"user_id":2662474,"display_name":"joseph"},"score":165,"creation_date":1432032451,"post_id":27069845,"comment_id":48741437,"body_markdown":"This might be something userful, but it does not seem to answer the question that was asked.","body":"This might be something userful, but it does not seem to answer the question that was asked."},{"owner":{"account_id":4185739,"reputation":2790,"user_id":3429542,"display_name":"Neige"},"score":0,"creation_date":1440753197,"post_id":27069845,"comment_id":52413624,"body_markdown":"Useful to create chat interface !","body":"Useful to create chat interface !"},{"owner":{"account_id":2716336,"reputation":2160,"user_id":2343626,"accept_rate":80,"display_name":"Luccas Correa"},"score":6,"creation_date":1453481717,"post_id":27069845,"comment_id":57635563,"body_markdown":"If you set both stackFromEnd=true and setReverseLayout=true it doesn&#39;t work. Does anyone know any workaround?","body":"If you set both stackFromEnd=true and setReverseLayout=true it doesn&#39;t work. Does anyone know any workaround?"},{"owner":{"account_id":224471,"reputation":820,"user_id":2633456,"accept_rate":67,"display_name":"Muneeb Mirza"},"score":12,"creation_date":1463657864,"post_id":27069845,"comment_id":62163408,"body_markdown":"For chat view linearLayoutManager.setStackFromEnd(true) works.","body":"For chat view linearLayoutManager.setStackFromEnd(true) works."},{"owner":{"account_id":4856186,"reputation":3015,"user_id":3917064,"accept_rate":22,"display_name":"Orbit"},"score":8,"creation_date":1466653193,"post_id":27069845,"comment_id":63408975,"body_markdown":"This does not address the question at all.","body":"This does not address the question at all."},{"owner":{"account_id":5822752,"reputation":1801,"user_id":6080790,"accept_rate":58,"display_name":"Angga Ari Wijaya"},"score":0,"creation_date":1473748585,"post_id":27069845,"comment_id":66247669,"body_markdown":"how about the scroll listener when setReverseLayout is true? does it also reverse?","body":"how about the scroll listener when setReverseLayout is true? does it also reverse?"},{"owner":{"account_id":1668855,"reputation":14404,"user_id":2700303,"accept_rate":63,"display_name":"MiguelSlv"},"score":3,"creation_date":1514644926,"post_id":27069845,"comment_id":83039808,"body_markdown":"Only works until the view is full. It doesn&#39;t intent scroll, just stack from the bottom.","body":"Only works until the view is full. It doesn&#39;t intent scroll, just stack from the bottom."},{"owner":{"account_id":1667128,"reputation":659,"user_id":1534316,"accept_rate":69,"display_name":"Mostafa Imran"},"score":0,"creation_date":1690782597,"post_id":27069845,"comment_id":135395533,"body_markdown":"This can&#39;t be the proper answer to the question. This is a recyclerview issue.","body":"This can&#39;t be the proper answer to the question. This is a recyclerview issue."}],"tags":[],"owner":{"account_id":301114,"reputation":37863,"user_id":608649,"display_name":"yigit"},"comment_count":8,"down_vote_count":25,"up_vote_count":251,"is_accepted":true,"score":226,"last_activity_date":1468322684,"creation_date":1416601964,"answer_id":27069845,"question_id":26580723,"body_markdown":"Just set **`setStackFromEnd=true`** or **`setReverseLayout=true`** so that LLM will layout items from end.\r\n\r\nThe difference between these two is that `setStackFromEnd` will set the view to show the last element, the layout direction will remain the same. (So, in an left-to-right horizontal Recycler View, the last element will be shown and scrolling to the left will show the earlier elements)\r\n\r\nWhereas `setReverseLayout` will change the order of the elements added by the Adapter. The layout will start from the last element, which will be the left-most in an LTR Recycler View and then, scrolling to the right will show the earlier elements.\r\n\r\nSample:\r\n\r\n\tfinal LinearLayoutManager linearLayoutManager = new LinearLayoutManager(getActivity());\r\n\tlinearLayoutManager.setReverseLayout(true);\r\n\t_listView.setLayoutManager(linearLayoutManager);\r\n\r\nSee [documentation][1] for details.\r\n\r\n\r\n  [1]: https://developer.android.com/reference/android/support/v7/widget/LinearLayoutManager.html#setReverseLayout(boolean)","title":"How to scroll to the bottom of a RecyclerView? scrollToPosition doesn&#39;t work","body":"<p>Just set <strong><code>setStackFromEnd=true</code></strong> or <strong><code>setReverseLayout=true</code></strong> so that LLM will layout items from end.</p>\n\n<p>The difference between these two is that <code>setStackFromEnd</code> will set the view to show the last element, the layout direction will remain the same. (So, in an left-to-right horizontal Recycler View, the last element will be shown and scrolling to the left will show the earlier elements)</p>\n\n<p>Whereas <code>setReverseLayout</code> will change the order of the elements added by the Adapter. The layout will start from the last element, which will be the left-most in an LTR Recycler View and then, scrolling to the right will show the earlier elements.</p>\n\n<p>Sample:</p>\n\n<pre><code>final LinearLayoutManager linearLayoutManager = new LinearLayoutManager(getActivity());\nlinearLayoutManager.setReverseLayout(true);\n_listView.setLayoutManager(linearLayoutManager);\n</code></pre>\n\n<p>See <a href=\"https://developer.android.com/reference/android/support/v7/widget/LinearLayoutManager.html#setReverseLayout(boolean)\" rel=\"noreferrer\">documentation</a> for details.</p>\n"},{"comments":[{"owner":{"account_id":22280456,"reputation":76,"user_id":16508913,"display_name":"Gemeaux"},"score":0,"creation_date":1673370146,"post_id":33516129,"comment_id":132481459,"body_markdown":"Thanks. Adding the delay solved the issue I was having. I have a recyclerview (which can expand and collapse) inside another recyclerview. The expand/collapse animation is 300ms so I just needed to add that delay. But for smoother scroll I used smoothScrollToPosition instead.","body":"Thanks. Adding the delay solved the issue I was having. I have a recyclerview (which can expand and collapse) inside another recyclerview. The expand/collapse animation is 300ms so I just needed to add that delay. But for smoother scroll I used smoothScrollToPosition instead."}],"tags":[],"owner":{"account_id":6549218,"reputation":2535,"user_id":5064151,"display_name":"Muhammad Umair Shafique"},"comment_count":1,"down_vote_count":0,"up_vote_count":45,"is_accepted":false,"score":45,"last_activity_date":1625837915,"creation_date":1446622434,"answer_id":33516129,"question_id":26580723,"body_markdown":"To scrolldown from any position in the recyclerview to bottom\r\n\r\n**Kotlin**\r\n\r\n    editText.setOnClickListener {\r\n        rv.postDelayed({                 \r\n            rv.scrollToPosition(rv.adapter.itemCount - 1)\r\n        }, 1000)\r\n    }\r\n\r\n\r\n**Java**\r\n    \r\n    edittext.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    rv.postDelayed(new Runnable() {\r\n                        @Override\r\n                        public void run() {\r\n                          rv.scrollToPosition(rv.getAdapter().getItemCount() - 1);\r\n                        }\r\n                    }, 1000);\r\n                }\r\n            });","title":"How to scroll to the bottom of a RecyclerView? scrollToPosition doesn&#39;t work","body":"<p>To scrolldown from any position in the recyclerview to bottom</p>\n<p><strong>Kotlin</strong></p>\n<pre><code>editText.setOnClickListener {\n    rv.postDelayed({                 \n        rv.scrollToPosition(rv.adapter.itemCount - 1)\n    }, 1000)\n}\n</code></pre>\n<p><strong>Java</strong></p>\n<pre><code>edittext.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                rv.postDelayed(new Runnable() {\n                    @Override\n                    public void run() {\n                      rv.scrollToPosition(rv.getAdapter().getItemCount() - 1);\n                    }\n                }, 1000);\n            }\n        });\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1033959,"reputation":7183,"user_id":1041723,"accept_rate":40,"display_name":"Berť&#225;k"},"score":8,"creation_date":1480584031,"post_id":37719465,"comment_id":69025898,"body_markdown":"It should be `conversationView.smoothScrollToPosition(conversationView.getAdapter().getItemCount() **-1**);` as positions in lists are zero-based.","body":"It should be <code>conversationView.smoothScrollToPosition(conversationView.get&zwnj;&#8203;Adapter().getItemCou&zwnj;&#8203;nt() **-1**);</code> as positions in lists are zero-based."},{"owner":{"account_id":1510680,"reputation":1709,"user_id":1412900,"accept_rate":33,"display_name":"Anuj Jindal"},"score":3,"creation_date":1484547690,"post_id":37719465,"comment_id":70538705,"body_markdown":"This wont help if height of last row is more then screen height.","body":"This wont help if height of last row is more then screen height."},{"owner":{"account_id":8432248,"reputation":771,"user_id":6327554,"accept_rate":60,"display_name":"Marc Alexander"},"score":0,"creation_date":1551905166,"post_id":37719465,"comment_id":96816348,"body_markdown":"This is what I needed. Although I had to wrap it in a handler postdelay to get everything working correctly.","body":"This is what I needed. Although I had to wrap it in a handler postdelay to get everything working correctly."}],"tags":[],"owner":{"account_id":8429620,"reputation":701,"user_id":6325805,"display_name":"WritingForAnroid"},"comment_count":3,"down_vote_count":0,"up_vote_count":61,"is_accepted":false,"score":61,"last_activity_date":1505168832,"creation_date":1465457280,"answer_id":37719465,"question_id":26580723,"body_markdown":"I know its late to answer here, still if anybody want to know solution is below\r\n\r\n    conversationView.smoothScrollToPosition(conversationView.getAdapter().getItemCount() - 1);\r\n\r\n\r\n","title":"How to scroll to the bottom of a RecyclerView? scrollToPosition doesn&#39;t work","body":"<p>I know its late to answer here, still if anybody want to know solution is below</p>\n\n<pre><code>conversationView.smoothScrollToPosition(conversationView.getAdapter().getItemCount() - 1);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9360863,"reputation":620,"user_id":6947235,"accept_rate":50,"display_name":"Anky An"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1492775329,"creation_date":1492775329,"answer_id":43541967,"question_id":26580723,"body_markdown":"Only Ian&#39;s answer was able to make my `RecyclerView` scroll to a specified position. However, The `RecyclerView` was not able to scroll afterwards when I used `scrollToPosition()`. `smoothScrollToPosition()` worked but the initial animation made it too slow when the list was long. \r\nThe reason was the listener was not removed. I used the code below to remove the current `ViewTreeObserver` and it worked as a charm.\r\n\r\n        mRecyclerView.getViewTreeObserver().addOnGlobalLayoutListener(new ViewTreeObserver.OnGlobalLayoutListener() {\r\n            @Override\r\n            public void onGlobalLayout() {\r\n                mRecyclerView.scrollToPosition(mPosition);\r\n                mRecyclerView.getViewTreeObserver().removeOnGlobalLayoutListener(this);\r\n            }\r\n        });\r\n\r\n","title":"How to scroll to the bottom of a RecyclerView? scrollToPosition doesn&#39;t work","body":"<p>Only Ian's answer was able to make my <code>RecyclerView</code> scroll to a specified position. However, The <code>RecyclerView</code> was not able to scroll afterwards when I used <code>scrollToPosition()</code>. <code>smoothScrollToPosition()</code> worked but the initial animation made it too slow when the list was long. \nThe reason was the listener was not removed. I used the code below to remove the current <code>ViewTreeObserver</code> and it worked as a charm.</p>\n\n<pre><code>    mRecyclerView.getViewTreeObserver().addOnGlobalLayoutListener(new ViewTreeObserver.OnGlobalLayoutListener() {\n        @Override\n        public void onGlobalLayout() {\n            mRecyclerView.scrollToPosition(mPosition);\n            mRecyclerView.getViewTreeObserver().removeOnGlobalLayoutListener(this);\n        }\n    });\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3661982,"reputation":3096,"user_id":3051503,"display_name":"Muhaiminur Rahman"},"score":0,"creation_date":1659264725,"post_id":44159312,"comment_id":129249060,"body_markdown":"well. thats a good answer","body":"well. thats a good answer"}],"tags":[],"owner":{"account_id":392231,"reputation":81,"user_id":3363817,"display_name":"Wasim Amin"},"comment_count":1,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1495633428,"creation_date":1495631227,"answer_id":44159312,"question_id":26580723,"body_markdown":"IF you have adapter attached with recyclerView then just do this.\r\n\r\n   \r\n   \r\n   \r\n `mRecyclerView.smoothScrollToPosition(mRecyclerView.getAdapter().getItemCount());`","title":"How to scroll to the bottom of a RecyclerView? scrollToPosition doesn&#39;t work","body":"<p>IF you have adapter attached with recyclerView then just do this.</p>\n\n<p><code>mRecyclerView.smoothScrollToPosition(mRecyclerView.getAdapter().getItemCount());</code></p>\n"},{"tags":[],"owner":{"account_id":4865394,"reputation":1989,"user_id":3923839,"accept_rate":75,"display_name":"abedfar"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1498507840,"creation_date":1498507840,"answer_id":44767901,"question_id":26580723,"body_markdown":"Roc answer is a great help. I would like to add a small block to it:\r\n\r\n    mRecyclerView.scrollToPosition(mAdapter.getItemCount() - 1);","title":"How to scroll to the bottom of a RecyclerView? scrollToPosition doesn&#39;t work","body":"<p>Roc answer is a great help. I would like to add a small block to it:</p>\n\n<pre><code>mRecyclerView.scrollToPosition(mAdapter.getItemCount() - 1);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9823775,"reputation":543,"user_id":7277557,"display_name":"amaresh hiremani"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1500477272,"creation_date":1500475629,"answer_id":45194064,"question_id":26580723,"body_markdown":"This works perfectly fine for me:\r\n    \r\n    AdapterChart adapterChart = new AdapterChart(getContext(),messageList);\r\n    recyclerView.setAdapter(adapterChart);\r\n    recyclerView.scrollToPosition(recyclerView.getAdapter().getItemCount()-1);\r\n","title":"How to scroll to the bottom of a RecyclerView? scrollToPosition doesn&#39;t work","body":"<p>This works perfectly fine for me:</p>\n\n<pre><code>AdapterChart adapterChart = new AdapterChart(getContext(),messageList);\nrecyclerView.setAdapter(adapterChart);\nrecyclerView.scrollToPosition(recyclerView.getAdapter().getItemCount()-1);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":440244,"reputation":3289,"user_id":829711,"accept_rate":85,"display_name":"galex"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1517403683,"creation_date":1517403683,"answer_id":48542833,"question_id":26580723,"body_markdown":"In my case where views do not have the same height, calling [**scrollToPosition on the LayoutManager**][1] worked to really scroll to the bottom and see fully the last item:\r\n\r\n    recycler.getLayoutManager().scrollToPosition(adapter.getItemCount() - 1);\r\n\r\n\r\n  [1]: https://developer.android.com/reference/android/support/v7/widget/LinearLayoutManager.html#scrollToPosition(int)","title":"How to scroll to the bottom of a RecyclerView? scrollToPosition doesn&#39;t work","body":"<p>In my case where views do not have the same height, calling <a href=\"https://developer.android.com/reference/android/support/v7/widget/LinearLayoutManager.html#scrollToPosition(int)\" rel=\"nofollow noreferrer\"><strong>scrollToPosition on the LayoutManager</strong></a> worked to really scroll to the bottom and see fully the last item:</p>\n\n<pre><code>recycler.getLayoutManager().scrollToPosition(adapter.getItemCount() - 1);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3482475,"reputation":27250,"user_id":2914140,"accept_rate":69,"display_name":"CoolMind"},"score":0,"creation_date":1558543537,"post_id":48614054,"comment_id":99139555,"body_markdown":"Hah, thanks for `GlobalLayoutListener`! After refactoring I had to use your method to scroll. Don&#39;t forget to remove the listener like in https://stackoverflow.com/questions/28264139/view-getviewtreeobserver-addongloballayoutlistener-leaks-fragment, or you won&#39;t scroll RecyclerView back to beginning.","body":"Hah, thanks for <code>GlobalLayoutListener</code>! After refactoring I had to use your method to scroll. Don&#39;t forget to remove the listener like in <a href=\"https://stackoverflow.com/questions/28264139/view-getviewtreeobserver-addongloballayoutlistener-leaks-fragment\" title=\"view getviewtreeobserver addongloballayoutlistener leaks fragment\">stackoverflow.com/questions/28264139/&hellip;</a>, or you won&#39;t scroll RecyclerView back to beginning."}],"tags":[],"owner":{"account_id":8429,"reputation":56686,"user_id":15187,"accept_rate":96,"display_name":"yanchenko"},"comment_count":1,"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1517786904,"creation_date":1517786904,"answer_id":48614054,"question_id":26580723,"body_markdown":"In Kotlin:\r\n\r\n    recyclerView.viewTreeObserver.addOnGlobalLayoutListener { scrollToEnd() }\r\n    \r\n    private fun scrollToEnd() =\r\n    \t\t(adapter.itemCount - 1).takeIf { it &gt; 0 }?.let(recyclerView::smoothScrollToPosition)","title":"How to scroll to the bottom of a RecyclerView? scrollToPosition doesn&#39;t work","body":"<p>In Kotlin:</p>\n\n<pre><code>recyclerView.viewTreeObserver.addOnGlobalLayoutListener { scrollToEnd() }\n\nprivate fun scrollToEnd() =\n        (adapter.itemCount - 1).takeIf { it &gt; 0 }?.let(recyclerView::smoothScrollToPosition)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9171232,"reputation":119,"user_id":9628146,"display_name":"hasanga lakdinu"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1523415684,"creation_date":1523415684,"answer_id":49765812,"question_id":26580723,"body_markdown":" this code will give you latest post first, i think this answer is helpful. \r\n\r\n        mInstaList=(RecyclerView)findViewById(R.id.insta_list);\r\n        mInstaList.setHasFixedSize(true);\r\n       \r\n        LinearLayoutManager layoutManager = new LinearLayoutManager(this);\r\n        layoutManager.setOrientation(LinearLayoutManager.VERTICAL);\r\n\r\n        mInstaList.setLayoutManager(layoutManager);\r\n        layoutManager.setStackFromEnd(true);\r\n        layoutManager.setReverseLayout(true);","title":"How to scroll to the bottom of a RecyclerView? scrollToPosition doesn&#39;t work","body":"<p>this code will give you latest post first, i think this answer is helpful. </p>\n\n<pre><code>    mInstaList=(RecyclerView)findViewById(R.id.insta_list);\n    mInstaList.setHasFixedSize(true);\n\n    LinearLayoutManager layoutManager = new LinearLayoutManager(this);\n    layoutManager.setOrientation(LinearLayoutManager.VERTICAL);\n\n    mInstaList.setLayoutManager(layoutManager);\n    layoutManager.setStackFromEnd(true);\n    layoutManager.setReverseLayout(true);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9138695,"reputation":1262,"user_id":6797400,"display_name":"Shubham Agrawal"},"comment_count":0,"down_vote_count":1,"up_vote_count":18,"is_accepted":false,"score":17,"last_activity_date":1545487824,"creation_date":1530875515,"answer_id":51209140,"question_id":26580723,"body_markdown":"Add this code after sending message and before getting message from server\r\n\r\n    recyclerView.scrollToPosition(mChatList.size() - 1);\r\n\r\n","title":"How to scroll to the bottom of a RecyclerView? scrollToPosition doesn&#39;t work","body":"<p>Add this code after sending message and before getting message from server</p>\n\n<pre><code>recyclerView.scrollToPosition(mChatList.size() - 1);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1797509,"reputation":2459,"user_id":1636610,"accept_rate":20,"display_name":"AbhinayMe"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1540973604,"creation_date":1540973604,"answer_id":53078933,"question_id":26580723,"body_markdown":"Solution for **Kotlin**:\r\n\r\napply below code after setting &quot;recyclerView.adapter&quot; or after &quot;recyclerView.adapter.notifyDataSetChanged()&quot;\r\n\r\n    recyclerView.scrollToPosition(recyclerView.adapter.itemCount - 1)","title":"How to scroll to the bottom of a RecyclerView? scrollToPosition doesn&#39;t work","body":"<p>Solution for <strong>Kotlin</strong>:</p>\n\n<p>apply below code after setting \"recyclerView.adapter\" or after \"recyclerView.adapter.notifyDataSetChanged()\"</p>\n\n<pre><code>recyclerView.scrollToPosition(recyclerView.adapter.itemCount - 1)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3482475,"reputation":27250,"user_id":2914140,"accept_rate":69,"display_name":"CoolMind"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1558596454,"creation_date":1558544066,"answer_id":56261684,"question_id":26580723,"body_markdown":"Tried a method of [@galex][1], it worked until refactoring. So I used an answer of [@yanchenko][2] and changed a bit. Probably this is because I called scrolling from `onCreateView()`, where a fragment view was built (and probably didn&#39;t have right size).\r\n\r\n    private fun scrollPhotosToEnd(view: View) {\r\n        view.recycler_view.viewTreeObserver.addOnGlobalLayoutListener(object :\r\n            ViewTreeObserver.OnGlobalLayoutListener {\r\n            override fun onGlobalLayout() {\r\n                if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.JELLY_BEAN) {\r\n                    view.recycler_view.viewTreeObserver.removeOnGlobalLayoutListener(this)\r\n                } else {\r\n                    @Suppress(&quot;DEPRECATION&quot;)\r\n                    view.recycler_view.viewTreeObserver.removeGlobalOnLayoutListener(this)\r\n                }\r\n                adapter?.itemCount?.takeIf { it &gt; 0 }?.let {\r\n                    view.recycler_view.scrollToPosition(it - 1)\r\n                }\r\n            }\r\n        })\r\n    }\r\n\r\nYou can also add a check of `viewTreeObserver.isAlive` like in https://stackoverflow.com/a/39001731/2914140.\r\n\r\n  [1]: https://stackoverflow.com/a/48542833/2914140\r\n  [2]: https://stackoverflow.com/a/48614054/2914140","title":"How to scroll to the bottom of a RecyclerView? scrollToPosition doesn&#39;t work","body":"<p>Tried a method of <a href=\"https://stackoverflow.com/a/48542833/2914140\">@galex</a>, it worked until refactoring. So I used an answer of <a href=\"https://stackoverflow.com/a/48614054/2914140\">@yanchenko</a> and changed a bit. Probably this is because I called scrolling from <code>onCreateView()</code>, where a fragment view was built (and probably didn't have right size).</p>\n\n<pre><code>private fun scrollPhotosToEnd(view: View) {\n    view.recycler_view.viewTreeObserver.addOnGlobalLayoutListener(object :\n        ViewTreeObserver.OnGlobalLayoutListener {\n        override fun onGlobalLayout() {\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.JELLY_BEAN) {\n                view.recycler_view.viewTreeObserver.removeOnGlobalLayoutListener(this)\n            } else {\n                @Suppress(\"DEPRECATION\")\n                view.recycler_view.viewTreeObserver.removeGlobalOnLayoutListener(this)\n            }\n            adapter?.itemCount?.takeIf { it &gt; 0 }?.let {\n                view.recycler_view.scrollToPosition(it - 1)\n            }\n        }\n    })\n}\n</code></pre>\n\n<p>You can also add a check of <code>viewTreeObserver.isAlive</code> like in <a href=\"https://stackoverflow.com/a/39001731/2914140\">https://stackoverflow.com/a/39001731/2914140</a>.</p>\n"},{"tags":[],"owner":{"account_id":10660314,"reputation":648,"user_id":7848471,"display_name":"Dishant Kawatra"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1573822238,"creation_date":1559754751,"answer_id":56465126,"question_id":26580723,"body_markdown":"First time scroll when entering in recycler view first time then use \r\n\r\n    linearLayoutManager.scrollToPositionWithOffset(messageHashMap.size()-1\r\n\r\nput in minus for scroll down for scroll up put in positive value);\r\n        \r\n   if the view is very big in height then scrolltoposition particular offset is used for the top of view then you use \r\n    \r\n  \r\n\r\n    int overallXScroldl =chatMessageBinding.rvChat.computeVerticalScrollOffset();\r\n    chatMessageBinding.rvChat.smoothScrollBy(0, Math.abs(overallXScroldl));","title":"How to scroll to the bottom of a RecyclerView? scrollToPosition doesn&#39;t work","body":"<p>First time scroll when entering in recycler view first time then use </p>\n\n<pre><code>linearLayoutManager.scrollToPositionWithOffset(messageHashMap.size()-1\n</code></pre>\n\n<p>put in minus for scroll down for scroll up put in positive value);</p>\n\n<p>if the view is very big in height then scrolltoposition particular offset is used for the top of view then you use </p>\n\n<pre><code>int overallXScroldl =chatMessageBinding.rvChat.computeVerticalScrollOffset();\nchatMessageBinding.rvChat.smoothScrollBy(0, Math.abs(overallXScroldl));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16430171,"reputation":408,"user_id":11869227,"display_name":"Arnaud"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1592787317,"creation_date":1592787317,"answer_id":62506029,"question_id":26580723,"body_markdown":"If none of these worked,\r\n\r\nyou should try to use :\r\n\r\n\r\n    ConstraintLayout targetView = (ConstraintLayout) recyclerView.findViewHolderForAdapterPosition(adapter.getItemCount()-1).itemView;\r\n    targetView.getParent().requestChildFocus(targetView, targetView);\r\n\r\nBy doing this, you are requesting a certain ConstraintLayout (Or whatever you have) to be displayed. The scroll is instant.\r\n\r\nI works even with keyboard shown.","title":"How to scroll to the bottom of a RecyclerView? scrollToPosition doesn&#39;t work","body":"<p>If none of these worked,</p>\n<p>you should try to use :</p>\n<pre><code>ConstraintLayout targetView = (ConstraintLayout) recyclerView.findViewHolderForAdapterPosition(adapter.getItemCount()-1).itemView;\ntargetView.getParent().requestChildFocus(targetView, targetView);\n</code></pre>\n<p>By doing this, you are requesting a certain ConstraintLayout (Or whatever you have) to be displayed. The scroll is instant.</p>\n<p>I works even with keyboard shown.</p>\n"},{"tags":[],"owner":{"account_id":15970785,"reputation":105,"user_id":11524988,"display_name":"Evgenii"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1600803493,"creation_date":1600803493,"answer_id":64016633,"question_id":26580723,"body_markdown":"You must hide `AppBarLayout` before `scrollToPosition` if you are using him","title":"How to scroll to the bottom of a RecyclerView? scrollToPosition doesn&#39;t work","body":"<p>You must hide <code>AppBarLayout</code> before <code>scrollToPosition</code> if you are using him</p>\n"},{"tags":[],"owner":{"account_id":13717415,"reputation":1385,"user_id":9898251,"display_name":"Badri Paudel"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1609959711,"creation_date":1609959711,"answer_id":65601849,"question_id":26580723,"body_markdown":"The answer is \r\n \r\n\r\n    recyclerView.scrollToPosition(arrayList.size() - 1);\r\n\r\nEveryone has mentioned it. \r\n\r\n**But the** **problem** I was facing was that it was **not placed correctly**. \r\n\r\nI tried and placed just after the `adapter.notifyDataSetChanged();` and it worked. \r\nWhenever, data in your recycler view changes, it automatically scrolls to the bottom like after sending messages or you open the chat list for the first time.  \r\n\r\nNote : This code was tasted in Java.\r\n\r\nactual code for me was : \r\n\r\n    //scroll to bottom after sending message.\r\n    binding.chatRecyclerView.scrollToPosition(messageArrayList.size() - 1);","title":"How to scroll to the bottom of a RecyclerView? scrollToPosition doesn&#39;t work","body":"<p>The answer is</p>\n<pre><code>recyclerView.scrollToPosition(arrayList.size() - 1);\n</code></pre>\n<p>Everyone has mentioned it.</p>\n<p><strong>But the</strong> <strong>problem</strong> I was facing was that it was <strong>not placed correctly</strong>.</p>\n<p>I tried and placed just after the <code>adapter.notifyDataSetChanged();</code> and it worked.\nWhenever, data in your recycler view changes, it automatically scrolls to the bottom like after sending messages or you open the chat list for the first time.</p>\n<p>Note : This code was tasted in Java.</p>\n<p>actual code for me was :</p>\n<pre><code>//scroll to bottom after sending message.\nbinding.chatRecyclerView.scrollToPosition(messageArrayList.size() - 1);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4040067,"reputation":239,"user_id":3323206,"display_name":"Zahid Ali"},"score":0,"creation_date":1616938594,"post_id":65990642,"comment_id":118153459,"body_markdown":"the layoutManger doesn&#39;t have property of scrollToPositionWithOffset","body":"the layoutManger doesn&#39;t have property of scrollToPositionWithOffset"},{"owner":{"account_id":5009087,"reputation":121,"user_id":4025848,"display_name":"jiong103"},"score":0,"creation_date":1623825995,"post_id":65990642,"comment_id":120184933,"body_markdown":"@ZahidAli   you can see scrollToPositionWithOffset method in  LinearLayoutManager.java","body":"@ZahidAli   you can see scrollToPositionWithOffset method in  LinearLayoutManager.java"},{"owner":{"account_id":19405192,"reputation":855,"user_id":14190819,"display_name":"Ammar"},"score":0,"creation_date":1701264377,"post_id":65990642,"comment_id":136753854,"body_markdown":"The improved code with `LinearSmoothScroller` ensures a smooth scroll to the bottom of the `RecyclerView`, irrespective of the view&#39;s height or the top edge of the last item. It consistently reaches the list&#39;s end, offering a smoother user experience.","body":"The improved code with <code>LinearSmoothScroller</code> ensures a smooth scroll to the bottom of the <code>RecyclerView</code>, irrespective of the view&#39;s height or the top edge of the last item. It consistently reaches the list&#39;s end, offering a smoother user experience."}],"tags":[],"owner":{"account_id":5009087,"reputation":121,"user_id":4025848,"display_name":"jiong103"},"comment_count":3,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1612173651,"creation_date":1612173651,"answer_id":65990642,"question_id":26580723,"body_markdown":"  You can scroll to the bottom of the last item, if the height of the last item is too large, you need to offset \r\n\r\n     private void scrollToBottom(final RecyclerView recyclerView) {\r\n            // scroll to last item to get the view of last item\r\n            final LinearLayoutManager layoutManager = (LinearLayoutManager) recyclerView.getLayoutManager();\r\n            final RecyclerView.Adapter adapter = recyclerView.getAdapter();\r\n            final int lastItemPosition = adapter.getItemCount() - 1;\r\n        \r\n            layoutManager.scrollToPositionWithOffset(lastItemPosition, 0);\r\n            recyclerView.post(new Runnable() {\r\n                @Override\r\n                public void run() {\r\n                    // then scroll to specific offset\r\n                    View target = layoutManager.findViewByPosition(lastItemPosition);\r\n                    if (target != null) {\r\n                        int offset = recyclerView.getMeasuredHeight() - target.getMeasuredHeight();\r\n                        layoutManager.scrollToPositionWithOffset(lastItemPosition, offset);\r\n                    }\r\n                }\r\n            });\r\n    \r\n    \r\n    \r\n        }","title":"How to scroll to the bottom of a RecyclerView? scrollToPosition doesn&#39;t work","body":"<p>You can scroll to the bottom of the last item, if the height of the last item is too large, you need to offset</p>\n<pre><code> private void scrollToBottom(final RecyclerView recyclerView) {\n        // scroll to last item to get the view of last item\n        final LinearLayoutManager layoutManager = (LinearLayoutManager) recyclerView.getLayoutManager();\n        final RecyclerView.Adapter adapter = recyclerView.getAdapter();\n        final int lastItemPosition = adapter.getItemCount() - 1;\n    \n        layoutManager.scrollToPositionWithOffset(lastItemPosition, 0);\n        recyclerView.post(new Runnable() {\n            @Override\n            public void run() {\n                // then scroll to specific offset\n                View target = layoutManager.findViewByPosition(lastItemPosition);\n                if (target != null) {\n                    int offset = recyclerView.getMeasuredHeight() - target.getMeasuredHeight();\n                    layoutManager.scrollToPositionWithOffset(lastItemPosition, offset);\n                }\n            }\n        });\n\n\n\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11973176,"reputation":41,"user_id":8761109,"display_name":"Panagiotis Tzelalis"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1613167173,"creation_date":1613167173,"answer_id":66179581,"question_id":26580723,"body_markdown":"If you want just starting from the end use:\r\n\r\n\r\n    layoutManager.stackFromEnd = true\r\n\r\n(Kotlin solution) ","title":"How to scroll to the bottom of a RecyclerView? scrollToPosition doesn&#39;t work","body":"<p>If you want just starting from the end use:</p>\n<pre><code>layoutManager.stackFromEnd = true\n</code></pre>\n<p>(Kotlin solution)</p>\n"},{"tags":[],"owner":{"account_id":15736708,"reputation":434,"user_id":11355432,"display_name":"Ismail Osunlana"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1615680859,"creation_date":1615680859,"answer_id":66619839,"question_id":26580723,"body_markdown":"If you are having issues making recyclerview scroll to the latest, check that the recyclerview is not inside a nestedScrollView. That was my issue. I had to remove the nestedScrollview and then the below code worked.\r\n\r\n    binding.recyclerView.scrollToPosition(adapter.getItemCount() - 1);","title":"How to scroll to the bottom of a RecyclerView? scrollToPosition doesn&#39;t work","body":"<p>If you are having issues making recyclerview scroll to the latest, check that the recyclerview is not inside a nestedScrollView. That was my issue. I had to remove the nestedScrollview and then the below code worked.</p>\n<pre><code>binding.recyclerView.scrollToPosition(adapter.getItemCount() - 1);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20228607,"reputation":11,"user_id":14835786,"display_name":"Nauman Ansari"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1625846811,"creation_date":1625846811,"answer_id":68319796,"question_id":26580723,"body_markdown":"I know this is too late but this worked for me so that i am answering this question\r\n\r\nfirst,\r\n\r\n    LinearLayoutManager layoutManager=new LinearLayoutManager(this);\r\n    layoutManager.setStackFromEnd(true);\r\n    recyclerView.setLayoutManager(layoutManager);\r\nafter that,\r\n\r\n    database.addValueEventListener(....){\r\n    @override\r\n    public void onDataCange(...){\r\n    ....\r\n    ....\r\n    //put this line here\r\n    recyclerView.smoothScrollToPosition(recyclerView.getAdapter().getItemCount()-1);\r\n    }\r\n    }","title":"How to scroll to the bottom of a RecyclerView? scrollToPosition doesn&#39;t work","body":"<p>I know this is too late but this worked for me so that i am answering this question</p>\n<p>first,</p>\n<pre><code>LinearLayoutManager layoutManager=new LinearLayoutManager(this);\nlayoutManager.setStackFromEnd(true);\nrecyclerView.setLayoutManager(layoutManager);\n</code></pre>\n<p>after that,</p>\n<pre><code>database.addValueEventListener(....){\n@override\npublic void onDataCange(...){\n....\n....\n//put this line here\nrecyclerView.smoothScrollToPosition(recyclerView.getAdapter().getItemCount()-1);\n}\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22272840,"reputation":1,"user_id":16502519,"display_name":"Dranisht A"},"comment_count":0,"down_vote_count":4,"up_vote_count":0,"is_accepted":false,"score":-4,"last_activity_date":1626954127,"creation_date":1626954127,"answer_id":68484223,"question_id":26580723,"body_markdown":"use only gravity for easy solution\r\n\r\n android:layout_gravity=&quot;bottom&quot;","title":"How to scroll to the bottom of a RecyclerView? scrollToPosition doesn&#39;t work","body":"<p>use only gravity for easy solution</p>\n<p>android:layout_gravity=&quot;bottom&quot;</p>\n"},{"tags":[],"owner":{"account_id":14397383,"reputation":81,"user_id":10400229,"display_name":"Kiwan Park"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1638411667,"creation_date":1638411667,"answer_id":70193485,"question_id":26580723,"body_markdown":"if you use kotlin, try this\r\n\r\n    conversationView.post {\r\n        scrollToPosition(conversationView?.adapter.itemCount - 1)\r\n    }","title":"How to scroll to the bottom of a RecyclerView? scrollToPosition doesn&#39;t work","body":"<p>if you use kotlin, try this</p>\n<pre><code>conversationView.post {\n    scrollToPosition(conversationView?.adapter.itemCount - 1)\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":988959,"reputation":173,"user_id":1006741,"display_name":"Kibotu"},"score":0,"creation_date":1662398056,"post_id":71209159,"comment_id":129992049,"body_markdown":"the AdapterDataObserver will give you successfully the insert event of data, however this does not imply that the ui is ready to scroll to new positions just yet, because the view you want to scroll to is not available yet","body":"the AdapterDataObserver will give you successfully the insert event of data, however this does not imply that the ui is ready to scroll to new positions just yet, because the view you want to scroll to is not available yet"}],"tags":[],"owner":{"account_id":7643077,"reputation":1276,"user_id":5794571,"display_name":"Aaeb"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645458753,"creation_date":1645458255,"answer_id":71209159,"question_id":26580723,"body_markdown":"If you working with reversedLayout &quot;chat interface&quot; specially if you have images, you can try the following:\r\n\r\nfirst, register DataObserver with the adapter\r\n\r\n       chatAdapter.registerAdapterDataObserver(object : \r\n                             RecyclerView.AdapterDataObserver() {\r\n\r\n       override fun onItemRangeInserted(positionStart: Int itemCount: Int) {\r\n\r\n          val messageCount: Int = chatAdapter.itemCount\r\n\r\n          val lastVisiblePosition: Int =\r\n                layoutManager.findLastCompletelyVisibleItemPosition()\r\n\r\n             if (lastVisiblePosition == -1 || positionStart &lt;= (messageCount - 1)) {\r\n                recyclerView.scrollToPosition(positionStart)\r\n            }\r\n        }\r\n    }) \r\n\r\n\r\nthis will be called once you set the data for the adapter\r\n\r\n\r\n\r\nsecond, you have to add a scroll listener to the recyclerView like this:\r\n\r\n       recyclerView.addOnScrollListener(object \r\n         :RecyclerView.OnScrollListener() {\r\n\r\n           override fun onScrolled(recyclerView: RecyclerView, dx: Int, dy: \r\n              Int) {\r\n                super.onScrolled(recyclerView, dx, dy)\r\n\r\n              val lastVisiblePosition: Int =\r\n                  layoutManager.findLastCompletelyVisibleItemPosition()\r\n            if (lastVisiblePosition != -1 &amp;&amp; lastVisiblePosition &lt; \r\n                    chatAdapter.itemCount - 1) {\r\n                recyclerView.smoothScrollToPosition(0)\r\n            }\r\n        }\r\n    })","title":"How to scroll to the bottom of a RecyclerView? scrollToPosition doesn&#39;t work","body":"<p>If you working with reversedLayout &quot;chat interface&quot; specially if you have images, you can try the following:</p>\n<p>first, register DataObserver with the adapter</p>\n<pre><code>   chatAdapter.registerAdapterDataObserver(object : \n                         RecyclerView.AdapterDataObserver() {\n\n   override fun onItemRangeInserted(positionStart: Int itemCount: Int) {\n\n      val messageCount: Int = chatAdapter.itemCount\n\n      val lastVisiblePosition: Int =\n            layoutManager.findLastCompletelyVisibleItemPosition()\n\n         if (lastVisiblePosition == -1 || positionStart &lt;= (messageCount - 1)) {\n            recyclerView.scrollToPosition(positionStart)\n        }\n    }\n}) \n</code></pre>\n<p>this will be called once you set the data for the adapter</p>\n<p>second, you have to add a scroll listener to the recyclerView like this:</p>\n<pre><code>   recyclerView.addOnScrollListener(object \n     :RecyclerView.OnScrollListener() {\n\n       override fun onScrolled(recyclerView: RecyclerView, dx: Int, dy: \n          Int) {\n            super.onScrolled(recyclerView, dx, dy)\n\n          val lastVisiblePosition: Int =\n              layoutManager.findLastCompletelyVisibleItemPosition()\n        if (lastVisiblePosition != -1 &amp;&amp; lastVisiblePosition &lt; \n                chatAdapter.itemCount - 1) {\n            recyclerView.smoothScrollToPosition(0)\n        }\n    }\n})\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27304743,"reputation":1,"user_id":20820907,"display_name":"Akshay"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675635404,"creation_date":1675406401,"answer_id":75332297,"question_id":26580723,"body_markdown":"use \r\n\r\n```\r\nvideo_frames?.smoothScrollToPosition(pos.toInt())\r\n```\r\n          \r\nthis work for me* \r\n","title":"How to scroll to the bottom of a RecyclerView? scrollToPosition doesn&#39;t work","body":"<p>use</p>\n<pre><code>video_frames?.smoothScrollToPosition(pos.toInt())\n</code></pre>\n<p>this work for me*</p>\n"},{"comments":[{"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"score":1,"creation_date":1693451251,"post_id":77008271,"comment_id":135763696,"body_markdown":"Add it where? And why?","body":"Add it where? And why?"},{"owner":{"account_id":29329924,"reputation":1,"user_id":22471598,"display_name":"Karam J"},"score":0,"creation_date":1693548744,"post_id":77008271,"comment_id":135778209,"body_markdown":"In code which have activity  for RecyclerView postion 0  mean scroll to top","body":"In code which have activity  for RecyclerView postion 0  mean scroll to top"},{"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"score":0,"creation_date":1693571618,"post_id":77008271,"comment_id":135782339,"body_markdown":"So maybe you should specify it in your answer for better understanding.","body":"So maybe you should specify it in your answer for better understanding."}],"tags":[],"owner":{"account_id":29329924,"reputation":1,"user_id":22471598,"display_name":"Karam J"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693577180,"creation_date":1693400328,"answer_id":77008271,"question_id":26580723,"body_markdown":"add this code for scroll to top  mRecyclerView.scrollToPosition(0)","title":"How to scroll to the bottom of a RecyclerView? scrollToPosition doesn&#39;t work","body":"<p>add this code for scroll to top  mRecyclerView.scrollToPosition(0)</p>\n"}],"owner":{"account_id":2695345,"reputation":2101,"user_id":2327567,"accept_rate":75,"display_name":"waylaidwanderer"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":232965,"favorite_count":0,"down_vote_count":1,"up_vote_count":199,"accepted_answer_id":27069845,"answer_count":29,"score":198,"last_activity_date":1693577180,"creation_date":1414379829,"question_id":26580723,"body_markdown":"I&#39;d like to scroll to the bottom of the RecyclerView list after loading the activity.\r\n\r\n    GENERIC_MESSAGE_LIST = (ArrayList) intent.getExtras().getParcelableArrayList(ConversationsAdapter.EXTRA_MESSAGE);\r\n    conversationView = (RecyclerView) findViewById(R.id.list_messages);\r\n    conversationView.setHasFixedSize(true);\r\n    conversationViewLayoutManager = new LinearLayoutManager(this);\r\n    conversationView.setLayoutManager(conversationViewLayoutManager);\r\n    conversationViewAdapter = new ConversationAdapter(GENERIC_MESSAGE_LIST, this);\r\n    conversationView.setAdapter(conversationViewAdapter);\r\n\r\n`conversationView.scrollTo(...)` throws an exception about being not supported in RecyclerView, and `conversationView.scrollToPosition(...)` doesn&#39;t seem to do anything.\r\n\r\nAfter the above block of code, I added\r\n\r\n    conversationView.scrollToPosition(GENERIC_MESSAGE_LIST.size() + 1)\r\n\r\nwhich doesn&#39;t work. There are 30 elements in `GENERIC_MESSAGE_LIST`.","title":"How to scroll to the bottom of a RecyclerView? scrollToPosition doesn&#39;t work","body":"<p>I'd like to scroll to the bottom of the RecyclerView list after loading the activity.</p>\n\n<pre><code>GENERIC_MESSAGE_LIST = (ArrayList) intent.getExtras().getParcelableArrayList(ConversationsAdapter.EXTRA_MESSAGE);\nconversationView = (RecyclerView) findViewById(R.id.list_messages);\nconversationView.setHasFixedSize(true);\nconversationViewLayoutManager = new LinearLayoutManager(this);\nconversationView.setLayoutManager(conversationViewLayoutManager);\nconversationViewAdapter = new ConversationAdapter(GENERIC_MESSAGE_LIST, this);\nconversationView.setAdapter(conversationViewAdapter);\n</code></pre>\n\n<p><code>conversationView.scrollTo(...)</code> throws an exception about being not supported in RecyclerView, and <code>conversationView.scrollToPosition(...)</code> doesn't seem to do anything.</p>\n\n<p>After the above block of code, I added</p>\n\n<pre><code>conversationView.scrollToPosition(GENERIC_MESSAGE_LIST.size() + 1)\n</code></pre>\n\n<p>which doesn't work. There are 30 elements in <code>GENERIC_MESSAGE_LIST</code>.</p>\n"},{"tags":["java","spring-boot","rest","lombok","spring-rest"],"comments":[{"owner":{"account_id":6790343,"reputation":1483,"user_id":5227721,"display_name":"Berk Kurkcuoglu"},"score":1,"creation_date":1591174766,"post_id":62168522,"comment_id":109952016,"body_markdown":"You don&#39;t need Getter and Data at the same time, Data already sets up your getters. Also Entity should be used with Table(name = &quot;table_name&quot;\n) annotation.","body":"You don&#39;t need Getter and Data at the same time, Data already sets up your getters. Also Entity should be used with Table(name = &quot;table_name&quot; ) annotation."},{"owner":{"account_id":124616,"reputation":3792,"user_id":1331935,"display_name":"Jeff"},"score":0,"creation_date":1591370706,"post_id":62168522,"comment_id":110039696,"body_markdown":"You shouldn&#39;t use @Data at all on JPA types since the &#39;toString&#39;, &#39;equals&#39;, and &#39;hashCode&#39; need to be handled properly.   Please see my answer for details https://stackoverflow.com/a/34299054/1331935.","body":"You shouldn&#39;t use @Data at all on JPA types since the &#39;toString&#39;, &#39;equals&#39;, and &#39;hashCode&#39; need to be handled properly.   Please see my answer for details <a href=\"https://stackoverflow.com/a/34299054/1331935\">stackoverflow.com/a/34299054/1331935</a>."}],"answers":[{"tags":[],"owner":{"account_id":4408002,"reputation":751,"user_id":3591785,"accept_rate":80,"display_name":"Tinku"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1591174341,"creation_date":1591174341,"answer_id":62168754,"question_id":62168522,"body_markdown":"need to add Lombok plugin in maven or gradle file link https://stackoverflow.com/questions/42257379/how-to-configure-lombok-with-maven-compiler-plugin.\r\nIf you are  using IDE then need to install Lombok plugin link https://www.baeldung.com/lombok-ide","title":"Spring Boot Rest API Returns Empty JSON Used with Lombok","body":"<p>need to add Lombok plugin in maven or gradle file link <a href=\"https://stackoverflow.com/questions/42257379/how-to-configure-lombok-with-maven-compiler-plugin\">How to configure Lombok with maven-compiler-plugin?</a>.\nIf you are  using IDE then need to install Lombok plugin link <a href=\"https://www.baeldung.com/lombok-ide\" rel=\"nofollow noreferrer\">https://www.baeldung.com/lombok-ide</a></p>\n"},{"comments":[{"owner":{"account_id":6929988,"reputation":193,"user_id":5319817,"display_name":"Tushar Girase"},"score":0,"creation_date":1591178391,"post_id":62169062,"comment_id":109954027,"body_markdown":"Thanks for the answer it helped me to understand the standard implementations.","body":"Thanks for the answer it helped me to understand the standard implementations."},{"owner":{"account_id":10717399,"reputation":5816,"user_id":7887516,"display_name":"Ananthapadmanabhan"},"score":0,"creation_date":1591179621,"post_id":62169062,"comment_id":109954713,"body_markdown":"Are the entities retrieving data from the database ? Does you entity class have any data when being returned from the controller ? Could you share your code .","body":"Are the entities retrieving data from the database ? Does you entity class have any data when being returned from the controller ? Could you share your code ."},{"owner":{"account_id":6929988,"reputation":193,"user_id":5319817,"display_name":"Tushar Girase"},"score":0,"creation_date":1591179907,"post_id":62169062,"comment_id":109954877,"body_markdown":"If I add the getters and setters it works fine. I checked after adding those I was getting the desired output.","body":"If I add the getters and setters it works fine. I checked after adding those I was getting the desired output."},{"owner":{"account_id":124616,"reputation":3792,"user_id":1331935,"display_name":"Jeff"},"score":0,"creation_date":1591370849,"post_id":62169062,"comment_id":110039787,"body_markdown":"You shouldn&#39;t use @Data at all on JPA types since the &#39;toString&#39;, &#39;equals&#39;, and &#39;hashCode&#39; need to be handled properly. Please see my answer for details https://stackoverflow.com/a/34299054/1331935. I will update this answer.","body":"You shouldn&#39;t use @Data at all on JPA types since the &#39;toString&#39;, &#39;equals&#39;, and &#39;hashCode&#39; need to be handled properly. Please see my answer for details <a href=\"https://stackoverflow.com/a/34299054/1331935\">stackoverflow.com/a/34299054/1331935</a>. I will update this answer."}],"tags":[],"owner":{"account_id":10717399,"reputation":5816,"user_id":7887516,"display_name":"Ananthapadmanabhan"},"comment_count":4,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1591371742,"creation_date":1591175276,"answer_id":62169062,"question_id":62168522,"body_markdown":"First of all , In spring it is not a good approach to return the entity object directly from  a controller to be converted to json. Use the DTO approach so that you will always have a DTO object returned from the controller endpoint. This way you will have more control over the type and structure of data you want to retun from the endpoint. \r\n\r\nRead [here][1] about the advantages of using a DTO .\r\n\r\nSecondly, verify that your tables follow the basic `spring jpa` naming conventions or is same as the entity class names if not please add the `@Table(name=&quot;&quot;)` annotation to specify the table name. Check that data is being populated to your entity classes.\r\n\r\n**Remove the `@Data` annotation.** \r\n\r\n`@Data` should not be used on JPA Entities as Entity `toString`, `equals`, and `hashCode` methods need to be authored in a very specific manner. See [here][2] for details.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/36174516/rest-api-dtos-or-not#36175349\r\n  [2]: https://stackoverflow.com/a/34299054/1331935","title":"Spring Boot Rest API Returns Empty JSON Used with Lombok","body":"<p>First of all , In spring it is not a good approach to return the entity object directly from  a controller to be converted to json. Use the DTO approach so that you will always have a DTO object returned from the controller endpoint. This way you will have more control over the type and structure of data you want to retun from the endpoint. </p>\n\n<p>Read <a href=\"https://stackoverflow.com/questions/36174516/rest-api-dtos-or-not#36175349\">here</a> about the advantages of using a DTO .</p>\n\n<p>Secondly, verify that your tables follow the basic <code>spring jpa</code> naming conventions or is same as the entity class names if not please add the <code>@Table(name=\"\")</code> annotation to specify the table name. Check that data is being populated to your entity classes.</p>\n\n<p><strong>Remove the <code>@Data</code> annotation.</strong> </p>\n\n<p><code>@Data</code> should not be used on JPA Entities as Entity <code>toString</code>, <code>equals</code>, and <code>hashCode</code> methods need to be authored in a very specific manner. See <a href=\"https://stackoverflow.com/a/34299054/1331935\">here</a> for details.</p>\n"},{"tags":[],"owner":{"account_id":6929988,"reputation":193,"user_id":5319817,"display_name":"Tushar Girase"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1591180156,"creation_date":1591179838,"answer_id":62170545,"question_id":62168522,"body_markdown":"After searching a lot and looking on the answers to my question found a solution.\r\nIf I run my spring boot app using **java -jar** from cmd it works fine. But not with IDE so issue was with IDE configuration.\r\n\r\nI am using Eclipse IDE\r\n\r\n**Right Click on your project** -&gt; **Properties** \r\n\r\nThen from Properties window \r\n\r\n**Java Compiler** -&gt; **Annotation Processing** -&gt; **Enable Annotation Processing** \r\n\r\nThis option should be checked then annotations gets processed. I followed [https://www.baeldung.com/lombok-ide][1] from Tinku&#39;s answer on this question.\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://www.baeldung.com/lombok-ide\r\n  [2]: https://i.stack.imgur.com/Q69EA.png","title":"Spring Boot Rest API Returns Empty JSON Used with Lombok","body":"<p>After searching a lot and looking on the answers to my question found a solution.\nIf I run my spring boot app using <strong>java -jar</strong> from cmd it works fine. But not with IDE so issue was with IDE configuration.</p>\n\n<p>I am using Eclipse IDE</p>\n\n<p><strong>Right Click on your project</strong> -> <strong>Properties</strong> </p>\n\n<p>Then from Properties window </p>\n\n<p><strong>Java Compiler</strong> -> <strong>Annotation Processing</strong> -> <strong>Enable Annotation Processing</strong> </p>\n\n<p>This option should be checked then annotations gets processed. I followed <a href=\"https://www.baeldung.com/lombok-ide\" rel=\"nofollow noreferrer\">https://www.baeldung.com/lombok-ide</a> from Tinku's answer on this question.</p>\n\n<p><a href=\"https://i.stack.imgur.com/Q69EA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Q69EA.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":20888238,"reputation":21,"user_id":15344291,"display_name":"Florin Zfs"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1615581210,"creation_date":1615581210,"answer_id":66606846,"question_id":62168522,"body_markdown":"If you are using Eclipse check to have Lombok installed: \r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/9KDIf.png","title":"Spring Boot Rest API Returns Empty JSON Used with Lombok","body":"<p>If you are using Eclipse check to have Lombok installed:</p>\n<p><a href=\"https://i.stack.imgur.com/9KDIf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9KDIf.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":24575788,"reputation":1,"user_id":18481617,"display_name":"Acipenser"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693577158,"creation_date":1693576987,"answer_id":77023760,"question_id":62168522,"body_markdown":"I&#39;m using IntelliJ IDEA, but neither enabling the Annotation Processing nor changing my code (e.g. remove @Data) helped me to solve this issue.\r\n\r\nI had added this line to my `build.gradle`\r\n```\r\ncompileOnly &#39;org.projectlombok:lombok:1.18.28&#39;\r\n```\r\nBut I was missing the following one to make it work:\r\n```\r\nannotationProcessor &#39;org.projectlombok:lombok:1.18.28&#39;\r\n```","title":"Spring Boot Rest API Returns Empty JSON Used with Lombok","body":"<p>I'm using IntelliJ IDEA, but neither enabling the Annotation Processing nor changing my code (e.g. remove @Data) helped me to solve this issue.</p>\n<p>I had added this line to my <code>build.gradle</code></p>\n<pre><code>compileOnly 'org.projectlombok:lombok:1.18.28'\n</code></pre>\n<p>But I was missing the following one to make it work:</p>\n<pre><code>annotationProcessor 'org.projectlombok:lombok:1.18.28'\n</code></pre>\n"}],"owner":{"account_id":6929988,"reputation":193,"user_id":5319817,"display_name":"Tushar Girase"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2977,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":62170545,"answer_count":5,"score":2,"last_activity_date":1693577158,"creation_date":1591173503,"question_id":62168522,"body_markdown":"I have Spring Boot Application with Web, JPA, H2, Web, Lombok dependency.\r\nI have entities as follows\r\n\r\n```\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Data\r\n@Entity\r\n@Getter\r\npublic class Book {\r\n\r\n\t@Id\r\n\t@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n\tprivate Long id;\r\n\r\n\t@Column(nullable = false)\r\n\tprivate String name;\r\n\r\n\t@Column(nullable = false)\r\n\tprivate Integer pageCount;\r\n\r\n\t@ManyToOne\r\n\t@JoinColumn(name = &quot;author_id&quot;)\r\n\tprivate Author author;\r\n\r\n}\r\n```\r\n```\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Data\r\n@Entity\r\n@Getter\r\npublic class Author {\r\n\r\n\t@Id\r\n\t@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n\tprivate Long id;\r\n\r\n\t@Column(nullable = false)\r\n\tprivate String firstName;\r\n\r\n\t@Column\r\n\tprivate String lastName;\r\n\r\n}\r\n```\r\nI am getting following JSON in repose for the /books REST endpoint\r\n\r\n```\r\n[\r\n    {},\r\n    {}\r\n]\r\n```\r\nIf I add getters and setters to entity it works fine. How can I get the actual values in response without adding getters setters as I am using @Data annotation","title":"Spring Boot Rest API Returns Empty JSON Used with Lombok","body":"<p>I have Spring Boot Application with Web, JPA, H2, Web, Lombok dependency.\nI have entities as follows</p>\n\n<pre><code>@NoArgsConstructor\n@AllArgsConstructor\n@Data\n@Entity\n@Getter\npublic class Book {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @Column(nullable = false)\n    private String name;\n\n    @Column(nullable = false)\n    private Integer pageCount;\n\n    @ManyToOne\n    @JoinColumn(name = \"author_id\")\n    private Author author;\n\n}\n</code></pre>\n\n<pre><code>@NoArgsConstructor\n@AllArgsConstructor\n@Data\n@Entity\n@Getter\npublic class Author {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @Column(nullable = false)\n    private String firstName;\n\n    @Column\n    private String lastName;\n\n}\n</code></pre>\n\n<p>I am getting following JSON in repose for the /books REST endpoint</p>\n\n<pre><code>[\n    {},\n    {}\n]\n</code></pre>\n\n<p>If I add getters and setters to entity it works fine. How can I get the actual values in response without adding getters setters as I am using @Data annotation</p>\n"},{"tags":["java","applet","mouseevent","awt"],"comments":[{"owner":{"account_id":281282,"reputation":3826,"user_id":577485,"accept_rate":71,"display_name":"Sibbo"},"score":1,"creation_date":1320012774,"post_id":7948224,"comment_id":9714567,"body_markdown":"So whats your problem? What is the output when you click anywhere?","body":"So whats your problem? What is the output when you click anywhere?"},{"owner":{"account_id":484897,"reputation":54322,"user_id":900873,"accept_rate":40,"display_name":"Kevin"},"score":1,"creation_date":1320012963,"post_id":7948224,"comment_id":9714606,"body_markdown":"Exactly what part are you having trouble with?  Does your `mouseClicked` method work?  If so, you have the point which the mouse was clicked and the bounds of the rectangle, what more do you need?","body":"Exactly what part are you having trouble with?  Does your <code>mouseClicked</code> method work?  If so, you have the point which the mouse was clicked and the bounds of the rectangle, what more do you need?"}],"answers":[{"comments":[{"owner":{"account_id":67340,"reputation":3835,"user_id":197101,"accept_rate":74,"display_name":"Visionary Software Solutions"},"score":0,"creation_date":1320013108,"post_id":7948282,"comment_id":9714631,"body_markdown":"You should also add a check to see if the click is inside the rectangle, of course. But given the op&#39;s original code, he should understand how to do that.","body":"You should also add a check to see if the click is inside the rectangle, of course. But given the op&#39;s original code, he should understand how to do that."}],"tags":[],"owner":{"account_id":247861,"reputation":185,"user_id":522874,"accept_rate":80,"display_name":"Dalius Šidlauskas"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1320013016,"creation_date":1320013016,"answer_id":7948282,"question_id":7948224,"body_markdown":"    import java.applet.*;\r\n    import java.awt.*;\r\n    import java.awt.event.*;\r\n    \r\n    public class AnAppletWithMouseEvents extends Applet implements MouseListener {\r\n    Color color = Color.green;\r\n    public void init()\r\n    {\r\n        addMouseListener(this);\r\n    }\r\n    public void paint(Graphics g)\r\n    {\r\n    \r\n        g.setColor(this.color);\r\n        g.drawRect(10, 30, 150, 150);\r\n    }\r\n    public void mouseClicked(MouseEvent e)\r\n    {\r\n        this.color = color.red;\r\n        this.repaint();\r\n    \r\n    }\r\n    public void mouseEntered(MouseEvent e) {}\r\n    public void mouseExited(MouseEvent e) {}\r\n    public void mousePressed(MouseEvent e) {}\r\n    public void mouseReleased(MouseEvent e) {}\r\n    }\r\n\r\nNow you need to count if the click was outside the bounds of rectangle.","title":"Changing the background color on mouse event","body":"<pre><code>import java.applet.*;\nimport java.awt.*;\nimport java.awt.event.*;\n\npublic class AnAppletWithMouseEvents extends Applet implements MouseListener {\nColor color = Color.green;\npublic void init()\n{\n    addMouseListener(this);\n}\npublic void paint(Graphics g)\n{\n\n    g.setColor(this.color);\n    g.drawRect(10, 30, 150, 150);\n}\npublic void mouseClicked(MouseEvent e)\n{\n    this.color = color.red;\n    this.repaint();\n\n}\npublic void mouseEntered(MouseEvent e) {}\npublic void mouseExited(MouseEvent e) {}\npublic void mousePressed(MouseEvent e) {}\npublic void mouseReleased(MouseEvent e) {}\n}\n</code></pre>\n\n<p>Now you need to count if the click was outside the bounds of rectangle.</p>\n"},{"tags":[],"owner":{"account_id":115714,"reputation":8890,"user_id":303698,"accept_rate":75,"display_name":"laher"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1320013424,"creation_date":1320013424,"answer_id":7948331,"question_id":7948224,"body_markdown":"In the `mouseClicked` method, you should test that `e.getX()` and `e.getY()` are outside the rectangle, and then invoke `setBackground()` :\r\n\r\n`this.setBackground(Color.red);`\r\n\r\nThe rectangle border will stay green (is that what you want?)\r\n\r\nHTH\r\n\r\n","title":"Changing the background color on mouse event","body":"<p>In the <code>mouseClicked</code> method, you should test that <code>e.getX()</code> and <code>e.getY()</code> are outside the rectangle, and then invoke <code>setBackground()</code> :</p>\n\n<p><code>this.setBackground(Color.red);</code></p>\n\n<p>The rectangle border will stay green (is that what you want?)</p>\n\n<p>HTH</p>\n"}],"owner":{"account_id":1005319,"reputation":21,"user_id":1019248,"accept_rate":62,"display_name":"Mike Lolo"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":12495,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1693577025,"creation_date":1320012480,"question_id":7948224,"body_markdown":"I want to change the background color when the mouse is clicked on the outside of the rectangle. I just dont know how to use the MouseEvent. \r\n\r\n\r\n    import java.applet.*;\r\n    import java.awt.*;\r\n    import java.awt.event.*;\r\n\r\n    public class AnAppletWithMouseEvents extends Applet implements MouseListener {\r\n    public void init()\r\n    {\r\n        addMouseListener(this);\r\n\t}\r\n\tpublic void paint(Graphics g)\r\n\t{\r\n\r\n\t\tg.setColor(Color.green);\r\n\t\tg.drawRect(10, 30, 150, 150);\r\n\t}\r\n    public void mouseClicked(MouseEvent e)\r\n    {\r\n        String clickDesc;\r\n        if (e.getClickCount() == 2)\r\n            clickDesc = &quot;double&quot;;\r\n        else\r\n            clickDesc = &quot;single&quot;;\r\n\r\n        System.out.println(&quot;Mouse was &quot; + clickDesc + &quot;-clicked at location (&quot; +\r\n            e.getX() + &quot;, &quot; + e.getY() + &quot;)&quot;);\r\n\r\n    }\r\n    public void mouseEntered(MouseEvent e) {}\r\n    public void mouseExited(MouseEvent e) {}\r\n    public void mousePressed(MouseEvent e) {}\r\n    public void mouseReleased(MouseEvent e) {}\r\n    }","title":"Changing the background color on mouse event","body":"<p>I want to change the background color when the mouse is clicked on the outside of the rectangle. I just dont know how to use the MouseEvent. </p>\n\n<pre><code>import java.applet.*;\nimport java.awt.*;\nimport java.awt.event.*;\n\npublic class AnAppletWithMouseEvents extends Applet implements MouseListener {\npublic void init()\n{\n    addMouseListener(this);\n}\npublic void paint(Graphics g)\n{\n\n    g.setColor(Color.green);\n    g.drawRect(10, 30, 150, 150);\n}\npublic void mouseClicked(MouseEvent e)\n{\n    String clickDesc;\n    if (e.getClickCount() == 2)\n        clickDesc = \"double\";\n    else\n        clickDesc = \"single\";\n\n    System.out.println(\"Mouse was \" + clickDesc + \"-clicked at location (\" +\n        e.getX() + \", \" + e.getY() + \")\");\n\n}\npublic void mouseEntered(MouseEvent e) {}\npublic void mouseExited(MouseEvent e) {}\npublic void mousePressed(MouseEvent e) {}\npublic void mouseReleased(MouseEvent e) {}\n}\n</code></pre>\n"},{"tags":["java","ssl"],"comments":[{"owner":{"account_id":3509196,"reputation":16493,"user_id":2933977,"display_name":"stdunbar"},"score":0,"creation_date":1693530863,"post_id":77020003,"comment_id":135776876,"body_markdown":"Can you elaborate on what &quot;runs on Redhat&quot; means?  Just the O/S or something else?","body":"Can you elaborate on what &quot;runs on Redhat&quot; means?  Just the O/S or something else?"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1693531805,"post_id":77020003,"comment_id":135776959,"body_markdown":"You need to understand the difference between a resource loaded via class loader, and a path on the filesystem.","body":"You need to understand the difference between a resource loaded via class loader, and a path on the filesystem."},{"owner":{"account_id":267247,"reputation":1186,"user_id":555303,"accept_rate":30,"display_name":"user555303"},"score":0,"creation_date":1693537759,"post_id":77020003,"comment_id":135777331,"body_markdown":"@tgdavies - Can you explain?  Are you saying that I&#39;d need to put the .p12 file into (for example) the resources folder in the Eclipse project?  And if so, do I need to set the value for the path to the .p12 file in that TEST_CLIENT_KEYSTORE_RESOURCE variable?  We actually want the files like the p12 with the client cert and the truststore/JKS file to be separate from the app.  Is it possible to do that with the code from that example, and if so how?","body":"@tgdavies - Can you explain?  Are you saying that I&#39;d need to put the .p12 file into (for example) the resources folder in the Eclipse project?  And if so, do I need to set the value for the path to the .p12 file in that TEST_CLIENT_KEYSTORE_RESOURCE variable?  We actually want the files like the p12 with the client cert and the truststore/JKS file to be separate from the app.  Is it possible to do that with the code from that example, and if so how?"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1693538105,"post_id":77020003,"comment_id":135777354,"body_markdown":"Can you update your question to explain where you&#39;re stuck? The method `loadKeyMaterial` takes a `URL`, `File.toURI().toURL()` should do what you want.","body":"Can you update your question to explain where you&#39;re stuck? The method <code>loadKeyMaterial</code> takes a <code>URL</code>, <code>File.toURI().toURL()</code> should do what you want."},{"owner":{"account_id":267247,"reputation":1186,"user_id":555303,"accept_rate":30,"display_name":"user555303"},"score":0,"creation_date":1693538123,"post_id":77020003,"comment_id":135777357,"body_markdown":"@stdunbar - I am working with Oracle&#39;s &quot;Unified Directory&quot; (OUD) product.  OUD supports plugins and what I am trying to use that example code for is to modify one of our existing OUD plugins to connect to another data source (a web service).  So when I aid &quot;runs on Redhat,&quot; I meant that the OUD (and the OUD plugins) are running on Redhat servers.  I mentioned that because, as I said I first tried the code by building it in Eclipse on a Windows machine, then I took the class/JAR file and ran it on one of our Redhat machines with no problem, and I am puzzled why I am encountering the problems.","body":"@stdunbar - I am working with Oracle&#39;s &quot;Unified Directory&quot; (OUD) product.  OUD supports plugins and what I am trying to use that example code for is to modify one of our existing OUD plugins to connect to another data source (a web service).  So when I aid &quot;runs on Redhat,&quot; I meant that the OUD (and the OUD plugins) are running on Redhat servers.  I mentioned that because, as I said I first tried the code by building it in Eclipse on a Windows machine, then I took the class/JAR file and ran it on one of our Redhat machines with no problem, and I am puzzled why I am encountering the problems."},{"owner":{"account_id":267247,"reputation":1186,"user_id":555303,"accept_rate":30,"display_name":"user555303"},"score":0,"creation_date":1693543333,"post_id":77020003,"comment_id":135777662,"body_markdown":"@tgdavies - I&#39;v updated the OP.  I guess I&#39;d like to figure out/find out how I can get the method that I made from the earlier thread working, because I am &quot;that close&quot; to having something, I think.","body":"@tgdavies - I&#39;v updated the OP.  I guess I&#39;d like to figure out/find out how I can get the method that I made from the earlier thread working, because I am &quot;that close&quot; to having something, I think."},{"owner":{"account_id":267247,"reputation":1186,"user_id":555303,"accept_rate":30,"display_name":"user555303"},"score":0,"creation_date":1693544335,"post_id":77020003,"comment_id":135777737,"body_markdown":"@tgdavies -I made a URL but I am not sure what you meant by &quot;should do what you want?  Are you saying replace &quot;FederationUtil.class.getResource(TEST_CLIENT_KEYSTORE_RESOURCE), storePassword, keyPassword, (aliases, socket) -&gt; aliases.keySet().iterator().next() &quot; with the URL?","body":"@tgdavies -I made a URL but I am not sure what you meant by &quot;should do what you want?  Are you saying replace &quot;FederationUtil.class.getResource(TEST_CLIENT_KEYSTORE_RESOU&zwnj;&#8203;RCE), storePassword, keyPassword, (aliases, socket) -&gt; aliases.keySet().iterator().next() &quot; with the URL?"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1693547027,"post_id":77020003,"comment_id":135778004,"body_markdown":"try `new File(TEST_CLIENT_KEYSTORE_RESOURCE).toURI().toURL()` in place of `FederationUtil.class.getResource(TEST_CLIENT_KEYSTORE_RESOURCE)`.","body":"try <code>new File(TEST_CLIENT_KEYSTORE_RESOURCE).toURI().toURL()</code> in place of <code>FederationUtil.class.getResource(TEST_CLIENT_KEYSTORE_RESOUR&zwnj;&#8203;CE)</code>."},{"owner":{"account_id":267247,"reputation":1186,"user_id":555303,"accept_rate":30,"display_name":"user555303"},"score":0,"creation_date":1693548178,"post_id":77020003,"comment_id":135778137,"body_markdown":"@tgdavies - same error - e.getMessage()=java.security.cert.CertificateException: No X509TrustManager implementation available]!!","body":"@tgdavies - same error - e.getMessage()=java.security.cert.CertificateException: No X509TrustManager implementation available]!!"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1693548736,"post_id":77020003,"comment_id":135778206,"body_markdown":"Same error? Looks different to me.","body":"Same error? Looks different to me."},{"owner":{"account_id":3421244,"reputation":35883,"user_id":2868801,"display_name":"dave_thompson_085"},"score":0,"creation_date":1693550883,"post_id":77020003,"comment_id":135778545,"body_markdown":"Your new error is indeed a different error (@user555303) and establishes that now the keystore file _is_ found, because the attempt to create a TrustManager occurs in `.build()` which is called only if `.loadKeyMaterial(...)` succeeded. However, `build()` attempts to use the default TrustManager and fails; though the specific exception is discarded, the most like causes are that your _truststore_ file either doesn&#39;t exist (which your code checks and should have logged) or can&#39;t be accessed with the default password &quot;changeit&quot; or isn&#39;t PKCS12 or JKS (check for those).","body":"Your new error is indeed a different error (@user555303) and establishes that now the keystore file <i>is</i> found, because the attempt to create a TrustManager occurs in <code>.build()</code> which is called only if <code>.loadKeyMaterial(...)</code> succeeded. However, <code>build()</code> attempts to use the default TrustManager and fails; though the specific exception is discarded, the most like causes are that your <i>truststore</i> file either doesn&#39;t exist (which your code checks and should have logged) or can&#39;t be accessed with the default password &quot;changeit&quot; or isn&#39;t PKCS12 or JKS (check for those)."},{"owner":{"account_id":267247,"reputation":1186,"user_id":555303,"accept_rate":30,"display_name":"user555303"},"score":0,"creation_date":1693564465,"post_id":77020003,"comment_id":135781083,"body_markdown":"@tgdavies - i should&#39;ve posted the last attempt by updating the OP instead of in comments (it was really late at night here), but I&#39;ve done that now (EDIT3, above).  The error message I got with the last change looks like the same as from EDIT2?  Sorry.  I am unclear why you said the EDIT3 error looks different thant the EDIT2 error message?","body":"@tgdavies - i should&#39;ve posted the last attempt by updating the OP instead of in comments (it was really late at night here), but I&#39;ve done that now (EDIT3, above).  The error message I got with the last change looks like the same as from EDIT2?  Sorry.  I am unclear why you said the EDIT3 error looks different thant the EDIT2 error message?"},{"owner":{"account_id":267247,"reputation":1186,"user_id":555303,"accept_rate":30,"display_name":"user555303"},"score":0,"creation_date":1693566523,"post_id":77020003,"comment_id":135781403,"body_markdown":"@dave_thompson_085 - The truststore  is set inside the method using &quot;System.setProperty(&quot;javax.net.ssl.trustStore&quot;, pathToTruststore);&quot;  - is that not a valid way to set the truststore  (a JKS file)?  This code goes inside one of the OUD plugins, so there isn&#39;t really a &quot;command line&quot; to use a &quot;-D&quot; to set the system property.  I don&#39;t understand why doing that is not working :( ...","body":"@dave_thompson_085 - The truststore  is set inside the method using &quot;System.setProperty(&quot;javax.net.ssl.trustStore&quot;, pathToTruststore);&quot;  - is that not a valid way to set the truststore  (a JKS file)?  This code goes inside one of the OUD plugins, so there isn&#39;t really a &quot;command line&quot; to use a &quot;-D&quot; to set the system property.  I don&#39;t understand why doing that is not working :( ..."},{"owner":{"account_id":267247,"reputation":1186,"user_id":555303,"accept_rate":30,"display_name":"user555303"},"score":0,"creation_date":1693569274,"post_id":77020003,"comment_id":135781879,"body_markdown":"@dave_thompson_085 - I&#39;ve made some progress and updated the OP with the info - I think/hope I got past the trustmanager error but now getting a different error.  Thanks!","body":"@dave_thompson_085 - I&#39;ve made some progress and updated the OP with the info - I think/hope I got past the trustmanager error but now getting a different error.  Thanks!"},{"owner":{"account_id":3421244,"reputation":35883,"user_id":2868801,"display_name":"dave_thompson_085"},"score":0,"creation_date":1693596648,"post_id":77020003,"comment_id":135786951,"body_markdown":"Yes you need to also set the truststore password if it differs from the default &quot;changeit&quot; -- that&#39;s why I told you to check it. Your newer error NoSuchElementException is a pretty generic and vague one. Try calling `e.printStackTrace()` to get (more) specific details -- this writes to `System.out` by default; if the OUD environment makes that inaccessible, direct it to a file or an in-memory stream that you then log or display or store or something.","body":"Yes you need to also set the truststore password if it differs from the default &quot;changeit&quot; -- that&#39;s why I told you to check it. Your newer error NoSuchElementException is a pretty generic and vague one. Try calling <code>e.printStackTrace()</code> to get (more) specific details -- this writes to <code>System.out</code> by default; if the OUD environment makes that inaccessible, direct it to a file or an in-memory stream that you then log or display or store or something."},{"owner":{"account_id":267247,"reputation":1186,"user_id":555303,"accept_rate":30,"display_name":"user555303"},"score":0,"creation_date":1693748011,"post_id":77020003,"comment_id":135798577,"body_markdown":"Hi All - Sorry I haven&#39;t posted in a few days... FYI, I found another way to do, described here:  https://www.w3docs.com/snippets/java/java-https-client-certificate-authentication.html and got that working.  Thanks for all the help!!","body":"Hi All - Sorry I haven&#39;t posted in a few days... FYI, I found another way to do, described here:  <a href=\"https://www.w3docs.com/snippets/java/java-https-client-certificate-authentication.html\" rel=\"nofollow noreferrer\">w3docs.com/snippets/java/&hellip;</a> and got that working.  Thanks for all the help!!"}],"owner":{"account_id":267247,"reputation":1186,"user_id":555303,"accept_rate":30,"display_name":"user555303"},"comment_count":16,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693576913,"creation_date":1693530443,"question_id":77020003,"body_markdown":"I am trying to get the example code in this older thread to work:\r\n\r\nhttps://stackoverflow.com/questions/18541813/how-do-i-pass-the-client-certificate-with-http-client/46821977#46821977\r\n\r\nI originally built the example in Eclipse on my Windows laptop, then copied the compiled class/JAR to a Redhat machine and ran it on the Redhat machine, and it worked. It was able to connect and send a request to a app that was configured for 2-way SSL.\r\n\r\nIn that Eclipse project I had a main() method and also most of the example in a separate method, because what my end-goal is to use that method on in an application (the application runs on Redhat) that we are working on.  Here is the method I ended up with (sorry there is lots of debug logging):\r\n\r\n    \t    protected String getRbsResponse(String strId, String pathToTruststore, String pathToClientCertPfx) {\r\n\t    \tlogger.error(&quot;---+++++ In getRbsResponse: V1.00&quot;);\r\n\r\n\t    \tlogger.error(&quot;---+++++ In getRbsResponse: strId=[&quot; + strId + &quot;]&quot;);\r\n\t    \tlogger.error(&quot;---+++++ In getRbsResponse: pathToTruststore=[&quot; + pathToTruststore + &quot;]&quot;);\r\n\t    \tlogger.error(&quot;---+++++ In getRbsResponse: pathToClientCertPfx=[&quot; + pathToClientCertPfx + &quot;]&quot;);\r\n\r\n\t    \tString TEST_URL = &quot;https://xxxx/ID=&quot; + strId;\r\n\t    \tlogger.error(&quot;---+++++ In getRbsResponse: TEST_URL=[&quot; + TEST_URL + &quot;]&quot;);\r\n\r\n\t    \t//String TEST_CLIENT_KEYSTORE_RESOURCE = pathToClientCertPfx;\r\n\t    \tString TEST_CLIENT_KEYSTORE_RESOURCE = &quot;/apps/common/certs/mutual-tls-keystore.p12&quot;;\r\n\t    \tlogger.error(&quot;---+++++ In getRbsResponse: TEST_CLIENT_KEYSTORE_RESOURCE=[&quot; + TEST_CLIENT_KEYSTORE_RESOURCE + &quot;]&quot;);\r\n\r\n\t    \tString response = &quot;&quot;;\r\n\r\n\t    \tlogger.error(&quot;---+++++ In getRbsResponse: ABOUT TO CHECK IF IMPORTANT FILES EXIST !!!&quot;);\r\n\r\n\t    \tlogger.error(&quot;---+++++ In getRbsResponse: Check IF CLIENT CERT PFX [&quot; + TEST_CLIENT_KEYSTORE_RESOURCE + &quot;] EXISTS !!!&quot;);\r\n\t    \tif (new File(TEST_CLIENT_KEYSTORE_RESOURCE).isFile()) {\r\n\t\t    \tlogger.error(&quot;---+++++ In getRbsResponse: SUCCESS - CLIENT CERT PFX: [&quot; + TEST_CLIENT_KEYSTORE_RESOURCE + &quot;] EXISTS !!!&quot;);\r\n\t    \t} else {\r\n\t\t    \tlogger.error(&quot;---+++++ In getRbsResponse: FAILED - CLIENT CERT PFX: [&quot; + TEST_CLIENT_KEYSTORE_RESOURCE + &quot;] DOES NOT EXIST !!!&quot;);\r\n\t    \t}\r\n\t    \t\r\n\r\n\t    \tlogger.error(&quot;---+++++ In getRbsResponse: Check IF TRUSTSTORE JKS [&quot; + pathToTruststore + &quot;] EXIST !!!&quot;);\r\n\t    \tif (new File(pathToTruststore).isFile()) {\r\n\t\t    \tlogger.error(&quot;---+++++ In getRbsResponse: SUCCESS - TRUSTSTORE JKS: [&quot; + pathToTruststore + &quot;] EXISTS !!!&quot;);\r\n\t    \t} else {\r\n\t\t    \tlogger.error(&quot;---+++++ In getRbsResponse: FAILED - TRUSTSTORE JKS: [&quot; + pathToTruststore + &quot;] DOES NOT EXIST !!!&quot;);\r\n\t    \t}\r\n\r\n\t    \tlogger.error(&quot;---+++++ In getRbsResponse: About to set SYSTEM PROPERTY javax.net.ssl.truststore to [&quot; + pathToTruststore + &quot;] !!!&quot;);\r\n\t    \tSystem.setProperty(&quot;javax.net.ssl.trustStore&quot;, pathToTruststore);\r\n\t    \tlogger.error(&quot;---+++++ In getRbsResponse: FINISHED setting SYSTEM PROPERTY javax.net.ssl.truststore to [&quot; + pathToTruststore + &quot;] !!!&quot;);\r\n\t        \r\n\t        //Console console = System.console();\r\n\t        //char[] storePassword = console.readPassword(&quot;Key+Keystore password: &quot;);\r\n\r\n\t    \tlogger.error(&quot;---+++++ In getRbsResponse: About to set password for Client cert PFX and for TRUST STORE JKS into set SYSTEM PROPERTY javax.net.ssl.truststore to into two char arrays !!!&quot;);\r\n\r\n\t    \tString mypassword = &quot;password&quot;;\r\n\t        logger.error(&quot;---+++++ In getRbsResponse: BOTH passwords are set to=[&quot; + mypassword + &quot;]&quot;);\r\n\t        char[] storePassword = mypassword.toCharArray();\r\n\t        char[] keyPassword = storePassword;\r\n\r\n\t        SSLContext sslContext = null;\r\n\t        try {\r\n\t            sslContext =  SSLContexts.custom().loadKeyMaterial(FederationUtil.class.getResource(TEST_CLIENT_KEYSTORE_RESOURCE), storePassword, keyPassword, (aliases, socket) -&gt; aliases.keySet().iterator().next()  ).build();\r\n\r\n\r\n\r\n\t        try (CloseableHttpClient httpclient = HttpClients.custom().setSSLContext(sslContext).build();\r\n\t        \t\t\r\n\t             CloseableHttpResponse closeableHttpResponse = httpclient.execute(new HttpGet(URI.create(TEST_URL)))) {\r\n\t            //console.writer().println(closeableHttpResponse.getStatusLine());\r\n\t            logger.error(&quot;---+++++ In getRbsResponse: closeableHttpResponse.getStatusLine()=[&quot; + closeableHttpResponse.getStatusLine() + &quot;]&quot;);\r\n\t            HttpEntity entity = closeableHttpResponse.getEntity();\r\n\t            try (InputStream content = entity.getContent();\r\n\t                 ReadableByteChannel src = Channels.newChannel(content);\r\n\t                 WritableByteChannel dest = Channels.newChannel(System.out)) {\r\n\t                ByteBuffer buffer = ByteBuffer.allocateDirect(16 * 1024);\r\n\t                while (src.read(buffer) != -1) {\r\n\t                    buffer.flip();\r\n\t                    dest.write(buffer);\r\n\t                    buffer.compact();\r\n\t                }\r\n\t                buffer.flip();\r\n\t                while (buffer.hasRemaining())\r\n\t                    dest.write(buffer);\r\n\t            }\r\n\t        }\r\n\t    \r\n\r\n\t      } catch (Exception e) {\r\n\t    \tlogger.error(&quot;---+++++ In getRbsResponse: **EXCEPTION** e.getMessage()=&quot; + e.getMessage() + &quot;]!!&quot;);\r\n\t    \tlogger.error(&quot;---+++++ In getRbsResponse: **EXCEPTION** - [&quot;, e);\r\n\t    }\r\n\t        \r\n\t        // try moving catch above here....        \r\n\t        \r\n\t        logger.error(&quot;---+++++ Returning from getRbsResponse with response=[&quot; + response + &quot;]&quot;);\r\n\t        return response;\r\n\t    } // end getRbsResponse()\t\r\n\t\r\nHowever when our app (which again, is running on Redhat) calls the the above method an exception is being thrown on the following line:\r\n\r\n    sslContext =  SSLContexts.custom().loadKeyMaterial(FederationUtil.class.getResource(TEST_CLIENT_KEYSTORE_RESOURCE), storePassword, keyPassword, (aliases, socket) -&gt; aliases.keySet().iterator().next()  ).build();\r\n\r\nThe message in the exception is:\r\n\r\n     e.getMmessage()=Keystore URL may not be null]!!\r\n\r\nAs you can see from the code above, I am also doing some checks that the truststore file and the file with the client cert exist, and those checks are succeeding.  The message from the exception seems to be saying that the &quot;URL&quot; is null?  \r\n\r\nI cannot figure out why I am getting that error :( , so I was hoping someone here might have some insight about that?\r\n\r\nThanks again, and sorry for the longish post !!\r\n\r\nJim\r\n\r\nEDIT1: Where I am getting stuck:  The &quot;TEST_CLIENT_KEYSTORE_RESOURCE&quot; contains a String, like &quot;/apps/certs/multi.p12&quot;, which is the path on the filesystem where the client cert is located.  When our app (an OUD plugin) calls the above method, I get an exception on that line and the e.Message says &quot;Keystore URL may not be null&quot;.  I understand from comments that (putting the path to the p12 file) is not what we should be doing, but I am trying to find out what I *SHOULD* be doing instead.\r\n\r\nEDIT2: Based on comments I tried changing this part of the code:\r\n```java\r\nFile file = new File(&quot;/apps/common/certs/mutual-tls-keystore.p12&quot;);\r\ntry {\r\n    url = file.toURI().toURL();\r\n} catch (Exception e) {\r\n    // TBD\r\n}\r\nSSLContext sslContext = null;\r\ntry {\r\n    //sslContext = SSLContexts.custom().loadKeyMaterial(FederationUtil.class.getResource(TEST_CLIENT_KEYSTORE_RESOURCE), storePassword, keyPassword, (aliases, socket) -&gt; aliases.keySet().iterator().next()).build();\r\n    sslContext = SSLContexts.custom().loadKeyMaterial(file, storePassword, keyPassword).build();\r\n```\r\nThen, when I test I am getting a different error:\r\n\r\n    e.getMessage()=java.security.cert.CertificateException: No X509TrustManager implementation available]!!\r\n\r\nEDIT 3: Based on additional comments I changed the sslContext to:\r\n\r\n    sslContext = SSLContexts.custom().loadKeyMaterial(new File(TEST_CLIENT_KEYSTORE_RESOURCE).toURI().toURL(), storePassword, keyPassword, (aliases, socket) -&gt; aliases.keySet().iterator().next()  ).build();\r\n\r\nand when I tested I got the error:\r\n\r\n    e.getMessage()=java.security.cert.CertificateException: No X509TrustManager implementation available]\r\n\r\n\r\nEDIT4:  I think (HOPE) that I MAY be making some progress.  Based on comments from @tgdavies and @dave_thompson_085, I was doing searching about the Trustmanager error, and also using the system property, and I found this SO thread - https://stackoverflow.com/questions/38353944/keep-getting-no-x509trustmanager-implementation-available-error-when-trying-to-c.  \r\n\r\nIn there, it mentions about ALSO SETTING the System property for the truststore *PASSWORD*, WHICH I WAS NOT DOING!!  So, I added that and ran another tests, and I *THINK* it got past the Trustmanager error, but now is getting a different error:\r\n\r\n    e.getMessage()=java.util.NoSuchElementException\r\n\r\nThat error APPEARS to be on the line:\r\n\r\n    CloseableHttpResponse closeableHttpResponse = httpclient.execute(new HttpGet(URI.create(TEST_URL)))) {\r\n\r\nI&#39;m going to add some more debug but if anyone has any idea what might be causing that error, please let me know?\r\n\r\n\r\nEDIT5:  I&#39;ve added following, just to see if it was having problems with the URL in TEST_URL:\r\n\r\n    HttpGet doGetFromRbs = new HttpGet(URI.create(TEST_URL));\r\n\r\nbut that seems to work fine, and I even did &quot;doGetFromRbs.getURI().toString()&quot; after that, and it returned the same URL string as in TEST_URL.\r\n\r\nAlso, I can see the logging on the server that this request SHOULD be going to, and I confirmed that when I run a test, there is no request hitting the server side yet :(, so it seems like code is blowing up before it even sends a request to the server?","title":"Another question/problem with Mutual SSL Example Code","body":"<p>I am trying to get the example code in this older thread to work:</p>\n<p><a href=\"https://stackoverflow.com/questions/18541813/how-do-i-pass-the-client-certificate-with-http-client/46821977#46821977\">How do I pass the client certificate with HTTP client?</a></p>\n<p>I originally built the example in Eclipse on my Windows laptop, then copied the compiled class/JAR to a Redhat machine and ran it on the Redhat machine, and it worked. It was able to connect and send a request to a app that was configured for 2-way SSL.</p>\n<p>In that Eclipse project I had a main() method and also most of the example in a separate method, because what my end-goal is to use that method on in an application (the application runs on Redhat) that we are working on.  Here is the method I ended up with (sorry there is lots of debug logging):</p>\n<pre><code>        protected String getRbsResponse(String strId, String pathToTruststore, String pathToClientCertPfx) {\n        logger.error(&quot;---+++++ In getRbsResponse: V1.00&quot;);\n\n        logger.error(&quot;---+++++ In getRbsResponse: strId=[&quot; + strId + &quot;]&quot;);\n        logger.error(&quot;---+++++ In getRbsResponse: pathToTruststore=[&quot; + pathToTruststore + &quot;]&quot;);\n        logger.error(&quot;---+++++ In getRbsResponse: pathToClientCertPfx=[&quot; + pathToClientCertPfx + &quot;]&quot;);\n\n        String TEST_URL = &quot;https://xxxx/ID=&quot; + strId;\n        logger.error(&quot;---+++++ In getRbsResponse: TEST_URL=[&quot; + TEST_URL + &quot;]&quot;);\n\n        //String TEST_CLIENT_KEYSTORE_RESOURCE = pathToClientCertPfx;\n        String TEST_CLIENT_KEYSTORE_RESOURCE = &quot;/apps/common/certs/mutual-tls-keystore.p12&quot;;\n        logger.error(&quot;---+++++ In getRbsResponse: TEST_CLIENT_KEYSTORE_RESOURCE=[&quot; + TEST_CLIENT_KEYSTORE_RESOURCE + &quot;]&quot;);\n\n        String response = &quot;&quot;;\n\n        logger.error(&quot;---+++++ In getRbsResponse: ABOUT TO CHECK IF IMPORTANT FILES EXIST !!!&quot;);\n\n        logger.error(&quot;---+++++ In getRbsResponse: Check IF CLIENT CERT PFX [&quot; + TEST_CLIENT_KEYSTORE_RESOURCE + &quot;] EXISTS !!!&quot;);\n        if (new File(TEST_CLIENT_KEYSTORE_RESOURCE).isFile()) {\n            logger.error(&quot;---+++++ In getRbsResponse: SUCCESS - CLIENT CERT PFX: [&quot; + TEST_CLIENT_KEYSTORE_RESOURCE + &quot;] EXISTS !!!&quot;);\n        } else {\n            logger.error(&quot;---+++++ In getRbsResponse: FAILED - CLIENT CERT PFX: [&quot; + TEST_CLIENT_KEYSTORE_RESOURCE + &quot;] DOES NOT EXIST !!!&quot;);\n        }\n        \n\n        logger.error(&quot;---+++++ In getRbsResponse: Check IF TRUSTSTORE JKS [&quot; + pathToTruststore + &quot;] EXIST !!!&quot;);\n        if (new File(pathToTruststore).isFile()) {\n            logger.error(&quot;---+++++ In getRbsResponse: SUCCESS - TRUSTSTORE JKS: [&quot; + pathToTruststore + &quot;] EXISTS !!!&quot;);\n        } else {\n            logger.error(&quot;---+++++ In getRbsResponse: FAILED - TRUSTSTORE JKS: [&quot; + pathToTruststore + &quot;] DOES NOT EXIST !!!&quot;);\n        }\n\n        logger.error(&quot;---+++++ In getRbsResponse: About to set SYSTEM PROPERTY javax.net.ssl.truststore to [&quot; + pathToTruststore + &quot;] !!!&quot;);\n        System.setProperty(&quot;javax.net.ssl.trustStore&quot;, pathToTruststore);\n        logger.error(&quot;---+++++ In getRbsResponse: FINISHED setting SYSTEM PROPERTY javax.net.ssl.truststore to [&quot; + pathToTruststore + &quot;] !!!&quot;);\n        \n        //Console console = System.console();\n        //char[] storePassword = console.readPassword(&quot;Key+Keystore password: &quot;);\n\n        logger.error(&quot;---+++++ In getRbsResponse: About to set password for Client cert PFX and for TRUST STORE JKS into set SYSTEM PROPERTY javax.net.ssl.truststore to into two char arrays !!!&quot;);\n\n        String mypassword = &quot;password&quot;;\n        logger.error(&quot;---+++++ In getRbsResponse: BOTH passwords are set to=[&quot; + mypassword + &quot;]&quot;);\n        char[] storePassword = mypassword.toCharArray();\n        char[] keyPassword = storePassword;\n\n        SSLContext sslContext = null;\n        try {\n            sslContext =  SSLContexts.custom().loadKeyMaterial(FederationUtil.class.getResource(TEST_CLIENT_KEYSTORE_RESOURCE), storePassword, keyPassword, (aliases, socket) -&gt; aliases.keySet().iterator().next()  ).build();\n\n\n\n        try (CloseableHttpClient httpclient = HttpClients.custom().setSSLContext(sslContext).build();\n                \n             CloseableHttpResponse closeableHttpResponse = httpclient.execute(new HttpGet(URI.create(TEST_URL)))) {\n            //console.writer().println(closeableHttpResponse.getStatusLine());\n            logger.error(&quot;---+++++ In getRbsResponse: closeableHttpResponse.getStatusLine()=[&quot; + closeableHttpResponse.getStatusLine() + &quot;]&quot;);\n            HttpEntity entity = closeableHttpResponse.getEntity();\n            try (InputStream content = entity.getContent();\n                 ReadableByteChannel src = Channels.newChannel(content);\n                 WritableByteChannel dest = Channels.newChannel(System.out)) {\n                ByteBuffer buffer = ByteBuffer.allocateDirect(16 * 1024);\n                while (src.read(buffer) != -1) {\n                    buffer.flip();\n                    dest.write(buffer);\n                    buffer.compact();\n                }\n                buffer.flip();\n                while (buffer.hasRemaining())\n                    dest.write(buffer);\n            }\n        }\n    \n\n      } catch (Exception e) {\n        logger.error(&quot;---+++++ In getRbsResponse: **EXCEPTION** e.getMessage()=&quot; + e.getMessage() + &quot;]!!&quot;);\n        logger.error(&quot;---+++++ In getRbsResponse: **EXCEPTION** - [&quot;, e);\n    }\n        \n        // try moving catch above here....        \n        \n        logger.error(&quot;---+++++ Returning from getRbsResponse with response=[&quot; + response + &quot;]&quot;);\n        return response;\n    } // end getRbsResponse()   \n</code></pre>\n<p>However when our app (which again, is running on Redhat) calls the the above method an exception is being thrown on the following line:</p>\n<pre><code>sslContext =  SSLContexts.custom().loadKeyMaterial(FederationUtil.class.getResource(TEST_CLIENT_KEYSTORE_RESOURCE), storePassword, keyPassword, (aliases, socket) -&gt; aliases.keySet().iterator().next()  ).build();\n</code></pre>\n<p>The message in the exception is:</p>\n<pre><code> e.getMmessage()=Keystore URL may not be null]!!\n</code></pre>\n<p>As you can see from the code above, I am also doing some checks that the truststore file and the file with the client cert exist, and those checks are succeeding.  The message from the exception seems to be saying that the &quot;URL&quot; is null?</p>\n<p>I cannot figure out why I am getting that error :( , so I was hoping someone here might have some insight about that?</p>\n<p>Thanks again, and sorry for the longish post !!</p>\n<p>Jim</p>\n<p>EDIT1: Where I am getting stuck:  The &quot;TEST_CLIENT_KEYSTORE_RESOURCE&quot; contains a String, like &quot;/apps/certs/multi.p12&quot;, which is the path on the filesystem where the client cert is located.  When our app (an OUD plugin) calls the above method, I get an exception on that line and the e.Message says &quot;Keystore URL may not be null&quot;.  I understand from comments that (putting the path to the p12 file) is not what we should be doing, but I am trying to find out what I <em>SHOULD</em> be doing instead.</p>\n<p>EDIT2: Based on comments I tried changing this part of the code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>File file = new File(&quot;/apps/common/certs/mutual-tls-keystore.p12&quot;);\ntry {\n    url = file.toURI().toURL();\n} catch (Exception e) {\n    // TBD\n}\nSSLContext sslContext = null;\ntry {\n    //sslContext = SSLContexts.custom().loadKeyMaterial(FederationUtil.class.getResource(TEST_CLIENT_KEYSTORE_RESOURCE), storePassword, keyPassword, (aliases, socket) -&gt; aliases.keySet().iterator().next()).build();\n    sslContext = SSLContexts.custom().loadKeyMaterial(file, storePassword, keyPassword).build();\n</code></pre>\n<p>Then, when I test I am getting a different error:</p>\n<pre><code>e.getMessage()=java.security.cert.CertificateException: No X509TrustManager implementation available]!!\n</code></pre>\n<p>EDIT 3: Based on additional comments I changed the sslContext to:</p>\n<pre><code>sslContext = SSLContexts.custom().loadKeyMaterial(new File(TEST_CLIENT_KEYSTORE_RESOURCE).toURI().toURL(), storePassword, keyPassword, (aliases, socket) -&gt; aliases.keySet().iterator().next()  ).build();\n</code></pre>\n<p>and when I tested I got the error:</p>\n<pre><code>e.getMessage()=java.security.cert.CertificateException: No X509TrustManager implementation available]\n</code></pre>\n<p>EDIT4:  I think (HOPE) that I MAY be making some progress.  Based on comments from @tgdavies and @dave_thompson_085, I was doing searching about the Trustmanager error, and also using the system property, and I found this SO thread - <a href=\"https://stackoverflow.com/questions/38353944/keep-getting-no-x509trustmanager-implementation-available-error-when-trying-to-c\">Keep getting No X509TrustManager implementation available error when trying to connect to web socket server</a>.</p>\n<p>In there, it mentions about ALSO SETTING the System property for the truststore <em>PASSWORD</em>, WHICH I WAS NOT DOING!!  So, I added that and ran another tests, and I <em>THINK</em> it got past the Trustmanager error, but now is getting a different error:</p>\n<pre><code>e.getMessage()=java.util.NoSuchElementException\n</code></pre>\n<p>That error APPEARS to be on the line:</p>\n<pre><code>CloseableHttpResponse closeableHttpResponse = httpclient.execute(new HttpGet(URI.create(TEST_URL)))) {\n</code></pre>\n<p>I'm going to add some more debug but if anyone has any idea what might be causing that error, please let me know?</p>\n<p>EDIT5:  I've added following, just to see if it was having problems with the URL in TEST_URL:</p>\n<pre><code>HttpGet doGetFromRbs = new HttpGet(URI.create(TEST_URL));\n</code></pre>\n<p>but that seems to work fine, and I even did &quot;doGetFromRbs.getURI().toString()&quot; after that, and it returned the same URL string as in TEST_URL.</p>\n<p>Also, I can see the logging on the server that this request SHOULD be going to, and I confirmed that when I run a test, there is no request hitting the server side yet :(, so it seems like code is blowing up before it even sends a request to the server?</p>\n"},{"tags":["java","wiremock"],"answers":[{"tags":[],"owner":{"account_id":991044,"reputation":3566,"user_id":1008361,"display_name":"Tom"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693576564,"creation_date":1693576564,"answer_id":77023718,"question_id":77013714,"body_markdown":"The `absent` matcher is what you need here:\r\n\r\n```json\r\n&quot;bodyPatterns&quot;: [\r\n  {\r\n    &quot;matchesJsonPath&quot;: {\r\n      &quot;expression&quot;: &quot;cursor&quot;,\r\n      &quot;absent&quot;: true\r\n    }\r\n  }\r\n]\r\n```","title":"In Wiremock how to write a mappingBuilder which matches a requestBody containing a json, having matchingJsonPath value equal to null?","body":"<p>The <code>absent</code> matcher is what you need here:</p>\n<pre class=\"lang-json prettyprint-override\"><code>&quot;bodyPatterns&quot;: [\n  {\n    &quot;matchesJsonPath&quot;: {\n      &quot;expression&quot;: &quot;cursor&quot;,\n      &quot;absent&quot;: true\n    }\n  }\n]\n</code></pre>\n"}],"owner":{"account_id":3836409,"reputation":754,"user_id":3180578,"accept_rate":48,"display_name":"Nikunj Aggarwal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1693576564,"creation_date":1693467348,"question_id":77013714,"body_markdown":"I want to write a java code which can produce following wiremock mapping-\r\n&quot;request&quot;: \r\n\r\n    {\r\n                    &quot;urlPattern&quot;: &quot;/kziwynya/ep1&quot;,\r\n                    &quot;method&quot;: &quot;POST&quot;,\r\n                    &quot;bodyPatterns&quot;: [\r\n                        {\r\n                            &quot;matchesJsonPath&quot;: {\r\n                                &quot;expression&quot;: &quot;cursor&quot;,\r\n                                &quot;equalTo&quot;: null\r\n                            }\r\n                        }\r\n                    ]\r\n                }\r\n\r\nIf we write matchingJsonPath(&quot;cursor, equalTo(null)), it gives nullPointerException inside equalTo method.","title":"In Wiremock how to write a mappingBuilder which matches a requestBody containing a json, having matchingJsonPath value equal to null?","body":"<p>I want to write a java code which can produce following wiremock mapping-\n&quot;request&quot;:</p>\n<pre><code>{\n                &quot;urlPattern&quot;: &quot;/kziwynya/ep1&quot;,\n                &quot;method&quot;: &quot;POST&quot;,\n                &quot;bodyPatterns&quot;: [\n                    {\n                        &quot;matchesJsonPath&quot;: {\n                            &quot;expression&quot;: &quot;cursor&quot;,\n                            &quot;equalTo&quot;: null\n                        }\n                    }\n                ]\n            }\n</code></pre>\n<p>If we write matchingJsonPath(&quot;cursor, equalTo(null)), it gives nullPointerException inside equalTo method.</p>\n"},{"tags":["java","bouncycastle","public-key-encryption","pgp"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1614215355,"post_id":66360953,"comment_id":117320818,"body_markdown":"Please add the complete stack trace of the exception to your question.","body":"Please add the complete stack trace of the exception to your question."},{"owner":{"account_id":4183593,"reputation":1703,"user_id":3427866,"accept_rate":25,"display_name":"ads"},"score":0,"creation_date":1614216468,"post_id":66360953,"comment_id":117321049,"body_markdown":"@tgdavies Done. Thanks.","body":"@tgdavies Done. Thanks."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1614217037,"post_id":66360953,"comment_id":117321160,"body_markdown":"When you throw a new exception as you do in  `throw new Exception(String.format(&quot;%s: %s&quot;, e.getMessage(), step));` you *must* include the original exception as the `cause` of the new exception you are throwing. Otherwise you are losing necessary context. Please fix that and add the complete stacktfrace.","body":"When you throw a new exception as you do in  <code>throw new Exception(String.format(&quot;%s: %s&quot;, e.getMessage(), step));</code> you <i>must</i> include the original exception as the <code>cause</code> of the new exception you are throwing. Otherwise you are losing necessary context. Please fix that and add the complete stacktfrace."},{"owner":{"account_id":4183593,"reputation":1703,"user_id":3427866,"accept_rate":25,"display_name":"ads"},"score":0,"creation_date":1614218477,"post_id":66360953,"comment_id":117321477,"body_markdown":"@tgdavies Sorry about that. Done as suggested. I am now getting a more informative error thanks to your suggestion.","body":"@tgdavies Sorry about that. Done as suggested. I am now getting a more informative error thanks to your suggestion."}],"answers":[{"comments":[{"owner":{"account_id":4183593,"reputation":1703,"user_id":3427866,"accept_rate":25,"display_name":"ads"},"score":0,"creation_date":1614221939,"post_id":66361734,"comment_id":117322047,"body_markdown":"Apparently I had to download and install Java Cryptography Extension (JCE) Unlimited Strength Jurisdiction Policy Files from Oracle website [http://www.oracle.com/technetwork/java/javase/downloads/jce8-download-2133166.html]. Just followed the instruction there and everything went well after.","body":"Apparently I had to download and install Java Cryptography Extension (JCE) Unlimited Strength Jurisdiction Policy Files from Oracle website [<a href=\"http://www.oracle.com/technetwork/java/javase/downloads/jce8-download-2133166.html]\" rel=\"nofollow noreferrer\">oracle.com/technetwork/java/javase/downloads/&hellip;</a>. Just followed the instruction there and everything went well after."}],"tags":[],"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1614221701,"creation_date":1614221701,"answer_id":66361734,"question_id":66360953,"body_markdown":"Your modified code works for me: (I have taken out the exception handling, but that should make no difference)\r\n```\r\npackage pgp;\r\n\r\nimport java.io.ByteArrayInputStream;\r\nimport java.io.ByteArrayOutputStream;\r\nimport java.io.IOException;\r\n\r\nimport java.io.InputStream;\r\nimport java.io.OutputStream;\r\n\r\nimport java.security.SecureRandom;\r\n\r\nimport java.util.Date;\r\nimport java.util.Iterator;\r\n\r\nimport org.bouncycastle.bcpg.SymmetricKeyAlgorithmTags;\r\nimport org.bouncycastle.openpgp.PGPEncryptedDataGenerator;\r\nimport org.bouncycastle.openpgp.PGPException;\r\nimport org.bouncycastle.openpgp.PGPLiteralData;\r\nimport org.bouncycastle.openpgp.PGPLiteralDataGenerator;\r\nimport org.bouncycastle.openpgp.PGPPrivateKey;\r\nimport org.bouncycastle.openpgp.PGPPublicKey;\r\nimport org.bouncycastle.openpgp.PGPPublicKeyRing;\r\nimport org.bouncycastle.openpgp.PGPPublicKeyRingCollection;\r\nimport org.bouncycastle.openpgp.PGPSecretKey;\r\nimport org.bouncycastle.openpgp.PGPUtil;\r\nimport org.bouncycastle.openpgp.operator.KeyFingerPrintCalculator;\r\nimport org.bouncycastle.openpgp.operator.PGPDataEncryptorBuilder;\r\nimport org.bouncycastle.openpgp.operator.PGPKeyEncryptionMethodGenerator;\r\nimport org.bouncycastle.openpgp.operator.jcajce.JcaKeyFingerprintCalculator;\r\nimport org.bouncycastle.openpgp.operator.jcajce.JcePBESecretKeyDecryptorBuilder;\r\nimport org.bouncycastle.openpgp.operator.jcajce.JcePGPDataEncryptorBuilder;\r\nimport org.bouncycastle.openpgp.operator.jcajce.JcePublicKeyKeyEncryptionMethodGenerator;\r\n\r\nimport org.bouncycastle.jce.provider.BouncyCastleProvider;\r\nimport org.bouncycastle.openpgp.PGPSecretKeyRing;\r\nimport org.bouncycastle.openpgp.PGPSecretKeyRingCollection;\r\nimport org.bouncycastle.openpgp.jcajce.JcaPGPPublicKeyRingCollection;\r\n\r\npublic class PgpImpl {\r\n\r\n    public PgpImpl() {\r\n    }\r\n\r\n    private static String encrypt(byte[] data, PGPPublicKey encryptionKey) throws PGPException, IOException {\r\n        BouncyCastleProvider provider = new BouncyCastleProvider();\r\n        String step = &quot;Step-0&quot;;\r\n        step = &quot;Step-1&quot;;\r\n        PGPEncryptedDataGenerator encGen = new PGPEncryptedDataGenerator(\r\n                new JcePGPDataEncryptorBuilder(SymmetricKeyAlgorithmTags.AES_256)\r\n                        .setWithIntegrityPacket(true)\r\n                        .setSecureRandom(new SecureRandom())\r\n                        .setProvider(provider));\r\n\r\n        step = &quot;Step-2&quot;;\r\n        encGen.addMethod(new JcePublicKeyKeyEncryptionMethodGenerator(encryptionKey)\r\n                .setSecureRandom(new SecureRandom()).setProvider(provider));\r\n\r\n        step = &quot;Step-3&quot;;\r\n        ByteArrayOutputStream encOut = new ByteArrayOutputStream();\r\n\r\n        step = &quot;Step-4&quot;;\r\n        // create an indefinite length encrypted stream\r\n        OutputStream cOut = encGen.open(encOut, new byte[1 &lt;&lt; 16]);\r\n        step = &quot;Step-5&quot;;\r\n        // write out the literal data\r\n        PGPLiteralDataGenerator lData = new PGPLiteralDataGenerator();\r\n        OutputStream pOut = lData.open(cOut, PGPLiteralData.BINARY, PGPLiteralData.CONSOLE, data.length,\r\n                new Date());\r\n        pOut.write(data);\r\n        pOut.close();\r\n        // finish the encryption\r\n        cOut.close();\r\n        step = &quot;Step-6&quot;;\r\n\r\n        return new String(encOut.toByteArray());\r\n    }\r\n\r\n    private static PGPPublicKey getPublicKey(String keyAscii) throws IOException, PGPException, Exception {\r\n        InputStream encodedKey = new ByteArrayInputStream(keyAscii.getBytes());\r\n        InputStream decodedKey = PGPUtil.getDecoderStream(encodedKey);\r\n\r\n        JcaPGPPublicKeyRingCollection pgpPub = new JcaPGPPublicKeyRingCollection(decodedKey);\r\n        decodedKey.close();\r\n\r\n        PGPPublicKey key = null;\r\n        Iterator&lt;PGPPublicKeyRing&gt; rIt = pgpPub.getKeyRings();\r\n        while (key == null &amp;&amp; rIt.hasNext()) {\r\n            PGPPublicKeyRing kRing = rIt.next();\r\n            Iterator&lt;PGPPublicKey&gt; kIt = kRing.getPublicKeys();\r\n\r\n            while (key == null &amp;&amp; kIt.hasNext()) {\r\n                PGPPublicKey k = kIt.next();\r\n\r\n                if (k.isEncryptionKey()) {\r\n                    key = k;\r\n                }\r\n            }\r\n        }\r\n        if (key == null) {\r\n            throw new Exception(&quot;Can&#39;t find key&quot;);\r\n        }\r\n        return key;\r\n    }\r\n\r\n    public static void main(String[] args) throws Exception {\r\n        String publicKey = &quot;-----BEGIN PGP PUBLIC KEY BLOCK-----\\r\\n&quot; + &quot;Version: GnuPG v2.0.22 (GNU/Linux)\\r\\n&quot;\r\n                           + &quot;\\r\\n&quot; + &quot;mQENBGA1A70BCADK8BnH6GgMbnS1TJSpJvgH+D9VIw0sN8XZWQsUmWWV9WSqhqXt\\r\\n&quot;\r\n                           + &quot;5wNC4XJDcaWtMCapaekQXV5S52T7QCxAz/E5oZzIDe+IUCHQz0WUs37S4Wnw+SZ6\\r\\n&quot;\r\n                           + &quot;QNPXOFaC4nNByRq6gvg0+wtD2Bo/3OJur3f0O0aRSHNiwfd0PdFgG0NU5vGV9PwE\\r\\n&quot;\r\n                           + &quot;xbTMpGssWexIC0MwJaYfJkxzov33CkwLaITvBTCn/J3oeX6JarMkgpurp1FAW0Jk\\r\\n&quot;\r\n                           + &quot;YzgGMOOxwuEVedwP4NtEPce+UtLv2NHHfqsW6xSxjWqsJkMdJ9afzu1jvn9M6e0j\\r\\n&quot;\r\n                           + &quot;MOTmPUCYVCioXK59It8ngN8NLtwaPgfnBwcbABEBAAG0BWFsbGVuiQE5BBMBAgAj\\r\\n&quot;\r\n                           + &quot;BQJgNQO9AhsDBwsJCAcDAgEGFQgCCQoLBBYCAwECHgECF4AACgkQxzGJxIrjAlxq\\r\\n&quot;\r\n                           + &quot;aggAgoiO82MZZMHyhZ3uLD4qTQ2vsT6+onhCr83kw0eFNM5AH0r3xlVARXHaViWC\\r\\n&quot;\r\n                           + &quot;SFutpb/34lrCTpJfLfKwdFU2bJP2SI3hAujtTg45UFklswu6GZaqQno6JKkZM4hw\\r\\n&quot;\r\n                           + &quot;ltFIXU1dMpIud7nsJ2QU46TI97n+HeD7DvOSGY/CFPnNot0YFHxXCKtHdPHk8JO3\\r\\n&quot;\r\n                           + &quot;JdOG0X90Yi9XSI1USv8HL/WjOTvhSqo7Qps2MpcUZrfNsa0H9Adk9xVYiz0nKNPY\\r\\n&quot;\r\n                           + &quot;qLQxFAiHb34vdav4e28anJ8th93SfiRn5OFK2G6R3DlhLlvn3h1dSAT6vSOrzx80\\r\\n&quot;\r\n                           + &quot;EylyMg2BIbRfp+JEgwCMf2V8X7kBDQRgNQO9AQgA3qV0wYvdH5M4XBzVwDtuGuIs\\r\\n&quot;\r\n                           + &quot;+GRcSRQqmvnt94e8ZE4Kv2w2Pf/JxPMwnPC92lVRypdOjmTZrT3R0z7g+D8mU5A9\\r\\n&quot;\r\n                           + &quot;o/CPvvSShA8Jh3z69S+hLP0nSaajsVsQlBGrI8ehI1EVJDsNh15PZrl27OK0aBb4\\r\\n&quot;\r\n                           + &quot;Fp0BYm0D2HaLnQPD4/jhTR13i1mt5E5hmBwiZiiWr/Wa1i1g1o/XaT4CApu91zgg\\r\\n&quot;\r\n                           + &quot;cmJBz9DL/C2hYC5lkp/cz5IJYp5BsvfA2lwamca33aHxFj8+Bz3+REWa8zvEqQ9U\\r\\n&quot;\r\n                           + &quot;a26RbPVjkeGChwNWLxNTuj1rNDdqB/KZO6iM02orqW86L45SKTBWYqPcpD7GeQAR\\r\\n&quot;\r\n                           + &quot;AQABiQEfBBgBAgAJBQJgNQO9AhsMAAoJEMcxicSK4wJcOLEIAMevvOk9iZ13T3yA\\r\\n&quot;\r\n                           + &quot;+ZW8mWKKE5aXy93VPKAvplP/WlW2VVGeb+6rEkFFsdN4doYIJPEIr+U7K0GDR6XX\\r\\n&quot;\r\n                           + &quot;TKLyI7BtUZPegOdjgcFWVGFnFogDnkrO+IPY+JUy1VMg8fGStThfa2dYEgd7yqpq\\r\\n&quot;\r\n                           + &quot;fZ97q5RQun1B+wyRdPDgC39roSGEwtXbRCZnuSMVNT7J9a2qnXkenvQRSoPjY7wQ\\r\\n&quot;\r\n                           + &quot;tn1wUfnHyjyS9OzfXTSHDi2A5JDRCh5L/V7Q93/P5Isv/U4QzIWudGM6AjuaoZ6i\\r\\n&quot;\r\n                           + &quot;chksRI9EchNKnSut9ebTyTkIJ80sB7Eyfp8TtORAnz8/Xf8A8aYD73r9rD4poSmo\\r\\n&quot; + &quot;FV15pP8=\\r\\n&quot; +\r\n                           &quot;=Yc74\\r\\n&quot;\r\n                           + &quot;-----END PGP PUBLIC KEY BLOCK-----&quot;;\r\n\r\n        PGPPublicKey key = getPublicKey(publicKey);\r\n        System.out.println(encrypt(&quot;Test&quot;.getBytes(), key));\r\n    }\r\n}\r\n```\r\nMy pom.xml has:\r\n```\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\r\n            &lt;artifactId&gt;bcpg-jdk15on&lt;/artifactId&gt;\r\n            &lt;version&gt;1.68&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\r\n            &lt;artifactId&gt;bcprov-jdk15on&lt;/artifactId&gt;\r\n            &lt;version&gt;1.68&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n```\r\n\r\nCan you run that code and see what happens locally?","title":"PGP Encrypt using BouncyCastle in Java","body":"<p>Your modified code works for me: (I have taken out the exception handling, but that should make no difference)</p>\n<pre><code>package pgp;\n\nimport java.io.ByteArrayInputStream;\nimport java.io.ByteArrayOutputStream;\nimport java.io.IOException;\n\nimport java.io.InputStream;\nimport java.io.OutputStream;\n\nimport java.security.SecureRandom;\n\nimport java.util.Date;\nimport java.util.Iterator;\n\nimport org.bouncycastle.bcpg.SymmetricKeyAlgorithmTags;\nimport org.bouncycastle.openpgp.PGPEncryptedDataGenerator;\nimport org.bouncycastle.openpgp.PGPException;\nimport org.bouncycastle.openpgp.PGPLiteralData;\nimport org.bouncycastle.openpgp.PGPLiteralDataGenerator;\nimport org.bouncycastle.openpgp.PGPPrivateKey;\nimport org.bouncycastle.openpgp.PGPPublicKey;\nimport org.bouncycastle.openpgp.PGPPublicKeyRing;\nimport org.bouncycastle.openpgp.PGPPublicKeyRingCollection;\nimport org.bouncycastle.openpgp.PGPSecretKey;\nimport org.bouncycastle.openpgp.PGPUtil;\nimport org.bouncycastle.openpgp.operator.KeyFingerPrintCalculator;\nimport org.bouncycastle.openpgp.operator.PGPDataEncryptorBuilder;\nimport org.bouncycastle.openpgp.operator.PGPKeyEncryptionMethodGenerator;\nimport org.bouncycastle.openpgp.operator.jcajce.JcaKeyFingerprintCalculator;\nimport org.bouncycastle.openpgp.operator.jcajce.JcePBESecretKeyDecryptorBuilder;\nimport org.bouncycastle.openpgp.operator.jcajce.JcePGPDataEncryptorBuilder;\nimport org.bouncycastle.openpgp.operator.jcajce.JcePublicKeyKeyEncryptionMethodGenerator;\n\nimport org.bouncycastle.jce.provider.BouncyCastleProvider;\nimport org.bouncycastle.openpgp.PGPSecretKeyRing;\nimport org.bouncycastle.openpgp.PGPSecretKeyRingCollection;\nimport org.bouncycastle.openpgp.jcajce.JcaPGPPublicKeyRingCollection;\n\npublic class PgpImpl {\n\n    public PgpImpl() {\n    }\n\n    private static String encrypt(byte[] data, PGPPublicKey encryptionKey) throws PGPException, IOException {\n        BouncyCastleProvider provider = new BouncyCastleProvider();\n        String step = &quot;Step-0&quot;;\n        step = &quot;Step-1&quot;;\n        PGPEncryptedDataGenerator encGen = new PGPEncryptedDataGenerator(\n                new JcePGPDataEncryptorBuilder(SymmetricKeyAlgorithmTags.AES_256)\n                        .setWithIntegrityPacket(true)\n                        .setSecureRandom(new SecureRandom())\n                        .setProvider(provider));\n\n        step = &quot;Step-2&quot;;\n        encGen.addMethod(new JcePublicKeyKeyEncryptionMethodGenerator(encryptionKey)\n                .setSecureRandom(new SecureRandom()).setProvider(provider));\n\n        step = &quot;Step-3&quot;;\n        ByteArrayOutputStream encOut = new ByteArrayOutputStream();\n\n        step = &quot;Step-4&quot;;\n        // create an indefinite length encrypted stream\n        OutputStream cOut = encGen.open(encOut, new byte[1 &lt;&lt; 16]);\n        step = &quot;Step-5&quot;;\n        // write out the literal data\n        PGPLiteralDataGenerator lData = new PGPLiteralDataGenerator();\n        OutputStream pOut = lData.open(cOut, PGPLiteralData.BINARY, PGPLiteralData.CONSOLE, data.length,\n                new Date());\n        pOut.write(data);\n        pOut.close();\n        // finish the encryption\n        cOut.close();\n        step = &quot;Step-6&quot;;\n\n        return new String(encOut.toByteArray());\n    }\n\n    private static PGPPublicKey getPublicKey(String keyAscii) throws IOException, PGPException, Exception {\n        InputStream encodedKey = new ByteArrayInputStream(keyAscii.getBytes());\n        InputStream decodedKey = PGPUtil.getDecoderStream(encodedKey);\n\n        JcaPGPPublicKeyRingCollection pgpPub = new JcaPGPPublicKeyRingCollection(decodedKey);\n        decodedKey.close();\n\n        PGPPublicKey key = null;\n        Iterator&lt;PGPPublicKeyRing&gt; rIt = pgpPub.getKeyRings();\n        while (key == null &amp;&amp; rIt.hasNext()) {\n            PGPPublicKeyRing kRing = rIt.next();\n            Iterator&lt;PGPPublicKey&gt; kIt = kRing.getPublicKeys();\n\n            while (key == null &amp;&amp; kIt.hasNext()) {\n                PGPPublicKey k = kIt.next();\n\n                if (k.isEncryptionKey()) {\n                    key = k;\n                }\n            }\n        }\n        if (key == null) {\n            throw new Exception(&quot;Can't find key&quot;);\n        }\n        return key;\n    }\n\n    public static void main(String[] args) throws Exception {\n        String publicKey = &quot;-----BEGIN PGP PUBLIC KEY BLOCK-----\\r\\n&quot; + &quot;Version: GnuPG v2.0.22 (GNU/Linux)\\r\\n&quot;\n                           + &quot;\\r\\n&quot; + &quot;mQENBGA1A70BCADK8BnH6GgMbnS1TJSpJvgH+D9VIw0sN8XZWQsUmWWV9WSqhqXt\\r\\n&quot;\n                           + &quot;5wNC4XJDcaWtMCapaekQXV5S52T7QCxAz/E5oZzIDe+IUCHQz0WUs37S4Wnw+SZ6\\r\\n&quot;\n                           + &quot;QNPXOFaC4nNByRq6gvg0+wtD2Bo/3OJur3f0O0aRSHNiwfd0PdFgG0NU5vGV9PwE\\r\\n&quot;\n                           + &quot;xbTMpGssWexIC0MwJaYfJkxzov33CkwLaITvBTCn/J3oeX6JarMkgpurp1FAW0Jk\\r\\n&quot;\n                           + &quot;YzgGMOOxwuEVedwP4NtEPce+UtLv2NHHfqsW6xSxjWqsJkMdJ9afzu1jvn9M6e0j\\r\\n&quot;\n                           + &quot;MOTmPUCYVCioXK59It8ngN8NLtwaPgfnBwcbABEBAAG0BWFsbGVuiQE5BBMBAgAj\\r\\n&quot;\n                           + &quot;BQJgNQO9AhsDBwsJCAcDAgEGFQgCCQoLBBYCAwECHgECF4AACgkQxzGJxIrjAlxq\\r\\n&quot;\n                           + &quot;aggAgoiO82MZZMHyhZ3uLD4qTQ2vsT6+onhCr83kw0eFNM5AH0r3xlVARXHaViWC\\r\\n&quot;\n                           + &quot;SFutpb/34lrCTpJfLfKwdFU2bJP2SI3hAujtTg45UFklswu6GZaqQno6JKkZM4hw\\r\\n&quot;\n                           + &quot;ltFIXU1dMpIud7nsJ2QU46TI97n+HeD7DvOSGY/CFPnNot0YFHxXCKtHdPHk8JO3\\r\\n&quot;\n                           + &quot;JdOG0X90Yi9XSI1USv8HL/WjOTvhSqo7Qps2MpcUZrfNsa0H9Adk9xVYiz0nKNPY\\r\\n&quot;\n                           + &quot;qLQxFAiHb34vdav4e28anJ8th93SfiRn5OFK2G6R3DlhLlvn3h1dSAT6vSOrzx80\\r\\n&quot;\n                           + &quot;EylyMg2BIbRfp+JEgwCMf2V8X7kBDQRgNQO9AQgA3qV0wYvdH5M4XBzVwDtuGuIs\\r\\n&quot;\n                           + &quot;+GRcSRQqmvnt94e8ZE4Kv2w2Pf/JxPMwnPC92lVRypdOjmTZrT3R0z7g+D8mU5A9\\r\\n&quot;\n                           + &quot;o/CPvvSShA8Jh3z69S+hLP0nSaajsVsQlBGrI8ehI1EVJDsNh15PZrl27OK0aBb4\\r\\n&quot;\n                           + &quot;Fp0BYm0D2HaLnQPD4/jhTR13i1mt5E5hmBwiZiiWr/Wa1i1g1o/XaT4CApu91zgg\\r\\n&quot;\n                           + &quot;cmJBz9DL/C2hYC5lkp/cz5IJYp5BsvfA2lwamca33aHxFj8+Bz3+REWa8zvEqQ9U\\r\\n&quot;\n                           + &quot;a26RbPVjkeGChwNWLxNTuj1rNDdqB/KZO6iM02orqW86L45SKTBWYqPcpD7GeQAR\\r\\n&quot;\n                           + &quot;AQABiQEfBBgBAgAJBQJgNQO9AhsMAAoJEMcxicSK4wJcOLEIAMevvOk9iZ13T3yA\\r\\n&quot;\n                           + &quot;+ZW8mWKKE5aXy93VPKAvplP/WlW2VVGeb+6rEkFFsdN4doYIJPEIr+U7K0GDR6XX\\r\\n&quot;\n                           + &quot;TKLyI7BtUZPegOdjgcFWVGFnFogDnkrO+IPY+JUy1VMg8fGStThfa2dYEgd7yqpq\\r\\n&quot;\n                           + &quot;fZ97q5RQun1B+wyRdPDgC39roSGEwtXbRCZnuSMVNT7J9a2qnXkenvQRSoPjY7wQ\\r\\n&quot;\n                           + &quot;tn1wUfnHyjyS9OzfXTSHDi2A5JDRCh5L/V7Q93/P5Isv/U4QzIWudGM6AjuaoZ6i\\r\\n&quot;\n                           + &quot;chksRI9EchNKnSut9ebTyTkIJ80sB7Eyfp8TtORAnz8/Xf8A8aYD73r9rD4poSmo\\r\\n&quot; + &quot;FV15pP8=\\r\\n&quot; +\n                           &quot;=Yc74\\r\\n&quot;\n                           + &quot;-----END PGP PUBLIC KEY BLOCK-----&quot;;\n\n        PGPPublicKey key = getPublicKey(publicKey);\n        System.out.println(encrypt(&quot;Test&quot;.getBytes(), key));\n    }\n}\n</code></pre>\n<p>My pom.xml has:</p>\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\n            &lt;artifactId&gt;bcpg-jdk15on&lt;/artifactId&gt;\n            &lt;version&gt;1.68&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\n            &lt;artifactId&gt;bcprov-jdk15on&lt;/artifactId&gt;\n            &lt;version&gt;1.68&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>Can you run that code and see what happens locally?</p>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1693610102,"post_id":77023671,"comment_id":135788288,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/77023671/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":26377396,"reputation":1,"user_id":20031133,"display_name":"Vrashabh Paliwal"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693576221,"creation_date":1693576221,"answer_id":77023671,"question_id":66360953,"body_markdown":"Caused by: java.security.NoSuchProviderException: no such provider: BC\r\n\r\nFor the above error which you were getting first, add below line of code at the starting\r\n\r\nSecurity.addProvider(new BouncyCastleProvider());","title":"PGP Encrypt using BouncyCastle in Java","body":"<p>Caused by: java.security.NoSuchProviderException: no such provider: BC</p>\n<p>For the above error which you were getting first, add below line of code at the starting</p>\n<p>Security.addProvider(new BouncyCastleProvider());</p>\n"}],"owner":{"account_id":4183593,"reputation":1703,"user_id":3427866,"accept_rate":25,"display_name":"ads"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5653,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1693576221,"creation_date":1614214405,"question_id":66360953,"body_markdown":"I was given a task to build a java method to encrypt data (String or InputStream) using PGP. I have generated a test public key, private key with passphrase following the guide [here][1]. I then exported the public key using the command below and copy and pasted it to my java code.\r\n\r\n    gpg --armor --output pubkey.txt --export &#39;Your Name&#39;\r\n\r\nI am able to encrypt a file using the command below\r\n\r\n    gpg --encrypt --armor -r &#39;Your Name&#39; plaintext.txt\r\n\r\nAnd I get the below content which is what I&#39;m trying to achieve in my java program. I might need to sign it later as part of the requirement but all I want to do for now is to be able to successfully encrypt it like this.\r\n\r\n\t-----BEGIN PGP MESSAGE-----\r\n\tVersion: GnuPG v2.0.22 (GNU/Linux)\r\n\r\n\thQEMA0PxXau0Q30VAQf/RuWsN3f4L2HW2GJWOZUjetJsw0odXYbDc7Sug1gZULP8\r\n\tI0KRrvxnHgiiJgSlBZsws8E8iB1/LDCYJ8oJGj6olicz83iUT8VLdzdJZlc0+96/\r\n\tBHAvtSTtEv2PWZlh307nU+Zn9cuGAccaijyekCosS5/0JpDyXSFefsLTexMgphAL\r\n\tveXsxtsISyUU6S0xUux6Ac9HgUWTpCrlNaSdqBN1bk7y8YuvbZgbQ5akwY5FEbq1\r\n\tf9rxmgXgEgz3N+7f8n5yN2OvWiEyXb+qngVgDLzysD8NTtKDqtw5nViscvVF1h3v\r\n\tAebdxYxOKGYnWk6XAWhpIgIZdY0ZXG0yu9NJH5VfLtJSAc3c6d2/Nhb7g+k+f2Mn\r\n\tsrZW6XzHCeyGQQqSfr5YJfyUVdsW12udmhnc+ErbRkz84oDkMvFaxes6+2AAKrP/\r\n\tjdWXsp4fTPl454m+tG5ec/Kn0Q==\r\n\t=cZH2\r\n\t-----END PGP MESSAGE-----\r\n\r\nThe java method I need to build accepts a Public Key as a String parameter where I then use the following method to convert it to a PGPPublicKey.\r\n\r\n      private static PGPPublicKey getPublicKey(String keyAscii) throws IOException, PGPException, Exception {\r\n        InputStream encodedKey = new ByteArrayInputStream(keyAscii.getBytes());\r\n        InputStream decodedKey = PGPUtil.getDecoderStream(encodedKey);\r\n\r\n        JcaPGPPublicKeyRingCollection pgpPub = new JcaPGPPublicKeyRingCollection(decodedKey);\r\n        decodedKey.close();\r\n\r\n        PGPPublicKey key = null;\r\n        Iterator&lt;PGPPublicKeyRing&gt; rIt = pgpPub.getKeyRings();\r\n        while (key == null &amp;&amp; rIt.hasNext()) {\r\n          PGPPublicKeyRing kRing = rIt.next();\r\n          Iterator&lt;PGPPublicKey&gt; kIt = kRing.getPublicKeys();\r\n\r\n          while (key == null &amp;&amp; kIt.hasNext()) {\r\n            PGPPublicKey k = kIt.next();\r\n\r\n            if (k.isEncryptionKey()) {\r\n              key = k;\r\n            }\r\n          }\r\n        }\r\n        if (key == null) {\r\n          throw new Exception(&quot;Can&#39;t find key&quot;);\r\n        }\r\n        return key;\r\n      }\r\n\r\nHowever, when I run the java program, I get an error &quot;exception constructing public key&quot; on the following line of code.\r\n\r\n          OutputStream cOut = encGen.open(encOut, new byte[4096]);\r\n\r\nComplete error below\r\n\r\n\torg.bouncycastle.openpgp.PGPException: exception constructing public key\r\n\t\tat org.bouncycastle.openpgp.operator.jcajce.JcaPGPKeyConverter.getPublicKey(Unknown Source)\r\n\t\tat org.bouncycastle.openpgp.operator.jcajce.JcePublicKeyKeyEncryptionMethodGenerator.encryptSessionInfo(Unknown Source)\r\n\t\tat org.bouncycastle.openpgp.operator.PublicKeyKeyEncryptionMethodGenerator.generate(Unknown Source)\r\n\t\tat org.bouncycastle.openpgp.PGPEncryptedDataGenerator.open(Unknown Source)\r\n\t\tat org.bouncycastle.openpgp.PGPEncryptedDataGenerator.open(Unknown Source)\r\n\t\tat pgp.PgpImpl.encrypt(PgpImpl.java:84)\r\n\t\tat pgp.PgpImpl.main(PgpImpl.java:216)\r\n\tCaused by: java.security.NoSuchProviderException: no such provider: BC\r\n\t\tat sun.security.jca.GetInstance.getService(GetInstance.java:83)\r\n\t\tat sun.security.jca.GetInstance.getInstance(GetInstance.java:206)\r\n\t\tat java.security.KeyFactory.getInstance(KeyFactory.java:211)\r\n\t\tat org.bouncycastle.jcajce.util.NamedJcaJceHelper.createKeyFactory(Unknown Source)\r\n\t\tat org.bouncycastle.openpgp.operator.jcajce.OperatorHelper.createKeyFactory(Unknown Source)\r\n\t\tat org.bouncycastle.openpgp.operator.jcajce.JcaPGPKeyConverter.implGeneratePublic(Unknown Source)\r\n\t\t... 7 more\r\n\r\nI followed the sample [here][2] but it didn&#39;t provide any information on how to construct the publickey coming from a String.\r\n\r\nHere&#39;s my code so far.\r\n\r\n    package pgp;\r\n\r\n    import java.io.ByteArrayInputStream;\r\n    import java.io.ByteArrayOutputStream;\r\n    import java.io.IOException;\r\n\r\n    import java.io.InputStream;\r\n    import java.io.OutputStream;\r\n\r\n    import java.security.SecureRandom;\r\n\r\n    import java.util.Date;\r\n    import java.util.Iterator;\r\n\r\n    import org.bouncycastle.bcpg.SymmetricKeyAlgorithmTags;\r\n    import org.bouncycastle.openpgp.PGPEncryptedDataGenerator;\r\n    import org.bouncycastle.openpgp.PGPException;\r\n    import org.bouncycastle.openpgp.PGPLiteralData;\r\n    import org.bouncycastle.openpgp.PGPLiteralDataGenerator;\r\n    import org.bouncycastle.openpgp.PGPPrivateKey;\r\n    import org.bouncycastle.openpgp.PGPPublicKey;\r\n    import org.bouncycastle.openpgp.PGPPublicKeyRing;\r\n    import org.bouncycastle.openpgp.PGPPublicKeyRingCollection;\r\n    import org.bouncycastle.openpgp.PGPSecretKey;\r\n    import org.bouncycastle.openpgp.PGPUtil;\r\n    import org.bouncycastle.openpgp.operator.KeyFingerPrintCalculator;\r\n    import org.bouncycastle.openpgp.operator.PGPDataEncryptorBuilder;\r\n    import org.bouncycastle.openpgp.operator.PGPKeyEncryptionMethodGenerator;\r\n    import org.bouncycastle.openpgp.operator.jcajce.JcaKeyFingerprintCalculator;\r\n    import org.bouncycastle.openpgp.operator.jcajce.JcePBESecretKeyDecryptorBuilder;\r\n    import org.bouncycastle.openpgp.operator.jcajce.JcePGPDataEncryptorBuilder;\r\n    import org.bouncycastle.openpgp.operator.jcajce.JcePublicKeyKeyEncryptionMethodGenerator;\r\n\r\n    import org.bouncycastle.jce.provider.BouncyCastleProvider;\r\n    import org.bouncycastle.openpgp.PGPSecretKeyRing;\r\n    import org.bouncycastle.openpgp.PGPSecretKeyRingCollection;\r\n    import org.bouncycastle.openpgp.jcajce.JcaPGPPublicKeyRingCollection;\r\n\r\n    public class PgpImpl {\r\n\r\n      public PgpImpl() {\r\n      }\r\n\r\n      private static String encrypt(byte[] data, PGPPublicKey encryptionKey) throws Exception {\r\n        String step = &quot;Step-0&quot;;\r\n        try {\r\n          step = &quot;Step-1&quot;;\r\n          PGPEncryptedDataGenerator encGen = new PGPEncryptedDataGenerator(\r\n              new JcePGPDataEncryptorBuilder(SymmetricKeyAlgorithmTags.AES_256)\r\n              .setWithIntegrityPacket(true)\r\n              .setSecureRandom(new SecureRandom())\r\n              .setProvider(&quot;BC&quot;));\r\n          \r\n          step = &quot;Step-2&quot;;\r\n          encGen.addMethod(new JcePublicKeyKeyEncryptionMethodGenerator(encryptionKey)\r\n              .setSecureRandom(new SecureRandom()).setProvider(&quot;BC&quot;));\r\n\r\n          step = &quot;Step-3&quot;;\r\n          ByteArrayOutputStream encOut = new ByteArrayOutputStream();\r\n\r\n          step = &quot;Step-4&quot;;\r\n          // create an indefinite length encrypted stream\r\n          OutputStream cOut = encGen.open(encOut, new byte[4096]);\r\n          step = &quot;Step-5&quot;;\r\n          // write out the literal data\r\n          PGPLiteralDataGenerator lData = new PGPLiteralDataGenerator();\r\n          OutputStream pOut = lData.open(cOut, PGPLiteralData.BINARY, PGPLiteralData.CONSOLE, data.length,\r\n              new Date());\r\n          pOut.write(data);\r\n          pOut.close();\r\n          // finish the encryption\r\n          cOut.close();\r\n          step = &quot;Step-6&quot;;\r\n          \r\n          return new String(encOut.toByteArray());\r\n        } catch (Exception e) {\r\n          //throw new Exception(String.format(&quot;%s: %s&quot;, e.getMessage(), step));\r\n          e.printStackTrace();\r\n        }\r\n        return new String(step);\r\n      }\r\n\r\n      private static PGPPublicKey getPublicKey(String keyAscii) throws IOException, PGPException, Exception {\r\n        InputStream encodedKey = new ByteArrayInputStream(keyAscii.getBytes());\r\n        InputStream decodedKey = PGPUtil.getDecoderStream(encodedKey);\r\n\r\n        JcaPGPPublicKeyRingCollection pgpPub = new JcaPGPPublicKeyRingCollection(decodedKey);\r\n        decodedKey.close();\r\n\r\n        PGPPublicKey key = null;\r\n        Iterator&lt;PGPPublicKeyRing&gt; rIt = pgpPub.getKeyRings();\r\n        while (key == null &amp;&amp; rIt.hasNext()) {\r\n          PGPPublicKeyRing kRing = rIt.next();\r\n          Iterator&lt;PGPPublicKey&gt; kIt = kRing.getPublicKeys();\r\n\r\n          while (key == null &amp;&amp; kIt.hasNext()) {\r\n            PGPPublicKey k = kIt.next();\r\n\r\n            if (k.isEncryptionKey()) {\r\n              key = k;\r\n            }\r\n          }\r\n        }\r\n        if (key == null) {\r\n          throw new Exception(&quot;Can&#39;t find key&quot;);\r\n        }\r\n        return key;\r\n      }\r\n\r\n      public static void main(String[] args) {\r\n        String publicKey = &quot;-----BEGIN PGP PUBLIC KEY BLOCK-----\\r\\n&quot; + &quot;Version: GnuPG v2.0.22 (GNU/Linux)\\r\\n&quot;\r\n            + &quot;\\r\\n&quot; + &quot;mQENBGA1A70BCADK8BnH6GgMbnS1TJSpJvgH+D9VIw0sN8XZWQsUmWWV9WSqhqXt\\r\\n&quot;\r\n            + &quot;5wNC4XJDcaWtMCapaekQXV5S52T7QCxAz/E5oZzIDe+IUCHQz0WUs37S4Wnw+SZ6\\r\\n&quot;\r\n            + &quot;QNPXOFaC4nNByRq6gvg0+wtD2Bo/3OJur3f0O0aRSHNiwfd0PdFgG0NU5vGV9PwE\\r\\n&quot;\r\n            + &quot;xbTMpGssWexIC0MwJaYfJkxzov33CkwLaITvBTCn/J3oeX6JarMkgpurp1FAW0Jk\\r\\n&quot;\r\n            + &quot;YzgGMOOxwuEVedwP4NtEPce+UtLv2NHHfqsW6xSxjWqsJkMdJ9afzu1jvn9M6e0j\\r\\n&quot;\r\n            + &quot;MOTmPUCYVCioXK59It8ngN8NLtwaPgfnBwcbABEBAAG0BWFsbGVuiQE5BBMBAgAj\\r\\n&quot;\r\n            + &quot;BQJgNQO9AhsDBwsJCAcDAgEGFQgCCQoLBBYCAwECHgECF4AACgkQxzGJxIrjAlxq\\r\\n&quot;\r\n            + &quot;aggAgoiO82MZZMHyhZ3uLD4qTQ2vsT6+onhCr83kw0eFNM5AH0r3xlVARXHaViWC\\r\\n&quot;\r\n            + &quot;SFutpb/34lrCTpJfLfKwdFU2bJP2SI3hAujtTg45UFklswu6GZaqQno6JKkZM4hw\\r\\n&quot;\r\n            + &quot;ltFIXU1dMpIud7nsJ2QU46TI97n+HeD7DvOSGY/CFPnNot0YFHxXCKtHdPHk8JO3\\r\\n&quot;\r\n            + &quot;JdOG0X90Yi9XSI1USv8HL/WjOTvhSqo7Qps2MpcUZrfNsa0H9Adk9xVYiz0nKNPY\\r\\n&quot;\r\n            + &quot;qLQxFAiHb34vdav4e28anJ8th93SfiRn5OFK2G6R3DlhLlvn3h1dSAT6vSOrzx80\\r\\n&quot;\r\n            + &quot;EylyMg2BIbRfp+JEgwCMf2V8X7kBDQRgNQO9AQgA3qV0wYvdH5M4XBzVwDtuGuIs\\r\\n&quot;\r\n            + &quot;+GRcSRQqmvnt94e8ZE4Kv2w2Pf/JxPMwnPC92lVRypdOjmTZrT3R0z7g+D8mU5A9\\r\\n&quot;\r\n            + &quot;o/CPvvSShA8Jh3z69S+hLP0nSaajsVsQlBGrI8ehI1EVJDsNh15PZrl27OK0aBb4\\r\\n&quot;\r\n            + &quot;Fp0BYm0D2HaLnQPD4/jhTR13i1mt5E5hmBwiZiiWr/Wa1i1g1o/XaT4CApu91zgg\\r\\n&quot;\r\n            + &quot;cmJBz9DL/C2hYC5lkp/cz5IJYp5BsvfA2lwamca33aHxFj8+Bz3+REWa8zvEqQ9U\\r\\n&quot;\r\n            + &quot;a26RbPVjkeGChwNWLxNTuj1rNDdqB/KZO6iM02orqW86L45SKTBWYqPcpD7GeQAR\\r\\n&quot;\r\n            + &quot;AQABiQEfBBgBAgAJBQJgNQO9AhsMAAoJEMcxicSK4wJcOLEIAMevvOk9iZ13T3yA\\r\\n&quot;\r\n            + &quot;+ZW8mWKKE5aXy93VPKAvplP/WlW2VVGeb+6rEkFFsdN4doYIJPEIr+U7K0GDR6XX\\r\\n&quot;\r\n            + &quot;TKLyI7BtUZPegOdjgcFWVGFnFogDnkrO+IPY+JUy1VMg8fGStThfa2dYEgd7yqpq\\r\\n&quot;\r\n            + &quot;fZ97q5RQun1B+wyRdPDgC39roSGEwtXbRCZnuSMVNT7J9a2qnXkenvQRSoPjY7wQ\\r\\n&quot;\r\n            + &quot;tn1wUfnHyjyS9OzfXTSHDi2A5JDRCh5L/V7Q93/P5Isv/U4QzIWudGM6AjuaoZ6i\\r\\n&quot;\r\n            + &quot;chksRI9EchNKnSut9ebTyTkIJ80sB7Eyfp8TtORAnz8/Xf8A8aYD73r9rD4poSmo\\r\\n&quot; + &quot;FV15pP8=\\r\\n&quot; + &quot;=Yc74\\r\\n&quot;\r\n            + &quot;-----END PGP PUBLIC KEY BLOCK-----&quot;;\r\n\r\n        try {\r\n          PGPPublicKey key = getPublicKey(publicKey);\r\n          System.out.println(encrypt(&quot;Test&quot;.getBytes(), key));\r\n        } catch (IOException e) {\r\n          // TODO Auto-generated catch block\r\n          e.printStackTrace();\r\n        } catch (PGPException e) {\r\n          // TODO Auto-generated catch block\r\n          e.printStackTrace();\r\n        } catch (Exception e) {\r\n          // TODO Auto-generated catch block\r\n          e.printStackTrace();\r\n        }\r\n      }\r\n    }\r\n\r\n\r\n\r\nAppreciate any help.\r\n\r\nUPDATE #1: After getting the stacktrace, I found out that the error is due to an invalid provider which I then change using\r\n\r\n    BouncyCastleProvider provider = new BouncyCastleProvider();\r\n\r\nSo I had to change all reference to the provider.\r\n\r\n\tprivate static String encrypt(byte[] data, PGPPublicKey encryptionKey) {\r\n\t\tBouncyCastleProvider provider = new BouncyCastleProvider();\r\n\t\tString step = &quot;Step-0&quot;;\r\n\t\ttry {\r\n\t\t\tstep = &quot;Step-1&quot;;\r\n\t\t\tPGPEncryptedDataGenerator encGen = new PGPEncryptedDataGenerator(\r\n\t\t\t\t\tnew JcePGPDataEncryptorBuilder(SymmetricKeyAlgorithmTags.AES_256)\r\n\t\t\t\t\t.setWithIntegrityPacket(true)\r\n\t\t\t\t\t.setSecureRandom(new SecureRandom())\r\n\t\t\t\t\t.setProvider(provider));\r\n\t\t\t\r\n\t\t\tstep = &quot;Step-2&quot;;\r\n\t\t\tencGen.addMethod(new JcePublicKeyKeyEncryptionMethodGenerator(encryptionKey)\r\n\t\t\t\t\t.setSecureRandom(new SecureRandom()).setProvider(provider));\r\n\r\n\t\t\tstep = &quot;Step-3&quot;;\r\n\t\t\tByteArrayOutputStream encOut = new ByteArrayOutputStream();\r\n\r\n\t\t\tstep = &quot;Step-4&quot;;\r\n\t\t\t// create an indefinite length encrypted stream\r\n\t\t\tOutputStream cOut = encGen.open(encOut, new byte[1 &lt;&lt; 16]);\r\n\t\t\tstep = &quot;Step-5&quot;;\r\n\t\t\t// write out the literal data\r\n\t\t\tPGPLiteralDataGenerator lData = new PGPLiteralDataGenerator();\r\n\t\t\tOutputStream pOut = lData.open(cOut, PGPLiteralData.BINARY, PGPLiteralData.CONSOLE, data.length,\r\n\t\t\t\t\tnew Date());\r\n\t\t\tpOut.write(data);\r\n\t\t\tpOut.close();\r\n\t\t\t// finish the encryption\r\n\t\t\tcOut.close();\r\n\t\t\tstep = &quot;Step-6&quot;;\r\n\t\t\t\r\n\t\t\treturn new String(encOut.toByteArray());\r\n\t\t} catch (Exception e) {\r\n\t\t\t//throw new Exception(String.format(&quot;%s: %s&quot;, e.getMessage(), step));\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\treturn new String(&quot;&quot;);\r\n\t}\r\n\r\nBut now I&#39;m getting a different error.\r\n\r\n\torg.bouncycastle.openpgp.PGPException: Exception creating cipher\r\n\r\n\t\tat org.bouncycastle.openpgp.PGPEncryptedDataGenerator.open(Unknown Source)\r\n\t\tat org.bouncycastle.openpgp.PGPEncryptedDataGenerator.open(Unknown Source)\r\n\t\tat pgp.PgpImpl.encrypt(PgpImpl.java:85)\r\n\t\tat pgp.PgpImpl.main(PgpImpl.java:217)\r\n\tCaused by: org.bouncycastle.openpgp.PGPException: invalid key: Illegal key size\r\n\t\tat org.bouncycastle.openpgp.operator.jcajce.JcePGPDataEncryptorBuilder$MyPGPDataEncryptor.&lt;init&gt;(Unknown Source)\r\n\t\tat org.bouncycastle.openpgp.operator.jcajce.JcePGPDataEncryptorBuilder.build(Unknown Source)\r\n\t\t... 4 more\r\n\tCaused by: java.security.InvalidKeyException: Illegal key size\r\n\t\tat javax.crypto.Cipher.checkCryptoPerm(Cipher.java:1034)\r\n\t\tat javax.crypto.Cipher.init(Cipher.java:1367)\r\n\t\tat javax.crypto.Cipher.init(Cipher.java:1301)\r\n\t\t... 6 more\r\n\r\nUPDATE#2: Did a bit of research and came across [this][3]. Followed the instructions there and got everything working.\r\n\r\n\r\n  [1]: https://edoceo.com/sys/gpg\r\n  [2]: https://stackoverflow.com/questions/61826843/java-pgp-encryption-using-bouncy-castle\r\n  [3]: https://help.mulesoft.com/s/article/Illegal-key-size-Error-when-using-PGP","title":"PGP Encrypt using BouncyCastle in Java","body":"<p>I was given a task to build a java method to encrypt data (String or InputStream) using PGP. I have generated a test public key, private key with passphrase following the guide <a href=\"https://edoceo.com/sys/gpg\" rel=\"nofollow noreferrer\">here</a>. I then exported the public key using the command below and copy and pasted it to my java code.</p>\n<pre><code>gpg --armor --output pubkey.txt --export 'Your Name'\n</code></pre>\n<p>I am able to encrypt a file using the command below</p>\n<pre><code>gpg --encrypt --armor -r 'Your Name' plaintext.txt\n</code></pre>\n<p>And I get the below content which is what I'm trying to achieve in my java program. I might need to sign it later as part of the requirement but all I want to do for now is to be able to successfully encrypt it like this.</p>\n<pre><code>-----BEGIN PGP MESSAGE-----\nVersion: GnuPG v2.0.22 (GNU/Linux)\n\nhQEMA0PxXau0Q30VAQf/RuWsN3f4L2HW2GJWOZUjetJsw0odXYbDc7Sug1gZULP8\nI0KRrvxnHgiiJgSlBZsws8E8iB1/LDCYJ8oJGj6olicz83iUT8VLdzdJZlc0+96/\nBHAvtSTtEv2PWZlh307nU+Zn9cuGAccaijyekCosS5/0JpDyXSFefsLTexMgphAL\nveXsxtsISyUU6S0xUux6Ac9HgUWTpCrlNaSdqBN1bk7y8YuvbZgbQ5akwY5FEbq1\nf9rxmgXgEgz3N+7f8n5yN2OvWiEyXb+qngVgDLzysD8NTtKDqtw5nViscvVF1h3v\nAebdxYxOKGYnWk6XAWhpIgIZdY0ZXG0yu9NJH5VfLtJSAc3c6d2/Nhb7g+k+f2Mn\nsrZW6XzHCeyGQQqSfr5YJfyUVdsW12udmhnc+ErbRkz84oDkMvFaxes6+2AAKrP/\njdWXsp4fTPl454m+tG5ec/Kn0Q==\n=cZH2\n-----END PGP MESSAGE-----\n</code></pre>\n<p>The java method I need to build accepts a Public Key as a String parameter where I then use the following method to convert it to a PGPPublicKey.</p>\n<pre><code>  private static PGPPublicKey getPublicKey(String keyAscii) throws IOException, PGPException, Exception {\n    InputStream encodedKey = new ByteArrayInputStream(keyAscii.getBytes());\n    InputStream decodedKey = PGPUtil.getDecoderStream(encodedKey);\n\n    JcaPGPPublicKeyRingCollection pgpPub = new JcaPGPPublicKeyRingCollection(decodedKey);\n    decodedKey.close();\n\n    PGPPublicKey key = null;\n    Iterator&lt;PGPPublicKeyRing&gt; rIt = pgpPub.getKeyRings();\n    while (key == null &amp;&amp; rIt.hasNext()) {\n      PGPPublicKeyRing kRing = rIt.next();\n      Iterator&lt;PGPPublicKey&gt; kIt = kRing.getPublicKeys();\n\n      while (key == null &amp;&amp; kIt.hasNext()) {\n        PGPPublicKey k = kIt.next();\n\n        if (k.isEncryptionKey()) {\n          key = k;\n        }\n      }\n    }\n    if (key == null) {\n      throw new Exception(&quot;Can't find key&quot;);\n    }\n    return key;\n  }\n</code></pre>\n<p>However, when I run the java program, I get an error &quot;exception constructing public key&quot; on the following line of code.</p>\n<pre><code>      OutputStream cOut = encGen.open(encOut, new byte[4096]);\n</code></pre>\n<p>Complete error below</p>\n<pre><code>org.bouncycastle.openpgp.PGPException: exception constructing public key\n    at org.bouncycastle.openpgp.operator.jcajce.JcaPGPKeyConverter.getPublicKey(Unknown Source)\n    at org.bouncycastle.openpgp.operator.jcajce.JcePublicKeyKeyEncryptionMethodGenerator.encryptSessionInfo(Unknown Source)\n    at org.bouncycastle.openpgp.operator.PublicKeyKeyEncryptionMethodGenerator.generate(Unknown Source)\n    at org.bouncycastle.openpgp.PGPEncryptedDataGenerator.open(Unknown Source)\n    at org.bouncycastle.openpgp.PGPEncryptedDataGenerator.open(Unknown Source)\n    at pgp.PgpImpl.encrypt(PgpImpl.java:84)\n    at pgp.PgpImpl.main(PgpImpl.java:216)\nCaused by: java.security.NoSuchProviderException: no such provider: BC\n    at sun.security.jca.GetInstance.getService(GetInstance.java:83)\n    at sun.security.jca.GetInstance.getInstance(GetInstance.java:206)\n    at java.security.KeyFactory.getInstance(KeyFactory.java:211)\n    at org.bouncycastle.jcajce.util.NamedJcaJceHelper.createKeyFactory(Unknown Source)\n    at org.bouncycastle.openpgp.operator.jcajce.OperatorHelper.createKeyFactory(Unknown Source)\n    at org.bouncycastle.openpgp.operator.jcajce.JcaPGPKeyConverter.implGeneratePublic(Unknown Source)\n    ... 7 more\n</code></pre>\n<p>I followed the sample <a href=\"https://stackoverflow.com/questions/61826843/java-pgp-encryption-using-bouncy-castle\">here</a> but it didn't provide any information on how to construct the publickey coming from a String.</p>\n<p>Here's my code so far.</p>\n<pre><code>package pgp;\n\nimport java.io.ByteArrayInputStream;\nimport java.io.ByteArrayOutputStream;\nimport java.io.IOException;\n\nimport java.io.InputStream;\nimport java.io.OutputStream;\n\nimport java.security.SecureRandom;\n\nimport java.util.Date;\nimport java.util.Iterator;\n\nimport org.bouncycastle.bcpg.SymmetricKeyAlgorithmTags;\nimport org.bouncycastle.openpgp.PGPEncryptedDataGenerator;\nimport org.bouncycastle.openpgp.PGPException;\nimport org.bouncycastle.openpgp.PGPLiteralData;\nimport org.bouncycastle.openpgp.PGPLiteralDataGenerator;\nimport org.bouncycastle.openpgp.PGPPrivateKey;\nimport org.bouncycastle.openpgp.PGPPublicKey;\nimport org.bouncycastle.openpgp.PGPPublicKeyRing;\nimport org.bouncycastle.openpgp.PGPPublicKeyRingCollection;\nimport org.bouncycastle.openpgp.PGPSecretKey;\nimport org.bouncycastle.openpgp.PGPUtil;\nimport org.bouncycastle.openpgp.operator.KeyFingerPrintCalculator;\nimport org.bouncycastle.openpgp.operator.PGPDataEncryptorBuilder;\nimport org.bouncycastle.openpgp.operator.PGPKeyEncryptionMethodGenerator;\nimport org.bouncycastle.openpgp.operator.jcajce.JcaKeyFingerprintCalculator;\nimport org.bouncycastle.openpgp.operator.jcajce.JcePBESecretKeyDecryptorBuilder;\nimport org.bouncycastle.openpgp.operator.jcajce.JcePGPDataEncryptorBuilder;\nimport org.bouncycastle.openpgp.operator.jcajce.JcePublicKeyKeyEncryptionMethodGenerator;\n\nimport org.bouncycastle.jce.provider.BouncyCastleProvider;\nimport org.bouncycastle.openpgp.PGPSecretKeyRing;\nimport org.bouncycastle.openpgp.PGPSecretKeyRingCollection;\nimport org.bouncycastle.openpgp.jcajce.JcaPGPPublicKeyRingCollection;\n\npublic class PgpImpl {\n\n  public PgpImpl() {\n  }\n\n  private static String encrypt(byte[] data, PGPPublicKey encryptionKey) throws Exception {\n    String step = &quot;Step-0&quot;;\n    try {\n      step = &quot;Step-1&quot;;\n      PGPEncryptedDataGenerator encGen = new PGPEncryptedDataGenerator(\n          new JcePGPDataEncryptorBuilder(SymmetricKeyAlgorithmTags.AES_256)\n          .setWithIntegrityPacket(true)\n          .setSecureRandom(new SecureRandom())\n          .setProvider(&quot;BC&quot;));\n      \n      step = &quot;Step-2&quot;;\n      encGen.addMethod(new JcePublicKeyKeyEncryptionMethodGenerator(encryptionKey)\n          .setSecureRandom(new SecureRandom()).setProvider(&quot;BC&quot;));\n\n      step = &quot;Step-3&quot;;\n      ByteArrayOutputStream encOut = new ByteArrayOutputStream();\n\n      step = &quot;Step-4&quot;;\n      // create an indefinite length encrypted stream\n      OutputStream cOut = encGen.open(encOut, new byte[4096]);\n      step = &quot;Step-5&quot;;\n      // write out the literal data\n      PGPLiteralDataGenerator lData = new PGPLiteralDataGenerator();\n      OutputStream pOut = lData.open(cOut, PGPLiteralData.BINARY, PGPLiteralData.CONSOLE, data.length,\n          new Date());\n      pOut.write(data);\n      pOut.close();\n      // finish the encryption\n      cOut.close();\n      step = &quot;Step-6&quot;;\n      \n      return new String(encOut.toByteArray());\n    } catch (Exception e) {\n      //throw new Exception(String.format(&quot;%s: %s&quot;, e.getMessage(), step));\n      e.printStackTrace();\n    }\n    return new String(step);\n  }\n\n  private static PGPPublicKey getPublicKey(String keyAscii) throws IOException, PGPException, Exception {\n    InputStream encodedKey = new ByteArrayInputStream(keyAscii.getBytes());\n    InputStream decodedKey = PGPUtil.getDecoderStream(encodedKey);\n\n    JcaPGPPublicKeyRingCollection pgpPub = new JcaPGPPublicKeyRingCollection(decodedKey);\n    decodedKey.close();\n\n    PGPPublicKey key = null;\n    Iterator&lt;PGPPublicKeyRing&gt; rIt = pgpPub.getKeyRings();\n    while (key == null &amp;&amp; rIt.hasNext()) {\n      PGPPublicKeyRing kRing = rIt.next();\n      Iterator&lt;PGPPublicKey&gt; kIt = kRing.getPublicKeys();\n\n      while (key == null &amp;&amp; kIt.hasNext()) {\n        PGPPublicKey k = kIt.next();\n\n        if (k.isEncryptionKey()) {\n          key = k;\n        }\n      }\n    }\n    if (key == null) {\n      throw new Exception(&quot;Can't find key&quot;);\n    }\n    return key;\n  }\n\n  public static void main(String[] args) {\n    String publicKey = &quot;-----BEGIN PGP PUBLIC KEY BLOCK-----\\r\\n&quot; + &quot;Version: GnuPG v2.0.22 (GNU/Linux)\\r\\n&quot;\n        + &quot;\\r\\n&quot; + &quot;mQENBGA1A70BCADK8BnH6GgMbnS1TJSpJvgH+D9VIw0sN8XZWQsUmWWV9WSqhqXt\\r\\n&quot;\n        + &quot;5wNC4XJDcaWtMCapaekQXV5S52T7QCxAz/E5oZzIDe+IUCHQz0WUs37S4Wnw+SZ6\\r\\n&quot;\n        + &quot;QNPXOFaC4nNByRq6gvg0+wtD2Bo/3OJur3f0O0aRSHNiwfd0PdFgG0NU5vGV9PwE\\r\\n&quot;\n        + &quot;xbTMpGssWexIC0MwJaYfJkxzov33CkwLaITvBTCn/J3oeX6JarMkgpurp1FAW0Jk\\r\\n&quot;\n        + &quot;YzgGMOOxwuEVedwP4NtEPce+UtLv2NHHfqsW6xSxjWqsJkMdJ9afzu1jvn9M6e0j\\r\\n&quot;\n        + &quot;MOTmPUCYVCioXK59It8ngN8NLtwaPgfnBwcbABEBAAG0BWFsbGVuiQE5BBMBAgAj\\r\\n&quot;\n        + &quot;BQJgNQO9AhsDBwsJCAcDAgEGFQgCCQoLBBYCAwECHgECF4AACgkQxzGJxIrjAlxq\\r\\n&quot;\n        + &quot;aggAgoiO82MZZMHyhZ3uLD4qTQ2vsT6+onhCr83kw0eFNM5AH0r3xlVARXHaViWC\\r\\n&quot;\n        + &quot;SFutpb/34lrCTpJfLfKwdFU2bJP2SI3hAujtTg45UFklswu6GZaqQno6JKkZM4hw\\r\\n&quot;\n        + &quot;ltFIXU1dMpIud7nsJ2QU46TI97n+HeD7DvOSGY/CFPnNot0YFHxXCKtHdPHk8JO3\\r\\n&quot;\n        + &quot;JdOG0X90Yi9XSI1USv8HL/WjOTvhSqo7Qps2MpcUZrfNsa0H9Adk9xVYiz0nKNPY\\r\\n&quot;\n        + &quot;qLQxFAiHb34vdav4e28anJ8th93SfiRn5OFK2G6R3DlhLlvn3h1dSAT6vSOrzx80\\r\\n&quot;\n        + &quot;EylyMg2BIbRfp+JEgwCMf2V8X7kBDQRgNQO9AQgA3qV0wYvdH5M4XBzVwDtuGuIs\\r\\n&quot;\n        + &quot;+GRcSRQqmvnt94e8ZE4Kv2w2Pf/JxPMwnPC92lVRypdOjmTZrT3R0z7g+D8mU5A9\\r\\n&quot;\n        + &quot;o/CPvvSShA8Jh3z69S+hLP0nSaajsVsQlBGrI8ehI1EVJDsNh15PZrl27OK0aBb4\\r\\n&quot;\n        + &quot;Fp0BYm0D2HaLnQPD4/jhTR13i1mt5E5hmBwiZiiWr/Wa1i1g1o/XaT4CApu91zgg\\r\\n&quot;\n        + &quot;cmJBz9DL/C2hYC5lkp/cz5IJYp5BsvfA2lwamca33aHxFj8+Bz3+REWa8zvEqQ9U\\r\\n&quot;\n        + &quot;a26RbPVjkeGChwNWLxNTuj1rNDdqB/KZO6iM02orqW86L45SKTBWYqPcpD7GeQAR\\r\\n&quot;\n        + &quot;AQABiQEfBBgBAgAJBQJgNQO9AhsMAAoJEMcxicSK4wJcOLEIAMevvOk9iZ13T3yA\\r\\n&quot;\n        + &quot;+ZW8mWKKE5aXy93VPKAvplP/WlW2VVGeb+6rEkFFsdN4doYIJPEIr+U7K0GDR6XX\\r\\n&quot;\n        + &quot;TKLyI7BtUZPegOdjgcFWVGFnFogDnkrO+IPY+JUy1VMg8fGStThfa2dYEgd7yqpq\\r\\n&quot;\n        + &quot;fZ97q5RQun1B+wyRdPDgC39roSGEwtXbRCZnuSMVNT7J9a2qnXkenvQRSoPjY7wQ\\r\\n&quot;\n        + &quot;tn1wUfnHyjyS9OzfXTSHDi2A5JDRCh5L/V7Q93/P5Isv/U4QzIWudGM6AjuaoZ6i\\r\\n&quot;\n        + &quot;chksRI9EchNKnSut9ebTyTkIJ80sB7Eyfp8TtORAnz8/Xf8A8aYD73r9rD4poSmo\\r\\n&quot; + &quot;FV15pP8=\\r\\n&quot; + &quot;=Yc74\\r\\n&quot;\n        + &quot;-----END PGP PUBLIC KEY BLOCK-----&quot;;\n\n    try {\n      PGPPublicKey key = getPublicKey(publicKey);\n      System.out.println(encrypt(&quot;Test&quot;.getBytes(), key));\n    } catch (IOException e) {\n      // TODO Auto-generated catch block\n      e.printStackTrace();\n    } catch (PGPException e) {\n      // TODO Auto-generated catch block\n      e.printStackTrace();\n    } catch (Exception e) {\n      // TODO Auto-generated catch block\n      e.printStackTrace();\n    }\n  }\n}\n</code></pre>\n<p>Appreciate any help.</p>\n<p>UPDATE #1: After getting the stacktrace, I found out that the error is due to an invalid provider which I then change using</p>\n<pre><code>BouncyCastleProvider provider = new BouncyCastleProvider();\n</code></pre>\n<p>So I had to change all reference to the provider.</p>\n<pre><code>private static String encrypt(byte[] data, PGPPublicKey encryptionKey) {\n    BouncyCastleProvider provider = new BouncyCastleProvider();\n    String step = &quot;Step-0&quot;;\n    try {\n        step = &quot;Step-1&quot;;\n        PGPEncryptedDataGenerator encGen = new PGPEncryptedDataGenerator(\n                new JcePGPDataEncryptorBuilder(SymmetricKeyAlgorithmTags.AES_256)\n                .setWithIntegrityPacket(true)\n                .setSecureRandom(new SecureRandom())\n                .setProvider(provider));\n        \n        step = &quot;Step-2&quot;;\n        encGen.addMethod(new JcePublicKeyKeyEncryptionMethodGenerator(encryptionKey)\n                .setSecureRandom(new SecureRandom()).setProvider(provider));\n\n        step = &quot;Step-3&quot;;\n        ByteArrayOutputStream encOut = new ByteArrayOutputStream();\n\n        step = &quot;Step-4&quot;;\n        // create an indefinite length encrypted stream\n        OutputStream cOut = encGen.open(encOut, new byte[1 &lt;&lt; 16]);\n        step = &quot;Step-5&quot;;\n        // write out the literal data\n        PGPLiteralDataGenerator lData = new PGPLiteralDataGenerator();\n        OutputStream pOut = lData.open(cOut, PGPLiteralData.BINARY, PGPLiteralData.CONSOLE, data.length,\n                new Date());\n        pOut.write(data);\n        pOut.close();\n        // finish the encryption\n        cOut.close();\n        step = &quot;Step-6&quot;;\n        \n        return new String(encOut.toByteArray());\n    } catch (Exception e) {\n        //throw new Exception(String.format(&quot;%s: %s&quot;, e.getMessage(), step));\n        e.printStackTrace();\n    }\n    return new String(&quot;&quot;);\n}\n</code></pre>\n<p>But now I'm getting a different error.</p>\n<pre><code>org.bouncycastle.openpgp.PGPException: Exception creating cipher\n\n    at org.bouncycastle.openpgp.PGPEncryptedDataGenerator.open(Unknown Source)\n    at org.bouncycastle.openpgp.PGPEncryptedDataGenerator.open(Unknown Source)\n    at pgp.PgpImpl.encrypt(PgpImpl.java:85)\n    at pgp.PgpImpl.main(PgpImpl.java:217)\nCaused by: org.bouncycastle.openpgp.PGPException: invalid key: Illegal key size\n    at org.bouncycastle.openpgp.operator.jcajce.JcePGPDataEncryptorBuilder$MyPGPDataEncryptor.&lt;init&gt;(Unknown Source)\n    at org.bouncycastle.openpgp.operator.jcajce.JcePGPDataEncryptorBuilder.build(Unknown Source)\n    ... 4 more\nCaused by: java.security.InvalidKeyException: Illegal key size\n    at javax.crypto.Cipher.checkCryptoPerm(Cipher.java:1034)\n    at javax.crypto.Cipher.init(Cipher.java:1367)\n    at javax.crypto.Cipher.init(Cipher.java:1301)\n    ... 6 more\n</code></pre>\n<p>UPDATE#2: Did a bit of research and came across <a href=\"https://help.mulesoft.com/s/article/Illegal-key-size-Error-when-using-PGP\" rel=\"nofollow noreferrer\">this</a>. Followed the instructions there and got everything working.</p>\n"},{"tags":["java","ssl","encryption"],"comments":[{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1693570799,"post_id":77022984,"comment_id":135782162,"body_markdown":"Your first command is using [streams](https://www.oracle.com/technical-resources/articles/java/architect-streams-pt2.html). You can add a _filter_ before the _forEach_.","body":"Your first command is using <a href=\"https://www.oracle.com/technical-resources/articles/java/architect-streams-pt2.html\" rel=\"nofollow noreferrer\">streams</a>. You can add a <i>filter</i> before the <i>forEach</i>."},{"owner":{"account_id":3421244,"reputation":35883,"user_id":2868801,"display_name":"dave_thompson_085"},"score":1,"creation_date":1693583146,"post_id":77022984,"comment_id":135784822,"body_markdown":"`jdk.tls.client.cipherSuites` is a _system_ property, not a security property; to set it you must [use `-D` on the command line or equivalent in an IDE etc, or call `System.setProperty`](https://docs.oracle.com/javase/8/docs/technotes/guides/security/jsse/JSSERefGuide.html#how-to-specify-a-java-lang-system-property)","body":"<code>jdk.tls.client.cipherSuites</code> is a <i>system</i> property, not a security property; to set it you must <a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/security/jsse/JSSERefGuide.html#how-to-specify-a-java-lang-system-property\" rel=\"nofollow noreferrer\">use <code>-D</code> on the command line or equivalent in an IDE etc, or call <code>System.setProperty</code></a>"},{"owner":{"account_id":85671,"reputation":40858,"user_id":238704,"display_name":"President James K. Polk"},"score":0,"creation_date":1693588496,"post_id":77022984,"comment_id":135785697,"body_markdown":"While there might be a million questions and answers about cipher suites out there, there aren&#39;t so many that point out the correct reference for customizing them: [The JSSE Reference Guide](https://docs.oracle.com/en/java/javase/17/security/java-secure-socket-extension-jsse-reference-guide.html#GUID-93DEEE16-0B70-40E5-BBE7-55C3FD432345). There&#39;s an updated one for each version of Java, that link is for Java 17.","body":"While there might be a million questions and answers about cipher suites out there, there aren&#39;t so many that point out the correct reference for customizing them: <a href=\"https://docs.oracle.com/en/java/javase/17/security/java-secure-socket-extension-jsse-reference-guide.html#GUID-93DEEE16-0B70-40E5-BBE7-55C3FD432345\" rel=\"nofollow noreferrer\">The JSSE Reference Guide</a>. There&#39;s an updated one for each version of Java, that link is for Java 17."}],"answers":[{"tags":[],"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1693573320,"creation_date":1693573320,"answer_id":77023349,"question_id":77022984,"body_markdown":"[Java][1] is a dynamic language. Current version (at time of writing) is 20. When I run your command with Java 20, I get an error:\r\n&gt; script engine for language js can not be found\r\n\r\nIn fact, the documentation for [jrunscript][2] states:\r\n&gt; This tool is experimental and unsupported.\r\n\r\nHowever, since it appears to be working in the Java version that you are using (which I could not ascertain from your question), and since it is using [streams][3], you can add a *filter*. So try the following:\r\n```none\r\njava.util.Arrays.asList(javax.net.ssl.SSLServerSocketFactory.getDefault().getSupportedCipherSuites()).stream().filter(s -&gt; &quot;TLS_DHE_RSA_WITH_AES_256_GCM_SHA384&quot;.equals(s) || &quot;TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384&quot;.equals(s)).forEach(println)\r\n```\r\nI suggest that you write a Java [class][4] and use the [java][5] command. Here is an example:\r\n```java\r\nimport java.util.Arrays;\r\nimport java.util.List;\r\n\r\nimport javax.net.ssl.SSLServerSocketFactory;\r\n\r\npublic class MyCiphers {\r\n\r\n    public static void main(String[] args) {\r\n        List&lt;String&gt; desired = List.of(&quot;TLS_DHE_RSA_WITH_AES_256_GCM_SHA384&quot;,\r\n                                       &quot;TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384&quot;);\r\n        SSLServerSocketFactory fact = (SSLServerSocketFactory) SSLServerSocketFactory.getDefault();\r\n        String[] supported = fact.getSupportedCipherSuites();\r\n        Arrays.stream(supported)\r\n              .filter(s -&gt; desired.contains(s))\r\n              .forEach(System.out::println);\r\n    }\r\n}\r\n```\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Java_(programming_language)\r\n  [2]: https://docs.oracle.com/en/java/javase/20/docs/specs/man/jrunscript.html\r\n  [3]: https://www.oracle.com/technical-resources/articles/java/architect-streams-pt2.html\r\n  [4]: https://docs.oracle.com/javase/tutorial/\r\n  [5]: https://docs.oracle.com/en/java/javase/20/docs/specs/man/java.html","title":"How do you configure specific cipher suites for Java","body":"<p><a href=\"https://en.wikipedia.org/wiki/Java_(programming_language)\" rel=\"nofollow noreferrer\">Java</a> is a dynamic language. Current version (at time of writing) is 20. When I run your command with Java 20, I get an error:</p>\n<blockquote>\n<p>script engine for language js can not be found</p>\n</blockquote>\n<p>In fact, the documentation for <a href=\"https://docs.oracle.com/en/java/javase/20/docs/specs/man/jrunscript.html\" rel=\"nofollow noreferrer\">jrunscript</a> states:</p>\n<blockquote>\n<p>This tool is experimental and unsupported.</p>\n</blockquote>\n<p>However, since it appears to be working in the Java version that you are using (which I could not ascertain from your question), and since it is using <a href=\"https://www.oracle.com/technical-resources/articles/java/architect-streams-pt2.html\" rel=\"nofollow noreferrer\">streams</a>, you can add a <em>filter</em>. So try the following:</p>\n<pre class=\"lang-none prettyprint-override\"><code>java.util.Arrays.asList(javax.net.ssl.SSLServerSocketFactory.getDefault().getSupportedCipherSuites()).stream().filter(s -&gt; &quot;TLS_DHE_RSA_WITH_AES_256_GCM_SHA384&quot;.equals(s) || &quot;TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384&quot;.equals(s)).forEach(println)\n</code></pre>\n<p>I suggest that you write a Java <a href=\"https://docs.oracle.com/javase/tutorial/\" rel=\"nofollow noreferrer\">class</a> and use the <a href=\"https://docs.oracle.com/en/java/javase/20/docs/specs/man/java.html\" rel=\"nofollow noreferrer\">java</a> command. Here is an example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.Arrays;\nimport java.util.List;\n\nimport javax.net.ssl.SSLServerSocketFactory;\n\npublic class MyCiphers {\n\n    public static void main(String[] args) {\n        List&lt;String&gt; desired = List.of(&quot;TLS_DHE_RSA_WITH_AES_256_GCM_SHA384&quot;,\n                                       &quot;TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384&quot;);\n        SSLServerSocketFactory fact = (SSLServerSocketFactory) SSLServerSocketFactory.getDefault();\n        String[] supported = fact.getSupportedCipherSuites();\n        Arrays.stream(supported)\n              .filter(s -&gt; desired.contains(s))\n              .forEach(System.out::println);\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3421244,"reputation":35883,"user_id":2868801,"display_name":"dave_thompson_085"},"score":1,"creation_date":1693583167,"post_id":77023668,"comment_id":135784825,"body_markdown":"While it was a common problem long ago, this issue is now extremely rare. For Oracle builds since 8u161 in 2018, and for all OpenJDK builds since it was created,  &#39;unlimited&#39; policy is the default and no action is needed. And [the Oracle website](https://www.oracle.com/java/technologies/javase-jce-all-downloads.html) doesn&#39;t require providing your personal data to advertisers.","body":"While it was a common problem long ago, this issue is now extremely rare. For Oracle builds since 8u161 in 2018, and for all OpenJDK builds since it was created,  &#39;unlimited&#39; policy is the default and no action is needed. And <a href=\"https://www.oracle.com/java/technologies/javase-jce-all-downloads.html\" rel=\"nofollow noreferrer\">the Oracle website</a> doesn&#39;t require providing your personal data to advertisers."}],"tags":[],"owner":{"account_id":1047031,"reputation":307,"user_id":1051817,"accept_rate":50,"display_name":"Jazz"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693576178,"creation_date":1693576178,"answer_id":77023668,"question_id":77022984,"body_markdown":"Admittedly this is only tangenitally related to your question, but depending on what version of java your using, you might not have the full suite of cryptographic algorithms available to you.\r\n\r\nInitially, as strong encryption algorithms could not be shipped everywhere due to various legal restrictions, java was shipped with limited crypto algorithms.  To have the full suite of crypto algorithms (including the &#39;strong&#39; ones), you&#39;ll need to apply the official oracle Java Cryptographic Extension patch to both of your java installations.\r\n\r\nSee https://www.baeldung.com/jce-enable-unlimited-strength for more details.","title":"How do you configure specific cipher suites for Java","body":"<p>Admittedly this is only tangenitally related to your question, but depending on what version of java your using, you might not have the full suite of cryptographic algorithms available to you.</p>\n<p>Initially, as strong encryption algorithms could not be shipped everywhere due to various legal restrictions, java was shipped with limited crypto algorithms.  To have the full suite of crypto algorithms (including the 'strong' ones), you'll need to apply the official oracle Java Cryptographic Extension patch to both of your java installations.</p>\n<p>See <a href=\"https://www.baeldung.com/jce-enable-unlimited-strength\" rel=\"nofollow noreferrer\">https://www.baeldung.com/jce-enable-unlimited-strength</a> for more details.</p>\n"}],"owner":{"account_id":5243225,"reputation":97,"user_id":4189713,"display_name":"Gene"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":383,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1693576178,"creation_date":1693570173,"question_id":77022984,"body_markdown":"I&#39;m a novice when it comes to Java.  I&#39;m trying to eliminate weak ciphers from my systems.  Using wireshark I have a connection to another server and it shows 45 ciphers available.  I discovered that the connection made is done with java (by using netstat) and I found running the command:\r\n\r\n```\r\njrunscript -e &quot;java.util.Arrays.asList(javax.net.ssl.SSLServerSocketFactory.getDefault().getSupportedCipherSuites()).stream().forEach(println)&quot;\r\n```\r\ndisplays 45 ciphers.  So I suspect it&#39;s Java that is determining the ciphers.\r\n\r\nIs there a way to configure java to only use what ciphers I want, and if I ran the above command again, would it only display those ciphers?\r\n\r\nI&#39;ve already tried modifying the java.security file by adding the following line:\r\n```\r\njdk.tls.client.cipherSuites=TLS_DHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384\r\n```\r\n\r\nBut that doesn&#39;t seem to work.  Google doesn&#39;t seem to turn up much else, so I come here as a last resort.  I&#39;m unable to copy/paste any config files as my systems are on another network.\r\n","title":"How do you configure specific cipher suites for Java","body":"<p>I'm a novice when it comes to Java.  I'm trying to eliminate weak ciphers from my systems.  Using wireshark I have a connection to another server and it shows 45 ciphers available.  I discovered that the connection made is done with java (by using netstat) and I found running the command:</p>\n<pre><code>jrunscript -e &quot;java.util.Arrays.asList(javax.net.ssl.SSLServerSocketFactory.getDefault().getSupportedCipherSuites()).stream().forEach(println)&quot;\n</code></pre>\n<p>displays 45 ciphers.  So I suspect it's Java that is determining the ciphers.</p>\n<p>Is there a way to configure java to only use what ciphers I want, and if I ran the above command again, would it only display those ciphers?</p>\n<p>I've already tried modifying the java.security file by adding the following line:</p>\n<pre><code>jdk.tls.client.cipherSuites=TLS_DHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384\n</code></pre>\n<p>But that doesn't seem to work.  Google doesn't seem to turn up much else, so I come here as a last resort.  I'm unable to copy/paste any config files as my systems are on another network.</p>\n"},{"tags":["java","spring-boot","hibernate-envers"],"comments":[{"owner":{"account_id":4806468,"reputation":3469,"user_id":3881354,"accept_rate":75,"display_name":"Elyas Hadizadeh"},"score":1,"creation_date":1606279595,"post_id":64998367,"comment_id":114913679,"body_markdown":"Check this out https://stackoverflow.com/a/51858463/3881354","body":"Check this out <a href=\"https://stackoverflow.com/a/51858463/3881354\">stackoverflow.com/a/51858463/3881354</a>"},{"owner":{"account_id":7122775,"reputation":1029,"user_id":5446775,"accept_rate":48,"display_name":"Yves Calaci"},"score":1,"creation_date":1606280162,"post_id":64998367,"comment_id":114913777,"body_markdown":"I was thinking of creating a Configuration for Hibernate Envers indeed, however this approach is the same as injecting an `PersistenceContext` (EntityManager) of type `PersistenceContextType.EXTENDED`. In other words, both approaches return an application-managed `EntityManager`, on which should be avoided, am I right?","body":"I was thinking of creating a Configuration for Hibernate Envers indeed, however this approach is the same as injecting an <code>PersistenceContext</code> (EntityManager) of type <code>PersistenceContextType.EXTENDED</code>. In other words, both approaches return an application-managed <code>EntityManager</code>, on which should be avoided, am I right?"},{"owner":{"account_id":266507,"reputation":344,"user_id":554117,"accept_rate":100,"display_name":"Giulio Pulina"},"score":0,"creation_date":1683365992,"post_id":64998367,"comment_id":134358298,"body_markdown":"@ElyasHadizadeh the answer you linked is wrong. Mine is correct: https://stackoverflow.com/a/70177753/554117","body":"@ElyasHadizadeh the answer you linked is wrong. Mine is correct: <a href=\"https://stackoverflow.com/a/70177753/554117\">stackoverflow.com/a/70177753/554117</a>"}],"answers":[{"tags":[],"owner":{"account_id":18486228,"reputation":13,"user_id":13467124,"display_name":"Mihai"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693575844,"creation_date":1693575792,"answer_id":77023617,"question_id":64998367,"body_markdown":"I think I had the same issue, when running a `@SpringBootTest` I needed to get a hold of `EntityManager` like they showed in the Envers user-guide.\r\n\r\nIf you go to Hibernate Envers [github-project tests][1], you can see that they use the factory to get the `EntityManager`.\r\n\r\nI tried to annotate my `EntityManager` in the test with either `@Autowire` or `@PersistenceContext`, in both cases `EntityManager` object was opened but the delegate was closed like in your case. \r\nIt only worked when I autowired the factory:\r\n\r\n    @Autowired\r\n    private EntityManagerFactory entityManagerFactory;\r\n\r\nAnd then created an entityManager for my test like this:\r\n\r\n    var entityManager = entityManagerFactory.createEntityManager();\r\n\r\n  [1]: https://github.com/hibernate/hibernate-orm/blob/b82d4c3c74c88af484ac22924e89e7a797d430f3/hibernate-envers/src/test/java/org/hibernate/orm/test/envers/BaseEnversJPAFunctionalTestCase.java#L271\r\n","title":"Hibernate Envers claims EntityManager is closed","body":"<p>I think I had the same issue, when running a <code>@SpringBootTest</code> I needed to get a hold of <code>EntityManager</code> like they showed in the Envers user-guide.</p>\n<p>If you go to Hibernate Envers <a href=\"https://github.com/hibernate/hibernate-orm/blob/b82d4c3c74c88af484ac22924e89e7a797d430f3/hibernate-envers/src/test/java/org/hibernate/orm/test/envers/BaseEnversJPAFunctionalTestCase.java#L271\" rel=\"nofollow noreferrer\">github-project tests</a>, you can see that they use the factory to get the <code>EntityManager</code>.</p>\n<p>I tried to annotate my <code>EntityManager</code> in the test with either <code>@Autowire</code> or <code>@PersistenceContext</code>, in both cases <code>EntityManager</code> object was opened but the delegate was closed like in your case.\nIt only worked when I autowired the factory:</p>\n<pre><code>@Autowired\nprivate EntityManagerFactory entityManagerFactory;\n</code></pre>\n<p>And then created an entityManager for my test like this:</p>\n<pre><code>var entityManager = entityManagerFactory.createEntityManager();\n</code></pre>\n"}],"owner":{"account_id":7122775,"reputation":1029,"user_id":5446775,"accept_rate":48,"display_name":"Yves Calaci"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":934,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1693575844,"creation_date":1606276961,"question_id":64998367,"body_markdown":"I have a Spring (Boot) application on which I&#39;m trying to use Hibernate Envers.\r\n\r\nThe following `bar` function throws an `IllegalStateException: EntityManager is closed`, while the `foo` function works flawlessly:\r\n\r\n    @Service\r\n    public class FoobarService {\r\n    \r\n    \tprivate final EntityManager entityManager;\r\n    \r\n    \t@Autowired\r\n    \tpublic FoobarService(EntityManager entityManager) {\r\n    \t\tthis.entityManager = entityManager;\r\n    \t}\r\n    \r\n    \tpublic Iterable&lt;Foobar&gt; foo() {\r\n    \t\treturn entityManager.createQuery(&quot;select f from Foobar f&quot;, Foobar.class).getResultList();\r\n    \t}\r\n    \r\n    \tpublic Iterable&lt;Foobar&gt; bar() {\r\n    \t\tSystem.out.println(entityManager.isOpen()); // &lt;--- Returns true!\r\n\r\n    \t\tAuditReader auditReader = AuditReaderFactory.get(entityManager);\r\n    \t\tAuditQueryCreator queryCreator = auditReader.createQuery();\r\n    \t\tAuditQuery query = queryCreator.forRevisionsOfEntity(Foobar.class, true);\r\n    \r\n    \t\treturn query.getResultList();\r\n    \t}\r\n    \r\n    }\r\n\r\nDoes anybody know why it claims it&#39;s closed when the `foo` function clearly works (as stated above)?\r\n\r\nPS: I&#39;ve omitted the maven dependencies and entity mapping for brevity, as they&#39;re all working.\r\n\r\n\r\n\r\n**EDIT:**\r\n\r\nThere&#39;s something really weird I can&#39;t figure out. Within the `bar` function, we can see that:\r\n\r\n 1. `entityManager.isOpen()` returns true\r\n 2. `((Session) entityManager.getDelegate()).isOpen()` returns false\r\n\r\nThe `AuditReaderFactory.get(EntityManager entityManager)` function uses the second, this is why it complains the session is closed when it&#39;s not. I don&#39;t quite get why the `delegate` is closed, so:\r\n\r\n 1. Why does the the factory uses the `entityManager`&#39;s delegate instead?\r\n 2. Why the delegate is even closed?","title":"Hibernate Envers claims EntityManager is closed","body":"<p>I have a Spring (Boot) application on which I'm trying to use Hibernate Envers.</p>\n<p>The following <code>bar</code> function throws an <code>IllegalStateException: EntityManager is closed</code>, while the <code>foo</code> function works flawlessly:</p>\n<pre><code>@Service\npublic class FoobarService {\n\n    private final EntityManager entityManager;\n\n    @Autowired\n    public FoobarService(EntityManager entityManager) {\n        this.entityManager = entityManager;\n    }\n\n    public Iterable&lt;Foobar&gt; foo() {\n        return entityManager.createQuery(&quot;select f from Foobar f&quot;, Foobar.class).getResultList();\n    }\n\n    public Iterable&lt;Foobar&gt; bar() {\n        System.out.println(entityManager.isOpen()); // &lt;--- Returns true!\n\n        AuditReader auditReader = AuditReaderFactory.get(entityManager);\n        AuditQueryCreator queryCreator = auditReader.createQuery();\n        AuditQuery query = queryCreator.forRevisionsOfEntity(Foobar.class, true);\n\n        return query.getResultList();\n    }\n\n}\n</code></pre>\n<p>Does anybody know why it claims it's closed when the <code>foo</code> function clearly works (as stated above)?</p>\n<p>PS: I've omitted the maven dependencies and entity mapping for brevity, as they're all working.</p>\n<p><strong>EDIT:</strong></p>\n<p>There's something really weird I can't figure out. Within the <code>bar</code> function, we can see that:</p>\n<ol>\n<li><code>entityManager.isOpen()</code> returns true</li>\n<li><code>((Session) entityManager.getDelegate()).isOpen()</code> returns false</li>\n</ol>\n<p>The <code>AuditReaderFactory.get(EntityManager entityManager)</code> function uses the second, this is why it complains the session is closed when it's not. I don't quite get why the <code>delegate</code> is closed, so:</p>\n<ol>\n<li>Why does the the factory uses the <code>entityManager</code>'s delegate instead?</li>\n<li>Why the delegate is even closed?</li>\n</ol>\n"},{"tags":["java","selenium-webdriver","junit5","junit-jupiter","selenium-jupiter"],"comments":[{"owner":{"account_id":7527385,"reputation":2093,"user_id":5717031,"accept_rate":17,"display_name":"Mike ASP"},"score":0,"creation_date":1534374877,"post_id":51867650,"comment_id":90687103,"body_markdown":"https://stackoverflow.com/questions/51319784/junit-5-collection-type-parameters-cause-errors-with-parameterizedtest","body":"<a href=\"https://stackoverflow.com/questions/51319784/junit-5-collection-type-parameters-cause-errors-with-parameterizedtest\" title=\"junit 5 collection type parameters cause errors with parameterizedtest\">stackoverflow.com/questions/51319784/&hellip;</a>"},{"owner":{"account_id":8431463,"reputation":1868,"user_id":6327046,"display_name":"Marc Philipp"},"score":2,"creation_date":1534400526,"post_id":51867650,"comment_id":90692819,"body_markdown":"JUnit needs to instantiate the test class using its constructor which has a `WebDriver` parameter. Thus, it looks for a registered `ParameterResolver` to resolve it but there&#39;s none registered. Do you have an extension that provides the `WebDriver` instance?","body":"JUnit needs to instantiate the test class using its constructor which has a <code>WebDriver</code> parameter. Thus, it looks for a registered <code>ParameterResolver</code> to resolve it but there&#39;s none registered. Do you have an extension that provides the <code>WebDriver</code> instance?"},{"owner":{"account_id":7527385,"reputation":2093,"user_id":5717031,"accept_rate":17,"display_name":"Mike ASP"},"score":2,"creation_date":1534535867,"post_id":51867650,"comment_id":90755315,"body_markdown":"no, I don&#39;t have any. How would I do that ?","body":"no, I don&#39;t have any. How would I do that ?"}],"answers":[{"tags":[],"owner":{"account_id":165479,"reputation":30126,"user_id":388980,"display_name":"Sam Brannen"},"comment_count":0,"down_vote_count":0,"up_vote_count":23,"is_accepted":true,"score":23,"last_activity_date":1534760185,"creation_date":1534760185,"answer_id":51928592,"question_id":51867650,"body_markdown":"As Marc Philipp mentioned in his comment, you need to ensure that JUnit Jupiter can instantiate your test class.\r\n\r\nFor your particular scenario, you&#39;ll need to remove your custom constructor that accepts a `WebDriver`.\r\n\r\nThen you have two options:\r\n\r\n1. Create the `WebDriver` on your own -- for example, in an `@BeforeAll` or `@BeforeEach` method.\r\n2. Use an extension such as [Selenium Jupiter](https://bonigarcia.github.io/selenium-jupiter/) to help manage the `WebDriver` for you.","title":"Junit 5 - No ParameterResolver registered for parameter","body":"<p>As Marc Philipp mentioned in his comment, you need to ensure that JUnit Jupiter can instantiate your test class.</p>\n\n<p>For your particular scenario, you'll need to remove your custom constructor that accepts a <code>WebDriver</code>.</p>\n\n<p>Then you have two options:</p>\n\n<ol>\n<li>Create the <code>WebDriver</code> on your own -- for example, in an <code>@BeforeAll</code> or <code>@BeforeEach</code> method.</li>\n<li>Use an extension such as <a href=\"https://bonigarcia.github.io/selenium-jupiter/\" rel=\"noreferrer\">Selenium Jupiter</a> to help manage the <code>WebDriver</code> for you.</li>\n</ol>\n"},{"comments":[{"owner":{"account_id":4497597,"reputation":181,"user_id":3657024,"display_name":"rpajaziti"},"score":0,"creation_date":1666917680,"post_id":57711946,"comment_id":131054335,"body_markdown":"In my case, 1st case only ignored the test, even though it didn&#39;t throw an error but that wasn&#39;t the desired result after all.","body":"In my case, 1st case only ignored the test, even though it didn&#39;t throw an error but that wasn&#39;t the desired result after all."}],"tags":[],"owner":{"account_id":4965399,"reputation":1444,"user_id":3994927,"display_name":"Matilda Smeds"},"comment_count":1,"down_vote_count":1,"up_vote_count":17,"is_accepted":false,"score":16,"last_activity_date":1567330419,"creation_date":1567087494,"answer_id":57711946,"question_id":51867650,"body_markdown":"I also got `ParameterResolutionException` with JUnit 5.\r\n\r\n    org.junit.jupiter.api.extension.ParameterResolutionException: \r\n    No ParameterResolver registered for parameter [int[] arg0] in constructor (public my_package.MyClass(int[]))\r\n\r\n---\r\nI had written `@Test` methods inside the class I was testing.\r\n\r\nThis error could be fixed in two ways:\r\n\r\n1) Either replacing `import org.junit.jupiter.api.Test` with `import org.junit.Test`, or\r\n\r\n2) Writing tests in a separate TestClass.","title":"Junit 5 - No ParameterResolver registered for parameter","body":"<p>I also got <code>ParameterResolutionException</code> with JUnit 5.</p>\n\n<pre><code>org.junit.jupiter.api.extension.ParameterResolutionException: \nNo ParameterResolver registered for parameter [int[] arg0] in constructor (public my_package.MyClass(int[]))\n</code></pre>\n\n<hr>\n\n<p>I had written <code>@Test</code> methods inside the class I was testing.</p>\n\n<p>This error could be fixed in two ways:</p>\n\n<p>1) Either replacing <code>import org.junit.jupiter.api.Test</code> with <code>import org.junit.Test</code>, or</p>\n\n<p>2) Writing tests in a separate TestClass.</p>\n"},{"comments":[{"owner":{"account_id":1241265,"reputation":4024,"user_id":1203811,"accept_rate":79,"display_name":"jumps4fun"},"score":3,"creation_date":1650549431,"post_id":58919155,"comment_id":127148520,"body_markdown":"Having only &#180;@Test&#180; also lead me to this page. Switched it to &#180;@ParameterizedTest&#180;, and it works.","body":"Having only &#180;@Test&#180; also lead me to this page. Switched it to &#180;@ParameterizedTest&#180;, and it works."},{"owner":{"account_id":9983336,"reputation":4132,"user_id":7769052,"accept_rate":75,"display_name":"banan3&#39;14"},"score":0,"creation_date":1672327364,"post_id":58919155,"comment_id":132268596,"body_markdown":"I had `@RepeatedTest` instead of `@Test` and also removing `@Test` solved the issue of No `ParameterResolver` registered for parameter `[org.junit.jupiter.api.RepetitionInfo arg0]`.","body":"I had <code>@RepeatedTest</code> instead of <code>@Test</code> and also removing <code>@Test</code> solved the issue of No <code>ParameterResolver</code> registered for parameter <code>[org.junit.jupiter.api.RepetitionInfo arg0]</code>."}],"tags":[],"owner":{"account_id":124735,"reputation":3930,"user_id":1287550,"display_name":"Will"},"comment_count":2,"down_vote_count":1,"up_vote_count":256,"is_accepted":false,"score":255,"last_activity_date":1574095039,"creation_date":1574095039,"answer_id":58919155,"question_id":51867650,"body_markdown":"I had both `@Test` and `@ParameterizedTest` annotating the same method. I removed the former.","title":"Junit 5 - No ParameterResolver registered for parameter","body":"<p>I had both <code>@Test</code> and <code>@ParameterizedTest</code> annotating the same method. I removed the former.</p>\n"},{"tags":[],"owner":{"account_id":7881416,"reputation":543,"user_id":6319815,"display_name":"muhin"},"comment_count":0,"down_vote_count":4,"up_vote_count":41,"is_accepted":false,"score":37,"last_activity_date":1579063500,"creation_date":1579061626,"answer_id":59745039,"question_id":51867650,"body_markdown":"This error appears when you try to use both `@Test` and `@ParameterizedTest` in the same test class. Removing `@Test` annotation will resolve the issue.","title":"Junit 5 - No ParameterResolver registered for parameter","body":"<p>This error appears when you try to use both <code>@Test</code> and <code>@ParameterizedTest</code> in the same test class. Removing <code>@Test</code> annotation will resolve the issue.</p>\n"},{"tags":[],"owner":{"account_id":1613382,"reputation":3295,"user_id":1502439,"accept_rate":40,"display_name":"Janac Meena"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1584707150,"creation_date":1584707150,"answer_id":60774133,"question_id":51867650,"body_markdown":"I got this error because my test needed my Spring Boot server to be running first, so that dependency injection using @Autowired would get executed. I added these annotations:\r\n\r\n\r\n\r\n    @Transactional\r\n    @ExtendWith(SpringExtension.class)\r\n    @SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT, classes = Server.class)\r\n    public MyTestClass () {\r\n    ...\r\n    \r\n    }","title":"Junit 5 - No ParameterResolver registered for parameter","body":"<p>I got this error because my test needed my Spring Boot server to be running first, so that dependency injection using @Autowired would get executed. I added these annotations:</p>\n\n<pre><code>@Transactional\n@ExtendWith(SpringExtension.class)\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT, classes = Server.class)\npublic MyTestClass () {\n...\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10872862,"reputation":21,"user_id":7994171,"display_name":"Krzysiek"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1590579203,"creation_date":1590579203,"answer_id":62042097,"question_id":51867650,"body_markdown":"Annotating test class with @ExtendWith(MockitoExtension.class) worked for me","title":"Junit 5 - No ParameterResolver registered for parameter","body":"<p>Annotating test class with @ExtendWith(MockitoExtension.class) worked for me</p>\n"},{"comments":[{"owner":{"account_id":10807011,"reputation":2216,"user_id":15016163,"display_name":"Maicon Mauricio"},"score":0,"creation_date":1624680128,"post_id":66700336,"comment_id":120430038,"body_markdown":"I had the name of the file wrong for `CsvFileSource`...","body":"I had the name of the file wrong for <code>CsvFileSource</code>..."}],"tags":[],"owner":{"account_id":152480,"reputation":1164,"user_id":1384839,"display_name":"slonik"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1616108644,"creation_date":1616108644,"answer_id":66700336,"question_id":51867650,"body_markdown":"For me, I was using\r\n\r\n    @ParameterizedTest\r\n    @CsvSource({\r\n            &quot;1st-param1&quot;,&quot;1st-param2&quot;,\r\n            &quot;2nd-param1&quot;,&quot;2nd-param2&quot;\r\n            })\r\n    public void isCompleted(String param1, String param2) {\r\n\r\n\r\nInstead of (quotes were wrong):\r\n\r\n    @ParameterizedTest\r\n    @CsvSource({\r\n            &quot;1st-param1,1st-param2&quot;,\r\n            &quot;2nd-param1,2nd-param2&quot;\r\n            })\r\n    public void isCompleted(String param1, String param2) {","title":"Junit 5 - No ParameterResolver registered for parameter","body":"<p>For me, I was using</p>\n<pre><code>@ParameterizedTest\n@CsvSource({\n        &quot;1st-param1&quot;,&quot;1st-param2&quot;,\n        &quot;2nd-param1&quot;,&quot;2nd-param2&quot;\n        })\npublic void isCompleted(String param1, String param2) {\n</code></pre>\n<p>Instead of (quotes were wrong):</p>\n<pre><code>@ParameterizedTest\n@CsvSource({\n        &quot;1st-param1,1st-param2&quot;,\n        &quot;2nd-param1,2nd-param2&quot;\n        })\npublic void isCompleted(String param1, String param2) {\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2974733,"reputation":721,"user_id":2526021,"display_name":"marco"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1619957689,"creation_date":1619957689,"answer_id":67356270,"question_id":51867650,"body_markdown":"In my situation I had 2 parameters.  The first parameter was using @AggregateWith, the second parameter should not have been aggregated and was already of the correct type, but JUnit tried to aggregate it as well.\r\n\r\nSwitching parameter 0 and 1 solved the issue for me (that is, the parameter annotated with @AggregateWith is now at the end).","title":"Junit 5 - No ParameterResolver registered for parameter","body":"<p>In my situation I had 2 parameters.  The first parameter was using @AggregateWith, the second parameter should not have been aggregated and was already of the correct type, but JUnit tried to aggregate it as well.</p>\n<p>Switching parameter 0 and 1 solved the issue for me (that is, the parameter annotated with @AggregateWith is now at the end).</p>\n"},{"tags":[],"owner":{"account_id":4418975,"reputation":449,"user_id":3599627,"accept_rate":29,"display_name":"Darshan"},"comment_count":0,"down_vote_count":0,"up_vote_count":28,"is_accepted":false,"score":28,"last_activity_date":1638457139,"creation_date":1630422162,"answer_id":69001076,"question_id":51867650,"body_markdown":"I had the similar issue I resolved it by removing the ```@Test``` annotation\r\n and introduce annotation ```@ParameterizedTest```\r\n","title":"Junit 5 - No ParameterResolver registered for parameter","body":"<p>I had the similar issue I resolved it by removing the <code>@Test</code> annotation\nand introduce annotation <code>@ParameterizedTest</code></p>\n"},{"comments":[{"owner":{"account_id":8581657,"reputation":322,"user_id":6429055,"display_name":"theAccidentalDeveloper"},"score":0,"creation_date":1673871292,"post_id":70686210,"comment_id":132586818,"body_markdown":"I was using \nimport org.junit.jupiter.api.Test;\n\nyour answer helped","body":"I was using  import org.junit.jupiter.api.Test;  your answer helped"}],"tags":[],"owner":{"account_id":11229684,"reputation":31,"user_id":8238181,"display_name":"Ravindra VL"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1642009932,"creation_date":1642009932,"answer_id":70686210,"question_id":51867650,"body_markdown":"I had similar issue as my dependencies where using both junit4 &amp; junit5. I made `@Tests` to use from junit4 i.e, `import org.junit.Test`. This fixed the cause.","title":"Junit 5 - No ParameterResolver registered for parameter","body":"<p>I had similar issue as my dependencies where using both junit4 &amp; junit5. I made <code>@Tests</code> to use from junit4 i.e, <code>import org.junit.Test</code>. This fixed the cause.</p>\n"},{"tags":[],"owner":{"account_id":21583747,"reputation":1,"user_id":15914562,"display_name":"Lisen Saka"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1643210738,"creation_date":1643210738,"answer_id":70865920,"question_id":51867650,"body_markdown":"I think the WebDriver class in your project is not Annotated as a bean and it cannot be injected, i had the same problem and when i changed the injection way from constructor injection into instance variable injection, it throws NoSuchBeanDefinitionException (&quot;No qualifying bean of type &#39;...service.RsRepositoryService&lt;?, ?&gt;&#39; available: &quot;), it does not find the bean that we are trying to inject.\r\nHope this helps someone with this problem :)","title":"Junit 5 - No ParameterResolver registered for parameter","body":"<p>I think the WebDriver class in your project is not Annotated as a bean and it cannot be injected, i had the same problem and when i changed the injection way from constructor injection into instance variable injection, it throws NoSuchBeanDefinitionException (&quot;No qualifying bean of type '...service.RsRepositoryService' available: &quot;), it does not find the bean that we are trying to inject.\nHope this helps someone with this problem :)</p>\n"},{"comments":[{"owner":{"account_id":6832140,"reputation":961,"user_id":5255690,"display_name":"Missaka Iddamalgoda"},"score":0,"creation_date":1674535580,"post_id":72587626,"comment_id":132729371,"body_markdown":"If what you are referring to `@RequiredArgsConstructor` is provided by lombok. Then what `onConstructor = @__(@Autowired)` does is add the `@Autowired` annotation to constructor parameters. If you have your own constructor, you can annotate your parameters with @Autowired manually to achieve the same behaviour.","body":"If what you are referring to <code>@RequiredArgsConstructor</code> is provided by lombok. Then what <code>onConstructor = @__(@Autowired)</code> does is add the <code>@Autowired</code> annotation to constructor parameters. If you have your own constructor, you can annotate your parameters with @Autowired manually to achieve the same behaviour."},{"owner":{"account_id":9531412,"reputation":2010,"user_id":7082956,"display_name":"Valerij Dobler"},"score":0,"creation_date":1674563963,"post_id":72587626,"comment_id":132736442,"body_markdown":"@MissakaIddamalgoda `@Autowired` is not added to the parameters, but to the constructor itself. Yes, you could add it to the fields, but then they cant be final any more because they will be assigned post-construct.","body":"@MissakaIddamalgoda <code>@Autowired</code> is not added to the parameters, but to the constructor itself. Yes, you could add it to the fields, but then they cant be final any more because they will be assigned post-construct."},{"owner":{"account_id":6832140,"reputation":961,"user_id":5255690,"display_name":"Missaka Iddamalgoda"},"score":0,"creation_date":1674621176,"post_id":72587626,"comment_id":132751459,"body_markdown":"Yes. What I meant is add the autowired annotation to the either Constructor or else if you only one parameter in the constructor then you annotate just the parameter itself as `MyClass(@Autowired DB db)`. I didn&#39;t suggest Autowiring the fields themselves.","body":"Yes. What I meant is add the autowired annotation to the either Constructor or else if you only one parameter in the constructor then you annotate just the parameter itself as <code>MyClass(@Autowired DB db)</code>. I didn&#39;t suggest Autowiring the fields themselves."},{"owner":{"account_id":9531412,"reputation":2010,"user_id":7082956,"display_name":"Valerij Dobler"},"score":0,"creation_date":1674718167,"post_id":72587626,"comment_id":132774452,"body_markdown":"If you&#39;re not familiar with `Lombok.RequiredArgsConstructor` it generates the constructor, hence there is no constructor to add the annotation to in the source code.","body":"If you&#39;re not familiar with <code>Lombok.RequiredArgsConstructor</code> it generates the constructor, hence there is no constructor to add the annotation to in the source code."},{"owner":{"account_id":9531412,"reputation":2010,"user_id":7082956,"display_name":"Valerij Dobler"},"score":0,"creation_date":1674718365,"post_id":72587626,"comment_id":132774490,"body_markdown":"@MissakaIddamalgoda I&#39;d suggest you read up on it, try to understand, what it is and what it is used for and then comment on it.","body":"@MissakaIddamalgoda I&#39;d suggest you read up on it, try to understand, what it is and what it is used for and then comment on it."}],"tags":[],"owner":{"account_id":9531412,"reputation":2010,"user_id":7082956,"display_name":"Valerij Dobler"},"comment_count":5,"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1693575431,"creation_date":1654978796,"answer_id":72587626,"question_id":51867650,"body_markdown":"It is maybe not an answer to the question above, but for me using **Spring-Boot**, and **Lombok**s @RequiredArgsConstructor, JUnit couldn&#39;t autowire the dependencies. My class looked like that:\r\n\r\n```java\r\n@ExtendWith(SpringExtension.class)\r\n@ContextConfiguration(classes = { TestPersistenceConfiguration.class, MyRepositoryTest.TestConfiguration.class })\r\n@RequiredArgsConstructor\r\nclass MyRepositoryTest {\r\n\tprivate final MyRepository repository;\r\n\tprivate final TransactionTemplate tt;\r\n\r\n// test methods...\r\n\r\n\t@Configuration\r\n\t@EnableJpaRepositories(basePackageClasses = { MyRepository.class })\r\n\tstatic class TestConfiguration {}\r\n}\r\n```\r\n\r\n# Warning (experimental Lombok feature!)\r\n\r\nLomboks [onX](https://projectlombok.org/features/experimental/onX) is **experimental** and comes in different flavours.\r\n\r\nYou could add `onConstructor = @__(@Autowired)` to the RequiredArgsConstructor annotation:\r\n\r\n```java\r\n@ExtendWith(SpringExtension.class)\r\n@ContextConfiguration(classes = { TestPersistenceConfiguration.class, MyRepositoryTest.TestConfiguration.class })\r\n@RequiredArgsConstructor(onConstructor = @__(@Autowired))\r\nclass MyRepositoryTest {\r\n// everything as before\r\n}\r\n```\r\n\r\n# Without Lombok\r\n\r\nIMHO having an IDE generated constructor with @Autowired would be better. At least for now.\r\n\r\n```java\r\n@ExtendWith(SpringExtension.class)\r\n@ContextConfiguration(classes = { TestPersistenceConfiguration.class, MyRepositoryTest.TestConfiguration.class })\r\nclass MyRepositoryTest {\r\n    private final MyRepository repository;\r\n    private final TransactionTemplate tt;\r\n\r\n    @Autowired\r\n    MyRepositoryTest(MyRepository repository, TransactionTemplate tt) {\r\n        this.tt = tt;\r\n        this.repository = repository;\r\n    }\r\n// everything else as before\r\n}\r\n```","title":"Junit 5 - No ParameterResolver registered for parameter","body":"<p>It is maybe not an answer to the question above, but for me using <strong>Spring-Boot</strong>, and <strong>Lombok</strong>s @RequiredArgsConstructor, JUnit couldn't autowire the dependencies. My class looked like that:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ExtendWith(SpringExtension.class)\n@ContextConfiguration(classes = { TestPersistenceConfiguration.class, MyRepositoryTest.TestConfiguration.class })\n@RequiredArgsConstructor\nclass MyRepositoryTest {\n    private final MyRepository repository;\n    private final TransactionTemplate tt;\n\n// test methods...\n\n    @Configuration\n    @EnableJpaRepositories(basePackageClasses = { MyRepository.class })\n    static class TestConfiguration {}\n}\n</code></pre>\n<h1>Warning (experimental Lombok feature!)</h1>\n<p>Lomboks <a href=\"https://projectlombok.org/features/experimental/onX\" rel=\"nofollow noreferrer\">onX</a> is <strong>experimental</strong> and comes in different flavours.</p>\n<p>You could add <code>onConstructor = @__(@Autowired)</code> to the RequiredArgsConstructor annotation:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ExtendWith(SpringExtension.class)\n@ContextConfiguration(classes = { TestPersistenceConfiguration.class, MyRepositoryTest.TestConfiguration.class })\n@RequiredArgsConstructor(onConstructor = @__(@Autowired))\nclass MyRepositoryTest {\n// everything as before\n}\n</code></pre>\n<h1>Without Lombok</h1>\n<p>IMHO having an IDE generated constructor with @Autowired would be better. At least for now.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ExtendWith(SpringExtension.class)\n@ContextConfiguration(classes = { TestPersistenceConfiguration.class, MyRepositoryTest.TestConfiguration.class })\nclass MyRepositoryTest {\n    private final MyRepository repository;\n    private final TransactionTemplate tt;\n\n    @Autowired\n    MyRepositoryTest(MyRepository repository, TransactionTemplate tt) {\n        this.tt = tt;\n        this.repository = repository;\n    }\n// everything else as before\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4999034,"reputation":1880,"user_id":6722075,"display_name":"Tohid Makari"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1655305686,"creation_date":1655305294,"answer_id":72633682,"question_id":51867650,"body_markdown":"Removing constructor and adding as parameter in test method, solved my problem in `JUnit 5`.\r\n\r\n    @ParameterizedTest\r\n    @MethodSource(&quot;data&quot;)\r\n    public void check(String input, boolean expected) {\r\n        assertThat(inpu).isEqualTo(expected);\r\n    }\r\n    \r\n    private static Stream&lt;Arguments&gt; data() {\r\n        return Stream.of(\r\n                Arguments.of(&quot;A&quot;, false),\r\n                Arguments.of(&quot;B&quot;, false)\r\n        );\r\n    }","title":"Junit 5 - No ParameterResolver registered for parameter","body":"<p>Removing constructor and adding as parameter in test method, solved my problem in <code>JUnit 5</code>.</p>\n<pre><code>@ParameterizedTest\n@MethodSource(&quot;data&quot;)\npublic void check(String input, boolean expected) {\n    assertThat(inpu).isEqualTo(expected);\n}\n\nprivate static Stream&lt;Arguments&gt; data() {\n    return Stream.of(\n            Arguments.of(&quot;A&quot;, false),\n            Arguments.of(&quot;B&quot;, false)\n    );\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7325773,"reputation":1251,"user_id":7093031,"accept_rate":25,"display_name":"Zoette"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660883507,"creation_date":1660883507,"answer_id":73411860,"question_id":51867650,"body_markdown":"I had the same error while using a wrong separator (&quot;;&quot; instead of &quot;,&quot;)","title":"Junit 5 - No ParameterResolver registered for parameter","body":"<p>I had the same error while using a wrong separator (&quot;;&quot; instead of &quot;,&quot;)</p>\n"},{"tags":[],"owner":{"account_id":2541359,"reputation":6751,"user_id":2521769,"accept_rate":73,"display_name":"Stefan van den Akker"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1675354193,"creation_date":1675354193,"answer_id":75325929,"question_id":51867650,"body_markdown":"If you&#39;re using Kotlin &amp; Spring Boot, using the primary constructor to inject dependencies (as you&#39;d normally do) would introduce this error. Solution: use property injection instead of constructor injection.\r\n\r\nNot working:\r\n\r\n```kotlin\r\n@SpringBootTest\r\nclass Failing(val someDependency: SomeDependency) {\r\n    @Test\r\n    fun foo() {}\r\n}\r\n```\r\n\r\nWorking:\r\n\r\n```kotlin\r\n@SpringBootTest\r\nclass Working {\r\n    @Autowired lateinit var someDependency: SomeDependency\r\n\r\n    @Test\r\n    fun foo() {}\r\n}\r\n```","title":"Junit 5 - No ParameterResolver registered for parameter","body":"<p>If you're using Kotlin &amp; Spring Boot, using the primary constructor to inject dependencies (as you'd normally do) would introduce this error. Solution: use property injection instead of constructor injection.</p>\n<p>Not working:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>@SpringBootTest\nclass Failing(val someDependency: SomeDependency) {\n    @Test\n    fun foo() {}\n}\n</code></pre>\n<p>Working:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>@SpringBootTest\nclass Working {\n    @Autowired lateinit var someDependency: SomeDependency\n\n    @Test\n    fun foo() {}\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20679093,"reputation":316,"user_id":15183075,"display_name":"Yannick Mussche"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677165771,"creation_date":1677165771,"answer_id":75546843,"question_id":51867650,"body_markdown":"I haven&#39;t seen the answer that worked for me. I got the error because I initiated my object using a constructor instead of for each. Don&#39;t use a constructor, use beforeEach, like this:\r\n\r\n``` \r\nclass Testclass {\r\n   private ObjectToRunTestsOn objectToRunTestsOn;\r\n\r\n\t@BeforeEach()\r\n\tvoid beforeEach() {\r\n\t\tobjectToRunTestsOn= new ObjectToRunTestsOn();\r\n\t}\r\n\t\r\n}\r\n ```","title":"Junit 5 - No ParameterResolver registered for parameter","body":"<p>I haven't seen the answer that worked for me. I got the error because I initiated my object using a constructor instead of for each. Don't use a constructor, use beforeEach, like this:</p>\n<pre><code>class Testclass {\n   private ObjectToRunTestsOn objectToRunTestsOn;\n\n    @BeforeEach()\n    void beforeEach() {\n        objectToRunTestsOn= new ObjectToRunTestsOn();\n    }\n    \n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":28111828,"reputation":1,"user_id":21479483,"display_name":"FragoLanten"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679644136,"creation_date":1679644136,"answer_id":75831104,"question_id":51867650,"body_markdown":"I have been investigated this issue in my project. I made a conclusion that this problem can occurs in 2 cases:\r\n1. You create a constructor with argument. The compiler cannot accept this. So you need delete argument in conctructor. Or you can make your test class abstract and delegate argument to inheritors.\r\n2. You create testMethod with argument. I advise to delete argument from these methods.\r\nAnnotation @ParameterizedTest do not help in solving this problem for me. I use only @Test annotation\r\n","title":"Junit 5 - No ParameterResolver registered for parameter","body":"<p>I have been investigated this issue in my project. I made a conclusion that this problem can occurs in 2 cases:</p>\n<ol>\n<li>You create a constructor with argument. The compiler cannot accept this. So you need delete argument in conctructor. Or you can make your test class abstract and delegate argument to inheritors.</li>\n<li>You create testMethod with argument. I advise to delete argument from these methods.\nAnnotation @ParameterizedTest do not help in solving this problem for me. I use only @Test annotation</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":11878643,"reputation":1,"user_id":13489532,"display_name":"segadev"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681641202,"creation_date":1681544932,"answer_id":76020989,"question_id":51867650,"body_markdown":"inject dependency as variant:\r\n\r\n    @Autowired\r\n    public WebDriver driver;","title":"Junit 5 - No ParameterResolver registered for parameter","body":"<p>inject dependency as variant:</p>\n<pre><code>@Autowired\npublic WebDriver driver;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6615281,"reputation":1826,"user_id":5108777,"display_name":"manuelvigarcia"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687734530,"creation_date":1687734530,"answer_id":76552738,"question_id":51867650,"body_markdown":"Using JUnit 4 keywords/annotations with JUnit 5\r\n==\r\nI had &quot;all of the above&quot;... well, not all, but some.\r\n\r\nI was constructing JUnit 4 test cases (@RunWith(Parameterized.class) @Test, constructor with arguments...) that would have been fine in a project with JUnit 4. In fact, their structure was copied from a similar test case for a similar class-under-test.\r\n\r\nThe problem was that, being a new project, we started with all the new stuff: left Java8 for Java11, used lambda everywhere possible, and migrate tests to JUnit 5.\r\n\r\nThe solution, then, was to write proper JUnit 5 test cases.\r\n- Loose @Parameters at the data generation method in favor of @MethodSource(&quot;methodName&quot;) at the test case, right after @ParameterizedTest\r\n- remove the constructor with parameters and put parameters in the test case instead\r\n- get rid of the @RunWith(Parameterized.class) at class level\r\n\r\nBy the way I still have @ParameterizedTest and @Test in the same class. The latter runs once and the former runs as many times as data the @MethodSource creates. This was not the problem.","title":"Junit 5 - No ParameterResolver registered for parameter","body":"<h1>Using JUnit 4 keywords/annotations with JUnit 5</h1>\n<p>I had &quot;all of the above&quot;... well, not all, but some.</p>\n<p>I was constructing JUnit 4 test cases (@RunWith(Parameterized.class) @Test, constructor with arguments...) that would have been fine in a project with JUnit 4. In fact, their structure was copied from a similar test case for a similar class-under-test.</p>\n<p>The problem was that, being a new project, we started with all the new stuff: left Java8 for Java11, used lambda everywhere possible, and migrate tests to JUnit 5.</p>\n<p>The solution, then, was to write proper JUnit 5 test cases.</p>\n<ul>\n<li>Loose @Parameters at the data generation method in favor of @MethodSource(&quot;methodName&quot;) at the test case, right after @ParameterizedTest</li>\n<li>remove the constructor with parameters and put parameters in the test case instead</li>\n<li>get rid of the @RunWith(Parameterized.class) at class level</li>\n</ul>\n<p>By the way I still have @ParameterizedTest and @Test in the same class. The latter runs once and the former runs as many times as data the @MethodSource creates. This was not the problem.</p>\n"}],"owner":{"account_id":7527385,"reputation":2093,"user_id":5717031,"accept_rate":17,"display_name":"Mike ASP"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":199704,"favorite_count":0,"down_vote_count":0,"up_vote_count":120,"accepted_answer_id":51928592,"answer_count":19,"score":120,"last_activity_date":1693575431,"creation_date":1534374789,"question_id":51867650,"body_markdown":"I can write up and execute Selenium script without any special test framework but I wanted to use Junit 5 (because we have dependency with other tools) and I have never seen such error `org.junit.jupiter.api.extension.ParameterResolutionException` while working with Junit 4.\r\n\r\nCurrently it&#39;s Junit 5 and \r\nI googled it to get some sort of idea but can not resolve the issue. \r\n\r\nTest script using `JUnit 5`, `Eclipse 4.8` and `Selenium`:\r\n\r\n    import static org.junit.jupiter.api.Assertions.assertEquals;\r\n    import org.junit.jupiter.api.AfterEach;\r\n    import org.junit.jupiter.api.BeforeEach;\r\n    import org.junit.jupiter.api.Test;\r\n    import org.openqa.selenium.By;\r\n    import org.openqa.selenium.WebDriver;\r\n    import org.openqa.selenium.WebElement;\r\n    \r\n    public  class loginTest  {\r\n    \tpublic  WebDriver driver = null;\r\n\r\n    \tpublic loginTest(WebDriver driver) {\r\n    \t    this.driver=driver;\r\n    \t}\r\n\r\n    \t@BeforeEach\r\n    \tpublic void setUp() throws Exception {\r\n    \t\tdriver.get(&quot;google.com&quot;);\r\n    \t\tSystem.out.println(&quot;Page title is: &quot; + driver.getTitle());\r\n    \t}\r\n\r\n    \t@Test\r\n    \tpublic void test() {\r\n    \t\t// some action here I have in original script\r\n    \t\tSystem.out.println(&quot;Page title is: &quot; + driver.getTitle());\r\n    \t}\r\n\r\n    \t@AfterEach\r\n    \tpublic void tearDown() throws Exception {\r\n    \t\tdriver.quit();\r\n    \t}\r\n    }\r\n\r\nStack trace:\r\n\r\n&gt;    org.junit.jupiter.api.extension.ParameterResolutionException: No ParameterResolver registered for parameter [org.openqa.selenium.WebDriver arg0] in executable [public login.loginTest(org.openqa.selenium.WebDriver)].\r\n    \tat org.junit.jupiter.engine.execution.ExecutableInvoker.resolveParameter(ExecutableInvoker.java:191)","title":"Junit 5 - No ParameterResolver registered for parameter","body":"<p>I can write up and execute Selenium script without any special test framework but I wanted to use Junit 5 (because we have dependency with other tools) and I have never seen such error <code>org.junit.jupiter.api.extension.ParameterResolutionException</code> while working with Junit 4.</p>\n<p>Currently it's Junit 5 and\nI googled it to get some sort of idea but can not resolve the issue.</p>\n<p>Test script using <code>JUnit 5</code>, <code>Eclipse 4.8</code> and <code>Selenium</code>:</p>\n<pre><code>import static org.junit.jupiter.api.Assertions.assertEquals;\nimport org.junit.jupiter.api.AfterEach;\nimport org.junit.jupiter.api.BeforeEach;\nimport org.junit.jupiter.api.Test;\nimport org.openqa.selenium.By;\nimport org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.WebElement;\n\npublic  class loginTest  {\n    public  WebDriver driver = null;\n\n    public loginTest(WebDriver driver) {\n        this.driver=driver;\n    }\n\n    @BeforeEach\n    public void setUp() throws Exception {\n        driver.get(&quot;google.com&quot;);\n        System.out.println(&quot;Page title is: &quot; + driver.getTitle());\n    }\n\n    @Test\n    public void test() {\n        // some action here I have in original script\n        System.out.println(&quot;Page title is: &quot; + driver.getTitle());\n    }\n\n    @AfterEach\n    public void tearDown() throws Exception {\n        driver.quit();\n    }\n}\n</code></pre>\n<p>Stack trace:</p>\n<blockquote>\n<p>org.junit.jupiter.api.extension.ParameterResolutionException: No ParameterResolver registered for parameter [org.openqa.selenium.WebDriver arg0] in executable [public login.loginTest(org.openqa.selenium.WebDriver)].\nat org.junit.jupiter.engine.execution.ExecutableInvoker.resolveParameter(ExecutableInvoker.java:191)</p>\n</blockquote>\n"},{"tags":["java","testing","cucumber","testng"],"answers":[{"comments":[{"owner":{"account_id":16379082,"reputation":355,"user_id":11830541,"display_name":"Serhii Kachan"},"score":0,"creation_date":1644929369,"post_id":71118391,"comment_id":125730479,"body_markdown":"Thanks! That&#39;s exactly what I needed.","body":"Thanks! That&#39;s exactly what I needed."}],"tags":[],"owner":{"account_id":4895787,"reputation":10858,"user_id":3945473,"display_name":"M.P. Korstanje"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1644873515,"creation_date":1644873515,"answer_id":71118391,"question_id":71113381,"body_markdown":"When extending `AbstractTestNGCucumberTests` you can filter the output from `scenarios()`\r\n\r\n```\r\npublic class RunCucumberTest extends AbstractTestNGCucumberTests {\r\n\r\n    @DataProvider(parallel = true)\r\n    @Override\r\n    public Object[][] scenarios() {\r\n        Object[][] scenarios = super.scenarios();\r\n        // Do filtering here\r\n        return scenarios;\r\n    }\r\n\r\n}\r\n```\r\n\r\nBecause the data provider is used to invoke the test methode you can safely cast the first array element to `PickleWrapper` and use the `pickleWrapper.getPickle().get tags()` to access the tags.","title":"Cucumber 7 + TestNG - Dynamic tags manipulation before test run start","body":"<p>When extending <code>AbstractTestNGCucumberTests</code> you can filter the output from <code>scenarios()</code></p>\n<pre><code>public class RunCucumberTest extends AbstractTestNGCucumberTests {\n\n    @DataProvider(parallel = true)\n    @Override\n    public Object[][] scenarios() {\n        Object[][] scenarios = super.scenarios();\n        // Do filtering here\n        return scenarios;\n    }\n\n}\n</code></pre>\n<p>Because the data provider is used to invoke the test methode you can safely cast the first array element to <code>PickleWrapper</code> and use the <code>pickleWrapper.getPickle().get tags()</code> to access the tags.</p>\n"},{"tags":[],"owner":{"account_id":29335506,"reputation":1,"user_id":22475974,"display_name":"AKP"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693575280,"creation_date":1693575280,"answer_id":77023554,"question_id":71113381,"body_markdown":"This solution above is really good. It put me on the right track. I didn&#39;t understand how to overwrite the tags during run time. But I wanted the whole filtering thing work with usual &#39;and&#39; &#39;or&#39; &#39;not&#39; expressions of cucumber tag and also as simple as passing multiple tags separated by comma.\r\n\r\nSo, after whole day of digging around the cucumber classes starting from AbstractTestNGCucumberTests, I understood how exactly tags are handled. Then, I found the perfect solution. Here is the complete code.\r\n\r\n  \r\n    /**\r\n     * This runner is a hybrid runner which can run normally as local runner with Cucumber Options or run with tags variable passed from Pipeline tools or from any other sources\r\n     * &lt;br&gt;&lt;/br&gt;\r\n     * This runner works with either of them or both combined. Let&#39;s say You have passed &#39;@smoke&#39; tag in @CucumberOptions annotation which have 100 scenarios, then additionally you can also pass a runtime tag &quot;@Login&quot; and filter again.\r\n     */\r\n    @CucumberOptions( features = &quot;src/test/resources/features/&quot;,\r\n                      glue = { &quot;stepDefinitions&quot;, &quot;hooks&quot; },\r\n                      plugin = { &quot;pretty&quot;, &quot;com.aventstack.extentreports.cucumber.adapter.ExtentCucumberAdapter:&quot; },\r\n                      tags = &quot;&quot; )       //Pass tags here as usual\r\n    public class CucumberRunnerTest extends AbstractTestNGCucumberTests\r\n    {\r\n    \r\n    \t@DataProvider\r\n    \t@Override\r\n    \tpublic Object[][] scenarios()\r\n    \t{\r\n    \t\tObject[][] scenarios = super.scenarios();\r\n    \r\n    \t\tString dynamicTags = System.getenv(&quot;tags&quot;);   //passed from Pipeline \r\n            //Or add any other sources you want to get the tags from\r\n\r\n    \t\tif ( dynamicTags != null &amp;&amp; !dynamicTags.equals(&quot;&quot;) ) return (Arrays.stream(scenarios).filter(scenario -&gt; TagExpressionParser.parse(dynamicTags).evaluate((( PickleWrapper ) scenario[0]).getPickle().getTags())).collect(Collectors.toList())).toArray(new Object[0][0]);\r\n\t\t    else return scenarios;\r\n    \t}\r\n    }\r\n\r\nI narrowed it down to one simple line of TagExpression but it took me hours to find these and understand from so many different classes.\r\n\r\nTry this once, hope it helps.\r\n","title":"Cucumber 7 + TestNG - Dynamic tags manipulation before test run start","body":"<p>This solution above is really good. It put me on the right track. I didn't understand how to overwrite the tags during run time. But I wanted the whole filtering thing work with usual 'and' 'or' 'not' expressions of cucumber tag and also as simple as passing multiple tags separated by comma.</p>\n<p>So, after whole day of digging around the cucumber classes starting from AbstractTestNGCucumberTests, I understood how exactly tags are handled. Then, I found the perfect solution. Here is the complete code.</p>\n<pre><code>/**\n * This runner is a hybrid runner which can run normally as local runner with Cucumber Options or run with tags variable passed from Pipeline tools or from any other sources\n * &lt;br&gt;&lt;/br&gt;\n * This runner works with either of them or both combined. Let's say You have passed '@smoke' tag in @CucumberOptions annotation which have 100 scenarios, then additionally you can also pass a runtime tag &quot;@Login&quot; and filter again.\n */\n@CucumberOptions( features = &quot;src/test/resources/features/&quot;,\n                  glue = { &quot;stepDefinitions&quot;, &quot;hooks&quot; },\n                  plugin = { &quot;pretty&quot;, &quot;com.aventstack.extentreports.cucumber.adapter.ExtentCucumberAdapter:&quot; },\n                  tags = &quot;&quot; )       //Pass tags here as usual\npublic class CucumberRunnerTest extends AbstractTestNGCucumberTests\n{\n\n    @DataProvider\n    @Override\n    public Object[][] scenarios()\n    {\n        Object[][] scenarios = super.scenarios();\n\n        String dynamicTags = System.getenv(&quot;tags&quot;);   //passed from Pipeline \n        //Or add any other sources you want to get the tags from\n\n        if ( dynamicTags != null &amp;&amp; !dynamicTags.equals(&quot;&quot;) ) return (Arrays.stream(scenarios).filter(scenario -&gt; TagExpressionParser.parse(dynamicTags).evaluate((( PickleWrapper ) scenario[0]).getPickle().getTags())).collect(Collectors.toList())).toArray(new Object[0][0]);\n        else return scenarios;\n    }\n}\n</code></pre>\n<p>I narrowed it down to one simple line of TagExpression but it took me hours to find these and understand from so many different classes.</p>\n<p>Try this once, hope it helps.</p>\n"}],"owner":{"account_id":16379082,"reputation":355,"user_id":11830541,"display_name":"Serhii Kachan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1175,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":71118391,"answer_count":2,"score":1,"last_activity_date":1693575280,"creation_date":1644848452,"question_id":71113381,"body_markdown":"I use TestNG and Cucumber in my project.\r\n\r\nUsed versions:\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.testng&lt;/groupId&gt;\r\n            &lt;artifactId&gt;testng&lt;/artifactId&gt;\r\n            &lt;version&gt;7.4.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.cucumber&lt;/groupId&gt;\r\n            &lt;artifactId&gt;cucumber-testng&lt;/artifactId&gt;\r\n            &lt;version&gt;7.0.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.cucumber&lt;/groupId&gt;\r\n            &lt;artifactId&gt;cucumber-java&lt;/artifactId&gt;\r\n            &lt;version&gt;7.0.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\nAll works fine, but I need to make some dynamic tags manipulation before test run start.\r\nTo be more specific - I need to add additional filter tag expressions based on some conditions of environment.\r\n\r\nCurrent implementation is `AbstractTestNGCucumberTests` class with a `TestNGCucumberRunner` field.\r\n\r\nThe place where I need to change/add some lines of code is in the constructor of `TestNGCucumberRunner` class, since the runner initializes and starts the test run right there.\r\n\r\nProblem is that almost all classes in *cucumber-testng* dependency are not `public` and `final`. So I cannot extend classes and override some logic.\r\n\r\nOnly way I see is to duplicate all the classes in dependency to my source folder what is a weird and dumb idea.\r\n\r\nIs there any tips how can I achieve my goal ?","title":"Cucumber 7 + TestNG - Dynamic tags manipulation before test run start","body":"<p>I use TestNG and Cucumber in my project.</p>\n<p>Used versions:</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;org.testng&lt;/groupId&gt;\n        &lt;artifactId&gt;testng&lt;/artifactId&gt;\n        &lt;version&gt;7.4.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;io.cucumber&lt;/groupId&gt;\n        &lt;artifactId&gt;cucumber-testng&lt;/artifactId&gt;\n        &lt;version&gt;7.0.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;io.cucumber&lt;/groupId&gt;\n        &lt;artifactId&gt;cucumber-java&lt;/artifactId&gt;\n        &lt;version&gt;7.0.0&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>All works fine, but I need to make some dynamic tags manipulation before test run start.\nTo be more specific - I need to add additional filter tag expressions based on some conditions of environment.</p>\n<p>Current implementation is <code>AbstractTestNGCucumberTests</code> class with a <code>TestNGCucumberRunner</code> field.</p>\n<p>The place where I need to change/add some lines of code is in the constructor of <code>TestNGCucumberRunner</code> class, since the runner initializes and starts the test run right there.</p>\n<p>Problem is that almost all classes in <em>cucumber-testng</em> dependency are not <code>public</code> and <code>final</code>. So I cannot extend classes and override some logic.</p>\n<p>Only way I see is to duplicate all the classes in dependency to my source folder what is a weird and dumb idea.</p>\n<p>Is there any tips how can I achieve my goal ?</p>\n"},{"tags":["java","mongodb","illegalstateexception","mongodb-atlas","mongo-java-driver"],"comments":[{"owner":{"account_id":19354220,"reputation":90,"user_id":14150858,"display_name":"KarlMeierBE"},"score":0,"creation_date":1627570278,"post_id":68501141,"comment_id":121196558,"body_markdown":"Did you solve this issue by now?","body":"Did you solve this issue by now?"},{"owner":{"account_id":11541400,"reputation":463,"user_id":8456953,"accept_rate":0,"display_name":"Sajitha Liyanage"},"score":0,"creation_date":1627749700,"post_id":68501141,"comment_id":121241824,"body_markdown":"no. Still looking for an answer","body":"no. Still looking for an answer"},{"owner":{"account_id":19354220,"reputation":90,"user_id":14150858,"display_name":"KarlMeierBE"},"score":1,"creation_date":1628520030,"post_id":68501141,"comment_id":121436313,"body_markdown":"Have you tried retrieving the database in the same session? I ran into this issue and after I retrieved the database and then the collection from the same Mongo client, it was working fine for me.","body":"Have you tried retrieving the database in the same session? I ran into this issue and after I retrieved the database and then the collection from the same Mongo client, it was working fine for me."},{"owner":{"account_id":8487091,"reputation":547,"user_id":6364823,"display_name":"Satyaaditya"},"score":0,"creation_date":1683803143,"post_id":68501141,"comment_id":134423997,"body_markdown":"I tried to write a generic transaction function in a different class where session is not created. having collection retrieved from the same session solved issue for me.","body":"I tried to write a generic transaction function in a different class where session is not created. having collection retrieved from the same session solved issue for me."}],"answers":[{"tags":[],"owner":{"account_id":11541400,"reputation":463,"user_id":8456953,"accept_rate":0,"display_name":"Sajitha Liyanage"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1693575222,"creation_date":1693575222,"answer_id":77023545,"question_id":68501141,"body_markdown":"I no longer encountered the previously mentioned error after setting the MongoDB client as follows (use this in a Singleton class).\r\n\r\n```java\r\nConnectionString connectionString = new ConnectionString(&quot;mongoUrl&quot;);\r\nCodecRegistry pojoCodecRegistry = CodecRegistries.fromProviders(PojoCodecProvider.builder().automatic(true).build());\r\nCodecRegistry codecRegistry = CodecRegistries.fromRegistries(MongoClientSettings.getDefaultCodecRegistry(), pojoCodecRegistry);\r\nMongoClientSettings clientSettings = MongoClientSettings.builder()\r\n                    .retryWrites(true)\r\n                    .applyConnectionString(connectionString)\r\n                    .codecRegistry(codecRegistry)\r\n                    .applyToConnectionPoolSettings((ConnectionPoolSettings.Builder builder) -&gt; {\r\n                        builder.maxSize(mongoMaxPoolSize) //connections count\r\n                                .minSize(5)\r\n                                .maxConnectionLifeTime(30, TimeUnit.MINUTES)\r\n                                .maxConnectionIdleTime( 30000, TimeUnit.MILLISECONDS);\r\n                    })\r\n                    .applyToSocketSettings(builder -&gt; {\r\n                        builder.connectTimeout(2000, TimeUnit.MILLISECONDS);\r\n                    })\r\n                    .build();\r\nmongoClient = MongoClients.create(clientSettings);\r\n```","title":"MongoDB: java.lang.IllegalStateException: state should be: ClientSession from same MongoClient","body":"<p>I no longer encountered the previously mentioned error after setting the MongoDB client as follows (use this in a Singleton class).</p>\n<pre class=\"lang-java prettyprint-override\"><code>ConnectionString connectionString = new ConnectionString(&quot;mongoUrl&quot;);\nCodecRegistry pojoCodecRegistry = CodecRegistries.fromProviders(PojoCodecProvider.builder().automatic(true).build());\nCodecRegistry codecRegistry = CodecRegistries.fromRegistries(MongoClientSettings.getDefaultCodecRegistry(), pojoCodecRegistry);\nMongoClientSettings clientSettings = MongoClientSettings.builder()\n                    .retryWrites(true)\n                    .applyConnectionString(connectionString)\n                    .codecRegistry(codecRegistry)\n                    .applyToConnectionPoolSettings((ConnectionPoolSettings.Builder builder) -&gt; {\n                        builder.maxSize(mongoMaxPoolSize) //connections count\n                                .minSize(5)\n                                .maxConnectionLifeTime(30, TimeUnit.MINUTES)\n                                .maxConnectionIdleTime( 30000, TimeUnit.MILLISECONDS);\n                    })\n                    .applyToSocketSettings(builder -&gt; {\n                        builder.connectTimeout(2000, TimeUnit.MILLISECONDS);\n                    })\n                    .build();\nmongoClient = MongoClients.create(clientSettings);\n</code></pre>\n"}],"owner":{"account_id":11541400,"reputation":463,"user_id":8456953,"accept_rate":0,"display_name":"Sajitha Liyanage"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1040,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1693575222,"creation_date":1627051979,"question_id":68501141,"body_markdown":"I have an application that stores data in the used **MongoDB Atlas (Cluster Tier:\r\nM0 Sandbox Shared RAM, 512 MB Storage)** collection as a transaction. The sample code is as follows.\r\n\r\n```java\r\nMongoClient mongoClient = MongoClients.create(&quot;Connection-URL&quot;);\r\nMongoDatabase mongoDatabase = mongoClient.getDatabase(&quot;DATABASE&quot;);\r\n\r\nClientSession clientSession = mongoClient.startSession();\r\nclientSession.startTransaction();\r\nstatus = mongoDatabase.getCollection(collection).insertOne(clientSession, insertDocument);\r\n\r\nif (status == IS_SUCCESS) {\r\n   clientSession.commitTransaction();\r\n} else {\r\n   clientSession.abortTransaction();\r\n}\r\n\r\nclientSession.close();\r\n```\r\n\r\nThis works fine with multiple requests. However, after some time (can not say the exact time), I&#39;m getting the below exception if I invoke the above functionality.\r\n\r\n```\r\njava.lang.IllegalStateException: state should be: ClientSession from same MongoClient\r\n\tat com.mongodb.assertions.Assertions.isTrue(Assertions.java:72)\r\n\tat com.mongodb.client.internal.MongoClientDelegate$DelegateOperationExecutor.getClientSession(MongoClientDelegate.java:279)\r\n\tat com.mongodb.client.internal.MongoClientDelegate$DelegateOperationExecutor.execute(MongoClientDelegate.java:206)\r\n\tat com.mongodb.client.internal.MongoCollectionImpl.executeSingleWriteRequest(MongoCollectionImpl.java:1053)\r\n\tat com.mongodb.client.internal.MongoCollectionImpl.executeInsertOne(MongoCollectionImpl.java:503)\r\n\tat com.mongodb.client.internal.MongoCollectionImpl.insertOne(MongoCollectionImpl.java:499)\r\n\tat com.mongodb.client.internal.MongoCollectionImpl.insertOne(MongoCollectionImpl.java:492)\r\n\tat mongo.impl.InsertDocuments.insertItem(InsertDocuments.java:24)\r\n```\r\nand continues failing all the time...\r\n\r\nI&#39;m using the following client connector to connect from my JAVA application\r\n\r\n```\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.mongodb&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;mongo-java-driver&lt;/artifactId&gt;\r\n\t&lt;version&gt;3.12.8&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nDoes anyone know why this is happening?","title":"MongoDB: java.lang.IllegalStateException: state should be: ClientSession from same MongoClient","body":"<p>I have an application that stores data in the used <strong>MongoDB Atlas (Cluster Tier:\nM0 Sandbox Shared RAM, 512 MB Storage)</strong> collection as a transaction. The sample code is as follows.</p>\n<pre class=\"lang-java prettyprint-override\"><code>MongoClient mongoClient = MongoClients.create(&quot;Connection-URL&quot;);\nMongoDatabase mongoDatabase = mongoClient.getDatabase(&quot;DATABASE&quot;);\n\nClientSession clientSession = mongoClient.startSession();\nclientSession.startTransaction();\nstatus = mongoDatabase.getCollection(collection).insertOne(clientSession, insertDocument);\n\nif (status == IS_SUCCESS) {\n   clientSession.commitTransaction();\n} else {\n   clientSession.abortTransaction();\n}\n\nclientSession.close();\n</code></pre>\n<p>This works fine with multiple requests. However, after some time (can not say the exact time), I'm getting the below exception if I invoke the above functionality.</p>\n<pre><code>java.lang.IllegalStateException: state should be: ClientSession from same MongoClient\n    at com.mongodb.assertions.Assertions.isTrue(Assertions.java:72)\n    at com.mongodb.client.internal.MongoClientDelegate$DelegateOperationExecutor.getClientSession(MongoClientDelegate.java:279)\n    at com.mongodb.client.internal.MongoClientDelegate$DelegateOperationExecutor.execute(MongoClientDelegate.java:206)\n    at com.mongodb.client.internal.MongoCollectionImpl.executeSingleWriteRequest(MongoCollectionImpl.java:1053)\n    at com.mongodb.client.internal.MongoCollectionImpl.executeInsertOne(MongoCollectionImpl.java:503)\n    at com.mongodb.client.internal.MongoCollectionImpl.insertOne(MongoCollectionImpl.java:499)\n    at com.mongodb.client.internal.MongoCollectionImpl.insertOne(MongoCollectionImpl.java:492)\n    at mongo.impl.InsertDocuments.insertItem(InsertDocuments.java:24)\n</code></pre>\n<p>and continues failing all the time...</p>\n<p>I'm using the following client connector to connect from my JAVA application</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.mongodb&lt;/groupId&gt;\n    &lt;artifactId&gt;mongo-java-driver&lt;/artifactId&gt;\n    &lt;version&gt;3.12.8&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Does anyone know why this is happening?</p>\n"},{"tags":["java","mysql","glassfish","connection","pool"],"comments":[{"owner":{"account_id":1192700,"reputation":2253,"user_id":1165132,"display_name":"Adrian"},"score":1,"creation_date":1355927419,"post_id":13950496,"comment_id":19246421,"body_markdown":"Try using the same or smaller timeout values within your application and database. For instance if your applications idle timeout is higher than the one from the database your application will try to reuse a connection which was already closed by the database server.","body":"Try using the same or smaller timeout values within your application and database. For instance if your applications idle timeout is higher than the one from the database your application will try to reuse a connection which was already closed by the database server."},{"owner":{"account_id":465793,"reputation":16048,"user_id":870122,"accept_rate":88,"display_name":"perissf"},"score":0,"creation_date":1356615597,"post_id":13950496,"comment_id":19423874,"body_markdown":"Does it help increasing pool resize quantity? See the reason [here](http://docs.oracle.com/cd/E19316-01/820-4343/abehq/index.html)","body":"Does it help increasing pool resize quantity? See the reason <a href=\"http://docs.oracle.com/cd/E19316-01/820-4343/abehq/index.html\" rel=\"nofollow noreferrer\">here</a>"}],"answers":[{"comments":[{"owner":{"account_id":1418089,"reputation":2926,"user_id":1343275,"accept_rate":57,"display_name":"mukund"},"score":0,"creation_date":1355920261,"post_id":13950687,"comment_id":19242657,"body_markdown":"See my Edit.I think some configuration problem may be there.","body":"See my Edit.I think some configuration problem may be there."}],"tags":[],"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"comment_count":1,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1390373321,"creation_date":1355914262,"answer_id":13950687,"question_id":13950496,"body_markdown":"It most likely means that the database has restarted or the network connection to the database has been broken (e.g. a NAT connection has timed out) ... and your webapp is trying to use a stale database connection.\r\n\r\nIf the problem persists after restarting the web container, it could be something more serious.\r\n\r\n--------------------------\r\n\r\nYou asked the following:\r\n\r\n    How can the NumConnFree become 161 as I have Maximum Pool Size = 100 ?\r\n    How can the NumConnUsed become -136, a negative number ?\r\n    How can the NumConnDestroyed &gt; NumConnCreated ? \r\n\r\nOn the face of it, these don&#39;t make sense.  However, they could simply be the result of some usage counters being updated in a non-thread-safe way.  This is not necessarily related to your original problem.","title":"what is java.io.EOFException, Message: Can not read response from server. Expected to read 4 bytes, read 0 bytes","body":"<p>It most likely means that the database has restarted or the network connection to the database has been broken (e.g. a NAT connection has timed out) ... and your webapp is trying to use a stale database connection.</p>\n\n<p>If the problem persists after restarting the web container, it could be something more serious.</p>\n\n<hr>\n\n<p>You asked the following:</p>\n\n<pre><code>How can the NumConnFree become 161 as I have Maximum Pool Size = 100 ?\nHow can the NumConnUsed become -136, a negative number ?\nHow can the NumConnDestroyed &gt; NumConnCreated ? \n</code></pre>\n\n<p>On the face of it, these don't make sense.  However, they could simply be the result of some usage counters being updated in a non-thread-safe way.  This is not necessarily related to your original problem.</p>\n"},{"comments":[{"owner":{"account_id":40243,"reputation":1034,"user_id":116596,"display_name":"Idris Mokhtarzada"},"score":6,"creation_date":1405333304,"post_id":14066125,"comment_id":38369175,"body_markdown":"This is a generic explanation of the EOFException, but doesn&#39;t really help with the JDBC problem that mukund is asking about.","body":"This is a generic explanation of the EOFException, but doesn&#39;t really help with the JDBC problem that mukund is asking about."}],"tags":[],"owner":{"account_id":2065327,"reputation":611,"user_id":1840928,"accept_rate":60,"display_name":"Puneet"},"comment_count":1,"down_vote_count":4,"up_vote_count":13,"is_accepted":false,"score":9,"last_activity_date":1356679532,"creation_date":1356679532,"answer_id":14066125,"question_id":13950496,"body_markdown":"This is EndOfFileException in java, happens when your cursor start point is on the end point or when database connection closed because of some unexpected exception.","title":"what is java.io.EOFException, Message: Can not read response from server. Expected to read 4 bytes, read 0 bytes","body":"<p>This is EndOfFileException in java, happens when your cursor start point is on the end point or when database connection closed because of some unexpected exception.</p>\n"},{"comments":[{"owner":{"account_id":1232799,"reputation":1734,"user_id":1197030,"display_name":"Joeblade"},"score":1,"creation_date":1443619376,"post_id":14072822,"comment_id":53566523,"body_markdown":"The link &quot;needs to be exact&quot; is broken. any idea what the original page said?","body":"The link &quot;needs to be exact&quot; is broken. any idea what the original page said?"},{"owner":{"account_id":593875,"reputation":20381,"user_id":276232,"accept_rate":50,"display_name":"Christopher Schultz"},"score":1,"creation_date":1532209212,"post_id":14072822,"comment_id":89889921,"body_markdown":"@mrjink I fixed the link, again. For future reference (when Oracle moves it, again), the reference is to MySQL&#39;s Connector/J version 5.1.3 release notes, whose final item contains the syntax to use.","body":"@mrjink I fixed the link, again. For future reference (when Oracle moves it, again), the reference is to MySQL&#39;s Connector/J version 5.1.3 release notes, whose final item contains the syntax to use."}],"tags":[],"owner":{"account_id":593875,"reputation":20381,"user_id":276232,"accept_rate":50,"display_name":"Christopher Schultz"},"comment_count":2,"down_vote_count":1,"up_vote_count":15,"is_accepted":false,"score":14,"last_activity_date":1675352874,"creation_date":1356713277,"answer_id":14072822,"question_id":13950496,"body_markdown":"The connection has failed, possibly due to a firewall idle-timeout, etc. If you don&#39;t have your JDBC driver configured to reconnect on failure, then this error will not go away unless you open a new connection.\r\n\r\nIf you are using a database connection pool (you *are* using one, right?), then you probably want to enable it&#39;s connection-checking features like issuing a query to check to see if the connection is working before handing it back to the application. In Apache commons-dbcp, this is called the `validationQuery` and is often set to something simple like `SELECT 1`.\r\n\r\nSince you are using MySQL, you ought to use a Connector/J-specific &quot;ping&quot; query that is lighter-weight than actually issuing a true SQL query and set your validation query to `/* ping */ SELECT 1` (the ping part [needs to be exact](https://docs.oracle.com/cd/E17952_01/connector-j-5.1-relnotes-en/news-5-1-3.html)).","title":"what is java.io.EOFException, Message: Can not read response from server. Expected to read 4 bytes, read 0 bytes","body":"<p>The connection has failed, possibly due to a firewall idle-timeout, etc. If you don't have your JDBC driver configured to reconnect on failure, then this error will not go away unless you open a new connection.</p>\n<p>If you are using a database connection pool (you <em>are</em> using one, right?), then you probably want to enable it's connection-checking features like issuing a query to check to see if the connection is working before handing it back to the application. In Apache commons-dbcp, this is called the <code>validationQuery</code> and is often set to something simple like <code>SELECT 1</code>.</p>\n<p>Since you are using MySQL, you ought to use a Connector/J-specific &quot;ping&quot; query that is lighter-weight than actually issuing a true SQL query and set your validation query to <code>/* ping */ SELECT 1</code> (the ping part <a href=\"https://docs.oracle.com/cd/E17952_01/connector-j-5.1-relnotes-en/news-5-1-3.html\" rel=\"nofollow noreferrer\">needs to be exact</a>).</p>\n"},{"comments":[{"owner":{"account_id":2022297,"reputation":2781,"user_id":1808164,"accept_rate":87,"display_name":"EdgeCaseBerg"},"score":0,"creation_date":1415378370,"post_id":14133656,"comment_id":42184769,"body_markdown":"in my case when dealing with this it was the timeout value being too small.","body":"in my case when dealing with this it was the timeout value being too small."}],"tags":[],"owner":{"account_id":60096,"reputation":40513,"user_id":179630,"accept_rate":64,"display_name":"gerrytan"},"comment_count":1,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1357191761,"creation_date":1357191761,"answer_id":14133656,"question_id":13950496,"body_markdown":"While I don&#39;t have definitive solutions, it seems something is interfering communication between the app server and db. Following are few things you can try to isolate the problems:\r\n\r\n - Try to determine wether this is mysql problem or java code problem. Try connect to mysql using the command line tool from the same host as the app server and issue similar SQL to perform login. Test using a simple java code that does a select, deploy it to the same infrastructure, see what happen etc. Also check the mysql server log, see if you can find anything useful\r\n\r\n - There are two way an idle connection get closed: by the connection pool code that runs inside app server, or by mysql itself. Make sure you check the config on both sides\r\n\r\n - Check if any network infrastructure config has changed recently. Was there any new firewall rule in place interfering with app server &lt;--&gt; mysql connectivity? Was there any settings that prohibits open TCP connection idling longer than X?\r\n\r\n - Try a different connection pooling library just to eliminate the possibility it&#39;s the connection pooling\r\n\r\nGood luck","title":"what is java.io.EOFException, Message: Can not read response from server. Expected to read 4 bytes, read 0 bytes","body":"<p>While I don't have definitive solutions, it seems something is interfering communication between the app server and db. Following are few things you can try to isolate the problems:</p>\n\n<ul>\n<li><p>Try to determine wether this is mysql problem or java code problem. Try connect to mysql using the command line tool from the same host as the app server and issue similar SQL to perform login. Test using a simple java code that does a select, deploy it to the same infrastructure, see what happen etc. Also check the mysql server log, see if you can find anything useful</p></li>\n<li><p>There are two way an idle connection get closed: by the connection pool code that runs inside app server, or by mysql itself. Make sure you check the config on both sides</p></li>\n<li><p>Check if any network infrastructure config has changed recently. Was there any new firewall rule in place interfering with app server &lt;--> mysql connectivity? Was there any settings that prohibits open TCP connection idling longer than X?</p></li>\n<li><p>Try a different connection pooling library just to eliminate the possibility it's the connection pooling</p></li>\n</ul>\n\n<p>Good luck</p>\n"},{"tags":[],"owner":{"account_id":1738132,"reputation":21,"user_id":1590225,"display_name":"Mani"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1357207912,"creation_date":1357207912,"answer_id":14136747,"question_id":13950496,"body_markdown":"It might be Firewall related problem.","title":"what is java.io.EOFException, Message: Can not read response from server. Expected to read 4 bytes, read 0 bytes","body":"<p>It might be Firewall related problem.</p>\n"},{"tags":[],"owner":{"account_id":8914098,"reputation":51,"user_id":6653231,"display_name":"macieks"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1478561972,"creation_date":1478561972,"answer_id":40476616,"question_id":13950496,"body_markdown":"I had this problem but I it wasn&#39;t possible for me to make changes in MySQL database configuration. Therefore I ensured that in my sql connector class the connection is always closed before it&#39;s initiated again. Something like:\r\n\r\n    public static Connection getConnection() {\r\n\r\n        if (DatabaseConnnector.conn == null) {\r\n            initConn();\r\n        } else {\r\n            try {\r\n                DatabaseConnnector.conn.close();          \r\n            } catch (SQLException e) {\r\n                e.printStackTrace();\r\n            }\r\n              initConn();\r\n        }\r\n        return DatabaseConnnector.conn;\r\n    }\r\n\r\nAnd this solved the problem. \r\n","title":"what is java.io.EOFException, Message: Can not read response from server. Expected to read 4 bytes, read 0 bytes","body":"<p>I had this problem but I it wasn't possible for me to make changes in MySQL database configuration. Therefore I ensured that in my sql connector class the connection is always closed before it's initiated again. Something like:</p>\n\n<pre><code>public static Connection getConnection() {\n\n    if (DatabaseConnnector.conn == null) {\n        initConn();\n    } else {\n        try {\n            DatabaseConnnector.conn.close();          \n        } catch (SQLException e) {\n            e.printStackTrace();\n        }\n          initConn();\n    }\n    return DatabaseConnnector.conn;\n}\n</code></pre>\n\n<p>And this solved the problem. </p>\n"},{"comments":[{"owner":{"account_id":198160,"reputation":1241,"user_id":442665,"accept_rate":26,"display_name":"jbobbins"},"score":0,"creation_date":1574795466,"post_id":58609658,"comment_id":104355148,"body_markdown":"I got this error in PHPStorm trying to connect over SSH to a Ubuntu 16.04 virtual machine.  The problem in my case was I had put the VM&#39;s host name in the `Host` field on the General tab rather than `localhost` like it should have been.  (In my case using `single connection mode` didn&#39;t seem to make a difference one way or the other.)","body":"I got this error in PHPStorm trying to connect over SSH to a Ubuntu 16.04 virtual machine.  The problem in my case was I had put the VM&#39;s host name in the <code>Host</code> field on the General tab rather than <code>localhost</code> like it should have been.  (In my case using <code>single connection mode</code> didn&#39;t seem to make a difference one way or the other.)"}],"tags":[],"owner":{"account_id":14619189,"reputation":61,"user_id":10558422,"display_name":"Thomas"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1572359919,"creation_date":1572359919,"answer_id":58609658,"question_id":13950496,"body_markdown":"Got this error in PHPStorm while trying to connect and/or get some data from mysql server. Checkbox &quot;single connection mode&quot; fixed things for me.\r\nI&#39;ll just leave it here. Perhaps this will help some martyr in the future.\r\n\r\nhttps://www.jetbrains.com/help/phpstorm/configuring-database-connections.html","title":"what is java.io.EOFException, Message: Can not read response from server. Expected to read 4 bytes, read 0 bytes","body":"<p>Got this error in PHPStorm while trying to connect and/or get some data from mysql server. Checkbox \"single connection mode\" fixed things for me.\nI'll just leave it here. Perhaps this will help some martyr in the future.</p>\n\n<p><a href=\"https://www.jetbrains.com/help/phpstorm/configuring-database-connections.html\" rel=\"nofollow noreferrer\">https://www.jetbrains.com/help/phpstorm/configuring-database-connections.html</a></p>\n"},{"tags":[],"owner":{"account_id":10316841,"reputation":11,"user_id":7610917,"display_name":"zhuojl"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1587519050,"creation_date":1587519050,"answer_id":61355853,"question_id":13950496,"body_markdown":"i meet the same problem, it caused by lock for too much time.\r\n\r\nwe have a long transcation A, if execute it, the other trascation will be locked util transcation A finished, so the others always be killed by our mysql tool(pt-kill)","title":"what is java.io.EOFException, Message: Can not read response from server. Expected to read 4 bytes, read 0 bytes","body":"<p>i meet the same problem, it caused by lock for too much time.</p>\n\n<p>we have a long transcation A, if execute it, the other trascation will be locked util transcation A finished, so the others always be killed by our mysql tool(pt-kill)</p>\n"},{"tags":[],"owner":{"account_id":1351343,"reputation":1331,"user_id":1290868,"display_name":"myuce"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1632494186,"creation_date":1632493873,"answer_id":69316748,"question_id":13950496,"body_markdown":"In my case, it was the java mysql driver/connector version. I.e. (Even if the server was version 8) somehow when I used mysql driver/connector version 5.1.44, then it started working.","title":"what is java.io.EOFException, Message: Can not read response from server. Expected to read 4 bytes, read 0 bytes","body":"<p>In my case, it was the java mysql driver/connector version. I.e. (Even if the server was version 8) somehow when I used mysql driver/connector version 5.1.44, then it started working.</p>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1671090935,"post_id":74766172,"comment_id":132023925,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/74766172/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":9569662,"reputation":1,"user_id":7107701,"display_name":"Hero"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1670813116,"creation_date":1670813116,"answer_id":74766172,"question_id":13950496,"body_markdown":"it may be the server connection is full\r\ntry to reduce the server connection or modify the max connection param","title":"what is java.io.EOFException, Message: Can not read response from server. Expected to read 4 bytes, read 0 bytes","body":"<p>it may be the server connection is full\ntry to reduce the server connection or modify the max connection param</p>\n"},{"tags":[],"owner":{"account_id":3603762,"reputation":1569,"user_id":3006465,"display_name":"electrobabe"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693574770,"creation_date":1693574770,"answer_id":77023501,"question_id":13950496,"body_markdown":"In our case, we got the error &quot;Can not read response from server. Expected to read 4 bytes, read 0 bytes before connection was unexpectedl lost&quot; (in IntelliJ) because of a Docker error.\r\n\r\nWe fixed it with simply running:\r\n\r\n    docker-compose --profile microservices --compatibility -f docker-compose.services.yml up\r\n\r\n","title":"what is java.io.EOFException, Message: Can not read response from server. Expected to read 4 bytes, read 0 bytes","body":"<p>In our case, we got the error &quot;Can not read response from server. Expected to read 4 bytes, read 0 bytes before connection was unexpectedl lost&quot; (in IntelliJ) because of a Docker error.</p>\n<p>We fixed it with simply running:</p>\n<pre><code>docker-compose --profile microservices --compatibility -f docker-compose.services.yml up\n</code></pre>\n"}],"owner":{"account_id":1418089,"reputation":2926,"user_id":1343275,"accept_rate":57,"display_name":"mukund"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":96288,"favorite_count":0,"down_vote_count":0,"up_vote_count":54,"answer_count":11,"score":54,"last_activity_date":1693574770,"creation_date":1355913594,"question_id":13950496,"body_markdown":"This question has been asked a couple of times in SO and many times in other sites. But I didn&#39;t get any satisfiable answer.  \r\n  \r\nMy problem:  \r\nI have a java web application which uses simple **JDBC** to connect to **mysql** database through **Glassfish** application server.  \r\n  \r\nI have used connection pooling in glassfish server with the following configurations:  \r\nInitial Pool Size: 25  \r\nMaximum Pool Size: 100  \r\nPool Resize Quantity: 2  \r\nIdle Timeout: 300 seconds  \r\nMax Wait Time: 60,000 milliseconds  \r\n  \r\nThe application has been deployed for last 3 months and it was running flawlessly too.  \r\nBut from last 2 days the following error is coming at the time of login.  \r\n  \r\n**Partial StackTrace**  \r\n  \r\n    com.mysql.jdbc.exceptions.MySQLNonTransientConnectionException: No operations allowed after connection closed.Connection was implicitly closed due to underlying exception/error:  \r\n  \r\n    ** BEGIN NESTED EXCEPTION **  \r\n  \r\n    com.mysql.jdbc.CommunicationsException  \r\n    MESSAGE: Communications link failure due to underlying exception:  \r\n  \r\n    ** BEGIN NESTED EXCEPTION **  \r\n  \r\n    java.io.EOFException  \r\n    MESSAGE: Can not read response from server. Expected to read 4 bytes, read 0 bytes before connection was unexpectedly lost.  \r\n  \r\n    STACKTRACE:  \r\n  \r\n    java.io.EOFException: Can not read response from server. Expected to read 4 bytes, read 0 bytes before connection was unexpectedly lost.  \r\n    at com.mysql.jdbc.MysqlIO.readFully(MysqlIO.java:1997)  \r\n    at com.mysql.jdbc.MysqlIO.reuseAndReadPacket(MysqlIO.java:2411)  \r\n    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:2916)  \r\n    at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1631)  \r\n    at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:1723)  \r\n    at com.mysql.jdbc.Connection.execSQL(Connection.java:3256)  \r\n    at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:1313)  \r\n    at com.mysql.jdbc.PreparedStatement.executeQuery(PreparedStatement.java:1448)  \r\n    ............  \r\n    ............  \r\n    my application traces....  \r\n  \r\n  \r\n**What caused this error suddenly ?** I have lost a lot of time for this.\r\n  \r\n**EDIT :** The problem even persists after restarting the server. As per DBA two of the important mysql server configurations are:  \r\n**wait_timeout :** 1800 seconds  \r\n**connect_timeout :** 10 seconds  \r\n**NOTE :** Other applications deployed in the same server connecting to the same database and using different pools are running smoothly.  \r\n  \r\n**EDIT-2 :** After reading a lot of things and expecting some positive outcome I made these changes to my connection pool.  \r\n  \r\n**Max Wait Time :** 0 (previously it was 60 seconds)  \r\n**Connection Validation :** Required  \r\n**Validation Method :** table  \r\n**Table Name :** Demo  \r\n**Validate Atmost Once :** 40 seconds  \r\n**Creation Retry Attempts :** 1  \r\n**Retry Intervals :** 5 seconds  \r\n**Max Connection Usage :** 5  \r\n  \r\nAnd this worked as the application is running for 3 days consistently. But I got a very strange and interesting result of out this. While monitoring the connection pool, I found these figures:  \r\n  \r\n**NumConnAcquired :** 44919 Count  \r\n**NumConnReleased :** 44919 Count  \r\n**NumConnCreated :** 9748 Count  \r\n**NumConnDestroyed :** 9793 Count  \r\n**NumConnFailedValidation :** 70 Count  \r\n**NumConnFree :** 161 Count  \r\n**NumConnUsed :** -136 Count  \r\n  \r\n**How** can the `NumConnFree` become 161 as I have `Maximum Pool Size = 100` **?**  \r\n**How** can the `NumConnUsed` become -136, a *negative* number **?**  \r\n**How** can the `NumConnDestroyed` **&gt;** `NumConnCreated` **?**  \r\n","title":"what is java.io.EOFException, Message: Can not read response from server. Expected to read 4 bytes, read 0 bytes","body":"<p>This question has been asked a couple of times in SO and many times in other sites. But I didn't get any satisfiable answer.  </p>\n\n<p>My problem:<br>\nI have a java web application which uses simple <strong>JDBC</strong> to connect to <strong>mysql</strong> database through <strong>Glassfish</strong> application server.  </p>\n\n<p>I have used connection pooling in glassfish server with the following configurations:<br>\nInitial Pool Size: 25<br>\nMaximum Pool Size: 100<br>\nPool Resize Quantity: 2<br>\nIdle Timeout: 300 seconds<br>\nMax Wait Time: 60,000 milliseconds  </p>\n\n<p>The application has been deployed for last 3 months and it was running flawlessly too.<br>\nBut from last 2 days the following error is coming at the time of login.  </p>\n\n<p><strong>Partial StackTrace</strong>  </p>\n\n<pre><code>com.mysql.jdbc.exceptions.MySQLNonTransientConnectionException: No operations allowed after connection closed.Connection was implicitly closed due to underlying exception/error:  \n\n** BEGIN NESTED EXCEPTION **  \n\ncom.mysql.jdbc.CommunicationsException  \nMESSAGE: Communications link failure due to underlying exception:  \n\n** BEGIN NESTED EXCEPTION **  \n\njava.io.EOFException  \nMESSAGE: Can not read response from server. Expected to read 4 bytes, read 0 bytes before connection was unexpectedly lost.  \n\nSTACKTRACE:  \n\njava.io.EOFException: Can not read response from server. Expected to read 4 bytes, read 0 bytes before connection was unexpectedly lost.  \nat com.mysql.jdbc.MysqlIO.readFully(MysqlIO.java:1997)  \nat com.mysql.jdbc.MysqlIO.reuseAndReadPacket(MysqlIO.java:2411)  \nat com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:2916)  \nat com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1631)  \nat com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:1723)  \nat com.mysql.jdbc.Connection.execSQL(Connection.java:3256)  \nat com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:1313)  \nat com.mysql.jdbc.PreparedStatement.executeQuery(PreparedStatement.java:1448)  \n............  \n............  \nmy application traces....  \n</code></pre>\n\n<p><strong>What caused this error suddenly ?</strong> I have lost a lot of time for this.</p>\n\n<p><strong>EDIT :</strong> The problem even persists after restarting the server. As per DBA two of the important mysql server configurations are:<br>\n<strong>wait_timeout :</strong> 1800 seconds<br>\n<strong>connect_timeout :</strong> 10 seconds<br>\n<strong>NOTE :</strong> Other applications deployed in the same server connecting to the same database and using different pools are running smoothly.  </p>\n\n<p><strong>EDIT-2 :</strong> After reading a lot of things and expecting some positive outcome I made these changes to my connection pool.  </p>\n\n<p><strong>Max Wait Time :</strong> 0 (previously it was 60 seconds)<br>\n<strong>Connection Validation :</strong> Required<br>\n<strong>Validation Method :</strong> table<br>\n<strong>Table Name :</strong> Demo<br>\n<strong>Validate Atmost Once :</strong> 40 seconds<br>\n<strong>Creation Retry Attempts :</strong> 1<br>\n<strong>Retry Intervals :</strong> 5 seconds<br>\n<strong>Max Connection Usage :</strong> 5  </p>\n\n<p>And this worked as the application is running for 3 days consistently. But I got a very strange and interesting result of out this. While monitoring the connection pool, I found these figures:  </p>\n\n<p><strong>NumConnAcquired :</strong> 44919 Count<br>\n<strong>NumConnReleased :</strong> 44919 Count<br>\n<strong>NumConnCreated :</strong> 9748 Count<br>\n<strong>NumConnDestroyed :</strong> 9793 Count<br>\n<strong>NumConnFailedValidation :</strong> 70 Count<br>\n<strong>NumConnFree :</strong> 161 Count<br>\n<strong>NumConnUsed :</strong> -136 Count  </p>\n\n<p><strong>How</strong> can the <code>NumConnFree</code> become 161 as I have <code>Maximum Pool Size = 100</code> <strong>?</strong><br>\n<strong>How</strong> can the <code>NumConnUsed</code> become -136, a <em>negative</em> number <strong>?</strong><br>\n<strong>How</strong> can the <code>NumConnDestroyed</code> <strong>></strong> <code>NumConnCreated</code> <strong>?</strong>  </p>\n"},{"tags":["java","spring-mvc","freemarker"],"answers":[{"tags":[],"owner":{"account_id":297076,"reputation":1893,"user_id":602398,"display_name":"Dirk"},"comment_count":0,"down_vote_count":0,"up_vote_count":11,"is_accepted":true,"score":11,"last_activity_date":1304508514,"creation_date":1304492413,"answer_id":5879673,"question_id":5879492,"body_markdown":"You could do something like\r\n  \r\n    &lt;#list payrollYears as year&gt; \r\n          &lt;option value=&quot;${year.year}&quot; &lt;#if !(year_has_next)&gt;selected&lt;/#if&gt; &gt;${year.yeardesc}&lt;/option&gt;\r\n    &lt;/#list&gt; ","title":"get last record from list in freemarker","body":"<p>You could do something like</p>\n\n<pre><code>&lt;#list payrollYears as year&gt; \n      &lt;option value=\"${year.year}\" &lt;#if !(year_has_next)&gt;selected&lt;/#if&gt; &gt;${year.yeardesc}&lt;/option&gt;\n&lt;/#list&gt; \n</code></pre>\n"},{"tags":[],"owner":{"account_id":7647173,"reputation":2122,"user_id":5797400,"display_name":"jpllosa"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1462886932,"creation_date":1462886932,"answer_id":37140033,"question_id":5879492,"body_markdown":"For FreeMarker 2.3.24, you can do something like `year?has_next` instead of `year_has_next`.\r\n\r\n - `item_has_next` (deprecated by `item?has_next`): Boolean value that tells if the current item is the last in the sequence or not.\r\n\r\nSee [FreeMarker Docs][1]\r\n\r\n\r\n  [1]: http://freemarker.org/docs/ref_directive_list.html","title":"get last record from list in freemarker","body":"<p>For FreeMarker 2.3.24, you can do something like <code>year?has_next</code> instead of <code>year_has_next</code>.</p>\n\n<ul>\n<li><code>item_has_next</code> (deprecated by <code>item?has_next</code>): Boolean value that tells if the current item is the last in the sequence or not.</li>\n</ul>\n\n<p>See <a href=\"http://freemarker.org/docs/ref_directive_list.html\" rel=\"noreferrer\">FreeMarker Docs</a></p>\n"},{"comments":[{"owner":{"account_id":14651859,"reputation":67,"user_id":10581659,"display_name":"Vibhu Garg"},"score":0,"creation_date":1540983343,"post_id":53081676,"comment_id":93060383,"body_markdown":"In this example we are making a list which is JSON.Hence, as in a json list, all the elements are separated by &quot;,&quot; except the last element.","body":"In this example we are making a list which is JSON.Hence, as in a json list, all the elements are separated by &quot;,&quot; except the last element."}],"tags":[],"owner":{"account_id":14651859,"reputation":67,"user_id":10581659,"display_name":"Vibhu Garg"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1541053986,"creation_date":1540983251,"answer_id":53081676,"question_id":5879492,"body_markdown":"    &lt;#list body.result as school_names_list&gt;\r\n\t{\r\n\t  &quot;NAME&quot;: &lt;#if school_names_list.NAME??&gt;&quot;${school_names_list.NAME}&quot;&lt;#else&gt;&quot;&quot;&lt;/#if&gt;,\r\n\t  &quot;ADDRESS&quot;: &lt;#if school_names_list.ADDRESS??&gt;&quot;${school_names_list.ADDRESS}&quot;&lt;#else&gt;&quot;&quot;&lt;/#if&gt;,\r\n\t   &lt;#if school_names_list?is_last&gt;&lt;#else&gt;,&lt;/#if&gt;\r\n\t&lt;/#list&gt;\r\n\t\r\n\t\r\n\t//Here **school_names_list** is a list and we check the last element though **school_names_list?is_last** (where list name is school_names_list)\r\n\t\r\n\t//In this example, if it the last element, ***we&#39;ll avoid adding &quot;,&quot; else we add &quot;,&quot; as per JSON rules of a list.***","title":"get last record from list in freemarker","body":"<pre><code>&lt;#list body.result as school_names_list&gt;\n{\n  \"NAME\": &lt;#if school_names_list.NAME??&gt;\"${school_names_list.NAME}\"&lt;#else&gt;\"\"&lt;/#if&gt;,\n  \"ADDRESS\": &lt;#if school_names_list.ADDRESS??&gt;\"${school_names_list.ADDRESS}\"&lt;#else&gt;\"\"&lt;/#if&gt;,\n   &lt;#if school_names_list?is_last&gt;&lt;#else&gt;,&lt;/#if&gt;\n&lt;/#list&gt;\n\n\n//Here **school_names_list** is a list and we check the last element though **school_names_list?is_last** (where list name is school_names_list)\n\n//In this example, if it the last element, ***we'll avoid adding \",\" else we add \",\" as per JSON rules of a list.***\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13356990,"reputation":21,"user_id":9640213,"display_name":"Marius Hansen"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693574629,"creation_date":1693574629,"answer_id":77023491,"question_id":5879492,"body_markdown":"Old question, but you can use `is_last`.\r\n\r\nUsing your code you could write your code like this;\r\n```\r\n&lt;select name=&quot;showYears&quot;&gt;\r\n  &lt;#list payrollYears as year&gt;\r\n    &lt;#if year?is_last&gt;\r\n      &lt;option value=&quot;${year.year}&quot; selected&gt;${year.yeardesc}&lt;/option&gt;\r\n    &lt;#else&gt;\r\n      &lt;option value=&quot;${year.year}&quot;&gt;${year.yeardesc}&lt;/option&gt;\r\n    &lt;/#if&gt;\r\n  &lt;/#list&gt;        \r\n&lt;/select&gt;\r\n```\r\n\r\n----\r\n\r\nA better way would be to add the `selected` straight to the HTML, and drop the whole `if` check around it, but **not entierly sure** how to add this directly to **HTML as valid syntax**.\r\n\r\n\r\nSo this probably WON&#39;T work, but my line of thinking is something like this;\r\n\r\n```\r\n&lt;select name=&quot;showYears&quot;&gt;\r\n  &lt;#list payrollYears as year&gt;\r\n    &lt;option value=&quot;${year.year}&quot; ${year?is_last?then(&#39;selected&#39;, &#39;&#39;)}&gt;${year.yeardesc}&lt;/option&gt;\r\n  &lt;/#list&gt;        \r\n&lt;/select&gt;\r\n```","title":"get last record from list in freemarker","body":"<p>Old question, but you can use <code>is_last</code>.</p>\n<p>Using your code you could write your code like this;</p>\n<pre><code>&lt;select name=&quot;showYears&quot;&gt;\n  &lt;#list payrollYears as year&gt;\n    &lt;#if year?is_last&gt;\n      &lt;option value=&quot;${year.year}&quot; selected&gt;${year.yeardesc}&lt;/option&gt;\n    &lt;#else&gt;\n      &lt;option value=&quot;${year.year}&quot;&gt;${year.yeardesc}&lt;/option&gt;\n    &lt;/#if&gt;\n  &lt;/#list&gt;        \n&lt;/select&gt;\n</code></pre>\n<hr />\n<p>A better way would be to add the <code>selected</code> straight to the HTML, and drop the whole <code>if</code> check around it, but <strong>not entierly sure</strong> how to add this directly to <strong>HTML as valid syntax</strong>.</p>\n<p>So this probably WON'T work, but my line of thinking is something like this;</p>\n<pre><code>&lt;select name=&quot;showYears&quot;&gt;\n  &lt;#list payrollYears as year&gt;\n    &lt;option value=&quot;${year.year}&quot; ${year?is_last?then('selected', '')}&gt;${year.yeardesc}&lt;/option&gt;\n  &lt;/#list&gt;        \n&lt;/select&gt;\n</code></pre>\n"}],"owner":{"account_id":380106,"reputation":55,"user_id":733912,"display_name":"Anil"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15669,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":5879673,"answer_count":4,"score":5,"last_activity_date":1693574629,"creation_date":1304491043,"question_id":5879492,"body_markdown":"          \r\n\r\n        &lt;select name=&quot;showYears&quot;&gt;\r\n\t\t\t\t&lt;#list payrollYears as year&gt; \r\n\t\t\t\t\t&lt;option value=&quot;${year.year}&quot;&gt;${year.yeardesc}&lt;/option&gt;\r\n\t\t\t\t&lt;/#list&gt;\t\t\r\n\t\t&lt;/select&gt;\r\n\t\r\n\r\n\r\ni am getting payrollyears list from my controller and i am iterating the list in freemarker and adding value to select box i want my last value of list should be selected value in last how can i do that ","title":"get last record from list in freemarker","body":"<pre><code>    &lt;select name=\"showYears\"&gt;\n            &lt;#list payrollYears as year&gt; \n                &lt;option value=\"${year.year}\"&gt;${year.yeardesc}&lt;/option&gt;\n            &lt;/#list&gt;        \n    &lt;/select&gt;\n</code></pre>\n\n<p>i am getting payrollyears list from my controller and i am iterating the list in freemarker and adding value to select box i want my last value of list should be selected value in last how can i do that </p>\n"},{"tags":["javascript","java","println","system.out"],"answers":[{"comments":[{"owner":{"account_id":246686,"reputation":58068,"user_id":520957,"accept_rate":94,"display_name":"J&#233;r&#244;me Verstrynge"},"score":0,"creation_date":1325708615,"post_id":8733196,"comment_id":10876103,"body_markdown":"I tried the proposed solution, but it did not work. I have updated my question.","body":"I tried the proposed solution, but it did not work. I have updated my question."}],"tags":[],"owner":{"account_id":46972,"reputation":356179,"user_id":139010,"accept_rate":81,"display_name":"Matt Ball"},"comment_count":1,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1325707783,"creation_date":1325707249,"answer_id":8733196,"question_id":8733179,"body_markdown":"[`console.log()`][1].\r\n\r\nChrome, Safari, and IE 8+ come with built-in consoles (as part of a larger set of development tools). If you&#39;re using Firefox, [getfirebug.com](http://getfirebug.com).\r\n\r\n\r\n  [1]: https://developer.mozilla.org/en/Debugging_JavaScript","title":"What is the equivalent of Java&#39;s System.out.println() in Javascript?","body":"<p><a href=\"https://developer.mozilla.org/en/Debugging_JavaScript\" rel=\"nofollow\"><code>console.log()</code></a>.</p>\n\n<p>Chrome, Safari, and IE 8+ come with built-in consoles (as part of a larger set of development tools). If you're using Firefox, <a href=\"http://getfirebug.com\" rel=\"nofollow\">getfirebug.com</a>.</p>\n"},{"comments":[{"owner":{"account_id":71329,"reputation":224204,"user_id":206403,"accept_rate":99,"display_name":"gen_Eric"},"score":2,"creation_date":1325707314,"post_id":8733199,"comment_id":10875689,"body_markdown":"If the browser doesn&#39;t have a `console` then it&#39;s a crappy browser (for debugging).","body":"If the browser doesn&#39;t have a <code>console</code> then it&#39;s a crappy browser (for debugging)."},{"owner":{"account_id":91026,"reputation":20853,"user_id":250190,"accept_rate":79,"display_name":"Chris Wagner"},"score":3,"creation_date":1325707412,"post_id":8733199,"comment_id":10875719,"body_markdown":"@Rocket I would agree, hopefully most of those no longer exist but it was definitely a problem before. Furthermore those crappy browsers were the ones you had to do the most debugging on!","body":"@Rocket I would agree, hopefully most of those no longer exist but it was definitely a problem before. Furthermore those crappy browsers were the ones you had to do the most debugging on!"},{"owner":{"account_id":71329,"reputation":224204,"user_id":206403,"accept_rate":99,"display_name":"gen_Eric"},"score":2,"creation_date":1325707482,"post_id":8733199,"comment_id":10875746,"body_markdown":"I know IE wouldn&#39;t have a `console` object unless you opened the debugging tools, then it would add it.  But that&#39;s because IE is stupid.","body":"I know IE wouldn&#39;t have a <code>console</code> object unless you opened the debugging tools, then it would add it.  But that&#39;s because IE is stupid."},{"owner":{"account_id":62183,"reputation":107826,"user_id":184883,"accept_rate":74,"display_name":"Andreas K&#246;berle"},"score":0,"creation_date":1325707582,"post_id":8733199,"comment_id":10875787,"body_markdown":"Note only ie &lt; 8 dont have console.log, the developer tools in ie8 have console.log as well.","body":"Note only ie &lt; 8 dont have console.log, the developer tools in ie8 have console.log as well."},{"owner":{"account_id":48693,"reputation":29189,"user_id":144746,"accept_rate":93,"display_name":"Voo"},"score":0,"creation_date":1325708389,"post_id":8733199,"comment_id":10876021,"body_markdown":"@Rocket Which mobile browser has a console and how do I read it?","body":"@Rocket Which mobile browser has a console and how do I read it?"},{"owner":{"account_id":71329,"reputation":224204,"user_id":206403,"accept_rate":99,"display_name":"gen_Eric"},"score":0,"creation_date":1325708596,"post_id":8733199,"comment_id":10876090,"body_markdown":"@Voo: Mobile browser?  Is this iOS or Android (or something else)?  I know on Android, if you use the built-in browser `console.log` messages are sent to the system log, which can be read with [`logcat`](http://developer.android.com/guide/developing/tools/logcat.html) (or [`adb`](http://developer.android.com/guide/developing/tools/adb.html#logcat)) or with a app from the market, such as: [CatLog](https://market.android.com/details?id=com.nolanlawson.logcat&amp;hl=en).","body":"@Voo: Mobile browser?  Is this iOS or Android (or something else)?  I know on Android, if you use the built-in browser <code>console.log</code> messages are sent to the system log, which can be read with <a href=\"http://developer.android.com/guide/developing/tools/logcat.html\" rel=\"nofollow noreferrer\"><code>logcat</code></a> (or <a href=\"http://developer.android.com/guide/developing/tools/adb.html#logcat\" rel=\"nofollow noreferrer\"><code>adb</code></a>) or with a app from the market, such as: <a href=\"https://market.android.com/details?id=com.nolanlawson.logcat&amp;hl=en\" rel=\"nofollow noreferrer\">CatLog</a>."},{"owner":{"account_id":246686,"reputation":58068,"user_id":520957,"accept_rate":94,"display_name":"J&#233;r&#244;me Verstrynge"},"score":0,"creation_date":1325708596,"post_id":8733199,"comment_id":10876091,"body_markdown":"I tried the proposed solution, but it did not work. I have updated my question.","body":"I tried the proposed solution, but it did not work. I have updated my question."},{"owner":{"account_id":91026,"reputation":20853,"user_id":250190,"accept_rate":79,"display_name":"Chris Wagner"},"score":0,"creation_date":1325709391,"post_id":8733199,"comment_id":10876347,"body_markdown":"@Voo on iOS... Settings &gt; Safari &gt; Advanced &gt; Debug Console","body":"@Voo on iOS... Settings &gt; Safari &gt; Advanced &gt; Debug Console"},{"owner":{"account_id":91026,"reputation":20853,"user_id":250190,"accept_rate":79,"display_name":"Chris Wagner"},"score":0,"creation_date":1325710371,"post_id":8733199,"comment_id":10876679,"body_markdown":"@JVerstry check out my update, I hope that helps point you in the right direction.","body":"@JVerstry check out my update, I hope that helps point you in the right direction."},{"owner":{"account_id":246686,"reputation":58068,"user_id":520957,"accept_rate":94,"display_name":"J&#233;r&#244;me Verstrynge"},"score":0,"creation_date":1325711971,"post_id":8733199,"comment_id":10877214,"body_markdown":"Indeed, I do use Rhino. No worry about browsers specifics, the methods I implement don&#39;t rely on browsers&#39; specific, they just convert / tranform data. I am coming to Javascript with my Java JUnit mentality...","body":"Indeed, I do use Rhino. No worry about browsers specifics, the methods I implement don&#39;t rely on browsers&#39; specific, they just convert / tranform data. I am coming to Javascript with my Java JUnit mentality..."},{"owner":{"account_id":246686,"reputation":58068,"user_id":520957,"accept_rate":94,"display_name":"J&#233;r&#244;me Verstrynge"},"score":0,"creation_date":1325713075,"post_id":8733199,"comment_id":10877615,"body_markdown":"If you mean &#39;calling without a parameter&#39;, then the answer is yes. It prints an empty line.","body":"If you mean &#39;calling without a parameter&#39;, then the answer is yes. It prints an empty line."},{"owner":{"account_id":48693,"reputation":29189,"user_id":144746,"accept_rate":93,"display_name":"Voo"},"score":0,"creation_date":1325715426,"post_id":8733199,"comment_id":10878438,"body_markdown":"@Rock Good to know thanks - had to debug only once some mobile specific problem and found it easier to just pepper the code with some alerts - but good to know that we can log it.","body":"@Rock Good to know thanks - had to debug only once some mobile specific problem and found it easier to just pepper the code with some alerts - but good to know that we can log it."},{"owner":{"account_id":91026,"reputation":20853,"user_id":250190,"accept_rate":79,"display_name":"Chris Wagner"},"score":0,"creation_date":1325716908,"post_id":8733199,"comment_id":10878859,"body_markdown":"@JVerstry Ok, so how about printing what you wanted to print? `print(&quot;Hello world&quot;)`? Does this answer your question?","body":"@JVerstry Ok, so how about printing what you wanted to print? <code>print(&quot;Hello world&quot;)</code>? Does this answer your question?"},{"owner":{"account_id":246686,"reputation":58068,"user_id":520957,"accept_rate":94,"display_name":"J&#233;r&#244;me Verstrynge"},"score":0,"creation_date":1325800980,"post_id":8733199,"comment_id":10902173,"body_markdown":"Well, yes, that&#39;s what I found out by myself yesterday. See the solution I created.","body":"Well, yes, that&#39;s what I found out by myself yesterday. See the solution I created."},{"owner":{"account_id":91026,"reputation":20853,"user_id":250190,"accept_rate":79,"display_name":"Chris Wagner"},"score":0,"creation_date":1325803573,"post_id":8733199,"comment_id":10902899,"body_markdown":"Hmm, ok I suppose I didn&#39;t see you posted a solution, please point that out in the comments next time.","body":"Hmm, ok I suppose I didn&#39;t see you posted a solution, please point that out in the comments next time."}],"tags":[],"owner":{"account_id":91026,"reputation":20853,"user_id":250190,"accept_rate":79,"display_name":"Chris Wagner"},"comment_count":15,"down_vote_count":0,"up_vote_count":30,"is_accepted":true,"score":30,"last_activity_date":1325710353,"creation_date":1325707264,"answer_id":8733199,"question_id":8733179,"body_markdown":"Essentially `console.log(&quot;Put a message here.&quot;)` if the browser has a supporting console.\r\n\r\nAnother typical debugging method is using alerts, `alert(&quot;Put a message here.&quot;)`\r\n\r\n**RE: Update II**\r\n\r\nThis seems to make sense, you are trying to automate QUnit tests, from what I have read on QUnit this is an in-browser unit testing suite/library. QUnit expects to run in a browser and therefore expects the browser to recognize all of the JavaScript functions you are calling. \r\n\r\nBased on your Maven configuration it appears you are using Rhino to execute your Javascript at the command line/terminal. This is not going to work for testing browser specifics, you would likely need to look into Selenium for this. If you do not care about testing your JavaScript in a browser but are only testing JavaScript at a command line level (for reason I would not be familiar with) it appears that Rhino recognizes a **`print()`** method for evaluating expressions and printing them out. Checkout [this documentation][1].\r\n\r\nThese links might be of interest to you.\r\n\r\n[QUnit and Automated Testing][2]\r\n\r\n[JavaScript Unit Tests with QUnit][3]\r\n\r\n\r\n  [1]: https://developer.mozilla.org/en/Rhino_Shell\r\n  [2]: http://forum.jquery.com/topic/qunit-and-automated-testing\r\n  [3]: http://whileonefork.blogspot.com/2011/07/javascript-unit-tests-with-qunit-ant.html","title":"What is the equivalent of Java&#39;s System.out.println() in Javascript?","body":"<p>Essentially <code>console.log(\"Put a message here.\")</code> if the browser has a supporting console.</p>\n\n<p>Another typical debugging method is using alerts, <code>alert(\"Put a message here.\")</code></p>\n\n<p><strong>RE: Update II</strong></p>\n\n<p>This seems to make sense, you are trying to automate QUnit tests, from what I have read on QUnit this is an in-browser unit testing suite/library. QUnit expects to run in a browser and therefore expects the browser to recognize all of the JavaScript functions you are calling. </p>\n\n<p>Based on your Maven configuration it appears you are using Rhino to execute your Javascript at the command line/terminal. This is not going to work for testing browser specifics, you would likely need to look into Selenium for this. If you do not care about testing your JavaScript in a browser but are only testing JavaScript at a command line level (for reason I would not be familiar with) it appears that Rhino recognizes a <strong><code>print()</code></strong> method for evaluating expressions and printing them out. Checkout <a href=\"https://developer.mozilla.org/en/Rhino_Shell\" rel=\"noreferrer\">this documentation</a>.</p>\n\n<p>These links might be of interest to you.</p>\n\n<p><a href=\"http://forum.jquery.com/topic/qunit-and-automated-testing\" rel=\"noreferrer\">QUnit and Automated Testing</a></p>\n\n<p><a href=\"http://whileonefork.blogspot.com/2011/07/javascript-unit-tests-with-qunit-ant.html\" rel=\"noreferrer\">JavaScript Unit Tests with QUnit</a></p>\n"},{"comments":[{"owner":{"account_id":91026,"reputation":20853,"user_id":250190,"accept_rate":79,"display_name":"Chris Wagner"},"score":2,"creation_date":1325707499,"post_id":8733221,"comment_id":10875749,"body_markdown":"Good strategy, iOS devices do have a console though, you enable it via Settings &gt; Safari &gt; Advanced &gt; Debug Console","body":"Good strategy, iOS devices do have a console though, you enable it via Settings &gt; Safari &gt; Advanced &gt; Debug Console"},{"owner":{"account_id":982488,"reputation":6452,"user_id":1001866,"accept_rate":75,"display_name":"Matt H"},"score":0,"creation_date":1325707614,"post_id":8733221,"comment_id":10875795,"body_markdown":"Cool beans @ChrisWagner, I didn&#39;t know that!","body":"Cool beans @ChrisWagner, I didn&#39;t know that!"}],"tags":[],"owner":{"account_id":982488,"reputation":6452,"user_id":1001866,"accept_rate":75,"display_name":"Matt H"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1325707354,"creation_date":1325707354,"answer_id":8733221,"question_id":8733179,"body_markdown":"There isn&#39;t one, at least, not unless you are using a &quot;developer&quot; tool of some kind in your browser, e.g. Firebug in Firefox or the Developer tools in Safari. Then you can usually use `console.log`.\r\n\r\nIf I&#39;m doing something in, say, an iOS device, I might add a `&lt;div id=&quot;debug&quot; /&gt;` and then log to it.","title":"What is the equivalent of Java&#39;s System.out.println() in Javascript?","body":"<p>There isn't one, at least, not unless you are using a \"developer\" tool of some kind in your browser, e.g. Firebug in Firefox or the Developer tools in Safari. Then you can usually use <code>console.log</code>.</p>\n\n<p>If I'm doing something in, say, an iOS device, I might add a <code>&lt;div id=\"debug\" /&gt;</code> and then log to it.</p>\n"},{"comments":[{"owner":{"account_id":246686,"reputation":58068,"user_id":520957,"accept_rate":94,"display_name":"J&#233;r&#244;me Verstrynge"},"score":0,"creation_date":1325708556,"post_id":8733430,"comment_id":10876069,"body_markdown":"Yes, it could work, but when running the compile process multiple times, I would have to close each alert -&gt; A bit impractical for me...","body":"Yes, it could work, but when running the compile process multiple times, I would have to close each alert -&gt; A bit impractical for me..."},{"owner":{"account_id":911378,"reputation":1747,"user_id":945157,"accept_rate":80,"display_name":"jamesTheProgrammer"},"score":0,"creation_date":1325708936,"post_id":8733430,"comment_id":10876208,"body_markdown":"right - I can see where that would be a little impractical.  I used FireBug a bit, seems it has what you are looking for http://getfirebug.com/logging","body":"right - I can see where that would be a little impractical.  I used FireBug a bit, seems it has what you are looking for <a href=\"http://getfirebug.com/logging\" rel=\"nofollow noreferrer\">getfirebug.com/logging</a>"}],"tags":[],"owner":{"account_id":911378,"reputation":1747,"user_id":945157,"accept_rate":80,"display_name":"jamesTheProgrammer"},"comment_count":2,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1325708323,"creation_date":1325708323,"answer_id":8733430,"question_id":8733179,"body_markdown":"You can always simply add an alert() prompt anywhere in a function.  Especially useful for knowing if a function was called, if a function completed or where a function fails.\r\n\r\n    alert(&#39;start of function x&#39;);\r\n    alert(&#39;end of function y&#39;);\r\n    alert(&#39;about to call function a&#39;);\r\n    alert(&#39;returned from function b&#39;);\r\n\r\nYou get the idea.","title":"What is the equivalent of Java&#39;s System.out.println() in Javascript?","body":"<p>You can always simply add an alert() prompt anywhere in a function.  Especially useful for knowing if a function was called, if a function completed or where a function fails.</p>\n\n<pre><code>alert('start of function x');\nalert('end of function y');\nalert('about to call function a');\nalert('returned from function b');\n</code></pre>\n\n<p>You get the idea.</p>\n"},{"tags":[],"owner":{"account_id":246686,"reputation":58068,"user_id":520957,"accept_rate":94,"display_name":"J&#233;r&#244;me Verstrynge"},"comment_count":0,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1325708505,"creation_date":1325708505,"answer_id":8733468,"question_id":8733179,"body_markdown":"I found a solution:\r\n\r\n    print(&quot;My message here&quot;);","title":"What is the equivalent of Java&#39;s System.out.println() in Javascript?","body":"<p>I found a solution:</p>\n\n<pre><code>print(\"My message here\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":364094,"reputation":246,"user_id":708280,"accept_rate":40,"display_name":"Iqbal"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1325800296,"creation_date":1325800296,"answer_id":8750353,"question_id":8733179,"body_markdown":"I&#39;m also about to ask the same question. But from what I&#39;ve learned from codeacademy.com below code is enough to display the output or text?\r\n\r\n    print(&quot;hello world&quot;)  ","title":"What is the equivalent of Java&#39;s System.out.println() in Javascript?","body":"<p>I'm also about to ask the same question. But from what I've learned from codeacademy.com below code is enough to display the output or text?</p>\n\n<pre><code>print(\"hello world\")  \n</code></pre>\n"},{"tags":[],"owner":{"account_id":1160671,"reputation":6006,"user_id":1140227,"accept_rate":72,"display_name":"George"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1379920795,"creation_date":1379920795,"answer_id":18953701,"question_id":8733179,"body_markdown":"I&#39;m using Chrome and **print()** literally prints the text on paper. This is what works for me:\r\n\r\n    document.write(&quot;My message&quot;);","title":"What is the equivalent of Java&#39;s System.out.println() in Javascript?","body":"<p>I'm using Chrome and <strong>print()</strong> literally prints the text on paper. This is what works for me:</p>\n\n<pre><code>document.write(\"My message\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3399193,"reputation":1046,"user_id":3195688,"display_name":"Erikas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1554820500,"creation_date":1554817676,"answer_id":55594436,"question_id":8733179,"body_markdown":"In java `System.out.println()` prints something to console. In javascript same can be achieved using `console.log()`.\r\n\r\nYou need to view browser console by pressing `F12` key which opens developer tool and then switch to `console` tab.","title":"What is the equivalent of Java&#39;s System.out.println() in Javascript?","body":"<p>In java <code>System.out.println()</code> prints something to console. In javascript same can be achieved using <code>console.log()</code>.</p>\n\n<p>You need to view browser console by pressing <code>F12</code> key which opens developer tool and then switch to <code>console</code> tab.</p>\n"}],"owner":{"account_id":246686,"reputation":58068,"user_id":520957,"accept_rate":94,"display_name":"J&#233;r&#244;me Verstrynge"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":151898,"favorite_count":0,"down_vote_count":0,"up_vote_count":20,"accepted_answer_id":8733199,"answer_count":8,"score":20,"last_activity_date":1693574246,"creation_date":1325707191,"question_id":8733179,"body_markdown":"I am writing some tests for Javascript code and I need to dump some messages during the compile process when errors are encountered.\r\n\r\nIs there any equivalent to Java&#39;s `System.out.println()` in Javascript?\r\n\r\n**P.S.**: I also need to dump debug statements while implementing tests.\r\n\r\n**UPDATE**\r\n\r\nI am using a maven plugin on a file containing all merged tests:\r\n\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n                &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;1.1&lt;/version&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                    &lt;phase&gt;test&lt;/phase&gt;\r\n                    &lt;goals&gt;\r\n                        &lt;goal&gt;java&lt;/goal&gt;\r\n                    &lt;/goals&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;mainClass&gt;org.mozilla.javascript.tools.shell.Main&lt;/mainClass&gt;\r\n                    &lt;arguments&gt;\r\n                        &lt;argument&gt;-opt&lt;/argument&gt;\r\n                        &lt;argument&gt;-1&lt;/argument&gt;\r\n                        &lt;argument&gt;${basedir}/src/main/webapp/html/js/test/test.js&lt;/argument&gt;\r\n                    &lt;/arguments&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n\r\n**UPDATE II**\r\n\r\nI tried `console.log(&quot;...&quot;)`, but I get:\r\n\r\n    js: &quot;src/main/webapp/html/js/concat/tests_all.js&quot;, line 147:\r\n    uncaught JavaScript runtime exception: ReferenceError: &quot;console&quot; is not defined\r\n\r\nThe code I am testing is a set of functions (like in a library). I am using QUnit.","title":"What is the equivalent of Java&#39;s System.out.println() in Javascript?","body":"<p>I am writing some tests for Javascript code and I need to dump some messages during the compile process when errors are encountered.</p>\n\n<p>Is there any equivalent to Java's <code>System.out.println()</code> in Javascript?</p>\n\n<p><strong>P.S.</strong>: I also need to dump debug statements while implementing tests.</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>I am using a maven plugin on a file containing all merged tests:</p>\n\n<pre><code>        &lt;plugin&gt;\n            &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n            &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;\n            &lt;version&gt;1.1&lt;/version&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                &lt;phase&gt;test&lt;/phase&gt;\n                &lt;goals&gt;\n                    &lt;goal&gt;java&lt;/goal&gt;\n                &lt;/goals&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n            &lt;configuration&gt;\n                &lt;mainClass&gt;org.mozilla.javascript.tools.shell.Main&lt;/mainClass&gt;\n                &lt;arguments&gt;\n                    &lt;argument&gt;-opt&lt;/argument&gt;\n                    &lt;argument&gt;-1&lt;/argument&gt;\n                    &lt;argument&gt;${basedir}/src/main/webapp/html/js/test/test.js&lt;/argument&gt;\n                &lt;/arguments&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n</code></pre>\n\n<p><strong>UPDATE II</strong></p>\n\n<p>I tried <code>console.log(\"...\")</code>, but I get:</p>\n\n<pre><code>js: \"src/main/webapp/html/js/concat/tests_all.js\", line 147:\nuncaught JavaScript runtime exception: ReferenceError: \"console\" is not defined\n</code></pre>\n\n<p>The code I am testing is a set of functions (like in a library). I am using QUnit.</p>\n"},{"tags":["java","spring","hibernate","hibernate-envers"],"answers":[{"comments":[{"owner":{"account_id":3295177,"reputation":656,"user_id":2772620,"accept_rate":38,"display_name":"Ujjwal Pathak"},"score":0,"creation_date":1411275041,"post_id":25938775,"comment_id":40637087,"body_markdown":"Yes the versions got created in the database, one with revetype ADD and the other for UPDATE. And in the query list also I got the correct revtype objects but the objects of RevisionEntity were all blanck (As in UserId was null and rev and revtstmp was 0).","body":"Yes the versions got created in the database, one with revetype ADD and the other for UPDATE. And in the query list also I got the correct revtype objects but the objects of RevisionEntity were all blanck (As in UserId was null and rev and revtstmp was 0)."},{"owner":{"account_id":149784,"reputation":8168,"user_id":362531,"accept_rate":69,"display_name":"adamw"},"score":0,"creation_date":1411348590,"post_id":25938775,"comment_id":40655019,"body_markdown":"No idea then, might be bug, but hard to say without debugging.","body":"No idea then, might be bug, but hard to say without debugging."}],"tags":[],"owner":{"account_id":149784,"reputation":8168,"user_id":362531,"accept_rate":69,"display_name":"adamw"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1411145289,"creation_date":1411145289,"answer_id":25938775,"question_id":25931281,"body_markdown":"Do you want to query the revision entity itself, or retrieve audited objects including the revision entity?\r\n\r\nIf you want to query the revision entity itself, it&#39;s a completely normal entity. Just query it as all other entities - not through an `AuditQuery`, but using an `EntityManager` or `Session`.\r\n\r\nIf you want to retrieve audited objects including the revision entity, then the above is correct, provided that there exist revision data for the revisions at which the object changed. Do you see data in the database corresponding to the returned revisions?","title":"How to query RevisionEntity in hibernate envers","body":"<p>Do you want to query the revision entity itself, or retrieve audited objects including the revision entity?</p>\n\n<p>If you want to query the revision entity itself, it's a completely normal entity. Just query it as all other entities - not through an <code>AuditQuery</code>, but using an <code>EntityManager</code> or <code>Session</code>.</p>\n\n<p>If you want to retrieve audited objects including the revision entity, then the above is correct, provided that there exist revision data for the revisions at which the object changed. Do you see data in the database corresponding to the returned revisions?</p>\n"},{"tags":[],"owner":{"account_id":2713080,"reputation":96,"user_id":2341035,"display_name":"Gregory"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1418070053,"creation_date":1418070053,"answer_id":27366199,"question_id":25931281,"body_markdown":"You may need to actually use the object. Hibernate/Envers will return a lazy initialized object, and debuggers will probably not be able to see the values. Once you call the getters in code, the proper values should be populated.","title":"How to query RevisionEntity in hibernate envers","body":"<p>You may need to actually use the object. Hibernate/Envers will return a lazy initialized object, and debuggers will probably not be able to see the values. Once you call the getters in code, the proper values should be populated.</p>\n"},{"tags":[],"owner":{"account_id":18486228,"reputation":13,"user_id":13467124,"display_name":"Mihai"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693574223,"creation_date":1693574075,"answer_id":77023425,"question_id":25931281,"body_markdown":"I know this is an old post, but I thought I had the same issue, and my explanation is similar in a way to @Gregory explanation from above.\r\n\r\nIn debug mode, I was able to see the null&#39;s of the fields of my @RevisionEntity annotated entity in the debug window of IntelliJ under the first level of the object. It is because this object is a Hibernate proxy actually and the &quot;real&quot;, not null values are one level deeper inside this proxy object.\r\n\r\nAfter I &quot;evaluated the expression&quot; in IntelliJ to inspect the content of the object, the correct values were returned:\r\n\r\n````\r\nMyCustomRevisionEntity revisionEntity = (MyCustomRevisionnEntity) ((Object[]) AuditReaderFactory\r\n                .get(entityManager)\r\n                .createQuery()\r\n                .forRevisionsOfEntity(Foo.class, false, false)\r\n                .add(AuditEntity.id().eq(1L))\r\n                .getResultList()\r\n                .get(3))\r\n                [1];\r\n````\r\n\r\nInside the `MyCustomRevisionEntity` object, my values were here in the `target` field:\r\n\r\n    ((ByteBuddyInterceptor)this.$$_hibernate_interceptor).target\r\n\r\nSo I was able to just fetch them like any other regular entity, and they were not null:\r\n\r\n    revisionEntity.getTimestamp()","title":"How to query RevisionEntity in hibernate envers","body":"<p>I know this is an old post, but I thought I had the same issue, and my explanation is similar in a way to @Gregory explanation from above.</p>\n<p>In debug mode, I was able to see the null's of the fields of my @RevisionEntity annotated entity in the debug window of IntelliJ under the first level of the object. It is because this object is a Hibernate proxy actually and the &quot;real&quot;, not null values are one level deeper inside this proxy object.</p>\n<p>After I &quot;evaluated the expression&quot; in IntelliJ to inspect the content of the object, the correct values were returned:</p>\n<pre><code>MyCustomRevisionEntity revisionEntity = (MyCustomRevisionnEntity) ((Object[]) AuditReaderFactory\n                .get(entityManager)\n                .createQuery()\n                .forRevisionsOfEntity(Foo.class, false, false)\n                .add(AuditEntity.id().eq(1L))\n                .getResultList()\n                .get(3))\n                [1];\n</code></pre>\n<p>Inside the <code>MyCustomRevisionEntity</code> object, my values were here in the <code>target</code> field:</p>\n<pre><code>((ByteBuddyInterceptor)this.$$_hibernate_interceptor).target\n</code></pre>\n<p>So I was able to just fetch them like any other regular entity, and they were not null:</p>\n<pre><code>revisionEntity.getTimestamp()\n</code></pre>\n"}],"owner":{"account_id":3295177,"reputation":656,"user_id":2772620,"accept_rate":38,"display_name":"Ujjwal Pathak"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3610,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1693574223,"creation_date":1411120810,"question_id":25931281,"body_markdown":"I was trying to log additional user data with the revisions created by Envers. I was able to do that using RevisionEntity and RevisionListener but I&#39;m not able to retrieve the data that is logged.\r\nI tried the following code\r\n\r\n\t\tAuditQuery auditQuery = AuditReaderFactory\r\n\t\t\t\t.get(factory.getCurrentSession()).createQuery()\r\n\t\t\t\t.forRevisionsOfEntity(Currency.class, false, false)\r\n\t\t\t\t.add(AuditEntity.id().eq(&quot;ENV_US&quot;));\r\n\r\n\t\tList&lt;Object[]&gt; l = auditQuery.getResultList();\r\n\r\nThis returned a List&lt;Object[3]&gt;\r\nIn the object array first element is the Revision Second is of RevisionEntity and third is of RevisionType, but the values in RevisionEntity object are all null.\r\n\r\nHere is the pojo for RevisionEntity\r\n\r\n    @Entity\r\n    @Table(name = &quot;REVINFO&quot;)\r\n    @RevisionEntity(RevListener.class)\r\n    public class ExampleRevEntity {\r\n\t@Id\r\n\t@GeneratedValue\r\n\t@RevisionNumber\r\n\t@Column(name = &quot;REV&quot;)\r\n\tprivate int rev;\r\n\r\n\t@RevisionTimestamp\r\n\t@Column(name = &quot;REVTSTMP&quot;)\r\n\tprivate long revtstmp;\r\n\r\n\t@Column(name = &quot;USERID&quot;)\r\n\tprivate String userId;\r\n\r\n\tpublic String getUserId() {\r\n\t\treturn userId;\r\n\t}\r\n\r\n\tpublic void setUserId(String userId) {\r\n\t\tthis.userId = userId;\r\n\t}\r\n\r\n    }\r\nPlease let me know If I&#39;m doing any thing wrong.","title":"How to query RevisionEntity in hibernate envers","body":"<p>I was trying to log additional user data with the revisions created by Envers. I was able to do that using RevisionEntity and RevisionListener but I'm not able to retrieve the data that is logged.\nI tried the following code</p>\n\n<pre><code>    AuditQuery auditQuery = AuditReaderFactory\n            .get(factory.getCurrentSession()).createQuery()\n            .forRevisionsOfEntity(Currency.class, false, false)\n            .add(AuditEntity.id().eq(\"ENV_US\"));\n\n    List&lt;Object[]&gt; l = auditQuery.getResultList();\n</code></pre>\n\n<p>This returned a List\nIn the object array first element is the Revision Second is of RevisionEntity and third is of RevisionType, but the values in RevisionEntity object are all null.</p>\n\n<p>Here is the pojo for RevisionEntity</p>\n\n<pre><code>@Entity\n@Table(name = \"REVINFO\")\n@RevisionEntity(RevListener.class)\npublic class ExampleRevEntity {\n@Id\n@GeneratedValue\n@RevisionNumber\n@Column(name = \"REV\")\nprivate int rev;\n\n@RevisionTimestamp\n@Column(name = \"REVTSTMP\")\nprivate long revtstmp;\n\n@Column(name = \"USERID\")\nprivate String userId;\n\npublic String getUserId() {\n    return userId;\n}\n\npublic void setUserId(String userId) {\n    this.userId = userId;\n}\n\n}\n</code></pre>\n\n<p>Please let me know If I'm doing any thing wrong.</p>\n"},{"tags":["java","spring","jpa","spring-data-jpa","jpa-2.0"],"comments":[{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":1,"creation_date":1693580016,"post_id":77022829,"comment_id":135784136,"body_markdown":"I&#39;m not clear on what you are after exactly. You want one query to return both HistoryTable and DataTable data, or are you looking at having a single, much more generic method to handle either HistoryTable or DataTable data instances? If the later, you&#39;d have to figure out a common denominator mappedSuperClass for them both.","body":"I&#39;m not clear on what you are after exactly. You want one query to return both HistoryTable and DataTable data, or are you looking at having a single, much more generic method to handle either HistoryTable or DataTable data instances? If the later, you&#39;d have to figure out a common denominator mappedSuperClass for them both."},{"owner":{"account_id":15217003,"reputation":117,"user_id":10980085,"display_name":"Rest"},"score":0,"creation_date":1693581484,"post_id":77022829,"comment_id":135784456,"body_markdown":"Hi @Chris yes i need to return both HistoryTable and DataTable data using one method like which i mention above. simply i need to return pageable  object to return after join two table using criteriaBuilder. Thanks","body":"Hi @Chris yes i need to return both HistoryTable and DataTable data using one method like which i mention above. simply i need to return pageable  object to return after join two table using criteriaBuilder. Thanks"},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1693591509,"post_id":77022829,"comment_id":135786165,"body_markdown":"&quot;like which i mention above&quot; If you want both HistoryTable and DataTable data returned in one query, that isn&#39;t clear in your question. Pagination is the easiest part - You need to give us details on the query you are looking for, the data you are returning (is it a HistoryTable instance, a DataTable instance, a Tuple&lt;HistoryTable,DataTable&gt; or object array, or something else). Is it something like @Query(&quot;select h, d from HistoryTable h join DataTable d on d.groupId = h.groupId&quot;) you are looking for?","body":"&quot;like which i mention above&quot; If you want both HistoryTable and DataTable data returned in one query, that isn&#39;t clear in your question. Pagination is the easiest part - You need to give us details on the query you are looking for, the data you are returning (is it a HistoryTable instance, a DataTable instance, a Tuple&lt;HistoryTable,DataTable&gt; or object array, or something else). Is it something like @Query(&quot;select h, d from HistoryTable h join DataTable d on d.groupId = h.groupId&quot;) you are looking for?"},{"owner":{"account_id":15217003,"reputation":117,"user_id":10980085,"display_name":"Rest"},"score":0,"creation_date":1693624228,"post_id":77022829,"comment_id":135788982,"body_markdown":"As per the above example @query won’t work for me cause there lots of filtration have on it.i think its preferred  like &lt;HistoryTable,Datatable&gt; kind of answer","body":"As per the above example @query won’t work for me cause there lots of filtration have on it.i think its preferred  like &lt;HistoryTable,Datatable&gt; kind of answer"}],"owner":{"account_id":15217003,"reputation":117,"user_id":10980085,"display_name":"Rest"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693573622,"creation_date":1693568705,"question_id":77022829,"body_markdown":"I have two tables with no modeled relations. in my custom repository like below:\r\n\r\nMethod one\r\n\r\n    public Page&lt;HistoryTable&gt; findInquiryhistory(InquiryRequest req, int pageNumber, int pageSize){\r\n\t\tPageable pageable = PageRequest.of(pageNumber, pageSize);\r\n\t\treturn historyRepository.findAll(new Specification&lt;HistoryTable&gt;() {\r\n\t\t\t@Override\r\n\t\t\tpublic Predicate toPredicate(Root&lt;HistoryTable&gt; root, CriteriaQuery&lt;?&gt; query,\r\n\t\t\t\t\t\t\t\t\t\t CriteriaBuilder criteriaBuilder) {\r\n\t\t\t\tList&lt;Predicate&gt; predicates = new ArrayList&lt;&gt;();\r\n\t\t\t\tfilterByCarId(predicates,criteriaBuilder, root,\r\n\t\t\t\t\t\treq.getCarId());\r\n\t\t\t\tfilterByCarnameId(predicates, criteriaBuilder, root,\r\n\t\t\t\t\t\treq.getCarnameId());\r\n\t\t\t\treturn criteriaBuilder.and(predicates.toArray(new Predicate[predicates.size()]));\r\n\t\t\t}\r\n\t\t}, pageable);\r\n\t}\r\n\r\nMethod two\r\n\r\n\tpublic Page&lt;DataTable&gt; findInquiry(InquiryRequest req, int pageNumber, int pageSize) {\r\n\t\tPageable pageable = PageRequest.of(pageNumber, pageSize);\r\n\t\treturn dataRepository.findAll(new Specification&lt;DataTable&gt;() {\r\n\t\t\t@Override\r\n\t\t\tpublic Predicate toPredicate(Root&lt;DataTable&gt; root, CriteriaQuery&lt;?&gt; query,\r\n\t\t\t\t\t\t\t\t\t\t CriteriaBuilder criteriaBuilder) {\r\n\t\t\t\tList&lt;Predicate&gt; predicates = new ArrayList&lt;&gt;();\r\n\r\n\t\t\t\tfilterByCarId(predicates,criteriaBuilder, root,\r\n\t\t\t\t\t\treq.getCarId());\r\n\t\t\t\tfilterByCarnameId(predicates, criteriaBuilder, root,\r\n\t\t\t\t\t\treq.getCarnameId());\r\n\t\t\t\treturn criteriaBuilder.and(predicates.toArray(new Predicate[predicates.size()]));\r\n\r\n\t\t\t}\r\n\t\t}, pageable);\r\n\t}\r\n\r\nIs there any possible way join above two method into one code using join, both tables contain groupId as a forign key but its not model relation just relation id wise.is there any possible way to connect above two method into one method use groupId as fk cause i need both in one resultset .Thanks\r\n\r\n","title":"Joining pageable tables without relation using JPA criteria","body":"<p>I have two tables with no modeled relations. in my custom repository like below:</p>\n<p>Method one</p>\n<pre><code>public Page&lt;HistoryTable&gt; findInquiryhistory(InquiryRequest req, int pageNumber, int pageSize){\n    Pageable pageable = PageRequest.of(pageNumber, pageSize);\n    return historyRepository.findAll(new Specification&lt;HistoryTable&gt;() {\n        @Override\n        public Predicate toPredicate(Root&lt;HistoryTable&gt; root, CriteriaQuery&lt;?&gt; query,\n                                     CriteriaBuilder criteriaBuilder) {\n            List&lt;Predicate&gt; predicates = new ArrayList&lt;&gt;();\n            filterByCarId(predicates,criteriaBuilder, root,\n                    req.getCarId());\n            filterByCarnameId(predicates, criteriaBuilder, root,\n                    req.getCarnameId());\n            return criteriaBuilder.and(predicates.toArray(new Predicate[predicates.size()]));\n        }\n    }, pageable);\n}\n</code></pre>\n<p>Method two</p>\n<pre><code>public Page&lt;DataTable&gt; findInquiry(InquiryRequest req, int pageNumber, int pageSize) {\n    Pageable pageable = PageRequest.of(pageNumber, pageSize);\n    return dataRepository.findAll(new Specification&lt;DataTable&gt;() {\n        @Override\n        public Predicate toPredicate(Root&lt;DataTable&gt; root, CriteriaQuery&lt;?&gt; query,\n                                     CriteriaBuilder criteriaBuilder) {\n            List&lt;Predicate&gt; predicates = new ArrayList&lt;&gt;();\n\n            filterByCarId(predicates,criteriaBuilder, root,\n                    req.getCarId());\n            filterByCarnameId(predicates, criteriaBuilder, root,\n                    req.getCarnameId());\n            return criteriaBuilder.and(predicates.toArray(new Predicate[predicates.size()]));\n\n        }\n    }, pageable);\n}\n</code></pre>\n<p>Is there any possible way join above two method into one code using join, both tables contain groupId as a forign key but its not model relation just relation id wise.is there any possible way to connect above two method into one method use groupId as fk cause i need both in one resultset .Thanks</p>\n"},{"tags":["java","spring","spring-boot","jetty","embedded-jetty"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1548843044,"post_id":54437826,"comment_id":95685422,"body_markdown":"I would suggest to remove that embedded container or not to use Spring Boot. You have competing containers. Also your container doesn&#39;t follow the principle that Spring Boot expects so it probably won&#39;t even work (reliably).","body":"I would suggest to remove that embedded container or not to use Spring Boot. You have competing containers. Also your container doesn&#39;t follow the principle that Spring Boot expects so it probably won&#39;t even work (reliably)."},{"owner":{"account_id":2134456,"reputation":351,"user_id":1894580,"accept_rate":44,"display_name":"raghav"},"score":0,"creation_date":1548843968,"post_id":54437826,"comment_id":95685975,"body_markdown":"@M.Deinum Thanks for responding. The app is a microservice actually. I am developing the microservice using using Spring Boot. So can&#39;t remove Spring Boot.","body":"@M.Deinum Thanks for responding. The app is a microservice actually. I am developing the microservice using using Spring Boot. So can&#39;t remove Spring Boot."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1548844009,"post_id":54437826,"comment_id":95685998,"body_markdown":"Judging from your question you are moving to Spring Boot so why wouldn&#39;t you be able to remove it.","body":"Judging from your question you are moving to Spring Boot so why wouldn&#39;t you be able to remove it."},{"owner":{"account_id":2134456,"reputation":351,"user_id":1894580,"accept_rate":44,"display_name":"raghav"},"score":0,"creation_date":1548844473,"post_id":54437826,"comment_id":95686299,"body_markdown":"Remove embedded container? I removed the default tomcat container from Spring Boot. I left the Jetty dependency (org.eclipse.jetty) as it is as I wanted to use the same. If I remove this as well I will need to use embedded Jetty from Spring Boot and make code change in classes depending on Jetty version 8.2 as there are changes between Jetty 8.2 and 9.4 which Spring Boot 2.1.1 will use.","body":"Remove embedded container? I removed the default tomcat container from Spring Boot. I left the Jetty dependency (org.eclipse.jetty) as it is as I wanted to use the same. If I remove this as well I will need to use embedded Jetty from Spring Boot and make code change in classes depending on Jetty version 8.2 as there are changes between Jetty 8.2 and 9.4 which Spring Boot 2.1.1 will use."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":2,"creation_date":1548844967,"post_id":54437826,"comment_id":95686556,"body_markdown":"Spring Boot 2.1 doesn&#39;t work with Jetty 8....","body":"Spring Boot 2.1 doesn&#39;t work with Jetty 8...."}],"answers":[{"comments":[{"owner":{"account_id":2134456,"reputation":351,"user_id":1894580,"accept_rate":44,"display_name":"raghav"},"score":0,"creation_date":1548844166,"post_id":54438120,"comment_id":95686099,"body_markdown":"I tried that but abandoned in between as that involved code changes in XMLConnectors (constructor etc have changes in few classes) used by Jetty. I will upgrade and make those changes and check if that resolves the issue. Thanks for the response.","body":"I tried that but abandoned in between as that involved code changes in XMLConnectors (constructor etc have changes in few classes) used by Jetty. I will upgrade and make those changes and check if that resolves the issue. Thanks for the response."},{"owner":{"account_id":462668,"reputation":6135,"user_id":865107,"display_name":"Selaron"},"score":2,"creation_date":1548844592,"post_id":54438120,"comment_id":95686362,"body_markdown":"@raghav Migration and upgrading always comes at a cost ;)","body":"@raghav Migration and upgrading always comes at a cost ;)"}],"tags":[],"owner":{"account_id":462668,"reputation":6135,"user_id":865107,"display_name":"Selaron"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1548843320,"creation_date":1548843320,"answer_id":54438120,"question_id":54437826,"body_markdown":"You are using a version of jetty incompatible to the selected version of spring boot.\r\n\r\nspring-boot-starter-web 2.1.1.RELEASE [depends on][1] spring-web 5.1.3.RELEASE which [depends on][2] jetty-server 9.4.14.v20181114.\r\n\r\nYou&#39;ll have to upgrade your jetty dependency.\r\n\r\n\r\n  [1]: https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-web/2.1.1.RELEASE\r\n  [2]: https://mvnrepository.com/artifact/org.springframework/spring-web/5.1.3.RELEASE","title":"Spring Boot APPLICATION FAILED TO START as class org.eclipse.jetty.server.Server does not exist","body":"<p>You are using a version of jetty incompatible to the selected version of spring boot.</p>\n\n<p>spring-boot-starter-web 2.1.1.RELEASE <a href=\"https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-web/2.1.1.RELEASE\" rel=\"nofollow noreferrer\">depends on</a> spring-web 5.1.3.RELEASE which <a href=\"https://mvnrepository.com/artifact/org.springframework/spring-web/5.1.3.RELEASE\" rel=\"nofollow noreferrer\">depends on</a> jetty-server 9.4.14.v20181114.</p>\n\n<p>You'll have to upgrade your jetty dependency.</p>\n"}],"owner":{"account_id":2134456,"reputation":351,"user_id":1894580,"accept_rate":44,"display_name":"raghav"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2536,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1693573423,"creation_date":1548842451,"question_id":54437826,"body_markdown":"I am migrating a web application to a Spring Boot application which fails to start and displays the following error message :\r\n\r\n\r\n \r\n\r\n        An attempt was made to call the method org.eclipse.jetty.server.Server. \r\n         &lt;init&gt;(Lorg/eclipse/jetty/util/thread/ThreadPool;)V but it does not \r\n         exist. \r\n         Its class, org.eclipse.jetty.server.Server, is available from the \r\n         following locations:\r\n    \r\n        jar:file:/C:/Users/xyz/.m2/repository/org/eclipse/jetty/jetty- \r\n        server/8.2.0.v20160908/jetty-server- \r\n        8.2.0.v20160908.jar!/org/eclipse/jetty/server/Server.class\r\n    \r\n        It was loaded from the following location:\r\n    \r\n        file:/C:/Users/xyz/.m2/repository/org/eclipse/jetty/jetty- \r\n        server/8.2.0.v20160908/jetty-server-8.2.0.v20160908.jar\r\n    \r\n    \r\n        Action:\r\n    \r\n        Correct the classpath of your application so that it contains a single, \r\n        compatible version of org.eclipse.jetty.server.Server\r\n    \r\nAs there is just one location (C:/Users/xyz/.m2/repository/org/eclipse/jetty/jetty- \r\n        server/8.2.0.v20160908/jetty-server-8.2.0.v20160908.jar) as pointed by Spring Boot, there should be no ambiguity. I have provided all the required maven dependencies with version 8.2.0.v20160908. I have excluded tomcat dependency (`spring-boot-starter-tomcat`) from `spring-boot-starter-web` as I need to work with jetty. But I have NOT included jetty spring boot starter dependency in `spring-boot-starter-web` as I already have embedded jetty dependencies with group id `org.eclipse.jetty` defined through which jetty dependencies (jetty-server, jetty-servlet, jetty-security, jetty-http, jetty-util, jetty-webapp, jetty-xml, jetty-io, jetty-deploy etc) are provided. \r\n    \r\nThe Spring Boot version is `v2.1.1.RELEASE`.\r\n    \r\nThe jetty server is defined as spring bean which is as follows \r\n    \r\n    \r\n          &lt;bean id=&quot;webServer&quot; class=&quot;org.someorg.server.jetty.Server&quot;&gt;\r\n    \t\t&lt;property name=&quot;threadPool&quot;&gt;\r\n    \t\t\t&lt;bean class=&quot;org.eclipse.jetty.util.thread.QueuedThreadPool&quot;&gt;\r\n    \t\t\t\t&lt;property name=&quot;minThreads&quot; value=&quot;8&quot; /&gt;\r\n    \t\t\t\t&lt;property name=&quot;maxThreads&quot; value=&quot;32&quot; /&gt;\r\n    \t\t\t&lt;/bean&gt;\r\n    \t\t&lt;/property&gt;\r\n    \t\t&lt;property name=&quot;connectors&quot;&gt;\r\n    \t\t\t&lt;list&gt;\r\n    \t\t\t\t&lt;bean class=&quot;org.someorg.server.jetty.XmlConnector&quot;&gt;\r\n    \t\t\t\t\t&lt;property name=&quot;port&quot; value=&quot;34347&quot; /&gt;\r\n    \t\t\t\t&lt;/bean&gt;\r\n    \t\t\t\t&lt;bean class=&quot;org.eclipse.jetty.server.ssl.SslSelectChannelConnector&quot;&gt;\r\n    \t\t\t\t\t&lt;property name=&quot;port&quot; value=&quot;34346&quot; /&gt;\r\n    \t\t\t\t\t&lt;property name=&quot;keystore&quot; value=&quot;classpath:keystore&quot; /&gt;\r\n    \t\t\t\t\t&lt;property name=&quot;password&quot; value=&quot;somepassword&quot; /&gt;\r\n    \t\t\t\t\t&lt;property name=&quot;keyPassword&quot; value=&quot;somekeypassword&quot; /&gt;\r\n    \t\t\t\t\t&lt;property name=&quot;truststore&quot; value=&quot;classpath:keystore&quot; /&gt;\r\n    \t\t\t\t\t&lt;property name=&quot;trustPassword&quot; value=&quot;sometrustpassword&quot; \r\n          /&gt;\r\n    \t\t\t\t&lt;/bean&gt;\r\n    \t\t\t\t&lt;bean \r\n          class=&quot;org.eclipse.jetty.server.nio.SelectChannelConnector&quot;&gt;\r\n    \t\t\t\t\t&lt;property name=&quot;port&quot; value=&quot;34345&quot; /&gt;\r\n    \t\t\t\t&lt;/bean&gt;\r\n    \t\t\t&lt;/list&gt;\r\n    \t\t&lt;/property&gt;\r\n    \t\t&lt;property name=&quot;handler&quot;&gt;\r\n    \t\t\t&lt;bean class=&quot;org.eclipse.jetty.server.handler.HandlerCollection&quot;&gt;\r\n    \t\t\t\t&lt;property name=&quot;handlers&quot;&gt;\r\n    \t\t\t\t\t&lt;list&gt;\r\n    \t\t\t\t\t\t&lt;ref bean=&quot;webContexts&quot; /&gt;\r\n    \t\t\t\t\t\t&lt;bean id=&quot;defaultHandler&quot; \r\n           class=&quot;org.eclipse.jetty.server.handler.DefaultHandler&quot; /&gt;\r\n    \t\t\t\t\t&lt;/list&gt;\r\n    \t\t\t\t&lt;/property&gt;\r\n    \t\t\t&lt;/bean&gt;\r\n    \t\t&lt;/property&gt;\r\n    \t\t&lt;property name=&quot;beans&quot;&gt;\r\n    \t\t\t&lt;list&gt;\r\n    \t\t\t\t&lt;bean class=&quot;org.eclipse.jetty.deploy.WebAppDeployer&quot;&gt;\r\n    \t\t\t\t\t&lt;property name=&quot;contexts&quot; ref=&quot;webContexts&quot; /&gt;\r\n    \t\t\t\t\t&lt;property name=&quot;webAppDir&quot; value=&quot;webapps&quot; /&gt;\r\n    \t\t\t\t&lt;/bean&gt;\r\n    \t\t\t&lt;/list&gt;\r\n    \t\t&lt;/property&gt;\r\n    \t\t&lt;property name=&quot;stopAtShutdown&quot; value=&quot;false&quot; /&gt;\r\n    \t &lt;/bean&gt;`\r\n\r\nClass Server looks like the following : \r\n\r\n\r\n    public class Server extends org.eclipse.jetty.server.Server implements \r\n    ApplicationListener&lt;ApplicationContextEvent&gt; {\r\n\r\n     // code here\r\n\r\n    }\r\n\r\nI am not sure here what Spring Boot is expecting here. I do not have any other jetty versions as I see in Maven Dependency Hierarchy. All maven dependencies are on classpath. \r\n\r\nAny pointers ?\r\n\r\nThanks!\r\n\r\n","title":"Spring Boot APPLICATION FAILED TO START as class org.eclipse.jetty.server.Server does not exist","body":"<p>I am migrating a web application to a Spring Boot application which fails to start and displays the following error message :</p>\n\n<pre><code>    An attempt was made to call the method org.eclipse.jetty.server.Server. \n     &lt;init&gt;(Lorg/eclipse/jetty/util/thread/ThreadPool;)V but it does not \n     exist. \n     Its class, org.eclipse.jetty.server.Server, is available from the \n     following locations:\n\n    jar:file:/C:/Users/xyz/.m2/repository/org/eclipse/jetty/jetty- \n    server/8.2.0.v20160908/jetty-server- \n    8.2.0.v20160908.jar!/org/eclipse/jetty/server/Server.class\n\n    It was loaded from the following location:\n\n    file:/C:/Users/xyz/.m2/repository/org/eclipse/jetty/jetty- \n    server/8.2.0.v20160908/jetty-server-8.2.0.v20160908.jar\n\n\n    Action:\n\n    Correct the classpath of your application so that it contains a single, \n    compatible version of org.eclipse.jetty.server.Server\n</code></pre>\n\n<p>As there is just one location (C:/Users/xyz/.m2/repository/org/eclipse/jetty/jetty- \n        server/8.2.0.v20160908/jetty-server-8.2.0.v20160908.jar) as pointed by Spring Boot, there should be no ambiguity. I have provided all the required maven dependencies with version 8.2.0.v20160908. I have excluded tomcat dependency (<code>spring-boot-starter-tomcat</code>) from <code>spring-boot-starter-web</code> as I need to work with jetty. But I have NOT included jetty spring boot starter dependency in <code>spring-boot-starter-web</code> as I already have embedded jetty dependencies with group id <code>org.eclipse.jetty</code> defined through which jetty dependencies (jetty-server, jetty-servlet, jetty-security, jetty-http, jetty-util, jetty-webapp, jetty-xml, jetty-io, jetty-deploy etc) are provided. </p>\n\n<p>The Spring Boot version is <code>v2.1.1.RELEASE</code>.</p>\n\n<p>The jetty server is defined as spring bean which is as follows </p>\n\n<pre><code>      &lt;bean id=\"webServer\" class=\"org.someorg.server.jetty.Server\"&gt;\n        &lt;property name=\"threadPool\"&gt;\n            &lt;bean class=\"org.eclipse.jetty.util.thread.QueuedThreadPool\"&gt;\n                &lt;property name=\"minThreads\" value=\"8\" /&gt;\n                &lt;property name=\"maxThreads\" value=\"32\" /&gt;\n            &lt;/bean&gt;\n        &lt;/property&gt;\n        &lt;property name=\"connectors\"&gt;\n            &lt;list&gt;\n                &lt;bean class=\"org.someorg.server.jetty.XmlConnector\"&gt;\n                    &lt;property name=\"port\" value=\"34347\" /&gt;\n                &lt;/bean&gt;\n                &lt;bean class=\"org.eclipse.jetty.server.ssl.SslSelectChannelConnector\"&gt;\n                    &lt;property name=\"port\" value=\"34346\" /&gt;\n                    &lt;property name=\"keystore\" value=\"classpath:keystore\" /&gt;\n                    &lt;property name=\"password\" value=\"somepassword\" /&gt;\n                    &lt;property name=\"keyPassword\" value=\"somekeypassword\" /&gt;\n                    &lt;property name=\"truststore\" value=\"classpath:keystore\" /&gt;\n                    &lt;property name=\"trustPassword\" value=\"sometrustpassword\" \n      /&gt;\n                &lt;/bean&gt;\n                &lt;bean \n      class=\"org.eclipse.jetty.server.nio.SelectChannelConnector\"&gt;\n                    &lt;property name=\"port\" value=\"34345\" /&gt;\n                &lt;/bean&gt;\n            &lt;/list&gt;\n        &lt;/property&gt;\n        &lt;property name=\"handler\"&gt;\n            &lt;bean class=\"org.eclipse.jetty.server.handler.HandlerCollection\"&gt;\n                &lt;property name=\"handlers\"&gt;\n                    &lt;list&gt;\n                        &lt;ref bean=\"webContexts\" /&gt;\n                        &lt;bean id=\"defaultHandler\" \n       class=\"org.eclipse.jetty.server.handler.DefaultHandler\" /&gt;\n                    &lt;/list&gt;\n                &lt;/property&gt;\n            &lt;/bean&gt;\n        &lt;/property&gt;\n        &lt;property name=\"beans\"&gt;\n            &lt;list&gt;\n                &lt;bean class=\"org.eclipse.jetty.deploy.WebAppDeployer\"&gt;\n                    &lt;property name=\"contexts\" ref=\"webContexts\" /&gt;\n                    &lt;property name=\"webAppDir\" value=\"webapps\" /&gt;\n                &lt;/bean&gt;\n            &lt;/list&gt;\n        &lt;/property&gt;\n        &lt;property name=\"stopAtShutdown\" value=\"false\" /&gt;\n     &lt;/bean&gt;`\n</code></pre>\n\n<p>Class Server looks like the following : </p>\n\n<pre><code>public class Server extends org.eclipse.jetty.server.Server implements \nApplicationListener&lt;ApplicationContextEvent&gt; {\n\n // code here\n\n}\n</code></pre>\n\n<p>I am not sure here what Spring Boot is expecting here. I do not have any other jetty versions as I see in Maven Dependency Hierarchy. All maven dependencies are on classpath. </p>\n\n<p>Any pointers ?</p>\n\n<p>Thanks!</p>\n"},{"tags":["java","java-record"],"comments":[{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1693570169,"post_id":77022945,"comment_id":135782048,"body_markdown":"Does it have to be a [record](https://openjdk.org/jeps/395)? Looks like you could solve it quite easily by making `User` a [POJO](https://en.wikipedia.org/wiki/Plain_old_Java_object).","body":"Does it have to be a <a href=\"https://openjdk.org/jeps/395\" rel=\"nofollow noreferrer\">record</a>? Looks like you could solve it quite easily by making <code>User</code> a <a href=\"https://en.wikipedia.org/wiki/Plain_old_Java_object\" rel=\"nofollow noreferrer\">POJO</a>."},{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1693570632,"post_id":77022945,"comment_id":135782127,"body_markdown":"How about adding a factory method? The record&#39;s canonical constructor must have `id` in it.","body":"How about adding a factory method? The record&#39;s canonical constructor must have <code>id</code> in it."},{"owner":{"account_id":1336579,"reputation":5252,"user_id":1279180,"accept_rate":74,"display_name":"nimo23"},"score":0,"creation_date":1693570706,"post_id":77022945,"comment_id":135782137,"body_markdown":"I want to achieve this using a Java record. But it seems that it&#39;s actually not possible with the current Java record spec..","body":"I want to achieve this using a Java record. But it seems that it&#39;s actually not possible with the current Java record spec.."},{"owner":{"account_id":1336579,"reputation":5252,"user_id":1279180,"accept_rate":74,"display_name":"nimo23"},"score":0,"creation_date":1693570843,"post_id":77022945,"comment_id":135782177,"body_markdown":"Why irritate the user of the record constructor with a constructor parameter (in this case `id`) that is always calculated inside the constructor? Not a good idea..","body":"Why irritate the user of the record constructor with a constructor parameter (in this case <code>id</code>) that is always calculated inside the constructor? Not a good idea.."}],"answers":[{"comments":[{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1693572689,"post_id":77023238,"comment_id":135782578,"body_markdown":"&quot;Records are a little more than just &#39;a class where I want java to take care of equals and hashCode and getter methods for me&#39;&quot; Huh, I didn&#39;t know that. Was destructors and `with` blocks mentioned in the JEPs?","body":"&quot;Records are a little more than just &#39;a class where I want java to take care of equals and hashCode and getter methods for me&#39;&quot; Huh, I didn&#39;t know that. Was destructors and <code>with</code> blocks mentioned in the JEPs?"},{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1693573267,"post_id":77023238,"comment_id":135782716,"body_markdown":"I think OP doesn&#39;t literally mean they want no `id` parameter anywhere. The `id` parameter could still exist to implement `with`s, just in synthetic constructor or something like that that is hidden from the programmer.","body":"I think OP doesn&#39;t literally mean they want no <code>id</code> parameter anywhere. The <code>id</code> parameter could still exist to implement <code>with</code>s, just in synthetic constructor or something like that that is hidden from the programmer."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1693580883,"post_id":77023238,"comment_id":135784345,"body_markdown":"@Sweeper yes, [deconstruction has been mentioned in the JEP](https://openjdk.org/jeps/395#:~:text=We%20expect%20a%20future%20version%20to%20support%20deconstruction%20patterns%20to%20allow%20powerful%20pattern%20matching.) But not only that, decomposition does already work with `instanceof` and `switch` in preview and is about to be completed in JDK&#160;21.","body":"@Sweeper yes, <a href=\"https://openjdk.org/jeps/395#:~:text=We%20expect%20a%20future%20version%20to%20support%20deconstruction%20patterns%20to%20allow%20powerful%20pattern%20matching.\" rel=\"nofollow noreferrer\">deconstruction has been mentioned in the JEP</a> But not only that, decomposition does already work with <code>instanceof</code> and <code>switch</code> in preview and is about to be completed in JDK 21."},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1693589548,"post_id":77023238,"comment_id":135785862,"body_markdown":"@Sweeper I thought of that but it just doesn&#39;t make sense and I wasn&#39;t sure how to express &#39;your idea doesn&#39;t translate to anything meaningful&#39;, so I thought best not to assume they meant it. For example, `return u with { /* set EVERY field here */ }` is just a weird way to write `new User(pass_value_for_everything_here)`, so wanting to &#39;hide&#39; that constructor but continue to allow its use for with-blocks is, in the end, useless. In fact, the with-block stuff is written up as intentionally being a de-facto default way to construct records if you want non-standard defaults.","body":"@Sweeper I thought of that but it just doesn&#39;t make sense and I wasn&#39;t sure how to express &#39;your idea doesn&#39;t translate to anything meaningful&#39;, so I thought best not to assume they meant it. For example, <code>return u with { &#47;* set EVERY field here *&#47; }</code> is just a weird way to write <code>new User(pass_value_for_everything_here)</code>, so wanting to &#39;hide&#39; that constructor but continue to allow its use for with-blocks is, in the end, useless. In fact, the with-block stuff is written up as intentionally being a de-facto default way to construct records if you want non-standard defaults."}],"tags":[],"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":4,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1693572381,"creation_date":1693572381,"answer_id":77023238,"question_id":77022945,"body_markdown":"The semantic principle you want fundamentally means you don&#39;t actually have a record.\r\n\r\nRecords are a little more than just &#39;a class where I want java to take care of equals and hashCode and getter methods for me&#39;. For example, records also get an automatic deconstructor, and will therefore automatically support with-blocks, but, and herein lies the key issue, that fundamentally doesn&#39;t work with your take on how such a class works.\r\n\r\nHence, not a record.\r\n\r\nNow, deconstructors and with-blocks aren&#39;t in java. Yet. They are in advanced planning stages and will probably be in something along the lines of java 23 or so.\r\n\r\n## Deconstructor\r\n\r\nA deconstructor does what you&#39;d think: A constructor takes in a value for each field (well, parameter, but there&#39;s the notion, at least with records, that each parameter is just the value for each of the fields) and turns that into an object. A deconstructor does the reverse, taking in an instance of `User` and turning that into its constituent parts. It&#39;s not like a normal method, because normal methods can only return one thing, whereas a deconstructor returns a series of things (here, a UUID _and_ a name).\r\n\r\n## with-blocks\r\n\r\nwith blocks is one of a few features (the primary other one being pattern matching) that requires deconstructors to be a thing in order to &#39;work&#39;. A with-block looks like this:\r\n\r\n```\r\nUser u = new User(&quot;Joe&quot;);\r\n...\r\n\r\npublic User rename(User in, String newName) {\r\n  return u with {\r\n    name = newName;\r\n  };\r\n}\r\n```\r\n\r\n\r\nThe syntax isn&#39;t important (not fleshed out in the proposals yet, this is normal, syntax is generally not all that interesting and the last thing to be figured out), the point is: Inside &#39;with&#39;, the object (`u`, here) is deconstructed, i.e. inside the braces all the fields (here, `UUID id` and `String name`) exist as local variables you can write to, and at the end of the block, those locals are used to reconstitute a new instance, which is what the whole expression resolves to.\r\n\r\nFor all this to work, it __has to be possible__ for the java compiler to know how to go through the process of breaking an instance of `User` into its parts __and then recreating a new user object based on those parts later__, and that _requires_ that it is possible to create a user with a provided UUID instead of having your system random up a new id for them.\r\n\r\n","title":"Java records and default/derived finalized properties","body":"<p>The semantic principle you want fundamentally means you don't actually have a record.</p>\n<p>Records are a little more than just 'a class where I want java to take care of equals and hashCode and getter methods for me'. For example, records also get an automatic deconstructor, and will therefore automatically support with-blocks, but, and herein lies the key issue, that fundamentally doesn't work with your take on how such a class works.</p>\n<p>Hence, not a record.</p>\n<p>Now, deconstructors and with-blocks aren't in java. Yet. They are in advanced planning stages and will probably be in something along the lines of java 23 or so.</p>\n<h2>Deconstructor</h2>\n<p>A deconstructor does what you'd think: A constructor takes in a value for each field (well, parameter, but there's the notion, at least with records, that each parameter is just the value for each of the fields) and turns that into an object. A deconstructor does the reverse, taking in an instance of <code>User</code> and turning that into its constituent parts. It's not like a normal method, because normal methods can only return one thing, whereas a deconstructor returns a series of things (here, a UUID <em>and</em> a name).</p>\n<h2>with-blocks</h2>\n<p>with blocks is one of a few features (the primary other one being pattern matching) that requires deconstructors to be a thing in order to 'work'. A with-block looks like this:</p>\n<pre><code>User u = new User(&quot;Joe&quot;);\n...\n\npublic User rename(User in, String newName) {\n  return u with {\n    name = newName;\n  };\n}\n</code></pre>\n<p>The syntax isn't important (not fleshed out in the proposals yet, this is normal, syntax is generally not all that interesting and the last thing to be figured out), the point is: Inside 'with', the object (<code>u</code>, here) is deconstructed, i.e. inside the braces all the fields (here, <code>UUID id</code> and <code>String name</code>) exist as local variables you can write to, and at the end of the block, those locals are used to reconstitute a new instance, which is what the whole expression resolves to.</p>\n<p>For all this to work, it <strong>has to be possible</strong> for the java compiler to know how to go through the process of breaking an instance of <code>User</code> into its parts <strong>and then recreating a new user object based on those parts later</strong>, and that <em>requires</em> that it is possible to create a user with a provided UUID instead of having your system random up a new id for them.</p>\n"},{"tags":[],"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1693572420,"creation_date":1693572420,"answer_id":77023241,"question_id":77022945,"body_markdown":"A record has to have a canonical constructor, and that constructor&#39;s signature must match the record components. Therefore, if you want the record to only have a single-parameter `String` constructor, the record must only have the `name` component. \r\n\r\nTechnically, it is possible to associate an id to each created `User`, but since it can&#39;t be a record component, it isn&#39;t considered when generating the `hashCode`, `equals`, and `toString` methods, so it&#39;s not much shorter than if you had just written a regular `class`. All it saves is writing the getters for each of the other record components.\r\n\r\nHere&#39;s one way of doing this (note that this isn&#39;t thread safe) - the idea is to use a `Map` to store which id corresponds to which `User`.\r\n\r\nOf course, we can&#39;t put `User` objects directly into the `Map`, because their `hashCode` and `equals` are based on `name` alone. If you did, then you can&#39;t have users with duplicate names.\r\n\r\nSo we introduce a `Wrapper` inner class, whose `hashCode` and `equals` compare the reference equality of their outer instance.\r\n\r\n```\r\nrecord User(String name) {\r\n\r\n    private class Wrapper {\r\n\r\n        private User getUser() { return User.this; }\r\n\r\n        @Override\r\n        public int hashCode() {\r\n            return System.identityHashCode(User.this);\r\n        }\r\n\r\n        @Override\r\n        public boolean equals(Object obj) {\r\n            if (obj instanceof Wrapper w) {\r\n                return User.this == w.getUser();\r\n            }\r\n            return false;\r\n        }\r\n    }\r\n    private static final Map&lt;Wrapper, UUID&gt; map = new HashMap&lt;&gt;();\r\n\r\n    public User {\r\n        map.put(new Wrapper(), UUID.randomUUID());\r\n    }\r\n\r\n    public UUID id() {\r\n        return map.get(new Wrapper());\r\n    }\r\n\r\n    // Here you would write your hashCode, equals, toString implementation that takes id into account...\r\n}\r\n```","title":"Java records and default/derived finalized properties","body":"<p>A record has to have a canonical constructor, and that constructor's signature must match the record components. Therefore, if you want the record to only have a single-parameter <code>String</code> constructor, the record must only have the <code>name</code> component.</p>\n<p>Technically, it is possible to associate an id to each created <code>User</code>, but since it can't be a record component, it isn't considered when generating the <code>hashCode</code>, <code>equals</code>, and <code>toString</code> methods, so it's not much shorter than if you had just written a regular <code>class</code>. All it saves is writing the getters for each of the other record components.</p>\n<p>Here's one way of doing this (note that this isn't thread safe) - the idea is to use a <code>Map</code> to store which id corresponds to which <code>User</code>.</p>\n<p>Of course, we can't put <code>User</code> objects directly into the <code>Map</code>, because their <code>hashCode</code> and <code>equals</code> are based on <code>name</code> alone. If you did, then you can't have users with duplicate names.</p>\n<p>So we introduce a <code>Wrapper</code> inner class, whose <code>hashCode</code> and <code>equals</code> compare the reference equality of their outer instance.</p>\n<pre><code>record User(String name) {\n\n    private class Wrapper {\n\n        private User getUser() { return User.this; }\n\n        @Override\n        public int hashCode() {\n            return System.identityHashCode(User.this);\n        }\n\n        @Override\n        public boolean equals(Object obj) {\n            if (obj instanceof Wrapper w) {\n                return User.this == w.getUser();\n            }\n            return false;\n        }\n    }\n    private static final Map&lt;Wrapper, UUID&gt; map = new HashMap&lt;&gt;();\n\n    public User {\n        map.put(new Wrapper(), UUID.randomUUID());\n    }\n\n    public UUID id() {\n        return map.get(new Wrapper());\n    }\n\n    // Here you would write your hashCode, equals, toString implementation that takes id into account...\n}\n</code></pre>\n"}],"owner":{"account_id":1336579,"reputation":5252,"user_id":1279180,"accept_rate":74,"display_name":"nimo23"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":256,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77023238,"answer_count":2,"score":0,"last_activity_date":1693572420,"creation_date":1693569881,"question_id":77022945,"body_markdown":"I have this:\r\n\r\n    // the id-constructor-parameter should not exist \r\n    // as the value should always be calculated within the constructor.\r\n    public record User(String id, String name) {\r\n\r\n\t\tpublic User {\r\n\t\t\tid = UUID.randomUUID();\r\n\t\t}\r\n\r\n\t\tpublic User(String name) {\r\n\t\t\tthis(null, name);\r\n\r\n\t\t}\r\n\t}\r\n\r\nHow can I remove the parameter `id` from the constructor of a java record? \r\n\r\nThe `id` will be always reassigned/computed within the constructor, so it should not be passed by the constructor (i.e. `id` is a generated/derived property). Something like this, unfortunately, does not work:\r\n\r\n\r\n    public record User(String name) {\r\n    \t// Unfortunately, this doesn&#39;t work in Java record\r\n        private final String id;\r\n    \tpublic User {\r\n    \t\tid = UUID.randomUUID();\r\n    \t}\r\n    }\r\n\r\n","title":"Java records and default/derived finalized properties","body":"<p>I have this:</p>\n<pre><code>// the id-constructor-parameter should not exist \n// as the value should always be calculated within the constructor.\npublic record User(String id, String name) {\n\n    public User {\n        id = UUID.randomUUID();\n    }\n\n    public User(String name) {\n        this(null, name);\n\n    }\n}\n</code></pre>\n<p>How can I remove the parameter <code>id</code> from the constructor of a java record?</p>\n<p>The <code>id</code> will be always reassigned/computed within the constructor, so it should not be passed by the constructor (i.e. <code>id</code> is a generated/derived property). Something like this, unfortunately, does not work:</p>\n<pre><code>public record User(String name) {\n    // Unfortunately, this doesn't work in Java record\n    private final String id;\n    public User {\n        id = UUID.randomUUID();\n    }\n}\n</code></pre>\n"},{"tags":["java","spring-data-jpa","entity-relationship"],"answers":[{"comments":[{"owner":{"account_id":4983029,"reputation":67,"user_id":4007419,"display_name":"Mausumi"},"score":0,"creation_date":1693571180,"post_id":77023029,"comment_id":135782251,"body_markdown":"When i do this i get &quot;Failure while trying to resolve exception [org.springframework.http.converter.HttpMessageNotWritableException]&quot;","body":"When i do this i get &quot;Failure while trying to resolve exception [org.springframework.http.converter.HttpMessageNotWritableEx&zwnj;&#8203;ception]&quot;"},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1693571243,"post_id":77023029,"comment_id":135782261,"body_markdown":"Looks like it is an error later in the process. Hard to say without the complete stacktrace and the related code","body":"Looks like it is an error later in the process. Hard to say without the complete stacktrace and the related code"},{"owner":{"account_id":4983029,"reputation":67,"user_id":4007419,"display_name":"Mausumi"},"score":0,"creation_date":1693577954,"post_id":77023029,"comment_id":135783709,"body_markdown":"https://github.com/mausumimdas/studentMgmnt","body":"<a href=\"https://github.com/mausumimdas/studentMgmnt\" rel=\"nofollow noreferrer\">github.com/mausumimdas/studentMgmnt</a>"}],"tags":[],"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693570512,"creation_date":1693570512,"answer_id":77023029,"question_id":77022959,"body_markdown":"You have to set the `teacher` and `school` itself not only the `id`:\r\n\r\n    public Student addStudent(Student student) {\r\n            // set school name if it exists and teacher name if she exists\r\n    \r\n            School school = schoolRepository.findByschoolName(student.getSchool().getSchoolName());\r\n            student.setSchool(school);\r\n    \r\n            Teacher teacher=teacherRepository.findByteacherName(student.getTeacher().getTeacherName());\r\n            student.setTeacher(teacher);\r\n    return studentRepository.save(student);\r\n        }","title":"Springboot JPA relationship mapping error","body":"<p>You have to set the <code>teacher</code> and <code>school</code> itself not only the <code>id</code>:</p>\n<pre><code>public Student addStudent(Student student) {\n        // set school name if it exists and teacher name if she exists\n\n        School school = schoolRepository.findByschoolName(student.getSchool().getSchoolName());\n        student.setSchool(school);\n\n        Teacher teacher=teacherRepository.findByteacherName(student.getTeacher().getTeacherName());\n        student.setTeacher(teacher);\nreturn studentRepository.save(student);\n    }\n</code></pre>\n"}],"owner":{"account_id":4983029,"reputation":67,"user_id":4007419,"display_name":"Mausumi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1693572293,"creation_date":1693569965,"question_id":77022959,"body_markdown":"Hi I am new to Springboot JPA. I am trying to learn about relationship mapping between the entities. I have 4 entities, Student, Address, Teacher and School. I am getting multiple errors latest being  detached entity passed to persist while inserting data to the entities. I think I have not done the mapping correcty. Please help me \r\n\r\n\r\n    public class Student {\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;student_id_seq&quot;)\r\n        @SequenceGenerator(name =&quot;student_id_seq&quot;, allocationSize = 1, sequenceName = &quot;student_id_seq&quot;,initialValue = 1)\r\n        private long studentId;\r\n        private String name;\r\n        @OneToOne(cascade = CascadeType.ALL, fetch = FetchType.EAGER)\r\n        @JoinColumn(name=&quot;address_id&quot;,referencedColumnName = &quot;id&quot;)\r\n        private Address address;\r\n        @ManyToOne(fetch = FetchType.EAGER, cascade = CascadeType.ALL)\r\n        @JoinColumn(name=&quot;teacher_id&quot;)\r\n        private Teacher teacher;\r\n    \r\n        @ManyToOne(fetch = FetchType.EAGER, cascade = CascadeType.ALL)\r\n        @JoinColumn(name = &quot;school_uuid&quot;, referencedColumnName = &quot;school_uuid&quot;)\r\n        private School school;\r\n    }\r\n    \r\n    public class Address {\r\n        @Id\r\n        @GeneratedValue\r\n        private int id;\r\n        private String addressLine;\r\n        @OneToOne(mappedBy = &quot;address&quot;)\r\n        private Student student;\r\n    }\r\n    \r\n    public class School {\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.AUTO)\r\n        private long schoolId;\r\n        @Column(unique = true)\r\n        @GeneratedValue(strategy = GenerationType.UUID)\r\n        private UUID school_uuid;\r\n        private String schoolName;\r\n    \r\n        @OneToMany(mappedBy = &quot;school&quot;)\r\n        @JsonManagedReference\r\n        private List&lt;Teacher&gt; teachers;\r\n        @OneToMany(mappedBy = &quot;school&quot;)\r\n        private List&lt;Student&gt; students;\r\n    \r\n        @PrePersist\r\n        public void prePersistToUpdateUUid(){\r\n            System.out.println(&quot;prepersist called&quot;);\r\n            if(this.school_uuid == null){\r\n                this.setSchool_uuid(UUID.randomUUID());\r\n            }\r\n        }\r\n    }\r\n    \r\n    public class Teacher {\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;teacher_id_seq&quot;)\r\n        @SequenceGenerator(name = &quot;teacher_id_seq&quot;, sequenceName = &quot;teacher_id_seq&quot;, allocationSize = 1, initialValue = 1)\r\n        private long teacherId;\r\n        private String teacherName;\r\n        private String course;\r\n        @ManyToOne\r\n        @JoinColumn(name=&quot;school_uuid&quot;, referencedColumnName = &quot;school_uuid&quot;)\r\n        @JsonBackReference\r\n        private School school;\r\n        @OneToMany(mappedBy = &quot;teacher&quot;)\r\n        private List&lt;Student&gt; students;\r\n    \r\n    }\r\n\r\n\r\ntrying to persist student entity and getting error \r\n\r\n&gt; org.springframework.dao.InvalidDataAccessApiUsageException: detached\r\n\r\nentity passed to persist:\r\n\r\n     public Student addStudent(Student student) {\r\n            // set school name if it exists and teacher name if she exists\r\n    \r\n            School school = schoolRepository.findByschoolName(student.getSchool().getSchoolName());\r\n            if(school!=null){\r\n                student.getSchool().setSchool_uuid(school.getSchool_uuid());;\r\n            }\r\n    \r\n            Teacher teacher=teacherRepository.findByteacherName(student.getTeacher().getTeacherName());\r\n            if(teacher!=null){\r\n                student.getTeacher().setTeacherId(teacher.getTeacherId());\r\n            }\r\n    return studentRepository.save(student);\r\n        }\r\n","title":"Springboot JPA relationship mapping error","body":"<p>Hi I am new to Springboot JPA. I am trying to learn about relationship mapping between the entities. I have 4 entities, Student, Address, Teacher and School. I am getting multiple errors latest being  detached entity passed to persist while inserting data to the entities. I think I have not done the mapping correcty. Please help me</p>\n<pre><code>public class Student {\n    @Id\n    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;student_id_seq&quot;)\n    @SequenceGenerator(name =&quot;student_id_seq&quot;, allocationSize = 1, sequenceName = &quot;student_id_seq&quot;,initialValue = 1)\n    private long studentId;\n    private String name;\n    @OneToOne(cascade = CascadeType.ALL, fetch = FetchType.EAGER)\n    @JoinColumn(name=&quot;address_id&quot;,referencedColumnName = &quot;id&quot;)\n    private Address address;\n    @ManyToOne(fetch = FetchType.EAGER, cascade = CascadeType.ALL)\n    @JoinColumn(name=&quot;teacher_id&quot;)\n    private Teacher teacher;\n\n    @ManyToOne(fetch = FetchType.EAGER, cascade = CascadeType.ALL)\n    @JoinColumn(name = &quot;school_uuid&quot;, referencedColumnName = &quot;school_uuid&quot;)\n    private School school;\n}\n\npublic class Address {\n    @Id\n    @GeneratedValue\n    private int id;\n    private String addressLine;\n    @OneToOne(mappedBy = &quot;address&quot;)\n    private Student student;\n}\n\npublic class School {\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private long schoolId;\n    @Column(unique = true)\n    @GeneratedValue(strategy = GenerationType.UUID)\n    private UUID school_uuid;\n    private String schoolName;\n\n    @OneToMany(mappedBy = &quot;school&quot;)\n    @JsonManagedReference\n    private List&lt;Teacher&gt; teachers;\n    @OneToMany(mappedBy = &quot;school&quot;)\n    private List&lt;Student&gt; students;\n\n    @PrePersist\n    public void prePersistToUpdateUUid(){\n        System.out.println(&quot;prepersist called&quot;);\n        if(this.school_uuid == null){\n            this.setSchool_uuid(UUID.randomUUID());\n        }\n    }\n}\n\npublic class Teacher {\n    @Id\n    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;teacher_id_seq&quot;)\n    @SequenceGenerator(name = &quot;teacher_id_seq&quot;, sequenceName = &quot;teacher_id_seq&quot;, allocationSize = 1, initialValue = 1)\n    private long teacherId;\n    private String teacherName;\n    private String course;\n    @ManyToOne\n    @JoinColumn(name=&quot;school_uuid&quot;, referencedColumnName = &quot;school_uuid&quot;)\n    @JsonBackReference\n    private School school;\n    @OneToMany(mappedBy = &quot;teacher&quot;)\n    private List&lt;Student&gt; students;\n\n}\n</code></pre>\n<p>trying to persist student entity and getting error</p>\n<blockquote>\n<p>org.springframework.dao.InvalidDataAccessApiUsageException: detached</p>\n</blockquote>\n<p>entity passed to persist:</p>\n<pre><code> public Student addStudent(Student student) {\n        // set school name if it exists and teacher name if she exists\n\n        School school = schoolRepository.findByschoolName(student.getSchool().getSchoolName());\n        if(school!=null){\n            student.getSchool().setSchool_uuid(school.getSchool_uuid());;\n        }\n\n        Teacher teacher=teacherRepository.findByteacherName(student.getTeacher().getTeacherName());\n        if(teacher!=null){\n            student.getTeacher().setTeacherId(teacher.getTeacherId());\n        }\nreturn studentRepository.save(student);\n    }\n</code></pre>\n"},{"tags":["java","hibernate","spring-data-jpa"],"owner":{"account_id":7558513,"reputation":759,"user_id":5737088,"accept_rate":83,"display_name":"Draaksward"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1693571988,"creation_date":1693571988,"question_id":77023199,"body_markdown":"This is basically the question of `@GeneratedValue` but for a NON PRIMARY KEY.\r\n\r\nI have a function, let it be `createToken()` stored in DB, which I would like to call during Spring JPA/Hibernate `repository.save(myAwesomeObject)`. Or even a sequence...\r\n\r\nAs I&#39;ve said, I want it to be executed when an entity gets persisted/inserted.\r\n\r\nAnd I want it to be visible in my java code.\r\n\r\nThe only thing that I&#39;ve come up with is to have the \r\n```\r\nfield1 varchar(255) not null default myfunc()\r\n```\r\ndefined in the DDL. \r\n\r\nIt works, but:\r\na) see this as a solution &quot;when there are no good ideas&quot;\r\nb) this isn&#39;t reflected (a part from a comment) in the `@Entity`\r\nc) doing `repository.save(...)` returns the entity with that field as null (while the ID field is set), for which I need to basically make a second db call to get the actual entity. I do understand that if to switch on the DB, one would see that Hibernate&#39;s persist is far from one DB call, but every step of this solution smells like a workaround. And I don&#39;t enjoy my code being a &quot;meh, it will have to do&quot;.\r\n\r\nI saw a solution about Composite keys and stuff, but not I don&#39;t want to create a composite key just for that (and having to meddle with the fact of the composite key).\r\n\r\nIs there something (which I&#39;m maybe forgetting or simply don&#39;t know) like a `@OnInsert` for an entity field, which I can use and make my solution graceful.\r\n\r\nAlso, I do understand the fact that I can make a separate `@Query` to call `myfunc()` and set it before the entity goes to persist, but that eliminates the desire of having everything done clean (oh look, I generate @ID in one way, after which field B, which is similar, is done in a completely different manner...)","title":"Spring JPA. Calling a stored procedure on INSERT","body":"<p>This is basically the question of <code>@GeneratedValue</code> but for a NON PRIMARY KEY.</p>\n<p>I have a function, let it be <code>createToken()</code> stored in DB, which I would like to call during Spring JPA/Hibernate <code>repository.save(myAwesomeObject)</code>. Or even a sequence...</p>\n<p>As I've said, I want it to be executed when an entity gets persisted/inserted.</p>\n<p>And I want it to be visible in my java code.</p>\n<p>The only thing that I've come up with is to have the</p>\n<pre><code>field1 varchar(255) not null default myfunc()\n</code></pre>\n<p>defined in the DDL.</p>\n<p>It works, but:\na) see this as a solution &quot;when there are no good ideas&quot;\nb) this isn't reflected (a part from a comment) in the <code>@Entity</code>\nc) doing <code>repository.save(...)</code> returns the entity with that field as null (while the ID field is set), for which I need to basically make a second db call to get the actual entity. I do understand that if to switch on the DB, one would see that Hibernate's persist is far from one DB call, but every step of this solution smells like a workaround. And I don't enjoy my code being a &quot;meh, it will have to do&quot;.</p>\n<p>I saw a solution about Composite keys and stuff, but not I don't want to create a composite key just for that (and having to meddle with the fact of the composite key).</p>\n<p>Is there something (which I'm maybe forgetting or simply don't know) like a <code>@OnInsert</code> for an entity field, which I can use and make my solution graceful.</p>\n<p>Also, I do understand the fact that I can make a separate <code>@Query</code> to call <code>myfunc()</code> and set it before the entity goes to persist, but that eliminates the desire of having everything done clean (oh look, I generate @ID in one way, after which field B, which is similar, is done in a completely different manner...)</p>\n"},{"tags":["java","spring-webflux"],"answers":[{"tags":[],"owner":{"account_id":1752470,"reputation":346,"user_id":1601257,"display_name":"aietcn"},"comment_count":0,"down_vote_count":0,"up_vote_count":12,"is_accepted":true,"score":12,"last_activity_date":1553689661,"creation_date":1497866876,"answer_id":44627688,"question_id":43575538,"body_markdown":"Spring 5 provides a [WebHandler][1], and in the JavaDoc, there&#39;s the line:\r\n\r\n&gt; Use HttpWebHandlerAdapter to adapt a WebHandler to an HttpHandler. The WebHttpHandlerBuilder provides a convenient way to do that while also optionally configuring one or more filters and/or exception handlers.\r\n\r\nCurrently, the official documentation suggests that we should wrap the router function into an HttpHandler before booting up any server:\r\n\r\n    HttpHandler httpHandler = RouterFunctions.toHttpHandler(routerFunction);\r\n\r\nWith the help of [WebHttpHandlerBuilder][2], we can configure custom exception handlers:\r\n\r\n    HttpHandler httpHandler = WebHttpHandlerBuilder.webHandler(toHttpHandler(routerFunction))\r\n      .prependExceptionHandler((serverWebExchange, exception) -&gt; {\r\n\r\n          /* custom handling goes here */\r\n          return null;\r\n\r\n      }).build();\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/5.1.5.RELEASE/javadoc-api/org/springframework/web/server/WebHandler.html\r\n  [2]: http://docs.spring.io/spring-framework/docs/5.1.5.RELEASE/javadoc-api/org/springframework/web/server/adapter/WebHttpHandlerBuilder.html","title":"what is the right way to handle errors in spring-webflux","body":"<p>Spring 5 provides a <a href=\"https://docs.spring.io/spring-framework/docs/5.1.5.RELEASE/javadoc-api/org/springframework/web/server/WebHandler.html\" rel=\"noreferrer\">WebHandler</a>, and in the JavaDoc, there's the line:</p>\n\n<blockquote>\n  <p>Use HttpWebHandlerAdapter to adapt a WebHandler to an HttpHandler. The WebHttpHandlerBuilder provides a convenient way to do that while also optionally configuring one or more filters and/or exception handlers.</p>\n</blockquote>\n\n<p>Currently, the official documentation suggests that we should wrap the router function into an HttpHandler before booting up any server:</p>\n\n<pre><code>HttpHandler httpHandler = RouterFunctions.toHttpHandler(routerFunction);\n</code></pre>\n\n<p>With the help of <a href=\"http://docs.spring.io/spring-framework/docs/5.1.5.RELEASE/javadoc-api/org/springframework/web/server/adapter/WebHttpHandlerBuilder.html\" rel=\"noreferrer\">WebHttpHandlerBuilder</a>, we can configure custom exception handlers:</p>\n\n<pre><code>HttpHandler httpHandler = WebHttpHandlerBuilder.webHandler(toHttpHandler(routerFunction))\n  .prependExceptionHandler((serverWebExchange, exception) -&gt; {\n\n      /* custom handling goes here */\n      return null;\n\n  }).build();\n</code></pre>\n"},{"comments":[{"owner":{"account_id":480584,"reputation":8228,"user_id":893898,"accept_rate":42,"display_name":"Hantsy"},"score":2,"creation_date":1514774117,"post_id":45105327,"comment_id":83065177,"body_markdown":"Finally make it work, in none boot application, register it manually,  see [here](https://github.com/hantsy/spring-reactive-sample/blob/master/exception-handler/src/main/java/com/example/demo/Application.java#L50)","body":"Finally make it work, in none boot application, register it manually,  see <a href=\"https://github.com/hantsy/spring-reactive-sample/blob/master/exception-handler/src/main/java/com/example/demo/Application.java#L50\" rel=\"nofollow noreferrer\">here</a>"},{"owner":{"account_id":4779126,"reputation":570,"user_id":3861445,"display_name":"Alphaone"},"score":1,"creation_date":1518011015,"post_id":45105327,"comment_id":84328089,"body_markdown":"@Hantsy You could also consider handling exceptions directly in handler functions with for example onErrorResume(...). I actually find this to be the best practice atm :)","body":"@Hantsy You could also consider handling exceptions directly in handler functions with for example onErrorResume(...). I actually find this to be the best practice atm :)"}],"tags":[],"owner":{"account_id":4779126,"reputation":570,"user_id":3861445,"display_name":"Alphaone"},"comment_count":2,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1500042251,"creation_date":1500042251,"answer_id":45105327,"question_id":43575538,"body_markdown":"Why not do it the old fashioned way by throwing exceptions from handler functions and implementing your own WebExceptionHandler to catch &#39;em all:\r\n  \r\n\r\n  \r\n    @Component\r\n    class ExceptionHandler : WebExceptionHandler {\r\n        override fun handle(exchange: ServerWebExchange?, ex: Throwable?): Mono&lt;Void&gt; {\r\n            /* Handle different exceptions here */\r\n            when(ex!!) {\r\n                is NoSuchElementException -&gt; exchange!!.response.statusCode = HttpStatus.NOT_FOUND\r\n                is Exception -&gt; exchange!!.response.statusCode = HttpStatus.INTERNAL_SERVER_ERROR\r\n            }\r\n        \r\n            /* Do common thing like logging etc... */\r\n                \r\n            return Mono.empty()\r\n        }\r\n    }\r\n\r\nAbove example is in Kotlin, since I just copy pasted it from a project I&#180;m currently working on, and since the original question was not tagged for java anyway.","title":"what is the right way to handle errors in spring-webflux","body":"<p>Why not do it the old fashioned way by throwing exceptions from handler functions and implementing your own WebExceptionHandler to catch 'em all:</p>\n\n<pre><code>@Component\nclass ExceptionHandler : WebExceptionHandler {\n    override fun handle(exchange: ServerWebExchange?, ex: Throwable?): Mono&lt;Void&gt; {\n        /* Handle different exceptions here */\n        when(ex!!) {\n            is NoSuchElementException -&gt; exchange!!.response.statusCode = HttpStatus.NOT_FOUND\n            is Exception -&gt; exchange!!.response.statusCode = HttpStatus.INTERNAL_SERVER_ERROR\n        }\n\n        /* Do common thing like logging etc... */\n\n        return Mono.empty()\n    }\n}\n</code></pre>\n\n<p>Above example is in Kotlin, since I just copy pasted it from a project I´m currently working on, and since the original question was not tagged for java anyway.</p>\n"},{"tags":[],"owner":{"account_id":1339883,"reputation":963,"user_id":1281789,"accept_rate":83,"display_name":"adrien le roy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1500900298,"creation_date":1500898770,"answer_id":45280499,"question_id":43575538,"body_markdown":"What I am currently doing is simply providing a bean my WebExceptionHandler :\r\n \r\n    @Bean\r\n    @Order(0)\r\n    public WebExceptionHandler responseStatusExceptionHandler() {\r\n        return new MyWebExceptionHandler();\r\n    }\r\n\r\nThe advantage than creating the `HttpHandler` myself is that I have a better integration with `WebFluxConfigurer` if I provide my own `ServerCodecConfigurer` for example or using `SpringSecurity`","title":"what is the right way to handle errors in spring-webflux","body":"<p>What I am currently doing is simply providing a bean my WebExceptionHandler :</p>\n\n<pre><code>@Bean\n@Order(0)\npublic WebExceptionHandler responseStatusExceptionHandler() {\n    return new MyWebExceptionHandler();\n}\n</code></pre>\n\n<p>The advantage than creating the <code>HttpHandler</code> myself is that I have a better integration with <code>WebFluxConfigurer</code> if I provide my own <code>ServerCodecConfigurer</code> for example or using <code>SpringSecurity</code></p>\n"},{"tags":[],"owner":{"account_id":11171319,"reputation":2160,"user_id":8198203,"accept_rate":75,"display_name":"Frischling"},"comment_count":0,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1518599373,"creation_date":1518599373,"answer_id":48783313,"question_id":43575538,"body_markdown":"If you think, router functions are not the right place to handle exceptions, you throw HTTP Exceptions, that will result in the correct HTTP Error codes.\r\nFor Spring-Boot (also webflux) this is:\r\n      \r\n      import org.springframework.http.HttpStatus;\r\n      import org.springframework.web.server.ResponseStatusException;\r\n      .\r\n      .\r\n      . \r\n\r\n      new ResponseStatusException(HttpStatus.NOT_FOUND,  &quot;Collection not found&quot;);})\r\n\r\nspring securities AccessDeniedException will be handled correctly, too (403/401 response codes).\r\n\r\nIf you have a microservice, and want to use REST for it, this can be a good option, since those http exceptions are quite close to business logic, and should be placed near the business logic in this case.  And since in a microservice you shouldn&#39;t have to much businesslogic and exceptions, it shouldn&#39;t clutter your code, too... (but of course, it all depends).","title":"what is the right way to handle errors in spring-webflux","body":"<p>If you think, router functions are not the right place to handle exceptions, you throw HTTP Exceptions, that will result in the correct HTTP Error codes.\nFor Spring-Boot (also webflux) this is:</p>\n\n<pre><code>  import org.springframework.http.HttpStatus;\n  import org.springframework.web.server.ResponseStatusException;\n  .\n  .\n  . \n\n  new ResponseStatusException(HttpStatus.NOT_FOUND,  \"Collection not found\");})\n</code></pre>\n\n<p>spring securities AccessDeniedException will be handled correctly, too (403/401 response codes).</p>\n\n<p>If you have a microservice, and want to use REST for it, this can be a good option, since those http exceptions are quite close to business logic, and should be placed near the business logic in this case.  And since in a microservice you shouldn't have to much businesslogic and exceptions, it shouldn't clutter your code, too... (but of course, it all depends).</p>\n"},{"tags":[],"owner":{"account_id":4949274,"reputation":743,"user_id":3983812,"display_name":"Hartmut"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1529273752,"creation_date":1529273752,"answer_id":50900904,"question_id":43575538,"body_markdown":"A quick way to map your exceptions to http response status is to throw `org.springframework.web.server.ResponseStatusException` / or create your own subclasses...\r\n\r\nFull control over http response status + spring will add a response body with the option to add a `reason`.\r\n\r\nIn Kotlin it could look as simple as\r\n\r\n    @Component\r\n    class MyHandler(private val myRepository: MyRepository) {\r\n    \r\n        fun getById(req: ServerRequest) = req.pathVariable(&quot;id&quot;).toMono()\r\n                .map { id -&gt; uuidFromString(id) }  // throws ResponseStatusException\r\n                .flatMap { id -&gt; noteRepository.findById(id) }\r\n                .flatMap { entity -&gt; ok().json().body(entity.toMono()) }\r\n                .switchIfEmpty(notFound().build())  // produces 404 if not found\r\n    \r\n    }\r\n\r\n    fun uuidFromString(id: String?) = try { UUID.fromString(id) } catch (e: Throwable) { throw BadRequestStatusException(e.localizedMessage) }\r\n\r\n    class BadRequestStatusException(reason: String) : ResponseStatusException(HttpStatus.BAD_REQUEST, reason)\r\n\r\n\r\nResponse Body:\r\n\r\n    {\r\n    \t&quot;timestamp&quot;: 1529138182607,\r\n    \t&quot;path&quot;: &quot;/api/notes/f7b.491bc-5c86-4fe6-9ad7-111&quot;,\r\n    \t&quot;status&quot;: 400,\r\n    \t&quot;error&quot;: &quot;Bad Request&quot;,\r\n    \t&quot;message&quot;: &quot;For input string: \\&quot;f7b.491bc\\&quot;&quot;\r\n    }","title":"what is the right way to handle errors in spring-webflux","body":"<p>A quick way to map your exceptions to http response status is to throw <code>org.springframework.web.server.ResponseStatusException</code> / or create your own subclasses...</p>\n\n<p>Full control over http response status + spring will add a response body with the option to add a <code>reason</code>.</p>\n\n<p>In Kotlin it could look as simple as</p>\n\n<pre><code>@Component\nclass MyHandler(private val myRepository: MyRepository) {\n\n    fun getById(req: ServerRequest) = req.pathVariable(\"id\").toMono()\n            .map { id -&gt; uuidFromString(id) }  // throws ResponseStatusException\n            .flatMap { id -&gt; noteRepository.findById(id) }\n            .flatMap { entity -&gt; ok().json().body(entity.toMono()) }\n            .switchIfEmpty(notFound().build())  // produces 404 if not found\n\n}\n\nfun uuidFromString(id: String?) = try { UUID.fromString(id) } catch (e: Throwable) { throw BadRequestStatusException(e.localizedMessage) }\n\nclass BadRequestStatusException(reason: String) : ResponseStatusException(HttpStatus.BAD_REQUEST, reason)\n</code></pre>\n\n<p>Response Body:</p>\n\n<pre><code>{\n    \"timestamp\": 1529138182607,\n    \"path\": \"/api/notes/f7b.491bc-5c86-4fe6-9ad7-111\",\n    \"status\": 400,\n    \"error\": \"Bad Request\",\n    \"message\": \"For input string: \\\"f7b.491bc\\\"\"\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":11502626,"reputation":569,"user_id":8429944,"display_name":"GhostBytes"},"score":0,"creation_date":1624892457,"post_id":58266972,"comment_id":120474951,"body_markdown":"This is a great solution, made even better by extending DefaultErrorWebExceptionHandler instead of ErrorWebExceptionHandler.","body":"This is a great solution, made even better by extending DefaultErrorWebExceptionHandler instead of ErrorWebExceptionHandler."}],"tags":[],"owner":{"account_id":10375812,"reputation":2008,"user_id":7652010,"display_name":"Akhil Bojedla"},"comment_count":1,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1570441135,"creation_date":1570441135,"answer_id":58266972,"question_id":43575538,"body_markdown":"You can write a Global exception handler with custom response data and response code as follows. The code is in Kotlin. But you can convert it to java easily:\r\n\r\n    @Component\r\n    @Order(-2)\r\n    class GlobalWebExceptionHandler(\r\n      private val objectMapper: ObjectMapper\r\n    ) : ErrorWebExceptionHandler {\r\n\r\n      override fun handle(exchange: ServerWebExchange, ex: Throwable): Mono&lt;Void&gt; {\r\n\r\n        val response = when (ex) {\r\n          // buildIOExceptionMessage should build relevant exception message as a serialisable object\r\n          is IOException -&gt; buildIOExceptionMessage(ex)\r\n          else -&gt; buildExceptionMessage(ex)\r\n        }\r\n\r\n        // Or you can also set them inside while conditions\r\n        exchange.response.headers.contentType = MediaType.APPLICATION_PROBLEM_JSON\r\n        exchange.response.statusCode = HttpStatus.valueOf(response.status)\r\n        val bytes = objectMapper.writeValueAsBytes(response)\r\n        val buffer = exchange.response.bufferFactory().wrap(bytes)\r\n        return exchange.response.writeWith(Mono.just(buffer))\r\n      }\r\n    }\r\n","title":"what is the right way to handle errors in spring-webflux","body":"<p>You can write a Global exception handler with custom response data and response code as follows. The code is in Kotlin. But you can convert it to java easily:</p>\n\n<pre><code>@Component\n@Order(-2)\nclass GlobalWebExceptionHandler(\n  private val objectMapper: ObjectMapper\n) : ErrorWebExceptionHandler {\n\n  override fun handle(exchange: ServerWebExchange, ex: Throwable): Mono&lt;Void&gt; {\n\n    val response = when (ex) {\n      // buildIOExceptionMessage should build relevant exception message as a serialisable object\n      is IOException -&gt; buildIOExceptionMessage(ex)\n      else -&gt; buildExceptionMessage(ex)\n    }\n\n    // Or you can also set them inside while conditions\n    exchange.response.headers.contentType = MediaType.APPLICATION_PROBLEM_JSON\n    exchange.response.statusCode = HttpStatus.valueOf(response.status)\n    val bytes = objectMapper.writeValueAsBytes(response)\n    val buffer = exchange.response.bufferFactory().wrap(bytes)\n    return exchange.response.writeWith(Mono.just(buffer))\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10603787,"reputation":63,"user_id":7809939,"display_name":"elesg"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693571721,"creation_date":1693571173,"answer_id":77023109,"question_id":43575538,"body_markdown":"Extending [Akhil&#39;s](https://stackoverflow.com/a/58266972/7809939) answer to implement ErrorWebExceptionHandler in java.\r\n\r\n    public Mono&lt;Void&gt; handle(ServerWebExchange exchange, Throwable ex) {\r\n\t   return Mono.just(exchange.getResponse())\r\n\t\t\t.doOnNext(response -&gt; response.getHeaders().setContentType(MediaType.APPLICATION_JSON))\r\n\t\t\t.doOnNext(response-&gt;response.setStatusCode(HttpStatus.&lt;HTTP STATUS&gt;))\r\n\t\t\t.flatMap(response -&gt; {\r\n\t\t\t\ttry {\r\n\t\t\t\t\treturn response.writeWith(Mono.just(response.bufferFactory()\r\n\t\t\t\t\t\t\t\t\t.wrap(new ObjectMapper().writeValueAsBytes(new CustomResponseObject()))));\r\n\t\t\t\t} catch (JsonProcessingException e) {\r\n\t\t\t\t\tthrow new RuntimeException(e);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.doOnSuccess(e -&gt; log.info(&quot;Exception occurred&quot;, ex));\r\n    }\r\n\r\nshould replace **HTTP STATUS** and **CustomResponseObject** with expected one along with **ObjectMapper** instance.","title":"what is the right way to handle errors in spring-webflux","body":"<p>Extending <a href=\"https://stackoverflow.com/a/58266972/7809939\">Akhil's</a> answer to implement ErrorWebExceptionHandler in java.</p>\n<pre><code>public Mono&lt;Void&gt; handle(ServerWebExchange exchange, Throwable ex) {\n   return Mono.just(exchange.getResponse())\n        .doOnNext(response -&gt; response.getHeaders().setContentType(MediaType.APPLICATION_JSON))\n        .doOnNext(response-&gt;response.setStatusCode(HttpStatus.&lt;HTTP STATUS&gt;))\n        .flatMap(response -&gt; {\n            try {\n                return response.writeWith(Mono.just(response.bufferFactory()\n                                .wrap(new ObjectMapper().writeValueAsBytes(new CustomResponseObject()))));\n            } catch (JsonProcessingException e) {\n                throw new RuntimeException(e);\n            }\n        })\n        .doOnSuccess(e -&gt; log.info(&quot;Exception occurred&quot;, ex));\n}\n</code></pre>\n<p>should replace <strong>HTTP STATUS</strong> and <strong>CustomResponseObject</strong> with expected one along with <strong>ObjectMapper</strong> instance.</p>\n"}],"owner":{"account_id":10750902,"reputation":553,"user_id":7910403,"display_name":"Juan Medina"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40639,"favorite_count":0,"down_vote_count":1,"up_vote_count":23,"accepted_answer_id":44627688,"answer_count":7,"score":22,"last_activity_date":1693571721,"creation_date":1492975477,"question_id":43575538,"body_markdown":"I&#39;ve been doing some research using spring-webflux and I like to understand what should be the right way to handle errors using Router Functions.\r\n\r\nI&#39;ve created an small project to test a couple of scenarios, and I like to get feedback about it, and see what other people is doing.\r\n\r\n\r\nSo far what I doing is.\r\n\r\nGiving the following routing function:\r\n\r\n    @Component\r\n    public class HelloRouter {\r\n        @Bean\r\n        RouterFunction&lt;?&gt; helloRouterFunction() {\r\n            HelloHandler handler = new HelloHandler();\r\n            ErrorHandler error = new ErrorHandler();\r\n\r\n            return nest(path(&quot;/hello&quot;),\r\n                    nest(accept(APPLICATION_JSON),\r\n                            route(GET(&quot;/&quot;), handler::defaultHello)\r\n                                    .andRoute(POST(&quot;/&quot;), handler::postHello)\r\n                                    .andRoute(GET(&quot;/{name}&quot;), handler::getHello)\r\n                    )).andOther(route(RequestPredicates.all(), error::notFound));\r\n        }\r\n    }\r\n\r\nI&#39;ve do this on my handler\r\n\r\n    class HelloHandler {\r\n\r\n        private ErrorHandler error;\r\n\r\n        private static final String DEFAULT_VALUE = &quot;world&quot;;\r\n\r\n        HelloHandler() {\r\n            error = new ErrorHandler();\r\n        }\r\n\r\n        private Mono&lt;ServerResponse&gt; getResponse(String value) {\r\n            if (value.equals(&quot;&quot;)) {\r\n                return Mono.error(new InvalidParametersException(&quot;bad parameters&quot;));\r\n            }\r\n            return ServerResponse.ok().body(Mono.just(new HelloResponse(value)), HelloResponse.class);\r\n        }\r\n\r\n        Mono&lt;ServerResponse&gt; defaultHello(ServerRequest request) {\r\n            return getResponse(DEFAULT_VALUE);\r\n        }\r\n\r\n        Mono&lt;ServerResponse&gt; getHello(ServerRequest request) {\r\n            return getResponse(request.pathVariable(&quot;name&quot;));\r\n        }\r\n\r\n        Mono&lt;ServerResponse&gt; postHello(ServerRequest request) {\r\n            return request.bodyToMono(HelloRequest.class).flatMap(helloRequest -&gt; getResponse(helloRequest.getName()))\r\n                    .onErrorResume(error::badRequest);\r\n        }\r\n    }\r\n\r\n\r\nThem my error handler do:\r\n\r\n    class ErrorHandler {\r\n\r\n        private static Logger logger = LoggerFactory.getLogger(ErrorHandler.class);\r\n\r\n        private static BiFunction&lt;HttpStatus,String,Mono&lt;ServerResponse&gt;&gt; response =\r\n        (status,value)-&gt; ServerResponse.status(status).body(Mono.just(new ErrorResponse(value)),\r\n                ErrorResponse.class);\r\n\r\n        Mono&lt;ServerResponse&gt; notFound(ServerRequest request){\r\n            return response.apply(HttpStatus.NOT_FOUND, &quot;not found&quot;);\r\n        }\r\n\r\n        Mono&lt;ServerResponse&gt; badRequest(Throwable error){\r\n            logger.error(&quot;error raised&quot;, error);\r\n            return response.apply(HttpStatus.BAD_REQUEST, error.getMessage());\r\n        }\r\n    }\r\n\r\nHere is the full sample repo:\r\n\r\nhttps://github.com/LearningByExample/reactive-ms-example","title":"what is the right way to handle errors in spring-webflux","body":"<p>I've been doing some research using spring-webflux and I like to understand what should be the right way to handle errors using Router Functions.</p>\n\n<p>I've created an small project to test a couple of scenarios, and I like to get feedback about it, and see what other people is doing.</p>\n\n<p>So far what I doing is.</p>\n\n<p>Giving the following routing function:</p>\n\n<pre><code>@Component\npublic class HelloRouter {\n    @Bean\n    RouterFunction&lt;?&gt; helloRouterFunction() {\n        HelloHandler handler = new HelloHandler();\n        ErrorHandler error = new ErrorHandler();\n\n        return nest(path(\"/hello\"),\n                nest(accept(APPLICATION_JSON),\n                        route(GET(\"/\"), handler::defaultHello)\n                                .andRoute(POST(\"/\"), handler::postHello)\n                                .andRoute(GET(\"/{name}\"), handler::getHello)\n                )).andOther(route(RequestPredicates.all(), error::notFound));\n    }\n}\n</code></pre>\n\n<p>I've do this on my handler</p>\n\n<pre><code>class HelloHandler {\n\n    private ErrorHandler error;\n\n    private static final String DEFAULT_VALUE = \"world\";\n\n    HelloHandler() {\n        error = new ErrorHandler();\n    }\n\n    private Mono&lt;ServerResponse&gt; getResponse(String value) {\n        if (value.equals(\"\")) {\n            return Mono.error(new InvalidParametersException(\"bad parameters\"));\n        }\n        return ServerResponse.ok().body(Mono.just(new HelloResponse(value)), HelloResponse.class);\n    }\n\n    Mono&lt;ServerResponse&gt; defaultHello(ServerRequest request) {\n        return getResponse(DEFAULT_VALUE);\n    }\n\n    Mono&lt;ServerResponse&gt; getHello(ServerRequest request) {\n        return getResponse(request.pathVariable(\"name\"));\n    }\n\n    Mono&lt;ServerResponse&gt; postHello(ServerRequest request) {\n        return request.bodyToMono(HelloRequest.class).flatMap(helloRequest -&gt; getResponse(helloRequest.getName()))\n                .onErrorResume(error::badRequest);\n    }\n}\n</code></pre>\n\n<p>Them my error handler do:</p>\n\n<pre><code>class ErrorHandler {\n\n    private static Logger logger = LoggerFactory.getLogger(ErrorHandler.class);\n\n    private static BiFunction&lt;HttpStatus,String,Mono&lt;ServerResponse&gt;&gt; response =\n    (status,value)-&gt; ServerResponse.status(status).body(Mono.just(new ErrorResponse(value)),\n            ErrorResponse.class);\n\n    Mono&lt;ServerResponse&gt; notFound(ServerRequest request){\n        return response.apply(HttpStatus.NOT_FOUND, \"not found\");\n    }\n\n    Mono&lt;ServerResponse&gt; badRequest(Throwable error){\n        logger.error(\"error raised\", error);\n        return response.apply(HttpStatus.BAD_REQUEST, error.getMessage());\n    }\n}\n</code></pre>\n\n<p>Here is the full sample repo:</p>\n\n<p><a href=\"https://github.com/LearningByExample/reactive-ms-example\" rel=\"noreferrer\">https://github.com/LearningByExample/reactive-ms-example</a></p>\n"},{"tags":["java","http","reactive","java-http-client"],"answers":[{"comments":[{"owner":{"account_id":207965,"reputation":3704,"user_id":458157,"accept_rate":75,"display_name":"gouessej"},"score":0,"creation_date":1693560176,"post_id":52784063,"comment_id":135780277,"body_markdown":"`Flow.Subscription#request(long)` must be called in `Subscriber#onNext(String)` and `Subscriber#onSubscribe(Flow.Subscription)` to make it work. If you don&#39;t do that, it will remain blocked.","body":"<code>Flow.Subscription#request(long)</code> must be called in <code>Subscriber#onNext(String)</code> and <code>Subscriber#onSubscribe(Flow.Subscription)</code> to make it work. If you don&#39;t do that, it will remain blocked."}],"tags":[],"owner":{"account_id":14531657,"reputation":2813,"user_id":10496385,"display_name":"daniel"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1541091176,"creation_date":1539363814,"answer_id":52784063,"question_id":52669764,"body_markdown":"You can print `ByteBuffer`s as they come, but there&#39;s no guarantee that a `ByteBuffer` corresponds to a chunk. Chunks are handled by the stack. One `ByteBuffer` slice will be pushed for every chunk - but if there isn’t enough space remaining in the buffer, then a partial chunk will be pushed. All the consumer sees is a stream of `ByteBuffer`s that contain the data.\r\nSo what you can do is print those `ByteBuffer`s as they come, but you have no guarantee that they correspond exactly one chunk each as was sent by the server.\r\n\r\nNote: If the body of your request is text based, then you can use\r\n`BodyHandlers.fromLineSubscriber(Subscriber&lt;? super String&gt; subscriber)` with a custom `Subscriber&lt;String&gt;` that will print each line as it comes.\r\nThe `BodyHandlers.fromLineSubscriber` does the hard word of decoding bytes into chars using the charset indicated in the response headers, buffering bytes if needed until they can be decoded (a ByteBuffer might end in the middle of an encoding sequence if the text contains chars encoded over multiple bytes), and splitting them at the line boundary. The Subscriber&lt;String&gt;::onNext method will be invoked once for each line in the text. See https://download.java.net/java/early_access/jdk11/docs/api/java.net.http/java/net/http/HttpResponse.BodyHandlers.html#fromLineSubscriber(java.util.concurrent.Flow.Subscriber) for more info.","title":"How do you read and print a chunked HTTP response using java.net.http as chunks arrive?","body":"<p>You can print <code>ByteBuffer</code>s as they come, but there's no guarantee that a <code>ByteBuffer</code> corresponds to a chunk. Chunks are handled by the stack. One <code>ByteBuffer</code> slice will be pushed for every chunk - but if there isn’t enough space remaining in the buffer, then a partial chunk will be pushed. All the consumer sees is a stream of <code>ByteBuffer</code>s that contain the data.\nSo what you can do is print those <code>ByteBuffer</code>s as they come, but you have no guarantee that they correspond exactly one chunk each as was sent by the server.</p>\n\n<p>Note: If the body of your request is text based, then you can use\n<code>BodyHandlers.fromLineSubscriber(Subscriber&lt;? super String&gt; subscriber)</code> with a custom <code>Subscriber&lt;String&gt;</code> that will print each line as it comes.\nThe <code>BodyHandlers.fromLineSubscriber</code> does the hard word of decoding bytes into chars using the charset indicated in the response headers, buffering bytes if needed until they can be decoded (a ByteBuffer might end in the middle of an encoding sequence if the text contains chars encoded over multiple bytes), and splitting them at the line boundary. The Subscriber::onNext method will be invoked once for each line in the text. See <a href=\"https://download.java.net/java/early_access/jdk11/docs/api/java.net.http/java/net/http/HttpResponse.BodyHandlers.html#fromLineSubscriber(java.util.concurrent.Flow.Subscriber)\" rel=\"nofollow noreferrer\">https://download.java.net/java/early_access/jdk11/docs/api/java.net.http/java/net/http/HttpResponse.BodyHandlers.html#fromLineSubscriber(java.util.concurrent.Flow.Subscriber)</a> for more info.</p>\n"},{"tags":[],"owner":{"account_id":13027511,"reputation":136,"user_id":9415030,"display_name":"chegar999"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1693475226,"creation_date":1539373073,"answer_id":52786014,"question_id":52669764,"body_markdown":"The python code does not ensure that the response body data is made available one [HTTP chunk][1] at a time. It just provides small amounts of data to the application, thus reducing the amount of memory consumed at the application level ( it could be buffered lower in the stack ). The Java 11 HTTP Client supports streaming through one of the streaming body handlers, `HttpResponse.BodyHandlers`:  `ofInputStream`, `ofByteArrayConsumer`, `ofLines`, etc.\r\n\r\nOr write your own handler / subscriber as demonstrated:\r\n  https://www.youtube.com/watch?v=qiaC0QMLz5Y\r\n\r\n\r\n  [1]: https://www.rfc-editor.org/rfc/rfc7230#section-4.1","title":"How do you read and print a chunked HTTP response using java.net.http as chunks arrive?","body":"<p>The python code does not ensure that the response body data is made available one <a href=\"https://www.rfc-editor.org/rfc/rfc7230#section-4.1\" rel=\"nofollow noreferrer\">HTTP chunk</a> at a time. It just provides small amounts of data to the application, thus reducing the amount of memory consumed at the application level ( it could be buffered lower in the stack ). The Java 11 HTTP Client supports streaming through one of the streaming body handlers, <code>HttpResponse.BodyHandlers</code>:  <code>ofInputStream</code>, <code>ofByteArrayConsumer</code>, <code>ofLines</code>, etc.</p>\n<p>Or write your own handler / subscriber as demonstrated:\n<a href=\"https://www.youtube.com/watch?v=qiaC0QMLz5Y\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=qiaC0QMLz5Y</a></p>\n"},{"tags":[],"owner":{"account_id":19407,"reputation":1974,"user_id":45483,"display_name":"hohonuuli"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1540912394,"creation_date":1540877153,"answer_id":53057925,"question_id":52669764,"body_markdown":"Thanks to @pavel and @chegar999 for their partial answers. They led me to my solution.\r\n\r\n### Overview\r\n\r\nThe solution I came up with is below. Basically, the solution is to use a custom `java.net.http.HttpResponse.BodySubscriber`. A BodySubscriber contains reactive methods (onSubscribe, onNext, onError, and onComplete) and a getBody method that basically returns a java [CompletableFuture](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html) that will eventually produce the body of the HTTP request. Once you have your BodySubscriber in hand you can use it like:\r\n\r\n\r\n    HttpClient client = HttpClient.newHttpClient();\r\n    HttpRequest request = HttpRequest.newBuilder()\r\n        .uri(URI.create(uri))\r\n        .build();\r\n    \r\n    return client.sendAsync(request, responseInfo -&gt; new StringSubscriber())\r\n        .whenComplete((r, t) -&gt; System.out.println(&quot;--- Status code &quot; + r.statusCode()))\r\n        .thenApply(HttpResponse::body);\r\n\r\nNote the line:\r\n\r\n`client.sendAsync(request, responseInfo -&gt; new StringSubscriber())`\r\n\r\nThat&#39;s where we register our custom BodySubscriber; in this case, my custom class is named `StringSubscriber`.\r\n\r\n### CustomSubscriber.java\r\n\r\nThis is a complete working example. Using Java 11, you can run it without compiling it. Just past it into a file named `CustomSubscriber.java`, then run the command `java CustomSubscriber &lt;some url&gt;`. It prints the contents of each chunk as it arrives. It also collects them and returns them as the body when the response has completed.\r\n\r\n    import java.net.http.HttpClient;\r\n    import java.net.http.HttpRequest;\r\n    import java.net.http.HttpResponse;\r\n    import java.net.http.HttpResponse.BodyHandlers;\r\n    import java.net.http.HttpResponse.BodySubscriber;\r\n    import java.net.URI;\r\n    import java.nio.ByteBuffer;\r\n    import java.nio.charset.StandardCharsets;\r\n    import java.util.ArrayList;\r\n    import java.util.concurrent.CompletableFuture;\r\n    import java.util.concurrent.CompletionStage;\r\n    import java.util.concurrent.CopyOnWriteArrayList;\r\n    import java.util.concurrent.Flow;\r\n    import java.util.stream.Collectors;\r\n    import java.util.List;\r\n    \r\n    public class CustomSubscriber {\r\n    \r\n      public static void main(String[] args) {\r\n        CustomSubscriber cs = new CustomSubscriber();\r\n        String body = cs.get(args[0]).join();\r\n        System.out.println(&quot;--- Response body:\\n: ...&quot; + body + &quot;...&quot;);\r\n      }\r\n    \r\n      public CompletableFuture&lt;String&gt; get(String uri) {\r\n        HttpClient client = HttpClient.newHttpClient();\r\n        HttpRequest request = HttpRequest.newBuilder()\r\n            .uri(URI.create(uri))\r\n            .build();\r\n    \r\n        return client.sendAsync(request, responseInfo -&gt; new StringSubscriber())\r\n            .whenComplete((r, t) -&gt; System.out.println(&quot;--- Status code &quot; + r.statusCode()))\r\n            .thenApply(HttpResponse::body);\r\n      }\r\n    \r\n      static class StringSubscriber implements BodySubscriber&lt;String&gt; {\r\n    \r\n        final CompletableFuture&lt;String&gt; bodyCF = new CompletableFuture&lt;&gt;();\r\n        Flow.Subscription subscription;\r\n        List&lt;ByteBuffer&gt; responseData = new CopyOnWriteArrayList&lt;&gt;();\r\n    \r\n        @Override\r\n        public CompletionStage&lt;String&gt; getBody() {\r\n          return bodyCF;\r\n        }\r\n    \r\n        @Override\r\n        public void onSubscribe(Flow.Subscription subscription) {\r\n          this.subscription = subscription;\r\n          subscription.request(1); // Request first item\r\n        }\r\n    \r\n        @Override\r\n        public void onNext(List&lt;ByteBuffer&gt; buffers) {\r\n          System.out.println(&quot;-- onNext &quot; + buffers);\r\n          try {\r\n            System.out.println(&quot;\\tBuffer Content:\\n&quot; + asString(buffers));\r\n          } \r\n          catch (Exception e) {\r\n            System.out.println(&quot;\\tUnable to print buffer content&quot;);\r\n          }\r\n          buffers.forEach(ByteBuffer::rewind); // Rewind after reading\r\n          responseData.addAll(buffers);\r\n          subscription.request(1); // Request next item\r\n        }\r\n    \r\n        @Override\r\n        public void onError(Throwable throwable) {\r\n          bodyCF.completeExceptionally(throwable);\r\n        }\r\n    \r\n        @Override\r\n        public void onComplete() {\r\n          bodyCF.complete(asString(responseData));\r\n        }\r\n    \r\n        private String asString(List&lt;ByteBuffer&gt; buffers) {\r\n          return new String(toBytes(buffers), StandardCharsets.UTF_8);\r\n        }\r\n    \r\n        private byte[] toBytes(List&lt;ByteBuffer&gt; buffers) {\r\n          int size = buffers.stream()\r\n              .mapToInt(ByteBuffer::remaining)\r\n              .sum();\r\n          byte[] bs = new byte[size];\r\n          int offset = 0;\r\n          for (ByteBuffer buffer : buffers) {\r\n            int remaining = buffer.remaining();\r\n            buffer.get(bs, offset, remaining);\r\n            offset += remaining;\r\n          }\r\n          return bs;\r\n        }\r\n    \r\n      }\r\n    }\r\n\r\n### Trying it out\r\n\r\nTo test this solution, you&#39;ll need a server that sends a response that uses `Transfer-encoding: chunked` and sends it slow enough to watch the chunks arrive. I&#39;ve created one at &lt;https://github.com/hohonuuli/demo-chunk-server&gt; but you can spin it up using Docker like so:\r\n\r\n`docker run -p 8080:8080 hohonuuli/demo-chunk-server`\r\n\r\nThen run the CustomSubscriber.java code using `java CustomSubscriber.java http://localhost:8080/chunk/10`","title":"How do you read and print a chunked HTTP response using java.net.http as chunks arrive?","body":"<p>Thanks to @pavel and @chegar999 for their partial answers. They led me to my solution.</p>\n\n<h3>Overview</h3>\n\n<p>The solution I came up with is below. Basically, the solution is to use a custom <code>java.net.http.HttpResponse.BodySubscriber</code>. A BodySubscriber contains reactive methods (onSubscribe, onNext, onError, and onComplete) and a getBody method that basically returns a java <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html\" rel=\"nofollow noreferrer\">CompletableFuture</a> that will eventually produce the body of the HTTP request. Once you have your BodySubscriber in hand you can use it like:</p>\n\n<pre><code>HttpClient client = HttpClient.newHttpClient();\nHttpRequest request = HttpRequest.newBuilder()\n    .uri(URI.create(uri))\n    .build();\n\nreturn client.sendAsync(request, responseInfo -&gt; new StringSubscriber())\n    .whenComplete((r, t) -&gt; System.out.println(\"--- Status code \" + r.statusCode()))\n    .thenApply(HttpResponse::body);\n</code></pre>\n\n<p>Note the line:</p>\n\n<p><code>client.sendAsync(request, responseInfo -&gt; new StringSubscriber())</code></p>\n\n<p>That's where we register our custom BodySubscriber; in this case, my custom class is named <code>StringSubscriber</code>.</p>\n\n<h3>CustomSubscriber.java</h3>\n\n<p>This is a complete working example. Using Java 11, you can run it without compiling it. Just past it into a file named <code>CustomSubscriber.java</code>, then run the command <code>java CustomSubscriber &lt;some url&gt;</code>. It prints the contents of each chunk as it arrives. It also collects them and returns them as the body when the response has completed.</p>\n\n<pre><code>import java.net.http.HttpClient;\nimport java.net.http.HttpRequest;\nimport java.net.http.HttpResponse;\nimport java.net.http.HttpResponse.BodyHandlers;\nimport java.net.http.HttpResponse.BodySubscriber;\nimport java.net.URI;\nimport java.nio.ByteBuffer;\nimport java.nio.charset.StandardCharsets;\nimport java.util.ArrayList;\nimport java.util.concurrent.CompletableFuture;\nimport java.util.concurrent.CompletionStage;\nimport java.util.concurrent.CopyOnWriteArrayList;\nimport java.util.concurrent.Flow;\nimport java.util.stream.Collectors;\nimport java.util.List;\n\npublic class CustomSubscriber {\n\n  public static void main(String[] args) {\n    CustomSubscriber cs = new CustomSubscriber();\n    String body = cs.get(args[0]).join();\n    System.out.println(\"--- Response body:\\n: ...\" + body + \"...\");\n  }\n\n  public CompletableFuture&lt;String&gt; get(String uri) {\n    HttpClient client = HttpClient.newHttpClient();\n    HttpRequest request = HttpRequest.newBuilder()\n        .uri(URI.create(uri))\n        .build();\n\n    return client.sendAsync(request, responseInfo -&gt; new StringSubscriber())\n        .whenComplete((r, t) -&gt; System.out.println(\"--- Status code \" + r.statusCode()))\n        .thenApply(HttpResponse::body);\n  }\n\n  static class StringSubscriber implements BodySubscriber&lt;String&gt; {\n\n    final CompletableFuture&lt;String&gt; bodyCF = new CompletableFuture&lt;&gt;();\n    Flow.Subscription subscription;\n    List&lt;ByteBuffer&gt; responseData = new CopyOnWriteArrayList&lt;&gt;();\n\n    @Override\n    public CompletionStage&lt;String&gt; getBody() {\n      return bodyCF;\n    }\n\n    @Override\n    public void onSubscribe(Flow.Subscription subscription) {\n      this.subscription = subscription;\n      subscription.request(1); // Request first item\n    }\n\n    @Override\n    public void onNext(List&lt;ByteBuffer&gt; buffers) {\n      System.out.println(\"-- onNext \" + buffers);\n      try {\n        System.out.println(\"\\tBuffer Content:\\n\" + asString(buffers));\n      } \n      catch (Exception e) {\n        System.out.println(\"\\tUnable to print buffer content\");\n      }\n      buffers.forEach(ByteBuffer::rewind); // Rewind after reading\n      responseData.addAll(buffers);\n      subscription.request(1); // Request next item\n    }\n\n    @Override\n    public void onError(Throwable throwable) {\n      bodyCF.completeExceptionally(throwable);\n    }\n\n    @Override\n    public void onComplete() {\n      bodyCF.complete(asString(responseData));\n    }\n\n    private String asString(List&lt;ByteBuffer&gt; buffers) {\n      return new String(toBytes(buffers), StandardCharsets.UTF_8);\n    }\n\n    private byte[] toBytes(List&lt;ByteBuffer&gt; buffers) {\n      int size = buffers.stream()\n          .mapToInt(ByteBuffer::remaining)\n          .sum();\n      byte[] bs = new byte[size];\n      int offset = 0;\n      for (ByteBuffer buffer : buffers) {\n        int remaining = buffer.remaining();\n        buffer.get(bs, offset, remaining);\n        offset += remaining;\n      }\n      return bs;\n    }\n\n  }\n}\n</code></pre>\n\n<h3>Trying it out</h3>\n\n<p>To test this solution, you'll need a server that sends a response that uses <code>Transfer-encoding: chunked</code> and sends it slow enough to watch the chunks arrive. I've created one at <a href=\"https://github.com/hohonuuli/demo-chunk-server\" rel=\"nofollow noreferrer\">https://github.com/hohonuuli/demo-chunk-server</a> but you can spin it up using Docker like so:</p>\n\n<p><code>docker run -p 8080:8080 hohonuuli/demo-chunk-server</code></p>\n\n<p>Then run the CustomSubscriber.java code using <code>java CustomSubscriber.java http://localhost:8080/chunk/10</code></p>\n"},{"comments":[{"owner":{"account_id":357186,"reputation":1764,"user_id":697188,"accept_rate":90,"display_name":"Michael Welch"},"score":2,"creation_date":1603486196,"post_id":64506742,"comment_id":114063073,"body_markdown":"did the original question even mention JSON as the content type of the responses?","body":"did the original question even mention JSON as the content type of the responses?"}],"tags":[],"owner":{"account_id":11697848,"reputation":1,"user_id":8563987,"display_name":"Mohamed Aly"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1603484093,"creation_date":1603484093,"answer_id":64506742,"question_id":52669764,"body_markdown":"There is now a new Java library to address this kind of requirements\r\nRxSON: &lt;https://github.com/rxson/rxson&gt;\r\nIt utilizes the JsonPath wit RxJava to read JSON streamed chunks from the response as soon as they arrive, and parse them to java objects.\r\n\r\nExample:\r\n```\r\nString serviceURL = &quot;https://think.cs.vt.edu/corgis/datasets/json/airlines/airlines.json&quot;;\r\n   HttpRequest req = HttpRequest.newBuilder(URI.create(serviceURL)).GET().build();\r\n   RxSON rxson = new RxSON.Builder().build();\r\n\r\n   String jsonPath = &quot;$[*].Airport.Name&quot;;\r\n   Flowable&lt;String&gt; airportStream = rxson.create(String.class, req, jsonPath);\r\n   airportStream\r\n       .doOnNext(it -&gt; System.out.println(&quot;Received new item: &quot; + it))\r\n       //Just for test\r\n       .toList()\r\n       .blockingGet();\r\n```","title":"How do you read and print a chunked HTTP response using java.net.http as chunks arrive?","body":"<p>There is now a new Java library to address this kind of requirements\nRxSON: <a href=\"https://github.com/rxson/rxson\" rel=\"nofollow noreferrer\">https://github.com/rxson/rxson</a>\nIt utilizes the JsonPath wit RxJava to read JSON streamed chunks from the response as soon as they arrive, and parse them to java objects.</p>\n<p>Example:</p>\n<pre><code>String serviceURL = &quot;https://think.cs.vt.edu/corgis/datasets/json/airlines/airlines.json&quot;;\n   HttpRequest req = HttpRequest.newBuilder(URI.create(serviceURL)).GET().build();\n   RxSON rxson = new RxSON.Builder().build();\n\n   String jsonPath = &quot;$[*].Airport.Name&quot;;\n   Flowable&lt;String&gt; airportStream = rxson.create(String.class, req, jsonPath);\n   airportStream\n       .doOnNext(it -&gt; System.out.println(&quot;Received new item: &quot; + it))\n       //Just for test\n       .toList()\n       .blockingGet();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":207965,"reputation":3704,"user_id":458157,"accept_rate":75,"display_name":"gouessej"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693571237,"creation_date":1693571237,"answer_id":77023117,"question_id":52669764,"body_markdown":"This is a trivial solution based on chegar999&#39;s answer:\r\n\r\n    httpClient.send(httpRequest, HttpResponse.BodyHandlers.ofByteArrayConsumer((final Optional&lt;byte[]&gt; receivedBytesOptional) -&gt; {\r\n        if (receivedBytesOptional.isEmpty()) {\r\n            System.out.println(&quot;Done&quot;);\r\n        } else {\r\n            final byte[] receivedBytes = receivedBytesOptional.get();\r\n            final String received = new String(receivedBytes, StandardCharsets.UTF_8);\r\n            System.out.println(&quot;Received: &quot; + received);\r\n        }\r\n    }));\r\n\r\nIt works as long as your multi-byte characters aren&#39;t divided into two chunks (otherwise, use `java.nio.charset.CharsetDecoder#decode()`).\r\n\r\nIn my humble opinion, it&#39;s easier and less error prone than using a custom subscriber, which is more suitable in cases that require more flexibility.","title":"How do you read and print a chunked HTTP response using java.net.http as chunks arrive?","body":"<p>This is a trivial solution based on chegar999's answer:</p>\n<pre><code>httpClient.send(httpRequest, HttpResponse.BodyHandlers.ofByteArrayConsumer((final Optional&lt;byte[]&gt; receivedBytesOptional) -&gt; {\n    if (receivedBytesOptional.isEmpty()) {\n        System.out.println(&quot;Done&quot;);\n    } else {\n        final byte[] receivedBytes = receivedBytesOptional.get();\n        final String received = new String(receivedBytes, StandardCharsets.UTF_8);\n        System.out.println(&quot;Received: &quot; + received);\n    }\n}));\n</code></pre>\n<p>It works as long as your multi-byte characters aren't divided into two chunks (otherwise, use <code>java.nio.charset.CharsetDecoder#decode()</code>).</p>\n<p>In my humble opinion, it's easier and less error prone than using a custom subscriber, which is more suitable in cases that require more flexibility.</p>\n"}],"owner":{"account_id":19407,"reputation":1974,"user_id":45483,"display_name":"hohonuuli"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6234,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":53057925,"answer_count":5,"score":1,"last_activity_date":1693571237,"creation_date":1538756562,"question_id":52669764,"body_markdown":"Java 11 introduces a new package, `java.net.http`, for making HTTP requests. For general usage, it&#39;s pretty straight forward.\r\n\r\nMy question is: how do I use `java.net.http` to handle chunked responses as each chunk is received by the client?\r\n\r\n`java.http.net` contains a reactive `BodySubscriber` which appears to be what I want, but I can&#39;t find an example of how it&#39;s used.\r\n\r\n### http_get_demo.py\r\n\r\nBelow is a python implementation that prints chunks as they arrive, I&#39;d like to the same thing with java.net.http:\r\n\r\n    import argparse\r\n    import requests\r\n    \r\n    \r\n    def main(url: str):\r\n        with requests.get(url, stream=True) as r:\r\n            for c in r.iter_content(chunk_size=1):\r\n                print(c.decode(&quot;UTF-8&quot;), end=&quot;&quot;)\r\n    \r\n    \r\n    if __name__ == &quot;__main__&quot;:\r\n        parser = argparse.ArgumentParser(\r\n            description=&quot;Read from a URL and print as text as chunks arrive&quot;)\r\n        parser.add_argument(&#39;url&#39;, type=str, help=&quot;A URL to read from&quot;)\r\n        args = parser.parse_args()\r\n    \r\n        main(args.url)\r\n\r\n\r\n### HttpGetDemo.java\r\n\r\nJust for completeness, here&#39;s a simple example of making a blocking request using java.net.http:\r\n\r\n\r\n    import java.net.URI;\r\n    import java.net.http.HttpClient;\r\n    import java.net.http.HttpResponse;\r\n    import java.net.http.HttpRequest;\r\n    \r\n    public class HttpGetDemo {\r\n    \r\n      public static void main(String[] args) throws Exception {\r\n    \r\n        var request = HttpRequest.newBuilder()\r\n                .uri(URI.create(args[0]))\r\n                .build();\r\n    \r\n        var bodyHandler = HttpResponse.BodyHandlers\r\n                .ofString();\r\n    \r\n        var client = HttpClient.newHttpClient();\r\n        var response = client.send(request, bodyHandler);\r\n        System.out.println(response.body());\r\n    \r\n      }\r\n    }\r\n\r\n\r\n### HttpAsyncGetDemo.java\r\n\r\n\r\nAnd here&#39;s the example making an non-blocking/async request:\r\n\r\n    import java.net.URI;\r\n    import java.net.http.HttpClient;\r\n    import java.net.http.HttpResponse;\r\n    import java.net.http.HttpRequest;\r\n    \r\n    /**\r\n     * ReadChunked\r\n     */\r\n    public class HttpAsyncGetDemo {\r\n    \r\n      public static void main(String[] args) throws Exception {\r\n    \r\n        var request = HttpRequest.newBuilder()\r\n                .uri(URI.create(args[0]))\r\n                .build();\r\n\r\n        var bodyHandler = HttpResponse.BodyHandlers\r\n                .ofString();\r\n\r\n        var client = HttpClient.newHttpClient();\r\n    \r\n        client.sendAsync(request, bodyHandler)\r\n                .thenApply(HttpResponse::body)\r\n                .thenAccept(System.out::println)\r\n                .join();\r\n    \r\n      }\r\n    }\r\n","title":"How do you read and print a chunked HTTP response using java.net.http as chunks arrive?","body":"<p>Java 11 introduces a new package, <code>java.net.http</code>, for making HTTP requests. For general usage, it's pretty straight forward.</p>\n\n<p>My question is: how do I use <code>java.net.http</code> to handle chunked responses as each chunk is received by the client?</p>\n\n<p><code>java.http.net</code> contains a reactive <code>BodySubscriber</code> which appears to be what I want, but I can't find an example of how it's used.</p>\n\n<h3>http_get_demo.py</h3>\n\n<p>Below is a python implementation that prints chunks as they arrive, I'd like to the same thing with java.net.http:</p>\n\n<pre><code>import argparse\nimport requests\n\n\ndef main(url: str):\n    with requests.get(url, stream=True) as r:\n        for c in r.iter_content(chunk_size=1):\n            print(c.decode(\"UTF-8\"), end=\"\")\n\n\nif __name__ == \"__main__\":\n    parser = argparse.ArgumentParser(\n        description=\"Read from a URL and print as text as chunks arrive\")\n    parser.add_argument('url', type=str, help=\"A URL to read from\")\n    args = parser.parse_args()\n\n    main(args.url)\n</code></pre>\n\n<h3>HttpGetDemo.java</h3>\n\n<p>Just for completeness, here's a simple example of making a blocking request using java.net.http:</p>\n\n<pre><code>import java.net.URI;\nimport java.net.http.HttpClient;\nimport java.net.http.HttpResponse;\nimport java.net.http.HttpRequest;\n\npublic class HttpGetDemo {\n\n  public static void main(String[] args) throws Exception {\n\n    var request = HttpRequest.newBuilder()\n            .uri(URI.create(args[0]))\n            .build();\n\n    var bodyHandler = HttpResponse.BodyHandlers\n            .ofString();\n\n    var client = HttpClient.newHttpClient();\n    var response = client.send(request, bodyHandler);\n    System.out.println(response.body());\n\n  }\n}\n</code></pre>\n\n<h3>HttpAsyncGetDemo.java</h3>\n\n<p>And here's the example making an non-blocking/async request:</p>\n\n<pre><code>import java.net.URI;\nimport java.net.http.HttpClient;\nimport java.net.http.HttpResponse;\nimport java.net.http.HttpRequest;\n\n/**\n * ReadChunked\n */\npublic class HttpAsyncGetDemo {\n\n  public static void main(String[] args) throws Exception {\n\n    var request = HttpRequest.newBuilder()\n            .uri(URI.create(args[0]))\n            .build();\n\n    var bodyHandler = HttpResponse.BodyHandlers\n            .ofString();\n\n    var client = HttpClient.newHttpClient();\n\n    client.sendAsync(request, bodyHandler)\n            .thenApply(HttpResponse::body)\n            .thenAccept(System.out::println)\n            .join();\n\n  }\n}\n</code></pre>\n"},{"tags":["java","spring","ntlm","apache-httpclient-5.x"],"comments":[{"owner":{"account_id":356850,"reputation":18179,"user_id":696632,"accept_rate":62,"display_name":"Michael-O"},"score":1,"creation_date":1636633163,"post_id":69928144,"comment_id":123612194,"body_markdown":"NTLM is authentication not authorization","body":"NTLM is authentication not authorization"},{"owner":{"account_id":356850,"reputation":18179,"user_id":696632,"accept_rate":62,"display_name":"Michael-O"},"score":0,"creation_date":1636633218,"post_id":69928144,"comment_id":123612217,"body_markdown":"Well, NTLM is crap. You need to leverage expect continue header to cope with non-repeatable requests.","body":"Well, NTLM is crap. You need to leverage expect continue header to cope with non-repeatable requests."},{"owner":{"account_id":3572259,"reputation":146,"user_id":2982299,"display_name":"maximusKon"},"score":0,"creation_date":1636635349,"post_id":69928144,"comment_id":123613079,"body_markdown":"@Michael-O how exactly expect continue header could help? I tried to add Expect: 100-Continue, but nothing is changed.","body":"@Michael-O how exactly expect continue header could help? I tried to add Expect: 100-Continue, but nothing is changed."},{"owner":{"account_id":356850,"reputation":18179,"user_id":696632,"accept_rate":62,"display_name":"Michael-O"},"score":0,"creation_date":1636635605,"post_id":69928144,"comment_id":123613189,"body_markdown":"First of all, you need to do it [here](https://www.javadoc.io/static/org.apache.httpcomponents/httpclient/4.5.5/org/apache/http/client/config/RequestConfig.Builder.html#setExpectContinueEnabled(boolean)). The benefit of this is the client does *not* send the body, but the headers only and asks the server to evaluate them. So the server will tell you please authenticate first and keep the request body for you.","body":"First of all, you need to do it <a href=\"https://www.javadoc.io/static/org.apache.httpcomponents/httpclient/4.5.5/org/apache/http/client/config/RequestConfig.Builder.html#setExpectContinueEnabled(boolean)\" rel=\"nofollow noreferrer\">here</a>. The benefit of this is the client does <i>not</i> send the body, but the headers only and asks the server to evaluate them. So the server will tell you please authenticate first and keep the request body for you."},{"owner":{"account_id":3572259,"reputation":146,"user_id":2982299,"display_name":"maximusKon"},"score":0,"creation_date":1636639904,"post_id":69928144,"comment_id":123615102,"body_markdown":"@Michael-O Still the same result. I added code snippet of my prototype to question.","body":"@Michael-O Still the same result. I added code snippet of my prototype to question."},{"owner":{"account_id":356850,"reputation":18179,"user_id":696632,"accept_rate":62,"display_name":"Michael-O"},"score":0,"creation_date":1636641651,"post_id":69928144,"comment_id":123615898,"body_markdown":"NTLM requires the NetBIOS domain to be provided. If nothing works you need to provide full debug logs to us.","body":"NTLM requires the NetBIOS domain to be provided. If nothing works you need to provide full debug logs to us."},{"owner":{"account_id":133909,"reputation":26610,"user_id":335638,"display_name":"ok2c"},"score":0,"creation_date":1636660962,"post_id":69928144,"comment_id":123623332,"body_markdown":"Do a cheap GET or HEAD first.","body":"Do a cheap GET or HEAD first."},{"owner":{"account_id":5644474,"reputation":451,"user_id":4467091,"display_name":"Oleg Maksymuk"},"score":0,"creation_date":1693905590,"post_id":69928144,"comment_id":135817708,"body_markdown":"please check my answer here:\nhttps://stackoverflow.com/questions/74575496/spring-webclient-windows-ntlm-authentication/77021558#77021558","body":"please check my answer here: <a href=\"https://stackoverflow.com/questions/74575496/spring-webclient-windows-ntlm-authentication/77021558#77021558\" title=\"spring webclient windows ntlm authentication\">stackoverflow.com/questions/74575496/&hellip;</a>"}],"owner":{"account_id":3572259,"reputation":146,"user_id":2982299,"display_name":"maximusKon"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":882,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1693571140,"creation_date":1636632876,"question_id":69928144,"body_markdown":"I try to execute HTTP requests using [Apache HttpClient 5][1] and I need NTLM authentication, which is supported by this client out of the box. But when I try to use it with Spring WebClient by HttpComponentsClientHttpConnector, there is an issue.\r\n\r\n[HttpComponentsClientHttpConnector][2] initializes [HttpComponentsClientHttpRequest][3] to execute request. But if the request has a body, [HttpComponentsClientHttpRequest][3] initializes ReactiveEntityProducer, which is not repeatable, so that, while I need [to execute 3 requests to authenticatу using NTLM][4], only one actually happens.\r\n\r\nIs it possible to change this behavior?\r\n\r\n**UPDATE**\r\n\r\nAdded my prototype java-code:\r\n\r\n```java\r\nBasicCredentialsProvider credsProvider = new BasicCredentialsProvider();\r\ncredsProvider.setCredentials(\r\n    new AuthScope(&quot;https&quot;, &quot;some-host&quot;, 443, null, StandardAuthScheme.NTLM),\r\n    new NTCredentials(&quot;test-user&quot;, &quot;test-password&quot;.toCharArray(), null, null)\r\n);\r\n\r\nWebClient webClient = WebClient.builder()\r\n    .clientConnector(new HttpComponentsClientHttpConnector\r\n        (HttpAsyncClients\r\n            .custom()\r\n            .setDefaultCredentialsProvider(credsProvider)\r\n            .setTargetAuthenticationStrategy(DefaultAuthenticationStrategy.INSTANCE)\r\n            .setDefaultRequestConfig(\r\n                RequestConfig.custom()\r\n                    .setAuthenticationEnabled(true)\r\n                    .setTargetPreferredAuthSchemes(Collections.singletonList(StandardAuthScheme.NTLM))\r\n                    .setExpectContinueEnabled(true)\r\n                    .build())\r\n            .build()))\r\n    .build();\r\n\r\nwebClient\r\n    .method(HttpMethod.POST)\r\n    .uri(&quot;https://some-host/execute&quot;)\r\n    .header(&quot;Content-Type&quot;, &quot;text/xml; charset=utf-8&quot;)\r\n    .header(&quot;SOAPAction&quot;, &quot;http://schemas.microsoft.com/exchange/services/2006/messagesCreateItem&quot;)\r\n    .header(&quot;Accept-Encoding&quot;, &quot;gzip, deflate, br&quot;)\r\n    .header(&quot;Accept-Language&quot;, &quot;ru-RU,ru;q=0.9,en-US;q=0.8,en;q=0.7&quot;)\r\n    .header(&quot;Expect&quot;, &quot;100-continue&quot;)\r\n    .body(BodyInserters.fromValue(\r\n        &quot;&lt;SOME_XML_BODY&gt;&quot;\r\n    ))\r\n    .exchangeToMono(clientResponse -&gt; {\r\n        return clientResponse.bodyToMono(Object.class);\r\n    })\r\n    .subscribe();\r\n```\r\n\r\n  [1]: https://hc.apache.org/httpcomponents-client-5.1.x/\r\n  [2]: https://github.com/spring-projects/spring-framework/blob/main/spring-web/src/main/java/org/springframework/http/client/reactive/HttpComponentsClientHttpConnector.java\r\n  [3]: https://github.com/spring-projects/spring-framework/blob/main/spring-web/src/main/java/org/springframework/http/client/reactive/HttpComponentsClientHttpRequest.java\r\n  [4]: http://davenport.sourceforge.net/ntlm.html","title":"Problem with NTLM authentication on executing http request by Spring WebClient and HttpComponentsClientHttpConnector","body":"<p>I try to execute HTTP requests using <a href=\"https://hc.apache.org/httpcomponents-client-5.1.x/\" rel=\"nofollow noreferrer\">Apache HttpClient 5</a> and I need NTLM authentication, which is supported by this client out of the box. But when I try to use it with Spring WebClient by HttpComponentsClientHttpConnector, there is an issue.</p>\n<p><a href=\"https://github.com/spring-projects/spring-framework/blob/main/spring-web/src/main/java/org/springframework/http/client/reactive/HttpComponentsClientHttpConnector.java\" rel=\"nofollow noreferrer\">HttpComponentsClientHttpConnector</a> initializes <a href=\"https://github.com/spring-projects/spring-framework/blob/main/spring-web/src/main/java/org/springframework/http/client/reactive/HttpComponentsClientHttpRequest.java\" rel=\"nofollow noreferrer\">HttpComponentsClientHttpRequest</a> to execute request. But if the request has a body, <a href=\"https://github.com/spring-projects/spring-framework/blob/main/spring-web/src/main/java/org/springframework/http/client/reactive/HttpComponentsClientHttpRequest.java\" rel=\"nofollow noreferrer\">HttpComponentsClientHttpRequest</a> initializes ReactiveEntityProducer, which is not repeatable, so that, while I need <a href=\"http://davenport.sourceforge.net/ntlm.html\" rel=\"nofollow noreferrer\">to execute 3 requests to authenticatу using NTLM</a>, only one actually happens.</p>\n<p>Is it possible to change this behavior?</p>\n<p><strong>UPDATE</strong></p>\n<p>Added my prototype java-code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>BasicCredentialsProvider credsProvider = new BasicCredentialsProvider();\ncredsProvider.setCredentials(\n    new AuthScope(&quot;https&quot;, &quot;some-host&quot;, 443, null, StandardAuthScheme.NTLM),\n    new NTCredentials(&quot;test-user&quot;, &quot;test-password&quot;.toCharArray(), null, null)\n);\n\nWebClient webClient = WebClient.builder()\n    .clientConnector(new HttpComponentsClientHttpConnector\n        (HttpAsyncClients\n            .custom()\n            .setDefaultCredentialsProvider(credsProvider)\n            .setTargetAuthenticationStrategy(DefaultAuthenticationStrategy.INSTANCE)\n            .setDefaultRequestConfig(\n                RequestConfig.custom()\n                    .setAuthenticationEnabled(true)\n                    .setTargetPreferredAuthSchemes(Collections.singletonList(StandardAuthScheme.NTLM))\n                    .setExpectContinueEnabled(true)\n                    .build())\n            .build()))\n    .build();\n\nwebClient\n    .method(HttpMethod.POST)\n    .uri(&quot;https://some-host/execute&quot;)\n    .header(&quot;Content-Type&quot;, &quot;text/xml; charset=utf-8&quot;)\n    .header(&quot;SOAPAction&quot;, &quot;http://schemas.microsoft.com/exchange/services/2006/messagesCreateItem&quot;)\n    .header(&quot;Accept-Encoding&quot;, &quot;gzip, deflate, br&quot;)\n    .header(&quot;Accept-Language&quot;, &quot;ru-RU,ru;q=0.9,en-US;q=0.8,en;q=0.7&quot;)\n    .header(&quot;Expect&quot;, &quot;100-continue&quot;)\n    .body(BodyInserters.fromValue(\n        &quot;&lt;SOME_XML_BODY&gt;&quot;\n    ))\n    .exchangeToMono(clientResponse -&gt; {\n        return clientResponse.bodyToMono(Object.class);\n    })\n    .subscribe();\n</code></pre>\n"},{"tags":["java","spring-boot","spring-webclient"],"owner":{"account_id":325224,"reputation":34820,"user_id":646276,"accept_rate":61,"display_name":"Lolly"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":433,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1693607551,"answer_count":0,"score":1,"last_activity_date":1693571120,"creation_date":1662647655,"question_id":73650844,"body_markdown":"I am using Spring WebClient to hit a Rest Service which requires NTLM Authentication. It works in Postman like below:\r\n\r\n1. Hit the URL - http://example.com:83/api/auth/token with authentication as NTLM authentication and provide the user name and password. When hitting this service, it returns a token.\r\n2. This token has to be passed in header as bearer token for the actual post service - \r\nhttp://example.com:89/api/v1/employee\r\n\r\nBut when I tried the same using Spring WebClient, I am facing `401 - Unauthorized error`. Below the code snippet I am using.\r\n\r\n    BasicCredentialsProvider tokenProvider = new BasicCredentialsProvider();\r\n        tokenProvider.setCredentials(\r\n            new AuthScope(&quot;http&quot;, &quot;example.com&quot;, 83, &quot;/api/auth/token&quot;, StandardAuthScheme.NTLM),\r\n            new NTCredentials(&quot;testuser&quot;, &quot;pwd&quot;.toCharArray(), null, null)\r\n        );\r\n        webClient = WebClient.builder()\r\n            .clientConnector(new HttpComponentsClientHttpConnector\r\n                (HttpAsyncClients\r\n                    .custom()\r\n                    .setDefaultCredentialsProvider(tokenProvider)\r\n                    .setTargetAuthenticationStrategy(DefaultAuthenticationStrategy.INSTANCE)\r\n                    .setDefaultRequestConfig(\r\n                        RequestConfig.custom()\r\n                            .setAuthenticationEnabled(true)\r\n                   .setTargetPreferredAuthSchemes(Collections.singletonList(StandardAuthScheme.NTLM))\r\n                            .setExpectContinueEnabled(true)\r\n                            .build())\r\n                    .build()))\r\n            .build();\r\n    \r\n        ParameterizedTypeReference&lt;LinkedHashMap&lt;String, Object&gt;&gt; result =\r\n            new ParameterizedTypeReference&lt;LinkedHashMap&lt;String, Object&gt;&gt;() {};\r\n    \r\n        Map&lt;String, Object&gt; body = new HashMap&lt;&gt;();\r\n        body.put(&quot;test-key&quot;, &quot;value&quot;);\r\n        webClient.post().uri(&quot;http://example.com:89/api/v1/employee&quot;).contentType(MediaType.APPLICATION_JSON).accept(MediaType.ALL).bodyValue(body).retrieve().bodyToMono(result).block();\r\n\r\nIs this right approach?\r\n","title":"Spring Boot Webclient with NTLM Authentication","body":"<p>I am using Spring WebClient to hit a Rest Service which requires NTLM Authentication. It works in Postman like below:</p>\n<ol>\n<li>Hit the URL - <a href=\"http://example.com:83/api/auth/token\" rel=\"nofollow noreferrer\">http://example.com:83/api/auth/token</a> with authentication as NTLM authentication and provide the user name and password. When hitting this service, it returns a token.</li>\n<li>This token has to be passed in header as bearer token for the actual post service -\n<a href=\"http://example.com:89/api/v1/employee\" rel=\"nofollow noreferrer\">http://example.com:89/api/v1/employee</a></li>\n</ol>\n<p>But when I tried the same using Spring WebClient, I am facing <code>401 - Unauthorized error</code>. Below the code snippet I am using.</p>\n<pre><code>BasicCredentialsProvider tokenProvider = new BasicCredentialsProvider();\n    tokenProvider.setCredentials(\n        new AuthScope(&quot;http&quot;, &quot;example.com&quot;, 83, &quot;/api/auth/token&quot;, StandardAuthScheme.NTLM),\n        new NTCredentials(&quot;testuser&quot;, &quot;pwd&quot;.toCharArray(), null, null)\n    );\n    webClient = WebClient.builder()\n        .clientConnector(new HttpComponentsClientHttpConnector\n            (HttpAsyncClients\n                .custom()\n                .setDefaultCredentialsProvider(tokenProvider)\n                .setTargetAuthenticationStrategy(DefaultAuthenticationStrategy.INSTANCE)\n                .setDefaultRequestConfig(\n                    RequestConfig.custom()\n                        .setAuthenticationEnabled(true)\n               .setTargetPreferredAuthSchemes(Collections.singletonList(StandardAuthScheme.NTLM))\n                        .setExpectContinueEnabled(true)\n                        .build())\n                .build()))\n        .build();\n\n    ParameterizedTypeReference&lt;LinkedHashMap&lt;String, Object&gt;&gt; result =\n        new ParameterizedTypeReference&lt;LinkedHashMap&lt;String, Object&gt;&gt;() {};\n\n    Map&lt;String, Object&gt; body = new HashMap&lt;&gt;();\n    body.put(&quot;test-key&quot;, &quot;value&quot;);\n    webClient.post().uri(&quot;http://example.com:89/api/v1/employee&quot;).contentType(MediaType.APPLICATION_JSON).accept(MediaType.ALL).bodyValue(body).retrieve().bodyToMono(result).block();\n</code></pre>\n<p>Is this right approach?</p>\n"},{"tags":["java","hibernate","postgresql","jdbc","ubuntu-14.04"],"comments":[{"owner":{"account_id":2468465,"reputation":143,"user_id":2215084,"accept_rate":17,"display_name":"nitishpisal"},"score":0,"creation_date":1456847035,"post_id":35725306,"comment_id":59129204,"body_markdown":"hibernate.cfg.xml is in the src folder itself","body":"hibernate.cfg.xml is in the src folder itself"},{"owner":{"account_id":9198997,"reputation":366,"user_id":6836704,"display_name":"eaccmk"},"score":0,"creation_date":1619881782,"post_id":35725306,"comment_id":119040585,"body_markdown":"Detailed Answer with screen shot to fix below (  https://stackoverflow.com/a/67347700/6836704 )","body":"Detailed Answer with screen shot to fix below (  <a href=\"https://stackoverflow.com/a/67347700/6836704\">stackoverflow.com/a/67347700/6836704</a> )"}],"answers":[{"comments":[{"owner":{"account_id":2468465,"reputation":143,"user_id":2215084,"accept_rate":17,"display_name":"nitishpisal"},"score":0,"creation_date":1456844615,"post_id":35725560,"comment_id":59127369,"body_markdown":"got few new exceptions after making changes","body":"got few new exceptions after making changes"},{"owner":{"account_id":4153318,"reputation":19445,"user_id":3405171,"display_name":"v.ladynev"},"score":0,"creation_date":1456845450,"post_id":35725560,"comment_id":59128027,"body_markdown":"@nitishpisal Add all this to the question.","body":"@nitishpisal Add all this to the question."},{"owner":{"account_id":2468465,"reputation":143,"user_id":2215084,"accept_rate":17,"display_name":"nitishpisal"},"score":0,"creation_date":1456845678,"post_id":35725560,"comment_id":59128207,"body_markdown":"done... could not add session.close() in finally block though","body":"done... could not add session.close() in finally block though"},{"owner":{"account_id":2468465,"reputation":143,"user_id":2215084,"accept_rate":17,"display_name":"nitishpisal"},"score":0,"creation_date":1456847290,"post_id":35725560,"comment_id":59129415,"body_markdown":"@v.ladynew how do I add my jar to classpath, I just copied the file from folder to the src as it was going inside referenced libraries","body":"@v.ladynew how do I add my jar to classpath, I just copied the file from folder to the src as it was going inside referenced libraries"}],"tags":[],"owner":{"account_id":4153318,"reputation":19445,"user_id":3405171,"display_name":"v.ladynev"},"comment_count":4,"down_vote_count":0,"up_vote_count":14,"is_accepted":true,"score":14,"last_activity_date":1532594752,"creation_date":1456842570,"answer_id":35725560,"question_id":35725306,"body_markdown":"If you have your `hibernate.cfg.xml` in the root of the source folder, just do \r\n\r\n    SessionFactory sessionFactory = new Configuration().configure().buildSessionFactory();\r\n\r\nIf it is in the package, for an example in the `org.nitish.caller`, specify path by this way\r\n\r\n     SessionFactory sessionFactory = new Configuration()\r\n        .configure(&quot;/org/nitish/caller/hibernate.cfg.xml&quot;).buildSessionFactory();\r\n\r\nYou need to close the `session` (in the `finally` block). Don&#39;t forget to add `rollback` code.\r\n\r\nPlease, add `@Table` annotation to the `UserDetails`.\r\n\r\n**Update**\r\n\r\nThe reason of the error that Hibernate can&#39;t find `org.postgresql.Driver` class. It resides in postgresql jar. You have that jar at your image, but may be you don&#39;t add it to the classpath. Refer [How to Add JARs to Project Build Paths in Eclipse (Java)](http://www.wikihow.com/Add-JARs-to-Project-Build-Paths-in-Eclipse-%28Java%29).\r\n\r\nTo close a `session` in the `finally` block you need to have `session` variable outside the `try` block.\r\n\r\n        Session session = sessionFactory.openSession();\r\n        \r\n        try{\r\n\r\n        } finally {\r\n            session.close();\r\n       }\r\n\r\n \r\n\r\n\r\n","title":"org.hibernate.internal.util.config.ConfigurationException: Could not locate cfg.xml resource [/HibernateTest/src/hibernate.cfg.xml]","body":"<p>If you have your <code>hibernate.cfg.xml</code> in the root of the source folder, just do </p>\n\n<pre><code>SessionFactory sessionFactory = new Configuration().configure().buildSessionFactory();\n</code></pre>\n\n<p>If it is in the package, for an example in the <code>org.nitish.caller</code>, specify path by this way</p>\n\n<pre><code> SessionFactory sessionFactory = new Configuration()\n    .configure(\"/org/nitish/caller/hibernate.cfg.xml\").buildSessionFactory();\n</code></pre>\n\n<p>You need to close the <code>session</code> (in the <code>finally</code> block). Don't forget to add <code>rollback</code> code.</p>\n\n<p>Please, add <code>@Table</code> annotation to the <code>UserDetails</code>.</p>\n\n<p><strong>Update</strong></p>\n\n<p>The reason of the error that Hibernate can't find <code>org.postgresql.Driver</code> class. It resides in postgresql jar. You have that jar at your image, but may be you don't add it to the classpath. Refer <a href=\"http://www.wikihow.com/Add-JARs-to-Project-Build-Paths-in-Eclipse-%28Java%29\" rel=\"noreferrer\">How to Add JARs to Project Build Paths in Eclipse (Java)</a>.</p>\n\n<p>To close a <code>session</code> in the <code>finally</code> block you need to have <code>session</code> variable outside the <code>try</code> block.</p>\n\n<pre><code>    Session session = sessionFactory.openSession();\n\n    try{\n\n    } finally {\n        session.close();\n   }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1645087,"reputation":3440,"user_id":1516759,"accept_rate":33,"display_name":"Visruth"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1486358577,"creation_date":1486358147,"answer_id":42060734,"question_id":35725306,"body_markdown":"`new Configuration().configure()` takes `hibernate.cfg.xml` from root of class path directory. `new Configuration().configure(&quot;/com/company/project/hibernate.cfg.xml&quot;)` takes from *root of class path + com/company/project/hibernate.cfg.xml*. \r\n\r\nIf you are using different file name for hibernate configuration from root of class path, then eg: `new Configuration().configure(&quot;/database.cfg.xml&quot;)`\r\n\r\nIf you want to give the full system path of the configuration file then `new Configuration().configure(new File(&quot;/home/visruth/config/hibernate.cfg.xml))` which takes the configuration file from the given exact location.\r\n\r\n","title":"org.hibernate.internal.util.config.ConfigurationException: Could not locate cfg.xml resource [/HibernateTest/src/hibernate.cfg.xml]","body":"<p><code>new Configuration().configure()</code> takes <code>hibernate.cfg.xml</code> from root of class path directory. <code>new Configuration().configure(\"/com/company/project/hibernate.cfg.xml\")</code> takes from <em>root of class path + com/company/project/hibernate.cfg.xml</em>. </p>\n\n<p>If you are using different file name for hibernate configuration from root of class path, then eg: <code>new Configuration().configure(\"/database.cfg.xml\")</code></p>\n\n<p>If you want to give the full system path of the configuration file then <code>new Configuration().configure(new File(\"/home/visruth/config/hibernate.cfg.xml))</code> which takes the configuration file from the given exact location.</p>\n"},{"tags":[],"owner":{"account_id":4020772,"reputation":1000,"user_id":3311216,"accept_rate":40,"display_name":"ASH"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1567581266,"creation_date":1520788367,"answer_id":49222782,"question_id":35725306,"body_markdown":"I fixed this by moving my config file to `src/main/resources`. This is the standard directory for configuration files like hibernate.cfg.xml or hibernate.properties or application related properties files.","title":"org.hibernate.internal.util.config.ConfigurationException: Could not locate cfg.xml resource [/HibernateTest/src/hibernate.cfg.xml]","body":"<p>I fixed this by moving my config file to <code>src/main/resources</code>. This is the standard directory for configuration files like hibernate.cfg.xml or hibernate.properties or application related properties files.</p>\n"},{"tags":[],"owner":{"account_id":5746167,"reputation":11,"user_id":4537361,"display_name":"Parth Mehta"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1532242602,"creation_date":1532242075,"answer_id":51462692,"question_id":35725306,"body_markdown":"All the previous answers are perfect. However, if u need a really quick solution then I would recommend you to just put your hibernate.cfg.xml file in your source folder and write  \r\n    \r\n    SessionFactory sessionFactory = new Configuration().configure(&quot;hibernate.cfg.xml&quot;).buildSessionFactory();\r\n\r\nThis is simple and works!","title":"org.hibernate.internal.util.config.ConfigurationException: Could not locate cfg.xml resource [/HibernateTest/src/hibernate.cfg.xml]","body":"<p>All the previous answers are perfect. However, if u need a really quick solution then I would recommend you to just put your hibernate.cfg.xml file in your source folder and write  </p>\n\n<pre><code>SessionFactory sessionFactory = new Configuration().configure(\"hibernate.cfg.xml\").buildSessionFactory();\n</code></pre>\n\n<p>This is simple and works!</p>\n"},{"tags":[],"owner":{"account_id":8154208,"reputation":4189,"user_id":6140314,"display_name":"Mohamed Anees A"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1534416518,"creation_date":1534416518,"answer_id":51875239,"question_id":35725306,"body_markdown":"    new Configuration().configure(new File(&quot;hibernate.cfg.xml&quot;)).buildSessionFactory());\r\n\r\nThis solved the error for me!","title":"org.hibernate.internal.util.config.ConfigurationException: Could not locate cfg.xml resource [/HibernateTest/src/hibernate.cfg.xml]","body":"<pre><code>new Configuration().configure(new File(\"hibernate.cfg.xml\")).buildSessionFactory());\n</code></pre>\n\n<p>This solved the error for me!</p>\n"},{"tags":[],"owner":{"account_id":6868647,"reputation":22259,"user_id":5279996,"display_name":"Braian Coronel"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1601203953,"creation_date":1601203953,"answer_id":64087629,"question_id":35725306,"body_markdown":"You have to use the absolute path of the file otherwise this will not work. Then with that path we build the file and pass it to the configuration.\r\n\r\n    private fun getFile(): File {\r\n        val currentWorkingDir = System.getProperty(&quot;user.dir&quot;)\r\n        val absoulutePath = &quot;$currentWorkingDir/src/main/resources/secret-hibernate.cfg.xml&quot;\r\n        println(&quot;Absolute Path of secret-hibernate.cfg.xml: $absoulutePath&quot;)\r\n        return File(absoulutePath)\r\n    }\r\n\r\nhttps://stackoverflow.com/a/64084771/5279996\r\n\r\nGL\r\n\r\n","title":"org.hibernate.internal.util.config.ConfigurationException: Could not locate cfg.xml resource [/HibernateTest/src/hibernate.cfg.xml]","body":"<p>You have to use the absolute path of the file otherwise this will not work. Then with that path we build the file and pass it to the configuration.</p>\n<pre><code>private fun getFile(): File {\n    val currentWorkingDir = System.getProperty(&quot;user.dir&quot;)\n    val absoulutePath = &quot;$currentWorkingDir/src/main/resources/secret-hibernate.cfg.xml&quot;\n    println(&quot;Absolute Path of secret-hibernate.cfg.xml: $absoulutePath&quot;)\n    return File(absoulutePath)\n}\n</code></pre>\n<p><a href=\"https://stackoverflow.com/a/64084771/5279996\">https://stackoverflow.com/a/64084771/5279996</a></p>\n<p>GL</p>\n"},{"tags":[],"owner":{"account_id":16563660,"reputation":1,"user_id":11968915,"display_name":"Shreyas K"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1614343931,"creation_date":1614343931,"answer_id":66386149,"question_id":35725306,"body_markdown":"Create a folder in src/main named &quot;resources&quot;\r\nPlace the hiberenate.cfg.xml file in it\r\nCreate the session factory object as\r\nSessionFactory factory = new Configuration().configure().buildSessionFactory();\r\n\r\nThis will successfully create the object\r\nYou can verify it by checking this should print false System.out.println(factory.isClosed());\r\n\r\nThis worked for me!\r\n","title":"org.hibernate.internal.util.config.ConfigurationException: Could not locate cfg.xml resource [/HibernateTest/src/hibernate.cfg.xml]","body":"<p>Create a folder in src/main named &quot;resources&quot;\nPlace the hiberenate.cfg.xml file in it\nCreate the session factory object as\nSessionFactory factory = new Configuration().configure().buildSessionFactory();</p>\n<p>This will successfully create the object\nYou can verify it by checking this should print false System.out.println(factory.isClosed());</p>\n<p>This worked for me!</p>\n"},{"tags":[],"owner":{"account_id":9198997,"reputation":366,"user_id":6836704,"display_name":"eaccmk"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1619881659,"creation_date":1619881659,"answer_id":67347700,"question_id":35725306,"body_markdown":"Answer is right there in the first line of error (question) , if you read carefully , it says : \r\n`Could not locate cfg.xml resource` &gt;&gt; **resource**\r\n\r\nSeems there was nothing found in `resource` or may be `resource` is not set-up correctly\r\n\r\nIf you are using IDE such as Intellij :\r\n - Make sure you save your `hibernate.cfg.xml` under **src/main/resources/**&lt;Your_config_xml_here&gt;\r\n &gt; example : **src/main/resources/hibernate.cfg.xml**\r\n\r\n - This is important ( I have personally faced this almost always during initial set up of java/maven..) \r\n &gt; So, make sure you mark `resources` directory as **Resources root** so that it looks  \r\nexample , look at this image\r\n \r\n|**How to mark a folder as Resources root**|\r\n|:--:|\r\n|![](https://i.stack.imgur.com/iVdGv.png)|\r\n\r\n\r\n |**Before**|**After** _(look at 3 lines)_|\r\n |:----:|:----:|\r\n | ![](https://i.stack.imgur.com/uX0hO.png)|![](https://i.stack.imgur.com/qwoeN.png)|\r\n\r\nNow compile and build :\r\nA new jar will be build linking all files with latest changes , and you will no more be complained of missing  `hibernate.cfg.xml`\r\n\r\n","title":"org.hibernate.internal.util.config.ConfigurationException: Could not locate cfg.xml resource [/HibernateTest/src/hibernate.cfg.xml]","body":"<p>Answer is right there in the first line of error (question) , if you read carefully , it says :\n<code>Could not locate cfg.xml resource</code> &gt;&gt; <strong>resource</strong></p>\n<p>Seems there was nothing found in <code>resource</code> or may be <code>resource</code> is not set-up correctly</p>\n<p>If you are using IDE such as Intellij :</p>\n<ul>\n<li>Make sure you save your <code>hibernate.cfg.xml</code> under <strong>src/main/resources/</strong>&lt;Your_config_xml_here&gt;</li>\n</ul>\n<blockquote>\n<p>example : <strong>src/main/resources/hibernate.cfg.xml</strong></p>\n</blockquote>\n<ul>\n<li>This is important ( I have personally faced this almost always during initial set up of java/maven..)</li>\n</ul>\n<blockquote>\n<p>So, make sure you mark <code>resources</code> directory as <strong>Resources root</strong> so that it looks<br />\nexample , look at this image</p>\n</blockquote>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th style=\"text-align: center;\"><strong>How to mark a folder as Resources root</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: center;\"><img src=\"https://i.stack.imgur.com/iVdGv.png\" alt=\"\" /></td>\n</tr>\n</tbody>\n</table>\n</div><div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th style=\"text-align: center;\"><strong>Before</strong></th>\n<th style=\"text-align: center;\"><strong>After</strong> <em>(look at 3 lines)</em></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: center;\"><img src=\"https://i.stack.imgur.com/uX0hO.png\" alt=\"\" /></td>\n<td style=\"text-align: center;\"><img src=\"https://i.stack.imgur.com/qwoeN.png\" alt=\"\" /></td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>Now compile and build :\nA new jar will be build linking all files with latest changes , and you will no more be complained of missing  <code>hibernate.cfg.xml</code></p>\n"},{"tags":[],"owner":{"account_id":17051306,"reputation":1854,"user_id":12336882,"display_name":"Hamada"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1620740847,"creation_date":1620740847,"answer_id":67488114,"question_id":35725306,"body_markdown":"Create a file in the **src** or **root directory** project, named: &quot;hibernate.cfg.xml&quot;.\r\n\r\n\r\n     &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n     &lt;!DOCTYPE hibernate-configuration PUBLIC &quot;-//Hibernate/Hibernate Configuration DTD 3.0//EN&quot; &quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;&gt;\r\n     &lt;hibernate-configuration&gt;\r\n       &lt;session-factory&gt;\r\n         &lt;property name=&quot;connection.driver_class&quot;&gt;com.mysql.jdbc.Driver&lt;/property&gt;\r\n         &lt;property name=&quot;connection.url&quot;&gt;jdbc:mysql://localhost/hibernate1&lt;/property&gt;     &lt;property name=&quot;connection.username&quot;&gt;hibernate1&lt;/property&gt;\r\n         &lt;property name=&quot;connection.password&quot;&gt;hibernate1&lt;/property&gt;\r\n         &lt;property name=&quot;dialect&quot;&gt;org.hibernate.dialect.MySQL5Dialect&lt;/property&gt;\r\n         &lt;property name=&quot;hibernate.show_sql&quot;&gt;true&lt;/property&gt;\r\n    \r\n       &lt;/session-factory&gt;\r\n     &lt;/hibernate-configuration&gt;\r\n\r\nIn your class\r\n\r\n \r\n\r\n      package io.yourPack;\r\n    \r\n    \r\n    import org.hibernate.Session;\r\n    import org.hibernate.SessionFactory;\r\n    import org.hibernate.cfg.Configuration;\r\n    \r\n    \r\n    public class hibernateClass  {\r\n    \t\r\n    \t public static void main(String[] args) {\r\n    \t\t \r\n    \t\t SessionFactory myFactory = new Configuration().configure(&quot;hibernate.cfg.xml&quot;).addAnnotatedClass(clima.class).buildSessionFactory();\r\n    \t\t\t\r\n    \t\t\tSession mySession = myFactory.openSession();\r\n    \t\t\t\r\n    \t\t\ttry {\r\n    \t\t\t\t\r\n    \t\t\t\tyourClass cl1 = new yourClass(&quot;java&quot;, &quot;1,2,3&quot;, 6);\r\n    \t\t\t\t\r\n    \t\t\t\tmySession.beginTransaction();\r\n    \t\t\t\t\r\n    \t\t\t\tmySession.save(cl1);\r\n    \t\t\t\t\r\n    \t\t\t\tmySession.getTransaction().commit();\r\n    \t\t\t\t\r\n    \t\t\t\tSystem.out.println(&quot;Inserted !!&quot;);\r\n    \t\t\t\t\r\n    \t\t\t\tmySession.close();\r\n    \t\t\t\t\r\n    \t\t\t}finally {\r\n    \t\t\t\tmyFactory.close();\r\n    \t\t\t}\r\n    \t\t \r\n    \t }\r\n    \t\r\n    \r\n    }\r\n\r\n","title":"org.hibernate.internal.util.config.ConfigurationException: Could not locate cfg.xml resource [/HibernateTest/src/hibernate.cfg.xml]","body":"<p>Create a file in the <strong>src</strong> or <strong>root directory</strong> project, named: &quot;hibernate.cfg.xml&quot;.</p>\n<pre><code> &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n &lt;!DOCTYPE hibernate-configuration PUBLIC &quot;-//Hibernate/Hibernate Configuration DTD 3.0//EN&quot; &quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;&gt;\n &lt;hibernate-configuration&gt;\n   &lt;session-factory&gt;\n     &lt;property name=&quot;connection.driver_class&quot;&gt;com.mysql.jdbc.Driver&lt;/property&gt;\n     &lt;property name=&quot;connection.url&quot;&gt;jdbc:mysql://localhost/hibernate1&lt;/property&gt;     &lt;property name=&quot;connection.username&quot;&gt;hibernate1&lt;/property&gt;\n     &lt;property name=&quot;connection.password&quot;&gt;hibernate1&lt;/property&gt;\n     &lt;property name=&quot;dialect&quot;&gt;org.hibernate.dialect.MySQL5Dialect&lt;/property&gt;\n     &lt;property name=&quot;hibernate.show_sql&quot;&gt;true&lt;/property&gt;\n\n   &lt;/session-factory&gt;\n &lt;/hibernate-configuration&gt;\n</code></pre>\n<p>In your class</p>\n<pre><code>  package io.yourPack;\n\n\nimport org.hibernate.Session;\nimport org.hibernate.SessionFactory;\nimport org.hibernate.cfg.Configuration;\n\n\npublic class hibernateClass  {\n    \n     public static void main(String[] args) {\n         \n         SessionFactory myFactory = new Configuration().configure(&quot;hibernate.cfg.xml&quot;).addAnnotatedClass(clima.class).buildSessionFactory();\n            \n            Session mySession = myFactory.openSession();\n            \n            try {\n                \n                yourClass cl1 = new yourClass(&quot;java&quot;, &quot;1,2,3&quot;, 6);\n                \n                mySession.beginTransaction();\n                \n                mySession.save(cl1);\n                \n                mySession.getTransaction().commit();\n                \n                System.out.println(&quot;Inserted !!&quot;);\n                \n                mySession.close();\n                \n            }finally {\n                myFactory.close();\n            }\n         \n     }\n    \n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16707658,"reputation":1,"user_id":12075758,"display_name":"Ashutosh kumar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649664447,"creation_date":1649664447,"answer_id":71824520,"question_id":35725306,"body_markdown":"If you are using maven build tool for hibernating configuration then you should use resource folder inside src/main folder. it will surely solve your problem. I was facing the same issue","title":"org.hibernate.internal.util.config.ConfigurationException: Could not locate cfg.xml resource [/HibernateTest/src/hibernate.cfg.xml]","body":"<p>If you are using maven build tool for hibernating configuration then you should use resource folder inside src/main folder. it will surely solve your problem. I was facing the same issue</p>\n"},{"comments":[{"owner":{"account_id":1206571,"reputation":4399,"user_id":1176061,"display_name":"DeadChex"},"score":0,"creation_date":1680900699,"post_id":75905789,"comment_id":133978689,"body_markdown":"This answer doesn&#39;t seem to be a full answer and appears to be just rephrasing what other answers have already said. Please add more details to the answer to make it helpful and distinct.","body":"This answer doesn&#39;t seem to be a full answer and appears to be just rephrasing what other answers have already said. Please add more details to the answer to make it helpful and distinct."}],"tags":[],"owner":{"account_id":26800458,"reputation":1,"user_id":20392469,"display_name":"Devavrat Wadekar"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680347065,"creation_date":1680347065,"answer_id":75905789,"question_id":35725306,"body_markdown":"&lt;property name=&quot;hbm2ddl.auto&quot;&gt;**update**&lt;/property&gt; \r\nmodify and write hibernate-cfg.xml file","title":"org.hibernate.internal.util.config.ConfigurationException: Could not locate cfg.xml resource [/HibernateTest/src/hibernate.cfg.xml]","body":"<p><strong>update</strong>\nmodify and write hibernate-cfg.xml file</p>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1693696641,"post_id":77023000,"comment_id":135795037,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/77023000/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":29344746,"reputation":1,"user_id":22483396,"display_name":"HET PATEL"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693570294,"creation_date":1693570294,"answer_id":77023000,"question_id":35725306,"body_markdown":"Bro , I was facing same error and I realized that I was not having any folder called resources in my src/main so I just created one and make my hibernate.cfg.xml file there and it WORKS. \r\n\r\nThis is first time I&#39;m giving solution to someone on stackoverflow I hope it helps :)","title":"org.hibernate.internal.util.config.ConfigurationException: Could not locate cfg.xml resource [/HibernateTest/src/hibernate.cfg.xml]","body":"<p>Bro , I was facing same error and I realized that I was not having any folder called resources in my src/main so I just created one and make my hibernate.cfg.xml file there and it WORKS.</p>\n<p>This is first time I'm giving solution to someone on stackoverflow I hope it helps :)</p>\n"}],"owner":{"account_id":2468465,"reputation":143,"user_id":2215084,"accept_rate":17,"display_name":"nitishpisal"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52755,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":35725560,"answer_count":12,"score":11,"last_activity_date":1693570294,"creation_date":1456841839,"question_id":35725306,"body_markdown":"I am trying to connect to Postgresql9.1 in ubuntu with pgadmin3.\r\nMy Pgadmin3 GUI tool does not give any option to create tables by right clicking the database, but it is available in some videos I saw. Therefore, I used terminal to create the database and it showed up in pgadmin3.\r\n\r\n[my file structure][1]\r\n\r\n\r\nMy Userdetails file\r\n\r\n    package org.nitish.hiber;\r\n    \r\n    import javax.persistence.Entity;\r\n    import javax.persistence.Id;\r\n\r\n    @Entity\r\n    public class UserDetails {\r\n    \t@Id\r\n    \tprivate int userId;\r\n    \tprivate String userName;\r\n    \tpublic int getUserId() {\r\n    \t\treturn userId;\r\n    \t}\r\n    \tpublic void setUserId(int userId) {\r\n    \t\tthis.userId = userId;\r\n    \t}\r\n    \tpublic String getUserName() {\r\n    \t\treturn userName;\r\n    \t}\r\n    \tpublic void setUserName(String userName) {\r\n    \t\tthis.userName = userName;\r\n    \t}\r\n    }\r\n\r\nMy HibernateCaller file\r\n\r\n    package org.nitish.caller;\r\n    \r\n    import org.hibernate.HibernateException;\r\n    import org.hibernate.Session;\r\n    import org.hibernate.SessionFactory;\r\n    import org.hibernate.cfg.Configuration;\r\n    import org.nitish.hiber.UserDetails;\r\n    \r\n    public class HibernateTest {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tUserDetails user = new UserDetails();\r\n    \t\tuser.setUserId(1);\r\n    \t\tuser.setUserName(&quot;First User&quot;);\r\n    \t\ttry {\r\n        \t\tSessionFactory sessionFactory = new Configuration().configure(&quot;/HibernateTest/src/hibernate.cfg.xml&quot;).buildSessionFactory();\r\n        \t\tSession session = sessionFactory.openSession();\r\n        \t\tsession.beginTransaction();\r\n        \t\tsession.save(user);\r\n        \t\tsession.getTransaction().commit();\r\n\r\n    \t\t} catch(HibernateException e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \t}\r\n\r\n    }\r\n\r\nHibernate.cfg.xml\r\n\r\n        &lt;?xml version=&#39;1.0&#39; encoding=&#39;utf-8&#39;?&gt;\r\n    &lt;!DOCTYPE hibernate-configuration PUBLIC \r\n            &quot;-//Hibernate/Hibernate Configuration DTD 3.0//EN&quot; \r\n            &quot;http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd&quot;&gt; \r\n    &lt;!--\r\n      ~ Hibernate, Relational Persistence for Idiomatic Java\r\n      ~\r\n      ~ License: GNU Lesser General Public License (LGPL), version 2.1 or later.\r\n      ~ See the lgpl.txt file in the root directory or &lt;http://www.gnu.org/licenses/lgpl-2.1.html&gt;.\r\n      --&gt;\r\n    &lt;hibernate-configuration&gt;\r\n            \r\n      &lt;session-factory&gt;\r\n        &lt;!-- Database connection settings --&gt;\r\n        &lt;property name=&quot;connection.driver_class&quot;&gt;org.postgresql.Driver\t&lt;/property&gt;\r\n        &lt;property name=&quot;connection.url&quot;&gt;jdbc:postgresql://localhost:5432/hiber&lt;/property&gt;\r\n        &lt;property name=&quot;connection.username&quot;&gt;nitish&lt;/property&gt;\r\n        &lt;property name=&quot;connection.password&quot;&gt;&lt;/property&gt;\r\n    \r\n        &lt;!-- JDBC connection pool (use the built-in) --&gt;\r\n        &lt;property name=&quot;connection.pool_size&quot;&gt;1&lt;/property&gt;\r\n    \r\n        &lt;!-- SQL dialect --&gt;\r\n        &lt;property name=&quot;dialect&quot;&gt;org.hibernate.dialect.PostgreSQLDialect&lt;/property&gt;\r\n    \r\n        &lt;!-- Enable Hibernate&#39;s automatic session context management --&gt;\r\n        &lt;property name=&quot;current_session_context_class&quot;&gt;thread&lt;/property&gt;\r\n    \r\n        &lt;!-- Disable the second-level cache  --&gt;\r\n        &lt;property name=&quot;cache.provider_class&quot;&gt;org.hibernate.cache.internal.NoCacheProvider&lt;/property&gt;\r\n    \r\n        &lt;!-- Echo all executed SQL to stdout --&gt;\r\n        &lt;property name=&quot;show_sql&quot;&gt;true&lt;/property&gt;\r\n    \r\n        &lt;!-- Drop and re-create the database schema on startup --&gt;\r\n        &lt;property name=&quot;hbm2ddl.auto&quot;&gt;create&lt;/property&gt;\r\n\r\n        &lt;mapping class=&quot;org.nitish.hiber.UserDetails&quot;/&gt;\r\n      &lt;/session-factory&gt;\r\n    &lt;/hibernate-configuration&gt;\r\n\r\nI am getting following error\r\n\r\n    Mar 1, 2016 9:02:48 AM org.hibernate.cfg.Environment &lt;clinit&gt;\r\n    INFO: HHH000206: hibernate.properties not found\r\n    Mar 1, 2016 9:02:48 AM org.hibernate.cfg.Environment buildBytecodeProvider\r\n    INFO: HHH000021: Bytecode provider name : javassist\r\n    org.hibernate.internal.util.config.ConfigurationException: Could not locate cfg.xml resource [/HibernateTest/src/hibernate.cfg.xml]\r\n    \tat org.hibernate.boot.cfgxml.internal.ConfigLoader.loadConfigXmlResource(ConfigLoader.java:53)\r\n    \tat org.hibernate.boot.registry.StandardServiceRegistryBuilder.configure(StandardServiceRegistryBuilder.java:163)\r\n    \tat org.hibernate.cfg.Configuration.configure(Configuration.java:259)\r\n    \tat org.nitish.caller.HibernateTest.main(HibernateTest.java:17)\r\n\r\n  [1]: https://i.stack.imgur.com/Tjazn.png\r\n\r\n\r\nAfter making few changes (could not use session.close() in finally block I think that should not cause this error)\r\n\r\n    Mar 1, 2016 10:13:34 AM org.hibernate.Version logVersion\r\n    INFO: HHH000412: Hibernate Core {5.1.0.Final}\r\n    Mar 1, 2016 10:13:34 AM org.hibernate.cfg.Environment &lt;clinit&gt;\r\n    INFO: HHH000206: hibernate.properties not found\r\n    Mar 1, 2016 10:13:34 AM org.hibernate.cfg.Environment buildBytecodeProvider\r\n    INFO: HHH000021: Bytecode provider name : javassist\r\n    Mar 1, 2016 10:13:34 AM org.hibernate.boot.jaxb.internal.stax.LocalXmlResourceResolver resolveEntity\r\n    WARN: HHH90000012: Recognized obsolete hibernate namespace http://hibernate.sourceforge.net/hibernate-configuration. Use namespace http://www.hibernate.org/dtd/hibernate-configuration instead.  Support for obsolete DTD/XSD namespaces may be removed at any time.\r\n    Mar 1, 2016 10:13:35 AM org.hibernate.annotations.common.reflection.java.JavaReflectionManager &lt;clinit&gt;\r\n    INFO: HCANN000001: Hibernate Commons Annotations {5.0.1.Final}\r\n    Mar 1, 2016 10:13:35 AM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl configure\r\n    WARN: HHH10001002: Using Hibernate built-in connection pool (not for production use!)\r\n    org.hibernate.service.spi.ServiceException: Unable to create requested service [org.hibernate.engine.jdbc.env.spi.JdbcEnvironment]\r\n    \tat org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:244)\r\n    \tat org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:208)\r\n    \tat org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:189)\r\n    \tat org.hibernate.engine.jdbc.internal.JdbcServicesImpl.configure(JdbcServicesImpl.java:51)\r\n    \tat org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.configureService(StandardServiceRegistryImpl.java:94)\r\n    \tat org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:217)\r\n    \tat org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:189)\r\n    \tat org.hibernate.boot.model.process.spi.MetadataBuildingProcess.handleTypes(MetadataBuildingProcess.java:352)\r\n    \tat org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:111)\r\n    \tat org.hibernate.boot.model.process.spi.MetadataBuildingProcess.build(MetadataBuildingProcess.java:83)\r\n    \tat org.hibernate.boot.internal.MetadataBuilderImpl.build(MetadataBuilderImpl.java:418)\r\n    \tat org.hibernate.boot.internal.MetadataBuilderImpl.build(MetadataBuilderImpl.java:87)\r\n    \tat org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:692)\r\n    \tat org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:724)\r\n    \tat org.nitish.caller.HibernateTest.main(HibernateTest.java:17)\r\n    Caused by: org.hibernate.boot.registry.classloading.spi.ClassLoadingException: Unable to load class [org.postgresql.Driver]\r\n    \tat org.hibernate.boot.registry.classloading.internal.ClassLoaderServiceImpl.classForName(ClassLoaderServiceImpl.java:229)\r\n    \tat org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl.loadDriverIfPossible(DriverManagerConnectionProviderImpl.java:161)\r\n    \tat org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl.buildCreator(DriverManagerConnectionProviderImpl.java:117)\r\n    \tat org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl.configure(DriverManagerConnectionProviderImpl.java:73)\r\n    \tat org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.configureService(StandardServiceRegistryImpl.java:94)\r\n    \tat org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:217)\r\n    \tat org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:189)\r\n    \tat org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.buildJdbcConnectionAccess(JdbcEnvironmentInitiator.java:145)\r\n    \tat org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:66)\r\n    \tat org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:35)\r\n    \tat org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.initiateService(StandardServiceRegistryImpl.java:88)\r\n    \tat org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:234)\r\n    \t... 14 more\r\n    Caused by: java.lang.ClassNotFoundException: Could not load requested class : org.postgresql.Driver\r\n    \tat org.hibernate.boot.registry.classloading.internal.ClassLoaderServiceImpl$AggregatedClassLoader.findClass(ClassLoaderServiceImpl.java:217)\r\n    \tat java.lang.ClassLoader.loadClass(ClassLoader.java:323)\r\n    \tat java.lang.ClassLoader.loadClass(ClassLoader.java:268)\r\n    \tat java.lang.Class.forName0(Native Method)\r\n    \tat java.lang.Class.forName(Class.java:274)\r\n    \tat org.hibernate.boot.registry.classloading.internal.ClassLoaderServiceImpl.classForName(ClassLoaderServiceImpl.java:226)\r\n    \t... 25 more","title":"org.hibernate.internal.util.config.ConfigurationException: Could not locate cfg.xml resource [/HibernateTest/src/hibernate.cfg.xml]","body":"<p>I am trying to connect to Postgresql9.1 in ubuntu with pgadmin3.\nMy Pgadmin3 GUI tool does not give any option to create tables by right clicking the database, but it is available in some videos I saw. Therefore, I used terminal to create the database and it showed up in pgadmin3.</p>\n\n<p><a href=\"https://i.stack.imgur.com/Tjazn.png\" rel=\"noreferrer\">my file structure</a></p>\n\n<p>My Userdetails file</p>\n\n<pre><code>package org.nitish.hiber;\n\nimport javax.persistence.Entity;\nimport javax.persistence.Id;\n\n@Entity\npublic class UserDetails {\n    @Id\n    private int userId;\n    private String userName;\n    public int getUserId() {\n        return userId;\n    }\n    public void setUserId(int userId) {\n        this.userId = userId;\n    }\n    public String getUserName() {\n        return userName;\n    }\n    public void setUserName(String userName) {\n        this.userName = userName;\n    }\n}\n</code></pre>\n\n<p>My HibernateCaller file</p>\n\n<pre><code>package org.nitish.caller;\n\nimport org.hibernate.HibernateException;\nimport org.hibernate.Session;\nimport org.hibernate.SessionFactory;\nimport org.hibernate.cfg.Configuration;\nimport org.nitish.hiber.UserDetails;\n\npublic class HibernateTest {\n\n    public static void main(String[] args) {\n        UserDetails user = new UserDetails();\n        user.setUserId(1);\n        user.setUserName(\"First User\");\n        try {\n            SessionFactory sessionFactory = new Configuration().configure(\"/HibernateTest/src/hibernate.cfg.xml\").buildSessionFactory();\n            Session session = sessionFactory.openSession();\n            session.beginTransaction();\n            session.save(user);\n            session.getTransaction().commit();\n\n        } catch(HibernateException e) {\n            e.printStackTrace();\n        }\n    }\n\n}\n</code></pre>\n\n<p>Hibernate.cfg.xml</p>\n\n<pre><code>    &lt;?xml version='1.0' encoding='utf-8'?&gt;\n&lt;!DOCTYPE hibernate-configuration PUBLIC \n        \"-//Hibernate/Hibernate Configuration DTD 3.0//EN\" \n        \"http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd\"&gt; \n&lt;!--\n  ~ Hibernate, Relational Persistence for Idiomatic Java\n  ~\n  ~ License: GNU Lesser General Public License (LGPL), version 2.1 or later.\n  ~ See the lgpl.txt file in the root directory or &lt;http://www.gnu.org/licenses/lgpl-2.1.html&gt;.\n  --&gt;\n&lt;hibernate-configuration&gt;\n\n  &lt;session-factory&gt;\n    &lt;!-- Database connection settings --&gt;\n    &lt;property name=\"connection.driver_class\"&gt;org.postgresql.Driver  &lt;/property&gt;\n    &lt;property name=\"connection.url\"&gt;jdbc:postgresql://localhost:5432/hiber&lt;/property&gt;\n    &lt;property name=\"connection.username\"&gt;nitish&lt;/property&gt;\n    &lt;property name=\"connection.password\"&gt;&lt;/property&gt;\n\n    &lt;!-- JDBC connection pool (use the built-in) --&gt;\n    &lt;property name=\"connection.pool_size\"&gt;1&lt;/property&gt;\n\n    &lt;!-- SQL dialect --&gt;\n    &lt;property name=\"dialect\"&gt;org.hibernate.dialect.PostgreSQLDialect&lt;/property&gt;\n\n    &lt;!-- Enable Hibernate's automatic session context management --&gt;\n    &lt;property name=\"current_session_context_class\"&gt;thread&lt;/property&gt;\n\n    &lt;!-- Disable the second-level cache  --&gt;\n    &lt;property name=\"cache.provider_class\"&gt;org.hibernate.cache.internal.NoCacheProvider&lt;/property&gt;\n\n    &lt;!-- Echo all executed SQL to stdout --&gt;\n    &lt;property name=\"show_sql\"&gt;true&lt;/property&gt;\n\n    &lt;!-- Drop and re-create the database schema on startup --&gt;\n    &lt;property name=\"hbm2ddl.auto\"&gt;create&lt;/property&gt;\n\n    &lt;mapping class=\"org.nitish.hiber.UserDetails\"/&gt;\n  &lt;/session-factory&gt;\n&lt;/hibernate-configuration&gt;\n</code></pre>\n\n<p>I am getting following error</p>\n\n<pre><code>Mar 1, 2016 9:02:48 AM org.hibernate.cfg.Environment &lt;clinit&gt;\nINFO: HHH000206: hibernate.properties not found\nMar 1, 2016 9:02:48 AM org.hibernate.cfg.Environment buildBytecodeProvider\nINFO: HHH000021: Bytecode provider name : javassist\norg.hibernate.internal.util.config.ConfigurationException: Could not locate cfg.xml resource [/HibernateTest/src/hibernate.cfg.xml]\n    at org.hibernate.boot.cfgxml.internal.ConfigLoader.loadConfigXmlResource(ConfigLoader.java:53)\n    at org.hibernate.boot.registry.StandardServiceRegistryBuilder.configure(StandardServiceRegistryBuilder.java:163)\n    at org.hibernate.cfg.Configuration.configure(Configuration.java:259)\n    at org.nitish.caller.HibernateTest.main(HibernateTest.java:17)\n</code></pre>\n\n<p>After making few changes (could not use session.close() in finally block I think that should not cause this error)</p>\n\n<pre><code>Mar 1, 2016 10:13:34 AM org.hibernate.Version logVersion\nINFO: HHH000412: Hibernate Core {5.1.0.Final}\nMar 1, 2016 10:13:34 AM org.hibernate.cfg.Environment &lt;clinit&gt;\nINFO: HHH000206: hibernate.properties not found\nMar 1, 2016 10:13:34 AM org.hibernate.cfg.Environment buildBytecodeProvider\nINFO: HHH000021: Bytecode provider name : javassist\nMar 1, 2016 10:13:34 AM org.hibernate.boot.jaxb.internal.stax.LocalXmlResourceResolver resolveEntity\nWARN: HHH90000012: Recognized obsolete hibernate namespace http://hibernate.sourceforge.net/hibernate-configuration. Use namespace http://www.hibernate.org/dtd/hibernate-configuration instead.  Support for obsolete DTD/XSD namespaces may be removed at any time.\nMar 1, 2016 10:13:35 AM org.hibernate.annotations.common.reflection.java.JavaReflectionManager &lt;clinit&gt;\nINFO: HCANN000001: Hibernate Commons Annotations {5.0.1.Final}\nMar 1, 2016 10:13:35 AM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl configure\nWARN: HHH10001002: Using Hibernate built-in connection pool (not for production use!)\norg.hibernate.service.spi.ServiceException: Unable to create requested service [org.hibernate.engine.jdbc.env.spi.JdbcEnvironment]\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:244)\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:208)\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:189)\n    at org.hibernate.engine.jdbc.internal.JdbcServicesImpl.configure(JdbcServicesImpl.java:51)\n    at org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.configureService(StandardServiceRegistryImpl.java:94)\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:217)\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:189)\n    at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.handleTypes(MetadataBuildingProcess.java:352)\n    at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:111)\n    at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.build(MetadataBuildingProcess.java:83)\n    at org.hibernate.boot.internal.MetadataBuilderImpl.build(MetadataBuilderImpl.java:418)\n    at org.hibernate.boot.internal.MetadataBuilderImpl.build(MetadataBuilderImpl.java:87)\n    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:692)\n    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:724)\n    at org.nitish.caller.HibernateTest.main(HibernateTest.java:17)\nCaused by: org.hibernate.boot.registry.classloading.spi.ClassLoadingException: Unable to load class [org.postgresql.Driver]\n    at org.hibernate.boot.registry.classloading.internal.ClassLoaderServiceImpl.classForName(ClassLoaderServiceImpl.java:229)\n    at org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl.loadDriverIfPossible(DriverManagerConnectionProviderImpl.java:161)\n    at org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl.buildCreator(DriverManagerConnectionProviderImpl.java:117)\n    at org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl.configure(DriverManagerConnectionProviderImpl.java:73)\n    at org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.configureService(StandardServiceRegistryImpl.java:94)\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:217)\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:189)\n    at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.buildJdbcConnectionAccess(JdbcEnvironmentInitiator.java:145)\n    at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:66)\n    at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:35)\n    at org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.initiateService(StandardServiceRegistryImpl.java:88)\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:234)\n    ... 14 more\nCaused by: java.lang.ClassNotFoundException: Could not load requested class : org.postgresql.Driver\n    at org.hibernate.boot.registry.classloading.internal.ClassLoaderServiceImpl$AggregatedClassLoader.findClass(ClassLoaderServiceImpl.java:217)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:323)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:268)\n    at java.lang.Class.forName0(Native Method)\n    at java.lang.Class.forName(Class.java:274)\n    at org.hibernate.boot.registry.classloading.internal.ClassLoaderServiceImpl.classForName(ClassLoaderServiceImpl.java:226)\n    ... 25 more\n</code></pre>\n"},{"tags":["java","java-8","java-stream"],"answers":[{"comments":[{"owner":{"account_id":6669020,"reputation":371,"user_id":5145695,"display_name":"zaozaoer"},"score":0,"creation_date":1542183889,"post_id":53295769,"comment_id":93472405,"body_markdown":"I think you are right, could you let me know how to fix it?\nsorry I am new to java stream...","body":"I think you are right, could you let me know how to fix it? sorry I am new to java stream..."},{"owner":{"account_id":4497436,"reputation":18081,"user_id":3656904,"accept_rate":67,"display_name":"talex"},"score":0,"creation_date":1542183982,"post_id":53295769,"comment_id":93472449,"body_markdown":"If you want to filter `occList` and allow only those which `getOccSCd` is in list of string I can give you code sample.","body":"If you want to filter <code>occList</code> and allow only those which <code>getOccSCd</code> is in list of string I can give you code sample."},{"owner":{"account_id":6669020,"reputation":371,"user_id":5145695,"display_name":"zaozaoer"},"score":0,"creation_date":1542185769,"post_id":53295769,"comment_id":93473359,"body_markdown":"thanks so much for your quick answer as well. It was very helpful!","body":"thanks so much for your quick answer as well. It was very helpful!"}],"tags":[],"owner":{"account_id":4497436,"reputation":18081,"user_id":3656904,"accept_rate":67,"display_name":"talex"},"comment_count":3,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1542185236,"creation_date":1542183823,"answer_id":53295769,"question_id":53295725,"body_markdown":"In your loop `for(String word: strings)` you overwrite your `separatedByComma` variable.","title":"get a comma separated string using java stream","body":"<p>In your loop <code>for(String word: strings)</code> you overwrite your <code>separatedByComma</code> variable.</p>\n"},{"comments":[{"owner":{"account_id":6669020,"reputation":371,"user_id":5145695,"display_name":"zaozaoer"},"score":0,"creation_date":1542185800,"post_id":53295809,"comment_id":93473377,"body_markdown":"Thank you very much, your solution produces exactly what I needed.","body":"Thank you very much, your solution produces exactly what I needed."}],"tags":[],"owner":{"account_id":1263831,"reputation":388998,"user_id":1221571,"accept_rate":67,"display_name":"Eran"},"comment_count":1,"down_vote_count":1,"up_vote_count":33,"is_accepted":true,"score":32,"last_activity_date":1542184863,"creation_date":1542183943,"answer_id":53295809,"question_id":53295725,"body_markdown":"Each iteration of your `for` loop overwrites the value of `separatedByComma`. The first iteration assigns the `String` &quot;a&quot; to it, and the second replaces it with &quot;b&quot;.\r\n\r\nYou should `Stream` over the elements of the `strings` `List` in order to join the `String`s that match each of them into a single output `String`:\r\n\r\n    String separatedByComma = \r\n        strings.stream()\r\n               .flatMap(word -&gt; occList.stream()\r\n                                       .filter(occ -&gt; word.equalsIgnoreCase (occ.getOccSCd()))\r\n                                       .map (occ -&gt; occ.getOccSNm()))\r\n               .collect(Collectors.joining (&quot;,&quot;));\r\n\r\nOutput:\r\n\r\n    a,b","title":"get a comma separated string using java stream","body":"<p>Each iteration of your <code>for</code> loop overwrites the value of <code>separatedByComma</code>. The first iteration assigns the <code>String</code> \"a\" to it, and the second replaces it with \"b\".</p>\n\n<p>You should <code>Stream</code> over the elements of the <code>strings</code> <code>List</code> in order to join the <code>String</code>s that match each of them into a single output <code>String</code>:</p>\n\n<pre><code>String separatedByComma = \n    strings.stream()\n           .flatMap(word -&gt; occList.stream()\n                                   .filter(occ -&gt; word.equalsIgnoreCase (occ.getOccSCd()))\n                                   .map (occ -&gt; occ.getOccSNm()))\n           .collect(Collectors.joining (\",\"));\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>a,b\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1565312,"reputation":21,"user_id":1454254,"display_name":"Pribic Rubik"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693570088,"creation_date":1693570088,"answer_id":77022970,"question_id":53295725,"body_markdown":"You can also use `String.join(&quot;,&quot;, strings)`","title":"get a comma separated string using java stream","body":"<p>You can also use <code>String.join(&quot;,&quot;, strings)</code></p>\n"}],"owner":{"account_id":6669020,"reputation":371,"user_id":5145695,"display_name":"zaozaoer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":19283,"favorite_count":0,"down_vote_count":0,"up_vote_count":16,"accepted_answer_id":53295809,"answer_count":3,"score":16,"last_activity_date":1693570088,"creation_date":1542183637,"question_id":53295725,"body_markdown":"I have the following code using java `Stream`.\r\n\r\nI am trying the get the function to build a string of value: &quot;a,b&quot; in this case.\r\nhowever, the output (`separatedByComma` in this case) is always &quot;b&quot;.\r\n\r\nCould somebody shed some light please?\r\n\r\n    @Test\r\n    public void testJoin() {\r\n        List&lt;MOccS&gt; occList = new ArrayList&lt;&gt; (  );\r\n        MOccS mOccS = new MOccS ();\r\n        mOccS.setOccSCd ( &quot;1&quot; );\r\n        mOccS.setOccSNm ( &quot;a&quot; );\r\n        occList.add ( mOccS );\r\n\r\n        MOccS mOccS2 = new MOccS ();\r\n        mOccS2.setOccSCd ( &quot;2&quot; );\r\n        mOccS2.setOccSNm ( &quot;b&quot; );\r\n        occList.add ( mOccS2 );\r\n\r\n\r\n        List&lt;String&gt; strings = new ArrayList&lt;&gt; (  );\r\n        strings.add ( &quot;1&quot; );\r\n        strings.add ( &quot;2&quot; );\r\n\r\n        String separatedByComma = &quot;&quot;;\r\n        for(String word: strings) {\r\n            separatedByComma = occList.stream ()\r\n                                      .filter ( occ -&gt; word.equalsIgnoreCase ( occ.getOccSCd () ) )         \r\n                                      .map ( occ -&gt; occ.getOccSNm () )\r\n                                      .collect ( Collectors.joining ( &quot;,&quot; ) );\r\n         }\r\n\r\n         System.out.println (separatedByComma);\r\n    }\r\n\r\n\r\n    class MOccS{\r\n        String occSCd;\r\n        String occSNm;\r\n        ...\r\n        getter/setter\r\n        ...\r\n    }\r\n\r\n\r\n   \r\n","title":"get a comma separated string using java stream","body":"<p>I have the following code using java <code>Stream</code>.</p>\n\n<p>I am trying the get the function to build a string of value: \"a,b\" in this case.\nhowever, the output (<code>separatedByComma</code> in this case) is always \"b\".</p>\n\n<p>Could somebody shed some light please?</p>\n\n<pre><code>@Test\npublic void testJoin() {\n    List&lt;MOccS&gt; occList = new ArrayList&lt;&gt; (  );\n    MOccS mOccS = new MOccS ();\n    mOccS.setOccSCd ( \"1\" );\n    mOccS.setOccSNm ( \"a\" );\n    occList.add ( mOccS );\n\n    MOccS mOccS2 = new MOccS ();\n    mOccS2.setOccSCd ( \"2\" );\n    mOccS2.setOccSNm ( \"b\" );\n    occList.add ( mOccS2 );\n\n\n    List&lt;String&gt; strings = new ArrayList&lt;&gt; (  );\n    strings.add ( \"1\" );\n    strings.add ( \"2\" );\n\n    String separatedByComma = \"\";\n    for(String word: strings) {\n        separatedByComma = occList.stream ()\n                                  .filter ( occ -&gt; word.equalsIgnoreCase ( occ.getOccSCd () ) )         \n                                  .map ( occ -&gt; occ.getOccSNm () )\n                                  .collect ( Collectors.joining ( \",\" ) );\n     }\n\n     System.out.println (separatedByComma);\n}\n\n\nclass MOccS{\n    String occSCd;\n    String occSNm;\n    ...\n    getter/setter\n    ...\n}\n</code></pre>\n"},{"tags":["java","mongodb","mongodb-query","aggregation-framework"],"answers":[{"tags":[],"owner":{"account_id":10907337,"reputation":38824,"user_id":8017690,"display_name":"Yong Shun"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1663331389,"creation_date":1663331389,"answer_id":73744848,"question_id":73744784,"body_markdown":"You should use the `$or` operator instead of `$and`.\r\n\r\nThis will fulfill:\r\n\r\n1. If `?0` is null, the document is selected.\r\n\r\n2. If `?0` is matched with `companyName` value, the document is selected.\r\n\r\n```\r\n{\r\n  $match: {\r\n    $expr: {\r\n      $or: [\r\n        { $eq: [?0, null] },\r\n        { $eq: [&quot;$companyName&quot;, ?0] }\r\n      ]\r\n    }\r\n  }\r\n}\r\n\r\n```","title":"MongoDB Aggregation - Match if variable is not null","body":"<p>You should use the <code>$or</code> operator instead of <code>$and</code>.</p>\n<p>This will fulfill:</p>\n<ol>\n<li><p>If <code>?0</code> is null, the document is selected.</p>\n</li>\n<li><p>If <code>?0</code> is matched with <code>companyName</code> value, the document is selected.</p>\n</li>\n</ol>\n<pre><code>{\n  $match: {\n    $expr: {\n      $or: [\n        { $eq: [?0, null] },\n        { $eq: [&quot;$companyName&quot;, ?0] }\n      ]\n    }\n  }\n}\n\n</code></pre>\n"}],"owner":{"account_id":17796153,"reputation":83,"user_id":12923941,"display_name":"PWJ"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1232,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73744848,"answer_count":1,"score":0,"last_activity_date":1693569859,"creation_date":1663331017,"question_id":73744784,"body_markdown":"I want to write a MongoDB Aggregation query to do the following:\r\n\r\n1. I pass a variable to the query method.\r\n2. If the variable is not null, I want to check if it matches.\r\n3. If the variable is null, no match is required\r\n\r\nFor example:\r\nI pass companyName as a variable and if it is not null, I get records for that company name, otherwise, if it is null, I get records for all company names.\r\n\r\nI have come up with something like this: (The match is a part of a larger aggregation query)\r\n\r\n```\r\n{ $match : { $and: [ { ?0: { $ne : null }} , {&#39;companyName&#39; : ?0}] }}\r\n\r\nList&lt;AggregationGroupSum&gt; getCountByCompany(String companyName)\r\n```\r\n\r\nThe `?0` is the variable companyName.\r\n\r\nI understand that the approach to check it is quite juvenile, but I am new to MongoDB and aggregation query and I would like any help on how to tackle this, whether it be through the aggregation or otherwise.\r\n\r\nThanks!","title":"MongoDB Aggregation - Match if variable is not null","body":"<p>I want to write a MongoDB Aggregation query to do the following:</p>\n<ol>\n<li>I pass a variable to the query method.</li>\n<li>If the variable is not null, I want to check if it matches.</li>\n<li>If the variable is null, no match is required</li>\n</ol>\n<p>For example:\nI pass companyName as a variable and if it is not null, I get records for that company name, otherwise, if it is null, I get records for all company names.</p>\n<p>I have come up with something like this: (The match is a part of a larger aggregation query)</p>\n<pre><code>{ $match : { $and: [ { ?0: { $ne : null }} , {'companyName' : ?0}] }}\n\nList&lt;AggregationGroupSum&gt; getCountByCompany(String companyName)\n</code></pre>\n<p>The <code>?0</code> is the variable companyName.</p>\n<p>I understand that the approach to check it is quite juvenile, but I am new to MongoDB and aggregation query and I would like any help on how to tackle this, whether it be through the aggregation or otherwise.</p>\n<p>Thanks!</p>\n"},{"tags":["java","web-services","soap","wsdl","jax-ws"],"answers":[{"comments":[{"owner":{"account_id":6628797,"reputation":364,"user_id":5657937,"display_name":"Binoy Cherian"},"score":2,"creation_date":1598961921,"post_id":42905108,"comment_id":112620334,"body_markdown":"Answers via links are not good. Both the links are down. It&quot;s always best to copy a snippet here","body":"Answers via links are not good. Both the links are down. It&quot;s always best to copy a snippet here"}],"tags":[],"owner":{"account_id":5347166,"reputation":383,"user_id":4262397,"display_name":"Nikhil D&#232;vr&#232;"},"comment_count":1,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1490044441,"creation_date":1490017212,"answer_id":42905108,"question_id":42897047,"body_markdown":"You can use this below line to add header before making a request, since you&#39;re using JAX-WS:\r\n\r\n    SOAPHeader header = envelope.addHeader();\r\n\r\n\r\nThere are plenty of tutorials that you could refer to.  Go to google and search for consuming SOAP Web Service. Here is one such tutorial you can refer to:\r\n\r\nhttp://www.javadb.com/using-a-message-handler-to-alter-the-soap-header-in-a-web-service-client/\r\n\r\nHere is another good example you could use:\r\nhttps://soa2world.blogspot.com/2009/05/direct-web-service-client-using-java.html\r\n\r\n\r\nHope this helps.\r\n\r\n","title":"How to set headers in Soap Request Java","body":"<p>You can use this below line to add header before making a request, since you're using JAX-WS:</p>\n\n<pre><code>SOAPHeader header = envelope.addHeader();\n</code></pre>\n\n<p>There are plenty of tutorials that you could refer to.  Go to google and search for consuming SOAP Web Service. Here is one such tutorial you can refer to:</p>\n\n<p><a href=\"http://www.javadb.com/using-a-message-handler-to-alter-the-soap-header-in-a-web-service-client/\" rel=\"nofollow noreferrer\">http://www.javadb.com/using-a-message-handler-to-alter-the-soap-header-in-a-web-service-client/</a></p>\n\n<p>Here is another good example you could use:\n<a href=\"https://soa2world.blogspot.com/2009/05/direct-web-service-client-using-java.html\" rel=\"nofollow noreferrer\">https://soa2world.blogspot.com/2009/05/direct-web-service-client-using-java.html</a></p>\n\n<p>Hope this helps.</p>\n"}],"owner":{"account_id":2570248,"reputation":185,"user_id":2229181,"accept_rate":0,"display_name":"ROHIT"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":14099,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1693569780,"creation_date":1489990980,"question_id":42897047,"body_markdown":"I am facing issue in forming a SOAP request.\r\n \r\nIn that request i am supposed to add username , password and some other info in header part not the part of payload.\r\n\r\nBelow the Entry in wsdl\r\n\r\n    &lt;wsdl:message name=&quot;InputUploadCustomerDocument_Headers&quot;&gt;\r\n    &lt;wsdl:part name=&quot;DocumentType&quot; element=&quot;tns:DocumentType&quot;/&gt;\r\n    &lt;wsdl:part name=&quot;FileName&quot; element=&quot;tns:FileName&quot;/&gt;\r\n    &lt;wsdl:part name=&quot;Password&quot; element=&quot;tns:Password&quot;/&gt;\r\n    &lt;wsdl:part name=&quot;PinNo&quot; element=&quot;tns:PinNo&quot;/&gt;\r\n    &lt;wsdl:part name=&quot;UserName&quot; element=&quot;tns:UserName&quot;/&gt;\r\n    &lt;/wsdl:message&gt;\r\n    &lt;wsdl:message name=&quot;ReturnUploadCustomerDocument&quot;&gt;\r\n    &lt;wsdl:part name=&quot;parameters&quot; element=&quot;tns:ReturnUploadCustomerDocument&quot;/&gt;\r\n    &lt;/wsdl:message&gt;\r\n\r\n\r\n    &lt;wsdl:operation name=&quot;UploadCustomerDocument&quot;&gt;\r\n    &lt;soap:operation soapAction=&quot;http://tempuri.org/ISend/UploadCustomerDocument&quot; style=&quot;document&quot;/&gt;\r\n    &lt;wsdl:input name=&quot;InputUploadCustomerDocument&quot;&gt;\r\n    &lt;soap:header message=&quot;tns:InputUploadCustomerDocument_Headers&quot; part=&quot;DocumentType&quot; use=&quot;literal&quot;/&gt;\r\n    &lt;soap:header message=&quot;tns:InputUploadCustomerDocument_Headers&quot; part=&quot;FileName&quot; use=&quot;literal&quot;/&gt;\r\n    &lt;soap:header message=&quot;tns:InputUploadCustomerDocument_Headers&quot; part=&quot;Password&quot; use=&quot;literal&quot;/&gt;\r\n    &lt;soap:header message=&quot;tns:InputUploadCustomerDocument_Headers&quot; part=&quot;PinNo&quot; use=&quot;literal&quot;/&gt;\r\n    &lt;soap:header message=&quot;tns:InputUploadCustomerDocument_Headers&quot; part=&quot;UserName&quot; use=&quot;literal&quot;/&gt;\r\n    &lt;soap:body use=&quot;literal&quot;/&gt;\r\n    &lt;/wsdl:input&gt;\r\n    &lt;wsdl:output name=&quot;ReturnUploadCustomerDocument&quot;&gt;\r\n    &lt;soap:body use=&quot;literal&quot;/&gt;\r\n    &lt;/wsdl:output&gt;\r\n    &lt;/wsdl:operation&gt;\r\n\r\n\r\nAnd the InputUploadCustomerDocument Java File Below, the file don&#39;t have username, password and other fields, and i need to set these parameters before making reuqest\r\n\r\n    @XmlAccessorType(XmlAccessType.FIELD)\r\n    @XmlType(name = &quot;&quot;, propOrder = {\r\n    &quot;fileData&quot;\r\n    })\r\n    @XmlRootElement(name = &quot;InputUploadCustomerDocument&quot;)\r\n    public class InputUploadCustomerDocument {\r\n\r\n    @XmlElement(name = &quot;FileData&quot;, required = true)\r\n    protected byte[] fileData;\r\n  \r\n    /**\r\n     * Gets the value of the fileData property.\r\n     * \r\n     * @return\r\n     *     possible object is\r\n     *     byte[]\r\n     */\r\n    public byte[] getFileData() {\r\n        return fileData;\r\n    }\r\n\r\n    /**\r\n     * Sets the value of the fileData property.\r\n     * \r\n     * @param value\r\n     *     allowed object is\r\n     *     byte[]\r\n     */\r\n    public void setFileData(byte[] value) {\r\n        this.fileData = value;\r\n    }\r\n}\r\n\r\n\r\nHere is the function i need to call\r\n\r\n    @WebMethod(operationName = &quot;UploadCustomerDocument&quot;, action = &quot;http://tempuri.org/ISend/UploadCustomerDocument&quot;)\r\n    @WebResult(name = &quot;ReturnUploadCustomerDocument&quot;, targetNamespace = &quot;http://tempuri.org/&quot;, partName = &quot;parameters&quot;)\r\n    @SOAPBinding(parameterStyle = SOAPBinding.ParameterStyle.BARE)\r\n    public ReturnUploadCustomerDocument uploadCustomerDocument(\r\n        @WebParam(name = &quot;InputUploadCustomerDocument&quot;, targetNamespace = &quot;http://tempuri.org/&quot;, partName = &quot;parameters&quot;)\r\n        InputUploadCustomerDocument parameters);\r\n\r\nCan someone help how i can set these headers?","title":"How to set headers in Soap Request Java","body":"<p>I am facing issue in forming a SOAP request.</p>\n\n<p>In that request i am supposed to add username , password and some other info in header part not the part of payload.</p>\n\n<p>Below the Entry in wsdl</p>\n\n<pre><code>&lt;wsdl:message name=\"InputUploadCustomerDocument_Headers\"&gt;\n&lt;wsdl:part name=\"DocumentType\" element=\"tns:DocumentType\"/&gt;\n&lt;wsdl:part name=\"FileName\" element=\"tns:FileName\"/&gt;\n&lt;wsdl:part name=\"Password\" element=\"tns:Password\"/&gt;\n&lt;wsdl:part name=\"PinNo\" element=\"tns:PinNo\"/&gt;\n&lt;wsdl:part name=\"UserName\" element=\"tns:UserName\"/&gt;\n&lt;/wsdl:message&gt;\n&lt;wsdl:message name=\"ReturnUploadCustomerDocument\"&gt;\n&lt;wsdl:part name=\"parameters\" element=\"tns:ReturnUploadCustomerDocument\"/&gt;\n&lt;/wsdl:message&gt;\n\n\n&lt;wsdl:operation name=\"UploadCustomerDocument\"&gt;\n&lt;soap:operation soapAction=\"http://tempuri.org/ISend/UploadCustomerDocument\" style=\"document\"/&gt;\n&lt;wsdl:input name=\"InputUploadCustomerDocument\"&gt;\n&lt;soap:header message=\"tns:InputUploadCustomerDocument_Headers\" part=\"DocumentType\" use=\"literal\"/&gt;\n&lt;soap:header message=\"tns:InputUploadCustomerDocument_Headers\" part=\"FileName\" use=\"literal\"/&gt;\n&lt;soap:header message=\"tns:InputUploadCustomerDocument_Headers\" part=\"Password\" use=\"literal\"/&gt;\n&lt;soap:header message=\"tns:InputUploadCustomerDocument_Headers\" part=\"PinNo\" use=\"literal\"/&gt;\n&lt;soap:header message=\"tns:InputUploadCustomerDocument_Headers\" part=\"UserName\" use=\"literal\"/&gt;\n&lt;soap:body use=\"literal\"/&gt;\n&lt;/wsdl:input&gt;\n&lt;wsdl:output name=\"ReturnUploadCustomerDocument\"&gt;\n&lt;soap:body use=\"literal\"/&gt;\n&lt;/wsdl:output&gt;\n&lt;/wsdl:operation&gt;\n</code></pre>\n\n<p>And the InputUploadCustomerDocument Java File Below, the file don't have username, password and other fields, and i need to set these parameters before making reuqest</p>\n\n<pre><code>@XmlAccessorType(XmlAccessType.FIELD)\n@XmlType(name = \"\", propOrder = {\n\"fileData\"\n})\n@XmlRootElement(name = \"InputUploadCustomerDocument\")\npublic class InputUploadCustomerDocument {\n\n@XmlElement(name = \"FileData\", required = true)\nprotected byte[] fileData;\n\n/**\n * Gets the value of the fileData property.\n * \n * @return\n *     possible object is\n *     byte[]\n */\npublic byte[] getFileData() {\n    return fileData;\n}\n\n/**\n * Sets the value of the fileData property.\n * \n * @param value\n *     allowed object is\n *     byte[]\n */\npublic void setFileData(byte[] value) {\n    this.fileData = value;\n}\n</code></pre>\n\n<p>}</p>\n\n<p>Here is the function i need to call</p>\n\n<pre><code>@WebMethod(operationName = \"UploadCustomerDocument\", action = \"http://tempuri.org/ISend/UploadCustomerDocument\")\n@WebResult(name = \"ReturnUploadCustomerDocument\", targetNamespace = \"http://tempuri.org/\", partName = \"parameters\")\n@SOAPBinding(parameterStyle = SOAPBinding.ParameterStyle.BARE)\npublic ReturnUploadCustomerDocument uploadCustomerDocument(\n    @WebParam(name = \"InputUploadCustomerDocument\", targetNamespace = \"http://tempuri.org/\", partName = \"parameters\")\n    InputUploadCustomerDocument parameters);\n</code></pre>\n\n<p>Can someone help how i can set these headers?</p>\n"},{"tags":["java","kotlin","localdate"],"comments":[{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1693689505,"post_id":77022907,"comment_id":135794548,"body_markdown":"Stop using both `java.sql.Date` and `java.util.Date`. Both legacy classes were supplanted years ago by the modern *java.time* classes, replaced by `java.time.LocalDate` and `java.time.Instant` respectively. JDBC 4.2+ requires all JDBC drivers to support the *java.time* types.","body":"Stop using both <code>java.sql.Date</code> and <code>java.util.Date</code>. Both legacy classes were supplanted years ago by the modern <i>java.time</i> classes, replaced by <code>java.time.LocalDate</code> and <code>java.time.Instant</code> respectively. JDBC 4.2+ requires all JDBC drivers to support the <i>java.time</i> types."}],"owner":{"account_id":2881516,"reputation":77,"user_id":2472307,"display_name":"AAA"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1693569658,"answer_count":0,"score":0,"last_activity_date":1693569568,"creation_date":1693569568,"question_id":77022907,"body_markdown":"it.date is a &quot;Date&quot; type (we retrieve from mysql db) and I am trying to do a comparison of a LocalDate.now and return the value in LocalDate type. However, I couldn&#39;t find the right way to do this as I am getting parser errors     \r\n    \r\n    private val datePattern = &quot;M/d/yy&quot; \r\n            \r\n    if (LocalDate.parse(it.date.toString(), DateTimeFormatter.ofPattern(datePattern)) &gt; LocalDate.now().minusYears(1)){  \r\n             return LocalDate.parse(it.date.toString(), DateTimeFormatter.ofPattern(datePattern))\r\n    }","title":"Kotlin Date to LocalDate comparison","body":"<p>it.date is a &quot;Date&quot; type (we retrieve from mysql db) and I am trying to do a comparison of a LocalDate.now and return the value in LocalDate type. However, I couldn't find the right way to do this as I am getting parser errors</p>\n<pre><code>private val datePattern = &quot;M/d/yy&quot; \n        \nif (LocalDate.parse(it.date.toString(), DateTimeFormatter.ofPattern(datePattern)) &gt; LocalDate.now().minusYears(1)){  \n         return LocalDate.parse(it.date.toString(), DateTimeFormatter.ofPattern(datePattern))\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-boot-3"],"comments":[{"owner":{"account_id":8544053,"reputation":997,"user_id":6418029,"display_name":"Ashutosh"},"score":0,"creation_date":1693306943,"post_id":76999508,"comment_id":135740297,"body_markdown":"I think with minor changes and @Configuration itself you can make this work? Do you want to specifically use @Autoconfiguration?","body":"I think with minor changes and @Configuration itself you can make this work? Do you want to specifically use @Autoconfiguration?"},{"owner":{"account_id":1961640,"reputation":12136,"user_id":1763035,"accept_rate":56,"display_name":"Andy Brown"},"score":0,"creation_date":1693314837,"post_id":76999508,"comment_id":135742038,"body_markdown":"`proxyBeanMethods = false` means that your `prototypeComponent` `@Bean` method is now an unproxied factory bean that must return a complete `PrototypeComponent`. You cannot rely on Spring to inject dependencies into it because there is no method proxy in place to do it. You can add more bean parameters to your `@Bean` method and spring will resolve them, or you can add them as members to your `TestPrototypeConfiguration` class because it is itself a bean.","body":"<code>proxyBeanMethods = false</code> means that your <code>prototypeComponent</code> <code>@Bean</code> method is now an unproxied factory bean that must return a complete <code>PrototypeComponent</code>. You cannot rely on Spring to inject dependencies into it because there is no method proxy in place to do it. You can add more bean parameters to your <code>@Bean</code> method and spring will resolve them, or you can add them as members to your <code>TestPrototypeConfiguration</code> class because it is itself a bean."},{"owner":{"account_id":5877555,"reputation":21,"user_id":4627984,"display_name":"Demid Demidov"},"score":0,"creation_date":1693316013,"post_id":76999508,"comment_id":135742324,"body_markdown":"I think that the spring cannot resolve arguments which i would like to pass from my code :)","body":"I think that the spring cannot resolve arguments which i would like to pass from my code :)"}],"answers":[{"comments":[{"owner":{"account_id":5877555,"reputation":21,"user_id":4627984,"display_name":"Demid Demidov"},"score":0,"creation_date":1693311029,"post_id":76999661,"comment_id":135741175,"body_markdown":"This code is not work. At least `SingletonComponent` will create `PrototypeComponent` once when the singletone-bean will be constructed.\n\nYes, we can change annotation in java-configuration for prototype bean for the following\n\n    `@Scope(value = &quot;prototype&quot;, proxyMode = ScopedProxyMode.TARGET_CLASS)`\n\n\nBut my question is how to create prototype-bean with arguments in constructor-stage?","body":"This code is not work. At least <code>SingletonComponent</code> will create <code>PrototypeComponent</code> once when the singletone-bean will be constructed.  Yes, we can change annotation in java-configuration for prototype bean for the following      <code>@Scope(value = &quot;prototype&quot;, proxyMode = ScopedProxyMode.TARGET_CLASS)</code>   But my question is how to create prototype-bean with arguments in constructor-stage?"},{"owner":{"account_id":8544053,"reputation":997,"user_id":6418029,"display_name":"Ashutosh"},"score":0,"creation_date":1693311092,"post_id":76999661,"comment_id":135741183,"body_markdown":"Okay, in that case can you try creating an ObjectFactory&lt;PrototypeComponent&gt; (Some sort of factory design pattern) ?","body":"Okay, in that case can you try creating an ObjectFactory&lt;PrototypeComponent&gt; (Some sort of factory design pattern) ?"},{"owner":{"account_id":8544053,"reputation":997,"user_id":6418029,"display_name":"Ashutosh"},"score":0,"creation_date":1693311242,"post_id":76999661,"comment_id":135741219,"body_markdown":"I meant Autowired private PrototypeComponent prototypeComponent; instead of this use Autowired private ObjectFactory&lt;PrototypeComponent&gt; prototypeComponentFactory;","body":"I meant Autowired private PrototypeComponent prototypeComponent; instead of this use Autowired private ObjectFactory&lt;PrototypeComponent&gt; prototypeComponentFactory;"},{"owner":{"account_id":5877555,"reputation":21,"user_id":4627984,"display_name":"Demid Demidov"},"score":0,"creation_date":1693313370,"post_id":76999661,"comment_id":135741698,"body_markdown":"Yes, but this does not solve the problem for passing arguments to the prototype bean.","body":"Yes, but this does not solve the problem for passing arguments to the prototype bean."},{"owner":{"account_id":8544053,"reputation":997,"user_id":6418029,"display_name":"Ashutosh"},"score":0,"creation_date":1693313761,"post_id":76999661,"comment_id":135741780,"body_markdown":"updated the answer, see if that make sense.","body":"updated the answer, see if that make sense."},{"owner":{"account_id":8544053,"reputation":997,"user_id":6418029,"display_name":"Ashutosh"},"score":0,"creation_date":1693313833,"post_id":76999661,"comment_id":135741798,"body_markdown":"By default, Spring doesn&#39;t provide a built-in mechanism to pass arguments to prototype beans through the ObjectFactory. If you encounter issues with the above approach, you might need to implement a custom scope. A custom scope allows you to control the creation of prototype beans and pass arguments. Let me know if you need any help there.","body":"By default, Spring doesn&#39;t provide a built-in mechanism to pass arguments to prototype beans through the ObjectFactory. If you encounter issues with the above approach, you might need to implement a custom scope. A custom scope allows you to control the creation of prototype beans and pass arguments. Let me know if you need any help there."},{"owner":{"account_id":5877555,"reputation":21,"user_id":4627984,"display_name":"Demid Demidov"},"score":0,"creation_date":1693314734,"post_id":76999661,"comment_id":135742003,"body_markdown":"Yes, I see that the ObjectFactory does not accept arguments. In my opinion very strange that in spring boot v3 the compatibility for creation of prototype bean with arguments is missed.","body":"Yes, I see that the ObjectFactory does not accept arguments. In my opinion very strange that in spring boot v3 the compatibility for creation of prototype bean with arguments is missed."},{"owner":{"account_id":8544053,"reputation":997,"user_id":6418029,"display_name":"Ashutosh"},"score":0,"creation_date":1693314802,"post_id":76999661,"comment_id":135742029,"body_markdown":"Not sure about it, being long time since i did this, Lets raise it to spring may be?","body":"Not sure about it, being long time since i did this, Lets raise it to spring may be?"},{"owner":{"account_id":5877555,"reputation":21,"user_id":4627984,"display_name":"Demid Demidov"},"score":0,"creation_date":1693478304,"post_id":76999661,"comment_id":135767747,"body_markdown":"I have found ObjectProvider which can solve this problem. But I don&#39;t know Is it the good practice for spring?","body":"I have found ObjectProvider which can solve this problem. But I don&#39;t know Is it the good practice for spring?"}],"tags":[],"owner":{"account_id":8544053,"reputation":997,"user_id":6418029,"display_name":"Ashutosh"},"comment_count":9,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1693313730,"creation_date":1693307545,"answer_id":76999661,"question_id":76999508,"body_markdown":" here&#39;s the modified code that should work in Spring Boot 3\r\n    \r\n  \r\n       public class PrototypeComponent {\r\n        private final int value;\r\n    \r\n        public PrototypeComponent(int value) {\r\n            this.value = value;\r\n        }\r\n    \r\n        // Other methods and properties\r\n    }\r\n\r\n\r\n    @Component\r\n    public class SingletonComponent {\r\n    \r\n        @Autowired\r\n        private ObjectFactory&lt;PrototypeComponent&gt; prototypeComponentFactory;\r\n    \r\n        public void test() {\r\n            for (int i = 0; i &lt; 5; i++) {\r\n                PrototypeComponent instance = prototypeComponentFactory.getObject(i); // Pass argument here\r\n                // Use the instance as needed\r\n            }\r\n        }\r\n    }\r\n\r\n   \r\n\r\nIn this example, I&#39;ve used constructor injection to inject the prototype bean (PrototypeComponent) into the singleton bean (SingletonComponent). This way, each time you use the prototypeComponent field in the SingletonComponent class, you&#39;ll get a new instance of the prototype bean.\r\n\r\n*Please note that in Spring Boot 3, you don&#39;t need to manually define the bean creation logic using the supplier approach as in your initial code. Spring Boot&#39;s dependency injection mechanism will automatically take care of injecting the prototype bean when needed. This approach aligns with the principles of dependency injection and encapsulates the creation logic within the Spring framework.*\r\n","title":"How to create Prototype bean with parameters","body":"<p>here's the modified code that should work in Spring Boot 3</p>\n<pre><code>   public class PrototypeComponent {\n    private final int value;\n\n    public PrototypeComponent(int value) {\n        this.value = value;\n    }\n\n    // Other methods and properties\n}\n\n\n@Component\npublic class SingletonComponent {\n\n    @Autowired\n    private ObjectFactory&lt;PrototypeComponent&gt; prototypeComponentFactory;\n\n    public void test() {\n        for (int i = 0; i &lt; 5; i++) {\n            PrototypeComponent instance = prototypeComponentFactory.getObject(i); // Pass argument here\n            // Use the instance as needed\n        }\n    }\n}\n</code></pre>\n<p>In this example, I've used constructor injection to inject the prototype bean (PrototypeComponent) into the singleton bean (SingletonComponent). This way, each time you use the prototypeComponent field in the SingletonComponent class, you'll get a new instance of the prototype bean.</p>\n<p><em>Please note that in Spring Boot 3, you don't need to manually define the bean creation logic using the supplier approach as in your initial code. Spring Boot's dependency injection mechanism will automatically take care of injecting the prototype bean when needed. This approach aligns with the principles of dependency injection and encapsulates the creation logic within the Spring framework.</em></p>\n"},{"tags":[],"owner":{"account_id":114848,"reputation":134189,"user_id":301832,"accept_rate":60,"display_name":"Donal Fellows"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693568624,"creation_date":1693568624,"answer_id":77022824,"question_id":76999508,"body_markdown":"What I do, which works (i.e., this is in production and has been for a while and is fine on both Spring 5 and 6), is use an [`ObjectProvider`](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/beans/factory/ObjectProvider.html).\r\n```java\r\n@Component\r\npublic class SingletonComponent {\r\n    @Autowired\r\n    private ObjectProvider&lt;PrototypeComponent&gt; prototypeComponentFactory;\r\n\r\n    public void test() {\r\n        for (int i = 0; i &lt; 5; i++) {\r\n            var instance = prototypeComponentFactory.getObject(i);\r\n            // Use the instance as needed\r\n        }\r\n    }\r\n}\r\n```\r\nThis will pass the argument through, assuming you have suitably annotated objects and constructors (i.e., there is a bean of type `PrototypeComponent` with scope `PROTOTYPE` in your context whose constructor takes an `int` or `Integer`).\r\n\r\nI _prefer_ to wrap it slightly, like this, so that I have more type safety:\r\n```java\r\n@Component\r\npublic class SingletonComponent {\r\n    @Autowired\r\n    private ObjectProvider&lt;PrototypeComponent&gt; prototypeComponentFactory;\r\n\r\n    private PrototypeComponent getComponent(int i) {\r\n        return prototypeComponentFactory.getObject(i);\r\n    }\r\n\r\n    public void test() {\r\n        for (int i = 0; i &lt; 5; i++) {\r\n            var instance = getComponent(i);\r\n            // Use the instance as needed\r\n        }\r\n    }\r\n}\r\n```\r\nYou might delegate that wrapping to a bean, but that&#39;s not really necessary if you&#39;re only building instances for one place (which was true in my particular use-case).","title":"How to create Prototype bean with parameters","body":"<p>What I do, which works (i.e., this is in production and has been for a while and is fine on both Spring 5 and 6), is use an <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/beans/factory/ObjectProvider.html\" rel=\"nofollow noreferrer\"><code>ObjectProvider</code></a>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\npublic class SingletonComponent {\n    @Autowired\n    private ObjectProvider&lt;PrototypeComponent&gt; prototypeComponentFactory;\n\n    public void test() {\n        for (int i = 0; i &lt; 5; i++) {\n            var instance = prototypeComponentFactory.getObject(i);\n            // Use the instance as needed\n        }\n    }\n}\n</code></pre>\n<p>This will pass the argument through, assuming you have suitably annotated objects and constructors (i.e., there is a bean of type <code>PrototypeComponent</code> with scope <code>PROTOTYPE</code> in your context whose constructor takes an <code>int</code> or <code>Integer</code>).</p>\n<p>I <em>prefer</em> to wrap it slightly, like this, so that I have more type safety:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\npublic class SingletonComponent {\n    @Autowired\n    private ObjectProvider&lt;PrototypeComponent&gt; prototypeComponentFactory;\n\n    private PrototypeComponent getComponent(int i) {\n        return prototypeComponentFactory.getObject(i);\n    }\n\n    public void test() {\n        for (int i = 0; i &lt; 5; i++) {\n            var instance = getComponent(i);\n            // Use the instance as needed\n        }\n    }\n}\n</code></pre>\n<p>You might delegate that wrapping to a bean, but that's not really necessary if you're only building instances for one place (which was true in my particular use-case).</p>\n"}],"owner":{"account_id":5877555,"reputation":21,"user_id":4627984,"display_name":"Demid Demidov"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1693568624,"creation_date":1693306175,"question_id":76999508,"body_markdown":"In Spring Boot 3 for jar-starters now we should use `@Autoconfiguration`. `@Autoconfiguration` is the `@Configuration` with `proxyBeanMethods = false` parameter.\r\n\r\nIn Spring Boot 2 i used the code like this. In singleton component i can create any count of prototype beans.\r\n\r\n```\r\n@Configuration\r\npublic class TestPrototypeConfiguration {\r\n\r\n    @Bean\r\n    public SingletonComponent singletoneComponent() {\r\n        return new SingletonComponent(this::prototypeComponent);\r\n    }\r\n\r\n    @Bean\r\n    @Scope(value = BeanDefinition.SCOPE_PROTOTYPE)\r\n    public PrototypeComponent prototypeComponent(int value) {\r\n        return new PrototypeComponent(value);\r\n    }\r\n\r\n}\r\n\r\n@RequiredArgsConstructor\r\npublic class PrototypeComponent {\r\n\r\n    private final int value;\r\n}\r\n\r\n@RequiredArgsConstructor\r\npublic class SingletonComponent {\r\n\r\n    private final IntFunction&lt;PrototypeComponent&gt; supplier;\r\n\r\n    public void test() {\r\n        for (int i = 0; i &lt; 5; i++) {\r\n            supplier.apply(i);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nBut for Spring boot 3 if I simple change `@Configuration -&gt; @Autoconfiguration` the code will start work incorrect. Because when i call `supplier` the prototype bean will not construct as spring boot. It will be created as the simple java class.\r\n\r\nCan you provide me any suggestion about how to solve this problem, please? Is it possible to solve this problem w/o `ApplicationContext.getBean`?","title":"How to create Prototype bean with parameters","body":"<p>In Spring Boot 3 for jar-starters now we should use <code>@Autoconfiguration</code>. <code>@Autoconfiguration</code> is the <code>@Configuration</code> with <code>proxyBeanMethods = false</code> parameter.</p>\n<p>In Spring Boot 2 i used the code like this. In singleton component i can create any count of prototype beans.</p>\n<pre><code>@Configuration\npublic class TestPrototypeConfiguration {\n\n    @Bean\n    public SingletonComponent singletoneComponent() {\n        return new SingletonComponent(this::prototypeComponent);\n    }\n\n    @Bean\n    @Scope(value = BeanDefinition.SCOPE_PROTOTYPE)\n    public PrototypeComponent prototypeComponent(int value) {\n        return new PrototypeComponent(value);\n    }\n\n}\n\n@RequiredArgsConstructor\npublic class PrototypeComponent {\n\n    private final int value;\n}\n\n@RequiredArgsConstructor\npublic class SingletonComponent {\n\n    private final IntFunction&lt;PrototypeComponent&gt; supplier;\n\n    public void test() {\n        for (int i = 0; i &lt; 5; i++) {\n            supplier.apply(i);\n        }\n    }\n}\n</code></pre>\n<p>But for Spring boot 3 if I simple change <code>@Configuration -&gt; @Autoconfiguration</code> the code will start work incorrect. Because when i call <code>supplier</code> the prototype bean will not construct as spring boot. It will be created as the simple java class.</p>\n<p>Can you provide me any suggestion about how to solve this problem, please? Is it possible to solve this problem w/o <code>ApplicationContext.getBean</code>?</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":29073167,"reputation":1013,"user_id":22270964,"display_name":"Maksim Eliseev"},"score":0,"creation_date":1693513035,"post_id":77018738,"comment_id":135775006,"body_markdown":"If you are using Spring don&#39;t use a static variable to store an instance of class. Instead use `@Mapper(componentModel = &quot;spring&quot;)`. You are using Spring IOC incorrectly.","body":"If you are using Spring don&#39;t use a static variable to store an instance of class. Instead use <code>@Mapper(componentModel = &quot;spring&quot;)</code>. You are using Spring IOC incorrectly."},{"owner":{"account_id":25532314,"reputation":25,"user_id":19320097,"display_name":"Матвей Зуев"},"score":0,"creation_date":1693566835,"post_id":77018738,"comment_id":135781465,"body_markdown":"I added a compnent model  to the mapper and added the annotation Autowired to the ProductService but I still get this error.","body":"I added a compnent model  to the mapper and added the annotation Autowired to the ProductService but I still get this error."},{"owner":{"account_id":29073167,"reputation":1013,"user_id":22270964,"display_name":"Maksim Eliseev"},"score":0,"creation_date":1693567430,"post_id":77018738,"comment_id":135781568,"body_markdown":"Have you removed `ProductMapper MAPPER = Mappers.getMapper(ProductMapper.class);` from `ProductMapper`? I still see it in the code snippets.","body":"Have you removed <code>ProductMapper MAPPER = Mappers.getMapper(ProductMapper.class);</code> from <code>ProductMapper</code>? I still see it in the code snippets."},{"owner":{"account_id":25532314,"reputation":25,"user_id":19320097,"display_name":"Матвей Зуев"},"score":0,"creation_date":1693568265,"post_id":77018738,"comment_id":135781704,"body_markdown":"I have updated the files and now i am getting an error, in question i have updated the stackrace.","body":"I have updated the files and now i am getting an error, in question i have updated the stackrace."},{"owner":{"account_id":29073167,"reputation":1013,"user_id":22270964,"display_name":"Maksim Eliseev"},"score":0,"creation_date":1693576664,"post_id":77018738,"comment_id":135783416,"body_markdown":"Eclipse doesn&#39;t seem to see the generated code. I have no idea what is going wrong","body":"Eclipse doesn&#39;t seem to see the generated code. I have no idea what is going wrong"},{"owner":{"account_id":25532314,"reputation":25,"user_id":19320097,"display_name":"Матвей Зуев"},"score":0,"creation_date":1693580795,"post_id":77018738,"comment_id":135784323,"body_markdown":"Thank you, I will try to solve the problem myself.","body":"Thank you, I will try to solve the problem myself."},{"owner":{"account_id":25532314,"reputation":25,"user_id":19320097,"display_name":"Матвей Зуев"},"score":0,"creation_date":1693587922,"post_id":77018738,"comment_id":135785595,"body_markdown":"Made a new jetbrains account, took intellij idea for a month, launched the project and it works...","body":"Made a new jetbrains account, took intellij idea for a month, launched the project and it works..."},{"owner":{"account_id":29073167,"reputation":1013,"user_id":22270964,"display_name":"Maksim Eliseev"},"score":0,"creation_date":1693590264,"post_id":77018738,"comment_id":135785993,"body_markdown":"Nothing surprising =) You can also download Intellij IDEA Community Edition, it is free and you don&#39;t need to create any account","body":"Nothing surprising =) You can also download Intellij IDEA Community Edition, it is free and you don&#39;t need to create any account"},{"owner":{"account_id":25532314,"reputation":25,"user_id":19320097,"display_name":"Матвей Зуев"},"score":0,"creation_date":1693639501,"post_id":77018738,"comment_id":135789813,"body_markdown":"But this version lacks the tools for web development that are available in the ultimate version","body":"But this version lacks the tools for web development that are available in the ultimate version"},{"owner":{"account_id":29073167,"reputation":1013,"user_id":22270964,"display_name":"Maksim Eliseev"},"score":0,"creation_date":1693639831,"post_id":77018738,"comment_id":135789841,"body_markdown":"I find that even the Community Edition is better than Eclipse","body":"I find that even the Community Edition is better than Eclipse"}],"answers":[{"comments":[{"owner":{"account_id":29073167,"reputation":1013,"user_id":22270964,"display_name":"Maksim Eliseev"},"score":0,"creation_date":1693513130,"post_id":77018822,"comment_id":135775020,"body_markdown":"Can you complete your answer with code examples? It doesn&#39;t seem to be completed.","body":"Can you complete your answer with code examples? It doesn&#39;t seem to be completed."},{"owner":{"account_id":25532314,"reputation":25,"user_id":19320097,"display_name":"Матвей Зуев"},"score":0,"creation_date":1693566535,"post_id":77018822,"comment_id":135781406,"body_markdown":"I added controller and products service.","body":"I added controller and products service."}],"tags":[],"owner":{"account_id":15455414,"reputation":41,"user_id":11149650,"display_name":"Peter Martin"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1693510931,"creation_date":1693510931,"answer_id":77018822,"question_id":77018738,"body_markdown":"In your mapper annotation you have to set the componentModel property.  You probably want spring.","title":"Mapstruct cannot find implemention for ProductMapper","body":"<p>In your mapper annotation you have to set the componentModel property.  You probably want spring.</p>\n"},{"comments":[{"owner":{"account_id":25532314,"reputation":25,"user_id":19320097,"display_name":"Матвей Зуев"},"score":0,"creation_date":1693566630,"post_id":77019991,"comment_id":135781424,"body_markdown":"I added a compnent model  to the mapper and added the annotation Autowired to the ProductService but I still get this error.","body":"I added a compnent model  to the mapper and added the annotation Autowired to the ProductService but I still get this error."},{"owner":{"account_id":3097035,"reputation":1105,"user_id":2622026,"accept_rate":71,"display_name":"hermit"},"score":0,"creation_date":1693567976,"post_id":77019991,"comment_id":135781656,"body_markdown":"@МатвейЗуев Please autowire the mapper interface in the ImageService class as well and use it.","body":"@МатвейЗуев Please autowire the mapper interface in the ImageService class as well and use it."},{"owner":{"account_id":25532314,"reputation":25,"user_id":19320097,"display_name":"Матвей Зуев"},"score":0,"creation_date":1693568246,"post_id":77019991,"comment_id":135781701,"body_markdown":"I have updated the files and now i am getting an error, in question i have updated the stackrace.","body":"I have updated the files and now i am getting an error, in question i have updated the stackrace."},{"owner":{"account_id":3097035,"reputation":1105,"user_id":2622026,"accept_rate":71,"display_name":"hermit"},"score":0,"creation_date":1693570146,"post_id":77019991,"comment_id":135782044,"body_markdown":"@МатвейЗуев Are you auto wiring product service in the controller class?","body":"@МатвейЗуев Are you auto wiring product service in the controller class?"},{"owner":{"account_id":25532314,"reputation":25,"user_id":19320097,"display_name":"Матвей Зуев"},"score":0,"creation_date":1693570343,"post_id":77019991,"comment_id":135782081,"body_markdown":"Yes, I added annotation.","body":"Yes, I added annotation."}],"tags":[],"owner":{"account_id":3097035,"reputation":1105,"user_id":2622026,"accept_rate":71,"display_name":"hermit"},"comment_count":5,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1693530192,"creation_date":1693530192,"answer_id":77019991,"question_id":77018738,"body_markdown":"As mentioned in the comments, please use component model as `spring`.\r\n\r\n\r\n    @Mapper(componentModel = &quot;spring&quot;)","title":"Mapstruct cannot find implemention for ProductMapper","body":"<p>As mentioned in the comments, please use component model as <code>spring</code>.</p>\n<pre><code>@Mapper(componentModel = &quot;spring&quot;)\n</code></pre>\n"}],"owner":{"account_id":25532314,"reputation":25,"user_id":19320097,"display_name":"Матвей Зуев"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":99,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77019991,"answer_count":2,"score":1,"last_activity_date":1693568573,"creation_date":1693510035,"question_id":77018738,"body_markdown":"Mapstruct cannot find implemention of my Mapper.Using latest version of mapstruct 1.5.5 Final,my IDE is eclipse.\r\nAnd I&#39;m getting this error:\r\n```\r\n***************************\r\nAPPLICATION FAILED TO START\r\n***************************\r\n\r\nDescription:\r\n\r\nField productMapper in com.example.springshop.service.ImageService required a bean of type &#39;com.example.springshop.mapper.ProductMapper&#39; that could not be found.\r\n\r\n\r\nAction:\r\n\r\nConsider defining a bean of type &#39;com.example.springshop.mapper.ProductMapper&#39; in your configuration.\r\n\r\n```\r\n\r\nProduct entity:\r\n```\r\npackage com.example.springshop.entity;\r\n\r\nimport java.math.BigDecimal;\r\nimport java.time.LocalDateTime;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\nimport jakarta.persistence.CascadeType;\r\nimport jakarta.persistence.Column;\r\nimport jakarta.persistence.Entity;\r\nimport jakarta.persistence.FetchType;\r\nimport jakarta.persistence.GeneratedValue;\r\nimport jakarta.persistence.GenerationType;\r\nimport jakarta.persistence.Id;\r\nimport jakarta.persistence.OneToMany;\r\nimport jakarta.persistence.PrePersist;\r\nimport jakarta.persistence.Table;\r\nimport lombok.AllArgsConstructor;\r\nimport lombok.Builder;\r\nimport lombok.Data;\r\nimport lombok.NoArgsConstructor;\r\n\r\n@Entity\r\n@Table(name = &quot;products&quot;)\r\n@Data\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Builder\r\npublic class Product {\r\n\t@Id\r\n\t@Column(name = &quot;id&quot;)\r\n\t@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n\tprivate Long id;\r\n\r\n\t@Column(name = &quot;title&quot;, nullable = false)\r\n\tprivate String title;\r\n\r\n\t@Column(name = &quot;description&quot;, nullable = false)\r\n\tprivate String description;\r\n\r\n\t@Column(name = &quot;price&quot;, nullable = false)\r\n\tprivate BigDecimal price;\r\n\r\n\t@OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY, mappedBy = &quot;product&quot;)\r\n\t@Builder.Default\r\n\tprivate List&lt;Image&gt; images = new ArrayList&lt;&gt;();\r\n\r\n\t@Column(name = &quot;preview_image_id&quot;)\r\n\tprivate Long previewImageId;\r\n\r\n\t@Column(name = &quot;date_of_created&quot;)\r\n\tprivate LocalDateTime dateOfCreated;\r\n\r\n\t@PrePersist\r\n\tprivate void init() {\r\n\t\tdateOfCreated = LocalDateTime.now();\r\n\t}\r\n}\r\n```\r\n\r\nProductDTO class:\r\n```\r\npackage com.example.springshop.dto;\r\n\r\nimport java.math.BigDecimal;\r\nimport java.util.List;\r\n\r\nimport com.example.springshop.entity.Image;\r\n\r\nimport lombok.AllArgsConstructor;\r\nimport lombok.Builder;\r\nimport lombok.Data;\r\nimport lombok.NoArgsConstructor;\r\n\r\n@Data\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Builder\r\npublic class ProductDTO {\r\n\tprivate String title;\r\n\tprivate String description;\r\n\tprivate BigDecimal price;\r\n\tprivate List&lt;Image&gt; images;\r\n\tprivate Long previewImageId;\r\n}\r\n```\r\n\r\nProduct Controller:\r\n```\r\npackage com.example.springshop.controllers;\r\n\r\nimport java.security.Principal;\r\n\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.stereotype.Controller;\r\nimport org.springframework.ui.Model;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\nimport org.springframework.web.bind.annotation.PathVariable;\r\n\r\nimport com.example.springshop.repository.ProductRepository;\r\nimport com.example.springshop.service.ProductService;\r\n\r\n@Controller\r\npublic class ProductController {\r\n\t@Autowired\r\n\tprivate ProductRepository productRepository;\r\n\r\n\t@Autowired\r\n\tprivate ProductService productService;\r\n\r\n\t@GetMapping(&quot;/&quot;)\r\n\tpublic String mainPage(Model model) {\r\n\t\tmodel.addAttribute(&quot;products&quot;, productRepository.findAll());\r\n\t\treturn &quot;main&quot;;\r\n\t}\r\n\r\n\t@GetMapping(&quot;/products/{id}&quot;)\r\n\tpublic String productInfo(@PathVariable(value = &quot;id&quot;) Long id, Model model) {\r\n\t\tif (!productRepository.existsById(id)) {\r\n\t\t\treturn &quot;redirect:/&quot;;\r\n\t\t}\r\n\r\n\t\tmodel.addAttribute(&quot;product&quot;, productService.findProductById(id));\r\n\r\n\t\treturn &quot;product_info&quot;;\r\n\t}\r\n\r\n\t@GetMapping(&quot;/products/{id}/bucket&quot;)\r\n\tpublic String addBucket(@PathVariable Long id, Principal principal) {\r\n\t\tif (principal == null) {\r\n\t\t\treturn &quot;redirect:/&quot;;\r\n\t\t}\r\n\r\n\t\tproductService.addToUserBucket(id, principal.getName());\r\n\t\treturn &quot;redirect:/&quot;;\r\n\t}\r\n}\r\n```\r\n\r\nAdmin controller:\r\n```\r\npackage com.example.springshop.controllers;\r\n\r\nimport java.io.IOException;\r\nimport java.util.List;\r\n\r\nimport org.springframework.stereotype.Controller;\r\nimport org.springframework.ui.Model;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\nimport org.springframework.web.bind.annotation.PathVariable;\r\nimport org.springframework.web.bind.annotation.PostMapping;\r\nimport org.springframework.web.bind.annotation.RequestParam;\r\nimport org.springframework.web.multipart.MultipartFile;\r\n\r\nimport com.example.springshop.dto.ProductDTO;\r\nimport com.example.springshop.service.ProductService;\r\n\r\n@Controller\r\npublic class AdminController {\r\n\tprivate final ProductService productService;\r\n\r\n\tpublic AdminController(ProductService productService) {\r\n\t\tthis.productService = productService;\r\n\t}\r\n\r\n\t@GetMapping(&quot;/create_product&quot;)\r\n\tpublic String productCreatePage() {\r\n\t\treturn &quot;create_product&quot;;\r\n\t}\r\n\r\n\t@PostMapping(&quot;/create_product&quot;)\r\n\tpublic String productCreate(@RequestParam(&quot;file1&quot;) MultipartFile file1,\r\n\t\t\t@RequestParam(&quot;file2&quot;) MultipartFile file2,\r\n\t\t\t@RequestParam(&quot;file3&quot;) MultipartFile file3,\r\n\t\t\tProductDTO product) throws IOException {\r\n\t\tproductService.saveProduct(product, file1, file2, file3);\r\n\t\treturn &quot;redirect:/&quot;;\r\n\t}\r\n\r\n\t@GetMapping(&quot;/edit_product/{id}&quot;)\r\n\tpublic String editProductPage(@PathVariable(value = &quot;id&quot;) Long id, Model model) {\r\n\t\tList&lt;ProductDTO&gt; result = productService.findProductById(id);\r\n\r\n\t\tif (result == null) {\r\n\t\t\treturn &quot;redirect:/&quot;;\r\n\t\t}\r\n\r\n\t\tmodel.addAttribute(&quot;product&quot;, result);\r\n\r\n\t\treturn &quot;edit_product&quot;;\r\n\t}\r\n\r\n\t@PostMapping(&quot;/edit_product/{id}&quot;)\r\n\tpublic String editProduct(ProductDTO productDTO) {\r\n\t\tproductService.editProduct(productDTO);\r\n\t\treturn &quot;redirect:/&quot;;\r\n\t}\r\n\r\n\t@GetMapping(&quot;/delete_product/{id}&quot;)\r\n\tpublic String deleteProduct(@PathVariable(value = &quot;id&quot;) Long id) {\r\n\t\tproductService.deleteProduct(id);\r\n\t\treturn &quot;redirect:/&quot;;\r\n\t}\r\n}\r\n```\r\n\r\nProduct Service:\r\n```\r\npackage com.example.springshop.service;\r\n\r\nimport java.io.IOException;\r\nimport java.util.ArrayList;\r\nimport java.util.Collections;\r\nimport java.util.List;\r\nimport java.util.Optional;\r\n\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.stereotype.Service;\r\nimport org.springframework.transaction.annotation.Transactional;\r\nimport org.springframework.web.multipart.MultipartFile;\r\n\r\nimport com.example.springshop.dto.ProductDTO;\r\nimport com.example.springshop.entity.Bucket;\r\nimport com.example.springshop.entity.Image;\r\nimport com.example.springshop.entity.Product;\r\nimport com.example.springshop.entity.User;\r\nimport com.example.springshop.mapper.ImageMapper;\r\nimport com.example.springshop.mapper.ProductMapper;\r\nimport com.example.springshop.repository.ProductRepository;\r\nimport com.example.springshop.repository.UserRepository;\r\n\r\nimport lombok.extern.slf4j.Slf4j;\r\n\r\n@Service\r\n@Slf4j\r\npublic class ProductService {\r\n\t@Autowired\r\n\tprivate ProductMapper productMapper;\r\n\t\r\n\t@Autowired\r\n\tprivate ImageMapper imageMapper;\r\n\r\n\tprivate final ProductRepository productRepository;\r\n\tprivate final UserRepository userRepository;\r\n\r\n\tprivate final BucketService bucketService;\r\n\tprivate final ImageService imageService;\r\n\r\n\tpublic ProductService(ProductRepository productRepository, UserRepository userRepository,\r\n\t\t\tBucketService bucketService, ImageService imageService) {\r\n\t\tthis.productRepository = productRepository;\r\n\t\tthis.userRepository = userRepository;\r\n\t\tthis.bucketService = bucketService;\r\n\t\tthis.imageService = imageService;\r\n\t}\r\n\r\n\tpublic List&lt;ProductDTO&gt; listOfProducts() {\r\n\t\treturn productMapper.fromProductList(productRepository.findAll());\r\n\t}\r\n\r\n\tpublic ProductDTO getProductById(Long id) {\r\n\t\treturn productMapper.fromProduct(productRepository.findById(id).orElse(null));\r\n\t}\r\n\r\n\tpublic void saveProduct(ProductDTO product, MultipartFile file1, MultipartFile file2, MultipartFile file3)\r\n\t\t\tthrows IOException {\r\n\t\tImage image1;\r\n\t\tImage image2;\r\n\t\tImage image3;\r\n\t\tif (file1.getSize() != 0) {\r\n\t\t\timage1 = imageMapper.fromMultipartToImage(file1);\r\n\t\t\timage1.setPreviewImage(true);\r\n\t\t\timageService.addImageToProduct(product, image1);\r\n\t\t}\r\n\t\tif (file2.getSize() != 0) {\r\n\t\t\timage2 = imageMapper.fromMultipartToImage(file2);\r\n\t\t\timageService.addImageToProduct(product, image2);\r\n\t\t}\r\n\t\tif (file3.getSize() != 0) {\r\n\t\t\timage3 = imageMapper.fromMultipartToImage(file3);\r\n\t\t\timageService.addImageToProduct(product, image3);\r\n\t\t}\r\n\t\tlog.info(&quot;Saving new Product. Title: {}&quot;, product.getTitle());\r\n\t\tProduct productFromDb = productRepository.save(productMapper.toProduct(product));\r\n\t\tproductFromDb.setPreviewImageId(productFromDb.getImages().get(0).getId());\r\n\t\tproductRepository.save(productMapper.toProduct(product));\r\n\t}\r\n\r\n\tpublic List&lt;ProductDTO&gt; findProductById(Long id) {\r\n\t\tList&lt;Product&gt; res = new ArrayList&lt;&gt;();\r\n\r\n\t\tif (!productRepository.existsById(id)) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tOptional&lt;Product&gt; product = productRepository.findById(id);\r\n\t\tproduct.ifPresent(res::add);\r\n\r\n\t\treturn productMapper.fromProductList(res);\r\n\r\n\t}\r\n\r\n\tpublic boolean deleteProduct(Long id) {\r\n\t\tif (!productRepository.existsById(id)) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tproductRepository.deleteById(id);\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\tpublic boolean editProduct(ProductDTO productDTO) {\r\n\t\tString title = productDTO.getTitle();\r\n\r\n\t\tif (productRepository.findByTitle(title) == null) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tProduct product = Product.builder()\r\n\t\t\t\t.title(title)\r\n\t\t\t\t.description(productDTO.getDescription())\r\n\t\t\t\t.price(productDTO.getPrice())\r\n\t\t\t\t.build();\r\n\r\n\t\tproductRepository.save(product);\r\n\r\n\t\tlog.info(&quot;Edit new User with title : {}&quot;, title);\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\t@Transactional\r\n\tpublic void addToUserBucket(Long productId, String username) {\r\n\t\tUser user = userRepository.findByUsername(username);\r\n\t\tif (user == null) {\r\n\t\t\tthrow new RuntimeException(&quot;User not found&quot; + username);\r\n\t\t}\r\n\r\n\t\tBucket bucket = user.getBucket();\r\n\t\tif (bucket == null) {\r\n\t\t\tBucket newBucket = bucketService.createBucket(user, Collections.singletonList(productId));\r\n\t\t\tuser.setBucket(newBucket);\r\n\t\t\tuserRepository.save(user);\r\n\t\t} else {\r\n\t\t\tbucketService.addProducts(bucket, Collections.singletonList(productId));\r\n\t\t}\r\n\r\n\t}\r\n}\r\n```\r\n\r\n\r\nImage Service:\r\n```\r\npackage com.example.springshop.service;\r\n\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.stereotype.Service;\r\n\r\nimport com.example.springshop.dto.ProductDTO;\r\nimport com.example.springshop.entity.Image;\r\nimport com.example.springshop.entity.Product;\r\nimport com.example.springshop.mapper.ProductMapper;\r\n\r\n@Service\r\npublic class ImageService {\r\n\t@Autowired\r\n\tprivate ProductMapper productMapper;\r\n\r\n\tpublic void addImageToProduct(ProductDTO productDTO, Image image) {\r\n\t\tProduct product = productMapper.toProduct(productDTO);\r\n\r\n\t\timage.setProduct(product);\r\n\t\tproduct.getImages().add(image);\r\n\t}\r\n}\r\n```\r\n\r\n\r\n\r\n\r\nMapper class:\r\n```\r\npackage com.example.springshop.mapper;\r\n\r\nimport java.util.List;\r\n\r\nimport org.mapstruct.InheritInverseConfiguration;\r\nimport org.mapstruct.Mapper;\r\nimport org.mapstruct.Mapping;\r\n\r\nimport com.example.springshop.dto.ProductDTO;\r\nimport com.example.springshop.entity.Product;\r\n\r\n@Mapper(componentModel = &quot;spring&quot;)\r\npublic interface ProductMapper {\r\n\t@Mapping(target = &quot;id&quot;, ignore = true)\r\n\t@Mapping(target = &quot;dateOfCreated&quot;, ignore = true)\r\n\tProduct toProduct(ProductDTO productDTO);\r\n\r\n\t@InheritInverseConfiguration\r\n\tProductDTO fromProduct(Product product);\r\n\r\n\tList&lt;Product&gt; toProductList(List&lt;ProductDTO&gt; productDTOs);\r\n\r\n\tList&lt;ProductDTO&gt; fromProductList(List&lt;Product&gt; products);\r\n}\r\n```\r\n\r\nbuild.gradle:\r\n```\r\nplugins {\r\n\tid &#39;java&#39;\r\n\tid &#39;org.springframework.boot&#39; version &#39;3.1.2&#39;\r\n\tid &#39;io.spring.dependency-management&#39; version &#39;1.1.2&#39;\r\n\tid &#39;com.diffplug.eclipse.apt&#39; version &#39;3.37.2&#39;\r\n}\r\n\r\ngroup = &#39;com.example&#39;\r\nversion = &#39;0.0.1-SNAPSHOT&#39;\r\n\r\njava {\r\n\tsourceCompatibility = &#39;20&#39;\r\n}\r\n\r\nconfigurations {\r\n\tcompileOnly {\r\n\t\textendsFrom annotationProcessor\r\n\t}\r\n}\r\n\r\nrepositories {\r\n\tmavenCentral()\r\n}\r\n\r\ndependencies {\r\n\timplementation &#39;org.springframework.boot:spring-boot-starter-data-jpa:3.1.2&#39;\r\n\timplementation &#39;org.springframework.boot:spring-boot-starter-thymeleaf&#39;\r\n\tcompileOnly &#39;org.projectlombok:lombok&#39;\r\n\tdevelopmentOnly &#39;org.springframework.boot:spring-boot-devtools&#39;\r\n\timplementation &#39;org.springframework.boot:spring-boot-starter-web:3.1.2&#39;\r\n\truntimeOnly &#39;org.postgresql:postgresql&#39;\r\n\tannotationProcessor &#39;org.projectlombok:lombok&#39;\r\n\ttestImplementation &#39;org.springframework.boot:spring-boot-starter-test&#39;\r\n\timplementation &#39;org.springframework.boot:spring-boot-starter-security:3.1.2&#39;\r\n\timplementation &#39;org.thymeleaf.extras:thymeleaf-extras-springsecurity6:3.1.2.RELEASE&#39;\r\n\timplementation &#39;org.mapstruct:mapstruct:1.5.5.Final&#39;\r\n\tannotationProcessor &#39;org.mapstruct:mapstruct-processor:1.5.5.Final&#39;\r\n\timplementation &#39;io.springfox:springfox-swagger2:3.0.0&#39;\r\n}\r\n\r\ntasks.named(&#39;test&#39;) {\r\n\tuseJUnitPlatform()\r\n}\r\n```\r\n\r\nTried a lot of ways and nothing helped.\r\nPlease could you take a look where I&#39;m going wrong?\r\n","title":"Mapstruct cannot find implemention for ProductMapper","body":"<p>Mapstruct cannot find implemention of my Mapper.Using latest version of mapstruct 1.5.5 Final,my IDE is eclipse.\nAnd I'm getting this error:</p>\n<pre><code>***************************\nAPPLICATION FAILED TO START\n***************************\n\nDescription:\n\nField productMapper in com.example.springshop.service.ImageService required a bean of type 'com.example.springshop.mapper.ProductMapper' that could not be found.\n\n\nAction:\n\nConsider defining a bean of type 'com.example.springshop.mapper.ProductMapper' in your configuration.\n\n</code></pre>\n<p>Product entity:</p>\n<pre><code>package com.example.springshop.entity;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDateTime;\nimport java.util.ArrayList;\nimport java.util.List;\n\nimport jakarta.persistence.CascadeType;\nimport jakarta.persistence.Column;\nimport jakarta.persistence.Entity;\nimport jakarta.persistence.FetchType;\nimport jakarta.persistence.GeneratedValue;\nimport jakarta.persistence.GenerationType;\nimport jakarta.persistence.Id;\nimport jakarta.persistence.OneToMany;\nimport jakarta.persistence.PrePersist;\nimport jakarta.persistence.Table;\nimport lombok.AllArgsConstructor;\nimport lombok.Builder;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\n@Entity\n@Table(name = &quot;products&quot;)\n@Data\n@NoArgsConstructor\n@AllArgsConstructor\n@Builder\npublic class Product {\n    @Id\n    @Column(name = &quot;id&quot;)\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @Column(name = &quot;title&quot;, nullable = false)\n    private String title;\n\n    @Column(name = &quot;description&quot;, nullable = false)\n    private String description;\n\n    @Column(name = &quot;price&quot;, nullable = false)\n    private BigDecimal price;\n\n    @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY, mappedBy = &quot;product&quot;)\n    @Builder.Default\n    private List&lt;Image&gt; images = new ArrayList&lt;&gt;();\n\n    @Column(name = &quot;preview_image_id&quot;)\n    private Long previewImageId;\n\n    @Column(name = &quot;date_of_created&quot;)\n    private LocalDateTime dateOfCreated;\n\n    @PrePersist\n    private void init() {\n        dateOfCreated = LocalDateTime.now();\n    }\n}\n</code></pre>\n<p>ProductDTO class:</p>\n<pre><code>package com.example.springshop.dto;\n\nimport java.math.BigDecimal;\nimport java.util.List;\n\nimport com.example.springshop.entity.Image;\n\nimport lombok.AllArgsConstructor;\nimport lombok.Builder;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\n@Data\n@NoArgsConstructor\n@AllArgsConstructor\n@Builder\npublic class ProductDTO {\n    private String title;\n    private String description;\n    private BigDecimal price;\n    private List&lt;Image&gt; images;\n    private Long previewImageId;\n}\n</code></pre>\n<p>Product Controller:</p>\n<pre><code>package com.example.springshop.controllers;\n\nimport java.security.Principal;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.ui.Model;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.PathVariable;\n\nimport com.example.springshop.repository.ProductRepository;\nimport com.example.springshop.service.ProductService;\n\n@Controller\npublic class ProductController {\n    @Autowired\n    private ProductRepository productRepository;\n\n    @Autowired\n    private ProductService productService;\n\n    @GetMapping(&quot;/&quot;)\n    public String mainPage(Model model) {\n        model.addAttribute(&quot;products&quot;, productRepository.findAll());\n        return &quot;main&quot;;\n    }\n\n    @GetMapping(&quot;/products/{id}&quot;)\n    public String productInfo(@PathVariable(value = &quot;id&quot;) Long id, Model model) {\n        if (!productRepository.existsById(id)) {\n            return &quot;redirect:/&quot;;\n        }\n\n        model.addAttribute(&quot;product&quot;, productService.findProductById(id));\n\n        return &quot;product_info&quot;;\n    }\n\n    @GetMapping(&quot;/products/{id}/bucket&quot;)\n    public String addBucket(@PathVariable Long id, Principal principal) {\n        if (principal == null) {\n            return &quot;redirect:/&quot;;\n        }\n\n        productService.addToUserBucket(id, principal.getName());\n        return &quot;redirect:/&quot;;\n    }\n}\n</code></pre>\n<p>Admin controller:</p>\n<pre><code>package com.example.springshop.controllers;\n\nimport java.io.IOException;\nimport java.util.List;\n\nimport org.springframework.stereotype.Controller;\nimport org.springframework.ui.Model;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.PathVariable;\nimport org.springframework.web.bind.annotation.PostMapping;\nimport org.springframework.web.bind.annotation.RequestParam;\nimport org.springframework.web.multipart.MultipartFile;\n\nimport com.example.springshop.dto.ProductDTO;\nimport com.example.springshop.service.ProductService;\n\n@Controller\npublic class AdminController {\n    private final ProductService productService;\n\n    public AdminController(ProductService productService) {\n        this.productService = productService;\n    }\n\n    @GetMapping(&quot;/create_product&quot;)\n    public String productCreatePage() {\n        return &quot;create_product&quot;;\n    }\n\n    @PostMapping(&quot;/create_product&quot;)\n    public String productCreate(@RequestParam(&quot;file1&quot;) MultipartFile file1,\n            @RequestParam(&quot;file2&quot;) MultipartFile file2,\n            @RequestParam(&quot;file3&quot;) MultipartFile file3,\n            ProductDTO product) throws IOException {\n        productService.saveProduct(product, file1, file2, file3);\n        return &quot;redirect:/&quot;;\n    }\n\n    @GetMapping(&quot;/edit_product/{id}&quot;)\n    public String editProductPage(@PathVariable(value = &quot;id&quot;) Long id, Model model) {\n        List&lt;ProductDTO&gt; result = productService.findProductById(id);\n\n        if (result == null) {\n            return &quot;redirect:/&quot;;\n        }\n\n        model.addAttribute(&quot;product&quot;, result);\n\n        return &quot;edit_product&quot;;\n    }\n\n    @PostMapping(&quot;/edit_product/{id}&quot;)\n    public String editProduct(ProductDTO productDTO) {\n        productService.editProduct(productDTO);\n        return &quot;redirect:/&quot;;\n    }\n\n    @GetMapping(&quot;/delete_product/{id}&quot;)\n    public String deleteProduct(@PathVariable(value = &quot;id&quot;) Long id) {\n        productService.deleteProduct(id);\n        return &quot;redirect:/&quot;;\n    }\n}\n</code></pre>\n<p>Product Service:</p>\n<pre><code>package com.example.springshop.service;\n\nimport java.io.IOException;\nimport java.util.ArrayList;\nimport java.util.Collections;\nimport java.util.List;\nimport java.util.Optional;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Service;\nimport org.springframework.transaction.annotation.Transactional;\nimport org.springframework.web.multipart.MultipartFile;\n\nimport com.example.springshop.dto.ProductDTO;\nimport com.example.springshop.entity.Bucket;\nimport com.example.springshop.entity.Image;\nimport com.example.springshop.entity.Product;\nimport com.example.springshop.entity.User;\nimport com.example.springshop.mapper.ImageMapper;\nimport com.example.springshop.mapper.ProductMapper;\nimport com.example.springshop.repository.ProductRepository;\nimport com.example.springshop.repository.UserRepository;\n\nimport lombok.extern.slf4j.Slf4j;\n\n@Service\n@Slf4j\npublic class ProductService {\n    @Autowired\n    private ProductMapper productMapper;\n    \n    @Autowired\n    private ImageMapper imageMapper;\n\n    private final ProductRepository productRepository;\n    private final UserRepository userRepository;\n\n    private final BucketService bucketService;\n    private final ImageService imageService;\n\n    public ProductService(ProductRepository productRepository, UserRepository userRepository,\n            BucketService bucketService, ImageService imageService) {\n        this.productRepository = productRepository;\n        this.userRepository = userRepository;\n        this.bucketService = bucketService;\n        this.imageService = imageService;\n    }\n\n    public List&lt;ProductDTO&gt; listOfProducts() {\n        return productMapper.fromProductList(productRepository.findAll());\n    }\n\n    public ProductDTO getProductById(Long id) {\n        return productMapper.fromProduct(productRepository.findById(id).orElse(null));\n    }\n\n    public void saveProduct(ProductDTO product, MultipartFile file1, MultipartFile file2, MultipartFile file3)\n            throws IOException {\n        Image image1;\n        Image image2;\n        Image image3;\n        if (file1.getSize() != 0) {\n            image1 = imageMapper.fromMultipartToImage(file1);\n            image1.setPreviewImage(true);\n            imageService.addImageToProduct(product, image1);\n        }\n        if (file2.getSize() != 0) {\n            image2 = imageMapper.fromMultipartToImage(file2);\n            imageService.addImageToProduct(product, image2);\n        }\n        if (file3.getSize() != 0) {\n            image3 = imageMapper.fromMultipartToImage(file3);\n            imageService.addImageToProduct(product, image3);\n        }\n        log.info(&quot;Saving new Product. Title: {}&quot;, product.getTitle());\n        Product productFromDb = productRepository.save(productMapper.toProduct(product));\n        productFromDb.setPreviewImageId(productFromDb.getImages().get(0).getId());\n        productRepository.save(productMapper.toProduct(product));\n    }\n\n    public List&lt;ProductDTO&gt; findProductById(Long id) {\n        List&lt;Product&gt; res = new ArrayList&lt;&gt;();\n\n        if (!productRepository.existsById(id)) {\n            return null;\n        }\n\n        Optional&lt;Product&gt; product = productRepository.findById(id);\n        product.ifPresent(res::add);\n\n        return productMapper.fromProductList(res);\n\n    }\n\n    public boolean deleteProduct(Long id) {\n        if (!productRepository.existsById(id)) {\n            return false;\n        }\n\n        productRepository.deleteById(id);\n\n        return true;\n    }\n\n    public boolean editProduct(ProductDTO productDTO) {\n        String title = productDTO.getTitle();\n\n        if (productRepository.findByTitle(title) == null) {\n            return false;\n        }\n\n        Product product = Product.builder()\n                .title(title)\n                .description(productDTO.getDescription())\n                .price(productDTO.getPrice())\n                .build();\n\n        productRepository.save(product);\n\n        log.info(&quot;Edit new User with title : {}&quot;, title);\n\n        return true;\n    }\n\n    @Transactional\n    public void addToUserBucket(Long productId, String username) {\n        User user = userRepository.findByUsername(username);\n        if (user == null) {\n            throw new RuntimeException(&quot;User not found&quot; + username);\n        }\n\n        Bucket bucket = user.getBucket();\n        if (bucket == null) {\n            Bucket newBucket = bucketService.createBucket(user, Collections.singletonList(productId));\n            user.setBucket(newBucket);\n            userRepository.save(user);\n        } else {\n            bucketService.addProducts(bucket, Collections.singletonList(productId));\n        }\n\n    }\n}\n</code></pre>\n<p>Image Service:</p>\n<pre><code>package com.example.springshop.service;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Service;\n\nimport com.example.springshop.dto.ProductDTO;\nimport com.example.springshop.entity.Image;\nimport com.example.springshop.entity.Product;\nimport com.example.springshop.mapper.ProductMapper;\n\n@Service\npublic class ImageService {\n    @Autowired\n    private ProductMapper productMapper;\n\n    public void addImageToProduct(ProductDTO productDTO, Image image) {\n        Product product = productMapper.toProduct(productDTO);\n\n        image.setProduct(product);\n        product.getImages().add(image);\n    }\n}\n</code></pre>\n<p>Mapper class:</p>\n<pre><code>package com.example.springshop.mapper;\n\nimport java.util.List;\n\nimport org.mapstruct.InheritInverseConfiguration;\nimport org.mapstruct.Mapper;\nimport org.mapstruct.Mapping;\n\nimport com.example.springshop.dto.ProductDTO;\nimport com.example.springshop.entity.Product;\n\n@Mapper(componentModel = &quot;spring&quot;)\npublic interface ProductMapper {\n    @Mapping(target = &quot;id&quot;, ignore = true)\n    @Mapping(target = &quot;dateOfCreated&quot;, ignore = true)\n    Product toProduct(ProductDTO productDTO);\n\n    @InheritInverseConfiguration\n    ProductDTO fromProduct(Product product);\n\n    List&lt;Product&gt; toProductList(List&lt;ProductDTO&gt; productDTOs);\n\n    List&lt;ProductDTO&gt; fromProductList(List&lt;Product&gt; products);\n}\n</code></pre>\n<p>build.gradle:</p>\n<pre><code>plugins {\n    id 'java'\n    id 'org.springframework.boot' version '3.1.2'\n    id 'io.spring.dependency-management' version '1.1.2'\n    id 'com.diffplug.eclipse.apt' version '3.37.2'\n}\n\ngroup = 'com.example'\nversion = '0.0.1-SNAPSHOT'\n\njava {\n    sourceCompatibility = '20'\n}\n\nconfigurations {\n    compileOnly {\n        extendsFrom annotationProcessor\n    }\n}\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    implementation 'org.springframework.boot:spring-boot-starter-data-jpa:3.1.2'\n    implementation 'org.springframework.boot:spring-boot-starter-thymeleaf'\n    compileOnly 'org.projectlombok:lombok'\n    developmentOnly 'org.springframework.boot:spring-boot-devtools'\n    implementation 'org.springframework.boot:spring-boot-starter-web:3.1.2'\n    runtimeOnly 'org.postgresql:postgresql'\n    annotationProcessor 'org.projectlombok:lombok'\n    testImplementation 'org.springframework.boot:spring-boot-starter-test'\n    implementation 'org.springframework.boot:spring-boot-starter-security:3.1.2'\n    implementation 'org.thymeleaf.extras:thymeleaf-extras-springsecurity6:3.1.2.RELEASE'\n    implementation 'org.mapstruct:mapstruct:1.5.5.Final'\n    annotationProcessor 'org.mapstruct:mapstruct-processor:1.5.5.Final'\n    implementation 'io.springfox:springfox-swagger2:3.0.0'\n}\n\ntasks.named('test') {\n    useJUnitPlatform()\n}\n</code></pre>\n<p>Tried a lot of ways and nothing helped.\nPlease could you take a look where I'm going wrong?</p>\n"},{"tags":["java","maven","dependencies","dependency-management"],"comments":[{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":1,"creation_date":1692113664,"post_id":76906867,"comment_id":135578894,"body_markdown":"You should share the actual dependencies you are using so others can understand what artifacts exactly are you using.","body":"You should share the actual dependencies you are using so others can understand what artifacts exactly are you using."}],"answers":[{"tags":[],"owner":{"account_id":24440814,"reputation":41,"user_id":18364543,"display_name":"Om Shreenidhi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693568418,"creation_date":1693568418,"answer_id":77022806,"question_id":76906867,"body_markdown":"You can download the targ.gz file from here -\r\nhttps://netty.io/downloads.html.  \r\n\r\nInside the &quot;all&quot; folder edit the pom.xml by adding this snippet in the `plugins` section - \r\n```\r\n      &lt;plugin&gt;\r\n        &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;3.3.0&lt;/version&gt;\r\n        &lt;configuration&gt;\r\n          &lt;descriptorRefs&gt;\r\n            &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\r\n          &lt;/descriptorRefs&gt;\r\n        &lt;/configuration&gt;\r\n        &lt;executions&gt;\r\n          &lt;execution&gt;\r\n            &lt;id&gt;make-assembly&lt;/id&gt;\r\n            &lt;phase&gt;package&lt;/phase&gt;\r\n            &lt;goals&gt;\r\n              &lt;goal&gt;single&lt;/goal&gt;\r\n            &lt;/goals&gt;\r\n          &lt;/execution&gt;\r\n        &lt;/executions&gt;\r\n      &lt;/plugin&gt;\r\n```\r\n\r\nand then run -\r\n```\r\nmvn clean package \r\n```\r\nThe jar you need will be created inside `all/target`. It&#39;ll have a prefix like *`-all-dependencies.jar`.","title":"Update Java Dependency from Fat Jar to Thin Jahr","body":"<p>You can download the targ.gz file from here -\n<a href=\"https://netty.io/downloads.html\" rel=\"nofollow noreferrer\">https://netty.io/downloads.html</a>.</p>\n<p>Inside the &quot;all&quot; folder edit the pom.xml by adding this snippet in the <code>plugins</code> section -</p>\n<pre><code>      &lt;plugin&gt;\n        &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n        &lt;version&gt;3.3.0&lt;/version&gt;\n        &lt;configuration&gt;\n          &lt;descriptorRefs&gt;\n            &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\n          &lt;/descriptorRefs&gt;\n        &lt;/configuration&gt;\n        &lt;executions&gt;\n          &lt;execution&gt;\n            &lt;id&gt;make-assembly&lt;/id&gt;\n            &lt;phase&gt;package&lt;/phase&gt;\n            &lt;goals&gt;\n              &lt;goal&gt;single&lt;/goal&gt;\n            &lt;/goals&gt;\n          &lt;/execution&gt;\n        &lt;/executions&gt;\n      &lt;/plugin&gt;\n</code></pre>\n<p>and then run -</p>\n<pre><code>mvn clean package \n</code></pre>\n<p>The jar you need will be created inside <code>all/target</code>. It'll have a prefix like *<code>-all-dependencies.jar</code>.</p>\n"}],"owner":{"account_id":17060626,"reputation":49,"user_id":12344149,"display_name":"Mhanxsolo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1693568418,"creation_date":1692110721,"question_id":76906867,"body_markdown":"I&#39;m currently working with Talend Studio, and in one of our projects, we need to update the netty-all library from version 4.1.68 to 4.1.96. After importing the newer jar file, we discovered that version 4.1.96 is significantly smaller than the previous one. Consequently, we encountered a series of ClassNotFoundException errors.\r\n\r\nTo resolve these issues, we had to manually import several specific Netty dependencies, such as netty-transport and netty-resolver. This approach feels cumbersome, and I&#39;m wondering if there might be a more efficient way to handle this update.\r\n\r\nSpecifically, I have two questions:\r\n\r\nIs there a method to generate a netty-all 4.1.96 jar file that includes all necessary dependencies (a fat jar)?\r\nIf the above solution is not feasible or optimal, what alternative approaches could be more efficient for updating the Netty library in our Talend Studio project?\r\nAny guidance or insights from those experienced with Netty and Talend Studio would be greatly appreciated. Thank you!","title":"Update Java Dependency from Fat Jar to Thin Jahr","body":"<p>I'm currently working with Talend Studio, and in one of our projects, we need to update the netty-all library from version 4.1.68 to 4.1.96. After importing the newer jar file, we discovered that version 4.1.96 is significantly smaller than the previous one. Consequently, we encountered a series of ClassNotFoundException errors.</p>\n<p>To resolve these issues, we had to manually import several specific Netty dependencies, such as netty-transport and netty-resolver. This approach feels cumbersome, and I'm wondering if there might be a more efficient way to handle this update.</p>\n<p>Specifically, I have two questions:</p>\n<p>Is there a method to generate a netty-all 4.1.96 jar file that includes all necessary dependencies (a fat jar)?\nIf the above solution is not feasible or optimal, what alternative approaches could be more efficient for updating the Netty library in our Talend Studio project?\nAny guidance or insights from those experienced with Netty and Talend Studio would be greatly appreciated. Thank you!</p>\n"},{"tags":["python","java","encryption","md5","pycrypto"],"comments":[{"owner":{"account_id":12359353,"reputation":42442,"user_id":9014097,"display_name":"Topaco"},"score":0,"creation_date":1693560482,"post_id":77021824,"comment_id":135780352,"body_markdown":"Did you check that `generateKeyAndIv()` and `generate_key_and_iv()` generate the same key and IV for the same input data?","body":"Did you check that <code>generateKeyAndIv()</code> and <code>generate_key_and_iv()</code> generate the same key and IV for the same input data?"},{"owner":{"account_id":22080350,"reputation":45,"user_id":16340011,"display_name":"Abhishek Kumar"},"score":0,"creation_date":1693564799,"post_id":77021824,"comment_id":135781142,"body_markdown":"No, they are in completely different format, \nfor java its like this: \nkey: [101, 120, -81, 7, -122, 38, -36, 27, -51, 120, -105, 62, 38, -109, 94, 47, -10, 92, 42, 43, -7, 77, -70, -16, -125, -48, -125, -101, 32, -101, -26, -4]\n\nand in python:\n bytearray(b&quot;U\\xb2,\\x95\\x16\\&#39;\\x96\\x96\\\\x\\xf4=\\xd9\\xec\\nB!\\xc5Y\\xcc\\xa8]\\x86\\xd41\\x84\\xe2\\x06\\xb9\\n\\x1d\\x82&quot;)","body":"No, they are in completely different format,  for java its like this:  key: [101, 120, -81, 7, -122, 38, -36, 27, -51, 120, -105, 62, 38, -109, 94, 47, -10, 92, 42, 43, -7, 77, -70, -16, -125, -48, -125, -101, 32, -101, -26, -4]  and in python:  bytearray(b&quot;U\\xb2,\\x95\\x16\\&#39;\\x96\\x96\\\\x\\xf4=\\xd9\\xec\\nB!\\xc5&zwnj;&#8203;Y\\xcc\\xa8]\\x86\\xd41\\&zwnj;&#8203;x84\\xe2\\x06\\xb9\\n\\x1&zwnj;&#8203;d\\x82&quot;)"},{"owner":{"account_id":12359353,"reputation":42442,"user_id":9014097,"display_name":"Topaco"},"score":0,"creation_date":1693567655,"post_id":77021824,"comment_id":135781599,"body_markdown":"The problem is a flaw in the key derivation, see my answer.","body":"The problem is a flaw in the key derivation, see my answer."}],"answers":[{"comments":[{"owner":{"account_id":22080350,"reputation":45,"user_id":16340011,"display_name":"Abhishek Kumar"},"score":0,"creation_date":1693573829,"post_id":77022566,"comment_id":135782835,"body_markdown":"Thanks!!!!! working now... wasted 3 days on this.","body":"Thanks!!!!! working now... wasted 3 days on this."}],"tags":[],"owner":{"account_id":12359353,"reputation":42442,"user_id":9014097,"display_name":"Topaco"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1693568096,"creation_date":1693566198,"answer_id":77022566,"question_id":77021824,"body_markdown":"The bug is in the key derivation: The Java implementation of the digest automatically resets the instance to the initial state after a `digest()` call, unlike the Python implementation.  \r\nTherefore, in the Python implementation, the digest must be *explicitly* reset, e.g. by creating a new digest object.  \r\nAttention: This is necessary in two places (whereby the second modification is only noticeable for iterations greater than 1).\r\n\r\nThe following changes are required in `generate_key_and_iv()`:\r\n\r\n```py\r\n...\r\ntry:\r\n    while generated_length &lt; key_length + iv_length:\r\n        h = md() # create new instance (1.)\r\n        if generated_length &gt; 0:\r\n            h.update(generated_data[generated_length - digest_length:generated_length])\r\n        h.update(password)\r\n        if salt is not None:\r\n            h.update(salt[:8])\r\n        generated_data[generated_length:generated_length + digest_length] = h.digest()\r\n\r\n        for i in range(1, iterations):\r\n            h = md() # create new instance (2.)\r\n            h.update(generated_data[generated_length:generated_length + digest_length])\r\n            generated_data[generated_length:generated_length + digest_length] = h.digest()\r\n\r\n        generated_length += digest_length\r\n\t\t...\r\n```\r\n\r\nFor a test (and only for the test), a static salt can be used in both implementations. With identical plaintext and password, both encryptions then provide the same ciphertext.\r\n\r\nFor completeness, the key derivation implemented in the Java code is a lightweight implementation of [`EVP_BytesToKey()`][2].\r\n\r\n----------\r\n\r\nIn addition, a `safe=&#39;&#39;` should be passed as 2nd parameter in [`urllib.parse.quote()`][1] so that `/` is also replaced by an escape sequence.\r\n\r\n[1]: https://docs.python.org/3/library/urllib.parse.html#urllib.parse.quote\r\n[2]: https://www.openssl.org/docs/man3.1/man3/EVP_BytesToKey.html","title":"Converting AES 256 Java Encryption in python","body":"<p>The bug is in the key derivation: The Java implementation of the digest automatically resets the instance to the initial state after a <code>digest()</code> call, unlike the Python implementation.<br />\nTherefore, in the Python implementation, the digest must be <em>explicitly</em> reset, e.g. by creating a new digest object.<br />\nAttention: This is necessary in two places (whereby the second modification is only noticeable for iterations greater than 1).</p>\n<p>The following changes are required in <code>generate_key_and_iv()</code>:</p>\n<pre class=\"lang-py prettyprint-override\"><code>...\ntry:\n    while generated_length &lt; key_length + iv_length:\n        h = md() # create new instance (1.)\n        if generated_length &gt; 0:\n            h.update(generated_data[generated_length - digest_length:generated_length])\n        h.update(password)\n        if salt is not None:\n            h.update(salt[:8])\n        generated_data[generated_length:generated_length + digest_length] = h.digest()\n\n        for i in range(1, iterations):\n            h = md() # create new instance (2.)\n            h.update(generated_data[generated_length:generated_length + digest_length])\n            generated_data[generated_length:generated_length + digest_length] = h.digest()\n\n        generated_length += digest_length\n        ...\n</code></pre>\n<p>For a test (and only for the test), a static salt can be used in both implementations. With identical plaintext and password, both encryptions then provide the same ciphertext.</p>\n<p>For completeness, the key derivation implemented in the Java code is a lightweight implementation of <a href=\"https://www.openssl.org/docs/man3.1/man3/EVP_BytesToKey.html\" rel=\"nofollow noreferrer\"><code>EVP_BytesToKey()</code></a>.</p>\n<hr />\n<p>In addition, a <code>safe=''</code> should be passed as 2nd parameter in <a href=\"https://docs.python.org/3/library/urllib.parse.html#urllib.parse.quote\" rel=\"nofollow noreferrer\"><code>urllib.parse.quote()</code></a> so that <code>/</code> is also replaced by an escape sequence.</p>\n"}],"owner":{"account_id":22080350,"reputation":45,"user_id":16340011,"display_name":"Abhishek Kumar"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":73,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77022566,"answer_count":1,"score":0,"last_activity_date":1693568096,"creation_date":1693559049,"question_id":77021824,"body_markdown":"I have enryption code written in Java, and I am trying to write it in python, But the issue is python encryption and decryption is working fine but when trying to decrypt the  java encrypted string using python, its not working.\r\n\r\nThis is the Java code that I had. \r\n\r\n\r\n```\r\nimport lombok.extern.slf4j.Slf4j;\r\nimport org.bouncycastle.jce.provider.BouncyCastleProvider;\r\n\r\nimport javax.crypto.Cipher;\r\nimport javax.crypto.spec.IvParameterSpec;\r\nimport javax.crypto.spec.SecretKeySpec;\r\nimport java.net.URLEncoder;\r\nimport java.nio.charset.StandardCharsets;\r\nimport java.security.*;\r\nimport java.util.Arrays;\r\nimport java.util.Base64;\r\n\r\n\r\n@Slf4j\r\npublic class EncryptUsingAES {\r\n\r\n\r\n    /**\r\n     * This function takes a String as input and encrypts it using AES Algorithm\r\n     * @param stringToEncrypt\r\n     * @param publicKey\r\n     * @return\r\n     */\r\n    public String returnEncryptedString(String stringToEncrypt, String publicKey) {\r\n\r\n        Security.addProvider(new BouncyCastleProvider());\r\n        try{\r\n            SecureRandom sr = new SecureRandom();\r\n            byte[] salt = new byte[8];\r\n            sr.nextBytes(salt);\r\n            final byte[][] keyAndIV = generateKeyAndIV(salt, publicKey.getBytes(StandardCharsets.UTF_8), MessageDigest.getInstance(&quot;MD5&quot;));\r\n            Cipher cipher = Cipher.getInstance(&quot;AES/CBC/PKCS7Padding&quot;, BouncyCastleProvider.PROVIDER_NAME);\r\n            cipher.init(Cipher.ENCRYPT_MODE, new SecretKeySpec(keyAndIV[0], &quot;AES&quot;), new IvParameterSpec(keyAndIV[1]));\r\n            byte[] encryptedData = cipher.doFinal(stringToEncrypt.getBytes(StandardCharsets.UTF_8));\r\n            byte[] prefixAndSaltAndEncryptedData = new byte[16 + encryptedData.length];\r\n\r\n            System.arraycopy(&quot;Salted__&quot;.getBytes(StandardCharsets.UTF_8), 0, prefixAndSaltAndEncryptedData, 0, 8);\r\n\r\n            System.arraycopy(salt, 0, prefixAndSaltAndEncryptedData, 8, 8);\r\n\r\n            System.arraycopy(encryptedData, 0, prefixAndSaltAndEncryptedData, 16, encryptedData.length);\r\n            String encryptedString = URLEncoder.encode(Base64.getEncoder().encodeToString(prefixAndSaltAndEncryptedData),&quot;UTF-8&quot;);\r\n\r\n            return encryptedString;\r\n        } catch (Exception e) {\r\n            return null;\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * this function creates key Initialisation Vector which is required for AES Encryption\r\n     * @param salt\r\n     * @param password\r\n     * @param md\r\n     * @return\r\n     */\r\n    protected byte[][] generateKeyAndIV(byte[] salt, byte[] password, MessageDigest md) {\r\n\r\n        int keyLength = 32;\r\n        int ivLength = 16;\r\n        int iterations = 1;\r\n        int digestLength = md.getDigestLength();\r\n        int requiredLength = (keyLength + ivLength + digestLength - 1) / digestLength * digestLength;\r\n        byte[] generatedData = new byte[requiredLength];\r\n        int generatedLength = 0;\r\n\r\n        try {\r\n            md.reset();\r\n\r\n            while (generatedLength &lt; keyLength + ivLength) {\r\n\r\n                if (generatedLength &gt; 0)\r\n                    md.update(generatedData, generatedLength - digestLength, digestLength);\r\n                md.update(password);\r\n                if (salt != null)\r\n                    md.update(salt, 0, 8);\r\n                md.digest(generatedData, generatedLength, digestLength);\r\n\r\n\r\n                for (int i = 1; i &lt; iterations; i++) {\r\n                    md.update(generatedData, generatedLength, digestLength);\r\n                    md.digest(generatedData, generatedLength, digestLength);\r\n                }\r\n\r\n                generatedLength += digestLength;\r\n            }\r\n\r\n            byte[][] result = new byte[2][];\r\n            result[0] = Arrays.copyOfRange(generatedData, 0, keyLength);\r\n            if (ivLength &gt; 0)\r\n                result[1] = Arrays.copyOfRange(generatedData, keyLength, keyLength + ivLength);\r\n\r\n            return result;\r\n\r\n        } catch (DigestException e) {\r\n            log.error(OrderStatusSmsTrackerConstants.ORDER_STATUS_SMS_TRACKER_SERVICE+ \r\n            return null;\r\n        } finally {\r\n\r\n            Arrays.fill(generatedData, (byte)0);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nAnd this is my python encryption and decryption code, \r\n\r\n\r\n```\r\nfrom Crypto.Cipher import AES\r\nfrom Crypto.Util.Padding import pad, unpad\r\nfrom Crypto.Random import get_random_bytes\r\nimport base64\r\nimport urllib.parse\r\nimport hashlib\r\nimport logging\r\n\r\nclass EncryptUsingAES:\r\n    def return_encrypted_string(self, string_to_encrypt, public_key):\r\n        try:\r\n            salt = get_random_bytes(8)\r\n            key_and_iv = self.generate_key_and_iv(salt, public_key.encode(&#39;utf-8&#39;), hashlib.md5)\r\n\r\n            cipher = AES.new(key_and_iv[0], AES.MODE_CBC, iv=key_and_iv[1])\r\n            encrypted_data = cipher.encrypt(pad(string_to_encrypt.encode(&#39;utf-8&#39;), AES.block_size))\r\n\r\n            prefix_and_salt_and_encrypted_data = b&quot;Salted__&quot; + salt + encrypted_data\r\n            encrypted_string = urllib.parse.quote(base64.b64encode(prefix_and_salt_and_encrypted_data))\r\n\r\n            return encrypted_string\r\n        except Exception as e:\r\n            logging.error(&quot;Error when encrypting: &quot; + str(e))\r\n            return None\r\n        \r\n    def return_decrypted_string(self, encrypted_string, public_key):\r\n        try:\r\n            encrypted_data = base64.b64decode(urllib.parse.unquote(encrypted_string))\r\n            salt = encrypted_data[8:16]\r\n            encrypted_data = encrypted_data[16:]\r\n\r\n            key_and_iv = self.generate_key_and_iv(salt, public_key.encode(&#39;utf-8&#39;), hashlib.md5)\r\n\r\n            cipher = AES.new(key_and_iv[0], AES.MODE_CBC, iv=key_and_iv[1])\r\n            decrypted_data = unpad(cipher.decrypt(encrypted_data), AES.block_size)\r\n\r\n            return decrypted_data.decode(&#39;utf-8&#39;)\r\n        except Exception as e:\r\n            logging.error(&quot;Error when decrypting: &quot; + str(e))\r\n            return None\r\n\r\n    def generate_key_and_iv(self, salt, password, md):\r\n        key_length = 32\r\n        iv_length = 16\r\n        iterations = 1\r\n        digest_length = md().digest_size\r\n        required_length = (key_length + iv_length + digest_length - 1) // digest_length * digest_length\r\n        generated_data = bytearray([0]) * required_length\r\n        generated_length = 0\r\n\r\n        try:\r\n            md = md()\r\n            while generated_length &lt; key_length + iv_length:\r\n                if generated_length &gt; 0:\r\n                    md.update(generated_data[generated_length - digest_length:generated_length])\r\n                md.update(password)\r\n                if salt is not None:\r\n                    md.update(salt[:8])\r\n                generated_data[generated_length:generated_length + digest_length] = md.digest()\r\n\r\n                for i in range(1, iterations):\r\n                    md.update(generated_data[generated_length:generated_length + digest_length])\r\n                    generated_data[generated_length:generated_length + digest_length] = md.digest()\r\n\r\n                generated_length += digest_length\r\n\r\n            key = generated_data[:key_length]\r\n            iv = generated_data[key_length:key_length + iv_length]\r\n            return key, iv\r\n\r\n        except Exception as e:\r\n            logging.error(&quot;Error when generating key and IV: &quot; + str(e))\r\n            return None\r\n        finally:\r\n            for i in range(len(generated_data)):\r\n                generated_data[i] = 0\r\n```\r\n\r\nCan anyone help me on this. ","title":"Converting AES 256 Java Encryption in python","body":"<p>I have enryption code written in Java, and I am trying to write it in python, But the issue is python encryption and decryption is working fine but when trying to decrypt the  java encrypted string using python, its not working.</p>\n<p>This is the Java code that I had.</p>\n<pre><code>import lombok.extern.slf4j.Slf4j;\nimport org.bouncycastle.jce.provider.BouncyCastleProvider;\n\nimport javax.crypto.Cipher;\nimport javax.crypto.spec.IvParameterSpec;\nimport javax.crypto.spec.SecretKeySpec;\nimport java.net.URLEncoder;\nimport java.nio.charset.StandardCharsets;\nimport java.security.*;\nimport java.util.Arrays;\nimport java.util.Base64;\n\n\n@Slf4j\npublic class EncryptUsingAES {\n\n\n    /**\n     * This function takes a String as input and encrypts it using AES Algorithm\n     * @param stringToEncrypt\n     * @param publicKey\n     * @return\n     */\n    public String returnEncryptedString(String stringToEncrypt, String publicKey) {\n\n        Security.addProvider(new BouncyCastleProvider());\n        try{\n            SecureRandom sr = new SecureRandom();\n            byte[] salt = new byte[8];\n            sr.nextBytes(salt);\n            final byte[][] keyAndIV = generateKeyAndIV(salt, publicKey.getBytes(StandardCharsets.UTF_8), MessageDigest.getInstance(&quot;MD5&quot;));\n            Cipher cipher = Cipher.getInstance(&quot;AES/CBC/PKCS7Padding&quot;, BouncyCastleProvider.PROVIDER_NAME);\n            cipher.init(Cipher.ENCRYPT_MODE, new SecretKeySpec(keyAndIV[0], &quot;AES&quot;), new IvParameterSpec(keyAndIV[1]));\n            byte[] encryptedData = cipher.doFinal(stringToEncrypt.getBytes(StandardCharsets.UTF_8));\n            byte[] prefixAndSaltAndEncryptedData = new byte[16 + encryptedData.length];\n\n            System.arraycopy(&quot;Salted__&quot;.getBytes(StandardCharsets.UTF_8), 0, prefixAndSaltAndEncryptedData, 0, 8);\n\n            System.arraycopy(salt, 0, prefixAndSaltAndEncryptedData, 8, 8);\n\n            System.arraycopy(encryptedData, 0, prefixAndSaltAndEncryptedData, 16, encryptedData.length);\n            String encryptedString = URLEncoder.encode(Base64.getEncoder().encodeToString(prefixAndSaltAndEncryptedData),&quot;UTF-8&quot;);\n\n            return encryptedString;\n        } catch (Exception e) {\n            return null;\n        }\n    }\n\n\n    /**\n     * this function creates key Initialisation Vector which is required for AES Encryption\n     * @param salt\n     * @param password\n     * @param md\n     * @return\n     */\n    protected byte[][] generateKeyAndIV(byte[] salt, byte[] password, MessageDigest md) {\n\n        int keyLength = 32;\n        int ivLength = 16;\n        int iterations = 1;\n        int digestLength = md.getDigestLength();\n        int requiredLength = (keyLength + ivLength + digestLength - 1) / digestLength * digestLength;\n        byte[] generatedData = new byte[requiredLength];\n        int generatedLength = 0;\n\n        try {\n            md.reset();\n\n            while (generatedLength &lt; keyLength + ivLength) {\n\n                if (generatedLength &gt; 0)\n                    md.update(generatedData, generatedLength - digestLength, digestLength);\n                md.update(password);\n                if (salt != null)\n                    md.update(salt, 0, 8);\n                md.digest(generatedData, generatedLength, digestLength);\n\n\n                for (int i = 1; i &lt; iterations; i++) {\n                    md.update(generatedData, generatedLength, digestLength);\n                    md.digest(generatedData, generatedLength, digestLength);\n                }\n\n                generatedLength += digestLength;\n            }\n\n            byte[][] result = new byte[2][];\n            result[0] = Arrays.copyOfRange(generatedData, 0, keyLength);\n            if (ivLength &gt; 0)\n                result[1] = Arrays.copyOfRange(generatedData, keyLength, keyLength + ivLength);\n\n            return result;\n\n        } catch (DigestException e) {\n            log.error(OrderStatusSmsTrackerConstants.ORDER_STATUS_SMS_TRACKER_SERVICE+ \n            return null;\n        } finally {\n\n            Arrays.fill(generatedData, (byte)0);\n        }\n    }\n}\n</code></pre>\n<p>And this is my python encryption and decryption code,</p>\n<pre><code>from Crypto.Cipher import AES\nfrom Crypto.Util.Padding import pad, unpad\nfrom Crypto.Random import get_random_bytes\nimport base64\nimport urllib.parse\nimport hashlib\nimport logging\n\nclass EncryptUsingAES:\n    def return_encrypted_string(self, string_to_encrypt, public_key):\n        try:\n            salt = get_random_bytes(8)\n            key_and_iv = self.generate_key_and_iv(salt, public_key.encode('utf-8'), hashlib.md5)\n\n            cipher = AES.new(key_and_iv[0], AES.MODE_CBC, iv=key_and_iv[1])\n            encrypted_data = cipher.encrypt(pad(string_to_encrypt.encode('utf-8'), AES.block_size))\n\n            prefix_and_salt_and_encrypted_data = b&quot;Salted__&quot; + salt + encrypted_data\n            encrypted_string = urllib.parse.quote(base64.b64encode(prefix_and_salt_and_encrypted_data))\n\n            return encrypted_string\n        except Exception as e:\n            logging.error(&quot;Error when encrypting: &quot; + str(e))\n            return None\n        \n    def return_decrypted_string(self, encrypted_string, public_key):\n        try:\n            encrypted_data = base64.b64decode(urllib.parse.unquote(encrypted_string))\n            salt = encrypted_data[8:16]\n            encrypted_data = encrypted_data[16:]\n\n            key_and_iv = self.generate_key_and_iv(salt, public_key.encode('utf-8'), hashlib.md5)\n\n            cipher = AES.new(key_and_iv[0], AES.MODE_CBC, iv=key_and_iv[1])\n            decrypted_data = unpad(cipher.decrypt(encrypted_data), AES.block_size)\n\n            return decrypted_data.decode('utf-8')\n        except Exception as e:\n            logging.error(&quot;Error when decrypting: &quot; + str(e))\n            return None\n\n    def generate_key_and_iv(self, salt, password, md):\n        key_length = 32\n        iv_length = 16\n        iterations = 1\n        digest_length = md().digest_size\n        required_length = (key_length + iv_length + digest_length - 1) // digest_length * digest_length\n        generated_data = bytearray([0]) * required_length\n        generated_length = 0\n\n        try:\n            md = md()\n            while generated_length &lt; key_length + iv_length:\n                if generated_length &gt; 0:\n                    md.update(generated_data[generated_length - digest_length:generated_length])\n                md.update(password)\n                if salt is not None:\n                    md.update(salt[:8])\n                generated_data[generated_length:generated_length + digest_length] = md.digest()\n\n                for i in range(1, iterations):\n                    md.update(generated_data[generated_length:generated_length + digest_length])\n                    generated_data[generated_length:generated_length + digest_length] = md.digest()\n\n                generated_length += digest_length\n\n            key = generated_data[:key_length]\n            iv = generated_data[key_length:key_length + iv_length]\n            return key, iv\n\n        except Exception as e:\n            logging.error(&quot;Error when generating key and IV: &quot; + str(e))\n            return None\n        finally:\n            for i in range(len(generated_data)):\n                generated_data[i] = 0\n</code></pre>\n<p>Can anyone help me on this.</p>\n"},{"tags":["java","swig"],"comments":[{"owner":{"account_id":7012253,"reputation":1690,"user_id":5374691,"accept_rate":87,"display_name":"esQmo_"},"score":0,"creation_date":1693562479,"post_id":77021846,"comment_id":135780727,"body_markdown":"I guess you can do so by creating a long variable in Java and passing it to the JNI function then in the JNI code, you can cast the long variable to a void** type and pass it to the C function...","body":"I guess you can do so by creating a long variable in Java and passing it to the JNI function then in the JNI code, you can cast the long variable to a void** type and pass it to the C function..."},{"owner":{"account_id":1684984,"reputation":27030,"user_id":1548468,"display_name":"Botje"},"score":0,"creation_date":1693567660,"post_id":77021846,"comment_id":135781601,"body_markdown":"Create a c wrapper function that returns a pointer of the appropriate type. Your calling code will be much nicer.","body":"Create a c wrapper function that returns a pointer of the appropriate type. Your calling code will be much nicer."}],"owner":{"account_id":1702087,"reputation":88,"user_id":1561860,"display_name":"ITmindCo"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1693567673,"creation_date":1693559257,"question_id":77021846,"body_markdown":"There is the following function in shared library (dll):\r\n\r\n    intptr_t GetClassObject(void** pptr)\r\n    {\r\n        if(!*pptr)\r\n        {\r\n            int value = 10;\r\n            *pptr= &amp;value; //here is another code like new Obj()\r\n            return 0;\r\n        }\r\n    \r\n        return (intptr_t )*pptr;\r\n    }\r\n\r\n\r\nSWIG made the following wrapper:\r\n\r\n    SWIGEXPORT jint JNICALL Java_AddInSwigJNI_GetClassObject(JNIEnv *jenv, jclass jcls, jlong jarg1) {\r\n      jint jresult = 0 ;\r\n      void **arg1 = (void **) 0 ;\r\n      long result;\r\n      \r\n      (void)jenv;\r\n      (void)jcls;\r\n      arg1 = *(void***)&amp;jarg1; \r\n      result = (long)GetClassObject(arg1);\r\n      jresult = (jint)result; \r\n      return jresult;\r\n    }\r\n\r\njava:\r\n\r\n    public class AddInSwigJNI {\r\n      public final static native int GetClassObject(long jarg1);\r\n    }\r\n\r\nHow can I now make a null pointer in Java code and pass its address to this function?\r\nFurther, for example, I want to see the number 10 written at this pointer in java code","title":"How to pass null pointer (double pointer) to c function via java jni?","body":"<p>There is the following function in shared library (dll):</p>\n<pre><code>intptr_t GetClassObject(void** pptr)\n{\n    if(!*pptr)\n    {\n        int value = 10;\n        *pptr= &amp;value; //here is another code like new Obj()\n        return 0;\n    }\n\n    return (intptr_t )*pptr;\n}\n</code></pre>\n<p>SWIG made the following wrapper:</p>\n<pre><code>SWIGEXPORT jint JNICALL Java_AddInSwigJNI_GetClassObject(JNIEnv *jenv, jclass jcls, jlong jarg1) {\n  jint jresult = 0 ;\n  void **arg1 = (void **) 0 ;\n  long result;\n  \n  (void)jenv;\n  (void)jcls;\n  arg1 = *(void***)&amp;jarg1; \n  result = (long)GetClassObject(arg1);\n  jresult = (jint)result; \n  return jresult;\n}\n</code></pre>\n<p>java:</p>\n<pre><code>public class AddInSwigJNI {\n  public final static native int GetClassObject(long jarg1);\n}\n</code></pre>\n<p>How can I now make a null pointer in Java code and pass its address to this function?\nFurther, for example, I want to see the number 10 written at this pointer in java code</p>\n"},{"tags":["java","concurrency","reactive-programming","quarkus"],"comments":[{"owner":{"account_id":2922228,"reputation":61034,"user_id":2504224,"display_name":"geoand"},"score":0,"creation_date":1693297141,"post_id":76997701,"comment_id":135738548,"body_markdown":"I don&#39;t understand the `I would know at runtime what all methods I need to call` part. Can you elaborate?","body":"I don&#39;t understand the <code>I would know at runtime what all methods I need to call</code> part. Can you elaborate?"},{"owner":{"account_id":8696301,"reputation":1231,"user_id":6507527,"accept_rate":83,"display_name":"Akhil Prajapati"},"score":0,"creation_date":1693371649,"post_id":76997701,"comment_id":135750145,"body_markdown":"Based on the list of providers I would be getting in request, I would know what all APIs I need to call at runtime.","body":"Based on the list of providers I would be getting in request, I would know what all APIs I need to call at runtime."}],"answers":[{"tags":[],"owner":{"account_id":3568344,"reputation":639,"user_id":2979325,"display_name":"Serkan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693566580,"creation_date":1693566580,"answer_id":77022616,"question_id":76997701,"body_markdown":"I’m typing this from my phone and out of my head, so apologies for errors but you should do something like this:\r\n\r\n    Uni&lt;Tuple&gt; parallelCalls(List params) {\r\n       return Uni.combine()\r\n                 .all()\r\n                 .unis(\r\n                    restCallA(params),    \r\n                    restCallB(params))\r\n                 .asTuple();\r\n    }\r\n\r\n\r\n    Uni&lt;ResultA&gt; restCallA(List params) {\r\n          return Multi.createFrom().iterable(params)\r\n                      .invoke(param-&gt; clientA.send(param))\r\n                      //combine results &amp; return as uni\r\n    }","title":"Call Rest APIs parallely and combina their results - Java + Quarkus","body":"<p>I’m typing this from my phone and out of my head, so apologies for errors but you should do something like this:</p>\n<pre><code>Uni&lt;Tuple&gt; parallelCalls(List params) {\n   return Uni.combine()\n             .all()\n             .unis(\n                restCallA(params),    \n                restCallB(params))\n             .asTuple();\n}\n\n\nUni&lt;ResultA&gt; restCallA(List params) {\n      return Multi.createFrom().iterable(params)\n                  .invoke(param-&gt; clientA.send(param))\n                  //combine results &amp; return as uni\n}\n</code></pre>\n"}],"owner":{"account_id":8696301,"reputation":1231,"user_id":6507527,"accept_rate":83,"display_name":"Akhil Prajapati"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":110,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1693566580,"creation_date":1693289247,"question_id":76997701,"body_markdown":"I need to call multiple APIs in parallel and combine their results as array and return to the consumer.\r\n\r\nHere is some context:\r\n\r\n - I would get the list of &quot;providers&quot; in the request. This list can have at least 1 or at most 10 values. This list could be different in different requests.\r\n - For each item in the list, I need to call a REST API. For example, if list contains [A,B], then I will be calling RestApiA and RestApiB, combine the result of both these APIs and return to the consumer.\r\n - These API calls will be independent of each other and should be called parallely. \r\n - If any of the API call fails, we should log an error but the rest of the API calls should still succeed. \r\n\r\nI came across this article https://quarkus.io/blog/mutiny-concurrent-uni/ but the problem here is I need to hardcode the functions I need to call concurrently. \r\n\r\nIn my case, I would know at runtime what all methods I need to call. ","title":"Call Rest APIs parallely and combina their results - Java + Quarkus","body":"<p>I need to call multiple APIs in parallel and combine their results as array and return to the consumer.</p>\n<p>Here is some context:</p>\n<ul>\n<li>I would get the list of &quot;providers&quot; in the request. This list can have at least 1 or at most 10 values. This list could be different in different requests.</li>\n<li>For each item in the list, I need to call a REST API. For example, if list contains [A,B], then I will be calling RestApiA and RestApiB, combine the result of both these APIs and return to the consumer.</li>\n<li>These API calls will be independent of each other and should be called parallely.</li>\n<li>If any of the API call fails, we should log an error but the rest of the API calls should still succeed.</li>\n</ul>\n<p>I came across this article <a href=\"https://quarkus.io/blog/mutiny-concurrent-uni/\" rel=\"nofollow noreferrer\">https://quarkus.io/blog/mutiny-concurrent-uni/</a> but the problem here is I need to hardcode the functions I need to call concurrently.</p>\n<p>In my case, I would know at runtime what all methods I need to call.</p>\n"},{"tags":["java","maven-2","compilation","package"],"comments":[{"owner":{"account_id":93007,"reputation":51990,"user_id":254643,"display_name":"Raghuram"},"score":1,"creation_date":1311213703,"post_id":6770455,"comment_id":8030411,"body_markdown":"Which version of maven compiler plugin?  Could you be hitting http://jira.codehaus.org/browse/MCOMPILER-71?  You could post the relevant pom snippet as well","body":"Which version of maven compiler plugin?  Could you be hitting <a href=\"http://jira.codehaus.org/browse/MCOMPILER-71\" rel=\"nofollow noreferrer\">jira.codehaus.org/browse/MCOMPILER-71</a>?  You could post the relevant pom snippet as well"},{"owner":{"account_id":49078,"reputation":44646,"user_id":145989,"accept_rate":59,"display_name":"Ondra Žižka"},"score":0,"creation_date":1311239790,"post_id":6770455,"comment_id":8034811,"body_markdown":"Raghuram, good catch, but ironically, when I added annotation, it started working :)Compiler plugin 2.3.2, source &amp; target = 1.6","body":"Raghuram, good catch, but ironically, when I added annotation, it started working :)Compiler plugin 2.3.2, source &amp; target = 1.6"}],"answers":[{"comments":[{"owner":{"account_id":39078,"reputation":2247,"user_id":112637,"accept_rate":70,"display_name":"Ar3s"},"score":1,"creation_date":1569849072,"post_id":6770598,"comment_id":102718507,"body_markdown":"Could you describe what you mean by &quot;works correctly&quot; because I tried and maven 3.6.0 does not generate `package-info.class` files where I stand :/","body":"Could you describe what you mean by &quot;works correctly&quot; because I tried and maven 3.6.0 does not generate <code>package-info.class</code> files where I stand :/"}],"tags":[],"owner":{"account_id":350198,"reputation":15550,"user_id":685923,"accept_rate":70,"display_name":"Ed Staub"},"comment_count":1,"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1311214189,"creation_date":1311214189,"answer_id":6770598,"question_id":6770455,"body_markdown":"Works correctly in Maven 3; don&#39;t know about 2.  Is it possible that the package declaration in package-info.java is missing or wrong?","title":"Maven: Compiling package-info.java to package-info.class?","body":"<p>Works correctly in Maven 3; don't know about 2.  Is it possible that the package declaration in package-info.java is missing or wrong?</p>\n"},{"comments":[{"owner":{"account_id":1291135,"reputation":2869,"user_id":2587343,"display_name":"Vlastimil Ovč&#225;č&#237;k"},"score":2,"creation_date":1455110807,"post_id":6773781,"comment_id":58341734,"body_markdown":"You should have introduce the extra annotation for this purpose.","body":"You should have introduce the extra annotation for this purpose."}],"tags":[],"owner":{"account_id":49078,"reputation":44646,"user_id":145989,"accept_rate":59,"display_name":"Ondra Žižka"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1693565576,"creation_date":1311239539,"answer_id":6773781,"question_id":6770455,"body_markdown":"The error was that the `package-info.java` must have any annotation with `Retention=RUNTIME` to compile into a class. Otherwise, JDK 6 omits it.  \r\nI used `@Deprecated` which is the only one in Java SE (and I  didn&#39;t want to introduce an annotation just because of that).\r\n\r\n    @Deprecated\r\n    package cz.zizka.ondra.packageinfo.test","title":"Maven: Compiling package-info.java to package-info.class?","body":"<p>The error was that the <code>package-info.java</code> must have any annotation with <code>Retention=RUNTIME</code> to compile into a class. Otherwise, JDK 6 omits it.<br />\nI used <code>@Deprecated</code> which is the only one in Java SE (and I  didn't want to introduce an annotation just because of that).</p>\n<pre><code>@Deprecated\npackage cz.zizka.ondra.packageinfo.test\n</code></pre>\n"},{"comments":[{"owner":{"account_id":49078,"reputation":44646,"user_id":145989,"accept_rate":59,"display_name":"Ondra Žižka"},"score":1,"creation_date":1486006760,"post_id":33177922,"comment_id":71164576,"body_markdown":"Thanks for adding. It wasn&#39;t available at the time - added in JDK 7.","body":"Thanks for adding. It wasn&#39;t available at the time - added in JDK 7."}],"tags":[],"owner":{"account_id":175470,"reputation":5175,"user_id":405505,"display_name":"zbyszek"},"comment_count":1,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1648461088,"creation_date":1445022501,"answer_id":33177922,"question_id":6770455,"body_markdown":"Give `-Xpkginfo:always` option to javac.\r\n\r\nSee the \r\n\r\n - [`javac` 1.8 documentation](http://docs.oracle.com/javase/8/docs/technotes/tools/windows/javac.html)\r\n\r\n - [`javac` 17 documentation](https://docs.oracle.com/en/java/javase/17/docs/specs/man/javac.html)","title":"Maven: Compiling package-info.java to package-info.class?","body":"<p>Give <code>-Xpkginfo:always</code> option to javac.</p>\n<p>See the</p>\n<ul>\n<li><p><a href=\"http://docs.oracle.com/javase/8/docs/technotes/tools/windows/javac.html\" rel=\"noreferrer\"><code>javac</code> 1.8 documentation</a></p>\n</li>\n<li><p><a href=\"https://docs.oracle.com/en/java/javase/17/docs/specs/man/javac.html\" rel=\"noreferrer\"><code>javac</code> 17 documentation</a></p>\n</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":13161416,"reputation":213,"user_id":11278676,"display_name":"Denis"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1690358803,"creation_date":1690358803,"answer_id":76769173,"question_id":6770455,"body_markdown":"Alternative solution (inspired by zbyszek&#39;s answer) is to add this to your `pom.xml`:\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;compilerArgs&gt;\r\n                        &lt;arg&gt;-Xpkginfo:always&lt;/arg&gt;\r\n                    &lt;/compilerArgs&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n","title":"Maven: Compiling package-info.java to package-info.class?","body":"<p>Alternative solution (inspired by zbyszek's answer) is to add this to your <code>pom.xml</code>:</p>\n<pre><code>&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n            &lt;configuration&gt;\n                &lt;compilerArgs&gt;\n                    &lt;arg&gt;-Xpkginfo:always&lt;/arg&gt;\n                &lt;/compilerArgs&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n"}],"owner":{"account_id":49078,"reputation":44646,"user_id":145989,"accept_rate":59,"display_name":"Ondra Žižka"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7162,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":6773781,"answer_count":4,"score":8,"last_activity_date":1693565576,"creation_date":1311212379,"question_id":6770455,"body_markdown":"I have package-info.java in my package, Hibernate wants it for some features (programatic entity scanning).\r\n\r\nHowever, `mvn package` does not result in `package-info.class` being in `classes/` thus not in the artifact.\r\n\r\nHow can I force that happening?\r\n\r\n    mvn -v\r\n    Apache Maven 2.2.1 (r801777; 2009-08-06 21:16:01+0200)\r\n    Java version: 1.6.0_26\r\n    Java home: /usr/lib/jvm/java-6-sun-1.6.0.26/jre\r\n    Default locale: en_US, platform encoding: UTF-8\r\n    OS name: &quot;linux&quot; version: &quot;2.6.35-30-generic&quot; arch: &quot;amd64&quot; Family: &quot;unix&quot;\r\n","title":"Maven: Compiling package-info.java to package-info.class?","body":"<p>I have package-info.java in my package, Hibernate wants it for some features (programatic entity scanning).</p>\n\n<p>However, <code>mvn package</code> does not result in <code>package-info.class</code> being in <code>classes/</code> thus not in the artifact.</p>\n\n<p>How can I force that happening?</p>\n\n<pre><code>mvn -v\nApache Maven 2.2.1 (r801777; 2009-08-06 21:16:01+0200)\nJava version: 1.6.0_26\nJava home: /usr/lib/jvm/java-6-sun-1.6.0.26/jre\nDefault locale: en_US, platform encoding: UTF-8\nOS name: \"linux\" version: \"2.6.35-30-generic\" arch: \"amd64\" Family: \"unix\"\n</code></pre>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9925,"page":209,"page_size":100}
