{"items":[{"tags":["java","junit4","junit5","java-11","java-17"],"answers":[{"tags":[],"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1689398270,"creation_date":1689355820,"answer_id":76690010,"question_id":76689588,"body_markdown":"JUnit4 first version is released at around 2006 ,very long before than the release date of JDK11 (25-Sept-2018). Considering that Java is backward compatible, meaning that you can use the library that is compiled with the older JDK with any newer JDK, Junit4 should work with any JDK that is released after 2006.\r\n\r\nAs for JUnit5, it requires at least Java 8 according to the [user guide][1]. \r\n\r\nSo in short, you do not need to worry about it as both version can work with JDK11 or JDK17.\r\n\r\nOn the other hand, simply use Junit5 if you are developing a new project. No idea, why you may need JUnit4.\r\n\r\n\r\n\r\n\r\n  [1]: https://junit.org/junit5/docs/current/user-guide/#overview-java-versions","title":"Junit 4 / Junit 5 JDK 11 JDK 17 versions and compatibility","body":"<p>JUnit4 first version is released at around 2006 ,very long before than the release date of JDK11 (25-Sept-2018). Considering that Java is backward compatible, meaning that you can use the library that is compiled with the older JDK with any newer JDK, Junit4 should work with any JDK that is released after 2006.</p>\n<p>As for JUnit5, it requires at least Java 8 according to the <a href=\"https://junit.org/junit5/docs/current/user-guide/#overview-java-versions\" rel=\"nofollow noreferrer\">user guide</a>.</p>\n<p>So in short, you do not need to worry about it as both version can work with JDK11 or JDK17.</p>\n<p>On the other hand, simply use Junit5 if you are developing a new project. No idea, why you may need JUnit4.</p>\n"}],"owner":{"account_id":7946812,"reputation":299,"user_id":9689780,"display_name":"ZURA Tikaradze"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4398,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":1,"score":1,"last_activity_date":1689398270,"creation_date":1689352190,"question_id":76689588,"body_markdown":"Hi which version Junit4 supports JDK 11 ?\r\nAnd which Minimum Version supports JDK 17  ?  Junit4 ? or just Junit5 ?\r\n\r\nwhere i can find list of version compatibility Java 11 and Java 17  ","title":"Junit 4 / Junit 5 JDK 11 JDK 17 versions and compatibility","body":"<p>Hi which version Junit4 supports JDK 11 ?\nAnd which Minimum Version supports JDK 17  ?  Junit4 ? or just Junit5 ?</p>\n<p>where i can find list of version compatibility Java 11 and Java 17</p>\n"},{"tags":["java","apache-poi"],"comments":[{"owner":{"account_id":350017,"reputation":47555,"user_id":685641,"display_name":"Gagravarr"},"score":0,"creation_date":1689322070,"post_id":76684952,"comment_id":135199840,"body_markdown":"Did you try with Apache Tika? Try with the Tika App in `-z` mode and see if that can do the extraction you want","body":"Did you try with Apache Tika? Try with the Tika App in <code>-z</code> mode and see if that can do the extraction you want"},{"owner":{"account_id":28967622,"reputation":5,"user_id":22188644,"display_name":"Code Trickle"},"score":0,"creation_date":1689324262,"post_id":76684952,"comment_id":135200276,"body_markdown":"I will try it with Apache Tika and update here","body":"I will try it with Apache Tika and update here"},{"owner":{"account_id":28967622,"reputation":5,"user_id":22188644,"display_name":"Code Trickle"},"score":0,"creation_date":1689324870,"post_id":76684952,"comment_id":135200367,"body_markdown":"Is it possible to use apache poi for achieving this, currently my entire implementation is in apache poi and it will be a complete rewrite for me to move to apache tika from apache poi","body":"Is it possible to use apache poi for achieving this, currently my entire implementation is in apache poi and it will be a complete rewrite for me to move to apache tika from apache poi"},{"owner":{"account_id":350017,"reputation":47555,"user_id":685641,"display_name":"Gagravarr"},"score":1,"creation_date":1689329244,"post_id":76684952,"comment_id":135201235,"body_markdown":"Apache Tika uses Apache POI internally. If you can get everything you need from Tika, you can see the Tika source for how to do that with POI. If Tika can&#39;t get it, likely POI can&#39;t easily either","body":"Apache Tika uses Apache POI internally. If you can get everything you need from Tika, you can see the Tika source for how to do that with POI. If Tika can&#39;t get it, likely POI can&#39;t easily either"},{"owner":{"account_id":28967622,"reputation":5,"user_id":22188644,"display_name":"Code Trickle"},"score":0,"creation_date":1689343193,"post_id":76684952,"comment_id":135204175,"body_markdown":"I am unable to find the correct code where tika reads and extracts from .doc all embedded files, can u please help out by giving an example","body":"I am unable to find the correct code where tika reads and extracts from .doc all embedded files, can u please help out by giving an example"}],"answers":[{"comments":[{"owner":{"account_id":28967622,"reputation":5,"user_id":22188644,"display_name":"Code Trickle"},"score":0,"creation_date":1689489606,"post_id":76692247,"comment_id":135218824,"body_markdown":"I have to parse some old documents coming in email and filter out any malicious files coming attached in those documents sent by any man in the middle.so i need to write a parser for the same. Thanks a lot for your help Axel.","body":"I have to parse some old documents coming in email and filter out any malicious files coming attached in those documents sent by any man in the middle.so i need to write a parser for the same. Thanks a lot for your help Axel."}],"tags":[],"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689397307,"creation_date":1689396218,"answer_id":76692247,"question_id":76684952,"body_markdown":"In a `POIFSFileSystem` embedded other file systems are in a `DirectoryEntry` having a name containing &quot;ObjectPool&quot;.  That you have found already.\r\n\r\nBut Microsoft Office files in Office Open XML format (`*.xlsx`, `*.docx`, `*.pptx`, ...) internally are ZIP archives and not Ole10Native. They are stored in a `DocumentEntry` named Package. Also there is not any relyable information about file name and content-type. Only the `DocumentEntry` named &quot;\\1CompObj&quot; contains some information about the content-type.\r\n\r\nUsing your code embedded Office Open XML format files should get got via:\r\n\r\n    ...\r\n    if (objPoolSubDirFile.getName().contains(&quot;Ole10Native&quot;)) {   \r\n    ...\r\n    } else if (objPoolSubDirFile.getName().contains(&quot;Package&quot;)) {  \r\n     String extension = &quot;.nul&quot;;\r\n     if (objPoolSubDir.hasEntry(&quot;\\1CompObj&quot;)) {\r\n      org.apache.poi.poifs.filesystem.DocumentInputStream documentInputStream = objPoolSubDir.createDocumentInputStream(&quot;\\1CompObj&quot;);\r\n      String text = new java.io.BufferedReader(new java.io.InputStreamReader(documentInputStream, java.nio.charset.StandardCharsets.UTF_8))\r\n       .lines()\r\n       .collect(java.util.stream.Collectors.joining());\r\n      System.out.println(&quot;Package CompObj: &quot; + text);\r\n      if (text.matches(&quot;.*Excel.*Macro.*&quot;)) extension = &quot;.xlsm&quot;;\r\n      else if (text.matches(&quot;.*Excel.*&quot;)) extension = &quot;.xlsx&quot;;\r\n      else if (text.matches(&quot;.*Word.*Macro.*&quot;)) extension = &quot;.docm&quot;;\r\n      else if (text.matches(&quot;.*Word.*&quot;)) extension = &quot;.docx&quot;;\r\n      else if (text.matches(&quot;.*PowerPoint.*&quot;)) extension = &quot;.pptx&quot;;\r\n     }\r\n     org.apache.poi.poifs.filesystem.DocumentInputStream documentInputStream = objPoolSubDir.createDocumentInputStream(objPoolSubDirFile.getName());\r\n     String fileName = &quot;unknownPackage&quot; + fileNameIndex++ + extension;\r\n     FileOutputStream out = new FileOutputStream(&quot;./&quot; + fileName);\r\n     byte[] buffer = new byte[1024];\r\n     int len;\r\n     while ((len = documentInputStream.read(buffer)) != -1) {\r\n      out.write(buffer, 0, len);\r\n     }\r\n     out.close();\r\n    }\r\n    ...\r\n\r\n\r\nBtw.: Your questions imply that someone misuses Microsoft Office files as container for other files. That is not what Microsoft Office files are made for. One should stop doing that. \r\n\r\nEspecially embedding Office Open XML format Microsoft Office files into the old binary Microsoft Office files seems very strange.","title":"Need to extract embedded .docx .xlsx .docm files from the .doc file","body":"<p>In a <code>POIFSFileSystem</code> embedded other file systems are in a <code>DirectoryEntry</code> having a name containing &quot;ObjectPool&quot;.  That you have found already.</p>\n<p>But Microsoft Office files in Office Open XML format (<code>*.xlsx</code>, <code>*.docx</code>, <code>*.pptx</code>, ...) internally are ZIP archives and not Ole10Native. They are stored in a <code>DocumentEntry</code> named Package. Also there is not any relyable information about file name and content-type. Only the <code>DocumentEntry</code> named &quot;\\1CompObj&quot; contains some information about the content-type.</p>\n<p>Using your code embedded Office Open XML format files should get got via:</p>\n<pre><code>...\nif (objPoolSubDirFile.getName().contains(&quot;Ole10Native&quot;)) {   \n...\n} else if (objPoolSubDirFile.getName().contains(&quot;Package&quot;)) {  \n String extension = &quot;.nul&quot;;\n if (objPoolSubDir.hasEntry(&quot;\\1CompObj&quot;)) {\n  org.apache.poi.poifs.filesystem.DocumentInputStream documentInputStream = objPoolSubDir.createDocumentInputStream(&quot;\\1CompObj&quot;);\n  String text = new java.io.BufferedReader(new java.io.InputStreamReader(documentInputStream, java.nio.charset.StandardCharsets.UTF_8))\n   .lines()\n   .collect(java.util.stream.Collectors.joining());\n  System.out.println(&quot;Package CompObj: &quot; + text);\n  if (text.matches(&quot;.*Excel.*Macro.*&quot;)) extension = &quot;.xlsm&quot;;\n  else if (text.matches(&quot;.*Excel.*&quot;)) extension = &quot;.xlsx&quot;;\n  else if (text.matches(&quot;.*Word.*Macro.*&quot;)) extension = &quot;.docm&quot;;\n  else if (text.matches(&quot;.*Word.*&quot;)) extension = &quot;.docx&quot;;\n  else if (text.matches(&quot;.*PowerPoint.*&quot;)) extension = &quot;.pptx&quot;;\n }\n org.apache.poi.poifs.filesystem.DocumentInputStream documentInputStream = objPoolSubDir.createDocumentInputStream(objPoolSubDirFile.getName());\n String fileName = &quot;unknownPackage&quot; + fileNameIndex++ + extension;\n FileOutputStream out = new FileOutputStream(&quot;./&quot; + fileName);\n byte[] buffer = new byte[1024];\n int len;\n while ((len = documentInputStream.read(buffer)) != -1) {\n  out.write(buffer, 0, len);\n }\n out.close();\n}\n...\n</code></pre>\n<p>Btw.: Your questions imply that someone misuses Microsoft Office files as container for other files. That is not what Microsoft Office files are made for. One should stop doing that.</p>\n<p>Especially embedding Office Open XML format Microsoft Office files into the old binary Microsoft Office files seems very strange.</p>\n"}],"owner":{"account_id":28967622,"reputation":5,"user_id":22188644,"display_name":"Code Trickle"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":131,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689397307,"creation_date":1689312911,"question_id":76684952,"body_markdown":"I am currently trying to extract embedded objects from MS Word doc in HWPFDocument and PFB the code which extracts other file types \r\n\r\n`` \r\n```\r\ndocument = new HWPFDocument(fs);\r\n     DirectoryNode docRootDir = fs.getRoot();\r\n     DirectoryNode objPoolDir;\r\n     // Read ROOT POIFS\r\n     Iterator&lt;Entry&gt; docRootDirIter = docRootDir.getEntries();\r\n     String fileName = null;\r\n     int fileNameIndex = 0;\r\n     while(docRootDirIter.hasNext()){\r\n         Entry docRootDirEntry = docRootDirIter.next();\r\n\r\n         if (docRootDirEntry.getName().contains(&quot;ObjectPool&quot;)){\r\n             objPoolDir = (DirectoryNode) docRootDirEntry;\r\n\r\n             //Read ObjectPool POIFS directory ---&gt; ObjectPool is location of embedded files within a DOC file\r\n            Iterator&lt;Entry&gt; objPoolDirIter = objPoolDir.getEntries();\r\n            while(objPoolDirIter.hasNext()){\r\n                Entry objPoolDirEntry = objPoolDirIter.next();\r\n\r\n               // Read ObjectPool POIFS subdirectories\r\n               if(objPoolDirEntry.isDirectoryEntry()){\r\n                   DirectoryNode objPoolSubDir = (DirectoryNode) objPoolDirEntry;\r\n                   Iterator&lt;Entry&gt; objPoolSubDirIter = objPoolSubDir.getEntries();\r\n                   while (objPoolSubDirIter.hasNext()){\r\n                       Entry objPoolSubDirEntry = objPoolSubDirIter.next();\r\n\r\n               // Read embedded OLE10 files, create an OLE object, and write to the OS File system\r\n                       if (objPoolSubDirEntry.isDocumentEntry()){\r\n                           DocumentEntry objPoolSubDirFile = (DocumentEntry) objPoolSubDirEntry;\r\n\r\n                           if(objPoolSubDirFile.getName().contains(&quot;Ole10Native&quot;)){\r\n\r\n                           Ole10Native oleEntry = Ole10Native.createFromEmbeddedOleObject(objPoolSubDir);\r\n                           fileName = oleEntry.getLabel();\r\n                           if (fileName == null) \r\n                                fileName = &quot;unknownOle10Native&quot; + fileNameIndex++ + &quot;.nul&quot;;\r\n                           byte[] data =oleEntry.getDataBuffer();\r\n                           FileOutputStream out = new FileOutputStream(&quot;./&quot; + fileName);\r\n                           out.write(data);\r\n                           out.close();\r\n                           if (fileName != null &amp;&amp; !fileName.isEmpty()) {\r\n                              File f = new File(fileName);\r\n                              embeddedFilePaths.add(f.getAbsolutePath());\r\n                           }\r\n                     }\r\n                }\r\n           }\r\n           }else if(objPoolDirEntry.isDocumentEntry()){\r\n                DocumentEntry documentEntry = (DocumentEntry) objPoolDirEntry;\r\n\r\n                DirectoryEntry directoryEntry = documentEntry.getParent();\r\n\r\n                directoryEntry.getEntryNames();\r\n\r\n           }\r\n        }\r\n        }else if(docRootDirEntry.getName().contains(&quot;WordDocument&quot;)){\r\n              DocumentEntry documentEntry = (DocumentEntry) docRootDirEntry;\r\n              System.out.println(documentEntry.getName());\r\n        }\r\n```\r\n``\r\n\r\n\r\n\r\nWith this code I am currently able to extract .exe, .zip , .tar, .so , .xml files from the word .doc file using HWPFDocument format, Is it possible to extract .docx , .docm, .xlsx by modifying this code. Here My main problem is to identify between Ole10Native files and MS Files like docx, pptx, xlsx and docm , If i am able to distinguish between them I can be able to proceed with the extraction but even after that How to extract embedded MS files remains problem for me, I am not finding a clear way to extract embedded MS files . Should that logic be in this code block\r\n\r\n`\r\n   if(docRootDirEntry.getName().contains(&quot;WordDocument&quot;))\r\n`\r\n\r\n because the only information about a word doc or xlsx im getting is the doc entry name which is MS Word Document, Also please let me know which condition to use to extract  for PDF as well\r\n\r\n","title":"Need to extract embedded .docx .xlsx .docm files from the .doc file","body":"<p>I am currently trying to extract embedded objects from MS Word doc in HWPFDocument and PFB the code which extracts other file types</p>\n<p>``</p>\n<pre><code>document = new HWPFDocument(fs);\n     DirectoryNode docRootDir = fs.getRoot();\n     DirectoryNode objPoolDir;\n     // Read ROOT POIFS\n     Iterator&lt;Entry&gt; docRootDirIter = docRootDir.getEntries();\n     String fileName = null;\n     int fileNameIndex = 0;\n     while(docRootDirIter.hasNext()){\n         Entry docRootDirEntry = docRootDirIter.next();\n\n         if (docRootDirEntry.getName().contains(&quot;ObjectPool&quot;)){\n             objPoolDir = (DirectoryNode) docRootDirEntry;\n\n             //Read ObjectPool POIFS directory ---&gt; ObjectPool is location of embedded files within a DOC file\n            Iterator&lt;Entry&gt; objPoolDirIter = objPoolDir.getEntries();\n            while(objPoolDirIter.hasNext()){\n                Entry objPoolDirEntry = objPoolDirIter.next();\n\n               // Read ObjectPool POIFS subdirectories\n               if(objPoolDirEntry.isDirectoryEntry()){\n                   DirectoryNode objPoolSubDir = (DirectoryNode) objPoolDirEntry;\n                   Iterator&lt;Entry&gt; objPoolSubDirIter = objPoolSubDir.getEntries();\n                   while (objPoolSubDirIter.hasNext()){\n                       Entry objPoolSubDirEntry = objPoolSubDirIter.next();\n\n               // Read embedded OLE10 files, create an OLE object, and write to the OS File system\n                       if (objPoolSubDirEntry.isDocumentEntry()){\n                           DocumentEntry objPoolSubDirFile = (DocumentEntry) objPoolSubDirEntry;\n\n                           if(objPoolSubDirFile.getName().contains(&quot;Ole10Native&quot;)){\n\n                           Ole10Native oleEntry = Ole10Native.createFromEmbeddedOleObject(objPoolSubDir);\n                           fileName = oleEntry.getLabel();\n                           if (fileName == null) \n                                fileName = &quot;unknownOle10Native&quot; + fileNameIndex++ + &quot;.nul&quot;;\n                           byte[] data =oleEntry.getDataBuffer();\n                           FileOutputStream out = new FileOutputStream(&quot;./&quot; + fileName);\n                           out.write(data);\n                           out.close();\n                           if (fileName != null &amp;&amp; !fileName.isEmpty()) {\n                              File f = new File(fileName);\n                              embeddedFilePaths.add(f.getAbsolutePath());\n                           }\n                     }\n                }\n           }\n           }else if(objPoolDirEntry.isDocumentEntry()){\n                DocumentEntry documentEntry = (DocumentEntry) objPoolDirEntry;\n\n                DirectoryEntry directoryEntry = documentEntry.getParent();\n\n                directoryEntry.getEntryNames();\n\n           }\n        }\n        }else if(docRootDirEntry.getName().contains(&quot;WordDocument&quot;)){\n              DocumentEntry documentEntry = (DocumentEntry) docRootDirEntry;\n              System.out.println(documentEntry.getName());\n        }\n</code></pre>\n<p>``</p>\n<p>With this code I am currently able to extract .exe, .zip , .tar, .so , .xml files from the word .doc file using HWPFDocument format, Is it possible to extract .docx , .docm, .xlsx by modifying this code. Here My main problem is to identify between Ole10Native files and MS Files like docx, pptx, xlsx and docm , If i am able to distinguish between them I can be able to proceed with the extraction but even after that How to extract embedded MS files remains problem for me, I am not finding a clear way to extract embedded MS files . Should that logic be in this code block</p>\n<p><code>if(docRootDirEntry.getName().contains(&quot;WordDocument&quot;))</code></p>\n<p>because the only information about a word doc or xlsx im getting is the doc entry name which is MS Word Document, Also please let me know which condition to use to extract  for PDF as well</p>\n"},{"tags":["java","spring-boot","jasypt"],"comments":[{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1689431737,"post_id":76692209,"comment_id":135214206,"body_markdown":"Do not use images for text, logs and code","body":"Do not use images for text, logs and code"}],"owner":{"account_id":10809524,"reputation":601,"user_id":7950525,"display_name":"Thimira Pathirana"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":156,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689394704,"creation_date":1689394704,"question_id":76692209,"body_markdown":"I want to do encryption for some sensitive data in application.properties file of spring boot application.\r\nI used, \r\n\r\n        &lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.github.ulisesbocchio&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;jasypt-spring-boot-starter&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;3.0.5&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;com.github.ulisesbocchio&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;jasypt-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;3.0.5&lt;/version&gt;\r\n\t\t&lt;/plugin&gt;\r\n\r\n    \r\n\r\n&gt; Maven vertion - 3.8.1.jar\r\n\r\nI have try different scenarios\r\nUsing command,\r\n\r\n&gt; mvn jasypt:encrypt-value -Djasypt.encryptor.password=&quot;password&quot;       \r\n&gt; -Djasypt.plugin.value=&quot;thimira&quot;\r\n\r\nerror - [![enter image description here][1]][1]\r\n\r\n - mvn jasypt:encrypt-value &quot;-Djasypt.encryptor.password=password&quot;\r\n   &quot;-Djasypt.plugin.value=thimira&quot;\r\n\r\nerror - [![enter image description here][2]][2]\r\n\r\nalso used @EnableEncryptableProperties in main method. How could I fix this issue.\r\n\r\n  [1]: https://i.stack.imgur.com/wE2sd.png\r\n  [2]: https://i.stack.imgur.com/mvzr4.png\r\n","title":"jasypt-spring-boot encrypt value not work","body":"<p>I want to do encryption for some sensitive data in application.properties file of spring boot application.\nI used,</p>\n<pre><code>    &lt;dependency&gt;\n            &lt;groupId&gt;com.github.ulisesbocchio&lt;/groupId&gt;\n            &lt;artifactId&gt;jasypt-spring-boot-starter&lt;/artifactId&gt;\n            &lt;version&gt;3.0.5&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;plugin&gt;\n            &lt;groupId&gt;com.github.ulisesbocchio&lt;/groupId&gt;\n            &lt;artifactId&gt;jasypt-maven-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.0.5&lt;/version&gt;\n    &lt;/plugin&gt;\n</code></pre>\n<blockquote>\n<p>Maven vertion - 3.8.1.jar</p>\n</blockquote>\n<p>I have try different scenarios\nUsing command,</p>\n<blockquote>\n<p>mvn jasypt:encrypt-value -Djasypt.encryptor.password=&quot;password&quot;<br />\n-Djasypt.plugin.value=&quot;thimira&quot;</p>\n</blockquote>\n<p>error - <a href=\"https://i.stack.imgur.com/wE2sd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wE2sd.png\" alt=\"enter image description here\" /></a></p>\n<ul>\n<li>mvn jasypt:encrypt-value &quot;-Djasypt.encryptor.password=password&quot;\n&quot;-Djasypt.plugin.value=thimira&quot;</li>\n</ul>\n<p>error - <a href=\"https://i.stack.imgur.com/mvzr4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mvzr4.png\" alt=\"enter image description here\" /></a></p>\n<p>also used @EnableEncryptableProperties in main method. How could I fix this issue.</p>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1689364686,"post_id":76690229,"comment_id":135208547,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"tags":[],"owner":{"account_id":13548231,"reputation":631,"user_id":9773847,"display_name":"Nyamkhuu Buyanjargal"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689359160,"creation_date":1689359160,"answer_id":76690295,"question_id":76690229,"body_markdown":"first of all, don&#39;t use hibernate core dependency, if you are using spring boot. Because it&#39;s really hard to configure.\r\n\r\nIf you want to use the Spring boot framework to build some kind of Rest API or web application. \r\n\r\n&gt; Then, first you have to use [start.spring.io][1] (this is generator of spring boot)\r\n\r\n\r\n  [1]: https://start.spring.io/\r\n\r\nthis is will generate to you brand new spring boot application. Of course, you can customize your application as you want. If you want to add database driver then just select dependency from this website.","title":"Unknown access type record for Spring-boot","body":"<p>first of all, don't use hibernate core dependency, if you are using spring boot. Because it's really hard to configure.</p>\n<p>If you want to use the Spring boot framework to build some kind of Rest API or web application.</p>\n<blockquote>\n<p>Then, first you have to use <a href=\"https://start.spring.io/\" rel=\"nofollow noreferrer\">start.spring.io</a> (this is generator of spring boot)</p>\n</blockquote>\n<p>this is will generate to you brand new spring boot application. Of course, you can customize your application as you want. If you want to add database driver then just select dependency from this website.</p>\n"}],"owner":{"account_id":26335914,"reputation":1,"user_id":19995762,"display_name":"Bei Zhou"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":691,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689390457,"creation_date":1689358369,"question_id":76690229,"body_markdown":"I encountered the following errors:\r\n\r\n```log\r\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;entityManagerFactory&#39; defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Unknown access type record\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1770) ~[spring-beans-6.0.10.jar:6.0.10]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598) ~[spring-beans-6.0.10.jar:6.0.10]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.10.jar:6.0.10]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326) ~[spring-beans-6.0.10.jar:6.0.10]\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.10.jar:6.0.10]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324) ~[spring-beans-6.0.10.jar:6.0.10]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.0.10.jar:6.0.10]\r\n\tat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1154) ~[spring-context-6.0.10.jar:6.0.10]\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:931) ~[spring-context-6.0.10.jar:6.0.10]\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608) ~[spring-context-6.0.10.jar:6.0.10]\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.1.1.jar:3.1.1]\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-3.1.1.jar:3.1.1]\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:436) ~\r\n```\r\nHere is my pom file. I have tried to reload and rebuild and downgrade the versions:\r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\t\t xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.1.1&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.example&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;movie&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;movie&lt;/name&gt;\r\n\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.vladmihalcea&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;hibernate-types-52&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.14.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.3.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/com.vladmihalcea/hibernate-types-52 --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.vladmihalcea&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;hibernate-types-52&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.14.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;5.5.7.Final&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n        ...\r\n```","title":"Unknown access type record for Spring-boot","body":"<p>I encountered the following errors:</p>\n<pre><code>org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Unknown access type record\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1770) ~[spring-beans-6.0.10.jar:6.0.10]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598) ~[spring-beans-6.0.10.jar:6.0.10]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.10.jar:6.0.10]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326) ~[spring-beans-6.0.10.jar:6.0.10]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.10.jar:6.0.10]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324) ~[spring-beans-6.0.10.jar:6.0.10]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.0.10.jar:6.0.10]\n    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1154) ~[spring-context-6.0.10.jar:6.0.10]\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:931) ~[spring-context-6.0.10.jar:6.0.10]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608) ~[spring-context-6.0.10.jar:6.0.10]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.1.1.jar:3.1.1]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-3.1.1.jar:3.1.1]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:436) ~\n</code></pre>\n<p>Here is my pom file. I have tried to reload and rebuild and downgrade the versions:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.1.1&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;movie&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;movie&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.vladmihalcea&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-types-52&lt;/artifactId&gt;\n            &lt;version&gt;2.14.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\n            &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\n            &lt;version&gt;2.3.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- https://mvnrepository.com/artifact/com.vladmihalcea/hibernate-types-52 --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.vladmihalcea&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-types-52&lt;/artifactId&gt;\n            &lt;version&gt;2.14.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n            &lt;version&gt;5.5.7.Final&lt;/version&gt;\n        &lt;/dependency&gt;\n        ...\n</code></pre>\n"},{"tags":["java","libgdx","trigonometry","angle"],"comments":[{"owner":{"account_id":9693151,"reputation":1111,"user_id":7190570,"accept_rate":67,"display_name":"ca1c"},"score":0,"creation_date":1689302678,"post_id":76684224,"comment_id":135197483,"body_markdown":"If the flower is close to the bee, the bee tends to go awry and it doesn&#39;t make it to the flower. @OldDogProgrammer","body":"If the flower is close to the bee, the bee tends to go awry and it doesn&#39;t make it to the flower. @OldDogProgrammer"}],"answers":[{"tags":[],"owner":{"account_id":9947340,"reputation":222,"user_id":7361496,"display_name":"Jiř&#237;"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1689377217,"creation_date":1689377217,"answer_id":76691606,"question_id":76684224,"body_markdown":"Problematic scenario I can see in yours code is the angle comparison. In the scenario when current angle is 1&#176; and target is 359&#176;, then the bee would have to perform almost whole circle rotation. You should be calcuating the direction by this formula or similar way: `((myAngle-rotationAngle)%360+360+179)%360-179` and then based on the fact if number is positive or negative change your direction.\r\n\r\nThe other thing I see the use of atan function and I am not sure if you perform the quadrant correction right. The simplest thing you can do is to use `atan2Deg` function instead which doesn&#39;t require quadrant correction. The arguments will be `y2 - y1, x2 - x1`. Also I can see you are trying to perform some angle correction in `updateVelocity`, which I am also not sure if is correct.","title":"Libgxd: Rotate an object to angle necessary to move to another point","body":"<p>Problematic scenario I can see in yours code is the angle comparison. In the scenario when current angle is 1° and target is 359°, then the bee would have to perform almost whole circle rotation. You should be calcuating the direction by this formula or similar way: <code>((myAngle-rotationAngle)%360+360+179)%360-179</code> and then based on the fact if number is positive or negative change your direction.</p>\n<p>The other thing I see the use of atan function and I am not sure if you perform the quadrant correction right. The simplest thing you can do is to use <code>atan2Deg</code> function instead which doesn't require quadrant correction. The arguments will be <code>y2 - y1, x2 - x1</code>. Also I can see you are trying to perform some angle correction in <code>updateVelocity</code>, which I am also not sure if is correct.</p>\n"},{"tags":[],"owner":{"account_id":9693151,"reputation":1111,"user_id":7190570,"accept_rate":67,"display_name":"ca1c"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689387988,"creation_date":1689387988,"answer_id":76691998,"question_id":76684224,"body_markdown":"Ok I followed some of the things that Jiř&#237; said, like changing `atanDeg` to `atan2Deg`.\r\n\r\nI also used the condition: `((myAngle-rotationAngle)%360+360+179)%360-179` to figure out which direction the bee should rotate, and it worked well. I had to work a little bit to make some tweaks in the `updateRotationAngle` function for it to work, here are the two functions in working form:\r\n\r\n`getPathfindingRotationAngle`:\r\n\r\n    public float getPathfindingRotationAngle(float x1, float y1, float x2, float y2) {\r\n        return MathUtils.atan2Deg((y2 - y1), (x2 - x1));\r\n    }\r\n\r\n`updateRotationAngle`:\r\n\r\n    public void updateRotationAngle(float deltaTime) {\r\n        myAngle = targetAngle() + 90;\r\n\r\n        if(Math.abs(myAngle - rotationAngle) &gt; 3 &amp;&amp; !collided) {\r\n            if (((myAngle - rotationAngle) % 360 + 360 + 179) % 360 - 179 &lt; 0) {\r\n                rotateRight(deltaTime);\r\n            } else {\r\n                rotateLeft(deltaTime);\r\n            }\r\n        }\r\n    }\r\n\r\nI also removed the `360 - ` from the `targetAngle` function.\r\n\r\nI also don&#39;t really know how this works: `((myAngle-rotationAngle)%360+360+179)%360-179`. If someone could let me know that would be wonderful.\r\n\r\nThank you so much for your answer.","title":"Libgxd: Rotate an object to angle necessary to move to another point","body":"<p>Ok I followed some of the things that Jiří said, like changing <code>atanDeg</code> to <code>atan2Deg</code>.</p>\n<p>I also used the condition: <code>((myAngle-rotationAngle)%360+360+179)%360-179</code> to figure out which direction the bee should rotate, and it worked well. I had to work a little bit to make some tweaks in the <code>updateRotationAngle</code> function for it to work, here are the two functions in working form:</p>\n<p><code>getPathfindingRotationAngle</code>:</p>\n<pre><code>public float getPathfindingRotationAngle(float x1, float y1, float x2, float y2) {\n    return MathUtils.atan2Deg((y2 - y1), (x2 - x1));\n}\n</code></pre>\n<p><code>updateRotationAngle</code>:</p>\n<pre><code>public void updateRotationAngle(float deltaTime) {\n    myAngle = targetAngle() + 90;\n\n    if(Math.abs(myAngle - rotationAngle) &gt; 3 &amp;&amp; !collided) {\n        if (((myAngle - rotationAngle) % 360 + 360 + 179) % 360 - 179 &lt; 0) {\n            rotateRight(deltaTime);\n        } else {\n            rotateLeft(deltaTime);\n        }\n    }\n}\n</code></pre>\n<p>I also removed the <code>360 - </code> from the <code>targetAngle</code> function.</p>\n<p>I also don't really know how this works: <code>((myAngle-rotationAngle)%360+360+179)%360-179</code>. If someone could let me know that would be wonderful.</p>\n<p>Thank you so much for your answer.</p>\n"}],"owner":{"account_id":9693151,"reputation":1111,"user_id":7190570,"accept_rate":67,"display_name":"ca1c"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76691606,"answer_count":2,"score":0,"last_activity_date":1689387988,"creation_date":1689299093,"question_id":76684224,"body_markdown":"\r\n\r\nOk, so I have tried many different approaches and I have landed with one that works some of the time. The idea is to get a bee sprite to move toward a flower sprite, here are the things I have accomplished with this so far:\r\n\r\n 1. Bee can rotate to the left or right based on a movement speed\r\n 2. Bee can move in the direction that it is rotated (by using the sin and cos of angle)\r\n 3. Bee is sometimes able to make it to the flower and sometimes not (usually the flower is very close when this happens)\r\n\r\nThis is the working example:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nThe bee turns to the right and eventually hits the angle it is looking for in the condition and makes a beeline (no pun intended), for the flower.\r\n\r\nOn the other hand, when the flower is closer to the bees starting point (the middle of the screen):\r\n\r\n[![enter image description here][2]][2]\r\n\r\nIt goes around the right side of the flower and down into the bottom of the window.\r\n\r\nHere is the code for the bee class:\r\n\r\n    public class Bee {\r\n        public Vector2 position;\r\n        public Sprite sprite;\r\n        public float topSpeed = 300f;\r\n        public float xSpeed = 0f;\r\n        public float ySpeed = 500f;\r\n        public float rotationSpeed = 200f;\r\n        public float rotationAngle = 360f;\r\n        public float moveAngle;\r\n        public Vector2 flowerPosition;\r\n        public boolean collided = false;\r\n    \r\n        public Bee(Texture img, Vector2 flowerVector) {\r\n            sprite = new Sprite(img);\r\n            sprite.setScale(2);\r\n            position = new Vector2(Gdx.graphics.getWidth()/2f - sprite.getWidth(),\r\n                    Gdx.graphics.getHeight()/2f - sprite.getHeight());\r\n            flowerPosition = flowerVector;\r\n        }\r\n    \r\n        public Rectangle getBoundingBox() {\r\n            return sprite.getBoundingRectangle();\r\n        }\r\n    \r\n        public void updateCollided(boolean collidedBool) {\r\n            collided = collidedBool;\r\n        }\r\n    \r\n        public boolean beeHittingRightWall() {\r\n            return position.x + sprite.getWidth() &gt; Gdx.graphics.getWidth();\r\n        }\r\n    \r\n        public boolean beeHittingLeftWall() {\r\n            return position.x &lt; 0;\r\n        }\r\n    \r\n        public boolean beeHittingTopWall() {\r\n            return position.y + sprite.getHeight() &gt; Gdx.graphics.getHeight();\r\n        }\r\n    \r\n        public boolean beeHittingBottomWall() {\r\n            return position.y &lt; 0;\r\n        }\r\n    \r\n        public void updateBeeCoordinates(float deltaTime) {\r\n            position.x += deltaTime * xSpeed;\r\n            position.y += deltaTime * ySpeed;\r\n        }\r\n    \r\n        public void checkBeeHittingBorders() {\r\n            if(beeHittingRightWall()) {\r\n                position.x -= sprite.getWidth();\r\n            }\r\n            if(beeHittingLeftWall()) {\r\n                position.x += sprite.getWidth();\r\n            }\r\n            // Check if bee is hitting top and bottom walls\r\n            if(beeHittingTopWall()) {\r\n                position.y -= sprite.getHeight();\r\n            }\r\n            if(beeHittingBottomWall()) {\r\n                position.y += sprite.getHeight();\r\n            }\r\n        }\r\n    \r\n        // gets quadrant of coordinate\r\n        public float getCoordinateQuadrantMinuend(float x, float y) {\r\n            float yAxis = Gdx.graphics.getWidth() / 2f;\r\n            float xAxis = Gdx.graphics.getHeight() / 2f;\r\n    \r\n            if(x &gt; yAxis &amp;&amp; y &gt; xAxis) {\r\n                return 90f;\r\n            }\r\n            else if(x &gt; yAxis &amp;&amp; y &lt; xAxis) {\r\n                return 180f;\r\n            }\r\n            else if(x &lt; yAxis &amp;&amp; y &lt; xAxis) {\r\n                return 270f;\r\n            }\r\n            else {\r\n                return 360f;\r\n            }\r\n        }\r\n    \r\n        // gets the angle bee needs to be rotated to, to move to a certain coordinate\r\n        public float getPathfindingRotationAngle(float x1, float y1, float x2, float y2) {\r\n            float c = (y2 - y1) / (x2 - x1);\r\n            float minuend = getCoordinateQuadrantMinuend(x1, y1);\r\n    \r\n            return minuend - MathUtils.atanDeg(c);\r\n        }\r\n    \r\n        public float targetAngle() {\r\n            return 360 - getPathfindingRotationAngle(flowerPosition.x, flowerPosition.y, position.x, position.y);\r\n        }\r\n    \r\n        public void moveForward(float deltaTime) {\r\n            if(!collided) {\r\n                moveAngle = targetAngle();\r\n                updateBeeCoordinates(deltaTime);\r\n                checkBeeHittingBorders();\r\n            }\r\n        }\r\n    \r\n        public void rotateLeft(float deltaTime) {\r\n            rotationAngle += deltaTime*rotationSpeed;\r\n            if(rotationAngle &gt; 360) {\r\n                rotationAngle -= 360;\r\n            }\r\n        }\r\n    \r\n        public void rotateRight(float deltaTime) {\r\n            rotationAngle += 360 - deltaTime*rotationSpeed;\r\n            if(rotationAngle &gt; 360) {\r\n                rotationAngle -= 360;\r\n            }\r\n        }\r\n    \r\n        public void updateRotationAngle(float deltaTime) {\r\n            float myAngle = targetAngle();\r\n            if(rotationAngle &gt; myAngle) {\r\n                rotateRight(deltaTime);\r\n            }\r\n            if(rotationAngle &lt; myAngle) {\r\n                rotateLeft(deltaTime);\r\n            }\r\n        }\r\n    \r\n        // This is called update velocity\r\n        // because velocity implies a speed and direction\r\n        // since it is a vector (this function does both of these)\r\n        public void updateVelocity() {\r\n            // Adjust X and Y speeds based on angle\r\n    \r\n            /*\r\n                looks like this:\r\n                       0\r\n                      360\r\n                       |\r\n                 90____|____270\r\n                       |\r\n                       |\r\n                      180\r\n             */\r\n    \r\n            float xSpeedMultiplier;\r\n            float ySpeedMultiplier;\r\n            if(rotationAngle &lt; 360 &amp;&amp; rotationAngle &gt; 180) {\r\n                xSpeedMultiplier = Math.abs(MathUtils.sinDeg(rotationAngle));\r\n            }\r\n            else{\r\n                xSpeedMultiplier = -1 * (MathUtils.sinDeg(rotationAngle));\r\n            }\r\n            ySpeedMultiplier = MathUtils.cosDeg(rotationAngle);\r\n    \r\n    \r\n            xSpeed = topSpeed * xSpeedMultiplier;\r\n            ySpeed = topSpeed * ySpeedMultiplier;\r\n        }\r\n    \r\n        public void Update(float deltaTime) {\r\n            moveForward(deltaTime);\r\n            updateRotationAngle(deltaTime);\r\n            updateVelocity();\r\n        }\r\n    \r\n        public void Draw(SpriteBatch batch) {\r\n            Update(Gdx.graphics.getDeltaTime());\r\n            sprite.setPosition(position.x, position.y);\r\n            sprite.setRotation(rotationAngle);\r\n            sprite.draw(batch);\r\n        }\r\n    }\r\n\r\nThe main function I have been trying to debug is updateRotationAngle(float deltaTime).\r\n\r\nThank you in advance for any help.\r\n\r\n  [1]: https://i.stack.imgur.com/3Pfwx.png\r\n  [2]: https://i.stack.imgur.com/2IHgF.png","title":"Libgxd: Rotate an object to angle necessary to move to another point","body":"<p>Ok, so I have tried many different approaches and I have landed with one that works some of the time. The idea is to get a bee sprite to move toward a flower sprite, here are the things I have accomplished with this so far:</p>\n<ol>\n<li>Bee can rotate to the left or right based on a movement speed</li>\n<li>Bee can move in the direction that it is rotated (by using the sin and cos of angle)</li>\n<li>Bee is sometimes able to make it to the flower and sometimes not (usually the flower is very close when this happens)</li>\n</ol>\n<p>This is the working example:</p>\n<p><a href=\"https://i.stack.imgur.com/3Pfwx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3Pfwx.png\" alt=\"enter image description here\" /></a></p>\n<p>The bee turns to the right and eventually hits the angle it is looking for in the condition and makes a beeline (no pun intended), for the flower.</p>\n<p>On the other hand, when the flower is closer to the bees starting point (the middle of the screen):</p>\n<p><a href=\"https://i.stack.imgur.com/2IHgF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2IHgF.png\" alt=\"enter image description here\" /></a></p>\n<p>It goes around the right side of the flower and down into the bottom of the window.</p>\n<p>Here is the code for the bee class:</p>\n<pre><code>public class Bee {\n    public Vector2 position;\n    public Sprite sprite;\n    public float topSpeed = 300f;\n    public float xSpeed = 0f;\n    public float ySpeed = 500f;\n    public float rotationSpeed = 200f;\n    public float rotationAngle = 360f;\n    public float moveAngle;\n    public Vector2 flowerPosition;\n    public boolean collided = false;\n\n    public Bee(Texture img, Vector2 flowerVector) {\n        sprite = new Sprite(img);\n        sprite.setScale(2);\n        position = new Vector2(Gdx.graphics.getWidth()/2f - sprite.getWidth(),\n                Gdx.graphics.getHeight()/2f - sprite.getHeight());\n        flowerPosition = flowerVector;\n    }\n\n    public Rectangle getBoundingBox() {\n        return sprite.getBoundingRectangle();\n    }\n\n    public void updateCollided(boolean collidedBool) {\n        collided = collidedBool;\n    }\n\n    public boolean beeHittingRightWall() {\n        return position.x + sprite.getWidth() &gt; Gdx.graphics.getWidth();\n    }\n\n    public boolean beeHittingLeftWall() {\n        return position.x &lt; 0;\n    }\n\n    public boolean beeHittingTopWall() {\n        return position.y + sprite.getHeight() &gt; Gdx.graphics.getHeight();\n    }\n\n    public boolean beeHittingBottomWall() {\n        return position.y &lt; 0;\n    }\n\n    public void updateBeeCoordinates(float deltaTime) {\n        position.x += deltaTime * xSpeed;\n        position.y += deltaTime * ySpeed;\n    }\n\n    public void checkBeeHittingBorders() {\n        if(beeHittingRightWall()) {\n            position.x -= sprite.getWidth();\n        }\n        if(beeHittingLeftWall()) {\n            position.x += sprite.getWidth();\n        }\n        // Check if bee is hitting top and bottom walls\n        if(beeHittingTopWall()) {\n            position.y -= sprite.getHeight();\n        }\n        if(beeHittingBottomWall()) {\n            position.y += sprite.getHeight();\n        }\n    }\n\n    // gets quadrant of coordinate\n    public float getCoordinateQuadrantMinuend(float x, float y) {\n        float yAxis = Gdx.graphics.getWidth() / 2f;\n        float xAxis = Gdx.graphics.getHeight() / 2f;\n\n        if(x &gt; yAxis &amp;&amp; y &gt; xAxis) {\n            return 90f;\n        }\n        else if(x &gt; yAxis &amp;&amp; y &lt; xAxis) {\n            return 180f;\n        }\n        else if(x &lt; yAxis &amp;&amp; y &lt; xAxis) {\n            return 270f;\n        }\n        else {\n            return 360f;\n        }\n    }\n\n    // gets the angle bee needs to be rotated to, to move to a certain coordinate\n    public float getPathfindingRotationAngle(float x1, float y1, float x2, float y2) {\n        float c = (y2 - y1) / (x2 - x1);\n        float minuend = getCoordinateQuadrantMinuend(x1, y1);\n\n        return minuend - MathUtils.atanDeg(c);\n    }\n\n    public float targetAngle() {\n        return 360 - getPathfindingRotationAngle(flowerPosition.x, flowerPosition.y, position.x, position.y);\n    }\n\n    public void moveForward(float deltaTime) {\n        if(!collided) {\n            moveAngle = targetAngle();\n            updateBeeCoordinates(deltaTime);\n            checkBeeHittingBorders();\n        }\n    }\n\n    public void rotateLeft(float deltaTime) {\n        rotationAngle += deltaTime*rotationSpeed;\n        if(rotationAngle &gt; 360) {\n            rotationAngle -= 360;\n        }\n    }\n\n    public void rotateRight(float deltaTime) {\n        rotationAngle += 360 - deltaTime*rotationSpeed;\n        if(rotationAngle &gt; 360) {\n            rotationAngle -= 360;\n        }\n    }\n\n    public void updateRotationAngle(float deltaTime) {\n        float myAngle = targetAngle();\n        if(rotationAngle &gt; myAngle) {\n            rotateRight(deltaTime);\n        }\n        if(rotationAngle &lt; myAngle) {\n            rotateLeft(deltaTime);\n        }\n    }\n\n    // This is called update velocity\n    // because velocity implies a speed and direction\n    // since it is a vector (this function does both of these)\n    public void updateVelocity() {\n        // Adjust X and Y speeds based on angle\n\n        /*\n            looks like this:\n                   0\n                  360\n                   |\n             90____|____270\n                   |\n                   |\n                  180\n         */\n\n        float xSpeedMultiplier;\n        float ySpeedMultiplier;\n        if(rotationAngle &lt; 360 &amp;&amp; rotationAngle &gt; 180) {\n            xSpeedMultiplier = Math.abs(MathUtils.sinDeg(rotationAngle));\n        }\n        else{\n            xSpeedMultiplier = -1 * (MathUtils.sinDeg(rotationAngle));\n        }\n        ySpeedMultiplier = MathUtils.cosDeg(rotationAngle);\n\n\n        xSpeed = topSpeed * xSpeedMultiplier;\n        ySpeed = topSpeed * ySpeedMultiplier;\n    }\n\n    public void Update(float deltaTime) {\n        moveForward(deltaTime);\n        updateRotationAngle(deltaTime);\n        updateVelocity();\n    }\n\n    public void Draw(SpriteBatch batch) {\n        Update(Gdx.graphics.getDeltaTime());\n        sprite.setPosition(position.x, position.y);\n        sprite.setRotation(rotationAngle);\n        sprite.draw(batch);\n    }\n}\n</code></pre>\n<p>The main function I have been trying to debug is updateRotationAngle(float deltaTime).</p>\n<p>Thank you in advance for any help.</p>\n"},{"tags":["java","resources","javafx","fxml","buildpath"],"answers":[{"comments":[{"owner":{"account_id":3322034,"reputation":108,"user_id":2792975,"display_name":"Felix S"},"score":0,"creation_date":1477657657,"post_id":19603055,"comment_id":67867139,"body_markdown":"You are still using the static method in your example. You need to call getResourceAsStream instead of getResource","body":"You are still using the static method in your example. You need to call getResourceAsStream instead of getResource"},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":2,"creation_date":1477938026,"post_id":19603055,"comment_id":67950773,"body_markdown":"Thanks Felix, fixed and clarified the answer. 3 years and 28 upvotes and nobody had pointed out this anomaly in the original answer before ;-)","body":"Thanks Felix, fixed and clarified the answer. 3 years and 28 upvotes and nobody had pointed out this anomaly in the original answer before ;-)"},{"owner":{"account_id":429820,"reputation":3270,"user_id":812919,"display_name":"olfek"},"score":1,"creation_date":1518471192,"post_id":19603055,"comment_id":84512716,"body_markdown":"All this time, it was failing because I did not put `/` before the start folder. I.e. `getClass().getResource(&quot;fxml/main.fxml&quot;)`.","body":"All this time, it was failing because I did not put <code>&#47;</code> before the start folder. I.e. <code>getClass().getResource(&quot;fxml&#47;main.fxml&quot;)</code>."},{"owner":{"account_id":16867098,"reputation":504,"user_id":12196549,"display_name":"Eric"},"score":0,"creation_date":1622226380,"post_id":19603055,"comment_id":119741201,"body_markdown":"Quick note for NetBeans users, you can add existing folders to src by right clicking your project directory &gt; properties &gt; select &quot;sources&quot; &gt; select the folder you want to add to source &gt; Add Folder.  So if you already have a folder with your fxml that you are trying to reference, you can just add the folder and call the fxml files with their relative path.","body":"Quick note for NetBeans users, you can add existing folders to src by right clicking your project directory &gt; properties &gt; select &quot;sources&quot; &gt; select the folder you want to add to source &gt; Add Folder.  So if you already have a folder with your fxml that you are trying to reference, you can just add the folder and call the fxml files with their relative path."}],"tags":[],"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"comment_count":4,"down_vote_count":0,"up_vote_count":126,"is_accepted":true,"score":126,"last_activity_date":1643506017,"creation_date":1382764229,"answer_id":19603055,"question_id":19602727,"body_markdown":"*Generic Resource Lookup Information*\r\n\r\nThis answer discusses FXML location lookup, which is really just a subset of the generic resource lookup task in Java.  The resource location is passed by the calling program as input to the FXMLLoader, so the resource lookup itself is part of your calling application code and not the FXMLLoader.\r\n\r\nFor thorough coverage of generic resource information (including recommended troubleshooting steps) for Java/JavaFX applications, please refer to:\r\n\r\n * https://stackoverflow.com/questions/61531317/how-do-i-determine-the-correct-path-for-fxml-files-css-files-images-and-other\r\n\r\nAlso useful, is the Eden coding resource guide:\r\n\r\n * [Where to put resource files in JavaFX][1]\r\n\r\n----\r\n\r\n*Example usage*\r\n\r\n    FXMLLoader loader = new FXMLLoader();\r\n    loader.setLocation(getClass().getResource(&quot;/main.fxml&quot;));\r\n    Parent content = loader.load(); \r\n\r\n*Location resolution options*\r\n\r\n 1. Put all of your fxml in the src/main/resources directory.\r\n\r\n        loader.setLocation(getClass().getResource(&quot;/main.fxml&quot;));\r\n\r\n 2. Put all of your fxml in a src/main/resources/fxml directory. \r\n\r\n        loader.setLocation(getClass().getResource(&quot;/fxml/main.fxml&quot;));\r\n\r\n 3. Place fxml in a corresponding resource directory; e.g. src/main/resources/com/mycompany/myapp. \r\n\r\n        loader.setLocation(getClass().getResource(&quot;main.fxml&quot;)); \r\n\r\nThe last option assumes that the class from which you are loading the fxml is in the same relative location in the corresponding Java source hierarchy.  For example, you might invoke the last load command from source `com/mycompany/myapp/Main.java`.\r\n\r\n*FXMLLoader usage recommendations*\r\n\r\n 1. Instantiate an FXMLLoader via `new FXMLLoader()` rather than using\r\n    the [static methods on the FXMLLoader][2].  \r\n\r\n    * The static methods\r\n      become confusing when you want to [get values][3] (like instantiated\r\n      controllers) out of a loader.\r\n    \r\n 2. [Set the location][4] on the instantiated FXMLLoader and call\r\n    [`load()`][5] rather than loading from a stream using\r\n    [`load(stream)`](https://docs.oracle.com/javase/8/javafx/api/javafx/fxml/FXMLLoader.html#load-java.io.InputStream-).\r\n\r\n    * Setting a URL based location on the loader allows for resolution of\r\n      relative resources loaded in fxml and css files.  Relative\r\n      resources do not resolve for a stream based constructor.\r\n    \r\n 3. To derive a location based upon a class, use\r\n    [`getClass().getResource()`][6], as it is URL based, rather than\r\n    [`getClass().getResourceAsStream()`][7] which is stream based.\r\n\r\n*IDE and Build Settings*\r\n\r\nEnsure that your IDE or build tool is copying the fxml files from the resource directory to the build output directory.  For understanding Intellij settings for this, see: [How to convert a normal java project in intellij into a JavaFx project](https://stackoverflow.com/questions/23421325/how-to-convert-a-normal-java-project-in-intellij-into-a-javafx-project).\r\n\r\n*A note on Java Jigsaw modular applications*\r\n\r\nSee:\r\n \r\n * https://stackoverflow.com/questions/48768879/how-to-access-resource-using-class-loader-in-java-9/48790851#48790851\r\n\r\nSpecifically, don&#39;t write:\r\n\r\n    ComboBoxStyling.class.getClassLoader()\r\n        .getResource(&quot;/css/styleclass.css&quot;);\r\n\r\nInstead write:\r\n\r\n    ComboBoxStyling.class\r\n        .getResource(&quot;/css/styleclass.css&quot;); \r\n\r\nThat is, get the resource from the class directly rather, NOT from the class loader.  If you get resources from a class loader rather than the class, then there are additional restrictions on lookup based upon the module configuration.  These restrictions can be hard to understand, see the documentation for the [`Class`](https://docs.oracle.com/en/java/javase/16/docs/api/java.base/java/lang/Class.html#getResource(java.lang.String)) and [`ClassLoader`](https://docs.oracle.com/en/java/javase/16/docs/api/java.base/java/lang/ClassLoader.html#getResource(java.lang.String)) `getResource` methods for information if needed.\r\n\r\n\r\n  [1]: https://edencoding.com/where-to-put-resource-files-in-javafx/\r\n  [2]: https://docs.oracle.com/javase/8/javafx/api/javafx/fxml/FXMLLoader.html#load-java.net.URL-\r\n  [3]: http://docs.oracle.com/javafx/2/api/javafx/fxml/FXMLLoader.html#getController%28%29\r\n  [4]: https://docs.oracle.com/javase/8/javafx/api/javafx/fxml/FXMLLoader.html#setLocation-java.net.URL-\r\n  [5]: https://docs.oracle.com/javase/8/javafx/api/javafx/fxml/FXMLLoader.html#load--\r\n  [6]: https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html#getResource-java.lang.String-\r\n  [7]: https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html#getResourceAsStream-java.lang.String-","title":"How to reference javafx fxml files in resource folder?","body":"<p><em>Generic Resource Lookup Information</em></p>\n<p>This answer discusses FXML location lookup, which is really just a subset of the generic resource lookup task in Java.  The resource location is passed by the calling program as input to the FXMLLoader, so the resource lookup itself is part of your calling application code and not the FXMLLoader.</p>\n<p>For thorough coverage of generic resource information (including recommended troubleshooting steps) for Java/JavaFX applications, please refer to:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/61531317/how-do-i-determine-the-correct-path-for-fxml-files-css-files-images-and-other\">How do I determine the correct path for FXML files, CSS files, Images, and other resources needed by my JavaFX Application?</a></li>\n</ul>\n<p>Also useful, is the Eden coding resource guide:</p>\n<ul>\n<li><a href=\"https://edencoding.com/where-to-put-resource-files-in-javafx/\" rel=\"noreferrer\">Where to put resource files in JavaFX</a></li>\n</ul>\n<hr />\n<p><em>Example usage</em></p>\n<pre><code>FXMLLoader loader = new FXMLLoader();\nloader.setLocation(getClass().getResource(&quot;/main.fxml&quot;));\nParent content = loader.load(); \n</code></pre>\n<p><em>Location resolution options</em></p>\n<ol>\n<li><p>Put all of your fxml in the src/main/resources directory.</p>\n<pre><code>loader.setLocation(getClass().getResource(&quot;/main.fxml&quot;));\n</code></pre>\n</li>\n<li><p>Put all of your fxml in a src/main/resources/fxml directory.</p>\n<pre><code>loader.setLocation(getClass().getResource(&quot;/fxml/main.fxml&quot;));\n</code></pre>\n</li>\n<li><p>Place fxml in a corresponding resource directory; e.g. src/main/resources/com/mycompany/myapp.</p>\n<pre><code>loader.setLocation(getClass().getResource(&quot;main.fxml&quot;)); \n</code></pre>\n</li>\n</ol>\n<p>The last option assumes that the class from which you are loading the fxml is in the same relative location in the corresponding Java source hierarchy.  For example, you might invoke the last load command from source <code>com/mycompany/myapp/Main.java</code>.</p>\n<p><em>FXMLLoader usage recommendations</em></p>\n<ol>\n<li><p>Instantiate an FXMLLoader via <code>new FXMLLoader()</code> rather than using\nthe <a href=\"https://docs.oracle.com/javase/8/javafx/api/javafx/fxml/FXMLLoader.html#load-java.net.URL-\" rel=\"noreferrer\">static methods on the FXMLLoader</a>.</p>\n<ul>\n<li>The static methods\nbecome confusing when you want to <a href=\"http://docs.oracle.com/javafx/2/api/javafx/fxml/FXMLLoader.html#getController%28%29\" rel=\"noreferrer\">get values</a> (like instantiated\ncontrollers) out of a loader.</li>\n</ul>\n</li>\n<li><p><a href=\"https://docs.oracle.com/javase/8/javafx/api/javafx/fxml/FXMLLoader.html#setLocation-java.net.URL-\" rel=\"noreferrer\">Set the location</a> on the instantiated FXMLLoader and call\n<a href=\"https://docs.oracle.com/javase/8/javafx/api/javafx/fxml/FXMLLoader.html#load--\" rel=\"noreferrer\"><code>load()</code></a> rather than loading from a stream using\n<a href=\"https://docs.oracle.com/javase/8/javafx/api/javafx/fxml/FXMLLoader.html#load-java.io.InputStream-\" rel=\"noreferrer\"><code>load(stream)</code></a>.</p>\n<ul>\n<li>Setting a URL based location on the loader allows for resolution of\nrelative resources loaded in fxml and css files.  Relative\nresources do not resolve for a stream based constructor.</li>\n</ul>\n</li>\n<li><p>To derive a location based upon a class, use\n<a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html#getResource-java.lang.String-\" rel=\"noreferrer\"><code>getClass().getResource()</code></a>, as it is URL based, rather than\n<a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html#getResourceAsStream-java.lang.String-\" rel=\"noreferrer\"><code>getClass().getResourceAsStream()</code></a> which is stream based.</p>\n</li>\n</ol>\n<p><em>IDE and Build Settings</em></p>\n<p>Ensure that your IDE or build tool is copying the fxml files from the resource directory to the build output directory.  For understanding Intellij settings for this, see: <a href=\"https://stackoverflow.com/questions/23421325/how-to-convert-a-normal-java-project-in-intellij-into-a-javafx-project\">How to convert a normal java project in intellij into a JavaFx project</a>.</p>\n<p><em>A note on Java Jigsaw modular applications</em></p>\n<p>See:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/48768879/how-to-access-resource-using-class-loader-in-java-9/48790851#48790851\">How to access resource using class loader in Java 9</a></li>\n</ul>\n<p>Specifically, don't write:</p>\n<pre><code>ComboBoxStyling.class.getClassLoader()\n    .getResource(&quot;/css/styleclass.css&quot;);\n</code></pre>\n<p>Instead write:</p>\n<pre><code>ComboBoxStyling.class\n    .getResource(&quot;/css/styleclass.css&quot;); \n</code></pre>\n<p>That is, get the resource from the class directly rather, NOT from the class loader.  If you get resources from a class loader rather than the class, then there are additional restrictions on lookup based upon the module configuration.  These restrictions can be hard to understand, see the documentation for the <a href=\"https://docs.oracle.com/en/java/javase/16/docs/api/java.base/java/lang/Class.html#getResource(java.lang.String)\" rel=\"noreferrer\"><code>Class</code></a> and <a href=\"https://docs.oracle.com/en/java/javase/16/docs/api/java.base/java/lang/ClassLoader.html#getResource(java.lang.String)\" rel=\"noreferrer\"><code>ClassLoader</code></a> <code>getResource</code> methods for information if needed.</p>\n"},{"comments":[{"owner":{"account_id":1946996,"reputation":545,"user_id":1751896,"accept_rate":35,"display_name":"Ajoy"},"score":0,"creation_date":1604243647,"post_id":19615021,"comment_id":114281444,"body_markdown":"Actually this is the simple answer to the problem, makes sense too once you think about it . The path is relative to the source file where were are calling the FXMLLoader().","body":"Actually this is the simple answer to the problem, makes sense too once you think about it . The path is relative to the source file where were are calling the FXMLLoader()."}],"tags":[],"owner":{"account_id":3078809,"reputation":618,"user_id":2607536,"accept_rate":58,"display_name":"Dil"},"comment_count":1,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1382852267,"creation_date":1382852267,"answer_id":19615021,"question_id":19602727,"body_markdown":"You are using `FXMLLoader fxmlLoader = new FXMLLoader( getClass().getResource(&quot;main.fxml&quot;) );` to load your main.fxml. This requires the main.fxml and the java class loading it in same directory/path.\r\nIf you want to load an fxml file from a path/location different from the java class loading it, you need to use relative path.\r\nAs @jewelsea mentioned above, you may use the relative path using / character before your main.fxml.\r\nSo the code that will make it work for you in your case is\r\n\r\n    FXMLLoader fxmlLoader = new FXMLLoader( getClass().getResource(&quot;/main.fxml&quot;) );","title":"How to reference javafx fxml files in resource folder?","body":"<p>You are using <code>FXMLLoader fxmlLoader = new FXMLLoader( getClass().getResource(\"main.fxml\") );</code> to load your main.fxml. This requires the main.fxml and the java class loading it in same directory/path.\nIf you want to load an fxml file from a path/location different from the java class loading it, you need to use relative path.\nAs @jewelsea mentioned above, you may use the relative path using / character before your main.fxml.\nSo the code that will make it work for you in your case is</p>\n\n<pre><code>FXMLLoader fxmlLoader = new FXMLLoader( getClass().getResource(\"/main.fxml\") );\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1345093,"reputation":2590,"user_id":1286009,"accept_rate":75,"display_name":"Hendrik Ebbers"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1384855151,"creation_date":1384855151,"answer_id":20068368,"question_id":19602727,"body_markdown":"Open your resources folder in the file explorer of your operation system. Here you will see that you have created a &quot;dominion.application&quot; folder instead of an &quot;application&quot; folder inside of a &quot;dominion&quot; folder. Because of this the &quot;MainController&quot; class is placed in a different package as the fxml file.","title":"How to reference javafx fxml files in resource folder?","body":"<p>Open your resources folder in the file explorer of your operation system. Here you will see that you have created a \"dominion.application\" folder instead of an \"application\" folder inside of a \"dominion\" folder. Because of this the \"MainController\" class is placed in a different package as the fxml file.</p>\n"}],"owner":{"account_id":1439087,"reputation":3787,"user_id":1359765,"accept_rate":73,"display_name":"j will"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":97486,"favorite_count":0,"down_vote_count":0,"up_vote_count":50,"accepted_answer_id":19603055,"answer_count":3,"score":50,"last_activity_date":1689386845,"creation_date":1382760822,"question_id":19602727,"body_markdown":"I am creating a javafx GUI application and my project is a maven configured project. I want to be able to reference my fxml files like this in my controllers:\r\n\r\n    FXMLLoader.load(getClass().getResource(&quot;main.fxml&quot;)); \r\n\r\n\r\nWhere my main.fxml file is located in the src/main/resources folder and my controller is in the src/main/java folder. How do i go about doing this? My src/main/resources folder is in the build path and i am able to call a .properties file that is in the src/main/resources folder from a class in the src/main/java folder.\r\n\r\n**Edit**\r\n\r\nI attempted to place the fxml file in the corresponding directory of the main resources folder:\r\n\r\n![enter image description here][1]\r\n\r\nbut i still got an error.\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/C3rr8.png","title":"How to reference javafx fxml files in resource folder?","body":"<p>I am creating a javafx GUI application and my project is a maven configured project. I want to be able to reference my fxml files like this in my controllers:</p>\n<pre><code>FXMLLoader.load(getClass().getResource(&quot;main.fxml&quot;)); \n</code></pre>\n<p>Where my main.fxml file is located in the src/main/resources folder and my controller is in the src/main/java folder. How do i go about doing this? My src/main/resources folder is in the build path and i am able to call a .properties file that is in the src/main/resources folder from a class in the src/main/java folder.</p>\n<p><strong>Edit</strong></p>\n<p>I attempted to place the fxml file in the corresponding directory of the main resources folder:</p>\n<p><img src=\"https://i.stack.imgur.com/C3rr8.png\" alt=\"enter image description here\" /></p>\n<p>but i still got an error.</p>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":4076597,"reputation":4537,"user_id":3348112,"accept_rate":75,"display_name":"CAustin"},"score":2,"creation_date":1689387421,"post_id":76691952,"comment_id":135210605,"body_markdown":"Regex doesn&#39;t do math, so determining whether a certain time is earlier or later in the day will be ugly. You can validate your input via regex with regards to rules 2. and 3., but I suggest processing the result with `java.time` to validate the order.","body":"Regex doesn&#39;t do math, so determining whether a certain time is earlier or later in the day will be ugly. You can validate your input via regex with regards to rules 2. and 3., but I suggest processing the result with <code>java.time</code> to validate the order."},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1689398683,"post_id":76691952,"comment_id":135211090,"body_markdown":"Please check this [answer](https://meta.stackoverflow.com/a/326590/16320675) (and corresponding question)","body":"Please check this <a href=\"https://meta.stackoverflow.com/a/326590/16320675\">answer</a> (and corresponding question)"}],"answers":[{"tags":[],"owner":{"account_id":10732579,"reputation":666,"user_id":7898202,"display_name":"MorganS42"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1689386611,"creation_date":1689386611,"answer_id":76691958,"question_id":76691952,"body_markdown":"The regex answer is:\r\n```regex\r\n^((0[8-9]|1[0-9]|20):[03]0)-((0[8-9]|1[0-9]|20):[03]0)$\r\n```\r\n\r\nNote that this does not ensure that the start time is before the end time, you would need additional Java code to do that.","title":"How to check if a string is in this format &quot;12:30-14:30&quot; using regex","body":"<p>The regex answer is:</p>\n<pre><code>^((0[8-9]|1[0-9]|20):[03]0)-((0[8-9]|1[0-9]|20):[03]0)$\n</code></pre>\n<p>Note that this does not ensure that the start time is before the end time, you would need additional Java code to do that.</p>\n"}],"owner":{"account_id":20125831,"reputation":209,"user_id":14759319,"display_name":"Heng Wei"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":48,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"accepted_answer_id":76691958,"answer_count":1,"score":-3,"last_activity_date":1689386611,"creation_date":1689386415,"question_id":76691952,"body_markdown":"I&#39;m in a rush so I don&#39;t have time to review regex rules.\r\n\r\nI would like to know how do I check if a string is in this format &quot;12:30-14:30&quot;, where\r\n\r\n1. the start time has to be before the end time.\r\n2. the minute section has to be &quot;:00&quot; or &quot;:30&quot;.\r\n3. the hour section is between &quot;08:&quot; and &quot;20:&quot;.\r\n\r\nAny help will be greatly appreciated! Thank you.","title":"How to check if a string is in this format &quot;12:30-14:30&quot; using regex","body":"<p>I'm in a rush so I don't have time to review regex rules.</p>\n<p>I would like to know how do I check if a string is in this format &quot;12:30-14:30&quot;, where</p>\n<ol>\n<li>the start time has to be before the end time.</li>\n<li>the minute section has to be &quot;:00&quot; or &quot;:30&quot;.</li>\n<li>the hour section is between &quot;08:&quot; and &quot;20:&quot;.</li>\n</ol>\n<p>Any help will be greatly appreciated! Thank you.</p>\n"},{"tags":["java","multithreading","asynchronous","thread-safety","threadpool"],"comments":[{"owner":{"account_id":5998820,"reputation":12676,"user_id":4712734,"display_name":"DuncG"},"score":0,"creation_date":1689329572,"post_id":76686657,"comment_id":135201302,"body_markdown":"Not hugely different from your [previous question](https://stackoverflow.com/questions/76685093/how-to-run-threads-asynchrounously-but-get-results-in-synchronous-way-without-us) which you could have edited based on the comments or deleted.","body":"Not hugely different from your <a href=\"https://stackoverflow.com/questions/76685093/how-to-run-threads-asynchrounously-but-get-results-in-synchronous-way-without-us\">previous question</a> which you could have edited based on the comments or deleted."},{"owner":{"account_id":28962393,"reputation":1,"user_id":22184619,"display_name":"aditya sharma"},"score":0,"creation_date":1689329944,"post_id":76686657,"comment_id":135201366,"body_markdown":"what can i do to solve this problem @DuncG i have made changes","body":"what can i do to solve this problem @DuncG i have made changes"},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":2,"creation_date":1689330086,"post_id":76686657,"comment_id":135201392,"body_markdown":"AFAIK it is not possible.","body":"AFAIK it is not possible."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1689330617,"post_id":76686657,"comment_id":135201469,"body_markdown":"(Note that the `AtomicInteger` implementation in Java relies on CAS - compare and swap - or a similar instruction provided by the hardware.  `volatile` semantics are not sufficient.)","body":"(Note that the <code>AtomicInteger</code> implementation in Java relies on CAS - compare and swap - or a similar instruction provided by the hardware.  <code>volatile</code> semantics are not sufficient.)"},{"owner":{"account_id":5998820,"reputation":12676,"user_id":4712734,"display_name":"DuncG"},"score":0,"creation_date":1689331129,"post_id":76686657,"comment_id":135201548,"body_markdown":"You need to explain the problem properly. Even if you resolve updating the counters the final total is never going to be right as you await termination for 10ms but may have 5x runnable each requiring 200ms before they end","body":"You need to explain the problem properly. Even if you resolve updating the counters the final total is never going to be right as you await termination for 10ms but may have 5x runnable each requiring 200ms before they end"},{"owner":{"account_id":28962393,"reputation":1,"user_id":22184619,"display_name":"aditya sharma"},"score":0,"creation_date":1689331734,"post_id":76686657,"comment_id":135201649,"body_markdown":"i want that when threads are taking over count situation like deadlock or race condition should not occur\nalso the count after 10000 iteration should be 10000 @DuncG","body":"i want that when threads are taking over count situation like deadlock or race condition should not occur also the count after 10000 iteration should be 10000 @DuncG"},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1689336010,"post_id":76686657,"comment_id":135202508,"body_markdown":"If `count` wasn&#39;t an array it could be `volatile`.","body":"If <code>count</code> wasn&#39;t an array it could be <code>volatile</code>."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1689349901,"post_id":76686657,"comment_id":135205826,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"answers":[{"tags":[],"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689386415,"creation_date":1689386415,"answer_id":76691951,"question_id":76686657,"body_markdown":"No, it is not possible to make the `++` operator thread safe without synchronization or locking. [This is not an atomic operation][1], and requires three sub-steps:\r\n\r\n1. reading the current value of the variable\r\n2. adding one to that value\r\n3. storing the result back in that variable\r\n\r\nIn a multi-threaded context, these operations can be interleaved with other threads, meaning that the value of the variable can change between step 1 and step 3 above resulting in a lost update because the same count is stored by more than one thread.\r\n\r\nIn addition to that, it is _never_ thread safe to access and modify an array concurrently in Java without taking measures to ensure visibility of updates to other threads. See https://stackoverflow.com/q/5173614/29470 for details.\r\n\r\nThe only way to perform an atomic, thread-safe increment operation without locking in Java is to use classes from [`java.util.concurrent.atomic`][2], such as [`AtomicInteger`][3] or [`AtomicLong`][4].\r\n\r\n\r\n  [1]: https://stackoverflow.com/q/25168062/29470\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/atomic/package-summary.html\r\n  [3]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/atomic/AtomicInteger.html\r\n  [4]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/atomic/AtomicLong.html","title":"is it possible to make an non atomic variable thread safe without using locks or synchronized","body":"<p>No, it is not possible to make the <code>++</code> operator thread safe without synchronization or locking. <a href=\"https://stackoverflow.com/q/25168062/29470\">This is not an atomic operation</a>, and requires three sub-steps:</p>\n<ol>\n<li>reading the current value of the variable</li>\n<li>adding one to that value</li>\n<li>storing the result back in that variable</li>\n</ol>\n<p>In a multi-threaded context, these operations can be interleaved with other threads, meaning that the value of the variable can change between step 1 and step 3 above resulting in a lost update because the same count is stored by more than one thread.</p>\n<p>In addition to that, it is <em>never</em> thread safe to access and modify an array concurrently in Java without taking measures to ensure visibility of updates to other threads. See <a href=\"https://stackoverflow.com/q/5173614/29470\">Java volatile array?</a> for details.</p>\n<p>The only way to perform an atomic, thread-safe increment operation without locking in Java is to use classes from <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/atomic/package-summary.html\" rel=\"nofollow noreferrer\"><code>java.util.concurrent.atomic</code></a>, such as <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/atomic/AtomicInteger.html\" rel=\"nofollow noreferrer\"><code>AtomicInteger</code></a> or <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/atomic/AtomicLong.html\" rel=\"nofollow noreferrer\"><code>AtomicLong</code></a>.</p>\n"}],"owner":{"account_id":28962393,"reputation":1,"user_id":22184619,"display_name":"aditya sharma"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":63,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1689386415,"creation_date":1689329027,"question_id":76686657,"body_markdown":"I want to run this asynchronously but all no thread locking , no syncronization also awaitTermination timeout should not be increased.\r\n\r\n\r\n```\r\n\t@Test\r\n\tvoid arrayCheck() throws InterruptedException {\r\n\t\tfinal int[] count = {0};\r\n\t\tExecutorService executorService = Executors.newFixedThreadPool(5);\r\n\t\tfor (int i = 0; i &lt;10000; i++) {\r\n\t\t\texecutorService.execute(() -&gt;\r\n\t\t\t{\r\n\t\t\t\ttry {\r\n\t\t\t\t\tThread.sleep(100);\r\n\t\t\t\t\tcount[0]++;\r\n\t\t\t\t\tSystem.out.println(Thread.currentThread().getName()+&quot;----&quot;+count[0]+&quot;---&quot;);\r\n\t\t\t\t\tThread.sleep(100);\r\n\t\t\t\t} catch (InterruptedException e) {\r\n\t\t\t\t\tthrow new RuntimeException(e);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\texecutorService.awaitTermination(10,TimeUnit.MILLISECONDS);\r\n\r\n\t\t}\r\n\t\tAssertions.assertEquals(10000,count[0]);\r\n\t}\r\n```\r\n\r\n\r\ni have used atomic variables but i have to use array only \r\n","title":"is it possible to make an non atomic variable thread safe without using locks or synchronized","body":"<p>I want to run this asynchronously but all no thread locking , no syncronization also awaitTermination timeout should not be increased.</p>\n<pre><code>    @Test\n    void arrayCheck() throws InterruptedException {\n        final int[] count = {0};\n        ExecutorService executorService = Executors.newFixedThreadPool(5);\n        for (int i = 0; i &lt;10000; i++) {\n            executorService.execute(() -&gt;\n            {\n                try {\n                    Thread.sleep(100);\n                    count[0]++;\n                    System.out.println(Thread.currentThread().getName()+&quot;----&quot;+count[0]+&quot;---&quot;);\n                    Thread.sleep(100);\n                } catch (InterruptedException e) {\n                    throw new RuntimeException(e);\n                }\n            });\n            executorService.awaitTermination(10,TimeUnit.MILLISECONDS);\n\n        }\n        Assertions.assertEquals(10000,count[0]);\n    }\n</code></pre>\n<p>i have used atomic variables but i have to use array only</p>\n"},{"tags":["java","minecraft"],"comments":[{"owner":{"account_id":15178500,"reputation":4190,"user_id":10952503,"display_name":"Elikill58"},"score":0,"creation_date":1689353597,"post_id":76688693,"comment_id":135206629,"body_markdown":"Welcome on Stackoverflow. is it your plugin?","body":"Welcome on Stackoverflow. is it your plugin?"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1689364290,"post_id":76688693,"comment_id":135208482,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."},{"owner":{"account_id":29018039,"reputation":1,"user_id":22228073,"display_name":"gyu29"},"score":0,"creation_date":1689385594,"post_id":76688693,"comment_id":135210506,"body_markdown":"It is my plugin\n\n,Elikill58","body":"It is my plugin  ,Elikill58"},{"owner":{"account_id":28334758,"reputation":70,"user_id":21668471,"display_name":"atlaska826"},"score":0,"creation_date":1689523750,"post_id":76688693,"comment_id":135222415,"body_markdown":"Could you provide your plugin.yml file and your GravePlugin code?","body":"Could you provide your plugin.yml file and your GravePlugin code?"}],"owner":{"account_id":29018039,"reputation":1,"user_id":22228073,"display_name":"gyu29"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689385675,"creation_date":1689345210,"question_id":76688693,"body_markdown":"So I have grave plugin, but it says that it can&#39;t find the main class GravePlugin, although the main class is GravePlugin.\r\n(I made this plugin.)\r\n\r\nHere is the error\r\n\r\n```\r\n[23:24:37 ERROR]: Could not load &#39;plugins/graves.jar&#39; in folder &#39;plugins&#39;\r\norg.bukkit.plugin.InvalidPluginException: Cannot find main class `GravePlugin&#39;\r\n\tat org.bukkit.plugin.java.PluginClassLoader.&lt;init&gt;(PluginClassLoader.java:73) ~[paper-api-1.19.2-R0.1-SNAPSHOT.jar:?]\r\n\tat org.bukkit.plugin.java.JavaPluginLoader.loadPlugin(JavaPluginLoader.java:153) ~[paper-api-1.19.2-R0.1-SNAPSHOT.jar:?]\r\n\tat org.bukkit.plugin.SimplePluginManager.loadPlugin(SimplePluginManager.java:411) ~[paper-api-1.19.2-R0.1-SNAPSHOT.jar:?]\r\n\tat org.bukkit.plugin.SimplePluginManager.loadPlugins(SimplePluginManager.java:319) ~[paper-api-1.19.2-R0.1-SNAPSHOT.jar:?]\r\n\tat org.bukkit.craftbukkit.v1_19_R1.CraftServer.loadPlugins(CraftServer.java:423) ~[paper-1.19.2.jar:git-Paper-307]\r\n\tat net.minecraft.server.dedicated.DedicatedServer.initServer(DedicatedServer.java:278) ~[paper-1.19.2.jar:git-Paper-307]\r\n\tat net.minecraft.server.MinecraftServer.runServer(MinecraftServer.java:1100) ~[paper-1.19.2.jar:git-Paper-307]\r\n\tat net.minecraft.server.MinecraftServer.lambda$spin$0(MinecraftServer.java:305) ~[paper-1.19.2.jar:git-Paper-307]\r\n\tat java.lang.Thread.run(Thread.java:833) ~[?:?]\r\nCaused by: java.lang.ClassNotFoundException: GravePlugin\r\n\tat org.bukkit.plugin.java.PluginClassLoader.loadClass0(PluginClassLoader.java:177) ~[paper-api-1.19.2-R0.1-SNAPSHOT.jar:?]\r\n\tat org.bukkit.plugin.java.PluginClassLoader.loadClass(PluginClassLoader.java:124) ~[paper-api-1.19.2-R0.1-SNAPSHOT.jar:?]\r\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:520) ~[?:?]\r\n\tat java.lang.Class.forName0(Native Method) ~[?:?]\r\n\tat java.lang.Class.forName(Class.java:467) ~[?:?]\r\n\tat org.bukkit.plugin.java.PluginClassLoader.&lt;init&gt;(PluginClassLoader.java:71) ~[paper-api-1.19.2-R0.1-SNAPSHOT.jar:?]\r\n\t... 8 more\r\n\r\n```\r\n\r\n\r\nI wanted the grave plugin to create a grave when i died, but instead when i launched my self-hosted server, it said that it couldn&#39;t find the main class.","title":"Could Not load plugin in self hosted server","body":"<p>So I have grave plugin, but it says that it can't find the main class GravePlugin, although the main class is GravePlugin.\n(I made this plugin.)</p>\n<p>Here is the error</p>\n<pre><code>[23:24:37 ERROR]: Could not load 'plugins/graves.jar' in folder 'plugins'\norg.bukkit.plugin.InvalidPluginException: Cannot find main class `GravePlugin'\n    at org.bukkit.plugin.java.PluginClassLoader.&lt;init&gt;(PluginClassLoader.java:73) ~[paper-api-1.19.2-R0.1-SNAPSHOT.jar:?]\n    at org.bukkit.plugin.java.JavaPluginLoader.loadPlugin(JavaPluginLoader.java:153) ~[paper-api-1.19.2-R0.1-SNAPSHOT.jar:?]\n    at org.bukkit.plugin.SimplePluginManager.loadPlugin(SimplePluginManager.java:411) ~[paper-api-1.19.2-R0.1-SNAPSHOT.jar:?]\n    at org.bukkit.plugin.SimplePluginManager.loadPlugins(SimplePluginManager.java:319) ~[paper-api-1.19.2-R0.1-SNAPSHOT.jar:?]\n    at org.bukkit.craftbukkit.v1_19_R1.CraftServer.loadPlugins(CraftServer.java:423) ~[paper-1.19.2.jar:git-Paper-307]\n    at net.minecraft.server.dedicated.DedicatedServer.initServer(DedicatedServer.java:278) ~[paper-1.19.2.jar:git-Paper-307]\n    at net.minecraft.server.MinecraftServer.runServer(MinecraftServer.java:1100) ~[paper-1.19.2.jar:git-Paper-307]\n    at net.minecraft.server.MinecraftServer.lambda$spin$0(MinecraftServer.java:305) ~[paper-1.19.2.jar:git-Paper-307]\n    at java.lang.Thread.run(Thread.java:833) ~[?:?]\nCaused by: java.lang.ClassNotFoundException: GravePlugin\n    at org.bukkit.plugin.java.PluginClassLoader.loadClass0(PluginClassLoader.java:177) ~[paper-api-1.19.2-R0.1-SNAPSHOT.jar:?]\n    at org.bukkit.plugin.java.PluginClassLoader.loadClass(PluginClassLoader.java:124) ~[paper-api-1.19.2-R0.1-SNAPSHOT.jar:?]\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:520) ~[?:?]\n    at java.lang.Class.forName0(Native Method) ~[?:?]\n    at java.lang.Class.forName(Class.java:467) ~[?:?]\n    at org.bukkit.plugin.java.PluginClassLoader.&lt;init&gt;(PluginClassLoader.java:71) ~[paper-api-1.19.2-R0.1-SNAPSHOT.jar:?]\n    ... 8 more\n\n</code></pre>\n<p>I wanted the grave plugin to create a grave when i died, but instead when i launched my self-hosted server, it said that it couldn't find the main class.</p>\n"},{"tags":["java","spring","spring-boot","gradle","spring-data-jpa"],"comments":[{"owner":{"account_id":3475140,"reputation":2491,"user_id":3019956,"accept_rate":33,"display_name":"want2learn"},"score":2,"creation_date":1539269486,"post_id":52762651,"comment_id":92449147,"body_markdown":"See this one. https://stackoverflow.com/questions/41315386/spring-boot-1-4-datajpatest-error-creating-bean-with-name-datasource","body":"See this one. <a href=\"https://stackoverflow.com/questions/41315386/spring-boot-1-4-datajpatest-error-creating-bean-with-name-datasource\" title=\"spring boot 1 4 datajpatest error creating bean with name datasource\">stackoverflow.com/questions/41315386/&hellip;</a>"},{"owner":{"account_id":8981279,"reputation":391,"user_id":9597226,"display_name":"Ahmed Bajra"},"score":1,"creation_date":1539269771,"post_id":52762651,"comment_id":92449342,"body_markdown":"Possible duplicate of [Spring Boot 1.4 @DataJpaTest - Error creating bean with name &#39;dataSource&#39;](https://stackoverflow.com/questions/41315386/spring-boot-1-4-datajpatest-error-creating-bean-with-name-datasource)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/41315386/spring-boot-1-4-datajpatest-error-creating-bean-with-name-datasource\">Spring Boot 1.4 @DataJpaTest - Error creating bean with name &#39;dataSource&#39;</a>"}],"answers":[{"tags":[],"owner":{"account_id":12501538,"reputation":838,"user_id":9099864,"display_name":"bdzzaid"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1566668380,"creation_date":1539270347,"answer_id":52763390,"question_id":52762651,"body_markdown":"According to the exception \r\n\r\n    Failed to replace DataSource with an embedded database for tests. If you want an embedded database please put a supported one on the classpath or tune the replace attribute of @AutoConfigureTestDatabase.\r\n\r\nAdd first this property in the file (see the doc [https://docs.spring.io/spring-boot/docs/current/reference/html/howto-database-initialization.html]\r\n[Database Initialization]\r\n\r\n    spring.datasource.platform=posgresql\r\n\r\n\r\nAlso, you should remove the bean declaration (duplicated from the datasource declared in the file application.properties , or add a `@Qualifier` for this specific bean. \r\n\r\n    @Bean\r\n    public DataSource dataSource() {\r\n        final DriverManagerDataSource dataSource = new DriverManagerDataSource();\r\n        dataSource.setDriverClassName(env.getProperty(&quot;jdbc.driverClassName&quot;));\r\n        dataSource.setUrl(env.getProperty(&quot;jdbc.url&quot;));\r\n        dataSource.setUsername(env.getProperty(&quot;jdbc.user&quot;));\r\n        dataSource.setPassword(env.getProperty(&quot;jdbc.pass&quot;));\r\n    \r\n        return dataSource;\r\n    }\r\n\r\nAlso, in my case, I&#39;m using flyway in a springboot application with a IBM Db2 datasource. I have to add **explicitly** this properties in my **application.properties** : \r\n\r\n    flyway.url=jdbc:db2://myserver:50000/mydbinstance\r\n    flyway.user=myuser\r\n    flyway.password=****\r\n\r\n","title":"Error creating bean with name &#39;dataSource&#39;: Invocation of init method failed","body":"<p>According to the exception </p>\n\n<pre><code>Failed to replace DataSource with an embedded database for tests. If you want an embedded database please put a supported one on the classpath or tune the replace attribute of @AutoConfigureTestDatabase.\n</code></pre>\n\n<p>Add first this property in the file (see the doc [<a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/howto-database-initialization.html]\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-boot/docs/current/reference/html/howto-database-initialization.html]</a>\n[Database Initialization]</p>\n\n<pre><code>spring.datasource.platform=posgresql\n</code></pre>\n\n<p>Also, you should remove the bean declaration (duplicated from the datasource declared in the file application.properties , or add a <code>@Qualifier</code> for this specific bean. </p>\n\n<pre><code>@Bean\npublic DataSource dataSource() {\n    final DriverManagerDataSource dataSource = new DriverManagerDataSource();\n    dataSource.setDriverClassName(env.getProperty(\"jdbc.driverClassName\"));\n    dataSource.setUrl(env.getProperty(\"jdbc.url\"));\n    dataSource.setUsername(env.getProperty(\"jdbc.user\"));\n    dataSource.setPassword(env.getProperty(\"jdbc.pass\"));\n\n    return dataSource;\n}\n</code></pre>\n\n<p>Also, in my case, I'm using flyway in a springboot application with a IBM Db2 datasource. I have to add <strong>explicitly</strong> this properties in my <strong>application.properties</strong> : </p>\n\n<pre><code>flyway.url=jdbc:db2://myserver:50000/mydbinstance\nflyway.user=myuser\nflyway.password=****\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22453361,"reputation":97,"user_id":16656366,"display_name":"LongDev"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689385529,"creation_date":1689385529,"answer_id":76691910,"question_id":52762651,"body_markdown":"i try to add \r\n\r\n```\r\n@DataJpaTest\r\n@AutoConfigureTestDatabase(replace = AutoConfigureTestDatabase.Replace.NONE)\r\npublic class SpringBootJpaTest {\r\n\r\n```\r\n\r\nand it works for me","title":"Error creating bean with name &#39;dataSource&#39;: Invocation of init method failed","body":"<p>i try to add</p>\n<pre><code>@DataJpaTest\n@AutoConfigureTestDatabase(replace = AutoConfigureTestDatabase.Replace.NONE)\npublic class SpringBootJpaTest {\n\n</code></pre>\n<p>and it works for me</p>\n"}],"owner":{"account_id":10073268,"reputation":695,"user_id":7446217,"display_name":"BlueScoreMan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":18766,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"answer_count":2,"score":2,"last_activity_date":1689385529,"creation_date":1539268197,"question_id":52762651,"body_markdown":"I&#39;m very new to Spring Boot and was trying to do some tests. When I suddenly encounterd a problem I&#39;ve been trying to solve for the past 3 hours...\r\n\r\nI believe the main concern here is this:\r\n\r\n&gt; Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration$FlywayConfiguration&#39;: Bean instantiation via constructor failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration$FlywayConfiguration$$EnhancerBySpringCGLIB$$8cc0418d]: Constructor threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;dataSource&#39;: Invocation of init method failed; nested exception is java.lang.IllegalStateException: Failed to replace DataSource with an embedded database for tests. If you want an embedded database please put a supported one on the classpath or tune the replace attribute of @AutoConfigureTestDatabase\r\n\r\nBut neither the less, here are my ErrorLogs:\r\n\r\n    java.lang.IllegalStateException: Failed to load ApplicationContext\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:125)\r\n\tat org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:108)\r\n\tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:117)\r\n\tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:83)\r\n\tat org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener.prepareTestInstance(SpringBootDependencyInjectionTestExecutionListener.java:44)\r\n\tat org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:246)\r\n\tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:227)\r\n\tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:289)\r\n\tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\r\n\tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:291)\r\n\tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:246)\r\n\tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)\r\n\tat org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\r\n\tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\r\n\tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\r\n\tat org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\r\n\tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\r\n\tat org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)\r\n\tat org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)\r\n\tat org.junit.runners.ParentRunner.run(ParentRunner.java:363)\r\n\tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)\r\n\tat org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecuter.runTestClass(JUnitTestClassExecuter.java:114)\r\n\tat org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecuter.execute(JUnitTestClassExecuter.java:57)\r\n\tat org.gradle.api.internal.tasks.testing.junit.JUnitTestClassProcessor.processTestClass(JUnitTestClassProcessor.java:66)\r\n\tat org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:51)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)\r\n\tat org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)\r\n\tat org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:32)\r\n\tat org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:93)\r\n\tat com.sun.proxy.$Proxy1.processTestClass(Unknown Source)\r\n\tat org.gradle.api.internal.tasks.testing.worker.TestWorker.processTestClass(TestWorker.java:109)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)\r\n\tat org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)\r\n\tat org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:146)\r\n\tat org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:128)\r\n\tat org.gradle.internal.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:404)\r\n\tat org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:63)\r\n\tat org.gradle.internal.concurrent.StoppableExecutorImpl$1.run(StoppableExecutorImpl.java:46)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\n\tat org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:55)\r\n\tat java.lang.Thread.run(Thread.java:745)\r\n    Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration$FlywayConfiguration&#39;: Bean instantiation via constructor failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration$FlywayConfiguration$$EnhancerBySpringCGLIB$$8cc0418d]: Constructor threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;dataSource&#39;: Invocation of init method failed; nested exception is java.lang.IllegalStateException: Failed to replace DataSource with an embedded database for tests. If you want an embedded database please put a supported one on the classpath or tune the replace attribute of @AutoConfigureTestDatabase.\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:282)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1267)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1124)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:535)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:495)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:317)\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:315)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:372)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1247)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1096)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:535)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:495)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:317)\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:315)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:304)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\r\n\tat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1089)\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:859)\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:550)\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:780)\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:412)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:333)\r\n\tat org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:139)\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99)\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)\r\n\t... 49 more\r\n    Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration$FlywayConfiguration$$EnhancerBySpringCGLIB$$8cc0418d]: Constructor threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;dataSource&#39;: Invocation of init method failed; nested exception is java.lang.IllegalStateException: Failed to replace DataSource with an embedded database for tests. If you want an embedded database please put a supported one on the classpath or tune the replace attribute of @AutoConfigureTestDatabase.\r\n\tat org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:182)\r\n\tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:117)\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:275)\r\n\t... 77 more\r\n    Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;dataSource&#39;: Invocation of init method failed; nested exception is java.lang.IllegalStateException: Failed to replace DataSource with an embedded database for tests. If you want an embedded database please put a supported one on the classpath or tune the replace attribute of @AutoConfigureTestDatabase.\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1699)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:573)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:495)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:317)\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:315)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\r\n\tat org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:251)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1135)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory$DependencyObjectProvider.getIfUnique(DefaultListableBeanFactory.java:1728)\r\n\tat org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration$FlywayConfiguration.&lt;init&gt;(FlywayAutoConfiguration.java:126)\r\n\tat org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration$FlywayConfiguration$$EnhancerBySpringCGLIB$$8cc0418d.&lt;init&gt;(&lt;generated&gt;)\r\n\tat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n\tat sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n\tat java.lang.reflect.Constructor.newInstance(Constructor.java:423)\r\n\tat org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:170)\r\n\t... 79 more\r\n    Caused by: java.lang.IllegalStateException: Failed to replace DataSource with an embedded database for tests. If you want an embedded database please put a supported one on the classpath or tune the replace attribute of @AutoConfigureTestDatabase.\r\n\tat org.springframework.util.Assert.state(Assert.java:73)\r\n\tat org.springframework.boot.test.autoconfigure.jdbc.TestDatabaseAutoConfiguration$EmbeddedDataSourceFactory.getEmbeddedDatabase(TestDatabaseAutoConfiguration.java:195)\r\n\tat org.springframework.boot.test.autoconfigure.jdbc.TestDatabaseAutoConfiguration$EmbeddedDataSourceFactoryBean.afterPropertiesSet(TestDatabaseAutoConfiguration.java:160)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1758)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1695)\r\n\t... 95 more\r\n\r\nPostgresJpaConfig.java\r\n\r\n    @Configuration\r\n    @EnableWebMvc\r\n    @ComponentScan(basePackages = {&quot;ch.company.stift.sola&quot;})\r\n    @PropertySource(&quot;classpath:application.properties&quot;)\r\n    public class PostgresJpaConfig {\r\n\r\n\t@Autowired\r\n\tprivate Environment env;\r\n\r\n\t@Bean\r\n\tpublic DataSource dataSource() {\r\n\t\tfinal DriverManagerDataSource dataSource = new DriverManagerDataSource();\r\n\t\tdataSource.setDriverClassName(env.getProperty(&quot;jdbc.driverClassName&quot;));\r\n\t\tdataSource.setUrl(env.getProperty(&quot;jdbc.url&quot;));\r\n\t\tdataSource.setUsername(env.getProperty(&quot;jdbc.user&quot;));\r\n\t\tdataSource.setPassword(env.getProperty(&quot;jdbc.pass&quot;));\r\n\r\n\t\treturn dataSource;\r\n\t}\r\n\r\n\t@Bean\r\n\tpublic LocalContainerEntityManagerFactoryBean entityManagerFactory() {\r\n\t\tfinal LocalContainerEntityManagerFactoryBean em = new LocalContainerEntityManagerFactoryBean();\r\n\t\tem.setDataSource(dataSource());\r\n\t\tem.setPackagesToScan(&quot;ch.company.stift.sola.entities&quot;);\r\n\t\tem.setJpaVendorAdapter(new HibernateJpaVendorAdapter());\r\n\t\tem.setJpaProperties(additionalProperties());\r\n\t\treturn em;\r\n\t}\r\n\r\n\t@Bean\r\n\tJpaTransactionManager transactionManager(final EntityManagerFactory entityManagerFactory) {\r\n\t\tfinal JpaTransactionManager transactionManager = new JpaTransactionManager();\r\n\t\ttransactionManager.setEntityManagerFactory(entityManagerFactory);\r\n\t\treturn transactionManager;\r\n\t}\r\n\r\n\tfinal Properties additionalProperties() {\r\n\t\tfinal Properties hibernateProperties = new Properties();\r\n\r\n\t\thibernateProperties.setProperty(&quot;hibernate.hbm2ddl.auto&quot;, env.getProperty(&quot;hibernate.hbm2ddl.auto&quot;));\r\n\t\thibernateProperties.setProperty(&quot;hibernate.dialect&quot;, env.getProperty(&quot;hibernate.dialect&quot;));\r\n\t\thibernateProperties.setProperty(&quot;hibernate.show_sql&quot;, env.getProperty(&quot;hibernate.show_sql&quot;));\r\n\r\n\t\treturn hibernateProperties;\r\n\t}\r\n\r\n    }\r\n\r\nMy test class ParticipantRepositoryIntegrationTest.java:\r\n\r\n    @RunWith(SpringRunner.class)\r\n    @DataJpaTest\r\n    public class ParticipantRepositoryIntegrationTest {\r\n\r\n\t@Autowired\r\n\tprivate TestEntityManager entityManager;\r\n\r\n\t@Autowired\r\n\tprivate ParticipantRepository participantRepository;\r\n\r\n\t@Test\r\n\tpublic void whenFindByName_thenReturnParticipant() {\r\n\t\t//given\r\n\t\tTsolaParticipantEntity participant = new TsolaParticipantEntity(1, &quot;foobar&quot;, &quot;bar&quot;, &quot;foo&quot;, &quot;f&quot;, new Date\r\n\t\t\t\t(2000 - 12 - 12), &quot;street 12&quot;, &quot;California&quot;, &quot;foo.bar@bla.com&quot;);\r\n\t\tentityManager.persist(participant);\r\n\t\tentityManager.flush();\r\n\r\n\t\t//when\r\n\t\tTsolaParticipantEntity found = participantRepository.findByName(participant.getForename());\r\n\r\n\t\t//then\r\n\t\tAssert.assertEquals(found.getForename(), participant.getForename());\r\n\t}\r\n\r\n    }\r\n\r\nAnd my application.properties:\r\n\r\n    ## Spring DATASOURCE (DataSourceAutoConfiguration &amp; DataSourceProperties)\r\n    spring.datasource.url=jdbc:postgresql://127.0.0.1:5432/postgres\r\n    spring.datasource.username=postgres\r\n    spring.datasource.password=postgres\r\n    spring.datasource.driver-class-name=org.postgresql.Driver\r\n    # The SQL dialect makes Hibernate generate better SQL for the chosen database\r\n    spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect\r\n    # Hibernate ddl auto (create, create-drop, validate, update)\r\n    spring.jpa.hibernate.ddl-auto=update\r\n    spring.flyway.baseline-on-migrate=true\r\n    logging.file=log/logfile.log\r\n    # Properties\r\n    jdbc.driverClassName=org.postgresql.Driver\r\n    jdbc.url=jdbc:postgresql://127.0.0.1:5432/postgres\r\n    jdbc.user=postgres\r\n    jdbc.pass=postgres\r\n    hibernate.dialect=org.hibernate.dialect.PostgreSQL82Dialect\r\n    hibernate.show_sql=true\r\n    hibernate.hbm2ddl.auto=create-drop\r\n\r\nJust in case, my build.gradle:\r\n\r\n    buildscript {\r\n    \text {\r\n    \t\tspringBootVersion = &#39;2.0.5.RELEASE&#39;\r\n    \t\trepositoryBaseUrl = &#39;somebaseurl&#39;\r\n    \t\tmavenRepositoryUrl = &#39;somerepo&#39;\r\n    \t}\r\n    \trepositories {\r\n    \t\tmaven {\r\n    \t\t\turl = mavenRepositoryUrl\r\n    \t\t}\r\n    \t}\r\n    \tdependencies {\r\n    \t\tclasspath &quot;org.springframework.boot:spring-boot-gradle-plugin:${springBootVersion}&quot;\r\n    \t\tclasspath &#39;com.h2database:h2:1.4.191&#39;\r\n    \t}\r\n    }\r\n\r\n    plugins {\r\n    \tid &quot;org.flywaydb.flyway&quot; version &quot;5.1.4&quot;\r\n    }\r\n\r\n    flyway {\r\n    \turl = &#39;jdbc:postgresql://127.0.0.1:5432/postgres&#39;\r\n    \tuser = &#39;postgres&#39;\r\n    \tpassword = &#39;postgres&#39;\r\n    }\r\n\r\n    flyway.locations = [&#39;db.migration&#39;, &#39;testdata&#39;]\r\n\r\n    apply plugin: &#39;java&#39;\r\n    apply plugin: &#39;org.springframework.boot&#39;\r\n    apply plugin: &#39;io.spring.dependency-management&#39;\r\n\r\n    group = &#39;ch.company.stift&#39;\r\n    version = &#39;0.0.1-SNAPSHOT&#39;\r\n\r\n    repositories {\r\n    \tmaven {\r\n    \t\turl = mavenRepositoryUrl\r\n    \t}\r\n    }\r\n\r\n    dependencies {\r\n    \tcompile(&#39;org.springframework.boot:spring-boot-starter-web&#39;)\r\n\r\n    \tcompile(&#39;org.flywaydb:flyway-core&#39;)\r\n\r\n    \t// https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-data-jpa\r\n    \tcompile group: &#39;org.springframework.boot&#39;, name: &#39;spring-boot-starter-data-jpa&#39;, version: &#39;2.0.5.RELEASE&#39;\r\n\r\n    \truntime(&#39;org.postgresql:postgresql&#39;)\r\n\r\n    \ttestCompile(&#39;org.springframework.boot:spring-boot-starter-test&#39;)\r\n\r\n    }","title":"Error creating bean with name &#39;dataSource&#39;: Invocation of init method failed","body":"<p>I'm very new to Spring Boot and was trying to do some tests. When I suddenly encounterd a problem I've been trying to solve for the past 3 hours...</p>\n\n<p>I believe the main concern here is this:</p>\n\n<blockquote>\n  <p>Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration$FlywayConfiguration': Bean instantiation via constructor failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration$FlywayConfiguration$$EnhancerBySpringCGLIB$$8cc0418d]: Constructor threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource': Invocation of init method failed; nested exception is java.lang.IllegalStateException: Failed to replace DataSource with an embedded database for tests. If you want an embedded database please put a supported one on the classpath or tune the replace attribute of @AutoConfigureTestDatabase</p>\n</blockquote>\n\n<p>But neither the less, here are my ErrorLogs:</p>\n\n<pre><code>java.lang.IllegalStateException: Failed to load ApplicationContext\nat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:125)\nat org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:108)\nat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:117)\nat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:83)\nat org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener.prepareTestInstance(SpringBootDependencyInjectionTestExecutionListener.java:44)\nat org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:246)\nat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:227)\nat org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:289)\nat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\nat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:291)\nat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:246)\nat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)\nat org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\nat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\nat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\nat org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\nat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\nat org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)\nat org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)\nat org.junit.runners.ParentRunner.run(ParentRunner.java:363)\nat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)\nat org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecuter.runTestClass(JUnitTestClassExecuter.java:114)\nat org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecuter.execute(JUnitTestClassExecuter.java:57)\nat org.gradle.api.internal.tasks.testing.junit.JUnitTestClassProcessor.processTestClass(JUnitTestClassProcessor.java:66)\nat org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:51)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.lang.reflect.Method.invoke(Method.java:498)\nat org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)\nat org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)\nat org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:32)\nat org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:93)\nat com.sun.proxy.$Proxy1.processTestClass(Unknown Source)\nat org.gradle.api.internal.tasks.testing.worker.TestWorker.processTestClass(TestWorker.java:109)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.lang.reflect.Method.invoke(Method.java:498)\nat org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)\nat org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)\nat org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:146)\nat org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:128)\nat org.gradle.internal.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:404)\nat org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:63)\nat org.gradle.internal.concurrent.StoppableExecutorImpl$1.run(StoppableExecutorImpl.java:46)\nat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\nat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\nat org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:55)\nat java.lang.Thread.run(Thread.java:745)\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration$FlywayConfiguration': Bean instantiation via constructor failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration$FlywayConfiguration$$EnhancerBySpringCGLIB$$8cc0418d]: Constructor threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource': Invocation of init method failed; nested exception is java.lang.IllegalStateException: Failed to replace DataSource with an embedded database for tests. If you want an embedded database please put a supported one on the classpath or tune the replace attribute of @AutoConfigureTestDatabase.\nat org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:282)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1267)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1124)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:535)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:495)\nat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:317)\nat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\nat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:315)\nat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\nat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:372)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1247)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1096)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:535)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:495)\nat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:317)\nat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\nat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:315)\nat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\nat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:304)\nat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\nat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1089)\nat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:859)\nat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:550)\nat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:780)\nat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:412)\nat org.springframework.boot.SpringApplication.run(SpringApplication.java:333)\nat org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:139)\nat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99)\nat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)\n... 49 more\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration$FlywayConfiguration$$EnhancerBySpringCGLIB$$8cc0418d]: Constructor threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource': Invocation of init method failed; nested exception is java.lang.IllegalStateException: Failed to replace DataSource with an embedded database for tests. If you want an embedded database please put a supported one on the classpath or tune the replace attribute of @AutoConfigureTestDatabase.\nat org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:182)\nat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:117)\nat org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:275)\n... 77 more\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource': Invocation of init method failed; nested exception is java.lang.IllegalStateException: Failed to replace DataSource with an embedded database for tests. If you want an embedded database please put a supported one on the classpath or tune the replace attribute of @AutoConfigureTestDatabase.\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1699)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:573)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:495)\nat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:317)\nat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\nat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:315)\nat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\nat org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:251)\nat org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1135)\nat org.springframework.beans.factory.support.DefaultListableBeanFactory$DependencyObjectProvider.getIfUnique(DefaultListableBeanFactory.java:1728)\nat org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration$FlywayConfiguration.&lt;init&gt;(FlywayAutoConfiguration.java:126)\nat org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration$FlywayConfiguration$$EnhancerBySpringCGLIB$$8cc0418d.&lt;init&gt;(&lt;generated&gt;)\nat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\nat sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\nat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\nat java.lang.reflect.Constructor.newInstance(Constructor.java:423)\nat org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:170)\n... 79 more\nCaused by: java.lang.IllegalStateException: Failed to replace DataSource with an embedded database for tests. If you want an embedded database please put a supported one on the classpath or tune the replace attribute of @AutoConfigureTestDatabase.\nat org.springframework.util.Assert.state(Assert.java:73)\nat org.springframework.boot.test.autoconfigure.jdbc.TestDatabaseAutoConfiguration$EmbeddedDataSourceFactory.getEmbeddedDatabase(TestDatabaseAutoConfiguration.java:195)\nat org.springframework.boot.test.autoconfigure.jdbc.TestDatabaseAutoConfiguration$EmbeddedDataSourceFactoryBean.afterPropertiesSet(TestDatabaseAutoConfiguration.java:160)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1758)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1695)\n... 95 more\n</code></pre>\n\n<p>PostgresJpaConfig.java</p>\n\n<pre><code>@Configuration\n@EnableWebMvc\n@ComponentScan(basePackages = {\"ch.company.stift.sola\"})\n@PropertySource(\"classpath:application.properties\")\npublic class PostgresJpaConfig {\n\n@Autowired\nprivate Environment env;\n\n@Bean\npublic DataSource dataSource() {\n    final DriverManagerDataSource dataSource = new DriverManagerDataSource();\n    dataSource.setDriverClassName(env.getProperty(\"jdbc.driverClassName\"));\n    dataSource.setUrl(env.getProperty(\"jdbc.url\"));\n    dataSource.setUsername(env.getProperty(\"jdbc.user\"));\n    dataSource.setPassword(env.getProperty(\"jdbc.pass\"));\n\n    return dataSource;\n}\n\n@Bean\npublic LocalContainerEntityManagerFactoryBean entityManagerFactory() {\n    final LocalContainerEntityManagerFactoryBean em = new LocalContainerEntityManagerFactoryBean();\n    em.setDataSource(dataSource());\n    em.setPackagesToScan(\"ch.company.stift.sola.entities\");\n    em.setJpaVendorAdapter(new HibernateJpaVendorAdapter());\n    em.setJpaProperties(additionalProperties());\n    return em;\n}\n\n@Bean\nJpaTransactionManager transactionManager(final EntityManagerFactory entityManagerFactory) {\n    final JpaTransactionManager transactionManager = new JpaTransactionManager();\n    transactionManager.setEntityManagerFactory(entityManagerFactory);\n    return transactionManager;\n}\n\nfinal Properties additionalProperties() {\n    final Properties hibernateProperties = new Properties();\n\n    hibernateProperties.setProperty(\"hibernate.hbm2ddl.auto\", env.getProperty(\"hibernate.hbm2ddl.auto\"));\n    hibernateProperties.setProperty(\"hibernate.dialect\", env.getProperty(\"hibernate.dialect\"));\n    hibernateProperties.setProperty(\"hibernate.show_sql\", env.getProperty(\"hibernate.show_sql\"));\n\n    return hibernateProperties;\n}\n\n}\n</code></pre>\n\n<p>My test class ParticipantRepositoryIntegrationTest.java:</p>\n\n<pre><code>@RunWith(SpringRunner.class)\n@DataJpaTest\npublic class ParticipantRepositoryIntegrationTest {\n\n@Autowired\nprivate TestEntityManager entityManager;\n\n@Autowired\nprivate ParticipantRepository participantRepository;\n\n@Test\npublic void whenFindByName_thenReturnParticipant() {\n    //given\n    TsolaParticipantEntity participant = new TsolaParticipantEntity(1, \"foobar\", \"bar\", \"foo\", \"f\", new Date\n            (2000 - 12 - 12), \"street 12\", \"California\", \"foo.bar@bla.com\");\n    entityManager.persist(participant);\n    entityManager.flush();\n\n    //when\n    TsolaParticipantEntity found = participantRepository.findByName(participant.getForename());\n\n    //then\n    Assert.assertEquals(found.getForename(), participant.getForename());\n}\n\n}\n</code></pre>\n\n<p>And my application.properties:</p>\n\n<pre><code>## Spring DATASOURCE (DataSourceAutoConfiguration &amp; DataSourceProperties)\nspring.datasource.url=jdbc:postgresql://127.0.0.1:5432/postgres\nspring.datasource.username=postgres\nspring.datasource.password=postgres\nspring.datasource.driver-class-name=org.postgresql.Driver\n# The SQL dialect makes Hibernate generate better SQL for the chosen database\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect\n# Hibernate ddl auto (create, create-drop, validate, update)\nspring.jpa.hibernate.ddl-auto=update\nspring.flyway.baseline-on-migrate=true\nlogging.file=log/logfile.log\n# Properties\njdbc.driverClassName=org.postgresql.Driver\njdbc.url=jdbc:postgresql://127.0.0.1:5432/postgres\njdbc.user=postgres\njdbc.pass=postgres\nhibernate.dialect=org.hibernate.dialect.PostgreSQL82Dialect\nhibernate.show_sql=true\nhibernate.hbm2ddl.auto=create-drop\n</code></pre>\n\n<p>Just in case, my build.gradle:</p>\n\n<pre><code>buildscript {\n    ext {\n        springBootVersion = '2.0.5.RELEASE'\n        repositoryBaseUrl = 'somebaseurl'\n        mavenRepositoryUrl = 'somerepo'\n    }\n    repositories {\n        maven {\n            url = mavenRepositoryUrl\n        }\n    }\n    dependencies {\n        classpath \"org.springframework.boot:spring-boot-gradle-plugin:${springBootVersion}\"\n        classpath 'com.h2database:h2:1.4.191'\n    }\n}\n\nplugins {\n    id \"org.flywaydb.flyway\" version \"5.1.4\"\n}\n\nflyway {\n    url = 'jdbc:postgresql://127.0.0.1:5432/postgres'\n    user = 'postgres'\n    password = 'postgres'\n}\n\nflyway.locations = ['db.migration', 'testdata']\n\napply plugin: 'java'\napply plugin: 'org.springframework.boot'\napply plugin: 'io.spring.dependency-management'\n\ngroup = 'ch.company.stift'\nversion = '0.0.1-SNAPSHOT'\n\nrepositories {\n    maven {\n        url = mavenRepositoryUrl\n    }\n}\n\ndependencies {\n    compile('org.springframework.boot:spring-boot-starter-web')\n\n    compile('org.flywaydb:flyway-core')\n\n    // https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-data-jpa\n    compile group: 'org.springframework.boot', name: 'spring-boot-starter-data-jpa', version: '2.0.5.RELEASE'\n\n    runtime('org.postgresql:postgresql')\n\n    testCompile('org.springframework.boot:spring-boot-starter-test')\n\n}\n</code></pre>\n"},{"tags":["java","log4j2","mdc"],"answers":[{"tags":[],"owner":{"account_id":1961768,"reputation":619,"user_id":1763113,"accept_rate":72,"display_name":"Mike"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1590608259,"creation_date":1590608259,"answer_id":62051473,"question_id":62047334,"body_markdown":"I used a routing appender with a js script.  The script grabs the variable into a variable and compares it to itself.  If the value is equal to its own replacer - it means it wasn&#39;t replaced.  In this case, I don&#39;t route to the appender that has that KeyValuePair - I route to another one that doesn&#39;t.","title":"log4j2.xml file has KeyValuePair set in MDC. If key is not set, how can we omit the value altogether from the log line?","body":"<p>I used a routing appender with a js script.  The script grabs the variable into a variable and compares it to itself.  If the value is equal to its own replacer - it means it wasn't replaced.  In this case, I don't route to the appender that has that KeyValuePair - I route to another one that doesn't.</p>\n"},{"tags":[],"owner":{"account_id":15400078,"reputation":36,"user_id":11134390,"display_name":"WindBlad3"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1689385448,"creation_date":1689385448,"answer_id":76691904,"question_id":62047334,"body_markdown":"In Java,\r\n\r\nYou can use &#39;:-&#39; for null value in log4j2.xml\r\n\r\nExample:\r\n\r\n    &lt;KeyValuePair key=&quot;traceId&quot; value=&quot;$${ctx:traceId:-}&quot;/&gt;\r\n\r\n","title":"log4j2.xml file has KeyValuePair set in MDC. If key is not set, how can we omit the value altogether from the log line?","body":"<p>In Java,</p>\n<p>You can use ':-' for null value in log4j2.xml</p>\n<p>Example:</p>\n<pre><code>&lt;KeyValuePair key=&quot;traceId&quot; value=&quot;$${ctx:traceId:-}&quot;/&gt;\n</code></pre>\n"}],"owner":{"account_id":1961768,"reputation":619,"user_id":1763113,"accept_rate":72,"display_name":"Mike"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":331,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76691904,"answer_count":2,"score":0,"last_activity_date":1689385448,"creation_date":1590594680,"question_id":62047334,"body_markdown":"If I have a KeyValuePair in my JsonLayout appender, and that pair is not set in the MDC, is there a way to exclude the value from the logs?","title":"log4j2.xml file has KeyValuePair set in MDC. If key is not set, how can we omit the value altogether from the log line?","body":"<p>If I have a KeyValuePair in my JsonLayout appender, and that pair is not set in the MDC, is there a way to exclude the value from the logs?</p>\n"},{"tags":["java","mysql","spring-boot","hibernate","jpa"],"comments":[{"owner":{"account_id":8194121,"reputation":140,"user_id":6167555,"display_name":"Arpit Asati"},"score":0,"creation_date":1656175643,"post_id":72755597,"comment_id":128509729,"body_markdown":"I assume that the Answer id must be associated with other rows in the Rating table.","body":"I assume that the Answer id must be associated with other rows in the Rating table."}],"answers":[{"tags":[],"owner":{"account_id":10929,"reputation":545362,"user_id":20860,"accept_rate":92,"display_name":"Bill Karwin"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689385426,"creation_date":1656176064,"answer_id":72755728,"question_id":72755597,"body_markdown":"There is no support in Hibernate for a SET NULL action.\r\n\r\nThe feature request was created in 2006, and it&#39;s still in an &quot;open&quot; state.\r\n\r\n* [@OnDelete -&gt; action = OnDeleteAction.SET_NULL (like in MySql 5)](https://hibernate.atlassian.net/browse/HHH-4410)\r\n\r\nA workaround is to create a `@PreRemove` method on the parent entity, to set the foreign keys in the child entity to NULL. I suppose if you add other child entities, you&#39;d have to modify your `@PreRemove` method. See example in this answer: \r\n\r\n* [Have JPA/Hibernate to replicate the &quot;ON DELETE SET NULL&quot; functionality](https://stackoverflow.com/a/10030873/20860)","title":"Use on delete set null for Foreign key","body":"<p>There is no support in Hibernate for a SET NULL action.</p>\n<p>The feature request was created in 2006, and it's still in an &quot;open&quot; state.</p>\n<ul>\n<li><a href=\"https://hibernate.atlassian.net/browse/HHH-4410\" rel=\"nofollow noreferrer\">@OnDelete -&gt; action = OnDeleteAction.SET_NULL (like in MySql 5)</a></li>\n</ul>\n<p>A workaround is to create a <code>@PreRemove</code> method on the parent entity, to set the foreign keys in the child entity to NULL. I suppose if you add other child entities, you'd have to modify your <code>@PreRemove</code> method. See example in this answer:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/a/10030873/20860\">Have JPA/Hibernate to replicate the &quot;ON DELETE SET NULL&quot; functionality</a></li>\n</ul>\n"}],"owner":{"account_id":25293220,"reputation":89,"user_id":19118842,"display_name":"IU Kottahchchi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1034,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1689385426,"creation_date":1656175054,"question_id":72755597,"body_markdown":"In this case answer_id is a foriegn key in ratings table and answer_id is primary key in answers table. I need to delete answers but **&quot;Cannot delete or update a parent row: a foreign key constraint fails.** error occurred. How to set ON DELETE SET NULL option for this Foreign key.\r\n```\r\n@Entity\r\n@Table(name = &quot;ratings&quot;)\r\npublic class Ratings {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long rating_id;\r\n\r\n    @Column(nullable = false, unique = false, length = 45)\r\n    private Short ratingValue;\r\n\r\n    @ManyToOne(cascade = fetch = FetchType.LAZY)\r\n    @JoinColumn(name = &quot;userId&quot;)\r\n    private User user;\r\n\r\n    @ManyToOne(cascade = fetch = FetchType.LAZY)\r\n    @JoinColumn(name = &quot;answer_id&quot;)\r\n    private Answer answer;\r\n\r\n    @ManyToOne(cascade = fetch = FetchType.LAZY)\r\n    @JoinColumn(name = &quot;question_id&quot;)\r\n    private Question question;\r\n//getters and setters\r\n\r\n```\r\n```\r\n@Entity\r\n@Table(name = &quot;answers&quot;)\r\npublic class Answer {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long answer_id;\r\n\r\n    @Column(nullable = false, unique = false, length = 100)\r\n    private String fullAnswer;\r\n\r\n    /*Many to one mapping question*/\r\n    @ManyToOne(cascade = FetchType.LAZY)\r\n    @JoinColumn(name = &quot;question_id&quot;)\r\n    private Question question;\r\n\r\n    /* Many to One mapping with users*/\r\n    @ManyToOne(cascade = FetchType.LAZY)\r\n    @JoinColumn(name = &quot;userId&quot;)\r\n    private User user;\r\n//getters and setters\r\n```","title":"Use on delete set null for Foreign key","body":"<p>In this case answer_id is a foriegn key in ratings table and answer_id is primary key in answers table. I need to delete answers but <strong>&quot;Cannot delete or update a parent row: a foreign key constraint fails.</strong> error occurred. How to set ON DELETE SET NULL option for this Foreign key.</p>\n<pre><code>@Entity\n@Table(name = &quot;ratings&quot;)\npublic class Ratings {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long rating_id;\n\n    @Column(nullable = false, unique = false, length = 45)\n    private Short ratingValue;\n\n    @ManyToOne(cascade = fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;userId&quot;)\n    private User user;\n\n    @ManyToOne(cascade = fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;answer_id&quot;)\n    private Answer answer;\n\n    @ManyToOne(cascade = fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;question_id&quot;)\n    private Question question;\n//getters and setters\n\n</code></pre>\n<pre><code>@Entity\n@Table(name = &quot;answers&quot;)\npublic class Answer {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long answer_id;\n\n    @Column(nullable = false, unique = false, length = 100)\n    private String fullAnswer;\n\n    /*Many to one mapping question*/\n    @ManyToOne(cascade = FetchType.LAZY)\n    @JoinColumn(name = &quot;question_id&quot;)\n    private Question question;\n\n    /* Many to One mapping with users*/\n    @ManyToOne(cascade = FetchType.LAZY)\n    @JoinColumn(name = &quot;userId&quot;)\n    private User user;\n//getters and setters\n</code></pre>\n"},{"tags":["java","unit-testing","instant"],"comments":[{"owner":{"account_id":36137,"reputation":178799,"user_id":102937,"accept_rate":90,"display_name":"Robert Harvey"},"score":0,"creation_date":1689381917,"post_id":76691722,"comment_id":135210316,"body_markdown":"Are you testing an actual requirement?  Does the stakeholder actually require this behavior in precisely this way? Your requirement may not be realistic if processing times or data transit times are a factor.","body":"Are you testing an actual requirement?  Does the stakeholder actually require this behavior in precisely this way? Your requirement may not be realistic if processing times or data transit times are a factor."},{"owner":{"account_id":25676050,"reputation":64,"user_id":19439460,"display_name":"nickklon"},"score":0,"creation_date":1689393245,"post_id":76691722,"comment_id":135210858,"body_markdown":"Looks like a difference of precision (micros vs nanos), not a difference of nanoseconds. Any chance the actual values are being passed through a database or otherwise that could truncate the timestamp differently (dependent on platform) before they are compared?","body":"Looks like a difference of precision (micros vs nanos), not a difference of nanoseconds. Any chance the actual values are being passed through a database or otherwise that could truncate the timestamp differently (dependent on platform) before they are compared?"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1689403355,"post_id":76691722,"comment_id":135211380,"body_markdown":"Instead of getting times using `Instant.now()` (or whatever), create a component which provides timestamps. Then you can mock this component in your unit tests to get deterministic behaviour.","body":"Instead of getting times using <code>Instant.now()</code> (or whatever), create a component which provides timestamps. Then you can mock this component in your unit tests to get deterministic behaviour."}],"answers":[{"comments":[{"owner":{"account_id":36137,"reputation":178799,"user_id":102937,"accept_rate":90,"display_name":"Robert Harvey"},"score":0,"creation_date":1689381920,"post_id":76691752,"comment_id":135210317,"body_markdown":"Even better: test for less than a certain interval.","body":"Even better: test for less than a certain interval."}],"tags":[],"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689381313,"creation_date":1689381012,"answer_id":76691752,"question_id":76691722,"body_markdown":"Check that the value is *near* rather than *equals*:\r\n\r\n    Assertions.assertTrue(Math.abs(expected.instant.until(actual.createdAt, MICROS)) &lt; 10)\r\n\r\nAdjust the units (NANOS for finer granularity, MILLIS for coarser granularity) and the amount that counts as &quot;near&quot;.\r\n\r\nA threshold of 10 MICROS would have passed the test with the values you posted, but I would relax the requirement as much as you can to avoid false negatives.\r\n\r\n","title":"nanoseconds difference for java.time.Instant testing","body":"<p>Check that the value is <em>near</em> rather than <em>equals</em>:</p>\n<pre><code>Assertions.assertTrue(Math.abs(expected.instant.until(actual.createdAt, MICROS)) &lt; 10)\n</code></pre>\n<p>Adjust the units (NANOS for finer granularity, MILLIS for coarser granularity) and the amount that counts as &quot;near&quot;.</p>\n<p>A threshold of 10 MICROS would have passed the test with the values you posted, but I would relax the requirement as much as you can to avoid false negatives.</p>\n"}],"owner":{"account_id":16773930,"reputation":1518,"user_id":12125755,"display_name":"NeverSleeps"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":132,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689381313,"creation_date":1689380106,"question_id":76691722,"body_markdown":"I have tests where I compare `java.time.Instant` dates. When I run these tests locally, everything works correctly. But remote build fails due to tests.\r\n\r\n```\r\norg.opentest4j.AssertionFailedError: expected: &lt;2023-07-14T23:54:08.606213692Z&gt; but was: &lt;2023-07-14T23:54:08.606214Z&gt;\r\n```\r\n\r\nThe difference is literally in nanoseconds. Based on the results of comparing other fields, I know for sure that there is no error in the business logic. But I don’t understand why this difference in milliseconds occurs precisely with a remote build and how can I ignore this difference in nanoseconds.\r\n\r\nMy code line for comparison dates:\r\n```\r\norg.junit.jupiter.api.Assertions.assertEquals(expected.instant, actual.createdAt)\r\n```","title":"nanoseconds difference for java.time.Instant testing","body":"<p>I have tests where I compare <code>java.time.Instant</code> dates. When I run these tests locally, everything works correctly. But remote build fails due to tests.</p>\n<pre><code>org.opentest4j.AssertionFailedError: expected: &lt;2023-07-14T23:54:08.606213692Z&gt; but was: &lt;2023-07-14T23:54:08.606214Z&gt;\n</code></pre>\n<p>The difference is literally in nanoseconds. Based on the results of comparing other fields, I know for sure that there is no error in the business logic. But I don’t understand why this difference in milliseconds occurs precisely with a remote build and how can I ignore this difference in nanoseconds.</p>\n<p>My code line for comparison dates:</p>\n<pre><code>org.junit.jupiter.api.Assertions.assertEquals(expected.instant, actual.createdAt)\n</code></pre>\n"},{"tags":["java","spring","spring-webflux","project-reactor","reactive"],"comments":[{"owner":{"account_id":2064278,"reputation":13138,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1674114548,"post_id":75165171,"comment_id":132646640,"body_markdown":"an exception is reactive is a `Terminal Event`","body":"an exception is reactive is a <code>Terminal Event</code>"}],"answers":[{"tags":[],"owner":{"account_id":12455565,"reputation":5317,"user_id":9068895,"display_name":"Alex"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1674085470,"creation_date":1674085470,"answer_id":75166398,"question_id":75165171,"body_markdown":"In your case `.onErrorResume(throwable -&gt; Flux.empty())` would just complete the flow without error signal but the original `Flux` will be canceled. \r\n\r\nYou have several options:\r\n\r\n**Handle error in place**\r\n\r\nHandle error on the `process` level. In this case error will be &quot;ignored&quot; and initial `Flux` will continue. Technically this is the same as wrapping `process` method in `try-catch` and ignore error in imperative programming.\r\n\r\n```\r\nFlux.interval(Duration.ofSeconds(30))\r\n    .doOnNext(i -&gt; log.info(&quot;Process has been started: {}&quot;, i))\r\n    .flatMap(i -&gt;\r\n            process(i)\r\n                    .doOnError(e -&gt; log.error(&quot;Error: {}&quot;, e.getMessage()))\r\n                    .onErrorResume(e -&gt; Mono.empty())\r\n    );\r\n```\r\n\r\n```\r\nProcess has been started: 0\r\nProcess has been started: 1\r\nProcess has been started: 2\r\nProcess has been started: 3\r\nError: oops 3\r\nProcess has been started: 4\r\nProcess has been started: 5\r\nProcess has been started: 6\r\nProcess has been started: 7\r\n```\r\n\r\n\r\n\r\n**Retry**\r\n\r\nYou can use `.retry()` operator at the end of the sequence to retry any error or use `.retryWhen` if you need more granular control.\r\n\r\n\r\n```\r\nFlux.interval(Duration.ofSeconds(30))\r\n        .doOnNext(i -&gt; log.info(&quot;Process has been started: {}&quot;, i))\r\n        .flatMap(i -&gt;\r\n                process(i)\r\n        )\r\n        .retry();\r\n```\r\n\r\nNote that in this case every error will trigger re-subscription to the `Flux.interval` and the sequence will start over.\r\n\r\n\r\n```\r\nProcess has been started: 0\r\nProcess has been started: 1\r\nProcess has been started: 2\r\nProcess has been started: 3\r\nError: oops 3\r\nProcess has been started: 0\r\nProcess has been started: 1\r\nProcess has been started: 2\r\nProcess has been started: 3\r\n```","title":"Flux interval stops execution when error occurs","body":"<p>In your case <code>.onErrorResume(throwable -&gt; Flux.empty())</code> would just complete the flow without error signal but the original <code>Flux</code> will be canceled.</p>\n<p>You have several options:</p>\n<p><strong>Handle error in place</strong></p>\n<p>Handle error on the <code>process</code> level. In this case error will be &quot;ignored&quot; and initial <code>Flux</code> will continue. Technically this is the same as wrapping <code>process</code> method in <code>try-catch</code> and ignore error in imperative programming.</p>\n<pre><code>Flux.interval(Duration.ofSeconds(30))\n    .doOnNext(i -&gt; log.info(&quot;Process has been started: {}&quot;, i))\n    .flatMap(i -&gt;\n            process(i)\n                    .doOnError(e -&gt; log.error(&quot;Error: {}&quot;, e.getMessage()))\n                    .onErrorResume(e -&gt; Mono.empty())\n    );\n</code></pre>\n<pre><code>Process has been started: 0\nProcess has been started: 1\nProcess has been started: 2\nProcess has been started: 3\nError: oops 3\nProcess has been started: 4\nProcess has been started: 5\nProcess has been started: 6\nProcess has been started: 7\n</code></pre>\n<p><strong>Retry</strong></p>\n<p>You can use <code>.retry()</code> operator at the end of the sequence to retry any error or use <code>.retryWhen</code> if you need more granular control.</p>\n<pre><code>Flux.interval(Duration.ofSeconds(30))\n        .doOnNext(i -&gt; log.info(&quot;Process has been started: {}&quot;, i))\n        .flatMap(i -&gt;\n                process(i)\n        )\n        .retry();\n</code></pre>\n<p>Note that in this case every error will trigger re-subscription to the <code>Flux.interval</code> and the sequence will start over.</p>\n<pre><code>Process has been started: 0\nProcess has been started: 1\nProcess has been started: 2\nProcess has been started: 3\nError: oops 3\nProcess has been started: 0\nProcess has been started: 1\nProcess has been started: 2\nProcess has been started: 3\n</code></pre>\n"}],"owner":{"account_id":15521882,"reputation":372,"user_id":11564329,"display_name":"Alexey"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1011,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689380147,"creation_date":1674075227,"question_id":75165171,"body_markdown":"I&#39;m using `Flux.interval` for running scheduled tasks\r\n```\r\n Flux\r\n        .interval(Duration.ofSeconds(30))\r\n        .doOnNext(duration -&gt; log.info(&quot;Process has been started&quot;))\r\n        .flatMap(duration -&gt; customService.process())\r\n        .onErrorResume(throwable -&gt; Flux.empty())\r\n        .subscribe();\r\n```\r\n\r\nThe thing here that if an exception occurs in any place, `onErrorResume` has been called, but scheduler stops working - it doesn&#39;t call `customService.process()` anymore\r\n\r\nI need this to continue calling method every 30 seconds even if there&#39;re any errors in any place. Can anybody help me with that?","title":"Flux interval stops execution when error occurs","body":"<p>I'm using <code>Flux.interval</code> for running scheduled tasks</p>\n<pre><code> Flux\n        .interval(Duration.ofSeconds(30))\n        .doOnNext(duration -&gt; log.info(&quot;Process has been started&quot;))\n        .flatMap(duration -&gt; customService.process())\n        .onErrorResume(throwable -&gt; Flux.empty())\n        .subscribe();\n</code></pre>\n<p>The thing here that if an exception occurs in any place, <code>onErrorResume</code> has been called, but scheduler stops working - it doesn't call <code>customService.process()</code> anymore</p>\n<p>I need this to continue calling method every 30 seconds even if there're any errors in any place. Can anybody help me with that?</p>\n"},{"tags":["java","jsp","tomcat"],"answers":[{"comments":[{"owner":{"account_id":124284,"reputation":2679,"user_id":319274,"accept_rate":45,"display_name":"Southsouth"},"score":1,"creation_date":1258825750,"post_id":1776161,"comment_id":1661789,"body_markdown":"the whole project is jsp based, I just need add functionality for PDF download","body":"the whole project is jsp based, I just need add functionality for PDF download"},{"owner":{"account_id":11089,"reputation":400050,"user_id":21234,"accept_rate":91,"display_name":"skaffman"},"score":4,"creation_date":1258825830,"post_id":1776161,"comment_id":1661797,"body_markdown":"Well you can&#39;t, not like this. JSPs are for text, not binary.","body":"Well you can&#39;t, not like this. JSPs are for text, not binary."},{"owner":{"account_id":52822,"reputation":1089035,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"score":4,"creation_date":1258826202,"post_id":1776161,"comment_id":1661819,"body_markdown":"+1. Raw java code belongs in java classes. Use taglibs/EL in JSP only. If not possible with taglibs/EL, use a servlet.","body":"+1. Raw java code belongs in java classes. Use taglibs/EL in JSP only. If not possible with taglibs/EL, use a servlet."},{"owner":{"account_id":27776,"reputation":14436,"user_id":73652,"accept_rate":88,"display_name":"Kris"},"score":3,"creation_date":1258840198,"post_id":1776161,"comment_id":1662536,"body_markdown":"northTiger, there is nothing stopping you from adding a Servlet even if the project is otherwise all JSPs. JSPs wind up as servlets anyway once the compiler is done with them. For working with PDFs, you are MUCH better off with a plain servlet.","body":"northTiger, there is nothing stopping you from adding a Servlet even if the project is otherwise all JSPs. JSPs wind up as servlets anyway once the compiler is done with them. For working with PDFs, you are MUCH better off with a plain servlet."},{"owner":{"account_id":124284,"reputation":2679,"user_id":319274,"accept_rate":45,"display_name":"Southsouth"},"score":3,"creation_date":1258845429,"post_id":1776161,"comment_id":1662761,"body_markdown":"yes, I agree with you guys using servlet. but servket needs more configurations.","body":"yes, I agree with you guys using servlet. but servket needs more configurations."}],"tags":[],"owner":{"account_id":11089,"reputation":400050,"user_id":21234,"accept_rate":91,"display_name":"skaffman"},"comment_count":5,"down_vote_count":0,"up_vote_count":40,"is_accepted":false,"score":40,"last_activity_date":1258825894,"creation_date":1258825419,"answer_id":1776161,"question_id":1776142,"body_markdown":"The issue here is that your JSP is talking directly to the response `OutputStream`. This technically isn&#39;t forbidden, but it&#39;s very much not a good idea.\r\n\r\nSpecifically, you call `response.getOutputStream()` and write data to that. Later, when the JSP engine tries to flush the response, it fails because your code has already &quot;claimed&quot; the response. An application can either call `getOutputStream` or `getWriter` on any given response, it&#39;s not allowed to do both. JSP engines use `getWriter`, and so you cannot call `getOutputStream`.\r\n\r\nYou should be writing this code as a Servlet, not a JSP. JSPs are only really suitable for textual output as contained in the JSP. You can see that there&#39;s no actual text output in your JSP, it only contains java. ","title":"getOutputStream() has already been called for this response","body":"<p>The issue here is that your JSP is talking directly to the response <code>OutputStream</code>. This technically isn't forbidden, but it's very much not a good idea.</p>\n\n<p>Specifically, you call <code>response.getOutputStream()</code> and write data to that. Later, when the JSP engine tries to flush the response, it fails because your code has already \"claimed\" the response. An application can either call <code>getOutputStream</code> or <code>getWriter</code> on any given response, it's not allowed to do both. JSP engines use <code>getWriter</code>, and so you cannot call <code>getOutputStream</code>.</p>\n\n<p>You should be writing this code as a Servlet, not a JSP. JSPs are only really suitable for textual output as contained in the JSP. You can see that there's no actual text output in your JSP, it only contains java. </p>\n"},{"tags":[],"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"comment_count":0,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1258826246,"creation_date":1258826246,"answer_id":1776212,"question_id":1776142,"body_markdown":"JSP is s presentation framework, and is generally not supposed to contain any program logic in it. As skaffman suggested, use pure servlets, or any MVC web framework in order to achieve what you want.","title":"getOutputStream() has already been called for this response","body":"<p>JSP is s presentation framework, and is generally not supposed to contain any program logic in it. As skaffman suggested, use pure servlets, or any MVC web framework in order to achieve what you want.</p>\n"},{"comments":[{"owner":{"account_id":11089,"reputation":400050,"user_id":21234,"accept_rate":91,"display_name":"skaffman"},"score":3,"creation_date":1258827601,"post_id":1776268,"comment_id":1661893,"body_markdown":"Have you verified that this works? I doubt it&#39;ll make any difference, the container is still going to call `getWriter`, regardless of the page content.","body":"Have you verified that this works? I doubt it&#39;ll make any difference, the container is still going to call <code>getWriter</code>, regardless of the page content."},{"owner":{"account_id":52822,"reputation":1089035,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"score":0,"creation_date":1258829254,"post_id":1776268,"comment_id":1661978,"body_markdown":"No it doesn&#39;t if there&#39;s absolutely no whitespace outside `&lt;% %&gt;`. This may however be implementation-specific behaviour which I wouldn&#39;t rely on after all. As far as I know it would work fine in Tomcat. But again, java code belongs in java classes, not in jsp files. Period.","body":"No it doesn&#39;t if there&#39;s absolutely no whitespace outside <code>&lt;% %&gt;</code>. This may however be implementation-specific behaviour which I wouldn&#39;t rely on after all. As far as I know it would work fine in Tomcat. But again, java code belongs in java classes, not in jsp files. Period."},{"owner":{"account_id":12685,"reputation":35096,"user_id":25122,"accept_rate":75,"display_name":"RealHowTo"},"score":0,"creation_date":1258837671,"post_id":1776268,"comment_id":1662404,"body_markdown":"I forgot to mention that the trimDirectiveWhitespaces directive is for JSP 2.1 or better","body":"I forgot to mention that the trimDirectiveWhitespaces directive is for JSP 2.1 or better"},{"owner":{"account_id":11089,"reputation":400050,"user_id":21234,"accept_rate":91,"display_name":"skaffman"},"score":0,"creation_date":1258840408,"post_id":1776268,"comment_id":1662550,"body_markdown":"@BalusC: There was no whitespace outside `&lt;% %&gt;` in the original example, but that didn&#39;t make a difference.","body":"@BalusC: There was no whitespace outside <code>&lt;% %&gt;</code> in the original example, but that didn&#39;t make a difference."},{"owner":{"account_id":1944505,"reputation":5221,"user_id":1749956,"accept_rate":84,"display_name":"zmanc"},"score":2,"creation_date":1353439893,"post_id":1776268,"comment_id":18443835,"body_markdown":"This did not fix the error for me but did fix my plethora of white space.","body":"This did not fix the error for me but did fix my plethora of white space."},{"owner":{"account_id":2413662,"reputation":101,"user_id":2108223,"display_name":"Rohit V"},"score":0,"creation_date":1417492664,"post_id":1776268,"comment_id":42959548,"body_markdown":"The &#39;flush()&#39; worked for me. had to place this call right after data has been written to &#39;response&#39; or equivalent &#39;OutputStream&#39;.","body":"The &#39;flush()&#39; worked for me. had to place this call right after data has been written to &#39;response&#39; or equivalent &#39;OutputStream&#39;."},{"owner":{"account_id":15681680,"reputation":142,"user_id":11315439,"display_name":"PriyaS"},"score":0,"creation_date":1616747624,"post_id":1776268,"comment_id":118104731,"body_markdown":"Adding return and creating Content-Length saved my Day. Thanks.","body":"Adding return and creating Content-Length saved my Day. Thanks."}],"tags":[],"owner":{"account_id":12685,"reputation":35096,"user_id":25122,"accept_rate":75,"display_name":"RealHowTo"},"comment_count":7,"down_vote_count":1,"up_vote_count":60,"is_accepted":true,"score":59,"last_activity_date":1324562801,"creation_date":1258827415,"answer_id":1776268,"question_id":1776142,"body_markdown":"Ok, you should be using a **servlet** not a JSP but if you really need to...  add this directive at the top of your page:\r\n\r\n    &lt;%@ page trimDirectiveWhitespaces=&quot;true&quot; %&gt;\r\n\r\nOr in the jsp-config section your web.xml\r\n\r\n    &lt;jsp-config&gt;\r\n      &lt;jsp-property-group&gt;\r\n        &lt;url-pattern&gt;*.jsp&lt;/url-pattern&gt;\r\n        &lt;trim-directive-whitespaces&gt;true&lt;/trim-directive-whitespaces&gt;\r\n      &lt;/jsp-property-group&gt;\r\n    &lt;/jsp-config&gt;\r\n\r\n\r\nAlso `flush`/`close` the `OutputStream` and return when done.\r\n\r\n    dataOutput.flush();\r\n    dataOutput.close();\r\n    return;","title":"getOutputStream() has already been called for this response","body":"<p>Ok, you should be using a <strong>servlet</strong> not a JSP but if you really need to...  add this directive at the top of your page:</p>\n\n<pre><code>&lt;%@ page trimDirectiveWhitespaces=\"true\" %&gt;\n</code></pre>\n\n<p>Or in the jsp-config section your web.xml</p>\n\n<pre><code>&lt;jsp-config&gt;\n  &lt;jsp-property-group&gt;\n    &lt;url-pattern&gt;*.jsp&lt;/url-pattern&gt;\n    &lt;trim-directive-whitespaces&gt;true&lt;/trim-directive-whitespaces&gt;\n  &lt;/jsp-property-group&gt;\n&lt;/jsp-config&gt;\n</code></pre>\n\n<p>Also <code>flush</code>/<code>close</code> the <code>OutputStream</code> and return when done.</p>\n\n<pre><code>dataOutput.flush();\ndataOutput.close();\nreturn;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1380078,"reputation":31,"user_id":1313285,"display_name":"Igor"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1432133694,"creation_date":1333554491,"answer_id":10014673,"question_id":1776142,"body_markdown":"Here is what worked for me in similar case.\r\n\r\nAfter you finish writing into the `Servlet` `OutputStream` just call `response.sendRedirect(&quot;yourPage.jsp&quot;);`. That would cause initiation of a new request from the browser, therefore avoid writing into the same output stream.","title":"getOutputStream() has already been called for this response","body":"<p>Here is what worked for me in similar case.</p>\n\n<p>After you finish writing into the <code>Servlet</code> <code>OutputStream</code> just call <code>response.sendRedirect(\"yourPage.jsp\");</code>. That would cause initiation of a new request from the browser, therefore avoid writing into the same output stream.</p>\n"},{"tags":[],"owner":{"account_id":303378,"reputation":1767,"user_id":612278,"accept_rate":40,"display_name":"pnairn"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1347002602,"creation_date":1347002602,"answer_id":12313580,"question_id":1776142,"body_markdown":"Add the following inside the end of the try/catch to avoid the error that appears when the JSP engine flushes the response via getWriter()\r\n\r\n    out.clear(); // where out is a JspWriter\r\n    out = pageContext.pushBody();\r\n\r\nAs has been noted, this isn&#39;t best practice, but it avoids the errors in your logs.","title":"getOutputStream() has already been called for this response","body":"<p>Add the following inside the end of the try/catch to avoid the error that appears when the JSP engine flushes the response via getWriter()</p>\n\n<pre><code>out.clear(); // where out is a JspWriter\nout = pageContext.pushBody();\n</code></pre>\n\n<p>As has been noted, this isn't best practice, but it avoids the errors in your logs.</p>\n"},{"tags":[],"owner":{"account_id":2821673,"reputation":1,"user_id":2425302,"display_name":"Wandile Nxumalo"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1373360635,"creation_date":1373360635,"answer_id":17544138,"question_id":1776142,"body_markdown":"This error was occuring in my program because the resultset was calling more columns to be displayed in the PDF Document than the database contained. For example, the table contains 30 fields but the program was calling 35 (resultset.getString(35))","title":"getOutputStream() has already been called for this response","body":"<p>This error was occuring in my program because the resultset was calling more columns to be displayed in the PDF Document than the database contained. For example, the table contains 30 fields but the program was calling 35 (resultset.getString(35))</p>\n"},{"comments":[{"owner":{"account_id":10590948,"reputation":555,"user_id":7801546,"accept_rate":58,"display_name":"Durga"},"score":0,"creation_date":1540555859,"post_id":24311816,"comment_id":92920341,"body_markdown":"No with return type void also getting same problem","body":"No with return type void also getting same problem"}],"tags":[],"owner":{"account_id":1781418,"reputation":1399,"user_id":1624052,"accept_rate":92,"display_name":"Dan Torrey"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1403195596,"creation_date":1403195596,"answer_id":24311816,"question_id":1776142,"body_markdown":"I just experienced this problem. \r\n\r\nThe problem was caused by my controller method attempting return type of **String (view name)** when it exits. When the method would exit, a second response stream would be initiated. \r\n\r\nChanging the controller method return type to **void** resolved the problem.\r\n\r\nI hope this helps if anyone else experiences this problem.","title":"getOutputStream() has already been called for this response","body":"<p>I just experienced this problem. </p>\n\n<p>The problem was caused by my controller method attempting return type of <strong>String (view name)</strong> when it exits. When the method would exit, a second response stream would be initiated. </p>\n\n<p>Changing the controller method return type to <strong>void</strong> resolved the problem.</p>\n\n<p>I hope this helps if anyone else experiences this problem.</p>\n"},{"comments":[{"owner":{"account_id":62599,"reputation":3114,"user_id":185881,"accept_rate":71,"display_name":"ern0"},"score":0,"creation_date":1426673233,"post_id":25532354,"comment_id":46465201,"body_markdown":"JSP wants to open it for printing HTML stuff, so it opens after your last %&gt;","body":"JSP wants to open it for printing HTML stuff, so it opens after your last %&gt;"}],"tags":[],"owner":{"account_id":1928879,"reputation":363,"user_id":1738727,"accept_rate":89,"display_name":"michaelp"},"comment_count":1,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1409156748,"creation_date":1409156748,"answer_id":25532354,"question_id":1776142,"body_markdown":"I had this problem only the second time I went to export. Once I added:\r\n\r\n    response.getOutputStream().flush();\r\n    response.getOutputStream().close();\r\n\r\nafter the export was done, my code started working all of the time. ","title":"getOutputStream() has already been called for this response","body":"<p>I had this problem only the second time I went to export. Once I added:</p>\n\n<pre><code>response.getOutputStream().flush();\nresponse.getOutputStream().close();\n</code></pre>\n\n<p>after the export was done, my code started working all of the time. </p>\n"},{"tags":[],"owner":{"account_id":954960,"reputation":13272,"user_id":980442,"accept_rate":25,"display_name":"Daniel De Le&#243;n"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1484872291,"creation_date":1484872291,"answer_id":41754160,"question_id":1776142,"body_markdown":"I got the same error by using `response.getWriter()` before a `request.getRequestDispatcher(path).forward(request, response);`. So start works fine when I replace it by `response.getOutputStream()`","title":"getOutputStream() has already been called for this response","body":"<p>I got the same error by using <code>response.getWriter()</code> before a <code>request.getRequestDispatcher(path).forward(request, response);</code>. So start works fine when I replace it by <code>response.getOutputStream()</code></p>\n"},{"comments":[{"owner":{"account_id":1535561,"reputation":7664,"user_id":1431720,"accept_rate":89,"display_name":"Robert"},"score":0,"creation_date":1512772691,"post_id":44271980,"comment_id":82407021,"body_markdown":"Do you have a bug report link for this?","body":"Do you have a bug report link for this?"}],"tags":[],"owner":{"account_id":11011465,"reputation":1,"user_id":8088681,"display_name":"Max"},"comment_count":1,"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1652749681,"creation_date":1496178807,"answer_id":44271980,"question_id":1776142,"body_markdown":"Use Glassfish 4.0 instead. This turns out to be a problem only in Glassfish 4.1.1 release. ","title":"getOutputStream() has already been called for this response","body":"<p>Use Glassfish 4.0 instead. This turns out to be a problem only in Glassfish 4.1.1 release.</p>\n"},{"tags":[],"owner":{"account_id":9436360,"reputation":1,"user_id":7018241,"display_name":"Aman Kumar"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1514380441,"creation_date":1514378867,"answer_id":47992487,"question_id":1776142,"body_markdown":"In some cases this case occurs when you declare                             \r\n    \r\n    Writer out=response.getWriter   \r\n\r\nafter declaring or using `RequestDispatcher`. \r\n\r\nI encountered this similar problem while creating a simple `LoginServlet`, where I have defined `Writer` after declaring `RequestDispatcher`.\r\n\r\nTry defining `Writer` class object before `RequestDispatcher` class.","title":"getOutputStream() has already been called for this response","body":"<p>In some cases this case occurs when you declare                             </p>\n\n<pre><code>Writer out=response.getWriter   \n</code></pre>\n\n<p>after declaring or using <code>RequestDispatcher</code>. </p>\n\n<p>I encountered this similar problem while creating a simple <code>LoginServlet</code>, where I have defined <code>Writer</code> after declaring <code>RequestDispatcher</code>.</p>\n\n<p>Try defining <code>Writer</code> class object before <code>RequestDispatcher</code> class.</p>\n"},{"tags":[],"owner":{"account_id":4611183,"reputation":2099,"user_id":3739258,"display_name":"diego matos - keke"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1551717474,"creation_date":1551717474,"answer_id":54987667,"question_id":1776142,"body_markdown":"I got the same problem, and I solved just adding &quot;return;&quot;  at the end of the FileInputStream.\r\n\r\nHere is my JSP\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    &lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=ISO-8859-1&quot;\r\n    \tpageEncoding=&quot;ISO-8859-1&quot;%&gt;\r\n    &lt;%@ page import=&quot;java.io.*&quot;%&gt;\r\n    &lt;%@ page trimDirectiveWhitespaces=&quot;true&quot;%&gt;\r\n\r\n    &lt;%\r\n\r\n    \ttry {\r\n    \t\tFileInputStream ficheroInput = new FileInputStream(&quot;C:\\\\export_x_web.pdf&quot;);\r\n    \t\tint tamanoInput = ficheroInput.available();\r\n    \t\tbyte[] datosPDF = new byte[tamanoInput];\r\n    \t\tficheroInput.read(datosPDF, 0, tamanoInput);\r\n\r\n    \t\tresponse.setHeader(&quot;Content-disposition&quot;, &quot;inline; filename=export_sise_web.pdf&quot;);\r\n    \t\tresponse.setContentType(&quot;application/pdf&quot;);\r\n    \t\tresponse.setContentLength(tamanoInput);\r\n    \t\tresponse.getOutputStream().write(datosPDF);\r\n\r\n    \t\tresponse.getOutputStream().flush();\r\n    \t\tresponse.getOutputStream().close();\r\n\r\n    \t\tficheroInput.close();\r\n    \t\treturn;\r\n\r\n    \t} catch (Exception e) {\r\n\r\n    \t}\r\n    %&gt;\r\n\r\n    &lt;/body&gt;\r\n    &lt;/html&gt;\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"getOutputStream() has already been called for this response","body":"<p>I got the same problem, and I solved just adding \"return;\"  at the end of the FileInputStream.</p>\n\n<p>Here is my JSP</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;%@ page language=\"java\" contentType=\"text/html; charset=ISO-8859-1\"\r\n\tpageEncoding=\"ISO-8859-1\"%&gt;\r\n&lt;%@ page import=\"java.io.*\"%&gt;\r\n&lt;%@ page trimDirectiveWhitespaces=\"true\"%&gt;\r\n\r\n&lt;%\r\n\r\n\ttry {\r\n\t\tFileInputStream ficheroInput = new FileInputStream(\"C:\\\\export_x_web.pdf\");\r\n\t\tint tamanoInput = ficheroInput.available();\r\n\t\tbyte[] datosPDF = new byte[tamanoInput];\r\n\t\tficheroInput.read(datosPDF, 0, tamanoInput);\r\n\r\n\t\tresponse.setHeader(\"Content-disposition\", \"inline; filename=export_sise_web.pdf\");\r\n\t\tresponse.setContentType(\"application/pdf\");\r\n\t\tresponse.setContentLength(tamanoInput);\r\n\t\tresponse.getOutputStream().write(datosPDF);\r\n\r\n\t\tresponse.getOutputStream().flush();\r\n\t\tresponse.getOutputStream().close();\r\n\r\n\t\tficheroInput.close();\r\n\t\treturn;\r\n\r\n\t} catch (Exception e) {\r\n\r\n\t}\r\n%&gt;\r\n\r\n&lt;/body&gt;\r\n&lt;/html&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"},{"tags":[],"owner":{"account_id":13002350,"reputation":118,"user_id":9398040,"display_name":"Veli-Matti Sorvala"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1579789910,"creation_date":1579789910,"answer_id":59880895,"question_id":1776142,"body_markdown":"I didn&#39;t use JSP but I had similar error when I was setting response to return JSON object by calling  PrintWriter&#39;s flush() method or return statement. Previous answer i.e wrapping return-statement into a try-block worked kind of: the error disappeared because return-statement makes method to ignore all code below try-catch, specifically in my case, line redirectStrategy.sendRedirect(request, response, destination_addr_string) which seem to modify the already committed response that causes the error. The simpler solution in my case was just to remove the line and let client app to take care of the redirection.","title":"getOutputStream() has already been called for this response","body":"<p>I didn't use JSP but I had similar error when I was setting response to return JSON object by calling  PrintWriter's flush() method or return statement. Previous answer i.e wrapping return-statement into a try-block worked kind of: the error disappeared because return-statement makes method to ignore all code below try-catch, specifically in my case, line redirectStrategy.sendRedirect(request, response, destination_addr_string) which seem to modify the already committed response that causes the error. The simpler solution in my case was just to remove the line and let client app to take care of the redirection.</p>\n"},{"tags":[],"owner":{"account_id":17737955,"reputation":1051,"user_id":12878982,"display_name":"CodingBee"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1617651291,"creation_date":1617651291,"answer_id":66958774,"question_id":1776142,"body_markdown":"I faced the same issue, this issue occurs because Java gives an error if you use multiple writer/output stream using getWriter()/getOutputStream().\r\n\r\nFor me the issue was I was using @Logging and @RestLogging, avoid using extra annotation while calling the API.\r\n","title":"getOutputStream() has already been called for this response","body":"<p>I faced the same issue, this issue occurs because Java gives an error if you use multiple writer/output stream using getWriter()/getOutputStream().</p>\n<p>For me the issue was I was using @Logging and @RestLogging, avoid using extra annotation while calling the API.</p>\n"},{"tags":[],"owner":{"account_id":21200437,"reputation":9,"user_id":15591205,"display_name":"Sherin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649603113,"creation_date":1649603113,"answer_id":71817830,"question_id":1776142,"body_markdown":"In my case I am using the ***out*** object for printing the code It shows the error like *getOutputStream() has already called for the response*.\r\nFor resolving this error, I am initializing another PrintWriter object ***out1*** and use that for printing the code That&#39;s working perfectly.\r\n**Eg.\r\nBefore:\r\nout.println(&quot;Error&quot;);\r\nAfter:\r\nPrintWriter out1 = response.getWriter();\r\nout1.println(&quot;Success&quot;);**","title":"getOutputStream() has already been called for this response","body":"<p>In my case I am using the <em><strong>out</strong></em> object for printing the code It shows the error like <em>getOutputStream() has already called for the response</em>.\nFor resolving this error, I am initializing another PrintWriter object <em><strong>out1</strong></em> and use that for printing the code That's working perfectly.\n<strong>Eg.\nBefore:\nout.println(&quot;Error&quot;);\nAfter:\nPrintWriter out1 = response.getWriter();\nout1.println(&quot;Success&quot;);</strong></p>\n"},{"tags":[],"owner":{"account_id":3959103,"reputation":65,"user_id":3266700,"display_name":"Abhishek Madhusudhan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689379224,"creation_date":1689379224,"answer_id":76691683,"question_id":1776142,"body_markdown":"In my case I used to get ServletOutputStreamException() UTC010029 Stream is closed issue on Jboss 7.4.0. It got cleared when I called os.flush() i.e os = response.getOutputStream() before I write to the outputstream [response is an object of HttpServletOutputStream]. Some of the comments here were a life saver. +1 guys. ","title":"getOutputStream() has already been called for this response","body":"<p>In my case I used to get ServletOutputStreamException() UTC010029 Stream is closed issue on Jboss 7.4.0. It got cleared when I called os.flush() i.e os = response.getOutputStream() before I write to the outputstream [response is an object of HttpServletOutputStream]. Some of the comments here were a life saver. +1 guys.</p>\n"}],"owner":{"account_id":124284,"reputation":2679,"user_id":319274,"accept_rate":45,"display_name":"Southsouth"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":254850,"favorite_count":0,"down_vote_count":0,"up_vote_count":67,"accepted_answer_id":1776268,"answer_count":16,"score":67,"last_activity_date":1689379224,"creation_date":1258825078,"question_id":1776142,"body_markdown":"I google the error message `getOutputStream() has already been called for this response`\r\nand many people said it is because of the space or newline after `&lt;%` or `%&gt;`, but in my code , there is no a space or a newline. I am using tomcat6 on linux.\r\n\r\n    &lt;%@\r\n        page import=&quot;java.servlet.*,\r\n        javax.servlet.http.*,\r\n        java.io.*,\r\n        java.util.*,\r\n        com.lowagie.text.pdf.*,\r\n        com.lowagie.text.*&quot;\r\n        %&gt;&lt;%\r\n        response.setContentType(&quot;application/pdf&quot;);\r\n        Document document = new Document();\r\n        try{\r\n            ByteArrayOutputStream buffer = new ByteArrayOutputStream();\r\n            PdfWriter.getInstance(document, buffer);\r\n            document.open();\r\n            PdfPTable table = new PdfPTable(2);\r\n            table.addCell(&quot;1&quot;);\r\n            table.addCell(&quot;2&quot;);\r\n            table.addCell(&quot;3&quot;);\r\n            table.addCell(&quot;4&quot;);\r\n            table.addCell(&quot;5&quot;);\r\n            table.addCell(&quot;6&quot;);\r\n            document.add(table);\r\n            document.close();\r\n            DataOutput dataOutput = new DataOutputStream(response.getOutputStream());\r\n            byte[] bytes = buffer.toByteArray();\r\n            response.setContentLength(bytes.length);\r\n            for(int i = 0; i &lt; bytes.length; i++)\r\n            {\r\n            dataOutput.writeByte(bytes[i]);\r\n            }\r\n        }catch(DocumentException e){\r\n            e.printStackTrace();\r\n        }\r\n\r\n    %&gt;\r\n\r\n~\r\n\r\n\r\n\r\n\r\n    org.apache.jasper.JasperException: java.lang.IllegalStateException: getOutputStream() has already been called for this response\r\n    \torg.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:522)\r\n    \torg.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:410)\r\n    \torg.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:342)\r\n    \torg.apache.jasper.servlet.JspServlet.service(JspServlet.java:267)\r\n    \tjavax.servlet.http.HttpServlet.service(HttpServlet.java:717)\r\n\r\nroot cause \r\n\r\n    java.lang.IllegalStateException: getOutputStream() has already been called for this response\r\n    \torg.apache.catalina.connector.Response.getWriter(Response.java:610)\r\n    \torg.apache.catalina.connector.ResponseFacade.getWriter(ResponseFacade.java:198)\r\n    \torg.apache.jasper.runtime.JspWriterImpl.initOut(JspWriterImpl.java:125)\r\n    \torg.apache.jasper.runtime.JspWriterImpl.flushBuffer(JspWriterImpl.java:118)\r\n    \torg.apache.jasper.runtime.PageContextImpl.release(PageContextImpl.java:188)\r\n    \torg.apache.jasper.runtime.JspFactoryImpl.internalReleasePageContext(JspFactoryImpl.java:118)\r\n    \torg.apache.jasper.runtime.JspFactoryImpl.releasePageContext(JspFactoryImpl.java:77)\r\n    \torg.apache.jsp.Account.Domain.testPDF_jsp._jspService(testPDF_jsp.java:94)\r\n    \torg.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)\r\n    \tjavax.servlet.http.HttpServlet.service(HttpServlet.java:717)\r\n    \torg.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:374)\r\n    \torg.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:342)\r\n    \torg.apache.jasper.servlet.JspServlet.service(JspServlet.java:267)\r\n    \tjavax.servlet.http.HttpServlet.service(HttpServlet.java:717)\r\n\r\n\r\n\r\n","title":"getOutputStream() has already been called for this response","body":"<p>I google the error message <code>getOutputStream() has already been called for this response</code>\nand many people said it is because of the space or newline after <code>&lt;%</code> or <code>%&gt;</code>, but in my code , there is no a space or a newline. I am using tomcat6 on linux.</p>\n\n<pre><code>&lt;%@\n    page import=\"java.servlet.*,\n    javax.servlet.http.*,\n    java.io.*,\n    java.util.*,\n    com.lowagie.text.pdf.*,\n    com.lowagie.text.*\"\n    %&gt;&lt;%\n    response.setContentType(\"application/pdf\");\n    Document document = new Document();\n    try{\n        ByteArrayOutputStream buffer = new ByteArrayOutputStream();\n        PdfWriter.getInstance(document, buffer);\n        document.open();\n        PdfPTable table = new PdfPTable(2);\n        table.addCell(\"1\");\n        table.addCell(\"2\");\n        table.addCell(\"3\");\n        table.addCell(\"4\");\n        table.addCell(\"5\");\n        table.addCell(\"6\");\n        document.add(table);\n        document.close();\n        DataOutput dataOutput = new DataOutputStream(response.getOutputStream());\n        byte[] bytes = buffer.toByteArray();\n        response.setContentLength(bytes.length);\n        for(int i = 0; i &lt; bytes.length; i++)\n        {\n        dataOutput.writeByte(bytes[i]);\n        }\n    }catch(DocumentException e){\n        e.printStackTrace();\n    }\n\n%&gt;\n</code></pre>\n\n<p>~</p>\n\n<pre><code>org.apache.jasper.JasperException: java.lang.IllegalStateException: getOutputStream() has already been called for this response\n    org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:522)\n    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:410)\n    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:342)\n    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:267)\n    javax.servlet.http.HttpServlet.service(HttpServlet.java:717)\n</code></pre>\n\n<p>root cause </p>\n\n<pre><code>java.lang.IllegalStateException: getOutputStream() has already been called for this response\n    org.apache.catalina.connector.Response.getWriter(Response.java:610)\n    org.apache.catalina.connector.ResponseFacade.getWriter(ResponseFacade.java:198)\n    org.apache.jasper.runtime.JspWriterImpl.initOut(JspWriterImpl.java:125)\n    org.apache.jasper.runtime.JspWriterImpl.flushBuffer(JspWriterImpl.java:118)\n    org.apache.jasper.runtime.PageContextImpl.release(PageContextImpl.java:188)\n    org.apache.jasper.runtime.JspFactoryImpl.internalReleasePageContext(JspFactoryImpl.java:118)\n    org.apache.jasper.runtime.JspFactoryImpl.releasePageContext(JspFactoryImpl.java:77)\n    org.apache.jsp.Account.Domain.testPDF_jsp._jspService(testPDF_jsp.java:94)\n    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)\n    javax.servlet.http.HttpServlet.service(HttpServlet.java:717)\n    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:374)\n    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:342)\n    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:267)\n    javax.servlet.http.HttpServlet.service(HttpServlet.java:717)\n</code></pre>\n"},{"tags":["java","spring","spring-boot","docker","spring-security"],"answers":[{"comments":[{"owner":{"account_id":21563703,"reputation":43,"user_id":15897860,"display_name":"cinnamonbreakfast"},"score":0,"creation_date":1664867676,"post_id":73944164,"comment_id":130562531,"body_markdown":"Still the same... And it&#39;s weird cause if i don&#39;t run the image, but the project locally it works ok.\n\nHere&#39;s my config after your comment:\n\nhttp\n                .authorizeHttpRequests((authz) -&gt; authz\n                        .anyRequest().permitAll()\n                )\n                .httpBasic(AbstractHttpConfigurer::disable)\n                .sessionManagement(session -&gt; session.sessionCreationPolicy(SessionCreationPolicy.STATELESS)\n                );","body":"Still the same... And it&#39;s weird cause if i don&#39;t run the image, but the project locally it works ok.  Here&#39;s my config after your comment:  http                 .authorizeHttpRequests((authz) -&gt; authz                         .anyRequest().permitAll()                 )                 .httpBasic(AbstractHttpConfigurer::disable)                 .sessionManagement(session -&gt; session.sessionCreationPolicy(SessionCreationPolicy.STATELES&zwnj;&#8203;S)                 );"},{"owner":{"account_id":7371149,"reputation":99,"user_id":5611276,"accept_rate":0,"display_name":"TeeBea"},"score":0,"creation_date":1664868598,"post_id":73944164,"comment_id":130562810,"body_markdown":"`http.authorizeRequests().anyRequest().permitAll()` --remove that httpBasic disable.","body":"<code>http.authorizeRequests().anyRequest().permitAll()</code> --remove that httpBasic disable."},{"owner":{"account_id":21563703,"reputation":43,"user_id":15897860,"display_name":"cinnamonbreakfast"},"score":0,"creation_date":1664869716,"post_id":73944164,"comment_id":130563154,"body_markdown":"same :/ nothing changed.","body":"same :/ nothing changed."},{"owner":{"account_id":21563703,"reputation":43,"user_id":15897860,"display_name":"cinnamonbreakfast"},"score":0,"creation_date":1664871625,"post_id":73944164,"comment_id":130563759,"body_markdown":"fixed, there was an issue with the build. It was using an older version. Thank you!","body":"fixed, there was an issue with the build. It was using an older version. Thank you!"}],"tags":[],"owner":{"account_id":7371149,"reputation":99,"user_id":5611276,"accept_rate":0,"display_name":"TeeBea"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1664866923,"creation_date":1664866923,"answer_id":73944164,"question_id":73944053,"body_markdown":"You should disable httpBasic.\r\n\r\n`httpBasic.withDefaults()` \r\n\r\nactivates spring security.\r\n\r\nsee:\r\n\r\n[HttpBasicConfigurer](https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/config/annotation/web/configurers/HttpBasicConfigurer.html)","title":"Spring Security config ignored while running on Docker","body":"<p>You should disable httpBasic.</p>\n<p><code>httpBasic.withDefaults()</code></p>\n<p>activates spring security.</p>\n<p>see:</p>\n<p><a href=\"https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/config/annotation/web/configurers/HttpBasicConfigurer.html\" rel=\"nofollow noreferrer\">HttpBasicConfigurer</a></p>\n"}],"owner":{"account_id":21563703,"reputation":43,"user_id":15897860,"display_name":"cinnamonbreakfast"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":509,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73944164,"answer_count":1,"score":0,"last_activity_date":1689379190,"creation_date":1664866194,"question_id":73944053,"body_markdown":"I dockerized my simple spring boot application and I started by addind a repo, check that the connection works (and it does) and a simple controller for a simple model. Also added a controller for health checks. I permit all by a configuration, but everytime i try to access it, it redirects me to localhost:8080/login. Why is that?\r\n\r\nAlso if i run this project as it is (not as a docker image), it works.\r\n\r\n\r\nMy config (i use this because WebSecurityConfigurerAdapter seems to be deprecated) :\r\n\r\n    @Configuration\r\n    public class SecurityConfig {\r\n    \r\n        @Bean\r\n        public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n            http\r\n                    .authorizeHttpRequests((authz) -&gt; authz\r\n                            .anyRequest().permitAll()\r\n                    )\r\n                    .httpBasic(withDefaults());\r\n            return http.build();\r\n        }\r\n    }\r\n\r\napplication.yml:\r\n\r\n    spring:\r\n      datasource:\r\n        url: ${SPRING_DATASOURCE_URL}\r\n        username: ${SPRING_DATASOURCE_USERNAME}\r\n        password: ${SPRING_DATASOURCE_PASSWORD}\r\n      jpa:\r\n        hibernate:\r\n          ddl-auto: none\r\n\r\ndocker-compose.yml\r\n\r\n    version: &#39;2&#39;\r\n    \r\n    services:\r\n      app:\r\n        image: spring-backend\r\n        ports:\r\n          - &quot;8080:8080&quot;\r\n        depends_on:\r\n          - db\r\n        environment:\r\n          - SPRING_DATASOURCE_URL=jdbc:postgresql://db:5432/local_db\r\n          - SPRING_DATASOURCE_USERNAME=root\r\n          - SPRING_DATASOURCE_PASSWORD=postgres\r\n          - SPRING_JPA_HIBERNATE_DDL_AUTO=none\r\n          - JAR_FILE=./build/libs/*.jar\r\n    \r\n      db:\r\n        image: &#39;postgres:13.1-alpine&#39;\r\n        container_name: local_db\r\n        ports:\r\n          - &quot;5432:5432&quot;\r\n        environment:\r\n          - POSTGRES_USER=root\r\n          - POSTGRES_PASSWORD=postgres\r\n          - POSTGRES_DB=local_db\r\n\r\nDockerfile:\r\n\r\n    FROM openjdk:11-jre\r\n    ARG JAR_FILE=./build/libs/*.jar\r\n    COPY ${JAR_FILE} app.jar\r\n    EXPOSE 8080\r\n    CMD [&quot;java&quot;, &quot;-jar&quot;, &quot;app.jar&quot;]\r\n\r\nThanks!","title":"Spring Security config ignored while running on Docker","body":"<p>I dockerized my simple spring boot application and I started by addind a repo, check that the connection works (and it does) and a simple controller for a simple model. Also added a controller for health checks. I permit all by a configuration, but everytime i try to access it, it redirects me to localhost:8080/login. Why is that?</p>\n<p>Also if i run this project as it is (not as a docker image), it works.</p>\n<p>My config (i use this because WebSecurityConfigurerAdapter seems to be deprecated) :</p>\n<pre><code>@Configuration\npublic class SecurityConfig {\n\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        http\n                .authorizeHttpRequests((authz) -&gt; authz\n                        .anyRequest().permitAll()\n                )\n                .httpBasic(withDefaults());\n        return http.build();\n    }\n}\n</code></pre>\n<p>application.yml:</p>\n<pre><code>spring:\n  datasource:\n    url: ${SPRING_DATASOURCE_URL}\n    username: ${SPRING_DATASOURCE_USERNAME}\n    password: ${SPRING_DATASOURCE_PASSWORD}\n  jpa:\n    hibernate:\n      ddl-auto: none\n</code></pre>\n<p>docker-compose.yml</p>\n<pre><code>version: '2'\n\nservices:\n  app:\n    image: spring-backend\n    ports:\n      - &quot;8080:8080&quot;\n    depends_on:\n      - db\n    environment:\n      - SPRING_DATASOURCE_URL=jdbc:postgresql://db:5432/local_db\n      - SPRING_DATASOURCE_USERNAME=root\n      - SPRING_DATASOURCE_PASSWORD=postgres\n      - SPRING_JPA_HIBERNATE_DDL_AUTO=none\n      - JAR_FILE=./build/libs/*.jar\n\n  db:\n    image: 'postgres:13.1-alpine'\n    container_name: local_db\n    ports:\n      - &quot;5432:5432&quot;\n    environment:\n      - POSTGRES_USER=root\n      - POSTGRES_PASSWORD=postgres\n      - POSTGRES_DB=local_db\n</code></pre>\n<p>Dockerfile:</p>\n<pre><code>FROM openjdk:11-jre\nARG JAR_FILE=./build/libs/*.jar\nCOPY ${JAR_FILE} app.jar\nEXPOSE 8080\nCMD [&quot;java&quot;, &quot;-jar&quot;, &quot;app.jar&quot;]\n</code></pre>\n<p>Thanks!</p>\n"},{"tags":["java","spring","hibernate","spring-mvc","jpa"],"answers":[{"tags":[],"owner":{"account_id":2654723,"reputation":2663,"user_id":2295657,"display_name":"jmvivo"},"comment_count":0,"down_vote_count":0,"up_vote_count":33,"is_accepted":false,"score":33,"last_activity_date":1689379048,"creation_date":1411368408,"answer_id":25968074,"question_id":25967935,"body_markdown":"Look at `@OneToMany`&#39;s [orphanRemoval][1] option:\r\n\r\n    @OneToMany(cascade = CascadeType.REMOVE, orphanRemoval = true)\r\n\r\nHere there is a complete explication about `CascadeType.REMOVE` and `orphanRemoval`:\r\n\r\n* [@ManyToOne JPA association and cascade... not sure what happens if I delete an object](https://stackoverflow.com/a/6190149/2295657)\r\n\r\nGood luck!\r\n\r\n  [1]: http://docs.oracle.com/javaee/6/api/javax/persistence/OneToMany.html#orphanRemoval()\r\n  [2]: https://stackoverflow.com/a/6190149/2295657","title":"JPA + Hibernate + Spring + OneToMany delete cascade","body":"<p>Look at <code>@OneToMany</code>'s <a href=\"http://docs.oracle.com/javaee/6/api/javax/persistence/OneToMany.html#orphanRemoval()\" rel=\"nofollow noreferrer\">orphanRemoval</a> option:</p>\n<pre><code>@OneToMany(cascade = CascadeType.REMOVE, orphanRemoval = true)\n</code></pre>\n<p>Here there is a complete explication about <code>CascadeType.REMOVE</code> and <code>orphanRemoval</code>:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/a/6190149/2295657\">@ManyToOne JPA association and cascade... not sure what happens if I delete an object</a></li>\n</ul>\n<p>Good luck!</p>\n"},{"comments":[{"owner":{"account_id":4910122,"reputation":661,"user_id":3955637,"accept_rate":57,"display_name":"Garci Garc&#237;a"},"score":0,"creation_date":1411370367,"post_id":25968501,"comment_id":40660544,"body_markdown":"Thanks but I need this in ManyToOne side, since I don&#39;t have OneToMany way. Would it be possible? Thanks","body":"Thanks but I need this in ManyToOne side, since I don&#39;t have OneToMany way. Would it be possible? Thanks"},{"owner":{"account_id":4910122,"reputation":661,"user_id":3955637,"accept_rate":57,"display_name":"Garci Garc&#237;a"},"score":0,"creation_date":1411370899,"post_id":25968501,"comment_id":40660824,"body_markdown":"So if I can&#39;t have this bi-directional, do I need to do some recursive process? Thanks","body":"So if I can&#39;t have this bi-directional, do I need to do some recursive process? Thanks"},{"owner":{"account_id":3922468,"reputation":6689,"user_id":3244185,"display_name":"Harshal Patil"},"score":0,"creation_date":1411371094,"post_id":25968501,"comment_id":40660914,"body_markdown":"Yes you have to refer http://fruzenshtein.com/bidirectional-many-to-one-association/","body":"Yes you have to refer <a href=\"http://fruzenshtein.com/bidirectional-many-to-one-association/\" rel=\"nofollow noreferrer\">fruzenshtein.com/bidirectional-many-to-one-association</a>"},{"owner":{"account_id":4910122,"reputation":661,"user_id":3955637,"accept_rate":57,"display_name":"Garci Garc&#237;a"},"score":0,"creation_date":1411372747,"post_id":25968501,"comment_id":40661650,"body_markdown":"I&#39;ve seen this link: http://www.java2s.com/Code/Java/JPA/ManyToOneCascadeRemove.htm they do remove a many-to-one relation but this doesn&#39;t seem to work. Thanks","body":"I&#39;ve seen this link: <a href=\"http://www.java2s.com/Code/Java/JPA/ManyToOneCascadeRemove.htm\" rel=\"nofollow noreferrer\">java2s.com/Code/Java/JPA/ManyToOneCascadeRemove.htm</a> they do remove a many-to-one relation but this doesn&#39;t seem to work. Thanks"}],"tags":[],"owner":{"account_id":3922468,"reputation":6689,"user_id":3244185,"display_name":"Harshal Patil"},"comment_count":4,"down_vote_count":0,"up_vote_count":29,"is_accepted":true,"score":29,"last_activity_date":1689379170,"creation_date":1411370090,"answer_id":25968501,"question_id":25967935,"body_markdown":"**Relationships in JPA are always unidirectional**, unless you associate the parent with the child in both directions. Cascading REMOVE operations from the parent to the child will require a relation from the parent to the child (not just the opposite).\r\n\r\nSo here you need to change unidirectional relationship to bi-directional.\r\n\r\nfor more details refer to:\r\n\r\n* [JPA: unidirectional many-to-one and cascading delete](https://stackoverflow.com/questions/7197181/jpa-unidirectional-many-to-one-and-cascading-delete)","title":"JPA + Hibernate + Spring + OneToMany delete cascade","body":"<p><strong>Relationships in JPA are always unidirectional</strong>, unless you associate the parent with the child in both directions. Cascading REMOVE operations from the parent to the child will require a relation from the parent to the child (not just the opposite).</p>\n<p>So here you need to change unidirectional relationship to bi-directional.</p>\n<p>for more details refer to:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/7197181/jpa-unidirectional-many-to-one-and-cascading-delete\">JPA: unidirectional many-to-one and cascading delete</a></li>\n</ul>\n"}],"owner":{"account_id":4910122,"reputation":661,"user_id":3955637,"accept_rate":57,"display_name":"Garci Garc&#237;a"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":106369,"favorite_count":0,"down_vote_count":0,"up_vote_count":34,"accepted_answer_id":25968501,"answer_count":2,"score":34,"last_activity_date":1689379170,"creation_date":1411367683,"question_id":25967935,"body_markdown":"I&#39;ve read some related questions but they are not exactly the same problem as mine.\r\n\r\nI&#39;m using JPA + Hibernate + Spring and I want to do something that I&#39;m not sure if it is possible just with config.\r\n\r\nI have my domain classes with a more or less complicated relation. There are many elements that are related with one element (like if it was a tree many elements are sons of one element).\r\n\r\nSomething like:\r\n\r\n    @Entity\r\n    class Foo {\r\n\t    @Id\r\n\t    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n\t    private Integer id;\r\n    \r\n        @ManyToOne\r\n\t    @JoinColumn(name = &quot;PARENT_ID&quot;)\r\n\t    private Foo parentNode;\r\n        ...\r\n    }\r\n\r\nWhich will get a table like:\r\n\r\n    Foo id    parent_id\r\n    1\r\n    2         1 \r\n    3         1\r\n\r\nWhen I delete row with id = 1 I want to delete rows with id = 2 and id = 3 (it may be recursive, elements with parent_id = 2 and parent_id = 3 would be deleted as well).\r\n\r\nFor some restrictions I only can have the relation in son&#39;s side with the parent_id reference.\r\n\r\nMy question is: is it possible to do this with JPA or Hibernate configuration or do I need to do some recursive function to delete all children and all parents?\r\n\r\nI&#39;ve tried with:\r\n\r\n    @OneToMany(name = &quot;PARENT_ID&quot;, cascade = CascadeType.REMOVE)\r\n\r\nAnd I&#39;ve read that maybe using Hibernate annotations.\r\n\r\nIf anyone can give me some clue I&#39;m lost at this point.\r\n\r\nEdit 1\r\n------\r\n\r\nWould it be possible to do like:\r\n\r\n    @Entity\r\n    class Foo {\r\n\t    @Id\r\n\t    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n\t    private Integer id;\r\n    \r\n        @ManyToOne\r\n\t    @JoinColumn(name=&quot;PARENT_ID&quot;)\r\n\t    private Foo parentNode;\r\n\r\n        @OneToMany(fetch = FetchType.LAZY, mappedBy = &quot;parentNode&quot;, cascade = CascadeType.REMOVE, orphanRemoval = true)\r\n        private Set&lt;Foo&gt; childs = new LinkedHashSet&lt;Foo&gt;();\r\n        ...\r\n    }\r\n\r\nKeeping the table as is, with the fk to the parent?\r\nI&#39;ve tried this but I keep getting the same error, fk restriction violated.\r\n\r\nEdit 2\r\n------\r\n\r\nFinally solved with:\r\n\r\n    @Entity\r\n    class Foo {\r\n\t    @Id\r\n\t    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n\t    private Integer id;\r\n    \r\n        @ManyToOne\r\n\t    @JoinColumn(name = &quot;PARENT_ID&quot;)\r\n\t    private Foo parentNode;\r\n\r\n        @OneToMany(mappedBy = &quot;parentNode&quot;, cascade = CascadeType.REMOVE)\r\n        private Set&lt;Foo&gt; childs = new LinkedHashSet&lt;Foo&gt;();\r\n        ...\r\n    }\r\n\r\nThis `@OneToMany` is needed even if we do the mapping in our BBDD by refering just the parent id.\r\n\r\nNow when we delete a Foo with childs, it&#39;s childs will be deleted as well.\r\n\r\nThanks for your time and good advices!","title":"JPA + Hibernate + Spring + OneToMany delete cascade","body":"<p>I've read some related questions but they are not exactly the same problem as mine.</p>\n\n<p>I'm using JPA + Hibernate + Spring and I want to do something that I'm not sure if it is possible just with config.</p>\n\n<p>I have my domain classes with a more or less complicated relation. There are many elements that are related with one element (like if it was a tree many elements are sons of one element).</p>\n\n<p>Something like:</p>\n\n<pre><code>@Entity\nclass Foo {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Integer id;\n\n    @ManyToOne\n    @JoinColumn(name = \"PARENT_ID\")\n    private Foo parentNode;\n    ...\n}\n</code></pre>\n\n<p>Which will get a table like:</p>\n\n<pre><code>Foo id    parent_id\n1\n2         1 \n3         1\n</code></pre>\n\n<p>When I delete row with id = 1 I want to delete rows with id = 2 and id = 3 (it may be recursive, elements with parent_id = 2 and parent_id = 3 would be deleted as well).</p>\n\n<p>For some restrictions I only can have the relation in son's side with the parent_id reference.</p>\n\n<p>My question is: is it possible to do this with JPA or Hibernate configuration or do I need to do some recursive function to delete all children and all parents?</p>\n\n<p>I've tried with:</p>\n\n<pre><code>@OneToMany(name = \"PARENT_ID\", cascade = CascadeType.REMOVE)\n</code></pre>\n\n<p>And I've read that maybe using Hibernate annotations.</p>\n\n<p>If anyone can give me some clue I'm lost at this point.</p>\n\n<h2>Edit 1</h2>\n\n<p>Would it be possible to do like:</p>\n\n<pre><code>@Entity\nclass Foo {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Integer id;\n\n    @ManyToOne\n    @JoinColumn(name=\"PARENT_ID\")\n    private Foo parentNode;\n\n    @OneToMany(fetch = FetchType.LAZY, mappedBy = \"parentNode\", cascade = CascadeType.REMOVE, orphanRemoval = true)\n    private Set&lt;Foo&gt; childs = new LinkedHashSet&lt;Foo&gt;();\n    ...\n}\n</code></pre>\n\n<p>Keeping the table as is, with the fk to the parent?\nI've tried this but I keep getting the same error, fk restriction violated.</p>\n\n<h2>Edit 2</h2>\n\n<p>Finally solved with:</p>\n\n<pre><code>@Entity\nclass Foo {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Integer id;\n\n    @ManyToOne\n    @JoinColumn(name = \"PARENT_ID\")\n    private Foo parentNode;\n\n    @OneToMany(mappedBy = \"parentNode\", cascade = CascadeType.REMOVE)\n    private Set&lt;Foo&gt; childs = new LinkedHashSet&lt;Foo&gt;();\n    ...\n}\n</code></pre>\n\n<p>This <code>@OneToMany</code> is needed even if we do the mapping in our BBDD by refering just the parent id.</p>\n\n<p>Now when we delete a Foo with childs, it's childs will be deleted as well.</p>\n\n<p>Thanks for your time and good advices!</p>\n"},{"tags":["java","css","jsp","intellij-idea"],"comments":[{"owner":{"account_id":1463841,"reputation":45,"user_id":1478373,"display_name":"tedpenner"},"score":0,"creation_date":1617115782,"post_id":66842345,"comment_id":118209927,"body_markdown":"The two suggestions that were made both work to some extent. Code With Me and GitLive both seem to do the trick, although GitLive seems more integrated with Git which seems like a potentially better choice. The problem of not allowing any single person to view more than what they have been given to work on is still a problem. Is there any way around this with GitLive or any other tool?","body":"The two suggestions that were made both work to some extent. Code With Me and GitLive both seem to do the trick, although GitLive seems more integrated with Git which seems like a potentially better choice. The problem of not allowing any single person to view more than what they have been given to work on is still a problem. Is there any way around this with GitLive or any other tool?"}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1616942226,"creation_date":1616942226,"answer_id":66842561,"question_id":66842345,"body_markdown":"There are a few ways to go with this. The usual &#39;kneejerk&#39; reaction to the underlying idea (I want to &#39;remote&#39; pair program! – I assume that is what you want here; possibly replace &#39;pair program&#39; with &#39;coach&#39; or &#39;code review&#39;) is to set up an editor such that it is a server/client getup where multiple humans can connect to the &#39;server&#39;, and they all see the same editor. Think &#39;Google Docs&#39;, but in a code editor.\r\n\r\nThere are technologies out there that accomplish this. Eclipse has plugins such as Saros, and for intellij there&#39;s something like [GitLive](https://plugins.jetbrains.com/plugin/11955-gitlive).\r\n\r\nThere is a problem, though. It _sounds_ like collaborative edits fulfils your needs to remote-pair-program, remote-coach, etc, __but that usually does not actually work very well__. Programming involves more than an IDE. For example, a ton of dev involves writing web services stuff, and generally the IDE does not contain a full fledged browser, and definitely does not contain a browser-based debugging tool (right click: Inspect Element - that kinda debugging). Collaboration also involves code review, and often it can be convenient for a team to temporarily &#39;split off&#39; - where the 2 people working in pairs stop sharing a single editor and each work on their own thing. Nobody likes just staring idly at their screen whilst a supervisor types up some notes in the git commit.\r\n\r\nThus, you may want to think about how people actually program and how one would come up with a collaborative setup that lets you actually collaborate whilst remaining practical, and you get to a different answer:\r\n\r\n**Source-control based collaboration with optional voice/video calling + full screen sharing.**\r\n\r\nThere are a _ton_ of tools out there to do collaboration based on source control, in particular, git-based source control. For example, a workflow where somebody makes a commit (which lets the creator of the work bundle up a change into a sane atomic unit, which usually is not as simple as &#39;all the changes made to a single file&#39;, and lets them add a comment about what they did and why they did that can be as long a you want), which then goes into a review queue, and then a code reviewer can automatically &#39;pick up&#39; these changes into their local copy of the repo, review it, and commit this, and even &#39;flag&#39; whether another cycle is required (where the comments and edits go back to the original creator), or not - with each person doing a review able to add a signature. Then a CI system automatically updates (and runs the test suite on) the production version by pulling in all commits that have gathered sufficient signatures. Any commit that isn&#39;t &#39;signed off&#39; is simply not included by the CI tooling.\r\n\r\nI would suggest you use such a system, and in the rare cases where true as-you-type pair programming is required for direct coaching for example, just use generic screen sharing tools – this also solves the problem when you need to switch to e.g. the browser to do some javascript debugging.\r\n\r\nThis also lets the &#39;someone&#39; in your question have the ability to eventually see and edit lots of files, independent of their supervisor or however the relationship is defined: They just have all those files on their disk, pulled via git. They can edit whatever they want, in whatever fashion they like, and mess around and have open bugs they don&#39;t know how to solve, without messing with other folks&#39; workflow: They bundle their work up in a commit which others can then accept when and only when they are ready to do so.\r\n\r\nSource control in general does 90% of what is usually desired for &#39;collaborative programming&#39;: If Jane has done a bunch of work but has some questions about it, then Jane (who is of course working in her own branch for this update) can simply push it striaght to Aki&#39;s system, where Aki can review the changes, run it if need be, even make changes - and they&#39;ll be using a channel that is appropriate for in-depth discussion and swapping of ideas and experience: A voice or even video call, running whilst both of them are staring at the relevant source code, in their own system, as configured in the way they prefer.\r\n\r\nNote that trying to solve the problem of personal preferences by dictating the system being used in exacting fashion (everybody must use this edition of intellij at this version with these plugins and these visual settings!) is not very inclusive: Some folks have accessibility needs which are mutually exclusive.\r\n\r\nThat may explain a significant chunk of why the &#39;use git to collaborate, and just share a screen and start a (video) call if needed&#39; is so much more popular than a &#39;lets all work on a single server-based IDE, google-docs style&#39; model.\r\n\r\nBut, if you really wanna go for it, give GitLive a try.\r\n","title":"Collaboration with Java IDE","body":"<p>There are a few ways to go with this. The usual 'kneejerk' reaction to the underlying idea (I want to 'remote' pair program! – I assume that is what you want here; possibly replace 'pair program' with 'coach' or 'code review') is to set up an editor such that it is a server/client getup where multiple humans can connect to the 'server', and they all see the same editor. Think 'Google Docs', but in a code editor.</p>\n<p>There are technologies out there that accomplish this. Eclipse has plugins such as Saros, and for intellij there's something like <a href=\"https://plugins.jetbrains.com/plugin/11955-gitlive\" rel=\"nofollow noreferrer\">GitLive</a>.</p>\n<p>There is a problem, though. It <em>sounds</em> like collaborative edits fulfils your needs to remote-pair-program, remote-coach, etc, <strong>but that usually does not actually work very well</strong>. Programming involves more than an IDE. For example, a ton of dev involves writing web services stuff, and generally the IDE does not contain a full fledged browser, and definitely does not contain a browser-based debugging tool (right click: Inspect Element - that kinda debugging). Collaboration also involves code review, and often it can be convenient for a team to temporarily 'split off' - where the 2 people working in pairs stop sharing a single editor and each work on their own thing. Nobody likes just staring idly at their screen whilst a supervisor types up some notes in the git commit.</p>\n<p>Thus, you may want to think about how people actually program and how one would come up with a collaborative setup that lets you actually collaborate whilst remaining practical, and you get to a different answer:</p>\n<p><strong>Source-control based collaboration with optional voice/video calling + full screen sharing.</strong></p>\n<p>There are a <em>ton</em> of tools out there to do collaboration based on source control, in particular, git-based source control. For example, a workflow where somebody makes a commit (which lets the creator of the work bundle up a change into a sane atomic unit, which usually is not as simple as 'all the changes made to a single file', and lets them add a comment about what they did and why they did that can be as long a you want), which then goes into a review queue, and then a code reviewer can automatically 'pick up' these changes into their local copy of the repo, review it, and commit this, and even 'flag' whether another cycle is required (where the comments and edits go back to the original creator), or not - with each person doing a review able to add a signature. Then a CI system automatically updates (and runs the test suite on) the production version by pulling in all commits that have gathered sufficient signatures. Any commit that isn't 'signed off' is simply not included by the CI tooling.</p>\n<p>I would suggest you use such a system, and in the rare cases where true as-you-type pair programming is required for direct coaching for example, just use generic screen sharing tools – this also solves the problem when you need to switch to e.g. the browser to do some javascript debugging.</p>\n<p>This also lets the 'someone' in your question have the ability to eventually see and edit lots of files, independent of their supervisor or however the relationship is defined: They just have all those files on their disk, pulled via git. They can edit whatever they want, in whatever fashion they like, and mess around and have open bugs they don't know how to solve, without messing with other folks' workflow: They bundle their work up in a commit which others can then accept when and only when they are ready to do so.</p>\n<p>Source control in general does 90% of what is usually desired for 'collaborative programming': If Jane has done a bunch of work but has some questions about it, then Jane (who is of course working in her own branch for this update) can simply push it striaght to Aki's system, where Aki can review the changes, run it if need be, even make changes - and they'll be using a channel that is appropriate for in-depth discussion and swapping of ideas and experience: A voice or even video call, running whilst both of them are staring at the relevant source code, in their own system, as configured in the way they prefer.</p>\n<p>Note that trying to solve the problem of personal preferences by dictating the system being used in exacting fashion (everybody must use this edition of intellij at this version with these plugins and these visual settings!) is not very inclusive: Some folks have accessibility needs which are mutually exclusive.</p>\n<p>That may explain a significant chunk of why the 'use git to collaborate, and just share a screen and start a (video) call if needed' is so much more popular than a 'lets all work on a single server-based IDE, google-docs style' model.</p>\n<p>But, if you really wanna go for it, give GitLive a try.</p>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689378748,"creation_date":1616949700,"answer_id":66843759,"question_id":66842345,"body_markdown":"If you want to share code files, use a source code versioning management tool such as [Mercurial][1] or [Git][2]. IntelliJ supports several such tools.\r\n\r\nIf you want to collaborate live with another programmer within IntelliJ, use the new *Code With Me* tool.\r\n\r\n# *Code With Me* for IntelliJ\r\n\r\nThe JetBrains company has released a new plugin for their IntelliJ IDE: *Code With Me*. \r\n\r\n&gt; Code With Me is a new collaborative development and pair programming service. It enables you to share the currently opened project in your IDE with others, and work on it together in real time.\r\n\r\n\r\nThis product:\r\n\r\n&gt;… enables you to share an open project in your IDE with your distributed team. This allows them to quickly access your code, so they can help you investigate issues, review, and work on your code together with you in real time. And all this can be done while still enjoying the full benefits of the code autocompletion, smart navigation, refactoring, debugging suite, and built-in terminal available in your JetBrains IDE.\r\n\r\nThe guest invited to a work session need not even have IntelliJ installed. No IDE is required to connect as a guest, you only need an invitation link. For guests, only a lightweight client application is downloaded.\r\n\r\n*Code With Me* also provides audio or video calls between participants.\r\n\r\nSee the [product page][3], their [*Getting Started* guide](https://www.jetbrains.com/help/idea/code-with-me.html), and [FAQ][4]. See [their blog post][5] explaining the early-access version. The company likely published video demonstrations on [their YouTube.com channel][6]. [Search][7] to learn more.\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Mercurial\r\n  [2]: https://en.wikipedia.org/wiki/Git\r\n  [3]: https://www.jetbrains.com/code-with-me/\r\n  [4]: https://www.jetbrains.com/help/idea/faq-about-code-with-me.html\r\n  [5]: https://blog.jetbrains.com/blog/2020/09/28/code-with-me-eap/\r\n  [6]: https://www.youtube.com/@JetBrainsTV\r\n  [7]: https://duckduckgo.com/?q=%22Code%20With%20Me%22%20jetbrains&amp;t=osx&amp;ia=web","title":"Collaboration with Java IDE","body":"<p>If you want to share code files, use a source code versioning management tool such as <a href=\"https://en.wikipedia.org/wiki/Mercurial\" rel=\"nofollow noreferrer\">Mercurial</a> or <a href=\"https://en.wikipedia.org/wiki/Git\" rel=\"nofollow noreferrer\">Git</a>. IntelliJ supports several such tools.</p>\n<p>If you want to collaborate live with another programmer within IntelliJ, use the new <em>Code With Me</em> tool.</p>\n<h1><em>Code With Me</em> for IntelliJ</h1>\n<p>The JetBrains company has released a new plugin for their IntelliJ IDE: <em>Code With Me</em>.</p>\n<blockquote>\n<p>Code With Me is a new collaborative development and pair programming service. It enables you to share the currently opened project in your IDE with others, and work on it together in real time.</p>\n</blockquote>\n<p>This product:</p>\n<blockquote>\n<p>… enables you to share an open project in your IDE with your distributed team. This allows them to quickly access your code, so they can help you investigate issues, review, and work on your code together with you in real time. And all this can be done while still enjoying the full benefits of the code autocompletion, smart navigation, refactoring, debugging suite, and built-in terminal available in your JetBrains IDE.</p>\n</blockquote>\n<p>The guest invited to a work session need not even have IntelliJ installed. No IDE is required to connect as a guest, you only need an invitation link. For guests, only a lightweight client application is downloaded.</p>\n<p><em>Code With Me</em> also provides audio or video calls between participants.</p>\n<p>See the <a href=\"https://www.jetbrains.com/code-with-me/\" rel=\"nofollow noreferrer\">product page</a>, their <a href=\"https://www.jetbrains.com/help/idea/code-with-me.html\" rel=\"nofollow noreferrer\"><em>Getting Started</em> guide</a>, and <a href=\"https://www.jetbrains.com/help/idea/faq-about-code-with-me.html\" rel=\"nofollow noreferrer\">FAQ</a>. See <a href=\"https://blog.jetbrains.com/blog/2020/09/28/code-with-me-eap/\" rel=\"nofollow noreferrer\">their blog post</a> explaining the early-access version. The company likely published video demonstrations on <a href=\"https://www.youtube.com/@JetBrainsTV\" rel=\"nofollow noreferrer\">their YouTube.com channel</a>. <a href=\"https://duckduckgo.com/?q=%22Code%20With%20Me%22%20jetbrains&amp;t=osx&amp;ia=web\" rel=\"nofollow noreferrer\">Search</a> to learn more.</p>\n"},{"tags":[],"owner":{"account_id":2870806,"reputation":316,"user_id":2464215,"display_name":"Todd Williams"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1619996568,"creation_date":1619996568,"answer_id":67361839,"question_id":66842345,"body_markdown":"CodeTogether supports remote pair programming in IntelliJ, VS Code, Eclipse, and all the IDEs based on them.\r\n\r\nYou can restrict what files are shared as well as read/write access per participant. You can also work on the same file with a shared cursor, individual cursors, or on different files, all simultaneously with up to 32 people. CodeTogether is available in the marketplace of whatever IDE you use. More info is at CodeTogether.com\r\n\r\nDisclaimer: I’m an employee of Genuitec and CodeTogether is our product. However, I’m only mentioning it here because it seems to address this poster’s requirements. ","title":"Collaboration with Java IDE","body":"<p>CodeTogether supports remote pair programming in IntelliJ, VS Code, Eclipse, and all the IDEs based on them.</p>\n<p>You can restrict what files are shared as well as read/write access per participant. You can also work on the same file with a shared cursor, individual cursors, or on different files, all simultaneously with up to 32 people. CodeTogether is available in the marketplace of whatever IDE you use. More info is at CodeTogether.com</p>\n<p>Disclaimer: I’m an employee of Genuitec and CodeTogether is our product. However, I’m only mentioning it here because it seems to address this poster’s requirements.</p>\n"}],"owner":{"account_id":1463841,"reputation":45,"user_id":1478373,"display_name":"tedpenner"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":343,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":66843759,"answer_count":3,"score":2,"last_activity_date":1689378748,"creation_date":1616940736,"question_id":66842345,"body_markdown":"We need to be able to share the viewing and editing of a Java coding project that was started in Intellij.\r\n\r\nWe need to be able to start by giving someone view-only access to a single file, and eventually allow them to see and edit other pieces.\r\n\r\nIntellij does not appear to support this scenario directly, so we tested doing it in these two tools.\r\n\r\nThe Visual Studio Community Edition IDE says that it supports collaboration on the version comparison page but doesn&#39;t appear to support Java\r\nvs_community__1095676675.1612398125.exe\r\nblob:https://visualstudio.microsoft.com/bfa14bfc-7573-43d5-81a8-eba84694b332\r\n\r\nThe VSCode IDE supports Java but not collaboration.\r\nVSCodeUserSetup-x64-1.54.3.exe\r\nhttps://az764295.vo.msecnd.net/stable/2b9aebd5354a3629c3aba0a5f5df49f43d6689f8/VSCodeUserSetup-x64-1.54.3.exe\r\n\r\nAssistance is greatly appreciated.","title":"Collaboration with Java IDE","body":"<p>We need to be able to share the viewing and editing of a Java coding project that was started in Intellij.</p>\n<p>We need to be able to start by giving someone view-only access to a single file, and eventually allow them to see and edit other pieces.</p>\n<p>Intellij does not appear to support this scenario directly, so we tested doing it in these two tools.</p>\n<p>The Visual Studio Community Edition IDE says that it supports collaboration on the version comparison page but doesn't appear to support Java\nvs_community__1095676675.1612398125.exe\nblob:<a href=\"https://visualstudio.microsoft.com/bfa14bfc-7573-43d5-81a8-eba84694b332\" rel=\"nofollow noreferrer\">https://visualstudio.microsoft.com/bfa14bfc-7573-43d5-81a8-eba84694b332</a></p>\n<p>The VSCode IDE supports Java but not collaboration.\nVSCodeUserSetup-x64-1.54.3.exe\n<a href=\"https://az764295.vo.msecnd.net/stable/2b9aebd5354a3629c3aba0a5f5df49f43d6689f8/VSCodeUserSetup-x64-1.54.3.exe\" rel=\"nofollow noreferrer\">https://az764295.vo.msecnd.net/stable/2b9aebd5354a3629c3aba0a5f5df49f43d6689f8/VSCodeUserSetup-x64-1.54.3.exe</a></p>\n<p>Assistance is greatly appreciated.</p>\n"},{"tags":["java","time-complexity","execution"],"comments":[{"owner":{"account_id":236130,"reputation":5021,"user_id":503413,"accept_rate":78,"display_name":"Olimpiu POP"},"score":0,"creation_date":1409572465,"post_id":25605254,"comment_id":39998352,"body_markdown":"for time complexity you usually compute worst case time and medium. For worst time you obviously assume every time that the most complex path will follow. So, to answer your question, it shouldn&#39;t make a difference.","body":"for time complexity you usually compute worst case time and medium. For worst time you obviously assume every time that the most complex path will follow. So, to answer your question, it shouldn&#39;t make a difference."},{"owner":{"account_id":4826640,"reputation":25377,"user_id":3895960,"accept_rate":97,"display_name":"Dici"},"score":1,"creation_date":1409572629,"post_id":25605254,"comment_id":39998448,"body_markdown":"This is a bad example because n % 2 will always be 0 or 1 if n is positive (including 0).","body":"This is a bad example because n % 2 will always be 0 or 1 if n is positive (including 0)."},{"owner":{"account_id":1319802,"reputation":1332,"user_id":1265850,"accept_rate":79,"display_name":"R D"},"score":0,"creation_date":1409572789,"post_id":25605254,"comment_id":39998541,"body_markdown":"thanks @Dici now i am corrected the code, i thing now its correct","body":"thanks @Dici now i am corrected the code, i thing now its correct"},{"owner":{"account_id":4826640,"reputation":25377,"user_id":3895960,"accept_rate":97,"display_name":"Dici"},"score":0,"creation_date":1409573033,"post_id":25605254,"comment_id":39998673,"body_markdown":"0 is even (0 % 2 == 0) ! A number can only be odd or even, there is no third case for % 2. A better example would be % 3. However, it is still a poor example since all the three cases have the same probability. I&#39;m going to suggest you an edit.","body":"0 is even (0 % 2 == 0) ! A number can only be odd or even, there is no third case for % 2. A better example would be % 3. However, it is still a poor example since all the three cases have the same probability. I&#39;m going to suggest you an edit."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1409575221,"post_id":25605254,"comment_id":39999800,"body_markdown":"@Dici - I suggest you read JLS section 15.17.3.  There is a 3rd case.","body":"@Dici - I suggest you read JLS section 15.17.3.  There is a 3rd case."},{"owner":{"account_id":28104689,"reputation":512,"user_id":21473475,"display_name":"Arfur Narf"},"score":0,"creation_date":1689377798,"post_id":25605254,"comment_id":135210078,"body_markdown":"In this example, and assuming positive numbers, you could have no &#39;ifs&#39; at all,  Make `count[5]` and then just `count[m]++`.  After the loop, `firstCase = count[0] + count[1] + count[2]`, etc.","body":"In this example, and assuming positive numbers, you could have no &#39;ifs&#39; at all,  Make <code>count[5]</code> and then just <code>count[m]++</code>.  After the loop, <code>firstCase = count[0] + count[1] + count[2]</code>, etc."}],"answers":[{"comments":[{"owner":{"account_id":217473,"reputation":6570,"user_id":473290,"accept_rate":85,"display_name":"Eric"},"score":0,"creation_date":1689376293,"post_id":25605316,"comment_id":135209950,"body_markdown":"Do you have an documentation to support this assertion?","body":"Do you have an documentation to support this assertion?"}],"tags":[],"owner":{"account_id":2076734,"reputation":3570,"user_id":1849873,"accept_rate":75,"display_name":"Balduz"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1409572477,"creation_date":1409572477,"answer_id":25605316,"question_id":25605254,"body_markdown":"There is no difference if you only have an `if-else`, since the condition will always be evaluated and it does not matter whether it is almost always true or false. However, if you  have an `if` in the `else` part (the `else if`), it is much better to put the most possible true condition in the first `if`. Therefore, most of the time you won&#39;t need to evaluate the condition inside the `else`, increasing performance.","title":"What is the different in putting most possible true condition in if, else-if or else","body":"<p>There is no difference if you only have an <code>if-else</code>, since the condition will always be evaluated and it does not matter whether it is almost always true or false. However, if you  have an <code>if</code> in the <code>else</code> part (the <code>else if</code>), it is much better to put the most possible true condition in the first <code>if</code>. Therefore, most of the time you won't need to evaluate the condition inside the <code>else</code>, increasing performance.</p>\n"},{"tags":[],"owner":{"account_id":902001,"reputation":39942,"user_id":937892,"accept_rate":63,"display_name":"PSR"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1409572477,"creation_date":1409572477,"answer_id":25605317,"question_id":25605254,"body_markdown":"If most conditions are true in if then the execution time will be less .Because in the first if condition only it satisfied.\r\n\r\nIf most conditions are true in if-else then the execution time will be less then last and more than first scenarios .\r\n\r\nIf most conditions are true in else then the execution time will be more.Because it checkes first 2 conditions.\r\n\r\n","title":"What is the different in putting most possible true condition in if, else-if or else","body":"<p>If most conditions are true in if then the execution time will be less .Because in the first if condition only it satisfied.</p>\n\n<p>If most conditions are true in if-else then the execution time will be less then last and more than first scenarios .</p>\n\n<p>If most conditions are true in else then the execution time will be more.Because it checkes first 2 conditions.</p>\n"},{"tags":[],"owner":{"account_id":1597725,"reputation":34231,"user_id":1479414,"accept_rate":71,"display_name":"Andremoniy"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1409572556,"creation_date":1409572556,"answer_id":25605334,"question_id":25605254,"body_markdown":"Sure it is. \r\n\r\n`if ... else if ...` checks are going in order in which they were coded. So, if you will place most possible condition in the end of this conditions checking queue - such code will work slightly slower. \r\n\r\nBut it all depenends how these conditions are built (how complex they are). ","title":"What is the different in putting most possible true condition in if, else-if or else","body":"<p>Sure it is. </p>\n\n<p><code>if ... else if ...</code> checks are going in order in which they were coded. So, if you will place most possible condition in the end of this conditions checking queue - such code will work slightly slower. </p>\n\n<p>But it all depenends how these conditions are built (how complex they are). </p>\n"},{"tags":[],"owner":{"account_id":1940875,"reputation":2370,"user_id":2310411,"accept_rate":58,"display_name":"Vignesh Paramasivam"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1409572776,"creation_date":1409572776,"answer_id":25605401,"question_id":25605254,"body_markdown":"Most Possible condition should go to the if and then if else and so on. ","title":"What is the different in putting most possible true condition in if, else-if or else","body":"<p>Most Possible condition should go to the if and then if else and so on. </p>\n"},{"tags":[],"owner":{"account_id":4967023,"reputation":606,"user_id":3995960,"accept_rate":75,"display_name":"Kishan Gupta"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1409572829,"creation_date":1409572829,"answer_id":25605411,"question_id":25605254,"body_markdown":"It&#39;s good to write the most common condition in the very first level so that if that condition is true or false will be treated first in less time.\r\n\r\nIf you put the most frequent condition in middle (else..if) or in last (else), then it will take time to reach to that condition statement because it needs to check every condition statement.","title":"What is the different in putting most possible true condition in if, else-if or else","body":"<p>It's good to write the most common condition in the very first level so that if that condition is true or false will be treated first in less time.</p>\n\n<p>If you put the most frequent condition in middle (else..if) or in last (else), then it will take time to reach to that condition statement because it needs to check every condition statement.</p>\n"},{"comments":[{"owner":{"account_id":4826640,"reputation":25377,"user_id":3895960,"accept_rate":97,"display_name":"Dici"},"score":0,"creation_date":1409574184,"post_id":25605466,"comment_id":39999245,"body_markdown":"Your first point took my attention but I don&#39;t get it. What do you call a final branch and why is it slower than a conditional jump (if I undestand well) ?","body":"Your first point took my attention but I don&#39;t get it. What do you call a final branch and why is it slower than a conditional jump (if I undestand well) ?"},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1608108270,"post_id":25605466,"comment_id":115478884,"body_markdown":"@Dici A conditional branch plus an unconditional branch is slower than a conditional branch.","body":"@Dici A conditional branch plus an unconditional branch is slower than a conditional branch."}],"tags":[],"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"comment_count":2,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1409573046,"creation_date":1409573046,"answer_id":25605466,"question_id":25605254,"body_markdown":"There&#39;s a bit more to this than you&#39;re being told.\r\n\r\n1. &#39;if&#39; versus &#39;else&#39;: If a condition and its converse are not equally likely, you should handle the more likely condition in the &#39;else&#39; block, not the &#39;if&#39; block. The &#39;if&#39; block requires a conditional jump which isn&#39;t taken and a final branch around the &#39;else&#39; block; the &#39;else&#39; block requires a condition branch which is taken and no final branch at all.\r\n\r\n2. &#39;if&#39; versus &#39;else if&#39; versus &#39;else&#39;: Obviously you should handle the most common case in the &#39;if&#39; block, to avoid the second test. The same considerations as at (1) determine that the more common case as between the final &#39;else if&#39; and the final &#39;else&#39; should be handled in the final &#39;else&#39; block.\r\n\r\nHaving said all that, unless the tests are non-trivial, or the contents of all these blocks are utterly trivial, it it is rather unlikely that  any of it will make a discernible difference.","title":"What is the different in putting most possible true condition in if, else-if or else","body":"<p>There's a bit more to this than you're being told.</p>\n\n<ol>\n<li><p>'if' versus 'else': If a condition and its converse are not equally likely, you should handle the more likely condition in the 'else' block, not the 'if' block. The 'if' block requires a conditional jump which isn't taken and a final branch around the 'else' block; the 'else' block requires a condition branch which is taken and no final branch at all.</p></li>\n<li><p>'if' versus 'else if' versus 'else': Obviously you should handle the most common case in the 'if' block, to avoid the second test. The same considerations as at (1) determine that the more common case as between the final 'else if' and the final 'else' should be handled in the final 'else' block.</p></li>\n</ol>\n\n<p>Having said all that, unless the tests are non-trivial, or the contents of all these blocks are utterly trivial, it it is rather unlikely that  any of it will make a discernible difference.</p>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1689376204,"creation_date":1409573680,"answer_id":25605646,"question_id":25605254,"body_markdown":"&gt; Is there is any different to put most possible true condition in if, else-if or else condition\r\n\r\nActually, the answer with Java is that &quot;it depends&quot;.\r\n\r\nYou see, when you run Java code, the JVM starts out by using the using the interpreter while gathering statistics.  One of the statistics that may be recorded is which of the paths in a branch instruction is most often taken.  These statistics *could* then used by the JIT compiler to influence code reordering, where this does not alter the compiled code&#39;s semantics.\r\n\r\nSo if you were to execute your code, with two different datasets (i.e. &quot;mostly zero&quot; and &quot;mostly non-zero&quot;), it is possible that the JIT compiler would compile the code differently.\r\n\r\nWhether it can actually make this optimization depends on whether it can figure out that the reordering is valid.  For example, can it deduce that the conditions being tested are mutually exclusive?\r\n\r\n--------------\r\n\r\nSo how does this affect the complexity?  Well ... lets do the sums for your simplified example, assuming that the JIT compiler doesn&#39;t do anything &quot;smart&quot;.  And assume that we are not just dealing with arrays of length 10 (which renders the discussion of complexity moot).\r\n\r\nConsider this:\r\n\r\n  - For each zero, the loop does one test and one increment - say 2 operations.\r\n\r\n  - For each non-zero element, the loop does two tests and one increment - say 3 operations.\r\n\r\nSo that is roughly 2*N operations for N elements when all zero versus 3*N operations when all non-zero.  But both are `O(N)` ... so the Big O complexity is not affected.\r\n\r\n(OK I left some stuff out ... but you get the picture.  One of the cases is going to be faster, but the *complexity* is not affected.)","title":"What is the different in putting most possible true condition in if, else-if or else","body":"<blockquote>\n<p>Is there is any different to put most possible true condition in if, else-if or else condition</p>\n</blockquote>\n<p>Actually, the answer with Java is that &quot;it depends&quot;.</p>\n<p>You see, when you run Java code, the JVM starts out by using the using the interpreter while gathering statistics.  One of the statistics that may be recorded is which of the paths in a branch instruction is most often taken.  These statistics <em>could</em> then used by the JIT compiler to influence code reordering, where this does not alter the compiled code's semantics.</p>\n<p>So if you were to execute your code, with two different datasets (i.e. &quot;mostly zero&quot; and &quot;mostly non-zero&quot;), it is possible that the JIT compiler would compile the code differently.</p>\n<p>Whether it can actually make this optimization depends on whether it can figure out that the reordering is valid.  For example, can it deduce that the conditions being tested are mutually exclusive?</p>\n<hr />\n<p>So how does this affect the complexity?  Well ... lets do the sums for your simplified example, assuming that the JIT compiler doesn't do anything &quot;smart&quot;.  And assume that we are not just dealing with arrays of length 10 (which renders the discussion of complexity moot).</p>\n<p>Consider this:</p>\n<ul>\n<li><p>For each zero, the loop does one test and one increment - say 2 operations.</p>\n</li>\n<li><p>For each non-zero element, the loop does two tests and one increment - say 3 operations.</p>\n</li>\n</ul>\n<p>So that is roughly 2<em>N operations for N elements when all zero versus 3</em>N operations when all non-zero.  But both are <code>O(N)</code> ... so the Big O complexity is not affected.</p>\n<p>(OK I left some stuff out ... but you get the picture.  One of the cases is going to be faster, but the <em>complexity</em> is not affected.)</p>\n"}],"owner":{"account_id":1319802,"reputation":1332,"user_id":1265850,"accept_rate":79,"display_name":"R D"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":506,"favorite_count":0,"down_vote_count":2,"up_vote_count":6,"accepted_answer_id":25605646,"answer_count":7,"score":4,"last_activity_date":1689376204,"creation_date":1409572261,"question_id":25605254,"body_markdown":"Is there is any difference to put most probable condition in if, else-if or else condition\r\n\r\n\r\nEx :\r\n\r\n    int[] a = {2,4,6,9,10,0,30,0,31,66}\r\n    int firstCase = 0, secondCase = 0, thirdCase = 0;\r\n    for( int i=0;i&lt;10;i++ ){\r\n        int m = a[i] % 5;\r\n        if(m &lt; 3) {\r\n            firstCase++;\r\n        } else if(m == 3) {\r\n            secondCase++;\r\n        } else {\r\n            thirdCase++;\r\n        }\r\n    }\r\n\r\nWhat is the difference of the execution time with input \r\n\r\n    int[] a = {3,6,8,7,0,0,0,0,0,0}","title":"What is the different in putting most possible true condition in if, else-if or else","body":"<p>Is there is any difference to put most probable condition in if, else-if or else condition</p>\n\n<p>Ex :</p>\n\n<pre><code>int[] a = {2,4,6,9,10,0,30,0,31,66}\nint firstCase = 0, secondCase = 0, thirdCase = 0;\nfor( int i=0;i&lt;10;i++ ){\n    int m = a[i] % 5;\n    if(m &lt; 3) {\n        firstCase++;\n    } else if(m == 3) {\n        secondCase++;\n    } else {\n        thirdCase++;\n    }\n}\n</code></pre>\n\n<p>What is the difference of the execution time with input </p>\n\n<pre><code>int[] a = {3,6,8,7,0,0,0,0,0,0}\n</code></pre>\n"},{"tags":["java","generics","jackson","jackson-databind"],"answers":[{"comments":[{"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"score":1,"creation_date":1622921621,"post_id":67844166,"comment_id":119932318,"body_markdown":"Probably should put a type check when creating the converter instance, in case a different type of converter is used somewhere that also has the `contentAs` annotation, so the wrong converter doesn&#39;t get used.  e.g. `if (OrderedSetConverter.class.equals(implClass)) { ... }`","body":"Probably should put a type check when creating the converter instance, in case a different type of converter is used somewhere that also has the <code>contentAs</code> annotation, so the wrong converter doesn&#39;t get used.  e.g. <code>if (OrderedSetConverter.class.equals(implClass)) { ... }</code>"},{"owner":{"account_id":21287,"reputation":37465,"user_id":51591,"accept_rate":82,"display_name":"Michał Ziober"},"score":0,"creation_date":1622922980,"post_id":67844166,"comment_id":119932615,"body_markdown":"@M.Justin, I just wanted to show simple usage. Of course you can add extra checking if needed. Also, you do not need to use `contentAs` field from annotation. For example, you can try to read it directly from the field: `annotated` parameter.","body":"@M.Justin, I just wanted to show simple usage. Of course you can add extra checking if needed. Also, you do not need to use <code>contentAs</code> field from annotation. For example, you can try to read it directly from the field: <code>annotated</code> parameter."},{"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"score":1,"creation_date":1622923047,"post_id":67844166,"comment_id":119932625,"body_markdown":"Indeed.  I got that working and am in the middle of typing it up right now, actually.","body":"Indeed.  I got that working and am in the middle of typing it up right now, actually."}],"tags":[],"owner":{"account_id":21287,"reputation":37465,"user_id":51591,"accept_rate":82,"display_name":"Michał Ziober"},"comment_count":3,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1622842004,"creation_date":1622842004,"answer_id":67844166,"question_id":67758020,"body_markdown":"`OrderedSetConverter` does not know which type must be instantiated during deserialisation process. We need to instruct deserialisation process which type to use. If you want to keep converter generic you need to provide this information when converter is created. To extend default behaviour you need to implement custom `com.fasterxml.jackson.databind.cfg.HandlerInstantiator`:\r\n```java\r\nclass ConverterHandlerInstantiator extends HandlerInstantiator {\r\n\r\n\t@Override\r\n\tpublic Converter&lt;?, ?&gt; converterInstance(MapperConfig&lt;?&gt; config, Annotated annotated, Class&lt;?&gt; implClass) {\r\n\t\tif (config instanceof DeserializationConfig) {\r\n\t\t\tJsonDeserialize jsonDeserialize = annotated.getAnnotation(JsonDeserialize.class);\r\n\t\t\tClass contentAs = jsonDeserialize.contentAs();\r\n\t\t\tif (contentAs != Void.class) {\r\n\t\t\t\treturn new OrderedSetConverter&lt;&gt;(contentAs);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn super.converterInstance(config, annotated, implClass);\r\n\t}\r\n\r\n\t@Override\r\n\tpublic JsonDeserializer&lt;?&gt; deserializerInstance(DeserializationConfig config, Annotated annotated, Class&lt;?&gt; deserClass) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic KeyDeserializer keyDeserializerInstance(DeserializationConfig config, Annotated annotated, Class&lt;?&gt; keyDeserClass) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic JsonSerializer&lt;?&gt; serializerInstance(SerializationConfig config, Annotated annotated, Class&lt;?&gt; serClass) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic TypeResolverBuilder&lt;?&gt; typeResolverBuilderInstance(MapperConfig&lt;?&gt; config, Annotated annotated, Class&lt;?&gt; builderClass) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic TypeIdResolver typeIdResolverInstance(MapperConfig&lt;?&gt; config, Annotated annotated, Class&lt;?&gt; resolverClass) {\r\n\t\treturn null;\r\n\t}\r\n}\r\n```\r\nAs you noticed above code uses `contentAs` property from `JsonDeserialize` annotation. We need to specify it in your class:\r\n\r\n    class MyType {\r\n    \t@JsonSerialize(converter = OrderedSetConverter.class)\r\n    \t@JsonDeserialize(converter = OrderedSetConverter.class, contentAs = DayOfWeek.class)\r\n    \tprivate Set&lt;DayOfWeek&gt; myValues;\r\n    }\r\n\r\nThis value is not needed when we serialise objects, so, we can skip it. Now, we need to register our custom instantiator:\r\n\r\n    ObjectMapper mapper = new ObjectMapper();\r\n    mapper.setHandlerInstantiator(new ConverterHandlerInstantiator());\r\n\r\nAt the end, our generic converter:\r\n```java\r\nclass OrderedSetConverter&lt;E extends Comparable&lt;? super E&gt;&gt; extends StdConverter&lt;Set&lt;E&gt;, Set&lt;E&gt;&gt; {\r\n\tprivate final Class&lt;E&gt; contentClass;\r\n\r\n\tOrderedSetConverter() {\r\n\t\tthis(null);\r\n\t}\r\n\r\n\tpublic OrderedSetConverter(Class&lt;E&gt; contentClass) {\r\n\t\tthis.contentClass = contentClass;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic Set&lt;E&gt; convert(Set&lt;E&gt; value) {\r\n\t\treturn value == null ? null : value.stream()\r\n\t\t\t\t.sorted(Comparator.nullsLast(Comparator.naturalOrder()))\r\n\t\t\t\t.collect(Collectors.toCollection(LinkedHashSet::new));\r\n\t}\r\n\r\n\t@Override\r\n\tpublic JavaType getInputType(TypeFactory typeFactory) {\r\n\t\tif (contentClass == null) {\r\n\t\t\treturn super.getInputType(typeFactory);\r\n\t\t}\r\n\t\treturn typeFactory.constructCollectionType(Set.class, contentClass);\r\n\t}\r\n}\r\n```","title":"How can a Jackson converter be written to handle generic collection types?","body":"<p><code>OrderedSetConverter</code> does not know which type must be instantiated during deserialisation process. We need to instruct deserialisation process which type to use. If you want to keep converter generic you need to provide this information when converter is created. To extend default behaviour you need to implement custom <code>com.fasterxml.jackson.databind.cfg.HandlerInstantiator</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class ConverterHandlerInstantiator extends HandlerInstantiator {\n\n    @Override\n    public Converter&lt;?, ?&gt; converterInstance(MapperConfig&lt;?&gt; config, Annotated annotated, Class&lt;?&gt; implClass) {\n        if (config instanceof DeserializationConfig) {\n            JsonDeserialize jsonDeserialize = annotated.getAnnotation(JsonDeserialize.class);\n            Class contentAs = jsonDeserialize.contentAs();\n            if (contentAs != Void.class) {\n                return new OrderedSetConverter&lt;&gt;(contentAs);\n            }\n        }\n        return super.converterInstance(config, annotated, implClass);\n    }\n\n    @Override\n    public JsonDeserializer&lt;?&gt; deserializerInstance(DeserializationConfig config, Annotated annotated, Class&lt;?&gt; deserClass) {\n        return null;\n    }\n\n    @Override\n    public KeyDeserializer keyDeserializerInstance(DeserializationConfig config, Annotated annotated, Class&lt;?&gt; keyDeserClass) {\n        return null;\n    }\n\n    @Override\n    public JsonSerializer&lt;?&gt; serializerInstance(SerializationConfig config, Annotated annotated, Class&lt;?&gt; serClass) {\n        return null;\n    }\n\n    @Override\n    public TypeResolverBuilder&lt;?&gt; typeResolverBuilderInstance(MapperConfig&lt;?&gt; config, Annotated annotated, Class&lt;?&gt; builderClass) {\n        return null;\n    }\n\n    @Override\n    public TypeIdResolver typeIdResolverInstance(MapperConfig&lt;?&gt; config, Annotated annotated, Class&lt;?&gt; resolverClass) {\n        return null;\n    }\n}\n</code></pre>\n<p>As you noticed above code uses <code>contentAs</code> property from <code>JsonDeserialize</code> annotation. We need to specify it in your class:</p>\n<pre><code>class MyType {\n    @JsonSerialize(converter = OrderedSetConverter.class)\n    @JsonDeserialize(converter = OrderedSetConverter.class, contentAs = DayOfWeek.class)\n    private Set&lt;DayOfWeek&gt; myValues;\n}\n</code></pre>\n<p>This value is not needed when we serialise objects, so, we can skip it. Now, we need to register our custom instantiator:</p>\n<pre><code>ObjectMapper mapper = new ObjectMapper();\nmapper.setHandlerInstantiator(new ConverterHandlerInstantiator());\n</code></pre>\n<p>At the end, our generic converter:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class OrderedSetConverter&lt;E extends Comparable&lt;? super E&gt;&gt; extends StdConverter&lt;Set&lt;E&gt;, Set&lt;E&gt;&gt; {\n    private final Class&lt;E&gt; contentClass;\n\n    OrderedSetConverter() {\n        this(null);\n    }\n\n    public OrderedSetConverter(Class&lt;E&gt; contentClass) {\n        this.contentClass = contentClass;\n    }\n\n    @Override\n    public Set&lt;E&gt; convert(Set&lt;E&gt; value) {\n        return value == null ? null : value.stream()\n                .sorted(Comparator.nullsLast(Comparator.naturalOrder()))\n                .collect(Collectors.toCollection(LinkedHashSet::new));\n    }\n\n    @Override\n    public JavaType getInputType(TypeFactory typeFactory) {\n        if (contentClass == null) {\n            return super.getInputType(typeFactory);\n        }\n        return typeFactory.constructCollectionType(Set.class, contentClass);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1622924976,"creation_date":1622924976,"answer_id":67853679,"question_id":67758020,"body_markdown":"[Another answer](https://stackoverflow.com/a/67844166/1108305) pointed out that a custom Jackson [`HandlerInstantiator`](https://fasterxml.github.io/jackson-databind/javadoc/2.12/com/fasterxml/jackson/databind/cfg/HandlerInstantiator.html) could be used to set a type variable within the `Converter` at object construction time.  That answer required manually specifying the collection type using [`@JsonDeserialize.contentAs`](https://fasterxml.github.io/jackson-databind/javadoc/2.12/com/fasterxml/jackson/databind/annotation/JsonDeserialize.html#contentAs--).  After experimenting with this approach, I found a way to automatically deduce the type variable within the `HandlerInstantiator`:\r\n\r\n**`HandlerInstantiator`**\r\n```lang-java\r\npublic class OrderedSetConverterHandlerInstantiator extends HandlerInstantiator {\r\n    @Override\r\n    public Converter&lt;?, ?&gt; converterInstance(\r\n            MapperConfig&lt;?&gt; config, Annotated annotated, Class&lt;?&gt; implClass) {\r\n        if (OrderedSetJacksonConverter.class.equals(implClass)) {\r\n            return new OrderedSetJacksonConverter&lt;&gt;(\r\n                    getSetContentType(config, annotated));\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    private JavaType getSetContentType(MapperConfig&lt;?&gt; config, Annotated annotated) {\r\n        Type setType = getPropertyType(config, annotated);\r\n        return TypeFactory.defaultInstance().constructType(setType).getContentType();\r\n    }\r\n\r\n    private Type getPropertyType(MapperConfig&lt;?&gt; config, Annotated annotated) {\r\n        // TODO: Enhance to handle other cases, such as annotated constructor parameter\r\n        BeanPropertyDefinition beanPropertyDefinition =\r\n                SimpleBeanPropertyDefinition.construct(config, \r\n                        (AnnotatedMember) annotated);\r\n        AnnotatedMember setter = beanPropertyDefinition.getSetter();\r\n        AnnotatedMember getter = beanPropertyDefinition.getGetter();\r\n        AnnotatedMember field = beanPropertyDefinition.getField();\r\n\r\n        Type setType;\r\n        if (setter != null) {\r\n            setType = ((Method) setter.getMember()).getGenericParameterTypes()[0];\r\n        } else if (getter != null) {\r\n            setType = ((Method) getter.getMember()).getGenericReturnType();\r\n        } else if (field != null) {\r\n            setType = ((Field) field.getMember()).getGenericType();\r\n        } else {\r\n            throw new UnsupportedOperationException(\r\n                    &quot;Annotated type not yet supported: &quot; + annotated.getClass());\r\n        }\r\n        return setType;\r\n    }\r\n    \r\n    // Implement other required methods such as serializerInstance to return null\r\n}\r\n```\r\n\r\n**`Converter`**\r\n```lang-java\r\npublic class OrderedSetConverter&lt;T extends Comparable&lt;? super T&gt;&gt; \r\n        extends StdConverter&lt;Set&lt;T&gt;, Set&lt;T&gt;&gt; {\r\n    private final JavaType contentType;\r\n\r\n    public OrderedSetJacksonConverter(JavaType contentType) {\r\n        this.contentType = contentType;\r\n    }\r\n\r\n    @Override\r\n    public Set&lt;T&gt; convert(Set&lt;T&gt; value) {\r\n        return value == null ? null : value.stream()\r\n                .sorted(Comparator.nullsLast(Comparator.naturalOrder()))\r\n                .collect(Collectors.toCollection(LinkedHashSet::new));\r\n    }\r\n\r\n    @Override\r\n    public JavaType getInputType(TypeFactory typeFactory) {\r\n        return typeFactory.constructCollectionType(Set.class, contentType);\r\n    }\r\n\r\n    @Override\r\n    public JavaType getOutputType(TypeFactory typeFactory) {\r\n        return typeFactory.constructCollectionType(Set.class, contentType);\r\n    }\r\n}\r\n```\r\n\r\n**`ObjectMapper` configuration**\r\n```lang-java\r\nJsonMapper jsonMapper = JsonMapper.builder()\r\n            .handlerInstantiator(new OrderedSetConverterHandlerInstantiator())\r\n```\r\n\r\nOne clunky thing about the solution is the way the property type is being determined, as it&#39;s manually iterating over all the possible annotated element types the [`Annotated`](https://fasterxml.github.io/jackson-databind/javadoc/2.12/com/fasterxml/jackson/databind/introspect/Annotated.html) value might be (getter/setter/field) to determine the element type.  Hopefully there&#39;s a cleaner, more idiomatic approach, though if there is I haven&#39;t found it yet.\r\n\r\n---\r\n\r\n## Registering the converter in the [Spring framework](https://spring.io)\r\n\r\nSpring Web ships with its own `HandlerInstantiator`, [`SpringHandlerInstantiator`](https://docs.spring.io/spring-framework/docs/5.3.7/javadoc-api/org/springframework/http/converter/json/SpringHandlerInstantiator.html), which is automatically applied to the `ObjectMapper` created by [`Jackson2ObjectMapperBuilder`](https://docs.spring.io/spring-framework/docs/5.3.7/javadoc-api/org/springframework/http/converter/json/Jackson2ObjectMapperBuilder.html).  This handler uses any relevant beans in the classpath for the types supplied by the `HandlerInstantiator`.\r\n\r\nIn order to retain this behavior while still using the custom type, a `HandlerInstantiator` class could be written which uses the custom converter when appropriate, otherwise fall back to the default `SpringHandlerInstantiator`.  One way to implement this is as follows: \r\n\r\n```lang-java\r\npublic class DelegatingHandlerInstantiator extends SpringHandlerInstantiator {\r\n    private final OrderedSetConverterHandlerInstantiator handler =\r\n            new OrderedSetConverterHandlerInstantiator();\r\n\r\n    public DelegatingHandlerInstantiator(AutowireCapableBeanFactory beanFactory) {\r\n        super(beanFactory);\r\n    }\r\n\r\n    @Override\r\n    public Converter&lt;?, ?&gt; converterInstance(\r\n            MapperConfig&lt;?&gt; config, Annotated annotated, Class&lt;?&gt; implClass) {\r\n        Converter&lt;?, ?&gt; converter =\r\n                handler.converterInstance(config, annotated, implClass);\r\n        return Objects.requireNonNullElseGet(converter,\r\n                () -&gt; super.converterInstance(config, annotated, implClass));\r\n    }\r\n}\r\n```\r\n\r\nThe `Jackson2ObjectMapperBuilder` used by the application should then be configured to use this handler.  If the application is a [Spring Boot](https://spring.io/projects/spring-boot) application, a [`Jackson2ObjectMapperBuilderCustomizer`](https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/autoconfigure/jackson/Jackson2ObjectMapperBuilderCustomizer.html) bean can be created to set the `HandlerInstantiator` in the `Jackson2ObjectMapperBuilder` bean.\r\n\r\n```lang-java\r\n@Configuration\r\npublic class JacksonConfig {\r\n    @Bean\r\n    public Jackson2ObjectMapperBuilderCustomizer jacksonCustomizer(\r\n            AutowireCapableBeanFactory beanFactory) {\r\n        return b -&gt; b.handlerInstantiator(\r\n                new DelegatingHandlerInstantiator(beanFactory));\r\n    }\r\n}\r\n```\r\n","title":"How can a Jackson converter be written to handle generic collection types?","body":"<p><a href=\"https://stackoverflow.com/a/67844166/1108305\">Another answer</a> pointed out that a custom Jackson <a href=\"https://fasterxml.github.io/jackson-databind/javadoc/2.12/com/fasterxml/jackson/databind/cfg/HandlerInstantiator.html\" rel=\"nofollow noreferrer\"><code>HandlerInstantiator</code></a> could be used to set a type variable within the <code>Converter</code> at object construction time.  That answer required manually specifying the collection type using <a href=\"https://fasterxml.github.io/jackson-databind/javadoc/2.12/com/fasterxml/jackson/databind/annotation/JsonDeserialize.html#contentAs--\" rel=\"nofollow noreferrer\"><code>@JsonDeserialize.contentAs</code></a>.  After experimenting with this approach, I found a way to automatically deduce the type variable within the <code>HandlerInstantiator</code>:</p>\n<p><strong><code>HandlerInstantiator</code></strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>public class OrderedSetConverterHandlerInstantiator extends HandlerInstantiator {\n    @Override\n    public Converter&lt;?, ?&gt; converterInstance(\n            MapperConfig&lt;?&gt; config, Annotated annotated, Class&lt;?&gt; implClass) {\n        if (OrderedSetJacksonConverter.class.equals(implClass)) {\n            return new OrderedSetJacksonConverter&lt;&gt;(\n                    getSetContentType(config, annotated));\n        } else {\n            return null;\n        }\n    }\n\n    private JavaType getSetContentType(MapperConfig&lt;?&gt; config, Annotated annotated) {\n        Type setType = getPropertyType(config, annotated);\n        return TypeFactory.defaultInstance().constructType(setType).getContentType();\n    }\n\n    private Type getPropertyType(MapperConfig&lt;?&gt; config, Annotated annotated) {\n        // TODO: Enhance to handle other cases, such as annotated constructor parameter\n        BeanPropertyDefinition beanPropertyDefinition =\n                SimpleBeanPropertyDefinition.construct(config, \n                        (AnnotatedMember) annotated);\n        AnnotatedMember setter = beanPropertyDefinition.getSetter();\n        AnnotatedMember getter = beanPropertyDefinition.getGetter();\n        AnnotatedMember field = beanPropertyDefinition.getField();\n\n        Type setType;\n        if (setter != null) {\n            setType = ((Method) setter.getMember()).getGenericParameterTypes()[0];\n        } else if (getter != null) {\n            setType = ((Method) getter.getMember()).getGenericReturnType();\n        } else if (field != null) {\n            setType = ((Field) field.getMember()).getGenericType();\n        } else {\n            throw new UnsupportedOperationException(\n                    &quot;Annotated type not yet supported: &quot; + annotated.getClass());\n        }\n        return setType;\n    }\n    \n    // Implement other required methods such as serializerInstance to return null\n}\n</code></pre>\n<p><strong><code>Converter</code></strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>public class OrderedSetConverter&lt;T extends Comparable&lt;? super T&gt;&gt; \n        extends StdConverter&lt;Set&lt;T&gt;, Set&lt;T&gt;&gt; {\n    private final JavaType contentType;\n\n    public OrderedSetJacksonConverter(JavaType contentType) {\n        this.contentType = contentType;\n    }\n\n    @Override\n    public Set&lt;T&gt; convert(Set&lt;T&gt; value) {\n        return value == null ? null : value.stream()\n                .sorted(Comparator.nullsLast(Comparator.naturalOrder()))\n                .collect(Collectors.toCollection(LinkedHashSet::new));\n    }\n\n    @Override\n    public JavaType getInputType(TypeFactory typeFactory) {\n        return typeFactory.constructCollectionType(Set.class, contentType);\n    }\n\n    @Override\n    public JavaType getOutputType(TypeFactory typeFactory) {\n        return typeFactory.constructCollectionType(Set.class, contentType);\n    }\n}\n</code></pre>\n<p><strong><code>ObjectMapper</code> configuration</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>JsonMapper jsonMapper = JsonMapper.builder()\n            .handlerInstantiator(new OrderedSetConverterHandlerInstantiator())\n</code></pre>\n<p>One clunky thing about the solution is the way the property type is being determined, as it's manually iterating over all the possible annotated element types the <a href=\"https://fasterxml.github.io/jackson-databind/javadoc/2.12/com/fasterxml/jackson/databind/introspect/Annotated.html\" rel=\"nofollow noreferrer\"><code>Annotated</code></a> value might be (getter/setter/field) to determine the element type.  Hopefully there's a cleaner, more idiomatic approach, though if there is I haven't found it yet.</p>\n<hr />\n<h2>Registering the converter in the <a href=\"https://spring.io\" rel=\"nofollow noreferrer\">Spring framework</a></h2>\n<p>Spring Web ships with its own <code>HandlerInstantiator</code>, <a href=\"https://docs.spring.io/spring-framework/docs/5.3.7/javadoc-api/org/springframework/http/converter/json/SpringHandlerInstantiator.html\" rel=\"nofollow noreferrer\"><code>SpringHandlerInstantiator</code></a>, which is automatically applied to the <code>ObjectMapper</code> created by <a href=\"https://docs.spring.io/spring-framework/docs/5.3.7/javadoc-api/org/springframework/http/converter/json/Jackson2ObjectMapperBuilder.html\" rel=\"nofollow noreferrer\"><code>Jackson2ObjectMapperBuilder</code></a>.  This handler uses any relevant beans in the classpath for the types supplied by the <code>HandlerInstantiator</code>.</p>\n<p>In order to retain this behavior while still using the custom type, a <code>HandlerInstantiator</code> class could be written which uses the custom converter when appropriate, otherwise fall back to the default <code>SpringHandlerInstantiator</code>.  One way to implement this is as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class DelegatingHandlerInstantiator extends SpringHandlerInstantiator {\n    private final OrderedSetConverterHandlerInstantiator handler =\n            new OrderedSetConverterHandlerInstantiator();\n\n    public DelegatingHandlerInstantiator(AutowireCapableBeanFactory beanFactory) {\n        super(beanFactory);\n    }\n\n    @Override\n    public Converter&lt;?, ?&gt; converterInstance(\n            MapperConfig&lt;?&gt; config, Annotated annotated, Class&lt;?&gt; implClass) {\n        Converter&lt;?, ?&gt; converter =\n                handler.converterInstance(config, annotated, implClass);\n        return Objects.requireNonNullElseGet(converter,\n                () -&gt; super.converterInstance(config, annotated, implClass));\n    }\n}\n</code></pre>\n<p>The <code>Jackson2ObjectMapperBuilder</code> used by the application should then be configured to use this handler.  If the application is a <a href=\"https://spring.io/projects/spring-boot\" rel=\"nofollow noreferrer\">Spring Boot</a> application, a <a href=\"https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/autoconfigure/jackson/Jackson2ObjectMapperBuilderCustomizer.html\" rel=\"nofollow noreferrer\"><code>Jackson2ObjectMapperBuilderCustomizer</code></a> bean can be created to set the <code>HandlerInstantiator</code> in the <code>Jackson2ObjectMapperBuilder</code> bean.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\npublic class JacksonConfig {\n    @Bean\n    public Jackson2ObjectMapperBuilderCustomizer jacksonCustomizer(\n            AutowireCapableBeanFactory beanFactory) {\n        return b -&gt; b.handlerInstantiator(\n                new DelegatingHandlerInstantiator(beanFactory));\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689375136,"creation_date":1689287706,"answer_id":76683658,"question_id":67758020,"body_markdown":"One solution would be to use a [`JsonSerializer`](https://javadoc.io/static/com.fasterxml.jackson.core/jackson-databind/2.15.2/com/fasterxml/jackson/databind/JsonSerializer.html), rather than a [`Converter`](https://javadoc.io/static/com.fasterxml.jackson.core/jackson-databind/2.15.2/com/fasterxml/jackson/databind/util/Converter.html).\r\n\r\n```lang-java\r\npublic class MyType {\r\n    @JsonSerialize(using = OrderedSetSerializer.class)\r\n    private Set&lt;DayOfWeek&gt; myValues;\r\n}\r\n```\r\n\r\n```lang-java\r\nimport com.fasterxml.jackson.core.JsonGenerator;\r\nimport com.fasterxml.jackson.databind.*;\r\nimport com.fasterxml.jackson.databind.ser.ContextualSerializer;\r\nimport com.fasterxml.jackson.databind.ser.std.CollectionSerializer;\r\nimport com.fasterxml.jackson.databind.ser.std.StdSerializer;\r\n\r\nimport java.io.IOException;\r\nimport java.util.Objects;\r\nimport java.util.Set;\r\n\r\npublic class OrderedSetSerializer&lt;T extends Comparable&lt;? super T&gt;&gt; \r\n        extends StdSerializer&lt;Set&lt;T&gt;&gt; implements ContextualSerializer {\r\n    private final CollectionSerializer collectionSerializer;\r\n\r\n    /**\r\n     * For Jackson to instantiate and call \r\n     * {@link #createContextual(SerializerProvider, BeanProperty)}.\r\n     */\r\n    public OrderedSetSerializer() {\r\n        super(Set.class, false);\r\n        this.collectionSerializer = null;\r\n    }\r\n\r\n    public OrderedSetSerializer(JavaType valueType, \r\n                                CollectionSerializer collectionSerializer) {\r\n        super(valueType);\r\n        this.collectionSerializer =\r\n                Objects.requireNonNull(collectionSerializer);\r\n    }\r\n\r\n    @Override\r\n    public void serialize(Set&lt;T&gt; value, JsonGenerator gen, \r\n                          SerializerProvider provider) throws IOException {\r\n        Objects.requireNonNull(collectionSerializer,\r\n                &quot;No-arg OrderedSetSerializer cannot be used for serialization, and exists for createContextual&quot;);\r\n\r\n        Set&lt;T&gt; sorted = value == null ? null : value.stream()\r\n                .sorted(Comparator.nullsLast(Comparator.naturalOrder()))\r\n                .collect(Collectors.toCollection(LinkedHashSet::new));\r\n\r\n        collectionSerializer.serialize(sorted, gen, provider);\r\n    }\r\n\r\n    @Override\r\n    public JsonSerializer&lt;?&gt; createContextual(SerializerProvider prov, \r\n                                              BeanProperty property) throws JsonMappingException {\r\n        CollectionSerializer collectionSerializer = \r\n        new CollectionSerializer(property.getType(), false,\r\n                prov.findTypeSerializer(property.getType()),\r\n                prov.findValueSerializer(property.getType().findTypeParameters(Set.class)[0]));\r\n        return new OrderedSetSerializer&lt;&gt;(property.getType(), collectionSerializer);\r\n    }\r\n}\r\n```\r\n\r\nLikewise, to enforce deserialization order, a  [`JsonDeserializer`](https://javadoc.io/static/com.fasterxml.jackson.core/jackson-databind/2.15.2/com/fasterxml/jackson/databind/JsonDeserializer.html) can be used.\r\n\r\n```lang-java\r\npublic class MyType {\r\n    @JsonDeserialize(using = OrderedSetDeserializer.class)\r\n    private Set&lt;DayOfWeek&gt; myValues;\r\n}\r\n```\r\n\r\n```lang-java\r\nimport com.fasterxml.jackson.core.JsonParser;\r\nimport com.fasterxml.jackson.databind.BeanProperty;\r\nimport com.fasterxml.jackson.databind.DeserializationContext;\r\nimport com.fasterxml.jackson.databind.JavaType;\r\nimport com.fasterxml.jackson.databind.JsonDeserializer;\r\nimport com.fasterxml.jackson.databind.deser.ContextualDeserializer;\r\nimport com.fasterxml.jackson.databind.deser.std.StdDeserializer;\r\n\r\nimport java.io.IOException;\r\nimport java.util.Set;\r\n\r\npublic class OrderedSetDeserializer&lt;T extends Comparable&lt;? super T&gt;&gt; \r\n        extends StdDeserializer&lt;Set&lt;T&gt;&gt; implements ContextualDeserializer {\r\n    /**\r\n     * For Jackson to instantiate and call\r\n     * {@link #createContextual(DeserializationContext, BeanProperty)}.\r\n     */\r\n    public OrderedSetDeserializer() {\r\n        super(Set.class);\r\n    }\r\n\r\n    public OrderedSetDeserializer(JavaType valueType) {\r\n        super(valueType);\r\n    }\r\n\r\n    @Override\r\n    public Set&lt;T&gt; deserialize(JsonParser parser, \r\n                              DeserializationContext context) throws IOException {\r\n        JavaType parameterizedSet = context.getTypeFactory()\r\n                .constructParametricType(Set.class, getValueType().getBindings());\r\n        Set&lt;T&gt; value = context.readValue(parser, parameterizedSet);\r\n\r\n        return value == null ? null : value.stream()\r\n                .sorted(Comparator.nullsLast(Comparator.naturalOrder()))\r\n                .collect(Collectors.toCollection(LinkedHashSet::new));\r\n    }\r\n\r\n    @Override\r\n    public JsonDeserializer&lt;?&gt; createContextual(DeserializationContext context, \r\n                                                BeanProperty property) {\r\n        return new OrderedSetDeserializer&lt;&gt;(context.getContextualType());\r\n    }\r\n}\r\n","title":"How can a Jackson converter be written to handle generic collection types?","body":"<p>One solution would be to use a <a href=\"https://javadoc.io/static/com.fasterxml.jackson.core/jackson-databind/2.15.2/com/fasterxml/jackson/databind/JsonSerializer.html\" rel=\"nofollow noreferrer\"><code>JsonSerializer</code></a>, rather than a <a href=\"https://javadoc.io/static/com.fasterxml.jackson.core/jackson-databind/2.15.2/com/fasterxml/jackson/databind/util/Converter.html\" rel=\"nofollow noreferrer\"><code>Converter</code></a>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class MyType {\n    @JsonSerialize(using = OrderedSetSerializer.class)\n    private Set&lt;DayOfWeek&gt; myValues;\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>import com.fasterxml.jackson.core.JsonGenerator;\nimport com.fasterxml.jackson.databind.*;\nimport com.fasterxml.jackson.databind.ser.ContextualSerializer;\nimport com.fasterxml.jackson.databind.ser.std.CollectionSerializer;\nimport com.fasterxml.jackson.databind.ser.std.StdSerializer;\n\nimport java.io.IOException;\nimport java.util.Objects;\nimport java.util.Set;\n\npublic class OrderedSetSerializer&lt;T extends Comparable&lt;? super T&gt;&gt; \n        extends StdSerializer&lt;Set&lt;T&gt;&gt; implements ContextualSerializer {\n    private final CollectionSerializer collectionSerializer;\n\n    /**\n     * For Jackson to instantiate and call \n     * {@link #createContextual(SerializerProvider, BeanProperty)}.\n     */\n    public OrderedSetSerializer() {\n        super(Set.class, false);\n        this.collectionSerializer = null;\n    }\n\n    public OrderedSetSerializer(JavaType valueType, \n                                CollectionSerializer collectionSerializer) {\n        super(valueType);\n        this.collectionSerializer =\n                Objects.requireNonNull(collectionSerializer);\n    }\n\n    @Override\n    public void serialize(Set&lt;T&gt; value, JsonGenerator gen, \n                          SerializerProvider provider) throws IOException {\n        Objects.requireNonNull(collectionSerializer,\n                &quot;No-arg OrderedSetSerializer cannot be used for serialization, and exists for createContextual&quot;);\n\n        Set&lt;T&gt; sorted = value == null ? null : value.stream()\n                .sorted(Comparator.nullsLast(Comparator.naturalOrder()))\n                .collect(Collectors.toCollection(LinkedHashSet::new));\n\n        collectionSerializer.serialize(sorted, gen, provider);\n    }\n\n    @Override\n    public JsonSerializer&lt;?&gt; createContextual(SerializerProvider prov, \n                                              BeanProperty property) throws JsonMappingException {\n        CollectionSerializer collectionSerializer = \n        new CollectionSerializer(property.getType(), false,\n                prov.findTypeSerializer(property.getType()),\n                prov.findValueSerializer(property.getType().findTypeParameters(Set.class)[0]));\n        return new OrderedSetSerializer&lt;&gt;(property.getType(), collectionSerializer);\n    }\n}\n</code></pre>\n<p>Likewise, to enforce deserialization order, a  <a href=\"https://javadoc.io/static/com.fasterxml.jackson.core/jackson-databind/2.15.2/com/fasterxml/jackson/databind/JsonDeserializer.html\" rel=\"nofollow noreferrer\"><code>JsonDeserializer</code></a> can be used.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class MyType {\n    @JsonDeserialize(using = OrderedSetDeserializer.class)\n    private Set&lt;DayOfWeek&gt; myValues;\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>import com.fasterxml.jackson.core.JsonParser;\nimport com.fasterxml.jackson.databind.BeanProperty;\nimport com.fasterxml.jackson.databind.DeserializationContext;\nimport com.fasterxml.jackson.databind.JavaType;\nimport com.fasterxml.jackson.databind.JsonDeserializer;\nimport com.fasterxml.jackson.databind.deser.ContextualDeserializer;\nimport com.fasterxml.jackson.databind.deser.std.StdDeserializer;\n\nimport java.io.IOException;\nimport java.util.Set;\n\npublic class OrderedSetDeserializer&lt;T extends Comparable&lt;? super T&gt;&gt; \n        extends StdDeserializer&lt;Set&lt;T&gt;&gt; implements ContextualDeserializer {\n    /**\n     * For Jackson to instantiate and call\n     * {@link #createContextual(DeserializationContext, BeanProperty)}.\n     */\n    public OrderedSetDeserializer() {\n        super(Set.class);\n    }\n\n    public OrderedSetDeserializer(JavaType valueType) {\n        super(valueType);\n    }\n\n    @Override\n    public Set&lt;T&gt; deserialize(JsonParser parser, \n                              DeserializationContext context) throws IOException {\n        JavaType parameterizedSet = context.getTypeFactory()\n                .constructParametricType(Set.class, getValueType().getBindings());\n        Set&lt;T&gt; value = context.readValue(parser, parameterizedSet);\n\n        return value == null ? null : value.stream()\n                .sorted(Comparator.nullsLast(Comparator.naturalOrder()))\n                .collect(Collectors.toCollection(LinkedHashSet::new));\n    }\n\n    @Override\n    public JsonDeserializer&lt;?&gt; createContextual(DeserializationContext context, \n                                                BeanProperty property) {\n        return new OrderedSetDeserializer&lt;&gt;(context.getContextualType());\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5907,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":3,"score":5,"last_activity_date":1689375136,"creation_date":1622352831,"question_id":67758020,"body_markdown":"I&#39;ve created a [`Jackson`](https://github.com/FasterXML/jackson) [`Converter`](https://fasterxml.github.io/jackson-databind/javadoc/2.12/com/fasterxml/jackson/databind/util/Converter.html) which orders `Set` elements in ascending sorted order, so that the resulting JSON array is output in sorted order, rather than whatever arbitrary iteration order happens to be used by the given `Set` implementation.  It extended the standard [`StdConverter`](https://fasterxml.github.io/jackson-databind/javadoc/2.12/com/fasterxml/jackson/databind/util/StdConverter.html) class in Jackson, as recommended by the [`Converter` documentation](https://fasterxml.github.io/jackson-databind/javadoc/2.12/com/fasterxml/jackson/databind/util/Converter.html).\r\n\r\n&gt; NOTE: implementors are strongly encouraged to extend [`StdConverter`](https://fasterxml.github.io/jackson-databind/javadoc/2.12/com/fasterxml/jackson/databind/util/StdConverter.html) instead of directly implementing [`Converter`](https://fasterxml.github.io/jackson-databind/javadoc/2.12/com/fasterxml/jackson/databind/util/Converter.html), since that can help with default implementation of typically boiler-plate code.\r\n\r\n```lang-java\r\npublic class OrderedSetConverter\r\n        extends StdConverter&lt;Set&lt;DayOfWeek&gt;, Set&lt;DayOfWeek&gt;&gt; {\r\n    @Override\r\n    public Set&lt;DayOfWeek&gt; convert(Set&lt;DayOfWeek&gt; value) {\r\n        return value == null ? null : value.stream()\r\n                .sorted(Comparator.nullsLast(Comparator.naturalOrder()))\r\n                .collect(Collectors.toCollection(LinkedHashSet::new));\r\n    }\r\n}\r\n\r\npublic class MyType {\r\n    @JsonSerialize(converter = OrderedSetConverter.class)\r\n    private Set&lt;DayOfWeek&gt; myValues;\r\n}\r\n```\r\n\r\nThis works well when the `Converter` is for a specific type of elements to convert (`DayOfWeek` in this example).  However, there is nothing in this implementation that is specific to a particular type; it would work equally well for any [`Comparable`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Comparable.html) type.  Therefore, I&#39;d prefer to have a generic implementation of this converter that can be used for any `Set` of comparables.\r\n\r\nI&#39;ve attempted to implement this by using a straightforward usage of generics:\r\n\r\n```lang-java\r\npublic class OrderedSetConverter&lt;E extends Comparable&lt;? super E&gt;&gt;\r\n        extends StdConverter&lt;Set&lt;E&gt;, Set&lt;E&gt;&gt; {\r\n    @Override\r\n    public Set&lt;E&gt; convert(Set&lt;E&gt; value) {\r\n        return value == null ? null : value.stream()\r\n                .sorted(Comparator.nullsLast(Comparator.naturalOrder()))\r\n                .collect(Collectors.toCollection(LinkedHashSet::new));\r\n    }\r\n}\r\n```\r\n\r\nThis does not work as I would hope, since Jackson tries (and fails) to convert the set&#39;s element type to `Comparable`, rather than the actual type (e.g. `DayOfWeek`).\r\n\r\n```lang-none\r\nException in thread &quot;main&quot; com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Cannot construct instance of `java.lang.Comparable` (no Creators, like default constructor, exist): abstract types either need to be mapped to concrete types, have custom deserializer, or contain additional type information\r\n at [Source: (String)&quot;{&quot;daysOfWeek&quot;:[&quot;MONDAY&quot;,&quot;TUESDAY&quot;,&quot;WEDNESDAY&quot;,&quot;THURSDAY&quot;,&quot;FRIDAY&quot;,&quot;SATURDAY&quot;,&quot;SUNDAY&quot;]}&quot;; line: 1, column: 16] (through reference chain: com.example.MyType[&quot;daysOfWeek&quot;]-&gt;java.util.HashSet[0])\r\n\tat com.fasterxml.jackson.databind.exc.InvalidDefinitionException.from(InvalidDefinitionException.java:67)\r\n\tat com.fasterxml.jackson.databind.DeserializationContext.reportBadDefinition(DeserializationContext.java:1764)\r\n\tat com.fasterxml.jackson.databind.DatabindContext.reportBadDefinition(DatabindContext.java:400)\r\n\tat com.fasterxml.jackson.databind.DeserializationContext.handleMissingInstantiator(DeserializationContext.java:1209)\r\n\tat com.fasterxml.jackson.databind.deser.AbstractDeserializer.deserialize(AbstractDeserializer.java:274)\r\n\tat com.fasterxml.jackson.databind.deser.std.CollectionDeserializer._deserializeFromArray(CollectionDeserializer.java:347)\r\n\tat com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:244)\r\n\tat com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:28)\r\n\tat com.fasterxml.jackson.databind.deser.std.StdDelegatingDeserializer.deserialize(StdDelegatingDeserializer.java:175)\r\n\tat com.fasterxml.jackson.databind.deser.impl.MethodProperty.deserializeAndSet(MethodProperty.java:129)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.vanillaDeserialize(BeanDeserializer.java:324)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:187)\r\n\tat com.fasterxml.jackson.databind.deser.DefaultDeserializationContext.readRootValue(DefaultDeserializationContext.java:322)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4593)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3548)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3516)\r\n```\r\n\r\nAbout the best I&#39;ve been able to come up with is to use this as an abstract superclass, and have a `Converter` of each specific subtype for each type that&#39;s actually used:\r\n\r\n```lang-java\r\npublic abstract class OrderedSetConverter&lt;E extends Comparable&lt;? super E&gt;&gt;\r\n        extends StdConverter&lt;Set&lt;E&gt;, Set&lt;E&gt;&gt; {\r\n    @Override\r\n    public Set&lt;E&gt; convert(Set&lt;E&gt; value) {\r\n        return value == null ? null : value.stream()\r\n                .sorted(Comparator.nullsLast(Comparator.naturalOrder()))\r\n                .collect(Collectors.toCollection(LinkedHashSet::new));\r\n    }\r\n}\r\n\r\npublic class DayOfWeekSetConverter extends OrderedSetConverter&lt;DayOfWeek&gt; { }\r\n\r\npublic class MyType {\r\n    @JsonSerialize(converter = DayOfWeekSetConverter.class)\r\n    private Set&lt;DayOfWeek&gt; myValues;\r\n}\r\n```\r\n\r\nHow can I write a converter for a generic collection type and have Jackson figure out the element type?","title":"How can a Jackson converter be written to handle generic collection types?","body":"<p>I've created a <a href=\"https://github.com/FasterXML/jackson\" rel=\"noreferrer\"><code>Jackson</code></a> <a href=\"https://fasterxml.github.io/jackson-databind/javadoc/2.12/com/fasterxml/jackson/databind/util/Converter.html\" rel=\"noreferrer\"><code>Converter</code></a> which orders <code>Set</code> elements in ascending sorted order, so that the resulting JSON array is output in sorted order, rather than whatever arbitrary iteration order happens to be used by the given <code>Set</code> implementation.  It extended the standard <a href=\"https://fasterxml.github.io/jackson-databind/javadoc/2.12/com/fasterxml/jackson/databind/util/StdConverter.html\" rel=\"noreferrer\"><code>StdConverter</code></a> class in Jackson, as recommended by the <a href=\"https://fasterxml.github.io/jackson-databind/javadoc/2.12/com/fasterxml/jackson/databind/util/Converter.html\" rel=\"noreferrer\"><code>Converter</code> documentation</a>.</p>\n<blockquote>\n<p>NOTE: implementors are strongly encouraged to extend <a href=\"https://fasterxml.github.io/jackson-databind/javadoc/2.12/com/fasterxml/jackson/databind/util/StdConverter.html\" rel=\"noreferrer\"><code>StdConverter</code></a> instead of directly implementing <a href=\"https://fasterxml.github.io/jackson-databind/javadoc/2.12/com/fasterxml/jackson/databind/util/Converter.html\" rel=\"noreferrer\"><code>Converter</code></a>, since that can help with default implementation of typically boiler-plate code.</p>\n</blockquote>\n<pre class=\"lang-java prettyprint-override\"><code>public class OrderedSetConverter\n        extends StdConverter&lt;Set&lt;DayOfWeek&gt;, Set&lt;DayOfWeek&gt;&gt; {\n    @Override\n    public Set&lt;DayOfWeek&gt; convert(Set&lt;DayOfWeek&gt; value) {\n        return value == null ? null : value.stream()\n                .sorted(Comparator.nullsLast(Comparator.naturalOrder()))\n                .collect(Collectors.toCollection(LinkedHashSet::new));\n    }\n}\n\npublic class MyType {\n    @JsonSerialize(converter = OrderedSetConverter.class)\n    private Set&lt;DayOfWeek&gt; myValues;\n}\n</code></pre>\n<p>This works well when the <code>Converter</code> is for a specific type of elements to convert (<code>DayOfWeek</code> in this example).  However, there is nothing in this implementation that is specific to a particular type; it would work equally well for any <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Comparable.html\" rel=\"noreferrer\"><code>Comparable</code></a> type.  Therefore, I'd prefer to have a generic implementation of this converter that can be used for any <code>Set</code> of comparables.</p>\n<p>I've attempted to implement this by using a straightforward usage of generics:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class OrderedSetConverter&lt;E extends Comparable&lt;? super E&gt;&gt;\n        extends StdConverter&lt;Set&lt;E&gt;, Set&lt;E&gt;&gt; {\n    @Override\n    public Set&lt;E&gt; convert(Set&lt;E&gt; value) {\n        return value == null ? null : value.stream()\n                .sorted(Comparator.nullsLast(Comparator.naturalOrder()))\n                .collect(Collectors.toCollection(LinkedHashSet::new));\n    }\n}\n</code></pre>\n<p>This does not work as I would hope, since Jackson tries (and fails) to convert the set's element type to <code>Comparable</code>, rather than the actual type (e.g. <code>DayOfWeek</code>).</p>\n<pre class=\"lang-none prettyprint-override\"><code>Exception in thread &quot;main&quot; com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Cannot construct instance of `java.lang.Comparable` (no Creators, like default constructor, exist): abstract types either need to be mapped to concrete types, have custom deserializer, or contain additional type information\n at [Source: (String)&quot;{&quot;daysOfWeek&quot;:[&quot;MONDAY&quot;,&quot;TUESDAY&quot;,&quot;WEDNESDAY&quot;,&quot;THURSDAY&quot;,&quot;FRIDAY&quot;,&quot;SATURDAY&quot;,&quot;SUNDAY&quot;]}&quot;; line: 1, column: 16] (through reference chain: com.example.MyType[&quot;daysOfWeek&quot;]-&gt;java.util.HashSet[0])\n    at com.fasterxml.jackson.databind.exc.InvalidDefinitionException.from(InvalidDefinitionException.java:67)\n    at com.fasterxml.jackson.databind.DeserializationContext.reportBadDefinition(DeserializationContext.java:1764)\n    at com.fasterxml.jackson.databind.DatabindContext.reportBadDefinition(DatabindContext.java:400)\n    at com.fasterxml.jackson.databind.DeserializationContext.handleMissingInstantiator(DeserializationContext.java:1209)\n    at com.fasterxml.jackson.databind.deser.AbstractDeserializer.deserialize(AbstractDeserializer.java:274)\n    at com.fasterxml.jackson.databind.deser.std.CollectionDeserializer._deserializeFromArray(CollectionDeserializer.java:347)\n    at com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:244)\n    at com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:28)\n    at com.fasterxml.jackson.databind.deser.std.StdDelegatingDeserializer.deserialize(StdDelegatingDeserializer.java:175)\n    at com.fasterxml.jackson.databind.deser.impl.MethodProperty.deserializeAndSet(MethodProperty.java:129)\n    at com.fasterxml.jackson.databind.deser.BeanDeserializer.vanillaDeserialize(BeanDeserializer.java:324)\n    at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:187)\n    at com.fasterxml.jackson.databind.deser.DefaultDeserializationContext.readRootValue(DefaultDeserializationContext.java:322)\n    at com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4593)\n    at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3548)\n    at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3516)\n</code></pre>\n<p>About the best I've been able to come up with is to use this as an abstract superclass, and have a <code>Converter</code> of each specific subtype for each type that's actually used:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public abstract class OrderedSetConverter&lt;E extends Comparable&lt;? super E&gt;&gt;\n        extends StdConverter&lt;Set&lt;E&gt;, Set&lt;E&gt;&gt; {\n    @Override\n    public Set&lt;E&gt; convert(Set&lt;E&gt; value) {\n        return value == null ? null : value.stream()\n                .sorted(Comparator.nullsLast(Comparator.naturalOrder()))\n                .collect(Collectors.toCollection(LinkedHashSet::new));\n    }\n}\n\npublic class DayOfWeekSetConverter extends OrderedSetConverter&lt;DayOfWeek&gt; { }\n\npublic class MyType {\n    @JsonSerialize(converter = DayOfWeekSetConverter.class)\n    private Set&lt;DayOfWeek&gt; myValues;\n}\n</code></pre>\n<p>How can I write a converter for a generic collection type and have Jackson figure out the element type?</p>\n"},{"tags":["java","mlflow"],"answers":[{"tags":[],"owner":{"account_id":28603872,"reputation":11,"user_id":21900216,"display_name":"Mattlawd"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689374062,"creation_date":1689374027,"answer_id":76691447,"question_id":76604900,"body_markdown":"Unfortunately this isn’t a feature that’s been implemented.\r\n\r\nI have taken a look through the Java mlflow client class and no such method exists.\r\n\r\nWhat’s more, much of the core functionality stems from a wrapper class which wraps the mlflow command line client, which in turn depends on python packages.\r\n\r\nSee:\r\n\r\n[1] https://github.com/mlflow/mlflow/blob/master/mlflow/java/client/src/main/java/org/mlflow/tracking/MlflowClient.java\r\n\r\n[2] https://github.com/mlflow/mlflow/blob/master/mlflow/java/client/src/main/java/org/mlflow/artifacts/CliBasedArtifactRepository.java","title":"Adding Models to MLFlow Registry from Java","body":"<p>Unfortunately this isn’t a feature that’s been implemented.</p>\n<p>I have taken a look through the Java mlflow client class and no such method exists.</p>\n<p>What’s more, much of the core functionality stems from a wrapper class which wraps the mlflow command line client, which in turn depends on python packages.</p>\n<p>See:</p>\n<p>[1] <a href=\"https://github.com/mlflow/mlflow/blob/master/mlflow/java/client/src/main/java/org/mlflow/tracking/MlflowClient.java\" rel=\"nofollow noreferrer\">https://github.com/mlflow/mlflow/blob/master/mlflow/java/client/src/main/java/org/mlflow/tracking/MlflowClient.java</a></p>\n<p>[2] <a href=\"https://github.com/mlflow/mlflow/blob/master/mlflow/java/client/src/main/java/org/mlflow/artifacts/CliBasedArtifactRepository.java\" rel=\"nofollow noreferrer\">https://github.com/mlflow/mlflow/blob/master/mlflow/java/client/src/main/java/org/mlflow/artifacts/CliBasedArtifactRepository.java</a></p>\n"}],"owner":{"account_id":28941387,"reputation":11,"user_id":22167873,"display_name":"Mliebig"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1689374062,"creation_date":1688388571,"question_id":76604900,"body_markdown":"I am trying to add models from my java code to the &quot;Registered Models&quot; tab in MLflow.\r\n\r\nEvery code I find is in python and uses stuff like: \r\n\r\n```\r\nmlflow.sklearn.log_model(\r\n        sk_model=model,\r\n        artifact_path=&quot;sklearn-model&quot;,\r\n        signature=signature,\r\n        registered_model_name=&quot;sk-learn-random-forest-reg-model&quot;,\r\n)\r\n```\r\n\r\nor alternatively\r\n```\r\nclient = MlflowClient()\r\nclient.create_registered_model(name)\r\n```\r\n\r\nWhen creating a client in java like this\r\n\r\n    MlflowClient client = new MlflowClient(URI)\r\n\r\nI can easily interact with Experiments. I can log performances and create Runs. Great! But how to I put something into the ModelRegistry from Java? I cannot find any function which is close to log_model or create_registered? \r\nI see functions to get the last version and so on, but that&#39;s it?\r\n\r\nThanks!\r\nMartin\r\n\r\n","title":"Adding Models to MLFlow Registry from Java","body":"<p>I am trying to add models from my java code to the &quot;Registered Models&quot; tab in MLflow.</p>\n<p>Every code I find is in python and uses stuff like:</p>\n<pre><code>mlflow.sklearn.log_model(\n        sk_model=model,\n        artifact_path=&quot;sklearn-model&quot;,\n        signature=signature,\n        registered_model_name=&quot;sk-learn-random-forest-reg-model&quot;,\n)\n</code></pre>\n<p>or alternatively</p>\n<pre><code>client = MlflowClient()\nclient.create_registered_model(name)\n</code></pre>\n<p>When creating a client in java like this</p>\n<pre><code>MlflowClient client = new MlflowClient(URI)\n</code></pre>\n<p>I can easily interact with Experiments. I can log performances and create Runs. Great! But how to I put something into the ModelRegistry from Java? I cannot find any function which is close to log_model or create_registered?\nI see functions to get the last version and so on, but that's it?</p>\n<p>Thanks!\nMartin</p>\n"},{"tags":["java","android","build.gradle","apk"],"comments":[{"owner":{"account_id":3329682,"reputation":931,"user_id":2798897,"display_name":"Julien Revault d&#39;A..."},"score":1,"creation_date":1548940010,"post_id":54461288,"comment_id":95730553,"body_markdown":"Is there enough space left on your device ? (ram or storage). Otherwise if you&#39;re testing on an emulator, try to recreate one...","body":"Is there enough space left on your device ? (ram or storage). Otherwise if you&#39;re testing on an emulator, try to recreate one..."}],"answers":[{"comments":[{"owner":{"account_id":6526776,"reputation":574,"user_id":5049294,"display_name":"Prashant Jha"},"score":10,"creation_date":1559745760,"post_id":54461505,"comment_id":99517120,"body_markdown":"Before trying any modifications mentioned do check the space left on device.","body":"Before trying any modifications mentioned do check the space left on device."},{"owner":{"account_id":16035267,"reputation":1,"user_id":11573149,"display_name":"1705030118"},"score":3,"creation_date":1562916063,"post_id":54461505,"comment_id":101024539,"body_markdown":"I change the SD-card of AVD Manager into 1000MB,it works","body":"I change the SD-card of AVD Manager into 1000MB,it works"},{"owner":{"account_id":78924,"reputation":4734,"user_id":224239,"accept_rate":71,"display_name":"Jaroslav Z&#225;ruba"},"score":2,"creation_date":1567246003,"post_id":54461505,"comment_id":101913142,"body_markdown":"This is where you set the installLocation: https://developer.android.com/guide/topics/manifest/manifest-element.html","body":"This is where you set the installLocation: <a href=\"https://developer.android.com/guide/topics/manifest/manifest-element.html\" rel=\"nofollow noreferrer\">developer.android.com/guide/topics/manifest/&hellip;</a>"},{"owner":{"account_id":470461,"reputation":2089,"user_id":877682,"accept_rate":80,"display_name":"Aaron"},"score":0,"creation_date":1571787425,"post_id":54461505,"comment_id":103354382,"body_markdown":"I deleted 100MB of APKs and apps I&#39;d downloaded/installed on my AVD during testing, and this error went away.","body":"I deleted 100MB of APKs and apps I&#39;d downloaded/installed on my AVD during testing, and this error went away."},{"owner":{"account_id":875385,"reputation":6025,"user_id":925135,"accept_rate":82,"display_name":"Renetik"},"score":1,"creation_date":1637102696,"post_id":54461505,"comment_id":123735612,"body_markdown":"Looks like installLocation is ignored on newer apis or devices or certain situation as large assets who knows but in my case it&#39;s just ignored.","body":"Looks like installLocation is ignored on newer apis or devices or certain situation as large assets who knows but in my case it&#39;s just ignored."}],"tags":[],"owner":{"account_id":263656,"reputation":1,"user_id":549372,"accept_rate":100,"display_name":"Martin Zeitler"},"comment_count":5,"down_vote_count":0,"up_vote_count":22,"is_accepted":false,"score":22,"last_activity_date":1560173620,"creation_date":1548940691,"answer_id":54461505,"question_id":54461288,"body_markdown":"that file-system has no space:\r\n\r\n    java.io.IOException: Requested internal only, but not enough space.\r\n\r\nthe issue is:\r\n\r\n    android:installLocation=&quot;internalOnly&quot;\r\n\r\neither remove it, or replace it with:\r\n\r\n    android:installLocation=&quot;preferExternal&quot;\r\n\r\n ---\r\n\r\nor make some space on the device / emulator by uninstalled or deleting something -\r\n\r\nor simply assign some more megabytes to the virtual SD card.","title":"Installation failed with message Error: android.os.ParcelableException: java.io.IOException: Requested internal only, but not enough space","body":"<p>that file-system has no space:</p>\n\n<pre><code>java.io.IOException: Requested internal only, but not enough space.\n</code></pre>\n\n<p>the issue is:</p>\n\n<pre><code>android:installLocation=\"internalOnly\"\n</code></pre>\n\n<p>either remove it, or replace it with:</p>\n\n<pre><code>android:installLocation=\"preferExternal\"\n</code></pre>\n\n<hr>\n\n<p>or make some space on the device / emulator by uninstalled or deleting something -</p>\n\n<p>or simply assign some more megabytes to the virtual SD card.</p>\n"},{"tags":[],"owner":{"account_id":4720152,"reputation":1442,"user_id":3818303,"accept_rate":38,"display_name":"instanceof"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1576574145,"creation_date":1576574145,"answer_id":59370970,"question_id":54461288,"body_markdown":"In Android Studio, open the AVD Manager and edit the problematic emulator. Inside the edit screen, you might need to click on &#39;Show Advanced Settings&#39;. Scroll down and increase internal memory and SD card memory. After I did this I could install my app again.","title":"Installation failed with message Error: android.os.ParcelableException: java.io.IOException: Requested internal only, but not enough space","body":"<p>In Android Studio, open the AVD Manager and edit the problematic emulator. Inside the edit screen, you might need to click on 'Show Advanced Settings'. Scroll down and increase internal memory and SD card memory. After I did this I could install my app again.</p>\n"},{"tags":[],"owner":{"account_id":17396595,"reputation":121,"user_id":12606222,"display_name":"Vishwanath Pandey"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1580452116,"creation_date":1580452116,"answer_id":59998933,"question_id":54461288,"body_markdown":"If you are using phone this error comes due to less storage.\r\nMake some space and try again it should work.","title":"Installation failed with message Error: android.os.ParcelableException: java.io.IOException: Requested internal only, but not enough space","body":"<p>If you are using phone this error comes due to less storage.\nMake some space and try again it should work.</p>\n"},{"tags":[],"owner":{"account_id":11457299,"reputation":530,"user_id":8397910,"display_name":"Patrick Prakash"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1589535980,"creation_date":1589535980,"answer_id":61816330,"question_id":54461288,"body_markdown":"The problem is with your storage space on your device which it is running. Try Installing Clearing the space or install it on an emulator.","title":"Installation failed with message Error: android.os.ParcelableException: java.io.IOException: Requested internal only, but not enough space","body":"<p>The problem is with your storage space on your device which it is running. Try Installing Clearing the space or install it on an emulator.</p>\n"},{"tags":[],"owner":{"account_id":13271791,"reputation":157,"user_id":9582575,"display_name":"Alagie F. Nget"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1591702691,"creation_date":1591702691,"answer_id":62281729,"question_id":54461288,"body_markdown":"I uninstalled all the apps I ran and got installed on the virtual device and the error went away.","title":"Installation failed with message Error: android.os.ParcelableException: java.io.IOException: Requested internal only, but not enough space","body":"<p>I uninstalled all the apps I ran and got installed on the virtual device and the error went away.</p>\n"},{"tags":[],"owner":{"account_id":16870597,"reputation":364,"user_id":12199158,"display_name":"Windgate"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1596638235,"creation_date":1596555307,"answer_id":63250269,"question_id":54461288,"body_markdown":"Your app is trying to install on internal space of your virtual device, and it doesn&#39;t have enough space. If you run the emulator, go to config/storage and you&#39;ll see you have no space.\r\n\r\nSometimes, the emulator is created with 800Mb of internal space, and Android Oreo (for example) occupies all that space, and it is not possible to install anything.\r\n\r\nFurthermore, even when you config your app to &quot;prefer external&quot;, the app keep trying to install on internal storeage, so you can not solve the problem with that.\r\n\r\nThe only solution that worked for me was increasing the internal space of the emulator, you can do that by following one of these options:\r\n\r\nA) Go to Android SDK -&gt; ADV Manager, locate your emulator, edit preferences and increase the space, duplicate it, or what you want.\r\n\r\nB) Go to the folder with the config of your emulator (In Windows C:/Users/your_user/.android/avd/your_emulator) and edit the *.ini files, you can see values related to space, memory, and so on, just increase that values and save.\r\n\r\nVisual Studio 2017 has an aweful integration with Android SDK/ADV Manager, so you need to do this 100% manually, furthermore you don&#39;t receive any info or instructions when the error happens, so it&#39;s really annoying to fix it :( And it is always the same with the 99% of Xamarin problems!","title":"Installation failed with message Error: android.os.ParcelableException: java.io.IOException: Requested internal only, but not enough space","body":"<p>Your app is trying to install on internal space of your virtual device, and it doesn't have enough space. If you run the emulator, go to config/storage and you'll see you have no space.</p>\n<p>Sometimes, the emulator is created with 800Mb of internal space, and Android Oreo (for example) occupies all that space, and it is not possible to install anything.</p>\n<p>Furthermore, even when you config your app to &quot;prefer external&quot;, the app keep trying to install on internal storeage, so you can not solve the problem with that.</p>\n<p>The only solution that worked for me was increasing the internal space of the emulator, you can do that by following one of these options:</p>\n<p>A) Go to Android SDK -&gt; ADV Manager, locate your emulator, edit preferences and increase the space, duplicate it, or what you want.</p>\n<p>B) Go to the folder with the config of your emulator (In Windows C:/Users/your_user/.android/avd/your_emulator) and edit the *.ini files, you can see values related to space, memory, and so on, just increase that values and save.</p>\n<p>Visual Studio 2017 has an aweful integration with Android SDK/ADV Manager, so you need to do this 100% manually, furthermore you don't receive any info or instructions when the error happens, so it's really annoying to fix it :( And it is always the same with the 99% of Xamarin problems!</p>\n"},{"comments":[{"owner":{"account_id":7810198,"reputation":53,"user_id":7752753,"display_name":"Rahul Bharti"},"score":3,"creation_date":1640102258,"post_id":66868498,"comment_id":124513167,"body_markdown":"This should be marked as the Correct answer. It not only tells the root cause, but also how to fix the problem.","body":"This should be marked as the Correct answer. It not only tells the root cause, but also how to fix the problem."}],"tags":[],"owner":{"account_id":102114,"reputation":4494,"user_id":274312,"accept_rate":93,"display_name":"Wex"},"comment_count":1,"down_vote_count":0,"up_vote_count":46,"is_accepted":false,"score":46,"last_activity_date":1617097536,"creation_date":1617097536,"answer_id":66868498,"question_id":54461288,"body_markdown":"This is simply the virtual device running out of space. Each install on a virtual device uses up a bit of space each time you run your app. Over time the space fills up until it&#39;s all used up. You can increase the space as suggested by some answers - which will work initially but eventually that space will get used up too.\r\n\r\nFrom the virtual device&#39;s Settings app you can view how much space you have left. Here you can see that almost a whole GB is used up, but the apps themselves only use 132MB, clearly something is off.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n**Go to the AVD Manager and in the Actions for your device there is the option to &#39;Wipe Data&#39; - do that.**\r\n\r\n\r\n[![enter image description here][2]][2]\r\n\r\nHeading back to the Settings app you can now see that the space is freed up and your app has room to be installed - till the next time it runs out at which point you just repeat this process.\r\n\r\n[![enter image description here][3]][3]\r\n\r\n  [1]: https://i.stack.imgur.com/l6ivV.png\r\n  [2]: https://i.stack.imgur.com/epiV4.png\r\n  [3]: https://i.stack.imgur.com/PChyv.png","title":"Installation failed with message Error: android.os.ParcelableException: java.io.IOException: Requested internal only, but not enough space","body":"<p>This is simply the virtual device running out of space. Each install on a virtual device uses up a bit of space each time you run your app. Over time the space fills up until it's all used up. You can increase the space as suggested by some answers - which will work initially but eventually that space will get used up too.</p>\n<p>From the virtual device's Settings app you can view how much space you have left. Here you can see that almost a whole GB is used up, but the apps themselves only use 132MB, clearly something is off.</p>\n<p><a href=\"https://i.stack.imgur.com/l6ivV.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/l6ivV.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>Go to the AVD Manager and in the Actions for your device there is the option to 'Wipe Data' - do that.</strong></p>\n<p><a href=\"https://i.stack.imgur.com/epiV4.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/epiV4.png\" alt=\"enter image description here\" /></a></p>\n<p>Heading back to the Settings app you can now see that the space is freed up and your app has room to be installed - till the next time it runs out at which point you just repeat this process.</p>\n<p><a href=\"https://i.stack.imgur.com/PChyv.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/PChyv.png\" alt=\"enter image description here\" /></a></p>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1630860214,"post_id":69064280,"comment_id":122064777,"body_markdown":"Please add further details to expand on your answer, such as working code or documentation citations.","body":"Please add further details to expand on your answer, such as working code or documentation citations."}],"tags":[],"owner":{"account_id":12235791,"reputation":81,"user_id":8930259,"display_name":"Adeola Adesina"},"comment_count":1,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1630852033,"creation_date":1630852033,"answer_id":69064280,"question_id":54461288,"body_markdown":"Create space on your phone or emulator and it should work.","title":"Installation failed with message Error: android.os.ParcelableException: java.io.IOException: Requested internal only, but not enough space","body":"<p>Create space on your phone or emulator and it should work.</p>\n"},{"tags":[],"owner":{"account_id":6349075,"reputation":1862,"user_id":4928715,"display_name":"Samuel Ewudzi Incoom"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1635671229,"creation_date":1635671229,"answer_id":69785351,"question_id":54461288,"body_markdown":"it simply means the device that you wanna test the app or do debugging on does not have enough space.  So clear off some memory, and then try again.","title":"Installation failed with message Error: android.os.ParcelableException: java.io.IOException: Requested internal only, but not enough space","body":"<p>it simply means the device that you wanna test the app or do debugging on does not have enough space.  So clear off some memory, and then try again.</p>\n"},{"comments":[{"owner":{"account_id":4484503,"reputation":16655,"user_id":3879847,"accept_rate":72,"display_name":"Ranjithkumar"},"score":12,"creation_date":1655387314,"post_id":71309984,"comment_id":128324184,"body_markdown":"Step 3 alone working for me!","body":"Step 3 alone working for me!"},{"owner":{"account_id":3121567,"reputation":3350,"user_id":2641242,"accept_rate":80,"display_name":"jraufeisen"},"score":3,"creation_date":1659454099,"post_id":71309984,"comment_id":129296256,"body_markdown":"I had to wipe the simulator once again after changing its storage size","body":"I had to wipe the simulator once again after changing its storage size"}],"tags":[],"owner":{"account_id":6153574,"reputation":11374,"user_id":4797289,"display_name":"Rasoul Miri"},"comment_count":2,"down_vote_count":0,"up_vote_count":256,"is_accepted":false,"score":256,"last_activity_date":1658952928,"creation_date":1646144738,"answer_id":71309984,"question_id":54461288,"body_markdown":"This issue is about your storage in the emulator. Default AndroidStudio value of 2Gb is not enough for modern Android versions.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n----------\r\n\r\n\r\n***Solution***\r\n\r\n**Step 1:** close the emulator.\r\n\r\n**Step 2:** Wipe the emulator.\r\n\r\n[![enter image description here][2]][2]\r\n\r\n**Step 3:** change the internal storage and SD Card to **4098MB**.\r\n\r\n\r\n\r\n[![enter image description here][3]][3]\r\n\r\n**Step 4:** Run the Emulator.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/mUMEP.png\r\n  [2]: https://i.stack.imgur.com/IEDNZ.png\r\n  [3]: https://i.stack.imgur.com/rGnGY.png","title":"Installation failed with message Error: android.os.ParcelableException: java.io.IOException: Requested internal only, but not enough space","body":"<p>This issue is about your storage in the emulator. Default AndroidStudio value of 2Gb is not enough for modern Android versions.</p>\n<p><a href=\"https://i.stack.imgur.com/mUMEP.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/mUMEP.png\" alt=\"enter image description here\" /></a></p>\n<hr />\n<p><em><strong>Solution</strong></em></p>\n<p><strong>Step 1:</strong> close the emulator.</p>\n<p><strong>Step 2:</strong> Wipe the emulator.</p>\n<p><a href=\"https://i.stack.imgur.com/IEDNZ.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/IEDNZ.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>Step 3:</strong> change the internal storage and SD Card to <strong>4098MB</strong>.</p>\n<p><a href=\"https://i.stack.imgur.com/rGnGY.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/rGnGY.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>Step 4:</strong> Run the Emulator.</p>\n"},{"tags":[],"owner":{"account_id":875385,"reputation":6025,"user_id":925135,"accept_rate":82,"display_name":"Renetik"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1651158810,"creation_date":1646691443,"answer_id":71387894,"question_id":54461288,"body_markdown":"When running on emulator I found that even when I increased Internal disk space it didn&#39;t worked and stayed same size, I had to re-create emulator.  ","title":"Installation failed with message Error: android.os.ParcelableException: java.io.IOException: Requested internal only, but not enough space","body":"<p>When running on emulator I found that even when I increased Internal disk space it didn't worked and stayed same size, I had to re-create emulator.</p>\n"},{"tags":[],"owner":{"account_id":4944709,"reputation":3691,"user_id":4163879,"accept_rate":100,"display_name":"Adam B"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689373958,"creation_date":1689373958,"answer_id":76691442,"question_id":54461288,"body_markdown":"On Mac I followed the same above procedure, but the settings were different. I didn&#39;t have to wipe the device to fix it.\r\n\r\nStop the emulator then choose Edit:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nThen increase the `disk.dataPartition.size` property. It was `800M` for me, I increased it to `4G` for 4 gigabytes.\r\n\r\n[![enter image description here][2]][2]\r\n\r\nThen save and start up the emulator.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/octdF.png\r\n  [2]: https://i.stack.imgur.com/8oSe6.png","title":"Installation failed with message Error: android.os.ParcelableException: java.io.IOException: Requested internal only, but not enough space","body":"<p>On Mac I followed the same above procedure, but the settings were different. I didn't have to wipe the device to fix it.</p>\n<p>Stop the emulator then choose Edit:</p>\n<p><a href=\"https://i.stack.imgur.com/octdF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/octdF.png\" alt=\"enter image description here\" /></a></p>\n<p>Then increase the <code>disk.dataPartition.size</code> property. It was <code>800M</code> for me, I increased it to <code>4G</code> for 4 gigabytes.</p>\n<p><a href=\"https://i.stack.imgur.com/8oSe6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8oSe6.png\" alt=\"enter image description here\" /></a></p>\n<p>Then save and start up the emulator.</p>\n"}],"owner":{"account_id":10333531,"reputation":1571,"user_id":7622515,"display_name":"Gabriel Vicente Albasini Garau"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":111220,"favorite_count":0,"down_vote_count":0,"up_vote_count":146,"answer_count":12,"score":146,"last_activity_date":1689373958,"creation_date":1548939875,"question_id":54461288,"body_markdown":"I was getting the message \r\n\r\n    &gt; Installation failed with message Failed to establish session.\r\n\r\nso following some responses to the problem I disabled Instant Run and I started getting\r\n\r\n    &gt; Installation failed with message Error: android.os.ParcelableException: java.io.IOException: Requested internal only, but not enough space.\r\n\r\nI&#180;ve tried rebuilding, cleaning the project, to disable and enable Instant Run and to build APK but nothing solves the problem.\r\n\r\nThis is my build.gradle (Module:app).\r\n\r\n        apply plugin: &#39;com.android.application&#39;\r\n    \r\n    android {\r\n        compileSdkVersion 28\r\n        defaultConfig {\r\n            applicationId &quot;com.example.gabriel.justmeet&quot;\r\n            minSdkVersion 21\r\n            targetSdkVersion 28\r\n            versionCode 9\r\n            versionName &quot;1.0&quot;\r\n        }\r\n        buildTypes {\r\n            release {\r\n                minifyEnabled false\r\n                proguardFiles getDefaultProguardFile(&#39;proguard-android.txt&#39;), &#39;proguard-rules.pro&#39;\r\n            }\r\n        }\r\n        useLibrary &#39;org.apache.http.legacy&#39;\r\n    }\r\n    \r\n    dependencies {\r\n        implementation fileTree(dir: &#39;libs&#39;, include: [&#39;*.jar&#39;])\r\n        implementation &#39;com.android.support:appcompat-v7:28.0.0&#39;\r\n        implementation &#39;com.android.support.constraint:constraint-layout:1.1.3&#39;\r\n        implementation &#39;com.android.volley:volley:1.1.0&#39;\r\n    }\r\n\r\nand this is the build.gradle(Project)\r\n\r\n    // Top-level build file where you can add configuration options common to all sub-projects/modules.\r\n    \r\n    buildscript {\r\n        \r\n        repositories {\r\n            google()\r\n            jcenter()\r\n            maven { url &#39;http://repo1.maven.org/maven2&#39; }\r\n        }\r\n        dependencies {\r\n            classpath &#39;com.android.tools.build:gradle:3.3.0&#39;\r\n            \r\n    \r\n            // NOTE: Do not place your application dependencies here; they belong\r\n            // in the individual module build.gradle files\r\n        }\r\n    \r\n    }\r\n    \r\n    allprojects {\r\n        repositories {\r\n            google()\r\n            jcenter()\r\n            maven { url &#39;http://repo1.maven.org/maven2&#39; }\r\n        }\r\n    }\r\n    \r\n    task clean(type: Delete) {\r\n        delete rootProject.buildDir\r\n    }\r\n\r\nThis started when I modified my RegisterActivity, so it might help\r\n\r\n    package com.example.gabriel.paska;\r\n    \r\n    import android.content.Context;\r\n    import android.content.Intent;\r\n    import android.content.SharedPreferences;\r\n    import android.support.v7.app.AppCompatActivity;\r\n    import android.os.Bundle;\r\n    import android.view.View;\r\n    import android.widget.Button;\r\n    import android.widget.EditText;\r\n    import android.widget.Toast;\r\n    \r\n    import com.android.volley.AuthFailureError;\r\n    import com.android.volley.Request;\r\n    import com.android.volley.RequestQueue;\r\n    import com.android.volley.Response;\r\n    import com.android.volley.VolleyError;\r\n    import com.android.volley.toolbox.StringRequest;\r\n    import com.android.volley.toolbox.Volley;\r\n    \r\n    import java.util.HashMap;\r\n    import java.util.Map;\r\n    \r\n    public class RegisterActivity extends AppCompatActivity {\r\n        public static final String REGISTER_URL =&quot;http://justmeet.000webhostapp.com/php/register.php&quot;;\r\n        public static final String KEY_USERNAME =&quot;username&quot;;\r\n        public static final String KEY_PASSWORD=&quot;password&quot;;\r\n        public static final String KEY_NAME =&quot;name&quot;;\r\n        public static final String KEY_AGE=&quot;age&quot;;\r\n        public static final String REGISTER_SUCCESS =&quot;RegisterSuccess&quot;;\r\n        public static final String SHARED_PREF_NAME=&quot;tech&quot;;\r\n        public static final String USERNAME_SHARED_PREF=&quot;username&quot;;\r\n        public static final String LOGGEDIN_SHARED_PREF=&quot;loggedin&quot;;\r\n        private boolean loggedIn=false;\r\n        EditText etAge;\r\n        EditText etName;\r\n        EditText etPassword;\r\n        EditText etUsername;\r\n        Button bRegister;\r\n    \r\n    \r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_register);\r\n    \r\n            etAge = findViewById(R.id.etAgeR);\r\n            etName = findViewById(R.id.etNameR);\r\n            etPassword = findViewById(R.id.etPwordR);\r\n            etUsername = findViewById(R.id.etUsernameR);\r\n            bRegister = findViewById(R.id.btRegister);\r\n    \r\n            bRegister.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n                    register();\r\n                }\r\n            });\r\n        }\r\n            private void register() {\r\n                final String name = etName.getText().toString().trim();\r\n                final String password = etPassword.getText().toString().trim();\r\n                final String username = etUsername.getText().toString().trim();\r\n                final String age = etAge.getText().toString().trim();\r\n    \r\n                StringRequest stringRequest = new StringRequest(Request.Method.POST, REGISTER_URL,\r\n                        new Response.Listener&lt;String&gt;() {\r\n                            @Override\r\n                            public void onResponse(String response) {\r\n                                if(response.trim().equalsIgnoreCase(REGISTER_SUCCESS)){\r\n    \r\n                                    SharedPreferences sharedPreferences = RegisterActivity.this.getSharedPreferences(SHARED_PREF_NAME, Context.MODE_PRIVATE);\r\n    \r\n                                    SharedPreferences.Editor editor = sharedPreferences.edit();\r\n    \r\n                                    editor.putBoolean(LOGGEDIN_SHARED_PREF, true);\r\n                                    editor.putString(USERNAME_SHARED_PREF, name);\r\n    \r\n                                    editor.apply();\r\n    \r\n                                    Intent intent = new Intent(RegisterActivity.this, UserActivity.class);\r\n                                    startActivity(intent);\r\n                                }else{\r\n                                    Toast.makeText(RegisterActivity.this, &quot;Register Failed&quot; + response.trim(), Toast.LENGTH_LONG).show();\r\n                                }\r\n                            }\r\n                        },\r\n                        new Response.ErrorListener() {\r\n                            @Override\r\n                            public void onErrorResponse(VolleyError error) {\r\n                            }\r\n                        }){\r\n                    @Override\r\n                    protected Map&lt;String, String&gt; getParams() throws AuthFailureError {\r\n                        Map&lt;String,String&gt; prams = new HashMap&lt;&gt;();\r\n                        prams.put(KEY_USERNAME, username);\r\n                        prams.put(KEY_PASSWORD, password);\r\n                        prams.put(KEY_NAME, name);\r\n                        prams.put(KEY_AGE, age);\r\n    \r\n                        return prams;\r\n                    }\r\n                };\r\n                RequestQueue requestQueue = Volley.newRequestQueue(this);\r\n                requestQueue.add(stringRequest);\r\n            }\r\n            @Override\r\n            protected void onResume() {\r\n                super.onResume();\r\n                SharedPreferences sharedPreferences = getSharedPreferences(SHARED_PREF_NAME,Context.MODE_PRIVATE);\r\n                loggedIn = sharedPreferences.getBoolean(LOGGEDIN_SHARED_PREF, false);\r\n                if(loggedIn){\r\n                    Intent intent = new Intent(RegisterActivity.this, UserActivity.class);\r\n                    startActivity(intent);\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n","title":"Installation failed with message Error: android.os.ParcelableException: java.io.IOException: Requested internal only, but not enough space","body":"<p>I was getting the message </p>\n\n<pre><code>&gt; Installation failed with message Failed to establish session.\n</code></pre>\n\n<p>so following some responses to the problem I disabled Instant Run and I started getting</p>\n\n<pre><code>&gt; Installation failed with message Error: android.os.ParcelableException: java.io.IOException: Requested internal only, but not enough space.\n</code></pre>\n\n<p>I´ve tried rebuilding, cleaning the project, to disable and enable Instant Run and to build APK but nothing solves the problem.</p>\n\n<p>This is my build.gradle (Module:app).</p>\n\n<pre><code>    apply plugin: 'com.android.application'\n\nandroid {\n    compileSdkVersion 28\n    defaultConfig {\n        applicationId \"com.example.gabriel.justmeet\"\n        minSdkVersion 21\n        targetSdkVersion 28\n        versionCode 9\n        versionName \"1.0\"\n    }\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        }\n    }\n    useLibrary 'org.apache.http.legacy'\n}\n\ndependencies {\n    implementation fileTree(dir: 'libs', include: ['*.jar'])\n    implementation 'com.android.support:appcompat-v7:28.0.0'\n    implementation 'com.android.support.constraint:constraint-layout:1.1.3'\n    implementation 'com.android.volley:volley:1.1.0'\n}\n</code></pre>\n\n<p>and this is the build.gradle(Project)</p>\n\n<pre><code>// Top-level build file where you can add configuration options common to all sub-projects/modules.\n\nbuildscript {\n\n    repositories {\n        google()\n        jcenter()\n        maven { url 'http://repo1.maven.org/maven2' }\n    }\n    dependencies {\n        classpath 'com.android.tools.build:gradle:3.3.0'\n\n\n        // NOTE: Do not place your application dependencies here; they belong\n        // in the individual module build.gradle files\n    }\n\n}\n\nallprojects {\n    repositories {\n        google()\n        jcenter()\n        maven { url 'http://repo1.maven.org/maven2' }\n    }\n}\n\ntask clean(type: Delete) {\n    delete rootProject.buildDir\n}\n</code></pre>\n\n<p>This started when I modified my RegisterActivity, so it might help</p>\n\n<pre><code>package com.example.gabriel.paska;\n\nimport android.content.Context;\nimport android.content.Intent;\nimport android.content.SharedPreferences;\nimport android.support.v7.app.AppCompatActivity;\nimport android.os.Bundle;\nimport android.view.View;\nimport android.widget.Button;\nimport android.widget.EditText;\nimport android.widget.Toast;\n\nimport com.android.volley.AuthFailureError;\nimport com.android.volley.Request;\nimport com.android.volley.RequestQueue;\nimport com.android.volley.Response;\nimport com.android.volley.VolleyError;\nimport com.android.volley.toolbox.StringRequest;\nimport com.android.volley.toolbox.Volley;\n\nimport java.util.HashMap;\nimport java.util.Map;\n\npublic class RegisterActivity extends AppCompatActivity {\n    public static final String REGISTER_URL =\"http://justmeet.000webhostapp.com/php/register.php\";\n    public static final String KEY_USERNAME =\"username\";\n    public static final String KEY_PASSWORD=\"password\";\n    public static final String KEY_NAME =\"name\";\n    public static final String KEY_AGE=\"age\";\n    public static final String REGISTER_SUCCESS =\"RegisterSuccess\";\n    public static final String SHARED_PREF_NAME=\"tech\";\n    public static final String USERNAME_SHARED_PREF=\"username\";\n    public static final String LOGGEDIN_SHARED_PREF=\"loggedin\";\n    private boolean loggedIn=false;\n    EditText etAge;\n    EditText etName;\n    EditText etPassword;\n    EditText etUsername;\n    Button bRegister;\n\n\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_register);\n\n        etAge = findViewById(R.id.etAgeR);\n        etName = findViewById(R.id.etNameR);\n        etPassword = findViewById(R.id.etPwordR);\n        etUsername = findViewById(R.id.etUsernameR);\n        bRegister = findViewById(R.id.btRegister);\n\n        bRegister.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                register();\n            }\n        });\n    }\n        private void register() {\n            final String name = etName.getText().toString().trim();\n            final String password = etPassword.getText().toString().trim();\n            final String username = etUsername.getText().toString().trim();\n            final String age = etAge.getText().toString().trim();\n\n            StringRequest stringRequest = new StringRequest(Request.Method.POST, REGISTER_URL,\n                    new Response.Listener&lt;String&gt;() {\n                        @Override\n                        public void onResponse(String response) {\n                            if(response.trim().equalsIgnoreCase(REGISTER_SUCCESS)){\n\n                                SharedPreferences sharedPreferences = RegisterActivity.this.getSharedPreferences(SHARED_PREF_NAME, Context.MODE_PRIVATE);\n\n                                SharedPreferences.Editor editor = sharedPreferences.edit();\n\n                                editor.putBoolean(LOGGEDIN_SHARED_PREF, true);\n                                editor.putString(USERNAME_SHARED_PREF, name);\n\n                                editor.apply();\n\n                                Intent intent = new Intent(RegisterActivity.this, UserActivity.class);\n                                startActivity(intent);\n                            }else{\n                                Toast.makeText(RegisterActivity.this, \"Register Failed\" + response.trim(), Toast.LENGTH_LONG).show();\n                            }\n                        }\n                    },\n                    new Response.ErrorListener() {\n                        @Override\n                        public void onErrorResponse(VolleyError error) {\n                        }\n                    }){\n                @Override\n                protected Map&lt;String, String&gt; getParams() throws AuthFailureError {\n                    Map&lt;String,String&gt; prams = new HashMap&lt;&gt;();\n                    prams.put(KEY_USERNAME, username);\n                    prams.put(KEY_PASSWORD, password);\n                    prams.put(KEY_NAME, name);\n                    prams.put(KEY_AGE, age);\n\n                    return prams;\n                }\n            };\n            RequestQueue requestQueue = Volley.newRequestQueue(this);\n            requestQueue.add(stringRequest);\n        }\n        @Override\n        protected void onResume() {\n            super.onResume();\n            SharedPreferences sharedPreferences = getSharedPreferences(SHARED_PREF_NAME,Context.MODE_PRIVATE);\n            loggedIn = sharedPreferences.getBoolean(LOGGEDIN_SHARED_PREF, false);\n            if(loggedIn){\n                Intent intent = new Intent(RegisterActivity.this, UserActivity.class);\n                startActivity(intent);\n            }\n        }\n    }\n</code></pre>\n"},{"tags":["java","junit","sonarqube","code-coverage","test-coverage"],"comments":[{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1689385419,"post_id":76691398,"comment_id":135210500,"body_markdown":"What’s the type of `classObject`? This code calls `stream()` on it, suggesting it is some kind of collection. You should test it once with an entry that has a salary of 1000, once with an entry that has a salary of 2000, and once where no entries have a salary of 1000 or 2000. You can’t cover all three cases in a single assertion, since the code will search through the stream for a matching entry and return as soon as one satisfies the filter condition. I would additionally test other cases (match at the start/end/middle of the stream, empty streams). Don’t only satisfy the coverage check.","body":"What’s the type of <code>classObject</code>? This code calls <code>stream()</code> on it, suggesting it is some kind of collection. You should test it once with an entry that has a salary of 1000, once with an entry that has a salary of 2000, and once where no entries have a salary of 1000 or 2000. You can’t cover all three cases in a single assertion, since the code will search through the stream for a matching entry and return as soon as one satisfies the filter condition. I would additionally test other cases (match at the start/end/middle of the stream, empty streams). Don’t only satisfy the coverage check."},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1689385610,"post_id":76691398,"comment_id":135210507,"body_markdown":"If you can’t post your full code, it’s best to create a [mre] and post that.","body":"If you can’t post your full code, it’s best to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and post that."},{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":1,"creation_date":1689414621,"post_id":76691398,"comment_id":135212391,"body_markdown":"For 3 conditions it&#39;s best to create 3 tests (or one parameterized test).","body":"For 3 conditions it&#39;s best to create 3 tests (or one parameterized test)."}],"owner":{"account_id":4335872,"reputation":77,"user_id":3540367,"display_name":"Vinit More"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":165,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689373097,"creation_date":1689373097,"question_id":76691398,"body_markdown":"Working on SonarQube code coverage &amp; stuck with below conditional filter from stream. I need to write Junit such as both conditions will get covered and should cover this line as part of sonar. Quick help is appreciated. Let me know if you need more details on this. I am trying to mock below conditions in junit, but filtered line is not being covered. Sorry but cannot upload full code as per company policy, but please comment if you need more clarity on this or any references on internet.\r\n\r\n```\r\nprivate Optional&lt;MainClass&gt; mainMethod() {\r\n        return classObject.stream()\r\n                .filter(r -&gt; r.salary() == 1000 || r.salary() == 2000)   //Need to cover both conditions as part of SonarQube code coverage\r\n\t\t.findAny();\r\n    }\r\n```\r\n\r\nTried to mock `classObject` with\r\n\r\n1. `when(mockClassObject.salary()).thenReturn(1000)`  - Expecting to cover first condition.\r\n\r\n2. ```\r\n   when(mockClassObject.salary()).thenReturn(2000) - Expecting to cover second condition.\r\n   ```\r\n\r\n3. ```\r\n   when(mockClassObject.salary()).thenReturn(10) - Uncovered condition\r\n   ```\r\n\r\nbut it doesn&#39;t seems to be covering 3 conditions.","title":"JUnit test case to cover multiple stream filter conditions - SonarQube code coverage","body":"<p>Working on SonarQube code coverage &amp; stuck with below conditional filter from stream. I need to write Junit such as both conditions will get covered and should cover this line as part of sonar. Quick help is appreciated. Let me know if you need more details on this. I am trying to mock below conditions in junit, but filtered line is not being covered. Sorry but cannot upload full code as per company policy, but please comment if you need more clarity on this or any references on internet.</p>\n<pre><code>private Optional&lt;MainClass&gt; mainMethod() {\n        return classObject.stream()\n                .filter(r -&gt; r.salary() == 1000 || r.salary() == 2000)   //Need to cover both conditions as part of SonarQube code coverage\n        .findAny();\n    }\n</code></pre>\n<p>Tried to mock <code>classObject</code> with</p>\n<ol>\n<li><p><code>when(mockClassObject.salary()).thenReturn(1000)</code>  - Expecting to cover first condition.</p>\n</li>\n<li>\n<pre><code>when(mockClassObject.salary()).thenReturn(2000) - Expecting to cover second condition.\n</code></pre>\n</li>\n<li>\n<pre><code>when(mockClassObject.salary()).thenReturn(10) - Uncovered condition\n</code></pre>\n</li>\n</ol>\n<p>but it doesn't seems to be covering 3 conditions.</p>\n"},{"tags":["java","grpc","grpc-java","protobuf-java","proto3"],"comments":[{"owner":{"account_id":446597,"reputation":22464,"user_id":839733,"accept_rate":69,"display_name":"Abhijit Sarkar"},"score":0,"creation_date":1689373245,"post_id":76690515,"comment_id":135209697,"body_markdown":"I don’t understand the problem here. If you want to return a future/promise type object from your method, you can do so using whatever create method that object provides. Within the create method, you’ll write your DB code, but until the promise is fulfilled at a later time, this call won’t be executed. This seems to be completely unrelated with Protobuf.","body":"I don’t understand the problem here. If you want to return a future/promise type object from your method, you can do so using whatever create method that object provides. Within the create method, you’ll write your DB code, but until the promise is fulfilled at a later time, this call won’t be executed. This seems to be completely unrelated with Protobuf."}],"answers":[{"tags":[],"owner":{"account_id":40617,"reputation":58344,"user_id":117700,"accept_rate":91,"display_name":"Alex Gordon"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689361752,"creation_date":1689361752,"answer_id":76690536,"question_id":76690515,"body_markdown":"generally not recommended to block and wait for CompletableFuture . \r\n\r\nif you have a small file size and dont want to use streaming, you can theoretically blcok and wait for CompletableFuture  before sending the response back. \r\n\r\nyou can still return CompletableFuture&lt;Book&gt; from the service method. \r\n\r\nsomething like this\r\n\r\n    import io.grpc.stub.StreamObserver;\r\n    import io.grpc.Status;\r\n    import io.grpc.StatusRuntimeException;\r\n    import com.google.common.util.concurrent.MoreExecutors;\r\n    import io.grpc.stub.ServerCallStreamObserver;\r\n    \r\n    public void getBook(GetBookRequest request, StreamObserver&lt;Book&gt; responseObserver) {\r\n      CompletableFuture&lt;Book&gt; bookContentFuture = bookService.getContent(request.getBookId());\r\n    \r\n      bookContentFuture.whenCompleteAsync((book, throwable) -&gt; {\r\n        if (throwable != null) {\r\n          StatusRuntimeException exception = Status.INTERNAL\r\n              .withDescription(&quot;Error retrieving book content&quot;)\r\n              .withCause(throwable)\r\n              .asRuntimeException();\r\n          responseObserver.onError(exception);\r\n        } else {\r\n          responseObserver.onNext(book);\r\n          responseObserver.onCompleted();\r\n        }\r\n      }, MoreExecutors.directExecutor());\r\n    }\r\n\r\n","title":"Do we have Future Datatype in Protobuf","body":"<p>generally not recommended to block and wait for CompletableFuture .</p>\n<p>if you have a small file size and dont want to use streaming, you can theoretically blcok and wait for CompletableFuture  before sending the response back.</p>\n<p>you can still return CompletableFuture from the service method.</p>\n<p>something like this</p>\n<pre><code>import io.grpc.stub.StreamObserver;\nimport io.grpc.Status;\nimport io.grpc.StatusRuntimeException;\nimport com.google.common.util.concurrent.MoreExecutors;\nimport io.grpc.stub.ServerCallStreamObserver;\n\npublic void getBook(GetBookRequest request, StreamObserver&lt;Book&gt; responseObserver) {\n  CompletableFuture&lt;Book&gt; bookContentFuture = bookService.getContent(request.getBookId());\n\n  bookContentFuture.whenCompleteAsync((book, throwable) -&gt; {\n    if (throwable != null) {\n      StatusRuntimeException exception = Status.INTERNAL\n          .withDescription(&quot;Error retrieving book content&quot;)\n          .withCause(throwable)\n          .asRuntimeException();\n      responseObserver.onError(exception);\n    } else {\n      responseObserver.onNext(book);\n      responseObserver.onCompleted();\n    }\n  }, MoreExecutors.directExecutor());\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689372606,"creation_date":1689372606,"answer_id":76691366,"question_id":76690515,"body_markdown":"It sounds like you&#39;re just looking for the [future stub](https://grpc.io/docs/languages/java/generated-code/#future-stub) or [asynchronous stub](https://grpc.io/docs/languages/java/generated-code/#asynchronous-stub).","title":"Do we have Future Datatype in Protobuf","body":"<p>It sounds like you're just looking for the <a href=\"https://grpc.io/docs/languages/java/generated-code/#future-stub\" rel=\"nofollow noreferrer\">future stub</a> or <a href=\"https://grpc.io/docs/languages/java/generated-code/#asynchronous-stub\" rel=\"nofollow noreferrer\">asynchronous stub</a>.</p>\n"}],"owner":{"account_id":315862,"reputation":2972,"user_id":2279170,"accept_rate":80,"display_name":"Jeevi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1689372606,"creation_date":1689361519,"question_id":76690515,"body_markdown":"I am exploring on `grpc` \r\n\r\nMy sample application fetches few records from Database + reads a file from S3(very small file) and returns the combined result. \r\n\r\nSince the file size is very less, i am not using streams. \r\n\r\nSo, the service layer of my application will return a `CompletableFuture`\r\n\r\n     CompletableFuture&lt;Book&gt; getContent(String bookId);\r\n\r\nMy Grpc ServiceBaseImpl will have the below code. \r\n\r\n      public void getBook(GetBookrequest request, StreamObserver&lt;Book&gt; responseObserver){\r\n        CompletableFuture&lt;Book&gt; bookContentFuture = bookService.getContent(request.getBookId());\r\n        Book book = bookContentFuture.get() ; // blocking \r\n        responseObserver.onNext(book);\r\n        responseObserver.onCompleted();\r\n    }\r\n\r\n\r\nHere i am making a blocking get call and waiting for the result before send the response back.\r\n\r\nIn Rest Application , i can have a controller which can return the `CompletableFuture&lt;Book&gt;` \r\n\r\nIs it possible to return a `Future` in GRPC .\r\nI don`t find any future type in protobuf , it means its okay to block before responding? \r\n","title":"Do we have Future Datatype in Protobuf","body":"<p>I am exploring on <code>grpc</code></p>\n<p>My sample application fetches few records from Database + reads a file from S3(very small file) and returns the combined result.</p>\n<p>Since the file size is very less, i am not using streams.</p>\n<p>So, the service layer of my application will return a <code>CompletableFuture</code></p>\n<pre><code> CompletableFuture&lt;Book&gt; getContent(String bookId);\n</code></pre>\n<p>My Grpc ServiceBaseImpl will have the below code.</p>\n<pre><code>  public void getBook(GetBookrequest request, StreamObserver&lt;Book&gt; responseObserver){\n    CompletableFuture&lt;Book&gt; bookContentFuture = bookService.getContent(request.getBookId());\n    Book book = bookContentFuture.get() ; // blocking \n    responseObserver.onNext(book);\n    responseObserver.onCompleted();\n}\n</code></pre>\n<p>Here i am making a blocking get call and waiting for the result before send the response back.</p>\n<p>In Rest Application , i can have a controller which can return the <code>CompletableFuture&lt;Book&gt;</code></p>\n<p>Is it possible to return a <code>Future</code> in GRPC .\nI don`t find any future type in protobuf , it means its okay to block before responding?</p>\n"},{"tags":["java","spring-boot","junit","apache-poi","xssf"],"answers":[{"comments":[{"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"score":1,"creation_date":1689372429,"post_id":76691338,"comment_id":135209625,"body_markdown":"I am doing similar stuff. You might want to think of a mock for the next method which writes the workbook to file. But by then you should be able to trust your createWorkbook method anyway.","body":"I am doing similar stuff. You might want to think of a mock for the next method which writes the workbook to file. But by then you should be able to trust your createWorkbook method anyway."}],"tags":[],"owner":{"account_id":29018746,"reputation":11,"user_id":22228646,"display_name":"SnazzY808"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689372140,"creation_date":1689372140,"answer_id":76691338,"question_id":76689962,"body_markdown":"I decided to just make assertions to the specific contents of the workbook instead of actually making another mock workbook. Like this\r\n\r\n    @Test\r\n        void test_createWorkbook() throws Exception{\r\n    \r\n    List&lt;Object&gt; data = new ArrayList&lt;Object&gt;();\r\n    //Populate data list logic here.\r\n    \r\n    XSSFWorkbook actualWorkbook = myservice.createWorkbook(data);\r\n    Assertions.assertEquals(&quot;Header1&quot;,actualWorkbookgetSheetAt(0).getRow(0).getCell(0).getStringCellValue());\r\n    Assertions.assertEquals(&quot;Header2&quot;,actualWorkbookgetSheetAt(0).getRow(0).getCell(1).getStringCellValue());\r\n    //And so on \r\n            }","title":"How do I make a Junit test to test a method that returns XSSFWorkbook?","body":"<p>I decided to just make assertions to the specific contents of the workbook instead of actually making another mock workbook. Like this</p>\n<pre><code>@Test\n    void test_createWorkbook() throws Exception{\n\nList&lt;Object&gt; data = new ArrayList&lt;Object&gt;();\n//Populate data list logic here.\n\nXSSFWorkbook actualWorkbook = myservice.createWorkbook(data);\nAssertions.assertEquals(&quot;Header1&quot;,actualWorkbookgetSheetAt(0).getRow(0).getCell(0).getStringCellValue());\nAssertions.assertEquals(&quot;Header2&quot;,actualWorkbookgetSheetAt(0).getRow(0).getCell(1).getStringCellValue());\n//And so on \n        }\n</code></pre>\n"}],"owner":{"account_id":29018746,"reputation":11,"user_id":22228646,"display_name":"SnazzY808"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":190,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689372140,"creation_date":1689355438,"question_id":76689962,"body_markdown":"I have a method like this \r\n```\r\n\r\npublic XSSFWorkbook createWorkbook(List&lt;Object&gt; Object){\r\n\r\n        String[] headers = new String[]{&quot;Header1&quot;,&quot;Header2&quot;......};\r\n    \r\n        XSSFWorkbook workbook = new XSSFWorkbook();\r\n\r\n        Sheet sheet = workbook.createSheet(&quot;Object&quot;);\r\n        sheet.setColumnWidth(0, 6000);\r\n        sheet.setColumnWidth(1, 4000);\r\n\r\n        Row header = sheet.createRow(0);\r\n        for(int i=0;i&lt;headers.length;i++){\r\n            //logic for adding headers in the first row\r\n            header.createCell(i).setCellValue(headers[i]);\r\n        }\r\n        \r\n        for(int x=0; x&lt;Object.size();x++){\r\n\r\n            Row data = sheet.createRow(x+1);\r\n\r\n            for(int y=0;y&lt;headers.length;y++){\r\n            //logic for adding cell data\r\n\r\n            }\r\n        }\r\n\r\n       return workbook;\r\n    }\r\n```\r\n\r\nI have another method that does the actual processing of the workbook file to an xlsx file.\r\n\r\nI just need to make a unit test for this specific method\r\n\r\nHow do I create a mock workbook or something that I can assert to the workbook I create in my original method? Something like this?\r\n\r\n```\r\n    @Test\r\n    void test_createWorkbook() throws Exception{\r\n\r\n        XSSFWorkbook mockWorkbook = mock(XSSFWorkbook.class);\r\n\r\n        List&lt;Object&gt; data = new ArrayList&lt;Object&gt;();\r\n        //Populate data list logic here.\r\n\r\n        XSSFWorkbook actualWorkbook = myservice.createWorkbook(data);\r\n        Assertions.assertEquals(mockWorkbook,actualWorkbook);\r\n    }\r\n```\r\nProblem with this is that the mockWorkbook is just filled with null data.\r\n","title":"How do I make a Junit test to test a method that returns XSSFWorkbook?","body":"<p>I have a method like this</p>\n<pre><code>\npublic XSSFWorkbook createWorkbook(List&lt;Object&gt; Object){\n\n        String[] headers = new String[]{&quot;Header1&quot;,&quot;Header2&quot;......};\n    \n        XSSFWorkbook workbook = new XSSFWorkbook();\n\n        Sheet sheet = workbook.createSheet(&quot;Object&quot;);\n        sheet.setColumnWidth(0, 6000);\n        sheet.setColumnWidth(1, 4000);\n\n        Row header = sheet.createRow(0);\n        for(int i=0;i&lt;headers.length;i++){\n            //logic for adding headers in the first row\n            header.createCell(i).setCellValue(headers[i]);\n        }\n        \n        for(int x=0; x&lt;Object.size();x++){\n\n            Row data = sheet.createRow(x+1);\n\n            for(int y=0;y&lt;headers.length;y++){\n            //logic for adding cell data\n\n            }\n        }\n\n       return workbook;\n    }\n</code></pre>\n<p>I have another method that does the actual processing of the workbook file to an xlsx file.</p>\n<p>I just need to make a unit test for this specific method</p>\n<p>How do I create a mock workbook or something that I can assert to the workbook I create in my original method? Something like this?</p>\n<pre><code>    @Test\n    void test_createWorkbook() throws Exception{\n\n        XSSFWorkbook mockWorkbook = mock(XSSFWorkbook.class);\n\n        List&lt;Object&gt; data = new ArrayList&lt;Object&gt;();\n        //Populate data list logic here.\n\n        XSSFWorkbook actualWorkbook = myservice.createWorkbook(data);\n        Assertions.assertEquals(mockWorkbook,actualWorkbook);\n    }\n</code></pre>\n<p>Problem with this is that the mockWorkbook is just filled with null data.</p>\n"},{"tags":["java","json","spring-boot","enums"],"answers":[{"comments":[{"owner":{"account_id":25799966,"reputation":5,"user_id":19542558,"display_name":"Abby"},"score":0,"creation_date":1687897120,"post_id":76568104,"comment_id":135000828,"body_markdown":"I tried implementing this but got the same error ```cannot deserialize value of type `path.AddressType` from String \\&quot;Mailing\\&quot;: not one of the values accepted for Enum class: [BUSINESS, MAILING, DELIVERY] ``` Maybe I&#39;m implementing this wrong?","body":"I tried implementing this but got the same error <code>cannot deserialize value of type `path.AddressType` from String \\&quot;Mailing\\&quot;: not one of the values accepted for Enum class: [BUSINESS, MAILING, DELIVERY] </code> Maybe I&#39;m implementing this wrong?"},{"owner":{"account_id":25799966,"reputation":5,"user_id":19542558,"display_name":"Abby"},"score":1,"creation_date":1687968201,"post_id":76568104,"comment_id":135011872,"body_markdown":"I moved the JsonDeserialize annotation to the top of the AddressType enum class and its now working. Yay!","body":"I moved the JsonDeserialize annotation to the top of the AddressType enum class and its now working. Yay!"}],"tags":[],"owner":{"account_id":27474693,"reputation":101,"user_id":20962908,"display_name":"Mert"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1687894679,"creation_date":1687894679,"answer_id":76568104,"question_id":76567920,"body_markdown":"A possible solution would be to create a custom deserializer using Jackson. This allows you to write custom code to perform the deserialization, giving you total control over how the data is interpreted.\r\n\r\nFirst, define a new deserializer class\r\n\r\n    import com.fasterxml.jackson.core.JsonParser;\r\n    import com.fasterxml.jackson.databind.DeserializationContext;\r\n    import com.fasterxml.jackson.databind.JsonDeserializer;\r\n    \r\n    import java.io.IOException;\r\n    \r\n    public class CaseInsensitiveEnumDeserializer extends JsonDeserializer&lt;AddressType&gt; {\r\n    \r\n        @Override\r\n        public AddressType deserialize(JsonParser jsonParser, DeserializationContext deserializationContext) \r\n            throws IOException {\r\n            return AddressType.valueOf(jsonParser.getText().toUpperCase());\r\n        }\r\n    }\r\nThen, in your DTO, use the @JsonDeserialize annotation to specify this new deserializer class\r\n\r\nimport com.fasterxml.jackson.databind.annotation.JsonDeserialize;\r\n\r\n    public class AddressResponseDTO {\r\n        @JsonDeserialize(using = CaseInsensitiveEnumDeserializer.class)\r\n        private AddressType addressType;\r\n        // your fields and methods\r\n    }\r\n\r\n\r\nThis code will now correctly deserialize any case variation of the AddressType enum values from the JSON response.","title":"How to change Json value to fit Enum case sensitivity using Springboot?","body":"<p>A possible solution would be to create a custom deserializer using Jackson. This allows you to write custom code to perform the deserialization, giving you total control over how the data is interpreted.</p>\n<p>First, define a new deserializer class</p>\n<pre><code>import com.fasterxml.jackson.core.JsonParser;\nimport com.fasterxml.jackson.databind.DeserializationContext;\nimport com.fasterxml.jackson.databind.JsonDeserializer;\n\nimport java.io.IOException;\n\npublic class CaseInsensitiveEnumDeserializer extends JsonDeserializer&lt;AddressType&gt; {\n\n    @Override\n    public AddressType deserialize(JsonParser jsonParser, DeserializationContext deserializationContext) \n        throws IOException {\n        return AddressType.valueOf(jsonParser.getText().toUpperCase());\n    }\n}\n</code></pre>\n<p>Then, in your DTO, use the @JsonDeserialize annotation to specify this new deserializer class</p>\n<p>import com.fasterxml.jackson.databind.annotation.JsonDeserialize;</p>\n<pre><code>public class AddressResponseDTO {\n    @JsonDeserialize(using = CaseInsensitiveEnumDeserializer.class)\n    private AddressType addressType;\n    // your fields and methods\n}\n</code></pre>\n<p>This code will now correctly deserialize any case variation of the AddressType enum values from the JSON response.</p>\n"},{"comments":[{"owner":{"account_id":25799966,"reputation":5,"user_id":19542558,"display_name":"Abby"},"score":0,"creation_date":1687960311,"post_id":76568805,"comment_id":135010015,"body_markdown":"I tried this and it just keeps giving me the same error cannot deserialize Mailing to MAILING. I feel like I&#39;ve tried everything and it just keeps ignoring it","body":"I tried this and it just keeps giving me the same error cannot deserialize Mailing to MAILING. I feel like I&#39;ve tried everything and it just keeps ignoring it"}],"tags":[],"owner":{"account_id":3430916,"reputation":3799,"user_id":3059385,"accept_rate":40,"display_name":"Christopher Schneider"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687901978,"creation_date":1687901978,"answer_id":76568805,"question_id":76567920,"body_markdown":"You&#39;re most likely using Jackson for deserialization, which supports ignoring case on enums.\r\n\r\nWhen initializing you `RestTemplate`, you can turn that feature on.\r\n\r\n\r\n    Jackson2ObjectMapperBuilder builder = Jackson2ObjectMapperBuilder\r\n      .json()\r\n      .featuresToEnable(MapperFeature.ACCEPT_CASE_INSENSITIVE_ENUMS);\r\n\r\n    MappingJackson2HttpMessageConverter jsonMessageConverter = new MappingJackson2HttpMessageConverter(builder.build());\r\n\r\n    RestTemplate restTemplate = new RestTemplateBuilder()\r\n      .defaultMessageConverters()\r\n      .additionalMessageConverters(jsonMessageConverter)\r\n      .build();\r\n","title":"How to change Json value to fit Enum case sensitivity using Springboot?","body":"<p>You're most likely using Jackson for deserialization, which supports ignoring case on enums.</p>\n<p>When initializing you <code>RestTemplate</code>, you can turn that feature on.</p>\n<pre><code>Jackson2ObjectMapperBuilder builder = Jackson2ObjectMapperBuilder\n  .json()\n  .featuresToEnable(MapperFeature.ACCEPT_CASE_INSENSITIVE_ENUMS);\n\nMappingJackson2HttpMessageConverter jsonMessageConverter = new MappingJackson2HttpMessageConverter(builder.build());\n\nRestTemplate restTemplate = new RestTemplateBuilder()\n  .defaultMessageConverters()\n  .additionalMessageConverters(jsonMessageConverter)\n  .build();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29019992,"reputation":1,"user_id":22229643,"display_name":"ik Wouter"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689371667,"creation_date":1689371667,"answer_id":76691308,"question_id":76567920,"body_markdown":"I tried solution of Christopher Schneider but this didn&#39;t work. In analizing the problem I added the next code:\r\n\r\n    restTemplate.getMessageConverters().stream().forEach(httpMessageConverter -&gt; System.out.println(httpMessageConverter.getClass()));\r\n\r\nI got the next output:\r\n\r\n    class org.springframework.http.converter.ByteArrayHttpMessageConverter\r\n    class org.springframework.http.converter.StringHttpMessageConverter\r\n    class org.springframework.http.converter.ResourceHttpMessageConverter\r\n    class org.springframework.http.converter.xml.SourceHttpMessageConverter\r\n    class org.springframework.http.converter.support.AllEncompassingFormHttpMessageConverter\r\n    class org.springframework.http.converter.xml.Jaxb2RootElementHttpMessageConverter\r\n    class org.springframework.http.converter.json.MappingJackson2HttpMessageConverter\r\n    class org.springframework.http.converter.json.MappingJackson2HttpMessageConverter\r\n\r\nAnd because there are now two MappingJackson2HttpMessageConverter it didn&#39;t work for me because the defaultMessageConverter was used.\r\n\r\nI solved the problem by getting the default MappingJackson2HttpMessageConverter from the restTemplate and setting my ObjectMapper option:\r\n\r\n    ...\r\n    \r\n        RestTemplate restTemplate = new RestTemplateBuilder()\r\n                .uriTemplateHandler(new DefaultUriBuilderFactory(baseUrl))\r\n                .defaultMessageConverters()\r\n                .build();\r\n\r\n        addObjectMapperOptionsForJacksonConverter(restTemplate);\r\n    \r\n    ....\r\n    \r\n    private static void addObjectMapperOptionsForJacksonConverter(RestTemplate restTemplate) {\r\n        MappingJackson2HttpMessageConverter jsonMessageConverter = (MappingJackson2HttpMessageConverter) restTemplate.getMessageConverters().stream()\r\n                .filter(MappingJackson2HttpMessageConverter.class::isInstance)\r\n                .findFirst()\r\n                .orElseThrow(() -&gt; new IllegalStateException(&quot;No default class is configured by Spring of class type MappingJackson2HttpMessageConverter. This should be the case!&quot;));\r\n        jsonMessageConverter.getObjectMapper().enable(DeserializationFeature.READ_UNKNOWN_ENUM_VALUES_USING_DEFAULT_VALUE);\r\n    }\r\n\r\nAnother option could be to use Christopher Schneider code without the defaultMessageConverters() but I didn&#39;t test this if this causes other problems.","title":"How to change Json value to fit Enum case sensitivity using Springboot?","body":"<p>I tried solution of Christopher Schneider but this didn't work. In analizing the problem I added the next code:</p>\n<pre><code>restTemplate.getMessageConverters().stream().forEach(httpMessageConverter -&gt; System.out.println(httpMessageConverter.getClass()));\n</code></pre>\n<p>I got the next output:</p>\n<pre><code>class org.springframework.http.converter.ByteArrayHttpMessageConverter\nclass org.springframework.http.converter.StringHttpMessageConverter\nclass org.springframework.http.converter.ResourceHttpMessageConverter\nclass org.springframework.http.converter.xml.SourceHttpMessageConverter\nclass org.springframework.http.converter.support.AllEncompassingFormHttpMessageConverter\nclass org.springframework.http.converter.xml.Jaxb2RootElementHttpMessageConverter\nclass org.springframework.http.converter.json.MappingJackson2HttpMessageConverter\nclass org.springframework.http.converter.json.MappingJackson2HttpMessageConverter\n</code></pre>\n<p>And because there are now two MappingJackson2HttpMessageConverter it didn't work for me because the defaultMessageConverter was used.</p>\n<p>I solved the problem by getting the default MappingJackson2HttpMessageConverter from the restTemplate and setting my ObjectMapper option:</p>\n<pre><code>...\n\n    RestTemplate restTemplate = new RestTemplateBuilder()\n            .uriTemplateHandler(new DefaultUriBuilderFactory(baseUrl))\n            .defaultMessageConverters()\n            .build();\n\n    addObjectMapperOptionsForJacksonConverter(restTemplate);\n\n....\n\nprivate static void addObjectMapperOptionsForJacksonConverter(RestTemplate restTemplate) {\n    MappingJackson2HttpMessageConverter jsonMessageConverter = (MappingJackson2HttpMessageConverter) restTemplate.getMessageConverters().stream()\n            .filter(MappingJackson2HttpMessageConverter.class::isInstance)\n            .findFirst()\n            .orElseThrow(() -&gt; new IllegalStateException(&quot;No default class is configured by Spring of class type MappingJackson2HttpMessageConverter. This should be the case!&quot;));\n    jsonMessageConverter.getObjectMapper().enable(DeserializationFeature.READ_UNKNOWN_ENUM_VALUES_USING_DEFAULT_VALUE);\n}\n</code></pre>\n<p>Another option could be to use Christopher Schneider code without the defaultMessageConverters() but I didn't test this if this causes other problems.</p>\n"}],"owner":{"account_id":25799966,"reputation":5,"user_id":19542558,"display_name":"Abby"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":93,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76568104,"answer_count":3,"score":0,"last_activity_date":1689371667,"creation_date":1687892926,"question_id":76567920,"body_markdown":"I&#39;ve run into an issue while building out my controller. I am sending a GET request to a third party and receiving back data that I then map to a DTO. One of those pieces of data is Address and AddressType.\r\n\r\nI am calling a third party with a GET request using:\r\n\r\n```\r\n        final ResponseEntity&lt;AddressResponseDTO&gt; response =\r\n                restTemplate.exchange(builder.build().toUri(),\r\n                        HttpMethod.GET,\r\n                        request,\r\n                        AddressResponseDTO.class);\r\n```\r\n\r\nThis is my Json Response:\r\n\r\n```\r\n&quot;addressType&quot;: &quot;Mailing&quot;,\r\n&quot;line1&quot;: &quot;123 Ave&quot;,\r\n&quot;line2&quot;: &quot;&quot;,\r\n&quot;city&quot;: &quot;New York&quot;,\r\n&quot;state&quot;: &quot;NY&quot;,\r\n```\r\n\r\nOriginally, I am mapping these values using\r\n\r\n```\r\n    @JsonProperty(&quot;addressType&quot;)\r\n    private AddressType addressType;\r\n\r\n    @JsonProperty(&quot;line1&quot;)\r\n    private String line1;\r\n\r\n    @JsonProperty(&quot;line2&quot;)\r\n    private String line2;\r\n\r\n    @JsonProperty(&quot;city&quot;)\r\n    private String city;\r\n\r\n    @JsonProperty(&quot;state&quot;)\r\n    private String state;\r\n```\r\n\r\nAddress Type is an enum.\r\n\r\n```\r\npublic enum AddressType {\r\n        BUSINESS,\r\n        MAILING,\r\n        DELIVERY\r\n\r\n}\r\n```\r\n\r\nThe problem is that the Json response returns Business instead of BUSINESS which throws an error. \r\n\r\nI tried adding this to the DTO:\r\n\r\n```\r\n   @JsonProperty(&quot;addressType&quot;)\r\n    private String addressEnum;\r\n\r\n    private AddressType addressType = AddressType.valueOf(addressEnum.toUpperCase());\r\n```\r\n\r\nBut it just ignores this. Is there a simple way to map Business to BUSINESS? I feel like this should be a simple Springboot annotation but I can&#39;t find anything.","title":"How to change Json value to fit Enum case sensitivity using Springboot?","body":"<p>I've run into an issue while building out my controller. I am sending a GET request to a third party and receiving back data that I then map to a DTO. One of those pieces of data is Address and AddressType.</p>\n<p>I am calling a third party with a GET request using:</p>\n<pre><code>        final ResponseEntity&lt;AddressResponseDTO&gt; response =\n                restTemplate.exchange(builder.build().toUri(),\n                        HttpMethod.GET,\n                        request,\n                        AddressResponseDTO.class);\n</code></pre>\n<p>This is my Json Response:</p>\n<pre><code>&quot;addressType&quot;: &quot;Mailing&quot;,\n&quot;line1&quot;: &quot;123 Ave&quot;,\n&quot;line2&quot;: &quot;&quot;,\n&quot;city&quot;: &quot;New York&quot;,\n&quot;state&quot;: &quot;NY&quot;,\n</code></pre>\n<p>Originally, I am mapping these values using</p>\n<pre><code>    @JsonProperty(&quot;addressType&quot;)\n    private AddressType addressType;\n\n    @JsonProperty(&quot;line1&quot;)\n    private String line1;\n\n    @JsonProperty(&quot;line2&quot;)\n    private String line2;\n\n    @JsonProperty(&quot;city&quot;)\n    private String city;\n\n    @JsonProperty(&quot;state&quot;)\n    private String state;\n</code></pre>\n<p>Address Type is an enum.</p>\n<pre><code>public enum AddressType {\n        BUSINESS,\n        MAILING,\n        DELIVERY\n\n}\n</code></pre>\n<p>The problem is that the Json response returns Business instead of BUSINESS which throws an error.</p>\n<p>I tried adding this to the DTO:</p>\n<pre><code>   @JsonProperty(&quot;addressType&quot;)\n    private String addressEnum;\n\n    private AddressType addressType = AddressType.valueOf(addressEnum.toUpperCase());\n</code></pre>\n<p>But it just ignores this. Is there a simple way to map Business to BUSINESS? I feel like this should be a simple Springboot annotation but I can't find anything.</p>\n"},{"tags":["java","serverless-framework","aws-lambda-layers"],"comments":[{"owner":{"account_id":6475519,"reputation":4496,"user_id":5014221,"accept_rate":71,"display_name":"Ashish Patil"},"score":2,"creation_date":1659624402,"post_id":73237852,"comment_id":129343378,"body_markdown":"https://docs.aws.amazon.com/lambda/latest/dg/java-samples.html","body":"<a href=\"https://docs.aws.amazon.com/lambda/latest/dg/java-samples.html\" rel=\"nofollow noreferrer\">docs.aws.amazon.com/lambda/latest/dg/java-samples.html</a>"},{"owner":{"account_id":6442492,"reputation":335,"user_id":4992072,"display_name":"Rhineb"},"score":0,"creation_date":1689347326,"post_id":73237852,"comment_id":135205252,"body_markdown":"@Ashish Patil  that link is not relevant for this question. This is specifically looking for an example of lambda layers when using java and the Serverless Framework.\n\nI second this question as I am also struggling to find a clear example of this. The quick reality is all a layer is is a java library. So it is possible to test this functionality locally by publishing your layer to maven local using shadowJar or the shade plugin. BUT... after you have tested locally it is not clear how to use the `serverless.yml` to get that layer uploaded.","body":"@Ashish Patil  that link is not relevant for this question. This is specifically looking for an example of lambda layers when using java and the Serverless Framework.  I second this question as I am also struggling to find a clear example of this. The quick reality is all a layer is is a java library. So it is possible to test this functionality locally by publishing your layer to maven local using shadowJar or the shade plugin. BUT... after you have tested locally it is not clear how to use the <code>serverless.yml</code> to get that layer uploaded."},{"owner":{"account_id":284924,"reputation":431,"user_id":583309,"accept_rate":24,"display_name":"Hussain Ashruf"},"score":0,"creation_date":1691791197,"post_id":73237852,"comment_id":135544390,"body_markdown":"I am able to reach the solution with maven using aws java layer. Utilizing it at other Java lambda functions.","body":"I am able to reach the solution with maven using aws java layer. Utilizing it at other Java lambda functions."}],"answers":[{"tags":[],"owner":{"account_id":6442492,"reputation":335,"user_id":4992072,"display_name":"Rhineb"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689370411,"creation_date":1689370411,"answer_id":76691234,"question_id":73237852,"body_markdown":"Okay so [here][1] is a rough answer. At least if you are not concerned with sharing the layers and if your not going for a minimal solution. For a more robust solution start by reading the above then do the following ... I have a whole project with multiple layers inside it - here is a screenshot of a single layer layout.\r\n\r\n[![enter image description here][2]][2]\r\n\r\nI think the thing that is most confusing in getting this to work right is everywhere talks about &quot;zipping&quot; the layer and while you can do that the process of zipping will only help you if you are intending to manually upload the layer. The linked blog post is partially/mostly correct but all that is actually needed is the `buildLayer` task. This will copy the dependencies to the build and make them available to serverless. To build the layer run `./gradlew clean build` ... this will result in\r\n\r\n[![enter image description here][3]][3]\r\n\r\n**build.gradle**\r\n\r\n```\r\nplugins {\r\n    id &quot;java&quot;                                                                                           // https://docs.gradle.org/current/userguide/java_plugin.html\r\n    id &quot;idea&quot;\r\n    id &#39;io.freefair.aspectj.post-compile-weaving&#39; version &quot;$postCompileWeaving&quot;\r\n}\r\n\r\nrepositories {\r\n    mavenCentral()\r\n}\r\n\r\n/** --------------------------------------------------------------------------------------------------------------------\r\n * Dependencies: Configuration for dependencyManagement and dependency blocks.\r\n * ------------------------------------------------------------------------------------------------------------------ */\r\ndependencies {\r\n    // -----------------------------------------------------------------------------------------------------------------\r\n    // PowerTools:\r\n    // -----------------------------------------------------------------------------------------------------------------\r\n    implementation &quot;org.aspectj:aspectjrt:$aspectJrt&quot;\r\n    // WARNING!!! The exclusions in the following dependencies are assuming you are including all 4 of these PowerTools\r\n    // dependencies. If you are not including all 4 then you should remove the exclusions and experiment yourself.\r\n    // This is included to have greater control over the other PowerTools dependencies\r\n    aspect (&quot;software.amazon.lambda:powertools-core:$awsPowerTools&quot;) {\r\n        exclude group: &#39;com.amazonaws&#39;, module: &#39;aws-lambda-java-core&#39;\r\n        exclude group: &#39;org.aspectj&#39;, module: &#39;aspectjrt&#39;\r\n    }\r\n    aspect (&quot;software.amazon.lambda:powertools-logging:$awsPowerTools&quot;) {\r\n        exclude group: &#39;com.amazonaws&#39;, module: &#39;aws-lambda-java-core&#39;\r\n        exclude group: &#39;org.aspectj&#39;, module: &#39;aspectjrt&#39;\r\n        exclude group: &#39;software.amazon.lambda&#39;, module: &#39;powertools-core&#39;\r\n    }\r\n    aspect (&quot;software.amazon.lambda:powertools-metrics:$awsPowerTools&quot;) {\r\n        exclude group: &#39;com.amazonaws&#39;, module: &#39;aws-lambda-java-core&#39;\r\n        exclude group: &#39;com.fasterxml.jackson.core&#39;, module: &#39;jackson-databind&#39;\r\n        exclude group: &#39;org.aspectj&#39;, module: &#39;aspectjrt&#39;\r\n        exclude group: &#39;software.amazon.lambda&#39;, module: &#39;powertools-core&#39;\r\n    }\r\n    aspect (&quot;software.amazon.lambda:powertools-tracing:$awsPowerTools&quot;) {\r\n        exclude group: &#39;com.amazonaws&#39;, module: &#39;aws-lambda-java-core&#39;\r\n        exclude group: &#39;com.fasterxml.jackson.core&#39;, module: &#39;jackson-databind&#39;\r\n        exclude group: &#39;software.amazon.awssdk&#39;, module: &#39;aws-core&#39;\r\n        exclude group: &#39;org.aspectj&#39;, module: &#39;aspectjrt&#39;\r\n        exclude group: &#39;software.amazon.lambda&#39;, module: &#39;powertools-core&#39;\r\n    }\r\n}\r\n\r\n// https://medium.com/consulner/speedup-aws-lambda-deployments-with-layers-12f8f24c7d0\r\n// How to build the layer for serverless in a way it can reference\r\ntask buildLayer(type: Copy) {\r\n    into &quot;$buildDir/layer/java/lib&quot;\r\n    from configurations.runtimeClasspath\r\n}\r\n\r\n// AWS suggested way - this will build all the dependencies as a zip ready for manual\r\n// upload to lambda BUT it can not be referenced by serverless.\r\ntask buildZip(type: Zip) {\r\n    into(&#39;lib&#39;) {\r\n        from(jar)\r\n        from(configurations.runtimeClasspath)\r\n    }\r\n}\r\n\r\nbuild.dependsOn buildLayer\r\n```\r\n\r\n\r\n\r\n**serverless.yml**\r\n\r\nNow let serverless do its thing. Map the directory that has all the dependencies in it from gradle to a layer in the `serverless.yml` file. Now when you run `sls deploy --aws-profile default --verbose`. When you run the deploy command it will automatically zip the dependencies into the correct format for the lambda.\r\n\r\n```\r\n\r\nframeworkVersion: &quot;3&quot;\r\nservice: aws-powertools-layer\r\n\r\ncustom:                                                # Set custom options / variables for serverless\r\n  serverlessPrefix: &#39;sls&#39;                              # Short name for serverless\r\n\r\nprovider:\r\n  name: aws                                             # Selected cloud provider\r\n  runtime: java17                                       # Selected runtime\r\n  stage: ${opt:stage, &#39;dev&#39;}                            # Uses user specified stage (--stage VALUE) or defaults to dev\r\n  region: ${opt:region, &#39;us-west-2&#39;}                    # Uses user specified region (--region VALUE) or defaults to `us-west-2`\r\n  deploymentBucket: # Collect all serverless deployment files in a single bucket\r\n    name: YOUR-BUCKET-NAME                              # Specify bucket name\r\n    serverSideEncryption: AES256                        # Specify bucket encryption\r\n    maxPreviousDeploymentArtifacts: 10                  # Max number of old builds to keep\r\n\r\nlayers:\r\n  powertools:\r\n    path: build/layer\r\n```\r\nOnce the serverless deploy is done it will return something like the following\r\n```\r\nlayers:\r\n  your-dependencies: arn:aws:lambda:us-west-X:XXXXXXXXX:layer:your-dependencies:1\r\n```\r\nYou can then place that arn in your primary application `serverless.yml` file as follows\r\n```\r\nprovider:\r\n    ...\r\n    layers:\r\n      - arn:aws:lambda:us-west-X:XXXXXXXXX:layer:your-dependencies:1\r\n```\r\nand now your primary application can use the layer you have built.\r\n\r\n***Note: There is no change required to your build.gradle dependencies block. This means you can still run your tests and everything else as normal***\r\n\r\n  [1]: https://medium.com/consulner/speedup-aws-lambda-deployments-with-layers-12f8f24c7d0\r\n  [2]: https://i.stack.imgur.com/yv0kY.png\r\n  [3]: https://i.stack.imgur.com/Tb9Uo.png","title":"Implement Java aws lambda layers in serverless.yml","body":"<p>Okay so <a href=\"https://medium.com/consulner/speedup-aws-lambda-deployments-with-layers-12f8f24c7d0\" rel=\"nofollow noreferrer\">here</a> is a rough answer. At least if you are not concerned with sharing the layers and if your not going for a minimal solution. For a more robust solution start by reading the above then do the following ... I have a whole project with multiple layers inside it - here is a screenshot of a single layer layout.</p>\n<p><a href=\"https://i.stack.imgur.com/yv0kY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yv0kY.png\" alt=\"enter image description here\" /></a></p>\n<p>I think the thing that is most confusing in getting this to work right is everywhere talks about &quot;zipping&quot; the layer and while you can do that the process of zipping will only help you if you are intending to manually upload the layer. The linked blog post is partially/mostly correct but all that is actually needed is the <code>buildLayer</code> task. This will copy the dependencies to the build and make them available to serverless. To build the layer run <code>./gradlew clean build</code> ... this will result in</p>\n<p><a href=\"https://i.stack.imgur.com/Tb9Uo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Tb9Uo.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>build.gradle</strong></p>\n<pre><code>plugins {\n    id &quot;java&quot;                                                                                           // https://docs.gradle.org/current/userguide/java_plugin.html\n    id &quot;idea&quot;\n    id 'io.freefair.aspectj.post-compile-weaving' version &quot;$postCompileWeaving&quot;\n}\n\nrepositories {\n    mavenCentral()\n}\n\n/** --------------------------------------------------------------------------------------------------------------------\n * Dependencies: Configuration for dependencyManagement and dependency blocks.\n * ------------------------------------------------------------------------------------------------------------------ */\ndependencies {\n    // -----------------------------------------------------------------------------------------------------------------\n    // PowerTools:\n    // -----------------------------------------------------------------------------------------------------------------\n    implementation &quot;org.aspectj:aspectjrt:$aspectJrt&quot;\n    // WARNING!!! The exclusions in the following dependencies are assuming you are including all 4 of these PowerTools\n    // dependencies. If you are not including all 4 then you should remove the exclusions and experiment yourself.\n    // This is included to have greater control over the other PowerTools dependencies\n    aspect (&quot;software.amazon.lambda:powertools-core:$awsPowerTools&quot;) {\n        exclude group: 'com.amazonaws', module: 'aws-lambda-java-core'\n        exclude group: 'org.aspectj', module: 'aspectjrt'\n    }\n    aspect (&quot;software.amazon.lambda:powertools-logging:$awsPowerTools&quot;) {\n        exclude group: 'com.amazonaws', module: 'aws-lambda-java-core'\n        exclude group: 'org.aspectj', module: 'aspectjrt'\n        exclude group: 'software.amazon.lambda', module: 'powertools-core'\n    }\n    aspect (&quot;software.amazon.lambda:powertools-metrics:$awsPowerTools&quot;) {\n        exclude group: 'com.amazonaws', module: 'aws-lambda-java-core'\n        exclude group: 'com.fasterxml.jackson.core', module: 'jackson-databind'\n        exclude group: 'org.aspectj', module: 'aspectjrt'\n        exclude group: 'software.amazon.lambda', module: 'powertools-core'\n    }\n    aspect (&quot;software.amazon.lambda:powertools-tracing:$awsPowerTools&quot;) {\n        exclude group: 'com.amazonaws', module: 'aws-lambda-java-core'\n        exclude group: 'com.fasterxml.jackson.core', module: 'jackson-databind'\n        exclude group: 'software.amazon.awssdk', module: 'aws-core'\n        exclude group: 'org.aspectj', module: 'aspectjrt'\n        exclude group: 'software.amazon.lambda', module: 'powertools-core'\n    }\n}\n\n// https://medium.com/consulner/speedup-aws-lambda-deployments-with-layers-12f8f24c7d0\n// How to build the layer for serverless in a way it can reference\ntask buildLayer(type: Copy) {\n    into &quot;$buildDir/layer/java/lib&quot;\n    from configurations.runtimeClasspath\n}\n\n// AWS suggested way - this will build all the dependencies as a zip ready for manual\n// upload to lambda BUT it can not be referenced by serverless.\ntask buildZip(type: Zip) {\n    into('lib') {\n        from(jar)\n        from(configurations.runtimeClasspath)\n    }\n}\n\nbuild.dependsOn buildLayer\n</code></pre>\n<p><strong>serverless.yml</strong></p>\n<p>Now let serverless do its thing. Map the directory that has all the dependencies in it from gradle to a layer in the <code>serverless.yml</code> file. Now when you run <code>sls deploy --aws-profile default --verbose</code>. When you run the deploy command it will automatically zip the dependencies into the correct format for the lambda.</p>\n<pre><code>\nframeworkVersion: &quot;3&quot;\nservice: aws-powertools-layer\n\ncustom:                                                # Set custom options / variables for serverless\n  serverlessPrefix: 'sls'                              # Short name for serverless\n\nprovider:\n  name: aws                                             # Selected cloud provider\n  runtime: java17                                       # Selected runtime\n  stage: ${opt:stage, 'dev'}                            # Uses user specified stage (--stage VALUE) or defaults to dev\n  region: ${opt:region, 'us-west-2'}                    # Uses user specified region (--region VALUE) or defaults to `us-west-2`\n  deploymentBucket: # Collect all serverless deployment files in a single bucket\n    name: YOUR-BUCKET-NAME                              # Specify bucket name\n    serverSideEncryption: AES256                        # Specify bucket encryption\n    maxPreviousDeploymentArtifacts: 10                  # Max number of old builds to keep\n\nlayers:\n  powertools:\n    path: build/layer\n</code></pre>\n<p>Once the serverless deploy is done it will return something like the following</p>\n<pre><code>layers:\n  your-dependencies: arn:aws:lambda:us-west-X:XXXXXXXXX:layer:your-dependencies:1\n</code></pre>\n<p>You can then place that arn in your primary application <code>serverless.yml</code> file as follows</p>\n<pre><code>provider:\n    ...\n    layers:\n      - arn:aws:lambda:us-west-X:XXXXXXXXX:layer:your-dependencies:1\n</code></pre>\n<p>and now your primary application can use the layer you have built.</p>\n<p><em><strong>Note: There is no change required to your build.gradle dependencies block. This means you can still run your tests and everything else as normal</strong></em></p>\n"}],"owner":{"account_id":284924,"reputation":431,"user_id":583309,"accept_rate":24,"display_name":"Hussain Ashruf"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":168,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1689370411,"creation_date":1659623997,"question_id":73237852,"body_markdown":"I am looking for java solution to aws lambda layers in serverless.yml. I could easily see python, nodejs, .net implementations but couldn&#39;t find example for Java. Appreciate an example.","title":"Implement Java aws lambda layers in serverless.yml","body":"<p>I am looking for java solution to aws lambda layers in serverless.yml. I could easily see python, nodejs, .net implementations but couldn't find example for Java. Appreciate an example.</p>\n"},{"tags":["java","crc"],"comments":[{"owner":{"account_id":9760,"reputation":85860,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":0,"creation_date":1689362779,"post_id":76690612,"comment_id":135208227,"body_markdown":"Make sure there&#39;s not a stray trailing newline in one of the calculator inputs.","body":"Make sure there&#39;s not a stray trailing newline in one of the calculator inputs."},{"owner":{"account_id":29019388,"reputation":1,"user_id":22229172,"display_name":"CodeNotFound"},"score":0,"creation_date":1689364400,"post_id":76690612,"comment_id":135208501,"body_markdown":"Thanks for the suggestion, checked it, and still got the same problem.","body":"Thanks for the suggestion, checked it, and still got the same problem."}],"answers":[{"comments":[{"owner":{"account_id":29019388,"reputation":1,"user_id":22229172,"display_name":"CodeNotFound"},"score":0,"creation_date":1689415937,"post_id":76691200,"comment_id":135212511,"body_markdown":"Great:) Thanks a lot, This fixed my problem","body":"Great:) Thanks a lot, This fixed my problem"}],"tags":[],"owner":{"account_id":1136690,"reputation":104411,"user_id":1180620,"accept_rate":83,"display_name":"Mark Adler"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689369946,"creation_date":1689369946,"answer_id":76691200,"question_id":76690612,"body_markdown":"You need to shift up.\r\n\r\n```\r\n        for (byte b : data) {\r\n            crc = crc ^ ((b &amp; 0xFF) &lt;&lt; 8);\r\n            for (int i = 0; i &lt; 8; i++) {\r\n                if ((crc &amp; 0x8000) != 0) {\r\n                    crc = (crc &lt;&lt; 1) ^ POLYNOMIAL;\r\n                } else {\r\n                    crc &lt;&lt;= 1;\r\n                }\r\n            }\r\n        }\r\n```","title":"Java - Discrepancy between Online Calculator and My CRC-16/EN-13757 Code Output","body":"<p>You need to shift up.</p>\n<pre><code>        for (byte b : data) {\n            crc = crc ^ ((b &amp; 0xFF) &lt;&lt; 8);\n            for (int i = 0; i &lt; 8; i++) {\n                if ((crc &amp; 0x8000) != 0) {\n                    crc = (crc &lt;&lt; 1) ^ POLYNOMIAL;\n                } else {\n                    crc &lt;&lt;= 1;\n                }\n            }\n        }\n</code></pre>\n"}],"owner":{"account_id":29019388,"reputation":1,"user_id":22229172,"display_name":"CodeNotFound"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689369946,"creation_date":1689362394,"question_id":76690612,"body_markdown":"Im currently working on implementing a CRC-16/EN-13757 algorithm in my code (im reusing a code i wrote sometime before), and Im encountering an issue where the output from my code differs from the result from an online calculater.\r\nhttps://crccalc.com/?crc=403126215E78563412000022&amp;method=CRC-16/EN-13757&amp;datatype=hex&amp;outtype=0\r\n\r\nThe polynomial is x^16 + x^13 + x^12 + x^11 + x^10 + x^8 + x^6 + x^4 + x^2 + 1, initial value is 0.\r\n\r\n\r\n\r\n\r\n```\r\npublic class crcTest {\r\n    private static final int INITIAL_VALUE = 0x0000;\r\n    private static final int POLYNOMIAL = 0x3D65;\r\n    private static final int XOR_OUT = 0xFFFF;\r\n\r\n    public static byte[] calc(byte[] data) {\r\n        int crc = INITIAL_VALUE;\r\n\r\n        for (byte b : data) {\r\n            crc = crc^(b &amp; 0xFF);\r\n            for (int i = 0; i &lt; 8; i++) {\r\n                if ((crc &amp; 0x0001) != 0) {\r\n                    crc = (crc &gt;&gt;&gt; 1) ^ POLYNOMIAL;\r\n                } else {\r\n                    crc &gt;&gt;&gt;= 1;\r\n                }\r\n            }\r\n        }\r\n\r\n        crc = crc^XOR_OUT;\r\n        return new byte[]{(byte) ((crc &gt;&gt; 8) &amp; 0xff), (byte) (crc &amp; 0xff)};\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        byte[] data = {0x40, 0x31, 0x26, 0x21, 0x5e, 0x78, 0x56, 0x34, 0x12, 0x00, 0x00, 0x22};\r\n        byte[] crcBytes = calc(data);\r\n\r\n        for (byte b : crcBytes) {\r\n            System.out.printf(&quot;%02X &quot;, b);\r\n        }\r\n    }\r\n}\r\n\r\n```\r\nThe results Im getting are 0xC920, but im expecting 0x5E87.\r\nI tried looking for sample code for CRC-16/EN-13757 but it didnt help a lot. \r\nI would greatly appreciate any suggestion to help find the error.\r\n\r\n\r\n```\r\npublic class CRC { \r\n\r\n    public static void main(String[] args) { \r\n        int crc = 0x0000;          // initial value\r\n        int polynomial = 0x3D65;   \r\n\r\n        byte[] data = {0x40, 0x31, 0x26, 0x21, 0x5e, 0x78, 0x56, 0x34, 0x12, 0x00, 0x00, 0x22};\r\n\r\n        for (byte b : data) {\r\n            for (int i = 0; i &lt; 8; i++) {\r\n                boolean bit = ((b   &gt;&gt; (7-i) &amp; 1) == 1);\r\n                boolean c15 = ((crc &gt;&gt; 15    &amp; 1) == 1);\r\n                crc &lt;&lt;= 1;\r\n                if (c15 ^ bit) crc ^= polynomial;\r\n             }\r\n        }\r\n\r\n        crc &amp;= 0xffff;\r\n        System.out.println(&quot;CRC16-CCITT = &quot; + Integer.toHexString(crc));\r\n    }\r\n\r\n}\r\n```\r\nTried this code from another post but im still getting different values.\r\n","title":"Java - Discrepancy between Online Calculator and My CRC-16/EN-13757 Code Output","body":"<p>Im currently working on implementing a CRC-16/EN-13757 algorithm in my code (im reusing a code i wrote sometime before), and Im encountering an issue where the output from my code differs from the result from an online calculater.\n<a href=\"https://crccalc.com/?crc=403126215E78563412000022&amp;method=CRC-16/EN-13757&amp;datatype=hex&amp;outtype=0\" rel=\"nofollow noreferrer\">https://crccalc.com/?crc=403126215E78563412000022&amp;method=CRC-16/EN-13757&amp;datatype=hex&amp;outtype=0</a></p>\n<p>The polynomial is x^16 + x^13 + x^12 + x^11 + x^10 + x^8 + x^6 + x^4 + x^2 + 1, initial value is 0.</p>\n<pre><code>public class crcTest {\n    private static final int INITIAL_VALUE = 0x0000;\n    private static final int POLYNOMIAL = 0x3D65;\n    private static final int XOR_OUT = 0xFFFF;\n\n    public static byte[] calc(byte[] data) {\n        int crc = INITIAL_VALUE;\n\n        for (byte b : data) {\n            crc = crc^(b &amp; 0xFF);\n            for (int i = 0; i &lt; 8; i++) {\n                if ((crc &amp; 0x0001) != 0) {\n                    crc = (crc &gt;&gt;&gt; 1) ^ POLYNOMIAL;\n                } else {\n                    crc &gt;&gt;&gt;= 1;\n                }\n            }\n        }\n\n        crc = crc^XOR_OUT;\n        return new byte[]{(byte) ((crc &gt;&gt; 8) &amp; 0xff), (byte) (crc &amp; 0xff)};\n    }\n\n    public static void main(String[] args) {\n        byte[] data = {0x40, 0x31, 0x26, 0x21, 0x5e, 0x78, 0x56, 0x34, 0x12, 0x00, 0x00, 0x22};\n        byte[] crcBytes = calc(data);\n\n        for (byte b : crcBytes) {\n            System.out.printf(&quot;%02X &quot;, b);\n        }\n    }\n}\n\n</code></pre>\n<p>The results Im getting are 0xC920, but im expecting 0x5E87.\nI tried looking for sample code for CRC-16/EN-13757 but it didnt help a lot.\nI would greatly appreciate any suggestion to help find the error.</p>\n<pre><code>public class CRC { \n\n    public static void main(String[] args) { \n        int crc = 0x0000;          // initial value\n        int polynomial = 0x3D65;   \n\n        byte[] data = {0x40, 0x31, 0x26, 0x21, 0x5e, 0x78, 0x56, 0x34, 0x12, 0x00, 0x00, 0x22};\n\n        for (byte b : data) {\n            for (int i = 0; i &lt; 8; i++) {\n                boolean bit = ((b   &gt;&gt; (7-i) &amp; 1) == 1);\n                boolean c15 = ((crc &gt;&gt; 15    &amp; 1) == 1);\n                crc &lt;&lt;= 1;\n                if (c15 ^ bit) crc ^= polynomial;\n             }\n        }\n\n        crc &amp;= 0xffff;\n        System.out.println(&quot;CRC16-CCITT = &quot; + Integer.toHexString(crc));\n    }\n\n}\n</code></pre>\n<p>Tried this code from another post but im still getting different values.</p>\n"},{"tags":["java","kotlin","okhttp","openai-api"],"answers":[{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1681889933,"post_id":76026866,"comment_id":134128044,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/76026866/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":28319184,"reputation":11,"user_id":21655265,"display_name":"QuinncyPP"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681638414,"creation_date":1681636640,"answer_id":76026866,"question_id":75921752,"body_markdown":"I modified the code, now ChatGPT can fully realize streaming conversation in the console via Java.\r\n\r\n    import com.theokanning.openai.completion.chat.*;\r\n    import com.theokanning.openai.service.OpenAiService;\r\n    import io.reactivex.Flowable;\r\n    import java.util.*;\r\n    \r\n    public class Starter {\r\n        // Create a new OpenAiService instance with the given API key\r\n        public static OpenAiService service = new OpenAiService(&quot;Your API Token&quot;);\r\n    \r\n        public static void main(String[] args) {\r\n            System.out.println(&quot;Streaming chat completion...&quot;);\r\n            Scanner scanner = new Scanner(System.in);\r\n            String userInput = scanner.nextLine();\r\n            // Create a list of ChatMessage objects\r\n            List&lt;ChatMessage&gt; message = new ArrayList&lt;ChatMessage&gt;();\r\n            message.add(new ChatMessage(ChatMessageRole.USER.value(), userInput));\r\n            // Create a ChatCompletionRequest object\r\n            ChatCompletionRequest chatCompletionRequest;\r\n            boolean running = true;\r\n            // Run the loop until the user enters &quot;exit&quot;\r\n            while (running) {\r\n                chatCompletionRequest = ChatCompletionRequest\r\n                        .builder()\r\n                        .model(&quot;gpt-3.5-turbo&quot;)\r\n                        .messages(message)\r\n                        .n(1)\r\n                        .maxTokens(500)\r\n                        .logitBias(Collections.emptyMap())\r\n                        .build();\r\n                // Create a Flowable object to stream the chat completion\r\n                Flowable&lt;ChatCompletionChunk&gt; flowableResult = service.streamChatCompletion(chatCompletionRequest);\r\n                // Create a StringBuilder object to store the result\r\n                StringBuilder buffer = new StringBuilder();\r\n                // Subscribe to the Flowable object and print the result\r\n                flowableResult.subscribe(chunk -&gt; {\r\n                    chunk.getChoices().forEach(choice -&gt; {\r\n                        String result = choice.getMessage().getContent();\r\n                        if (result != null) {\r\n                            buffer.append(result);\r\n                            System.out.print(choice.getMessage().getContent());\r\n                        }\r\n                    });\r\n                }, Throwable::printStackTrace, () -&gt; System.out.println());\r\n                // Get the user input\r\n                userInput = scanner.nextLine();\r\n                // Add the user input to the list of ChatMessage objects\r\n                message.add(new ChatMessage(ChatMessageRole.SYSTEM.value(), buffer.toString()));\r\n                message.add(new ChatMessage(ChatMessageRole.USER.value(), userInput));\r\n                // Exit the loop if the user enters &quot;exit&quot;\r\n                if (userInput.equals(&quot;exit&quot;)) {\r\n                    running = false;\r\n                }\r\n            }\r\n            scanner.close();\r\n            service.shutdownExecutor();\r\n        }\r\n    }","title":"OpenAI stream response in java","body":"<p>I modified the code, now ChatGPT can fully realize streaming conversation in the console via Java.</p>\n<pre><code>import com.theokanning.openai.completion.chat.*;\nimport com.theokanning.openai.service.OpenAiService;\nimport io.reactivex.Flowable;\nimport java.util.*;\n\npublic class Starter {\n    // Create a new OpenAiService instance with the given API key\n    public static OpenAiService service = new OpenAiService(&quot;Your API Token&quot;);\n\n    public static void main(String[] args) {\n        System.out.println(&quot;Streaming chat completion...&quot;);\n        Scanner scanner = new Scanner(System.in);\n        String userInput = scanner.nextLine();\n        // Create a list of ChatMessage objects\n        List&lt;ChatMessage&gt; message = new ArrayList&lt;ChatMessage&gt;();\n        message.add(new ChatMessage(ChatMessageRole.USER.value(), userInput));\n        // Create a ChatCompletionRequest object\n        ChatCompletionRequest chatCompletionRequest;\n        boolean running = true;\n        // Run the loop until the user enters &quot;exit&quot;\n        while (running) {\n            chatCompletionRequest = ChatCompletionRequest\n                    .builder()\n                    .model(&quot;gpt-3.5-turbo&quot;)\n                    .messages(message)\n                    .n(1)\n                    .maxTokens(500)\n                    .logitBias(Collections.emptyMap())\n                    .build();\n            // Create a Flowable object to stream the chat completion\n            Flowable&lt;ChatCompletionChunk&gt; flowableResult = service.streamChatCompletion(chatCompletionRequest);\n            // Create a StringBuilder object to store the result\n            StringBuilder buffer = new StringBuilder();\n            // Subscribe to the Flowable object and print the result\n            flowableResult.subscribe(chunk -&gt; {\n                chunk.getChoices().forEach(choice -&gt; {\n                    String result = choice.getMessage().getContent();\n                    if (result != null) {\n                        buffer.append(result);\n                        System.out.print(choice.getMessage().getContent());\n                    }\n                });\n            }, Throwable::printStackTrace, () -&gt; System.out.println());\n            // Get the user input\n            userInput = scanner.nextLine();\n            // Add the user input to the list of ChatMessage objects\n            message.add(new ChatMessage(ChatMessageRole.SYSTEM.value(), buffer.toString()));\n            message.add(new ChatMessage(ChatMessageRole.USER.value(), userInput));\n            // Exit the loop if the user enters &quot;exit&quot;\n            if (userInput.equals(&quot;exit&quot;)) {\n                running = false;\n            }\n        }\n        scanner.close();\n        service.shutdownExecutor();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3106126,"reputation":31281,"user_id":2628868,"accept_rate":84,"display_name":"Dolphin"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681638844,"creation_date":1681638844,"answer_id":76027035,"question_id":75921752,"body_markdown":"this is the okhttp with java to recieve the stream response from ChatGPT:\r\n\r\n\r\n\r\n\r\n \r\n\r\n     public static void okHttpEvent(SseEmitter emitter, String prompt, String openAiKey) {\r\n            Request request = new Request.Builder()\r\n                    .url(&quot;https://{open-api-address}/v1/chat/stream/completions?q=&quot; + prompt + &quot;&amp;eid=&quot; + RequestContext.getRequestId())\r\n                    .build();\r\n            OkHttpClient okHttpClient = new OkHttpClient.Builder().addInterceptor(new Interceptor() {\r\n                        @NonNull\r\n                        @Override\r\n                        public Response intercept(@NonNull Interceptor.Chain chain) throws IOException {\r\n                            Request original = chain.request();\r\n                            Request request = original.newBuilder()\r\n                                    .header(&quot;Authorization&quot;, &quot;Bearer &quot; + openAiKey)\r\n                                    .header(&quot;Accept&quot;, MediaType.TEXT_EVENT_STREAM.toString())\r\n                                    .method(original.method(), original.body())\r\n                                    .build();\r\n                            return chain.proceed(request);\r\n                        }\r\n                    })\r\n                    .connectTimeout(3, TimeUnit.MINUTES)\r\n                    .readTimeout(3, TimeUnit.MINUTES)\r\n                    .build();\r\n    \r\n            RealEventSource realEventSource = new RealEventSource(request, new EventSourceListener() {\r\n    \r\n                @Override\r\n                public void onOpen(EventSource eventSource, Response response) {\r\n    \r\n                }\r\n    \r\n                @Override\r\n                public void onEvent(EventSource eventSource, String id, String type, String data) {\r\n                    try {\r\n                        HttpUrl url = eventSource.request().url();\r\n                        String reqId = url.queryParameter(&quot;eid&quot;);\r\n                        SseChatService.getInstance().appendMsg(data, reqId);\r\n                        emitter.send(data);\r\n                    } catch (IOException e) {\r\n                        emitter.completeWithError(e);\r\n                        log.error(&quot;send sse to client error&quot;, e);\r\n                    }\r\n                }\r\n    \r\n                @Override\r\n                public void onClosed(EventSource eventSource) {\r\n                    emitter.complete();\r\n                }\r\n    \r\n                @Override\r\n                public void onFailure(EventSource eventSource, Throwable t, Response response) {\r\n                    emitter.completeWithError(t);\r\n                    log.error(&quot;event source failure&quot;, t);\r\n                }\r\n            });\r\n    \r\n            realEventSource.connect(okHttpClient);\r\n        }\r\n\r\n\r\n","title":"OpenAI stream response in java","body":"<p>this is the okhttp with java to recieve the stream response from ChatGPT:</p>\n<pre><code> public static void okHttpEvent(SseEmitter emitter, String prompt, String openAiKey) {\n        Request request = new Request.Builder()\n                .url(&quot;https://{open-api-address}/v1/chat/stream/completions?q=&quot; + prompt + &quot;&amp;eid=&quot; + RequestContext.getRequestId())\n                .build();\n        OkHttpClient okHttpClient = new OkHttpClient.Builder().addInterceptor(new Interceptor() {\n                    @NonNull\n                    @Override\n                    public Response intercept(@NonNull Interceptor.Chain chain) throws IOException {\n                        Request original = chain.request();\n                        Request request = original.newBuilder()\n                                .header(&quot;Authorization&quot;, &quot;Bearer &quot; + openAiKey)\n                                .header(&quot;Accept&quot;, MediaType.TEXT_EVENT_STREAM.toString())\n                                .method(original.method(), original.body())\n                                .build();\n                        return chain.proceed(request);\n                    }\n                })\n                .connectTimeout(3, TimeUnit.MINUTES)\n                .readTimeout(3, TimeUnit.MINUTES)\n                .build();\n\n        RealEventSource realEventSource = new RealEventSource(request, new EventSourceListener() {\n\n            @Override\n            public void onOpen(EventSource eventSource, Response response) {\n\n            }\n\n            @Override\n            public void onEvent(EventSource eventSource, String id, String type, String data) {\n                try {\n                    HttpUrl url = eventSource.request().url();\n                    String reqId = url.queryParameter(&quot;eid&quot;);\n                    SseChatService.getInstance().appendMsg(data, reqId);\n                    emitter.send(data);\n                } catch (IOException e) {\n                    emitter.completeWithError(e);\n                    log.error(&quot;send sse to client error&quot;, e);\n                }\n            }\n\n            @Override\n            public void onClosed(EventSource eventSource) {\n                emitter.complete();\n            }\n\n            @Override\n            public void onFailure(EventSource eventSource, Throwable t, Response response) {\n                emitter.completeWithError(t);\n                log.error(&quot;event source failure&quot;, t);\n            }\n        });\n\n        realEventSource.connect(okHttpClient);\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14274383,"reputation":2532,"user_id":10311008,"display_name":"Ovidijus Parsiunas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689368555,"creation_date":1689368555,"answer_id":76691094,"question_id":75921752,"body_markdown":"I have a working example using the `Flux` module, it is similar to `OkHttp` so hopefully it can help.\r\n\r\nThe example consumes an Open AI chat stream and sends it back to the client. Make sure to set the `openAIAPIKey` variable to your key.\r\n\r\n```java\r\nimport org.springframework.web.reactive.function.client.WebClient;\r\nimport org.springframework.core.io.buffer.DataBuffer;\r\nimport reactor.core.publisher.Flux;\r\nimport org.springframework.http.*;\r\n\r\n// ... class code\r\n\r\npublic Flux&lt;Object&gt; chatStream(OpenAIChatBody requestBody) {\r\n  try {\r\n    HttpHeaders headers = new HttpHeaders();\r\n    headers.setContentType(MediaType.APPLICATION_JSON);\r\n    headers.setBearerAuth(openAIAPIKey);\r\n    WebClient client = WebClient.create(&quot;https://api.openai.com/v1&quot;);\r\n    // Send the request to openAI\r\n    return client.post()\r\n      .uri(&quot;/chat/completions&quot;)\r\n      .headers(httpHeaders -&gt; httpHeaders.addAll(headers))\r\n      .bodyValue(requestBody)\r\n      .retrieve()\r\n      .bodyToFlux(DataBuffer.class)\r\n      .map(dataBuffer -&gt; dataBuffer.toString(StandardCharsets.UTF_8))\r\n      .concatMap(chunk -&gt; {\r\n        String[] lines = chunk.split(&quot;\\n&quot;);\r\n        return Flux.fromArray(lines)\r\n          .filter(line -&gt; !line.trim().isEmpty())\r\n          .map(line -&gt; line.replace(&quot;data:&quot;, &quot;&quot;)\r\n            .replace(&quot;[DONE]&quot;, &quot;&quot;)\r\n            .replace(&quot;data: [DONE]&quot;, &quot;&quot;)\r\n            .trim());\r\n      })\r\n      .filter(data -&gt; !data.isEmpty())\r\n      .concatMap(data -&gt; {\r\n        try {\r\n          Map&lt;String, Object&gt; resultObject = new ObjectMapper().readValue(data, Map.class);\r\n          // return data - you can parse the resultObject to whatever it is that you need\r\n          return Flux.just(resultObject);\r\n        } catch (JsonProcessingException e) {\r\n          return null;\r\n        }\r\n    });\r\n  } catch (Exception e) {\r\n    return null;\r\n  }\r\n}\r\n```\r\n\r\nYou will need to include the following dependencies in the `pom.xml` file:\r\n\r\n```\r\n&lt;dependencies&gt;\r\n    &lt;!-- ... other dependencies --&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-webflux&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;!-- This is for flux to stop displaying a potential DNS warning for MACs --&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;io.netty&lt;/groupId&gt;\r\n        &lt;artifactId&gt;netty-resolver-dns-native-macos&lt;/artifactId&gt;\r\n        &lt;version&gt;4.1.73.Final&lt;/version&gt;\r\n        &lt;classifier&gt;osx-aarch_64&lt;/classifier&gt;\r\n    &lt;/dependency&gt;\r\n&lt;/dependencies&gt;\r\n```\r\n\r\nAll of this code can be found in a working [file](https://github.com/OvidijusParsiunas/deep-chat/blob/main/example-servers/java/springboot/src/main/java/com/server/openAI/OpenAIService.java) in the following example [project](https://github.com/OvidijusParsiunas/deep-chat/tree/main/example-servers/java/springboot).","title":"OpenAI stream response in java","body":"<p>I have a working example using the <code>Flux</code> module, it is similar to <code>OkHttp</code> so hopefully it can help.</p>\n<p>The example consumes an Open AI chat stream and sends it back to the client. Make sure to set the <code>openAIAPIKey</code> variable to your key.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.springframework.web.reactive.function.client.WebClient;\nimport org.springframework.core.io.buffer.DataBuffer;\nimport reactor.core.publisher.Flux;\nimport org.springframework.http.*;\n\n// ... class code\n\npublic Flux&lt;Object&gt; chatStream(OpenAIChatBody requestBody) {\n  try {\n    HttpHeaders headers = new HttpHeaders();\n    headers.setContentType(MediaType.APPLICATION_JSON);\n    headers.setBearerAuth(openAIAPIKey);\n    WebClient client = WebClient.create(&quot;https://api.openai.com/v1&quot;);\n    // Send the request to openAI\n    return client.post()\n      .uri(&quot;/chat/completions&quot;)\n      .headers(httpHeaders -&gt; httpHeaders.addAll(headers))\n      .bodyValue(requestBody)\n      .retrieve()\n      .bodyToFlux(DataBuffer.class)\n      .map(dataBuffer -&gt; dataBuffer.toString(StandardCharsets.UTF_8))\n      .concatMap(chunk -&gt; {\n        String[] lines = chunk.split(&quot;\\n&quot;);\n        return Flux.fromArray(lines)\n          .filter(line -&gt; !line.trim().isEmpty())\n          .map(line -&gt; line.replace(&quot;data:&quot;, &quot;&quot;)\n            .replace(&quot;[DONE]&quot;, &quot;&quot;)\n            .replace(&quot;data: [DONE]&quot;, &quot;&quot;)\n            .trim());\n      })\n      .filter(data -&gt; !data.isEmpty())\n      .concatMap(data -&gt; {\n        try {\n          Map&lt;String, Object&gt; resultObject = new ObjectMapper().readValue(data, Map.class);\n          // return data - you can parse the resultObject to whatever it is that you need\n          return Flux.just(resultObject);\n        } catch (JsonProcessingException e) {\n          return null;\n        }\n    });\n  } catch (Exception e) {\n    return null;\n  }\n}\n</code></pre>\n<p>You will need to include the following dependencies in the <code>pom.xml</code> file:</p>\n<pre><code>&lt;dependencies&gt;\n    &lt;!-- ... other dependencies --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-webflux&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;!-- This is for flux to stop displaying a potential DNS warning for MACs --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;io.netty&lt;/groupId&gt;\n        &lt;artifactId&gt;netty-resolver-dns-native-macos&lt;/artifactId&gt;\n        &lt;version&gt;4.1.73.Final&lt;/version&gt;\n        &lt;classifier&gt;osx-aarch_64&lt;/classifier&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n<p>All of this code can be found in a working <a href=\"https://github.com/OvidijusParsiunas/deep-chat/blob/main/example-servers/java/springboot/src/main/java/com/server/openAI/OpenAIService.java\" rel=\"nofollow noreferrer\">file</a> in the following example <a href=\"https://github.com/OvidijusParsiunas/deep-chat/tree/main/example-servers/java/springboot\" rel=\"nofollow noreferrer\">project</a>.</p>\n"}],"owner":{"account_id":5603010,"reputation":984,"user_id":4438634,"accept_rate":39,"display_name":"Ziad Halabi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2294,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":3,"score":1,"last_activity_date":1689368555,"creation_date":1680539566,"question_id":75921752,"body_markdown":"The OpenAI `chat/completions` API supports a stream response by passing `stream=true`. This enables the response to come in chunks of data rather than one full response. It will be similar to how ChatGPT outputs answers.\r\n\r\nI see similar question for different languages or tech stack (like [here][1]). But I can&#39;t find a full example of how to implement that in java (or kotlin) with `OkHttp` client. \r\n\r\nHow do get OpenAI&#39;s API response in form of stream?\r\nThanks!\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/73547502/how-do-i-stream-openais-completion-api","title":"OpenAI stream response in java","body":"<p>The OpenAI <code>chat/completions</code> API supports a stream response by passing <code>stream=true</code>. This enables the response to come in chunks of data rather than one full response. It will be similar to how ChatGPT outputs answers.</p>\n<p>I see similar question for different languages or tech stack (like <a href=\"https://stackoverflow.com/questions/73547502/how-do-i-stream-openais-completion-api\">here</a>). But I can't find a full example of how to implement that in java (or kotlin) with <code>OkHttp</code> client.</p>\n<p>How do get OpenAI's API response in form of stream?\nThanks!</p>\n"},{"tags":["java","spring","spring-boot","dependency-injection","autowired"],"answers":[{"comments":[{"owner":{"account_id":10831060,"reputation":1,"user_id":7965433,"display_name":"user7965433"},"score":0,"creation_date":1689368255,"post_id":76691045,"comment_id":135209112,"body_markdown":"Thanks for the response. Question -  constructors are loaded only once when class is instantiated and not everytime when the class is called within the application. Does the same applies to @PostConstruct? Will this be called only once when class A loads or class B successfully?","body":"Thanks for the response. Question -  constructors are loaded only once when class is instantiated and not everytime when the class is called within the application. Does the same applies to @PostConstruct? Will this be called only once when class A loads or class B successfully?"},{"owner":{"account_id":13170666,"reputation":78679,"user_id":9513184,"display_name":"Unmitigated"},"score":0,"creation_date":1689368479,"post_id":76691045,"comment_id":135209152,"body_markdown":"@user7965433 It will only be called once after `B` is fully initialized, in this case.","body":"@user7965433 It will only be called once after <code>B</code> is fully initialized, in this case."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1689379456,"post_id":76691045,"comment_id":135210185,"body_markdown":"@user7965433 constructors are not &quot;loaded&quot;. They are called to initialise a newly created instance of a class. Methods annotated with `@PostConstruct` are called *by Spring* when *Spring* creates a new *instance* of a class. This has nothing to do with loading a class.","body":"@user7965433 constructors are not &quot;loaded&quot;. They are called to initialise a newly created instance of a class. Methods annotated with <code>@PostConstruct</code> are called <i>by Spring</i> when <i>Spring</i> creates a new <i>instance</i> of a class. This has nothing to do with loading a class."},{"owner":{"account_id":10831060,"reputation":1,"user_id":7965433,"display_name":"user7965433"},"score":0,"creation_date":1689381758,"post_id":76691045,"comment_id":135210310,"body_markdown":"@tgdavies So once the spring boot application is built, all classes are compiled and then post construct is called. After that, if any method in the application is executed , the PostConstruct won&#39;t be called.","body":"@tgdavies So once the spring boot application is built, all classes are compiled and then post construct is called. After that, if any method in the application is executed , the PostConstruct won&#39;t be called."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1689383140,"post_id":76691045,"comment_id":135210370,"body_markdown":"No, whenever Spring creates an instance of a class which has a method annotated with `@PostConstruct`, that method will be called. The instance will usually be created when the application starts, when Spring creates the &quot;application context&quot; and instantiates a single instance of classes annotated with `@Bean`, `@Component` and so on. But Spring can also create beans in other ways, and if it does, the annotated method will be called on those instances too.","body":"No, whenever Spring creates an instance of a class which has a method annotated with <code>@PostConstruct</code>, that method will be called. The instance will usually be created when the application starts, when Spring creates the &quot;application context&quot; and instantiates a single instance of classes annotated with <code>@Bean</code>, <code>@Component</code> and so on. But Spring can also create beans in other ways, and if it does, the annotated method will be called on those instances too."}],"tags":[],"owner":{"account_id":13170666,"reputation":78679,"user_id":9513184,"display_name":"Unmitigated"},"comment_count":5,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689368469,"creation_date":1689367801,"answer_id":76691045,"question_id":76690989,"body_markdown":"You need to use `@Autowired` or `@Inject` to get the bean for the `A` component. Spring handles the dependency injection, so if you try to create an instance on your own outside the application context, the `ServiceClass` will not be injected.\r\n\r\nIf you want to run some code after your class has been properly created, you can annotate a method with `@PostConstruct`.\r\n\r\n```java\r\n@Component\r\npublic class B {\r\n\t@Inject;\r\n\tA a;\r\n\t\r\n\t@PostConstruct\r\n\tprivate void postConstruct() {\r\n\t\ta.callsomeutility();\r\n\t}\r\n}\r\n```","title":"Spring Inject returning null when called from &#39;new&#39;","body":"<p>You need to use <code>@Autowired</code> or <code>@Inject</code> to get the bean for the <code>A</code> component. Spring handles the dependency injection, so if you try to create an instance on your own outside the application context, the <code>ServiceClass</code> will not be injected.</p>\n<p>If you want to run some code after your class has been properly created, you can annotate a method with <code>@PostConstruct</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\npublic class B {\n    @Inject;\n    A a;\n    \n    @PostConstruct\n    private void postConstruct() {\n        a.callsomeutility();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":10831060,"reputation":1,"user_id":7965433,"display_name":"user7965433"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689368469,"creation_date":1689367071,"question_id":76690989,"body_markdown":"`I have a @component class where I have a @scheduled method which runs every 5 min. Also I have an @inject class into this class. I am able to call the injected class from the scheduler method.\r\nI have another class, and I am using a constructor to call the @component class using &#39;new&#39;. The same Injected class is returning null from constructor. see below:\r\n\r\n   What am i doing wrong?\r\n   How is it possible to call the Injected class from the constructor?\r\n   Do i need to avoid using &#39;new&#39; ? Then will the callsomeutility() gets instantiated when the\r\n\r\n   class loads (basic how constructor works)?\r\n\r\n   I am getting null pointer exception for the Injected class from the constructor by explicitly  \r\n\r\n   calling &#39;new&#39;`\r\n\r\n\r\n```\r\n@component\r\n     public class A{\r\n@Inject\r\n    ServiceClass testservice\r\n\r\n A(){\r\n     callsomeutility();\r\n }\r\n\r\n  public void callsomeutility(){ \r\n     testservice.methodx(); //return Null\r\n  }\r\n\r\n@Scheduled(fixedRate=EVERY_FIVE_MIN)\r\n public void readeveryfivemin(){\r\n  testservice.methodx();  //works fine\r\n }\r\n}\r\npublic class B{\r\n@Inject\r\n   ServiceClass testservice\r\nA test= new A();\r\n}\r\n```\r\n","title":"Spring Inject returning null when called from &#39;new&#39;","body":"<p>`I have a @component class where I have a @scheduled method which runs every 5 min. Also I have an @inject class into this class. I am able to call the injected class from the scheduler method.\nI have another class, and I am using a constructor to call the @component class using 'new'. The same Injected class is returning null from constructor. see below:</p>\n<p>What am i doing wrong?\nHow is it possible to call the Injected class from the constructor?\nDo i need to avoid using 'new' ? Then will the callsomeutility() gets instantiated when the</p>\n<p>class loads (basic how constructor works)?</p>\n<p>I am getting null pointer exception for the Injected class from the constructor by explicitly</p>\n<p>calling 'new'`</p>\n<pre><code>@component\n     public class A{\n@Inject\n    ServiceClass testservice\n\n A(){\n     callsomeutility();\n }\n\n  public void callsomeutility(){ \n     testservice.methodx(); //return Null\n  }\n\n@Scheduled(fixedRate=EVERY_FIVE_MIN)\n public void readeveryfivemin(){\n  testservice.methodx();  //works fine\n }\n}\npublic class B{\n@Inject\n   ServiceClass testservice\nA test= new A();\n}\n</code></pre>\n"},{"tags":["java","interface","polymorphism","instanceof"],"comments":[{"owner":{"account_id":9760,"reputation":85860,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":0,"creation_date":1689362970,"post_id":76690593,"comment_id":135208260,"body_markdown":"Polymorphism would work only if the base interface contained all the methods of the subinterfaces, with appropriate default behaviors. You&#39;d still need to use instanceof (or reflection) however unless all the default behaviors were no-ops.","body":"Polymorphism would work only if the base interface contained all the methods of the subinterfaces, with appropriate default behaviors. You&#39;d still need to use instanceof (or reflection) however unless all the default behaviors were no-ops."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1689379740,"post_id":76690593,"comment_id":135210197,"body_markdown":"Am I correct in thinking that you need control to return to your main execution loop between each command that a `LoopCommand` executes? That is, you can move the loop to the body of `Repeat.execute()`.","body":"Am I correct in thinking that you need control to return to your main execution loop between each command that a <code>LoopCommand</code> executes? That is, you can move the loop to the body of <code>Repeat.execute()</code>."}],"answers":[{"comments":[{"owner":{"account_id":29009262,"reputation":3,"user_id":22221097,"display_name":"sco"},"score":0,"creation_date":1689368237,"post_id":76690681,"comment_id":135209110,"body_markdown":"Thank you. I red your comment about the XY problem, I didn&#39;t know this problem before,  but I  think you are right so I have edited the question. Could you help me?","body":"Thank you. I red your comment about the XY problem, I didn&#39;t know this problem before,  but I  think you are right so I have edited the question. Could you help me?"},{"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1689371220,"post_id":76690681,"comment_id":135209498,"body_markdown":"It&#39;s difficult to understand how this works with the supplied description.  But maybe you could just store the commands in a `List&lt;String&gt;` like &quot;move&quot; and &quot;repeat&quot; and  then use a `switch(command)` block  to chose the command and take the appropriate action.  And you can have nested switch blocks if required.","body":"It&#39;s difficult to understand how this works with the supplied description.  But maybe you could just store the commands in a <code>List&lt;String&gt;</code> like &quot;move&quot; and &quot;repeat&quot; and  then use a <code>switch(command)</code> block  to chose the command and take the appropriate action.  And you can have nested switch blocks if required."}],"tags":[],"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689363196,"creation_date":1689363196,"answer_id":76690681,"question_id":76690593,"body_markdown":"You can do it using `instanceof`\r\n```\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\ninterface A {\r\n    void methodA();\r\n}\r\n\r\ninterface B extends A {\r\n    void methodB();\r\n}\r\n\r\nclass CA implements A {\r\n    public void methodA() {\r\n        System.out.println(&quot;CA&#39;s implementation of interface A&quot;);\r\n    }\r\n}\r\n\r\nclass CB implements B {\r\n    public void methodA() {\r\n        System.out.println(&quot;CB&#39;s implementation of interface A&quot;);\r\n\r\n    }\r\n\r\n    public void methodB() {\r\n        System.out.println(&quot;CB&#39;s implementation of interface B&quot;);\r\n    }\r\n}\r\n\r\npublic class InstanceOfDemo {\r\n    public static void main(String[] args) {\r\n        List&lt;A&gt; list = new ArrayList&lt;&gt;();\r\n        list.add(new CA());\r\n        list.add(new CB());\r\n\r\n        for (A obj : list) {\r\n\r\n            if (obj instanceof B ob) {\r\n                ob.methodB();\r\n            } else {\r\n                obj.methodA();\r\n            }\r\n\r\n        }\r\n    }\r\n}\r\n```\r\nprints\r\n```\r\nCA&#39;s implementation of interface A\r\nCB&#39;s implementation of interface B\r\n","title":"List of objects implementing an interface and interface extension","body":"<p>You can do it using <code>instanceof</code></p>\n<pre><code>import java.util.ArrayList;\nimport java.util.List;\n\ninterface A {\n    void methodA();\n}\n\ninterface B extends A {\n    void methodB();\n}\n\nclass CA implements A {\n    public void methodA() {\n        System.out.println(&quot;CA's implementation of interface A&quot;);\n    }\n}\n\nclass CB implements B {\n    public void methodA() {\n        System.out.println(&quot;CB's implementation of interface A&quot;);\n\n    }\n\n    public void methodB() {\n        System.out.println(&quot;CB's implementation of interface B&quot;);\n    }\n}\n\npublic class InstanceOfDemo {\n    public static void main(String[] args) {\n        List&lt;A&gt; list = new ArrayList&lt;&gt;();\n        list.add(new CA());\n        list.add(new CB());\n\n        for (A obj : list) {\n\n            if (obj instanceof B ob) {\n                ob.methodB();\n            } else {\n                obj.methodA();\n            }\n\n        }\n    }\n}\n</code></pre>\n<p>prints</p>\n<pre><code>CA's implementation of interface A\nCB's implementation of interface B\n</code></pre>\n"}],"owner":{"account_id":29009262,"reputation":3,"user_id":22221097,"display_name":"sco"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76690681,"answer_count":1,"score":0,"last_activity_date":1689368320,"creation_date":1689362249,"question_id":76690593,"body_markdown":"If I have an interface A and an interface B that extends A.\r\nIn a List of A how can I recognise the objects that implement B and so call the methodB of interface B on them?\r\n\r\n\r\n\r\n\r\n\r\n```\r\npublic interface A{\r\n void methodA();\r\n}\r\n\r\npublic interface B extends A{\r\n void methodB();\r\n}\r\n\r\npublic class CA implements A{\r\n public void methodA(){}\r\n}\r\n\r\npublic class CB implements B{\r\n public void methodA(){}\r\n public void methodB(){}\r\n}\r\n\r\npublic static void main(String [] args){\r\n List&lt;A&gt; l = new ArrayList&lt;&gt;();\r\n l.add(new CA());\r\n l.add(new CB());\r\n}\r\n```\r\n\r\nShould I use instanceof or there are better solution using polymorphism?\r\n\r\n\r\n**Edit:**\r\nI’am trying to develop a hierarchy to execute some commands for a simple game. The basic commands like Move and MoveRandom implements the interface  Command. Now I want to add a repeat command and to manage the loop I have extended the Command interface with a LoopCommand interface(to respect the interface segregation principle). So when I have the List of Commands I need to know if the  command is a LoopCommand and in this case call the anotherIteraction() method to know if stay on the command or go to the next command. For this reason I have done the initial question. There are better hierarchy or solution to manage the loop commands?\r\n\r\n```\r\npublic interface Command{\r\n void execute();\r\n}\r\n\r\npublic interface LoopCommand extends Command{\r\n public boolean anotherIteraction();\r\n}\r\n\r\npublic class Move implements Command{\r\n public void execute(){}\r\n}\r\n\r\npublic class Repeat implements LoopCommand{\r\n private List&lt;Command&gt; body;\r\n private repetition;\r\n \r\n boolean anotherIteraction(){\r\n /*logics to determinate if there are other commands to execute*/\r\n }\r\n\r\n public void execute(){/*execute 1 command from the list body*/}\r\n}\r\n\r\npublic static void main(String[] args){\r\n List&lt;Command&gt; l = new ArrayList&lt;&gt;();\r\n l.add(new Move());\r\n l.add(new Repeat());\r\n int i=0;\r\n while(i&lt;l.size()){\r\n  l.get(i).execute();\r\n  if(l.get(i) instance of LoopCommand c){\r\n   if(!c.anotherIteraction)\r\n     i++;\r\n  } else \r\n      i++;\r\n }\r\n}\r\n\r\n```\r\n","title":"List of objects implementing an interface and interface extension","body":"<p>If I have an interface A and an interface B that extends A.\nIn a List of A how can I recognise the objects that implement B and so call the methodB of interface B on them?</p>\n<pre><code>public interface A{\n void methodA();\n}\n\npublic interface B extends A{\n void methodB();\n}\n\npublic class CA implements A{\n public void methodA(){}\n}\n\npublic class CB implements B{\n public void methodA(){}\n public void methodB(){}\n}\n\npublic static void main(String [] args){\n List&lt;A&gt; l = new ArrayList&lt;&gt;();\n l.add(new CA());\n l.add(new CB());\n}\n</code></pre>\n<p>Should I use instanceof or there are better solution using polymorphism?</p>\n<p><strong>Edit:</strong>\nI’am trying to develop a hierarchy to execute some commands for a simple game. The basic commands like Move and MoveRandom implements the interface  Command. Now I want to add a repeat command and to manage the loop I have extended the Command interface with a LoopCommand interface(to respect the interface segregation principle). So when I have the List of Commands I need to know if the  command is a LoopCommand and in this case call the anotherIteraction() method to know if stay on the command or go to the next command. For this reason I have done the initial question. There are better hierarchy or solution to manage the loop commands?</p>\n<pre><code>public interface Command{\n void execute();\n}\n\npublic interface LoopCommand extends Command{\n public boolean anotherIteraction();\n}\n\npublic class Move implements Command{\n public void execute(){}\n}\n\npublic class Repeat implements LoopCommand{\n private List&lt;Command&gt; body;\n private repetition;\n \n boolean anotherIteraction(){\n /*logics to determinate if there are other commands to execute*/\n }\n\n public void execute(){/*execute 1 command from the list body*/}\n}\n\npublic static void main(String[] args){\n List&lt;Command&gt; l = new ArrayList&lt;&gt;();\n l.add(new Move());\n l.add(new Repeat());\n int i=0;\n while(i&lt;l.size()){\n  l.get(i).execute();\n  if(l.get(i) instance of LoopCommand c){\n   if(!c.anotherIteraction)\n     i++;\n  } else \n      i++;\n }\n}\n\n</code></pre>\n"},{"tags":["java","spring-boot","azure","jwt","azure-ad-b2c"],"owner":{"account_id":5759905,"reputation":73,"user_id":4546657,"display_name":"steve"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689366985,"creation_date":1689366985,"question_id":76690979,"body_markdown":"While working on an Angular App connected to Azure B2C, I received the next exception while calling the Java API.\r\n\r\nTHE EXCEPTION\r\nWWW-Authenticate: Bearer error=&quot;invalid_token&quot;, error_description=&quot;An error occurred while attempting to decode the Jwt: The issuer: &#39;https://ABC.b2clogin.com/e761f276-37f8-499d-aaec-47801cdea4d1/v2.0/&#39; is not registered in trusted issuer repository, so cannot create JWSKeySelector.&quot;, error_uri=&quot;https://tools.ietf.org/html/rfc6750#section-3.1&quot;\r\n\r\nor \r\n\r\nWWW-Authenticate: Bearer error=&quot;invalid_token&quot;, error_description=&quot;An error occurred while attempting to decode the Jwt: Signed JWT rejected: Another algorithm expected, or no matching key(s) found&quot;, error_uri=&quot;https://tools.ietf.org/html/rfc6750#section-3.1&quot;\r\n\r\nHowever, the app functioned properly when I tried using the test curl with the client credentials.\r\n\r\n\r\nI was reviewing the issuer generation process and noticed a difference.\r\n\r\nWhen I used the client&#39;s credentials, the &quot;iss&quot; value was set to &quot;https://login.microsoftonline.com/e761f276-37f8-499d-aaec-47801cdea4d1/v2.0&quot;.\r\nHowever, when I used my Angular app, the &quot;iss&quot; value changed to &quot;https://ABC.b2clogin.com/e761f276-37f8-499d-aaec-47801cdea4d1/v2.0/&quot;.\r\n\r\nI used the samples. \r\n\r\n\r\nhttps://github.com/Azure-Samples/azure-spring-boot-samples/tree/main/aad/spring-cloud-azure-starter-active-directory-b2c/aad-b2c-resource-server\r\n\r\nhttps://github.com/Azure-Samples/ms-identity-msal-java-samples/tree/main/4.%20Spring%20Framework%20Web%20App%20Tutorial/3-Authorization-II/protect-web-api\r\n\r\n\r\n","title":"API java receive JWT from Angular application connected to Azure B2C","body":"<p>While working on an Angular App connected to Azure B2C, I received the next exception while calling the Java API.</p>\n<p>THE EXCEPTION\nWWW-Authenticate: Bearer error=&quot;invalid_token&quot;, error_description=&quot;An error occurred while attempting to decode the Jwt: The issuer: 'https://ABC.b2clogin.com/e761f276-37f8-499d-aaec-47801cdea4d1/v2.0/' is not registered in trusted issuer repository, so cannot create JWSKeySelector.&quot;, error_uri=&quot;https://tools.ietf.org/html/rfc6750#section-3.1&quot;</p>\n<p>or</p>\n<p>WWW-Authenticate: Bearer error=&quot;invalid_token&quot;, error_description=&quot;An error occurred while attempting to decode the Jwt: Signed JWT rejected: Another algorithm expected, or no matching key(s) found&quot;, error_uri=&quot;https://tools.ietf.org/html/rfc6750#section-3.1&quot;</p>\n<p>However, the app functioned properly when I tried using the test curl with the client credentials.</p>\n<p>I was reviewing the issuer generation process and noticed a difference.</p>\n<p>When I used the client's credentials, the &quot;iss&quot; value was set to &quot;https://login.microsoftonline.com/e761f276-37f8-499d-aaec-47801cdea4d1/v2.0&quot;.\nHowever, when I used my Angular app, the &quot;iss&quot; value changed to &quot;https://ABC.b2clogin.com/e761f276-37f8-499d-aaec-47801cdea4d1/v2.0/&quot;.</p>\n<p>I used the samples.</p>\n<p><a href=\"https://github.com/Azure-Samples/azure-spring-boot-samples/tree/main/aad/spring-cloud-azure-starter-active-directory-b2c/aad-b2c-resource-server\" rel=\"nofollow noreferrer\">https://github.com/Azure-Samples/azure-spring-boot-samples/tree/main/aad/spring-cloud-azure-starter-active-directory-b2c/aad-b2c-resource-server</a></p>\n<p><a href=\"https://github.com/Azure-Samples/ms-identity-msal-java-samples/tree/main/4.%20Spring%20Framework%20Web%20App%20Tutorial/3-Authorization-II/protect-web-api\" rel=\"nofollow noreferrer\">https://github.com/Azure-Samples/ms-identity-msal-java-samples/tree/main/4.%20Spring%20Framework%20Web%20App%20Tutorial/3-Authorization-II/protect-web-api</a></p>\n"},{"tags":["java","hibernate","spring-data-jpa"],"comments":[{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":0,"creation_date":1689013192,"post_id":76656300,"comment_id":135150230,"body_markdown":"First thing I&#39;d check is the speed or plan of both queries; maybe for this flavor this is better by some metric?","body":"First thing I&#39;d check is the speed or plan of both queries; maybe for this flavor this is better by some metric?"},{"owner":{"account_id":2669877,"reputation":11,"user_id":2307506,"display_name":"Alexandre Almeida"},"score":0,"creation_date":1689015402,"post_id":76656300,"comment_id":135150650,"body_markdown":"Hey, @DaveNewton! In fact, the Oracle execution plan for the query translated by Hibernate 6.2 shows some extra steps if compared to Hibernate 5.6, and also the cost is higher, even though both cost values are relatively low (9 and 6, respectively).","body":"Hey, @DaveNewton! In fact, the Oracle execution plan for the query translated by Hibernate 6.2 shows some extra steps if compared to Hibernate 5.6, and also the cost is higher, even though both cost values are relatively low (9 and 6, respectively)."},{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":0,"creation_date":1689015598,"post_id":76656300,"comment_id":135150697,"body_markdown":":shrug: Don&#39;t know then *(well, didn&#39;t know before, either)*.","body":":shrug: Don&#39;t know then <i>(well, didn&#39;t know before, either)</i>."}],"answers":[{"tags":[],"owner":{"account_id":4181375,"reputation":5121,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689366430,"creation_date":1689366430,"answer_id":76690927,"question_id":76656300,"body_markdown":"First of all, you most probably do not need to use `@Query`-annotated methods when retrieving entities by id, please check some thoughts on that here: [JPA Query with several different @Id columns](https://stackoverflow.com/a/74884096/3426309)\r\n\r\nThe behaviour you described was introduced in HBN6 and the relevant code is located in [AbstractSqlAstTranslator#visitRelationalPredicate](https://github.com/hibernate/hibernate-orm/blob/c5c3bb8ac8ae3ec657126d0ac01b55f416a8ff99/hibernate-core/src/main/java/org/hibernate/sql/ast/spi/AbstractSqlAstTranslator.java#L7527) method:\r\n\r\n```java\r\nelse if ( needsTupleComparisonEmulation( operator ) ) {\r\n\trhsTuple = SqlTupleContainer.getSqlTuple( rhsExpression );\r\n\tassert rhsTuple != null;\r\n\t// Some DBs like Oracle support tuples only for the IN subquery predicate\r\n\tif ( ( operator == ComparisonOperator.EQUAL || operator == ComparisonOperator.NOT_EQUAL ) &amp;&amp; supportsRowValueConstructorSyntaxInInSubQuery() ) {\r\n\t\tcomparisonPredicate.getLeftHandExpression().accept( this );\r\n\t\tif ( operator == ComparisonOperator.NOT_EQUAL ) {\r\n\t\t\tappendSql( &quot; not&quot; );\r\n\t\t}\r\n\t\tappendSql( &quot; in (&quot; );\r\n\t\trenderExpressionsAsSubquery( rhsTuple.getExpressions() );\r\n\t\tappendSql( CLOSE_PARENTHESIS );\r\n\t}\r\n\telse {\r\n\t\temulateTupleComparison(\r\n\t\t\t\tlhsTuple.getExpressions(),\r\n\t\t\t\trhsTuple.getExpressions(),\r\n\t\t\t\toperator,\r\n\t\t\t\ttrue\r\n\t\t);\r\n\t}\r\n}\r\n```\r\n\r\nIn this particular case, I would say HBN developers are not familiar with `Oracle` syntax, i.e. comment `Oracle support tuples only for the IN subquery predicate` in aforementioned code snippet is not correct: the standard `Oracle` way to write expressions comparing tuples is following (note double parenthesis):\r\n\r\n```sql\r\n(s1_0.idx,s1_0.idy,s1_0.idz) IN ((?,?,?))\r\n```\r\n\r\nIf you are experiencing performance issues I would recommend to raise a bug in [HBN Jira](https://hibernate.atlassian.net/jira/software/c/projects/HHH/issues/)","title":"Why is Hibernate 6.2 translating JPQL equals operator into IN operator?","body":"<p>First of all, you most probably do not need to use <code>@Query</code>-annotated methods when retrieving entities by id, please check some thoughts on that here: <a href=\"https://stackoverflow.com/a/74884096/3426309\">JPA Query with several different @Id columns</a></p>\n<p>The behaviour you described was introduced in HBN6 and the relevant code is located in <a href=\"https://github.com/hibernate/hibernate-orm/blob/c5c3bb8ac8ae3ec657126d0ac01b55f416a8ff99/hibernate-core/src/main/java/org/hibernate/sql/ast/spi/AbstractSqlAstTranslator.java#L7527\" rel=\"nofollow noreferrer\">AbstractSqlAstTranslator#visitRelationalPredicate</a> method:</p>\n<pre class=\"lang-java prettyprint-override\"><code>else if ( needsTupleComparisonEmulation( operator ) ) {\n    rhsTuple = SqlTupleContainer.getSqlTuple( rhsExpression );\n    assert rhsTuple != null;\n    // Some DBs like Oracle support tuples only for the IN subquery predicate\n    if ( ( operator == ComparisonOperator.EQUAL || operator == ComparisonOperator.NOT_EQUAL ) &amp;&amp; supportsRowValueConstructorSyntaxInInSubQuery() ) {\n        comparisonPredicate.getLeftHandExpression().accept( this );\n        if ( operator == ComparisonOperator.NOT_EQUAL ) {\n            appendSql( &quot; not&quot; );\n        }\n        appendSql( &quot; in (&quot; );\n        renderExpressionsAsSubquery( rhsTuple.getExpressions() );\n        appendSql( CLOSE_PARENTHESIS );\n    }\n    else {\n        emulateTupleComparison(\n                lhsTuple.getExpressions(),\n                rhsTuple.getExpressions(),\n                operator,\n                true\n        );\n    }\n}\n</code></pre>\n<p>In this particular case, I would say HBN developers are not familiar with <code>Oracle</code> syntax, i.e. comment <code>Oracle support tuples only for the IN subquery predicate</code> in aforementioned code snippet is not correct: the standard <code>Oracle</code> way to write expressions comparing tuples is following (note double parenthesis):</p>\n<pre class=\"lang-sql prettyprint-override\"><code>(s1_0.idx,s1_0.idy,s1_0.idz) IN ((?,?,?))\n</code></pre>\n<p>If you are experiencing performance issues I would recommend to raise a bug in <a href=\"https://hibernate.atlassian.net/jira/software/c/projects/HHH/issues/\" rel=\"nofollow noreferrer\">HBN Jira</a></p>\n"}],"owner":{"account_id":2669877,"reputation":11,"user_id":2307506,"display_name":"Alexandre Almeida"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":107,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1689366430,"creation_date":1689012702,"question_id":76656300,"body_markdown":"I have a Spring Boot 3.1.1 / Hibernate 6.2 application that connects to an Oracle 12c database using the following driver:\r\n\r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;com.oracle.database.jdbc&lt;/groupId&gt;\r\n    &lt;artifactId&gt;ojdbc8&lt;/artifactId&gt;\r\n    &lt;scope&gt;runtime&lt;/scope&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nThis application has the following repository interface and classes:\r\n\r\n```\r\npublic interface SomeEntityRepository extends Repository&lt;SomeEntity, SomeEntityId&gt; {\r\n  @Query(&quot;&quot;&quot;\r\n      FROM SomeEntity\r\n      WHERE id = :id\r\n        AND description is not null\r\n      &quot;&quot;&quot;)\r\n  Optional&lt;SomeEntity&gt; find(SomeEntityId id);\r\n}\r\n```\r\n\r\n```\r\n@Embeddable\r\npublic class SomeEntityId {\r\n    private Long idX;\r\n    private Long idY;\r\n    private Long idZ;\r\n}\r\n```\r\n\r\n```\r\n@Entity\r\npublic class SomeEntity {\r\n    @EmbeddedId\r\n    private SomeEntityId id;\r\n    private String description;\r\n}\r\n\r\n```\r\n\r\nWhen the `find` query gets executed, Hibernate 6.2 translates the JPQL into the following SQL:\r\n\r\n```\r\nHibernate: \r\n    select\r\n        s1_0.idx,\r\n        s1_0.idy,\r\n        s1_0.idz,\r\n        s1_0.description \r\n    from\r\n        some_entity s1_0 \r\n    where\r\n        (\r\n            s1_0.idx,s1_0.idy,s1_0.idz\r\n        ) in (select\r\n            ?,?,? \r\n        from\r\n            dual) \r\n        and s1_0.description is not null\r\n```\r\n\r\nI was wondering why is Hibernate 6.2 translating the `id = :id` into a sub query, and not just comparing the composite primary key field by field, like Hibernate 5 did?\r\n\r\n\r\nI tried to execute the same code in Spring Boot 2.7.13 / Hibernate 5.6, and the JPQL was translated as expected:\r\n\r\n```\r\nHibernate: \r\n    select\r\n        someentity0_.idx as idx1_1_,\r\n        someentity0_.idy as idy2_1_,\r\n        someentity0_.idz as idz3_1_,\r\n        someentity0_.description as description4_1_ \r\n    from\r\n        some_entity someentity0_ \r\n    where\r\n        someentity0_.idx=? \r\n        and someentity0_.idy=? \r\n        and someentity0_.idz=? \r\n        and (\r\n            someentity0_.description is not null\r\n        )\r\n```\r\n\r\nThe composite PK attributes were compared individually using `AND` and `=`, as opposed to Hibernate 6.2, that compared using the `IN` operator:\r\n\r\n```\r\n...\r\n        (\r\n            s1_0.idx,s1_0.idy,s1_0.idz\r\n        ) in (select\r\n            ?,?,? \r\n        from\r\n            dual) \r\n...\r\n```","title":"Why is Hibernate 6.2 translating JPQL equals operator into IN operator?","body":"<p>I have a Spring Boot 3.1.1 / Hibernate 6.2 application that connects to an Oracle 12c database using the following driver:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.oracle.database.jdbc&lt;/groupId&gt;\n    &lt;artifactId&gt;ojdbc8&lt;/artifactId&gt;\n    &lt;scope&gt;runtime&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>This application has the following repository interface and classes:</p>\n<pre><code>public interface SomeEntityRepository extends Repository&lt;SomeEntity, SomeEntityId&gt; {\n  @Query(&quot;&quot;&quot;\n      FROM SomeEntity\n      WHERE id = :id\n        AND description is not null\n      &quot;&quot;&quot;)\n  Optional&lt;SomeEntity&gt; find(SomeEntityId id);\n}\n</code></pre>\n<pre><code>@Embeddable\npublic class SomeEntityId {\n    private Long idX;\n    private Long idY;\n    private Long idZ;\n}\n</code></pre>\n<pre><code>@Entity\npublic class SomeEntity {\n    @EmbeddedId\n    private SomeEntityId id;\n    private String description;\n}\n\n</code></pre>\n<p>When the <code>find</code> query gets executed, Hibernate 6.2 translates the JPQL into the following SQL:</p>\n<pre><code>Hibernate: \n    select\n        s1_0.idx,\n        s1_0.idy,\n        s1_0.idz,\n        s1_0.description \n    from\n        some_entity s1_0 \n    where\n        (\n            s1_0.idx,s1_0.idy,s1_0.idz\n        ) in (select\n            ?,?,? \n        from\n            dual) \n        and s1_0.description is not null\n</code></pre>\n<p>I was wondering why is Hibernate 6.2 translating the <code>id = :id</code> into a sub query, and not just comparing the composite primary key field by field, like Hibernate 5 did?</p>\n<p>I tried to execute the same code in Spring Boot 2.7.13 / Hibernate 5.6, and the JPQL was translated as expected:</p>\n<pre><code>Hibernate: \n    select\n        someentity0_.idx as idx1_1_,\n        someentity0_.idy as idy2_1_,\n        someentity0_.idz as idz3_1_,\n        someentity0_.description as description4_1_ \n    from\n        some_entity someentity0_ \n    where\n        someentity0_.idx=? \n        and someentity0_.idy=? \n        and someentity0_.idz=? \n        and (\n            someentity0_.description is not null\n        )\n</code></pre>\n<p>The composite PK attributes were compared individually using <code>AND</code> and <code>=</code>, as opposed to Hibernate 6.2, that compared using the <code>IN</code> operator:</p>\n<pre><code>...\n        (\n            s1_0.idx,s1_0.idy,s1_0.idz\n        ) in (select\n            ?,?,? \n        from\n            dual) \n...\n</code></pre>\n"},{"tags":["java","json","serialization","jackson"],"answers":[{"tags":[],"owner":{"account_id":2014628,"reputation":3559,"user_id":1802221,"accept_rate":60,"display_name":"Rishikesh Dhokare"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1515753162,"creation_date":1515753162,"answer_id":48224369,"question_id":48224250,"body_markdown":"It really depends on the situation and the nature of your application. If the data your are receiving has no fixed structure/field names/data types or it is ever changing then of course using JsonObject makes more sense.\r\n\r\nOn the other hand, if it is of fixed structure and involves operations which access the fields, its better to go with pojo. It has better readability IMO.","title":"Shall I use POJO or JSONObject for REST calls","body":"<p>It really depends on the situation and the nature of your application. If the data your are receiving has no fixed structure/field names/data types or it is ever changing then of course using JsonObject makes more sense.</p>\n\n<p>On the other hand, if it is of fixed structure and involves operations which access the fields, its better to go with pojo. It has better readability IMO.</p>\n"},{"comments":[{"owner":{"account_id":3841568,"reputation":4593,"user_id":3184475,"accept_rate":80,"display_name":"Erran Morad"},"score":1,"creation_date":1558401816,"post_id":54595316,"comment_id":99079714,"body_markdown":"could you please explain all the above points in a little more detail ?","body":"could you please explain all the above points in a little more detail ?"},{"owner":{"account_id":1922053,"reputation":2613,"user_id":1733310,"accept_rate":64,"display_name":"Prasanna"},"score":1,"creation_date":1559074238,"post_id":54595316,"comment_id":99303722,"body_markdown":"@BoratSagdiyev I have added explanations for the above points inline.","body":"@BoratSagdiyev I have added explanations for the above points inline."}],"tags":[],"owner":{"account_id":1922053,"reputation":2613,"user_id":1733310,"accept_rate":64,"display_name":"Prasanna"},"comment_count":2,"down_vote_count":0,"up_vote_count":14,"is_accepted":true,"score":14,"last_activity_date":1689366384,"creation_date":1549638762,"answer_id":54595316,"question_id":48224250,"body_markdown":"I see the following advantages in having pojos\r\n\r\n1) Readability - You will not really know the structure of a complex json. writing a simple get will require one to know the structure of the json. Please refer to the &quot;POJOs over JSON Objects&quot; section of my article here -&gt; https://medium.com/tech-tablet/programming-went-wrong-oops-38d83058885\r\n\r\n2) Offers Type Checks - We could easily assign a Cat to a Dog and not even know about it till runtime.\r\n\r\n3) Feels more object-oriented with Composition &amp; encapsulation - It&#39;s easy to understand the designer&#39;s perspective with a POJO. A Car which IS-A Vehicle that HAS-A Wheel. \r\n\r\n4) You could choose what you wanna deserialize and keep only that in memory - When deserializing the object that we have just received over the network, with a JSON Object, there is no way to choose what has to be deserialized and stored into memory. If you have an object of 1 MB size where only 200 Bytes is your payload, we will end up holding the entire 1 MB object in memory if we don&#39;t use POJOs.\r\n\r\n5) Allows collection to be used and stream operations on them in a legible way - There is no native support for stream operations in a JsonNode. We will need to use a StreamStupport object which could be avoided.\r\n\r\n6) Allows cross framework referencing. With a few annotations, you can choose to map specific fields to a database client - When you use an ORM framework for you database, it&#39;s easy to annotate and map entities to the database schema.\r\n\r\n7) Naturally supports design patterns\r\n\r\n8) Minimalizing non-native dependencies - Why do you have to use a JsonNode or equivalent that does not come by itself in native Java? Especially if it has the above disadvantages.\r\n\r\nIf you are concerned about the rituals that come with a pojo like having getters, setters etc, take a look at &quot;Lombok&quot;. This library will help you create your pojos in a concise way and still reap the above benefits.\r\n\r\nOn the other hand if you are are dealing with a hard to change API that responds with a dynamically changing response, JsonNode is a quick win candidate.\r\n\r\n\r\n","title":"Shall I use POJO or JSONObject for REST calls","body":"<p>I see the following advantages in having pojos</p>\n<ol>\n<li><p>Readability - You will not really know the structure of a complex json. writing a simple get will require one to know the structure of the json. Please refer to the &quot;POJOs over JSON Objects&quot; section of my article here -&gt; <a href=\"https://medium.com/tech-tablet/programming-went-wrong-oops-38d83058885\" rel=\"nofollow noreferrer\">https://medium.com/tech-tablet/programming-went-wrong-oops-38d83058885</a></p>\n</li>\n<li><p>Offers Type Checks - We could easily assign a Cat to a Dog and not even know about it till runtime.</p>\n</li>\n<li><p>Feels more object-oriented with Composition &amp; encapsulation - It's easy to understand the designer's perspective with a POJO. A Car which IS-A Vehicle that HAS-A Wheel.</p>\n</li>\n<li><p>You could choose what you wanna deserialize and keep only that in memory - When deserializing the object that we have just received over the network, with a JSON Object, there is no way to choose what has to be deserialized and stored into memory. If you have an object of 1 MB size where only 200 Bytes is your payload, we will end up holding the entire 1 MB object in memory if we don't use POJOs.</p>\n</li>\n<li><p>Allows collection to be used and stream operations on them in a legible way - There is no native support for stream operations in a JsonNode. We will need to use a StreamStupport object which could be avoided.</p>\n</li>\n<li><p>Allows cross framework referencing. With a few annotations, you can choose to map specific fields to a database client - When you use an ORM framework for you database, it's easy to annotate and map entities to the database schema.</p>\n</li>\n<li><p>Naturally supports design patterns</p>\n</li>\n<li><p>Minimalizing non-native dependencies - Why do you have to use a JsonNode or equivalent that does not come by itself in native Java? Especially if it has the above disadvantages.</p>\n</li>\n</ol>\n<p>If you are concerned about the rituals that come with a pojo like having getters, setters etc, take a look at &quot;Lombok&quot;. This library will help you create your pojos in a concise way and still reap the above benefits.</p>\n<p>On the other hand if you are are dealing with a hard to change API that responds with a dynamically changing response, JsonNode is a quick win candidate.</p>\n"},{"tags":[],"owner":{"account_id":10897577,"reputation":1704,"user_id":8010985,"display_name":"Bishal Jaiswal"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1558464398,"creation_date":1558456948,"answer_id":56242884,"question_id":48224250,"body_markdown":"Depends on circumstances:\r\n\r\n - Use Pojo : \r\n 1. If the data fields are fixed like their name, type use Pojos, as it will be clear and easily readable.\r\n 3. Refactoring will be easier if it is used in many places.\r\n 4. If you want to persist this data in db then modification of data will also be easy. Suppose there is a data in your pojo which is used while performing calculation, but you don&#39;t want save it in db ( so you can simply do it by using `@Transient` keyword in java, but if you have used JsonObject this would have required some code changes).\r\n 5. Suppose you don&#39;t want to pass null values in the response, you can easily do it using pojos by using `@JsonInclude(Include.NON_EMPTY)` in java.\r\n\r\n\r\n - Use JsonObject:\r\n\r\n 1. If data fields are not fixed like their type or structure, so you won&#39;t be able to map it in pojo. ","title":"Shall I use POJO or JSONObject for REST calls","body":"<p>Depends on circumstances:</p>\n\n<ul>\n<li><p>Use Pojo : </p>\n\n<ol>\n<li>If the data fields are fixed like their name, type use Pojos, as it will be clear and easily readable.</li>\n<li>Refactoring will be easier if it is used in many places.</li>\n<li>If you want to persist this data in db then modification of data will also be easy. Suppose there is a data in your pojo which is used while performing calculation, but you don't want save it in db ( so you can simply do it by using <code>@Transient</code> keyword in java, but if you have used JsonObject this would have required some code changes).</li>\n<li>Suppose you don't want to pass null values in the response, you can easily do it using pojos by using <code>@JsonInclude(Include.NON_EMPTY)</code> in java.</li>\n</ol></li>\n<li><p>Use JsonObject:</p>\n\n<ol>\n<li>If data fields are not fixed like their type or structure, so you won't be able to map it in pojo. </li>\n</ol></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":3793595,"reputation":2392,"user_id":3149444,"accept_rate":56,"display_name":"Perimosh"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1558647056,"creation_date":1558647056,"answer_id":56283171,"question_id":48224250,"body_markdown":"I want to add:\r\n\r\n- with POJOs you can use the builder pattern.\r\n\r\n- future refactors will be more easy. Imagine you have a class Person, and you use this class in many places in your code. If your Person class needs to change one of its fields, then you can find easily where to change it.\r\n\r\n- using POJOs makes your code more cohesive with your domain. If you are writing code for a car company, you will have classes like Car, Wheels, Engine, etc. Your code will become more readable and testable.\r\n\r\n","title":"Shall I use POJO or JSONObject for REST calls","body":"<p>I want to add:</p>\n\n<ul>\n<li><p>with POJOs you can use the builder pattern.</p></li>\n<li><p>future refactors will be more easy. Imagine you have a class Person, and you use this class in many places in your code. If your Person class needs to change one of its fields, then you can find easily where to change it.</p></li>\n<li><p>using POJOs makes your code more cohesive with your domain. If you are writing code for a car company, you will have classes like Car, Wheels, Engine, etc. Your code will become more readable and testable.</p></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":5160541,"reputation":357,"user_id":5332993,"accept_rate":40,"display_name":"Satyendra Kumar"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1558864452,"creation_date":1558864452,"answer_id":56312467,"question_id":48224250,"body_markdown":"&gt; Their view is while using pojo we are binding tightly with the rest service, while jsonObject gives freedom. \r\n\r\nAsk them for how long this freedom is required? Is the API model going to change always? It WILL settle down at some point. Also, how is it binding tightly? If there is some part of the model that you are not sure of, you can create a generic object for that part, that will give you as much flexibility as you want.\r\n\r\n&gt; Also it saves from unnecessary data serialisation at the same time reducing number of classes heavily.\r\n\r\nI don&#39;t think it is unnecessary. Using JsonObject directly is simply cumbersome. \r\nAbout reducing the number of classes, you should anyway have some model class for data that is being exchanged. It gives more clarity. If you are using Swagger, it will add to the specification of your REST endpoints. Swagger automatically creates forms to enter data based on the data model. API becomes easier to maintain (no extra documentation required). Testing becomes easier.  \r\n\r\n&gt; I don&#39;t know exactly on the cost of deserialisation, but somehow I have a feeling it shouldn&#39;t be much difference.\r\n\r\nThe only way to be sure is benchmarking. You can use this as a starting point to get an insight and compare the current implementation [https://github.com/fabienrenaud/java-json-benchmark][1].\r\n\r\n\r\n  [1]: https://github.com/fabienrenaud/java-json-benchmark","title":"Shall I use POJO or JSONObject for REST calls","body":"<blockquote>\n  <p>Their view is while using pojo we are binding tightly with the rest service, while jsonObject gives freedom. </p>\n</blockquote>\n\n<p>Ask them for how long this freedom is required? Is the API model going to change always? It WILL settle down at some point. Also, how is it binding tightly? If there is some part of the model that you are not sure of, you can create a generic object for that part, that will give you as much flexibility as you want.</p>\n\n<blockquote>\n  <p>Also it saves from unnecessary data serialisation at the same time reducing number of classes heavily.</p>\n</blockquote>\n\n<p>I don't think it is unnecessary. Using JsonObject directly is simply cumbersome. \nAbout reducing the number of classes, you should anyway have some model class for data that is being exchanged. It gives more clarity. If you are using Swagger, it will add to the specification of your REST endpoints. Swagger automatically creates forms to enter data based on the data model. API becomes easier to maintain (no extra documentation required). Testing becomes easier.  </p>\n\n<blockquote>\n  <p>I don't know exactly on the cost of deserialisation, but somehow I have a feeling it shouldn't be much difference.</p>\n</blockquote>\n\n<p>The only way to be sure is benchmarking. You can use this as a starting point to get an insight and compare the current implementation <a href=\"https://github.com/fabienrenaud/java-json-benchmark\" rel=\"nofollow noreferrer\">https://github.com/fabienrenaud/java-json-benchmark</a>.</p>\n"},{"tags":[],"owner":{"account_id":1521409,"reputation":6658,"user_id":1420941,"display_name":"stringy05"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1559004115,"creation_date":1559004115,"answer_id":56333785,"question_id":48224250,"body_markdown":"This argument really boils down to whether you want to use POJOs or Maps for the data you are dealing with, as that is the fundamental difference between the 2 styles of handling data. \r\n\r\nJsonObject ([from jee7][1]) is just a Map (the actual type signature extends `Map&lt;String, JsonValue&gt;`).\r\n\r\nUsing POJO&#39;s (eg deserialised using [Jackson][2]) are real objects. \r\n\r\nSo if you dont use domain/model classes for your data normally then I guess a `Map` will do. If you do (like most developers would), then it&#39;s a good idea to extend this practice to your API contracts. \r\n\r\nTo address specific points:\r\n\r\n&gt; JsonObject saves from unnecessary data serialisation at the same time reducing number of classes heavily.\r\n\r\nIt doesn&#39;t, both of these JSON API&#39;s require serialisation/deserialisation, which is the process of turning wire data into an object. I would bet that Jackson is faster than JsonObject, however as Satyendra Kumar pointed out benchmarking is going to prove it one way or other. \r\n\r\n&gt;  while using pojo we are binding tightly with the rest service, while jsonObject gives freedom\r\n\r\nIf you are using the data from the API you are bound to the data model, whether you get the data from a property `foo` by `response.getFoo()` or `response.get(&quot;foo&quot;)`. \r\n\r\nFor a really comprehensive discussion on the tradeoffs between classes and maps, [check out this SoftwareEngineering post][3]\r\n\r\nIt&#39;s worth pointing out that using Jackson/POJOs doesn&#39;t mean you are tightly coupled to your local model of a REST response. Jackson has excellent support for the [Tolerant Reader][4] pattern, which means that new fields in the API response will not break deserialisation, and a bunch of annotations like `@JsonCreator`, `@JsonValue`, `@JsonIgnore` for mapping the API responses back to your local domain model. \r\n\r\nIt also provides powerful tools for dealing with collections and generics.\r\n\r\nFinally if the service you are interacting with is big and complex, if they provide a swagger/raml spec then you can [generate the models][5] based on that spec which should greatly reduce the time taken to curate the POJOs. \r\n\r\n\r\n  [1]: https://docs.oracle.com/javaee/7/api/javax/json/JsonObject.html\r\n  [2]: https://github.com/FasterXML/jackson\r\n  [3]: https://softwareengineering.stackexchange.com/questions/272302/use-map-instead-of-class-to-represent-data-rich-hickey\r\n  [4]: https://martinfowler.com/bliki/TolerantReader.html\r\n  [5]: https://github.com/swagger-api/swagger-codegen","title":"Shall I use POJO or JSONObject for REST calls","body":"<p>This argument really boils down to whether you want to use POJOs or Maps for the data you are dealing with, as that is the fundamental difference between the 2 styles of handling data. </p>\n\n<p>JsonObject (<a href=\"https://docs.oracle.com/javaee/7/api/javax/json/JsonObject.html\" rel=\"nofollow noreferrer\">from jee7</a>) is just a Map (the actual type signature extends <code>Map&lt;String, JsonValue&gt;</code>).</p>\n\n<p>Using POJO's (eg deserialised using <a href=\"https://github.com/FasterXML/jackson\" rel=\"nofollow noreferrer\">Jackson</a>) are real objects. </p>\n\n<p>So if you dont use domain/model classes for your data normally then I guess a <code>Map</code> will do. If you do (like most developers would), then it's a good idea to extend this practice to your API contracts. </p>\n\n<p>To address specific points:</p>\n\n<blockquote>\n  <p>JsonObject saves from unnecessary data serialisation at the same time reducing number of classes heavily.</p>\n</blockquote>\n\n<p>It doesn't, both of these JSON API's require serialisation/deserialisation, which is the process of turning wire data into an object. I would bet that Jackson is faster than JsonObject, however as Satyendra Kumar pointed out benchmarking is going to prove it one way or other. </p>\n\n<blockquote>\n  <p>while using pojo we are binding tightly with the rest service, while jsonObject gives freedom</p>\n</blockquote>\n\n<p>If you are using the data from the API you are bound to the data model, whether you get the data from a property <code>foo</code> by <code>response.getFoo()</code> or <code>response.get(\"foo\")</code>. </p>\n\n<p>For a really comprehensive discussion on the tradeoffs between classes and maps, <a href=\"https://softwareengineering.stackexchange.com/questions/272302/use-map-instead-of-class-to-represent-data-rich-hickey\">check out this SoftwareEngineering post</a></p>\n\n<p>It's worth pointing out that using Jackson/POJOs doesn't mean you are tightly coupled to your local model of a REST response. Jackson has excellent support for the <a href=\"https://martinfowler.com/bliki/TolerantReader.html\" rel=\"nofollow noreferrer\">Tolerant Reader</a> pattern, which means that new fields in the API response will not break deserialisation, and a bunch of annotations like <code>@JsonCreator</code>, <code>@JsonValue</code>, <code>@JsonIgnore</code> for mapping the API responses back to your local domain model. </p>\n\n<p>It also provides powerful tools for dealing with collections and generics.</p>\n\n<p>Finally if the service you are interacting with is big and complex, if they provide a swagger/raml spec then you can <a href=\"https://github.com/swagger-api/swagger-codegen\" rel=\"nofollow noreferrer\">generate the models</a> based on that spec which should greatly reduce the time taken to curate the POJOs. </p>\n"}],"owner":{"account_id":4873489,"reputation":892,"user_id":3929266,"accept_rate":48,"display_name":"rohit"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7960,"favorite_count":0,"down_vote_count":1,"up_vote_count":15,"accepted_answer_id":54595316,"answer_count":6,"score":14,"last_activity_date":1689366384,"creation_date":1515752798,"question_id":48224250,"body_markdown":"Recently I have stumbled upon a situation where my new team is heavily using JsonObject for doing rest data interchange. Their view is while using pojo we are binding tightly with the rest service, while jsonObject gives freedom. Also it saves from unnecessary data serialisation at the same time reducing number of classes heavily.\r\n\r\nI have some points to encounter them as:\r\n \r\n1. Pojo gives more meaning to data and we are holding data with correct data type.\r\n2. If we need only 2 fields of 10 fields of json, we can deserialize to 2 fields class with `@JsonIgnore`\r\n\r\nI don&#39;t know exactly on the cost of deserialisation, but somehow I have a feeling it shouldn&#39;t be much difference.\r\n\r\nCan someone help me understand which perspective is way to go ? \r\n\r\nPlease provide some pros and cons of using POJO and JSONObject.\r\n\r\nThanks","title":"Shall I use POJO or JSONObject for REST calls","body":"<p>Recently I have stumbled upon a situation where my new team is heavily using JsonObject for doing rest data interchange. Their view is while using pojo we are binding tightly with the rest service, while jsonObject gives freedom. Also it saves from unnecessary data serialisation at the same time reducing number of classes heavily.</p>\n\n<p>I have some points to encounter them as:</p>\n\n<ol>\n<li>Pojo gives more meaning to data and we are holding data with correct data type.</li>\n<li>If we need only 2 fields of 10 fields of json, we can deserialize to 2 fields class with <code>@JsonIgnore</code></li>\n</ol>\n\n<p>I don't know exactly on the cost of deserialisation, but somehow I have a feeling it shouldn't be much difference.</p>\n\n<p>Can someone help me understand which perspective is way to go ? </p>\n\n<p>Please provide some pros and cons of using POJO and JSONObject.</p>\n\n<p>Thanks</p>\n"},{"tags":["java","apache-flink","parquet","avro"],"answers":[{"comments":[{"owner":{"account_id":7854363,"reputation":167,"user_id":5936774,"accept_rate":22,"display_name":"Saurabh Rana"},"score":0,"creation_date":1689288874,"post_id":76683447,"comment_id":135196349,"body_markdown":"Thanks. On trying this, since it gives compilation error &quot;SetDate(java.time.LocalDate cannot be applied to int. I tried ```myAvroObject.setDate(LocalDate.ofEpocDay(daysSinceEpoch))``` but it gave the same error saying localDate cannot be cast to number.","body":"Thanks. On trying this, since it gives compilation error &quot;SetDate(java.time.LocalDate cannot be applied to int. I tried <code>myAvroObject.setDate(LocalDate.ofEpocDay(daysSinceEpoch))</code> but it gave the same error saying localDate cannot be cast to number."},{"owner":{"account_id":13033096,"reputation":775,"user_id":9418902,"display_name":"Csisanyi"},"score":0,"creation_date":1689343438,"post_id":76683447,"comment_id":135204242,"body_markdown":"based on ```myAvroObject.setDate(LocalDate.ofEpocDay(daysSinceEpoch))``` , the error sounds ok. You need the int value of the method. Try  (int) localDate.toEpochDay();","body":"based on <code>myAvroObject.setDate(LocalDate.ofEpocDay(daysSinceEpoch))</code> , the error sounds ok. You need the int value of the method. Try  (int) localDate.toEpochDay();"},{"owner":{"account_id":7854363,"reputation":167,"user_id":5936774,"accept_rate":22,"display_name":"Saurabh Rana"},"score":0,"creation_date":1689361406,"post_id":76683447,"comment_id":135208018,"body_markdown":"But the setter is expecting type java.time.LocalDate instead of int, and in the snippet which you pasted above it is trying to set int type.  That is the setter in avro which got generated by the JSON snippet that I pasted in the original question for the field date having type int and logicalType date. Does that snippet require change so that it expects int instead of localDate?","body":"But the setter is expecting type java.time.LocalDate instead of int, and in the snippet which you pasted above it is trying to set int type.  That is the setter in avro which got generated by the JSON snippet that I pasted in the original question for the field date having type int and logicalType date. Does that snippet require change so that it expects int instead of localDate?"},{"owner":{"account_id":13033096,"reputation":775,"user_id":9418902,"display_name":"Csisanyi"},"score":0,"creation_date":1689362553,"post_id":76683447,"comment_id":135208181,"body_markdown":"I see. But then I dont understand why you receive an error for this ```myAvroObject.setDate(LocalDate.ofEpocDay(daysSinceEpoch))```. ofEpochDay returns LocalDate so if your setter wants Localdate as setDate param it should be fine.","body":"I see. But then I dont understand why you receive an error for this <code>myAvroObject.setDate(LocalDate.ofEpocDay(daysSinceEpoch))</code>. ofEpochDay returns LocalDate so if your setter wants Localdate as setDate param it should be fine."},{"owner":{"account_id":13033096,"reputation":775,"user_id":9418902,"display_name":"Csisanyi"},"score":0,"creation_date":1689362647,"post_id":76683447,"comment_id":135208196,"body_markdown":"what kind of generator do you use?","body":"what kind of generator do you use?"},{"owner":{"account_id":7854363,"reputation":167,"user_id":5936774,"accept_rate":22,"display_name":"Saurabh Rana"},"score":0,"creation_date":1689363543,"post_id":76683447,"comment_id":135208364,"body_markdown":"I am using java -jar avro-tools -1.11.1.jar command to generate avro from json.","body":"I am using java -jar avro-tools -1.11.1.jar command to generate avro from json."},{"owner":{"account_id":13033096,"reputation":775,"user_id":9418902,"display_name":"Csisanyi"},"score":0,"creation_date":1689364822,"post_id":76683447,"comment_id":135208579,"body_markdown":"Let us [continue this discussion in chat](https://chat.stackoverflow.com/rooms/254504/discussion-between-csisanyi-and-saurabh-rana).","body":"Let us <a href=\"https://chat.stackoverflow.com/rooms/254504/discussion-between-csisanyi-and-saurabh-rana\">continue this discussion in chat</a>."}],"tags":[],"owner":{"account_id":13033096,"reputation":775,"user_id":9418902,"display_name":"Csisanyi"},"comment_count":7,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689285065,"creation_date":1689285065,"answer_id":76683447,"question_id":76681877,"body_markdown":"From AVRO docs:\r\n\r\n*The date logical type represents a date within the calendar, with no reference to a particular time zone or time of day.\r\nA date logical type annotates an Avro int, where the int stores the number of days from the unix epoch, 1 January 1970 (ISO calendar).*\r\n\r\nTry this\r\n```\r\nDateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;d/MM/yyyy&quot;);\r\nString date = &quot;16/08/2016&quot;;\r\nLocalDate localDate = LocalDate.parse(date, formatter);\r\nint daysSinceEpoch = (int) localDate.toEpochDay();\r\n\r\nmyAvroObject.setDate(daysSinceEpoch);\r\n```","title":"&#39;Class java.time.LocalDate cannot be cast to class java.lang.Number&#39; with logicalType as date and type as int in Avro while saving in parquet","body":"<p>From AVRO docs:</p>\n<p><em>The date logical type represents a date within the calendar, with no reference to a particular time zone or time of day.\nA date logical type annotates an Avro int, where the int stores the number of days from the unix epoch, 1 January 1970 (ISO calendar).</em></p>\n<p>Try this</p>\n<pre><code>DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;d/MM/yyyy&quot;);\nString date = &quot;16/08/2016&quot;;\nLocalDate localDate = LocalDate.parse(date, formatter);\nint daysSinceEpoch = (int) localDate.toEpochDay();\n\nmyAvroObject.setDate(daysSinceEpoch);\n</code></pre>\n"}],"owner":{"account_id":7854363,"reputation":167,"user_id":5936774,"accept_rate":22,"display_name":"Saurabh Rana"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":229,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689365958,"creation_date":1689268790,"question_id":76681877,"body_markdown":"I am trying to save a field present in Avro which is having Date logical type, in parquet output (It works when using int as datatype to save but gives error when trying to save as Date logical type). I am attempting this from a Flink application. For the type of this field, I have set as logicalType to Date and type to int. \r\n\r\nThe avro version is 1.11.1 and in the JSON I am using to generate the avro, the field is as below:\r\n\r\n```\r\n{\r\n&quot;name&quot; : &quot;Date&quot;,\r\n&quot;type&quot;: [\r\n{&quot;type&quot;: &quot;int&quot; , &quot;logicalType&quot;: &quot;date&quot; }, \r\n&quot;null&quot; ]\r\n}\r\n```\r\nAnd this field is being set in the below code:\r\n```\r\nDateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;d/MM/yyyy&quot;);\r\nString date = &quot;16/08/2016&quot;;\r\nLocalDate localDate = LocalDate.parse(date, formatter);\r\nmyAvroObject.setDate(localDate);\r\n```\r\n\r\nFor writing the parquet output, from the Flink application, I am using the below code:\r\n```\r\nAvroParquetWriters.forGenericRecord(new myAvroClass().getSchema());\r\n```\r\n\r\n\r\n\r\nWhile trying to save the parquet output, it gives ClassCast exception saying &#39;Class java.time.LocalDate cannot be cast to class java.lang.Number&#39; \r\n\r\n\r\nThe below thread has similarity in terms of error message but I did not find any relevant answer/comment. https://stackoverflow.com/questions/76324003/avro-logicaltype-for-date-is-giving-exception-java-lang-classcastexception-cl\r\n\r\nAlso checked this thread but didn&#39;t find a relevant solution : https://stackoverflow.com/questions/46364043/how-to-create-date-type-column-in-parquet-file-with-parquet-avro?rq=2\r\n\r\nWhat can be the solution for this? \r\n\r\nThanks.\r\n","title":"&#39;Class java.time.LocalDate cannot be cast to class java.lang.Number&#39; with logicalType as date and type as int in Avro while saving in parquet","body":"<p>I am trying to save a field present in Avro which is having Date logical type, in parquet output (It works when using int as datatype to save but gives error when trying to save as Date logical type). I am attempting this from a Flink application. For the type of this field, I have set as logicalType to Date and type to int.</p>\n<p>The avro version is 1.11.1 and in the JSON I am using to generate the avro, the field is as below:</p>\n<pre><code>{\n&quot;name&quot; : &quot;Date&quot;,\n&quot;type&quot;: [\n{&quot;type&quot;: &quot;int&quot; , &quot;logicalType&quot;: &quot;date&quot; }, \n&quot;null&quot; ]\n}\n</code></pre>\n<p>And this field is being set in the below code:</p>\n<pre><code>DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;d/MM/yyyy&quot;);\nString date = &quot;16/08/2016&quot;;\nLocalDate localDate = LocalDate.parse(date, formatter);\nmyAvroObject.setDate(localDate);\n</code></pre>\n<p>For writing the parquet output, from the Flink application, I am using the below code:</p>\n<pre><code>AvroParquetWriters.forGenericRecord(new myAvroClass().getSchema());\n</code></pre>\n<p>While trying to save the parquet output, it gives ClassCast exception saying 'Class java.time.LocalDate cannot be cast to class java.lang.Number'</p>\n<p>The below thread has similarity in terms of error message but I did not find any relevant answer/comment. <a href=\"https://stackoverflow.com/questions/76324003/avro-logicaltype-for-date-is-giving-exception-java-lang-classcastexception-cl\">Avro logicalType for Date is giving exception : java.lang.ClassCastException: class java.util.Date cannot be cast to class java.lang.Number</a></p>\n<p>Also checked this thread but didn't find a relevant solution : <a href=\"https://stackoverflow.com/questions/46364043/how-to-create-date-type-column-in-parquet-file-with-parquet-avro?rq=2\">how to create date type column in parquet file with parquet-avro</a></p>\n<p>What can be the solution for this?</p>\n<p>Thanks.</p>\n"},{"tags":["java","stdout","iostream"],"comments":[{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1295990976,"post_id":4799006,"comment_id":5317894,"body_markdown":"I see both lines fine on my system. I&#39;m using Java 6 update 22.","body":"I see both lines fine on my system. I&#39;m using Java 6 update 22."},{"owner":{"account_id":5530,"reputation":63236,"user_id":8946,"accept_rate":84,"display_name":"Lawrence Dol"},"score":2,"creation_date":1295992251,"post_id":4799006,"comment_id":5318232,"body_markdown":"BTW: Beware of manipulating System.out like this without broader synchronization to prevent concurrent interactions by multiple threads.","body":"BTW: Beware of manipulating System.out like this without broader synchronization to prevent concurrent interactions by multiple threads."},{"owner":{"account_id":2851272,"reputation":1349,"user_id":2448440,"accept_rate":50,"display_name":"Qw3ry"},"score":0,"creation_date":1569928958,"post_id":4799006,"comment_id":102747135,"body_markdown":"Since JDK11, a nullOutputStream is builtin. See [my answer below](https://stackoverflow.com/a/58183767/2448440)","body":"Since JDK11, a nullOutputStream is builtin. See <a href=\"https://stackoverflow.com/a/58183767/2448440\">my answer below</a>"}],"answers":[{"comments":[{"owner":{"account_id":5530,"reputation":63236,"user_id":8946,"accept_rate":84,"display_name":"Lawrence Dol"},"score":4,"creation_date":1295991960,"post_id":4799195,"comment_id":5318159,"body_markdown":"There is in alternative on windows, the NUL device; IIRC it&#39;s &quot;NUL:&quot; as a &quot;filename&quot;.","body":"There is in alternative on windows, the NUL device; IIRC it&#39;s &quot;NUL:&quot; as a &quot;filename&quot;."},{"owner":{"account_id":118722,"reputation":19094,"user_id":309946,"accept_rate":75,"display_name":"Ilya Saunkin"},"score":0,"creation_date":1295992016,"post_id":4799195,"comment_id":5318169,"body_markdown":"oh wow, this is really first time i hear about it! Gonna edit the post. Thank you!","body":"oh wow, this is really first time i hear about it! Gonna edit the post. Thank you!"},{"owner":{"account_id":5530,"reputation":63236,"user_id":8946,"accept_rate":84,"display_name":"Lawrence Dol"},"score":4,"creation_date":1295992039,"post_id":4799195,"comment_id":5318176,"body_markdown":"But +1, because this is the right platform-independent answer.  I would, however, also override write(byte[],int,int), for efficiency.","body":"But +1, because this is the right platform-independent answer.  I would, however, also override write(byte[],int,int), for efficiency."},{"owner":{"account_id":2462107,"reputation":1,"user_id":2146045,"display_name":"javacoder"},"score":5,"creation_date":1362689420,"post_id":4799195,"comment_id":21563320,"body_markdown":"I will point out that in most cases you should probably restore the original OutputStream in a finally block.","body":"I will point out that in most cases you should probably restore the original OutputStream in a finally block."},{"owner":{"account_id":1373030,"reputation":1153,"user_id":1307586,"display_name":"volkovs"},"score":2,"creation_date":1414045087,"post_id":4799195,"comment_id":41673211,"body_markdown":"There is new NullOutputStream in Apache Commons IO.","body":"There is new NullOutputStream in Apache Commons IO."},{"owner":{"account_id":1716782,"reputation":266,"user_id":1573682,"display_name":"Peter Verhas"},"score":1,"creation_date":1603253734,"post_id":4799195,"comment_id":113975292,"body_markdown":"Since Java 11 there is a static method `OutputStream.nullOutputStream()`.","body":"Since Java 11 there is a static method <code>OutputStream.nullOutputStream()</code>."}],"tags":[],"owner":{"account_id":118722,"reputation":19094,"user_id":309946,"accept_rate":75,"display_name":"Ilya Saunkin"},"comment_count":6,"down_vote_count":0,"up_vote_count":54,"is_accepted":false,"score":54,"last_activity_date":1295991863,"creation_date":1295991863,"answer_id":4799195,"question_id":4799006,"body_markdown":"Man, this is not so good, because Java is cross-platform and &#39;/dev/null&#39; is Unix specific (apparently there is an alternative on Windows, read the comments). So your best option is to create a custom OutputStream to disable output.\r\n\r\n    try {\r\n        System.out.println(&quot;this should go to stdout&quot;);\r\n    \r\n        PrintStream original = System.out;\r\n        System.setOut(new PrintStream(new OutputStream() {\r\n                    public void write(int b) {\r\n                        //DO NOTHING\r\n                    }\r\n                }));\r\n        System.out.println(&quot;this should go to /dev/null, but it doesn&#39;t because it&#39;s not supported on other platforms&quot;);\r\n    \r\n        System.setOut(original);\r\n        System.out.println(&quot;this should go to stdout&quot;);\r\n    }\r\n    catch (Exception e) {\r\n        e.printStackTrace();\r\n    }\r\n\r\n","title":"In Java, how can I redirect System.out to null then back to stdout again?","body":"<p>Man, this is not so good, because Java is cross-platform and '/dev/null' is Unix specific (apparently there is an alternative on Windows, read the comments). So your best option is to create a custom OutputStream to disable output.</p>\n\n<pre><code>try {\n    System.out.println(\"this should go to stdout\");\n\n    PrintStream original = System.out;\n    System.setOut(new PrintStream(new OutputStream() {\n                public void write(int b) {\n                    //DO NOTHING\n                }\n            }));\n    System.out.println(\"this should go to /dev/null, but it doesn't because it's not supported on other platforms\");\n\n    System.setOut(original);\n    System.out.println(\"this should go to stdout\");\n}\ncatch (Exception e) {\n    e.printStackTrace();\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1642950,"reputation":11777,"user_id":1515058,"accept_rate":57,"display_name":"Daniil Shevelev"},"score":0,"creation_date":1383837285,"post_id":18804033,"comment_id":29502313,"body_markdown":"Where can I get the NullPrintStream? Which library? Or do I need to create the class myself?","body":"Where can I get the NullPrintStream? Which library? Or do I need to create the class myself?"},{"owner":{"account_id":3090609,"reputation":1197,"user_id":2693146,"display_name":"Claudia"},"score":0,"creation_date":1389923940,"post_id":18804033,"comment_id":31881507,"body_markdown":"I really needed this for my code... It is definitely a bit of a life saver for silencing stdout.","body":"I really needed this for my code... It is definitely a bit of a life saver for silencing stdout."}],"tags":[],"owner":{"account_id":3304334,"reputation":201,"user_id":2779628,"display_name":"Vladimir"},"comment_count":2,"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1379177062,"creation_date":1379177062,"answer_id":18804033,"question_id":4799006,"body_markdown":"You can use the class NullPrintStream below as:\r\n\r\n    PrintStream original = System.out;\r\n    System.setOut(new NullPrintStream());\r\n    System.out.println(&quot;Message not shown.&quot;);\r\n    System.setOut(original);\r\n\r\nAnd the class NullPrintStream is...\r\n   \r\n\r\n    import java.io.ByteArrayOutputStream;\r\n    import java.io.IOException;\r\n    import java.io.OutputStream;\r\n    import java.io.PrintStream;\r\n    \r\n    public class NullPrintStream extends PrintStream {\r\n    \r\n      public NullPrintStream() {\r\n        super(new NullByteArrayOutputStream());\r\n      }\r\n    \r\n      private static class NullByteArrayOutputStream extends ByteArrayOutputStream {\r\n    \r\n        @Override\r\n        public void write(int b) {\r\n          // do nothing\r\n        }\r\n    \r\n        @Override\r\n        public void write(byte[] b, int off, int len) {\r\n          // do nothing\r\n        }\r\n    \r\n        @Override\r\n        public void writeTo(OutputStream out) throws IOException {\r\n          // do nothing\r\n        }\r\n    \r\n      }\r\n    \r\n    }\r\n\r\n \r\n\r\n","title":"In Java, how can I redirect System.out to null then back to stdout again?","body":"<p>You can use the class NullPrintStream below as:</p>\n\n<pre><code>PrintStream original = System.out;\nSystem.setOut(new NullPrintStream());\nSystem.out.println(\"Message not shown.\");\nSystem.setOut(original);\n</code></pre>\n\n<p>And the class NullPrintStream is...</p>\n\n<pre><code>import java.io.ByteArrayOutputStream;\nimport java.io.IOException;\nimport java.io.OutputStream;\nimport java.io.PrintStream;\n\npublic class NullPrintStream extends PrintStream {\n\n  public NullPrintStream() {\n    super(new NullByteArrayOutputStream());\n  }\n\n  private static class NullByteArrayOutputStream extends ByteArrayOutputStream {\n\n    @Override\n    public void write(int b) {\n      // do nothing\n    }\n\n    @Override\n    public void write(byte[] b, int off, int len) {\n      // do nothing\n    }\n\n    @Override\n    public void writeTo(OutputStream out) throws IOException {\n      // do nothing\n    }\n\n  }\n\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2678092,"reputation":1134,"user_id":2313984,"display_name":"AndrWeisR"},"score":0,"creation_date":1662616126,"post_id":19284677,"comment_id":130047677,"body_markdown":"`System.setOut(new PrintStream(&quot;NUL&quot;));` works too.","body":"<code>System.setOut(new PrintStream(&quot;NUL&quot;));</code> works too."}],"tags":[],"owner":{"account_id":1728581,"reputation":2763,"user_id":1582712,"accept_rate":51,"display_name":"E.S."},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1381362147,"creation_date":1381362147,"answer_id":19284677,"question_id":4799006,"body_markdown":"Old question, I know, but would this small line do the trick on Windows?\r\n\r\n`System.setOut(new PrintStream(new File(&quot;NUL&quot;)));`\r\n\r\nMuch less code and looks pretty direct to me.","title":"In Java, how can I redirect System.out to null then back to stdout again?","body":"<p>Old question, I know, but would this small line do the trick on Windows?</p>\n\n<p><code>System.setOut(new PrintStream(new File(\"NUL\")));</code></p>\n\n<p>Much less code and looks pretty direct to me.</p>\n"},{"comments":[{"owner":{"account_id":1867439,"reputation":376,"user_id":1690629,"display_name":"John"},"score":1,"creation_date":1445276598,"post_id":28287455,"comment_id":54245635,"body_markdown":"Any subsequent calls to System.out.anything will cause a NullPointerException to be thrown.  If that worked for you, then you must be catching the exception somewhere.","body":"Any subsequent calls to System.out.anything will cause a NullPointerException to be thrown.  If that worked for you, then you must be catching the exception somewhere."},{"owner":{"account_id":2851272,"reputation":1349,"user_id":2448440,"accept_rate":50,"display_name":"Qw3ry"},"score":0,"creation_date":1569849961,"post_id":28287455,"comment_id":102719019,"body_markdown":"While this might be what you want to do (make System.out fail fast and noisy), it is certainly not what OP asks, and it does not work with his example code either","body":"While this might be what you want to do (make System.out fail fast and noisy), it is certainly not what OP asks, and it does not work with his example code either"}],"tags":[],"owner":{"account_id":5724273,"reputation":1,"user_id":4521774,"display_name":"pavlini4"},"comment_count":2,"down_vote_count":4,"up_vote_count":0,"is_accepted":false,"score":-4,"last_activity_date":1422913930,"creation_date":1422913930,"answer_id":28287455,"question_id":4799006,"body_markdown":"I think System.setOut(null); should work too. At least it worked for me.","title":"In Java, how can I redirect System.out to null then back to stdout again?","body":"<p>I think System.setOut(null); should work too. At least it worked for me.</p>\n"},{"tags":[],"owner":{"account_id":2851272,"reputation":1349,"user_id":2448440,"accept_rate":50,"display_name":"Qw3ry"},"comment_count":0,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1689365862,"creation_date":1569928900,"answer_id":58183767,"question_id":4799006,"body_markdown":"Since JDK 11 there is [`OutputStream.nullOutputStream()`][1]. It does exactly what you are looking for:\r\n\r\n```java\r\nSystem.setOut(new PrintStream(OutputStream.nullOutputStream()));\r\n```\r\n\r\n[1]: https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/io/OutputStream.html#nullOutputStream()","title":"In Java, how can I redirect System.out to null then back to stdout again?","body":"<p>Since JDK 11 there is <a href=\"https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/io/OutputStream.html#nullOutputStream()\" rel=\"nofollow noreferrer\"><code>OutputStream.nullOutputStream()</code></a>. It does exactly what you are looking for:</p>\n<pre class=\"lang-java prettyprint-override\"><code>System.setOut(new PrintStream(OutputStream.nullOutputStream()));\n</code></pre>\n"}],"owner":{"account_id":5787,"reputation":1417,"user_id":9484,"accept_rate":62,"display_name":"dgrant"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":26383,"favorite_count":0,"down_vote_count":0,"up_vote_count":36,"answer_count":5,"score":36,"last_activity_date":1689365862,"creation_date":1295990627,"question_id":4799006,"body_markdown":"I&#39;ve tried to temporarily redirect System.out to /dev/null using the following code but it doesn&#39;t work.\r\n\r\n    System.out.println(&quot;this should go to stdout&quot;);\r\n\r\n    PrintStream original = System.out;\r\n    System.setOut(new PrintStream(new FileOutputStream(&quot;/dev/null&quot;)));\r\n    System.out.println(&quot;this should go to /dev/null&quot;);\r\n\r\n    System.setOut(original);\r\n    System.out.println(&quot;this should go to stdout&quot;); // This is not getting printed!!!\r\n\r\nAnyone have any ideas?","title":"In Java, how can I redirect System.out to null then back to stdout again?","body":"<p>I've tried to temporarily redirect System.out to /dev/null using the following code but it doesn't work.</p>\n\n<pre><code>System.out.println(\"this should go to stdout\");\n\nPrintStream original = System.out;\nSystem.setOut(new PrintStream(new FileOutputStream(\"/dev/null\")));\nSystem.out.println(\"this should go to /dev/null\");\n\nSystem.setOut(original);\nSystem.out.println(\"this should go to stdout\"); // This is not getting printed!!!\n</code></pre>\n\n<p>Anyone have any ideas?</p>\n"},{"tags":["java","types","increment"],"comments":[{"owner":{"account_id":3415144,"reputation":23576,"user_id":2864275,"display_name":"Iłya Bursov"},"score":4,"creation_date":1672414948,"post_id":74963297,"comment_id":132286385,"body_markdown":"https://docs.oracle.com/javase/specs/jls/se19/html/jls-15.html#jls-15.15.1 `The type of the prefix increment expression is the type of the variable.`","body":"<a href=\"https://docs.oracle.com/javase/specs/jls/se19/html/jls-15.html#jls-15.15.1\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/specs/jls/se19/html/&hellip;</a> <code>The type of the prefix increment expression is the type of the variable.</code>"},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1672415269,"post_id":74963297,"comment_id":132286486,"body_markdown":"@IłyaBursov this comment of yours should really be an answer :)","body":"@IłyaBursov this comment of yours should really be an answer :)"}],"answers":[{"tags":[],"owner":{"account_id":21787453,"reputation":177,"user_id":16088224,"display_name":"MuaazH"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689365561,"creation_date":1672415139,"answer_id":74963346,"question_id":74963297,"body_markdown":"The `++` operator does not change the type.\r\n\r\nThe int literal is of type int.\r\n\r\n    byte b = 1;\r\n    b = b + 1; // java: incompatible types: possible lossy conversion from int to byte\r\n\r\n\r\n","title":"Java prefix increment operator (++i) result type","body":"<p>The <code>++</code> operator does not change the type.</p>\n<p>The int literal is of type int.</p>\n<pre><code>byte b = 1;\nb = b + 1; // java: incompatible types: possible lossy conversion from int to byte\n</code></pre>\n"}],"owner":{"account_id":27146001,"reputation":1,"user_id":20686192,"display_name":"Gosia"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":73,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689365561,"creation_date":1672414805,"question_id":74963297,"body_markdown":"[JLS](https://docs.oracle.com/javase/specs/jls/se19/html/jls-4.html#jls-4.2.2) states:\r\n\r\n&gt; If an integer operator other than a shift operator has at least one operand of type `long`, then the operation is carried out using 64-bit precision, and the result of the numerical operator is of type `long`. If the other operand is not `long`, it is first widened ([&#167;5.1.5](https://docs.oracle.com/javase/specs/jls/se19/html/jls-5.html#jls-5.1.5 &quot;5.1.5.&#160;Widening Reference Conversion&quot;)) to type `long` by numeric promotion ([&#167;5.6](https://docs.oracle.com/javase/specs/jls/se19/html/jls-5.html#jls-5.6 &quot;5.6.&#160;Numeric Contexts&quot;)).\r\n&gt;\r\n&gt; Otherwise, the operation is carried out using 32-bit precision, and the result of the numerical operator is of type `int`. If either operand is not an `int`, it is first widened to type `int` by numeric promotion.\r\n\r\nHowever when I try:\r\n\r\n```\r\nbyte b = 18;\r\nprint(++b);\r\n```\r\n\r\n```\r\nstatic void print(int a) {\r\n    System.out.println(&quot;Integer : &quot; + a);\r\n}\r\n\r\nstatic void print(byte a) {\r\n    System.out.println(&quot;Byte : &quot; + a);\r\n}\r\n```\r\n\r\nThe result is:\r\n\r\nByte : 19\r\n\r\nI was expecting the method with integer type as input parameter to be called.\r\n\r\nThe other integer operators like unary plus or unary minus in fact return integer.","title":"Java prefix increment operator (++i) result type","body":"<p><a href=\"https://docs.oracle.com/javase/specs/jls/se19/html/jls-4.html#jls-4.2.2\" rel=\"nofollow noreferrer\">JLS</a> states:</p>\n<blockquote>\n<p>If an integer operator other than a shift operator has at least one operand of type <code>long</code>, then the operation is carried out using 64-bit precision, and the result of the numerical operator is of type <code>long</code>. If the other operand is not <code>long</code>, it is first widened (<a href=\"https://docs.oracle.com/javase/specs/jls/se19/html/jls-5.html#jls-5.1.5\" rel=\"nofollow noreferrer\" title=\"5.1.5. Widening Reference Conversion\">§5.1.5</a>) to type <code>long</code> by numeric promotion (<a href=\"https://docs.oracle.com/javase/specs/jls/se19/html/jls-5.html#jls-5.6\" rel=\"nofollow noreferrer\" title=\"5.6. Numeric Contexts\">§5.6</a>).</p>\n<p>Otherwise, the operation is carried out using 32-bit precision, and the result of the numerical operator is of type <code>int</code>. If either operand is not an <code>int</code>, it is first widened to type <code>int</code> by numeric promotion.</p>\n</blockquote>\n<p>However when I try:</p>\n<pre><code>byte b = 18;\nprint(++b);\n</code></pre>\n<pre><code>static void print(int a) {\n    System.out.println(&quot;Integer : &quot; + a);\n}\n\nstatic void print(byte a) {\n    System.out.println(&quot;Byte : &quot; + a);\n}\n</code></pre>\n<p>The result is:</p>\n<p>Byte : 19</p>\n<p>I was expecting the method with integer type as input parameter to be called.</p>\n<p>The other integer operators like unary plus or unary minus in fact return integer.</p>\n"},{"tags":["java","checkstyle"],"comments":[{"owner":{"account_id":13474768,"reputation":3872,"user_id":9722122,"display_name":"Mustahsan"},"score":0,"creation_date":1556729681,"post_id":55939705,"comment_id":98532568,"body_markdown":"heres a link that might help you : https://www.baeldung.com/checkstyle-java","body":"heres a link that might help you : <a href=\"https://www.baeldung.com/checkstyle-java\" rel=\"nofollow noreferrer\">baeldung.com/checkstyle-java</a>"},{"owner":{"account_id":1278515,"reputation":6525,"user_id":1350796,"accept_rate":74,"display_name":"Andrew"},"score":1,"creation_date":1556733919,"post_id":55939705,"comment_id":98534481,"body_markdown":"@Mustahsan that appears to be about setting it up inside of an IDE or as part of a Maven build - I am interested in running it directly from within a Java program","body":"@Mustahsan that appears to be about setting it up inside of an IDE or as part of a Maven build - I am interested in running it directly from within a Java program"},{"owner":{"account_id":13474768,"reputation":3872,"user_id":9722122,"display_name":"Mustahsan"},"score":0,"creation_date":1556766440,"post_id":55939705,"comment_id":98543034,"body_markdown":"you can run terminal commands from java as well.","body":"you can run terminal commands from java as well."},{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":1,"creation_date":1556780778,"post_id":55939705,"comment_id":98547081,"body_markdown":"If you ask how to simply run a process with checkstyle, see https://stackoverflow.com/questions/792024/how-to-execute-system-commands-linux-bsd-using-java for example. If you are asking whether checkstyle has an API so you can run it programmatically, well, that would be off topic here.","body":"If you ask how to simply run a process with checkstyle, see <a href=\"https://stackoverflow.com/questions/792024/how-to-execute-system-commands-linux-bsd-using-java\" title=\"how to execute system commands linux bsd using java\">stackoverflow.com/questions/792024/&hellip;</a> for example. If you are asking whether checkstyle has an API so you can run it programmatically, well, that would be off topic here."}],"answers":[{"tags":[],"owner":{"account_id":987285,"reputation":17009,"user_id":1005481,"accept_rate":89,"display_name":"barfuin"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1556879716,"creation_date":1556780493,"answer_id":55947200,"question_id":55939705,"body_markdown":"Yes, that is possible, although it&#39;s not so much a documented API, but rather a set of calls that works, and that&#39;s kept reasonably stable. In fact, IDE plugins go that way.\r\n\r\nFor example, the Checkstyle plugin for IntelliJ has some code you can look at to get an idea:  \r\nhttps://github.com/jshiell/checkstyle-idea/tree/5.26.0/src/csaccess/java/org/infernus/idea/checkstyle/service/cmd\r\n\r\nIt may, however, be easier to just call Checkstyle as a command-line program (via [zt-exec](https://github.com/zeroturnaround/zt-exec), for example) and parse its XML report. That is if you don&#39;t need to have the direct feedback provided via in-process [AuditListeners](https://checkstyle.org/apidocs/com/puppycrawl/tools/checkstyle/api/AuditListener.html).","title":"Is there a way to call checkstyle from within a Java program?","body":"<p>Yes, that is possible, although it's not so much a documented API, but rather a set of calls that works, and that's kept reasonably stable. In fact, IDE plugins go that way.</p>\n\n<p>For example, the Checkstyle plugin for IntelliJ has some code you can look at to get an idea:<br>\n<a href=\"https://github.com/jshiell/checkstyle-idea/tree/5.26.0/src/csaccess/java/org/infernus/idea/checkstyle/service/cmd\" rel=\"noreferrer\">https://github.com/jshiell/checkstyle-idea/tree/5.26.0/src/csaccess/java/org/infernus/idea/checkstyle/service/cmd</a></p>\n\n<p>It may, however, be easier to just call Checkstyle as a command-line program (via <a href=\"https://github.com/zeroturnaround/zt-exec\" rel=\"noreferrer\">zt-exec</a>, for example) and parse its XML report. That is if you don't need to have the direct feedback provided via in-process <a href=\"https://checkstyle.org/apidocs/com/puppycrawl/tools/checkstyle/api/AuditListener.html\" rel=\"noreferrer\">AuditListeners</a>.</p>\n"},{"tags":[],"owner":{"account_id":1001793,"reputation":2131,"user_id":1016482,"accept_rate":50,"display_name":"rveach"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1556800755,"creation_date":1556800755,"answer_id":55952674,"question_id":55939705,"body_markdown":"&gt; I have a Java program&lt;br /&gt;\r\n&gt; is a way to directly run checkstyle from within my program\r\n\r\nYou can call any Java program from within another Java program. When a Java program is called from the command line, it&#39;s `main` method is called that passes in all the command line parameters that is not for the `java` program itself. All you need to do in your Java program is call the same `main` that the command line calls. For checkstyle this is `com.puppycrawl.tools.checkstyle.Main`. See https://github.com/checkstyle/checkstyle/blob/bd7621fae3b1b887d46b8a678600db7e6d03185c/src/main/java/com/puppycrawl/tools/checkstyle/Main.java#L100 .\r\n\r\nThe downside to checkstyle however is it calls `System.exit` when it is done so you will never return from your call. To prevent a `System.exit` from terminating the JVM completely see https://stackoverflow.com/questions/309396/java-how-to-test-methods-that-call-system-exit for the SecurityManager example.\r\n\r\nYou can avoid all this `System.exit` business but it would require you to duplicate a bunch of Checkstyle&#39;s code, which is also in the `Main` class. See https://github.com/checkstyle/checkstyle/blob/bd7621fae3b1b887d46b8a678600db7e6d03185c/src/main/java/com/puppycrawl/tools/checkstyle/Main.java#L332 . It is up to you how you want to handle it.","title":"Is there a way to call checkstyle from within a Java program?","body":"<blockquote>\n  <p>I have a Java program<br />\n  is a way to directly run checkstyle from within my program</p>\n</blockquote>\n\n<p>You can call any Java program from within another Java program. When a Java program is called from the command line, it's <code>main</code> method is called that passes in all the command line parameters that is not for the <code>java</code> program itself. All you need to do in your Java program is call the same <code>main</code> that the command line calls. For checkstyle this is <code>com.puppycrawl.tools.checkstyle.Main</code>. See <a href=\"https://github.com/checkstyle/checkstyle/blob/bd7621fae3b1b887d46b8a678600db7e6d03185c/src/main/java/com/puppycrawl/tools/checkstyle/Main.java#L100\" rel=\"nofollow noreferrer\">https://github.com/checkstyle/checkstyle/blob/bd7621fae3b1b887d46b8a678600db7e6d03185c/src/main/java/com/puppycrawl/tools/checkstyle/Main.java#L100</a> .</p>\n\n<p>The downside to checkstyle however is it calls <code>System.exit</code> when it is done so you will never return from your call. To prevent a <code>System.exit</code> from terminating the JVM completely see <a href=\"https://stackoverflow.com/questions/309396/java-how-to-test-methods-that-call-system-exit\">Java: How to test methods that call System.exit()?</a> for the SecurityManager example.</p>\n\n<p>You can avoid all this <code>System.exit</code> business but it would require you to duplicate a bunch of Checkstyle's code, which is also in the <code>Main</code> class. See <a href=\"https://github.com/checkstyle/checkstyle/blob/bd7621fae3b1b887d46b8a678600db7e6d03185c/src/main/java/com/puppycrawl/tools/checkstyle/Main.java#L332\" rel=\"nofollow noreferrer\">https://github.com/checkstyle/checkstyle/blob/bd7621fae3b1b887d46b8a678600db7e6d03185c/src/main/java/com/puppycrawl/tools/checkstyle/Main.java#L332</a> . It is up to you how you want to handle it.</p>\n"},{"comments":[{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1689254353,"post_id":76675041,"comment_id":135189502,"body_markdown":"While this link may answer the question, it is better to include the essential parts of the answer here and provide the link for reference.  Link-only answers can become invalid if the linked page changes. - [From Review](/review/low-quality-posts/34682372)","body":"While this link may answer the question, it is better to include the essential parts of the answer here and provide the link for reference.  Link-only answers can become invalid if the linked page changes. - <a href=\"/review/low-quality-posts/34682372\">From Review</a>"},{"owner":{"account_id":315381,"reputation":6586,"user_id":631051,"accept_rate":85,"display_name":"Ellen Spertus"},"score":0,"creation_date":1689365031,"post_id":76675041,"comment_id":135208612,"body_markdown":"@Abra I added detail, per your request.  The other answers heavily rely on links too, and I state the class that is recommended as the API. I understand from your downvote that you still don&#39;t like it, but I&#39;ll take the hit because I think it could be useful to other programmers in my position.","body":"@Abra I added detail, per your request.  The other answers heavily rely on links too, and I state the class that is recommended as the API. I understand from your downvote that you still don&#39;t like it, but I&#39;ll take the hit because I think it could be useful to other programmers in my position."},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1689406336,"post_id":76675041,"comment_id":135211604,"body_markdown":"For your information, I did **not** down-vote your answer. Your answer came up on the [low quality answers](https://stackoverflow.com/help/review-low-quality) queue and since it basically contains links only, I recommended it for deletion. I think you should post code that demonstrates how to use the API.","body":"For your information, I did <b>not</b> down-vote your answer. Your answer came up on the <a href=\"https://stackoverflow.com/help/review-low-quality\">low quality answers</a> queue and since it basically contains links only, I recommended it for deletion. I think you should post code that demonstrates how to use the API."},{"owner":{"account_id":315381,"reputation":6586,"user_id":631051,"accept_rate":85,"display_name":"Ellen Spertus"},"score":0,"creation_date":1689454839,"post_id":76675041,"comment_id":135216819,"body_markdown":"@Abra I apologize for incorrectly saying that you had downvoted it. I think the answer has value, so will leave it. I do not think writing code for a years&#39; old post would be a good use of my time. The accepted answer does not have code either.\n\nThank you for spending time reviewing content, even if I disagree with you in this case.","body":"@Abra I apologize for incorrectly saying that you had downvoted it. I think the answer has value, so will leave it. I do not think writing code for a years&#39; old post would be a good use of my time. The accepted answer does not have code either.  Thank you for spending time reviewing content, even if I disagree with you in this case."}],"tags":[],"owner":{"account_id":315381,"reputation":6586,"user_id":631051,"accept_rate":85,"display_name":"Ellen Spertus"},"comment_count":4,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1689364521,"creation_date":1689204679,"answer_id":76675041,"question_id":55939705,"body_markdown":"See [Invoking Checkstyle directly from Java](https://github.com/checkstyle/checkstyle/issues/6234), which points a user to the class [com.puppycrawl.tools.checkstyle.api](https://github.com/checkstyle/checkstyle/tree/master/src/main/java/com/puppycrawl/tools/checkstyle/api), which is the suggested way to interface with checkstyle programmatically.","title":"Is there a way to call checkstyle from within a Java program?","body":"<p>See <a href=\"https://github.com/checkstyle/checkstyle/issues/6234\" rel=\"nofollow noreferrer\">Invoking Checkstyle directly from Java</a>, which points a user to the class <a href=\"https://github.com/checkstyle/checkstyle/tree/master/src/main/java/com/puppycrawl/tools/checkstyle/api\" rel=\"nofollow noreferrer\">com.puppycrawl.tools.checkstyle.api</a>, which is the suggested way to interface with checkstyle programmatically.</p>\n"}],"owner":{"account_id":1278515,"reputation":6525,"user_id":1350796,"accept_rate":74,"display_name":"Andrew"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":553,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":55947200,"answer_count":3,"score":6,"last_activity_date":1689364521,"creation_date":1556729569,"question_id":55939705,"body_markdown":"I have a Java program that creates a list of filepaths I want to run checkstyle on. I was curious if there is a way to directly run checkstyle from within my program or whether I will need to shell out to the CLI.","title":"Is there a way to call checkstyle from within a Java program?","body":"<p>I have a Java program that creates a list of filepaths I want to run checkstyle on. I was curious if there is a way to directly run checkstyle from within my program or whether I will need to shell out to the CLI.</p>\n"},{"tags":["java","client","openapi","openapi-generator-maven-plugin"],"answers":[{"comments":[{"owner":{"account_id":1085364,"reputation":113,"user_id":1081194,"display_name":"D.Ogranos"},"score":0,"creation_date":1689943860,"post_id":76690740,"comment_id":135288384,"body_markdown":"Thanks, I eventually switched to a different library too (in my case okhttp-gson), since I found no other solution. That library also works as expected. It&#39;s unfortunate that the native library isn&#39;t supported better.","body":"Thanks, I eventually switched to a different library too (in my case okhttp-gson), since I found no other solution. That library also works as expected. It&#39;s unfortunate that the native library isn&#39;t supported better."}],"tags":[],"owner":{"account_id":353881,"reputation":78,"user_id":691861,"display_name":"eakins05"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689364000,"creation_date":1689364000,"answer_id":76690740,"question_id":76676681,"body_markdown":"I just ran into the same thing yesterday.  I switched to using resttemplate library with useAbstractionForFiles set to true, and that worked.  I would prefer to have used the native library, but it seems it may be a bug without much traction: https://github.com/OpenAPITools/openapi-generator/issues/3672","title":"Client-side file download with OpenAPI Generator-Plugin","body":"<p>I just ran into the same thing yesterday.  I switched to using resttemplate library with useAbstractionForFiles set to true, and that worked.  I would prefer to have used the native library, but it seems it may be a bug without much traction: <a href=\"https://github.com/OpenAPITools/openapi-generator/issues/3672\" rel=\"nofollow noreferrer\">https://github.com/OpenAPITools/openapi-generator/issues/3672</a></p>\n"}],"owner":{"account_id":1085364,"reputation":113,"user_id":1081194,"display_name":"D.Ogranos"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":294,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76690740,"answer_count":1,"score":0,"last_activity_date":1689364000,"creation_date":1689231462,"question_id":76676681,"body_markdown":"I&#39;m trying to implement a REST API using OpenAPI (v3.0.3) and the openapi-generator-maven-plugin (v6.6.0). I want the plugin to generate both server and client from the specification.\r\n\r\nI&#39;m trying to implement a method to download a (ZIP) file, which I imagine would be a rather common operation, but I cannot get it to work on the client side. And unfortunately, my search didn&#39;t turn up any useful hints, so I&#39;m asking a new question. In the spec, I have written:\r\n\r\n```\r\n  /download:\r\n    get:\r\n      operationId: download\r\n      responses:\r\n        &quot;200&quot;:\r\n          description: Success\r\n          content:\r\n            application/zip:\r\n              schema:\r\n                type: string\r\n                format: binary\r\n```\r\n\r\nThe server side (generator spring) is generated as expected and returns a ResponseEntity of type &quot;Resource&quot; (I have implemented the method to return a Spring InputStreamResource). When calling the server endpoint with a hand made client, it works as expected and I can read the InputStream without problem.\r\n\r\nThe generated client however (generator java, with library native) is not really doing what I think it should. Here is a part of the generated download method:\r\n\r\n```\r\n  public ApiResponse&lt;File&gt; downloadWithHttpInfo() throws ApiException {\r\n    HttpRequest.Builder localVarRequestBuilder = downloadRequestBuilder();\r\n    try {\r\n      HttpResponse&lt;InputStream&gt; localVarResponse = memberVarHttpClient.send(\r\n          localVarRequestBuilder.build(),\r\n          HttpResponse.BodyHandlers.ofInputStream());\r\n      if (memberVarResponseInterceptor != null) {\r\n        memberVarResponseInterceptor.accept(localVarResponse);\r\n      }\r\n      try {\r\n        if (localVarResponse.statusCode()/ 100 != 2) {\r\n          throw getApiException(&quot;download&quot;, localVarResponse);\r\n        }\r\n        return new ApiResponse&lt;File&gt;(\r\n          localVarResponse.statusCode(),\r\n          localVarResponse.headers().map(),\r\n          localVarResponse.body() == null ? null : memberVarObjectMapper.readValue(localVarResponse.body(), new TypeReference&lt;File&gt;() {}) // closes the InputStream\r\n        );\r\n      } finally {\r\n      }\r\n```\r\n\r\nFirst, it returns a response of type file...Ok, I could live with that. But it just handles the response wrong: First, it retrieves a HttpResponse&lt;InputStream&gt;. That is correct and gets the input stream, but then it tries to map the response body through a JSON mapper (memberVarObjectMapper). Which is obviously wrong since the return type in the spec is &quot;application/zip&quot;, so the method breaks here with a JSON parse error.\r\n\r\nSo, my questions:\r\n1) Should I change my spec in some way to make it clear(er) to the generator what I want?\r\n2) Can I get the client to not use the JSON mapper and instead directly return the InputStream from the response?\r\n3) If there is no workaround, is there another generator library which works better? I wanted to use native since we&#39;re using Java 17, but if there&#39;s other generators which work and rely on external libraries I guess I have use one of those.","title":"Client-side file download with OpenAPI Generator-Plugin","body":"<p>I'm trying to implement a REST API using OpenAPI (v3.0.3) and the openapi-generator-maven-plugin (v6.6.0). I want the plugin to generate both server and client from the specification.</p>\n<p>I'm trying to implement a method to download a (ZIP) file, which I imagine would be a rather common operation, but I cannot get it to work on the client side. And unfortunately, my search didn't turn up any useful hints, so I'm asking a new question. In the spec, I have written:</p>\n<pre><code>  /download:\n    get:\n      operationId: download\n      responses:\n        &quot;200&quot;:\n          description: Success\n          content:\n            application/zip:\n              schema:\n                type: string\n                format: binary\n</code></pre>\n<p>The server side (generator spring) is generated as expected and returns a ResponseEntity of type &quot;Resource&quot; (I have implemented the method to return a Spring InputStreamResource). When calling the server endpoint with a hand made client, it works as expected and I can read the InputStream without problem.</p>\n<p>The generated client however (generator java, with library native) is not really doing what I think it should. Here is a part of the generated download method:</p>\n<pre><code>  public ApiResponse&lt;File&gt; downloadWithHttpInfo() throws ApiException {\n    HttpRequest.Builder localVarRequestBuilder = downloadRequestBuilder();\n    try {\n      HttpResponse&lt;InputStream&gt; localVarResponse = memberVarHttpClient.send(\n          localVarRequestBuilder.build(),\n          HttpResponse.BodyHandlers.ofInputStream());\n      if (memberVarResponseInterceptor != null) {\n        memberVarResponseInterceptor.accept(localVarResponse);\n      }\n      try {\n        if (localVarResponse.statusCode()/ 100 != 2) {\n          throw getApiException(&quot;download&quot;, localVarResponse);\n        }\n        return new ApiResponse&lt;File&gt;(\n          localVarResponse.statusCode(),\n          localVarResponse.headers().map(),\n          localVarResponse.body() == null ? null : memberVarObjectMapper.readValue(localVarResponse.body(), new TypeReference&lt;File&gt;() {}) // closes the InputStream\n        );\n      } finally {\n      }\n</code></pre>\n<p>First, it returns a response of type file...Ok, I could live with that. But it just handles the response wrong: First, it retrieves a HttpResponse. That is correct and gets the input stream, but then it tries to map the response body through a JSON mapper (memberVarObjectMapper). Which is obviously wrong since the return type in the spec is &quot;application/zip&quot;, so the method breaks here with a JSON parse error.</p>\n<p>So, my questions:</p>\n<ol>\n<li>Should I change my spec in some way to make it clear(er) to the generator what I want?</li>\n<li>Can I get the client to not use the JSON mapper and instead directly return the InputStream from the response?</li>\n<li>If there is no workaround, is there another generator library which works better? I wanted to use native since we're using Java 17, but if there's other generators which work and rely on external libraries I guess I have use one of those.</li>\n</ol>\n"},{"tags":["java","xml","spring-boot","javax.imageio","xml-to-json"],"comments":[{"owner":{"account_id":9760,"reputation":85860,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":0,"creation_date":1689363150,"post_id":76690357,"comment_id":135208292,"body_markdown":"Have you recompiled ALL your code with Java 17? Are all your dependencies compatible with Java 17?","body":"Have you recompiled ALL your code with Java 17? Are all your dependencies compatible with Java 17?"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1689364265,"post_id":76690357,"comment_id":135208475,"body_markdown":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer.","body":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer."},{"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1689367163,"post_id":76690357,"comment_id":135208971,"body_markdown":"You might want to upgrade to [Jakarta XML bind](https://mvnrepository.com/artifact/jakarta.xml.bind/jakarta.xml.bind-api) and [Jakarta activation](https://mvnrepository.com/artifact/jakarta.activation/jakarta.activation-api). When doing that, make sure to change the package names from `javax` to `jakarta`.","body":"You might want to upgrade to <a href=\"https://mvnrepository.com/artifact/jakarta.xml.bind/jakarta.xml.bind-api\" rel=\"nofollow noreferrer\">Jakarta XML bind</a> and <a href=\"https://mvnrepository.com/artifact/jakarta.activation/jakarta.activation-api\" rel=\"nofollow noreferrer\">Jakarta activation</a>. When doing that, make sure to change the package names from <code>javax</code> to <code>jakarta</code>."},{"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"score":0,"creation_date":1689370749,"post_id":76690357,"comment_id":135209436,"body_markdown":"This looks like a duplicate of [Caused by: java.lang.ClassNotFoundException: com.sun.xml.bind.v2.model.annotation.AnnotationReader](https://stackoverflow.com/questions/36557308/caused-by-java-lang-classnotfoundexception-com-sun-xml-bind-v2-model-annotatio). Review the answers and associated comments for advice on changes you need to make to your pom.xml. Note that some information there is no longer valid because of the age of that question, but the underlying issue is the same as yours. More recent answers there are more likely to be helpful - see https://stackoverflow.com/a/55297661/2985643","body":"This looks like a duplicate of <a href=\"https://stackoverflow.com/questions/36557308/caused-by-java-lang-classnotfoundexception-com-sun-xml-bind-v2-model-annotatio\">Caused by: java.lang.ClassNotFoundException: com.sun.xml.bind.v2.model.annotation.AnnotationReader</a>. Review the answers and associated comments for advice on changes you need to make to your pom.xml. Note that some information there is no longer valid because of the age of that question, but the underlying issue is the same as yours. More recent answers there are more likely to be helpful - see <a href=\"https://stackoverflow.com/a/55297661/2985643\">stackoverflow.com/a/55297661/2985643</a>"},{"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"score":0,"creation_date":1689371117,"post_id":76690357,"comment_id":135209485,"body_markdown":"Also, please be sure to update your question if you try other solutions that did not work for you.","body":"Also, please be sure to update your question if you try other solutions that did not work for you."}],"owner":{"account_id":27020811,"reputation":11,"user_id":22229124,"display_name":"Utsavi "},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":623,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1689363117,"creation_date":1689359819,"question_id":76690357,"body_markdown":"\r\n```\r\nJAXBContext jaxbContext = JAXBContext.newInstance(Instances.class);\r\n            Unmarshaller unmarshaller = jaxbContext.createUnmarshaller();\r\n\r\n            Instances instances = (Instances) unmarshaller.unmarshal(new File(&quot;test.xml&quot;));\r\n\r\n            return new ResponseEntity&lt;&gt;(new GsonBuilder().setPrettyPrinting().create().toJson(instances), HttpStatus.ACCEPTED);\r\n```\r\n\r\nI have this code working in java 11 (converting xml file to json) but when I switch to java 17 this part of code stopped working. \r\n\r\nI also have added two dependencies of javax\r\n\r\n```\r\n&lt;!-- https://mvnrepository.com/artifact/javax.xml.bind/jaxb-api --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.3.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/javax.activation/activation --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;javax.activation&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;activation&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;`\r\n```\r\n\r\n[Error screenshot](https://i.stack.imgur.com/WvgOs.png)\r\n\r\nIf any extra details require feel free to ask.\r\n\r\n    2023-07-14T23:46:57.734+05:30  INFO 96452 --- [nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet &#39;dispatcherServlet&#39;\r\n    2023-07-14T23:46:57.736+05:30  INFO 96452 --- [nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms\r\n    2023-07-14T23:46:57.800+05:30  INFO 96452 --- [nio-8080-exec-2] c.l.s.s.Service.BackendProcessService    : status reading started\r\n    2023-07-14T23:46:57.823+05:30 ERROR 96452 --- [nio-8080-exec-2] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Handler dispatch failed: java.lang.NoClassDefFoundError: com/sun/xml/bind/v2/model/annotation/AnnotationReader] with root cause\r\n    \r\n    java.lang.ClassNotFoundException: com.sun.xml.bind.v2.model.annotation.AnnotationReader\r\n    \tat java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641) ~[na:na]\r\n    \tat java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188) ~[na:na]\r\n    \tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520) ~[na:na]\r\n    \tat java.base/java.lang.ClassLoader.defineClass1(Native Method) ~[na:na]\r\n    \tat java.base/java.lang.ClassLoader.defineClass(ClassLoader.java:1012) ~[na:na]\r\n    \tat java.base/java.security.SecureClassLoader.defineClass(SecureClassLoader.java:150) ~[na:na]\r\n    \tat java.base/jdk.internal.loader.BuiltinClassLoader.defineClass(BuiltinClassLoader.java:862) ~[na:na]\r\n    \tat java.base/jdk.internal.loader.BuiltinClassLoader.findClassOnClassPathOrNull(BuiltinClassLoader.java:760) ~[na:na]\r\n    \tat java.base/jdk.internal.loader.BuiltinClassLoader.loadClassOrNull(BuiltinClassLoader.java:681) ~[na:na]\r\n    \tat java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:639) ~[na:na]\r\n    \tat java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188) ~[na:na]\r\n    \tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520) ~[na:na]\r\n    \tat java.base/java.lang.Class.getDeclaredMethods0(Native Method) ~[na:na]\r\n    \tat java.base/java.lang.Class.privateGetDeclaredMethods(Class.java:3402) ~[na:na]\r\n    \tat java.base/java.lang.Class.getMethodsRecursive(Class.java:3543) ~[na:na]\r\n    \tat java.base/java.lang.Class.getMethod0(Class.java:3529) ~[na:na]\r\n    \tat java.base/java.lang.Class.getMethod(Class.java:2225) ~[na:na]\r\n    \tat javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:295) ~[jaxb-api-2.3.1.jar:2.3.0]\r\n    \tat javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:286) ~[jaxb-api-2.3.1.jar:2.3.0]\r\n    \tat javax.xml.bind.ContextFinder.find(ContextFinder.java:409) ~[jaxb-api-2.3.1.jar:2.3.0]\r\n    \tat javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:721) ~[jaxb-api-2.3.1.jar:2.3.0]\r\n    \tat javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:662) ~[jaxb-api-2.3.1.jar:2.3.0]\r\n    \tat com.lowes.self_service_tool.self_service_backend.Service.BackendProcessService.status(BackendProcessService.java:78) ~[classes/:na]\r\n    \tat com.lowes.self_service_tool.self_service_backend.Controller.BackendProcessController.status(BackendProcessController.java:27) ~[classes/:na]\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\r\n    \tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207) ~[spring-web-6.0.10.jar:6.0.10]\r\n    \tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152) ~[spring-web-6.0.10.jar:6.0.10]\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.10.jar:6.0.10]\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.10.jar:6.0.10]\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.10.jar:6.0.10]\r\n    \tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.10.jar:6.0.10]\r\n    \tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.10.jar:6.0.10]\r\n    \tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.10.jar:6.0.10]\r\n    \tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.10.jar:6.0.10]\r\n    \tat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.0.10.jar:6.0.10]\r\n    \tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.10.jar:6.0]\r\n    \tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.10.jar:6.0.10]\r\n    \tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.10.jar:6.0]\r\n\r\nI thought in java 17 this will get updated but not getting upgrading version is giving errors in same code.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/OOkxd.png\r\n","title":"JAXBContext not working in Java 17.0.3 (It was working in java 11)","body":"<pre><code>JAXBContext jaxbContext = JAXBContext.newInstance(Instances.class);\n            Unmarshaller unmarshaller = jaxbContext.createUnmarshaller();\n\n            Instances instances = (Instances) unmarshaller.unmarshal(new File(&quot;test.xml&quot;));\n\n            return new ResponseEntity&lt;&gt;(new GsonBuilder().setPrettyPrinting().create().toJson(instances), HttpStatus.ACCEPTED);\n</code></pre>\n<p>I have this code working in java 11 (converting xml file to json) but when I switch to java 17 this part of code stopped working.</p>\n<p>I also have added two dependencies of javax</p>\n<pre><code>&lt;!-- https://mvnrepository.com/artifact/javax.xml.bind/jaxb-api --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\n            &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\n            &lt;version&gt;2.3.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/javax.activation/activation --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.activation&lt;/groupId&gt;\n            &lt;artifactId&gt;activation&lt;/artifactId&gt;\n            &lt;version&gt;1.1&lt;/version&gt;\n        &lt;/dependency&gt;`\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/WvgOs.png\" rel=\"nofollow noreferrer\">Error screenshot</a></p>\n<p>If any extra details require feel free to ask.</p>\n<pre><code>2023-07-14T23:46:57.734+05:30  INFO 96452 --- [nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'\n2023-07-14T23:46:57.736+05:30  INFO 96452 --- [nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms\n2023-07-14T23:46:57.800+05:30  INFO 96452 --- [nio-8080-exec-2] c.l.s.s.Service.BackendProcessService    : status reading started\n2023-07-14T23:46:57.823+05:30 ERROR 96452 --- [nio-8080-exec-2] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Handler dispatch failed: java.lang.NoClassDefFoundError: com/sun/xml/bind/v2/model/annotation/AnnotationReader] with root cause\n\njava.lang.ClassNotFoundException: com.sun.xml.bind.v2.model.annotation.AnnotationReader\n    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641) ~[na:na]\n    at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188) ~[na:na]\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520) ~[na:na]\n    at java.base/java.lang.ClassLoader.defineClass1(Native Method) ~[na:na]\n    at java.base/java.lang.ClassLoader.defineClass(ClassLoader.java:1012) ~[na:na]\n    at java.base/java.security.SecureClassLoader.defineClass(SecureClassLoader.java:150) ~[na:na]\n    at java.base/jdk.internal.loader.BuiltinClassLoader.defineClass(BuiltinClassLoader.java:862) ~[na:na]\n    at java.base/jdk.internal.loader.BuiltinClassLoader.findClassOnClassPathOrNull(BuiltinClassLoader.java:760) ~[na:na]\n    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClassOrNull(BuiltinClassLoader.java:681) ~[na:na]\n    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:639) ~[na:na]\n    at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188) ~[na:na]\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520) ~[na:na]\n    at java.base/java.lang.Class.getDeclaredMethods0(Native Method) ~[na:na]\n    at java.base/java.lang.Class.privateGetDeclaredMethods(Class.java:3402) ~[na:na]\n    at java.base/java.lang.Class.getMethodsRecursive(Class.java:3543) ~[na:na]\n    at java.base/java.lang.Class.getMethod0(Class.java:3529) ~[na:na]\n    at java.base/java.lang.Class.getMethod(Class.java:2225) ~[na:na]\n    at javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:295) ~[jaxb-api-2.3.1.jar:2.3.0]\n    at javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:286) ~[jaxb-api-2.3.1.jar:2.3.0]\n    at javax.xml.bind.ContextFinder.find(ContextFinder.java:409) ~[jaxb-api-2.3.1.jar:2.3.0]\n    at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:721) ~[jaxb-api-2.3.1.jar:2.3.0]\n    at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:662) ~[jaxb-api-2.3.1.jar:2.3.0]\n    at com.lowes.self_service_tool.self_service_backend.Service.BackendProcessService.status(BackendProcessService.java:78) ~[classes/:na]\n    at com.lowes.self_service_tool.self_service_backend.Controller.BackendProcessController.status(BackendProcessController.java:27) ~[classes/:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\n    at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207) ~[spring-web-6.0.10.jar:6.0.10]\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152) ~[spring-web-6.0.10.jar:6.0.10]\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.10.jar:6.0.10]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.10.jar:6.0.10]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.10.jar:6.0.10]\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.10.jar:6.0.10]\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.10.jar:6.0.10]\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.10.jar:6.0.10]\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.10.jar:6.0.10]\n    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.0.10.jar:6.0.10]\n    at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.10.jar:6.0]\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.10.jar:6.0.10]\n    at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.10.jar:6.0]\n</code></pre>\n<p>I thought in java 17 this will get updated but not getting upgrading version is giving errors in same code.</p>\n"},{"tags":["java","macos","libgdx"],"owner":{"account_id":19121633,"reputation":125,"user_id":13965488,"display_name":"Derek Li"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1689362617,"creation_date":1689362617,"question_id":76690630,"body_markdown":"I would like my libgdx application to have a dock icon in macOS. This is the code that I tried, posted by fourlaster on discord:\r\n```java\r\nprivate static void updateDockIconForMacOs() {\r\n    if (SharedLibraryLoader.isMac) {\r\n        try {\r\n\r\n            Toolkit defaultToolkit = Toolkit.getDefaultToolkit();\r\n            // icon.png is in assets\r\n            final URL imageResource = DesktopLauncher.class.getClassLoader().getResource(&quot;icon.png&quot;);\r\n            final Image image = defaultToolkit.getImage(imageResource);\r\n            Taskbar taskbar = Taskbar.getTaskbar();\r\n            taskbar.setIconImage(image);\r\n        } catch (Throwable throwable) {\r\n            throwable.printStackTrace();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nThe icon did change, but my program hangs. No exceptions were thrown. I tried to execute this before and after the application was created, but still not working.","title":"MacOS dock icon in Libgdx 1.11","body":"<p>I would like my libgdx application to have a dock icon in macOS. This is the code that I tried, posted by fourlaster on discord:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private static void updateDockIconForMacOs() {\n    if (SharedLibraryLoader.isMac) {\n        try {\n\n            Toolkit defaultToolkit = Toolkit.getDefaultToolkit();\n            // icon.png is in assets\n            final URL imageResource = DesktopLauncher.class.getClassLoader().getResource(&quot;icon.png&quot;);\n            final Image image = defaultToolkit.getImage(imageResource);\n            Taskbar taskbar = Taskbar.getTaskbar();\n            taskbar.setIconImage(image);\n        } catch (Throwable throwable) {\n            throwable.printStackTrace();\n        }\n    }\n}\n</code></pre>\n<p>The icon did change, but my program hangs. No exceptions were thrown. I tried to execute this before and after the application was created, but still not working.</p>\n"},{"tags":["java","activemq"],"answers":[{"tags":[],"owner":{"account_id":11434008,"reputation":30715,"user_id":8381946,"display_name":"Justin Bertram"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1689360354,"creation_date":1689359170,"answer_id":76690297,"question_id":76690080,"body_markdown":"You should use the latest ActiveMQ client dependencies which are 5.18.2 at this point. Version 5.15.1 (which you are using now) was released almost 6 years ago now in September, 2017. I don&#39;t believe it supports running on JDK 17.","title":"org.apache.activemq.util.IntrospectionSupport cannot access sun.security.ssl.SSLSocketImpl","body":"<p>You should use the latest ActiveMQ client dependencies which are 5.18.2 at this point. Version 5.15.1 (which you are using now) was released almost 6 years ago now in September, 2017. I don't believe it supports running on JDK 17.</p>\n"}],"owner":{"account_id":9860975,"reputation":1650,"user_id":7303998,"accept_rate":100,"display_name":"MatWdo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":372,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76690297,"answer_count":1,"score":1,"last_activity_date":1689362546,"creation_date":1689356664,"question_id":76690080,"body_markdown":"I want to push some messages from my regression tests running on gitlab-runner to ActiveMQ &quot;Classic&quot;. I have all the necessary rules for that on the cluster. I followed [this example][1], but I still received an exception. I&#39;m using Java version **Zulu17.34+19-CA (build 17.0.3+7-LTS)** and org.apache.activemq.activemq-pool **5.15.1**. My Java client config looks like that:\r\n```java\r\n  ActiveMQConnectionFactory connectionFactory = new \r\n  ActiveMQConnectionFactory(prop(&quot;activeMQUrl&quot;));\r\n  connectionFactory.setUserName(prop(&quot;activeMQUser&quot;));\r\n  connectionFactory.setPassword(prop(&quot;activeMQPassword&quot;));\r\n\r\n  PooledConnectionFactory pooledConnectionFactory = new PooledConnectionFactory();\r\n  pooledConnectionFactory.setConnectionFactory(connectionFactory);\r\n  pooledConnectionFactory.setMaxConnections(10);\r\n  SimpleActiveMqProducer activeMq =\r\n      new SimpleActiveMqProducer(pooledConnectionFactory,\r\n          prop(&quot;activeMQUser&quot;),\r\n          prop(&quot;activeMQPassword&quot;));\r\n  activeMq\r\n      .toQueue(prop(&quot;myQueue&quot;))\r\n      .send(objectToJson(myMessage))\r\n```\r\nproperties:\r\n```\r\nmyQueue=Consumer.my-consumer\r\nactiveMQUrl=failover:(nio+ssl://some.box.on.aws1:61617,nio+ssl://some.box.on.aws2:61617)?randomize=false&amp;jms.optimizeAcknowledge=true&amp;maxReconnectDelay=150&amp;startupMaxReconnectAttempts=5\r\nactiveMQUser=root\r\nactiveMQPassword=root\r\n```\r\nError:\r\n```\r\n15:39:20.861 [ActiveMQ Task-1] ERROR - Could not set property host on SSLSocket[hostname=null, port=0, Session(1689349160860|SSL_NULL_WITH_NULL_NULL)]\r\njava.lang.IllegalAccessException: class org.apache.activemq.util.IntrospectionSupport cannot access class sun.security.ssl.SSLSocketImpl (in module java.base) because module java.base does not export sun.security.ssl to unnamed module @2dc9b0f5\r\n    at java.base/jdk.internal.reflect.Reflection.newIllegalAccessException(Unknown Source)\r\n    at java.base/java.lang.reflect.AccessibleObject.checkAccess(Unknown Source)\r\n    at java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n    at org.apache.activemq.util.IntrospectionSupport.setProperty(IntrospectionSupport.java:181)\r\n    at org.apache.activemq.util.IntrospectionSupport.setProperties(IntrospectionSupport.java:155)\r\n    at org.apache.activemq.util.IntrospectionSupport.setProperties(IntrospectionSupport.java:140)\r\n    at org.apache.activemq.transport.tcp.SslTransport.(SslTransport.java:72)\r\n    at org.apache.activemq.transport.tcp.SslTransportFactory.createTransport(SslTransportFactory.java:122)\r\n    at org.apache.activemq.transport.TransportFactory.doCompositeConnect(TransportFactory.java:138)\r\n    at org.apache.activemq.transport.TransportFactory.compositeConnect(TransportFactory.java:91)\r\n    at org.apache.activemq.transport.failover.FailoverTransport.doReconnect(FailoverTransport.java:1011)\r\n    at org.apache.activemq.transport.failover.FailoverTransport$2.iterate(FailoverTransport.java:148)\r\n    at org.apache.activemq.thread.PooledTaskRunner.runTask(PooledTaskRunner.java:133)\r\n    at org.apache.activemq.thread.PooledTaskRunner$1.run(PooledTaskRunner.java:48)\r\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\r\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\r\n    at java.base/java.lang.Thread.run(Unknown Source)\r\n```\r\nCan someone help me with that?\r\n\r\n\r\n  [1]: https://github.com/aaaaatoz/activemqdemo/blob/master/src/main/java/amazonmq/amazonMQClientSender.java","title":"org.apache.activemq.util.IntrospectionSupport cannot access sun.security.ssl.SSLSocketImpl","body":"<p>I want to push some messages from my regression tests running on gitlab-runner to ActiveMQ &quot;Classic&quot;. I have all the necessary rules for that on the cluster. I followed <a href=\"https://github.com/aaaaatoz/activemqdemo/blob/master/src/main/java/amazonmq/amazonMQClientSender.java\" rel=\"nofollow noreferrer\">this example</a>, but I still received an exception. I'm using Java version <strong>Zulu17.34+19-CA (build 17.0.3+7-LTS)</strong> and org.apache.activemq.activemq-pool <strong>5.15.1</strong>. My Java client config looks like that:</p>\n<pre class=\"lang-java prettyprint-override\"><code>  ActiveMQConnectionFactory connectionFactory = new \n  ActiveMQConnectionFactory(prop(&quot;activeMQUrl&quot;));\n  connectionFactory.setUserName(prop(&quot;activeMQUser&quot;));\n  connectionFactory.setPassword(prop(&quot;activeMQPassword&quot;));\n\n  PooledConnectionFactory pooledConnectionFactory = new PooledConnectionFactory();\n  pooledConnectionFactory.setConnectionFactory(connectionFactory);\n  pooledConnectionFactory.setMaxConnections(10);\n  SimpleActiveMqProducer activeMq =\n      new SimpleActiveMqProducer(pooledConnectionFactory,\n          prop(&quot;activeMQUser&quot;),\n          prop(&quot;activeMQPassword&quot;));\n  activeMq\n      .toQueue(prop(&quot;myQueue&quot;))\n      .send(objectToJson(myMessage))\n</code></pre>\n<p>properties:</p>\n<pre><code>myQueue=Consumer.my-consumer\nactiveMQUrl=failover:(nio+ssl://some.box.on.aws1:61617,nio+ssl://some.box.on.aws2:61617)?randomize=false&amp;jms.optimizeAcknowledge=true&amp;maxReconnectDelay=150&amp;startupMaxReconnectAttempts=5\nactiveMQUser=root\nactiveMQPassword=root\n</code></pre>\n<p>Error:</p>\n<pre><code>15:39:20.861 [ActiveMQ Task-1] ERROR - Could not set property host on SSLSocket[hostname=null, port=0, Session(1689349160860|SSL_NULL_WITH_NULL_NULL)]\njava.lang.IllegalAccessException: class org.apache.activemq.util.IntrospectionSupport cannot access class sun.security.ssl.SSLSocketImpl (in module java.base) because module java.base does not export sun.security.ssl to unnamed module @2dc9b0f5\n    at java.base/jdk.internal.reflect.Reflection.newIllegalAccessException(Unknown Source)\n    at java.base/java.lang.reflect.AccessibleObject.checkAccess(Unknown Source)\n    at java.base/java.lang.reflect.Method.invoke(Unknown Source)\n    at org.apache.activemq.util.IntrospectionSupport.setProperty(IntrospectionSupport.java:181)\n    at org.apache.activemq.util.IntrospectionSupport.setProperties(IntrospectionSupport.java:155)\n    at org.apache.activemq.util.IntrospectionSupport.setProperties(IntrospectionSupport.java:140)\n    at org.apache.activemq.transport.tcp.SslTransport.(SslTransport.java:72)\n    at org.apache.activemq.transport.tcp.SslTransportFactory.createTransport(SslTransportFactory.java:122)\n    at org.apache.activemq.transport.TransportFactory.doCompositeConnect(TransportFactory.java:138)\n    at org.apache.activemq.transport.TransportFactory.compositeConnect(TransportFactory.java:91)\n    at org.apache.activemq.transport.failover.FailoverTransport.doReconnect(FailoverTransport.java:1011)\n    at org.apache.activemq.transport.failover.FailoverTransport$2.iterate(FailoverTransport.java:148)\n    at org.apache.activemq.thread.PooledTaskRunner.runTask(PooledTaskRunner.java:133)\n    at org.apache.activemq.thread.PooledTaskRunner$1.run(PooledTaskRunner.java:48)\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\n    at java.base/java.lang.Thread.run(Unknown Source)\n</code></pre>\n<p>Can someone help me with that?</p>\n"},{"tags":["java","maven"],"comments":[{"owner":{"account_id":7226774,"reputation":19717,"user_id":5515060,"accept_rate":100,"display_name":"Lino"},"score":1,"creation_date":1632242032,"post_id":69272445,"comment_id":122437361,"body_markdown":"Do you also get `Compilation failure` when you use a different java version? Or only when using Java 17","body":"Do you also get <code>Compilation failure</code> when you use a different java version? Or only when using Java 17"},{"owner":{"account_id":4104221,"reputation":3989,"user_id":3368818,"accept_rate":75,"display_name":"Woodchuck"},"score":1,"creation_date":1632242371,"post_id":69272445,"comment_id":122437509,"body_markdown":"One thing worth trying is a mvn clean. Usually a good habit imo to run a clean as part of a mvn build (e.g., &quot;mvn clean install&quot; or &quot;mvn clean compile&quot;) to rule out any lingering issues from a prior build.","body":"One thing worth trying is a mvn clean. Usually a good habit imo to run a clean as part of a mvn build (e.g., &quot;mvn clean install&quot; or &quot;mvn clean compile&quot;) to rule out any lingering issues from a prior build."},{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1632243161,"post_id":69272445,"comment_id":122437825,"body_markdown":"Usually there is more in the log output in particular on the module level where the error happens ...you have only posted the final part at the end... also there are some strange things in this build. Using surefireplugin for IT&#39;s ? It&#39;s not intended for integration tests (failsafe plugin is intended for that)... also using very old versions of them...Why do the child has a profile? If you use `maven.compiler.target` property you don&#39;t need to configuration maven-compiler-plugin in pluginManagement that&#39;s duplication etc. Please make an example project on github so we can reproduce it...","body":"Usually there is more in the log output in particular on the module level where the error happens ...you have only posted the final part at the end... also there are some strange things in this build. Using surefireplugin for IT&#39;s ? It&#39;s not intended for integration tests (failsafe plugin is intended for that)... also using very old versions of them...Why do the child has a profile? If you use <code>maven.compiler.target</code> property you don&#39;t need to configuration maven-compiler-plugin in pluginManagement that&#39;s duplication etc. Please make an example project on github so we can reproduce it..."},{"owner":{"account_id":5777164,"reputation":2157,"user_id":4587985,"accept_rate":78,"display_name":"Daniela Morais"},"score":0,"creation_date":1632245311,"post_id":69272445,"comment_id":122438605,"body_markdown":"@Lino I tried with JDK 8 and there&#39;s no error. I&#39;ll try with JDK 11.","body":"@Lino I tried with JDK 8 and there&#39;s no error. I&#39;ll try with JDK 11."},{"owner":{"account_id":5777164,"reputation":2157,"user_id":4587985,"accept_rate":78,"display_name":"Daniela Morais"},"score":0,"creation_date":1632245512,"post_id":69272445,"comment_id":122438677,"body_markdown":"@khmarbaise It&#39;s a legacy project.. I&#39;ll fix this and create an example project on Github. Thanks.","body":"@khmarbaise It&#39;s a legacy project.. I&#39;ll fix this and create an example project on Github. Thanks."},{"owner":{"account_id":1296827,"reputation":524,"user_id":1247667,"display_name":"Ryabinin Sergey"},"score":0,"creation_date":1658744999,"post_id":69272445,"comment_id":129119034,"body_markdown":"I download maven 3.8.6 from https://maven.apache.org/download.cgi, install in separate directory and alias mnv17 created to it. With JDK17 mvn3.8.6 work fine.","body":"I download maven 3.8.6 from <a href=\"https://maven.apache.org/download.cgi\" rel=\"nofollow noreferrer\">maven.apache.org/download.cgi</a>, install in separate directory and alias mnv17 created to it. With JDK17 mvn3.8.6 work fine."},{"owner":{"account_id":241158,"reputation":9333,"user_id":511804,"accept_rate":56,"display_name":"Alexandr"},"score":0,"creation_date":1686736905,"post_id":69272445,"comment_id":134839132,"body_markdown":"In your particular case, `mvn` is too old for Java 17. Update mvn to a new version, it should fix the issue. In the comment above 3.8.6 version is ok. I used 3.9.2 version and it fixed the issue for me.","body":"In your particular case, <code>mvn</code> is too old for Java 17. Update mvn to a new version, it should fix the issue. In the comment above 3.8.6 version is ok. I used 3.9.2 version and it fixed the issue for me."}],"answers":[{"tags":[],"owner":{"account_id":2697215,"reputation":1088,"user_id":2328925,"display_name":"NaderNader"},"comment_count":0,"down_vote_count":0,"up_vote_count":20,"is_accepted":true,"score":20,"last_activity_date":1634675291,"creation_date":1634675291,"answer_id":69637290,"question_id":69272445,"body_markdown":"This failure is likely due to an issue between java 17 and older lombok versions. Building with java 17.0.1, lombok 1.18.20 and maven 3.8.1 caused a vague &quot;Compilation failure&quot; for me as well. I upgraded to maven 3.8.3 which also failed but provided this detail on the failure:\r\n\r\njava.lang.NullPointerException: Cannot read field &quot;bindingsWhenTrue&quot; because &quot;currentBindings&quot; is null\r\n\r\nSearching for this failure message I found this [issue][1] on stackoverflow leading me to a bug in lombok. I upgraded to lombok 1.18.22 and that fixed the compilation failure for a successful build.\r\n\r\n  [1]: https://stackoverflow.com/questions/69184925/gradle-7-2-java-17-build-issue-java-lang-nullpointerexception-cannot-read-field","title":"Java 17: Maven doesn&#39;t give much information about the error that happened, why?","body":"<p>This failure is likely due to an issue between java 17 and older lombok versions. Building with java 17.0.1, lombok 1.18.20 and maven 3.8.1 caused a vague &quot;Compilation failure&quot; for me as well. I upgraded to maven 3.8.3 which also failed but provided this detail on the failure:</p>\n<p>java.lang.NullPointerException: Cannot read field &quot;bindingsWhenTrue&quot; because &quot;currentBindings&quot; is null</p>\n<p>Searching for this failure message I found this <a href=\"https://stackoverflow.com/questions/69184925/gradle-7-2-java-17-build-issue-java-lang-nullpointerexception-cannot-read-field\">issue</a> on stackoverflow leading me to a bug in lombok. I upgraded to lombok 1.18.22 and that fixed the compilation failure for a successful build.</p>\n"},{"comments":[{"owner":{"account_id":23904234,"reputation":1928,"user_id":17902018,"display_name":"rikyeah"},"score":1,"creation_date":1644015808,"post_id":70992421,"comment_id":125502133,"body_markdown":"Don&#39;t just post an image of the solution, write it down if it can be.","body":"Don&#39;t just post an image of the solution, write it down if it can be."},{"owner":{"account_id":23582005,"reputation":27,"user_id":17620904,"display_name":"Alana"},"score":0,"creation_date":1644192354,"post_id":70992421,"comment_id":125533025,"body_markdown":"I actually made a comment, it is short, but it is all that was needed","body":"I actually made a comment, it is short, but it is all that was needed"}],"tags":[],"owner":{"account_id":23582005,"reputation":27,"user_id":17620904,"display_name":"Alana"},"comment_count":2,"down_vote_count":4,"up_vote_count":1,"is_accepted":false,"score":-3,"last_activity_date":1644006491,"creation_date":1644006053,"answer_id":70992421,"question_id":69272445,"body_markdown":"[Installed jre][1]\r\nMake sure correct file is selected in the installed jre\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/msSXV.png","title":"Java 17: Maven doesn&#39;t give much information about the error that happened, why?","body":"<p><a href=\"https://i.stack.imgur.com/msSXV.png\" rel=\"nofollow noreferrer\">Installed jre</a>\nMake sure correct file is selected in the installed jre</p>\n"},{"tags":[],"owner":{"account_id":26206222,"reputation":101,"user_id":19885776,"display_name":"Rejja Kubzek"},"comment_count":0,"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1669028488,"creation_date":1669028488,"answer_id":74517891,"question_id":69272445,"body_markdown":"Maven compiler for java versions above Java 9 can be set up differently. \r\nFor me it worked when I replaced:\r\n\r\n    &lt;properties&gt;\r\n            &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\r\n            &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\r\n    &lt;/properties&gt;\r\n\r\nWith this code:\r\n\r\n    &lt;properties&gt;\r\n            &lt;maven.compiler.release&gt;17&lt;/maven.compiler.release&gt;\r\n    &lt;/properties&gt;\r\n\r\nThis should work for all java versions above Java 9","title":"Java 17: Maven doesn&#39;t give much information about the error that happened, why?","body":"<p>Maven compiler for java versions above Java 9 can be set up differently.\nFor me it worked when I replaced:</p>\n<pre><code>&lt;properties&gt;\n        &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\n&lt;/properties&gt;\n</code></pre>\n<p>With this code:</p>\n<pre><code>&lt;properties&gt;\n        &lt;maven.compiler.release&gt;17&lt;/maven.compiler.release&gt;\n&lt;/properties&gt;\n</code></pre>\n<p>This should work for all java versions above Java 9</p>\n"},{"comments":[{"owner":{"account_id":2078676,"reputation":2468,"user_id":1851302,"accept_rate":62,"display_name":"KNU"},"score":0,"creation_date":1692891884,"post_id":74580028,"comment_id":135688670,"body_markdown":"can you give plz give an example of what it will actually look like. For ex: \n`&lt;source&gt;17&lt;/source&gt;`  I tried such but didn&#39;t work","body":"can you give plz give an example of what it will actually look like. For ex:  <code>&lt;source&gt;17&lt;&#47;source&gt;</code>  I tried such but didn&#39;t work"}],"tags":[],"owner":{"account_id":26935368,"reputation":51,"user_id":20507081,"display_name":"BMET1"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1669441691,"creation_date":1669441691,"answer_id":74580028,"question_id":69272445,"body_markdown":"I tried the fixes here but none of them did the trick.  I can confirm the problem happens with Java 17 only. \r\n\r\n    &lt;plugin&gt;\r\n    \t&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;3.8.1&lt;/version&gt;\r\n    \t\t&lt;configuration&gt;\r\n    \t\t\t&lt;source&gt;&quot;insert Java Version here&quot;&lt;/source&gt;\r\n    \t     \t&lt;target&gt;&quot;insert Java Version here&quot;&lt;/target&gt;\r\n    \t&lt;/configuration&gt;\r\n    &lt;/plugin&gt;\r\n\r\nIt does not matter if my build path matches the POM file, or even if you specify the java version like the example code above. My initial POM file didnt even have the &lt;configuration&gt; tags.\r\n\r\nHowever, I&#39;ve found a work around. leave the POM file alone,set your buildpath to java 1.8 then compile. It will be sucesscul.  Change it back to java 17 and now it wont throw the error. \r\n\r\nI don&#39;t know how or why this works but it does and all Java 17 features work as far as I can tell.  \r\n\r\nCheers!\r\n\r\nBMET1","title":"Java 17: Maven doesn&#39;t give much information about the error that happened, why?","body":"<p>I tried the fixes here but none of them did the trick.  I can confirm the problem happens with Java 17 only.</p>\n<pre><code>&lt;plugin&gt;\n    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n        &lt;version&gt;3.8.1&lt;/version&gt;\n        &lt;configuration&gt;\n            &lt;source&gt;&quot;insert Java Version here&quot;&lt;/source&gt;\n            &lt;target&gt;&quot;insert Java Version here&quot;&lt;/target&gt;\n    &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>It does not matter if my build path matches the POM file, or even if you specify the java version like the example code above. My initial POM file didnt even have the  tags.</p>\n<p>However, I've found a work around. leave the POM file alone,set your buildpath to java 1.8 then compile. It will be sucesscul.  Change it back to java 17 and now it wont throw the error.</p>\n<p>I don't know how or why this works but it does and all Java 17 features work as far as I can tell.</p>\n<p>Cheers!</p>\n<p>BMET1</p>\n"},{"tags":[],"owner":{"account_id":4508992,"reputation":1563,"user_id":3665662,"display_name":"amer"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1689361095,"creation_date":1689341820,"answer_id":76688215,"question_id":69272445,"body_markdown":"To be honest I&#39;ve tried all of the above and still got the error. I lost some time checking Java and Maven all was good in console, but IntelliJ was caching versions obviously.\r\n\r\nFinally I tried restarting all instances of IDE (IntellJ) and it started working.","title":"Java 17: Maven doesn&#39;t give much information about the error that happened, why?","body":"<p>To be honest I've tried all of the above and still got the error. I lost some time checking Java and Maven all was good in console, but IntelliJ was caching versions obviously.</p>\n<p>Finally I tried restarting all instances of IDE (IntellJ) and it started working.</p>\n"}],"owner":{"account_id":5777164,"reputation":2157,"user_id":4587985,"accept_rate":78,"display_name":"Daniela Morais"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":149712,"favorite_count":0,"down_vote_count":0,"up_vote_count":29,"accepted_answer_id":69637290,"answer_count":5,"score":29,"last_activity_date":1689361095,"creation_date":1632241917,"question_id":69272445,"body_markdown":"I&#39;m upgrading from JDK 8 to JDK 17 and I&#39;m trying to compile with `mvn clean install -X -DskipTests` and there&#39;s no information about the error. \r\n\r\nBtw, I&#39;m updating the dependencies and after that I compile to see if has errors. I need to update some dependencies such as Spring, Hibernate etc. I already updated Lombok.\r\n\r\nI added the -X or -e option but I got the same result. \r\n\r\nWhat can I do to get more information about the error? The log shows that it was loading hibernate-jpa-2.1-api before failed... so that means the problem is in this dependency? \r\n\r\n\r\n    [INFO] [loading /Users/daniela/.m2/repository/org/projectlombok/lombok/1.18.2/lombok-1.18.2.jar(/lombok/AllArgsConstructor$AnyAnnotation.class)]\r\n    [INFO] [loading /Users/daniela/.m2/repository/org/ocpsoft/rewrite/rewrite-config-prettyfaces/2.0.4.Final/rewrite-config-prettyfaces-2.0.4.Final.jar(/com/ocpsoft/pretty/faces/annotation/URLValidator.class)]\r\n    [INFO] [loading /Users/daniela/.m2/repository/javax/servlet/javax.servlet-api/3.1.0/javax.servlet-api-3.1.0.jar(/javax/servlet/annotation/WebInitParam.class)]\r\n    [INFO] [loading /Users/daniela/.m2/repository/org/projectlombok/lombok/1.18.2/lombok-1.18.2.jar(/lombok/RequiredArgsConstructor$AnyAnnotation.class)]\r\n    [INFO] [loading /Users/daniela/.m2/repository/org/hibernate/javax/persistence/hibernate-jpa-2.1-api/1.0.0.Final/hibernate-jpa-2.1-api-1.0.0.Final.jar(/javax/persistence/PersistenceProperty.class)]\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] Reactor Summary for My App 2.61.0-SNAPSHOT:\r\n    [INFO] \r\n    [INFO] My App ............................. SUCCESS [  0.005 s]\r\n    [INFO] My App - Webapp .................... FAILURE [  9.454 s]\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] BUILD FAILURE\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] Total time:  9.555 s\r\n    [INFO] Finished at: 2021-09-21T10:31:24-03:00\r\n    [INFO] ------------------------------------------------------------------------\r\n    [ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.8.1:compile (default-compile) on project myapp-webapp: Compilation failure -&gt; [Help 1]\r\n    org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.8.1:compile (default-compile) on project myapp-webapp: Compilation failure\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:215)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\r\n        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\r\n        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\r\n        at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\r\n        at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\r\n        at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\r\n        at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\r\n        at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\r\n        at org.apache.maven.cli.MavenCli.execute (MavenCli.java:957)\r\n        at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:289)\r\n        at org.apache.maven.cli.MavenCli.main (MavenCli.java:193)\r\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\r\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:77)\r\n        at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke (Method.java:568)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\r\n    Caused by: org.apache.maven.plugin.compiler.CompilationFailureException: Compilation failure\r\n        at org.apache.maven.plugin.compiler.AbstractCompilerMojo.execute (AbstractCompilerMojo.java:1224)\r\n        at org.apache.maven.plugin.compiler.CompilerMojo.execute (CompilerMojo.java:187)\r\n        at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:137)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:210)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\r\n        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\r\n        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\r\n        at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\r\n        at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\r\n        at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\r\n        at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\r\n        at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\r\n        at org.apache.maven.cli.MavenCli.execute (MavenCli.java:957)\r\n        at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:289)\r\n        at org.apache.maven.cli.MavenCli.main (MavenCli.java:193)\r\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\r\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:77)\r\n        at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke (Method.java:568)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\r\n    [ERROR] \r\n    [ERROR] \r\n    [ERROR] For more information about the errors and possible solutions, please read the following articles:\r\n    [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException\r\n    [ERROR] \r\n    [ERROR] After correcting the problems, you can resume the build with the command\r\n    [ERROR]   mvn &lt;args&gt; -rf :myapp-webapp\r\n\r\n\r\npom.xml (Parent)\r\n\r\n    &lt;properties&gt;\r\n    \r\n    \t\t&lt;!-- Generic properties --&gt;\r\n    \t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n    \t\t&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    \t\t&lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\r\n    \r\n    \t\t&lt;!-- Java EE / Java SE dependencies --&gt;\r\n    \t\t&lt;jsp.version&gt;2.2&lt;/jsp.version&gt;\r\n    \t\t&lt;jstl.version&gt;1.2&lt;/jstl.version&gt;\r\n    \t\t&lt;servlet.version&gt;3.1.0&lt;/servlet.version&gt;\r\n    \t\t&lt;javax-el.version&gt;3.0.0&lt;/javax-el.version&gt;\r\n    \t\t&lt;jaxb-impl.version&gt;2.2.7-b63&lt;/jaxb-impl.version&gt;\r\n    \r\n    \t\t&lt;!-- Other dependencies such as Spring, Hibernate etc --&gt;\r\n    \r\n    \t\t&lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\r\n    \t\t&lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\r\n    &lt;/properties&gt;\r\n    \r\n    &lt;build&gt;\r\n    \r\n    \t\t&lt;pluginManagement&gt;\r\n    \r\n    \t\t\t&lt;plugins&gt;\r\n    \t\t\t\t&lt;plugin&gt;\r\n    \t\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    \t\t\t\t\t&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t\t&lt;version&gt;3.8.1&lt;/version&gt;\r\n    \t\t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t\t&lt;annotationProcessorPaths&gt;\r\n    \t\t\t\t\t\t\t&lt;path&gt;\r\n    \t\t\t\t\t\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n    \t\t\t\t\t\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n    \t\t\t\t\t\t\t\t&lt;version&gt;${lombok.version}&lt;/version&gt;\r\n    \t\t\t\t\t\t\t&lt;/path&gt;\r\n    \t\t\t\t\t\t&lt;/annotationProcessorPaths&gt;\r\n    \t\t\t\t\t\t&lt;compilerArguments&gt;\r\n    \t\t\t\t\t\t\t&lt;verbose /&gt;\r\n    \t\t\t\t\t\t\t&lt;Xlint /&gt;\r\n    \t\t\t\t\t\t&lt;/compilerArguments&gt;\r\n    \t\t\t\t\t\t&lt;fork&gt;true&lt;/fork&gt;\r\n    \t\t\t\t\t\t&lt;verbose&gt;true&lt;/verbose&gt;\r\n    \t\t\t\t\t\t&lt;source&gt;17&lt;/source&gt;\r\n    \t\t\t\t\t\t&lt;target&gt;17&lt;/target&gt;\r\n    \t\t\t\t\t\t&lt;showWarnings&gt;true&lt;/showWarnings&gt;\r\n                            &lt;compilerVersion&gt;17&lt;/compilerVersion&gt;\r\n    \t\t\t\t\t\t&lt;debug&gt;true&lt;/debug&gt;\r\n    \t\t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t\t&lt;/plugin&gt;\r\n    \r\n    \t\t\t\t&lt;plugin&gt;\r\n    \t\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    \t\t\t\t\t&lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t\t&lt;version&gt;2.4&lt;/version&gt;\r\n    \t\t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t\t&lt;warName&gt;${project.build.finalName}&lt;/warName&gt;\r\n    \t\t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t\t&lt;/plugin&gt;\r\n    \r\n    \t\t\t\t&lt;plugin&gt;\r\n    \t\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    \t\t\t\t\t&lt;artifactId&gt;maven-release-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t\t&lt;version&gt;2.5&lt;/version&gt;\r\n    \t\t\t\t\t&lt;dependencies&gt;\r\n    \t\t\t\t\t\t&lt;dependency&gt;\r\n    \t\t\t\t\t\t\t&lt;groupId&gt;org.apache.maven.scm&lt;/groupId&gt;\r\n    \t\t\t\t\t\t\t&lt;artifactId&gt;maven-scm-provider-gitexe&lt;/artifactId&gt;\r\n    \t\t\t\t\t\t\t&lt;version&gt;1.9.2&lt;/version&gt;\r\n    \t\t\t\t\t\t&lt;/dependency&gt;\r\n    \t\t\t\t\t&lt;/dependencies&gt;\r\n    \t\t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t\t&lt;arguments&gt;-Dbuild-env=${build-env}&lt;/arguments&gt;\r\n    \t\t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t\t&lt;/plugin&gt;\r\n    \r\n    \t\t\t\t&lt;plugin&gt;\r\n    \t\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    \t\t\t\t\t&lt;artifactId&gt;maven-javadoc-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t\t&lt;version&gt;2.9&lt;/version&gt;\r\n    \t\t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t\t&lt;skip&gt;true&lt;/skip&gt;\r\n    \t\t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t\t&lt;/plugin&gt;\r\n    \r\n    \t\t\t\t&lt;plugin&gt;\r\n    \t\t\t\t\t&lt;artifactId&gt;maven-clean-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t\t&lt;version&gt;2.6.1&lt;/version&gt;\r\n    \t\t\t\t&lt;/plugin&gt;\r\n    \r\n    \t\t\t\t&lt;plugin&gt;\r\n    \t\t\t\t\t&lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t\t&lt;version&gt;2.7&lt;/version&gt;\r\n    \t\t\t\t\t&lt;executions&gt;\r\n    \t\t\t\t\t\t&lt;execution&gt;\r\n    \t\t\t\t\t\t\t&lt;id&gt;copy-resources&lt;/id&gt;\r\n    \t\t\t\t\t\t\t&lt;phase&gt;validate&lt;/phase&gt;\r\n    \t\t\t\t\t\t\t&lt;goals&gt;\r\n    \t\t\t\t\t\t\t\t&lt;goal&gt;copy-resources&lt;/goal&gt;\r\n    \t\t\t\t\t\t\t&lt;/goals&gt;\r\n    \t\t\t\t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t\t\t\t&lt;outputDirectory&gt;${project.build.outputDirectory}/com/my/app/bundle&lt;/outputDirectory&gt;\r\n    \t\t\t\t\t\t\t\t&lt;resources&gt;\r\n    \t\t\t\t\t\t\t\t\t&lt;resource&gt;\r\n    \t\t\t\t\t\t\t\t\t\t&lt;directory&gt;src/main/resources/my/app/bundle&lt;/directory&gt;\r\n    \t\t\t\t\t\t\t\t\t\t&lt;filtering&gt;true&lt;/filtering&gt;\r\n    \t\t\t\t\t\t\t\t\t&lt;/resource&gt;\r\n    \t\t\t\t\t\t\t\t&lt;/resources&gt;\r\n    \t\t\t\t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t\t\t\t&lt;/execution&gt;\r\n    \t\t\t\t\t&lt;/executions&gt;\r\n    \t\t\t\t&lt;/plugin&gt;\r\n    \r\n    \t\t\t\t&lt;plugin&gt;\r\n    \t\t\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    \t\t\t\t\t\t&lt;artifactId&gt;maven-site-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t\t\t&lt;version&gt;3.9.1&lt;/version&gt;\r\n    \t\t\t\t&lt;/plugin&gt;\r\n    \r\n    \t\t\t\t&lt;plugin&gt;\r\n    \t\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    \t\t\t\t\t&lt;artifactId&gt;maven-project-info-reports-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t\t&lt;version&gt;3.1.2&lt;/version&gt;\r\n    \t\t\t\t&lt;/plugin&gt;\r\n    \t\t\t&lt;/plugins&gt;\r\n    \r\n    \t\t&lt;/pluginManagement&gt;\r\n    \t\t&lt;plugins&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \r\n    \t\t&lt;/plugins&gt;\r\n    \r\n    \t&lt;/build&gt;\r\n\r\npom.xml (Child)\r\n\r\n    &lt;properties&gt;\r\n    \t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n    \r\n    \t\t&lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\r\n        \t&lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\r\n    &lt;/properties&gt;\r\n    \r\n    &lt;profiles&gt;\r\n    \t\t&lt;profile&gt;\r\n    \t\t\t&lt;id&gt;dev&lt;/id&gt;\r\n    \t\t\t&lt;activation&gt;\r\n    \t\t\t\t&lt;activeByDefault&gt;true&lt;/activeByDefault&gt;\r\n    \t\t\t&lt;/activation&gt;\r\n    \r\n    \t\t\t&lt;build&gt;\r\n    \t\t\t\t&lt;finalName&gt;myapp&lt;/finalName&gt;\r\n    \t\t\t\t&lt;plugins&gt;\r\n    \r\n    \t\t\t\t\t&lt;plugin&gt;\r\n    \t\t\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    \t\t\t\t\t\t&lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t\t&lt;/plugin&gt;\r\n    \r\n    \t\t\t\t\t&lt;plugin&gt;\r\n    \t\t\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    \t\t\t\t\t\t&lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t\t\t&lt;includes&gt;\r\n    \t\t\t\t\t\t\t\t&lt;include&gt;**/*IT.java&lt;/include&gt;\r\n    \t\t\t\t\t\t\t&lt;/includes&gt;\r\n    \t\t\t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t\t\t\t&lt;version&gt;2.18.1&lt;/version&gt;\r\n    \t\t\t\t\t&lt;/plugin&gt;\r\n    \r\n    \t\t\t\t\t&lt;plugin&gt;\r\n    \t\t\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    \t\t\t\t\t\t&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t\t\t&lt;inherited&gt;true&lt;/inherited&gt;\r\n    \t\t\t\t\t&lt;/plugin&gt;\r\n    \r\n    \t\t\t\t\t&lt;plugin&gt;\r\n    \t\t\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    \t\t\t\t\t\t&lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t\t&lt;/plugin&gt;\r\n    \t\t\t\t\t&lt;plugin&gt;\r\n    \t\t\t\t\t\t&lt;artifactId&gt;maven-release-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t\t&lt;/plugin&gt;\r\n    \t\t\t\t\t&lt;plugin&gt;\r\n    \t\t\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    \t\t\t\t\t\t&lt;artifactId&gt;maven-site-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t\t&lt;/plugin&gt;\r\n    \t\t\t\t\t&lt;plugin&gt;\r\n    \t\t\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    \t\t\t\t\t\t&lt;artifactId&gt;maven-project-info-reports-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t\t&lt;/plugin&gt;\r\n    \t\t\t\t&lt;/plugins&gt;\r\n    \t\t\t&lt;/build&gt;\r\n    \t\t&lt;/profile&gt;\r\n    &lt;/profile&gt;\t\t\r\n\r\nJava and mvn version\r\n\r\n    daniela@Danielas-Macbook ~&gt; javac -version\r\n    javac 17\r\n    daniela@Danielas-Macbook ~&gt; mvn --version\r\n    Apache Maven 3.6.3 (cecedd343002696d0abb50b32b541b8a6ba2883f)\r\n    Maven home: /usr/local/Cellar/maven/3.6.3_1/libexec\r\n    Java version: 17\r\n\r\nI changed the java version in maven to execute with JDK 8 and JDK 11 and there&#39;s no error: BUILD SUCCESS. I got the error in JDK 16 and 17.","title":"Java 17: Maven doesn&#39;t give much information about the error that happened, why?","body":"<p>I'm upgrading from JDK 8 to JDK 17 and I'm trying to compile with <code>mvn clean install -X -DskipTests</code> and there's no information about the error.</p>\n<p>Btw, I'm updating the dependencies and after that I compile to see if has errors. I need to update some dependencies such as Spring, Hibernate etc. I already updated Lombok.</p>\n<p>I added the -X or -e option but I got the same result.</p>\n<p>What can I do to get more information about the error? The log shows that it was loading hibernate-jpa-2.1-api before failed... so that means the problem is in this dependency?</p>\n<pre><code>[INFO] [loading /Users/daniela/.m2/repository/org/projectlombok/lombok/1.18.2/lombok-1.18.2.jar(/lombok/AllArgsConstructor$AnyAnnotation.class)]\n[INFO] [loading /Users/daniela/.m2/repository/org/ocpsoft/rewrite/rewrite-config-prettyfaces/2.0.4.Final/rewrite-config-prettyfaces-2.0.4.Final.jar(/com/ocpsoft/pretty/faces/annotation/URLValidator.class)]\n[INFO] [loading /Users/daniela/.m2/repository/javax/servlet/javax.servlet-api/3.1.0/javax.servlet-api-3.1.0.jar(/javax/servlet/annotation/WebInitParam.class)]\n[INFO] [loading /Users/daniela/.m2/repository/org/projectlombok/lombok/1.18.2/lombok-1.18.2.jar(/lombok/RequiredArgsConstructor$AnyAnnotation.class)]\n[INFO] [loading /Users/daniela/.m2/repository/org/hibernate/javax/persistence/hibernate-jpa-2.1-api/1.0.0.Final/hibernate-jpa-2.1-api-1.0.0.Final.jar(/javax/persistence/PersistenceProperty.class)]\n[INFO] ------------------------------------------------------------------------\n[INFO] Reactor Summary for My App 2.61.0-SNAPSHOT:\n[INFO] \n[INFO] My App ............................. SUCCESS [  0.005 s]\n[INFO] My App - Webapp .................... FAILURE [  9.454 s]\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  9.555 s\n[INFO] Finished at: 2021-09-21T10:31:24-03:00\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.8.1:compile (default-compile) on project myapp-webapp: Compilation failure -&gt; [Help 1]\norg.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.8.1:compile (default-compile) on project myapp-webapp: Compilation failure\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:215)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:957)\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:289)\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:193)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:77)\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke (Method.java:568)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\nCaused by: org.apache.maven.plugin.compiler.CompilationFailureException: Compilation failure\n    at org.apache.maven.plugin.compiler.AbstractCompilerMojo.execute (AbstractCompilerMojo.java:1224)\n    at org.apache.maven.plugin.compiler.CompilerMojo.execute (CompilerMojo.java:187)\n    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:137)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:210)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:957)\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:289)\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:193)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:77)\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke (Method.java:568)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\n[ERROR] \n[ERROR] \n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException\n[ERROR] \n[ERROR] After correcting the problems, you can resume the build with the command\n[ERROR]   mvn &lt;args&gt; -rf :myapp-webapp\n</code></pre>\n<p>pom.xml (Parent)</p>\n<pre><code>&lt;properties&gt;\n\n        &lt;!-- Generic properties --&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\n\n        &lt;!-- Java EE / Java SE dependencies --&gt;\n        &lt;jsp.version&gt;2.2&lt;/jsp.version&gt;\n        &lt;jstl.version&gt;1.2&lt;/jstl.version&gt;\n        &lt;servlet.version&gt;3.1.0&lt;/servlet.version&gt;\n        &lt;javax-el.version&gt;3.0.0&lt;/javax-el.version&gt;\n        &lt;jaxb-impl.version&gt;2.2.7-b63&lt;/jaxb-impl.version&gt;\n\n        &lt;!-- Other dependencies such as Spring, Hibernate etc --&gt;\n\n        &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\n&lt;/properties&gt;\n\n&lt;build&gt;\n\n        &lt;pluginManagement&gt;\n\n            &lt;plugins&gt;\n                &lt;plugin&gt;\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;3.8.1&lt;/version&gt;\n                    &lt;configuration&gt;\n                        &lt;annotationProcessorPaths&gt;\n                            &lt;path&gt;\n                                &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                                &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                                &lt;version&gt;${lombok.version}&lt;/version&gt;\n                            &lt;/path&gt;\n                        &lt;/annotationProcessorPaths&gt;\n                        &lt;compilerArguments&gt;\n                            &lt;verbose /&gt;\n                            &lt;Xlint /&gt;\n                        &lt;/compilerArguments&gt;\n                        &lt;fork&gt;true&lt;/fork&gt;\n                        &lt;verbose&gt;true&lt;/verbose&gt;\n                        &lt;source&gt;17&lt;/source&gt;\n                        &lt;target&gt;17&lt;/target&gt;\n                        &lt;showWarnings&gt;true&lt;/showWarnings&gt;\n                        &lt;compilerVersion&gt;17&lt;/compilerVersion&gt;\n                        &lt;debug&gt;true&lt;/debug&gt;\n                    &lt;/configuration&gt;\n                &lt;/plugin&gt;\n\n                &lt;plugin&gt;\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                    &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;2.4&lt;/version&gt;\n                    &lt;configuration&gt;\n                        &lt;warName&gt;${project.build.finalName}&lt;/warName&gt;\n                    &lt;/configuration&gt;\n                &lt;/plugin&gt;\n\n                &lt;plugin&gt;\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                    &lt;artifactId&gt;maven-release-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;2.5&lt;/version&gt;\n                    &lt;dependencies&gt;\n                        &lt;dependency&gt;\n                            &lt;groupId&gt;org.apache.maven.scm&lt;/groupId&gt;\n                            &lt;artifactId&gt;maven-scm-provider-gitexe&lt;/artifactId&gt;\n                            &lt;version&gt;1.9.2&lt;/version&gt;\n                        &lt;/dependency&gt;\n                    &lt;/dependencies&gt;\n                    &lt;configuration&gt;\n                        &lt;arguments&gt;-Dbuild-env=${build-env}&lt;/arguments&gt;\n                    &lt;/configuration&gt;\n                &lt;/plugin&gt;\n\n                &lt;plugin&gt;\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                    &lt;artifactId&gt;maven-javadoc-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;2.9&lt;/version&gt;\n                    &lt;configuration&gt;\n                        &lt;skip&gt;true&lt;/skip&gt;\n                    &lt;/configuration&gt;\n                &lt;/plugin&gt;\n\n                &lt;plugin&gt;\n                    &lt;artifactId&gt;maven-clean-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;2.6.1&lt;/version&gt;\n                &lt;/plugin&gt;\n\n                &lt;plugin&gt;\n                    &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;2.7&lt;/version&gt;\n                    &lt;executions&gt;\n                        &lt;execution&gt;\n                            &lt;id&gt;copy-resources&lt;/id&gt;\n                            &lt;phase&gt;validate&lt;/phase&gt;\n                            &lt;goals&gt;\n                                &lt;goal&gt;copy-resources&lt;/goal&gt;\n                            &lt;/goals&gt;\n                            &lt;configuration&gt;\n                                &lt;outputDirectory&gt;${project.build.outputDirectory}/com/my/app/bundle&lt;/outputDirectory&gt;\n                                &lt;resources&gt;\n                                    &lt;resource&gt;\n                                        &lt;directory&gt;src/main/resources/my/app/bundle&lt;/directory&gt;\n                                        &lt;filtering&gt;true&lt;/filtering&gt;\n                                    &lt;/resource&gt;\n                                &lt;/resources&gt;\n                            &lt;/configuration&gt;\n                        &lt;/execution&gt;\n                    &lt;/executions&gt;\n                &lt;/plugin&gt;\n\n                &lt;plugin&gt;\n                        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                        &lt;artifactId&gt;maven-site-plugin&lt;/artifactId&gt;\n                        &lt;version&gt;3.9.1&lt;/version&gt;\n                &lt;/plugin&gt;\n\n                &lt;plugin&gt;\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                    &lt;artifactId&gt;maven-project-info-reports-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;3.1.2&lt;/version&gt;\n                &lt;/plugin&gt;\n            &lt;/plugins&gt;\n\n        &lt;/pluginManagement&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n\n        &lt;/plugins&gt;\n\n    &lt;/build&gt;\n</code></pre>\n<p>pom.xml (Child)</p>\n<pre><code>&lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n\n        &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\n&lt;/properties&gt;\n\n&lt;profiles&gt;\n        &lt;profile&gt;\n            &lt;id&gt;dev&lt;/id&gt;\n            &lt;activation&gt;\n                &lt;activeByDefault&gt;true&lt;/activeByDefault&gt;\n            &lt;/activation&gt;\n\n            &lt;build&gt;\n                &lt;finalName&gt;myapp&lt;/finalName&gt;\n                &lt;plugins&gt;\n\n                    &lt;plugin&gt;\n                        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                        &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\n                    &lt;/plugin&gt;\n\n                    &lt;plugin&gt;\n                        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                        &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n                        &lt;configuration&gt;\n                            &lt;includes&gt;\n                                &lt;include&gt;**/*IT.java&lt;/include&gt;\n                            &lt;/includes&gt;\n                        &lt;/configuration&gt;\n                        &lt;version&gt;2.18.1&lt;/version&gt;\n                    &lt;/plugin&gt;\n\n                    &lt;plugin&gt;\n                        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                        &lt;inherited&gt;true&lt;/inherited&gt;\n                    &lt;/plugin&gt;\n\n                    &lt;plugin&gt;\n                        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                        &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\n                    &lt;/plugin&gt;\n                    &lt;plugin&gt;\n                        &lt;artifactId&gt;maven-release-plugin&lt;/artifactId&gt;\n                    &lt;/plugin&gt;\n                    &lt;plugin&gt;\n                        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                        &lt;artifactId&gt;maven-site-plugin&lt;/artifactId&gt;\n                    &lt;/plugin&gt;\n                    &lt;plugin&gt;\n                        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                        &lt;artifactId&gt;maven-project-info-reports-plugin&lt;/artifactId&gt;\n                    &lt;/plugin&gt;\n                &lt;/plugins&gt;\n            &lt;/build&gt;\n        &lt;/profile&gt;\n&lt;/profile&gt;      \n</code></pre>\n<p>Java and mvn version</p>\n<pre><code>daniela@Danielas-Macbook ~&gt; javac -version\njavac 17\ndaniela@Danielas-Macbook ~&gt; mvn --version\nApache Maven 3.6.3 (cecedd343002696d0abb50b32b541b8a6ba2883f)\nMaven home: /usr/local/Cellar/maven/3.6.3_1/libexec\nJava version: 17\n</code></pre>\n<p>I changed the java version in maven to execute with JDK 8 and JDK 11 and there's no error: BUILD SUCCESS. I got the error in JDK 16 and 17.</p>\n"},{"tags":["java","dao"],"comments":[{"owner":{"account_id":13170666,"reputation":78679,"user_id":9513184,"display_name":"Unmitigated"},"score":0,"creation_date":1689360256,"post_id":76690355,"comment_id":135207848,"body_markdown":"Change `import java.sql.Date;` to `import java.util.Date;` in `Seller.java`.","body":"Change <code>import java.sql.Date;</code> to <code>import java.util.Date;</code> in <code>Seller.java</code>."},{"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1689361882,"post_id":76690355,"comment_id":135208083,"body_markdown":"@DwB  I count six for both.  The issue is the mismatched Date class.","body":"@DwB  I count six for both.  The issue is the mismatched Date class."},{"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1689362011,"post_id":76690355,"comment_id":135208098,"body_markdown":"This is an English site so please post questions and answers in English.","body":"This is an English site so please post questions and answers in English."},{"owner":{"account_id":15389687,"reputation":21,"user_id":22061256,"display_name":"Rodrigo Santos"},"score":0,"creation_date":1689362695,"post_id":76690355,"comment_id":135208211,"body_markdown":"The solution Change import java.sql.Date; to import java.util.Date; in Seller.java did not work","body":"The solution Change import java.sql.Date; to import java.util.Date; in Seller.java did not work"},{"owner":{"account_id":15389687,"reputation":21,"user_id":22061256,"display_name":"Rodrigo Santos"},"score":0,"creation_date":1689363099,"post_id":76690355,"comment_id":135208283,"body_markdown":"It worked! Thank you very much.","body":"It worked! Thank you very much."}],"answers":[{"comments":[{"owner":{"account_id":15389687,"reputation":21,"user_id":22061256,"display_name":"Rodrigo Santos"},"score":0,"creation_date":1689363103,"post_id":76690469,"comment_id":135208285,"body_markdown":"It worked! Thank you very much.","body":"It worked! Thank you very much."}],"tags":[],"owner":{"account_id":29019427,"reputation":12,"user_id":22229199,"display_name":"pypka"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":true,"score":-1,"last_activity_date":1689361009,"creation_date":1689361009,"answer_id":76690469,"question_id":76690355,"body_markdown":"It seems you&#39;re using ``java.sql.Date`` which doesn&#39;t have a no-args constructor (see the [docs][1]). So using a valid constructor should work.\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/sql/Date.html","title":"Java - The constructor Seller(int, String, String, Date, double, int) is undefined","body":"<p>It seems you're using <code>java.sql.Date</code> which doesn't have a no-args constructor (see the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/sql/Date.html\" rel=\"nofollow noreferrer\">docs</a>). So using a valid constructor should work.</p>\n"}],"owner":{"account_id":15389687,"reputation":21,"user_id":22061256,"display_name":"Rodrigo Santos"},"comment_count":5,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"closed_date":1689361954,"accepted_answer_id":76690469,"answer_count":1,"score":-3,"last_activity_date":1689361009,"creation_date":1689359805,"question_id":76690355,"body_markdown":"**Pessoal, estou tomando erro de exception ao compilar este c&#243;digo no Java - Eclipse: O erro ocorre na classe Program.java\r\n\r\n`Exception in thread &quot;main&quot; java.lang.Error: Unresolved compilation problem: \r\n\tThe constructor Seller(int, String, String, Date, double, int) is undefined\r\n\r\n\tat PROJETO_DAO_JDBC_SELLER/application.Program.main(Program.java:14)`\r\n**\r\n```\r\nClasse Program.java\r\n\r\npackage application;\r\n\r\nimport java.util.Date;\r\n\r\nimport model.entities.Department;\r\nimport model.entities.Seller;\r\n\r\npublic class Program {\r\n\r\n\tpublic static void main(String[] args) {\r\n\r\n\t\tDepartment obj = new Department(1,&quot;Books&quot;);\r\n\t\t\r\n\t\tSeller seller = new Seller(21,&quot;Bob&quot;, &quot;bob@gmail.com&quot;, new Date(), 3000.0, obj);\r\n\t\t\r\n\t\tSystem.out.println(seller);\r\n\t\t}\r\n}\r\n```\r\n\r\n**Abaixo a classe Seller! Pode ver que ela possui o metodo construtor e est&#225; correto**\r\n\r\n```\r\npackage model.entities;\r\n\r\nimport java.io.Serializable;\r\nimport java.sql.Date;\r\nimport java.util.Objects;\r\n\r\npublic class Seller implements Serializable{\r\n\t\r\n\t\r\n\tprivate static final long serialVersionUID = 1L;\r\n\tprivate Integer id;\r\n\tprivate String name;\r\n\tprivate String email;\r\n\tprivate Date birhDate;\r\n\tprivate double baseSalary;\r\n\t\r\n\tprivate Department department;\r\n\t\r\n\tpublic Seller (){\r\n\t}\r\n\r\n\tpublic Seller(Integer id, String name, String email, Date birhDate, double baseSalary, Department department) {\r\n\t\tthis.id = id;\r\n\t\tthis.name = name;\r\n\t\tthis.email = email;\r\n\t\tthis.birhDate = birhDate;\r\n\t\tthis.baseSalary = baseSalary;\r\n\t\tthis.department = department;\r\n\t}\r\n\r\n\tpublic Integer getId() {\r\n\t\treturn id;\r\n\t}\r\n\r\n\tpublic void setId(Integer id) {\r\n\t\tthis.id = id;\r\n\t}\r\n\r\n\tpublic String getName() {\r\n\t\treturn name;\r\n\t}\r\n\r\n\tpublic void setName(String name) {\r\n\t\tthis.name = name;\r\n\t}\r\n\r\n\tpublic String getEmail() {\r\n\t\treturn email;\r\n\t}\r\n\r\n\tpublic void setEmail(String email) {\r\n\t\tthis.email = email;\r\n\t}\r\n\r\n\tpublic Date getBirhDate() {\r\n\t\treturn birhDate;\r\n\t}\r\n\r\n\tpublic void setBirhDate(Date birhDate) {\r\n\t\tthis.birhDate = birhDate;\r\n\t}\r\n\r\n\tpublic double getBaseSalary() {\r\n\t\treturn baseSalary;\r\n\t}\r\n\r\n\tpublic void setBaseSalary(double baseSalary) {\r\n\t\tthis.baseSalary = baseSalary;\r\n\t}\r\n\r\n\tpublic Department getDepartment() {\r\n\t\treturn department;\r\n\t}\r\n\r\n\tpublic void setDepartment(Department department) {\r\n\t\tthis.department = department;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic int hashCode() {\r\n\t\treturn Objects.hash(id);\r\n\t}\r\n\r\n\t@Override\r\n\tpublic boolean equals(Object obj) {\r\n\t\tif (this == obj)\r\n\t\t\treturn true;\r\n\t\tif (obj == null)\r\n\t\t\treturn false;\r\n\t\tif (getClass() != obj.getClass())\r\n\t\t\treturn false;\r\n\t\tSeller other = (Seller) obj;\r\n\t\treturn Objects.equals(id, other.id);\r\n\t}\r\n\r\n\t@Override\r\n\tpublic String toString() {\r\n\t\treturn &quot;Seller [id=&quot; + id + &quot;, name=&quot; + name + &quot;, email=&quot; + email + &quot;, birhDate=&quot; + birhDate + &quot;, baseSalary=&quot;\r\n\t\t\t\t+ baseSalary + &quot;, department=&quot; + department + &quot;]&quot;;\r\n\t}\r\n\t\r\n\t\r\n\t\t\r\n}\r\n\r\n```\r\n\r\nTentei comparar com os c&#243;digos do professor e est&#227;o iguais, os construtores est&#227;o corretos ao meu ver. e o Department obj = new Department(1,&quot;Books&quot;); est&#225; funcionando.\r\n","title":"Java - The constructor Seller(int, String, String, Date, double, int) is undefined","body":"<p>**Pessoal, estou tomando erro de exception ao compilar este código no Java - Eclipse: O erro ocorre na classe Program.java</p>\n<p>`Exception in thread &quot;main&quot; java.lang.Error: Unresolved compilation problem:\nThe constructor Seller(int, String, String, Date, double, int) is undefined</p>\n<pre><code>at PROJETO_DAO_JDBC_SELLER/application.Program.main(Program.java:14)`\n</code></pre>\n<p>**</p>\n<pre><code>Classe Program.java\n\npackage application;\n\nimport java.util.Date;\n\nimport model.entities.Department;\nimport model.entities.Seller;\n\npublic class Program {\n\n    public static void main(String[] args) {\n\n        Department obj = new Department(1,&quot;Books&quot;);\n        \n        Seller seller = new Seller(21,&quot;Bob&quot;, &quot;bob@gmail.com&quot;, new Date(), 3000.0, obj);\n        \n        System.out.println(seller);\n        }\n}\n</code></pre>\n<p><strong>Abaixo a classe Seller! Pode ver que ela possui o metodo construtor e está correto</strong></p>\n<pre><code>package model.entities;\n\nimport java.io.Serializable;\nimport java.sql.Date;\nimport java.util.Objects;\n\npublic class Seller implements Serializable{\n    \n    \n    private static final long serialVersionUID = 1L;\n    private Integer id;\n    private String name;\n    private String email;\n    private Date birhDate;\n    private double baseSalary;\n    \n    private Department department;\n    \n    public Seller (){\n    }\n\n    public Seller(Integer id, String name, String email, Date birhDate, double baseSalary, Department department) {\n        this.id = id;\n        this.name = name;\n        this.email = email;\n        this.birhDate = birhDate;\n        this.baseSalary = baseSalary;\n        this.department = department;\n    }\n\n    public Integer getId() {\n        return id;\n    }\n\n    public void setId(Integer id) {\n        this.id = id;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public String getEmail() {\n        return email;\n    }\n\n    public void setEmail(String email) {\n        this.email = email;\n    }\n\n    public Date getBirhDate() {\n        return birhDate;\n    }\n\n    public void setBirhDate(Date birhDate) {\n        this.birhDate = birhDate;\n    }\n\n    public double getBaseSalary() {\n        return baseSalary;\n    }\n\n    public void setBaseSalary(double baseSalary) {\n        this.baseSalary = baseSalary;\n    }\n\n    public Department getDepartment() {\n        return department;\n    }\n\n    public void setDepartment(Department department) {\n        this.department = department;\n    }\n\n    @Override\n    public int hashCode() {\n        return Objects.hash(id);\n    }\n\n    @Override\n    public boolean equals(Object obj) {\n        if (this == obj)\n            return true;\n        if (obj == null)\n            return false;\n        if (getClass() != obj.getClass())\n            return false;\n        Seller other = (Seller) obj;\n        return Objects.equals(id, other.id);\n    }\n\n    @Override\n    public String toString() {\n        return &quot;Seller [id=&quot; + id + &quot;, name=&quot; + name + &quot;, email=&quot; + email + &quot;, birhDate=&quot; + birhDate + &quot;, baseSalary=&quot;\n                + baseSalary + &quot;, department=&quot; + department + &quot;]&quot;;\n    }\n    \n    \n        \n}\n\n</code></pre>\n<p>Tentei comparar com os códigos do professor e estão iguais, os construtores estão corretos ao meu ver. e o Department obj = new Department(1,&quot;Books&quot;); está funcionando.</p>\n"},{"tags":["java","linux","aws-lambda","docker-networking","aws-sam-cli"],"comments":[{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1689359557,"post_id":76690311,"comment_id":135207714,"body_markdown":"This part of Stack Overflow is &quot;English Only&quot;. For Portuguese, please use https://pt.stackoverflow.com/  (Translation by translate.google.com)   /// Esta parte do Stack Overflow &#233; &quot;somente em ingl&#234;s&quot;. Para portugu&#234;s, use https://pt.stackoverflow.com/ (Tradu&#231;&#227;o por translate.google.com)","body":"This part of Stack Overflow is &quot;English Only&quot;. For Portuguese, please use <a href=\"https://pt.stackoverflow.com/\">pt.stackoverflow.com</a>  (Translation by translate.google.com)   /// Esta parte do Stack Overflow &#233; &quot;somente em ingl&#234;s&quot;. Para portugu&#234;s, use <a href=\"https://pt.stackoverflow.com/\">pt.stackoverflow.com</a> (Tradu&#231;&#227;o por translate.google.com)"}],"owner":{"account_id":29019249,"reputation":1,"user_id":22229063,"display_name":"Henrique Fernandes"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":82,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689360608,"creation_date":1689359307,"question_id":76690311,"body_markdown":"When running  \r\n```\r\nsam build --docker-network host \r\n```\r\nand inspecting the initialized Docker container, que can see that default network (bridge) was assigned, that is, the `docker-network` option had no effect.\r\n\r\n# Environment details\r\nSAM CLI version: 1.90.0\r\n\r\nOS: CentOS 7\r\n\r\nAWS region: us-east-1\r\n\r\nPackageType: Zip\r\n\r\n# Observed result:\r\n\r\n`sam build Function --template um-template.yaml --build-dir .aws-sam/build --docker-network host\r\n`\r\n\r\n`sam local invoke --template um-template.yaml --event &quot;um-event.json&quot; --docker-network host`\r\n\r\n```\r\nCONTAINER ID   IMAGE                COMMAND                  CREATED  STATUS  PORTS    NAMES\r\n4226540e96f4   public.ecr.aws/...   &quot;/var/rapid/aws-lamb…&quot;   2...     Up...   ...tcp   lambda\r\n\r\n\r\nCONTAINER ID   STATUS         NAMES      NETWORKS\r\n4226540e96f4   Up 2 minutes   lambda     bridge\r\n\r\n```\r\n# Expected result:\r\n\r\n```\r\nCONTAINER ID   IMAGE                COMMAND                  CREATED  STATUS  PORTS    NAMES\r\n4226540e96f4   public.ecr.aws/...   &quot;/var/rapid/aws-lamb…&quot;   2...     Up...   ...tcp   lambda\r\n\r\n\r\nCONTAINER ID   STATUS         NAMES      NETWORKS\r\n4226540e96f4   Up 2 minutes   lambda     host\r\n\r\n```\r\n","title":"Setting --docker-network option on sam build command has no effect","body":"<p>When running</p>\n<pre><code>sam build --docker-network host \n</code></pre>\n<p>and inspecting the initialized Docker container, que can see that default network (bridge) was assigned, that is, the <code>docker-network</code> option had no effect.</p>\n<h1>Environment details</h1>\n<p>SAM CLI version: 1.90.0</p>\n<p>OS: CentOS 7</p>\n<p>AWS region: us-east-1</p>\n<p>PackageType: Zip</p>\n<h1>Observed result:</h1>\n<p><code>sam build Function --template um-template.yaml --build-dir .aws-sam/build --docker-network host </code></p>\n<p><code>sam local invoke --template um-template.yaml --event &quot;um-event.json&quot; --docker-network host</code></p>\n<pre><code>CONTAINER ID   IMAGE                COMMAND                  CREATED  STATUS  PORTS    NAMES\n4226540e96f4   public.ecr.aws/...   &quot;/var/rapid/aws-lamb…&quot;   2...     Up...   ...tcp   lambda\n\n\nCONTAINER ID   STATUS         NAMES      NETWORKS\n4226540e96f4   Up 2 minutes   lambda     bridge\n\n</code></pre>\n<h1>Expected result:</h1>\n<pre><code>CONTAINER ID   IMAGE                COMMAND                  CREATED  STATUS  PORTS    NAMES\n4226540e96f4   public.ecr.aws/...   &quot;/var/rapid/aws-lamb…&quot;   2...     Up...   ...tcp   lambda\n\n\nCONTAINER ID   STATUS         NAMES      NETWORKS\n4226540e96f4   Up 2 minutes   lambda     host\n\n</code></pre>\n"},{"tags":["javascript","java","spring","spring-boot","rest"],"comments":[{"owner":{"account_id":13170666,"reputation":78679,"user_id":9513184,"display_name":"Unmitigated"},"score":0,"creation_date":1689359362,"post_id":76690306,"comment_id":135207680,"body_markdown":"Please post your Spring CORS configuration.","body":"Please post your Spring CORS configuration."},{"owner":{"account_id":13548231,"reputation":631,"user_id":9773847,"display_name":"Nyamkhuu Buyanjargal"},"score":0,"creation_date":1689359399,"post_id":76690306,"comment_id":135207687,"body_markdown":"first of all, you have to configure your cors configuration on your spring boot application, then try again","body":"first of all, you have to configure your cors configuration on your spring boot application, then try again"},{"owner":{"account_id":13170666,"reputation":78679,"user_id":9513184,"display_name":"Unmitigated"},"score":0,"creation_date":1689359529,"post_id":76690306,"comment_id":135207710,"body_markdown":"Also, please post the exact error.","body":"Also, please post the exact error."},{"owner":{"account_id":24344471,"reputation":3,"user_id":18281338,"display_name":"Abdelrahman Amr Attia Ewais"},"score":0,"creation_date":1689361486,"post_id":76690306,"comment_id":135208033,"body_markdown":"@Unmitigated i add the error from Browser but In spring boot app there is no errors","body":"@Unmitigated i add the error from Browser but In spring boot app there is no errors"},{"owner":{"account_id":24344471,"reputation":3,"user_id":18281338,"display_name":"Abdelrahman Amr Attia Ewais"},"score":0,"creation_date":1689361508,"post_id":76690306,"comment_id":135208036,"body_markdown":"@NyamkhuuBuyanjargal i already add it","body":"@NyamkhuuBuyanjargal i already add it"},{"owner":{"account_id":13548231,"reputation":631,"user_id":9773847,"display_name":"Nyamkhuu Buyanjargal"},"score":0,"creation_date":1689364730,"post_id":76690306,"comment_id":135208559,"body_markdown":"@AbdelrahmanAmrAttiaEwais if it&#39;s possible can you show us&gt;?","body":"@AbdelrahmanAmrAttiaEwais if it&#39;s possible can you show us&gt;?"}],"owner":{"account_id":24344471,"reputation":3,"user_id":18281338,"display_name":"Abdelrahman Amr Attia Ewais"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689359738,"creation_date":1689359252,"question_id":76690306,"body_markdown":"When make Spring boot app and simple controller and API for login and run JS script \r\n\r\n     fetch(&quot;http://localhost:8080/authenticate/login&quot;, {\r\n      method: &quot;POST&quot;,\r\n      body: JSON.stringify({\r\n        email: &quot;abdelrahman.amr@gmail.com&quot;,\r\n        password: &quot;admin&quot;,\r\n      }),\r\n\t  headers: {\r\n        &quot;Content-Type&quot;: &quot;application/json&quot;,\r\n      },\r\n    })\r\n      .then(console.log)\r\n      .catch(console.error);\r\n\r\nthe request call spring boot app and when i debug the request return a success response while in browser catch an error with status 200 and type cors while in Spring i allow all origins\r\n\r\n     @Override\r\n    public void addCorsMappings(CorsRegistry registry) {\r\n        registry.addMapping(&quot;/**&quot;)\r\n                .allowedOrigins(&quot;*&quot;)\r\n                .allowedMethods(&quot;*&quot;)\r\n                .allowedHeaders(&quot;*&quot;);\r\n    }\r\n\r\n\r\nis this Error Can Produced From My AuthFilter or Interceptor ? or where this issue generated\r\n\r\nThe Browser Response \r\n[enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/fOyXL.png","title":"CORS Exception From Browser","body":"<p>When make Spring boot app and simple controller and API for login and run JS script</p>\n<pre><code> fetch(&quot;http://localhost:8080/authenticate/login&quot;, {\n  method: &quot;POST&quot;,\n  body: JSON.stringify({\n    email: &quot;abdelrahman.amr@gmail.com&quot;,\n    password: &quot;admin&quot;,\n  }),\n  headers: {\n    &quot;Content-Type&quot;: &quot;application/json&quot;,\n  },\n})\n  .then(console.log)\n  .catch(console.error);\n</code></pre>\n<p>the request call spring boot app and when i debug the request return a success response while in browser catch an error with status 200 and type cors while in Spring i allow all origins</p>\n<pre><code> @Override\npublic void addCorsMappings(CorsRegistry registry) {\n    registry.addMapping(&quot;/**&quot;)\n            .allowedOrigins(&quot;*&quot;)\n            .allowedMethods(&quot;*&quot;)\n            .allowedHeaders(&quot;*&quot;);\n}\n</code></pre>\n<p>is this Error Can Produced From My AuthFilter or Interceptor ? or where this issue generated</p>\n<p>The Browser Response\n<a href=\"https://i.stack.imgur.com/fOyXL.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"},{"tags":["java","arrays","csv","int","genetic"],"comments":[{"owner":{"account_id":12695174,"reputation":45207,"user_id":9223839,"display_name":"Joakim Danielson"},"score":3,"creation_date":1576220696,"post_id":59317619,"comment_id":104836009,"body_markdown":"Is that the real format of the integers or just how they are displayed in a spreadsheet? Please post (correct) sample values as text to your question.","body":"Is that the real format of the integers or just how they are displayed in a spreadsheet? Please post (correct) sample values as text to your question."},{"owner":{"account_id":277416,"reputation":681878,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":2,"creation_date":1576220740,"post_id":59317619,"comment_id":104836021,"body_markdown":"Start by fixing the code you have. Use your debugger. Use println in the code to understand what you&#39;re doing. Splitting a line on &quot;\\n&quot; doesn&#39;t make much sense. Once you really have an array of Strings, parse each string into an integer.","body":"Start by fixing the code you have. Use your debugger. Use println in the code to understand what you&#39;re doing. Splitting a line on &quot;\\n&quot; doesn&#39;t make much sense. Once you really have an array of Strings, parse each string into an integer."},{"owner":{"account_id":2803497,"reputation":25202,"user_id":2411243,"display_name":"Zabuzard"},"score":1,"creation_date":1576220946,"post_id":59317619,"comment_id":104836091,"body_markdown":"You can use `Integer.parseInt(text)` on the individual strings and collect them into `int[]`. Sounds like a bad approach in general though. Go OOP, create a dedicated class to logically represent the data you have per line. Give it a `parseLine` method that creates it from a given line. Then simply read doing `List&lt;Foo&gt; foos = Files.lines(Paths,get(&quot;file.csv&quot;)).map(Foo::parseLine).collect(Collectors.toList());` - modern Java, hurray.","body":"You can use <code>Integer.parseInt(text)</code> on the individual strings and collect them into <code>int[]</code>. Sounds like a bad approach in general though. Go OOP, create a dedicated class to logically represent the data you have per line. Give it a <code>parseLine</code> method that creates it from a given line. Then simply read doing <code>List&lt;Foo&gt; foos = Files.lines(Paths,get(&quot;file.csv&quot;)).map(Foo::parseLine).colle&zwnj;&#8203;ct(Collectors.toList&zwnj;&#8203;());</code> - modern Java, hurray."}],"answers":[{"tags":[],"owner":{"account_id":8593005,"reputation":1706,"user_id":6436977,"display_name":"T A"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1576223876,"creation_date":1576223876,"answer_id":59318358,"question_id":59317619,"body_markdown":"You are parsing your lines as `String` values, not as `Integers`. Judging from your image your integers are in exponential notation, meaning you would have to parse them first as double, and then cast them to an integer:\r\n\r\n        List&lt;Integer&gt; x_values = new ArrayList&lt;&gt;();\r\n\r\n        try (BufferedReader br = new BufferedReader(new FileReader(&quot;x.csv&quot;))) {\r\n            String line;\r\n            while ((line = br.readLine()) != null) {\r\n                String[] values = line.split(&quot;\\n&quot;);\r\n                List&lt;Integer&gt; intValues = Arrays.asList(values).stream()\r\n                        .map(Double::parseDouble) // parse x.xxE+02 to xxx.0\r\n                        .map(Double::intValue) // xxx.0 to integer xxx\r\n                        .collect(Collectors.toList()); // back to List\r\n                x_values.addAll(intValues);\r\n            }\r\n\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\nYou should make sure though that your csv file only contains integers, otherwise use `List&lt;Double&gt; x_values` instead and skip the int conversion.","title":"How can I convert CSV file into an integer array in java?","body":"<p>You are parsing your lines as <code>String</code> values, not as <code>Integers</code>. Judging from your image your integers are in exponential notation, meaning you would have to parse them first as double, and then cast them to an integer:</p>\n\n<pre><code>    List&lt;Integer&gt; x_values = new ArrayList&lt;&gt;();\n\n    try (BufferedReader br = new BufferedReader(new FileReader(\"x.csv\"))) {\n        String line;\n        while ((line = br.readLine()) != null) {\n            String[] values = line.split(\"\\n\");\n            List&lt;Integer&gt; intValues = Arrays.asList(values).stream()\n                    .map(Double::parseDouble) // parse x.xxE+02 to xxx.0\n                    .map(Double::intValue) // xxx.0 to integer xxx\n                    .collect(Collectors.toList()); // back to List\n            x_values.addAll(intValues);\n        }\n\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n</code></pre>\n\n<p>You should make sure though that your csv file only contains integers, otherwise use <code>List&lt;Double&gt; x_values</code> instead and skip the int conversion.</p>\n"},{"tags":[],"owner":{"account_id":4973669,"reputation":23,"user_id":4013042,"display_name":"Bob Wojack"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689359174,"creation_date":1689359174,"answer_id":76690298,"question_id":59317619,"body_markdown":"A slightly more modern and concise answer\r\n\r\n```\r\n\t List&lt;Integer&gt; x_values = new ArrayList&lt;&gt;();\r\n\r\n\t try (BufferedReader br = Files.newBufferedReader(Paths.get(&quot;x.csv&quot;))) {\r\n\t\t List&lt;Integer&gt; intValues = br.lines()\r\n\t\t\t\t .map(Double::parseDouble) // parse x.xxE+02 to xxx.0\r\n\t\t\t\t .map(Double::intValue) // xxx.0 to integer xxx\r\n\t\t\t\t .collect(Collectors.toList()); // back to List\r\n\t\t x_values.addAll(intValues);\r\n\r\n\t } catch (IOException e) {\r\n\t\t e.printStackTrace();\r\n\t }\r\n```","title":"How can I convert CSV file into an integer array in java?","body":"<p>A slightly more modern and concise answer</p>\n<pre><code>     List&lt;Integer&gt; x_values = new ArrayList&lt;&gt;();\n\n     try (BufferedReader br = Files.newBufferedReader(Paths.get(&quot;x.csv&quot;))) {\n         List&lt;Integer&gt; intValues = br.lines()\n                 .map(Double::parseDouble) // parse x.xxE+02 to xxx.0\n                 .map(Double::intValue) // xxx.0 to integer xxx\n                 .collect(Collectors.toList()); // back to List\n         x_values.addAll(intValues);\n\n     } catch (IOException e) {\n         e.printStackTrace();\n     }\n</code></pre>\n"}],"owner":{"account_id":13664826,"reputation":3,"user_id":9858989,"display_name":"Vhd. h"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2632,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":59318358,"answer_count":2,"score":0,"last_activity_date":1689359174,"creation_date":1576220447,"question_id":59317619,"body_markdown":"I have a CSV file including integer numbers :  \r\n[![x.csv][1]][1]\r\n\r\n\r\nI convert it into an String array:\r\n\r\n    try (BufferedReader br = new BufferedReader(new FileReader(&quot;x.csv&quot;))) {\r\n            String line;\r\n            while ((line = br.readLine()) != null) {\r\n                String[] values = line.split(&quot;\\n&quot;);\r\n                x_values.add(Arrays.asList(values));\r\n            }\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\nThe output is like this :\r\n[output][2]\r\n\r\nbut I want to use values as integer numbers and find their average. How can I do that?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/66yXL.png\r\n  [2]: https://i.stack.imgur.com/L8GhN.png","title":"How can I convert CSV file into an integer array in java?","body":"<p>I have a CSV file including integer numbers :<br>\n<a href=\"https://i.stack.imgur.com/66yXL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/66yXL.png\" alt=\"x.csv\"></a></p>\n\n<p>I convert it into an String array:</p>\n\n<pre><code>try (BufferedReader br = new BufferedReader(new FileReader(\"x.csv\"))) {\n        String line;\n        while ((line = br.readLine()) != null) {\n            String[] values = line.split(\"\\n\");\n            x_values.add(Arrays.asList(values));\n        }\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n</code></pre>\n\n<p>The output is like this :\n<a href=\"https://i.stack.imgur.com/L8GhN.png\" rel=\"nofollow noreferrer\">output</a></p>\n\n<p>but I want to use values as integer numbers and find their average. How can I do that?</p>\n"},{"tags":["java","spring-boot","hikaricp"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1689318567,"post_id":76685008,"comment_id":135199237,"body_markdown":"Looks like the oracle driver isn&#39;t part of yuour dependencies. Also you shouldn&#39;t need to specify a version for your starter dependencies (assuming you have the `spring-boot-starter-parent` as your `&lt;parent&gt;`).","body":"Looks like the oracle driver isn&#39;t part of yuour dependencies. Also you shouldn&#39;t need to specify a version for your starter dependencies (assuming you have the <code>spring-boot-starter-parent</code> as your <code>&lt;parent&gt;</code>)."},{"owner":{"account_id":12883738,"reputation":47,"user_id":9317986,"display_name":"Manoj Kumar"},"score":0,"creation_date":1689343825,"post_id":76685008,"comment_id":135204334,"body_markdown":"oracle driver is also part of the dependency, updated the earlier post","body":"oracle driver is also part of the dependency, updated the earlier post"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1689575375,"post_id":76685008,"comment_id":135227144,"body_markdown":"How are you constructing the jar? If you are using the proper way it should be part of your fatjar. Also are you using the same properties for your other deployment? Looks like either the JDBC isn&#39;t there **or** you are using different URL.","body":"How are you constructing the jar? If you are using the proper way it should be part of your fatjar. Also are you using the same properties for your other deployment? Looks like either the JDBC isn&#39;t there <b>or</b> you are using different URL."}],"answers":[{"comments":[{"owner":{"account_id":12883738,"reputation":47,"user_id":9317986,"display_name":"Manoj Kumar"},"score":0,"creation_date":1689344032,"post_id":76685309,"comment_id":135204403,"body_markdown":"I have used exactly same DB connection string that works in my local workspace. Just to be in sync with codebase","body":"I have used exactly same DB connection string that works in my local workspace. Just to be in sync with codebase"}],"tags":[],"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689359090,"creation_date":1689317354,"answer_id":76685309,"question_id":76685008,"body_markdown":"I have checked the Spring source code where the exception is thrown. It will be thrown only if there is **NO** property `driver-class-name`. Your code shows however that it is present in `application.properties`.\r\n\r\nThe only reasonable explanation is that the above property file is either missing in the application JAR or not on the classpath.\r\n\r\nBased on: [DataSourceProperties.java][1]\r\n\r\n\r\n  [1]: https://github.com/spring-projects/spring-boot/blob/main/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/jdbc/DataSourceProperties.java","title":"HikariCP configuration not working in my app developed in Spring Boot","body":"<p>I have checked the Spring source code where the exception is thrown. It will be thrown only if there is <strong>NO</strong> property <code>driver-class-name</code>. Your code shows however that it is present in <code>application.properties</code>.</p>\n<p>The only reasonable explanation is that the above property file is either missing in the application JAR or not on the classpath.</p>\n<p>Based on: <a href=\"https://github.com/spring-projects/spring-boot/blob/main/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/jdbc/DataSourceProperties.java\" rel=\"nofollow noreferrer\">DataSourceProperties.java</a></p>\n"}],"owner":{"account_id":12883738,"reputation":47,"user_id":9317986,"display_name":"Manoj Kumar"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":295,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1689359090,"creation_date":1689313789,"question_id":76685008,"body_markdown":"I have an application developed in Springboot and I am in need to use Connection Pool settings as connections are getting exhausted while running a load test. I am relying on SpringBoot auto configuration to set the &quot;datasource&quot;. Application is working fine when tested in my local workspace in IntelliJ but the same is not working when deployed in Kubernetes cluster. My spring boot version in 2.6.6 and using JDK11. \r\n\r\nI have read that based on &quot;spring.datasource.url&quot; springBoot identifies the driver class name, but in my case it is not happening\r\n\r\nMaven dependency\r\n        \r\n\r\n    &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;\r\n                &lt;version&gt;${spring.boot.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\r\n                &lt;version&gt;${spring.boot.version}&lt;/version&gt;\r\n                &lt;scope&gt;provided&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n                &lt;version&gt;${spring.boot.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.oracle.database.jdbc&lt;/groupId&gt;\r\n                &lt;artifactId&gt;ojdbc8&lt;/artifactId&gt;\r\n                &lt;version&gt;21.9.0.0&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n\r\n  \r\n\r\nMy application.properties looks like below\r\n\r\n    spring.datasource.url=jdbc:oracle:thin:@......\r\n    spring.datasource.username=test\r\n    spring.datasource.password=test\r\n    spring.datasource.driver-class-name=oracle.jdbc.OracleDriver\r\n    spring.main.allow-bean-definition-overriding=true\r\n    \r\n    #connection pool configuration\r\n    spring.datasource.hikari.pool-name=SVMConnectionPool\r\n    spring.datasource.hikari.maximum-pool-size=60\r\n\r\nError that I see in the logs\r\n\r\n    Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method &#39;dataSource&#39; threw exception; nested exception is org.springframework.boot.autoconfigure.jdbc.DataSourceProperties$DataSourceBeanCreationException: Failed to determine a suitable driver class\r\n    2023-07-14T05:34:41.696439652Z \t\tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185)\r\n    2023-07-14T05:34:41.696442966Z \t\tat org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653)\r\n    2023-07-14T05:34:41.696445978Z \t\t... 121 more\r\n    2023-07-14T05:34:41.696449043Z \tCaused by: org.springframework.boot.autoconfigure.jdbc.DataSourceProperties$DataSourceBeanCreationException: Failed to determine a suitable driver class\r\n    \t\tat org.springframework.boot.autoconfigure.jdbc.DataSourceProperties.determineDriverClassName(DataSourceProperties.java:252)\r\n    \t\tat org.springframework.boot.autoconfigure.jdbc.DataSourceProperties.initializeDataSourceBuilder(DataSourceProperties.java:193)\r\n    2023-07-14T05:34:41.696457775Z \t\tat org.springframework.boot.autoconfigure.jdbc.DataSourceConfiguration.createDataSource(DataSourceConfiguration.java:48)\r\n    2023-07-14T05:34:41.696460846Z \t\tat org.springframework.boot.autoconfigure.jdbc.DataSourceConfiguration$Hikari.dataSource(DataSourceConfiguration.java:90)\r\n    2023-07-14T05:34:41.696464391Z \t\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    2023-07-14T05:34:41.696467454Z \t\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    2023-07-14T05:34:41.696470269Z \t\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    2023-07-14T05:34:41.696473242Z \t\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n    \t\tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154)","title":"HikariCP configuration not working in my app developed in Spring Boot","body":"<p>I have an application developed in Springboot and I am in need to use Connection Pool settings as connections are getting exhausted while running a load test. I am relying on SpringBoot auto configuration to set the &quot;datasource&quot;. Application is working fine when tested in my local workspace in IntelliJ but the same is not working when deployed in Kubernetes cluster. My spring boot version in 2.6.6 and using JDK11.</p>\n<p>I have read that based on &quot;spring.datasource.url&quot; springBoot identifies the driver class name, but in my case it is not happening</p>\n<p>Maven dependency</p>\n<pre><code>&lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;\n            &lt;version&gt;${spring.boot.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\n            &lt;version&gt;${spring.boot.version}&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n            &lt;version&gt;${spring.boot.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.oracle.database.jdbc&lt;/groupId&gt;\n            &lt;artifactId&gt;ojdbc8&lt;/artifactId&gt;\n            &lt;version&gt;21.9.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>My application.properties looks like below</p>\n<pre><code>spring.datasource.url=jdbc:oracle:thin:@......\nspring.datasource.username=test\nspring.datasource.password=test\nspring.datasource.driver-class-name=oracle.jdbc.OracleDriver\nspring.main.allow-bean-definition-overriding=true\n\n#connection pool configuration\nspring.datasource.hikari.pool-name=SVMConnectionPool\nspring.datasource.hikari.maximum-pool-size=60\n</code></pre>\n<p>Error that I see in the logs</p>\n<pre><code>Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method 'dataSource' threw exception; nested exception is org.springframework.boot.autoconfigure.jdbc.DataSourceProperties$DataSourceBeanCreationException: Failed to determine a suitable driver class\n2023-07-14T05:34:41.696439652Z      at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185)\n2023-07-14T05:34:41.696442966Z      at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653)\n2023-07-14T05:34:41.696445978Z      ... 121 more\n2023-07-14T05:34:41.696449043Z  Caused by: org.springframework.boot.autoconfigure.jdbc.DataSourceProperties$DataSourceBeanCreationException: Failed to determine a suitable driver class\n        at org.springframework.boot.autoconfigure.jdbc.DataSourceProperties.determineDriverClassName(DataSourceProperties.java:252)\n        at org.springframework.boot.autoconfigure.jdbc.DataSourceProperties.initializeDataSourceBuilder(DataSourceProperties.java:193)\n2023-07-14T05:34:41.696457775Z      at org.springframework.boot.autoconfigure.jdbc.DataSourceConfiguration.createDataSource(DataSourceConfiguration.java:48)\n2023-07-14T05:34:41.696460846Z      at org.springframework.boot.autoconfigure.jdbc.DataSourceConfiguration$Hikari.dataSource(DataSourceConfiguration.java:90)\n2023-07-14T05:34:41.696464391Z      at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n2023-07-14T05:34:41.696467454Z      at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n2023-07-14T05:34:41.696470269Z      at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n2023-07-14T05:34:41.696473242Z      at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n        at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154)\n</code></pre>\n"},{"tags":["java","spring","spring-mvc","tomcat","intellij-idea"],"comments":[{"owner":{"account_id":11024638,"reputation":126,"user_id":8097900,"display_name":"Leon Klute"},"score":0,"creation_date":1688718563,"post_id":76635175,"comment_id":135114256,"body_markdown":"What does the logging show? You could set the logging level for spring very low to see what is happening internally.","body":"What does the logging show? You could set the logging level for spring very low to see what is happening internally."},{"owner":{"account_id":23176387,"reputation":29,"user_id":17274825,"display_name":"vegaLDN"},"score":0,"creation_date":1688718952,"post_id":76635175,"comment_id":135114331,"body_markdown":"@LeonKlute i have edited question. What kind of log did u mean exactly?","body":"@LeonKlute i have edited question. What kind of log did u mean exactly?"},{"owner":{"account_id":1807376,"reputation":1019,"user_id":1644214,"accept_rate":100,"display_name":"alvonellos"},"score":0,"creation_date":1688719440,"post_id":76635175,"comment_id":135114412,"body_markdown":"Hey, quick question. Is there a particular reason you&#39;re not using Spring Boot?","body":"Hey, quick question. Is there a particular reason you&#39;re not using Spring Boot?"},{"owner":{"account_id":23176387,"reputation":29,"user_id":17274825,"display_name":"vegaLDN"},"score":0,"creation_date":1688719909,"post_id":76635175,"comment_id":135114487,"body_markdown":"@alvonellos sorry, but my spring knowledge is so little and all that i know, i training spring MVC for web apps and do this","body":"@alvonellos sorry, but my spring knowledge is so little and all that i know, i training spring MVC for web apps and do this"},{"owner":{"account_id":23176387,"reputation":29,"user_id":17274825,"display_name":"vegaLDN"},"score":0,"creation_date":1688720013,"post_id":76635175,"comment_id":135114510,"body_markdown":"@alvonellos or you told about dependencies?","body":"@alvonellos or you told about dependencies?"}],"answers":[{"comments":[{"owner":{"account_id":23176387,"reputation":29,"user_id":17274825,"display_name":"vegaLDN"},"score":0,"creation_date":1689157860,"post_id":76655511,"comment_id":135172696,"body_markdown":"Yes, but tomcat 10+ doesnt work (i started use tomcat since 10.1) and solution of that problem was change tomcat 10 to tomcat 9, but with tomcat 9 happens problem above. I added exception in my question (log with tomcat 10)","body":"Yes, but tomcat 10+ doesnt work (i started use tomcat since 10.1) and solution of that problem was change tomcat 10 to tomcat 9, but with tomcat 9 happens problem above. I added exception in my question (log with tomcat 10)"},{"owner":{"account_id":23176387,"reputation":29,"user_id":17274825,"display_name":"vegaLDN"},"score":0,"creation_date":1689173252,"post_id":76655511,"comment_id":135176515,"body_markdown":"i tryed use thymeleaf5 nad spring 5 but i got another exception, i added it also","body":"i tryed use thymeleaf5 nad spring 5 but i got another exception, i added it also"},{"owner":{"account_id":419537,"reputation":4992,"user_id":796761,"accept_rate":50,"display_name":"dbreaux"},"score":0,"creation_date":1689179390,"post_id":76655511,"comment_id":135177917,"body_markdown":"I guess that&#39;s two or three questions, then :-)","body":"I guess that&#39;s two or three questions, then :-)"},{"owner":{"account_id":419537,"reputation":4992,"user_id":796761,"accept_rate":50,"display_name":"dbreaux"},"score":0,"creation_date":1689179819,"post_id":76655511,"comment_id":135178001,"body_markdown":"Have you tried a completely consistent combination, though? (Can&#39;t tell from your pom.xml, which doesn&#39;t show spring.version, but original exception indicates you were trying Spring 6.) e.g. Tomcat 10 with Spring 6 and thymeleaf-spring*6*","body":"Have you tried a completely consistent combination, though? (Can&#39;t tell from your pom.xml, which doesn&#39;t show spring.version, but original exception indicates you were trying Spring 6.) e.g. Tomcat 10 with Spring 6 and thymeleaf-spring*6*"},{"owner":{"account_id":23176387,"reputation":29,"user_id":17274825,"display_name":"vegaLDN"},"score":0,"creation_date":1689257964,"post_id":76655511,"comment_id":135190513,"body_markdown":"Yes i did it, happens same problem, i found article on RedHat and root cause of my problem its &quot;A class mapped as a Servlet via annotations or in the application WEB-INF/web.xml does not extend Servlet.&quot; But this class extends this (i checked it in IDEA in my project)\n\nArticle: https://access.redhat.com/solutions/1616883","body":"Yes i did it, happens same problem, i found article on RedHat and root cause of my problem its &quot;A class mapped as a Servlet via annotations or in the application WEB-INF/web.xml does not extend Servlet.&quot; But this class extends this (i checked it in IDEA in my project)  Article: <a href=\"https://access.redhat.com/solutions/1616883\" rel=\"nofollow noreferrer\">access.redhat.com/solutions/1616883</a>"},{"owner":{"account_id":23176387,"reputation":29,"user_id":17274825,"display_name":"vegaLDN"},"score":0,"creation_date":1689258110,"post_id":76655511,"comment_id":135190552,"body_markdown":"Sure i know that Spring 6.0 require jakarta, i tried with jakarta, with javax, with jakarta and javax","body":"Sure i know that Spring 6.0 require jakarta, i tried with jakarta, with javax, with jakarta and javax"},{"owner":{"account_id":419537,"reputation":4992,"user_id":796761,"accept_rate":50,"display_name":"dbreaux"},"score":0,"creation_date":1689282583,"post_id":76655511,"comment_id":135195621,"body_markdown":"My best guess is still that you have mismatched versions. The various errors indicate missing methods or fields or classes. I suggest posting your full pom.xml and the specific error you get with it.","body":"My best guess is still that you have mismatched versions. The various errors indicate missing methods or fields or classes. I suggest posting your full pom.xml and the specific error you get with it."},{"owner":{"account_id":23176387,"reputation":29,"user_id":17274825,"display_name":"vegaLDN"},"score":0,"creation_date":1689336080,"post_id":76655511,"comment_id":135202521,"body_markdown":"i added pom.xml with spring6 (new spring 6.0.11) and jakarta-api 6.0.0","body":"i added pom.xml with spring6 (new spring 6.0.11) and jakarta-api 6.0.0"},{"owner":{"account_id":23176387,"reputation":29,"user_id":17274825,"display_name":"vegaLDN"},"score":0,"creation_date":1689358511,"post_id":76655511,"comment_id":135207516,"body_markdown":"Thanks for u tried to help me i add answer","body":"Thanks for u tried to help me i add answer"}],"tags":[],"owner":{"account_id":419537,"reputation":4992,"user_id":796761,"accept_rate":50,"display_name":"dbreaux"},"comment_count":9,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689005206,"creation_date":1689005206,"answer_id":76655511,"question_id":76635175,"body_markdown":"&gt; java.lang.ClassCastException: class org.springframework.web.servlet.DispatcherServlet cannot be cast to class javax.servlet.Servlet (org.springframework.web.servlet.DispatcherServlet\r\n\r\nSpring 6.0 requires the new `jakarta.servlet` namespace instead of `javax.servlet`. So you&#39;ll need Tomcat 10, it appears.\r\n\r\nhttps://spring.io/blog/2022/11/16/spring-framework-6-0-goes-ga\r\n\r\nhttps://tomcat.apache.org/migration-10.html\r\n","title":"Spring MVC application doesnt mapping. Apache TomCat 9. IntelliJ IDEA. Linux Mint","body":"<blockquote>\n<p>java.lang.ClassCastException: class org.springframework.web.servlet.DispatcherServlet cannot be cast to class javax.servlet.Servlet (org.springframework.web.servlet.DispatcherServlet</p>\n</blockquote>\n<p>Spring 6.0 requires the new <code>jakarta.servlet</code> namespace instead of <code>javax.servlet</code>. So you'll need Tomcat 10, it appears.</p>\n<p><a href=\"https://spring.io/blog/2022/11/16/spring-framework-6-0-goes-ga\" rel=\"nofollow noreferrer\">https://spring.io/blog/2022/11/16/spring-framework-6-0-goes-ga</a></p>\n<p><a href=\"https://tomcat.apache.org/migration-10.html\" rel=\"nofollow noreferrer\">https://tomcat.apache.org/migration-10.html</a></p>\n"},{"tags":[],"owner":{"account_id":23176387,"reputation":29,"user_id":17274825,"display_name":"vegaLDN"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689358271,"creation_date":1689358271,"answer_id":76690213,"question_id":76635175,"body_markdown":"So, in 1 week i solve my problem and i hope if someone take a same problem my answer help you.\r\n\r\nAll dependencies in pom.xml was right (jakarta-api 6 with spring6 and thymeleaf6) ofc i need use TomCat 10+ for Spring 6+ (10.1.11 - currently my version).\r\n\r\nI tried use `mvn clean install` command in the terminal and i see that problem: \r\n\r\n    Failed to execute goal org.apache.maven.plugins:maven-war-plugin:2.2:war \r\n    (default-war) on project spring_web_app1: Execution default-war of goal \r\n    org.apache.maven.plugins:maven-war-plugin:2.2:war failed: Unable to load \r\n    the mojo &#39;war&#39; in the plugin &#39;org.apache.maven.plugins:maven-war- \r\n    plugin:2.2&#39; due to an API incompatibility: \r\n org.codehaus.plexus.component.repository.exception.ComponentLookupException: Cannot access defaults field of Properties\r\n\r\nThe problem is related to version compatibility of the **Maven War Plugin**.\r\n\r\nAfter that i add plugin with new version:\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n          &lt;plugin&gt;\r\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n            &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;3.2.3&lt;/version&gt;\r\n          &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n      &lt;/build&gt;\r\n\r\n&gt; Maybe Perhaps the default version was 2.2\r\n\r\nAnd after that if u run use `mvn clean install` u will take an error with web.xml and u need add that file and use basic config (u can find it in google) after configurating web.xml u can use `mvn clean install`. \r\n\r\nMy full pom.xml:\r\n\r\n   \r\n\r\n     &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n      xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\r\n      &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n      &lt;groupId&gt;edu.vega.spring&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring_web_app1&lt;/artifactId&gt;\r\n      &lt;packaging&gt;war&lt;/packaging&gt;\r\n      &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n      &lt;name&gt;spring_web_app1 Maven Webapp&lt;/name&gt;\r\n      &lt;url&gt;https://maven.apache.org&lt;/url&gt;\r\n      &lt;properties&gt;\r\n        &lt;maven.compiler.source&gt;20&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;20&lt;/maven.compiler.target&gt;\r\n      &lt;/properties&gt;\r\n    \r\n      &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;junit&lt;/groupId&gt;\r\n          &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n          &lt;version&gt;4.13.1&lt;/version&gt;\r\n          &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\r\n          &lt;version&gt;6.0.11&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\r\n          &lt;version&gt;6.0.11&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-web&lt;/artifactId&gt;\r\n          &lt;version&gt;6.0.11&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\r\n          &lt;version&gt;6.0.11&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.thymeleaf&lt;/groupId&gt;\r\n          &lt;artifactId&gt;thymeleaf-spring6&lt;/artifactId&gt;\r\n          &lt;version&gt;3.1.1.RELEASE&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.thymeleaf&lt;/groupId&gt;\r\n          &lt;artifactId&gt;thymeleaf&lt;/artifactId&gt;\r\n          &lt;version&gt;3.1.1.RELEASE&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;jakarta.servlet&lt;/groupId&gt;\r\n          &lt;artifactId&gt;jakarta.servlet-api&lt;/artifactId&gt;\r\n          &lt;version&gt;6.0.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n      &lt;/dependencies&gt;\r\n      &lt;build&gt;\r\n        &lt;plugins&gt;\r\n          &lt;plugin&gt;\r\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n            &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;3.2.3&lt;/version&gt;\r\n          &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n      &lt;/build&gt;\r\n    &lt;/project&gt;\r\n\r\n&gt; Please correcting me if u will find some mistakes in my answer.","title":"Spring MVC application doesnt mapping. Apache TomCat 9. IntelliJ IDEA. Linux Mint","body":"<p>So, in 1 week i solve my problem and i hope if someone take a same problem my answer help you.</p>\n<p>All dependencies in pom.xml was right (jakarta-api 6 with spring6 and thymeleaf6) ofc i need use TomCat 10+ for Spring 6+ (10.1.11 - currently my version).</p>\n<p>I tried use <code>mvn clean install</code> command in the terminal and i see that problem:</p>\n<pre><code>Failed to execute goal org.apache.maven.plugins:maven-war-plugin:2.2:war \n(default-war) on project spring_web_app1: Execution default-war of goal \norg.apache.maven.plugins:maven-war-plugin:2.2:war failed: Unable to load \nthe mojo 'war' in the plugin 'org.apache.maven.plugins:maven-war- \nplugin:2.2' due to an API incompatibility: \n</code></pre>\n<p>org.codehaus.plexus.component.repository.exception.ComponentLookupException: Cannot access defaults field of Properties</p>\n<p>The problem is related to version compatibility of the <strong>Maven War Plugin</strong>.</p>\n<p>After that i add plugin with new version:</p>\n<pre><code>&lt;build&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\n        &lt;version&gt;3.2.3&lt;/version&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n</code></pre>\n<blockquote>\n<p>Maybe Perhaps the default version was 2.2</p>\n</blockquote>\n<p>And after that if u run use <code>mvn clean install</code> u will take an error with web.xml and u need add that file and use basic config (u can find it in google) after configurating web.xml u can use <code>mvn clean install</code>.</p>\n<p>My full pom.xml:</p>\n<pre><code> &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n  &lt;groupId&gt;edu.vega.spring&lt;/groupId&gt;\n  &lt;artifactId&gt;spring_web_app1&lt;/artifactId&gt;\n  &lt;packaging&gt;war&lt;/packaging&gt;\n  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n  &lt;name&gt;spring_web_app1 Maven Webapp&lt;/name&gt;\n  &lt;url&gt;https://maven.apache.org&lt;/url&gt;\n  &lt;properties&gt;\n    &lt;maven.compiler.source&gt;20&lt;/maven.compiler.source&gt;\n    &lt;maven.compiler.target&gt;20&lt;/maven.compiler.target&gt;\n  &lt;/properties&gt;\n\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;junit&lt;/groupId&gt;\n      &lt;artifactId&gt;junit&lt;/artifactId&gt;\n      &lt;version&gt;4.13.1&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\n      &lt;version&gt;6.0.11&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\n      &lt;version&gt;6.0.11&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-web&lt;/artifactId&gt;\n      &lt;version&gt;6.0.11&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\n      &lt;version&gt;6.0.11&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.thymeleaf&lt;/groupId&gt;\n      &lt;artifactId&gt;thymeleaf-spring6&lt;/artifactId&gt;\n      &lt;version&gt;3.1.1.RELEASE&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.thymeleaf&lt;/groupId&gt;\n      &lt;artifactId&gt;thymeleaf&lt;/artifactId&gt;\n      &lt;version&gt;3.1.1.RELEASE&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;jakarta.servlet&lt;/groupId&gt;\n      &lt;artifactId&gt;jakarta.servlet-api&lt;/artifactId&gt;\n      &lt;version&gt;6.0.0&lt;/version&gt;\n    &lt;/dependency&gt;\n\n  &lt;/dependencies&gt;\n  &lt;build&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\n        &lt;version&gt;3.2.3&lt;/version&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<blockquote>\n<p>Please correcting me if u will find some mistakes in my answer.</p>\n</blockquote>\n"}],"owner":{"account_id":23176387,"reputation":29,"user_id":17274825,"display_name":"vegaLDN"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":124,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76690213,"answer_count":2,"score":0,"last_activity_date":1689358271,"creation_date":1688718169,"question_id":76635175,"body_markdown":"****I just started learning how to make Spring MVC applications. Installed Tomcat 9. The error is most likely that the mapping does not work. Also i use thymeleaf. The execution of the program basically does not reach my Java code (I set breakpoints and the application did not stop).****\r\n\r\n&gt; I have tried installing different versions of Tomcat\r\n\r\nI also checked the port and entered the correct URL. I would also like to note that when entering the full path to the hello.html file (relative to the webapp), in my case *http://localhost:8080/views/hello.html*, it also gives a 404 error, but everything will work with the jsp file *http://localhost:8080/views/hello.jsp* (but it&#39;s still not the right thing, because the mapping doesn&#39;t work).\r\n\r\n&gt; As planned, hello.html should be displayed in the browser when you\r\n&gt; enter the string *http://localhost:8080/helloW* in the url.\r\n\r\nThe problem is that when I type in the URL ***http://localhost:8080/helloW*** and see:\r\n[![enter image description here][1]][1]\r\n\r\n\r\nI also tried to put different Application Context in the configuration:\r\n[![enter image description here][2]][2]\r\n\r\n\r\nMy project structure:\r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\nBelow i going to show code of my classes:\r\n\r\nHelloController:\r\n```java\r\n    package edu.vega.spring;\r\n    \r\n    import org.springframework.stereotype.Controller;\r\n    import org.springframework.web.bind.annotation.GetMapping;\r\n    \r\n    @Controller\r\n    public class HelloController {\r\n        @GetMapping(value = {&quot;/helloW&quot;, &quot;/&quot;})\r\n        public String sayHello(){\r\n            return &quot;hello&quot;;\r\n        }\r\n    }\r\n```\r\n\r\nMySpringMVCDispatcherServletInitializer:\r\n```java\r\n    package edu.vega.spring.config;\r\n    \r\n    import org.springframework.web.servlet.support.AbstractAnnotationConfigDispatcherServletInitializer;\r\n    \r\n    public class MySpringMVCDispatcherServletInitializer extends AbstractAnnotationConfigDispatcherServletInitializer {\r\n    \r\n        @Override\r\n        protected Class&lt;?&gt;[] getRootConfigClasses() {\r\n            return null;\r\n        }\r\n    \r\n        @Override\r\n        protected Class&lt;?&gt;[] getServletConfigClasses() {\r\n            return new Class[] {SpringConfig.class};\r\n        }\r\n    \r\n        @Override\r\n        protected String[] getServletMappings() {\r\n            return new String[]{&quot;/&quot;};\r\n        }\r\n    }\r\n```\r\n\r\nSpringConfig:\r\n```java\r\n    package edu.vega.spring.config;\r\n    \r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.context.ApplicationContext;\r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.context.annotation.ComponentScan;\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.web.servlet.config.annotation.EnableWebMvc;\r\n    import org.springframework.web.servlet.config.annotation.ViewResolverRegistry;\r\n    import org.springframework.web.servlet.config.annotation.WebMvcConfigurer;\r\n    import org.thymeleaf.spring5.SpringTemplateEngine;\r\n    import org.thymeleaf.spring5.templateresolver.SpringResourceTemplateResolver;\r\n    import org.thymeleaf.spring5.view.ThymeleafViewResolver;\r\n    \r\n    @Configuration\r\n    @ComponentScan(&quot;edu.vega.spring&quot;)\r\n    @EnableWebMvc\r\n    public class SpringConfig implements WebMvcConfigurer {\r\n        private final ApplicationContext applicationContext;\r\n    \r\n        @Autowired\r\n        public SpringConfig(ApplicationContext applicationContext) {\r\n            this.applicationContext = applicationContext;\r\n        }\r\n    \r\n        @Bean\r\n        public SpringResourceTemplateResolver templateResolver() {\r\n            SpringResourceTemplateResolver templateResolver = new SpringResourceTemplateResolver();\r\n            templateResolver.setApplicationContext(applicationContext);\r\n            templateResolver.setPrefix(&quot;views/&quot;);\r\n            templateResolver.setSuffix(&quot;.html&quot;);\r\n            return templateResolver;\r\n        }\r\n    \r\n        @Bean\r\n        public SpringTemplateEngine templateEngine() {\r\n            SpringTemplateEngine templateEngine = new SpringTemplateEngine();\r\n            templateEngine.setTemplateResolver(templateResolver());\r\n            templateEngine.setEnableSpringELCompiler(true);\r\n            return templateEngine;\r\n        }\r\n    \r\n        @Override\r\n        public void configureViewResolvers(ViewResolverRegistry registry) {\r\n            ThymeleafViewResolver resolver = new ThymeleafViewResolver();\r\n            resolver.setTemplateEngine(templateEngine());\r\n            registry.viewResolver(resolver);\r\n        }\r\n    }\r\n```\r\npom.xml (dependencies):\r\n  \r\n```xml\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;junit&lt;/groupId&gt;\r\n          &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n          &lt;version&gt;3.8.1&lt;/version&gt;\r\n          &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\r\n          &lt;version&gt;${spring.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\r\n          &lt;version&gt;${spring.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-web&lt;/artifactId&gt;\r\n          &lt;version&gt;${spring.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\r\n          &lt;version&gt;${spring.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.thymeleaf&lt;/groupId&gt;\r\n          &lt;artifactId&gt;thymeleaf-spring5&lt;/artifactId&gt;\r\n          &lt;version&gt;3.1.1.RELEASE&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;jakarta.servlet&lt;/groupId&gt;\r\n          &lt;artifactId&gt;jakarta.servlet-api&lt;/artifactId&gt;\r\n          &lt;version&gt;6.0.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n      &lt;/dependencies&gt;\r\n      &lt;build&gt;\r\n        &lt;finalName&gt;spring_web_app1&lt;/finalName&gt;\r\n      &lt;/build&gt;\r\n    &lt;/project&gt;\r\n```\r\n\r\nI tried a lot of things, but it doesn’t work, I’m already thinking about completely changing the OS to Ubuntu and maybe then it will help.\r\n\r\nAll logs that i have (now i in Access Log):\r\n\r\n[![enter image description here][4]][4]\r\n\r\n\r\nOutput:\r\n\r\n        127.0.0.1 - - [07/Jul/2023:11:30:41 +0300] &quot;GET / HTTP/1.1&quot; 200 48\r\n    127.0.0.1 - - [07/Jul/2023:11:30:41 +0300] &quot;GET / HTTP/1.1&quot; 200 48\r\n    0:0:0:0:0:0:0:1 - - [07/Jul/2023:11:30:41 +0300] &quot;GET / HTTP/1.1&quot; 200 48\r\n    0:0:0:0:0:0:0:1 - - [07/Jul/2023:11:30:47 +0300] &quot;GET /helloW HTTP/1.1&quot; 404 682\r\n\r\n\r\nLocalHost log output:\r\n\r\n    07-Jul-2023 11:30:40.491 INFO [RMI TCP Connection(2)-127.0.0.1] org.apache.catalina.core.ApplicationContext.log Marking servlet [dispatcher] as unavailable\r\n    07-Jul-2023 11:30:40.492 SEVERE [RMI TCP Connection(2)-127.0.0.1] org.apache.catalina.core.StandardContext.loadOnStartup Servlet [dispatcher] in web application [] threw load() exception\r\n    \tjava.lang.ClassCastException: class org.springframework.web.servlet.DispatcherServlet cannot be cast to class javax.servlet.Servlet (org.springframework.web.servlet.DispatcherServlet is in unnamed module of loader org.apache.catalina.loader.ParallelWebappClassLoader @168986bb; javax.servlet.Servlet is in unnamed module of loader java.net.URLClassLoader @3aeaafa6)\r\n    \t\tat org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1020)\r\n    \t\tat org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:960)\r\n    \t\tat org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4673)\r\n    \t\tat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4980)\r\n    \t\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n    \t\tat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:683)\r\n    \t\tat org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:658)\r\n    \t\tat org.apache.catalina.core.StandardHost.addChild(StandardHost.java:662)\r\n    \t\tat org.apache.catalina.startup.HostConfig.manageApp(HostConfig.java:1782)\r\n    \t\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\r\n    \t\tat java.base/java.lang.reflect.Method.invoke(Method.java:578)\r\n    \t\tat org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:294)\r\n    \t\tat java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:803)\r\n    \t\tat java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)\r\n    \t\tat org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:460)\r\n    \t\tat org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:408)\r\n    \t\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\r\n    \t\tat java.base/java.lang.reflect.Method.invoke(Method.java:578)\r\n    \t\tat org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:294)\r\n    \t\tat java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:803)\r\n    \t\tat java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)\r\n    \t\tat java.management/com.sun.jmx.remote.security.MBeanServerAccessController.invoke(MBeanServerAccessController.java:472)\r\n    \t\tat java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)\r\n    \t\tat java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)\r\n    \t\tat java.base/java.security.AccessController.doPrivileged(AccessController.java:714)\r\n    \t\tat java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1412)\r\n    \t\tat java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)\r\n    \t\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\r\n    \t\tat java.base/java.lang.reflect.Method.invoke(Method.java:578)\r\n    \t\tat java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)\r\n    \t\tat java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)\r\n    \t\tat java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)\r\n    \t\tat java.base/java.security.AccessController.doPrivileged(AccessController.java:714)\r\n    \t\tat java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)\r\n    \t\tat java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:598)\r\n    \t\tat java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:844)\r\n    \t\tat java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:721)\r\n    \t\tat java.base/java.security.AccessController.doPrivileged(AccessController.java:400)\r\n    \t\tat java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:720)\r\n    \t\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\r\n    \t\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\r\n    \t\tat java.base/java.lang.Thread.run(Thread.java:1623)\r\n\r\nException with Tomcat 10+\r\n\r\n    12-Jul-2023 13:32:02.151 SEVERE [RMI TCP Connection(2)-127.0.0.1] org.apache.catalina.core.ApplicationContext.log Servlet.init() for servlet [dispatcher] threw exception\r\n    \tjava.lang.NoSuchMethodError: &#39;void org.springframework.web.context.support.ServletContextResourceLoader.&lt;init&gt;(jakarta.servlet.ServletContext)&#39;\r\n    \t\tat org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:155)\r\n    \t\tat jakarta.servlet.GenericServlet.init(GenericServlet.java:143)\r\n    \t\tat jakarta.servlet.http.HttpServlet.init(HttpServlet.java:121)\r\n    \t\tat org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:944)\r\n    \t\tat org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:901)\r\n    \t\tat org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:805)\r\n    \t\tat org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4633)\r\n    \t\tat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4926)\r\n    \t\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n    \t\tat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:683)\r\n    \t\tat org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:658)\r\n    \t\tat org.apache.catalina.core.StandardHost.addChild(StandardHost.java:713)\r\n    \t\tat org.apache.catalina.startup.HostConfig.manageApp(HostConfig.java:1821)\r\n    \t\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\r\n    \t\tat java.base/java.lang.reflect.Method.invoke(Method.java:578)\r\n    \t\tat org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:294)\r\n    \t\tat java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:803)\r\n    \t\tat java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)\r\n    \t\tat org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:428)\r\n    \t\tat org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:376)\r\n    \t\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\r\n    \t\tat java.base/java.lang.reflect.Method.invoke(Method.java:578)\r\n    \t\tat org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:294)\r\n    \t\tat java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:803)\r\n    \t\tat java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)\r\n    \t\tat java.management/com.sun.jmx.remote.security.MBeanServerAccessController.invoke(MBeanServerAccessController.java:472)\r\n    \t\tat java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)\r\n    \t\tat java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)\r\n    \t\tat java.base/java.security.AccessController.doPrivileged(AccessController.java:714)\r\n    \t\tat java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1412)\r\n    \t\tat java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)\r\n    \t\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\r\n    \t\tat java.base/java.lang.reflect.Method.invoke(Method.java:578)\r\n    \t\tat java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)\r\n    \t\tat java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)\r\n    \t\tat java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)\r\n    \t\tat java.base/java.security.AccessController.doPrivileged(AccessController.java:714)\r\n    \t\tat java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)\r\n    \t\tat java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:598)\r\n    \t\tat java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:844)\r\n    \t\tat java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:721)\r\n    \t\tat java.base/java.security.AccessController.doPrivileged(AccessController.java:400)\r\n    \t\tat java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:720)\r\n    \t\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\r\n    \t\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\r\n    \t\tat java.base/java.lang.Thread.run(Thread.java:1623)\r\n    12-Jul-2023 13:32:02.151 SEVERE [RMI TCP Connection(2)-127.0.0.1] org.apache.catalina.core.StandardContext.loadOnStartup Servlet [dispatcher] in web application [] threw load() exception\r\n    \tjava.lang.NoSuchMethodError: &#39;void org.springframework.web.context.support.ServletContextResourceLoader.&lt;init&gt;(jakarta.servlet.ServletContext)&#39;\r\n    \t\tat org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:155)\r\n    \t\tat jakarta.servlet.GenericServlet.init(GenericServlet.java:143)\r\n    \t\tat jakarta.servlet.http.HttpServlet.init(HttpServlet.java:121)\r\n    \t\tat org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:944)\r\n    \t\tat org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:901)\r\n    \t\tat org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:805)\r\n    \t\tat org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4633)\r\n    \t\tat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4926)\r\n    \t\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n    \t\tat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:683)\r\n    \t\tat org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:658)\r\n    \t\tat org.apache.catalina.core.StandardHost.addChild(StandardHost.java:713)\r\n    \t\tat org.apache.catalina.startup.HostConfig.manageApp(HostConfig.java:1821)\r\n    \t\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\r\n    \t\tat java.base/java.lang.reflect.Method.invoke(Method.java:578)\r\n    \t\tat org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:294)\r\n    \t\tat java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:803)\r\n    \t\tat java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)\r\n    \t\tat org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:428)\r\n    \t\tat org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:376)\r\n    \t\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\r\n    \t\tat java.base/java.lang.reflect.Method.invoke(Method.java:578)\r\n    \t\tat org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:294)\r\n    \t\tat java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:803)\r\n    \t\tat java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)\r\n    \t\tat java.management/com.sun.jmx.remote.security.MBeanServerAccessController.invoke(MBeanServerAccessController.java:472)\r\n    \t\tat java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)\r\n    \t\tat java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)\r\n    \t\tat java.base/java.security.AccessController.doPrivileged(AccessController.java:714)\r\n    \t\tat java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1412)\r\n    \t\tat java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)\r\n    \t\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\r\n    \t\tat java.base/java.lang.reflect.Method.invoke(Method.java:578)\r\n    \t\tat java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)\r\n    \t\tat java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)\r\n    \t\tat java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)\r\n    \t\tat java.base/java.security.AccessController.doPrivileged(AccessController.java:714)\r\n    \t\tat java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)\r\n    \t\tat java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:598)\r\n    \t\tat java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:844)\r\n    \t\tat java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:721)\r\n    \t\tat java.base/java.security.AccessController.doPrivileged(AccessController.java:400)\r\n    \t\tat java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:720)\r\n    \t\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\r\n    \t\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\r\n    \t\tat java.base/java.lang.Thread.run(Thread.java:1623)\r\n\r\n\r\nException with spring5 and thymeleaf5\r\n\r\n    org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;org.thymeleaf.spring5.view.ThymeleafViewResolver#0&#39; defined in ServletContext resource [/WEB-INF/applicationContextMVC.xml]: Error setting property values; nested exception is org.springframework.beans.NotWritablePropertyException: Invalid property &#39;debug&#39; of bean class [org.thymeleaf.spring5.view.ThymeleafViewResolver]: Bean property &#39;debug&#39; is not writable or has an invalid setter method. Does the parameter type of the setter match the return type of the getter?\r\n\r\nMy pom.xml with openJDK 20:\r\n\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n      xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\r\n      &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n      &lt;groupId&gt;edu.vega.spring&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring_web_app1&lt;/artifactId&gt;\r\n      &lt;packaging&gt;war&lt;/packaging&gt;\r\n      &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n      &lt;name&gt;spring_web_app1 Maven Webapp&lt;/name&gt;\r\n      &lt;url&gt;https://maven.apache.org&lt;/url&gt;\r\n      &lt;properties&gt;\r\n        &lt;maven.compiler.source&gt;20&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;20&lt;/maven.compiler.target&gt;\r\n      &lt;/properties&gt;\r\n    \r\n      &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;junit&lt;/groupId&gt;\r\n          &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n          &lt;version&gt;4.13.1&lt;/version&gt;\r\n          &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\r\n          &lt;version&gt;6.0.11&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\r\n          &lt;version&gt;6.0.11&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-web&lt;/artifactId&gt;\r\n          &lt;version&gt;6.0.11&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\r\n          &lt;version&gt;6.0.11&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.thymeleaf&lt;/groupId&gt;\r\n          &lt;artifactId&gt;thymeleaf-spring6&lt;/artifactId&gt;\r\n          &lt;version&gt;3.1.1.RELEASE&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.thymeleaf&lt;/groupId&gt;\r\n          &lt;artifactId&gt;thymeleaf&lt;/artifactId&gt;\r\n          &lt;version&gt;3.1.1.RELEASE&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;jakarta.servlet&lt;/groupId&gt;\r\n          &lt;artifactId&gt;jakarta.servlet-api&lt;/artifactId&gt;\r\n          &lt;version&gt;6.0.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n      &lt;/dependencies&gt;\r\n      &lt;build&gt;\r\n        &lt;finalName&gt;spring_web_app1&lt;/finalName&gt;\r\n      &lt;/build&gt;\r\n    &lt;/project&gt;\r\n\r\nError log with pom.xml above (sorry for screenshot but 30k symbols limit in body):\r\n[![enter image description here][5]][5]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/oPh0Z.png\r\n  [2]: https://i.stack.imgur.com/Vhzem.png\r\n  [3]: https://i.stack.imgur.com/Vu7qE.png\r\n  [4]: https://i.stack.imgur.com/WehUB.png\r\n  [5]: https://i.stack.imgur.com/nHP68.png","title":"Spring MVC application doesnt mapping. Apache TomCat 9. IntelliJ IDEA. Linux Mint","body":"<p><strong><strong>I just started learning how to make Spring MVC applications. Installed Tomcat 9. The error is most likely that the mapping does not work. Also i use thymeleaf. The execution of the program basically does not reach my Java code (I set breakpoints and the application did not stop).</strong></strong></p>\n<blockquote>\n<p>I have tried installing different versions of Tomcat</p>\n</blockquote>\n<p>I also checked the port and entered the correct URL. I would also like to note that when entering the full path to the hello.html file (relative to the webapp), in my case <em>http://localhost:8080/views/hello.html</em>, it also gives a 404 error, but everything will work with the jsp file <em>http://localhost:8080/views/hello.jsp</em> (but it's still not the right thing, because the mapping doesn't work).</p>\n<blockquote>\n<p>As planned, hello.html should be displayed in the browser when you\nenter the string <em>http://localhost:8080/helloW</em> in the url.</p>\n</blockquote>\n<p>The problem is that when I type in the URL <em><strong>http://localhost:8080/helloW</strong></em> and see:\n<a href=\"https://i.stack.imgur.com/oPh0Z.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/oPh0Z.png\" alt=\"enter image description here\" /></a></p>\n<p>I also tried to put different Application Context in the configuration:\n<a href=\"https://i.stack.imgur.com/Vhzem.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Vhzem.png\" alt=\"enter image description here\" /></a></p>\n<p>My project structure:</p>\n<p><a href=\"https://i.stack.imgur.com/Vu7qE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Vu7qE.png\" alt=\"enter image description here\" /></a></p>\n<p>Below i going to show code of my classes:</p>\n<p>HelloController:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    package edu.vega.spring;\n    \n    import org.springframework.stereotype.Controller;\n    import org.springframework.web.bind.annotation.GetMapping;\n    \n    @Controller\n    public class HelloController {\n        @GetMapping(value = {&quot;/helloW&quot;, &quot;/&quot;})\n        public String sayHello(){\n            return &quot;hello&quot;;\n        }\n    }\n</code></pre>\n<p>MySpringMVCDispatcherServletInitializer:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    package edu.vega.spring.config;\n    \n    import org.springframework.web.servlet.support.AbstractAnnotationConfigDispatcherServletInitializer;\n    \n    public class MySpringMVCDispatcherServletInitializer extends AbstractAnnotationConfigDispatcherServletInitializer {\n    \n        @Override\n        protected Class&lt;?&gt;[] getRootConfigClasses() {\n            return null;\n        }\n    \n        @Override\n        protected Class&lt;?&gt;[] getServletConfigClasses() {\n            return new Class[] {SpringConfig.class};\n        }\n    \n        @Override\n        protected String[] getServletMappings() {\n            return new String[]{&quot;/&quot;};\n        }\n    }\n</code></pre>\n<p>SpringConfig:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    package edu.vega.spring.config;\n    \n    import org.springframework.beans.factory.annotation.Autowired;\n    import org.springframework.context.ApplicationContext;\n    import org.springframework.context.annotation.Bean;\n    import org.springframework.context.annotation.ComponentScan;\n    import org.springframework.context.annotation.Configuration;\n    import org.springframework.web.servlet.config.annotation.EnableWebMvc;\n    import org.springframework.web.servlet.config.annotation.ViewResolverRegistry;\n    import org.springframework.web.servlet.config.annotation.WebMvcConfigurer;\n    import org.thymeleaf.spring5.SpringTemplateEngine;\n    import org.thymeleaf.spring5.templateresolver.SpringResourceTemplateResolver;\n    import org.thymeleaf.spring5.view.ThymeleafViewResolver;\n    \n    @Configuration\n    @ComponentScan(&quot;edu.vega.spring&quot;)\n    @EnableWebMvc\n    public class SpringConfig implements WebMvcConfigurer {\n        private final ApplicationContext applicationContext;\n    \n        @Autowired\n        public SpringConfig(ApplicationContext applicationContext) {\n            this.applicationContext = applicationContext;\n        }\n    \n        @Bean\n        public SpringResourceTemplateResolver templateResolver() {\n            SpringResourceTemplateResolver templateResolver = new SpringResourceTemplateResolver();\n            templateResolver.setApplicationContext(applicationContext);\n            templateResolver.setPrefix(&quot;views/&quot;);\n            templateResolver.setSuffix(&quot;.html&quot;);\n            return templateResolver;\n        }\n    \n        @Bean\n        public SpringTemplateEngine templateEngine() {\n            SpringTemplateEngine templateEngine = new SpringTemplateEngine();\n            templateEngine.setTemplateResolver(templateResolver());\n            templateEngine.setEnableSpringELCompiler(true);\n            return templateEngine;\n        }\n    \n        @Override\n        public void configureViewResolvers(ViewResolverRegistry registry) {\n            ThymeleafViewResolver resolver = new ThymeleafViewResolver();\n            resolver.setTemplateEngine(templateEngine());\n            registry.viewResolver(resolver);\n        }\n    }\n</code></pre>\n<p>pom.xml (dependencies):</p>\n<pre class=\"lang-xml prettyprint-override\"><code>    &lt;dependencies&gt;\n        &lt;dependency&gt;\n          &lt;groupId&gt;junit&lt;/groupId&gt;\n          &lt;artifactId&gt;junit&lt;/artifactId&gt;\n          &lt;version&gt;3.8.1&lt;/version&gt;\n          &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    \n        &lt;dependency&gt;\n          &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n          &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\n          &lt;version&gt;${spring.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n    \n        &lt;dependency&gt;\n          &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n          &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\n          &lt;version&gt;${spring.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n    \n        &lt;dependency&gt;\n          &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n          &lt;artifactId&gt;spring-web&lt;/artifactId&gt;\n          &lt;version&gt;${spring.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n    \n        &lt;dependency&gt;\n          &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n          &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\n          &lt;version&gt;${spring.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n    \n        &lt;dependency&gt;\n          &lt;groupId&gt;org.thymeleaf&lt;/groupId&gt;\n          &lt;artifactId&gt;thymeleaf-spring5&lt;/artifactId&gt;\n          &lt;version&gt;3.1.1.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n    \n        &lt;dependency&gt;\n          &lt;groupId&gt;jakarta.servlet&lt;/groupId&gt;\n          &lt;artifactId&gt;jakarta.servlet-api&lt;/artifactId&gt;\n          &lt;version&gt;6.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n    \n      &lt;/dependencies&gt;\n      &lt;build&gt;\n        &lt;finalName&gt;spring_web_app1&lt;/finalName&gt;\n      &lt;/build&gt;\n    &lt;/project&gt;\n</code></pre>\n<p>I tried a lot of things, but it doesn’t work, I’m already thinking about completely changing the OS to Ubuntu and maybe then it will help.</p>\n<p>All logs that i have (now i in Access Log):</p>\n<p><a href=\"https://i.stack.imgur.com/WehUB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WehUB.png\" alt=\"enter image description here\" /></a></p>\n<p>Output:</p>\n<pre><code>    127.0.0.1 - - [07/Jul/2023:11:30:41 +0300] &quot;GET / HTTP/1.1&quot; 200 48\n127.0.0.1 - - [07/Jul/2023:11:30:41 +0300] &quot;GET / HTTP/1.1&quot; 200 48\n0:0:0:0:0:0:0:1 - - [07/Jul/2023:11:30:41 +0300] &quot;GET / HTTP/1.1&quot; 200 48\n0:0:0:0:0:0:0:1 - - [07/Jul/2023:11:30:47 +0300] &quot;GET /helloW HTTP/1.1&quot; 404 682\n</code></pre>\n<p>LocalHost log output:</p>\n<pre><code>07-Jul-2023 11:30:40.491 INFO [RMI TCP Connection(2)-127.0.0.1] org.apache.catalina.core.ApplicationContext.log Marking servlet [dispatcher] as unavailable\n07-Jul-2023 11:30:40.492 SEVERE [RMI TCP Connection(2)-127.0.0.1] org.apache.catalina.core.StandardContext.loadOnStartup Servlet [dispatcher] in web application [] threw load() exception\n    java.lang.ClassCastException: class org.springframework.web.servlet.DispatcherServlet cannot be cast to class javax.servlet.Servlet (org.springframework.web.servlet.DispatcherServlet is in unnamed module of loader org.apache.catalina.loader.ParallelWebappClassLoader @168986bb; javax.servlet.Servlet is in unnamed module of loader java.net.URLClassLoader @3aeaafa6)\n        at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1020)\n        at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:960)\n        at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4673)\n        at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4980)\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:683)\n        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:658)\n        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:662)\n        at org.apache.catalina.startup.HostConfig.manageApp(HostConfig.java:1782)\n        at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:578)\n        at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:294)\n        at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:803)\n        at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)\n        at org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:460)\n        at org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:408)\n        at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:578)\n        at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:294)\n        at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:803)\n        at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)\n        at java.management/com.sun.jmx.remote.security.MBeanServerAccessController.invoke(MBeanServerAccessController.java:472)\n        at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)\n        at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)\n        at java.base/java.security.AccessController.doPrivileged(AccessController.java:714)\n        at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1412)\n        at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)\n        at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:578)\n        at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)\n        at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)\n        at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)\n        at java.base/java.security.AccessController.doPrivileged(AccessController.java:714)\n        at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)\n        at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:598)\n        at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:844)\n        at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:721)\n        at java.base/java.security.AccessController.doPrivileged(AccessController.java:400)\n        at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:720)\n        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\n        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\n        at java.base/java.lang.Thread.run(Thread.java:1623)\n</code></pre>\n<p>Exception with Tomcat 10+</p>\n<pre><code>12-Jul-2023 13:32:02.151 SEVERE [RMI TCP Connection(2)-127.0.0.1] org.apache.catalina.core.ApplicationContext.log Servlet.init() for servlet [dispatcher] threw exception\n    java.lang.NoSuchMethodError: 'void org.springframework.web.context.support.ServletContextResourceLoader.&lt;init&gt;(jakarta.servlet.ServletContext)'\n        at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:155)\n        at jakarta.servlet.GenericServlet.init(GenericServlet.java:143)\n        at jakarta.servlet.http.HttpServlet.init(HttpServlet.java:121)\n        at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:944)\n        at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:901)\n        at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:805)\n        at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4633)\n        at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4926)\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:683)\n        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:658)\n        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:713)\n        at org.apache.catalina.startup.HostConfig.manageApp(HostConfig.java:1821)\n        at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:578)\n        at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:294)\n        at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:803)\n        at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)\n        at org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:428)\n        at org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:376)\n        at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:578)\n        at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:294)\n        at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:803)\n        at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)\n        at java.management/com.sun.jmx.remote.security.MBeanServerAccessController.invoke(MBeanServerAccessController.java:472)\n        at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)\n        at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)\n        at java.base/java.security.AccessController.doPrivileged(AccessController.java:714)\n        at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1412)\n        at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)\n        at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:578)\n        at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)\n        at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)\n        at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)\n        at java.base/java.security.AccessController.doPrivileged(AccessController.java:714)\n        at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)\n        at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:598)\n        at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:844)\n        at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:721)\n        at java.base/java.security.AccessController.doPrivileged(AccessController.java:400)\n        at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:720)\n        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\n        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\n        at java.base/java.lang.Thread.run(Thread.java:1623)\n12-Jul-2023 13:32:02.151 SEVERE [RMI TCP Connection(2)-127.0.0.1] org.apache.catalina.core.StandardContext.loadOnStartup Servlet [dispatcher] in web application [] threw load() exception\n    java.lang.NoSuchMethodError: 'void org.springframework.web.context.support.ServletContextResourceLoader.&lt;init&gt;(jakarta.servlet.ServletContext)'\n        at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:155)\n        at jakarta.servlet.GenericServlet.init(GenericServlet.java:143)\n        at jakarta.servlet.http.HttpServlet.init(HttpServlet.java:121)\n        at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:944)\n        at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:901)\n        at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:805)\n        at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4633)\n        at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4926)\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:683)\n        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:658)\n        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:713)\n        at org.apache.catalina.startup.HostConfig.manageApp(HostConfig.java:1821)\n        at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:578)\n        at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:294)\n        at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:803)\n        at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)\n        at org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:428)\n        at org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:376)\n        at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:578)\n        at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:294)\n        at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:803)\n        at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)\n        at java.management/com.sun.jmx.remote.security.MBeanServerAccessController.invoke(MBeanServerAccessController.java:472)\n        at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)\n        at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)\n        at java.base/java.security.AccessController.doPrivileged(AccessController.java:714)\n        at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1412)\n        at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)\n        at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:578)\n        at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)\n        at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)\n        at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)\n        at java.base/java.security.AccessController.doPrivileged(AccessController.java:714)\n        at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)\n        at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:598)\n        at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:844)\n        at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:721)\n        at java.base/java.security.AccessController.doPrivileged(AccessController.java:400)\n        at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:720)\n        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\n        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\n        at java.base/java.lang.Thread.run(Thread.java:1623)\n</code></pre>\n<p>Exception with spring5 and thymeleaf5</p>\n<pre><code>org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.thymeleaf.spring5.view.ThymeleafViewResolver#0' defined in ServletContext resource [/WEB-INF/applicationContextMVC.xml]: Error setting property values; nested exception is org.springframework.beans.NotWritablePropertyException: Invalid property 'debug' of bean class [org.thymeleaf.spring5.view.ThymeleafViewResolver]: Bean property 'debug' is not writable or has an invalid setter method. Does the parameter type of the setter match the return type of the getter?\n</code></pre>\n<p>My pom.xml with openJDK 20:</p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n  &lt;groupId&gt;edu.vega.spring&lt;/groupId&gt;\n  &lt;artifactId&gt;spring_web_app1&lt;/artifactId&gt;\n  &lt;packaging&gt;war&lt;/packaging&gt;\n  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n  &lt;name&gt;spring_web_app1 Maven Webapp&lt;/name&gt;\n  &lt;url&gt;https://maven.apache.org&lt;/url&gt;\n  &lt;properties&gt;\n    &lt;maven.compiler.source&gt;20&lt;/maven.compiler.source&gt;\n    &lt;maven.compiler.target&gt;20&lt;/maven.compiler.target&gt;\n  &lt;/properties&gt;\n\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;junit&lt;/groupId&gt;\n      &lt;artifactId&gt;junit&lt;/artifactId&gt;\n      &lt;version&gt;4.13.1&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\n      &lt;version&gt;6.0.11&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\n      &lt;version&gt;6.0.11&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-web&lt;/artifactId&gt;\n      &lt;version&gt;6.0.11&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\n      &lt;version&gt;6.0.11&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.thymeleaf&lt;/groupId&gt;\n      &lt;artifactId&gt;thymeleaf-spring6&lt;/artifactId&gt;\n      &lt;version&gt;3.1.1.RELEASE&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.thymeleaf&lt;/groupId&gt;\n      &lt;artifactId&gt;thymeleaf&lt;/artifactId&gt;\n      &lt;version&gt;3.1.1.RELEASE&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;jakarta.servlet&lt;/groupId&gt;\n      &lt;artifactId&gt;jakarta.servlet-api&lt;/artifactId&gt;\n      &lt;version&gt;6.0.0&lt;/version&gt;\n    &lt;/dependency&gt;\n\n  &lt;/dependencies&gt;\n  &lt;build&gt;\n    &lt;finalName&gt;spring_web_app1&lt;/finalName&gt;\n  &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p>Error log with pom.xml above (sorry for screenshot but 30k symbols limit in body):\n<a href=\"https://i.stack.imgur.com/nHP68.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nHP68.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","pdfbox","digital-signature","trusted-timestamp"],"comments":[{"owner":{"account_id":28668458,"reputation":15,"user_id":21951977,"display_name":"Qazazazaz"},"score":0,"creation_date":1689587633,"post_id":76688070,"comment_id":135229457,"body_markdown":"@mkl any suggestions on this?","body":"@mkl any suggestions on this?"},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1689596702,"post_id":76688070,"comment_id":135231366,"body_markdown":"Strictly speaking, *&quot;DocMDP permission as 1&quot;* by itself is not a problem because even in that case an incremental update containing only DSS additions is allowed by the specs (both ETSI EN 319 142-1 and ISO 32000-2). Unfortunately, Adobe Acrobat has a bug in this regard and erroneously reports DSS updates as disallowed. Apparently you want to make Adobe Acrobat happy in spite of its bug. This means that you cannot have incremental updates after the revision with the signature. This in turn means that you need to have all validation related information (also for the time stamp!) before signing.","body":"Strictly speaking, <i>&quot;DocMDP permission as 1&quot;</i> by itself is not a problem because even in that case an incremental update containing only DSS additions is allowed by the specs (both ETSI EN 319 142-1 and ISO 32000-2). Unfortunately, Adobe Acrobat has a bug in this regard and erroneously reports DSS updates as disallowed. Apparently you want to make Adobe Acrobat happy in spite of its bug. This means that you cannot have incremental updates after the revision with the signature. This in turn means that you need to have all validation related information (also for the time stamp!) before signing."},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1689602384,"post_id":76688070,"comment_id":135232749,"body_markdown":"Essentially, therefore, you have to know the time stamp certificate in advance (or a small set of candidate certificates) and add its (their) validation related information together with the information for the signer certificate. If that&#39;s no option, you&#39;ll have to use incremental updates, probably with a higher MDP level value.","body":"Essentially, therefore, you have to know the time stamp certificate in advance (or a small set of candidate certificates) and add its (their) validation related information together with the information for the signer certificate. If that&#39;s no option, you&#39;ll have to use incremental updates, probably with a higher MDP level value."},{"owner":{"account_id":28668458,"reputation":15,"user_id":21951977,"display_name":"Qazazazaz"},"score":0,"creation_date":1689624323,"post_id":76688070,"comment_id":135237324,"body_markdown":"Thanks @mkl for the suggestions in this matter. I was not aware that it&#39;s Acrobat&#39;s bug. I decided to not to add timestamp validation information in case of DocMDP permission as 1, since it is not mandatory as per PDF Specs. Also, for getting timestamp certs and validation information before the getting the actual timestamp, I will need an additional call to generate dummy timestamp token, which will give me the required validation info. This extra call seems like a hack and not the actual solution. I will add the timestamp validation information for DocMDP permission 2 and 3.","body":"Thanks @mkl for the suggestions in this matter. I was not aware that it&#39;s Acrobat&#39;s bug. I decided to not to add timestamp validation information in case of DocMDP permission as 1, since it is not mandatory as per PDF Specs. Also, for getting timestamp certs and validation information before the getting the actual timestamp, I will need an additional call to generate dummy timestamp token, which will give me the required validation info. This extra call seems like a hack and not the actual solution. I will add the timestamp validation information for DocMDP permission 2 and 3."},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1689689425,"post_id":76688070,"comment_id":135247266,"body_markdown":"*&quot;I was not aware that it&#39;s Acrobat&#39;s bug.&quot;* - The PAdES basics are introduced in ETSI EN 319 142-1 and ISO 32000-2, and both indicate that even with MDP level 1 adding incremental updates updating DSS are allowed. Thus, a software that understands and supports the PAdES basics consequentially must allow such updates. - *&quot; I will add the timestamp validation information for DocMDP permission 2 and 3.&quot;* - that&#39;s the safest way","body":"<i>&quot;I was not aware that it&#39;s Acrobat&#39;s bug.&quot;</i> - The PAdES basics are introduced in ETSI EN 319 142-1 and ISO 32000-2, and both indicate that even with MDP level 1 adding incremental updates updating DSS are allowed. Thus, a software that understands and supports the PAdES basics consequentially must allow such updates. - <i>&quot; I will add the timestamp validation information for DocMDP permission 2 and 3.&quot;</i> - that&#39;s the safest way"},{"owner":{"account_id":28668458,"reputation":15,"user_id":21951977,"display_name":"Qazazazaz"},"score":0,"creation_date":1689749218,"post_id":76688070,"comment_id":135255436,"body_markdown":"Just to add, even PDFBox sample for Document Timestamp is generating error : &quot;No changes to the document are permitted due to DocMDP transform parameters dictionary&quot; when I try to use input PDF with DocMDP Permission as 1.","body":"Just to add, even PDFBox sample for Document Timestamp is generating error : &quot;No changes to the document are permitted due to DocMDP transform parameters dictionary&quot; when I try to use input PDF with DocMDP Permission as 1."},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1689750789,"post_id":76688070,"comment_id":135255705,"body_markdown":"Well, pdfbox tries to behave very much like Acrobat, both in good and in bad ways...","body":"Well, pdfbox tries to behave very much like Acrobat, both in good and in bad ways..."}],"owner":{"account_id":28668458,"reputation":15,"user_id":21951977,"display_name":"Qazazazaz"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":93,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1689358086,"creation_date":1689340703,"question_id":76688070,"body_markdown":"I am using [this](https://github.com/mkl-public/testarea-pdfbox2/blob/ff28bf955f2d7d371bec176989f7c491485a3790/src/test/java/mkl/testarea/pdfbox2/sign/RemoteSigning.java#L218) flow for performing digital signatures using external trust service provider.\r\n\r\nI have integrated [this](https://stackoverflow.com/questions/27441042/pdfbox-1-8-signing-pdf-document-using-tsa-time-stamp-autority) approach to add timestamp to my current certifying signature.\r\n\r\nUsing these, I am able to perform signature timestamp with embedded trusted timestamp.\r\n\r\nIn my DSS dictionary of PDF, I have added revocation information before calling `saveIncrementalForExternalSigning`. But I am unable to add revocation information and certificates for timestamp since timestamp token is not available before `saveIncrementalForExternalSigning`. Later on, when I get the timestamp token, I am making changes to DSS dictionary but they are not being reflected in output PDF. Below is my source code flow:\r\n\r\n    public ByteArrayOutputStream getSignedStream(PDDocument document, SignRequest request, Certificate[] certificateChain) throws Exception {\r\n\r\n    // adding revocation info for signature\r\n    validationService.addValidationInformation(document, certificateChain);\r\n\r\n    ByteArrayOutputStream outputStream = new ByteArrayOutputStream();\r\n    ExternalSigningSupport externalSigningSupport = document.saveIncrementalForExternalSigning(outputStream);\r\n\r\n    InputStream inputStream = request.getDocument();\r\n    CMSSignedData signedData = generateCMSSignedData(certificateChain, externalSigningSupport, inputStream, signParams...);\r\n\r\n    MessageDigest digest = MessageDigest.getInstance(&quot;SHA-256&quot;);\r\n    //Initialized TSAClient\r\n    tsaClient = new TimestampClient(new URL(options.getUrl()),\r\n        options.getUsername(), options.getPassword(), digest);\r\n\r\n    //Here, timestampToken is generated using the signedData Inputstream\r\n    signedData = TimestampUtil.addSignedTimeStamp(signedData, tsaClient, document);\r\n\r\n    //Using above timestamp token, certificates and revocation information is available now.\r\n    CMSSignedData data = new CMSSignedData(TSAUtil.token);\r\n    TimeStampToken timeStampToken = new TimeStampToken(data);\r\n    Store certificatesStore = timeStampToken.getCertificates();\r\n    TSAUtil.certificates = TSARevocationInfoUtil.convertCertificates(certificatesStore);\r\n\r\n    /*trying to add revocation info for timestamp to DSS dictionary, which is not being reflected in output document */\r\n    validationService.addValidationInformation(document, certificateChain);\r\n\r\n    byte[] cmsSignature = signedData.getEncoded();\r\n    externalSigningSupport.setSignature(cmsSignature);\r\n\r\n    return outputStream; }\r\n\r\nAlso, with certifying signatures, I want to use DocMDP permission as 1 (No changes allowed). So, I cannot save the document multiple times.\r\n\r\n\r\n\r\nPlease suggest, how can I update DSS dictionary for certificates of embedded signature timestamp without corrupting the document and in compliance with docMDP permission as 1.","title":"How to update DSS dictionary for revocation information and certificates of embedded signature timestamp?","body":"<p>I am using <a href=\"https://github.com/mkl-public/testarea-pdfbox2/blob/ff28bf955f2d7d371bec176989f7c491485a3790/src/test/java/mkl/testarea/pdfbox2/sign/RemoteSigning.java#L218\" rel=\"nofollow noreferrer\">this</a> flow for performing digital signatures using external trust service provider.</p>\n<p>I have integrated <a href=\"https://stackoverflow.com/questions/27441042/pdfbox-1-8-signing-pdf-document-using-tsa-time-stamp-autority\">this</a> approach to add timestamp to my current certifying signature.</p>\n<p>Using these, I am able to perform signature timestamp with embedded trusted timestamp.</p>\n<p>In my DSS dictionary of PDF, I have added revocation information before calling <code>saveIncrementalForExternalSigning</code>. But I am unable to add revocation information and certificates for timestamp since timestamp token is not available before <code>saveIncrementalForExternalSigning</code>. Later on, when I get the timestamp token, I am making changes to DSS dictionary but they are not being reflected in output PDF. Below is my source code flow:</p>\n<pre><code>public ByteArrayOutputStream getSignedStream(PDDocument document, SignRequest request, Certificate[] certificateChain) throws Exception {\n\n// adding revocation info for signature\nvalidationService.addValidationInformation(document, certificateChain);\n\nByteArrayOutputStream outputStream = new ByteArrayOutputStream();\nExternalSigningSupport externalSigningSupport = document.saveIncrementalForExternalSigning(outputStream);\n\nInputStream inputStream = request.getDocument();\nCMSSignedData signedData = generateCMSSignedData(certificateChain, externalSigningSupport, inputStream, signParams...);\n\nMessageDigest digest = MessageDigest.getInstance(&quot;SHA-256&quot;);\n//Initialized TSAClient\ntsaClient = new TimestampClient(new URL(options.getUrl()),\n    options.getUsername(), options.getPassword(), digest);\n\n//Here, timestampToken is generated using the signedData Inputstream\nsignedData = TimestampUtil.addSignedTimeStamp(signedData, tsaClient, document);\n\n//Using above timestamp token, certificates and revocation information is available now.\nCMSSignedData data = new CMSSignedData(TSAUtil.token);\nTimeStampToken timeStampToken = new TimeStampToken(data);\nStore certificatesStore = timeStampToken.getCertificates();\nTSAUtil.certificates = TSARevocationInfoUtil.convertCertificates(certificatesStore);\n\n/*trying to add revocation info for timestamp to DSS dictionary, which is not being reflected in output document */\nvalidationService.addValidationInformation(document, certificateChain);\n\nbyte[] cmsSignature = signedData.getEncoded();\nexternalSigningSupport.setSignature(cmsSignature);\n\nreturn outputStream; }\n</code></pre>\n<p>Also, with certifying signatures, I want to use DocMDP permission as 1 (No changes allowed). So, I cannot save the document multiple times.</p>\n<p>Please suggest, how can I update DSS dictionary for certificates of embedded signature timestamp without corrupting the document and in compliance with docMDP permission as 1.</p>\n"},{"tags":["java","android","animation","textview","marquee"],"comments":[{"owner":{"account_id":8373673,"reputation":61868,"user_id":6287910,"display_name":"Cheticamp"},"score":0,"creation_date":1689365516,"post_id":76690182,"comment_id":135208703,"body_markdown":"Take a look at a custom view [here](https://stackoverflow.com/a/8971920/6287910).","body":"Take a look at a custom view <a href=\"https://stackoverflow.com/a/8971920/6287910\">here</a>."}],"owner":{"account_id":16990065,"reputation":31,"user_id":12289859,"display_name":"bilykralik16"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689357962,"creation_date":1689357962,"question_id":76690182,"body_markdown":"I would like to ask how to make a marquee text without stopping when reaching the beginning programmaticaly. Currently I have the plain TextView made programmatically as marquee:\r\n\r\n    textview47.setEllipsize(TextUtils.TruncateAt.MARQUEE);\r\n    textview47.setMarqueeRepeatLimit(-1);\r\n    textview47.setSelected(true);\r\n\r\nHowever when the text reaches its beginning, it stops moving for one or two seconds. How do I disable this &quot;stopping feature&quot; programmatically (not by XML)? Thank you.","title":"How to make marquee text without stopping programmatically- Android Java","body":"<p>I would like to ask how to make a marquee text without stopping when reaching the beginning programmaticaly. Currently I have the plain TextView made programmatically as marquee:</p>\n<pre><code>textview47.setEllipsize(TextUtils.TruncateAt.MARQUEE);\ntextview47.setMarqueeRepeatLimit(-1);\ntextview47.setSelected(true);\n</code></pre>\n<p>However when the text reaches its beginning, it stops moving for one or two seconds. How do I disable this &quot;stopping feature&quot; programmatically (not by XML)? Thank you.</p>\n"},{"tags":["java","code-generation","json-deserialization","mixins","objectmapper"],"owner":{"account_id":10595855,"reputation":2708,"user_id":7804595,"display_name":"Valeriy K."},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":107,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689357314,"creation_date":1689355757,"question_id":76689999,"body_markdown":"I have some json and need to map it to other third party objects. JSON: \r\n\r\n    {\r\n    &quot;date&quot;: &quot;2023-01-01&quot;,\r\n    &quot;employee&quot;: {\r\n      &quot;idNumber&quot;: &quot;29255&quot;,\r\n      &quot;gender&quot;: &quot;M&quot;,\r\n      &quot;age&quot;: 32\r\n    },\r\n    &quot;product&quot;: {\r\n      &quot;productNo&quot;: 11,\r\n      &quot;productName&quot;: &quot;someProduct&quot;\r\n    },\r\n      &quot;building&quot;: {\r\n        &quot;buildingNo&quot;: 11,\r\n        &quot;buildingName&quot;: &quot;someBuilding&quot;\r\n      }\r\n    }\r\n\r\nThe result object is like:\r\n\r\n    class Employee {\r\n            String id;\r\n            String gender;\r\n            Integer age;\r\n            Product[] products;\r\n        }\r\n        \r\n        class Product {\r\n            Integer id;\r\n            String name;\r\n        }\r\n\r\nSo I need to put product object in the Json to array of products. And as seen from Json it will always be a single product for such a structure. But maybe I&#39;ll want to add some other objects like building to the products. I wrote some mixin for this:\r\n\r\n    @JsonIgnoreProperties(ignoreUnknown = true)\r\n    public class EmployeeMixin {\r\n        @JsonProperty(&quot;idNumber&quot;)\r\n        Integer id;\r\n        String gender;\r\n        Integer age;\r\n        @JsonProperty(&quot;product&quot;)\r\n        @JsonDeserialize(using = ProductArrayDeserializer.class)\r\n        Product[] products;\r\n    }\r\n    \r\n    @JsonIgnoreProperties(ignoreUnknown = true)\r\n    public class ProductMixin {\r\n        @JsonProperty(&quot;productNo&quot;)\r\n        Integer id;\r\n        @JsonProperty(&quot;productName&quot;)\r\n        String name;\r\n    }\r\n    \r\n    public class ProductArrayDeserializer extends JsonDeserializer&lt;Product[]&gt; {\r\n        @Override\r\n        public Product[] deserialize(JsonParser p, DeserializationContext ctxt) throws IOException, JacksonException {\r\n            var jsonNode = p.readValueAsTree();\r\n            Product product = ctxt.readValue(jsonNode.traverse(), Product.class);\r\n            return new Product[]{product};\r\n        }\r\n    }\r\n\r\n\r\nBut when I tying to parse it with object mapper I get error:\r\n\r\n    Exception in thread &quot;main&quot; com.fasterxml.jackson.databind.exc.MismatchedInputException: Unexpected end-of-input when trying read value of type `com.my.users.examples.mixin.Product`\r\n     at [Source: (String)&quot;{\r\n        &quot;date&quot;: &quot;2023-01-01&quot;,\r\n    .....\r\n    }&quot;; line: 11, column: 5] (through reference chain: com.my.users.examples.mixin.Employee[&quot;product&quot;])\r\n\tat com.fasterxml.jackson.databind.exc.MismatchedInputException.from(MismatchedInputException.java:59)\r\n\tat com.fasterxml.jackson.databind.DeserializationContext.reportInputMismatch(DeserializationContext.java:1741)\r\n\tat com.fasterxml.jackson.databind.DeserializationContext.handleUnexpectedToken(DeserializationContext.java:1515)\r\n\tat com.fasterxml.jackson.databind.DeserializationContext.handleUnexpectedToken(DeserializationContext.java:1462)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer._deserializeOther(BeanDeserializer.java:223)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:186)\r\n\tat com.fasterxml.jackson.databind.DeserializationContext.readValue(DeserializationContext.java:966)\r\n\tat com.fasterxml.jackson.databind.DeserializationContext.readValue(DeserializationContext.java:953)\r\n\tat com.my.users.examples.mixin.ProductArrayDeserializer.deserialize(ProductArrayDeserializer.java:14)\r\n\tat com.my.users.examples.mixin.ProductArrayDeserializer.deserialize(ProductArrayDeserializer.java:10)\r\n\tat com.fasterxml.jackson.databind.deser.impl.FieldProperty.deserializeAndSet(FieldProperty.java:138)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.vanillaDeserialize(BeanDeserializer.java:313)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:176)\r\n\tat com.fasterxml.jackson.databind.deser.DefaultDeserializationContext.readRootValue(DefaultDeserializationContext.java:322)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4675)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3630)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3598)\r\n\tat com.my.users.examples.mixin.MixinTest.main(MixinTest.java:12)\r\n\r\nin line `Product product = ctxt.readValue(jsonNode.traverse(), Product.class);` of `ProductArrayDeserializer` class. Code for testing is next:\r\n\r\n    var mapper = new ObjectMapper();\r\n            mapper.addMixIn(Employee.class, EmployeeMixin.class)\r\n                    .addMixIn(Product.class, ProductMixin.class);\r\n    \r\n            Employee employee = mapper.readValue(employeeJson);\r\n\r\nWhat is wrong with my code? Thanks in advance.","title":"Put object in array with Jackson mixin","body":"<p>I have some json and need to map it to other third party objects. JSON:</p>\n<pre><code>{\n&quot;date&quot;: &quot;2023-01-01&quot;,\n&quot;employee&quot;: {\n  &quot;idNumber&quot;: &quot;29255&quot;,\n  &quot;gender&quot;: &quot;M&quot;,\n  &quot;age&quot;: 32\n},\n&quot;product&quot;: {\n  &quot;productNo&quot;: 11,\n  &quot;productName&quot;: &quot;someProduct&quot;\n},\n  &quot;building&quot;: {\n    &quot;buildingNo&quot;: 11,\n    &quot;buildingName&quot;: &quot;someBuilding&quot;\n  }\n}\n</code></pre>\n<p>The result object is like:</p>\n<pre><code>class Employee {\n        String id;\n        String gender;\n        Integer age;\n        Product[] products;\n    }\n    \n    class Product {\n        Integer id;\n        String name;\n    }\n</code></pre>\n<p>So I need to put product object in the Json to array of products. And as seen from Json it will always be a single product for such a structure. But maybe I'll want to add some other objects like building to the products. I wrote some mixin for this:</p>\n<pre><code>@JsonIgnoreProperties(ignoreUnknown = true)\npublic class EmployeeMixin {\n    @JsonProperty(&quot;idNumber&quot;)\n    Integer id;\n    String gender;\n    Integer age;\n    @JsonProperty(&quot;product&quot;)\n    @JsonDeserialize(using = ProductArrayDeserializer.class)\n    Product[] products;\n}\n\n@JsonIgnoreProperties(ignoreUnknown = true)\npublic class ProductMixin {\n    @JsonProperty(&quot;productNo&quot;)\n    Integer id;\n    @JsonProperty(&quot;productName&quot;)\n    String name;\n}\n\npublic class ProductArrayDeserializer extends JsonDeserializer&lt;Product[]&gt; {\n    @Override\n    public Product[] deserialize(JsonParser p, DeserializationContext ctxt) throws IOException, JacksonException {\n        var jsonNode = p.readValueAsTree();\n        Product product = ctxt.readValue(jsonNode.traverse(), Product.class);\n        return new Product[]{product};\n    }\n}\n</code></pre>\n<p>But when I tying to parse it with object mapper I get error:</p>\n<pre><code>Exception in thread &quot;main&quot; com.fasterxml.jackson.databind.exc.MismatchedInputException: Unexpected end-of-input when trying read value of type `com.my.users.examples.mixin.Product`\n at [Source: (String)&quot;{\n    &quot;date&quot;: &quot;2023-01-01&quot;,\n.....\n}&quot;; line: 11, column: 5] (through reference chain: com.my.users.examples.mixin.Employee[&quot;product&quot;])\nat com.fasterxml.jackson.databind.exc.MismatchedInputException.from(MismatchedInputException.java:59)\nat com.fasterxml.jackson.databind.DeserializationContext.reportInputMismatch(DeserializationContext.java:1741)\nat com.fasterxml.jackson.databind.DeserializationContext.handleUnexpectedToken(DeserializationContext.java:1515)\nat com.fasterxml.jackson.databind.DeserializationContext.handleUnexpectedToken(DeserializationContext.java:1462)\nat com.fasterxml.jackson.databind.deser.BeanDeserializer._deserializeOther(BeanDeserializer.java:223)\nat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:186)\nat com.fasterxml.jackson.databind.DeserializationContext.readValue(DeserializationContext.java:966)\nat com.fasterxml.jackson.databind.DeserializationContext.readValue(DeserializationContext.java:953)\nat com.my.users.examples.mixin.ProductArrayDeserializer.deserialize(ProductArrayDeserializer.java:14)\nat com.my.users.examples.mixin.ProductArrayDeserializer.deserialize(ProductArrayDeserializer.java:10)\nat com.fasterxml.jackson.databind.deser.impl.FieldProperty.deserializeAndSet(FieldProperty.java:138)\nat com.fasterxml.jackson.databind.deser.BeanDeserializer.vanillaDeserialize(BeanDeserializer.java:313)\nat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:176)\nat com.fasterxml.jackson.databind.deser.DefaultDeserializationContext.readRootValue(DefaultDeserializationContext.java:322)\nat com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4675)\nat com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3630)\nat com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3598)\nat com.my.users.examples.mixin.MixinTest.main(MixinTest.java:12)\n</code></pre>\n<p>in line <code>Product product = ctxt.readValue(jsonNode.traverse(), Product.class);</code> of <code>ProductArrayDeserializer</code> class. Code for testing is next:</p>\n<pre><code>var mapper = new ObjectMapper();\n        mapper.addMixIn(Employee.class, EmployeeMixin.class)\n                .addMixIn(Product.class, ProductMixin.class);\n\n        Employee employee = mapper.readValue(employeeJson);\n</code></pre>\n<p>What is wrong with my code? Thanks in advance.</p>\n"},{"tags":["java","spring-boot","get","spring-webclient"],"comments":[{"owner":{"account_id":25926563,"reputation":119,"user_id":19648355,"display_name":"Irremediable"},"score":0,"creation_date":1689355195,"post_id":76689598,"comment_id":135206920,"body_markdown":"You can replace bodyToMono with bodyToFlux method , which itself represent the unbound stream of elements and easily converts from Json array response","body":"You can replace bodyToMono with bodyToFlux method , which itself represent the unbound stream of elements and easily converts from Json array response"},{"owner":{"account_id":20919730,"reputation":207,"user_id":15368642,"display_name":"ilie alexandru"},"score":0,"creation_date":1689355456,"post_id":76689598,"comment_id":135206975,"body_markdown":"@Irremediable hello! I already tried and it did not work, if you can provide an example I would much appreciate it.","body":"@Irremediable hello! I already tried and it did not work, if you can provide an example I would much appreciate it."},{"owner":{"account_id":3593904,"reputation":129,"user_id":2999226,"display_name":"user2999226"},"score":0,"creation_date":1689355915,"post_id":76689598,"comment_id":135207080,"body_markdown":"Try bodyToFlux(..).collectList().block()","body":"Try bodyToFlux(..).collectList().block()"}],"answers":[{"comments":[{"owner":{"account_id":20919730,"reputation":207,"user_id":15368642,"display_name":"ilie alexandru"},"score":0,"creation_date":1689375795,"post_id":76690118,"comment_id":135209920,"body_markdown":"Thank you so much! But in my case is still not working, I have tried this before I posted the question. Now I tried again and I receive this error: &quot;Cannot construct instance of `com.Master_Hacking_Node.Master_Node.indexes.model.Interface` (no Creators, like default constructor, exist): cannot deserialize from Object value (no delegate- or property-based Creator) at [Source: UNKNOWN; byte offset: #UNKNOWN]&quot;","body":"Thank you so much! But in my case is still not working, I have tried this before I posted the question. Now I tried again and I receive this error: &quot;Cannot construct instance of <code>com.Master_Hacking_Node.Master_Node.indexes.model.Interface</code> (no Creators, like default constructor, exist): cannot deserialize from Object value (no delegate- or property-based Creator) at [Source: UNKNOWN; byte offset: #UNKNOWN]&quot;"},{"owner":{"account_id":3593904,"reputation":129,"user_id":2999226,"display_name":"user2999226"},"score":0,"creation_date":1689538450,"post_id":76690118,"comment_id":135224119,"body_markdown":"Ok, the thing is that the underlaying JSON library needs to know how to construct the Java Object. You have two options.\n1. You add a default constructor (a constructor without parameters). The library will use that to create the instance and then call the setters to set the values.\n\n2. You keep the constructor you have right now, but tell the library how to use your constructor. You can do that using the `@JsonProperty` annotation.\n`public Interface(@JsonProperty(&quot;interface_name&quot;) String interface_name, @JsonProperty(&quot;network&quot;) String network)`","body":"Ok, the thing is that the underlaying JSON library needs to know how to construct the Java Object. You have two options. 1. You add a default constructor (a constructor without parameters). The library will use that to create the instance and then call the setters to set the values.  2. You keep the constructor you have right now, but tell the library how to use your constructor. You can do that using the <code>@JsonProperty</code> annotation. <code>public Interface(@JsonProperty(&quot;interface_name&quot;) String interface_name, @JsonProperty(&quot;network&quot;) String network)</code>"},{"owner":{"account_id":3593904,"reputation":129,"user_id":2999226,"display_name":"user2999226"},"score":0,"creation_date":1689538647,"post_id":76690118,"comment_id":135224140,"body_markdown":"If you use the `@JsonProperty` annotation you can also change the name of interface_name to interfaceName (Java style). The parameter of the `@JsonProperty` annotation matches the JSON property. `public Interface(@JsonProperty(&quot;interface_name&quot;) String interfaceName, @JsonProperty(&quot;network&quot;) String network)`","body":"If you use the <code>@JsonProperty</code> annotation you can also change the name of interface_name to interfaceName (Java style). The parameter of the <code>@JsonProperty</code> annotation matches the JSON property. <code>public Interface(@JsonProperty(&quot;interface_name&quot;) String interfaceName, @JsonProperty(&quot;network&quot;) String network)</code>"}],"tags":[],"owner":{"account_id":3593904,"reputation":129,"user_id":2999226,"display_name":"user2999226"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689357090,"creation_date":1689357090,"answer_id":76690118,"question_id":76689598,"body_markdown":"The following code will return a `List` of `Interface` objects.\r\n```java\r\nreturn this.webClient\r\n    .get()\r\n    .uri(uri)\r\n    .retrieve()\r\n    .bodyToFlux(Interface.class)\r\n    .collectList()\r\n    .block();\r\n```\r\n`bodyToFlux` will create a `Flux` to handle the `Interface` objects in the response. Since you don&#39;t want to process them once at a time, but want a `List` containing all of them you need to call `collectList()` on the `Flux`. The result of that call is a `Mono&lt;List&lt;Interface&gt;&gt;`. That `Mono` can be handled the way you did in your code using the `block` method.","title":"Get list of objects as response Web client Java","body":"<p>The following code will return a <code>List</code> of <code>Interface</code> objects.</p>\n<pre class=\"lang-java prettyprint-override\"><code>return this.webClient\n    .get()\n    .uri(uri)\n    .retrieve()\n    .bodyToFlux(Interface.class)\n    .collectList()\n    .block();\n</code></pre>\n<p><code>bodyToFlux</code> will create a <code>Flux</code> to handle the <code>Interface</code> objects in the response. Since you don't want to process them once at a time, but want a <code>List</code> containing all of them you need to call <code>collectList()</code> on the <code>Flux</code>. The result of that call is a <code>Mono&lt;List&lt;Interface&gt;&gt;</code>. That <code>Mono</code> can be handled the way you did in your code using the <code>block</code> method.</p>\n"}],"owner":{"account_id":20919730,"reputation":207,"user_id":15368642,"display_name":"ilie alexandru"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":505,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689357090,"creation_date":1689352293,"question_id":76689598,"body_markdown":"I have a spring boot application that will send requests to another using &quot;WebClient&quot;. I am using java 20 and spring boot 3.0. I am a noob in spring boot, I am trying my best.\r\n\r\nThis is the model class:\r\n\r\n        @Data\r\n        @AllArgsConstructor\r\n        public class Interface {\r\n            public String interface_name;\r\n            public String network;\r\n        }\r\n    \r\nThis is the class that will make the request:\r\n\r\n       @Service\r\n    public class Get_Interfaces_Service {\r\n    \r\n        private final WebClient webClient;\r\n    \r\n        private String url=&quot;http://&quot;;\r\n    \r\n        public Get_Interfaces_Service(WebClient webClient) {\r\n            this.webClient = webClient;\r\n        }\r\n     public List&lt;Interface&gt; get_Interfaces_Service_Method(String minion_name){\r\n    \r\n            Minion minion = Syncronized_Mininos.getMinion(minion_name);\r\n    \r\n    \r\n            if(minion == null){\r\n                return null;\r\n            }\r\n    \r\n    \r\n            String url_for_interfaces = this.url +\r\n                    minion.ip_address +\r\n                    &quot;:&quot; +\r\n                    minion.port\r\n                    +&quot;/minion/getInterfaces&quot;;\r\n    \r\n            URI uri = UriComponentsBuilder\r\n                    .fromHttpUrl(url_for_interfaces)\r\n                    .build(Collections\r\n                            .emptyMap());\r\n    \r\n    \r\n            return this.webClient\r\n                    .get()\r\n                    .uri(uri)\r\n                    .retrieve()\r\n                    .bodyToMono(Interface.class)\r\n                    .block();\r\n        }\r\n\r\nThe other application is working perfectly:\r\n\r\nThis is the second model:\r\n\r\n    @Data\r\n    public class Interface {\r\n    \r\n        public String interface_name;\r\n        public String network;\r\n    \r\n        public Interface(String interface_name,\r\n                         String network){\r\n            this.interface_name = interface_name;\r\n            this.network = network;\r\n        }\r\n    }\r\n\r\n This is the class that returns the list:\r\n\r\n    static List&lt;Interface&gt; interfaces;\r\n    .....\r\n    public static synchronized List&lt;Interface&gt; get_synchronized_interfaces_method() {\r\n        return interfaces;\r\n    }\r\n\r\nThe output using postman of the second application is:\r\n\r\n\r\n    [\r\n        {\r\n            &quot;interface_name&quot;: &quot;default&quot;,\r\n            &quot;network&quot;: &quot;10.33.16.1&quot;\r\n        },\r\n        {\r\n            &quot;interface_name&quot;: &quot;10.33.16.0/24&quot;,\r\n            &quot;network&quot;: &quot;wlp3s0&quot;\r\n        },\r\n        {\r\n            &quot;interface_name&quot;: &quot;169.254.0.0/16&quot;,\r\n            &quot;network&quot;: &quot;virbr0&quot;\r\n        },....\r\n\r\n\r\nAnd this is the output of the first application when is requesting the list:\r\n\r\n\r\n    org.springframework.core.codec.CodecException: Type definition error: [collection type; class com.Master_Hacking_Node.Master_Node.indexes.model.Interface, contains [recursive type; com.Master_Hacking_Node.Master_Node.indexes.model.Interface]\\n\\tat org.springframework.http.codec.json.AbstractJackson2Decoder.processException(AbstractJackson2Decoder.java:271)\\n\\tSuppressed: The stacktrace has been enhanced by Reactor, refer to additional information below: \\nError has been observed at the following site(s):\\n\\t*__checkpoint ⇢ Body from GET http://127.0.0.1:8080/minion/getInterfaces [DefaultClientResponse]\\nOriginal Stack Trace:\\n\\t\\tat org.springframework.http.codec.json.AbstractJackson2Decoder.processException(AbstractJackson2Decoder.java:271)\\n\\t\\tat org.springframework.http.codec.json.AbstractJackson2Decoder.decode(AbstractJackson2Decoder.java:211)\\n\\t\\tat org.springframework.http.codec.json.AbstractJackson2Decoder.lambda$decodeToMono$2(AbstractJackson2Decoder.java:191)\\n\\t\\tat reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:132)\\n\\t\\tat reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.onNext(FluxContextWrite.java:107)\\n\\t\\tat reactor.core.publisher.FluxMapFuseable$MapFuseableConditionalSubscriber.onNext(FluxMapFuseable.java:299)\\n\\t\\tat reactor.core.publisher.FluxFilterFuseable$FilterFuseableConditionalSubscriber.onNext(FluxFilterFuseable.java:337)\\n\\t\\tat reactor.core.publisher.Operators$BaseFluxToMonoOperator.completePossiblyEmpty(Operators.java:2071)\\n\\t\\tat reactor.core.publisher.MonoCollect$CollectSubscriber.onComplete(MonoCollect.java:145)\\n\\t\\tat reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.onComplete(FluxContextWrite.java:126)\\n\\t\\tat reactor.core.publisher.FluxMapFuseable$MapFuseableConditionalSubscriber.onComplete(FluxMapFuseable.java:350)\\n\\t\\tat reactor.core.publisher.FluxFlattenIterable$FlattenIterableSubscriber.drainAsync(FluxFlattenIterable.java:371)\\n\\t\\tat reactor.core.publisher.FluxFlattenIterable$FlattenIterableSubscriber.drain(FluxFlattenIterable.java:724)\\n\\t\\tat reactor.core.publisher.FluxFlattenIterable$FlattenIterableSubscriber.onComplete(FluxFlattenIterable.java:273)\\n\\t\\tat reactor.adapter.JdkFlowAdapter$SubscriberToRS.onComplete(JdkFlowAdapter.java:160)\\n\\t\\tat java.net.http/jdk.internal.net.http.ResponseSubscribers$PublishingBodySubscriber.complete(ResponseSubscribers.java:939)\\n\\t\\tat java.net.http/jdk.internal.net.http.ResponseSubscribers$PublishingBodySubscriber.lambda$new$1(ResponseSubscribers.java:870)\\n\\t\\tat java.base/java.util.concurrent.CompletableFuture.uniAcceptNow(CompletableFuture.java:757)\\n\\t\\tat java.base/java.util.concurrent.CompletableFuture.uniAcceptStage(CompletableFuture.java:735)\\n\\t\\tat java.base/java.util.concurrent.CompletableFuture.thenAccept(CompletableFuture.java:2214)\\n\\t\\tat java.net.http/jdk.internal.net.http.ResponseSubscribers$PublishingBodySubscriber.lambda$new$2(ResponseSubscribers.java:870)\\n\\t\\tat java.base/java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:863)\\n\\t\\tat java.base/java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:841)\\n\\t\\tat java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)\\n\\t\\tat java.base/java.util.concurrent.CompletableFuture.complete(CompletableFuture.java:2179)\\n\\t\\tat java.net.http/jdk.internal.net.http.\r\n\r\nDo you have any idea what should I do in this situation?","title":"Get list of objects as response Web client Java","body":"<p>I have a spring boot application that will send requests to another using &quot;WebClient&quot;. I am using java 20 and spring boot 3.0. I am a noob in spring boot, I am trying my best.</p>\n<p>This is the model class:</p>\n<pre><code>    @Data\n    @AllArgsConstructor\n    public class Interface {\n        public String interface_name;\n        public String network;\n    }\n</code></pre>\n<p>This is the class that will make the request:</p>\n<pre><code>   @Service\npublic class Get_Interfaces_Service {\n\n    private final WebClient webClient;\n\n    private String url=&quot;http://&quot;;\n\n    public Get_Interfaces_Service(WebClient webClient) {\n        this.webClient = webClient;\n    }\n public List&lt;Interface&gt; get_Interfaces_Service_Method(String minion_name){\n\n        Minion minion = Syncronized_Mininos.getMinion(minion_name);\n\n\n        if(minion == null){\n            return null;\n        }\n\n\n        String url_for_interfaces = this.url +\n                minion.ip_address +\n                &quot;:&quot; +\n                minion.port\n                +&quot;/minion/getInterfaces&quot;;\n\n        URI uri = UriComponentsBuilder\n                .fromHttpUrl(url_for_interfaces)\n                .build(Collections\n                        .emptyMap());\n\n\n        return this.webClient\n                .get()\n                .uri(uri)\n                .retrieve()\n                .bodyToMono(Interface.class)\n                .block();\n    }\n</code></pre>\n<p>The other application is working perfectly:</p>\n<p>This is the second model:</p>\n<pre><code>@Data\npublic class Interface {\n\n    public String interface_name;\n    public String network;\n\n    public Interface(String interface_name,\n                     String network){\n        this.interface_name = interface_name;\n        this.network = network;\n    }\n}\n</code></pre>\n<p>This is the class that returns the list:</p>\n<pre><code>static List&lt;Interface&gt; interfaces;\n.....\npublic static synchronized List&lt;Interface&gt; get_synchronized_interfaces_method() {\n    return interfaces;\n}\n</code></pre>\n<p>The output using postman of the second application is:</p>\n<pre><code>[\n    {\n        &quot;interface_name&quot;: &quot;default&quot;,\n        &quot;network&quot;: &quot;10.33.16.1&quot;\n    },\n    {\n        &quot;interface_name&quot;: &quot;10.33.16.0/24&quot;,\n        &quot;network&quot;: &quot;wlp3s0&quot;\n    },\n    {\n        &quot;interface_name&quot;: &quot;169.254.0.0/16&quot;,\n        &quot;network&quot;: &quot;virbr0&quot;\n    },....\n</code></pre>\n<p>And this is the output of the first application when is requesting the list:</p>\n<pre><code>org.springframework.core.codec.CodecException: Type definition error: [collection type; class com.Master_Hacking_Node.Master_Node.indexes.model.Interface, contains [recursive type; com.Master_Hacking_Node.Master_Node.indexes.model.Interface]\\n\\tat org.springframework.http.codec.json.AbstractJackson2Decoder.processException(AbstractJackson2Decoder.java:271)\\n\\tSuppressed: The stacktrace has been enhanced by Reactor, refer to additional information below: \\nError has been observed at the following site(s):\\n\\t*__checkpoint ⇢ Body from GET http://127.0.0.1:8080/minion/getInterfaces [DefaultClientResponse]\\nOriginal Stack Trace:\\n\\t\\tat org.springframework.http.codec.json.AbstractJackson2Decoder.processException(AbstractJackson2Decoder.java:271)\\n\\t\\tat org.springframework.http.codec.json.AbstractJackson2Decoder.decode(AbstractJackson2Decoder.java:211)\\n\\t\\tat org.springframework.http.codec.json.AbstractJackson2Decoder.lambda$decodeToMono$2(AbstractJackson2Decoder.java:191)\\n\\t\\tat reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:132)\\n\\t\\tat reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.onNext(FluxContextWrite.java:107)\\n\\t\\tat reactor.core.publisher.FluxMapFuseable$MapFuseableConditionalSubscriber.onNext(FluxMapFuseable.java:299)\\n\\t\\tat reactor.core.publisher.FluxFilterFuseable$FilterFuseableConditionalSubscriber.onNext(FluxFilterFuseable.java:337)\\n\\t\\tat reactor.core.publisher.Operators$BaseFluxToMonoOperator.completePossiblyEmpty(Operators.java:2071)\\n\\t\\tat reactor.core.publisher.MonoCollect$CollectSubscriber.onComplete(MonoCollect.java:145)\\n\\t\\tat reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.onComplete(FluxContextWrite.java:126)\\n\\t\\tat reactor.core.publisher.FluxMapFuseable$MapFuseableConditionalSubscriber.onComplete(FluxMapFuseable.java:350)\\n\\t\\tat reactor.core.publisher.FluxFlattenIterable$FlattenIterableSubscriber.drainAsync(FluxFlattenIterable.java:371)\\n\\t\\tat reactor.core.publisher.FluxFlattenIterable$FlattenIterableSubscriber.drain(FluxFlattenIterable.java:724)\\n\\t\\tat reactor.core.publisher.FluxFlattenIterable$FlattenIterableSubscriber.onComplete(FluxFlattenIterable.java:273)\\n\\t\\tat reactor.adapter.JdkFlowAdapter$SubscriberToRS.onComplete(JdkFlowAdapter.java:160)\\n\\t\\tat java.net.http/jdk.internal.net.http.ResponseSubscribers$PublishingBodySubscriber.complete(ResponseSubscribers.java:939)\\n\\t\\tat java.net.http/jdk.internal.net.http.ResponseSubscribers$PublishingBodySubscriber.lambda$new$1(ResponseSubscribers.java:870)\\n\\t\\tat java.base/java.util.concurrent.CompletableFuture.uniAcceptNow(CompletableFuture.java:757)\\n\\t\\tat java.base/java.util.concurrent.CompletableFuture.uniAcceptStage(CompletableFuture.java:735)\\n\\t\\tat java.base/java.util.concurrent.CompletableFuture.thenAccept(CompletableFuture.java:2214)\\n\\t\\tat java.net.http/jdk.internal.net.http.ResponseSubscribers$PublishingBodySubscriber.lambda$new$2(ResponseSubscribers.java:870)\\n\\t\\tat java.base/java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:863)\\n\\t\\tat java.base/java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:841)\\n\\t\\tat java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)\\n\\t\\tat java.base/java.util.concurrent.CompletableFuture.complete(CompletableFuture.java:2179)\\n\\t\\tat java.net.http/jdk.internal.net.http.\n</code></pre>\n<p>Do you have any idea what should I do in this situation?</p>\n"},{"tags":["javascript","java","encryption","rsa","jsencrypt"],"comments":[{"owner":{"account_id":12359353,"reputation":42442,"user_id":9014097,"display_name":"Topaco"},"score":0,"creation_date":1689328513,"post_id":76686318,"comment_id":135201121,"body_markdown":"You have to encrypt with the public key and decrypt with the private key. You do it the other way around. Encrypt with the public and decrypt with the private, and see if that fixes the problem.","body":"You have to encrypt with the public key and decrypt with the private key. You do it the other way around. Encrypt with the public and decrypt with the private, and see if that fixes the problem."},{"owner":{"account_id":12359353,"reputation":42442,"user_id":9014097,"display_name":"Topaco"},"score":0,"creation_date":1689328666,"post_id":76686318,"comment_id":135201143,"body_markdown":"Or do you want to sign (private key) and verify (public key)? Sometimes signing is **incorrectly** referred to as *encrypting with the private key*. In reality, encrypting and signing are technically and intentionally quite different and the libraries provide dedicated methods for signing and verifying.","body":"Or do you want to sign (private key) and verify (public key)? Sometimes signing is <b>incorrectly</b> referred to as <i>encrypting with the private key</i>. In reality, encrypting and signing are technically and intentionally quite different and the libraries provide dedicated methods for signing and verifying."},{"owner":{"account_id":3187825,"reputation":8415,"user_id":2692962,"accept_rate":82,"display_name":"Kleber Mota"},"score":0,"creation_date":1689352982,"post_id":76686318,"comment_id":135206483,"body_markdown":"yes, it is the second option (sign and verify) i wanted. did not knew there was a difference. which changes will be necessary to the javascript and java code then?","body":"yes, it is the second option (sign and verify) i wanted. did not knew there was a difference. which changes will be necessary to the javascript and java code then?"},{"owner":{"account_id":12359353,"reputation":42442,"user_id":9014097,"display_name":"Topaco"},"score":0,"creation_date":1689355964,"post_id":76686318,"comment_id":135207087,"body_markdown":"You have to use the dedicated functions of both libraries for signing and verifying, see my answer.","body":"You have to use the dedicated functions of both libraries for signing and verifying, see my answer."}],"answers":[{"comments":[{"owner":{"account_id":3187825,"reputation":8415,"user_id":2692962,"accept_rate":82,"display_name":"Kleber Mota"},"score":0,"creation_date":1689364710,"post_id":76690017,"comment_id":135208552,"body_markdown":"I got this javascript code: https://pastebin.com/rLD7nHSQ and this java code: https://pastebin.com/uzbyHCxU. when I run it, I got an error: &#39;java.lang.IllegalArgumentException: Illegal base64 character 20&#39; on the line &#39;byte[] signature =  Base64.getDecoder().decode(cipherText.getBytes(StandardCharsets.UTF_8));&#39; of the java code.","body":"I got this javascript code: <a href=\"https://pastebin.com/rLD7nHSQ\" rel=\"nofollow noreferrer\">pastebin.com/rLD7nHSQ</a> and this java code: <a href=\"https://pastebin.com/uzbyHCxU\" rel=\"nofollow noreferrer\">pastebin.com/uzbyHCxU</a>. when I run it, I got an error: &#39;java.lang.IllegalArgumentException: Illegal base64 character 20&#39; on the line &#39;byte[] signature =  Base64.getDecoder().decode(cipherText.getBytes(StandardChars&zwnj;&#8203;ets.UTF_8));&#39; of the java code."},{"owner":{"account_id":3187825,"reputation":8415,"user_id":2692962,"accept_rate":82,"display_name":"Kleber Mota"},"score":0,"creation_date":1689364753,"post_id":76690017,"comment_id":135208563,"body_markdown":"this method is called from here: https://pastebin.com/ZDDuTus9","body":"this method is called from here: <a href=\"https://pastebin.com/ZDDuTus9\" rel=\"nofollow noreferrer\">pastebin.com/ZDDuTus9</a>"},{"owner":{"account_id":12359353,"reputation":42442,"user_id":9014097,"display_name":"Topaco"},"score":0,"creation_date":1689417642,"post_id":76690017,"comment_id":135212676,"body_markdown":"@KleberMota - This is a new question. Signing with JSEncrypt and verifying with Java works, as my two code snippets prove. So the problem is in your new code, which you should please post in a **new** question, in a minimal and executable (after a copy/paste to a standard environment) version, along with non-productive test data (key pair, message, signature) so that the problem is reproducible. Thx.","body":"@KleberMota - This is a new question. Signing with JSEncrypt and verifying with Java works, as my two code snippets prove. So the problem is in your new code, which you should please post in a <b>new</b> question, in a minimal and executable (after a copy/paste to a standard environment) version, along with non-productive test data (key pair, message, signature) so that the problem is reproducible. Thx."}],"tags":[],"owner":{"account_id":12359353,"reputation":42442,"user_id":9014097,"display_name":"Topaco"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689356321,"creation_date":1689355895,"answer_id":76690017,"question_id":76686318,"body_markdown":"Both libraries have dedicated functions for signing and verification. For *JSEncrypt*, see the [documentation][1], sec. *How to use this library*, 2nd code snippet, for Java, see the [`Signature`][2] class.\r\n\r\nIn the case of *JSEncrypt*, a possible implementation for signing is (using [*RSASSA-PKCS1-v1_5*][3] as signature algorithm and SHA256 as digest):\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    var privPkcs8Pem = `-----BEGIN PRIVATE KEY-----\r\n    MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQCYiWw16W1eGdG2\r\n    INU24v4EBjir6dYRQ4rhacVhiqOGXvnvC3M7XYMnT1+rTVTJpPrl/KY7OnskOYJj\r\n    BQOdV61hh7/uacvfG27xKuBmm5YZOcIcWHWzuMijF9MynmnzeEBVGbUlm5NyMaS4\r\n    xNVNnv/c3jagWHXDnygzQgvW6K7HmZ6+ZWCxKa+dpcVtnrG7dApdDbMkMaj+zJvL\r\n    1fWDrQYDPWrt3bdewXBHA6LjwyrQfuOvVxlxSuvvo1E/Xi0aW5taZQQi86ltz331\r\n    uLGp7pZnhIQPldDhoXSX4TI5rv12LEs9KPKLDiG1e4QkjeDCJAG4uHxEvcGA7LXz\r\n    GSAs2y/DAgMBAAECggEAFhYBGjXqv9nK221El0u6+OKHuR3vVhTqr88MpR4ZpZ6X\r\n    NLf6iX7K5dm1zKFdT0xj3FdpIEv27DH8LDyGdJ/vJZ8uDftj6VwuWPKwMYXXRV7E\r\n    uYL2GT1+UN27FuoIsEKEmhh8pJiH+wcExpC6y8rjrttpRcKZMT0YaSznzEho6ihy\r\n    6HtHMkXOI6KO/aZDRbI9n6Sdkul4qWmBAHj1CcKAFAHOaxVzYHpMaIPcZ+Mr++Bw\r\n    +m0qyMOlYvXFnUvpgwgL5KQ5id6wLT6WrBOybaHfmtAsVV7/baAxh7urdEHv+zCc\r\n    YJHhM/PnFOTzTfkUMDt1pWJyMAZCAygZWesaHtzsiQKBgQDS2RRivF7TekB/Tl+C\r\n    nFWF4SR9YNeIKXMywFiyQDD2lPnMwagWjcbCqp9ZjYhv3siAHhsTCbnkSsnQcq40\r\n    CxqUxeDmX6PZCTVgWw0Uj6IZmPUVDj9twVWYyv5FF33C5Qwwwdu7DSZaA8Jl+JKv\r\n    InMsI6vNdCN6Of94F3pnBu1NawKBgQC5M6kMX+negUUJQPeWEjt4TCvUxqWMUmkx\r\n    4ly8XyCOCM6Wt1kmhHN1NYs4+O60cO8x/6JSBq94eiS5otpDBGTL1tRjq3Kvvytg\r\n    jOpAlNIhfEBiPABfcwV/+k2fz8uGFZFMIUliDMLAa4wxo3rBbmuSPEsioyQ3dOmV\r\n    /GnHELklCQKBgHFOzUC+QCtfsFd5s6QKBX+73RMvvsPimpC0gzXPf0CUEKXzkDQG\r\n    nsCwVpAWmjKcQ51uEFirymUft9K4Plujd/ZpXJIQ5YlWBIQyihX5lkAxTcux6249\r\n    DpXcyMYyeJgK5QEyvLWJvIl1KbwI2DMbzU70IHh5qDMgBeTwoQvK0i3fAoGBAKQX\r\n    nLmlJd8KpHNth7EFGIIe41sUYsvwnNohGU+h7YNLVFf/vdK92lrIhUGGdmGUCqs/\r\n    N7/7wm85sd5053QnqXNeNjLVTrle5X0XfdqYwZH/uEARr7bif8YDrdFiWI7F/0X3\r\n    3EAu1EOPRtkYYwSN5GveVigrakRkpy5IRiSlsZWZAoGAM3y4tYRbOVCmp4Z419gQ\r\n    /9HlEgRjBaGnDQRcDEFqcLtIm1C6mygdjP+wCkDNwVoszSbsgdRMuoZ2ReD6gFRv\r\n    bBZM7lHICA5tPaARgGgeKomUZnozTxgVH7FMxax+BJPrI/dpXcX0fCNinAJo48l0\r\n    GOHy1iLgxKUEEli3j6hchjU=\r\n    -----END PRIVATE KEY-----`\r\n\r\n    var sign = new JSEncrypt()\r\n\r\n    // key import\r\n    sign.setPrivateKey(privPkcs8Pem)\r\n\r\n    // signing\r\n    var message = &#39;The quick brown fox jumps over the lazy dog&#39;\r\n    var signature = sign.sign(message, CryptoJS.SHA256, &#39;sha256&#39;)\r\n\r\n    console.log(signature) // E888/KGgC0Zgw8/1Ojd5wxMI/0KmuzhP+YYoBawSb7w6EGRvPf0SXSYfZeiiiEDMFKchb9k6lH4M/Foi++y2Lvuaqd8ZA+/fv1uiAhzwAzBsNolPWIxN3K1yO9kc+d0YZCDaEz7abasDOubppd6cNnyIgZnEwd3JjSoqs+zWayKxYGb1CqbhXVNKWoRgwkPqzs1pw0kcZsAuTBa0uZ/hAYIdaQh7X7n/ZjNXCddZ2iHQJExtPNquay80pfL1HVA0FlX1QM1smw3OP/hj7DSYswhayr98pKIPZeLtrbzOBrpLfk/nF/YBIEj+1KQH5ZD9wjK7q4ulaF6uy03rAZ5eaQ==\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/jsencrypt/3.3.2/jsencrypt.min.js&quot;&gt;&lt;/script&gt;\r\n    &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js&quot;&gt;&lt;/script&gt;\r\n\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nA possible Java counterpart for verification is:\r\n\r\n```java\r\nimport java.nio.charset.StandardCharsets;\r\nimport java.security.KeyFactory;\r\nimport java.security.PublicKey;\r\nimport java.security.Signature;\r\nimport java.security.interfaces.RSAPublicKey;\r\nimport java.security.spec.X509EncodedKeySpec;\r\nimport java.util.Base64;\r\n\r\n...\r\n\r\nString pubX509Pem = &quot;&quot;&quot;\r\n-----BEGIN PUBLIC KEY-----\r\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAmIlsNeltXhnRtiDVNuL+\r\nBAY4q+nWEUOK4WnFYYqjhl757wtzO12DJ09fq01UyaT65fymOzp7JDmCYwUDnVet\r\nYYe/7mnL3xtu8SrgZpuWGTnCHFh1s7jIoxfTMp5p83hAVRm1JZuTcjGkuMTVTZ7/\r\n3N42oFh1w58oM0IL1uiux5mevmVgsSmvnaXFbZ6xu3QKXQ2zJDGo/syby9X1g60G\r\nAz1q7d23XsFwRwOi48Mq0H7jr1cZcUrr76NRP14tGlubWmUEIvOpbc999bixqe6W\r\nZ4SED5XQ4aF0l+EyOa79dixLPSjyiw4htXuEJI3gwiQBuLh8RL3BgOy18xkgLNsv\r\nwwIDAQAB\r\n-----END PUBLIC KEY-----&quot;&quot;&quot;;\r\n\t\t\r\n// key import\r\nString pubX509DerB64 = pubX509Pem.replace(&quot;-----BEGIN PUBLIC KEY-----&quot;, &quot;&quot;).replace(&quot;-----END PUBLIC KEY-----&quot;, &quot;&quot;).replace(&quot;\\n&quot;, &quot;&quot;);\r\nbyte[] pubX509Der = Base64.getDecoder().decode(pubX509DerB64);\t\t\r\nKeyFactory kf = KeyFactory.getInstance(&quot;RSA&quot;);\r\nX509EncodedKeySpec keySpec = new X509EncodedKeySpec(pubX509Der);\r\nPublicKey pubKey = (RSAPublicKey) kf.generatePublic(keySpec);\r\n\r\n// verification\r\nbyte[] message = &quot;The quick brown fox jumps over the lazy dog&quot;.getBytes(StandardCharsets.UTF_8);\r\nbyte[] signature = Base64.getDecoder().decode(&quot;E888/KGgC0Zgw8/1Ojd5wxMI/0KmuzhP+YYoBawSb7w6EGRvPf0SXSYfZeiiiEDMFKchb9k6lH4M/Foi++y2Lvuaqd8ZA+/fv1uiAhzwAzBsNolPWIxN3K1yO9kc+d0YZCDaEz7abasDOubppd6cNnyIgZnEwd3JjSoqs+zWayKxYGb1CqbhXVNKWoRgwkPqzs1pw0kcZsAuTBa0uZ/hAYIdaQh7X7n/ZjNXCddZ2iHQJExtPNquay80pfL1HVA0FlX1QM1smw3OP/hj7DSYswhayr98pKIPZeLtrbzOBrpLfk/nF/YBIEj+1KQH5ZD9wjK7q4ulaF6uy03rAZ5eaQ==&quot;);\r\nSignature verifier = Signature.getInstance(&quot;SHA256withRSA&quot;);\r\nverifier.initVerify(pubKey);\r\nverifier.update(message);\r\nboolean result = verifier.verify(signature);\r\n\r\nSystem.out.println(result); // true\r\n```\r\n\r\n[1]: https://github.com/travist/jsencrypt#how-to-use-this-library\r\n[2]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/security/Signature.html\r\n[3]: https://datatracker.ietf.org/doc/html/rfc8017#section-8.2","title":"Error &#39;javax.crypto.BadPaddingException: Decryption error&#39; while trying decrypt data encrypted in the client-side with JSEncrypt","body":"<p>Both libraries have dedicated functions for signing and verification. For <em>JSEncrypt</em>, see the <a href=\"https://github.com/travist/jsencrypt#how-to-use-this-library\" rel=\"nofollow noreferrer\">documentation</a>, sec. <em>How to use this library</em>, 2nd code snippet, for Java, see the <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/security/Signature.html\" rel=\"nofollow noreferrer\"><code>Signature</code></a> class.</p>\n<p>In the case of <em>JSEncrypt</em>, a possible implementation for signing is (using <a href=\"https://datatracker.ietf.org/doc/html/rfc8017#section-8.2\" rel=\"nofollow noreferrer\"><em>RSASSA-PKCS1-v1_5</em></a> as signature algorithm and SHA256 as digest):</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>var privPkcs8Pem = `-----BEGIN PRIVATE KEY-----\nMIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQCYiWw16W1eGdG2\nINU24v4EBjir6dYRQ4rhacVhiqOGXvnvC3M7XYMnT1+rTVTJpPrl/KY7OnskOYJj\nBQOdV61hh7/uacvfG27xKuBmm5YZOcIcWHWzuMijF9MynmnzeEBVGbUlm5NyMaS4\nxNVNnv/c3jagWHXDnygzQgvW6K7HmZ6+ZWCxKa+dpcVtnrG7dApdDbMkMaj+zJvL\n1fWDrQYDPWrt3bdewXBHA6LjwyrQfuOvVxlxSuvvo1E/Xi0aW5taZQQi86ltz331\nuLGp7pZnhIQPldDhoXSX4TI5rv12LEs9KPKLDiG1e4QkjeDCJAG4uHxEvcGA7LXz\nGSAs2y/DAgMBAAECggEAFhYBGjXqv9nK221El0u6+OKHuR3vVhTqr88MpR4ZpZ6X\nNLf6iX7K5dm1zKFdT0xj3FdpIEv27DH8LDyGdJ/vJZ8uDftj6VwuWPKwMYXXRV7E\nuYL2GT1+UN27FuoIsEKEmhh8pJiH+wcExpC6y8rjrttpRcKZMT0YaSznzEho6ihy\n6HtHMkXOI6KO/aZDRbI9n6Sdkul4qWmBAHj1CcKAFAHOaxVzYHpMaIPcZ+Mr++Bw\n+m0qyMOlYvXFnUvpgwgL5KQ5id6wLT6WrBOybaHfmtAsVV7/baAxh7urdEHv+zCc\nYJHhM/PnFOTzTfkUMDt1pWJyMAZCAygZWesaHtzsiQKBgQDS2RRivF7TekB/Tl+C\nnFWF4SR9YNeIKXMywFiyQDD2lPnMwagWjcbCqp9ZjYhv3siAHhsTCbnkSsnQcq40\nCxqUxeDmX6PZCTVgWw0Uj6IZmPUVDj9twVWYyv5FF33C5Qwwwdu7DSZaA8Jl+JKv\nInMsI6vNdCN6Of94F3pnBu1NawKBgQC5M6kMX+negUUJQPeWEjt4TCvUxqWMUmkx\n4ly8XyCOCM6Wt1kmhHN1NYs4+O60cO8x/6JSBq94eiS5otpDBGTL1tRjq3Kvvytg\njOpAlNIhfEBiPABfcwV/+k2fz8uGFZFMIUliDMLAa4wxo3rBbmuSPEsioyQ3dOmV\n/GnHELklCQKBgHFOzUC+QCtfsFd5s6QKBX+73RMvvsPimpC0gzXPf0CUEKXzkDQG\nnsCwVpAWmjKcQ51uEFirymUft9K4Plujd/ZpXJIQ5YlWBIQyihX5lkAxTcux6249\nDpXcyMYyeJgK5QEyvLWJvIl1KbwI2DMbzU70IHh5qDMgBeTwoQvK0i3fAoGBAKQX\nnLmlJd8KpHNth7EFGIIe41sUYsvwnNohGU+h7YNLVFf/vdK92lrIhUGGdmGUCqs/\nN7/7wm85sd5053QnqXNeNjLVTrle5X0XfdqYwZH/uEARr7bif8YDrdFiWI7F/0X3\n3EAu1EOPRtkYYwSN5GveVigrakRkpy5IRiSlsZWZAoGAM3y4tYRbOVCmp4Z419gQ\n/9HlEgRjBaGnDQRcDEFqcLtIm1C6mygdjP+wCkDNwVoszSbsgdRMuoZ2ReD6gFRv\nbBZM7lHICA5tPaARgGgeKomUZnozTxgVH7FMxax+BJPrI/dpXcX0fCNinAJo48l0\nGOHy1iLgxKUEEli3j6hchjU=\n-----END PRIVATE KEY-----`\n\nvar sign = new JSEncrypt()\n\n// key import\nsign.setPrivateKey(privPkcs8Pem)\n\n// signing\nvar message = 'The quick brown fox jumps over the lazy dog'\nvar signature = sign.sign(message, CryptoJS.SHA256, 'sha256')\n\nconsole.log(signature) // E888/KGgC0Zgw8/1Ojd5wxMI/0KmuzhP+YYoBawSb7w6EGRvPf0SXSYfZeiiiEDMFKchb9k6lH4M/Foi++y2Lvuaqd8ZA+/fv1uiAhzwAzBsNolPWIxN3K1yO9kc+d0YZCDaEz7abasDOubppd6cNnyIgZnEwd3JjSoqs+zWayKxYGb1CqbhXVNKWoRgwkPqzs1pw0kcZsAuTBa0uZ/hAYIdaQh7X7n/ZjNXCddZ2iHQJExtPNquay80pfL1HVA0FlX1QM1smw3OP/hj7DSYswhayr98pKIPZeLtrbzOBrpLfk/nF/YBIEj+1KQH5ZD9wjK7q4ulaF6uy03rAZ5eaQ==</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;script src=\"https://cdnjs.cloudflare.com/ajax/libs/jsencrypt/3.3.2/jsencrypt.min.js\"&gt;&lt;/script&gt;\n&lt;script src=\"https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js\"&gt;&lt;/script&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>A possible Java counterpart for verification is:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.nio.charset.StandardCharsets;\nimport java.security.KeyFactory;\nimport java.security.PublicKey;\nimport java.security.Signature;\nimport java.security.interfaces.RSAPublicKey;\nimport java.security.spec.X509EncodedKeySpec;\nimport java.util.Base64;\n\n...\n\nString pubX509Pem = &quot;&quot;&quot;\n-----BEGIN PUBLIC KEY-----\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAmIlsNeltXhnRtiDVNuL+\nBAY4q+nWEUOK4WnFYYqjhl757wtzO12DJ09fq01UyaT65fymOzp7JDmCYwUDnVet\nYYe/7mnL3xtu8SrgZpuWGTnCHFh1s7jIoxfTMp5p83hAVRm1JZuTcjGkuMTVTZ7/\n3N42oFh1w58oM0IL1uiux5mevmVgsSmvnaXFbZ6xu3QKXQ2zJDGo/syby9X1g60G\nAz1q7d23XsFwRwOi48Mq0H7jr1cZcUrr76NRP14tGlubWmUEIvOpbc999bixqe6W\nZ4SED5XQ4aF0l+EyOa79dixLPSjyiw4htXuEJI3gwiQBuLh8RL3BgOy18xkgLNsv\nwwIDAQAB\n-----END PUBLIC KEY-----&quot;&quot;&quot;;\n        \n// key import\nString pubX509DerB64 = pubX509Pem.replace(&quot;-----BEGIN PUBLIC KEY-----&quot;, &quot;&quot;).replace(&quot;-----END PUBLIC KEY-----&quot;, &quot;&quot;).replace(&quot;\\n&quot;, &quot;&quot;);\nbyte[] pubX509Der = Base64.getDecoder().decode(pubX509DerB64);      \nKeyFactory kf = KeyFactory.getInstance(&quot;RSA&quot;);\nX509EncodedKeySpec keySpec = new X509EncodedKeySpec(pubX509Der);\nPublicKey pubKey = (RSAPublicKey) kf.generatePublic(keySpec);\n\n// verification\nbyte[] message = &quot;The quick brown fox jumps over the lazy dog&quot;.getBytes(StandardCharsets.UTF_8);\nbyte[] signature = Base64.getDecoder().decode(&quot;E888/KGgC0Zgw8/1Ojd5wxMI/0KmuzhP+YYoBawSb7w6EGRvPf0SXSYfZeiiiEDMFKchb9k6lH4M/Foi++y2Lvuaqd8ZA+/fv1uiAhzwAzBsNolPWIxN3K1yO9kc+d0YZCDaEz7abasDOubppd6cNnyIgZnEwd3JjSoqs+zWayKxYGb1CqbhXVNKWoRgwkPqzs1pw0kcZsAuTBa0uZ/hAYIdaQh7X7n/ZjNXCddZ2iHQJExtPNquay80pfL1HVA0FlX1QM1smw3OP/hj7DSYswhayr98pKIPZeLtrbzOBrpLfk/nF/YBIEj+1KQH5ZD9wjK7q4ulaF6uy03rAZ5eaQ==&quot;);\nSignature verifier = Signature.getInstance(&quot;SHA256withRSA&quot;);\nverifier.initVerify(pubKey);\nverifier.update(message);\nboolean result = verifier.verify(signature);\n\nSystem.out.println(result); // true\n</code></pre>\n"}],"owner":{"account_id":3187825,"reputation":8415,"user_id":2692962,"accept_rate":82,"display_name":"Kleber Mota"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":220,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76690017,"answer_count":1,"score":0,"last_activity_date":1689356321,"creation_date":1689326030,"question_id":76686318,"body_markdown":"I am trying decrypt in a web application (developed with java/servlet) a token encrypted on the client-side with a javascript/JSEncrypt code.\r\n\r\nthis is the javascript code:\r\n\r\n    function submit() {\r\n        var form = document.querySelector(&quot;form&quot;);\r\n        var plainText = document.querySelector(&quot;input[name=ip]&quot;).value;\r\n    \r\n        var fileInput = document.createElement(&#39;input&#39;);\r\n        fileInput.type = &#39;file&#39;;\r\n    \r\n        fileInput.addEventListener(&#39;change&#39;, function (e) {\r\n            var file = e.target.files[0];\r\n            var reader = new FileReader();\r\n    \r\n            reader.onloadend = function (e) {\r\n                var privateKey = e.target.result;\r\n    \r\n                var encryptor = new JSEncrypt();\r\n                encryptor.setPrivateKey(privateKey);\r\n                var encryptedText = encryptor.encrypt(plainText);\r\n    \r\n                const params = new URLSearchParams();\r\n                params.append(&#39;token&#39;, encryptedText);\r\n    \r\n                fetch(form.action, {\r\n                    method: form.method,\r\n                    headers: {\r\n                        &#39;Content-Type&#39;: &#39;application/x-www-form-urlencoded&#39;\r\n                    },\r\n                    body: params\r\n                })\r\n                .then(response =&gt; {\r\n                    var main = document.querySelector(&quot;main&quot;);\r\n                    var p = document.createElement(&quot;h1&quot;);\r\n                    p.textContent = response.text();\r\n                    main.appendChild(p);\r\n                    //window.location.href = &quot;http://localhost/inbox/home&quot;;\r\n                })\r\n                .catch(error =&gt; {\r\n                    var main = document.querySelector(&quot;main&quot;);\r\n                    var p = document.createElement(&quot;h1&quot;);\r\n                    p.textContent = error.text();\r\n                    main.appendChild(p);\r\n                });            \r\n            };\r\n    \r\n            reader.readAsText(file);\r\n        });\r\n    \r\n        fileInput.click();\r\n    }\r\n\r\nthis is the java code that is trying to do the decryption:\r\n\r\n    public class RSADecryptor {\r\n        public static String decrypt(byte[] cipherText, PublicKey publicKey) throws Exception {\r\n            Cipher cipher = Cipher.getInstance(RSAKeyGenerator.RSA_ALGORITHM);\r\n            cipher.init(Cipher.DECRYPT_MODE, publicKey);\r\n    \r\n            int keySize = ((RSAKey) publicKey).getModulus().bitLength();\r\n            int blockSize = keySize / 8;\r\n    \r\n            ByteArrayOutputStream outputStream = new ByteArrayOutputStream();\r\n            int offset = 0;\r\n    \r\n            while(offset &lt; cipherText.length) {\r\n                int length = Math.min(cipherText.length - offset, blockSize);\r\n                byte[] block = cipher.doFinal(cipherText, offset, length);\r\n                outputStream.write(block, 0, block.length);\r\n                offset += blockSize;\r\n            }\r\n    \r\n            byte[] decryptedBytes = outputStream.toByteArray();\r\n    \r\n            //byte[] decryptedBytes = cipher.doFinal(cipherext);\r\n            return new String(decryptedBytes);\r\n        }\r\n    }\r\n\r\n\r\nAnyone can point out what I am doing wrong here?\r\n","title":"Error &#39;javax.crypto.BadPaddingException: Decryption error&#39; while trying decrypt data encrypted in the client-side with JSEncrypt","body":"<p>I am trying decrypt in a web application (developed with java/servlet) a token encrypted on the client-side with a javascript/JSEncrypt code.</p>\n<p>this is the javascript code:</p>\n<pre><code>function submit() {\n    var form = document.querySelector(&quot;form&quot;);\n    var plainText = document.querySelector(&quot;input[name=ip]&quot;).value;\n\n    var fileInput = document.createElement('input');\n    fileInput.type = 'file';\n\n    fileInput.addEventListener('change', function (e) {\n        var file = e.target.files[0];\n        var reader = new FileReader();\n\n        reader.onloadend = function (e) {\n            var privateKey = e.target.result;\n\n            var encryptor = new JSEncrypt();\n            encryptor.setPrivateKey(privateKey);\n            var encryptedText = encryptor.encrypt(plainText);\n\n            const params = new URLSearchParams();\n            params.append('token', encryptedText);\n\n            fetch(form.action, {\n                method: form.method,\n                headers: {\n                    'Content-Type': 'application/x-www-form-urlencoded'\n                },\n                body: params\n            })\n            .then(response =&gt; {\n                var main = document.querySelector(&quot;main&quot;);\n                var p = document.createElement(&quot;h1&quot;);\n                p.textContent = response.text();\n                main.appendChild(p);\n                //window.location.href = &quot;http://localhost/inbox/home&quot;;\n            })\n            .catch(error =&gt; {\n                var main = document.querySelector(&quot;main&quot;);\n                var p = document.createElement(&quot;h1&quot;);\n                p.textContent = error.text();\n                main.appendChild(p);\n            });            \n        };\n\n        reader.readAsText(file);\n    });\n\n    fileInput.click();\n}\n</code></pre>\n<p>this is the java code that is trying to do the decryption:</p>\n<pre><code>public class RSADecryptor {\n    public static String decrypt(byte[] cipherText, PublicKey publicKey) throws Exception {\n        Cipher cipher = Cipher.getInstance(RSAKeyGenerator.RSA_ALGORITHM);\n        cipher.init(Cipher.DECRYPT_MODE, publicKey);\n\n        int keySize = ((RSAKey) publicKey).getModulus().bitLength();\n        int blockSize = keySize / 8;\n\n        ByteArrayOutputStream outputStream = new ByteArrayOutputStream();\n        int offset = 0;\n\n        while(offset &lt; cipherText.length) {\n            int length = Math.min(cipherText.length - offset, blockSize);\n            byte[] block = cipher.doFinal(cipherText, offset, length);\n            outputStream.write(block, 0, block.length);\n            offset += blockSize;\n        }\n\n        byte[] decryptedBytes = outputStream.toByteArray();\n\n        //byte[] decryptedBytes = cipher.doFinal(cipherext);\n        return new String(decryptedBytes);\n    }\n}\n</code></pre>\n<p>Anyone can point out what I am doing wrong here?</p>\n"},{"tags":["java","json","comparison"],"comments":[{"owner":{"account_id":1528364,"reputation":125614,"user_id":1426227,"accept_rate":79,"display_name":"cassiomolin"},"score":2,"creation_date":1532334868,"post_id":6526911,"comment_id":89917460,"body_markdown":"In this [answer](https://stackoverflow.com/a/50969020/1426227) you will find a solution with Jackson/Gson and Guava.","body":"In this <a href=\"https://stackoverflow.com/a/50969020/1426227\">answer</a> you will find a solution with Jackson/Gson and Guava."},{"owner":{"account_id":4944314,"reputation":149,"user_id":3980164,"display_name":"Slev Florin"},"score":0,"creation_date":1609771533,"post_id":6526911,"comment_id":115918970,"body_markdown":"Json Compare [Json-Compare](https://github.com/fslev/json-compare)","body":"Json Compare <a href=\"https://github.com/fslev/json-compare\" rel=\"nofollow noreferrer\">Json-Compare</a>"}],"answers":[{"tags":[],"owner":{"account_id":239282,"reputation":1674,"user_id":508760,"accept_rate":69,"display_name":"W. Goeman"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1309380711,"creation_date":1309380711,"answer_id":6527113,"question_id":6526911,"body_markdown":"## json-lib ##\r\nWhat I would do is parse the json data using [json-lib][1]. This will result in regular java objects which you can compare using the equals methods. This is only valid though **assuming** the guys from json-lib properly implemented the equals method, but that you can easily test.\r\n\r\n\r\n  [1]: http://json-lib.sourceforge.net/ &quot;json-lib&quot;","title":"Best way to compare two JSON files in Java","body":"<h2>json-lib</h2>\n\n<p>What I would do is parse the json data using <a href=\"http://json-lib.sourceforge.net/\" rel=\"nofollow\" title=\"json-lib\">json-lib</a>. This will result in regular java objects which you can compare using the equals methods. This is only valid though <strong>assuming</strong> the guys from json-lib properly implemented the equals method, but that you can easily test.</p>\n"},{"comments":[{"owner":{"account_id":1301815,"reputation":31771,"user_id":1251549,"accept_rate":29,"display_name":"Cherry"},"score":13,"creation_date":1403500068,"post_id":6527118,"comment_id":37665019,"body_markdown":"`mapper.readTree` do not works if json fields has different order.","body":"<code>mapper.readTree</code> do not works if json fields has different order."},{"owner":{"account_id":3200349,"reputation":5199,"user_id":2702510,"accept_rate":25,"display_name":"Ean V"},"score":2,"creation_date":1475623989,"post_id":6527118,"comment_id":67014572,"body_markdown":"And only compares the structure of the json documents.","body":"And only compares the structure of the json documents."},{"owner":{"account_id":7725572,"reputation":804,"user_id":5850305,"accept_rate":56,"display_name":"Saagar"},"score":0,"creation_date":1558962790,"post_id":6527118,"comment_id":99261199,"body_markdown":"Its comparing both keys and values. How to make it only for keys ?","body":"Its comparing both keys and values. How to make it only for keys ?"},{"owner":{"account_id":171134,"reputation":3434,"user_id":398348,"accept_rate":67,"display_name":"likejudo"},"score":1,"creation_date":1590592487,"post_id":6527118,"comment_id":109739026,"body_markdown":"@EanV and also Cherry not true. it compares the values and even if members are out of order..","body":"@EanV and also Cherry not true. it compares the values and even if members are out of order.."},{"owner":{"account_id":1527660,"reputation":2400,"user_id":1579915,"display_name":"dr0i"},"score":2,"creation_date":1606721889,"post_id":6527118,"comment_id":115036576,"body_markdown":"@Cherry json fields _can_ have a different order. But two *list elements* are only compared as equal if they have the same values in the exact same order.","body":"@Cherry json fields <i>can</i> have a different order. But two <i>list elements</i> are only compared as equal if they have the same values in the exact same order."}],"tags":[],"owner":{"account_id":390729,"reputation":65307,"user_id":750987,"display_name":"Programmer Bruce"},"comment_count":5,"down_vote_count":1,"up_vote_count":14,"is_accepted":false,"score":13,"last_activity_date":1455301973,"creation_date":1309380730,"answer_id":6527118,"question_id":6526911,"body_markdown":"This only addresses equality, not differences.\r\n\r\n----\r\n\r\nWith Jackson.\r\n\r\n    ObjectMapper mapper = new ObjectMapper();\r\n    \r\n    JsonNode tree1 = mapper.readTree(jsonInput1);\r\n    JsonNode tree2 = mapper.readTree(jsonInput2);\r\n    \r\n    boolean areTheyEqual = tree1.equals(tree2);\r\n\r\nFrom [the JavaDoc for JsonNode.equals][1]:\r\n\r\n&gt; Equality for node objects is defined as full (deep) value equality. This means that it is possible to compare complete JSON trees for equality by comparing equality of root nodes. \r\n\r\n\r\n  [1]: http://fasterxml.github.io/jackson-databind/javadoc/2.7/com/fasterxml/jackson/databind/JsonNode.html#equals(java.lang.Object)","title":"Best way to compare two JSON files in Java","body":"<p>This only addresses equality, not differences.</p>\n\n<hr>\n\n<p>With Jackson.</p>\n\n<pre><code>ObjectMapper mapper = new ObjectMapper();\n\nJsonNode tree1 = mapper.readTree(jsonInput1);\nJsonNode tree2 = mapper.readTree(jsonInput2);\n\nboolean areTheyEqual = tree1.equals(tree2);\n</code></pre>\n\n<p>From <a href=\"http://fasterxml.github.io/jackson-databind/javadoc/2.7/com/fasterxml/jackson/databind/JsonNode.html#equals(java.lang.Object)\" rel=\"noreferrer\">the JavaDoc for JsonNode.equals</a>:</p>\n\n<blockquote>\n  <p>Equality for node objects is defined as full (deep) value equality. This means that it is possible to compare complete JSON trees for equality by comparing equality of root nodes. </p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":171224,"reputation":4385,"user_id":398499,"accept_rate":100,"display_name":"Jean-Fran&#231;ois Beaulieu"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1475610568,"creation_date":1309380955,"answer_id":6527161,"question_id":6526911,"body_markdown":"You could try the [XStream&#39;s architecture, handling of JSON mappings][1]\r\n\r\nAlso, take a look at this post: [Comparing two XML files &amp; generating a third with XMLDiff in C#][2]. It&#39;s in C# but the logic is the same.\r\n\r\n\r\n  [1]: http://x-stream.github.io/json-tutorial.html\r\n  [2]: https://stackoverflow.com/questions/4590214/comparing-two-xml-files-generating-a-third-with-xmldiff-in-c","title":"Best way to compare two JSON files in Java","body":"<p>You could try the <a href=\"http://x-stream.github.io/json-tutorial.html\" rel=\"nofollow noreferrer\">XStream's architecture, handling of JSON mappings</a></p>\n\n<p>Also, take a look at this post: <a href=\"https://stackoverflow.com/questions/4590214/comparing-two-xml-files-generating-a-third-with-xmldiff-in-c\">Comparing two XML files &amp; generating a third with XMLDiff in C#</a>. It's in C# but the logic is the same.</p>\n"},{"comments":[{"owner":{"account_id":3200349,"reputation":5199,"user_id":2702510,"accept_rate":25,"display_name":"Ean V"},"score":0,"creation_date":1475624060,"post_id":8021203,"comment_id":67014589,"body_markdown":"Limited to the structure of the documents only.","body":"Limited to the structure of the documents only."},{"owner":{"account_id":195025,"reputation":13170,"user_id":437679,"accept_rate":63,"display_name":"Martin Algesten"},"score":2,"creation_date":1475638184,"post_id":8021203,"comment_id":67017710,"body_markdown":"no. it compares values too. but I don&#39;t recommend using it since I ran into hard solved edge cases and lost interest.","body":"no. it compares values too. but I don&#39;t recommend using it since I ran into hard solved edge cases and lost interest."}],"tags":[],"owner":{"account_id":195025,"reputation":13170,"user_id":437679,"accept_rate":63,"display_name":"Martin Algesten"},"comment_count":2,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1367822607,"creation_date":1320507290,"answer_id":8021203,"question_id":6526911,"body_markdown":"I had a similar problem and ended up writing my own library:\r\n\r\nhttps://github.com/algesten/jsondiff\r\n\r\nIt does both diffing/patching.\r\n\r\nDiffs are JSON-objects themselves and have a simple syntax for object merge/replace and array insert/replace.\r\n\r\nExample:\r\n\r\n    original\r\n    {\r\n       a: { b: 42 }\r\n    }\r\n\r\n    patch\r\n    {\r\n      &quot;~a&quot;: { c: 43 }\r\n    }\r\n\r\nThe ```~``` indicates an object merge.\r\n\r\n    result\r\n    {\r\n       a: { b: 42, c: 43 }\r\n    }","title":"Best way to compare two JSON files in Java","body":"<p>I had a similar problem and ended up writing my own library:</p>\n\n<p><a href=\"https://github.com/algesten/jsondiff\" rel=\"nofollow\">https://github.com/algesten/jsondiff</a></p>\n\n<p>It does both diffing/patching.</p>\n\n<p>Diffs are JSON-objects themselves and have a simple syntax for object merge/replace and array insert/replace.</p>\n\n<p>Example:</p>\n\n<pre><code>original\n{\n   a: { b: 42 }\n}\n\npatch\n{\n  \"~a\": { c: 43 }\n}\n</code></pre>\n\n<p>The <code>~</code> indicates an object merge.</p>\n\n<pre><code>result\n{\n   a: { b: 42, c: 43 }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":171134,"reputation":3434,"user_id":398348,"accept_rate":67,"display_name":"likejudo"},"score":1,"creation_date":1590599293,"post_id":26281005,"comment_id":109742919,"body_markdown":"I went to their site and find it is licensed under LGPLv3. correct me if I am mistaken but isn&#39;t LGPL very restrictive for corporations to use?","body":"I went to their site and find it is licensed under LGPLv3. correct me if I am mistaken but isn&#39;t LGPL very restrictive for corporations to use?"}],"tags":[],"owner":{"account_id":3491286,"reputation":2056,"user_id":2920922,"accept_rate":18,"display_name":"Didac Montero"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1412864830,"creation_date":1412864830,"answer_id":26281005,"question_id":6526911,"body_markdown":"For people who are already using **Jackson**, I recommend [**json-patch**](https://github.com/fge/json-patch)\r\n\r\n    final JsonNode patchNode = JsonDiff.asJson(firstNode, secondNode);\r\n    System.out.println(&quot;Diff=&quot; + m.writeValueAsString(patchNode));","title":"Best way to compare two JSON files in Java","body":"<p>For people who are already using <strong>Jackson</strong>, I recommend <a href=\"https://github.com/fge/json-patch\" rel=\"nofollow\"><strong>json-patch</strong></a></p>\n\n<pre><code>final JsonNode patchNode = JsonDiff.asJson(firstNode, secondNode);\nSystem.out.println(\"Diff=\" + m.writeValueAsString(patchNode));\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3200349,"reputation":5199,"user_id":2702510,"accept_rate":25,"display_name":"Ean V"},"score":1,"creation_date":1475623949,"post_id":31077548,"comment_id":67014564,"body_markdown":"This only compares the structure of the json documents.","body":"This only compares the structure of the json documents."},{"owner":{"account_id":7725572,"reputation":804,"user_id":5850305,"accept_rate":56,"display_name":"Saagar"},"score":2,"creation_date":1558962873,"post_id":31077548,"comment_id":99261238,"body_markdown":"Its comparing both keys and values. How to make it only for keys ?","body":"Its comparing both keys and values. How to make it only for keys ?"},{"owner":{"account_id":8286940,"reputation":820,"user_id":7468075,"display_name":"kohane15"},"score":0,"creation_date":1603874560,"post_id":31077548,"comment_id":114171298,"body_markdown":"The code didn&#39;t work for me. You probably need to make a new `ObjectMapper` first:\n\n```java\nObjectMapper mapper = new ObjectMapper();\nJsonNode beforeNode = jacksonObjectMapper.readTree(beforeJsonString);\nJsonNode afterNode = jacksonObjectMapper.readTree(afterJsonString);\nJsonNode patch = JsonDiff.asJson(beforeNode, afterNode);\nString diffs = patch.toString();\n```","body":"The code didn&#39;t work for me. You probably need to make a new <code>ObjectMapper</code> first:  <code>java ObjectMapper mapper = new ObjectMapper(); JsonNode beforeNode = jacksonObjectMapper.readTree(beforeJsonString); JsonNode afterNode = jacksonObjectMapper.readTree(afterJsonString); JsonNode patch = JsonDiff.asJson(beforeNode, afterNode); String diffs = patch.toString(); </code>"}],"tags":[],"owner":{"account_id":410264,"reputation":3756,"user_id":782011,"accept_rate":47,"display_name":"pacoverflow"},"comment_count":3,"down_vote_count":0,"up_vote_count":33,"is_accepted":false,"score":33,"last_activity_date":1689356304,"creation_date":1435334392,"answer_id":31077548,"question_id":6526911,"body_markdown":"I recommend the [zjsonpatch][1] library, which presents the diff information in accordance with [RFC 6902][2] (JSON Patch).  You can use it with Jackson:\r\n\r\n    import com.fasterxml.jackson.databind.{ObjectMapper, JsonNode}\r\n   \tJsonNode beforeNode = jacksonObjectMapper.readTree(beforeJsonString);\r\n   \tJsonNode afterNode = jacksonObjectMapper.readTree(afterJsonString);\r\n    \r\n    import com.flipkart.zjsonpatch.JsonDiff\r\n   \tJsonNode patch = JsonDiff.asJson(beforeNode, afterNode);\r\n   \tString diffs = patch.toString();\r\n\r\nThis library is better than [fge-json-patch][3] (which was mentioned in another answer) because it can detect items being inserted/removed from arrays.  Fge-json-patch cannot handle that (if an item is inserted into the middle of an array, it will think that item and every item after that was changed since they are all shifted over by one).\r\n\r\n\r\n  [1]: https://github.com/flipkart-incubator/zjsonpatch\r\n  [2]: https://www.rfc-editor.org/rfc/rfc6902\r\n  [3]: https://github.com/fge/json-patch","title":"Best way to compare two JSON files in Java","body":"<p>I recommend the <a href=\"https://github.com/flipkart-incubator/zjsonpatch\" rel=\"nofollow noreferrer\">zjsonpatch</a> library, which presents the diff information in accordance with <a href=\"https://www.rfc-editor.org/rfc/rfc6902\" rel=\"nofollow noreferrer\">RFC 6902</a> (JSON Patch).  You can use it with Jackson:</p>\n<pre><code>import com.fasterxml.jackson.databind.{ObjectMapper, JsonNode}\nJsonNode beforeNode = jacksonObjectMapper.readTree(beforeJsonString);\nJsonNode afterNode = jacksonObjectMapper.readTree(afterJsonString);\n\nimport com.flipkart.zjsonpatch.JsonDiff\nJsonNode patch = JsonDiff.asJson(beforeNode, afterNode);\nString diffs = patch.toString();\n</code></pre>\n<p>This library is better than <a href=\"https://github.com/fge/json-patch\" rel=\"nofollow noreferrer\">fge-json-patch</a> (which was mentioned in another answer) because it can detect items being inserted/removed from arrays.  Fge-json-patch cannot handle that (if an item is inserted into the middle of an array, it will think that item and every item after that was changed since they are all shifted over by one).</p>\n"},{"comments":[{"owner":{"account_id":1257758,"reputation":1666,"user_id":1216859,"accept_rate":71,"display_name":"Saeid Nourian"},"score":1,"creation_date":1570629474,"post_id":33481923,"comment_id":102973684,"body_markdown":"Thanks! This is the only library I could find that gives you the option to ignore the order of items in lists.","body":"Thanks! This is the only library I could find that gives you the option to ignore the order of items in lists."},{"owner":{"account_id":171134,"reputation":3434,"user_id":398348,"accept_rate":67,"display_name":"likejudo"},"score":0,"creation_date":1590596439,"post_id":33481923,"comment_id":109741304,"body_markdown":"This did not work as advertised and when I emailed them, the email address was no longer valid. Abandonware??","body":"This did not work as advertised and when I emailed them, the email address was no longer valid. Abandonware??"},{"owner":{"account_id":171134,"reputation":3434,"user_id":398348,"accept_rate":67,"display_name":"likejudo"},"score":1,"creation_date":1590599405,"post_id":33481923,"comment_id":109742981,"body_markdown":"see https://stackoverflow.com/questions/62048635/finding-json-diff-fails-using-jsonassert","body":"see <a href=\"https://stackoverflow.com/questions/62048635/finding-json-diff-fails-using-jsonassert\" title=\"finding json diff fails using jsonassert\">stackoverflow.com/questions/62048635/&hellip;</a>"}],"tags":[],"owner":{"account_id":387465,"reputation":4697,"user_id":745827,"accept_rate":88,"display_name":"Cengiz"},"comment_count":3,"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1446480511,"creation_date":1446480511,"answer_id":33481923,"question_id":6526911,"body_markdown":"I&#39;ve done good experience with [JSONAssert][1].\r\n\r\n    import org.junit.Test;\r\n    import org.apache.commons.io.FileUtils;\r\n    import org.skyscreamer.jsonassert.JSONAssert;\r\n    import org.skyscreamer.jsonassert.JSONCompareMode;\r\n\r\n    ... \r\n    @Test\r\n    public void myTest() {\r\n      String expectedJson = FileUtils.readFileToString(&quot;/expectedFile&quot;);\r\n      String actualJson = FileUtils.readFileToString(&quot;/actualFile&quot;);\r\n      JSONAssert.assertEquals(expectedJson, actualJson, JSONCompareMode.STRICT);\r\n    }\r\n    ... \r\n\r\n  [1]: https://github.com/skyscreamer/JSONassert","title":"Best way to compare two JSON files in Java","body":"<p>I've done good experience with <a href=\"https://github.com/skyscreamer/JSONassert\" rel=\"noreferrer\">JSONAssert</a>.</p>\n\n<pre><code>import org.junit.Test;\nimport org.apache.commons.io.FileUtils;\nimport org.skyscreamer.jsonassert.JSONAssert;\nimport org.skyscreamer.jsonassert.JSONCompareMode;\n\n... \n@Test\npublic void myTest() {\n  String expectedJson = FileUtils.readFileToString(\"/expectedFile\");\n  String actualJson = FileUtils.readFileToString(\"/actualFile\");\n  JSONAssert.assertEquals(expectedJson, actualJson, JSONCompareMode.STRICT);\n}\n... \n</code></pre>\n"},{"comments":[{"owner":{"account_id":10160323,"reputation":522,"user_id":7504001,"accept_rate":40,"display_name":"Vikas Suryawanshi"},"score":0,"creation_date":1517985566,"post_id":39736461,"comment_id":84312474,"body_markdown":"i am getting compile time error as:  The type org.json.JSONArray cannot be resolved. It is indirectly referenced from required .class files","body":"i am getting compile time error as:  The type org.json.JSONArray cannot be resolved. It is indirectly referenced from required .class files"},{"owner":{"account_id":3200349,"reputation":5199,"user_id":2702510,"accept_rate":25,"display_name":"Ean V"},"score":1,"creation_date":1522212128,"post_id":39736461,"comment_id":86058102,"body_markdown":"A general rule, if u wanna use a lib, include all its dependencies or use maven to get the dependencies automatically.","body":"A general rule, if u wanna use a lib, include all its dependencies or use maven to get the dependencies automatically."},{"owner":{"account_id":171134,"reputation":3434,"user_id":398348,"accept_rate":67,"display_name":"likejudo"},"score":0,"creation_date":1590596431,"post_id":39736461,"comment_id":109741299,"body_markdown":"This did not work as advertised and when I emailed them, the email address was no longer valid. Abandonware??","body":"This did not work as advertised and when I emailed them, the email address was no longer valid. Abandonware??"},{"owner":{"account_id":171134,"reputation":3434,"user_id":398348,"accept_rate":67,"display_name":"likejudo"},"score":0,"creation_date":1590599395,"post_id":39736461,"comment_id":109742974,"body_markdown":"see https://stackoverflow.com/questions/62048635/finding-json-diff-fails-using-jsonassert","body":"see <a href=\"https://stackoverflow.com/questions/62048635/finding-json-diff-fails-using-jsonassert\" title=\"finding json diff fails using jsonassert\">stackoverflow.com/questions/62048635/&hellip;</a>"}],"tags":[],"owner":{"account_id":3200349,"reputation":5199,"user_id":2702510,"accept_rate":25,"display_name":"Ean V"},"comment_count":4,"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1488533751,"creation_date":1475024400,"answer_id":39736461,"question_id":6526911,"body_markdown":"The easiest way to compare json strings is using `JSONCompare` from [JSONAssert][1] library. The advantage is, it&#39;s not limited to structure only and can compare values if you wish:\r\n\r\n    JSONCompareResult result = \r\n         JSONCompare.compareJSON(json1, json2, JSONCompareMode.STRICT);\r\n    System.out.println(result.toString());\r\n\r\nwhich will output something like:\r\n\r\n    Expected: VALUE1\r\n         got: VALUE2\r\n     ; field1.field2\r\n\r\n  [1]: https://github.com/skyscreamer/JSONassert\r\n","title":"Best way to compare two JSON files in Java","body":"<p>The easiest way to compare json strings is using <code>JSONCompare</code> from <a href=\"https://github.com/skyscreamer/JSONassert\" rel=\"noreferrer\">JSONAssert</a> library. The advantage is, it's not limited to structure only and can compare values if you wish:</p>\n\n<pre><code>JSONCompareResult result = \n     JSONCompare.compareJSON(json1, json2, JSONCompareMode.STRICT);\nSystem.out.println(result.toString());\n</code></pre>\n\n<p>which will output something like:</p>\n\n<pre><code>Expected: VALUE1\n     got: VALUE2\n ; field1.field2\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4091881,"reputation":25,"user_id":3359659,"display_name":"Naresh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1603535940,"creation_date":1603534597,"answer_id":64512274,"question_id":6526911,"body_markdown":"In case if want to compare two JSON Ignoring the order of elements/object, see if this [library][1] helps you.\r\n\r\n    \r\nUsage:\r\n\r\n    List&lt;Diff&gt; diff = new DnjsonDiff().getDiff(String left, String right)\r\n    Left =[{&quot;name&quot;:&quot;Bob&quot;,&quot;businessKey&quot;:&quot;4444&quot;},{&quot;name&quot;:&quot;John&quot;,&quot;businessKey&quot;:&quot;5555&quot;}]\r\n    Right = [{&quot;name&quot;:&quot;Bob&quot;,&quot;businessKey&quot;:&quot;6666&quot;},{&quot;name&quot;:&quot;John&quot;, &quot;businessKey&quot;:&quot;4444&quot;}]\r\n    \r\n    Diff:\r\n    \r\n    [\r\n        {\r\n            &quot;op&quot;: &quot;replace&quot;,\r\n            &quot;configuredValue&quot;: &quot;John&quot;,\r\n            &quot;intendedValue&quot;: &quot;Bob&quot;,\r\n            &quot;businessKey&quot;: &quot;4444&quot;\r\n        },\r\n        {\r\n            &quot;op&quot;: &quot;remove&quot;,\r\n            &quot;configuredValue&quot;: null,\r\n            &quot;intendedValue&quot;: &quot;{\\&quot;name\\&quot;:\\&quot;John\\&quot;,\\&quot;businessKey\\&quot;:\\&quot;5555\\&quot;}&quot;,\r\n            &quot;businessKey&quot;: &quot;5555&quot;\r\n        },\r\n        {\r\n            &quot;op&quot;: &quot;add&quot;,\r\n            &quot;configuredValue&quot;: &quot;{\\&quot;name\\&quot;:\\&quot;Bob\\&quot;,\\&quot;businessKey\\&quot;:\\&quot;6666\\&quot;}&quot;,\r\n            &quot;intendedValue&quot;: null,\r\n            &quot;businessKey&quot;: &quot;null&quot;\r\n        }\r\n    ]\r\n\r\n  [1]: https://github.com/nareshsaw5/common-json-diff\r\n","title":"Best way to compare two JSON files in Java","body":"<p>In case if want to compare two JSON Ignoring the order of elements/object, see if this <a href=\"https://github.com/nareshsaw5/common-json-diff\" rel=\"nofollow noreferrer\">library</a> helps you.</p>\n<p>Usage:</p>\n<pre><code>List&lt;Diff&gt; diff = new DnjsonDiff().getDiff(String left, String right)\nLeft =[{&quot;name&quot;:&quot;Bob&quot;,&quot;businessKey&quot;:&quot;4444&quot;},{&quot;name&quot;:&quot;John&quot;,&quot;businessKey&quot;:&quot;5555&quot;}]\nRight = [{&quot;name&quot;:&quot;Bob&quot;,&quot;businessKey&quot;:&quot;6666&quot;},{&quot;name&quot;:&quot;John&quot;, &quot;businessKey&quot;:&quot;4444&quot;}]\n\nDiff:\n\n[\n    {\n        &quot;op&quot;: &quot;replace&quot;,\n        &quot;configuredValue&quot;: &quot;John&quot;,\n        &quot;intendedValue&quot;: &quot;Bob&quot;,\n        &quot;businessKey&quot;: &quot;4444&quot;\n    },\n    {\n        &quot;op&quot;: &quot;remove&quot;,\n        &quot;configuredValue&quot;: null,\n        &quot;intendedValue&quot;: &quot;{\\&quot;name\\&quot;:\\&quot;John\\&quot;,\\&quot;businessKey\\&quot;:\\&quot;5555\\&quot;}&quot;,\n        &quot;businessKey&quot;: &quot;5555&quot;\n    },\n    {\n        &quot;op&quot;: &quot;add&quot;,\n        &quot;configuredValue&quot;: &quot;{\\&quot;name\\&quot;:\\&quot;Bob\\&quot;,\\&quot;businessKey\\&quot;:\\&quot;6666\\&quot;}&quot;,\n        &quot;intendedValue&quot;: null,\n        &quot;businessKey&quot;: &quot;null&quot;\n    }\n]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4612886,"reputation":565,"user_id":3740432,"accept_rate":0,"display_name":"Afsar Ali"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1646885593,"creation_date":1646885593,"answer_id":71418756,"question_id":6526911,"body_markdown":"You can use below dependancy to compare Json with STRICT,LENIENT,IGNORE_ORDER etc. \r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.skyscreamer&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jsonassert&lt;/artifactId&gt;\r\n        &lt;version&gt;1.5.0&lt;/version&gt;\r\n        &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n      public static boolean isTwoJsonEquals(JSONObject firstObj,JSONObject secondObj, JSONCompareMode compareMode){\r\n        try {\r\n          JSONCompareResult result = JSONCompare.compareJSON(firstObj, secondObj, compareMode);\r\n\r\n          return result.passed();\r\n        } catch (JSONException e) {\r\n          e.printStackTrace();\r\n        }\r\n        return false;\r\n      }\r\n\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n\r\n","title":"Best way to compare two JSON files in Java","body":"<p>You can use below dependancy to compare Json with STRICT,LENIENT,IGNORE_ORDER etc.</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.skyscreamer&lt;/groupId&gt;\n    &lt;artifactId&gt;jsonassert&lt;/artifactId&gt;\n    &lt;version&gt;1.5.0&lt;/version&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<pre class=\"lang-java prettyprint-override\"><code>  public static boolean isTwoJsonEquals(JSONObject firstObj,JSONObject secondObj, JSONCompareMode compareMode){\n    try {\n      JSONCompareResult result = JSONCompare.compareJSON(firstObj, secondObj, compareMode);\n\n      return result.passed();\n    } catch (JSONException e) {\n      e.printStackTrace();\n    }\n    return false;\n  }\n</code></pre>\n\n"},{"tags":[],"owner":{"account_id":23744703,"reputation":21,"user_id":17762303,"display_name":"KRISH C"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674546356,"creation_date":1674546356,"answer_id":75218682,"question_id":6526911,"body_markdown":"Using **Google&#39;s Guava library** for comparison. Check this answer which has detailed explanation on how to use this.\r\n\r\nhttps://stackoverflow.com/a/50969020/17762303","title":"Best way to compare two JSON files in Java","body":"<p>Using <strong>Google's Guava library</strong> for comparison. Check this answer which has detailed explanation on how to use this.</p>\n<p><a href=\"https://stackoverflow.com/a/50969020/17762303\">https://stackoverflow.com/a/50969020/17762303</a></p>\n"}],"owner":{"account_id":148236,"reputation":93535,"user_id":359862,"accept_rate":95,"display_name":"James Raitsev"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":155202,"favorite_count":0,"down_vote_count":0,"up_vote_count":45,"accepted_answer_id":6527161,"answer_count":11,"score":45,"last_activity_date":1689356304,"creation_date":1309379681,"question_id":6526911,"body_markdown":"How would you suggest this task is approached?\r\n\r\nThe challenge as i see it is in presenting diff information intelligently. Before i go reinventing the wheel, is there an accepted approach of how such a comparison should be handled? ","title":"Best way to compare two JSON files in Java","body":"<p>How would you suggest this task is approached?</p>\n\n<p>The challenge as i see it is in presenting diff information intelligently. Before i go reinventing the wheel, is there an accepted approach of how such a comparison should be handled? </p>\n"},{"tags":["java","spring","spring-boot","spring-security"],"comments":[{"owner":{"account_id":2064278,"reputation":13138,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1689359969,"post_id":76690029,"comment_id":135207792,"body_markdown":"why do you need the token?","body":"why do you need the token?"},{"owner":{"account_id":29019036,"reputation":1,"user_id":22228894,"display_name":"alex"},"score":0,"creation_date":1689365777,"post_id":76690029,"comment_id":135208745,"body_markdown":"The structure of the application I am working with requires it to be passed between various components. This isn&#39;t something I have the liberty to change.","body":"The structure of the application I am working with requires it to be passed between various components. This isn&#39;t something I have the liberty to change."},{"owner":{"account_id":21488921,"reputation":4730,"user_id":15835039,"display_name":"Steve Riesenberg"},"score":1,"creation_date":1689372322,"post_id":76690029,"comment_id":135209615,"body_markdown":"Please have a look at the docs: https://docs.spring.io/spring-security/reference/servlet/oauth2/client/authorized-clients.html","body":"Please have a look at the docs: <a href=\"https://docs.spring.io/spring-security/reference/servlet/oauth2/client/authorized-clients.html\" rel=\"nofollow noreferrer\">docs.spring.io/spring-security/reference/servlet/oauth2/clie&zwnj;&#8203;nt/&hellip;</a>"}],"owner":{"account_id":29019036,"reputation":1,"user_id":22228894,"display_name":"alex"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689356009,"creation_date":1689355963,"question_id":76690029,"body_markdown":"I am trying to use OAuth2 to authenticate / authorize users in a Spring Boot MVC application. \r\n\r\nFrom the [Spring Security docs](https://docs.spring.io/spring-security/reference/servlet/oauth2/login/core.html#:~:text=The%20default%20redirect%20URI%20template,the%20application%20is%20correctly%20configured.), I know that the default redirect uri (where the authentication server redirects to with an authorization code after successful sign in) is `{baseUrl}/login/oauth2/code/{registrationId}`. \r\n\r\nHowever, what happens at this point? Does Spring Boot provide this endpoint and handle things? Or do I need to make a controller that maps this endpoint (e.g. `@GetMapping(/login/oauth2/code/{registrationId}, ...)`, and deal with things myself?\r\n\r\nIf Spring does things for me, what exactly does it do? I notice that you can specify a `security.oauth2.client.provider.&lt;registrationId&gt;.token-uri` in the `application.yml` file. Does this mean Spring Boot will automatically fetch the access token for you when the redirect uri is accessed?\r\n\r\nBasically, I am wondering how I can get the access token from the server after the user has successfully logged in. If Spring Boot gets the access token for you, how can I get it from Spring Boot to use it in HTTP requests?","title":"Spring Security OAuth2 Flow - What Does Spring Boot Do After Redirect?","body":"<p>I am trying to use OAuth2 to authenticate / authorize users in a Spring Boot MVC application.</p>\n<p>From the <a href=\"https://docs.spring.io/spring-security/reference/servlet/oauth2/login/core.html#:%7E:text=The%20default%20redirect%20URI%20template,the%20application%20is%20correctly%20configured.\" rel=\"nofollow noreferrer\">Spring Security docs</a>, I know that the default redirect uri (where the authentication server redirects to with an authorization code after successful sign in) is <code>{baseUrl}/login/oauth2/code/{registrationId}</code>.</p>\n<p>However, what happens at this point? Does Spring Boot provide this endpoint and handle things? Or do I need to make a controller that maps this endpoint (e.g. <code>@GetMapping(/login/oauth2/code/{registrationId}, ...)</code>, and deal with things myself?</p>\n<p>If Spring does things for me, what exactly does it do? I notice that you can specify a <code>security.oauth2.client.provider.&lt;registrationId&gt;.token-uri</code> in the <code>application.yml</code> file. Does this mean Spring Boot will automatically fetch the access token for you when the redirect uri is accessed?</p>\n<p>Basically, I am wondering how I can get the access token from the server after the user has successfully logged in. If Spring Boot gets the access token for you, how can I get it from Spring Boot to use it in HTTP requests?</p>\n"},{"tags":["java","android","html","gradle","libgdx"],"answers":[{"tags":[],"owner":{"account_id":26318201,"reputation":5076,"user_id":19980636,"display_name":"Krokomot"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686992849,"creation_date":1686992414,"answer_id":76495472,"question_id":76346966,"body_markdown":"Lets take a look at the error message.\r\n\r\n```\r\nUnable to load class &#39;org.gradle.api.internal.artifacts.dsl.dependencies.DependencyFactory$ClassPathNotation&#39;.\r\n```\r\nThe guide on [Upgrading your build from Gradle 7.x to 8.0][1] says that [Internal DependencyFactory was renamed][2].\r\n\r\n&gt; The internal `org.gradle.api.internal.artifacts.dsl.dependencies.DependencyFactory` type was renamed to `org.gradle.api.internal.artifacts.dsl.dependencies.DependencyFactoryInternal`. As an internal type, it should not be used, but for compatibility reasons the inner `ClassPathNotation` type is still available. This name for the type is deprecated and will be removed in Gradle 8.0. The public API for this is on `DependencyHandler`, with methods such as `localGroovy()` providing the same functionality.\r\n\r\nThat exactly fits the error message you get when updating to Gradle 8. Those internal Gradle APIs are mainly relevant for the developers of Gradle plugins. That&#39;s why the above mentioned Upgrading Guide for Gradle recommends in a second step to\r\n\r\n&gt; Update your plugins.\r\n&gt; \r\n&gt; Some plugins will break with this new version of Gradle, for example because they use internal APIs that have been removed or changed. The previous step will help you identify potential problems by issuing deprecation warnings when a plugin does try to use a deprecated part of the API.\r\n\r\nNow, you have problems with a HTML setup of libGDX, but not with a non-HTML setup, because different plugins are used. Those non-HTML plugins, like the Android Gradle Plugin, are either not affected or have been updated duly. There are, if I&#39;m not mistaken, two plugins one has to apply in a libGDX HTML-project -- the [WAR plugin][3] and the [GWT plugin][4]. The first one is a Gradle Core plugin and I doubt that it isn&#39;t up-to-date. The latter is a custom one and there are various implementations to choose from, as you can see.\r\n\r\nSo -- Ensure, that all your plugins are up-to-date. If that doesn&#39;t help and you need a HTML-setup of libGDX you probably have to stick with Gradle 7 for now.\r\n\r\n\r\n  [1]: https://docs.gradle.org/current/userguide/upgrading_version_7.html\r\n  [2]: https://docs.gradle.org/current/userguide/upgrading_version_7.html#dependency_factory_renamed\r\n  [3]: https://docs.gradle.org/current/userguide/war_plugin.html\r\n  [4]: https://plugins.gradle.org/search?term=gwt","title":"LibGDX - android studio: Unable to load class &#39;org.gradle.api.internal.artifacts.dsl.dependencies.DependencyFactory$ClassPathNotation&#39;","body":"<p>Lets take a look at the error message.</p>\n<pre><code>Unable to load class 'org.gradle.api.internal.artifacts.dsl.dependencies.DependencyFactory$ClassPathNotation'.\n</code></pre>\n<p>The guide on <a href=\"https://docs.gradle.org/current/userguide/upgrading_version_7.html\" rel=\"nofollow noreferrer\">Upgrading your build from Gradle 7.x to 8.0</a> says that <a href=\"https://docs.gradle.org/current/userguide/upgrading_version_7.html#dependency_factory_renamed\" rel=\"nofollow noreferrer\">Internal DependencyFactory was renamed</a>.</p>\n<blockquote>\n<p>The internal <code>org.gradle.api.internal.artifacts.dsl.dependencies.DependencyFactory</code> type was renamed to <code>org.gradle.api.internal.artifacts.dsl.dependencies.DependencyFactoryInternal</code>. As an internal type, it should not be used, but for compatibility reasons the inner <code>ClassPathNotation</code> type is still available. This name for the type is deprecated and will be removed in Gradle 8.0. The public API for this is on <code>DependencyHandler</code>, with methods such as <code>localGroovy()</code> providing the same functionality.</p>\n</blockquote>\n<p>That exactly fits the error message you get when updating to Gradle 8. Those internal Gradle APIs are mainly relevant for the developers of Gradle plugins. That's why the above mentioned Upgrading Guide for Gradle recommends in a second step to</p>\n<blockquote>\n<p>Update your plugins.</p>\n<p>Some plugins will break with this new version of Gradle, for example because they use internal APIs that have been removed or changed. The previous step will help you identify potential problems by issuing deprecation warnings when a plugin does try to use a deprecated part of the API.</p>\n</blockquote>\n<p>Now, you have problems with a HTML setup of libGDX, but not with a non-HTML setup, because different plugins are used. Those non-HTML plugins, like the Android Gradle Plugin, are either not affected or have been updated duly. There are, if I'm not mistaken, two plugins one has to apply in a libGDX HTML-project -- the <a href=\"https://docs.gradle.org/current/userguide/war_plugin.html\" rel=\"nofollow noreferrer\">WAR plugin</a> and the <a href=\"https://plugins.gradle.org/search?term=gwt\" rel=\"nofollow noreferrer\">GWT plugin</a>. The first one is a Gradle Core plugin and I doubt that it isn't up-to-date. The latter is a custom one and there are various implementations to choose from, as you can see.</p>\n<p>So -- Ensure, that all your plugins are up-to-date. If that doesn't help and you need a HTML-setup of libGDX you probably have to stick with Gradle 7 for now.</p>\n"},{"comments":[{"owner":{"account_id":24269076,"reputation":29,"user_id":18217490,"display_name":"HermannGo"},"score":0,"creation_date":1689355859,"post_id":76674810,"comment_id":135207062,"body_markdown":"That worked with the Gretty update &quot;org.gretty:gretty:3.0.7 to version 4.0.3&quot;. But how do you get the information about which update you need from time to time when errors occur.\nIt will always be a never ending search on the net.\nNo normal person can see through that anymore. Once it chops on one corner, another time on the other.","body":"That worked with the Gretty update &quot;org.gretty:gretty:3.0.7 to version 4.0.3&quot;. But how do you get the information about which update you need from time to time when errors occur. It will always be a never ending search on the net. No normal person can see through that anymore. Once it chops on one corner, another time on the other."},{"owner":{"account_id":9947340,"reputation":222,"user_id":7361496,"display_name":"Jiř&#237;"},"score":0,"creation_date":1689368310,"post_id":76674810,"comment_id":135209119,"body_markdown":"@HermannGo I found the solution thanks to the answer from Krokomot where he said it is likely issue with one of the HTML plugins, so I checked the stacktrace and confirmed it is ineeded the case, then I just updated the plugin to version suggested by the IDE and posted it as answer here for people looking for quick solution.","body":"@HermannGo I found the solution thanks to the answer from Krokomot where he said it is likely issue with one of the HTML plugins, so I checked the stacktrace and confirmed it is ineeded the case, then I just updated the plugin to version suggested by the IDE and posted it as answer here for people looking for quick solution."}],"tags":[],"owner":{"account_id":9947340,"reputation":222,"user_id":7361496,"display_name":"Jiř&#237;"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1689200425,"creation_date":1689200425,"answer_id":76674810,"question_id":76346966,"body_markdown":"You will first have to update `org.gretty:gretty:3.0.7` to version `4.0.3`, then the Gradle upgrade will work fine.","title":"LibGDX - android studio: Unable to load class &#39;org.gradle.api.internal.artifacts.dsl.dependencies.DependencyFactory$ClassPathNotation&#39;","body":"<p>You will first have to update <code>org.gretty:gretty:3.0.7</code> to version <code>4.0.3</code>, then the Gradle upgrade will work fine.</p>\n"}],"owner":{"account_id":24269076,"reputation":29,"user_id":18217490,"display_name":"HermannGo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":418,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1689355815,"creation_date":1685191156,"question_id":76346966,"body_markdown":"I have the following problem:\r\n\r\nIf I create a new project with LIBGDX Project Setup (latest version 1.11.0) and then open it in Android Studio, I can upgrade to Gradle 7.4.2 without any problems.\r\nHowever, when upgrading to Gradle 8.0.1 I always get the same error: &quot;Unable to load class &#39;org.gradle.api.internal.artifacts.dsl.dependencies.DependencyFactory$ClassPathNotation&#39;.&quot;\r\n&quot;org/gradle/api/internal/artifacts/dsl/dependencies/DependencyFactory$ClassPathNotation&quot;\r\n\r\nIt must have something to do with HTML, because if I create a LIBGDX setup without HTML, I can update to Gradle 8.0.1 without any problems. Everything works fine without HTML.\r\n\r\nAndroid Studio Flamingo Patch 2, LIBGDX Setup Version 1.11.0\r\n\r\nWould be grateful for help...\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/n3lHs.png","title":"LibGDX - android studio: Unable to load class &#39;org.gradle.api.internal.artifacts.dsl.dependencies.DependencyFactory$ClassPathNotation&#39;","body":"<p>I have the following problem:</p>\n<p>If I create a new project with LIBGDX Project Setup (latest version 1.11.0) and then open it in Android Studio, I can upgrade to Gradle 7.4.2 without any problems.\nHowever, when upgrading to Gradle 8.0.1 I always get the same error: &quot;Unable to load class 'org.gradle.api.internal.artifacts.dsl.dependencies.DependencyFactory$ClassPathNotation'.&quot;\n&quot;org/gradle/api/internal/artifacts/dsl/dependencies/DependencyFactory$ClassPathNotation&quot;</p>\n<p>It must have something to do with HTML, because if I create a LIBGDX setup without HTML, I can update to Gradle 8.0.1 without any problems. Everything works fine without HTML.</p>\n<p>Android Studio Flamingo Patch 2, LIBGDX Setup Version 1.11.0</p>\n<p>Would be grateful for help...\n<a href=\"https://i.stack.imgur.com/n3lHs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/n3lHs.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","multithreading","synchronization"],"comments":[{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":6,"creation_date":1688195381,"post_id":76593611,"comment_id":135044159,"body_markdown":"The reason is your expectations are wrong. Why did you expect that?","body":"The reason is your expectations are wrong. Why did you expect that?"},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":1,"creation_date":1688216065,"post_id":76593611,"comment_id":135046026,"body_markdown":"If you want a specific order, why are you using threads? and what makes you think they should execute in any specific order?","body":"If you want a specific order, why are you using threads? and what makes you think they should execute in any specific order?"},{"owner":{"account_id":23962756,"reputation":11,"user_id":17952624,"display_name":"Tejas Hegde"},"score":0,"creation_date":1688285087,"post_id":76593611,"comment_id":135051464,"body_markdown":"Shouldn&#39;t the display order depend upon the sequence in which the print statements are present? And the output should have been as expected because of thread synchronisation right?","body":"Shouldn&#39;t the display order depend upon the sequence in which the print statements are present? And the output should have been as expected because of thread synchronisation right?"},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1688292094,"post_id":76593611,"comment_id":135052094,"body_markdown":"No. The display order depends on the order in which they are executed: and as threads execute in parallel, there are no rational grounds for expecting one specific order over any other.","body":"No. The display order depends on the order in which they are executed: and as threads execute in parallel, there are no rational grounds for expecting one specific order over any other."}],"answers":[{"tags":[],"owner":{"account_id":23962756,"reputation":11,"user_id":17952624,"display_name":"Tejas Hegde"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689355579,"creation_date":1689355579,"answer_id":76689976,"question_id":76593611,"body_markdown":"As a user pointed out(thank you, sorry for not responding to your comment), the OS only schedules a thread for execution and does not immediately start the thread(Thread.start()).\r\n\r\nThe reason that the thread outputs appear after A,B,C in this case is because the for loop (initialization, condition check and then print) seems to add an overhead. So by the time the thread prints a message, A,B,C would have been printed. However if the thread prints only a simple print message like System.out.println(name); then in the output I observed that the thread output appears most of the times like this:  A,t1,B,C,t2,t3 and then main.\r\n\r\nFinally, since the OS schedules the threads, one cannot expect the same order of threads to be scheduled every time. This is what I observed when I executed the program several times. For simple print message, the above mentioned output appeared  many times. Some times the output was perfectly as expected. But with the for loop, the thread output almost always appears after A,B,C.","title":"Java Thread Synchronization does not work as expected","body":"<p>As a user pointed out(thank you, sorry for not responding to your comment), the OS only schedules a thread for execution and does not immediately start the thread(Thread.start()).</p>\n<p>The reason that the thread outputs appear after A,B,C in this case is because the for loop (initialization, condition check and then print) seems to add an overhead. So by the time the thread prints a message, A,B,C would have been printed. However if the thread prints only a simple print message like System.out.println(name); then in the output I observed that the thread output appears most of the times like this:  A,t1,B,C,t2,t3 and then main.</p>\n<p>Finally, since the OS schedules the threads, one cannot expect the same order of threads to be scheduled every time. This is what I observed when I executed the program several times. For simple print message, the above mentioned output appeared  many times. Some times the output was perfectly as expected. But with the for loop, the thread output almost always appears after A,B,C.</p>\n"}],"owner":{"account_id":23962756,"reputation":11,"user_id":17952624,"display_name":"Tejas Hegde"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":61,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1689355579,"creation_date":1688194979,"question_id":76593611,"body_markdown":"The following is a Java Program demonstrating Threading and Synchronization in Java.\r\n\r\n\r\n```\r\n    class AB{\r\n\tsynchronized public void print(String name) {\r\n\t\tfor(int i=0;i&lt;5;i++) {\r\n\t\t\tSystem.out.println(name+&quot; &quot;+i);\r\n\t\t\ttry {\r\n\t\t\t\tThread.sleep(1000);\r\n\t\t\t}\r\n\t\t\tcatch(InterruptedException e) {\r\n\t\t\t\te.printStackTrace();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n//extending thread is another way. Usually we use Runnable Interface\r\nclass NewThread implements Runnable{\r\n\tString name;\r\n\tAB obj;\r\n\tThread t;\r\n\tNewThread(String name,AB o){\r\n\t\tthis.name=name;\r\n\t\tobj=o;\r\n\t\tt=new Thread(this,name);\r\n\t\tt.start();\r\n\t}\r\n\t\r\n\tpublic void run() {\r\n\t\tobj.print(name);\r\n\t}\r\n}\r\n\r\npublic class ThreadExample {\r\npublic static void main(String g[]) {\r\n\tAB t=new AB();\r\n\tNewThread t1=new NewThread(&quot;1&quot;,t);\r\n\tSystem.out.println(&quot;A&quot;);\r\n\tNewThread t2=new NewThread(&quot;2&quot;,t);\r\n\tSystem.out.println(&quot;B&quot;);\r\n\tNewThread t3=new NewThread(&quot;3&quot;,t);\r\n\tSystem.out.println(&quot;C&quot;);\r\n\t//join is similar to wait for processes. Parent thread(main) waits for children to terminate\r\n\t//note that without synchronization, all three threads execute simultaneously.\r\n\ttry {\r\n\tt1.t.join();\r\n\tt2.t.join();\r\n\tt3.t.join();\r\n\t}\r\n\tcatch(InterruptedException e) {\r\n\t\te.printStackTrace();\r\n\t}\r\n\tfor(int i=0;i&lt;5;i++) {\r\n\t\tSystem.out.println(&quot;main thread&quot;+&quot; &quot;+i);\r\n\t\ttry {\r\n\t\t\tThread.sleep(1000);\r\n\t\t}\r\n\t\tcatch(InterruptedException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t}\r\n}\r\n}\r\n```\r\n\r\n\r\n\r\n\r\nThe expected output should have been t1 thread output, A, t2, B, t3, C and then main thread. Because of the order in which the print and thread creation statements are present. And also because synchronised keyword has been added to synchronize the threads. But the observed output is as follows:\r\n\r\nA,B,C,t1,t3,t2,main\r\n\r\nWhat could be the reason for the deviation between the expected and the observed behavior?\r\nI believe that Java is Synchronous so only after thread t1 is created and printed then system print (A) should work?","title":"Java Thread Synchronization does not work as expected","body":"<p>The following is a Java Program demonstrating Threading and Synchronization in Java.</p>\n<pre><code>    class AB{\n    synchronized public void print(String name) {\n        for(int i=0;i&lt;5;i++) {\n            System.out.println(name+&quot; &quot;+i);\n            try {\n                Thread.sleep(1000);\n            }\n            catch(InterruptedException e) {\n                e.printStackTrace();\n            }\n        }\n    }\n}\n//extending thread is another way. Usually we use Runnable Interface\nclass NewThread implements Runnable{\n    String name;\n    AB obj;\n    Thread t;\n    NewThread(String name,AB o){\n        this.name=name;\n        obj=o;\n        t=new Thread(this,name);\n        t.start();\n    }\n    \n    public void run() {\n        obj.print(name);\n    }\n}\n\npublic class ThreadExample {\npublic static void main(String g[]) {\n    AB t=new AB();\n    NewThread t1=new NewThread(&quot;1&quot;,t);\n    System.out.println(&quot;A&quot;);\n    NewThread t2=new NewThread(&quot;2&quot;,t);\n    System.out.println(&quot;B&quot;);\n    NewThread t3=new NewThread(&quot;3&quot;,t);\n    System.out.println(&quot;C&quot;);\n    //join is similar to wait for processes. Parent thread(main) waits for children to terminate\n    //note that without synchronization, all three threads execute simultaneously.\n    try {\n    t1.t.join();\n    t2.t.join();\n    t3.t.join();\n    }\n    catch(InterruptedException e) {\n        e.printStackTrace();\n    }\n    for(int i=0;i&lt;5;i++) {\n        System.out.println(&quot;main thread&quot;+&quot; &quot;+i);\n        try {\n            Thread.sleep(1000);\n        }\n        catch(InterruptedException e) {\n            e.printStackTrace();\n        }\n    }\n}\n}\n</code></pre>\n<p>The expected output should have been t1 thread output, A, t2, B, t3, C and then main thread. Because of the order in which the print and thread creation statements are present. And also because synchronised keyword has been added to synchronize the threads. But the observed output is as follows:</p>\n<p>A,B,C,t1,t3,t2,main</p>\n<p>What could be the reason for the deviation between the expected and the observed behavior?\nI believe that Java is Synchronous so only after thread t1 is created and printed then system print (A) should work?</p>\n"},{"tags":["java","htmlunit"],"answers":[{"comments":[{"owner":{"account_id":6163228,"reputation":2754,"user_id":4804091,"display_name":"RBRi"},"score":0,"creation_date":1689250097,"post_id":76678737,"comment_id":135188484,"body_markdown":"Have an impl of the support ready; as soon as the issue arrives we can start testing it","body":"Have an impl of the support ready; as soon as the issue arrives we can start testing it"}],"tags":[],"owner":{"account_id":6163228,"reputation":2754,"user_id":4804091,"display_name":"RBRi"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689246904,"creation_date":1689246904,"answer_id":76678737,"question_id":76677648,"body_markdown":"So far (HtmlUnit 3.3.0) there is no real public API to do interaction with the storage outside of the js support.\r\n\r\nPlease open an issue at github and we can work together to add some methods to support your case (and maybe some documentation also).","title":"How to load a &quot;local storage&quot; value to HtmlUnit web client?","body":"<p>So far (HtmlUnit 3.3.0) there is no real public API to do interaction with the storage outside of the js support.</p>\n<p>Please open an issue at github and we can work together to add some methods to support your case (and maybe some documentation also).</p>\n"},{"tags":[],"owner":{"account_id":6163228,"reputation":2754,"user_id":4804091,"display_name":"RBRi"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1689355416,"creation_date":1689355416,"answer_id":76689958,"question_id":76677648,"body_markdown":"Starting with version 3.4.0 there is a documented (https://www.htmlunit.org/details.html#Local.2FSession_Storage) way to do this.\r\n\r\n    try (WebClient webClient = new WebClient()) {\r\n\r\n        // get the local storage for the url\r\n        // the url has to match the page url you will load later\r\n        final Map&lt;String, String&gt; localStorage = webClient.getStorageHolder().getLocalStorage(url);\r\n\r\n\r\n        // place some data in the session storage\r\n        localStorage.put(&quot;myKey&quot;, &quot;myData&quot;);\r\n\r\n        // load the page that consumes the session storage data\r\n        webClient.getPage(url);\r\n\r\n        // make sure the new data are in\r\n        assertEquals(&quot;myNewData&quot;, localStorage.get(&quot;myNewKey&quot;));\r\n    }\r\n\r\n(Btw the latest 3.4.0-SNAPSHOT already constains this) \r\n","title":"How to load a &quot;local storage&quot; value to HtmlUnit web client?","body":"<p>Starting with version 3.4.0 there is a documented (<a href=\"https://www.htmlunit.org/details.html#Local.2FSession_Storage\" rel=\"nofollow noreferrer\">https://www.htmlunit.org/details.html#Local.2FSession_Storage</a>) way to do this.</p>\n<pre><code>try (WebClient webClient = new WebClient()) {\n\n    // get the local storage for the url\n    // the url has to match the page url you will load later\n    final Map&lt;String, String&gt; localStorage = webClient.getStorageHolder().getLocalStorage(url);\n\n\n    // place some data in the session storage\n    localStorage.put(&quot;myKey&quot;, &quot;myData&quot;);\n\n    // load the page that consumes the session storage data\n    webClient.getPage(url);\n\n    // make sure the new data are in\n    assertEquals(&quot;myNewData&quot;, localStorage.get(&quot;myNewKey&quot;));\n}\n</code></pre>\n<p>(Btw the latest 3.4.0-SNAPSHOT already constains this)</p>\n"}],"owner":{"account_id":412334,"reputation":33756,"user_id":785349,"accept_rate":94,"display_name":"quarks"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76689958,"answer_count":2,"score":0,"last_activity_date":1689355416,"creation_date":1689238924,"question_id":76677648,"body_markdown":"I&#39;m trying to load a *local storage* value into the HtmlUnit web client before it loads a specific website:\r\n\r\n```\r\nHtmlPage initialPage = webClient.getPage(url);\r\n        if (httpHeadersSpec != null &amp;&amp; httpHeadersSpec.getLocal_storage() != null) {\r\n            for (StorageItemSpec item : httpHeadersSpec.getLocal_storage()) {\r\n                initialPage.executeJavaScript(\r\n                        &quot;localStorage.setItem(&#39;&quot; + item.getKey() + &quot;&#39;, &#39;&quot; + item.getValue() + &quot;&#39;);&quot;);\r\n            }\r\n        }\r\n\r\nHtmlPage page = webClient.getPage(url);\r\nwebClient.waitForBackgroundJavaScriptStartingBefore(3000);\r\nURL baseUrl = page.getFullyQualifiedUrl(page.getBaseURI());\r\n```\r\n\r\nThe problems are:\r\n\r\n 1. How do I check if the local storage value is loaded? \r\n 2. What is the correct approach to load a browser&#39;s local storage value to HtmlUnit before loading a page? ","title":"How to load a &quot;local storage&quot; value to HtmlUnit web client?","body":"<p>I'm trying to load a <em>local storage</em> value into the HtmlUnit web client before it loads a specific website:</p>\n<pre><code>HtmlPage initialPage = webClient.getPage(url);\n        if (httpHeadersSpec != null &amp;&amp; httpHeadersSpec.getLocal_storage() != null) {\n            for (StorageItemSpec item : httpHeadersSpec.getLocal_storage()) {\n                initialPage.executeJavaScript(\n                        &quot;localStorage.setItem('&quot; + item.getKey() + &quot;', '&quot; + item.getValue() + &quot;');&quot;);\n            }\n        }\n\nHtmlPage page = webClient.getPage(url);\nwebClient.waitForBackgroundJavaScriptStartingBefore(3000);\nURL baseUrl = page.getFullyQualifiedUrl(page.getBaseURI());\n</code></pre>\n<p>The problems are:</p>\n<ol>\n<li>How do I check if the local storage value is loaded?</li>\n<li>What is the correct approach to load a browser's local storage value to HtmlUnit before loading a page?</li>\n</ol>\n"},{"tags":["java","scala","playframework"],"comments":[{"owner":{"account_id":9727861,"reputation":2565,"user_id":7214091,"display_name":"Gast&#243;n Schabas"},"score":1,"creation_date":1689288404,"post_id":76683239,"comment_id":135196299,"body_markdown":"Could you share your build gradle? Or at least a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example)? Also not sure if it will be possible to use jdk 19 with play framework. They added [experimental support for jdk 17 in play 2.8](https://github.com/playframework/playframework/releases/tag/2.8.15) and it will be stable for play 2.9","body":"Could you share your build gradle? Or at least a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>? Also not sure if it will be possible to use jdk 19 with play framework. They added <a href=\"https://github.com/playframework/playframework/releases/tag/2.8.15\" rel=\"nofollow noreferrer\">experimental support for jdk 17 in play 2.8</a> and it will be stable for play 2.9"},{"owner":{"account_id":1021670,"reputation":479,"user_id":1031846,"accept_rate":83,"display_name":"raul782"},"score":0,"creation_date":1689299076,"post_id":76683239,"comment_id":135197202,"body_markdown":"I actually git clone the xef repo and tried to build it. The reason I wanted to do that is because,  I was running a project with play(from source) and xef, which worked just fine, but I was getting some issues with the prompts, hence, I wanted to dive deeper into Xef source code, and that’s why I faced this issue, because I wanted to build it from source.","body":"I actually git clone the xef repo and tried to build it. The reason I wanted to do that is because,  I was running a project with play(from source) and xef, which worked just fine, but I was getting some issues with the prompts, hence, I wanted to dive deeper into Xef source code, and that’s why I faced this issue, because I wanted to build it from source."},{"owner":{"account_id":9727861,"reputation":2565,"user_id":7214091,"display_name":"Gast&#243;n Schabas"},"score":1,"creation_date":1689349347,"post_id":76683239,"comment_id":135205708,"body_markdown":"Instead of follow the suggestion in the question about how to install missing dependency in sdkman, have you tried what sdkman says in its docs about [how to install a local version](https://sdkman.io/usage#localversion). Maybe that could help with the problem of not finding a local install.","body":"Instead of follow the suggestion in the question about how to install missing dependency in sdkman, have you tried what sdkman says in its docs about <a href=\"https://sdkman.io/usage#localversion\" rel=\"nofollow noreferrer\">how to install a local version</a>. Maybe that could help with the problem of not finding a local install."},{"owner":{"account_id":9727861,"reputation":2565,"user_id":7214091,"display_name":"Gast&#243;n Schabas"},"score":1,"creation_date":1689349487,"post_id":76683239,"comment_id":135205746,"body_markdown":"As I said before, without a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example) is hard to guess. please edit your post trying to detail what were the steps yo followed to get there and share how your `build.gradle` looks like","body":"As I said before, without a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> is hard to guess. please edit your post trying to detail what were the steps yo followed to get there and share how your <code>build.gradle</code> looks like"},{"owner":{"account_id":1021670,"reputation":479,"user_id":1031846,"accept_rate":83,"display_name":"raul782"},"score":0,"creation_date":1689354083,"post_id":76683239,"comment_id":135206726,"body_markdown":"Thanks a lot @Gast&#243;nSchabas Installing the local version fixed it. I didn&#39;t read the docs for a local installation :/","body":"Thanks a lot @Gast&#243;nSchabas Installing the local version fixed it. I didn&#39;t read the docs for a local installation :/"}],"answers":[{"tags":[],"owner":{"account_id":1021670,"reputation":479,"user_id":1031846,"accept_rate":83,"display_name":"raul782"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689354811,"creation_date":1689354811,"answer_id":76689890,"question_id":76683239,"body_markdown":"Thanks to @Gast&#243;nSchabas for helping me in the comments.\r\n\r\nSo in summary, I cloned the repository\r\n\r\n    git clone git@github.com:xebia-functional/xef.git\r\n    cd xef\r\n    ./gradlew build\r\n\r\nPretty much I needed to download the gz file from adoptium and then install it locally using the `sdk` command:\r\n\r\n\r\n    sdk install java 19.0.2-tem ~/Downloads/jdk-19.0.2+7/Contents/Home\r\n\r\nI also needed to install java 11:\r\n\r\n    sdk install java 11.0.19-tem\r\n\r\nAnd finally:\r\n\r\n    ./gradlew build --stacktrace\r\n\r\nWorked like a charm.\r\n","title":"Building Xef with Java 19 fails","body":"<p>Thanks to @GastónSchabas for helping me in the comments.</p>\n<p>So in summary, I cloned the repository</p>\n<pre><code>git clone git@github.com:xebia-functional/xef.git\ncd xef\n./gradlew build\n</code></pre>\n<p>Pretty much I needed to download the gz file from adoptium and then install it locally using the <code>sdk</code> command:</p>\n<pre><code>sdk install java 19.0.2-tem ~/Downloads/jdk-19.0.2+7/Contents/Home\n</code></pre>\n<p>I also needed to install java 11:</p>\n<pre><code>sdk install java 11.0.19-tem\n</code></pre>\n<p>And finally:</p>\n<pre><code>./gradlew build --stacktrace\n</code></pre>\n<p>Worked like a charm.</p>\n"}],"owner":{"account_id":1021670,"reputation":479,"user_id":1031846,"accept_rate":83,"display_name":"raul782"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76689890,"answer_count":1,"score":0,"last_activity_date":1689355179,"creation_date":1689282366,"question_id":76683239,"body_markdown":"I&#39;m integrating Xef with the latest snapshot of Playframework that supports scala 3.3 and I bumped into an issue, so I went and git cloned Xef.ai repo and I started getting issues by trying to build from source the Xef project.\r\n\r\n    git clone git@github.com:xebia-functional/xef.git\r\n    cd xef\r\n    ./gradlew build --stacktrace\r\n\r\n\r\nI&#39;m using sdkman to manage my multiple java versions.\r\n\r\nHowever, I&#39;ve noticed that `sdk ls java` doesn&#39;t have java 19.\r\nSo I tried to build Xef with java 20, but It looks like the project needs to be upgraded to Kotlin 1.9 so that target is available. Given that&#39;s a bigger lift.\r\nSo I downloaded java 19 from https://adoptium.net/temurin/releases/?version=19\r\n\r\nI had to follow this SO https://stackoverflow.com/questions/55809928/sdkman-is-missing-a-specific-java-version to accomplish my goal.\r\n\r\nBut now I&#39;m facing the following issue, I&#39;m kind of new to Kotlin, my PATH is correctly setup: /Users/raul/.sdkman/candidates/java/19.0.2-tem/bin, I wonder what else is needed, will keep looking;\r\n\r\n    ./gradlew build\r\n    Type-safe project accessors is an incubating feature.\r\n\r\n    &gt; Configure project :kotlin-loom\r\n    Kotlin DSL property assignment is an incubating feature.\r\n\r\n    &gt; Configure project :xef-scala\r\n    signing.keyId Gradle property and SIGNING_KEY_ID environment variable are missing\r\n    signing.key Gradle property and SIGNING_KEY environment variable are missing\r\n    signing.passphrase Gradle property and SIGNING_KEY_PASSPHRASE environment variable are missing\r\n\r\n    &gt; Configure project :xef-scala-cats\r\n    signing.keyId Gradle property and SIGNING_KEY_ID environment variable are missing\r\n    signing.key Gradle property and SIGNING_KEY environment variable are missing\r\n    signing.passphrase Gradle property and SIGNING_KEY_PASSPHRASE environment variable are missing\r\n    Path for java installation &#39;/Users/raul/.sdkman/candidates/java/19.0.2-tem/Contents/Home&#39; (SDKMAN!) does not contain a java executable\r\n    Path for java installation &#39;/Users/raul/.sdkman/candidates/java/19.0.2-tem/Contents/Home&#39; (Current JVM) does not contain a java executable\r\n    Path for java installation &#39;/Users/raul/.sdkman/candidates/java/19.0.2-tem/Contents/Home&#39; (SDKMAN!) does not contain a java executable\r\n\r\n    FAILURE: Build failed with an exception.\r\n\r\n    * What went wrong:\r\n    Could not determine the dependencies of task &#39;:kotlin-loom:compileKotlin&#39;.\r\n    &gt; No matching toolchains found for requested specification: {languageVersion=19, vendor=any, implementation=vendor-specific}.\r\n    &gt; No locally installed toolchains match (see https://docs.gradle.org/8.1/userguide/toolchains.html#sec:auto_detection) and toolchain download repositories have not been configured (see https://docs.gradle.org/8.1/userguide/toolchains.html#sub:download_repositories).\r\n\r\n    * Try:\r\n    &gt; Run with --info or --debug option to get more log output.\r\n    &gt; Run with --scan to get full insights.\r\n\r\n        * Exception is:\r\n      org.gradle.api.internal.tasks.TaskDependencyResolveException: Could not determine the dependencies of task &#39;:kotlin-loom:compileKotlin&#39;.\r\n      at org.gradle.api.internal.tasks.CachingTaskDependencyResolveContext.getDependencies(CachingTaskDependencyResolveContext.java:68)\r\n      at org.gradle.execution.plan.TaskDependencyResolver.resolveDependenciesFor(TaskDependencyResolver.java:49)\r\n      at org.gradle.execution.plan.LocalTaskNode.getDependencies(LocalTaskNode.java:148)\r\n      at org.gradle.execution.plan.LocalTaskNode.resolveDependencies(LocalTaskNode.java:122)\r\n      at org.gradle.execution.plan.DefaultExecutionPlan.discoverNodeRelationships(DefaultExecutionPlan.java:184)\r\n      at org.gradle.execution.plan.DefaultExecutionPlan.doAddEntryNodes(DefaultExecutionPlan.java:156)\r\n      at org.gradle.execution.plan.DefaultExecutionPlan.addEntryTasks(DefaultExecutionPlan.java:131)\r\n      at org.gradle.execution.plan.DefaultExecutionPlan.addEntryTasks(DefaultExecutionPlan.java:123)\r\n      at org.gradle.execution.TaskNameResolvingBuildTaskScheduler.scheduleRequestedTasks(TaskNameResolvingBuildTaskScheduler.java:53)\r\n      at org.gradle.execution.DefaultTasksBuildTaskScheduler.scheduleRequestedTasks(DefaultTasksBuildTaskScheduler.java:72)\r\n      at org.gradle.initialization.DefaultTaskExecutionPreparer.lambda$scheduleRequestedTasks$0(DefaultTaskExecutionPreparer.java:46)\r\n      at org.gradle.internal.Factories$1.create(Factories.java:31)\r\n      at org.gradle.internal.work.DefaultWorkerLeaseService.withReplacedLocks(DefaultWorkerLeaseService.java:345)\r\n      at org.gradle.api.internal.project.DefaultProjectStateRegistry$DefaultBuildProjectRegistry.withMutableStateOfAllProjects(DefaultProjectStateRegistry.java:228)\r\n      at org.gradle.api.internal.project.DefaultProjectStateRegistry$DefaultBuildProjectRegistry.withMutableStateOfAllProjects(DefaultProjectStateRegistry.java:221)\r\n      at org.gradle.initialization.DefaultTaskExecutionPreparer.scheduleRequestedTasks(DefaultTaskExecutionPreparer.java:45)\r\n      at org.gradle.initialization.VintageBuildModelController.lambda$scheduleRequestedTasks$0(VintageBuildModelController.java:76)\r\n      at org.gradle.internal.model.StateTransitionController.lambda$inState$1(StateTransitionController.java:99)\r\n      at org.gradle.internal.model.StateTransitionController.lambda$inState$2(StateTransitionController.java:114)\r\n      at org.gradle.internal.work.DefaultSynchronizer.withLock(DefaultSynchronizer.java:44)\r\n      at org.gradle.internal.model.StateTransitionController.inState(StateTransitionController.java:110)\r\n      at org.gradle.internal.model.StateTransitionController.inState(StateTransitionController.java:98)\r\n      at org.gradle.initialization.VintageBuildModelController.scheduleRequestedTasks(VintageBuildModelController.java:76)\r\n      at org.gradle.internal.build.DefaultBuildLifecycleController$DefaultWorkGraphBuilder.addRequestedTasks(DefaultBuildLifecycleController.java:282)\r\n      at org.gradle.internal.buildtree.DefaultBuildTreeWorkPreparer.lambda$scheduleRequestedTasks$0(DefaultBuildTreeWorkPreparer.java:38)\r\n      at org.gradle.internal.build.DefaultBuildLifecycleController.lambda$populateWorkGraph$7(DefaultBuildLifecycleController.java:178)\r\n      at org.gradle.internal.build.DefaultBuildWorkPreparer.populateWorkGraph(DefaultBuildWorkPreparer.java:42)\r\n      at org.gradle.internal.build.BuildOperationFiringBuildWorkPreparer$PopulateWorkGraph.populateTaskGraph(BuildOperationFiringBuildWorkPreparer.java:115)\r\n      at org.gradle.internal.build.BuildOperationFiringBuildWorkPreparer$PopulateWorkGraph.run(BuildOperationFiringBuildWorkPreparer.java:101)\r\n      at org.gradle.internal.operations.DefaultBuildOperationRunner$1.execute(DefaultBuildOperationRunner.java:29)\r\n      at org.gradle.internal.operations.DefaultBuildOperationRunner$1.execute(DefaultBuildOperationRunner.java:26)\r\n      at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)\r\n      at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)\r\n      at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)\r\n      at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)\r\n      at org.gradle.internal.operations.DefaultBuildOperationRunner.run(DefaultBuildOperationRunner.java:47)\r\n      at org.gradle.internal.operations.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:68)\r\n      at org.gradle.internal.build.BuildOperationFiringBuildWorkPreparer.populateWorkGraph(BuildOperationFiringBuildWorkPreparer.java:74)\r\n      at org.gradle.internal.build.DefaultBuildLifecycleController.lambda$populateWorkGraph$8(DefaultBuildLifecycleController.java:178)\r\n      at org.gradle.internal.model.StateTransitionController.lambda$inState$1(StateTransitionController.java:99)\r\n      at org.gradle.internal.model.StateTransitionController.lambda$inState$2(StateTransitionController.java:114)\r\n      at org.gradle.internal.work.DefaultSynchronizer.withLock(DefaultSynchronizer.java:44)\r\n      at org.gradle.internal.model.StateTransitionController.inState(StateTransitionController.java:110)\r\n      at org.gradle.internal.model.StateTransitionController.inState(StateTransitionController.java:98)\r\n      at org.gradle.internal.build.DefaultBuildLifecycleController.populateWorkGraph(DefaultBuildLifecycleController.java:178)\r\n      at org.gradle.internal.build.DefaultBuildWorkGraphController$DefaultBuildWorkGraph.populateWorkGraph(DefaultBuildWorkGraphController.java:167)\r\n      at org.gradle.composite.internal.DefaultBuildController.populateWorkGraph(DefaultBuildController.java:73)\r\n      at org.gradle.composite.internal.DefaultIncludedBuildTaskGraph$DefaultBuildTreeWorkGraphBuilder.withWorkGraph(DefaultIncludedBuildTaskGraph.java:150)\r\n      at org.gradle.internal.buildtree.DefaultBuildTreeWorkPreparer.lambda$scheduleRequestedTasks$1(DefaultBuildTreeWorkPreparer.java:38)\r\n      at org.gradle.composite.internal.DefaultIncludedBuildTaskGraph$DefaultBuildTreeWorkGraph$1.run(DefaultIncludedBuildTaskGraph.java:197)\r\n      at org.gradle.internal.operations.DefaultBuildOperationRunner$1.execute(DefaultBuildOperationRunner.java:29)\r\n      at org.gradle.internal.operations.DefaultBuildOperationRunner$1.execute(DefaultBuildOperationRunner.java:26)\r\n      at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)\r\n      at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)\r\n      at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)\r\n      at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)\r\n      at org.gradle.internal.operations.DefaultBuildOperationRunner.run(DefaultBuildOperationRunner.java:47)\r\n      at org.gradle.internal.operations.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:68)\r\n      at org.gradle.composite.internal.DefaultIncludedBuildTaskGraph$DefaultBuildTreeWorkGraph.scheduleWork(DefaultIncludedBuildTaskGraph.java:192)\r\n      at org.gradle.internal.buildtree.DefaultBuildTreeWorkPreparer.scheduleRequestedTasks(DefaultBuildTreeWorkPreparer.java:37)\r\n      at org.gradle.configurationcache.VintageBuildTreeWorkController$scheduleAndRunRequestedTasks$1.apply(VintageBuildTreeWorkController.kt:36)\r\n      at org.gradle.configurationcache.VintageBuildTreeWorkController$scheduleAndRunRequestedTasks$1.apply(VintageBuildTreeWorkController.kt:35)\r\n      at org.gradle.composite.internal.DefaultIncludedBuildTaskGraph.withNewWorkGraph(DefaultIncludedBuildTaskGraph.java:109)\r\n      at org.gradle.configurationcache.VintageBuildTreeWorkController.scheduleAndRunRequestedTasks(VintageBuildTreeWorkController.kt:35)\r\n      at org.gradle.internal.buildtree.DefaultBuildTreeLifecycleController.lambda$scheduleAndRunTasks$1(DefaultBuildTreeLifecycleController.java:68)\r\n      at org.gradle.internal.buildtree.DefaultBuildTreeLifecycleController.lambda$runBuild$4(DefaultBuildTreeLifecycleController.java:98)\r\n      at org.gradle.internal.model.StateTransitionController.lambda$transition$6(StateTransitionController.java:169)\r\n      at org.gradle.internal.model.StateTransitionController.doTransition(StateTransitionController.java:266)\r\n      at org.gradle.internal.model.StateTransitionController.lambda$transition$7(StateTransitionController.java:169)\r\n      at org.gradle.internal.work.DefaultSynchronizer.withLock(DefaultSynchronizer.java:44)\r\n      at org.gradle.internal.model.StateTransitionController.transition(StateTransitionController.java:169)\r\n      at org.gradle.internal.buildtree.DefaultBuildTreeLifecycleController.runBuild(DefaultBuildTreeLifecycleController.java:95)\r\n      at org.gradle.internal.buildtree.DefaultBuildTreeLifecycleController.scheduleAndRunTasks(DefaultBuildTreeLifecycleController.java:68)\r\n      at org.gradle.internal.buildtree.DefaultBuildTreeLifecycleController.scheduleAndRunTasks(DefaultBuildTreeLifecycleController.java:63)\r\n      at org.gradle.tooling.internal.provider.ExecuteBuildActionRunner.run(ExecuteBuildActionRunner.java:31)\r\n      at org.gradle.launcher.exec.ChainingBuildActionRunner.run(ChainingBuildActionRunner.java:35)\r\n      at org.gradle.internal.buildtree.ProblemReportingBuildActionRunner.run(ProblemReportingBuildActionRunner.java:49)\r\n      at org.gradle.launcher.exec.BuildOutcomeReportingBuildActionRunner.run(BuildOutcomeReportingBuildActionRunner.java:65)\r\n      at org.gradle.tooling.internal.provider.FileSystemWatchingBuildActionRunner.run(FileSystemWatchingBuildActionRunner.java:140)\r\n      at org.gradle.launcher.exec.BuildCompletionNotifyingBuildActionRunner.run(BuildCompletionNotifyingBuildActionRunner.java:41)\r\n      at org.gradle.launcher.exec.RootBuildLifecycleBuildActionExecutor.lambda$execute$0(RootBuildLifecycleBuildActionExecutor.java:40)\r\n      at org.gradle.composite.internal.DefaultRootBuildState.run(DefaultRootBuildState.java:122)\r\n      at org.gradle.launcher.exec.RootBuildLifecycleBuildActionExecutor.execute(RootBuildLifecycleBuildActionExecutor.java:40)\r\n      at org.gradle.internal.buildtree.InitDeprecationLoggingActionExecutor.execute(InitDeprecationLoggingActionExecutor.java:58)\r\n      at org.gradle.internal.buildtree.DefaultBuildTreeContext.execute(DefaultBuildTreeContext.java:40)\r\n      at org.gradle.launcher.exec.BuildTreeLifecycleBuildActionExecutor.lambda$execute$0(BuildTreeLifecycleBuildActionExecutor.java:65)\r\n      at org.gradle.internal.buildtree.BuildTreeState.run(BuildTreeState.java:53)\r\n      at org.gradle.launcher.exec.BuildTreeLifecycleBuildActionExecutor.execute(BuildTreeLifecycleBuildActionExecutor.java:65)\r\n      at org.gradle.launcher.exec.RunAsBuildOperationBuildActionExecutor$3.call(RunAsBuildOperationBuildActionExecutor.java:61)\r\n      at org.gradle.launcher.exec.RunAsBuildOperationBuildActionExecutor$3.call(RunAsBuildOperationBuildActionExecutor.java:57)\r\n      at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:204)\r\n      at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:199)\r\n      at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)\r\n      at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)\r\n      at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)\r\n      at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)\r\n      at org.gradle.internal.operations.DefaultBuildOperationRunner.call(DefaultBuildOperationRunner.java:53)\r\n      at org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:73)\r\n      at org.gradle.launcher.exec.RunAsBuildOperationBuildActionExecutor.execute(RunAsBuildOperationBuildActionExecutor.java:57)\r\n      at org.gradle.launcher.exec.RunAsWorkerThreadBuildActionExecutor.lambda$execute$0(RunAsWorkerThreadBuildActionExecutor.java:36)\r\n      at org.gradle.internal.work.DefaultWorkerLeaseService.withLocks(DefaultWorkerLeaseService.java:249)\r\n      at org.gradle.internal.work.DefaultWorkerLeaseService.runAsWorkerThread(DefaultWorkerLeaseService.java:109)\r\n      at org.gradle.launcher.exec.RunAsWorkerThreadBuildActionExecutor.execute(RunAsWorkerThreadBuildActionExecutor.java:36)\r\n      at org.gradle.tooling.internal.provider.continuous.ContinuousBuildActionExecutor.execute(ContinuousBuildActionExecutor.java:110)\r\n      at org.gradle.tooling.internal.provider.SubscribableBuildActionExecutor.execute(SubscribableBuildActionExecutor.java:64)\r\n      at org.gradle.internal.session.DefaultBuildSessionContext.execute(DefaultBuildSessionContext.java:46)\r\n      at org.gradle.tooling.internal.provider.BuildSessionLifecycleBuildActionExecuter$ActionImpl.apply(BuildSessionLifecycleBuildActionExecuter.java:100)\r\n      at org.gradle.tooling.internal.provider.BuildSessionLifecycleBuildActionExecuter$ActionImpl.apply(BuildSessionLifecycleBuildActionExecuter.java:88)\r\n      at org.gradle.internal.session.BuildSessionState.run(BuildSessionState.java:69)\r\n      at org.gradle.tooling.internal.provider.BuildSessionLifecycleBuildActionExecuter.execute(BuildSessionLifecycleBuildActionExecuter.java:62)\r\n      at org.gradle.tooling.internal.provider.BuildSessionLifecycleBuildActionExecuter.execute(BuildSessionLifecycleBuildActionExecuter.java:41)\r\n      at org.gradle.tooling.internal.provider.StartParamsValidatingActionExecuter.execute(StartParamsValidatingActionExecuter.java:64)\r\n      at org.gradle.tooling.internal.provider.StartParamsValidatingActionExecuter.execute(StartParamsValidatingActionExecuter.java:32)\r\n      at org.gradle.tooling.internal.provider.SessionFailureReportingActionExecuter.execute(SessionFailureReportingActionExecuter.java:50)\r\n      at org.gradle.tooling.internal.provider.SessionFailureReportingActionExecuter.execute(SessionFailureReportingActionExecuter.java:38)\r\n      at org.gradle.tooling.internal.provider.SetupLoggingActionExecuter.execute(SetupLoggingActionExecuter.java:47)\r\n      at org.gradle.tooling.internal.provider.SetupLoggingActionExecuter.execute(SetupLoggingActionExecuter.java:31)\r\n      at org.gradle.launcher.daemon.server.exec.ExecuteBuild.doBuild(ExecuteBuild.java:65)\r\n      at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:37)\r\n      at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\r\n      at org.gradle.launcher.daemon.server.exec.WatchForDisconnection.execute(WatchForDisconnection.java:39)\r\n      at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\r\n      at org.gradle.launcher.daemon.server.exec.ResetDeprecationLogger.execute(ResetDeprecationLogger.java:29)\r\n      at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\r\n      at org.gradle.launcher.daemon.server.exec.RequestStopIfSingleUsedDaemon.execute(RequestStopIfSingleUsedDaemon.java:35)\r\n      at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\r\n      at org.gradle.launcher.daemon.server.exec.ForwardClientInput$2.create(ForwardClientInput.java:78)\r\n      at org.gradle.launcher.daemon.server.exec.ForwardClientInput$2.create(ForwardClientInput.java:75)\r\n      at org.gradle.util.internal.Swapper.swap(Swapper.java:38)\r\n      at org.gradle.launcher.daemon.server.exec.ForwardClientInput.execute(ForwardClientInput.java:75)\r\n      at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\r\n      at org.gradle.launcher.daemon.server.exec.LogAndCheckHealth.execute(LogAndCheckHealth.java:64)\r\n      at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\r\n      at org.gradle.launcher.daemon.server.exec.LogToClient.doBuild(LogToClient.java:63)\r\n      at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:37)\r\n      at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\r\n      at org.gradle.launcher.daemon.server.exec.EstablishBuildEnvironment.doBuild(EstablishBuildEnvironment.java:84)\r\n      at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:37)\r\n      at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\r\n      at org.gradle.launcher.daemon.server.exec.StartBuildOrRespondWithBusy$1.run(StartBuildOrRespondWithBusy.java:52)\r\n      at org.gradle.launcher.daemon.server.DaemonStateCoordinator$1.run(DaemonStateCoordinator.java:297)\r\n      at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:64)\r\n      at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:49)\r\n      Caused by: org.gradle.jvm.toolchain.internal.NoToolchainAvailableException: No matching toolchains found for requested specification: {languageVersion=19, vendor=any, implementation=vendor-specific}.\r\n      at org.gradle.jvm.toolchain.internal.JavaToolchainQueryService.downloadToolchain(JavaToolchainQueryService.java:167)\r\n      at org.gradle.jvm.toolchain.internal.JavaToolchainQueryService.query(JavaToolchainQueryService.java:143)\r\n      at org.gradle.jvm.toolchain.internal.JavaToolchainQueryService.lambda$resolveToolchain$1(JavaToolchainQueryService.java:109)\r\n      at org.gradle.jvm.toolchain.internal.JavaToolchainQueryService.resolveToolchain(JavaToolchainQueryService.java:107)\r\n      at org.gradle.jvm.toolchain.internal.JavaToolchainQueryService.lambda$findMatchingToolchain$0(JavaToolchainQueryService.java:88)\r\n      at org.gradle.api.internal.provider.DefaultProvider.calculateOwnValue(DefaultProvider.java:72)\r\n      at org.gradle.api.internal.provider.AbstractMinimalProvider.calculateValue(AbstractMinimalProvider.java:108)\r\n      at org.gradle.api.internal.provider.WithSideEffectProvider.calculateOwnValue(WithSideEffectProvider.java:54)\r\n      at org.gradle.api.internal.provider.AbstractMinimalProvider.calculateValue(AbstractMinimalProvider.java:108)\r\n      at org.gradle.api.internal.provider.TransformBackedProvider.calculateOwnValue(TransformBackedProvider.java:82)\r\n      at org.gradle.api.internal.provider.AbstractMinimalProvider.calculateValue(AbstractMinimalProvider.java:108)\r\n      at org.gradle.api.internal.provider.FlatMapProvider.calculateOwnValue(FlatMapProvider.java:50)\r\n      at org.gradle.api.internal.provider.AbstractMinimalProvider.calculateValue(AbstractMinimalProvider.java:108)\r\n      at org.gradle.api.internal.provider.TransformBackedProvider.calculateOwnValue(TransformBackedProvider.java:82)\r\n      at org.gradle.api.internal.provider.AbstractMinimalProvider.calculateValue(AbstractMinimalProvider.java:108)\r\n      at org.gradle.api.internal.provider.AbstractMinimalProvider.withFinalValue(AbstractMinimalProvider.java:164)\r\n      at org.gradle.api.internal.provider.DefaultProperty.finalValue(DefaultProperty.java:133)\r\n      at org.gradle.api.internal.provider.DefaultProperty.finalValue(DefaultProperty.java:26)\r\n      at org.gradle.api.internal.provider.AbstractProperty.finalizeNow(AbstractProperty.java:245)\r\n      at org.gradle.api.internal.provider.AbstractProperty.beforeRead(AbstractProperty.java:239)\r\n      at org.gradle.api.internal.provider.AbstractProperty.calculateOwnValue(AbstractProperty.java:135)\r\n      at org.gradle.api.internal.provider.AbstractMinimalProvider.getOrNull(AbstractMinimalProvider.java:98)\r\n      at org.gradle.internal.properties.annotations.AbstractTypeMetadataWalker$InstanceTypeMetadataWalker.lambda$walkNestedProvider$0(AbstractTypeMetadataWalker.java:142)\r\n      at org.gradle.internal.properties.annotations.AbstractTypeMetadataWalker$InstanceTypeMetadataWalker.walkNestedChild(AbstractTypeMetadataWalker.java:190)\r\n      at org.gradle.internal.properties.annotations.AbstractTypeMetadataWalker$InstanceTypeMetadataWalker.walkNestedProvider(AbstractTypeMetadataWalker.java:141)\r\n      at org.gradle.internal.properties.annotations.AbstractTypeMetadataWalker$InstanceTypeMetadataWalker.walkNestedProvider(AbstractTypeMetadataWalker.java:123)\r\n      at org.gradle.internal.properties.annotations.AbstractTypeMetadataWalker.walkNested(AbstractTypeMetadataWalker.java:60)\r\n      at org.gradle.internal.properties.annotations.AbstractTypeMetadataWalker.lambda$walkChildren$3(AbstractTypeMetadataWalker.java:85)\r\n      at org.gradle.internal.properties.annotations.AbstractTypeMetadataWalker$InstanceTypeMetadataWalker.walkNestedChild(AbstractTypeMetadataWalker.java:196)\r\n      at org.gradle.internal.properties.annotations.AbstractTypeMetadataWalker$InstanceTypeMetadataWalker.walkNestedChild(AbstractTypeMetadataWalker.java:177)\r\n      at org.gradle.internal.properties.annotations.AbstractTypeMetadataWalker$InstanceTypeMetadataWalker.walkNestedChild(AbstractTypeMetadataWalker.java:123)\r\n      at org.gradle.internal.properties.annotations.AbstractTypeMetadataWalker.lambda$walkChildren$4(AbstractTypeMetadataWalker.java:85)\r\n      at org.gradle.internal.properties.annotations.AbstractTypeMetadataWalker.walkChildren(AbstractTypeMetadataWalker.java:83)\r\n      at org.gradle.internal.properties.annotations.AbstractTypeMetadataWalker.walk(AbstractTypeMetadataWalker.java:53)\r\n      at org.gradle.internal.properties.bean.DefaultPropertyWalker.visitProperties(DefaultPropertyWalker.java:64)\r\n      at org.gradle.api.internal.tasks.TaskPropertyUtils.visitAnnotatedProperties(TaskPropertyUtils.java:58)\r\n      at org.gradle.api.internal.tasks.TaskPropertyUtils.visitProperties(TaskPropertyUtils.java:45)\r\n      at org.gradle.api.internal.tasks.TaskPropertyUtils.visitProperties(TaskPropertyUtils.java:35)\r\n      at org.gradle.api.internal.tasks.DefaultTaskInputs.visitDependencies(DefaultTaskInputs.java:195)\r\n      at org.gradle.api.internal.tasks.DefaultTaskDependency.visitDependencies(DefaultTaskDependency.java:112)\r\n      at org.gradle.api.internal.tasks.CachingTaskDependencyResolveContext$TaskGraphImpl.getNodeValues(CachingTaskDependencyResolveContext.java:103)\r\n      at org.gradle.internal.graph.CachingDirectedGraphWalker$GraphWithEmptyEdges.getNodeValues(CachingDirectedGraphWalker.java:213)\r\n      at org.gradle.internal.graph.CachingDirectedGraphWalker.doSearch(CachingDirectedGraphWalker.java:121)\r\n      at org.gradle.internal.graph.CachingDirectedGraphWalker.findValues(CachingDirectedGraphWalker.java:73)\r\n      at org.gradle.api.internal.tasks.CachingTaskDependencyResolveContext.getDependencies(CachingTaskDependencyResolveContext.java:66)\r\n      ... 142 more\r\n      Caused by: org.gradle.jvm.toolchain.internal.ToolchainDownloadFailedException: No locally installed toolchains match (see https://docs.gradle.org/8.1/userguide/toolchains.html#sec:auto_detection) and toolchain download repositories have not been configured (see https://docs.gradle.org/8.1/userguide/toolchains.html#sub:download_repositories).\r\n      at org.gradle.jvm.toolchain.internal.install.DefaultJavaToolchainProvisioningService.tryInstall(DefaultJavaToolchainProvisioningService.java:113)\r\n      at org.gradle.jvm.toolchain.internal.JavaToolchainQueryService.downloadToolchain(JavaToolchainQueryService.java:164)\r\n      ... 186 more\r\n    * Get more help at https://help.gradle.org\r\n\r\n    BUILD FAILED in 3s\r\n    10 actionable tasks: 10 up-to-date\r\n\r\n","title":"Building Xef with Java 19 fails","body":"<p>I'm integrating Xef with the latest snapshot of Playframework that supports scala 3.3 and I bumped into an issue, so I went and git cloned Xef.ai repo and I started getting issues by trying to build from source the Xef project.</p>\n<pre><code>git clone git@github.com:xebia-functional/xef.git\ncd xef\n./gradlew build --stacktrace\n</code></pre>\n<p>I'm using sdkman to manage my multiple java versions.</p>\n<p>However, I've noticed that <code>sdk ls java</code> doesn't have java 19.\nSo I tried to build Xef with java 20, but It looks like the project needs to be upgraded to Kotlin 1.9 so that target is available. Given that's a bigger lift.\nSo I downloaded java 19 from <a href=\"https://adoptium.net/temurin/releases/?version=19\" rel=\"nofollow noreferrer\">https://adoptium.net/temurin/releases/?version=19</a></p>\n<p>I had to follow this SO <a href=\"https://stackoverflow.com/questions/55809928/sdkman-is-missing-a-specific-java-version\">sdkman is missing a specific java version</a> to accomplish my goal.</p>\n<p>But now I'm facing the following issue, I'm kind of new to Kotlin, my PATH is correctly setup: /Users/raul/.sdkman/candidates/java/19.0.2-tem/bin, I wonder what else is needed, will keep looking;</p>\n<pre><code>./gradlew build\nType-safe project accessors is an incubating feature.\n\n&gt; Configure project :kotlin-loom\nKotlin DSL property assignment is an incubating feature.\n\n&gt; Configure project :xef-scala\nsigning.keyId Gradle property and SIGNING_KEY_ID environment variable are missing\nsigning.key Gradle property and SIGNING_KEY environment variable are missing\nsigning.passphrase Gradle property and SIGNING_KEY_PASSPHRASE environment variable are missing\n\n&gt; Configure project :xef-scala-cats\nsigning.keyId Gradle property and SIGNING_KEY_ID environment variable are missing\nsigning.key Gradle property and SIGNING_KEY environment variable are missing\nsigning.passphrase Gradle property and SIGNING_KEY_PASSPHRASE environment variable are missing\nPath for java installation '/Users/raul/.sdkman/candidates/java/19.0.2-tem/Contents/Home' (SDKMAN!) does not contain a java executable\nPath for java installation '/Users/raul/.sdkman/candidates/java/19.0.2-tem/Contents/Home' (Current JVM) does not contain a java executable\nPath for java installation '/Users/raul/.sdkman/candidates/java/19.0.2-tem/Contents/Home' (SDKMAN!) does not contain a java executable\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nCould not determine the dependencies of task ':kotlin-loom:compileKotlin'.\n&gt; No matching toolchains found for requested specification: {languageVersion=19, vendor=any, implementation=vendor-specific}.\n&gt; No locally installed toolchains match (see https://docs.gradle.org/8.1/userguide/toolchains.html#sec:auto_detection) and toolchain download repositories have not been configured (see https://docs.gradle.org/8.1/userguide/toolchains.html#sub:download_repositories).\n\n* Try:\n&gt; Run with --info or --debug option to get more log output.\n&gt; Run with --scan to get full insights.\n\n    * Exception is:\n  org.gradle.api.internal.tasks.TaskDependencyResolveException: Could not determine the dependencies of task ':kotlin-loom:compileKotlin'.\n  at org.gradle.api.internal.tasks.CachingTaskDependencyResolveContext.getDependencies(CachingTaskDependencyResolveContext.java:68)\n  at org.gradle.execution.plan.TaskDependencyResolver.resolveDependenciesFor(TaskDependencyResolver.java:49)\n  at org.gradle.execution.plan.LocalTaskNode.getDependencies(LocalTaskNode.java:148)\n  at org.gradle.execution.plan.LocalTaskNode.resolveDependencies(LocalTaskNode.java:122)\n  at org.gradle.execution.plan.DefaultExecutionPlan.discoverNodeRelationships(DefaultExecutionPlan.java:184)\n  at org.gradle.execution.plan.DefaultExecutionPlan.doAddEntryNodes(DefaultExecutionPlan.java:156)\n  at org.gradle.execution.plan.DefaultExecutionPlan.addEntryTasks(DefaultExecutionPlan.java:131)\n  at org.gradle.execution.plan.DefaultExecutionPlan.addEntryTasks(DefaultExecutionPlan.java:123)\n  at org.gradle.execution.TaskNameResolvingBuildTaskScheduler.scheduleRequestedTasks(TaskNameResolvingBuildTaskScheduler.java:53)\n  at org.gradle.execution.DefaultTasksBuildTaskScheduler.scheduleRequestedTasks(DefaultTasksBuildTaskScheduler.java:72)\n  at org.gradle.initialization.DefaultTaskExecutionPreparer.lambda$scheduleRequestedTasks$0(DefaultTaskExecutionPreparer.java:46)\n  at org.gradle.internal.Factories$1.create(Factories.java:31)\n  at org.gradle.internal.work.DefaultWorkerLeaseService.withReplacedLocks(DefaultWorkerLeaseService.java:345)\n  at org.gradle.api.internal.project.DefaultProjectStateRegistry$DefaultBuildProjectRegistry.withMutableStateOfAllProjects(DefaultProjectStateRegistry.java:228)\n  at org.gradle.api.internal.project.DefaultProjectStateRegistry$DefaultBuildProjectRegistry.withMutableStateOfAllProjects(DefaultProjectStateRegistry.java:221)\n  at org.gradle.initialization.DefaultTaskExecutionPreparer.scheduleRequestedTasks(DefaultTaskExecutionPreparer.java:45)\n  at org.gradle.initialization.VintageBuildModelController.lambda$scheduleRequestedTasks$0(VintageBuildModelController.java:76)\n  at org.gradle.internal.model.StateTransitionController.lambda$inState$1(StateTransitionController.java:99)\n  at org.gradle.internal.model.StateTransitionController.lambda$inState$2(StateTransitionController.java:114)\n  at org.gradle.internal.work.DefaultSynchronizer.withLock(DefaultSynchronizer.java:44)\n  at org.gradle.internal.model.StateTransitionController.inState(StateTransitionController.java:110)\n  at org.gradle.internal.model.StateTransitionController.inState(StateTransitionController.java:98)\n  at org.gradle.initialization.VintageBuildModelController.scheduleRequestedTasks(VintageBuildModelController.java:76)\n  at org.gradle.internal.build.DefaultBuildLifecycleController$DefaultWorkGraphBuilder.addRequestedTasks(DefaultBuildLifecycleController.java:282)\n  at org.gradle.internal.buildtree.DefaultBuildTreeWorkPreparer.lambda$scheduleRequestedTasks$0(DefaultBuildTreeWorkPreparer.java:38)\n  at org.gradle.internal.build.DefaultBuildLifecycleController.lambda$populateWorkGraph$7(DefaultBuildLifecycleController.java:178)\n  at org.gradle.internal.build.DefaultBuildWorkPreparer.populateWorkGraph(DefaultBuildWorkPreparer.java:42)\n  at org.gradle.internal.build.BuildOperationFiringBuildWorkPreparer$PopulateWorkGraph.populateTaskGraph(BuildOperationFiringBuildWorkPreparer.java:115)\n  at org.gradle.internal.build.BuildOperationFiringBuildWorkPreparer$PopulateWorkGraph.run(BuildOperationFiringBuildWorkPreparer.java:101)\n  at org.gradle.internal.operations.DefaultBuildOperationRunner$1.execute(DefaultBuildOperationRunner.java:29)\n  at org.gradle.internal.operations.DefaultBuildOperationRunner$1.execute(DefaultBuildOperationRunner.java:26)\n  at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)\n  at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)\n  at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)\n  at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)\n  at org.gradle.internal.operations.DefaultBuildOperationRunner.run(DefaultBuildOperationRunner.java:47)\n  at org.gradle.internal.operations.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:68)\n  at org.gradle.internal.build.BuildOperationFiringBuildWorkPreparer.populateWorkGraph(BuildOperationFiringBuildWorkPreparer.java:74)\n  at org.gradle.internal.build.DefaultBuildLifecycleController.lambda$populateWorkGraph$8(DefaultBuildLifecycleController.java:178)\n  at org.gradle.internal.model.StateTransitionController.lambda$inState$1(StateTransitionController.java:99)\n  at org.gradle.internal.model.StateTransitionController.lambda$inState$2(StateTransitionController.java:114)\n  at org.gradle.internal.work.DefaultSynchronizer.withLock(DefaultSynchronizer.java:44)\n  at org.gradle.internal.model.StateTransitionController.inState(StateTransitionController.java:110)\n  at org.gradle.internal.model.StateTransitionController.inState(StateTransitionController.java:98)\n  at org.gradle.internal.build.DefaultBuildLifecycleController.populateWorkGraph(DefaultBuildLifecycleController.java:178)\n  at org.gradle.internal.build.DefaultBuildWorkGraphController$DefaultBuildWorkGraph.populateWorkGraph(DefaultBuildWorkGraphController.java:167)\n  at org.gradle.composite.internal.DefaultBuildController.populateWorkGraph(DefaultBuildController.java:73)\n  at org.gradle.composite.internal.DefaultIncludedBuildTaskGraph$DefaultBuildTreeWorkGraphBuilder.withWorkGraph(DefaultIncludedBuildTaskGraph.java:150)\n  at org.gradle.internal.buildtree.DefaultBuildTreeWorkPreparer.lambda$scheduleRequestedTasks$1(DefaultBuildTreeWorkPreparer.java:38)\n  at org.gradle.composite.internal.DefaultIncludedBuildTaskGraph$DefaultBuildTreeWorkGraph$1.run(DefaultIncludedBuildTaskGraph.java:197)\n  at org.gradle.internal.operations.DefaultBuildOperationRunner$1.execute(DefaultBuildOperationRunner.java:29)\n  at org.gradle.internal.operations.DefaultBuildOperationRunner$1.execute(DefaultBuildOperationRunner.java:26)\n  at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)\n  at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)\n  at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)\n  at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)\n  at org.gradle.internal.operations.DefaultBuildOperationRunner.run(DefaultBuildOperationRunner.java:47)\n  at org.gradle.internal.operations.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:68)\n  at org.gradle.composite.internal.DefaultIncludedBuildTaskGraph$DefaultBuildTreeWorkGraph.scheduleWork(DefaultIncludedBuildTaskGraph.java:192)\n  at org.gradle.internal.buildtree.DefaultBuildTreeWorkPreparer.scheduleRequestedTasks(DefaultBuildTreeWorkPreparer.java:37)\n  at org.gradle.configurationcache.VintageBuildTreeWorkController$scheduleAndRunRequestedTasks$1.apply(VintageBuildTreeWorkController.kt:36)\n  at org.gradle.configurationcache.VintageBuildTreeWorkController$scheduleAndRunRequestedTasks$1.apply(VintageBuildTreeWorkController.kt:35)\n  at org.gradle.composite.internal.DefaultIncludedBuildTaskGraph.withNewWorkGraph(DefaultIncludedBuildTaskGraph.java:109)\n  at org.gradle.configurationcache.VintageBuildTreeWorkController.scheduleAndRunRequestedTasks(VintageBuildTreeWorkController.kt:35)\n  at org.gradle.internal.buildtree.DefaultBuildTreeLifecycleController.lambda$scheduleAndRunTasks$1(DefaultBuildTreeLifecycleController.java:68)\n  at org.gradle.internal.buildtree.DefaultBuildTreeLifecycleController.lambda$runBuild$4(DefaultBuildTreeLifecycleController.java:98)\n  at org.gradle.internal.model.StateTransitionController.lambda$transition$6(StateTransitionController.java:169)\n  at org.gradle.internal.model.StateTransitionController.doTransition(StateTransitionController.java:266)\n  at org.gradle.internal.model.StateTransitionController.lambda$transition$7(StateTransitionController.java:169)\n  at org.gradle.internal.work.DefaultSynchronizer.withLock(DefaultSynchronizer.java:44)\n  at org.gradle.internal.model.StateTransitionController.transition(StateTransitionController.java:169)\n  at org.gradle.internal.buildtree.DefaultBuildTreeLifecycleController.runBuild(DefaultBuildTreeLifecycleController.java:95)\n  at org.gradle.internal.buildtree.DefaultBuildTreeLifecycleController.scheduleAndRunTasks(DefaultBuildTreeLifecycleController.java:68)\n  at org.gradle.internal.buildtree.DefaultBuildTreeLifecycleController.scheduleAndRunTasks(DefaultBuildTreeLifecycleController.java:63)\n  at org.gradle.tooling.internal.provider.ExecuteBuildActionRunner.run(ExecuteBuildActionRunner.java:31)\n  at org.gradle.launcher.exec.ChainingBuildActionRunner.run(ChainingBuildActionRunner.java:35)\n  at org.gradle.internal.buildtree.ProblemReportingBuildActionRunner.run(ProblemReportingBuildActionRunner.java:49)\n  at org.gradle.launcher.exec.BuildOutcomeReportingBuildActionRunner.run(BuildOutcomeReportingBuildActionRunner.java:65)\n  at org.gradle.tooling.internal.provider.FileSystemWatchingBuildActionRunner.run(FileSystemWatchingBuildActionRunner.java:140)\n  at org.gradle.launcher.exec.BuildCompletionNotifyingBuildActionRunner.run(BuildCompletionNotifyingBuildActionRunner.java:41)\n  at org.gradle.launcher.exec.RootBuildLifecycleBuildActionExecutor.lambda$execute$0(RootBuildLifecycleBuildActionExecutor.java:40)\n  at org.gradle.composite.internal.DefaultRootBuildState.run(DefaultRootBuildState.java:122)\n  at org.gradle.launcher.exec.RootBuildLifecycleBuildActionExecutor.execute(RootBuildLifecycleBuildActionExecutor.java:40)\n  at org.gradle.internal.buildtree.InitDeprecationLoggingActionExecutor.execute(InitDeprecationLoggingActionExecutor.java:58)\n  at org.gradle.internal.buildtree.DefaultBuildTreeContext.execute(DefaultBuildTreeContext.java:40)\n  at org.gradle.launcher.exec.BuildTreeLifecycleBuildActionExecutor.lambda$execute$0(BuildTreeLifecycleBuildActionExecutor.java:65)\n  at org.gradle.internal.buildtree.BuildTreeState.run(BuildTreeState.java:53)\n  at org.gradle.launcher.exec.BuildTreeLifecycleBuildActionExecutor.execute(BuildTreeLifecycleBuildActionExecutor.java:65)\n  at org.gradle.launcher.exec.RunAsBuildOperationBuildActionExecutor$3.call(RunAsBuildOperationBuildActionExecutor.java:61)\n  at org.gradle.launcher.exec.RunAsBuildOperationBuildActionExecutor$3.call(RunAsBuildOperationBuildActionExecutor.java:57)\n  at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:204)\n  at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:199)\n  at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)\n  at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)\n  at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)\n  at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)\n  at org.gradle.internal.operations.DefaultBuildOperationRunner.call(DefaultBuildOperationRunner.java:53)\n  at org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:73)\n  at org.gradle.launcher.exec.RunAsBuildOperationBuildActionExecutor.execute(RunAsBuildOperationBuildActionExecutor.java:57)\n  at org.gradle.launcher.exec.RunAsWorkerThreadBuildActionExecutor.lambda$execute$0(RunAsWorkerThreadBuildActionExecutor.java:36)\n  at org.gradle.internal.work.DefaultWorkerLeaseService.withLocks(DefaultWorkerLeaseService.java:249)\n  at org.gradle.internal.work.DefaultWorkerLeaseService.runAsWorkerThread(DefaultWorkerLeaseService.java:109)\n  at org.gradle.launcher.exec.RunAsWorkerThreadBuildActionExecutor.execute(RunAsWorkerThreadBuildActionExecutor.java:36)\n  at org.gradle.tooling.internal.provider.continuous.ContinuousBuildActionExecutor.execute(ContinuousBuildActionExecutor.java:110)\n  at org.gradle.tooling.internal.provider.SubscribableBuildActionExecutor.execute(SubscribableBuildActionExecutor.java:64)\n  at org.gradle.internal.session.DefaultBuildSessionContext.execute(DefaultBuildSessionContext.java:46)\n  at org.gradle.tooling.internal.provider.BuildSessionLifecycleBuildActionExecuter$ActionImpl.apply(BuildSessionLifecycleBuildActionExecuter.java:100)\n  at org.gradle.tooling.internal.provider.BuildSessionLifecycleBuildActionExecuter$ActionImpl.apply(BuildSessionLifecycleBuildActionExecuter.java:88)\n  at org.gradle.internal.session.BuildSessionState.run(BuildSessionState.java:69)\n  at org.gradle.tooling.internal.provider.BuildSessionLifecycleBuildActionExecuter.execute(BuildSessionLifecycleBuildActionExecuter.java:62)\n  at org.gradle.tooling.internal.provider.BuildSessionLifecycleBuildActionExecuter.execute(BuildSessionLifecycleBuildActionExecuter.java:41)\n  at org.gradle.tooling.internal.provider.StartParamsValidatingActionExecuter.execute(StartParamsValidatingActionExecuter.java:64)\n  at org.gradle.tooling.internal.provider.StartParamsValidatingActionExecuter.execute(StartParamsValidatingActionExecuter.java:32)\n  at org.gradle.tooling.internal.provider.SessionFailureReportingActionExecuter.execute(SessionFailureReportingActionExecuter.java:50)\n  at org.gradle.tooling.internal.provider.SessionFailureReportingActionExecuter.execute(SessionFailureReportingActionExecuter.java:38)\n  at org.gradle.tooling.internal.provider.SetupLoggingActionExecuter.execute(SetupLoggingActionExecuter.java:47)\n  at org.gradle.tooling.internal.provider.SetupLoggingActionExecuter.execute(SetupLoggingActionExecuter.java:31)\n  at org.gradle.launcher.daemon.server.exec.ExecuteBuild.doBuild(ExecuteBuild.java:65)\n  at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:37)\n  at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\n  at org.gradle.launcher.daemon.server.exec.WatchForDisconnection.execute(WatchForDisconnection.java:39)\n  at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\n  at org.gradle.launcher.daemon.server.exec.ResetDeprecationLogger.execute(ResetDeprecationLogger.java:29)\n  at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\n  at org.gradle.launcher.daemon.server.exec.RequestStopIfSingleUsedDaemon.execute(RequestStopIfSingleUsedDaemon.java:35)\n  at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\n  at org.gradle.launcher.daemon.server.exec.ForwardClientInput$2.create(ForwardClientInput.java:78)\n  at org.gradle.launcher.daemon.server.exec.ForwardClientInput$2.create(ForwardClientInput.java:75)\n  at org.gradle.util.internal.Swapper.swap(Swapper.java:38)\n  at org.gradle.launcher.daemon.server.exec.ForwardClientInput.execute(ForwardClientInput.java:75)\n  at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\n  at org.gradle.launcher.daemon.server.exec.LogAndCheckHealth.execute(LogAndCheckHealth.java:64)\n  at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\n  at org.gradle.launcher.daemon.server.exec.LogToClient.doBuild(LogToClient.java:63)\n  at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:37)\n  at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\n  at org.gradle.launcher.daemon.server.exec.EstablishBuildEnvironment.doBuild(EstablishBuildEnvironment.java:84)\n  at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:37)\n  at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\n  at org.gradle.launcher.daemon.server.exec.StartBuildOrRespondWithBusy$1.run(StartBuildOrRespondWithBusy.java:52)\n  at org.gradle.launcher.daemon.server.DaemonStateCoordinator$1.run(DaemonStateCoordinator.java:297)\n  at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:64)\n  at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:49)\n  Caused by: org.gradle.jvm.toolchain.internal.NoToolchainAvailableException: No matching toolchains found for requested specification: {languageVersion=19, vendor=any, implementation=vendor-specific}.\n  at org.gradle.jvm.toolchain.internal.JavaToolchainQueryService.downloadToolchain(JavaToolchainQueryService.java:167)\n  at org.gradle.jvm.toolchain.internal.JavaToolchainQueryService.query(JavaToolchainQueryService.java:143)\n  at org.gradle.jvm.toolchain.internal.JavaToolchainQueryService.lambda$resolveToolchain$1(JavaToolchainQueryService.java:109)\n  at org.gradle.jvm.toolchain.internal.JavaToolchainQueryService.resolveToolchain(JavaToolchainQueryService.java:107)\n  at org.gradle.jvm.toolchain.internal.JavaToolchainQueryService.lambda$findMatchingToolchain$0(JavaToolchainQueryService.java:88)\n  at org.gradle.api.internal.provider.DefaultProvider.calculateOwnValue(DefaultProvider.java:72)\n  at org.gradle.api.internal.provider.AbstractMinimalProvider.calculateValue(AbstractMinimalProvider.java:108)\n  at org.gradle.api.internal.provider.WithSideEffectProvider.calculateOwnValue(WithSideEffectProvider.java:54)\n  at org.gradle.api.internal.provider.AbstractMinimalProvider.calculateValue(AbstractMinimalProvider.java:108)\n  at org.gradle.api.internal.provider.TransformBackedProvider.calculateOwnValue(TransformBackedProvider.java:82)\n  at org.gradle.api.internal.provider.AbstractMinimalProvider.calculateValue(AbstractMinimalProvider.java:108)\n  at org.gradle.api.internal.provider.FlatMapProvider.calculateOwnValue(FlatMapProvider.java:50)\n  at org.gradle.api.internal.provider.AbstractMinimalProvider.calculateValue(AbstractMinimalProvider.java:108)\n  at org.gradle.api.internal.provider.TransformBackedProvider.calculateOwnValue(TransformBackedProvider.java:82)\n  at org.gradle.api.internal.provider.AbstractMinimalProvider.calculateValue(AbstractMinimalProvider.java:108)\n  at org.gradle.api.internal.provider.AbstractMinimalProvider.withFinalValue(AbstractMinimalProvider.java:164)\n  at org.gradle.api.internal.provider.DefaultProperty.finalValue(DefaultProperty.java:133)\n  at org.gradle.api.internal.provider.DefaultProperty.finalValue(DefaultProperty.java:26)\n  at org.gradle.api.internal.provider.AbstractProperty.finalizeNow(AbstractProperty.java:245)\n  at org.gradle.api.internal.provider.AbstractProperty.beforeRead(AbstractProperty.java:239)\n  at org.gradle.api.internal.provider.AbstractProperty.calculateOwnValue(AbstractProperty.java:135)\n  at org.gradle.api.internal.provider.AbstractMinimalProvider.getOrNull(AbstractMinimalProvider.java:98)\n  at org.gradle.internal.properties.annotations.AbstractTypeMetadataWalker$InstanceTypeMetadataWalker.lambda$walkNestedProvider$0(AbstractTypeMetadataWalker.java:142)\n  at org.gradle.internal.properties.annotations.AbstractTypeMetadataWalker$InstanceTypeMetadataWalker.walkNestedChild(AbstractTypeMetadataWalker.java:190)\n  at org.gradle.internal.properties.annotations.AbstractTypeMetadataWalker$InstanceTypeMetadataWalker.walkNestedProvider(AbstractTypeMetadataWalker.java:141)\n  at org.gradle.internal.properties.annotations.AbstractTypeMetadataWalker$InstanceTypeMetadataWalker.walkNestedProvider(AbstractTypeMetadataWalker.java:123)\n  at org.gradle.internal.properties.annotations.AbstractTypeMetadataWalker.walkNested(AbstractTypeMetadataWalker.java:60)\n  at org.gradle.internal.properties.annotations.AbstractTypeMetadataWalker.lambda$walkChildren$3(AbstractTypeMetadataWalker.java:85)\n  at org.gradle.internal.properties.annotations.AbstractTypeMetadataWalker$InstanceTypeMetadataWalker.walkNestedChild(AbstractTypeMetadataWalker.java:196)\n  at org.gradle.internal.properties.annotations.AbstractTypeMetadataWalker$InstanceTypeMetadataWalker.walkNestedChild(AbstractTypeMetadataWalker.java:177)\n  at org.gradle.internal.properties.annotations.AbstractTypeMetadataWalker$InstanceTypeMetadataWalker.walkNestedChild(AbstractTypeMetadataWalker.java:123)\n  at org.gradle.internal.properties.annotations.AbstractTypeMetadataWalker.lambda$walkChildren$4(AbstractTypeMetadataWalker.java:85)\n  at org.gradle.internal.properties.annotations.AbstractTypeMetadataWalker.walkChildren(AbstractTypeMetadataWalker.java:83)\n  at org.gradle.internal.properties.annotations.AbstractTypeMetadataWalker.walk(AbstractTypeMetadataWalker.java:53)\n  at org.gradle.internal.properties.bean.DefaultPropertyWalker.visitProperties(DefaultPropertyWalker.java:64)\n  at org.gradle.api.internal.tasks.TaskPropertyUtils.visitAnnotatedProperties(TaskPropertyUtils.java:58)\n  at org.gradle.api.internal.tasks.TaskPropertyUtils.visitProperties(TaskPropertyUtils.java:45)\n  at org.gradle.api.internal.tasks.TaskPropertyUtils.visitProperties(TaskPropertyUtils.java:35)\n  at org.gradle.api.internal.tasks.DefaultTaskInputs.visitDependencies(DefaultTaskInputs.java:195)\n  at org.gradle.api.internal.tasks.DefaultTaskDependency.visitDependencies(DefaultTaskDependency.java:112)\n  at org.gradle.api.internal.tasks.CachingTaskDependencyResolveContext$TaskGraphImpl.getNodeValues(CachingTaskDependencyResolveContext.java:103)\n  at org.gradle.internal.graph.CachingDirectedGraphWalker$GraphWithEmptyEdges.getNodeValues(CachingDirectedGraphWalker.java:213)\n  at org.gradle.internal.graph.CachingDirectedGraphWalker.doSearch(CachingDirectedGraphWalker.java:121)\n  at org.gradle.internal.graph.CachingDirectedGraphWalker.findValues(CachingDirectedGraphWalker.java:73)\n  at org.gradle.api.internal.tasks.CachingTaskDependencyResolveContext.getDependencies(CachingTaskDependencyResolveContext.java:66)\n  ... 142 more\n  Caused by: org.gradle.jvm.toolchain.internal.ToolchainDownloadFailedException: No locally installed toolchains match (see https://docs.gradle.org/8.1/userguide/toolchains.html#sec:auto_detection) and toolchain download repositories have not been configured (see https://docs.gradle.org/8.1/userguide/toolchains.html#sub:download_repositories).\n  at org.gradle.jvm.toolchain.internal.install.DefaultJavaToolchainProvisioningService.tryInstall(DefaultJavaToolchainProvisioningService.java:113)\n  at org.gradle.jvm.toolchain.internal.JavaToolchainQueryService.downloadToolchain(JavaToolchainQueryService.java:164)\n  ... 186 more\n* Get more help at https://help.gradle.org\n\nBUILD FAILED in 3s\n10 actionable tasks: 10 up-to-date\n</code></pre>\n"},{"tags":["java","android","kotlin"],"answers":[{"comments":[{"owner":{"account_id":7378264,"reputation":4782,"user_id":5709159,"accept_rate":58,"display_name":"Sirop4ik"},"score":0,"creation_date":1689354752,"post_id":76689851,"comment_id":135206835,"body_markdown":"Actually, I can see this statistic in `network inspector`. The problem is that it is not shown in the `network inspector` &quot;entire&quot; data usage, but only for each query. So, it is very similar to what you suggested in your answer.","body":"Actually, I can see this statistic in <code>network inspector</code>. The problem is that it is not shown in the <code>network inspector</code> &quot;entire&quot; data usage, but only for each query. So, it is very similar to what you suggested in your answer."},{"owner":{"account_id":5902223,"reputation":700,"user_id":4645332,"display_name":"SepJaPro2.4"},"score":0,"creation_date":1689355330,"post_id":76689851,"comment_id":135206952,"body_markdown":"This is the simple type of solution I added here as an example, you can modify it as you want and do the `// End measuring data usage` and `// Calculate the data usage` whenever you need to calculate all the traffic during a custom timespan, this way the session that you want to calculate is up to you when you end the measuring data usage","body":"This is the simple type of solution I added here as an example, you can modify it as you want and do the <code>&#47;&#47; End measuring data usage</code> and <code>&#47;&#47; Calculate the data usage</code> whenever you need to calculate all the traffic during a custom timespan, this way the session that you want to calculate is up to you when you end the measuring data usage"}],"tags":[],"owner":{"account_id":5902223,"reputation":700,"user_id":4645332,"display_name":"SepJaPro2.4"},"comment_count":2,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1689354459,"creation_date":1689354459,"answer_id":76689851,"question_id":76689345,"body_markdown":"You can measure the data usage of an app during a session programmatically in Android using Kotlin. Android provides the TrafficStats class, which allows you to monitor the network traffic statistics for your app. You can use this class to measure the data usage of both Wi-Fi and mobile data.\r\n\r\nHere&#39;s an example of how you can use TrafficStats to measure data usage:\r\n\r\n    import android.net.TrafficStats\r\n\r\n    // Start measuring data usage\r\n    val initialTxBytes = TrafficStats.getTotalTxBytes()\r\n    val initialRxBytes = TrafficStats.getTotalRxBytes()\r\n    \r\n    // Perform your app operations here\r\n    \r\n    // End measuring data usage\r\n    val finalTxBytes = TrafficStats.getTotalTxBytes()\r\n    val finalRxBytes = TrafficStats.getTotalRxBytes()\r\n    \r\n    // Calculate the data usage\r\n    val totalTxBytes = finalTxBytes - initialTxBytes\r\n    val totalRxBytes = finalRxBytes - initialRxBytes\r\n    val totalBytes = totalTxBytes + totalRxBytes\r\n    \r\n    // Convert bytes to a human-readable format (e.g., MB, GB)\r\n    val formattedTotalBytes = \r\n    android.text.format.Formatter.formatFileSize(context, totalBytes)\r\n    \r\n    // Print or display the total data usage\r\n    Log.d(&quot;Data Usage&quot;, &quot;Total Data Usage: $formattedTotalBytes&quot;)\r\n\r\nIn this example, we first capture the initial number of transmitted (`initialTxBytes`) and received (`initialRxBytes`) bytes using `TrafficStats.getTotalTxBytes()` and `TrafficStats.getTotalRxBytes()`, respectively. Then, after performing your app operations, you capture the final transmitted and received bytes (`finalTxBytes` and `finalRxBytes`). Finally, you calculate the total data usage by subtracting the initial values from the final values.\r\n\r\nNote that you need to make sure you have the necessary permissions in your app&#39;s manifest file to access network state:\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\r\n\r\nAdditionally, keep in mind that TrafficStats measures the cumulative network traffic since the device was last booted. If you want to measure the data usage specifically during your app session, you should reset the values of TrafficStats at the start of your session by calling `TrafficStats.clearThreadStatsTag()`.\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"Is there a way to measure the entire data usage (wifi/mobile-data) of the app during the session?","body":"<p>You can measure the data usage of an app during a session programmatically in Android using Kotlin. Android provides the TrafficStats class, which allows you to monitor the network traffic statistics for your app. You can use this class to measure the data usage of both Wi-Fi and mobile data.</p>\n<p>Here's an example of how you can use TrafficStats to measure data usage:</p>\n<pre><code>import android.net.TrafficStats\n\n// Start measuring data usage\nval initialTxBytes = TrafficStats.getTotalTxBytes()\nval initialRxBytes = TrafficStats.getTotalRxBytes()\n\n// Perform your app operations here\n\n// End measuring data usage\nval finalTxBytes = TrafficStats.getTotalTxBytes()\nval finalRxBytes = TrafficStats.getTotalRxBytes()\n\n// Calculate the data usage\nval totalTxBytes = finalTxBytes - initialTxBytes\nval totalRxBytes = finalRxBytes - initialRxBytes\nval totalBytes = totalTxBytes + totalRxBytes\n\n// Convert bytes to a human-readable format (e.g., MB, GB)\nval formattedTotalBytes = \nandroid.text.format.Formatter.formatFileSize(context, totalBytes)\n\n// Print or display the total data usage\nLog.d(&quot;Data Usage&quot;, &quot;Total Data Usage: $formattedTotalBytes&quot;)\n</code></pre>\n<p>In this example, we first capture the initial number of transmitted (<code>initialTxBytes</code>) and received (<code>initialRxBytes</code>) bytes using <code>TrafficStats.getTotalTxBytes()</code> and <code>TrafficStats.getTotalRxBytes()</code>, respectively. Then, after performing your app operations, you capture the final transmitted and received bytes (<code>finalTxBytes</code> and <code>finalRxBytes</code>). Finally, you calculate the total data usage by subtracting the initial values from the final values.</p>\n<p>Note that you need to make sure you have the necessary permissions in your app's manifest file to access network state:</p>\n<pre><code>&lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\n</code></pre>\n<p>Additionally, keep in mind that TrafficStats measures the cumulative network traffic since the device was last booted. If you want to measure the data usage specifically during your app session, you should reset the values of TrafficStats at the start of your session by calling <code>TrafficStats.clearThreadStatsTag()</code>.</p>\n"}],"owner":{"account_id":7378264,"reputation":4782,"user_id":5709159,"accept_rate":58,"display_name":"Sirop4ik"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689354459,"creation_date":1689350014,"question_id":76689345,"body_markdown":"I am trying to measure how much data the app uses during the session. For example, open the app -&gt; use it for some time -&gt; check how much data has been consumed (eg: entire data usage - 150Mb).\r\n\r\nI see there is some info in the network profiler, like how much data has been consumed by each query (in/out), however, there is no &quot;entire usage&quot; value.\r\n\r\nAre there any ideas?\r\n\r\n","title":"Is there a way to measure the entire data usage (wifi/mobile-data) of the app during the session?","body":"<p>I am trying to measure how much data the app uses during the session. For example, open the app -&gt; use it for some time -&gt; check how much data has been consumed (eg: entire data usage - 150Mb).</p>\n<p>I see there is some info in the network profiler, like how much data has been consumed by each query (in/out), however, there is no &quot;entire usage&quot; value.</p>\n<p>Are there any ideas?</p>\n"},{"tags":["java","spring","system-design"],"comments":[{"owner":{"account_id":10933290,"reputation":2086,"user_id":8035759,"display_name":"Asgar"},"score":3,"creation_date":1688374790,"post_id":76603264,"comment_id":135060843,"body_markdown":"You seem confused. Whether null should be allowed or not for `subjects` depends on your use case. If it is mandatory, don&#39;t allow null else allow null.","body":"You seem confused. Whether null should be allowed or not for <code>subjects</code> depends on your use case. If it is mandatory, don&#39;t allow null else allow null."},{"owner":{"account_id":365431,"reputation":4956,"user_id":2057091,"accept_rate":89,"display_name":"Aserre"},"score":0,"creation_date":1688376206,"post_id":76603264,"comment_id":135061126,"body_markdown":"This seems mostly like an opinion based question. Note that you could always attribute a default value to `subjects` by doing `private List&lt;String&gt; subjects = new ArrayList&lt;&gt;();` with a builder","body":"This seems mostly like an opinion based question. Note that you could always attribute a default value to <code>subjects</code> by doing <code>private List&lt;String&gt; subjects = new ArrayList&lt;&gt;();</code> with a builder"}],"answers":[{"tags":[],"owner":{"account_id":17054653,"reputation":605,"user_id":12339564,"display_name":"ABC"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689354294,"creation_date":1689354294,"answer_id":76689836,"question_id":76603264,"body_markdown":"It depends on your project requirements, but from a clean code standpoint, there are two key principles that are relevant in this context.\r\n\r\n1. &lt;b&gt;Do not return NULL&lt;/b&gt; &lt;br&gt;\r\n- If you are tempted to return ```NULL```, you should consider throwing an exception or returning a ```special case``` (a special case is a specific situation or condition that deviates from the normal flow of execution or behavior)&lt;br&gt;&lt;br&gt;\r\nSpecial case example:\r\n```\r\n\r\nList&lt;Employee&gt; employees = getEmployees();\r\nif (employees != null) { // we check for null because getEmployees can return null\r\n   for(Employee e : employees) {\r\n      totalPay += e.getPay();\r\n   }\r\n}\r\n```\r\n```\r\n// If we change getEmployees so that it returns an empty list,\r\n// we can clean up the code\r\n\r\nList&lt;Employee&gt; employees = getEmployees();\r\nfor(Employee e : employees) {\r\n   totalPay += e.getPay();\r\n}\r\n```\r\n2. &lt;b&gt;Do not pass NULL&lt;/b&gt; &lt;br&gt;\r\n- you should avoid passing ```NULL``` in your code whenever possible, unless you\r\nare working with an API which expects you to pass ```NULL``` \r\n- if someone passes ```NULL```, we could not handle it better than throwing a ```Runtime Exception``` - so we&#39;ll still have a runtime error\r\n\r\nThese two points help us understand that we should consider simplifying the client code and reducing clutter in the business logic.\r\n\r\n\r\nTherefore, from a clean code perspective, we should &lt;b&gt;avoid&lt;/b&gt; dealing with ```NULL``` in our code whenever possible.\r\n\r\n\r\nReference: &quot;Clean Code. A Handbook of Agile Software Craftsmanship&quot;","title":"Java- Spring: should we handle null on a list in a request-Object?","body":"<p>It depends on your project requirements, but from a clean code standpoint, there are two key principles that are relevant in this context.</p>\n<ol>\n<li><b>Do not return NULL</b> <br></li>\n</ol>\n<ul>\n<li>If you are tempted to return <code>NULL</code>, you should consider throwing an exception or returning a <code>special case</code> (a special case is a specific situation or condition that deviates from the normal flow of execution or behavior)<br><br>\nSpecial case example:</li>\n</ul>\n<pre><code>\nList&lt;Employee&gt; employees = getEmployees();\nif (employees != null) { // we check for null because getEmployees can return null\n   for(Employee e : employees) {\n      totalPay += e.getPay();\n   }\n}\n</code></pre>\n<pre><code>// If we change getEmployees so that it returns an empty list,\n// we can clean up the code\n\nList&lt;Employee&gt; employees = getEmployees();\nfor(Employee e : employees) {\n   totalPay += e.getPay();\n}\n</code></pre>\n<ol start=\"2\">\n<li><b>Do not pass NULL</b> <br></li>\n</ol>\n<ul>\n<li>you should avoid passing <code>NULL</code> in your code whenever possible, unless you\nare working with an API which expects you to pass <code>NULL</code></li>\n<li>if someone passes <code>NULL</code>, we could not handle it better than throwing a <code>Runtime Exception</code> - so we'll still have a runtime error</li>\n</ul>\n<p>These two points help us understand that we should consider simplifying the client code and reducing clutter in the business logic.</p>\n<p>Therefore, from a clean code perspective, we should <b>avoid</b> dealing with <code>NULL</code> in our code whenever possible.</p>\n<p>Reference: &quot;Clean Code. A Handbook of Agile Software Craftsmanship&quot;</p>\n"}],"owner":{"account_id":14595960,"reputation":7,"user_id":10770017,"display_name":"NothingIsIrrational"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76689836,"answer_count":1,"score":0,"last_activity_date":1689354294,"creation_date":1688374519,"question_id":76603264,"body_markdown":"should we handle null on a list in a request-Object.\r\n\r\nI am using Spring (java) to accept `the request to save a new Student`.\r\n\r\nEg :\r\n\r\n```\r\n@Data\r\npublic class Student implements Serializable {\r\n\r\n    private String name;\r\n    \r\n    private List&lt;String&gt; subjects;\r\n\r\n}\r\n```\r\n\r\n**My question**  is more of a contract between front-end and backend.\r\n\r\n**What I need is** : a logical-explanation/opinion on should we allow NULLs on `student.subjects` OR not ?\r\n\r\n--\r\n\r\n**Extra :** \r\n\r\ni have referenced multiple opinions on the internet.\r\n\r\nThe one that makes the most sense is : https://salesforce.stackexchange.com/a/217411","title":"Java- Spring: should we handle null on a list in a request-Object?","body":"<p>should we handle null on a list in a request-Object.</p>\n<p>I am using Spring (java) to accept <code>the request to save a new Student</code>.</p>\n<p>Eg :</p>\n<pre><code>@Data\npublic class Student implements Serializable {\n\n    private String name;\n    \n    private List&lt;String&gt; subjects;\n\n}\n</code></pre>\n<p><strong>My question</strong>  is more of a contract between front-end and backend.</p>\n<p><strong>What I need is</strong> : a logical-explanation/opinion on should we allow NULLs on <code>student.subjects</code> OR not ?</p>\n<p>--</p>\n<p><strong>Extra :</strong></p>\n<p>i have referenced multiple opinions on the internet.</p>\n<p>The one that makes the most sense is : <a href=\"https://salesforce.stackexchange.com/a/217411\">https://salesforce.stackexchange.com/a/217411</a></p>\n"},{"tags":["java","gradle","swagger"],"comments":[{"owner":{"account_id":1711670,"reputation":2138,"user_id":1569604,"accept_rate":50,"display_name":"maslan"},"score":0,"creation_date":1552478304,"post_id":55141247,"comment_id":97022755,"body_markdown":"in the pasted stacktrace there is nothing about bad magic number (something got truncated?) but magic number always means that the classes compiled are of higher version then the java you are trying to run it with. Please provide the exact name and version of the jar and the version of the java you are trying to run with.\n\nAlso if you look into the mentioned manifest it sometimes contains information about java used for compilation","body":"in the pasted stacktrace there is nothing about bad magic number (something got truncated?) but magic number always means that the classes compiled are of higher version then the java you are trying to run it with. Please provide the exact name and version of the jar and the version of the java you are trying to run with.  Also if you look into the mentioned manifest it sometimes contains information about java used for compilation"},{"owner":{"account_id":10484208,"reputation":686,"user_id":7728305,"display_name":"Aravinth"},"score":0,"creation_date":1552478533,"post_id":55141247,"comment_id":97022900,"body_markdown":"I am using source compatible java  version as 8 in my gradle file. But I don&#39;t how to find the java version of compiled class files and also I have around 40 dependent libraries.","body":"I am using source compatible java  version as 8 in my gradle file. But I don&#39;t how to find the java version of compiled class files and also I have around 40 dependent libraries."},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1552478551,"post_id":55141247,"comment_id":97022911,"body_markdown":"Well, the message states it: &quot;could not create class object from file META-INF/MANIFEST.MF&quot; - why it tries to create a _class_ from a _text_ file would be the issue to tackle.","body":"Well, the message states it: &quot;could not create class object from file META-INF/MANIFEST.MF&quot; - why it tries to create a <i>class</i> from a <i>text</i> file would be the issue to tackle."},{"owner":{"account_id":1711670,"reputation":2138,"user_id":1569604,"accept_rate":50,"display_name":"maslan"},"score":0,"creation_date":1552478718,"post_id":55141247,"comment_id":97023044,"body_markdown":"@Thomas unless manifest entries contain a detail of a class to be loaded such as java agent. That is why OP should look into the contents of a manifest using some standard unzipping software, or for windows by changing the extension to .zip and opening","body":"@Thomas unless manifest entries contain a detail of a class to be loaded such as java agent. That is why OP should look into the contents of a manifest using some standard unzipping software, or for windows by changing the extension to .zip and opening"},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":1,"creation_date":1552479488,"post_id":55141247,"comment_id":97023536,"body_markdown":"@maslan yes, that could be the case. However, that would mean the manifest would be used to create/analyze _other_ files and not to try to create a class from the manifest itself.","body":"@maslan yes, that could be the case. However, that would mean the manifest would be used to create/analyze <i>other</i> files and not to try to create a class from the manifest itself."},{"owner":{"account_id":1711670,"reputation":2138,"user_id":1569604,"accept_rate":50,"display_name":"maslan"},"score":0,"creation_date":1552500530,"post_id":55141247,"comment_id":97037554,"body_markdown":"@Thomas thats why we would need to see the manifest file, and the full stacktrace with causes (it is possible that simply a few lines below lies the real reason)","body":"@Thomas thats why we would need to see the manifest file, and the full stacktrace with causes (it is possible that simply a few lines below lies the real reason)"}],"answers":[{"comments":[{"owner":{"account_id":165044,"reputation":4235,"user_id":388185,"accept_rate":84,"display_name":"Alkanshel"},"score":0,"creation_date":1616197268,"post_id":55148688,"comment_id":117936468,"body_markdown":"The swagger 1.x implementations have the same problem","body":"The swagger 1.x implementations have the same problem"}],"tags":[],"owner":{"account_id":10484208,"reputation":686,"user_id":7728305,"display_name":"Aravinth"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1584077994,"creation_date":1552500717,"answer_id":55148688,"question_id":55141247,"body_markdown":"Found the problem: I was using swagger core plugin 2.5.0 with java source compatibility as 8.1. Then I changed the plugin version 2.7.0, then it worked fine with no errors. Looks like 2.5.0 has some problem. Thanks guys for the response.","title":"Could not able to scan jar file : bad magic number","body":"<p>Found the problem: I was using swagger core plugin 2.5.0 with java source compatibility as 8.1. Then I changed the plugin version 2.7.0, then it worked fine with no errors. Looks like 2.5.0 has some problem. Thanks guys for the response.</p>\n"},{"tags":[],"owner":{"account_id":17951329,"reputation":1,"user_id":13044380,"display_name":"June"},"comment_count":0,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1583920702,"creation_date":1583920702,"answer_id":60633335,"question_id":55141247,"body_markdown":"Thanks for your tips.\r\nI got the same problem when using cxf-rt-rs-service-description-swagger 3.2.0. (dependency reflections-0.9.11.jar)\r\nFinally needs downgrade to 3.1.13 (dependency reflections-0.9.10.jar).\r\n","title":"Could not able to scan jar file : bad magic number","body":"<p>Thanks for your tips.\nI got the same problem when using cxf-rt-rs-service-description-swagger 3.2.0. (dependency reflections-0.9.11.jar)\nFinally needs downgrade to 3.1.13 (dependency reflections-0.9.10.jar).</p>\n"},{"tags":[],"owner":{"account_id":19076508,"reputation":11,"user_id":13929679,"display_name":"Ankit Garg"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689353769,"creation_date":1689353769,"answer_id":76689779,"question_id":55141247,"body_markdown":"You can use filterInputsBy which will only scan classes. \r\n\r\n    Reflections reflections = new Reflections(new ConfigurationBuilder()\r\n                .setUrls(ClasspathHelper.forPackage(&quot;com.abc.service&quot;))\r\n                .setScanners(new TypeAnnotationsScanner())\r\n             .filterInputsBy(new FilterBuilder().include(&quot;.*class&quot;))\r\n     \r\n     );\r\n\r\n\r\n     ","title":"Could not able to scan jar file : bad magic number","body":"<p>You can use filterInputsBy which will only scan classes.</p>\n<pre><code>Reflections reflections = new Reflections(new ConfigurationBuilder()\n            .setUrls(ClasspathHelper.forPackage(&quot;com.abc.service&quot;))\n            .setScanners(new TypeAnnotationsScanner())\n         .filterInputsBy(new FilterBuilder().include(&quot;.*class&quot;))\n \n );\n\n\n \n</code></pre>\n"}],"owner":{"account_id":10484208,"reputation":686,"user_id":7728305,"display_name":"Aravinth"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2950,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":55148688,"answer_count":3,"score":1,"last_activity_date":1689353769,"creation_date":1552477880,"question_id":55141247,"body_markdown":"I am trying to generate swagger from an interface in my project. I am writing a new task in gradle which assembles the specs. When trying to read a jar or scan a jar file it throws an error like \r\n\r\n    DEBUG org.reflections.Reflections - could not scan file META-INF/MANIFEST.MF in url jar&lt;JAR URL&gt;\r\n\r\n    org.reflections.ReflectionsException: could not create class object from file META-INF/MANIFEST.MF\r\n\r\n    Caused by: org.reflections.ReflectionsException: could not create class file from MANIFEST.MF\r\n        at org.reflections.adapters.JavassistAdapter.getOfCreateClassObject(JavassistAdapter.java:102)\r\n        at org.reflections.adapters.JavassistAdapter.getOfCreateClassObject(JavassistAdapter.java:24)\r\n        at org.reflections.scanners.AbstractScanner.scan(AbstractScanner.java:30)\r\n        ... 62 common frames omitted\r\n\r\nCan anyone please assist me on this? This is a major blocker for my project.","title":"Could not able to scan jar file : bad magic number","body":"<p>I am trying to generate swagger from an interface in my project. I am writing a new task in gradle which assembles the specs. When trying to read a jar or scan a jar file it throws an error like</p>\n<pre><code>DEBUG org.reflections.Reflections - could not scan file META-INF/MANIFEST.MF in url jar&lt;JAR URL&gt;\n\norg.reflections.ReflectionsException: could not create class object from file META-INF/MANIFEST.MF\n\nCaused by: org.reflections.ReflectionsException: could not create class file from MANIFEST.MF\n    at org.reflections.adapters.JavassistAdapter.getOfCreateClassObject(JavassistAdapter.java:102)\n    at org.reflections.adapters.JavassistAdapter.getOfCreateClassObject(JavassistAdapter.java:24)\n    at org.reflections.scanners.AbstractScanner.scan(AbstractScanner.java:30)\n    ... 62 common frames omitted\n</code></pre>\n<p>Can anyone please assist me on this? This is a major blocker for my project.</p>\n"},{"tags":["java","spring","scheduled-tasks"],"comments":[{"owner":{"account_id":6365827,"reputation":3652,"user_id":4939853,"accept_rate":69,"display_name":"Oreste Viron"},"score":0,"creation_date":1534417461,"post_id":51875028,"comment_id":90702295,"body_markdown":"Hello, I think you can&#39;t autowire static objects.Try remove static.","body":"Hello, I think you can&#39;t autowire static objects.Try remove static."},{"owner":{"account_id":3751239,"reputation":2505,"user_id":3118692,"accept_rate":53,"display_name":"Syed"},"score":0,"creation_date":1534418159,"post_id":51875028,"comment_id":90702755,"body_markdown":"@OresteViron, tried with that also, still it doesn&#39;t work","body":"@OresteViron, tried with that also, still it doesn&#39;t work"},{"owner":{"account_id":2400394,"reputation":318,"user_id":2098182,"display_name":"Dhaval Desai"},"score":0,"creation_date":1534428105,"post_id":51875028,"comment_id":90709178,"body_markdown":"You need to remove static and either add autowire attribute like &lt;bean id=&quot;getEmployeeServiceAdapter&quot; class=&quot;com.dev.adapter.GetEmployeeServiceAdapter&quot; autowire=&quot;byName&quot;&gt;     \n&lt;/bean&gt;  or add &lt;property name=&quot;getEmployeeServiceAdapter&quot; ref=&quot;getEmployeeServiceAdapter&quot; /&gt; as child for bean testListener.","body":"You need to remove static and either add autowire attribute like &lt;bean id=&quot;getEmployeeServiceAdapter&quot; class=&quot;com.dev.adapter.GetEmployeeServiceAdapter&quot; autowire=&quot;byName&quot;&gt;      &lt;/bean&gt;  or add &lt;property name=&quot;getEmployeeServiceAdapter&quot; ref=&quot;getEmployeeServiceAdapter&quot; /&gt; as child for bean testListener."}],"owner":{"account_id":3751239,"reputation":2505,"user_id":3118692,"accept_rate":53,"display_name":"Syed"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":138,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1534416069,"answer_count":0,"score":0,"last_activity_date":1689353662,"creation_date":1534415815,"question_id":51875028,"body_markdown":"I&#39;ve written a task scheduler in Spring. Its running properly. Now my condition is I&#39;m trying to inject one bean into the listener. But, it returns me null object. But if the same bean is injected into a controller/component, it works fine. Please let me know if I need to make any modifications.\r\n\r\nHere is my code\r\n\r\nMy configurations in application context configuration file\r\n\r\n    &lt;task:scheduler id=&quot;testScheduler&quot; pool-size=&quot;1&quot; /&gt;\r\n   \t&lt;bean id=&quot;testListener&quot;\r\n\t\tclass=&quot;com.dev.util.TestListener&quot; &gt;\t\t\r\n\t&lt;/bean&gt;\r\n\t&lt;task:scheduled-tasks scheduler=&quot;testScheduler&quot;&gt;\r\n\t\t&lt;task:scheduled ref=&quot;testListener&quot; method=&quot;run&quot;\r\n\t\t\tfixed-delay=&quot;60000&quot; /&gt;\r\n\t&lt;/task:scheduled-tasks&gt; \r\n\r\nThe bean which I&#39;m trying to inject\r\n\r\n    &lt;bean id=&quot;getEmployeeServiceAdapter&quot; class=&quot;com.dev.adapter.GetEmployeeServiceAdapter&quot;&gt;\t\t\r\n\t&lt;/bean&gt;\r\n\r\n\r\nAnd finally my class \r\n\r\n    public class TestListener {\r\n\t\r\n\t\t@Autowired\r\n\t\tstatic\r\n\t\tGetEmployeeServiceAdapter getEmployeeServiceAdapter;\r\n\t\t\r\n\t\tpublic void run() throws Exception{\r\n\t\t\tSystem.out.println(&quot;Hii&quot;);\r\n\t\t\t// Code \r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\nwhen I do in debug mode, and place my cursor on the object, it gets as null","title":"Not able to autowire a bean in task scheduler class in Java","body":"<p>I've written a task scheduler in Spring. Its running properly. Now my condition is I'm trying to inject one bean into the listener. But, it returns me null object. But if the same bean is injected into a controller/component, it works fine. Please let me know if I need to make any modifications.</p>\n\n<p>Here is my code</p>\n\n<p>My configurations in application context configuration file</p>\n\n<pre><code>&lt;task:scheduler id=\"testScheduler\" pool-size=\"1\" /&gt;\n&lt;bean id=\"testListener\"\n    class=\"com.dev.util.TestListener\" &gt;     \n&lt;/bean&gt;\n&lt;task:scheduled-tasks scheduler=\"testScheduler\"&gt;\n    &lt;task:scheduled ref=\"testListener\" method=\"run\"\n        fixed-delay=\"60000\" /&gt;\n&lt;/task:scheduled-tasks&gt; \n</code></pre>\n\n<p>The bean which I'm trying to inject</p>\n\n<pre><code>&lt;bean id=\"getEmployeeServiceAdapter\" class=\"com.dev.adapter.GetEmployeeServiceAdapter\"&gt;     \n&lt;/bean&gt;\n</code></pre>\n\n<p>And finally my class </p>\n\n<pre><code>public class TestListener {\n\n    @Autowired\n    static\n    GetEmployeeServiceAdapter getEmployeeServiceAdapter;\n\n    public void run() throws Exception{\n        System.out.println(\"Hii\");\n        // Code \n    }\n\n}\n</code></pre>\n\n<p>when I do in debug mode, and place my cursor on the object, it gets as null</p>\n"},{"tags":["java","swing"],"comments":[{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":1,"creation_date":1689353264,"post_id":76688967,"comment_id":135206549,"body_markdown":"*&quot;but It doesn&#39;t work, control f6 is still enabled in JDesktopPane.&quot;* -- it may be that you&#39;re using the wrong input map. Please create and post a valid [mre] with your question code that we can copy/paste and run, similar to that seen within my answer.","body":"<i>&quot;but It doesn&#39;t work, control f6 is still enabled in JDesktopPane.&quot;</i> -- it may be that you&#39;re using the wrong input map. Please create and post a valid <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> with your question code that we can copy/paste and run, similar to that seen within my answer."},{"owner":{"account_id":633896,"reputation":3552,"user_id":399637,"accept_rate":90,"display_name":"res1"},"score":0,"creation_date":1689353728,"post_id":76688967,"comment_id":135206660,"body_markdown":"You right. I posted an edit while you wrote your comments. I didn&#39;t posted a reproducible example just a test I did on my code.","body":"You right. I posted an edit while you wrote your comments. I didn&#39;t posted a reproducible example just a test I did on my code."}],"answers":[{"comments":[{"owner":{"account_id":633896,"reputation":3552,"user_id":399637,"accept_rate":90,"display_name":"res1"},"score":0,"creation_date":1689347858,"post_id":76689063,"comment_id":135205359,"body_markdown":"why it does&#39;t work `desktop.getActionMap().get(keyStroke).setEnabled(boolean);` ?","body":"why it does&#39;t work <code>desktop.getActionMap().get(keyStroke).setEnabled(boolean);</code> ?"},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1689348036,"post_id":76689063,"comment_id":135205394,"body_markdown":"@res1: why should that code work? That doesn&#39;t make sense, not if you unplug the input map from the action map for that keystroke?","body":"@res1: why should that code work? That doesn&#39;t make sense, not if you unplug the input map from the action map for that keystroke?"},{"owner":{"account_id":633896,"reputation":3552,"user_id":399637,"accept_rate":90,"display_name":"res1"},"score":0,"creation_date":1689348255,"post_id":76689063,"comment_id":135205447,"body_markdown":"An `Action` can be enabled or disabled, I was thinking you can access directly to the action associated with the key binding and disable / enabled it without removing the key binding from the component","body":"An <code>Action</code> can be enabled or disabled, I was thinking you can access directly to the action associated with the key binding and disable / enabled it without removing the key binding from the component"},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1689348811,"post_id":76689063,"comment_id":135205591,"body_markdown":"You can disable the action if you do not dissociate the key from the action. For example, see the code above.","body":"You can disable the action if you do not dissociate the key from the action. For example, see the code above."},{"owner":{"account_id":633896,"reputation":3552,"user_id":399637,"accept_rate":90,"display_name":"res1"},"score":0,"creation_date":1689350613,"post_id":76689063,"comment_id":135205977,"body_markdown":"I am not able to do the same with the `Action`, I will update my question with my test code","body":"I am not able to do the same with the <code>Action</code>, I will update my question with my test code"},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1689353302,"post_id":76689063,"comment_id":135206560,"body_markdown":"@res1: *&quot;but It doesn&#39;t work, control f6 is still enabled in JDesktopPane.&quot;* -- it may be that you&#39;re using the wrong input map. Please create and post a valid [mre] with your question code that we can copy/paste and run, similar to that seen within my answer.","body":"@res1: <i>&quot;but It doesn&#39;t work, control f6 is still enabled in JDesktopPane.&quot;</i> -- it may be that you&#39;re using the wrong input map. Please create and post a valid <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> with your question code that we can copy/paste and run, similar to that seen within my answer."}],"tags":[],"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"comment_count":6,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689348789,"creation_date":1689347731,"answer_id":76689063,"question_id":76688967,"body_markdown":"You will want to get the original key value and use it to get the original Action held by the ActionMap, save that value and then replace it when you want to restore the key&#39;s original function:\r\n\r\n```\r\nKeyStroke remove = KeyStroke.getKeyStroke(KeyEvent.VK_F6, InputEvent.CTRL_DOWN_MASK);\r\nInputMap im = desktop.getInputMap(JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT);\r\nObject keyValue = im.get(remove);\r\nActionMap am = desktop.getActionMap();\r\n\r\n// store this original action somewhere   \r\nAction originalAction = am.get(keyValue);\r\n```\r\n\r\nThen again, later when you want to restore the f6 ctrl-down key stroke to original function, put that action back into the action map, associating it with the key value in the input map.\r\n________________________\r\n\r\nActually, you can use `.enabled(true)` and `.enabled(false)` on the Action associated with the key stroke of interest if you do not disassociate the key from the action. For example, in the code below, I can enable and disable a JTextArea&#39;s ability to paste text using ctrl-V by enabling and disabling the associated action with the ctrl-V keystroke.\r\n\r\n```\r\nimport java.awt.BorderLayout;\r\nimport java.awt.event.InputEvent;\r\nimport java.awt.event.ItemEvent;\r\nimport java.awt.event.KeyEvent;\r\nimport javax.swing.*;\r\n\r\n@SuppressWarnings(&quot;serial&quot;)\r\npublic class TestInputActionMaps extends JPanel {\r\n    private JCheckBox enableAction = new JCheckBox(&quot;Enable Action&quot;, true);\r\n    private KeyStroke controlV = KeyStroke.getKeyStroke(KeyEvent.VK_V, InputEvent.CTRL_DOWN_MASK);\r\n    private JTextArea textArea = new JTextArea(&quot;This is text&quot;, 10, 30);\r\n    private InputMap inputMap = textArea.getInputMap(JComponent.WHEN_FOCUSED);\r\n    private ActionMap actionMap = textArea.getActionMap();    \r\n    String ctrlVKey = (String) inputMap.get(controlV);\r\n    Action ctrlVAction = actionMap.get(ctrlVKey);\r\n    \r\n    public TestInputActionMaps() {\r\n        enableAction.addItemListener(e -&gt; checkBoxChanged(e));\r\n        \r\n        \r\n        textArea.setWrapStyleWord(true);\r\n        textArea.setLineWrap(true);\r\n        JScrollPane scrollPane = new JScrollPane(textArea);\r\n        \r\n        JPanel topPanel = new JPanel();\r\n        topPanel.add(enableAction);\r\n        \r\n        setLayout(new BorderLayout());\r\n        add(topPanel, BorderLayout.PAGE_START);\r\n        add(scrollPane);\r\n    }\r\n    \r\n    private void checkBoxChanged(ItemEvent e) {\r\n        if (e.getStateChange() == ItemEvent.SELECTED) {\r\n            ctrlVAction.setEnabled(true);\r\n        } else {\r\n            ctrlVAction.setEnabled(false);\r\n        }\r\n    }\r\n    \r\n    public static void main(String[] args) {\r\n        SwingUtilities.invokeLater(() -&gt; {\r\n            TestInputActionMaps mainPanel = new TestInputActionMaps();\r\n\r\n            JFrame frame = new JFrame(&quot;GUI&quot;);\r\n            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n            frame.add(mainPanel);\r\n            frame.pack();\r\n            frame.setLocationRelativeTo(null);\r\n            frame.setVisible(true);\r\n        });\r\n    }\r\n}\r\n```","title":"java swing: enable disable a specific key binding for a component","body":"<p>You will want to get the original key value and use it to get the original Action held by the ActionMap, save that value and then replace it when you want to restore the key's original function:</p>\n<pre><code>KeyStroke remove = KeyStroke.getKeyStroke(KeyEvent.VK_F6, InputEvent.CTRL_DOWN_MASK);\nInputMap im = desktop.getInputMap(JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT);\nObject keyValue = im.get(remove);\nActionMap am = desktop.getActionMap();\n\n// store this original action somewhere   \nAction originalAction = am.get(keyValue);\n</code></pre>\n<p>Then again, later when you want to restore the f6 ctrl-down key stroke to original function, put that action back into the action map, associating it with the key value in the input map.</p>\n<hr />\n<p>Actually, you can use <code>.enabled(true)</code> and <code>.enabled(false)</code> on the Action associated with the key stroke of interest if you do not disassociate the key from the action. For example, in the code below, I can enable and disable a JTextArea's ability to paste text using ctrl-V by enabling and disabling the associated action with the ctrl-V keystroke.</p>\n<pre><code>import java.awt.BorderLayout;\nimport java.awt.event.InputEvent;\nimport java.awt.event.ItemEvent;\nimport java.awt.event.KeyEvent;\nimport javax.swing.*;\n\n@SuppressWarnings(&quot;serial&quot;)\npublic class TestInputActionMaps extends JPanel {\n    private JCheckBox enableAction = new JCheckBox(&quot;Enable Action&quot;, true);\n    private KeyStroke controlV = KeyStroke.getKeyStroke(KeyEvent.VK_V, InputEvent.CTRL_DOWN_MASK);\n    private JTextArea textArea = new JTextArea(&quot;This is text&quot;, 10, 30);\n    private InputMap inputMap = textArea.getInputMap(JComponent.WHEN_FOCUSED);\n    private ActionMap actionMap = textArea.getActionMap();    \n    String ctrlVKey = (String) inputMap.get(controlV);\n    Action ctrlVAction = actionMap.get(ctrlVKey);\n    \n    public TestInputActionMaps() {\n        enableAction.addItemListener(e -&gt; checkBoxChanged(e));\n        \n        \n        textArea.setWrapStyleWord(true);\n        textArea.setLineWrap(true);\n        JScrollPane scrollPane = new JScrollPane(textArea);\n        \n        JPanel topPanel = new JPanel();\n        topPanel.add(enableAction);\n        \n        setLayout(new BorderLayout());\n        add(topPanel, BorderLayout.PAGE_START);\n        add(scrollPane);\n    }\n    \n    private void checkBoxChanged(ItemEvent e) {\n        if (e.getStateChange() == ItemEvent.SELECTED) {\n            ctrlVAction.setEnabled(true);\n        } else {\n            ctrlVAction.setEnabled(false);\n        }\n    }\n    \n    public static void main(String[] args) {\n        SwingUtilities.invokeLater(() -&gt; {\n            TestInputActionMaps mainPanel = new TestInputActionMaps();\n\n            JFrame frame = new JFrame(&quot;GUI&quot;);\n            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n            frame.add(mainPanel);\n            frame.pack();\n            frame.setLocationRelativeTo(null);\n            frame.setVisible(true);\n        });\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":633896,"reputation":3552,"user_id":399637,"accept_rate":90,"display_name":"res1"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689353624,"creation_date":1689347168,"question_id":76688967,"body_markdown":"In my case I want to be able to enable and disable `ctrl F6` on `JDesktopPane`.\r\n\r\nRight now I am disabling it in this way:\r\n\r\n```\r\nKeyStroke remove = KeyStroke.getKeyStroke(KeyEvent.VK_F6, InputEvent.CTRL_DOWN_MASK);\r\nInputMap im = desktop.getInputMap(JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT);\r\nim.put(remove, &quot;none&quot;);\r\n```\r\n\r\nAnd it seems to works the key binding is no more active.\r\n\r\nI don&#39;t know how to re-enable it, or what to save before disabling for enabling it again later.\r\n\r\nThanks for the help\r\n\r\n**UPDATE1:**\r\n\r\nbased on the answer https://stackoverflow.com/a/76689063/399637 \r\nI tried to work on the `Action`, this is a test code:\r\n\r\n```\r\ndesktop = new JDesktopPane();\r\nKeyStroke keyStroke = KeyStroke.getKeyStroke(KeyEvent.VK_F6, InputEvent.CTRL_DOWN_MASK);\r\nInputMap im = desktop.getInputMap(JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT);\r\nActionMap am = desktop.getActionMap();\r\nString key = (String)im.get(keyStroke);\r\nAction action = am.get(key);\r\nassert action != null;\r\naction.setEnabled(false);\r\n```\r\n\r\nbut It doesn&#39;t work, `control f6` is still enabled in `JDesktopPane`.\r\n\r\n**UPDATE2:**\r\n\r\nI was able to make it to work using a wrapper class for the action, non a very good solution but it seems to work:\r\n\r\n```\r\n\tprivate static class ActionWrapper extends AbstractAction{\r\n\t\t\r\n\t\tprivate final Action action;\r\n\t\t\r\n\t\tprivate boolean active = true;\r\n\t\t\r\n\t\t@Override\r\n\t\tpublic void actionPerformed(ActionEvent evt) {\r\n\t\t\t\r\n\t\t\tif(active){\t\t\t\r\n\t\t\t\taction.actionPerformed(evt);\r\n\t\t\t}\t\r\n\t\t}\r\n\t}\r\n```\r\n\r\nand then the code:\r\n```\r\ndesktop = new JDesktopPane();\r\nKeyStroke keyStroke = KeyStroke.getKeyStroke(KeyEvent.VK_F6, InputEvent.CTRL_DOWN_MASK);\r\nInputMap im = desktop.getInputMap(JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT);\r\nActionMap am = desktop.getActionMap();\r\nString key = (String)im.get(keyStroke);\r\nAction action = am.get(key);\r\nassert action != null;\r\nactionWrapper = new ActionWrapper(action);\r\nam.put(key, actionWrapper);\r\n```\r\n\r\nand then `setActive(boolean)` on the wrapper class.\r\n\r\nIf someone wants to review this solution.\r\n","title":"java swing: enable disable a specific key binding for a component","body":"<p>In my case I want to be able to enable and disable <code>ctrl F6</code> on <code>JDesktopPane</code>.</p>\n<p>Right now I am disabling it in this way:</p>\n<pre><code>KeyStroke remove = KeyStroke.getKeyStroke(KeyEvent.VK_F6, InputEvent.CTRL_DOWN_MASK);\nInputMap im = desktop.getInputMap(JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT);\nim.put(remove, &quot;none&quot;);\n</code></pre>\n<p>And it seems to works the key binding is no more active.</p>\n<p>I don't know how to re-enable it, or what to save before disabling for enabling it again later.</p>\n<p>Thanks for the help</p>\n<p><strong>UPDATE1:</strong></p>\n<p>based on the answer <a href=\"https://stackoverflow.com/a/76689063/399637\">https://stackoverflow.com/a/76689063/399637</a>\nI tried to work on the <code>Action</code>, this is a test code:</p>\n<pre><code>desktop = new JDesktopPane();\nKeyStroke keyStroke = KeyStroke.getKeyStroke(KeyEvent.VK_F6, InputEvent.CTRL_DOWN_MASK);\nInputMap im = desktop.getInputMap(JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT);\nActionMap am = desktop.getActionMap();\nString key = (String)im.get(keyStroke);\nAction action = am.get(key);\nassert action != null;\naction.setEnabled(false);\n</code></pre>\n<p>but It doesn't work, <code>control f6</code> is still enabled in <code>JDesktopPane</code>.</p>\n<p><strong>UPDATE2:</strong></p>\n<p>I was able to make it to work using a wrapper class for the action, non a very good solution but it seems to work:</p>\n<pre><code>    private static class ActionWrapper extends AbstractAction{\n        \n        private final Action action;\n        \n        private boolean active = true;\n        \n        @Override\n        public void actionPerformed(ActionEvent evt) {\n            \n            if(active){         \n                action.actionPerformed(evt);\n            }   \n        }\n    }\n</code></pre>\n<p>and then the code:</p>\n<pre><code>desktop = new JDesktopPane();\nKeyStroke keyStroke = KeyStroke.getKeyStroke(KeyEvent.VK_F6, InputEvent.CTRL_DOWN_MASK);\nInputMap im = desktop.getInputMap(JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT);\nActionMap am = desktop.getActionMap();\nString key = (String)im.get(keyStroke);\nAction action = am.get(key);\nassert action != null;\nactionWrapper = new ActionWrapper(action);\nam.put(key, actionWrapper);\n</code></pre>\n<p>and then <code>setActive(boolean)</code> on the wrapper class.</p>\n<p>If someone wants to review this solution.</p>\n"},{"tags":["java","multithreading","scheduled-tasks"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1536066031,"post_id":52166906,"comment_id":91283556,"body_markdown":"You aren&#39;t scheduling threads, you are scheduling tasks which are processed by 5 threads. Why would you need to expand the poolsize?","body":"You aren&#39;t scheduling threads, you are scheduling tasks which are processed by 5 threads. Why would you need to expand the poolsize?"},{"owner":{"account_id":2861266,"reputation":6734,"user_id":4781349,"accept_rate":33,"display_name":"ip696"},"score":0,"creation_date":1536066659,"post_id":52166906,"comment_id":91283960,"body_markdown":"@ M. Deinum I poll the third-party system with a very short time interval. I do this in N threads. Periodically, you need to take data at a faster rate and for this the number of threads that poll it changes. believe me, I was shocked to learn that the system works this way, but it exists and it really works.","body":"@ M. Deinum I poll the third-party system with a very short time interval. I do this in N threads. Periodically, you need to take data at a faster rate and for this the number of threads that poll it changes. believe me, I was shocked to learn that the system works this way, but it exists and it really works."},{"owner":{"account_id":2861266,"reputation":6734,"user_id":4781349,"accept_rate":33,"display_name":"ip696"},"score":0,"creation_date":1536066743,"post_id":52166906,"comment_id":91284011,"body_markdown":"My system sends a request to another system. the third-party system says - well, I accepted your request and put it in the queue for processing. And after that I start constantly asking her - are there any answers for me?","body":"My system sends a request to another system. the third-party system says - well, I accepted your request and put it in the queue for processing. And after that I start constantly asking her - are there any answers for me?"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1536083056,"post_id":52166906,"comment_id":91293688,"body_markdown":"But why would you need more threads for that? Design the tasks in such a way that they poll, if there is nothing, let them sleep for a bit (not 10 seconds) and poll again. You don&#39;t need 10 or 100 threads for that.","body":"But why would you need more threads for that? Design the tasks in such a way that they poll, if there is nothing, let them sleep for a bit (not 10 seconds) and poll again. You don&#39;t need 10 or 100 threads for that."},{"owner":{"account_id":2861266,"reputation":6734,"user_id":4781349,"accept_rate":33,"display_name":"ip696"},"score":0,"creation_date":1536133238,"post_id":52166906,"comment_id":91309328,"body_markdown":"@M. Deinum I did not understand very well what you mean. My server will be installed in different locations. by default there will be 50 threads and intrudal in 10 milliseconds. This will be enough to parse the third-party server queue. Most answers will be - for you there is nothing. But there are times when the queue is full, and my server will not be able to disassemble it. you need to increase the number of threads. This is my technical task from the lead","body":"@M. Deinum I did not understand very well what you mean. My server will be installed in different locations. by default there will be 50 threads and intrudal in 10 milliseconds. This will be enough to parse the third-party server queue. Most answers will be - for you there is nothing. But there are times when the queue is full, and my server will not be able to disassemble it. you need to increase the number of threads. This is my technical task from the lead"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1536136595,"post_id":52166906,"comment_id":91311276,"body_markdown":"Imho that task is wrong... If you need more threads then create more threads. But that isn&#39;t a solution but rather a hack/workaround for the real problem. The real problem, imho, is that it is implemented in a wrong way. With a proper implementation you can achieve what you want with the same amount of threads.","body":"Imho that task is wrong... If you need more threads then create more threads. But that isn&#39;t a solution but rather a hack/workaround for the real problem. The real problem, imho, is that it is implemented in a wrong way. With a proper implementation you can achieve what you want with the same amount of threads."}],"answers":[{"tags":[],"owner":{"account_id":6915299,"reputation":397,"user_id":5309807,"display_name":"Markus Mauksch"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1536083011,"creation_date":1536066135,"answer_id":52166985,"question_id":52166906,"body_markdown":"According to the documentation you can resize the scheduler at runtime by calling setPoolSize() (see: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/scheduling/concurrent/ThreadPoolTaskScheduler.html#setPoolSize-int-)\r\n\r\nThe problem is: you need to have a reference to the specific class `ThreadPoolTaskScheduler` instead of the interface `TaskScheduler`. \r\n\r\nYou need to decide if you want to change the references from `TaskScheduler` to `ThreadPoolTaskScheduler` without breaking anyhting in your code","title":"ThreadPoolTaskScheduler change poolSize in runtime","body":"<p>According to the documentation you can resize the scheduler at runtime by calling setPoolSize() (see: <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/scheduling/concurrent/ThreadPoolTaskScheduler.html#setPoolSize-int-\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/scheduling/concurrent/ThreadPoolTaskScheduler.html#setPoolSize-int-</a>)</p>\n\n<p>The problem is: you need to have a reference to the specific class <code>ThreadPoolTaskScheduler</code> instead of the interface <code>TaskScheduler</code>. </p>\n\n<p>You need to decide if you want to change the references from <code>TaskScheduler</code> to <code>ThreadPoolTaskScheduler</code> without breaking anyhting in your code</p>\n"}],"owner":{"account_id":2861266,"reputation":6734,"user_id":4781349,"accept_rate":33,"display_name":"ip696"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1723,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689353582,"creation_date":1536065844,"question_id":52166906,"body_markdown":"I create a scheduler:\r\n\r\n    @Bean\r\n    TaskScheduler taskScheduler(){\r\n        ThreadPoolTaskScheduler threadPoolTaskScheduler = new ThreadPoolTaskScheduler();\r\n        threadPoolTaskScheduler.setPoolSize(5);\r\n        threadPoolTaskScheduler.setAwaitTerminationSeconds(60);\r\n        threadPoolTaskScheduler.setThreadNamePrefix(&quot;Test-&quot;);\r\n        return threadPoolTaskScheduler;\r\n    }\r\n\r\n\r\nI wait next:\r\n\r\nEach 1 second triggered my scheduled method and start 5 threads(`PoolSize(5)`) and each thread will make my logic. For that I create scheduled method in @Component bean:\r\n\r\n\r\n    @Slf4j\r\n    @Component\r\n    public class MyScheduler {\r\n    \r\n        private final TaskScheduler taskScheduler;\r\n    \r\n        public MyScheduler(TaskScheduler taskScheduler) {\r\n            this.taskScheduler = taskScheduler;\r\n        }\r\n    \r\n        @Scheduled(fixedDelay = 1000L)\r\n        public void test(){\r\n            taskScheduler.schedule(() -&gt; {\r\n                try {\r\n                    Thread.sleep(9000L);\r\n                } catch (InterruptedException e) {\r\n                    e.printStackTrace();\r\n                }\r\n                log.info(&quot;test&quot;);\r\n            }, new Date());\r\n    \r\n        }\r\n    }\r\n\r\nIt works fine. \r\n\r\neach 1 second start `test()` method and work 9 seconds. On 5 secon I have full threadPool and wait first free thread. If I set `sleep(5000L)` - threadPool can not fill up.\r\n\r\nBut now I need to change the poolSize in runtime. For example from 5 to 10. How can I do it?","title":"ThreadPoolTaskScheduler change poolSize in runtime","body":"<p>I create a scheduler:</p>\n<pre><code>@Bean\nTaskScheduler taskScheduler(){\n    ThreadPoolTaskScheduler threadPoolTaskScheduler = new ThreadPoolTaskScheduler();\n    threadPoolTaskScheduler.setPoolSize(5);\n    threadPoolTaskScheduler.setAwaitTerminationSeconds(60);\n    threadPoolTaskScheduler.setThreadNamePrefix(&quot;Test-&quot;);\n    return threadPoolTaskScheduler;\n}\n</code></pre>\n<p>I wait next:</p>\n<p>Each 1 second triggered my scheduled method and start 5 threads(<code>PoolSize(5)</code>) and each thread will make my logic. For that I create scheduled method in @Component bean:</p>\n<pre><code>@Slf4j\n@Component\npublic class MyScheduler {\n\n    private final TaskScheduler taskScheduler;\n\n    public MyScheduler(TaskScheduler taskScheduler) {\n        this.taskScheduler = taskScheduler;\n    }\n\n    @Scheduled(fixedDelay = 1000L)\n    public void test(){\n        taskScheduler.schedule(() -&gt; {\n            try {\n                Thread.sleep(9000L);\n            } catch (InterruptedException e) {\n                e.printStackTrace();\n            }\n            log.info(&quot;test&quot;);\n        }, new Date());\n\n    }\n}\n</code></pre>\n<p>It works fine.</p>\n<p>each 1 second start <code>test()</code> method and work 9 seconds. On 5 secon I have full threadPool and wait first free thread. If I set <code>sleep(5000L)</code> - threadPool can not fill up.</p>\n<p>But now I need to change the poolSize in runtime. For example from 5 to 10. How can I do it?</p>\n"},{"tags":["java","html","validation","jtidy"],"answers":[{"tags":[],"owner":{"account_id":2145385,"reputation":2499,"user_id":1903108,"accept_rate":80,"display_name":"Tariq"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1451425720,"creation_date":1414499699,"answer_id":26608501,"question_id":26608365,"body_markdown":"According to the documentation you can get total error counts for your last parse operation using [getParseErrors][1]\r\n\r\n\r\n  [1]: http://jtidy.sourceforge.net/apidocs/org/w3c/tidy/Tidy.html#getParseErrors()\r\n\r\nSo you can do something like\r\n\r\n    private boolean isValid(String htmlData){\r\n       Tidy tidy = new Tidy();\r\n       InputStream stream = new ByteArrayInputStream(htmlData.getBytes());\r\n       tidy.parse(stream, System.out);\r\n       return (tidy.getParseErrors() == 0);\r\n    }","title":"How to validate HTML using JTidy?","body":"<p>According to the documentation you can get total error counts for your last parse operation using <a href=\"http://jtidy.sourceforge.net/apidocs/org/w3c/tidy/Tidy.html#getParseErrors()\" rel=\"nofollow\">getParseErrors</a></p>\n\n<p>So you can do something like</p>\n\n<pre><code>private boolean isValid(String htmlData){\n   Tidy tidy = new Tidy();\n   InputStream stream = new ByteArrayInputStream(htmlData.getBytes());\n   tidy.parse(stream, System.out);\n   return (tidy.getParseErrors() == 0);\n}\n</code></pre>\n"}],"owner":{"account_id":2458107,"reputation":1484,"user_id":2142786,"accept_rate":29,"display_name":"user2142786"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3113,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1689353505,"creation_date":1414499226,"question_id":26608365,"body_markdown":"I want to validate my HTML using JTidy. I want a response of true or false if it is valid or not, respectively. Currently I am using this code:\r\n\r\n    String htmlData = &quot;&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;&lt;div&gt;Hello Java &lt;/div&gt;&lt;/body&gt;&lt;/html&gt;&quot;;  \r\n    Tidy tidy = new Tidy();\r\n    \r\n    InputStream stream = new ByteArrayInputStream(htmlData.getBytes());\r\n    tidy.parse(stream, System.out);\r\n\r\nIs there a way to get a boolean response whether my HTML is valid or not?","title":"How to validate HTML using JTidy?","body":"<p>I want to validate my HTML using JTidy. I want a response of true or false if it is valid or not, respectively. Currently I am using this code:</p>\n<pre><code>String htmlData = &quot;&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;&lt;div&gt;Hello Java &lt;/div&gt;&lt;/body&gt;&lt;/html&gt;&quot;;  \nTidy tidy = new Tidy();\n\nInputStream stream = new ByteArrayInputStream(htmlData.getBytes());\ntidy.parse(stream, System.out);\n</code></pre>\n<p>Is there a way to get a boolean response whether my HTML is valid or not?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":5,"creation_date":1689159329,"post_id":76669782,"comment_id":135173022,"body_markdown":"The stack frames that contain the local variables and recently-returned return values are part of the GC roots, so everything on there is considered a &quot;root reference&quot;, so to say. Also that the &quot;stop the world&quot; model you describe in the first sentence isn&#39;t *necessarily* true for all GC implementations. Some never stop the whole JVM.","body":"The stack frames that contain the local variables and recently-returned return values are part of the GC roots, so everything on there is considered a &quot;root reference&quot;, so to say. Also that the &quot;stop the world&quot; model you describe in the first sentence isn&#39;t <i>necessarily</i> true for all GC implementations. Some never stop the whole JVM."},{"owner":{"account_id":27557975,"reputation":23,"user_id":22215161,"display_name":"user22215161"},"score":0,"creation_date":1689159857,"post_id":76669782,"comment_id":135173153,"body_markdown":"is that the stack frame itself is considered the gc root? then, how do know that stack frame is related to the heap instance? \nthank you","body":"is that the stack frame itself is considered the gc root? then, how do know that stack frame is related to the heap instance?  thank you"},{"owner":{"account_id":24885,"reputation":30828,"user_id":63550,"accept_rate":78,"display_name":"Peter Mortensen"},"score":0,"creation_date":1689353404,"post_id":76669782,"comment_id":135206584,"body_markdown":"The title ought to be more specific.","body":"The title ought to be more specific."}],"answers":[{"comments":[{"owner":{"account_id":27557975,"reputation":23,"user_id":22215161,"display_name":"user22215161"},"score":1,"creation_date":1689160596,"post_id":76669823,"comment_id":135173310,"body_markdown":"As far as I know, the data returned from programming languages ​​is stored in registers and then object ref = this.returnRef(); when execute the statement, it actually initializes the variable. \nthen Doesn&#39;t that mean the ref variable has no reference?","body":"As far as I know, the data returned from programming languages ​​is stored in registers and then object ref = this.returnRef(); when execute the statement, it actually initializes the variable.  then Doesn&#39;t that mean the ref variable has no reference?"},{"owner":{"account_id":27810413,"reputation":456,"user_id":21232911,"display_name":"nischal sharma"},"score":1,"creation_date":1689161005,"post_id":76669823,"comment_id":135173383,"body_markdown":"@user22215161 yes you are right. I have edited my answer accordingly now. Thanks for pointing out the mistake.","body":"@user22215161 yes you are right. I have edited my answer accordingly now. Thanks for pointing out the mistake."},{"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":3,"creation_date":1689161425,"post_id":76669823,"comment_id":135173461,"body_markdown":"Note that the JVM spec doesn&#39;t talk about registers: it describes an abstract (stack-based) machine that an actual JVM can implement however it wants. If the JVM wants to return the return value in a register (as is common in other languages), then it would have to make sure that it&#39;s still registered as part of the current stack frame in some way.","body":"Note that the JVM spec doesn&#39;t talk about registers: it describes an abstract (stack-based) machine that an actual JVM can implement however it wants. If the JVM wants to return the return value in a register (as is common in other languages), then it would have to make sure that it&#39;s still registered as part of the current stack frame in some way."},{"owner":{"account_id":27557975,"reputation":23,"user_id":22215161,"display_name":"user22215161"},"score":0,"creation_date":1689162869,"post_id":76669823,"comment_id":135173735,"body_markdown":"that means the return value is stored in a stack frame and not in a register?  \nIs it a special behavior of the jvm? I just found out now..\nThanks so much","body":"that means the return value is stored in a stack frame and not in a register?   Is it a special behavior of the jvm? I just found out now.. Thanks so much"},{"owner":{"account_id":5919781,"reputation":29352,"user_id":4657412,"display_name":"DavidW"},"score":2,"creation_date":1689233233,"post_id":76669823,"comment_id":135184927,"body_markdown":"This answer looks like ChatGPT","body":"This answer looks like ChatGPT"},{"owner":{"account_id":5919781,"reputation":29352,"user_id":4657412,"display_name":"DavidW"},"score":1,"creation_date":1689268813,"post_id":76669823,"comment_id":135193122,"body_markdown":"@nischalsharma I believe I downvoted two of your posts (I didn&#39;t downvote this one). I don&#39;t think the system will let me downvote more. The other downvotes came from other people. I think my comment is accurate and they are ChatGPT, and therefore it&#39;s a useful comment to let people know that the answer has a high chance of being wrong. I believe your most recent answers are also ChatGPT, although it looks like you&#39;ve tried to hide it. Please read https://stackoverflow.com/help/gpt-policy","body":"@nischalsharma I believe I downvoted two of your posts (I didn&#39;t downvote this one). I don&#39;t think the system will let me downvote more. The other downvotes came from other people. I think my comment is accurate and they are ChatGPT, and therefore it&#39;s a useful comment to let people know that the answer has a high chance of being wrong. I believe your most recent answers are also ChatGPT, although it looks like you&#39;ve tried to hide it. Please read <a href=\"https://stackoverflow.com/help/gpt-policy\">stackoverflow.com/help/gpt-policy</a>"},{"owner":{"account_id":24885,"reputation":30828,"user_id":63550,"accept_rate":78,"display_name":"Peter Mortensen"},"score":0,"creation_date":1689353215,"post_id":76669823,"comment_id":135206537,"body_markdown":"@DavidW: Agreed. The writing style in this one is totally out of whack with other (recent) answers.","body":"@DavidW: Agreed. The writing style in this one is totally out of whack with other (recent) answers."},{"owner":{"account_id":24885,"reputation":30828,"user_id":63550,"accept_rate":78,"display_name":"Peter Mortensen"},"score":0,"creation_date":1689353245,"post_id":76669823,"comment_id":135206542,"body_markdown":"Related: *[Temporary policy: Generative AI (e.g., ChatGPT) is banned](https://meta.stackoverflow.com/questions/421831/temporary-policy-chatgpt-is-banned)*","body":"Related: <i><a href=\"https://meta.stackoverflow.com/questions/421831/temporary-policy-chatgpt-is-banned\">Temporary policy: Generative AI (e.g., ChatGPT) is banned</a></i>"}],"tags":[],"owner":{"account_id":27810413,"reputation":456,"user_id":21232911,"display_name":"nischal sharma"},"comment_count":8,"down_vote_count":2,"up_vote_count":4,"is_accepted":true,"score":2,"last_activity_date":1689160955,"creation_date":1689159545,"answer_id":76669823,"question_id":76669782,"body_markdown":"In the specific case of the Java code you provided, the reference returned by the returnRef() method will be stored on the stack frame of the main() method until it is assigned to the ref variable. This is because the Java Virtual Machine (JVM) specification requires that method results be stored in memory, rather than being solely held in registers. Therefore, the JVM ensures that the object reference is available and can be assigned to the ref variable.\r\n\r\nOnce the returnRef() method is executed, it will return the reference to the newly created Object, and the JVM will store this reference in memory, making it accessible to the main() method. When the ref variable is assigned this reference, it becomes a valid reference to the object, and the object remains reachable.\r\n\r\nIn this case, if garbage collection were to occur immediately after the returnRef() method is executed and before the assignment to ref, the GC would still recognize that the object is reachable. It would consider the object reachable through the stack frame of the returnRef() method, even though the ref variable in the main() method has not yet been initialized.","title":"Questions about the Garbage Collector","body":"<p>In the specific case of the Java code you provided, the reference returned by the returnRef() method will be stored on the stack frame of the main() method until it is assigned to the ref variable. This is because the Java Virtual Machine (JVM) specification requires that method results be stored in memory, rather than being solely held in registers. Therefore, the JVM ensures that the object reference is available and can be assigned to the ref variable.</p>\n<p>Once the returnRef() method is executed, it will return the reference to the newly created Object, and the JVM will store this reference in memory, making it accessible to the main() method. When the ref variable is assigned this reference, it becomes a valid reference to the object, and the object remains reachable.</p>\n<p>In this case, if garbage collection were to occur immediately after the returnRef() method is executed and before the assignment to ref, the GC would still recognize that the object is reachable. It would consider the object reachable through the stack frame of the returnRef() method, even though the ref variable in the main() method has not yet been initialized.</p>\n"}],"owner":{"account_id":27557975,"reputation":23,"user_id":22215161,"display_name":"user22215161"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":100,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":76669823,"answer_count":1,"score":1,"last_activity_date":1689353365,"creation_date":1689159187,"question_id":76669782,"body_markdown":"GC periodically suspends execution while the application is running. It marks the currently referenced object by referring to the method area and stack reference variables. Then the unreferenced objects are removed.\r\n\r\nAnd suddenly I have a question.\r\n\r\n```\r\npublic static void main(String[] args) {\r\n\r\n   Object ref = this.returnRef();\r\n\r\n}\r\n\r\npublic Object returnRef() {\r\n\r\n   return new Object();\r\n\r\n}\r\n```\r\n\r\nWhen there is the above code, the reference to return new Object() is returned and the ref variable is normally initialized, but *if* we assume that GC is executed right after returning, how will GC recognize this and judge it as an object being referenced? (while the reference variable ref is not yet in the stack frame)?\r\n\r\n\r\n\r\n\r\n","title":"Questions about the Garbage Collector","body":"<p>GC periodically suspends execution while the application is running. It marks the currently referenced object by referring to the method area and stack reference variables. Then the unreferenced objects are removed.</p>\n<p>And suddenly I have a question.</p>\n<pre><code>public static void main(String[] args) {\n\n   Object ref = this.returnRef();\n\n}\n\npublic Object returnRef() {\n\n   return new Object();\n\n}\n</code></pre>\n<p>When there is the above code, the reference to return new Object() is returned and the ref variable is normally initialized, but <em>if</em> we assume that GC is executed right after returning, how will GC recognize this and judge it as an object being referenced? (while the reference variable ref is not yet in the stack frame)?</p>\n"},{"tags":["java","powershell"],"comments":[{"owner":{"account_id":235911,"reputation":23311,"user_id":503046,"display_name":"vonPryz"},"score":1,"creation_date":1689353582,"post_id":76689719,"comment_id":135206628,"body_markdown":"Powershell doesn&#39;t support Java archives, so what you are trying to do will not work. Either use Java all the way, use ODBC, or [DB2 native .Net](https://www.ibm.com/docs/en/db2-warehouse?topic=programmatically-net) library.","body":"Powershell doesn&#39;t support Java archives, so what you are trying to do will not work. Either use Java all the way, use ODBC, or <a href=\"https://www.ibm.com/docs/en/db2-warehouse?topic=programmatically-net\" rel=\"nofollow noreferrer\">DB2 native .Net</a> library."},{"owner":{"account_id":946589,"reputation":23,"user_id":973733,"display_name":"Papa Dilbert"},"score":0,"creation_date":1689357855,"post_id":76689719,"comment_id":135207412,"body_markdown":"Interesting. ChatGPT provided the solution to use Add-Type -P with a jar. It&#39;s not so smart after all. Thanks!","body":"Interesting. ChatGPT provided the solution to use Add-Type -P with a jar. It&#39;s not so smart after all. Thanks!"}],"owner":{"account_id":946589,"reputation":23,"user_id":973733,"display_name":"Papa Dilbert"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689353271,"creation_date":1689353271,"question_id":76689719,"body_markdown":"I&#39;m attempting to use Windows Powershell to query a DB2 database using db2jcc.jar to connect.\r\n\r\n$classpath is set to the Windows path of db2jcc.jar.\r\n\r\nAdd-Type -Path &quot;$classpath&quot; \r\n\r\nfails with messsage:\r\nAdd-Type : Cannot add type. The &quot;.JAR&quot; extension is not supported.\r\n\r\nSo how do I use jdbc to connect to DB2 with Powershell?\r\n\r\n","title":"Windows Powershell AddType jar extension not supported","body":"<p>I'm attempting to use Windows Powershell to query a DB2 database using db2jcc.jar to connect.</p>\n<p>$classpath is set to the Windows path of db2jcc.jar.</p>\n<p>Add-Type -Path &quot;$classpath&quot;</p>\n<p>fails with messsage:\nAdd-Type : Cannot add type. The &quot;.JAR&quot; extension is not supported.</p>\n<p>So how do I use jdbc to connect to DB2 with Powershell?</p>\n"},{"tags":["java","postgresql","tomcat","datasource","jndi"],"answers":[{"comments":[{"owner":{"account_id":5459164,"reputation":1126,"user_id":4366957,"accept_rate":88,"display_name":"jwi"},"score":0,"creation_date":1442392815,"post_id":32582307,"comment_id":53059056,"body_markdown":"With the last tutorial I&#39;ve finally understand to handle db-connections with `JNDI`. Thank you &amp; Cheers!","body":"With the last tutorial I&#39;ve finally understand to handle db-connections with <code>JNDI</code>. Thank you &amp; Cheers!"}],"tags":[],"owner":{"account_id":5629908,"reputation":1224,"user_id":4457144,"accept_rate":60,"display_name":"vincent"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1442308822,"creation_date":1442308822,"answer_id":32582307,"question_id":32581833,"body_markdown":"for the second question, deployed means that your datasource is declared in the context.xml in tomcat.\r\nHere is an example of an oracle database (you have to change the driver  for postgres) : \r\n\r\n    &lt;Resource name=&quot;jdbc/myoracle&quot; auth=&quot;Container&quot;\r\n                  type=&quot;javax.sql.DataSource&quot; driverClassName=&quot;oracle.jdbc.OracleDriver&quot;\r\n                  url=&quot;jdbc:oracle:thin:@127.0.0.1:1521:mysid&quot;\r\n                  username=&quot;scott&quot; password=&quot;tiger&quot; maxTotal=&quot;20&quot; maxIdle=&quot;10&quot;\r\n                  maxWaitMillis=&quot;-1&quot;/&gt;\r\n\r\nAfter that, you can code the java part, for that you can watch this link http://www.javapractices.com/topic/TopicAction.do?Id=127\r\n\r\nFor a complete example, there&#39;s a good tutorial here http://alvinalexander.com/blog/post/java/how-configure-tomcat-dbcp-connection-pool-pooling-postgres.\r\n\r\nHope this help\r\n","title":"Working with DataSource and Tomcat JNDI API","body":"<p>for the second question, deployed means that your datasource is declared in the context.xml in tomcat.\nHere is an example of an oracle database (you have to change the driver  for postgres) : </p>\n\n<pre><code>&lt;Resource name=\"jdbc/myoracle\" auth=\"Container\"\n              type=\"javax.sql.DataSource\" driverClassName=\"oracle.jdbc.OracleDriver\"\n              url=\"jdbc:oracle:thin:@127.0.0.1:1521:mysid\"\n              username=\"scott\" password=\"tiger\" maxTotal=\"20\" maxIdle=\"10\"\n              maxWaitMillis=\"-1\"/&gt;\n</code></pre>\n\n<p>After that, you can code the java part, for that you can watch this link <a href=\"http://www.javapractices.com/topic/TopicAction.do?Id=127\" rel=\"nofollow\">http://www.javapractices.com/topic/TopicAction.do?Id=127</a></p>\n\n<p>For a complete example, there's a good tutorial here <a href=\"http://alvinalexander.com/blog/post/java/how-configure-tomcat-dbcp-connection-pool-pooling-postgres\" rel=\"nofollow\">http://alvinalexander.com/blog/post/java/how-configure-tomcat-dbcp-connection-pool-pooling-postgres</a>.</p>\n\n<p>Hope this help</p>\n"}],"owner":{"account_id":5459164,"reputation":1126,"user_id":4366957,"accept_rate":88,"display_name":"jwi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3668,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":32582307,"answer_count":1,"score":1,"last_activity_date":1689352631,"creation_date":1442307479,"question_id":32581833,"body_markdown":"I&#39;m trying to understand establishing a database-connection with a `DataSource Object` and the `JNDI API`.\r\n\r\nI&#39;m working with Intellij UE and have a local `Tomcat-8`- and `Postgres-Server` running.\r\n\r\nI proceed as mentioned in the Oracle Java Documentation:\r\n\r\n1. Creating Instance of `DataSource Class` and Setting its Properties\r\n\r\n        org.postgresql.ds.PGSimpleDataSource dataSource = new org.postgresql.ds.PGSimpleDataSource();\r\n        dataSource.setServerName(&quot;localhost&quot;);\r\n        dataSource.setDatabaseName(&quot;db01&quot;);\r\n        dataSource.setUser(&quot;jwi&quot;);\r\n        dataSource.setPassword(&quot;password&quot;);\r\n\r\n2. Registering `DataSource Object` with Naming Service That Uses `JNDI API`\r\n\r\n        Context ctx = null;\r\n\r\n        try {\r\n            ctx = new InitialContext();\r\n            ctx.bind(&quot;jdbc/localDB&quot;, dataSource);\r\n        } catch (NamingException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\nThe Oracle Documentation says:\r\n\r\n&gt; With the properties set, the system administrator can register the BasicDataSource object with a JNDI (Java Naming and Directory Interface) naming service.\r\n\r\nSo my first Question is: What means to register a `DataSource`? Is my code obove already the registration of an `DataSource Object` to `JNDI`?\r\n\r\n3. Using Deployed `DataSource Object`\r\n\r\n        try {\r\n\r\n            Context ctx = new InitialContext();\r\n            DataSource ds = (DataSource) ctx.lookup(&quot;jdbc/localDB&quot;);\r\n            dbCon = ds.getConnection();\r\n            ...\r\n\r\nIn this code cutting IntelliJ always claims, that it can&#39;t resolve the method `getConnection()`.\r\n\r\nThe Oracle Documentation says:\r\n\r\n&gt; After a basic DataSource implementation is deployed by a system administrator, it is ready for a programmer to use.\r\n\r\nSo my second Question is: What exactly means deployed in this case? Creating a `DataSource Instance` and execute the registration with `JDNI`? Or does deployed mean the `Tomcat` `context.xml` and `web.xml` configuration ([Tomcat 8 JNDI How-To][1])?\r\n\r\nI&#39;d really appreciate if anybody has a good step by step instruction for this issue, in fact that the Oracle Documentation isn&#39;t really clear about some points imho.\r\n\r\n  [1]: https://tomcat.apache.org/tomcat-8.0-doc/jndi-datasource-examples-howto.html","title":"Working with DataSource and Tomcat JNDI API","body":"<p>I'm trying to understand establishing a database-connection with a <code>DataSource Object</code> and the <code>JNDI API</code>.</p>\n\n<p>I'm working with Intellij UE and have a local <code>Tomcat-8</code>- and <code>Postgres-Server</code> running.</p>\n\n<p>I proceed as mentioned in the Oracle Java Documentation:</p>\n\n<ol>\n<li><p>Creating Instance of <code>DataSource Class</code> and Setting its Properties</p>\n\n<pre><code>org.postgresql.ds.PGSimpleDataSource dataSource = new org.postgresql.ds.PGSimpleDataSource();\ndataSource.setServerName(\"localhost\");\ndataSource.setDatabaseName(\"db01\");\ndataSource.setUser(\"jwi\");\ndataSource.setPassword(\"password\");\n</code></pre></li>\n<li><p>Registering <code>DataSource Object</code> with Naming Service That Uses <code>JNDI API</code></p>\n\n<pre><code>Context ctx = null;\n\ntry {\n    ctx = new InitialContext();\n    ctx.bind(\"jdbc/localDB\", dataSource);\n} catch (NamingException e) {\n    e.printStackTrace();\n}\n</code></pre></li>\n</ol>\n\n<p>The Oracle Documentation says:</p>\n\n<blockquote>\n  <p>With the properties set, the system administrator can register the BasicDataSource object with a JNDI (Java Naming and Directory Interface) naming service.</p>\n</blockquote>\n\n<p>So my first Question is: What means to register a <code>DataSource</code>? Is my code obove already the registration of an <code>DataSource Object</code> to <code>JNDI</code>?</p>\n\n<ol start=\"3\">\n<li><p>Using Deployed <code>DataSource Object</code></p>\n\n<pre><code>try {\n\n    Context ctx = new InitialContext();\n    DataSource ds = (DataSource) ctx.lookup(\"jdbc/localDB\");\n    dbCon = ds.getConnection();\n    ...\n</code></pre></li>\n</ol>\n\n<p>In this code cutting IntelliJ always claims, that it can't resolve the method <code>getConnection()</code>.</p>\n\n<p>The Oracle Documentation says:</p>\n\n<blockquote>\n  <p>After a basic DataSource implementation is deployed by a system administrator, it is ready for a programmer to use.</p>\n</blockquote>\n\n<p>So my second Question is: What exactly means deployed in this case? Creating a <code>DataSource Instance</code> and execute the registration with <code>JDNI</code>? Or does deployed mean the <code>Tomcat</code> <code>context.xml</code> and <code>web.xml</code> configuration (<a href=\"https://tomcat.apache.org/tomcat-8.0-doc/jndi-datasource-examples-howto.html\" rel=\"nofollow\">Tomcat 8 JNDI How-To</a>)?</p>\n\n<p>I'd really appreciate if anybody has a good step by step instruction for this issue, in fact that the Oracle Documentation isn't really clear about some points imho.</p>\n"},{"tags":["java","java-module","java-platform-module-system"],"comments":[{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":3,"creation_date":1669803049,"post_id":74582070,"comment_id":131724083,"body_markdown":"Your problem is entirely unrelated to modules. If you load class `Foo` through `Interpreters$ClassLoaders$$anon$1@45815ffc` and another class `Foo` through `Loader@e9b78b0`, these are different classes. Whether these `Foo` classes belong to a module, doesn’t matter.","body":"Your problem is entirely unrelated to modules. If you load class <code>Foo</code> through <code>Interpreters$ClassLoaders$$anon$1@45815ffc</code> and another class <code>Foo</code> through <code>Loader@e9b78b0</code>, these are different classes. Whether these <code>Foo</code> classes belong to a module, doesn’t matter."}],"answers":[{"tags":[],"owner":{"account_id":21851467,"reputation":682,"user_id":16143492,"display_name":"nineninesevenfour"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689352610,"creation_date":1689348643,"answer_id":76689193,"question_id":74582070,"body_markdown":"The comment from @Holger names the problem: That `Foo` isn&#39;t `Foo` as soon as they are both loaded by different class/module loaders.\r\n\r\nLet me sketch two different approaches:\r\n\r\nSolution1: The module way\r\n---\r\nThe goal here is to have class `Foo` only loaded once.\r\nTo achieve this the application with the code above should be in a module as well and require `Model`:\r\n```java\r\nmodule App {\r\n    requires Model;\r\n}\r\n```\r\nTo make this work you have additionally to avoid having `Model` loaded a second time through the presented code. This can be achieved either (a) by *not* having it placed into `&quot;\\\\model\\\\lib\\\\EC&quot;`. Or by (b) changing the order of `ModuleFinder`s in `Configuration.resolve()`:\r\n```\r\nConfiguration cf = parent.configuration().resolve(ModuleFinder.of(), finder. Set.of(&quot;Implementation&quot;));\r\n```\r\nThis way `Implementation` will use the version of `Model` present in the module path of the calling code and not load it via `finder`. \r\n\r\nSolution 2: Use a proxy\r\n---\r\nThis requires `Foo` to be an interface.\r\n\r\nYou could have a method `proxyOf` that looks like this:\r\n```java\r\n    private Foo proxyOf(Object result) {\r\n        InvocationHandler handler = (proxy, method, args) -&gt; {\r\n            Method delegate = result.getClass().getMethod(method.getName(), method.getParameterTypes());\r\n            return delegate.invoke(result, args);\r\n        };\r\n        return (Foo) Proxy.newProxyInstance(this.getClass().getClassLoader(), new Class[]{ Foo.class }, handler);\r\n    }\r\n```\r\nThis way you can have two versions of `Foo`. You just have to get sure, that the application code is actually allowed to access method `delegate`. So it (and the containing implementation class) must either be `public` or you will need an additional `delegate.setAccessible(true);` before calling it. If the application is within a module (like in Solution 1), the package of `delegate` must be opened through the `opens` clause:\r\n```java\r\nmodule Implementation {\r\n    requires transitive Model;\r\n    exports org.example.impl;\r\n    opens org.example.impl;\r\n}\r\n```\r\nPlease not that there is a _**major pitfall**_ in the proxy solution: It works well as long as you are passing types of the JRE, but as soon as you pass your own types `method.getParameterTypes()` will return the wrong types leading to a `NoSuchMethodException`. Even when you manage to get the correct types you would need to pass proxies of that types. Then all this will get *really* complicated and you will end up with your own little &quot;back and forth proxyfication&quot; framework.\r\n\r\nFinal notes\r\n---\r\nUnfortunately you do not describe what you *actually* want to achieve. So we cannot know what problem you want to solve with it and why you need the code above. Honestly, it seems quite difficult to me that your code could be maintained by someone else. Maybe you could achieve the same thing by using [`ServiceLoader`][1]?\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/ServiceLoader.html","title":"How to cast object returned from Module","body":"<p>The comment from @Holger names the problem: That <code>Foo</code> isn't <code>Foo</code> as soon as they are both loaded by different class/module loaders.</p>\n<p>Let me sketch two different approaches:</p>\n<h2>Solution1: The module way</h2>\n<p>The goal here is to have class <code>Foo</code> only loaded once.\nTo achieve this the application with the code above should be in a module as well and require <code>Model</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>module App {\n    requires Model;\n}\n</code></pre>\n<p>To make this work you have additionally to avoid having <code>Model</code> loaded a second time through the presented code. This can be achieved either (a) by <em>not</em> having it placed into <code>&quot;\\\\model\\\\lib\\\\EC&quot;</code>. Or by (b) changing the order of <code>ModuleFinder</code>s in <code>Configuration.resolve()</code>:</p>\n<pre><code>Configuration cf = parent.configuration().resolve(ModuleFinder.of(), finder. Set.of(&quot;Implementation&quot;));\n</code></pre>\n<p>This way <code>Implementation</code> will use the version of <code>Model</code> present in the module path of the calling code and not load it via <code>finder</code>.</p>\n<h2>Solution 2: Use a proxy</h2>\n<p>This requires <code>Foo</code> to be an interface.</p>\n<p>You could have a method <code>proxyOf</code> that looks like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    private Foo proxyOf(Object result) {\n        InvocationHandler handler = (proxy, method, args) -&gt; {\n            Method delegate = result.getClass().getMethod(method.getName(), method.getParameterTypes());\n            return delegate.invoke(result, args);\n        };\n        return (Foo) Proxy.newProxyInstance(this.getClass().getClassLoader(), new Class[]{ Foo.class }, handler);\n    }\n</code></pre>\n<p>This way you can have two versions of <code>Foo</code>. You just have to get sure, that the application code is actually allowed to access method <code>delegate</code>. So it (and the containing implementation class) must either be <code>public</code> or you will need an additional <code>delegate.setAccessible(true);</code> before calling it. If the application is within a module (like in Solution 1), the package of <code>delegate</code> must be opened through the <code>opens</code> clause:</p>\n<pre class=\"lang-java prettyprint-override\"><code>module Implementation {\n    requires transitive Model;\n    exports org.example.impl;\n    opens org.example.impl;\n}\n</code></pre>\n<p>Please not that there is a <em><strong>major pitfall</strong></em> in the proxy solution: It works well as long as you are passing types of the JRE, but as soon as you pass your own types <code>method.getParameterTypes()</code> will return the wrong types leading to a <code>NoSuchMethodException</code>. Even when you manage to get the correct types you would need to pass proxies of that types. Then all this will get <em>really</em> complicated and you will end up with your own little &quot;back and forth proxyfication&quot; framework.</p>\n<h2>Final notes</h2>\n<p>Unfortunately you do not describe what you <em>actually</em> want to achieve. So we cannot know what problem you want to solve with it and why you need the code above. Honestly, it seems quite difficult to me that your code could be maintained by someone else. Maybe you could achieve the same thing by using <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/ServiceLoader.html\" rel=\"nofollow noreferrer\"><code>ServiceLoader</code></a>?</p>\n"}],"owner":{"account_id":1457199,"reputation":4503,"user_id":1629242,"accept_rate":56,"display_name":"Amogh"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":155,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689352610,"creation_date":1669464871,"question_id":74582070,"body_markdown":"I trying `ModuleLayer` with JDK 11, I have created two modules `Implementation` and `Model`. Consider the `Implementation` module provides a method which returns an object which is of type `Foo`, the class `Foo` is defined in `Model` module.\r\n\r\nSo module `Implementation` `requires Model;` and module `Model` exports all its namespaces.\r\n\r\nI a separate application, I am creating  `Configuration` to resolve both the modules and created `ModuleLayer` as well. By using `layer.findLoader(&quot;Implementation&quot;).loadClass()` I have loaded a class from `Implementation` module and invoked static method using `method.invoke(null, &quot;test&quot;);`\r\nwhich returns an `Object`.\r\n\r\nNow I don&#39;t understand, how should I can cast this object to `Foo`? I cannot use `(Foo) obj` because the jar of `Model` module is not on classpath. and even if I put it I end up with exception\r\n\r\n`Caused by: java.lang.ClassCastException: class com.test.model.Foo cannot be cast to class com.test.model.Foo (com.test.model.Foo is in module Model of loader jdk.internal.loader.Loader @e9b78b0; com.test.model.Foo is in unnamed module of loader com.company.container.internal.Interpreters$ClassLoaders$$anon$1 @45815ffc)`\r\n\r\n```\r\nObject provider=null;\r\ntry\r\n{\r\n   var path = Path.of(Core.getConfiguration().getBasePath().getPath() ,&quot;\\\\model\\\\lib\\\\EC&quot;);\r\n   ModuleFinder finder = ModuleFinder.of(path);\r\n   var parent = ModuleLayer.boot();\r\n   Configuration cf = parent.configuration().resolve(finder, ModuleFinder.of(), Set.of(&quot;Implementation&quot;));\r\n   ClassLoader scl = this.getClass().getClassLoader(); // intentionally using this class&#39;s loader  \r\n   ModuleLayer layer = parent.defineModulesWithOneLoader(cf, scl);\r\n   var cl = layer.findLoader(&quot;Implementation&quot;);\r\n   Class&lt;?&gt; classTest = cl.loadClass(&quot;com.test.AutoConfiguration&quot;);\r\n   var method = classSendMailFromX.getMethod(&quot;getProvider&quot;, String.class);\r\n   provider = method.invoke(null, &quot;test&quot;);\r\n}\r\ncatch (Exception e) {\r\n   throw new CoreException(e);\r\n}\r\nif(provider == null)\r\n{\r\n   throw new Exception(&quot;provider cannot be empty&quot;);\r\n}\r\n\r\nvar myProvider = (Foo) provider; // This line compiles but calls fails at runtime if I put `Model` module jar on classpath\r\n```\r\n\r\nI understand the reason, that any jar (even if it is a module) at classpath will be treated as unnamed module. But, why I cannot able to cast it? And is there any way to do it? ","title":"How to cast object returned from Module","body":"<p>I trying <code>ModuleLayer</code> with JDK 11, I have created two modules <code>Implementation</code> and <code>Model</code>. Consider the <code>Implementation</code> module provides a method which returns an object which is of type <code>Foo</code>, the class <code>Foo</code> is defined in <code>Model</code> module.</p>\n<p>So module <code>Implementation</code> <code>requires Model;</code> and module <code>Model</code> exports all its namespaces.</p>\n<p>I a separate application, I am creating  <code>Configuration</code> to resolve both the modules and created <code>ModuleLayer</code> as well. By using <code>layer.findLoader(&quot;Implementation&quot;).loadClass()</code> I have loaded a class from <code>Implementation</code> module and invoked static method using <code>method.invoke(null, &quot;test&quot;);</code>\nwhich returns an <code>Object</code>.</p>\n<p>Now I don't understand, how should I can cast this object to <code>Foo</code>? I cannot use <code>(Foo) obj</code> because the jar of <code>Model</code> module is not on classpath. and even if I put it I end up with exception</p>\n<p><code>Caused by: java.lang.ClassCastException: class com.test.model.Foo cannot be cast to class com.test.model.Foo (com.test.model.Foo is in module Model of loader jdk.internal.loader.Loader @e9b78b0; com.test.model.Foo is in unnamed module of loader com.company.container.internal.Interpreters$ClassLoaders$$anon$1 @45815ffc)</code></p>\n<pre><code>Object provider=null;\ntry\n{\n   var path = Path.of(Core.getConfiguration().getBasePath().getPath() ,&quot;\\\\model\\\\lib\\\\EC&quot;);\n   ModuleFinder finder = ModuleFinder.of(path);\n   var parent = ModuleLayer.boot();\n   Configuration cf = parent.configuration().resolve(finder, ModuleFinder.of(), Set.of(&quot;Implementation&quot;));\n   ClassLoader scl = this.getClass().getClassLoader(); // intentionally using this class's loader  \n   ModuleLayer layer = parent.defineModulesWithOneLoader(cf, scl);\n   var cl = layer.findLoader(&quot;Implementation&quot;);\n   Class&lt;?&gt; classTest = cl.loadClass(&quot;com.test.AutoConfiguration&quot;);\n   var method = classSendMailFromX.getMethod(&quot;getProvider&quot;, String.class);\n   provider = method.invoke(null, &quot;test&quot;);\n}\ncatch (Exception e) {\n   throw new CoreException(e);\n}\nif(provider == null)\n{\n   throw new Exception(&quot;provider cannot be empty&quot;);\n}\n\nvar myProvider = (Foo) provider; // This line compiles but calls fails at runtime if I put `Model` module jar on classpath\n</code></pre>\n<p>I understand the reason, that any jar (even if it is a module) at classpath will be treated as unnamed module. But, why I cannot able to cast it? And is there any way to do it?</p>\n"},{"tags":["java","optaplanner","timefold"],"comments":[{"owner":{"account_id":2524334,"reputation":232,"user_id":2193981,"display_name":"Istvan"},"score":0,"creation_date":1689944290,"post_id":76681267,"comment_id":135288477,"body_markdown":"I assume you&#39;re running your constraint tests when this happens. If so, make sure each `@PlanningVariable` is initialized otherwise your `@PlanningEntity` is ignored by the tests, hence the 0 score.","body":"I assume you&#39;re running your constraint tests when this happens. If so, make sure each <code>@PlanningVariable</code> is initialized otherwise your <code>@PlanningEntity</code> is ignored by the tests, hence the 0 score."}],"answers":[{"comments":[{"owner":{"account_id":4005154,"reputation":106,"user_id":3299989,"display_name":"MattWolc24"},"score":0,"creation_date":1689268140,"post_id":76681773,"comment_id":135193011,"body_markdown":"Thank you. I will look into this.","body":"Thank you. I will look into this."},{"owner":{"account_id":4005154,"reputation":106,"user_id":3299989,"display_name":"MattWolc24"},"score":0,"creation_date":1689269058,"post_id":76681773,"comment_id":135193168,"body_markdown":"I&#39;ve added `config.setEnvironmentMode(EnvironmentMode.FULL_ASSERT);` in my code, but no exceptions were thrown when I ran it again.","body":"I&#39;ve added <code>config.setEnvironmentMode(EnvironmentMode.FULL_ASSERT);</code> in my code, but no exceptions were thrown when I ran it again."},{"owner":{"account_id":9133364,"reputation":4450,"user_id":6794063,"display_name":"Luk&#225;š Petrovick&#253;"},"score":0,"creation_date":1689269437,"post_id":76681773,"comment_id":135193235,"body_markdown":"You may also want to try `NON_INTRUSIVE_FULL_ASSERT`. If that also comes up empty, then I question the claim that OptaPlanner breaks a constraint and yet reports 0 broken. The proof would be a runnable piece of code that demonstrates the issue.","body":"You may also want to try <code>NON_INTRUSIVE_FULL_ASSERT</code>. If that also comes up empty, then I question the claim that OptaPlanner breaks a constraint and yet reports 0 broken. The proof would be a runnable piece of code that demonstrates the issue."},{"owner":{"account_id":4005154,"reputation":106,"user_id":3299989,"display_name":"MattWolc24"},"score":0,"creation_date":1689269609,"post_id":76681773,"comment_id":135193266,"body_markdown":"I also just tried `NON_INTRUSIVE_FULL_ASSERT` and did not see any exceptions. They would show up in the terminal right? It&#39;s entirely possible that the hard constraint in my post is not working as I expect. I&#39;m very new to OptaPlanner.","body":"I also just tried <code>NON_INTRUSIVE_FULL_ASSERT</code> and did not see any exceptions. They would show up in the terminal right? It&#39;s entirely possible that the hard constraint in my post is not working as I expect. I&#39;m very new to OptaPlanner."},{"owner":{"account_id":4005154,"reputation":106,"user_id":3299989,"display_name":"MattWolc24"},"score":0,"creation_date":1689273779,"post_id":76681773,"comment_id":135194094,"body_markdown":"How can I provide a runnable piece of code that demonstrates the issue? As in a fat .jar?","body":"How can I provide a runnable piece of code that demonstrates the issue? As in a fat .jar?"},{"owner":{"account_id":9133364,"reputation":4450,"user_id":6794063,"display_name":"Luk&#225;š Petrovick&#253;"},"score":0,"creation_date":1689274336,"post_id":76681773,"comment_id":135194214,"body_markdown":"Preferrably in the form of a Maven/Gradle project, published either in some public repo, or e-mailed. I will need to see the source code to be able to make sense of what&#39;s happening.","body":"Preferrably in the form of a Maven/Gradle project, published either in some public repo, or e-mailed. I will need to see the source code to be able to make sense of what&#39;s happening."},{"owner":{"account_id":4005154,"reputation":106,"user_id":3299989,"display_name":"MattWolc24"},"score":0,"creation_date":1689275440,"post_id":76681773,"comment_id":135194399,"body_markdown":"I will publish my Gradle project in a repository, thank you for your help.","body":"I will publish my Gradle project in a repository, thank you for your help."},{"owner":{"account_id":4005154,"reputation":106,"user_id":3299989,"display_name":"MattWolc24"},"score":0,"creation_date":1689276417,"post_id":76681773,"comment_id":135194577,"body_markdown":"I&#39;ve published it here - https://github.com/matthewjd24/OptaPlanner-Scheduler thank you","body":"I&#39;ve published it here - <a href=\"https://github.com/matthewjd24/OptaPlanner-Scheduler\" rel=\"nofollow noreferrer\">github.com/matthewjd24/OptaPlanner-Scheduler</a> thank you"},{"owner":{"account_id":4005154,"reputation":106,"user_id":3299989,"display_name":"MattWolc24"},"score":0,"creation_date":1689286268,"post_id":76681773,"comment_id":135196055,"body_markdown":"I&#39;ve figured it out... sort of. For one, I was using HILL_CLIMBING local search, which for some reason makes it start breaking my hard constraint. Additionally, if I set up any of my constraints in certain ways, the solver will start breaking the hard constraint again. Still learning why.","body":"I&#39;ve figured it out... sort of. For one, I was using HILL_CLIMBING local search, which for some reason makes it start breaking my hard constraint. Additionally, if I set up any of my constraints in certain ways, the solver will start breaking the hard constraint again. Still learning why."},{"owner":{"account_id":4005154,"reputation":106,"user_id":3299989,"display_name":"MattWolc24"},"score":0,"creation_date":1689346389,"post_id":76681773,"comment_id":135205017,"body_markdown":"I have not figured it out. It seems to randomly break the hard constraint with no penalty to the score. I have upgraded to Timefold hoping that will fix it, but it did not. I have rewritten the constraint multiple times as well but it did not help. The issue persists with `FULL_ASSERT` and `NON_INTRUSIVE_FULL_ASSERT` as well.","body":"I have not figured it out. It seems to randomly break the hard constraint with no penalty to the score. I have upgraded to Timefold hoping that will fix it, but it did not. I have rewritten the constraint multiple times as well but it did not help. The issue persists with <code>FULL_ASSERT</code> and <code>NON_INTRUSIVE_FULL_ASSERT</code> as well."}],"tags":[],"owner":{"account_id":9133364,"reputation":4450,"user_id":6794063,"display_name":"Luk&#225;š Petrovick&#253;"},"comment_count":10,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689267820,"creation_date":1689267820,"answer_id":76681773,"question_id":76681267,"body_markdown":"What you&#39;re describing sounds a lot like a score corruption. Enable `[FULL_ASSERT][1]` to confirm that. Once confirmed, through a process of elimination, find the constraint which causes the score corruption. (Only rarely is it a combination of multiple constraints, it can usually be narrowed down to one.) \r\n\r\nOnce you know which one it is, we can discuss why.\r\n\r\n\r\n  [1]: https://timefold.ai/docs/timefold-solver/latest/configuration/configuration.html#environmentMode","title":"OptaPlanner starts violating hard constraints if I introduce a new problem fact (and says the hard score is 0)","body":"<p>What you're describing sounds a lot like a score corruption. Enable <code>[FULL_ASSERT][1]</code> to confirm that. Once confirmed, through a process of elimination, find the constraint which causes the score corruption. (Only rarely is it a combination of multiple constraints, it can usually be narrowed down to one.)</p>\n<p>Once you know which one it is, we can discuss why.</p>\n"}],"owner":{"account_id":4005154,"reputation":106,"user_id":3299989,"display_name":"MattWolc24"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":112,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689351944,"creation_date":1689263404,"question_id":76681267,"body_markdown":"I&#39;m very confused about this. Even ChatGPT is unsure of what&#39;s wrong. So I need to turn to the real experts.\r\n\r\nMy project can be found here: https://github.com/matthewjd24/OptaPlanner-Scheduler\r\n\r\nThis code has been adapted from the [Hello world quick start][1]. In summary, I have a job shop scheduling problem, but there are no &#39;projects&#39; - each job just needs to pass through a machine once and it&#39;s done. My hard and soft constraints work fine, but if I attempt to add a new problem fact/planning variable, it starts breaking the hard constraints and acting like it hasn&#39;t (as in, the hard score in the resulting solution is 0). I&#39;ll show you some relevant snippets of code:\r\n\r\nThis is my Planning Solution class:\r\n\r\n    @PlanningSolution\r\n    public class TimeTable {\r\n\r\n    @ValueRangeProvider\r\n    @ProblemFactCollectionProperty\r\n    private List&lt;Cycle&gt; timeslotList;\r\n    @ValueRangeProvider\r\n    @ProblemFactCollectionProperty\r\n    private List&lt;Machine&gt; machineList;\r\n    @ValueRangeProvider\r\n    @ProblemFactCollectionProperty\r\n    private List&lt;Mold&gt; moldList;\r\n    @PlanningEntityCollectionProperty\r\n    private List&lt;Job&gt; lessonList;\r\n\r\n    @PlanningScore\r\n    private HardSoftScore score;\r\n\r\nThis is my Planning Entity, the Job class:\r\n\r\n    @PlanningEntity\r\n    public class Job {\r\n\r\n    @PlanningId\r\n    private Long id;\r\n\r\n    public String jobName;\r\n    public Integer width;\r\n    public Integer height;\r\n    public Integer weight;\r\n\r\n    @PlanningVariable(nullable = true)\r\n    private Cycle timeslot;\r\n    @PlanningVariable(nullable = true)\r\n    private Machine machine;\r\n    @PlanningVariable(nullable = true)\r\n    private Mold mold;\r\n\r\n    public Job() {\r\n    }\r\n\r\n    public Job(Long id, String jobName, Integer width, Integer height, Integer weight) {\r\n        this.id = id;\r\n        this.jobName = jobName;\r\n        this.width = width;\r\n        this.height = height;\r\n        this.weight = weight;\r\n    }\r\n\r\nMy constraint that applies a hard score penalty when two jobs have the same timeslot, same machine, and different IDs:\r\n\r\n    private Constraint machineProcessOneJobAtATime(ConstraintFactory constraintFactory) {\r\n        return constraintFactory\r\n            .forEach(Job.class)\r\n            .join(Job.class,\r\n                Joiners.equal(Job::getTimeslot),\r\n                Joiners.equal(Job::getMachine),\r\n                Joiners.lessThan(Job::getId))\r\n            .penalize(HardSoftScore.ONE_HARD)\r\n            .asConstraint(&quot;Multiple jobs scheduled for a machine at once&quot;);\r\n    }\r\n\r\nIf I comment out the @ValueRangeProvider and @ProblemFactCollectionProperty modifiers for the moldList in the planning solution, and @PlanningVariable(nullable = true) in the Job class, the constraint works fine. But the moment I add in the mold list as a variable, OptaPlanner starts breaking this hard constraint and saying the hard score is 0 (essentially acting like it hasn&#39;t broken the constraint). I have no constraints set up that interact with the Mold variable. Does anyone know why the machineProcessOneJobAtATime would stop working properly when the Mold planning variable is added? I&#39;m very confused about this. Thank you.\r\n\r\n  [1]: https://www.optaplanner.org/docs/optaplanner/latest/quickstart/hello-world/hello-world-quickstart.html","title":"OptaPlanner starts violating hard constraints if I introduce a new problem fact (and says the hard score is 0)","body":"<p>I'm very confused about this. Even ChatGPT is unsure of what's wrong. So I need to turn to the real experts.</p>\n<p>My project can be found here: <a href=\"https://github.com/matthewjd24/OptaPlanner-Scheduler\" rel=\"nofollow noreferrer\">https://github.com/matthewjd24/OptaPlanner-Scheduler</a></p>\n<p>This code has been adapted from the <a href=\"https://www.optaplanner.org/docs/optaplanner/latest/quickstart/hello-world/hello-world-quickstart.html\" rel=\"nofollow noreferrer\">Hello world quick start</a>. In summary, I have a job shop scheduling problem, but there are no 'projects' - each job just needs to pass through a machine once and it's done. My hard and soft constraints work fine, but if I attempt to add a new problem fact/planning variable, it starts breaking the hard constraints and acting like it hasn't (as in, the hard score in the resulting solution is 0). I'll show you some relevant snippets of code:</p>\n<p>This is my Planning Solution class:</p>\n<pre><code>@PlanningSolution\npublic class TimeTable {\n\n@ValueRangeProvider\n@ProblemFactCollectionProperty\nprivate List&lt;Cycle&gt; timeslotList;\n@ValueRangeProvider\n@ProblemFactCollectionProperty\nprivate List&lt;Machine&gt; machineList;\n@ValueRangeProvider\n@ProblemFactCollectionProperty\nprivate List&lt;Mold&gt; moldList;\n@PlanningEntityCollectionProperty\nprivate List&lt;Job&gt; lessonList;\n\n@PlanningScore\nprivate HardSoftScore score;\n</code></pre>\n<p>This is my Planning Entity, the Job class:</p>\n<pre><code>@PlanningEntity\npublic class Job {\n\n@PlanningId\nprivate Long id;\n\npublic String jobName;\npublic Integer width;\npublic Integer height;\npublic Integer weight;\n\n@PlanningVariable(nullable = true)\nprivate Cycle timeslot;\n@PlanningVariable(nullable = true)\nprivate Machine machine;\n@PlanningVariable(nullable = true)\nprivate Mold mold;\n\npublic Job() {\n}\n\npublic Job(Long id, String jobName, Integer width, Integer height, Integer weight) {\n    this.id = id;\n    this.jobName = jobName;\n    this.width = width;\n    this.height = height;\n    this.weight = weight;\n}\n</code></pre>\n<p>My constraint that applies a hard score penalty when two jobs have the same timeslot, same machine, and different IDs:</p>\n<pre><code>private Constraint machineProcessOneJobAtATime(ConstraintFactory constraintFactory) {\n    return constraintFactory\n        .forEach(Job.class)\n        .join(Job.class,\n            Joiners.equal(Job::getTimeslot),\n            Joiners.equal(Job::getMachine),\n            Joiners.lessThan(Job::getId))\n        .penalize(HardSoftScore.ONE_HARD)\n        .asConstraint(&quot;Multiple jobs scheduled for a machine at once&quot;);\n}\n</code></pre>\n<p>If I comment out the @ValueRangeProvider and @ProblemFactCollectionProperty modifiers for the moldList in the planning solution, and @PlanningVariable(nullable = true) in the Job class, the constraint works fine. But the moment I add in the mold list as a variable, OptaPlanner starts breaking this hard constraint and saying the hard score is 0 (essentially acting like it hasn't broken the constraint). I have no constraints set up that interact with the Mold variable. Does anyone know why the machineProcessOneJobAtATime would stop working properly when the Mold planning variable is added? I'm very confused about this. Thank you.</p>\n"},{"tags":["java","playframework"],"comments":[{"owner":{"account_id":17104557,"reputation":23,"user_id":12376869,"display_name":"CbSo"},"score":0,"creation_date":1693328820,"post_id":76689550,"comment_id":135745209,"body_markdown":"Sad this didn&#39;t get any responses :(","body":"Sad this didn&#39;t get any responses :("}],"owner":{"account_id":17104557,"reputation":23,"user_id":12376869,"display_name":"CbSo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689351902,"creation_date":1689351902,"question_id":76689550,"body_markdown":"I&#39;m currently trying to find a way to use a filter to catch all inbound requests and then send the body off somewhere else, per the officaldocumentation here: https://www.playframework.com/documentation/2.8.x/JavaHttpFilters this should be possible as the last section states:\r\n&quot;Play provides a lower level filter API called EssentialFilter that gives you full access to the body of the request. This API allows you to wrap EssentialAction with another action.&quot;\r\n\r\nHowever, when I create an EssentialAction wrapped in my EssentialFilter I&#39;m only given access to the header of the request and the example listed doesn&#39;t really cover how to access the body.\r\n\r\nThis makes sense per this accepted answer: https://stackoverflow.com/questions/25492592/how-to-log-the-body-from-every-request-in-play, but is in conflict with what the official docs state.\r\n\r\nIs there something I&#39;m missing?\r\n\r\n\r\n```java\r\npublic class SendBodyFilter extends EssentialFilter {\r\n    private final Materializer mat;\r\n    \r\n    @Inject\r\n    SendBodyFilter(\r\n            Materializer mat\r\n    ) {\r\n        super();\r\n        this.mat = mat;\r\n    }\r\n    @Override\r\n    public EssentialAction apply(EssentialAction next) {\r\n        return EssentialAction.of(request -&gt; {\r\n            System.out.println(request);\r\n            return next.apply(request);\r\n        });\r\n    }\r\n}\r\n\r\n```\r\n","title":"Java Play: Using an EssentialAction in an EssentialFilter to access the body of a request?","body":"<p>I'm currently trying to find a way to use a filter to catch all inbound requests and then send the body off somewhere else, per the officaldocumentation here: <a href=\"https://www.playframework.com/documentation/2.8.x/JavaHttpFilters\" rel=\"nofollow noreferrer\">https://www.playframework.com/documentation/2.8.x/JavaHttpFilters</a> this should be possible as the last section states:\n&quot;Play provides a lower level filter API called EssentialFilter that gives you full access to the body of the request. This API allows you to wrap EssentialAction with another action.&quot;</p>\n<p>However, when I create an EssentialAction wrapped in my EssentialFilter I'm only given access to the header of the request and the example listed doesn't really cover how to access the body.</p>\n<p>This makes sense per this accepted answer: <a href=\"https://stackoverflow.com/questions/25492592/how-to-log-the-body-from-every-request-in-play\">How to log the body from every request in Play?</a>, but is in conflict with what the official docs state.</p>\n<p>Is there something I'm missing?</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class SendBodyFilter extends EssentialFilter {\n    private final Materializer mat;\n    \n    @Inject\n    SendBodyFilter(\n            Materializer mat\n    ) {\n        super();\n        this.mat = mat;\n    }\n    @Override\n    public EssentialAction apply(EssentialAction next) {\n        return EssentialAction.of(request -&gt; {\n            System.out.println(request);\n            return next.apply(request);\n        });\n    }\n}\n\n</code></pre>\n"},{"tags":["java","html-to-pdf","openhtmltopdf"],"comments":[{"owner":{"account_id":6017640,"reputation":8919,"user_id":4725875,"display_name":"DevilsHnd - 退した"},"score":0,"creation_date":1689358063,"post_id":76689504,"comment_id":135207455,"body_markdown":"[Have you tried this](https://www.sejda.com/html-to-pdf)?","body":"<a href=\"https://www.sejda.com/html-to-pdf\" rel=\"nofollow noreferrer\">Have you tried this</a>?"},{"owner":{"account_id":18320732,"reputation":173,"user_id":13341552,"display_name":"Faizan Shaikh Sarkar"},"score":0,"creation_date":1689568752,"post_id":76689504,"comment_id":135226404,"body_markdown":"Bu this isn&#39;t free, right? I will have to buy license to use this library?","body":"Bu this isn&#39;t free, right? I will have to buy license to use this library?"},{"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"score":0,"creation_date":1689578987,"post_id":76689504,"comment_id":135227725,"body_markdown":"Try https://wkhtmltopdf.org/downloads.html but make sure your HTML is sanitized","body":"Try <a href=\"https://wkhtmltopdf.org/downloads.html\" rel=\"nofollow noreferrer\">wkhtmltopdf.org/downloads.html</a> but make sure your HTML is sanitized"}],"owner":{"account_id":18320732,"reputation":173,"user_id":13341552,"display_name":"Faizan Shaikh Sarkar"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":105,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689351493,"creation_date":1689351493,"question_id":76689504,"body_markdown":"I am trying to look for a way to generate PDF for a very large complex HTML page(almost 500 PDF pages) that was created using angular 13 view but I am not able to find any proper solution. I tried many Java based Libraries like Openhtmltopdf, Ironpdf, pdfbox, flyingsaucer but as it was a complex page even after cleaning, parsing and trying to fix HTML with the help of JSOUP I was getting exceptions in all, I also tried rendering PDF from HTML from them but same issue.\r\n\r\nI also tried to capture an image/screenshot from backend and then convert it to PDF but that also didn&#39;t work as instead of the page it captures something else only, I tried this with html2image ava java library but similar issue. I looked into a way to do that using selenium or headless browser but I want it to work on linux cli as this app will be deployed there so without any GUI browser it won&#39;t work there as well.\r\n\r\nOnly thing that worked was html2canvas and jspdf but that also generated blurry pics with high size even after I tried compressing it and maintaining quality. Also it only worked for small HTML pages and failed drastically for medium to large HTML pages.\r\n\r\nFYI I am using Angular 13 in front end and Groovy/Java/Grails in backend.\r\n\r\nIs there anyway I can achieve what I want to achieve by using a free Java library?\r\n\r\nYour help is highly appreciated!","title":"Generate PDF from very large complex html page in java","body":"<p>I am trying to look for a way to generate PDF for a very large complex HTML page(almost 500 PDF pages) that was created using angular 13 view but I am not able to find any proper solution. I tried many Java based Libraries like Openhtmltopdf, Ironpdf, pdfbox, flyingsaucer but as it was a complex page even after cleaning, parsing and trying to fix HTML with the help of JSOUP I was getting exceptions in all, I also tried rendering PDF from HTML from them but same issue.</p>\n<p>I also tried to capture an image/screenshot from backend and then convert it to PDF but that also didn't work as instead of the page it captures something else only, I tried this with html2image ava java library but similar issue. I looked into a way to do that using selenium or headless browser but I want it to work on linux cli as this app will be deployed there so without any GUI browser it won't work there as well.</p>\n<p>Only thing that worked was html2canvas and jspdf but that also generated blurry pics with high size even after I tried compressing it and maintaining quality. Also it only worked for small HTML pages and failed drastically for medium to large HTML pages.</p>\n<p>FYI I am using Angular 13 in front end and Groovy/Java/Grails in backend.</p>\n<p>Is there anyway I can achieve what I want to achieve by using a free Java library?</p>\n<p>Your help is highly appreciated!</p>\n"},{"tags":["java","vaadin","vaadin-flow"],"answers":[{"tags":[],"owner":{"account_id":12280349,"reputation":10212,"user_id":8962195,"display_name":"Tatu Lund"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1689351348,"creation_date":1688408103,"answer_id":76607262,"question_id":76607137,"body_markdown":"I think there are two flaws in your code. \r\n\r\n1. If you are using route templates `@Route(&quot;blappity/display/:id/:blahID&quot;)`, hence RouteParameters, you should not implement `HasUrlParameter` and override `setParameter`. Instead you should take those parameters in beforeEnter or afterNavigation.\r\n\r\n2. If you want to forward the user with new parameters, you should note that `rerouteTo` does not update the URL, but forwardTo does. So if you use `beforeEnter`, you can use `forwardTo`. If you move the code to `afterNavigation`, you should use normal `ui.navigate(..)` instead, as when `afterNavigation` runs, the previous navigation cycle is complete.\r\n\r\nIMHO the best practice is just to store the url parameters to class field in `beforeEnter`, and do the actual `Grid` setup and fetching data in `afterNavigation`. Say you have view based access control, you do not want to fetch anything from database before navigation cycle is complete. \r\n\r\n","title":"Routing and Parameters in Vaadin flow","body":"<p>I think there are two flaws in your code.</p>\n<ol>\n<li><p>If you are using route templates <code>@Route(&quot;blappity/display/:id/:blahID&quot;)</code>, hence RouteParameters, you should not implement <code>HasUrlParameter</code> and override <code>setParameter</code>. Instead you should take those parameters in beforeEnter or afterNavigation.</p>\n</li>\n<li><p>If you want to forward the user with new parameters, you should note that <code>rerouteTo</code> does not update the URL, but forwardTo does. So if you use <code>beforeEnter</code>, you can use <code>forwardTo</code>. If you move the code to <code>afterNavigation</code>, you should use normal <code>ui.navigate(..)</code> instead, as when <code>afterNavigation</code> runs, the previous navigation cycle is complete.</p>\n</li>\n</ol>\n<p>IMHO the best practice is just to store the url parameters to class field in <code>beforeEnter</code>, and do the actual <code>Grid</code> setup and fetching data in <code>afterNavigation</code>. Say you have view based access control, you do not want to fetch anything from database before navigation cycle is complete.</p>\n"}],"owner":{"account_id":2393236,"reputation":123,"user_id":2092658,"display_name":"SriniMurthy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":151,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76607262,"answer_count":1,"score":1,"last_activity_date":1689351348,"creation_date":1688406828,"question_id":76607137,"body_markdown":"I see many questions pertaining to query and route parameters. Somehow each new flow and parameter resolutions seem to be a mystery just as soon as I think I have mastered them.\r\n\r\nI have two flows, MainView and a DisplayView\r\nMy MainView has a `setParameter(BeforeEvent beforeEvent)` thats like this\r\n\r\n      private void doGridSetup(BeforeEvent event) {\r\n        id  = id.isEmpty() ? event.getRouteParameters().\r\n                                    get(&quot;id&quot;).orElse(&quot;&quot;): id;\r\n        if (!id.isEmpty()) {\r\n            Optional&lt;BlappityBlahDTO&gt; blappityBlah = getBlappityBlah(id);\r\n            if (!blappityBlah.isEmpty()) {\r\n                setAllFields(blappityBlah);\r\n                try {\r\n                    event.rerouteTo(DisplayVeiw.class,\r\n                            prepRouteParameters(id, blappityBlah.get().getBlahID()));\r\n                } catch (Throwable th) {\r\n                    th.printStackTrace(System.err);\r\n                    //HACK HACK HACK.. doesn&#39;t work anyways\r\n                    UI.getCurrent().navigate(DisplayView.class, prepRouteParameters(id,\r\n                            blappityBlah.get().getBlahID()));\r\n                }\r\n            }\r\n            binder.bindInstanceFields(this);\r\n        }\r\n    }\r\n    \r\n    RouteParameters prepRouteParameters(String id ,String blahID) {\r\n        RouteParam idParam = new RouteParam(&quot;id&quot;, id);\r\n        RouteParam blahParam = new RouteParam(&quot;blahID&quot;, blahID;\r\n        RouteParameters routeParameters = new RouteParameters(  idParam, blahParam);\r\n        return routeParameters;\r\n   }\r\n\r\n        @Route(&quot;blappity/display/:id/:blahID&quot;)\r\n        @Slf4j\r\n       public class DisplayView extends VerticalLayout\r\n            implements BeforeEnterObserver, BeforeLeaveObserver, HasUrlParameter&lt;String&gt; {\r\n\r\nDoesn&#39;t seem to matter if I try `event.reroute` or `UI.getCurrent().navigate()`, my `DisplayView` never gets displayed and the error I see is &#39;Navigation target &#39;com.blappity.blaha.DisplayView&#39; requires a parameter.&#39; \r\nI am not sure what&#39;s going on anymore.\r\n\r\n`Java: 17.0.6`\r\n`Vaadin: 24.1.1`","title":"Routing and Parameters in Vaadin flow","body":"<p>I see many questions pertaining to query and route parameters. Somehow each new flow and parameter resolutions seem to be a mystery just as soon as I think I have mastered them.</p>\n<p>I have two flows, MainView and a DisplayView\nMy MainView has a <code>setParameter(BeforeEvent beforeEvent)</code> thats like this</p>\n<pre><code>  private void doGridSetup(BeforeEvent event) {\n    id  = id.isEmpty() ? event.getRouteParameters().\n                                get(&quot;id&quot;).orElse(&quot;&quot;): id;\n    if (!id.isEmpty()) {\n        Optional&lt;BlappityBlahDTO&gt; blappityBlah = getBlappityBlah(id);\n        if (!blappityBlah.isEmpty()) {\n            setAllFields(blappityBlah);\n            try {\n                event.rerouteTo(DisplayVeiw.class,\n                        prepRouteParameters(id, blappityBlah.get().getBlahID()));\n            } catch (Throwable th) {\n                th.printStackTrace(System.err);\n                //HACK HACK HACK.. doesn't work anyways\n                UI.getCurrent().navigate(DisplayView.class, prepRouteParameters(id,\n                        blappityBlah.get().getBlahID()));\n            }\n        }\n        binder.bindInstanceFields(this);\n    }\n}\n\nRouteParameters prepRouteParameters(String id ,String blahID) {\n    RouteParam idParam = new RouteParam(&quot;id&quot;, id);\n    RouteParam blahParam = new RouteParam(&quot;blahID&quot;, blahID;\n    RouteParameters routeParameters = new RouteParameters(  idParam, blahParam);\n    return routeParameters;\n</code></pre>\n<p>}</p>\n<pre><code>    @Route(&quot;blappity/display/:id/:blahID&quot;)\n    @Slf4j\n   public class DisplayView extends VerticalLayout\n        implements BeforeEnterObserver, BeforeLeaveObserver, HasUrlParameter&lt;String&gt; {\n</code></pre>\n<p>Doesn't seem to matter if I try <code>event.reroute</code> or <code>UI.getCurrent().navigate()</code>, my <code>DisplayView</code> never gets displayed and the error I see is 'Navigation target 'com.blappity.blaha.DisplayView' requires a parameter.'\nI am not sure what's going on anymore.</p>\n<p><code>Java: 17.0.6</code>\n<code>Vaadin: 24.1.1</code></p>\n"},{"tags":["java","openshift","sslhandshakeexception","ssl-handshake"],"owner":{"account_id":2162674,"reputation":1,"user_id":1916496,"display_name":"subbu kandula"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":162,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689351287,"creation_date":1688550952,"question_id":76619196,"body_markdown":"I need some help to enable SSL Handshake debug logs in Openshift. I have an application running in Openshift container and created POD for that application. I&#39;m not able to enable SSL Handshake debug logs and able to see only the application logs in the POD logs.\r\n\r\nFor stand alone application, we can enable SSL Handshake debug logs using below system parameter passing in java command.\r\n\r\n           -Djavax.net.debug=ssl,handshake\r\n\r\nFor Openshift, I tried to enable manually (`System.setParameter(&#39;javax.net.debug&#39;, &#39;ssl,handshake&#39;)` in Java, but not able to see debug logs in the POD application logs.\r\n\r\nCan someone please suggest to enable SSL Handshake debug logs in the Red Hat Openshift container.\r\n\r\nPlease let me know if you need more info.","title":"How to enable SSL Handshake Debug logs in Red Hat OpenShift application","body":"<p>I need some help to enable SSL Handshake debug logs in Openshift. I have an application running in Openshift container and created POD for that application. I'm not able to enable SSL Handshake debug logs and able to see only the application logs in the POD logs.</p>\n<p>For stand alone application, we can enable SSL Handshake debug logs using below system parameter passing in java command.</p>\n<pre><code>       -Djavax.net.debug=ssl,handshake\n</code></pre>\n<p>For Openshift, I tried to enable manually (<code>System.setParameter('javax.net.debug', 'ssl,handshake')</code> in Java, but not able to see debug logs in the POD application logs.</p>\n<p>Can someone please suggest to enable SSL Handshake debug logs in the Red Hat Openshift container.</p>\n<p>Please let me know if you need more info.</p>\n"},{"tags":["java","spring-boot","cassandra","cassandra-3.0","dsbulk"],"comments":[{"owner":{"account_id":15129760,"reputation":341,"user_id":10918015,"display_name":"stevenlacerda"},"score":1,"creation_date":1689348164,"post_id":76688422,"comment_id":135205420,"body_markdown":"dsbulk count will count rows, but that depends on your dsbulk query.","body":"dsbulk count will count rows, but that depends on your dsbulk query."}],"answers":[{"comments":[{"owner":{"account_id":7668294,"reputation":79,"user_id":5811410,"accept_rate":0,"display_name":"Anish"},"score":0,"creation_date":1689345095,"post_id":76688531,"comment_id":135204663,"body_markdown":"Correct me if I am wrong but in Cassandra, the LIMIT clause restricts the number of rows returned within a single query, but it does not enable automatic pagination or continuation of fetching subsequent pages beyond the initial LIMIT","body":"Correct me if I am wrong but in Cassandra, the LIMIT clause restricts the number of rows returned within a single query, but it does not enable automatic pagination or continuation of fetching subsequent pages beyond the initial LIMIT"},{"owner":{"account_id":3708341,"reputation":4302,"user_id":3086289,"accept_rate":100,"display_name":"Sangam Belose"},"score":0,"creation_date":1689345773,"post_id":76688531,"comment_id":135204853,"body_markdown":"@Anish using the resultset does has limit of 2B. Updated my answer.","body":"@Anish using the resultset does has limit of 2B. Updated my answer."},{"owner":{"account_id":7668294,"reputation":79,"user_id":5811410,"accept_rate":0,"display_name":"Anish"},"score":0,"creation_date":1689348106,"post_id":76688531,"comment_id":135205411,"body_markdown":"How does the above code overcomes the 2billion mark? also does the above code execute multiple queries ? I see just one session.execute","body":"How does the above code overcomes the 2billion mark? also does the above code execute multiple queries ? I see just one session.execute"}],"tags":[],"owner":{"account_id":3708341,"reputation":4302,"user_id":3086289,"accept_rate":100,"display_name":"Sangam Belose"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689345711,"creation_date":1689344100,"answer_id":76688531,"question_id":76688422,"body_markdown":"The issue you mentioned, CASSANDRA-14683, refers to a limitation where SELECT statements without a specific partition key can only scan up to 2 billion rows. \r\n\r\nAlternative approach to solve this could be using Pagination using token range and read your data in chunks untill all the data is fetched.\r\n\r\nSomething like below:\r\n\r\n     private static final int PAGE_SIZE = 10000; // Number of rows to fetch per page\r\n\r\n    public void getData() {\r\n        try (CqlSession session = CqlSession.builder().build()) {\r\n            Metadata metadata = session.getMetadata();\r\n            TokenRange fullRange = metadata.getTokenMap().get().getPagingTokenRange();\r\n            PagingIterable&lt;Row&gt; rows = session.execute(createPagingQuery(fullRange));\r\n            for (Row row : rows) {\r\n                // Process your data\r\n            }\r\n        }\r\n    }\r\n    \r\n    private String createPagingQuery(TokenRange range) {\r\n        return &quot;SELECT * FROM YOUR_TABLE WHERE token(partition_key) &gt;= &quot; + range.getStart().getValue()\r\n                + &quot; AND token(partition_key) &lt;= &quot; + range.getEnd().getValue()\r\n                + &quot; LIMIT &quot; + PAGE_SIZE;\r\n    }","title":"How can I scan the entire cassandra table which has 10B entries and no indexing?","body":"<p>The issue you mentioned, CASSANDRA-14683, refers to a limitation where SELECT statements without a specific partition key can only scan up to 2 billion rows.</p>\n<p>Alternative approach to solve this could be using Pagination using token range and read your data in chunks untill all the data is fetched.</p>\n<p>Something like below:</p>\n<pre><code> private static final int PAGE_SIZE = 10000; // Number of rows to fetch per page\n\npublic void getData() {\n    try (CqlSession session = CqlSession.builder().build()) {\n        Metadata metadata = session.getMetadata();\n        TokenRange fullRange = metadata.getTokenMap().get().getPagingTokenRange();\n        PagingIterable&lt;Row&gt; rows = session.execute(createPagingQuery(fullRange));\n        for (Row row : rows) {\n            // Process your data\n        }\n    }\n}\n\nprivate String createPagingQuery(TokenRange range) {\n    return &quot;SELECT * FROM YOUR_TABLE WHERE token(partition_key) &gt;= &quot; + range.getStart().getValue()\n            + &quot; AND token(partition_key) &lt;= &quot; + range.getEnd().getValue()\n            + &quot; LIMIT &quot; + PAGE_SIZE;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15129760,"reputation":341,"user_id":10918015,"display_name":"stevenlacerda"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689348101,"creation_date":1689348101,"answer_id":76689113,"question_id":76688422,"body_markdown":"I&#39;m not sure what you mean by scan, but you have two options when you want all of the data within a Cassandra table:\r\n\r\ndsbulk\r\nspark\r\n\r\nTrying to do a query like `select * from foo.bar` is never going to be efficient and will more than likely timeout with 10B rows. \r\n\r\nThe above two applications will break the queries down into partition range queries and you can set throttles to limit the number of operations so you don&#39;t get those same timeouts.\r\n\r\nWith dsbulk, you can get a count, or you can unload the data to a csv if you need to do that.","title":"How can I scan the entire cassandra table which has 10B entries and no indexing?","body":"<p>I'm not sure what you mean by scan, but you have two options when you want all of the data within a Cassandra table:</p>\n<p>dsbulk\nspark</p>\n<p>Trying to do a query like <code>select * from foo.bar</code> is never going to be efficient and will more than likely timeout with 10B rows.</p>\n<p>The above two applications will break the queries down into partition range queries and you can set throttles to limit the number of operations so you don't get those same timeouts.</p>\n<p>With dsbulk, you can get a count, or you can unload the data to a csv if you need to do that.</p>\n"},{"comments":[{"owner":{"account_id":7668294,"reputation":79,"user_id":5811410,"accept_rate":0,"display_name":"Anish"},"score":0,"creation_date":1689353533,"post_id":76689441,"comment_id":135206616,"body_markdown":"With ds bulk copy, I imagine it must be using some sort of technique to copy (lets say 10B) data. Do you know if it uses regular select statement or copy the data buffer ? In case it uses the  select st there it must be facing or has faced same problem","body":"With ds bulk copy, I imagine it must be using some sort of technique to copy (lets say 10B) data. Do you know if it uses regular select statement or copy the data buffer ? In case it uses the  select st there it must be facing or has faced same problem"},{"owner":{"account_id":4819783,"reputation":1505,"user_id":3890779,"display_name":"clunven"},"score":0,"creation_date":1689429146,"post_id":76689441,"comment_id":135213928,"body_markdown":"DSbulk using the token range techni, then paging within the token range. With DSBulk you would dump the data as CSV and then updload again. It is OSS go ahead https://github.com/datastax/dsbulk","body":"DSbulk using the token range techni, then paging within the token range. With DSBulk you would dump the data as CSV and then updload again. It is OSS go ahead <a href=\"https://github.com/datastax/dsbulk\" rel=\"nofollow noreferrer\">github.com/datastax/dsbulk</a>"}],"tags":[],"owner":{"account_id":4819783,"reputation":1505,"user_id":3890779,"display_name":"clunven"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689350831,"creation_date":1689350831,"answer_id":76689441,"question_id":76688422,"body_markdown":"It is totally possible to process such an amount of data. \r\n\r\nYour issue is likely relative to the abstraction layer (_Spring Data Cassandra_). The java drivers can easily process this amount data with 2 features (that can be used at the same time):\r\n- **Paging:** Very well [describe in the documentation](https://docs.datastax.com/en/developer/java-driver/4.17/manual/core/paging/)\r\n- **Distribute the query among multiple nodes (map/reduce) with a token map**. To do so you are using TokenRanges as describe by other. You can know more about it in the [official documentation](https://docs.datastax.com/en/developer/java-driver/4.17/manual/core/metadata/token/) as well.\r\n\r\n**1/ Spark**\r\n\r\nSpark uses the token range trick. You should look at [Spark Cassandra Connector](https://github.com/datastax/spark-cassandra-connector) (SCC). Now it is scala and a spark runtime.\r\n\r\n**2/ DSBulk**\r\n\r\nAllows only data copy or count so not something you can use to process you data. \r\n\r\n**3/ Apache Beam**\r\n\r\nA not-so-famous great way to process in a distributed way. It distributes the load among nodes as well and java compatible. [code](https://github.com/apache/beam/tree/master/sdks/java/io/cassandra).  Hre some [sample](https://beam.apache.org/releases/javadoc/2.33.0/org/apache/beam/sdk/io/cassandra/CassandraIO.html)\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"How can I scan the entire cassandra table which has 10B entries and no indexing?","body":"<p>It is totally possible to process such an amount of data.</p>\n<p>Your issue is likely relative to the abstraction layer (<em>Spring Data Cassandra</em>). The java drivers can easily process this amount data with 2 features (that can be used at the same time):</p>\n<ul>\n<li><strong>Paging:</strong> Very well <a href=\"https://docs.datastax.com/en/developer/java-driver/4.17/manual/core/paging/\" rel=\"nofollow noreferrer\">describe in the documentation</a></li>\n<li><strong>Distribute the query among multiple nodes (map/reduce) with a token map</strong>. To do so you are using TokenRanges as describe by other. You can know more about it in the <a href=\"https://docs.datastax.com/en/developer/java-driver/4.17/manual/core/metadata/token/\" rel=\"nofollow noreferrer\">official documentation</a> as well.</li>\n</ul>\n<p><strong>1/ Spark</strong></p>\n<p>Spark uses the token range trick. You should look at <a href=\"https://github.com/datastax/spark-cassandra-connector\" rel=\"nofollow noreferrer\">Spark Cassandra Connector</a> (SCC). Now it is scala and a spark runtime.</p>\n<p><strong>2/ DSBulk</strong></p>\n<p>Allows only data copy or count so not something you can use to process you data.</p>\n<p><strong>3/ Apache Beam</strong></p>\n<p>A not-so-famous great way to process in a distributed way. It distributes the load among nodes as well and java compatible. <a href=\"https://github.com/apache/beam/tree/master/sdks/java/io/cassandra\" rel=\"nofollow noreferrer\">code</a>.  Hre some <a href=\"https://beam.apache.org/releases/javadoc/2.33.0/org/apache/beam/sdk/io/cassandra/CassandraIO.html\" rel=\"nofollow noreferrer\">sample</a></p>\n"}],"owner":{"account_id":7668294,"reputation":79,"user_id":5811410,"accept_rate":0,"display_name":"Anish"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":79,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1689350831,"creation_date":1689343392,"question_id":76688422,"body_markdown":"I have a cassandra database which contains a table over 10B entries with no indexes. I need to get every row and do some data grouping. However I did using java &amp; spring boot framework and it only scanned 2B records which is the cassandra limit on select * from abc.abc as documented here : https://issues.apache.org/jira/browse/CASSANDRA-14683\r\nIs there a way in java to do it ? I tried ds bulk but that count whole table and does not read each row.","title":"How can I scan the entire cassandra table which has 10B entries and no indexing?","body":"<p>I have a cassandra database which contains a table over 10B entries with no indexes. I need to get every row and do some data grouping. However I did using java &amp; spring boot framework and it only scanned 2B records which is the cassandra limit on select * from abc.abc as documented here : <a href=\"https://issues.apache.org/jira/browse/CASSANDRA-14683\" rel=\"nofollow noreferrer\">https://issues.apache.org/jira/browse/CASSANDRA-14683</a>\nIs there a way in java to do it ? I tried ds bulk but that count whole table and does not read each row.</p>\n"},{"tags":["java","multithreading","wait"],"comments":[{"owner":{"account_id":962952,"reputation":5975,"user_id":986890,"accept_rate":55,"display_name":"Cedric Martin"},"score":4,"creation_date":1319896198,"post_id":7939257,"comment_id":9700678,"body_markdown":"*Thread.join* is a rather low-level very Java idiosynchratic way to solve the issue.  Moreover it&#39;s problematic because the *Thread* API is flawed: you cannot know whether the *join* completed successfuly or not (see *Java Concurrency In Practice*).  Higher level abstraction, like using a *CountDownLatch* may be preferrable and will look more natural to programmers who aren&#39;t &quot;stuck&quot; in the Java-idiosynchratic mindset.  Don&#39;t argue with me, go argue with Doug Lea ; )","body":"<i>Thread.join</i> is a rather low-level very Java idiosynchratic way to solve the issue.  Moreover it&#39;s problematic because the <i>Thread</i> API is flawed: you cannot know whether the <i>join</i> completed successfuly or not (see <i>Java Concurrency In Practice</i>).  Higher level abstraction, like using a <i>CountDownLatch</i> may be preferrable and will look more natural to programmers who aren&#39;t &quot;stuck&quot; in the Java-idiosynchratic mindset.  Don&#39;t argue with me, go argue with Doug Lea ; )"},{"owner":{"account_id":23619,"reputation":135298,"user_id":59303,"accept_rate":84,"display_name":"ChrisF"},"score":0,"creation_date":1322231451,"post_id":7939257,"comment_id":10180954,"body_markdown":"possible duplicate of [How to wait for a set of threads to complete?](http://stackoverflow.com/questions/1252190/how-to-wait-for-a-set-of-threads-to-complete)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/1252190/how-to-wait-for-a-set-of-threads-to-complete\">How to wait for a set of threads to complete?</a>"}],"answers":[{"comments":[{"owner":{"account_id":551450,"reputation":31923,"user_id":916299,"accept_rate":96,"display_name":"James Webster"},"score":2,"creation_date":1319895943,"post_id":7939262,"comment_id":9700648,"body_markdown":"Do these threads run in parallel or sequentially to each other?","body":"Do these threads run in parallel or sequentially to each other?"},{"owner":{"account_id":24377,"reputation":818073,"user_id":61974,"display_name":"Mark Byers"},"score":4,"creation_date":1319896243,"post_id":7939262,"comment_id":9700682,"body_markdown":"@James Webster: The statement `t.join();` means that the *current thread* blocks until the thread `t` terminates. It does not affect thread `t`.","body":"@James Webster: The statement <code>t.join();</code> means that the <i>current thread</i> blocks until the thread <code>t</code> terminates. It does not affect thread <code>t</code>."},{"owner":{"account_id":551450,"reputation":31923,"user_id":916299,"accept_rate":96,"display_name":"James Webster"},"score":1,"creation_date":1319897458,"post_id":7939262,"comment_id":9700805,"body_markdown":"Thanks. =] Studied paralellism at uni, but that was the sole thing I struggled to learn! Thankfully I don&#39;t have to use it much now or when I do it&#39;s not too complex or there are no shared resources and blocking isn&#39;t critical","body":"Thanks. =] Studied paralellism at uni, but that was the sole thing I struggled to learn! Thankfully I don&#39;t have to use it much now or when I do it&#39;s not too complex or there are no shared resources and blocking isn&#39;t critical"},{"owner":{"display_name":"user4903"},"score":1,"creation_date":1391182000,"post_id":7939262,"comment_id":32426485,"body_markdown":"@4r1y4n Whether the code provided is truly parallel depends on what you&#39;re trying to do with it, and is related more to aggregating data spread throughout collections using joined threads. You&#39;re joining threads, which potentially means &quot;joining&quot; data. Also, parallelism does NOT necessarily mean concurrency. That is dependent on the CPUs. It could very well be that the threads are running in parallel, but the computations are happening in whatever order is determined by the underlying CPU.","body":"@4r1y4n Whether the code provided is truly parallel depends on what you&#39;re trying to do with it, and is related more to aggregating data spread throughout collections using joined threads. You&#39;re joining threads, which potentially means &quot;joining&quot; data. Also, parallelism does NOT necessarily mean concurrency. That is dependent on the CPUs. It could very well be that the threads are running in parallel, but the computations are happening in whatever order is determined by the underlying CPU."},{"owner":{"account_id":7425507,"reputation":621,"user_id":5648134,"accept_rate":100,"display_name":"Alex"},"score":1,"creation_date":1589675415,"post_id":7939262,"comment_id":109388014,"body_markdown":"So threads are ended sequentially based on the order inside the list?","body":"So threads are ended sequentially based on the order inside the list?"}],"tags":[],"owner":{"account_id":24377,"reputation":818073,"user_id":61974,"display_name":"Mark Byers"},"comment_count":5,"down_vote_count":0,"up_vote_count":64,"is_accepted":false,"score":64,"last_activity_date":1469255732,"creation_date":1319895761,"answer_id":7939262,"question_id":7939257,"body_markdown":"You can [`join`][1] to the threads. The join blocks until the thread completes.\r\n\r\n    for (Thread thread : threads) {\r\n        thread.join();\r\n    }\r\n\r\nNote that `join` throws an `InterruptedException`. You&#39;ll have to decide what to do if that happens (e.g. try to cancel the other threads to prevent unnecessary work being done).\r\n\r\n[1]: http://docs.oracle.com/javase/8/docs/api/java/lang/Thread.html#join%28%29","title":"wait until all threads finish their work in java","body":"<p>You can <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/Thread.html#join%28%29\" rel=\"noreferrer\"><code>join</code></a> to the threads. The join blocks until the thread completes.</p>\n\n<pre><code>for (Thread thread : threads) {\n    thread.join();\n}\n</code></pre>\n\n<p>Note that <code>join</code> throws an <code>InterruptedException</code>. You'll have to decide what to do if that happens (e.g. try to cancel the other threads to prevent unnecessary work being done).</p>\n"},{"tags":[],"owner":{"account_id":102965,"reputation":415240,"user_id":276052,"accept_rate":80,"display_name":"aioobe"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1319895761,"creation_date":1319895761,"answer_id":7939263,"question_id":7939257,"body_markdown":"You do\r\n\r\n    for (Thread t : new Thread[] { th1, th2, th3, th4, th5 })\r\n        t.join()\r\n\r\nAfter this for loop, you can be sure all threads have finished their jobs.","title":"wait until all threads finish their work in java","body":"<p>You do</p>\n\n<pre><code>for (Thread t : new Thread[] { th1, th2, th3, th4, th5 })\n    t.join()\n</code></pre>\n\n<p>After this for loop, you can be sure all threads have finished their jobs.</p>\n"},{"tags":[],"owner":{"account_id":305188,"reputation":9584,"user_id":615182,"accept_rate":86,"display_name":"Narendra Yadala"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1471683582,"creation_date":1319895762,"answer_id":7939264,"question_id":7939257,"body_markdown":"You can use [Threadf#join][1] method for this purpose.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/8/docs/api/java/lang/Thread.html#join%28%29","title":"wait until all threads finish their work in java","body":"<p>You can use <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/Thread.html#join%28%29\" rel=\"nofollow\">Threadf#join</a> method for this purpose.</p>\n"},{"tags":[],"owner":{"account_id":291800,"reputation":15905,"user_id":594183,"display_name":"esaj"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1471683630,"creation_date":1319895820,"answer_id":7939272,"question_id":7939257,"body_markdown":"Store the Thread-objects into some collection (like a List or a Set), then loop through the collection once the threads are started and call [join()][1] on the Threads.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/8/docs/api/java/lang/Thread.html#join%28%29","title":"wait until all threads finish their work in java","body":"<p>Store the Thread-objects into some collection (like a List or a Set), then loop through the collection once the threads are started and call <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/Thread.html#join%28%29\" rel=\"nofollow\">join()</a> on the Threads.</p>\n"},{"tags":[],"owner":{"display_name":"user974465"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1319896001,"creation_date":1319896001,"answer_id":7939290,"question_id":7939257,"body_markdown":"An executor service can be used to manage multiple threads including status and completion.  See http://programmingexamples.wikidot.com/executorservice\r\n","title":"wait until all threads finish their work in java","body":"<p>An executor service can be used to manage multiple threads including status and completion.  See <a href=\"http://programmingexamples.wikidot.com/executorservice\" rel=\"nofollow\">http://programmingexamples.wikidot.com/executorservice</a></p>\n"},{"comments":[{"owner":{"account_id":283806,"reputation":4839,"user_id":581528,"accept_rate":84,"display_name":"Ray"},"score":0,"creation_date":1320064868,"post_id":7939359,"comment_id":9722287,"body_markdown":"This is close, but I&#39;d still make a couple of adjustments. `executor.submit` returns a `Future&lt;?&gt;`. I would add these futures to a list, and then loop through the list calling `get` on each future.","body":"This is close, but I&#39;d still make a couple of adjustments. <code>executor.submit</code> returns a <code>Future&lt;?&gt;</code>. I would add these futures to a list, and then loop through the list calling <code>get</code> on each future."},{"owner":{"account_id":283806,"reputation":4839,"user_id":581528,"accept_rate":84,"display_name":"Ray"},"score":0,"creation_date":1320064933,"post_id":7939359,"comment_id":9722301,"body_markdown":"Also, you can instantiate a constructor using `Executors`, e.g., `Executors.newCachedThreadPool` (or similar)","body":"Also, you can instantiate a constructor using <code>Executors</code>, e.g., <code>Executors.newCachedThreadPool</code> (or similar)"}],"tags":[],"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"comment_count":2,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1466611621,"creation_date":1319896907,"answer_id":7939359,"question_id":7939257,"body_markdown":"Apart from `Thread.join()` suggested by others, java 5 introduced the executor framework. There you don&#39;t work with `Thread` objects. Instead, you submit your `Callable` or `Runnable` objects to an executor. There&#39;s a special executor that is meant to execute multiple tasks and return their results out of order. That&#39;s the &lt;a href=&quot;http://download.oracle.com/javase/8/docs/api/java/util/concurrent/ExecutorCompletionService.html&quot;&gt;`ExecutorCompletionService`&lt;/a&gt;:\r\n\r\n    \r\n    ExecutorCompletionService executor;\r\n    for (..) {\r\n        executor.submit(Executors.callable(yourRunnable));\r\n    }\r\n\r\nThen you can repeatedly call `take()` until there are no more `Future&lt;?&gt;` objects to return, which means all of them are completed.\r\n\r\n----\r\n\r\nAnother thing that may be relevant, depending on your scenario is [`CyclicBarrier`][1].\r\n\r\n&gt; A synchronization aid that allows a set of threads to all wait for each other to reach a common barrier point. CyclicBarriers are useful in programs involving a fixed sized party of threads that must occasionally wait for each other. The barrier is called cyclic because it can be re-used after the waiting threads are released. \r\n    \r\n\r\n\r\n  [1]: http://download.oracle.com/javase/8/docs/api/java/util/concurrent/CyclicBarrier.html","title":"wait until all threads finish their work in java","body":"<p>Apart from <code>Thread.join()</code> suggested by others, java 5 introduced the executor framework. There you don't work with <code>Thread</code> objects. Instead, you submit your <code>Callable</code> or <code>Runnable</code> objects to an executor. There's a special executor that is meant to execute multiple tasks and return their results out of order. That's the <a href=\"http://download.oracle.com/javase/8/docs/api/java/util/concurrent/ExecutorCompletionService.html\" rel=\"noreferrer\"><code>ExecutorCompletionService</code></a>:</p>\n\n<pre><code>ExecutorCompletionService executor;\nfor (..) {\n    executor.submit(Executors.callable(yourRunnable));\n}\n</code></pre>\n\n<p>Then you can repeatedly call <code>take()</code> until there are no more <code>Future&lt;?&gt;</code> objects to return, which means all of them are completed.</p>\n\n<hr>\n\n<p>Another thing that may be relevant, depending on your scenario is <a href=\"http://download.oracle.com/javase/8/docs/api/java/util/concurrent/CyclicBarrier.html\" rel=\"noreferrer\"><code>CyclicBarrier</code></a>.</p>\n\n<blockquote>\n  <p>A synchronization aid that allows a set of threads to all wait for each other to reach a common barrier point. CyclicBarriers are useful in programs involving a fixed sized party of threads that must occasionally wait for each other. The barrier is called cyclic because it can be re-used after the waiting threads are released. </p>\n</blockquote>\n"},{"comments":[{"owner":{"account_id":97681,"reputation":184,"user_id":264834,"display_name":"Leonid"},"score":0,"creation_date":1381510990,"post_id":7939499,"comment_id":28622750,"body_markdown":"Be aware that this approach will not work for thread pools as they are not terminated after a set of tasks.","body":"Be aware that this approach will not work for thread pools as they are not terminated after a set of tasks."},{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":7,"creation_date":1381525537,"post_id":7939499,"comment_id":28629559,"body_markdown":"@Leonid that is exactly what shutdown() does.","body":"@Leonid that is exactly what shutdown() does."},{"owner":{"account_id":1249289,"reputation":3789,"user_id":1422630,"accept_rate":55,"display_name":"Aquarius Power"},"score":3,"creation_date":1418500408,"post_id":7939499,"comment_id":43362178,"body_markdown":"`while(!es.awaitTermination(1, TimeUnit.MINUTES));`","body":"<code>while(!es.awaitTermination(1, TimeUnit.MINUTES));</code>"},{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":3,"creation_date":1418500528,"post_id":7939499,"comment_id":43362217,"body_markdown":"@AquariusPower You could just tell it to wait longer, or forever.","body":"@AquariusPower You could just tell it to wait longer, or forever."},{"owner":{"account_id":1249289,"reputation":3789,"user_id":1422630,"accept_rate":55,"display_name":"Aquarius Power"},"score":1,"creation_date":1418500777,"post_id":7939499,"comment_id":43362287,"body_markdown":"oh.. I get it; so I added a message in the loop saying it is waiting all threads to finish; thanks!","body":"oh.. I get it; so I added a message in the loop saying it is waiting all threads to finish; thanks!"},{"owner":{"account_id":484452,"reputation":21496,"user_id":900130,"accept_rate":65,"display_name":"Zolt&#225;n"},"score":0,"creation_date":1426251205,"post_id":7939499,"comment_id":46306344,"body_markdown":"What happens if I invoke `awaitTermination` before invoking `es.shutdown()`? E.g. if `es.shutdown()` is invoked from another thread and this may or may not happen before invoking `awaitTermination` on the main thread?","body":"What happens if I invoke <code>awaitTermination</code> before invoking <code>es.shutdown()</code>? E.g. if <code>es.shutdown()</code> is invoked from another thread and this may or may not happen before invoking <code>awaitTermination</code> on the main thread?"},{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1426393839,"post_id":7939499,"comment_id":46351483,"body_markdown":"@Zolt&#225;n I suspect it will wait for another thread to shut it down or throw an error. (The Javadoc doesn&#39;t say) perhaps you could try it.","body":"@Zolt&#225;n I suspect it will wait for another thread to shut it down or throw an error. (The Javadoc doesn&#39;t say) perhaps you could try it."},{"owner":{"account_id":1457199,"reputation":4503,"user_id":1629242,"accept_rate":56,"display_name":"Amogh"},"score":1,"creation_date":1441625102,"post_id":7939499,"comment_id":52739232,"body_markdown":"@PeterLawrey, Is it necessary to call `es.shutdown();`? what if I write a code in which I executed a thread using `es.execute(runnableObj_ZipMaking);` in `try` block and in `finally` I called `boolean finshed = es.awaitTermination(10, TimeUnit.MINUTES);`. So I suppose this should wait until all threads complete their work or timeout is happen (whatever is first), Is my assumption is correct? or call to `shutdown()` is compulsory?","body":"@PeterLawrey, Is it necessary to call <code>es.shutdown();</code>? what if I write a code in which I executed a thread using <code>es.execute(runnableObj_ZipMaking);</code> in <code>try</code> block and in <code>finally</code> I called <code>boolean finshed = es.awaitTermination(10, TimeUnit.MINUTES);</code>. So I suppose this should wait until all threads complete their work or timeout is happen (whatever is first), Is my assumption is correct? or call to <code>shutdown()</code> is compulsory?"},{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":1,"creation_date":1441630940,"post_id":7939499,"comment_id":52742888,"body_markdown":"@Amogh An ExecutorService won&#39;t shutdown itself unless it has been GCed.  If you do `es.awaitTermination` you will be preventing it from being cleaned up so you will be waiting for another thread to terminate it.","body":"@Amogh An ExecutorService won&#39;t shutdown itself unless it has been GCed.  If you do <code>es.awaitTermination</code> you will be preventing it from being cleaned up so you will be waiting for another thread to terminate it."},{"owner":{"account_id":1457199,"reputation":4503,"user_id":1629242,"accept_rate":56,"display_name":"Amogh"},"score":1,"creation_date":1441635979,"post_id":7939499,"comment_id":52745764,"body_markdown":"@PeterLawrey, Oh this means calling shutdown does not forcefully interrupt the execution of any thread, it will only clean up the completed threads and no new threads/task is accepted and the next line i.e `es.awaitTermination` wait for given time to complete it&#39;s execution.","body":"@PeterLawrey, Oh this means calling shutdown does not forcefully interrupt the execution of any thread, it will only clean up the completed threads and no new threads/task is accepted and the next line i.e <code>es.awaitTermination</code> wait for given time to complete it&#39;s execution."},{"owner":{"account_id":927341,"reputation":1071,"user_id":957847,"accept_rate":29,"display_name":"Gerry"},"score":0,"creation_date":1653929031,"post_id":7939499,"comment_id":127966036,"body_markdown":"I put a sleep in my threads (6) to simulate blocking, and only the first thread was started. Tried thread.join() that seems to work well.","body":"I put a sleep in my threads (6) to simulate blocking, and only the first thread was started. Tried thread.join() that seems to work well."},{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1654870028,"post_id":7939499,"comment_id":128202406,"body_markdown":"@Gerry the shutdown() will prevent any tasks not started from starting. Take it out and increase the timeout to say 10 seconds.","body":"@Gerry the shutdown() will prevent any tasks not started from starting. Take it out and increase the timeout to say 10 seconds."}],"tags":[],"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"comment_count":12,"down_vote_count":0,"up_vote_count":156,"is_accepted":true,"score":156,"last_activity_date":1689350826,"creation_date":1319898597,"answer_id":7939499,"question_id":7939257,"body_markdown":"The approach I take is to use an [ExecutorService][1] to manage pools of threads.\r\n\r\n    ExecutorService es = Executors.newCachedThreadPool();\r\n    for(int i=0;i&lt;5;i++){\r\n        es.execute(new Runnable() { /*  your task */ });\r\n    }\r\n    es.shutdown();\r\n    boolean finished = es.awaitTermination(1, TimeUnit.MINUTES);\r\n    // all tasks have finished or the time has been reached.\r\n\r\n\r\n  [1]: http://download.oracle.com/javase/8/docs/api/java/util/concurrent/ExecutorService.html","title":"wait until all threads finish their work in java","body":"<p>The approach I take is to use an <a href=\"http://download.oracle.com/javase/8/docs/api/java/util/concurrent/ExecutorService.html\" rel=\"noreferrer\">ExecutorService</a> to manage pools of threads.</p>\n<pre><code>ExecutorService es = Executors.newCachedThreadPool();\nfor(int i=0;i&lt;5;i++){\n    es.execute(new Runnable() { /*  your task */ });\n}\nes.shutdown();\nboolean finished = es.awaitTermination(1, TimeUnit.MINUTES);\n// all tasks have finished or the time has been reached.\n</code></pre>\n"},{"tags":[],"owner":{"account_id":909520,"reputation":526,"user_id":1019109,"accept_rate":75,"display_name":"interDist"},"comment_count":0,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1469811900,"creation_date":1319900088,"answer_id":7939645,"question_id":7939257,"body_markdown":"Another possibility is the [`CountDownLatch`](http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CountDownLatch.html) object, which is useful for simple situations : since you know in advance the number of threads, you initialize it with the relevant count, and pass the reference of the object to each thread.  \r\nUpon completion of its task, each thread calls `CountDownLatch.countDown()` which decrements the internal counter. The main thread, after starting all others, should do the `CountDownLatch.await()` blocking call. It will be released as soon as the internal counter has reached 0.\r\n\r\nPay attention that with this object, an `InterruptedException` can be thrown as well.","title":"wait until all threads finish their work in java","body":"<p>Another possibility is the <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CountDownLatch.html\" rel=\"nofollow noreferrer\"><code>CountDownLatch</code></a> object, which is useful for simple situations : since you know in advance the number of threads, you initialize it with the relevant count, and pass the reference of the object to each thread.<br>\nUpon completion of its task, each thread calls <code>CountDownLatch.countDown()</code> which decrements the internal counter. The main thread, after starting all others, should do the <code>CountDownLatch.await()</code> blocking call. It will be released as soon as the internal counter has reached 0.</p>\n\n<p>Pay attention that with this object, an <code>InterruptedException</code> can be thrown as well.</p>\n"},{"tags":[],"owner":{"account_id":558770,"reputation":16438,"user_id":755804,"accept_rate":20,"display_name":"18446744073709551615"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1471683809,"creation_date":1359028974,"answer_id":14500933,"question_id":7939257,"body_markdown":"Although not relevant to OP&#39;s problem, if you are interested in synchronization (more precisely, a rendez-vous) with exactly one thread, you may use an [Exchanger][1]\r\n\r\n\r\nIn my case, I needed to pause the parent thread until the child thread did something, e.g. completed its initialization. A [CountDownLatch][2] also works well.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Exchanger.html\r\n  [2]: http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CountDownLatch.html","title":"wait until all threads finish their work in java","body":"<p>Although not relevant to OP's problem, if you are interested in synchronization (more precisely, a rendez-vous) with exactly one thread, you may use an <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Exchanger.html\" rel=\"nofollow\">Exchanger</a></p>\n\n<p>In my case, I needed to pause the parent thread until the child thread did something, e.g. completed its initialization. A <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CountDownLatch.html\" rel=\"nofollow\">CountDownLatch</a> also works well.</p>\n"},{"tags":[],"owner":{"account_id":6262687,"reputation":11,"user_id":4869351,"display_name":"Jeyaraj.J"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1430917992,"creation_date":1430896162,"answer_id":30069842,"question_id":7939257,"body_markdown":"try this, will work.\r\n\r\n      Thread[] threads = new Thread[10];\r\n\r\n      List&lt;Thread&gt; allThreads = new ArrayList&lt;Thread&gt;();\r\n\r\n      for(Thread thread : threads){\r\n\r\n            if(null != thread){\r\n\r\n                  if(thread.isAlive()){\r\n\r\n                        allThreads.add(thread);\r\n\r\n                  }\r\n\r\n            }\r\n\r\n      }\r\n\r\n      while(!allThreads.isEmpty()){\r\n\r\n            Iterator&lt;Thread&gt; ite = allThreads.iterator();\r\n\r\n            while(ite.hasNext()){\r\n\r\n                  Thread thread = ite.next();\r\n\r\n                  if(!thread.isAlive()){\r\n\r\n                       ite.remove();\r\n                  }\r\n\r\n            }\r\n\r\n       }\r\n","title":"wait until all threads finish their work in java","body":"<p>try this, will work.</p>\n\n<pre><code>  Thread[] threads = new Thread[10];\n\n  List&lt;Thread&gt; allThreads = new ArrayList&lt;Thread&gt;();\n\n  for(Thread thread : threads){\n\n        if(null != thread){\n\n              if(thread.isAlive()){\n\n                    allThreads.add(thread);\n\n              }\n\n        }\n\n  }\n\n  while(!allThreads.isEmpty()){\n\n        Iterator&lt;Thread&gt; ite = allThreads.iterator();\n\n        while(ite.hasNext()){\n\n              Thread thread = ite.next();\n\n              if(!thread.isAlive()){\n\n                   ite.remove();\n              }\n\n        }\n\n   }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":213379,"reputation":9738,"user_id":466738,"accept_rate":94,"display_name":"Adam Michalik"},"score":0,"creation_date":1452180800,"post_id":34658665,"comment_id":57063300,"body_markdown":"This is active waiting, which will cause CPU to be constantly running an empty loop. Very wasteful.","body":"This is active waiting, which will cause CPU to be constantly running an empty loop. Very wasteful."}],"tags":[],"owner":{"account_id":2864877,"reputation":1,"user_id":2459393,"display_name":"Maggy"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1452179617,"creation_date":1452179617,"answer_id":34658665,"question_id":7939257,"body_markdown":"Use this in your main thread: while(!executor.isTerminated());\r\nPut this line of code after starting all the threads from executor service. This will only start the main thread after all the threads started by executors are finished. Make sure to call executor.shutdown(); before the above loop.","title":"wait until all threads finish their work in java","body":"<p>Use this in your main thread: while(!executor.isTerminated());\nPut this line of code after starting all the threads from executor service. This will only start the main thread after all the threads started by executors are finished. Make sure to call executor.shutdown(); before the above loop.</p>\n"},{"tags":[],"owner":{"account_id":6453072,"reputation":37996,"user_id":4999394,"accept_rate":98,"display_name":"Ravindra babu"},"comment_count":0,"down_vote_count":0,"up_vote_count":29,"is_accepted":false,"score":29,"last_activity_date":1680262020,"creation_date":1461338188,"answer_id":36797569,"question_id":7939257,"body_markdown":"Have a look at various solutions. \r\n\r\n1. `join()` API has been introduced in early versions of Java. Some good alternatives are available with this [concurrent][1] package since the JDK 1.5 release.\r\n\r\n2. [ExecutorService#invokeAll()][2]\r\n&gt; Executes the given tasks, returning a list of Futures holding their status and results when everything is completed.\r\n\r\n Refer to this related SE question for code example:\r\n\r\n https://stackoverflow.com/questions/18202388/how-to-use-invokeall-to-let-all-thread-pool-do-their-task/39547616#39547616\r\n\r\n\r\n3. [CountDownLatch][3]\r\n\r\n &gt;  A synchronization aid that allows one or more threads to wait until a set of operations being performed in other threads completes.\r\n\r\n &gt; A **CountDownLatch** is initialized with a given count. The await methods block until the current count reaches zero due to invocations of the `countDown()` method, after which all waiting threads are released and any subsequent invocations of await return immediately. This is a one-shot phenomenon -- the count cannot be reset. If you need a version that resets the count, consider using a **CyclicBarrier**.\r\n\r\n   Refer to this question for usage of CountDownLatch  [here][4]\r\n\r\n    \r\n\r\n\r\n4. [ForkJoinPool][5] or \t[newWorkStealingPool()][6] in [Executors][7] \r\n\r\n5. Iterate through all [Future][8] objects created after submitting to `ExecutorService` \r\n\r\nSource : Various links from **docs.oracle.com**\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/package-summary.html\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ExecutorService.html#invokeAll-java.util.Collection-\r\n  [3]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CountDownLatch.html\r\n  [4]: https://stackoverflow.com/questions/35075886/how-to-wait-for-a-thread-that-spawns-its-own-thread/35076391#35076391\r\n  [5]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ForkJoinPool.html\r\n  [6]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Executors.html#newWorkStealingPool--\r\n  [7]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Executors.html\r\n  [8]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Future.html","title":"wait until all threads finish their work in java","body":"<p>Have a look at various solutions.</p>\n<ol>\n<li><p><code>join()</code> API has been introduced in early versions of Java. Some good alternatives are available with this <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/package-summary.html\" rel=\"nofollow noreferrer\">concurrent</a> package since the JDK 1.5 release.</p>\n</li>\n<li><p><a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ExecutorService.html#invokeAll-java.util.Collection-\" rel=\"nofollow noreferrer\">ExecutorService#invokeAll()</a></p>\n</li>\n</ol>\n<blockquote>\n<p>Executes the given tasks, returning a list of Futures holding their status and results when everything is completed.</p>\n</blockquote>\n<p>Refer to this related SE question for code example:</p>\n<p><a href=\"https://stackoverflow.com/questions/18202388/how-to-use-invokeall-to-let-all-thread-pool-do-their-task/39547616#39547616\">How to use invokeAll() to let all thread pool do their task?</a></p>\n<ol start=\"3\">\n<li><a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CountDownLatch.html\" rel=\"nofollow noreferrer\">CountDownLatch</a></li>\n</ol>\n<blockquote>\n<p>A synchronization aid that allows one or more threads to wait until a set of operations being performed in other threads completes.</p>\n</blockquote>\n<blockquote>\n<p>A <strong>CountDownLatch</strong> is initialized with a given count. The await methods block until the current count reaches zero due to invocations of the <code>countDown()</code> method, after which all waiting threads are released and any subsequent invocations of await return immediately. This is a one-shot phenomenon -- the count cannot be reset. If you need a version that resets the count, consider using a <strong>CyclicBarrier</strong>.</p>\n</blockquote>\n<p>Refer to this question for usage of CountDownLatch  <a href=\"https://stackoverflow.com/questions/35075886/how-to-wait-for-a-thread-that-spawns-its-own-thread/35076391#35076391\">here</a></p>\n<ol start=\"4\">\n<li><p><a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ForkJoinPool.html\" rel=\"nofollow noreferrer\">ForkJoinPool</a> or     <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Executors.html#newWorkStealingPool--\" rel=\"nofollow noreferrer\">newWorkStealingPool()</a> in <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Executors.html\" rel=\"nofollow noreferrer\">Executors</a></p>\n</li>\n<li><p>Iterate through all <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Future.html\" rel=\"nofollow noreferrer\">Future</a> objects created after submitting to <code>ExecutorService</code></p>\n</li>\n</ol>\n<p>Source : Various links from <strong>docs.oracle.com</strong></p>\n"},{"tags":[],"owner":{"account_id":1413263,"reputation":1095,"user_id":1339452,"display_name":"Madis Pukkonen"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1466402421,"creation_date":1466402421,"answer_id":37915470,"question_id":7939257,"body_markdown":"I had a similar problem and ended up using Java 8 parallelStream.\r\n\r\n    requestList.parallelStream().forEach(req -&gt; makeRequest(req));\r\n\r\nIt&#39;s super simple and readable.\r\nBehind the scenes it is using default JVM’s fork join pool which means that it will wait for all the threads to finish before continuing. For my case it was a neat solution, because it was the only parallelStream in my application. If you have more than one parallelStream running simultaneously, please read the link below.\r\n\r\nMore information about parallel streams [here][1].\r\n\r\n\r\n  [1]: http://zeroturnaround.com/rebellabs/java-parallel-streams-are-bad-for-your-health/","title":"wait until all threads finish their work in java","body":"<p>I had a similar problem and ended up using Java 8 parallelStream.</p>\n\n<pre><code>requestList.parallelStream().forEach(req -&gt; makeRequest(req));\n</code></pre>\n\n<p>It's super simple and readable.\nBehind the scenes it is using default JVM’s fork join pool which means that it will wait for all the threads to finish before continuing. For my case it was a neat solution, because it was the only parallelStream in my application. If you have more than one parallelStream running simultaneously, please read the link below.</p>\n\n<p>More information about parallel streams <a href=\"http://zeroturnaround.com/rebellabs/java-parallel-streams-are-bad-for-your-health/\" rel=\"nofollow\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":1710481,"reputation":22873,"user_id":1568658,"accept_rate":82,"display_name":"Eric"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1546518639,"creation_date":1546518639,"answer_id":54022338,"question_id":7939257,"body_markdown":"The existing answers said could `join()` each thread.\r\n\r\nBut there are several ways to get the thread array / list:  \r\n\r\n- Add the Thread into a list on creation.\r\n- Use `ThreadGroup` to manage the threads.\r\n\r\nFollowing code will use the `ThreadGruop` approach. It create a group first, then when create each thread specify the group in constructor, later could get the thread array via `ThreadGroup.enumerate()`\r\n\r\n---\r\nCode\r\n---\r\n\r\n**SyncBlockLearn.java**\r\n\r\n    import org.testng.Assert;\r\n    import org.testng.annotations.Test;\r\n    \r\n    /**\r\n     * synchronized block - learn,\r\n     *\r\n     * @author eric\r\n     * @date Apr 20, 2015 1:37:11 PM\r\n     */\r\n    public class SyncBlockLearn {\r\n        private static final int TD_COUNT = 5; // thread count\r\n        private static final int ROUND_PER_THREAD = 100; // round for each thread,\r\n        private static final long INC_DELAY = 10; // delay of each increase,\r\n    \r\n        // sync block test,\r\n        @Test\r\n        public void syncBlockTest() throws InterruptedException {\r\n            Counter ct = new Counter();\r\n            ThreadGroup tg = new ThreadGroup(&quot;runner&quot;);\r\n    \r\n            for (int i = 0; i &lt; TD_COUNT; i++) {\r\n                new Thread(tg, ct, &quot;t-&quot; + i).start();\r\n            }\r\n    \r\n            Thread[] tArr = new Thread[TD_COUNT];\r\n            tg.enumerate(tArr); // get threads,\r\n    \r\n            // wait all runner to finish,\r\n            for (Thread t : tArr) {\r\n                t.join();\r\n            }\r\n    \r\n            System.out.printf(&quot;\\nfinal count: %d\\n&quot;, ct.getCount());\r\n            Assert.assertEquals(ct.getCount(), TD_COUNT * ROUND_PER_THREAD);\r\n        }\r\n    \r\n        static class Counter implements Runnable {\r\n            private final Object lkOn = new Object(); // the object to lock on,\r\n            private int count = 0;\r\n    \r\n            @Override\r\n            public void run() {\r\n                System.out.printf(&quot;[%s] begin\\n&quot;, Thread.currentThread().getName());\r\n    \r\n                for (int i = 0; i &lt; ROUND_PER_THREAD; i++) {\r\n                    synchronized (lkOn) {\r\n                        System.out.printf(&quot;[%s] [%d] inc to: %d\\n&quot;, Thread.currentThread().getName(), i, ++count);\r\n                    }\r\n                    try {\r\n                        Thread.sleep(INC_DELAY); // wait a while,\r\n                    } catch (InterruptedException e) {\r\n                        e.printStackTrace();\r\n                    }\r\n                }\r\n    \r\n                System.out.printf(&quot;[%s] end\\n&quot;, Thread.currentThread().getName());\r\n            }\r\n    \r\n            public int getCount() {\r\n                return count;\r\n            }\r\n        }\r\n    }\r\n\r\nThe main thread will wait for all threads in the group to finish.\r\n","title":"wait until all threads finish their work in java","body":"<p>The existing answers said could <code>join()</code> each thread.</p>\n\n<p>But there are several ways to get the thread array / list:  </p>\n\n<ul>\n<li>Add the Thread into a list on creation.</li>\n<li>Use <code>ThreadGroup</code> to manage the threads.</li>\n</ul>\n\n<p>Following code will use the <code>ThreadGruop</code> approach. It create a group first, then when create each thread specify the group in constructor, later could get the thread array via <code>ThreadGroup.enumerate()</code></p>\n\n<hr>\n\n<h2>Code</h2>\n\n<p><strong>SyncBlockLearn.java</strong></p>\n\n<pre><code>import org.testng.Assert;\nimport org.testng.annotations.Test;\n\n/**\n * synchronized block - learn,\n *\n * @author eric\n * @date Apr 20, 2015 1:37:11 PM\n */\npublic class SyncBlockLearn {\n    private static final int TD_COUNT = 5; // thread count\n    private static final int ROUND_PER_THREAD = 100; // round for each thread,\n    private static final long INC_DELAY = 10; // delay of each increase,\n\n    // sync block test,\n    @Test\n    public void syncBlockTest() throws InterruptedException {\n        Counter ct = new Counter();\n        ThreadGroup tg = new ThreadGroup(\"runner\");\n\n        for (int i = 0; i &lt; TD_COUNT; i++) {\n            new Thread(tg, ct, \"t-\" + i).start();\n        }\n\n        Thread[] tArr = new Thread[TD_COUNT];\n        tg.enumerate(tArr); // get threads,\n\n        // wait all runner to finish,\n        for (Thread t : tArr) {\n            t.join();\n        }\n\n        System.out.printf(\"\\nfinal count: %d\\n\", ct.getCount());\n        Assert.assertEquals(ct.getCount(), TD_COUNT * ROUND_PER_THREAD);\n    }\n\n    static class Counter implements Runnable {\n        private final Object lkOn = new Object(); // the object to lock on,\n        private int count = 0;\n\n        @Override\n        public void run() {\n            System.out.printf(\"[%s] begin\\n\", Thread.currentThread().getName());\n\n            for (int i = 0; i &lt; ROUND_PER_THREAD; i++) {\n                synchronized (lkOn) {\n                    System.out.printf(\"[%s] [%d] inc to: %d\\n\", Thread.currentThread().getName(), i, ++count);\n                }\n                try {\n                    Thread.sleep(INC_DELAY); // wait a while,\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                }\n            }\n\n            System.out.printf(\"[%s] end\\n\", Thread.currentThread().getName());\n        }\n\n        public int getCount() {\n            return count;\n        }\n    }\n}\n</code></pre>\n\n<p>The main thread will wait for all threads in the group to finish.</p>\n"},{"tags":[],"owner":{"account_id":12267155,"reputation":3075,"user_id":8953378,"display_name":"Alon Gouldman"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1559487491,"creation_date":1559487491,"answer_id":56416180,"question_id":7939257,"body_markdown":"I created a small helper method to wait for a few Threads to finish: \r\n\r\n```\r\npublic static void waitForThreadsToFinish(Thread... threads) {\r\n        try {\r\n            for (Thread thread : threads) {\r\n                thread.join();\r\n            }\r\n        }\r\n        catch (InterruptedException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n```","title":"wait until all threads finish their work in java","body":"<p>I created a small helper method to wait for a few Threads to finish: </p>\n\n<pre><code>public static void waitForThreadsToFinish(Thread... threads) {\n        try {\n            for (Thread thread : threads) {\n                thread.join();\n            }\n        }\n        catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6575754,"reputation":9298,"user_id":5081877,"accept_rate":92,"display_name":"Yash"},"comment_count":0,"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1559561084,"creation_date":1559561084,"answer_id":56426361,"question_id":7939257,"body_markdown":"Wait/block the Thread Main until some other threads complete their work.\r\n\r\nAs `@Ravindra babu` said it can be achieved in various ways, but showing with examples.\r\n\r\n * java.lang.Thread.[join()](https://docs.oracle.com/javase/8/docs/api/java/lang/Thread.html#join--) &lt;sup&gt;Since:1.0&lt;/sup&gt;\r\n\r\n    ```java\r\n\tpublic static void joiningThreads() throws InterruptedException {\r\n\t\tThread t1 = new Thread( new LatchTask(1, null), &quot;T1&quot; );\r\n\t\tThread t2 = new Thread( new LatchTask(7, null), &quot;T2&quot; );\r\n\t\tThread t3 = new Thread( new LatchTask(5, null), &quot;T3&quot; );\r\n\t\tThread t4 = new Thread( new LatchTask(2, null), &quot;T4&quot; );\r\n\t\t\r\n\t\t// Start all the threads\r\n\t\tt1.start();\r\n\t\tt2.start();\r\n\t\tt3.start();\r\n\t\tt4.start();\r\n\t\t\r\n\t\t// Wait till all threads completes\r\n\t\tt1.join();\r\n\t\tt2.join();\r\n\t\tt3.join();\r\n\t\tt4.join();\r\n\t}\r\n    ```\r\n\r\n * [java.util.concurrent.CountDownLatch](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CountDownLatch.html) &lt;sup&gt;Since:1.5&lt;/sup&gt;\r\n    * `.countDown()` &#171; Decrements the count of the latch group.\r\n    * `.await()` &#171; The await methods block until the current count reaches zero.\r\n \r\n If you created `latchGroupCount = 4` then `countDown()` should be called 4 times to make count 0. So, that `await()` will release the blocking threads.\r\n    ```java\r\n\tpublic static void latchThreads() throws InterruptedException {\r\n\t\tint latchGroupCount = 4;\r\n\t\tCountDownLatch latch = new CountDownLatch(latchGroupCount);\r\n\t\tThread t1 = new Thread( new LatchTask(1, latch), &quot;T1&quot; );\r\n\t\tThread t2 = new Thread( new LatchTask(7, latch), &quot;T2&quot; );\r\n\t\tThread t3 = new Thread( new LatchTask(5, latch), &quot;T3&quot; );\r\n\t\tThread t4 = new Thread( new LatchTask(2, latch), &quot;T4&quot; );\r\n\t\t\r\n\t\tt1.start();\r\n\t\tt2.start();\r\n\t\tt3.start();\r\n\t\tt4.start();\r\n\t\t\r\n\t\t//latch.countDown();\r\n\r\n\t\tlatch.await(); // block until latchGroupCount is 0.\r\n\t}\r\n    ```\r\n\r\n\r\n\r\nExample code of Threaded class `LatchTask`. To test the approach use `joiningThreads();`\r\nand `latchThreads();` from main method.\r\n\r\n```java\r\nclass LatchTask extends Thread {\r\n\tCountDownLatch latch;\r\n\tint iterations = 10;\r\n\tpublic LatchTask(int iterations, CountDownLatch latch) {\r\n\t\tthis.iterations = iterations;\r\n\t\tthis.latch = latch;\r\n\t}\r\n\t\r\n\t@Override\r\n\tpublic void run() {\r\n\t\tString threadName = Thread.currentThread().getName();\r\n\t\tSystem.out.println(threadName + &quot; : Started Task...&quot;);\r\n\t\t\r\n\t\tfor (int i = 0; i &lt; iterations; i++) {\r\n\t\t\tSystem.out.println(threadName + &quot; : &quot; + i);\r\n\t\t\tMainThread_Wait_TillWorkerThreadsComplete.sleep(1);\r\n\t\t}\r\n\t\tSystem.out.println(threadName + &quot; : Completed Task&quot;);\r\n\t\t// countDown() &#171; Decrements the count of the latch group.\r\n\t\tif(latch != null)\r\n\t\t\tlatch.countDown();\r\n\t}\r\n}\r\n```\r\n\r\n *  [CyclicBarriers](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CyclicBarrier.html) A synchronization aid that allows a set of threads to all wait for each other to reach a common barrier point.CyclicBarriers are useful in programs involving a fixed sized party of threads that must occasionally wait for each other. The barrier is called cyclic because it can be re-used after the waiting threads are released.\r\n    ```java\r\n\tCyclicBarrier barrier = new CyclicBarrier(3);\r\n\tbarrier.await();\r\n    ```\r\nFor example refer this [Concurrent_ParallelNotifyies](https://github.com/Yash-777/LearnJava/blob/master/src/com/github/os/threads/Concurrent_ParallelNotifyies.java) class.\r\n\r\n\r\n\r\n---\r\n\r\n * Executer framework: we can use [ExecutorService](https://docs.oracle.com/javase/tutorial/essential/concurrency/exinter.html) to create a thread pool, and tracks the progress of the asynchronous tasks with Future.\r\n\r\n   * `submit(Runnable)`, `submit(Callable)` which return Future Object. By using `future.get()` function we can block the main thread till the working threads completes its work.\r\n\r\n   * `invokeAll(...)` - returns a list of Future objects via which you can obtain the results of the executions of each Callable.\r\n\r\n[Find example](https://stackoverflow.com/a/56424946/5081877) of using Interfaces Runnable, Callable with Executor framework.\r\n\r\n----\r\n\r\n@See also\r\n\r\n * [Find out thread is still alive?](https://stackoverflow.com/a/48166865/5081877)\r\n","title":"wait until all threads finish their work in java","body":"<p>Wait/block the Thread Main until some other threads complete their work.</p>\n\n<p>As <code>@Ravindra babu</code> said it can be achieved in various ways, but showing with examples.</p>\n\n<ul>\n<li><p>java.lang.Thread.<a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Thread.html#join--\" rel=\"noreferrer\">join()</a> <sup>Since:1.0</sup></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public static void joiningThreads() throws InterruptedException {\n    Thread t1 = new Thread( new LatchTask(1, null), \"T1\" );\n    Thread t2 = new Thread( new LatchTask(7, null), \"T2\" );\n    Thread t3 = new Thread( new LatchTask(5, null), \"T3\" );\n    Thread t4 = new Thread( new LatchTask(2, null), \"T4\" );\n\n    // Start all the threads\n    t1.start();\n    t2.start();\n    t3.start();\n    t4.start();\n\n    // Wait till all threads completes\n    t1.join();\n    t2.join();\n    t3.join();\n    t4.join();\n}\n</code></pre></li>\n<li><p><a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CountDownLatch.html\" rel=\"noreferrer\">java.util.concurrent.CountDownLatch</a> <sup>Since:1.5</sup></p>\n\n<ul>\n<li><code>.countDown()</code> « Decrements the count of the latch group.</li>\n<li><code>.await()</code> « The await methods block until the current count reaches zero.</li>\n</ul>\n\n<p>If you created <code>latchGroupCount = 4</code> then <code>countDown()</code> should be called 4 times to make count 0. So, that <code>await()</code> will release the blocking threads.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public static void latchThreads() throws InterruptedException {\n    int latchGroupCount = 4;\n    CountDownLatch latch = new CountDownLatch(latchGroupCount);\n    Thread t1 = new Thread( new LatchTask(1, latch), \"T1\" );\n    Thread t2 = new Thread( new LatchTask(7, latch), \"T2\" );\n    Thread t3 = new Thread( new LatchTask(5, latch), \"T3\" );\n    Thread t4 = new Thread( new LatchTask(2, latch), \"T4\" );\n\n    t1.start();\n    t2.start();\n    t3.start();\n    t4.start();\n\n    //latch.countDown();\n\n    latch.await(); // block until latchGroupCount is 0.\n}\n</code></pre></li>\n</ul>\n\n<p>Example code of Threaded class <code>LatchTask</code>. To test the approach use <code>joiningThreads();</code>\nand <code>latchThreads();</code> from main method.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>class LatchTask extends Thread {\n    CountDownLatch latch;\n    int iterations = 10;\n    public LatchTask(int iterations, CountDownLatch latch) {\n        this.iterations = iterations;\n        this.latch = latch;\n    }\n\n    @Override\n    public void run() {\n        String threadName = Thread.currentThread().getName();\n        System.out.println(threadName + \" : Started Task...\");\n\n        for (int i = 0; i &lt; iterations; i++) {\n            System.out.println(threadName + \" : \" + i);\n            MainThread_Wait_TillWorkerThreadsComplete.sleep(1);\n        }\n        System.out.println(threadName + \" : Completed Task\");\n        // countDown() « Decrements the count of the latch group.\n        if(latch != null)\n            latch.countDown();\n    }\n}\n</code></pre>\n\n<ul>\n<li><a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CyclicBarrier.html\" rel=\"noreferrer\">CyclicBarriers</a> A synchronization aid that allows a set of threads to all wait for each other to reach a common barrier point.CyclicBarriers are useful in programs involving a fixed sized party of threads that must occasionally wait for each other. The barrier is called cyclic because it can be re-used after the waiting threads are released.\n\n<pre class=\"lang-java prettyprint-override\"><code>CyclicBarrier barrier = new CyclicBarrier(3);\nbarrier.await();\n</code></pre>\n\nFor example refer this <a href=\"https://github.com/Yash-777/LearnJava/blob/master/src/com/github/os/threads/Concurrent_ParallelNotifyies.java\" rel=\"noreferrer\">Concurrent_ParallelNotifyies</a> class.</li>\n</ul>\n\n<hr>\n\n<ul>\n<li><p>Executer framework: we can use <a href=\"https://docs.oracle.com/javase/tutorial/essential/concurrency/exinter.html\" rel=\"noreferrer\">ExecutorService</a> to create a thread pool, and tracks the progress of the asynchronous tasks with Future.</p>\n\n<ul>\n<li><p><code>submit(Runnable)</code>, <code>submit(Callable)</code> which return Future Object. By using <code>future.get()</code> function we can block the main thread till the working threads completes its work.</p></li>\n<li><p><code>invokeAll(...)</code> - returns a list of Future objects via which you can obtain the results of the executions of each Callable.</p></li>\n</ul></li>\n</ul>\n\n<p><a href=\"https://stackoverflow.com/a/56424946/5081877\">Find example</a> of using Interfaces Runnable, Callable with Executor framework.</p>\n\n<hr>\n\n<p>@See also</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/a/48166865/5081877\">Find out thread is still alive?</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":4612886,"reputation":565,"user_id":3740432,"accept_rate":0,"display_name":"Afsar Ali"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1614435206,"creation_date":1614435206,"answer_id":66399662,"question_id":7939257,"body_markdown":"I had similar situation , where i had to wait till all child threads complete its execution then only i could get the status result for each of them .. hence i needed to wait till all child thread completed.\r\n\r\nbelow is my code where i did multi-threading using \r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n     public static void main(String[] args) {\r\n            List&lt;RunnerPojo&gt; testList = ExcelObject.getTestStepsList();//.parallelStream().collect(Collectors.toList());\r\n            int threadCount = ConfigFileReader.getInstance().readConfig().getParallelThreadCount();\r\n            System.out.println(&quot;Thread count is : =========  &quot; + threadCount); // 5\r\n\r\n            ExecutorService threadExecutor = new DriverScript().threadExecutor(testList, threadCount);\r\n\r\n\r\n            boolean isProcessCompleted = waitUntilCondition(() -&gt; threadExecutor.isTerminated()); // Here i used waitUntil condition \r\n\r\n            if (isProcessCompleted) {\r\n                testList.forEach(x -&gt; {\r\n                    System.out.println(&quot;Test Name: &quot; + x.getTestCaseId());\r\n                    System.out.println(&quot;Test Status : &quot; + x.getStatus());\r\n                    System.out.println(&quot;======= Test Steps ===== &quot;);\r\n\r\n                    x.getTestStepsList().forEach(y -&gt; {\r\n                        System.out.println(&quot;Step Name: &quot; + y.getDescription());\r\n                        System.out.println(&quot;Test caseId : &quot; + y.getTestCaseId());\r\n                        System.out.println(&quot;Step Status: &quot; + y.getResult());\r\n                        System.out.println(&quot;\\n ============ ==========&quot;);\r\n                    });\r\n                });\r\n            }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\nBelow method is for distribution of list with parallel proccessing\r\n&lt;!-- language: java --&gt;\r\n\r\n    // This method will split my list and run in a parallel process with mutliple threads\r\n        private ExecutorService threadExecutor(List&lt;RunnerPojo&gt; testList, int threadSize) {\r\n            ExecutorService exec = Executors.newFixedThreadPool(threadSize);\r\n            testList.forEach(tests -&gt; {\r\n                exec.submit(() -&gt; {\r\n                    driverScript(tests);\r\n                });\r\n            });\r\n            exec.shutdown();\r\n            return exec;\r\n        }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\nThis is my wait until method: here you can wait till your condition satisfies within do while loop . in my case i waited for some max timeout .\r\nthis will keep checking until your `threadExecutor.isTerminated()` is `true` with polling period of 5 sec.\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n\r\n        static boolean waitUntilCondition(Supplier&lt;Boolean&gt; function) {\r\n            Double timer = 0.0;\r\n            Double maxTimeOut = 20.0;\r\n\r\n            boolean isFound;\r\n            do {\r\n                isFound = function.get();\r\n                if (isFound) {\r\n                    break;\r\n                } else {\r\n                    try {\r\n                        Thread.sleep(5000); // Sleeping for 5 sec (main thread will sleep for 5 sec)\r\n                    } catch (InterruptedException e) {\r\n                        e.printStackTrace();\r\n                    }\r\n                    timer++;\r\n                    System.out.println(&quot;Waiting for condition to be true .. waited ..&quot; + timer * 5 + &quot; sec.&quot;);\r\n                }\r\n            } while (timer &lt; maxTimeOut + 1.0);\r\n\r\n            return isFound;\r\n        }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"wait until all threads finish their work in java","body":"<p>I had similar situation , where i had to wait till all child threads complete its execution then only i could get the status result for each of them .. hence i needed to wait till all child thread completed.</p>\n<p>below is my code where i did multi-threading using</p>\n<pre class=\"lang-java prettyprint-override\"><code> public static void main(String[] args) {\n        List&lt;RunnerPojo&gt; testList = ExcelObject.getTestStepsList();//.parallelStream().collect(Collectors.toList());\n        int threadCount = ConfigFileReader.getInstance().readConfig().getParallelThreadCount();\n        System.out.println(&quot;Thread count is : =========  &quot; + threadCount); // 5\n\n        ExecutorService threadExecutor = new DriverScript().threadExecutor(testList, threadCount);\n\n\n        boolean isProcessCompleted = waitUntilCondition(() -&gt; threadExecutor.isTerminated()); // Here i used waitUntil condition \n\n        if (isProcessCompleted) {\n            testList.forEach(x -&gt; {\n                System.out.println(&quot;Test Name: &quot; + x.getTestCaseId());\n                System.out.println(&quot;Test Status : &quot; + x.getStatus());\n                System.out.println(&quot;======= Test Steps ===== &quot;);\n\n                x.getTestStepsList().forEach(y -&gt; {\n                    System.out.println(&quot;Step Name: &quot; + y.getDescription());\n                    System.out.println(&quot;Test caseId : &quot; + y.getTestCaseId());\n                    System.out.println(&quot;Step Status: &quot; + y.getResult());\n                    System.out.println(&quot;\\n ============ ==========&quot;);\n                });\n            });\n        }\n</code></pre>\n<p>Below method is for distribution of list with parallel proccessing</p>\n<pre class=\"lang-java prettyprint-override\"><code>// This method will split my list and run in a parallel process with mutliple threads\n    private ExecutorService threadExecutor(List&lt;RunnerPojo&gt; testList, int threadSize) {\n        ExecutorService exec = Executors.newFixedThreadPool(threadSize);\n        testList.forEach(tests -&gt; {\n            exec.submit(() -&gt; {\n                driverScript(tests);\n            });\n        });\n        exec.shutdown();\n        return exec;\n    }\n</code></pre>\n<p>This is my wait until method: here you can wait till your condition satisfies within do while loop . in my case i waited for some max timeout .\nthis will keep checking until your <code>threadExecutor.isTerminated()</code> is <code>true</code> with polling period of 5 sec.</p>\n<pre class=\"lang-java prettyprint-override\"><code>    static boolean waitUntilCondition(Supplier&lt;Boolean&gt; function) {\n        Double timer = 0.0;\n        Double maxTimeOut = 20.0;\n\n        boolean isFound;\n        do {\n            isFound = function.get();\n            if (isFound) {\n                break;\n            } else {\n                try {\n                    Thread.sleep(5000); // Sleeping for 5 sec (main thread will sleep for 5 sec)\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                }\n                timer++;\n                System.out.println(&quot;Waiting for condition to be true .. waited ..&quot; + timer * 5 + &quot; sec.&quot;);\n            }\n        } while (timer &lt; maxTimeOut + 1.0);\n\n        return isFound;\n    }\n</code></pre>\n"}],"owner":{"account_id":137693,"reputation":14870,"user_id":342059,"accept_rate":71,"display_name":"Ariyan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":236422,"favorite_count":0,"down_vote_count":0,"up_vote_count":123,"accepted_answer_id":7939499,"answer_count":17,"score":123,"last_activity_date":1689350826,"creation_date":1319895624,"question_id":7939257,"body_markdown":"I&#39;m writing an application that has 5 threads that get some information from web simultaneously and fill 5 different fields in a buffer class.  \r\nI need to validate buffer data and store it in a database when all threads finished their job.  \r\nHow can I do this (get alerted when all threads finished their work) ?  \r\n\r\n","title":"wait until all threads finish their work in java","body":"<p>I'm writing an application that has 5 threads that get some information from web simultaneously and fill 5 different fields in a buffer class.<br>\nI need to validate buffer data and store it in a database when all threads finished their job.<br>\nHow can I do this (get alerted when all threads finished their work) ?  </p>\n"},{"tags":["java","android","swipe","bottomnavigationview","swipe-gesture"],"owner":{"account_id":25447864,"reputation":1,"user_id":19249798,"display_name":"Krushna"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689350535,"creation_date":1689315281,"question_id":76685115,"body_markdown":"I found a better file management app named as MT Manager. But there is a feature I like most you can see the GIF. Here if we swipe from Bottom Navigation Menu then you can see a beautiful custom layout coming up. If we see some Vivo Device this type gesture we found normally when we open the settings menu. So if anyone knows about it, then kindly please help me. I want to implement it on my app. You can check the below picture how the swipe gesture working.\r\n\r\n![Like this ](https://i.stack.imgur.com/twOmq.gif)","title":"How to make swipe gesture from down to up to show a inner layout in java?","body":"<p>I found a better file management app named as MT Manager. But there is a feature I like most you can see the GIF. Here if we swipe from Bottom Navigation Menu then you can see a beautiful custom layout coming up. If we see some Vivo Device this type gesture we found normally when we open the settings menu. So if anyone knows about it, then kindly please help me. I want to implement it on my app. You can check the below picture how the swipe gesture working.</p>\n<p><img src=\"https://i.stack.imgur.com/twOmq.gif\" alt=\"Like this \" /></p>\n"},{"tags":["java","spring","spring-boot","error-handling","exceptionhandler"],"answers":[{"tags":[],"owner":{"account_id":2184114,"reputation":659,"user_id":1932930,"accept_rate":40,"display_name":"tdemay"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689349893,"creation_date":1689349893,"answer_id":76689333,"question_id":76689332,"body_markdown":"\r\nThe solution was a CORS related problem. Adding `Access-Control-Allow-Origin` to the header was the solution. \r\n\r\nHere&#39;s what you need to do if you want to catch all exceptions globally and send back a meaningful response. Forgive me as I&#39;m new to this, so if there is something I&#39;m missing, please let me know. \r\n\r\nGlobal exception handler:\r\n\r\n    @RestControllerAdvice\r\n    public class GlobalExceptionHandler {\r\n        @ExceptionHandler\r\n        public ResponseEntity&lt;UserResponseException&gt; handleException(Exception ex) {\r\n            return ResponseException.ResponseEntity(HttpStatus.INTERNAL_SERVER_ERROR, ex.getMessage());\r\n        }\r\n        // Add more handlers as needed. \r\n    }\r\n\r\nand my response exception class\r\n\r\n    @AllArgsConstructor(access = AccessLevel.PRIVATE)\r\n    public class ResponseException {\r\n        private int status;\r\n        private List&lt;String&gt; messages;\r\n        // add anything else you want to return\r\n\r\n        public static ResponseEntity&lt;ResponseException&gt; ResponseEntity(HttpStatus status, List&lt;String&gt; messages) {\r\n            ResponseException ure = new ResponseException(status.value(), messages);\r\n            HttpHeaders headers = new HttpHeaders();\r\n            headers.set(&quot;Access-Control-Allow-Origin&quot;, &quot;*&quot;);\r\n            return new ResponseEntity&lt;ResponseException&gt;(ure, headers, status);\r\n        }\r\n    }\r\n\r\nNow I can get back the data and it&#39;s available in CURL and in WebBrowser and most importantly to my front-end client. \r\n\r\n\r\n    curl -i http://localhost:8080/api/users/test\r\n    HTTP/1.1 409\r\n    Access-Control-Allow-Origin: *\r\n    Content-Type: application/json\r\n    Transfer-Encoding: chunked\r\n    Date: Fri, 14 Jul 2023 05:45:19 GMT\r\n    \r\n    {&quot;status&quot;:422,&quot;messages&quot;:[&quot;Email address is invalid: john.doegmail.com&quot;, &quot;Phone number is invalid: &#39;2323&#39;, expecting in format &#39;999-999-9999&#39;&quot;, &quot;Invalid State &#39;xx&#39;. A valid US state is required.&quot;]}\r\n\r\n","title":"Can&#39;t get response body from Spring Boot REST API on Error","body":"<p>The solution was a CORS related problem. Adding <code>Access-Control-Allow-Origin</code> to the header was the solution.</p>\n<p>Here's what you need to do if you want to catch all exceptions globally and send back a meaningful response. Forgive me as I'm new to this, so if there is something I'm missing, please let me know.</p>\n<p>Global exception handler:</p>\n<pre><code>@RestControllerAdvice\npublic class GlobalExceptionHandler {\n    @ExceptionHandler\n    public ResponseEntity&lt;UserResponseException&gt; handleException(Exception ex) {\n        return ResponseException.ResponseEntity(HttpStatus.INTERNAL_SERVER_ERROR, ex.getMessage());\n    }\n    // Add more handlers as needed. \n}\n</code></pre>\n<p>and my response exception class</p>\n<pre><code>@AllArgsConstructor(access = AccessLevel.PRIVATE)\npublic class ResponseException {\n    private int status;\n    private List&lt;String&gt; messages;\n    // add anything else you want to return\n\n    public static ResponseEntity&lt;ResponseException&gt; ResponseEntity(HttpStatus status, List&lt;String&gt; messages) {\n        ResponseException ure = new ResponseException(status.value(), messages);\n        HttpHeaders headers = new HttpHeaders();\n        headers.set(&quot;Access-Control-Allow-Origin&quot;, &quot;*&quot;);\n        return new ResponseEntity&lt;ResponseException&gt;(ure, headers, status);\n    }\n}\n</code></pre>\n<p>Now I can get back the data and it's available in CURL and in WebBrowser and most importantly to my front-end client.</p>\n<pre><code>curl -i http://localhost:8080/api/users/test\nHTTP/1.1 409\nAccess-Control-Allow-Origin: *\nContent-Type: application/json\nTransfer-Encoding: chunked\nDate: Fri, 14 Jul 2023 05:45:19 GMT\n\n{&quot;status&quot;:422,&quot;messages&quot;:[&quot;Email address is invalid: john.doegmail.com&quot;, &quot;Phone number is invalid: '2323', expecting in format '999-999-9999'&quot;, &quot;Invalid State 'xx'. A valid US state is required.&quot;]}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2184114,"reputation":659,"user_id":1932930,"accept_rate":40,"display_name":"tdemay"},"score":0,"creation_date":1689444539,"post_id":76689400,"comment_id":135215779,"body_markdown":"doesn&#39;t that pose a security risk?","body":"doesn&#39;t that pose a security risk?"},{"owner":{"account_id":13170666,"reputation":78679,"user_id":9513184,"display_name":"Unmitigated"},"score":0,"creation_date":1689444569,"post_id":76689400,"comment_id":135215784,"body_markdown":"@tdemay Why would it? It sets the headers for you. Unless you&#39;re referring to the use of `*`, which was just taken from your example.","body":"@tdemay Why would it? It sets the headers for you. Unless you&#39;re referring to the use of <code>*</code>, which was just taken from your example."},{"owner":{"account_id":2184114,"reputation":659,"user_id":1932930,"accept_rate":40,"display_name":"tdemay"},"score":0,"creation_date":1689461575,"post_id":76689400,"comment_id":135217414,"body_markdown":"I don&#39;t think I understand this CORS stuff very well. I assume the @CrossOrigin(&quot;*&quot;) annotation will allow all traffic in, even cross script. But putting it on the response was different.","body":"I don&#39;t think I understand this CORS stuff very well. I assume the @CrossOrigin(&quot;*&quot;) annotation will allow all traffic in, even cross script. But putting it on the response was different."},{"owner":{"account_id":13170666,"reputation":78679,"user_id":9513184,"display_name":"Unmitigated"},"score":0,"creation_date":1689461734,"post_id":76689400,"comment_id":135217422,"body_markdown":"@tdemay You&#39;re also allowing all traffic by setting `Access-Control-Allow-Origin` to `*` instead of a specific origin. `@CrossOrigin` is just a shorter way of setting the response headers on all the handler methods. Why do you think your frontend is able to make the request after setting that header when you didn&#39;t explicitly whitelist only the origin of your frontend?","body":"@tdemay You&#39;re also allowing all traffic by setting <code>Access-Control-Allow-Origin</code> to <code>*</code> instead of a specific origin. <code>@CrossOrigin</code> is just a shorter way of setting the response headers on all the handler methods. Why do you think your frontend is able to make the request after setting that header when you didn&#39;t explicitly whitelist only the origin of your frontend?"},{"owner":{"account_id":2184114,"reputation":659,"user_id":1932930,"accept_rate":40,"display_name":"tdemay"},"score":0,"creation_date":1689477008,"post_id":76689400,"comment_id":135218180,"body_markdown":"it was always able to make the request. With and without it. The problem I had was I could see the results being sent back in fiddler, but google inspect said there was no response data.","body":"it was always able to make the request. With and without it. The problem I had was I could see the results being sent back in fiddler, but google inspect said there was no response data."},{"owner":{"account_id":13170666,"reputation":78679,"user_id":9513184,"display_name":"Unmitigated"},"score":0,"creation_date":1689477352,"post_id":76689400,"comment_id":135218188,"body_markdown":"@tdemay Alright, but there is no difference between setting the CORS headers manually and using `@CrossOrigin`. It is not idiomatic with Spring Boot to set those headers manually, though.","body":"@tdemay Alright, but there is no difference between setting the CORS headers manually and using <code>@CrossOrigin</code>. It is not idiomatic with Spring Boot to set those headers manually, though."}],"tags":[],"owner":{"account_id":13170666,"reputation":78679,"user_id":9513184,"display_name":"Unmitigated"},"comment_count":6,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689350436,"creation_date":1689350436,"answer_id":76689400,"question_id":76689332,"body_markdown":"It is not necessary to set the `Access-Control-Allow-Origin` header manually. The [`@CrossOrigin`](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/bind/annotation/CrossOrigin.html) annotation can be used to configure CORS directly on a controller or any handler method.\r\n\r\n```java\r\n@CrossOrigin(&quot;*&quot;)\r\n@RestControllerAdvice\r\npublic class GlobalExceptionHandler {\r\n    // ...\r\n}\r\n```","title":"Can&#39;t get response body from Spring Boot REST API on Error","body":"<p>It is not necessary to set the <code>Access-Control-Allow-Origin</code> header manually. The <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/bind/annotation/CrossOrigin.html\" rel=\"nofollow noreferrer\"><code>@CrossOrigin</code></a> annotation can be used to configure CORS directly on a controller or any handler method.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@CrossOrigin(&quot;*&quot;)\n@RestControllerAdvice\npublic class GlobalExceptionHandler {\n    // ...\n}\n</code></pre>\n"}],"owner":{"account_id":2184114,"reputation":659,"user_id":1932930,"accept_rate":40,"display_name":"tdemay"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":551,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1689350436,"creation_date":1689349893,"question_id":76689332,"body_markdown":"I spent way too much time on this I thought I would share what I found out. I&#39;m surprised I couldn&#39;t find this information anywhere as it would seem like something ever app must have. \r\n\r\nI expect to be able to send additional data back to the client from my Spring Boot REST API when an error occurs. Something like this:\r\n\r\n    &gt;curl -i GET https://api.twitter.com/1.1/statuses/update.json?include_entities=true\r\n    HTTP/1.1 400 Bad Request\r\n    date: Fri, 14 Jul 2023 15:23:34 GMT\r\n    content-type: application/json; charset=utf-8\r\n    cache-control: no-cache, no-store, max-age=0\r\n    content-length: 62\r\n    \r\n    {&quot;errors&quot;:[{&quot;code&quot;:215,&quot;message&quot;:&quot;Bad Authentication data.&quot;}]}\r\n\r\nI could get this working with curl, but in a browser, the response data was not received. I confirmed this using Google Dev Tools to view the network traffic. And the data was being sent from my REST API.\r\n\r\nI would have expected to find some useful information here at one of these links, but I didn&#39;t.\r\n\r\n[Error Handling for REST with Spring][1]\r\n\r\n[Best Practices for REST API Error Handling][2]\r\n\r\n  [1]: https://www.baeldung.com/exception-handling-for-rest-with-spring\r\n  [2]: https://www.baeldung.com/rest-api-error-handling-best-practices","title":"Can&#39;t get response body from Spring Boot REST API on Error","body":"<p>I spent way too much time on this I thought I would share what I found out. I'm surprised I couldn't find this information anywhere as it would seem like something ever app must have.</p>\n<p>I expect to be able to send additional data back to the client from my Spring Boot REST API when an error occurs. Something like this:</p>\n<pre><code>&gt;curl -i GET https://api.twitter.com/1.1/statuses/update.json?include_entities=true\nHTTP/1.1 400 Bad Request\ndate: Fri, 14 Jul 2023 15:23:34 GMT\ncontent-type: application/json; charset=utf-8\ncache-control: no-cache, no-store, max-age=0\ncontent-length: 62\n\n{&quot;errors&quot;:[{&quot;code&quot;:215,&quot;message&quot;:&quot;Bad Authentication data.&quot;}]}\n</code></pre>\n<p>I could get this working with curl, but in a browser, the response data was not received. I confirmed this using Google Dev Tools to view the network traffic. And the data was being sent from my REST API.</p>\n<p>I would have expected to find some useful information here at one of these links, but I didn't.</p>\n<p><a href=\"https://www.baeldung.com/exception-handling-for-rest-with-spring\" rel=\"nofollow noreferrer\">Error Handling for REST with Spring</a></p>\n<p><a href=\"https://www.baeldung.com/rest-api-error-handling-best-practices\" rel=\"nofollow noreferrer\">Best Practices for REST API Error Handling</a></p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":120605,"reputation":24173,"user_id":313137,"display_name":"Romain Hippeau"},"score":0,"creation_date":1689351222,"post_id":76689380,"comment_id":135206099,"body_markdown":"The runtime needs to be at least as new as the compiler. For the list: https://www.baeldung.com/java-find-class-version - Maybe time to update the runtime jre ?","body":"The runtime needs to be at least as new as the compiler. For the list: <a href=\"https://www.baeldung.com/java-find-class-version\" rel=\"nofollow noreferrer\">baeldung.com/java-find-class-version</a> - Maybe time to update the runtime jre ?"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1689353605,"post_id":76689380,"comment_id":135206631,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."},{"owner":{"account_id":477214,"reputation":5260,"user_id":888580,"display_name":"lane.maxwell"},"score":0,"creation_date":1689362163,"post_id":76689380,"comment_id":135208120,"body_markdown":"In your case, you&#39;re using a Java 16 JVM and trying to run code compiled with Java 17.  Use a JVM that&#39;s at least version 17 or higher to run it with.","body":"In your case, you&#39;re using a Java 16 JVM and trying to run code compiled with Java 17.  Use a JVM that&#39;s at least version 17 or higher to run it with."}],"owner":{"account_id":29018131,"reputation":21,"user_id":22228142,"display_name":"Akarsh Gaud"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":3566,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1689350306,"creation_date":1689350306,"question_id":76689380,"body_markdown":"I know there is lots of answer about this problem but in case what we do in  my problem.\r\nI have try changes in java build path and  but not working.\r\nException in thread &quot;main&quot; java.lang.UnsupportedClassVersionError: org/springframework/boot/SpringApplication has been compiled by a more recent version of the Java Runtime (class file version 61.0), this version of the Java Runtime only recognizes class file versions up to 60.0\r\n\t","title":"Java Runtime (class file version 61.0), this version of the Java Runtime only recognizes class file versions up to 60.0","body":"<p>I know there is lots of answer about this problem but in case what we do in  my problem.\nI have try changes in java build path and  but not working.\nException in thread &quot;main&quot; java.lang.UnsupportedClassVersionError: org/springframework/boot/SpringApplication has been compiled by a more recent version of the Java Runtime (class file version 61.0), this version of the Java Runtime only recognizes class file versions up to 60.0</p>\n"},{"tags":["java","mysql","spring-boot","backend"],"comments":[{"owner":{"account_id":24308075,"reputation":11,"user_id":18250525,"display_name":"Soumya priyadarshi Das"},"score":0,"creation_date":1689336146,"post_id":76687475,"comment_id":135202533,"body_markdown":"If any more information required, please give a comment here","body":"If any more information required, please give a comment here"},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1689336846,"post_id":76687475,"comment_id":135202666,"body_markdown":"Do you have any entities? Can you share logfiles?","body":"Do you have any entities? Can you share logfiles?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689337704,"post_id":76687475,"comment_id":135202903,"body_markdown":"Why *would* it create a table, did you save entities? btw, it&#39;s a bad plan to use an account called &#39;root&#39; in MySql","body":"Why <i>would</i> it create a table, did you save entities? btw, it&#39;s a bad plan to use an account called &#39;root&#39; in MySql"},{"owner":{"account_id":9531412,"reputation":2010,"user_id":7082956,"display_name":"Valerij Dobler"},"score":0,"creation_date":1689340044,"post_id":76687475,"comment_id":135203402,"body_markdown":"Well if you want to create the tables use `spring.jpa.hibernate.ddl-auto=create`","body":"Well if you want to create the tables use <code>spring.jpa.hibernate.ddl-auto=create</code>"},{"owner":{"account_id":24308075,"reputation":11,"user_id":18250525,"display_name":"Soumya priyadarshi Das"},"score":0,"creation_date":1689341285,"post_id":76687475,"comment_id":135203712,"body_markdown":"@g00se-yes. but I have just started to learn to learn spring boot few days back. It is for practice purpose only","body":"@g00se-yes. but I have just started to learn to learn spring boot few days back. It is for practice purpose only"},{"owner":{"account_id":24308075,"reputation":11,"user_id":18250525,"display_name":"Soumya priyadarshi Das"},"score":0,"creation_date":1689341423,"post_id":76687475,"comment_id":135203757,"body_markdown":"@Jens Added a pic. Please check","body":"@Jens Added a pic. Please check"},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1689341461,"post_id":76687475,"comment_id":135203771,"body_markdown":"No picture please. Text only","body":"No picture please. Text only"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689342239,"post_id":76687475,"comment_id":135203959,"body_markdown":"[Please never post images of text](https://meta.stackoverflow.com/questions/285551/why-should-i-not-upload-images-of-code-data-errors/285557#285557). They are not searchable, we cannot copy-paste... Always copy-paste the text and format it properly.","body":"<a href=\"https://meta.stackoverflow.com/questions/285551/why-should-i-not-upload-images-of-code-data-errors/285557#285557\">Please never post images of text</a>. They are not searchable, we cannot copy-paste... Always copy-paste the text and format it properly."},{"owner":{"account_id":24308075,"reputation":11,"user_id":18250525,"display_name":"Soumya priyadarshi Das"},"score":0,"creation_date":1689349874,"post_id":76687475,"comment_id":135205818,"body_markdown":"@g00se added code. Please check","body":"@g00se added code. Please check"},{"owner":{"account_id":24308075,"reputation":11,"user_id":18250525,"display_name":"Soumya priyadarshi Das"},"score":0,"creation_date":1689349888,"post_id":76687475,"comment_id":135205820,"body_markdown":"@Jens added code Please check","body":"@Jens added code Please check"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689351980,"post_id":76687475,"comment_id":135206254,"body_markdown":"That doesn&#39;t really tell us much. You&#39;ve defined an entity and wired up persistence. But we don&#39;t see you doing anything with entities","body":"That doesn&#39;t really tell us much. You&#39;ve defined an entity and wired up persistence. But we don&#39;t see you doing anything with entities"},{"owner":{"account_id":24308075,"reputation":11,"user_id":18250525,"display_name":"Soumya priyadarshi Das"},"score":0,"creation_date":1689352905,"post_id":76687475,"comment_id":135206466,"body_markdown":"@g00se first thing after running the application, it should create a table in the data base with declared columns. But it is not creating any table","body":"@g00se first thing after running the application, it should create a table in the data base with declared columns. But it is not creating any table"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689353161,"post_id":76687475,"comment_id":135206520,"body_markdown":"Save an entity and see what happens","body":"Save an entity and see what happens"},{"owner":{"account_id":24308075,"reputation":11,"user_id":18250525,"display_name":"Soumya priyadarshi Das"},"score":0,"creation_date":1689354016,"post_id":76687475,"comment_id":135206713,"body_markdown":"@g00se still no table","body":"@g00se still no table"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689354434,"post_id":76687475,"comment_id":135206790,"body_markdown":"Show the code you&#39;ve just written please and also the server output where you try to save","body":"Show the code you&#39;ve just written please and also the server output where you try to save"}],"owner":{"account_id":24308075,"reputation":11,"user_id":18250525,"display_name":"Soumya priyadarshi Das"},"comment_count":15,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":61,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1689349837,"creation_date":1689336113,"question_id":76687475,"body_markdown":"[enter image description here][1]I have started a new spring bot project. spring boot is running without error, but table is not created in database.\r\n\r\nI have added these lines in application.properties.\r\n\r\n    spring.datasource.url=jdbc:mysql://localhost:3306/ems?useSSL=false\r\n    spring.datasource.username=root\r\n    spring.datasource.password=password\r\n    \r\n    spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL5InnoDBDialect\r\n    \r\n    spring.jpa.hibernate.ddl-auto=update\r\n\r\n    package com.employee.management.system.model;\r\n    \r\n    import lombok.AllArgsConstructor;\r\n    import lombok.Getter;\r\n    import lombok.NoArgsConstructor;\r\n    import lombok.Setter;\r\n    \r\n    import javax.persistence.*;\r\n    \r\n    @Getter\r\n    @Setter\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    @Entity\r\n    @Table(name=&quot;employee&quot;)\r\n    \r\n    public class Employee {\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        private String id;\r\n        @Column(name=&quot;first_name&quot;)\r\n        private String firstName;\r\n        @Column(name=&quot;last_name&quot;)\r\n        private String lastName;\r\n        @Column(name=&quot;email_id&quot;)\r\n        private String emailId;\r\n    }\r\n    \r\n        \r\n\r\n","title":"Spring boot executes without error, but no table created in MySQL database","body":"<p>[enter image description here][1]I have started a new spring bot project. spring boot is running without error, but table is not created in database.</p>\n<p>I have added these lines in application.properties.</p>\n<pre><code>spring.datasource.url=jdbc:mysql://localhost:3306/ems?useSSL=false\nspring.datasource.username=root\nspring.datasource.password=password\n\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL5InnoDBDialect\n\nspring.jpa.hibernate.ddl-auto=update\n\npackage com.employee.management.system.model;\n\nimport lombok.AllArgsConstructor;\nimport lombok.Getter;\nimport lombok.NoArgsConstructor;\nimport lombok.Setter;\n\nimport javax.persistence.*;\n\n@Getter\n@Setter\n@NoArgsConstructor\n@AllArgsConstructor\n@Entity\n@Table(name=&quot;employee&quot;)\n\npublic class Employee {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private String id;\n    @Column(name=&quot;first_name&quot;)\n    private String firstName;\n    @Column(name=&quot;last_name&quot;)\n    private String lastName;\n    @Column(name=&quot;email_id&quot;)\n    private String emailId;\n}\n\n    \n</code></pre>\n"},{"tags":["java","postgresql","spring-boot","docker","docker-compose"],"comments":[{"owner":{"account_id":5591028,"reputation":502,"user_id":4430246,"display_name":"Rob"},"score":0,"creation_date":1689337295,"post_id":76686711,"comment_id":135202780,"body_markdown":"Does this answer your question? [Docker Compose wait for container X before starting Y](https://stackoverflow.com/questions/31746182/docker-compose-wait-for-container-x-before-starting-y)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/31746182/docker-compose-wait-for-container-x-before-starting-y\">Docker Compose wait for container X before starting Y</a>"}],"answers":[{"tags":[],"owner":{"account_id":19206274,"reputation":107,"user_id":14033074,"display_name":"Sampeteq"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689349441,"creation_date":1689349441,"answer_id":76689290,"question_id":76686711,"body_markdown":"I solved this. Only api image has to be on Docker Hub. It can be run via docer-compose.yaml file. Download it from Github and run in console: docker-compose up -d","title":"Using pulled Docker image - Postgres error (Spring Boot, Postgres)","body":"<p>I solved this. Only api image has to be on Docker Hub. It can be run via docer-compose.yaml file. Download it from Github and run in console: docker-compose up -d</p>\n"}],"owner":{"account_id":19206274,"reputation":107,"user_id":14033074,"display_name":"Sampeteq"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":88,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689349441,"creation_date":1689329420,"question_id":76686711,"body_markdown":"I pushed simple Spring Boot web app with Postgres on Docker Hub.\r\n[![enter image description here][1]][1] \r\n\r\n\r\nBut when i pulled it and try to run it in Docker Desktop i got: org.postgresql.util.PSQLException: The connection attempt failed\r\n\r\n[![enter image description here][2]][2]\r\n\r\nDockerfile:\r\n\r\n    FROM openjdk:17\r\n    VOLUME /tmp\r\n    EXPOSE 8080\r\n    COPY target/docker-compose-test-0.0.1-SNAPSHOT.jar test.jar\r\n    ENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;/test.jar&quot;]\r\n\r\nDocker compose:\r\n\r\n    services:\r\n    psql-db:\r\n    image: postgres\r\n    container_name: persons-db\r\n    restart: always\r\n    environment:\r\n      - POSTGRES_USER=postgres\r\n      - POSTGRES_PASSWORD=12345\r\n      - POSTGRES_DB=persons\r\n      - POSTGRES_HOST_AUTH_METHOD=trust\r\n    ports:\r\n      - &#39;5432:5432&#39;\r\n\r\n    api:\r\n     container_name: persons-api\r\n     build:\r\n      context: .\r\n      dockerfile: Dockerfile\r\n     ports:\r\n      - &#39;8080:8080&#39;\r\n     environment:\r\n      - SPRING_DATASOURCE_URL=jdbc:postgresql://psql-db:5432/persons\r\n      - SPRING_DATASOURCE_USERNAME=postgres\r\n      - SPRING_DATASOURCE_PASSWORD=12345\r\n      - SPRING_JPA_HIBERNATE_DDL_AUTO=create\r\n     depends_on:\r\n      - psql-db\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/BoOpl.png\r\n  [2]: https://i.stack.imgur.com/xjE2M.png","title":"Using pulled Docker image - Postgres error (Spring Boot, Postgres)","body":"<p>I pushed simple Spring Boot web app with Postgres on Docker Hub.\n<a href=\"https://i.stack.imgur.com/BoOpl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BoOpl.png\" alt=\"enter image description here\" /></a></p>\n<p>But when i pulled it and try to run it in Docker Desktop i got: org.postgresql.util.PSQLException: The connection attempt failed</p>\n<p><a href=\"https://i.stack.imgur.com/xjE2M.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xjE2M.png\" alt=\"enter image description here\" /></a></p>\n<p>Dockerfile:</p>\n<pre><code>FROM openjdk:17\nVOLUME /tmp\nEXPOSE 8080\nCOPY target/docker-compose-test-0.0.1-SNAPSHOT.jar test.jar\nENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;/test.jar&quot;]\n</code></pre>\n<p>Docker compose:</p>\n<pre><code>services:\npsql-db:\nimage: postgres\ncontainer_name: persons-db\nrestart: always\nenvironment:\n  - POSTGRES_USER=postgres\n  - POSTGRES_PASSWORD=12345\n  - POSTGRES_DB=persons\n  - POSTGRES_HOST_AUTH_METHOD=trust\nports:\n  - '5432:5432'\n\napi:\n container_name: persons-api\n build:\n  context: .\n  dockerfile: Dockerfile\n ports:\n  - '8080:8080'\n environment:\n  - SPRING_DATASOURCE_URL=jdbc:postgresql://psql-db:5432/persons\n  - SPRING_DATASOURCE_USERNAME=postgres\n  - SPRING_DATASOURCE_PASSWORD=12345\n  - SPRING_JPA_HIBERNATE_DDL_AUTO=create\n depends_on:\n  - psql-db\n</code></pre>\n"},{"tags":["java","generics"],"comments":[{"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"score":0,"creation_date":1689371907,"post_id":76688465,"comment_id":135209571,"body_markdown":"Does this answer your question? [Java Generics PECS , add capture ? super cannot be applied to java.util.list](https://stackoverflow.com/questions/75667328/java-generics-pecs-add-capture-super-cannot-be-applied-to-java-util-list)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/75667328/java-generics-pecs-add-capture-super-cannot-be-applied-to-java-util-list\">Java Generics PECS , add capture ? super cannot be applied to java.util.list</a>"},{"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"score":0,"creation_date":1689372216,"post_id":76688465,"comment_id":135209604,"body_markdown":"[See this answer from rzwitserloot for a terrific explanation of your problem](https://stackoverflow.com/a/75667524/2985643). It is one of the best written answers I have seen on SO on any subject.","body":"<a href=\"https://stackoverflow.com/a/75667524/2985643\">See this answer from rzwitserloot for a terrific explanation of your problem</a>. It is one of the best written answers I have seen on SO on any subject."}],"answers":[{"tags":[],"owner":{"account_id":13170666,"reputation":78679,"user_id":9513184,"display_name":"Unmitigated"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1689344629,"creation_date":1689344629,"answer_id":76688606,"question_id":76688465,"body_markdown":"The bounded wildcard `? super Number` represents some type that is a supertype of `Number`. However, it&#39;s unknown what specific type that is, so two different wildcards of the same bounds could refer to different types.\r\n\r\nFor instance, `numList` could be a `List&lt;Number&gt;` and `l` could be a `List&lt;Object&gt;` (both of which are valid because `Object` and `Number` satisfy the wildcard). In this case, it is clear that you cannot add arbitrary `Object`s to a `List` of `Number`s.","title":"Java Generics: collection with same lower bound cannot be added to another collection with the same lower bound","body":"<p>The bounded wildcard <code>? super Number</code> represents some type that is a supertype of <code>Number</code>. However, it's unknown what specific type that is, so two different wildcards of the same bounds could refer to different types.</p>\n<p>For instance, <code>numList</code> could be a <code>List&lt;Number&gt;</code> and <code>l</code> could be a <code>List&lt;Object&gt;</code> (both of which are valid because <code>Object</code> and <code>Number</code> satisfy the wildcard). In this case, it is clear that you cannot add arbitrary <code>Object</code>s to a <code>List</code> of <code>Number</code>s.</p>\n"}],"owner":{"account_id":3739057,"reputation":3667,"user_id":3109248,"display_name":"Khanna111"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76688606,"answer_count":1,"score":0,"last_activity_date":1689348932,"creation_date":1689343650,"question_id":76688465,"body_markdown":"Not able to understand why this is disallowed. \r\n\r\n    List&lt;? super Number&gt; numList = Arrays.asList(1, 2, 3.0, &quot;hello&quot;);  \r\n    List&lt;? super Number&gt; l = new ArrayList&lt;&gt;();\r\n    l.add(1);\r\n    numList.addAll(l); // &lt;----- Error Here\r\n\r\n\r\nThe Error Description:\r\n\r\n    &#39;addAll(java.util.Collection&lt;? extends capture&lt;? super java.lang.Number&gt;&gt;)&#39; in &#39;java.util.List&#39; cannot be applied to &#39;(java.util.List&lt;capture&lt;? super java.lang.Number&gt;&gt;)&#39;","title":"Java Generics: collection with same lower bound cannot be added to another collection with the same lower bound","body":"<p>Not able to understand why this is disallowed.</p>\n<pre><code>List&lt;? super Number&gt; numList = Arrays.asList(1, 2, 3.0, &quot;hello&quot;);  \nList&lt;? super Number&gt; l = new ArrayList&lt;&gt;();\nl.add(1);\nnumList.addAll(l); // &lt;----- Error Here\n</code></pre>\n<p>The Error Description:</p>\n<pre><code>'addAll(java.util.Collection&lt;? extends capture&lt;? super java.lang.Number&gt;&gt;)' in 'java.util.List' cannot be applied to '(java.util.List&lt;capture&lt;? super java.lang.Number&gt;&gt;)'\n</code></pre>\n"},{"tags":["java","spring","spring-mvc","spring-security"],"answers":[{"tags":[],"owner":{"account_id":21488921,"reputation":4730,"user_id":15835039,"display_name":"Steve Riesenberg"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689348810,"creation_date":1689348810,"answer_id":76689222,"question_id":76678336,"body_markdown":"The error you receive comes from calling `authenticationManagerBuilder.build()` yourself. You are accessing an internal framework instance of the builder and calling `build()` yourself, while Spring Security also builds the authentication manager internally.\r\n\r\nGenerally, any `AuthenticationProvider` that is a `@Bean` (or `@Component`, etc.) will be autowired by Spring Security. You will want to restructure your application so you can conditionally apply the desired `AuthenticationProvider` to the relevant filter chain (instead of publishing as beans). The entire `getAuthenticationManager` method should be removed.","title":"AlreadyBuiltException while configuring multiple HttpSecurity instances with Spring Security","body":"<p>The error you receive comes from calling <code>authenticationManagerBuilder.build()</code> yourself. You are accessing an internal framework instance of the builder and calling <code>build()</code> yourself, while Spring Security also builds the authentication manager internally.</p>\n<p>Generally, any <code>AuthenticationProvider</code> that is a <code>@Bean</code> (or <code>@Component</code>, etc.) will be autowired by Spring Security. You will want to restructure your application so you can conditionally apply the desired <code>AuthenticationProvider</code> to the relevant filter chain (instead of publishing as beans). The entire <code>getAuthenticationManager</code> method should be removed.</p>\n"}],"owner":{"account_id":1591018,"reputation":1555,"user_id":1474335,"accept_rate":77,"display_name":"diminuta"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1689348810,"creation_date":1689243879,"question_id":76678336,"body_markdown":"I&#39;m using Spring v.5.3.28 and Spring Security v.5.8.4, and I&#39;m trying to configure Spring Security without extending WebSecurityConfigurerAdapter as it has been deprecated.\r\n\r\nMy Spring Security configuration looks like this:\r\n\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    @EnableMethodSecurity(prePostEnabled = true)\r\n    public class SecurityConfiguration {\r\n    \r\n        private static final String SIGNIN = &quot;/signin&quot;;\r\n    \r\n        @Autowired\r\n        ApiCustomAuthenticationProviderImpl apiCustomAuthenticationProvider;\r\n    \r\n        @Autowired\r\n        CustomAuthenticationProviderImpl customAuthenticationProvider;\r\n    \r\n        @Autowired\r\n        LdapAuthenticationProviderImpl ldapAuthenticationProvider;\r\n    \r\n        @Autowired\r\n        SautenticaAuthenticationProviderImpl sautenticaAuthenticationProvider;\r\n    \r\n        @Autowired\r\n        ConfigurationService configurationService;\r\n    \r\n        @Bean\r\n        protected UserDetailsService userDetailsService () {\r\n            return new AutenticacionServiceImpl();\r\n        }\r\n    \r\n        @Bean\r\n        public EvaluationContextExtension securityExtension () {\r\n            return new SecurityEvaluationContextExtension();\r\n        }\r\n    \r\n        @Bean\r\n        public AuditorAware&lt;Usuario&gt; auditorAware () {\r\n            return new SpringSecurityAuditorAware();\r\n        }\r\n    \r\n        public AuthenticationManager getAuthenticationManager (HttpSecurity http) throws Exception {\r\n            AuthenticationManagerBuilder authenticationManagerBuilder = http.getSharedObject(AuthenticationManagerBuilder.class);\r\n    \r\n            final String authMode = configurationService.findByCode(Constants.CT_AUTH_MODE);\r\n    \r\n            if (StringUtils.isNotEmpty(authMode) &amp;&amp; Constants.CT_LDAP.equalsIgnoreCase(authMode)) {\r\n                authenticationManagerBuilder.authenticationProvider(ldapAuthenticationProvider);\r\n            } else if (StringUtils.isNotEmpty(authMode) &amp;&amp; Constants.CT_SAUTENTICA.equalsIgnoreCase(authMode)) {\r\n                authenticationManagerBuilder.authenticationProvider(sautenticaAuthenticationProvider);\r\n            } else {\r\n                authenticationManagerBuilder.authenticationProvider(customAuthenticationProvider);\r\n            }\r\n    \r\n            authenticationManagerBuilder.eraseCredentials(false);\r\n    \r\n            return authenticationManagerBuilder.build();\r\n        }\r\n    \r\n        @Bean\r\n        @Order(1)\r\n        public SecurityFilterChain apiSecurityFilterChain (HttpSecurity http) throws Exception {\r\n            try {\r\n                http.securityMatcher(&quot;/api-ws/**&quot;);\r\n                http.sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS);\r\n                http.authorizeHttpRequests().requestMatchers(&quot;/api-ws/**&quot;).authenticated().and().httpBasic().and().csrf().disable()\r\n                        .addFilterAfter(new ApiCustomBasicAuthenticationFilter(), BasicAuthenticationFilter.class);\r\n                http.authenticationProvider(apiCustomAuthenticationProvider);\r\n    \r\n            } catch (final Exception e) {\r\n                throw new SecurityException(e);\r\n            }\r\n            return http.build();\r\n        }\r\n    \r\n        @Bean\r\n        @Order(2)\r\n        public SecurityFilterChain wsSecurityFilterChain (HttpSecurity http) throws Exception {\r\n            try {\r\n                http.securityMatcher(&quot;/ws/**&quot;);\r\n                http.authorizeHttpRequests().requestMatchers(&quot;/ws/patient/**&quot;, &quot;/meet-ws/case/**&quot;).authenticated();\r\n                http.httpBasic().and().addFilterAt(new CustomBasicAuthenticationFilter(getAuthenticationManager(http)), BasicAuthenticationFilter.class);\r\n                http.headers().frameOptions().disable();\r\n            } catch (final Exception e) {\r\n                throw new SecurityException(e);\r\n            }\r\n            return http.build();\r\n        }\r\n    \r\n        @Bean\r\n        public WebSecurityCustomizer webSecurityCustomizer () {\r\n            return web -&gt; web.ignoring().requestMatchers(&quot;/ws/login**&quot;, &quot;/ws/new/xml**&quot;);\r\n        }\r\n    \r\n        @Bean\r\n        public SecurityFilterChain securityFilterChain (HttpSecurity http) throws Exception {\r\n    \r\n            try {\r\n                http.authorizeHttpRequests().requestMatchers(&quot;/favicon.ico&quot;, &quot;/resources/**&quot;, &quot;/health**&quot;, &quot;/signin**&quot;, &quot;/authenticate**&quot;).permitAll().anyRequest().authenticated()\r\n                        .and().authenticationManager(getAuthenticationManager(http)).formLogin().loginPage(SIGNIN).permitAll().loginProcessingUrl(&quot;/authenticate&quot;).permitAll()\r\n                        .failureUrl(&quot;/signin?error=1&quot;).successHandler(new CustomAuthenticationSuccessHandler()).and().sessionManagement().invalidSessionUrl(SIGNIN).and()\r\n                        .exceptionHandling().accessDeniedHandler(new AccessDeniedHandler()).and().headers().frameOptions().disable();\r\n    \r\n                http.logout().logoutUrl(&quot;/logout&quot;).logoutSuccessUrl(SIGNIN).permitAll();\r\n            \r\n            } catch (final Exception e) {\r\n                throw new SecurityException(e);\r\n            }\r\n            return http.build();\r\n        }\r\n    \r\n    }\r\n\r\nWhen I build the project it builds successfully but when I start the server it throws the following exception:\r\n\r\n        org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration&#39;: Unsatisfied dependency expressed through method &#39;setFilterChains&#39; parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;wsSecurityFilterChain&#39; defined in es.mycompany.myapp.SecurityConfiguration: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.security.web.SecurityFilterChain]: Factory method &#39;wsSecurityFilterChain&#39; threw exception; nested exception is org.springframework.security.config.annotation.AlreadyBuiltException: This object has already been built\r\n        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.resolveMethodArguments(AutowiredAnnotationBeanPostProcessor.java:768)\r\n        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:720)\r\n        at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:119)\r\n        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:399)\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1431)\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:619)\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\r\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\r\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:955)\r\n        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:920)\r\n        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583)\r\n        at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:399)\r\n        at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:278)\r\n        at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:103)\r\n        at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4766)\r\n        at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5230)\r\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n        at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1396)\r\n        at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1386)\r\n        at java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n        at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\r\n        at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:134)\r\n        at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:919)\r\n        at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:835)\r\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n        at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1396)\r\n        at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1386)\r\n        at java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n        at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\r\n        at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:134)\r\n        at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:919)\r\n        at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:263)\r\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n        at org.apache.catalina.core.StandardService.startInternal(StandardService.java:432)\r\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n        at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:927)\r\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n        at org.apache.catalina.startup.Catalina.start(Catalina.java:772)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke(Method.java:498)\r\n        at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:345)\r\n        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:476)\r\n    Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;wsSecurityFilterChain&#39; defined in es.mycompany.myapp.SecurityConfiguration: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.security.web.SecurityFilterChain]: Factory method &#39;wsSecurityFilterChain&#39; threw exception; nested exception is org.springframework.security.config.annotation.AlreadyBuiltException: This object has already been built\r\n        at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:658)\r\n        at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:638)\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352)\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195)\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582)\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\r\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\r\n        at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276)\r\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.addCandidateEntry(DefaultListableBeanFactory.java:1609)\r\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:1573)\r\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveMultipleBeans(DefaultListableBeanFactory.java:1462)\r\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1349)\r\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1311)\r\n        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.resolveMethodArguments(AutowiredAnnotationBeanPostProcessor.java:760)\r\n        ... 46 more\r\n    Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.security.web.SecurityFilterChain]: Factory method &#39;wsSecurityFilterChain&#39; threw exception; nested exception is org.springframework.security.config.annotation.AlreadyBuiltException: This object has already been built\r\n        at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185)\r\n        at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653)\r\n        ... 62 more\r\n    Caused by: org.springframework.security.config.annotation.AlreadyBuiltException: This object has already been built\r\n        at org.springframework.security.config.annotation.AbstractSecurityBuilder.build(AbstractSecurityBuilder.java:41)\r\n        at org.springframework.security.config.annotation.web.builders.HttpSecurity.beforeConfigure(HttpSecurity.java:3225)\r\n        at org.springframework.security.config.annotation.AbstractConfiguredSecurityBuilder.doBuild(AbstractConfiguredSecurityBuilder.java:308)\r\n        at org.springframework.security.config.annotation.AbstractSecurityBuilder.build(AbstractSecurityBuilder.java:38)\r\n        at es.mycompany.myapp.SecurityConfiguration.wsSecurityFilterChain(SecurityConfiguration.java:152)\r\n        at es.mycompany.myapp.SecurityConfiguration$$EnhancerBySpringCGLIB$$aaa83f30.CGLIB$wsSecurityFilterChain$7(&lt;generated&gt;)\r\n        at es.mycompany.myapp.SecurityConfiguration$$EnhancerBySpringCGLIB$$aaa83f30$$FastClassBySpringCGLIB$$ed15352b.invoke(&lt;generated&gt;)\r\n        at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:244)\r\n        at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:331)\r\n        at es.mycompany.myapp.SecurityConfiguration$$EnhancerBySpringCGLIB$$aaa83f30.wsSecurityFilterChain(&lt;generated&gt;)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke(Method.java:498)\r\n        at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154)\r\n        ... 63 more\r\n\r\nThe only thing that I can think of is http.build(); being called twice, but they do the exact same thing in the documentation: https://docs.spring.io/spring-security/reference/servlet/configuration/java.html#_multiple_httpsecurity_instances","title":"AlreadyBuiltException while configuring multiple HttpSecurity instances with Spring Security","body":"<p>I'm using Spring v.5.3.28 and Spring Security v.5.8.4, and I'm trying to configure Spring Security without extending WebSecurityConfigurerAdapter as it has been deprecated.</p>\n<p>My Spring Security configuration looks like this:</p>\n<pre><code>@Configuration\n@EnableWebSecurity\n@EnableMethodSecurity(prePostEnabled = true)\npublic class SecurityConfiguration {\n\n    private static final String SIGNIN = &quot;/signin&quot;;\n\n    @Autowired\n    ApiCustomAuthenticationProviderImpl apiCustomAuthenticationProvider;\n\n    @Autowired\n    CustomAuthenticationProviderImpl customAuthenticationProvider;\n\n    @Autowired\n    LdapAuthenticationProviderImpl ldapAuthenticationProvider;\n\n    @Autowired\n    SautenticaAuthenticationProviderImpl sautenticaAuthenticationProvider;\n\n    @Autowired\n    ConfigurationService configurationService;\n\n    @Bean\n    protected UserDetailsService userDetailsService () {\n        return new AutenticacionServiceImpl();\n    }\n\n    @Bean\n    public EvaluationContextExtension securityExtension () {\n        return new SecurityEvaluationContextExtension();\n    }\n\n    @Bean\n    public AuditorAware&lt;Usuario&gt; auditorAware () {\n        return new SpringSecurityAuditorAware();\n    }\n\n    public AuthenticationManager getAuthenticationManager (HttpSecurity http) throws Exception {\n        AuthenticationManagerBuilder authenticationManagerBuilder = http.getSharedObject(AuthenticationManagerBuilder.class);\n\n        final String authMode = configurationService.findByCode(Constants.CT_AUTH_MODE);\n\n        if (StringUtils.isNotEmpty(authMode) &amp;&amp; Constants.CT_LDAP.equalsIgnoreCase(authMode)) {\n            authenticationManagerBuilder.authenticationProvider(ldapAuthenticationProvider);\n        } else if (StringUtils.isNotEmpty(authMode) &amp;&amp; Constants.CT_SAUTENTICA.equalsIgnoreCase(authMode)) {\n            authenticationManagerBuilder.authenticationProvider(sautenticaAuthenticationProvider);\n        } else {\n            authenticationManagerBuilder.authenticationProvider(customAuthenticationProvider);\n        }\n\n        authenticationManagerBuilder.eraseCredentials(false);\n\n        return authenticationManagerBuilder.build();\n    }\n\n    @Bean\n    @Order(1)\n    public SecurityFilterChain apiSecurityFilterChain (HttpSecurity http) throws Exception {\n        try {\n            http.securityMatcher(&quot;/api-ws/**&quot;);\n            http.sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS);\n            http.authorizeHttpRequests().requestMatchers(&quot;/api-ws/**&quot;).authenticated().and().httpBasic().and().csrf().disable()\n                    .addFilterAfter(new ApiCustomBasicAuthenticationFilter(), BasicAuthenticationFilter.class);\n            http.authenticationProvider(apiCustomAuthenticationProvider);\n\n        } catch (final Exception e) {\n            throw new SecurityException(e);\n        }\n        return http.build();\n    }\n\n    @Bean\n    @Order(2)\n    public SecurityFilterChain wsSecurityFilterChain (HttpSecurity http) throws Exception {\n        try {\n            http.securityMatcher(&quot;/ws/**&quot;);\n            http.authorizeHttpRequests().requestMatchers(&quot;/ws/patient/**&quot;, &quot;/meet-ws/case/**&quot;).authenticated();\n            http.httpBasic().and().addFilterAt(new CustomBasicAuthenticationFilter(getAuthenticationManager(http)), BasicAuthenticationFilter.class);\n            http.headers().frameOptions().disable();\n        } catch (final Exception e) {\n            throw new SecurityException(e);\n        }\n        return http.build();\n    }\n\n    @Bean\n    public WebSecurityCustomizer webSecurityCustomizer () {\n        return web -&gt; web.ignoring().requestMatchers(&quot;/ws/login**&quot;, &quot;/ws/new/xml**&quot;);\n    }\n\n    @Bean\n    public SecurityFilterChain securityFilterChain (HttpSecurity http) throws Exception {\n\n        try {\n            http.authorizeHttpRequests().requestMatchers(&quot;/favicon.ico&quot;, &quot;/resources/**&quot;, &quot;/health**&quot;, &quot;/signin**&quot;, &quot;/authenticate**&quot;).permitAll().anyRequest().authenticated()\n                    .and().authenticationManager(getAuthenticationManager(http)).formLogin().loginPage(SIGNIN).permitAll().loginProcessingUrl(&quot;/authenticate&quot;).permitAll()\n                    .failureUrl(&quot;/signin?error=1&quot;).successHandler(new CustomAuthenticationSuccessHandler()).and().sessionManagement().invalidSessionUrl(SIGNIN).and()\n                    .exceptionHandling().accessDeniedHandler(new AccessDeniedHandler()).and().headers().frameOptions().disable();\n\n            http.logout().logoutUrl(&quot;/logout&quot;).logoutSuccessUrl(SIGNIN).permitAll();\n        \n        } catch (final Exception e) {\n            throw new SecurityException(e);\n        }\n        return http.build();\n    }\n\n}\n</code></pre>\n<p>When I build the project it builds successfully but when I start the server it throws the following exception:</p>\n<pre><code>    org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration': Unsatisfied dependency expressed through method 'setFilterChains' parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'wsSecurityFilterChain' defined in es.mycompany.myapp.SecurityConfiguration: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.security.web.SecurityFilterChain]: Factory method 'wsSecurityFilterChain' threw exception; nested exception is org.springframework.security.config.annotation.AlreadyBuiltException: This object has already been built\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.resolveMethodArguments(AutowiredAnnotationBeanPostProcessor.java:768)\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:720)\n    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:119)\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:399)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1431)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:619)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:955)\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:920)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583)\n    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:399)\n    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:278)\n    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:103)\n    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4766)\n    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5230)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1396)\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1386)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n    at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\n    at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:134)\n    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:919)\n    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:835)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1396)\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1386)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n    at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\n    at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:134)\n    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:919)\n    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:263)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:432)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:927)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.startup.Catalina.start(Catalina.java:772)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:345)\n    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:476)\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'wsSecurityFilterChain' defined in es.mycompany.myapp.SecurityConfiguration: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.security.web.SecurityFilterChain]: Factory method 'wsSecurityFilterChain' threw exception; nested exception is org.springframework.security.config.annotation.AlreadyBuiltException: This object has already been built\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:658)\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:638)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\n    at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.addCandidateEntry(DefaultListableBeanFactory.java:1609)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:1573)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveMultipleBeans(DefaultListableBeanFactory.java:1462)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1349)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1311)\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.resolveMethodArguments(AutowiredAnnotationBeanPostProcessor.java:760)\n    ... 46 more\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.security.web.SecurityFilterChain]: Factory method 'wsSecurityFilterChain' threw exception; nested exception is org.springframework.security.config.annotation.AlreadyBuiltException: This object has already been built\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185)\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653)\n    ... 62 more\nCaused by: org.springframework.security.config.annotation.AlreadyBuiltException: This object has already been built\n    at org.springframework.security.config.annotation.AbstractSecurityBuilder.build(AbstractSecurityBuilder.java:41)\n    at org.springframework.security.config.annotation.web.builders.HttpSecurity.beforeConfigure(HttpSecurity.java:3225)\n    at org.springframework.security.config.annotation.AbstractConfiguredSecurityBuilder.doBuild(AbstractConfiguredSecurityBuilder.java:308)\n    at org.springframework.security.config.annotation.AbstractSecurityBuilder.build(AbstractSecurityBuilder.java:38)\n    at es.mycompany.myapp.SecurityConfiguration.wsSecurityFilterChain(SecurityConfiguration.java:152)\n    at es.mycompany.myapp.SecurityConfiguration$$EnhancerBySpringCGLIB$$aaa83f30.CGLIB$wsSecurityFilterChain$7(&lt;generated&gt;)\n    at es.mycompany.myapp.SecurityConfiguration$$EnhancerBySpringCGLIB$$aaa83f30$$FastClassBySpringCGLIB$$ed15352b.invoke(&lt;generated&gt;)\n    at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:244)\n    at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:331)\n    at es.mycompany.myapp.SecurityConfiguration$$EnhancerBySpringCGLIB$$aaa83f30.wsSecurityFilterChain(&lt;generated&gt;)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154)\n    ... 63 more\n</code></pre>\n<p>The only thing that I can think of is http.build(); being called twice, but they do the exact same thing in the documentation: <a href=\"https://docs.spring.io/spring-security/reference/servlet/configuration/java.html#_multiple_httpsecurity_instances\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-security/reference/servlet/configuration/java.html#_multiple_httpsecurity_instances</a></p>\n"},{"tags":["java","android-studio","admob"],"answers":[{"tags":[],"owner":{"account_id":22471780,"reputation":234,"user_id":16672126,"display_name":"ZeroZero1"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660563434,"creation_date":1660563434,"answer_id":73360466,"question_id":73217889,"body_markdown":"Check your Performance index by Waterfall and Bidding.\r\n\r\nIf you are not getting bid requests then you need to Implement bidding.\r\nFAN is Currently showing ads with Bidding only. \r\n\r\nIf you didn&#39;t integrated FAN with any Ad Network Mediation, follow instructions [here][1] to bid your FAN ads.\r\n\r\nFor FAN issues, You can check for issues at [Monetization Manager][2] to figure out main issues. \r\n\r\n\r\n  [1]: https://developers.facebook.com/docs/audience-network/bidding-integration\r\n  [2]: https://business.facebook.com/pub/issues","title":"Audience Network not displaying Ads with Admob mediation","body":"<p>Check your Performance index by Waterfall and Bidding.</p>\n<p>If you are not getting bid requests then you need to Implement bidding.\nFAN is Currently showing ads with Bidding only.</p>\n<p>If you didn't integrated FAN with any Ad Network Mediation, follow instructions <a href=\"https://developers.facebook.com/docs/audience-network/bidding-integration\" rel=\"nofollow noreferrer\">here</a> to bid your FAN ads.</p>\n<p>For FAN issues, You can check for issues at <a href=\"https://business.facebook.com/pub/issues\" rel=\"nofollow noreferrer\">Monetization Manager</a> to figure out main issues.</p>\n"},{"tags":[],"owner":{"account_id":14326724,"reputation":291,"user_id":10348628,"display_name":"Techy Rakshak"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689348779,"creation_date":1689348779,"answer_id":76689217,"question_id":73217889,"body_markdown":"Firstly, as @ZeroZero1 said make sure that you have implemented a bidding setup only. Facebook has already stopped responding to simple waterfall mediation requests.\r\n\r\nIf Incase, you have already confirmed that you did the bidding setup only and still not getting response from Facebook Audience Network, then you must cross check your integration of Facebook Audience Network. \r\nTake Help of Admob&#39;s Mediation Suite (Now known as Ad inspector) to Check if you have integrated all the bidding setup correctly or not.\r\n\r\nHere The Mediation Test Suite (Ad Inspector) Reference [Link][1]\r\n\r\nUse this Ad Inspector to check if you have any errors in your integration. Also, while testing make sure to enable test ads in Facebook Audience Network by adding your device id is FAN Testing Section So that you can see test ads. Refer to this [Link][2].\r\n\r\n\r\n  [1]: https://developers.google.com/admob/android/migrate-to-ad-inspector\r\n  [2]: https://developers.facebook.com/docs/audience-network/setting-up/testing/platform","title":"Audience Network not displaying Ads with Admob mediation","body":"<p>Firstly, as @ZeroZero1 said make sure that you have implemented a bidding setup only. Facebook has already stopped responding to simple waterfall mediation requests.</p>\n<p>If Incase, you have already confirmed that you did the bidding setup only and still not getting response from Facebook Audience Network, then you must cross check your integration of Facebook Audience Network.\nTake Help of Admob's Mediation Suite (Now known as Ad inspector) to Check if you have integrated all the bidding setup correctly or not.</p>\n<p>Here The Mediation Test Suite (Ad Inspector) Reference <a href=\"https://developers.google.com/admob/android/migrate-to-ad-inspector\" rel=\"nofollow noreferrer\">Link</a></p>\n<p>Use this Ad Inspector to check if you have any errors in your integration. Also, while testing make sure to enable test ads in Facebook Audience Network by adding your device id is FAN Testing Section So that you can see test ads. Refer to this <a href=\"https://developers.facebook.com/docs/audience-network/setting-up/testing/platform\" rel=\"nofollow noreferrer\">Link</a>.</p>\n"}],"owner":{"account_id":11202866,"reputation":1,"user_id":8219327,"display_name":"Smart Bingari"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":715,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1689348779,"creation_date":1659512009,"question_id":73217889,"body_markdown":"My Meta Audience Network not displaying Ads with Admob mediation Android, I am only getting requests and no impressions.\r\nPlease I need help, I have set up bidding and Admob Facebook mediation SDK \r\n    \r\n\r\n&gt; implementation &#39;com.google.ads.mediation:facebook:6.11.0.1&#39;\r\n\r\n&#39;[Screenshot][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/c2ywY.png","title":"Audience Network not displaying Ads with Admob mediation","body":"<p>My Meta Audience Network not displaying Ads with Admob mediation Android, I am only getting requests and no impressions.\nPlease I need help, I have set up bidding and Admob Facebook mediation SDK</p>\n<blockquote>\n<p>implementation 'com.google.ads.mediation:facebook:6.11.0.1'</p>\n</blockquote>\n<p>'<a href=\"https://i.stack.imgur.com/c2ywY.png\" rel=\"nofollow noreferrer\">Screenshot</a></p>\n"},{"tags":["java","spring","saml","saml-2.0","opensaml"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1635876317,"post_id":69810956,"comment_id":123408115,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."},{"owner":{"account_id":6387352,"reputation":159,"user_id":4954816,"display_name":"Eder Armando Anillo Lora"},"score":1,"creation_date":1649369954,"post_id":69810956,"comment_id":126865114,"body_markdown":"Hi, Did you solve this? I have the same problem. If you have a page with the solution please share it.","body":"Hi, Did you solve this? I have the same problem. If you have a page with the solution please share it."}],"answers":[{"tags":[],"owner":{"account_id":307264,"reputation":2065,"user_id":618465,"accept_rate":95,"display_name":"Navigatron"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1646244577,"creation_date":1646244577,"answer_id":71327298,"question_id":69810956,"body_markdown":"So I found this issue looking for something else, but I think I can point you in the right direction here.\r\n\r\nSo in [this commit][1], you can see that some of the classes that your error mentions. The classes missing their symbols have been deleted from the project. \r\n\r\nIt appears they have been deleted in a &quot;clean up&quot; commit after [implementing OpenSAML 3.3][2] into the spring SAML extension for [version 2.0.0-M1][3]. So if you upgraded to 2.0.0-M1, I&#39;d assume you get the same errors, which you can confirm.\r\n\r\nI&#39;d assume you will have to re-implement your code to work with this version of the Spring SAML extension 2.0.0-M31. Although, you should really be using the [Spring security core SAML libraries][4] and not the extension, since the extension is considered [&quot;end of life&quot;][5]. Either way, you will need to re-implement your code.\r\n\r\nNote: I&#39;ve not seen any document or guide on how to migrate from version 1.0.10 to any version of 2.0. There is a request for a guide [here][6] on the extensions github and another [here][7] on the integrated spring security core github.\r\n\r\n\r\n  [1]: https://github.com/spring-projects/spring-security-saml/commit/cac24f2c6ff077ff48a4a05fd99a9cb54e93ff35\r\n  [2]: https://github.com/spring-projects/spring-security-saml/commit/4e4f580a42c4316fe24adda83791f64fb46fca35\r\n  [3]: https://github.com/spring-projects/spring-security-saml/commits/2.0.0.M1?before=d4c169d28e90c7c7c79d68e21df26d2dd52c7276%20175&amp;branch=2.0.0.M1\r\n  [4]: https://github.com/spring-projects/spring-security\r\n  [5]: https://github.com/spring-projects/spring-security-saml#maintenance-mode\r\n  [6]: https://github.com/spring-projects/spring-security-saml/issues/462\r\n  [7]: https://github.com/spring-projects/spring-security/issues/8685","title":"Saml2 Core upgrade fails when upgraded spring-security-saml2-core from 1.0.10.RELEASE to 2.0.0.M31","body":"<p>So I found this issue looking for something else, but I think I can point you in the right direction here.</p>\n<p>So in <a href=\"https://github.com/spring-projects/spring-security-saml/commit/cac24f2c6ff077ff48a4a05fd99a9cb54e93ff35\" rel=\"nofollow noreferrer\">this commit</a>, you can see that some of the classes that your error mentions. The classes missing their symbols have been deleted from the project.</p>\n<p>It appears they have been deleted in a &quot;clean up&quot; commit after <a href=\"https://github.com/spring-projects/spring-security-saml/commit/4e4f580a42c4316fe24adda83791f64fb46fca35\" rel=\"nofollow noreferrer\">implementing OpenSAML 3.3</a> into the spring SAML extension for <a href=\"https://github.com/spring-projects/spring-security-saml/commits/2.0.0.M1?before=d4c169d28e90c7c7c79d68e21df26d2dd52c7276%20175&amp;branch=2.0.0.M1\" rel=\"nofollow noreferrer\">version 2.0.0-M1</a>. So if you upgraded to 2.0.0-M1, I'd assume you get the same errors, which you can confirm.</p>\n<p>I'd assume you will have to re-implement your code to work with this version of the Spring SAML extension 2.0.0-M31. Although, you should really be using the <a href=\"https://github.com/spring-projects/spring-security\" rel=\"nofollow noreferrer\">Spring security core SAML libraries</a> and not the extension, since the extension is considered <a href=\"https://github.com/spring-projects/spring-security-saml#maintenance-mode\" rel=\"nofollow noreferrer\">&quot;end of life&quot;</a>. Either way, you will need to re-implement your code.</p>\n<p>Note: I've not seen any document or guide on how to migrate from version 1.0.10 to any version of 2.0. There is a request for a guide <a href=\"https://github.com/spring-projects/spring-security-saml/issues/462\" rel=\"nofollow noreferrer\">here</a> on the extensions github and another <a href=\"https://github.com/spring-projects/spring-security/issues/8685\" rel=\"nofollow noreferrer\">here</a> on the integrated spring security core github.</p>\n"},{"tags":[],"owner":{"account_id":6387352,"reputation":159,"user_id":4954816,"display_name":"Eder Armando Anillo Lora"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689348652,"creation_date":1689347845,"answer_id":76689079,"question_id":69810956,"body_markdown":"Effectively, the saml library for 1.0.10.RELEASE is the last version that contains  those classes. Navigatron is right, Spring considers the extension library as [&quot;End of life&quot;][1]. So, we must implement the spring security library to configure the SAML. Here some links for checking:\r\n\r\n - [Baeldung][2] \r\n - [Dev okta][3] \r\n - [Medium][4]\r\n\r\nThe new library implemented there is spring-security-saml2-service-provider. It uses opensaml-core and not opensaml-2.6.6. You probably need to rewrite your core for SAML even the custom classes.\r\n\r\nI hope to help with this info.\r\n\r\n  [1]: https://github.com/spring-projects/spring-security-saml#maintenance-mode\r\n  [2]: https://www.baeldung.com/spring-security-saml\r\n  [3]: https://developer.okta.com/blog/2022/08/05/spring-boot-saml\r\n  [4]: https://medium.com/digital-software-architecture/spring-boot-spring-security-with-saml-2-83d87df5b470","title":"Saml2 Core upgrade fails when upgraded spring-security-saml2-core from 1.0.10.RELEASE to 2.0.0.M31","body":"<p>Effectively, the saml library for 1.0.10.RELEASE is the last version that contains  those classes. Navigatron is right, Spring considers the extension library as <a href=\"https://github.com/spring-projects/spring-security-saml#maintenance-mode\" rel=\"nofollow noreferrer\">&quot;End of life&quot;</a>. So, we must implement the spring security library to configure the SAML. Here some links for checking:</p>\n<ul>\n<li><a href=\"https://www.baeldung.com/spring-security-saml\" rel=\"nofollow noreferrer\">Baeldung</a></li>\n<li><a href=\"https://developer.okta.com/blog/2022/08/05/spring-boot-saml\" rel=\"nofollow noreferrer\">Dev okta</a></li>\n<li><a href=\"https://medium.com/digital-software-architecture/spring-boot-spring-security-with-saml-2-83d87df5b470\" rel=\"nofollow noreferrer\">Medium</a></li>\n</ul>\n<p>The new library implemented there is spring-security-saml2-service-provider. It uses opensaml-core and not opensaml-2.6.6. You probably need to rewrite your core for SAML even the custom classes.</p>\n<p>I hope to help with this info.</p>\n"}],"owner":{"account_id":22457481,"reputation":31,"user_id":16659963,"display_name":"Alison"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1583,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1689348652,"creation_date":1635858168,"question_id":69810956,"body_markdown":"I recently tried to upgrade saml2-core from 1.0.10 to 2.0.0.M31. When I tried building the project it fails with many &quot;cannot find symbol&quot; and &quot;package does not exists&quot; exceptions. \r\n\r\n```\r\n[ERROR] /C:/restproject/restsecurity/restsaml2/src/main/java/security/entry/AbstractSaml2AuthEntryPoint.java:[33,99] cannot find symbol\r\n  symbol:   class SAMLEntryPoint\r\n  location: package org.springframework.security.saml\r\n[ERROR] /C:/restproject/restsecurity/restsaml2/src/main/java/security/binding/RestHTTPArtifactEncoder.java:[35,46] cannot find symbol\r\n  symbol: class BaseSAML2MessageEncoder\r\n[ERROR] /C:/restproject/restsecurity/restsaml2/src/main/java/security/discovery/Saml2AuthDiscovery.java:[16,41] cannot find symbol\r\n  symbol:   class SAMLDiscovery\r\n  location: package org.springframework.security.saml\r\n[ERROR] /C:/restproject/restsecurity/restsaml2/src/main/java/security/ticket/Saml2UserDetails.java:[33,34] cannot find symbol\r\n  symbol:   class SAMLCredential\r\n  location: package org.springframework.security.saml\r\n```\r\n\r\nWhen I compared the package structure of both the version the structure and classes are different which is why It cannot find the required classes. What are replacement classes for these or is there any other new jar introduced which contains these missing classes. ","title":"Saml2 Core upgrade fails when upgraded spring-security-saml2-core from 1.0.10.RELEASE to 2.0.0.M31","body":"<p>I recently tried to upgrade saml2-core from 1.0.10 to 2.0.0.M31. When I tried building the project it fails with many &quot;cannot find symbol&quot; and &quot;package does not exists&quot; exceptions.</p>\n<pre><code>[ERROR] /C:/restproject/restsecurity/restsaml2/src/main/java/security/entry/AbstractSaml2AuthEntryPoint.java:[33,99] cannot find symbol\n  symbol:   class SAMLEntryPoint\n  location: package org.springframework.security.saml\n[ERROR] /C:/restproject/restsecurity/restsaml2/src/main/java/security/binding/RestHTTPArtifactEncoder.java:[35,46] cannot find symbol\n  symbol: class BaseSAML2MessageEncoder\n[ERROR] /C:/restproject/restsecurity/restsaml2/src/main/java/security/discovery/Saml2AuthDiscovery.java:[16,41] cannot find symbol\n  symbol:   class SAMLDiscovery\n  location: package org.springframework.security.saml\n[ERROR] /C:/restproject/restsecurity/restsaml2/src/main/java/security/ticket/Saml2UserDetails.java:[33,34] cannot find symbol\n  symbol:   class SAMLCredential\n  location: package org.springframework.security.saml\n</code></pre>\n<p>When I compared the package structure of both the version the structure and classes are different which is why It cannot find the required classes. What are replacement classes for these or is there any other new jar introduced which contains these missing classes.</p>\n"},{"tags":["java","velocity","apache-velocity"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1689365282,"post_id":76689034,"comment_id":135208659,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"tags":[],"owner":{"account_id":27810413,"reputation":456,"user_id":21232911,"display_name":"nischal sharma"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1689348576,"creation_date":1689348576,"answer_id":76689180,"question_id":76689034,"body_markdown":" Here is an example of how you can replace multiple variables in a string using Velocity Template Language:\r\n\r\n```velocity\r\n#set($SerialNumber = &quot;1234&quot;)\r\n#set($abcd = &quot;xyz&quot;)\r\nSERIAL_NUMBER $SerialNumber not found in iLPN/Tote $abcd\r\n```\r\n\r\nIn the above example, `$SerialNumber` and `$abcd` are two variables that are being replaced with the values `&quot;1234&quot;` and `&quot;xyz&quot;` respectively.\r\n","title":"replace 2 strings at a time in velocity template","body":"<p>Here is an example of how you can replace multiple variables in a string using Velocity Template Language:</p>\n<pre><code>#set($SerialNumber = &quot;1234&quot;)\n#set($abcd = &quot;xyz&quot;)\nSERIAL_NUMBER $SerialNumber not found in iLPN/Tote $abcd\n</code></pre>\n<p>In the above example, <code>$SerialNumber</code> and <code>$abcd</code> are two variables that are being replaced with the values <code>&quot;1234&quot;</code> and <code>&quot;xyz&quot;</code> respectively.</p>\n"}],"owner":{"account_id":23606155,"reputation":11,"user_id":17641873,"display_name":"Chinmaya Y Hegde"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1689348576,"creation_date":1689347572,"question_id":76689034,"body_markdown":"SERIAL_NUMBER {SerialNumber} not found in iLPN/Tote {IlpnId}\r\n\r\nI want to replace {SerialNumber} with some value and also want to replace {abcd} with some value at a time.\r\nI am able to replace either {SerialNumber} or {abcd} one at a time but not both.\r\n\r\nhow to do this using velocity template language?","title":"replace 2 strings at a time in velocity template","body":"<p>SERIAL_NUMBER {SerialNumber} not found in iLPN/Tote {IlpnId}</p>\n<p>I want to replace {SerialNumber} with some value and also want to replace {abcd} with some value at a time.\nI am able to replace either {SerialNumber} or {abcd} one at a time but not both.</p>\n<p>how to do this using velocity template language?</p>\n"},{"tags":["java","json","jackson","jackson-databind"],"owner":{"account_id":1786983,"reputation":615,"user_id":1628247,"accept_rate":75,"display_name":"Krotz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689348315,"creation_date":1689348315,"question_id":76689137,"body_markdown":"Firstly thank you for your time!\r\nAny hints would be highly appreciated on how to do this with Jackson\r\n\r\n```json\r\n{\r\n  &quot;operation&quot;: &quot;create|update|delete|etc&quot;,\r\n  &quot;key&quot;: {&quot;type&quot;: &quot;type1&quot;, &quot;id&quot;: &quot;1&quot; },\r\n  &quot;payload&quot;: { //fields that are specific to **operation and key.type** at the same time },\r\n  &quot;...&quot;: // other fields based only on operation\r\n}\r\n```\r\n\r\nI&#39;ve tried doing this with annotations only, and I managed to get the root object deserialized based on the operation type using `@JsonTypeInfo`, and managed to get the key and the other fields to work with it as well using the `external_property` mode, but can&#39;t figure out a way to get the payload out correctly. If there is a way to achieve this solely with annotations, please do tell :)\r\n\r\nAfter, I tried creating a custom deserializer for the root object, manually parsed the top fields by inspecting the operation property, getting to a point similar to the annotations only approach, but got stuck again on the payload.\r\n\r\n```java\r\n@JsonSubTypes(Type(Type1CreatePayload.class))\r\nsealed interface CreatePayload {}\r\n\r\n@JsonTypeName(&quot;type1&quot;) // matches key.type\r\nfinal record Type1CreatePayload(..)\r\n\r\nsealed abstract class Operation {\r\n  // operation field\r\n  // key object\r\n}\r\n\r\nfinal class CreateOperation&lt;P extends CreatePayload&gt; extends Operation {\r\n  P payload;\r\n}\r\n```\r\n\r\n**I can&#39;t figure out how to find the type reference or java type from the DeserializerContext or parser, so I can reuse @JsonTypeName annotations from subtypes to dynamically call parser.readValueAs(type).**\r\n\r\nAlso during my research I&#39;ve seen wiki links that are now dead any ideas where the official docs are? espcially for custom serializers(error handling / reporting), @JsonTypeDeserializer etc. as I feel this is more complicated than usual usage patterns.\r\n\r\n","title":"Jackson dynamic/custom deserialization of nested object based on multiple fields at different nest levels","body":"<p>Firstly thank you for your time!\nAny hints would be highly appreciated on how to do this with Jackson</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;operation&quot;: &quot;create|update|delete|etc&quot;,\n  &quot;key&quot;: {&quot;type&quot;: &quot;type1&quot;, &quot;id&quot;: &quot;1&quot; },\n  &quot;payload&quot;: { //fields that are specific to **operation and key.type** at the same time },\n  &quot;...&quot;: // other fields based only on operation\n}\n</code></pre>\n<p>I've tried doing this with annotations only, and I managed to get the root object deserialized based on the operation type using <code>@JsonTypeInfo</code>, and managed to get the key and the other fields to work with it as well using the <code>external_property</code> mode, but can't figure out a way to get the payload out correctly. If there is a way to achieve this solely with annotations, please do tell :)</p>\n<p>After, I tried creating a custom deserializer for the root object, manually parsed the top fields by inspecting the operation property, getting to a point similar to the annotations only approach, but got stuck again on the payload.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@JsonSubTypes(Type(Type1CreatePayload.class))\nsealed interface CreatePayload {}\n\n@JsonTypeName(&quot;type1&quot;) // matches key.type\nfinal record Type1CreatePayload(..)\n\nsealed abstract class Operation {\n  // operation field\n  // key object\n}\n\nfinal class CreateOperation&lt;P extends CreatePayload&gt; extends Operation {\n  P payload;\n}\n</code></pre>\n<p><strong>I can't figure out how to find the type reference or java type from the DeserializerContext or parser, so I can reuse @JsonTypeName annotations from subtypes to dynamically call parser.readValueAs(type).</strong></p>\n<p>Also during my research I've seen wiki links that are now dead any ideas where the official docs are? espcially for custom serializers(error handling / reporting), @JsonTypeDeserializer etc. as I feel this is more complicated than usual usage patterns.</p>\n"},{"tags":["java","spring-boot","jwt","refresh-token"],"answers":[{"tags":[],"owner":{"account_id":22551306,"reputation":186,"user_id":16740373,"display_name":"David Mališ"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1646228273,"creation_date":1646228273,"answer_id":71323673,"question_id":71323058,"body_markdown":"The problem is with this\r\n\r\n \r\n    @Bean\r\n    public AuthTokenFilter authenticationJwtTokenFilter() {\r\n        return new AuthTokenFilter();\r\n    }\r\n\r\nYou are using the wrong constructor to create a bean, and expecting that the dependency injection will do its magic afterwards - it&#39;s not how it works.\r\n\r\n\r\nBasically I would delete the no-args constructor in the filter, and rewrite the above method like this:\r\n\r\n    @Bean\r\n    public AuthTokenFilter authenticationJwtTokenFilter(JwtUtils jwtUtils, CustomUserDetailsService customUserDetailsService) {\r\n        return new AuthTokenFilter(jwtUtils, customUserDetailsService);\r\n    }\r\n","title":"Refresh Token with JWT - JWTUtils Cannot set user authentication because &quot;this.jwtUtils&quot; is null","body":"<p>The problem is with this</p>\n<pre><code>@Bean\npublic AuthTokenFilter authenticationJwtTokenFilter() {\n    return new AuthTokenFilter();\n}\n</code></pre>\n<p>You are using the wrong constructor to create a bean, and expecting that the dependency injection will do its magic afterwards - it's not how it works.</p>\n<p>Basically I would delete the no-args constructor in the filter, and rewrite the above method like this:</p>\n<pre><code>@Bean\npublic AuthTokenFilter authenticationJwtTokenFilter(JwtUtils jwtUtils, CustomUserDetailsService customUserDetailsService) {\n    return new AuthTokenFilter(jwtUtils, customUserDetailsService);\n}\n</code></pre>\n"}],"owner":{"account_id":7531034,"reputation":1,"user_id":5719229,"display_name":"S.N"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1733,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":71323673,"answer_count":1,"score":1,"last_activity_date":1689348247,"creation_date":1646225716,"question_id":71323058,"body_markdown":"I have a problem about fix the error in my Refresh Token with JWT in Spring Boot Application.\r\n\r\nMy issue is related with validating JWT Token.\r\n\r\nEven if I defined @Component annotation in JWTUtil class, the issue cannot be disappeared.\r\n\r\n\r\nHere is my error shown below.\r\n\r\n    AuthTokenFilter | doFilterInternal | Cannot set user authentication: Cannot invoke &quot;com.refreshtokenjwt.app.jwt.JwtUtils.validateJwtToken(String)&quot; because &quot;this.jwtUtils&quot; is null\r\n\r\nHow can I fix my issue?\r\n\r\nHere is my JWTUtils shown below.\r\n\r\n    @Component\r\n    public class JwtUtils {\r\n    \r\n        private static final Logger LOGGER = LoggerFactory.getLogger(JwtUtils.class);\r\n    \r\n        @Value(&quot;${jwt.secret}&quot;)\r\n        private String jwtSecret;\r\n    \r\n        @Value(&quot;${jwt.secret.expireMs}&quot;)\r\n        private int jwtExpirationMs;\r\n    \r\n        public String generateJwtToken(CustomUserDetails userPrincipal) {\r\n            return generateTokenFromUsername(userPrincipal.getUsername());\r\n        }\r\n    \r\n        public String generateTokenFromUsername(String username) {\r\n            return Jwts.builder().setSubject(username).setIssuedAt(new Date())\r\n                    .setExpiration(new Date((new Date()).getTime() + jwtExpirationMs))\r\n                    .signWith(SignatureAlgorithm.HS512, jwtSecret).compact();\r\n        }\r\n    \r\n        public String getUserNameFromJwtToken(String token) {\r\n            return Jwts.parser().setSigningKey(jwtSecret).parseClaimsJws(token).getBody().getSubject();\r\n        }\r\n    \r\n        public boolean validateJwtToken(String authToken) {\r\n            try {\r\n                Jwts.parser().setSigningKey(jwtSecret).parseClaimsJws(authToken);\r\n                return true;\r\n            } catch (SignatureException e) {\r\n                LOGGER.error(&quot;JwtUtils | validateJwtToken | Invalid JWT signature: {}&quot;, e.getMessage());\r\n            } catch (MalformedJwtException e) {\r\n                LOGGER.error(&quot;JwtUtils | validateJwtToken | Invalid JWT token: {}&quot;, e.getMessage());\r\n            } catch (ExpiredJwtException e) {\r\n                LOGGER.error(&quot;JwtUtils | validateJwtToken | JWT token is expired: {}&quot;, e.getMessage());\r\n            } catch (UnsupportedJwtException e) {\r\n                LOGGER.error(&quot;JwtUtils | validateJwtToken | JWT token is unsupported: {}&quot;, e.getMessage());\r\n            } catch (IllegalArgumentException e) {\r\n                LOGGER.error(&quot;JwtUtils | validateJwtToken | JWT claims string is empty: {}&quot;, e.getMessage());\r\n            }\r\n    \r\n            return false;\r\n        }\r\n    }\r\n\r\nHere is my AuthTokenFilter class shown below.\r\n\r\n    public class AuthTokenFilter extends OncePerRequestFilter {\r\n    \r\n        private static final Logger LOGGER = LoggerFactory.getLogger(AuthTokenFilter.class);\r\n    \r\n        private JwtUtils jwtUtils;\r\n    \r\n        CustomUserDetailsService customUserDetailsService;\r\n    \r\n        public AuthTokenFilter() {\r\n        }\r\n    \r\n        @Autowired\r\n        public AuthTokenFilter(JwtUtils jwtUtils, CustomUserDetailsService customUserDetailsService) {\r\n            this.jwtUtils = jwtUtils;\r\n            this.customUserDetailsService = customUserDetailsService;\r\n        }\r\n    \r\n        @Override\r\n        protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response,\r\n                                        FilterChain filterChain) throws ServletException, IOException {\r\n    \r\n            try {\r\n    \r\n                String jwt = parseJwt(request);\r\n                LOGGER.error(&quot;AuthTokenFilter | doFilterInternal | jwt: {}&quot;, jwt);\r\n    \r\n                if (jwt != null &amp;&amp; jwtUtils.validateJwtToken(jwt)) {\r\n    \r\n                    String username = jwtUtils.getUserNameFromJwtToken(jwt);\r\n    \r\n                    UserDetails userDetails = customUserDetailsService.loadUserByUsername(username);\r\n                    UsernamePasswordAuthenticationToken authentication = new UsernamePasswordAuthenticationToken(\r\n                            userDetails, null, userDetails.getAuthorities());\r\n                    authentication.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\r\n    \r\n                    SecurityContextHolder.getContext().setAuthentication(authentication);\r\n                }\r\n            } catch (Exception e) {\r\n                LOGGER.error(&quot;AuthTokenFilter | doFilterInternal | Cannot set user authentication: {}&quot;, e.getMessage());\r\n            }\r\n    \r\n            filterChain.doFilter(request, response);\r\n        }\r\n    \r\n    \r\n        private String parseJwt(HttpServletRequest request) {\r\n    \r\n            String headerAuth = request.getHeader(&quot;Authorization&quot;);\r\n    \r\n            if (StringUtils.hasText(headerAuth) &amp;&amp; headerAuth.startsWith(&quot;Bearer &quot;)) {\r\n                return headerAuth.substring(7, headerAuth.length());\r\n            }\r\n    \r\n            return null;\r\n        }\r\n    }\r\n\r\nHere is my AuthEntryPointJwt class shown below.\r\n\r\n    @Component\r\n    public class AuthEntryPointJwt implements AuthenticationEntryPoint {\r\n    \r\n        private static final Logger LOGGER = LoggerFactory.getLogger(AuthEntryPointJwt.class);\r\n    \r\n        @Override\r\n        public void commence(HttpServletRequest request, HttpServletResponse response,\r\n                             AuthenticationException authException) throws IOException, ServletException {\r\n    \r\n            LOGGER.error(&quot;AuthEntryPointJwt | commence | Unauthorized error: {}&quot;, authException.getMessage());\r\n    \r\n            response.setContentType(MediaType.APPLICATION_JSON_VALUE);\r\n            response.setStatus(HttpServletResponse.SC_UNAUTHORIZED);\r\n    \r\n            Map&lt;String, Object&gt; body = new HashMap&lt;&gt;();\r\n            body.put(&quot;status&quot;, HttpServletResponse.SC_UNAUTHORIZED);\r\n            body.put(&quot;error&quot;, &quot;Unauthorized&quot;);\r\n            body.put(&quot;message&quot;, authException.getMessage());\r\n            body.put(&quot;path&quot;, request.getServletPath());\r\n    \r\n            LOGGER.info(&quot;AuthEntryPointJwt | commence | status: {}&quot;, HttpServletResponse.SC_UNAUTHORIZED);\r\n            LOGGER.info(&quot;AuthEntryPointJwt | commence | error: {}&quot;, &quot;Unauthorized&quot;);\r\n            LOGGER.info(&quot;AuthEntryPointJwt | commence | message: {}&quot;, authException.getMessage());\r\n            LOGGER.info(&quot;AuthEntryPointJwt | commence | path: {}&quot;, request.getServletPath());\r\n    \r\n            final ObjectMapper mapper = new ObjectMapper();\r\n            mapper.writeValue(response.getOutputStream(), body);\r\n    \r\n        }\r\n    }\r\n\r\nHere is my WebSecurityConfig class shown below.\r\n\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    public class WebSecurityConfig extends WebSecurityConfigurerAdapter {\r\n    \r\n        CustomUserDetailsService customUserDetailsService;;\r\n    \r\n        private AuthEntryPointJwt unauthorizedHandler;\r\n    \r\n        @Autowired\r\n        public WebSecurityConfig(CustomUserDetailsService customUserDetailsService, AuthEntryPointJwt unauthorizedHandler) {\r\n            this.customUserDetailsService = customUserDetailsService;\r\n            this.unauthorizedHandler = unauthorizedHandler;\r\n        }\r\n    \r\n        @Bean\r\n        public PasswordEncoder passwordEncoder() {\r\n            return new BCryptPasswordEncoder();\r\n        }\r\n    \r\n        @Override\r\n        public void configure(AuthenticationManagerBuilder authenticationManagerBuilder) throws Exception {\r\n            authenticationManagerBuilder.userDetailsService(customUserDetailsService).passwordEncoder(passwordEncoder());\r\n        }\r\n    \r\n        @Override\r\n        protected void configure(HttpSecurity http) throws Exception {\r\n            http.cors().and()\r\n                    .csrf().disable()\r\n                    .exceptionHandling().authenticationEntryPoint(unauthorizedHandler).and()\r\n                    .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS).and()\r\n                    .authorizeRequests().antMatchers(&quot;/api/auth/**&quot;).permitAll()\r\n                    .antMatchers(&quot;/api/pages/**&quot;).permitAll()\r\n                    .anyRequest().authenticated();\r\n    \r\n            http.addFilterBefore(authenticationJwtTokenFilter(), UsernamePasswordAuthenticationFilter.class);\r\n        }\r\n    \r\n        @Bean\r\n        @Override\r\n        public AuthenticationManager authenticationManagerBean() throws Exception {\r\n            return super.authenticationManagerBean();\r\n        }\r\n    \r\n        @Bean\r\n        public AuthTokenFilter authenticationJwtTokenFilter() {\r\n            return new AuthTokenFilter();\r\n        }\r\n    }\r\n\r\n","title":"Refresh Token with JWT - JWTUtils Cannot set user authentication because &quot;this.jwtUtils&quot; is null","body":"<p>I have a problem about fix the error in my Refresh Token with JWT in Spring Boot Application.</p>\n<p>My issue is related with validating JWT Token.</p>\n<p>Even if I defined @Component annotation in JWTUtil class, the issue cannot be disappeared.</p>\n<p>Here is my error shown below.</p>\n<pre><code>AuthTokenFilter | doFilterInternal | Cannot set user authentication: Cannot invoke &quot;com.refreshtokenjwt.app.jwt.JwtUtils.validateJwtToken(String)&quot; because &quot;this.jwtUtils&quot; is null\n</code></pre>\n<p>How can I fix my issue?</p>\n<p>Here is my JWTUtils shown below.</p>\n<pre><code>@Component\npublic class JwtUtils {\n\n    private static final Logger LOGGER = LoggerFactory.getLogger(JwtUtils.class);\n\n    @Value(&quot;${jwt.secret}&quot;)\n    private String jwtSecret;\n\n    @Value(&quot;${jwt.secret.expireMs}&quot;)\n    private int jwtExpirationMs;\n\n    public String generateJwtToken(CustomUserDetails userPrincipal) {\n        return generateTokenFromUsername(userPrincipal.getUsername());\n    }\n\n    public String generateTokenFromUsername(String username) {\n        return Jwts.builder().setSubject(username).setIssuedAt(new Date())\n                .setExpiration(new Date((new Date()).getTime() + jwtExpirationMs))\n                .signWith(SignatureAlgorithm.HS512, jwtSecret).compact();\n    }\n\n    public String getUserNameFromJwtToken(String token) {\n        return Jwts.parser().setSigningKey(jwtSecret).parseClaimsJws(token).getBody().getSubject();\n    }\n\n    public boolean validateJwtToken(String authToken) {\n        try {\n            Jwts.parser().setSigningKey(jwtSecret).parseClaimsJws(authToken);\n            return true;\n        } catch (SignatureException e) {\n            LOGGER.error(&quot;JwtUtils | validateJwtToken | Invalid JWT signature: {}&quot;, e.getMessage());\n        } catch (MalformedJwtException e) {\n            LOGGER.error(&quot;JwtUtils | validateJwtToken | Invalid JWT token: {}&quot;, e.getMessage());\n        } catch (ExpiredJwtException e) {\n            LOGGER.error(&quot;JwtUtils | validateJwtToken | JWT token is expired: {}&quot;, e.getMessage());\n        } catch (UnsupportedJwtException e) {\n            LOGGER.error(&quot;JwtUtils | validateJwtToken | JWT token is unsupported: {}&quot;, e.getMessage());\n        } catch (IllegalArgumentException e) {\n            LOGGER.error(&quot;JwtUtils | validateJwtToken | JWT claims string is empty: {}&quot;, e.getMessage());\n        }\n\n        return false;\n    }\n}\n</code></pre>\n<p>Here is my AuthTokenFilter class shown below.</p>\n<pre><code>public class AuthTokenFilter extends OncePerRequestFilter {\n\n    private static final Logger LOGGER = LoggerFactory.getLogger(AuthTokenFilter.class);\n\n    private JwtUtils jwtUtils;\n\n    CustomUserDetailsService customUserDetailsService;\n\n    public AuthTokenFilter() {\n    }\n\n    @Autowired\n    public AuthTokenFilter(JwtUtils jwtUtils, CustomUserDetailsService customUserDetailsService) {\n        this.jwtUtils = jwtUtils;\n        this.customUserDetailsService = customUserDetailsService;\n    }\n\n    @Override\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response,\n                                    FilterChain filterChain) throws ServletException, IOException {\n\n        try {\n\n            String jwt = parseJwt(request);\n            LOGGER.error(&quot;AuthTokenFilter | doFilterInternal | jwt: {}&quot;, jwt);\n\n            if (jwt != null &amp;&amp; jwtUtils.validateJwtToken(jwt)) {\n\n                String username = jwtUtils.getUserNameFromJwtToken(jwt);\n\n                UserDetails userDetails = customUserDetailsService.loadUserByUsername(username);\n                UsernamePasswordAuthenticationToken authentication = new UsernamePasswordAuthenticationToken(\n                        userDetails, null, userDetails.getAuthorities());\n                authentication.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\n\n                SecurityContextHolder.getContext().setAuthentication(authentication);\n            }\n        } catch (Exception e) {\n            LOGGER.error(&quot;AuthTokenFilter | doFilterInternal | Cannot set user authentication: {}&quot;, e.getMessage());\n        }\n\n        filterChain.doFilter(request, response);\n    }\n\n\n    private String parseJwt(HttpServletRequest request) {\n\n        String headerAuth = request.getHeader(&quot;Authorization&quot;);\n\n        if (StringUtils.hasText(headerAuth) &amp;&amp; headerAuth.startsWith(&quot;Bearer &quot;)) {\n            return headerAuth.substring(7, headerAuth.length());\n        }\n\n        return null;\n    }\n}\n</code></pre>\n<p>Here is my AuthEntryPointJwt class shown below.</p>\n<pre><code>@Component\npublic class AuthEntryPointJwt implements AuthenticationEntryPoint {\n\n    private static final Logger LOGGER = LoggerFactory.getLogger(AuthEntryPointJwt.class);\n\n    @Override\n    public void commence(HttpServletRequest request, HttpServletResponse response,\n                         AuthenticationException authException) throws IOException, ServletException {\n\n        LOGGER.error(&quot;AuthEntryPointJwt | commence | Unauthorized error: {}&quot;, authException.getMessage());\n\n        response.setContentType(MediaType.APPLICATION_JSON_VALUE);\n        response.setStatus(HttpServletResponse.SC_UNAUTHORIZED);\n\n        Map&lt;String, Object&gt; body = new HashMap&lt;&gt;();\n        body.put(&quot;status&quot;, HttpServletResponse.SC_UNAUTHORIZED);\n        body.put(&quot;error&quot;, &quot;Unauthorized&quot;);\n        body.put(&quot;message&quot;, authException.getMessage());\n        body.put(&quot;path&quot;, request.getServletPath());\n\n        LOGGER.info(&quot;AuthEntryPointJwt | commence | status: {}&quot;, HttpServletResponse.SC_UNAUTHORIZED);\n        LOGGER.info(&quot;AuthEntryPointJwt | commence | error: {}&quot;, &quot;Unauthorized&quot;);\n        LOGGER.info(&quot;AuthEntryPointJwt | commence | message: {}&quot;, authException.getMessage());\n        LOGGER.info(&quot;AuthEntryPointJwt | commence | path: {}&quot;, request.getServletPath());\n\n        final ObjectMapper mapper = new ObjectMapper();\n        mapper.writeValue(response.getOutputStream(), body);\n\n    }\n}\n</code></pre>\n<p>Here is my WebSecurityConfig class shown below.</p>\n<pre><code>@Configuration\n@EnableWebSecurity\npublic class WebSecurityConfig extends WebSecurityConfigurerAdapter {\n\n    CustomUserDetailsService customUserDetailsService;;\n\n    private AuthEntryPointJwt unauthorizedHandler;\n\n    @Autowired\n    public WebSecurityConfig(CustomUserDetailsService customUserDetailsService, AuthEntryPointJwt unauthorizedHandler) {\n        this.customUserDetailsService = customUserDetailsService;\n        this.unauthorizedHandler = unauthorizedHandler;\n    }\n\n    @Bean\n    public PasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder();\n    }\n\n    @Override\n    public void configure(AuthenticationManagerBuilder authenticationManagerBuilder) throws Exception {\n        authenticationManagerBuilder.userDetailsService(customUserDetailsService).passwordEncoder(passwordEncoder());\n    }\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http.cors().and()\n                .csrf().disable()\n                .exceptionHandling().authenticationEntryPoint(unauthorizedHandler).and()\n                .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS).and()\n                .authorizeRequests().antMatchers(&quot;/api/auth/**&quot;).permitAll()\n                .antMatchers(&quot;/api/pages/**&quot;).permitAll()\n                .anyRequest().authenticated();\n\n        http.addFilterBefore(authenticationJwtTokenFilter(), UsernamePasswordAuthenticationFilter.class);\n    }\n\n    @Bean\n    @Override\n    public AuthenticationManager authenticationManagerBean() throws Exception {\n        return super.authenticationManagerBean();\n    }\n\n    @Bean\n    public AuthTokenFilter authenticationJwtTokenFilter() {\n        return new AuthTokenFilter();\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","docker","dockerfile","activemq"],"answers":[{"tags":[],"owner":{"account_id":13173434,"reputation":1,"user_id":9514973,"display_name":"almartino"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689348201,"creation_date":1689348201,"answer_id":76689125,"question_id":75214364,"body_markdown":"I&#39;m trying to do a similar thing but with docker-compose, here&#39;s what i found until now:\r\n\r\n```yaml\r\n  activemq:\r\n    image: apache/activemq:5.17.5\r\n    hostname: &quot;0.0.0.0&quot;\r\n    ports:\r\n      - &quot;61616:61616&quot;\r\n      - &quot;8161:8161&quot;\r\n    volumes:\r\n      - ./jetty.xml:/opt/apache-activemq/conf/jetty.xml\r\n```\r\n\r\nI&#39;ve taken the `jetty.xml` from the container itself. If you look carefully to your logs at the end:\r\n```\r\n..INFO | ActiveMQ WebConsole available at http://127.0.0.1:8161/\r\n..INFO | ActiveMQ Jolokia REST API available at http://127.0.0.1:8161/api/jolokia/\r\n```\r\nModifying the jetty.xml configuration, will do the trick.\r\n\r\n```xml\r\n&lt;bean id=&quot;jettyPort&quot; class=&quot;org.apache.activemq.web.WebConsolePort&quot; init-method=&quot;start&quot;&gt;\r\n        &lt;property name=&quot;host&quot; value=&quot;0.0.0.0&quot;/&gt;\r\n        &lt;property name=&quot;port&quot; value=&quot;8161&quot;/&gt;\r\n    &lt;/bean&gt;\r\n```\r\n\r\n&gt; When a service listens on 0.0.0.0, it accepts connections from any network interface, including the loopback interface (127.0.0.1) and any external interfaces.","title":"Setting up Apache ActiveMQ in Docker","body":"<p>I'm trying to do a similar thing but with docker-compose, here's what i found until now:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>  activemq:\n    image: apache/activemq:5.17.5\n    hostname: &quot;0.0.0.0&quot;\n    ports:\n      - &quot;61616:61616&quot;\n      - &quot;8161:8161&quot;\n    volumes:\n      - ./jetty.xml:/opt/apache-activemq/conf/jetty.xml\n</code></pre>\n<p>I've taken the <code>jetty.xml</code> from the container itself. If you look carefully to your logs at the end:</p>\n<pre><code>..INFO | ActiveMQ WebConsole available at http://127.0.0.1:8161/\n..INFO | ActiveMQ Jolokia REST API available at http://127.0.0.1:8161/api/jolokia/\n</code></pre>\n<p>Modifying the jetty.xml configuration, will do the trick.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;bean id=&quot;jettyPort&quot; class=&quot;org.apache.activemq.web.WebConsolePort&quot; init-method=&quot;start&quot;&gt;\n        &lt;property name=&quot;host&quot; value=&quot;0.0.0.0&quot;/&gt;\n        &lt;property name=&quot;port&quot; value=&quot;8161&quot;/&gt;\n    &lt;/bean&gt;\n</code></pre>\n<blockquote>\n<p>When a service listens on 0.0.0.0, it accepts connections from any network interface, including the loopback interface (127.0.0.1) and any external interfaces.</p>\n</blockquote>\n"}],"owner":{"account_id":7604456,"reputation":28,"user_id":9420915,"display_name":"Naman Jain"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":725,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689348201,"creation_date":1674503469,"question_id":75214364,"body_markdown":"I&#39;m trying to setup Apache ActiveMQ in Docker.\r\n\r\nThis is the dockerfile I&#39;m using:\r\n```\r\nFROM ubuntu\r\nLABEL owner=&quot;Naman Jain&quot;\r\n\r\nRUN apt-get update &amp;&amp; apt-get install openjdk-11-jdk wget curl zookeeperd -y\r\n\r\nRUN wget http://archive.apache.org/dist/activemq/5.16.5/apache-activemq-5.16.5-bin.tar.gz --output-document apache-activemq.tar.gz\r\n\r\nRUN tar -xvzf apache-activemq.tar.gz --directory /opt\r\n\r\nRUN rm apache-activemq.tar.gz\r\n```\r\n\r\nAfter building the dockerfile and running the image -&gt;\r\n```\r\ndocker container run -it --name spring -p 8161:8161 -p 61616:61616 65e2b6f0f1529172ef8df15658347aa1898c653502f7cb507e798f12da43b81f\r\n```\r\n\r\nI started the ActiveMQ server -&gt;\r\n```\r\n./activemq console\r\n```\r\nIt has given the following output:\r\n[![ActiveMQ output](https://i.stack.imgur.com/VwEJN.png)](https://i.stack.imgur.com/VwEJN.png)\r\n\r\nBut I&#39;m not able to see the webpage on the browser:\r\n[![enter image description here](https://i.stack.imgur.com/QVxHw.png)](https://i.stack.imgur.com/QVxHw.png)\r\n\r\nI tried running the image using -p option but the webpage didn&#39;t work.","title":"Setting up Apache ActiveMQ in Docker","body":"<p>I'm trying to setup Apache ActiveMQ in Docker.</p>\n<p>This is the dockerfile I'm using:</p>\n<pre><code>FROM ubuntu\nLABEL owner=&quot;Naman Jain&quot;\n\nRUN apt-get update &amp;&amp; apt-get install openjdk-11-jdk wget curl zookeeperd -y\n\nRUN wget http://archive.apache.org/dist/activemq/5.16.5/apache-activemq-5.16.5-bin.tar.gz --output-document apache-activemq.tar.gz\n\nRUN tar -xvzf apache-activemq.tar.gz --directory /opt\n\nRUN rm apache-activemq.tar.gz\n</code></pre>\n<p>After building the dockerfile and running the image -&gt;</p>\n<pre><code>docker container run -it --name spring -p 8161:8161 -p 61616:61616 65e2b6f0f1529172ef8df15658347aa1898c653502f7cb507e798f12da43b81f\n</code></pre>\n<p>I started the ActiveMQ server -&gt;</p>\n<pre><code>./activemq console\n</code></pre>\n<p>It has given the following output:\n<a href=\"https://i.stack.imgur.com/VwEJN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VwEJN.png\" alt=\"ActiveMQ output\" /></a></p>\n<p>But I'm not able to see the webpage on the browser:\n<a href=\"https://i.stack.imgur.com/QVxHw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QVxHw.png\" alt=\"enter image description here\" /></a></p>\n<p>I tried running the image using -p option but the webpage didn't work.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1689357395,"post_id":76689123,"comment_id":135207335,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."},{"owner":{"account_id":29018324,"reputation":1,"user_id":22228311,"display_name":"Dipak Kumbhar"},"score":0,"creation_date":1689504018,"post_id":76689123,"comment_id":135220108,"body_markdown":"[ERROR] Failed to execute goal org.apache.maven.plugins:maven-enforcer-plugin:3.3.0:enforce (enforce-banned-dependencies) on project \n[ERROR] Rule 0: org.apache.maven.enforcer.rules.dependency.BannedDependencies failed with message:\n\n[ERROR]com.ebay.aero:aero-perfmon:jar:2.4.0\n[ERROR]com.ebayinc.platform.config:config-client-impl:jar:5.2.0\n[ERROR] org.apache.maven:maven-artifact:jar:3.6.1 &lt;--- banned via the exclude/include list","body":"[ERROR] Failed to execute goal org.apache.maven.plugins:maven-enforcer-plugin:3.3.0:enforce (enforce-banned-dependencies) on project  [ERROR] Rule 0: org.apache.maven.enforcer.rules.dependency.BannedDependencie&zwnj;&#8203;s failed with message:  [ERROR]com.ebay.aero:aero-perfmon:jar:2.4.0 [ERROR]com.ebayinc.platform.config:config-client-impl:jar:5.&zwnj;&#8203;2.0 [ERROR] org.apache.maven:maven-artifact:jar:3.6.1 &lt;--- banned via the exclude/include list"}],"owner":{"account_id":29018324,"reputation":1,"user_id":22228311,"display_name":"Dipak Kumbhar"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":13,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689348179,"creation_date":1689348179,"question_id":76689123,"body_markdown":"I am facing error when I try to run mvn version:display-dependency-updates in local system. \r\n\r\norg.apache.maven.plugin.prefix.NoPluginFoundForPrefixException: No plugin found for prefix &#39;version&#39; in the current project and in the plugin groups [org.mortbay.jetty, org.codehaus.mojo, org.sonatype.maven.plugins, org.apache.maven.plugins] \r\n\r\nI have tried below commands\r\n\r\nmvn version:display-dependency-updates\r\nmvn dependency:analyze-duplicate\r\nmvn enforcer:enforce -X","title":"mvn version:display-dependency-updates giving an error org.apache.maven.plugin.prefix.NoPluginFoundForPrefixException:","body":"<p>I am facing error when I try to run mvn version:display-dependency-updates in local system.</p>\n<p>org.apache.maven.plugin.prefix.NoPluginFoundForPrefixException: No plugin found for prefix 'version' in the current project and in the plugin groups [org.mortbay.jetty, org.codehaus.mojo, org.sonatype.maven.plugins, org.apache.maven.plugins]</p>\n<p>I have tried below commands</p>\n<p>mvn version:display-dependency-updates\nmvn dependency:analyze-duplicate\nmvn enforcer:enforce -X</p>\n"},{"tags":["java","join","apache-beam"],"answers":[{"comments":[{"owner":{"account_id":29017889,"reputation":3,"user_id":22227950,"display_name":"Alberto Martin"},"score":0,"creation_date":1689410998,"post_id":76689059,"comment_id":135212024,"body_markdown":"I&#39;ll take a look at your tips, thanks a lot Kenn! \n\nI also want to take the opportunity to ask another question: I tried using the MultiKey class as an alternative of my custom key class, resulting in the same error... What is the purpose of MultiKey if it has a nondeterministic behaviour?","body":"I&#39;ll take a look at your tips, thanks a lot Kenn!   I also want to take the opportunity to ask another question: I tried using the MultiKey class as an alternative of my custom key class, resulting in the same error... What is the purpose of MultiKey if it has a nondeterministic behaviour?"},{"owner":{"account_id":523682,"reputation":5868,"user_id":949327,"display_name":"Kenn Knowles"},"score":0,"creation_date":1689528433,"post_id":76689059,"comment_id":135222942,"body_markdown":"I don&#39;t see it when I search: https://github.com/search?q=repo%3Aapache%2Fbeam%20MultiKey&amp;type=code","body":"I don&#39;t see it when I search: <a href=\"https://github.com/search?q=repo%3Aapache%2Fbeam%20MultiKey&amp;type=code\" rel=\"nofollow noreferrer\">github.com/&hellip;</a>"},{"owner":{"account_id":29017889,"reputation":3,"user_id":22227950,"display_name":"Alberto Martin"},"score":0,"creation_date":1689582508,"post_id":76689059,"comment_id":135228383,"body_markdown":"My fault, MultiKey is from org.apache.commons.collections4.keyvalue, I suppose it is not designed to work with Apache Beam. Thanks Kenn, I have just implemented your proposed solution and worked!","body":"My fault, MultiKey is from org.apache.commons.collections4.keyvalue, I suppose it is not designed to work with Apache Beam. Thanks Kenn, I have just implemented your proposed solution and worked!"}],"tags":[],"owner":{"account_id":523682,"reputation":5868,"user_id":949327,"display_name":"Kenn Knowles"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689347717,"creation_date":1689347717,"answer_id":76689059,"question_id":76688694,"body_markdown":"Good question.\r\n\r\nA _deterministic_ coder means that if two values are equal according to Java then they both will encode to the same bytes.\r\n\r\nWhy is this important? Because the engines that run Beam pipelines group by key according to the encoded bytes, because they are often implemented in different languages and do not call the `equals` methods or anything like that.\r\n\r\nSo if you have a `nondeterministic` coder, two equal values (like two `Set` objects with the same elements) may encode to different bytes. Then they will not be grouped together.\r\n\r\nCoders are responsible for reporting whether or not they are deterministic. For example, a `SetCoder` that just uses iteration order is not deterministic. A `SetCoder` that sorts elements before it encodes them is deterministic as long as the individual elements are also encoded deterministically. By default, the `CustomCoder` class will report that [it is nondeterministic](https://github.com/apache/beam/blob/7e8c789c6979a30cd42a99ca71129abf7497a369/sdks/java/core/src/main/java/org/apache/beam/sdk/coders/CustomCoder.java#L48). You can just override this `verifyDeterministic` method.\r\n\r\nBut I recommend using Beam&#39;s `Row` type as much as possible unless you really require custom encodings. If you just make your key type a `Row` with a schema that has `id1` and `id2` fields then it will automatically know if it is deterministic based on the schema of the row.\r\n\r\nHope this helps!","title":"Fix non deterministic keyCoder in a GroupByKey error","body":"<p>Good question.</p>\n<p>A <em>deterministic</em> coder means that if two values are equal according to Java then they both will encode to the same bytes.</p>\n<p>Why is this important? Because the engines that run Beam pipelines group by key according to the encoded bytes, because they are often implemented in different languages and do not call the <code>equals</code> methods or anything like that.</p>\n<p>So if you have a <code>nondeterministic</code> coder, two equal values (like two <code>Set</code> objects with the same elements) may encode to different bytes. Then they will not be grouped together.</p>\n<p>Coders are responsible for reporting whether or not they are deterministic. For example, a <code>SetCoder</code> that just uses iteration order is not deterministic. A <code>SetCoder</code> that sorts elements before it encodes them is deterministic as long as the individual elements are also encoded deterministically. By default, the <code>CustomCoder</code> class will report that <a href=\"https://github.com/apache/beam/blob/7e8c789c6979a30cd42a99ca71129abf7497a369/sdks/java/core/src/main/java/org/apache/beam/sdk/coders/CustomCoder.java#L48\" rel=\"nofollow noreferrer\">it is nondeterministic</a>. You can just override this <code>verifyDeterministic</code> method.</p>\n<p>But I recommend using Beam's <code>Row</code> type as much as possible unless you really require custom encodings. If you just make your key type a <code>Row</code> with a schema that has <code>id1</code> and <code>id2</code> fields then it will automatically know if it is deterministic based on the schema of the row.</p>\n<p>Hope this helps!</p>\n"}],"owner":{"account_id":29017889,"reputation":3,"user_id":22227950,"display_name":"Alberto Martin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":78,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76689059,"answer_count":1,"score":0,"last_activity_date":1689347717,"creation_date":1689345233,"question_id":76688694,"body_markdown":"I want to perform a CoGroupByKey operation between two PCollections by a pair of key-values: `id1` and `id2` . I defined a custom class which includes both keys. I read that I also need to define a `Coder` to specify the byte conversion, so I did.  \r\n\r\nHowever, I keep getting this error:  \r\n  \r\n`java.lang.IllegalStateException: the keyCoder of a GroupByKey must be deterministic`\r\n\r\nAm I missing something? Non deterministic means that the keyCoder cannot always guarantee that `id1` will come before `id2` . Doesn&#39;t my `Coder` already includes the order of the keys?\r\n\r\nThanks for your time!\r\n\r\n```\r\npublic static PCollection&lt;output&gt; joinById1Id2(PCollection&lt;Foo1&gt; foo1, PCollection&lt;Foo2&gt; foo2){\r\n\r\n        PCollection&lt;KV&lt;KeysId1Id2, Foo1&gt;&gt; Foo1WithKeys = Foo1.apply(WithKeys.of(new MapFoo1ByKeysId1Id2()))\r\n             .setCoder(KvCoder.of(KeysId1Id2Coder.of(), SerializableCoder.of(Foo1.class)));\r\n\r\n        PCollection&lt;KV&lt;KeysId1Id2, Foo2&gt;&gt; Foo1WithKeys = Foo2.apply(WithKeys.of(new MapFoo2ByKeysId1Id2()))\r\n             .setCoder(KvCoder.of(KeysId1Id2Coder.of(), SerializableCoder.of(Foo2.class)));\r\n\r\n        TupleTag&lt;Foo1&gt; foo1TupleTag = new TupleTag();\r\n        TupleTag&lt;Foo2&gt; foo2TupleTag = new TupleTag();\r\n\r\n        return KeyedPCollectionTuple\r\n                .of(foo1TupleTag, Foo1WithKeys)\r\n                .and(foo2TupleTag, Foo2WithKeys)\r\n                .apply(CoGroupByKey.create())\r\n                .apply(ParDo.of(new JoinFoo1AndFoo2(Foo1TupleTag, Foo2TupleTag)));\r\n    }\r\n```\r\n\r\n```\r\nimport lombok.AllArgsConstructor;\r\nimport lombok.Data;\r\nimport lombok.NoArgsConstructor;\r\nimport lombok.experimental.SuperBuilder;\r\n\r\n@Data\r\n@SuperBuilder(toBuilder = true)\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\npublic class KeysId1Id2{\r\n    String id1;\r\n    String id2;\r\n}\r\n```\r\n\r\n```\r\npublic class KeysId1Id2Coder extends CustomCoder&lt;KeysId1Id2&gt; {\r\n    private static final StringUtf8Coder STRING_CODER = StringUtf8Coder.of();\r\n\r\n    public static KeysId1Id2Coder.of() {\r\n        return new KeysId1Id2Coder();\r\n    }\r\n\r\n    @Override\r\n    public void encode(KeysId1Id2 value, OutputStream outStream) throws IOException {\r\n        STRING_CODER.encode(value.getId1(), outStream);\r\n        STRING_CODER.encode(value.getId2(), outStream);\r\n    }\r\n\r\n    @Override\r\n    public KeysId1Id2 decode(InputStream inStream) throws IOException {\r\n        String id1 = STRING_CODER.decode(inStream);\r\n        String id2 = STRING_CODER.decode(inStream);\r\n        return new KeysId1Id2(id1, id2);\r\n    }\r\n}\r\n```\r\n\r\n```\r\npublic class MapFoo1ByKeysId1Id2 extends SimpleFunction&lt;Foo1, KeysId1Id2&gt; {\r\n    @Override\r\n    public MapFoo1ByKeysId1Id2 apply(Foo1 line) {\r\n\r\n        return new KeysId1Id2(line.getId1(), line.getId2());\r\n    }\r\n}\r\n\r\npublic class MapFoo2ByKeysId1Id2 extends SimpleFunction&lt;Foo2, KeysId1Id2&gt; {\r\n    @Override\r\n    public MapFoo2ByKeysId1Id2 apply(Foo2 line) {\r\n\r\n        return new KeysId1Id2(line.getId1(), line.getId2());\r\n    }\r\n}\r\n```","title":"Fix non deterministic keyCoder in a GroupByKey error","body":"<p>I want to perform a CoGroupByKey operation between two PCollections by a pair of key-values: <code>id1</code> and <code>id2</code> . I defined a custom class which includes both keys. I read that I also need to define a <code>Coder</code> to specify the byte conversion, so I did.</p>\n<p>However, I keep getting this error:</p>\n<p><code>java.lang.IllegalStateException: the keyCoder of a GroupByKey must be deterministic</code></p>\n<p>Am I missing something? Non deterministic means that the keyCoder cannot always guarantee that <code>id1</code> will come before <code>id2</code> . Doesn't my <code>Coder</code> already includes the order of the keys?</p>\n<p>Thanks for your time!</p>\n<pre><code>public static PCollection&lt;output&gt; joinById1Id2(PCollection&lt;Foo1&gt; foo1, PCollection&lt;Foo2&gt; foo2){\n\n        PCollection&lt;KV&lt;KeysId1Id2, Foo1&gt;&gt; Foo1WithKeys = Foo1.apply(WithKeys.of(new MapFoo1ByKeysId1Id2()))\n             .setCoder(KvCoder.of(KeysId1Id2Coder.of(), SerializableCoder.of(Foo1.class)));\n\n        PCollection&lt;KV&lt;KeysId1Id2, Foo2&gt;&gt; Foo1WithKeys = Foo2.apply(WithKeys.of(new MapFoo2ByKeysId1Id2()))\n             .setCoder(KvCoder.of(KeysId1Id2Coder.of(), SerializableCoder.of(Foo2.class)));\n\n        TupleTag&lt;Foo1&gt; foo1TupleTag = new TupleTag();\n        TupleTag&lt;Foo2&gt; foo2TupleTag = new TupleTag();\n\n        return KeyedPCollectionTuple\n                .of(foo1TupleTag, Foo1WithKeys)\n                .and(foo2TupleTag, Foo2WithKeys)\n                .apply(CoGroupByKey.create())\n                .apply(ParDo.of(new JoinFoo1AndFoo2(Foo1TupleTag, Foo2TupleTag)));\n    }\n</code></pre>\n<pre><code>import lombok.AllArgsConstructor;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\nimport lombok.experimental.SuperBuilder;\n\n@Data\n@SuperBuilder(toBuilder = true)\n@NoArgsConstructor\n@AllArgsConstructor\npublic class KeysId1Id2{\n    String id1;\n    String id2;\n}\n</code></pre>\n<pre><code>public class KeysId1Id2Coder extends CustomCoder&lt;KeysId1Id2&gt; {\n    private static final StringUtf8Coder STRING_CODER = StringUtf8Coder.of();\n\n    public static KeysId1Id2Coder.of() {\n        return new KeysId1Id2Coder();\n    }\n\n    @Override\n    public void encode(KeysId1Id2 value, OutputStream outStream) throws IOException {\n        STRING_CODER.encode(value.getId1(), outStream);\n        STRING_CODER.encode(value.getId2(), outStream);\n    }\n\n    @Override\n    public KeysId1Id2 decode(InputStream inStream) throws IOException {\n        String id1 = STRING_CODER.decode(inStream);\n        String id2 = STRING_CODER.decode(inStream);\n        return new KeysId1Id2(id1, id2);\n    }\n}\n</code></pre>\n<pre><code>public class MapFoo1ByKeysId1Id2 extends SimpleFunction&lt;Foo1, KeysId1Id2&gt; {\n    @Override\n    public MapFoo1ByKeysId1Id2 apply(Foo1 line) {\n\n        return new KeysId1Id2(line.getId1(), line.getId2());\n    }\n}\n\npublic class MapFoo2ByKeysId1Id2 extends SimpleFunction&lt;Foo2, KeysId1Id2&gt; {\n    @Override\n    public MapFoo2ByKeysId1Id2 apply(Foo2 line) {\n\n        return new KeysId1Id2(line.getId1(), line.getId2());\n    }\n}\n</code></pre>\n"},{"tags":["java","spring-boot","eclipse","kotlin"],"comments":[{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1689591711,"post_id":76689027,"comment_id":135230281,"body_markdown":"Don&#39;t trust Jetbrains, use [_Enhanced Kotlin for Eclipse_](https://github.com/bvfalcon/kotlin-eclipse-2023) instead.","body":"Don&#39;t trust Jetbrains, use <a href=\"https://github.com/bvfalcon/kotlin-eclipse-2023\" rel=\"nofollow noreferrer\"><i>Enhanced Kotlin for Eclipse</i></a> instead."},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1689663651,"post_id":76689027,"comment_id":135241539,"body_markdown":"@Thorbj&#248;rnRavnAndersen Be smarter by avoiding the vendor lock-in trap. Please respect that this question is about Eclipse and that software recommendations and advertising commercial products are off-topic on Stack Overflow.","body":"@Thorbj&#248;rnRavnAndersen Be smarter by avoiding the vendor lock-in trap. Please respect that this question is about Eclipse and that software recommendations and advertising commercial products are off-topic on Stack Overflow."},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1689671571,"post_id":76689027,"comment_id":135243274,"body_markdown":"@Thorbj&#248;rnRavnAndersen Software recommendations are generally off-topic on Stack Overflow. So please stop bothering others with that. Your personal favorite tool might be fine for your needs, but it doesn&#39;t even work for mine. This question is about a different tool. Yes, maybe you are right and Jetbrains lied, but there is a pretty well maintained fork for more than three years now.","body":"@Thorbj&#248;rnRavnAndersen Software recommendations are generally off-topic on Stack Overflow. So please stop bothering others with that. Your personal favorite tool might be fine for your needs, but it doesn&#39;t even work for mine. This question is about a different tool. Yes, maybe you are right and Jetbrains lied, but there is a pretty well maintained fork for more than three years now."},{"owner":{"account_id":3248793,"reputation":880,"user_id":2739637,"display_name":"Mwongera808"},"score":1,"creation_date":1689889356,"post_id":76689027,"comment_id":135281206,"body_markdown":"Guys I gave up on this. Will just continue to use good old Java. Thanks for your comments.","body":"Guys I gave up on this. Will just continue to use good old Java. Thanks for your comments."}],"owner":{"account_id":3248793,"reputation":880,"user_id":2739637,"display_name":"Mwongera808"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689347533,"creation_date":1689347533,"question_id":76689027,"body_markdown":"I have been trying to launch a spring boot app written in kotlin on Eclipse IDE(latest) but to no avail.\r\n\r\nJava fails to find the main class.\r\n\r\n\r\n\r\nBelow is my configuration file: \r\n[![enter image description here](https://i.stack.imgur.com/cJaXh.png)](https://i.stack.imgur.com/cJaXh.png)\r\n\r\nThis is the error i&#39;m getting:\r\n[![enter image description here](https://i.stack.imgur.com/FLFTc.png)](https://i.stack.imgur.com/FLFTc.png)\r\n\r\nI have tried a number of solutions:\r\n1. Add &#39;Kt&#39; on the build path. Failed\r\n2. Rollback the kotlin eclipse plugin to older versions. - Jetbrains deleted old versions\r\n3. Tried to manually update the build path: - Java cant find the main class\r\n[![enter image description here](https://i.stack.imgur.com/wI7p4.png)](https://i.stack.imgur.com/wI7p4.png)\r\n\r\nAny help would be appreciated.","title":"Error Launching Kotlin spring boot application in Eclipse","body":"<p>I have been trying to launch a spring boot app written in kotlin on Eclipse IDE(latest) but to no avail.</p>\n<p>Java fails to find the main class.</p>\n<p>Below is my configuration file:\n<a href=\"https://i.stack.imgur.com/cJaXh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cJaXh.png\" alt=\"enter image description here\" /></a></p>\n<p>This is the error i'm getting:\n<a href=\"https://i.stack.imgur.com/FLFTc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FLFTc.png\" alt=\"enter image description here\" /></a></p>\n<p>I have tried a number of solutions:</p>\n<ol>\n<li>Add 'Kt' on the build path. Failed</li>\n<li>Rollback the kotlin eclipse plugin to older versions. - Jetbrains deleted old versions</li>\n<li>Tried to manually update the build path: - Java cant find the main class\n<a href=\"https://i.stack.imgur.com/wI7p4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wI7p4.png\" alt=\"enter image description here\" /></a></li>\n</ol>\n<p>Any help would be appreciated.</p>\n"},{"tags":["java","elasticsearch","kibana"],"comments":[{"owner":{"account_id":24908380,"reputation":3091,"user_id":18778181,"display_name":"rabbitbr"},"score":0,"creation_date":1689359707,"post_id":76689006,"comment_id":135207741,"body_markdown":"I believe that you have documents duplicate.","body":"I believe that you have documents duplicate."},{"owner":{"account_id":16213808,"reputation":1,"user_id":11707061,"display_name":"Mik"},"score":0,"creation_date":1689411732,"post_id":76689006,"comment_id":135212092,"body_markdown":"@rabbitbr No the documents coming in response have same id. also, i cross checked on kibana","body":"@rabbitbr No the documents coming in response have same id. also, i cross checked on kibana"}],"owner":{"account_id":16213808,"reputation":1,"user_id":11707061,"display_name":"Mik"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":99,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689347419,"creation_date":1689347419,"question_id":76689006,"body_markdown":"I am using Elasticsearch Java API Client but getting duplicate documents in the response.\r\n\r\nBasically, I am trying to fetch documents from MyDocument index, which are in ON mode and have a certain tag from elastic. But the query returns duplicate results. I am getting the same documents twice. I have searched for solution on web but not able to get a solution for this. What is wrong with the below query?\r\nMost of the results on stack overflow shows solutions for High Level REST Client which is now deprecated.\r\n\r\n\r\n\r\n```\r\n\t\tSearchResponse&lt;MyDocument&gt; response = elasticsearchClient.search(fn -&gt; fn\r\n\t\t\t\t.query(query -&gt; query\r\n\t\t\t\t\t\t.bool(bq -&gt; bq\r\n\t\t\t\t\t\t\t\t.must(\r\n\t\t\t\t\t\t\t\t\tList.of(\r\n\t\t\t\t\t\t        \t\t    new Query.Builder()\r\n\t\t\t\t\t\t\t    \t\t    .term(t -&gt; t\r\n\t\t\t\t\t\t\t        \t\t        .field(mode.keyword)\r\n\t\t\t\t\t\t\t        \t\t        .value(&quot;ON&quot;)\r\n\t\t\t\t\t\t\t        \t\t    ).build()\r\n\t\t\t\t\t\t\t    \t\t    ,new Query.Builder()\r\n\t\t\t\t\t\t\t    \t\t    .matchPhrase(phrase -&gt; phrase\r\n\t\t\t\t\t\t\t        \t\t        .field(&quot;tags&quot;)                    \r\n\t\t\t\t\t\t\t        \t\t        .query(&quot;My tag&quot;)\r\n\t\t\t\t\t\t\t        \t\t    )\r\n\t\t\t\t\t\t\t        \t\t    .build()\r\n\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t))\r\n\t\t\t\t, MyDocument.class);\r\n```\r\n\r\n\r\n\r\n","title":"ElasticSearch Java API Client returning same document multiple times in response","body":"<p>I am using Elasticsearch Java API Client but getting duplicate documents in the response.</p>\n<p>Basically, I am trying to fetch documents from MyDocument index, which are in ON mode and have a certain tag from elastic. But the query returns duplicate results. I am getting the same documents twice. I have searched for solution on web but not able to get a solution for this. What is wrong with the below query?\nMost of the results on stack overflow shows solutions for High Level REST Client which is now deprecated.</p>\n<pre><code>        SearchResponse&lt;MyDocument&gt; response = elasticsearchClient.search(fn -&gt; fn\n                .query(query -&gt; query\n                        .bool(bq -&gt; bq\n                                .must(\n                                    List.of(\n                                            new Query.Builder()\n                                            .term(t -&gt; t\n                                                    .field(mode.keyword)\n                                                    .value(&quot;ON&quot;)\n                                                ).build()\n                                            ,new Query.Builder()\n                                            .matchPhrase(phrase -&gt; phrase\n                                                    .field(&quot;tags&quot;)                    \n                                                    .query(&quot;My tag&quot;)\n                                                )\n                                                .build()\n                                            )\n                                )\n                        ))\n                , MyDocument.class);\n</code></pre>\n"},{"tags":["java","list","variables","reference","reference-counting"],"comments":[{"owner":{"account_id":1960454,"reputation":44539,"user_id":1762224,"accept_rate":61,"display_name":"Mr. Polywhirl"},"score":1,"creation_date":1689343891,"post_id":76688476,"comment_id":135204357,"body_markdown":"Because each index of the array (memory address) is its own pointer back to the `a` reference. You should take a look at pointers in the C language to get some historical background. Java hides the pointer logic.","body":"Because each index of the array (memory address) is its own pointer back to the <code>a</code> reference. You should take a look at pointers in the C language to get some historical background. Java hides the pointer logic."},{"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":2,"creation_date":1689343937,"post_id":76688476,"comment_id":135204375,"body_markdown":"&quot;variables referencing&quot;? Two: `a` and `b`. How many *references* are there to `Car` objects? 6: `a`, `b`, `cars[0]`, `cars[1]`, `cars[2]` and `cars[3]`. References can exist in local variables, fields, as array members or as method parameters.","body":"&quot;variables referencing&quot;? Two: <code>a</code> and <code>b</code>. How many <i>references</i> are there to <code>Car</code> objects? 6: <code>a</code>, <code>b</code>, <code>cars[0]</code>, <code>cars[1]</code>, <code>cars[2]</code> and <code>cars[3]</code>. References can exist in local variables, fields, as array members or as method parameters."},{"owner":{"account_id":29017768,"reputation":1,"user_id":22227844,"display_name":"ImNotARobot"},"score":0,"creation_date":1689344427,"post_id":76688476,"comment_id":135204496,"body_markdown":"Are cars[0],cars[1],cars[2],cars[3] reference to &quot;a&quot;, not to Object Car() ? \ncars[0-3]--&gt;a--&gt;Car()&lt;--b","body":"Are cars[0],cars[1],cars[2],cars[3] reference to &quot;a&quot;, not to Object Car() ?  cars[0-3]--&gt;a--&gt;Car()&lt;--b"},{"owner":{"account_id":10121318,"reputation":421,"user_id":7478145,"display_name":"elgsylvain85"},"score":0,"creation_date":1689344677,"post_id":76688476,"comment_id":135204553,"body_markdown":"Please note that in Java, Array is completly different with List. Inside List you can add/remove item but Array cannot anymore change length after because each index is its own pointer to new reference like saying @Mr.Polywhirl","body":"Please note that in Java, Array is completly different with List. Inside List you can add/remove item but Array cannot anymore change length after because each index is its own pointer to new reference like saying @Mr.Polywhirl"},{"owner":{"display_name":"user6073886"},"score":0,"creation_date":1689344807,"post_id":76688476,"comment_id":135204590,"body_markdown":"@ImNotARobot if you reassign / change `a` after you initialize the `{a,a,a,a}` like `a = new Car(&quot;BMW&quot;);` this will not have any effect on your array and the array elements will still point to the old Car objects and not the new &quot;BMW&quot;. That should show you that all of those are separate reference variables. (This is because java [is pass by value](https://stackoverflow.com/questions/40480/is-java-pass-by-reference-or-pass-by-value))","body":"@ImNotARobot if you reassign / change <code>a</code> after you initialize the <code>{a,a,a,a}</code> like <code>a = new Car(&quot;BMW&quot;);</code> this will not have any effect on your array and the array elements will still point to the old Car objects and not the new &quot;BMW&quot;. That should show you that all of those are separate reference variables. (This is because java <a href=\"https://stackoverflow.com/questions/40480/is-java-pass-by-reference-or-pass-by-value\">is pass by value</a>)"}],"answers":[{"comments":[{"owner":{"account_id":29017768,"reputation":1,"user_id":22227844,"display_name":"ImNotARobot"},"score":0,"creation_date":1689347545,"post_id":76688604,"comment_id":135205294,"body_markdown":"Clarified the answer with the code. It feels like I can&#39;t understand one thing in any way and it ruins all my logic (","body":"Clarified the answer with the code. It feels like I can&#39;t understand one thing in any way and it ruins all my logic ("},{"owner":{"display_name":"user6073886"},"score":0,"creation_date":1689348999,"post_id":76688604,"comment_id":135205630,"body_markdown":"@ImNotARobot using Ashs diagram above think of it like that: Doing something like `a.model=&quot;KIA&quot;` you are changing the existing Car object (The car square). And because all References point to that one single object that change will seen in all those places. But when you do `a = new Car()` you are creating a new Car object and point `a` to that. So in above diagram you would create a second &quot;Car&quot; square, then remove the arrow from a to the old car object and connect it to the new object. But of course all the other references / arrows still point at the old object","body":"@ImNotARobot using Ashs diagram above think of it like that: Doing something like <code>a.model=&quot;KIA&quot;</code> you are changing the existing Car object (The car square). And because all References point to that one single object that change will seen in all those places. But when you do <code>a = new Car()</code> you are creating a new Car object and point <code>a</code> to that. So in above diagram you would create a second &quot;Car&quot; square, then remove the arrow from a to the old car object and connect it to the new object. But of course all the other references / arrows still point at the old object"}],"tags":[],"owner":{"account_id":4290427,"reputation":101,"user_id":9429560,"display_name":"Ash"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689345051,"creation_date":1689344620,"answer_id":76688604,"question_id":76688476,"body_markdown":"I&#39;ve added line numbers to your code to ease explaining what happens. This answer combines what Mr. Polywhirl and Joachim Sauer said in comments.\r\n\r\nFor this type of exercises (for example on an OCP exam) it can also help to draw out what happens using boxes and arrows.\r\n\r\n    1 class Car {}\r\n    2 \r\n    3 class Example {\r\n    4     public static void main (String[] args){\r\n    5         a=new Car();\r\n    6         b=new Car();\r\n    7         Car[] cars ={a,a,a,a};\r\n    8     }\r\n    9 }\r\n\r\nProgram execution starts on line 4. On line 5 the first reference to Car is made and stored in variable a. On line 6 a second reference to Car is made and stored in variable b.\r\n\r\nOn line 7, the Cars[] array is created, which is a new object containing the value of a four times. This creates four new references to Car stored in cars[0] through cars[3].\r\n\r\nDrawn out it looks like this (corrected, based on OH GOD SPIDER&#39;s comment):\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/HWpS6.png","title":"How to count references in java correctly?","body":"<p>I've added line numbers to your code to ease explaining what happens. This answer combines what Mr. Polywhirl and Joachim Sauer said in comments.</p>\n<p>For this type of exercises (for example on an OCP exam) it can also help to draw out what happens using boxes and arrows.</p>\n<pre><code>1 class Car {}\n2 \n3 class Example {\n4     public static void main (String[] args){\n5         a=new Car();\n6         b=new Car();\n7         Car[] cars ={a,a,a,a};\n8     }\n9 }\n</code></pre>\n<p>Program execution starts on line 4. On line 5 the first reference to Car is made and stored in variable a. On line 6 a second reference to Car is made and stored in variable b.</p>\n<p>On line 7, the Cars[] array is created, which is a new object containing the value of a four times. This creates four new references to Car stored in cars[0] through cars[3].</p>\n<p>Drawn out it looks like this (corrected, based on OH GOD SPIDER's comment):</p>\n<p><a href=\"https://i.stack.imgur.com/HWpS6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HWpS6.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":29017768,"reputation":1,"user_id":22227844,"display_name":"ImNotARobot"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":88,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689347380,"creation_date":1689343691,"question_id":76688476,"body_markdown":"I have difficulties understanding how to correctly count a reference variables.\r\n\r\nExample (adopted from some book for java learning):\r\n\r\n```java\r\nclass Car {\r\n}\r\n\r\nclass Example {\r\n    public static void main(String[] args) {\r\n        a = new Car();\r\n        b = new Car();\r\n        Car[] cars = {a,a,a,a};\r\n    }\r\n}\r\n```\r\n\r\nHow many reference variables does class Car() have (variables referring to it)?\r\n\r\nMy answer is 2. There is only two variables &quot;a&quot; and &quot;b&quot; referring to object Car().\r\nBut correct answer is 6.\r\nWhy are variables a counted as separate references inside the list? Isn&#39;t it same reference &quot;a&quot;?","title":"How to count references in java correctly?","body":"<p>I have difficulties understanding how to correctly count a reference variables.</p>\n<p>Example (adopted from some book for java learning):</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Car {\n}\n\nclass Example {\n    public static void main(String[] args) {\n        a = new Car();\n        b = new Car();\n        Car[] cars = {a,a,a,a};\n    }\n}\n</code></pre>\n<p>How many reference variables does class Car() have (variables referring to it)?</p>\n<p>My answer is 2. There is only two variables &quot;a&quot; and &quot;b&quot; referring to object Car().\nBut correct answer is 6.\nWhy are variables a counted as separate references inside the list? Isn't it same reference &quot;a&quot;?</p>\n"},{"tags":["java","spring"],"answers":[{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1689750855,"post_id":76688739,"comment_id":135255716,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/76688739/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":20486450,"reputation":1,"user_id":15033501,"display_name":"Brian Anderson"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689345600,"creation_date":1689345600,"answer_id":76688739,"question_id":76688618,"body_markdown":"This question seems similar to https://stackoverflow.com/questions/60765875/java-spring-failed-to-convert-property-value-of-type-java-lang-string-to-requ\r\n\r\nPerhaps try changing how you&#39;re sending the body by changing\r\nvar response = service.send(model);\r\n\r\nTo more closely resemble the json format something like:\r\n{ &quot;paramsMap&quot;: { &quot;Key1&quot;:&quot;Value1&quot;, &quot;Key2&quot;:&quot;Value2&quot; } }: \r\n","title":"My request is not able to accept a Map data object and throws 400 bad request","body":"<p>This question seems similar to <a href=\"https://stackoverflow.com/questions/60765875/java-spring-failed-to-convert-property-value-of-type-java-lang-string-to-requ\">Java_Spring: Failed to convert property value of type &#39;java.lang.String&#39; to required type &#39;java.util.Map&#39; for property &#39;paramsMap&#39;</a></p>\n<p>Perhaps try changing how you're sending the body by changing\nvar response = service.send(model);</p>\n<p>To more closely resemble the json format something like:\n{ &quot;paramsMap&quot;: { &quot;Key1&quot;:&quot;Value1&quot;, &quot;Key2&quot;:&quot;Value2&quot; } }:</p>\n"},{"comments":[{"owner":{"account_id":28107709,"reputation":111,"user_id":21476047,"display_name":"user21476047"},"score":0,"creation_date":1689346794,"post_id":76688883,"comment_id":135205131,"body_markdown":"I can&#39;t use RequestPart because I need to send a file within the api call","body":"I can&#39;t use RequestPart because I need to send a file within the api call"},{"owner":{"account_id":10121318,"reputation":421,"user_id":7478145,"display_name":"elgsylvain85"},"score":0,"creation_date":1689347116,"post_id":76688883,"comment_id":135205203,"body_markdown":"&quot;@RequestPart(&quot;file&quot;) MultipartFile file&quot; /  &quot;@RequestPart(&quot;files&quot;) List&lt;MultipartFile&gt; files&quot; or cast item from your &quot;Map&lt;String, Object&gt; data&quot;. You can also debug your request to explore &quot;data&quot;","body":"&quot;@RequestPart(&quot;file&quot;) MultipartFile file&quot; /  &quot;@RequestPart(&quot;files&quot;) List&lt;MultipartFile&gt; files&quot; or cast item from your &quot;Map&lt;String, Object&gt; data&quot;. You can also debug your request to explore &quot;data&quot;"}],"tags":[],"owner":{"account_id":10121318,"reputation":421,"user_id":7478145,"display_name":"elgsylvain85"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689346619,"creation_date":1689346619,"answer_id":76688883,"question_id":76688618,"body_markdown":"Try with @RequestPart annotation : \r\n\r\n    @PostMapping(value = &quot;/send&quot;, produces = { MediaType.APPLICATION_JSON_VALUE }, consumes = {MediaType.MULTIPART_FORM_DATA_VALUE })\r\n    public ResponseEntity&lt;Response&gt; send(@RequestPart Map&lt;String, Object&gt; data){}\r\n\r\nOr if you can consume json then :\r\n\r\n\r\n    @PostMapping(value = &quot;/send&quot;, produces = { MediaType.APPLICATION_JSON_VALUE }, consumes = {MediaType.APPLICATION_JSON_VALUE })\r\n    public ResponseEntity&lt;Response&gt; send(@RequestBody RequestModelDto data){}","title":"My request is not able to accept a Map data object and throws 400 bad request","body":"<p>Try with @RequestPart annotation :</p>\n<pre><code>@PostMapping(value = &quot;/send&quot;, produces = { MediaType.APPLICATION_JSON_VALUE }, consumes = {MediaType.MULTIPART_FORM_DATA_VALUE })\npublic ResponseEntity&lt;Response&gt; send(@RequestPart Map&lt;String, Object&gt; data){}\n</code></pre>\n<p>Or if you can consume json then :</p>\n<pre><code>@PostMapping(value = &quot;/send&quot;, produces = { MediaType.APPLICATION_JSON_VALUE }, consumes = {MediaType.APPLICATION_JSON_VALUE })\npublic ResponseEntity&lt;Response&gt; send(@RequestBody RequestModelDto data){}\n</code></pre>\n"}],"owner":{"account_id":28107709,"reputation":111,"user_id":21476047,"display_name":"user21476047"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1689347265,"creation_date":1689344675,"question_id":76688618,"body_markdown":"My `Map&lt;String, Object&gt;` parameter is throwing a `400 bad request error` with the following message, `Cannot convert value of type &#39;java.lang.String&#39; to required type &#39;java.util.Map&#39; for property &#39;data&#39;` and I am not sure why?\r\n\r\nIn my postman, I go to `Body` then `form-data` and I place `data` under `Key` then I place the following value `{ &quot;key&quot;: &quot;value&quot; }`.\r\n\r\nMy model with the request parameter and controller:\r\n\r\n    public class RequestModel {\r\n\r\n       @Schema(type = &quot;object&quot;)\r\n       private Map&lt;String, Object&gt; data;\r\n\r\n       private MultipartFile file;\r\n       private String requestId;\r\n       private String date;\r\n\r\n    }\r\n\r\n    public class Controller {\r\n       \r\n       @PostMapping(value = &quot;/send&quot;, produces = { MediaType.APPLICATION_JSON_VALUE }, consumes = {\r\n            MediaType.MULTIPART_FORM_DATA_VALUE })\r\n       public ResponseEntity&lt;Response&gt; send(@ModelAttribute final RequestModel model) {\r\n\t      var response = service.send(model);\r\n\t      return ResponseEntity.ok(response);\r\n       }\r\n\r\n    }\r\n\r\n---\r\n\r\nAll my other parameters is able to get pass fine, except for the `Map`.\r\n","title":"My request is not able to accept a Map data object and throws 400 bad request","body":"<p>My <code>Map&lt;String, Object&gt;</code> parameter is throwing a <code>400 bad request error</code> with the following message, <code>Cannot convert value of type 'java.lang.String' to required type 'java.util.Map' for property 'data'</code> and I am not sure why?</p>\n<p>In my postman, I go to <code>Body</code> then <code>form-data</code> and I place <code>data</code> under <code>Key</code> then I place the following value <code>{ &quot;key&quot;: &quot;value&quot; }</code>.</p>\n<p>My model with the request parameter and controller:</p>\n<pre><code>public class RequestModel {\n\n   @Schema(type = &quot;object&quot;)\n   private Map&lt;String, Object&gt; data;\n\n   private MultipartFile file;\n   private String requestId;\n   private String date;\n\n}\n\npublic class Controller {\n   \n   @PostMapping(value = &quot;/send&quot;, produces = { MediaType.APPLICATION_JSON_VALUE }, consumes = {\n        MediaType.MULTIPART_FORM_DATA_VALUE })\n   public ResponseEntity&lt;Response&gt; send(@ModelAttribute final RequestModel model) {\n      var response = service.send(model);\n      return ResponseEntity.ok(response);\n   }\n\n}\n</code></pre>\n<hr />\n<p>All my other parameters is able to get pass fine, except for the <code>Map</code>.</p>\n"},{"tags":["java","gzip","ioexception","gzipstream","gzipinputstream"],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689347219,"creation_date":1689347219,"answer_id":76688976,"question_id":76688738,"body_markdown":"&gt; I have a feeling that this might be related to encoding.\r\n\r\nThat&#39;s not even relevant.\r\n\r\nmemory and disk space (and network pipes and just about every other low-level comms channel a computer system offers) consists of bytes. That means you can send a sequence of values, each value between 0 and 255.\r\n\r\nText is something quite different. There are vastly more than 255 characters one could feasibly want to send, so, how do we do that?\r\n\r\n__That is what encoding is__: An algorithm that turns a sequence of characters into a sequence of bytes. And vice versa.\r\n\r\nThe US-ASCII protocol, for example, maps byte values 0-31 to certain control concepts (Such as &#39;newline&#39; or &#39;tab&#39;), 32-126 to certain symbols (such as &#39;A&#39;) and decrees that __no other symbols can exist__ (and further decrees that the bytestream will simply never contain any values above 127 - the top bit is always 0). If you want to send an &#233;, tough - you can&#39;t. It&#39;s not one of the 94 symbols that the US-ASCII spec defines. The advantage is, it&#39;s a very simple encoding with a few nice properties (such as: The length of the data in bytes is more or less identical to the length of the data in characters).\r\n\r\nThe UTF-8 protocol lets you send any unicode character, at the cost of taking anywhere between 1 and 5 bytes to encode a single character. And so on.\r\n\r\nPoint is, &quot;encoding&quot; is __fundamentally__ a property of __text__.\r\n\r\nGZipped data isn&#39;t. text, therefore &#39;what encoding is this gzip file&#39; is about as sensical a question as &#39;what color is the taste of apple pie&#39;. The question is a non-sequitur.\r\n\r\n&gt; ```\r\n&gt; } catch (IOException ex) {\r\n&gt;      Base.print(ex.getMessage(), Base.TEXT_TYPE.ERROR);\r\n&gt; }\r\n&gt; ```\r\n\r\nThis isn&#39;t good. An exception consists of in basis 5 useful properties:\r\n\r\n* Its type (For example, `NoSuchFileException`)\r\n* Its message (For example, &#39;disk unmounted&#39;)\r\n* Its causal chain (sometimes an exception is caused by another and the cause is often more useful. And that cause can itself have a cause, and so on).\r\n* Its stack trace, which tells you where in the code the problem occurs.\r\n* Its suppressed exceptions (this is rarely useful).\r\n* Exceptions are java types and can have more info. For example, SQLException contains the SQL-side &#39;error state&#39; number which can be useful.\r\n\r\nYou&#39;re tossing all that in the garbage, except for &#39;the message&#39;, which is generally defined as not being meaningful without _also_ having the context of the exception type.\r\n\r\nThis code boils down to the following error handling scheme:\r\n\r\n* An error has occurred.\r\n* Take the top-level explanation of what the problem is and __chuck it in the garbage__. (ditch the exception&#39;s type)\r\n* Take the relevant details about what went wrong under the hood and __rip it to pieces__. (ditch the causal chain).\r\n* Take the info about where the problem occurred in the code so you know as developer where to go to fix it, and __destroy it__. (ditch the stack trace).\r\n* Print the &#39;middle-level&#39; explanation, which is likely a non-sensical string without all the other context, to somewhere.\r\n* Now __continue as if nothing was wrong__.\r\n\r\nNone of this is right.\r\n\r\nAnd that last bullet can easily explain why you are seeing all zeroes: If the exception does occur you print something and just keep on going. A half-baked truncated gzip file (which would cause &#39;not in gzip format&#39; when you try to read the half-baked product) can of course occur if you ignore an error that occurs halfway through the process.\r\n\r\nThe code as pasted will not result in all-zeroes unless your JVM or kernel is corrupted, or you&#39;re not running this code, or you&#39;re editing the file later on, or the storage layer is corrupted (disk failure), or something similarly exotic.\r\n\r\nHence, keeping a better eye out on the error is the first thing to check. It is very very rare that _writing_ to a disk is completely fine (no errors at all), but when reading, due to disk corruption, you get all zeroes back. Writing to disk, getting an error, and then having the half-baked remains of this process read back as all zeroes is still rare but not nearly as rare.\r\n\r\n","title":"Failing GZIPInputStream","body":"<blockquote>\n<p>I have a feeling that this might be related to encoding.</p>\n</blockquote>\n<p>That's not even relevant.</p>\n<p>memory and disk space (and network pipes and just about every other low-level comms channel a computer system offers) consists of bytes. That means you can send a sequence of values, each value between 0 and 255.</p>\n<p>Text is something quite different. There are vastly more than 255 characters one could feasibly want to send, so, how do we do that?</p>\n<p><strong>That is what encoding is</strong>: An algorithm that turns a sequence of characters into a sequence of bytes. And vice versa.</p>\n<p>The US-ASCII protocol, for example, maps byte values 0-31 to certain control concepts (Such as 'newline' or 'tab'), 32-126 to certain symbols (such as 'A') and decrees that <strong>no other symbols can exist</strong> (and further decrees that the bytestream will simply never contain any values above 127 - the top bit is always 0). If you want to send an é, tough - you can't. It's not one of the 94 symbols that the US-ASCII spec defines. The advantage is, it's a very simple encoding with a few nice properties (such as: The length of the data in bytes is more or less identical to the length of the data in characters).</p>\n<p>The UTF-8 protocol lets you send any unicode character, at the cost of taking anywhere between 1 and 5 bytes to encode a single character. And so on.</p>\n<p>Point is, &quot;encoding&quot; is <strong>fundamentally</strong> a property of <strong>text</strong>.</p>\n<p>GZipped data isn't. text, therefore 'what encoding is this gzip file' is about as sensical a question as 'what color is the taste of apple pie'. The question is a non-sequitur.</p>\n<blockquote>\n<pre><code>} catch (IOException ex) {\n     Base.print(ex.getMessage(), Base.TEXT_TYPE.ERROR);\n}\n</code></pre>\n</blockquote>\n<p>This isn't good. An exception consists of in basis 5 useful properties:</p>\n<ul>\n<li>Its type (For example, <code>NoSuchFileException</code>)</li>\n<li>Its message (For example, 'disk unmounted')</li>\n<li>Its causal chain (sometimes an exception is caused by another and the cause is often more useful. And that cause can itself have a cause, and so on).</li>\n<li>Its stack trace, which tells you where in the code the problem occurs.</li>\n<li>Its suppressed exceptions (this is rarely useful).</li>\n<li>Exceptions are java types and can have more info. For example, SQLException contains the SQL-side 'error state' number which can be useful.</li>\n</ul>\n<p>You're tossing all that in the garbage, except for 'the message', which is generally defined as not being meaningful without <em>also</em> having the context of the exception type.</p>\n<p>This code boils down to the following error handling scheme:</p>\n<ul>\n<li>An error has occurred.</li>\n<li>Take the top-level explanation of what the problem is and <strong>chuck it in the garbage</strong>. (ditch the exception's type)</li>\n<li>Take the relevant details about what went wrong under the hood and <strong>rip it to pieces</strong>. (ditch the causal chain).</li>\n<li>Take the info about where the problem occurred in the code so you know as developer where to go to fix it, and <strong>destroy it</strong>. (ditch the stack trace).</li>\n<li>Print the 'middle-level' explanation, which is likely a non-sensical string without all the other context, to somewhere.</li>\n<li>Now <strong>continue as if nothing was wrong</strong>.</li>\n</ul>\n<p>None of this is right.</p>\n<p>And that last bullet can easily explain why you are seeing all zeroes: If the exception does occur you print something and just keep on going. A half-baked truncated gzip file (which would cause 'not in gzip format' when you try to read the half-baked product) can of course occur if you ignore an error that occurs halfway through the process.</p>\n<p>The code as pasted will not result in all-zeroes unless your JVM or kernel is corrupted, or you're not running this code, or you're editing the file later on, or the storage layer is corrupted (disk failure), or something similarly exotic.</p>\n<p>Hence, keeping a better eye out on the error is the first thing to check. It is very very rare that <em>writing</em> to a disk is completely fine (no errors at all), but when reading, due to disk corruption, you get all zeroes back. Writing to disk, getting an error, and then having the half-baked remains of this process read back as all zeroes is still rare but not nearly as rare.</p>\n"}],"owner":{"account_id":14258107,"reputation":3,"user_id":10299751,"display_name":"Obsyd"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76688976,"answer_count":1,"score":0,"last_activity_date":1689347219,"creation_date":1689345584,"question_id":76688738,"body_markdown":"My Java app writes out a gzip compressed object to a file using try-with resources statement. The object is a very basic with a couple of primitive fields and an ArrayList of Integers. It has no Strings or more complex objects within.\r\nOn some machines once the object is written out, reading it back fails with the error code of the file not being in proper gzip format. When examining the file it is full of zero values.\r\n\r\nHere is the code that compresses and writes out the object:\r\n\r\n```\r\npublic static void write_SerialisedCompressed_Object(String folder, String fileName, Object objectToBeSerialised) {\r\n        File node = newFile(folder, fileName);\r\n        try (OutputStream os = Files.newOutputStream(node.toPath());\r\n             GZIPOutputStream gOS = new GZIPOutputStream(os);\r\n             ObjectOutputStream oOS = new ObjectOutputStream(gOS)) {\r\n            oOS.writeObject(objectToBeSerialised);\r\n        } catch (IOException ex) {\r\n            Base.print(ex.getMessage(), Base.TEXT_TYPE.ERROR);\r\n        }\r\n    }\r\n```\r\n\r\nHere is the code that reads the file:\r\n\r\n```\r\npublic static Object readCompressedSerialisedObject_File(String folder, String fileName) {\r\n        try (InputStream is = Files.newInputStream(newFile(folder, fileName).toPath());\r\n             GZIPInputStream gIS = new GZIPInputStream(is);\r\n             ObjectInputStream oIS = new ObjectInputStream(gIS)) {\r\n            return oIS.readObject();\r\n        } catch (Exception ex) {\r\n            String error = &quot;Error in: &quot; + folder + fileName + &quot; readCompressedSerialisedObject_File &quot; + ex.getMessage() + &quot; &quot; + ex.getClass() + &quot; &quot; + ex.getCause();\r\n            Base.print(error, Base.TEXT_TYPE.ERROR);\r\n            throw new RuntimeException(error);\r\n        }\r\n    }\r\n```\r\n\r\n\r\n\r\n\r\nI have a feeling that this might be related to encoding. But if the file has been written out on the same machine that it is being read back why would that matter?\r\nAny help is welcome. Thanks!","title":"Failing GZIPInputStream","body":"<p>My Java app writes out a gzip compressed object to a file using try-with resources statement. The object is a very basic with a couple of primitive fields and an ArrayList of Integers. It has no Strings or more complex objects within.\nOn some machines once the object is written out, reading it back fails with the error code of the file not being in proper gzip format. When examining the file it is full of zero values.</p>\n<p>Here is the code that compresses and writes out the object:</p>\n<pre><code>public static void write_SerialisedCompressed_Object(String folder, String fileName, Object objectToBeSerialised) {\n        File node = newFile(folder, fileName);\n        try (OutputStream os = Files.newOutputStream(node.toPath());\n             GZIPOutputStream gOS = new GZIPOutputStream(os);\n             ObjectOutputStream oOS = new ObjectOutputStream(gOS)) {\n            oOS.writeObject(objectToBeSerialised);\n        } catch (IOException ex) {\n            Base.print(ex.getMessage(), Base.TEXT_TYPE.ERROR);\n        }\n    }\n</code></pre>\n<p>Here is the code that reads the file:</p>\n<pre><code>public static Object readCompressedSerialisedObject_File(String folder, String fileName) {\n        try (InputStream is = Files.newInputStream(newFile(folder, fileName).toPath());\n             GZIPInputStream gIS = new GZIPInputStream(is);\n             ObjectInputStream oIS = new ObjectInputStream(gIS)) {\n            return oIS.readObject();\n        } catch (Exception ex) {\n            String error = &quot;Error in: &quot; + folder + fileName + &quot; readCompressedSerialisedObject_File &quot; + ex.getMessage() + &quot; &quot; + ex.getClass() + &quot; &quot; + ex.getCause();\n            Base.print(error, Base.TEXT_TYPE.ERROR);\n            throw new RuntimeException(error);\n        }\n    }\n</code></pre>\n<p>I have a feeling that this might be related to encoding. But if the file has been written out on the same machine that it is being read back why would that matter?\nAny help is welcome. Thanks!</p>\n"},{"tags":["java","for-loop","if-statement"],"comments":[{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":3,"creation_date":1689346161,"post_id":76688780,"comment_id":135204955,"body_markdown":"start working on correct/consistent indentation of the code - as posted here it is VERY hard to read/understand/debug || BTW you can compare characters `charAt(i) == &#39;1&#39;` || BTW2 since you are already using `Integer`, it has a `bitCount()` method","body":"start working on correct/consistent indentation of the code - as posted here it is VERY hard to read/understand/debug || BTW you can compare characters <code>charAt(i) == &#39;1&#39;</code> || BTW2 since you are already using <code>Integer</code>, it has a <code>bitCount()</code> method"},{"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"score":0,"creation_date":1689346188,"post_id":76688780,"comment_id":135204961,"body_markdown":"VTC as typo. `r =+ 1;` should be `r++;` **or** `r += 1;` also `i == count` should be `i &lt; count` in the loop condition. Converting the `int` to a binary string is a bit wasteful, `int r = 0; for (; n &gt; 0; n /= 2) { if ((n &amp; 1) == 1) { r++; } } return r;`","body":"VTC as typo. <code>r =+ 1;</code> should be <code>r++;</code> <b>or</b> <code>r += 1;</code> also <code>i == count</code> should be <code>i &lt; count</code> in the loop condition. Converting the <code>int</code> to a binary string is a bit wasteful, <code>int r = 0; for (; n &gt; 0; n &#47;= 2) { if ((n &amp; 1) == 1) { r++; } } return r;</code>"},{"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1689349607,"post_id":76688780,"comment_id":135205775,"body_markdown":"How did this code print anything?  It is syntactically flawed and would not compile.  You did not initialize `r` to `0`.","body":"How did this code print anything?  It is syntactically flawed and would not compile.  You did not initialize <code>r</code> to <code>0</code>."}],"answers":[{"comments":[{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":2,"creation_date":1689348530,"post_id":76688882,"comment_id":135205522,"body_markdown":"&quot;some ide&#39;s may complain&quot; - I think every Java compliant compiler must complain about not explicitly initializing `r` (a local variable). JLS [Chapter 16. Definite Assignment](https://docs.oracle.com/javase/specs/jls/se20/html/jls-16.html): &quot;Every local variable declared by a statement (&#167;14.4.2, &#167;14.14.1, &#167;14.14.2, &#167;14.20.3) and every blank final field (&#167;4.12.4, &#167;8.3.1.2) must have a definitely assigned value when any access of its value occurs.&quot;","body":"&quot;some ide&#39;s may complain&quot; - I think every Java compliant compiler must complain about not explicitly initializing <code>r</code> (a local variable). JLS <a href=\"https://docs.oracle.com/javase/specs/jls/se20/html/jls-16.html\" rel=\"nofollow noreferrer\">Chapter 16. Definite Assignment</a>: &quot;Every local variable declared by a statement (&#167;14.4.2, &#167;14.14.1, &#167;14.14.2, &#167;14.20.3) and every blank final field (&#167;4.12.4, &#167;8.3.1.2) must have a definitely assigned value when any access of its value occurs.&quot;"},{"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"score":1,"creation_date":1689348995,"post_id":76688882,"comment_id":135205627,"body_markdown":"@user16320675 I wasn&#39;t certain.  Eclipse complains.  But the OP says his code prints the default value even though `r` has not been initialized.  My assumption was that if it was required, his code wouldn&#39;t compile.","body":"@user16320675 I wasn&#39;t certain.  Eclipse complains.  But the OP says his code prints the default value even though <code>r</code> has not been initialized.  My assumption was that if it was required, his code wouldn&#39;t compile."},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1689349207,"post_id":76688882,"comment_id":135205674,"body_markdown":"good point... how did they run it?","body":"good point... how did they run it?"},{"owner":{"account_id":9459090,"reputation":13,"user_id":21831940,"display_name":"Juan Diego Pena Castillo"},"score":0,"creation_date":1689372903,"post_id":76688882,"comment_id":135209668,"body_markdown":"Thanks, I did not know about the LSB or the n&gt;&gt;1. Great and concrete explanation.","body":"Thanks, I did not know about the LSB or the n&gt;&gt;1. Great and concrete explanation."},{"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1689374771,"post_id":76688882,"comment_id":135209838,"body_markdown":"@JuanDiegoPenaCastillo  Using `&amp;` is an AND operation.  It is useful for masking off bits.   I recommend you read up on AND, OR `|`and XOR (exclusive OR) (in java it&#39;s `^`) to see how they work.  They can be a great help in some programming algorithms. Check out [Bit Operations](https://en.wikipedia.org/wiki/Bitwise_operation)","body":"@JuanDiegoPenaCastillo  Using <code>&amp;</code> is an AND operation.  It is useful for masking off bits.   I recommend you read up on AND, OR <code>|</code>and XOR (exclusive OR) (in java it&#39;s <code>^</code>) to see how they work.  They can be a great help in some programming algorithms. Check out <a href=\"https://en.wikipedia.org/wiki/Bitwise_operation\" rel=\"nofollow noreferrer\">Bit Operations</a>"}],"tags":[],"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"comment_count":5,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1689346993,"creation_date":1689346618,"answer_id":76688882,"question_id":76688780,"body_markdown":"\r\nYou are not incrementing `r` correctly.  Use `r++;`  And some ide&#39;s may complain about not explicitly initializing `r`.\r\n\r\nBut you don&#39;t need to convert to a string. Assuming you don&#39;t want to or can&#39;t use `Integer.bitCount()`, then here is one way.\r\n- initialize count to 0.\r\n- check the least significant bit (LSB). If `n&amp;1` return `0` if LSB is `0`, else it returns `1`.\r\n- `n&gt;&gt;1` shifts right 1 bit to expose next bit.\r\n```\r\npublic static int countBits(int n) {\r\n    int count = 0;\r\n    while (n &gt; 0) {\r\n       count += n&amp;1;\r\n       n &gt;&gt;= 1;\r\n    }\r\n   return count;\r\n}","title":"Bit Counting (just the #1)","body":"<p>You are not incrementing <code>r</code> correctly.  Use <code>r++;</code>  And some ide's may complain about not explicitly initializing <code>r</code>.</p>\n<p>But you don't need to convert to a string. Assuming you don't want to or can't use <code>Integer.bitCount()</code>, then here is one way.</p>\n<ul>\n<li>initialize count to 0.</li>\n<li>check the least significant bit (LSB). If <code>n&amp;1</code> return <code>0</code> if LSB is <code>0</code>, else it returns <code>1</code>.</li>\n<li><code>n&gt;&gt;1</code> shifts right 1 bit to expose next bit.</li>\n</ul>\n<pre><code>public static int countBits(int n) {\n    int count = 0;\n    while (n &gt; 0) {\n       count += n&amp;1;\n       n &gt;&gt;= 1;\n    }\n   return count;\n}\n</code></pre>\n"}],"owner":{"account_id":9459090,"reputation":13,"user_id":21831940,"display_name":"Juan Diego Pena Castillo"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76688882,"answer_count":1,"score":1,"last_activity_date":1689346993,"creation_date":1689345861,"question_id":76688780,"body_markdown":"I made a function that follows this Example: The binary representation of 1234 is 10011010010, so the function should return 5 in this case. \r\n\r\nBut after testing it do give me the default variable value.\r\n\r\nMy code:\r\n\r\n```\r\npublic class BitCounting {\r\n\r\n\tpublic static int countBits(int n){\r\n\t    int r;\r\n      String bits = Integer.toBinaryString(n);\r\n      if (n &lt; 0){\r\n        r = 0;\r\n        }else{\r\n      int count = bits.length();\r\n      for (int i=0; i == count ;i++){\r\n        int c = Integer.parseInt(String.valueOf(bits.charAt(i)));\r\n        if ( c==1){ \r\n          r =+ 1;\r\n          };\r\n        };\r\n      };\r\n\treturn r;\r\n  }\r\n\t\r\n}\r\n```\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nI believe that for some reason it is not reading the `If` statement as well as the `for` statement","title":"Bit Counting (just the #1)","body":"<p>I made a function that follows this Example: The binary representation of 1234 is 10011010010, so the function should return 5 in this case.</p>\n<p>But after testing it do give me the default variable value.</p>\n<p>My code:</p>\n<pre><code>public class BitCounting {\n\n    public static int countBits(int n){\n        int r;\n      String bits = Integer.toBinaryString(n);\n      if (n &lt; 0){\n        r = 0;\n        }else{\n      int count = bits.length();\n      for (int i=0; i == count ;i++){\n        int c = Integer.parseInt(String.valueOf(bits.charAt(i)));\n        if ( c==1){ \n          r =+ 1;\n          };\n        };\n      };\n    return r;\n  }\n    \n}\n</code></pre>\n<p>I believe that for some reason it is not reading the <code>If</code> statement as well as the <code>for</code> statement</p>\n"},{"tags":["java","spring-boot","multithreading","scheduled-tasks","spring-test"],"owner":{"account_id":24109083,"reputation":150,"user_id":18079889,"display_name":"Mohammed Fataka"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689346728,"creation_date":1689333500,"question_id":76687181,"body_markdown":"i have problem understanding some of my test cases and their results when i am trying to test multi-threaded and non-multi-threaded `ThreadPoolTaskScheduler()`\r\n\r\ni have following methods for both scenarios.\r\n```\r\n    private int counter;\r\n\r\n    private void increment() {\r\n        counter++;\r\n    }\r\n\r\n\r\n    public String doWork(final CountDownLatch latch, final int taskNo) {\r\n        System.out.println(&quot;running task: &quot; + taskNo);\r\n        latch.countDown();\r\n        increment();\r\n        return taskNo == 1 ? &quot;First&quot; : &quot;Second&quot;;\r\n    }\r\n\r\n```\r\n\r\n\r\n\r\nbasically one of them will have one thread assigned, and the test case would be to schedule two tasks on it, as below:\r\n\r\n```\r\n    @Test\r\n    @SneakyThrows\r\n    public void shouldNotBeAbleToSimultaneouslyScheduleTest() {\r\n        final var taskScheduler = new ThreadPoolTaskScheduler();\r\n        taskScheduler.setPoolSize(1);\r\n        taskScheduler.setThreadNamePrefix(&quot;test-&quot;);\r\n        taskScheduler.initialize();\r\n\r\n        final var latch = new CountDownLatch(2);\r\n\r\n        final var inOneSecond = Instant.now().plusSeconds(1);\r\n        final var taskOrders = new ArrayList&lt;String&gt;();\r\n        taskScheduler.schedule(() -&gt; {\r\n                    try {\r\n                        Assertions.assertEquals(1, counter); // --&gt; Why it is 1 and not 0?\r\n                        // make thread wait 5 seconds to do increment\r\n                        Thread.sleep(5000);\r\n                        //increment\r\n                        taskOrders.add(doWork(latch, 1));\r\n                    } catch (InterruptedException e) {\r\n                        throw new RuntimeException(e);\r\n                    }\r\n                }\r\n\r\n                , inOneSecond);\r\n\r\n        taskScheduler.schedule(() -&gt; {\r\n                    Assertions.assertEquals(0, counter);\r\n                    //increment\r\n                    taskOrders.add(doWork(latch, 2));\r\n                    // counter should be 1 since only current task is completed\r\n                    Assertions.assertEquals(1, counter);\r\n                }\r\n                , inOneSecond);\r\n\r\n        final var bothCompleted = latch.await(7, TimeUnit.SECONDS);\r\n        // assert both tasks completed\r\n        Assertions.assertTrue(bothCompleted);\r\n        // assert both tasks incremented it\r\n        Assertions.assertEquals(2, counter);\r\n        // second task was first to run\r\n        Assertions.assertEquals(&quot;Second&quot;, taskOrders.get(0));\r\n        // first task was second to run\r\n        Assertions.assertEquals(&quot;First&quot;, taskOrders.get(1));\r\n    }\r\n```\r\n\r\nnow in this test scenario i wanna understand why in the first task counter is 1, because how i grasp it, is that one thread is doing first task which initially counter is 0 how it can run second task first, while it is in first task? \r\n\r\n\r\n\r\n\r\n\r\nsecond scenario is when it `ThreadPoolTaskScheduler()` is assigned to have 2 threads as below:\r\n\r\n\r\n\r\n```\r\n    @Test\r\n    @SneakyThrows\r\n    public void shouldSimultaneouslyScheduleTest() {\r\n        final var taskScheduler = new ThreadPoolTaskScheduler();\r\n        taskScheduler.setPoolSize(2);\r\n        taskScheduler.setThreadNamePrefix(&quot;test-&quot;);\r\n        taskScheduler.initialize();\r\n\r\n        final var latch = new CountDownLatch(2);\r\n        final var inOneSecond = Instant.now().plusSeconds(1);\r\n        final var taskOrders = new ArrayList&lt;String&gt;();\r\n        taskScheduler.schedule(() -&gt; {\r\n                    try {\r\n                        Assertions.assertEquals(0, counter); // --&gt; HOW COME HERE counter is 0     but not 1 like previous scenario?\r\n                        // make thread take 5 seconds to complete\r\n                        Thread.sleep(5000);\r\n                        // increment\r\n                        taskOrders.add(doWork(latch, 1));\r\n                    } catch (InterruptedException e) {\r\n                        throw new RuntimeException(e);\r\n                    }\r\n                }\r\n\r\n                , inOneSecond);\r\n\r\n        taskScheduler.schedule(() -&gt; {\r\n                    Assertions.assertEquals(0, counter); // why the counter is zero here ?\r\n                    // increment\r\n                    taskOrders.add(doWork(latch, 2));\r\n                    Assertions.assertEquals(1, counter);\r\n                }\r\n                , inOneSecond);\r\n\r\n        final var bothCompleted = latch.await(7, TimeUnit.SECONDS);\r\n        // assert both tasks completed\r\n        Assertions.assertTrue(bothCompleted);\r\n        // assert both tasks incremented it\r\n        Assertions.assertEquals(2, counter);\r\n        // second task was first to run\r\n        Assertions.assertEquals(&quot;Second&quot;, taskOrders.get(0));\r\n        // first task was second to run\r\n        Assertions.assertEquals(&quot;First&quot;, taskOrders.get(1));\r\n    }\r\n\r\n```\r\n\r\n\r\nin this one i wanna understand how come in both tasks counter is 0? ","title":"Testing Multi-threaded and non Multi-threaded task scheduling","body":"<p>i have problem understanding some of my test cases and their results when i am trying to test multi-threaded and non-multi-threaded <code>ThreadPoolTaskScheduler()</code></p>\n<p>i have following methods for both scenarios.</p>\n<pre><code>    private int counter;\n\n    private void increment() {\n        counter++;\n    }\n\n\n    public String doWork(final CountDownLatch latch, final int taskNo) {\n        System.out.println(&quot;running task: &quot; + taskNo);\n        latch.countDown();\n        increment();\n        return taskNo == 1 ? &quot;First&quot; : &quot;Second&quot;;\n    }\n\n</code></pre>\n<p>basically one of them will have one thread assigned, and the test case would be to schedule two tasks on it, as below:</p>\n<pre><code>    @Test\n    @SneakyThrows\n    public void shouldNotBeAbleToSimultaneouslyScheduleTest() {\n        final var taskScheduler = new ThreadPoolTaskScheduler();\n        taskScheduler.setPoolSize(1);\n        taskScheduler.setThreadNamePrefix(&quot;test-&quot;);\n        taskScheduler.initialize();\n\n        final var latch = new CountDownLatch(2);\n\n        final var inOneSecond = Instant.now().plusSeconds(1);\n        final var taskOrders = new ArrayList&lt;String&gt;();\n        taskScheduler.schedule(() -&gt; {\n                    try {\n                        Assertions.assertEquals(1, counter); // --&gt; Why it is 1 and not 0?\n                        // make thread wait 5 seconds to do increment\n                        Thread.sleep(5000);\n                        //increment\n                        taskOrders.add(doWork(latch, 1));\n                    } catch (InterruptedException e) {\n                        throw new RuntimeException(e);\n                    }\n                }\n\n                , inOneSecond);\n\n        taskScheduler.schedule(() -&gt; {\n                    Assertions.assertEquals(0, counter);\n                    //increment\n                    taskOrders.add(doWork(latch, 2));\n                    // counter should be 1 since only current task is completed\n                    Assertions.assertEquals(1, counter);\n                }\n                , inOneSecond);\n\n        final var bothCompleted = latch.await(7, TimeUnit.SECONDS);\n        // assert both tasks completed\n        Assertions.assertTrue(bothCompleted);\n        // assert both tasks incremented it\n        Assertions.assertEquals(2, counter);\n        // second task was first to run\n        Assertions.assertEquals(&quot;Second&quot;, taskOrders.get(0));\n        // first task was second to run\n        Assertions.assertEquals(&quot;First&quot;, taskOrders.get(1));\n    }\n</code></pre>\n<p>now in this test scenario i wanna understand why in the first task counter is 1, because how i grasp it, is that one thread is doing first task which initially counter is 0 how it can run second task first, while it is in first task?</p>\n<p>second scenario is when it <code>ThreadPoolTaskScheduler()</code> is assigned to have 2 threads as below:</p>\n<pre><code>    @Test\n    @SneakyThrows\n    public void shouldSimultaneouslyScheduleTest() {\n        final var taskScheduler = new ThreadPoolTaskScheduler();\n        taskScheduler.setPoolSize(2);\n        taskScheduler.setThreadNamePrefix(&quot;test-&quot;);\n        taskScheduler.initialize();\n\n        final var latch = new CountDownLatch(2);\n        final var inOneSecond = Instant.now().plusSeconds(1);\n        final var taskOrders = new ArrayList&lt;String&gt;();\n        taskScheduler.schedule(() -&gt; {\n                    try {\n                        Assertions.assertEquals(0, counter); // --&gt; HOW COME HERE counter is 0     but not 1 like previous scenario?\n                        // make thread take 5 seconds to complete\n                        Thread.sleep(5000);\n                        // increment\n                        taskOrders.add(doWork(latch, 1));\n                    } catch (InterruptedException e) {\n                        throw new RuntimeException(e);\n                    }\n                }\n\n                , inOneSecond);\n\n        taskScheduler.schedule(() -&gt; {\n                    Assertions.assertEquals(0, counter); // why the counter is zero here ?\n                    // increment\n                    taskOrders.add(doWork(latch, 2));\n                    Assertions.assertEquals(1, counter);\n                }\n                , inOneSecond);\n\n        final var bothCompleted = latch.await(7, TimeUnit.SECONDS);\n        // assert both tasks completed\n        Assertions.assertTrue(bothCompleted);\n        // assert both tasks incremented it\n        Assertions.assertEquals(2, counter);\n        // second task was first to run\n        Assertions.assertEquals(&quot;Second&quot;, taskOrders.get(0));\n        // first task was second to run\n        Assertions.assertEquals(&quot;First&quot;, taskOrders.get(1));\n    }\n\n</code></pre>\n<p>in this one i wanna understand how come in both tasks counter is 0?</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":7859,"page":309,"page_size":100}
