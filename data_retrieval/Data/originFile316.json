{"items":[{"tags":["java","elasticsearch","jackson","elasticsearch-java-api"],"owner":{"account_id":6450678,"reputation":544,"user_id":4997684,"accept_rate":50,"display_name":"Paul Wellner Bou"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689139657,"creation_date":1689091075,"question_id":76663796,"body_markdown":"Using the Java [ElasticsearchClient][1], is it possible to create a custom mapper, so that depending on a certain field (or index) of the result hit, a different object is mapped?\r\n\r\nI have several indices with different, but very similar documents. The base properties are the same in all of them. And if I query for a list of IDs, I ususally query for (similar) objects in different indices. Ideally I want to have a result list `List&lt;? extends BaseDocument&gt;` with potentially different objects in it, all of them extending my `BaseDocument`.\r\n\r\nOf course, one approach would be to this in my BaseDocument, which will store all unmapped properties in a map.\r\n\r\n```java\r\n@JsonAnyGetter\r\n@JsonAnySetter\r\nprotected final Map&lt;String, Object&gt; properties = new LinkedHashMap&lt;&gt;();\r\n```\r\n\r\nAnd then, in SpecialDocument, I can access those properties by\r\n\r\n```java\r\npublic getSpecialProperty() {\r\n    return super.properties.get(&quot;specialProperty&quot;);\r\n}\r\n```\r\n\r\nAnother way would be to map all result hits just to a Map, and then checking the contents of the map and using a custom ObjectMapper to map this map back to my domain objects:\r\n\r\n```java\r\npublic List&lt;? extends BaseDocument&gt; search(final List&lt;String&gt; indices, final Query query) throws IOException {\r\n\tfinal ObjectMapper objectMapper = new ObjectMapper();\r\n\tfinal SearchResponse&lt;Map&gt; searchResponse = elasticsearchClient.search(s -&gt; s.index(indices).query(query), Map.class);\r\n\treturn searchResponse.hits().hits().stream().map(\r\n\t\thit -&gt; {\r\n\t\t\tswitch (hit.source().get(&quot;documentType&quot;).toString()) {\r\n\t\t\t\tcase &quot;specialDocument&quot;:\r\n\t\t\t\t\treturn objectMapper.convertValue(hit.source(), SpecialDocument.class);\r\n\t\t\t\tcase &quot;anotherSpecialDocument&quot;:\r\n\t\t\t\t\treturn objectMapper.convertValue(hit.source(), AnotherSpecialDocument.class);\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn objectMapper.convertValue(hit.source(), BaseDocument.class);\r\n\t\t\t}\r\n\t\t}\r\n\t).toList();\r\n}\r\n```\r\n\r\nNow, this is mapping the result twice, one time to a Map, another time to a concrete object.\r\n\r\nIs there a way to pass a mapper to the ElasticsearchClient (instead of the JsonpMapper, for example?), where I can define conditions to map the result directly to a certain object, instead of treating all results as the same?\r\n\r\n\r\n  [1]: https://www.elastic.co/guide/en/elasticsearch/client/java-api-client/current/index.html","title":"Java ElasticsearchClient: Conditionally mapping result hits to a certain object depending on a field or index","body":"<p>Using the Java <a href=\"https://www.elastic.co/guide/en/elasticsearch/client/java-api-client/current/index.html\" rel=\"nofollow noreferrer\">ElasticsearchClient</a>, is it possible to create a custom mapper, so that depending on a certain field (or index) of the result hit, a different object is mapped?</p>\n<p>I have several indices with different, but very similar documents. The base properties are the same in all of them. And if I query for a list of IDs, I ususally query for (similar) objects in different indices. Ideally I want to have a result list <code>List&lt;? extends BaseDocument&gt;</code> with potentially different objects in it, all of them extending my <code>BaseDocument</code>.</p>\n<p>Of course, one approach would be to this in my BaseDocument, which will store all unmapped properties in a map.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@JsonAnyGetter\n@JsonAnySetter\nprotected final Map&lt;String, Object&gt; properties = new LinkedHashMap&lt;&gt;();\n</code></pre>\n<p>And then, in SpecialDocument, I can access those properties by</p>\n<pre class=\"lang-java prettyprint-override\"><code>public getSpecialProperty() {\n    return super.properties.get(&quot;specialProperty&quot;);\n}\n</code></pre>\n<p>Another way would be to map all result hits just to a Map, and then checking the contents of the map and using a custom ObjectMapper to map this map back to my domain objects:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public List&lt;? extends BaseDocument&gt; search(final List&lt;String&gt; indices, final Query query) throws IOException {\n    final ObjectMapper objectMapper = new ObjectMapper();\n    final SearchResponse&lt;Map&gt; searchResponse = elasticsearchClient.search(s -&gt; s.index(indices).query(query), Map.class);\n    return searchResponse.hits().hits().stream().map(\n        hit -&gt; {\n            switch (hit.source().get(&quot;documentType&quot;).toString()) {\n                case &quot;specialDocument&quot;:\n                    return objectMapper.convertValue(hit.source(), SpecialDocument.class);\n                case &quot;anotherSpecialDocument&quot;:\n                    return objectMapper.convertValue(hit.source(), AnotherSpecialDocument.class);\n                default:\n                    return objectMapper.convertValue(hit.source(), BaseDocument.class);\n            }\n        }\n    ).toList();\n}\n</code></pre>\n<p>Now, this is mapping the result twice, one time to a Map, another time to a concrete object.</p>\n<p>Is there a way to pass a mapper to the ElasticsearchClient (instead of the JsonpMapper, for example?), where I can define conditions to map the result directly to a certain object, instead of treating all results as the same?</p>\n"},{"tags":["java","android","database","parameter-passing"],"answers":[{"comments":[{"owner":{"account_id":28951210,"reputation":1,"user_id":22175758,"display_name":"Goodsir 23"},"score":0,"creation_date":1689169928,"post_id":76667326,"comment_id":135175633,"body_markdown":"thanks for the reply and sorry if I misunderstand something. currently my ``getTravelTime`` with in ``Directionsmanager`` is being called in a separate class with no UI element. again sorry this is my first android app project and Im learning as I go.","body":"thanks for the reply and sorry if I misunderstand something. currently my <code>getTravelTime</code> with in <code>Directionsmanager</code> is being called in a separate class with no UI element. again sorry this is my first android app project and Im learning as I go."},{"owner":{"account_id":8921462,"reputation":865,"user_id":6657837,"accept_rate":83,"display_name":"Turkhan Badalov"},"score":0,"creation_date":1689174814,"post_id":76667326,"comment_id":135176963,"body_markdown":"Even if you are using a separate class, the code still runs in the same thread. I recommend to familiarize yourself with the concept of threads and then try to use AsyncTasks","body":"Even if you are using a separate class, the code still runs in the same thread. I recommend to familiarize yourself with the concept of threads and then try to use AsyncTasks"}],"tags":[],"owner":{"account_id":8921462,"reputation":865,"user_id":6657837,"accept_rate":83,"display_name":"Turkhan Badalov"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689139021,"creation_date":1689139021,"answer_id":76667326,"question_id":76666833,"body_markdown":"Try to remove the call to `getTravelTime` in the callback and see if the text appears on the screen. If so, apparently, your code in `getTravelTime` is running on UI which is a cpu-intenstive task and should run in a separate thread which is different from UI thread.\r\n\r\nYou can try to use [AsyncTasks][1]. Once you override callbacks, it will make sure to run your cpu-intensive code in a separate thread and once it is done to make changes in UI. I haven&#39;t caught up with last changes in Android but seems like AsyncTasks are deprecated, so you can use java Executors directly.\r\n\r\n  [1]: https://developer.android.com/reference/android/os/AsyncTask","title":"Is the way Im passing variables to my function correct?","body":"<p>Try to remove the call to <code>getTravelTime</code> in the callback and see if the text appears on the screen. If so, apparently, your code in <code>getTravelTime</code> is running on UI which is a cpu-intenstive task and should run in a separate thread which is different from UI thread.</p>\n<p>You can try to use <a href=\"https://developer.android.com/reference/android/os/AsyncTask\" rel=\"nofollow noreferrer\">AsyncTasks</a>. Once you override callbacks, it will make sure to run your cpu-intensive code in a separate thread and once it is done to make changes in UI. I haven't caught up with last changes in Android but seems like AsyncTasks are deprecated, so you can use java Executors directly.</p>\n"}],"owner":{"account_id":28951210,"reputation":1,"user_id":22175758,"display_name":"Goodsir 23"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689139021,"creation_date":1689129685,"question_id":76666833,"body_markdown":"Im currently trying to pass 2 stored strings from a database to my function gettraveltime in my Directionsmanager class. once everything runs it should change an activity from the current one to one that just has some text. but currently when I press the button nothing happens and in the logcat file the only thing that regards to getting map data are these 3 log entries. \r\n\r\n&gt; 2023-07-11 22:25:21.896 24459-24505 DynamiteModule          com.example.startuptest1             W  Local module descriptor class for com.google.android.gms.providerinstaller.dynamite not found.\r\n&gt; 2023-07-11 22:25:21.995 24459-24505 DynamiteModule          com.example.startuptest1             I  Considering local module com.google.android.gms.providerinstaller.dynamite:0 and remote module com.google.android.gms.providerinstaller.dynamite:0\r\n&gt; 2023-07-11 22:25:21.998 24459-24505 ProviderInstaller       com.example.startuptest1             W  Failed to load providerinstaller module: No acceptable module com.google.android.gms.providerinstaller.dynamite found. Local version is 0 and remote version is 0.\r\n\r\n\r\n```\r\nconfirm.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                txt.setText(&quot;button pressed&quot;);\r\n                Directionsmanager dm = new Directionsmanager();\r\n                dm.getTravelTime(startLocation, endLocation, dbdisplay.this);\r\n            }\r\n        });\r\n```\r\nThis is how Im passing the variables to my function to get the travel time between the 2 saved locations.This is the Directionsmanager class in case you need to take a look at it.\r\n```\r\npackage com.example.startuptest1;\r\n\r\nimport android.content.Context;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport java.util.Calendar;\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\n\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.firebase.functions.FirebaseFunctions;\r\nimport com.google.firebase.functions.HttpsCallableResult;\r\n\r\npublic class Directionsmanager {\r\n\r\n    private FirebaseFunctions mFunctions;\r\n    public Directionsmanager() {\r\n        mFunctions = FirebaseFunctions.getInstance();\r\n    }\r\n    public void getTravelTime(String startLocation, String endLocation, final OnTravelTimeListener listener) {\r\n\r\n        Calendar calendar = Calendar.getInstance();\r\n        int dayOfWeek = calendar.get(Calendar.DAY_OF_WEEK);\r\n\r\n\r\n        if (dayOfWeek &gt;= Calendar.MONDAY &amp;&amp; dayOfWeek &lt;= Calendar.FRIDAY) {\r\n\r\n            Map&lt;String, Object&gt; data = new HashMap&lt;&gt;();\r\n            data.put(&quot;startLocation&quot;, startLocation);\r\n            data.put(&quot;endLocation&quot;, endLocation);\r\n            data.put(&quot;mode&quot;, &quot;transit&quot;);\r\n\r\n\r\n            calendar.set(Calendar.HOUR_OF_DAY, 9);\r\n            calendar.set(Calendar.MINUTE, 0);\r\n            calendar.set(Calendar.SECOND, 0);\r\n\r\n\r\n            if (calendar.getTimeInMillis() &lt; System.currentTimeMillis()) {\r\n                calendar.add(Calendar.DAY_OF_MONTH, 1);\r\n            }\r\n\r\n\r\n            data.put(&quot;arriveByTime&quot;, calendar.getTimeInMillis());\r\n\r\n\r\n            mFunctions.getHttpsCallable(&quot;getTravelTime&quot;)\r\n                    .call(data)\r\n                    .addOnSuccessListener(new OnSuccessListener&lt;HttpsCallableResult&gt;() {\r\n                        @Override\r\n                        public void onSuccess(HttpsCallableResult httpsCallableResult) {\r\n                            // Handle the result\r\n                            String travelTime = (String) httpsCallableResult.getData();\r\n                            listener.onTravelTimeReceived(travelTime);\r\n                        }\r\n                    });\r\n        } else {\r\n\r\n            listener.onTravelTimeReceived(&quot;No action on weekends&quot;);\r\n\r\n        }\r\n    }\r\n\r\n    public interface OnTravelTimeListener {\r\n        void onTravelTimeReceived(String travelTime);\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\nI expected once I press the confirm button, it will pass the database values to Directions manager and once that runs and its returns a value it will change to a different activity. Currently  At first I thought that maybe the gridle file was incorrect in regards to versions and version compatibility but it was fine. if you need to see the function thats responsible for changing activity pls let me know. Theres a bit more code before the activity can change but Im not sure if its this part of the code or the function that is responsible for changing activity is the issue. \r\nThanks for the help","title":"Is the way Im passing variables to my function correct?","body":"<p>Im currently trying to pass 2 stored strings from a database to my function gettraveltime in my Directionsmanager class. once everything runs it should change an activity from the current one to one that just has some text. but currently when I press the button nothing happens and in the logcat file the only thing that regards to getting map data are these 3 log entries.</p>\n<blockquote>\n<p>2023-07-11 22:25:21.896 24459-24505 DynamiteModule          com.example.startuptest1             W  Local module descriptor class for com.google.android.gms.providerinstaller.dynamite not found.\n2023-07-11 22:25:21.995 24459-24505 DynamiteModule          com.example.startuptest1             I  Considering local module com.google.android.gms.providerinstaller.dynamite:0 and remote module com.google.android.gms.providerinstaller.dynamite:0\n2023-07-11 22:25:21.998 24459-24505 ProviderInstaller       com.example.startuptest1             W  Failed to load providerinstaller module: No acceptable module com.google.android.gms.providerinstaller.dynamite found. Local version is 0 and remote version is 0.</p>\n</blockquote>\n<pre><code>confirm.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                txt.setText(&quot;button pressed&quot;);\n                Directionsmanager dm = new Directionsmanager();\n                dm.getTravelTime(startLocation, endLocation, dbdisplay.this);\n            }\n        });\n</code></pre>\n<p>This is how Im passing the variables to my function to get the travel time between the 2 saved locations.This is the Directionsmanager class in case you need to take a look at it.</p>\n<pre><code>package com.example.startuptest1;\n\nimport android.content.Context;\nimport android.widget.TextView;\nimport android.widget.Toast;\n\nimport java.util.Calendar;\nimport java.util.HashMap;\nimport java.util.Map;\n\nimport com.google.android.gms.tasks.OnSuccessListener;\nimport com.google.firebase.functions.FirebaseFunctions;\nimport com.google.firebase.functions.HttpsCallableResult;\n\npublic class Directionsmanager {\n\n    private FirebaseFunctions mFunctions;\n    public Directionsmanager() {\n        mFunctions = FirebaseFunctions.getInstance();\n    }\n    public void getTravelTime(String startLocation, String endLocation, final OnTravelTimeListener listener) {\n\n        Calendar calendar = Calendar.getInstance();\n        int dayOfWeek = calendar.get(Calendar.DAY_OF_WEEK);\n\n\n        if (dayOfWeek &gt;= Calendar.MONDAY &amp;&amp; dayOfWeek &lt;= Calendar.FRIDAY) {\n\n            Map&lt;String, Object&gt; data = new HashMap&lt;&gt;();\n            data.put(&quot;startLocation&quot;, startLocation);\n            data.put(&quot;endLocation&quot;, endLocation);\n            data.put(&quot;mode&quot;, &quot;transit&quot;);\n\n\n            calendar.set(Calendar.HOUR_OF_DAY, 9);\n            calendar.set(Calendar.MINUTE, 0);\n            calendar.set(Calendar.SECOND, 0);\n\n\n            if (calendar.getTimeInMillis() &lt; System.currentTimeMillis()) {\n                calendar.add(Calendar.DAY_OF_MONTH, 1);\n            }\n\n\n            data.put(&quot;arriveByTime&quot;, calendar.getTimeInMillis());\n\n\n            mFunctions.getHttpsCallable(&quot;getTravelTime&quot;)\n                    .call(data)\n                    .addOnSuccessListener(new OnSuccessListener&lt;HttpsCallableResult&gt;() {\n                        @Override\n                        public void onSuccess(HttpsCallableResult httpsCallableResult) {\n                            // Handle the result\n                            String travelTime = (String) httpsCallableResult.getData();\n                            listener.onTravelTimeReceived(travelTime);\n                        }\n                    });\n        } else {\n\n            listener.onTravelTimeReceived(&quot;No action on weekends&quot;);\n\n        }\n    }\n\n    public interface OnTravelTimeListener {\n        void onTravelTimeReceived(String travelTime);\n    }\n}\n\n</code></pre>\n<p>I expected once I press the confirm button, it will pass the database values to Directions manager and once that runs and its returns a value it will change to a different activity. Currently  At first I thought that maybe the gridle file was incorrect in regards to versions and version compatibility but it was fine. if you need to see the function thats responsible for changing activity pls let me know. Theres a bit more code before the activity can change but Im not sure if its this part of the code or the function that is responsible for changing activity is the issue.\nThanks for the help</p>\n"},{"tags":["java","eclipse","eclipse-plugin"],"comments":[{"owner":{"account_id":1417953,"reputation":45793,"user_id":1343161,"accept_rate":100,"display_name":"Keppil"},"score":1,"creation_date":1364373426,"post_id":15654475,"comment_id":22215710,"body_markdown":"What about [grepcode](http://grepcode.com/file/repository.grepcode.com/java/eclipse.org/3.6/org.eclipse.debug/core/3.6.0/org/eclipse/debug/core/model/IProcess.java?av=f)?","body":"What about <a href=\"http://grepcode.com/file/repository.grepcode.com/java/eclipse.org/3.6/org.eclipse.debug/core/3.6.0/org/eclipse/debug/core/model/IProcess.java?av=f\" rel=\"nofollow noreferrer\">grepcode</a>?"},{"owner":{"account_id":454126,"reputation":59224,"user_id":851498,"accept_rate":90,"display_name":"Florian Margaine"},"score":0,"creation_date":1364373445,"post_id":15654475,"comment_id":22215717,"body_markdown":"From deleted answer: http://www.eclipse.org/forums/index.php?t=rview&amp;goto=1011083","body":"From deleted answer: <a href=\"http://www.eclipse.org/forums/index.php?t=rview&amp;goto=1011083\" rel=\"nofollow noreferrer\">eclipse.org/forums/index.php?t=rview&amp;goto=1011083</a>"},{"owner":{"account_id":9540,"reputation":25179,"user_id":17675,"accept_rate":81,"display_name":"Zombies"},"score":0,"creation_date":1364374333,"post_id":15654475,"comment_id":22216080,"body_markdown":"@Keppil I think grepcode is the best solution for those who want to look at the code, as opposed to run it. So I think that is the best answer.","body":"@Keppil I think grepcode is the best solution for those who want to look at the code, as opposed to run it. So I think that is the best answer."},{"owner":{"account_id":1417953,"reputation":45793,"user_id":1343161,"accept_rate":100,"display_name":"Keppil"},"score":0,"creation_date":1364374630,"post_id":15654475,"comment_id":22216212,"body_markdown":"@Zombies: Added it as an answer.","body":"@Zombies: Added it as an answer."}],"answers":[{"tags":[],"owner":{"account_id":9540,"reputation":25179,"user_id":17675,"accept_rate":81,"display_name":"Zombies"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1364374084,"creation_date":1364373466,"answer_id":15654623,"question_id":15654475,"body_markdown":"I found it, the tricky part was there are so many repos just listed there on their git repo page (http://git.eclipse.org/c/), you kind of have to inspect each page, it is listed under the category &quot;platform&quot;, as opposed to all the plugin ID&#39;s being listed in alphabetic order:\r\n\r\nFor org.eclipse.debug.core (where IProcess is), it is here:\r\n\r\nhttp://git.eclipse.org/c/platform/eclipse.platform.debug.git/tree/org.eclipse.debug.core","title":"How to download Eclipse&#39;s Source code?","body":"<p>I found it, the tricky part was there are so many repos just listed there on their git repo page (<a href=\"http://git.eclipse.org/c/\" rel=\"noreferrer\">http://git.eclipse.org/c/</a>), you kind of have to inspect each page, it is listed under the category \"platform\", as opposed to all the plugin ID's being listed in alphabetic order:</p>\n\n<p>For org.eclipse.debug.core (where IProcess is), it is here:</p>\n\n<p><a href=\"http://git.eclipse.org/c/platform/eclipse.platform.debug.git/tree/org.eclipse.debug.core\" rel=\"noreferrer\">http://git.eclipse.org/c/platform/eclipse.platform.debug.git/tree/org.eclipse.debug.core</a></p>\n"},{"comments":[{"owner":{"account_id":3032157,"reputation":40061,"user_id":4561887,"accept_rate":73,"display_name":"Gabriel Staples"},"score":2,"creation_date":1627529392,"post_id":15654653,"comment_id":121181990,"body_markdown":"I expounded upon your answer and included the detailed commands. See here: https://stackoverflow.com/a/68569688/4561887.","body":"I expounded upon your answer and included the detailed commands. See here: <a href=\"https://stackoverflow.com/a/68569688/4561887\">stackoverflow.com/a/68569688/4561887</a>."},{"owner":{"account_id":5448686,"reputation":6798,"user_id":4573839,"accept_rate":89,"display_name":"yu yang Jian"},"score":0,"creation_date":1688119783,"post_id":15654653,"comment_id":135034316,"body_markdown":"this answer works.","body":"this answer works."}],"tags":[],"owner":{"account_id":15903,"reputation":323443,"user_id":34088,"accept_rate":77,"display_name":"Aaron Digulla"},"comment_count":2,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1364373581,"creation_date":1364373581,"answer_id":15654653,"question_id":15654475,"body_markdown":"Depending on your needs, [The Eclipse Common Build Infrastructure][1] (CBI) might help.\r\n\r\nThe CBI project has converted Eclipse into a Tycho project which means you can [get all the sources and compile them into a working Eclipse build][2] with 2-3 commands.\r\n\r\n\r\n  [1]: http://wiki.eclipse.org/CBI\r\n  [2]: http://wiki.eclipse.org/Platform-releng/Platform_Build","title":"How to download Eclipse&#39;s Source code?","body":"<p>Depending on your needs, <a href=\"http://wiki.eclipse.org/CBI\" rel=\"noreferrer\">The Eclipse Common Build Infrastructure</a> (CBI) might help.</p>\n\n<p>The CBI project has converted Eclipse into a Tycho project which means you can <a href=\"http://wiki.eclipse.org/Platform-releng/Platform_Build\" rel=\"noreferrer\">get all the sources and compile them into a working Eclipse build</a> with 2-3 commands.</p>\n"},{"tags":[],"owner":{"account_id":1417953,"reputation":45793,"user_id":1343161,"accept_rate":100,"display_name":"Keppil"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1364374479,"creation_date":1364374479,"answer_id":15654889,"question_id":15654475,"body_markdown":"If you just want to look at the code you can always use [GrepCode][1].  \r\n\r\nFor example, the Eclipse 4.2 version of the class you ask for is found here: [IProcess.java][2].\r\n\r\n\r\n  [1]: http://grepcode.com/\r\n  [2]: http://grepcode.com/file/repository.grepcode.com/java/eclipse.org/4.2/org.eclipse.debug/core/3.7.100/org/eclipse/debug/core/model/IProcess.java","title":"How to download Eclipse&#39;s Source code?","body":"<p>If you just want to look at the code you can always use <a href=\"http://grepcode.com/\" rel=\"nofollow\">GrepCode</a>.  </p>\n\n<p>For example, the Eclipse 4.2 version of the class you ask for is found here: <a href=\"http://grepcode.com/file/repository.grepcode.com/java/eclipse.org/4.2/org.eclipse.debug/core/3.7.100/org/eclipse/debug/core/model/IProcess.java\" rel=\"nofollow\">IProcess.java</a>.</p>\n"},{"comments":[{"owner":{"account_id":235896,"reputation":1859,"user_id":503025,"accept_rate":21,"display_name":"weberjn"},"score":0,"creation_date":1393508062,"post_id":15656801,"comment_id":33467679,"body_markdown":"Is there no way to download Eclipse Kepler sourcecode with a browser in a single source.zip ?\nI sit behind a proxy and even if git would allow it, don&#39;t want to download a zillion individual source files through the proxy.","body":"Is there no way to download Eclipse Kepler sourcecode with a browser in a single source.zip ? I sit behind a proxy and even if git would allow it, don&#39;t want to download a zillion individual source files through the proxy."}],"tags":[],"owner":{"account_id":1144833,"reputation":7270,"user_id":1127843,"accept_rate":86,"display_name":"kayz1"},"comment_count":1,"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1364380647,"creation_date":1364380647,"answer_id":15656801,"question_id":15654475,"body_markdown":"You can also check this fresh presentation by Lars Vogel :) [How to become an Eclipse committer in 20 minutes and fork the IDE][1]\r\n\r\n\r\n  [1]: http://www.slideshare.net/LarsVogel/eclipse-committerin20minutes","title":"How to download Eclipse&#39;s Source code?","body":"<p>You can also check this fresh presentation by Lars Vogel :) <a href=\"http://www.slideshare.net/LarsVogel/eclipse-committerin20minutes\" rel=\"noreferrer\">How to become an Eclipse committer in 20 minutes and fork the IDE</a></p>\n"},{"tags":[],"owner":{"account_id":3032157,"reputation":40061,"user_id":4561887,"accept_rate":73,"display_name":"Gabriel Staples"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1627529359,"creation_date":1627529359,"answer_id":68569688,"question_id":15654475,"body_markdown":"Using [this link][1] (see the &quot;Building&quot; and &quot;cloning platform source tree&quot; sections) from [@Aaron Digulla here][2], this appears to be the way to download all Eclipse source code. I actually ran these instructions and they seem to work. I think this is everything. \r\n\r\n```bash\r\n# 1 .Clone the whole repo, including all submodules (sub-repos)\r\ngit clone -b master --recursive \\\r\ngit://git.eclipse.org/gitroot/platform/eclipse.platform.releng.aggregator.git\r\n```\r\nThe clone process above took me about 30 minutes and downloaded 3.9 GB of stuff. \r\n\r\n```bash\r\n# 2. To update the git clone above, including all submodules\r\ncd eclipse.platform.releng.aggregator\r\ngit pull --recurse-submodules\r\ngit submodule update\r\n```\r\n\r\nThat&#39;s it! That appears to be everything (I think). Here is what I see in the first level of the &quot;eclipse.platform.releng.aggregator&quot; folder I just cloned now:\r\n\r\n```\r\neclipse.platform.releng.aggregator$ tree -L 1\r\n.\r\n├── cje-production\r\n├── CONTRIBUTING\r\n├── eclipse.jdt\r\n├── eclipse.jdt.core\r\n├── eclipse.jdt.core.binaries\r\n├── eclipse.jdt.debug\r\n├── eclipse.jdt.ui\r\n├── eclipse.pde.build\r\n├── eclipse.pde.ui\r\n├── eclipse.platform\r\n├── eclipse.platform.common\r\n├── eclipse.platform.debug\r\n├── eclipse-platform-parent\r\n├── eclipse.platform.releng\r\n├── eclipse.platform.releng.prereqs.sdk\r\n├── eclipse.platform.releng.tychoeclipsebuilder\r\n├── eclipse.platform.resources\r\n├── eclipse.platform.runtime\r\n├── eclipse-platform-sources\r\n├── eclipse.platform.swt\r\n├── eclipse.platform.swt.binaries\r\n├── eclipse.platform.team\r\n├── eclipse.platform.text\r\n├── eclipse.platform.ua\r\n├── eclipse.platform.ui\r\n├── eclipse.platform.ui.tools\r\n├── Jenkinsfile\r\n├── JenkinsJobs\r\n├── LICENSE\r\n├── NOTICE\r\n├── pom.xml\r\n├── production\r\n├── README.md\r\n├── rt.equinox.binaries\r\n├── rt.equinox.bundles\r\n├── rt.equinox.framework\r\n├── rt.equinox.p2\r\n└── scripts\r\n\r\n32 directories, 6 files\r\n```\r\n\r\n\r\n  [1]: https://wiki.eclipse.org/Platform-releng/Platform_Build#Building\r\n  [2]: https://stackoverflow.com/a/15654653/4561887","title":"How to download Eclipse&#39;s Source code?","body":"<p>Using <a href=\"https://wiki.eclipse.org/Platform-releng/Platform_Build#Building\" rel=\"nofollow noreferrer\">this link</a> (see the &quot;Building&quot; and &quot;cloning platform source tree&quot; sections) from <a href=\"https://stackoverflow.com/a/15654653/4561887\">@Aaron Digulla here</a>, this appears to be the way to download all Eclipse source code. I actually ran these instructions and they seem to work. I think this is everything.</p>\n<pre class=\"lang-sh prettyprint-override\"><code># 1 .Clone the whole repo, including all submodules (sub-repos)\ngit clone -b master --recursive \\\ngit://git.eclipse.org/gitroot/platform/eclipse.platform.releng.aggregator.git\n</code></pre>\n<p>The clone process above took me about 30 minutes and downloaded 3.9 GB of stuff.</p>\n<pre class=\"lang-sh prettyprint-override\"><code># 2. To update the git clone above, including all submodules\ncd eclipse.platform.releng.aggregator\ngit pull --recurse-submodules\ngit submodule update\n</code></pre>\n<p>That's it! That appears to be everything (I think). Here is what I see in the first level of the &quot;eclipse.platform.releng.aggregator&quot; folder I just cloned now:</p>\n<pre><code>eclipse.platform.releng.aggregator$ tree -L 1\n.\n├── cje-production\n├── CONTRIBUTING\n├── eclipse.jdt\n├── eclipse.jdt.core\n├── eclipse.jdt.core.binaries\n├── eclipse.jdt.debug\n├── eclipse.jdt.ui\n├── eclipse.pde.build\n├── eclipse.pde.ui\n├── eclipse.platform\n├── eclipse.platform.common\n├── eclipse.platform.debug\n├── eclipse-platform-parent\n├── eclipse.platform.releng\n├── eclipse.platform.releng.prereqs.sdk\n├── eclipse.platform.releng.tychoeclipsebuilder\n├── eclipse.platform.resources\n├── eclipse.platform.runtime\n├── eclipse-platform-sources\n├── eclipse.platform.swt\n├── eclipse.platform.swt.binaries\n├── eclipse.platform.team\n├── eclipse.platform.text\n├── eclipse.platform.ua\n├── eclipse.platform.ui\n├── eclipse.platform.ui.tools\n├── Jenkinsfile\n├── JenkinsJobs\n├── LICENSE\n├── NOTICE\n├── pom.xml\n├── production\n├── README.md\n├── rt.equinox.binaries\n├── rt.equinox.bundles\n├── rt.equinox.framework\n├── rt.equinox.p2\n└── scripts\n\n32 directories, 6 files\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5448686,"reputation":6798,"user_id":4573839,"accept_rate":89,"display_name":"yu yang Jian"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689138026,"creation_date":1689138026,"answer_id":76667263,"question_id":15654475,"body_markdown":"[Eclipse Platform SDK Provisioning](https://wiki.eclipse.org/Eclipse_Platform_SDK_Provisioning) works, after  Eclipse Updater completed, it could run and debug eclipse, breakpoint also works.\r\n\r\nFor example, set breakpoint in `NewProjectAction.java` `NewProjectAction()` and `run()` method, when click `File &gt; New &gt; Project`, it pause at breakpoint.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/WjMSN.png","title":"How to download Eclipse&#39;s Source code?","body":"<p><a href=\"https://wiki.eclipse.org/Eclipse_Platform_SDK_Provisioning\" rel=\"nofollow noreferrer\">Eclipse Platform SDK Provisioning</a> works, after  Eclipse Updater completed, it could run and debug eclipse, breakpoint also works.</p>\n<p>For example, set breakpoint in <code>NewProjectAction.java</code> <code>NewProjectAction()</code> and <code>run()</code> method, when click <code>File &gt; New &gt; Project</code>, it pause at breakpoint.</p>\n<p><a href=\"https://i.stack.imgur.com/WjMSN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WjMSN.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":9540,"reputation":25179,"user_id":17675,"accept_rate":81,"display_name":"Zombies"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21685,"favorite_count":0,"down_vote_count":0,"up_vote_count":16,"accepted_answer_id":15654623,"answer_count":6,"score":16,"last_activity_date":1689138026,"creation_date":1364372895,"question_id":15654475,"body_markdown":"After spending awhile (their wiki pages for CSV access are no longer valid, the password provided does not work) and their SVN repositories do not contain the code to Eclipse IDE or the core plugins. The same problem also appears to apply to their GIT repositories. In particular I am looking for the source code of this *core* plugin class (not even java specific): \r\n\r\nplugin: org.eclipse.debug.core\r\n\r\nclass: org.eclipse.debug.core.model.IProcess\r\n\r\nFinally, I also tried to import the plugin as a fragment with source directory. There is no packaged source file. My last option is to decompile the class files, but please tell me there is a better repository I can access with read only permission? Again their wiki is either outdated or not pointing me to the core code but other project repos.","title":"How to download Eclipse&#39;s Source code?","body":"<p>After spending awhile (their wiki pages for CSV access are no longer valid, the password provided does not work) and their SVN repositories do not contain the code to Eclipse IDE or the core plugins. The same problem also appears to apply to their GIT repositories. In particular I am looking for the source code of this <em>core</em> plugin class (not even java specific): </p>\n\n<p>plugin: org.eclipse.debug.core</p>\n\n<p>class: org.eclipse.debug.core.model.IProcess</p>\n\n<p>Finally, I also tried to import the plugin as a fragment with source directory. There is no packaged source file. My last option is to decompile the class files, but please tell me there is a better repository I can access with read only permission? Again their wiki is either outdated or not pointing me to the core code but other project repos.</p>\n"},{"tags":["java","arrays","average","sub-array"],"answers":[{"tags":[],"owner":{"account_id":21964729,"reputation":1798,"user_id":16242139,"display_name":"Zero"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689077437,"creation_date":1689077437,"answer_id":76661841,"question_id":76660197,"body_markdown":"You need move \r\n\r\n    max = Math.max(max, s);\r\n\r\n out of the inner loop, so that it takes the max sum of the entire window of `k` numbers. Putting it inside will fail if windows have any trailing negative values.\r\n\r\nAlso, reset `s` to 0 with each window check.\r\n\r\nFinal code will be\r\n\r\n    class Solution {\r\n        public double findMaxAverage(int[] nums, int k) {\r\n            int n = nums.length;\r\n            double s = 0;\r\n            double max = Integer.MIN_VALUE;\r\n    \r\n            if (n == 1){\r\n                max = Double.valueOf(nums[0]);\r\n            } else{\r\n                for(int i = 0; i &lt; n-k; i++){\r\n                    s = 0;\r\n                    for(int j = i; j &lt; i+k; j++){\r\n                        s += nums[j]; \r\n                    }\r\n                    max = Math.max(max, s);\r\n                }\r\n            }\r\n    \r\n            return max/k;\r\n        }\r\n    }\r\n\r\nThis code is passing LeetCode testcases.","title":"Leetcode 643. Maximum Average Subarray I","body":"<p>You need move</p>\n<pre><code>max = Math.max(max, s);\n</code></pre>\n<p>out of the inner loop, so that it takes the max sum of the entire window of <code>k</code> numbers. Putting it inside will fail if windows have any trailing negative values.</p>\n<p>Also, reset <code>s</code> to 0 with each window check.</p>\n<p>Final code will be</p>\n<pre><code>class Solution {\n    public double findMaxAverage(int[] nums, int k) {\n        int n = nums.length;\n        double s = 0;\n        double max = Integer.MIN_VALUE;\n\n        if (n == 1){\n            max = Double.valueOf(nums[0]);\n        } else{\n            for(int i = 0; i &lt; n-k; i++){\n                s = 0;\n                for(int j = i; j &lt; i+k; j++){\n                    s += nums[j]; \n                }\n                max = Math.max(max, s);\n            }\n        }\n\n        return max/k;\n    }\n}\n</code></pre>\n<p>This code is passing LeetCode testcases.</p>\n"},{"comments":[{"owner":{"account_id":21964729,"reputation":1798,"user_id":16242139,"display_name":"Zero"},"score":0,"creation_date":1689164973,"post_id":76667211,"comment_id":135174259,"body_markdown":"Just wanted to ask, how is your *optimized* code has linear time, whereas initial code has quadratic time, as you said?","body":"Just wanted to ask, how is your <i>optimized</i> code has linear time, whereas initial code has quadratic time, as you said?"},{"owner":{"account_id":17080101,"reputation":93,"user_id":12358700,"display_name":"Jesse"},"score":0,"creation_date":1689218025,"post_id":76667211,"comment_id":135183015,"body_markdown":"@Zero In the &quot;original code,&quot; there are two nested loops. The outer loop runs for (n - k + 1) iterations, and the inner loop runs for k iterations. As a result, the total number of comparisons is (n - k + 1) * k, which leads to a time complexity of O(n^2).","body":"@Zero In the &quot;original code,&quot; there are two nested loops. The outer loop runs for (n - k + 1) iterations, and the inner loop runs for k iterations. As a result, the total number of comparisons is (n - k + 1) * k, which leads to a time complexity of O(n^2)."},{"owner":{"account_id":17080101,"reputation":93,"user_id":12358700,"display_name":"Jesse"},"score":0,"creation_date":1689218044,"post_id":76667211,"comment_id":135183016,"body_markdown":"@Zero \nIn the &quot;optimized code,&quot; the sliding window technique is used to eliminate the inner loop. It maintains two pointers, l and r, representing the left and right boundaries of the current window. In each iteration, the window moves by incrementing r and decrementing l. The current subarray sum is updated by subtracting the value of the left element of the window and adding the value of the right element. This approach only requires traversing the array once, resulting in a time complexity of O(n).","body":"@Zero  In the &quot;optimized code,&quot; the sliding window technique is used to eliminate the inner loop. It maintains two pointers, l and r, representing the left and right boundaries of the current window. In each iteration, the window moves by incrementing r and decrementing l. The current subarray sum is updated by subtracting the value of the left element of the window and adding the value of the right element. This approach only requires traversing the array once, resulting in a time complexity of O(n)."},{"owner":{"account_id":21964729,"reputation":1798,"user_id":16242139,"display_name":"Zero"},"score":0,"creation_date":1689247121,"post_id":76667211,"comment_id":135187872,"body_markdown":"I know the sliding window technique @jesse, and as you explained above the original code, indeed has two nested loops, but so does your optimized code, just changed from `while` to `for`. You explained upper code runs for `(n-k+1)*k` which is the same for optimized code also. It is just that `k` is taken constant, so it is not counted in time complexity and it is therefore calculated as `O(n)` (in both cases, as there&#39;s only one `n`). Sliding Window is somewhat confusing at the start, and sometimes even instructors also confuse it but do the calculations mate.","body":"I know the sliding window technique @jesse, and as you explained above the original code, indeed has two nested loops, but so does your optimized code, just changed from <code>while</code> to <code>for</code>. You explained upper code runs for <code>(n-k+1)*k</code> which is the same for optimized code also. It is just that <code>k</code> is taken constant, so it is not counted in time complexity and it is therefore calculated as <code>O(n)</code> (in both cases, as there&#39;s only one <code>n</code>). Sliding Window is somewhat confusing at the start, and sometimes even instructors also confuse it but do the calculations mate."},{"owner":{"account_id":17080101,"reputation":93,"user_id":12358700,"display_name":"Jesse"},"score":0,"creation_date":1689306096,"post_id":76667211,"comment_id":135197741,"body_markdown":"@Zero In this problem, k is not constant. There are constraints on `k`: `n == nums.length, 1 &lt;= k &lt;= n &lt;= 10^5`. Let&#39;s consider a case where `n = 10^5` and `k = n / 2`. In this scenario, the original code runs for `(n/2+1)*n/2`, which is almost equal to `n^2`. Therefore, in terms of Big O notation, we would refer to the time complexity as `O(n^2)`, as we always consider the worst case scenario.&quot;","body":"@Zero In this problem, k is not constant. There are constraints on <code>k</code>: <code>n == nums.length, 1 &lt;= k &lt;= n &lt;= 10^5</code>. Let&#39;s consider a case where <code>n = 10^5</code> and <code>k = n &#47; 2</code>. In this scenario, the original code runs for <code>(n&#47;2+1)*n&#47;2</code>, which is almost equal to <code>n^2</code>. Therefore, in terms of Big O notation, we would refer to the time complexity as <code>O(n^2)</code>, as we always consider the worst case scenario.&quot;"},{"owner":{"account_id":21964729,"reputation":1798,"user_id":16242139,"display_name":"Zero"},"score":0,"creation_date":1689329566,"post_id":76667211,"comment_id":135201298,"body_markdown":"Oh sorry @Jesse, I misunderstood your solution.","body":"Oh sorry @Jesse, I misunderstood your solution."}],"tags":[],"owner":{"account_id":17080101,"reputation":93,"user_id":12358700,"display_name":"Jesse"},"comment_count":6,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1689137910,"creation_date":1689137116,"answer_id":76667211,"question_id":76660197,"body_markdown":"## Fixed the solution\r\nHere are the issues with the provided solution:\r\n\r\n1. The inner loop&#39;s iteration condition is incorrect. It should be `j &lt;= i + k - 1` instead of `j &lt; i + k - 1`. The original condition causes the loop to terminate one index before the desired subarray length.\r\n\r\n2. The accumulation of the sum (`s`) is not reset correctly within each iteration of the outer loop. Currently, the sum keeps accumulating from the previous subarray, leading to incorrect results. The `s` variable should be reset to 0 at the beginning of each outer loop iteration.\r\n\r\n3. The maximum value (`max`) is not being calculated correctly. The current implementation compares the cumulative sum (`s`) with the maximum value (`max`) within the inner loop, which results in incorrect values. Instead, the maximum value should be updated after each subarray&#39;s sum is calculated, not within the inner loop.\r\n\r\nHere&#39;s the corrected code:\r\n\r\n```Java\r\nclass Solution {\r\n    public double findMaxAverage(int[] nums, int k) {\r\n        int n = nums.length;\r\n        double max = Integer.MIN_VALUE;\r\n\r\n        if (n == 1) {\r\n            max = Double.valueOf(nums[0]);\r\n        } else {\r\n            for (int i = 0; i &lt;= n - k; i++) {\r\n                double s = 0;\r\n                for (int j = i; j &lt;= i + k - 1; j++) {\r\n                    s += nums[j];\r\n                }\r\n                max = Math.max(max, s);\r\n            }\r\n        }\r\n        return max / k;\r\n    }\r\n}\r\n```\r\n\r\nWith these corrections, the solution should correctly calculate and return the maximum average value.\r\n\r\n## Optimization\r\nDue to the time complexity issue of the previous code, which was `O(n^2)` and resulted in **exceeding the time limit**, it was necessary to optimize it using the sliding window technique to achieve a time complexity of `O(n)`. Here&#39;s the optimized code:\r\n\r\n```Java\r\nclass Solution {\r\n    public double findMaxAverage(int[] nums, int k) {\r\n        int n = nums.length;\r\n        int maxSubSum = Integer.MIN_VALUE;\r\n        int currentSubSum = 0;\r\n        int l = 0;\r\n        int r = 0;\r\n        while (l + k - 1 &lt; n) {\r\n            while (r - l + 1 &lt;= k) {\r\n                currentSubSum += nums[r];\r\n                r++;\r\n            }\r\n            maxSubSum = Math.max(maxSubSum, currentSubSum);\r\n            currentSubSum -= nums[l];\r\n            l++;\r\n        }\r\n        return (double) maxSubSum / k;\r\n    }\r\n}\r\n```\r\n\r\n## The explanation of the optimized solution\r\n\r\nHere&#39;s the explanation of the optimized solution with a time complexity of `O(n)`:\r\n\r\nThe optimized solution uses a sliding window technique to find the maximum subarray sum. Here&#39;s how it works:\r\n\r\n1. Initialize the variables `maxSubSum` and `currentSubSum` to track the maximum subarray sum and the sum of the current subarray, respectively. Set `maxSubSum` to `Integer.MIN_VALUE` to ensure correct initialization.\r\n\r\n2. Initialize two pointers, `l` and `r`, representing the left and right boundaries of the subarray.\r\n\r\n3. While the right boundary `r` is within the array bounds and while the subarray length `(r - l + 1)` is less than or equal to `k`, perform the following steps:\r\n\r\n   - Add the element at the right boundary (`nums[r]`) to the `currentSubSum`.\r\n   - Increment the right boundary `r`.\r\n\r\n4. Once the subarray length exceeds `k`, update the `maxSubSum` by comparing it with the `currentSubSum`. Take the maximum of the two values.\r\n\r\n5. Subtract the element at the left boundary (`nums[l]`) from the `currentSubSum` and increment the left boundary `l`.\r\n\r\n6. Repeat steps 3 to 5 until the left boundary `l` reaches the end of the array.\r\n\r\n7. Finally, return the maximum subarray sum (`maxSubSum`) divided by `k` as the maximum average value.\r\n\r\nThis optimized solution avoids unnecessary recalculations by using a sliding window approach, reducing the time complexity to `O(n)`.","title":"Leetcode 643. Maximum Average Subarray I","body":"<h2>Fixed the solution</h2>\n<p>Here are the issues with the provided solution:</p>\n<ol>\n<li><p>The inner loop's iteration condition is incorrect. It should be <code>j &lt;= i + k - 1</code> instead of <code>j &lt; i + k - 1</code>. The original condition causes the loop to terminate one index before the desired subarray length.</p>\n</li>\n<li><p>The accumulation of the sum (<code>s</code>) is not reset correctly within each iteration of the outer loop. Currently, the sum keeps accumulating from the previous subarray, leading to incorrect results. The <code>s</code> variable should be reset to 0 at the beginning of each outer loop iteration.</p>\n</li>\n<li><p>The maximum value (<code>max</code>) is not being calculated correctly. The current implementation compares the cumulative sum (<code>s</code>) with the maximum value (<code>max</code>) within the inner loop, which results in incorrect values. Instead, the maximum value should be updated after each subarray's sum is calculated, not within the inner loop.</p>\n</li>\n</ol>\n<p>Here's the corrected code:</p>\n<pre><code>class Solution {\n    public double findMaxAverage(int[] nums, int k) {\n        int n = nums.length;\n        double max = Integer.MIN_VALUE;\n\n        if (n == 1) {\n            max = Double.valueOf(nums[0]);\n        } else {\n            for (int i = 0; i &lt;= n - k; i++) {\n                double s = 0;\n                for (int j = i; j &lt;= i + k - 1; j++) {\n                    s += nums[j];\n                }\n                max = Math.max(max, s);\n            }\n        }\n        return max / k;\n    }\n}\n</code></pre>\n<p>With these corrections, the solution should correctly calculate and return the maximum average value.</p>\n<h2>Optimization</h2>\n<p>Due to the time complexity issue of the previous code, which was <code>O(n^2)</code> and resulted in <strong>exceeding the time limit</strong>, it was necessary to optimize it using the sliding window technique to achieve a time complexity of <code>O(n)</code>. Here's the optimized code:</p>\n<pre><code>class Solution {\n    public double findMaxAverage(int[] nums, int k) {\n        int n = nums.length;\n        int maxSubSum = Integer.MIN_VALUE;\n        int currentSubSum = 0;\n        int l = 0;\n        int r = 0;\n        while (l + k - 1 &lt; n) {\n            while (r - l + 1 &lt;= k) {\n                currentSubSum += nums[r];\n                r++;\n            }\n            maxSubSum = Math.max(maxSubSum, currentSubSum);\n            currentSubSum -= nums[l];\n            l++;\n        }\n        return (double) maxSubSum / k;\n    }\n}\n</code></pre>\n<h2>The explanation of the optimized solution</h2>\n<p>Here's the explanation of the optimized solution with a time complexity of <code>O(n)</code>:</p>\n<p>The optimized solution uses a sliding window technique to find the maximum subarray sum. Here's how it works:</p>\n<ol>\n<li><p>Initialize the variables <code>maxSubSum</code> and <code>currentSubSum</code> to track the maximum subarray sum and the sum of the current subarray, respectively. Set <code>maxSubSum</code> to <code>Integer.MIN_VALUE</code> to ensure correct initialization.</p>\n</li>\n<li><p>Initialize two pointers, <code>l</code> and <code>r</code>, representing the left and right boundaries of the subarray.</p>\n</li>\n<li><p>While the right boundary <code>r</code> is within the array bounds and while the subarray length <code>(r - l + 1)</code> is less than or equal to <code>k</code>, perform the following steps:</p>\n<ul>\n<li>Add the element at the right boundary (<code>nums[r]</code>) to the <code>currentSubSum</code>.</li>\n<li>Increment the right boundary <code>r</code>.</li>\n</ul>\n</li>\n<li><p>Once the subarray length exceeds <code>k</code>, update the <code>maxSubSum</code> by comparing it with the <code>currentSubSum</code>. Take the maximum of the two values.</p>\n</li>\n<li><p>Subtract the element at the left boundary (<code>nums[l]</code>) from the <code>currentSubSum</code> and increment the left boundary <code>l</code>.</p>\n</li>\n<li><p>Repeat steps 3 to 5 until the left boundary <code>l</code> reaches the end of the array.</p>\n</li>\n<li><p>Finally, return the maximum subarray sum (<code>maxSubSum</code>) divided by <code>k</code> as the maximum average value.</p>\n</li>\n</ol>\n<p>This optimized solution avoids unnecessary recalculations by using a sliding window approach, reducing the time complexity to <code>O(n)</code>.</p>\n"}],"owner":{"account_id":28993019,"reputation":3,"user_id":22208308,"display_name":"Gargi "},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":501,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76667211,"answer_count":2,"score":0,"last_activity_date":1689137910,"creation_date":1689065503,"question_id":76660197,"body_markdown":"Question - You are given an integer array nums consisting of n elements, and an integer k.Find a contiguous subarray whose length is equal to k that has the maximum average value and return this value.\r\nTest Case- nums = \\[1,12,-5,-6,50,3\\], k = 4\r\n\r\nThe answer I am getting is 12.00000 instead of 12.75000. This happens every time there a max value that is not completely divisible by k. Can someone tell me why?\r\n\r\nHere&#39;s my solution:\r\n\r\n```java\r\nclass Solution {\r\n    public double findMaxAverage(int[] nums, int k) {\r\n        int n = nums.length;\r\n        double s = 0;\r\n        double max = Integer.MIN_VALUE;\r\n\r\n        if (n == 1){\r\n            max = Double.valueOf(nums[0]);\r\n        } \r\n        else {\r\n            for (int i = 0; i &lt;= n-k; i++){\r\n                for(int j = i; j &lt; i+k-1; j++){\r\n                    s += nums[j]; \r\n                    max = Math.max(max, s);\r\n                }\r\n            }\r\n        }\r\n        return max/k;\r\n    }\r\n}\r\n```\r\n","title":"Leetcode 643. Maximum Average Subarray I","body":"<p>Question - You are given an integer array nums consisting of n elements, and an integer k.Find a contiguous subarray whose length is equal to k that has the maximum average value and return this value.\nTest Case- nums = [1,12,-5,-6,50,3], k = 4</p>\n<p>The answer I am getting is 12.00000 instead of 12.75000. This happens every time there a max value that is not completely divisible by k. Can someone tell me why?</p>\n<p>Here's my solution:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Solution {\n    public double findMaxAverage(int[] nums, int k) {\n        int n = nums.length;\n        double s = 0;\n        double max = Integer.MIN_VALUE;\n\n        if (n == 1){\n            max = Double.valueOf(nums[0]);\n        } \n        else {\n            for (int i = 0; i &lt;= n-k; i++){\n                for(int j = i; j &lt; i+k-1; j++){\n                    s += nums[j]; \n                    max = Math.max(max, s);\n                }\n            }\n        }\n        return max/k;\n    }\n}\n</code></pre>\n"},{"tags":["java","string","character","space"],"comments":[{"owner":{"account_id":1888781,"reputation":2007,"user_id":1707427,"display_name":"S&#246;ren"},"score":3,"creation_date":1688137093,"post_id":76590049,"comment_id":135037984,"body_markdown":"Don&#39;t try to replace anything. Think of it as building a new string from scratch.","body":"Don&#39;t try to replace anything. Think of it as building a new string from scratch."},{"owner":{"account_id":15847779,"reputation":4627,"user_id":11434552,"display_name":"Nexevis"},"score":1,"creation_date":1688137223,"post_id":76590049,"comment_id":135038008,"body_markdown":"Also I recommend using better variable names, using `a` `b` `c` and `d` is a nightmare for anyone trying to figure out the code, including yourself.","body":"Also I recommend using better variable names, using <code>a</code> <code>b</code> <code>c</code> and <code>d</code> is a nightmare for anyone trying to figure out the code, including yourself."},{"owner":{"display_name":"user6073886"},"score":0,"creation_date":1688137810,"post_id":76590049,"comment_id":135038130,"body_markdown":"You are setting your variables `String c` and `String d` redundantly many times. Setting a value only to immediately discard it and setting it to something else makes little sense. Having empty else blocks like `else;` also isn&#39;t really doing much except bloating your code. Removing some of the unnecessary code your code already becomes much more compact. And if you just get rid if the pointless char variables and instead directly work from building up an empty String you&#39;ll also get the result you want:  https://ideone.com/skH6BO","body":"You are setting your variables <code>String c</code> and <code>String d</code> redundantly many times. Setting a value only to immediately discard it and setting it to something else makes little sense. Having empty else blocks like <code>else;</code> also isn&#39;t really doing much except bloating your code. Removing some of the unnecessary code your code already becomes much more compact. And if you just get rid if the pointless char variables and instead directly work from building up an empty String you&#39;ll also get the result you want:  <a href=\"https://ideone.com/skH6BO\" rel=\"nofollow noreferrer\">ideone.com/skH6BO</a>"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1688138894,"post_id":76590049,"comment_id":135038351,"body_markdown":"I&#39;m not sure if I fully understand the objective, but would it be met with `str = str.replaceAll(&quot;^oz.*&quot;, &quot;oz&quot;);`? (Not that I&#39;m saying you should do it like that)","body":"I&#39;m not sure if I fully understand the objective, but would it be met with <code>str = str.replaceAll(&quot;^oz.*&quot;, &quot;oz&quot;);</code>? (Not that I&#39;m saying you should do it like that)"},{"owner":{"account_id":1888781,"reputation":2007,"user_id":1707427,"display_name":"S&#246;ren"},"score":0,"creation_date":1688139439,"post_id":76590049,"comment_id":135038487,"body_markdown":"@g00se no. `startOz(&quot;open&quot;)` should return `&quot;o&quot;` and `startOz(&quot;azimuth&quot;)` should return `&quot;z&quot;`. That is, if I understand OP correctly.","body":"@g00se no. <code>startOz(&quot;open&quot;)</code> should return <code>&quot;o&quot;</code> and <code>startOz(&quot;azimuth&quot;)</code> should return <code>&quot;z&quot;</code>. That is, if I understand OP correctly."},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":1,"creation_date":1688139588,"post_id":76590049,"comment_id":135038520,"body_markdown":"`return ((str.length() &gt; 0 &amp;&amp; str.charAt(0) == &#39;o&#39;) ? &quot;o&quot; : &quot;&quot;) + ((str.length() &gt; 1 &amp;&amp; str.charAt(1) == &#39;z&#39;) ? &quot;z&quot; : &quot;&quot;);`?","body":"<code>return ((str.length() &gt; 0 &amp;&amp; str.charAt(0) == &#39;o&#39;) ? &quot;o&quot; : &quot;&quot;) + ((str.length() &gt; 1 &amp;&amp; str.charAt(1) == &#39;z&#39;) ? &quot;z&quot; : &quot;&quot;);</code>?"},{"owner":{"account_id":24885,"reputation":30828,"user_id":63550,"accept_rate":78,"display_name":"Peter Mortensen"},"score":0,"creation_date":1688200950,"post_id":76590049,"comment_id":135044600,"body_markdown":"Related: [Why is String immutable in Java?](https://stackoverflow.com/questions/22397861/why-is-string-immutable-in-java)","body":"Related: <a href=\"https://stackoverflow.com/questions/22397861/why-is-string-immutable-in-java\">Why is String immutable in Java?</a>"}],"answers":[{"comments":[{"owner":{"account_id":5919781,"reputation":29352,"user_id":4657412,"display_name":"DavidW"},"score":3,"creation_date":1688183355,"post_id":76592365,"comment_id":135043422,"body_markdown":"This answer looks AI generated","body":"This answer looks AI generated"}],"tags":[],"owner":{"account_id":7531034,"reputation":1,"user_id":5719229,"display_name":"S.N"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1688161445,"creation_date":1688161445,"answer_id":76592365,"question_id":76590049,"body_markdown":"To **achieve** the desired behavior without using empty strings, null characters, Unicode characters, or minimum values, you can **modify** your code as follows:\r\n\r\n    public String startOz(String str) {\r\n      String result = &quot;&quot;;\r\n    \r\n      if (str.length() &gt;= 1 &amp;&amp; str.charAt(0) == &#39;o&#39;) {\r\n        result += str.charAt(0);\r\n      }\r\n    \r\n      if (str.length() &gt;= 2 &amp;&amp; str.charAt(1) == &#39;z&#39;) {\r\n        result += str.charAt(1);\r\n      }\r\n    \r\n      return result;\r\n    }\r\n\r\n","title":"How do I delete the space character?","body":"<p>To <strong>achieve</strong> the desired behavior without using empty strings, null characters, Unicode characters, or minimum values, you can <strong>modify</strong> your code as follows:</p>\n<pre><code>public String startOz(String str) {\n  String result = &quot;&quot;;\n\n  if (str.length() &gt;= 1 &amp;&amp; str.charAt(0) == 'o') {\n    result += str.charAt(0);\n  }\n\n  if (str.length() &gt;= 2 &amp;&amp; str.charAt(1) == 'z') {\n    result += str.charAt(1);\n  }\n\n  return result;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689137104,"creation_date":1689137104,"answer_id":76667209,"question_id":76590049,"body_markdown":"&gt; _&quot;... I&#39;m trying to find out how to make the characters empty strings ...&quot;_\r\n\r\nYou can&#39;t, you&#39;ll need to use a _String_ value.\r\n\r\nYou are implying the following.&amp;nbsp; Which is a syntax error.\r\n\r\n```java\r\nchar a = &#39;&#39;;\r\n```\r\n\r\nIt&#39;s because the _char_ is a primitive data-type, thus it requires a value.\r\n\r\nWhenever I run into this situation, I switch to a _String_ value.","title":"How do I delete the space character?","body":"<blockquote>\n<p><em>&quot;... I'm trying to find out how to make the characters empty strings ...&quot;</em></p>\n</blockquote>\n<p>You can't, you'll need to use a <em>String</em> value.</p>\n<p>You are implying the following.  Which is a syntax error.</p>\n<pre class=\"lang-java prettyprint-override\"><code>char a = '';\n</code></pre>\n<p>It's because the <em>char</em> is a primitive data-type, thus it requires a value.</p>\n<p>Whenever I run into this situation, I switch to a <em>String</em> value.</p>\n"}],"owner":{"account_id":28251150,"reputation":1,"user_id":21597386,"display_name":"hasansabbath71"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":80,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1689137104,"creation_date":1688136848,"question_id":76590049,"body_markdown":"&gt; Given a string, return a string made of the first two characters (if present), however include the first character only if it is &#39;o&#39; and include the second only if it is &#39;z&#39;, so &quot;ozymandias&quot; yields &quot;oz&quot;.\r\n\r\nis the question I&#39;m trying to solve. I can&#39;t change characters to be empty strings. I know the code is messy, but I&#39;m trying to find out how to make the characters empty strings without using null character, Unicode, or min_value, etc. How do I do it?\r\n\r\n    public String startOz(String str) {\r\n      char a = &#39; &#39;;\r\n      char b = &#39; &#39;;\r\n      String c = &quot;&quot;;\r\n      String d =&quot;&quot;;\r\n      if(str.length() &lt;= 1){\r\n        if(str.length() == 0){\r\n          return &quot;&quot;;\r\n        }\r\n        else\r\n          if(str.charAt(0) == &#39;o&#39;){\r\n            return str;\r\n          }\r\n          else;\r\n            return &quot;&quot;;\r\n\r\n      }\r\n      else{\r\n\r\n        if(str.charAt(0) == &#39;o&#39;){\r\n          a = &#39;o&#39;;\r\n          c = Character.toString(a);\r\n        }\r\n        else;\r\n          c = Character.toString(a);\r\n          c = c.substring(1);\r\n        if(str.charAt(1) == &#39;z&#39;){\r\n          b = &#39;z&#39;;\r\n          d = Character.toString(b);\r\n        }\r\n        else;\r\n          d = Character.toString(b);\r\n          d = d.substring(1);\r\n\r\n        c = Character.toString(a);\r\n        d = Character.toString(b);\r\n        return c + d;\r\n      }\r\n    }\r\n\r\n\r\n\r\n","title":"How do I delete the space character?","body":"<blockquote>\n<p>Given a string, return a string made of the first two characters (if present), however include the first character only if it is 'o' and include the second only if it is 'z', so &quot;ozymandias&quot; yields &quot;oz&quot;.</p>\n</blockquote>\n<p>is the question I'm trying to solve. I can't change characters to be empty strings. I know the code is messy, but I'm trying to find out how to make the characters empty strings without using null character, Unicode, or min_value, etc. How do I do it?</p>\n<pre><code>public String startOz(String str) {\n  char a = ' ';\n  char b = ' ';\n  String c = &quot;&quot;;\n  String d =&quot;&quot;;\n  if(str.length() &lt;= 1){\n    if(str.length() == 0){\n      return &quot;&quot;;\n    }\n    else\n      if(str.charAt(0) == 'o'){\n        return str;\n      }\n      else;\n        return &quot;&quot;;\n\n  }\n  else{\n\n    if(str.charAt(0) == 'o'){\n      a = 'o';\n      c = Character.toString(a);\n    }\n    else;\n      c = Character.toString(a);\n      c = c.substring(1);\n    if(str.charAt(1) == 'z'){\n      b = 'z';\n      d = Character.toString(b);\n    }\n    else;\n      d = Character.toString(b);\n      d = d.substring(1);\n\n    c = Character.toString(a);\n    d = Character.toString(b);\n    return c + d;\n  }\n}\n</code></pre>\n"},{"tags":["java","spring","mongodb","ubuntu","mongotemplate"],"comments":[{"owner":{"account_id":3631143,"reputation":55363,"user_id":3027266,"accept_rate":75,"display_name":"Wernfried Domscheit"},"score":0,"creation_date":1688563589,"post_id":76620741,"comment_id":135090075,"body_markdown":"Please don&#39;t paste screenshots, use formatted text. See https://meta.stackoverflow.com/q/285551","body":"Please don&#39;t paste screenshots, use formatted text. See <a href=\"https://meta.stackoverflow.com/q/285551\">meta.stackoverflow.com/q/285551</a>"}],"answers":[{"tags":[],"owner":{"account_id":12247989,"reputation":123,"user_id":8939178,"display_name":"Masoom Raza"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689136551,"creation_date":1689136551,"answer_id":76667180,"question_id":76620741,"body_markdown":"There might be some configuration issue with the tutorial provided in the implementation. The proper implementation of spring data-mongotemplate is given in [javainterviewpoint][1]\r\n\r\n\r\n  [1]: https://www.javainterviewpoint.com/spring-data-mongodb-example/","title":"Read operation to server /127.0.0.1:27017 failed on database mongotmplt","body":"<p>There might be some configuration issue with the tutorial provided in the implementation. The proper implementation of spring data-mongotemplate is given in <a href=\"https://www.javainterviewpoint.com/spring-data-mongodb-example/\" rel=\"nofollow noreferrer\">javainterviewpoint</a></p>\n"}],"owner":{"account_id":12247989,"reputation":123,"user_id":8939178,"display_name":"Masoom Raza"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689136551,"creation_date":1688563050,"question_id":76620741,"body_markdown":"I am working on spring + mongodb project on Ubuntu 22.04.2 LTS. I followed [Spring Data MongoDB][1] but its giving me connection error. The data is neither getting saved nor retrieve. Below are the configuration of mongodb in my ubuntu:[![enter image description here][2]][2]. I guess I am using newer version of mongodb which is causing conflict. Below are the configuration files: 1. SpringMongoConfig1.java, where I have created db &quot;mongotmplt&quot; and collection &quot;users&quot; which is empty currently.\r\n```\r\n@Configuration\r\npublic class SpringMongoConfig1 {\r\n\tpublic @Bean\r\n\tMongoDbFactory mongoDbFactory() throws Exception {\r\n\t\treturn new SimpleMongoDbFactory(new MongoClient(), &quot;mongotmplt&quot;);\r\n\t}\r\n\tpublic @Bean\r\n\tMongoTemplate mongoTemplate() throws Exception {\r\n\t\tMongoTemplate mongoTemplate = new MongoTemplate(mongoDbFactory());\t\r\n\t\treturn mongoTemplate;\t\r\n\t}\r\n}\r\n```\r\n2.SpringConfig.xml\r\n```\r\n\t&lt;mongo:mongo host=&quot;127.0.0.1&quot; port=&quot;27017&quot; /&gt;\r\n\t&lt;mongo:db-factory dbname=&quot;mongotmplt&quot; /&gt;\r\n\r\n\t&lt;bean id=&quot;mongoTemplate&quot; class=&quot;org.springframework.data.mongodb.core.MongoTemplate&quot;&gt;\r\n\t\t&lt;constructor-arg name=&quot;mongoDbFactory&quot; ref=&quot;mongoDbFactory&quot; /&gt;\r\n\t&lt;/bean&gt;\r\n```\r\nThe error is :\r\n```\r\nException in thread &quot;main&quot; org.springframework.dao.DataAccessResourceFailureException: Read operation to server /127.0.0.1:27017 failed on database mongotmplt; nested exception is com.mongodb.MongoException$Network: Read operation to server /127.0.0.1:27017 failed on database mongotmplt\r\n\tat org.springframework.data.mongodb.core.MongoExceptionTranslator.translateExceptionIfPossible(MongoExceptionTranslator.java:56)\r\n\tat org.springframework.data.mongodb.core.MongoTemplate.potentiallyConvertRuntimeException(MongoTemplate.java:1665)\r\n\tat org.springframework.data.mongodb.core.MongoTemplate.executeFindOneInternal(MongoTemplate.java:1495)\r\n\tat org.springframework.data.mongodb.core.MongoTemplate.doFindOne(MongoTemplate.java:1302)\r\n\tat org.springframework.data.mongodb.core.MongoTemplate.findOne(MongoTemplate.java:475)\r\n\tat org.springframework.data.mongodb.core.MongoTemplate.findOne(MongoTemplate.java:470)\r\n\tat com.example.mongo2.Mongo2Application.main(Mongo2Application.java:37)\r\nCaused by: com.mongodb.MongoException$Network: Read operation to server /127.0.0.1:27017 failed on database mongotmplt\r\n\tat com.mongodb.DBTCPConnector.innerCall(DBTCPConnector.java:253)\r\n\tat com.mongodb.DBTCPConnector.call(DBTCPConnector.java:216)\r\n\tat com.mongodb.DBApiLayer$MyCollection.__find(DBApiLayer.java:288)\r\n\tat com.mongodb.DBApiLayer$MyCollection.__find(DBApiLayer.java:273)\r\n\tat com.mongodb.DBCollection.findOne(DBCollection.java:728)\r\n\tat com.mongodb.DBCollection.findOne(DBCollection.java:670)\r\n\tat org.springframework.data.mongodb.core.MongoTemplate$FindOneCallback.doInCollection(MongoTemplate.java:1720)\r\n\tat org.springframework.data.mongodb.core.MongoTemplate$FindOneCallback.doInCollection(MongoTemplate.java:1705)\r\n\tat org.springframework.data.mongodb.core.MongoTemplate.executeFindOneInternal(MongoTemplate.java:1491)\r\n```\r\n\r\n  [1]: https://mkyong.com/mongodb/spring-data-mongodb-hello-world-example/\r\n  [2]: https://i.stack.imgur.com/ZUk5E.png","title":"Read operation to server /127.0.0.1:27017 failed on database mongotmplt","body":"<p>I am working on spring + mongodb project on Ubuntu 22.04.2 LTS. I followed <a href=\"https://mkyong.com/mongodb/spring-data-mongodb-hello-world-example/\" rel=\"nofollow noreferrer\">Spring Data MongoDB</a> but its giving me connection error. The data is neither getting saved nor retrieve. Below are the configuration of mongodb in my ubuntu:<a href=\"https://i.stack.imgur.com/ZUk5E.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZUk5E.png\" alt=\"enter image description here\" /></a>. I guess I am using newer version of mongodb which is causing conflict. Below are the configuration files: 1. SpringMongoConfig1.java, where I have created db &quot;mongotmplt&quot; and collection &quot;users&quot; which is empty currently.</p>\n<pre><code>@Configuration\npublic class SpringMongoConfig1 {\n    public @Bean\n    MongoDbFactory mongoDbFactory() throws Exception {\n        return new SimpleMongoDbFactory(new MongoClient(), &quot;mongotmplt&quot;);\n    }\n    public @Bean\n    MongoTemplate mongoTemplate() throws Exception {\n        MongoTemplate mongoTemplate = new MongoTemplate(mongoDbFactory());  \n        return mongoTemplate;   \n    }\n}\n</code></pre>\n<p>2.SpringConfig.xml</p>\n<pre><code>    &lt;mongo:mongo host=&quot;127.0.0.1&quot; port=&quot;27017&quot; /&gt;\n    &lt;mongo:db-factory dbname=&quot;mongotmplt&quot; /&gt;\n\n    &lt;bean id=&quot;mongoTemplate&quot; class=&quot;org.springframework.data.mongodb.core.MongoTemplate&quot;&gt;\n        &lt;constructor-arg name=&quot;mongoDbFactory&quot; ref=&quot;mongoDbFactory&quot; /&gt;\n    &lt;/bean&gt;\n</code></pre>\n<p>The error is :</p>\n<pre><code>Exception in thread &quot;main&quot; org.springframework.dao.DataAccessResourceFailureException: Read operation to server /127.0.0.1:27017 failed on database mongotmplt; nested exception is com.mongodb.MongoException$Network: Read operation to server /127.0.0.1:27017 failed on database mongotmplt\n    at org.springframework.data.mongodb.core.MongoExceptionTranslator.translateExceptionIfPossible(MongoExceptionTranslator.java:56)\n    at org.springframework.data.mongodb.core.MongoTemplate.potentiallyConvertRuntimeException(MongoTemplate.java:1665)\n    at org.springframework.data.mongodb.core.MongoTemplate.executeFindOneInternal(MongoTemplate.java:1495)\n    at org.springframework.data.mongodb.core.MongoTemplate.doFindOne(MongoTemplate.java:1302)\n    at org.springframework.data.mongodb.core.MongoTemplate.findOne(MongoTemplate.java:475)\n    at org.springframework.data.mongodb.core.MongoTemplate.findOne(MongoTemplate.java:470)\n    at com.example.mongo2.Mongo2Application.main(Mongo2Application.java:37)\nCaused by: com.mongodb.MongoException$Network: Read operation to server /127.0.0.1:27017 failed on database mongotmplt\n    at com.mongodb.DBTCPConnector.innerCall(DBTCPConnector.java:253)\n    at com.mongodb.DBTCPConnector.call(DBTCPConnector.java:216)\n    at com.mongodb.DBApiLayer$MyCollection.__find(DBApiLayer.java:288)\n    at com.mongodb.DBApiLayer$MyCollection.__find(DBApiLayer.java:273)\n    at com.mongodb.DBCollection.findOne(DBCollection.java:728)\n    at com.mongodb.DBCollection.findOne(DBCollection.java:670)\n    at org.springframework.data.mongodb.core.MongoTemplate$FindOneCallback.doInCollection(MongoTemplate.java:1720)\n    at org.springframework.data.mongodb.core.MongoTemplate$FindOneCallback.doInCollection(MongoTemplate.java:1705)\n    at org.springframework.data.mongodb.core.MongoTemplate.executeFindOneInternal(MongoTemplate.java:1491)\n</code></pre>\n"},{"tags":["java","spring-boot","unit-testing","autowired"],"answers":[{"tags":[],"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1688998685,"creation_date":1687446633,"answer_id":76533314,"question_id":76527454,"body_markdown":"There is a dedicated annotation `@TestPropertySource` to enable testing of `ConfigurationProperties`. This should work as expected:\r\n```\r\n@ExtendWith(SpringExtension.class)\r\n@EnableConfigurationProperties(value = SpringNyseFeedConfig .class)\r\n@TestPropertySource(&quot;/application-test.properties&quot;)\r\npublic class SpringNyseFeedConfigTest {\r\n\r\n    @Autowired\r\n    private SpringNyseFeedConfig config;\r\n// ...\r\n}\r\n```\r\nPlease note: I&#39;m intentionally using properties instead YAML file because the latter doesn&#39;t work properly with tests.\r\n\r\nBased on: [https://www.baeldung.com/spring-boot-testing-configurationproperties][1]\r\n\r\n\r\n  [1]: https://www.baeldung.com/spring-boot-testing-configurationproperties","title":"Spring Boot Unit Test with @Autowired how to get it to to work without starting entire Application","body":"<p>There is a dedicated annotation <code>@TestPropertySource</code> to enable testing of <code>ConfigurationProperties</code>. This should work as expected:</p>\n<pre><code>@ExtendWith(SpringExtension.class)\n@EnableConfigurationProperties(value = SpringNyseFeedConfig .class)\n@TestPropertySource(&quot;/application-test.properties&quot;)\npublic class SpringNyseFeedConfigTest {\n\n    @Autowired\n    private SpringNyseFeedConfig config;\n// ...\n}\n</code></pre>\n<p>Please note: I'm intentionally using properties instead YAML file because the latter doesn't work properly with tests.</p>\n<p>Based on: <a href=\"https://www.baeldung.com/spring-boot-testing-configurationproperties\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-boot-testing-configurationproperties</a></p>\n"},{"comments":[{"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"score":0,"creation_date":1688998725,"post_id":76533361,"comment_id":135147077,"body_markdown":"This is Kotlin. The question is about Java.","body":"This is Kotlin. The question is about Java."},{"owner":{"account_id":480584,"reputation":8228,"user_id":893898,"accept_rate":42,"display_name":"Hantsy"},"score":1,"creation_date":1689135805,"post_id":76533361,"comment_id":135168619,"body_markdown":"@Mar-Z It is easy to convert it to Java.","body":"@Mar-Z It is easy to convert it to Java."}],"tags":[],"owner":{"account_id":480584,"reputation":8228,"user_id":893898,"accept_rate":42,"display_name":"Hantsy"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689135782,"creation_date":1687446982,"answer_id":76533361,"question_id":76527454,"body_markdown":"Use `ApplicationRunner` to assemble the context.\r\n\r\n```kotlin \r\n// kotlin code fragment\r\nclass YourTests{\r\n\r\n    private val contextRunner = ApplicationContextRunner()\r\n\r\n    @Test\r\n    fun testAppProperties() {\r\n        contextRunner\r\n            .withUserConfiguration(YourConfig::class.java)\r\n            .run {\r\n                val bean: YourBean = it.getBean(YourBean::class.java)\r\n                assertThat(bean.baseUrl).isEqualTo(&quot;http://localhost:8080&quot;)\r\n\r\n            }\r\n    }\r\n}\r\n```\r\n\r\nJava version:\r\n\r\n```java\r\npublic class YourTests{\r\n\r\n    private final ApplicationContextRunner contextRunner = new ApplicationContextRunner();\r\n\r\n    @Test\r\n    public void testAppProperties() {\r\n        contextRunner\r\n            .withUserConfiguration(YourConfig.class)\r\n            .run( ctx -&gt; {\r\n                var bean = ctx.getBean(YourBean.class);\r\n                assertThat(bean.baseUrl).isEqualTo(&quot;http://localhost:8080&quot;);\r\n\r\n           });\r\n    }\r\n}\r\n```","title":"Spring Boot Unit Test with @Autowired how to get it to to work without starting entire Application","body":"<p>Use <code>ApplicationRunner</code> to assemble the context.</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>// kotlin code fragment\nclass YourTests{\n\n    private val contextRunner = ApplicationContextRunner()\n\n    @Test\n    fun testAppProperties() {\n        contextRunner\n            .withUserConfiguration(YourConfig::class.java)\n            .run {\n                val bean: YourBean = it.getBean(YourBean::class.java)\n                assertThat(bean.baseUrl).isEqualTo(&quot;http://localhost:8080&quot;)\n\n            }\n    }\n}\n</code></pre>\n<p>Java version:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class YourTests{\n\n    private final ApplicationContextRunner contextRunner = new ApplicationContextRunner();\n\n    @Test\n    public void testAppProperties() {\n        contextRunner\n            .withUserConfiguration(YourConfig.class)\n            .run( ctx -&gt; {\n                var bean = ctx.getBean(YourBean.class);\n                assertThat(bean.baseUrl).isEqualTo(&quot;http://localhost:8080&quot;);\n\n           });\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":158125,"reputation":6731,"user_id":376527,"accept_rate":72,"display_name":"Sam Goldberg"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":208,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1689135782,"creation_date":1687385317,"question_id":76527454,"body_markdown":"I am trying to unit test configuration of a class annotated with `@Configuration`.  The class is fairly simple:\r\n\r\n    @Configuration\r\n    @ConfigurationProperties(prefix = &quot;feed&quot;)\r\n    public class SpringNyseFeedConfig extends FeedConfig {\r\n    \tprivate static final Logger LOG = LoggerFactory.getLogger(SpringNyseFeedConfig.class);\t\r\n    \r\n    \tpublic SpringNyseFeedConfig() {\r\n    \t\tLOG.debug(&quot;ctor():created {}&quot;, SpringNyseFeedConfig.class);\r\n    \t}\r\n    \t\r\n    \t@PostConstruct\r\n    \tpublic void completeConfig() {\r\n    \t\tLOG.debug(&quot;completeConfig(): validating configuration...&quot;);\r\n    \t\tpostConfigure().validate();  // need to set final properties and validate\r\n    \t}\r\n    }\r\n\r\nThe unit test is also simple:\r\n\r\n    @SpringBootTest\r\n    @ActiveProfiles(&quot;test&quot;)\r\n    public class SpringNyseFeedConfigTest {\r\n\r\n    \t@Autowired\r\n    \tprivate SpringNyseFeedConfig config;\r\n    \t\r\n    \t@Test\r\n    \tvoid propertiesReadAsExpected() {\r\n    \t\tassertNotNull(config);\r\n    \t\tServerConnection requestServer = config.getRequestServer();\r\n    \t\tassertEquals(&quot;192.168.1.200&quot;, requestServer.getHost());\r\n            ...\r\n            ...    \t\t\r\n    \t}\r\n    \r\n    }\r\n\r\nThe test is getting the `config` injected correctly, and configured with properties read from an `application-test.yml` file.\r\n\r\nThe problem is that the test causes Spring initializes all the Beans in the application (which is time consuming).  \r\n\r\nI&#39;ve tried about a half dozen suggestions to try to limit the test to only instantiating the SpringNyseFeedConfig object only, but they have all resulted in either not injecting anything at all (config == null), or injecting an object not configured from the `yml` file (i.e. no properties set).\r\n\r\nHow can I update the unit test so that it will read the file and auto-configure and inject the SpringNyseFeedConfig object without instantiating every other component in the application?\r\n\r\n\r\n\r\n\r\n","title":"Spring Boot Unit Test with @Autowired how to get it to to work without starting entire Application","body":"<p>I am trying to unit test configuration of a class annotated with <code>@Configuration</code>.  The class is fairly simple:</p>\n<pre><code>@Configuration\n@ConfigurationProperties(prefix = &quot;feed&quot;)\npublic class SpringNyseFeedConfig extends FeedConfig {\n    private static final Logger LOG = LoggerFactory.getLogger(SpringNyseFeedConfig.class);  \n\n    public SpringNyseFeedConfig() {\n        LOG.debug(&quot;ctor():created {}&quot;, SpringNyseFeedConfig.class);\n    }\n    \n    @PostConstruct\n    public void completeConfig() {\n        LOG.debug(&quot;completeConfig(): validating configuration...&quot;);\n        postConfigure().validate();  // need to set final properties and validate\n    }\n}\n</code></pre>\n<p>The unit test is also simple:</p>\n<pre><code>@SpringBootTest\n@ActiveProfiles(&quot;test&quot;)\npublic class SpringNyseFeedConfigTest {\n\n    @Autowired\n    private SpringNyseFeedConfig config;\n    \n    @Test\n    void propertiesReadAsExpected() {\n        assertNotNull(config);\n        ServerConnection requestServer = config.getRequestServer();\n        assertEquals(&quot;192.168.1.200&quot;, requestServer.getHost());\n        ...\n        ...         \n    }\n\n}\n</code></pre>\n<p>The test is getting the <code>config</code> injected correctly, and configured with properties read from an <code>application-test.yml</code> file.</p>\n<p>The problem is that the test causes Spring initializes all the Beans in the application (which is time consuming).</p>\n<p>I've tried about a half dozen suggestions to try to limit the test to only instantiating the SpringNyseFeedConfig object only, but they have all resulted in either not injecting anything at all (config == null), or injecting an object not configured from the <code>yml</code> file (i.e. no properties set).</p>\n<p>How can I update the unit test so that it will read the file and auto-configure and inject the SpringNyseFeedConfig object without instantiating every other component in the application?</p>\n"},{"tags":["java","mysql","datetime","jooq","timestampdiff"],"answers":[{"tags":[],"owner":{"account_id":11925198,"reputation":21,"user_id":8726687,"display_name":"Shani Madar"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689135594,"creation_date":1674734160,"answer_id":75245779,"question_id":75243792,"body_markdown":"My coworker investigated and found an easy way to write it:\r\n\r\n    update(table)\r\n    .set(field_datetime1, now())\r\n    .set(field_timedifference, DSL.field(&quot;timestampDiff({0}, {1}, {2})&quot;, Long.class,  DSL.keyword(DatePart.MICROSECOND.toSQL()), field_datetime1, field_datetime2))\r\n\r\nThis way jooq generates an actual query in the set :)","title":"JOOQ timestampDiff(field_datetime1, field_datetime2) to set value in an update query not working","body":"<p>My coworker investigated and found an easy way to write it:</p>\n<pre><code>update(table)\n.set(field_datetime1, now())\n.set(field_timedifference, DSL.field(&quot;timestampDiff({0}, {1}, {2})&quot;, Long.class,  DSL.keyword(DatePart.MICROSECOND.toSQL()), field_datetime1, field_datetime2))\n</code></pre>\n<p>This way jooq generates an actual query in the set :)</p>\n"}],"owner":{"account_id":11925198,"reputation":21,"user_id":8726687,"display_name":"Shani Madar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1689135594,"creation_date":1674722413,"question_id":75243792,"body_markdown":"I&#39;m using MYSQL and JOOQ and I&#39;m trying to write an update query.\r\nIn this query I want to update `field_datetime1` (type datetime) and also update `field_timedifference`  (type bigint) with the time difference in milliseconds between field_datetime1 and field_datetime2.\r\n\r\n\r\nHow do I achive that with JOOQ?\r\n\r\nI tried to write this code:\r\n\r\n    update(table)\r\n    .set(field_datetime1, now())\r\n    .set(field_timedifference, timestampDiff(field_datetime1, field_datetime2))\r\n\r\nBut it is not compiling, I get this error:\r\n\r\n    Cannot resolve method &#39;set(org.jooq.TableField&lt;MyRecordType,java.lang.Long&gt;, org.jooq.Field&lt;org.jooq.types.DayToSecond&gt;, org.jooq.TableField&lt;MyRecordType,java.lang.Long&gt;)&#39;\r\n\r\nI tried to wrap it in DSL.val and it does compile but it sends `null` in the query.\r\n\r\nThis is the query that I need to run, I tested it on MYSQL workbanch and it is exactly what I need:\r\n\r\n    update myTable \r\n    set field_timedifference = \r\n    TIMESTAMPDIFF(microsecond, field_datetime1, field_datetime2)\r\n\r\n","title":"JOOQ timestampDiff(field_datetime1, field_datetime2) to set value in an update query not working","body":"<p>I'm using MYSQL and JOOQ and I'm trying to write an update query.\nIn this query I want to update <code>field_datetime1</code> (type datetime) and also update <code>field_timedifference</code>  (type bigint) with the time difference in milliseconds between field_datetime1 and field_datetime2.</p>\n<p>How do I achive that with JOOQ?</p>\n<p>I tried to write this code:</p>\n<pre><code>update(table)\n.set(field_datetime1, now())\n.set(field_timedifference, timestampDiff(field_datetime1, field_datetime2))\n</code></pre>\n<p>But it is not compiling, I get this error:</p>\n<pre><code>Cannot resolve method 'set(org.jooq.TableField&lt;MyRecordType,java.lang.Long&gt;, org.jooq.Field&lt;org.jooq.types.DayToSecond&gt;, org.jooq.TableField&lt;MyRecordType,java.lang.Long&gt;)'\n</code></pre>\n<p>I tried to wrap it in DSL.val and it does compile but it sends <code>null</code> in the query.</p>\n<p>This is the query that I need to run, I tested it on MYSQL workbanch and it is exactly what I need:</p>\n<pre><code>update myTable \nset field_timedifference = \nTIMESTAMPDIFF(microsecond, field_datetime1, field_datetime2)\n</code></pre>\n"},{"tags":["java","string"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1688698609,"post_id":76633644,"comment_id":135111898,"body_markdown":"Please fix your formatting. You can use backquotes for literal text.","body":"Please fix your formatting. You can use backquotes for literal text."},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":1,"creation_date":1688709750,"post_id":76633644,"comment_id":135112802,"body_markdown":"I beg your pardon, but it is not clear to me what your input string is. It looks to me that you have posted two, different input strings. Consequently, I do not understand what you need to do to the input string in order to obtain the output string. It may help me to understand if you posted a [mcve] that includes a sample input string and also shows the output you want to get from that sample input string as well as the output that you actually get.","body":"I beg your pardon, but it is not clear to me what your input string is. It looks to me that you have posted two, different input strings. Consequently, I do not understand what you need to do to the input string in order to obtain the output string. It may help me to understand if you posted a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that includes a sample input string and also shows the output you want to get from that sample input string as well as the output that you actually get."}],"answers":[{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689134928,"creation_date":1689134928,"answer_id":76667094,"question_id":76633644,"body_markdown":"&gt; _&#39;I&#39;m encountering a problem wherein I&#39;m trying to match &quot;\\*\\*\\*&quot; by using Java&#39;s contains() function, but the string contains &quot;\\*&quot; so it matches the &quot;\\*&quot;, not the &quot;***&quot; ...&#39;_\r\n\r\nThe _[String#contains](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#contains(java.lang.CharSequence))_ method will attempt to match the exact input; thus a single asterisk will not be matched if you had supplied three.\r\n\r\nHere is an example.\r\n\r\n```java\r\nSystem.out.println(&quot;*&quot;.contains(&quot;***&quot;));\r\n```\r\n\r\nOutput\r\n\r\n```none\r\nfalse\r\n```\r\n\r\n&gt; _&quot;... I need to concatenate the string by the number of asterisks. ...&quot;_\r\n\r\nThere are numerous ways to do this.\r\n\r\n- You can use the _[StringReader](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/io/StringReader.html)_ class in conjunction with the _[BufferedReader](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/io/BufferedReader.html)_ class to iterate the _String_ value line-for-line.  \r\n- Or, you could use the _[Scanner](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Scanner.html)_ class to iterate each line.  \r\n- Also, you could use the _[Pattern](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/regex/Pattern.html)_ and _[Matcher](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/regex/Matcher.html)_ classes, utilizing a _regular expression pattern_ to evaluate the text.  \r\n- Finally, a basic approach would be to use a _[StringBuilder](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/StringBuilder.html)_ and a _for-loop_, utilizing the _[String#indexOf](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#indexOf(java.lang.String,int))_ method to determine the number of asterisks.","title":"Matching a string that contains another substring","body":"<blockquote>\n<p><em>'I'm encountering a problem wherein I'm trying to match &quot;***&quot; by using Java's contains() function, but the string contains &quot;*&quot; so it matches the &quot;*&quot;, not the &quot;***&quot; ...'</em></p>\n</blockquote>\n<p>The <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#contains(java.lang.CharSequence)\" rel=\"nofollow noreferrer\">String#contains</a></em> method will attempt to match the exact input; thus a single asterisk will not be matched if you had supplied three.</p>\n<p>Here is an example.</p>\n<pre class=\"lang-java prettyprint-override\"><code>System.out.println(&quot;*&quot;.contains(&quot;***&quot;));\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>false\n</code></pre>\n<blockquote>\n<p><em>&quot;... I need to concatenate the string by the number of asterisks. ...&quot;</em></p>\n</blockquote>\n<p>There are numerous ways to do this.</p>\n<ul>\n<li>You can use the <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/io/StringReader.html\" rel=\"nofollow noreferrer\">StringReader</a></em> class in conjunction with the <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/io/BufferedReader.html\" rel=\"nofollow noreferrer\">BufferedReader</a></em> class to iterate the <em>String</em> value line-for-line.</li>\n<li>Or, you could use the <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Scanner.html\" rel=\"nofollow noreferrer\">Scanner</a></em> class to iterate each line.</li>\n<li>Also, you could use the <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/regex/Pattern.html\" rel=\"nofollow noreferrer\">Pattern</a></em> and <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/regex/Matcher.html\" rel=\"nofollow noreferrer\">Matcher</a></em> classes, utilizing a <em>regular expression pattern</em> to evaluate the text.</li>\n<li>Finally, a basic approach would be to use a <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/StringBuilder.html\" rel=\"nofollow noreferrer\">StringBuilder</a></em> and a <em>for-loop</em>, utilizing the <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#indexOf(java.lang.String,int)\" rel=\"nofollow noreferrer\">String#indexOf</a></em> method to determine the number of asterisks.</li>\n</ul>\n"}],"owner":{"account_id":18437249,"reputation":1,"user_id":13430738,"display_name":"randomplant"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":4,"up_vote_count":0,"answer_count":1,"score":-4,"last_activity_date":1689134928,"creation_date":1688697931,"question_id":76633644,"body_markdown":"I&#39;m encountering a problem wherein I&#39;m trying to match &quot;\\*\\*\\*&quot; by using Java&#39;s contains() function, but the string contains &quot;\\*&quot; so it matches the &quot;\\*&quot;, not the &quot;***&quot;\r\n\r\nExample:\r\n```\r\nLorem ipsum dolor sit amet,  \r\nconsectetur adipiscing elit.\r\nAliquam imperdiet iaculis ex***\r\n```\r\n```\r\n*Lorem ipsum dolor sit amet, \r\n**consectetur adipiscing elit. \r\n***Aliquam imperdiet iaculis ex\r\n```\r\n\r\nI need to concatenate the string by the number of asterisks. So, it must output:\r\n```\r\nLorem ipsum dolor sit amet,  \r\nconsectetur adipiscing elit.   \r\nAliquam imperdiet iaculis ex***\r\n***Aliquam imperdiet iaculis ex\r\n```\r\n\r\nNOT\r\n```\r\nLorem ipsum dolor sit amet,  \r\nconsectetur adipiscing elit.\r\nAliquam imperdiet iaculis ex***\r\n*Lorem ipsum dolor sit amet,\r\n```\r\nI tried using Java&#39;s contains() function.\r\n\r\n","title":"Matching a string that contains another substring","body":"<p>I'm encountering a problem wherein I'm trying to match &quot;***&quot; by using Java's contains() function, but the string contains &quot;*&quot; so it matches the &quot;*&quot;, not the &quot;***&quot;</p>\n<p>Example:</p>\n<pre><code>Lorem ipsum dolor sit amet,  \nconsectetur adipiscing elit.\nAliquam imperdiet iaculis ex***\n</code></pre>\n<pre><code>*Lorem ipsum dolor sit amet, \n**consectetur adipiscing elit. \n***Aliquam imperdiet iaculis ex\n</code></pre>\n<p>I need to concatenate the string by the number of asterisks. So, it must output:</p>\n<pre><code>Lorem ipsum dolor sit amet,  \nconsectetur adipiscing elit.   \nAliquam imperdiet iaculis ex***\n***Aliquam imperdiet iaculis ex\n</code></pre>\n<p>NOT</p>\n<pre><code>Lorem ipsum dolor sit amet,  \nconsectetur adipiscing elit.\nAliquam imperdiet iaculis ex***\n*Lorem ipsum dolor sit amet,\n</code></pre>\n<p>I tried using Java's contains() function.</p>\n"},{"tags":["java","spring","apache-kafka","apache-kafka-streams","boot"],"comments":[{"owner":{"account_id":28912018,"reputation":166,"user_id":22144895,"display_name":"Kacper Roszczyna"},"score":0,"creation_date":1689111176,"post_id":76647724,"comment_id":135166496,"body_markdown":"Do you expect to produce multiple events under the same key in the aggregation? So if you had 150 elements to aggregate you&#39;d expect 3 events each with 50 elements in the list, all with the same key?","body":"Do you expect to produce multiple events under the same key in the aggregation? So if you had 150 elements to aggregate you&#39;d expect 3 events each with 50 elements in the list, all with the same key?"},{"owner":{"account_id":2995376,"reputation":435,"user_id":2542954,"display_name":"MightGod"},"score":0,"creation_date":1689832787,"post_id":76647724,"comment_id":135269680,"body_markdown":"yes exactly what you said","body":"yes exactly what you said"}],"answers":[{"comments":[{"owner":{"account_id":2995376,"reputation":435,"user_id":2542954,"display_name":"MightGod"},"score":0,"creation_date":1689832984,"post_id":76666985,"comment_id":135269710,"body_markdown":"I will check your solution and update if it succeeded or not, thanks!","body":"I will check your solution and update if it succeeded or not, thanks!"}],"tags":[],"owner":{"account_id":5213950,"reputation":96,"user_id":4169495,"display_name":"marhewa"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689134159,"creation_date":1689132571,"answer_id":76666985,"question_id":76647724,"body_markdown":"You can try to convert your `KTable` to `KStream` and execute `flatMapValues` to split the list, something like this (code in Kotlin):\r\n\r\n```kotlin\r\nval s = streamsBuilder.stream(&quot;kafka-topic&quot;, Consumed.with(Serdes.String(), Serdes.String()))\r\nval output = s\r\n    .groupByKey()\r\n    .windowedBy(TimeWindows.ofSizeWithNoGrace(Duration.ofSeconds(2)))\r\n    .aggregate({ mutableListOf() }, { k: String, str: String, agg: List&lt;String&gt; -&gt; agg.plus(str) })\r\n    .toStream()\r\n    .flatMapValues { strList -&gt; strList.chunked(50) }\r\n```\r\n\r\nthat would mean however that you load the whole aggregated list into memory - might or might not be a concern, depending on the list size and your memory settings, but it&#39;s definitely something to keep in mind.","title":"How to aggregate KStream to list of fixed size in a specific timeframe?","body":"<p>You can try to convert your <code>KTable</code> to <code>KStream</code> and execute <code>flatMapValues</code> to split the list, something like this (code in Kotlin):</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>val s = streamsBuilder.stream(&quot;kafka-topic&quot;, Consumed.with(Serdes.String(), Serdes.String()))\nval output = s\n    .groupByKey()\n    .windowedBy(TimeWindows.ofSizeWithNoGrace(Duration.ofSeconds(2)))\n    .aggregate({ mutableListOf() }, { k: String, str: String, agg: List&lt;String&gt; -&gt; agg.plus(str) })\n    .toStream()\n    .flatMapValues { strList -&gt; strList.chunked(50) }\n</code></pre>\n<p>that would mean however that you load the whole aggregated list into memory - might or might not be a concern, depending on the list size and your memory settings, but it's definitely something to keep in mind.</p>\n"}],"owner":{"account_id":2995376,"reputation":435,"user_id":2542954,"display_name":"MightGod"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689134159,"creation_date":1688909624,"question_id":76647724,"body_markdown":"Consider this KStream:\r\n\r\n    KStream&lt;String, String&gt; inputStream = streamsBuilder.stream(&quot;kafka-topic&quot;, Consumed.with(Serdes.String(), Serdes.String()));\r\n    Materialized&lt;String, List&lt;String&gt;, WindowStore&lt;Bytes, byte[]&gt;&gt; with = Materialized.with(Serdes.String(), STRING_LIST_SERDE);\r\n\r\n    KStream&lt;Windowed&lt;String&gt;, List&lt;String&gt;&gt; outputStream = inputStream\r\n                .groupByKey()\r\n                .windowedBy(TimeWindows.ofSizeWithNoGrace(Duration.ofSeconds(2)))\r\n                .aggregate(\r\n                        ArrayList::new,\r\n                        (key, string, aggregate) -&gt; {\r\n                            aggregate.add(string);\r\n                            return aggregate;\r\n                        }, with)\r\n                .toStream();\r\n\r\n`outputStream` will aggregate all the messages from `inputStream` info an array of messages for the defined timeframe.\r\nNow, in addition, I want to aggregate the messages up to a specific limit, say until the list is no longer than 50 in size.\r\nIf the list has become larger than 50 during the aggregation, I want to somehow split it to additional list.\r\n\r\nBasically, the output I wish to achieve is to get an array of messages up to a limit by size (of 50 for instance) and up to a specific timeframe, whichever comes first.\r\n\r\nWhat do I missing here in order to achieve this?\r\n\r\nThanks!","title":"How to aggregate KStream to list of fixed size in a specific timeframe?","body":"<p>Consider this KStream:</p>\n<pre><code>KStream&lt;String, String&gt; inputStream = streamsBuilder.stream(&quot;kafka-topic&quot;, Consumed.with(Serdes.String(), Serdes.String()));\nMaterialized&lt;String, List&lt;String&gt;, WindowStore&lt;Bytes, byte[]&gt;&gt; with = Materialized.with(Serdes.String(), STRING_LIST_SERDE);\n\nKStream&lt;Windowed&lt;String&gt;, List&lt;String&gt;&gt; outputStream = inputStream\n            .groupByKey()\n            .windowedBy(TimeWindows.ofSizeWithNoGrace(Duration.ofSeconds(2)))\n            .aggregate(\n                    ArrayList::new,\n                    (key, string, aggregate) -&gt; {\n                        aggregate.add(string);\n                        return aggregate;\n                    }, with)\n            .toStream();\n</code></pre>\n<p><code>outputStream</code> will aggregate all the messages from <code>inputStream</code> info an array of messages for the defined timeframe.\nNow, in addition, I want to aggregate the messages up to a specific limit, say until the list is no longer than 50 in size.\nIf the list has become larger than 50 during the aggregation, I want to somehow split it to additional list.</p>\n<p>Basically, the output I wish to achieve is to get an array of messages up to a limit by size (of 50 for instance) and up to a specific timeframe, whichever comes first.</p>\n<p>What do I missing here in order to achieve this?</p>\n<p>Thanks!</p>\n"},{"tags":["java","android-studio","gradle"],"answers":[{"comments":[{"owner":{"account_id":14646821,"reputation":553,"user_id":10577926,"display_name":"Adnan haider"},"score":0,"creation_date":1631182662,"post_id":67809787,"comment_id":122156337,"body_markdown":"hi i am facing this issue when i am addin proguard file kindly guide me what issue it is here is my proguard file  minifyEnabled false\n            proguardFiles getDefaultProguardFile(&#39;proguard-android.txt&#39;), &#39;proguard-rules.pro&#39;","body":"hi i am facing this issue when i am addin proguard file kindly guide me what issue it is here is my proguard file  minifyEnabled false             proguardFiles getDefaultProguardFile(&#39;proguard-android.txt&#39;), &#39;proguard-rules.pro&#39;"},{"owner":{"account_id":20677849,"reputation":515,"user_id":15182060,"display_name":"Mereo4"},"score":0,"creation_date":1631518819,"post_id":67809787,"comment_id":122233803,"body_markdown":"@Adnanhaider I can&#39;t answer you without more information, but you should maybe create a new question as this could be related to something else. Like maybe a bad configuration inside your proguard file.","body":"@Adnanhaider I can&#39;t answer you without more information, but you should maybe create a new question as this could be related to something else. Like maybe a bad configuration inside your proguard file."}],"tags":[],"owner":{"account_id":20677849,"reputation":515,"user_id":15182060,"display_name":"Mereo4"},"comment_count":2,"down_vote_count":0,"up_vote_count":22,"is_accepted":false,"score":22,"last_activity_date":1622654574,"creation_date":1622654574,"answer_id":67809787,"question_id":67242470,"body_markdown":"Well, I just was confronted to a similar problem, and actually it&#39;s the feedback of Gradle that is really REALLY bad. It&#39;s failing because of some invalid declaration inside the &quot;android&quot; block.\r\n\r\nIn your case, it seems that it&#39;s only because of the value you assign to `versionName` not being inside (double) quotes as a string must be.\r\n\r\nSo, in your :app gradle file, just fix this:\r\n```\r\nandroid {\r\n    ...\r\n    defaultConfig {\r\n        ...\r\n        versionName &#39;5.0&#39;\r\n        ...\r\n    }\r\n    ...\r\n}\r\n```\r\n","title":"Android Studio error - groovy.lang.MissingMethodException: No signature of method: build_8sqj**q9.android() is applicable for argument types: ***","body":"<p>Well, I just was confronted to a similar problem, and actually it's the feedback of Gradle that is really REALLY bad. It's failing because of some invalid declaration inside the &quot;android&quot; block.</p>\n<p>In your case, it seems that it's only because of the value you assign to <code>versionName</code> not being inside (double) quotes as a string must be.</p>\n<p>So, in your :app gradle file, just fix this:</p>\n<pre><code>android {\n    ...\n    defaultConfig {\n        ...\n        versionName '5.0'\n        ...\n    }\n    ...\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10238057,"reputation":859,"user_id":7556310,"display_name":"Vijay E"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1634737859,"creation_date":1634737859,"answer_id":69647299,"question_id":67242470,"body_markdown":"Another possibility is that you might be using properties of some plugin inside android tag, which is not declared as plugin. In my case I was trying to use \r\n\r\n    firebaseCrashlytics {\r\n                    // If you don&#39;t need crash reporting for your debug build\r\n                    mappingFileUploadEnabled false\r\n                }\r\n\r\nwithout using below plugin\r\n\r\n    apply plugin: &#39;com.google.firebase.crashlytics&#39;\r\n\r\nJust by adding plugin the issue is resolved. \r\nAlso please look for double quote and single quote string","title":"Android Studio error - groovy.lang.MissingMethodException: No signature of method: build_8sqj**q9.android() is applicable for argument types: ***","body":"<p>Another possibility is that you might be using properties of some plugin inside android tag, which is not declared as plugin. In my case I was trying to use</p>\n<pre><code>firebaseCrashlytics {\n                // If you don't need crash reporting for your debug build\n                mappingFileUploadEnabled false\n            }\n</code></pre>\n<p>without using below plugin</p>\n<pre><code>apply plugin: 'com.google.firebase.crashlytics'\n</code></pre>\n<p>Just by adding plugin the issue is resolved.\nAlso please look for double quote and single quote string</p>\n"},{"tags":[],"owner":{"account_id":11449107,"reputation":1122,"user_id":8391947,"display_name":"Bryan W"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1650044612,"creation_date":1650044612,"answer_id":71887230,"question_id":67242470,"body_markdown":"Anything declared in the `android {}` block in your build.gradle could cause this build failure. \r\n\r\nAdditional to what the other answers have mentioned, look for any non-Gradle references.\r\n\r\nFor example, the cause of my build failure were these lines:\r\n\r\n    buildToolsVersion = &#39;30.0.3&#39;\r\n    installation {\r\n        installOptions &#39;-d&#39;, &#39;-t&#39;\r\n        timeOutInMs &#39;2 * 60 * 1000&#39;\r\n    }\r\nAfter removing them, the build was successful.","title":"Android Studio error - groovy.lang.MissingMethodException: No signature of method: build_8sqj**q9.android() is applicable for argument types: ***","body":"<p>Anything declared in the <code>android {}</code> block in your build.gradle could cause this build failure.</p>\n<p>Additional to what the other answers have mentioned, look for any non-Gradle references.</p>\n<p>For example, the cause of my build failure were these lines:</p>\n<pre><code>buildToolsVersion = '30.0.3'\ninstallation {\n    installOptions '-d', '-t'\n    timeOutInMs '2 * 60 * 1000'\n}\n</code></pre>\n<p>After removing them, the build was successful.</p>\n"},{"tags":[],"owner":{"account_id":8003589,"reputation":116,"user_id":6037561,"display_name":"Hemant Bharti"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679477028,"creation_date":1679477028,"answer_id":75810384,"question_id":67242470,"body_markdown":"I got a message similar to mine today. The way I found to solve this error was by changing the version for the Gradle plugin on my build. [enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/cmbES.png\r\n\r\n\r\nI hope this could help you. Happy coding!","title":"Android Studio error - groovy.lang.MissingMethodException: No signature of method: build_8sqj**q9.android() is applicable for argument types: ***","body":"<p>I got a message similar to mine today. The way I found to solve this error was by changing the version for the Gradle plugin on my build. <a href=\"https://i.stack.imgur.com/cmbES.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>I hope this could help you. Happy coding!</p>\n"},{"tags":[],"owner":{"account_id":251813,"reputation":1963,"user_id":529442,"display_name":"Eugene Gr. Philippov"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689132305,"creation_date":1689132305,"answer_id":76666971,"question_id":67242470,"body_markdown":"In my case, I ran\r\n\r\n`flutter build apk --release -v`\r\n\r\nand had\r\n\r\n`WARNING` that `useProguard` DSL element is obsolete and should be removed. I had gradle 7.4.\r\n\r\nWhen I removed `useProguard false` from `android/app/build.gradle`, all built smoothly.","title":"Android Studio error - groovy.lang.MissingMethodException: No signature of method: build_8sqj**q9.android() is applicable for argument types: ***","body":"<p>In my case, I ran</p>\n<p><code>flutter build apk --release -v</code></p>\n<p>and had</p>\n<p><code>WARNING</code> that <code>useProguard</code> DSL element is obsolete and should be removed. I had gradle 7.4.</p>\n<p>When I removed <code>useProguard false</code> from <code>android/app/build.gradle</code>, all built smoothly.</p>\n"}],"owner":{"account_id":8533562,"reputation":221,"user_id":6396242,"accept_rate":29,"display_name":"Pankaj Bhardwaj"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":34015,"favorite_count":0,"down_vote_count":0,"up_vote_count":18,"answer_count":5,"score":18,"last_activity_date":1689132305,"creation_date":1619265046,"question_id":67242470,"body_markdown":"I prepared an android app in android studio then I copied my whole code manually from one sys to another. But after that, getting this error.\r\nBelow are my both gradle files and screenshot.(Not sure why manisfest file is not shown in android studio, this might be related)\r\nPlease dont mark copy as I have tried many solution from stackoverflow. those are same error but seems diff cause.\r\n\r\nModule:app\r\n```\r\n\r\n    apply plugin: &#39;com.android.application&#39;\r\n    apply plugin: &#39;com.google.gms.google-services&#39;\r\n    \r\n    android {\r\n        compileSdkVersion 30\r\n        buildToolsVersion &#39;30.0.2&#39;\r\n        defaultConfig {\r\n            applicationId &quot;dhritiapps.tulsiramayan&quot;\r\n            minSdkVersion 23\r\n            targetSdkVersion 30\r\n            versionCode 23\r\n            versionName 5.0\r\n            multiDexEnabled true\r\n            testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\r\n            compileOptions {\r\n                sourceCompatibility 1.8\r\n                targetCompatibility 1.8\r\n            }\r\n        }\r\n        buildTypes {\r\n            release {\r\n                minifyEnabled false\r\n                proguardFiles getDefaultProguardFile(&#39;proguard-android.txt&#39;), &#39;proguard-rules.pro&#39;\r\n            }\r\n        }\r\n        packagingOptions {\r\n            exclude &#39;META-INF/DEPENDENCIES&#39;\r\n            exclude &#39;META-INF/NOTICE&#39;\r\n            exclude &#39;META-INF/LICENSE&#39;\r\n            exclude &#39;META-INF/LICENSE.txt&#39;\r\n            exclude &#39;META-INF/NOTICE.txt&#39;\r\n        }\r\n    }\r\n    \r\n    dependencies {\r\n        implementation fileTree(dir: &#39;libs&#39;, include: [&#39;*.jar&#39;])\r\n        implementation &#39;androidx.legacy:legacy-support-v4:1.0.0&#39;\r\n        implementation &#39;androidx.navigation:navigation-fragment:2.2.1&#39;\r\n        implementation &#39;androidx.navigation:navigation-ui:2.2.1&#39;\r\n        implementation &#39;androidx.lifecycle:lifecycle-extensions:2.2.0&#39;\r\n        implementation &#39;com.google.firebase:firebase-auth:20.0.1&#39;\r\n        implementation &#39;com.google.firebase:firebase-database:19.5.1&#39;\r\n        androidTestImplementation(&#39;androidx.test.espresso:espresso-core:3.1.0&#39;, {\r\n            exclude group: &#39;com.android.support&#39;, module: &#39;support-annotations&#39;\r\n        })\r\n        implementation &#39;androidx.appcompat:appcompat:1.0.0&#39;\r\n        implementation &#39;com.google.android.material:material:1.0.0&#39;\r\n        implementation &#39;androidx.constraintlayout:constraintlayout:1.1.3&#39;\r\n        implementation &#39;com.firebase:firebase-client-android:2.5.2&#39;\r\n        implementation &#39;com.google.android.gms:play-services-auth:18.1.0&#39;\r\n        implementation &#39;com.google.gms:google-services:4.3.4&#39;\r\n        implementation &#39;link.fls:swipestack:0.3.0&#39;\r\n        implementation &#39;com.airbnb.android:lottie:3.5.0&#39;\r\n        implementation &#39;com.github.bumptech.glide:glide:4.11.0&#39;\r\n        implementation platform(&#39;com.google.firebase:firebase-bom:26.2.0&#39;)\r\n        implementation &#39;com.google.firebase:firebase-auth&#39;\r\n        implementation &#39;com.google.android.gms:play-services-auth:19.0.0&#39;\r\n        implementation &#39;me.priyesh:chroma:1.0.2&#39;\r\n        annotationProcessor &#39;com.github.bumptech.glide:compiler:4.11.0&#39;\r\n        implementation &#39;com.squareup.picasso:picasso:2.5.2&#39;\r\n        testImplementation &#39;junit:junit:4.13&#39;\r\n        testImplementation &#39;org.codehaus.groovy:groovy-all:2.4.15&#39;\r\n    }\r\n\r\n```\r\n\r\n\r\n\r\n\r\nProject\r\n```\r\n\r\n    // Top-level build file where you can add configuration options common to all sub-projects/modules.\r\n    buildscript {\r\n        repositories {\r\n            google()\r\n            jcenter()\r\n        }\r\n        dependencies {\r\n            classpath &#39;com.android.tools.build:gradle:4.1.1&#39;\r\n            classpath &#39;com.google.gms:google-services:4.3.4&#39;\r\n    \r\n            // NOTE: do not place your application dependencies here; they belong\r\n            // in the individual module build.gradle files\r\n        }\r\n    }\r\n    \r\n    allprojects {\r\n        repositories {\r\n            google()\r\n            jcenter()\r\n        }\r\n    }\r\n    \r\n    task clean(type: Delete) {\r\n        delete rootProject.buildDir\r\n    }\r\n\r\n```","title":"Android Studio error - groovy.lang.MissingMethodException: No signature of method: build_8sqj**q9.android() is applicable for argument types: ***","body":"<p>I prepared an android app in android studio then I copied my whole code manually from one sys to another. But after that, getting this error.\nBelow are my both gradle files and screenshot.(Not sure why manisfest file is not shown in android studio, this might be related)\nPlease dont mark copy as I have tried many solution from stackoverflow. those are same error but seems diff cause.</p>\n<p>Module:app</p>\n<pre><code>\n    apply plugin: 'com.android.application'\n    apply plugin: 'com.google.gms.google-services'\n    \n    android {\n        compileSdkVersion 30\n        buildToolsVersion '30.0.2'\n        defaultConfig {\n            applicationId &quot;dhritiapps.tulsiramayan&quot;\n            minSdkVersion 23\n            targetSdkVersion 30\n            versionCode 23\n            versionName 5.0\n            multiDexEnabled true\n            testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\n            compileOptions {\n                sourceCompatibility 1.8\n                targetCompatibility 1.8\n            }\n        }\n        buildTypes {\n            release {\n                minifyEnabled false\n                proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n            }\n        }\n        packagingOptions {\n            exclude 'META-INF/DEPENDENCIES'\n            exclude 'META-INF/NOTICE'\n            exclude 'META-INF/LICENSE'\n            exclude 'META-INF/LICENSE.txt'\n            exclude 'META-INF/NOTICE.txt'\n        }\n    }\n    \n    dependencies {\n        implementation fileTree(dir: 'libs', include: ['*.jar'])\n        implementation 'androidx.legacy:legacy-support-v4:1.0.0'\n        implementation 'androidx.navigation:navigation-fragment:2.2.1'\n        implementation 'androidx.navigation:navigation-ui:2.2.1'\n        implementation 'androidx.lifecycle:lifecycle-extensions:2.2.0'\n        implementation 'com.google.firebase:firebase-auth:20.0.1'\n        implementation 'com.google.firebase:firebase-database:19.5.1'\n        androidTestImplementation('androidx.test.espresso:espresso-core:3.1.0', {\n            exclude group: 'com.android.support', module: 'support-annotations'\n        })\n        implementation 'androidx.appcompat:appcompat:1.0.0'\n        implementation 'com.google.android.material:material:1.0.0'\n        implementation 'androidx.constraintlayout:constraintlayout:1.1.3'\n        implementation 'com.firebase:firebase-client-android:2.5.2'\n        implementation 'com.google.android.gms:play-services-auth:18.1.0'\n        implementation 'com.google.gms:google-services:4.3.4'\n        implementation 'link.fls:swipestack:0.3.0'\n        implementation 'com.airbnb.android:lottie:3.5.0'\n        implementation 'com.github.bumptech.glide:glide:4.11.0'\n        implementation platform('com.google.firebase:firebase-bom:26.2.0')\n        implementation 'com.google.firebase:firebase-auth'\n        implementation 'com.google.android.gms:play-services-auth:19.0.0'\n        implementation 'me.priyesh:chroma:1.0.2'\n        annotationProcessor 'com.github.bumptech.glide:compiler:4.11.0'\n        implementation 'com.squareup.picasso:picasso:2.5.2'\n        testImplementation 'junit:junit:4.13'\n        testImplementation 'org.codehaus.groovy:groovy-all:2.4.15'\n    }\n\n</code></pre>\n<p>Project</p>\n<pre><code>\n    // Top-level build file where you can add configuration options common to all sub-projects/modules.\n    buildscript {\n        repositories {\n            google()\n            jcenter()\n        }\n        dependencies {\n            classpath 'com.android.tools.build:gradle:4.1.1'\n            classpath 'com.google.gms:google-services:4.3.4'\n    \n            // NOTE: do not place your application dependencies here; they belong\n            // in the individual module build.gradle files\n        }\n    }\n    \n    allprojects {\n        repositories {\n            google()\n            jcenter()\n        }\n    }\n    \n    task clean(type: Delete) {\n        delete rootProject.buildDir\n    }\n\n</code></pre>\n"},{"tags":["java","wordpress","spring-boot","rss","rome"],"comments":[{"owner":{"account_id":2667845,"reputation":10491,"user_id":2305826,"accept_rate":89,"display_name":"MarsAtomic"},"score":1,"creation_date":1689133679,"post_id":76666965,"comment_id":135168418,"body_markdown":"Did you read this [answer](https://stackoverflow.com/questions/6908948/java-sun-security-provider-certpath-suncertpathbuilderexception-unable-to-find)?","body":"Did you read this <a href=\"https://stackoverflow.com/questions/6908948/java-sun-security-provider-certpath-suncertpathbuilderexception-unable-to-find\">answer</a>?"}],"owner":{"account_id":23607970,"reputation":1,"user_id":17643410,"display_name":"Mahareshi Wahyuaji"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689132167,"creation_date":1689132167,"question_id":76666965,"body_markdown":"So i trying to read rss feed from this link https://ssioltbrw.samuel.co.id/category-research-reports/emiten-report-ssi/feed/. but my spring boot and maven rome to read the file but gets an error that stated Error reading RSS feed: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target. What should i do\r\n\r\nHere is my code \r\n\r\n\r\n```\r\npackage com.allspeak.rssfeed.components;\r\nimport com.allspeak.rssfeed.entity.Rss;\r\nimport com.rometools.rome.feed.synd.SyndEntry;\r\nimport com.rometools.rome.feed.synd.SyndFeed;\r\nimport com.rometools.rome.io.SyndFeedInput;\r\nimport com.rometools.rome.io.XmlReader;\r\nimport lombok.RequiredArgsConstructor;\r\nimport lombok.extern.slf4j.Slf4j;\r\nimport org.springframework.stereotype.Component;\r\n\r\nimport java.net.URL;\r\nimport java.util.ArrayList;\r\nimport java.util.Collections;\r\nimport java.util.List;\r\n\r\n@Component\r\n@RequiredArgsConstructor\r\n@Slf4j\r\npublic class RssReader {\r\n\r\n    public List&lt;Rss&gt; readRssFeed(String feedUrl) {\r\n        try {\r\n            URL url = new URL(feedUrl);\r\n            SyndFeedInput input = new SyndFeedInput();\r\n            SyndFeed feed = input.build(new XmlReader(url));\r\n\r\n            List&lt;Rss&gt; feedItems = new ArrayList&lt;&gt;();\r\n            for (SyndEntry entry : feed.getEntries()) {\r\n                Rss item = new Rss();\r\n                item.setTitle(entry.getTitle());\r\n//                item.setDescription(entry.getDescription().getValue());\r\n                item.setLink(entry.getLink());\r\n                item.setPubDate(entry.getPublishedDate());\r\n\r\n                feedItems.add(item);\r\n            }\r\n\r\n            return feedItems;\r\n        } catch (Exception e) {\r\n            log.error(&quot;Error reading RSS feed: {}&quot;, e.getMessage());\r\n            return Collections.emptyList();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nHere is my code for the controller\r\n\r\n\r\n```\r\npackage com.allspeak.rssfeed.controller;\r\nimport com.allspeak.rssfeed.components.RssReader;\r\nimport com.allspeak.rssfeed.entity.Rss;\r\nimport lombok.AllArgsConstructor;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\nimport org.springframework.web.bind.annotation.RestController;\r\n\r\nimport java.util.List;\r\n\r\n@RestController\r\n@RequestMapping(&quot;/rss&quot;)\r\n@AllArgsConstructor\r\npublic class RssController {\r\n\r\n    private final RssReader rssReader;\r\n\r\n    @GetMapping(&quot;/feed&quot;)\r\n    public List&lt;Rss&gt; getRssFeed() {\r\n        String feedUrl = &quot;https://samuel.co.id/category-research-reports/emiten-report-ssi/feed/&quot;;\r\n        return rssReader.readRssFeed(feedUrl);\r\n    }\r\n}\r\n```\r\n\r\n","title":"Rss Feed Reading Failed","body":"<p>So i trying to read rss feed from this link <a href=\"https://ssioltbrw.samuel.co.id/category-research-reports/emiten-report-ssi/feed/\" rel=\"nofollow noreferrer\">https://ssioltbrw.samuel.co.id/category-research-reports/emiten-report-ssi/feed/</a>. but my spring boot and maven rome to read the file but gets an error that stated Error reading RSS feed: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target. What should i do</p>\n<p>Here is my code</p>\n<pre><code>package com.allspeak.rssfeed.components;\nimport com.allspeak.rssfeed.entity.Rss;\nimport com.rometools.rome.feed.synd.SyndEntry;\nimport com.rometools.rome.feed.synd.SyndFeed;\nimport com.rometools.rome.io.SyndFeedInput;\nimport com.rometools.rome.io.XmlReader;\nimport lombok.RequiredArgsConstructor;\nimport lombok.extern.slf4j.Slf4j;\nimport org.springframework.stereotype.Component;\n\nimport java.net.URL;\nimport java.util.ArrayList;\nimport java.util.Collections;\nimport java.util.List;\n\n@Component\n@RequiredArgsConstructor\n@Slf4j\npublic class RssReader {\n\n    public List&lt;Rss&gt; readRssFeed(String feedUrl) {\n        try {\n            URL url = new URL(feedUrl);\n            SyndFeedInput input = new SyndFeedInput();\n            SyndFeed feed = input.build(new XmlReader(url));\n\n            List&lt;Rss&gt; feedItems = new ArrayList&lt;&gt;();\n            for (SyndEntry entry : feed.getEntries()) {\n                Rss item = new Rss();\n                item.setTitle(entry.getTitle());\n//                item.setDescription(entry.getDescription().getValue());\n                item.setLink(entry.getLink());\n                item.setPubDate(entry.getPublishedDate());\n\n                feedItems.add(item);\n            }\n\n            return feedItems;\n        } catch (Exception e) {\n            log.error(&quot;Error reading RSS feed: {}&quot;, e.getMessage());\n            return Collections.emptyList();\n        }\n    }\n}\n</code></pre>\n<p>Here is my code for the controller</p>\n<pre><code>package com.allspeak.rssfeed.controller;\nimport com.allspeak.rssfeed.components.RssReader;\nimport com.allspeak.rssfeed.entity.Rss;\nimport lombok.AllArgsConstructor;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\nimport java.util.List;\n\n@RestController\n@RequestMapping(&quot;/rss&quot;)\n@AllArgsConstructor\npublic class RssController {\n\n    private final RssReader rssReader;\n\n    @GetMapping(&quot;/feed&quot;)\n    public List&lt;Rss&gt; getRssFeed() {\n        String feedUrl = &quot;https://samuel.co.id/category-research-reports/emiten-report-ssi/feed/&quot;;\n        return rssReader.readRssFeed(feedUrl);\n    }\n}\n</code></pre>\n"},{"tags":["java","naming","corba"],"comments":[{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1383132806,"post_id":19680693,"comment_id":29230844,"body_markdown":"Please provide the actual code you are trying to run.  (Yea I know, you copied it out of the tutorial.  Just do it anyway!)","body":"Please provide the actual code you are trying to run.  (Yea I know, you copied it out of the tutorial.  Just do it anyway!)"}],"answers":[{"tags":[],"owner":{"account_id":4253115,"reputation":1,"user_id":3479511,"display_name":"OldTimer"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1396228887,"creation_date":1396228887,"answer_id":22752217,"question_id":19680693,"body_markdown":"Last time I used corba was a few years back. As I recall the idea is to stay away from naked Java &quot;cast&quot; operator, the recommended way to cast a CORBA Object was(is?) to use the target type&#39;s &quot;Helper&quot; method to narrow name2 to ctx2. I recommend\r\n\r\n        NameComponent name2[] = ctx.to_name(&quot;Personal&quot;);\r\n        NamingContextExt ctx2 = NamingContextExtHelper.narrow(name2);\r\n\r\n        not\r\n\r\n        NamingContextExt ctx2 = (NamingContextExt)ctx.bind_new_context(name2);\r\n","title":"Corba: org.omg.CosNaming._NamingContextStub cannot be cast to org.omg.CosNaming.NamingContextExt","body":"<p>Last time I used corba was a few years back. As I recall the idea is to stay away from naked Java \"cast\" operator, the recommended way to cast a CORBA Object was(is?) to use the target type's \"Helper\" method to narrow name2 to ctx2. I recommend</p>\n\n<pre><code>    NameComponent name2[] = ctx.to_name(\"Personal\");\n    NamingContextExt ctx2 = NamingContextExtHelper.narrow(name2);\n\n    not\n\n    NamingContextExt ctx2 = (NamingContextExt)ctx.bind_new_context(name2);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3171905,"reputation":10222,"user_id":2680640,"display_name":"sendon1982"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689132015,"creation_date":1689132015,"answer_id":76666953,"question_id":19680693,"body_markdown":"You can try like this: Echo is your service interface which has logic\r\n```\r\n            org.omg.CORBA.Object objRef = orb.resolve_initial_references(&quot;NameService&quot;);\r\n            NamingContextExt ncRef = NamingContextExtHelper.narrow(objRef);\r\n            Echo href = EchoHelper.narrow(ncRef.resolve_str(&quot;ECHO-SERVER&quot;));\r\n\r\n            String hello = href.echoString();\r\n            System.out.println(hello);\r\n```","title":"Corba: org.omg.CosNaming._NamingContextStub cannot be cast to org.omg.CosNaming.NamingContextExt","body":"<p>You can try like this: Echo is your service interface which has logic</p>\n<pre><code>            org.omg.CORBA.Object objRef = orb.resolve_initial_references(&quot;NameService&quot;);\n            NamingContextExt ncRef = NamingContextExtHelper.narrow(objRef);\n            Echo href = EchoHelper.narrow(ncRef.resolve_str(&quot;ECHO-SERVER&quot;));\n\n            String hello = href.echoString();\n            System.out.println(hello);\n</code></pre>\n"}],"owner":{"account_id":135066,"reputation":2289,"user_id":337620,"accept_rate":73,"display_name":"user337620"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":566,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1689132015,"creation_date":1383131674,"question_id":19680693,"body_markdown":"I want to build an object hierarchy over the CORBA namespace and I tried this tutorial\r\n\r\nhttp://docs.oracle.com/javase/7/docs/technotes/guides/idl/jidlNaming.html\r\n\r\n\r\nI successfully compiled  NameClient.java, started orbd on localhost then ran the test.\r\nIt failed with the following exception:\r\n\r\n    java.lang.ClassCastException: org.omg.CosNaming._NamingContextStub cannot be cast to org.omg.CosNaming.NamingContextExt\r\n            at NameClient.main(NameClient.java:24)\r\n\r\nThe source code for the NameClient class:\r\n\r\n    import java.util.Properties;\r\n    import org.omg.CORBA.*;\r\n    import org.omg.CosNaming.*;\r\n    \r\n    public class NameClient\r\n    {\r\n       public static void main(String args[])\r\n       {\r\n          try {\r\n            Properties props = new Properties();\r\n            props.put(&quot;org.omg.CORBA.ORBInitialPort&quot;, &quot;1050&quot;);\r\n            props.put(&quot;org.omg.CORBA.ORBInitialHost&quot;, &quot;localhost&quot;);\r\n            ORB orb = ORB.init(args, props);\r\n            NamingContextExt ctx =\r\n              NamingContextExtHelper.narrow(orb.resolve_initial_references(\r\n                &quot;NameService&quot;));\r\n            org.omg.CORBA.Object objref = ctx;\r\n            \r\n            NameComponent name1[] = ctx.to_name(&quot;plans&quot;);\r\n            ctx.rebind(name1, objref);\r\n            System.out.println(&quot;plans rebind successful!&quot;);\r\n            \r\n            NameComponent name2[] = ctx.to_name(&quot;Personal&quot;);\r\n            NamingContextExt ctx2 = (NamingContextExt)ctx.bind_new_context(name2);\r\n            System.out.println(&quot;New naming context, Personal, added!&quot;);\r\n            \r\n            NameComponent name3[] = ctx.to_name(&quot;schedule&quot;);\r\n            ctx2.rebind(name3, objref);\r\n            System.out.println(&quot;schedule rebind successful!&quot;);\r\n    \r\n            NameComponent name4[] = ctx.to_name(&quot;calendar&quot;);\r\n            ctx2.rebind(name4, objref);\r\n            System.out.println(&quot;calendar rebind successful!&quot;);\r\n    \r\n    \r\n        } catch (Exception e) {\r\n            e.printStackTrace(System.err);\r\n        }\r\n      }  \r\n    }\r\n\r\nIsn&#39;t this example suppose to work ? Any idea how to get passed this error ?\r\n\r\nThank you for helping.","title":"Corba: org.omg.CosNaming._NamingContextStub cannot be cast to org.omg.CosNaming.NamingContextExt","body":"<p>I want to build an object hierarchy over the CORBA namespace and I tried this tutorial</p>\n\n<p><a href=\"http://docs.oracle.com/javase/7/docs/technotes/guides/idl/jidlNaming.html\" rel=\"nofollow\">http://docs.oracle.com/javase/7/docs/technotes/guides/idl/jidlNaming.html</a></p>\n\n<p>I successfully compiled  NameClient.java, started orbd on localhost then ran the test.\nIt failed with the following exception:</p>\n\n<pre><code>java.lang.ClassCastException: org.omg.CosNaming._NamingContextStub cannot be cast to org.omg.CosNaming.NamingContextExt\n        at NameClient.main(NameClient.java:24)\n</code></pre>\n\n<p>The source code for the NameClient class:</p>\n\n<pre><code>import java.util.Properties;\nimport org.omg.CORBA.*;\nimport org.omg.CosNaming.*;\n\npublic class NameClient\n{\n   public static void main(String args[])\n   {\n      try {\n        Properties props = new Properties();\n        props.put(\"org.omg.CORBA.ORBInitialPort\", \"1050\");\n        props.put(\"org.omg.CORBA.ORBInitialHost\", \"localhost\");\n        ORB orb = ORB.init(args, props);\n        NamingContextExt ctx =\n          NamingContextExtHelper.narrow(orb.resolve_initial_references(\n            \"NameService\"));\n        org.omg.CORBA.Object objref = ctx;\n\n        NameComponent name1[] = ctx.to_name(\"plans\");\n        ctx.rebind(name1, objref);\n        System.out.println(\"plans rebind successful!\");\n\n        NameComponent name2[] = ctx.to_name(\"Personal\");\n        NamingContextExt ctx2 = (NamingContextExt)ctx.bind_new_context(name2);\n        System.out.println(\"New naming context, Personal, added!\");\n\n        NameComponent name3[] = ctx.to_name(\"schedule\");\n        ctx2.rebind(name3, objref);\n        System.out.println(\"schedule rebind successful!\");\n\n        NameComponent name4[] = ctx.to_name(\"calendar\");\n        ctx2.rebind(name4, objref);\n        System.out.println(\"calendar rebind successful!\");\n\n\n    } catch (Exception e) {\n        e.printStackTrace(System.err);\n    }\n  }  \n}\n</code></pre>\n\n<p>Isn't this example suppose to work ? Any idea how to get passed this error ?</p>\n\n<p>Thank you for helping.</p>\n"},{"tags":["java","swing","user-interface"],"comments":[{"owner":{"account_id":6940896,"reputation":410,"user_id":5327287,"display_name":"user5327287"},"score":0,"creation_date":1534545600,"post_id":51903228,"comment_id":90758242,"body_markdown":"I edited it. Sorry for bad english and writing.","body":"I edited it. Sorry for bad english and writing."},{"owner":{"account_id":526476,"reputation":27861,"user_id":1790644,"accept_rate":80,"display_name":"Matt Clark"},"score":0,"creation_date":1534545673,"post_id":51903228,"comment_id":90758262,"body_markdown":"Why not controlling your own animation by adjusting the color / opacity? Would not need any gifs.","body":"Why not controlling your own animation by adjusting the color / opacity? Would not need any gifs."},{"owner":{"account_id":6940896,"reputation":410,"user_id":5327287,"display_name":"user5327287"},"score":0,"creation_date":1534545903,"post_id":51903228,"comment_id":90758311,"body_markdown":"It will look like the second image and this is what I don&#39;t want.","body":"It will look like the second image and this is what I don&#39;t want."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1534546628,"post_id":51903228,"comment_id":90758447,"body_markdown":"You do want a MouseListener.  In the mouseEntered method, call the [restart](https://docs.oracle.com/javase/10/docs/api/javax/swing/Timer.html#restart%28%29) method of a javax.swing.Timer that carries out the animation.  In the mouseExited method, call the Timer’s [stop](https://docs.oracle.com/javase/10/docs/api/javax/swing/Timer.html#stop%28%29) method.","body":"You do want a MouseListener.  In the mouseEntered method, call the <a href=\"https://docs.oracle.com/javase/10/docs/api/javax/swing/Timer.html#restart%28%29\" rel=\"nofollow noreferrer\">restart</a> method of a javax.swing.Timer that carries out the animation.  In the mouseExited method, call the Timer’s <a href=\"https://docs.oracle.com/javase/10/docs/api/javax/swing/Timer.html#stop%28%29\" rel=\"nofollow noreferrer\">stop</a> method."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1534554720,"post_id":51903228,"comment_id":90759707,"body_markdown":"Maybe the [Fader](https://stackoverflow.com/questions/29796871/how-to-slowly-change-object-color-from-one-to-another/29802041#29802041) class will help you out. The code uses focusLost/Gained to do the fading so you would need to change that to mouseEntered/Exited, but you should get the idea.","body":"Maybe the <a href=\"https://stackoverflow.com/questions/29796871/how-to-slowly-change-object-color-from-one-to-another/29802041#29802041\">Fader</a> class will help you out. The code uses focusLost/Gained to do the fading so you would need to change that to mouseEntered/Exited, but you should get the idea."}],"answers":[{"comments":[{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":2,"creation_date":1534567876,"post_id":51904555,"comment_id":90761352,"body_markdown":"Did you seriously write all of this tonight? Impressed!","body":"Did you seriously write all of this tonight? Impressed!"},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":2,"creation_date":1534569681,"post_id":51904555,"comment_id":90761621,"body_markdown":"Most of it comes from library or snippets of code I&#39;ve used before - I&#39;ve done a lot of animation based solutions - it&#39;s kind of a passion :P","body":"Most of it comes from library or snippets of code I&#39;ve used before - I&#39;ve done a lot of animation based solutions - it&#39;s kind of a passion :P"},{"owner":{"account_id":6940896,"reputation":410,"user_id":5327287,"display_name":"user5327287"},"score":0,"creation_date":1534593145,"post_id":51904555,"comment_id":90766827,"body_markdown":"First of all I realy thankful for your comment. I thought it will be way easier. I am not in this lvl to actully create somthing like this.","body":"First of all I realy thankful for your comment. I thought it will be way easier. I am not in this lvl to actully create somthing like this."},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1534630572,"post_id":51904555,"comment_id":90776000,"body_markdown":"@user5327287 Swing wasn&#39;t &quot;really&quot; designed for animation in mind, as I said, to do animation right - is not a simple task","body":"@user5327287 Swing wasn&#39;t &quot;really&quot; designed for animation in mind, as I said, to do animation right - is not a simple task"}],"tags":[],"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"comment_count":4,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1689131681,"creation_date":1534556282,"answer_id":51904555,"question_id":51903228,"body_markdown":"First things first, you&#39;re actually asking a very difficult and complicated question.  Animation done right is not easy and requires a lot state management.\r\n\r\nFor example, what happens if the user moves the mouse out of the menu item BEFORE it&#39;s finished animating?  Do you animate from the current state? Do you animate from what was to be the finished state? Do you animate across the full time range or only the remaining time range? How would you control and manage it all!?\r\n\r\nYou&#39;re also asking about animating across color ranges.  Color blending is actually not as easy as it might sound.  Sure you could argue you&#39;re just animating the alpha value, but blending the colors gives you a much greater opportunity to provide a different animation affect, like blending from a transparent green to an opaque blue, cool.\r\n\r\nAnimation is also not normally linear, there is a lot of theory that goes into animating something well, including anticipation, squash and stench, staging, blah, blah, blah - honestly, there are better people then me to take you through that.  The point is, good animation is complicated.\r\n\r\nMy first suggestion is to go an use a good animation framework, like [TimingFramework](https://github.com/akuhtz/timingframework) which does all the heavy lifting for you.\r\n\r\nOn the off chance you can&#39;t do that, then you&#39;re in for a fun ride.\r\n\r\nThe first, well actually, easy thing, is to find a good color blending algorithm.  I spent a lot of time exploring different algorithms and trying a bunch of different things before settling on something like...\r\n\r\n\tprotected Color blend(Color color1, Color color2, double ratio) {\r\n\t\tfloat r = (float) ratio;\r\n\t\tfloat ir = (float) 1.0 - r;\r\n\r\n\t\tfloat red = color1.getRed() * r + color2.getRed() * ir;\r\n\t\tfloat green = color1.getGreen() * r + color2.getGreen() * ir;\r\n\t\tfloat blue = color1.getBlue() * r + color2.getBlue() * ir;\r\n\t\tfloat alpha = color1.getAlpha() * r + color2.getAlpha() * ir;\r\n\r\n\t\tred = Math.min(255f, Math.max(0f, red));\r\n\t\tgreen = Math.min(255f, Math.max(0f, green));\r\n\t\tblue = Math.min(255f, Math.max(0f, blue));\r\n\t\talpha = Math.min(255f, Math.max(0f, alpha));\r\n\r\n\t\tColor color = null;\r\n\t\ttry {\r\n\t\t\tcolor = new Color((int) red, (int) green, (int) blue, (int) alpha);\r\n\t\t} catch (IllegalArgumentException exp) {\r\n\t\t\texp.printStackTrace();\r\n\t\t}\r\n\t\treturn color;\r\n\t}\r\n\r\nThe reason I use this approach is I can easily move a color towards black or white, which many other approaches couldn&#39;t achieve (just moved the color to high or low ranges).  This also focuses on blending two colors together based on a ratio of between `0` and `1` (so at `0.5`, there balanced blend between the two).\r\n\r\n# Animation Engine...\r\n\r\nNote: Swing is single threaded AND not thread safe, you need to take that into consideration when developing a solution.\r\nOkay, the hard part...\r\n\r\nIt&#39;s easy to do a linear animation, animation from the start of one point until you reach the end of another point. The problem with this is, they don&#39;t scale well and don&#39;t generally produce a good natural feeling animation.\r\n\r\nInstead, what you want is a concept of an animation running over a period of time.  From this you can calculate the progression through the given period and calculate the value to be applied.\r\n\r\nThis approach scales well, you can change the time and not care about anything else, it will take care of itself.  It also works well on systems whose performance may not be up to a killer frame rate, as they can drop frames and mostly &quot;fake&quot; it\r\n\r\nOne key concept to keep in mind, animation is the &quot;illusion&quot; of change over time.\r\n\r\n## `Range`\r\n\r\n`Range` is a simple generic representation of a starting and ending point, then given a normalised progression (`0-1`) can calculate a reasonable representation between those points.\r\n\r\n\tpublic abstract class Range&lt;T&gt; {\r\n\r\n\t\tprivate T from;\r\n\t\tprivate T to;\r\n\r\n\t\tpublic Range(T from, T to) {\r\n\t\t\tthis.from = from;\r\n\t\t\tthis.to = to;\r\n\t\t}\r\n\r\n\t\tpublic T getFrom() {\r\n\t\t\treturn from;\r\n\t\t}\r\n\r\n\t\tpublic T getTo() {\r\n\t\t\treturn to;\r\n\t\t}\r\n\r\n\t\t@Override\r\n\t\tpublic String toString() {\r\n\t\t\treturn &quot;From &quot; + getFrom() + &quot; to &quot; + getTo();\r\n\t\t}\r\n\r\n\t\tpublic abstract T valueAt(double progress);\r\n\r\n\t}\r\n\r\nThe stupid thing is, I do this a lot, so, here is a helper class to encapsulate the core concept.\r\n\r\n## `Animator`\r\n\r\nThis is a &quot;central&quot; engine which drives all the animations.  It repeatedly ticks at about every 5 milliseconds and drives the `Animatable` objects, which actually calculate the time through the animation.\r\n\r\n\tpublic enum Animator {\r\n\r\n\t\tINSTANCE;\r\n\r\n\t\tprivate Timer timer;\r\n\r\n\t\tprivate List&lt;Animatable&gt; properies;\r\n\r\n\t\tprivate Animator() {\r\n\t\t\tproperies = new ArrayList&lt;&gt;(5);\r\n\t\t\ttimer = new Timer(5, new ActionListener() {\r\n\t\t\t\t@Override\r\n\t\t\t\tpublic void actionPerformed(ActionEvent e) {\r\n\t\t\t\t\tIterator&lt;Animatable&gt; it = properies.iterator();\r\n\t\t\t\t\twhile (it.hasNext()) {\r\n\t\t\t\t\t\tAnimatable ap = it.next();\r\n\t\t\t\t\t\tif (ap.tick()) {\r\n\t\t\t\t\t\t\tit.remove();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (properies.isEmpty()) {\r\n\t\t\t\t\t\ttimer.stop();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tpublic void add(Animatable ap) {\r\n\t\t\tproperies.add(ap);\r\n\t\t\ttimer.start();\r\n\t\t}\r\n\r\n\t\tpublic void remove(Animatable ap) {\r\n\t\t\tproperies.remove(ap);\r\n\t\t\tif (properies.isEmpty()) {\r\n\t\t\t\ttimer.stop();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n## `Animatable`\r\n\r\nThis is &quot;something&quot; which can be animated.  It has a concept of a `Range` and a `Duration` over which it should be animated (it also supports easement, but I will talk about that later)\r\n\r\n\tpublic interface Animatable&lt;T&gt; {\r\n\t\tpublic Range&lt;T&gt; getRange();\r\n\t\tpublic T getValue();\r\n\t\tpublic boolean tick();\r\n\t\tpublic void setDuration(Duration duration);\r\n\t\tpublic Duration getDuration();\r\n\t\tpublic Easement getEasement();\r\n\t}\r\n\r\n## `AbstractAnimatable`\r\n\r\nA abstract implementation of `Animatable`.  This does all the cool, awesome, calculations on each `tick` to determine how far through the given animation cycle it is and generates notifications to registered listeners about the change in state, so they can actually do something about it...\r\n\r\n\tpublic abstract class AbstractAnimatable&lt;T&gt; implements Animatable&lt;T&gt; {\r\n\r\n\t\tprivate Range&lt;T&gt; range;\r\n\t\tprivate LocalDateTime startTime;\r\n\t\tprivate Duration duration = Duration.ofSeconds(5);\r\n\t\tprivate T value;\r\n\r\n\t\tprivate AnimatableListener&lt;T&gt; listener;\r\n\r\n\t\tprivate Easement easement;\r\n\r\n\t\tpublic AbstractAnimatable(Range&lt;T&gt; range, AnimatableListener&lt;T&gt; listener) {\r\n\t\t\tthis.range = range;\r\n\t\t\tthis.value = range.getFrom();\r\n\r\n\t\t\tthis.listener = listener;\r\n\t\t}\r\n\r\n\t\tpublic AbstractAnimatable(Range&lt;T&gt; range, Easement easement, AnimatableListener&lt;T&gt; listener) {\r\n\t\t\tthis(range, listener);\r\n\t\t\tthis.easement = easement;\r\n\t\t}\r\n\r\n\t\tpublic void setEasement(Easement easement) {\r\n\t\t\tthis.easement = easement;\r\n\t\t}\r\n\r\n\t\t@Override\r\n\t\tpublic Easement getEasement() {\r\n\t\t\treturn easement;\r\n\t\t}\r\n\r\n\t\tpublic void setDuration(Duration duration) {\r\n\t\t\tthis.duration = duration;\r\n\t\t}\r\n\r\n\t\tpublic Duration getDuration() {\r\n\t\t\treturn duration;\r\n\t\t}\r\n\r\n\t\tpublic Range&lt;T&gt; getRange() {\r\n\t\t\treturn range;\r\n\t\t}\r\n\r\n\t\t@Override\r\n\t\tpublic T getValue() {\r\n\t\t\treturn value;\r\n\t\t}\r\n\r\n\t\tpublic double getCurrentProgress(double rawProgress) {\r\n\t\t\tEasement easement = getEasement();\r\n\t\t\tdouble progress = Math.min(1.0, Math.max(0.0, getRawProgress()));\r\n\t\t\tif (easement != null) {\r\n\t\t\t\tprogress = easement.interpolate(progress);\r\n\t\t\t}\r\n\r\n\t\t\treturn progress;\r\n\t\t}\r\n\r\n\t\tpublic double getRawProgress() {\r\n\t\t\tif (startTime == null) {\r\n\t\t\t\tstartTime = LocalDateTime.now();\r\n\t\t\t}\r\n\t\t\tDuration duration = getDuration();\r\n\t\t\tDuration runningTime = Duration.between(startTime, LocalDateTime.now());\r\n\t\t\tdouble progress = (runningTime.toMillis() / (double) duration.toMillis());\r\n\t\t\treturn progress;\r\n\t\t}\r\n\r\n\t\t@Override\r\n\t\tpublic boolean tick() {\r\n\t\t\tdouble rawProgress = getRawProgress();\r\n\t\t\tdouble progress = getCurrentProgress(rawProgress);\r\n\r\n\t\t\tif (rawProgress &gt;= 1.0) {\r\n\t\t\t\tprogress = 1.0;\r\n\t\t\t}\r\n\r\n\t\t\tvalue = getRange().valueAt(progress);\r\n\t\t\tlistener.stateChanged(this);\r\n\r\n\t\t\treturn progress &gt;= 1.0;\r\n\t\t}\r\n\r\n\t}\r\n\r\n## `AnimatableListener`\r\n\r\nA listener/observer to changes to a `AbstractAnimatable` state.  This way, the `AbstractAnimatable` can tell interested parties that the state has been updated and what that state currently is.\r\n\r\n\tpublic interface AnimatableListener&lt;T&gt; {\r\n\r\n\t\tpublic void stateChanged(Animatable&lt;T&gt; animator);\r\n\t}\r\n\r\n## `Easement`\r\n\r\nOkay, so I mentioned &quot;animation theory&quot;.  Basically what this is a implementation of a &quot;spline interpolation&quot; designed to provide common animation concepts, slow in, slow out, etc.  What this does is changes the &quot;progress&quot; value through the animation so that the &quot;speed&quot; of the animation &quot;appears&quot; to change over the duration of the animation ... fancy, pancy for making it &quot;look nice&quot;\r\n\r\n\tpublic enum Easement {\r\n\r\n\t\tSLOWINSLOWOUT(1d, 0d, 0d, 1d),\r\n\t\tFASTINSLOWOUT(0d, 0d, 1d, 1d),\r\n\t\tSLOWINFASTOUT(0d, 1d, 0d, 0d),\r\n\t\tSLOWIN(1d, 0d, 1d, 1d),\r\n\t\tSLOWOUT(0d, 0d, 0d, 1d);\r\n\r\n\t\tprivate final double points[];\r\n\r\n\t\tprivate final List&lt;PointUnit&gt; normalisedCurve;\r\n\r\n\t\tprivate Easement(double x1, double y1, double x2, double y2) {\r\n\t\t\tpoints = new double[]{x1, y1, x2, y2};\r\n\r\n\t\t\tfinal List&lt;Double&gt; baseLengths = new ArrayList&lt;&gt;();\r\n\t\t\tdouble prevX = 0;\r\n\t\t\tdouble prevY = 0;\r\n\t\t\tdouble cumulativeLength = 0;\r\n\t\t\tfor (double t = 0; t &lt;= 1; t += 0.01) {\r\n\t\t\t\tPoint2D xy = getXY(t);\r\n\t\t\t\tdouble length = cumulativeLength\r\n\t\t\t\t\t\t\t\t+ Math.sqrt((xy.getX() - prevX) * (xy.getX() - prevX)\r\n\t\t\t\t\t\t\t\t\t\t\t\t+ (xy.getY() - prevY) * (xy.getY() - prevY));\r\n\r\n\t\t\t\tbaseLengths.add(length);\r\n\t\t\t\tcumulativeLength = length;\r\n\t\t\t\tprevX = xy.getX();\r\n\t\t\t\tprevY = xy.getY();\r\n\t\t\t}\r\n\r\n\t\t\tnormalisedCurve = new ArrayList&lt;&gt;(baseLengths.size());\r\n\t\t\tint index = 0;\r\n\t\t\tfor (double t = 0; t &lt;= 1; t += 0.01) {\r\n\t\t\t\tdouble length = baseLengths.get(index++);\r\n\t\t\t\tdouble normalLength = length / cumulativeLength;\r\n\t\t\t\tnormalisedCurve.add(new PointUnit(t, normalLength));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic double interpolate(double fraction) {\r\n\t\t\tint low = 1;\r\n\t\t\tint high = normalisedCurve.size() - 1;\r\n\t\t\tint mid = 0;\r\n\t\t\twhile (low &lt;= high) {\r\n\t\t\t\tmid = (low + high) / 2;\r\n\r\n\t\t\t\tif (fraction &gt; normalisedCurve.get(mid).getPoint()) {\r\n\t\t\t\t\tlow = mid + 1;\r\n\t\t\t\t} else if (mid &gt; 0 &amp;&amp; fraction &lt; normalisedCurve.get(mid - 1).getPoint()) {\r\n\t\t\t\t\thigh = mid - 1;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t/*\r\n         * The answer lies between the &quot;mid&quot; item and its predecessor.\r\n\t\t\t */\r\n\t\t\tfinal PointUnit prevItem = normalisedCurve.get(mid - 1);\r\n\t\t\tfinal double prevFraction = prevItem.getPoint();\r\n\t\t\tfinal double prevT = prevItem.getDistance();\r\n\r\n\t\t\tfinal PointUnit item = normalisedCurve.get(mid);\r\n\t\t\tfinal double proportion = (fraction - prevFraction) / (item.getPoint() - prevFraction);\r\n\t\t\tfinal double interpolatedT = prevT + (proportion * (item.getDistance() - prevT));\r\n\t\t\treturn getY(interpolatedT);\r\n\t\t}\r\n\r\n\t\tprotected Point2D getXY(double t) {\r\n\t\t\tfinal double invT = 1 - t;\r\n\t\t\tfinal double b1 = 3 * t * invT * invT;\r\n\t\t\tfinal double b2 = 3 * t * t * invT;\r\n\t\t\tfinal double b3 = t * t * t;\r\n\t\t\tfinal Point2D xy = new Point2D.Double((b1 * points[0]) + (b2 * points[2]) + b3, (b1 * points[1]) + (b2 * points[3]) + b3);\r\n\t\t\treturn xy;\r\n\t\t}\r\n\r\n\t\tprotected double getY(double t) {\r\n\t\t\tfinal double invT = 1 - t;\r\n\t\t\tfinal double b1 = 3 * t * invT * invT;\r\n\t\t\tfinal double b2 = 3 * t * t * invT;\r\n\t\t\tfinal double b3 = t * t * t;\r\n\t\t\treturn (b1 * points[2]) + (b2 * points[3]) + b3;\r\n\t\t}\r\n\r\n\t\tprotected class PointUnit {\r\n\r\n\t\t\tprivate final double distance;\r\n\t\t\tprivate final double point;\r\n\r\n\t\t\tpublic PointUnit(double distance, double point) {\r\n\t\t\t\tthis.distance = distance;\r\n\t\t\t\tthis.point = point;\r\n\t\t\t}\r\n\r\n\t\t\tpublic double getDistance() {\r\n\t\t\t\treturn distance;\r\n\t\t\t}\r\n\r\n\t\t\tpublic double getPoint() {\r\n\t\t\t\treturn point;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n## So what?!\r\n\r\nOkay, about now, you&#39;re probably scratching your head, wishing you hadn&#39;t asked the question ;)\r\n\r\nHow does all this help.  The point is, all the above is re-usable, so you dump into a library somewhere and don&#39;t care about :/\r\n\r\nWhat you do is then implement the required features and apply...\r\n\r\n### `ColorRange`\r\n\r\nThis takes the `colorBlend` algorithm from before and wraps into a `Range` concept...\r\n\r\n\tpublic class ColorRange extends Range&lt;Color&gt; {\r\n\t\t\r\n\t\tpublic ColorRange(Color from, Color to) {\r\n\t\t\tsuper(from, to);\r\n\t\t}\r\n\r\n\t\t@Override\r\n\t\tpublic Color valueAt(double progress) {\r\n\t\t\tColor blend = blend(getTo(), getFrom(), progress);\r\n\t\t\treturn blend;\r\n\t\t}\r\n\r\n\t\tprotected Color blend(Color color1, Color color2, double ratio) {\r\n\t\t\tfloat r = (float) ratio;\r\n\t\t\tfloat ir = (float) 1.0 - r;\r\n\r\n\t\t\tfloat red = color1.getRed() * r + color2.getRed() * ir;\r\n\t\t\tfloat green = color1.getGreen() * r + color2.getGreen() * ir;\r\n\t\t\tfloat blue = color1.getBlue() * r + color2.getBlue() * ir;\r\n\t\t\tfloat alpha = color1.getAlpha() * r + color2.getAlpha() * ir;\r\n\r\n\t\t\tred = Math.min(255f, Math.max(0f, red));\r\n\t\t\tgreen = Math.min(255f, Math.max(0f, green));\r\n\t\t\tblue = Math.min(255f, Math.max(0f, blue));\r\n\t\t\talpha = Math.min(255f, Math.max(0f, alpha));\r\n\r\n\t\t\tColor color = null;\r\n\t\t\ttry {\r\n\t\t\t\tcolor = new Color((int) red, (int) green, (int) blue, (int) alpha);\r\n\t\t\t} catch (IllegalArgumentException exp) {\r\n\t\t\t\texp.printStackTrace();\r\n\t\t\t}\r\n\t\t\treturn color;\r\n\t\t}\r\n\r\n\t}\r\n\r\nThis allows us to calculate the required color based on the progression through the animation\r\n\r\n### `ColorAnimatable`\r\n\r\nWe then make a &quot;animatable color&quot; concept...\r\n\r\n\tpublic class ColorAnimatable extends AbstractAnimatable&lt;Color&gt; {\r\n\r\n\t\tpublic ColorAnimatable(ColorRange animationRange, Duration duration, AnimatableListener&lt;Color&gt; listener) {\r\n\t\t\tsuper(animationRange, listener);\r\n\t\t\tsetDuration(duration);\r\n\t\t}\r\n\r\n\t}\r\n\r\nThis means that we can establish a basic concept of a animation between two colors of a specified period of time and be notified when the animation state changes - it&#39;s nicely decoupled\r\n\r\n# Implementation...\r\n\r\nAnd &quot;finally&quot; we&#39;re ready to actually make something out of it...\r\n\r\n\tpublic class MenuItem extends JPanel {\r\n\r\n\t\tprivate Duration animationTime = Duration.ofSeconds(5);\r\n\t\tprivate JLabel label;\r\n\r\n\t\tprivate ColorAnimatable transitionAnimatable;\r\n\r\n\t\tprivate Color unfocusedColor = new Color(0, 0, 255, 0);\r\n\t\tprivate Color focusedColor = new Color(0, 0, 255, 255);\r\n\r\n\t\tpublic MenuItem() {\r\n\t\t\tsetOpaque(false);\r\n\t\t\tsetBorder(new EmptyBorder(8, 8, 8, 8));\r\n\t\t\tsetLayout(new GridBagLayout());\r\n\r\n\t\t\tsetBackground(unfocusedColor);\r\n\r\n\t\t\tGridBagConstraints gbc = new GridBagConstraints();\r\n\t\t\tgbc.weightx = 1;\r\n\t\t\tgbc.fill = GridBagConstraints.BOTH;\r\n\r\n\t\t\tlabel = new JLabel();\r\n\t\t\tlabel.setForeground(Color.WHITE);\r\n\t\t\tlabel.setHorizontalAlignment(JLabel.LEADING);\r\n\t\t\tadd(label, gbc);\r\n\r\n\t\t\tlabel.addMouseListener(new MouseAdapter() {\r\n\t\t\t\t@Override\r\n\t\t\t\tpublic void mouseEntered(MouseEvent e) {\r\n\t\t\t\t\tdouble progress = stopAnimation();\r\n\t\t\t\t\ttransitionAnimatable = new ColorAnimatable(\r\n\t\t\t\t\t\t\t\t\tnew ColorRange(getBackground(), focusedColor), \r\n\t\t\t\t\t\t\t\t\tpreferredAnimationTime(progress), \r\n\t\t\t\t\t\t\t\t\tnew AnimatableListener&lt;Color&gt;() {\r\n\t\t\t\t\t\t@Override\r\n\t\t\t\t\t\tpublic void stateChanged(Animatable&lt;Color&gt; animator) {\r\n\t\t\t\t\t\t\tsetBackground(animator.getValue());\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\ttransitionAnimatable.setEasement(Easement.SLOWOUT);\r\n\t\t\t\t\tAnimator.INSTANCE.add(transitionAnimatable);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t@Override\r\n\t\t\t\tpublic void mouseExited(MouseEvent e) {\r\n\t\t\t\t\tdouble progress = stopAnimation();\r\n\t\t\t\t\ttransitionAnimatable = new ColorAnimatable(\r\n\t\t\t\t\t\t\t\t\tnew ColorRange(getBackground(), unfocusedColor), \r\n\t\t\t\t\t\t\t\t\tpreferredAnimationTime(progress), \r\n\t\t\t\t\t\t\t\t\tnew AnimatableListener&lt;Color&gt;() {\r\n\t\t\t\t\t\t@Override\r\n\t\t\t\t\t\tpublic void stateChanged(Animatable&lt;Color&gt; animator) {\r\n\t\t\t\t\t\t\tsetBackground(animator.getValue());\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\ttransitionAnimatable.setEasement(Easement.SLOWOUT);\r\n\t\t\t\t\tAnimator.INSTANCE.add(transitionAnimatable);\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tpublic MenuItem(String text) {\r\n\t\t\tthis();\r\n\t\t\tsetText(text);\r\n\t\t}\r\n\r\n\t\tprotected Duration preferredAnimationTime(double currentProgress) {\r\n\t\t\tif (currentProgress &gt; 0.0 &amp;&amp; currentProgress &lt; 1.0) {\r\n\t\t\t\tdouble remainingProgress = 1.0 - currentProgress;\r\n\t\t\t\tdouble runningTime = animationTime.toMillis() * remainingProgress;\r\n\t\t\t\treturn Duration.ofMillis((long)runningTime);\r\n\t\t\t} \r\n\t\t\t\r\n\t\t\treturn animationTime;\r\n\t\t}\r\n\r\n\t\tprotected double stopAnimation() {\r\n\t\t\tif (transitionAnimatable != null) {\r\n\t\t\t\tAnimator.INSTANCE.remove(transitionAnimatable);\r\n\t\t\t\treturn transitionAnimatable.getRawProgress();\r\n\t\t\t}\r\n\t\t\treturn 0.0;\r\n\t\t}\r\n\r\n\t\tpublic void setText(String text) {\r\n\t\t\tlabel.setText(text);\r\n\t\t}\r\n\r\n\t\tpublic String getText() {\r\n\t\t\treturn label.getText();\r\n\t\t}\r\n\r\n\t\t@Override\r\n\t\tprotected void paintComponent(Graphics g) {\r\n\t\t\tsuper.paintComponent(g);\r\n\t\t\t// Because we&#39;re faking it\r\n\t\t\tg.setColor(getBackground());\r\n\t\t\tg.fillRect(0, 0, getWidth(), getHeight());\r\n\t\t}\r\n\r\n\t}\r\n\r\nThis looks complicated, but it&#39;s not to hard.  Basically it defines a focused and unfocused color, sets up a `MouseListener` to monitor the `mouseEntered` and `mouseExited` events and setups the `ColorAnimatable` based on the required transition.\r\n\r\nOne thing this does do, which might not be obvious, is it will take into account unfinished animation.  So if the user moves out of the item before the focus animation has completed, it will use the remaining time and the current color as starting point for the unfocus transition.\r\n\r\nBecause Swing components are either fully transparent or fully opaque, we need to &quot;fake&quot; the alpha support.  We do this by making the component fully transparent and then painting the background ourselves \r\n\r\n# Runnable example...\r\n\r\n[![Menu][1]][1]\r\n\r\n\timport java.awt.Color;\r\n\timport java.awt.EventQueue;\r\n\timport java.awt.Graphics;\r\n\timport java.awt.GridBagConstraints;\r\n\timport java.awt.GridBagLayout;\r\n\timport java.awt.event.ActionEvent;\r\n\timport java.awt.event.ActionListener;\r\n\timport java.awt.event.MouseAdapter;\r\n\timport java.awt.event.MouseEvent;\r\n\timport java.awt.geom.Point2D;\r\n\timport java.time.Duration;\r\n\timport java.time.LocalDateTime;\r\n\timport java.util.ArrayList;\r\n\timport java.util.Iterator;\r\n\timport java.util.List;\r\n\timport javax.swing.JFrame;\r\n\timport javax.swing.JLabel;\r\n\timport javax.swing.JPanel;\r\n\timport javax.swing.Timer;\r\n\timport javax.swing.UIManager;\r\n\timport javax.swing.UnsupportedLookAndFeelException;\r\n\timport javax.swing.border.EmptyBorder;\r\n\r\n\tpublic class Test {\r\n\r\n\t\tpublic static void main(String[] args) {\r\n\t\t\tnew Test();\r\n\t\t}\r\n\r\n\t\tpublic Test() {\r\n\t\t\tEventQueue.invokeLater(new Runnable() {\r\n\t\t\t\t@Override\r\n\t\t\t\tpublic void run() {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tUIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());\r\n\t\t\t\t\t} catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {\r\n\t\t\t\t\t\tex.printStackTrace();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tJFrame frame = new JFrame(&quot;Testing&quot;);\r\n\t\t\t\t\tframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n\t\t\t\t\tframe.add(new TestPane());\r\n\t\t\t\t\tframe.pack();\r\n\t\t\t\t\tframe.setLocationRelativeTo(null);\r\n\t\t\t\t\tframe.setVisible(true);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tpublic class TestPane extends JPanel {\r\n\r\n\t\t\tpublic TestPane() {\r\n\t\t\t\tsetBorder(new EmptyBorder(8, 8, 8, 8));\r\n\t\t\t\tsetLayout(new GridBagLayout());\r\n\t\t\t\tGridBagConstraints gbc = new GridBagConstraints();\r\n\t\t\t\tgbc.weightx = 1;\r\n\t\t\t\tgbc.fill = GridBagConstraints.HORIZONTAL;\r\n\t\t\t\tgbc.gridwidth = GridBagConstraints.REMAINDER;\r\n\r\n\t\t\t\tadd(new MenuItem(&quot;Backup&quot;), gbc);\r\n\t\t\t\tadd(new MenuItem(&quot;Screenshots&quot;), gbc);\r\n\t\t\t\tadd(new MenuItem(&quot;Settings&quot;), gbc);\r\n\r\n\t\t\t\tsetBackground(Color.BLACK);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n        // Sorry, I&#39;m over the character limit, you will need to copy\r\n        // all the other classes yourself\r\n\t}\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/5L5Bl.gif\r\n\r\nYou could also have a look at:\r\n\r\n- [The Universal Tween Engine](https://github.com/AurelienRibon/universal-tween-engine) (not used yet)\r\n- [The TimingFramework](https://github.com/akuhtz/timingframework) (which a lot of the above is loosely based around)\r\n- [The Trident Animation Library](https://github.com/kirill-grouchnikov/radiance/blob/master/docs/trident/trident.md) (not used it) which is part of the [Radiance](https://github.com/kirill-grouchnikov/radiance) framework\r\n\r\nYou should also have a look at [Concurrency in Swing](https://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html) to gain a better understanding into the underlying concept of how the engine itself works and why it was done this way","title":"JButton hover animation in Java Swing","body":"<p>First things first, you're actually asking a very difficult and complicated question.  Animation done right is not easy and requires a lot state management.</p>\n<p>For example, what happens if the user moves the mouse out of the menu item BEFORE it's finished animating?  Do you animate from the current state? Do you animate from what was to be the finished state? Do you animate across the full time range or only the remaining time range? How would you control and manage it all!?</p>\n<p>You're also asking about animating across color ranges.  Color blending is actually not as easy as it might sound.  Sure you could argue you're just animating the alpha value, but blending the colors gives you a much greater opportunity to provide a different animation affect, like blending from a transparent green to an opaque blue, cool.</p>\n<p>Animation is also not normally linear, there is a lot of theory that goes into animating something well, including anticipation, squash and stench, staging, blah, blah, blah - honestly, there are better people then me to take you through that.  The point is, good animation is complicated.</p>\n<p>My first suggestion is to go an use a good animation framework, like <a href=\"https://github.com/akuhtz/timingframework\" rel=\"nofollow noreferrer\">TimingFramework</a> which does all the heavy lifting for you.</p>\n<p>On the off chance you can't do that, then you're in for a fun ride.</p>\n<p>The first, well actually, easy thing, is to find a good color blending algorithm.  I spent a lot of time exploring different algorithms and trying a bunch of different things before settling on something like...</p>\n<pre><code>protected Color blend(Color color1, Color color2, double ratio) {\n    float r = (float) ratio;\n    float ir = (float) 1.0 - r;\n\n    float red = color1.getRed() * r + color2.getRed() * ir;\n    float green = color1.getGreen() * r + color2.getGreen() * ir;\n    float blue = color1.getBlue() * r + color2.getBlue() * ir;\n    float alpha = color1.getAlpha() * r + color2.getAlpha() * ir;\n\n    red = Math.min(255f, Math.max(0f, red));\n    green = Math.min(255f, Math.max(0f, green));\n    blue = Math.min(255f, Math.max(0f, blue));\n    alpha = Math.min(255f, Math.max(0f, alpha));\n\n    Color color = null;\n    try {\n        color = new Color((int) red, (int) green, (int) blue, (int) alpha);\n    } catch (IllegalArgumentException exp) {\n        exp.printStackTrace();\n    }\n    return color;\n}\n</code></pre>\n<p>The reason I use this approach is I can easily move a color towards black or white, which many other approaches couldn't achieve (just moved the color to high or low ranges).  This also focuses on blending two colors together based on a ratio of between <code>0</code> and <code>1</code> (so at <code>0.5</code>, there balanced blend between the two).</p>\n<h1>Animation Engine...</h1>\n<p>Note: Swing is single threaded AND not thread safe, you need to take that into consideration when developing a solution.\nOkay, the hard part...</p>\n<p>It's easy to do a linear animation, animation from the start of one point until you reach the end of another point. The problem with this is, they don't scale well and don't generally produce a good natural feeling animation.</p>\n<p>Instead, what you want is a concept of an animation running over a period of time.  From this you can calculate the progression through the given period and calculate the value to be applied.</p>\n<p>This approach scales well, you can change the time and not care about anything else, it will take care of itself.  It also works well on systems whose performance may not be up to a killer frame rate, as they can drop frames and mostly &quot;fake&quot; it</p>\n<p>One key concept to keep in mind, animation is the &quot;illusion&quot; of change over time.</p>\n<h2><code>Range</code></h2>\n<p><code>Range</code> is a simple generic representation of a starting and ending point, then given a normalised progression (<code>0-1</code>) can calculate a reasonable representation between those points.</p>\n<pre><code>public abstract class Range&lt;T&gt; {\n\n    private T from;\n    private T to;\n\n    public Range(T from, T to) {\n        this.from = from;\n        this.to = to;\n    }\n\n    public T getFrom() {\n        return from;\n    }\n\n    public T getTo() {\n        return to;\n    }\n\n    @Override\n    public String toString() {\n        return &quot;From &quot; + getFrom() + &quot; to &quot; + getTo();\n    }\n\n    public abstract T valueAt(double progress);\n\n}\n</code></pre>\n<p>The stupid thing is, I do this a lot, so, here is a helper class to encapsulate the core concept.</p>\n<h2><code>Animator</code></h2>\n<p>This is a &quot;central&quot; engine which drives all the animations.  It repeatedly ticks at about every 5 milliseconds and drives the <code>Animatable</code> objects, which actually calculate the time through the animation.</p>\n<pre><code>public enum Animator {\n\n    INSTANCE;\n\n    private Timer timer;\n\n    private List&lt;Animatable&gt; properies;\n\n    private Animator() {\n        properies = new ArrayList&lt;&gt;(5);\n        timer = new Timer(5, new ActionListener() {\n            @Override\n            public void actionPerformed(ActionEvent e) {\n                Iterator&lt;Animatable&gt; it = properies.iterator();\n                while (it.hasNext()) {\n                    Animatable ap = it.next();\n                    if (ap.tick()) {\n                        it.remove();\n                    }\n                }\n                if (properies.isEmpty()) {\n                    timer.stop();\n                }\n            }\n        });\n    }\n\n    public void add(Animatable ap) {\n        properies.add(ap);\n        timer.start();\n    }\n\n    public void remove(Animatable ap) {\n        properies.remove(ap);\n        if (properies.isEmpty()) {\n            timer.stop();\n        }\n    }\n\n}\n</code></pre>\n<h2><code>Animatable</code></h2>\n<p>This is &quot;something&quot; which can be animated.  It has a concept of a <code>Range</code> and a <code>Duration</code> over which it should be animated (it also supports easement, but I will talk about that later)</p>\n<pre><code>public interface Animatable&lt;T&gt; {\n    public Range&lt;T&gt; getRange();\n    public T getValue();\n    public boolean tick();\n    public void setDuration(Duration duration);\n    public Duration getDuration();\n    public Easement getEasement();\n}\n</code></pre>\n<h2><code>AbstractAnimatable</code></h2>\n<p>A abstract implementation of <code>Animatable</code>.  This does all the cool, awesome, calculations on each <code>tick</code> to determine how far through the given animation cycle it is and generates notifications to registered listeners about the change in state, so they can actually do something about it...</p>\n<pre><code>public abstract class AbstractAnimatable&lt;T&gt; implements Animatable&lt;T&gt; {\n\n    private Range&lt;T&gt; range;\n    private LocalDateTime startTime;\n    private Duration duration = Duration.ofSeconds(5);\n    private T value;\n\n    private AnimatableListener&lt;T&gt; listener;\n\n    private Easement easement;\n\n    public AbstractAnimatable(Range&lt;T&gt; range, AnimatableListener&lt;T&gt; listener) {\n        this.range = range;\n        this.value = range.getFrom();\n\n        this.listener = listener;\n    }\n\n    public AbstractAnimatable(Range&lt;T&gt; range, Easement easement, AnimatableListener&lt;T&gt; listener) {\n        this(range, listener);\n        this.easement = easement;\n    }\n\n    public void setEasement(Easement easement) {\n        this.easement = easement;\n    }\n\n    @Override\n    public Easement getEasement() {\n        return easement;\n    }\n\n    public void setDuration(Duration duration) {\n        this.duration = duration;\n    }\n\n    public Duration getDuration() {\n        return duration;\n    }\n\n    public Range&lt;T&gt; getRange() {\n        return range;\n    }\n\n    @Override\n    public T getValue() {\n        return value;\n    }\n\n    public double getCurrentProgress(double rawProgress) {\n        Easement easement = getEasement();\n        double progress = Math.min(1.0, Math.max(0.0, getRawProgress()));\n        if (easement != null) {\n            progress = easement.interpolate(progress);\n        }\n\n        return progress;\n    }\n\n    public double getRawProgress() {\n        if (startTime == null) {\n            startTime = LocalDateTime.now();\n        }\n        Duration duration = getDuration();\n        Duration runningTime = Duration.between(startTime, LocalDateTime.now());\n        double progress = (runningTime.toMillis() / (double) duration.toMillis());\n        return progress;\n    }\n\n    @Override\n    public boolean tick() {\n        double rawProgress = getRawProgress();\n        double progress = getCurrentProgress(rawProgress);\n\n        if (rawProgress &gt;= 1.0) {\n            progress = 1.0;\n        }\n\n        value = getRange().valueAt(progress);\n        listener.stateChanged(this);\n\n        return progress &gt;= 1.0;\n    }\n\n}\n</code></pre>\n<h2><code>AnimatableListener</code></h2>\n<p>A listener/observer to changes to a <code>AbstractAnimatable</code> state.  This way, the <code>AbstractAnimatable</code> can tell interested parties that the state has been updated and what that state currently is.</p>\n<pre><code>public interface AnimatableListener&lt;T&gt; {\n\n    public void stateChanged(Animatable&lt;T&gt; animator);\n}\n</code></pre>\n<h2><code>Easement</code></h2>\n<p>Okay, so I mentioned &quot;animation theory&quot;.  Basically what this is a implementation of a &quot;spline interpolation&quot; designed to provide common animation concepts, slow in, slow out, etc.  What this does is changes the &quot;progress&quot; value through the animation so that the &quot;speed&quot; of the animation &quot;appears&quot; to change over the duration of the animation ... fancy, pancy for making it &quot;look nice&quot;</p>\n<pre><code>public enum Easement {\n\n    SLOWINSLOWOUT(1d, 0d, 0d, 1d),\n    FASTINSLOWOUT(0d, 0d, 1d, 1d),\n    SLOWINFASTOUT(0d, 1d, 0d, 0d),\n    SLOWIN(1d, 0d, 1d, 1d),\n    SLOWOUT(0d, 0d, 0d, 1d);\n\n    private final double points[];\n\n    private final List&lt;PointUnit&gt; normalisedCurve;\n\n    private Easement(double x1, double y1, double x2, double y2) {\n        points = new double[]{x1, y1, x2, y2};\n\n        final List&lt;Double&gt; baseLengths = new ArrayList&lt;&gt;();\n        double prevX = 0;\n        double prevY = 0;\n        double cumulativeLength = 0;\n        for (double t = 0; t &lt;= 1; t += 0.01) {\n            Point2D xy = getXY(t);\n            double length = cumulativeLength\n                            + Math.sqrt((xy.getX() - prevX) * (xy.getX() - prevX)\n                                            + (xy.getY() - prevY) * (xy.getY() - prevY));\n\n            baseLengths.add(length);\n            cumulativeLength = length;\n            prevX = xy.getX();\n            prevY = xy.getY();\n        }\n\n        normalisedCurve = new ArrayList&lt;&gt;(baseLengths.size());\n        int index = 0;\n        for (double t = 0; t &lt;= 1; t += 0.01) {\n            double length = baseLengths.get(index++);\n            double normalLength = length / cumulativeLength;\n            normalisedCurve.add(new PointUnit(t, normalLength));\n        }\n    }\n\n    public double interpolate(double fraction) {\n        int low = 1;\n        int high = normalisedCurve.size() - 1;\n        int mid = 0;\n        while (low &lt;= high) {\n            mid = (low + high) / 2;\n\n            if (fraction &gt; normalisedCurve.get(mid).getPoint()) {\n                low = mid + 1;\n            } else if (mid &gt; 0 &amp;&amp; fraction &lt; normalisedCurve.get(mid - 1).getPoint()) {\n                high = mid - 1;\n            } else {\n                break;\n            }\n        }\n        /*\n     * The answer lies between the &quot;mid&quot; item and its predecessor.\n         */\n        final PointUnit prevItem = normalisedCurve.get(mid - 1);\n        final double prevFraction = prevItem.getPoint();\n        final double prevT = prevItem.getDistance();\n\n        final PointUnit item = normalisedCurve.get(mid);\n        final double proportion = (fraction - prevFraction) / (item.getPoint() - prevFraction);\n        final double interpolatedT = prevT + (proportion * (item.getDistance() - prevT));\n        return getY(interpolatedT);\n    }\n\n    protected Point2D getXY(double t) {\n        final double invT = 1 - t;\n        final double b1 = 3 * t * invT * invT;\n        final double b2 = 3 * t * t * invT;\n        final double b3 = t * t * t;\n        final Point2D xy = new Point2D.Double((b1 * points[0]) + (b2 * points[2]) + b3, (b1 * points[1]) + (b2 * points[3]) + b3);\n        return xy;\n    }\n\n    protected double getY(double t) {\n        final double invT = 1 - t;\n        final double b1 = 3 * t * invT * invT;\n        final double b2 = 3 * t * t * invT;\n        final double b3 = t * t * t;\n        return (b1 * points[2]) + (b2 * points[3]) + b3;\n    }\n\n    protected class PointUnit {\n\n        private final double distance;\n        private final double point;\n\n        public PointUnit(double distance, double point) {\n            this.distance = distance;\n            this.point = point;\n        }\n\n        public double getDistance() {\n            return distance;\n        }\n\n        public double getPoint() {\n            return point;\n        }\n\n    }\n\n}\n</code></pre>\n<h2>So what?!</h2>\n<p>Okay, about now, you're probably scratching your head, wishing you hadn't asked the question ;)</p>\n<p>How does all this help.  The point is, all the above is re-usable, so you dump into a library somewhere and don't care about :/</p>\n<p>What you do is then implement the required features and apply...</p>\n<h3><code>ColorRange</code></h3>\n<p>This takes the <code>colorBlend</code> algorithm from before and wraps into a <code>Range</code> concept...</p>\n<pre><code>public class ColorRange extends Range&lt;Color&gt; {\n    \n    public ColorRange(Color from, Color to) {\n        super(from, to);\n    }\n\n    @Override\n    public Color valueAt(double progress) {\n        Color blend = blend(getTo(), getFrom(), progress);\n        return blend;\n    }\n\n    protected Color blend(Color color1, Color color2, double ratio) {\n        float r = (float) ratio;\n        float ir = (float) 1.0 - r;\n\n        float red = color1.getRed() * r + color2.getRed() * ir;\n        float green = color1.getGreen() * r + color2.getGreen() * ir;\n        float blue = color1.getBlue() * r + color2.getBlue() * ir;\n        float alpha = color1.getAlpha() * r + color2.getAlpha() * ir;\n\n        red = Math.min(255f, Math.max(0f, red));\n        green = Math.min(255f, Math.max(0f, green));\n        blue = Math.min(255f, Math.max(0f, blue));\n        alpha = Math.min(255f, Math.max(0f, alpha));\n\n        Color color = null;\n        try {\n            color = new Color((int) red, (int) green, (int) blue, (int) alpha);\n        } catch (IllegalArgumentException exp) {\n            exp.printStackTrace();\n        }\n        return color;\n    }\n\n}\n</code></pre>\n<p>This allows us to calculate the required color based on the progression through the animation</p>\n<h3><code>ColorAnimatable</code></h3>\n<p>We then make a &quot;animatable color&quot; concept...</p>\n<pre><code>public class ColorAnimatable extends AbstractAnimatable&lt;Color&gt; {\n\n    public ColorAnimatable(ColorRange animationRange, Duration duration, AnimatableListener&lt;Color&gt; listener) {\n        super(animationRange, listener);\n        setDuration(duration);\n    }\n\n}\n</code></pre>\n<p>This means that we can establish a basic concept of a animation between two colors of a specified period of time and be notified when the animation state changes - it's nicely decoupled</p>\n<h1>Implementation...</h1>\n<p>And &quot;finally&quot; we're ready to actually make something out of it...</p>\n<pre><code>public class MenuItem extends JPanel {\n\n    private Duration animationTime = Duration.ofSeconds(5);\n    private JLabel label;\n\n    private ColorAnimatable transitionAnimatable;\n\n    private Color unfocusedColor = new Color(0, 0, 255, 0);\n    private Color focusedColor = new Color(0, 0, 255, 255);\n\n    public MenuItem() {\n        setOpaque(false);\n        setBorder(new EmptyBorder(8, 8, 8, 8));\n        setLayout(new GridBagLayout());\n\n        setBackground(unfocusedColor);\n\n        GridBagConstraints gbc = new GridBagConstraints();\n        gbc.weightx = 1;\n        gbc.fill = GridBagConstraints.BOTH;\n\n        label = new JLabel();\n        label.setForeground(Color.WHITE);\n        label.setHorizontalAlignment(JLabel.LEADING);\n        add(label, gbc);\n\n        label.addMouseListener(new MouseAdapter() {\n            @Override\n            public void mouseEntered(MouseEvent e) {\n                double progress = stopAnimation();\n                transitionAnimatable = new ColorAnimatable(\n                                new ColorRange(getBackground(), focusedColor), \n                                preferredAnimationTime(progress), \n                                new AnimatableListener&lt;Color&gt;() {\n                    @Override\n                    public void stateChanged(Animatable&lt;Color&gt; animator) {\n                        setBackground(animator.getValue());\n                    }\n                });\n                transitionAnimatable.setEasement(Easement.SLOWOUT);\n                Animator.INSTANCE.add(transitionAnimatable);\n            }\n\n            @Override\n            public void mouseExited(MouseEvent e) {\n                double progress = stopAnimation();\n                transitionAnimatable = new ColorAnimatable(\n                                new ColorRange(getBackground(), unfocusedColor), \n                                preferredAnimationTime(progress), \n                                new AnimatableListener&lt;Color&gt;() {\n                    @Override\n                    public void stateChanged(Animatable&lt;Color&gt; animator) {\n                        setBackground(animator.getValue());\n                    }\n                });\n                transitionAnimatable.setEasement(Easement.SLOWOUT);\n                Animator.INSTANCE.add(transitionAnimatable);\n            }\n\n        });\n    }\n\n    public MenuItem(String text) {\n        this();\n        setText(text);\n    }\n\n    protected Duration preferredAnimationTime(double currentProgress) {\n        if (currentProgress &gt; 0.0 &amp;&amp; currentProgress &lt; 1.0) {\n            double remainingProgress = 1.0 - currentProgress;\n            double runningTime = animationTime.toMillis() * remainingProgress;\n            return Duration.ofMillis((long)runningTime);\n        } \n        \n        return animationTime;\n    }\n\n    protected double stopAnimation() {\n        if (transitionAnimatable != null) {\n            Animator.INSTANCE.remove(transitionAnimatable);\n            return transitionAnimatable.getRawProgress();\n        }\n        return 0.0;\n    }\n\n    public void setText(String text) {\n        label.setText(text);\n    }\n\n    public String getText() {\n        return label.getText();\n    }\n\n    @Override\n    protected void paintComponent(Graphics g) {\n        super.paintComponent(g);\n        // Because we're faking it\n        g.setColor(getBackground());\n        g.fillRect(0, 0, getWidth(), getHeight());\n    }\n\n}\n</code></pre>\n<p>This looks complicated, but it's not to hard.  Basically it defines a focused and unfocused color, sets up a <code>MouseListener</code> to monitor the <code>mouseEntered</code> and <code>mouseExited</code> events and setups the <code>ColorAnimatable</code> based on the required transition.</p>\n<p>One thing this does do, which might not be obvious, is it will take into account unfinished animation.  So if the user moves out of the item before the focus animation has completed, it will use the remaining time and the current color as starting point for the unfocus transition.</p>\n<p>Because Swing components are either fully transparent or fully opaque, we need to &quot;fake&quot; the alpha support.  We do this by making the component fully transparent and then painting the background ourselves</p>\n<h1>Runnable example...</h1>\n<p><a href=\"https://i.stack.imgur.com/5L5Bl.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5L5Bl.gif\" alt=\"Menu\" /></a></p>\n<pre><code>import java.awt.Color;\nimport java.awt.EventQueue;\nimport java.awt.Graphics;\nimport java.awt.GridBagConstraints;\nimport java.awt.GridBagLayout;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\nimport java.awt.event.MouseAdapter;\nimport java.awt.event.MouseEvent;\nimport java.awt.geom.Point2D;\nimport java.time.Duration;\nimport java.time.LocalDateTime;\nimport java.util.ArrayList;\nimport java.util.Iterator;\nimport java.util.List;\nimport javax.swing.JFrame;\nimport javax.swing.JLabel;\nimport javax.swing.JPanel;\nimport javax.swing.Timer;\nimport javax.swing.UIManager;\nimport javax.swing.UnsupportedLookAndFeelException;\nimport javax.swing.border.EmptyBorder;\n\npublic class Test {\n\n    public static void main(String[] args) {\n        new Test();\n    }\n\n    public Test() {\n        EventQueue.invokeLater(new Runnable() {\n            @Override\n            public void run() {\n                try {\n                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());\n                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {\n                    ex.printStackTrace();\n                }\n\n                JFrame frame = new JFrame(&quot;Testing&quot;);\n                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n                frame.add(new TestPane());\n                frame.pack();\n                frame.setLocationRelativeTo(null);\n                frame.setVisible(true);\n            }\n        });\n    }\n\n    public class TestPane extends JPanel {\n\n        public TestPane() {\n            setBorder(new EmptyBorder(8, 8, 8, 8));\n            setLayout(new GridBagLayout());\n            GridBagConstraints gbc = new GridBagConstraints();\n            gbc.weightx = 1;\n            gbc.fill = GridBagConstraints.HORIZONTAL;\n            gbc.gridwidth = GridBagConstraints.REMAINDER;\n\n            add(new MenuItem(&quot;Backup&quot;), gbc);\n            add(new MenuItem(&quot;Screenshots&quot;), gbc);\n            add(new MenuItem(&quot;Settings&quot;), gbc);\n\n            setBackground(Color.BLACK);\n        }\n\n    }\n\n    // Sorry, I'm over the character limit, you will need to copy\n    // all the other classes yourself\n}\n</code></pre>\n<p>You could also have a look at:</p>\n<ul>\n<li><a href=\"https://github.com/AurelienRibon/universal-tween-engine\" rel=\"nofollow noreferrer\">The Universal Tween Engine</a> (not used yet)</li>\n<li><a href=\"https://github.com/akuhtz/timingframework\" rel=\"nofollow noreferrer\">The TimingFramework</a> (which a lot of the above is loosely based around)</li>\n<li><a href=\"https://github.com/kirill-grouchnikov/radiance/blob/master/docs/trident/trident.md\" rel=\"nofollow noreferrer\">The Trident Animation Library</a> (not used it) which is part of the <a href=\"https://github.com/kirill-grouchnikov/radiance\" rel=\"nofollow noreferrer\">Radiance</a> framework</li>\n</ul>\n<p>You should also have a look at <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html\" rel=\"nofollow noreferrer\">Concurrency in Swing</a> to gain a better understanding into the underlying concept of how the engine itself works and why it was done this way</p>\n"},{"comments":[{"owner":{"account_id":6940896,"reputation":410,"user_id":5327287,"display_name":"user5327287"},"score":0,"creation_date":1535049991,"post_id":51919081,"comment_id":90934419,"body_markdown":"Wow this is actully way simpler than what MadProgrammer wrote. Lets say that if I use 20 buttons so each one will have his own timer isn&#39;t it can lag the GUI because we use alot of timers?","body":"Wow this is actully way simpler than what MadProgrammer wrote. Lets say that if I use 20 buttons so each one will have his own timer isn&#39;t it can lag the GUI because we use alot of timers?"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1535050638,"post_id":51919081,"comment_id":90934739,"body_markdown":"Unlikely.  The [documentation](https://docs.oracle.com/javase/10/docs/api/javax/swing/Timer.html) states “all Timers perform their waiting using a single, shared thread” and “its automatic thread sharing means that you don&#39;t have to take special steps to avoid spawning too many threads.”  Even if the user ran the mouse over all the menu items in a rapid repeating cycle, there would only be one additional thread.  Setting the background of 20 items is unlikely to affect performance.","body":"Unlikely.  The <a href=\"https://docs.oracle.com/javase/10/docs/api/javax/swing/Timer.html\" rel=\"nofollow noreferrer\">documentation</a> states “all Timers perform their waiting using a single, shared thread” and “its automatic thread sharing means that you don&#39;t have to take special steps to avoid spawning too many threads.”  Even if the user ran the mouse over all the menu items in a rapid repeating cycle, there would only be one additional thread.  Setting the background of 20 items is unlikely to affect performance."}],"tags":[],"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1534691766,"creation_date":1534691766,"answer_id":51919081,"question_id":51903228,"body_markdown":"This is a much simpler implementation than what MadProgrammer has suggested.  It makes some naive assumptions, such as linear color interpolation.  It also does not attempt alpha blending of the animation colors.  And it does not support animation in response to keyboard navigation.\r\n\r\nThe inner Fader class does animation in one direction, using a javax.swing.Timer.  Each JMenuItem is assigned two Fader objects, one for transitioning to the highlight color, and another to transition back to the regular background color.\r\n\r\nIt is also necessary to override the UI delegate object, since most look-and-feels want to enforce their own colors regardless of a JMenuItem’s background, either all the time or when the menu item has keyboard focus.\r\n\r\n    import java.util.Objects;\r\n\r\n    import java.awt.Color;\r\n    import java.awt.Component;\r\n    import java.awt.EventQueue;\r\n    import java.awt.Graphics;\r\n    import java.awt.event.MouseAdapter;\r\n    import java.awt.event.MouseEvent;\r\n\r\n    import javax.swing.AbstractButton;\r\n    import javax.swing.BorderFactory;\r\n    import javax.swing.JLabel;\r\n    import javax.swing.JFrame;\r\n    import javax.swing.JMenuItem;\r\n    import javax.swing.JPopupMenu;\r\n    import javax.swing.Timer;\r\n    import javax.swing.plaf.basic.BasicMenuItemUI;\r\n\r\n    public class FadingMenuTest {\r\n        private static final int animDurationMillis = 500;\r\n        private static final int frameCount = 8;\r\n\r\n        private static class Fader {\r\n            private final Component component;\r\n\r\n            private final Color normalBackground;\r\n            private final float[] normalRGBA;\r\n            private final float[] targetRGBA;\r\n            private final float[] rgba = new float[4];\r\n\r\n            private final Timer timer = new Timer(animDurationMillis / frameCount,\r\n                e -&gt; updateBackground());\r\n\r\n            private int frameNumber;\r\n\r\n            Fader(Component component,\r\n                  Color targetBackground,\r\n                  Color normalBackground) {\r\n\r\n                this.component = Objects.requireNonNull(component);\r\n                this.normalBackground = normalBackground;\r\n                this.normalRGBA = normalBackground.getComponents(null);\r\n                this.targetRGBA = targetBackground.getComponents(null);\r\n            }\r\n\r\n            private void updateBackground() {\r\n                if (++frameNumber &gt; frameCount) {\r\n                    timer.stop();\r\n                    return;\r\n                }\r\n\r\n                for (int i = rgba.length - 1; i &gt;= 0; i--) {\r\n                    float normal = normalRGBA[i];\r\n                    float target = targetRGBA[i];\r\n                    rgba[i] =\r\n                        normal + (target - normal) * frameNumber / frameCount;\r\n                }\r\n\r\n                component.setBackground(\r\n                    new Color(rgba[0], rgba[1], rgba[2], rgba[3]));\r\n            }\r\n\r\n            void start() {\r\n                frameNumber = 0;\r\n                timer.restart();\r\n                component.setBackground(normalBackground);\r\n            }\r\n\r\n            void stop() {\r\n                timer.stop();\r\n                component.setBackground(normalBackground);\r\n            }\r\n        }\r\n\r\n        static void addFadeOnHover(Component component,\r\n                                   Color targetBackground,\r\n                                   Color normalBackground) {\r\n\r\n            Fader entryFader =\r\n                new Fader(component, targetBackground, normalBackground);\r\n            Fader exitFader =\r\n                new Fader(component, normalBackground, targetBackground);\r\n\r\n            component.addMouseListener(new MouseAdapter() {\r\n                private static final long serialVersionUID = 1;\r\n\r\n                @Override\r\n                public void mouseEntered(MouseEvent event) {\r\n                    exitFader.stop();\r\n                    entryFader.start();\r\n                }\r\n\r\n                @Override\r\n                public void mouseExited(MouseEvent event) {\r\n                    entryFader.stop();\r\n                    exitFader.start();\r\n                }\r\n            });\r\n        }\r\n\r\n        static void show() {\r\n            Color foreground = Color.WHITE;\r\n            Color background = new Color(0, 0, 128);\r\n            Color highlight = Color.BLUE;\r\n\r\n            JPopupMenu menu = new JPopupMenu();\r\n            menu.setBackground(background);\r\n\r\n            menu.add(new JMenuItem(String.format(&quot;%c Backup&quot;, 0x1f5ce)));\r\n            menu.add(new JMenuItem(String.format(&quot;%c Screenshots&quot;, 0x1f5b5)));\r\n            menu.add(new JMenuItem(&quot;\\u26ed Settings&quot;));\r\n\r\n            // Most look-and-feels will override any colors we set, especially\r\n            // when a menu item is selected.\r\n            BasicMenuItemUI ui = new BasicMenuItemUI() {\r\n                {\r\n                    selectionForeground = foreground;\r\n                    selectionBackground = background;\r\n                }\r\n\r\n                @Override\r\n                public void paintBackground(Graphics g,\r\n                                            JMenuItem item,\r\n                                            Color background) {\r\n                    super.paintBackground(g, item, item.getBackground());\r\n                }\r\n            };\r\n\r\n            for (Component item : menu.getComponents()) {\r\n                AbstractButton b = (AbstractButton) item;\r\n                b.setContentAreaFilled(false);\r\n                b.setOpaque(true);\r\n                b.setUI(ui);\r\n\r\n                item.setForeground(foreground);\r\n                item.setBackground(background);\r\n                addFadeOnHover(item, highlight, background);\r\n            }\r\n\r\n            JLabel label = new JLabel(&quot;Right click here&quot;);\r\n            label.setBorder(BorderFactory.createEmptyBorder(200, 200, 200, 200));\r\n            label.setComponentPopupMenu(menu);\r\n\r\n            JFrame frame = new JFrame(&quot;Fading Menu Test&quot;);\r\n            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n            frame.getContentPane().add(label);\r\n            frame.pack();\r\n            frame.setLocationByPlatform(true);\r\n            frame.setVisible(true);\r\n        }\r\n\r\n        public static void main(String[] args) {\r\n            EventQueue.invokeLater(() -&gt; show());\r\n        }\r\n    }\r\n","title":"JButton hover animation in Java Swing","body":"<p>This is a much simpler implementation than what MadProgrammer has suggested.  It makes some naive assumptions, such as linear color interpolation.  It also does not attempt alpha blending of the animation colors.  And it does not support animation in response to keyboard navigation.</p>\n\n<p>The inner Fader class does animation in one direction, using a javax.swing.Timer.  Each JMenuItem is assigned two Fader objects, one for transitioning to the highlight color, and another to transition back to the regular background color.</p>\n\n<p>It is also necessary to override the UI delegate object, since most look-and-feels want to enforce their own colors regardless of a JMenuItem’s background, either all the time or when the menu item has keyboard focus.</p>\n\n<pre><code>import java.util.Objects;\n\nimport java.awt.Color;\nimport java.awt.Component;\nimport java.awt.EventQueue;\nimport java.awt.Graphics;\nimport java.awt.event.MouseAdapter;\nimport java.awt.event.MouseEvent;\n\nimport javax.swing.AbstractButton;\nimport javax.swing.BorderFactory;\nimport javax.swing.JLabel;\nimport javax.swing.JFrame;\nimport javax.swing.JMenuItem;\nimport javax.swing.JPopupMenu;\nimport javax.swing.Timer;\nimport javax.swing.plaf.basic.BasicMenuItemUI;\n\npublic class FadingMenuTest {\n    private static final int animDurationMillis = 500;\n    private static final int frameCount = 8;\n\n    private static class Fader {\n        private final Component component;\n\n        private final Color normalBackground;\n        private final float[] normalRGBA;\n        private final float[] targetRGBA;\n        private final float[] rgba = new float[4];\n\n        private final Timer timer = new Timer(animDurationMillis / frameCount,\n            e -&gt; updateBackground());\n\n        private int frameNumber;\n\n        Fader(Component component,\n              Color targetBackground,\n              Color normalBackground) {\n\n            this.component = Objects.requireNonNull(component);\n            this.normalBackground = normalBackground;\n            this.normalRGBA = normalBackground.getComponents(null);\n            this.targetRGBA = targetBackground.getComponents(null);\n        }\n\n        private void updateBackground() {\n            if (++frameNumber &gt; frameCount) {\n                timer.stop();\n                return;\n            }\n\n            for (int i = rgba.length - 1; i &gt;= 0; i--) {\n                float normal = normalRGBA[i];\n                float target = targetRGBA[i];\n                rgba[i] =\n                    normal + (target - normal) * frameNumber / frameCount;\n            }\n\n            component.setBackground(\n                new Color(rgba[0], rgba[1], rgba[2], rgba[3]));\n        }\n\n        void start() {\n            frameNumber = 0;\n            timer.restart();\n            component.setBackground(normalBackground);\n        }\n\n        void stop() {\n            timer.stop();\n            component.setBackground(normalBackground);\n        }\n    }\n\n    static void addFadeOnHover(Component component,\n                               Color targetBackground,\n                               Color normalBackground) {\n\n        Fader entryFader =\n            new Fader(component, targetBackground, normalBackground);\n        Fader exitFader =\n            new Fader(component, normalBackground, targetBackground);\n\n        component.addMouseListener(new MouseAdapter() {\n            private static final long serialVersionUID = 1;\n\n            @Override\n            public void mouseEntered(MouseEvent event) {\n                exitFader.stop();\n                entryFader.start();\n            }\n\n            @Override\n            public void mouseExited(MouseEvent event) {\n                entryFader.stop();\n                exitFader.start();\n            }\n        });\n    }\n\n    static void show() {\n        Color foreground = Color.WHITE;\n        Color background = new Color(0, 0, 128);\n        Color highlight = Color.BLUE;\n\n        JPopupMenu menu = new JPopupMenu();\n        menu.setBackground(background);\n\n        menu.add(new JMenuItem(String.format(\"%c Backup\", 0x1f5ce)));\n        menu.add(new JMenuItem(String.format(\"%c Screenshots\", 0x1f5b5)));\n        menu.add(new JMenuItem(\"\\u26ed Settings\"));\n\n        // Most look-and-feels will override any colors we set, especially\n        // when a menu item is selected.\n        BasicMenuItemUI ui = new BasicMenuItemUI() {\n            {\n                selectionForeground = foreground;\n                selectionBackground = background;\n            }\n\n            @Override\n            public void paintBackground(Graphics g,\n                                        JMenuItem item,\n                                        Color background) {\n                super.paintBackground(g, item, item.getBackground());\n            }\n        };\n\n        for (Component item : menu.getComponents()) {\n            AbstractButton b = (AbstractButton) item;\n            b.setContentAreaFilled(false);\n            b.setOpaque(true);\n            b.setUI(ui);\n\n            item.setForeground(foreground);\n            item.setBackground(background);\n            addFadeOnHover(item, highlight, background);\n        }\n\n        JLabel label = new JLabel(\"Right click here\");\n        label.setBorder(BorderFactory.createEmptyBorder(200, 200, 200, 200));\n        label.setComponentPopupMenu(menu);\n\n        JFrame frame = new JFrame(\"Fading Menu Test\");\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        frame.getContentPane().add(label);\n        frame.pack();\n        frame.setLocationByPlatform(true);\n        frame.setVisible(true);\n    }\n\n    public static void main(String[] args) {\n        EventQueue.invokeLater(() -&gt; show());\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":6940896,"reputation":410,"user_id":5327287,"display_name":"user5327287"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4292,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"answer_count":2,"score":2,"last_activity_date":1689131681,"creation_date":1534542216,"question_id":51903228,"body_markdown":"I working on GUI window with Swing and I want to create a navegetion menu. I want to add an animation to the navegetion menu&#39;s buttons when hovering on them with the mouse.\r\n\r\nSomthing like this:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nI can&#39;t do it with mouse listener because it just change between colors without animation like so\r\n\r\n[![enter image description here][2]][2]\r\n\r\n With rolloving it require gifs and different screens sizes will require different gif sizes.\r\n\r\nIs there a way to do it some how throw the code?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/M4fQT.gif\r\n  [2]: https://i.stack.imgur.com/yXTK5.gif","title":"JButton hover animation in Java Swing","body":"<p>I working on GUI window with Swing and I want to create a navegetion menu. I want to add an animation to the navegetion menu's buttons when hovering on them with the mouse.</p>\n\n<p>Somthing like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/M4fQT.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/M4fQT.gif\" alt=\"enter image description here\"></a></p>\n\n<p>I can't do it with mouse listener because it just change between colors without animation like so</p>\n\n<p><a href=\"https://i.stack.imgur.com/yXTK5.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yXTK5.gif\" alt=\"enter image description here\"></a></p>\n\n<p>With rolloving it require gifs and different screens sizes will require different gif sizes.</p>\n\n<p>Is there a way to do it some how throw the code?</p>\n"},{"tags":["java","maven","java-module"],"answers":[{"tags":[],"owner":{"account_id":18266066,"reputation":86,"user_id":13297765,"display_name":"Aidan Do"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689130735,"creation_date":1689130735,"answer_id":76666892,"question_id":76658756,"body_markdown":"A valid workaround is to package `core` during the `process-classes` phase.\r\n\r\nIn `core/pom.xml`\r\n\r\n```xml\r\n    &lt;build&gt;\r\n      &lt;pluginManagement&gt;\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;3.0.2&lt;/version&gt;\r\n          &lt;executions&gt;\r\n            &lt;!-- Runs the maven-jar-plugin goal straight after compile phase. This allows mvn test and mvn compile\r\n            to work properly because a jar must be created in order for core to be registered as an automatic\r\n            module. Can be removed when core is turned into a named module. --&gt;\r\n            &lt;execution&gt;\r\n              &lt;id&gt;repositioned-jar&lt;/id&gt;\r\n              &lt;phase&gt;process-classes&lt;/phase&gt;\r\n              &lt;goals&gt;\r\n                  &lt;goal&gt;jar&lt;/goal&gt;\r\n              &lt;/goals&gt;\r\n            &lt;/execution&gt;\r\n            &lt;!-- Disables default maven-jar-plugin goal by attaching to non-existant phase.\r\n              Remove when &quot;reposition-jar&quot; execution is removed --&gt;\r\n            &lt;execution&gt;\r\n              &lt;id&gt;default-jar&lt;/id&gt;\r\n              &lt;phase&gt;none&lt;/phase&gt;\r\n              &lt;goals&gt;\r\n                  &lt;goal&gt;jar&lt;/goal&gt;\r\n              &lt;/goals&gt;\r\n            &lt;/execution&gt;\r\n          &lt;/executions&gt;\r\n        &lt;/plugin&gt;\r\n      &lt;pluginManagement&gt;\r\n    &lt;build&gt;\r\n```\r\n\r\nThis allows a .jar to be created before the `test` phase. Tests run from IntelliJ, however, will no longer work.\r\n","title":"mvn test not working when Java 9 module is depending on automatic module","body":"<p>A valid workaround is to package <code>core</code> during the <code>process-classes</code> phase.</p>\n<p>In <code>core/pom.xml</code></p>\n<pre class=\"lang-xml prettyprint-override\"><code>    &lt;build&gt;\n      &lt;pluginManagement&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.0.2&lt;/version&gt;\n          &lt;executions&gt;\n            &lt;!-- Runs the maven-jar-plugin goal straight after compile phase. This allows mvn test and mvn compile\n            to work properly because a jar must be created in order for core to be registered as an automatic\n            module. Can be removed when core is turned into a named module. --&gt;\n            &lt;execution&gt;\n              &lt;id&gt;repositioned-jar&lt;/id&gt;\n              &lt;phase&gt;process-classes&lt;/phase&gt;\n              &lt;goals&gt;\n                  &lt;goal&gt;jar&lt;/goal&gt;\n              &lt;/goals&gt;\n            &lt;/execution&gt;\n            &lt;!-- Disables default maven-jar-plugin goal by attaching to non-existant phase.\n              Remove when &quot;reposition-jar&quot; execution is removed --&gt;\n            &lt;execution&gt;\n              &lt;id&gt;default-jar&lt;/id&gt;\n              &lt;phase&gt;none&lt;/phase&gt;\n              &lt;goals&gt;\n                  &lt;goal&gt;jar&lt;/goal&gt;\n              &lt;/goals&gt;\n            &lt;/execution&gt;\n          &lt;/executions&gt;\n        &lt;/plugin&gt;\n      &lt;pluginManagement&gt;\n    &lt;build&gt;\n</code></pre>\n<p>This allows a .jar to be created before the <code>test</code> phase. Tests run from IntelliJ, however, will no longer work.</p>\n"}],"owner":{"account_id":18266066,"reputation":86,"user_id":13297765,"display_name":"Aidan Do"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689130735,"creation_date":1689050440,"question_id":76658756,"body_markdown":"I have a multi-module maven project with two (maven) modules `core` and `service`. `core` is too difficult to turn into a java 9 module at this stage, so we want it as an automatic module. `service` is a Java 9 module and depends on `core`.\r\n\r\nWhen I run `mvn package` everything runs fine, `core` is packaged as a jar file and gets picked up as an automatic module.\r\n\r\nHowever, `mvn test` throws error `module not found: core` - this is because `core` doesn&#39;t get packaged as a jar file and therefore is not picked up as an automatic module. I&#39;ve created a [reproducer][1] for this scenario (just imagine core is very difficult to turn into a java 9 module) - try running `mvn package` vs `mvn test`.\r\n\r\nIs there a way to allow `mvn test` to properly run **without** turning `core` into a java 9 module?\r\n\r\n\r\n  [1]: https://github.com/REslim30/maven-test-automatic-module-repro","title":"mvn test not working when Java 9 module is depending on automatic module","body":"<p>I have a multi-module maven project with two (maven) modules <code>core</code> and <code>service</code>. <code>core</code> is too difficult to turn into a java 9 module at this stage, so we want it as an automatic module. <code>service</code> is a Java 9 module and depends on <code>core</code>.</p>\n<p>When I run <code>mvn package</code> everything runs fine, <code>core</code> is packaged as a jar file and gets picked up as an automatic module.</p>\n<p>However, <code>mvn test</code> throws error <code>module not found: core</code> - this is because <code>core</code> doesn't get packaged as a jar file and therefore is not picked up as an automatic module. I've created a <a href=\"https://github.com/REslim30/maven-test-automatic-module-repro\" rel=\"nofollow noreferrer\">reproducer</a> for this scenario (just imagine core is very difficult to turn into a java 9 module) - try running <code>mvn package</code> vs <code>mvn test</code>.</p>\n<p>Is there a way to allow <code>mvn test</code> to properly run <strong>without</strong> turning <code>core</code> into a java 9 module?</p>\n"},{"tags":["java","mysql","hibernate","jpa"],"comments":[{"owner":{"account_id":12037792,"reputation":1783,"user_id":8805742,"display_name":"mahfuj asif"},"score":0,"creation_date":1689131567,"post_id":76666883,"comment_id":135168231,"body_markdown":"Have you tried saving object with manually provided? it is supposed to use provided id, when no id is provided it generates the id. If there is any error please provide log","body":"Have you tried saving object with manually provided? it is supposed to use provided id, when no id is provided it generates the id. If there is any error please provide log"},{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":0,"creation_date":1689146360,"post_id":76666883,"comment_id":135170098,"body_markdown":"Possible [duplicate](https://stackoverflow.com/questions/16108003/how-to-insert-values-into-auto-identity-column-in-mysql)","body":"Possible <a href=\"https://stackoverflow.com/questions/16108003/how-to-insert-values-into-auto-identity-column-in-mysql\">duplicate</a>"}],"owner":{"account_id":2830572,"reputation":443,"user_id":2432237,"accept_rate":92,"display_name":"Mauricio"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689130620,"creation_date":1689130620,"question_id":76666883,"body_markdown":"I need to insert specific numeric values in an auto increment defined column using hibernate.\r\n\r\nWithout specifying the value it behaves as expected but I need to insert some values that come from a migration and cannot change them.\r\n\r\nThanks in advance.","title":"Is it possible to insert a specific primary key with autoincrement in MySQL using hibernate?","body":"<p>I need to insert specific numeric values in an auto increment defined column using hibernate.</p>\n<p>Without specifying the value it behaves as expected but I need to insert some values that come from a migration and cannot change them.</p>\n<p>Thanks in advance.</p>\n"},{"tags":["java","corba","nameservice"],"answers":[{"comments":[{"owner":{"account_id":24859,"reputation":31921,"user_id":63485,"accept_rate":100,"display_name":"Brian Neal"},"score":0,"creation_date":1357919070,"post_id":14281328,"comment_id":19829806,"body_markdown":"The typical way to get access to the naming service is through resolve_initial_references(). Of course you have to have configured your ORB with the IP address and port of the name service of interest in order for resolve_initial_references() to work. In omniORB for example, you put that information either in a config file, environment variable, or as a command-line argument. I don&#39;t use Java or Java ORBs, but I can&#39;t imagine why it would be any different there.","body":"The typical way to get access to the naming service is through resolve_initial_references(). Of course you have to have configured your ORB with the IP address and port of the name service of interest in order for resolve_initial_references() to work. In omniORB for example, you put that information either in a config file, environment variable, or as a command-line argument. I don&#39;t use Java or Java ORBs, but I can&#39;t imagine why it would be any different there."},{"owner":{"account_id":167824,"reputation":21098,"user_id":1439305,"accept_rate":81,"display_name":"Audrius Meškauskas"},"score":0,"creation_date":1357919547,"post_id":14281328,"comment_id":19830085,"body_markdown":"Yes, you can also set the ORBInitRef.NameService property in the properties of your ORB to the location of your name service and then that service replaces the default local service so you can access it through resolve_initial_references(). This includes more steps but likely should be used in production, my code is along &quot;Hello world&quot; lines. I added now some sentences to dig deeper.","body":"Yes, you can also set the ORBInitRef.NameService property in the properties of your ORB to the location of your name service and then that service replaces the default local service so you can access it through resolve_initial_references(). This includes more steps but likely should be used in production, my code is along &quot;Hello world&quot; lines. I added now some sentences to dig deeper."},{"owner":{"account_id":167824,"reputation":21098,"user_id":1439305,"accept_rate":81,"display_name":"Audrius Meškauskas"},"score":0,"creation_date":1358078535,"post_id":14281328,"comment_id":19868481,"body_markdown":"Wonder who voted -1 for this without even explaining that is wrong (about the way to configure with properties is kind of written now). Maybe some SOAP/WDSL fanatic. Ignoring.","body":"Wonder who voted -1 for this without even explaining that is wrong (about the way to configure with properties is kind of written now). Maybe some SOAP/WDSL fanatic. Ignoring."},{"owner":{"account_id":24859,"reputation":31921,"user_id":63485,"accept_rate":100,"display_name":"Brian Neal"},"score":0,"creation_date":1358103339,"post_id":14281328,"comment_id":19875746,"body_markdown":"You&#39;ve improved it, but your statement &quot;orb.resolve_initial_references(&quot;NameService&quot;) returns the local service on the running virtual machine&quot; is not always correct. It is going to return whatever it is configured to return, and is more often going to be a remote naming service.","body":"You&#39;ve improved it, but your statement &quot;orb.resolve_initial_references(&quot;NameService&quot;) returns the local service on the running virtual machine&quot; is not always correct. It is going to return whatever it is configured to return, and is more often going to be a remote naming service."},{"owner":{"account_id":167824,"reputation":21098,"user_id":1439305,"accept_rate":81,"display_name":"Audrius Meškauskas"},"score":0,"creation_date":1358105032,"post_id":14281328,"comment_id":19876262,"body_markdown":"Improved the wording further. Anyway this name service must be configured to work properly, while I agree it is normally configured in production.","body":"Improved the wording further. Anyway this name service must be configured to work properly, while I agree it is normally configured in production."},{"owner":{"account_id":197030,"reputation":1674,"user_id":440827,"accept_rate":86,"display_name":"Christian"},"score":0,"creation_date":1358152044,"post_id":14281328,"comment_id":19888723,"body_markdown":"Thanks for answer. I will try all this today and mark it as resolved.","body":"Thanks for answer. I will try all this today and mark it as resolved."},{"owner":{"account_id":24859,"reputation":31921,"user_id":63485,"accept_rate":100,"display_name":"Brian Neal"},"score":0,"creation_date":1358172473,"post_id":14281328,"comment_id":19897146,"body_markdown":"+1 from me, but I don&#39;t know what virtual machines have to do with this.","body":"+1 from me, but I don&#39;t know what virtual machines have to do with this."}],"tags":[],"owner":{"account_id":167824,"reputation":21098,"user_id":1439305,"accept_rate":81,"display_name":"Audrius Meškauskas"},"comment_count":7,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1358104974,"creation_date":1357918142,"answer_id":14281328,"question_id":14279987,"body_markdown":"The existing, running CORBA naming service can be accessed through the classes in the [org.omg.CosNaming][1] package. You need to obtain the `NamingContextExt`. It has methods to iterate through all existing bindings as well as to resolve objects by name.\r\n\r\nWhen you start a `tnameserv` tool, it prints for you IOR - this is CORBA URL. You can get the CORBA object (name service including) from any ORB in the world if it is accessible through network and you supply the IOR:\r\n\r\n    public static void main(String args[]) throws Exception {\r\n       ORB orb = ORB.init(args, null);\r\n       // pass the IOR as command line parameter for this program\r\n       String ior = args[0];\r\n       org.omg.CORBA.Object objRef = orb.string_to_object(ior);\r\n       NamingContextExt nameService = NamingContextExtHelper.narrow(objRef);\r\n   \r\n       // Now you can work with your naming service. \r\n    }\r\n\r\nSee [here][2] for tutorial on how to access CORBA objects and [here][3] on how to work with naming service. \r\n\r\nThe `orb.resolve_initial_references(&quot;NameService&quot;)` by default (if not configured) returns the local service on the running virtual machine and you need to query the external one. To use this, you need to pass the correct configuration properties (second parameter that is null in my example) with the ORBInitRef.NameService property set to the address of your name service, as described [here][4]. Many (or most of) production environments have this property set so that this method returns the correct remote name service. \r\n\r\n[servertool][5] is a command line tool that allows to list the registered CORBA objects without writing Java code. You need to specify on which host the name service of interest is running. servertool will not complain if the service is running at the given host and port. It should complain if it does not find one!\r\n\r\nMost important, your CORBA object must register with the obtained name service by calling\r\n\r\n    nameService.bind(yourName, yourCORBAObject);\r\n\r\nIn case the name service is remote, this will send the network message containing the URL of your orb and reference to your object. If your do not register your object, of course the reference will not be available there and the servertool will show you an empty list, just as you complain.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/1.4.2/docs/api/index.html\r\n  [2]: http://www.javaworld.com/jw-02-1999/jw-02-enterprise.html\r\n  [3]: http://docs.oracle.com/javase/1.4.2/docs/guide/idl/tnameserv.html\r\n  [4]: https://stackoverflow.com/questions/2633790/error-when-trying-to-connect-to-jacorb-naming-service/2921952#2921952\r\n  [5]: http://docs.oracle.com/javase/1.4.2/docs/guide/idl/servertool.html","title":"Access Java Corba NameService","body":"<p>The existing, running CORBA naming service can be accessed through the classes in the <a href=\"http://docs.oracle.com/javase/1.4.2/docs/api/index.html\" rel=\"nofollow noreferrer\">org.omg.CosNaming</a> package. You need to obtain the <code>NamingContextExt</code>. It has methods to iterate through all existing bindings as well as to resolve objects by name.</p>\n\n<p>When you start a <code>tnameserv</code> tool, it prints for you IOR - this is CORBA URL. You can get the CORBA object (name service including) from any ORB in the world if it is accessible through network and you supply the IOR:</p>\n\n<pre><code>public static void main(String args[]) throws Exception {\n   ORB orb = ORB.init(args, null);\n   // pass the IOR as command line parameter for this program\n   String ior = args[0];\n   org.omg.CORBA.Object objRef = orb.string_to_object(ior);\n   NamingContextExt nameService = NamingContextExtHelper.narrow(objRef);\n\n   // Now you can work with your naming service. \n}\n</code></pre>\n\n<p>See <a href=\"http://www.javaworld.com/jw-02-1999/jw-02-enterprise.html\" rel=\"nofollow noreferrer\">here</a> for tutorial on how to access CORBA objects and <a href=\"http://docs.oracle.com/javase/1.4.2/docs/guide/idl/tnameserv.html\" rel=\"nofollow noreferrer\">here</a> on how to work with naming service. </p>\n\n<p>The <code>orb.resolve_initial_references(\"NameService\")</code> by default (if not configured) returns the local service on the running virtual machine and you need to query the external one. To use this, you need to pass the correct configuration properties (second parameter that is null in my example) with the ORBInitRef.NameService property set to the address of your name service, as described <a href=\"https://stackoverflow.com/questions/2633790/error-when-trying-to-connect-to-jacorb-naming-service/2921952#2921952\">here</a>. Many (or most of) production environments have this property set so that this method returns the correct remote name service. </p>\n\n<p><a href=\"http://docs.oracle.com/javase/1.4.2/docs/guide/idl/servertool.html\" rel=\"nofollow noreferrer\">servertool</a> is a command line tool that allows to list the registered CORBA objects without writing Java code. You need to specify on which host the name service of interest is running. servertool will not complain if the service is running at the given host and port. It should complain if it does not find one!</p>\n\n<p>Most important, your CORBA object must register with the obtained name service by calling</p>\n\n<pre><code>nameService.bind(yourName, yourCORBAObject);\n</code></pre>\n\n<p>In case the name service is remote, this will send the network message containing the URL of your orb and reference to your object. If your do not register your object, of course the reference will not be available there and the servertool will show you an empty list, just as you complain.</p>\n"},{"tags":[],"owner":{"account_id":3171905,"reputation":10222,"user_id":2680640,"display_name":"sendon1982"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689127406,"creation_date":1689127406,"answer_id":76666722,"question_id":14279987,"body_markdown":"You need to call `rebind` method. Here is the example\r\n\r\nFirst to run `orbd` to start naming service\r\n```\r\norbd -port 8888\r\n```\r\n\r\n```\r\n/** Run with prgoram param:\r\njava Server -ORBInitialPort 8888 -ORBInitialHost localhost\r\n */\r\npublic class Server {\r\n\r\n    public static void main(String args[]) {\r\n        try{\r\n            // create and initialize the ORB\r\n            ORB orb = ORB.init(args, null);\r\n\r\n            // get reference to rootpoa &amp; activate the POAManager\r\n            POA rootpoa = POAHelper.narrow(orb.resolve_initial_references(&quot;RootPOA&quot;));\r\n            rootpoa.the_POAManager().activate();\r\n\r\n            // create servant\r\n            EchoServer server = new EchoServer();\r\n\r\n            // get object reference from the servant\r\n            org.omg.CORBA.Object ref = rootpoa.servant_to_reference(server);\r\n            Echo href = EchoHelper.narrow(ref);\r\n\r\n            org.omg.CORBA.Object objRef =  orb.resolve_initial_references(&quot;NameService&quot;);\r\n            NamingContextExt ncRef = NamingContextExtHelper.narrow(objRef);\r\n\r\n            NameComponent path[] = ncRef.to_name( &quot;ECHO-SERVER&quot; );\r\n            ncRef.rebind(path, href);\r\n\r\n            System.out.println(&quot;Server ready and waiting ...&quot;);\r\n\r\n            // wait for invocations from clients\r\n            orb.run();\r\n        }\r\n\r\n        catch (Exception e) {\r\n            System.err.println(&quot;ERROR: &quot; + e);\r\n            e.printStackTrace(System.out);\r\n        }\r\n\r\n        System.out.println(&quot;Exiting ...&quot;);\r\n\r\n    }\r\n}\r\n```\r\n\r\nClient side\r\n```\r\n/** Run with prgoram param:\r\njava Client -ORBInitialPort 8888 -ORBInitialHost localhost\r\n */\r\npublic class Client {\r\n\r\n    public static void main(String args[]) {\r\n        try {\r\n            // create and initialize the ORB\r\n            ORB orb = ORB.init(args, null);\r\n            org.omg.CORBA.Object objRef = orb.resolve_initial_references(&quot;NameService&quot;);\r\n            NamingContextExt ncRef = NamingContextExtHelper.narrow(objRef);\r\n            Echo href = EchoHelper.narrow(ncRef.resolve_str(&quot;ECHO-SERVER&quot;));\r\n\r\n            String hello = href.echoString();\r\n            System.out.println(hello);\r\n        } catch (InvalidName invalidName) {\r\n            invalidName.printStackTrace();\r\n        } catch (CannotProceed cannotProceed) {\r\n            cannotProceed.printStackTrace();\r\n        } catch (org.omg.CosNaming.NamingContextPackage.InvalidName invalidName) {\r\n            invalidName.printStackTrace();\r\n        } catch (NotFound notFound) {\r\n            notFound.printStackTrace();\r\n        }\r\n\r\n    }\r\n\r\n}\r\n```\r\n```","title":"Access Java Corba NameService","body":"<p>You need to call <code>rebind</code> method. Here is the example</p>\n<p>First to run <code>orbd</code> to start naming service</p>\n<pre><code>orbd -port 8888\n</code></pre>\n<pre><code>/** Run with prgoram param:\njava Server -ORBInitialPort 8888 -ORBInitialHost localhost\n */\npublic class Server {\n\n    public static void main(String args[]) {\n        try{\n            // create and initialize the ORB\n            ORB orb = ORB.init(args, null);\n\n            // get reference to rootpoa &amp; activate the POAManager\n            POA rootpoa = POAHelper.narrow(orb.resolve_initial_references(&quot;RootPOA&quot;));\n            rootpoa.the_POAManager().activate();\n\n            // create servant\n            EchoServer server = new EchoServer();\n\n            // get object reference from the servant\n            org.omg.CORBA.Object ref = rootpoa.servant_to_reference(server);\n            Echo href = EchoHelper.narrow(ref);\n\n            org.omg.CORBA.Object objRef =  orb.resolve_initial_references(&quot;NameService&quot;);\n            NamingContextExt ncRef = NamingContextExtHelper.narrow(objRef);\n\n            NameComponent path[] = ncRef.to_name( &quot;ECHO-SERVER&quot; );\n            ncRef.rebind(path, href);\n\n            System.out.println(&quot;Server ready and waiting ...&quot;);\n\n            // wait for invocations from clients\n            orb.run();\n        }\n\n        catch (Exception e) {\n            System.err.println(&quot;ERROR: &quot; + e);\n            e.printStackTrace(System.out);\n        }\n\n        System.out.println(&quot;Exiting ...&quot;);\n\n    }\n}\n</code></pre>\n<p>Client side</p>\n<pre><code>/** Run with prgoram param:\njava Client -ORBInitialPort 8888 -ORBInitialHost localhost\n */\npublic class Client {\n\n    public static void main(String args[]) {\n        try {\n            // create and initialize the ORB\n            ORB orb = ORB.init(args, null);\n            org.omg.CORBA.Object objRef = orb.resolve_initial_references(&quot;NameService&quot;);\n            NamingContextExt ncRef = NamingContextExtHelper.narrow(objRef);\n            Echo href = EchoHelper.narrow(ncRef.resolve_str(&quot;ECHO-SERVER&quot;));\n\n            String hello = href.echoString();\n            System.out.println(hello);\n        } catch (InvalidName invalidName) {\n            invalidName.printStackTrace();\n        } catch (CannotProceed cannotProceed) {\n            cannotProceed.printStackTrace();\n        } catch (org.omg.CosNaming.NamingContextPackage.InvalidName invalidName) {\n            invalidName.printStackTrace();\n        } catch (NotFound notFound) {\n            notFound.printStackTrace();\n        }\n\n    }\n\n}\n</code></pre>\n<pre><code></code></pre>\n"}],"owner":{"account_id":197030,"reputation":1674,"user_id":440827,"accept_rate":86,"display_name":"Christian"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4696,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":14281328,"answer_count":2,"score":2,"last_activity_date":1689127406,"creation_date":1357913819,"question_id":14279987,"body_markdown":"Is there any way to access the corba nameservice from a running Java (1.5) program.\r\nI would like to see which other processes are registered to a given one. \r\n\r\nI do know, that there are three tools within the JRE. `servertool`, `orbd` and `tnameserv` but either I didn&#39;t use them properly or they are not the right tools.\r\n\r\nAdditional Information:\r\nThe program is started with `-ORBInitialPort 1234`\r\n\r\nExecute `orbd -ORBInitialPort 1234` -&gt; Returnes an error due to already in use ( yes fine, because the application is running ) same with `tnameserv`.\r\nBut if I use `servertool -ORBInitialPort 1234`, no errors occur. But if I type &quot;list&quot; on the command prompt or another command, it will always return an empty list. \r\n\r\nSincerely\r\nChristian\r\n","title":"Access Java Corba NameService","body":"<p>Is there any way to access the corba nameservice from a running Java (1.5) program.\nI would like to see which other processes are registered to a given one. </p>\n\n<p>I do know, that there are three tools within the JRE. <code>servertool</code>, <code>orbd</code> and <code>tnameserv</code> but either I didn't use them properly or they are not the right tools.</p>\n\n<p>Additional Information:\nThe program is started with <code>-ORBInitialPort 1234</code></p>\n\n<p>Execute <code>orbd -ORBInitialPort 1234</code> -> Returnes an error due to already in use ( yes fine, because the application is running ) same with <code>tnameserv</code>.\nBut if I use <code>servertool -ORBInitialPort 1234</code>, no errors occur. But if I type \"list\" on the command prompt or another command, it will always return an empty list. </p>\n\n<p>Sincerely\nChristian</p>\n"},{"tags":["java","spring","spring-boot","graphql"],"owner":{"account_id":1490490,"reputation":354,"user_id":1397674,"accept_rate":78,"display_name":"ERK"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689127204,"creation_date":1689121550,"question_id":76666490,"body_markdown":"I have scenario as follows:\r\nTrying to read different data model value during schema mapping.\r\n\r\nMy question is how to pass &quot;isbn&quot; (**ISBN is under Book model**) into mapping method when perform schema mapping in GraphQL ? \r\n\r\n\r\n```\r\ntype Book {\r\n  id: ID\r\n  isbn: String\r\n  name: String\r\n  pageCount: Int\r\n  authorList: [Author]\r\n}\r\n\r\ntype Author {\r\n  id: ID\r\n  firstName: String\r\n  lastName: String\r\n  address: [Address]\r\n}\r\n\r\ntype Address {\r\n  id: ID\r\n  street: String\r\n  city: String\r\n  country: String\r\n  countryCode: String\r\n}\r\n```\r\nMapping method:\r\n```\r\n@SchemaMapping\r\npublic String countryCode(Address address) {\r\n  return  xService.getIsbnCountryCode(isbn,address);\r\n}\r\n```","title":"How to read different field value during SchemaMapping in GraphQL?","body":"<p>I have scenario as follows:\nTrying to read different data model value during schema mapping.</p>\n<p>My question is how to pass &quot;isbn&quot; (<strong>ISBN is under Book model</strong>) into mapping method when perform schema mapping in GraphQL ?</p>\n<pre><code>type Book {\n  id: ID\n  isbn: String\n  name: String\n  pageCount: Int\n  authorList: [Author]\n}\n\ntype Author {\n  id: ID\n  firstName: String\n  lastName: String\n  address: [Address]\n}\n\ntype Address {\n  id: ID\n  street: String\n  city: String\n  country: String\n  countryCode: String\n}\n</code></pre>\n<p>Mapping method:</p>\n<pre><code>@SchemaMapping\npublic String countryCode(Address address) {\n  return  xService.getIsbnCountryCode(isbn,address);\n}\n</code></pre>\n"},{"tags":["java","json"],"comments":[{"owner":{"account_id":10095377,"reputation":2824,"user_id":7460927,"accept_rate":83,"display_name":"Tushar Sharma"},"score":0,"creation_date":1489219170,"post_id":42732655,"comment_id":72584274,"body_markdown":"You can extract the data into an ArrayList and then sort with a comparator.","body":"You can extract the data into an ArrayList and then sort with a comparator."},{"owner":{"account_id":9725157,"reputation":2553,"user_id":7212399,"accept_rate":100,"display_name":"Pratik Ambani"},"score":0,"creation_date":1489238144,"post_id":42732655,"comment_id":72589362,"body_markdown":"Simply  - convert your json data into a HashMap   - Sort the HashMap  -  Convert it back to JsonObject.\n\nPurpose served, code it your self and revert back if you face any challange.","body":"Simply  - convert your json data into a HashMap   - Sort the HashMap  -  Convert it back to JsonObject.  Purpose served, code it your self and revert back if you face any challange."},{"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1689127205,"post_id":42732655,"comment_id":135167932,"body_markdown":"Do you want json order to be the same as insertion order in your code, or natural key order?","body":"Do you want json order to be the same as insertion order in your code, or natural key order?"}],"answers":[{"comments":[{"owner":{"account_id":10031413,"reputation":123,"user_id":7417789,"accept_rate":75,"display_name":"ABD"},"score":0,"creation_date":1489218711,"post_id":42732742,"comment_id":72584169,"body_markdown":"I have updated my question, please take a look, and help me, Thanks!","body":"I have updated my question, please take a look, and help me, Thanks!"},{"owner":{"account_id":4166413,"reputation":406,"user_id":3415305,"display_name":"MrMisery"},"score":1,"creation_date":1489218961,"post_id":42732742,"comment_id":72584229,"body_markdown":"still it&#39;s the same way to solve this . store the results firstly in a map , then sort the map after that using loops put the map content into the JSON object.","body":"still it&#39;s the same way to solve this . store the results firstly in a map , then sort the map after that using loops put the map content into the JSON object."}],"tags":[],"owner":{"account_id":4166413,"reputation":406,"user_id":3415305,"display_name":"MrMisery"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1489218366,"creation_date":1489218366,"answer_id":42732742,"question_id":42732655,"body_markdown":"You can use maps for this purpose , then sort the map according to the map key. after that insert it into the JSON object.\r\nIn your case declare the map as: &lt;br/&gt;\r\n\r\n    Map&lt;String,Integer&gt; mapName = new HashMap&lt;&gt;();\r\n\r\n","title":"How to create JSON in alphabetical order by its KEY (Java)","body":"<p>You can use maps for this purpose , then sort the map according to the map key. after that insert it into the JSON object.\nIn your case declare the map as: <br/></p>\n\n<pre><code>Map&lt;String,Integer&gt; mapName = new HashMap&lt;&gt;();\n</code></pre>\n"},{"comments":[{"owner":{"account_id":8781812,"reputation":900,"user_id":6565216,"accept_rate":90,"display_name":"lucas kim"},"score":1,"creation_date":1489234998,"post_id":42734350,"comment_id":72588391,"body_markdown":"I was missing some code.\nAdd the following line to the third line.\nom.configure (SerializationFeature.ORDER_MAP_ENTRIES_BY_KEYS, true);","body":"I was missing some code. Add the following line to the third line. om.configure (SerializationFeature.ORDER_MAP_ENTRIES_BY_KEYS, true);"},{"owner":{"account_id":3849703,"reputation":435,"user_id":3190174,"accept_rate":75,"display_name":"Javo"},"score":2,"creation_date":1575464814,"post_id":42734350,"comment_id":104574796,"body_markdown":"Warning - https://stackoverflow.com/questions/34817541/json-order-map-entries-by-keys-not-working-consistently","body":"Warning - <a href=\"https://stackoverflow.com/questions/34817541/json-order-map-entries-by-keys-not-working-consistently\" title=\"json order map entries by keys not working consistently\">stackoverflow.com/questions/34817541/&hellip;</a>"}],"tags":[],"owner":{"account_id":8781812,"reputation":900,"user_id":6565216,"accept_rate":90,"display_name":"lucas kim"},"comment_count":2,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1518783361,"creation_date":1489229942,"answer_id":42734350,"question_id":42732655,"body_markdown":"You can use the jackson library.\r\n\r\nFirst add a jackson to the maven dependency.\r\n\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n            &lt;version&gt;2.8.7&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\nThen use the code below.\r\n\r\n        String jsonData = &quot;{\\&quot;e\\&quot;:\\&quot;6\\&quot;,\\&quot;f\\&quot;:\\&quot;1\\&quot;,\\&quot;b\\&quot;:\\&quot;3\\&quot;,\\&quot;c\\&quot;:\\&quot;1\\&quot;,\\&quot;a\\&quot;:\\&quot;4\\&quot;}&quot;;\r\n        ObjectMapper om = new ObjectMapper();\r\n        om.configure(SerializationFeature.ORDER_MAP_ENTRIES_BY_KEYS, true);\r\n        Map&lt;String, Object&gt; map = om.readValue(jsonData, HashMap.class);\r\n        String json = om.writeValueAsString(map);\r\n        System.out.println(json); // result : {&quot;a&quot;:&quot;4&quot;,&quot;b&quot;:&quot;3&quot;,&quot;c&quot;:&quot;1&quot;,&quot;e&quot;:&quot;6&quot;,&quot;f&quot;:&quot;1&quot;}\r\n\r\nWhen I test it, I get output in sorted form.\r\n\r\n{&quot;a&quot;:&quot;4&quot;,&quot;b&quot;:&quot;3&quot;,&quot;c&quot;:&quot;1&quot;,&quot;e&quot;:&quot;6&quot;,&quot;f&quot;:&quot;1&quot;}","title":"How to create JSON in alphabetical order by its KEY (Java)","body":"<p>You can use the jackson library.</p>\n\n<p>First add a jackson to the maven dependency.</p>\n\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n        &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n        &lt;version&gt;2.8.7&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n\n<p>Then use the code below.</p>\n\n<pre><code>    String jsonData = \"{\\\"e\\\":\\\"6\\\",\\\"f\\\":\\\"1\\\",\\\"b\\\":\\\"3\\\",\\\"c\\\":\\\"1\\\",\\\"a\\\":\\\"4\\\"}\";\n    ObjectMapper om = new ObjectMapper();\n    om.configure(SerializationFeature.ORDER_MAP_ENTRIES_BY_KEYS, true);\n    Map&lt;String, Object&gt; map = om.readValue(jsonData, HashMap.class);\n    String json = om.writeValueAsString(map);\n    System.out.println(json); // result : {\"a\":\"4\",\"b\":\"3\",\"c\":\"1\",\"e\":\"6\",\"f\":\"1\"}\n</code></pre>\n\n<p>When I test it, I get output in sorted form.</p>\n\n<p>{\"a\":\"4\",\"b\":\"3\",\"c\":\"1\",\"e\":\"6\",\"f\":\"1\"}</p>\n"},{"tags":[],"owner":{"account_id":9994473,"reputation":191,"user_id":7392507,"display_name":"Cousin Roy"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1597115995,"creation_date":1590046278,"answer_id":61929459,"question_id":42732655,"body_markdown":"So here is one of solution to sort JSON object by key alphabetically without using external libraries(for Android Studio). The sortedJSON is the one with key sorted alphabetically.\r\n\r\n                  \r\n    try{\r\n            JSONObject jo = new JSONObject();\r\n            \r\n            jo.put(&quot;g&quot;, &quot;9&quot;);\r\n            jo.put(&quot;t&quot;, &quot;8&quot;);\r\n            jo.put(&quot;r&quot;, &quot;7&quot;);\r\n            jo.put(&quot;d&quot;, &quot;6&quot;);\r\n            jo.put(&quot;c&quot;, &quot;5&quot;);\r\n            jo.put(&quot;b&quot;, &quot;4&quot;);\r\n            jo.put(&quot;a&quot;, &quot;1&quot;);\r\n\r\n            Map&lt;String, String&gt; joToMap = new HashMap&lt;&gt;();\r\n\r\n            Iterator&lt;String&gt; keysItr = jo.keys();\r\n            while (keysItr.hasNext()) {\r\n                String key = keysItr.next();\r\n                Object value = jo.get(key);\r\n\r\n                joToMap.put(key, value.toString()); //since value is string so convert toString; depend on your value type\r\n            }\r\n\r\n            Map&lt;String, String&gt; sortedMap = new TreeMap&lt;&gt;(joToMap); //this will auto-sort by key alphabetically\r\n\r\n            JSONObject sortedJSON = new JSONObject(); //recreate new JSON object for sorted result\r\n\r\n            for (Map.Entry&lt;String, String&gt; entry : sortedMap.entrySet()) {\r\n                sortedJSON.put(entry.getKey(), entry.getValue());\r\n                // result will be {&quot;a&quot;:&quot;1&quot;,&quot;b&quot;:&quot;4&quot;,&quot;c&quot;:&quot;5&quot;,&quot;d&quot;:&quot;6&quot;,&quot;g&quot;:&quot;9&quot;,&quot;r&quot;:&quot;7&quot;,&quot;t&quot;:&quot;8&quot;}\r\n            }\r\n        } catch (Exception e){\r\n        } ","title":"How to create JSON in alphabetical order by its KEY (Java)","body":"<p>So here is one of solution to sort JSON object by key alphabetically without using external libraries(for Android Studio). The sortedJSON is the one with key sorted alphabetically.</p>\n<pre><code>try{\n        JSONObject jo = new JSONObject();\n        \n        jo.put(&quot;g&quot;, &quot;9&quot;);\n        jo.put(&quot;t&quot;, &quot;8&quot;);\n        jo.put(&quot;r&quot;, &quot;7&quot;);\n        jo.put(&quot;d&quot;, &quot;6&quot;);\n        jo.put(&quot;c&quot;, &quot;5&quot;);\n        jo.put(&quot;b&quot;, &quot;4&quot;);\n        jo.put(&quot;a&quot;, &quot;1&quot;);\n\n        Map&lt;String, String&gt; joToMap = new HashMap&lt;&gt;();\n\n        Iterator&lt;String&gt; keysItr = jo.keys();\n        while (keysItr.hasNext()) {\n            String key = keysItr.next();\n            Object value = jo.get(key);\n\n            joToMap.put(key, value.toString()); //since value is string so convert toString; depend on your value type\n        }\n\n        Map&lt;String, String&gt; sortedMap = new TreeMap&lt;&gt;(joToMap); //this will auto-sort by key alphabetically\n\n        JSONObject sortedJSON = new JSONObject(); //recreate new JSON object for sorted result\n\n        for (Map.Entry&lt;String, String&gt; entry : sortedMap.entrySet()) {\n            sortedJSON.put(entry.getKey(), entry.getValue());\n            // result will be {&quot;a&quot;:&quot;1&quot;,&quot;b&quot;:&quot;4&quot;,&quot;c&quot;:&quot;5&quot;,&quot;d&quot;:&quot;6&quot;,&quot;g&quot;:&quot;9&quot;,&quot;r&quot;:&quot;7&quot;,&quot;t&quot;:&quot;8&quot;}\n        }\n    } catch (Exception e){\n    } \n</code></pre>\n"},{"tags":[],"owner":{"account_id":2741190,"reputation":1942,"user_id":2362720,"display_name":"Andrew Feng"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689126703,"creation_date":1689126703,"answer_id":76666698,"question_id":42732655,"body_markdown":"If you are like me just want to sort fields of json object by field name and do comparison to find the difference between json strings, here is the code snippet you can refer to:\r\n```\r\npublic final class JsonTestUtils {\r\n\r\n  private static void formalizeJson(String jsonStr, String fileName) throws IOException {\r\n    Gson gson = new GsonBuilder().setPrettyPrinting().create();\r\n    TreeMap&lt;String, Object&gt; map = gson.fromJson(jsonStr, TreeMap.class);\r\n    sortMap(map);\r\n    String jsonStrSorted = gson.toJson(map);\r\n    FileUtils.writeStringToFile(new File(fileName), jsonStrSorted, StandardCharsets.UTF_8);\r\n  }\r\n\r\n  private static void sortMap(TreeMap&lt;String, Object&gt; map) {\r\n    map.replaceAll((k, v) -&gt; sortElement(v));\r\n  }\r\n\r\n  private static Object sortElement(Object element) {\r\n    if (element instanceof List) {\r\n      return ((List) element).stream()\r\n          .map(JsonTestUtils::sortElement)\r\n          .collect(Collectors.toList());\r\n    }\r\n\r\n    if (element instanceof Map) {\r\n      TreeMap&lt;String, Object&gt; subNode = new TreeMap&lt;&gt;();\r\n      subNode.putAll((Map) element);\r\n      sortMap(subNode);\r\n      return subNode;\r\n    }\r\n\r\n    return element;\r\n  }\r\n\r\n}\r\n```","title":"How to create JSON in alphabetical order by its KEY (Java)","body":"<p>If you are like me just want to sort fields of json object by field name and do comparison to find the difference between json strings, here is the code snippet you can refer to:</p>\n<pre><code>public final class JsonTestUtils {\n\n  private static void formalizeJson(String jsonStr, String fileName) throws IOException {\n    Gson gson = new GsonBuilder().setPrettyPrinting().create();\n    TreeMap&lt;String, Object&gt; map = gson.fromJson(jsonStr, TreeMap.class);\n    sortMap(map);\n    String jsonStrSorted = gson.toJson(map);\n    FileUtils.writeStringToFile(new File(fileName), jsonStrSorted, StandardCharsets.UTF_8);\n  }\n\n  private static void sortMap(TreeMap&lt;String, Object&gt; map) {\n    map.replaceAll((k, v) -&gt; sortElement(v));\n  }\n\n  private static Object sortElement(Object element) {\n    if (element instanceof List) {\n      return ((List) element).stream()\n          .map(JsonTestUtils::sortElement)\n          .collect(Collectors.toList());\n    }\n\n    if (element instanceof Map) {\n      TreeMap&lt;String, Object&gt; subNode = new TreeMap&lt;&gt;();\n      subNode.putAll((Map) element);\n      sortMap(subNode);\n      return subNode;\n    }\n\n    return element;\n  }\n\n}\n</code></pre>\n"}],"owner":{"account_id":10031413,"reputation":123,"user_id":7417789,"accept_rate":75,"display_name":"ABD"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9956,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"answer_count":4,"score":8,"last_activity_date":1689126703,"creation_date":1489217705,"question_id":42732655,"body_markdown":"I&#39;m getting `JSON`, but it&#39;s not in alphabetical order. How to ***sort*** `json` by it&#39;s `KEY` ?\r\nJSON:\r\n\r\n    {&quot;b&quot;:&quot;3&quot;,&quot;c&quot;:&quot;1&quot;,&quot;a&quot;:&quot;4&quot;}\r\n\r\n\r\n    \r\nExpected output:\r\n\r\n    {&quot;a&quot;:&quot;4&quot;,&quot;b&quot;:&quot;3&quot;,&quot;c&quot;:&quot;1&quot;}\r\n\r\nPlease help me to solve this problem. I really appreciate your help! Thanks!\r\n\r\n","title":"How to create JSON in alphabetical order by its KEY (Java)","body":"<p>I'm getting <code>JSON</code>, but it's not in alphabetical order. How to <strong><em>sort</em></strong> <code>json</code> by it's <code>KEY</code> ?\nJSON:</p>\n\n<pre><code>{\"b\":\"3\",\"c\":\"1\",\"a\":\"4\"}\n</code></pre>\n\n<p>Expected output:</p>\n\n<pre><code>{\"a\":\"4\",\"b\":\"3\",\"c\":\"1\"}\n</code></pre>\n\n<p>Please help me to solve this problem. I really appreciate your help! Thanks!</p>\n"},{"tags":["java","spring","kubernetes","aws-secrets-manager"],"comments":[{"owner":{"account_id":25444108,"reputation":1042,"user_id":19246531,"display_name":"Nataraj Medayhal"},"score":0,"creation_date":1689149387,"post_id":76666600,"comment_id":135170723,"body_markdown":"is your requirement is to load secret and configmap into your spring app separately?    converst secret data into configmap and load config map into your spring application","body":"is your requirement is to load secret and configmap into your spring app separately?    converst secret data into configmap and load config map into your spring application"}],"owner":{"account_id":19550790,"reputation":1,"user_id":14306459,"display_name":"WHom"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":83,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689124720,"creation_date":1689124720,"question_id":76666600,"body_markdown":"Now. i use spring.config.import for load secret from aws secret and use spring.cloud.kubernetes for load content in configMap. But when run application the spring not automatically load secret it use all content in configMap. this my code \r\n```\r\nspring:\r\n  config:\r\n    import:\r\n      - optional:aws-secretsmanager:/api-secrets/demo\r\n  cloud:\r\n    kubernetes:\r\n      enabled: true\r\n      reload:\r\n        enabled: true\r\n        mode: event\r\n      config:\r\n        enabled: true\r\n        name: demo-configmap\r\n        namespace: demo-name\r\n        sources:\r\n          - name: content-application\r\n        enableVersioning: true\r\n```\r\n\r\ni want to load content from configMap and auto load secret from aws secret. what can i do?","title":"How to load configMap and secret from aws into application.yaml in spring project","body":"<p>Now. i use spring.config.import for load secret from aws secret and use spring.cloud.kubernetes for load content in configMap. But when run application the spring not automatically load secret it use all content in configMap. this my code</p>\n<pre><code>spring:\n  config:\n    import:\n      - optional:aws-secretsmanager:/api-secrets/demo\n  cloud:\n    kubernetes:\n      enabled: true\n      reload:\n        enabled: true\n        mode: event\n      config:\n        enabled: true\n        name: demo-configmap\n        namespace: demo-name\n        sources:\n          - name: content-application\n        enableVersioning: true\n</code></pre>\n<p>i want to load content from configMap and auto load secret from aws secret. what can i do?</p>\n"},{"tags":["java","spring","oauth-2.0","jwt"],"comments":[{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":0,"creation_date":1666694152,"post_id":74190147,"comment_id":130992658,"body_markdown":"What makes you think that JWTs are not OAuth(2)?","body":"What makes you think that JWTs are not OAuth(2)?"},{"owner":{"account_id":26714866,"reputation":3,"user_id":20319609,"display_name":"jhon"},"score":0,"creation_date":1666694566,"post_id":74190147,"comment_id":130992801,"body_markdown":"@ch4mp i just check now the token at https://jwt.io/ contains no type, but im not sure if its Jwt token since it contain header.payload.verify signature. i been watching some tutorial that their access token is short which is short unlike what i receive is too long and contain like a JWT.","body":"@ch4mp i just check now the token at <a href=\"https://jwt.io/\" rel=\"nofollow noreferrer\">jwt.io</a> contains no type, but im not sure if its Jwt token since it contain header.payload.verify signature. i been watching some tutorial that their access token is short which is short unlike what i receive is too long and contain like a JWT."}],"answers":[{"tags":[],"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1689124502,"creation_date":1666696615,"answer_id":74193223,"question_id":74190147,"body_markdown":"Oauth(2) standard makes no assumption on the token format. Authorization-server can use absolutely what he wants to.\r\n\r\nIf authorization-server issues JWT tokens, then other OAuth2 actors can decode and validate tokens with no more than authorization-server public key.\r\n\r\nOther token formats, are considered &quot;opaque&quot; and must be introspected on the authorization-server for validation and to get associated claims.","title":"OAuth2 Authentication server access token form JWT token to OAuth Token","body":"<p>Oauth(2) standard makes no assumption on the token format. Authorization-server can use absolutely what he wants to.</p>\n<p>If authorization-server issues JWT tokens, then other OAuth2 actors can decode and validate tokens with no more than authorization-server public key.</p>\n<p>Other token formats, are considered &quot;opaque&quot; and must be introspected on the authorization-server for validation and to get associated claims.</p>\n"}],"owner":{"account_id":26714866,"reputation":3,"user_id":20319609,"display_name":"jhon"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":158,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74193223,"answer_count":1,"score":0,"last_activity_date":1689124502,"creation_date":1666681130,"question_id":74190147,"body_markdown":"Is it possible the changes the token form JWT token to OAuth2 token.\r\n\r\n\r\nSample code from Daily Code BUffer https://github.com/shabbirdwd53/spring-security-tutorial/blob/main/Oauth-authorization-server/src/main/java/com/dailycodebuffer/oauthserver/config/AuthorizationServerConfig.java\r\n```\r\n @Bean\r\n    public JWKSource&lt;SecurityContext&gt; jwkSource() {\r\n        RSAKey rsaKey = generateRsa();\r\n        JWKSet jwkSet = new JWKSet(rsaKey);\r\n        return (jwkSelector, securityContext) -&gt; jwkSelector.select(jwkSet);\r\n    }\r\n\r\n    private static RSAKey generateRsa() {\r\n        KeyPair keyPair = generateRsaKey();\r\n        RSAPublicKey publicKey = (RSAPublicKey) keyPair.getPublic();\r\n        RSAPrivateKey privateKey = (RSAPrivateKey) keyPair.getPrivate();\r\n        return new RSAKey.Builder(publicKey)\r\n                .privateKey(privateKey)\r\n                .keyID(UUID.randomUUID().toString())\r\n                .build();\r\n    }\r\n\r\n    private static KeyPair generateRsaKey() {\r\n        KeyPair keyPair;\r\n        try {\r\n            KeyPairGenerator keyPairGenerator = KeyPairGenerator.getInstance(&quot;RSA&quot;);\r\n            keyPairGenerator.initialize(2048);\r\n            keyPair = keyPairGenerator.generateKeyPair();\r\n        } catch (Exception ex) {\r\n            throw new IllegalStateException(ex);\r\n        }\r\n        return keyPair;\r\n    }\r\n```\r\n/oauth2/token endpoint\r\n```\r\n{\r\n    &quot;access_token&quot;: &quot;eyJraWQiOiI3MzA5MmI1Yy00MDc0LTRkZjktOTdhNS1kMzA3N2E4NDNhYzciLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJjbGllbnQiLCJhdWQiOiJjbGllbnQiLCJuYmYiOjE2NjY2NzgyNTYsInNjb3BlIjpbInJlYWQiXSwiaXNzIjoiaHR0cDpcL1wvbG9jYWxob3N0OjgwMDAiLCJleHAiOjE2NjY2NzkxNTYsImlhdCI6MTY2NjY3ODI1Nn0.QJOMrp2unqLP-nGYo5lnlg1Q3_XXR2XZBTQqt3C9tkhiVs4I2dDjaWze1LrnjEnP2hfb89XqpT1k1AjR_ApsOx5H8PcqqZ0Eaq89ICX6bu3LFo2HApYlV5kRQTD3HQq0uiA_hn9TTdvBJhM5Kz9_0rPQVzBpNqWGnkWzGvbukRPgnBYLNi6lVwOG3mZxkP8aNiOn5Z5PMo9pll6idQLadJtFQ7fKTjG8mFqh1BtLwpmH4U60dzaieafCXwczywKq0xVzk9asB9c0-gw_BbeK4Vns3tp8AzCCyH4rRwy6ssVblUlycyss7scpY9s2ibUZ6N3xg97nowp9Ygqjv_bccw&quot;,\r\n    &quot;scope&quot;: &quot;read&quot;,\r\n    &quot;token_type&quot;: &quot;Bearer&quot;,\r\n    &quot;expires_in&quot;: 899\r\n}\r\n```","title":"OAuth2 Authentication server access token form JWT token to OAuth Token","body":"<p>Is it possible the changes the token form JWT token to OAuth2 token.</p>\n<p>Sample code from Daily Code BUffer <a href=\"https://github.com/shabbirdwd53/spring-security-tutorial/blob/main/Oauth-authorization-server/src/main/java/com/dailycodebuffer/oauthserver/config/AuthorizationServerConfig.java\" rel=\"nofollow noreferrer\">https://github.com/shabbirdwd53/spring-security-tutorial/blob/main/Oauth-authorization-server/src/main/java/com/dailycodebuffer/oauthserver/config/AuthorizationServerConfig.java</a></p>\n<pre><code> @Bean\n    public JWKSource&lt;SecurityContext&gt; jwkSource() {\n        RSAKey rsaKey = generateRsa();\n        JWKSet jwkSet = new JWKSet(rsaKey);\n        return (jwkSelector, securityContext) -&gt; jwkSelector.select(jwkSet);\n    }\n\n    private static RSAKey generateRsa() {\n        KeyPair keyPair = generateRsaKey();\n        RSAPublicKey publicKey = (RSAPublicKey) keyPair.getPublic();\n        RSAPrivateKey privateKey = (RSAPrivateKey) keyPair.getPrivate();\n        return new RSAKey.Builder(publicKey)\n                .privateKey(privateKey)\n                .keyID(UUID.randomUUID().toString())\n                .build();\n    }\n\n    private static KeyPair generateRsaKey() {\n        KeyPair keyPair;\n        try {\n            KeyPairGenerator keyPairGenerator = KeyPairGenerator.getInstance(&quot;RSA&quot;);\n            keyPairGenerator.initialize(2048);\n            keyPair = keyPairGenerator.generateKeyPair();\n        } catch (Exception ex) {\n            throw new IllegalStateException(ex);\n        }\n        return keyPair;\n    }\n</code></pre>\n<p>/oauth2/token endpoint</p>\n<pre><code>{\n    &quot;access_token&quot;: &quot;eyJraWQiOiI3MzA5MmI1Yy00MDc0LTRkZjktOTdhNS1kMzA3N2E4NDNhYzciLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJjbGllbnQiLCJhdWQiOiJjbGllbnQiLCJuYmYiOjE2NjY2NzgyNTYsInNjb3BlIjpbInJlYWQiXSwiaXNzIjoiaHR0cDpcL1wvbG9jYWxob3N0OjgwMDAiLCJleHAiOjE2NjY2NzkxNTYsImlhdCI6MTY2NjY3ODI1Nn0.QJOMrp2unqLP-nGYo5lnlg1Q3_XXR2XZBTQqt3C9tkhiVs4I2dDjaWze1LrnjEnP2hfb89XqpT1k1AjR_ApsOx5H8PcqqZ0Eaq89ICX6bu3LFo2HApYlV5kRQTD3HQq0uiA_hn9TTdvBJhM5Kz9_0rPQVzBpNqWGnkWzGvbukRPgnBYLNi6lVwOG3mZxkP8aNiOn5Z5PMo9pll6idQLadJtFQ7fKTjG8mFqh1BtLwpmH4U60dzaieafCXwczywKq0xVzk9asB9c0-gw_BbeK4Vns3tp8AzCCyH4rRwy6ssVblUlycyss7scpY9s2ibUZ6N3xg97nowp9Ygqjv_bccw&quot;,\n    &quot;scope&quot;: &quot;read&quot;,\n    &quot;token_type&quot;: &quot;Bearer&quot;,\n    &quot;expires_in&quot;: 899\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-security","keycloak"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":1,"creation_date":1638486696,"post_id":70207564,"comment_id":124108695,"body_markdown":"This sounds like a perfect question (and possibly a bug report) for the [spring-boot developers (`github.com`)](https://github.com/spring-projects/spring-boot).","body":"This sounds like a perfect question (and possibly a bug report) for the <a href=\"https://github.com/spring-projects/spring-boot\" rel=\"nofollow noreferrer\">spring-boot developers (<code>github.com</code>)</a>."},{"owner":{"account_id":4181375,"reputation":5121,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":2,"creation_date":1638489878,"post_id":70207564,"comment_id":124109387,"body_markdown":"your issue relates to [Prohibit circular references by default #27652](https://github.com/spring-projects/spring-boot/issues/27652), I&#39;m not sure what was the motivation to prohibit circular dependencies by default however the general recommendation now is &quot;your code is poor - refactor it&quot;, on the other hand you may either disable this feature via &quot;spring.main.allow-circular-references=true&quot; or continue investigating (have you tried putting @Lazy over keycloakConfigResolver()?)","body":"your issue relates to <a href=\"https://github.com/spring-projects/spring-boot/issues/27652\" rel=\"nofollow noreferrer\">Prohibit circular references by default #27652</a>, I&#39;m not sure what was the motivation to prohibit circular dependencies by default however the general recommendation now is &quot;your code is poor - refactor it&quot;, on the other hand you may either disable this feature via &quot;spring.main.allow-circular-references=true&quot; or continue investigating (have you tried putting @Lazy over keycloakConfigResolver()?)"},{"owner":{"account_id":65983,"reputation":9310,"user_id":193850,"accept_rate":85,"display_name":"Michel"},"score":9,"creation_date":1638537606,"post_id":70207564,"comment_id":124121576,"body_markdown":"move bean creation of `keycloakConfigResolver` to another file resolves the problem for now.","body":"move bean creation of <code>keycloakConfigResolver</code> to another file resolves the problem for now."},{"owner":{"account_id":1655275,"reputation":456,"user_id":1524997,"display_name":"Paulo Mateus"},"score":0,"creation_date":1639748614,"post_id":70207564,"comment_id":124434501,"body_markdown":"The Keycloak team deprecated the Spring adapters. As you can see/check, there is the Keycloak 15.1.0, but no `org.keycloak:keycloak-spring-boot-starter:15.1.0`. The last was 15.0.2 https://www.keycloak.org/2021/12/keycloak-1510-released.html. Then, probably we need to replace the Keycloak adapter instead expect a solution by Keycloak team.","body":"The Keycloak team deprecated the Spring adapters. As you can see/check, there is the Keycloak 15.1.0, but no <code>org.keycloak:keycloak-spring-boot-starter:15.1.0</code>. The last was 15.0.2 <a href=\"https://www.keycloak.org/2021/12/keycloak-1510-released.html\" rel=\"nofollow noreferrer\">keycloak.org/2021/12/keycloak-1510-released.html</a>. Then, probably we need to replace the Keycloak adapter instead expect a solution by Keycloak team."}],"answers":[{"comments":[{"owner":{"account_id":3882891,"reputation":2008,"user_id":3214988,"display_name":"sunitkatkar"},"score":3,"creation_date":1646429796,"post_id":70518069,"comment_id":126129497,"body_markdown":"This worked for me... Spring Boot 2.6.4 and Keycloak 14.0.0","body":"This worked for me... Spring Boot 2.6.4 and Keycloak 14.0.0"},{"owner":{"account_id":12514032,"reputation":614,"user_id":9108026,"display_name":"AissaDevLab"},"score":3,"creation_date":1647205133,"post_id":70518069,"comment_id":126306953,"body_markdown":"This worked for me keycloak 17 spring boot 2.6.4","body":"This worked for me keycloak 17 spring boot 2.6.4"},{"owner":{"account_id":23330,"reputation":739,"user_id":58363,"accept_rate":71,"display_name":"Daniel Bower"},"score":16,"creation_date":1649732469,"post_id":70518069,"comment_id":126944988,"body_markdown":"Do note that this resolver bean definition cannot be in the same file as extends KeycloakWebSecurityConfigurerAdapter","body":"Do note that this resolver bean definition cannot be in the same file as extends KeycloakWebSecurityConfigurerAdapter"},{"owner":{"account_id":5689160,"reputation":1446,"user_id":4497704,"display_name":"D-FENS"},"score":1,"creation_date":1654069921,"post_id":70518069,"comment_id":128001509,"body_markdown":"This solved my problem too: Spring Boot 2.6.4, Keycloak 14.0.0. This answer should be marked as solution!","body":"This solved my problem too: Spring Boot 2.6.4, Keycloak 14.0.0. This answer should be marked as solution!"},{"owner":{"account_id":11875799,"reputation":51,"user_id":8690880,"display_name":"JBlass"},"score":2,"creation_date":1655392141,"post_id":70518069,"comment_id":128326141,"body_markdown":"This worked for me too: spring-boot 2.6.8 + keycloak 16.1.1.","body":"This worked for me too: spring-boot 2.6.8 + keycloak 16.1.1."},{"owner":{"account_id":12991286,"reputation":420,"user_id":9390432,"display_name":"Kevin O."},"score":1,"creation_date":1657368558,"post_id":70518069,"comment_id":128796809,"body_markdown":"worked also for me. java-version 18 + keycloak version 18 + Spring Boot 2.7.1","body":"worked also for me. java-version 18 + keycloak version 18 + Spring Boot 2.7.1"},{"owner":{"account_id":1381969,"reputation":621,"user_id":1314769,"display_name":"Mukesh Kumar"},"score":0,"creation_date":1688716759,"post_id":70518069,"comment_id":135113951,"body_markdown":"Also worked for me. Thank You","body":"Also worked for me. Thank You"}],"tags":[],"owner":{"account_id":3094399,"reputation":1492,"user_id":2619908,"accept_rate":29,"display_name":"nono"},"comment_count":7,"down_vote_count":0,"up_vote_count":77,"is_accepted":false,"score":77,"last_activity_date":1640773308,"creation_date":1640773308,"answer_id":70518069,"question_id":70207564,"body_markdown":"allowing the circular dependencies might not be the best option.\r\n\r\nOne thing that you can do is to create a specific configuration class for your **KeycloakConfigResolver** bean.\r\n\r\n    package com.stackoverflow;\r\n    \r\n    import org.keycloak.adapters.springboot.KeycloakSpringBootConfigResolver;\r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.context.annotation.Configuration;\r\n    \r\n    @Configuration\r\n    public class KeycloakConfiguration {\r\n    \r\n        @Bean\r\n        public KeycloakSpringBootConfigResolver KeycloakConfigResolver() {\r\n    \t    return new KeycloakSpringBootConfigResolver();\r\n        }\r\n    }\r\n","title":"Spring Boot 2.6 regression: How can I fix Keycloak circular dependency in adapter?","body":"<p>allowing the circular dependencies might not be the best option.</p>\n<p>One thing that you can do is to create a specific configuration class for your <strong>KeycloakConfigResolver</strong> bean.</p>\n<pre><code>package com.stackoverflow;\n\nimport org.keycloak.adapters.springboot.KeycloakSpringBootConfigResolver;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\n\n@Configuration\npublic class KeycloakConfiguration {\n\n    @Bean\n    public KeycloakSpringBootConfigResolver KeycloakConfigResolver() {\n        return new KeycloakSpringBootConfigResolver();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1689124125,"creation_date":1669123334,"answer_id":74533332,"question_id":70207564,"body_markdown":"# 2022 update\r\nDo not use keycloak adapters for spring, [it is very deprecated][1]. \r\n\r\nUse `spring-boot-starter-oauth2-resource-server` or `spring-boot-starter-oauth2-client` instead.\r\n\r\nUses a [Spring Boot starter of mine][2] in addition to official ones, configuring a Spring Boot application to use Keycloak as OpenID Provider can be achieved with 0 Java conf (with roles and username mapping, and even in &quot;static&quot; multi-tenant scenarios).\r\n\r\n#### Resource Server\r\nFor a REST API secured with JWT access tokens\r\n```xml\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t&lt;!-- For a reactive application, use spring-boot-starter-webflux instead --&gt;\r\n\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;spring-boot-starter-oauth2-resource-server&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;com.c4-soft.springaddons&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-addons-starter-oidc&lt;/artifactId&gt;\r\n    &lt;version&gt;7.0.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n```yaml\r\ncom:\r\n  c4-soft:\r\n    springaddons:\r\n      oidc:\r\n        ops:\r\n        - iss: http://localhost:8442/realms/master\r\n          username-claim: preferred_username\r\n          authorities:\r\n          - path: $.realm_access.roles\r\n          - path: $.resource_access.*.roles\r\n        resourceserver:\r\n          permit-all:\r\n          - &quot;/greet/public&quot;\r\n          cors:\r\n          - path: /**\r\n            allowed-origin-patterns: http://localhost:4200\r\n```\r\n```java\r\n@EnableMethodSecurity // @EnableReactiveMethodSecurity in a reactive application\r\npublic static class WebSecurityConfig {\t}\r\n```\r\n\r\n#### Client\r\nFor Spring applications secured with sessions (not access tokens), and with `oauth2Login`:\r\n- `spring-cloud-gateway` configured as **B**ackend **F**or **F**rontend\r\n- server-side rendered templates (Thymeleaf, JSF, etc.)\r\n```xml\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t&lt;!-- For a reactive application (like spring-cloud-gateway is), use spring-boot-starter-webflux instead --&gt;\r\n\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;spring-boot-starter-oauth2-client&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;com.c4-soft.springaddons&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;spring-addons-starter-oidc&lt;/artifactId&gt;\r\n    &lt;version&gt;7.0.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n```yaml\r\nissuer: http://localhost:8442/realms/master\r\nclient-id: change-me\r\nclient-secret: change-me\r\n\r\nspring:\r\n  security:\r\n    oauth2:\r\n      client:\r\n        provider:\r\n          keycloak:\r\n            issuer-uri: ${issuer}\r\n        registration:\r\n          keycloak-authorization-code:\r\n            authorization-grant-type: authorization_code\r\n            client-id: ${client-id}\r\n            client-secret: ${client-secret}\r\n            provider: keycloak\r\n            scope: openid,profile,email,offline_access\r\n\r\ncom:\r\n  c4-soft:\r\n    springaddons:\r\n      oidc:\r\n        ops:\r\n        - iss: ${issuer}\r\n          username-claim: preferred_username\r\n          authorities:\r\n          - path: $.realm_access.roles\r\n          - path: $.resource_access.*.roles\r\n        client:\r\n          security-matchers:\r\n          - /**\r\n          permit-all:\r\n          - /login/**\r\n          - /oauth2/**\r\n          - /\r\n```\r\n\r\n#### Other use-cases\r\nPlease refer to [my tutorials][3] for more use-case like:\r\n- configuring a BFF\r\n- mixing client and resource server configurations in a single application\r\n- &quot;dynamic&quot; multi-tenancy\r\n- and more\r\n\r\n\r\n  [1]: https://github.com/keycloak/keycloak/discussions/10187\r\n  [2]: https://github.com/ch4mpy/spring-addons\r\n  [3]: https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials","title":"Spring Boot 2.6 regression: How can I fix Keycloak circular dependency in adapter?","body":"<h1>2022 update</h1>\n<p>Do not use keycloak adapters for spring, <a href=\"https://github.com/keycloak/keycloak/discussions/10187\" rel=\"nofollow noreferrer\">it is very deprecated</a>.</p>\n<p>Use <code>spring-boot-starter-oauth2-resource-server</code> or <code>spring-boot-starter-oauth2-client</code> instead.</p>\n<p>Uses a <a href=\"https://github.com/ch4mpy/spring-addons\" rel=\"nofollow noreferrer\">Spring Boot starter of mine</a> in addition to official ones, configuring a Spring Boot application to use Keycloak as OpenID Provider can be achieved with 0 Java conf (with roles and username mapping, and even in &quot;static&quot; multi-tenant scenarios).</p>\n<h4>Resource Server</h4>\n<p>For a REST API secured with JWT access tokens</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;!-- For a reactive application, use spring-boot-starter-webflux instead --&gt;\n    &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-oauth2-resource-server&lt;/artifactId&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;com.c4-soft.springaddons&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-addons-starter-oidc&lt;/artifactId&gt;\n    &lt;version&gt;7.0.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<pre class=\"lang-yaml prettyprint-override\"><code>com:\n  c4-soft:\n    springaddons:\n      oidc:\n        ops:\n        - iss: http://localhost:8442/realms/master\n          username-claim: preferred_username\n          authorities:\n          - path: $.realm_access.roles\n          - path: $.resource_access.*.roles\n        resourceserver:\n          permit-all:\n          - &quot;/greet/public&quot;\n          cors:\n          - path: /**\n            allowed-origin-patterns: http://localhost:4200\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@EnableMethodSecurity // @EnableReactiveMethodSecurity in a reactive application\npublic static class WebSecurityConfig { }\n</code></pre>\n<h4>Client</h4>\n<p>For Spring applications secured with sessions (not access tokens), and with <code>oauth2Login</code>:</p>\n<ul>\n<li><code>spring-cloud-gateway</code> configured as <strong>B</strong>ackend <strong>F</strong>or <strong>F</strong>rontend</li>\n<li>server-side rendered templates (Thymeleaf, JSF, etc.)</li>\n</ul>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;!-- For a reactive application (like spring-cloud-gateway is), use spring-boot-starter-webflux instead --&gt;\n    &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-oauth2-client&lt;/artifactId&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;com.c4-soft.springaddons&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-addons-starter-oidc&lt;/artifactId&gt;\n    &lt;version&gt;7.0.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<pre class=\"lang-yaml prettyprint-override\"><code>issuer: http://localhost:8442/realms/master\nclient-id: change-me\nclient-secret: change-me\n\nspring:\n  security:\n    oauth2:\n      client:\n        provider:\n          keycloak:\n            issuer-uri: ${issuer}\n        registration:\n          keycloak-authorization-code:\n            authorization-grant-type: authorization_code\n            client-id: ${client-id}\n            client-secret: ${client-secret}\n            provider: keycloak\n            scope: openid,profile,email,offline_access\n\ncom:\n  c4-soft:\n    springaddons:\n      oidc:\n        ops:\n        - iss: ${issuer}\n          username-claim: preferred_username\n          authorities:\n          - path: $.realm_access.roles\n          - path: $.resource_access.*.roles\n        client:\n          security-matchers:\n          - /**\n          permit-all:\n          - /login/**\n          - /oauth2/**\n          - /\n</code></pre>\n<h4>Other use-cases</h4>\n<p>Please refer to <a href=\"https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials\" rel=\"nofollow noreferrer\">my tutorials</a> for more use-case like:</p>\n<ul>\n<li>configuring a BFF</li>\n<li>mixing client and resource server configurations in a single application</li>\n<li>&quot;dynamic&quot; multi-tenancy</li>\n<li>and more</li>\n</ul>\n"}],"owner":{"account_id":19579925,"reputation":451,"user_id":14329215,"display_name":"Cale W"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14533,"favorite_count":0,"down_vote_count":0,"up_vote_count":45,"answer_count":2,"score":45,"last_activity_date":1689124125,"creation_date":1638486411,"question_id":70207564,"body_markdown":"Spring Boot 2.6.x seems to have introduced some change causing the previously-working integration with Keycloak to have a circular reference, preventing application start; it works and starts fine with the current 2.5.x release.\r\n\r\nExplicitly, by **changing nothing except the &amp;lt;version&amp;gt; tag value from 2.5.7 to 2.6.1** in **spring-boot-starter-parent**, the errors/message detailed below occur.\r\n\r\nThe expected behavior, of course, is that the application starts just fine and is secured with Keycloak just as before.\r\n\r\nThe actual message is:\r\n```\r\n***************************\r\nAPPLICATION FAILED TO START\r\n***************************\r\n\r\nDescription:\r\n\r\nThe dependencies of some of the beans in the application context form a cycle:\r\n\r\n┌──-&gt;──┐\r\n|  keycloakSecurityConfig (field private org.keycloak.adapters.KeycloakConfigResolver org.keycloak.adapters.springsecurity.config.KeycloakWebSecurityConfigurerAdapter.keycloakConfigResolver)\r\n└──&lt;-──┘\r\n```\r\n\r\nFull stack trace:\r\n```\r\n2021-11-30 12:49:07.308 DEBUG 7 --- [           main] o.s.b.d.LoggingFailureAnalysisReporter   : Application failed to start due to an exception\r\n\r\norg.springframework.beans.factory.BeanCurrentlyInCreationException: Error creating bean with name &#39;keycloakSecurityConfig&#39;: Requested bean is currently in creation: Is there an unresolvable circular reference?        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.beforeSingletonCreation(DefaultSingletonBeanRegistry.java:355) ~[spring-beans-5.3.13.jar!/:5.3.13]\r\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:227) ~[spring-beans-5.3.13.jar!/:5.3.13]\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.13.jar!/:5.3.13]\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.13.jar!/:5.3.13]\r\n        at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:410) ~[spring-beans-5.3.13.jar!/:5.3.13]\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352) ~[spring-beans-5.3.13.jar!/:5.3.13]\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195) ~[spring-beans-5.3.13.jar!/:5.3.13]\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.13.jar!/:5.3.13]\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.13.jar!/:5.3.13]\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.13.jar!/:5.3.13]\r\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.13.jar!/:5.3.13]\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.13.jar!/:5.3.13]\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.13.jar!/:5.3.13]\r\n        at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276) ~[spring-beans-5.3.13.jar!/:5.3.13]\r\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1380) ~[spring-beans-5.3.13.jar!/:5.3.13]\r\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1300) ~[spring-beans-5.3.13.jar!/:5.3.13]\r\n        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:656) ~[spring-beans-5.3.13.jar!/:5.3.13]\r\n        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:639) ~[spring-beans-5.3.13.jar!/:5.3.13]\r\n        at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:119) ~[spring-beans-5.3.13.jar!/:5.3.13]\r\n        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:399) ~[spring-beans-5.3.13.jar!/:5.3.13]\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1431) ~[spring-beans-5.3.13.jar!/:5.3.13]\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:619) ~[spring-beans-5.3.13.jar!/:5.3.13]\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.13.jar!/:5.3.13]\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.13.jar!/:5.3.13]\r\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.13.jar!/:5.3.13]\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.13.jar!/:5.3.13]\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.13.jar!/:5.3.13]\r\n        at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:410) ~[spring-beans-5.3.13.jar!/:5.3.13]\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352) ~[spring-beans-5.3.13.jar!/:5.3.13]\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195) ~[spring-beans-5.3.13.jar!/:5.3.13]\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.13.jar!/:5.3.13]\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.13.jar!/:5.3.13]\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.13.jar!/:5.3.13]\r\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.13.jar!/:5.3.13]\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.13.jar!/:5.3.13]\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:213) ~[spring-beans-5.3.13.jar!/:5.3.13]\r\n        at org.springframework.boot.web.servlet.ServletContextInitializerBeans.getOrderedBeansOfType(ServletContextInitializerBeans.java:212) ~[spring-boot-2.6.1.jar!/:2.6.1]\r\n        at org.springframework.boot.web.servlet.ServletContextInitializerBeans.addAsRegistrationBean(ServletContextInitializerBeans.java:175) ~[spring-boot-2.6.1.jar!/:2.6.1]\r\n        at org.springframework.boot.web.servlet.ServletContextInitializerBeans.addAsRegistrationBean(ServletContextInitializerBeans.java:170) ~[spring-boot-2.6.1.jar!/:2.6.1]\r\n        at org.springframework.boot.web.servlet.ServletContextInitializerBeans.addAdaptableBeans(ServletContextInitializerBeans.java:155) ~[spring-boot-2.6.1.jar!/:2.6.1]\r\n        at org.springframework.boot.web.servlet.ServletContextInitializerBeans.&lt;init&gt;(ServletContextInitializerBeans.java:87) ~[spring-boot-2.6.1.jar!/:2.6.1]\r\n        at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.getServletContextInitializerBeans(ServletWebServerApplicationContext.java:260) ~[spring-boot-2.6.1.jar!/:2.6.1]\r\n        at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.selfInitialize(ServletWebServerApplicationContext.java:234) ~[spring-boot-2.6.1.jar!/:2.6.1]\r\n        at org.springframework.boot.web.embedded.tomcat.TomcatStarter.onStartup(TomcatStarter.java:53) ~[spring-boot-2.6.1.jar!/:2.6.1]\r\n        at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5219) ~[tomcat-embed-core-9.0.55.jar!/:?]\r\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) ~[tomcat-embed-core-9.0.55.jar!/:?]\r\n        at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1396) ~[tomcat-embed-core-9.0.55.jar!/:?]\r\n        at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1386) ~[tomcat-embed-core-9.0.55.jar!/:?]\r\n        at java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[?:?]\r\n        at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75) ~[tomcat-embed-core-9.0.55.jar!/:?]\r\n        at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:140) ~[?:?]\r\n        at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:919) ~[tomcat-embed-core-9.0.55.jar!/:?]\r\n        at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:835) ~[tomcat-embed-core-9.0.55.jar!/:?]\r\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) ~[tomcat-embed-core-9.0.55.jar!/:?]\r\n        at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1396) ~[tomcat-embed-core-9.0.55.jar!/:?]\r\n        at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1386) ~[tomcat-embed-core-9.0.55.jar!/:?]\r\n        at java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[?:?]\r\n        at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75) ~[tomcat-embed-core-9.0.55.jar!/:?]\r\n        at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:140) ~[?:?]\r\n        at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:919) ~[tomcat-embed-core-9.0.55.jar!/:?]\r\n        at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:263) ~[tomcat-embed-core-9.0.55.jar!/:?]\r\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) ~[tomcat-embed-core-9.0.55.jar!/:?]\r\n        at org.apache.catalina.core.StandardService.startInternal(StandardService.java:432) ~[tomcat-embed-core-9.0.55.jar!/:?]\r\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) ~[tomcat-embed-core-9.0.55.jar!/:?]\r\n        at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:927) ~[tomcat-embed-core-9.0.55.jar!/:?]\r\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) ~[tomcat-embed-core-9.0.55.jar!/:?]\r\n        at org.apache.catalina.startup.Tomcat.start(Tomcat.java:486) ~[tomcat-embed-core-9.0.55.jar!/:?]\r\n        at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:123) ~[spring-boot-2.6.1.jar!/:2.6.1]\r\n        at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.&lt;init&gt;(TomcatWebServer.java:104) ~[spring-boot-2.6.1.jar!/:2.6.1]\r\n        at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getTomcatWebServer(TomcatServletWebServerFactory.java:473) ~[spring-boot-2.6.1.jar!/:2.6.1]\r\n        at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getWebServer(TomcatServletWebServerFactory.java:206) ~[spring-boot-2.6.1.jar!/:2.6.1]\r\n        at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.createWebServer(ServletWebServerApplicationContext.java:182) ~[spring-boot-2.6.1.jar!/:2.6.1]\r\n        at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:160) ~[spring-boot-2.6.1.jar!/:2.6.1]\r\n        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:577) ~[spring-context-5.3.13.jar!/:5.3.13]\r\n        at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:145) ~[spring-boot-2.6.1.jar!/:2.6.1]\r\n        at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730) [spring-boot-2.6.1.jar!/:2.6.1]\r\n        at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:412) [spring-boot-2.6.1.jar!/:2.6.1]\r\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:302) [spring-boot-2.6.1.jar!/:2.6.1]\r\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1301) [spring-boot-2.6.1.jar!/:2.6.1]\r\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1290) [spring-boot-2.6.1.jar!/:2.6.1]\r\n        at REDACTED.SpringPortalApplication.main(SpringPortalApplication.java:17) [classes!/:2.0.0]\r\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]\r\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:?]\r\n        at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]\r\n        at java.lang.reflect.Method.invoke(Method.java:566) ~[?:?]\r\n        at org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:49) [spring-portal.jar:2.0.0]\r\n        at org.springframework.boot.loader.Launcher.launch(Launcher.java:108) [spring-portal.jar:2.0.0]\r\n        at org.springframework.boot.loader.Launcher.launch(Launcher.java:58) [spring-portal.jar:2.0.0]\r\n        at org.springframework.boot.loader.JarLauncher.main(JarLauncher.java:88) [spring-portal.jar:2.0.0]\r\n\r\n2021-11-30 12:49:07.315 ERROR 7 --- [           main] o.s.b.d.LoggingFailureAnalysisReporter   :\r\n\r\n***************************\r\nAPPLICATION FAILED TO START\r\n***************************\r\n\r\nDescription:\r\n\r\nThe dependencies of some of the beans in the application context form a cycle:\r\n\r\n┌──-&gt;──┐\r\n|  keycloakSecurityConfig (field private org.keycloak.adapters.KeycloakConfigResolver org.keycloak.adapters.springsecurity.config.KeycloakWebSecurityConfigurerAdapter.keycloakConfigResolver)\r\n└──&lt;-──┘\r\n\r\n\r\nAction:\r\n\r\nRelying upon circular references is discouraged and they are prohibited by default. Update your application to remove the dependency cycle between beans. As a last resort, it may be possible to break the cycle automatically by setting spring.main.allow-circular-references to true.\r\n```\r\n\r\nThe POM is extensive in that it contains lots of spring-boot-starter-... (web,security) entries, along with other uninteresting project dependencies. What I think might be relevant to this particular problem is Keycloak-related things:\r\n\r\nIn &amp;lt;dependencyManagement&amp;gt;:\r\n\r\n* org.keycloak.bom:keycloak-adapter-bom:15.0.2 (version pinned via POM variable)\r\n\r\nAnd as &amp;lt;dependency&amp;gt; entries (versions expected from spring-boot-starter-parent or the Keycloak BOM):\r\n\r\n* org.springframework.boot:spring-boot-starter-security\r\n* org.keycloak:keycloak-spring-boot-starter\r\n\r\nThe only related configuration class present is (Javadoc removed for brevity):\r\n\r\n```\r\n@Configuration\r\n@EnableWebSecurity\r\n@ComponentScan(basePackageClasses = KeycloakSecurityComponents.class)\r\npublic class KeycloakSecurityConfig extends KeycloakWebSecurityConfigurerAdapter {\r\n\r\n    @Autowired\r\n    public void configureGlobal(AuthenticationManagerBuilder auth) {\r\n        KeycloakAuthenticationProvider kap = keycloakAuthenticationProvider();\r\n        kap.setGrantedAuthoritiesMapper(new SimpleAuthorityMapper());\r\n        auth.authenticationProvider(kap);\r\n    }\r\n\r\n    @Bean\r\n    public KeycloakSpringBootConfigResolver keycloakConfigResolver() {\r\n        return new KeycloakSpringBootConfigResolver();\r\n    }\r\n\r\n    @Bean\r\n    @Override\r\n    protected SessionAuthenticationStrategy sessionAuthenticationStrategy() {\r\n        return new RegisterSessionAuthenticationStrategy(new SessionRegistryImpl());\r\n    }\r\n\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n        super.configure(http);\r\n        http.authorizeRequests()\r\n                .antMatchers(&quot;/**&quot;)\r\n                .authenticated();\r\n    }\r\n\r\n}\r\n```\r\n\r\nI&#39;ve poked at the Keycloak code a bit and it would seem that abstract [o.k.a.s.c.KeycloakWebSecurityConfigurerAdapter](https://github.com/keycloak/keycloak/blob/15.0.2/adapters/oidc/spring-security/src/main/java/org/keycloak/adapters/springsecurity/config/KeycloakWebSecurityConfigurerAdapter.java), which I extend for the above config class, has an @Autowired(required = false) private field of type [o.k.a.KeycloakConfigResolver](https://github.com/keycloak/keycloak/blob/15.0.2/adapters/oidc/adapter-core/src/main/java/org/keycloak/adapters/KeycloakConfigResolver.java) - exactly what&#39;s mentioned in the circular reference error.\r\n\r\nI&#39;ve tried:\r\n\r\n* Moving the provider method annotated @Bean returning an implementation of KeycloakConfigResolver (which, in my config class above, is just KeycloakSpringBootConfigResolver) to a different class; resulting in that class being mentioned too in the circular reference error, as an item on the classpath.\r\n\r\n* Just removing my provider method that returns KeycloakSpringBootConfigResolver, and seeing if something else is providing it; I realized this doesn&#39;t make sense, and it fails as expected since nothing has changed in the Keycloak resources being used here (from 15.0.2) - further, the default method of getting a configuration if the field is null is a JSON file in [o.k.a.s.c.KeycloakWebSecurityConfigurerAdapter::adapterDeploymentContext](https://github.com/keycloak/keycloak/blob/15.0.2/adapters/oidc/spring-security/src/main/java/org/keycloak/adapters/springsecurity/config/KeycloakWebSecurityConfigurerAdapter.java).\r\n\r\n* More reading, and now it no longer makes sense to me why what I have actually works - it has a constructor-injected instance of o.k.a.KeycloakConfigResolver, and the provider it has to have been using is a non-static method **in itself** - which implies that an instance would&#39;ve had to have been constructed. Per the previous bullet point, commenting out my method that provides the implementation of o.k.a.KeycloakConfigResolver results in it defaulting to the injected-field-is-null condition of trying for the JSON file.\r\n\r\nPossibly related, but unsure; doesn&#39;t *seem* to be: very recent question here [Spring boot keycloak circular reference](https://stackoverflow.com/questions/70161753/spring-boot-keycloak-circular-reference)","title":"Spring Boot 2.6 regression: How can I fix Keycloak circular dependency in adapter?","body":"<p>Spring Boot 2.6.x seems to have introduced some change causing the previously-working integration with Keycloak to have a circular reference, preventing application start; it works and starts fine with the current 2.5.x release.</p>\n<p>Explicitly, by <strong>changing nothing except the &lt;version&gt; tag value from 2.5.7 to 2.6.1</strong> in <strong>spring-boot-starter-parent</strong>, the errors/message detailed below occur.</p>\n<p>The expected behavior, of course, is that the application starts just fine and is secured with Keycloak just as before.</p>\n<p>The actual message is:</p>\n<pre><code>***************************\nAPPLICATION FAILED TO START\n***************************\n\nDescription:\n\nThe dependencies of some of the beans in the application context form a cycle:\n\n┌──-&gt;──┐\n|  keycloakSecurityConfig (field private org.keycloak.adapters.KeycloakConfigResolver org.keycloak.adapters.springsecurity.config.KeycloakWebSecurityConfigurerAdapter.keycloakConfigResolver)\n└──&lt;-──┘\n</code></pre>\n<p>Full stack trace:</p>\n<pre><code>2021-11-30 12:49:07.308 DEBUG 7 --- [           main] o.s.b.d.LoggingFailureAnalysisReporter   : Application failed to start due to an exception\n\norg.springframework.beans.factory.BeanCurrentlyInCreationException: Error creating bean with name 'keycloakSecurityConfig': Requested bean is currently in creation: Is there an unresolvable circular reference?        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.beforeSingletonCreation(DefaultSingletonBeanRegistry.java:355) ~[spring-beans-5.3.13.jar!/:5.3.13]\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:227) ~[spring-beans-5.3.13.jar!/:5.3.13]\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.13.jar!/:5.3.13]\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.13.jar!/:5.3.13]\n        at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:410) ~[spring-beans-5.3.13.jar!/:5.3.13]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352) ~[spring-beans-5.3.13.jar!/:5.3.13]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195) ~[spring-beans-5.3.13.jar!/:5.3.13]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.13.jar!/:5.3.13]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.13.jar!/:5.3.13]\n        at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.13.jar!/:5.3.13]\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.13.jar!/:5.3.13]\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.13.jar!/:5.3.13]\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.13.jar!/:5.3.13]\n        at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276) ~[spring-beans-5.3.13.jar!/:5.3.13]\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1380) ~[spring-beans-5.3.13.jar!/:5.3.13]\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1300) ~[spring-beans-5.3.13.jar!/:5.3.13]\n        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:656) ~[spring-beans-5.3.13.jar!/:5.3.13]\n        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:639) ~[spring-beans-5.3.13.jar!/:5.3.13]\n        at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:119) ~[spring-beans-5.3.13.jar!/:5.3.13]\n        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:399) ~[spring-beans-5.3.13.jar!/:5.3.13]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1431) ~[spring-beans-5.3.13.jar!/:5.3.13]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:619) ~[spring-beans-5.3.13.jar!/:5.3.13]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.13.jar!/:5.3.13]\n        at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.13.jar!/:5.3.13]\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.13.jar!/:5.3.13]\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.13.jar!/:5.3.13]\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.13.jar!/:5.3.13]\n        at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:410) ~[spring-beans-5.3.13.jar!/:5.3.13]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352) ~[spring-beans-5.3.13.jar!/:5.3.13]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195) ~[spring-beans-5.3.13.jar!/:5.3.13]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.13.jar!/:5.3.13]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.13.jar!/:5.3.13]\n        at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.13.jar!/:5.3.13]\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.13.jar!/:5.3.13]\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.13.jar!/:5.3.13]\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:213) ~[spring-beans-5.3.13.jar!/:5.3.13]\n        at org.springframework.boot.web.servlet.ServletContextInitializerBeans.getOrderedBeansOfType(ServletContextInitializerBeans.java:212) ~[spring-boot-2.6.1.jar!/:2.6.1]\n        at org.springframework.boot.web.servlet.ServletContextInitializerBeans.addAsRegistrationBean(ServletContextInitializerBeans.java:175) ~[spring-boot-2.6.1.jar!/:2.6.1]\n        at org.springframework.boot.web.servlet.ServletContextInitializerBeans.addAsRegistrationBean(ServletContextInitializerBeans.java:170) ~[spring-boot-2.6.1.jar!/:2.6.1]\n        at org.springframework.boot.web.servlet.ServletContextInitializerBeans.addAdaptableBeans(ServletContextInitializerBeans.java:155) ~[spring-boot-2.6.1.jar!/:2.6.1]\n        at org.springframework.boot.web.servlet.ServletContextInitializerBeans.&lt;init&gt;(ServletContextInitializerBeans.java:87) ~[spring-boot-2.6.1.jar!/:2.6.1]\n        at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.getServletContextInitializerBeans(ServletWebServerApplicationContext.java:260) ~[spring-boot-2.6.1.jar!/:2.6.1]\n        at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.selfInitialize(ServletWebServerApplicationContext.java:234) ~[spring-boot-2.6.1.jar!/:2.6.1]\n        at org.springframework.boot.web.embedded.tomcat.TomcatStarter.onStartup(TomcatStarter.java:53) ~[spring-boot-2.6.1.jar!/:2.6.1]\n        at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5219) ~[tomcat-embed-core-9.0.55.jar!/:?]\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) ~[tomcat-embed-core-9.0.55.jar!/:?]\n        at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1396) ~[tomcat-embed-core-9.0.55.jar!/:?]\n        at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1386) ~[tomcat-embed-core-9.0.55.jar!/:?]\n        at java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[?:?]\n        at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75) ~[tomcat-embed-core-9.0.55.jar!/:?]\n        at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:140) ~[?:?]\n        at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:919) ~[tomcat-embed-core-9.0.55.jar!/:?]\n        at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:835) ~[tomcat-embed-core-9.0.55.jar!/:?]\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) ~[tomcat-embed-core-9.0.55.jar!/:?]\n        at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1396) ~[tomcat-embed-core-9.0.55.jar!/:?]\n        at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1386) ~[tomcat-embed-core-9.0.55.jar!/:?]\n        at java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[?:?]\n        at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75) ~[tomcat-embed-core-9.0.55.jar!/:?]\n        at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:140) ~[?:?]\n        at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:919) ~[tomcat-embed-core-9.0.55.jar!/:?]\n        at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:263) ~[tomcat-embed-core-9.0.55.jar!/:?]\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) ~[tomcat-embed-core-9.0.55.jar!/:?]\n        at org.apache.catalina.core.StandardService.startInternal(StandardService.java:432) ~[tomcat-embed-core-9.0.55.jar!/:?]\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) ~[tomcat-embed-core-9.0.55.jar!/:?]\n        at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:927) ~[tomcat-embed-core-9.0.55.jar!/:?]\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) ~[tomcat-embed-core-9.0.55.jar!/:?]\n        at org.apache.catalina.startup.Tomcat.start(Tomcat.java:486) ~[tomcat-embed-core-9.0.55.jar!/:?]\n        at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:123) ~[spring-boot-2.6.1.jar!/:2.6.1]\n        at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.&lt;init&gt;(TomcatWebServer.java:104) ~[spring-boot-2.6.1.jar!/:2.6.1]\n        at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getTomcatWebServer(TomcatServletWebServerFactory.java:473) ~[spring-boot-2.6.1.jar!/:2.6.1]\n        at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getWebServer(TomcatServletWebServerFactory.java:206) ~[spring-boot-2.6.1.jar!/:2.6.1]\n        at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.createWebServer(ServletWebServerApplicationContext.java:182) ~[spring-boot-2.6.1.jar!/:2.6.1]\n        at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:160) ~[spring-boot-2.6.1.jar!/:2.6.1]\n        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:577) ~[spring-context-5.3.13.jar!/:5.3.13]\n        at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:145) ~[spring-boot-2.6.1.jar!/:2.6.1]\n        at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730) [spring-boot-2.6.1.jar!/:2.6.1]\n        at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:412) [spring-boot-2.6.1.jar!/:2.6.1]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:302) [spring-boot-2.6.1.jar!/:2.6.1]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1301) [spring-boot-2.6.1.jar!/:2.6.1]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1290) [spring-boot-2.6.1.jar!/:2.6.1]\n        at REDACTED.SpringPortalApplication.main(SpringPortalApplication.java:17) [classes!/:2.0.0]\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:?]\n        at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]\n        at java.lang.reflect.Method.invoke(Method.java:566) ~[?:?]\n        at org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:49) [spring-portal.jar:2.0.0]\n        at org.springframework.boot.loader.Launcher.launch(Launcher.java:108) [spring-portal.jar:2.0.0]\n        at org.springframework.boot.loader.Launcher.launch(Launcher.java:58) [spring-portal.jar:2.0.0]\n        at org.springframework.boot.loader.JarLauncher.main(JarLauncher.java:88) [spring-portal.jar:2.0.0]\n\n2021-11-30 12:49:07.315 ERROR 7 --- [           main] o.s.b.d.LoggingFailureAnalysisReporter   :\n\n***************************\nAPPLICATION FAILED TO START\n***************************\n\nDescription:\n\nThe dependencies of some of the beans in the application context form a cycle:\n\n┌──-&gt;──┐\n|  keycloakSecurityConfig (field private org.keycloak.adapters.KeycloakConfigResolver org.keycloak.adapters.springsecurity.config.KeycloakWebSecurityConfigurerAdapter.keycloakConfigResolver)\n└──&lt;-──┘\n\n\nAction:\n\nRelying upon circular references is discouraged and they are prohibited by default. Update your application to remove the dependency cycle between beans. As a last resort, it may be possible to break the cycle automatically by setting spring.main.allow-circular-references to true.\n</code></pre>\n<p>The POM is extensive in that it contains lots of spring-boot-starter-... (web,security) entries, along with other uninteresting project dependencies. What I think might be relevant to this particular problem is Keycloak-related things:</p>\n<p>In &lt;dependencyManagement&gt;:</p>\n<ul>\n<li>org.keycloak.bom:keycloak-adapter-bom:15.0.2 (version pinned via POM variable)</li>\n</ul>\n<p>And as &lt;dependency&gt; entries (versions expected from spring-boot-starter-parent or the Keycloak BOM):</p>\n<ul>\n<li>org.springframework.boot:spring-boot-starter-security</li>\n<li>org.keycloak:keycloak-spring-boot-starter</li>\n</ul>\n<p>The only related configuration class present is (Javadoc removed for brevity):</p>\n<pre><code>@Configuration\n@EnableWebSecurity\n@ComponentScan(basePackageClasses = KeycloakSecurityComponents.class)\npublic class KeycloakSecurityConfig extends KeycloakWebSecurityConfigurerAdapter {\n\n    @Autowired\n    public void configureGlobal(AuthenticationManagerBuilder auth) {\n        KeycloakAuthenticationProvider kap = keycloakAuthenticationProvider();\n        kap.setGrantedAuthoritiesMapper(new SimpleAuthorityMapper());\n        auth.authenticationProvider(kap);\n    }\n\n    @Bean\n    public KeycloakSpringBootConfigResolver keycloakConfigResolver() {\n        return new KeycloakSpringBootConfigResolver();\n    }\n\n    @Bean\n    @Override\n    protected SessionAuthenticationStrategy sessionAuthenticationStrategy() {\n        return new RegisterSessionAuthenticationStrategy(new SessionRegistryImpl());\n    }\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        super.configure(http);\n        http.authorizeRequests()\n                .antMatchers(&quot;/**&quot;)\n                .authenticated();\n    }\n\n}\n</code></pre>\n<p>I've poked at the Keycloak code a bit and it would seem that abstract <a href=\"https://github.com/keycloak/keycloak/blob/15.0.2/adapters/oidc/spring-security/src/main/java/org/keycloak/adapters/springsecurity/config/KeycloakWebSecurityConfigurerAdapter.java\" rel=\"noreferrer\">o.k.a.s.c.KeycloakWebSecurityConfigurerAdapter</a>, which I extend for the above config class, has an @Autowired(required = false) private field of type <a href=\"https://github.com/keycloak/keycloak/blob/15.0.2/adapters/oidc/adapter-core/src/main/java/org/keycloak/adapters/KeycloakConfigResolver.java\" rel=\"noreferrer\">o.k.a.KeycloakConfigResolver</a> - exactly what's mentioned in the circular reference error.</p>\n<p>I've tried:</p>\n<ul>\n<li><p>Moving the provider method annotated @Bean returning an implementation of KeycloakConfigResolver (which, in my config class above, is just KeycloakSpringBootConfigResolver) to a different class; resulting in that class being mentioned too in the circular reference error, as an item on the classpath.</p>\n</li>\n<li><p>Just removing my provider method that returns KeycloakSpringBootConfigResolver, and seeing if something else is providing it; I realized this doesn't make sense, and it fails as expected since nothing has changed in the Keycloak resources being used here (from 15.0.2) - further, the default method of getting a configuration if the field is null is a JSON file in <a href=\"https://github.com/keycloak/keycloak/blob/15.0.2/adapters/oidc/spring-security/src/main/java/org/keycloak/adapters/springsecurity/config/KeycloakWebSecurityConfigurerAdapter.java\" rel=\"noreferrer\">o.k.a.s.c.KeycloakWebSecurityConfigurerAdapter::adapterDeploymentContext</a>.</p>\n</li>\n<li><p>More reading, and now it no longer makes sense to me why what I have actually works - it has a constructor-injected instance of o.k.a.KeycloakConfigResolver, and the provider it has to have been using is a non-static method <strong>in itself</strong> - which implies that an instance would've had to have been constructed. Per the previous bullet point, commenting out my method that provides the implementation of o.k.a.KeycloakConfigResolver results in it defaulting to the injected-field-is-null condition of trying for the JSON file.</p>\n</li>\n</ul>\n<p>Possibly related, but unsure; doesn't <em>seem</em> to be: very recent question here <a href=\"https://stackoverflow.com/questions/70161753/spring-boot-keycloak-circular-reference\">Spring boot keycloak circular reference</a></p>\n"},{"tags":["java","file-io","large-files"],"comments":[{"owner":{"account_id":250783,"reputation":16159,"user_id":527702,"accept_rate":63,"display_name":"hippietrail"},"score":3,"creation_date":1352139751,"post_id":4121678,"comment_id":18034876,"body_markdown":"See also: [Java: Quickly read the last line of a text file?](http://stackoverflow.com/questions/686231)","body":"See also: <a href=\"http://stackoverflow.com/questions/686231\">Java: Quickly read the last line of a text file?</a>"}],"answers":[{"tags":[],"owner":{"account_id":8291,"reputation":860517,"user_id":14860,"accept_rate":100,"display_name":"paxdiablo"},"comment_count":0,"down_vote_count":0,"up_vote_count":30,"is_accepted":true,"score":30,"last_activity_date":1289197801,"creation_date":1289197427,"answer_id":4121696,"question_id":4121678,"body_markdown":"If you use a [`RandomAccessFile`][1], you can use [`length`][2] and [`seek`][3] to get to a specific point near the end of the file and then read forward from there.\r\n\r\nIf you find there weren&#39;t enough lines, back up from that point and try again. Once you&#39;ve figured out where the `N`th last line begins, you can seek to there and just read-and-print.\r\n\r\nAn initial best-guess assumption can be made based on your data properties. For example, if it&#39;s a text file, it&#39;s possible the line lengths won&#39;t exceed an average of 132 so, to get the last five lines, start 660 characters before the end. Then, if you were wrong, try again at 1320 (you can even use what you learned from the last 660 characters to adjust that - example: if those 660 characters were just three lines, the next try could be 660 / 3 * 5, plus maybe a bit extra just in case).\r\n\r\n\r\n  [1]: http://download.oracle.com/javase/6/docs/api/java/io/RandomAccessFile.html\r\n  [2]: http://download.oracle.com/javase/6/docs/api/java/io/RandomAccessFile.html#length%28%29\r\n  [3]: http://download.oracle.com/javase/6/docs/api/java/io/RandomAccessFile.html#seek%28long%29","title":"Java : Read last n lines of a HUGE file","body":"<p>If you use a <a href=\"http://download.oracle.com/javase/6/docs/api/java/io/RandomAccessFile.html\" rel=\"noreferrer\"><code>RandomAccessFile</code></a>, you can use <a href=\"http://download.oracle.com/javase/6/docs/api/java/io/RandomAccessFile.html#length%28%29\" rel=\"noreferrer\"><code>length</code></a> and <a href=\"http://download.oracle.com/javase/6/docs/api/java/io/RandomAccessFile.html#seek%28long%29\" rel=\"noreferrer\"><code>seek</code></a> to get to a specific point near the end of the file and then read forward from there.</p>\n\n<p>If you find there weren't enough lines, back up from that point and try again. Once you've figured out where the <code>N</code>th last line begins, you can seek to there and just read-and-print.</p>\n\n<p>An initial best-guess assumption can be made based on your data properties. For example, if it's a text file, it's possible the line lengths won't exceed an average of 132 so, to get the last five lines, start 660 characters before the end. Then, if you were wrong, try again at 1320 (you can even use what you learned from the last 660 characters to adjust that - example: if those 660 characters were just three lines, the next try could be 660 / 3 * 5, plus maybe a bit extra just in case).</p>\n"},{"tags":[],"owner":{"account_id":5626,"reputation":32933,"user_id":9167,"display_name":"Yann Ramin"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1289197460,"creation_date":1289197460,"answer_id":4121699,"question_id":4121678,"body_markdown":"A `RandomAccessFile` allows for seeking (http://download.oracle.com/javase/1.4.2/docs/api/java/io/RandomAccessFile.html). The `File.length` method will return the size of the file. The problem is determining number of lines. For this, you can seek to the end of the file and read backwards until you have hit the right number of lines.\r\n","title":"Java : Read last n lines of a HUGE file","body":"<p>A <code>RandomAccessFile</code> allows for seeking (http://download.oracle.com/javase/1.4.2/docs/api/java/io/RandomAccessFile.html). The <code>File.length</code> method will return the size of the file. The problem is determining number of lines. For this, you can seek to the end of the file and read backwards until you have hit the right number of lines.</p>\n"},{"comments":[{"owner":{"account_id":107907,"reputation":40512,"user_id":286685,"accept_rate":56,"display_name":"Stijn de Witt"},"score":1,"creation_date":1407448394,"post_id":4121784,"comment_id":39231074,"body_markdown":"+1 for mentioning the caveat. I think that for UTF-8 the problem may be made simpler by scanning for &#39;\\n&#39;... At least that&#39;s what Jon Skeet seems to imply in his answer to a [related question](http://stackoverflow.com/questions/686231/quickly-read-the-last-line-of-a-text-file)... Seems &#39;\\n&#39; can only occur as a valid character in UTF-8 and never in the &#39;extra bytes&#39;...","body":"+1 for mentioning the caveat. I think that for UTF-8 the problem may be made simpler by scanning for &#39;\\n&#39;... At least that&#39;s what Jon Skeet seems to imply in his answer to a <a href=\"http://stackoverflow.com/questions/686231/quickly-read-the-last-line-of-a-text-file\">related question</a>... Seems &#39;\\n&#39; can only occur as a valid character in UTF-8 and never in the &#39;extra bytes&#39;..."},{"owner":{"account_id":107907,"reputation":40512,"user_id":286685,"accept_rate":56,"display_name":"Stijn de Witt"},"score":0,"creation_date":1407673776,"post_id":4121784,"comment_id":39297768,"body_markdown":"Yes, for UTF-8 it&#39;s simple. UTF-8 encodes characters either as a single byte (all ASCII characters) or as multiple bytes (all other Unicode characters). Fortunately for us, newline is an ASCII character and in UTF-8, no multi-byte character contains bytes that are also valid ASCII characters. That is to say, if you scan an array of bytes for ASCII newline and you find it, you *know* it&#39;s a newline and not part of some other multi-byte character. I wrote a [blog post](http://stijndewitt.wordpress.com/2014/08/09/max-bytes-in-a-utf-8-char/) that has a nice table illustrating this.","body":"Yes, for UTF-8 it&#39;s simple. UTF-8 encodes characters either as a single byte (all ASCII characters) or as multiple bytes (all other Unicode characters). Fortunately for us, newline is an ASCII character and in UTF-8, no multi-byte character contains bytes that are also valid ASCII characters. That is to say, if you scan an array of bytes for ASCII newline and you find it, you <i>know</i> it&#39;s a newline and not part of some other multi-byte character. I wrote a <a href=\"http://stijndewitt.wordpress.com/2014/08/09/max-bytes-in-a-utf-8-char/\" rel=\"nofollow noreferrer\">blog post</a> that has a nice table illustrating this."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1407674762,"post_id":4121784,"comment_id":39298006,"body_markdown":"The problem is 1) character encodings where the byte `0x0a` is not a newline (e.g. UTF-16), and 2) the fact that there are other Unicode line separator codepoints; e.g. `0x2028`, `0x2029` and `0x0085`","body":"The problem is 1) character encodings where the byte <code>0x0a</code> is not a newline (e.g. UTF-16), and 2) the fact that there are other Unicode line separator codepoints; e.g. <code>0x2028</code>, <code>0x2029</code> and <code>0x0085</code>"},{"owner":{"account_id":107907,"reputation":40512,"user_id":286685,"accept_rate":56,"display_name":"Stijn de Witt"},"score":0,"creation_date":1407679873,"post_id":4121784,"comment_id":39299350,"body_markdown":"Yes, the simple scenario only holds for UTF-8 and when newlines are encoded as either CRLF or just LF... However I think in practice this covers most real-world scenario&#39;s. UTF-16 is pretty rare when it comes to text file encoding (it is often used in-memory, but not very often in files) and I don&#39;t know many editors that will insert those other Unicode line separators...","body":"Yes, the simple scenario only holds for UTF-8 and when newlines are encoded as either CRLF or just LF... However I think in practice this covers most real-world scenario&#39;s. UTF-16 is pretty rare when it comes to text file encoding (it is often used in-memory, but not very often in files) and I don&#39;t know many editors that will insert those other Unicode line separators..."}],"tags":[],"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"comment_count":4,"down_vote_count":0,"up_vote_count":22,"is_accepted":false,"score":22,"last_activity_date":1542062230,"creation_date":1289198651,"answer_id":4121784,"question_id":4121678,"body_markdown":"RandomAccessFile is a good place to start, as described by the other answers.  There is one **important caveat** though.\r\n\r\nIf your file is not encoded with an one-byte-per-character encoding, the [`readLine()`][1] method is not going to work for you.  And [`readUTF()`][2] won&#39;t work in any circumstances.  (It reads a string preceded by a character count ...)\r\n\r\nInstead, you will need to make sure that you look for end-of-line markers in a way that respects the encoding&#39;s character boundaries.  For fixed length encodings (e.g. flavors of UTF-16 or UTF-32) you need to extract characters starting from byte positions that are divisible by the character size in bytes.  For variable length encodings (e.g. UTF-8), you need to search for a byte that *must* be the first byte of a character.  \r\n\r\nIn the case of UTF-8, the first byte of a character will be `0xxxxxxx` or `110xxxxx` or `1110xxxx` or `11110xxx`.  Anything else is either a second / third byte, or an illegal UTF-8 sequence. See [The Unicode Standard, Version 5.2, Chapter 3.9][3], Table 3-7.  This means, as the comment discussion points out, that any 0x0A and 0x0D bytes in a properly encoded UTF-8 stream will represent a LF or CR character.  Thus, simply counting the 0x0A and 0x0D bytes is a valid implementation strategy (for UTF-8) if we can assume that the other kinds of Unicode line separator (0x2028, 0x2029 and 0x0085) are not used.  You can&#39;t assume that, then the code would be more complicated.\r\n\r\nHaving identified a proper character boundary, you can then just call `new String(...)` passing the byte array, offset, count and encoding, and then repeatedly call `String.lastIndexOf(...)` to count end-of-lines.\r\n\r\n\r\n  [1]: http://download.oracle.com/javase/6/docs/api/java/io/RandomAccessFile.html#readLine()\r\n  [2]: http://download.oracle.com/javase/6/docs/api/java/io/RandomAccessFile.html#readUTF()\r\n  [3]: http://www.unicode.org/versions/Unicode5.2.0/ch03.pdf#G7404","title":"Java : Read last n lines of a HUGE file","body":"<p>RandomAccessFile is a good place to start, as described by the other answers.  There is one <strong>important caveat</strong> though.</p>\n\n<p>If your file is not encoded with an one-byte-per-character encoding, the <a href=\"http://download.oracle.com/javase/6/docs/api/java/io/RandomAccessFile.html#readLine()\" rel=\"nofollow noreferrer\"><code>readLine()</code></a> method is not going to work for you.  And <a href=\"http://download.oracle.com/javase/6/docs/api/java/io/RandomAccessFile.html#readUTF()\" rel=\"nofollow noreferrer\"><code>readUTF()</code></a> won't work in any circumstances.  (It reads a string preceded by a character count ...)</p>\n\n<p>Instead, you will need to make sure that you look for end-of-line markers in a way that respects the encoding's character boundaries.  For fixed length encodings (e.g. flavors of UTF-16 or UTF-32) you need to extract characters starting from byte positions that are divisible by the character size in bytes.  For variable length encodings (e.g. UTF-8), you need to search for a byte that <em>must</em> be the first byte of a character.  </p>\n\n<p>In the case of UTF-8, the first byte of a character will be <code>0xxxxxxx</code> or <code>110xxxxx</code> or <code>1110xxxx</code> or <code>11110xxx</code>.  Anything else is either a second / third byte, or an illegal UTF-8 sequence. See <a href=\"http://www.unicode.org/versions/Unicode5.2.0/ch03.pdf#G7404\" rel=\"nofollow noreferrer\">The Unicode Standard, Version 5.2, Chapter 3.9</a>, Table 3-7.  This means, as the comment discussion points out, that any 0x0A and 0x0D bytes in a properly encoded UTF-8 stream will represent a LF or CR character.  Thus, simply counting the 0x0A and 0x0D bytes is a valid implementation strategy (for UTF-8) if we can assume that the other kinds of Unicode line separator (0x2028, 0x2029 and 0x0085) are not used.  You can't assume that, then the code would be more complicated.</p>\n\n<p>Having identified a proper character boundary, you can then just call <code>new String(...)</code> passing the byte array, offset, count and encoding, and then repeatedly call <code>String.lastIndexOf(...)</code> to count end-of-lines.</p>\n"},{"comments":[{"owner":{"account_id":29910,"reputation":113470,"user_id":81179,"accept_rate":100,"display_name":"ChristopheD"},"score":7,"creation_date":1364852824,"post_id":7250187,"comment_id":22386252,"body_markdown":"Since this reads through the entire file, this would not scale so well with larger files.","body":"Since this reads through the entire file, this would not scale so well with larger files."},{"owner":{"account_id":2802250,"reputation":651,"user_id":2410276,"display_name":"shak"},"score":0,"creation_date":1388394682,"post_id":7250187,"comment_id":31250683,"body_markdown":"Also, this function goes into an endless loop for empty files.","body":"Also, this function goes into an endless loop for empty files."},{"owner":{"account_id":1730551,"reputation":13017,"user_id":1584255,"accept_rate":65,"display_name":"The Coordinator"},"score":0,"creation_date":1480122260,"post_id":7250187,"comment_id":68848122,"body_markdown":"Why would it loop with an empty file?","body":"Why would it loop with an empty file?"},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1491347257,"post_id":7250187,"comment_id":73509490,"body_markdown":"The conditions on the second loop don&#39;t terminate if there are no lines, or indeed fewer than `maxLines` lines.","body":"The conditions on the second loop don&#39;t terminate if there are no lines, or indeed fewer than <code>maxLines</code> lines."}],"tags":[],"owner":{"account_id":32164,"reputation":4559,"user_id":88916,"accept_rate":72,"display_name":"ra9r"},"comment_count":4,"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1314740684,"creation_date":1314740684,"answer_id":7250187,"question_id":4121678,"body_markdown":"Here is the best way I&#39;ve found to do it.  Simple and pretty fast and memory efficient.\r\n\r\n\tpublic static void tail(File src, OutputStream out, int maxLines) throws FileNotFoundException, IOException {\r\n\t\tBufferedReader reader = new BufferedReader(new FileReader(src));\r\n\t\tString[] lines = new String[maxLines];\r\n\t\tint lastNdx = 0;\r\n\t\tfor (String line=reader.readLine(); line != null; line=reader.readLine()) {\r\n\t\t\tif (lastNdx == lines.length) {\r\n\t\t\t\tlastNdx = 0;\r\n\t\t\t}\r\n\t\t\tlines[lastNdx++] = line;\r\n\t\t}\r\n\t\t\r\n\t\tOutputStreamWriter writer = new OutputStreamWriter(out);\r\n\t\tfor (int ndx=lastNdx; ndx != lastNdx-1; ndx++) {\r\n\t\t\tif (ndx == lines.length) {\r\n\t\t\t\tndx = 0;\r\n\t\t\t}\r\n\t\t\twriter.write(lines[ndx]);\r\n\t\t\twriter.write(&quot;\\n&quot;);\r\n\t\t}\r\n\t\t\r\n\t\twriter.flush();\r\n\t}","title":"Java : Read last n lines of a HUGE file","body":"<p>Here is the best way I've found to do it.  Simple and pretty fast and memory efficient.</p>\n\n<pre><code>public static void tail(File src, OutputStream out, int maxLines) throws FileNotFoundException, IOException {\n    BufferedReader reader = new BufferedReader(new FileReader(src));\n    String[] lines = new String[maxLines];\n    int lastNdx = 0;\n    for (String line=reader.readLine(); line != null; line=reader.readLine()) {\n        if (lastNdx == lines.length) {\n            lastNdx = 0;\n        }\n        lines[lastNdx++] = line;\n    }\n\n    OutputStreamWriter writer = new OutputStreamWriter(out);\n    for (int ndx=lastNdx; ndx != lastNdx-1; ndx++) {\n        if (ndx == lines.length) {\n            ndx = 0;\n        }\n        writer.write(lines[ndx]);\n        writer.write(\"\\n\");\n    }\n\n    writer.flush();\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":107907,"reputation":40512,"user_id":286685,"accept_rate":56,"display_name":"Stijn de Witt"},"score":0,"creation_date":1407439822,"post_id":14950114,"comment_id":39226959,"body_markdown":"I checked out the class you mentioned, and though it can indeed be used to keep track of the last 5 lines in a file, I think the challenge here is not to keep track of the lines, but to find the point in the file where to start reading, and how to get to that point.","body":"I checked out the class you mentioned, and though it can indeed be used to keep track of the last 5 lines in a file, I think the challenge here is not to keep track of the lines, but to find the point in the file where to start reading, and how to get to that point."}],"tags":[],"owner":{"account_id":1324147,"reputation":71,"user_id":1269357,"display_name":"ruth542"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1407439710,"creation_date":1361249851,"answer_id":14950114,"question_id":4121678,"body_markdown":"[CircularFifoBuffer][1] from apache commons . answer from a similar question at https://stackoverflow.com/questions/9465269/how-to-read-last-5-lines-of-a-txt-file-into-java\r\n\r\n\r\n  [1]: http://commons.apache.org/proper/commons-collections/javadocs/api-3.2.1/org/apache/commons/collections/buffer/CircularFifoBuffer.html\r\n\r\nNote that in Apache Commons Collections 4 this class seems to have been renamed to [CircularFifoQueue](http://commons.apache.org/proper/commons-collections/javadocs/api-release/org/apache/commons/collections4/queue/CircularFifoQueue.html)","title":"Java : Read last n lines of a HUGE file","body":"<p><a href=\"http://commons.apache.org/proper/commons-collections/javadocs/api-3.2.1/org/apache/commons/collections/buffer/CircularFifoBuffer.html\" rel=\"nofollow noreferrer\">CircularFifoBuffer</a> from apache commons . answer from a similar question at <a href=\"https://stackoverflow.com/questions/9465269/how-to-read-last-5-lines-of-a-txt-file-into-java\">How to read last 5 lines of a .txt file into java</a></p>\n\n<p>Note that in Apache Commons Collections 4 this class seems to have been renamed to <a href=\"http://commons.apache.org/proper/commons-collections/javadocs/api-release/org/apache/commons/collections4/queue/CircularFifoQueue.html\" rel=\"nofollow noreferrer\">CircularFifoQueue</a></p>\n"},{"comments":[{"owner":{"account_id":60171,"reputation":115485,"user_id":179850,"accept_rate":100,"display_name":"Gray"},"score":6,"creation_date":1383595956,"post_id":18873496,"comment_id":29394134,"body_markdown":"Exec&#39;ing out to `tail` can be a very expensive proposition in itself depending on how much memory you have.  And it is also Unix specific.","body":"Exec&#39;ing out to <code>tail</code> can be a very expensive proposition in itself depending on how much memory you have.  And it is also Unix specific."},{"owner":{"account_id":411444,"reputation":2070,"user_id":783890,"accept_rate":67,"display_name":"shaILU"},"score":0,"creation_date":1600197004,"post_id":18873496,"comment_id":113010477,"body_markdown":"Not a generic solution.  Similar to tail there could be multiple utilities that can be used.  This is not what asked in question.","body":"Not a generic solution.  Similar to tail there could be multiple utilities that can be used.  This is not what asked in question."}],"tags":[],"owner":{"account_id":1055081,"reputation":331,"user_id":1057995,"display_name":"Luca"},"comment_count":2,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1379510754,"creation_date":1379510754,"answer_id":18873496,"question_id":4121678,"body_markdown":"I found `RandomAccessFile` and other Buffer Reader classes too slow for me. Nothing can be faster than a `tail -&lt;#lines&gt;`. So this it was the best solution for me.\r\n\r\n    public String getLastNLogLines(File file, int nLines) {\r\n        StringBuilder s = new StringBuilder();\r\n        try {\r\n            Process p = Runtime.getRuntime().exec(&quot;tail -&quot;+nLines+&quot; &quot;+file);\r\n            java.io.BufferedReader input = new java.io.BufferedReader(new java.io.InputStreamReader(p.getInputStream()));\r\n            String line = null;\r\n        //Here we first read the next line into the variable\r\n        //line and then check for the EOF condition, which\r\n        //is the return value of null\r\n        while((line = input.readLine()) != null){\r\n                s.append(line+&#39;\\n&#39;);\r\n            }\r\n        } catch (java.io.IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n        return s.toString();\r\n    }\r\n\r\n","title":"Java : Read last n lines of a HUGE file","body":"<p>I found <code>RandomAccessFile</code> and other Buffer Reader classes too slow for me. Nothing can be faster than a <code>tail -&lt;#lines&gt;</code>. So this it was the best solution for me.</p>\n\n<pre><code>public String getLastNLogLines(File file, int nLines) {\n    StringBuilder s = new StringBuilder();\n    try {\n        Process p = Runtime.getRuntime().exec(\"tail -\"+nLines+\" \"+file);\n        java.io.BufferedReader input = new java.io.BufferedReader(new java.io.InputStreamReader(p.getInputStream()));\n        String line = null;\n    //Here we first read the next line into the variable\n    //line and then check for the EOF condition, which\n    //is the return value of null\n    while((line = input.readLine()) != null){\n            s.append(line+'\\n');\n        }\n    } catch (java.io.IOException e) {\n        e.printStackTrace();\n    }\n    return s.toString();\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":126388,"reputation":897,"user_id":1422794,"display_name":"aapierce"},"score":6,"creation_date":1450910567,"post_id":25621031,"comment_id":56631546,"body_markdown":"Caution: Every time you call `readLine()`, the cursor advances. So this code would actually miss every other line because the output from `readLine()` in the `while` statement is not being captured.","body":"Caution: Every time you call <code>readLine()</code>, the cursor advances. So this code would actually miss every other line because the output from <code>readLine()</code> in the <code>while</code> statement is not being captured."},{"owner":{"account_id":471693,"reputation":567,"user_id":879640,"display_name":"vinksharma"},"score":2,"creation_date":1495573870,"post_id":25621031,"comment_id":75307826,"body_markdown":"This code is bit faulty because readLine() is called twice. as mentioned by aapierce. But full points to ReversedLinesFileReader","body":"This code is bit faulty because readLine() is called twice. as mentioned by aapierce. But full points to ReversedLinesFileReader"},{"owner":{"account_id":6160770,"reputation":1423,"user_id":4802448,"accept_rate":100,"display_name":"Daniel Eisenreich"},"score":4,"creation_date":1541493408,"post_id":25621031,"comment_id":93226482,"body_markdown":"@aapierce The comments from you and vinksharma are outdated, right? The editing from Mise solved the problem I guess.. It&#39;s a little bit confusing when the comments doesn&#39;t comply to the current version of the post itself.","body":"@aapierce The comments from you and vinksharma are outdated, right? The editing from Mise solved the problem I guess.. It&#39;s a little bit confusing when the comments doesn&#39;t comply to the current version of the post itself."},{"owner":{"account_id":126388,"reputation":897,"user_id":1422794,"display_name":"aapierce"},"score":0,"creation_date":1541517640,"post_id":25621031,"comment_id":93239473,"body_markdown":"@DanielEisenreich Yeah, it looks like the answer was edited since I added my comment 3 years ago. It&#39;s not obvious to me how to edit my comment now. Sorry!","body":"@DanielEisenreich Yeah, it looks like the answer was edited since I added my comment 3 years ago. It&#39;s not obvious to me how to edit my comment now. Sorry!"}],"tags":[],"owner":{"account_id":4649589,"reputation":605,"user_id":3766825,"display_name":"akki_java"},"comment_count":4,"down_vote_count":0,"up_vote_count":34,"is_accepted":false,"score":34,"last_activity_date":1524107639,"creation_date":1409653098,"answer_id":25621031,"question_id":4121678,"body_markdown":"I found it the simplest way to do by using [`ReversedLinesFileReader`][1] from [apache commons-io][2] api.\r\nThis method will give you the line from bottom to top of a file and you can specify `n_lines` value to specify the number of line.  \r\n\r\n    import org.apache.commons.io.input.ReversedLinesFileReader;\r\n      \r\n    \r\n    File file = new File(&quot;D:\\\\file_name.xml&quot;);\r\n    int n_lines = 10;\r\n    int counter = 0; \r\n    ReversedLinesFileReader object = new ReversedLinesFileReader(file);\r\n    while(counter &lt; n_lines) {\r\n        System.out.println(object.readLine());\r\n        counter++;\r\n    }\r\n\r\n\r\n  [1]: https://commons.apache.org/proper/commons-io/apidocs/org/apache/commons/io/input/ReversedLinesFileReader.html\r\n  [2]: https://commons.apache.org/proper/commons-io/download_io.cgi","title":"Java : Read last n lines of a HUGE file","body":"<p>I found it the simplest way to do by using <a href=\"https://commons.apache.org/proper/commons-io/apidocs/org/apache/commons/io/input/ReversedLinesFileReader.html\" rel=\"noreferrer\"><code>ReversedLinesFileReader</code></a> from <a href=\"https://commons.apache.org/proper/commons-io/download_io.cgi\" rel=\"noreferrer\">apache commons-io</a> api.\nThis method will give you the line from bottom to top of a file and you can specify <code>n_lines</code> value to specify the number of line.  </p>\n\n<pre><code>import org.apache.commons.io.input.ReversedLinesFileReader;\n\n\nFile file = new File(\"D:\\\\file_name.xml\");\nint n_lines = 10;\nint counter = 0; \nReversedLinesFileReader object = new ReversedLinesFileReader(file);\nwhile(counter &lt; n_lines) {\n    System.out.println(object.readLine());\n    counter++;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2552324,"reputation":1621,"user_id":2215858,"display_name":"Wisienkas"},"score":0,"creation_date":1544610088,"post_id":46580765,"comment_id":94334198,"body_markdown":"Why was this comment downvoted without a comment? I believe this very much gives the correct and best answer to the question","body":"Why was this comment downvoted without a comment? I believe this very much gives the correct and best answer to the question"},{"owner":{"account_id":1858717,"reputation":119,"user_id":1683759,"accept_rate":80,"display_name":"RakeshS"},"score":0,"creation_date":1553164821,"post_id":46580765,"comment_id":97286931,"body_markdown":"@Wisienkas because there is no information about the class ReversedLinesFileReader. This class is not part of standard jdk.","body":"@Wisienkas because there is no information about the class ReversedLinesFileReader. This class is not part of standard jdk."},{"owner":{"account_id":2552324,"reputation":1621,"user_id":2215858,"display_name":"Wisienkas"},"score":0,"creation_date":1553178339,"post_id":46580765,"comment_id":97295100,"body_markdown":"Hi @RakeshS that is right. It is part of Apache Commons IO.","body":"Hi @RakeshS that is right. It is part of Apache Commons IO."},{"owner":{"account_id":299846,"reputation":6993,"user_id":606662,"accept_rate":72,"display_name":"Markus Pscheidt"},"score":0,"creation_date":1646500212,"post_id":46580765,"comment_id":126140931,"body_markdown":"Note that `result` holds the lines in reverse order","body":"Note that <code>result</code> holds the lines in reverse order"}],"tags":[],"owner":{"account_id":10344139,"reputation":348,"user_id":7629612,"display_name":"Torsten Simon"},"comment_count":4,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1553178956,"creation_date":1507190815,"answer_id":46580765,"question_id":4121678,"body_markdown":"The `ReversedLinesFileReader` can be found in the [Apache Commons IO][1] java library. \r\n\r\n        int n_lines = 1000;\r\n\t\tReversedLinesFileReader object = new ReversedLinesFileReader(new File(path));\r\n\t\tString result=&quot;&quot;;\r\n\t\tfor(int i=0;i&lt;n_lines;i++){\r\n\t\t\tString line=object.readLine();\r\n\t\t\tif(line==null)\r\n\t\t\t\tbreak;\r\n\t\t\tresult+=line;\r\n\t\t}\r\n\t\treturn result;\r\n\r\n\r\n  [1]: https://commons.apache.org/proper/commons-io/","title":"Java : Read last n lines of a HUGE file","body":"<p>The <code>ReversedLinesFileReader</code> can be found in the <a href=\"https://commons.apache.org/proper/commons-io/\" rel=\"noreferrer\">Apache Commons IO</a> java library. </p>\n\n<pre><code>    int n_lines = 1000;\n    ReversedLinesFileReader object = new ReversedLinesFileReader(new File(path));\n    String result=\"\";\n    for(int i=0;i&lt;n_lines;i++){\n        String line=object.readLine();\n        if(line==null)\n            break;\n        result+=line;\n    }\n    return result;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10122865,"reputation":23,"user_id":7479216,"display_name":"pocket"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1513536042,"creation_date":1513165902,"answer_id":47792341,"question_id":4121678,"body_markdown":"I had similar problem, but I don&#39;t understood to another solutions.\r\n\r\nI used this. I hope thats simple code.\r\n\r\n    \r\n    // String filePathName = (direction and file name).\r\n    File f = new File(filePathName);\r\n    long fileLength = f.length(); // Take size of file [bites].\r\n    long fileLength_toRead = 0;\r\n    if (fileLength &gt; 2000) {\r\n    \t// My file content is a table, I know one row has about e.g. 100 bites / characters. \r\n    \t// I used 1000 bites before file end to point where start read.\r\n    \t// If you don&#39;t know line length, use @paxdiablo advice.\r\n    \tfileLength_toRead = fileLength - 1000;\r\n    }\r\n    try (RandomAccessFile raf = new RandomAccessFile(filePathName, &quot;r&quot;)) { // This row manage open and close file.\r\n    \traf.seek(fileLength_toRead); // File will begin read at this bite. \r\n    \tString rowInFile = raf.readLine(); // First readed line usualy is not whole, I needn&#39;t it.\r\n    \trowInFile = raf.readLine();\r\n    \twhile (rowInFile != null) {\r\n    \t\t// Here I can readed lines (rowInFile) add to String[] array or ArriyList&lt;String&gt;.\r\n    \t\t// Later I can work with rows from array - last row is sometimes empty, etc.\r\n    \t\trowInFile = raf.readLine();\r\n    \t}\r\n    }\r\n    catch (IOException e) {\r\n    \t//\r\n    }","title":"Java : Read last n lines of a HUGE file","body":"<p>I had similar problem, but I don't understood to another solutions.</p>\n\n<p>I used this. I hope thats simple code.</p>\n\n<pre><code>// String filePathName = (direction and file name).\nFile f = new File(filePathName);\nlong fileLength = f.length(); // Take size of file [bites].\nlong fileLength_toRead = 0;\nif (fileLength &gt; 2000) {\n    // My file content is a table, I know one row has about e.g. 100 bites / characters. \n    // I used 1000 bites before file end to point where start read.\n    // If you don't know line length, use @paxdiablo advice.\n    fileLength_toRead = fileLength - 1000;\n}\ntry (RandomAccessFile raf = new RandomAccessFile(filePathName, \"r\")) { // This row manage open and close file.\n    raf.seek(fileLength_toRead); // File will begin read at this bite. \n    String rowInFile = raf.readLine(); // First readed line usualy is not whole, I needn't it.\n    rowInFile = raf.readLine();\n    while (rowInFile != null) {\n        // Here I can readed lines (rowInFile) add to String[] array or ArriyList&lt;String&gt;.\n        // Later I can work with rows from array - last row is sometimes empty, etc.\n        rowInFile = raf.readLine();\n    }\n}\ncatch (IOException e) {\n    //\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3407663,"reputation":171,"user_id":2858355,"accept_rate":0,"display_name":"user11016"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1540229622,"creation_date":1540229622,"answer_id":52934783,"question_id":4121678,"body_markdown":"Here is the working for this.\r\n\r\n        private static void printLastNLines(String filePath, int n) {\r\n        File file = new File(filePath);\r\n        StringBuilder builder = new StringBuilder();\r\n        try {\r\n            RandomAccessFile randomAccessFile = new RandomAccessFile(filePath, &quot;r&quot;);\r\n            long pos = file.length() - 1;\r\n            randomAccessFile.seek(pos);\r\n\r\n            for (long i = pos - 1; i &gt;= 0; i--) {\r\n                randomAccessFile.seek(i);\r\n                char c = (char) randomAccessFile.read();\r\n                if (c == &#39;\\n&#39;) {\r\n                    n--;\r\n                    if (n == 0) {\r\n                        break;\r\n                    }\r\n                }\r\n                builder.append(c);\r\n            }\r\n            builder.reverse();\r\n            System.out.println(builder.toString());\r\n        } catch (FileNotFoundException e) {\r\n            e.printStackTrace();\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }","title":"Java : Read last n lines of a HUGE file","body":"<p>Here is the working for this.</p>\n\n<pre><code>    private static void printLastNLines(String filePath, int n) {\n    File file = new File(filePath);\n    StringBuilder builder = new StringBuilder();\n    try {\n        RandomAccessFile randomAccessFile = new RandomAccessFile(filePath, \"r\");\n        long pos = file.length() - 1;\n        randomAccessFile.seek(pos);\n\n        for (long i = pos - 1; i &gt;= 0; i--) {\n            randomAccessFile.seek(i);\n            char c = (char) randomAccessFile.read();\n            if (c == '\\n') {\n                n--;\n                if (n == 0) {\n                    break;\n                }\n            }\n            builder.append(c);\n        }\n        builder.reverse();\n        System.out.println(builder.toString());\n    } catch (FileNotFoundException e) {\n        e.printStackTrace();\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1651580310,"post_id":57677655,"comment_id":127392478,"body_markdown":"I like this approach but there are problems. The most important: you can&#39;t assume what `randomAccessFile.read();` returns is castable as a valid char. e.g. in UTF-8 encoding, the Euro symbol would be encoded in three bytes as `0xe2, 0x82, 0xac`. This means you need to read bytes, reverse them and *then* encode them. I&#39;ll try to post a reworking below","body":"I like this approach but there are problems. The most important: you can&#39;t assume what <code>randomAccessFile.read();</code> returns is castable as a valid char. e.g. in UTF-8 encoding, the Euro symbol would be encoded in three bytes as <code>0xe2, 0x82, 0xac</code>. This means you need to read bytes, reverse them and <i>then</i> encode them. I&#39;ll try to post a reworking below"}],"tags":[],"owner":{"account_id":9051102,"reputation":136,"user_id":6741224,"display_name":"Uday Kumar"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1566918476,"creation_date":1566918476,"answer_id":57677655,"question_id":4121678,"body_markdown":"```\r\npackage com.uday;\r\n\r\nimport java.io.File;\r\nimport java.io.RandomAccessFile;\r\n\r\npublic class TailN {\r\n    public static void main(String[] args) throws Exception {\r\n        long startTime = System.currentTimeMillis();\r\n\r\n        TailN tailN = new TailN();\r\n        File file = new File(&quot;/Users/udakkuma/Documents/workspace/uday_cancel_feature/TestOOPS/src/file.txt&quot;);\r\n        tailN.readFromLast(file);\r\n\r\n        System.out.println(&quot;Execution Time : &quot; + (System.currentTimeMillis() - startTime));\r\n\r\n    }\r\n\r\n    public void readFromLast(File file) throws Exception {\r\n        int lines = 3;\r\n        int readLines = 0;\r\n        StringBuilder builder = new StringBuilder();\r\n        try (RandomAccessFile randomAccessFile = new RandomAccessFile(file, &quot;r&quot;)) {\r\n            long fileLength = file.length() - 1;\r\n            // Set the pointer at the last of the file\r\n            randomAccessFile.seek(fileLength);\r\n\r\n            for (long pointer = fileLength; pointer &gt;= 0; pointer--) {\r\n                randomAccessFile.seek(pointer);\r\n                char c;\r\n                // read from the last, one char at the time\r\n                c = (char) randomAccessFile.read();\r\n                // break when end of the line\r\n                if (c == &#39;\\n&#39;) {\r\n                    readLines++;\r\n                    if (readLines == lines)\r\n                        break;\r\n                }\r\n                builder.append(c);\r\n                fileLength = fileLength - pointer;\r\n            }\r\n            // Since line is read from the last so it is in reverse order. Use reverse\r\n            // method to make it correct order\r\n            builder.reverse();\r\n            System.out.println(builder.toString());\r\n        }\r\n\r\n    }\r\n}\r\n```","title":"Java : Read last n lines of a HUGE file","body":"<pre><code>package com.uday;\n\nimport java.io.File;\nimport java.io.RandomAccessFile;\n\npublic class TailN {\n    public static void main(String[] args) throws Exception {\n        long startTime = System.currentTimeMillis();\n\n        TailN tailN = new TailN();\n        File file = new File(\"/Users/udakkuma/Documents/workspace/uday_cancel_feature/TestOOPS/src/file.txt\");\n        tailN.readFromLast(file);\n\n        System.out.println(\"Execution Time : \" + (System.currentTimeMillis() - startTime));\n\n    }\n\n    public void readFromLast(File file) throws Exception {\n        int lines = 3;\n        int readLines = 0;\n        StringBuilder builder = new StringBuilder();\n        try (RandomAccessFile randomAccessFile = new RandomAccessFile(file, \"r\")) {\n            long fileLength = file.length() - 1;\n            // Set the pointer at the last of the file\n            randomAccessFile.seek(fileLength);\n\n            for (long pointer = fileLength; pointer &gt;= 0; pointer--) {\n                randomAccessFile.seek(pointer);\n                char c;\n                // read from the last, one char at the time\n                c = (char) randomAccessFile.read();\n                // break when end of the line\n                if (c == '\\n') {\n                    readLines++;\n                    if (readLines == lines)\n                        break;\n                }\n                builder.append(c);\n                fileLength = fileLength - pointer;\n            }\n            // Since line is read from the last so it is in reverse order. Use reverse\n            // method to make it correct order\n            builder.reverse();\n            System.out.println(builder.toString());\n        }\n\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1651581246,"creation_date":1651580792,"answer_id":72099371,"question_id":4121678,"body_markdown":"[(See commend)][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/4121678/java-read-last-n-lines-of-a-huge-file#comment127392478_57677655\r\n\r\n    public String readFromLast(File file, int howMany) throws IOException {\r\n        int numLinesRead = 0;\r\n        StringBuilder builder = new StringBuilder();\r\n        try (RandomAccessFile randomAccessFile = new RandomAccessFile(file, &quot;r&quot;)) {\r\n            try (ByteArrayOutputStream baos = new ByteArrayOutputStream()) {\r\n                long fileLength = file.length() - 1;\r\n                /*\r\n                 * Set the pointer at the end of the file. If the file is empty, an IOException\r\n                 * will be thrown\r\n                 */\r\n                randomAccessFile.seek(fileLength);\r\n    \r\n                for (long pointer = fileLength; pointer &gt;= 0; pointer--) {\r\n                    randomAccessFile.seek(pointer);\r\n                    byte b = (byte) randomAccessFile.read();\r\n                    if (b == &#39;\\n&#39;) {\r\n                        numLinesRead++;\r\n                        // (Last line often terminated with a line separator)\r\n                        if (numLinesRead == (howMany + 1))\r\n                            break;\r\n                    }\r\n                    baos.write(b);\r\n                    fileLength = fileLength - pointer;\r\n                }\r\n                /*\r\n                 * Since line is read from the last so it is in reverse order. Use reverse\r\n                 * method to make it ordered correctly\r\n                 */\r\n                byte[] a = baos.toByteArray();\r\n                int start = 0;\r\n                int mid = a.length / 2;\r\n                int end = a.length - 1;\r\n    \r\n                while (start &lt; mid) {\r\n                    byte temp = a[end];\r\n                    a[end] = a[start];\r\n                    a[start] = temp;\r\n                    start++;\r\n                    end--;\r\n                }// End while\r\n                return new String(a).trim();\r\n            } // End inner try-with-resources\r\n        } // End outer try-with-resources\r\n    \r\n    } // End method","title":"Java : Read last n lines of a HUGE file","body":"<p><a href=\"https://stackoverflow.com/questions/4121678/java-read-last-n-lines-of-a-huge-file#comment127392478_57677655\">(See commend)</a></p>\n<pre><code>public String readFromLast(File file, int howMany) throws IOException {\n    int numLinesRead = 0;\n    StringBuilder builder = new StringBuilder();\n    try (RandomAccessFile randomAccessFile = new RandomAccessFile(file, &quot;r&quot;)) {\n        try (ByteArrayOutputStream baos = new ByteArrayOutputStream()) {\n            long fileLength = file.length() - 1;\n            /*\n             * Set the pointer at the end of the file. If the file is empty, an IOException\n             * will be thrown\n             */\n            randomAccessFile.seek(fileLength);\n\n            for (long pointer = fileLength; pointer &gt;= 0; pointer--) {\n                randomAccessFile.seek(pointer);\n                byte b = (byte) randomAccessFile.read();\n                if (b == '\\n') {\n                    numLinesRead++;\n                    // (Last line often terminated with a line separator)\n                    if (numLinesRead == (howMany + 1))\n                        break;\n                }\n                baos.write(b);\n                fileLength = fileLength - pointer;\n            }\n            /*\n             * Since line is read from the last so it is in reverse order. Use reverse\n             * method to make it ordered correctly\n             */\n            byte[] a = baos.toByteArray();\n            int start = 0;\n            int mid = a.length / 2;\n            int end = a.length - 1;\n\n            while (start &lt; mid) {\n                byte temp = a[end];\n                a[end] = a[start];\n                a[start] = temp;\n                start++;\n                end--;\n            }// End while\n            return new String(a).trim();\n        } // End inner try-with-resources\n    } // End outer try-with-resources\n\n} // End method\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1569634,"reputation":19,"user_id":1457608,"display_name":"Neyyadupakkam Sundarasekaran"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1657652771,"creation_date":1657652771,"answer_id":72957241,"question_id":4121678,"body_markdown":"I tried RandomAccessFile first and it was tedious to read the file backwards, repositioning the file pointer upon every read operation. So, I tried @Luca solution and I got the last few lines of the file as a string in just two lines in a few minutes.\r\n\r\n        InputStream inputStream = Runtime.getRuntime().exec(&quot;tail &quot; + path.toFile()).getInputStream();\r\n        String tail = new BufferedReader(new InputStreamReader(inputStream)).lines().collect(Collectors.joining(System.lineSeparator()));\r\n","title":"Java : Read last n lines of a HUGE file","body":"<p>I tried RandomAccessFile first and it was tedious to read the file backwards, repositioning the file pointer upon every read operation. So, I tried @Luca solution and I got the last few lines of the file as a string in just two lines in a few minutes.</p>\n<pre><code>    InputStream inputStream = Runtime.getRuntime().exec(&quot;tail &quot; + path.toFile()).getInputStream();\n    String tail = new BufferedReader(new InputStreamReader(inputStream)).lines().collect(Collectors.joining(System.lineSeparator()));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3057654,"reputation":5535,"user_id":2590960,"accept_rate":54,"display_name":"grep"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674345347,"creation_date":1674345347,"answer_id":75197432,"question_id":4121678,"body_markdown":"Code is 2 lines only\r\n   \r\n\r\n         // Please specify correct Charset\r\n         ReversedLinesFileReader rlf = new ReversedLinesFileReader(file, StandardCharsets.UTF_8);\r\n\r\n         // read last 2 lines\r\n         System.out.println(rlf.toString(2));\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nGradle:\r\n\r\n    implementation group: &#39;commons-io&#39;, name: &#39;commons-io&#39;, version: &#39;2.11.0&#39;\r\n\r\nMaven:\r\n\r\n       &lt;dependency&gt;\r\n            &lt;groupId&gt;commons-io&lt;/groupId&gt;&lt;artifactId&gt;commons-io&lt;/artifactId&gt;&lt;version&gt;2.11.0&lt;/version&gt;\r\n       &lt;/dependency&gt;\r\n","title":"Java : Read last n lines of a HUGE file","body":"<p>Code is 2 lines only</p>\n<pre><code>     // Please specify correct Charset\n     ReversedLinesFileReader rlf = new ReversedLinesFileReader(file, StandardCharsets.UTF_8);\n\n     // read last 2 lines\n     System.out.println(rlf.toString(2));\n</code></pre>\n<p>Gradle:</p>\n<pre><code>implementation group: 'commons-io', name: 'commons-io', version: '2.11.0'\n</code></pre>\n<p>Maven:</p>\n<pre><code>   &lt;dependency&gt;\n        &lt;groupId&gt;commons-io&lt;/groupId&gt;&lt;artifactId&gt;commons-io&lt;/artifactId&gt;&lt;version&gt;2.11.0&lt;/version&gt;\n   &lt;/dependency&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1256449,"reputation":1131,"user_id":1281217,"accept_rate":100,"display_name":"dzim"},"score":0,"creation_date":1688727257,"post_id":75901523,"comment_id":135115896,"body_markdown":"This actually looks like the best answer to me. It&#39;s simple and doesn&#39;t rely on third party dependencies nor do you have to deal with `RandomAccessFile`. &#128077;","body":"This actually looks like the best answer to me. It&#39;s simple and doesn&#39;t rely on third party dependencies nor do you have to deal with <code>RandomAccessFile</code>. 👍"},{"owner":{"account_id":1256449,"reputation":1131,"user_id":1281217,"accept_rate":100,"display_name":"dzim"},"score":0,"creation_date":1688727661,"post_id":75901523,"comment_id":135115987,"body_markdown":"On a second thought it looks like you still go through all lines from the top to the bottom... Is that really a good idea, when you only need the last lines?","body":"On a second thought it looks like you still go through all lines from the top to the bottom... Is that really a good idea, when you only need the last lines?"},{"owner":{"account_id":223299,"reputation":188,"user_id":1656858,"display_name":"Adrian Bartyczak"},"score":1,"creation_date":1688745514,"post_id":75901523,"comment_id":135119672,"body_markdown":"This is a good point. And it made me curious. So I tested all the RandomAccessFile solutions that read the file in reverse, and found that for a 100,000 line file, when reading the last 90,000 lines, they take about 1,200ms. When I test out my solution, it takes about 50ms. So I would say this is better than RandomAccessFile, but if you really want to read the file in reverse, your best bet would be to use Apache&#39;s ReversedLinesFileReader.","body":"This is a good point. And it made me curious. So I tested all the RandomAccessFile solutions that read the file in reverse, and found that for a 100,000 line file, when reading the last 90,000 lines, they take about 1,200ms. When I test out my solution, it takes about 50ms. So I would say this is better than RandomAccessFile, but if you really want to read the file in reverse, your best bet would be to use Apache&#39;s ReversedLinesFileReader."},{"owner":{"account_id":223299,"reputation":188,"user_id":1656858,"display_name":"Adrian Bartyczak"},"score":0,"creation_date":1688772176,"post_id":75901523,"comment_id":135123318,"body_markdown":"I just realized that the answer said it&#39;s &quot;20ms slower than Apache&#39;s ReversedLinesFileReader&quot; and &quot;50ms faster than RandomAccessFile&quot;, however, after testing again, I got that it&#39;s about 850ms faster than Apache&#39;s ReversedLinesFileReader and 1,150ms faster than RandomAccessFile. Don&#39;t know how my results were so off before.","body":"I just realized that the answer said it&#39;s &quot;20ms slower than Apache&#39;s ReversedLinesFileReader&quot; and &quot;50ms faster than RandomAccessFile&quot;, however, after testing again, I got that it&#39;s about 850ms faster than Apache&#39;s ReversedLinesFileReader and 1,150ms faster than RandomAccessFile. Don&#39;t know how my results were so off before."},{"owner":{"account_id":1256449,"reputation":1131,"user_id":1281217,"accept_rate":100,"display_name":"dzim"},"score":0,"creation_date":1688966768,"post_id":75901523,"comment_id":135140361,"body_markdown":"Taken on a different computer, maybe? You could also use parallel stream. Maybe that could speed up things a bit.\nMy mahor concern would be memory efficiency: You are constantly copying stuff. While the GC might have no problems with it, it seams overkill to basically store all the lines at least once at some point to only keep maybe a small percentage pf them in the end.","body":"Taken on a different computer, maybe? You could also use parallel stream. Maybe that could speed up things a bit. My mahor concern would be memory efficiency: You are constantly copying stuff. While the GC might have no problems with it, it seams overkill to basically store all the lines at least once at some point to only keep maybe a small percentage pf them in the end."}],"tags":[],"owner":{"account_id":223299,"reputation":188,"user_id":1656858,"display_name":"Adrian Bartyczak"},"comment_count":5,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1689117270,"creation_date":1680286133,"answer_id":75901523,"question_id":4121678,"body_markdown":"Here&#39;s one without an Apache dependency, and the results I got when reading the last 90,000 lines from a file with 100,000 lines:\r\n\r\nThis method: 50ms  \r\nApache&#39;s ReversedLinesFileReader: 900ms  \r\nRandomAccessFile (reading in reverse): 1,200ms\r\n\r\n[Original source][1]\r\n\r\n```\r\npublic static String[] getLastNLinesFromFile(String filePath, int numLines) throws IOException {\r\n    try (Stream&lt;String&gt; stream = Files.lines(Paths.get(filePath))) {\r\n        AtomicInteger offset = new AtomicInteger();\r\n        String[] lines = new String[numLines];\r\n        stream.forEach(line -&gt; {\r\n            lines[offset.getAndIncrement() % numLines] = line;\r\n        });\r\n        List&lt;String&gt; list = IntStream.range(offset.get() &lt; numLines ? 0 : offset.get() - numLines, offset.get())\r\n                .mapToObj(idx -&gt; lines[idx % numLines]).collect(Collectors.toList());\r\n        return list.toArray(new String[0]);\r\n    }\r\n}\r\n```\r\n\r\n\r\n  [1]: https://roytuts.com/read-last-n-lines-from-a-file/","title":"Java : Read last n lines of a HUGE file","body":"<p>Here's one without an Apache dependency, and the results I got when reading the last 90,000 lines from a file with 100,000 lines:</p>\n<p>This method: 50ms<br />\nApache's ReversedLinesFileReader: 900ms<br />\nRandomAccessFile (reading in reverse): 1,200ms</p>\n<p><a href=\"https://roytuts.com/read-last-n-lines-from-a-file/\" rel=\"nofollow noreferrer\">Original source</a></p>\n<pre><code>public static String[] getLastNLinesFromFile(String filePath, int numLines) throws IOException {\n    try (Stream&lt;String&gt; stream = Files.lines(Paths.get(filePath))) {\n        AtomicInteger offset = new AtomicInteger();\n        String[] lines = new String[numLines];\n        stream.forEach(line -&gt; {\n            lines[offset.getAndIncrement() % numLines] = line;\n        });\n        List&lt;String&gt; list = IntStream.range(offset.get() &lt; numLines ? 0 : offset.get() - numLines, offset.get())\n                .mapToObj(idx -&gt; lines[idx % numLines]).collect(Collectors.toList());\n        return list.toArray(new String[0]);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":69279,"reputation":645,"user_id":201679,"accept_rate":75,"display_name":"Gaurav Verma"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":62847,"favorite_count":0,"down_vote_count":0,"up_vote_count":41,"accepted_answer_id":4121696,"answer_count":15,"score":41,"last_activity_date":1689117270,"creation_date":1289197049,"question_id":4121678,"body_markdown":"I want to read the last n lines of a very big file without reading the whole file into any buffer/memory area using Java.\r\n\r\nI looked around the JDK APIs and Apache Commons I/O and am not able to locate one which is suitable for this purpose.\r\n\r\nI was thinking of the way tail or less does it in UNIX. I don&#39;t think they load the entire file and then show the last few lines of the file. There should be similar way to do the same in Java too.","title":"Java : Read last n lines of a HUGE file","body":"<p>I want to read the last n lines of a very big file without reading the whole file into any buffer/memory area using Java.</p>\n\n<p>I looked around the JDK APIs and Apache Commons I/O and am not able to locate one which is suitable for this purpose.</p>\n\n<p>I was thinking of the way tail or less does it in UNIX. I don't think they load the entire file and then show the last few lines of the file. There should be similar way to do the same in Java too.</p>\n"},{"tags":["java","spring","spring-boot","jersey"],"answers":[{"tags":[],"owner":{"account_id":3238653,"reputation":11,"user_id":2732201,"display_name":"user2732201"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1458543304,"creation_date":1458543304,"answer_id":36124807,"question_id":35592239,"body_markdown":"i&#39;m facing this problem too ! don&#39;t forget to copy your clashpath of your .class in main package and spring boot org.springframework package, for example :` -cp ./com/*:./org/*`","title":"Running an exploded spring-boot jar from command line","body":"<p>i'm facing this problem too ! don't forget to copy your clashpath of your .class in main package and spring boot org.springframework package, for example :<code>-cp ./com/*:./org/*</code></p>\n"},{"tags":[],"owner":{"account_id":106037,"reputation":3276,"user_id":282664,"accept_rate":25,"display_name":"GBC"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1591623485,"creation_date":1458605029,"answer_id":36143935,"question_id":35592239,"body_markdown":"I solved this by running:\r\n\r\n``` lang-sh\r\njava -cp /lib/*:/ com.domain.module.Main\r\n```\r\n\r\nRather than:\r\n\r\n``` lang-sh\r\njava -cp /lib/*:/ com/domain/module/Main\r\n```","title":"Running an exploded spring-boot jar from command line","body":"<p>I solved this by running:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>java -cp /lib/*:/ com.domain.module.Main\n</code></pre>\n\n<p>Rather than:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>java -cp /lib/*:/ com/domain/module/Main\n</code></pre>\n"},{"tags":[],"owner":{"account_id":478864,"reputation":1349,"user_id":891203,"accept_rate":80,"display_name":"devdanke"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1689116519,"creation_date":1689116519,"answer_id":76666263,"question_id":35592239,"body_markdown":"In July 2023, with Java 19 and SpringBoot 3.0.6.\r\n\r\nI exploded my SringBoot jar.\r\nThis command line started the app.\r\n\r\n`java -cp &quot;BOOT-INF/lib/*:.&quot; org.springframework.boot.loader.JarLauncher`\r\n`","title":"Running an exploded spring-boot jar from command line","body":"<p>In July 2023, with Java 19 and SpringBoot 3.0.6.</p>\n<p>I exploded my SringBoot jar.\nThis command line started the app.</p>\n<p><code>java -cp &quot;BOOT-INF/lib/*:.&quot; org.springframework.boot.loader.JarLauncher</code>\n`</p>\n"}],"owner":{"account_id":106037,"reputation":3276,"user_id":282664,"accept_rate":25,"display_name":"GBC"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5139,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":36143935,"answer_count":3,"score":6,"last_activity_date":1689116519,"creation_date":1456281511,"question_id":35592239,"body_markdown":"I&#39;m looking to run an exploded spring-boot jar.\r\nCurrently I&#39;m doing\r\n\r\n    jar xf app.jar\r\n    java -cp /lib/*:/ com/domain/module/Main\r\n\r\nwhich seems to begin the app startup, but invariably stops on\r\n\r\n&gt; [restartedMain] INFO  c.a.a.spring.MetricsJersey2Config - Registering InstrumentedResourceMethodApplicationListener for jersey2 with MetricRegistry: com.codahale.metrics.MetricRegistry@43fee23e\r\n\r\nThe next line I&#39;d **usually** expect to see is\r\n\r\n&gt; [restartedMain] INFO  o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService\r\n\r\nRunning the app using\r\n\r\n    java -jar app.jar\r\n\r\nworks fine, but for reasons I need to run it exploded.\r\n\r\nIs there anything I&#39;m missing in trying to run a spring-boot app this way?","title":"Running an exploded spring-boot jar from command line","body":"<p>I'm looking to run an exploded spring-boot jar.\nCurrently I'm doing</p>\n\n<pre><code>jar xf app.jar\njava -cp /lib/*:/ com/domain/module/Main\n</code></pre>\n\n<p>which seems to begin the app startup, but invariably stops on</p>\n\n<blockquote>\n  <p>[restartedMain] INFO  c.a.a.spring.MetricsJersey2Config - Registering InstrumentedResourceMethodApplicationListener for jersey2 with MetricRegistry: com.codahale.metrics.MetricRegistry@43fee23e</p>\n</blockquote>\n\n<p>The next line I'd <strong>usually</strong> expect to see is</p>\n\n<blockquote>\n  <p>[restartedMain] INFO  o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService</p>\n</blockquote>\n\n<p>Running the app using</p>\n\n<pre><code>java -jar app.jar\n</code></pre>\n\n<p>works fine, but for reasons I need to run it exploded.</p>\n\n<p>Is there anything I'm missing in trying to run a spring-boot app this way?</p>\n"},{"tags":["java","grails","integer","number-formatting"],"answers":[{"tags":[],"owner":{"account_id":8241,"reputation":39593,"user_id":14744,"accept_rate":53,"display_name":"Jared"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1297446590,"creation_date":1297446590,"answer_id":4972328,"question_id":4972189,"body_markdown":"Use Integer.parseInt instead of Integer.valueOf","title":"Avoid Grails formatting","body":"<p>Use Integer.parseInt instead of Integer.valueOf</p>\n"},{"tags":[],"owner":{"account_id":155716,"reputation":3560,"user_id":372550,"accept_rate":100,"display_name":"chrislatimer"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1297451357,"creation_date":1297451357,"answer_id":4973017,"question_id":4972189,"body_markdown":"As described in the [Simple Type Converters section of the Grails documentation][1], you can convert incoming parameters from String to int like so:\r\n\r\n    def i = params.int(&#39;id&#39;)\r\n\r\n\r\n  [1]: http://grails.org/doc/latest/guide/6.%20The%20Web%20Layer.html#6.1.12%20Simple%20Type%20Converters","title":"Avoid Grails formatting","body":"<p>As described in the <a href=\"http://grails.org/doc/latest/guide/6.%20The%20Web%20Layer.html#6.1.12%20Simple%20Type%20Converters\" rel=\"nofollow\">Simple Type Converters section of the Grails documentation</a>, you can convert incoming parameters from String to int like so:</p>\n\n<pre><code>def i = params.int('id')\n</code></pre>\n"},{"tags":[],"owner":{"account_id":241879,"reputation":10776,"user_id":512993,"accept_rate":90,"display_name":"Ho&#224;ng Long"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1297526866,"creation_date":1297526866,"answer_id":4979036,"question_id":4972189,"body_markdown":"I often use groovy syntax to do this:\r\n\r\n    def i = (params.id as int)","title":"Avoid Grails formatting","body":"<p>I often use groovy syntax to do this:</p>\n\n<pre><code>def i = (params.id as int)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":303133,"reputation":11,"user_id":611900,"display_name":"Titom"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1298057776,"creation_date":1298057776,"answer_id":5045738,"question_id":4972189,"body_markdown":"I have noted that if I use this:\r\n\r\n&gt; ${fieldValue(bean:myBean,field:&#39;aLongField&#39;)}\r\n\r\nIn a GSP page, it will be formatted and displayed like &quot;1.485&quot; or &quot; 1,485&quot; depending on the current locale.\r\n\r\nIf I use:\r\n\r\n&gt; ${myBean.aLongField }\r\n\r\nor even\r\n\r\n&gt; ${myBean.aLongField.toString() }\r\n\r\nDoes not call NumberFormat and display the raw value.\r\n\r\n","title":"Avoid Grails formatting","body":"<p>I have noted that if I use this:</p>\n\n<blockquote>\n  <p>${fieldValue(bean:myBean,field:'aLongField')}</p>\n</blockquote>\n\n<p>In a GSP page, it will be formatted and displayed like \"1.485\" or \" 1,485\" depending on the current locale.</p>\n\n<p>If I use:</p>\n\n<blockquote>\n  <p>${myBean.aLongField }</p>\n</blockquote>\n\n<p>or even</p>\n\n<blockquote>\n  <p>${myBean.aLongField.toString() }</p>\n</blockquote>\n\n<p>Does not call NumberFormat and display the raw value.</p>\n"}],"owner":{"account_id":24810,"reputation":44154,"user_id":63309,"accept_rate":70,"display_name":"Tom"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":912,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":4,"score":0,"last_activity_date":1689115333,"creation_date":1297445724,"question_id":4972189,"body_markdown":"I&#39;m having an issue with a Grails app.\r\n\r\nOn some occasions, when retrieving an instance with MyObject.get(id), I get this exception:\r\n\r\n`Expected: class java.lang.Integer, got class java.lang.String`\r\n\r\nSo I did this:\r\n\r\n    Integer i = Integer.valueOf(params.id);\r\n    \r\n    MyObject.get(i);\r\n\r\nHowever, the a new problem appears. `Integer#valueOf(String)` seems to return a formatted value, so if `params.id` is greater than 1000, `i` gets a decimal point (e.g `1253` -&gt;`1.253`).\r\n\r\n# Update\r\n\r\nAfter some more research, I&#39;ve found that the value of `params.id` is coming with the decimal dot, even though it&#39;s not present in the query string:\r\n\r\n`http://somesite.com//action?other=33&amp;id=1485`\r\n\r\n`params.id = 1.485 `\r\n\r\nWhy is that decimal point there? Is there any &quot;grailsy&quot; approach to this?\r\n","title":"Avoid Grails formatting","body":"<p>I'm having an issue with a Grails app.</p>\n<p>On some occasions, when retrieving an instance with MyObject.get(id), I get this exception:</p>\n<p><code>Expected: class java.lang.Integer, got class java.lang.String</code></p>\n<p>So I did this:</p>\n<pre><code>Integer i = Integer.valueOf(params.id);\n\nMyObject.get(i);\n</code></pre>\n<p>However, the a new problem appears. <code>Integer#valueOf(String)</code> seems to return a formatted value, so if <code>params.id</code> is greater than 1000, <code>i</code> gets a decimal point (e.g <code>1253</code> -&gt;<code>1.253</code>).</p>\n<h1>Update</h1>\n<p>After some more research, I've found that the value of <code>params.id</code> is coming with the decimal dot, even though it's not present in the query string:</p>\n<p><code>http://somesite.com//action?other=33&amp;id=1485</code></p>\n<p><code>params.id = 1.485 </code></p>\n<p>Why is that decimal point there? Is there any &quot;grailsy&quot; approach to this?</p>\n"},{"tags":["java","xml","xsd","classloader","resource-loading"],"answers":[{"comments":[{"owner":{"account_id":9609012,"reputation":4037,"user_id":7134058,"display_name":"Vadim"},"score":0,"creation_date":1487613314,"post_id":42351028,"comment_id":71853438,"body_markdown":"it is not quite rigth. 1. `getResource()` does not load anything. It gives only URL to resource. `getResourceAsStream()` does. But...for the any XSD processors (i.e. validator) any loaded by class loader resources have no meaning. It will try to load `imports` by opening schema location defined in XSD","body":"it is not quite rigth. 1. <code>getResource()</code> does not load anything. It gives only URL to resource. <code>getResourceAsStream()</code> does. But...for the any XSD processors (i.e. validator) any loaded by class loader resources have no meaning. It will try to load <code>imports</code> by opening schema location defined in XSD"},{"owner":{"account_id":109492,"reputation":107225,"user_id":290085,"display_name":"kjhughes"},"score":0,"creation_date":1487615085,"post_id":42351028,"comment_id":71854407,"body_markdown":"I suppose you&#39;re right that my answer would have been more appropriate for `getResourceAsStream()`.","body":"I suppose you&#39;re right that my answer would have been more appropriate for <code>getResourceAsStream()</code>."},{"owner":{"account_id":9609012,"reputation":4037,"user_id":7134058,"display_name":"Vadim"},"score":0,"creation_date":1487615985,"post_id":42351028,"comment_id":71854849,"body_markdown":"Yes. I always mess with them. :-) `getResource()` is not a logical name to get only URL. First though is that it gives a resource it-self...","body":"Yes. I always mess with them. :-) <code>getResource()</code> is not a logical name to get only URL. First though is that it gives a resource it-self..."}],"tags":[],"owner":{"account_id":109492,"reputation":107225,"user_id":290085,"display_name":"kjhughes"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1487612328,"creation_date":1487612328,"answer_id":42351028,"question_id":42350993,"body_markdown":"No, you&#39;ll have to load the imported XSDs explicitly because `getResource()` has no knowledge of XSD semantics -- it&#39;s operating at the resource/file level, not the XSD level.","title":"Do XSD imports load automatically on resource loading?","body":"<p>No, you'll have to load the imported XSDs explicitly because <code>getResource()</code> has no knowledge of XSD semantics -- it's operating at the resource/file level, not the XSD level.</p>\n"},{"tags":[],"owner":{"account_id":9609012,"reputation":4037,"user_id":7134058,"display_name":"Vadim"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1487613386,"creation_date":1487613028,"answer_id":42351224,"question_id":42350993,"body_markdown":"Because when you use `getClass().getClassLoader().getResource(&quot;test.xsd&quot;);` you do not actually load `test.xsd`, but only get URL to it you do not need to do anything else.\r\n\r\nXSD `import` has a meaning only to appropriate tools. As example validator.\r\n\r\nSo, when you pass schema location to validator it can be absolute path, relative path to current working directory or URL.\r\n\r\nThen when validator processes XSD it tries to get `imports` same way - absolute path, relative to the `test.xsd` schema location or URL as it defined in `test.xsd`.","title":"Do XSD imports load automatically on resource loading?","body":"<p>Because when you use <code>getClass().getClassLoader().getResource(\"test.xsd\");</code> you do not actually load <code>test.xsd</code>, but only get URL to it you do not need to do anything else.</p>\n\n<p>XSD <code>import</code> has a meaning only to appropriate tools. As example validator.</p>\n\n<p>So, when you pass schema location to validator it can be absolute path, relative path to current working directory or URL.</p>\n\n<p>Then when validator processes XSD it tries to get <code>imports</code> same way - absolute path, relative to the <code>test.xsd</code> schema location or URL as it defined in <code>test.xsd</code>.</p>\n"},{"tags":[],"owner":{"account_id":16419918,"reputation":2129,"user_id":11861378,"display_name":"Ad&#225;n Escobar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689115305,"creation_date":1689115305,"answer_id":76666187,"question_id":42350993,"body_markdown":"in case that you want to implement an xml validator with xsd resources, you need create a custom LSResourceResolver\r\n\r\nfor the example: considering that I&#39;m loading a base.xsd that imports &quot;my_complex.xsd&quot;,&quot;my_types.xsd&quot;\r\n\r\n\r\n    class LSInputImpl implements LSInput {\r\n            private byte[] bytes;\r\n            private String publicId; \r\n            private String systemId;\r\n            private String baseURI;\r\n    ...\r\n    }\r\n    class SchemaResourceResolver implements LSResourceResolver{\r\n        public static List&lt;String&gt; schemas = Arrays.asList(&quot;my_complex.xsd&quot;,&quot;my_types.xsd&quot;);\r\n    \r\n        @Override\r\n        public LSInput resolveResource(String type, String namespaceURI, String publicId, String systemId,String baseURI) {\r\n            if(schemas.contains(systemId)){\r\n                    LSInputImpl input = new LSInputImpl();\r\n                InputStream in = UtilFile.resourceInputStream(&quot;relative/resource/path/&quot;+systemId);\r\n                input.setByteStream(in);\r\n                input.setSystemId(systemId);\r\n                input.setPublicId(publicId);\r\n                input.setBaseURI(baseURI);\r\n    \r\n                return input;\r\n            }\r\n            return null;\r\n        }\r\n    }\r\n    \r\n    public class XmlValidator {\r\n    \r\n    \r\n        public static boolean validateSchema(InputStream xsd,InputStream xml ){\r\n            try {\r\n                // Create a SchemaFactory and specify XML schema language\r\n                SchemaFactory factory = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);\r\n    \r\n                // Set the custom resource resolver\r\n                factory.setResourceResolver(new SchemaResourceResolver());\r\n                \r\n                // Load the schema from file\r\n                Schema schema = factory.newSchema(new StreamSource(xsd));\r\n    \r\n                // Create a Validator instance from the schema\r\n                Validator validator = schema.newValidator();\r\n    \r\n                // Create a Source from the XML string\r\n                Source source = new StreamSource(xml);\r\n    \r\n                // Perform the validation\r\n                validator.validate(source);\r\n    \r\n                // If no exception is thrown, the XML is valid\r\n                System.out.println(&quot;XML is valid.&quot;);\r\n                return true;\r\n            } catch (SAXException e) {\r\n                System.out.println(&quot;XML is not valid: &quot; + e.getMessage());\r\n            } catch (Exception e) {\r\n                System.out.println(&quot;Error during XML validation: &quot; + e.getMessage());\r\n            }\r\n            return false;\r\n        }\r\n        public static void main(String[] args) {\r\n    \r\n            try {\r\n                InputStream xsd = UtilFile.resourceInputStream(&quot;relative/resource/path/base.xsd&quot;);\r\n                InputStream xml = UtilFile.loadFile(&quot;/samples/test.xml&quot;);\r\n                validateSchema(xsd, xml);\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n\r\n\r\n\r\nfor LSInputImpl it is important to transform byteStream to bytes[] for his multiples reads, if not you get the error: unexpected end of file, because input stream is already read \r\n","title":"Do XSD imports load automatically on resource loading?","body":"<p>in case that you want to implement an xml validator with xsd resources, you need create a custom LSResourceResolver</p>\n<p>for the example: considering that I'm loading a base.xsd that imports &quot;my_complex.xsd&quot;,&quot;my_types.xsd&quot;</p>\n<pre><code>class LSInputImpl implements LSInput {\n        private byte[] bytes;\n        private String publicId; \n        private String systemId;\n        private String baseURI;\n...\n}\nclass SchemaResourceResolver implements LSResourceResolver{\n    public static List&lt;String&gt; schemas = Arrays.asList(&quot;my_complex.xsd&quot;,&quot;my_types.xsd&quot;);\n\n    @Override\n    public LSInput resolveResource(String type, String namespaceURI, String publicId, String systemId,String baseURI) {\n        if(schemas.contains(systemId)){\n                LSInputImpl input = new LSInputImpl();\n            InputStream in = UtilFile.resourceInputStream(&quot;relative/resource/path/&quot;+systemId);\n            input.setByteStream(in);\n            input.setSystemId(systemId);\n            input.setPublicId(publicId);\n            input.setBaseURI(baseURI);\n\n            return input;\n        }\n        return null;\n    }\n}\n\npublic class XmlValidator {\n\n\n    public static boolean validateSchema(InputStream xsd,InputStream xml ){\n        try {\n            // Create a SchemaFactory and specify XML schema language\n            SchemaFactory factory = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);\n\n            // Set the custom resource resolver\n            factory.setResourceResolver(new SchemaResourceResolver());\n            \n            // Load the schema from file\n            Schema schema = factory.newSchema(new StreamSource(xsd));\n\n            // Create a Validator instance from the schema\n            Validator validator = schema.newValidator();\n\n            // Create a Source from the XML string\n            Source source = new StreamSource(xml);\n\n            // Perform the validation\n            validator.validate(source);\n\n            // If no exception is thrown, the XML is valid\n            System.out.println(&quot;XML is valid.&quot;);\n            return true;\n        } catch (SAXException e) {\n            System.out.println(&quot;XML is not valid: &quot; + e.getMessage());\n        } catch (Exception e) {\n            System.out.println(&quot;Error during XML validation: &quot; + e.getMessage());\n        }\n        return false;\n    }\n    public static void main(String[] args) {\n\n        try {\n            InputStream xsd = UtilFile.resourceInputStream(&quot;relative/resource/path/base.xsd&quot;);\n            InputStream xml = UtilFile.loadFile(&quot;/samples/test.xml&quot;);\n            validateSchema(xsd, xml);\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n</code></pre>\n<p>for LSInputImpl it is important to transform byteStream to bytes[] for his multiples reads, if not you get the error: unexpected end of file, because input stream is already read</p>\n"}],"owner":{"account_id":992522,"reputation":915,"user_id":1009380,"accept_rate":76,"display_name":"curious"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":401,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1689115305,"creation_date":1487612212,"question_id":42350993,"body_markdown":"I am using below snippets to make a Schema object inside static block:\r\n\r\n    URL url = getClass().getClassLoader().getResource(&quot;test.xsd&quot;);\r\n\r\nand test.xsd is importing three other XSD file,\r\n\r\nMy question is will the imports be available when reference to them will be made (like when validating) , or do I have to load the imports specifically by making URL object.","title":"Do XSD imports load automatically on resource loading?","body":"<p>I am using below snippets to make a Schema object inside static block:</p>\n\n<pre><code>URL url = getClass().getClassLoader().getResource(\"test.xsd\");\n</code></pre>\n\n<p>and test.xsd is importing three other XSD file,</p>\n\n<p>My question is will the imports be available when reference to them will be made (like when validating) , or do I have to load the imports specifically by making URL object.</p>\n"},{"tags":["java","spring-boot","handlebars.java"],"answers":[{"comments":[{"owner":{"account_id":1539800,"reputation":1426,"user_id":3169021,"display_name":"swe"},"score":0,"creation_date":1699260494,"post_id":62428274,"comment_id":136504424,"body_markdown":"This sounds very nice. BUT: It is not plain handlebars.js!\n\nSomething similar can be found here: https://jsfiddle.net/DennyLoko/6sR87/","body":"This sounds very nice. BUT: It is not plain handlebars.js!  Something similar can be found here: <a href=\"https://jsfiddle.net/DennyLoko/6sR87/\" rel=\"nofollow noreferrer\">jsfiddle.net/DennyLoko/6sR87</a>"}],"tags":[],"owner":{"account_id":13685666,"reputation":51,"user_id":9874826,"display_name":"selahaddin aksu"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1592394476,"creation_date":1592394476,"answer_id":62428274,"question_id":60732842,"body_markdown":"yes it is possible to use. \r\n\r\n     {{numberFormat number [&quot;format&quot;] [locale=default]}}\r\n\r\nthis is the general use. Format parameters are used as integers, percentages, currency, or the default formatter.\r\n\r\nfor currency \r\n\r\n    {{numberFormat 1.638 &quot;currency&quot;}} \r\n    \r\n    Output: $1.63\r\n\r\n\r\nfor different currency\r\n\r\n    {{numberFormat 1.638 &quot;currency&quot; &quot;de_DE&quot;}}\r\n    Output: 1,63 €\r\n\r\nif you want to use this format for percent\r\n\r\n    {{numberFormat .46 &quot;percent&quot;}}\r\n    Output: 46%","title":"How to do currency formatting in HandleBar in java?","body":"<p>yes it is possible to use. </p>\n\n<pre><code> {{numberFormat number [\"format\"] [locale=default]}}\n</code></pre>\n\n<p>this is the general use. Format parameters are used as integers, percentages, currency, or the default formatter.</p>\n\n<p>for currency </p>\n\n<pre><code>{{numberFormat 1.638 \"currency\"}} \n\nOutput: $1.63\n</code></pre>\n\n<p>for different currency</p>\n\n<pre><code>{{numberFormat 1.638 \"currency\" \"de_DE\"}}\nOutput: 1,63 €\n</code></pre>\n\n<p>if you want to use this format for percent</p>\n\n<pre><code>{{numberFormat .46 \"percent\"}}\nOutput: 46%\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3706907,"reputation":866,"user_id":3085172,"display_name":"MistyDawn"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689115270,"creation_date":1689115270,"answer_id":76666186,"question_id":60732842,"body_markdown":"Handlebar.java supports currency formatting for numerical values only. \r\n\r\nSo, if your data looks like... { &quot;amount&quot; : 32 }&lt;br&gt;\r\n...you&#39;re fine using selahaddin aksu&#39;s answer. \r\n\r\nHowever, if your &#39;number&#39; is actually a string value... { &quot;amount&quot; : &quot;32&quot; }&lt;br&gt;\r\n...you will need to use an additional helper to convert the string to a number datatype first, otherwise your output will return the string value of &quot;currency&quot; instead of a formatted number.\r\n\r\n\r\nYou can use this custom helper...\r\n\r\n    Handlebars.registerHelper(&quot;toNum&quot;, function (n) {\r\n        return parseFloat(n) || +n;\r\n    });\r\n\r\n...like this...\r\n    \r\n    1: &quot;amount&quot;: 27.5,\r\n    2: &quot;amount&quot;: &quot;72.3&quot;,\r\n    3: &quot;amount&quot;: -32,\r\n    4: &quot;amount&quot;: &quot;-23&quot;\r\n\r\n    {{numberFormat (toNum amount1) &quot;currency&quot;}}\r\n\r\n    OUTPUT -\r\n    1: $27.50\r\n    2: $72.30\r\n    3: -$32.00\r\n    4: -$23.00","title":"How to do currency formatting in HandleBar in java?","body":"<p>Handlebar.java supports currency formatting for numerical values only.</p>\n<p>So, if your data looks like... { &quot;amount&quot; : 32 }<br>\n...you're fine using selahaddin aksu's answer.</p>\n<p>However, if your 'number' is actually a string value... { &quot;amount&quot; : &quot;32&quot; }<br>\n...you will need to use an additional helper to convert the string to a number datatype first, otherwise your output will return the string value of &quot;currency&quot; instead of a formatted number.</p>\n<p>You can use this custom helper...</p>\n<pre><code>Handlebars.registerHelper(&quot;toNum&quot;, function (n) {\n    return parseFloat(n) || +n;\n});\n</code></pre>\n<p>...like this...</p>\n<pre><code>1: &quot;amount&quot;: 27.5,\n2: &quot;amount&quot;: &quot;72.3&quot;,\n3: &quot;amount&quot;: -32,\n4: &quot;amount&quot;: &quot;-23&quot;\n\n{{numberFormat (toNum amount1) &quot;currency&quot;}}\n\nOUTPUT -\n1: $27.50\n2: $72.30\n3: -$32.00\n4: -$23.00\n</code></pre>\n"}],"owner":{"account_id":3711737,"reputation":2147,"user_id":3088897,"accept_rate":69,"display_name":"Minisha"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":784,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1689115270,"creation_date":1584499697,"question_id":60732842,"body_markdown":"Does handlebar support currency formatting? Something like below for instance?\r\n\r\n    IDR{{amount}}\r\n    SGD{{amount}}","title":"How to do currency formatting in HandleBar in java?","body":"<p>Does handlebar support currency formatting? Something like below for instance?</p>\n\n<pre><code>IDR{{amount}}\nSGD{{amount}}\n</code></pre>\n"},{"tags":["java","arrays","json","string"],"comments":[{"owner":{"account_id":19672763,"reputation":1776,"user_id":15062361,"display_name":"Pepe N O"},"score":0,"creation_date":1689111153,"post_id":76665856,"comment_id":135166487,"body_markdown":"A tag specifying the language (that looks like C#) is missing. You could access easily to your JSON info using a class to store it, could use https://json2csharp.com/ to generate the code.","body":"A tag specifying the language (that looks like C#) is missing. You could access easily to your JSON info using a class to store it, could use <a href=\"https://json2csharp.com/\" rel=\"nofollow noreferrer\">json2csharp.com</a> to generate the code."},{"owner":{"account_id":10619790,"reputation":9,"user_id":21800744,"display_name":"Sahil__"},"score":0,"creation_date":1689111224,"post_id":76665856,"comment_id":135166502,"body_markdown":"sorry - its java :)","body":"sorry - its java :)"},{"owner":{"account_id":19672763,"reputation":1776,"user_id":15062361,"display_name":"Pepe N O"},"score":0,"creation_date":1689111572,"post_id":76665856,"comment_id":135166556,"body_markdown":"That JSON to Class converter also supports Java, by the way.","body":"That JSON to Class converter also supports Java, by the way."},{"owner":{"account_id":10619790,"reputation":9,"user_id":21800744,"display_name":"Sahil__"},"score":0,"creation_date":1689114815,"post_id":76665856,"comment_id":135166924,"body_markdown":"the converter is not needed, i want to get the values from auth_claims and store it as a list of strings.","body":"the converter is not needed, i want to get the values from auth_claims and store it as a list of strings."}],"answers":[{"comments":[{"owner":{"account_id":10619790,"reputation":9,"user_id":21800744,"display_name":"Sahil__"},"score":1,"creation_date":1689119113,"post_id":76666165,"comment_id":135167328,"body_markdown":"thanks, i realize using the objectmapper.readvValue() with a custom class to represent the data is better.","body":"thanks, i realize using the objectmapper.readvValue() with a custom class to represent the data is better."},{"owner":{"account_id":28695489,"reputation":611,"user_id":21973805,"display_name":"Ahmed Nabil"},"score":0,"creation_date":1689119701,"post_id":76666165,"comment_id":135167358,"body_markdown":"ofcs, if my ans help please consider marking it as accepted","body":"ofcs, if my ans help please consider marking it as accepted"}],"tags":[],"owner":{"account_id":28695489,"reputation":611,"user_id":21973805,"display_name":"Ahmed Nabil"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689114794,"creation_date":1689114794,"answer_id":76666165,"question_id":76665856,"body_markdown":"there is a way of solving it with jackson\r\n```\r\nprivate static List&lt;String&gt; getAuthClaims(String securityContext) throws JsonProcessingException {\r\n    if(securityContext.contains(&quot;auth_claims&quot;)) {\r\n        List&lt;String&gt; ans = new ArrayList&lt;&gt;();\r\n        ObjectMapper objectMapper = new ObjectMapper();\r\n        JsonNode root = objectMapper.readTree(securityContext);\r\n        JsonNode subjectsNode = root.get(&quot;subjects&quot;);\r\n        for(JsonNode subject : subjectsNode) {\r\n            JsonNode authClaims = subject.findValue(&quot;auth_claims&quot;);\r\n            if(authClaims != null) {\r\n                authClaims.forEach(claim -&gt; ans.add(claim.asText()));\r\n            }\r\n        }\r\n        return ans;\r\n    }\r\n    return null;\r\n}\r\n```\r\nthis way would also work with multiple subjects\r\n\r\njackson dependency\r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n    &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n    &lt;version&gt;2.14.2&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n``` \r\n\r\nworth mentioning that it would be cleaner to create classes that represent the json object and use them with mapping, these [tutorials][1] could help with that\r\n\r\n  [1]: https://www.baeldung.com/jackson","title":"Convert String to JSON to find values that may/may not be present","body":"<p>there is a way of solving it with jackson</p>\n<pre><code>private static List&lt;String&gt; getAuthClaims(String securityContext) throws JsonProcessingException {\n    if(securityContext.contains(&quot;auth_claims&quot;)) {\n        List&lt;String&gt; ans = new ArrayList&lt;&gt;();\n        ObjectMapper objectMapper = new ObjectMapper();\n        JsonNode root = objectMapper.readTree(securityContext);\n        JsonNode subjectsNode = root.get(&quot;subjects&quot;);\n        for(JsonNode subject : subjectsNode) {\n            JsonNode authClaims = subject.findValue(&quot;auth_claims&quot;);\n            if(authClaims != null) {\n                authClaims.forEach(claim -&gt; ans.add(claim.asText()));\n            }\n        }\n        return ans;\n    }\n    return null;\n}\n</code></pre>\n<p>this way would also work with multiple subjects</p>\n<p>jackson dependency</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n    &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n    &lt;version&gt;2.14.2&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>worth mentioning that it would be cleaner to create classes that represent the json object and use them with mapping, these <a href=\"https://www.baeldung.com/jackson\" rel=\"nofollow noreferrer\">tutorials</a> could help with that</p>\n"}],"owner":{"account_id":10619790,"reputation":9,"user_id":21800744,"display_name":"Sahil__"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":76666165,"answer_count":1,"score":-2,"last_activity_date":1689114794,"creation_date":1689110722,"question_id":76665856,"body_markdown":"I have the following String:\r\n\r\n    {\r\n      &quot;version&quot;: &quot;1.2&quot;,\r\n      &quot;actor&quot;: {\r\n        &quot;id&quot;: &quot;4381991279&quot;,\r\n        &quot;auth_claims&quot;: [\r\n          &quot;USERNAME&quot;,\r\n          &quot;PASSWORD&quot;\r\n        ],\r\n        &quot;auth_state&quot;: &quot;LOGGEDIN&quot;,\r\n        &quot;account_number&quot;: &quot;4796109829347323858&quot;,\r\n        &quot;encrypted_account_number&quot;: &quot;&quot;,\r\n        &quot;party_id&quot;: &quot;4796109829347323858&quot;,\r\n        &quot;user_type&quot;: &quot;API_CALLER&quot;\r\n      },\r\n      &quot;auth_token&quot;: &quot;****&quot;,\r\n      &quot;auth_token_type&quot;: &quot;SESSION_TOKEN&quot;,\r\n      &quot;global_session_id&quot;: &quot;****&quot;,\r\n      &quot;last_validated&quot;: 1608492054.561,\r\n      &quot;scopes&quot;: [\r\n        &quot;*&quot;\r\n      ],\r\n      &quot;claims&quot;: {\r\n        &quot;subject_payer_id&quot;: &quot;&quot;,\r\n        &quot;application_name&quot;: &quot;&quot;,\r\n        &quot;actor_payer_id&quot;: &quot;&quot;,\r\n        &quot;consent_id&quot;: null\r\n      },\r\n      &quot;edge_authorization&quot;: {\r\n        &quot;policy_decision&quot;: &quot;PERMIT&quot;,\r\n        &quot;obligations&quot;: []\r\n      },\r\n      &quot;subjects&quot;: [\r\n        {\r\n          &quot;subject&quot;: {\r\n            &quot;id&quot;: &quot;4381991279&quot;,\r\n            &quot;auth_claims&quot;: [\r\n              &quot;USERNAME&quot;,\r\n              &quot;PASSWORD&quot;\r\n            ],\r\n            &quot;auth_state&quot;: &quot;LOGGEDIN&quot;,\r\n            &quot;account_number&quot;: &quot;4796109829347323858&quot;,\r\n            &quot;encrypted_account_number&quot;: &quot;&quot;,\r\n            &quot;party_id&quot;: &quot;4796109829347323858&quot;,\r\n            &quot;authenticating_user&quot;: true,\r\n            &quot;user_type&quot;: &quot;CONSUMER&quot;\r\n          },\r\n          &quot;features&quot;: []\r\n        }\r\n      ],\r\n      &quot;signature&quot;: &quot;&quot;\r\n    }\r\n\r\nI want to capture the &quot;auth_claims&quot; array and store its values as a string. I am looking for the &quot;auth_claims&quot; array that is inside the &quot;subjects&quot; array. \r\n\r\nThe code I have is as follows:\r\n\r\n```\r\nprivate static List&lt;String&gt; getAuthClaims(String securityContext) {\r\n        List&lt;String&gt; securityContextClaims = new ArrayList&lt;&gt;();\r\n        if(StringUtils.isNotBlank(securityContext) &amp;&amp; securityContext.contains(&quot;auth_claims&quot;)) {\r\n            JSONObject securityContextJson = new JSONObject(securityContext);\r\n            JSONArray auth_claims = securityContextJson.getJSONArray(&quot;subjects&quot;);\r\n            auth_claims.forEach(claim -&gt; securityContextClaims.add(claim.toString()));\r\n            return securityContextClaims;\r\n        }\r\n        logger.warn(&quot;Security Context Is Empty or Missing Auth Claims&quot;);\r\n        return null;\r\n    }\r\n```\r\n\r\nHowever this would get all of objects inside the subjects and I only want to get the auth claims. How can I skip to only the auth_claims to store those values? ","title":"Convert String to JSON to find values that may/may not be present","body":"<p>I have the following String:</p>\n<pre><code>{\n  &quot;version&quot;: &quot;1.2&quot;,\n  &quot;actor&quot;: {\n    &quot;id&quot;: &quot;4381991279&quot;,\n    &quot;auth_claims&quot;: [\n      &quot;USERNAME&quot;,\n      &quot;PASSWORD&quot;\n    ],\n    &quot;auth_state&quot;: &quot;LOGGEDIN&quot;,\n    &quot;account_number&quot;: &quot;4796109829347323858&quot;,\n    &quot;encrypted_account_number&quot;: &quot;&quot;,\n    &quot;party_id&quot;: &quot;4796109829347323858&quot;,\n    &quot;user_type&quot;: &quot;API_CALLER&quot;\n  },\n  &quot;auth_token&quot;: &quot;****&quot;,\n  &quot;auth_token_type&quot;: &quot;SESSION_TOKEN&quot;,\n  &quot;global_session_id&quot;: &quot;****&quot;,\n  &quot;last_validated&quot;: 1608492054.561,\n  &quot;scopes&quot;: [\n    &quot;*&quot;\n  ],\n  &quot;claims&quot;: {\n    &quot;subject_payer_id&quot;: &quot;&quot;,\n    &quot;application_name&quot;: &quot;&quot;,\n    &quot;actor_payer_id&quot;: &quot;&quot;,\n    &quot;consent_id&quot;: null\n  },\n  &quot;edge_authorization&quot;: {\n    &quot;policy_decision&quot;: &quot;PERMIT&quot;,\n    &quot;obligations&quot;: []\n  },\n  &quot;subjects&quot;: [\n    {\n      &quot;subject&quot;: {\n        &quot;id&quot;: &quot;4381991279&quot;,\n        &quot;auth_claims&quot;: [\n          &quot;USERNAME&quot;,\n          &quot;PASSWORD&quot;\n        ],\n        &quot;auth_state&quot;: &quot;LOGGEDIN&quot;,\n        &quot;account_number&quot;: &quot;4796109829347323858&quot;,\n        &quot;encrypted_account_number&quot;: &quot;&quot;,\n        &quot;party_id&quot;: &quot;4796109829347323858&quot;,\n        &quot;authenticating_user&quot;: true,\n        &quot;user_type&quot;: &quot;CONSUMER&quot;\n      },\n      &quot;features&quot;: []\n    }\n  ],\n  &quot;signature&quot;: &quot;&quot;\n}\n</code></pre>\n<p>I want to capture the &quot;auth_claims&quot; array and store its values as a string. I am looking for the &quot;auth_claims&quot; array that is inside the &quot;subjects&quot; array.</p>\n<p>The code I have is as follows:</p>\n<pre><code>private static List&lt;String&gt; getAuthClaims(String securityContext) {\n        List&lt;String&gt; securityContextClaims = new ArrayList&lt;&gt;();\n        if(StringUtils.isNotBlank(securityContext) &amp;&amp; securityContext.contains(&quot;auth_claims&quot;)) {\n            JSONObject securityContextJson = new JSONObject(securityContext);\n            JSONArray auth_claims = securityContextJson.getJSONArray(&quot;subjects&quot;);\n            auth_claims.forEach(claim -&gt; securityContextClaims.add(claim.toString()));\n            return securityContextClaims;\n        }\n        logger.warn(&quot;Security Context Is Empty or Missing Auth Claims&quot;);\n        return null;\n    }\n</code></pre>\n<p>However this would get all of objects inside the subjects and I only want to get the auth claims. How can I skip to only the auth_claims to store those values?</p>\n"},{"tags":["java","java-stream"],"comments":[{"owner":{"account_id":4433290,"reputation":688,"user_id":3609883,"display_name":"Crammeur"},"score":0,"creation_date":1510178469,"post_id":47190411,"comment_id":81330258,"body_markdown":"Person.getAge()&gt;=0","body":"Person.getAge()&gt;=0"}],"answers":[{"comments":[{"owner":{"account_id":9412803,"reputation":269,"user_id":7001312,"accept_rate":25,"display_name":"Sujan Davangere Sunil"},"score":0,"creation_date":1510178887,"post_id":47190473,"comment_id":81330439,"body_markdown":"I want the zeros to be at the end of list","body":"I want the zeros to be at the end of list"}],"tags":[],"owner":{"account_id":9725613,"reputation":53332,"user_id":7212686,"accept_rate":100,"display_name":"azro"},"comment_count":1,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1510181067,"creation_date":1510178649,"answer_id":47190473,"question_id":47190411,"body_markdown":"You specified a filter `.filter(Person -&gt; Person.getAge()&gt;0)` that does not allow element `equals to 0\r\n\r\n\r\nYou need to change to : `.filter(Person -&gt; Person.getAge()&gt;=0)`\r\n\r\nThen you need to specify a more complex comparator\r\n\r\n\r\n    sortedlist = personList.stream()\r\n                .filter(Person -&gt; Person.getAge() &gt;= 0)\r\n                .sorted((o1, o2) -&gt; {\r\n                    if (o1.getAge() == 0 || o2.getAge() == 0) \r\n                        return Integer.compare(o2.getAge(), o1.getAge());\r\n                    return Integer.compare(o1.getAge(), o2.getAge());\r\n                })\r\n                .collect(Collectors.toList());\r\n\r\n- If one of the `Person&#39;s age` is `0` it&#39;ll compare in reverse way (0 will be the bigger numer =&gt; at the end)\r\n- if none of ages is `0` : classic comparison between `Integers`\r\n\r\n","title":"Sort a list of numbers with all 0&#39;s at the end of result","body":"<p>You specified a filter <code>.filter(Person -&gt; Person.getAge()&gt;0)</code> that does not allow element `equals to 0</p>\n\n<p>You need to change to : <code>.filter(Person -&gt; Person.getAge()&gt;=0)</code></p>\n\n<p>Then you need to specify a more complex comparator</p>\n\n<pre><code>sortedlist = personList.stream()\n            .filter(Person -&gt; Person.getAge() &gt;= 0)\n            .sorted((o1, o2) -&gt; {\n                if (o1.getAge() == 0 || o2.getAge() == 0) \n                    return Integer.compare(o2.getAge(), o1.getAge());\n                return Integer.compare(o1.getAge(), o2.getAge());\n            })\n            .collect(Collectors.toList());\n</code></pre>\n\n<ul>\n<li>If one of the <code>Person's age</code> is <code>0</code> it'll compare in reverse way (0 will be the bigger numer => at the end)</li>\n<li>if none of ages is <code>0</code> : classic comparison between <code>Integers</code></li>\n</ul>\n"},{"comments":[{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":1,"creation_date":1510179585,"post_id":47190604,"comment_id":81330741,"body_markdown":"I&#39;d tend to write `comparing(p -&gt; p &gt; 0).thenComparingInt(p -&gt; p)`","body":"I&#39;d tend to write <code>comparing(p -&gt; p &gt; 0).thenComparingInt(p -&gt; p)</code>"}],"tags":[],"owner":{"account_id":322516,"reputation":121953,"user_id":641955,"accept_rate":72,"display_name":"janos"},"comment_count":1,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1510180192,"creation_date":1510179222,"answer_id":47190604,"question_id":47190411,"body_markdown":"You can make sure that zeros go to the end by writing an appropriate comparator:\r\n\r\n    sortedList = personList.stream()\r\n       .sorted((p1, p2) -&gt; {\r\n          int a = p1.getAge();\r\n          int b = p2.getAge();\r\n          if (a == 0 &amp;&amp; b == 0) return 0;\r\n          if (a == 0) return 1;\r\n          if (b == 0) return -1;\r\n          return Integer.compare(a, b);\r\n       })\r\n       .collect(Collectors.toList());\r\n\r\nOr slightly more compactly:\r\n\r\n    sortedList = personList.stream()\r\n       .sorted((p1, p2) -&gt; {\r\n          int a = p1.getAge();\r\n          int b = p2.getAge();\r\n          return a == 0 || b == 0 ? Integer.compare(b, a) : Integer.compare(a, b);\r\n       })\r\n       .collect(Collectors.toList());\r\n\r\n","title":"Sort a list of numbers with all 0&#39;s at the end of result","body":"<p>You can make sure that zeros go to the end by writing an appropriate comparator:</p>\n\n<pre><code>sortedList = personList.stream()\n   .sorted((p1, p2) -&gt; {\n      int a = p1.getAge();\n      int b = p2.getAge();\n      if (a == 0 &amp;&amp; b == 0) return 0;\n      if (a == 0) return 1;\n      if (b == 0) return -1;\n      return Integer.compare(a, b);\n   })\n   .collect(Collectors.toList());\n</code></pre>\n\n<p>Or slightly more compactly:</p>\n\n<pre><code>sortedList = personList.stream()\n   .sorted((p1, p2) -&gt; {\n      int a = p1.getAge();\n      int b = p2.getAge();\n      return a == 0 || b == 0 ? Integer.compare(b, a) : Integer.compare(a, b);\n   })\n   .collect(Collectors.toList());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7445262,"reputation":1269,"user_id":5661651,"display_name":"Olivier Pellier-Cuit"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1510669248,"creation_date":1510179663,"answer_id":47190701,"question_id":47190411,"body_markdown":"You may concatenate the two stream before building the list:\r\n\r\n    sortedList = Stream&lt;Person&gt;.concat(\r\n       personList.stream().filter(Person -&gt; Person.getAge()&gt;0)\r\n                          .sorted(Comparator.comparingInt(Person::getAge)),\r\n       personList.stream().filter(Person -&gt; Person.getAge()==0))\r\n                          .collect(Collectors.toList());","title":"Sort a list of numbers with all 0&#39;s at the end of result","body":"<p>You may concatenate the two stream before building the list:</p>\n\n<pre><code>sortedList = Stream&lt;Person&gt;.concat(\n   personList.stream().filter(Person -&gt; Person.getAge()&gt;0)\n                      .sorted(Comparator.comparingInt(Person::getAge)),\n   personList.stream().filter(Person -&gt; Person.getAge()==0))\n                      .collect(Collectors.toList());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4563475,"reputation":27298,"user_id":3705127,"accept_rate":52,"display_name":"sprinter"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1689114358,"creation_date":1510183882,"answer_id":47191510,"question_id":47190411,"body_markdown":"A nice simple way to put 0s at the end of the sort is to treat them as large values in the comparator:\r\n\r\n    Comparator.comparingInt(p -&gt; p.getAge() == 0 ? Integer.MAX_VALUE : p.getAge())\r\n\r\nAn arguably more readable approach is &#39;sort by inequality to zero and then by value&#39;:\r\n\r\n    Comparator.comparing(p -&gt; p.getAge() == 0)\r\n        .thenComparing(Comparator.naturalOrder());","title":"Sort a list of numbers with all 0&#39;s at the end of result","body":"<p>A nice simple way to put 0s at the end of the sort is to treat them as large values in the comparator:</p>\n<pre><code>Comparator.comparingInt(p -&gt; p.getAge() == 0 ? Integer.MAX_VALUE : p.getAge())\n</code></pre>\n<p>An arguably more readable approach is 'sort by inequality to zero and then by value':</p>\n<pre><code>Comparator.comparing(p -&gt; p.getAge() == 0)\n    .thenComparing(Comparator.naturalOrder());\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1056871,"reputation":117749,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":0,"creation_date":1510258860,"post_id":47210215,"comment_id":81371000,"body_markdown":"when I first saw unsigned operations in 8, I thought were in the world would I need that extra one bit. There u go.. :)","body":"when I first saw unsigned operations in 8, I thought were in the world would I need that extra one bit. There u go.. :)"}],"tags":[],"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1510256379,"creation_date":1510256379,"answer_id":47210215,"question_id":47190411,"body_markdown":"What you want, is a *rotation*; when you simply sort by age, the elements are in the right order, when you consider the result list to be a ring, so you only want to start the list after the last zero-age value:\r\n\r\n    ┌───────────────────────────┐\r\n    └─ 0  0  2  3  7  8       &lt;─┘\r\n             2  3  7  8  0  0&#160;\r\n&lt;!-- --&gt;\r\n\r\n    sortedList = personList.stream()\r\n        .sorted(Comparator.comparingInt(Person::getAge))\r\n        .collect(Collectors.toCollection(ArrayList::new));\r\n    Collections.rotate(sortedList, -(int)personList.stream().filter(p-&gt;p.getAge()==0).count());\r\n\r\nAlternatively, you can rotate the age values within the `int` value range while comparing. This works, because we can preclude negative ages, so we can rotate the numbers so that zero becomes the `MAX_VALUE` while all other numbers keep their relative order.\r\n\r\n    sortedList = personList.stream()\r\n        .sorted(Comparator.comparingInt(p -&gt; p.getAge()-Integer.MIN_VALUE-1))\r\n        .collect(Collectors.toList());\r\n\r\nBy the way, this is equivalent to\r\n\r\n    sortedList = personList.stream()\r\n        .sorted((p1, p2) -&gt; Integer.compareUnsigned(p1.getAge()-1, p2.getAge()-1))\r\n        .collect(Collectors.toList());\r\n\r\nUnderstanding the [two&#39;s complement](https://en.wikipedia.org/wiki/Two%27s_complement) is needed to understand the solution.","title":"Sort a list of numbers with all 0&#39;s at the end of result","body":"<p>What you want, is a <em>rotation</em>; when you simply sort by age, the elements are in the right order, when you consider the result list to be a ring, so you only want to start the list after the last zero-age value:</p>\n\n<pre><code>┌───────────────────────────┐\n└─ 0  0  2  3  7  8       &lt;─┘\n         2  3  7  8  0  0 \n</code></pre>\n\n\n\n<pre><code>sortedList = personList.stream()\n    .sorted(Comparator.comparingInt(Person::getAge))\n    .collect(Collectors.toCollection(ArrayList::new));\nCollections.rotate(sortedList, -(int)personList.stream().filter(p-&gt;p.getAge()==0).count());\n</code></pre>\n\n<p>Alternatively, you can rotate the age values within the <code>int</code> value range while comparing. This works, because we can preclude negative ages, so we can rotate the numbers so that zero becomes the <code>MAX_VALUE</code> while all other numbers keep their relative order.</p>\n\n<pre><code>sortedList = personList.stream()\n    .sorted(Comparator.comparingInt(p -&gt; p.getAge()-Integer.MIN_VALUE-1))\n    .collect(Collectors.toList());\n</code></pre>\n\n<p>By the way, this is equivalent to</p>\n\n<pre><code>sortedList = personList.stream()\n    .sorted((p1, p2) -&gt; Integer.compareUnsigned(p1.getAge()-1, p2.getAge()-1))\n    .collect(Collectors.toList());\n</code></pre>\n\n<p>Understanding the <a href=\"https://en.wikipedia.org/wiki/Two%27s_complement\" rel=\"nofollow noreferrer\">two's complement</a> is needed to understand the solution.</p>\n"}],"owner":{"account_id":9412803,"reputation":269,"user_id":7001312,"accept_rate":25,"display_name":"Sujan Davangere Sunil"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1265,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":5,"score":6,"last_activity_date":1689114358,"creation_date":1510178353,"question_id":47190411,"body_markdown":"I have the list of persons and if the list of Input is `3,0,2,7,0,8`\r\n\r\nI want the output to be `2,3,7,8,0,0`\r\n\r\nWith the following code, i can sort only non zero numbers to get `2,3,7,8` as output.\r\n\r\n    sortedList = personList.stream()\r\n                           .filter(Person -&gt; Person.getAge()&gt;0)\r\n                           .sorted(Comparator.comparingInt(Person::getAge))\r\n                           .collect(Collectors.toList());\r\n\r\n    zeroList=personList.stream()\r\n                           .filter(Person -&gt; Person.getAge()==0)\r\n                           .collect(Collectors.toList());\r\n\r\n    sortedList.addAll(zeroList);\r\n\r\nCan the above two statements be merged into a single statement?","title":"Sort a list of numbers with all 0&#39;s at the end of result","body":"<p>I have the list of persons and if the list of Input is <code>3,0,2,7,0,8</code></p>\n\n<p>I want the output to be <code>2,3,7,8,0,0</code></p>\n\n<p>With the following code, i can sort only non zero numbers to get <code>2,3,7,8</code> as output.</p>\n\n<pre><code>sortedList = personList.stream()\n                       .filter(Person -&gt; Person.getAge()&gt;0)\n                       .sorted(Comparator.comparingInt(Person::getAge))\n                       .collect(Collectors.toList());\n\nzeroList=personList.stream()\n                       .filter(Person -&gt; Person.getAge()==0)\n                       .collect(Collectors.toList());\n\nsortedList.addAll(zeroList);\n</code></pre>\n\n<p>Can the above two statements be merged into a single statement?</p>\n"},{"tags":["java","json","org.json"],"answers":[{"tags":[],"owner":{"account_id":216120,"reputation":49213,"user_id":471160,"accept_rate":90,"display_name":"marcinj"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689113187,"creation_date":1689113187,"answer_id":76666069,"question_id":76665907,"body_markdown":"I think you almost had it.\r\n\r\nIn your json structure, the value for each currency is an array which contains a single object. To change a value of a specific currency inside an array, you need to get the JSONObject from the array then change the value.\r\n\r\n\r\n    // This is from your code\r\n    JSONArray jsArray = jsonObject.getJSONArray(&quot;gbp&quot;);\r\n    JSONObject desiredJsonArray = jsArray.getJSONObject(0);\r\n\r\n    // This is the update part\r\n    desiredJsonArray.put(&quot;yen&quot;, 155);\r\n    desiredJsonArray.put(&quot;gbp&quot;, 1);\r\n    desiredJsonArray.put(&quot;usd&quot;, 2);\r\n\r\nnow, write json back to file:\r\n\r\n    Files.write(Paths.get(&quot;src/rates.json&quot;), jsonObject.toString(4).getBytes()); \r\n","title":"Using the org.json java package, how would I replace the values of certain json values, and then put them back into the main file?","body":"<p>I think you almost had it.</p>\n<p>In your json structure, the value for each currency is an array which contains a single object. To change a value of a specific currency inside an array, you need to get the JSONObject from the array then change the value.</p>\n<pre><code>// This is from your code\nJSONArray jsArray = jsonObject.getJSONArray(&quot;gbp&quot;);\nJSONObject desiredJsonArray = jsArray.getJSONObject(0);\n\n// This is the update part\ndesiredJsonArray.put(&quot;yen&quot;, 155);\ndesiredJsonArray.put(&quot;gbp&quot;, 1);\ndesiredJsonArray.put(&quot;usd&quot;, 2);\n</code></pre>\n<p>now, write json back to file:</p>\n<pre><code>Files.write(Paths.get(&quot;src/rates.json&quot;), jsonObject.toString(4).getBytes()); \n</code></pre>\n"}],"owner":{"account_id":17926648,"reputation":13,"user_id":13025122,"display_name":"wyznel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689113187,"creation_date":1689111226,"question_id":76665907,"body_markdown":"I&#39;m relatively new to Java, and I&#39;m struggling to find any &quot;easy to understand&quot; documentation on how to properly use the org.json package, and I can&#39;t seem to find any function that replaces the value of a key, only adding new ones.\r\n\r\n***By the way, sorry if this post isn&#39;t properly formatted or something, am also new to stackoverflow.***\r\n\r\nThis is the content of my JSON file:\r\n\r\n```\r\n{\r\n  &quot;gbp&quot;: [\r\n    {\r\n      &quot;yen&quot;: 183.65,\r\n      &quot;usd&quot;: 1.28,\r\n      &quot;euro&quot;: 1.17\r\n    }\r\n  ],\r\n  &quot;usd&quot;: [\r\n    {\r\n      &quot;yen&quot;: 144.67,\r\n      &quot;gbp&quot;: 0.79,\r\n      &quot;euro&quot;: 0.92\r\n    }\r\n  ],\r\n  &quot;euro&quot;: [\r\n    {\r\n      &quot;yen&quot;: 156.96,\r\n      &quot;usd&quot;: 1.08,\r\n      &quot;gbp&quot;: 0.85\r\n    }\r\n  ],\r\n  &quot;yen&quot;: [\r\n    {\r\n      &quot;euro&quot;: 0.0064,\r\n      &quot;usd&quot;: 0.0069,\r\n      &quot;gbp&quot;: 0.0054\r\n    }\r\n  ]\r\n}\r\n```\r\n\r\nThis is the code that loads the jsonContent into a string then an object:\r\n\r\n```java\r\nString jsonContent = new String(Files.readAllBytes(Paths.get(&quot;src/rates.json&quot;)));\r\nJSONObject jsonObject = new JSONObject(jsonContent);\r\n```\r\n\r\nI then need to find the missing currency in an ArrayList named: `orderOfExchangesForConfirmRateChanges`. This is in a separate java file, so it is called with: `gui.orderOfExchangesForConfirmRateChanges`.\r\nThis is done with this code:\r\n\r\n```java\r\n            String requiredCurrency = null; //this is needed for later\r\n            String[] currencies = new String[] {&quot;usd&quot;, &quot;gbp&quot;, &quot;euro&quot;, &quot;yen&quot;};\r\n            for(String currency : currencies){\r\n                if(!gui.orderOfExchangesForConfirmRateChanges.toString().contains(currency)){\r\n                    requiredCurrency = currency;\r\n                    System.out.println(&quot;Found currency.&quot;);\r\n                }\r\n            }\r\n```\r\n\r\nOnce this has completed, we call this bit of code to get the data within the json file corresponding to the\r\n`requiredCurrency` variable:\r\n\r\n```java\r\nJSONArray desiredJsonArray = jsonObject.getJSONArray(requiredCurrency);\r\nSystem.out.println(desiredJsonArray); // here to help me visualise things - example, if requiredCurrency = euro, output would be: [{&quot;yen&quot;:156.96,&quot;gbp&quot;:0.85,&quot;usd&quot;:1.08}]\r\n```\r\n\r\nSo hereafter, I need to change the values of &quot;yen&quot;, &quot;gbp&quot;, &quot;usd&quot;, but I cannot seem to figure it out.\r\nFor example if I wanted to change the contents of the euro section of `rates.json` from:\r\n\r\n```JSON\r\n{\r\n   &quot;euro&quot;: [\r\n       {\r\n      &quot;yen&quot;: 144.67,\r\n      &quot;gbp&quot;: 0.79,\r\n      &quot;euro&quot;: 0.92\r\n       }\r\n  ]\r\n}\r\n```\r\n\r\nto:\r\n\r\n```\r\n{\r\n   &quot;euro&quot;: [\r\n       {\r\n      &quot;yen&quot;: 2000,\r\n      &quot;gbp&quot;: 50,\r\n      &quot;euro&quot;: 100\r\n       }\r\n  ]\r\n}\r\n```\r\n\r\nAnd then re-insert it into the main JSONObject and rewrite the rates.json file to include these new values.\r\n\r\nSorry if this question is a bit all over the place.\r\n\r\n**If anything needs to be cleared up or re-explained, let me know**","title":"Using the org.json java package, how would I replace the values of certain json values, and then put them back into the main file?","body":"<p>I'm relatively new to Java, and I'm struggling to find any &quot;easy to understand&quot; documentation on how to properly use the org.json package, and I can't seem to find any function that replaces the value of a key, only adding new ones.</p>\n<p><em><strong>By the way, sorry if this post isn't properly formatted or something, am also new to stackoverflow.</strong></em></p>\n<p>This is the content of my JSON file:</p>\n<pre><code>{\n  &quot;gbp&quot;: [\n    {\n      &quot;yen&quot;: 183.65,\n      &quot;usd&quot;: 1.28,\n      &quot;euro&quot;: 1.17\n    }\n  ],\n  &quot;usd&quot;: [\n    {\n      &quot;yen&quot;: 144.67,\n      &quot;gbp&quot;: 0.79,\n      &quot;euro&quot;: 0.92\n    }\n  ],\n  &quot;euro&quot;: [\n    {\n      &quot;yen&quot;: 156.96,\n      &quot;usd&quot;: 1.08,\n      &quot;gbp&quot;: 0.85\n    }\n  ],\n  &quot;yen&quot;: [\n    {\n      &quot;euro&quot;: 0.0064,\n      &quot;usd&quot;: 0.0069,\n      &quot;gbp&quot;: 0.0054\n    }\n  ]\n}\n</code></pre>\n<p>This is the code that loads the jsonContent into a string then an object:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String jsonContent = new String(Files.readAllBytes(Paths.get(&quot;src/rates.json&quot;)));\nJSONObject jsonObject = new JSONObject(jsonContent);\n</code></pre>\n<p>I then need to find the missing currency in an ArrayList named: <code>orderOfExchangesForConfirmRateChanges</code>. This is in a separate java file, so it is called with: <code>gui.orderOfExchangesForConfirmRateChanges</code>.\nThis is done with this code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>            String requiredCurrency = null; //this is needed for later\n            String[] currencies = new String[] {&quot;usd&quot;, &quot;gbp&quot;, &quot;euro&quot;, &quot;yen&quot;};\n            for(String currency : currencies){\n                if(!gui.orderOfExchangesForConfirmRateChanges.toString().contains(currency)){\n                    requiredCurrency = currency;\n                    System.out.println(&quot;Found currency.&quot;);\n                }\n            }\n</code></pre>\n<p>Once this has completed, we call this bit of code to get the data within the json file corresponding to the\n<code>requiredCurrency</code> variable:</p>\n<pre class=\"lang-java prettyprint-override\"><code>JSONArray desiredJsonArray = jsonObject.getJSONArray(requiredCurrency);\nSystem.out.println(desiredJsonArray); // here to help me visualise things - example, if requiredCurrency = euro, output would be: [{&quot;yen&quot;:156.96,&quot;gbp&quot;:0.85,&quot;usd&quot;:1.08}]\n</code></pre>\n<p>So hereafter, I need to change the values of &quot;yen&quot;, &quot;gbp&quot;, &quot;usd&quot;, but I cannot seem to figure it out.\nFor example if I wanted to change the contents of the euro section of <code>rates.json</code> from:</p>\n<pre><code>{\n   &quot;euro&quot;: [\n       {\n      &quot;yen&quot;: 144.67,\n      &quot;gbp&quot;: 0.79,\n      &quot;euro&quot;: 0.92\n       }\n  ]\n}\n</code></pre>\n<p>to:</p>\n<pre><code>{\n   &quot;euro&quot;: [\n       {\n      &quot;yen&quot;: 2000,\n      &quot;gbp&quot;: 50,\n      &quot;euro&quot;: 100\n       }\n  ]\n}\n</code></pre>\n<p>And then re-insert it into the main JSONObject and rewrite the rates.json file to include these new values.</p>\n<p>Sorry if this question is a bit all over the place.</p>\n<p><strong>If anything needs to be cleared up or re-explained, let me know</strong></p>\n"},{"tags":["java","spring","spring-boot","gradle"],"comments":[{"owner":{"account_id":446597,"reputation":22464,"user_id":839733,"accept_rate":69,"display_name":"Abhijit Sarkar"},"score":0,"creation_date":1688155472,"post_id":76591944,"comment_id":135041196,"body_markdown":"Does this answer your question? [Replace token in file before building, but keep token in sources](https://stackoverflow.com/q/30038540/839733)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/q/30038540/839733\">Replace token in file before building, but keep token in sources</a>"},{"owner":{"account_id":12275702,"reputation":23,"user_id":13786905,"display_name":"Coder"},"score":0,"creation_date":1688156042,"post_id":76591944,"comment_id":135041278,"body_markdown":"no. it didn&#39;t help me.","body":"no. it didn&#39;t help me."},{"owner":{"account_id":446597,"reputation":22464,"user_id":839733,"accept_rate":69,"display_name":"Abhijit Sarkar"},"score":1,"creation_date":1688156880,"post_id":76591944,"comment_id":135041431,"body_markdown":"You forgot to show your attempt at solving the problem, and what didn&#39;t work.","body":"You forgot to show your attempt at solving the problem, and what didn&#39;t work."},{"owner":{"account_id":367578,"reputation":3080,"user_id":713861,"accept_rate":72,"display_name":"GreenSaguaro"},"score":0,"creation_date":1688157293,"post_id":76591944,"comment_id":135041496,"body_markdown":"Instead of doing this, you should use the the Spring Boot BuildInfo functionality: https://docs.spring.io/spring-boot/docs/current/gradle-plugin/reference/htmlsingle/#integrating-with-actuator.build-info. This will give you an object you can inject in your Spring Boot application that will already have the timestamp (`build.time`).","body":"Instead of doing this, you should use the the Spring Boot BuildInfo functionality: <a href=\"https://docs.spring.io/spring-boot/docs/current/gradle-plugin/reference/htmlsingle/#integrating-with-actuator.build-info\" rel=\"nofollow noreferrer\">docs.spring.io/spring-boot/docs/current/gradle-plugin/refere&zwnj;&#8203;nce/&hellip;</a>. This will give you an object you can inject in your Spring Boot application that will already have the timestamp (<code>build.time</code>)."},{"owner":{"account_id":12275702,"reputation":23,"user_id":13786905,"display_name":"Coder"},"score":0,"creation_date":1688157303,"post_id":76591944,"comment_id":135041499,"body_markdown":"I&#39;ve updated the question. Thanks!","body":"I&#39;ve updated the question. Thanks!"},{"owner":{"account_id":446597,"reputation":22464,"user_id":839733,"accept_rate":69,"display_name":"Abhijit Sarkar"},"score":0,"creation_date":1688157713,"post_id":76591944,"comment_id":135041553,"body_markdown":"@GreenSaguaro `BuildInfo` is not what the OP wants or needs. It generates a `META-INF/build-info.properties` which needs to be read by the application, and is nothing like `application.*`.  Build info is primarily meant to be read by Actuator as read-only information.","body":"@GreenSaguaro <code>BuildInfo</code> is not what the OP wants or needs. It generates a <code>META-INF&#47;build-info.properties</code> which needs to be read by the application, and is nothing like <code>application.*</code>.  Build info is primarily meant to be read by Actuator as read-only information."},{"owner":{"account_id":446597,"reputation":22464,"user_id":839733,"accept_rate":69,"display_name":"Abhijit Sarkar"},"score":0,"creation_date":1688157828,"post_id":76591944,"comment_id":135041566,"body_markdown":"@Coder It’d help if you correctly spelled `application.properties`. Your question has been asked and solved a billion times, both in Stackoverflow and outside. Please take the time to research, especially when you’re given a solution already.","body":"@Coder It’d help if you correctly spelled <code>application.properties</code>. Your question has been asked and solved a billion times, both in Stackoverflow and outside. Please take the time to research, especially when you’re given a solution already."},{"owner":{"account_id":367578,"reputation":3080,"user_id":713861,"accept_rate":72,"display_name":"GreenSaguaro"},"score":1,"creation_date":1688159190,"post_id":76591944,"comment_id":135041744,"body_markdown":"@AbhijitSarkar You inject the `BuildProperties` bean wherever you need it. It is not limited to actuators. Let the poster decide what they want and don&#39;t want.","body":"@AbhijitSarkar You inject the <code>BuildProperties</code> bean wherever you need it. It is not limited to actuators. Let the poster decide what they want and don&#39;t want."},{"owner":{"account_id":12275702,"reputation":23,"user_id":13786905,"display_name":"Coder"},"score":0,"creation_date":1689113082,"post_id":76591944,"comment_id":135166768,"body_markdown":"@AbhijitSarkar, I&#39;ve updated my question. Any thoughts on that?","body":"@AbhijitSarkar, I&#39;ve updated my question. Any thoughts on that?"}],"answers":[{"comments":[{"owner":{"account_id":12275702,"reputation":23,"user_id":13786905,"display_name":"Coder"},"score":0,"creation_date":1689095205,"post_id":76592330,"comment_id":135163550,"body_markdown":"I tried your approach (which also gives the timestamp&#39;s updated value i need in build-info.properties everytime i bootrun) and updated my question above. But, right now i&#39;m running into null pointer exception. Any thoughts on that? Thanks!","body":"I tried your approach (which also gives the timestamp&#39;s updated value i need in build-info.properties everytime i bootrun) and updated my question above. But, right now i&#39;m running into null pointer exception. Any thoughts on that? Thanks!"},{"owner":{"account_id":367578,"reputation":3080,"user_id":713861,"accept_rate":72,"display_name":"GreenSaguaro"},"score":0,"creation_date":1689103413,"post_id":76592330,"comment_id":135165089,"body_markdown":"@Coder Your null pointer exception is coming when you try to use the `BuildProperties` class?","body":"@Coder Your null pointer exception is coming when you try to use the <code>BuildProperties</code> class?"},{"owner":{"account_id":12275702,"reputation":23,"user_id":13786905,"display_name":"Coder"},"score":0,"creation_date":1689104079,"post_id":76592330,"comment_id":135165211,"body_markdown":"Yes. That&#39;s correct","body":"Yes. That&#39;s correct"},{"owner":{"account_id":367578,"reputation":3080,"user_id":713861,"accept_rate":72,"display_name":"GreenSaguaro"},"score":0,"creation_date":1689105111,"post_id":76592330,"comment_id":135165392,"body_markdown":"@Coder You need to use a different property name other than `time`. The `BuildProperties` already has a property called `time` that it tries to convert to an `Instant`. If this value cannot be converted to an `Instant`, it will remain null. Simply rename your custom property to `timestamp`, or anything else, and you will not get a null.","body":"@Coder You need to use a different property name other than <code>time</code>. The <code>BuildProperties</code> already has a property called <code>time</code> that it tries to convert to an <code>Instant</code>. If this value cannot be converted to an <code>Instant</code>, it will remain null. Simply rename your custom property to <code>timestamp</code>, or anything else, and you will not get a null."},{"owner":{"account_id":367578,"reputation":3080,"user_id":713861,"accept_rate":72,"display_name":"GreenSaguaro"},"score":0,"creation_date":1689105473,"post_id":76592330,"comment_id":135165445,"body_markdown":"Answer updated with a working example.","body":"Answer updated with a working example."},{"owner":{"account_id":12275702,"reputation":23,"user_id":13786905,"display_name":"Coder"},"score":0,"creation_date":1689107963,"post_id":76592330,"comment_id":135165920,"body_markdown":"I updated build.gradle and tried your test snippet. Still getting NullPointerException for BuildProperties. Seems like there&#39;s a problem with @Autowired annotation. Any suggesstions as to what might be happening?","body":"I updated build.gradle and tried your test snippet. Still getting NullPointerException for BuildProperties. Seems like there&#39;s a problem with @Autowired annotation. Any suggesstions as to what might be happening?"},{"owner":{"account_id":367578,"reputation":3080,"user_id":713861,"accept_rate":72,"display_name":"GreenSaguaro"},"score":0,"creation_date":1689109476,"post_id":76592330,"comment_id":135166215,"body_markdown":"Let us [continue this discussion in chat](https://chat.stackoverflow.com/rooms/254454/discussion-between-greensaguaro-and-coder).","body":"Let us <a href=\"https://chat.stackoverflow.com/rooms/254454/discussion-between-greensaguaro-and-coder\">continue this discussion in chat</a>."}],"tags":[],"owner":{"account_id":367578,"reputation":3080,"user_id":713861,"accept_rate":72,"display_name":"GreenSaguaro"},"comment_count":7,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689105400,"creation_date":1688160919,"answer_id":76592330,"question_id":76591944,"body_markdown":"Here is how to do it using your own replace:\r\n\r\n*build.gradle.kts*\r\n```kotlin\r\nimport org.apache.tools.ant.filters.ReplaceTokens\r\n\r\ntasks.named&lt;ProcessResources&gt;(&quot;processResources&quot;) {\r\n    filesMatching(&quot;application.properties&quot;) {\r\n        filter(ReplaceTokens::class, &quot;tokens&quot; to mapOf(&quot;current.timestamp&quot; to &quot;abc&quot;))\r\n    }\r\n}\r\n```\r\nI believe in Groovy it would be this:\r\n\r\n*build.gradle*\r\n```groovy\r\nimport org.apache.tools.ant.filters.ReplaceTokens\r\n\r\ntasks.named(&quot;processResources&quot;, ProcessResources) {\r\n    filesMatching(&quot;application.properties&quot;) {\r\n        filter(ReplaceTokens, tokens: [&quot;current.timestamp&quot;: &quot;abc&quot;])\r\n    }\r\n}\r\n```\r\n\r\nWith that said, I would suggest using the Spring Boot build info instead:\r\n\r\nhttps://docs.spring.io/spring-boot/docs/current/gradle-plugin/reference/htmlsingle/#integrating-with-actuator.build-info\r\n\r\nOnce that is in place, you can inject the `BuildProperties` bean to get its values:\r\n\r\nhttps://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/info/BuildProperties.html\r\n\r\n*Working Example:*\r\n\r\n*build.gradle.kts*\r\n```kotlin\r\nplugins {\r\n    `java-library`\r\n    id(&quot;org.springframework.boot&quot;) version &quot;3.1.+&quot;\r\n    id(&quot;io.spring.dependency-management&quot;) version &quot;1.1.0&quot;\r\n}\r\n\r\nspringBoot {\r\n    buildInfo {\r\n        properties {\r\n            additional.set(mapOf(&quot;timestamp&quot; to &quot;Timestamp: ${Date()}&quot;))\r\n        }\r\n    }\r\n}\r\n```\r\n*Test*\r\n```java\r\n@SpringBootTest\r\npublic class BuildInfoTest {\r\n    @Autowired\r\n    BuildProperties buildProperties;\r\n\r\n    @Test\r\n    void foo() {\r\n        System.out.println(&quot;====================================&quot;);\r\n        System.out.println(buildProperties.getName());\r\n        System.out.println(buildProperties.getTime());\r\n        System.out.println(buildProperties.get(&quot;timestamp&quot;));\r\n        System.out.println(&quot;====================================&quot;);\r\n    }\r\n}\r\n\r\n```\r\n*Output:*\r\n```\r\n====================================\r\nmy-project\r\n2023-07-11T19:55:18.473Z\r\nTimestamp: Tue Jul 11 15:55:18 EDT 2023\r\n====================================\r\n```\r\n","title":"How to pass a timestamp property from build.gradle to application.properties?","body":"<p>Here is how to do it using your own replace:</p>\n<p><em>build.gradle.kts</em></p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>import org.apache.tools.ant.filters.ReplaceTokens\n\ntasks.named&lt;ProcessResources&gt;(&quot;processResources&quot;) {\n    filesMatching(&quot;application.properties&quot;) {\n        filter(ReplaceTokens::class, &quot;tokens&quot; to mapOf(&quot;current.timestamp&quot; to &quot;abc&quot;))\n    }\n}\n</code></pre>\n<p>I believe in Groovy it would be this:</p>\n<p><em>build.gradle</em></p>\n<pre><code>import org.apache.tools.ant.filters.ReplaceTokens\n\ntasks.named(&quot;processResources&quot;, ProcessResources) {\n    filesMatching(&quot;application.properties&quot;) {\n        filter(ReplaceTokens, tokens: [&quot;current.timestamp&quot;: &quot;abc&quot;])\n    }\n}\n</code></pre>\n<p>With that said, I would suggest using the Spring Boot build info instead:</p>\n<p><a href=\"https://docs.spring.io/spring-boot/docs/current/gradle-plugin/reference/htmlsingle/#integrating-with-actuator.build-info\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-boot/docs/current/gradle-plugin/reference/htmlsingle/#integrating-with-actuator.build-info</a></p>\n<p>Once that is in place, you can inject the <code>BuildProperties</code> bean to get its values:</p>\n<p><a href=\"https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/info/BuildProperties.html\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/info/BuildProperties.html</a></p>\n<p><em>Working Example:</em></p>\n<p><em>build.gradle.kts</em></p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>plugins {\n    `java-library`\n    id(&quot;org.springframework.boot&quot;) version &quot;3.1.+&quot;\n    id(&quot;io.spring.dependency-management&quot;) version &quot;1.1.0&quot;\n}\n\nspringBoot {\n    buildInfo {\n        properties {\n            additional.set(mapOf(&quot;timestamp&quot; to &quot;Timestamp: ${Date()}&quot;))\n        }\n    }\n}\n</code></pre>\n<p><em>Test</em></p>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootTest\npublic class BuildInfoTest {\n    @Autowired\n    BuildProperties buildProperties;\n\n    @Test\n    void foo() {\n        System.out.println(&quot;====================================&quot;);\n        System.out.println(buildProperties.getName());\n        System.out.println(buildProperties.getTime());\n        System.out.println(buildProperties.get(&quot;timestamp&quot;));\n        System.out.println(&quot;====================================&quot;);\n    }\n}\n\n</code></pre>\n<p><em>Output:</em></p>\n<pre><code>====================================\nmy-project\n2023-07-11T19:55:18.473Z\nTimestamp: Tue Jul 11 15:55:18 EDT 2023\n====================================\n</code></pre>\n"},{"comments":[{"owner":{"account_id":12275702,"reputation":23,"user_id":13786905,"display_name":"Coder"},"score":0,"creation_date":1689113015,"post_id":76602477,"comment_id":135166755,"body_markdown":"I&#39;ve updated my question with new info. Any thoughts on that?","body":"I&#39;ve updated my question with new info. Any thoughts on that?"}],"tags":[],"owner":{"account_id":519535,"reputation":2273,"user_id":1303158,"display_name":"Bernie"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1688367349,"creation_date":1688367349,"answer_id":76602477,"question_id":76591944,"body_markdown":"Change your CopySpec to `expand(timestamp: timestamp)`\r\nAnd change your properties file to `current.timestamp=$timestamp`\r\n\r\nThe key in the Map passed to `expand()` should be the token that you want replaced.\r\n\r\nThe `@timestamp@` style of tokens work with the `ReplaceTokens` filter, which you can also use if you prefer. See https://docs.gradle.org/current/userguide/working_with_files.html#sec:filtering_files for details.","title":"How to pass a timestamp property from build.gradle to application.properties?","body":"<p>Change your CopySpec to <code>expand(timestamp: timestamp)</code>\nAnd change your properties file to <code>current.timestamp=$timestamp</code></p>\n<p>The key in the Map passed to <code>expand()</code> should be the token that you want replaced.</p>\n<p>The <code>@timestamp@</code> style of tokens work with the <code>ReplaceTokens</code> filter, which you can also use if you prefer. See <a href=\"https://docs.gradle.org/current/userguide/working_with_files.html#sec:filtering_files\" rel=\"nofollow noreferrer\">https://docs.gradle.org/current/userguide/working_with_files.html#sec:filtering_files</a> for details.</p>\n"}],"owner":{"account_id":12275702,"reputation":23,"user_id":13786905,"display_name":"Coder"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":254,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":76592330,"answer_count":2,"score":1,"last_activity_date":1689113163,"creation_date":1688155434,"question_id":76591944,"body_markdown":"I have a timestamp value defined in build.gradle like the following,\r\n\r\n**build.gradle**\r\n```\r\ndef timestamp = new Date().format(&#39;yyyyMMddHHmm&#39;)\r\nprintln &quot;Timestamp:&quot; + timestamp\r\n\r\nspringBoot {\r\n    mainClass = &#39;com.example.login.Application&#39;\r\n    buildInfo {\r\n        properties {\r\n            additionalProperties = [\r\n                    &#39;timestamp&#39;: &quot;${timestamp}&quot;\r\n            ]\r\n        }\r\n    }\r\n}\r\n.\r\n.\r\n.\r\n```\r\n\r\nNow my **build-info.properties** in **build/resources/main/META-INF** looks like this,\r\n\r\n```\r\nbuild.artifact=login\r\nbuild.group=com.example\r\nbuild.name=login\r\nbuild.timestamp=202307111234\r\n```\r\n\r\n**application.properties**\r\n```\r\ncurrent.timestamp=@timestamp@\r\n```\r\n\r\nI&#39;m trying to retrieve build.time from build-info properties in my **AppFilter.java** class as follows,\r\n\r\n```\r\npublic class AppFilter {\r\n    @Autowired\r\n    private BuildProperties buildProperties;\r\n\r\n    public AppFilter() {\r\n    }\r\n\r\n    public void doFilter(HttpServletRequest request, HttpServletResponse response, FilterChain chain) throws IOException, ServletException {\r\n       String timestamp = buildProperties.get(&quot;build.timestamp&quot;);\r\n       System.out.println(&quot;Timestamp=&gt;&quot;+timestamp);\r\n       .\r\n       .\r\n       .\r\n    }\r\n}\r\n```\r\n\r\nIs there a way I can pass the timestamp property from build.gradle to application.properties, so that current.timestamp will have the timestamp value from my gradle build?\r\n\r\nGetting the following error,\r\n\r\n**error after debugging**\r\n\r\n```\r\nString timestamp = buildProperties[NullPointerException]....\r\n```\r\n\r\nI&#39;m new to gradle build. Any help is appreciated.\r\n\r\nThanks","title":"How to pass a timestamp property from build.gradle to application.properties?","body":"<p>I have a timestamp value defined in build.gradle like the following,</p>\n<p><strong>build.gradle</strong></p>\n<pre><code>def timestamp = new Date().format('yyyyMMddHHmm')\nprintln &quot;Timestamp:&quot; + timestamp\n\nspringBoot {\n    mainClass = 'com.example.login.Application'\n    buildInfo {\n        properties {\n            additionalProperties = [\n                    'timestamp': &quot;${timestamp}&quot;\n            ]\n        }\n    }\n}\n.\n.\n.\n</code></pre>\n<p>Now my <strong>build-info.properties</strong> in <strong>build/resources/main/META-INF</strong> looks like this,</p>\n<pre><code>build.artifact=login\nbuild.group=com.example\nbuild.name=login\nbuild.timestamp=202307111234\n</code></pre>\n<p><strong>application.properties</strong></p>\n<pre><code>current.timestamp=@timestamp@\n</code></pre>\n<p>I'm trying to retrieve build.time from build-info properties in my <strong>AppFilter.java</strong> class as follows,</p>\n<pre><code>public class AppFilter {\n    @Autowired\n    private BuildProperties buildProperties;\n\n    public AppFilter() {\n    }\n\n    public void doFilter(HttpServletRequest request, HttpServletResponse response, FilterChain chain) throws IOException, ServletException {\n       String timestamp = buildProperties.get(&quot;build.timestamp&quot;);\n       System.out.println(&quot;Timestamp=&gt;&quot;+timestamp);\n       .\n       .\n       .\n    }\n}\n</code></pre>\n<p>Is there a way I can pass the timestamp property from build.gradle to application.properties, so that current.timestamp will have the timestamp value from my gradle build?</p>\n<p>Getting the following error,</p>\n<p><strong>error after debugging</strong></p>\n<pre><code>String timestamp = buildProperties[NullPointerException]....\n</code></pre>\n<p>I'm new to gradle build. Any help is appreciated.</p>\n<p>Thanks</p>\n"},{"tags":["java","dwr"],"owner":{"account_id":2624585,"reputation":1457,"user_id":2271895,"accept_rate":97,"display_name":"Tan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":13,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689112449,"creation_date":1689112449,"question_id":76666012,"body_markdown":"I&#39;m using DWR for Ajax calls in my code and I&#39;ve this class defined which works fine when I&#39;m calling the method `locationList` like `ManageLocation.locationList(selectedVal,displayInfo);`\r\n\r\nHowever, if I try to do the same thing with another method from the javascript code  like this `ManageLocation.test(selectedVal,displayInfo);`, it&#39;s not even hitting this class and I get a Javascript error that this method test doesn&#39;t exist.\r\n\r\n    public class ManageLocation {\r\n\r\n\r\n    WebContext ctx = WebContextFactory.get();\r\n    ServletContext cs = ctx.getServletContext();\r\n    WebApplicationContext webctx = WebApplicationContextUtils.getRequiredWebApplicationContext(cs);\r\n\r\n\r\n    CompanyLocationManager clMgr = (CompanyLocationManager) webctx.getBean(&quot;companyLocationManager&quot;);\r\n\r\n    public String locationList(String val) {\r\n\r\n        return clMgr.getCompanyLocationByQuery(&quot;name LIKE &#39;&quot; + val + &quot;%&#39;&quot;).toString();\r\n\r\n\r\n    }\r\n\r\n    public String test(Integer val) {\r\n        return clMgr.getCompanyLocationByQuery(&quot;where id=&#39;&quot; + val + &quot;&#39;&quot;).toString();\r\n\r\n\r\n\r\n\r\n    }\r\n\r\n\r\n\r\n}\r\n\r\n\r\nIs there anything like I can have only one method inside the DWR related classes?","title":"Class doesn&#39;t exist error while defining another method inside a DWR class","body":"<p>I'm using DWR for Ajax calls in my code and I've this class defined which works fine when I'm calling the method <code>locationList</code> like <code>ManageLocation.locationList(selectedVal,displayInfo);</code></p>\n<p>However, if I try to do the same thing with another method from the javascript code  like this <code>ManageLocation.test(selectedVal,displayInfo);</code>, it's not even hitting this class and I get a Javascript error that this method test doesn't exist.</p>\n<pre><code>public class ManageLocation {\n\n\nWebContext ctx = WebContextFactory.get();\nServletContext cs = ctx.getServletContext();\nWebApplicationContext webctx = WebApplicationContextUtils.getRequiredWebApplicationContext(cs);\n\n\nCompanyLocationManager clMgr = (CompanyLocationManager) webctx.getBean(&quot;companyLocationManager&quot;);\n\npublic String locationList(String val) {\n\n    return clMgr.getCompanyLocationByQuery(&quot;name LIKE '&quot; + val + &quot;%'&quot;).toString();\n\n\n}\n\npublic String test(Integer val) {\n    return clMgr.getCompanyLocationByQuery(&quot;where id='&quot; + val + &quot;'&quot;).toString();\n\n\n\n\n}\n</code></pre>\n<p>}</p>\n<p>Is there anything like I can have only one method inside the DWR related classes?</p>\n"},{"tags":["java","logging","log4j","outputstream","writer"],"comments":[{"owner":{"account_id":118311,"reputation":9801,"user_id":309259,"accept_rate":100,"display_name":"Rekin"},"score":3,"creation_date":1312892359,"post_id":6995946,"comment_id":8350326,"body_markdown":"Couldn&#39;t you just implement Your own OutputStream delegating `write(...)` to the logger?","body":"Couldn&#39;t you just implement Your own OutputStream delegating <code>write(...)</code> to the logger?"},{"owner":{"account_id":254625,"reputation":11900,"user_id":534150,"accept_rate":81,"display_name":"Arthur Neves"},"score":1,"creation_date":1312893154,"post_id":6995946,"comment_id":8350550,"body_markdown":"@Rekin exactly what I did bellow!","body":"@Rekin exactly what I did bellow!"},{"owner":{"account_id":101064,"reputation":12650,"user_id":272075,"accept_rate":100,"display_name":"Thorn G"},"score":1,"creation_date":1312895379,"post_id":6995946,"comment_id":8351215,"body_markdown":"What do you mean by saying Log4J swallows System.err?","body":"What do you mean by saying Log4J swallows System.err?"},{"owner":{"account_id":455529,"reputation":1406,"user_id":853728,"accept_rate":60,"display_name":"java.is.for.desktop.indeed"},"score":1,"creation_date":1312897973,"post_id":6995946,"comment_id":8352062,"body_markdown":"Swallows output == output is not shown anywhere ;)","body":"Swallows output == output is not shown anywhere ;)"}],"answers":[{"comments":[{"owner":{"account_id":1894447,"reputation":590,"user_id":1711726,"display_name":"hokr"},"score":1,"creation_date":1374758762,"post_id":6996147,"comment_id":26073663,"body_markdown":"Happy to have found this. In my usage scenario the given `LogOutputStream` has the following problem, I needed to fix:\n1. It relies on log4j instead commons-logging which I changed and I hard-coded `logger.info()` as commons-logging has no Levels (as far as I see in seconds)\n1. It assumes newline to be `\\n` which I needed to change to `System.getProperty(&quot;line.separator&quot;)`\n1. Since its `flush()` does not check if `mem` is empty, you get an extra empty line on output when the wrapping `Writer` calls `flush()` after last `println()`","body":"Happy to have found this. In my usage scenario the given <code>LogOutputStream</code> has the following problem, I needed to fix: 1. It relies on log4j instead commons-logging which I changed and I hard-coded <code>logger.info()</code> as commons-logging has no Levels (as far as I see in seconds) 1. It assumes newline to be <code>\\n</code> which I needed to change to <code>System.getProperty(&quot;line.separator&quot;)</code> 1. Since its <code>flush()</code> does not check if <code>mem</code> is empty, you get an extra empty line on output when the wrapping <code>Writer</code> calls <code>flush()</code> after last <code>println()</code>"},{"owner":{"account_id":4080253,"reputation":430,"user_id":3350921,"display_name":"saygley"},"score":0,"creation_date":1581929402,"post_id":6996147,"comment_id":106587254,"body_markdown":"and in your class **Logger logger = Logger.getLogger(new Object(){}.getClass().getEnclosingClass()); OutputStream stdout = new PrintStream(new LogOutputStream(logger, Level.INFO));** ----Then write stuff into your stdout ;)","body":"and in your class <b>Logger logger = Logger.getLogger(new Object(){}.getClass().getEnclosingClass()); OutputStream stdout = new PrintStream(new LogOutputStream(logger, Level.INFO));</b> ----Then write stuff into your stdout ;)"},{"owner":{"account_id":1827467,"reputation":4043,"user_id":1659790,"accept_rate":73,"display_name":"Jimmy T."},"score":0,"creation_date":1600512571,"post_id":6996147,"comment_id":113115404,"body_markdown":"That&#39;s a very inefficient implementation though. Not only does it only write byte by byte, writing each line has a runtime and memory consumption of O(n&#178;) with the new string it creates with each byte. It could already been made better by using a StringBuffer instead of String and reuse its memory after flushing","body":"That&#39;s a very inefficient implementation though. Not only does it only write byte by byte, writing each line has a runtime and memory consumption of O(n&#178;) with the new string it creates with each byte. It could already been made better by using a StringBuffer instead of String and reuse its memory after flushing"}],"tags":[],"owner":{"account_id":254625,"reputation":11900,"user_id":534150,"accept_rate":81,"display_name":"Arthur Neves"},"comment_count":3,"down_vote_count":5,"up_vote_count":22,"is_accepted":true,"score":17,"last_activity_date":1507876042,"creation_date":1312892670,"answer_id":6996147,"question_id":6995946,"body_markdown":"My suggestion is, why dont you write your OutputStream then?! I was about to write one for you, but I found this good example on the net, check it out!\r\n\r\n[LogOutputStream.java][1]\r\n\r\n    /*\r\n     * Jacareto Copyright (c) 2002-2005\r\n     * Applied Computer Science Research Group, Darmstadt University of\r\n     * Technology, Institute of Mathematics &amp; Computer Science,\r\n     * Ludwigsburg University of Education, and Computer Based\r\n     * Learning Research Group, Aachen University. All rights reserved.\r\n     *\r\n     * Jacareto is free software; you can redistribute it and/or\r\n     * modify it under the terms of the GNU General Public\r\n     * License as published by the Free Software Foundation; either\r\n     * version 2 of the License, or (at your option) any later version.\r\n     *\r\n     * Jacareto is distributed in the hope that it will be useful,\r\n     * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\r\n     * General Public License for more details.\r\n     *\r\n     * You should have received a copy of the GNU General Public\r\n     * License along with Jacareto; if not, write to the Free\r\n     * Software Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.\r\n     *\r\n     */\r\n    \r\n    package jacareto.toolkit.log4j;\r\n    \r\n    \r\n    import org.apache.log4j.Level;\r\n    import org.apache.log4j.Logger;\r\n    \r\n    import java.io.OutputStream;\r\n    \r\n    /**\r\n     * This class logs all bytes written to it as output stream with a specified logging level.\r\n     *\r\n     * @author &lt;a href=&quot;mailto:cspannagel@web.de&quot;&gt;Christian Spannagel&lt;/a&gt;\r\n     * @version 1.0\r\n     */\r\n    public class LogOutputStream extends OutputStream {\r\n        /** The logger where to log the written bytes. */\r\n        private Logger logger;\r\n    \r\n        /** The level. */\r\n        private Level level;\r\n    \r\n        /** The internal memory for the written bytes. */\r\n        private String mem;\r\n    \r\n        /**\r\n         * Creates a new log output stream which logs bytes to the specified logger with the specified\r\n         * level.\r\n         *\r\n         * @param logger the logger where to log the written bytes\r\n         * @param level the level\r\n         */\r\n        public LogOutputStream (Logger logger, Level level) {\r\n            setLogger (logger);\r\n            setLevel (level);\r\n            mem = &quot;&quot;;\r\n        }\r\n    \r\n        /**\r\n         * Sets the logger where to log the bytes.\r\n         *\r\n         * @param logger the logger\r\n         */\r\n        public void setLogger (Logger logger) {\r\n            this.logger = logger;\r\n        }\r\n    \r\n        /**\r\n         * Returns the logger.\r\n         *\r\n         * @return DOCUMENT ME!\r\n         */\r\n        public Logger getLogger () {\r\n            return logger;\r\n        }\r\n    \r\n        /**\r\n         * Sets the logging level.\r\n         *\r\n         * @param level DOCUMENT ME!\r\n         */\r\n        public void setLevel (Level level) {\r\n            this.level = level;\r\n        }\r\n    \r\n        /**\r\n         * Returns the logging level.\r\n         *\r\n         * @return DOCUMENT ME!\r\n         */\r\n        public Level getLevel () {\r\n            return level;\r\n        }\r\n    \r\n        /**\r\n         * Writes a byte to the output stream. This method flushes automatically at the end of a line.\r\n         *\r\n         * @param b DOCUMENT ME!\r\n         */\r\n        public void write (int b) {\r\n            byte[] bytes = new byte[1];\r\n            bytes[0] = (byte) (b &amp; 0xff);\r\n            mem = mem + new String(bytes);\r\n    \r\n            if (mem.endsWith (&quot;\\n&quot;)) {\r\n                mem = mem.substring (0, mem.length () - 1);\r\n                flush ();\r\n            }\r\n        }\r\n    \r\n        /**\r\n         * Flushes the output stream.\r\n         */\r\n        public void flush () {\r\n            logger.log (level, mem);\r\n            mem = &quot;&quot;;\r\n        }\r\n    }\r\n\r\n  [1]: https://web.archive.org/web/20130527080241/http://www.java2s.com/Open-Source/Java/Testing/jacareto/jacareto/toolkit/log4j/LogOutputStream.java.htm","title":"Log4J: How do I redirect an OutputStream or Writer to logger&#39;s writer(s)?","body":"<p>My suggestion is, why dont you write your OutputStream then?! I was about to write one for you, but I found this good example on the net, check it out!</p>\n\n<p><a href=\"https://web.archive.org/web/20130527080241/http://www.java2s.com/Open-Source/Java/Testing/jacareto/jacareto/toolkit/log4j/LogOutputStream.java.htm\" rel=\"noreferrer\">LogOutputStream.java</a></p>\n\n<pre><code>/*\n * Jacareto Copyright (c) 2002-2005\n * Applied Computer Science Research Group, Darmstadt University of\n * Technology, Institute of Mathematics &amp; Computer Science,\n * Ludwigsburg University of Education, and Computer Based\n * Learning Research Group, Aachen University. All rights reserved.\n *\n * Jacareto is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public\n * License as published by the Free Software Foundation; either\n * version 2 of the License, or (at your option) any later version.\n *\n * Jacareto is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * General Public License for more details.\n *\n * You should have received a copy of the GNU General Public\n * License along with Jacareto; if not, write to the Free\n * Software Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.\n *\n */\n\npackage jacareto.toolkit.log4j;\n\n\nimport org.apache.log4j.Level;\nimport org.apache.log4j.Logger;\n\nimport java.io.OutputStream;\n\n/**\n * This class logs all bytes written to it as output stream with a specified logging level.\n *\n * @author &lt;a href=\"mailto:cspannagel@web.de\"&gt;Christian Spannagel&lt;/a&gt;\n * @version 1.0\n */\npublic class LogOutputStream extends OutputStream {\n    /** The logger where to log the written bytes. */\n    private Logger logger;\n\n    /** The level. */\n    private Level level;\n\n    /** The internal memory for the written bytes. */\n    private String mem;\n\n    /**\n     * Creates a new log output stream which logs bytes to the specified logger with the specified\n     * level.\n     *\n     * @param logger the logger where to log the written bytes\n     * @param level the level\n     */\n    public LogOutputStream (Logger logger, Level level) {\n        setLogger (logger);\n        setLevel (level);\n        mem = \"\";\n    }\n\n    /**\n     * Sets the logger where to log the bytes.\n     *\n     * @param logger the logger\n     */\n    public void setLogger (Logger logger) {\n        this.logger = logger;\n    }\n\n    /**\n     * Returns the logger.\n     *\n     * @return DOCUMENT ME!\n     */\n    public Logger getLogger () {\n        return logger;\n    }\n\n    /**\n     * Sets the logging level.\n     *\n     * @param level DOCUMENT ME!\n     */\n    public void setLevel (Level level) {\n        this.level = level;\n    }\n\n    /**\n     * Returns the logging level.\n     *\n     * @return DOCUMENT ME!\n     */\n    public Level getLevel () {\n        return level;\n    }\n\n    /**\n     * Writes a byte to the output stream. This method flushes automatically at the end of a line.\n     *\n     * @param b DOCUMENT ME!\n     */\n    public void write (int b) {\n        byte[] bytes = new byte[1];\n        bytes[0] = (byte) (b &amp; 0xff);\n        mem = mem + new String(bytes);\n\n        if (mem.endsWith (\"\\n\")) {\n            mem = mem.substring (0, mem.length () - 1);\n            flush ();\n        }\n    }\n\n    /**\n     * Flushes the output stream.\n     */\n    public void flush () {\n        logger.log (level, mem);\n        mem = \"\";\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3431913,"reputation":10478,"user_id":2876079,"accept_rate":71,"display_name":"Stefan"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1424247936,"creation_date":1424247936,"answer_id":28579006,"question_id":6995946,"body_markdown":"Source: http://sysgears.com/articles/how-to-redirect-stdout-and-stderr-writing-to-a-log4j-appender/\r\n\r\n&gt; Blockquote\r\n\r\n\r\nLog4j doesn&#39;t allow to catch stdout and stderr messages out of the box. However, if you are using third party components and have to log messages that they flush to the streams, then you can do a little trick and implement custom output stream that supports logging.\r\n\r\nThis has already been done by Jim Moore (see the LoggingOutputStream in log4j source code). The only issue is that the JimMoore&#39;s LoggingOutputStream requires org.apache.log4j.Category and org.apache.log4j.Priority which are now partially deprecated.\r\n\r\nHere is modified LoggingOutputStream that avoids deprecated methods:\r\n\r\n\r\n\r\n\t\r\n\r\n    public class LoggingOutputStream extends OutputStream {\r\n    \r\n        /**\r\n         * Default number of bytes in the buffer.\r\n         */\r\n        private static final int DEFAULT_BUFFER_LENGTH = 2048;\r\n    \r\n        /**\r\n         * Indicates stream state.\r\n         */\r\n        private boolean hasBeenClosed = false;\r\n    \r\n        /**\r\n         * Internal buffer where data is stored.\r\n         */\r\n        private byte[] buf;\r\n    \r\n        /**\r\n         * The number of valid bytes in the buffer.\r\n         */\r\n        private int count;\r\n    \r\n        /**\r\n         * Remembers the size of the buffer.\r\n         */\r\n        private int curBufLength;\r\n    \r\n        /**\r\n         * The logger to write to.\r\n         */\r\n        private Logger log;\r\n    \r\n        /**\r\n         * The log level.\r\n         */\r\n        private Level level;\r\n    \r\n        /**\r\n         * Creates the Logging instance to flush to the given logger.\r\n         *\r\n         * @param log         the Logger to write to\r\n         * @param level       the log level\r\n         * @throws IllegalArgumentException in case if one of arguments\r\n         *                                  is  null.\r\n         */\r\n        public LoggingOutputStream(final Logger log,\r\n                                   final Level level)\r\n                throws IllegalArgumentException {\r\n            if (log == null || level == null) {\r\n                throw new IllegalArgumentException(\r\n                        &quot;Logger or log level must be not null&quot;);\r\n            }\r\n            this.log = log;\r\n            this.level = level;\r\n            curBufLength = DEFAULT_BUFFER_LENGTH;\r\n            buf = new byte[curBufLength];\r\n            count = 0;\r\n        }\r\n    \r\n        /**\r\n         * Writes the specified byte to this output stream.\r\n         *\r\n         * @param b the byte to write\r\n         * @throws IOException if an I/O error occurs.\r\n         */\r\n        public void write(final int b) throws IOException {\r\n            if (hasBeenClosed) {\r\n                throw new IOException(&quot;The stream has been closed.&quot;);\r\n            }\r\n            // don&#39;t log nulls\r\n            if (b == 0) {\r\n                return;\r\n            }\r\n            // would this be writing past the buffer?\r\n            if (count == curBufLength) {\r\n                // grow the buffer\r\n                final int newBufLength = curBufLength +\r\n                        DEFAULT_BUFFER_LENGTH;\r\n                final byte[] newBuf = new byte[newBufLength];\r\n                System.arraycopy(buf, 0, newBuf, 0, curBufLength);\r\n                buf = newBuf;\r\n                curBufLength = newBufLength;\r\n            }\r\n    \r\n            buf[count] = (byte) b;\r\n            count++;\r\n        }\r\n    \r\n        /**\r\n         * Flushes this output stream and forces any buffered output\r\n         * bytes to be written out.\r\n         */\r\n        public void flush() {\r\n            if (count == 0) {\r\n                return;\r\n            }\r\n            final byte[] bytes = new byte[count];\r\n            System.arraycopy(buf, 0, bytes, 0, count);\r\n            String str = new String(bytes);\r\n            log.log(level, str);\r\n            count = 0;\r\n        }\r\n    \r\n        /**\r\n         * Closes this output stream and releases any system resources\r\n         * associated with this stream.\r\n         */\r\n        public void close() {\r\n            flush();\r\n            hasBeenClosed = true;\r\n        }\r\n    }\r\n\r\nNow you can catch messages that are flushed to stderr or stdout in the following way:\r\n\r\n    System.setErr(new PrintStream(new LoggingOutputStream(\r\n            Logger.getLogger(&quot;outLog&quot;), Level.ERROR)));\r\n\r\nThe log4j.properties configuration:\r\n\r\n    log4j.logger.outLog=error, out_log\r\n    \r\n    log4j.appender.out_log=org.apache.log4j.RollingFileAppender\r\n    log4j.appender.out_log.file=/logs/error.log\r\n    log4j.appender.out_log.MaxFileSize=10MB\r\n    log4j.appender.out_log.threshold=error\r\n\r\nDmitriy Pavlenko,\r\nSysGears\r\n\r\n&gt; Blockquote\r\n","title":"Log4J: How do I redirect an OutputStream or Writer to logger&#39;s writer(s)?","body":"<p>Source: <a href=\"http://sysgears.com/articles/how-to-redirect-stdout-and-stderr-writing-to-a-log4j-appender/\" rel=\"nofollow\">http://sysgears.com/articles/how-to-redirect-stdout-and-stderr-writing-to-a-log4j-appender/</a></p>\n\n<blockquote>\n  <p>Blockquote</p>\n</blockquote>\n\n<p>Log4j doesn't allow to catch stdout and stderr messages out of the box. However, if you are using third party components and have to log messages that they flush to the streams, then you can do a little trick and implement custom output stream that supports logging.</p>\n\n<p>This has already been done by Jim Moore (see the LoggingOutputStream in log4j source code). The only issue is that the JimMoore's LoggingOutputStream requires org.apache.log4j.Category and org.apache.log4j.Priority which are now partially deprecated.</p>\n\n<p>Here is modified LoggingOutputStream that avoids deprecated methods:</p>\n\n<pre><code>public class LoggingOutputStream extends OutputStream {\n\n    /**\n     * Default number of bytes in the buffer.\n     */\n    private static final int DEFAULT_BUFFER_LENGTH = 2048;\n\n    /**\n     * Indicates stream state.\n     */\n    private boolean hasBeenClosed = false;\n\n    /**\n     * Internal buffer where data is stored.\n     */\n    private byte[] buf;\n\n    /**\n     * The number of valid bytes in the buffer.\n     */\n    private int count;\n\n    /**\n     * Remembers the size of the buffer.\n     */\n    private int curBufLength;\n\n    /**\n     * The logger to write to.\n     */\n    private Logger log;\n\n    /**\n     * The log level.\n     */\n    private Level level;\n\n    /**\n     * Creates the Logging instance to flush to the given logger.\n     *\n     * @param log         the Logger to write to\n     * @param level       the log level\n     * @throws IllegalArgumentException in case if one of arguments\n     *                                  is  null.\n     */\n    public LoggingOutputStream(final Logger log,\n                               final Level level)\n            throws IllegalArgumentException {\n        if (log == null || level == null) {\n            throw new IllegalArgumentException(\n                    \"Logger or log level must be not null\");\n        }\n        this.log = log;\n        this.level = level;\n        curBufLength = DEFAULT_BUFFER_LENGTH;\n        buf = new byte[curBufLength];\n        count = 0;\n    }\n\n    /**\n     * Writes the specified byte to this output stream.\n     *\n     * @param b the byte to write\n     * @throws IOException if an I/O error occurs.\n     */\n    public void write(final int b) throws IOException {\n        if (hasBeenClosed) {\n            throw new IOException(\"The stream has been closed.\");\n        }\n        // don't log nulls\n        if (b == 0) {\n            return;\n        }\n        // would this be writing past the buffer?\n        if (count == curBufLength) {\n            // grow the buffer\n            final int newBufLength = curBufLength +\n                    DEFAULT_BUFFER_LENGTH;\n            final byte[] newBuf = new byte[newBufLength];\n            System.arraycopy(buf, 0, newBuf, 0, curBufLength);\n            buf = newBuf;\n            curBufLength = newBufLength;\n        }\n\n        buf[count] = (byte) b;\n        count++;\n    }\n\n    /**\n     * Flushes this output stream and forces any buffered output\n     * bytes to be written out.\n     */\n    public void flush() {\n        if (count == 0) {\n            return;\n        }\n        final byte[] bytes = new byte[count];\n        System.arraycopy(buf, 0, bytes, 0, count);\n        String str = new String(bytes);\n        log.log(level, str);\n        count = 0;\n    }\n\n    /**\n     * Closes this output stream and releases any system resources\n     * associated with this stream.\n     */\n    public void close() {\n        flush();\n        hasBeenClosed = true;\n    }\n}\n</code></pre>\n\n<p>Now you can catch messages that are flushed to stderr or stdout in the following way:</p>\n\n<pre><code>System.setErr(new PrintStream(new LoggingOutputStream(\n        Logger.getLogger(\"outLog\"), Level.ERROR)));\n</code></pre>\n\n<p>The log4j.properties configuration:</p>\n\n<pre><code>log4j.logger.outLog=error, out_log\n\nlog4j.appender.out_log=org.apache.log4j.RollingFileAppender\nlog4j.appender.out_log.file=/logs/error.log\nlog4j.appender.out_log.MaxFileSize=10MB\nlog4j.appender.out_log.threshold=error\n</code></pre>\n\n<p>Dmitriy Pavlenko,\nSysGears</p>\n\n<blockquote>\n  <p>Blockquote</p>\n</blockquote>\n"},{"comments":[{"owner":{"account_id":2007569,"reputation":8114,"user_id":1797006,"accept_rate":63,"display_name":"Kalle Richter"},"score":2,"creation_date":1507872037,"post_id":31994442,"comment_id":80392174,"body_markdown":"Whilst this may theoretically answer the question, [it would be preferable](//meta.stackoverflow.com/q/8259) to include the essential parts of the answer here, and provide the link for reference.","body":"Whilst this may theoretically answer the question, <a href=\"//meta.stackoverflow.com/q/8259\">it would be preferable</a> to include the essential parts of the answer here, and provide the link for reference."}],"tags":[],"owner":{"account_id":325916,"reputation":5887,"user_id":697099,"accept_rate":40,"display_name":"gerardw"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1439485591,"creation_date":1439485591,"answer_id":31994442,"question_id":6995946,"body_markdown":"Since the previous example of a Writer that directed to Log4J went dead: [http://www.opensource.apple.com/source/JBoss/JBoss-737/jboss-all/common/src/main/org/jboss/logging/util/LoggerWriter.java][1]\r\n\r\n\r\n  [1]: http://www.opensource.apple.com/source/JBoss/JBoss-737/jboss-all/common/src/main/org/jboss/logging/util/LoggerWriter.java","title":"Log4J: How do I redirect an OutputStream or Writer to logger&#39;s writer(s)?","body":"<p>Since the previous example of a Writer that directed to Log4J went dead: <a href=\"http://www.opensource.apple.com/source/JBoss/JBoss-737/jboss-all/common/src/main/org/jboss/logging/util/LoggerWriter.java\" rel=\"nofollow\">http://www.opensource.apple.com/source/JBoss/JBoss-737/jboss-all/common/src/main/org/jboss/logging/util/LoggerWriter.java</a></p>\n"},{"tags":[],"owner":{"account_id":3867513,"reputation":1292,"user_id":3203688,"display_name":"Carlos Cuesta"},"comment_count":0,"down_vote_count":1,"up_vote_count":15,"is_accepted":false,"score":14,"last_activity_date":1689112198,"creation_date":1540821467,"answer_id":53047100,"question_id":6995946,"body_markdown":"You can use [Log4j IOStreams][1]\r\n\r\n&gt; The IOStreams component is a Log4j API extension that provides numerous classes from java.io that can either write to a Logger while writing to another OutputStream or Writer, or the contents read by an InputStream or Reader can be wiretapped by a Logger.\r\n\r\nYou can create an OutputStream in this way:\r\n\r\n    OutputStream outputStream = IoBuilder\r\n                .forLogger(logger)\r\n                .buildOutputStream();\r\n\r\nBelow is an example with Appium, starting it programmatically and controlling its log with log4j. \r\n\r\n        final Logger logger = LogManager.getLogger(getClass());\r\n    \r\n        cap = new DesiredCapabilities();\r\n        cap.setCapability(&quot;noReset&quot;, &quot;false&quot;);\r\n\r\n        //Build the Appium service\r\n        builder = new AppiumServiceBuilder();\r\n        builder.withIPAddress(&quot;127.0.0.1&quot;);\r\n        builder.usingPort(4723);\r\n        builder.withCapabilities(cap);\r\n        builder.withArgument(GeneralServerFlag.SESSION_OVERRIDE);\r\n        builder.withArgument(GeneralServerFlag.LOG_LEVEL,&quot;debug&quot;);\r\n\r\n        //Start the server with the builder\r\n        service = AppiumDriverLocalService.buildService(builder);\r\n\r\n        OutputStream outputStream = IoBuilder\r\n                .forLogger(logger)\r\n                .buildOutputStream();\r\n        service.addOutPutStream(outputStream);\r\n\r\n        service.start();\r\n\r\n  Hope this helps!!!\r\n\r\n  [1]: https://logging.apache.org/log4j/2.x/log4j-iostreams.html","title":"Log4J: How do I redirect an OutputStream or Writer to logger&#39;s writer(s)?","body":"<p>You can use <a href=\"https://logging.apache.org/log4j/2.x/log4j-iostreams.html\" rel=\"nofollow noreferrer\">Log4j IOStreams</a></p>\n<blockquote>\n<p>The IOStreams component is a Log4j API extension that provides numerous classes from java.io that can either write to a Logger while writing to another OutputStream or Writer, or the contents read by an InputStream or Reader can be wiretapped by a Logger.</p>\n</blockquote>\n<p>You can create an OutputStream in this way:</p>\n<pre><code>OutputStream outputStream = IoBuilder\n            .forLogger(logger)\n            .buildOutputStream();\n</code></pre>\n<p>Below is an example with Appium, starting it programmatically and controlling its log with log4j.</p>\n<pre><code>    final Logger logger = LogManager.getLogger(getClass());\n\n    cap = new DesiredCapabilities();\n    cap.setCapability(&quot;noReset&quot;, &quot;false&quot;);\n\n    //Build the Appium service\n    builder = new AppiumServiceBuilder();\n    builder.withIPAddress(&quot;127.0.0.1&quot;);\n    builder.usingPort(4723);\n    builder.withCapabilities(cap);\n    builder.withArgument(GeneralServerFlag.SESSION_OVERRIDE);\n    builder.withArgument(GeneralServerFlag.LOG_LEVEL,&quot;debug&quot;);\n\n    //Start the server with the builder\n    service = AppiumDriverLocalService.buildService(builder);\n\n    OutputStream outputStream = IoBuilder\n            .forLogger(logger)\n            .buildOutputStream();\n    service.addOutPutStream(outputStream);\n\n    service.start();\n</code></pre>\n<p>Hope this helps!!!</p>\n"},{"tags":[],"owner":{"account_id":23517,"reputation":2611,"user_id":58997,"accept_rate":86,"display_name":"roesslerj"},"comment_count":0,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1564566765,"creation_date":1564566765,"answer_id":57287993,"question_id":6995946,"body_markdown":"Building on [Arthur Neves][1] answer, I transferred this for Slf4J. I also improved this a bit using StringBuffer and directly casting byte to char:\r\n\r\n```\r\nimport java.io.OutputStream;\r\n\r\nimport org.slf4j.Logger;\r\n\r\npublic class LogOutputStream extends OutputStream {\r\n\tprivate final Logger logger;\r\n\r\n\t/** The internal memory for the written bytes. */\r\n\tprivate StringBuffer mem;\r\n\r\n\tpublic LogOutputStream( final Logger logger ) {\r\n\t\tthis.logger = logger;\r\n\t\tmem = new StringBuffer();\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void write( final int b ) {\r\n\t\tif ( (char) b == &#39;\\n&#39; ) {\r\n\t\t\tflush();\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tmem = mem.append( (char) b );\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void flush() {\r\n\t\tlogger.info( mem.toString() );\r\n\t\tmem = new StringBuffer();\r\n\t}\r\n}\r\n```\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/6996147/58997","title":"Log4J: How do I redirect an OutputStream or Writer to logger&#39;s writer(s)?","body":"<p>Building on <a href=\"https://stackoverflow.com/a/6996147/58997\">Arthur Neves</a> answer, I transferred this for Slf4J. I also improved this a bit using StringBuffer and directly casting byte to char:</p>\n\n<pre><code>import java.io.OutputStream;\n\nimport org.slf4j.Logger;\n\npublic class LogOutputStream extends OutputStream {\n    private final Logger logger;\n\n    /** The internal memory for the written bytes. */\n    private StringBuffer mem;\n\n    public LogOutputStream( final Logger logger ) {\n        this.logger = logger;\n        mem = new StringBuffer();\n    }\n\n    @Override\n    public void write( final int b ) {\n        if ( (char) b == '\\n' ) {\n            flush();\n            return;\n        }\n        mem = mem.append( (char) b );\n    }\n\n    @Override\n    public void flush() {\n        logger.info( mem.toString() );\n        mem = new StringBuffer();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":92486,"reputation":45195,"user_id":253468,"accept_rate":79,"display_name":"TWiStErRob"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1635631479,"creation_date":1635630979,"answer_id":69782433,"question_id":6995946,"body_markdown":"Looking through the answers here, it seems that none of them account clearly for decoding of bytes into Strings (extends CharSequence). `byte`s are `char`s are not equivalent (see OutputStream vs Writer in Java). A simple non-latin character e.g. 羼 may be represented as a series of bytes: E7 BE BC (UTF-8 sequence of 羼).\r\n\r\nReasons why others don&#39;t account for specific encoding:\r\n * `(char) b` will transform non-latin characters without interpreting UTF-8, so 羼 becomes `&#231;&#190;&#188;`, or &quot;R&#243;bert&quot; becomes &quot;R&#195;&#179;bert&quot; (_oh, home many times I&#39;ve seen this_). You might be more familiar with this beauty: `&#239;&#187;&#191;` (UTF-8 BOM)\r\n * `new String(bytes)` creates a String &quot;using the platform&#39;s default charset&quot;, which is dependent on where you run the code, so you will probably get different behavior on server and local machines. This is one better than `(char)b`, because you can at least specify the encoding.\r\n * `log4j-iostreams`&#39;s IoBuilder by default also uses the platform&#39;s default charset, but is configurable. Also this is not a generic solution, only works if you use SLF4J over Log4j 2. Although that was OP&#39;s question &#128517;.\r\n\r\n_(Forgive my Kotlin, you can do exactly the same in Java with different syntax.)_\r\n\r\n\tprivate fun loggerStream(outputLine: (line: String) -&gt; Unit): PipedOutputStream {\r\n\t\tval output = PipedOutputStream()\r\n\t\tval input = PipedInputStream(output).bufferedReader()\r\n\t\tthread(isDaemon = true) {\r\n\t\t\tinput.lineSequence().forEach(outputLine)\r\n\t\t}\r\n\t\treturn output\r\n\t}\r\n\r\nWith this solution:\r\n * The transition is performant (buffered)\r\n * The coding is specified consistently (bufferedReader has a default parameter: `charset = Charsets.UTF_8`, can be changed if necessary)\r\n * The overhead of encoding is in a background thread, although a bit strange, but this is how pipes work.\r\n * The code is simple/high level  \r\n   (no byte arrays, indices, copies, String constructors, etc.)\r\n\r\n---\r\n\r\nNote: I&#39;m using this to redirect Selenium ChromeDriver&#39;s output (defaults to stderr) into SLF4J over Log4J 2:\r\n\r\n\t\tval service = ChromeDriverService.createServiceWithConfig(options).apply {\r\n\t\t\tsendOutputTo(loggerStream(LoggerFactory.getLogger(ChromeDriver::class.java)::info))\r\n\t\t}\r\n\t\tval driver = ChromeDriver(service, options)","title":"Log4J: How do I redirect an OutputStream or Writer to logger&#39;s writer(s)?","body":"<p>Looking through the answers here, it seems that none of them account clearly for decoding of bytes into Strings (extends CharSequence). <code>byte</code>s are <code>char</code>s are not equivalent (see OutputStream vs Writer in Java). A simple non-latin character e.g. 羼 may be represented as a series of bytes: E7 BE BC (UTF-8 sequence of 羼).</p>\n<p>Reasons why others don't account for specific encoding:</p>\n<ul>\n<li><code>(char) b</code> will transform non-latin characters without interpreting UTF-8, so 羼 becomes <code>ç¾¼</code>, or &quot;Róbert&quot; becomes &quot;RÃ³bert&quot; (<em>oh, home many times I've seen this</em>). You might be more familiar with this beauty: <code>ï»¿</code> (UTF-8 BOM)</li>\n<li><code>new String(bytes)</code> creates a String &quot;using the platform's default charset&quot;, which is dependent on where you run the code, so you will probably get different behavior on server and local machines. This is one better than <code>(char)b</code>, because you can at least specify the encoding.</li>\n<li><code>log4j-iostreams</code>'s IoBuilder by default also uses the platform's default charset, but is configurable. Also this is not a generic solution, only works if you use SLF4J over Log4j 2. Although that was OP's question 😅.</li>\n</ul>\n<p><em>(Forgive my Kotlin, you can do exactly the same in Java with different syntax.)</em></p>\n<pre><code>private fun loggerStream(outputLine: (line: String) -&gt; Unit): PipedOutputStream {\n    val output = PipedOutputStream()\n    val input = PipedInputStream(output).bufferedReader()\n    thread(isDaemon = true) {\n        input.lineSequence().forEach(outputLine)\n    }\n    return output\n}\n</code></pre>\n<p>With this solution:</p>\n<ul>\n<li>The transition is performant (buffered)</li>\n<li>The coding is specified consistently (bufferedReader has a default parameter: <code>charset = Charsets.UTF_8</code>, can be changed if necessary)</li>\n<li>The overhead of encoding is in a background thread, although a bit strange, but this is how pipes work.</li>\n<li>The code is simple/high level<br />\n(no byte arrays, indices, copies, String constructors, etc.)</li>\n</ul>\n<hr />\n<p>Note: I'm using this to redirect Selenium ChromeDriver's output (defaults to stderr) into SLF4J over Log4J 2:</p>\n<pre><code>    val service = ChromeDriverService.createServiceWithConfig(options).apply {\n        sendOutputTo(loggerStream(LoggerFactory.getLogger(ChromeDriver::class.java)::info))\n    }\n    val driver = ChromeDriver(service, options)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1975639,"reputation":502,"user_id":1773490,"display_name":"Vincent Kelleher"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1645006068,"creation_date":1645006068,"answer_id":71139786,"question_id":6995946,"body_markdown":"After reading the https://stackoverflow.com/a/6996147/1773490 answer, I started having a look at existing `OutputStream` implementations and I stumbled upon `org.apache.commons.exec.LogOutputStream`.\r\n\r\nYou just need to include it to your project, like this with Maven :\r\n\r\n    // ...\r\n    &lt;dependencies&gt;\r\n        // ...\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n            &lt;artifactId&gt;commons-exec&lt;/artifactId&gt;\r\n            &lt;version&gt;1.3&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        // ...\r\n    &lt;/dependencies&gt;\r\n    // ...\r\n\r\nAnd this is an implementation example I use on a project using Selenium with the Chrome Driver and Google&#39;s Flogger :\r\n\r\n    package com.vk.logging;\r\n    \r\n    import com.google.common.flogger.FluentLogger;\r\n    import org.apache.commons.exec.LogOutputStream;\r\n\r\n    import java.util.List;\r\n    import java.util.logging.Level;\r\n    \r\n    public class FloggerOutputStream extends LogOutputStream {\r\n        \r\n        // TODO This can be replaced with your favorite logger\r\n        private static final FluentLogger LOGGER = FluentLogger.forEnclosingClass();\r\n\r\n        private static final List&lt;Level&gt; KNOWN_LEVELS = List.of(\r\n                Level.OFF,\r\n                Level.SEVERE,\r\n                Level.WARNING,\r\n                Level.INFO,\r\n                Level.CONFIG,\r\n                Level.FINE,\r\n                Level.FINER,\r\n                Level.FINEST,\r\n                Level.ALL\r\n        );\r\n    \r\n        @Override\r\n        protected void processLine(String line, int logLevel) {\r\n            // TODO This can be replaced with your favorite logger\r\n            LOGGER.at(findClosestLevel(logLevel))\r\n                  .log(line);\r\n        }\r\n    \r\n        private Level findClosestLevel(int logLevel) {\r\n            try {\r\n                return Level.parse(String.valueOf(logLevel));\r\n            } catch (IllegalArgumentException e) {\r\n                // Find the closest level\r\n                for (Level knownLevel : KNOWN_LEVELS) {\r\n                    if (knownLevel.intValue() &lt; logLevel) {\r\n                        return knownLevel;\r\n                    }\r\n                }\r\n            }\r\n    \r\n            throw new IllegalArgumentException(\r\n                    &quot;Log level &quot; + logLevel + &quot; cannot be mapped to a known log level&quot;);\r\n        }\r\n    }\r\n\r\nNormally there shouldn&#39;t be any weird `logLevel` but that corner case is managed by finding the closest known log level.\r\n\r\nHope this helps &#128522;","title":"Log4J: How do I redirect an OutputStream or Writer to logger&#39;s writer(s)?","body":"<p>After reading the <a href=\"https://stackoverflow.com/a/6996147/1773490\">https://stackoverflow.com/a/6996147/1773490</a> answer, I started having a look at existing <code>OutputStream</code> implementations and I stumbled upon <code>org.apache.commons.exec.LogOutputStream</code>.</p>\n<p>You just need to include it to your project, like this with Maven :</p>\n<pre><code>// ...\n&lt;dependencies&gt;\n    // ...\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n        &lt;artifactId&gt;commons-exec&lt;/artifactId&gt;\n        &lt;version&gt;1.3&lt;/version&gt;\n    &lt;/dependency&gt;\n    // ...\n&lt;/dependencies&gt;\n// ...\n</code></pre>\n<p>And this is an implementation example I use on a project using Selenium with the Chrome Driver and Google's Flogger :</p>\n<pre><code>package com.vk.logging;\n\nimport com.google.common.flogger.FluentLogger;\nimport org.apache.commons.exec.LogOutputStream;\n\nimport java.util.List;\nimport java.util.logging.Level;\n\npublic class FloggerOutputStream extends LogOutputStream {\n    \n    // TODO This can be replaced with your favorite logger\n    private static final FluentLogger LOGGER = FluentLogger.forEnclosingClass();\n\n    private static final List&lt;Level&gt; KNOWN_LEVELS = List.of(\n            Level.OFF,\n            Level.SEVERE,\n            Level.WARNING,\n            Level.INFO,\n            Level.CONFIG,\n            Level.FINE,\n            Level.FINER,\n            Level.FINEST,\n            Level.ALL\n    );\n\n    @Override\n    protected void processLine(String line, int logLevel) {\n        // TODO This can be replaced with your favorite logger\n        LOGGER.at(findClosestLevel(logLevel))\n              .log(line);\n    }\n\n    private Level findClosestLevel(int logLevel) {\n        try {\n            return Level.parse(String.valueOf(logLevel));\n        } catch (IllegalArgumentException e) {\n            // Find the closest level\n            for (Level knownLevel : KNOWN_LEVELS) {\n                if (knownLevel.intValue() &lt; logLevel) {\n                    return knownLevel;\n                }\n            }\n        }\n\n        throw new IllegalArgumentException(\n                &quot;Log level &quot; + logLevel + &quot; cannot be mapped to a known log level&quot;);\n    }\n}\n</code></pre>\n<p>Normally there shouldn't be any weird <code>logLevel</code> but that corner case is managed by finding the closest known log level.</p>\n<p>Hope this helps 😊</p>\n"}],"owner":{"account_id":455529,"reputation":1406,"user_id":853728,"accept_rate":60,"display_name":"java.is.for.desktop.indeed"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52562,"favorite_count":0,"down_vote_count":0,"up_vote_count":39,"accepted_answer_id":6996147,"answer_count":7,"score":39,"last_activity_date":1689112198,"creation_date":1312891708,"question_id":6995946,"body_markdown":"I have a method which runs asynchronously after start, using OutputStream or Writer as parameter.\r\n\r\nIt acts as a recording adapter for an OutputStream or Writer (*it&#39;s a third party API I can&#39;t change*).\r\n\r\n**How could I pass Log4J&#39;s internal OutputStream or Writer to that method?**  \r\n*...because Log4J swallows System.out and System.err, I was using before.*","title":"Log4J: How do I redirect an OutputStream or Writer to logger&#39;s writer(s)?","body":"<p>I have a method which runs asynchronously after start, using OutputStream or Writer as parameter.</p>\n\n<p>It acts as a recording adapter for an OutputStream or Writer (<em>it's a third party API I can't change</em>).</p>\n\n<p><strong>How could I pass Log4J's internal OutputStream or Writer to that method?</strong><br>\n<em>...because Log4J swallows System.out and System.err, I was using before.</em></p>\n"},{"tags":["java","garbage-collection","executorservice"],"comments":[{"owner":{"account_id":1692034,"reputation":3196,"user_id":1554195,"display_name":"tquadrat"},"score":1,"creation_date":1689094739,"post_id":76664093,"comment_id":135163467,"body_markdown":"You may get your answer if you elaborate on what you want to achieve with the first approach in comparison with the second one. What do you believe to get from a fresh `ExecutorService` that you won&#39;t get from an already used one? Although you have to consider the uptime for your program: is it a server that is intended to run 24/7, or is it a one shot program (that may still run hours before it reaches it terminates as intended).","body":"You may get your answer if you elaborate on what you want to achieve with the first approach in comparison with the second one. What do you believe to get from a fresh <code>ExecutorService</code> that you won&#39;t get from an already used one? Although you have to consider the uptime for your program: is it a server that is intended to run 24/7, or is it a one shot program (that may still run hours before it reaches it terminates as intended)."},{"owner":{"account_id":265649,"reputation":53086,"user_id":552759,"display_name":"jtahlborn"},"score":1,"creation_date":1689094838,"post_id":76664093,"comment_id":135163485,"body_markdown":"there isn&#39;t a single answer to the question.  it all depends what you are looking for.  one solution may be more performant in some situations than the other.  one may use too many resources in some situations.  but it all depends on what your specific requirements are.","body":"there isn&#39;t a single answer to the question.  it all depends what you are looking for.  one solution may be more performant in some situations than the other.  one may use too many resources in some situations.  but it all depends on what your specific requirements are."},{"owner":{"account_id":17491509,"reputation":133,"user_id":12683575,"display_name":"Stranger95"},"score":0,"creation_date":1689096818,"post_id":76664093,"comment_id":135163840,"body_markdown":"thanks, I clarfied that this is a server running 24/7","body":"thanks, I clarfied that this is a server running 24/7"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1689099463,"post_id":76664093,"comment_id":135164361,"body_markdown":"This `shutdownExecutorGracefully` after every job subverts the entire timeout goal. When the job doesn’t respond to interruption, you are always waiting `TIMEOUT_MILLIS` *plus* `EXECUTOR_SERVICE_SHUTDOWN_TIMEOUT_MILLIS`, just for the sake of calling `shutdownNow()` which will have no effect in this scenario, as a job not responding to interruption when calling `cancel(true)` will not respond interruption when calling `shutdownNow()` either.","body":"This <code>shutdownExecutorGracefully</code> after every job subverts the entire timeout goal. When the job doesn’t respond to interruption, you are always waiting <code>TIMEOUT_MILLIS</code> <i>plus</i> <code>EXECUTOR_SERVICE_SHUTDOWN_TIMEOUT_MILLIS</code>, just for the sake of calling <code>shutdownNow()</code> which will have no effect in this scenario, as a job not responding to interruption when calling <code>cancel(true)</code> will not respond interruption when calling <code>shutdownNow()</code> either."}],"answers":[{"tags":[],"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689096645,"creation_date":1689094940,"answer_id":76664268,"question_id":76664093,"body_markdown":"Those two code fragments have vastly different performance characteristics:\r\n\r\nThe first fragment creates a single-thread threadpool for every invocation. If several threads call `doSomeWork()` concurrently each will have its threadpool and the `checkSmth(input)` will execute in parallel.\r\n\r\nThe second fragment uses a single-thread threadpool for all invocations. If multiple threads call `doSomework()` concurrently there will be only one thread for executing `checkSmth(input)` - the work is sequentialized and you will see more timeouts occuring (because the timeout for `future.get(Constants.TIMEOUT_MILLIS, TimeUnit.MILLISECONDS)` starts when you call `future.get()`, not when the task of the threadpool starts the work.)\r\n\r\nThe first fragment will create many short-lived threads and that was one of the reasons to introduce threadpools to Java: to avoid the creation of many short-lived threads.\r\n\r\nIMHO the better solution is to create only one threadpool (like in your second fragment), but (depending on your requirements) to create a threadpool with multiple threads.","title":"Most optimal way of working with ExecutorService in static method that is called very often?","body":"<p>Those two code fragments have vastly different performance characteristics:</p>\n<p>The first fragment creates a single-thread threadpool for every invocation. If several threads call <code>doSomeWork()</code> concurrently each will have its threadpool and the <code>checkSmth(input)</code> will execute in parallel.</p>\n<p>The second fragment uses a single-thread threadpool for all invocations. If multiple threads call <code>doSomework()</code> concurrently there will be only one thread for executing <code>checkSmth(input)</code> - the work is sequentialized and you will see more timeouts occuring (because the timeout for <code>future.get(Constants.TIMEOUT_MILLIS, TimeUnit.MILLISECONDS)</code> starts when you call <code>future.get()</code>, not when the task of the threadpool starts the work.)</p>\n<p>The first fragment will create many short-lived threads and that was one of the reasons to introduce threadpools to Java: to avoid the creation of many short-lived threads.</p>\n<p>IMHO the better solution is to create only one threadpool (like in your second fragment), but (depending on your requirements) to create a threadpool with multiple threads.</p>\n"}],"owner":{"account_id":17491509,"reputation":133,"user_id":12683575,"display_name":"Stranger95"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1689167271,"answer_count":1,"score":-1,"last_activity_date":1689110139,"creation_date":1689093470,"question_id":76664093,"body_markdown":"I&#39;m having some time-bound method that is getting called quite often on the server running 24/7 in a concurrent environment. \r\n\r\nI&#39;m considering some ways of optimising this.\r\n\r\nCase 1: no optimisation, just create ExecutorService on every method call and then shut it down: \r\n\r\n    public static boolean doSomeWork(@Nonnull String input) {\r\n        ExecutorService executorService = Executors.newSingleThreadExecutor();\r\n        Future&lt;Boolean&gt; future = executorService.submit(() -&gt; checkSmth(input));\r\n        try {\r\n            return future.get(Constants.TIMEOUT_MILLIS, TimeUnit.MILLISECONDS);\r\n        } catch (InterruptedException | ExecutionException | TimeoutException e) {\r\n            future.cancel(true);\r\n            return false;\r\n        } finally {\r\n            shutdownExecutorGracefully(executorService);\r\n        }\r\n    }\r\n\r\n    private static void shutdownExecutorGracefully(ExecutorService executorService) {\r\n        executorService.shutdown();\r\n        try {\r\n            if (!executorService.awaitTermination(Constants.EXECUTOR_SERVICE_SHUTDOWN_TIMEOUT_MILLIS, TimeUnit.MILLISECONDS)) {\r\n                executorService.shutdownNow();\r\n            }\r\n        } catch (InterruptedException e) {\r\n            executorService.shutdownNow();\r\n        }\r\n    }\r\n\r\n\r\nCase 2: make it a static field and never call `shutdown`:\r\n\r\n    private static final ExecutorService executorService = Executors.newSingleThreadExecutor();\r\n    \r\n    public static boolean doSomeWork(@Nonnull String input) {\r\n        Future&lt;Boolean&gt; future = executorService.submit(() -&gt; checkSmth(input));\r\n        try {\r\n            return future.get(Constants.TIMEOUT_MILLIS, TimeUnit.MILLISECONDS);\r\n        } catch (InterruptedException | ExecutionException | TimeoutException e) {\r\n            future.cancel(true);\r\n            return false;\r\n        }\r\n    }\r\n\r\nWhat way would be the most optimal from performance, GC and correctness perspectives?","title":"Most optimal way of working with ExecutorService in static method that is called very often?","body":"<p>I'm having some time-bound method that is getting called quite often on the server running 24/7 in a concurrent environment.</p>\n<p>I'm considering some ways of optimising this.</p>\n<p>Case 1: no optimisation, just create ExecutorService on every method call and then shut it down:</p>\n<pre><code>public static boolean doSomeWork(@Nonnull String input) {\n    ExecutorService executorService = Executors.newSingleThreadExecutor();\n    Future&lt;Boolean&gt; future = executorService.submit(() -&gt; checkSmth(input));\n    try {\n        return future.get(Constants.TIMEOUT_MILLIS, TimeUnit.MILLISECONDS);\n    } catch (InterruptedException | ExecutionException | TimeoutException e) {\n        future.cancel(true);\n        return false;\n    } finally {\n        shutdownExecutorGracefully(executorService);\n    }\n}\n\nprivate static void shutdownExecutorGracefully(ExecutorService executorService) {\n    executorService.shutdown();\n    try {\n        if (!executorService.awaitTermination(Constants.EXECUTOR_SERVICE_SHUTDOWN_TIMEOUT_MILLIS, TimeUnit.MILLISECONDS)) {\n            executorService.shutdownNow();\n        }\n    } catch (InterruptedException e) {\n        executorService.shutdownNow();\n    }\n}\n</code></pre>\n<p>Case 2: make it a static field and never call <code>shutdown</code>:</p>\n<pre><code>private static final ExecutorService executorService = Executors.newSingleThreadExecutor();\n\npublic static boolean doSomeWork(@Nonnull String input) {\n    Future&lt;Boolean&gt; future = executorService.submit(() -&gt; checkSmth(input));\n    try {\n        return future.get(Constants.TIMEOUT_MILLIS, TimeUnit.MILLISECONDS);\n    } catch (InterruptedException | ExecutionException | TimeoutException e) {\n        future.cancel(true);\n        return false;\n    }\n}\n</code></pre>\n<p>What way would be the most optimal from performance, GC and correctness perspectives?</p>\n"},{"tags":["java","gradle","user-defined-functions","confluent-schema-registry","ksqldb"],"owner":{"account_id":14230284,"reputation":9,"user_id":10279720,"display_name":"P.pp"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689109996,"creation_date":1688797649,"question_id":76641665,"body_markdown":"I&#39;m new for KSQLDB. I would like to create the UDAF with struct parameter. and I follow the instruction of this document https://docs.ksqldb.io/en/latest/how-to-guides/create-a-user-defined-function/.\r\n\r\nI can build jar without error but when calling this function. it shows this error:\r\n\r\n```\r\nksql&gt; SELECT a, stats(b) AS stats FROM s4 GROUP BY a EMIT CHANGES;\r\nFunction &#39;stats&#39; does not accept parameters (STRUCT&lt;C BIGINT&gt;).\r\nValid alternatives are:\r\n-----------------\r\nksql&gt; DESCRIBE FUNCTION stats;\r\n\r\nName        : STATS\r\nAuthor      : example user\r\nVersion     : 1.3.5\r\nOverview    : Maintains statistical values.\r\nType        : AGGREGATE\r\nJar         : /etc/ksqldb/ext/udf-0.0.1.jar\r\nVariations  : \r\n```\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    package io.confluent.developer;\r\n\r\n    import io.confluent.ksql.function.udaf.Udaf;\r\n    import io.confluent.ksql.function.udaf.UdafDescription;\r\n    import io.confluent.ksql.function.udaf.UdafFactory;\r\n\r\n    import org.apache.kafka.connect.data.Struct;\r\n    import org.apache.kafka.connect.data.SchemaBuilder;\r\n    import org.apache.kafka.connect.data.Schema;\r\n\r\n    import java.util.List;\r\n    import java.util.LinkedList;\r\n    import java.util.Iterator;\r\n\r\n    @UdafDescription(name = &quot;stats&quot;,\r\n                     author = &quot;example user&quot;,\r\n                     version = &quot;1.3.5&quot;,\r\n                     description = &quot;Maintains statistical values.&quot;)\r\n    public class StatsUdaf {\r\n\r\n        public static final Schema PARAM_SCHEMA = SchemaBuilder.struct().optional()\r\n            .field(&quot;C&quot;, Schema.OPTIONAL_INT64_SCHEMA)\r\n            .build();\r\n\r\n        public static final String PARAM_SCHEMA_DESCRIPTOR = &quot;STRUCT&lt;&quot; +\r\n            &quot;C BIGINT&quot; +\r\n            &quot;&gt;&quot;;\r\n\r\n        public static final Schema AGGREGATE_SCHEMA = SchemaBuilder.struct().optional()\r\n            .field(&quot;MIN&quot;, Schema.OPTIONAL_INT64_SCHEMA)\r\n            .field(&quot;MAX&quot;, Schema.OPTIONAL_INT64_SCHEMA)\r\n            .field(&quot;COUNT&quot;, Schema.OPTIONAL_INT64_SCHEMA)\r\n            .build();\r\n\r\n        public static final String AGGREGATE_SCHEMA_DESCRIPTOR = &quot;STRUCT&lt;&quot; +\r\n            &quot;MIN BIGINT,&quot; +\r\n            &quot;MAX BIGINT,&quot; +\r\n            &quot;COUNT BIGINT&quot; +\r\n            &quot;&gt;&quot;;\r\n\r\n        public static final Schema RETURN_SCHEMA = SchemaBuilder.struct().optional()\r\n            .field(&quot;MIN&quot;, Schema.OPTIONAL_INT64_SCHEMA)\r\n            .field(&quot;MAX&quot;, Schema.OPTIONAL_INT64_SCHEMA)\r\n            .field(&quot;COUNT&quot;, Schema.OPTIONAL_INT64_SCHEMA)\r\n            .field(&quot;DIFFERENTIAL&quot;, Schema.OPTIONAL_INT64_SCHEMA)\r\n            .build();\r\n\r\n        public static final String RETURN_SCHEMA_DESCRIPTOR = &quot;STRUCT&lt;&quot; +\r\n            &quot;MIN BIGINT,&quot; +\r\n            &quot;MAX BIGINT,&quot; +\r\n            &quot;COUNT BIGINT,&quot; +\r\n            &quot;DIFFERENTIAL BIGINT&quot; +\r\n            &quot;&gt;&quot;;\r\n\r\n        private StatsUdaf() {\r\n        }\r\n\r\n        @UdafFactory(description = &quot;Computes the min, max, count, and difference between min/max.&quot;,\r\n                     paramSchema = PARAM_SCHEMA_DESCRIPTOR,\r\n                     aggregateSchema = AGGREGATE_SCHEMA_DESCRIPTOR,\r\n                     returnSchema = RETURN_SCHEMA_DESCRIPTOR)\r\n        public static Udaf&lt;Struct, Struct, Struct&gt; createUdaf() {\r\n            return new StatsUdafImpl();\r\n        }\r\n\r\n        private static class StatsUdafImpl implements Udaf&lt;Struct, Struct, Struct&gt; {\r\n\r\n            @Override\r\n            public Struct initialize() {\r\n                return new Struct(AGGREGATE_SCHEMA);\r\n            }\r\n\r\n            @Override\r\n            public Struct aggregate(Struct newValue, Struct aggregateValue) {\r\n                long c = newValue.getInt64(&quot;C&quot;);\r\n\r\n                long min = Math.min(c, getMin(aggregateValue));\r\n                long max = Math.max(c, getMax(aggregateValue));\r\n                long count = (getCount(aggregateValue) + 1);\r\n\r\n                aggregateValue.put(&quot;MIN&quot;, min);\r\n                aggregateValue.put(&quot;MAX&quot;, max);\r\n                aggregateValue.put(&quot;COUNT&quot;, count);\r\n\r\n                return aggregateValue;\r\n            }\r\n\r\n            @Override\r\n            public Struct map(Struct intermediate) {\r\n                Struct result = new Struct(RETURN_SCHEMA);\r\n\r\n                long min = intermediate.getInt64(&quot;MIN&quot;);\r\n                long max = intermediate.getInt64(&quot;MAX&quot;);\r\n\r\n                result.put(&quot;MIN&quot;, min);\r\n                result.put(&quot;MAX&quot;, max);\r\n                result.put(&quot;COUNT&quot;, intermediate.getInt64(&quot;COUNT&quot;));\r\n                result.put(&quot;DIFFERENTIAL&quot;, max - min);\r\n\r\n                return result;\r\n            }\r\n\r\n            @Override\r\n            public Struct merge(Struct aggOne, Struct aggTwo) {\r\n                return aggOne;\r\n            }\r\n\r\n            private Long getMin(Struct aggregateValue) {\r\n                Long result = aggregateValue.getInt64(&quot;MIN&quot;);\r\n\r\n                if (result != null) {\r\n                    return result;\r\n                } else {\r\n                    return Long.MAX_VALUE;\r\n                }\r\n            }\r\n\r\n            private Long getMax(Struct aggregateValue) {\r\n                Long result = aggregateValue.getInt64(&quot;MAX&quot;);\r\n\r\n                if (result != null) {\r\n                    return result;\r\n                } else {\r\n                    return Long.MIN_VALUE;\r\n                }\r\n            }\r\n\r\n            private Long getCount(Struct aggregateValue) {\r\n                Long result = aggregateValue.getInt64(&quot;COUNT&quot;);\r\n\r\n                if (result != null) {\r\n                    return result;\r\n                } else {\r\n                    return 0L;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\ncan anyone help me to resolve it. Thanks you so much. \r\n","title":"KSQLDB-UDAF: how to pass schema parameter struct","body":"<p>I'm new for KSQLDB. I would like to create the UDAF with struct parameter. and I follow the instruction of this document <a href=\"https://docs.ksqldb.io/en/latest/how-to-guides/create-a-user-defined-function/\" rel=\"nofollow noreferrer\">https://docs.ksqldb.io/en/latest/how-to-guides/create-a-user-defined-function/</a>.</p>\n<p>I can build jar without error but when calling this function. it shows this error:</p>\n<pre><code>ksql&gt; SELECT a, stats(b) AS stats FROM s4 GROUP BY a EMIT CHANGES;\nFunction 'stats' does not accept parameters (STRUCT&lt;C BIGINT&gt;).\nValid alternatives are:\n-----------------\nksql&gt; DESCRIBE FUNCTION stats;\n\nName        : STATS\nAuthor      : example user\nVersion     : 1.3.5\nOverview    : Maintains statistical values.\nType        : AGGREGATE\nJar         : /etc/ksqldb/ext/udf-0.0.1.jar\nVariations  : \n</code></pre>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>package io.confluent.developer;\n\nimport io.confluent.ksql.function.udaf.Udaf;\nimport io.confluent.ksql.function.udaf.UdafDescription;\nimport io.confluent.ksql.function.udaf.UdafFactory;\n\nimport org.apache.kafka.connect.data.Struct;\nimport org.apache.kafka.connect.data.SchemaBuilder;\nimport org.apache.kafka.connect.data.Schema;\n\nimport java.util.List;\nimport java.util.LinkedList;\nimport java.util.Iterator;\n\n@UdafDescription(name = \"stats\",\n                 author = \"example user\",\n                 version = \"1.3.5\",\n                 description = \"Maintains statistical values.\")\npublic class StatsUdaf {\n\n    public static final Schema PARAM_SCHEMA = SchemaBuilder.struct().optional()\n        .field(\"C\", Schema.OPTIONAL_INT64_SCHEMA)\n        .build();\n\n    public static final String PARAM_SCHEMA_DESCRIPTOR = \"STRUCT&lt;\" +\n        \"C BIGINT\" +\n        \"&gt;\";\n\n    public static final Schema AGGREGATE_SCHEMA = SchemaBuilder.struct().optional()\n        .field(\"MIN\", Schema.OPTIONAL_INT64_SCHEMA)\n        .field(\"MAX\", Schema.OPTIONAL_INT64_SCHEMA)\n        .field(\"COUNT\", Schema.OPTIONAL_INT64_SCHEMA)\n        .build();\n\n    public static final String AGGREGATE_SCHEMA_DESCRIPTOR = \"STRUCT&lt;\" +\n        \"MIN BIGINT,\" +\n        \"MAX BIGINT,\" +\n        \"COUNT BIGINT\" +\n        \"&gt;\";\n\n    public static final Schema RETURN_SCHEMA = SchemaBuilder.struct().optional()\n        .field(\"MIN\", Schema.OPTIONAL_INT64_SCHEMA)\n        .field(\"MAX\", Schema.OPTIONAL_INT64_SCHEMA)\n        .field(\"COUNT\", Schema.OPTIONAL_INT64_SCHEMA)\n        .field(\"DIFFERENTIAL\", Schema.OPTIONAL_INT64_SCHEMA)\n        .build();\n\n    public static final String RETURN_SCHEMA_DESCRIPTOR = \"STRUCT&lt;\" +\n        \"MIN BIGINT,\" +\n        \"MAX BIGINT,\" +\n        \"COUNT BIGINT,\" +\n        \"DIFFERENTIAL BIGINT\" +\n        \"&gt;\";\n\n    private StatsUdaf() {\n    }\n\n    @UdafFactory(description = \"Computes the min, max, count, and difference between min/max.\",\n                 paramSchema = PARAM_SCHEMA_DESCRIPTOR,\n                 aggregateSchema = AGGREGATE_SCHEMA_DESCRIPTOR,\n                 returnSchema = RETURN_SCHEMA_DESCRIPTOR)\n    public static Udaf&lt;Struct, Struct, Struct&gt; createUdaf() {\n        return new StatsUdafImpl();\n    }\n\n    private static class StatsUdafImpl implements Udaf&lt;Struct, Struct, Struct&gt; {\n\n        @Override\n        public Struct initialize() {\n            return new Struct(AGGREGATE_SCHEMA);\n        }\n\n        @Override\n        public Struct aggregate(Struct newValue, Struct aggregateValue) {\n            long c = newValue.getInt64(\"C\");\n\n            long min = Math.min(c, getMin(aggregateValue));\n            long max = Math.max(c, getMax(aggregateValue));\n            long count = (getCount(aggregateValue) + 1);\n\n            aggregateValue.put(\"MIN\", min);\n            aggregateValue.put(\"MAX\", max);\n            aggregateValue.put(\"COUNT\", count);\n\n            return aggregateValue;\n        }\n\n        @Override\n        public Struct map(Struct intermediate) {\n            Struct result = new Struct(RETURN_SCHEMA);\n\n            long min = intermediate.getInt64(\"MIN\");\n            long max = intermediate.getInt64(\"MAX\");\n\n            result.put(\"MIN\", min);\n            result.put(\"MAX\", max);\n            result.put(\"COUNT\", intermediate.getInt64(\"COUNT\"));\n            result.put(\"DIFFERENTIAL\", max - min);\n\n            return result;\n        }\n\n        @Override\n        public Struct merge(Struct aggOne, Struct aggTwo) {\n            return aggOne;\n        }\n\n        private Long getMin(Struct aggregateValue) {\n            Long result = aggregateValue.getInt64(\"MIN\");\n\n            if (result != null) {\n                return result;\n            } else {\n                return Long.MAX_VALUE;\n            }\n        }\n\n        private Long getMax(Struct aggregateValue) {\n            Long result = aggregateValue.getInt64(\"MAX\");\n\n            if (result != null) {\n                return result;\n            } else {\n                return Long.MIN_VALUE;\n            }\n        }\n\n        private Long getCount(Struct aggregateValue) {\n            Long result = aggregateValue.getInt64(\"COUNT\");\n\n            if (result != null) {\n                return result;\n            } else {\n                return 0L;\n            }\n        }\n    }\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>can anyone help me to resolve it. Thanks you so much.</p>\n"},{"tags":["java","spring","spring-boot","multipartform-data","multipart"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1688298401,"post_id":76598698,"comment_id":135052727,"body_markdown":"Going by [this `spring.io` guide](https://spring.io/guides/gs/uploading-files/), the `MultipartFile` should also be a `RequestParam`.","body":"Going by <a href=\"https://spring.io/guides/gs/uploading-files/\" rel=\"nofollow noreferrer\">this <code>spring.io</code> guide</a>, the <code>MultipartFile</code> should also be a <code>RequestParam</code>."},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1688298563,"post_id":76598698,"comment_id":135052743,"body_markdown":"&quot;*Now I am trying to mimic the third-party REST endpoint for some testing...*&quot; - There are dedicated tools for this, e.g. [WireMock (`wiremock.org`)](https://wiremock.org/), [Citrus Integration Testing Framework (`citrusframework.org`)](https://citrusframework.org/) and [Mockoon (`mockoon.com`)](https://mockoon.com/).","body":"&quot;<i>Now I am trying to mimic the third-party REST endpoint for some testing...</i>&quot; - There are dedicated tools for this, e.g. <a href=\"https://wiremock.org/\" rel=\"nofollow noreferrer\">WireMock (<code>wiremock.org</code>)</a>, <a href=\"https://citrusframework.org/\" rel=\"nofollow noreferrer\">Citrus Integration Testing Framework (<code>citrusframework.org</code>)</a> and <a href=\"https://mockoon.com/\" rel=\"nofollow noreferrer\">Mockoon (<code>mockoon.com</code>)</a>."},{"owner":{"account_id":4845615,"reputation":1065,"user_id":3909315,"accept_rate":33,"display_name":"Thiagarajan Ramanathan"},"score":0,"creation_date":1688318272,"post_id":76598698,"comment_id":135055061,"body_markdown":"I am already using WireMock for testing locally. The third part REST endpoint is not accessible from the local machine. WireMock mock response is static. I need a dynamic response. So I am writing a wrapper around a third-party REST endpoint and deploying the same in PCF. I&#39;ve access to PCF from the local machine and PCF has access to the third-party REST endpoint.","body":"I am already using WireMock for testing locally. The third part REST endpoint is not accessible from the local machine. WireMock mock response is static. I need a dynamic response. So I am writing a wrapper around a third-party REST endpoint and deploying the same in PCF. I&#39;ve access to PCF from the local machine and PCF has access to the third-party REST endpoint."},{"owner":{"account_id":4845615,"reputation":1065,"user_id":3909315,"accept_rate":33,"display_name":"Thiagarajan Ramanathan"},"score":0,"creation_date":1688318400,"post_id":76598698,"comment_id":135055071,"body_markdown":"When I use RequestParam the request itself is not coming to the controller.","body":"When I use RequestParam the request itself is not coming to the controller."},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1688341481,"post_id":76598698,"comment_id":135057345,"body_markdown":"I cannot reproduce the issue. [This (`github.com`)](https://github.com/turing85/spring-file-upload/blob/main/src/main/java/de/turing85/spring/fileupload/UploadResource.java) seems to work fine.","body":"I cannot reproduce the issue. <a href=\"https://github.com/turing85/spring-file-upload/blob/main/src/main/java/de/turing85/spring/fileupload/UploadResource.java\" rel=\"nofollow noreferrer\">This (<code>github.com</code>)</a> seems to work fine."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1688365365,"post_id":76598698,"comment_id":135059143,"body_markdown":"You are seindg `TEXT/PLAIN` remove that header, the `MultipartFile` needs to be a `@RequestPart` or `@RequestParam` but not an `@RequestBody`. Also `datafile` and `dataFile` don&#39;t match so the parameters won&#39;t be resolved.","body":"You are seindg <code>TEXT&#47;PLAIN</code> remove that header, the <code>MultipartFile</code> needs to be a <code>@RequestPart</code> or <code>@RequestParam</code> but not an <code>@RequestBody</code>. Also <code>datafile</code> and <code>dataFile</code> don&#39;t match so the parameters won&#39;t be resolved."},{"owner":{"account_id":4845615,"reputation":1065,"user_id":3909315,"accept_rate":33,"display_name":"Thiagarajan Ramanathan"},"score":0,"creation_date":1688391835,"post_id":76598698,"comment_id":135064211,"body_markdown":"Thank you. but it did not work datafile and dataFile is a typo. I have datafile in all the places in code. Also I tried removing TEXT/PLAIN.  I cannot change the MultipartFile from request body to RequestPart. I do not have any control on third part implementation. When I changed it to @RequestPart I got the following exception &quot;org.springframework.web.multipart.support.MissingServletRequestPartException: Required request part &#39;datafile&#39; is not present]&quot;","body":"Thank you. but it did not work datafile and dataFile is a typo. I have datafile in all the places in code. Also I tried removing TEXT/PLAIN.  I cannot change the MultipartFile from request body to RequestPart. I do not have any control on third part implementation. When I changed it to @RequestPart I got the following exception &quot;org.springframework.web.multipart.support.MissingServletReq&zwnj;&#8203;uestPartException: Required request part &#39;datafile&#39; is not present]&quot;"}],"answers":[{"tags":[],"owner":{"account_id":4845615,"reputation":1065,"user_id":3909315,"accept_rate":33,"display_name":"Thiagarajan Ramanathan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689109226,"creation_date":1689109226,"answer_id":76665736,"question_id":76598698,"body_markdown":"Replaced \r\n\r\n    @RequestBody(required = true) MultipartFile datafile \r\n\r\nwith\r\n\r\n    @RequestParam(required = true) MultivalueMap&lt;String, ByteArrayResource&gt; datafile\r\n\r\nto make it work\r\n\r\n**Working Code**\r\n\r\n    @RestController\r\n    public class WrapperController {\r\n    \r\n    @PostMapping(value = “/test”)\r\n    public String visionPlusTester(@RequestHeader(HttpHeaders.AUTHORIZATION) String authorization,\r\n        @RequestParam(required = true) MultivalueMap&lt;String, ByteArrayResource&gt; datafile,\r\n        @RequestParam(value = “port”, defaultValue = “1234”, required = false) String port,\r\n        @RequestParam(value = “url”, defaultValue = “10.10.10.10”, required = false) String url) {\r\n    \r\n        String fileContent = String.valueOf(datafile.get(&quot;datafile&quot;));\r\n               return fileContent\r\n    }","title":"MultipartFile value is coming as null in Spring Boot Controller","body":"<p>Replaced</p>\n<pre><code>@RequestBody(required = true) MultipartFile datafile \n</code></pre>\n<p>with</p>\n<pre><code>@RequestParam(required = true) MultivalueMap&lt;String, ByteArrayResource&gt; datafile\n</code></pre>\n<p>to make it work</p>\n<p><strong>Working Code</strong></p>\n<pre><code>@RestController\npublic class WrapperController {\n\n@PostMapping(value = “/test”)\npublic String visionPlusTester(@RequestHeader(HttpHeaders.AUTHORIZATION) String authorization,\n    @RequestParam(required = true) MultivalueMap&lt;String, ByteArrayResource&gt; datafile,\n    @RequestParam(value = “port”, defaultValue = “1234”, required = false) String port,\n    @RequestParam(value = “url”, defaultValue = “10.10.10.10”, required = false) String url) {\n\n    String fileContent = String.valueOf(datafile.get(&quot;datafile&quot;));\n           return fileContent\n}\n</code></pre>\n"}],"owner":{"account_id":4845615,"reputation":1065,"user_id":3909315,"accept_rate":33,"display_name":"Thiagarajan Ramanathan"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":104,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689109226,"creation_date":1688297898,"question_id":76598698,"body_markdown":"I am consuming a third-party rest endpoint (B)  from my application A. It is working as expected. I am using the below code to call B from A\r\n\r\n\r\n    public static String invokeB(String requestJson) throws Exception\r\n    {\r\n    String response;\r\n    byte[] fileContent = requestJson.getBytes();\r\n    WebClient myClient = someLogic;\r\n    \r\n    HttpHeaders parts = new HttpHeaders();\r\n    parts.setConetentType(MediaType.TEXT_PLAIN);\r\n    \r\n    ByteArrayResource byteArrayResource = new ByteArrayResource(fileContent);\r\n    final HttpEntity&lt;ByteArrayResource&gt; partsEntity = new HttpEntity&lt;&gt;(byteArrayResource, parts);\r\n    \r\n    MultiValueMap&lt;String, HttpEntity&lt;?&gt;&gt; requestMap = new LinkedMultiValueMap&lt;&gt;();\r\n    requestMap.add(“datafile”, partsEntity);\r\n    \r\n    response = myClient.post().contentType(MediaType.MULTIPART_FORM_DATA).header(HttpHeaders.AUTHORIZATION, “”).body(BodyInserters.fromMultipartData(requestMap)).retrieve().bodyToMono(String.class).block();\r\n    return response;\r\n    }\r\n\r\n\r\nNow I am trying to mimic the third-party REST endpoint for some testing. Let’s call it C. When I try to access C from A. The request is coming to C but the request body MultipartFile is coming as null. I cannot make any changes in A or B. I can make code changes only in C.\r\n\r\n**My C Controller.**\r\n\r\n    @RestController\r\n    public class WrapperController {\r\n    \r\n    @PostMapping(value = “/test”)\r\n    public String visionPlusTester(@RequestHeader(HttpHeaders.AUTHORIZATION) String authorization,\r\n    \t@RequestBody(required = true) MultipartFile datafile,\r\n    \t@RequestParam(value = “port”, defaultValue = “1234”, required = false) String port,\r\n    \t@RequestParam(value = “url”, defaultValue = “10.10.10.10”, required = false) String url) {\r\n    \r\n    \tbyte[] fileContent = datafile.getBytes();\r\n               return “some JSON String”\r\n    }\r\n\r\n\r\nIn Application.java I tried adding MultipartResolver\r\n\r\n    @Bean\r\n    public MultipartResolver multipartResolver() {\r\n    \treturn new StandardServletMultipartResolver();\r\n    }\r\n\r\nIn the parameter, I changed @RequestBody with @RequestPart but with the setup, the request did not come to C. It is working perfectly when I test from POSTMAN.\r\nI am using spring-boot-starter-parent 2.7.11\r\n\r\nAlso added spring.servlet.multipart.enabled=true.  None of them worked. Any help is appreciated.","title":"MultipartFile value is coming as null in Spring Boot Controller","body":"<p>I am consuming a third-party rest endpoint (B)  from my application A. It is working as expected. I am using the below code to call B from A</p>\n<pre><code>public static String invokeB(String requestJson) throws Exception\n{\nString response;\nbyte[] fileContent = requestJson.getBytes();\nWebClient myClient = someLogic;\n\nHttpHeaders parts = new HttpHeaders();\nparts.setConetentType(MediaType.TEXT_PLAIN);\n\nByteArrayResource byteArrayResource = new ByteArrayResource(fileContent);\nfinal HttpEntity&lt;ByteArrayResource&gt; partsEntity = new HttpEntity&lt;&gt;(byteArrayResource, parts);\n\nMultiValueMap&lt;String, HttpEntity&lt;?&gt;&gt; requestMap = new LinkedMultiValueMap&lt;&gt;();\nrequestMap.add(“datafile”, partsEntity);\n\nresponse = myClient.post().contentType(MediaType.MULTIPART_FORM_DATA).header(HttpHeaders.AUTHORIZATION, “”).body(BodyInserters.fromMultipartData(requestMap)).retrieve().bodyToMono(String.class).block();\nreturn response;\n}\n</code></pre>\n<p>Now I am trying to mimic the third-party REST endpoint for some testing. Let’s call it C. When I try to access C from A. The request is coming to C but the request body MultipartFile is coming as null. I cannot make any changes in A or B. I can make code changes only in C.</p>\n<p><strong>My C Controller.</strong></p>\n<pre><code>@RestController\npublic class WrapperController {\n\n@PostMapping(value = “/test”)\npublic String visionPlusTester(@RequestHeader(HttpHeaders.AUTHORIZATION) String authorization,\n    @RequestBody(required = true) MultipartFile datafile,\n    @RequestParam(value = “port”, defaultValue = “1234”, required = false) String port,\n    @RequestParam(value = “url”, defaultValue = “10.10.10.10”, required = false) String url) {\n\n    byte[] fileContent = datafile.getBytes();\n           return “some JSON String”\n}\n</code></pre>\n<p>In Application.java I tried adding MultipartResolver</p>\n<pre><code>@Bean\npublic MultipartResolver multipartResolver() {\n    return new StandardServletMultipartResolver();\n}\n</code></pre>\n<p>In the parameter, I changed @RequestBody with @RequestPart but with the setup, the request did not come to C. It is working perfectly when I test from POSTMAN.\nI am using spring-boot-starter-parent 2.7.11</p>\n<p>Also added spring.servlet.multipart.enabled=true.  None of them worked. Any help is appreciated.</p>\n"},{"tags":["java","spring-data-jpa","spring-data","psql"],"owner":{"account_id":21439563,"reputation":1,"user_id":15794402,"display_name":"SteveWonderbelt"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689108361,"creation_date":1689106747,"question_id":76665505,"body_markdown":"I have a Spring Component class which calls a @Repository bean method in order to populate a list with these custom beans: \r\n\r\n```\r\nList&lt;BeanTypeForList&gt; beans = repoInstance.getDataForJurisdiction(jurisdiction);\r\n\r\n```\r\nThis line returns this error: \r\n\r\n```\r\nCaused by: org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [[SQL0104] Token CODEUNITS32 was not valid. Valid tokens: OCTETS.] [select u1_0.STAT,u1_0.ACCT,u1_0.NAME,u2_0.ULADD1 from RT47G.UST u1_0,RT47G.LOCINF u2_0 where u1_0.ACCT=u2_0.LACT and substring(u1_0.ACCT,1,2,codeunits32)=? order by u1_0.ACCT]; SQL [select u1_0.STAT,u1_0.ACCT,u1_0.NAME,u2_0.ULADD1 from RT47G.UST u1_0,RT47G.LOCINF u2_0 where u1_0.ACCT=u2_0.LACT and substring(u1_0.ACCT,1,2,codeunits32)=? order by u1_0.ACCT]\r\n        at org.springframework.orm.hibernate5.SessionFactoryUtils.convertHibernateAccessException(SessionFactoryUtils.java:193) ~[spring-orm-6.0.8.jar!/:6.0.8]\r\n        at org.springframework.orm.hibernate5.HibernateExceptionTranslator.convertHibernateAccessException(HibernateExceptionTranslator.java:100) ~[spring-orm-6.0.8.jar!/:6.0.8]\r\n        at org.springframework.orm.hibernate5.HibernateExceptionTranslator.translateExceptionIfPossible(HibernateExceptionTranslator.java:72) ~[spring-orm-6.0.8.jar!/:6.0.8]\r\n        at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61) ~[spring-tx-6.0.8.jar!/:6.0.8]\r\n        at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242) ~[spring-tx-6.0.8.jar!/:6.0.8]\r\n        at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152) ~[spring-tx-6.0.8.jar!/:6.0.8]\r\n        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.8.jar!/:6.0.8]\r\n        at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:134) ~[spring-data-jpa-3.0.5.jar!/:3.0.5]\r\n        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.8.jar!/:6.0.8]\r\n        at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97) ~[spring-aop-6.0.8.jar!/:6.0.8]\r\n        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.8.jar!/:6.0.8]\r\n        at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:223) ~[spring-aop-6.0.8.jar!/:6.0.8]\r\n        at jdk.proxy2.$Proxy135.getAccountLocationsForJurisdiction(Unknown Source) ~[?:?]\r\n        at com.company.dept.reports.processors.SanitationWorksheetMakerProcessor.populateAccountsPage(SanitationWorksheetMakerProcessor.java:710) ~[classes!/:?]\r\n        at com.company.dept.reports.processors.SanitationWorksheetMakerProcessor.populatePages(SanitationWorksheetMakerProcessor.java:462) ~[classes!/:?]\r\n        at com.company.dept.reports.processors.SanitationWorksheetMakerProcessor.buildAndPostWorksheet(SanitationWorksheetMakerProcessor.java:126) ~[classes!/:?]\r\n        at com.company.dept.reports.processors.SanitationWorksheetMakerProcessor.doWork(SanitationWorksheetMakerProcessor.java:114) ~[classes!/:?]\r\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]\r\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[?:?]\r\n        at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]\r\n        at java.lang.reflect.Method.invoke(Method.java:568) ~[?:?]\r\n        at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-6.0.8.jar!/:6.0.8]\r\n        at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.0.8.jar!/:6.0.8]\r\n        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.0.8.jar!/:6.0.8]\r\n        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750) ~[spring-aop-6.0.8.jar!/:6.0.8]\r\n        at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.0.8.jar!/:6.0.8]\r\n        at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391) ~[spring-tx-6.0.8.jar!/:6.0.8]\r\n        at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.8.jar!/:6.0.8]\r\n        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.8.jar!/:6.0.8]\r\n        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750) ~[spring-aop-6.0.8.jar!/:6.0.8]\r\n        at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:702) ~[spring-aop-6.0.8.jar!/:6.0.8]\r\n        at com.company.dept.reports.processors.SanitationWorksheetMakerProcessor$$SpringCGLIB$$0.doWork(&lt;generated&gt;) ~[classes!/:?]\r\n        at com.company.dept.reports.runner.SanitationWorksheetRunner.run(SanitationWorksheetRunner.java:31) ~[classes!/:?]\r\n        at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:760) ~[spring-boot-3.0.6.jar!/:3.0.6]\r\n        ... 12 more\r\n\r\n```\r\nSo from that, it looks like Spring JPA is inserting info into my Repository custom query, specifically here:`substring(u1_0.UCACCT,1,2,codeunits32)=? `\r\n\r\nWhereas the query is:\r\n\r\n```\r\n    @Query(value = &quot;select new com.company.dept.beans.reports.CustomerServiceLocationReportBean (&quot;\r\n            + &quot;c.customerStatus, c.accountNumber, c.customerName, l.streetAddress911) &quot;\r\n            + &quot;from UtilityCustomer c, UtilityAccountLocation l &quot;\r\n            + &quot;where c.accountNumber = l.lastAccountNumber &quot;\r\n            + &quot;and SUBSTRING(c.accountNumber,1,2) = :jurisdiction &quot;\r\n            + &quot;order by c.accountNumber&quot;)\r\n    List&lt;CustomerServiceLocationReportBean&gt; getDataForJurisdiction(@Param(&quot;jurisdiction&quot;) String jurisdiction);\r\n```\r\n\r\nSo it&#39;s kind of seems like Spring is inserting &quot;codeunits32&quot; into this substring function for some reason, and that is not recognized as valid input when the query is executed. \r\n\r\nThe line with the substring function should just check to see if the first character in the account number field matches the given jurisdiction value. \r\n\r\nWhen I remove the line with the substring function from the query, it runs successfully (besides not getting the data I want). \r\n\r\nI am accessing this same DB table elsewhere and it gives no errors, although that method has no Substring method use, so I&#39;m fairly sure it isn&#39;t a database issue.\r\n\r\nI&#39;ve tried `SUBSTRING(c.accountNumber,2,4) = :jurisdiction` and other variations on the index and string length but the same error is thrown. \r\n","title":"How do I fix a &quot;[SQL0104] Token CODEUNITS32 was not valid. Valid tokens: OCTETS.&quot; error, in Spring JPA?","body":"<p>I have a Spring Component class which calls a @Repository bean method in order to populate a list with these custom beans:</p>\n<pre><code>List&lt;BeanTypeForList&gt; beans = repoInstance.getDataForJurisdiction(jurisdiction);\n\n</code></pre>\n<p>This line returns this error:</p>\n<pre><code>Caused by: org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [[SQL0104] Token CODEUNITS32 was not valid. Valid tokens: OCTETS.] [select u1_0.STAT,u1_0.ACCT,u1_0.NAME,u2_0.ULADD1 from RT47G.UST u1_0,RT47G.LOCINF u2_0 where u1_0.ACCT=u2_0.LACT and substring(u1_0.ACCT,1,2,codeunits32)=? order by u1_0.ACCT]; SQL [select u1_0.STAT,u1_0.ACCT,u1_0.NAME,u2_0.ULADD1 from RT47G.UST u1_0,RT47G.LOCINF u2_0 where u1_0.ACCT=u2_0.LACT and substring(u1_0.ACCT,1,2,codeunits32)=? order by u1_0.ACCT]\n        at org.springframework.orm.hibernate5.SessionFactoryUtils.convertHibernateAccessException(SessionFactoryUtils.java:193) ~[spring-orm-6.0.8.jar!/:6.0.8]\n        at org.springframework.orm.hibernate5.HibernateExceptionTranslator.convertHibernateAccessException(HibernateExceptionTranslator.java:100) ~[spring-orm-6.0.8.jar!/:6.0.8]\n        at org.springframework.orm.hibernate5.HibernateExceptionTranslator.translateExceptionIfPossible(HibernateExceptionTranslator.java:72) ~[spring-orm-6.0.8.jar!/:6.0.8]\n        at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61) ~[spring-tx-6.0.8.jar!/:6.0.8]\n        at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242) ~[spring-tx-6.0.8.jar!/:6.0.8]\n        at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152) ~[spring-tx-6.0.8.jar!/:6.0.8]\n        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.8.jar!/:6.0.8]\n        at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:134) ~[spring-data-jpa-3.0.5.jar!/:3.0.5]\n        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.8.jar!/:6.0.8]\n        at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97) ~[spring-aop-6.0.8.jar!/:6.0.8]\n        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.8.jar!/:6.0.8]\n        at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:223) ~[spring-aop-6.0.8.jar!/:6.0.8]\n        at jdk.proxy2.$Proxy135.getAccountLocationsForJurisdiction(Unknown Source) ~[?:?]\n        at com.company.dept.reports.processors.SanitationWorksheetMakerProcessor.populateAccountsPage(SanitationWorksheetMakerProcessor.java:710) ~[classes!/:?]\n        at com.company.dept.reports.processors.SanitationWorksheetMakerProcessor.populatePages(SanitationWorksheetMakerProcessor.java:462) ~[classes!/:?]\n        at com.company.dept.reports.processors.SanitationWorksheetMakerProcessor.buildAndPostWorksheet(SanitationWorksheetMakerProcessor.java:126) ~[classes!/:?]\n        at com.company.dept.reports.processors.SanitationWorksheetMakerProcessor.doWork(SanitationWorksheetMakerProcessor.java:114) ~[classes!/:?]\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[?:?]\n        at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]\n        at java.lang.reflect.Method.invoke(Method.java:568) ~[?:?]\n        at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-6.0.8.jar!/:6.0.8]\n        at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.0.8.jar!/:6.0.8]\n        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.0.8.jar!/:6.0.8]\n        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750) ~[spring-aop-6.0.8.jar!/:6.0.8]\n        at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.0.8.jar!/:6.0.8]\n        at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391) ~[spring-tx-6.0.8.jar!/:6.0.8]\n        at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.8.jar!/:6.0.8]\n        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.8.jar!/:6.0.8]\n        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750) ~[spring-aop-6.0.8.jar!/:6.0.8]\n        at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:702) ~[spring-aop-6.0.8.jar!/:6.0.8]\n        at com.company.dept.reports.processors.SanitationWorksheetMakerProcessor$$SpringCGLIB$$0.doWork(&lt;generated&gt;) ~[classes!/:?]\n        at com.company.dept.reports.runner.SanitationWorksheetRunner.run(SanitationWorksheetRunner.java:31) ~[classes!/:?]\n        at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:760) ~[spring-boot-3.0.6.jar!/:3.0.6]\n        ... 12 more\n\n</code></pre>\n<p>So from that, it looks like Spring JPA is inserting info into my Repository custom query, specifically here:<code>substring(u1_0.UCACCT,1,2,codeunits32)=? </code></p>\n<p>Whereas the query is:</p>\n<pre><code>    @Query(value = &quot;select new com.company.dept.beans.reports.CustomerServiceLocationReportBean (&quot;\n            + &quot;c.customerStatus, c.accountNumber, c.customerName, l.streetAddress911) &quot;\n            + &quot;from UtilityCustomer c, UtilityAccountLocation l &quot;\n            + &quot;where c.accountNumber = l.lastAccountNumber &quot;\n            + &quot;and SUBSTRING(c.accountNumber,1,2) = :jurisdiction &quot;\n            + &quot;order by c.accountNumber&quot;)\n    List&lt;CustomerServiceLocationReportBean&gt; getDataForJurisdiction(@Param(&quot;jurisdiction&quot;) String jurisdiction);\n</code></pre>\n<p>So it's kind of seems like Spring is inserting &quot;codeunits32&quot; into this substring function for some reason, and that is not recognized as valid input when the query is executed.</p>\n<p>The line with the substring function should just check to see if the first character in the account number field matches the given jurisdiction value.</p>\n<p>When I remove the line with the substring function from the query, it runs successfully (besides not getting the data I want).</p>\n<p>I am accessing this same DB table elsewhere and it gives no errors, although that method has no Substring method use, so I'm fairly sure it isn't a database issue.</p>\n<p>I've tried <code>SUBSTRING(c.accountNumber,2,4) = :jurisdiction</code> and other variations on the index and string length but the same error is thrown.</p>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":52822,"reputation":1089035,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"comment_count":0,"down_vote_count":0,"up_vote_count":16,"is_accepted":true,"score":16,"last_activity_date":1277377692,"creation_date":1277377692,"answer_id":3109370,"question_id":3109353,"body_markdown":"Because the `try` block in `test2()` doesn&#39;t have a `catch` block, only a `finally`. The code won&#39;t &quot;jump back&quot; to the caller to fall into `catch` and then &quot;jump ahead&quot; to the `finally` to continue there as you seem to think.","title":"What comes first - finally or catch block?","body":"<p>Because the <code>try</code> block in <code>test2()</code> doesn't have a <code>catch</code> block, only a <code>finally</code>. The code won't \"jump back\" to the caller to fall into <code>catch</code> and then \"jump ahead\" to the <code>finally</code> to continue there as you seem to think.</p>\n"},{"comments":[{"owner":{"account_id":114848,"reputation":134189,"user_id":301832,"accept_rate":60,"display_name":"Donal Fellows"},"score":0,"creation_date":1277382203,"post_id":3109373,"comment_id":3190601,"body_markdown":"I *think* that killing the thread results in a `java.lang.ThreadDeath` error being thrown, so `finally` blocks *are* executed in that case. (Interruptions are ordinary exceptions where they disrupt the execution path at all, of course.)","body":"I <i>think</i> that killing the thread results in a <code>java.lang.ThreadDeath</code> error being thrown, so <code>finally</code> blocks <i>are</i> executed in that case. (Interruptions are ordinary exceptions where they disrupt the execution path at all, of course.)"},{"owner":{"account_id":52241,"reputation":10736,"user_id":156061,"accept_rate":88,"display_name":"brainimus"},"score":0,"creation_date":1277382947,"post_id":3109373,"comment_id":3190706,"body_markdown":"A finally block will also stop execution if an exception is thrown in it.","body":"A finally block will also stop execution if an exception is thrown in it."}],"tags":[],"owner":{"account_id":41474,"reputation":2240,"user_id":120545,"display_name":"Adrian Regan"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1277386436,"creation_date":1277377708,"answer_id":3109373,"question_id":3109353,"body_markdown":"Because, **finally** is the very last code to execute in a try..catch block, regardless of whether an exception was thrown, thrown and then handled, or not thrown at all.\r\n\r\nIn fact the only time finally will **not** be called is if the JVM exits before it gets to execute it, or if the thread that is executing the try code is killed or interrupted.\r\n\r\nIn response to comments: \r\n[Java Description of finally][1]\r\n\r\n&gt;     Note: If the JVM exits while the try or catch code is being executed,\r\n&gt; then the finally block may not\r\n&gt; execute. Likewise, if the thread\r\n&gt; executing the try or catch code is\r\n&gt; interrupted or killed, the finally\r\n&gt; block may not execute even though the\r\n&gt; application as a whole continues.\r\n\r\n\r\nHowever you are right that a ThreadDeath exception is thrown and I can&#39;t find much on the specifics of what seems to be conflicting information from sun. It could be a question in itself.\r\n\r\n \r\n\r\n  [1]: http://java.sun.com/docs/books/tutorial/essential/exceptions/finally.html\r\n\r\n**finally** (pardon the pun) @brainimus, if you are in the finally and you throw an exception, then the finally code **is** being executed, my point was the conditions under which the finally code does not get executed.","title":"What comes first - finally or catch block?","body":"<p>Because, <strong>finally</strong> is the very last code to execute in a try..catch block, regardless of whether an exception was thrown, thrown and then handled, or not thrown at all.</p>\n\n<p>In fact the only time finally will <strong>not</strong> be called is if the JVM exits before it gets to execute it, or if the thread that is executing the try code is killed or interrupted.</p>\n\n<p>In response to comments: \n<a href=\"http://java.sun.com/docs/books/tutorial/essential/exceptions/finally.html\" rel=\"nofollow noreferrer\">Java Description of finally</a></p>\n\n<blockquote>\n<pre><code>Note: If the JVM exits while the try or catch code is being executed,\n</code></pre>\n  \n  <p>then the finally block may not\n  execute. Likewise, if the thread\n  executing the try or catch code is\n  interrupted or killed, the finally\n  block may not execute even though the\n  application as a whole continues.</p>\n</blockquote>\n\n<p>However you are right that a ThreadDeath exception is thrown and I can't find much on the specifics of what seems to be conflicting information from sun. It could be a question in itself.</p>\n\n<p><strong>finally</strong> (pardon the pun) @brainimus, if you are in the finally and you throw an exception, then the finally code <strong>is</strong> being executed, my point was the conditions under which the finally code does not get executed.</p>\n"},{"tags":[],"owner":{"account_id":142896,"reputation":35109,"user_id":350890,"accept_rate":100,"display_name":"Peter Tillemans"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1277377720,"creation_date":1277377720,"answer_id":3109376,"question_id":3109353,"body_markdown":"catch comes before finally in the same try-catch-finally scope.\r\n\r\nIt test2 there is no catch in the try-catch-finally scope of test2 so it does the finally before leaving the scope and falling in the higher catch.\r\n\r\n","title":"What comes first - finally or catch block?","body":"<p>catch comes before finally in the same try-catch-finally scope.</p>\n\n<p>It test2 there is no catch in the try-catch-finally scope of test2 so it does the finally before leaving the scope and falling in the higher catch.</p>\n"},{"tags":[],"owner":{"account_id":97818,"reputation":114824,"user_id":265143,"accept_rate":72,"display_name":"P&#233;ter T&#246;r&#246;k"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1277378535,"creation_date":1277377742,"answer_id":3109378,"question_id":3109353,"body_markdown":"Because the `finally` block is always executed right before exiting scope. The sequence of events after calling `test2()` is as follows:\r\n\r\n1. exception is thrown in `test2()`\r\n2. Since `test2` has no `catch` block, the exception is propagated up to the caller.\r\n3. Since `test2` has a `finally` block, it gets executed before returning from the method.\r\n4. the `catch` in the main method catches the exception.\r\n","title":"What comes first - finally or catch block?","body":"<p>Because the <code>finally</code> block is always executed right before exiting scope. The sequence of events after calling <code>test2()</code> is as follows:</p>\n\n<ol>\n<li>exception is thrown in <code>test2()</code></li>\n<li>Since <code>test2</code> has no <code>catch</code> block, the exception is propagated up to the caller.</li>\n<li>Since <code>test2</code> has a <code>finally</code> block, it gets executed before returning from the method.</li>\n<li>the <code>catch</code> in the main method catches the exception.</li>\n</ol>\n"},{"comments":[{"owner":{"account_id":2580719,"reputation":5582,"user_id":2237467,"accept_rate":60,"display_name":"Snackoverflow"},"score":0,"creation_date":1513682623,"post_id":3109380,"comment_id":82737345,"body_markdown":"What if you throw in the `catch` block after print?","body":"What if you throw in the <code>catch</code> block after print?"}],"tags":[],"owner":{"account_id":102991,"reputation":378292,"user_id":276101,"accept_rate":67,"display_name":"polygenelubricants"},"comment_count":1,"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1277379235,"creation_date":1277377756,"answer_id":3109380,"question_id":3109353,"body_markdown":"The key points are these:\r\n\r\n* In a `try-(catch)-finally` block, the `finally` for that particular `try` block is performed last\r\n* You can _nest_ `try` blocks within another, and each of those nested `try` blocks can have their own `finally`, which would be performed last for those individual `try` blocks\r\n\r\nSo yes, `finally` is performed last, but _only_ for the `try` block it&#39;s attached to.\r\n\r\nSo given the following snippet:\r\n\r\n    try {\r\n        try {\r\n            throw null;\r\n        } finally {\r\n            System.out.println(&quot;Finally (inner)&quot;);\r\n        }\r\n    } catch (Throwable e) {\r\n        System.out.println(&quot;Catch (outer)&quot;);\r\n    }\r\n\r\nThis prints ([as seen on ideone.com](http://ideone.com/2w2Jg)):\r\n\r\n    Finally (inner)\r\n    Catch (outer)\r\n\r\nObserve that:\r\n\r\n* Within `(inner)`, `Finally` is last (whether or not any `catch` was successful)\r\n* `Catch (outer)` follows `Finally (inner)`, but that&#39;s because `Finally (inner)` is nested inside _another_ `try` block within `(outer)`\r\n\r\nSimilarly, the following snippet:\r\n\r\n\t\ttry {\r\n\t\t\ttry {\r\n\t\t\t\tthrow null;\r\n\t\t\t} catch (Throwable e) {\r\n\t\t\t\tSystem.out.println(&quot;Catch (inner)&quot;);\r\n\t\t\t} finally {\r\n\t\t\t\tSystem.out.println(&quot;Finally (inner)&quot;);\r\n\t\t\t\tthrow null;\r\n\t\t\t}\r\n\t\t} catch (Throwable e) {\r\n\t\t\tSystem.out.println(&quot;Catch (outer)&quot;);\r\n\t\t}\r\n\r\nThis prints ([as seen on ideone.com](http://ideone.com/XE7WP)):\r\n\r\n    Catch (inner)\r\n    Finally (inner)\r\n    Catch (outer)\r\n\r\n---\r\n\r\n### References\r\n\r\n* [JLS 14.20.2 Execution of `try-catch-finally`](http://java.sun.com/docs/books/jls/third_edition/html/statements.html#14.20.2)\r\n\r\n### Related questions\r\n\r\n* [ In Java, does return trump finally? ](https://stackoverflow.com/questions/65035/in-java-does-return-trump-finally)\r\n* [ In Java, is the “finally” block guaranteed to be called (in the main method)? ](https://stackoverflow.com/questions/516049/in-java-is-the-finally-block-guaranteed-to-be-called-in-the-main-method)\r\n* [ Does a finally block always run? ](https://stackoverflow.com/questions/464098/does-a-finally-block-always-run)\r\n* [what happens to finally block in the following cases? ](https://stackoverflow.com/questions/2691927/what-happens-to-finally-block-in-the-following-cases)","title":"What comes first - finally or catch block?","body":"<p>The key points are these:</p>\n\n<ul>\n<li>In a <code>try-(catch)-finally</code> block, the <code>finally</code> for that particular <code>try</code> block is performed last</li>\n<li>You can <em>nest</em> <code>try</code> blocks within another, and each of those nested <code>try</code> blocks can have their own <code>finally</code>, which would be performed last for those individual <code>try</code> blocks</li>\n</ul>\n\n<p>So yes, <code>finally</code> is performed last, but <em>only</em> for the <code>try</code> block it's attached to.</p>\n\n<p>So given the following snippet:</p>\n\n<pre><code>try {\n    try {\n        throw null;\n    } finally {\n        System.out.println(\"Finally (inner)\");\n    }\n} catch (Throwable e) {\n    System.out.println(\"Catch (outer)\");\n}\n</code></pre>\n\n<p>This prints (<a href=\"http://ideone.com/2w2Jg\" rel=\"noreferrer\">as seen on ideone.com</a>):</p>\n\n<pre><code>Finally (inner)\nCatch (outer)\n</code></pre>\n\n<p>Observe that:</p>\n\n<ul>\n<li>Within <code>(inner)</code>, <code>Finally</code> is last (whether or not any <code>catch</code> was successful)</li>\n<li><code>Catch (outer)</code> follows <code>Finally (inner)</code>, but that's because <code>Finally (inner)</code> is nested inside <em>another</em> <code>try</code> block within <code>(outer)</code></li>\n</ul>\n\n<p>Similarly, the following snippet:</p>\n\n<pre><code>    try {\n        try {\n            throw null;\n        } catch (Throwable e) {\n            System.out.println(\"Catch (inner)\");\n        } finally {\n            System.out.println(\"Finally (inner)\");\n            throw null;\n        }\n    } catch (Throwable e) {\n        System.out.println(\"Catch (outer)\");\n    }\n</code></pre>\n\n<p>This prints (<a href=\"http://ideone.com/XE7WP\" rel=\"noreferrer\">as seen on ideone.com</a>):</p>\n\n<pre><code>Catch (inner)\nFinally (inner)\nCatch (outer)\n</code></pre>\n\n<hr>\n\n<h3>References</h3>\n\n<ul>\n<li><a href=\"http://java.sun.com/docs/books/jls/third_edition/html/statements.html#14.20.2\" rel=\"noreferrer\">JLS 14.20.2 Execution of <code>try-catch-finally</code></a></li>\n</ul>\n\n<h3>Related questions</h3>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/65035/in-java-does-return-trump-finally\"> In Java, does return trump finally? </a></li>\n<li><a href=\"https://stackoverflow.com/questions/516049/in-java-is-the-finally-block-guaranteed-to-be-called-in-the-main-method\"> In Java, is the “finally” block guaranteed to be called (in the main method)? </a></li>\n<li><a href=\"https://stackoverflow.com/questions/464098/does-a-finally-block-always-run\"> Does a finally block always run? </a></li>\n<li><a href=\"https://stackoverflow.com/questions/2691927/what-happens-to-finally-block-in-the-following-cases\">what happens to finally block in the following cases? </a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":131943,"reputation":684,"user_id":332324,"accept_rate":85,"display_name":"Pierre Gardin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1277378266,"creation_date":1277378266,"answer_id":3109431,"question_id":3109353,"body_markdown":"If you replace the functions by the methods&#39; code you get:\r\n\r\n    public class Main {\r\n    \r\n        static int a = 0;\r\n    \r\n        public static void main(String[] args) {\r\n            try {\r\n                try {\r\n                    throw new Exception();\r\n                }\r\n                catch (Exception e) {\r\n                    // I catch only the *first* exception thrown   \r\n                    System.out.println(a + &quot;: inner catch&quot;);\r\n                    a++;\r\n                    // let&#39;s go to the finally block\r\n                }\r\n                finally {\r\n                    System.out.println(a + &quot;: finally&quot;);\r\n                    a++;\r\n                    // we go on\r\n                }\r\n                System.out.println(&quot;---&quot;);\r\n                try {\r\n                    throw new Exception();\r\n                }\r\n                finally {\r\n                    // executed because at the same level\r\n                    System.out.println(a + &quot;: finally&quot;);\r\n                    a++;\r\n                }\r\n            }\r\n            catch(Exception e) {\r\n                // I catch only the *second* exception thrown\r\n                System.out.println(a + &quot;: outer catch&quot;);\r\n                a++;\r\n            }\r\n        }\r\n    \r\n\r\nThe first exception makes the catch block execute, then the first finally block is executed. It is not visible at the outer level because of the first catch block. The second exception is intercepted by the catch block at the outer level, but the finally, located at the inner level, is executed first.","title":"What comes first - finally or catch block?","body":"<p>If you replace the functions by the methods' code you get:</p>\n\n<pre><code>public class Main {\n\n    static int a = 0;\n\n    public static void main(String[] args) {\n        try {\n            try {\n                throw new Exception();\n            }\n            catch (Exception e) {\n                // I catch only the *first* exception thrown   \n                System.out.println(a + \": inner catch\");\n                a++;\n                // let's go to the finally block\n            }\n            finally {\n                System.out.println(a + \": finally\");\n                a++;\n                // we go on\n            }\n            System.out.println(\"---\");\n            try {\n                throw new Exception();\n            }\n            finally {\n                // executed because at the same level\n                System.out.println(a + \": finally\");\n                a++;\n            }\n        }\n        catch(Exception e) {\n            // I catch only the *second* exception thrown\n            System.out.println(a + \": outer catch\");\n            a++;\n        }\n    }\n</code></pre>\n\n<p>The first exception makes the catch block execute, then the first finally block is executed. It is not visible at the outer level because of the first catch block. The second exception is intercepted by the catch block at the outer level, but the finally, located at the inner level, is executed first.</p>\n"},{"tags":[],"owner":{"account_id":157164,"reputation":81,"user_id":374920,"display_name":"Pragnesh Modh"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1277381637,"creation_date":1277381637,"answer_id":3109800,"question_id":3109353,"body_markdown":"try - catch and finally are used for avoiding situations when a program may get terminated due to the occurance of unwanted error during the execution of the program.\r\n\r\nThe following points are important....\r\n\r\n1)There is only one try for a block......any number of catch statements for a block and only one finally for a block of statments\r\n\r\n2)finally is optional.\r\n\r\n3) catch is also optional but if the catch statement is missing then finally must appear.\r\n\r\n4) All catches corresponding to the child exceptions must be appearing before a catch for a parent exception..\r\n\r\n5) Irrespective of the occurance of the exception the statements present in the finally block are executed always with one exclusion.\r\n\r\ni.e. IF a System.out.exit() statement is encountered then the program terminates imediately hence finally can not be executed in such cases.\r\n\r\nNote: even there is an return statement appears in try block ...then also the code in finally is executed.","title":"What comes first - finally or catch block?","body":"<p>try - catch and finally are used for avoiding situations when a program may get terminated due to the occurance of unwanted error during the execution of the program.</p>\n\n<p>The following points are important....</p>\n\n<p>1)There is only one try for a block......any number of catch statements for a block and only one finally for a block of statments</p>\n\n<p>2)finally is optional.</p>\n\n<p>3) catch is also optional but if the catch statement is missing then finally must appear.</p>\n\n<p>4) All catches corresponding to the child exceptions must be appearing before a catch for a parent exception..</p>\n\n<p>5) Irrespective of the occurance of the exception the statements present in the finally block are executed always with one exclusion.</p>\n\n<p>i.e. IF a System.out.exit() statement is encountered then the program terminates imediately hence finally can not be executed in such cases.</p>\n\n<p>Note: even there is an return statement appears in try block ...then also the code in finally is executed.</p>\n"},{"tags":[],"owner":{"account_id":3357332,"reputation":1,"user_id":2819970,"display_name":"Imdad Soomro"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1437752538,"creation_date":1437752538,"answer_id":31614665,"question_id":3109353,"body_markdown":"Try block is executed first. Catch is executed if there is an exception in try block that needs to be caught. Finally block runs in both the cases whether there is exception or not. If there is return statement inside try block then before returning in try block, finally block gets executed and then return is executed in try block.","title":"What comes first - finally or catch block?","body":"<p>Try block is executed first. Catch is executed if there is an exception in try block that needs to be caught. Finally block runs in both the cases whether there is exception or not. If there is return statement inside try block then before returning in try block, finally block gets executed and then return is executed in try block.</p>\n"},{"tags":[],"owner":{"account_id":378670,"reputation":3959,"user_id":731548,"accept_rate":33,"display_name":"cquezel"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689108201,"creation_date":1689105878,"answer_id":76665421,"question_id":3109353,"body_markdown":"Although this does not apply to the specific question, it is nice to know that resources are closed before the catch and finally clauses.\r\n\r\n\t@Test\r\n\tpublic void test() {\r\n\t\ttry (AutoCloseable closeable = () -&gt; System.out.println(&quot;closeable&quot;)) {\r\n\t\t\tthrow new Exception(&quot;Test&quot;);\r\n\t\t} catch (Exception ex) {\r\n\t\t\tSystem.out.println(&quot;catch&quot;);\r\n\t\t} finally {\r\n\t\t\tSystem.out.println(&quot;finally&quot;);\r\n\t\t}\r\n\t}\r\n\r\nPrints:\r\n\r\n    closeable\r\n    catch\r\n    finally\r\n\r\n","title":"What comes first - finally or catch block?","body":"<p>Although this does not apply to the specific question, it is nice to know that resources are closed before the catch and finally clauses.</p>\n<pre><code>@Test\npublic void test() {\n    try (AutoCloseable closeable = () -&gt; System.out.println(&quot;closeable&quot;)) {\n        throw new Exception(&quot;Test&quot;);\n    } catch (Exception ex) {\n        System.out.println(&quot;catch&quot;);\n    } finally {\n        System.out.println(&quot;finally&quot;);\n    }\n}\n</code></pre>\n<p>Prints:</p>\n<pre><code>closeable\ncatch\nfinally\n</code></pre>\n"}],"owner":{"account_id":12462,"reputation":162446,"user_id":24545,"accept_rate":99,"display_name":"Yuval Adam"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":22705,"favorite_count":0,"down_vote_count":0,"up_vote_count":26,"accepted_answer_id":3109370,"answer_count":9,"score":26,"last_activity_date":1689108201,"creation_date":1277377513,"question_id":3109353,"body_markdown":"Consider the following test case:\r\n\r\n    public class Main {\r\n\r\n    \tstatic int a = 0;\r\n\r\n    \tpublic static void main(String[] args) {\r\n    \t\ttry {\r\n    \t\t\ttest();\r\n    \t\t\tSystem.out.println(&quot;---&quot;);\r\n    \t\t\ttest2();\r\n    \t\t}\r\n    \t\tcatch(Exception e) {\r\n    \t\t\tSystem.out.println(a + &quot;: outer catch&quot;);\r\n    \t\t\ta++;\r\n    \t\t}\r\n    \t}\r\n    \t\r\n    \tpublic static void test()\r\n    \t{\r\n    \t\ttry {\r\n    \t\t\tthrow new Exception();\r\n    \t\t}\r\n    \t\tcatch (Exception e) {\r\n    \t\t\tSystem.out.println(a + &quot;: inner catch&quot;);\r\n    \t\t\ta++;\r\n    \t\t}\r\n    \t\tfinally {\r\n    \t\t\tSystem.out.println(a + &quot;: finally&quot;);\r\n    \t\t\ta++;\r\n    \t\t}\r\n    \t}\r\n    \t\r\n    \tpublic static void test2() throws Exception\r\n    \t{\r\n    \t\ttry {\r\n    \t\t\tthrow new Exception();\r\n    \t\t}\r\n    \t\tfinally {\r\n    \t\t\tSystem.out.println(a + &quot;: finally&quot;);\r\n    \t\t\ta++;\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\nWith output:\r\n\r\n    0: inner catch\r\n    1: finally\r\n    ---\r\n    2: finally\r\n    3: outer catch\r\n\r\nWhat&#39;s the explanation for why in `test()` catch happens before finally while in `test2()` it&#39;s the other way around?","title":"What comes first - finally or catch block?","body":"<p>Consider the following test case:</p>\n\n<pre><code>public class Main {\n\n    static int a = 0;\n\n    public static void main(String[] args) {\n        try {\n            test();\n            System.out.println(\"---\");\n            test2();\n        }\n        catch(Exception e) {\n            System.out.println(a + \": outer catch\");\n            a++;\n        }\n    }\n\n    public static void test()\n    {\n        try {\n            throw new Exception();\n        }\n        catch (Exception e) {\n            System.out.println(a + \": inner catch\");\n            a++;\n        }\n        finally {\n            System.out.println(a + \": finally\");\n            a++;\n        }\n    }\n\n    public static void test2() throws Exception\n    {\n        try {\n            throw new Exception();\n        }\n        finally {\n            System.out.println(a + \": finally\");\n            a++;\n        }\n    }\n}\n</code></pre>\n\n<p>With output:</p>\n\n<pre><code>0: inner catch\n1: finally\n---\n2: finally\n3: outer catch\n</code></pre>\n\n<p>What's the explanation for why in <code>test()</code> catch happens before finally while in <code>test2()</code> it's the other way around?</p>\n"},{"tags":["java","java-8","nullpointerexception"],"comments":[{"owner":{"account_id":2843847,"reputation":55833,"user_id":2442804,"accept_rate":80,"display_name":"luk2302"},"score":44,"creation_date":1502447248,"post_id":45632920,"comment_id":78224619,"body_markdown":"https://en.wikipedia.org/wiki/Fail-fast","body":"<a href=\"https://en.wikipedia.org/wiki/Fail-fast\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Fail-fast</a>"},{"owner":{"account_id":2933712,"reputation":6419,"user_id":2513200,"accept_rate":83,"display_name":"Hulk"},"score":5,"creation_date":1502458369,"post_id":45632920,"comment_id":78232161,"body_markdown":"Possible duplicate of [Why explicitly throw a NullPointerException rather than letting it happen naturally?](https://stackoverflow.com/questions/43928556/why-explicitly-throw-a-nullpointerexception-rather-than-letting-it-happen-natura)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/43928556/why-explicitly-throw-a-nullpointerexception-rather-than-letting-it-happen-natura\">Why explicitly throw a NullPointerException rather than letting it happen naturally?</a>"},{"owner":{"account_id":247716,"reputation":1009,"user_id":2047385,"display_name":"xorcus"},"score":4,"creation_date":1586549235,"post_id":45632920,"comment_id":108176643,"body_markdown":"That approach to argument checking lets you cheat when you&#39;re writing unit tests. Spring also has utilities like that (see  https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/util/Assert.html ). If you have an &quot;if&quot; and want to have high unit test coverage, you have to cover both branches: when condition is met, and when condition is not met. If you use `Objects.requireNonNull`, your code has no branching so a single pass of a unit test will get you 100% coverage :-)","body":"That approach to argument checking lets you cheat when you&#39;re writing unit tests. Spring also has utilities like that (see  <a href=\"https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/util/Assert.html\" rel=\"nofollow noreferrer\">docs.spring.io/spring/docs/current/javadoc-api/org/&hellip;</a> ). If you have an &quot;if&quot; and want to have high unit test coverage, you have to cover both branches: when condition is met, and when condition is not met. If you use <code>Objects.requireNonNull</code>, your code has no branching so a single pass of a unit test will get you 100% coverage :-)"},{"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"score":0,"creation_date":1604502217,"post_id":45632920,"comment_id":114367049,"body_markdown":"[TOCTOU](https://en.wikipedia.org/wiki/Time-of-check_to_time-of-use)","body":"<a href=\"https://en.wikipedia.org/wiki/Time-of-check_to_time-of-use\" rel=\"nofollow noreferrer\">TOCTOU</a>"},{"owner":{"account_id":304562,"reputation":12355,"user_id":614141,"accept_rate":96,"display_name":"javing"},"score":0,"creation_date":1610623991,"post_id":45632920,"comment_id":116193869,"body_markdown":"all the explanations provided below are valid but in my opinion, I would look into why the method is receiving null in first place. I don&#39;t think is good practice to defensively check the inputs for null, it&#39;s better in my opinion to make sure the callers don&#39;t pass nulls.","body":"all the explanations provided below are valid but in my opinion, I would look into why the method is receiving null in first place. I don&#39;t think is good practice to defensively check the inputs for null, it&#39;s better in my opinion to make sure the callers don&#39;t pass nulls."},{"owner":{"account_id":111408,"reputation":9125,"user_id":294313,"accept_rate":86,"display_name":"SamB"},"score":0,"creation_date":1627768644,"post_id":45632920,"comment_id":121245760,"body_markdown":"@javing Well how are you going make sure nobody passes null without making sure bad things happen when they try it?","body":"@javing Well how are you going make sure nobody passes null without making sure bad things happen when they try it?"},{"owner":{"account_id":2078089,"reputation":9678,"user_id":1850851,"accept_rate":42,"display_name":"Christian Vincenzo Traina"},"score":0,"creation_date":1666253560,"post_id":45632920,"comment_id":130893550,"body_markdown":"I&#39;m here because IntelliJ advises to use `requireNonNull` everywhere. If the examples below can make sense, I&#39;ve to admit that the fixes advised by IntelliJ not always make","body":"I&#39;m here because IntelliJ advises to use <code>requireNonNull</code> everywhere. If the examples below can make sense, I&#39;ve to admit that the fixes advised by IntelliJ not always make"}],"answers":[{"comments":[{"owner":{"account_id":305249,"reputation":42705,"user_id":615306,"accept_rate":51,"display_name":"Kirill Rakhman"},"score":51,"creation_date":1502804689,"post_id":45632962,"comment_id":78346202,"body_markdown":"You can make your code more compact by writing `this.bar = Objects.requireNonNull(bar, &quot;bar must not be null&quot;);`","body":"You can make your code more compact by writing <code>this.bar = Objects.requireNonNull(bar, &quot;bar must not be null&quot;);</code>"},{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":6,"creation_date":1502804942,"post_id":45632962,"comment_id":78346360,"body_markdown":"@KirillRakhman Teaching GhostCat something cool I didn&#39;t know about --&gt; winning a ticket in the GhostCat upvote lottery.","body":"@KirillRakhman Teaching GhostCat something cool I didn&#39;t know about --&gt; winning a ticket in the GhostCat upvote lottery."},{"owner":{"account_id":170189,"reputation":13749,"user_id":396732,"accept_rate":73,"display_name":"Kawu"},"score":2,"creation_date":1543918095,"post_id":45632962,"comment_id":94082003,"body_markdown":"I think comment #1 here is the actual benefit of `Objects.requireNonNull(bar, &quot;bar must not be null&quot;);`. Thanks for this one.","body":"I think comment #1 here is the actual benefit of <code>Objects.requireNonNull(bar, &quot;bar must not be null&quot;);</code>. Thanks for this one."},{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":0,"creation_date":1543918594,"post_id":45632962,"comment_id":94082326,"body_markdown":"@Kawu Sure, that is why I edited my answer back then to include that thing, which I didnt know either, or any of the people in my team ;-)","body":"@Kawu Sure, that is why I edited my answer back then to include that thing, which I didnt know either, or any of the people in my team ;-)"},{"owner":{"account_id":1590873,"reputation":7073,"user_id":1474211,"accept_rate":100,"display_name":"Mushtaq Jameel"},"score":0,"creation_date":1551001150,"post_id":45632962,"comment_id":96473296,"body_markdown":"Sure if fail fast is what we are going for we can still use something like guava&#39;s `com.google.common.base.Preconditions#checkNotNull(T)` which of course you need to add the guava library,  but why can&#39;t they follow the guava convention and throw an `IllegalArgumentException`","body":"Sure if fail fast is what we are going for we can still use something like guava&#39;s <code>com.google.common.base.Preconditions#checkNotNull(T)</code> which of course you need to add the guava library,  but why can&#39;t they follow the guava convention and throw an <code>IllegalArgumentException</code>"},{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":1,"creation_date":1551001498,"post_id":45632962,"comment_id":96473373,"body_markdown":"Which one was first, and why should &quot;the language&quot; people follow the authors of *some* library?! Why doesn&#39;t guava follow the Java lang behavior?!","body":"Which one was first, and why should &quot;the language&quot; people follow the authors of <i>some</i> library?! Why doesn&#39;t guava follow the Java lang behavior?!"},{"owner":{"account_id":164059,"reputation":1169,"user_id":386587,"display_name":"Erk"},"score":7,"creation_date":1563219159,"post_id":45632962,"comment_id":100619717,"body_markdown":"The `this.bar = Objects.requireNonNull(bar, &quot;bar must not be null&quot;);` is ok in constructors, but potentially dangerous in other methods if two or more variables are set in the same method. Example: https://talkwards.com/2018/11/03/one-thing-to-avoid-when-using-objects-requirenonnull-in-java-8/","body":"The <code>this.bar = Objects.requireNonNull(bar, &quot;bar must not be null&quot;);</code> is ok in constructors, but potentially dangerous in other methods if two or more variables are set in the same method. Example: <a href=\"https://talkwards.com/2018/11/03/one-thing-to-avoid-when-using-objects-requirenonnull-in-java-8/\" rel=\"nofollow noreferrer\">talkwards.com/2018/11/03/&hellip;</a>"},{"owner":{"account_id":3659760,"reputation":581,"user_id":3049908,"display_name":"maxime.bochon"},"score":4,"creation_date":1599491864,"post_id":45632962,"comment_id":112784397,"body_markdown":"Since `Objects.requireNonNull` is a static method, a static import can be done to make the code even shorter and easier to read: `this.bar = requireNonNull(...)`.","body":"Since <code>Objects.requireNonNull</code> is a static method, a static import can be done to make the code even shorter and easier to read: <code>this.bar = requireNonNull(...)</code>."},{"owner":{"account_id":2511785,"reputation":2698,"user_id":2184088,"accept_rate":12,"display_name":"Juan Mendez"},"score":0,"creation_date":1689107480,"post_id":45632962,"comment_id":135165813,"body_markdown":"for decency, please review the documentation. in no shape or form this method is described to be safe for nullability. In fact, this method is a last resource to explain the object has been checked not to be null..","body":"for decency, please review the documentation. in no shape or form this method is described to be safe for nullability. In fact, this method is a last resource to explain the object has been checked not to be null.."},{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":0,"creation_date":1689314082,"post_id":45632962,"comment_id":135198490,"body_markdown":"@JuanMendez I have no idea what your comment is supposed to mean. I am explaining that you use this method to check for objects to not be null, and when you use it to check your constructor arguments before assigning the value to a **final** field of the class, of course that field is guaranteed to be not null afterwards.","body":"@JuanMendez I have no idea what your comment is supposed to mean. I am explaining that you use this method to check for objects to not be null, and when you use it to check your constructor arguments before assigning the value to a <b>final</b> field of the class, of course that field is guaranteed to be not null afterwards."},{"owner":{"account_id":2511785,"reputation":2698,"user_id":2184088,"accept_rate":12,"display_name":"Juan Mendez"},"score":0,"creation_date":1689647087,"post_id":45632962,"comment_id":135239817,"body_markdown":"this method is NOT checking an object is not null.\nthis method ASSERTS the object is not null, but if it is null then you will get an null pointer exception.","body":"this method is NOT checking an object is not null. this method ASSERTS the object is not null, but if it is null then you will get an null pointer exception."},{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":0,"creation_date":1689688603,"post_id":45632962,"comment_id":135247026,"body_markdown":"Remember the question that was asked here. *you can control the point in time when the exception will be thrown* clearly states that this is about WHEN the null reference is communicated via an exception. There are only two paths to deal with null references: either to silently accept them, or to throw an exception. So, yes, asserting isn&#39;t checking, but the whole point of the exercise is to end up with either an exception, or a guaranteed to be not-null value.","body":"Remember the question that was asked here. <i>you can control the point in time when the exception will be thrown</i> clearly states that this is about WHEN the null reference is communicated via an exception. There are only two paths to deal with null references: either to silently accept them, or to throw an exception. So, yes, asserting isn&#39;t checking, but the whole point of the exercise is to end up with either an exception, or a guaranteed to be not-null value."}],"tags":[],"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"comment_count":12,"down_vote_count":1,"up_vote_count":399,"is_accepted":true,"score":398,"last_activity_date":1502804909,"creation_date":1502447278,"answer_id":45632962,"question_id":45632920,"body_markdown":"Because you can make things **explicit** by doing so. Like:\r\n\r\n    public class Foo {\r\n      private final Bar bar;\r\n\r\n      public Foo(Bar bar) {\r\n        Objects.requireNonNull(bar, &quot;bar must not be null&quot;);\r\n        this.bar = bar;\r\n      }\r\n\r\nOr shorter:\r\n\r\n      this.bar = Objects.requireNonNull(bar, &quot;bar must not be null&quot;);\r\n\r\nNow you **know**: \r\n\r\n - *when* a Foo object was successfully created using `new()` \r\n - *then* its *bar* field is **guaranteed** be non-null.\r\n\r\nCompare that to: you create a Foo object today, and **tomorrow** you invoke a method that uses that field and throws. Most likely, you will not know tomorrow why that reference was null *yesterday* when it got passed to the constructor!\r\n\r\nIn other words: by explicitly using this method to check *incoming* references you can **control** the point in time when the exception will be thrown. And most of the time, you want to *fail as fast as possible*!\r\n\r\nThe major advantages are:\r\n\r\n - as said, *controlled* behavior\r\n - easier debugging - because you throw up in the context of the object creation. At a point in time where you have a certain chance that your logs/traces tell you what went wrong!\r\n - and as shown above: the true power of this idea unfolds in conjunction with *final* fields. Because now *any other code* in your class can safely assume that `bar` isn&#39;t null - and thus you do not need any `if (bar == null)` checks in other places!\r\n\r\n","title":"Why should one use Objects.requireNonNull()?","body":"<p>Because you can make things <strong>explicit</strong> by doing so. Like:</p>\n\n<pre><code>public class Foo {\n  private final Bar bar;\n\n  public Foo(Bar bar) {\n    Objects.requireNonNull(bar, \"bar must not be null\");\n    this.bar = bar;\n  }\n</code></pre>\n\n<p>Or shorter:</p>\n\n<pre><code>  this.bar = Objects.requireNonNull(bar, \"bar must not be null\");\n</code></pre>\n\n<p>Now you <strong>know</strong>: </p>\n\n<ul>\n<li><em>when</em> a Foo object was successfully created using <code>new()</code> </li>\n<li><em>then</em> its <em>bar</em> field is <strong>guaranteed</strong> be non-null.</li>\n</ul>\n\n<p>Compare that to: you create a Foo object today, and <strong>tomorrow</strong> you invoke a method that uses that field and throws. Most likely, you will not know tomorrow why that reference was null <em>yesterday</em> when it got passed to the constructor!</p>\n\n<p>In other words: by explicitly using this method to check <em>incoming</em> references you can <strong>control</strong> the point in time when the exception will be thrown. And most of the time, you want to <em>fail as fast as possible</em>!</p>\n\n<p>The major advantages are:</p>\n\n<ul>\n<li>as said, <em>controlled</em> behavior</li>\n<li>easier debugging - because you throw up in the context of the object creation. At a point in time where you have a certain chance that your logs/traces tell you what went wrong!</li>\n<li>and as shown above: the true power of this idea unfolds in conjunction with <em>final</em> fields. Because now <em>any other code</em> in your class can safely assume that <code>bar</code> isn't null - and thus you do not need any <code>if (bar == null)</code> checks in other places!</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":2843847,"reputation":55833,"user_id":2442804,"accept_rate":80,"display_name":"luk2302"},"comment_count":0,"down_vote_count":4,"up_vote_count":181,"is_accepted":false,"score":177,"last_activity_date":1641754278,"creation_date":1502447339,"answer_id":45632988,"question_id":45632920,"body_markdown":"# [Fail-fast][1]\r\n\r\nThe code should crash as soon as possible. It should **not** do half of the work, dereference the null and only then crash, leaving half of some work done causing the system to be in an invalid state.\r\n\r\nThis is commonly called &quot;fail early&quot; or &quot;fail-fast&quot;.\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Fail-fast","title":"Why should one use Objects.requireNonNull()?","body":"<h1><a href=\"https://en.wikipedia.org/wiki/Fail-fast\" rel=\"noreferrer\">Fail-fast</a></h1>\n<p>The code should crash as soon as possible. It should <strong>not</strong> do half of the work, dereference the null and only then crash, leaving half of some work done causing the system to be in an invalid state.</p>\n<p>This is commonly called &quot;fail early&quot; or &quot;fail-fast&quot;.</p>\n"},{"tags":[],"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"comment_count":0,"down_vote_count":3,"up_vote_count":56,"is_accepted":false,"score":53,"last_activity_date":1502447395,"creation_date":1502447395,"answer_id":45633002,"question_id":45632920,"body_markdown":"&gt; But NullPointerException will be thrown anyway if a null object is dereferenced. So, why should one do this extra null check and throw NullPointerException?\r\n\r\nIt means you detect the problem *immediately* and *reliably*.\r\n\r\nConsider:\r\n\r\n- The reference may not be used until later in the method, after your code has already performed some side-effects\r\n- The reference may not be dereferenced in this method at all\r\n  - It could be passed to completely different code (i.e. cause and error are far apart in code space)\r\n  - It could be used much later (i.e. cause and error are far apart in time)\r\n- It may be used somewhere that a null reference *is* valid, but has an unintended effect\r\n\r\n.NET makes this better by separating `NullReferenceException` (&quot;you dereferenced a null value&quot;) from `ArgumentNullException` (&quot;you shouldn&#39;t have passed in null as an argument - and it was for *this* parameter). I wish Java did the same thing, but even with just a `NullPointerException`, it&#39;s still *much* easier to fix code if the error is thrown at the earliest point at which it can be detected.","title":"Why should one use Objects.requireNonNull()?","body":"<blockquote>\n  <p>But NullPointerException will be thrown anyway if a null object is dereferenced. So, why should one do this extra null check and throw NullPointerException?</p>\n</blockquote>\n\n<p>It means you detect the problem <em>immediately</em> and <em>reliably</em>.</p>\n\n<p>Consider:</p>\n\n<ul>\n<li>The reference may not be used until later in the method, after your code has already performed some side-effects</li>\n<li>The reference may not be dereferenced in this method at all\n\n<ul>\n<li>It could be passed to completely different code (i.e. cause and error are far apart in code space)</li>\n<li>It could be used much later (i.e. cause and error are far apart in time)</li>\n</ul></li>\n<li>It may be used somewhere that a null reference <em>is</em> valid, but has an unintended effect</li>\n</ul>\n\n<p>.NET makes this better by separating <code>NullReferenceException</code> (\"you dereferenced a null value\") from <code>ArgumentNullException</code> (\"you shouldn't have passed in null as an argument - and it was for <em>this</em> parameter). I wish Java did the same thing, but even with just a <code>NullPointerException</code>, it's still <em>much</em> easier to fix code if the error is thrown at the earliest point at which it can be detected.</p>\n"},{"comments":[{"owner":{"account_id":14830350,"reputation":290,"user_id":10709983,"display_name":"Jonathas Nascimento"},"score":2,"creation_date":1572569640,"post_id":45633006,"comment_id":103610398,"body_markdown":"Wow! Great explanation.","body":"Wow! Great explanation."},{"owner":{"account_id":8742254,"reputation":1070,"user_id":6538939,"display_name":"MarkyMarksFunkyBunch"},"score":2,"creation_date":1597157037,"post_id":45633006,"comment_id":112038663,"body_markdown":"I agree with @JonathasNascimento, very good explanation and use of examples.","body":"I agree with @JonathasNascimento, very good explanation and use of examples."}],"tags":[],"owner":{"account_id":100270,"reputation":127154,"user_id":270371,"accept_rate":33,"display_name":"davidxxx"},"comment_count":2,"down_vote_count":1,"up_vote_count":29,"is_accepted":false,"score":28,"last_activity_date":1563475077,"creation_date":1502447401,"answer_id":45633006,"question_id":45632920,"body_markdown":"Using `requireNonNull()` as first statements in a method allow to identify right now/fast the cause of the exception.    \r\nThe stacktrace indicates clearly that the exception was thrown as soon as the entry of the method **because the caller didn&#39;t respect the requirements/contract.** \r\nPassing a `null` object to another method *may* indeed provoke an exception at a time but the cause of the problem may be more complicated to understand as the exception will be thrown in a specific invocation on the `null` object that may be much further.  \r\n\r\n\r\n----------\r\n\r\n\r\nHere is a concrete and real example that shows why we have to favor fail fast in general and more particularly using `Object.requireNonNull()` or any way to perform a no null check on parameters designed to be not `null`.   \r\n\r\nSuppose a `Dictionary` class that composes a `LookupService` and a `List` of `String` representing words contained in. These fields are designed to be not `null` and one of these is passed in the  `Dictionary`  constructor.   \r\n\r\nNow suppose a &quot;bad&quot; implementation of `Dictionary` without `null` check in the method entry (here that is the constructor):    \r\n\r\n    public class Dictionary {\r\n    \r\n        private final List&lt;String&gt; words;\r\n        private final LookupService lookupService;\r\n    \r\n        public Dictionary(List&lt;String&gt; words) {\r\n            this.words = this.words;\r\n            this.lookupService = new LookupService(words);\r\n        }\r\n    \r\n        public boolean isFirstElement(String userData) {\r\n            return lookupService.isFirstElement(userData);\r\n        }        \r\n    }\r\n\r\n\t\r\n    public class LookupService {\r\n    \r\n        List&lt;String&gt; words;\r\n    \r\n        public LookupService(List&lt;String&gt; words) {\r\n            this.words = words;\r\n        }\r\n    \r\n        public boolean isFirstElement(String userData) {\r\n            return words.get(0).contains(userData);\r\n        }\r\n    }\r\n    \r\nNow, let&#39;s invoke the `Dictionary` constructor with a `null` reference for the `words` parameter : \r\n\r\n\tDictionary dictionary = new Dictionary(null); \r\n\r\n    // exception thrown lately : only in the next statement\r\n    boolean isFirstElement = dictionary.isFirstElement(&quot;anyThing&quot;);\r\n\r\n\r\n\t\r\nThe JVM throws the NPE at this statement : \r\n\r\n\treturn words.get(0).contains(userData);\t\r\n\r\n&lt;pre&gt;\r\nException in thread &quot;main&quot; java.lang.NullPointerException\r\n\tat LookupService.isFirstElement(LookupService.java:5)\r\n\tat Dictionary.isFirstElement(Dictionary.java:15)\r\n\tat Dictionary.main(Dictionary.java:22)\r\n&lt;/pre&gt;\r\n\r\nThe exception is triggered in the `LookupService` class while the origin of it is well earlier (the `Dictionary` constructor).   It makes the overall issue analysis much less obvious.   \r\nIs `words` `null`? Is `words.get(0) null` ? Both ? \r\nWhy the one, the other or maybe both are `null` ? \r\nIs it a coding error in `Dictionary` (constructor? invoked method?) ? Is it a coding error in `LookupService` ? (constructor? invoked method?) ?  \r\nFinally, we will have to inspect more code to find the error origin and in a more complex class  maybe even use a debugger to understand more easily what it happened.  \r\nBut why a simple thing (a lack of null check) become a complex issue ?   \r\nBecause we allowed the initial bug/lack identifiable on a specific component leak on lower components.    \r\nImagine that `LookupService` was not a local service but a remote service or a third party library with few debugging information or imagine that you didn&#39;t have 2 layers but 4 or 5 layers of object invocations before that the `null` be detected ? The problem would be still more complex to analyse.   \r\n\r\nSo the way to favor is : \r\n \r\n    public Dictionary(List&lt;String&gt; words) {\r\n        this.words = Objects.requireNonNull(words);\r\n        this.lookupService = new LookupService(words);\r\n    }\r\n\r\nIn this way, no headache : we get the exception thrown as soon as this is received : \r\n\r\n    // exception thrown early : in the constructor \r\n    Dictionary dictionary = new Dictionary(null);\r\n\r\n    // we never arrive here\r\n    boolean isFirstElement = dictionary.isFirstElement(&quot;anyThing&quot;);\r\n\r\n&lt;pre&gt;\r\nException in thread &quot;main&quot; java.lang.NullPointerException\r\n\tat java.util.Objects.requireNonNull(Objects.java:203)\r\n\tat com.Dictionary.&lt;init&gt;(Dictionary.java:15)\r\n\tat com.Dictionary.main(Dictionary.java:24)\r\n&lt;/pre&gt;\r\n\r\nNote that here I illustrated the issue with a constructor but a method invocation could have the same non null check constraint.\r\n\r\n\r\n\r\n\r\n","title":"Why should one use Objects.requireNonNull()?","body":"<p>Using <code>requireNonNull()</code> as first statements in a method allow to identify right now/fast the cause of the exception.<br>\nThe stacktrace indicates clearly that the exception was thrown as soon as the entry of the method <strong>because the caller didn't respect the requirements/contract.</strong> \nPassing a <code>null</code> object to another method <em>may</em> indeed provoke an exception at a time but the cause of the problem may be more complicated to understand as the exception will be thrown in a specific invocation on the <code>null</code> object that may be much further.  </p>\n\n<hr>\n\n<p>Here is a concrete and real example that shows why we have to favor fail fast in general and more particularly using <code>Object.requireNonNull()</code> or any way to perform a no null check on parameters designed to be not <code>null</code>.   </p>\n\n<p>Suppose a <code>Dictionary</code> class that composes a <code>LookupService</code> and a <code>List</code> of <code>String</code> representing words contained in. These fields are designed to be not <code>null</code> and one of these is passed in the  <code>Dictionary</code>  constructor.   </p>\n\n<p>Now suppose a \"bad\" implementation of <code>Dictionary</code> without <code>null</code> check in the method entry (here that is the constructor):    </p>\n\n<pre><code>public class Dictionary {\n\n    private final List&lt;String&gt; words;\n    private final LookupService lookupService;\n\n    public Dictionary(List&lt;String&gt; words) {\n        this.words = this.words;\n        this.lookupService = new LookupService(words);\n    }\n\n    public boolean isFirstElement(String userData) {\n        return lookupService.isFirstElement(userData);\n    }        \n}\n\n\npublic class LookupService {\n\n    List&lt;String&gt; words;\n\n    public LookupService(List&lt;String&gt; words) {\n        this.words = words;\n    }\n\n    public boolean isFirstElement(String userData) {\n        return words.get(0).contains(userData);\n    }\n}\n</code></pre>\n\n<p>Now, let's invoke the <code>Dictionary</code> constructor with a <code>null</code> reference for the <code>words</code> parameter : </p>\n\n<pre><code>Dictionary dictionary = new Dictionary(null); \n\n// exception thrown lately : only in the next statement\nboolean isFirstElement = dictionary.isFirstElement(\"anyThing\");\n</code></pre>\n\n<p>The JVM throws the NPE at this statement : </p>\n\n<pre><code>return words.get(0).contains(userData); \n</code></pre>\n\n<pre>\nException in thread \"main\" java.lang.NullPointerException\n    at LookupService.isFirstElement(LookupService.java:5)\n    at Dictionary.isFirstElement(Dictionary.java:15)\n    at Dictionary.main(Dictionary.java:22)\n</pre>\n\n<p>The exception is triggered in the <code>LookupService</code> class while the origin of it is well earlier (the <code>Dictionary</code> constructor).   It makes the overall issue analysis much less obvious.<br>\nIs <code>words</code> <code>null</code>? Is <code>words.get(0) null</code> ? Both ? \nWhy the one, the other or maybe both are <code>null</code> ? \nIs it a coding error in <code>Dictionary</code> (constructor? invoked method?) ? Is it a coding error in <code>LookupService</code> ? (constructor? invoked method?) ?<br>\nFinally, we will have to inspect more code to find the error origin and in a more complex class  maybe even use a debugger to understand more easily what it happened.<br>\nBut why a simple thing (a lack of null check) become a complex issue ?<br>\nBecause we allowed the initial bug/lack identifiable on a specific component leak on lower components.<br>\nImagine that <code>LookupService</code> was not a local service but a remote service or a third party library with few debugging information or imagine that you didn't have 2 layers but 4 or 5 layers of object invocations before that the <code>null</code> be detected ? The problem would be still more complex to analyse.   </p>\n\n<p>So the way to favor is : </p>\n\n<pre><code>public Dictionary(List&lt;String&gt; words) {\n    this.words = Objects.requireNonNull(words);\n    this.lookupService = new LookupService(words);\n}\n</code></pre>\n\n<p>In this way, no headache : we get the exception thrown as soon as this is received : </p>\n\n<pre><code>// exception thrown early : in the constructor \nDictionary dictionary = new Dictionary(null);\n\n// we never arrive here\nboolean isFirstElement = dictionary.isFirstElement(\"anyThing\");\n</code></pre>\n\n<pre>\nException in thread \"main\" java.lang.NullPointerException\n    at java.util.Objects.requireNonNull(Objects.java:203)\n    at com.Dictionary.(Dictionary.java:15)\n    at com.Dictionary.main(Dictionary.java:24)\n</pre>\n\n<p>Note that here I illustrated the issue with a constructor but a method invocation could have the same non null check constraint.</p>\n"},{"tags":[],"owner":{"account_id":1056871,"reputation":117749,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1502544554,"creation_date":1502544554,"answer_id":45650866,"question_id":45632920,"body_markdown":"As a side note, this fail fast before `Object#requireNotNull` was implemented slightly different before java-9 inside some of the jre classes themselves. Suppose the case :\r\n\r\n     Consumer&lt;String&gt; consumer = System.out::println;\r\n\r\nIn java-8 this compiles as (only the relevant parts)\r\n\r\n    getstatic Field java/lang/System.out\r\n    invokevirtual java/lang/Object.getClass\r\n\r\nBasically an operation as : `yourReference.getClass` - which would fail if yourRefercence is `null`. \r\n\r\nThings have changed in jdk-9 where the same code compiles as  \r\n\r\n    getstatic Field java/lang/System.out\r\n    invokestatic java/util/Objects.requireNonNull\r\n\r\nOr basically `Objects.requireNotNull (yourReference)`\r\n    ","title":"Why should one use Objects.requireNonNull()?","body":"<p>As a side note, this fail fast before <code>Object#requireNotNull</code> was implemented slightly different before java-9 inside some of the jre classes themselves. Suppose the case :</p>\n\n<pre><code> Consumer&lt;String&gt; consumer = System.out::println;\n</code></pre>\n\n<p>In java-8 this compiles as (only the relevant parts)</p>\n\n<pre><code>getstatic Field java/lang/System.out\ninvokevirtual java/lang/Object.getClass\n</code></pre>\n\n<p>Basically an operation as : <code>yourReference.getClass</code> - which would fail if yourRefercence is <code>null</code>. </p>\n\n<p>Things have changed in jdk-9 where the same code compiles as  </p>\n\n<pre><code>getstatic Field java/lang/System.out\ninvokestatic java/util/Objects.requireNonNull\n</code></pre>\n\n<p>Or basically <code>Objects.requireNotNull (yourReference)</code></p>\n"},{"comments":[{"owner":{"account_id":7445,"reputation":62274,"user_id":12943,"accept_rate":84,"display_name":"Bill K"},"score":1,"creation_date":1566941829,"post_id":57087852,"comment_id":101811523,"body_markdown":"The annotation is not a replacement for the Objects method, they work together.  You can&#39;t say @ NonNull x=mightBeNull, you would say @ NonNull x=Objects.requireNonNull(mightBeNull, &quot;inconceivable!&quot;);","body":"The annotation is not a replacement for the Objects method, they work together.  You can&#39;t say @ NonNull x=mightBeNull, you would say @ NonNull x=Objects.requireNonNull(mightBeNull, &quot;inconceivable!&quot;);"},{"owner":{"account_id":7525670,"reputation":12204,"user_id":5715934,"accept_rate":95,"display_name":"Supun Wijerathne"},"score":0,"creation_date":1567003461,"post_id":57087852,"comment_id":101834095,"body_markdown":"@BillK sorry, i dont  get u","body":"@BillK sorry, i dont  get u"},{"owner":{"account_id":7445,"reputation":62274,"user_id":12943,"accept_rate":84,"display_name":"Bill K"},"score":0,"creation_date":1567008536,"post_id":57087852,"comment_id":101836999,"body_markdown":"I was just saying that the Nonnull annotation works with requireNonNull, it is not an alternative, but they work together quite well.","body":"I was just saying that the Nonnull annotation works with requireNonNull, it is not an alternative, but they work together quite well."},{"owner":{"account_id":7525670,"reputation":12204,"user_id":5715934,"accept_rate":95,"display_name":"Supun Wijerathne"},"score":0,"creation_date":1567042064,"post_id":57087852,"comment_id":101847329,"body_markdown":"to implement the fail fast nature, its an alternative right? Yh I agree its not an alternative for the assignment.","body":"to implement the fail fast nature, its an alternative right? Yh I agree its not an alternative for the assignment."},{"owner":{"account_id":7445,"reputation":62274,"user_id":12943,"accept_rate":84,"display_name":"Bill K"},"score":0,"creation_date":1567096019,"post_id":57087852,"comment_id":101870679,"body_markdown":"I guess I&#39;d call requireNonNull() a &quot;conversion&quot; from @ Nullable to @ NonNull.  If you don&#39;t use the annotations, the method isn&#39;t really very interesting (since all it does is throw an NPE just like the code it protects would)--although it does pretty clearly show your intent.","body":"I guess I&#39;d call requireNonNull() a &quot;conversion&quot; from @ Nullable to @ NonNull.  If you don&#39;t use the annotations, the method isn&#39;t really very interesting (since all it does is throw an NPE just like the code it protects would)--although it does pretty clearly show your intent."}],"tags":[],"owner":{"account_id":7525670,"reputation":12204,"user_id":5715934,"accept_rate":95,"display_name":"Supun Wijerathne"},"comment_count":5,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1566315885,"creation_date":1563428900,"answer_id":57087852,"question_id":45632920,"body_markdown":"The basic usage is checking and throwing `NullPointerException` immediately.\r\n\r\nOne better alternative (shortcut) to cater to the same requirement is [@NonNull][1] annotation by lombok.\r\n\r\n\r\n  [1]: https://projectlombok.org/features/NonNull","title":"Why should one use Objects.requireNonNull()?","body":"<p>The basic usage is checking and throwing <code>NullPointerException</code> immediately.</p>\n\n<p>One better alternative (shortcut) to cater to the same requirement is <a href=\"https://projectlombok.org/features/NonNull\" rel=\"nofollow noreferrer\">@NonNull</a> annotation by lombok.</p>\n"},{"comments":[{"owner":{"account_id":317894,"reputation":32794,"user_id":634821,"accept_rate":78,"display_name":"Violet Giraffe"},"score":2,"creation_date":1660054116,"post_id":59224387,"comment_id":129438665,"body_markdown":"I&#39;ll rephrase: it immediately indicates where and when the null value **occurred** rather than when this value was first accessed (with an NPE).","body":"I&#39;ll rephrase: it immediately indicates where and when the null value <b>occurred</b> rather than when this value was first accessed (with an NPE)."}],"tags":[],"owner":{"account_id":4613562,"reputation":1348,"user_id":3740885,"accept_rate":83,"display_name":"Mirwise Khan"},"comment_count":1,"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1660107719,"creation_date":1575708380,"answer_id":59224387,"question_id":45632920,"body_markdown":"__NPE (Null Pointer Exception)__ is thrown when you access a member of an object which is `null` at a later point. `Objects.requireNonNull()` backtracks from where the value was accessed to where it was initialized as null, thus allowing to focus on real source of NPE.\r\n\r\n**A simplest scenario:**\r\n\r\n```\r\n// Global String\r\nString nullString = null;\r\n```\r\n\r\nCalling the null value:\r\n\r\n```\r\npublic void useString() {\r\n    nullString.length();  // The source of exception, without using Objects.requireNonNull()\r\n}\r\n```\r\n\r\nNow if we use `Objects.requireNonNull()` during initialization:\r\n```\r\n// Global String\r\nString nullString = Objects.requireNonNull(null); // The source of exception which is indeed the actual source of NPE\r\n```\r\n\r\n","title":"Why should one use Objects.requireNonNull()?","body":"<p><strong>NPE (Null Pointer Exception)</strong> is thrown when you access a member of an object which is <code>null</code> at a later point. <code>Objects.requireNonNull()</code> backtracks from where the value was accessed to where it was initialized as null, thus allowing to focus on real source of NPE.</p>\n<p><strong>A simplest scenario:</strong></p>\n<pre><code>// Global String\nString nullString = null;\n</code></pre>\n<p>Calling the null value:</p>\n<pre><code>public void useString() {\n    nullString.length();  // The source of exception, without using Objects.requireNonNull()\n}\n</code></pre>\n<p>Now if we use <code>Objects.requireNonNull()</code> during initialization:</p>\n<pre><code>// Global String\nString nullString = Objects.requireNonNull(null); // The source of exception which is indeed the actual source of NPE\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5404048,"reputation":77,"user_id":4303072,"display_name":"Andy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1580551372,"creation_date":1580551372,"answer_id":60015837,"question_id":45632920,"body_markdown":"I think it should be used in copy constructors and some other cases like DI whose input parameter is an object, you should check if the parameter is null. \r\nIn such circumstances, you can use this static method conveniently.","title":"Why should one use Objects.requireNonNull()?","body":"<p>I think it should be used in copy constructors and some other cases like DI whose input parameter is an object, you should check if the parameter is null. \nIn such circumstances, you can use this static method conveniently.</p>\n"},{"tags":[],"owner":{"account_id":4071379,"reputation":178,"user_id":3344337,"display_name":"imoverclocked"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1593476217,"creation_date":1593476217,"answer_id":62648478,"question_id":45632920,"body_markdown":"In the context of compiler extensions that implement Nullability checking (eg: [uber/NullAway][1]), `Objects.requireNonNull` should be used somewhat sparingly for occasions when you have a nullable field that you happen to know is not null at a certain point in your code.\r\n\r\nIn this way, there are two main usages:\r\n\r\n- Validation\r\n  - already covered by other responses here\r\n  - runtime check with overhead and potential NPE\r\n\r\n- Nullability marking (changing from @Nullable to @Nonnull)\r\n  - minimal use of runtime check in favor of compile-time checking\r\n  - only works when annotations are correct (enforced by the compiler)\r\n\r\nExample usage of Nullability marking:\r\n\r\n```\r\n@Nullable\r\nFoo getFoo(boolean getNull) { return getNull ? null : new Foo(); }\r\n\r\n// Changes contract from Nullable to Nonnull without compiler error\r\n@Nonnull Foo myFoo = Objects.requireNonNull(getFoo(false));\r\n```\r\n\r\n  [1]: https://github.com/uber/NullAway/","title":"Why should one use Objects.requireNonNull()?","body":"<p>In the context of compiler extensions that implement Nullability checking (eg: <a href=\"https://github.com/uber/NullAway/\" rel=\"nofollow noreferrer\">uber/NullAway</a>), <code>Objects.requireNonNull</code> should be used somewhat sparingly for occasions when you have a nullable field that you happen to know is not null at a certain point in your code.</p>\n<p>In this way, there are two main usages:</p>\n<ul>\n<li><p>Validation</p>\n<ul>\n<li>already covered by other responses here</li>\n<li>runtime check with overhead and potential NPE</li>\n</ul>\n</li>\n<li><p>Nullability marking (changing from @Nullable to @Nonnull)</p>\n<ul>\n<li>minimal use of runtime check in favor of compile-time checking</li>\n<li>only works when annotations are correct (enforced by the compiler)</li>\n</ul>\n</li>\n</ul>\n<p>Example usage of Nullability marking:</p>\n<pre><code>@Nullable\nFoo getFoo(boolean getNull) { return getNull ? null : new Foo(); }\n\n// Changes contract from Nullable to Nonnull without compiler error\n@Nonnull Foo myFoo = Objects.requireNonNull(getFoo(false));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3248847,"reputation":1579,"user_id":2739681,"accept_rate":82,"display_name":"PeMa"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1593508519,"creation_date":1593508519,"answer_id":62654088,"question_id":45632920,"body_markdown":"In addition to all the correct answers: \r\n\r\nWe use it in reactive streams. Usually the resulting `NullpointerException`s are wrapped into other Exceptions depending on their occurance in the stream. Hence, we can later easily decide how to handle the error.\r\n\r\nJust an example: Imagine you have \r\n\r\n    &lt;T&gt; T parseAndValidate(String payload) throws ParsingException { ... };\r\n    &lt;T&gt; T save(T t) throws DBAccessException { ... };\r\n\r\nwhere `parseAndValidate` wrapps the `NullPointerException` from `requireNonNull` in a `ParsingException`.\r\n\r\nNow you can decide, e.g. when to do a retry or not:\r\n\r\n    ...\r\n    .map(this::parseAndValidate)\r\n    .map(this::save)\r\n    .retry(Retry.&lt;T&gt;allBut(ParsingException.class))\r\n\r\nWithout the check, the NullPointerException will occure in the `save` method, which will result in endless retries. Even worth, imagine a long living subscription, adding \r\n\r\n    .onErrorContinue(\r\n        throwable -&gt; throwable.getClass().equals(ParsingException.class),\r\n        parsingExceptionConsumer()\r\n    )\r\n\r\nNow the `RetryExhaustException` will kill your subscription.","title":"Why should one use Objects.requireNonNull()?","body":"<p>In addition to all the correct answers:</p>\n<p>We use it in reactive streams. Usually the resulting <code>NullpointerException</code>s are wrapped into other Exceptions depending on their occurance in the stream. Hence, we can later easily decide how to handle the error.</p>\n<p>Just an example: Imagine you have</p>\n<pre><code>&lt;T&gt; T parseAndValidate(String payload) throws ParsingException { ... };\n&lt;T&gt; T save(T t) throws DBAccessException { ... };\n</code></pre>\n<p>where <code>parseAndValidate</code> wrapps the <code>NullPointerException</code> from <code>requireNonNull</code> in a <code>ParsingException</code>.</p>\n<p>Now you can decide, e.g. when to do a retry or not:</p>\n<pre><code>...\n.map(this::parseAndValidate)\n.map(this::save)\n.retry(Retry.&lt;T&gt;allBut(ParsingException.class))\n</code></pre>\n<p>Without the check, the NullPointerException will occure in the <code>save</code> method, which will result in endless retries. Even worth, imagine a long living subscription, adding</p>\n<pre><code>.onErrorContinue(\n    throwable -&gt; throwable.getClass().equals(ParsingException.class),\n    parsingExceptionConsumer()\n)\n</code></pre>\n<p>Now the <code>RetryExhaustException</code> will kill your subscription.</p>\n"},{"comments":[{"owner":{"account_id":13677323,"reputation":3369,"user_id":9868445,"display_name":"aderchox"},"score":0,"creation_date":1632675492,"post_id":64159465,"comment_id":122551318,"body_markdown":"I like this idea in old code, but with the existence of more modern methods, it could make the code &quot;less readable&quot; too, according to [link](https://dzone.com/articles/why-i-never-null-check-parameters).","body":"I like this idea in old code, but with the existence of more modern methods, it could make the code &quot;less readable&quot; too, according to <a href=\"https://dzone.com/articles/why-i-never-null-check-parameters\" rel=\"nofollow noreferrer\">link</a>."}],"tags":[],"owner":{"account_id":5373501,"reputation":6127,"user_id":4281239,"accept_rate":45,"display_name":"AADProgramming"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1601569334,"creation_date":1601569334,"answer_id":64159465,"question_id":45632920,"body_markdown":"Apart from the other answers - to me use of `requireNonNull` could make a code a bit convenient, (and sometimes easy to read) \r\n\r\nFor example - lets examine the code below,\r\n\r\n    private int calculateStringLength(String input) {\r\n            return Objects.\r\n                    requireNonNull(input, &quot;input cannot be null&quot;).\r\n                    length();\r\n        }\r\n\r\nThis code returns length of the string passed to it as argument - however it will throw an NPE if `input` is `null`. \r\n\r\nAs you can see, with use of `requireNonNull` - there’s no reason to perform null checks manually anymore. \r\n\r\nThe other useful thing is the &quot;exception message&quot; is my own hand-written (`input cannot be null` in this case). \r\n\r\n","title":"Why should one use Objects.requireNonNull()?","body":"<p>Apart from the other answers - to me use of <code>requireNonNull</code> could make a code a bit convenient, (and sometimes easy to read)</p>\n<p>For example - lets examine the code below,</p>\n<pre><code>private int calculateStringLength(String input) {\n        return Objects.\n                requireNonNull(input, &quot;input cannot be null&quot;).\n                length();\n    }\n</code></pre>\n<p>This code returns length of the string passed to it as argument - however it will throw an NPE if <code>input</code> is <code>null</code>.</p>\n<p>As you can see, with use of <code>requireNonNull</code> - there’s no reason to perform null checks manually anymore.</p>\n<p>The other useful thing is the &quot;exception message&quot; is my own hand-written (<code>input cannot be null</code> in this case).</p>\n"},{"tags":[],"owner":{"account_id":378670,"reputation":3959,"user_id":731548,"accept_rate":33,"display_name":"cquezel"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1646581706,"creation_date":1646581706,"answer_id":71371817,"question_id":45632920,"body_markdown":"There is also the added benefit that static analysis tools generally know @NonNull and @Nullable for standard library (which is the same as checking for null explicitly) : \r\n\r\n    public static &lt;T&gt; @NonNull T requireNonNull(@Nullable T obj) {\r\n        if (obj == null)\r\n            throw new NullPointerException();\r\n        return obj;\r\n    }","title":"Why should one use Objects.requireNonNull()?","body":"<p>There is also the added benefit that static analysis tools generally know @NonNull and @Nullable for standard library (which is the same as checking for null explicitly) :</p>\n<pre><code>public static &lt;T&gt; @NonNull T requireNonNull(@Nullable T obj) {\n    if (obj == null)\n        throw new NullPointerException();\n    return obj;\n}\n</code></pre>\n"}],"owner":{"account_id":5960810,"reputation":4511,"user_id":4686046,"display_name":"user4686046"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":216105,"favorite_count":0,"down_vote_count":1,"up_vote_count":443,"accepted_answer_id":45632962,"answer_count":12,"score":442,"last_activity_date":1689107684,"creation_date":1502447179,"question_id":45632920,"body_markdown":"I have noted that many Java 8 methods in Oracle JDK use `Objects.requireNonNull()`, which internally throws `NullPointerException` if the given object (argument) is `null`.\r\n\r\n    public static &lt;T&gt; T requireNonNull(T obj) {\r\n        if (obj == null)\r\n            throw new NullPointerException();\r\n        return obj;\r\n    }\r\n\r\n\r\nBut `NullPointerException` will be thrown anyway if a `null` object is dereferenced. So, why should one do this extra null check and throw \r\n`NullPointerException`?\r\n\r\nOne obvious answer (or benefit) is that it makes code more readable and I agree. I&#39;m keen to know any other reasons for using \r\n`Objects.requireNonNull()` in the beginning of the method.","title":"Why should one use Objects.requireNonNull()?","body":"<p>I have noted that many Java 8 methods in Oracle JDK use <code>Objects.requireNonNull()</code>, which internally throws <code>NullPointerException</code> if the given object (argument) is <code>null</code>.</p>\n\n<pre><code>public static &lt;T&gt; T requireNonNull(T obj) {\n    if (obj == null)\n        throw new NullPointerException();\n    return obj;\n}\n</code></pre>\n\n<p>But <code>NullPointerException</code> will be thrown anyway if a <code>null</code> object is dereferenced. So, why should one do this extra null check and throw \n<code>NullPointerException</code>?</p>\n\n<p>One obvious answer (or benefit) is that it makes code more readable and I agree. I'm keen to know any other reasons for using \n<code>Objects.requireNonNull()</code> in the beginning of the method.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":0,"creation_date":1689103128,"post_id":76665045,"comment_id":135165030,"body_markdown":"In general I don&#39;t think you need a depth of a million to find a recursion issue. A million seems excessive *(and would be annoying in SO errors)*. Seems like the shorter the better, with some tuning based on your runtime environment. E.g., 1K is plenty for trivial apps. Something running in Giant Big Environment might need 2x or 8x or more.","body":"In general I don&#39;t think you need a depth of a million to find a recursion issue. A million seems excessive <i>(and would be annoying in SO errors)</i>. Seems like the shorter the better, with some tuning based on your runtime environment. E.g., 1K is plenty for trivial apps. Something running in Giant Big Environment might need 2x or 8x or more."},{"owner":{"account_id":1448228,"reputation":3218,"user_id":1366016,"accept_rate":60,"display_name":"Wheezil"},"score":0,"creation_date":1689105010,"post_id":76665045,"comment_id":135165372,"body_markdown":"This options is not for the size of the STACK, it sets the max number of frames that will be included in the stack trace from a exception, which defaults to 1024.  You are right that practically speaking you won&#39;t get more than about 20k frames with the default JVM stack of 1MB.  So this limit could be, say, 100k.  But the question is the same: does this option have negative impacts?","body":"This options is not for the size of the STACK, it sets the max number of frames that will be included in the stack trace from a exception, which defaults to 1024.  You are right that practically speaking you won&#39;t get more than about 20k frames with the default JVM stack of 1MB.  So this limit could be, say, 100k.  But the question is the same: does this option have negative impacts?"},{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":0,"creation_date":1689105422,"post_id":76665045,"comment_id":135165440,"body_markdown":"Well sure it does, if you truly have an error being thrown at all regularly, which is 20k frames deep, and happen to log it anywhere. In that case you&#39;re going to be IO bound for quite a bit, which can definitely hurt something that was as innocent as reporting an exception. Stack traces will also tend to remove excessive/duplicate lines between chained exceptions anyhow.","body":"Well sure it does, if you truly have an error being thrown at all regularly, which is 20k frames deep, and happen to log it anywhere. In that case you&#39;re going to be IO bound for quite a bit, which can definitely hurt something that was as innocent as reporting an exception. Stack traces will also tend to remove excessive/duplicate lines between chained exceptions anyhow."},{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":0,"creation_date":1689105515,"post_id":76665045,"comment_id":135165450,"body_markdown":"End-all point: if you&#39;re in production, why pollute the system with the noise? If you&#39;ve already noticed the defect (and can reproduce it), then tick it on if you need in development in order to go down the rabbit hole.","body":"End-all point: if you&#39;re in production, why pollute the system with the noise? If you&#39;ve already noticed the defect (and can reproduce it), then tick it on if you need in development in order to go down the rabbit hole."},{"owner":{"account_id":1448228,"reputation":3218,"user_id":1366016,"accept_rate":60,"display_name":"Wheezil"},"score":0,"creation_date":1689106008,"post_id":76665045,"comment_id":135165515,"body_markdown":"Good point about the size/speed of logging.  Certainly argues for an option.\nBut there are cases we cannot reproduce in the lab, must be available in production.  Like... some RDBMS driver was losing its mind and throwing StackOverflow.  Hard to figure out why without being able to log at least the top and bottom 100 of the stack.  Which is why we are here. Was asked by support team to offer better error logs for the rare stackoverflow event.","body":"Good point about the size/speed of logging.  Certainly argues for an option. But there are cases we cannot reproduce in the lab, must be available in production.  Like... some RDBMS driver was losing its mind and throwing StackOverflow.  Hard to figure out why without being able to log at least the top and bottom 100 of the stack.  Which is why we are here. Was asked by support team to offer better error logs for the rare stackoverflow event."},{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":0,"creation_date":1689106781,"post_id":76665045,"comment_id":135165658,"body_markdown":"Sensitive areas like a DB driver would be chief places to avoid such logs. It&#39;s a bit like a tumble dryer: it doesn&#39;t matter how you got to a SO, because once you&#39;re there it&#39;ll just keep spinning. The solution is to prevent that area from spinning, and perhaps dump relevant debug information if a SO occurs (you can catch those! Just rethrow for sanity&#39;s sake).","body":"Sensitive areas like a DB driver would be chief places to avoid such logs. It&#39;s a bit like a tumble dryer: it doesn&#39;t matter how you got to a SO, because once you&#39;re there it&#39;ll just keep spinning. The solution is to prevent that area from spinning, and perhaps dump relevant debug information if a SO occurs (you can catch those! Just rethrow for sanity&#39;s sake)."}],"answers":[{"comments":[{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":0,"creation_date":1689118679,"post_id":76665551,"comment_id":135167301,"body_markdown":"A trick that may or may not be useful to you: In a custom exception you can override the `fillInStackTrace` method to do nothing. In that case, no time will be taken to populate the stack frames, because they won&#39;t be populated. But it will be much less useful if logged.","body":"A trick that may or may not be useful to you: In a custom exception you can override the <code>fillInStackTrace</code> method to do nothing. In that case, no time will be taken to populate the stack frames, because they won&#39;t be populated. But it will be much less useful if logged."}],"tags":[],"owner":{"account_id":1448228,"reputation":3218,"user_id":1366016,"accept_rate":60,"display_name":"Wheezil"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1689107244,"creation_date":1689107244,"answer_id":76665551,"question_id":76665045,"body_markdown":"I wrote a little test to see how many try/throw/catch could be done in a loop. I was surprised to find that the time spent is proportional to the stack depth at which the exception is thrown, even if there are no frames between the try{} and throw.  This makes sense, because the Throwable frames array is being populated at the point of the throw, up to the limit.  Which leads to: yes, this option DOES have a performance impact (in addition to logging, as noted by Rogue), but only when the stack depth at the point of throw is higher than XX:MaxJavaStackTraceDepth.\r\n\r\nTest code:\r\n```\r\npublic class Test1 {\r\n  static int DEPTH = 10;\r\n  static void test(int depth) {\r\n    if (depth &lt; DEPTH) {\r\n      // Wait until we get to the desired depth\r\n      test(depth+1);\r\n    } else {\r\n      int ITER = 1000000 / DEPTH;\r\n      long start = System.currentTimeMillis();\r\n      for (int i = 0; i &lt; ITER; i++) {\r\n        try {\r\n          throw new RuntimeException();\r\n        } catch (Exception ex) {}\r\n      }\r\n      long end = System.currentTimeMillis();\r\n      System.out.println(&quot;DEPTH=&quot; + DEPTH + &quot;: throws/sec=&quot; + ITER / ((end - start) * 0.001f));\r\n    }\r\n  }\r\n  public static void main(String[] args) throws Exception {\r\n    for (DEPTH = 1; DEPTH &lt;= 10000; DEPTH *= 2) {\r\n      test(0);\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nRun with default\r\n```\r\n$ java -jar target/*shad*jar\r\nDEPTH=1: throws/sec=1182033.1\r\nDEPTH=2: throws/sec=1184834.1\r\nDEPTH=4: throws/sec=1068376.0\r\nDEPTH=8: throws/sec=833333.3\r\nDEPTH=16: throws/sec=578703.7\r\nDEPTH=32: throws/sec=336021.5\r\nDEPTH=64: throws/sec=195312.48\r\nDEPTH=128: throws/sec=91905.88\r\nDEPTH=256: throws/sec=48824.996\r\nDEPTH=512: throws/sec=25697.367\r\nDEPTH=1024: throws/sec=13369.862\r\nDEPTH=2048: throws/sec=12842.1045\r\nDEPTH=4096: throws/sec=12199.999\r\nDEPTH=8192: throws/sec=12199.999\r\n```\r\n\r\nRun with larger stack trace:\r\n```\r\n$java -XX:MaxJavaStackTraceDepth=1000000 -jar target/*shad*jar\r\nDEPTH=1: throws/sec=1166861.1\r\nDEPTH=2: throws/sec=1157407.4\r\nDEPTH=4: throws/sec=1050420.1\r\nDEPTH=8: throws/sec=816993.4\r\nDEPTH=16: throws/sec=578703.7\r\nDEPTH=32: throws/sec=322164.94\r\nDEPTH=64: throws/sec=190548.78\r\nDEPTH=128: throws/sec=87775.28\r\nDEPTH=256: throws/sec=50076.92\r\nDEPTH=512: throws/sec=26039.998\r\nDEPTH=1024: throws/sec=13189.189\r\nDEPTH=2048: throws/sec=6777.7773\r\nDEPTH=4096: throws/sec=3388.8887\r\nDEPTH=8192: throws/sec=1718.3098\r\n```\r\n\r\nSo you can see, with the default trace limit of 1024, the performance levels off around 12K/sec above the limit of 1024.  But when you unlimit the trace size, the performance continues to decline.\r\n\r\nThanks to Rogue for suggesting the logging impact.\r\n\r\nSide thought: as often stated, never use exceptions for normal flow control!  Because you have no control over performance, depending on the stack depth when your code is called.","title":"Any cautions using -XX:MaxJavaStackTraceDepth=1000000? Performance impact?","body":"<p>I wrote a little test to see how many try/throw/catch could be done in a loop. I was surprised to find that the time spent is proportional to the stack depth at which the exception is thrown, even if there are no frames between the try{} and throw.  This makes sense, because the Throwable frames array is being populated at the point of the throw, up to the limit.  Which leads to: yes, this option DOES have a performance impact (in addition to logging, as noted by Rogue), but only when the stack depth at the point of throw is higher than XX:MaxJavaStackTraceDepth.</p>\n<p>Test code:</p>\n<pre><code>public class Test1 {\n  static int DEPTH = 10;\n  static void test(int depth) {\n    if (depth &lt; DEPTH) {\n      // Wait until we get to the desired depth\n      test(depth+1);\n    } else {\n      int ITER = 1000000 / DEPTH;\n      long start = System.currentTimeMillis();\n      for (int i = 0; i &lt; ITER; i++) {\n        try {\n          throw new RuntimeException();\n        } catch (Exception ex) {}\n      }\n      long end = System.currentTimeMillis();\n      System.out.println(&quot;DEPTH=&quot; + DEPTH + &quot;: throws/sec=&quot; + ITER / ((end - start) * 0.001f));\n    }\n  }\n  public static void main(String[] args) throws Exception {\n    for (DEPTH = 1; DEPTH &lt;= 10000; DEPTH *= 2) {\n      test(0);\n    }\n  }\n}\n</code></pre>\n<p>Run with default</p>\n<pre><code>$ java -jar target/*shad*jar\nDEPTH=1: throws/sec=1182033.1\nDEPTH=2: throws/sec=1184834.1\nDEPTH=4: throws/sec=1068376.0\nDEPTH=8: throws/sec=833333.3\nDEPTH=16: throws/sec=578703.7\nDEPTH=32: throws/sec=336021.5\nDEPTH=64: throws/sec=195312.48\nDEPTH=128: throws/sec=91905.88\nDEPTH=256: throws/sec=48824.996\nDEPTH=512: throws/sec=25697.367\nDEPTH=1024: throws/sec=13369.862\nDEPTH=2048: throws/sec=12842.1045\nDEPTH=4096: throws/sec=12199.999\nDEPTH=8192: throws/sec=12199.999\n</code></pre>\n<p>Run with larger stack trace:</p>\n<pre><code>$java -XX:MaxJavaStackTraceDepth=1000000 -jar target/*shad*jar\nDEPTH=1: throws/sec=1166861.1\nDEPTH=2: throws/sec=1157407.4\nDEPTH=4: throws/sec=1050420.1\nDEPTH=8: throws/sec=816993.4\nDEPTH=16: throws/sec=578703.7\nDEPTH=32: throws/sec=322164.94\nDEPTH=64: throws/sec=190548.78\nDEPTH=128: throws/sec=87775.28\nDEPTH=256: throws/sec=50076.92\nDEPTH=512: throws/sec=26039.998\nDEPTH=1024: throws/sec=13189.189\nDEPTH=2048: throws/sec=6777.7773\nDEPTH=4096: throws/sec=3388.8887\nDEPTH=8192: throws/sec=1718.3098\n</code></pre>\n<p>So you can see, with the default trace limit of 1024, the performance levels off around 12K/sec above the limit of 1024.  But when you unlimit the trace size, the performance continues to decline.</p>\n<p>Thanks to Rogue for suggesting the logging impact.</p>\n<p>Side thought: as often stated, never use exceptions for normal flow control!  Because you have no control over performance, depending on the stack depth when your code is called.</p>\n"}],"owner":{"account_id":1448228,"reputation":3218,"user_id":1366016,"accept_rate":60,"display_name":"Wheezil"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":80,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76665551,"answer_count":1,"score":0,"last_activity_date":1689107315,"creation_date":1689102275,"question_id":76665045,"body_markdown":"Reading [this post][1], I found that adding -XX:MaxJavaStackTraceDepth=1000000 to the JVM args will allow me to see all frames of a stack trace, which can be handy in stack overflow situations. But I&#39;m trying to understand why it is limited to 1024 by default, and is there any danger to unlimiting it?  I understand that it might use a lot of heap if there really is a StackOverflow. But given heap sizes these days, how much of a danger is that, really?  Are there other concerns?  There are hints that it has some performance impact, but unclear if that is true.\r\n\r\nUPDATE: As per comment, a reasonable stack depth is far less than that.  In practice I see StackOverflow at about 18000.  So maybe the right limit is 100000?  But the same question.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/5165753/how-to-get-full-stack-of-stackoverflowerror","title":"Any cautions using -XX:MaxJavaStackTraceDepth=1000000? Performance impact?","body":"<p>Reading <a href=\"https://stackoverflow.com/questions/5165753/how-to-get-full-stack-of-stackoverflowerror\">this post</a>, I found that adding -XX:MaxJavaStackTraceDepth=1000000 to the JVM args will allow me to see all frames of a stack trace, which can be handy in stack overflow situations. But I'm trying to understand why it is limited to 1024 by default, and is there any danger to unlimiting it?  I understand that it might use a lot of heap if there really is a StackOverflow. But given heap sizes these days, how much of a danger is that, really?  Are there other concerns?  There are hints that it has some performance impact, but unclear if that is true.</p>\n<p>UPDATE: As per comment, a reasonable stack depth is far less than that.  In practice I see StackOverflow at about 18000.  So maybe the right limit is 100000?  But the same question.</p>\n"},{"tags":["java","groovy","jgit"],"answers":[{"tags":[],"owner":{"account_id":179293,"reputation":15713,"user_id":411846,"accept_rate":80,"display_name":"centic"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1633006596,"creation_date":1633006596,"answer_id":69392634,"question_id":69381285,"body_markdown":"You can fetch all tags and then walk the commits on the branch and check for each commit if there is a tag for this ref.\r\n\r\ni.e. fetch all tags via:\r\n\r\n    git.tagList().call()\r\n\r\nthen fetch all commits of the branch via:\r\n\r\n    git.log().add(repository.resolve(BRANCH)).call()\r\n\r\nAnd then for each commit check if a tag exists at this ref.\r\n\r\nWhen run on a fairly large repository on a branch with more than 60k commits, walking all the commits this way is done in 1.2 seconds.\r\n\r\n    Had 60843 commits overall on branch remotes/origin/master, iteration took 1200ms\r\n\r\nAn even larger branch takes 8 seconds when walking 380k commits.\r\n\r\n    Had 388613 commits overall on branch remotes/origin/master, iteration took 8261ms\r\n\r\nI have added a ready-to-run snippet to the [jgit-cookboot][1], see [ListTagsOnBranch.java][2]\r\n\r\n\r\n  [1]: https://github.com/centic9/jgit-cookbook/\r\n  [2]: https://github.com/centic9/jgit-cookbook/blob/master/src/main/java/org/dstadler/jgit/porcelain/ListTagsOnBranch.java","title":"Get latest tag in branch with JGit","body":"<p>You can fetch all tags and then walk the commits on the branch and check for each commit if there is a tag for this ref.</p>\n<p>i.e. fetch all tags via:</p>\n<pre><code>git.tagList().call()\n</code></pre>\n<p>then fetch all commits of the branch via:</p>\n<pre><code>git.log().add(repository.resolve(BRANCH)).call()\n</code></pre>\n<p>And then for each commit check if a tag exists at this ref.</p>\n<p>When run on a fairly large repository on a branch with more than 60k commits, walking all the commits this way is done in 1.2 seconds.</p>\n<pre><code>Had 60843 commits overall on branch remotes/origin/master, iteration took 1200ms\n</code></pre>\n<p>An even larger branch takes 8 seconds when walking 380k commits.</p>\n<pre><code>Had 388613 commits overall on branch remotes/origin/master, iteration took 8261ms\n</code></pre>\n<p>I have added a ready-to-run snippet to the <a href=\"https://github.com/centic9/jgit-cookbook/\" rel=\"nofollow noreferrer\">jgit-cookboot</a>, see <a href=\"https://github.com/centic9/jgit-cookbook/blob/master/src/main/java/org/dstadler/jgit/porcelain/ListTagsOnBranch.java\" rel=\"nofollow noreferrer\">ListTagsOnBranch.java</a></p>\n"},{"tags":[],"owner":{"account_id":13185826,"reputation":11,"user_id":9523919,"display_name":"Roland"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689106339,"creation_date":1689106339,"answer_id":76665473,"question_id":69381285,"body_markdown":"Based on the previous answer, I&#39;d like to share my solution (JGit 6.6.0.202305301015-r). Essentially, simply mapping the ```tagList()``` did not work for me because the resulting Refs were unpeeled. The solution was to peel them before grouping them into a map. The JavaDoc of RefDatabase.peel states:\r\n\r\n&gt;Peel a possibly unpeeled reference by traversing the annotated tags.\r\n&gt;If the reference cannot be peeled (as it does not refer to an annotated tag) &gt;the peeled id stays null, but Ref.isPeeled() will be true.\r\n&gt;Implementors should check Ref.isPeeled() before performing any additional work &gt;effort.\r\n\r\n## Code\r\n\r\n```\r\ntry (final var git = Git.open(new File(&quot;/path/to/your/repository&quot;))) {\r\n    final var repository = git.getRepository();\r\n    final var refDatabase = repository.getRefDatabase();\r\n    \r\n    // Create a map of peeled references.\r\n    final var tags = refDatabase.getRefsByPrefix(R_TAGS).stream().map(ref -&gt; {\r\n\t\ttry {\r\n\t\t\treturn refDatabase.peel(ref);\r\n\t\t} catch (IOException e) {\r\n\t\t\tthrow new UncheckedIOException(e);\r\n\t\t}\r\n    }).collect(Collectors.groupingBy(ref -&gt; {\r\n\t\tfinal var peeledObjectId = ref.getPeeledObjectId();\r\n\t\treturn peeledObjectId == null ? ref.getObjectId() : peeledObjectId;\r\n    }, Collectors.mapping(ref -&gt; ref, Collectors.toList())));\r\n\r\n    // Collect the matching tag(s) into a chronological list\r\n    final var result = StreamSupport.stream(git.log()\r\n\t\t.add(repository.resolve(branch))\r\n\t\t.call().spliterator(), false)\r\n\t\t.map(rev -&gt; tags.get(rev.getId()))\r\n\t\t.filter(refs -&gt; refs != null)\r\n\t\t.toList();\r\n}\r\n```","title":"Get latest tag in branch with JGit","body":"<p>Based on the previous answer, I'd like to share my solution (JGit 6.6.0.202305301015-r). Essentially, simply mapping the <code>tagList()</code> did not work for me because the resulting Refs were unpeeled. The solution was to peel them before grouping them into a map. The JavaDoc of RefDatabase.peel states:</p>\n<blockquote>\n<p>Peel a possibly unpeeled reference by traversing the annotated tags.\nIf the reference cannot be peeled (as it does not refer to an annotated tag) &gt;the peeled id stays null, but Ref.isPeeled() will be true.\nImplementors should check Ref.isPeeled() before performing any additional work &gt;effort.</p>\n</blockquote>\n<h2>Code</h2>\n<pre><code>try (final var git = Git.open(new File(&quot;/path/to/your/repository&quot;))) {\n    final var repository = git.getRepository();\n    final var refDatabase = repository.getRefDatabase();\n    \n    // Create a map of peeled references.\n    final var tags = refDatabase.getRefsByPrefix(R_TAGS).stream().map(ref -&gt; {\n        try {\n            return refDatabase.peel(ref);\n        } catch (IOException e) {\n            throw new UncheckedIOException(e);\n        }\n    }).collect(Collectors.groupingBy(ref -&gt; {\n        final var peeledObjectId = ref.getPeeledObjectId();\n        return peeledObjectId == null ? ref.getObjectId() : peeledObjectId;\n    }, Collectors.mapping(ref -&gt; ref, Collectors.toList())));\n\n    // Collect the matching tag(s) into a chronological list\n    final var result = StreamSupport.stream(git.log()\n        .add(repository.resolve(branch))\n        .call().spliterator(), false)\n        .map(rev -&gt; tags.get(rev.getId()))\n        .filter(refs -&gt; refs != null)\n        .toList();\n}\n</code></pre>\n"}],"owner":{"account_id":1557389,"reputation":365,"user_id":1448063,"accept_rate":44,"display_name":"JPHamlett"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":534,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":69392634,"answer_count":2,"score":1,"last_activity_date":1689106339,"creation_date":1632938020,"question_id":69381285,"body_markdown":"I am trying to get the JGit equivalent of the command\r\n\r\n    git describe --match &quot;[0-9]*.[0-9]*.[0-9]*&quot; --abbrev=0 --tags $(git rev-list --tags --branches=master --max-count=1)\r\n\r\nI have tried getting all the tags in the project and then finding the greatest tag in the branch via the BranchListCommand, but that is to slow.\r\n\r\nI am stuck and I cannot find anything that help via my searches.\r\n\r\nDoes anyone have any idea how to do the intended result?","title":"Get latest tag in branch with JGit","body":"<p>I am trying to get the JGit equivalent of the command</p>\n<pre><code>git describe --match &quot;[0-9]*.[0-9]*.[0-9]*&quot; --abbrev=0 --tags $(git rev-list --tags --branches=master --max-count=1)\n</code></pre>\n<p>I have tried getting all the tags in the project and then finding the greatest tag in the branch via the BranchListCommand, but that is to slow.</p>\n<p>I am stuck and I cannot find anything that help via my searches.</p>\n<p>Does anyone have any idea how to do the intended result?</p>\n"},{"tags":["java","google-chrome","selenium-webdriver","selenium-chromedriver","webdriver"],"answers":[{"tags":[],"owner":{"account_id":28996214,"reputation":1,"user_id":22210833,"display_name":"goofyd"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689094934,"creation_date":1689094934,"answer_id":76664267,"question_id":76664232,"body_markdown":"The Answer already seems to be there in the logs. \r\n\r\n```\r\nThis version of ChromeDriver only supports Chrome version 93 Current browser version is 114.0.5735.199 with binary path C:\\Program Files\\Google\\Chrome\\Application\\chrome.exe\r\n```\r\n\r\nDownload the latest chromedriver which supports the Chrome Browser version 114","title":"Selenium WebDriver starts and shuts down","body":"<p>The Answer already seems to be there in the logs.</p>\n<pre><code>This version of ChromeDriver only supports Chrome version 93 Current browser version is 114.0.5735.199 with binary path C:\\Program Files\\Google\\Chrome\\Application\\chrome.exe\n</code></pre>\n<p>Download the latest chromedriver which supports the Chrome Browser version 114</p>\n"},{"tags":[],"owner":{"account_id":10049107,"reputation":186647,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689105462,"creation_date":1689105462,"answer_id":76665375,"question_id":76664232,"body_markdown":"Update [_**Selenium**_](https://stackoverflow.com/a/54482491/7429447) version to _**4.6**_ or above. [**Selenium Manager**](https://www.selenium.dev/blog/2022/introducing-selenium-manager/) would automatically take care of downloading the matching version of [ChromeDriver](https://stackoverflow.com/a/59927747/7429447) to execute the tests.\r\n\r\nSo your minimum code block will be:\r\n\r\n\tChromeOptions options = new ChromeOptions();\r\n\toptions.addArguments(&quot;--start-maximized&quot;);\r\n\tWebDriver driver = new ChromeDriver(options);","title":"Selenium WebDriver starts and shuts down","body":"<p>Update <a href=\"https://stackoverflow.com/a/54482491/7429447\"><em><strong>Selenium</strong></em></a> version to <em><strong>4.6</strong></em> or above. <a href=\"https://www.selenium.dev/blog/2022/introducing-selenium-manager/\" rel=\"nofollow noreferrer\"><strong>Selenium Manager</strong></a> would automatically take care of downloading the matching version of <a href=\"https://stackoverflow.com/a/59927747/7429447\">ChromeDriver</a> to execute the tests.</p>\n<p>So your minimum code block will be:</p>\n<pre><code>ChromeOptions options = new ChromeOptions();\noptions.addArguments(&quot;--start-maximized&quot;);\nWebDriver driver = new ChromeDriver(options);\n</code></pre>\n"}],"owner":{"account_id":28996483,"reputation":1,"user_id":22211031,"display_name":"sami"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":73,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1689105606,"creation_date":1689094662,"question_id":76664232,"body_markdown":"I&#39;m getting this error executing Selenium Java tests:\r\n\r\n```\r\nJuly 11, 2023 6:53:35 PM org.openqa.selenium.remote.service.DriverService$Builder getLogOutput\r\nINFO: Driver logs no longer sent to console by default; https://www.selenium.dev/documentation/webdriver/drivers/service/#setting-log-output\r\nSLF4J: No SLF4J providers were found.\r\nSLF4J: Defaulting to no-operation (NOP) logger implementation\r\nSLF4J: See https://www.slf4j.org/codes.html#noProviders for further details.\r\nException in thread &quot;main&quot; org.openqa.selenium.SessionNotCreatedException: Could not start a new session. Response code 500. Message: session not created: This version of ChromeDriver only supports Chrome version 93\r\nCurrent browser version is 114.0.5735.199 with binary path C:\\Program Files\\Google\\Chrome\\Application\\chrome.exe \r\n```\r\ni used other chrome drivers and it didnt work\r\ncan anyone help?","title":"Selenium WebDriver starts and shuts down","body":"<p>I'm getting this error executing Selenium Java tests:</p>\n<pre><code>July 11, 2023 6:53:35 PM org.openqa.selenium.remote.service.DriverService$Builder getLogOutput\nINFO: Driver logs no longer sent to console by default; https://www.selenium.dev/documentation/webdriver/drivers/service/#setting-log-output\nSLF4J: No SLF4J providers were found.\nSLF4J: Defaulting to no-operation (NOP) logger implementation\nSLF4J: See https://www.slf4j.org/codes.html#noProviders for further details.\nException in thread &quot;main&quot; org.openqa.selenium.SessionNotCreatedException: Could not start a new session. Response code 500. Message: session not created: This version of ChromeDriver only supports Chrome version 93\nCurrent browser version is 114.0.5735.199 with binary path C:\\Program Files\\Google\\Chrome\\Application\\chrome.exe \n</code></pre>\n<p>i used other chrome drivers and it didnt work\ncan anyone help?</p>\n"},{"tags":["java","kotlin","datepicker","android-jetpack-compose","android-jetpack"],"comments":[{"owner":{"account_id":25403255,"reputation":1076,"user_id":19212377,"display_name":"Megh"},"score":0,"creation_date":1689137580,"post_id":76665330,"comment_id":135168841,"body_markdown":"Can you share Viewmodel code? The issue you are facing is likely because you&#39;re initializing the chosenYear, chosenMonth, and chosenDay states with the current date values (currentYear, currentMonth, currentDay) every time when the DatePickerUI composable is recomposed. To fix this, you need to initialize these states with the values stored in your globalViewModel when available.","body":"Can you share Viewmodel code? The issue you are facing is likely because you&#39;re initializing the chosenYear, chosenMonth, and chosenDay states with the current date values (currentYear, currentMonth, currentDay) every time when the DatePickerUI composable is recomposed. To fix this, you need to initialize these states with the values stored in your globalViewModel when available."}],"owner":{"account_id":28944170,"reputation":41,"user_id":22170111,"display_name":"nikoparas1"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":512,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1689105030,"creation_date":1689105030,"question_id":76665330,"body_markdown":"I recently implemented a Date Picker dialog. How it works as of now is I have an OutlinedTextField Composable and a transparent button laying over top of it so that the appearance matches my other fields which don&#39;t require a date picker. Once the user clicks on the Date Picker TextField a dialog will pop up with a label at the top of the dialog along with 3 ItemPickers which allow the user to select a day, month, and year from a defined range. Once the user has selected the date and clicks the &quot;Done&quot; button, the dialog closes and the globalViewModel&#39;s date field gets updated with the selection. The problem that I am having is that when the user reopens the datepicker after the first selection, the date picker does not display the previously selected date and instead defaults to the current date. I have tried to add a conditional statement to check if the viewmodel is populated and if it is then replace the current day with the one saved in the viewmodel but this unfortunately makes my app crash and I have no idea how to fix it otherwise.\r\n\r\n[This is what the date picker looks like](https://i.stack.imgur.com/lzVim.jpg)\r\n\r\n\r\nThis is my code\r\n```\r\n@Composable\r\nfun DatePickerUI(\r\n    label: String,\r\n    globalViewModel: GlobalSavedViewModel,\r\n    onDismissRequest: () -&gt; Unit\r\n) {\r\n    Card(\r\n        shape = RoundedCornerShape(10.dp),\r\n    ) {\r\n        Column(\r\n            horizontalAlignment = Alignment.CenterHorizontally,\r\n            modifier = Modifier\r\n                .fillMaxWidth()\r\n                .padding(vertical = 10.dp, horizontal = 5.dp)\r\n        ) {\r\n            Text(\r\n                text = label,\r\n                modifier = Modifier.fillMaxWidth(),\r\n                textAlign = TextAlign.Center,\r\n                style = AdditionalTypography.bodyMedium\r\n            )\r\n\r\n            Spacer(modifier = Modifier.height(30.dp))\r\n\r\n            val chosenYear = remember { mutableStateOf(currentYear) }\r\n            val chosenMonth = remember { mutableStateOf(currentMonth) }\r\n            val chosenDay = remember { mutableStateOf(currentDay) }\r\n            DateSelectionSection(\r\n                onYearChosen = { chosenYear.value = it.toInt() },\r\n                onMonthChosen = { chosenMonth.value = monthsNames.indexOf(it) },\r\n                onDayChosen = { chosenDay.value = it.toInt() },\r\n                globalViewModel = globalViewModel,\r\n                dateType = label,\r\n            )\r\n\r\n            Spacer(modifier = Modifier.height(30.dp))\r\n\r\n            Button(\r\n                shape = RoundedCornerShape(5.dp),\r\n                modifier = Modifier\r\n                    .fillMaxWidth()\r\n                    .padding(horizontal = 10.dp),\r\n                onClick = {\r\n                    val date = chosenYear.value.toString().substring(2) + if(chosenMonth.value.toString().length == 1) {&quot;0&quot;} else {&quot;&quot;} + (chosenMonth.value + 1).toString() + if(chosenDay.value.toString().length == 1) {&quot;0&quot;} else {&quot;&quot;} + chosenDay.value.toString()\r\n                    if(label == &quot;Date of Birth&quot;) {\r\n                        globalViewModel.updateDateOfBirth(date)\r\n                    }\r\n                    else {\r\n                        globalViewModel.updateDateOfExpiration(date)\r\n                    }\r\n                    onDismissRequest()\r\n                }\r\n            ) {\r\n                Text(\r\n                    text = &quot;Done&quot;,\r\n                    modifier = Modifier.fillMaxWidth(),\r\n                    textAlign = TextAlign.Center,\r\n                    style = AdditionalTypography.bodyMedium\r\n                )\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n@SuppressLint(&quot;StateFlowValueCalledInComposition&quot;)\r\n@Composable\r\nfun DateSelectionSection(\r\n    onYearChosen: (String) -&gt; Unit,\r\n    onMonthChosen: (String) -&gt; Unit,\r\n    onDayChosen: (String) -&gt; Unit,\r\n    globalViewModel: GlobalSavedViewModel,\r\n    dateType: String,\r\n) {\r\n    Row(\r\n        horizontalArrangement = Arrangement.SpaceAround,\r\n        modifier = Modifier\r\n            .fillMaxWidth()\r\n            .height(100.dp)\r\n    ) {\r\n        InfiniteItemsPicker(\r\n            items = days,\r\n            firstIndex = Int.MAX_VALUE / 2 + (currentDay - 2),\r\n            onItemSelected = onDayChosen\r\n        )\r\n\r\n        InfiniteItemsPicker(\r\n            items = monthsNames,\r\n            firstIndex = Int.MAX_VALUE / 2 - 4 + currentMonth,\r\n            onItemSelected = onMonthChosen\r\n        )\r\n\r\n        InfiniteItemsPicker(\r\n            items = years,\r\n            firstIndex = Int.MAX_VALUE / 2 + (currentYear - 1925),\r\n            onItemSelected = onYearChosen\r\n        )\r\n    }\r\n}\r\n\r\n@SuppressLint(&quot;FrequentlyChangedStateReadInComposition&quot;)\r\n@Composable\r\nfun InfiniteItemsPicker(\r\n    items: List&lt;String&gt;,\r\n    firstIndex: Int,\r\n    onItemSelected: (String) -&gt; Unit,\r\n) {\r\n\r\n    val listState = rememberLazyListState(firstIndex)\r\n    val currentValue = remember { mutableStateOf(&quot;&quot;) }\r\n\r\n    LaunchedEffect(key1 = !listState.isScrollInProgress) {\r\n        onItemSelected(currentValue.value)\r\n        listState.animateScrollToItem(index = listState.firstVisibleItemIndex)\r\n    }\r\n\r\n    Box(modifier = Modifier.height(106.dp)) {\r\n        LazyColumn(\r\n            horizontalAlignment = Alignment.CenterHorizontally,\r\n            state = listState,\r\n            content = {\r\n                items(count = Int.MAX_VALUE, itemContent = {\r\n                    val index = it % items.size\r\n                    if (it == listState.firstVisibleItemIndex + 1) {\r\n                        currentValue.value = items[index]\r\n                    }\r\n\r\n                    Spacer(modifier = Modifier.height(6.dp))\r\n\r\n                    Text(\r\n                        text = items[index],\r\n                        modifier = Modifier.alpha(if (it == listState.firstVisibleItemIndex + 1) 1f else 0.3f),\r\n                        textAlign = TextAlign.Center,\r\n                        style = AdditionalTypography.bodyMedium\r\n                    )\r\n\r\n                    Spacer(modifier = Modifier.height(6.dp))\r\n                })\r\n            }\r\n        )\r\n    }\r\n}\r\n\r\n@Composable\r\nfun formatMRZDate(date: String): String {\r\n    if(date.length == 6) {\r\n        Log.i(&quot;DatePicker&quot;, date.substring(2,4) + &quot;-&quot; + date.substring(4,6) + &quot;-&quot; + date.substring(0,2))\r\n        return date.substring(2,4) + &quot;-&quot; + date.substring(4,6) + &quot;-&quot; + date.substring(0,2)\r\n    }\r\n    return &quot;&quot;\r\n}\r\n\r\nval currentYear = Calendar.getInstance().get(Calendar.YEAR)\r\nval currentDay = Calendar.getInstance().get(Calendar.DAY_OF_MONTH)\r\nval currentMonth = Calendar.getInstance().get(Calendar.MONTH)\r\n\r\nval years = (1900..2100).map { it.toString() }\r\nval monthsNumber = (1..12).map { it.toString() }\r\nval days = (1..31).map { it.toString() }\r\nval monthsNames = listOf(\r\n    &quot;JAN&quot;,\r\n    &quot;FEB&quot;,\r\n    &quot;MAR&quot;,\r\n    &quot;APR&quot;,\r\n    &quot;MAY&quot;,\r\n    &quot;JUN&quot;,\r\n    &quot;JUL&quot;,\r\n    &quot;AUG&quot;,\r\n    &quot;SEP&quot;,\r\n    &quot;OCT&quot;,\r\n    &quot;NOV&quot;,\r\n    &quot;DEC&quot;\r\n)```","title":"Jetpack Compose Date Picker Dialog UI","body":"<p>I recently implemented a Date Picker dialog. How it works as of now is I have an OutlinedTextField Composable and a transparent button laying over top of it so that the appearance matches my other fields which don't require a date picker. Once the user clicks on the Date Picker TextField a dialog will pop up with a label at the top of the dialog along with 3 ItemPickers which allow the user to select a day, month, and year from a defined range. Once the user has selected the date and clicks the &quot;Done&quot; button, the dialog closes and the globalViewModel's date field gets updated with the selection. The problem that I am having is that when the user reopens the datepicker after the first selection, the date picker does not display the previously selected date and instead defaults to the current date. I have tried to add a conditional statement to check if the viewmodel is populated and if it is then replace the current day with the one saved in the viewmodel but this unfortunately makes my app crash and I have no idea how to fix it otherwise.</p>\n<p><a href=\"https://i.stack.imgur.com/lzVim.jpg\" rel=\"nofollow noreferrer\">This is what the date picker looks like</a></p>\n<p>This is my code</p>\n<pre><code>@Composable\nfun DatePickerUI(\n    label: String,\n    globalViewModel: GlobalSavedViewModel,\n    onDismissRequest: () -&gt; Unit\n) {\n    Card(\n        shape = RoundedCornerShape(10.dp),\n    ) {\n        Column(\n            horizontalAlignment = Alignment.CenterHorizontally,\n            modifier = Modifier\n                .fillMaxWidth()\n                .padding(vertical = 10.dp, horizontal = 5.dp)\n        ) {\n            Text(\n                text = label,\n                modifier = Modifier.fillMaxWidth(),\n                textAlign = TextAlign.Center,\n                style = AdditionalTypography.bodyMedium\n            )\n\n            Spacer(modifier = Modifier.height(30.dp))\n\n            val chosenYear = remember { mutableStateOf(currentYear) }\n            val chosenMonth = remember { mutableStateOf(currentMonth) }\n            val chosenDay = remember { mutableStateOf(currentDay) }\n            DateSelectionSection(\n                onYearChosen = { chosenYear.value = it.toInt() },\n                onMonthChosen = { chosenMonth.value = monthsNames.indexOf(it) },\n                onDayChosen = { chosenDay.value = it.toInt() },\n                globalViewModel = globalViewModel,\n                dateType = label,\n            )\n\n            Spacer(modifier = Modifier.height(30.dp))\n\n            Button(\n                shape = RoundedCornerShape(5.dp),\n                modifier = Modifier\n                    .fillMaxWidth()\n                    .padding(horizontal = 10.dp),\n                onClick = {\n                    val date = chosenYear.value.toString().substring(2) + if(chosenMonth.value.toString().length == 1) {&quot;0&quot;} else {&quot;&quot;} + (chosenMonth.value + 1).toString() + if(chosenDay.value.toString().length == 1) {&quot;0&quot;} else {&quot;&quot;} + chosenDay.value.toString()\n                    if(label == &quot;Date of Birth&quot;) {\n                        globalViewModel.updateDateOfBirth(date)\n                    }\n                    else {\n                        globalViewModel.updateDateOfExpiration(date)\n                    }\n                    onDismissRequest()\n                }\n            ) {\n                Text(\n                    text = &quot;Done&quot;,\n                    modifier = Modifier.fillMaxWidth(),\n                    textAlign = TextAlign.Center,\n                    style = AdditionalTypography.bodyMedium\n                )\n            }\n        }\n    }\n}\n\n@SuppressLint(&quot;StateFlowValueCalledInComposition&quot;)\n@Composable\nfun DateSelectionSection(\n    onYearChosen: (String) -&gt; Unit,\n    onMonthChosen: (String) -&gt; Unit,\n    onDayChosen: (String) -&gt; Unit,\n    globalViewModel: GlobalSavedViewModel,\n    dateType: String,\n) {\n    Row(\n        horizontalArrangement = Arrangement.SpaceAround,\n        modifier = Modifier\n            .fillMaxWidth()\n            .height(100.dp)\n    ) {\n        InfiniteItemsPicker(\n            items = days,\n            firstIndex = Int.MAX_VALUE / 2 + (currentDay - 2),\n            onItemSelected = onDayChosen\n        )\n\n        InfiniteItemsPicker(\n            items = monthsNames,\n            firstIndex = Int.MAX_VALUE / 2 - 4 + currentMonth,\n            onItemSelected = onMonthChosen\n        )\n\n        InfiniteItemsPicker(\n            items = years,\n            firstIndex = Int.MAX_VALUE / 2 + (currentYear - 1925),\n            onItemSelected = onYearChosen\n        )\n    }\n}\n\n@SuppressLint(&quot;FrequentlyChangedStateReadInComposition&quot;)\n@Composable\nfun InfiniteItemsPicker(\n    items: List&lt;String&gt;,\n    firstIndex: Int,\n    onItemSelected: (String) -&gt; Unit,\n) {\n\n    val listState = rememberLazyListState(firstIndex)\n    val currentValue = remember { mutableStateOf(&quot;&quot;) }\n\n    LaunchedEffect(key1 = !listState.isScrollInProgress) {\n        onItemSelected(currentValue.value)\n        listState.animateScrollToItem(index = listState.firstVisibleItemIndex)\n    }\n\n    Box(modifier = Modifier.height(106.dp)) {\n        LazyColumn(\n            horizontalAlignment = Alignment.CenterHorizontally,\n            state = listState,\n            content = {\n                items(count = Int.MAX_VALUE, itemContent = {\n                    val index = it % items.size\n                    if (it == listState.firstVisibleItemIndex + 1) {\n                        currentValue.value = items[index]\n                    }\n\n                    Spacer(modifier = Modifier.height(6.dp))\n\n                    Text(\n                        text = items[index],\n                        modifier = Modifier.alpha(if (it == listState.firstVisibleItemIndex + 1) 1f else 0.3f),\n                        textAlign = TextAlign.Center,\n                        style = AdditionalTypography.bodyMedium\n                    )\n\n                    Spacer(modifier = Modifier.height(6.dp))\n                })\n            }\n        )\n    }\n}\n\n@Composable\nfun formatMRZDate(date: String): String {\n    if(date.length == 6) {\n        Log.i(&quot;DatePicker&quot;, date.substring(2,4) + &quot;-&quot; + date.substring(4,6) + &quot;-&quot; + date.substring(0,2))\n        return date.substring(2,4) + &quot;-&quot; + date.substring(4,6) + &quot;-&quot; + date.substring(0,2)\n    }\n    return &quot;&quot;\n}\n\nval currentYear = Calendar.getInstance().get(Calendar.YEAR)\nval currentDay = Calendar.getInstance().get(Calendar.DAY_OF_MONTH)\nval currentMonth = Calendar.getInstance().get(Calendar.MONTH)\n\nval years = (1900..2100).map { it.toString() }\nval monthsNumber = (1..12).map { it.toString() }\nval days = (1..31).map { it.toString() }\nval monthsNames = listOf(\n    &quot;JAN&quot;,\n    &quot;FEB&quot;,\n    &quot;MAR&quot;,\n    &quot;APR&quot;,\n    &quot;MAY&quot;,\n    &quot;JUN&quot;,\n    &quot;JUL&quot;,\n    &quot;AUG&quot;,\n    &quot;SEP&quot;,\n    &quot;OCT&quot;,\n    &quot;NOV&quot;,\n    &quot;DEC&quot;\n)```\n</code></pre>\n"},{"tags":["java","gradle","jenkins","mockito","jmockit"],"comments":[{"owner":{"account_id":8909811,"reputation":2612,"user_id":6650475,"display_name":"Andrew S"},"score":1,"creation_date":1689104671,"post_id":76664950,"comment_id":135165306,"body_markdown":"Are they really unit tests (isolated from external dependencies)?  Is the build server using a different time zone than local?  Of course, those are just a couple guesses.  Check the Jenkins test results and drill down to the failure and find the exception details, and/or check the build server logs to find the exception details.","body":"Are they really unit tests (isolated from external dependencies)?  Is the build server using a different time zone than local?  Of course, those are just a couple guesses.  Check the Jenkins test results and drill down to the failure and find the exception details, and/or check the build server logs to find the exception details."},{"owner":{"account_id":21270541,"reputation":1,"user_id":15650128,"display_name":"Yash Sojitra"},"score":0,"creation_date":1689593904,"post_id":76664950,"comment_id":135230726,"body_markdown":"@AndrewS Yes, build server using different timezones and some of the UTs were failing due to that. However, there were still many failing. One of the issue I&#39;ve found was, in some test cases had mocked a class with $clinit and due to which other test cases throwing NullPointerException due staticInitialization skipped I believe. This fixed many of the UTs. But there are still some","body":"@AndrewS Yes, build server using different timezones and some of the UTs were failing due to that. However, there were still many failing. One of the issue I&#39;ve found was, in some test cases had mocked a class with $clinit and due to which other test cases throwing NullPointerException due staticInitialization skipped I believe. This fixed many of the UTs. But there are still some"}],"answers":[{"tags":[],"owner":{"account_id":5475023,"reputation":90,"user_id":4353227,"accept_rate":100,"display_name":"Suresh Kumar"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689104834,"creation_date":1689104834,"answer_id":76665309,"question_id":76664950,"body_markdown":"Check whether is there any order to be maintained across the Tests. Means you have to define which order the Test methods to be executed. Sometime earlier,we had faced this issue somewhere. Just check it out","title":"Inconsistent Behavior of Java Unit Tests Across Environments","body":"<p>Check whether is there any order to be maintained across the Tests. Means you have to define which order the Test methods to be executed. Sometime earlier,we had faced this issue somewhere. Just check it out</p>\n"}],"owner":{"account_id":21270541,"reputation":1,"user_id":15650128,"display_name":"Yash Sojitra"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689104834,"creation_date":1689101370,"question_id":76664950,"body_markdown":"I have encountered an issue where several unit tests in my Java project exhibit inconsistent behavior across different environments. Specifically, some tests fail in the testing environment (as part of the Jenkins build), while the same tests pass in the local development environment. Furthermore, these tests pass again when executed in another environment, such as the QA environment. It is worth noting that the tests were written using JMockit version 1.20, Mockito version 2.8.0, and JUnit 4.12 and build are taken using gradle 4.8.\r\n\r\nWhy would tests behave differently for different environment when its same and running on same configurations","title":"Inconsistent Behavior of Java Unit Tests Across Environments","body":"<p>I have encountered an issue where several unit tests in my Java project exhibit inconsistent behavior across different environments. Specifically, some tests fail in the testing environment (as part of the Jenkins build), while the same tests pass in the local development environment. Furthermore, these tests pass again when executed in another environment, such as the QA environment. It is worth noting that the tests were written using JMockit version 1.20, Mockito version 2.8.0, and JUnit 4.12 and build are taken using gradle 4.8.</p>\n<p>Why would tests behave differently for different environment when its same and running on same configurations</p>\n"},{"tags":["java","garbage-collection","byte-buddy"],"comments":[{"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":2,"creation_date":1689078601,"post_id":76661983,"comment_id":135159541,"body_markdown":"If that method is consistently called the simplest way to find the caller is probably to just start your application in the debugger and put a breakpoint in/on that method. This way you&#39;ll catch it no matter if it&#39;s called directly or via generated code.","body":"If that method is consistently called the simplest way to find the caller is probably to just start your application in the debugger and put a breakpoint in/on that method. This way you&#39;ll catch it no matter if it&#39;s called directly or via generated code."},{"owner":{"account_id":1784182,"reputation":139,"user_id":1626057,"accept_rate":0,"display_name":"javando"},"score":0,"creation_date":1689083302,"post_id":76661983,"comment_id":135160821,"body_markdown":"Agreed, but that is not the case. That happened just one time after months running.","body":"Agreed, but that is not the case. That happened just one time after months running."},{"owner":{"account_id":1784182,"reputation":139,"user_id":1626057,"accept_rate":0,"display_name":"javando"},"score":0,"creation_date":1689084421,"post_id":76661983,"comment_id":135161134,"body_markdown":"Debugging is out of question, as System.gc is not consistently called, it was a one off event.","body":"Debugging is out of question, as System.gc is not consistently called, it was a one off event."},{"owner":{"account_id":208217,"reputation":1488,"user_id":458561,"display_name":"boneill"},"score":1,"creation_date":1689099148,"post_id":76661983,"comment_id":135164300,"body_markdown":"Are you directly or indirectly using Java RMI? It periodically calls System.gc(), based on some special criteria. If you connect to the application using JMX, it will activate the Java RMI system.","body":"Are you directly or indirectly using Java RMI? It periodically calls System.gc(), based on some special criteria. If you connect to the application using JMX, it will activate the Java RMI system."},{"owner":{"account_id":1784182,"reputation":139,"user_id":1626057,"accept_rate":0,"display_name":"javando"},"score":0,"creation_date":1689110562,"post_id":76661983,"comment_id":135166413,"body_markdown":"@boneill I&#39;ve checked that already. Thanks.","body":"@boneill I&#39;ve checked that already. Thanks."}],"answers":[{"comments":[{"owner":{"account_id":1784182,"reputation":139,"user_id":1626057,"accept_rate":0,"display_name":"javando"},"score":0,"creation_date":1689115723,"post_id":76665305,"comment_id":135167023,"body_markdown":"I&#39;ll try that. As you said, the downside of this is that a direct call to Runtime.getRuntime().gc() wouldn&#39;t be intercepted, but I originally asked about System.gc anyway.\nThanks","body":"I&#39;ll try that. As you said, the downside of this is that a direct call to Runtime.getRuntime().gc() wouldn&#39;t be intercepted, but I originally asked about System.gc anyway. Thanks"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1689145744,"post_id":76665305,"comment_id":135169999,"body_markdown":"I think, ordinary code shouldn’t contain a call to `System.gc()` to begin with. From that perspective, it’s weird to replace calls to `System.gc()` with a logging call, to [wait up to a month](https://stackoverflow.com/questions/76661983/what-is-the-best-way-to-trace-who-is-calling-system-gc#comment135160821_76661983) for the call to happen, when you could immediately report the fact that the code contains such a call. In other words, maybe the OP asked the wrong question.","body":"I think, ordinary code shouldn’t contain a call to <code>System.gc()</code> to begin with. From that perspective, it’s weird to replace calls to <code>System.gc()</code> with a logging call, to <a href=\"https://stackoverflow.com/questions/76661983/what-is-the-best-way-to-trace-who-is-calling-system-gc#comment135160821_76661983\">wait up to a month</a> for the call to happen, when you could immediately report the fact that the code contains such a call. In other words, maybe the OP asked the wrong question."},{"owner":{"account_id":1284143,"reputation":43090,"user_id":1237575,"accept_rate":96,"display_name":"Rafael Winterhalter"},"score":0,"creation_date":1689192688,"post_id":76665305,"comment_id":135180421,"body_markdown":"It&#39;s probably in some library which would be also instrumented. Not always easy to predict the call stacks.","body":"It&#39;s probably in some library which would be also instrumented. Not always easy to predict the call stacks."}],"tags":[],"owner":{"account_id":1284143,"reputation":43090,"user_id":1237575,"accept_rate":96,"display_name":"Rafael Winterhalter"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689104791,"creation_date":1689104791,"answer_id":76665305,"question_id":76661983,"body_markdown":"The simplest way would be to attach a Java agent with a MemberSubstitution in Byte Buddy. You can use it to replace the call to System.gc to another static method that records the call instead of triggering the garbage collection, for example by writing down the stack trace.\r\n\r\nYou&#39;d use an AgentBuilder to create the agent and apply the substitution to all types and methods if you have no idea from where the call is coming.\r\n\r\nIn theory, you could instrument the method itself but since it is native, it is not that straight forward, making the substitution the easiest option.","title":"What is the best way to trace who is calling System.gc","body":"<p>The simplest way would be to attach a Java agent with a MemberSubstitution in Byte Buddy. You can use it to replace the call to System.gc to another static method that records the call instead of triggering the garbage collection, for example by writing down the stack trace.</p>\n<p>You'd use an AgentBuilder to create the agent and apply the substitution to all types and methods if you have no idea from where the call is coming.</p>\n<p>In theory, you could instrument the method itself but since it is native, it is not that straight forward, making the substitution the easiest option.</p>\n"}],"owner":{"account_id":1784182,"reputation":139,"user_id":1626057,"accept_rate":0,"display_name":"javando"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76665305,"answer_count":1,"score":1,"last_activity_date":1689104791,"creation_date":1689078428,"question_id":76661983,"body_markdown":"Is there a way to track down a System.gc caller without having to edit and recompile a class from the JDK? Something with Reflection (proxies) or with [ByteBuddy](https://bytebuddy.net/#/)? By the way, I&#39;d need Java 8 and Java 17 ways (if they are different) \r\n\r\nNote:\r\n I&#39;ve come across these posts: https://stackoverflow.com/questions/6870829/how-can-i-tell-who-calls-system-gc and https://stackoverflow.com/questions/15957951/how-do-i-replace-runtime-gc-with-my-own-implementation?noredirect=1&amp;lq=1 , but they suggest we should change some jdk code and recompile, well I think maybe there is a better way to do that.","title":"What is the best way to trace who is calling System.gc","body":"<p>Is there a way to track down a System.gc caller without having to edit and recompile a class from the JDK? Something with Reflection (proxies) or with <a href=\"https://bytebuddy.net/#/\" rel=\"nofollow noreferrer\">ByteBuddy</a>? By the way, I'd need Java 8 and Java 17 ways (if they are different)</p>\n<p>Note:\nI've come across these posts: <a href=\"https://stackoverflow.com/questions/6870829/how-can-i-tell-who-calls-system-gc\">How can I tell who calls System.gc()?</a> and <a href=\"https://stackoverflow.com/questions/15957951/how-do-i-replace-runtime-gc-with-my-own-implementation?noredirect=1&amp;lq=1\">How do I replace Runtime.gc() with my own implementation?</a> , but they suggest we should change some jdk code and recompile, well I think maybe there is a better way to do that.</p>\n"},{"tags":["java","spring","spring-boot","rest","jpa"],"comments":[{"owner":{"account_id":10933290,"reputation":2086,"user_id":8035759,"display_name":"Asgar"},"score":0,"creation_date":1689068820,"post_id":76660593,"comment_id":135157492,"body_markdown":"Can you please include the error log too?","body":"Can you please include the error log too?"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1689070596,"post_id":76660593,"comment_id":135157881,"body_markdown":"You need to use `jakarta.persistence` classes not `javax.persistence` your code wouldn&#39;t even compile with the current dependencies. So either this isn&#39;t what you have or you manuallly added stuff to your build path in your IDE.","body":"You need to use <code>jakarta.persistence</code> classes not <code>javax.persistence</code> your code wouldn&#39;t even compile with the current dependencies. So either this isn&#39;t what you have or you manuallly added stuff to your build path in your IDE."}],"answers":[{"tags":[],"owner":{"account_id":19935722,"reputation":214,"user_id":14608443,"display_name":"IveGotCodeButImNotACoder"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1689086393,"creation_date":1689069905,"answer_id":76660819,"question_id":76660593,"body_markdown":"I think with Spring 3, I&#39;ve seen some usage of annotations from `Jakarta` (ex: `jakarta.persistence.Entity`) instead of `javax.persistence` to resolve this error. \r\n\r\nCan you test with Jakarta annotations instead of `javax.persistence` and see if it resolves? You will need to replace Entity, Id, and perhaps more. ","title":"How to fix UnsatisfiedDependencyException: Error creating bean with name &#39;employeeController&#39;?","body":"<p>I think with Spring 3, I've seen some usage of annotations from <code>Jakarta</code> (ex: <code>jakarta.persistence.Entity</code>) instead of <code>javax.persistence</code> to resolve this error.</p>\n<p>Can you test with Jakarta annotations instead of <code>javax.persistence</code> and see if it resolves? You will need to replace Entity, Id, and perhaps more.</p>\n"}],"owner":{"account_id":28360587,"reputation":13,"user_id":21690681,"display_name":"Spiritus"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":151,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76660819,"answer_count":1,"score":0,"last_activity_date":1689104636,"creation_date":1689068222,"question_id":76660593,"body_markdown":"I have created a webapp serving somewhat like a REST catalog of employees stored in embedded database, but something goes wrong. I have an UnsatisfiedDependencyException: Error creating bean with name \r\n```JAVA\r\n&#39;employeeController&#39;: Unsatisfied dependency expressed through field &#39;employeeService&#39;: Error creating bean with name &#39;employeeServiceImpl&#39;: Unsatisfied dependency expressed through field &#39;employeeRepository&#39;: Error creating bean with name &#39;employeeRepository&#39; defined in com.springemployeecatalog.repository.EmployeeRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Not a managed type: class com.springemployeecatalog.entity.Employee.\r\n```\r\n\r\n What am I doing wrong?\r\n\r\n\r\nEndpoints (all serves GET requests) should be:\r\n`/employees` - list all employees. Supports paging*.\r\n\r\n`/employees/{employee_id}` - single employee. If parameter named full_chain exists and is set to true then full manager chain should be written (include employee`s manager, manager of manager, manager of manager of manager and so on up to the organization head).\r\n\r\n`/employees/by_manager/{managerId}` - list employees who subordinates to the manager. No transitivity. Supports paging*.\r\n\r\n`/employees/by_department/{departmentId or departmentName}` - list employees who is working in the department. Supports paging*.\r\n\r\n* Supports paging - means that you may manage what sublist of employees you want to get by three parameters:\r\npage - number of the page (starts with 0);\r\nsize - amount of entry per page;\r\nsort - name of the field for sorting (single value from list [lastName, hired, position, salary], order is ascending).\r\n\r\nEntity:\r\nEmployee class\r\n\r\n    package com.springemployeecatalog.entity;\r\n\r\n    import com.fasterxml.jackson.annotation.JsonCreator;\r\n    import com.fasterxml.jackson.annotation.JsonProperty;\r\n    import com.fasterxml.jackson.databind.DeserializationFeature;\r\n    import com.fasterxml.jackson.databind.ObjectMapper;\r\n    import com.fasterxml.jackson.databind.SerializationFeature;\r\n    import com.fasterxml.jackson.datatype.jsr310.JavaTimeModule;\r\n    import com.google.common.base.MoreObjects;\r\n    import com.google.common.base.Objects;\r\n    import lombok.NoArgsConstructor;\r\n    import javax.persistence.*;\r\n    import java.io.IOException;\r\n    import java.io.StringWriter;\r\n    import java.time.LocalDate;\r\n    import java.util.List;\r\n    \r\n    @Entity\r\n    @NoArgsConstructor\r\n    @Table(name =&quot;employee&quot;)\r\n        public class Employee {\r\n        @Id\r\n        @GeneratedValue(strategy =  GenerationType.IDENTITY)\r\n        @Column(name = &quot;emp_id&quot;)\r\n        private Integer id;\r\n        @OneToOne(cascade = CascadeType.ALL)\r\n        @JoinColumn(name = &quot;fullName&quot;)\r\n        private FullName fullName;\r\n        @Enumerated(EnumType.ORDINAL)\r\n        @Column(name = &quot;position&quot;)\r\n        private Position position;\r\n        @ManyToOne(cascade = {CascadeType.PERSIST })\r\n        @JoinColumn(name = &quot;manager_id&quot;)\r\n        private Employee manager;\r\n        @Column(name = &quot;hired&quot;)\r\n        private LocalDate hired;\r\n        @Column(name = &quot;salary&quot;)\r\n        private Double salary;\r\n        @ManyToOne(cascade ={CascadeType.ALL})\r\n        @JoinColumn(name = &quot;department_id&quot;)\r\n        private Department department;\r\n        @OneToMany(cascade = CascadeType.ALL)\r\n        @JoinColumn(name = &quot;manager_id&quot;, referencedColumnName = &quot;emp_id&quot;)\r\n        private List&lt;Employee&gt; employeeList;\r\n       // constructors, getters, setters ...\r\n\r\nDepartment class\r\n\r\n    package com.springemployeecatalog.entity;\r\n\r\n    import com.fasterxml.jackson.annotation.JsonCreator;\r\n    import com.fasterxml.jackson.annotation.JsonProperty;\r\n    import com.fasterxml.jackson.databind.DeserializationFeature;\r\n    import com.fasterxml.jackson.databind.ObjectMapper;\r\n    import com.fasterxml.jackson.databind.SerializationFeature;\r\n    import com.fasterxml.jackson.datatype.jsr310.JavaTimeModule;\r\n    import com.google.common.base.MoreObjects;\r\n    import com.google.common.base.Objects;\r\n\r\n    import lombok.NoArgsConstructor;\r\n    import javax.persistence.*;\r\n\r\n    import java.io.IOException;\r\n    import java.io.StringWriter;\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n\r\n    @Entity\r\n    @NoArgsConstructor\r\n    @Table(name = &quot;department&quot;)\r\n    public class Department {\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        @Column(name = &quot;dep_id&quot;)\r\n        private Integer id;\r\n        @Column(name = &quot;name&quot;)\r\n        private String name;\r\n        @Column(name = &quot;location&quot;)\r\n        private String location;\r\n\r\n        @OneToMany(cascade = CascadeType.ALL)\r\n        @JoinColumn(name = &quot;department_id&quot;, referencedColumnName = &quot;dep_id&quot; )\r\n        private List &lt;Employee&gt; employeeList;\r\n       // constructors, getters, setters ...\r\n\r\nFullName class\r\n\r\n    package com.springemployeecatalog.entity;\r\n\r\n    import com.fasterxml.jackson.annotation.JsonCreator;\r\n    import com.fasterxml.jackson.annotation.JsonProperty;\r\n    import com.google.common.base.MoreObjects;\r\n    import com.google.common.base.Objects;\r\n\r\n    import javax.persistence.*;\r\n    @Embeddable\r\n    public class FullName {\r\n        @Column(name = &quot;firstname&quot;)\r\n        private String firstName;\r\n        @Column(name = &quot;lastname&quot;)\r\n        private String lastName;\r\n        @Column(name = &quot;middlename&quot;)\r\n        private String middleName;\r\n        @OneToOne(mappedBy = &quot;fullNAme&quot;, cascade = {CascadeType.PERSIST, CascadeType.REFRESH})\r\n        private Employee employee;\r\n       // constructors, getters, setters ...\r\n\r\nPosition enum\r\n    package com.springemployeecatalog.entity;\r\n\r\n    public enum Position {\r\n        PRESIDENT,\r\n        MANAGER,\r\n        ANALYST,\r\n        CLERK,\r\n        SALESMAN\r\n    }\r\n\r\nController:\r\n\r\n    package com.springemployeecatalog.controller;\r\n\r\n    import com.springemployeecatalog.entity.Employee;\r\n    import com.springemployeecatalog.service.EmployeeService;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n\r\n    import org.springframework.web.bind.annotation.*;\r\n\r\n    import java.util.List;\r\n\r\n    @RestController\r\n    public class EmployeeController {\r\n        @Autowired\r\n       private EmployeeService employeeService;\r\n\r\n        @GetMapping(&quot;/&quot;)\r\n        public String homePage() {\r\n            return &quot;Welcome to the Employee Catalog!&quot;;\r\n        }\r\n        @GetMapping(&quot;/employees&quot;)\r\n        public List&lt;Employee&gt; showAllEmployees(@RequestParam(defaultValue = &quot;0&quot;) int page,\r\n                                               @RequestParam(defaultValue = &quot;10&quot;) int size,\r\n                                               @RequestParam(defaultValue = &quot;id&quot;) String sort) {\r\n            return employeeService.getAllEmployees(page, size, sort);\r\n        }\r\n\r\n        @GetMapping(&quot;/employees/{id}&quot;)\r\n        public Employee findEmployee(@PathVariable Integer id,\r\n                                     @RequestParam(defaultValue = &quot;false&quot;) boolean fullChain) {\r\n            return employeeService.getEmployee(id, fullChain);\r\n        }\r\n\r\n        @GetMapping(&quot;/employees/by_manager/{managerId}&quot;)\r\n        public List&lt;Employee&gt; findEmployeesByManager(@PathVariable Integer managerId,\r\n                                                 @RequestParam(defaultValue = &quot;0&quot;) int page,\r\n                                                 @RequestParam(defaultValue = &quot;10&quot;) int size,\r\n                                                 @RequestParam(defaultValue = &quot;id&quot;) String sort){     \r\n            return employeeService.getEmployeesByManager(managerId, page, size, sort);\r\n        }\r\n\r\n        @GetMapping(&quot;/employees/by_department/{departmentId}&quot;)\r\n        public List&lt;Employee&gt; findEmployeesByDepartment(@PathVariable Integer departmentId,\r\n                                                    @RequestParam(defaultValue = &quot;0&quot;) int page,\r\n                                                    @RequestParam(defaultValue = &quot;10&quot;) int size,\r\n                                                    @RequestParam(defaultValue = &quot;id&quot;) String sort) {\r\n            return employeeService.getEmployeesByDepartment(departmentId, page, size, sort);\r\n        }\r\n    }\r\nRepository:\r\n\r\n    package com.springemployeecatalog.repository;\r\n\r\n    import com.springemployeecatalog.entity.Department;\r\n    import org.springframework.data.jpa.repository.JpaRepository;\r\n    import org.springframework.stereotype.Repository;\r\n\r\n    @Repository\r\n    public interface DepartmentRepository extends JpaRepository&lt;Department, Integer&gt; {\r\n    }\r\n\r\n\r\n    package com.springemployeecatalog.repository;\r\n\r\n    import com.springemployeecatalog.entity.Department;\r\n    import com.springemployeecatalog.entity.Employee;\r\n    import org.springframework.data.entity.Pageable;\r\n    import org.springframework.data.jpa.repository.JpaRepository;\r\n    import org.springframework.stereotype.Repository;\r\n\r\n    import java.util.List;\r\n    @Repository\r\n    public interface EmployeeRepository extends JpaRepository &lt;Employee, Integer&gt; {\r\n        List&lt;Employee&gt; findEmployeesByManager(Employee manager, Pageable pageable);\r\n        List&lt;Employee&gt; findEmployeesByDepartment(Department department, Pageable pageable);\r\n    }\r\n\r\nService:\r\n\r\n     package com.springemployeecatalog.service;\r\n\r\n    import com.springemployeecatalog.entity.Employee;\r\n\r\n    import java.util.List;\r\n\r\n    public interface EmployeeService {\r\n        List&lt;Employee&gt; getAllEmployees(int page, int size, String sort);\r\n        Employee getEmployee(Integer id, boolean fullChain);\r\n        List&lt;Employee&gt; getEmployeesByManager(Integer managerId, int page, int size, String sort);\r\n        List&lt;Employee&gt; getEmployeesByDepartment(Integer departmentId, int page, int size, String sort);\r\n    }\r\n\r\n\r\n    package com.springemployeecatalog.service;\r\n\r\n    import com.springemployeecatalog.entity.Department;\r\n    import com.springemployeecatalog.entity.Employee;\r\n    import com.springemployeecatalog.repository.DepartmentRepository;\r\n    import com.springemployeecatalog.repository.EmployeeRepository;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.data.domain.Page;\r\n    import org.springframework.data.domain.PageRequest;\r\n    import org.springframework.data.domain.Pageable;\r\n    import org.springframework.data.domain.Sort;\r\n    import org.springframework.stereotype.Service;\r\n\r\n    import java.util.*;\r\n\r\n    @Service\r\n    public class EmployeeServiceImpl implements EmployeeService{\r\n        @Autowired\r\n        private EmployeeRepository employeeRepository;\r\n\r\n        @Autowired\r\n        private DepartmentRepository departmentRepository;\r\n\r\n        @Override\r\n        public List&lt;Employee&gt; getAllEmployees(int page, int size, String sort) {\r\n            Pageable pageable = PageRequest.of(page, size, Sort.by(sort));\r\n            Page&lt;Employee&gt; employeePage = employeeRepository.findAll(pageable);\r\n            System.out.println(&quot;Отримано &quot; + employeePage.getTotalElements() + &quot; записів&quot;);\r\n\r\n            return employeePage != null ? employeePage.getContent() : Collections.emptyList();\r\n        }\r\n\r\n        @Override\r\n        public Employee getEmployee(Integer id, boolean fullChain) {\r\n            Employee employee = employeeRepository.findById(id).orElse(null);\r\n            List&lt;Employee&gt; managerChain = new ArrayList&lt;&gt;();\r\n            if (fullChain &amp;&amp; employee != null) {\r\n                Employee manager = employee.getManager();\r\n                while (manager != null) {\r\n                    managerChain.add(manager);\r\n                    manager = manager.getManager();\r\n                }\r\n            }\r\n            Map&lt;String, Object&gt; response = new HashMap&lt;&gt;();\r\n            response.put(&quot;employee&quot;, employee);\r\n            response.put(&quot;managerChain&quot;, managerChain);\r\n            return employee;\r\n        }\r\n\r\n        @Override\r\n        public List&lt;Employee&gt; getEmployeesByManager(Integer managerId, int page, int size, String sort) {\r\n            Pageable pageable = PageRequest.of(page, size, Sort.by(sort));\r\n            Employee manager = employeeRepository.findById(managerId).orElse(null);\r\n            if (manager != null) {\r\n                return employeeRepository.findEmployeesByManager(manager, pageable);\r\n            }\r\n            return Collections.emptyList();\r\n        }\r\n        @Override\r\n        public List&lt;Employee&gt; getEmployeesByDepartment(Integer departmentId, int page, int size, String sort) {\r\n            Pageable pageable = PageRequest.of(page, size, Sort.by(sort));\r\n            Department department = departmentRepository.findById(departmentId).orElse(null);\r\n            if (department != null) {\r\n                return employeeRepository.findEmployeesByDepartment(department, pageable);\r\n            }\r\n            return Collections.emptyList();\r\n        }\r\n    }\r\n\r\nThis is application properties:\r\n\r\n    server.port=8080\r\n\r\n    spring.datasource.url=jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1\r\n    spring.datasource.driverClassName=org.h2.Driver\r\n    spring.datasource.username=sa\r\n    spring.datasource.password=\r\n\r\n    spring.h2.console.enabled=true\r\n    spring.h2.console.path=/h2\r\n\r\n    spring.jpa.database-platform=org.hibernate.dialect.H2Dialect\r\n    spring.jpa.generate-ddl=false\r\n    spring.jpa.hibernate.ddl-auto=\r\n    spring.jpa.show-sql=true\r\n\r\npom.xml file:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n             xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n        &lt;groupId&gt;com.spring&lt;/groupId&gt;\r\n        &lt;artifactId&gt;employees-catalogue&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;3.0.4&lt;/version&gt;\r\n    &lt;/parent&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n        &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\r\n        &lt;java.version&gt;19&lt;/java.version&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.google.guava&lt;/groupId&gt;\r\n            &lt;artifactId&gt;guava&lt;/artifactId&gt;\r\n            &lt;version&gt;23.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n            &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;\r\n            &lt;version&gt;5.9.2&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n            &lt;exclusions&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n            &lt;/exclusions&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.mysql&lt;/groupId&gt;\r\n            &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\r\n            &lt;scope&gt;runtime&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n            &lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n            &lt;scope&gt;runtime&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\n    &lt;/dependencies&gt;\r\n\r\n        &lt;build&gt;\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.8.0&lt;/version&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;source&gt;${java.version}&lt;/source&gt;\r\n                        &lt;target&gt;${java.version}&lt;/target&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n\r\n            &lt;/plugins&gt;\r\n        &lt;/build&gt;\r\n    &lt;/project&gt;\r\n","title":"How to fix UnsatisfiedDependencyException: Error creating bean with name &#39;employeeController&#39;?","body":"<p>I have created a webapp serving somewhat like a REST catalog of employees stored in embedded database, but something goes wrong. I have an UnsatisfiedDependencyException: Error creating bean with name</p>\n<pre><code>'employeeController': Unsatisfied dependency expressed through field 'employeeService': Error creating bean with name 'employeeServiceImpl': Unsatisfied dependency expressed through field 'employeeRepository': Error creating bean with name 'employeeRepository' defined in com.springemployeecatalog.repository.EmployeeRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Not a managed type: class com.springemployeecatalog.entity.Employee.\n</code></pre>\n<p>What am I doing wrong?</p>\n<p>Endpoints (all serves GET requests) should be:\n<code>/employees</code> - list all employees. Supports paging*.</p>\n<p><code>/employees/{employee_id}</code> - single employee. If parameter named full_chain exists and is set to true then full manager chain should be written (include employee`s manager, manager of manager, manager of manager of manager and so on up to the organization head).</p>\n<p><code>/employees/by_manager/{managerId}</code> - list employees who subordinates to the manager. No transitivity. Supports paging*.</p>\n<p><code>/employees/by_department/{departmentId or departmentName}</code> - list employees who is working in the department. Supports paging*.</p>\n<ul>\n<li>Supports paging - means that you may manage what sublist of employees you want to get by three parameters:\npage - number of the page (starts with 0);\nsize - amount of entry per page;\nsort - name of the field for sorting (single value from list [lastName, hired, position, salary], order is ascending).</li>\n</ul>\n<p>Entity:\nEmployee class</p>\n<pre><code>package com.springemployeecatalog.entity;\n\nimport com.fasterxml.jackson.annotation.JsonCreator;\nimport com.fasterxml.jackson.annotation.JsonProperty;\nimport com.fasterxml.jackson.databind.DeserializationFeature;\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport com.fasterxml.jackson.databind.SerializationFeature;\nimport com.fasterxml.jackson.datatype.jsr310.JavaTimeModule;\nimport com.google.common.base.MoreObjects;\nimport com.google.common.base.Objects;\nimport lombok.NoArgsConstructor;\nimport javax.persistence.*;\nimport java.io.IOException;\nimport java.io.StringWriter;\nimport java.time.LocalDate;\nimport java.util.List;\n\n@Entity\n@NoArgsConstructor\n@Table(name =&quot;employee&quot;)\n    public class Employee {\n    @Id\n    @GeneratedValue(strategy =  GenerationType.IDENTITY)\n    @Column(name = &quot;emp_id&quot;)\n    private Integer id;\n    @OneToOne(cascade = CascadeType.ALL)\n    @JoinColumn(name = &quot;fullName&quot;)\n    private FullName fullName;\n    @Enumerated(EnumType.ORDINAL)\n    @Column(name = &quot;position&quot;)\n    private Position position;\n    @ManyToOne(cascade = {CascadeType.PERSIST })\n    @JoinColumn(name = &quot;manager_id&quot;)\n    private Employee manager;\n    @Column(name = &quot;hired&quot;)\n    private LocalDate hired;\n    @Column(name = &quot;salary&quot;)\n    private Double salary;\n    @ManyToOne(cascade ={CascadeType.ALL})\n    @JoinColumn(name = &quot;department_id&quot;)\n    private Department department;\n    @OneToMany(cascade = CascadeType.ALL)\n    @JoinColumn(name = &quot;manager_id&quot;, referencedColumnName = &quot;emp_id&quot;)\n    private List&lt;Employee&gt; employeeList;\n   // constructors, getters, setters ...\n</code></pre>\n<p>Department class</p>\n<pre><code>package com.springemployeecatalog.entity;\n\nimport com.fasterxml.jackson.annotation.JsonCreator;\nimport com.fasterxml.jackson.annotation.JsonProperty;\nimport com.fasterxml.jackson.databind.DeserializationFeature;\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport com.fasterxml.jackson.databind.SerializationFeature;\nimport com.fasterxml.jackson.datatype.jsr310.JavaTimeModule;\nimport com.google.common.base.MoreObjects;\nimport com.google.common.base.Objects;\n\nimport lombok.NoArgsConstructor;\nimport javax.persistence.*;\n\nimport java.io.IOException;\nimport java.io.StringWriter;\nimport java.util.ArrayList;\nimport java.util.List;\n\n@Entity\n@NoArgsConstructor\n@Table(name = &quot;department&quot;)\npublic class Department {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;dep_id&quot;)\n    private Integer id;\n    @Column(name = &quot;name&quot;)\n    private String name;\n    @Column(name = &quot;location&quot;)\n    private String location;\n\n    @OneToMany(cascade = CascadeType.ALL)\n    @JoinColumn(name = &quot;department_id&quot;, referencedColumnName = &quot;dep_id&quot; )\n    private List &lt;Employee&gt; employeeList;\n   // constructors, getters, setters ...\n</code></pre>\n<p>FullName class</p>\n<pre><code>package com.springemployeecatalog.entity;\n\nimport com.fasterxml.jackson.annotation.JsonCreator;\nimport com.fasterxml.jackson.annotation.JsonProperty;\nimport com.google.common.base.MoreObjects;\nimport com.google.common.base.Objects;\n\nimport javax.persistence.*;\n@Embeddable\npublic class FullName {\n    @Column(name = &quot;firstname&quot;)\n    private String firstName;\n    @Column(name = &quot;lastname&quot;)\n    private String lastName;\n    @Column(name = &quot;middlename&quot;)\n    private String middleName;\n    @OneToOne(mappedBy = &quot;fullNAme&quot;, cascade = {CascadeType.PERSIST, CascadeType.REFRESH})\n    private Employee employee;\n   // constructors, getters, setters ...\n</code></pre>\n<p>Position enum\npackage com.springemployeecatalog.entity;</p>\n<pre><code>public enum Position {\n    PRESIDENT,\n    MANAGER,\n    ANALYST,\n    CLERK,\n    SALESMAN\n}\n</code></pre>\n<p>Controller:</p>\n<pre><code>package com.springemployeecatalog.controller;\n\nimport com.springemployeecatalog.entity.Employee;\nimport com.springemployeecatalog.service.EmployeeService;\nimport org.springframework.beans.factory.annotation.Autowired;\n\nimport org.springframework.web.bind.annotation.*;\n\nimport java.util.List;\n\n@RestController\npublic class EmployeeController {\n    @Autowired\n   private EmployeeService employeeService;\n\n    @GetMapping(&quot;/&quot;)\n    public String homePage() {\n        return &quot;Welcome to the Employee Catalog!&quot;;\n    }\n    @GetMapping(&quot;/employees&quot;)\n    public List&lt;Employee&gt; showAllEmployees(@RequestParam(defaultValue = &quot;0&quot;) int page,\n                                           @RequestParam(defaultValue = &quot;10&quot;) int size,\n                                           @RequestParam(defaultValue = &quot;id&quot;) String sort) {\n        return employeeService.getAllEmployees(page, size, sort);\n    }\n\n    @GetMapping(&quot;/employees/{id}&quot;)\n    public Employee findEmployee(@PathVariable Integer id,\n                                 @RequestParam(defaultValue = &quot;false&quot;) boolean fullChain) {\n        return employeeService.getEmployee(id, fullChain);\n    }\n\n    @GetMapping(&quot;/employees/by_manager/{managerId}&quot;)\n    public List&lt;Employee&gt; findEmployeesByManager(@PathVariable Integer managerId,\n                                             @RequestParam(defaultValue = &quot;0&quot;) int page,\n                                             @RequestParam(defaultValue = &quot;10&quot;) int size,\n                                             @RequestParam(defaultValue = &quot;id&quot;) String sort){     \n        return employeeService.getEmployeesByManager(managerId, page, size, sort);\n    }\n\n    @GetMapping(&quot;/employees/by_department/{departmentId}&quot;)\n    public List&lt;Employee&gt; findEmployeesByDepartment(@PathVariable Integer departmentId,\n                                                @RequestParam(defaultValue = &quot;0&quot;) int page,\n                                                @RequestParam(defaultValue = &quot;10&quot;) int size,\n                                                @RequestParam(defaultValue = &quot;id&quot;) String sort) {\n        return employeeService.getEmployeesByDepartment(departmentId, page, size, sort);\n    }\n}\n</code></pre>\n<p>Repository:</p>\n<pre><code>package com.springemployeecatalog.repository;\n\nimport com.springemployeecatalog.entity.Department;\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.stereotype.Repository;\n\n@Repository\npublic interface DepartmentRepository extends JpaRepository&lt;Department, Integer&gt; {\n}\n\n\npackage com.springemployeecatalog.repository;\n\nimport com.springemployeecatalog.entity.Department;\nimport com.springemployeecatalog.entity.Employee;\nimport org.springframework.data.entity.Pageable;\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.stereotype.Repository;\n\nimport java.util.List;\n@Repository\npublic interface EmployeeRepository extends JpaRepository &lt;Employee, Integer&gt; {\n    List&lt;Employee&gt; findEmployeesByManager(Employee manager, Pageable pageable);\n    List&lt;Employee&gt; findEmployeesByDepartment(Department department, Pageable pageable);\n}\n</code></pre>\n<p>Service:</p>\n<pre><code> package com.springemployeecatalog.service;\n\nimport com.springemployeecatalog.entity.Employee;\n\nimport java.util.List;\n\npublic interface EmployeeService {\n    List&lt;Employee&gt; getAllEmployees(int page, int size, String sort);\n    Employee getEmployee(Integer id, boolean fullChain);\n    List&lt;Employee&gt; getEmployeesByManager(Integer managerId, int page, int size, String sort);\n    List&lt;Employee&gt; getEmployeesByDepartment(Integer departmentId, int page, int size, String sort);\n}\n\n\npackage com.springemployeecatalog.service;\n\nimport com.springemployeecatalog.entity.Department;\nimport com.springemployeecatalog.entity.Employee;\nimport com.springemployeecatalog.repository.DepartmentRepository;\nimport com.springemployeecatalog.repository.EmployeeRepository;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.data.domain.Page;\nimport org.springframework.data.domain.PageRequest;\nimport org.springframework.data.domain.Pageable;\nimport org.springframework.data.domain.Sort;\nimport org.springframework.stereotype.Service;\n\nimport java.util.*;\n\n@Service\npublic class EmployeeServiceImpl implements EmployeeService{\n    @Autowired\n    private EmployeeRepository employeeRepository;\n\n    @Autowired\n    private DepartmentRepository departmentRepository;\n\n    @Override\n    public List&lt;Employee&gt; getAllEmployees(int page, int size, String sort) {\n        Pageable pageable = PageRequest.of(page, size, Sort.by(sort));\n        Page&lt;Employee&gt; employeePage = employeeRepository.findAll(pageable);\n        System.out.println(&quot;Отримано &quot; + employeePage.getTotalElements() + &quot; записів&quot;);\n\n        return employeePage != null ? employeePage.getContent() : Collections.emptyList();\n    }\n\n    @Override\n    public Employee getEmployee(Integer id, boolean fullChain) {\n        Employee employee = employeeRepository.findById(id).orElse(null);\n        List&lt;Employee&gt; managerChain = new ArrayList&lt;&gt;();\n        if (fullChain &amp;&amp; employee != null) {\n            Employee manager = employee.getManager();\n            while (manager != null) {\n                managerChain.add(manager);\n                manager = manager.getManager();\n            }\n        }\n        Map&lt;String, Object&gt; response = new HashMap&lt;&gt;();\n        response.put(&quot;employee&quot;, employee);\n        response.put(&quot;managerChain&quot;, managerChain);\n        return employee;\n    }\n\n    @Override\n    public List&lt;Employee&gt; getEmployeesByManager(Integer managerId, int page, int size, String sort) {\n        Pageable pageable = PageRequest.of(page, size, Sort.by(sort));\n        Employee manager = employeeRepository.findById(managerId).orElse(null);\n        if (manager != null) {\n            return employeeRepository.findEmployeesByManager(manager, pageable);\n        }\n        return Collections.emptyList();\n    }\n    @Override\n    public List&lt;Employee&gt; getEmployeesByDepartment(Integer departmentId, int page, int size, String sort) {\n        Pageable pageable = PageRequest.of(page, size, Sort.by(sort));\n        Department department = departmentRepository.findById(departmentId).orElse(null);\n        if (department != null) {\n            return employeeRepository.findEmployeesByDepartment(department, pageable);\n        }\n        return Collections.emptyList();\n    }\n}\n</code></pre>\n<p>This is application properties:</p>\n<pre><code>server.port=8080\n\nspring.datasource.url=jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1\nspring.datasource.driverClassName=org.h2.Driver\nspring.datasource.username=sa\nspring.datasource.password=\n\nspring.h2.console.enabled=true\nspring.h2.console.path=/h2\n\nspring.jpa.database-platform=org.hibernate.dialect.H2Dialect\nspring.jpa.generate-ddl=false\nspring.jpa.hibernate.ddl-auto=\nspring.jpa.show-sql=true\n</code></pre>\n<p>pom.xml file:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;com.spring&lt;/groupId&gt;\n    &lt;artifactId&gt;employees-catalogue&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n\n&lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;3.0.4&lt;/version&gt;\n&lt;/parent&gt;\n\n&lt;properties&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\n    &lt;java.version&gt;19&lt;/java.version&gt;\n&lt;/properties&gt;\n\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.google.guava&lt;/groupId&gt;\n        &lt;artifactId&gt;guava&lt;/artifactId&gt;\n        &lt;version&gt;23.0&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n        &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;\n        &lt;version&gt;5.9.2&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n        &lt;exclusions&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;\n                &lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n        &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.mysql&lt;/groupId&gt;\n        &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\n        &lt;scope&gt;runtime&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n        &lt;artifactId&gt;h2&lt;/artifactId&gt;\n        &lt;scope&gt;runtime&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n&lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.8.0&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;${java.version}&lt;/source&gt;\n                    &lt;target&gt;${java.version}&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n"},{"tags":["java","apache-kafka","kafka-producer-api"],"owner":{"account_id":11000314,"reputation":21,"user_id":8081105,"display_name":"Deepak Kaushik"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":221,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1689104318,"creation_date":1689078307,"question_id":76661955,"body_markdown":"We have to publish messages to our Kafka broker, I am receiving messages every 2 sec from a service.\r\nSo I created a producer in Java, and I am using that producer throughout my application, Like whenever I need to send a message I am reusing the same producer,\r\n\r\n```\r\npublic void sendMessage(String topic, String message) {\r\n\t\tL.debug(String.format(&quot;Sending %s: %s&quot;, topic, message));\r\n\t\tProducerRecord&lt;String, String&gt; producerRecord = new ProducerRecord&lt;&gt;(topic, message);\r\n\t\tkafkaProducer = new KafkaProducer&lt;&gt;(configProperties);\r\n\t\tkafkaProducer.send(producerRecord);\r\n\t\tkafkaProducer.flush();\r\n\t}\r\n```\r\n\r\n```\r\n\tprivate KafkaProducer&lt;String, String&gt; connect() {\r\n\t\tkafkaProducer = new KafkaProducer&lt;&gt;(configProperties);\r\n\t\treturn kafkaProducer;\r\n\t}\r\n```\r\n\r\nConnection to Kafka is successful with and without SSL, And the producer also starts sending data to my Kafka topics, But after some time it gets disconnected with the message node -1 disconnected, from there, I have to restart the application to recreate the connection.\r\n\r\nThe error I get after some time:\r\n\r\n[![The error I get after some time][1]][1]\r\n\r\nI created the Kafka producer and made topics in Kafka, I thought it was due to SSL so I set up SSL on my Kafka and was able to connect with SSL as well but still, the issue was the same after some time my producer gets disconnected.\r\n\r\nI am using the following Kafka dependency\r\n\r\n```\r\n&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.apache.kafka&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;kafka-clients&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.4.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nPlease let me know if what I am missing and also if there is a way to resolve this, or if i can catch this issue and reconnect my producer.\r\n\r\nIf i create a new producer for every message i send it works fine but I want to reuse same producer instead of creating new producer every 2 Seconds.\r\n\r\nThanks in advance.\r\n\r\n[1]: https://i.stack.imgur.com/J5k0M.png","title":"Kafka producer getting disconnected after some time with error node -1 diconnected?","body":"<p>We have to publish messages to our Kafka broker, I am receiving messages every 2 sec from a service.\nSo I created a producer in Java, and I am using that producer throughout my application, Like whenever I need to send a message I am reusing the same producer,</p>\n<pre><code>public void sendMessage(String topic, String message) {\n        L.debug(String.format(&quot;Sending %s: %s&quot;, topic, message));\n        ProducerRecord&lt;String, String&gt; producerRecord = new ProducerRecord&lt;&gt;(topic, message);\n        kafkaProducer = new KafkaProducer&lt;&gt;(configProperties);\n        kafkaProducer.send(producerRecord);\n        kafkaProducer.flush();\n    }\n</code></pre>\n<pre><code>    private KafkaProducer&lt;String, String&gt; connect() {\n        kafkaProducer = new KafkaProducer&lt;&gt;(configProperties);\n        return kafkaProducer;\n    }\n</code></pre>\n<p>Connection to Kafka is successful with and without SSL, And the producer also starts sending data to my Kafka topics, But after some time it gets disconnected with the message node -1 disconnected, from there, I have to restart the application to recreate the connection.</p>\n<p>The error I get after some time:</p>\n<p><a href=\"https://i.stack.imgur.com/J5k0M.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/J5k0M.png\" alt=\"The error I get after some time\" /></a></p>\n<p>I created the Kafka producer and made topics in Kafka, I thought it was due to SSL so I set up SSL on my Kafka and was able to connect with SSL as well but still, the issue was the same after some time my producer gets disconnected.</p>\n<p>I am using the following Kafka dependency</p>\n<pre><code>&lt;dependency&gt;\n        &lt;groupId&gt;org.apache.kafka&lt;/groupId&gt;\n        &lt;artifactId&gt;kafka-clients&lt;/artifactId&gt;\n        &lt;version&gt;3.4.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Please let me know if what I am missing and also if there is a way to resolve this, or if i can catch this issue and reconnect my producer.</p>\n<p>If i create a new producer for every message i send it works fine but I want to reuse same producer instead of creating new producer every 2 Seconds.</p>\n<p>Thanks in advance.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":3,"creation_date":1689100160,"post_id":76664634,"comment_id":135164482,"body_markdown":"`return checkValue(someValue).or(this::someOtherMethod);` (assuming `someOtherMethod` is not static","body":"<code>return checkValue(someValue).or(this::someOtherMethod);</code> (assuming <code>someOtherMethod</code> is not static"},{"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"score":1,"creation_date":1689102325,"post_id":76664634,"comment_id":135164912,"body_markdown":"I don&#39;t think the answer cited as a duplicate is correct.  In each example, some form of `orElseGet` is used which does not return an `Optional`.","body":"I don&#39;t think the answer cited as a duplicate is correct.  In each example, some form of <code>orElseGet</code> is used which does not return an <code>Optional</code>."}],"answers":[{"comments":[{"owner":{"account_id":3381296,"reputation":5075,"user_id":2838289,"display_name":"LuCio"},"score":0,"creation_date":1689103109,"post_id":76664718,"comment_id":135165025,"body_markdown":"Or even shorter as one -liner using a method reference: ```return checkValue(someValue).or(this::someOtherMethod);```","body":"Or even shorter as one -liner using a method reference: <code>return checkValue(someValue).or(this::someOtherMethod);</code>"},{"owner":{"account_id":13170666,"reputation":78679,"user_id":9513184,"display_name":"Unmitigated"},"score":0,"creation_date":1689103553,"post_id":76664718,"comment_id":135165122,"body_markdown":"@LuCio True, I had assumed that `// more stuff here` in the original question might&#39;ve represented some other code.","body":"@LuCio True, I had assumed that <code>&#47;&#47; more stuff here</code> in the original question might&#39;ve represented some other code."},{"owner":{"account_id":3381296,"reputation":5075,"user_id":2838289,"display_name":"LuCio"},"score":0,"creation_date":1689103959,"post_id":76664718,"comment_id":135165186,"body_markdown":"I was focused on the &quot;one line&quot;. But you&#39;re right.","body":"I was focused on the &quot;one line&quot;. But you&#39;re right."},{"owner":{"account_id":23242148,"reputation":11,"user_id":17331277,"display_name":"user17331277"},"score":0,"creation_date":1689187360,"post_id":76664718,"comment_id":135179433,"body_markdown":"This is solid, thank you. To add an additional caveat, which I think some of other commenters picked up here - what if I need to run something like checkValue many times? Or various other lines of code before the end of someMethod? With this strategy, seems like I would have to keep nesting it deeper and deeper. Is there a way to simply return to the current method without calling something else?","body":"This is solid, thank you. To add an additional caveat, which I think some of other commenters picked up here - what if I need to run something like checkValue many times? Or various other lines of code before the end of someMethod? With this strategy, seems like I would have to keep nesting it deeper and deeper. Is there a way to simply return to the current method without calling something else?"},{"owner":{"account_id":13170666,"reputation":78679,"user_id":9513184,"display_name":"Unmitigated"},"score":0,"creation_date":1689212016,"post_id":76664718,"comment_id":135182544,"body_markdown":"@user17331277 There&#39;s no way to return a value from a function without explicitly using a `return` statement (exceptions can stop the execution, but that&#39;s not useful here). So syntactically, there isn&#39;t much more that can be done here. You&#39;ll have to decide between this solution and what you originally had in the question.","body":"@user17331277 There&#39;s no way to return a value from a function without explicitly using a <code>return</code> statement (exceptions can stop the execution, but that&#39;s not useful here). So syntactically, there isn&#39;t much more that can be done here. You&#39;ll have to decide between this solution and what you originally had in the question."}],"tags":[],"owner":{"account_id":13170666,"reputation":78679,"user_id":9513184,"display_name":"Unmitigated"},"comment_count":5,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1689103523,"creation_date":1689099130,"answer_id":76664718,"question_id":76664634,"body_markdown":"You can use [`Optional#or`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Optional.html#or(java.util.function.Supplier)).\r\n\r\n&gt; returns an Optional describing the value of this Optional, if a value is present, otherwise an Optional produced by the supplying function.\r\n\r\n```java\r\nreturn checkValue(someValue).or(() -&gt; {\r\n    // other code...\r\n    return someOtherMethod();\r\n});\r\n```\r\n\r\nIf there is only one method to run in the case where the first method returned an empty optional, then a method reference can be used. \r\n\r\n```js\r\nreturn checkValue(someValue).or(this::someOtherMethod);\r\n// assuming someOtherMethod is an instance method\r\n```","title":"Java: Can this be done in one line? Return if Optional.isPresent() otherwise continue method","body":"<p>You can use <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Optional.html#or(java.util.function.Supplier)\" rel=\"nofollow noreferrer\"><code>Optional#or</code></a>.</p>\n<blockquote>\n<p>returns an Optional describing the value of this Optional, if a value is present, otherwise an Optional produced by the supplying function.</p>\n</blockquote>\n<pre class=\"lang-java prettyprint-override\"><code>return checkValue(someValue).or(() -&gt; {\n    // other code...\n    return someOtherMethod();\n});\n</code></pre>\n<p>If there is only one method to run in the case where the first method returned an empty optional, then a method reference can be used.</p>\n<pre class=\"lang-js prettyprint-override\"><code>return checkValue(someValue).or(this::someOtherMethod);\n// assuming someOtherMethod is an instance method\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689102937,"creation_date":1689102937,"answer_id":76665125,"question_id":76664634,"body_markdown":"Using [@user16320675&#39;s](https://stackoverflow.com/users/16320675/user16320675) comment, here is how it works.\r\n- the first example is when there is no error. If the check determines validity, the  non-errored optional is returned.\r\n- the second is when the is an error (in this case, an empty optional).  Then the other method is called via the `or` and that `Optional` is returned.\r\n```\r\nsomeValue = &quot;Success!&quot;;\r\nOptional&lt;String&gt; result =  checkValue(someValue).or(this::someOtherMethod);\r\nSystem.out.println(result.get());\r\n\r\nsomeValue = &quot;&quot;;\r\nresult = checkValue(someValue).or(this::someOtherMethod);\r\nSystem.out.println(result.get());\r\n```\r\nprints\r\n```\r\nSuccess!\r\nError encountered!\r\n```\r\nThe supporting methods\r\n```\r\n\r\npublic Optional&lt;String&gt; checkValue(String value) {\r\n    if (value.isEmpty()) {\r\n        return Optional.empty();\r\n    }\r\n    return Optional.of(value);\r\n}\r\n\r\npublic Optional&lt;String&gt; someOtherMethod() {\r\n    return Optional.of(&quot;Error encountered!&quot;);\r\n}\r\n","title":"Java: Can this be done in one line? Return if Optional.isPresent() otherwise continue method","body":"<p>Using <a href=\"https://stackoverflow.com/users/16320675/user16320675\">@user16320675's</a> comment, here is how it works.</p>\n<ul>\n<li>the first example is when there is no error. If the check determines validity, the  non-errored optional is returned.</li>\n<li>the second is when the is an error (in this case, an empty optional).  Then the other method is called via the <code>or</code> and that <code>Optional</code> is returned.</li>\n</ul>\n<pre><code>someValue = &quot;Success!&quot;;\nOptional&lt;String&gt; result =  checkValue(someValue).or(this::someOtherMethod);\nSystem.out.println(result.get());\n\nsomeValue = &quot;&quot;;\nresult = checkValue(someValue).or(this::someOtherMethod);\nSystem.out.println(result.get());\n</code></pre>\n<p>prints</p>\n<pre><code>Success!\nError encountered!\n</code></pre>\n<p>The supporting methods</p>\n<pre><code>\npublic Optional&lt;String&gt; checkValue(String value) {\n    if (value.isEmpty()) {\n        return Optional.empty();\n    }\n    return Optional.of(value);\n}\n\npublic Optional&lt;String&gt; someOtherMethod() {\n    return Optional.of(&quot;Error encountered!&quot;);\n}\n</code></pre>\n"}],"owner":{"account_id":23242148,"reputation":11,"user_id":17331277,"display_name":"user17331277"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":91,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1689103523,"creation_date":1689098287,"question_id":76664634,"body_markdown":"This is a trivial problem, but I&#39;m curious if it can be done to clean up some code. Can the following be written in one line without generating an extra variable or calling the &#39;checkValue&#39; method again? I have access up to java 17.\r\n\r\n    public Optional&lt;String&gt; someMethod() {\r\n        // stuff here\r\n        Optional&lt;String&gt; error = checkValue(someValue);\r\n        if (error.isPresent()) return error;\r\n        // otherwise continue this method\r\n        // more stuff here\r\n        return someOtherMethod();\r\n    }\r\n\r\n\r\nI know it can be done if I call the checkValue method again, but imagine that this method has some heavy logic in it that we don&#39;t want to repeat. ","title":"Java: Can this be done in one line? Return if Optional.isPresent() otherwise continue method","body":"<p>This is a trivial problem, but I'm curious if it can be done to clean up some code. Can the following be written in one line without generating an extra variable or calling the 'checkValue' method again? I have access up to java 17.</p>\n<pre><code>public Optional&lt;String&gt; someMethod() {\n    // stuff here\n    Optional&lt;String&gt; error = checkValue(someValue);\n    if (error.isPresent()) return error;\n    // otherwise continue this method\n    // more stuff here\n    return someOtherMethod();\n}\n</code></pre>\n<p>I know it can be done if I call the checkValue method again, but imagine that this method has some heavy logic in it that we don't want to repeat.</p>\n"},{"tags":["java","email","gmail","jakarta-mail"],"owner":{"account_id":28995921,"reputation":1,"user_id":22210607,"display_name":"Arif Pepaj"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689102817,"creation_date":1689089173,"question_id":76663558,"body_markdown":"I have this userEndpoint I use (in wildfly 27 and jakarta ee) and when I try to run in Postman, it gives an error, but when I try in the `main` method, it works. I try to send an email using an API call.\r\n\r\nThis is userservice:\r\n\r\n\tpublic void sendConfirmAccountEmail(String email, String token) throws Exception {\r\n\t\tGMailer emailService = new GMailer();\r\n\t\temailService.sendMail(email, &quot;Confirm Account&quot;,\r\n\t\t\t\t&quot;Click the following link to confirm your account: http://localhost:8080/user/register/confirm?&quot;\r\n\t\t\t\t\t\t+ token);\r\n\t}\r\n\r\nAnd this endpoint\r\n\r\n\t@GET\r\n\t@Path(&quot;/send/{token}&quot;)\r\n\tpublic Response email(@PathParam(&quot;token&quot;) String token, String email) {\r\n\t\ttry {\r\n\t\t\tGMailer emailService = new GMailer();\r\n\t\t\temailService.sendMail(email, &quot;Confirm Account&quot;,\r\n\t\t\t\t\t&quot;Click the following link to confirm your account: http://localhost:8080/user/users/confirm/&quot;\r\n\t\t\t\t\t\t\t+ token);\r\n\r\n\t\t} catch (Exception e) {\r\n\t\t\tSystem.out.println(&quot;Gabim ne userEndpoint&quot;);\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\treturn Response.status(201).build();\r\n\t}\r\n\r\n\r\nAnd here is class:\r\n\r\n```java\r\npublic class GMailer {\r\n\tprivate Gmail service;\r\n\r\n\tpublic GMailer() throws Exception {\r\n\t\tNetHttpTransport httpTransport = createHttpTransport();\r\n\t\tGsonFactory jsonFactory = GsonFactory.getDefaultInstance();\r\n\t\tservice = new Gmail.Builder(httpTransport, jsonFactory, getCredentials(httpTransport, jsonFactory))\r\n\t\t\t\t.setApplicationName(&quot;Test Email&quot;).build();\r\n\t}\r\n\r\n\tprivate NetHttpTransport createHttpTransport() throws Exception {\r\n\t\tNetHttpTransport httpTransport = new NetHttpTransport.Builder().build();\r\n\t\treturn (NetHttpTransport) httpTransport;\r\n\t}\r\n\r\n\tpublic Credential getCredentials(final NetHttpTransport httpTransport, GsonFactory jsonFactory) throws IOException {\r\n\t\tGoogleClientSecrets clientSecrets = loadClientSecrets(jsonFactory);\r\n\t\tGoogleAuthorizationCodeFlow flow = createAuthorizationCodeFlow(httpTransport, jsonFactory, clientSecrets);\r\n\t\tCredential credential = new AuthorizationCodeInstalledApp(flow, new LocalServerReceiver()).authorize(&quot;user&quot;);\r\n\t\treturn credential;\r\n\t}\r\n\r\n\tprivate GoogleClientSecrets loadClientSecrets(GsonFactory jsonFactory) throws IOException {\r\n\t    InputStream in = GMailer.class.getResourceAsStream(&quot;/client_secret&quot;);\r\n\t    if (in == null) {\r\n\t        throw new FileNotFoundException(&quot;Resource file not found&quot;);\r\n\t    }\r\n\t    return GoogleClientSecrets.load(jsonFactory, new InputStreamReader(in));\r\n\t}\r\n\r\n\tprivate GoogleAuthorizationCodeFlow createAuthorizationCodeFlow(NetHttpTransport httpTransport,\r\n\t\t\tGsonFactory jsonFactory, GoogleClientSecrets clientSecrets) throws IOException {\r\n\t\treturn new GoogleAuthorizationCodeFlow.Builder(httpTransport, jsonFactory, clientSecrets,\r\n\t\t\t\tSet.of(GmailScopes.GMAIL_SEND))\r\n\t\t\t\t.setDataStoreFactory(new FileDataStoreFactory(Paths.get(&quot;tokens&quot;).toFile())).setAccessType(&quot;offline&quot;)\r\n\t\t\t\t.build();\r\n\t}\r\n\r\n\tpublic void sendMail(String useremail, String subject, String text) throws Exception {\r\n\t\tMimeMessage email = createEmail(useremail, subject, text);\r\n\t\tMessage message = createMessage(email);\r\n\t\tmessage = service.users().messages().send(&quot;me&quot;, message).execute();\r\n\t\tSystem.out.println(&quot;Message id: &quot; + message.getId());\r\n\t\tSystem.out.println(message.toPrettyString());\r\n\t}\r\n\r\n\tprivate MimeMessage createEmail(String useremail, String subject, String text) throws Exception {\r\n\t\tProperties props = new Properties();\r\n\t\tSession session = Session.getDefaultInstance(props, null);\r\n\t\tMimeMessage email = new MimeMessage(session);\r\n\t\temail.setFrom(new InternetAddress(useremail));\r\n\t\temail.addRecipient(jakarta.mail.Message.RecipientType.TO, new InternetAddress(useremail));\r\n\t\temail.setSubject(subject);\r\n\t\temail.setText(text);\r\n\t\treturn email;\r\n\t}\r\n\r\n\tprivate Message createMessage(MimeMessage email) throws Exception {\r\n\t\tByteArrayOutputStream buffer = new ByteArrayOutputStream();\r\n\t\temail.writeTo(buffer);\r\n\t\tbyte[] rawMessageBytes = buffer.toByteArray();\r\n\t\tString encodedEmail = Base64.encodeBase64URLSafeString(rawMessageBytes);\r\n\t\tMessage message = new Message();\r\n\t\tmessage.setRaw(encodedEmail);\r\n\t\treturn message;\r\n\t}\r\n```\r\n\r\nWhy is that and how can I fix it?","title":"getResourceAsStream fetch clientsecret","body":"<p>I have this userEndpoint I use (in wildfly 27 and jakarta ee) and when I try to run in Postman, it gives an error, but when I try in the <code>main</code> method, it works. I try to send an email using an API call.</p>\n<p>This is userservice:</p>\n<pre><code>public void sendConfirmAccountEmail(String email, String token) throws Exception {\n    GMailer emailService = new GMailer();\n    emailService.sendMail(email, &quot;Confirm Account&quot;,\n            &quot;Click the following link to confirm your account: http://localhost:8080/user/register/confirm?&quot;\n                    + token);\n}\n</code></pre>\n<p>And this endpoint</p>\n<pre><code>@GET\n@Path(&quot;/send/{token}&quot;)\npublic Response email(@PathParam(&quot;token&quot;) String token, String email) {\n    try {\n        GMailer emailService = new GMailer();\n        emailService.sendMail(email, &quot;Confirm Account&quot;,\n                &quot;Click the following link to confirm your account: http://localhost:8080/user/users/confirm/&quot;\n                        + token);\n\n    } catch (Exception e) {\n        System.out.println(&quot;Gabim ne userEndpoint&quot;);\n        e.printStackTrace();\n    }\n    return Response.status(201).build();\n}\n</code></pre>\n<p>And here is class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class GMailer {\n    private Gmail service;\n\n    public GMailer() throws Exception {\n        NetHttpTransport httpTransport = createHttpTransport();\n        GsonFactory jsonFactory = GsonFactory.getDefaultInstance();\n        service = new Gmail.Builder(httpTransport, jsonFactory, getCredentials(httpTransport, jsonFactory))\n                .setApplicationName(&quot;Test Email&quot;).build();\n    }\n\n    private NetHttpTransport createHttpTransport() throws Exception {\n        NetHttpTransport httpTransport = new NetHttpTransport.Builder().build();\n        return (NetHttpTransport) httpTransport;\n    }\n\n    public Credential getCredentials(final NetHttpTransport httpTransport, GsonFactory jsonFactory) throws IOException {\n        GoogleClientSecrets clientSecrets = loadClientSecrets(jsonFactory);\n        GoogleAuthorizationCodeFlow flow = createAuthorizationCodeFlow(httpTransport, jsonFactory, clientSecrets);\n        Credential credential = new AuthorizationCodeInstalledApp(flow, new LocalServerReceiver()).authorize(&quot;user&quot;);\n        return credential;\n    }\n\n    private GoogleClientSecrets loadClientSecrets(GsonFactory jsonFactory) throws IOException {\n        InputStream in = GMailer.class.getResourceAsStream(&quot;/client_secret&quot;);\n        if (in == null) {\n            throw new FileNotFoundException(&quot;Resource file not found&quot;);\n        }\n        return GoogleClientSecrets.load(jsonFactory, new InputStreamReader(in));\n    }\n\n    private GoogleAuthorizationCodeFlow createAuthorizationCodeFlow(NetHttpTransport httpTransport,\n            GsonFactory jsonFactory, GoogleClientSecrets clientSecrets) throws IOException {\n        return new GoogleAuthorizationCodeFlow.Builder(httpTransport, jsonFactory, clientSecrets,\n                Set.of(GmailScopes.GMAIL_SEND))\n                .setDataStoreFactory(new FileDataStoreFactory(Paths.get(&quot;tokens&quot;).toFile())).setAccessType(&quot;offline&quot;)\n                .build();\n    }\n\n    public void sendMail(String useremail, String subject, String text) throws Exception {\n        MimeMessage email = createEmail(useremail, subject, text);\n        Message message = createMessage(email);\n        message = service.users().messages().send(&quot;me&quot;, message).execute();\n        System.out.println(&quot;Message id: &quot; + message.getId());\n        System.out.println(message.toPrettyString());\n    }\n\n    private MimeMessage createEmail(String useremail, String subject, String text) throws Exception {\n        Properties props = new Properties();\n        Session session = Session.getDefaultInstance(props, null);\n        MimeMessage email = new MimeMessage(session);\n        email.setFrom(new InternetAddress(useremail));\n        email.addRecipient(jakarta.mail.Message.RecipientType.TO, new InternetAddress(useremail));\n        email.setSubject(subject);\n        email.setText(text);\n        return email;\n    }\n\n    private Message createMessage(MimeMessage email) throws Exception {\n        ByteArrayOutputStream buffer = new ByteArrayOutputStream();\n        email.writeTo(buffer);\n        byte[] rawMessageBytes = buffer.toByteArray();\n        String encodedEmail = Base64.encodeBase64URLSafeString(rawMessageBytes);\n        Message message = new Message();\n        message.setRaw(encodedEmail);\n        return message;\n    }\n</code></pre>\n<p>Why is that and how can I fix it?</p>\n"},{"tags":["java","spring-boot","hibernate-envers"],"comments":[{"owner":{"account_id":21330249,"reputation":297,"user_id":15702124,"display_name":"LenglBoy"},"score":0,"creation_date":1689103885,"post_id":76639848,"comment_id":135165178,"body_markdown":"Could you please provide information about your `Entity` and its config? And maybe about your audit tb tables? Which one are created/used?\nUsually the `EntityNotFoundException` issue shows that you are not tracking BOTH sides of your relationship. You can audit single object or in case of relationships you need BOTH sides be added to envers.","body":"Could you please provide information about your <code>Entity</code> and its config? And maybe about your audit tb tables? Which one are created/used? Usually the <code>EntityNotFoundException</code> issue shows that you are not tracking BOTH sides of your relationship. You can audit single object or in case of relationships you need BOTH sides be added to envers."}],"owner":{"account_id":27492221,"reputation":1,"user_id":20977357,"display_name":"Luan Masson"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":76,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689102344,"creation_date":1688759208,"question_id":76639848,"body_markdown":"\r\nWhen I&#39;m trying to do an audition with my Hibernate envers, my two relations that are @ManyToOne return this error:\r\n\r\n```\r\nMethod threw &#39;javax.persistence.EntityNotFoundException&#39; exception. Cannot evaluate io.sucesso.bps.gallery.domain.Arquivo$HibernateProxy$suSDDjYF.toString()\r\n```\r\nOS -&gt; Windows 11\r\nJava Version -&gt; 17.0.5\r\n\r\n","title":"How to Audit an @ManyToOne relation with Hibernate envers","body":"<p>When I'm trying to do an audition with my Hibernate envers, my two relations that are @ManyToOne return this error:</p>\n<pre><code>Method threw 'javax.persistence.EntityNotFoundException' exception. Cannot evaluate io.sucesso.bps.gallery.domain.Arquivo$HibernateProxy$suSDDjYF.toString()\n</code></pre>\n<p>OS -&gt; Windows 11\nJava Version -&gt; 17.0.5</p>\n"},{"tags":["java","multithreading","queue"],"comments":[{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1684326675,"post_id":76270500,"comment_id":134501576,"body_markdown":"A `SynchronousQueue` doesn’t know anything about the thread that is not calling `offer`. But if you have exactly one consumer waiting for exactly one producer, why do they even communicate via a `SynchronousQueue`? It would make more sense to have a `Future` or something similar. Or just not to use two different threads when one would perform a blocking wait for the other anyway.","body":"A <code>SynchronousQueue</code> doesn’t know anything about the thread that is not calling <code>offer</code>. But if you have exactly one consumer waiting for exactly one producer, why do they even communicate via a <code>SynchronousQueue</code>? It would make more sense to have a <code>Future</code> or something similar. Or just not to use two different threads when one would perform a blocking wait for the other anyway."},{"owner":{"account_id":4609695,"reputation":30864,"user_id":3738171,"display_name":"Guerric P"},"score":0,"creation_date":1684327753,"post_id":76270500,"comment_id":134501833,"body_markdown":"I have two different threads (a NIO thread on the consumer, and a Quartz thread on the producer) so I can&#39;t have just one thread. You suggest to use a `Future` can you elaborate because I don&#39;t see how it would solve my problem. I need the producer to block until a consumer takes the message","body":"I have two different threads (a NIO thread on the consumer, and a Quartz thread on the producer) so I can&#39;t have just one thread. You suggest to use a <code>Future</code> can you elaborate because I don&#39;t see how it would solve my problem. I need the producer to block until a consumer takes the message"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1684329527,"post_id":76270500,"comment_id":134502268,"body_markdown":"Why do you want to block the producer?","body":"Why do you want to block the producer?"},{"owner":{"account_id":4609695,"reputation":30864,"user_id":3738171,"display_name":"Guerric P"},"score":0,"creation_date":1684330039,"post_id":76270500,"comment_id":134502407,"body_markdown":"Because I want it to be aware of the success or error. Callbacks may also be suitable I guess","body":"Because I want it to be aware of the success or error. Callbacks may also be suitable I guess"},{"owner":{"account_id":4609695,"reputation":30864,"user_id":3738171,"display_name":"Guerric P"},"score":0,"creation_date":1684331433,"post_id":76270500,"comment_id":134502806,"body_markdown":"@Holger if you have any idea of a pattern that would be suitable for me, I&#39;d be glad to know it","body":"@Holger if you have any idea of a pattern that would be suitable for me, I&#39;d be glad to know it"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1684339726,"post_id":76270500,"comment_id":134505006,"body_markdown":"I don’t know enough about your case. Maybe, `CompletableFuture` can help. If you can express your different thread contexts as `Executor`s, you can chain subsequent actions (callbacks) using the various `then…Async(functionOrAction, executor)` methods.","body":"I don’t know enough about your case. Maybe, <code>CompletableFuture</code> can help. If you can express your different thread contexts as <code>Executor</code>s, you can chain subsequent actions (callbacks) using the various <code>then…Async(functionOrAction, executor)</code> methods."}],"answers":[{"tags":[],"owner":{"account_id":4609695,"reputation":30864,"user_id":3738171,"display_name":"Guerric P"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689102183,"creation_date":1684360451,"answer_id":76276441,"question_id":76270500,"body_markdown":"No idea if there are better solutions (would love to know), but I&#39;m sharing mine:\r\n\r\nService\r\n-------\r\n\r\n    private record ContentAndFile(LongPollingDto dto, File file) {\r\n\t}\r\n\r\n\tprivate Queue&lt;CompletableFuture&lt;LongPollingDto&gt;&gt; consumers = new ConcurrentLinkedQueue&lt;&gt;();\r\n\tprivate Queue&lt;ContentAndFile&gt; messages = new ConcurrentLinkedQueue&lt;&gt;();\r\n\r\n\tpublic CompletableFuture&lt;LongPollingDto&gt; getFutureDto() throws IOException {\r\n\t\tCompletableFuture&lt;LongPollingDto&gt; future = new CompletableFuture&lt;&gt;();\r\n\t\tconsumers.add(future);\r\n\t\tmatch();\r\n\r\n\t\treturn future;\r\n\t}\r\n\r\n\tpublic void enqueue(LongPollingDto content) throws IOException {\r\n\t\tString uniqueFileName = UUID.randomUUID().toString() + &quot;.json&quot;;\r\n\t\tFile file = new File(syncTmpDataDirectory, uniqueFileName);\r\n\t\twriter.writeValue(file, content);\r\n\t\tdoEnqueue(content, file);\r\n\t\tmatch();\r\n\t}\r\n\r\n\t@EventListener(ApplicationReadyEvent.class)\r\n\tprotected void synchronizeTemporaryFiles() throws IOException {\r\n\t\tFile tmpDir = new File(syncTmpDataDirectory);\r\n\r\n\t\tList&lt;File&gt; files = Arrays.asList(tmpDir.listFiles());\r\n\t\tfiles.sort(Comparator.comparing(File::lastModified));\r\n\r\n\t\tfiles.forEach(x -&gt; {\r\n\t\t\ttry {\r\n\t\t\t\tLongPollingDto dto = mapper.readValue(x, LongPollingDto.class);\r\n\t\t\t\tdoEnqueue(dto, x);\r\n\t\t\t} catch (IOException e) {\r\n\t\t\t\tlog.error(&quot;Error when syncing file: {}&quot;, x.getAbsolutePath(), e);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tmatch();\r\n\t}\r\n\r\n\tprivate void match() throws IOException {\r\n\t\tif (!consumers.isEmpty() &amp;&amp; !messages.isEmpty()) {\r\n\t\t\tCompletableFuture&lt;LongPollingDto&gt; future = consumers.poll();\r\n\t\t\tif (!future.isCancelled()) {\r\n\t\t\t\tContentAndFile contentAndFile = messages.poll();\r\n\t\t\t\tfuture.complete(contentAndFile.dto);\r\n\t\t\t\tFiles.delete(contentAndFile.file.toPath());\r\n\t\t\t}\r\n\r\n\t\t\tmatch();\r\n\t\t}\r\n\t}\r\n\r\n\tprivate void doEnqueue(LongPollingDto dto, File file) {\r\n\t\tmessages.add(new ContentAndFile(dto, file));\r\n\t}\r\n\r\nController\r\n----------\r\n\r\n\t@GetMapping(&quot;long-polling&quot;)\r\n\tpublic DeferredResult&lt;LongPollingDto&gt; longPolling() throws IOException {\r\n\r\n\t\tDeferredResult&lt;LongPollingDto&gt; result = new DeferredResult&lt;&gt;();\r\n\r\n\t\tCompletableFuture&lt;LongPollingDto&gt; futureDto = longPollingService.getFutureDto();\r\n\r\n\t\texecutor.execute(() -&gt; {\r\n\t\t\ttry {\r\n\t\t\t\tresult.setResult(futureDto.get());\r\n\t\t\t} catch (InterruptedException | ExecutionException e) {\r\n\t\t\t\tlog.error(&quot;An error occurred when transferring the file: &quot;, e);\r\n\t\t\t\tThread.currentThread().interrupt();\r\n\t\t\t} catch (CancellationException e) {\r\n                log.debug(&quot;The CompletableFuture has been cancelled. Probable cause: the listener has disconnected.&quot;);\r\n            }\r\n\t\t});\r\n\r\n\t\tresult.onCompletion(() -&gt; futureDto.cancel(true));\r\n\r\n\t\treturn result;\r\n\t}\r\n\r\nThis solution allows me to have multiple parallel consumers that perform long-polling, and it allows to cleanup the consumer (to avoid data loss) when the client has died. It also persists messages on the disk to avoid data loss if my application goes down.","title":"How to handle consumer thread interruption in a synchronous queue?","body":"<p>No idea if there are better solutions (would love to know), but I'm sharing mine:</p>\n<h2>Service</h2>\n<pre><code>private record ContentAndFile(LongPollingDto dto, File file) {\n}\n\nprivate Queue&lt;CompletableFuture&lt;LongPollingDto&gt;&gt; consumers = new ConcurrentLinkedQueue&lt;&gt;();\nprivate Queue&lt;ContentAndFile&gt; messages = new ConcurrentLinkedQueue&lt;&gt;();\n\npublic CompletableFuture&lt;LongPollingDto&gt; getFutureDto() throws IOException {\n    CompletableFuture&lt;LongPollingDto&gt; future = new CompletableFuture&lt;&gt;();\n    consumers.add(future);\n    match();\n\n    return future;\n}\n\npublic void enqueue(LongPollingDto content) throws IOException {\n    String uniqueFileName = UUID.randomUUID().toString() + &quot;.json&quot;;\n    File file = new File(syncTmpDataDirectory, uniqueFileName);\n    writer.writeValue(file, content);\n    doEnqueue(content, file);\n    match();\n}\n\n@EventListener(ApplicationReadyEvent.class)\nprotected void synchronizeTemporaryFiles() throws IOException {\n    File tmpDir = new File(syncTmpDataDirectory);\n\n    List&lt;File&gt; files = Arrays.asList(tmpDir.listFiles());\n    files.sort(Comparator.comparing(File::lastModified));\n\n    files.forEach(x -&gt; {\n        try {\n            LongPollingDto dto = mapper.readValue(x, LongPollingDto.class);\n            doEnqueue(dto, x);\n        } catch (IOException e) {\n            log.error(&quot;Error when syncing file: {}&quot;, x.getAbsolutePath(), e);\n        }\n    });\n\n    match();\n}\n\nprivate void match() throws IOException {\n    if (!consumers.isEmpty() &amp;&amp; !messages.isEmpty()) {\n        CompletableFuture&lt;LongPollingDto&gt; future = consumers.poll();\n        if (!future.isCancelled()) {\n            ContentAndFile contentAndFile = messages.poll();\n            future.complete(contentAndFile.dto);\n            Files.delete(contentAndFile.file.toPath());\n        }\n\n        match();\n    }\n}\n\nprivate void doEnqueue(LongPollingDto dto, File file) {\n    messages.add(new ContentAndFile(dto, file));\n}\n</code></pre>\n<h2>Controller</h2>\n<pre><code>@GetMapping(&quot;long-polling&quot;)\npublic DeferredResult&lt;LongPollingDto&gt; longPolling() throws IOException {\n\n    DeferredResult&lt;LongPollingDto&gt; result = new DeferredResult&lt;&gt;();\n\n    CompletableFuture&lt;LongPollingDto&gt; futureDto = longPollingService.getFutureDto();\n\n    executor.execute(() -&gt; {\n        try {\n            result.setResult(futureDto.get());\n        } catch (InterruptedException | ExecutionException e) {\n            log.error(&quot;An error occurred when transferring the file: &quot;, e);\n            Thread.currentThread().interrupt();\n        } catch (CancellationException e) {\n            log.debug(&quot;The CompletableFuture has been cancelled. Probable cause: the listener has disconnected.&quot;);\n        }\n    });\n\n    result.onCompletion(() -&gt; futureDto.cancel(true));\n\n    return result;\n}\n</code></pre>\n<p>This solution allows me to have multiple parallel consumers that perform long-polling, and it allows to cleanup the consumer (to avoid data loss) when the client has died. It also persists messages on the disk to avoid data loss if my application goes down.</p>\n"}],"owner":{"account_id":4609695,"reputation":30864,"user_id":3738171,"display_name":"Guerric P"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":199,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689102183,"creation_date":1684315315,"question_id":76270500,"body_markdown":"I have a use case where I synchronize data with another service which performs long polling via HTTP.\r\n\r\nFor that purpose, I use a `SynchronousQueue` which works perfectly except that when I receive a poll from the consuming service, I call `take` on the queue, but the remote service may die, causing the thread associated to the HTTP request to stay alive without eventually returning any HTTP response. Still, the `take` method would eventually return in that thread and consume the data which would then be lost.\r\n\r\nHow do I handle this problem?","title":"How to handle consumer thread interruption in a synchronous queue?","body":"<p>I have a use case where I synchronize data with another service which performs long polling via HTTP.</p>\n<p>For that purpose, I use a <code>SynchronousQueue</code> which works perfectly except that when I receive a poll from the consuming service, I call <code>take</code> on the queue, but the remote service may die, causing the thread associated to the HTTP request to stay alive without eventually returning any HTTP response. Still, the <code>take</code> method would eventually return in that thread and consume the data which would then be lost.</p>\n<p>How do I handle this problem?</p>\n"},{"tags":["java","multithreading"],"comments":[{"owner":{"account_id":4608033,"reputation":9671,"user_id":3736955,"accept_rate":71,"display_name":"Jemshit"},"score":0,"creation_date":1689099661,"post_id":76664606,"comment_id":135164393,"body_markdown":"`ArrayBlockingQueue` is thread safe according to doc, so it should be fine.","body":"<code>ArrayBlockingQueue</code> is thread safe according to doc, so it should be fine."}],"answers":[{"comments":[{"owner":{"account_id":6022681,"reputation":3444,"user_id":4729332,"accept_rate":68,"display_name":"Andrei"},"score":0,"creation_date":1689101010,"post_id":76664877,"comment_id":135164653,"body_markdown":"In this context it seems very similar to `while(!nextIdQueue.isEmpty()) {...}`. Why should I avoid doing this over what you suggested? Is `!Thread.currentThread().isInterrupted()` better in some way?","body":"In this context it seems very similar to <code>while(!nextIdQueue.isEmpty()) {...}</code>. Why should I avoid doing this over what you suggested? Is <code>!Thread.currentThread().isInterrupted()</code> better in some way?"},{"owner":{"account_id":11400015,"reputation":1904,"user_id":8357251,"display_name":"gdomo"},"score":0,"creation_date":1689101203,"post_id":76664877,"comment_id":135164688,"body_markdown":"Are you going to execute this somewhere outside `PublicStashTabsProducer` task? With just `while(!nextIdQueue.isEmpty())` your queue consumption wouldn&#39;t be infinite since it won&#39;t wait for new id&#39;s to come","body":"Are you going to execute this somewhere outside <code>PublicStashTabsProducer</code> task? With just <code>while(!nextIdQueue.isEmpty())</code> your queue consumption wouldn&#39;t be infinite since it won&#39;t wait for new id&#39;s to come"},{"owner":{"account_id":6022681,"reputation":3444,"user_id":4729332,"accept_rate":68,"display_name":"Andrei"},"score":0,"creation_date":1689101738,"post_id":76664877,"comment_id":135164792,"body_markdown":"Nop, only inside `PublicStashTabsProducer`. No other class will touch that queue.","body":"Nop, only inside <code>PublicStashTabsProducer</code>. No other class will touch that queue."},{"owner":{"account_id":11400015,"reputation":1904,"user_id":8357251,"display_name":"gdomo"},"score":0,"creation_date":1689102282,"post_id":76664877,"comment_id":135164906,"body_markdown":"Then how would you call any of these read loops? If you schedule `PublicStashTabsProducer` to the executor, then its `run` which does put-s would be performed","body":"Then how would you call any of these read loops? If you schedule <code>PublicStashTabsProducer</code> to the executor, then its <code>run</code> which does put-s would be performed"},{"owner":{"account_id":6022681,"reputation":3444,"user_id":4729332,"accept_rate":68,"display_name":"Andrei"},"score":0,"creation_date":1689102438,"post_id":76664877,"comment_id":135164925,"body_markdown":"I just realized I didn&#39;t post the whole code...sorry about that. So what the `run()` method will do is: read from queue -&gt; do request -&gt; get next_id from queue -&gt; put next_id in queue. So a while would make sense here. Not to mention I&#39;d just keep the same thread running without wasting resources.","body":"I just realized I didn&#39;t post the whole code...sorry about that. So what the <code>run()</code> method will do is: read from queue -&gt; do request -&gt; get next_id from queue -&gt; put next_id in queue. So a while would make sense here. Not to mention I&#39;d just keep the same thread running without wasting resources."}],"tags":[],"owner":{"account_id":11400015,"reputation":1904,"user_id":8357251,"display_name":"gdomo"},"comment_count":5,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1689100567,"creation_date":1689100567,"answer_id":76664877,"question_id":76664606,"body_markdown":"Yes, it&#39;s definitely safe, `ArrayBlockingQueue` is thread-safe.\r\n\r\nTypical approach for infinite queue reading is\r\n\r\n    while(!Thread.currentThread().isInterrupted()) {\r\n        nextIdQueue.take()\r\n    }\r\n\r\n\r\nMethod `take()` blocks until an element becomes available and returns it immediately upon appearance. ","title":"Potential visibility issue between threads","body":"<p>Yes, it's definitely safe, <code>ArrayBlockingQueue</code> is thread-safe.</p>\n<p>Typical approach for infinite queue reading is</p>\n<pre><code>while(!Thread.currentThread().isInterrupted()) {\n    nextIdQueue.take()\n}\n</code></pre>\n<p>Method <code>take()</code> blocks until an element becomes available and returns it immediately upon appearance.</p>\n"}],"owner":{"account_id":6022681,"reputation":3444,"user_id":4729332,"accept_rate":68,"display_name":"Andrei"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76664877,"answer_count":1,"score":0,"last_activity_date":1689100567,"creation_date":1689098037,"question_id":76664606,"body_markdown":"I&#39;m relatively new to Java so you&#39;ll have to excuse my ignorance.\r\n\r\nI&#39;m running a ScheduledExecutorService with 2 threads. One is for consuming something and one is for producing some items. I&#39;m mainly interested in the producer at this particular moment.\r\n\r\nI have another class that&#39;s used as an orchestrator to manage the producer and consumer.\r\n\r\n    public final class PublicStashTabsOrchestrator {\r\n        // properties, constructor, etc...\r\n    \r\n        PublicStashTabsProducer publicStashTabsProducer = new PublicStashTabsProducer ();\r\n        executorService.scheduleWithFixedDelay(publicStashTabsProducer , 1000, 2000, TimeUnit.MILLISECONDS);\r\n    }\r\n\r\nIn the Producer I&#39;m calling a paginated API. The next page is in a key called &quot;next_request_id&quot;, so each request will be used to call the next request and so on.\r\n\r\nI&#39;m doing some work with the response but most importantly I&#39;m setting the &quot;next_request_id&quot; in a BlockingQueue(which is really not necessary but for the purposes of this question I used this).\r\n\r\n    public class PublicStashTabsProducer implements Runnable {\r\n        private final BlockingQueue&lt;String&gt; nextIdQueue = new ArrayBlockingQueue&lt;&gt;(10);\r\n    \r\n        @Override\r\n        public void run() {\r\n            // call api get next_request_id\r\n            nextIdQueue.put(nextIdFromRequest);\r\n        }\r\n    }\r\n\r\n\r\nLets assume that the 2 threads are called Thread1 and Thread2 for simplicity sake.\r\n\r\n**Is what I&#39;m doing prone to visibility issue between threads?** \r\n\r\nHere&#39;s what scenario I tested(and it worked fine, but I&#39;m not convinced).\r\n\r\nExecutor service starts schedule -&gt; Thread1 is chosen -&gt; calls API -&gt; puts &quot;next_request_id&quot; in nextIdQueue -&gt; exit runnable\r\n\r\n\r\nExecutor service starts schedule -&gt; Thread2 is chosen -&gt; can thread 2 see an empty nextIdQueue even though Thread1 added a value in?\r\n\r\n\r\nAlso bonus question, what I&#39;m doing seems wasteful. each `scheduleWithFixedDelay` call will just consume resources. Would it be unwise to do a `while(!nextIdQueue.isEmpty()) {...}` since this will work indefinitely...?","title":"Potential visibility issue between threads","body":"<p>I'm relatively new to Java so you'll have to excuse my ignorance.</p>\n<p>I'm running a ScheduledExecutorService with 2 threads. One is for consuming something and one is for producing some items. I'm mainly interested in the producer at this particular moment.</p>\n<p>I have another class that's used as an orchestrator to manage the producer and consumer.</p>\n<pre><code>public final class PublicStashTabsOrchestrator {\n    // properties, constructor, etc...\n\n    PublicStashTabsProducer publicStashTabsProducer = new PublicStashTabsProducer ();\n    executorService.scheduleWithFixedDelay(publicStashTabsProducer , 1000, 2000, TimeUnit.MILLISECONDS);\n}\n</code></pre>\n<p>In the Producer I'm calling a paginated API. The next page is in a key called &quot;next_request_id&quot;, so each request will be used to call the next request and so on.</p>\n<p>I'm doing some work with the response but most importantly I'm setting the &quot;next_request_id&quot; in a BlockingQueue(which is really not necessary but for the purposes of this question I used this).</p>\n<pre><code>public class PublicStashTabsProducer implements Runnable {\n    private final BlockingQueue&lt;String&gt; nextIdQueue = new ArrayBlockingQueue&lt;&gt;(10);\n\n    @Override\n    public void run() {\n        // call api get next_request_id\n        nextIdQueue.put(nextIdFromRequest);\n    }\n}\n</code></pre>\n<p>Lets assume that the 2 threads are called Thread1 and Thread2 for simplicity sake.</p>\n<p><strong>Is what I'm doing prone to visibility issue between threads?</strong></p>\n<p>Here's what scenario I tested(and it worked fine, but I'm not convinced).</p>\n<p>Executor service starts schedule -&gt; Thread1 is chosen -&gt; calls API -&gt; puts &quot;next_request_id&quot; in nextIdQueue -&gt; exit runnable</p>\n<p>Executor service starts schedule -&gt; Thread2 is chosen -&gt; can thread 2 see an empty nextIdQueue even though Thread1 added a value in?</p>\n<p>Also bonus question, what I'm doing seems wasteful. each <code>scheduleWithFixedDelay</code> call will just consume resources. Would it be unwise to do a <code>while(!nextIdQueue.isEmpty()) {...}</code> since this will work indefinitely...?</p>\n"},{"tags":["java","spring-webflux","race-condition","reactive"],"comments":[{"owner":{"account_id":11400015,"reputation":1904,"user_id":8357251,"display_name":"gdomo"},"score":0,"creation_date":1689100840,"post_id":76664872,"comment_id":135164610,"body_markdown":"What if put `doFinally` `inside flatMap`, like `return result.doFinally()`?","body":"What if put <code>doFinally</code> <code>inside flatMap</code>, like <code>return result.doFinally()</code>?"},{"owner":{"account_id":9797098,"reputation":582,"user_id":7259705,"display_name":"Jonathan Hagen"},"score":0,"creation_date":1689176952,"post_id":76664872,"comment_id":135177417,"body_markdown":"Is there any difference in this example?","body":"Is there any difference in this example?"},{"owner":{"account_id":11400015,"reputation":1904,"user_id":8357251,"display_name":"gdomo"},"score":1,"creation_date":1689177135,"post_id":76664872,"comment_id":135177457,"body_markdown":"Then you would have `resource.getTenantId()` available in a lambda passed to `doFinally` and no AtomicReference would be needed.","body":"Then you would have <code>resource.getTenantId()</code> available in a lambda passed to <code>doFinally</code> and no AtomicReference would be needed."}],"owner":{"account_id":9797098,"reputation":582,"user_id":7259705,"display_name":"Jonathan Hagen"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":89,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689100550,"creation_date":1689100550,"question_id":76664872,"body_markdown":"I want to set a `tenantId` value in the webflux, then use it in the logging something like this:\r\n```\r\n    @Override\r\n    public Mono&lt;String&gt; getData(String id) {\r\n        AtomicReference&lt;String&gt; tenantId = new AtomicReference&lt;&gt;();\r\n        Mono&lt;Resource&gt; getResourceMono = resourceMapperService.getResource(id));\r\n        return getResourceMono.flatMap(resource -&gt; {\r\n            tenantId.set(resource.getTenantId());\r\n            Mono&lt;String&gt; result = uriConfigurationMono.flatMap(uriConfiguration -&gt; getSearchData(resource.getServerId(),\r\n                    uriConfiguration.getDataProxyUri(), id));\r\n            return result;\r\n        }).doFinally(response -&gt; telemetryService.addLogging(tenantId, id);\r\n    }\r\n```\r\nIn here, I set `tenantId` as `AtomicReference&lt;String&gt;` then use it in `.doFinally`, hoping that `.doFinally` always happens after `tenantId.set(resource.getTenantId())`. Is it creating race condition?\r\n\r\nIf so, what is the best way to handle this?","title":"Using AtomicReference for spring webflux without blocking","body":"<p>I want to set a <code>tenantId</code> value in the webflux, then use it in the logging something like this:</p>\n<pre><code>    @Override\n    public Mono&lt;String&gt; getData(String id) {\n        AtomicReference&lt;String&gt; tenantId = new AtomicReference&lt;&gt;();\n        Mono&lt;Resource&gt; getResourceMono = resourceMapperService.getResource(id));\n        return getResourceMono.flatMap(resource -&gt; {\n            tenantId.set(resource.getTenantId());\n            Mono&lt;String&gt; result = uriConfigurationMono.flatMap(uriConfiguration -&gt; getSearchData(resource.getServerId(),\n                    uriConfiguration.getDataProxyUri(), id));\n            return result;\n        }).doFinally(response -&gt; telemetryService.addLogging(tenantId, id);\n    }\n</code></pre>\n<p>In here, I set <code>tenantId</code> as <code>AtomicReference&lt;String&gt;</code> then use it in <code>.doFinally</code>, hoping that <code>.doFinally</code> always happens after <code>tenantId.set(resource.getTenantId())</code>. Is it creating race condition?</p>\n<p>If so, what is the best way to handle this?</p>\n"},{"tags":["java","joptionpane"],"comments":[{"owner":{"account_id":6017640,"reputation":8919,"user_id":4725875,"display_name":"DevilsHnd - 退した"},"score":1,"creation_date":1689099053,"post_id":76664456,"comment_id":135164271,"body_markdown":"The `JOptionPane.showConfirmDialog()` does **not** contain 8 parameters. Use the `JOptionPane.showOptionDialog()` instead.","body":"The <code>JOptionPane.showConfirmDialog()</code> does <b>not</b> contain 8 parameters. Use the <code>JOptionPane.showOptionDialog()</code> instead."},{"owner":{"account_id":6017640,"reputation":8919,"user_id":4725875,"display_name":"DevilsHnd - 退した"},"score":0,"creation_date":1689100171,"post_id":76664456,"comment_id":135164485,"body_markdown":"On a side: There is already a Constant for Yes/No buttons (`JOptionPane.YES_NO_OPTION`). Be a little more inventive like: `Object[] options = {&quot;Let&#39;s Do It&quot;, &quot;Heck No&quot;};`. Also, for the last parameter, the **initialValue** parameter, it should be `options[1].toString()` because it is of an **Object** type array. If it was a **String** type array, you wouldn&#39;t need the `.toString()`.","body":"On a side: There is already a Constant for Yes/No buttons (<code>JOptionPane.YES_NO_OPTION</code>). Be a little more inventive like: <code>Object[] options = {&quot;Let&#39;s Do It&quot;, &quot;Heck No&quot;};</code>. Also, for the last parameter, the <b>initialValue</b> parameter, it should be <code>options[1].toString()</code> because it is of an <b>Object</b> type array. If it was a <b>String</b> type array, you wouldn&#39;t need the <code>.toString()</code>."}],"answers":[{"tags":[],"owner":{"account_id":27375673,"reputation":87,"user_id":20881060,"display_name":"Berc07"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689100544,"creation_date":1689100275,"answer_id":76664842,"question_id":76664456,"body_markdown":"It&#39;s because you use `showConfirmDialog`, instead of using `showOptionDialog`.\r\n\r\nHere is the code that is using the `showOptionDialog`:\r\n```java\r\n\r\nimport javax.swing.*;\r\n\r\npublic class Main {\r\n\t\r\n\tpublic static void main(String[] args) {\r\n\t\tObject[] options = {&quot;Yes&quot;, &quot;No&quot;};\r\n\t\tint tester = JOptionPane.showOptionDialog(null, &quot;Do you smoke?&quot;, &quot;&quot;,\r\n\t\t\t\tJOptionPane.DEFAULT_OPTION, JOptionPane.WARNING_MESSAGE,\r\n\t\t\t\tnull, options, options[0]);\r\n\t\t// The variable &#39;tester&#39; contains the index of the selected button\r\n\t\tJOptionPane.showMessageDialog(null, &quot;Tester = &quot; + tester);\r\n\t\t// If you want to view directly the selected option (Yes or No):\r\n\t\tJOptionPane.showMessageDialog(null, &quot;Selected: &quot; + options[tester]);\r\n\t}\r\n\t\r\n}\r\n\r\n```\r\n\r\nIf you only want to use Yes or No options, Java swing has a built-in dialog for that (it uses `showConfirmDialog`):\r\n```java\r\nimport javax.swing.*;\r\n\r\npublic class Main {\r\n\t\r\n\tpublic static void main(String[] args) {\r\n\t\tint tester = JOptionPane.showConfirmDialog(null, &quot;Do you smoke?&quot;, &quot;&quot;,\r\n\t\t\t\tJOptionPane.YES_NO_OPTION, JOptionPane.WARNING_MESSAGE);\r\n\t\t// Yes = 0; No = 1; (clicking the close icon) = -1\r\n\t\tJOptionPane.showMessageDialog(null, &quot;Tester = &quot; + tester);\r\n\t}\r\n\t\r\n}\r\n\r\n```\r\n\r\nI hope it helped.\r\n","title":"JOptionPane won&#39;t Work: Aim use the Default option (customize the answer buttons)","body":"<p>It's because you use <code>showConfirmDialog</code>, instead of using <code>showOptionDialog</code>.</p>\n<p>Here is the code that is using the <code>showOptionDialog</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>\nimport javax.swing.*;\n\npublic class Main {\n    \n    public static void main(String[] args) {\n        Object[] options = {&quot;Yes&quot;, &quot;No&quot;};\n        int tester = JOptionPane.showOptionDialog(null, &quot;Do you smoke?&quot;, &quot;&quot;,\n                JOptionPane.DEFAULT_OPTION, JOptionPane.WARNING_MESSAGE,\n                null, options, options[0]);\n        // The variable 'tester' contains the index of the selected button\n        JOptionPane.showMessageDialog(null, &quot;Tester = &quot; + tester);\n        // If you want to view directly the selected option (Yes or No):\n        JOptionPane.showMessageDialog(null, &quot;Selected: &quot; + options[tester]);\n    }\n    \n}\n\n</code></pre>\n<p>If you only want to use Yes or No options, Java swing has a built-in dialog for that (it uses <code>showConfirmDialog</code>):</p>\n<pre class=\"lang-java prettyprint-override\"><code>import javax.swing.*;\n\npublic class Main {\n    \n    public static void main(String[] args) {\n        int tester = JOptionPane.showConfirmDialog(null, &quot;Do you smoke?&quot;, &quot;&quot;,\n                JOptionPane.YES_NO_OPTION, JOptionPane.WARNING_MESSAGE);\n        // Yes = 0; No = 1; (clicking the close icon) = -1\n        JOptionPane.showMessageDialog(null, &quot;Tester = &quot; + tester);\n    }\n    \n}\n\n</code></pre>\n<p>I hope it helped.</p>\n"}],"owner":{"account_id":28964201,"reputation":13,"user_id":22186055,"display_name":"phetanomen0n"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76664842,"answer_count":1,"score":1,"last_activity_date":1689100544,"creation_date":1689096591,"question_id":76664456,"body_markdown":"This is the  Text, it won&#39;t work I allready checked it with the You AI \r\n\r\n\r\n    \r\n    import javax.swing.JOptionPane; \r\n\r\n    public class Test_showConfirmDialog1 {\r\n    public static void main(String[] args) {\r\n        Object[] options = {&quot;Yes&quot;, &quot;No&quot;};\r\n            int Tester = JOptionPane.showConfirmDialog(null, &quot;Do you smoke?&quot;, &quot;&quot;,                    \r\n    JOptionPane.DEFAULT_OPTION,JOptionPane.WARNING_MESSAGE, null, options, options[0]);\r\n        JOptionPane.showMessageDialog(null, &quot;Tester = &quot; + Tester);\r\n        }\r\n\r\nEclipse says: show.ConfirmDialog doesn&#39;t work. why? (I am a Beginner, I don&#39;t know most of Java but the code simply corrected woould be allready helpfull, I am sure I will figure out the rest by myself.) ","title":"JOptionPane won&#39;t Work: Aim use the Default option (customize the answer buttons)","body":"<p>This is the  Text, it won't work I allready checked it with the You AI</p>\n<pre><code>import javax.swing.JOptionPane; \n\npublic class Test_showConfirmDialog1 {\npublic static void main(String[] args) {\n    Object[] options = {&quot;Yes&quot;, &quot;No&quot;};\n        int Tester = JOptionPane.showConfirmDialog(null, &quot;Do you smoke?&quot;, &quot;&quot;,                    \nJOptionPane.DEFAULT_OPTION,JOptionPane.WARNING_MESSAGE, null, options, options[0]);\n    JOptionPane.showMessageDialog(null, &quot;Tester = &quot; + Tester);\n    }\n</code></pre>\n<p>Eclipse says: show.ConfirmDialog doesn't work. why? (I am a Beginner, I don't know most of Java but the code simply corrected woould be allready helpfull, I am sure I will figure out the rest by myself.)</p>\n"},{"tags":["java","spring-boot","swagger"],"owner":{"account_id":46213,"reputation":2690,"user_id":136449,"accept_rate":84,"display_name":"Steve"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":89,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689099707,"creation_date":1689099707,"question_id":76664781,"body_markdown":"I&#39;m trying to add a Springdoc/Swagger interface to my existing REST services in SpringBoot. The objects that I have to deal with (which I can&#39;t change) contain circular references. In order to deal with the circular references, we&#39;re using JsonIO to serialize/deserialize the objects. As an example, I have a class called Part that looks like the following:\r\n\r\n    public class Part\r\n    {\r\n      // Other fields etc removed for brevity\r\n    \r\n      private Part parent;\r\n    \r\n      // methods removed for brevity\r\n    }\r\n\r\nThe parent field is a circular reference back to the same object type. When Springdoc creates an example for one of my REST method parameters, it generates the following:\r\n\r\n    {\r\n      &quot;parent&quot; : &quot;string&quot;\r\n    }\r\n\r\nwhich defines the parent field in my class as a String rather than an actual reference to my Part class. What I&#39;d ideally like to do is to have the &quot;parent&quot; value forced to be a null object (or an empty object would probably work as well.) Unfortunately I have been unable to figure out how I&#39;d go about this, especially without access to the Part class source (so I can&#39;t add annotations, etc).\r\n\r\nIs this possible, and if so how can I make this work?\r\n","title":"How can I replace the example value for a field in spring doc?","body":"<p>I'm trying to add a Springdoc/Swagger interface to my existing REST services in SpringBoot. The objects that I have to deal with (which I can't change) contain circular references. In order to deal with the circular references, we're using JsonIO to serialize/deserialize the objects. As an example, I have a class called Part that looks like the following:</p>\n<pre><code>public class Part\n{\n  // Other fields etc removed for brevity\n\n  private Part parent;\n\n  // methods removed for brevity\n}\n</code></pre>\n<p>The parent field is a circular reference back to the same object type. When Springdoc creates an example for one of my REST method parameters, it generates the following:</p>\n<pre><code>{\n  &quot;parent&quot; : &quot;string&quot;\n}\n</code></pre>\n<p>which defines the parent field in my class as a String rather than an actual reference to my Part class. What I'd ideally like to do is to have the &quot;parent&quot; value forced to be a null object (or an empty object would probably work as well.) Unfortunately I have been unable to figure out how I'd go about this, especially without access to the Part class source (so I can't add annotations, etc).</p>\n<p>Is this possible, and if so how can I make this work?</p>\n"},{"tags":["java","spring-boot","spring-security","resttemplate","spring-resttemplate"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1689101058,"post_id":76664775,"comment_id":135164660,"body_markdown":"This is a really bad way to add an interceptor. Each call will add a new interceptor... You should configure it once in your configuration, not add it each time. Nonetheless the error seems that you either cannot connect or cannot read the data. So no access or your server is slow in generating a response. However I do suspect some firewall/proxy issue.","body":"This is a really bad way to add an interceptor. Each call will add a new interceptor... You should configure it once in your configuration, not add it each time. Nonetheless the error seems that you either cannot connect or cannot read the data. So no access or your server is slow in generating a response. However I do suspect some firewall/proxy issue."}],"owner":{"account_id":16584480,"reputation":121,"user_id":11984272,"display_name":"Rahul"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":147,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689099636,"creation_date":1689099636,"question_id":76664775,"body_markdown":"I am trying to access external API from spring boot application in my local machine using external API&#39;s username and password but every times its giving error &#39;**org.springframework.web.client.ResourceAccessException: I/O error on POST request for https url &quot;abc.com/api/records&quot;: Connection timed out: connect; nested exception is java.net.ConnectException: Connection timed out: connect**&#39;.\r\n\r\nbelow is code\r\n\r\n    public response getDetails(Request requestBody) {\r\n    \t\tlog.info(&quot;getDetails execution started&quot;);\r\n    \t\tResponse responseEntity = null;\r\n    \t\ttry {\r\n    \t\t\trestTemplate.getInterceptors().add(new BasicAuthorizationInterceptor(apiUsr, psswd));\r\n    \t\t\tresponseEntity = restTemplate.postForObject(baseUrl + RECORD_API, requestBody, Response.class);\r\n    \t\t\tlog.info(&quot;Response:&quot; + responseEntity.toString());\r\n    \t\t} catch (Exception exception) {\r\n    \t\t\tlog.error(exception.toString());\r\n    \t\t}\r\n    \t\treturn responseEntity;\r\n    \t}\r\n\r\nWhat could be the reason ?","title":"How to resolve connection time out error in spring boot application?","body":"<p>I am trying to access external API from spring boot application in my local machine using external API's username and password but every times its giving error '<strong>org.springframework.web.client.ResourceAccessException: I/O error on POST request for https url &quot;abc.com/api/records&quot;: Connection timed out: connect; nested exception is java.net.ConnectException: Connection timed out: connect</strong>'.</p>\n<p>below is code</p>\n<pre><code>public response getDetails(Request requestBody) {\n        log.info(&quot;getDetails execution started&quot;);\n        Response responseEntity = null;\n        try {\n            restTemplate.getInterceptors().add(new BasicAuthorizationInterceptor(apiUsr, psswd));\n            responseEntity = restTemplate.postForObject(baseUrl + RECORD_API, requestBody, Response.class);\n            log.info(&quot;Response:&quot; + responseEntity.toString());\n        } catch (Exception exception) {\n            log.error(exception.toString());\n        }\n        return responseEntity;\n    }\n</code></pre>\n<p>What could be the reason ?</p>\n"},{"tags":["java","protocol-buffers","grpc"],"comments":[{"owner":{"account_id":4248237,"reputation":113,"user_id":3476209,"display_name":"Dogacel"},"score":0,"creation_date":1687985718,"post_id":76576516,"comment_id":135015014,"body_markdown":"Can you share your client code? This error usually happens when your client protos are incompatible with the response (i.e. you updated protos but did not update the compiled code)","body":"Can you share your client code? This error usually happens when your client protos are incompatible with the response (i.e. you updated protos but did not update the compiled code)"},{"owner":{"account_id":12962624,"reputation":1,"user_id":9371373,"display_name":"Hennadii Bulakh"},"score":0,"creation_date":1688020305,"post_id":76576516,"comment_id":135018078,"body_markdown":"Hello Dogacel, I have rechecked this a few times - the generated stub is from actual proto file and on client I can see the correct response class.\n\nUpdated description with client code ...","body":"Hello Dogacel, I have rechecked this a few times - the generated stub is from actual proto file and on client I can see the correct response class.  Updated description with client code ..."},{"owner":{"account_id":5967476,"reputation":24635,"user_id":4690866,"display_name":"Eric Anderson"},"score":0,"creation_date":1688744297,"post_id":76576516,"comment_id":135119419,"body_markdown":"There should be more information in the &quot;CANCELED: Failed to read message&quot; error. If it was generated on the client (likely), then it will have a &quot;caused by&quot; exception with more details.","body":"There should be more information in the &quot;CANCELED: Failed to read message&quot; error. If it was generated on the client (likely), then it will have a &quot;caused by&quot; exception with more details."},{"owner":{"account_id":12962624,"reputation":1,"user_id":9371373,"display_name":"Hennadii Bulakh"},"score":0,"creation_date":1688843576,"post_id":76576516,"comment_id":135129561,"body_markdown":"@EricAnderson The detailed information was: Can not initialize InnerClassEntity... ... but the class was there. I assume the problem in mismatch of versions proto on server and client could be the reason.","body":"@EricAnderson The detailed information was: Can not initialize InnerClassEntity... ... but the class was there. I assume the problem in mismatch of versions proto on server and client could be the reason."},{"owner":{"account_id":5967476,"reputation":24635,"user_id":4690866,"display_name":"Eric Anderson"},"score":0,"creation_date":1689001415,"post_id":76576516,"comment_id":135147785,"body_markdown":"Please include the exception in the question. That error seems unlikely to be due to mismatched versions.","body":"Please include the exception in the question. That error seems unlikely to be due to mismatched versions."},{"owner":{"account_id":12962624,"reputation":1,"user_id":9371373,"display_name":"Hennadii Bulakh"},"score":0,"creation_date":1689099586,"post_id":76576516,"comment_id":135164382,"body_markdown":"@EricAnderson updated the original description with the additional information.\n\nFor sure I have checked the class GuestOuterClass it exist in generated stub which I connected with gradle dependency from our Nexus...","body":"@EricAnderson updated the original description with the additional information.  For sure I have checked the class GuestOuterClass it exist in generated stub which I connected with gradle dependency from our Nexus..."},{"owner":{"account_id":5967476,"reputation":24635,"user_id":4690866,"display_name":"Eric Anderson"},"score":0,"creation_date":1689193475,"post_id":76576516,"comment_id":135180523,"body_markdown":"`NoSuchMethodError` with `FieldDescriptorProto.getProto3Optional`. This seems likely a protobuf-java downgrade. Gradle should do a good job of choosing the protobuf-java version, so maybe you are overriding it? You should make sure not to downgrade the version of protobuf-java specified by `com.google.api.grpc:proto-google-common-protos`. That seems to be the problem.","body":"<code>NoSuchMethodError</code> with <code>FieldDescriptorProto.getProto3Optional</code>. This seems likely a protobuf-java downgrade. Gradle should do a good job of choosing the protobuf-java version, so maybe you are overriding it? You should make sure not to downgrade the version of protobuf-java specified by <code>com.google.api.grpc:proto-google-common-protos</code>. That seems to be the problem."}],"owner":{"account_id":12962624,"reputation":1,"user_id":9371373,"display_name":"Hennadii Bulakh"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":159,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689099545,"creation_date":1687984112,"question_id":76576516,"body_markdown":"I am building the server-based application based on protobuf with gRPC interface.\r\nServer part - golang\r\nClient part - Java\r\n\r\nThe proto file has an object (map as type):\r\n\r\n```\r\nmessage SomeResponse {\r\n  map&lt;string, Entity&gt; entity_by_id = 1;\r\n}\r\n\r\nmessage Entity {\r\n  uint32 id = 1;\r\n  string name = 2;\r\n}\r\n```\r\nBased on this file generated the Java gRPC stub to make a request to server. \r\nOnce I do request to server - client thrown the error: \r\n`CANCELLED: Failed to read message.`\r\n\r\nClient code:\r\n\r\n```\r\nEntityRequest request = EntityRequest.newBuilder().addExtIds(&quot;abc&quot;).build();\r\n        EntityResponse response;\r\n        EntityServiceGrpc.EntityServiceBlockingStub client = EntityServiceGrpc.newBlockingStub(\r\n                ManagedChannelFactory.get(\r\n                        InfrastructureProperties.GRPC_HOST,\r\n                        InfrastructureProperties.GRPC_PORT\r\n                )\r\n        );\r\n        try {\r\n            response = client.getEntityByExtIds(request);\r\n        }\r\n        catch (StatusRuntimeException e) {\r\n            // failing here with CANCELLED: Failed to read message.\r\n}\r\n```\r\nThe server part works 100% - I confirmed it with goLang gRPC client and another...\r\n\r\nThe request from the client (java stub) reaches out to the server, and the server return response, Java stub is not able to parse it...\r\nIf I change the object type  - works fine. Problem with map.\r\n\r\nCan you give me the direction where the problem could be?\r\n\r\nGolang protoc version: v4.22.2\r\nJava protoc version to generate stub: 3.23.3\r\nJava client io.grpc version: 1.56.0\r\n\r\nI confirmed the specific problem with parsing map value in response by Java stub\r\n\r\nThe stack trace (I have try to remove useless lines):\r\n\r\n    Status{code=CANCELLED, description=Failed to read message., cause=java.lang.NoClassDefFoundError: Could not initialize class com.sixt.service.bbb_bbb_extension.api.GuestOuterClass\r\n    \tat com.sixt.service.bbb_extension.api.GuestByExtIdsResponse$GuestByExtIdDefaultEntryHolder.&lt;clinit&gt;(GuestByExtIdsResponse.java:56)\r\n    \tat com.sixt.service.bbb_extension.api.GuestByExtIdsResponse$Builder.mergeFrom(GuestByExtIdsResponse.java:471)\r\n    \tat com.sixt.service.bbb_extension.api.GuestByExtIdsResponse$1.parsePartialFrom(GuestByExtIdsResponse.java:656)\r\n    \tat com.sixt.service.bbb_extension.api.GuestByExtIdsResponse$1.parsePartialFrom(GuestByExtIdsResponse.java:648)\r\n    \tat com.google.protobuf.AbstractParser.parseFrom(AbstractParser.java:86)\r\n    \tat com.google.protobuf.AbstractParser.parseFrom(AbstractParser.java:48)\r\n    \tat io.grpc.protobuf.lite.ProtoLiteUtils$MessageMarshaller.parseFrom(ProtoLiteUtils.java:242)\r\n    \tat io.grpc.protobuf.lite.ProtoLiteUtils$MessageMarshaller.parse(ProtoLiteUtils.java:234)\r\n    \tat io.grpc.protobuf.lite.ProtoLiteUtils$MessageMarshaller.parse(ProtoLiteUtils.java:131)\r\n    \tat io.grpc.MethodDescriptor.parseResponse(MethodDescriptor.java:284)\r\n    \tat io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1MessagesAvailable.runInternal(ClientCallImpl.java:660)\r\n    \tat io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1MessagesAvailable.runInContext(ClientCallImpl.java:647)\r\n    \tat io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)\r\n    \tat io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)\r\n    \tat io.grpc.stub.ClientCalls$ThreadlessExecutor.runQuietly(ClientCalls.java:777)\r\n    \tat io.grpc.stub.ClientCalls$ThreadlessExecutor.waitAndDrain(ClientCalls.java:760)\r\n    \tat io.grpc.stub.ClientCalls.blockingUnaryCall(ClientCalls.java:161)\r\n    \tat com.sixt.service.ride_user_extension.api.GuestServiceGrpc$GuestServiceBlockingStub.getGuestByExtIds(GuestServiceGrpc.java:397)\r\n    Caused by: java.lang.ExceptionInInitializerError: Exception java.lang.NoSuchMethodError: &#39;boolean com.google.protobuf.DescriptorProtos$FieldDescriptorProto.getProto3Optional()&#39; [in thread &quot;Test worker&quot;]\r\n    \tat com.google.protobuf.Descriptors$FieldDescriptor.&lt;init&gt;(Descriptors.java:1519)\r\n    \tat com.google.protobuf.Descriptors$FieldDescriptor.&lt;init&gt;(Descriptors.java:1066)\r\n    \tat com.google.protobuf.Descriptors$Descriptor.&lt;init&gt;(Descriptors.java:944)\r\n    \tat com.google.protobuf.Descriptors$Descriptor.&lt;init&gt;(Descriptors.java:657)\r\n    \tat com.google.protobuf.Descriptors$FileDescriptor.&lt;init&gt;(Descriptors.java:561)\r\n    \tat com.google.protobuf.Descriptors$FileDescriptor.buildFrom(Descriptors.java:333)\r\n    \tat com.google.protobuf.Descriptors$FileDescriptor.internalBuildGeneratedFileFrom(Descriptors.java:440)\r\n    \tat com.google.api.HttpProto.&lt;clinit&gt;(HttpProto.java:57)\r\n    \tat com.google.api.AnnotationsProto.&lt;clinit&gt;(AnnotationsProto.java:54)\r\n    \tat com.sixt.service.ride_user_extension.api.GuestOuterClass.&lt;clinit&gt;(GuestOuterClass.java:183)\r\n    \tat com.sixt.service.ride_user_extension.api.GuestByExtIdsRequest.internalGetFieldAccessorTable(GuestByExtIdsRequest.java:38)\r\n    \tat com.google.protobuf.GeneratedMessageV3.getDescriptorForType(GeneratedMessageV3.java:139)\r\n    \tat com.google.protobuf.TextFormat$Printer.print(TextFormat.java:363)\r\n    \tat com.google.protobuf.TextFormat$Printer.print(TextFormat.java:353)\r\n    \tat com.google.protobuf.TextFormat$Printer.printToString(TextFormat.java:615)\r\n    \tat com.google.protobuf.AbstractMessage.toString(AbstractMessage.java:110)\r\n    \tat net.thucydides.core.steps.StepArgumentWriter.readableFormOf(StepArgumentWriter.java:14)\r\n    \tat net.thucydides.core.steps.StepNamer.testNameWithArguments(StepNamer.java:42)\r\n    \tat net.thucydides.core.steps.StepNamer.nameFor(StepNamer.java:19)\r\n    \tat net.thucydides.core.steps.StepInterceptor.getTestNameFrom(StepInterceptor.java:534)\r\n    \tat net.thucydides.core.steps.StepInterceptor.notifyStepStarted(StepInterceptor.java:568)\r\n    \tat net.thucydides.core.steps.StepInterceptor.runOrSkipMethod(StepInterceptor.java:208)\r\n    \t... 49 more\r\n    }","title":"Proto gRPC Java stub fail while parsing map type","body":"<p>I am building the server-based application based on protobuf with gRPC interface.\nServer part - golang\nClient part - Java</p>\n<p>The proto file has an object (map as type):</p>\n<pre><code>message SomeResponse {\n  map&lt;string, Entity&gt; entity_by_id = 1;\n}\n\nmessage Entity {\n  uint32 id = 1;\n  string name = 2;\n}\n</code></pre>\n<p>Based on this file generated the Java gRPC stub to make a request to server.\nOnce I do request to server - client thrown the error:\n<code>CANCELLED: Failed to read message.</code></p>\n<p>Client code:</p>\n<pre><code>EntityRequest request = EntityRequest.newBuilder().addExtIds(&quot;abc&quot;).build();\n        EntityResponse response;\n        EntityServiceGrpc.EntityServiceBlockingStub client = EntityServiceGrpc.newBlockingStub(\n                ManagedChannelFactory.get(\n                        InfrastructureProperties.GRPC_HOST,\n                        InfrastructureProperties.GRPC_PORT\n                )\n        );\n        try {\n            response = client.getEntityByExtIds(request);\n        }\n        catch (StatusRuntimeException e) {\n            // failing here with CANCELLED: Failed to read message.\n}\n</code></pre>\n<p>The server part works 100% - I confirmed it with goLang gRPC client and another...</p>\n<p>The request from the client (java stub) reaches out to the server, and the server return response, Java stub is not able to parse it...\nIf I change the object type  - works fine. Problem with map.</p>\n<p>Can you give me the direction where the problem could be?</p>\n<p>Golang protoc version: v4.22.2\nJava protoc version to generate stub: 3.23.3\nJava client io.grpc version: 1.56.0</p>\n<p>I confirmed the specific problem with parsing map value in response by Java stub</p>\n<p>The stack trace (I have try to remove useless lines):</p>\n<pre><code>Status{code=CANCELLED, description=Failed to read message., cause=java.lang.NoClassDefFoundError: Could not initialize class com.sixt.service.bbb_bbb_extension.api.GuestOuterClass\n    at com.sixt.service.bbb_extension.api.GuestByExtIdsResponse$GuestByExtIdDefaultEntryHolder.&lt;clinit&gt;(GuestByExtIdsResponse.java:56)\n    at com.sixt.service.bbb_extension.api.GuestByExtIdsResponse$Builder.mergeFrom(GuestByExtIdsResponse.java:471)\n    at com.sixt.service.bbb_extension.api.GuestByExtIdsResponse$1.parsePartialFrom(GuestByExtIdsResponse.java:656)\n    at com.sixt.service.bbb_extension.api.GuestByExtIdsResponse$1.parsePartialFrom(GuestByExtIdsResponse.java:648)\n    at com.google.protobuf.AbstractParser.parseFrom(AbstractParser.java:86)\n    at com.google.protobuf.AbstractParser.parseFrom(AbstractParser.java:48)\n    at io.grpc.protobuf.lite.ProtoLiteUtils$MessageMarshaller.parseFrom(ProtoLiteUtils.java:242)\n    at io.grpc.protobuf.lite.ProtoLiteUtils$MessageMarshaller.parse(ProtoLiteUtils.java:234)\n    at io.grpc.protobuf.lite.ProtoLiteUtils$MessageMarshaller.parse(ProtoLiteUtils.java:131)\n    at io.grpc.MethodDescriptor.parseResponse(MethodDescriptor.java:284)\n    at io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1MessagesAvailable.runInternal(ClientCallImpl.java:660)\n    at io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1MessagesAvailable.runInContext(ClientCallImpl.java:647)\n    at io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)\n    at io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)\n    at io.grpc.stub.ClientCalls$ThreadlessExecutor.runQuietly(ClientCalls.java:777)\n    at io.grpc.stub.ClientCalls$ThreadlessExecutor.waitAndDrain(ClientCalls.java:760)\n    at io.grpc.stub.ClientCalls.blockingUnaryCall(ClientCalls.java:161)\n    at com.sixt.service.ride_user_extension.api.GuestServiceGrpc$GuestServiceBlockingStub.getGuestByExtIds(GuestServiceGrpc.java:397)\nCaused by: java.lang.ExceptionInInitializerError: Exception java.lang.NoSuchMethodError: 'boolean com.google.protobuf.DescriptorProtos$FieldDescriptorProto.getProto3Optional()' [in thread &quot;Test worker&quot;]\n    at com.google.protobuf.Descriptors$FieldDescriptor.&lt;init&gt;(Descriptors.java:1519)\n    at com.google.protobuf.Descriptors$FieldDescriptor.&lt;init&gt;(Descriptors.java:1066)\n    at com.google.protobuf.Descriptors$Descriptor.&lt;init&gt;(Descriptors.java:944)\n    at com.google.protobuf.Descriptors$Descriptor.&lt;init&gt;(Descriptors.java:657)\n    at com.google.protobuf.Descriptors$FileDescriptor.&lt;init&gt;(Descriptors.java:561)\n    at com.google.protobuf.Descriptors$FileDescriptor.buildFrom(Descriptors.java:333)\n    at com.google.protobuf.Descriptors$FileDescriptor.internalBuildGeneratedFileFrom(Descriptors.java:440)\n    at com.google.api.HttpProto.&lt;clinit&gt;(HttpProto.java:57)\n    at com.google.api.AnnotationsProto.&lt;clinit&gt;(AnnotationsProto.java:54)\n    at com.sixt.service.ride_user_extension.api.GuestOuterClass.&lt;clinit&gt;(GuestOuterClass.java:183)\n    at com.sixt.service.ride_user_extension.api.GuestByExtIdsRequest.internalGetFieldAccessorTable(GuestByExtIdsRequest.java:38)\n    at com.google.protobuf.GeneratedMessageV3.getDescriptorForType(GeneratedMessageV3.java:139)\n    at com.google.protobuf.TextFormat$Printer.print(TextFormat.java:363)\n    at com.google.protobuf.TextFormat$Printer.print(TextFormat.java:353)\n    at com.google.protobuf.TextFormat$Printer.printToString(TextFormat.java:615)\n    at com.google.protobuf.AbstractMessage.toString(AbstractMessage.java:110)\n    at net.thucydides.core.steps.StepArgumentWriter.readableFormOf(StepArgumentWriter.java:14)\n    at net.thucydides.core.steps.StepNamer.testNameWithArguments(StepNamer.java:42)\n    at net.thucydides.core.steps.StepNamer.nameFor(StepNamer.java:19)\n    at net.thucydides.core.steps.StepInterceptor.getTestNameFrom(StepInterceptor.java:534)\n    at net.thucydides.core.steps.StepInterceptor.notifyStepStarted(StepInterceptor.java:568)\n    at net.thucydides.core.steps.StepInterceptor.runOrSkipMethod(StepInterceptor.java:208)\n    ... 49 more\n}\n</code></pre>\n"},{"tags":["java","jsp","intellij-idea","selenide"],"comments":[{"owner":{"account_id":6017640,"reputation":8919,"user_id":4725875,"display_name":"DevilsHnd - 退した"},"score":0,"creation_date":1689146042,"post_id":76664767,"comment_id":135170049,"body_markdown":"Read the **.jsp** file into a single string object: `String jspString = new java.util.Scanner(new File(&quot;myData.jsp&quot;)).useDelimiter(&quot;\\\\Z&quot;).next();` (this will need to be wrapped within a try/catch for a *java.io.FileNotFoundException*). To get the title from between the title tags: `String title = jspString.substring(jspString.indexOf(&quot;&lt;title&gt;&quot;) + 7, jspString.indexOf(&quot;&lt;/title&gt;&quot;));`.","body":"Read the <b>.jsp</b> file into a single string object: <code>String jspString = new java.util.Scanner(new File(&quot;myData.jsp&quot;)).useDelimiter(&quot;\\\\Z&quot;).next();</code> (this will need to be wrapped within a try/catch for a <i>java.io.FileNotFoundException</i>). To get the title from between the title tags: <code>String title = jspString.substring(jspString.indexOf(&quot;&lt;title&gt;&quot;) + 7, jspString.indexOf(&quot;&lt;&#47;title&gt;&quot;));</code>."},{"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"score":0,"creation_date":1689236031,"post_id":76664767,"comment_id":135185484,"body_markdown":"There&#39;s no &quot;title&quot; value in the JSP. How do you want to get it?","body":"There&#39;s no &quot;title&quot; value in the JSP. How do you want to get it?"}],"owner":{"account_id":27071454,"reputation":21,"user_id":20622054,"display_name":"Davron Bafoyev"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1689099539,"creation_date":1689099539,"question_id":76664767,"body_markdown":"I have a &quot;myData.jsp&quot; in my Java project like this:\r\n\r\n```\r\n&lt;html&gt;\r\n&lt;head&gt;\r\n  &lt;title&gt;Book Query&lt;/title&gt;\r\n&lt;/head&gt;\r\n&lt;body&gt;\r\n  &lt;h1&gt;Another E-Bookstore&lt;/h1&gt;\r\n  &lt;h3&gt;Choose Author(s):&lt;/h3&gt;\r\n  &lt;form method=&quot;get&quot;&gt;\r\n    &lt;input type=&quot;checkbox&quot; name=&quot;author&quot; value=&quot;Tan Ah Teck&quot;&gt;Tan\r\n    &lt;input type=&quot;checkbox&quot; name=&quot;author&quot; value=&quot;Mohd Ali&quot;&gt;Ali\r\n    &lt;input type=&quot;checkbox&quot; name=&quot;author&quot; value=&quot;Kumar&quot;&gt;Kumar\r\n    &lt;input type=&quot;submit&quot; value=&quot;Query&quot;&gt;\r\n  &lt;/form&gt;\r\n```\r\n\r\nHow can I get for example &quot;title&quot; value from this jsp file using java","title":"How can get elements from .jsp file using java without servlets","body":"<p>I have a &quot;myData.jsp&quot; in my Java project like this:</p>\n<pre><code>&lt;html&gt;\n&lt;head&gt;\n  &lt;title&gt;Book Query&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n  &lt;h1&gt;Another E-Bookstore&lt;/h1&gt;\n  &lt;h3&gt;Choose Author(s):&lt;/h3&gt;\n  &lt;form method=&quot;get&quot;&gt;\n    &lt;input type=&quot;checkbox&quot; name=&quot;author&quot; value=&quot;Tan Ah Teck&quot;&gt;Tan\n    &lt;input type=&quot;checkbox&quot; name=&quot;author&quot; value=&quot;Mohd Ali&quot;&gt;Ali\n    &lt;input type=&quot;checkbox&quot; name=&quot;author&quot; value=&quot;Kumar&quot;&gt;Kumar\n    &lt;input type=&quot;submit&quot; value=&quot;Query&quot;&gt;\n  &lt;/form&gt;\n</code></pre>\n<p>How can I get for example &quot;title&quot; value from this jsp file using java</p>\n"},{"tags":["java","cross-platform","newline","eol"],"answers":[{"tags":[],"owner":{"account_id":13653,"reputation":13400,"user_id":27565,"accept_rate":100,"display_name":"abahgat"},"comment_count":0,"down_vote_count":5,"up_vote_count":663,"is_accepted":false,"score":658,"last_activity_date":1395302359,"creation_date":1224149966,"answer_id":207950,"question_id":207947,"body_markdown":"You can use\r\n\r\n    System.getProperty(&quot;line.separator&quot;);\r\n\r\nto get the line separator\r\n","title":"How do I get a platform-independent new line character?","body":"<p>You can use</p>\n\n<pre><code>System.getProperty(\"line.separator\");\n</code></pre>\n\n<p>to get the line separator</p>\n"},{"comments":[{"owner":{"account_id":273944,"reputation":9309,"user_id":565879,"accept_rate":81,"display_name":"Buttons840"},"score":8,"creation_date":1314396158,"post_id":209771,"comment_id":8664493,"body_markdown":"Thank you!  I&#39;m sure System.getProperty(&quot;line.separator&quot;); has its uses, but I get tired of seeing: &quot;Line 1&quot; + System.getProperty(&quot;line.separator&quot;) + &quot;Line 2&quot;","body":"Thank you!  I&#39;m sure System.getProperty(&quot;line.separator&quot;); has its uses, but I get tired of seeing: &quot;Line 1&quot; + System.getProperty(&quot;line.separator&quot;) + &quot;Line 2&quot;"},{"owner":{"account_id":13653,"reputation":13400,"user_id":27565,"accept_rate":100,"display_name":"abahgat"},"score":45,"creation_date":1324032961,"post_id":209771,"comment_id":10568572,"body_markdown":"Oh my,  &quot;Line 1&quot; + System.getProperty(&quot;line.separator&quot;) + &quot;Line 2&quot; is indeed one of the ugliest things I&#39;ve ever seen. Just declaring a constant elsewhere would be less painful.","body":"Oh my,  &quot;Line 1&quot; + System.getProperty(&quot;line.separator&quot;) + &quot;Line 2&quot; is indeed one of the ugliest things I&#39;ve ever seen. Just declaring a constant elsewhere would be less painful."},{"owner":{"account_id":346626,"reputation":10196,"user_id":680268,"accept_rate":66,"display_name":"Stealth Rabbi"},"score":4,"creation_date":1368198125,"post_id":209771,"comment_id":23657395,"body_markdown":"this doesn&#39;t work, at least, with a string going in to a log4j statement. Creating an example with a newline at the end is potentially hiding the problem. Also, the String s2 is just confusing using &#39;%%n&#39;","body":"this doesn&#39;t work, at least, with a string going in to a log4j statement. Creating an example with a newline at the end is potentially hiding the problem. Also, the String s2 is just confusing using &#39;%%n&#39;"},{"owner":{"account_id":1551147,"reputation":3558,"user_id":1443496,"accept_rate":74,"display_name":"Sean Allred"},"score":1,"creation_date":1375801385,"post_id":209771,"comment_id":26467735,"body_markdown":"@StealthRabbi It is common in (at least) C-like languages to &#39;escape the escape character&#39; to insert the literal character, e.g. `. \\\\ .` (less the dots) produces a single backslash and `%%` produces a single `%`.","body":"@StealthRabbi It is common in (at least) C-like languages to &#39;escape the escape character&#39; to insert the literal character, e.g. <code>. \\\\ .</code> (less the dots) produces a single backslash and <code>%%</code> produces a single <code>%</code>."},{"owner":{"account_id":300330,"reputation":6240,"user_id":607405,"accept_rate":84,"display_name":"Konstantin Weitz"},"score":7,"creation_date":1384290559,"post_id":209771,"comment_id":29674947,"body_markdown":"Don&#39;t use this if your string might contain `%` from user input!","body":"Don&#39;t use this if your string might contain <code>%</code> from user input!"},{"owner":{"account_id":228515,"reputation":1728,"user_id":490873,"display_name":"hotshot309"},"score":0,"creation_date":1386097642,"post_id":209771,"comment_id":30393488,"body_markdown":"@SeanAllred, that&#39;s true...but I think @StealthRabbi was saying it is unclear in the example above (at least on first reading) what the `%%n` is supposed to mean.  In any case, the formatted text is supposed to read, `&quot;Use %n as a platform independent newline.&quot;` with a newline character at the end.","body":"@SeanAllred, that&#39;s true...but I think @StealthRabbi was saying it is unclear in the example above (at least on first reading) what the <code>%%n</code> is supposed to mean.  In any case, the formatted text is supposed to read, <code>&quot;Use %n as a platform independent newline.&quot;</code> with a newline character at the end."},{"owner":{"account_id":255665,"reputation":232836,"user_id":535871,"accept_rate":84,"display_name":"Ted Hopp"},"score":0,"creation_date":1388335214,"post_id":209771,"comment_id":31234039,"body_markdown":"@KonstantinWeitz - Why not? The formatting routines don&#39;t double-process format substitutions.","body":"@KonstantinWeitz - Why not? The formatting routines don&#39;t double-process format substitutions."},{"owner":{"account_id":300330,"reputation":6240,"user_id":607405,"accept_rate":84,"display_name":"Konstantin Weitz"},"score":0,"creation_date":1388345571,"post_id":209771,"comment_id":31237480,"body_markdown":"@Ted Hopp, if `s` is a user provided string, you should not use it in the format string, e.g. `format(s+&quot;%n&quot;)`, because if s contains `%` this will fail. It is fine to use user provided strings as format arguments.","body":"@Ted Hopp, if <code>s</code> is a user provided string, you should not use it in the format string, e.g. <code>format(s+&quot;%n&quot;)</code>, because if s contains <code>%</code> this will fail. It is fine to use user provided strings as format arguments."},{"owner":{"account_id":255665,"reputation":232836,"user_id":535871,"accept_rate":84,"display_name":"Ted Hopp"},"score":0,"creation_date":1388348662,"post_id":209771,"comment_id":31238424,"body_markdown":"@KonstantinWeitz - Well, using a user-supplied string is always risky. The example you provide will only fail if the string contains an unescaped `%` as the final character. But in that case, the format would be invalid if you used `s+&quot;\\n&quot;`. (Which would you rather have when the user supplies such a format string--an exception or a missing newline? I think it&#39;s a toss-up.)","body":"@KonstantinWeitz - Well, using a user-supplied string is always risky. The example you provide will only fail if the string contains an unescaped <code>%</code> as the final character. But in that case, the format would be invalid if you used <code>s+&quot;\\n&quot;</code>. (Which would you rather have when the user supplies such a format string--an exception or a missing newline? I think it&#39;s a toss-up.)"},{"owner":{"account_id":2562085,"reputation":4946,"user_id":2223027,"display_name":"pyb"},"score":0,"creation_date":1435679963,"post_id":209771,"comment_id":50296711,"body_markdown":"If you&#39;re building a String and using line breaks to separate lines, you want to test that your text is not empty so you don&#39;t end up with just line breaks. Otherwise that&#39;s a good tip!","body":"If you&#39;re building a String and using line breaks to separate lines, you want to test that your text is not empty so you don&#39;t end up with just line breaks. Otherwise that&#39;s a good tip!"},{"owner":{"account_id":52453,"reputation":26429,"user_id":156755,"accept_rate":90,"display_name":"Basic"},"score":0,"creation_date":1449752322,"post_id":209771,"comment_id":56149618,"body_markdown":"@abahgat Yes, but we&#39;re talking about Java here where verbosity is valued far more highly than elegance or conciseness","body":"@abahgat Yes, but we&#39;re talking about Java here where verbosity is valued far more highly than elegance or conciseness"},{"owner":{"account_id":2299435,"reputation":9252,"user_id":4451732,"accept_rate":75,"display_name":"Franklin Yu"},"score":10,"creation_date":1462421505,"post_id":209771,"comment_id":61633437,"body_markdown":"@KonstantinWeitz, the problem of `String.format(s + &quot;%n&quot;)` is easily solved by `String.format(&quot;%s%n&quot;, s)`. It is always risky to involve user input as format body (in the same way as `eval()`).","body":"@KonstantinWeitz, the problem of <code>String.format(s + &quot;%n&quot;)</code> is easily solved by <code>String.format(&quot;%s%n&quot;, s)</code>. It is always risky to involve user input as format body (in the same way as <code>eval()</code>)."}],"tags":[],"owner":{"account_id":4169,"reputation":24716,"user_id":6180,"accept_rate":83,"display_name":"Alex B"},"comment_count":12,"down_vote_count":6,"up_vote_count":383,"is_accepted":true,"score":377,"last_activity_date":1438813706,"creation_date":1224182740,"answer_id":209771,"question_id":207947,"body_markdown":"In addition to the line.separator property, if you are using java 1.5 or later and the **String.format** (or other **formatting** methods) you can use `%n` as in\r\n\r\n    Calendar c = ...;\r\n    String s = String.format(&quot;Duke&#39;s Birthday: %1$tm %1$te,%1$tY%n&quot;, c); \r\n    //Note `%n` at end of line                                  ^^\r\n\r\n    String s2 = String.format(&quot;Use %%n as a platform independent newline.%n&quot;); \r\n    //         %% becomes %        ^^\r\n    //                                        and `%n` becomes newline   ^^\r\n\r\n\r\nSee the [Java 1.8 API for Formatter][1] for more details.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/8/docs/api/java/util/Formatter.html","title":"How do I get a platform-independent new line character?","body":"<p>In addition to the line.separator property, if you are using java 1.5 or later and the <strong>String.format</strong> (or other <strong>formatting</strong> methods) you can use <code>%n</code> as in</p>\n\n<pre><code>Calendar c = ...;\nString s = String.format(\"Duke's Birthday: %1$tm %1$te,%1$tY%n\", c); \n//Note `%n` at end of line                                  ^^\n\nString s2 = String.format(\"Use %%n as a platform independent newline.%n\"); \n//         %% becomes %        ^^\n//                                        and `%n` becomes newline   ^^\n</code></pre>\n\n<p>See the <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/Formatter.html\" rel=\"noreferrer\">Java 1.8 API for Formatter</a> for more details.</p>\n"},{"tags":[],"owner":{"account_id":7745,"reputation":189765,"user_id":13531,"accept_rate":75,"display_name":"Michael Myers"},"comment_count":0,"down_vote_count":2,"up_vote_count":43,"is_accepted":false,"score":41,"last_activity_date":1224182955,"creation_date":1224182955,"answer_id":209782,"question_id":207947,"body_markdown":"If you&#39;re trying to write a newline to a file, you could simply use BufferedWriter&#39;s [newLine()][1] method. \r\n\r\n\r\n  [1]: http://java.sun.com/javase/6/docs/api/java/io/BufferedWriter.html#newLine()","title":"How do I get a platform-independent new line character?","body":"<p>If you're trying to write a newline to a file, you could simply use BufferedWriter's <a href=\"http://java.sun.com/javase/6/docs/api/java/io/BufferedWriter.html#newLine()\" rel=\"noreferrer\">newLine()</a> method. </p>\n"},{"comments":[{"owner":{"account_id":16900,"reputation":24039,"user_id":37298,"accept_rate":88,"display_name":"Shervin Asgari"},"score":21,"creation_date":1389094657,"post_id":9911937,"comment_id":31503992,"body_markdown":"Yes, install a third party library just to get platform independant new line! #facepalm","body":"Yes, install a third party library just to get platform independant new line! #facepalm"},{"owner":{"account_id":27543,"reputation":7198,"user_id":72810,"accept_rate":61,"display_name":"lexicalscope"},"score":26,"creation_date":1389110766,"post_id":9911937,"comment_id":31514749,"body_markdown":"@Shervin of course you would not do that, but many projects I have worked on are already using commons-lang and some older version of Java. So if you happen to be using commons-lang already then this is a sensible answer. I didn&#39;t feel it necessary to point that out, I was obviously wrong.","body":"@Shervin of course you would not do that, but many projects I have worked on are already using commons-lang and some older version of Java. So if you happen to be using commons-lang already then this is a sensible answer. I didn&#39;t feel it necessary to point that out, I was obviously wrong."}],"tags":[],"owner":{"account_id":27543,"reputation":7198,"user_id":72810,"accept_rate":61,"display_name":"lexicalscope"},"comment_count":2,"down_vote_count":3,"up_vote_count":26,"is_accepted":false,"score":23,"last_activity_date":1386099723,"creation_date":1332952434,"answer_id":9911937,"question_id":207947,"body_markdown":"The [commons-lang][1] library has a constant field available called [SystemUtils.LINE_SEPARATOR][2] \r\n\r\n\r\n  [1]: http://commons.apache.org/proper/commons-lang/\r\n  [2]: http://commons.apache.org/proper/commons-lang/javadocs/api-3.1/org/apache/commons/lang3/SystemUtils.html#LINE_SEPARATOR","title":"How do I get a platform-independent new line character?","body":"<p>The <a href=\"http://commons.apache.org/proper/commons-lang/\">commons-lang</a> library has a constant field available called <a href=\"http://commons.apache.org/proper/commons-lang/javadocs/api-3.1/org/apache/commons/lang3/SystemUtils.html#LINE_SEPARATOR\">SystemUtils.LINE_SEPARATOR</a> </p>\n"},{"comments":[{"owner":{"account_id":2882201,"reputation":10752,"user_id":2472820,"accept_rate":86,"display_name":"Kon"},"score":8,"creation_date":1457738524,"post_id":10937340,"comment_id":59559594,"body_markdown":"Would have been very nice of them to provide an overloaded method `lineSeperator(int)` which returns some number of line seperators, as I often find myself using 2 at once.","body":"Would have been very nice of them to provide an overloaded method <code>lineSeperator(int)</code> which returns some number of line seperators, as I often find myself using 2 at once."},{"owner":{"account_id":291775,"reputation":4282,"user_id":594137,"accept_rate":90,"display_name":"Samuel Harmer"},"score":11,"creation_date":1488366331,"post_id":10937340,"comment_id":72195781,"body_markdown":"@Kon Based on [this answer](http://stackoverflow.com/a/24946101/594137): `String.join(&quot;&quot;, Collections.nCopies(5, System.lineSeparator()))`","body":"@Kon Based on <a href=\"http://stackoverflow.com/a/24946101/594137\">this answer</a>: <code>String.join(&quot;&quot;, Collections.nCopies(5, System.lineSeparator()))</code>"},{"owner":{"account_id":9847667,"reputation":29054,"user_id":7294647,"accept_rate":67,"display_name":"Jacob G."},"score":12,"creation_date":1549209462,"post_id":10937340,"comment_id":95813094,"body_markdown":"With Java 11: `System.lineSeparator().repeat(5)`","body":"With Java 11: <code>System.lineSeparator().repeat(5)</code>"}],"tags":[],"owner":{"account_id":41594,"reputation":152717,"user_id":120955,"accept_rate":88,"display_name":"StriplingWarrior"},"comment_count":3,"down_vote_count":3,"up_vote_count":761,"is_accepted":false,"score":758,"last_activity_date":1407873603,"creation_date":1339092342,"answer_id":10937340,"question_id":207947,"body_markdown":"Java 7 now has a [`System.lineSeparator()`][1] method.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/8/docs/api/java/lang/System.html#lineSeparator--","title":"How do I get a platform-independent new line character?","body":"<p>Java 7 now has a <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/System.html#lineSeparator--\"><code>System.lineSeparator()</code></a> method.</p>\n"},{"comments":[{"owner":{"account_id":2648,"reputation":120214,"user_id":3713,"accept_rate":91,"display_name":"Spoike"},"score":21,"creation_date":1354715023,"post_id":13719364,"comment_id":18853392,"body_markdown":"This actually doesn&#39;t matter in most cases, [Coding Horror&#39;s Jeff Atwood made a blog post about this particular sort of micro-optimization](http://www.codinghorror.com/blog/2009/01/the-sad-tragedy-of-micro-optimization-theater.html). Always do metrics before making claims such as &quot;don&#39;t do `string + string`&quot;.","body":"This actually doesn&#39;t matter in most cases, <a href=\"http://www.codinghorror.com/blog/2009/01/the-sad-tragedy-of-micro-optimization-theater.html\" rel=\"nofollow noreferrer\">Coding Horror&#39;s Jeff Atwood made a blog post about this particular sort of micro-optimization</a>. Always do metrics before making claims such as &quot;don&#39;t do <code>string + string</code>&quot;."},{"owner":{"account_id":97092,"reputation":306,"user_id":263554,"display_name":"Lajcik"},"score":6,"creation_date":1355754139,"post_id":13719364,"comment_id":19180623,"body_markdown":"I&#39;d say that Jeff&#39;s article may be a bit off since it only touches on execution time. String concatenation in Java is not only about execution speed but also how much garbage you leave in memory for the GC to clean, which may result in the GC running more often. This might or might not be an issue depending on your environment and configuration.","body":"I&#39;d say that Jeff&#39;s article may be a bit off since it only touches on execution time. String concatenation in Java is not only about execution speed but also how much garbage you leave in memory for the GC to clean, which may result in the GC running more often. This might or might not be an issue depending on your environment and configuration."},{"owner":{"account_id":29057,"reputation":2594,"user_id":78212,"accept_rate":67,"display_name":"Richard Watson"},"score":8,"creation_date":1357814907,"post_id":13719364,"comment_id":19784534,"body_markdown":"Lajcik, I suspect that&#39;s pre-optimization for all cases except those who really do a lot of string manipulation. The StringBuffer is an anti-pattern for minor concatenation requirements. In many cases I&#39;d rather have readable String1 + separator + String2 than the abovementioned multi-line example. Besides, I&#39;d suggest testing whether memory &amp; GC is impacted positively by adding the SB. In many cases I&#39;d guess it isn&#39;t. If it&#39;s not worth testing, it&#39;s probably pre-optimizing and I&#39;d focus on readability.","body":"Lajcik, I suspect that&#39;s pre-optimization for all cases except those who really do a lot of string manipulation. The StringBuffer is an anti-pattern for minor concatenation requirements. In many cases I&#39;d rather have readable String1 + separator + String2 than the abovementioned multi-line example. Besides, I&#39;d suggest testing whether memory &amp; GC is impacted positively by adding the SB. In many cases I&#39;d guess it isn&#39;t. If it&#39;s not worth testing, it&#39;s probably pre-optimizing and I&#39;d focus on readability."},{"owner":{"account_id":129401,"reputation":2460,"user_id":327961,"accept_rate":50,"display_name":"user327961"},"score":33,"creation_date":1368622128,"post_id":13719364,"comment_id":23800384,"body_markdown":"Doing a String1 + String2 is the same as doing new StringBuilder(String1).append(String2) in modern compilers, so there is no optimization at all for a one liner string concat. StringBuilder is generaly worth it only in loops or recursive methods. But anyway, this might be out of the scope of the original question.","body":"Doing a String1 + String2 is the same as doing new StringBuilder(String1).append(String2) in modern compilers, so there is no optimization at all for a one liner string concat. StringBuilder is generaly worth it only in loops or recursive methods. But anyway, this might be out of the scope of the original question."},{"owner":{"account_id":49086,"reputation":9943,"user_id":146003,"accept_rate":99,"display_name":"Atmocreations"},"score":1,"creation_date":1381382382,"post_id":13719364,"comment_id":28560397,"body_markdown":"@user327961: true story. One can easily prove this using your favourite IDE and a debugger.","body":"@user327961: true story. One can easily prove this using your favourite IDE and a debugger."}],"tags":[],"owner":{"account_id":207910,"reputation":930,"user_id":458065,"accept_rate":0,"display_name":"Gary Davies"},"comment_count":5,"down_vote_count":13,"up_vote_count":8,"is_accepted":false,"score":-5,"last_activity_date":1441302203,"creation_date":1354697593,"answer_id":13719364,"question_id":207947,"body_markdown":"Avoid appending strings using String + String etc, use StringBuilder instead.\r\n\r\n    String separator = System.getProperty( &quot;line.separator&quot; );\r\n    StringBuilder lines = new StringBuilder( line1 );\r\n    lines.append( separator );\r\n    lines.append( line2 );\r\n    lines.append( separator );\r\n    String result = lines.toString( );\r\n","title":"How do I get a platform-independent new line character?","body":"<p>Avoid appending strings using String + String etc, use StringBuilder instead.</p>\n\n<pre><code>String separator = System.getProperty( \"line.separator\" );\nStringBuilder lines = new StringBuilder( line1 );\nlines.append( separator );\nlines.append( line2 );\nlines.append( separator );\nString result = lines.toString( );\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3428911,"reputation":486,"user_id":2873923,"accept_rate":50,"display_name":"Sathesh"},"comment_count":0,"down_vote_count":3,"up_vote_count":19,"is_accepted":false,"score":16,"last_activity_date":1443525631,"creation_date":1443525631,"answer_id":32842574,"question_id":207947,"body_markdown":"    StringBuilder newLine=new StringBuilder();\r\n    newLine.append(&quot;abc&quot;);\r\n    newline.append(System.getProperty(&quot;line.separator&quot;));\r\n    newline.append(&quot;def&quot;);\r\n    String output=newline.toString();\r\nThe above snippet will have two strings separated by a new line irrespective of platforms.","title":"How do I get a platform-independent new line character?","body":"<pre><code>StringBuilder newLine=new StringBuilder();\nnewLine.append(\"abc\");\nnewline.append(System.getProperty(\"line.separator\"));\nnewline.append(\"def\");\nString output=newline.toString();\n</code></pre>\n\n<p>The above snippet will have two strings separated by a new line irrespective of platforms.</p>\n"},{"tags":[],"owner":{"account_id":21032417,"reputation":95,"user_id":15456485,"display_name":"sahlaysta"},"comment_count":0,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1665166220,"creation_date":1665166220,"answer_id":73991121,"question_id":207947,"body_markdown":"Since JDK 1.1, the BufferedWriter class had the &quot;newLine()&quot; method which wrote the platform-dependent new line. It also provided the StringWriter class, making it possible to extract the new line:\r\n\r\n    public static String getSystemNewLine() {\r\n        try {\r\n            StringWriter sw = new StringWriter();\r\n            BufferedWriter bw = new BufferedWriter(sw);\r\n            bw.newLine();\r\n            bw.flush();\r\n            String s = sw.toString();\r\n            bw.close();\r\n            return s;\r\n        } catch (Exception e) {\r\n            throw new Error(e);\r\n        }\r\n    }","title":"How do I get a platform-independent new line character?","body":"<p>Since JDK 1.1, the BufferedWriter class had the &quot;newLine()&quot; method which wrote the platform-dependent new line. It also provided the StringWriter class, making it possible to extract the new line:</p>\n<pre><code>public static String getSystemNewLine() {\n    try {\n        StringWriter sw = new StringWriter();\n        BufferedWriter bw = new BufferedWriter(sw);\n        bw.newLine();\n        bw.flush();\n        String s = sw.toString();\n        bw.close();\n        return s;\n    } catch (Exception e) {\n        throw new Error(e);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":2648,"reputation":120214,"user_id":3713,"accept_rate":91,"display_name":"Spoike"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":456101,"favorite_count":0,"down_vote_count":2,"up_vote_count":590,"accepted_answer_id":209771,"answer_count":8,"score":588,"last_activity_date":1689098664,"creation_date":1224149825,"question_id":207947,"body_markdown":"How do I get a platform-independent newline in Java? I can’t use `&quot;\\n&quot;` everywhere.","title":"How do I get a platform-independent new line character?","body":"<p>How do I get a platform-independent newline in Java? I can’t use <code>&quot;\\n&quot;</code> everywhere.</p>\n"},{"tags":["java","linux","postgresql","amazon-web-services","sonarqube"],"owner":{"account_id":6239643,"reputation":1,"user_id":4853701,"display_name":"ace"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689098290,"creation_date":1689094581,"question_id":76664225,"body_markdown":"```\r\nRunning SonarQube...\r\nwrapper  | --&gt; Wrapper Started as Console\r\nwrapper  | Launching a JVM...\r\njvm 1    | Wrapper (Version 3.2.3) http://wrapper.tanukisoftware.org\r\njvm 1    |   Copyright 1999-2006 Tanuki Software, Inc.  All Rights Reserved.\r\njvm 1    | \r\njvm 1    | 2023.07.11 15:46:07 INFO  app[][o.s.a.AppFileSystem] Cleaning or creating temp directory /opt/sonarqube/temp\r\njvm 1    | 2023.07.11 15:46:07 INFO  app[][o.s.a.es.EsSettings] Elasticsearch listening on /127.0.0.1:9001\r\njvm 1    | 2023.07.11 15:46:07 INFO  app[][o.s.a.ProcessLauncherImpl] Launch process[[key=&#39;es&#39;, ipcIndex=1, logFilenamePrefix=es]] from [/opt/sonarqube/elasticsearch]: /opt/sonarqube/elasticsearch/bin/elasticsearch\r\njvm 1    | 2023.07.11 15:46:07 INFO  app[][o.s.a.SchedulerImpl] Waiting for Elasticsearch to be up and running\r\njvm 1    | OpenJDK 64-Bit Server VM warning: Option UseConcMarkSweepGC was deprecated in version 9.0 and will likely be removed in a future release.\r\njvm 1    | 2023.07.11 15:46:07 INFO  app[][o.e.p.PluginsService] no modules loaded\r\njvm 1    | 2023.07.11 15:46:07 INFO  app[][o.e.p.PluginsService] loaded plugin [org.elasticsearch.transport.Netty4Plugin]\r\njvm 1    | 2023.07.11 15:46:21 INFO  app[][o.s.a.SchedulerImpl] Process[es] is up\r\njvm 1    | 2023.07.11 15:46:21 INFO  app[][o.s.a.ProcessLauncherImpl] Launch process[[key=&#39;web&#39;, ipcIndex=2, logFilenamePrefix=web]] from [/opt/sonarqube]: /usr/local/jdk-11.0.1/bin/java -Djava.awt.headless=true -Dfile.encoding=UTF-8 -Djava.io.tmpdir=/opt/sonarqube/temp --add-opens=java.base/java.util=ALL-UNNAMED --add-opens=java.base/java.lang=ALL-UNNAMED --add-opens=java.base/java.io=ALL-UNNAMED --add-opens=java.rmi/sun.rmi.transport=ALL-UNNAMED -Xmx2g -Xms2g -XX:+HeapDumpOnOutOfMemoryError -Dhttp.nonProxyHosts=localhost|127.*|[::1] -cp ./lib/common/*:/opt/sonarqube/lib/jdbc/postgresql/postgresql-42.2.5.jar org.sonar.server.app.WebServer /opt/sonarqube/temp/sq-process12186382016905612213properties\r\njvm 1    | 2023.07.11 15:46:26 INFO  app[][o.s.a.SchedulerImpl] Process[web] is stopped\r\njvm 1    | 2023.07.11 15:46:26 WARN  app[][o.s.a.p.AbstractManagedProcess] Process exited with exit value [es]: 143\r\njvm 1    | 2023.07.11 15:46:26 INFO  app[][o.s.a.SchedulerImpl] Process[es] is stopped\r\njvm 1    | 2023.07.11 15:46:26 INFO  app[][o.s.a.SchedulerImpl] SonarQube is stopped\r\nwrapper  | &lt;-- Wrapper Stopped\r\n\r\nexecuted \r\n$SONAR_HOME/bin/linux-x86-64/sonar.sh console\r\n```\r\nbut getting the above error.\r\n","title":"i am unable to run sonarqube on the EC2 instance","body":"<pre><code>Running SonarQube...\nwrapper  | --&gt; Wrapper Started as Console\nwrapper  | Launching a JVM...\njvm 1    | Wrapper (Version 3.2.3) http://wrapper.tanukisoftware.org\njvm 1    |   Copyright 1999-2006 Tanuki Software, Inc.  All Rights Reserved.\njvm 1    | \njvm 1    | 2023.07.11 15:46:07 INFO  app[][o.s.a.AppFileSystem] Cleaning or creating temp directory /opt/sonarqube/temp\njvm 1    | 2023.07.11 15:46:07 INFO  app[][o.s.a.es.EsSettings] Elasticsearch listening on /127.0.0.1:9001\njvm 1    | 2023.07.11 15:46:07 INFO  app[][o.s.a.ProcessLauncherImpl] Launch process[[key='es', ipcIndex=1, logFilenamePrefix=es]] from [/opt/sonarqube/elasticsearch]: /opt/sonarqube/elasticsearch/bin/elasticsearch\njvm 1    | 2023.07.11 15:46:07 INFO  app[][o.s.a.SchedulerImpl] Waiting for Elasticsearch to be up and running\njvm 1    | OpenJDK 64-Bit Server VM warning: Option UseConcMarkSweepGC was deprecated in version 9.0 and will likely be removed in a future release.\njvm 1    | 2023.07.11 15:46:07 INFO  app[][o.e.p.PluginsService] no modules loaded\njvm 1    | 2023.07.11 15:46:07 INFO  app[][o.e.p.PluginsService] loaded plugin [org.elasticsearch.transport.Netty4Plugin]\njvm 1    | 2023.07.11 15:46:21 INFO  app[][o.s.a.SchedulerImpl] Process[es] is up\njvm 1    | 2023.07.11 15:46:21 INFO  app[][o.s.a.ProcessLauncherImpl] Launch process[[key='web', ipcIndex=2, logFilenamePrefix=web]] from [/opt/sonarqube]: /usr/local/jdk-11.0.1/bin/java -Djava.awt.headless=true -Dfile.encoding=UTF-8 -Djava.io.tmpdir=/opt/sonarqube/temp --add-opens=java.base/java.util=ALL-UNNAMED --add-opens=java.base/java.lang=ALL-UNNAMED --add-opens=java.base/java.io=ALL-UNNAMED --add-opens=java.rmi/sun.rmi.transport=ALL-UNNAMED -Xmx2g -Xms2g -XX:+HeapDumpOnOutOfMemoryError -Dhttp.nonProxyHosts=localhost|127.*|[::1] -cp ./lib/common/*:/opt/sonarqube/lib/jdbc/postgresql/postgresql-42.2.5.jar org.sonar.server.app.WebServer /opt/sonarqube/temp/sq-process12186382016905612213properties\njvm 1    | 2023.07.11 15:46:26 INFO  app[][o.s.a.SchedulerImpl] Process[web] is stopped\njvm 1    | 2023.07.11 15:46:26 WARN  app[][o.s.a.p.AbstractManagedProcess] Process exited with exit value [es]: 143\njvm 1    | 2023.07.11 15:46:26 INFO  app[][o.s.a.SchedulerImpl] Process[es] is stopped\njvm 1    | 2023.07.11 15:46:26 INFO  app[][o.s.a.SchedulerImpl] SonarQube is stopped\nwrapper  | &lt;-- Wrapper Stopped\n\nexecuted \n$SONAR_HOME/bin/linux-x86-64/sonar.sh console\n</code></pre>\n<p>but getting the above error.</p>\n"},{"tags":["java","multithreading","freeze","blockingqueue","linkedblockingqueue"],"comments":[{"owner":{"account_id":44830,"reputation":1744,"user_id":131795,"display_name":"Trevor Harrison"},"score":1,"creation_date":1689098934,"post_id":76664598,"comment_id":135164240,"body_markdown":"Have you tried using jps and jstack to dump your application&#39;s threads/stack traces to see where the deadlock is?","body":"Have you tried using jps and jstack to dump your application&#39;s threads/stack traces to see where the deadlock is?"},{"owner":{"account_id":2123179,"reputation":10932,"user_id":1886012,"display_name":"bowmore"},"score":0,"creation_date":1689122125,"post_id":76664598,"comment_id":135167546,"body_markdown":"Please provide a minimal reproducible example. Code that displays the problem, without us needing to infer things. Otherwise you&#39;re not very likely to get a helpful answer.","body":"Please provide a minimal reproducible example. Code that displays the problem, without us needing to infer things. Otherwise you&#39;re not very likely to get a helpful answer."}],"owner":{"account_id":28996746,"reputation":1,"user_id":22211231,"display_name":"Visweswararao Atluri"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689098223,"creation_date":1689097984,"question_id":76664598,"body_markdown":"I am using LinkedBlockingQueue in my application. When the application is running the program waits at blockingqueue.take() statement. Even though after adding some objects into the queue, it is not progressing further.\r\n\r\nThe sample application:\r\n\r\n```\r\npublic class DelegatorThread implements Runnable {\r\n\r\n\tprivate static BlockingQueue&lt;Alarm&gt; pendingAlarmQueue = new LinkedBlockingQueue&lt;Alarm&gt;();\r\n\r\n\tpublic void addJob(List&lt;Alarm&gt; alarms) throws InterruptedException {\r\n\t\tpendingAlarmQueue.addAll(alarms);\r\n\t}\r\n\r\n\tpublic void run() {\r\n\r\n\t\twhile (true) {\r\n\t\t\ttry {\r\n\t\t\t\tAlarm al = pendingAlarmQueue.take();\r\n\t\t\t\tLOGGER.log(Level.Info, al.getSeverity());\r\n\t\t\t} catch (InterruptedException | RemoteException | EInternalException | EsymacException e) {\r\n\t\t\t\tLOGGER.log(Level.SEVERE, e.getMessage());\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n}\r\n```\r\nThis is the consumer class\r\n\r\n```\r\npublic class JsonToAlarmConverter {\r\n\r\n\tprivate static DelegatorThread delegatorThread = null;\r\n\tstatic {\r\n\t\tdelegatorThread = new DelegatorThread();\r\n\t\tThread t = new Thread(delegatorThread);\r\n\t\tt.start();\r\n\r\n\t}\r\n\r\n\tpublic static synchronized void readJSONStringForRaise(String arrayOfAlarmObjects)\r\n\t\t\tthrows JSONException, IllegalArgumentException, InterruptedException {\r\n\t\taddAlarminQueue(alarms);\r\n\t}\r\n}\r\n```\r\n\r\nFor few entries into the queue, it is working as expected. After sometime it is not able to resume from take() even after adding some entries into the queue. Am I missing something here? \r\n\r\nI have run this locally in eclipse and it is working fine. But when I run this in customer environment in server, the application freezes and only after restarting the server it works for few objects into the queue and again it stops working. Kindly help if I am using the BlockingQueue in any wrong way. No errors/exceptions seen in log files. It is not executing the statement after blockingQueue.take() and it is not processing any new entries into queue.","title":"Issue with LinkedBlockingQueue in java application","body":"<p>I am using LinkedBlockingQueue in my application. When the application is running the program waits at blockingqueue.take() statement. Even though after adding some objects into the queue, it is not progressing further.</p>\n<p>The sample application:</p>\n<pre><code>public class DelegatorThread implements Runnable {\n\n    private static BlockingQueue&lt;Alarm&gt; pendingAlarmQueue = new LinkedBlockingQueue&lt;Alarm&gt;();\n\n    public void addJob(List&lt;Alarm&gt; alarms) throws InterruptedException {\n        pendingAlarmQueue.addAll(alarms);\n    }\n\n    public void run() {\n\n        while (true) {\n            try {\n                Alarm al = pendingAlarmQueue.take();\n                LOGGER.log(Level.Info, al.getSeverity());\n            } catch (InterruptedException | RemoteException | EInternalException | EsymacException e) {\n                LOGGER.log(Level.SEVERE, e.getMessage());\n            }\n        }\n    }\n\n}\n</code></pre>\n<p>This is the consumer class</p>\n<pre><code>public class JsonToAlarmConverter {\n\n    private static DelegatorThread delegatorThread = null;\n    static {\n        delegatorThread = new DelegatorThread();\n        Thread t = new Thread(delegatorThread);\n        t.start();\n\n    }\n\n    public static synchronized void readJSONStringForRaise(String arrayOfAlarmObjects)\n            throws JSONException, IllegalArgumentException, InterruptedException {\n        addAlarminQueue(alarms);\n    }\n}\n</code></pre>\n<p>For few entries into the queue, it is working as expected. After sometime it is not able to resume from take() even after adding some entries into the queue. Am I missing something here?</p>\n<p>I have run this locally in eclipse and it is working fine. But when I run this in customer environment in server, the application freezes and only after restarting the server it works for few objects into the queue and again it stops working. Kindly help if I am using the BlockingQueue in any wrong way. No errors/exceptions seen in log files. It is not executing the statement after blockingQueue.take() and it is not processing any new entries into queue.</p>\n"},{"tags":["java","spring","spring-mvc","tomcat","model-view-controller"],"answers":[{"tags":[],"owner":{"account_id":17056115,"reputation":117,"user_id":12340604,"display_name":"tohhant"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1689097986,"creation_date":1689097986,"answer_id":76664599,"question_id":76663926,"body_markdown":"I guess, you are trying to access incorrect endpoint in browser, although you specified here root mapping, so, try to access **localhost:8080/** or if you want to change home JSP to map to **/Practice** endpoint, change next code to next:\r\nThis:\r\n\r\n    @Controller\r\n    public class HomeController {\r\n    \r\n        @GetMapping(&quot;/&quot;)\r\n        public String home()\r\n        {\r\n            System.out.println(&quot;jjjjjjjjjjjjjjjjjj&quot;);\r\n            return &quot;home&quot;;\r\n        }\r\n    }\r\n\r\nTo this:\r\n\r\n    @Controller\r\n    public class HomeController {\r\n    \r\n        @GetMapping(&quot;/Practice&quot;) // this line\r\n        public String home()\r\n        {\r\n            System.out.println(&quot;jjjjjjjjjjjjjjjjjj&quot;);\r\n            return &quot;home&quot;;\r\n        }\r\n    }\r\n\r\nThis is because **@GetMapping** annotation maps your JSP page to **localhost:8080/Practice** now\r\n","title":"Getting 404 error while running Spring MVC project","body":"<p>I guess, you are trying to access incorrect endpoint in browser, although you specified here root mapping, so, try to access <strong>localhost:8080/</strong> or if you want to change home JSP to map to <strong>/Practice</strong> endpoint, change next code to next:\nThis:</p>\n<pre><code>@Controller\npublic class HomeController {\n\n    @GetMapping(&quot;/&quot;)\n    public String home()\n    {\n        System.out.println(&quot;jjjjjjjjjjjjjjjjjj&quot;);\n        return &quot;home&quot;;\n    }\n}\n</code></pre>\n<p>To this:</p>\n<pre><code>@Controller\npublic class HomeController {\n\n    @GetMapping(&quot;/Practice&quot;) // this line\n    public String home()\n    {\n        System.out.println(&quot;jjjjjjjjjjjjjjjjjj&quot;);\n        return &quot;home&quot;;\n    }\n}\n</code></pre>\n<p>This is because <strong>@GetMapping</strong> annotation maps your JSP page to <strong>localhost:8080/Practice</strong> now</p>\n"}],"owner":{"account_id":28995804,"reputation":1,"user_id":22210516,"display_name":"Veera Ezhil Vendhan V"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689097986,"creation_date":1689091956,"question_id":76663926,"body_markdown":"I am getting 404 error, while running spring mvc project.\r\nI have mapped root request to my home.jsp and I am using spring java annotation configuration. \r\nchecked my mapping it looks fine for me. please help me to solve the issue I am not able find where it goes wrong.\r\n\r\n[Issue](https://i.stack.imgur.com/bKEuy.png)\r\n\r\n```\r\n@Controller\r\npublic class HomeController {\r\n\r\n\t@GetMapping(&quot;/&quot;)\r\n\tpublic String home()\r\n\t{\r\n\t\tSystem.out.println(&quot;jjjjjjjjjjjjjjjjjj&quot;);\r\n\t\treturn &quot;home&quot;;\r\n\t}\r\n}\r\n```\r\n\r\nDispatcher Servlet Config\r\n\r\n\r\n```\r\npublic class DispServler extends AbstractAnnotationConfigDispatcherServletInitializer{\r\n\r\n\t@Override\r\n\tprotected Class&lt;?&gt;[] getRootConfigClasses() {\r\n\t\t// TODO Auto-generated method stub\r\n\t\treturn null;\r\n\t}\r\n\r\n\t@Override\r\n\tprotected Class&lt;?&gt;[] getServletConfigClasses() {\r\n\t\t// TODO Auto-generated method stub\r\n\t\treturn new Class[] {ConfigurationClass.class};\r\n\t}\r\n\r\n\t@Override\r\n\tprotected String[] getServletMappings() {\r\n\t\t// TODO Auto-generated method stub\r\n\t\treturn new String[] {&quot;/&quot;};\r\n\t}\r\n\r\n}\r\n```\r\n```\r\n@Configuration\r\n@EnableWebMvc\r\n@ComponentScan(basePackages=&quot;com.veera&quot;)\r\npublic class ConfigurationClass {\r\n\t\r\n\t@Bean\r\n\tpublic ViewResolver viewResolver()\r\n\t{\r\n\t\tInternalResourceViewResolver vr = new InternalResourceViewResolver();\r\n\t\tvr.setPrefix(&quot;/&quot;);\r\n\t\tvr.setSuffix(&quot;.jsp&quot;);\r\n\t\treturn vr;\r\n\t}\r\n\r\n}\r\n```\r\n\r\nProject structure\r\n\r\n[Project structure](https://i.stack.imgur.com/jsLyJ.png)\r\n\r\n\r\nI have added System.out.println() statement inside my mapping method\r\nbut it is not printing my that statement in console also.\r\n\r\n\r\n```\r\n@Controller\r\npublic class HomeController {\r\n\r\n\t@GetMapping(&quot;/&quot;)\r\n\tpublic String home()\r\n\t{\r\n\t\tSystem.out.println(&quot;jjjjjjjjjjjjjjjjjj&quot;);\r\n\t\treturn &quot;home&quot;;\r\n\t}\r\n}\r\n```\r\n\r\n[console log](https://i.stack.imgur.com/H3ij4.png)\r\n","title":"Getting 404 error while running Spring MVC project","body":"<p>I am getting 404 error, while running spring mvc project.\nI have mapped root request to my home.jsp and I am using spring java annotation configuration.\nchecked my mapping it looks fine for me. please help me to solve the issue I am not able find where it goes wrong.</p>\n<p><a href=\"https://i.stack.imgur.com/bKEuy.png\" rel=\"nofollow noreferrer\">Issue</a></p>\n<pre><code>@Controller\npublic class HomeController {\n\n    @GetMapping(&quot;/&quot;)\n    public String home()\n    {\n        System.out.println(&quot;jjjjjjjjjjjjjjjjjj&quot;);\n        return &quot;home&quot;;\n    }\n}\n</code></pre>\n<p>Dispatcher Servlet Config</p>\n<pre><code>public class DispServler extends AbstractAnnotationConfigDispatcherServletInitializer{\n\n    @Override\n    protected Class&lt;?&gt;[] getRootConfigClasses() {\n        // TODO Auto-generated method stub\n        return null;\n    }\n\n    @Override\n    protected Class&lt;?&gt;[] getServletConfigClasses() {\n        // TODO Auto-generated method stub\n        return new Class[] {ConfigurationClass.class};\n    }\n\n    @Override\n    protected String[] getServletMappings() {\n        // TODO Auto-generated method stub\n        return new String[] {&quot;/&quot;};\n    }\n\n}\n</code></pre>\n<pre><code>@Configuration\n@EnableWebMvc\n@ComponentScan(basePackages=&quot;com.veera&quot;)\npublic class ConfigurationClass {\n    \n    @Bean\n    public ViewResolver viewResolver()\n    {\n        InternalResourceViewResolver vr = new InternalResourceViewResolver();\n        vr.setPrefix(&quot;/&quot;);\n        vr.setSuffix(&quot;.jsp&quot;);\n        return vr;\n    }\n\n}\n</code></pre>\n<p>Project structure</p>\n<p><a href=\"https://i.stack.imgur.com/jsLyJ.png\" rel=\"nofollow noreferrer\">Project structure</a></p>\n<p>I have added System.out.println() statement inside my mapping method\nbut it is not printing my that statement in console also.</p>\n<pre><code>@Controller\npublic class HomeController {\n\n    @GetMapping(&quot;/&quot;)\n    public String home()\n    {\n        System.out.println(&quot;jjjjjjjjjjjjjjjjjj&quot;);\n        return &quot;home&quot;;\n    }\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/H3ij4.png\" rel=\"nofollow noreferrer\">console log</a></p>\n"},{"tags":["java","mysql","itext"],"comments":[{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1437716141,"post_id":31602859,"comment_id":51156496,"body_markdown":"`if(rs.next()){` should probably be `while(rs.next()){`...","body":"<code>if(rs.next()){</code> should probably be <code>while(rs.next()){</code>..."},{"owner":{"account_id":3659853,"reputation":463,"user_id":3049985,"accept_rate":25,"display_name":"Shri Suresh"},"score":1,"creation_date":1437716244,"post_id":31602859,"comment_id":51156533,"body_markdown":"Use `while(rs.next())` instead of `if(rs.next())`","body":"Use <code>while(rs.next())</code> instead of <code>if(rs.next())</code>"}],"answers":[{"tags":[],"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1437716210,"creation_date":1437716210,"answer_id":31602921,"question_id":31602859,"body_markdown":"You have to use a loop instead of an if statement:\r\n\r\n          while(rs.next()){\r\n                \r\n                String v1 = rs.getString(&quot;SupplierID&quot;);\r\n                String v2 = rs.getString(&quot;SupplierName&quot;);\r\n                String v3 = rs.getString(&quot;Address&quot;);\r\n                String v4 = rs.getString(&quot;ContactInfo&quot;);\r\n                ....\r\nand put all of the code that should be executed once outside of this loop.","title":"Getting MySQL database table in to a Itext pdf report in Java","body":"<p>You have to use a loop instead of an if statement:</p>\n\n<pre><code>      while(rs.next()){\n\n            String v1 = rs.getString(\"SupplierID\");\n            String v2 = rs.getString(\"SupplierName\");\n            String v3 = rs.getString(\"Address\");\n            String v4 = rs.getString(\"ContactInfo\");\n            ....\n</code></pre>\n\n<p>and put all of the code that should be executed once outside of this loop.</p>\n"},{"tags":[],"owner":{"account_id":6002319,"reputation":437,"user_id":4715181,"display_name":"Sunil"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1437717214,"creation_date":1437717214,"answer_id":31603151,"question_id":31602859,"body_markdown":"use `while` instead of `if` after create object of `Document`.use following code section .it should work for you.\r\n\r\n\t                try {\r\n\t                    Document pdfsup = new Document();\r\n\t                    PdfWriter.getInstance(pdfsup, new FileOutputStream(new File(chooser.getSelectedFile(),&quot;Supplier Details Report.pdf&quot;)));\r\n\r\n\t                    pdfsup.open();\r\n\t                    Image imgsup = Image.getInstance(&quot;hedder.png&quot;);\r\n\t                    // pdfsup.add(new Paragraph(&quot;Suppliers&quot;));\r\n\t                    pdfsup.add(imgsup);\r\n\t                    pdfsup.add(new Paragraph(&quot;Supplier Details Report&quot;,FontFactory.getFont(FontFactory.TIMES_BOLD, 18, Font.BOLD, BaseColor.BLUE)));\r\n\t                    pdfsup.add(new Paragraph(new Date().toString()));\r\n\t                    pdfsup.add(new Paragraph(&quot;----------------------------------------------------------------------------------------------------------------&quot;));\r\n\r\n\t                    PdfPTable tablesup= new PdfPTable(4);\r\n\r\n\t                    PdfPCell cell = new PdfPCell(new Paragraph(&quot;Supplier Information&quot;));\r\n\t                    cell.setColspan(8);\r\n\t                    cell.setHorizontalAlignment(Element.ALIGN_CENTER);\r\n\t                    cell.setBackgroundColor(BaseColor.CYAN);\r\n\r\n\t                    tablesup.addCell(&quot;Supplier ID&quot;);\r\n\t                    tablesup.addCell(&quot;Supplier Name&quot;);\r\n\t                    tablesup.addCell(&quot;Address&quot;);\r\n\t                    tablesup.addCell(&quot;Contact Info&quot;);\r\n\t                    \r\n\t                    tablesup.addCell(cell);\r\n\t                    while(rs.next()){\r\n\r\n\t    \t                String v1 = rs.getString(&quot;SupplierID&quot;);\r\n\t    \t                String v2 = rs.getString(&quot;SupplierName&quot;);\r\n\t    \t                String v3 = rs.getString(&quot;Address&quot;);\r\n\t    \t                String v4 = rs.getString(&quot;ContactInfo&quot;);\r\n\r\n\r\n\t                    \r\n\t                    tablesup.addCell(v1);\r\n\t                    tablesup.addCell(v2);\r\n\t                    tablesup.addCell(v3);\r\n\t                    tablesup.addCell(v4);\r\n\t                    pdfsup.add(tablesup);\r\n\t                    } catch (SQLException ex) {\r\n\t        \t            //Logger.getLogger(Backup.class.getName()).log(Level.SEVERE, null, ex);\r\n\t        \t        }\r\n\t                    pdfsup.close();\r\n\r\n\t                    JOptionPane.showMessageDialog(null, &quot;Report Saved...&quot;);\r\n\r\n\r\n\t                } catch (DocumentException ex) {\r\n\t                   Logger.getLogger(Backup.class.getName()).log(Level.SEVERE, null, ex);\r\n\t                } catch (FileNotFoundException ex) {\r\n\t                   Logger.getLogger(Backup.class.getName()).log(Level.SEVERE, null, ex);\r\n\t                } catch (IOException ex) {\r\n\t                    //Logger.getLogger(Backup.class.getName()).log(Level.SEVERE, null, ex);\r\n\t                }","title":"Getting MySQL database table in to a Itext pdf report in Java","body":"<p>use <code>while</code> instead of <code>if</code> after create object of <code>Document</code>.use following code section .it should work for you.</p>\n\n<pre><code>                try {\n                    Document pdfsup = new Document();\n                    PdfWriter.getInstance(pdfsup, new FileOutputStream(new File(chooser.getSelectedFile(),\"Supplier Details Report.pdf\")));\n\n                    pdfsup.open();\n                    Image imgsup = Image.getInstance(\"hedder.png\");\n                    // pdfsup.add(new Paragraph(\"Suppliers\"));\n                    pdfsup.add(imgsup);\n                    pdfsup.add(new Paragraph(\"Supplier Details Report\",FontFactory.getFont(FontFactory.TIMES_BOLD, 18, Font.BOLD, BaseColor.BLUE)));\n                    pdfsup.add(new Paragraph(new Date().toString()));\n                    pdfsup.add(new Paragraph(\"----------------------------------------------------------------------------------------------------------------\"));\n\n                    PdfPTable tablesup= new PdfPTable(4);\n\n                    PdfPCell cell = new PdfPCell(new Paragraph(\"Supplier Information\"));\n                    cell.setColspan(8);\n                    cell.setHorizontalAlignment(Element.ALIGN_CENTER);\n                    cell.setBackgroundColor(BaseColor.CYAN);\n\n                    tablesup.addCell(\"Supplier ID\");\n                    tablesup.addCell(\"Supplier Name\");\n                    tablesup.addCell(\"Address\");\n                    tablesup.addCell(\"Contact Info\");\n\n                    tablesup.addCell(cell);\n                    while(rs.next()){\n\n                        String v1 = rs.getString(\"SupplierID\");\n                        String v2 = rs.getString(\"SupplierName\");\n                        String v3 = rs.getString(\"Address\");\n                        String v4 = rs.getString(\"ContactInfo\");\n\n\n\n                    tablesup.addCell(v1);\n                    tablesup.addCell(v2);\n                    tablesup.addCell(v3);\n                    tablesup.addCell(v4);\n                    pdfsup.add(tablesup);\n                    } catch (SQLException ex) {\n                        //Logger.getLogger(Backup.class.getName()).log(Level.SEVERE, null, ex);\n                    }\n                    pdfsup.close();\n\n                    JOptionPane.showMessageDialog(null, \"Report Saved...\");\n\n\n                } catch (DocumentException ex) {\n                   Logger.getLogger(Backup.class.getName()).log(Level.SEVERE, null, ex);\n                } catch (FileNotFoundException ex) {\n                   Logger.getLogger(Backup.class.getName()).log(Level.SEVERE, null, ex);\n                } catch (IOException ex) {\n                    //Logger.getLogger(Backup.class.getName()).log(Level.SEVERE, null, ex);\n                }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6419070,"reputation":1276,"user_id":4976267,"accept_rate":38,"display_name":"tenten"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1437719337,"creation_date":1437719337,"answer_id":31603644,"question_id":31602859,"body_markdown":"I came up with this solution.. help with previous answers of course ..\r\n\r\n    PdfPTable tablesup= new PdfPTable(4);\r\n                        \r\n                        PdfPCell cell = new PdfPCell(new Paragraph(&quot;Supplier Information&quot;));\r\n                        cell.setColspan(8);\r\n                        cell.setHorizontalAlignment(Element.ALIGN_CENTER);\r\n                        cell.setBackgroundColor(BaseColor.CYAN);\r\n                        \r\n                        tablesup.addCell(cell);\r\n                        \r\n                        tablesup.addCell(&quot;Supplier ID&quot;);\r\n                        tablesup.addCell(&quot;Supplier Name&quot;);\r\n                        tablesup.addCell(&quot;Address&quot;);\r\n                        tablesup.addCell(&quot;Contact Info&quot;);\r\n                         \r\n                    while(rs.next()){\r\n                    \r\n                    String v1 = rs.getString(&quot;SupplierID&quot;);\r\n                    String v2 = rs.getString(&quot;SupplierName&quot;);\r\n                    String v3 = rs.getString(&quot;Address&quot;);\r\n                    String v4 = rs.getString(&quot;ContactInfo&quot;);\r\n                        \r\n                    tablesup.addCell(v1);\r\n                    tablesup.addCell(v2);\r\n                    tablesup.addCell(v3);\r\n                    tablesup.addCell(v4); \r\n                         \r\n                    }\r\n                    \r\n                    pdfsup.add(tablesup);\r\n                    pdfsup.close();\r\n                    JOptionPane.showMessageDialog(null, &quot;Report Saved...&quot;);","title":"Getting MySQL database table in to a Itext pdf report in Java","body":"<p>I came up with this solution.. help with previous answers of course ..</p>\n\n<pre><code>PdfPTable tablesup= new PdfPTable(4);\n\n                    PdfPCell cell = new PdfPCell(new Paragraph(\"Supplier Information\"));\n                    cell.setColspan(8);\n                    cell.setHorizontalAlignment(Element.ALIGN_CENTER);\n                    cell.setBackgroundColor(BaseColor.CYAN);\n\n                    tablesup.addCell(cell);\n\n                    tablesup.addCell(\"Supplier ID\");\n                    tablesup.addCell(\"Supplier Name\");\n                    tablesup.addCell(\"Address\");\n                    tablesup.addCell(\"Contact Info\");\n\n                while(rs.next()){\n\n                String v1 = rs.getString(\"SupplierID\");\n                String v2 = rs.getString(\"SupplierName\");\n                String v3 = rs.getString(\"Address\");\n                String v4 = rs.getString(\"ContactInfo\");\n\n                tablesup.addCell(v1);\n                tablesup.addCell(v2);\n                tablesup.addCell(v3);\n                tablesup.addCell(v4); \n\n                }\n\n                pdfsup.add(tablesup);\n                pdfsup.close();\n                JOptionPane.showMessageDialog(null, \"Report Saved...\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":28924558,"reputation":1,"user_id":22154743,"display_name":"Takue"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689097812,"creation_date":1689097812,"answer_id":76664575,"question_id":31602859,"body_markdown":"use this :\r\n\r\n`while(rs.next()){}`\r\n\r\n to loop through your table cells.\r\n\r\nThe code you just displayed there will only display the first row of the data only.\r\n\r\n`if(rs.next()){}` should be used when you want to check if an entry exists in the database.","title":"Getting MySQL database table in to a Itext pdf report in Java","body":"<p>use this :</p>\n<p><code>while(rs.next()){}</code></p>\n<p>to loop through your table cells.</p>\n<p>The code you just displayed there will only display the first row of the data only.</p>\n<p><code>if(rs.next()){}</code> should be used when you want to check if an entry exists in the database.</p>\n"}],"owner":{"account_id":6419070,"reputation":1276,"user_id":4976267,"accept_rate":38,"display_name":"tenten"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5068,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":31603644,"answer_count":4,"score":1,"last_activity_date":1689097812,"creation_date":1437715920,"question_id":31602859,"body_markdown":"I want to connect MySQL database table in to Itext report.I coded but only 1st record of the database table shows in the report. I want to show full database table in the report.\r\n\r\nMy code and screenshot of the generated report..\r\n\r\n    private void backupOKActionPerformed(java.awt.event.ActionEvent evt) {                                         \r\n        int result;\r\n        \r\n        Date nowdate = new Date(System.currentTimeMillis());  \r\n        Date backday  =  backup_date.getDate();\r\n      \r\n        \r\n       \r\n        if(backday==null){//checking the date is null or not\r\n            JOptionPane.showMessageDialog(null, &quot;Please Enter the Date ...&quot;);\r\n            \r\n        }else if(!backday.before(nowdate)){//checking given date before todays date or not\r\n            JOptionPane.showMessageDialog(null, &quot;Please Enter Date before Todays date...&quot;);\r\n            \r\n        }else{\r\n            try {\r\n                // backup function goes here\r\n                //supplier info backup file fromthe mysql database\r\n                \r\n                String sql = &quot;Select * from supplierinfo&quot;;\r\n                \r\n                \r\n                pst=conn.prepareStatement(sql);\r\n                rs=pst.executeQuery();\r\n                \r\n                if(rs.next()){\r\n                    \r\n                    String v1 = rs.getString(&quot;SupplierID&quot;);\r\n                    String v2 = rs.getString(&quot;SupplierName&quot;);\r\n                    String v3 = rs.getString(&quot;Address&quot;);\r\n                    String v4 = rs.getString(&quot;ContactInfo&quot;);\r\n                    \r\n                \r\n                chooser = new JFileChooser();\r\n                chooser.setCurrentDirectory(new java.io.File(&quot;.&quot;));\r\n                chooser.setDialogTitle(&quot;Save Backup&quot;);\r\n                chooser.setApproveButtonText(&quot;Save&quot;);\r\n                //disables the all filesoptioning here\r\n                chooser.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);\r\n                chooser.setAcceptAllFileFilterUsed(false);\r\n                \r\n                if(chooser.showOpenDialog(this)==JFileChooser.APPROVE_OPTION){\r\n    //                System.out.println(&quot;getCurrentDirectory(): &quot;+ chooser.getCurrentDirectory());\r\n    //                System.out.print(&quot;getSelectedFile() : &quot;+chooser.getSelectedFile());\r\n                    \r\n                    \r\n                    // creating the pdf for supplier details using itext\r\n                    \r\n                    try {\r\n                        Document pdfsup = new Document();\r\n                        PdfWriter.getInstance(pdfsup, new FileOutputStream(new File(chooser.getSelectedFile(),&quot;Supplier Details Report.pdf&quot;)));\r\n                        \r\n                        pdfsup.open();\r\n                        Image imgsup = Image.getInstance(&quot;hedder.png&quot;);\r\n                        // pdfsup.add(new Paragraph(&quot;Suppliers&quot;));\r\n                        pdfsup.add(imgsup);\r\n                        pdfsup.add(new Paragraph(&quot;Supplier Details Report&quot;,FontFactory.getFont(FontFactory.TIMES_BOLD, 18, Font.BOLD, BaseColor.BLUE)));\r\n                        pdfsup.add(new Paragraph(new Date().toString()));\r\n                        pdfsup.add(new Paragraph(&quot;----------------------------------------------------------------------------------------------------------------&quot;));\r\n                        \r\n                        PdfPTable tablesup= new PdfPTable(4);\r\n                        \r\n                        PdfPCell cell = new PdfPCell(new Paragraph(&quot;Supplier Information&quot;));\r\n                        cell.setColspan(8);\r\n                        cell.setHorizontalAlignment(Element.ALIGN_CENTER);\r\n                        cell.setBackgroundColor(BaseColor.CYAN);\r\n                        \r\n                        tablesup.addCell(cell);\r\n                        \r\n                        tablesup.addCell(&quot;Supplier ID&quot;);\r\n                        tablesup.addCell(v1);\r\n                        tablesup.addCell(&quot;Supplier Name&quot;);\r\n                        tablesup.addCell(v2);\r\n                        tablesup.addCell(&quot;Address&quot;);\r\n                        tablesup.addCell(v3);\r\n                        tablesup.addCell(&quot;Contact Info&quot;);\r\n                        tablesup.addCell(v4);\r\n                        pdfsup.add(tablesup);\r\n                        \r\n                        pdfsup.close();\r\n                        \r\n                        JOptionPane.showMessageDialog(null, &quot;Report Saved...&quot;);\r\n                        \r\n                        \r\n                    } catch (DocumentException ex) {\r\n                        Logger.getLogger(Backup.class.getName()).log(Level.SEVERE, null, ex);\r\n                    } catch (FileNotFoundException ex) {\r\n                        Logger.getLogger(Backup.class.getName()).log(Level.SEVERE, null, ex);\r\n                    } catch (IOException ex) {\r\n                        Logger.getLogger(Backup.class.getName()).log(Level.SEVERE, null, ex);\r\n                    }\r\n                }else{\r\n                    System.out.println(&quot;No Selection&quot;);\r\n                }\r\n                }\r\n             } catch (SQLException ex) {\r\n                Logger.getLogger(Backup.class.getName()).log(Level.SEVERE, null, ex);\r\n            }\r\n        }\r\n        \r\n        \r\n    } \r\n\r\n\r\n\r\nEdited : **Note : In my database table address and contact info is null for the first supplier**\r\n\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/JC3ad.png","title":"Getting MySQL database table in to a Itext pdf report in Java","body":"<p>I want to connect MySQL database table in to Itext report.I coded but only 1st record of the database table shows in the report. I want to show full database table in the report.</p>\n\n<p>My code and screenshot of the generated report..</p>\n\n<pre><code>private void backupOKActionPerformed(java.awt.event.ActionEvent evt) {                                         \n    int result;\n\n    Date nowdate = new Date(System.currentTimeMillis());  \n    Date backday  =  backup_date.getDate();\n\n\n\n    if(backday==null){//checking the date is null or not\n        JOptionPane.showMessageDialog(null, \"Please Enter the Date ...\");\n\n    }else if(!backday.before(nowdate)){//checking given date before todays date or not\n        JOptionPane.showMessageDialog(null, \"Please Enter Date before Todays date...\");\n\n    }else{\n        try {\n            // backup function goes here\n            //supplier info backup file fromthe mysql database\n\n            String sql = \"Select * from supplierinfo\";\n\n\n            pst=conn.prepareStatement(sql);\n            rs=pst.executeQuery();\n\n            if(rs.next()){\n\n                String v1 = rs.getString(\"SupplierID\");\n                String v2 = rs.getString(\"SupplierName\");\n                String v3 = rs.getString(\"Address\");\n                String v4 = rs.getString(\"ContactInfo\");\n\n\n            chooser = new JFileChooser();\n            chooser.setCurrentDirectory(new java.io.File(\".\"));\n            chooser.setDialogTitle(\"Save Backup\");\n            chooser.setApproveButtonText(\"Save\");\n            //disables the all filesoptioning here\n            chooser.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);\n            chooser.setAcceptAllFileFilterUsed(false);\n\n            if(chooser.showOpenDialog(this)==JFileChooser.APPROVE_OPTION){\n//                System.out.println(\"getCurrentDirectory(): \"+ chooser.getCurrentDirectory());\n//                System.out.print(\"getSelectedFile() : \"+chooser.getSelectedFile());\n\n\n                // creating the pdf for supplier details using itext\n\n                try {\n                    Document pdfsup = new Document();\n                    PdfWriter.getInstance(pdfsup, new FileOutputStream(new File(chooser.getSelectedFile(),\"Supplier Details Report.pdf\")));\n\n                    pdfsup.open();\n                    Image imgsup = Image.getInstance(\"hedder.png\");\n                    // pdfsup.add(new Paragraph(\"Suppliers\"));\n                    pdfsup.add(imgsup);\n                    pdfsup.add(new Paragraph(\"Supplier Details Report\",FontFactory.getFont(FontFactory.TIMES_BOLD, 18, Font.BOLD, BaseColor.BLUE)));\n                    pdfsup.add(new Paragraph(new Date().toString()));\n                    pdfsup.add(new Paragraph(\"----------------------------------------------------------------------------------------------------------------\"));\n\n                    PdfPTable tablesup= new PdfPTable(4);\n\n                    PdfPCell cell = new PdfPCell(new Paragraph(\"Supplier Information\"));\n                    cell.setColspan(8);\n                    cell.setHorizontalAlignment(Element.ALIGN_CENTER);\n                    cell.setBackgroundColor(BaseColor.CYAN);\n\n                    tablesup.addCell(cell);\n\n                    tablesup.addCell(\"Supplier ID\");\n                    tablesup.addCell(v1);\n                    tablesup.addCell(\"Supplier Name\");\n                    tablesup.addCell(v2);\n                    tablesup.addCell(\"Address\");\n                    tablesup.addCell(v3);\n                    tablesup.addCell(\"Contact Info\");\n                    tablesup.addCell(v4);\n                    pdfsup.add(tablesup);\n\n                    pdfsup.close();\n\n                    JOptionPane.showMessageDialog(null, \"Report Saved...\");\n\n\n                } catch (DocumentException ex) {\n                    Logger.getLogger(Backup.class.getName()).log(Level.SEVERE, null, ex);\n                } catch (FileNotFoundException ex) {\n                    Logger.getLogger(Backup.class.getName()).log(Level.SEVERE, null, ex);\n                } catch (IOException ex) {\n                    Logger.getLogger(Backup.class.getName()).log(Level.SEVERE, null, ex);\n                }\n            }else{\n                System.out.println(\"No Selection\");\n            }\n            }\n         } catch (SQLException ex) {\n            Logger.getLogger(Backup.class.getName()).log(Level.SEVERE, null, ex);\n        }\n    }\n\n\n} \n</code></pre>\n\n<p>Edited : <strong>Note : In my database table address and contact info is null for the first supplier</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/JC3ad.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JC3ad.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":["java","kotlin","gradle","java-bytecode-asm"],"comments":[{"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"score":0,"creation_date":1689108210,"post_id":76657512,"comment_id":135165969,"body_markdown":"You basically tell gradle to use your modified bytecode to produce the modified bytecode.","body":"You basically tell gradle to use your modified bytecode to produce the modified bytecode."}],"owner":{"account_id":292835,"reputation":6407,"user_id":595833,"accept_rate":94,"display_name":"bobbyrne01"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689097797,"creation_date":1689025350,"question_id":76657512,"body_markdown":"I want to write a Gradle task that is executed during build, which will invoke a Java class that performs bytecode modifications based on logic using the ASM library.\r\n\r\nBut I&#39;m getting this error when running build task:\r\n\r\n```\r\nCircular dependency between the following tasks:\r\n:classes\r\n\\--- :compileJava\r\n     \\--- :modifyBytecode\r\n          \\--- :classes (*)\r\n```\r\n\r\nHow can I avoid this error?\r\n\r\n`build.gradle.kts`:\r\n\r\n```\r\ndependencies {\r\n  ..\r\n  implementation(&quot;org.ow2.asm:asm:9.2&quot;)\r\n  ..\r\n}\r\n\r\ntasks.register&lt;JavaExec&gt;(&quot;modifyBytecode&quot;) {\r\n    main = &quot;com.example.CustomClassFileTransformer&quot;\r\n    classpath = sourceSets.main.get().output\r\n}\r\n\r\ntasks.getByName(&quot;compileJava&quot;).dependsOn(&quot;modifyBytecode&quot;)\r\n```\r\n\r\nInside the Java src directory this class exists which uses the ASM API:\r\n\r\n```\r\npublic class CustomClassFileTransformer implements ClassFileTransformer {\r\n    @Override\r\n    public byte[] transform(ClassLoader loader, String className, Class&lt;?&gt; classBeingRedefined,\r\n                            ProtectionDomain protectionDomain, byte[] classfileBuffer) throws IllegalClassFormatException {\r\n\r\n        // Perform modification only for the desired class\r\n        if (className.equals(&quot;com/example/MyClass&quot;)) {\r\n            ClassReader cr = new ClassReader(classfileBuffer);\r\n            ClassWriter cw = new ClassWriter(cr, ClassWriter.COMPUTE_MAXS);\r\n            ClassVisitor cv = new CustomClassVisitor(cw);\r\n            cr.accept(cv, 0);\r\n            return cw.toByteArray();\r\n        }\r\n\r\n        return classfileBuffer;\r\n    }\r\n}\r\n```","title":"Circular dependency between Gradle tasks when setting up classes to perform bytecode modifications during build","body":"<p>I want to write a Gradle task that is executed during build, which will invoke a Java class that performs bytecode modifications based on logic using the ASM library.</p>\n<p>But I'm getting this error when running build task:</p>\n<pre><code>Circular dependency between the following tasks:\n:classes\n\\--- :compileJava\n     \\--- :modifyBytecode\n          \\--- :classes (*)\n</code></pre>\n<p>How can I avoid this error?</p>\n<p><code>build.gradle.kts</code>:</p>\n<pre><code>dependencies {\n  ..\n  implementation(&quot;org.ow2.asm:asm:9.2&quot;)\n  ..\n}\n\ntasks.register&lt;JavaExec&gt;(&quot;modifyBytecode&quot;) {\n    main = &quot;com.example.CustomClassFileTransformer&quot;\n    classpath = sourceSets.main.get().output\n}\n\ntasks.getByName(&quot;compileJava&quot;).dependsOn(&quot;modifyBytecode&quot;)\n</code></pre>\n<p>Inside the Java src directory this class exists which uses the ASM API:</p>\n<pre><code>public class CustomClassFileTransformer implements ClassFileTransformer {\n    @Override\n    public byte[] transform(ClassLoader loader, String className, Class&lt;?&gt; classBeingRedefined,\n                            ProtectionDomain protectionDomain, byte[] classfileBuffer) throws IllegalClassFormatException {\n\n        // Perform modification only for the desired class\n        if (className.equals(&quot;com/example/MyClass&quot;)) {\n            ClassReader cr = new ClassReader(classfileBuffer);\n            ClassWriter cw = new ClassWriter(cr, ClassWriter.COMPUTE_MAXS);\n            ClassVisitor cv = new CustomClassVisitor(cw);\n            cr.accept(cv, 0);\n            return cw.toByteArray();\n        }\n\n        return classfileBuffer;\n    }\n}\n</code></pre>\n"},{"tags":["java","netbeans"],"comments":[{"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"score":1,"creation_date":1689116428,"post_id":76664562,"comment_id":135167080,"body_markdown":"That isn&#39;t _&quot;odd behavior&quot;_; it is the default and expected behavior, regardless of which build tool you use (Maven/Ant/Gradle). NetBeans will create a working project that will display _&quot;Hello World!&quot;_ when you run it. This is not new, because NetBeans has always done this. And creating a trivial project, building it and running it is a good way of verifying that your IDE is installed correctly. What is your actual concern? All you need to do is remove one line in `main()` and add your own code. Can you clarify what you want or expect NetBeans to do instead?","body":"That isn&#39;t <i>&quot;odd behavior&quot;</i>; it is the default and expected behavior, regardless of which build tool you use (Maven/Ant/Gradle). NetBeans will create a working project that will display <i>&quot;Hello World!&quot;</i> when you run it. This is not new, because NetBeans has always done this. And creating a trivial project, building it and running it is a good way of verifying that your IDE is installed correctly. What is your actual concern? All you need to do is remove one line in <code>main()</code> and add your own code. Can you clarify what you want or expect NetBeans to do instead?"},{"owner":{"account_id":204822,"reputation":71,"user_id":453249,"display_name":"Rudi Diezmann"},"score":0,"creation_date":1689172611,"post_id":76664562,"comment_id":135176342,"body_markdown":"Thank you. I have not used Netbeans before and was surprised and thought I had done something in error.","body":"Thank you. I have not used Netbeans before and was surprised and thought I had done something in error."}],"owner":{"account_id":204822,"reputation":71,"user_id":453249,"display_name":"Rudi Diezmann"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689097716,"creation_date":1689097716,"question_id":76664562,"body_markdown":"I just installed NetBeans 18.\r\nWhen I open it and select &quot;new Project&quot; and fill in the questions and say finish it creates a java file containing a &quot;hello world&quot; main function.\r\n\r\nI am trying to create new project and do not understand WHY NB does this or how to get rid of it.\r\n","title":"Odd behaviour with Netbeans 18 and Java","body":"<p>I just installed NetBeans 18.\nWhen I open it and select &quot;new Project&quot; and fill in the questions and say finish it creates a java file containing a &quot;hello world&quot; main function.</p>\n<p>I am trying to create new project and do not understand WHY NB does this or how to get rid of it.</p>\n"},{"tags":["java","collections","priority-queue"],"comments":[{"owner":{"account_id":357454,"reputation":77335,"user_id":697630,"accept_rate":84,"display_name":"Edwin Dalorzo"},"score":6,"creation_date":1339528081,"post_id":11003155,"comment_id":14378497,"body_markdown":"I think you should use the constructor that receives a comparator for that. Use the Collections.reverseOrder to obtain a reversed comparator.","body":"I think you should use the constructor that receives a comparator for that. Use the Collections.reverseOrder to obtain a reversed comparator."},{"owner":{"account_id":59449,"reputation":53532,"user_id":177883,"accept_rate":96,"display_name":"DarthVader"},"score":1,"creation_date":1339528120,"post_id":11003155,"comment_id":14378519,"body_markdown":"you need to pass a comparator. see http://stackoverflow.com/questions/683041/java-how-do-i-use-a-priorityqueue","body":"you need to pass a comparator. see <a href=\"http://stackoverflow.com/questions/683041/java-how-do-i-use-a-priorityqueue\" title=\"java how do i use a priorityqueue\">stackoverflow.com/questions/683041/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":2252734,"reputation":10792,"user_id":1984636,"accept_rate":62,"display_name":"sivi"},"score":5,"creation_date":1425414393,"post_id":11003198,"comment_id":45951643,"body_markdown":"maybe for a max priority q the lhs&lt;rhs returs +1;    what you wrote here is minimum q  after my testing","body":"maybe for a max priority q the lhs&lt;rhs returs +1;    what you wrote here is minimum q  after my testing"},{"owner":{"account_id":5613283,"reputation":1220,"user_id":4445422,"accept_rate":87,"display_name":"Tia"},"score":0,"creation_date":1455132046,"post_id":11003198,"comment_id":58356864,"body_markdown":"For reverse printing, that is if the highest elements are to be printed first in a priority queue, it should be `if (rhs &lt; lhs) return +1;` `if (rhs &gt; lhs) return -1;`","body":"For reverse printing, that is if the highest elements are to be printed first in a priority queue, it should be <code>if (rhs &lt; lhs) return +1;</code> <code>if (rhs &gt; lhs) return -1;</code>"},{"owner":{"account_id":235018,"reputation":364854,"user_id":501557,"accept_rate":90,"display_name":"templatetypedef"},"score":0,"creation_date":1455134540,"post_id":11003198,"comment_id":58358472,"body_markdown":"@Diksha I believe the code I have is equivalent to what you&#39;re posting. I&#39;ve just used the greater-than relation rather than less-than.","body":"@Diksha I believe the code I have is equivalent to what you&#39;re posting. I&#39;ve just used the greater-than relation rather than less-than."},{"owner":{"account_id":5613283,"reputation":1220,"user_id":4445422,"accept_rate":87,"display_name":"Tia"},"score":4,"creation_date":1456252813,"post_id":11003198,"comment_id":58857606,"body_markdown":"actually, my mistake.. I meant it should be like this: `if (lhs &lt; rhs) return +1; if (lhs &gt; rhs) return -1;`","body":"actually, my mistake.. I meant it should be like this: <code>if (lhs &lt; rhs) return +1; if (lhs &gt; rhs) return -1;</code>"},{"owner":{"account_id":135086,"reputation":709,"user_id":337666,"display_name":"Shrikant Prabhu"},"score":0,"creation_date":1527575399,"post_id":11003198,"comment_id":88164382,"body_markdown":"I had to use `public int compare(Integer lhs, Integer rhs) ` in order get rid of the error message `&quot;cannot implement compare(T,T) in Comparator&quot;`","body":"I had to use <code>public int compare(Integer lhs, Integer rhs) </code> in order get rid of the error message <code>&quot;cannot implement compare(T,T) in Comparator&quot;</code>"},{"owner":{"account_id":235018,"reputation":364854,"user_id":501557,"accept_rate":90,"display_name":"templatetypedef"},"score":1,"creation_date":1527617496,"post_id":11003198,"comment_id":88190297,"body_markdown":"@ShrikantPrabhu Good catch - that&#39;s now fixed!","body":"@ShrikantPrabhu Good catch - that&#39;s now fixed!"},{"owner":{"account_id":3906566,"reputation":1330,"user_id":3233111,"accept_rate":100,"display_name":"CharlesC"},"score":0,"creation_date":1586230223,"post_id":11003198,"comment_id":108045406,"body_markdown":"Just `return rhs - lhs` should do.","body":"Just <code>return rhs - lhs</code> should do."},{"owner":{"account_id":235018,"reputation":364854,"user_id":501557,"accept_rate":90,"display_name":"templatetypedef"},"score":0,"creation_date":1586234148,"post_id":11003198,"comment_id":108046161,"body_markdown":"@CharlesC I think (?) that you need to watch out for integer overflow with that approach in some cases. But perhaps I’m mistaken?","body":"@CharlesC I think (?) that you need to watch out for integer overflow with that approach in some cases. But perhaps I’m mistaken?"},{"owner":{"account_id":3906566,"reputation":1330,"user_id":3233111,"accept_rate":100,"display_name":"CharlesC"},"score":0,"creation_date":1586269363,"post_id":11003198,"comment_id":108062657,"body_markdown":"@templatetypedef good point, as I saw you explicit passed &lt;Integer&gt; as the type, I assumed that should not happen in the change I suggested.","body":"@templatetypedef good point, as I saw you explicit passed &lt;Integer&gt; as the type, I assumed that should not happen in the change I suggested."}],"tags":[],"owner":{"account_id":235018,"reputation":364854,"user_id":501557,"accept_rate":90,"display_name":"templatetypedef"},"comment_count":9,"down_vote_count":2,"up_vote_count":35,"is_accepted":false,"score":33,"last_activity_date":1534004397,"creation_date":1339528109,"answer_id":11003198,"question_id":11003155,"body_markdown":"You can provide a custom `Comparator` object that ranks elements in the reverse order:\r\n\r\n    PriorityQueue&lt;Integer&gt; pq = new PriorityQueue&lt;Integer&gt;(defaultSize, new Comparator&lt;Integer&gt;() {\r\n        public int compare(Integer lhs, Integer rhs) {\r\n            if (lhs &lt; rhs) return +1;\r\n            if (lhs.equals(rhs)) return 0;\r\n            return -1;\r\n        }\r\n    });\r\n\r\nNow, the priority queue will reverse all its comparisons, so you will get the maximum element rather than the minimum element.\r\n\r\nHope this helps!","title":"Change priorityQueue to max priorityqueue","body":"<p>You can provide a custom <code>Comparator</code> object that ranks elements in the reverse order:</p>\n\n<pre><code>PriorityQueue&lt;Integer&gt; pq = new PriorityQueue&lt;Integer&gt;(defaultSize, new Comparator&lt;Integer&gt;() {\n    public int compare(Integer lhs, Integer rhs) {\n        if (lhs &lt; rhs) return +1;\n        if (lhs.equals(rhs)) return 0;\n        return -1;\n    }\n});\n</code></pre>\n\n<p>Now, the priority queue will reverse all its comparisons, so you will get the maximum element rather than the minimum element.</p>\n\n<p>Hope this helps!</p>\n"},{"comments":[{"owner":{"account_id":89776,"reputation":8593,"user_id":247482,"accept_rate":80,"display_name":"flying sheep"},"score":16,"creation_date":1372961486,"post_id":11003264,"comment_id":25396844,"body_markdown":"`Collections.reverseOrder()` is also overloaded to take a comparator, so it also works if you compare custom objects.","body":"<code>Collections.reverseOrder()</code> is also overloaded to take a comparator, so it also works if you compare custom objects."},{"owner":{"account_id":4143550,"reputation":116,"user_id":3398007,"display_name":"abhisheknirmal"},"score":23,"creation_date":1463086122,"post_id":11003264,"comment_id":61926681,"body_markdown":"Java 8&#39;s PriorityQueue has a new constructor, which just takes comparator as an argument `PriorityQueue(Comparator&lt;? super E&gt; comparator)`.","body":"Java 8&#39;s PriorityQueue has a new constructor, which just takes comparator as an argument <code>PriorityQueue(Comparator&lt;? super E&gt; comparator)</code>."}],"tags":[],"owner":{"account_id":357454,"reputation":77335,"user_id":697630,"accept_rate":84,"display_name":"Edwin Dalorzo"},"comment_count":2,"down_vote_count":0,"up_vote_count":308,"is_accepted":true,"score":308,"last_activity_date":1399598636,"creation_date":1339528359,"answer_id":11003264,"question_id":11003155,"body_markdown":"How about like this:\r\n\r\n    PriorityQueue&lt;Integer&gt; queue = new PriorityQueue&lt;&gt;(10, Collections.reverseOrder());\r\n    queue.offer(1);\r\n    queue.offer(2);\r\n    queue.offer(3);\r\n    //...\r\n    \r\n    Integer val = null;\r\n    while( (val = queue.poll()) != null) {\r\n    \tSystem.out.println(val);\r\n    }\r\n\r\nThe `Collections.reverseOrder()` provides a `Comparator` that would sort the elements in the `PriorityQueue` in a the oposite order to their natural order in this case.","title":"Change priorityQueue to max priorityqueue","body":"<p>How about like this:</p>\n\n<pre><code>PriorityQueue&lt;Integer&gt; queue = new PriorityQueue&lt;&gt;(10, Collections.reverseOrder());\nqueue.offer(1);\nqueue.offer(2);\nqueue.offer(3);\n//...\n\nInteger val = null;\nwhile( (val = queue.poll()) != null) {\n    System.out.println(val);\n}\n</code></pre>\n\n<p>The <code>Collections.reverseOrder()</code> provides a <code>Comparator</code> that would sort the elements in the <code>PriorityQueue</code> in a the oposite order to their natural order in this case.</p>\n"},{"comments":[{"owner":{"account_id":10811702,"reputation":81,"user_id":7952107,"display_name":"Jackson"},"score":0,"creation_date":1653831694,"post_id":17839899,"comment_id":127942431,"body_markdown":"404. That’s an error.\n\nThe requested URL /git/javadoc/com/google/common/collect/MinMaxPriorityQueue.html was not found on this server.   Seems like the link is broken, need to get the detailed info next time.","body":"404. That’s an error.  The requested URL /git/javadoc/com/google/common/collect/MinMaxPriorityQueue.h&zwnj;&#8203;tml was not found on this server.   Seems like the link is broken, need to get the detailed info next time."}],"tags":[],"owner":{"account_id":995810,"reputation":8236,"user_id":1011791,"accept_rate":86,"display_name":"Chthonic Project"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1374683785,"creation_date":1374683785,"answer_id":17839899,"question_id":11003155,"body_markdown":"You can use `MinMaxPriorityQueue` (it&#39;s a part of the Guava library):\r\n[here&#39;s the documentation][1]. Instead of `poll()`, you need to call the `pollLast()` method.\r\n\r\n\r\n  [1]: http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/MinMaxPriorityQueue.html","title":"Change priorityQueue to max priorityqueue","body":"<p>You can use <code>MinMaxPriorityQueue</code> (it's a part of the Guava library):\n<a href=\"http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/MinMaxPriorityQueue.html\" rel=\"nofollow\">here's the documentation</a>. Instead of <code>poll()</code>, you need to call the <code>pollLast()</code> method.</p>\n"},{"tags":[],"owner":{"account_id":2639505,"reputation":77,"user_id":2283476,"display_name":"Nobal "},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1389732904,"creation_date":1389732904,"answer_id":21123823,"question_id":11003155,"body_markdown":"Here is a sample Max-Heap in Java : \r\n\r\n    PriorityQueue&lt;Integer&gt; pq1= new PriorityQueue&lt;Integer&gt;(10, new Comparator&lt;Integer&gt;() {\r\n    public int compare(Integer x, Integer y) {\r\n    if (x &lt; y) return 1;\r\n    if (x &gt; y) return -1;\r\n    return 0;\r\n    }\r\n    });\r\n    pq1.add(5);\r\n    pq1.add(10);\r\n    pq1.add(-1);\r\n    System.out.println(&quot;Peek: &quot;+pq1.peek());\r\n\r\nThe output will be 10","title":"Change priorityQueue to max priorityqueue","body":"<p>Here is a sample Max-Heap in Java : </p>\n\n<pre><code>PriorityQueue&lt;Integer&gt; pq1= new PriorityQueue&lt;Integer&gt;(10, new Comparator&lt;Integer&gt;() {\npublic int compare(Integer x, Integer y) {\nif (x &lt; y) return 1;\nif (x &gt; y) return -1;\nreturn 0;\n}\n});\npq1.add(5);\npq1.add(10);\npq1.add(-1);\nSystem.out.println(\"Peek: \"+pq1.peek());\n</code></pre>\n\n<p>The output will be 10</p>\n"},{"comments":[{"owner":{"account_id":5613283,"reputation":1220,"user_id":4445422,"accept_rate":87,"display_name":"Tia"},"score":0,"creation_date":1455131480,"post_id":28850564,"comment_id":58356476,"body_markdown":"For reverse printing, that is if the highest elements are to be printed first in a priority queue, it should be `if (rhs &lt; lhs) return +1;` if (rhs &gt; lhs) return -1;","body":"For reverse printing, that is if the highest elements are to be printed first in a priority queue, it should be <code>if (rhs &lt; lhs) return +1;</code> if (rhs &gt; lhs) return -1;"},{"owner":{"account_id":2252734,"reputation":10792,"user_id":1984636,"accept_rate":62,"display_name":"sivi"},"score":0,"creation_date":1455141735,"post_id":28850564,"comment_id":58362360,"body_markdown":"You can edit it if you like. I have no time to confirm what you wrote. In my setup what i wrote was correct","body":"You can edit it if you like. I have no time to confirm what you wrote. In my setup what i wrote was correct"}],"tags":[],"owner":{"account_id":2252734,"reputation":10792,"user_id":1984636,"accept_rate":62,"display_name":"sivi"},"comment_count":2,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1425460566,"creation_date":1425460566,"answer_id":28850564,"question_id":11003155,"body_markdown":"I just ran a Monte-Carlo simulation on both comparators on double heap sort min max and they both came to the same result:  \r\n\r\nThese are the max comparators I have used:\r\n\r\n(A) Collections built-in comparator\r\n\r\n     PriorityQueue&lt;Integer&gt; heapLow = new PriorityQueue&lt;Integer&gt;(Collections.reverseOrder());\r\n\r\n(B)  Custom comparator \r\n\r\n    PriorityQueue&lt;Integer&gt; heapLow = new PriorityQueue&lt;Integer&gt;(new Comparator&lt;Integer&gt;() {\r\n        int compare(Integer lhs, Integer rhs) {\r\n            if (rhs &gt; lhs) return +1;\r\n            if (rhs &lt; lhs) return -1;\r\n            return 0;\r\n        }\r\n    });","title":"Change priorityQueue to max priorityqueue","body":"<p>I just ran a Monte-Carlo simulation on both comparators on double heap sort min max and they both came to the same result:  </p>\n\n<p>These are the max comparators I have used:</p>\n\n<p>(A) Collections built-in comparator</p>\n\n<pre><code> PriorityQueue&lt;Integer&gt; heapLow = new PriorityQueue&lt;Integer&gt;(Collections.reverseOrder());\n</code></pre>\n\n<p>(B)  Custom comparator </p>\n\n<pre><code>PriorityQueue&lt;Integer&gt; heapLow = new PriorityQueue&lt;Integer&gt;(new Comparator&lt;Integer&gt;() {\n    int compare(Integer lhs, Integer rhs) {\n        if (rhs &gt; lhs) return +1;\n        if (rhs &lt; lhs) return -1;\n        return 0;\n    }\n});\n</code></pre>\n"},{"comments":[{"owner":{"account_id":5287266,"reputation":4064,"user_id":4220815,"accept_rate":100,"display_name":"CMedina"},"score":0,"creation_date":1457719291,"post_id":35946714,"comment_id":59550382,"body_markdown":"What is the problem ?","body":"What is the problem ?"},{"owner":{"account_id":1410625,"reputation":853,"user_id":1337299,"display_name":"Kamran"},"score":0,"creation_date":1519594464,"post_id":35946714,"comment_id":84962395,"body_markdown":"This is perfect and does exactly what was asked by turning a min heap into a max heap.","body":"This is perfect and does exactly what was asked by turning a min heap into a max heap."},{"owner":{"account_id":8550964,"reputation":3152,"user_id":6407858,"accept_rate":100,"display_name":"Yug Singh"},"score":2,"creation_date":1552593542,"post_id":35946714,"comment_id":97081291,"body_markdown":"using `b-a` can cause `overflow` so should avoid using it and should use `Collections.reverseOrder();` as a comparator or replace b-a with `Integer.compare(a,b);` which has been added in `Java 8`","body":"using <code>b-a</code> can cause <code>overflow</code> so should avoid using it and should use <code>Collections.reverseOrder();</code> as a comparator or replace b-a with <code>Integer.compare(a,b);</code> which has been added in <code>Java 8</code>"}],"tags":[],"owner":{"account_id":4737734,"reputation":169,"user_id":5255151,"display_name":"Varun Juneja"},"comment_count":3,"down_vote_count":1,"up_vote_count":17,"is_accepted":false,"score":16,"last_activity_date":1530263032,"creation_date":1457718558,"answer_id":35946714,"question_id":11003155,"body_markdown":"    PriorityQueue&lt;Integer&gt; pq = new PriorityQueue&lt;Integer&gt; (\r\n      new Comparator&lt;Integer&gt; () {\r\n        public int compare(Integer a, Integer b) {\r\n           return b - a;\r\n        }\r\n      }\r\n    );","title":"Change priorityQueue to max priorityqueue","body":"<pre><code>PriorityQueue&lt;Integer&gt; pq = new PriorityQueue&lt;Integer&gt; (\n  new Comparator&lt;Integer&gt; () {\n    public int compare(Integer a, Integer b) {\n       return b - a;\n    }\n  }\n);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8468584,"reputation":25,"user_id":6352030,"display_name":"striker28"},"comment_count":0,"down_vote_count":3,"up_vote_count":3,"is_accepted":false,"score":0,"last_activity_date":1463587812,"creation_date":1463587420,"answer_id":37304773,"question_id":11003155,"body_markdown":"You can try pushing elements with reverse sign. Eg: To add a=2 &amp; b=5 and then poll b=5.\r\n  \r\n    PriorityQueue&lt;Integer&gt;  pq = new PriorityQueue&lt;&gt;();\r\n    pq.add(-a);\r\n    pq.add(-b);\r\n    System.out.print(-pq.poll());\r\n\r\nOnce you poll the head of the queue, reverse the sign for your usage.\r\nThis will print 5 (larger element). Can be used in naive implementations. Definitely not a reliable fix. I don&#39;t recommend it.","title":"Change priorityQueue to max priorityqueue","body":"<p>You can try pushing elements with reverse sign. Eg: To add a=2 &amp; b=5 and then poll b=5.</p>\n\n<pre><code>PriorityQueue&lt;Integer&gt;  pq = new PriorityQueue&lt;&gt;();\npq.add(-a);\npq.add(-b);\nSystem.out.print(-pq.poll());\n</code></pre>\n\n<p>Once you poll the head of the queue, reverse the sign for your usage.\nThis will print 5 (larger element). Can be used in naive implementations. Definitely not a reliable fix. I don't recommend it.</p>\n"},{"comments":[{"owner":{"account_id":1609700,"reputation":566,"user_id":1489056,"accept_rate":75,"display_name":"Edi Bice"},"score":0,"creation_date":1498160683,"post_id":38286393,"comment_id":76399109,"body_markdown":"lambda function, names its input parameters x and y and returns y-x, which is basically what the int comparator class does except it returns x-y","body":"lambda function, names its input parameters x and y and returns y-x, which is basically what the int comparator class does except it returns x-y"},{"owner":{"account_id":2494944,"reputation":351,"user_id":2171644,"display_name":"Фима Гирин"},"score":27,"creation_date":1516482768,"post_id":38286393,"comment_id":83709044,"body_markdown":"The comparator like `(x, y) -&gt; y - x` may be not appropriate for long integers due to overflow. For example, numbers y = Integer.MIN_VALUE and x = 5 results in positive number.\n\nIt is better to use  `new PriorityQueue&lt;&gt;((x, y) -&gt; Integer.compare(y, x))`.\nThough, the better solution is given by @Edwin Dalorzo to use `Collections.reverseOrder()`.","body":"The comparator like <code>(x, y) -&gt; y - x</code> may be not appropriate for long integers due to overflow. For example, numbers y = Integer.MIN_VALUE and x = 5 results in positive number.  It is better to use  <code>new PriorityQueue&lt;&gt;((x, y) -&gt; Integer.compare(y, x))</code>. Though, the better solution is given by @Edwin Dalorzo to use <code>Collections.reverseOrder()</code>."},{"owner":{"account_id":7708908,"reputation":1402,"user_id":5838971,"display_name":"Guangtong Shen"},"score":1,"creation_date":1516654239,"post_id":38286393,"comment_id":83767836,"body_markdown":"@ФимаГирин That&#39;s true. -2147483648 - 1 becomes 2147483647","body":"@ФимаГирин That&#39;s true. -2147483648 - 1 becomes 2147483647"}],"tags":[],"owner":{"account_id":7708908,"reputation":1402,"user_id":5838971,"display_name":"Guangtong Shen"},"comment_count":3,"down_vote_count":2,"up_vote_count":116,"is_accepted":false,"score":114,"last_activity_date":1591585756,"creation_date":1468098633,"answer_id":38286393,"question_id":11003155,"body_markdown":"You can use lambda expression since Java 8.\r\n\r\nThe following code will print 10, the larger.\r\n\r\n    // There is overflow problem when using simple lambda as comparator, as pointed out by Фима Гирин.\r\n    // PriorityQueue&lt;Integer&gt; pq = new PriorityQueue&lt;&gt;((x, y) -&gt; y - x);\r\n\r\n    PriorityQueue&lt;Integer&gt; pq =new PriorityQueue&lt;&gt;((x, y) -&gt; Integer.compare(y, x));\r\n\r\n\tpq.add(10);\r\n\tpq.add(5);\r\n\tSystem.out.println(pq.peek());\r\n\r\nThe lambda function will take two Integers as input parameters, subtract them from each other, and return the arithmetic result. The lambda function implements the Functional Interface, `Comparator&lt;T&gt;`. (This is used in place, as opposed to an anonymous class or a discrete implementation.)","title":"Change priorityQueue to max priorityqueue","body":"<p>You can use lambda expression since Java 8.</p>\n\n<p>The following code will print 10, the larger.</p>\n\n<pre><code>// There is overflow problem when using simple lambda as comparator, as pointed out by Фима Гирин.\n// PriorityQueue&lt;Integer&gt; pq = new PriorityQueue&lt;&gt;((x, y) -&gt; y - x);\n\nPriorityQueue&lt;Integer&gt; pq =new PriorityQueue&lt;&gt;((x, y) -&gt; Integer.compare(y, x));\n\npq.add(10);\npq.add(5);\nSystem.out.println(pq.peek());\n</code></pre>\n\n<p>The lambda function will take two Integers as input parameters, subtract them from each other, and return the arithmetic result. The lambda function implements the Functional Interface, <code>Comparator&lt;T&gt;</code>. (This is used in place, as opposed to an anonymous class or a discrete implementation.)</p>\n"},{"tags":[],"owner":{"account_id":211601,"reputation":111,"user_id":4015775,"display_name":"rohan"},"comment_count":0,"down_vote_count":1,"up_vote_count":10,"is_accepted":false,"score":9,"last_activity_date":1479187163,"creation_date":1479187163,"answer_id":40602548,"question_id":11003155,"body_markdown":"The elements of the priority queue are ordered according to their natural ordering, or by a Comparator provided at queue construction time.\r\n\r\nThe Comparator should override the compare method.\r\n\r\n    int compare(T o1, T o2)\r\n\r\nDefault compare method returns a negative integer, zero, or a positive integer as the first argument is less than, equal to, or greater than the second.\r\n\r\nThe Default PriorityQueue provided by Java is Min-Heap, If you want a max heap following is the code\r\n\r\n    public class Sample {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tPriorityQueue&lt;Integer&gt; q = new PriorityQueue&lt;Integer&gt;(new Comparator&lt;Integer&gt;() {\r\n    \r\n    \t\t\tpublic int compare(Integer lhs, Integer rhs) {\r\n    \t\t\t\tif(lhs&lt;rhs) return +1;\r\n    \t\t\t\tif(lhs&gt;rhs) return -1;\r\n    \t\t\t\treturn 0;\r\n    \t\t\t}\r\n    \t\t});\r\n    \t\tq.add(13);\r\n    \t\tq.add(4);q.add(14);q.add(-4);q.add(1);\r\n    \t\twhile (!q.isEmpty()) {\r\n    \t\t\tSystem.out.println(q.poll());\r\n    \t\t}\r\n    \t}\r\n    \r\n    }\r\n\r\nReference :https://docs.oracle.com/javase/7/docs/api/java/util/PriorityQueue.html#comparator()\r\n","title":"Change priorityQueue to max priorityqueue","body":"<p>The elements of the priority queue are ordered according to their natural ordering, or by a Comparator provided at queue construction time.</p>\n\n<p>The Comparator should override the compare method.</p>\n\n<pre><code>int compare(T o1, T o2)\n</code></pre>\n\n<p>Default compare method returns a negative integer, zero, or a positive integer as the first argument is less than, equal to, or greater than the second.</p>\n\n<p>The Default PriorityQueue provided by Java is Min-Heap, If you want a max heap following is the code</p>\n\n<pre><code>public class Sample {\n    public static void main(String[] args) {\n        PriorityQueue&lt;Integer&gt; q = new PriorityQueue&lt;Integer&gt;(new Comparator&lt;Integer&gt;() {\n\n            public int compare(Integer lhs, Integer rhs) {\n                if(lhs&lt;rhs) return +1;\n                if(lhs&gt;rhs) return -1;\n                return 0;\n            }\n        });\n        q.add(13);\n        q.add(4);q.add(14);q.add(-4);q.add(1);\n        while (!q.isEmpty()) {\n            System.out.println(q.poll());\n        }\n    }\n\n}\n</code></pre>\n\n<p>Reference :<a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/PriorityQueue.html#comparator()\" rel=\"noreferrer\">https://docs.oracle.com/javase/7/docs/api/java/util/PriorityQueue.html#comparator()</a></p>\n"},{"tags":[],"owner":{"account_id":7815822,"reputation":8701,"user_id":5910563,"display_name":"Horia Coman"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1514045215,"creation_date":1514045215,"answer_id":47953983,"question_id":11003155,"body_markdown":"You can try something like:\r\n\r\n    PriorityQueue&lt;Integer&gt; pq = new PriorityQueue&lt;&gt;((x, y) -&gt; -1 * Integer.compare(x, y));\r\n\r\nWhich works for any other base comparison function you might have.","title":"Change priorityQueue to max priorityqueue","body":"<p>You can try something like:</p>\n\n<pre><code>PriorityQueue&lt;Integer&gt; pq = new PriorityQueue&lt;&gt;((x, y) -&gt; -1 * Integer.compare(x, y));\n</code></pre>\n\n<p>Which works for any other base comparison function you might have.</p>\n"},{"tags":[],"owner":{"account_id":7097965,"reputation":331,"user_id":5430741,"display_name":"Anshu Shekhar"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1530754672,"creation_date":1530754672,"answer_id":51182361,"question_id":11003155,"body_markdown":"This can be achieved by the below code in Java 8 which has introduced a constructor which only takes a comparator.\r\n\r\n    PriorityQueue&lt;Integer&gt; maxPriorityQ = new PriorityQueue&lt;Integer&gt;(Collections.reverseOrder());","title":"Change priorityQueue to max priorityqueue","body":"<p>This can be achieved by the below code in Java 8 which has introduced a constructor which only takes a comparator.</p>\n\n<pre><code>PriorityQueue&lt;Integer&gt; maxPriorityQ = new PriorityQueue&lt;Integer&gt;(Collections.reverseOrder());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1336729,"reputation":799,"user_id":1279301,"accept_rate":67,"display_name":"Sumit Kumar Saha"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1543473163,"creation_date":1543473163,"answer_id":53533110,"question_id":11003155,"body_markdown":"    PriorityQueue&lt;Integer&gt; lowers = new PriorityQueue&lt;&gt;((o1, o2) -&gt; -1 * o1.compareTo(o2));","title":"Change priorityQueue to max priorityqueue","body":"<pre><code>PriorityQueue&lt;Integer&gt; lowers = new PriorityQueue&lt;&gt;((o1, o2) -&gt; -1 * o1.compareTo(o2));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8004185,"reputation":1391,"user_id":6037956,"display_name":"Soudipta Dutta"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1550674637,"creation_date":1550674075,"answer_id":54789022,"question_id":11003155,"body_markdown":"Change PriorityQueue to MAX PriorityQueue\r\nMethod 1 : Queue&lt;Integer&gt; pq = new PriorityQueue&lt;&gt;(Collections.reverseOrder());\r\nMethod 2 : Queue&lt;Integer&gt; pq1 = new PriorityQueue&lt;&gt;((a, b) -&gt; b - a);\r\nLet&#39;s look at few Examples:\r\n\r\n    public class Example1 {\r\n    \tpublic static void main(String[] args) {\r\n    \r\n    \t\tList&lt;Integer&gt; ints = Arrays.asList(222, 555, 666, 333, 111, 888, 777, 444);\r\n    \t\tQueue&lt;Integer&gt; pq = new PriorityQueue&lt;&gt;(Collections.reverseOrder());\r\n    \t\tpq.addAll(ints);\r\n    \t\tSystem.out.println(&quot;Priority Queue =&gt; &quot; + pq);\r\n    \t\tSystem.out.println(&quot;Max element in the list =&gt; &quot; + pq.peek());\r\n    \t\tSystem.out.println(&quot;......................&quot;);\r\n    \t\t// another way\r\n    \t\tQueue&lt;Integer&gt; pq1 = new PriorityQueue&lt;&gt;((a, b) -&gt; b - a);\r\n    \t\tpq1.addAll(ints);\r\n    \t\tSystem.out.println(&quot;Priority Queue =&gt; &quot; + pq1);\r\n    \t\tSystem.out.println(&quot;Max element in the list =&gt; &quot; + pq1.peek());\r\n    \t\t/* OUTPUT\r\n    \t\t  Priority Queue =&gt; [888, 444, 777, 333, 111, 555, 666, 222]\r\n              Max element in the list =&gt; 888\r\n              ......................\r\n               Priority Queue =&gt; [888, 444, 777, 333, 111, 555, 666, 222]\r\n               Max element in the list =&gt; 888\r\n    \t\t  \r\n    \t\t */\r\n    \t\t\r\n    \t\r\n    \t}\r\n    }\r\n\r\nLet&#39;s take a famous interview \r\nProblem : Kth Largest Element in an Array using PriorityQueue\r\n\r\n\r\n    public class KthLargestElement_1{\r\n    \tpublic static void main(String[] args) {\r\n    \r\n    \t\tList&lt;Integer&gt; ints = Arrays.asList(222, 555, 666, 333, 111, 888, 777, 444);\r\n    \t\tint k = 3;\r\n    \t\tQueue&lt;Integer&gt; pq = new PriorityQueue&lt;&gt;(Collections.reverseOrder());\r\n    \t\tpq.addAll(ints);\r\n    \t\tSystem.out.println(&quot;Priority Queue =&gt; &quot; + pq);\r\n    \t\tSystem.out.println(&quot;Max element in the list =&gt; &quot; + pq.peek());\r\n    \t\twhile (--k &gt; 0) {\r\n    \t\t\tpq.poll();\r\n    \t\t} // while\r\n    \t\tSystem.out.println(&quot;Third largest =&gt; &quot; + pq.peek());\r\n    /*\r\n     Priority Queue =&gt; [888, 444, 777, 333, 111, 555, 666, 222]\r\n    Max element in the list =&gt; 888\r\n    Third largest =&gt; 666\r\n    \r\n     */\r\n    \t}\r\n    }\r\n\r\nAnother way : \r\n\r\n    public class KthLargestElement_2 {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tList&lt;Integer&gt; ints = Arrays.asList(222, 555, 666, 333, 111, 888, 777, 444);\r\n    \t\tint k = 3;\r\n    \r\n    \t\tQueue&lt;Integer&gt; pq1 = new PriorityQueue&lt;&gt;((a, b) -&gt; b - a);\r\n    \t\tpq1.addAll(ints);\r\n    \t\tSystem.out.println(&quot;Priority Queue =&gt; &quot; + pq1);\r\n    \t\tSystem.out.println(&quot;Max element in the list =&gt; &quot; + pq1.peek());\r\n    \t\twhile (--k &gt; 0) {\r\n    \t\t\tpq1.poll();\r\n    \t\t} // while\r\n    \t\tSystem.out.println(&quot;Third largest =&gt; &quot; + pq1.peek());\r\n    \t\t/*\r\n    \t\t  Priority Queue =&gt; [888, 444, 777, 333, 111, 555, 666, 222] \r\n    \t\t  Max element in the list =&gt; 888 \r\n    \t\t  Third largest =&gt; 666\r\n    \t\t  \r\n    \t\t */\r\n    \t}\r\n    }\r\nAs we can see, both are giving the same result.\r\n\r\n\r\n\r\n\r\n","title":"Change priorityQueue to max priorityqueue","body":"<p>Change PriorityQueue to MAX PriorityQueue\nMethod 1 : Queue pq = new PriorityQueue&lt;>(Collections.reverseOrder());\nMethod 2 : Queue pq1 = new PriorityQueue&lt;>((a, b) -> b - a);\nLet's look at few Examples:</p>\n\n<pre><code>public class Example1 {\n    public static void main(String[] args) {\n\n        List&lt;Integer&gt; ints = Arrays.asList(222, 555, 666, 333, 111, 888, 777, 444);\n        Queue&lt;Integer&gt; pq = new PriorityQueue&lt;&gt;(Collections.reverseOrder());\n        pq.addAll(ints);\n        System.out.println(\"Priority Queue =&gt; \" + pq);\n        System.out.println(\"Max element in the list =&gt; \" + pq.peek());\n        System.out.println(\"......................\");\n        // another way\n        Queue&lt;Integer&gt; pq1 = new PriorityQueue&lt;&gt;((a, b) -&gt; b - a);\n        pq1.addAll(ints);\n        System.out.println(\"Priority Queue =&gt; \" + pq1);\n        System.out.println(\"Max element in the list =&gt; \" + pq1.peek());\n        /* OUTPUT\n          Priority Queue =&gt; [888, 444, 777, 333, 111, 555, 666, 222]\n          Max element in the list =&gt; 888\n          ......................\n           Priority Queue =&gt; [888, 444, 777, 333, 111, 555, 666, 222]\n           Max element in the list =&gt; 888\n\n         */\n\n\n    }\n}\n</code></pre>\n\n<p>Let's take a famous interview \nProblem : Kth Largest Element in an Array using PriorityQueue</p>\n\n<pre><code>public class KthLargestElement_1{\n    public static void main(String[] args) {\n\n        List&lt;Integer&gt; ints = Arrays.asList(222, 555, 666, 333, 111, 888, 777, 444);\n        int k = 3;\n        Queue&lt;Integer&gt; pq = new PriorityQueue&lt;&gt;(Collections.reverseOrder());\n        pq.addAll(ints);\n        System.out.println(\"Priority Queue =&gt; \" + pq);\n        System.out.println(\"Max element in the list =&gt; \" + pq.peek());\n        while (--k &gt; 0) {\n            pq.poll();\n        } // while\n        System.out.println(\"Third largest =&gt; \" + pq.peek());\n/*\n Priority Queue =&gt; [888, 444, 777, 333, 111, 555, 666, 222]\nMax element in the list =&gt; 888\nThird largest =&gt; 666\n\n */\n    }\n}\n</code></pre>\n\n<p>Another way : </p>\n\n<pre><code>public class KthLargestElement_2 {\n    public static void main(String[] args) {\n        List&lt;Integer&gt; ints = Arrays.asList(222, 555, 666, 333, 111, 888, 777, 444);\n        int k = 3;\n\n        Queue&lt;Integer&gt; pq1 = new PriorityQueue&lt;&gt;((a, b) -&gt; b - a);\n        pq1.addAll(ints);\n        System.out.println(\"Priority Queue =&gt; \" + pq1);\n        System.out.println(\"Max element in the list =&gt; \" + pq1.peek());\n        while (--k &gt; 0) {\n            pq1.poll();\n        } // while\n        System.out.println(\"Third largest =&gt; \" + pq1.peek());\n        /*\n          Priority Queue =&gt; [888, 444, 777, 333, 111, 555, 666, 222] \n          Max element in the list =&gt; 888 \n          Third largest =&gt; 666\n\n         */\n    }\n}\n</code></pre>\n\n<p>As we can see, both are giving the same result.</p>\n"},{"tags":[],"owner":{"account_id":4122257,"reputation":71,"user_id":3382257,"display_name":"Ajinkya_M"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1568657432,"creation_date":1568657432,"answer_id":57962284,"question_id":11003155,"body_markdown":"This can be achieved by using \r\n```\r\nPriorityQueue&lt;Integer&gt; pq = new PriorityQueue&lt;Integer&gt;(Collections.reverseOrder());\r\n```\r\n ","title":"Change priorityQueue to max priorityqueue","body":"<p>This can be achieved by using </p>\n\n<pre><code>PriorityQueue&lt;Integer&gt; pq = new PriorityQueue&lt;Integer&gt;(Collections.reverseOrder());\n</code></pre>\n"},{"comments":[{"owner":{"account_id":936367,"reputation":4282,"user_id":965229,"accept_rate":84,"display_name":"johnsam"},"score":4,"creation_date":1618448707,"post_id":61181896,"comment_id":118606946,"body_markdown":"Be careful on 2nd method, unless there is some constraints on the Integer numbers, it is best to stay away from this method.  Try and  what happened when you insert -2147483648 and 1 to the queue. It will make -2147483648 as the root as supposed to 1.","body":"Be careful on 2nd method, unless there is some constraints on the Integer numbers, it is best to stay away from this method.  Try and  what happened when you insert -2147483648 and 1 to the queue. It will make -2147483648 as the root as supposed to 1."},{"owner":{"account_id":21009405,"reputation":654,"user_id":15438360,"display_name":"Muhammad Khuzaima Umair"},"score":0,"creation_date":1673295845,"post_id":61181896,"comment_id":132462852,"body_markdown":"Another option for comparator `(u, v) -&gt; Integer.compare(v, u)`.","body":"Another option for comparator <code>(u, v) -&gt; Integer.compare(v, u)</code>."}],"tags":[],"owner":{"account_id":4653206,"reputation":13816,"user_id":3769451,"accept_rate":74,"display_name":"apadana"},"comment_count":2,"down_vote_count":0,"up_vote_count":64,"is_accepted":false,"score":64,"last_activity_date":1586754938,"creation_date":1586754938,"answer_id":61181896,"question_id":11003155,"body_markdown":"In Java 8+ you can create a max priority queue via one of these methods: \r\n\r\nMethod 1: \r\n\r\n    PriorityQueue&lt;Integer&gt; maxPQ = new PriorityQueue&lt;&gt;(Collections.reverseOrder()); \r\n\r\nMethod 2: \r\n\r\n    PriorityQueue&lt;Integer&gt; maxPQ = new PriorityQueue&lt;&gt;((a,b) -&gt; b - a); \r\n\r\nMethod 3: \r\n\r\n    PriorityQueue&lt;Integer&gt; maxPQ = new PriorityQueue&lt;&gt;((a,b) -&gt; b.compareTo(a)); \r\n\r\n","title":"Change priorityQueue to max priorityqueue","body":"<p>In Java 8+ you can create a max priority queue via one of these methods: </p>\n\n<p>Method 1: </p>\n\n<pre><code>PriorityQueue&lt;Integer&gt; maxPQ = new PriorityQueue&lt;&gt;(Collections.reverseOrder()); \n</code></pre>\n\n<p>Method 2: </p>\n\n<pre><code>PriorityQueue&lt;Integer&gt; maxPQ = new PriorityQueue&lt;&gt;((a,b) -&gt; b - a); \n</code></pre>\n\n<p>Method 3: </p>\n\n<pre><code>PriorityQueue&lt;Integer&gt; maxPQ = new PriorityQueue&lt;&gt;((a,b) -&gt; b.compareTo(a)); \n</code></pre>\n"},{"comments":[{"owner":{"account_id":3070800,"reputation":5899,"user_id":2601512,"accept_rate":87,"display_name":"jscherman"},"score":4,"creation_date":1602787243,"post_id":63277236,"comment_id":113838052,"body_markdown":"Probably would be easier just returning `n1.compareTo(n2) * (-1)` or `n2.compareTo(n1)` in `compare` method","body":"Probably would be easier just returning <code>n1.compareTo(n2) * (-1)</code> or <code>n2.compareTo(n1)</code> in <code>compare</code> method"}],"tags":[],"owner":{"account_id":6354520,"reputation":355,"user_id":4932352,"display_name":"Hardik Vagadia"},"comment_count":1,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1596690775,"creation_date":1596690775,"answer_id":63277236,"question_id":11003155,"body_markdown":"We can do this by creating our **CustomComparator** class that implements Comparator interface and overriding its compare method. Below is the code for the same :\r\n\r\n    import java.util.PriorityQueue;\r\n    import java.util.Comparator;\r\n    public class Main\r\n    {\r\n\t    public static void main(String[] args) {\r\n\t        PriorityQueue&lt;Integer&gt; nums = new PriorityQueue&lt;&gt;(new CustomComparator());\r\n\t        nums.offer(21);\r\n\t        nums.offer(1);\r\n\t        nums.offer(8);\r\n\t        nums.offer(2);\r\n\t        nums.offer(-4);\r\n\t\t    System.out.println(nums.peek());\r\n\t    }\r\n    }\r\n    class CustomComparator implements Comparator&lt;Integer&gt;{\r\n        @Override\r\n        public int compare(Integer n1, Integer n2){\r\n            int val = n1.compareTo(n2);\r\n            if(val &gt; 0)\r\n               return -1;\r\n            else if(val &lt; 0)\r\n                return 1;\r\n            else\r\n                return 0;\r\n        }\r\n    }","title":"Change priorityQueue to max priorityqueue","body":"<p>We can do this by creating our <strong>CustomComparator</strong> class that implements Comparator interface and overriding its compare method. Below is the code for the same :</p>\n<pre><code>import java.util.PriorityQueue;\nimport java.util.Comparator;\npublic class Main\n{\n    public static void main(String[] args) {\n        PriorityQueue&lt;Integer&gt; nums = new PriorityQueue&lt;&gt;(new CustomComparator());\n        nums.offer(21);\n        nums.offer(1);\n        nums.offer(8);\n        nums.offer(2);\n        nums.offer(-4);\n        System.out.println(nums.peek());\n    }\n}\nclass CustomComparator implements Comparator&lt;Integer&gt;{\n    @Override\n    public int compare(Integer n1, Integer n2){\n        int val = n1.compareTo(n2);\n        if(val &gt; 0)\n           return -1;\n        else if(val &lt; 0)\n            return 1;\n        else\n            return 0;\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":446597,"reputation":22464,"user_id":839733,"accept_rate":69,"display_name":"Abhijit Sarkar"},"score":1,"creation_date":1631585340,"post_id":64459204,"comment_id":122255653,"body_markdown":"Or simply `(a,b) -&gt; b - a`.","body":"Or simply <code>(a,b) -&gt; b - a</code>."}],"tags":[],"owner":{"account_id":3678749,"reputation":3576,"user_id":3064175,"accept_rate":62,"display_name":"ik024"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1603267384,"creation_date":1603267384,"answer_id":64459204,"question_id":11003155,"body_markdown":"Using lamda, just multiple the result with -1 to get max priority queue. \r\n\r\n\r\n    PriorityQueue&lt;&gt; q = new PriorityQueue&lt;Integer&gt;(\r\n                           (a,b) -&gt;  -1 * Integer.compare(a, b)\r\n                        );","title":"Change priorityQueue to max priorityqueue","body":"<p>Using lamda, just multiple the result with -1 to get max priority queue.</p>\n<pre><code>PriorityQueue&lt;&gt; q = new PriorityQueue&lt;Integer&gt;(\n                       (a,b) -&gt;  -1 * Integer.compare(a, b)\n                    );\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22173831,"reputation":659,"user_id":16418724,"display_name":"Nikhil S Marathe"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1646994390,"creation_date":1646994390,"answer_id":71437088,"question_id":11003155,"body_markdown":"* Simple way to Reverse PriorityQueue using ***Collections.reverseOrder()*** in java.\r\n\r\n-&gt; I have the PriorityQueue:(like:)\r\n\r\n        PriorityQueue&lt;String&gt; pQueue = new PriorityQueue&lt;&gt;();\r\n        \r\n        pQueue.add(&quot;Honda&quot;);\r\n\t\tpQueue.add(&quot;Passion&quot;);\r\n\t\tpQueue.add(&quot;Heroni&quot;);\r\n\t\tpQueue.add(&quot;Ola&quot;);\r\n\r\n\r\n-&gt; Create New PriorityQueue for Reverse array Store.\r\n\r\n      PriorityQueue&lt;String&gt; pRqueue = new \r\n                  PriorityQueue&lt;String&gt;(pQueue.size(), Collections.reverseOrder());\r\n\r\n-&gt; in the Syntex ***pQueue.size()*** is the array which is already Declared.\r\n   so, give here only the size.\r\n\r\n-&gt; add elements of old queue into new Queue:\r\n \r\n      pRqueue.addAll(pQueue);\r\n\r\n-&gt; and now print the queue. and Output is shown Below:\r\n\r\n        Queue Element:[ Heroni, Ola, Honda, Passion ]\r\n        Reverese PriorityQueue Element:[ Passion, Ola, Honda, Heroni ]\r\n\r\n☻♥ Done. Keep Code.","title":"Change priorityQueue to max priorityqueue","body":"<ul>\n<li>Simple way to Reverse PriorityQueue using <em><strong>Collections.reverseOrder()</strong></em> in java.</li>\n</ul>\n<p>-&gt; I have the PriorityQueue:(like:)</p>\n<pre><code>    PriorityQueue&lt;String&gt; pQueue = new PriorityQueue&lt;&gt;();\n    \n    pQueue.add(&quot;Honda&quot;);\n    pQueue.add(&quot;Passion&quot;);\n    pQueue.add(&quot;Heroni&quot;);\n    pQueue.add(&quot;Ola&quot;);\n</code></pre>\n<p>-&gt; Create New PriorityQueue for Reverse array Store.</p>\n<pre><code>  PriorityQueue&lt;String&gt; pRqueue = new \n              PriorityQueue&lt;String&gt;(pQueue.size(), Collections.reverseOrder());\n</code></pre>\n<p>-&gt; in the Syntex <em><strong>pQueue.size()</strong></em> is the array which is already Declared.\nso, give here only the size.</p>\n<p>-&gt; add elements of old queue into new Queue:</p>\n<pre><code>  pRqueue.addAll(pQueue);\n</code></pre>\n<p>-&gt; and now print the queue. and Output is shown Below:</p>\n<pre><code>    Queue Element:[ Heroni, Ola, Honda, Passion ]\n    Reverese PriorityQueue Element:[ Passion, Ola, Honda, Heroni ]\n</code></pre>\n<p>☻♥ Done. Keep Code.</p>\n"},{"tags":[],"owner":{"account_id":17043956,"reputation":995,"user_id":12331220,"display_name":"Anupam Haldkar"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1656007386,"creation_date":1656007386,"answer_id":72734694,"question_id":11003155,"body_markdown":"I have mentioned 5 ways to achieve :\r\n\r\n1. Using `compareTo()` Method\r\n\r\n``` \r\n   PriorityQueue&lt;Integer&gt; pq = new PriorityQueue&lt;&gt;((o1, o2) -&gt; o2.compareTo(o1));\r\n```\r\n    \r\n2. Using `compare()` Method\r\n\r\n```\r\n   PriorityQueue&lt;Integer&gt; pq = new PriorityQueue&lt;&gt;((x, y) -&gt; Integer.compare(y, x));\r\n```\r\n\r\n3. Using Custom `Comparator` Method \r\n\r\n```    \r\n   PriorityQueue&lt;Integer&gt; pq = new PriorityQueue&lt;&gt;(new CustomIntegerComparator());\r\n\r\n    static class CustomIntegerComparator implements Comparator&lt;Integer&gt; {\r\n\r\n        @Override\r\n        public int compare(Integer o1, Integer o2) {\r\n            return o1 &lt; o2 ? 1 : -1;\r\n        }\r\n    }\r\n```\r\n\r\n4. Using `Collection` Method\r\n\r\n```\r\n    PriorityQueue&lt;Integer&gt; pq= new PriorityQueue&lt;&gt;(Collections.reverseOrder());\r\n```\r\n\r\n5. Using `Arrow`(`Lambda` expression) Function\r\n\r\n```\r\n    PriorityQueue&lt;Integer&gt; pq= new PriorityQueue&lt;&gt;((a, b) -&gt; b - a);\r\n```\r\n\r\n6. Using Custom `Comparator` Method (via Difference)\r\n\r\n```\r\n   PriorityQueue&lt;Integer&gt; pq = new PriorityQueue&lt;&gt; (new Comparator&lt;Integer&gt; () \r\n   {\r\n    public int compare(Integer a, Integer b) \r\n      {\r\n          return b - a;\r\n      }\r\n    }); ","title":"Change priorityQueue to max priorityqueue","body":"<p>I have mentioned 5 ways to achieve :</p>\n<ol>\n<li>Using <code>compareTo()</code> Method</li>\n</ol>\n<pre><code>   PriorityQueue&lt;Integer&gt; pq = new PriorityQueue&lt;&gt;((o1, o2) -&gt; o2.compareTo(o1));\n</code></pre>\n<ol start=\"2\">\n<li>Using <code>compare()</code> Method</li>\n</ol>\n<pre><code>   PriorityQueue&lt;Integer&gt; pq = new PriorityQueue&lt;&gt;((x, y) -&gt; Integer.compare(y, x));\n</code></pre>\n<ol start=\"3\">\n<li>Using Custom <code>Comparator</code> Method</li>\n</ol>\n<pre><code>   PriorityQueue&lt;Integer&gt; pq = new PriorityQueue&lt;&gt;(new CustomIntegerComparator());\n\n    static class CustomIntegerComparator implements Comparator&lt;Integer&gt; {\n\n        @Override\n        public int compare(Integer o1, Integer o2) {\n            return o1 &lt; o2 ? 1 : -1;\n        }\n    }\n</code></pre>\n<ol start=\"4\">\n<li>Using <code>Collection</code> Method</li>\n</ol>\n<pre><code>    PriorityQueue&lt;Integer&gt; pq= new PriorityQueue&lt;&gt;(Collections.reverseOrder());\n</code></pre>\n<ol start=\"5\">\n<li>Using <code>Arrow</code>(<code>Lambda</code> expression) Function</li>\n</ol>\n<pre><code>    PriorityQueue&lt;Integer&gt; pq= new PriorityQueue&lt;&gt;((a, b) -&gt; b - a);\n</code></pre>\n<ol start=\"6\">\n<li>Using Custom <code>Comparator</code> Method (via Difference)</li>\n</ol>\n<pre><code>   PriorityQueue&lt;Integer&gt; pq = new PriorityQueue&lt;&gt; (new Comparator&lt;Integer&gt; () \n   {\n    public int compare(Integer a, Integer b) \n      {\n          return b - a;\n      }\n    }); \n</code></pre>\n"},{"tags":[],"owner":{"account_id":18360770,"reputation":133,"user_id":13372928,"display_name":"Santam"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1689096519,"creation_date":1659719863,"answer_id":73253302,"question_id":11003155,"body_markdown":"You can refer to the other answers given here. If you want a very simple hack for this, just revert the sign of the number.\r\nSuppose I want to enter 5 and 10 to the queue,\r\n\r\n    PriorityQueue&lt;Integer&gt; pq= new PriorityQueue&lt;Integer&gt;();\r\n    pq.add(-5);\r\n    pr.add(-10);\r\n\r\nSince Priority Queue by default implements min heap in Java you can use this logic to implement max heap.\r\n\r\n\r\n","title":"Change priorityQueue to max priorityqueue","body":"<p>You can refer to the other answers given here. If you want a very simple hack for this, just revert the sign of the number.\nSuppose I want to enter 5 and 10 to the queue,</p>\n<pre><code>PriorityQueue&lt;Integer&gt; pq= new PriorityQueue&lt;Integer&gt;();\npq.add(-5);\npr.add(-10);\n</code></pre>\n<p>Since Priority Queue by default implements min heap in Java you can use this logic to implement max heap.</p>\n"}],"owner":{"account_id":451722,"reputation":15865,"user_id":847773,"accept_rate":69,"display_name":"Borut Flis"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":339449,"favorite_count":0,"down_vote_count":0,"up_vote_count":190,"accepted_answer_id":11003264,"answer_count":20,"score":190,"last_activity_date":1689096519,"creation_date":1339527959,"question_id":11003155,"body_markdown":"I have priority queue in Java of Integers:\r\n\r\n     PriorityQueue&lt;Integer&gt; pq= new PriorityQueue&lt;Integer&gt;();\r\n\r\nWhen I call `pq.poll()` I get the minimum element.\r\n\r\nQuestion: how to change the code to get the maximum element?","title":"Change priorityQueue to max priorityqueue","body":"<p>I have priority queue in Java of Integers:</p>\n\n<pre><code> PriorityQueue&lt;Integer&gt; pq= new PriorityQueue&lt;Integer&gt;();\n</code></pre>\n\n<p>When I call <code>pq.poll()</code> I get the minimum element.</p>\n\n<p>Question: how to change the code to get the maximum element?</p>\n"},{"tags":["java","spark-framework"],"answers":[{"tags":[],"owner":{"account_id":8263100,"reputation":1,"user_id":6820336,"display_name":"Nicholas Checan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1502065075,"creation_date":1502065075,"answer_id":45537872,"question_id":44988134,"body_markdown":"As far as I know, there&#39;s no way to automatically find REST routes as they do not have a standard registry service. \r\nAlthough, you can document them using [Swagger](https://swagger.io/) or even store them using chrome applications such as **Postman** or **Advanced Rest Client**.","title":"How to get all exposed routes in Spark framework","body":"<p>As far as I know, there's no way to automatically find REST routes as they do not have a standard registry service. \nAlthough, you can document them using <a href=\"https://swagger.io/\" rel=\"nofollow noreferrer\">Swagger</a> or even store them using chrome applications such as <strong>Postman</strong> or <strong>Advanced Rest Client</strong>.</p>\n"},{"comments":[{"owner":{"account_id":1088201,"reputation":4968,"user_id":1083428,"display_name":"Pavel Evstigneev"},"score":0,"creation_date":1689096220,"post_id":76664407,"comment_id":135163732,"body_markdown":"https://github.com/perwendel/spark/pull/1100","body":"<a href=\"https://github.com/perwendel/spark/pull/1100\" rel=\"nofollow noreferrer\">github.com/perwendel/spark/pull/1100</a>"}],"tags":[],"owner":{"account_id":1088201,"reputation":4968,"user_id":1083428,"display_name":"Pavel Evstigneev"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689096204,"creation_date":1689096204,"answer_id":76664407,"question_id":44988134,"body_markdown":"It&#39;s possible now in spark 2.9.4\r\n\r\n```java\r\nimport spark.Spark;\r\nimport spark.routematch.RouteMatch;\r\n\r\n// somewhere after route definitions\r\n\r\nfor (RouteMatch route : routes()) {\r\n    String method = route.getHttpMethod().toString();\r\n    if (method.equals(&quot;before&quot;) || method.equals(&quot;after&quot;)) continue;\r\n    System.out.printf(&quot;--&gt; %-7s %s\\n&quot;, method.toUpperCase(), route.getMatchUri());\r\n}\r\n```\r\noutput\r\n```\r\n--&gt; POST    /internal/update_notification\r\n--&gt; GET     /internal/history\r\n--&gt; GET     /internal/history_details\r\n--&gt; GET     /ping\r\n```","title":"How to get all exposed routes in Spark framework","body":"<p>It's possible now in spark 2.9.4</p>\n<pre class=\"lang-java prettyprint-override\"><code>import spark.Spark;\nimport spark.routematch.RouteMatch;\n\n// somewhere after route definitions\n\nfor (RouteMatch route : routes()) {\n    String method = route.getHttpMethod().toString();\n    if (method.equals(&quot;before&quot;) || method.equals(&quot;after&quot;)) continue;\n    System.out.printf(&quot;--&gt; %-7s %s\\n&quot;, method.toUpperCase(), route.getMatchUri());\n}\n</code></pre>\n<p>output</p>\n<pre><code>--&gt; POST    /internal/update_notification\n--&gt; GET     /internal/history\n--&gt; GET     /internal/history_details\n--&gt; GET     /ping\n</code></pre>\n"}],"owner":{"account_id":10428128,"reputation":149,"user_id":7688740,"accept_rate":67,"display_name":"yellow boy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":904,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":2,"score":5,"last_activity_date":1689096204,"creation_date":1499530002,"question_id":44988134,"body_markdown":"In java spark web framework a route is defined as \r\n\r\n    get(&quot;/&quot;, (request, response) -&gt; {\r\n    // Show something\r\n});\r\n\r\nIn my application I define multiple routes. Is there any way I can get **all** the exposed routes of the application?","title":"How to get all exposed routes in Spark framework","body":"<p>In java spark web framework a route is defined as </p>\n\n<pre><code>get(\"/\", (request, response) -&gt; {\n// Show something\n</code></pre>\n\n<p>});</p>\n\n<p>In my application I define multiple routes. Is there any way I can get <strong>all</strong> the exposed routes of the application?</p>\n"},{"tags":["java","zipoutputstream"],"answers":[{"tags":[],"owner":{"display_name":"user177800"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1523320135,"creation_date":1454540801,"answer_id":35189519,"question_id":35141580,"body_markdown":"###Short Answer: \r\n\r\nI could not determine a way to read the files only once and calculate the `CRC` with the standard library given the time I had to solve this problem.\r\n\r\nI did find an optimization that decreased the time by about `50%` on average.\r\n\r\nI pre-calculate the `CRC` of the files to be stored concurrently with an `ExecutorCompletionService` limited to `Runtime.getRuntime().availableProcessors()` and wait until they are done. The effectiveness of this varies based on the number of files that need the `CRC` calculated. With the more files, the more benefit.\r\n\r\nThen in the `.postVisitDirectories()` I wrap a `ZipOutputStream` around a `PipedOutputStream` from a `PipedInputStream/PipedOutputStream` pair running on a temporary `Thread` to convert the `ZipOutputStream` to an `InputStream` I can pass into the `HttpRequest` to upload the results of the `ZipOutputStream` to a remote server while writing all the precalculated `ZipEntry/Path` objects serially.\r\n\r\nThis is good enough for now, to process the `300+GB` of immediate needs, but when I get to the `10TB` job I will look at addressing it and trying to find some more advantages without adding too much complexity. \r\n\r\nIf I come up with something substantially better time wise I will update this answer with the new implementation.\r\n\r\n###Long answer:\r\n\r\nI ended up writing a clean room `ZipOutputStream` that supports multipart zip files, intelligent compression levels vs `STORE` and was able to calculate the `CRC` as I read and then write out the metadata at the end of the stream.\r\n\r\n-----\r\n\r\n###Why ZipOutputStream.setLevel() swapping will not work:\r\n\r\n&gt; The `ZipOutputStream.setLevel(NO_COMPRESSION/DEFAULT_COMPRESSION)`\r\n&gt; hack is not a viable approach. I did extensive tests on hundreds of\r\n&gt; gigs of data, thousands of folders and files and the measurements were\r\n&gt; conclusive. It gains nothing over calculating the `CRC` for the\r\n&gt; `STORED` files vs compressing them at `NO_COMPRESSION`. It is actually\r\n&gt; **slower** by a large margin!\r\n&gt; \r\n&gt; In my tests the files are on a **network mounted drive** so reading\r\n&gt; the files already compressed files **twice** over the network to\r\n&gt; calculate the `CRC` then again to add to the `ZipOutputStream` was as\r\n&gt; fast or faster than just processing all the files once as `DEFLATED`\r\n&gt; and changing the `.setLevel()` on the `ZipOutputStream`. \r\n&gt; \r\n&gt; There is no local filesystem caching going on with the network access.\r\n&gt; This is a worse case scenario, processing files on the local disk will\r\n&gt; be much much faster because of local filesystem caching.\r\n&gt; \r\n&gt; So this hack is a naive approach and is based on false assumptions. It is processing the\r\n&gt; data through the compression algorithm even at `NO_COMPRESSION` level\r\n&gt; and the overhead is higher than reading the files twice.","title":"ZipEntry.STORED for files that are already compressed?","body":"<h3>Short Answer:</h3>\n\n<p>I could not determine a way to read the files only once and calculate the <code>CRC</code> with the standard library given the time I had to solve this problem.</p>\n\n<p>I did find an optimization that decreased the time by about <code>50%</code> on average.</p>\n\n<p>I pre-calculate the <code>CRC</code> of the files to be stored concurrently with an <code>ExecutorCompletionService</code> limited to <code>Runtime.getRuntime().availableProcessors()</code> and wait until they are done. The effectiveness of this varies based on the number of files that need the <code>CRC</code> calculated. With the more files, the more benefit.</p>\n\n<p>Then in the <code>.postVisitDirectories()</code> I wrap a <code>ZipOutputStream</code> around a <code>PipedOutputStream</code> from a <code>PipedInputStream/PipedOutputStream</code> pair running on a temporary <code>Thread</code> to convert the <code>ZipOutputStream</code> to an <code>InputStream</code> I can pass into the <code>HttpRequest</code> to upload the results of the <code>ZipOutputStream</code> to a remote server while writing all the precalculated <code>ZipEntry/Path</code> objects serially.</p>\n\n<p>This is good enough for now, to process the <code>300+GB</code> of immediate needs, but when I get to the <code>10TB</code> job I will look at addressing it and trying to find some more advantages without adding too much complexity. </p>\n\n<p>If I come up with something substantially better time wise I will update this answer with the new implementation.</p>\n\n<h3>Long answer:</h3>\n\n<p>I ended up writing a clean room <code>ZipOutputStream</code> that supports multipart zip files, intelligent compression levels vs <code>STORE</code> and was able to calculate the <code>CRC</code> as I read and then write out the metadata at the end of the stream.</p>\n\n<hr>\n\n<h3>Why ZipOutputStream.setLevel() swapping will not work:</h3>\n\n<blockquote>\n  <p>The <code>ZipOutputStream.setLevel(NO_COMPRESSION/DEFAULT_COMPRESSION)</code>\n  hack is not a viable approach. I did extensive tests on hundreds of\n  gigs of data, thousands of folders and files and the measurements were\n  conclusive. It gains nothing over calculating the <code>CRC</code> for the\n  <code>STORED</code> files vs compressing them at <code>NO_COMPRESSION</code>. It is actually\n  <strong>slower</strong> by a large margin!</p>\n  \n  <p>In my tests the files are on a <strong>network mounted drive</strong> so reading\n  the files already compressed files <strong>twice</strong> over the network to\n  calculate the <code>CRC</code> then again to add to the <code>ZipOutputStream</code> was as\n  fast or faster than just processing all the files once as <code>DEFLATED</code>\n  and changing the <code>.setLevel()</code> on the <code>ZipOutputStream</code>. </p>\n  \n  <p>There is no local filesystem caching going on with the network access.\n  This is a worse case scenario, processing files on the local disk will\n  be much much faster because of local filesystem caching.</p>\n  \n  <p>So this hack is a naive approach and is based on false assumptions. It is processing the\n  data through the compression algorithm even at <code>NO_COMPRESSION</code> level\n  and the overhead is higher than reading the files twice.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":5209321,"reputation":116,"user_id":4166251,"display_name":"Stanimir Stamenkov"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1684302259,"creation_date":1684302259,"answer_id":76268876,"question_id":35141580,"body_markdown":"&gt; I could not determine a way to read the files only once and calculate the `CRC` with the standard library given the time I had to solve this problem.\r\n&gt;\r\n&gt; I did find an optimization that decreased the time by about `50%` on average.\r\n&gt;\r\n&gt; I pre-calculate the `CRC` of the files to be stored concurrently...\r\n\r\nI&#39;ve measured about the same improvement, compared to alternating the `ZipOutputStream.setLevel(Deflater.NO_COMPRESSION)` and `ZipOutputStream.setLevel(Deflater.DEFAULT_COMPRESSION)`, without concurrent CRC calculation using:\r\n\r\n```java\r\nimport java.io.IOException;\r\nimport java.nio.ByteBuffer;\r\nimport java.nio.MappedByteBuffer;\r\nimport java.nio.channels.Channels;\r\nimport java.nio.channels.FileChannel;\r\nimport java.nio.channels.WritableByteChannel;\r\nimport java.nio.channels.FileChannel.MapMode;\r\nimport java.nio.file.Files;\r\nimport java.nio.file.Path;\r\nimport java.util.zip.CRC32;\r\nimport java.util.zip.ZipEntry;\r\nimport java.util.zip.ZipOutputStream;\r\n\r\n...\r\n\r\n    void addTo(ZipOutputStream zipOut, Path file) throws IOException {\r\n        try (FileChannel fch = FileChannel.open(file)) {\r\n            MappedByteBuffer buf = fch.map(MapMode.READ_ONLY, 0, fch.size());\r\n            ZipEntry entry = new ZipEntry(relativize(file));\r\n            entry.setLastModifiedTime(Files.getLastModifiedTime(file));\r\n            if (entry.getName().endsWith(&quot;.zip&quot;)\r\n                    || entry.getName().endsWith(&quot;.gz&quot;)) {\r\n                entry.setMethod(ZipEntry.STORED);\r\n                entry.setSize(buf.remaining());\r\n                entry.setCrc(checkSum(buf));\r\n            }\r\n            zipOut.putNextEntry(entry);\r\n            @SuppressWarnings(&quot;resource&quot;)\r\n            WritableByteChannel zipCh = Channels.newChannel(zipOut);\r\n            zipCh.write(buf);\r\n            zipOut.closeEntry();\r\n        }\r\n    }\r\n\r\n    static long checkSum(ByteBuffer buf) {\r\n        CRC32 crc = new CRC32();\r\n        int mark = buf.position();\r\n        crc.update(buf);\r\n        buf.position(mark);\r\n        return crc.getValue();\r\n    }\r\n```\r\n\r\n(The `relativize(Path) : String` method is left out of the example.)\r\n\r\nThe `CRC32` class provides very efficient [`update(ByteBuffer)`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/zip/CRC32.html#update%28java.nio.ByteBuffer%29) method for use with memory-mapped (direct) file buffers.","title":"ZipEntry.STORED for files that are already compressed?","body":"<blockquote>\n<p>I could not determine a way to read the files only once and calculate the <code>CRC</code> with the standard library given the time I had to solve this problem.</p>\n<p>I did find an optimization that decreased the time by about <code>50%</code> on average.</p>\n<p>I pre-calculate the <code>CRC</code> of the files to be stored concurrently...</p>\n</blockquote>\n<p>I've measured about the same improvement, compared to alternating the <code>ZipOutputStream.setLevel(Deflater.NO_COMPRESSION)</code> and <code>ZipOutputStream.setLevel(Deflater.DEFAULT_COMPRESSION)</code>, without concurrent CRC calculation using:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.io.IOException;\nimport java.nio.ByteBuffer;\nimport java.nio.MappedByteBuffer;\nimport java.nio.channels.Channels;\nimport java.nio.channels.FileChannel;\nimport java.nio.channels.WritableByteChannel;\nimport java.nio.channels.FileChannel.MapMode;\nimport java.nio.file.Files;\nimport java.nio.file.Path;\nimport java.util.zip.CRC32;\nimport java.util.zip.ZipEntry;\nimport java.util.zip.ZipOutputStream;\n\n...\n\n    void addTo(ZipOutputStream zipOut, Path file) throws IOException {\n        try (FileChannel fch = FileChannel.open(file)) {\n            MappedByteBuffer buf = fch.map(MapMode.READ_ONLY, 0, fch.size());\n            ZipEntry entry = new ZipEntry(relativize(file));\n            entry.setLastModifiedTime(Files.getLastModifiedTime(file));\n            if (entry.getName().endsWith(&quot;.zip&quot;)\n                    || entry.getName().endsWith(&quot;.gz&quot;)) {\n                entry.setMethod(ZipEntry.STORED);\n                entry.setSize(buf.remaining());\n                entry.setCrc(checkSum(buf));\n            }\n            zipOut.putNextEntry(entry);\n            @SuppressWarnings(&quot;resource&quot;)\n            WritableByteChannel zipCh = Channels.newChannel(zipOut);\n            zipCh.write(buf);\n            zipOut.closeEntry();\n        }\n    }\n\n    static long checkSum(ByteBuffer buf) {\n        CRC32 crc = new CRC32();\n        int mark = buf.position();\n        crc.update(buf);\n        buf.position(mark);\n        return crc.getValue();\n    }\n</code></pre>\n<p>(The <code>relativize(Path) : String</code> method is left out of the example.)</p>\n<p>The <code>CRC32</code> class provides very efficient <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/zip/CRC32.html#update%28java.nio.ByteBuffer%29\" rel=\"nofollow noreferrer\"><code>update(ByteBuffer)</code></a> method for use with memory-mapped (direct) file buffers.</p>\n"}],"owner":{"display_name":"user177800"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1746,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":35189519,"answer_count":2,"score":6,"last_activity_date":1689096199,"creation_date":1454365494,"question_id":35141580,"body_markdown":"I am using a `ZipOutputStream` to zip up a bunch of files that are a mix of already zipped formats as well as lots of large highly compressible formats like plain text. \r\n\r\nMost of the already zipped formats are large files and it makes no sense to spend cpu and memory on recompressing them since they never get smaller and sometimes get slightly large on the rare occasion.\r\n\r\nI am trying to use `.setMethod(ZipEntry.STORED)` when I detect a pre-compressed file but it complains that I need to supply the `size, compressedSize and crc` for those files.\r\n\r\nI can get it work with the following approach but this requires that I read the file **twice**. Once to calculate the `CRC32` then again to actually copy the file into the `ZipOutputStream`.\r\n\r\n    // code that determines the value of method omitted for brevity\r\n    if (STORED == method)\r\n    {\r\n        fze.setMethod(STORED);\r\n        fze.setCompressedSize(fe.attributes.size());\r\n        final HashingInputStream his = new HashingInputStream(Hashing.crc32(), fis);\r\n        ByteStreams.copy(his,ByteStreams.nullOutputStream());\r\n        fze.setCrc(his.hash().padToLong());\r\n    }\r\n    else\r\n    {\r\n        fze.setMethod(DEFLATED);\r\n    }\r\n    zos.putNextEntry(fze);\r\n    ByteStreams.copy(new FileInputStream(fe.path.toFile()), zos);\r\n    zos.closeEntry();\r\n\r\n##Is there a way provide this information without having to read the input stream twice?","title":"ZipEntry.STORED for files that are already compressed?","body":"<p>I am using a <code>ZipOutputStream</code> to zip up a bunch of files that are a mix of already zipped formats as well as lots of large highly compressible formats like plain text. </p>\n\n<p>Most of the already zipped formats are large files and it makes no sense to spend cpu and memory on recompressing them since they never get smaller and sometimes get slightly large on the rare occasion.</p>\n\n<p>I am trying to use <code>.setMethod(ZipEntry.STORED)</code> when I detect a pre-compressed file but it complains that I need to supply the <code>size, compressedSize and crc</code> for those files.</p>\n\n<p>I can get it work with the following approach but this requires that I read the file <strong>twice</strong>. Once to calculate the <code>CRC32</code> then again to actually copy the file into the <code>ZipOutputStream</code>.</p>\n\n<pre><code>// code that determines the value of method omitted for brevity\nif (STORED == method)\n{\n    fze.setMethod(STORED);\n    fze.setCompressedSize(fe.attributes.size());\n    final HashingInputStream his = new HashingInputStream(Hashing.crc32(), fis);\n    ByteStreams.copy(his,ByteStreams.nullOutputStream());\n    fze.setCrc(his.hash().padToLong());\n}\nelse\n{\n    fze.setMethod(DEFLATED);\n}\nzos.putNextEntry(fze);\nByteStreams.copy(new FileInputStream(fe.path.toFile()), zos);\nzos.closeEntry();\n</code></pre>\n\n<h2>Is there a way provide this information without having to read the input stream twice?</h2>\n"},{"tags":["java","spring-boot","spring-security","axios","cors"],"comments":[{"owner":{"account_id":17717155,"reputation":527,"user_id":12863192,"display_name":"Ishan"},"score":0,"creation_date":1689085988,"post_id":76662713,"comment_id":135161524,"body_markdown":"I just noticed - in `Content-Length` it shows 324. So, the response body is there. https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Length. Content-Length does not include size of the header, it is only the body. So, body is there.","body":"I just noticed - in <code>Content-Length</code> it shows 324. So, the response body is there. <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Length\" rel=\"nofollow noreferrer\">developer.mozilla.org/en-US/docs/Web/HTTP/Headers/&hellip;</a>. Content-Length does not include size of the header, it is only the body. So, body is there."},{"owner":{"account_id":17717155,"reputation":527,"user_id":12863192,"display_name":"Ishan"},"score":0,"creation_date":1689086170,"post_id":76662713,"comment_id":135161561,"body_markdown":"Log the response, and put try-catch.  Expand the `POST ... net:ERR_FAILED 200` and check the full error details with stack-trace.  Check what is on that specific line in the stack-trace.","body":"Log the response, and put try-catch.  Expand the <code>POST ... net:ERR_FAILED 200</code> and check the full error details with stack-trace.  Check what is on that specific line in the stack-trace."}],"answers":[{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1689273441,"post_id":76664400,"comment_id":135194025,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/76664400/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":10600283,"reputation":33,"user_id":7831828,"display_name":"urrutias"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689096123,"creation_date":1689096123,"answer_id":76664400,"question_id":76662713,"body_markdown":"I resolve it with this configuration in the SimpleCorsFilter Class\r\n\r\n    @Override\r\n    public void doFilter(ServletRequest req, ServletResponse res, FilterChain chain) throws IOException, ServletException {\r\n        HttpServletResponse response = (HttpServletResponse) res;\r\n        HttpServletRequest request = (HttpServletRequest) req;\r\n        response.setHeader(&quot;Access-Control-Allow-Origin&quot;, &quot;*&quot;);\r\n        response.setHeader(&quot;Access-Control-Allow-Methods&quot;, &quot;POST, GET, OPTIONS, DELETE&quot;);\r\n        response.setHeader(&quot;Access-Control-Max-Age&quot;, &quot;3600&quot;);\r\n        response.setHeader(&quot;Access-Control-Allow-Headers&quot;, &quot;x-requested-with, authorization&quot;);\r\n\r\n        if (&quot;OPTIONS&quot;.equalsIgnoreCase(request.getMethod())) {\r\n            response.setStatus(HttpServletResponse.SC_OK);\r\n        } else {\r\n            chain.doFilter(req, res);\r\n        }\r\n    }","title":"Cors error in console but returns correct data","body":"<p>I resolve it with this configuration in the SimpleCorsFilter Class</p>\n<pre><code>@Override\npublic void doFilter(ServletRequest req, ServletResponse res, FilterChain chain) throws IOException, ServletException {\n    HttpServletResponse response = (HttpServletResponse) res;\n    HttpServletRequest request = (HttpServletRequest) req;\n    response.setHeader(&quot;Access-Control-Allow-Origin&quot;, &quot;*&quot;);\n    response.setHeader(&quot;Access-Control-Allow-Methods&quot;, &quot;POST, GET, OPTIONS, DELETE&quot;);\n    response.setHeader(&quot;Access-Control-Max-Age&quot;, &quot;3600&quot;);\n    response.setHeader(&quot;Access-Control-Allow-Headers&quot;, &quot;x-requested-with, authorization&quot;);\n\n    if (&quot;OPTIONS&quot;.equalsIgnoreCase(request.getMethod())) {\n        response.setStatus(HttpServletResponse.SC_OK);\n    } else {\n        chain.doFilter(req, res);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":10600283,"reputation":33,"user_id":7831828,"display_name":"urrutias"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76664400,"answer_count":1,"score":0,"last_activity_date":1689096123,"creation_date":1689083467,"question_id":76662713,"body_markdown":"I have a backend in spring boot 3.1 with the login in spring-security 6.1 and when I make the login call, it returns the token but in the console it returns a cors error, although with the code 200\r\n\r\nI show you my classes:\r\n\r\n&gt; CorsConfig class\r\n\r\n```\r\n@Configuration\r\n@EnableWebMvc\r\npublic class CorsConfig implements WebMvcConfigurer {\r\n    @Override\r\n    public void addCorsMappings(CorsRegistry registry) {\r\n        registry.addMapping(&quot;/**&quot;)\r\n                .allowedOriginPatterns(&quot;*&quot;)\r\n                .allowedMethods(&quot;GET&quot;, &quot;POST&quot;, &quot;PUT&quot;, &quot;DELETE&quot;)\r\n                .allowedHeaders(&quot;*&quot;)\r\n                .allowCredentials(true)\r\n                .maxAge(3600);\r\n    }\r\n}\r\n\r\n```\r\n\r\n&gt; SpringSecurityConfig Class\r\n\r\n\r\n```\r\n    @Bean\r\n    SecurityFilterChain filterChain(HttpSecurity http) throws Exception{\r\n         http\r\n                 .csrf(csrf -&gt; csrf.disable())\r\n                 .sessionManagement(management -&gt; management.sessionCreationPolicy(SessionCreationPolicy.STATELESS))\r\n                 .addFilter(new JwtAuthenticationFilter(authenticationConfiguration.getAuthenticationManager()))\r\n                 .addFilter(new JwtValidationFilter(authenticationConfiguration.getAuthenticationManager()))\r\n                 .authorizeHttpRequests((authorizeHttpRequests) -&gt; authorizeHttpRequests.requestMatchers(HttpMethod.POST, &quot;/login&quot;)\r\n                         .permitAll()\r\n                         .anyRequest()\r\n                         .authenticated()\r\n                 );\r\n\r\n         return http.build();\r\n    }\r\n```\r\n\r\n&gt; SucessfulAuthentication method\r\n\r\n\r\n```\r\n  @Override\r\n    protected void successfulAuthentication(HttpServletRequest request, HttpServletResponse response, FilterChain chain, Authentication authResult) throws IOException, ServletException {\r\n\r\n        String username = ((User)authResult.getPrincipal()).getUsername();\r\n\r\n       Collection&lt;? extends GrantedAuthority&gt; roles =  authResult.getAuthorities();\r\n       //boolean isAdmin = roles.stream().anyMatch(r -&gt; r.getAuthority().equals((ROLE_ADMIN)));\r\n       Claims claims = Jwts.claims();\r\n       claims.put(&quot;authorities&quot;, new ObjectMapper().writeValueAsString(roles));\r\n       //claims.put(&quot;isAdmin&quot;, isAdmin);\r\n\r\n        String token = Jwts.builder()\r\n                .setClaims(claims)\r\n                .setSubject(username)\r\n                .signWith(SECRET_KEY)\r\n                .setIssuedAt(new Date())\r\n                .setExpiration(new Date(System.currentTimeMillis() + 36000000))// Tiempo para expiracion del token 10h( hora actual + 1 hora) 3600000 = 1hora\r\n                .compact();\r\n\r\n        response.addHeader(HEADER_AUTHORIZATION, PREFIX_TOKEN + token);\r\n\r\n        Map&lt;String, Object&gt; body = new HashMap&lt;&gt;();\r\n        body.put(&quot;token&quot;, token);\r\n        body.put(&quot;message&quot;, String.format(&quot;Hola %s, has iniciado sesion con exito&quot;, username));\r\n        body.put(&quot;username&quot;, username);\r\n        response.getWriter().write(new ObjectMapper().writeValueAsString(body));\r\n        response.setStatus(200);\r\n        response.setContentType(&quot;application/json&quot;);\r\n    }\r\n```\r\n\r\n\r\n&gt; Axios call\r\n\r\n\r\n```\r\nvar data = {\r\n                username: username,\r\n                password: password\r\n            }\r\n      \r\n            const response = await axios({\r\n                method: &quot;post&quot;,\r\n                url: `${urlLogin}`,\r\n                data: JSON.stringify(data),\r\n                headers: { \r\n                    &quot;Content-Type&quot;: &quot;multipart/form-data&quot;\r\n                },\r\n            })\r\n```\r\n\r\n\r\n&gt; And Error message in console\r\n\r\n[![enter image description here](https://i.stack.imgur.com/iYFzG.png)](https://i.stack.imgur.com/iYFzG.png)\r\n\r\n[![enter image description here](https://i.stack.imgur.com/BAEen.png)](https://i.stack.imgur.com/BAEen.png)\r\n\r\n\r\nI only receive the token in the response header, but not the body that I indicate in the sucessfulAuthentication method. From postman I have no problem, it works correctly\r\n\r\n[![enter image description here](https://i.stack.imgur.com/NQ5xe.png)](https://i.stack.imgur.com/NQ5xe.png)\r\n\r\n\r\n\r\n\r\nI hope I have explained myself well. I will be attending any answer / question. Thank you so much","title":"Cors error in console but returns correct data","body":"<p>I have a backend in spring boot 3.1 with the login in spring-security 6.1 and when I make the login call, it returns the token but in the console it returns a cors error, although with the code 200</p>\n<p>I show you my classes:</p>\n<blockquote>\n<p>CorsConfig class</p>\n</blockquote>\n<pre><code>@Configuration\n@EnableWebMvc\npublic class CorsConfig implements WebMvcConfigurer {\n    @Override\n    public void addCorsMappings(CorsRegistry registry) {\n        registry.addMapping(&quot;/**&quot;)\n                .allowedOriginPatterns(&quot;*&quot;)\n                .allowedMethods(&quot;GET&quot;, &quot;POST&quot;, &quot;PUT&quot;, &quot;DELETE&quot;)\n                .allowedHeaders(&quot;*&quot;)\n                .allowCredentials(true)\n                .maxAge(3600);\n    }\n}\n\n</code></pre>\n<blockquote>\n<p>SpringSecurityConfig Class</p>\n</blockquote>\n<pre><code>    @Bean\n    SecurityFilterChain filterChain(HttpSecurity http) throws Exception{\n         http\n                 .csrf(csrf -&gt; csrf.disable())\n                 .sessionManagement(management -&gt; management.sessionCreationPolicy(SessionCreationPolicy.STATELESS))\n                 .addFilter(new JwtAuthenticationFilter(authenticationConfiguration.getAuthenticationManager()))\n                 .addFilter(new JwtValidationFilter(authenticationConfiguration.getAuthenticationManager()))\n                 .authorizeHttpRequests((authorizeHttpRequests) -&gt; authorizeHttpRequests.requestMatchers(HttpMethod.POST, &quot;/login&quot;)\n                         .permitAll()\n                         .anyRequest()\n                         .authenticated()\n                 );\n\n         return http.build();\n    }\n</code></pre>\n<blockquote>\n<p>SucessfulAuthentication method</p>\n</blockquote>\n<pre><code>  @Override\n    protected void successfulAuthentication(HttpServletRequest request, HttpServletResponse response, FilterChain chain, Authentication authResult) throws IOException, ServletException {\n\n        String username = ((User)authResult.getPrincipal()).getUsername();\n\n       Collection&lt;? extends GrantedAuthority&gt; roles =  authResult.getAuthorities();\n       //boolean isAdmin = roles.stream().anyMatch(r -&gt; r.getAuthority().equals((ROLE_ADMIN)));\n       Claims claims = Jwts.claims();\n       claims.put(&quot;authorities&quot;, new ObjectMapper().writeValueAsString(roles));\n       //claims.put(&quot;isAdmin&quot;, isAdmin);\n\n        String token = Jwts.builder()\n                .setClaims(claims)\n                .setSubject(username)\n                .signWith(SECRET_KEY)\n                .setIssuedAt(new Date())\n                .setExpiration(new Date(System.currentTimeMillis() + 36000000))// Tiempo para expiracion del token 10h( hora actual + 1 hora) 3600000 = 1hora\n                .compact();\n\n        response.addHeader(HEADER_AUTHORIZATION, PREFIX_TOKEN + token);\n\n        Map&lt;String, Object&gt; body = new HashMap&lt;&gt;();\n        body.put(&quot;token&quot;, token);\n        body.put(&quot;message&quot;, String.format(&quot;Hola %s, has iniciado sesion con exito&quot;, username));\n        body.put(&quot;username&quot;, username);\n        response.getWriter().write(new ObjectMapper().writeValueAsString(body));\n        response.setStatus(200);\n        response.setContentType(&quot;application/json&quot;);\n    }\n</code></pre>\n<blockquote>\n<p>Axios call</p>\n</blockquote>\n<pre><code>var data = {\n                username: username,\n                password: password\n            }\n      \n            const response = await axios({\n                method: &quot;post&quot;,\n                url: `${urlLogin}`,\n                data: JSON.stringify(data),\n                headers: { \n                    &quot;Content-Type&quot;: &quot;multipart/form-data&quot;\n                },\n            })\n</code></pre>\n<blockquote>\n<p>And Error message in console</p>\n</blockquote>\n<p><a href=\"https://i.stack.imgur.com/iYFzG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/iYFzG.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/BAEen.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BAEen.png\" alt=\"enter image description here\" /></a></p>\n<p>I only receive the token in the response header, but not the body that I indicate in the sucessfulAuthentication method. From postman I have no problem, it works correctly</p>\n<p><a href=\"https://i.stack.imgur.com/NQ5xe.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NQ5xe.png\" alt=\"enter image description here\" /></a></p>\n<p>I hope I have explained myself well. I will be attending any answer / question. Thank you so much</p>\n"},{"tags":["java","scroll","mouse","mousewheel"],"answers":[{"comments":[{"owner":{"account_id":7745,"reputation":189765,"user_id":13531,"accept_rate":75,"display_name":"Michael Myers"},"score":0,"creation_date":1221860302,"post_id":105728,"comment_id":19311,"body_markdown":"MouseWheelListener was introduced in 1.4, according to the API docs that jjnguy posted.","body":"MouseWheelListener was introduced in 1.4, according to the API docs that jjnguy posted."},{"owner":{"account_id":9144,"reputation":6108,"user_id":16779,"accept_rate":89,"display_name":"RichH"},"score":0,"creation_date":1222047380,"post_id":105728,"comment_id":22568,"body_markdown":"You are correct. I&#39;ve updated my comment to include 1.4 - thanks!","body":"You are correct. I&#39;ve updated my comment to include 1.4 - thanks!"}],"tags":[],"owner":{"account_id":9144,"reputation":6108,"user_id":16779,"accept_rate":89,"display_name":"RichH"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1222047354,"creation_date":1221859222,"answer_id":105728,"question_id":105698,"body_markdown":"Mousewheel scrolling is supported in current Swing applications. You could try compiling your application using JDK 1.4, 1.5 or 1.6. Depending on the complexity and environment moving to a new version may or may not be a viable option.\r\n\r\n[This tutorial][1] shows how to write your own mousewheel listener if you want something different to the normal behaviour.\r\n\r\n\r\n  [1]: http://java.sun.com/docs/books/tutorial/uiswing/events/mousewheellistener.html","title":"Is there any way to enable the mousewheel (for scrolling) in Java apps?","body":"<p>Mousewheel scrolling is supported in current Swing applications. You could try compiling your application using JDK 1.4, 1.5 or 1.6. Depending on the complexity and environment moving to a new version may or may not be a viable option.</p>\n\n<p><a href=\"http://java.sun.com/docs/books/tutorial/uiswing/events/mousewheellistener.html\" rel=\"nofollow noreferrer\">This tutorial</a> shows how to write your own mousewheel listener if you want something different to the normal behaviour.</p>\n"},{"tags":[],"owner":{"account_id":7745,"reputation":189765,"user_id":13531,"accept_rate":75,"display_name":"Michael Myers"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1221859591,"creation_date":1221859591,"answer_id":105772,"question_id":105698,"body_markdown":"Without access to the source code, you can&#39;t do it. If you do have access to the source, then do what RichH said.","title":"Is there any way to enable the mousewheel (for scrolling) in Java apps?","body":"<p>Without access to the source code, you can't do it. If you do have access to the source, then do what RichH said.</p>\n"},{"tags":[],"owner":{"account_id":3216,"reputation":12095,"user_id":4600,"display_name":"marcospereira"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1334241495,"creation_date":1221859683,"answer_id":105784,"question_id":105698,"body_markdown":"Take a look Pushing Pixels blog: http://www.pushing-pixels.org/index.php?s=mouse+wheel","title":"Is there any way to enable the mousewheel (for scrolling) in Java apps?","body":"<p>Take a look Pushing Pixels blog: <a href=\"http://www.pushing-pixels.org/index.php?s=mouse+wheel\" rel=\"nofollow noreferrer\">http://www.pushing-pixels.org/index.php?s=mouse+wheel</a></p>\n"},{"tags":[],"owner":{"account_id":7808,"reputation":24390,"user_id":13687,"display_name":"John Gardner"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1221869296,"creation_date":1221869296,"answer_id":106505,"question_id":105698,"body_markdown":"You shouldn&#39;t have to recompile against 1.5 or 1.6 to get mousewheel, unless you wrote custom components.  The mousewheel behaviors were added to the swing classes, so just running old java apps against the new JRE should have mousewheel support without having to do anything (at least in scrollable/JScrollPane based stuff)","title":"Is there any way to enable the mousewheel (for scrolling) in Java apps?","body":"<p>You shouldn't have to recompile against 1.5 or 1.6 to get mousewheel, unless you wrote custom components.  The mousewheel behaviors were added to the swing classes, so just running old java apps against the new JRE should have mousewheel support without having to do anything (at least in scrollable/JScrollPane based stuff)</p>\n"},{"tags":[],"owner":{"account_id":1529851,"reputation":1106,"user_id":9486645,"display_name":"Supercoder"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689095741,"creation_date":1689095741,"answer_id":76664361,"question_id":105698,"body_markdown":"Using the java.awt module, the mouse wheel gets automatically enabled and/or disabled depending where the mouse pointer to given screen coordinates is executed.  \r\n\r\nIt wouldn&#39;t work if the mouse position isn&#39;t located inside the box to scroll up and/down.\r\n\r\nI just make sure the mouseMove coordinates are inside the box area as per the following example:\r\n\r\n    import java.awt.Robot;\r\n    \r\n    public class mouseWheel {\r\n        \r\n       public static void main(String[] args) throws Exception {\r\n    \t\t// Initialize variables\r\n    \t\tRobot robot = new Robot();\r\n    \r\n    \t\t// Move the cursor to an active area in the screen to scroll\r\n    \t\trobot.mouseMove(900, 400);\r\n    \t\t// Wait a bit (6 seconds) to see the cursor with your eyes\r\n    \t\trobot.delay(6000);\r\n    \t\t\r\n    \t\t// Scroll Down (haft a turn)\r\n    \t\trobot.mouseWheel(400);\r\n    \t\t// Wait a bit (6 seconds) to see the screen has scroll Down\r\n    \t\trobot.delay(6000);\r\n    \t\t\r\n    \t\t// Scroll Up (haft a turn)\r\n    \t\trobot.mouseWheel(-400);\r\n    \t\t// Wait a bit (6 seconds) to see the screen has scroll Up\r\n    \t\trobot.delay(6000);\r\n    \t\t\t\t\r\n    \t\t}\r\n        }","title":"Is there any way to enable the mousewheel (for scrolling) in Java apps?","body":"<p>Using the java.awt module, the mouse wheel gets automatically enabled and/or disabled depending where the mouse pointer to given screen coordinates is executed.</p>\n<p>It wouldn't work if the mouse position isn't located inside the box to scroll up and/down.</p>\n<p>I just make sure the mouseMove coordinates are inside the box area as per the following example:</p>\n<pre><code>import java.awt.Robot;\n\npublic class mouseWheel {\n    \n   public static void main(String[] args) throws Exception {\n        // Initialize variables\n        Robot robot = new Robot();\n\n        // Move the cursor to an active area in the screen to scroll\n        robot.mouseMove(900, 400);\n        // Wait a bit (6 seconds) to see the cursor with your eyes\n        robot.delay(6000);\n        \n        // Scroll Down (haft a turn)\n        robot.mouseWheel(400);\n        // Wait a bit (6 seconds) to see the screen has scroll Down\n        robot.delay(6000);\n        \n        // Scroll Up (haft a turn)\n        robot.mouseWheel(-400);\n        // Wait a bit (6 seconds) to see the screen has scroll Up\n        robot.delay(6000);\n                \n        }\n    }\n</code></pre>\n"}],"owner":{"account_id":9353,"reputation":4275,"user_id":17235,"accept_rate":69,"display_name":"Matias Nino"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":526,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":105772,"answer_count":5,"score":2,"last_activity_date":1689095741,"creation_date":1221858997,"question_id":105698,"body_markdown":"Ideally I&#39;d like a way to enable the mouse wheel for scrolling in old compiled java runtime apps, but java code to explicitly utilise it for an individual app would suffice. ","title":"Is there any way to enable the mousewheel (for scrolling) in Java apps?","body":"<p>Ideally I'd like a way to enable the mouse wheel for scrolling in old compiled java runtime apps, but java code to explicitly utilise it for an individual app would suffice. </p>\n"},{"tags":["java","web-services","import","jax-ws"],"comments":[{"owner":{"account_id":9504657,"reputation":7440,"user_id":7064617,"display_name":"JCompetence"},"score":0,"creation_date":1606809101,"post_id":65085811,"comment_id":115066896,"body_markdown":"Can you please show your pom.xml  if it is a maven project, and what java version you are using?","body":"Can you please show your pom.xml  if it is a maven project, and what java version you are using?"},{"owner":{"account_id":13612835,"reputation":31,"user_id":9819732,"display_name":"SAngraM"},"score":2,"creation_date":1606904027,"post_id":65085811,"comment_id":115101705,"body_markdown":"Problem was resolved by switching from java 11 to  JDK 1.8, Thanks","body":"Problem was resolved by switching from java 11 to  JDK 1.8, Thanks"}],"answers":[{"comments":[{"owner":{"account_id":13612835,"reputation":31,"user_id":9819732,"display_name":"SAngraM"},"score":0,"creation_date":1606903993,"post_id":65086612,"comment_id":115101693,"body_markdown":"My problem was resolved by switching from java 11 to  JDK 1.8, Thanks","body":"My problem was resolved by switching from java 11 to  JDK 1.8, Thanks"}],"tags":[],"owner":{"account_id":9504657,"reputation":7440,"user_id":7064617,"display_name":"JCompetence"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1606809282,"creation_date":1606809282,"answer_id":65086612,"question_id":65085811,"body_markdown":"Check that your project has appropriate JDK.\r\n\r\nRight click on the project --&gt; Properties --&gt; Compiler\r\n\r\nI created your file in Java8, and it worked.\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/MvVLm.png","title":"Unable to import javax.jws.webservice for @WebService annotation","body":"<p>Check that your project has appropriate JDK.</p>\n<p>Right click on the project --&gt; Properties --&gt; Compiler</p>\n<p>I created your file in Java8, and it worked.</p>\n<p><a href=\"https://i.stack.imgur.com/MvVLm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MvVLm.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":3842177,"reputation":847,"user_id":3184937,"accept_rate":71,"display_name":"Anish Panthi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686595964,"creation_date":1686595964,"answer_id":76459511,"question_id":65085811,"body_markdown":"Use `javax.jws-api` artifact instead and it will solve your problem. Below is the gradle implementation:\r\n\r\n    implementation &#39;javax.jws:javax.jws-api:1.1&#39;\r\n\r\nCheck the version and use the latest.\r\n\r\nIt is not recommended to downgrade the Java version just to fix the issue.","title":"Unable to import javax.jws.webservice for @WebService annotation","body":"<p>Use <code>javax.jws-api</code> artifact instead and it will solve your problem. Below is the gradle implementation:</p>\n<pre><code>implementation 'javax.jws:javax.jws-api:1.1'\n</code></pre>\n<p>Check the version and use the latest.</p>\n<p>It is not recommended to downgrade the Java version just to fix the issue.</p>\n"},{"tags":[],"owner":{"account_id":22266791,"reputation":21,"user_id":16497451,"display_name":"jose liza"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689095583,"creation_date":1689095583,"answer_id":76664342,"question_id":65085811,"body_markdown":"in the pom.xml file add\r\n\r\n    &lt;dependency&gt;\r\n\t  &lt;groupId&gt;javax.jws&lt;/groupId&gt;\r\n\t  &lt;artifactId&gt;javax.jws-api&lt;/artifactId&gt;\r\n\t  &lt;version&gt;1.1&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n\r\n","title":"Unable to import javax.jws.webservice for @WebService annotation","body":"<p>in the pom.xml file add</p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;javax.jws&lt;/groupId&gt;\n  &lt;artifactId&gt;javax.jws-api&lt;/artifactId&gt;\n  &lt;version&gt;1.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":13612835,"reputation":31,"user_id":9819732,"display_name":"SAngraM"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10688,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":3,"score":3,"last_activity_date":1689095583,"creation_date":1606804922,"question_id":65085811,"body_markdown":"I am working on Eclipse IDE and creating a web-service program. IDE gives an error while importing\r\n```import javax.jws.WebService;```\r\n```import javax.jws.WebMethod;```\r\nerror shows the import javax.jws can not be resolved\r\n\r\n```\r\nimport javax.jws.WebService;\r\nimport javax.jws.WebMethod;\r\n\r\n@WebService\r\npublic class Hello {\r\n    private final String message = &quot;Hello, &quot;;\r\n\r\n    public Hello() {\r\n    }\r\n\r\n    @WebMethod\r\n    public String sayHello(String name) {\r\n        return message + name + &quot;.&quot;;\r\n    }\r\n}\r\n```","title":"Unable to import javax.jws.webservice for @WebService annotation","body":"<p>I am working on Eclipse IDE and creating a web-service program. IDE gives an error while importing\n<code>import javax.jws.WebService;</code>\n<code>import javax.jws.WebMethod;</code>\nerror shows the import javax.jws can not be resolved</p>\n<pre><code>import javax.jws.WebService;\nimport javax.jws.WebMethod;\n\n@WebService\npublic class Hello {\n    private final String message = &quot;Hello, &quot;;\n\n    public Hello() {\n    }\n\n    @WebMethod\n    public String sayHello(String name) {\n        return message + name + &quot;.&quot;;\n    }\n}\n</code></pre>\n"},{"tags":["java","spring-boot","maven","java-opts","javaoptions"],"comments":[{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1689095336,"post_id":76664276,"comment_id":135163580,"body_markdown":"What exactly was the error you got: `I am getting an error when I try to run the integration test`??? It would also help to get the exact spring boot version, JDK version etc. you are using?","body":"What exactly was the error you got: <code>I am getting an error when I try to run the integration test</code>??? It would also help to get the exact spring boot version, JDK version etc. you are using?"},{"owner":{"account_id":4434863,"reputation":63,"user_id":3610979,"display_name":"Chetan"},"score":0,"creation_date":1689140833,"post_id":76664276,"comment_id":135169130,"body_markdown":"@khmarbaise I am using ignite-core maven dependency in pom and it works well til Java 8. But now I want to use Java 17 and ignite-core does not work with the above Java 8  version directly.  We need to add JVM arguments in Java option \n\nhttps://www.appsloveworld.com/java/100/360/how-to-fix-could-not-initialize-class-org-apache-ignite-ignitejdbcthindriver-er\n\nhttps://apacheignite.readme.io/docs/getting-started#running-ignite-with-java-11-and-later-versions","body":"@khmarbaise I am using ignite-core maven dependency in pom and it works well til Java 8. But now I want to use Java 17 and ignite-core does not work with the above Java 8  version directly.  We need to add JVM arguments in Java option   <a href=\"https://www.appsloveworld.com/java/100/360/how-to-fix-could-not-initialize-class-org-apache-ignite-ignitejdbcthindriver-er\" rel=\"nofollow noreferrer\">appsloveworld.com/java/100/360/&hellip;</a>  <a href=\"https://apacheignite.readme.io/docs/getting-started#running-ignite-with-java-11-and-later-versions\" rel=\"nofollow noreferrer\">apacheignite.readme.io/docs/&hellip;</a>"},{"owner":{"account_id":4434863,"reputation":63,"user_id":3610979,"display_name":"Chetan"},"score":0,"creation_date":1689141212,"post_id":76664276,"comment_id":135169176,"body_markdown":"@khmarbaise\n I am getting below error while run springboot test with java 17\nCaused by: java.lang.NoClassDefFoundError: Could not initialize class org.apache.ignite.IgniteJdbcThinDriver","body":"@khmarbaise  I am getting below error while run springboot test with java 17 Caused by: java.lang.NoClassDefFoundError: Could not initialize class org.apache.ignite.IgniteJdbcThinDriver"}],"answers":[{"comments":[{"owner":{"account_id":4434863,"reputation":63,"user_id":3610979,"display_name":"Chetan"},"score":0,"creation_date":1689141402,"post_id":76664327,"comment_id":135169212,"body_markdown":"Thank You, Andy Wilkinson !! It worked for me","body":"Thank You, Andy Wilkinson !! It worked for me"}],"tags":[],"owner":{"account_id":1473276,"reputation":111009,"user_id":1384297,"accept_rate":100,"display_name":"Andy Wilkinson"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689095452,"creation_date":1689095452,"answer_id":76664327,"question_id":76664276,"body_markdown":"`spring-boot-maven-plugin` doesn&#39;t run your tests. It&#39;s Maven&#39;s Surefire plugin that does that. You need to configure its [`argLine` property](https://maven.apache.org/surefire/maven-surefire-plugin/test-mojo.html#argLine):\r\n\r\n```xml\r\n&lt;plugin&gt;\r\n  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n  &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n  &lt;configuration&gt;\r\n    &lt;argLine&gt;--add-opens java.base/java.nio=ALL-UNNAMED&lt;/argLine&gt;\r\n  &lt;/configuration&gt;\r\n&lt;/plugin&gt;\r\n```","title":"How to use Java options in Spring Boot pom file?","body":"<p><code>spring-boot-maven-plugin</code> doesn't run your tests. It's Maven's Surefire plugin that does that. You need to configure its <a href=\"https://maven.apache.org/surefire/maven-surefire-plugin/test-mojo.html#argLine\" rel=\"nofollow noreferrer\"><code>argLine</code> property</a>:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;plugin&gt;\n  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n  &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n  &lt;configuration&gt;\n    &lt;argLine&gt;--add-opens java.base/java.nio=ALL-UNNAMED&lt;/argLine&gt;\n  &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n"}],"owner":{"account_id":4434863,"reputation":63,"user_id":3610979,"display_name":"Chetan"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":173,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689095452,"creation_date":1689095012,"question_id":76664276,"body_markdown":"I am getting an error when I try to run the integration test (`@SpringBootTest`) in my application. I got a solution to use below the Java option\r\n \r\n**--add-opens java.base/java.nio=ALL-UNNAMED**\r\n\r\nI have checked it by editing the run configuration and it is working completely. (Run test case with above argument)  \r\n\r\nBut I want to add through the pom file so when I run **mvn clean install** then it should work. I have tried this but it didn&#39;t work.\r\n\r\n         &lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;executable&gt;true&lt;/executable&gt;\r\n\t\t\t\t\t&lt;jvmArguments&gt;\r\n\t\t\t\t\t\t--add-opens java.base/java.nio=ALL-UNNAMED\r\n\t\t\t\t\t&lt;/jvmArguments&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n          &lt;/plugin&gt;\r\n\r\nI have also checked **-Djava.base/java.nio=ALL-UNNAMED** It is also not working.\r\nWhat is the right way to use this JVM argument so it can set runtime?","title":"How to use Java options in Spring Boot pom file?","body":"<p>I am getting an error when I try to run the integration test (<code>@SpringBootTest</code>) in my application. I got a solution to use below the Java option</p>\n<p><strong>--add-opens java.base/java.nio=ALL-UNNAMED</strong></p>\n<p>I have checked it by editing the run configuration and it is working completely. (Run test case with above argument)</p>\n<p>But I want to add through the pom file so when I run <strong>mvn clean install</strong> then it should work. I have tried this but it didn't work.</p>\n<pre><code>     &lt;plugin&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;configuration&gt;\n                &lt;executable&gt;true&lt;/executable&gt;\n                &lt;jvmArguments&gt;\n                    --add-opens java.base/java.nio=ALL-UNNAMED\n                &lt;/jvmArguments&gt;\n            &lt;/configuration&gt;\n      &lt;/plugin&gt;\n</code></pre>\n<p>I have also checked <strong>-Djava.base/java.nio=ALL-UNNAMED</strong> It is also not working.\nWhat is the right way to use this JVM argument so it can set runtime?</p>\n"},{"tags":["java","spring","spring-boot"],"answers":[{"comments":[{"owner":{"account_id":28982154,"reputation":1,"user_id":22199802,"display_name":"Kunciak"},"score":0,"creation_date":1689003633,"post_id":76648937,"comment_id":135148345,"body_markdown":"Still the same problem, fixed files that how you write. everwhere is to fix it that but it don&#39;t work for me","body":"Still the same problem, fixed files that how you write. everwhere is to fix it that but it don&#39;t work for me"}],"tags":[],"owner":{"account_id":13170666,"reputation":78679,"user_id":9513184,"display_name":"Unmitigated"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1688927182,"creation_date":1688927182,"answer_id":76648937,"question_id":76648839,"body_markdown":"Since, the view resolver prefix is `/WEB-INF/jsp/`, but the JSP file is located in `/WEB-INF/jsp/user/`, then you should return `&quot;user/getAllUsers&quot;` from the controller method so that the correct file is found based on the prefix and suffix.","title":"Could not resolve view with name in java spring .jsp","body":"<p>Since, the view resolver prefix is <code>/WEB-INF/jsp/</code>, but the JSP file is located in <code>/WEB-INF/jsp/user/</code>, then you should return <code>&quot;user/getAllUsers&quot;</code> from the controller method so that the correct file is found based on the prefix and suffix.</p>\n"},{"tags":[],"owner":{"account_id":16341513,"reputation":209,"user_id":11802330,"display_name":"Eric"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689053396,"creation_date":1689053396,"answer_id":76658923,"question_id":76648839,"body_markdown":"Since your jsp file is in user folder  which is in jsp folder, In view resolver change prefix to \r\n\r\n    /WEB-INF/jsp/user/\r\n\r\nInstead of using view resolver, you can also add prefix &amp; suffix in application.properties as below\r\n\r\n    spring.mvc.view.prefix=/WEB-INF/jsp/user/\r\n    spring.mvc.view.suffix=.jsp","title":"Could not resolve view with name in java spring .jsp","body":"<p>Since your jsp file is in user folder  which is in jsp folder, In view resolver change prefix to</p>\n<pre><code>/WEB-INF/jsp/user/\n</code></pre>\n<p>Instead of using view resolver, you can also add prefix &amp; suffix in application.properties as below</p>\n<pre><code>spring.mvc.view.prefix=/WEB-INF/jsp/user/\nspring.mvc.view.suffix=.jsp\n</code></pre>\n"}],"owner":{"account_id":28982154,"reputation":1,"user_id":22199802,"display_name":"Kunciak"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1689095260,"creation_date":1688925783,"question_id":76648839,"body_markdown":"Here is link to project:https://github.com/s25866-pj/UserService &lt;br&gt;\r\nI&#39;m encountering an error while trying to resolve the view &#39;getAllUsers&#39; in the &#39;dispatcherServlet&#39;. Here are the details of the error:\r\n\r\nServlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Could not resolve view with name &#39;getAllUsers&#39; in servlet with name &#39;dispatcherServlet&#39;] with root cause\r\n\r\njakarta.servlet.ServletException: Could not resolve view with name &#39;getAllUsers&#39; in servlet with name &#39;dispatcherServlet&#39;\r\n\tat org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1394) ~[spring-webmvc-6.0.10.jar:6.0.10]\r\n\tat org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1159) ~[spring-webmvc-6.0.10.jar:6.0.10]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1098) ~[spring-webmvc-6.0.10.jar:6.0.10]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.10.jar:6.0.10]\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.10.jar:6.0.10]\r\n\tat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.0.10.jar:6.0.10]\r\n\r\nI have already checked the following:\r\n\r\n- The JSP file &#39;getAllUsers.jsp&#39; exists in the correct location: &#39;webapp/WEB-INF/jsp/user/&#39;.\r\n- The controller has the appropriate method for handling the GET request for the path &#39;/getAllUsers&#39; and returning the view name &#39;getAllUsers&#39;.\r\n- The view resolver configuration in my Spring MVC configuration class is correct with the prefix &#39;/WEB-INF/jsp/&#39; and suffix &#39;.jsp&#39;.\r\n\r\n```\r\n@Controller\r\n@RequestMapping(&quot;/user&quot;)\r\n@EnableWebMvc\r\n@ComponentScan(basePackages = &quot;com.example.UserManagment&quot;)\r\npublic class UserController {\r\n    private final UserService userService;\r\n\r\n    public UserController(UserService userService) {\r\n        this.userService = userService;\r\n    }\r\n    @GetMapping(&quot;/getUser&quot;)\r\n    public Optional&lt;UserModel&gt; showUser(@RequestParam Long id){\r\n        return userService.findById(id);\r\n    }\r\n    @GetMapping(&quot;/getAllUsers&quot;)\r\n    public String showAllUser(Model model){\r\n        List&lt;UserModel&gt; users = userService.getAll();\r\n        model.addAttribute(&quot;users&quot;,users);\r\n        return &quot;getAllUsers&quot;;\r\n    }\r\n\r\n}\r\n```\r\n\r\nI would like the page &quot;http://localhost:8081/user/getAllUsers&quot; to show a list of users instead of the Whitelabel Error Page","title":"Could not resolve view with name in java spring .jsp","body":"<p>Here is link to project:<a href=\"https://github.com/s25866-pj/UserService\" rel=\"nofollow noreferrer\">https://github.com/s25866-pj/UserService</a> <br>\nI'm encountering an error while trying to resolve the view 'getAllUsers' in the 'dispatcherServlet'. Here are the details of the error:</p>\n<p>Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Could not resolve view with name 'getAllUsers' in servlet with name 'dispatcherServlet'] with root cause</p>\n<p>jakarta.servlet.ServletException: Could not resolve view with name 'getAllUsers' in servlet with name 'dispatcherServlet'\nat org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1394) ~[spring-webmvc-6.0.10.jar:6.0.10]\nat org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1159) ~[spring-webmvc-6.0.10.jar:6.0.10]\nat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1098) ~[spring-webmvc-6.0.10.jar:6.0.10]\nat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.10.jar:6.0.10]\nat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.10.jar:6.0.10]\nat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.0.10.jar:6.0.10]</p>\n<p>I have already checked the following:</p>\n<ul>\n<li>The JSP file 'getAllUsers.jsp' exists in the correct location: 'webapp/WEB-INF/jsp/user/'.</li>\n<li>The controller has the appropriate method for handling the GET request for the path '/getAllUsers' and returning the view name 'getAllUsers'.</li>\n<li>The view resolver configuration in my Spring MVC configuration class is correct with the prefix '/WEB-INF/jsp/' and suffix '.jsp'.</li>\n</ul>\n<pre><code>@Controller\n@RequestMapping(&quot;/user&quot;)\n@EnableWebMvc\n@ComponentScan(basePackages = &quot;com.example.UserManagment&quot;)\npublic class UserController {\n    private final UserService userService;\n\n    public UserController(UserService userService) {\n        this.userService = userService;\n    }\n    @GetMapping(&quot;/getUser&quot;)\n    public Optional&lt;UserModel&gt; showUser(@RequestParam Long id){\n        return userService.findById(id);\n    }\n    @GetMapping(&quot;/getAllUsers&quot;)\n    public String showAllUser(Model model){\n        List&lt;UserModel&gt; users = userService.getAll();\n        model.addAttribute(&quot;users&quot;,users);\n        return &quot;getAllUsers&quot;;\n    }\n\n}\n</code></pre>\n<p>I would like the page &quot;http://localhost:8081/user/getAllUsers&quot; to show a list of users instead of the Whitelabel Error Page</p>\n"},{"tags":["java","android","mobile","crash"],"owner":{"account_id":28994641,"reputation":1,"user_id":22209568,"display_name":"ThisUSER12"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689095238,"creation_date":1689095238,"question_id":76664307,"body_markdown":"When I include vector asset in my code an application crashes with text vector has stopped. I wasnt to simply show the ventor on my screen and later change it with onClick metod to another vector. \r\n\r\nI tried to include a android.defaultConfig.vectorDrawables.useSupportLibrary = true  in build.gradle module but it didnt help. Can anyone help me?\r\n\r\nHere is the code that i used in my application.\r\n\r\nMainActivity.java\r\n\r\n```\r\npackage com.example.vector;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.os.Bundle;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.ImageView;\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n    Button btnChange;\r\n    ImageView ivAndroid;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n\r\n        btnChange.findViewById(R.id.btnChange);\r\n        ivAndroid.findViewById(R.id.ivAndroid);\r\n\r\n\r\n\r\n    }\r\n}\r\n```\r\n\r\nXml file\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:orientation=&quot;vertical&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    tools:context=&quot;.MainActivity&quot;&gt;\r\n\r\n\r\n    &lt;ImageView\r\n        android:id=&quot;@+id/ivAndroid&quot;\r\n        android:layout_width=&quot;180dp&quot;\r\n        android:layout_height=&quot;180dp&quot;\r\n        android:layout_gravity=&quot;center&quot;\r\n        app:srcCompat=&quot;@drawable/android&quot;\r\n        tools:layout_editor_absoluteX=&quot;157dp&quot;\r\n        tools:layout_editor_absoluteY=&quot;20dp&quot; /&gt;\r\n\r\n    &lt;Button\r\n        android:id=&quot;@+id/btnChange&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:layout_marginLeft=&quot;20dp&quot;\r\n        android:layout_marginTop=&quot;50dp&quot;\r\n        android:layout_marginRight=&quot;20dp&quot;\r\n        android:text=&quot;Change&quot; /&gt;\r\n\r\n&lt;/LinearLayout&gt;\r\n```\r\n\r\n```\r\nand the error message\r\n\r\n\r\nChecking for metadata for AppLocalesMetadataHolderService : Service not found\r\nShutting down VM\r\nFATAL EXCEPTION: main\r\nProcess: com.example.vector, PID: 27072\r\n                                                                                                    java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.vector/com.example.vector.MainActivity}: java.lang.NullPointerException: Attempt to invoke virtual method &#39;android.view.View android.widget.Button.findViewById(int)&#39; on a null object reference\r\nat android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2778)\r\nat android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2856)\r\nat android.app.ActivityThread.-wrap11(Unknown Source:0)\r\nat android.app.ActivityThread$H.handleMessage(ActivityThread.java:1589)\r\nat android.os.Handler.dispatchMessage(Handler.java:106)\r\nat android.os.Looper.loop(Looper.java:164)\r\nat android.app.ActivityThread.main(ActivityThread.java:6494)\r\nat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:438)\r\nat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:807)\r\nCaused by: java.lang.NullPointerException: Attempt to invoke virtual method &#39;android.view.View android.widget.Button.findViewById(int)&#39; on a null object reference\r\n","title":"Why does vector asset crashes in android studio application?","body":"<p>When I include vector asset in my code an application crashes with text vector has stopped. I wasnt to simply show the ventor on my screen and later change it with onClick metod to another vector.</p>\n<p>I tried to include a android.defaultConfig.vectorDrawables.useSupportLibrary = true  in build.gradle module but it didnt help. Can anyone help me?</p>\n<p>Here is the code that i used in my application.</p>\n<p>MainActivity.java</p>\n<pre><code>package com.example.vector;\n\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport android.os.Bundle;\nimport android.view.View;\nimport android.widget.Button;\nimport android.widget.ImageView;\n\npublic class MainActivity extends AppCompatActivity {\n    Button btnChange;\n    ImageView ivAndroid;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n\n        btnChange.findViewById(R.id.btnChange);\n        ivAndroid.findViewById(R.id.ivAndroid);\n\n\n\n    }\n}\n</code></pre>\n<p>Xml file</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:orientation=&quot;vertical&quot;\n    android:layout_height=&quot;match_parent&quot;\n    tools:context=&quot;.MainActivity&quot;&gt;\n\n\n    &lt;ImageView\n        android:id=&quot;@+id/ivAndroid&quot;\n        android:layout_width=&quot;180dp&quot;\n        android:layout_height=&quot;180dp&quot;\n        android:layout_gravity=&quot;center&quot;\n        app:srcCompat=&quot;@drawable/android&quot;\n        tools:layout_editor_absoluteX=&quot;157dp&quot;\n        tools:layout_editor_absoluteY=&quot;20dp&quot; /&gt;\n\n    &lt;Button\n        android:id=&quot;@+id/btnChange&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_marginLeft=&quot;20dp&quot;\n        android:layout_marginTop=&quot;50dp&quot;\n        android:layout_marginRight=&quot;20dp&quot;\n        android:text=&quot;Change&quot; /&gt;\n\n&lt;/LinearLayout&gt;\n</code></pre>\n<pre><code>and the error message\n\n\nChecking for metadata for AppLocalesMetadataHolderService : Service not found\nShutting down VM\nFATAL EXCEPTION: main\nProcess: com.example.vector, PID: 27072\n                                                                                                    java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.vector/com.example.vector.MainActivity}: java.lang.NullPointerException: Attempt to invoke virtual method 'android.view.View android.widget.Button.findViewById(int)' on a null object reference\nat android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2778)\nat android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2856)\nat android.app.ActivityThread.-wrap11(Unknown Source:0)\nat android.app.ActivityThread$H.handleMessage(ActivityThread.java:1589)\nat android.os.Handler.dispatchMessage(Handler.java:106)\nat android.os.Looper.loop(Looper.java:164)\nat android.app.ActivityThread.main(ActivityThread.java:6494)\nat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:438)\nat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:807)\nCaused by: java.lang.NullPointerException: Attempt to invoke virtual method 'android.view.View android.widget.Button.findViewById(int)' on a null object reference\n</code></pre>\n"},{"tags":["java","oop"],"comments":[{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":1,"creation_date":1689092377,"post_id":76663945,"comment_id":135163048,"body_markdown":"If you want to avoid writing class name you can use static import. So to use `sleep` instead of `Thread.sleep` add at import section `import static java.lang.Thread.sleep;`.","body":"If you want to avoid writing class name you can use static import. So to use <code>sleep</code> instead of <code>Thread.sleep</code> add at import section <code>import static java.lang.Thread.sleep;</code>."}],"answers":[{"tags":[],"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1689092295,"creation_date":1689092295,"answer_id":76663966,"question_id":76663945,"body_markdown":"In this case, it&#39;s because `this.sleep()` (and `this` is *implicit*) **is** `Thread.sleep()` (because of inheritance). **But** it&#39;s also possible to `import static` methods.","title":"do we need to call class for static methods?","body":"<p>In this case, it's because <code>this.sleep()</code> (and <code>this</code> is <em>implicit</em>) <strong>is</strong> <code>Thread.sleep()</code> (because of inheritance). <strong>But</strong> it's also possible to <code>import static</code> methods.</p>\n"},{"tags":[],"owner":{"account_id":216120,"reputation":49213,"user_id":471160,"accept_rate":90,"display_name":"marcinj"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1689093037,"creation_date":1689093037,"answer_id":76664039,"question_id":76663945,"body_markdown":"  Yes, it is possible to use sleep() without a reference to Thread in this context, because sleep() is a static method in the Thread class and the class you are using - ThreadNoJoin - extends Thread. When a class extends another class, it inherits all of its public and protected methods and can use them directly. \r\n\r\n  However, it&#39;s important to note that just because you can do this does not mean you should. Using Thread.sleep() is more readable and clearer than just using sleep(), because it makes it clear where the method is coming from. \r\n\r\n  You can use a feature called : static import, which allows you to import all static methods from a class. This way you could use the sleep() method without mentioning Thread every time. Please note that this approach should not be used often, because it can make the code more difficult to read if it&#39;s not clear where the method is coming from. When you see sleep() without any context, you may not immediately know it&#39;s a method from Thread. Therefore, the readability of the code may suffer, especially for people who are not familiar with the codebase.","title":"do we need to call class for static methods?","body":"<p>Yes, it is possible to use sleep() without a reference to Thread in this context, because sleep() is a static method in the Thread class and the class you are using - ThreadNoJoin - extends Thread. When a class extends another class, it inherits all of its public and protected methods and can use them directly.</p>\n<p>However, it's important to note that just because you can do this does not mean you should. Using Thread.sleep() is more readable and clearer than just using sleep(), because it makes it clear where the method is coming from.</p>\n<p>You can use a feature called : static import, which allows you to import all static methods from a class. This way you could use the sleep() method without mentioning Thread every time. Please note that this approach should not be used often, because it can make the code more difficult to read if it's not clear where the method is coming from. When you see sleep() without any context, you may not immediately know it's a method from Thread. Therefore, the readability of the code may suffer, especially for people who are not familiar with the codebase.</p>\n"}],"owner":{"account_id":12995871,"reputation":3,"user_id":13385690,"display_name":"rifleking"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76664039,"answer_count":2,"score":0,"last_activity_date":1689095020,"creation_date":1689092150,"question_id":76663945,"body_markdown":"given a static method in a class, are there instances where we don&#39;t need to call &quot;Class.method()&quot; to run the method?\r\n\r\nFor example in the following code, is it allowed to just call `sleep()` without a reference to `Thread` (the class where the method comes from)?\r\n\r\n```\r\npublic class ThreadNoJoin extends Thread {\r\n   public void run() {\r\n   for (int i = 1; i &lt;= 3; i++) {\r\n   try {\r\n      sleep((int) (Math.random() * 3000));    //this is the important line\r\n   } catch (InterruptedException e) {\r\n      e.printStackTrace();\r\n   }\r\n   System.out.println(i);\r\n  }\r\n}\r\n```\r\n\r\nI know `Thread.sleep()` will work, but I was curious why `sleep()` on its own works as well.","title":"do we need to call class for static methods?","body":"<p>given a static method in a class, are there instances where we don't need to call &quot;Class.method()&quot; to run the method?</p>\n<p>For example in the following code, is it allowed to just call <code>sleep()</code> without a reference to <code>Thread</code> (the class where the method comes from)?</p>\n<pre><code>public class ThreadNoJoin extends Thread {\n   public void run() {\n   for (int i = 1; i &lt;= 3; i++) {\n   try {\n      sleep((int) (Math.random() * 3000));    //this is the important line\n   } catch (InterruptedException e) {\n      e.printStackTrace();\n   }\n   System.out.println(i);\n  }\n}\n</code></pre>\n<p>I know <code>Thread.sleep()</code> will work, but I was curious why <code>sleep()</code> on its own works as well.</p>\n"},{"tags":["java","spring","spring-boot","maven","flyway"],"answers":[{"tags":[],"owner":{"account_id":7300136,"reputation":1160,"user_id":5563263,"accept_rate":57,"display_name":"Loading"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689094858,"creation_date":1689094858,"answer_id":76664259,"question_id":76663567,"body_markdown":"I suspect you are trying to migrate via maven cli:\r\n\r\n*mvn migrate* or something like that.\r\n\r\nYou application properties are NOT used when doing the migration via the CLI.\r\n\r\nFor the cli task, you need to supply the variables like this:\r\n\r\n    &lt;plugin&gt;\r\n    ...\r\n    &lt;configuration&gt;\r\n        &lt;user&gt;myUser&lt;/user&gt;\r\n        &lt;password&gt;mySecretPwd&lt;/password&gt;\r\n        &lt;schemas&gt;\r\n            &lt;schema&gt;schema1&lt;/schema&gt;\r\n            &lt;schema&gt;schema2&lt;/schema&gt;\r\n            &lt;schema&gt;schema3&lt;/schema&gt;\r\n        &lt;/schemas&gt;\r\n        &lt;placeholders&gt;\r\n            &lt;keyABC&gt;valueXYZ&lt;/keyABC&gt;\r\n            &lt;otherplaceholder&gt;value123&lt;/otherplaceholder&gt;\r\n        &lt;/placeholders&gt;\r\n    &lt;/configuration&gt;\r\n    &lt;/plugin&gt;\r\n\r\nSee [here][1]\r\n\r\n\r\n  [1]: https://flywaydb.org/documentation/usage/maven/","title":"Cannot connect to database url with flyway through Maven","body":"<p>I suspect you are trying to migrate via maven cli:</p>\n<p><em>mvn migrate</em> or something like that.</p>\n<p>You application properties are NOT used when doing the migration via the CLI.</p>\n<p>For the cli task, you need to supply the variables like this:</p>\n<pre><code>&lt;plugin&gt;\n...\n&lt;configuration&gt;\n    &lt;user&gt;myUser&lt;/user&gt;\n    &lt;password&gt;mySecretPwd&lt;/password&gt;\n    &lt;schemas&gt;\n        &lt;schema&gt;schema1&lt;/schema&gt;\n        &lt;schema&gt;schema2&lt;/schema&gt;\n        &lt;schema&gt;schema3&lt;/schema&gt;\n    &lt;/schemas&gt;\n    &lt;placeholders&gt;\n        &lt;keyABC&gt;valueXYZ&lt;/keyABC&gt;\n        &lt;otherplaceholder&gt;value123&lt;/otherplaceholder&gt;\n    &lt;/placeholders&gt;\n&lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>See <a href=\"https://flywaydb.org/documentation/usage/maven/\" rel=\"nofollow noreferrer\">here</a></p>\n"}],"owner":{"account_id":28964851,"reputation":1,"user_id":22186559,"display_name":"Mary"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":127,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689094858,"creation_date":1689089230,"question_id":76663567,"body_markdown":"I&#39;m trying to run my flyway migrations, but maven is returning this error of the url config but apparently everything is ok,i tested my application in insomnia (its an API).\r\n i&#39;m using postgreSQL for database.\r\n\r\n```\r\norg.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.flywaydb:flyway-maven-plugin:9.16.3:migrate (default-cli) on project demo: org.flywaydb.core.api.FlywayException: Unable to connect to the database. Configure the url, user and password!\r\n\r\n```\r\n\r\n\r\nthats my application.properties:\r\n```\r\n spring.datasource.url=jdbc:postgresql://localhost:5432/candidate\r\nspring.datasource.username=myusername\r\nspring.datasource.password=mypassword\r\nspring.flyway.baselineOnMigrate=true\r\n\r\n```\r\n\r\nIm trying to run the migrations. ","title":"Cannot connect to database url with flyway through Maven","body":"<p>I'm trying to run my flyway migrations, but maven is returning this error of the url config but apparently everything is ok,i tested my application in insomnia (its an API).\ni'm using postgreSQL for database.</p>\n<pre><code>org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.flywaydb:flyway-maven-plugin:9.16.3:migrate (default-cli) on project demo: org.flywaydb.core.api.FlywayException: Unable to connect to the database. Configure the url, user and password!\n\n</code></pre>\n<p>thats my application.properties:</p>\n<pre><code> spring.datasource.url=jdbc:postgresql://localhost:5432/candidate\nspring.datasource.username=myusername\nspring.datasource.password=mypassword\nspring.flyway.baselineOnMigrate=true\n\n</code></pre>\n<p>Im trying to run the migrations.</p>\n"},{"tags":["java","spring-data-jpa"],"comments":[{"owner":{"account_id":1600162,"reputation":1885,"user_id":1481345,"display_name":"Ale Zalazar"},"score":0,"creation_date":1689089923,"post_id":76663466,"comment_id":135162535,"body_markdown":"Can you also share your entities&#39; JPA related configuration?","body":"Can you also share your entities&#39; JPA related configuration?"},{"owner":{"account_id":15591029,"reputation":19,"user_id":11248073,"display_name":"StingerWolf"},"score":0,"creation_date":1689091633,"post_id":76663466,"comment_id":135162918,"body_markdown":"Hi, yes, I shared them too now, hope it helps.","body":"Hi, yes, I shared them too now, hope it helps."}],"answers":[{"comments":[{"owner":{"account_id":15591029,"reputation":19,"user_id":11248073,"display_name":"StingerWolf"},"score":0,"creation_date":1689091840,"post_id":76663896,"comment_id":135162948,"body_markdown":"Hi, I just copied the entities in, hope it makes things clearer.","body":"Hi, I just copied the entities in, hope it makes things clearer."},{"owner":{"account_id":1966786,"reputation":527,"user_id":1766826,"accept_rate":60,"display_name":"Michał Dębski"},"score":0,"creation_date":1689092563,"post_id":76663896,"comment_id":135163085,"body_markdown":"try to replace places where you delete something with &quot;on cascade delete&quot; constraint option and places where you set something to null with &quot;on cascade set null&quot; constrain option. This should allow you to avoid any problems with transactions and relations you might have forgot about.","body":"try to replace places where you delete something with &quot;on cascade delete&quot; constraint option and places where you set something to null with &quot;on cascade set null&quot; constrain option. This should allow you to avoid any problems with transactions and relations you might have forgot about."},{"owner":{"account_id":15591029,"reputation":19,"user_id":11248073,"display_name":"StingerWolf"},"score":0,"creation_date":1689094749,"post_id":76663896,"comment_id":135163471,"body_markdown":"But what about many to many? I have read here, that cascade.all in general is bad idea for many to many because of cascade remove. Here:\nhttps://vladmihalcea.com/a-beginners-guide-to-jpa-and-hibernate-cascade-types/","body":"But what about many to many? I have read here, that cascade.all in general is bad idea for many to many because of cascade remove. Here: <a href=\"https://vladmihalcea.com/a-beginners-guide-to-jpa-and-hibernate-cascade-types/\" rel=\"nofollow noreferrer\">vladmihalcea.com/&hellip;</a>"},{"owner":{"account_id":1966786,"reputation":527,"user_id":1766826,"accept_rate":60,"display_name":"Michał Dębski"},"score":0,"creation_date":1689109226,"post_id":76663896,"comment_id":135166167,"body_markdown":"I saw some solutions online to do it in hibernate but they were over complicated. I think the article you mention summarizes it pretty well at the end. I don’t remember if I ever used many to many without an intermediate entity because there is always something to save besides foreign keys. If I were you I would create it because: it gives you more control over hibernate and is more forward looking (you can add columns without costly migrations). I admit it is not as pure but I found it really hard to go all the way with hibernate - it is better to keep it simple.","body":"I saw some solutions online to do it in hibernate but they were over complicated. I think the article you mention summarizes it pretty well at the end. I don’t remember if I ever used many to many without an intermediate entity because there is always something to save besides foreign keys. If I were you I would create it because: it gives you more control over hibernate and is more forward looking (you can add columns without costly migrations). I admit it is not as pure but I found it really hard to go all the way with hibernate - it is better to keep it simple."},{"owner":{"account_id":1966786,"reputation":527,"user_id":1766826,"accept_rate":60,"display_name":"Michał Dębski"},"score":0,"creation_date":1689109262,"post_id":76663896,"comment_id":135166170,"body_markdown":"And the passage from the blog I mentioned: “Practical test cases for real many-to-many associations are rare. Most of the time you need additional information stored in the link table. In this case, it is much better to use two one-to-many associations to an intermediate link class. In fact, most associations are one-to-many and many-to-one. For this reason, you should proceed cautiously when using any other association style.”","body":"And the passage from the blog I mentioned: “Practical test cases for real many-to-many associations are rare. Most of the time you need additional information stored in the link table. In this case, it is much better to use two one-to-many associations to an intermediate link class. In fact, most associations are one-to-many and many-to-one. For this reason, you should proceed cautiously when using any other association style.”"},{"owner":{"account_id":15591029,"reputation":19,"user_id":11248073,"display_name":"StingerWolf"},"score":0,"creation_date":1689158624,"post_id":76663896,"comment_id":135172861,"body_markdown":"Thank you, yes, it helped to use an intermediate entity, no more &quot;raw&quot; many to many connections.","body":"Thank you, yes, it helped to use an intermediate entity, no more &quot;raw&quot; many to many connections."}],"tags":[],"owner":{"account_id":1966786,"reputation":527,"user_id":1766826,"accept_rate":60,"display_name":"Michał Dębski"},"comment_count":6,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689091744,"creation_date":1689091744,"answer_id":76663896,"question_id":76663466,"body_markdown":"It should not be necessary to delete comments by hand. As you mentioned this should be done by cascade option in foreign key definition. For some relations &quot;delete&quot; option seems sufficient but looks at your code it looks like for parent comment you need &quot;set null&quot; cascade options.\r\n\r\nHowever, how to set it up depends on how you manage your schema. If you configure your tables using SQL DDL then those options can usually be set on  along with foreign key defintion. ex.\r\n\r\n```sql\r\nCREATE TABLE users (\r\n    user_id integer PRIMARY KEY\r\n);\r\n\r\nCREATE TABLE comments (\r\n    comment_id integer PRIMARY KEY,\r\n    user_id integer REFERENCES users ON DELETE CASCADE, -- will delete comments when user is deleted\r\n    parent_id integer REFERENCES comments ON DELETE SET NULL, -- will set to null when parent is deleted\r\n);\r\n\r\n```\r\n\r\nIf you use spring annotation then you need to set specific options. See:\r\n1. one-to-many https://www.baeldung.com/spring-jpa-unidirectional-one-to-many-and-cascading-delete \r\n\r\n```java\r\n    @OneToMany(cascade = CascadeType.ALL, orphanRemoval = true)\r\n    private Set&lt;Comment&gt; comments = new HashSet&lt;&gt;();\r\n```\r\n\r\n2. many-to-one https://stackoverflow.com/questions/7197181/jpa-unidirectional-many-to-one-and-cascading-delete\r\n\r\n```java\r\n    @ManyToOne\r\n    @OnDelete(action = OnDeleteAction.CASCADE)\r\n    private Parent parent;\r\n```\r\n\r\n3. &quot;set null&quot; is more complicated, I would recommend setting foreign key constraint accordingly https://stackoverflow.com/questions/9944137/have-jpa-hibernate-to-replicate-the-on-delete-set-null-functionality\r\n\r\n```java\r\n@ForeignKey(name = &quot;fk_student_teacher&quot;,\r\n            foreignKeyDefinition = &quot; /*FOREIGN KEY in sql that sets ON DELETE SET NULL*/&quot;)\r\n```","title":"I get a foreign key constraint error in JPA","body":"<p>It should not be necessary to delete comments by hand. As you mentioned this should be done by cascade option in foreign key definition. For some relations &quot;delete&quot; option seems sufficient but looks at your code it looks like for parent comment you need &quot;set null&quot; cascade options.</p>\n<p>However, how to set it up depends on how you manage your schema. If you configure your tables using SQL DDL then those options can usually be set on  along with foreign key defintion. ex.</p>\n<pre class=\"lang-sql prettyprint-override\"><code>CREATE TABLE users (\n    user_id integer PRIMARY KEY\n);\n\nCREATE TABLE comments (\n    comment_id integer PRIMARY KEY,\n    user_id integer REFERENCES users ON DELETE CASCADE, -- will delete comments when user is deleted\n    parent_id integer REFERENCES comments ON DELETE SET NULL, -- will set to null when parent is deleted\n);\n\n</code></pre>\n<p>If you use spring annotation then you need to set specific options. See:</p>\n<ol>\n<li>one-to-many <a href=\"https://www.baeldung.com/spring-jpa-unidirectional-one-to-many-and-cascading-delete\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-jpa-unidirectional-one-to-many-and-cascading-delete</a></li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>    @OneToMany(cascade = CascadeType.ALL, orphanRemoval = true)\n    private Set&lt;Comment&gt; comments = new HashSet&lt;&gt;();\n</code></pre>\n<ol start=\"2\">\n<li>many-to-one <a href=\"https://stackoverflow.com/questions/7197181/jpa-unidirectional-many-to-one-and-cascading-delete\">JPA: unidirectional many-to-one and cascading delete</a></li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>    @ManyToOne\n    @OnDelete(action = OnDeleteAction.CASCADE)\n    private Parent parent;\n</code></pre>\n<ol start=\"3\">\n<li>&quot;set null&quot; is more complicated, I would recommend setting foreign key constraint accordingly <a href=\"https://stackoverflow.com/questions/9944137/have-jpa-hibernate-to-replicate-the-on-delete-set-null-functionality\">Have JPA/Hibernate to replicate the &quot;ON DELETE SET NULL&quot; functionality</a></li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>@ForeignKey(name = &quot;fk_student_teacher&quot;,\n            foreignKeyDefinition = &quot; /*FOREIGN KEY in sql that sets ON DELETE SET NULL*/&quot;)\n</code></pre>\n"}],"owner":{"account_id":15591029,"reputation":19,"user_id":11248073,"display_name":"StingerWolf"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":100,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76663896,"answer_count":1,"score":0,"last_activity_date":1689094824,"creation_date":1689088593,"question_id":76663466,"body_markdown":"I am currently working a small project. I am using java and Spring Data JPA. My issue is the following. When I try to delete a blog, which has connections to other entities like favourites, comment, tag etc. I get a foreign constraint error. I do understand what issue is, that when trying to delete or remove an entity and the table behind it is connected to another via a foreign key, it is not possible to delete, only when one removes the child entities etc. Because blog has a one to many connection with comment and a many to many connection with tag and is a subclass of the superclass Post which has a many to one relatiuonship with the User entity, deletion cannot be done by using cascade remove etc.Theorethically in my service code I did everything to remove the connections manually, but somehow it is not working, I get a foreign contraint error when I run the rest controller:\r\n\r\n{\r\n  &quot;message&quot;: &quot;could not execute statement [(conn=8) Cannot delete or update a parent row: a foreign key constraint fails (`blogdb`.`comment`, CONSTRAINT `FKhvh0e2ybgg16bpu229a5teje7` FOREIGN KEY (`parent_comment_id`) REFERENCES `comment` (`id`))] [delete from comment where id=?]&quot;,\r\n  &quot;httpError&quot;: 404\r\n}\r\n\r\nIn one of my previous builds, where I did not have &quot;comment&quot;, it gave me the same for the &quot;favorites&quot; table, so it is something I am doing systemathically wrong and it is not entity specific. Below my service code, thank you for your help:\r\n\r\n```@Transactional\r\n    public void deleteById(Long id) {\r\n\r\n        final Blog blogToDelete = blogRepository.findById(id).orElseThrow(EntityNotFoundException::new);\r\n\r\n        // remove blog comments\r\n        removeBlogComments(blogToDelete);\r\n\r\n        // remove favorite blogs\r\n        removeFavoriteBlogs(id);\r\n\r\n        // remove the blog of the user\r\n        blogToDelete.getUser().getPosts().removeIf(x -&gt; x.getId().equals(id));\r\n        userRepository.save(blogToDelete.getUser());\r\n\r\n        blogRepository.delete(blogToDelete);\r\n    }\r\n\r\n    private void removeBlogComments(Blog blogToDelete) {\r\n\r\n        final List&lt;Comment&gt; blogCommentsToDelete = blogToDelete.getComments();\r\n        blogCommentsToDelete.forEach(x -&gt; x.setParentComment(null));\r\n        commentRepository.saveAll(blogCommentsToDelete);\r\n\r\n        blogCommentsToDelete.forEach(x -&gt; {\r\n            x.getUser().getPosts().removeIf(y-&gt;y.getId().equals(x.getId()));\r\n            commentRepository.delete(x);\r\n            entityManager.flush();\r\n        });\r\n        blogToDelete.getComments().clear();\r\n        blogRepository.save(blogToDelete);\r\n        entityManager.flush();\r\n    }\r\n\r\n    private void removeFavoriteBlogs(Long blogId) {\r\n        final List&lt;User&gt; allByFavoriteBlog = userRepository.findAllByFavoriteBlog(blogId);\r\n        allByFavoriteBlog.forEach(x -&gt; {\r\n            boolean b = x.getFavoriteBlogs().removeIf(y -&gt; y.getId().equals(x.getId()));\r\n            if (b) {\r\n                userRepository.save(x);\r\n                entityManager.flush();\r\n            }\r\n        });\r\n    }\r\n```\r\nThe Post entity:\r\n\r\n```package wien.codersbay.ip.blog.model;\r\n\r\nimport jakarta.persistence.Column;\r\nimport jakarta.persistence.Entity;\r\nimport jakarta.persistence.GeneratedValue;\r\nimport jakarta.persistence.GenerationType;\r\nimport jakarta.persistence.Id;\r\nimport jakarta.persistence.Inheritance;\r\nimport jakarta.persistence.InheritanceType;\r\nimport jakarta.persistence.JoinColumn;\r\nimport jakarta.persistence.Lob;\r\nimport jakarta.persistence.ManyToOne;\r\nimport jakarta.persistence.OneToMany;\r\nimport lombok.AllArgsConstructor;\r\nimport lombok.Builder;\r\nimport lombok.Getter;\r\nimport lombok.NoArgsConstructor;\r\nimport lombok.Setter;\r\nimport lombok.experimental.SuperBuilder;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\n@Entity\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@Inheritance(strategy = InheritanceType.JOINED)\r\n@SuperBuilder\r\npublic class Post {\r\n\r\n    @Getter\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Column(name = &quot;id&quot;)\r\n    private Long id;\r\n\r\n    @Getter\r\n    @Setter\r\n    @Column(name = &quot;likes&quot;)\r\n    @Builder.Default\r\n    private int likes = 0;\r\n\r\n    @Getter\r\n    @Setter\r\n    @Lob\r\n    @Column(name = &quot;content&quot;, nullable = false, columnDefinition = &quot;LONGTEXT&quot;)\r\n    private String content;\r\n\r\n    @Getter\r\n    @Setter\r\n    @ManyToOne\r\n    @JoinColumn(name = &quot;user_id&quot;, referencedColumnName = &quot;id&quot;)\r\n    private User user;\r\n\r\n}\r\n```\r\nThe Blog entity:\r\n```package wien.codersbay.ip.blog.model;\r\n\r\nimport jakarta.persistence.Column;\r\nimport jakarta.persistence.Entity;\r\nimport jakarta.persistence.JoinColumn;\r\nimport jakarta.persistence.JoinTable;\r\nimport jakarta.persistence.Lob;\r\nimport jakarta.persistence.ManyToMany;\r\nimport jakarta.persistence.OneToMany;\r\nimport jakarta.persistence.PrimaryKeyJoinColumn;\r\nimport jakarta.persistence.Table;\r\nimport lombok.AllArgsConstructor;\r\nimport lombok.Builder;\r\nimport lombok.EqualsAndHashCode;\r\nimport lombok.Getter;\r\nimport lombok.NoArgsConstructor;\r\nimport lombok.Setter;\r\nimport lombok.experimental.SuperBuilder;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\n@EqualsAndHashCode(callSuper = true)\r\n@Entity\r\n@PrimaryKeyJoinColumn(name = &quot;id&quot;)\r\n@Table(name = &quot;blog&quot;)\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@SuperBuilder\r\n@Getter\r\n@Setter\r\npublic class Blog extends Post {\r\n\r\n    @Column(name = &quot;title&quot;, nullable = false)\r\n    private String title;\r\n\r\n    @Column(nullable = false)\r\n    @Builder.Default\r\n    @ManyToMany\r\n    @JoinTable(\r\n            name = &quot;blog_tags&quot;,\r\n            joinColumns = @JoinColumn(name=&quot;blog_id&quot;, referencedColumnName = &quot;id&quot;),\r\n            inverseJoinColumns = @JoinColumn(name=&quot;tag_id&quot;, referencedColumnName = &quot;id&quot;))\r\n    private List&lt;Tag&gt; tags = new ArrayList&lt;&gt;();\r\n\r\n    @Lob\r\n    @Column(columnDefinition = &quot;LONGTEXT&quot;)\r\n    private String thumbnail;\r\n\r\n    @OneToMany(mappedBy = &quot;blog&quot;)\r\n    @Builder.Default\r\n    private List&lt;Comment&gt; comments = new ArrayList&lt;&gt;();\r\n\r\n}\r\n```\r\nThe User entity:\r\n\r\n```package wien.codersbay.ip.blog.model;\r\n\r\nimport jakarta.persistence.Column;\r\nimport jakarta.persistence.Entity;\r\nimport jakarta.persistence.GeneratedValue;\r\nimport jakarta.persistence.GenerationType;\r\nimport jakarta.persistence.Id;\r\nimport jakarta.persistence.JoinColumn;\r\nimport jakarta.persistence.JoinTable;\r\nimport jakarta.persistence.ManyToMany;\r\nimport jakarta.persistence.OneToMany;\r\nimport jakarta.persistence.Table;\r\nimport lombok.AllArgsConstructor;\r\nimport lombok.Builder;\r\nimport lombok.Getter;\r\nimport lombok.NoArgsConstructor;\r\nimport lombok.Setter;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\n@Entity\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@Builder\r\n@Table(name = &quot;benutzer&quot;)\r\npublic class User {\r\n\r\n    @Getter\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Column(name = &quot;id&quot;)\r\n    private Long id;\r\n\r\n    @Getter\r\n    @Setter\r\n    @Column(name = &quot;username&quot;, nullable = false, unique = true)\r\n    private String username;\r\n\r\n    @Getter\r\n    @Setter\r\n    @Column(name = &quot;email&quot;, nullable = false, unique = true)\r\n    private String email;\r\n\r\n    @Getter\r\n    @Setter\r\n    @Column(name = &quot;password&quot;, nullable = false)\r\n    private String password;\r\n\r\n    @Getter\r\n    @Setter\r\n    @OneToMany(mappedBy = &quot;user&quot;)\r\n    @Builder.Default\r\n    private List&lt;Post&gt; posts = new ArrayList&lt;&gt;();\r\n\r\n    @Getter\r\n    @Setter\r\n    @Builder.Default\r\n    @ManyToMany\r\n    @JoinTable(\r\n            name = &quot;favorites&quot;,\r\n            joinColumns = @JoinColumn(name = &quot;user_id&quot;, referencedColumnName = &quot;id&quot;),\r\n            inverseJoinColumns = @JoinColumn(name = &quot;blog_id&quot;, referencedColumnName = &quot;id&quot;)\r\n    )\r\n    private List&lt;Blog&gt; favoriteBlogs = new ArrayList&lt;&gt;();\r\n}\r\n```\r\nThe Tag entity:\r\n\r\n```package wien.codersbay.ip.blog.model;\r\n\r\nimport jakarta.persistence.Column;\r\nimport jakarta.persistence.Entity;\r\nimport jakarta.persistence.GeneratedValue;\r\nimport jakarta.persistence.GenerationType;\r\nimport jakarta.persistence.Id;\r\nimport jakarta.persistence.Table;\r\nimport lombok.AllArgsConstructor;\r\nimport lombok.Builder;\r\nimport lombok.Getter;\r\nimport lombok.NoArgsConstructor;\r\nimport lombok.Setter;\r\n\r\n@Entity\r\n@Table(name = &quot;tag&quot;)\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@Builder\r\npublic class Tag {\r\n\r\n    @Getter\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Column(name = &quot;id&quot;)\r\n    private Long id;\r\n\r\n    @Getter\r\n    @Setter\r\n    @Column(name = &quot;title&quot;, nullable = false)\r\n    private String title;\r\n}\r\n```\r\nThe Comment entity:\r\n```package wien.codersbay.ip.blog.model;\r\n\r\nimport jakarta.persistence.*;\r\nimport jakarta.validation.constraints.NotNull;\r\nimport lombok.AllArgsConstructor;\r\nimport lombok.EqualsAndHashCode;\r\nimport lombok.Getter;\r\nimport lombok.NoArgsConstructor;\r\nimport lombok.Setter;\r\nimport lombok.experimental.SuperBuilder;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\n@EqualsAndHashCode(callSuper = true)\r\n@Entity\r\n@PrimaryKeyJoinColumn(name = &quot;id&quot;)\r\n@Table(name = &quot;comment&quot;)\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@SuperBuilder\r\n@Getter\r\n@Setter\r\npublic class Comment extends Post {\r\n\r\n    @ManyToOne\r\n    @JoinColumn(name = &quot;blog_id&quot;, updatable = false, referencedColumnName = &quot;id&quot;)\r\n    //@JsonBackReference(&quot;blog_comment&quot;)\r\n    private Blog blog;\r\n\r\n    @ManyToOne()\r\n    @JoinColumn(name = &quot;parent_comment_id&quot;, referencedColumnName = &quot;id&quot;)\r\n    //@JsonBackReference(&quot;comment_comment&quot;)\r\n    private Comment parentComment;\r\n\r\n    @OneToMany(mappedBy = &quot;parentComment&quot;)\r\n    //@JsonManagedReference(&quot;comment_comment&quot;)\r\n    private List&lt;Comment&gt; childComments = new ArrayList&lt;&gt;();\r\n\r\n}\r\n```\r\n\r\n","title":"I get a foreign key constraint error in JPA","body":"<p>I am currently working a small project. I am using java and Spring Data JPA. My issue is the following. When I try to delete a blog, which has connections to other entities like favourites, comment, tag etc. I get a foreign constraint error. I do understand what issue is, that when trying to delete or remove an entity and the table behind it is connected to another via a foreign key, it is not possible to delete, only when one removes the child entities etc. Because blog has a one to many connection with comment and a many to many connection with tag and is a subclass of the superclass Post which has a many to one relatiuonship with the User entity, deletion cannot be done by using cascade remove etc.Theorethically in my service code I did everything to remove the connections manually, but somehow it is not working, I get a foreign contraint error when I run the rest controller:</p>\n<p>{\n&quot;message&quot;: &quot;could not execute statement [(conn=8) Cannot delete or update a parent row: a foreign key constraint fails (<code>blogdb</code>.<code>comment</code>, CONSTRAINT <code>FKhvh0e2ybgg16bpu229a5teje7</code> FOREIGN KEY (<code>parent_comment_id</code>) REFERENCES <code>comment</code> (<code>id</code>))] [delete from comment where id=?]&quot;,\n&quot;httpError&quot;: 404\n}</p>\n<p>In one of my previous builds, where I did not have &quot;comment&quot;, it gave me the same for the &quot;favorites&quot; table, so it is something I am doing systemathically wrong and it is not entity specific. Below my service code, thank you for your help:</p>\n<pre><code>    public void deleteById(Long id) {\n\n        final Blog blogToDelete = blogRepository.findById(id).orElseThrow(EntityNotFoundException::new);\n\n        // remove blog comments\n        removeBlogComments(blogToDelete);\n\n        // remove favorite blogs\n        removeFavoriteBlogs(id);\n\n        // remove the blog of the user\n        blogToDelete.getUser().getPosts().removeIf(x -&gt; x.getId().equals(id));\n        userRepository.save(blogToDelete.getUser());\n\n        blogRepository.delete(blogToDelete);\n    }\n\n    private void removeBlogComments(Blog blogToDelete) {\n\n        final List&lt;Comment&gt; blogCommentsToDelete = blogToDelete.getComments();\n        blogCommentsToDelete.forEach(x -&gt; x.setParentComment(null));\n        commentRepository.saveAll(blogCommentsToDelete);\n\n        blogCommentsToDelete.forEach(x -&gt; {\n            x.getUser().getPosts().removeIf(y-&gt;y.getId().equals(x.getId()));\n            commentRepository.delete(x);\n            entityManager.flush();\n        });\n        blogToDelete.getComments().clear();\n        blogRepository.save(blogToDelete);\n        entityManager.flush();\n    }\n\n    private void removeFavoriteBlogs(Long blogId) {\n        final List&lt;User&gt; allByFavoriteBlog = userRepository.findAllByFavoriteBlog(blogId);\n        allByFavoriteBlog.forEach(x -&gt; {\n            boolean b = x.getFavoriteBlogs().removeIf(y -&gt; y.getId().equals(x.getId()));\n            if (b) {\n                userRepository.save(x);\n                entityManager.flush();\n            }\n        });\n    }\n</code></pre>\n<p>The Post entity:</p>\n<pre><code>\nimport jakarta.persistence.Column;\nimport jakarta.persistence.Entity;\nimport jakarta.persistence.GeneratedValue;\nimport jakarta.persistence.GenerationType;\nimport jakarta.persistence.Id;\nimport jakarta.persistence.Inheritance;\nimport jakarta.persistence.InheritanceType;\nimport jakarta.persistence.JoinColumn;\nimport jakarta.persistence.Lob;\nimport jakarta.persistence.ManyToOne;\nimport jakarta.persistence.OneToMany;\nimport lombok.AllArgsConstructor;\nimport lombok.Builder;\nimport lombok.Getter;\nimport lombok.NoArgsConstructor;\nimport lombok.Setter;\nimport lombok.experimental.SuperBuilder;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\n@Entity\n@AllArgsConstructor\n@NoArgsConstructor\n@Inheritance(strategy = InheritanceType.JOINED)\n@SuperBuilder\npublic class Post {\n\n    @Getter\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;id&quot;)\n    private Long id;\n\n    @Getter\n    @Setter\n    @Column(name = &quot;likes&quot;)\n    @Builder.Default\n    private int likes = 0;\n\n    @Getter\n    @Setter\n    @Lob\n    @Column(name = &quot;content&quot;, nullable = false, columnDefinition = &quot;LONGTEXT&quot;)\n    private String content;\n\n    @Getter\n    @Setter\n    @ManyToOne\n    @JoinColumn(name = &quot;user_id&quot;, referencedColumnName = &quot;id&quot;)\n    private User user;\n\n}\n</code></pre>\n<p>The Blog entity:</p>\n<pre><code>\nimport jakarta.persistence.Column;\nimport jakarta.persistence.Entity;\nimport jakarta.persistence.JoinColumn;\nimport jakarta.persistence.JoinTable;\nimport jakarta.persistence.Lob;\nimport jakarta.persistence.ManyToMany;\nimport jakarta.persistence.OneToMany;\nimport jakarta.persistence.PrimaryKeyJoinColumn;\nimport jakarta.persistence.Table;\nimport lombok.AllArgsConstructor;\nimport lombok.Builder;\nimport lombok.EqualsAndHashCode;\nimport lombok.Getter;\nimport lombok.NoArgsConstructor;\nimport lombok.Setter;\nimport lombok.experimental.SuperBuilder;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\n@EqualsAndHashCode(callSuper = true)\n@Entity\n@PrimaryKeyJoinColumn(name = &quot;id&quot;)\n@Table(name = &quot;blog&quot;)\n@AllArgsConstructor\n@NoArgsConstructor\n@SuperBuilder\n@Getter\n@Setter\npublic class Blog extends Post {\n\n    @Column(name = &quot;title&quot;, nullable = false)\n    private String title;\n\n    @Column(nullable = false)\n    @Builder.Default\n    @ManyToMany\n    @JoinTable(\n            name = &quot;blog_tags&quot;,\n            joinColumns = @JoinColumn(name=&quot;blog_id&quot;, referencedColumnName = &quot;id&quot;),\n            inverseJoinColumns = @JoinColumn(name=&quot;tag_id&quot;, referencedColumnName = &quot;id&quot;))\n    private List&lt;Tag&gt; tags = new ArrayList&lt;&gt;();\n\n    @Lob\n    @Column(columnDefinition = &quot;LONGTEXT&quot;)\n    private String thumbnail;\n\n    @OneToMany(mappedBy = &quot;blog&quot;)\n    @Builder.Default\n    private List&lt;Comment&gt; comments = new ArrayList&lt;&gt;();\n\n}\n</code></pre>\n<p>The User entity:</p>\n<pre><code>\nimport jakarta.persistence.Column;\nimport jakarta.persistence.Entity;\nimport jakarta.persistence.GeneratedValue;\nimport jakarta.persistence.GenerationType;\nimport jakarta.persistence.Id;\nimport jakarta.persistence.JoinColumn;\nimport jakarta.persistence.JoinTable;\nimport jakarta.persistence.ManyToMany;\nimport jakarta.persistence.OneToMany;\nimport jakarta.persistence.Table;\nimport lombok.AllArgsConstructor;\nimport lombok.Builder;\nimport lombok.Getter;\nimport lombok.NoArgsConstructor;\nimport lombok.Setter;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\n@Entity\n@AllArgsConstructor\n@NoArgsConstructor\n@Builder\n@Table(name = &quot;benutzer&quot;)\npublic class User {\n\n    @Getter\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;id&quot;)\n    private Long id;\n\n    @Getter\n    @Setter\n    @Column(name = &quot;username&quot;, nullable = false, unique = true)\n    private String username;\n\n    @Getter\n    @Setter\n    @Column(name = &quot;email&quot;, nullable = false, unique = true)\n    private String email;\n\n    @Getter\n    @Setter\n    @Column(name = &quot;password&quot;, nullable = false)\n    private String password;\n\n    @Getter\n    @Setter\n    @OneToMany(mappedBy = &quot;user&quot;)\n    @Builder.Default\n    private List&lt;Post&gt; posts = new ArrayList&lt;&gt;();\n\n    @Getter\n    @Setter\n    @Builder.Default\n    @ManyToMany\n    @JoinTable(\n            name = &quot;favorites&quot;,\n            joinColumns = @JoinColumn(name = &quot;user_id&quot;, referencedColumnName = &quot;id&quot;),\n            inverseJoinColumns = @JoinColumn(name = &quot;blog_id&quot;, referencedColumnName = &quot;id&quot;)\n    )\n    private List&lt;Blog&gt; favoriteBlogs = new ArrayList&lt;&gt;();\n}\n</code></pre>\n<p>The Tag entity:</p>\n<pre><code>\nimport jakarta.persistence.Column;\nimport jakarta.persistence.Entity;\nimport jakarta.persistence.GeneratedValue;\nimport jakarta.persistence.GenerationType;\nimport jakarta.persistence.Id;\nimport jakarta.persistence.Table;\nimport lombok.AllArgsConstructor;\nimport lombok.Builder;\nimport lombok.Getter;\nimport lombok.NoArgsConstructor;\nimport lombok.Setter;\n\n@Entity\n@Table(name = &quot;tag&quot;)\n@AllArgsConstructor\n@NoArgsConstructor\n@Builder\npublic class Tag {\n\n    @Getter\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;id&quot;)\n    private Long id;\n\n    @Getter\n    @Setter\n    @Column(name = &quot;title&quot;, nullable = false)\n    private String title;\n}\n</code></pre>\n<p>The Comment entity:</p>\n<pre><code>\nimport jakarta.persistence.*;\nimport jakarta.validation.constraints.NotNull;\nimport lombok.AllArgsConstructor;\nimport lombok.EqualsAndHashCode;\nimport lombok.Getter;\nimport lombok.NoArgsConstructor;\nimport lombok.Setter;\nimport lombok.experimental.SuperBuilder;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\n@EqualsAndHashCode(callSuper = true)\n@Entity\n@PrimaryKeyJoinColumn(name = &quot;id&quot;)\n@Table(name = &quot;comment&quot;)\n@AllArgsConstructor\n@NoArgsConstructor\n@SuperBuilder\n@Getter\n@Setter\npublic class Comment extends Post {\n\n    @ManyToOne\n    @JoinColumn(name = &quot;blog_id&quot;, updatable = false, referencedColumnName = &quot;id&quot;)\n    //@JsonBackReference(&quot;blog_comment&quot;)\n    private Blog blog;\n\n    @ManyToOne()\n    @JoinColumn(name = &quot;parent_comment_id&quot;, referencedColumnName = &quot;id&quot;)\n    //@JsonBackReference(&quot;comment_comment&quot;)\n    private Comment parentComment;\n\n    @OneToMany(mappedBy = &quot;parentComment&quot;)\n    //@JsonManagedReference(&quot;comment_comment&quot;)\n    private List&lt;Comment&gt; childComments = new ArrayList&lt;&gt;();\n\n}\n</code></pre>\n"},{"tags":["java","selenium","automated-tests","dom-events"],"comments":[{"owner":{"account_id":9611957,"reputation":1991,"user_id":7136025,"accept_rate":25,"display_name":"santhosh kumar"},"score":0,"creation_date":1496410876,"post_id":44330194,"comment_id":75664795,"body_markdown":"i can see there is not option in Actions class as like double click. Have you checked trying Robot class?","body":"i can see there is not option in Actions class as like double click. Have you checked trying Robot class?"},{"owner":{"account_id":8233798,"reputation":267,"user_id":6193735,"accept_rate":83,"display_name":"Strike08"},"score":0,"creation_date":1496410905,"post_id":44330194,"comment_id":75664813,"body_markdown":"could you try using `.moveToElement(svgElement, posX, posY).click().click().click().build().perform()`?","body":"could you try using <code>.moveToElement(svgElement, posX, posY).click().click().click().build().perform()</code>?"},{"owner":{"account_id":9296472,"reputation":3349,"user_id":6903223,"accept_rate":67,"display_name":"Kushal Bhalaik"},"score":0,"creation_date":1496414924,"post_id":44330194,"comment_id":75667351,"body_markdown":"@santhoshkumar : actually there is a doubleclick() method with Actions class","body":"@santhoshkumar : actually there is a doubleclick() method with Actions class"},{"owner":{"account_id":9611957,"reputation":1991,"user_id":7136025,"accept_rate":25,"display_name":"santhosh kumar"},"score":0,"creation_date":1496414975,"post_id":44330194,"comment_id":75667385,"body_markdown":"yes.. I told like there is a double click but no triple click... Can you try Robot class?.....    Robot bot = new Robot();\n    bot.mouseMove(element.getLocation().x,element.getLocation().x);\n    bot.mousePress(InputEvent.BUTTON1_MASK);\n    bot.mouseRelease(InputEvent.BUTTON1_MASK);\n    bot.mousePress(InputEvent.BUTTON1_MASK);\n    bot.mouseRelease(InputEvent.BUTTON1_MASK);\n    bot.mousePress(InputEvent.BUTTON1_MASK);\n    bot.mouseRelease(InputEvent.BUTTON1_MASK);","body":"yes.. I told like there is a double click but no triple click... Can you try Robot class?.....    Robot bot = new Robot();     bot.mouseMove(element.getLocation().x,element.getLocation().&zwnj;&#8203;x);     bot.mousePress(InputEvent.BUTTON1_MASK);     bot.mouseRelease(InputEvent.BUTTON1_MASK);     bot.mousePress(InputEvent.BUTTON1_MASK);     bot.mouseRelease(InputEvent.BUTTON1_MASK);     bot.mousePress(InputEvent.BUTTON1_MASK);     bot.mouseRelease(InputEvent.BUTTON1_MASK);"},{"owner":{"account_id":11031109,"reputation":15,"user_id":8102462,"display_name":"agdd"},"score":0,"creation_date":1496419556,"post_id":44330194,"comment_id":75670125,"body_markdown":"@santhoshkumar - I could consider the Robot class, but it seems overkill for this single edge case.","body":"@santhoshkumar - I could consider the Robot class, but it seems overkill for this single edge case."},{"owner":{"account_id":11031109,"reputation":15,"user_id":8102462,"display_name":"agdd"},"score":0,"creation_date":1496419755,"post_id":44330194,"comment_id":75670225,"body_markdown":"@Strike08  - It&#39;s my understanding that `perform` calls `build`. The only reason for call build is if you want to pass round a reference to the built object and/or call it multiple times. Is this not correct?","body":"@Strike08  - It&#39;s my understanding that <code>perform</code> calls <code>build</code>. The only reason for call build is if you want to pass round a reference to the built object and/or call it multiple times. Is this not correct?"},{"owner":{"account_id":11031109,"reputation":15,"user_id":8102462,"display_name":"agdd"},"score":0,"creation_date":1496419906,"post_id":44330194,"comment_id":75670308,"body_markdown":"@DebanjanB - This project isn&#39;t hosted publicly anywhere at the moment. It&#39;s just a hobby project in its early stages.","body":"@DebanjanB - This project isn&#39;t hosted publicly anywhere at the moment. It&#39;s just a hobby project in its early stages."}],"answers":[{"comments":[{"owner":{"account_id":11031109,"reputation":15,"user_id":8102462,"display_name":"agdd"},"score":1,"creation_date":1496420543,"post_id":44331996,"comment_id":75670615,"body_markdown":"My understanding is that `Actions` are implemented using the builder pattern. Thus each method call on an instance - except `build` and `perform` - returns a new instance. Thus the above is equivalent to `new Actions(driver).moveToElement(yourElement).doubleClick().click().perform()`. With reference to the code in my question, this will cause `singleClickHandler` and `doubleClickHandler` to be called, but not `tripleClickHandler`.","body":"My understanding is that <code>Actions</code> are implemented using the builder pattern. Thus each method call on an instance - except <code>build</code> and <code>perform</code> - returns a new instance. Thus the above is equivalent to <code>new Actions(driver).moveToElement(yourElement).doubleClick().cli&zwnj;&#8203;ck().perform()</code>. With reference to the code in my question, this will cause <code>singleClickHandler</code> and <code>doubleClickHandler</code> to be called, but not <code>tripleClickHandler</code>."},{"owner":{"account_id":9296472,"reputation":3349,"user_id":6903223,"accept_rate":67,"display_name":"Kushal Bhalaik"},"score":0,"creation_date":1496425509,"post_id":44331996,"comment_id":75673165,"body_markdown":"@agdd : you are probably right; it was just a wild guess that chaining actions in this way might work","body":"@agdd : you are probably right; it was just a wild guess that chaining actions in this way might work"}],"tags":[],"owner":{"account_id":9296472,"reputation":3349,"user_id":6903223,"accept_rate":67,"display_name":"Kushal Bhalaik"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1496415750,"creation_date":1496415750,"answer_id":44331996,"question_id":44330194,"body_markdown":"Maybe you could try something like below:\r\n\r\n    WebElement yourElement = driver.findElement(By.xpath(&quot;xpath locator here&quot;));\r\n\r\n    Actions action = new Actions(driver);\r\n\tActions action1= new Actions(driver);\r\n\taction1= action.moveToElement(yourElement).doubleClick();\r\n\t\t\r\n\taction1.click().build().perform();","title":"Triple click using selenium","body":"<p>Maybe you could try something like below:</p>\n\n<pre><code>WebElement yourElement = driver.findElement(By.xpath(\"xpath locator here\"));\n\nActions action = new Actions(driver);\nActions action1= new Actions(driver);\naction1= action.moveToElement(yourElement).doubleClick();\n\naction1.click().build().perform();\n</code></pre>\n"},{"comments":[{"owner":{"account_id":18714129,"reputation":95,"user_id":13643568,"display_name":"Moises  Park"},"score":0,"creation_date":1596593336,"post_id":44332646,"comment_id":111858550,"body_markdown":"Hey it&#39;s been a while since you posted this, but can you translate this for python?","body":"Hey it&#39;s been a while since you posted this, but can you translate this for python?"},{"owner":{"account_id":18714129,"reputation":95,"user_id":13643568,"display_name":"Moises  Park"},"score":0,"creation_date":1596657768,"post_id":44332646,"comment_id":111885305,"body_markdown":"Help please...?","body":"Help please...?"}],"tags":[],"owner":{"account_id":3447044,"reputation":41737,"user_id":2887618,"display_name":"Florent B."},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1496429851,"creation_date":1496417833,"answer_id":44332646,"question_id":44330194,"body_markdown":"The current api doesn&#39;t provide a way to simulate a triple click which would emit a single click event with the count of clicks.\r\nSo your best chance is likely to simulate the event with executeScript:\r\n\r\n    String JS_CLICK_TRIPLE = \r\n      &quot;var target = arguments[0];                                 &quot; +\r\n      &quot;var offsetX = arguments[1];                                &quot; +\r\n      &quot;var offsetY = arguments[2];                                &quot; + \r\n      &quot;var rect = target.getBoundingClientRect();                 &quot; +\r\n      &quot;var cx = rect.left + (offsetX || (rect.width / 2));        &quot; +        \r\n      &quot;var cy = rect.top + (offsetY || (rect.height / 2));        &quot; +\r\n      &quot;                                                           &quot; +\r\n      &quot;emit(&#39;mousedown&#39;, {clientX: cx, clientY: cy, buttons: 1}); &quot; +\r\n      &quot;emit(&#39;mouseup&#39;,   {clientX: cx, clientY: cy});             &quot; +\r\n      &quot;emit(&#39;mousedown&#39;, {clientX: cx, clientY: cy, buttons: 1}); &quot; +\r\n      &quot;emit(&#39;mouseup&#39;,   {clientX: cx, clientY: cy});             &quot; +\r\n      &quot;emit(&#39;mousedown&#39;, {clientX: cx, clientY: cy, buttons: 1}); &quot; +\r\n      &quot;emit(&#39;mouseup&#39;,   {clientX: cx, clientY: cy});             &quot; +\r\n      &quot;emit(&#39;click&#39;,     {clientX: cx, clientY: cy, detail: 3});  &quot; +\r\n      &quot;                                                           &quot; +\r\n      &quot;function emit(name, init) {                                &quot; +\r\n        &quot;target.dispatchEvent(new MouseEvent(name, init));        &quot; +\r\n      &quot;}                                                          &quot; ;\r\n      \r\n      \r\n    Actions action1 = new Actions(driver);\r\n    action1.moveToElement(yourElement, posX, posY).perform();\r\n\r\n    ((JavascriptExecutor)driver).executeScript(\r\n        JS_CLICK_TRIPLE, yourElement, posX, posY);\r\n","title":"Triple click using selenium","body":"<p>The current api doesn't provide a way to simulate a triple click which would emit a single click event with the count of clicks.\nSo your best chance is likely to simulate the event with executeScript:</p>\n\n<pre><code>String JS_CLICK_TRIPLE = \n  \"var target = arguments[0];                                 \" +\n  \"var offsetX = arguments[1];                                \" +\n  \"var offsetY = arguments[2];                                \" + \n  \"var rect = target.getBoundingClientRect();                 \" +\n  \"var cx = rect.left + (offsetX || (rect.width / 2));        \" +        \n  \"var cy = rect.top + (offsetY || (rect.height / 2));        \" +\n  \"                                                           \" +\n  \"emit('mousedown', {clientX: cx, clientY: cy, buttons: 1}); \" +\n  \"emit('mouseup',   {clientX: cx, clientY: cy});             \" +\n  \"emit('mousedown', {clientX: cx, clientY: cy, buttons: 1}); \" +\n  \"emit('mouseup',   {clientX: cx, clientY: cy});             \" +\n  \"emit('mousedown', {clientX: cx, clientY: cy, buttons: 1}); \" +\n  \"emit('mouseup',   {clientX: cx, clientY: cy});             \" +\n  \"emit('click',     {clientX: cx, clientY: cy, detail: 3});  \" +\n  \"                                                           \" +\n  \"function emit(name, init) {                                \" +\n    \"target.dispatchEvent(new MouseEvent(name, init));        \" +\n  \"}                                                          \" ;\n\n\nActions action1 = new Actions(driver);\naction1.moveToElement(yourElement, posX, posY).perform();\n\n((JavascriptExecutor)driver).executeScript(\n    JS_CLICK_TRIPLE, yourElement, posX, posY);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27705344,"reputation":1,"user_id":21149117,"display_name":"Arthur Shevchenko"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689094676,"creation_date":1689094174,"answer_id":76664175,"question_id":44330194,"body_markdown":"you can also made a triple click like this:\r\n\r\n    actions = ActionChains(driver)\r\n    for _ in range(3):\r\n        actions.move_to_element(field).click()\r\n    actions.perform()\r\n\r\nor even like this:\r\n\r\n    action1 = ActionChains(self.driver)\r\n    action1.move_to_element(field).click().click().click().perform()","title":"Triple click using selenium","body":"<p>you can also made a triple click like this:</p>\n<pre><code>actions = ActionChains(driver)\nfor _ in range(3):\n    actions.move_to_element(field).click()\nactions.perform()\n</code></pre>\n<p>or even like this:</p>\n<pre><code>action1 = ActionChains(self.driver)\naction1.move_to_element(field).click().click().click().perform()\n</code></pre>\n"}],"owner":{"account_id":11031109,"reputation":15,"user_id":8102462,"display_name":"agdd"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5456,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":44332646,"answer_count":3,"score":1,"last_activity_date":1689094676,"creation_date":1496410247,"question_id":44330194,"body_markdown":"This question is similar to the one asked [here](https://stackoverflow.com/questions/22363633/how-to-automate-a-triple-click-using-java-selenium). However in that case it seems that the poster&#39;s ultimate purpose was actually to select a paragraph of text, and they were able to find a work-around which did not involve clicking.\r\n\r\nLike the user in the above question I initially thought that it would be possible to simulate a triple-click by calling the click method three times.\r\n    \r\n    new Actions(driver)\r\n      .moveToElement(svgElement, posX, posY)                     \r\n      .click()\r\n      .click()\r\n      .click()\r\n      .perform()\r\n\r\nHowever, this doesn&#39;t work as the my javascript code checks the the `detail` attribute of the `UIEvent` instance, and this is always `1` for each call to `click`. Thus the following snippet:\r\n \r\n    function clickHandler (event) {\r\n        if (event.detail == 1) {\r\n            singleClickHandler() \r\n        }\r\n        if (event.detail == 2) {\r\n            doubleClickHandler() \r\n        }\r\n        if (event.detail == 3) {\r\n            tripleClickHandler() \r\n        }\r\n\r\ncauses `singleClickHandler` to be called three times when called via Selenium, whereas each of `singleClickHandler`, `doubleClickHandler`, and `tripleClickHandler` is called once when this is exercised manually via the browser (Firefox).\r\n\r\nHow do I cause a click event with `detail` equal to 3 to be triggered via selenium?","title":"Triple click using selenium","body":"<p>This question is similar to the one asked <a href=\"https://stackoverflow.com/questions/22363633/how-to-automate-a-triple-click-using-java-selenium\">here</a>. However in that case it seems that the poster's ultimate purpose was actually to select a paragraph of text, and they were able to find a work-around which did not involve clicking.</p>\n\n<p>Like the user in the above question I initially thought that it would be possible to simulate a triple-click by calling the click method three times.</p>\n\n<pre><code>new Actions(driver)\n  .moveToElement(svgElement, posX, posY)                     \n  .click()\n  .click()\n  .click()\n  .perform()\n</code></pre>\n\n<p>However, this doesn't work as the my javascript code checks the the <code>detail</code> attribute of the <code>UIEvent</code> instance, and this is always <code>1</code> for each call to <code>click</code>. Thus the following snippet:</p>\n\n<pre><code>function clickHandler (event) {\n    if (event.detail == 1) {\n        singleClickHandler() \n    }\n    if (event.detail == 2) {\n        doubleClickHandler() \n    }\n    if (event.detail == 3) {\n        tripleClickHandler() \n    }\n</code></pre>\n\n<p>causes <code>singleClickHandler</code> to be called three times when called via Selenium, whereas each of <code>singleClickHandler</code>, <code>doubleClickHandler</code>, and <code>tripleClickHandler</code> is called once when this is exercised manually via the browser (Firefox).</p>\n\n<p>How do I cause a click event with <code>detail</code> equal to 3 to be triggered via selenium?</p>\n"},{"tags":["java","spring-boot","ip","undertow"],"owner":{"account_id":5273740,"reputation":698,"user_id":4211252,"display_name":"Thilo Schwarz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689094166,"creation_date":1689008560,"question_id":76655880,"body_markdown":"I&#39;ve got a spring boot 3.x project with the following properties:\r\n\r\n    server:\r\n      address: 127.0.0.1\r\n      port: 8080\r\n\r\nOn my server I&#39;ve got a script to show my IP bindings in a sorted overview. The script is based on ```lsof -i -nP | grep LISTEN```. I&#39;ve got an output like this:\r\n\r\n    java      20001 user  116u  IPv6 0x1a2a27c68a753431      0t0  TCP 127.0.0.1:8080 (LISTEN)\r\n\r\nI&#39;m using undertow as embedded server.\r\n\r\nBTW, I&#39;m not a network pro. But I would like to understand why spring boot binds the IP on the type IPV6 instead of IPV4.\r\n\r\nI tested it on Ubuntu 22.04 and macOS 13.4.","title":"spring-boot: ip binding type","body":"<p>I've got a spring boot 3.x project with the following properties:</p>\n<pre><code>server:\n  address: 127.0.0.1\n  port: 8080\n</code></pre>\n<p>On my server I've got a script to show my IP bindings in a sorted overview. The script is based on <code>lsof -i -nP | grep LISTEN</code>. I've got an output like this:</p>\n<pre><code>java      20001 user  116u  IPv6 0x1a2a27c68a753431      0t0  TCP 127.0.0.1:8080 (LISTEN)\n</code></pre>\n<p>I'm using undertow as embedded server.</p>\n<p>BTW, I'm not a network pro. But I would like to understand why spring boot binds the IP on the type IPV6 instead of IPV4.</p>\n<p>I tested it on Ubuntu 22.04 and macOS 13.4.</p>\n"},{"tags":["java","android","android-studio"],"comments":[{"owner":{"account_id":17575058,"reputation":2200,"user_id":12749998,"display_name":"Kozmotronik"},"score":0,"creation_date":1689086282,"post_id":76662582,"comment_id":135161585,"body_markdown":"Show how do you get the images from intent in `EditedImagesActivity`.","body":"Show how do you get the images from intent in <code>EditedImagesActivity</code>."},{"owner":{"account_id":26472396,"reputation":63,"user_id":20112807,"display_name":"Alex"},"score":0,"creation_date":1689093988,"post_id":76662582,"comment_id":135163358,"body_markdown":"Recently i added it.","body":"Recently i added it."},{"owner":{"account_id":17575058,"reputation":2200,"user_id":12749998,"display_name":"Kozmotronik"},"score":0,"creation_date":1689142200,"post_id":76662582,"comment_id":135169323,"body_markdown":"_**Convert the byte arrays to Bitmap objects**_ You mean converting `byte[][]` to `Bitmap` list? Probably you get the `bitmaps` `null` in this line: `ArrayList&lt;Bitmap&gt; bitmaps = new ArrayList&lt;&gt;(editedImages);`.","body":"<i><b>Convert the byte arrays to Bitmap objects</b></i> You mean converting <code>byte[][]</code> to <code>Bitmap</code> list? Probably you get the <code>bitmaps</code> <code>null</code> in this line: <code>ArrayList&lt;Bitmap&gt; bitmaps = new ArrayList&lt;&gt;(editedImages);</code>."}],"owner":{"account_id":26472396,"reputation":63,"user_id":20112807,"display_name":"Alex"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689093958,"creation_date":1689082635,"question_id":76662582,"body_markdown":"I have in my **MainActivity** Function to apply some transformations on image(s) and then add every single image to editedImage which is `private List&lt;Bitmap&gt; editedImages;` but  when i try to pass the image(s) to my other activity which is **EditedImagesActivity** by this function : \r\n\r\n        private void displayEditedImages() {\r\n        if (!editedImages.isEmpty()) {\r\n            Intent intent = new Intent(MainActivity.this, EditedImagesActivity.class);\r\n\r\n            // Convert the byte arrays to Bitmap objects\r\n            ArrayList&lt;Bitmap&gt; bitmaps = new ArrayList&lt;&gt;(editedImages);\r\n            // Pass the edited images as an ArrayList of Bitmap objects\r\n            intent.putParcelableArrayListExtra(&quot;editedImages&quot;, bitmaps);\r\n\r\n\r\n            startActivity(intent);\r\n        }\r\n    }\r\n\r\ni am getting an empty gridView! \r\nhow can i receive data correctly so i can add image(s) to gridView ?\r\nMY **EditedImagesActivity** :\r\n\r\n        Intent intent = new Intent();\r\n        try {\r\n            editedImages = intent.getParcelableArrayListExtra(&quot;editedImages&quot;);\r\n        } catch (NullPointerException e) {\r\n            // The edited images were not found\r\n            Log.e(&quot;EditedImagesActivity&quot;, &quot;The edited images were not found&quot;, e);\r\n            return;\r\n        }\r\n        if (editedImages == null || editedImages.isEmpty()) {\r\n            Log.e(&quot;EditedImagesActivity&quot;, &quot;The edited images were not found&quot;);\r\n            return;\r\n        }\r\n        GridView gridView = findViewById(R.id.grid_view);\r\n        gridView.setAdapter(new BitmapAdapter(this, editedImages));\r\n\r\nNot: i am getting &quot;The edited images were not found&quot; in logcat.","title":"Pass an Bitmap Arraylist to Another Activity GridView","body":"<p>I have in my <strong>MainActivity</strong> Function to apply some transformations on image(s) and then add every single image to editedImage which is <code>private List&lt;Bitmap&gt; editedImages;</code> but  when i try to pass the image(s) to my other activity which is <strong>EditedImagesActivity</strong> by this function :</p>\n<pre><code>    private void displayEditedImages() {\n    if (!editedImages.isEmpty()) {\n        Intent intent = new Intent(MainActivity.this, EditedImagesActivity.class);\n\n        // Convert the byte arrays to Bitmap objects\n        ArrayList&lt;Bitmap&gt; bitmaps = new ArrayList&lt;&gt;(editedImages);\n        // Pass the edited images as an ArrayList of Bitmap objects\n        intent.putParcelableArrayListExtra(&quot;editedImages&quot;, bitmaps);\n\n\n        startActivity(intent);\n    }\n}\n</code></pre>\n<p>i am getting an empty gridView!\nhow can i receive data correctly so i can add image(s) to gridView ?\nMY <strong>EditedImagesActivity</strong> :</p>\n<pre><code>    Intent intent = new Intent();\n    try {\n        editedImages = intent.getParcelableArrayListExtra(&quot;editedImages&quot;);\n    } catch (NullPointerException e) {\n        // The edited images were not found\n        Log.e(&quot;EditedImagesActivity&quot;, &quot;The edited images were not found&quot;, e);\n        return;\n    }\n    if (editedImages == null || editedImages.isEmpty()) {\n        Log.e(&quot;EditedImagesActivity&quot;, &quot;The edited images were not found&quot;);\n        return;\n    }\n    GridView gridView = findViewById(R.id.grid_view);\n    gridView.setAdapter(new BitmapAdapter(this, editedImages));\n</code></pre>\n<p>Not: i am getting &quot;The edited images were not found&quot; in logcat.</p>\n"},{"tags":["java","spring","jpa","derby","quarkus-hibernate-orm"],"comments":[{"owner":{"account_id":208830,"reputation":10240,"user_id":459557,"display_name":"vanje"},"score":0,"creation_date":1673115928,"post_id":75042479,"comment_id":132427591,"body_markdown":"Please post the full stack trace.","body":"Please post the full stack trace."},{"owner":{"account_id":19524030,"reputation":37,"user_id":14285221,"display_name":"blank"},"score":0,"creation_date":1673116382,"post_id":75042479,"comment_id":132427693,"body_markdown":"@vanje Hi, I have edited the error with full stack trace","body":"@vanje Hi, I have edited the error with full stack trace"}],"answers":[{"tags":[],"owner":{"account_id":17595656,"reputation":36,"user_id":12766596,"display_name":"Bastian"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689093652,"creation_date":1689093652,"answer_id":76664122,"question_id":75042479,"body_markdown":"Probably this is happening because Quarkus is still using the FastBootHibernatePersistenceProvider. But you want the HibernatePersistenceProvider.\r\nIn my code I had to create this provider explicitly. So instead of Persistence.createEntityManagerFactory\r\ntry:\r\n\r\n    var persistenceProvider = new HibernatePersistenceProvider();\r\n    persistenceProvider.createEntityManagerFactory(urlDB); ","title":"JPA connect to Derby Database with Hibernate-ORM related problem in Quarkus","body":"<p>Probably this is happening because Quarkus is still using the FastBootHibernatePersistenceProvider. But you want the HibernatePersistenceProvider.\nIn my code I had to create this provider explicitly. So instead of Persistence.createEntityManagerFactory\ntry:</p>\n<pre><code>var persistenceProvider = new HibernatePersistenceProvider();\npersistenceProvider.createEntityManagerFactory(urlDB); \n</code></pre>\n"}],"owner":{"account_id":19524030,"reputation":37,"user_id":14285221,"display_name":"blank"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":226,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689093652,"creation_date":1673113281,"question_id":75042479,"body_markdown":"Currently, I am trying to build an API with JPA and Derby Database, and I&#39;ve got some problems with Hibernate Reactive/Hibernate ORM.\r\n\r\nParticularly, I want to connect to a Derby database server as follows:\r\n\r\nQueryService.java:\r\n```\r\n@Transactional\r\n@RequestScoped\r\npublic class QueryService implements Serializable {\r\n    @PersistenceContext\r\n    EntityManagerFactory emf;\r\n    private final static Logger LOGGER = Logger.getLogger(Logger.GLOBAL_LOGGER_NAME);\r\n    public QueryService() {}\r\n\r\n    @PostConstruct\r\n    public void init() {\r\n        String urlDB = &quot;my-persistence-unit&quot;;\r\n        emf = Persistence.createEntityManagerFactory(urlDB);\r\n    }\r\n\r\n    @PreDestroy\r\n    public void destroy() {\r\n        emf.close();\r\n    }\r\n```\r\n\r\napplication.properties:\r\n```\r\nquarkus.hibernate-orm.database.generation=none\r\n\r\nquarkus.datasource.db-kind=derby\r\nquarkus.datasource.jdbc.url=jdbc:derby://localhost:1527/appDB;create=true\r\nquarkus.datasource.jdbc.driver=org.apache.derby.jdbc.ClientDriver\r\nquarkus.datasource.username=admin\r\nquarkus.datasource.password=admin\r\n\r\nquarkus.live-reload.instrumentation=true\r\n```\r\n\r\nIn the persistence.xml file, I define a persistence unit to be used by the EntityManagerFactory in QueryService.java.\r\n\r\npersistence.xml:\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;persistence version=&quot;2.2&quot;\r\n             xmlns=&quot;http://xmlns.jcp.org/xml/ns/persistence&quot;\r\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n             xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/persistence\r\n     http://xmlns.jcp.org/xml/ns/persistence/persistence_2_2.xsd&quot;&gt;\r\n\r\n    &lt;persistence-unit\r\n            name=&quot;my-persistence-unit&quot;\r\n            transaction-type=&quot;JTA&quot;&gt;\r\n\r\n        &lt;provider&gt;org.hibernate.jpa.HibernatePersistenceProvider&lt;/provider&gt;\r\n\r\n        &lt;properties&gt;\r\n            &lt;property name=&quot;hibernate.connection.url&quot; value=&quot;jdbc:derby://localhost:1527/appDB;create=true&quot;/&gt;\r\n            &lt;property name=&quot;hibernate.connection.username&quot; value=&quot;admin&quot;/&gt;\r\n            &lt;property name=&quot;hibernate.connection.password&quot; value=&quot;admin&quot;/&gt;\r\n            &lt;property name=&quot;hibernate.connection.driver_class&quot; value=&quot;org.apache.derby.jdbc.ClientDriver&quot;/&gt;\r\n            &lt;property name=&quot;hibernate.dialect&quot; value=&quot;org.hibernate.dialect.DerbyDialect&quot;/&gt;\r\n            &lt;property name=&quot;hibernate.show_sql&quot; value=&quot;true&quot;/&gt;\r\n        &lt;/properties&gt;\r\n    &lt;/persistence-unit&gt;\r\n&lt;/persistence&gt;\r\n```\r\n\r\nIf I run this, I get this error: ```{\r\n    &quot;details&quot;: &quot;Error id 07333181-bf2e-4640-8497-01de9bf6ccf7-1, java.lang.NullPointerException: Cannot invoke \\&quot;io.quarkus.hibernate.orm.runtime.recording.RecordedState.isReactive()\\&quot; because \\&quot;recordedState\\&quot; is null&quot;,\r\n    &quot;stack&quot;: &quot;java.lang.NullPointerException: Cannot invoke \\&quot;io.quarkus.hibernate.orm.runtime.recording.RecordedState.isReactive()\\&quot; because \\&quot;recordedState\\&quot; is null\\r\\n\\tat io.quarkus.hibernate.orm.runtime.FastBootHibernatePersistenceProvider.getEntityManagerFactoryBuilderOrNull(FastBootHibernatePersistenceProvider.java:172)\\r\\n\\tat io.quarkus.hibernate.orm.runtime.FastBootHibernatePersistenceProvider.createEntityManagerFactory(FastBootHibernatePersistenceProvider.java:66)\\r\\n\\tat javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:80)\\r\\n\\tat javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:55)\\r\\n\\tat app.QueryService.init(QueryService.java:29)\\r\\n\\tat app.QueryService_Bean.create(Unknown Source)\\r\\n\\tat app.QueryService_Bean.create(Unknown Source)\\r\\n\\tat io.quarkus.arc.impl.RequestContext.getIfActive(RequestContext.java:74)\\r\\n\\tat io.quarkus.arc.impl.ClientProxies.getDelegate(ClientProxies.java:30)\\r\\n\\tat app.QueryService_ClientProxy.arc$delegate(Unknown Source)\\r\\n\\tat app.QueryService_ClientProxy.obtainCourseList(Unknown Source)\\r\\n\\tat app.Scolarite.obtainCourseList(Scolarite.java:49)\\r\\n\\tat app.Scolarite_Subclass.obtainCourseList$$superforward1(Unknown Source)\\r\\n\\tat app.Scolarite_Subclass$$function$$2.apply(Unknown Source)\\r\\n\\tat io.quarkus.arc.impl.AroundInvokeInvocationContext.proceed(AroundInvokeInvocationContext.java:54)\\r\\n\\tat io.quarkus.narayana.jta.runtime.interceptor.TransactionalInterceptorBase.invokeInOurTx(TransactionalInterceptorBase.java:133)\\r\\n\\tat io.quarkus.narayana.jta.runtime.interceptor.TransactionalInterceptorBase.invokeInOurTx(TransactionalInterceptorBase.java:104)\\r\\n\\tat io.quarkus.narayana.jta.runtime.interceptor.TransactionalInterceptorRequired.doIntercept(TransactionalInterceptorRequired.java:38)\\r\\n\\tat io.quarkus.narayana.jta.runtime.interceptor.TransactionalInterceptorBase.intercept(TransactionalInterceptorBase.java:58)\\r\\n\\tat io.quarkus.narayana.jta.runtime.interceptor.TransactionalInterceptorRequired.intercept(TransactionalInterceptorRequired.java:32)\\r\\n\\tat io.quarkus.narayana.jta.runtime.interceptor.TransactionalInterceptorRequired_Bean.intercept(Unknown Source)\\r\\n\\tat io.quarkus.arc.impl.InterceptorInvocation.invoke(InterceptorInvocation.java:42)\\r\\n\\tat io.quarkus.arc.impl.AroundInvokeInvocationContext.perform(AroundInvokeInvocationContext.java:41)\\r\\n\\tat io.quarkus.arc.impl.InvocationContexts.performAroundInvoke(InvocationContexts.java:33)\\r\\n\\tat app.Scolarite_Subclass.obtainCourseList(Unknown Source)\\r\\n\\tat app.Scolarite_ClientProxy.obtainCourseList(Unknown Source)\\r\\n\\tat app.ScolariteApplication.getCourseList(ScolariteApplication.java:22)\\r\\n\\tat app.ScolariteApplication$quarkusrestinvoker$getCourseList_9c2e0d4fdac50820476d652c171e60223f72a1d5.invoke(Unknown Source)\\r\\n\\tat org.jboss.resteasy.reactive.server.handlers.InvocationHandler.handle(InvocationHandler.java:29)\\r\\n\\tat io.quarkus.resteasy.reactive.server.runtime.QuarkusResteasyReactiveRequestContext.invokeHandler(QuarkusResteasyReactiveRequestContext.java:114)\\r\\n\\tat org.jboss.resteasy.reactive.common.core.AbstractResteasyReactiveContext.run(AbstractResteasyReactiveContext.java:145)\\r\\n\\tat io.quarkus.vertx.core.runtime.VertxCoreRecorder$14.runWith(VertxCoreRecorder.java:576)\\r\\n\\tat org.jboss.threads.EnhancedQueueExecutor$Task.run(EnhancedQueueExecutor.java:2449)\\r\\n\\tat org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1478)\\r\\n\\tat org.jboss.threads.DelegatingRunnable.run(DelegatingRunnable.java:29)\\r\\n\\tat org.jboss.threads.ThreadLocalResettingRunnable.run(ThreadLocalResettingRunnable.java:29)\\r\\n\\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\\r\\n\\tat java.base/java.lang.Thread.run(Thread.java:833)&quot;\r\n}```\r\n\r\nI tried to search for this on the internet, and it is said that this was because Hibernate Reactive and Hibernate Orm cannot be used together. But I don&#39;t know how to solve it. I am quite new to this. Could you please help me with it?\r\n","title":"JPA connect to Derby Database with Hibernate-ORM related problem in Quarkus","body":"<p>Currently, I am trying to build an API with JPA and Derby Database, and I've got some problems with Hibernate Reactive/Hibernate ORM.</p>\n<p>Particularly, I want to connect to a Derby database server as follows:</p>\n<p>QueryService.java:</p>\n<pre><code>@Transactional\n@RequestScoped\npublic class QueryService implements Serializable {\n    @PersistenceContext\n    EntityManagerFactory emf;\n    private final static Logger LOGGER = Logger.getLogger(Logger.GLOBAL_LOGGER_NAME);\n    public QueryService() {}\n\n    @PostConstruct\n    public void init() {\n        String urlDB = &quot;my-persistence-unit&quot;;\n        emf = Persistence.createEntityManagerFactory(urlDB);\n    }\n\n    @PreDestroy\n    public void destroy() {\n        emf.close();\n    }\n</code></pre>\n<p>application.properties:</p>\n<pre><code>quarkus.hibernate-orm.database.generation=none\n\nquarkus.datasource.db-kind=derby\nquarkus.datasource.jdbc.url=jdbc:derby://localhost:1527/appDB;create=true\nquarkus.datasource.jdbc.driver=org.apache.derby.jdbc.ClientDriver\nquarkus.datasource.username=admin\nquarkus.datasource.password=admin\n\nquarkus.live-reload.instrumentation=true\n</code></pre>\n<p>In the persistence.xml file, I define a persistence unit to be used by the EntityManagerFactory in QueryService.java.</p>\n<p>persistence.xml:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;persistence version=&quot;2.2&quot;\n             xmlns=&quot;http://xmlns.jcp.org/xml/ns/persistence&quot;\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n             xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/persistence\n     http://xmlns.jcp.org/xml/ns/persistence/persistence_2_2.xsd&quot;&gt;\n\n    &lt;persistence-unit\n            name=&quot;my-persistence-unit&quot;\n            transaction-type=&quot;JTA&quot;&gt;\n\n        &lt;provider&gt;org.hibernate.jpa.HibernatePersistenceProvider&lt;/provider&gt;\n\n        &lt;properties&gt;\n            &lt;property name=&quot;hibernate.connection.url&quot; value=&quot;jdbc:derby://localhost:1527/appDB;create=true&quot;/&gt;\n            &lt;property name=&quot;hibernate.connection.username&quot; value=&quot;admin&quot;/&gt;\n            &lt;property name=&quot;hibernate.connection.password&quot; value=&quot;admin&quot;/&gt;\n            &lt;property name=&quot;hibernate.connection.driver_class&quot; value=&quot;org.apache.derby.jdbc.ClientDriver&quot;/&gt;\n            &lt;property name=&quot;hibernate.dialect&quot; value=&quot;org.hibernate.dialect.DerbyDialect&quot;/&gt;\n            &lt;property name=&quot;hibernate.show_sql&quot; value=&quot;true&quot;/&gt;\n        &lt;/properties&gt;\n    &lt;/persistence-unit&gt;\n&lt;/persistence&gt;\n</code></pre>\n<p>If I run this, I get this error: <code>{ &quot;details&quot;: &quot;Error id 07333181-bf2e-4640-8497-01de9bf6ccf7-1, java.lang.NullPointerException: Cannot invoke \\&quot;io.quarkus.hibernate.orm.runtime.recording.RecordedState.isReactive()\\&quot; because \\&quot;recordedState\\&quot; is null&quot;, &quot;stack&quot;: &quot;java.lang.NullPointerException: Cannot invoke \\&quot;io.quarkus.hibernate.orm.runtime.recording.RecordedState.isReactive()\\&quot; because \\&quot;recordedState\\&quot; is null\\r\\n\\tat io.quarkus.hibernate.orm.runtime.FastBootHibernatePersistenceProvider.getEntityManagerFactoryBuilderOrNull(FastBootHibernatePersistenceProvider.java:172)\\r\\n\\tat io.quarkus.hibernate.orm.runtime.FastBootHibernatePersistenceProvider.createEntityManagerFactory(FastBootHibernatePersistenceProvider.java:66)\\r\\n\\tat javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:80)\\r\\n\\tat javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:55)\\r\\n\\tat app.QueryService.init(QueryService.java:29)\\r\\n\\tat app.QueryService_Bean.create(Unknown Source)\\r\\n\\tat app.QueryService_Bean.create(Unknown Source)\\r\\n\\tat io.quarkus.arc.impl.RequestContext.getIfActive(RequestContext.java:74)\\r\\n\\tat io.quarkus.arc.impl.ClientProxies.getDelegate(ClientProxies.java:30)\\r\\n\\tat app.QueryService_ClientProxy.arc$delegate(Unknown Source)\\r\\n\\tat app.QueryService_ClientProxy.obtainCourseList(Unknown Source)\\r\\n\\tat app.Scolarite.obtainCourseList(Scolarite.java:49)\\r\\n\\tat app.Scolarite_Subclass.obtainCourseList$$superforward1(Unknown Source)\\r\\n\\tat app.Scolarite_Subclass$$function$$2.apply(Unknown Source)\\r\\n\\tat io.quarkus.arc.impl.AroundInvokeInvocationContext.proceed(AroundInvokeInvocationContext.java:54)\\r\\n\\tat io.quarkus.narayana.jta.runtime.interceptor.TransactionalInterceptorBase.invokeInOurTx(TransactionalInterceptorBase.java:133)\\r\\n\\tat io.quarkus.narayana.jta.runtime.interceptor.TransactionalInterceptorBase.invokeInOurTx(TransactionalInterceptorBase.java:104)\\r\\n\\tat io.quarkus.narayana.jta.runtime.interceptor.TransactionalInterceptorRequired.doIntercept(TransactionalInterceptorRequired.java:38)\\r\\n\\tat io.quarkus.narayana.jta.runtime.interceptor.TransactionalInterceptorBase.intercept(TransactionalInterceptorBase.java:58)\\r\\n\\tat io.quarkus.narayana.jta.runtime.interceptor.TransactionalInterceptorRequired.intercept(TransactionalInterceptorRequired.java:32)\\r\\n\\tat io.quarkus.narayana.jta.runtime.interceptor.TransactionalInterceptorRequired_Bean.intercept(Unknown Source)\\r\\n\\tat io.quarkus.arc.impl.InterceptorInvocation.invoke(InterceptorInvocation.java:42)\\r\\n\\tat io.quarkus.arc.impl.AroundInvokeInvocationContext.perform(AroundInvokeInvocationContext.java:41)\\r\\n\\tat io.quarkus.arc.impl.InvocationContexts.performAroundInvoke(InvocationContexts.java:33)\\r\\n\\tat app.Scolarite_Subclass.obtainCourseList(Unknown Source)\\r\\n\\tat app.Scolarite_ClientProxy.obtainCourseList(Unknown Source)\\r\\n\\tat app.ScolariteApplication.getCourseList(ScolariteApplication.java:22)\\r\\n\\tat app.ScolariteApplication$quarkusrestinvoker$getCourseList_9c2e0d4fdac50820476d652c171e60223f72a1d5.invoke(Unknown Source)\\r\\n\\tat org.jboss.resteasy.reactive.server.handlers.InvocationHandler.handle(InvocationHandler.java:29)\\r\\n\\tat io.quarkus.resteasy.reactive.server.runtime.QuarkusResteasyReactiveRequestContext.invokeHandler(QuarkusResteasyReactiveRequestContext.java:114)\\r\\n\\tat org.jboss.resteasy.reactive.common.core.AbstractResteasyReactiveContext.run(AbstractResteasyReactiveContext.java:145)\\r\\n\\tat io.quarkus.vertx.core.runtime.VertxCoreRecorder$14.runWith(VertxCoreRecorder.java:576)\\r\\n\\tat org.jboss.threads.EnhancedQueueExecutor$Task.run(EnhancedQueueExecutor.java:2449)\\r\\n\\tat org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1478)\\r\\n\\tat org.jboss.threads.DelegatingRunnable.run(DelegatingRunnable.java:29)\\r\\n\\tat org.jboss.threads.ThreadLocalResettingRunnable.run(ThreadLocalResettingRunnable.java:29)\\r\\n\\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\\r\\n\\tat java.base/java.lang.Thread.run(Thread.java:833)&quot; }</code></p>\n<p>I tried to search for this on the internet, and it is said that this was because Hibernate Reactive and Hibernate Orm cannot be used together. But I don't know how to solve it. I am quite new to this. Could you please help me with it?</p>\n"},{"tags":["java","spring","spring-boot","spring-mvc","echarts"],"owner":{"account_id":28891044,"reputation":1,"user_id":22128203,"display_name":"lavosami"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689093537,"creation_date":1689093537,"question_id":76664108,"body_markdown":"i have some problem. I don&#39;t know how to update graphics data using radio buttons in html\r\n\r\n\r\nJava code:\r\n```\r\npackage com.lavosami.controllers;\r\n\r\nimport com.lavosami.data.Data;\r\nimport com.lavosami.data.DataBase;\r\nimport com.lavosami.data.JSON;\r\nimport org.springframework.stereotype.Controller;\r\nimport org.springframework.ui.Model;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\nimport org.springframework.web.bind.annotation.RequestMethod;\r\nimport org.springframework.web.bind.annotation.RequestParam;\r\n\r\nimport java.text.SimpleDateFormat;\r\nimport java.util.*;\r\n\r\nimport static com.lavosami.data.DataBase.dataBase;\r\n\r\n@Controller\r\npublic class ChartController {\r\n    String name = &quot;Hydra-L (01)&quot;;\r\n    String value = &quot;Temperature&quot;;\r\n    int mode = 0;\r\n\r\n    @GetMapping(&quot;/chart&quot;)\r\n    public String getChartData(Model model) {\r\n        JSON.filesParse();\r\n\r\n        // --------------------------------------------\r\n        List&lt;String&gt; items = new ArrayList&lt;&gt;();\r\n        for (Data data : dataBase.values()) {\r\n            if (!items.contains(data.getName())) {\r\n                items.add(data.getName());\r\n            }\r\n        }\r\n        Collections.sort(items);\r\n        model.addAttribute(&quot;chartItems&quot;, items);\r\n        // --------------------------------------------\r\n\r\n        // --------------------------------------------\r\n        List&lt;String&gt; values = new ArrayList&lt;&gt;();\r\n        values.add(&quot;Temperature&quot;);\r\n        values.add(&quot;Pressure&quot;);\r\n        values.add(&quot;Humidity&quot;);\r\n        model.addAttribute(&quot;chartValues&quot;, values);\r\n        // --------------------------------------------\r\n\r\n        // --------------------------------------------\r\n        List&lt;String&gt; parse = new ArrayList&lt;&gt;();\r\n        parse.add(&quot;JSON&quot;);\r\n        parse.add(&quot;CSV&quot;);\r\n        model.addAttribute(&quot;chartParser&quot;, parse);\r\n        // --------------------------------------------\r\n\r\n        // --------------------------------------------\r\n        List&lt;String&gt; averaging = new ArrayList&lt;&gt;();\r\n        averaging.add(&quot;All values&quot;);\r\n        averaging.add(&quot;Average by hour&quot;);\r\n        averaging.add(&quot;Average by 3 hours&quot;);\r\n        averaging.add(&quot;Average by 24 hours&quot;);\r\n        averaging.add(&quot;Min/Max values in every day&quot;);\r\n        model.addAttribute(&quot;chartAveraging&quot;, averaging);\r\n        // --------------------------------------------\r\n\r\n        // --------------------------------------------\r\n        Map&lt;String, Object&gt; chartData = new HashMap&lt;&gt;();\r\n\r\n        Map&lt;Date, Double&gt; data = DataBase.averagedValue(name, value, mode);\r\n\r\n        List&lt;String&gt; xData = data.keySet().stream()\r\n                .filter(date -&gt; !Double.isNaN(data.get(date)))\r\n                .map(date -&gt; new SimpleDateFormat(&quot;yyyy-MM-dd&quot;).format(date))\r\n                .toList();\r\n\r\n        List&lt;String&gt; yData = data.values().stream()\r\n                .filter(value -&gt; !Double.isNaN(value))\r\n                .map(String::valueOf)\r\n                .toList();\r\n\r\n        chartData.put(&quot;xData&quot;, xData.toString());\r\n        chartData.put(&quot;yData&quot;, yData.toString());\r\n\r\n        model.addAttribute(&quot;chartData&quot;, chartData);\r\n\r\n        return &quot;chart&quot;;\r\n        // --------------------------------------------\r\n    }\r\n\r\n}\r\n```\r\n\r\nHTML:\r\n\r\n```\r\n&lt;!DOCTYPE html&gt;\r\n&lt;html lang=&quot;en&quot; xmlns=&quot;http://www.w3.org/1999/xhtml&quot; xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;\r\n&lt;head&gt;\r\n    &lt;meta charset=&quot;UTF-8&quot;&gt;\r\n    &lt;title&gt;Weather Chart&lt;/title&gt;\r\n    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/echarts@5.2.2/dist/echarts.min.js&quot;&gt;&lt;/script&gt;\r\n    &lt;style&gt;\r\n        h1 {\r\n            color: #5670BC;\r\n        }\r\n        body {\r\n            font-family: &quot;Helvetica&quot;, &quot;Sans-Serif&quot;;\r\n            color: #65666B;\r\n        }\r\n        .fieldset-container {\r\n          display: flex;\r\n        }\r\n        .fieldset-container fieldset {\r\n          flex: 1;\r\n        }\r\n        input {\r\n            margin: 0.4rem;\r\n        }\r\n\r\n        .radio-container {\r\n            display: inline-block;\r\n            margin-right: 10px;\r\n          }\r\n\r\n          /* Стили для fieldset */\r\n          fieldset {\r\n            padding: 0;\r\n            margin: 0;\r\n            display: inline-block;\r\n          }\r\n        &lt;/style&gt;\r\n&lt;/head&gt;\r\n&lt;body&gt;\r\n&lt;h1&gt;Weather&#39;s charts&lt;/h1&gt;\r\n\r\n&lt;fieldset&gt;\r\n    &lt;legend&gt;Select device:&lt;/legend&gt;\r\n        &lt;div th:each=&quot;item : ${chartItems}&quot; class=&quot;radio-container&quot;&gt;\r\n            &lt;input type=&quot;checkbox&quot; th:id=&quot;${item}&quot; name=&quot;item&quot; th:value=&quot;${item}&quot; th:checked=&quot;${item == &#39;Hydra-L (01)&#39;}&quot;&gt;\r\n            &lt;label th:for=&quot;${item}&quot; th:text=&quot;${item}&quot;&gt;&lt;/label&gt;\r\n        &lt;/div&gt;\r\n&lt;/fieldset&gt;\r\n&lt;br&gt;\r\n&lt;div class=&quot;fieldset-container&quot;&gt;\r\n    &lt;fieldset&gt;\r\n        &lt;legend&gt;Select values type:&lt;/legend&gt;\r\n        &lt;div th:each=&quot;value : ${chartValues}&quot;&gt;\r\n            &lt;input type=&quot;radio&quot; th:id=&quot;${value}&quot; name=&quot;value&quot; th:value=&quot;${value}&quot; th:checked=&quot;${value == &#39;Temperature&#39;}&quot;&gt;\r\n            &lt;label th:for=&quot;${value}&quot; th:text=&quot;${value}&quot;&gt;&lt;/label&gt;\r\n        &lt;/div&gt;\r\n    &lt;/fieldset&gt;\r\n\r\n    &lt;fieldset&gt;\r\n        &lt;legend&gt;Select type of parse file:&lt;/legend&gt;\r\n        &lt;div th:each=&quot;parse : ${chartParser}&quot;&gt;\r\n            &lt;input type=&quot;radio&quot; th:id=&quot;${parse}&quot; name=&quot;parse&quot; th:value=&quot;${parse}&quot; th:checked=&quot;${parse == &#39;JSON&#39;}&quot;&gt;\r\n            &lt;label th:for=&quot;${parse}&quot; th:text=&quot;${parse}&quot;&gt;&lt;/label&gt;\r\n        &lt;/div&gt;\r\n    &lt;/fieldset&gt;\r\n\r\n    &lt;fieldset&gt;\r\n        &lt;legend&gt;Select averaging:&lt;/legend&gt;\r\n        &lt;div th:each=&quot;averaging : ${chartDiapason}&quot;&gt;\r\n            &lt;input type=&quot;radio&quot; th:id=&quot;${averaging}&quot; name=&quot;averaging&quot; th:value=&quot;${averaging}&quot; th:checked=&quot;${averaging == &#39;All values&#39;}&quot;&gt;\r\n            &lt;label th:for=&quot;${averaging}&quot; th:text=&quot;${averaging}&quot;&gt;&lt;/label&gt;\r\n        &lt;/div&gt;\r\n    &lt;/fieldset&gt;\r\n&lt;/div&gt;\r\n\r\n&lt;div id=&quot;categoryChartContainer&quot; style=&quot;width: 100%; min-height: 400px&quot;&gt;&lt;/div&gt;\r\n&lt;div id=&quot;boundaryGapChartContainer&quot; style=&quot;width: 100%; min-height: 400px&quot;&gt;&lt;/div&gt;\r\n\r\n&lt;script type=&quot;text/javascript&quot;&gt;\r\n    var chartData = {\r\n        xData: &quot;[[${chartData.xData}]]&quot;,\r\n        yData: &quot;[[${chartData.yData}]]&quot;\r\n    };\r\n\r\n    var xData = chartData.xData.split(&#39;,&#39;);\r\n    var yData = chartData.yData.split(&#39;,&#39;);\r\n\r\n    var chart = echarts.init(document.getElementById(&#39;categoryChartContainer&#39;));\r\n    var option = {\r\n        xAxis: {\r\n            type: &#39;category&#39;,\r\n            data: xData\r\n        },\r\n        yAxis: {\r\n            type: &#39;value&#39;\r\n        },\r\n        series: [{\r\n            data: yData,\r\n            type: &#39;line&#39;\r\n        }]\r\n    };\r\n    chart.setOption(option);\r\n&lt;/script&gt;\r\n\r\n&lt;script type=&quot;text/javascript&quot;&gt;\r\n    var chartData = {\r\n        xData: &quot;[[${chartData.xData}]]&quot;,\r\n        yData: &quot;[[${chartData.yData}]]&quot;\r\n    };\r\n\r\n    var xData = chartData.xData.split(&#39;,&#39;);\r\n    var yData = chartData.yData.split(&#39;,&#39;);\r\n\r\n    var chart = echarts.init(document.getElementById(&#39;boundaryGapChartContainer&#39;));\r\n    var option = {\r\n      xAxis: {\r\n        type: &#39;category&#39;,\r\n        data: xData\r\n      },\r\n      yAxis: {\r\n        type: &#39;value&#39;\r\n      },\r\n      series: [\r\n        {\r\n          data: yData,\r\n          type: &#39;bar&#39;\r\n        }\r\n      ]\r\n    };\r\n    chart.setOption(option);\r\n&lt;/script&gt;\r\n\r\n&lt;/body&gt;\r\n&lt;/html&gt;\r\n\r\n```\r\n\r\nMy code needs to show graphics of weather condition, like in the image:\r\n[enter image description here](https://i.stack.imgur.com/35b7U.png)\r\n\r\nWhen user select any radio button or check button, graphics should update\r\n\r\nI tried to write some function using RequestMapping, but bumped into the fact, that i&#39;m stupid, so nothing works","title":"Update graphics in Spring MVC with Echarts","body":"<p>i have some problem. I don't know how to update graphics data using radio buttons in html</p>\n<p>Java code:</p>\n<pre><code>package com.lavosami.controllers;\n\nimport com.lavosami.data.Data;\nimport com.lavosami.data.DataBase;\nimport com.lavosami.data.JSON;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.ui.Model;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RequestMethod;\nimport org.springframework.web.bind.annotation.RequestParam;\n\nimport java.text.SimpleDateFormat;\nimport java.util.*;\n\nimport static com.lavosami.data.DataBase.dataBase;\n\n@Controller\npublic class ChartController {\n    String name = &quot;Hydra-L (01)&quot;;\n    String value = &quot;Temperature&quot;;\n    int mode = 0;\n\n    @GetMapping(&quot;/chart&quot;)\n    public String getChartData(Model model) {\n        JSON.filesParse();\n\n        // --------------------------------------------\n        List&lt;String&gt; items = new ArrayList&lt;&gt;();\n        for (Data data : dataBase.values()) {\n            if (!items.contains(data.getName())) {\n                items.add(data.getName());\n            }\n        }\n        Collections.sort(items);\n        model.addAttribute(&quot;chartItems&quot;, items);\n        // --------------------------------------------\n\n        // --------------------------------------------\n        List&lt;String&gt; values = new ArrayList&lt;&gt;();\n        values.add(&quot;Temperature&quot;);\n        values.add(&quot;Pressure&quot;);\n        values.add(&quot;Humidity&quot;);\n        model.addAttribute(&quot;chartValues&quot;, values);\n        // --------------------------------------------\n\n        // --------------------------------------------\n        List&lt;String&gt; parse = new ArrayList&lt;&gt;();\n        parse.add(&quot;JSON&quot;);\n        parse.add(&quot;CSV&quot;);\n        model.addAttribute(&quot;chartParser&quot;, parse);\n        // --------------------------------------------\n\n        // --------------------------------------------\n        List&lt;String&gt; averaging = new ArrayList&lt;&gt;();\n        averaging.add(&quot;All values&quot;);\n        averaging.add(&quot;Average by hour&quot;);\n        averaging.add(&quot;Average by 3 hours&quot;);\n        averaging.add(&quot;Average by 24 hours&quot;);\n        averaging.add(&quot;Min/Max values in every day&quot;);\n        model.addAttribute(&quot;chartAveraging&quot;, averaging);\n        // --------------------------------------------\n\n        // --------------------------------------------\n        Map&lt;String, Object&gt; chartData = new HashMap&lt;&gt;();\n\n        Map&lt;Date, Double&gt; data = DataBase.averagedValue(name, value, mode);\n\n        List&lt;String&gt; xData = data.keySet().stream()\n                .filter(date -&gt; !Double.isNaN(data.get(date)))\n                .map(date -&gt; new SimpleDateFormat(&quot;yyyy-MM-dd&quot;).format(date))\n                .toList();\n\n        List&lt;String&gt; yData = data.values().stream()\n                .filter(value -&gt; !Double.isNaN(value))\n                .map(String::valueOf)\n                .toList();\n\n        chartData.put(&quot;xData&quot;, xData.toString());\n        chartData.put(&quot;yData&quot;, yData.toString());\n\n        model.addAttribute(&quot;chartData&quot;, chartData);\n\n        return &quot;chart&quot;;\n        // --------------------------------------------\n    }\n\n}\n</code></pre>\n<p>HTML:</p>\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=&quot;en&quot; xmlns=&quot;http://www.w3.org/1999/xhtml&quot; xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;\n&lt;head&gt;\n    &lt;meta charset=&quot;UTF-8&quot;&gt;\n    &lt;title&gt;Weather Chart&lt;/title&gt;\n    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/echarts@5.2.2/dist/echarts.min.js&quot;&gt;&lt;/script&gt;\n    &lt;style&gt;\n        h1 {\n            color: #5670BC;\n        }\n        body {\n            font-family: &quot;Helvetica&quot;, &quot;Sans-Serif&quot;;\n            color: #65666B;\n        }\n        .fieldset-container {\n          display: flex;\n        }\n        .fieldset-container fieldset {\n          flex: 1;\n        }\n        input {\n            margin: 0.4rem;\n        }\n\n        .radio-container {\n            display: inline-block;\n            margin-right: 10px;\n          }\n\n          /* Стили для fieldset */\n          fieldset {\n            padding: 0;\n            margin: 0;\n            display: inline-block;\n          }\n        &lt;/style&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;h1&gt;Weather's charts&lt;/h1&gt;\n\n&lt;fieldset&gt;\n    &lt;legend&gt;Select device:&lt;/legend&gt;\n        &lt;div th:each=&quot;item : ${chartItems}&quot; class=&quot;radio-container&quot;&gt;\n            &lt;input type=&quot;checkbox&quot; th:id=&quot;${item}&quot; name=&quot;item&quot; th:value=&quot;${item}&quot; th:checked=&quot;${item == 'Hydra-L (01)'}&quot;&gt;\n            &lt;label th:for=&quot;${item}&quot; th:text=&quot;${item}&quot;&gt;&lt;/label&gt;\n        &lt;/div&gt;\n&lt;/fieldset&gt;\n&lt;br&gt;\n&lt;div class=&quot;fieldset-container&quot;&gt;\n    &lt;fieldset&gt;\n        &lt;legend&gt;Select values type:&lt;/legend&gt;\n        &lt;div th:each=&quot;value : ${chartValues}&quot;&gt;\n            &lt;input type=&quot;radio&quot; th:id=&quot;${value}&quot; name=&quot;value&quot; th:value=&quot;${value}&quot; th:checked=&quot;${value == 'Temperature'}&quot;&gt;\n            &lt;label th:for=&quot;${value}&quot; th:text=&quot;${value}&quot;&gt;&lt;/label&gt;\n        &lt;/div&gt;\n    &lt;/fieldset&gt;\n\n    &lt;fieldset&gt;\n        &lt;legend&gt;Select type of parse file:&lt;/legend&gt;\n        &lt;div th:each=&quot;parse : ${chartParser}&quot;&gt;\n            &lt;input type=&quot;radio&quot; th:id=&quot;${parse}&quot; name=&quot;parse&quot; th:value=&quot;${parse}&quot; th:checked=&quot;${parse == 'JSON'}&quot;&gt;\n            &lt;label th:for=&quot;${parse}&quot; th:text=&quot;${parse}&quot;&gt;&lt;/label&gt;\n        &lt;/div&gt;\n    &lt;/fieldset&gt;\n\n    &lt;fieldset&gt;\n        &lt;legend&gt;Select averaging:&lt;/legend&gt;\n        &lt;div th:each=&quot;averaging : ${chartDiapason}&quot;&gt;\n            &lt;input type=&quot;radio&quot; th:id=&quot;${averaging}&quot; name=&quot;averaging&quot; th:value=&quot;${averaging}&quot; th:checked=&quot;${averaging == 'All values'}&quot;&gt;\n            &lt;label th:for=&quot;${averaging}&quot; th:text=&quot;${averaging}&quot;&gt;&lt;/label&gt;\n        &lt;/div&gt;\n    &lt;/fieldset&gt;\n&lt;/div&gt;\n\n&lt;div id=&quot;categoryChartContainer&quot; style=&quot;width: 100%; min-height: 400px&quot;&gt;&lt;/div&gt;\n&lt;div id=&quot;boundaryGapChartContainer&quot; style=&quot;width: 100%; min-height: 400px&quot;&gt;&lt;/div&gt;\n\n&lt;script type=&quot;text/javascript&quot;&gt;\n    var chartData = {\n        xData: &quot;[[${chartData.xData}]]&quot;,\n        yData: &quot;[[${chartData.yData}]]&quot;\n    };\n\n    var xData = chartData.xData.split(',');\n    var yData = chartData.yData.split(',');\n\n    var chart = echarts.init(document.getElementById('categoryChartContainer'));\n    var option = {\n        xAxis: {\n            type: 'category',\n            data: xData\n        },\n        yAxis: {\n            type: 'value'\n        },\n        series: [{\n            data: yData,\n            type: 'line'\n        }]\n    };\n    chart.setOption(option);\n&lt;/script&gt;\n\n&lt;script type=&quot;text/javascript&quot;&gt;\n    var chartData = {\n        xData: &quot;[[${chartData.xData}]]&quot;,\n        yData: &quot;[[${chartData.yData}]]&quot;\n    };\n\n    var xData = chartData.xData.split(',');\n    var yData = chartData.yData.split(',');\n\n    var chart = echarts.init(document.getElementById('boundaryGapChartContainer'));\n    var option = {\n      xAxis: {\n        type: 'category',\n        data: xData\n      },\n      yAxis: {\n        type: 'value'\n      },\n      series: [\n        {\n          data: yData,\n          type: 'bar'\n        }\n      ]\n    };\n    chart.setOption(option);\n&lt;/script&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n\n</code></pre>\n<p>My code needs to show graphics of weather condition, like in the image:\n<a href=\"https://i.stack.imgur.com/35b7U.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>When user select any radio button or check button, graphics should update</p>\n<p>I tried to write some function using RequestMapping, but bumped into the fact, that i'm stupid, so nothing works</p>\n"},{"tags":["java","string","string-comparison"],"comments":[{"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"score":3,"creation_date":1290042397,"post_id":4210713,"comment_id":4554259,"body_markdown":"what&#39;s the actual value of values[0]","body":"what&#39;s the actual value of values[0]"},{"owner":{"account_id":223869,"reputation":54820,"user_id":483349,"accept_rate":67,"display_name":"Evan Mulawski"},"score":4,"creation_date":1290042416,"post_id":4210713,"comment_id":4554264,"body_markdown":"Are you 110% sure `values[0]` contains a string with the value &quot;debug_mode&quot;? Print it to the console to be sure.","body":"Are you 110% sure <code>values[0]</code> contains a string with the value &quot;debug_mode&quot;? Print it to the console to be sure."},{"owner":{"account_id":164242,"reputation":2737,"user_id":386875,"accept_rate":97,"display_name":"Eternal Noob"},"score":0,"creation_date":1290042482,"post_id":4210713,"comment_id":4554272,"body_markdown":"could you print values[0] before this if condition?","body":"could you print values[0] before this if condition?"},{"owner":{"account_id":212263,"reputation":136304,"user_id":464988,"accept_rate":94,"display_name":"MByD"},"score":0,"creation_date":1290042636,"post_id":4210713,"comment_id":4554290,"body_markdown":"@Evan - even 120%, and that&#39;s the most that I can be. I observed this parameter during debug of the code, and in standard output.","body":"@Evan - even 120%, and that&#39;s the most that I can be. I observed this parameter during debug of the code, and in standard output."},{"owner":{"account_id":53868,"reputation":1956,"user_id":161081,"accept_rate":25,"display_name":"weiji"},"score":0,"creation_date":1290043203,"post_id":4210713,"comment_id":4554337,"body_markdown":"if you&#39;re using a debugger, can you step into equalsIgnoreCase() and see what it&#39;s doing inside there?","body":"if you&#39;re using a debugger, can you step into equalsIgnoreCase() and see what it&#39;s doing inside there?"},{"owner":{"account_id":13993690,"reputation":65,"user_id":10107065,"display_name":"pankaj"},"score":0,"creation_date":1580180340,"post_id":4210713,"comment_id":106004122,"body_markdown":"i am also getting the same issue. how to compare these types of strings?","body":"i am also getting the same issue. how to compare these types of strings?"}],"answers":[{"comments":[{"owner":{"account_id":212263,"reputation":136304,"user_id":464988,"accept_rate":94,"display_name":"MByD"},"score":1,"creation_date":1290043575,"post_id":4210732,"comment_id":4554372,"body_markdown":"Well, you highly doubt it, but actually the problem was that I wrote to file using DataOutputStream.writeChar() instead of writeUTF(). and it did cause the problem.","body":"Well, you highly doubt it, but actually the problem was that I wrote to file using DataOutputStream.writeChar() instead of writeUTF(). and it did cause the problem."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1290068208,"post_id":4210732,"comment_id":4556666,"body_markdown":"Nothing to do with it. If writeUTF() worked and writeChar() didn&#39;t, he must have been *reading* with readUTF(), which certainly wouldn&#39;t work with data not written by writeUTF(). Unicode has nothing to do with this.","body":"Nothing to do with it. If writeUTF() worked and writeChar() didn&#39;t, he must have been <i>reading</i> with readUTF(), which certainly wouldn&#39;t work with data not written by writeUTF(). Unicode has nothing to do with this."},{"owner":{"account_id":195577,"reputation":28172,"user_id":438544,"accept_rate":38,"display_name":"icyrock.com"},"score":0,"creation_date":1290094284,"post_id":4210732,"comment_id":4561096,"body_markdown":"@EJP It&#39;s a mix of Unicode and deprecated API (the latter being more important) - see the edit.","body":"@EJP It&#39;s a mix of Unicode and deprecated API (the latter being more important) - see the edit."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1290132748,"post_id":4210732,"comment_id":4567820,"body_markdown":"So it had nothing to do with writeUTF() and nothing to do with deprecation either. It had to do with reading and writing using asymmetric methods. If you wrote with writeChars() you need to read with readChar(). If you wrote with writeUTF() you needed to read with readUTF(). If you wrote with PrintStream.println() you needed to read with readLine() (deprecated or not).","body":"So it had nothing to do with writeUTF() and nothing to do with deprecation either. It had to do with reading and writing using asymmetric methods. If you wrote with writeChars() you need to read with readChar(). If you wrote with writeUTF() you needed to read with readUTF(). If you wrote with PrintStream.println() you needed to read with readLine() (deprecated or not)."},{"owner":{"account_id":195577,"reputation":28172,"user_id":438544,"accept_rate":38,"display_name":"icyrock.com"},"score":0,"creation_date":1290139048,"post_id":4210732,"comment_id":4568328,"body_markdown":"Not really - if you wrote by calling `writeChar` 5 times with last one being writing a new line character, you would expect that you could read all 5 characters into a string by calling `readLine` once. I would say it&#39;s a combination of all these factors and ambiguity of `readLine` (with respect to `writeUTF`). That&#39;s why `readLine` was deprecated. Definitively agree that you should try to be symmetric as much as you can.","body":"Not really - if you wrote by calling <code>writeChar</code> 5 times with last one being writing a new line character, you would expect that you could read all 5 characters into a string by calling <code>readLine</code> once. I would say it&#39;s a combination of all these factors and ambiguity of <code>readLine</code> (with respect to <code>writeUTF</code>). That&#39;s why <code>readLine</code> was deprecated. Definitively agree that you should try to be symmetric as much as you can."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1290143349,"post_id":4210732,"comment_id":4568742,"body_markdown":"No, you wouldn&#39;t expect that if you had read the Javadoc, where it clearly says it converst successive bytes to characters. Not byte pairs.","body":"No, you wouldn&#39;t expect that if you had read the Javadoc, where it clearly says it converst successive bytes to characters. Not byte pairs."},{"owner":{"account_id":195577,"reputation":28172,"user_id":438544,"accept_rate":38,"display_name":"icyrock.com"},"score":0,"creation_date":1290144822,"post_id":4210732,"comment_id":4568875,"body_markdown":"I don&#39;t say this deprecated implementation works as I would expect (clearly, it does not) - I said I would expect that if I used the method called `writeChar` and write `abcd\\n` to a stream, I would expect the method called `readLine` to return a string `&quot;abcd&quot;`. It&#39;s not a good thing if you need to read javadoc to confirm that `readLine` does not read lines, which I would assume is a list of characters terminated by a new line, just because it doesn&#39;t consider characters the same way `writeChar` does. Fair enough remarks from your side - definitively, you are right on the implementation.","body":"I don&#39;t say this deprecated implementation works as I would expect (clearly, it does not) - I said I would expect that if I used the method called <code>writeChar</code> and write <code>abcd\\n</code> to a stream, I would expect the method called <code>readLine</code> to return a string <code>&quot;abcd&quot;</code>. It&#39;s not a good thing if you need to read javadoc to confirm that <code>readLine</code> does not read lines, which I would assume is a list of characters terminated by a new line, just because it doesn&#39;t consider characters the same way <code>writeChar</code> does. Fair enough remarks from your side - definitively, you are right on the implementation."},{"owner":{"account_id":934883,"reputation":584,"user_id":963993,"accept_rate":81,"display_name":"Vahid"},"score":0,"creation_date":1484649167,"post_id":4210732,"comment_id":70585435,"body_markdown":"[new InputStreamReader(i, &quot;utf8&quot;)] solved my problem too, thanks.","body":"[new InputStreamReader(i, &quot;utf8&quot;)] solved my problem too, thanks."}],"tags":[],"owner":{"account_id":195577,"reputation":28172,"user_id":438544,"accept_rate":38,"display_name":"icyrock.com"},"comment_count":8,"down_vote_count":0,"up_vote_count":22,"is_accepted":true,"score":22,"last_activity_date":1290094216,"creation_date":1290042491,"answer_id":4210732,"question_id":4210713,"body_markdown":"That would be very strange indeed :) Can you change the above code to this:\r\n\r\n    if (&quot;debug_mode&quot;.equalsIgnoreCase(&quot;debug_mode&quot;)) \r\n        debug_mode = true;\r\n\r\nconfirm it works fine and then double check why your `values[0]` is not &quot;debug_mode&quot;.\r\n\r\nHere&#39;s what comes to my mind right now as a list of things to check:\r\n\r\n* Check that `values[0].length() == &quot;debug_mode&quot;.length()`\r\n* I highly doubt, but let me put it on the table anyway - are you by any chance using Unicode?\r\n* Can you print each character and do `.equals()` between that character and the respective character of the &quot;debug_mode&quot; string?\r\n* If this is in a bigger project, can you do the same in a simple Java project and confirm it works there?\r\n\r\nTo clarify, the problem is actually using `DataInputStream.readLine`. From javadoc (http://download.oracle.com/javase/1.6.0/docs/api/java/io/DataInputStream.html):\r\n\r\n\treadLine()\r\n          Deprecated. This method does not properly convert bytes to characters. ...\r\n\r\nIt actually has to do with Unicode in a subtle way - when you do `writeChar` you actually write two bytes `0` and `97`, big-endian Unicode for the letter `a`.\r\n\r\nHere&#39;s a self-contained snippet that shows the behavior:\r\n\r\n    import java.io.*;\r\n    import java.util.*;\r\n    \r\n    public class B {\r\n      public static void main(String[] args) throws Exception {\r\n        String os = &quot;abc&quot;;\r\n    \r\n        System.out.println(&quot;---- unicode, big-endian&quot;);\r\n        for(byte b: os.getBytes(&quot;UTF-16BE&quot;)) {\r\n          System.out.println(b);\r\n        }\r\n    \r\n        ByteArrayOutputStream baos = new ByteArrayOutputStream();\r\n        DataOutputStream dos = new DataOutputStream(baos);\r\n    \r\n        for(char c: os.toCharArray()) {\r\n          dos.writeChar(c);\r\n        }\r\n    \r\n        byte[] ba = baos.toByteArray();\r\n    \r\n        System.out.println(&quot;---- ba&quot;);\r\n        for(byte b: ba) {\r\n          System.out.println(b);\r\n        }\r\n    \r\n        ByteArrayInputStream bais = new ByteArrayInputStream(ba);\r\n        DataInputStream dis = new DataInputStream(bais);\r\n    \r\n        System.out.println(&quot;---- dis&quot;);\r\n        String s = dis.readLine();\r\n        System.out.println(s);\r\n        System.out.println(&quot;String length is &quot; + s.length() \r\n          + &quot;, but you would expect &quot; + os.length() \r\n          + &quot;, as that is what you see printed...&quot;);\r\n      }\r\n    }\r\n\r\nMoral of the story - don&#39;t use deprecated api... Also, whitespace is the silent killer: http://www.codinghorror.com/blog/2009/11/whitespace-the-silent-killer.html","title":"equal() and equalsIgnoreCase() return false for equal strings","body":"<p>That would be very strange indeed :) Can you change the above code to this:</p>\n\n<pre><code>if (\"debug_mode\".equalsIgnoreCase(\"debug_mode\")) \n    debug_mode = true;\n</code></pre>\n\n<p>confirm it works fine and then double check why your <code>values[0]</code> is not \"debug_mode\".</p>\n\n<p>Here's what comes to my mind right now as a list of things to check:</p>\n\n<ul>\n<li>Check that <code>values[0].length() == \"debug_mode\".length()</code></li>\n<li>I highly doubt, but let me put it on the table anyway - are you by any chance using Unicode?</li>\n<li>Can you print each character and do <code>.equals()</code> between that character and the respective character of the \"debug_mode\" string?</li>\n<li>If this is in a bigger project, can you do the same in a simple Java project and confirm it works there?</li>\n</ul>\n\n<p>To clarify, the problem is actually using <code>DataInputStream.readLine</code>. From javadoc (<a href=\"http://download.oracle.com/javase/1.6.0/docs/api/java/io/DataInputStream.html\" rel=\"noreferrer\">http://download.oracle.com/javase/1.6.0/docs/api/java/io/DataInputStream.html</a>):</p>\n\n<pre><code>readLine()\n      Deprecated. This method does not properly convert bytes to characters. ...\n</code></pre>\n\n<p>It actually has to do with Unicode in a subtle way - when you do <code>writeChar</code> you actually write two bytes <code>0</code> and <code>97</code>, big-endian Unicode for the letter <code>a</code>.</p>\n\n<p>Here's a self-contained snippet that shows the behavior:</p>\n\n<pre><code>import java.io.*;\nimport java.util.*;\n\npublic class B {\n  public static void main(String[] args) throws Exception {\n    String os = \"abc\";\n\n    System.out.println(\"---- unicode, big-endian\");\n    for(byte b: os.getBytes(\"UTF-16BE\")) {\n      System.out.println(b);\n    }\n\n    ByteArrayOutputStream baos = new ByteArrayOutputStream();\n    DataOutputStream dos = new DataOutputStream(baos);\n\n    for(char c: os.toCharArray()) {\n      dos.writeChar(c);\n    }\n\n    byte[] ba = baos.toByteArray();\n\n    System.out.println(\"---- ba\");\n    for(byte b: ba) {\n      System.out.println(b);\n    }\n\n    ByteArrayInputStream bais = new ByteArrayInputStream(ba);\n    DataInputStream dis = new DataInputStream(bais);\n\n    System.out.println(\"---- dis\");\n    String s = dis.readLine();\n    System.out.println(s);\n    System.out.println(\"String length is \" + s.length() \n      + \", but you would expect \" + os.length() \n      + \", as that is what you see printed...\");\n  }\n}\n</code></pre>\n\n<p>Moral of the story - don't use deprecated api... Also, whitespace is the silent killer: <a href=\"http://www.codinghorror.com/blog/2009/11/whitespace-the-silent-killer.html\" rel=\"noreferrer\">http://www.codinghorror.com/blog/2009/11/whitespace-the-silent-killer.html</a></p>\n"},{"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1290068102,"post_id":4210775,"comment_id":4556649,"body_markdown":"There is no version of Java ancient or modern where these methods do not work correctly. It wouldn&#39;t have been able to compile itself for a start.","body":"There is no version of Java ancient or modern where these methods do not work correctly. It wouldn&#39;t have been able to compile itself for a start."}],"tags":[],"owner":{"account_id":223869,"reputation":54820,"user_id":483349,"accept_rate":67,"display_name":"Evan Mulawski"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1290043030,"creation_date":1290043030,"answer_id":4210775,"question_id":4210713,"body_markdown":"Try `compareToIgnoreCase`:\r\n\r\n    if (values[0].compareToIgnoreCase(&quot;debug_mode&quot;) != 0) \r\n        debug_mode = true;\r\n\r\nAnd if *that* doesn&#39;t work, try `compareTo` instead.\r\n\r\nAnd if *that* doesn&#39;t work, try:\r\n\r\n    String d = (String)values[0];\r\n    if (d.compareToIgnoreCase(&quot;debug_mode&quot;) != 0) \r\n            debug_mode = true;\r\n\r\nAnd if *those* don&#39;t work, you have a *serious* Java issue. Either it&#39;s ancient or it doesn&#39;t like you.","title":"equal() and equalsIgnoreCase() return false for equal strings","body":"<p>Try <code>compareToIgnoreCase</code>:</p>\n\n<pre><code>if (values[0].compareToIgnoreCase(\"debug_mode\") != 0) \n    debug_mode = true;\n</code></pre>\n\n<p>And if <em>that</em> doesn't work, try <code>compareTo</code> instead.</p>\n\n<p>And if <em>that</em> doesn't work, try:</p>\n\n<pre><code>String d = (String)values[0];\nif (d.compareToIgnoreCase(\"debug_mode\") != 0) \n        debug_mode = true;\n</code></pre>\n\n<p>And if <em>those</em> don't work, you have a <em>serious</em> Java issue. Either it's ancient or it doesn't like you.</p>\n"},{"tags":[],"owner":{"account_id":9775,"reputation":14444,"user_id":18189,"accept_rate":80,"display_name":"MBCook"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1290043737,"creation_date":1290043737,"answer_id":4210834,"question_id":4210713,"body_markdown":"I&#39;m with the others, this is crazy and shouldn&#39;t happen. I agree that printing it out may help, but I&#39;m going to assume you&#39;ve tried that.\r\n\r\nIs it possible it&#39;s a localization issue? That is, when you type in debug_mode in the editor (for the string) it&#39;s the string &quot;debug_mode&quot;, but when you type the string in during execution the terminal is set to use a different language and you&#39;re getting a different (but identical looking) character?\r\n\r\nTo find out, loop through the string you get in and print out each character&#39;s integer value, and then do the same with your string that&#39;s hardcoded and see if they are the same.\r\n\r\n    String value = dis.readLine();\r\n    String values[] = value.trim().split(&quot;=&quot;);\r\n\r\n    System.out.println(&quot;Input:&quot;);\r\n\r\n    for (int i = 0; i &lt; values[0].length(); i++) {\r\n        System.out.print((int) values[0].charAt(i));\r\n        System.out.print(&#39; &#39;);\r\n    }\r\n\r\n    System.out.println(&quot;Hardcoded:&quot;);\r\n\r\n    String debugMode = &quot;debug_mode&quot;;\r\n\r\n    for (int i = 0; i &lt; debugMode.length(); i++) {\r\n        System.out.print((int) debugMode.charAt(i));\r\n        System.out.print(&#39; &#39;);\r\n    }\r\n\r\nNow for this to work, you&#39;d have to type the code (or at least the debug_mode constant) so it has the same character set as you are using.\r\n\r\nI&#39;d be willing to bet a good sum of money this isn&#39;t the issue, but even if it isn&#39;t it should prove instructive and show you what is different.","title":"equal() and equalsIgnoreCase() return false for equal strings","body":"<p>I'm with the others, this is crazy and shouldn't happen. I agree that printing it out may help, but I'm going to assume you've tried that.</p>\n\n<p>Is it possible it's a localization issue? That is, when you type in debug_mode in the editor (for the string) it's the string \"debug_mode\", but when you type the string in during execution the terminal is set to use a different language and you're getting a different (but identical looking) character?</p>\n\n<p>To find out, loop through the string you get in and print out each character's integer value, and then do the same with your string that's hardcoded and see if they are the same.</p>\n\n<pre><code>String value = dis.readLine();\nString values[] = value.trim().split(\"=\");\n\nSystem.out.println(\"Input:\");\n\nfor (int i = 0; i &lt; values[0].length(); i++) {\n    System.out.print((int) values[0].charAt(i));\n    System.out.print(' ');\n}\n\nSystem.out.println(\"Hardcoded:\");\n\nString debugMode = \"debug_mode\";\n\nfor (int i = 0; i &lt; debugMode.length(); i++) {\n    System.out.print((int) debugMode.charAt(i));\n    System.out.print(' ');\n}\n</code></pre>\n\n<p>Now for this to work, you'd have to type the code (or at least the debug_mode constant) so it has the same character set as you are using.</p>\n\n<p>I'd be willing to bet a good sum of money this isn't the issue, but even if it isn't it should prove instructive and show you what is different.</p>\n"},{"tags":[],"owner":{"account_id":66339,"reputation":12332,"user_id":194674,"accept_rate":80,"display_name":"dvs"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1365802448,"creation_date":1365802448,"answer_id":15981209,"question_id":4210713,"body_markdown":"You can easily run into this on Android with `SpannableString`, **like when a TextView has autolinking enabled**, for instance:\r\n\r\n    // Outputs &quot;a string&quot;\r\n    Log.d(&quot;test&quot;, &quot;TextView text: &quot; + textView.getText());\r\n    \r\n    // Outputs &quot;a string&quot;\r\n    Log.d(&quot;test&quot;, &quot;Text to match: &quot; + &quot;a string&quot;);\r\n    \r\n    if( textView.getText().equals(&quot;a string&quot;) )\r\n    {\r\n        // Won&#39;t get here\r\n    }\r\n\r\nYou can do a quick test to see what kind of string textView.getText() returns by doing:\r\n\r\n    Log.d(&quot;test&quot;, &quot;String class: &quot; + textView.getText().getClass().getSimpleName());\r\n\r\nIf indeed you&#39;ve got a `SpannableString`, you simply need to call toString() on it for the if condition to be satisfied:\r\n\r\n    if( textView.getText().toString().equals(&quot;a string&quot;) )\r\n    {\r\n        // We&#39;re here\r\n    }\r\n\r\n","title":"equal() and equalsIgnoreCase() return false for equal strings","body":"<p>You can easily run into this on Android with <code>SpannableString</code>, <strong>like when a TextView has autolinking enabled</strong>, for instance:</p>\n\n<pre><code>// Outputs \"a string\"\nLog.d(\"test\", \"TextView text: \" + textView.getText());\n\n// Outputs \"a string\"\nLog.d(\"test\", \"Text to match: \" + \"a string\");\n\nif( textView.getText().equals(\"a string\") )\n{\n    // Won't get here\n}\n</code></pre>\n\n<p>You can do a quick test to see what kind of string textView.getText() returns by doing:</p>\n\n<pre><code>Log.d(\"test\", \"String class: \" + textView.getText().getClass().getSimpleName());\n</code></pre>\n\n<p>If indeed you've got a <code>SpannableString</code>, you simply need to call toString() on it for the if condition to be satisfied:</p>\n\n<pre><code>if( textView.getText().toString().equals(\"a string\") )\n{\n    // We're here\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1272929,"reputation":3799,"user_id":1228807,"accept_rate":61,"display_name":"Sterling Diaz"},"score":0,"creation_date":1413595455,"post_id":16321314,"comment_id":41515530,"body_markdown":"I thought you were a stupid because of that stupid error, but... I thought to myselft: &quot;It&#39;s always human errors, so, let me check my code&quot;. And what happend? It was your same error!! :P And I have almost an hour with this","body":"I thought you were a stupid because of that stupid error, but... I thought to myselft: &quot;It&#39;s always human errors, so, let me check my code&quot;. And what happend? It was your same error!! :P And I have almost an hour with this"},{"owner":{"account_id":371903,"reputation":612,"user_id":720677,"display_name":"providencemac"},"score":0,"creation_date":1459458080,"post_id":16321314,"comment_id":60309152,"body_markdown":"Similarly, I had a problem with trying to return from a method using this type of check. \n```if (&quot;stupid&quot;.equalsIgnoreCase.(&quot;STupid&quot;)) return;```\nI had to wrap the return block:\n```if (&quot;stupid&quot;.equalsIgnoreCase.(&quot;STupid&quot;)) { return; }```","body":"Similarly, I had a problem with trying to return from a method using this type of check.  <code>if (&quot;stupid&quot;.equalsIgnoreCase.(&quot;STupid&quot;)) return;</code> I had to wrap the return block: <code>if (&quot;stupid&quot;.equalsIgnoreCase.(&quot;STupid&quot;)) { return; }</code>"},{"owner":{"account_id":5706118,"reputation":207,"user_id":4509583,"display_name":"Warren K"},"score":0,"creation_date":1589369324,"post_id":16321314,"comment_id":109264471,"body_markdown":"You can also avoid this potential problem by putting the opening { on the same line as the IF Statement.  That&#39;s what I do.  That way if you add an unintended &quot;;&quot; anywhere you will almost certainly cause a compile problem due to bracket mismatch.","body":"You can also avoid this potential problem by putting the opening { on the same line as the IF Statement.  That&#39;s what I do.  That way if you add an unintended &quot;;&quot; anywhere you will almost certainly cause a compile problem due to bracket mismatch."}],"tags":[],"owner":{"account_id":2711631,"reputation":71,"user_id":2339958,"display_name":"Jason"},"comment_count":3,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1367422580,"creation_date":1367422580,"answer_id":16321314,"question_id":4210713,"body_markdown":"I have just had this exact same issue, using equalsIgnoreCase.\r\n\r\nAfter hours of staring at the screen, debugging the code it dawned on me that my if statement had a ; at the end,\r\n\r\ni.e.\r\n\r\n    if (&quot;stupid&quot;.equalsIgnoreCase.(&quot;STupid&quot;);\r\n    {\r\n         //it always gets here \r\n\r\n    }\r\n\r\n\r\nHope this helps someone in future.","title":"equal() and equalsIgnoreCase() return false for equal strings","body":"<p>I have just had this exact same issue, using equalsIgnoreCase.</p>\n\n<p>After hours of staring at the screen, debugging the code it dawned on me that my if statement had a ; at the end,</p>\n\n<p>i.e.</p>\n\n<pre><code>if (\"stupid\".equalsIgnoreCase.(\"STupid\");\n{\n     //it always gets here \n\n}\n</code></pre>\n\n<p>Hope this helps someone in future.</p>\n"},{"tags":[],"owner":{"account_id":1716252,"reputation":1757,"user_id":1573252,"display_name":"Suresh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1375874660,"creation_date":1375874660,"answer_id":18102126,"question_id":4210713,"body_markdown":"On a different note, I had a JSP page having similar problems while comparing the retrieved &quot;status&quot; of a table:\r\n \r\n\r\n    try{\r\n    \r\n  \r\n\r\n      // ID is a Primary Key (unique). STATUS column data type in DB: CHAR(20)\r\n      rs = stmt.executeQuery(&quot;select STATUS from TEMP_TABLE WHERE ID=&#39;&quot;+id+&quot;&#39;&quot;);\r\n    \r\n      while(rs.next()){\r\n    \r\n            status = (String) rs.getString(&quot;STATUS&quot;);\r\n    \t\t\t\t\t   \r\n      }\r\n       if ( status.equalsIgnoreCase(&quot;active&quot;) )\r\n       {\r\n              // Run some DB Queries\r\n       } else {\r\n               out.write(&quot;Page can&#39;t be accessed due to status : &quot; + status);\r\n       }\r\n    } catch(Exception e) { e.getMessage(); }\r\n    finally {\r\n             //close all open objects\r\n    }\r\n\r\nFor reasons unknown to me it always hits the else block with message &quot;Page can&#39;t be accessed due to status : active&quot;, though status is &quot;active&quot;. I tried closing rs and stmt objects after each query before and after running this Query but that didn&#39;t helped. Eventually I changed my Query to \r\n\r\n   \r\n\r\n    &quot;select STATUS from TEMP_TABLE WHERE ID=&#39;&quot;+id+&quot;&#39; where STATUS=&#39;ACTIVE&#39;&quot;\r\n\r\n","title":"equal() and equalsIgnoreCase() return false for equal strings","body":"<p>On a different note, I had a JSP page having similar problems while comparing the retrieved \"status\" of a table:</p>\n\n<pre><code>try{\n\n\n\n  // ID is a Primary Key (unique). STATUS column data type in DB: CHAR(20)\n  rs = stmt.executeQuery(\"select STATUS from TEMP_TABLE WHERE ID='\"+id+\"'\");\n\n  while(rs.next()){\n\n        status = (String) rs.getString(\"STATUS\");\n\n  }\n   if ( status.equalsIgnoreCase(\"active\") )\n   {\n          // Run some DB Queries\n   } else {\n           out.write(\"Page can't be accessed due to status : \" + status);\n   }\n} catch(Exception e) { e.getMessage(); }\nfinally {\n         //close all open objects\n}\n</code></pre>\n\n<p>For reasons unknown to me it always hits the else block with message \"Page can't be accessed due to status : active\", though status is \"active\". I tried closing rs and stmt objects after each query before and after running this Query but that didn't helped. Eventually I changed my Query to </p>\n\n<pre><code>\"select STATUS from TEMP_TABLE WHERE ID='\"+id+\"' where STATUS='ACTIVE'\"\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1773418,"reputation":18513,"user_id":1617737,"accept_rate":53,"display_name":"ban-geoengineering"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1486423305,"creation_date":1486423305,"answer_id":42079083,"question_id":4210713,"body_markdown":"I think the problem may be that although the actual `String` values are equal, their underlying `byte[]`&#39;s may not be.\r\n\r\nTry using this method to compare the two `byte[]`&#39;s:\r\n\r\n    private String printBytes(String str) {\r\n        byte[] bytes = str.getBytes(ENCODING);\r\n        String output = &quot;byte[&quot;;\r\n        for (int i = 0; i &lt; bytes.length; i++) {\r\n            output += Byte.toString(bytes[i]);\r\n            if (i &lt; bytes.length - 1) {\r\n                output += &quot;, &quot;;\r\n            }\r\n        }\r\n        output += &quot;]&quot;;\r\n        return output;\r\n    }\r\n\r\nFor example:\r\n\r\n    Charset ENCODING = Charset.forName(&quot;UTF-8&quot;);\r\n    Log.d(LOG_TAG, &quot;string1: \\&quot;&quot; + string1 + &quot;\\&quot; - &quot; + printBytes(string1));\r\n    Log.d(LOG_TAG, &quot;string2: \\&quot;&quot; + string2 + &quot;\\&quot; - &quot; + printBytes(string2));\r\n\r\nThis would enable a visual comparison. For long `String`s, you could compare the `byte[]`&#39;s programmatically by iterating through both arrays at the same time and comparing the values.","title":"equal() and equalsIgnoreCase() return false for equal strings","body":"<p>I think the problem may be that although the actual <code>String</code> values are equal, their underlying <code>byte[]</code>'s may not be.</p>\n\n<p>Try using this method to compare the two <code>byte[]</code>'s:</p>\n\n<pre><code>private String printBytes(String str) {\n    byte[] bytes = str.getBytes(ENCODING);\n    String output = \"byte[\";\n    for (int i = 0; i &lt; bytes.length; i++) {\n        output += Byte.toString(bytes[i]);\n        if (i &lt; bytes.length - 1) {\n            output += \", \";\n        }\n    }\n    output += \"]\";\n    return output;\n}\n</code></pre>\n\n<p>For example:</p>\n\n<pre><code>Charset ENCODING = Charset.forName(\"UTF-8\");\nLog.d(LOG_TAG, \"string1: \\\"\" + string1 + \"\\\" - \" + printBytes(string1));\nLog.d(LOG_TAG, \"string2: \\\"\" + string2 + \"\\\" - \" + printBytes(string2));\n</code></pre>\n\n<p>This would enable a visual comparison. For long <code>String</code>s, you could compare the <code>byte[]</code>'s programmatically by iterating through both arrays at the same time and comparing the values.</p>\n"},{"tags":[],"owner":{"account_id":7937045,"reputation":3251,"user_id":5992618,"accept_rate":75,"display_name":"eRaisedToX"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1488868389,"creation_date":1488868389,"answer_id":42641716,"question_id":4210713,"body_markdown":"**Although there are few very good** and correct answers above I would still like to mention **my personal experience so that anyone facing same problem** could get instant help from this answer.\r\n\r\n\r\nI had two different string say **string A** and **string B** coming from diffrent sources, **they seemed identical to me** but **I was getting not equal for them on using equals method**\r\n\r\neven on using **equalsIgnoreCase** gave me **false**\r\n\r\nI was clueless because when I was printing those string (A &amp; B) to check what they look like they were \r\n\r\n    String A is dsycuii343qzx899+ty=\r\n    String B is dsycuii343qzx899+ty=\r\n\r\nso, **I then checked length of the two string** which gave me the clue\r\n\r\n    String A length = 20\r\n    String B length = 21\r\n\r\n\r\nSO that means I might be missing something,\r\n\r\nso what I did was\r\n\r\n**I checked each String char by char**  and I got to know the problem\r\n\r\nString A which seemed like `dsycuii343qzx899+ty=` was actually `dsycuii343qzx899+ty=\\n` \r\n\r\ni.e there was a `LF` (new line character) at the end which was noticed while Log check \r\n\r\nhope it might help someone.\r\n\r\n","title":"equal() and equalsIgnoreCase() return false for equal strings","body":"<p><strong>Although there are few very good</strong> and correct answers above I would still like to mention <strong>my personal experience so that anyone facing same problem</strong> could get instant help from this answer.</p>\n\n<p>I had two different string say <strong>string A</strong> and <strong>string B</strong> coming from diffrent sources, <strong>they seemed identical to me</strong> but <strong>I was getting not equal for them on using equals method</strong></p>\n\n<p>even on using <strong>equalsIgnoreCase</strong> gave me <strong>false</strong></p>\n\n<p>I was clueless because when I was printing those string (A &amp; B) to check what they look like they were </p>\n\n<pre><code>String A is dsycuii343qzx899+ty=\nString B is dsycuii343qzx899+ty=\n</code></pre>\n\n<p>so, <strong>I then checked length of the two string</strong> which gave me the clue</p>\n\n<pre><code>String A length = 20\nString B length = 21\n</code></pre>\n\n<p>SO that means I might be missing something,</p>\n\n<p>so what I did was</p>\n\n<p><strong>I checked each String char by char</strong>  and I got to know the problem</p>\n\n<p>String A which seemed like <code>dsycuii343qzx899+ty=</code> was actually <code>dsycuii343qzx899+ty=\\n</code> </p>\n\n<p>i.e there was a <code>LF</code> (new line character) at the end which was noticed while Log check </p>\n\n<p>hope it might help someone.</p>\n"},{"tags":[],"owner":{"account_id":9660059,"reputation":1877,"user_id":7168430,"display_name":"Debasish Ghosh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1493731767,"creation_date":1493714753,"answer_id":43733663,"question_id":4210713,"body_markdown":"In my case I just discovered one string had space before the string.\r\nMy strings were like &quot;&amp;nbsp;SUCCESS&quot; and &quot;SUCCESS&quot;, \r\nso it was returning `false`. I used: \r\n\r\n     String st1=st.replaceAll(&quot;\\\\s&quot;,&quot;&quot;);\r\n\r\nand thus problem solved.","title":"equal() and equalsIgnoreCase() return false for equal strings","body":"<p>In my case I just discovered one string had space before the string.\nMy strings were like \"&nbsp;SUCCESS\" and \"SUCCESS\", \nso it was returning <code>false</code>. I used: </p>\n\n<pre><code> String st1=st.replaceAll(\"\\\\s\",\"\");\n</code></pre>\n\n<p>and thus problem solved.</p>\n"},{"tags":[],"owner":{"account_id":14242397,"reputation":23,"user_id":10288378,"display_name":"Ummuhany Sifa"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1557737231,"creation_date":1557737231,"answer_id":56108726,"question_id":4210713,"body_markdown":"May be my answer is very later but it will be useful to someone.\r\n\r\nJust trim() both the strings before comparison\r\n\r\n           eg: if(data1.trim().equalsIgnoreCase(data2.trim()))\r\n                {\r\n                    //This gives proper result\r\n                }","title":"equal() and equalsIgnoreCase() return false for equal strings","body":"<p>May be my answer is very later but it will be useful to someone.</p>\n\n<p>Just trim() both the strings before comparison</p>\n\n<pre><code>       eg: if(data1.trim().equalsIgnoreCase(data2.trim()))\n            {\n                //This gives proper result\n            }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3759972,"reputation":1648,"user_id":3125287,"display_name":"dfostic"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1560366049,"creation_date":1560366049,"answer_id":56568786,"question_id":4210713,"body_markdown":"Can be byte order mark: https://en.wikipedia.org/wiki/Byte_order_mark#UTF-8\r\n\r\njust try str1.length() and str2.length() and if it is not the same do \r\nstr1.charAt(0) and y=if you get something like *&#39;\\uFEFF&#39; 65279* than that is your issue ","title":"equal() and equalsIgnoreCase() return false for equal strings","body":"<p>Can be byte order mark: <a href=\"https://en.wikipedia.org/wiki/Byte_order_mark#UTF-8\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Byte_order_mark#UTF-8</a></p>\n\n<p>just try str1.length() and str2.length() and if it is not the same do \nstr1.charAt(0) and y=if you get something like <em>'\\uFEFF' 65279</em> than that is your issue </p>\n"},{"tags":[],"owner":{"account_id":3743809,"reputation":1,"user_id":3112986,"display_name":"EugeneDelage"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689093313,"creation_date":1689093313,"answer_id":76664078,"question_id":4210713,"body_markdown":"You should use the InvariantCulture parameter\r\n\r\n    String.Equals(string1, string2, StringComparison.InvariantCultureIgnoreCase))","title":"equal() and equalsIgnoreCase() return false for equal strings","body":"<p>You should use the InvariantCulture parameter</p>\n<pre><code>String.Equals(string1, string2, StringComparison.InvariantCultureIgnoreCase))\n</code></pre>\n"}],"owner":{"account_id":212263,"reputation":136304,"user_id":464988,"accept_rate":94,"display_name":"MByD"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":51560,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"accepted_answer_id":4210732,"answer_count":12,"score":13,"last_activity_date":1689093313,"creation_date":1290042239,"question_id":4210713,"body_markdown":"I&#39;m working with eclipse IDE (Version: 3.4.2) on a mac and I have met the following issue.\r\n\r\nWhen comparing between strings using equal() or equalsIgnoreCase() methods I receive false even when the string are equal. For example, the code below consider the following condition as false, even when values[0] = &quot;debug_mode&quot;\r\n\r\n    if (values[0].equalsIgnoreCase(&quot;debug_mode&quot;)) \r\n    \tdebug_mode = true;\r\n\r\nwhich is part of the following loop:\r\n\r\n    String value = dis.readLine();\r\n    String values[] = value.trim().split(&quot;=&quot;);\r\n    if (values.length &gt;= 2)\r\n    {\r\n    \tConfig.prnt_dbg_msg(values[0] + &quot;\\t&quot; + values[1]);\r\n    \tif (values[0].equalsIgnoreCase(&quot;debug_mode&quot;)) \r\n    \t\tdebug_mode = isTrue(values[1]);\r\n    \tif (values[0].equalsIgnoreCase(&quot;debug_query_parsing&quot;)) \r\n    \t\tdebug_query_parsing = isTrue(values[1]);\r\n    \tif (values[0].equalsIgnoreCase(&quot;username&quot;)) \r\n    \t\tConnection_Manager.alterAccessParameters(values[1], null, null);\r\n    \tif (values[0].equalsIgnoreCase(&quot;password&quot;)) \r\n    \t\tConnection_Manager.alterAccessParameters(null, values[1], null);\r\n\tif (values[0].equalsIgnoreCase(&quot;database&quot;)) \r\n    \t\tConnection_Manager.alterAccessParameters(null, null, values[1]);\r\n    \tif (values[0].equalsIgnoreCase(&quot;allow_duplicate_entries&quot;)) \r\n    \t\tallow_duplicate_entries = isTrue(values[1]);\r\n    }\t\t    \t\t\t  \r\n\t   \r\n\r\nI tried to use `value[0].equal(&quot;debug_mode&quot;)` and got the same result.\r\nDoes someone have any idea why?","title":"equal() and equalsIgnoreCase() return false for equal strings","body":"<p>I'm working with eclipse IDE (Version: 3.4.2) on a mac and I have met the following issue.</p>\n\n<p>When comparing between strings using equal() or equalsIgnoreCase() methods I receive false even when the string are equal. For example, the code below consider the following condition as false, even when values[0] = \"debug_mode\"</p>\n\n<pre><code>if (values[0].equalsIgnoreCase(\"debug_mode\")) \n    debug_mode = true;\n</code></pre>\n\n<p>which is part of the following loop:</p>\n\n<pre><code>String value = dis.readLine();\nString values[] = value.trim().split(\"=\");\nif (values.length &gt;= 2)\n{\n    Config.prnt_dbg_msg(values[0] + \"\\t\" + values[1]);\n    if (values[0].equalsIgnoreCase(\"debug_mode\")) \n        debug_mode = isTrue(values[1]);\n    if (values[0].equalsIgnoreCase(\"debug_query_parsing\")) \n        debug_query_parsing = isTrue(values[1]);\n    if (values[0].equalsIgnoreCase(\"username\")) \n        Connection_Manager.alterAccessParameters(values[1], null, null);\n    if (values[0].equalsIgnoreCase(\"password\")) \n        Connection_Manager.alterAccessParameters(null, values[1], null);\nif (values[0].equalsIgnoreCase(\"database\")) \n        Connection_Manager.alterAccessParameters(null, null, values[1]);\n    if (values[0].equalsIgnoreCase(\"allow_duplicate_entries\")) \n        allow_duplicate_entries = isTrue(values[1]);\n}                         \n</code></pre>\n\n<p>I tried to use <code>value[0].equal(\"debug_mode\")</code> and got the same result.\nDoes someone have any idea why?</p>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":2,"creation_date":1689084227,"post_id":76662758,"comment_id":135161071,"body_markdown":"Spring Boot 3.x requires JDK 17.  The javax.lang.model.element package might not be available in that JDK version.  You should be looking at the release notes to see what changes you need to make to run on JDK 17 and Spring Boot 3.x.","body":"Spring Boot 3.x requires JDK 17.  The javax.lang.model.element package might not be available in that JDK version.  You should be looking at the release notes to see what changes you need to make to run on JDK 17 and Spring Boot 3.x."},{"owner":{"account_id":19580981,"reputation":106,"user_id":14330061,"display_name":"dauthDaert06"},"score":2,"creation_date":1689085350,"post_id":76662758,"comment_id":135161374,"body_markdown":"You should migrate from javax(Java EE) to jakarta (Jakarta EE).","body":"You should migrate from javax(Java EE) to jakarta (Jakarta EE)."}],"answers":[{"tags":[],"owner":{"account_id":1636899,"reputation":494,"user_id":1510155,"display_name":"Victorqedu"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1689092720,"creation_date":1689092720,"answer_id":76664008,"question_id":76662758,"body_markdown":"Based on the comments the solution is to migrate from javax(Java EE) to jakarta (Jakarta EE) so I replaced all imports containing &quot;javax&quot; with &quot;jakarta&quot; and now I can compile successfully.","title":"Upgrading from Spring Boot 2.7.10 to 3.1.1","body":"<p>Based on the comments the solution is to migrate from javax(Java EE) to jakarta (Jakarta EE) so I replaced all imports containing &quot;javax&quot; with &quot;jakarta&quot; and now I can compile successfully.</p>\n"}],"owner":{"account_id":1636899,"reputation":494,"user_id":1510155,"display_name":"Victorqedu"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":400,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76664008,"answer_count":1,"score":0,"last_activity_date":1689092892,"creation_date":1689083770,"question_id":76662758,"body_markdown":"After I upgraded from  Spring Boot 2.7.10 to 3.1.1, [my project][1] is no longer compiling successffully, the error is: \r\n\r\n```\r\n    Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.11.0:compile (default-compile) on project appointments: \r\n    Fatal error compiling: java.lang.RuntimeException: \r\n    javax.lang.model.element.UnknownElementException: Unknown element: &quot;startOffset&quot; -&gt; [Help 1]\r\n```\r\n\r\nThe project is just started and is here: https://github.com/victorqedu/Appointments.\r\nAs soon as I added the `SpecialitiesController` class, the error appeared.\r\n\r\nIn Spring Boot 2.7.10, the project compiles successfully (if I switch in `pom.xml` from 3.1.1 to 2.7.10 then the project is compiling with success).\r\n\r\n  [1]: https://github.com/victorqedu/Appointments","title":"Upgrading from Spring Boot 2.7.10 to 3.1.1","body":"<p>After I upgraded from  Spring Boot 2.7.10 to 3.1.1, <a href=\"https://github.com/victorqedu/Appointments\" rel=\"nofollow noreferrer\">my project</a> is no longer compiling successffully, the error is:</p>\n<pre><code>    Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.11.0:compile (default-compile) on project appointments: \n    Fatal error compiling: java.lang.RuntimeException: \n    javax.lang.model.element.UnknownElementException: Unknown element: &quot;startOffset&quot; -&gt; [Help 1]\n</code></pre>\n<p>The project is just started and is here: <a href=\"https://github.com/victorqedu/Appointments\" rel=\"nofollow noreferrer\">https://github.com/victorqedu/Appointments</a>.\nAs soon as I added the <code>SpecialitiesController</code> class, the error appeared.</p>\n<p>In Spring Boot 2.7.10, the project compiles successfully (if I switch in <code>pom.xml</code> from 3.1.1 to 2.7.10 then the project is compiling with success).</p>\n"},{"tags":["java","code-coverage","bazel"],"answers":[{"comments":[{"owner":{"account_id":21863976,"reputation":81,"user_id":16154417,"display_name":"KarimH"},"score":0,"creation_date":1689090581,"post_id":76657439,"comment_id":135162675,"body_markdown":"Thanks a lot Benjamin! for your answer","body":"Thanks a lot Benjamin! for your answer"}],"tags":[],"owner":{"account_id":15806,"reputation":19577,"user_id":33795,"display_name":"Benjamin Peterson"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689092627,"creation_date":1689024343,"answer_id":76657439,"question_id":76654968,"body_markdown":"The `bazel info java-home` command prints the path to the Java installation used to run Bazel itself. This Java is conceptually completely distinct from a Java that may be used by the actions that Bazel runs in a build. Bazel ships with a stripped-down, minimal JRE for itself that is not suitable for usage by build actions.\r\n\r\nIf your concern about installing a JDK is simply the inconvenience, you can use [`--java_runtime_version=remotejdk_11`](https://bazel.build/docs/user-manual#java_runtime_version) to have Bazel pull in a JDK for you.","title":"Bazel coverage needs jdk, why I cannot use jdk-home given by bazel info?","body":"<p>The <code>bazel info java-home</code> command prints the path to the Java installation used to run Bazel itself. This Java is conceptually completely distinct from a Java that may be used by the actions that Bazel runs in a build. Bazel ships with a stripped-down, minimal JRE for itself that is not suitable for usage by build actions.</p>\n<p>If your concern about installing a JDK is simply the inconvenience, you can use <a href=\"https://bazel.build/docs/user-manual#java_runtime_version\" rel=\"nofollow noreferrer\"><code>--java_runtime_version=remotejdk_11</code></a> to have Bazel pull in a JDK for you.</p>\n"}],"owner":{"account_id":21863976,"reputation":81,"user_id":16154417,"display_name":"KarimH"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":82,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689092627,"creation_date":1689000914,"question_id":76654968,"body_markdown":"If I want to run `bazel coverage` I need to add a rule to specify a jdk tool.\r\nhttps://bazel.build/configure/coverage#running_coverage\r\n\r\nBut why can&#39;t I give the jdk used by bazel and for which the path is given with `bazel info java-home` ?\r\n\r\nwhy to load another jdk when this one is avalaible.... ??\r\n\r\nAdding in WORKSPACE\r\n\r\n\r\n```\r\nload(&quot;@bazel_tools//tools/jdk:local_java_repository.bzl&quot;, &quot;local_java_repository&quot;)\r\n\r\nlocal_java_repository(\r\n  name = &quot;additionaljdk&quot;,          # Can be used with --java_runtime_version=additionaljdk, --java_runtime_version=11 or --java_runtime_version=additionaljdk_11\r\n  version = &quot;11&quot;,                    # Optional, if not set it is autodetected\r\n  java_home = &quot;/usr/lib/jvm/java-11-openjdk-amd64/&quot;,  # Path to directory containing bin/java\r\n)\r\n\r\n```\r\n\r\nit will run\r\nis there a way to set in the previous rule something to point inside `$(bazel info java-home)` please ?\r\n```\r\njava_home=(locate $java-home) \r\n\r\n```\r\nthanks\r\n\r\nI&#39;d like to avoid installing another jdk as it is installed by bazel itself.","title":"Bazel coverage needs jdk, why I cannot use jdk-home given by bazel info?","body":"<p>If I want to run <code>bazel coverage</code> I need to add a rule to specify a jdk tool.\n<a href=\"https://bazel.build/configure/coverage#running_coverage\" rel=\"nofollow noreferrer\">https://bazel.build/configure/coverage#running_coverage</a></p>\n<p>But why can't I give the jdk used by bazel and for which the path is given with <code>bazel info java-home</code> ?</p>\n<p>why to load another jdk when this one is avalaible.... ??</p>\n<p>Adding in WORKSPACE</p>\n<pre><code>load(&quot;@bazel_tools//tools/jdk:local_java_repository.bzl&quot;, &quot;local_java_repository&quot;)\n\nlocal_java_repository(\n  name = &quot;additionaljdk&quot;,          # Can be used with --java_runtime_version=additionaljdk, --java_runtime_version=11 or --java_runtime_version=additionaljdk_11\n  version = &quot;11&quot;,                    # Optional, if not set it is autodetected\n  java_home = &quot;/usr/lib/jvm/java-11-openjdk-amd64/&quot;,  # Path to directory containing bin/java\n)\n\n</code></pre>\n<p>it will run\nis there a way to set in the previous rule something to point inside <code>$(bazel info java-home)</code> please ?</p>\n<pre><code>java_home=(locate $java-home) \n\n</code></pre>\n<p>thanks</p>\n<p>I'd like to avoid installing another jdk as it is installed by bazel itself.</p>\n"},{"tags":["java","gradle","javafx"],"comments":[{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":2,"creation_date":1688417054,"post_id":76607523,"comment_id":135068890,"body_markdown":"Why are you trying this approach that makes builds more error prone? Have you tried to build the JavaFX project using Gradle without downloading manually dependencies? The JavaFX getting started page shows instructions for Maven and Gradle: https://openjfx.io/openjfx-docs/#gradle","body":"Why are you trying this approach that makes builds more error prone? Have you tried to build the JavaFX project using Gradle without downloading manually dependencies? The JavaFX getting started page shows instructions for Maven and Gradle: <a href=\"https://openjfx.io/openjfx-docs/#gradle\" rel=\"nofollow noreferrer\">openjfx.io/openjfx-docs/#gradle</a>"},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":1,"creation_date":1688420596,"post_id":76607523,"comment_id":135069394,"body_markdown":"You could try the [org.openjfx.javafxplugin](https://github.com/openjfx/javafx-gradle-plugin#javafx-gradle-plugin) plugin and [configure it to use a local SDK](https://github.com/openjfx/javafx-gradle-plugin#5-using-a-local-javafx-sdk).","body":"You could try the <a href=\"https://github.com/openjfx/javafx-gradle-plugin#javafx-gradle-plugin\" rel=\"nofollow noreferrer\">org.openjfx.javafxplugin</a> plugin and <a href=\"https://github.com/openjfx/javafx-gradle-plugin#5-using-a-local-javafx-sdk\" rel=\"nofollow noreferrer\">configure it to use a local SDK</a>."}],"owner":{"account_id":22332437,"reputation":1,"user_id":16554511,"display_name":"Nomanspace"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689092532,"creation_date":1688411452,"question_id":76607523,"body_markdown":"I have downloaded an external local javafx sdk library and am trying to make it work. However, it throws an error.\r\n\r\n\r\n\r\nbuild.gradle\r\n\r\n``` lang-java\r\nplugins {\r\n    id &#39;java&#39;\t\r\n\tid &#39;application&#39;\r\n}\r\n\r\nrepositories {\r\n    mavenCentral()\r\n\tflatDir {\r\n\t\tdirs &#39;C:\\\\Program Files\\\\openjfx-17.0.7_windows-x64_bin-sdk\\\\javafx-sdk-17.0.7\\\\lib&#39;\r\n\t}\r\n}\r\n\r\nmainClassName = &#39;ru.danteproject.App&#39;\r\n\r\n\r\ndependencies {\r\n\timplementation fileTree(dir: &#39;C:\\\\Program Files\\\\openjfx-17.0.7_windows-x64_bin-sdk\\\\javafx-sdk-17.0.7\\\\lib&#39;, include: &#39;*.jar&#39;)\t\t\r\n}\r\n```\r\n\r\n``` lang-java\r\npackage ru.danteproject;\r\n\r\nimport javafx.application.Application;\r\nimport javafx.fxml.FXMLLoader;\r\nimport javafx.scene.Scene;\r\nimport javafx.stage.Stage;\r\nimport javafx.fxml.FXML;\r\nimport javafx.scene.control.Label;\r\n\r\nimport java.io.IOException;\r\n\r\npublic class App extends Application {\r\n\r\n    @Override\r\n    public void start(Stage stage) throws IOException {\r\n        HelloController helloController;\r\n        FXMLLoader fxmlLoader = new FXMLLoader(App.class.getResource(&quot;hello-view.fxml&quot;));\r\n        Scene scene = new Scene(fxmlLoader.load(), 320, 240);\r\n        stage.setTitle(&quot;Hello!&quot;);\r\n        stage.setScene(scene);\r\n        stage.show();\r\n\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        System.out.println(&quot;Hello Java&quot;);\r\n        launch();\r\n    }\r\n}\r\n\r\n\r\n\r\nclass HelloController {\r\n    @FXML\r\n    private Label welcomeText;\r\n\r\n    @FXML\r\n    protected void onHelloButtonClick() {\r\n        welcomeText.setText(&quot;Welcome to JavaFX Application!&quot;);\r\n    }\r\n}\r\n```\r\n\r\n&gt; JavaFX runtime components are missing, and are required to run this application\r\n\r\nI tried various options I found on the internet, and also tried to use the configs I got as a result of a conversation with the GPT chat, but to no avail.","title":"How can I add a local library in Gradle so that the program will be started?","body":"<p>I have downloaded an external local javafx sdk library and am trying to make it work. However, it throws an error.</p>\n<p>build.gradle</p>\n<pre class=\"lang-java prettyprint-override\"><code>plugins {\n    id 'java'   \n    id 'application'\n}\n\nrepositories {\n    mavenCentral()\n    flatDir {\n        dirs 'C:\\\\Program Files\\\\openjfx-17.0.7_windows-x64_bin-sdk\\\\javafx-sdk-17.0.7\\\\lib'\n    }\n}\n\nmainClassName = 'ru.danteproject.App'\n\n\ndependencies {\n    implementation fileTree(dir: 'C:\\\\Program Files\\\\openjfx-17.0.7_windows-x64_bin-sdk\\\\javafx-sdk-17.0.7\\\\lib', include: '*.jar')     \n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package ru.danteproject;\n\nimport javafx.application.Application;\nimport javafx.fxml.FXMLLoader;\nimport javafx.scene.Scene;\nimport javafx.stage.Stage;\nimport javafx.fxml.FXML;\nimport javafx.scene.control.Label;\n\nimport java.io.IOException;\n\npublic class App extends Application {\n\n    @Override\n    public void start(Stage stage) throws IOException {\n        HelloController helloController;\n        FXMLLoader fxmlLoader = new FXMLLoader(App.class.getResource(&quot;hello-view.fxml&quot;));\n        Scene scene = new Scene(fxmlLoader.load(), 320, 240);\n        stage.setTitle(&quot;Hello!&quot;);\n        stage.setScene(scene);\n        stage.show();\n\n    }\n\n    public static void main(String[] args) {\n        System.out.println(&quot;Hello Java&quot;);\n        launch();\n    }\n}\n\n\n\nclass HelloController {\n    @FXML\n    private Label welcomeText;\n\n    @FXML\n    protected void onHelloButtonClick() {\n        welcomeText.setText(&quot;Welcome to JavaFX Application!&quot;);\n    }\n}\n</code></pre>\n<blockquote>\n<p>JavaFX runtime components are missing, and are required to run this application</p>\n</blockquote>\n<p>I tried various options I found on the internet, and also tried to use the configs I got as a result of a conversation with the GPT chat, but to no avail.</p>\n"},{"tags":["java","database","oracle","encryption","jdbc"],"comments":[{"owner":{"account_id":10663494,"reputation":131,"user_id":7850788,"display_name":"Aram"},"score":0,"creation_date":1690211433,"post_id":76655375,"comment_id":135318252,"body_markdown":"what is the jdbc driver version?","body":"what is the jdbc driver version?"},{"owner":{"account_id":5854892,"reputation":3571,"user_id":4612499,"display_name":"Jean de Lavarene"},"score":1,"creation_date":1690287345,"post_id":76655375,"comment_id":135329501,"body_markdown":"You need to upgrade your driver.","body":"You need to upgrade your driver."},{"owner":{"account_id":11757082,"reputation":69,"user_id":8604431,"display_name":"Anshu"},"score":0,"creation_date":1691533766,"post_id":76655375,"comment_id":135504050,"body_markdown":"I am using below Oracle-jdbc 11.2.0.2.0 . What version are you suggesting ?","body":"I am using below Oracle-jdbc 11.2.0.2.0 . What version are you suggesting ?"}],"owner":{"account_id":11757082,"reputation":69,"user_id":8604431,"display_name":"Anshu"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":220,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689092230,"creation_date":1689004153,"question_id":76655375,"body_markdown":"I am getting issue while having a jdbc connection with `crypto_checksum_types_client=SHA256` getting below error.\r\n\r\n    oracle.net.ns.NetException: Unknown Authentication, Encryption or Data Integrity algorithm\r\n\r\nIt is working fine with SHA1. Mentioned are the JVM args I am using\r\n\r\n            -Doracle.net.encryption_client=REQUIRED\r\n            -Doracle.net.encryption_types_client=AES256\r\n            -Doracle.net.crypto_checksum_client=REQUIRED\r\n            -Doracle.net.crypto_checksum_types_client=SHA256 -- (failing)\r\n            -Doracle.net.crypto_checksum_types_client=SHA1 --&gt; working\r\n\r\n\r\nCan anyone help us here for DB side to understand why it is complaining only for SH256?\r\n\r\nI checked SQL.NET ORA file and below are the server side setting.\r\n\r\n    SQLNET.CRYPTO_CHECKSUM_TYPES_CLIENT = (SHA256,SHA1)\r\n\r\n","title":"oracle.net.ns.NetException: Unknown Authentication, Encryption or Data Integrity algorithm","body":"<p>I am getting issue while having a jdbc connection with <code>crypto_checksum_types_client=SHA256</code> getting below error.</p>\n<pre><code>oracle.net.ns.NetException: Unknown Authentication, Encryption or Data Integrity algorithm\n</code></pre>\n<p>It is working fine with SHA1. Mentioned are the JVM args I am using</p>\n<pre><code>        -Doracle.net.encryption_client=REQUIRED\n        -Doracle.net.encryption_types_client=AES256\n        -Doracle.net.crypto_checksum_client=REQUIRED\n        -Doracle.net.crypto_checksum_types_client=SHA256 -- (failing)\n        -Doracle.net.crypto_checksum_types_client=SHA1 --&gt; working\n</code></pre>\n<p>Can anyone help us here for DB side to understand why it is complaining only for SH256?</p>\n<p>I checked SQL.NET ORA file and below are the server side setting.</p>\n<pre><code>SQLNET.CRYPTO_CHECKSUM_TYPES_CLIENT = (SHA256,SHA1)\n</code></pre>\n"},{"tags":["java","hibernate","orm"],"answers":[{"comments":[{"owner":{"account_id":26957,"reputation":564381,"user_id":70604,"display_name":"Pascal Thivent"},"score":0,"creation_date":1286267920,"post_id":3862050,"comment_id":4106912,"body_markdown":"If this doesn&#39;t help, please clarify your question, I didn&#39;t get the problem with the id (that is null).","body":"If this doesn&#39;t help, please clarify your question, I didn&#39;t get the problem with the id (that is null)."},{"owner":{"account_id":107704,"reputation":681,"user_id":286253,"accept_rate":40,"display_name":"Michel"},"score":0,"creation_date":1286268575,"post_id":3862050,"comment_id":4106996,"body_markdown":"I prefer not use raw JDBC. I try to use session.doWork but it still have null value","body":"I prefer not use raw JDBC. I try to use session.doWork but it still have null value"},{"owner":{"account_id":26957,"reputation":564381,"user_id":70604,"display_name":"Pascal Thivent"},"score":0,"creation_date":1286269736,"post_id":3862050,"comment_id":4107150,"body_markdown":"@Michel Where do &quot;you have null value&quot;? I don&#39;t understand, please explain what is happening and what the expected result is.","body":"@Michel Where do &quot;you have null value&quot;? I don&#39;t understand, please explain what is happening and what the expected result is."},{"owner":{"account_id":107704,"reputation":681,"user_id":286253,"accept_rate":40,"display_name":"Michel"},"score":0,"creation_date":1286270039,"post_id":3862050,"comment_id":4107184,"body_markdown":"My object\n- Id = null\n- Number = 549\n\nId is automatically generated but is not set in the sqlQuery.executeUpdate();","body":"My object - Id = null - Number = 549  Id is automatically generated but is not set in the sqlQuery.executeUpdate();"},{"owner":{"account_id":26957,"reputation":564381,"user_id":70604,"display_name":"Pascal Thivent"},"score":0,"creation_date":1286311209,"post_id":3862050,"comment_id":4113542,"body_markdown":"@Michel I don&#39;t understand what problem you get with `session.doWork()`. You should consider clarifying and adding details to your question if you want to increase your chances to get an answer. In its current state, everything is unclear.","body":"@Michel I don&#39;t understand what problem you get with <code>session.doWork()</code>. You should consider clarifying and adding details to your question if you want to increase your chances to get an answer. In its current state, everything is unclear."},{"owner":{"account_id":107704,"reputation":681,"user_id":286253,"accept_rate":40,"display_name":"Michel"},"score":0,"creation_date":1286351295,"post_id":3862050,"comment_id":4117272,"body_markdown":"I try to clarify. I want to do an insert and a method call stored in the database, i tryed to do it with annotations but I need to get a value at runtime so I don&#39;t know how to do it with annotations. So instead of using them, I try to use SQLQuery sqlQuery = getSession().createSQLQuery(queryString);\nsqlQuery.executeUpdate();","body":"I try to clarify. I want to do an insert and a method call stored in the database, i tryed to do it with annotations but I need to get a value at runtime so I don&#39;t know how to do it with annotations. So instead of using them, I try to use SQLQuery sqlQuery = getSession().createSQLQuery(queryString); sqlQuery.executeUpdate();"}],"tags":[],"owner":{"account_id":26957,"reputation":564381,"user_id":70604,"display_name":"Pascal Thivent"},"comment_count":6,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1286267876,"creation_date":1286267876,"answer_id":3862050,"question_id":3861670,"body_markdown":"Maybe I didn&#39;t get everything but did you consider using raw JDBC either via `Session#connection()` (might be removed in Hibernate 4) or the new `Session#doWork()` API? In case you need an example, here is how you&#39;d use it:\r\n\r\n    session.doWork(new Work() {\r\n       public void execute(Connection conn) {\r\n          // do work with the connection\r\n          ...\r\n       }\r\n    });\r\n\r\n \r\n","title":"Hibernate nextval get id","body":"<p>Maybe I didn't get everything but did you consider using raw JDBC either via <code>Session#connection()</code> (might be removed in Hibernate 4) or the new <code>Session#doWork()</code> API? In case you need an example, here is how you'd use it:</p>\n\n<pre><code>session.doWork(new Work() {\n   public void execute(Connection conn) {\n      // do work with the connection\n      ...\n   }\n});\n</code></pre>\n"},{"comments":[{"owner":{"account_id":107704,"reputation":681,"user_id":286253,"accept_rate":40,"display_name":"Michel"},"score":0,"creation_date":1286281669,"post_id":3863545,"comment_id":4108574,"body_markdown":"I generate the secuence with the annotation, but when I try to see the value is null.","body":"I generate the secuence with the annotation, but when I try to see the value is null."}],"tags":[],"owner":{"account_id":213308,"reputation":637,"user_id":466631,"display_name":"virgium03"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1286281294,"creation_date":1286281294,"answer_id":3863545,"question_id":3861670,"body_markdown":"Your question is a little bit unclear, but for what I understood I think you should first make a prepared statement that reads the next value for the sequence and use that id when creating the insert statement. Also, make sure that you commit the transaction and maybe flush the session.\r\n\r\nAs a side note, if you are using Hibernate with annotations, when mapping a table to a class you can provide the id generator as a sequence. In this way, you don&#39;t have to write jdbc code to insert the entity, just plain hibernate code, i.e. getJdbcTemplate().save().","title":"Hibernate nextval get id","body":"<p>Your question is a little bit unclear, but for what I understood I think you should first make a prepared statement that reads the next value for the sequence and use that id when creating the insert statement. Also, make sure that you commit the transaction and maybe flush the session.</p>\n\n<p>As a side note, if you are using Hibernate with annotations, when mapping a table to a class you can provide the id generator as a sequence. In this way, you don't have to write jdbc code to insert the entity, just plain hibernate code, i.e. getJdbcTemplate().save().</p>\n"},{"comments":[{"owner":{"account_id":107704,"reputation":681,"user_id":286253,"accept_rate":40,"display_name":"Michel"},"score":0,"creation_date":1286283591,"post_id":3863757,"comment_id":4108882,"body_markdown":"Yes, I have this, but I need to do a custom insert, so I have to create an @SQLInsert or SQLQuery sqlQuery = getSession().createSQLQuery(queryString);\nsqlQuery.executeUpdate();","body":"Yes, I have this, but I need to do a custom insert, so I have to create an @SQLInsert or SQLQuery sqlQuery = getSession().createSQLQuery(queryString); sqlQuery.executeUpdate();"},{"owner":{"account_id":213308,"reputation":637,"user_id":466631,"display_name":"virgium03"},"score":0,"creation_date":1286284140,"post_id":3863757,"comment_id":4108976,"body_markdown":"I don&#39;t understand what do you mean by a custom insert and what do you need to do with it. maybe you can elaborate more?","body":"I don&#39;t understand what do you mean by a custom insert and what do you need to do with it. maybe you can elaborate more?"},{"owner":{"account_id":107704,"reputation":681,"user_id":286253,"accept_rate":40,"display_name":"Michel"},"score":0,"creation_date":1286351018,"post_id":3863757,"comment_id":4117250,"body_markdown":"I want to insert an object, but also I want to call a procedure: INSERT INTO TABLE (id, value) VALUES (NEXTVAL, crypt(?,pwd)). But i need to get the pwd reading a file, so I can&#39;t put the crypt(?,&#39;MYPASSWORD)","body":"I want to insert an object, but also I want to call a procedure: INSERT INTO TABLE (id, value) VALUES (NEXTVAL, crypt(?,pwd)). But i need to get the pwd reading a file, so I can&#39;t put the crypt(?,&#39;MYPASSWORD)"},{"owner":{"account_id":213308,"reputation":637,"user_id":466631,"display_name":"virgium03"},"score":0,"creation_date":1286434738,"post_id":3863757,"comment_id":4128871,"body_markdown":"Ok, it is still unclear what do you want to do. You want to read some passwords from a file and then encrypt and save them into the database? Please try to describe your whole scenario.","body":"Ok, it is still unclear what do you want to do. You want to read some passwords from a file and then encrypt and save them into the database? Please try to describe your whole scenario."},{"owner":{"account_id":107704,"reputation":681,"user_id":286253,"accept_rate":40,"display_name":"Michel"},"score":0,"creation_date":1286446767,"post_id":3863757,"comment_id":4130374,"body_markdown":"Yes, I have to read a password from a file, later I have to insert an object in a table encrypting one of the fields by a procedure stored in the database with two parameters, the field value and the password readed before.","body":"Yes, I have to read a password from a file, later I have to insert an object in a table encrypting one of the fields by a procedure stored in the database with two parameters, the field value and the password readed before."},{"owner":{"account_id":213308,"reputation":637,"user_id":466631,"display_name":"virgium03"},"score":0,"creation_date":1286449282,"post_id":3863757,"comment_id":4130656,"body_markdown":"and the field value which you are trying to insert should be the id of the previously inserted entity, which supposedly is null?","body":"and the field value which you are trying to insert should be the id of the previously inserted entity, which supposedly is null?"},{"owner":{"account_id":107704,"reputation":681,"user_id":286253,"accept_rate":40,"display_name":"Michel"},"score":0,"creation_date":1286451675,"post_id":3863757,"comment_id":4131020,"body_markdown":"No, the field value is not the id, is another one. I don&#39;t know how to do this with annotations so I tried anothers possibilities, one of them has the problem I presented in my post, but I only want to do the thing I tell to you before.","body":"No, the field value is not the id, is another one. I don&#39;t know how to do this with annotations so I tried anothers possibilities, one of them has the problem I presented in my post, but I only want to do the thing I tell to you before."},{"owner":{"account_id":213308,"reputation":637,"user_id":466631,"display_name":"virgium03"},"score":0,"creation_date":1286454502,"post_id":3863757,"comment_id":4131462,"body_markdown":"If you are trying to load the object after you&#39;ve inserted it using the stored procedure, make sure you commit the transaction or flush the session. Please provide some snippet of code because it will be clearer.","body":"If you are trying to load the object after you&#39;ve inserted it using the stored procedure, make sure you commit the transaction or flush the session. Please provide some snippet of code because it will be clearer."},{"owner":{"account_id":107704,"reputation":681,"user_id":286253,"accept_rate":40,"display_name":"Michel"},"score":0,"creation_date":1286454910,"post_id":3863757,"comment_id":4131538,"body_markdown":"I dont create transactions... i only use this and later releaseConnection. But I would like to use annotations, you know how can i do it?","body":"I dont create transactions... i only use this and later releaseConnection. But I would like to use annotations, you know how can i do it?"}],"tags":[],"owner":{"account_id":213308,"reputation":637,"user_id":466631,"display_name":"virgium03"},"comment_count":9,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1286283072,"creation_date":1286283072,"answer_id":3863757,"question_id":3861670,"body_markdown":"Here is an example of sequences using annotations: \r\n\r\n    @Id\r\n    @Column(name = &quot;OFFER_ID&quot;)\r\n    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;OFR_OFFERS_SEQ&quot;)\r\n    @SequenceGenerator(name = &quot;OFR_OFFERS_SEQ&quot;, sequenceName = &quot;OFR_OFFERS_SEQ&quot;, allocationSize = 1)\r\n    private Long offerId;\r\n\r\nAlso, the add method should look like this:\r\n\r\n    public &lt;T&gt; T add(final T obj) {\r\n         return get(obj.getClass(), (Long) getHibernateTemplate().save(obj));\r\n    }\r\n    public final &lt;T&gt; T get(final Class&lt;T&gt; clazz, final Long id) {\r\n         return (T) getHibernateTemplate().get(clazz, id);\r\n    }\r\n\r\nThe methods are from a class than extends HibernateDaoSupport from Spring, thats how they get the hibernate template.\r\n\r\nHope this works for you.","title":"Hibernate nextval get id","body":"<p>Here is an example of sequences using annotations: </p>\n\n<pre><code>@Id\n@Column(name = \"OFFER_ID\")\n@GeneratedValue(strategy = GenerationType.SEQUENCE, generator = \"OFR_OFFERS_SEQ\")\n@SequenceGenerator(name = \"OFR_OFFERS_SEQ\", sequenceName = \"OFR_OFFERS_SEQ\", allocationSize = 1)\nprivate Long offerId;\n</code></pre>\n\n<p>Also, the add method should look like this:</p>\n\n<pre><code>public &lt;T&gt; T add(final T obj) {\n     return get(obj.getClass(), (Long) getHibernateTemplate().save(obj));\n}\npublic final &lt;T&gt; T get(final Class&lt;T&gt; clazz, final Long id) {\n     return (T) getHibernateTemplate().get(clazz, id);\n}\n</code></pre>\n\n<p>The methods are from a class than extends HibernateDaoSupport from Spring, thats how they get the hibernate template.</p>\n\n<p>Hope this works for you.</p>\n"},{"comments":[{"owner":{"account_id":107704,"reputation":681,"user_id":286253,"accept_rate":40,"display_name":"Michel"},"score":0,"creation_date":1286521215,"post_id":3881861,"comment_id":4140416,"body_markdown":"I realized I was wrong ... It is impossible for the object using a query automatically get the id.\n\nHow I can do to get the ID resulting from that last query?","body":"I realized I was wrong ... It is impossible for the object using a query automatically get the id.  How I can do to get the ID resulting from that last query?"},{"owner":{"account_id":213308,"reputation":637,"user_id":466631,"display_name":"virgium03"},"score":0,"creation_date":1286521836,"post_id":3881861,"comment_id":4140503,"body_markdown":"create a PreparedStatement that will contain something like this: select y.id from your_table y where ...","body":"create a PreparedStatement that will contain something like this: select y.id from your_table y where ..."},{"owner":{"account_id":213308,"reputation":637,"user_id":466631,"display_name":"virgium03"},"score":0,"creation_date":1286522113,"post_id":3881861,"comment_id":4140530,"body_markdown":"or you can perform a query on sec.nextval using a prepared statement, store it in a Long variable and use this variable when creating the insertion sql.","body":"or you can perform a query on sec.nextval using a prepared statement, store it in a Long variable and use this variable when creating the insertion sql."},{"owner":{"account_id":107704,"reputation":681,"user_id":286253,"accept_rate":40,"display_name":"Michel"},"score":0,"creation_date":1286522232,"post_id":3881861,"comment_id":4140544,"body_markdown":"But to use a PreparedStatement I need the conection, but it is deprecated. Also, if someone insert another object with the same values may that I get a wrong id, isn&#39;t?","body":"But to use a PreparedStatement I need the conection, but it is deprecated. Also, if someone insert another object with the same values may that I get a wrong id, isn&#39;t?"}],"tags":[],"owner":{"account_id":107704,"reputation":681,"user_id":286253,"accept_rate":40,"display_name":"Michel"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1286456350,"creation_date":1286456350,"answer_id":3881861,"question_id":3861670,"body_markdown":"Now I have this:\r\n\r\n    public void sql(final String query) {\r\n        getHibernateTemplate().execute(new HibernateCallback&lt;Object&gt;() {\r\n            public Object doInHibernate(Session session) throws HibernateException, SQLException {\r\n                Query q = session.createSQLQuery(query);\r\n                q.executeUpdate();\r\n                return null;\r\n            }\r\n        });\r\n    }\r\n\r\nThe query is: \r\n\r\n    INSERT INTO TABLE (ID, VALUE) VALUES (SEC.NEXTVAL, crypt(1, paswword))\r\n\r\nThe method I use:\r\n\r\n    public void insert(MyClass object) {\r\n        String password = confFile.getProperty(&quot;CRYPT&quot;);\r\n        String query = createQuery(object, password);\r\n        sql(query);\r\n    }\r\n\r\n\r\nThe problem is that when I use the methods of HibernateDaoSupport when I do .persist(object) inmediatly I have the id in the object, but when I use this method (to crypt a field value) I try to get the id but it&#39;s null. The object is correctly inserted into the database.","title":"Hibernate nextval get id","body":"<p>Now I have this:</p>\n\n<pre><code>public void sql(final String query) {\n    getHibernateTemplate().execute(new HibernateCallback&lt;Object&gt;() {\n        public Object doInHibernate(Session session) throws HibernateException, SQLException {\n            Query q = session.createSQLQuery(query);\n            q.executeUpdate();\n            return null;\n        }\n    });\n}\n</code></pre>\n\n<p>The query is: </p>\n\n<pre><code>INSERT INTO TABLE (ID, VALUE) VALUES (SEC.NEXTVAL, crypt(1, paswword))\n</code></pre>\n\n<p>The method I use:</p>\n\n<pre><code>public void insert(MyClass object) {\n    String password = confFile.getProperty(\"CRYPT\");\n    String query = createQuery(object, password);\n    sql(query);\n}\n</code></pre>\n\n<p>The problem is that when I use the methods of HibernateDaoSupport when I do .persist(object) inmediatly I have the id in the object, but when I use this method (to crypt a field value) I try to get the id but it's null. The object is correctly inserted into the database.</p>\n"},{"tags":[],"owner":{"account_id":1336729,"reputation":799,"user_id":1279301,"accept_rate":67,"display_name":"Sumit Kumar Saha"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689092212,"creation_date":1689092212,"answer_id":76663958,"question_id":3861670,"body_markdown":"    public long getNextSequenceId(Class&lt;?&gt; entityClass, String schemaName, EntityManager entityManager) {\r\n        Session hibernateSession = getHibernateSession(entityManager);\r\n        SessionFactory sessionFactory = hibernateSession.getSessionFactory();\r\n\r\n        ClassMetadata hibernateMetadata = sessionFactory.getClassMetadata(entityClass);\r\n\r\n        if (hibernateMetadata instanceof AbstractEntityPersister)\r\n        {\r\n            AbstractEntityPersister persister = (AbstractEntityPersister) hibernateMetadata;\r\n            String tableName = persister.getTableName();\r\n            String queryString = &quot;SELECT AUTO_INCREMENT FROM information_schema.tables&quot; +\r\n                    &quot; WHERE table_name = &#39;&quot; + tableName + &quot;&#39;&quot; +\r\n                    &quot; AND table_schema = &#39;&quot; + schemaName + &quot;&#39;&quot;;\r\n            int nextSequence = ((BigInteger)em.createNativeQuery(queryString).getSingleResult()).intValueExact();\r\n            return nextSequence - 1;\r\n        }\r\n        return 0;\r\n    }","title":"Hibernate nextval get id","body":"<pre><code>public long getNextSequenceId(Class&lt;?&gt; entityClass, String schemaName, EntityManager entityManager) {\n    Session hibernateSession = getHibernateSession(entityManager);\n    SessionFactory sessionFactory = hibernateSession.getSessionFactory();\n\n    ClassMetadata hibernateMetadata = sessionFactory.getClassMetadata(entityClass);\n\n    if (hibernateMetadata instanceof AbstractEntityPersister)\n    {\n        AbstractEntityPersister persister = (AbstractEntityPersister) hibernateMetadata;\n        String tableName = persister.getTableName();\n        String queryString = &quot;SELECT AUTO_INCREMENT FROM information_schema.tables&quot; +\n                &quot; WHERE table_name = '&quot; + tableName + &quot;'&quot; +\n                &quot; AND table_schema = '&quot; + schemaName + &quot;'&quot;;\n        int nextSequence = ((BigInteger)em.createNativeQuery(queryString).getSingleResult()).intValueExact();\n        return nextSequence - 1;\n    }\n    return 0;\n}\n</code></pre>\n"}],"owner":{"account_id":107704,"reputation":681,"user_id":286253,"accept_rate":40,"display_name":"Michel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3390,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":5,"score":2,"last_activity_date":1689092212,"creation_date":1286264126,"question_id":3861670,"body_markdown":"I use Hibernate with annotations. I need to insert object into the database using a method who needs one parameter that I need to calculate, to do this I use:\r\n\r\n    SQLQuery sqlQuery = getSession().createSQLQuery(queryString);\r\n    sqlQuery.executeUpdate();\r\n\r\nThe queryString contains:\r\n\r\n    INSERT INTO TABLE(ID, NUMBER) VALUES (SEC_TABLE.NEXTVAL, 549)\r\n\r\nThe object is inserted into the database, but when I try to get the id, I get a null value.\r\n\r\nWhat can I do?\r\n\r\nWhen I use `getHibernateTemplate().update(obj);` I have not problems getting the id, but I need to customize the sql insert.\r\n\r\nThanks","title":"Hibernate nextval get id","body":"<p>I use Hibernate with annotations. I need to insert object into the database using a method who needs one parameter that I need to calculate, to do this I use:</p>\n\n<pre><code>SQLQuery sqlQuery = getSession().createSQLQuery(queryString);\nsqlQuery.executeUpdate();\n</code></pre>\n\n<p>The queryString contains:</p>\n\n<pre><code>INSERT INTO TABLE(ID, NUMBER) VALUES (SEC_TABLE.NEXTVAL, 549)\n</code></pre>\n\n<p>The object is inserted into the database, but when I try to get the id, I get a null value.</p>\n\n<p>What can I do?</p>\n\n<p>When I use <code>getHibernateTemplate().update(obj);</code> I have not problems getting the id, but I need to customize the sql insert.</p>\n\n<p>Thanks</p>\n"},{"tags":["java","angularjs"],"owner":{"account_id":28995618,"reputation":1,"user_id":22210372,"display_name":"Bonn"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689092102,"creation_date":1689087677,"question_id":76663337,"body_markdown":"Currently I am getting an error that when I click on select all students to be able to click the assign button to be able to jump from the Unassigned tab to the Assigned tab, but now when I click on it, I can&#39;t click the assign button\r\nAnd when I click to select each one, it can be assigned \r\n\r\nhere my js and html code\r\n\r\n    &lt;tr ng-repeat=&quot;student in tableData&quot;&gt;\r\n\t\t\t\t\t\t\t&lt;td&gt;&lt;input type=&quot;checkbox&quot; ng-model=&quot;student.selected&quot;\r\n\t\t\t\t\t\t\t\tng-change=&quot;updateSelectedStudents(student)&quot;\r\n\t\t\t\t\t\t\t\tng-checked=&quot;selectAll&quot;&gt;&lt;/td&gt;\r\n\t\t\t\t\t\t\t&lt;td ng-model=&quot;form.student.studentId&quot;&gt;{{ student.studentId\r\n\t\t\t\t\t\t\t\t}}&lt;/td&gt;\r\n\t\t\t\t\t\t\t&lt;td ng-model=&quot;form.student.semester.semesterId&quot;\r\n\t\t\t\t\t\t\t\tclass=&quot;d-none d-xl-table-cell&quot;&gt;{{\r\n\t\t\t\t\t\t\t\tstudent.semester.semesterId }}&lt;/td&gt;\r\n\t\t\t\t\t\t\t&lt;td ng-model=&quot;form.student.subjectId&quot;&gt;&lt;span\r\n\t\t\t\t\t\t\t\tclass=&quot;badge bg-success&quot;&gt;{{ student.subjectId }}&lt;/span&gt;&lt;/td&gt;\r\n\t\t\t\t\t\t\t&lt;td ng-model=&quot;form.student.totalFee&quot;\r\n\t\t\t\t\t\t\t\tclass=&quot;d-none d-md-table-cell&quot;&gt;{{ student.totalFee }}&lt;/td&gt;\r\n\t\t\t\t\t\t\t&lt;td class=&quot;d-none d-md-table-cell&quot;&gt;&lt;select\r\n\t\t\t\t\t\t\t\tng-model=&quot;form.employees.employeeId&quot; \r\n\t\t\t\t\t\t\t\tclass=&quot;form-select&quot; ng-show=&quot;selectAll || student.selected&quot; &gt;\r\n\t\t\t\t\t\t\t\t\t&lt;option ng-repeat=&quot;x in employees&quot; value=&quot;{{x}}&quot;&gt;{{\r\n\t\t\t\t\t\t\t\t\t\tx.employeeId }}&lt;/option&gt;\r\n\t\t\t\t\t\t\t&lt;/select&gt;&lt;/td&gt;\r\n\r\n\t\t\t\t\t\t\t&lt;td ng-model=&quot;form.student.imported.importedFileName&quot;\r\n\t\t\t\t\t\t\t\tclass=&quot;d-none d-md-table-cell&quot;&gt;{{\r\n\t\t\t\t\t\t\t\tstudent.imported.importedFileName }}&lt;/td&gt;\r\n\t\t\t\t\t\t&lt;/tr&gt;\t\t\r\n\r\n```\r\nJS\r\n// The function updates the state of the checkboxes in the body based on the value of $scope.selectAll\r\n  $scope.toggleSelectAll = function() {\r\n    $scope.tableData.forEach(function(student) {\r\n      student.selected = $scope.selectAll;\r\n    });\r\n    $scope.updateSelectedEmployees(); // Update HR code status when all checkboxes are selected\r\n  };\r\n\r\n// Function to update the list of selected students\r\n$scope.updateSelectedStudents = function(student) {\r\n  if (!student.selected &amp;&amp; $scope.selectAll) {\r\n    $scope.selectAll = false;\r\n  } else if (student.selected) {\r\n    $scope.selectedStudents.push(student);\r\n  } else {\r\n    var index = $scope.selectedStudents.findIndex(function(selectedStudent) {\r\n      return selectedStudent.studentId === student.studentId;\r\n    });\r\n    $scope.selectedStudents.splice(index, 1);\r\n  }\r\n  $scope.updateSelectedEmployees(); // Update HR code status when selecting each checkbox\r\n};\r\n\r\n// Function to update personnel code for selected students\r\n$scope.updateSelectedEmployees = function() {\r\n  var selectedStudentsCount = $scope.selectedStudents.length;\r\n  $scope.allSelected = (selectedStudentsCount === $scope.tableData.length);\r\n  var selectedEmployeeId = $scope.form.employees.employeeId;\r\n  $scope.selectedStudents.forEach(function(student) {\r\n    if (student.employee) {\r\n      student.employee.employeeId = selectedEmployeeId;\r\n    }\r\n  });\r\n};\r\n\r\n// Function to assign students from &quot;Unassigned&quot; table to &quot;Assigned&quot; table\r\n$scope.assignStudents = function() {\r\n  // Check if the personnel code is selected or not\r\n  if (!$scope.form.employees.employeeId) {\r\n    // Display an error message if the personnel code is not selected\r\n    alert(&quot;Please select personnel code before assigning!&quot;);\r\n    return;\r\n  }\r\n\r\n  // Loop through the list of students in the tableData . array\r\n  for (var i = $scope.tableData.length - 1; i &gt;= 0; i--) {\r\n    var student = $scope.tableData[i];\r\n    // Check if student is selected or not\r\n    if (student.selected) {\r\n      // Set employeeId for assigned student\r\n      student.employee = JSON.parse($scope.form.employees.employeeId);\r\n      var url = `/rest/student/` + student.studentId;\r\n      $http.put(url, student).then(function(resp) {\r\n        var index = $scope.tableData.findIndex(function(item) {\r\n          return item.studentId == student.studentId;\r\n        });\r\n        console.log(&quot;Student update successful&quot;, resp);\r\n        $scope.showStudents();\r\n        $scope.showStudents2();\r\n        $scope.disableAssignButton = true;\r\n      }).catch(function(error) {\r\n        console.log(&quot;Update student failed&quot;, error);\r\n        alert(&quot;Assignment failed!&quot;);\r\n      });\r\n    }\r\n  }\r\n  alert(&quot;Assignment successful!&quot;);\r\n  $scope.selectedStudents = []; // Clear the selected student list\r\n  $scope.selectAll = false; // Reset state to select all checkboxes\r\n};\r\n\r\n```\r\n\r\n\r\n\r\nThe result i want is when i click select all it can be assigned as if i select each student\r\nMeaning all selected students will jump from unassigned tab to assigned","title":"Select all and click Assign","body":"<p>Currently I am getting an error that when I click on select all students to be able to click the assign button to be able to jump from the Unassigned tab to the Assigned tab, but now when I click on it, I can't click the assign button\nAnd when I click to select each one, it can be assigned</p>\n<p>here my js and html code</p>\n<pre><code>&lt;tr ng-repeat=&quot;student in tableData&quot;&gt;\n                        &lt;td&gt;&lt;input type=&quot;checkbox&quot; ng-model=&quot;student.selected&quot;\n                            ng-change=&quot;updateSelectedStudents(student)&quot;\n                            ng-checked=&quot;selectAll&quot;&gt;&lt;/td&gt;\n                        &lt;td ng-model=&quot;form.student.studentId&quot;&gt;{{ student.studentId\n                            }}&lt;/td&gt;\n                        &lt;td ng-model=&quot;form.student.semester.semesterId&quot;\n                            class=&quot;d-none d-xl-table-cell&quot;&gt;{{\n                            student.semester.semesterId }}&lt;/td&gt;\n                        &lt;td ng-model=&quot;form.student.subjectId&quot;&gt;&lt;span\n                            class=&quot;badge bg-success&quot;&gt;{{ student.subjectId }}&lt;/span&gt;&lt;/td&gt;\n                        &lt;td ng-model=&quot;form.student.totalFee&quot;\n                            class=&quot;d-none d-md-table-cell&quot;&gt;{{ student.totalFee }}&lt;/td&gt;\n                        &lt;td class=&quot;d-none d-md-table-cell&quot;&gt;&lt;select\n                            ng-model=&quot;form.employees.employeeId&quot; \n                            class=&quot;form-select&quot; ng-show=&quot;selectAll || student.selected&quot; &gt;\n                                &lt;option ng-repeat=&quot;x in employees&quot; value=&quot;{{x}}&quot;&gt;{{\n                                    x.employeeId }}&lt;/option&gt;\n                        &lt;/select&gt;&lt;/td&gt;\n\n                        &lt;td ng-model=&quot;form.student.imported.importedFileName&quot;\n                            class=&quot;d-none d-md-table-cell&quot;&gt;{{\n                            student.imported.importedFileName }}&lt;/td&gt;\n                    &lt;/tr&gt;       \n</code></pre>\n<pre><code>JS\n// The function updates the state of the checkboxes in the body based on the value of $scope.selectAll\n  $scope.toggleSelectAll = function() {\n    $scope.tableData.forEach(function(student) {\n      student.selected = $scope.selectAll;\n    });\n    $scope.updateSelectedEmployees(); // Update HR code status when all checkboxes are selected\n  };\n\n// Function to update the list of selected students\n$scope.updateSelectedStudents = function(student) {\n  if (!student.selected &amp;&amp; $scope.selectAll) {\n    $scope.selectAll = false;\n  } else if (student.selected) {\n    $scope.selectedStudents.push(student);\n  } else {\n    var index = $scope.selectedStudents.findIndex(function(selectedStudent) {\n      return selectedStudent.studentId === student.studentId;\n    });\n    $scope.selectedStudents.splice(index, 1);\n  }\n  $scope.updateSelectedEmployees(); // Update HR code status when selecting each checkbox\n};\n\n// Function to update personnel code for selected students\n$scope.updateSelectedEmployees = function() {\n  var selectedStudentsCount = $scope.selectedStudents.length;\n  $scope.allSelected = (selectedStudentsCount === $scope.tableData.length);\n  var selectedEmployeeId = $scope.form.employees.employeeId;\n  $scope.selectedStudents.forEach(function(student) {\n    if (student.employee) {\n      student.employee.employeeId = selectedEmployeeId;\n    }\n  });\n};\n\n// Function to assign students from &quot;Unassigned&quot; table to &quot;Assigned&quot; table\n$scope.assignStudents = function() {\n  // Check if the personnel code is selected or not\n  if (!$scope.form.employees.employeeId) {\n    // Display an error message if the personnel code is not selected\n    alert(&quot;Please select personnel code before assigning!&quot;);\n    return;\n  }\n\n  // Loop through the list of students in the tableData . array\n  for (var i = $scope.tableData.length - 1; i &gt;= 0; i--) {\n    var student = $scope.tableData[i];\n    // Check if student is selected or not\n    if (student.selected) {\n      // Set employeeId for assigned student\n      student.employee = JSON.parse($scope.form.employees.employeeId);\n      var url = `/rest/student/` + student.studentId;\n      $http.put(url, student).then(function(resp) {\n        var index = $scope.tableData.findIndex(function(item) {\n          return item.studentId == student.studentId;\n        });\n        console.log(&quot;Student update successful&quot;, resp);\n        $scope.showStudents();\n        $scope.showStudents2();\n        $scope.disableAssignButton = true;\n      }).catch(function(error) {\n        console.log(&quot;Update student failed&quot;, error);\n        alert(&quot;Assignment failed!&quot;);\n      });\n    }\n  }\n  alert(&quot;Assignment successful!&quot;);\n  $scope.selectedStudents = []; // Clear the selected student list\n  $scope.selectAll = false; // Reset state to select all checkboxes\n};\n\n</code></pre>\n<p>The result i want is when i click select all it can be assigned as if i select each student\nMeaning all selected students will jump from unassigned tab to assigned</p>\n"},{"tags":["java","malloc","jemalloc","java-native-library"],"comments":[{"owner":{"account_id":4770043,"reputation":661,"user_id":3855050,"display_name":"amitwdh"},"score":0,"creation_date":1689143440,"post_id":76662097,"comment_id":135169545,"body_markdown":"apt-get install graphviz binutils\nResolved issue.","body":"apt-get install graphviz binutils Resolved issue."}],"answers":[{"tags":[],"owner":{"account_id":24438616,"reputation":11,"user_id":18362577,"display_name":"sleepy.magus"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689091686,"creation_date":1689091111,"answer_id":76663804,"question_id":76662097,"body_markdown":"Install binutils \r\n\r\n    apt-get install binutils\r\n\r\nhttps://cplusplus.com/forum/general/97659/\r\n\r\nhttps://github.com/dotnet/corefx-tools/issues/73","title":"How to convert jeprof output to human readable format?","body":"<p>Install binutils</p>\n<pre><code>apt-get install binutils\n</code></pre>\n<p><a href=\"https://cplusplus.com/forum/general/97659/\" rel=\"nofollow noreferrer\">https://cplusplus.com/forum/general/97659/</a></p>\n<p><a href=\"https://github.com/dotnet/corefx-tools/issues/73\" rel=\"nofollow noreferrer\">https://github.com/dotnet/corefx-tools/issues/73</a></p>\n"}],"owner":{"account_id":4770043,"reputation":661,"user_id":3855050,"display_name":"amitwdh"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":119,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689091686,"creation_date":1689079154,"question_id":76662097,"body_markdown":"Failing while converting hprof output to gif format.\r\n```\r\njeprof --show_bytes --gif /usr/local/openjdk-11/bin/java jeprof.*.heap &gt; /tmp/profile_1.gif\r\n```\r\nException:\r\n```\r\nCan&#39;t exec &quot;objdump&quot;: No such file or directory at /usr/bin/jeprof line 4463.\r\nobjdump -h /usr/local/openjdk-11/bin/java: No such file or directory\r\n```","title":"How to convert jeprof output to human readable format?","body":"<p>Failing while converting hprof output to gif format.</p>\n<pre><code>jeprof --show_bytes --gif /usr/local/openjdk-11/bin/java jeprof.*.heap &gt; /tmp/profile_1.gif\n</code></pre>\n<p>Exception:</p>\n<pre><code>Can't exec &quot;objdump&quot;: No such file or directory at /usr/bin/jeprof line 4463.\nobjdump -h /usr/local/openjdk-11/bin/java: No such file or directory\n</code></pre>\n"},{"tags":["java","selenium","automation","testng","webautomation"],"answers":[{"tags":[],"owner":{"account_id":10014964,"reputation":322,"user_id":7406606,"display_name":"Rostech"},"comment_count":0,"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1500450583,"creation_date":1500450583,"answer_id":45184176,"question_id":45183797,"body_markdown":"Please try selecting the password field like this.\r\n\r\n        WebDriverWait wait = new WebDriverWait(driver, 10);\r\n        WebElement passwordElement = wait.until(ExpectedConditions.elementToBeClickable(By.cssSelector(&quot;#Passwd&quot;)));\r\n        passwordElement.click();\r\n      passwordElement.clear();\r\n         passwordElement.sendKeys(&quot;123&quot;);","title":"element not interactable exception in selenium web automation","body":"<p>Please try selecting the password field like this.</p>\n\n<pre><code>    WebDriverWait wait = new WebDriverWait(driver, 10);\n    WebElement passwordElement = wait.until(ExpectedConditions.elementToBeClickable(By.cssSelector(\"#Passwd\")));\n    passwordElement.click();\n  passwordElement.clear();\n     passwordElement.sendKeys(\"123\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5319472,"reputation":1192,"user_id":4243319,"display_name":"anshul Gupta"},"comment_count":0,"down_vote_count":1,"up_vote_count":26,"is_accepted":true,"score":25,"last_activity_date":1500452596,"creation_date":1500452596,"answer_id":45184897,"question_id":45183797,"body_markdown":"Try setting an implicit wait of maybe 10 seconds.\r\n\r\n    gmail.manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS);\r\n\r\nOr set an explicit wait. An explicit waits is code you define to wait for a certain condition to occur before proceeding further in the code. In your case, it is the visibility of the password input field. (Thanks to ainlolcat&#39;s comment)\r\n\r\n    WebDriver gmail= new ChromeDriver();\r\n    gmail.get(&quot;https://www.gmail.co.in&quot;); \r\n    gmail.findElement(By.id(&quot;Email&quot;)).sendKeys(&quot;abcd&quot;);\r\n    gmail.findElement(By.id(&quot;next&quot;)).click();\r\n    WebDriverWait wait = new WebDriverWait(gmail, 10);\r\n    WebElement element = wait.until(\r\n    ExpectedConditions.visibilityOfElementLocated(By.id(&quot;Passwd&quot;)));\r\n    gmail.findElement(By.id(&quot;Passwd&quot;)).sendKeys(&quot;xyz&quot;);\r\n\r\n**Explanation**: The reason selenium can&#39;t find the element is because the id of the password input field is initially Passwd-hidden. After you click on the &quot;Next&quot; button, Google first verifies the email address entered and then shows the password input field (by changing the id from Passwd-hidden to Passwd). So, when the password field is still hidden (i.e. Google is still verifying the email id), your webdriver starts searching for the password input field with id Passwd which is still hidden. And hence, an exception is thrown.\r\n\r\n\r\n","title":"element not interactable exception in selenium web automation","body":"<p>Try setting an implicit wait of maybe 10 seconds.</p>\n\n<pre><code>gmail.manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS);\n</code></pre>\n\n<p>Or set an explicit wait. An explicit waits is code you define to wait for a certain condition to occur before proceeding further in the code. In your case, it is the visibility of the password input field. (Thanks to ainlolcat's comment)</p>\n\n<pre><code>WebDriver gmail= new ChromeDriver();\ngmail.get(\"https://www.gmail.co.in\"); \ngmail.findElement(By.id(\"Email\")).sendKeys(\"abcd\");\ngmail.findElement(By.id(\"next\")).click();\nWebDriverWait wait = new WebDriverWait(gmail, 10);\nWebElement element = wait.until(\nExpectedConditions.visibilityOfElementLocated(By.id(\"Passwd\")));\ngmail.findElement(By.id(\"Passwd\")).sendKeys(\"xyz\");\n</code></pre>\n\n<p><strong>Explanation</strong>: The reason selenium can't find the element is because the id of the password input field is initially Passwd-hidden. After you click on the \"Next\" button, Google first verifies the email address entered and then shows the password input field (by changing the id from Passwd-hidden to Passwd). So, when the password field is still hidden (i.e. Google is still verifying the email id), your webdriver starts searching for the password input field with id Passwd which is still hidden. And hence, an exception is thrown.</p>\n"},{"tags":[],"owner":{"account_id":7615640,"reputation":622,"user_id":5775158,"accept_rate":37,"display_name":"Testilla"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1563795580,"creation_date":1563795580,"answer_id":57145280,"question_id":45183797,"body_markdown":"I had the same problem and then figured out the cause. I was trying to type in a span tag instead of an input tag. My XPath was written with a span tag, which was a wrong thing to do. I reviewed the Html for the element and found the problem. All I then did was to find the input tag which happens to be a child element. You can only type in an input field if your XPath is created with an input tagname","title":"element not interactable exception in selenium web automation","body":"<p>I had the same problem and then figured out the cause. I was trying to type in a span tag instead of an input tag. My XPath was written with a span tag, which was a wrong thing to do. I reviewed the Html for the element and found the problem. All I then did was to find the input tag which happens to be a child element. You can only type in an input field if your XPath is created with an input tagname</p>\n"},{"comments":[{"owner":{"account_id":4517448,"reputation":446,"user_id":3671840,"accept_rate":36,"display_name":"Seba92"},"score":0,"creation_date":1603893519,"post_id":61943262,"comment_id":114180256,"body_markdown":"I had the same experience. Though it would be really nice to understand why..","body":"I had the same experience. Though it would be really nice to understand why.."}],"tags":[],"owner":{"account_id":5157876,"reputation":393,"user_id":4130574,"display_name":"Sachin Singh"},"comment_count":1,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1590092765,"creation_date":1590092765,"answer_id":61943262,"question_id":45183797,"body_markdown":"you may also try full xpath, I had a similar issue where I had to click on an element which has a property javascript onclick function. the full xpath method worked and no interactable exception was thrown.","title":"element not interactable exception in selenium web automation","body":"<p>you may also try full xpath, I had a similar issue where I had to click on an element which has a property javascript onclick function. the full xpath method worked and no interactable exception was thrown.</p>\n"},{"tags":[],"owner":{"account_id":8964938,"reputation":749,"user_id":6686007,"display_name":"Roberto Petrilli"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1599422912,"creation_date":1599422912,"answer_id":63768446,"question_id":45183797,"body_markdown":"In my case the element that generated the Exception was a button belonging to a form. I replaced\r\n\r\n    WebElement btnLogin = driver.findElement(By.cssSelector(&quot;button&quot;));\r\n    btnLogin.click();\r\n\r\nwith\r\n\r\n    btnLogin.submit();\r\n\r\nMy environment was chromedriver windows 10","title":"element not interactable exception in selenium web automation","body":"<p>In my case the element that generated the Exception was a button belonging to a form. I replaced</p>\n<pre><code>WebElement btnLogin = driver.findElement(By.cssSelector(&quot;button&quot;));\nbtnLogin.click();\n</code></pre>\n<p>with</p>\n<pre><code>btnLogin.submit();\n</code></pre>\n<p>My environment was chromedriver windows 10</p>\n"},{"tags":[],"owner":{"account_id":5342374,"reputation":71,"user_id":4258983,"display_name":"d6stringer"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1607554430,"creation_date":1607554430,"answer_id":65226120,"question_id":45183797,"body_markdown":"I&#39;m going to hedge this answer with this: I know it&#39;s crap.. and there&#39;s got to be a better way. (See above answers) But I tried all the suggestions here and still got nill. Ended up chasing errors, ripping the code to bits. Then I tried this:\r\n\r\n    import keyboard    \r\n    keyboard.press_and_release(&#39;tab&#39;)\r\n    keyboard.press_and_release(&#39;tab&#39;)\r\n    keyboard.press_and_release(&#39;tab&#39;) #repeat as needed\r\n    keyboard.press_and_release(&#39;space&#39;) \r\n\r\nIt&#39;s pretty insufferable and you&#39;ve got to make sure that you don&#39;t lose focus otherwise you&#39;ll just be tabbing and spacing on the wrong thing. \r\n\r\nMy assumption on why the other methods didn&#39;t work for me is that I&#39;m trying to click on something the developers didn&#39;t want a bot clicking on. So I&#39;m not clicking on it!","title":"element not interactable exception in selenium web automation","body":"<p>I'm going to hedge this answer with this: I know it's crap.. and there's got to be a better way. (See above answers) But I tried all the suggestions here and still got nill. Ended up chasing errors, ripping the code to bits. Then I tried this:</p>\n<pre><code>import keyboard    \nkeyboard.press_and_release('tab')\nkeyboard.press_and_release('tab')\nkeyboard.press_and_release('tab') #repeat as needed\nkeyboard.press_and_release('space') \n</code></pre>\n<p>It's pretty insufferable and you've got to make sure that you don't lose focus otherwise you'll just be tabbing and spacing on the wrong thing.</p>\n<p>My assumption on why the other methods didn't work for me is that I'm trying to click on something the developers didn't want a bot clicking on. So I'm not clicking on it!</p>\n"},{"tags":[],"owner":{"account_id":1207074,"reputation":3526,"user_id":1176454,"accept_rate":84,"display_name":"baptx"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1609442027,"creation_date":1609442027,"answer_id":65524795,"question_id":45183797,"body_markdown":"I got this error because I was using a wrong CSS selector with the Selenium WebDriver Node.js function `By.css()`.\r\n\r\nYou can check if your selector is correct by using it in the web console of your web browser (Ctrl+Shift+K shortcut), with the JavaScript function `document.querySelectorAll()`.","title":"element not interactable exception in selenium web automation","body":"<p>I got this error because I was using a wrong CSS selector with the Selenium WebDriver Node.js function <code>By.css()</code>.</p>\n<p>You can check if your selector is correct by using it in the web console of your web browser (Ctrl+Shift+K shortcut), with the JavaScript function <code>document.querySelectorAll()</code>.</p>\n"},{"tags":[],"owner":{"account_id":14642614,"reputation":29,"user_id":10958413,"display_name":"selladurai"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1609503426,"creation_date":1609501776,"answer_id":65529424,"question_id":45183797,"body_markdown":"If it&#39;s working in the debug, then `wait` must be the proper solution.  \r\nI will suggest to use the explicit `wait`, as given below:\r\n```\r\nWebDriverWait wait = new WebDriverWait(new ChromeDriver(), 5);\r\nwait.until(ExpectedConditions.presenceOfElementLocated(By.cssSelector(&quot;#Passwd&quot;)));\r\n```","title":"element not interactable exception in selenium web automation","body":"<p>If it's working in the debug, then <code>wait</code> must be the proper solution.<br />\nI will suggest to use the explicit <code>wait</code>, as given below:</p>\n<pre><code>WebDriverWait wait = new WebDriverWait(new ChromeDriver(), 5);\nwait.until(ExpectedConditions.presenceOfElementLocated(By.cssSelector(&quot;#Passwd&quot;)));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3935287,"reputation":922,"user_id":3251882,"accept_rate":25,"display_name":"user3251882"},"comment_count":0,"down_vote_count":0,"up_vote_count":25,"is_accepted":false,"score":25,"last_activity_date":1620697633,"creation_date":1620697633,"answer_id":67479562,"question_id":45183797,"body_markdown":"***&quot;element not interactable&quot;*** error can mean two things : \r\n\r\n \r\n a.  **Element has not properly rendered:** \r\n\r\nSolution for this is just to use implicit /explicit wait\r\n\r\n- **Implicit wait :**\r\n\r\n    driver.manage().timeouts().implicitlyWait(50, TimeUnit.SECONDS);\r\n\r\n- **Explicit wait :**\r\n  \r\n     WebDriverWait wait=new WebDriverWait(driver, 20);\r\n        element1 = wait.until(ExpectedConditions.elementToBeClickable(By.className(&quot;fa-stack-1x&quot;)));\r\n\r\nb. **Element has rendered but it is not in the visible part of the screen:** \r\n\r\nSolution is just to scroll till the element. Based on the version of Selenium it can be handled in different ways but I will provide a solution that works in all versions :\r\n  \r\n\r\n        JavascriptExecutor executor = (JavascriptExecutor) driver;\r\n        executor.executeScript(&quot;arguments[0].scrollIntoView(true);&quot;, element1);\r\n\r\n 1. Suppose all this fails then another way is to again make use of Javascript executor as following : \r\n\r\n    executor.executeScript(&quot;arguments[0].click();&quot;, element1);\r\n\r\n 2. If you still can&#39;t click , then it could again mean two things :\r\n\r\n **1. Iframe** \r\n\r\nCheck the DOM to see if the element you are inspecting lives in any frame. If that is true then you would need to switch to this frame before attempting any operation.\r\n   \r\n\r\n        driver.switchTo().frame(&quot;a077aa5e&quot;); //switching the frame by ID\r\n\t\tSystem.out.println(&quot;********We are switching to the iframe*******&quot;);\r\n \t\tdriver.findElement(By.xpath(&quot;html/body/a/img&quot;)).click();\r\n\r\n \r\n **2. New tab**\r\n\r\nIf a new tab has opened up and the element exists on it then you again need to code something like below to switch to it before attempting operation. \r\n\r\n    String parent = driver.getWindowHandle();\r\n    driver.findElement(By.partialLinkText(&quot;Continue&quot;)).click();\r\n    Set&lt;String&gt; s = driver.getWindowHandles();\r\n    // Now iterate using Iterator\r\n    Iterator&lt;String&gt; I1 = s.iterator();\r\n    while (I1.hasNext()) {\r\n    String child_window = I1.next();\r\n    if (!parent.equals(child_window)) {\r\n        driver.switchTo().window(child_window);\r\n        element1.click() \r\n    }\r\n\r\n","title":"element not interactable exception in selenium web automation","body":"<p><em><strong>&quot;element not interactable&quot;</strong></em> error can mean two things :</p>\n<p>a.  <strong>Element has not properly rendered:</strong></p>\n<p>Solution for this is just to use implicit /explicit wait</p>\n<ul>\n<li><p><strong>Implicit wait :</strong></p>\n<p>driver.manage().timeouts().implicitlyWait(50, TimeUnit.SECONDS);</p>\n</li>\n<li><p><strong>Explicit wait :</strong></p>\n<p>WebDriverWait wait=new WebDriverWait(driver, 20);\nelement1 = wait.until(ExpectedConditions.elementToBeClickable(By.className(&quot;fa-stack-1x&quot;)));</p>\n</li>\n</ul>\n<p>b. <strong>Element has rendered but it is not in the visible part of the screen:</strong></p>\n<p>Solution is just to scroll till the element. Based on the version of Selenium it can be handled in different ways but I will provide a solution that works in all versions :</p>\n<pre><code>    JavascriptExecutor executor = (JavascriptExecutor) driver;\n    executor.executeScript(&quot;arguments[0].scrollIntoView(true);&quot;, element1);\n</code></pre>\n<ol>\n<li><p>Suppose all this fails then another way is to again make use of Javascript executor as following :</p>\n<p>executor.executeScript(&quot;arguments[0].click();&quot;, element1);</p>\n</li>\n<li><p>If you still can't click , then it could again mean two things :</p>\n</li>\n</ol>\n<p><strong>1. Iframe</strong></p>\n<p>Check the DOM to see if the element you are inspecting lives in any frame. If that is true then you would need to switch to this frame before attempting any operation.</p>\n<pre><code>    driver.switchTo().frame(&quot;a077aa5e&quot;); //switching the frame by ID\n    System.out.println(&quot;********We are switching to the iframe*******&quot;);\n    driver.findElement(By.xpath(&quot;html/body/a/img&quot;)).click();\n</code></pre>\n<p><strong>2. New tab</strong></p>\n<p>If a new tab has opened up and the element exists on it then you again need to code something like below to switch to it before attempting operation.</p>\n<pre><code>String parent = driver.getWindowHandle();\ndriver.findElement(By.partialLinkText(&quot;Continue&quot;)).click();\nSet&lt;String&gt; s = driver.getWindowHandles();\n// Now iterate using Iterator\nIterator&lt;String&gt; I1 = s.iterator();\nwhile (I1.hasNext()) {\nString child_window = I1.next();\nif (!parent.equals(child_window)) {\n    driver.switchTo().window(child_window);\n    element1.click() \n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":73122,"reputation":8152,"user_id":210754,"accept_rate":100,"display_name":"No Refunds No Returns"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1631536952,"creation_date":1631536952,"answer_id":69162883,"question_id":45183797,"body_markdown":"I came across this error too.  I thought it might have been because the field was not visible.  I tried the scroll solution above and although the field became visible in the controlled browser session I still got the exception.  The solution I am committing looks similar to below.  It looks like the event can bubble to the contained input field and the end result is the `Selected` property becomes true.\r\n\r\nThe field appears in my page something like this.\r\n\r\n    &lt;label&gt;\r\n      &lt;input name=&quot;generic&quot; type=&quot;checkbox&quot; ... &gt;\r\n    &lt;label&gt;\r\n\r\nThe generic working code looks more or less like this:\r\n\r\n    var checkbox = driver.FindElement(By.Name(&quot;generic&quot;), mustBeVisible: false);\r\n    checkbox.Selected.Should().BeFalse();\r\n    var label = checkbox.FindElement(By.XPath(&quot;..&quot;));\r\n    label.Click();\r\n    checkbox.Selected.Should().BeTrue();\r\n\r\nYou&#39;ll need to translate this to your specific language.  I&#39;m using C# and FluentAssertions.  This solution worked for me with Chrome 94 and Selenium 3.141.0.","title":"element not interactable exception in selenium web automation","body":"<p>I came across this error too.  I thought it might have been because the field was not visible.  I tried the scroll solution above and although the field became visible in the controlled browser session I still got the exception.  The solution I am committing looks similar to below.  It looks like the event can bubble to the contained input field and the end result is the <code>Selected</code> property becomes true.</p>\n<p>The field appears in my page something like this.</p>\n<pre><code>&lt;label&gt;\n  &lt;input name=&quot;generic&quot; type=&quot;checkbox&quot; ... &gt;\n&lt;label&gt;\n</code></pre>\n<p>The generic working code looks more or less like this:</p>\n<pre><code>var checkbox = driver.FindElement(By.Name(&quot;generic&quot;), mustBeVisible: false);\ncheckbox.Selected.Should().BeFalse();\nvar label = checkbox.FindElement(By.XPath(&quot;..&quot;));\nlabel.Click();\ncheckbox.Selected.Should().BeTrue();\n</code></pre>\n<p>You'll need to translate this to your specific language.  I'm using C# and FluentAssertions.  This solution worked for me with Chrome 94 and Selenium 3.141.0.</p>\n"},{"tags":[],"owner":{"account_id":4805148,"reputation":4280,"user_id":3880516,"display_name":"sh6210"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1667447386,"creation_date":1649617125,"answer_id":71819678,"question_id":45183797,"body_markdown":"In my case, I&#39;m using python-selenium.\r\nI have two instructions. The second instruction wasn&#39;t able to execute.\r\nI put a ___time.sleep(1)___ between two instructions and I&#39;m done.\r\n\r\nIf you want you can change the sleep amount according to your need.","title":"element not interactable exception in selenium web automation","body":"<p>In my case, I'm using python-selenium.\nI have two instructions. The second instruction wasn't able to execute.\nI put a <em><strong>time.sleep(1)</strong></em> between two instructions and I'm done.</p>\n<p>If you want you can change the sleep amount according to your need.</p>\n"},{"tags":[],"owner":{"account_id":11791137,"reputation":184,"user_id":8627225,"display_name":"Learning Equals Success"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664307150,"creation_date":1664307150,"answer_id":73872937,"question_id":45183797,"body_markdown":"I had to hover over the element first for the sub-elements to appear. I didn&#39;t take that into account at first.\r\n\r\n    \tWebElement boardMenu = this.driver.findElement(By.linkText(boardTitle));\r\n\t\tActions action = new Actions(this.driver);\r\n\r\n\t\taction.moveToElement(boardMenu).perform();\r\n\r\n\r\nAnother tip is to check that you are having one element of that DOM. Try using Ctrl+F when inspecting the web page and check your xpath there; it should return one element if you are going with the findElement method.","title":"element not interactable exception in selenium web automation","body":"<p>I had to hover over the element first for the sub-elements to appear. I didn't take that into account at first.</p>\n<pre><code>    WebElement boardMenu = this.driver.findElement(By.linkText(boardTitle));\n    Actions action = new Actions(this.driver);\n\n    action.moveToElement(boardMenu).perform();\n</code></pre>\n<p>Another tip is to check that you are having one element of that DOM. Try using Ctrl+F when inspecting the web page and check your xpath there; it should return one element if you are going with the findElement method.</p>\n"},{"comments":[{"owner":{"account_id":14861941,"reputation":1836,"user_id":10732434,"display_name":"sanitizedUser"},"score":0,"creation_date":1688949728,"post_id":76623144,"comment_id":135139080,"body_markdown":"Add a code example, please.","body":"Add a code example, please."},{"owner":{"account_id":19202276,"reputation":33,"user_id":14029955,"display_name":"sitanosik"},"score":0,"creation_date":1689091288,"post_id":76623144,"comment_id":135162824,"body_markdown":"@sanitizedUser Just updated my answer","body":"@sanitizedUser Just updated my answer"}],"tags":[],"owner":{"account_id":19202276,"reputation":33,"user_id":14029955,"display_name":"sitanosik"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689091263,"creation_date":1688581979,"answer_id":76623144,"question_id":45183797,"body_markdown":"In my case, query wasn&#39;t specific enough. There were multiple elements on a page with the same attributes so the first element that was found wasn&#39;t the one I needed. As a result, the &quot;element not interactable&quot; error was correct since I was trying to click wrong element. I ended up finding ids for all the &quot;identical&quot; elements and grabbing the nth one instead of the first one. That would explain why some people say that using xpath worked for them.\r\n \r\n*Note: I&#39;m using Clojure and Etaoin library that is a wrapper around Selenium so terminology might not match*\r\n\r\nSee simplified examples below.\r\n\r\nBuggy code that throws &quot;element not interactable&quot; error: \r\n\r\n    (let [submit-button-query {:tag :button :fn/has-class &quot;submit-yes&quot;}\r\n          submit-button-element (query driver submit-button-query)] \r\n           (click-el driver submit-button-element))  \r\n\r\nWorking code:\r\n                  \r\n    (let [submit-button-query {:tag :button :fn/has-class &quot;submit-yes&quot;}   ;; query that I assumed was unique and matched the button I was interested in but, in fact, there were multiple elements with that class. I didnt realize it because I was using query fn that only returns the first match. Below Im using query-all fn to find all matches first\r\n          all-submit-button-elements (query-all driver submit-button-query)\r\n          pop-up-submit-button-element (last all-submit-button-elements)] ;; my case was simple and I could safely assume that the button I need is the last one from the list of matches \r\n       (click-el driver pop-up-submit-button-element))                    ;; successful click \r\n","title":"element not interactable exception in selenium web automation","body":"<p>In my case, query wasn't specific enough. There were multiple elements on a page with the same attributes so the first element that was found wasn't the one I needed. As a result, the &quot;element not interactable&quot; error was correct since I was trying to click wrong element. I ended up finding ids for all the &quot;identical&quot; elements and grabbing the nth one instead of the first one. That would explain why some people say that using xpath worked for them.</p>\n<p><em>Note: I'm using Clojure and Etaoin library that is a wrapper around Selenium so terminology might not match</em></p>\n<p>See simplified examples below.</p>\n<p>Buggy code that throws &quot;element not interactable&quot; error:</p>\n<pre><code>(let [submit-button-query {:tag :button :fn/has-class &quot;submit-yes&quot;}\n      submit-button-element (query driver submit-button-query)] \n       (click-el driver submit-button-element))  \n</code></pre>\n<p>Working code:</p>\n<pre><code>(let [submit-button-query {:tag :button :fn/has-class &quot;submit-yes&quot;}   ;; query that I assumed was unique and matched the button I was interested in but, in fact, there were multiple elements with that class. I didnt realize it because I was using query fn that only returns the first match. Below Im using query-all fn to find all matches first\n      all-submit-button-elements (query-all driver submit-button-query)\n      pop-up-submit-button-element (last all-submit-button-elements)] ;; my case was simple and I could safely assume that the button I need is the last one from the list of matches \n   (click-el driver pop-up-submit-button-element))                    ;; successful click \n</code></pre>\n"}],"owner":{"account_id":5772188,"reputation":515,"user_id":4555316,"accept_rate":33,"display_name":"ragesh-ragav 1993"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":366511,"favorite_count":0,"down_vote_count":0,"up_vote_count":38,"accepted_answer_id":45184897,"answer_count":13,"score":38,"last_activity_date":1689091263,"creation_date":1500449542,"question_id":45183797,"body_markdown":"   In the below code i cannot send password keys in the password field, i tried clicking the field, clearing the field and sending the keys. But now working in any of the method. But its working if i debug and test\r\n\r\n      public class TestMail {\r\n\t   protected static WebDriver driver;\r\n\r\n       protected static String result;\r\n\r\n       @BeforeClass\r\n\r\n       public static void setup()  {\r\n                  System.setProperty(&quot;webdriver.gecko.driver&quot;,&quot;D:\\\\geckodriver.exe&quot;);\r\n\r\n       driver = new FirefoxDriver();\r\n\r\n       driver.manage().timeouts().implicitlyWait(60, TimeUnit.SECONDS);\r\n\r\n      }\r\n\r\n       @Test\r\n\r\n     void Testcase1() {\r\n\r\n       driver.get(&quot;http://mail.google.com&quot;);\r\n       \r\n       WebElement loginfield = driver.findElement(By.name(&quot;Email&quot;));\r\n       if(loginfield.isDisplayed()){\r\n    \t   loginfield.sendKeys(&quot;ragesh@gmail.in&quot;);\r\n       }\r\n       else{\r\n      WebElement newloginfield = driver.findElemnt(By.cssSelector(&quot;#identifierId&quot;));                                      \r\n           newloginfield.sendKeys(&quot;ragesh@gmail.in&quot;);\r\n    \t  // System.out.println(&quot;This is new login&quot;);\r\n       }\r\n       \r\n       \r\n        driver.findElement(By.name(&quot;signIn&quot;)).click();\r\n\r\n      // driver.findElement(By.cssSelector(&quot;.RveJvd&quot;)).click();\r\n        \r\n       driver.manage().timeouts().implicitlyWait(15, TimeUnit.SECONDS);\r\n     // WebElement pwd = driver.findElement(By.name(&quot;Passwd&quot;));\r\n      WebElement pwd = driver.findElement(By.cssSelector(&quot;#Passwd&quot;));\r\n\r\n      pwd.click();\r\n      pwd.clear();\r\n     // pwd.sendKeys(&quot;123&quot;);\r\n     if(pwd.isEnabled()){\r\n    \t pwd.sendKeys(&quot;123&quot;);\r\n     }\r\n     else{\r\n    \t System.out.println(&quot;Not Enabled&quot;);\r\n     }","title":"element not interactable exception in selenium web automation","body":"<p>In the below code i cannot send password keys in the password field, i tried clicking the field, clearing the field and sending the keys. But now working in any of the method. But its working if i debug and test</p>\n\n<pre><code>  public class TestMail {\n   protected static WebDriver driver;\n\n   protected static String result;\n\n   @BeforeClass\n\n   public static void setup()  {\n              System.setProperty(\"webdriver.gecko.driver\",\"D:\\\\geckodriver.exe\");\n\n   driver = new FirefoxDriver();\n\n   driver.manage().timeouts().implicitlyWait(60, TimeUnit.SECONDS);\n\n  }\n\n   @Test\n\n void Testcase1() {\n\n   driver.get(\"http://mail.google.com\");\n\n   WebElement loginfield = driver.findElement(By.name(\"Email\"));\n   if(loginfield.isDisplayed()){\n       loginfield.sendKeys(\"ragesh@gmail.in\");\n   }\n   else{\n  WebElement newloginfield = driver.findElemnt(By.cssSelector(\"#identifierId\"));                                      \n       newloginfield.sendKeys(\"ragesh@gmail.in\");\n      // System.out.println(\"This is new login\");\n   }\n\n\n    driver.findElement(By.name(\"signIn\")).click();\n\n  // driver.findElement(By.cssSelector(\".RveJvd\")).click();\n\n   driver.manage().timeouts().implicitlyWait(15, TimeUnit.SECONDS);\n // WebElement pwd = driver.findElement(By.name(\"Passwd\"));\n  WebElement pwd = driver.findElement(By.cssSelector(\"#Passwd\"));\n\n  pwd.click();\n  pwd.clear();\n // pwd.sendKeys(\"123\");\n if(pwd.isEnabled()){\n     pwd.sendKeys(\"123\");\n }\n else{\n     System.out.println(\"Not Enabled\");\n }\n</code></pre>\n"},{"tags":["java","algorithm","byte","short","bcd"],"comments":[{"owner":{"account_id":267086,"reputation":62435,"user_id":555045,"accept_rate":100,"display_name":"harold"},"score":3,"creation_date":1688816592,"post_id":76642717,"comment_id":135126564,"body_markdown":"&quot;representation of data is 0F000200 17000000 07003B00&quot; -- this is not BCD. Is the example wrong, or the description? `readShort` only accidentally handled this data correctly (because every second byte is zero)","body":"&quot;representation of data is 0F000200 17000000 07003B00&quot; -- this is not BCD. Is the example wrong, or the description? <code>readShort</code> only accidentally handled this data correctly (because every second byte is zero)"},{"owner":{"account_id":7564567,"reputation":1681,"user_id":5740712,"accept_rate":69,"display_name":"VitalyT"},"score":0,"creation_date":1688817047,"post_id":76642717,"comment_id":135126608,"body_markdown":"Ok , edited the question. Lets ignore the method names, and assume second byte wont be zero, it will be unsigned","body":"Ok , edited the question. Lets ignore the method names, and assume second byte wont be zero, it will be unsigned"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1688817828,"post_id":76642717,"comment_id":135126678,"body_markdown":"It seems you&#39;re only interested in the high byte (and your interpretation is as if it&#39;s a *low* byte), so why don&#39;t you just read that instead of reading a short?","body":"It seems you&#39;re only interested in the high byte (and your interpretation is as if it&#39;s a <i>low</i> byte), so why don&#39;t you just read that instead of reading a short?"},{"owner":{"account_id":7564567,"reputation":1681,"user_id":5740712,"accept_rate":69,"display_name":"VitalyT"},"score":0,"creation_date":1688819028,"post_id":76642717,"comment_id":135126784,"body_markdown":"It could be that every byte will represent a digit, now the low byte it is accidentally zero. Even though need to gave same results after write","body":"It could be that every byte will represent a digit, now the low byte it is accidentally zero. Even though need to gave same results after write"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1688819098,"post_id":76642717,"comment_id":135126796,"body_markdown":"So, let&#39;s take the first datum. What would it mean for &#39;day&#39; were the second byte not zero?","body":"So, let&#39;s take the first datum. What would it mean for &#39;day&#39; were the second byte not zero?"},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1688819888,"post_id":76642717,"comment_id":135126889,"body_markdown":"If each byte is meant to represent a decimal digit, there shouldn’t be any bytes with values greater than 0x09 right?","body":"If each byte is meant to represent a decimal digit, there shouldn’t be any bytes with values greater than 0x09 right?"},{"owner":{"account_id":7564567,"reputation":1681,"user_id":5740712,"accept_rate":69,"display_name":"VitalyT"},"score":0,"creation_date":1688820628,"post_id":76642717,"comment_id":135126987,"body_markdown":"@Tim Moore  - the max value of each byte can be 255 (as decimal value)","body":"@Tim Moore  - the max value of each byte can be 255 (as decimal value)"},{"owner":{"account_id":7564567,"reputation":1681,"user_id":5740712,"accept_rate":69,"display_name":"VitalyT"},"score":0,"creation_date":1688820696,"post_id":76642717,"comment_id":135127001,"body_markdown":"@g00se I guess the day will be bigger","body":"@g00se I guess the day will be bigger"},{"owner":{"account_id":267086,"reputation":62435,"user_id":555045,"accept_rate":100,"display_name":"harold"},"score":1,"creation_date":1688820703,"post_id":76642717,"comment_id":135127003,"body_markdown":"If the format was BCD (unpacked version, one digit per byte), then 15 really would be stored as 0501, which you `writeShort` produces. But apparently that is not how the format works, so how *is* it meant to work? If each byte can be max 255, isn&#39;t it just a normal short that&#39;s stored there, not in any fancy format?","body":"If the format was BCD (unpacked version, one digit per byte), then 15 really would be stored as 0501, which you <code>writeShort</code> produces. But apparently that is not how the format works, so how <i>is</i> it meant to work? If each byte can be max 255, isn&#39;t it just a normal short that&#39;s stored there, not in any fancy format?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1688820827,"post_id":76642717,"comment_id":135127015,"body_markdown":"*@g00se I guess the day will be bigger* Is that meant to be a joke? How can it be bigger than 0XFF or decimal 31 for that matter?","body":"<i>@g00se I guess the day will be bigger</i> Is that meant to be a joke? How can it be bigger than 0XFF or decimal 31 for that matter?"},{"owner":{"account_id":7564567,"reputation":1681,"user_id":5740712,"accept_rate":69,"display_name":"VitalyT"},"score":0,"creation_date":1688821602,"post_id":76642717,"comment_id":135127106,"body_markdown":"The data is 3rd party and hard to say right now (will check it tomorrow) , but as I know every 1 byte should represent unsigned number with format ( day, month, year ..) , my question was if I read number this way (stream.read() + stream.read() * 10), how i should write to output in order to have same result (reverse) in editor","body":"The data is 3rd party and hard to say right now (will check it tomorrow) , but as I know every 1 byte should represent unsigned number with format ( day, month, year ..) , my question was if I read number this way (stream.read() + stream.read() * 10), how i should write to output in order to have same result (reverse) in editor"},{"owner":{"account_id":267086,"reputation":62435,"user_id":555045,"accept_rate":100,"display_name":"harold"},"score":0,"creation_date":1688822546,"post_id":76642717,"comment_id":135127232,"body_markdown":"`stream.write(value % 256); stream.write(value / 256);` would reproduce the data that you&#39;ve shown so far, but that is certainly not BCD, and is not symmetric with `stream.read() + stream.read() * 10` (which does not make sense anyway, given the data that you&#39;ve shown so far)","body":"<code>stream.write(value % 256); stream.write(value &#47; 256);</code> would reproduce the data that you&#39;ve shown so far, but that is certainly not BCD, and is not symmetric with <code>stream.read() + stream.read() * 10</code> (which does not make sense anyway, given the data that you&#39;ve shown so far)"},{"owner":{"account_id":7564567,"reputation":1681,"user_id":5740712,"accept_rate":69,"display_name":"VitalyT"},"score":0,"creation_date":1688823337,"post_id":76642717,"comment_id":135127323,"body_markdown":"Did it, didnt work","body":"Did it, didnt work"}],"answers":[{"tags":[],"owner":{"account_id":1039648,"reputation":12287,"user_id":1046007,"display_name":"Walter Tross"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689090872,"creation_date":1688857734,"answer_id":76645274,"question_id":76642717,"body_markdown":"If you really want to read and write short values spread over two bytes, little-endian (i.e., least significant byte first), you can modify your code like this (but there probably is a more efficient way):\r\n\r\n```\r\nprivate static int readShort(InputStream stream) throws IOException {\r\n    return stream.read() + stream.read() * 256;\r\n}\r\n\r\nprivate static void writeShort(OutputStream stream, int value) throws IOException {\r\n    stream.write(value % 256); // or value &amp; 0xFF\r\n    stream.write(value / 256); // or value &gt;&gt; 8\r\n}\r\n```\r\nThe point is, you don&#39;t want to read and write a decimal digit (10 possible values) at a time, but a byte (256 possible values) at a time.","title":"Convert short number to byte array java","body":"<p>If you really want to read and write short values spread over two bytes, little-endian (i.e., least significant byte first), you can modify your code like this (but there probably is a more efficient way):</p>\n<pre><code>private static int readShort(InputStream stream) throws IOException {\n    return stream.read() + stream.read() * 256;\n}\n\nprivate static void writeShort(OutputStream stream, int value) throws IOException {\n    stream.write(value % 256); // or value &amp; 0xFF\n    stream.write(value / 256); // or value &gt;&gt; 8\n}\n</code></pre>\n<p>The point is, you don't want to read and write a decimal digit (10 possible values) at a time, but a byte (256 possible values) at a time.</p>\n"}],"owner":{"account_id":7564567,"reputation":1681,"user_id":5740712,"accept_rate":69,"display_name":"VitalyT"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":73,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"accepted_answer_id":76645274,"answer_count":1,"score":-1,"last_activity_date":1689090872,"creation_date":1688815864,"question_id":76642717,"body_markdown":"my purpose to read from stream as byte per digit do some logic and write back to binary file\r\n\r\nLets say the representation of data is `0F000200 17000000 07003B00` \r\n\r\nso we have method to represent it\r\n\r\n       InputStream stream = new FileInputStream(args[0]);\r\n  \r\n        private static int readShort(InputStream stream) throws IOException {\r\n           return stream.read() + stream.read() * 10;\r\n        }\r\n\r\n        // ***** when we read the results ******\r\n\r\n        int day = readShort(stream); // =&gt; 15\r\n        int month = readShort(stream); //  =&gt; 2\r\n        int year_suffix = readShort(stream); // =&gt; 23\r\n        int hour = readShort(stream); //  =&gt; 0\r\n        int minute = readShort(stream); //  =&gt; 7\r\n        int second = readShort(stream); // =&gt; 59\r\n\r\n\r\n Now I want to write it back as byte array so I did:\r\n\r\n\r\n       FileOutputStream stream = new FileOutputStream(&quot;/path/to/file&quot;);\r\n   \r\n        writeShort(stream, day);\r\n        writeShort(stream, month);\r\n        writeShort(stream, year);\r\n        writeShort(stream, hour);\r\n        writeShort(stream, minute);\r\n        writeShort(stream, second);\r\n\r\n\r\n     private static void writeShort(OutputStream stream, int value) throws IOException {\r\n          stream.write(value % 10);\r\n          stream.write(value / 10);\r\n     }\r\n\r\n\r\nBut when I look into output file I see the header is not the same\r\n\r\nthe value are `05010200 03020000 07000905` instead of ***0F000200 17000000 07003B00***\r\n\r\nplease suggest ( picture from Hex fiend editor)\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/M3e6R.png","title":"Convert short number to byte array java","body":"<p>my purpose to read from stream as byte per digit do some logic and write back to binary file</p>\n<p>Lets say the representation of data is <code>0F000200 17000000 07003B00</code></p>\n<p>so we have method to represent it</p>\n<pre><code>   InputStream stream = new FileInputStream(args[0]);\n\n    private static int readShort(InputStream stream) throws IOException {\n       return stream.read() + stream.read() * 10;\n    }\n\n    // ***** when we read the results ******\n\n    int day = readShort(stream); // =&gt; 15\n    int month = readShort(stream); //  =&gt; 2\n    int year_suffix = readShort(stream); // =&gt; 23\n    int hour = readShort(stream); //  =&gt; 0\n    int minute = readShort(stream); //  =&gt; 7\n    int second = readShort(stream); // =&gt; 59\n</code></pre>\n<p>Now I want to write it back as byte array so I did:</p>\n<pre><code>   FileOutputStream stream = new FileOutputStream(&quot;/path/to/file&quot;);\n\n    writeShort(stream, day);\n    writeShort(stream, month);\n    writeShort(stream, year);\n    writeShort(stream, hour);\n    writeShort(stream, minute);\n    writeShort(stream, second);\n\n\n private static void writeShort(OutputStream stream, int value) throws IOException {\n      stream.write(value % 10);\n      stream.write(value / 10);\n }\n</code></pre>\n<p>But when I look into output file I see the header is not the same</p>\n<p>the value are <code>05010200 03020000 07000905</code> instead of <em><strong>0F000200 17000000 07003B00</strong></em></p>\n<p>please suggest ( picture from Hex fiend editor)</p>\n<p><a href=\"https://i.stack.imgur.com/M3e6R.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/M3e6R.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","string","title-case"],"comments":[{"owner":{"account_id":533893,"reputation":6266,"user_id":1407170,"accept_rate":83,"display_name":"sffc"},"score":7,"creation_date":1543533977,"post_id":1086123,"comment_id":93964747,"body_markdown":"Everyone reading this question: beware that many of the top voted answers here DO NOT WORK PROPERLY for all languages.  You need an i18n-aware library for correct titlecasing, like ICU4J (see Daniel F&#39;s answer).","body":"Everyone reading this question: beware that many of the top voted answers here DO NOT WORK PROPERLY for all languages.  You need an i18n-aware library for correct titlecasing, like ICU4J (see Daniel F&#39;s answer)."},{"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"score":0,"creation_date":1671047578,"post_id":1086123,"comment_id":132015759,"body_markdown":"Does this answer your question? [How to capitalize the first character of each word in a string](https://stackoverflow.com/questions/1892765/how-to-capitalize-the-first-character-of-each-word-in-a-string)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/1892765/how-to-capitalize-the-first-character-of-each-word-in-a-string\">How to capitalize the first character of each word in a string</a>"},{"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"score":0,"creation_date":1689097591,"post_id":1086123,"comment_id":135163972,"body_markdown":"I take back my duplicate question.  That is specifically not title case, in that it leaves the case of non-initial letters of each word alone, rather than changing them to upper case.  e.g. aBcD -&gt; &quot;ABcD&quot;, not &quot;Abcd&quot;.","body":"I take back my duplicate question.  That is specifically not title case, in that it leaves the case of non-initial letters of each word alone, rather than changing them to upper case.  e.g. aBcD -&gt; &quot;ABcD&quot;, not &quot;Abcd&quot;."}],"answers":[{"comments":[{"owner":{"account_id":2293921,"reputation":9958,"user_id":2015912,"accept_rate":70,"display_name":"scottb"},"score":1,"creation_date":1364784216,"post_id":1086134,"comment_id":22359734,"body_markdown":"This is a nice little routine, but it fails for the more general case in which Strings may represent names.  In this case, capitalization would also need to occur after apostrophes and hyphens, too.  Eg. O&#39;Connor and J. Wilkes-Booth.  Of course, other languages may have additional title case rules.","body":"This is a nice little routine, but it fails for the more general case in which Strings may represent names.  In this case, capitalization would also need to occur after apostrophes and hyphens, too.  Eg. O&#39;Connor and J. Wilkes-Booth.  Of course, other languages may have additional title case rules."},{"owner":{"account_id":3761123,"reputation":163,"user_id":3126079,"accept_rate":25,"display_name":"MMJZ"},"score":1,"creation_date":1433947177,"post_id":1086134,"comment_id":49572073,"body_markdown":"...If it were going to include that, wouldnt it need an entire dictionary lookup just to work out if the current word was a name? That seems a bit much for any one method.","body":"...If it were going to include that, wouldnt it need an entire dictionary lookup just to work out if the current word was a name? That seems a bit much for any one method."},{"owner":{"account_id":25832,"reputation":16218,"user_id":66708,"accept_rate":86,"display_name":"Junior Mayh&#233;"},"score":0,"creation_date":1457799427,"post_id":1086134,"comment_id":59575428,"body_markdown":"This code is almost fine because some names can have prepositons such as de, del, della, dei, da as in Maria del Carmen, Maria da Silva, Maria della Salute, etc. http://www.coderanch.com/t/35096/Programming/Extract-lastname-lastname-firstname","body":"This code is almost fine because some names can have prepositons such as de, del, della, dei, da as in Maria del Carmen, Maria da Silva, Maria della Salute, etc. <a href=\"http://www.coderanch.com/t/35096/Programming/Extract-lastname-lastname-firstname\" rel=\"nofollow noreferrer\">coderanch.com/t/35096/Programming/&hellip;</a>"},{"owner":{"account_id":21731,"reputation":9045,"user_id":53069,"accept_rate":77,"display_name":"sproketboy"},"score":0,"creation_date":1473246671,"post_id":1086134,"comment_id":66064580,"body_markdown":"Doesn&#39;t this break with apostrophe? What about O&#39;Brian for example.","body":"Doesn&#39;t this break with apostrophe? What about O&#39;Brian for example."},{"owner":{"account_id":7226774,"reputation":19717,"user_id":5515060,"accept_rate":100,"display_name":"Lino"},"score":1,"creation_date":1559123342,"post_id":1086134,"comment_id":99319213,"body_markdown":"Note: to avoid resizing of the internally used `char[]` in `StringBuilder` I suggest using `new StringBuilder(input.length())`","body":"Note: to avoid resizing of the internally used <code>char[]</code> in <code>StringBuilder</code> I suggest using <code>new StringBuilder(input.length())</code>"},{"owner":{"account_id":32251,"reputation":114942,"user_id":89266,"accept_rate":91,"display_name":"dfa"},"score":3,"creation_date":1559292358,"post_id":1086134,"comment_id":99382205,"body_markdown":"@sproketboy My idea was to provide an implementation for handling Java naming conventions, not for handling any kind of string representing names etc. Much more effort would be needed to properly handling all linguistic/regional differences for handling names.","body":"@sproketboy My idea was to provide an implementation for handling Java naming conventions, not for handling any kind of string representing names etc. Much more effort would be needed to properly handling all linguistic/regional differences for handling names."},{"owner":{"account_id":13408827,"reputation":937,"user_id":9676015,"display_name":"Brent K."},"score":0,"creation_date":1580930939,"post_id":1086134,"comment_id":106263822,"body_markdown":"Please note, this home-grown solution misses most of the title case rules.  https://capitalizemytitle.com/ Words like &quot;a&quot;, &quot;an&quot;, and &quot;the&quot; are not supposed to be capitalized. The second part of a hyphenated word should be. Others have pointed out that proper names retain their capitalization, such as &quot;O&#39;Connor&quot; But this solution will likely meet the needs of most people stopping here.  So still a good answer.  Reader beware.","body":"Please note, this home-grown solution misses most of the title case rules.  <a href=\"https://capitalizemytitle.com/\" rel=\"nofollow noreferrer\">capitalizemytitle.com</a> Words like &quot;a&quot;, &quot;an&quot;, and &quot;the&quot; are not supposed to be capitalized. The second part of a hyphenated word should be. Others have pointed out that proper names retain their capitalization, such as &quot;O&#39;Connor&quot; But this solution will likely meet the needs of most people stopping here.  So still a good answer.  Reader beware."}],"tags":[],"owner":{"account_id":32251,"reputation":114942,"user_id":89266,"accept_rate":91,"display_name":"dfa"},"comment_count":7,"down_vote_count":0,"up_vote_count":66,"is_accepted":false,"score":66,"last_activity_date":1588721885,"creation_date":1246871358,"answer_id":1086134,"question_id":1086123,"body_markdown":"There are no capitalize() or titleCase() methods in Java&#39;s String class. You have two choices: \r\n\r\n - using [commons lang string utils][1]. \r\n\r\n&lt;!----&gt;\r\n\r\n     StringUtils.capitalize(null)  = null\r\n     StringUtils.capitalize(&quot;&quot;)    = &quot;&quot;\r\n     StringUtils.capitalize(&quot;cat&quot;) = &quot;Cat&quot;\r\n     StringUtils.capitalize(&quot;cAt&quot;) = &quot;CAt&quot;\r\n     StringUtils.capitalize(&quot;&#39;cat&#39;&quot;) = &quot;&#39;cat&#39;&quot;\r\n\r\n     \r\n - write (yet another) static helper method toTitleCase()\r\n\r\n\r\n&lt;h2&gt;Sample implementation&lt;/h2&gt;\r\n    \r\n    public static String toTitleCase(String input) {\r\n        StringBuilder titleCase = new StringBuilder(input.length());\r\n        boolean nextTitleCase = true;\r\n\r\n        for (char c : input.toCharArray()) {\r\n            if (Character.isSpaceChar(c)) {\r\n                nextTitleCase = true;\r\n            } else if (nextTitleCase) {\r\n                c = Character.toTitleCase(c);\r\n                nextTitleCase = false;\r\n            }\r\n\r\n            titleCase.append(c);\r\n        }\r\n\r\n        return titleCase.toString();\r\n    }\r\n\r\n&lt;h3&gt;Testcase&lt;/h3&gt;\r\n\r\n        System.out.println(toTitleCase(&quot;string&quot;));\r\n        System.out.println(toTitleCase(&quot;another string&quot;));\r\n        System.out.println(toTitleCase(&quot;YET ANOTHER STRING&quot;));\r\n\r\noutputs:\r\n\r\n&lt;pre&gt;\r\nString\r\nAnother String\r\nYET ANOTHER STRING\r\n&lt;/pre&gt;\r\n\r\n  [1]: https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/StringUtils.html#capitalize-java.lang.String-\r\n","title":"Is there a method for String conversion to Title Case?","body":"<p>There are no capitalize() or titleCase() methods in Java's String class. You have two choices: </p>\n\n<ul>\n<li>using <a href=\"https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/StringUtils.html#capitalize-java.lang.String-\" rel=\"noreferrer\">commons lang string utils</a>. </li>\n</ul>\n\n\n\n<pre><code> StringUtils.capitalize(null)  = null\n StringUtils.capitalize(\"\")    = \"\"\n StringUtils.capitalize(\"cat\") = \"Cat\"\n StringUtils.capitalize(\"cAt\") = \"CAt\"\n StringUtils.capitalize(\"'cat'\") = \"'cat'\"\n</code></pre>\n\n<ul>\n<li>write (yet another) static helper method toTitleCase()</li>\n</ul>\n\n<h2>Sample implementation</h2>\n\n<pre><code>public static String toTitleCase(String input) {\n    StringBuilder titleCase = new StringBuilder(input.length());\n    boolean nextTitleCase = true;\n\n    for (char c : input.toCharArray()) {\n        if (Character.isSpaceChar(c)) {\n            nextTitleCase = true;\n        } else if (nextTitleCase) {\n            c = Character.toTitleCase(c);\n            nextTitleCase = false;\n        }\n\n        titleCase.append(c);\n    }\n\n    return titleCase.toString();\n}\n</code></pre>\n\n<h3>Testcase</h3>\n\n<pre><code>    System.out.println(toTitleCase(\"string\"));\n    System.out.println(toTitleCase(\"another string\"));\n    System.out.println(toTitleCase(\"YET ANOTHER STRING\"));\n</code></pre>\n\n<p>outputs:</p>\n\n<pre>\nString\nAnother String\nYET ANOTHER STRING\n</pre>\n"},{"comments":[{"owner":{"account_id":1336332,"reputation":3448,"user_id":1279002,"accept_rate":44,"display_name":"theINtoy"},"score":19,"creation_date":1437575399,"post_id":1086137,"comment_id":51087613,"body_markdown":"WordUtils.capitalizeFully() was better for me as it gives:\nWordUtils.capitalizeFully(&quot;i am FINE&quot;) = &quot;I Am Fine&quot;","body":"WordUtils.capitalizeFully() was better for me as it gives: WordUtils.capitalizeFully(&quot;i am FINE&quot;) = &quot;I Am Fine&quot;"},{"owner":{"account_id":4633949,"reputation":8005,"user_id":3755692,"accept_rate":62,"display_name":"msrd0"},"score":3,"creation_date":1508190323,"post_id":1086137,"comment_id":80505060,"body_markdown":"Just a small update, WordUtils is gone to Commons Text and is deprecated inside Commons Lang","body":"Just a small update, WordUtils is gone to Commons Text and is deprecated inside Commons Lang"},{"owner":{"account_id":219684,"reputation":37267,"user_id":476716,"accept_rate":77,"display_name":"OrangeDog"},"score":2,"creation_date":1596728353,"post_id":1086137,"comment_id":111910369,"body_markdown":"Spring also has `StringUtils.capitalise()`","body":"Spring also has <code>StringUtils.capitalise()</code>"},{"owner":{"account_id":3273747,"reputation":20852,"user_id":2756409,"accept_rate":100,"display_name":"TylerH"},"score":0,"creation_date":1597415836,"post_id":1086137,"comment_id":112133900,"body_markdown":"@OrangeDog do you mean `capitalize()`?","body":"@OrangeDog do you mean <code>capitalize()</code>?"},{"owner":{"account_id":10725041,"reputation":85,"user_id":7892830,"display_name":"singh.rbir"},"score":1,"creation_date":1620498494,"post_id":1086137,"comment_id":119220730,"body_markdown":"**2021**: `WordUtils` in Apache Commons is deprecated now. _Use StringUtils_","body":"<b>2021</b>: <code>WordUtils</code> in Apache Commons is deprecated now. <i>Use StringUtils</i>"}],"tags":[],"owner":{"account_id":42594,"reputation":12865,"user_id":124111,"accept_rate":98,"display_name":"aberrant80"},"comment_count":5,"down_vote_count":3,"up_vote_count":132,"is_accepted":false,"score":129,"last_activity_date":1579082620,"creation_date":1246871390,"answer_id":1086137,"question_id":1086123,"body_markdown":"Apache Commons [StringUtils.capitalize()][1] or Commons Text [WordUtils.capitalize()][2]\r\n\r\ne.g: `WordUtils.capitalize(&quot;i am FINE&quot;) = &quot;I Am FINE&quot;` from [WordUtils][2] doc\r\n\r\n\r\n  [1]: https://commons.apache.org/proper/commons-lang/javadocs/api-3.9/org/apache/commons/lang3/StringUtils.html#capitalize-java.lang.String-\r\n  [2]: https://commons.apache.org/proper/commons-text/javadocs/api-release/org/apache/commons/text/WordUtils.html#capitalize-java.lang.String-","title":"Is there a method for String conversion to Title Case?","body":"<p>Apache Commons <a href=\"https://commons.apache.org/proper/commons-lang/javadocs/api-3.9/org/apache/commons/lang3/StringUtils.html#capitalize-java.lang.String-\" rel=\"noreferrer\">StringUtils.capitalize()</a> or Commons Text <a href=\"https://commons.apache.org/proper/commons-text/javadocs/api-release/org/apache/commons/text/WordUtils.html#capitalize-java.lang.String-\" rel=\"noreferrer\">WordUtils.capitalize()</a></p>\n\n<p>e.g: <code>WordUtils.capitalize(\"i am FINE\") = \"I Am FINE\"</code> from <a href=\"https://commons.apache.org/proper/commons-text/javadocs/api-release/org/apache/commons/text/WordUtils.html#capitalize-java.lang.String-\" rel=\"noreferrer\">WordUtils</a> doc</p>\n"},{"comments":[{"owner":{"account_id":32480,"reputation":6587,"user_id":90203,"accept_rate":100,"display_name":"mihi"},"score":0,"creation_date":1391714087,"post_id":15738441,"comment_id":32653826,"body_markdown":"will not work with ligatures like ǉ, whose uppercase is Ǉ but titlecase is ǈ. Use `Character.toTitleCase` instead.","body":"will not work with ligatures like ǉ, whose uppercase is Ǉ but titlecase is ǈ. Use <code>Character.toTitleCase</code> instead."},{"owner":{"account_id":2293921,"reputation":9958,"user_id":2015912,"accept_rate":70,"display_name":"scottb"},"score":0,"creation_date":1392257575,"post_id":15738441,"comment_id":32887314,"body_markdown":"@mihi: also will not work with other specialized rules, eg. surnames such as McNamara or MacDonald.","body":"@mihi: also will not work with other specialized rules, eg. surnames such as McNamara or MacDonald."},{"owner":{"account_id":32480,"reputation":6587,"user_id":90203,"accept_rate":100,"display_name":"mihi"},"score":0,"creation_date":1392316571,"post_id":15738441,"comment_id":32920306,"body_markdown":"but these cases can inherently not be fixed. Using the correct case conversion function (titlecase is supposed to be used to capitalize a word, and not uppercase, according to Unicode rules) *can* be done (and it&#39;s easy).","body":"but these cases can inherently not be fixed. Using the correct case conversion function (titlecase is supposed to be used to capitalize a word, and not uppercase, according to Unicode rules) <i>can</i> be done (and it&#39;s easy)."},{"owner":{"account_id":382883,"reputation":2869,"user_id":738394,"accept_rate":62,"display_name":"allicarn"},"score":0,"creation_date":1403897153,"post_id":15738441,"comment_id":37852188,"body_markdown":"Wouldn&#39;t (Wouldn&#39;T) this also cause &quot;her&#39;s&quot; to become &quot;Her&#39;S&quot;?","body":"Wouldn&#39;t (Wouldn&#39;T) this also cause &quot;her&#39;s&quot; to become &quot;Her&#39;S&quot;?"},{"owner":{"account_id":2293921,"reputation":9958,"user_id":2015912,"accept_rate":70,"display_name":"scottb"},"score":0,"creation_date":1410194465,"post_id":15738441,"comment_id":40224726,"body_markdown":"It&#39;s true.  This works well on name fields but, as you point out, not on general prose.  It wouldn&#39;t even work well on all names, Vulcans in particular (T&#39;Pau instead of T&#39;pau).","body":"It&#39;s true.  This works well on name fields but, as you point out, not on general prose.  It wouldn&#39;t even work well on all names, Vulcans in particular (T&#39;Pau instead of T&#39;pau)."}],"tags":[],"owner":{"account_id":2293921,"reputation":9958,"user_id":2015912,"accept_rate":70,"display_name":"scottb"},"comment_count":5,"down_vote_count":0,"up_vote_count":43,"is_accepted":false,"score":43,"last_activity_date":1364796192,"creation_date":1364796192,"answer_id":15738441,"question_id":1086123,"body_markdown":"If I may submit my take on the solution...\n\nThe following method is based on the one that dfa posted.  It makes the following major change (which is suited to the solution I needed at the time):  it forces all characters in the input string into lower case unless it is immediately preceded by an &quot;actionable delimiter&quot; in which case the character is coerced into upper case.\n\nA major limitation of my routine is that it makes the assumption that &quot;title case&quot; is uniformly defined for all locales and is represented by the same case conventions I have used and so it is less useful than dfa&#39;s code in that respect.\n\n    public static String toDisplayCase(String s) {\n\n        final String ACTIONABLE_DELIMITERS = &quot; &#39;-/&quot;; // these cause the character following\n                                                     // to be capitalized\n        \n        StringBuilder sb = new StringBuilder();\n        boolean capNext = true;\n\n        for (char c : s.toCharArray()) {\n            c = (capNext)\n                    ? Character.toUpperCase(c)\n                    : Character.toLowerCase(c);\n            sb.append(c);\n            capNext = (ACTIONABLE_DELIMITERS.indexOf((int) c) &gt;= 0); // explicit cast not needed\n        }\n        return sb.toString();\n    }\n\n**TEST VALUES**\n\n&gt;a string\n&gt;\n&gt;maRTin o&#39;maLLEY\n&gt;\n&gt;john wilkes-booth\n&gt;\n&gt;YET ANOTHER STRING\n\n**OUTPUTS**\n\n&gt; A String\n&gt;\n&gt; Martin O&#39;Malley\n&gt;\n&gt; John Wilkes-Booth\n&gt;\n&gt; Yet Another String\n","title":"Is there a method for String conversion to Title Case?","body":"<p>If I may submit my take on the solution...</p>\n<p>The following method is based on the one that dfa posted.  It makes the following major change (which is suited to the solution I needed at the time):  it forces all characters in the input string into lower case unless it is immediately preceded by an &quot;actionable delimiter&quot; in which case the character is coerced into upper case.</p>\n<p>A major limitation of my routine is that it makes the assumption that &quot;title case&quot; is uniformly defined for all locales and is represented by the same case conventions I have used and so it is less useful than dfa's code in that respect.</p>\n<pre><code>public static String toDisplayCase(String s) {\n\n    final String ACTIONABLE_DELIMITERS = &quot; '-/&quot;; // these cause the character following\n                                                 // to be capitalized\n    \n    StringBuilder sb = new StringBuilder();\n    boolean capNext = true;\n\n    for (char c : s.toCharArray()) {\n        c = (capNext)\n                ? Character.toUpperCase(c)\n                : Character.toLowerCase(c);\n        sb.append(c);\n        capNext = (ACTIONABLE_DELIMITERS.indexOf((int) c) &gt;= 0); // explicit cast not needed\n    }\n    return sb.toString();\n}\n</code></pre>\n<p><strong>TEST VALUES</strong></p>\n<blockquote>\n<p>a string</p>\n<p>maRTin o'maLLEY</p>\n<p>john wilkes-booth</p>\n<p>YET ANOTHER STRING</p>\n</blockquote>\n<p><strong>OUTPUTS</strong></p>\n<blockquote>\n<p>A String</p>\n<p>Martin O'Malley</p>\n<p>John Wilkes-Booth</p>\n<p>Yet Another String</p>\n</blockquote>\n"},{"comments":[{"owner":{"account_id":209349,"reputation":3096,"user_id":460318,"display_name":"Eirik W"},"score":1,"creation_date":1422861664,"post_id":18070837,"comment_id":44900609,"body_markdown":"Nice solution! Thanks! But this does not work 100 % of the time, as it also capitalizes e.g. &quot;a&quot; in this title: &quot;This is a Title&quot;. See http://english.stackexchange.com/questions/14/which-words-in-a-title-should-be-capitalized. Do you know of any library that deals with this?","body":"Nice solution! Thanks! But this does not work 100 % of the time, as it also capitalizes e.g. &quot;a&quot; in this title: &quot;This is a Title&quot;. See <a href=\"http://english.stackexchange.com/questions/14/which-words-in-a-title-should-be-capitalized\" title=\"which words in a title should be capitalized\">english.stackexchange.com/questions/14/&hellip;</a>. Do you know of any library that deals with this?"}],"tags":[],"owner":{"account_id":1724049,"reputation":993,"user_id":1579143,"display_name":"jiehanzheng"},"comment_count":1,"down_vote_count":0,"up_vote_count":22,"is_accepted":false,"score":22,"last_activity_date":1375755634,"creation_date":1375755634,"answer_id":18070837,"question_id":1086123,"body_markdown":"Use [WordUtils.capitalizeFully()][1] from Apache Commons.\r\n\r\n    WordUtils.capitalizeFully(null)        = null\r\n    WordUtils.capitalizeFully(&quot;&quot;)          = &quot;&quot;\r\n    WordUtils.capitalizeFully(&quot;i am FINE&quot;) = &quot;I Am Fine&quot;\r\n\r\n  [1]: http://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/text/WordUtils.html#capitalizeFully%28java.lang.String%29","title":"Is there a method for String conversion to Title Case?","body":"<p>Use <a href=\"http://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/text/WordUtils.html#capitalizeFully%28java.lang.String%29\">WordUtils.capitalizeFully()</a> from Apache Commons.</p>\n\n<pre><code>WordUtils.capitalizeFully(null)        = null\nWordUtils.capitalizeFully(\"\")          = \"\"\nWordUtils.capitalizeFully(\"i am FINE\") = \"I Am Fine\"\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4890202,"reputation":1,"user_id":3941549,"display_name":"Vishwanath Dasa"},"comment_count":0,"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1408023647,"creation_date":1408023058,"answer_id":25309281,"question_id":1086123,"body_markdown":"Sorry I am a beginner so my coding habit sucks!\r\n\r\n    public class TitleCase {\r\n\r\n\t\tString title(String sent)\r\n\t\t{\t\r\n\t\t\tsent =sent.trim();\r\n\t\t\tsent = sent.toLowerCase();\r\n\t\t\tString[] str1=new String[sent.length()];\r\n\t\t    for(int k=0;k&lt;=str1.length-1;k++){\r\n\t\t\t\tstr1[k]=sent.charAt(k)+&quot;&quot;;\r\n\t\t}\r\n\t\t\t\t\r\n\t\t\tfor(int i=0;i&lt;=sent.length()-1;i++){\r\n\t\t\t\tif(i==0){\r\n\t\t\t\t    String s= sent.charAt(i)+&quot;&quot;;\r\n\t\t\t\t\tstr1[i]=s.toUpperCase();\r\n\t\t\t\t    }\r\n\t\t\t\tif(str1[i].equals(&quot; &quot;)){\r\n\t\t\t\t\tString s= sent.charAt(i+1)+&quot;&quot;;\r\n\t\t\t\t\tstr1[i+1]=s.toUpperCase();\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\tSystem.out.print(str1[i]);\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\treturn &quot;&quot;;\r\n\t\t\t}\r\n\t\r\n\t\tpublic static void main(String[] args) {\r\n\t\t\tTitleCase a = new TitleCase();\r\n\t\t\tSystem.out.println(a.title(&quot;   enter your Statement!&quot;));\r\n\t\t}\r\n    }\r\n\r\n","title":"Is there a method for String conversion to Title Case?","body":"<p>Sorry I am a beginner so my coding habit sucks!</p>\n\n<pre><code>public class TitleCase {\n\n    String title(String sent)\n    {   \n        sent =sent.trim();\n        sent = sent.toLowerCase();\n        String[] str1=new String[sent.length()];\n        for(int k=0;k&lt;=str1.length-1;k++){\n            str1[k]=sent.charAt(k)+\"\";\n    }\n\n        for(int i=0;i&lt;=sent.length()-1;i++){\n            if(i==0){\n                String s= sent.charAt(i)+\"\";\n                str1[i]=s.toUpperCase();\n                }\n            if(str1[i].equals(\" \")){\n                String s= sent.charAt(i+1)+\"\";\n                str1[i+1]=s.toUpperCase();\n                }\n\n            System.out.print(str1[i]);\n            }\n\n        return \"\";\n        }\n\n    public static void main(String[] args) {\n        TitleCase a = new TitleCase();\n        System.out.println(a.title(\"   enter your Statement!\"));\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2716605,"reputation":6013,"user_id":2343847,"accept_rate":40,"display_name":"aij"},"score":1,"creation_date":1452627843,"post_id":32143449,"comment_id":57250885,"body_markdown":"It is named `capitalizeFully` because it capitalizes every word, including those that should be lower case in a title. http://grammar.about.com/od/tz/g/Title-Case.htm","body":"It is named <code>capitalizeFully</code> because it capitalizes every word, including those that should be lower case in a title. <a href=\"http://grammar.about.com/od/tz/g/Title-Case.htm\" rel=\"nofollow noreferrer\">grammar.about.com/od/tz/g/Title-Case.htm</a>"},{"owner":{"account_id":2337701,"reputation":840,"user_id":2049647,"display_name":"ATutorMe"},"score":2,"creation_date":1486633048,"post_id":32143449,"comment_id":71432677,"body_markdown":"Apache Commons is not owned by Google. It&#39;s maintained by the Apache Software Foundation. http://commons.apache.org/","body":"Apache Commons is not owned by Google. It&#39;s maintained by the Apache Software Foundation. <a href=\"http://commons.apache.org/\" rel=\"nofollow noreferrer\">commons.apache.org</a>"}],"tags":[],"owner":{"account_id":6307828,"reputation":182,"user_id":4900384,"display_name":"JoeG"},"comment_count":2,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1440169479,"creation_date":1440168729,"answer_id":32143449,"question_id":1086123,"body_markdown":"The simplest way of converting any string into a title case, is to use googles package org.apache.commons.lang.WordUtils\r\n\r\n    System.out.println(WordUtils.capitalizeFully(&quot;tHis will BE MY EXAMple&quot;));\r\nWill result this\r\n&gt;This Will Be My Example\r\n\r\nI&#39;m not sure why its named &quot;capitalizeFully&quot;, where in fact the function  is not doing a full capital result, but anyways, thats the tool that we need.","title":"Is there a method for String conversion to Title Case?","body":"<p>The simplest way of converting any string into a title case, is to use googles package org.apache.commons.lang.WordUtils</p>\n\n<pre><code>System.out.println(WordUtils.capitalizeFully(\"tHis will BE MY EXAMple\"));\n</code></pre>\n\n<p>Will result this</p>\n\n<blockquote>\n  <p>This Will Be My Example</p>\n</blockquote>\n\n<p>I'm not sure why its named \"capitalizeFully\", where in fact the function  is not doing a full capital result, but anyways, thats the tool that we need.</p>\n"},{"tags":[],"owner":{"account_id":5961805,"reputation":121,"user_id":5260062,"display_name":"Vegegoku"},"comment_count":0,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1440415151,"creation_date":1440415151,"answer_id":32181030,"question_id":1086123,"body_markdown":"You can use apache commons langs like this :\r\n\r\n    WordUtils.capitalizeFully(&quot;this is a text to be capitalize&quot;)\r\n\r\nyou can find the java doc here :\r\n[WordUtils.capitalizeFully java doc][1]\r\n\r\nand if you want to remove the spaces in between the worlds you can use :\r\n\r\n    StringUtils.remove(WordUtils.capitalizeFully(&quot;this is a text to be capitalize&quot;),&quot; &quot;)\r\n\r\nyou can find the java doc for String\r\n[StringUtils.remove java doc][2]\r\n\r\ni hope this help.\r\n\r\n\r\n  [1]: https://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/WordUtils.html#capitalize(java.lang.String)\r\n  [2]: https://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/StringUtils.html#remove(java.lang.String,%20java.lang.String)","title":"Is there a method for String conversion to Title Case?","body":"<p>You can use apache commons langs like this :</p>\n\n<pre><code>WordUtils.capitalizeFully(\"this is a text to be capitalize\")\n</code></pre>\n\n<p>you can find the java doc here :\n<a href=\"https://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/WordUtils.html#capitalize(java.lang.String)\" rel=\"noreferrer\">WordUtils.capitalizeFully java doc</a></p>\n\n<p>and if you want to remove the spaces in between the worlds you can use :</p>\n\n<pre><code>StringUtils.remove(WordUtils.capitalizeFully(\"this is a text to be capitalize\"),\" \")\n</code></pre>\n\n<p>you can find the java doc for String\n<a href=\"https://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/StringUtils.html#remove(java.lang.String,%20java.lang.String)\" rel=\"noreferrer\">StringUtils.remove java doc</a></p>\n\n<p>i hope this help.</p>\n"},{"tags":[],"owner":{"account_id":7000487,"reputation":119,"user_id":5366669,"display_name":"Manish Bansal"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1448116502,"creation_date":1448115103,"answer_id":33844320,"question_id":1086123,"body_markdown":"I know this is older one, but doesn&#39;t carry the simple answer, I needed this method for my coding so I added here, simple to use. \r\n\r\n    public static String toTitleCase(String input) {\r\n        input = input.toLowerCase();\r\n        char c =  input.charAt(0);\r\n        String s = new String(&quot;&quot; + c);\r\n        String f = s.toUpperCase();\r\n        return f + input.substring(1);\r\n    }","title":"Is there a method for String conversion to Title Case?","body":"<p>I know this is older one, but doesn't carry the simple answer, I needed this method for my coding so I added here, simple to use. </p>\n\n<pre><code>public static String toTitleCase(String input) {\n    input = input.toLowerCase();\n    char c =  input.charAt(0);\n    String s = new String(\"\" + c);\n    String f = s.toUpperCase();\n    return f + input.substring(1);\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":264878,"reputation":551,"user_id":551477,"accept_rate":73,"display_name":"jechaviz"},"score":1,"creation_date":1495133825,"post_id":36343730,"comment_id":75136565,"body_markdown":"It would be useful to add the method and an example.","body":"It would be useful to add the method and an example."},{"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"score":0,"creation_date":1513192362,"post_id":36343730,"comment_id":82562132,"body_markdown":"CaseFormat only has formats typically used in program identifiers (UpperCamel, lower-hypen, UPPER_UNDERSCORE, etc.) and only supports ASCII text.  It would not work well for converting to Title Case.","body":"CaseFormat only has formats typically used in program identifiers (UpperCamel, lower-hypen, UPPER_UNDERSCORE, etc.) and only supports ASCII text.  It would not work well for converting to Title Case."}],"tags":[],"owner":{"account_id":6767920,"reputation":481,"user_id":5212325,"accept_rate":29,"display_name":"gkarthiks"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1459458199,"creation_date":1459458199,"answer_id":36343730,"question_id":1086123,"body_markdown":"you can very well use \r\n\r\n&gt; org.apache.commons.lang.WordUtils\r\n\r\nor \r\n\r\n&gt; CaseFormat\r\n\r\nfrom Google&#39;s API.","title":"Is there a method for String conversion to Title Case?","body":"<p>you can very well use </p>\n\n<blockquote>\n  <p>org.apache.commons.lang.WordUtils</p>\n</blockquote>\n\n<p>or </p>\n\n<blockquote>\n  <p>CaseFormat</p>\n</blockquote>\n\n<p>from Google's API.</p>\n"},{"comments":[{"owner":{"account_id":3546068,"reputation":800,"user_id":2962001,"accept_rate":82,"display_name":"o12d10"},"score":0,"creation_date":1510081074,"post_id":36621439,"comment_id":81280695,"body_markdown":"Your answer works like a charm, however, the solution doesn&#39;t seem to handle single word sequence, maybe an if condition should suffice.","body":"Your answer works like a charm, however, the solution doesn&#39;t seem to handle single word sequence, maybe an if condition should suffice."}],"tags":[],"owner":{"account_id":1936654,"reputation":141,"user_id":1743960,"display_name":"user1743960"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1460632552,"creation_date":1460632552,"answer_id":36621439,"question_id":1086123,"body_markdown":"This is something I wrote to convert snake_case to lowerCamelCase but could easily be adjusted based on the requirements\r\n\r\n    private String convertToLowerCamel(String startingText)\r\n    {\r\n        String[] parts = startingText.split(&quot;_&quot;);\r\n        return parts[0].toLowerCase() + Arrays.stream(parts)\r\n                        .skip(1)\r\n                        .map(part -&gt; part.substring(0, 1).toUpperCase() + part.substring(1).toLowerCase())\r\n                        .collect(Collectors.joining());\r\n    }\r\n\r\n","title":"Is there a method for String conversion to Title Case?","body":"<p>This is something I wrote to convert snake_case to lowerCamelCase but could easily be adjusted based on the requirements</p>\n\n<pre><code>private String convertToLowerCamel(String startingText)\n{\n    String[] parts = startingText.split(\"_\");\n    return parts[0].toLowerCase() + Arrays.stream(parts)\n                    .skip(1)\n                    .map(part -&gt; part.substring(0, 1).toUpperCase() + part.substring(1).toLowerCase())\n                    .collect(Collectors.joining());\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":533893,"reputation":6266,"user_id":1407170,"accept_rate":83,"display_name":"sffc"},"score":0,"creation_date":1543533577,"post_id":38073176,"comment_id":93964648,"body_markdown":"Also see the newer ICU4J API CaseMap: http://icu-project.org/apiref/icu4j/com/ibm/icu/text/CaseMap.Title.html","body":"Also see the newer ICU4J API CaseMap: <a href=\"http://icu-project.org/apiref/icu4j/com/ibm/icu/text/CaseMap.Title.html\" rel=\"nofollow noreferrer\">icu-project.org/apiref/icu4j/com/ibm/icu/text/&hellip;</a>"},{"owner":{"account_id":533893,"reputation":6266,"user_id":1407170,"accept_rate":83,"display_name":"sffc"},"score":0,"creation_date":1543534066,"post_id":38073176,"comment_id":93964775,"body_markdown":"Also available in Android API level 24: https://developer.android.com/reference/android/icu/lang/UCharacter.html","body":"Also available in Android API level 24: <a href=\"https://developer.android.com/reference/android/icu/lang/UCharacter.html\" rel=\"nofollow noreferrer\">developer.android.com/reference/android/icu/lang/&hellip;</a>"},{"owner":{"account_id":3246859,"reputation":1352,"user_id":2738155,"accept_rate":88,"display_name":"chomp"},"score":1,"creation_date":1611583579,"post_id":38073176,"comment_id":116491209,"body_markdown":"I tested it with the following:\n&quot;alexander and the terrible, horrible, no good, very bad day, by judith viorst and ray cruz&quot;\n\nI expected:\n&quot;Alexander and the Terrible, Horrible, No Good, Very Bad Day, by Judith Viorst and Ray Cruz&quot;\n\nBut the actual result was:\n&quot;Alexander And The Terrible, Horrible, No Good, Very Bad Day, By Judith Viorst And Ray Cruz&quot;\n\nDoes not work as expected. It just uppercase every word in a phrase, same as other builtin solutions","body":"I tested it with the following: &quot;alexander and the terrible, horrible, no good, very bad day, by judith viorst and ray cruz&quot;  I expected: &quot;Alexander and the Terrible, Horrible, No Good, Very Bad Day, by Judith Viorst and Ray Cruz&quot;  But the actual result was: &quot;Alexander And The Terrible, Horrible, No Good, Very Bad Day, By Judith Viorst And Ray Cruz&quot;  Does not work as expected. It just uppercase every word in a phrase, same as other builtin solutions"},{"owner":{"account_id":1980276,"reputation":8081,"user_id":1777072,"accept_rate":60,"display_name":"David Lavender"},"score":0,"creation_date":1626253525,"post_id":38073176,"comment_id":120840945,"body_markdown":"@chomp You want an AI-based natural language processor. That&#39;s beyond the ability of most libraries mentioned here, and - I&#39;d say - out of the scope of this question. &quot;Title Case&quot; means capitalising everything.","body":"@chomp You want an AI-based natural language processor. That&#39;s beyond the ability of most libraries mentioned here, and - I&#39;d say - out of the scope of this question. &quot;Title Case&quot; means capitalising everything."},{"owner":{"account_id":3246859,"reputation":1352,"user_id":2738155,"accept_rate":88,"display_name":"chomp"},"score":0,"creation_date":1626265469,"post_id":38073176,"comment_id":120845805,"body_markdown":"@DavidLavender I agree that could be hard to achieve, but one thing is &quot;Title Case&quot; and another one is &quot;Fully Capitalized&quot;, perhaps the name could be misleading, or at least it was in my case. \n\nhttps://en.wikipedia.org/wiki/Title_case","body":"@DavidLavender I agree that could be hard to achieve, but one thing is &quot;Title Case&quot; and another one is &quot;Fully Capitalized&quot;, perhaps the name could be misleading, or at least it was in my case.   <a href=\"https://en.wikipedia.org/wiki/Title_case\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Title_case</a>"}],"tags":[],"owner":{"account_id":8718999,"reputation":519,"user_id":6522707,"display_name":"Daniel F"},"comment_count":5,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1467108337,"creation_date":1467108337,"answer_id":38073176,"question_id":1086123,"body_markdown":"If you want the correct answer according to the latest Unicode standard, you should use icu4j.\r\n\r\n    UCharacter.toTitleCase(Locale.US, &quot;hello world&quot;, null, 0);\r\n\r\nNote that this is locale sensitive.\r\n\r\n[Api Documentation][1]\r\n\r\n[Implementation][2]\r\n\r\n\r\n  [1]: http://icu-project.org/apiref/icu4j/com/ibm/icu/lang/UCharacter.html#toTitleCase(java.util.Locale,%20java.lang.String,%20com.ibm.icu.text.BreakIterator,%20int)\r\n  [2]: http://bugs.icu-project.org/trac/browser/icu4j/trunk/main/classes/core/src/com/ibm/icu/lang/UCharacter.java","title":"Is there a method for String conversion to Title Case?","body":"<p>If you want the correct answer according to the latest Unicode standard, you should use icu4j.</p>\n\n<pre><code>UCharacter.toTitleCase(Locale.US, \"hello world\", null, 0);\n</code></pre>\n\n<p>Note that this is locale sensitive.</p>\n\n<p><a href=\"http://icu-project.org/apiref/icu4j/com/ibm/icu/lang/UCharacter.html#toTitleCase(java.util.Locale,%20java.lang.String,%20com.ibm.icu.text.BreakIterator,%20int)\" rel=\"noreferrer\">Api Documentation</a></p>\n\n<p><a href=\"http://bugs.icu-project.org/trac/browser/icu4j/trunk/main/classes/core/src/com/ibm/icu/lang/UCharacter.java\" rel=\"noreferrer\">Implementation</a></p>\n"},{"tags":[],"owner":{"account_id":94872,"reputation":17207,"user_id":258772,"display_name":"mrts"},"comment_count":0,"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1593303760,"creation_date":1495746436,"answer_id":44189841,"question_id":1086123,"body_markdown":"Here&#39;s another take based on @dfa&#39;s and @scottb&#39;s answers that handles any non-letter/digit characters:\r\n\r\n\r\n    public final class TitleCase {\r\n\r\n        public static String toTitleCase(String input) {\r\n\r\n            StringBuilder titleCase = new StringBuilder(input.length());\r\n            boolean nextTitleCase = true;\r\n\r\n            for (char c : input.toLowerCase().toCharArray()) {\r\n                if (!Character.isLetterOrDigit(c)) {\r\n                    nextTitleCase = true;\r\n                } else if (nextTitleCase) {\r\n                    c = Character.toTitleCase(c);\r\n                    nextTitleCase = false;\r\n                }\r\n                titleCase.append(c);\r\n            }\r\n\r\n            return titleCase.toString();\r\n        }\r\n\r\n    }\r\n\r\nGiven input:\r\n\r\n&gt; MARY &#196;NN O’CONNEŽ-ŠUSLIK\r\n\r\nthe output is\r\n\r\n&gt; Mary &#196;nn O’Connež-Šuslik\r\n\r\n","title":"Is there a method for String conversion to Title Case?","body":"<p>Here's another take based on @dfa's and @scottb's answers that handles any non-letter/digit characters:</p>\n<pre><code>public final class TitleCase {\n\n    public static String toTitleCase(String input) {\n\n        StringBuilder titleCase = new StringBuilder(input.length());\n        boolean nextTitleCase = true;\n\n        for (char c : input.toLowerCase().toCharArray()) {\n            if (!Character.isLetterOrDigit(c)) {\n                nextTitleCase = true;\n            } else if (nextTitleCase) {\n                c = Character.toTitleCase(c);\n                nextTitleCase = false;\n            }\n            titleCase.append(c);\n        }\n\n        return titleCase.toString();\n    }\n\n}\n</code></pre>\n<p>Given input:</p>\n<blockquote>\n<p>MARY ÄNN O’CONNEŽ-ŠUSLIK</p>\n</blockquote>\n<p>the output is</p>\n<blockquote>\n<p>Mary Änn O’Connež-Šuslik</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":6790299,"reputation":995,"user_id":5227689,"display_name":"Old Nick"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1507210751,"creation_date":1507210751,"answer_id":46587112,"question_id":1086123,"body_markdown":"I recently ran into this problem too and unfortunately had many occurences of names beginning with Mc and Mac, I ended up using a version of scottb&#39;s code which I changed to handle these prefixes so it&#39;s here in case anyone wants to use it. \r\n\r\nThere are still edge cases which this misses but the worst thing that can happen is that a letter will be lower case when it should be capitalized.\r\n\r\n    /**\r\n\t * Get a nicely formatted representation of the name. \r\n\t * Don&#39;t send this the whole name at once, instead send it the components.&lt;br&gt;\r\n\t * For example: andrew macnamara would be returned as:&lt;br&gt;\r\n\t * Andrew Macnamara if processed as a single string&lt;br&gt;\r\n\t * Andrew MacNamara if processed as 2 strings.\r\n\t * @param name\r\n\t * @return correctly formatted name\r\n\t */\r\n\tpublic static String getNameTitleCase (String name) {\r\n\t    final String ACTIONABLE_DELIMITERS = &quot; &#39;-/&quot;;\r\n\t    StringBuilder sb = new StringBuilder();\r\n\t    if (name !=null &amp;&amp; !name.isEmpty()){    \t\t    \r\n\t\t    boolean capitaliseNext = true;\r\n\t\t    for (char c : name.toCharArray()) {\r\n\t\t    \tc = (capitaliseNext)?Character.toUpperCase(c):Character.toLowerCase(c);\r\n\t\t    \tsb.append(c);\r\n\t\t    \tcapitaliseNext = (ACTIONABLE_DELIMITERS.indexOf((int) c) &gt;= 0);\r\n\t\t    }\t    \t    \t    \r\n\t\t    name = sb.toString();    \r\n\t\t\tif (name.startsWith(&quot;Mc&quot;) &amp;&amp; name.length() &gt; 2 ) {\r\n\t\t\t\tchar c = name.charAt(2);\r\n\t\t\t\tif (ACTIONABLE_DELIMITERS.indexOf((int) c) &lt; 0) {\r\n\t\t\t\t\tsb = new StringBuilder();\r\n\t\t\t\t\tsb.append (name.substring(0,2));\r\n\t\t\t\t\tsb.append (name.substring(2,3).toUpperCase());\r\n\t\t\t\t\tsb.append (name.substring(3));\r\n\t\t\t\t\tname=sb.toString();\r\n\t\t\t\t}\t\t\t\t\r\n\t\t\t} else if (name.startsWith(&quot;Mac&quot;) &amp;&amp; name.length() &gt; 3) {\r\n\t\t\t\tchar c = name.charAt(3);\r\n\t\t\t\tif (ACTIONABLE_DELIMITERS.indexOf((int) c) &lt; 0) {\r\n\t\t\t\t\tsb = new StringBuilder();\r\n\t\t\t\t\tsb.append (name.substring(0,3));\r\n\t\t\t\t\tsb.append (name.substring(3,4).toUpperCase());\r\n\t\t\t\t\tsb.append (name.substring(4));\r\n\t\t\t\t\tname=sb.toString();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t    }\r\n\t\treturn name;\t\r\n\t}\r\n\t\t","title":"Is there a method for String conversion to Title Case?","body":"<p>I recently ran into this problem too and unfortunately had many occurences of names beginning with Mc and Mac, I ended up using a version of scottb's code which I changed to handle these prefixes so it's here in case anyone wants to use it. </p>\n\n<p>There are still edge cases which this misses but the worst thing that can happen is that a letter will be lower case when it should be capitalized.</p>\n\n<pre><code>/**\n * Get a nicely formatted representation of the name. \n * Don't send this the whole name at once, instead send it the components.&lt;br&gt;\n * For example: andrew macnamara would be returned as:&lt;br&gt;\n * Andrew Macnamara if processed as a single string&lt;br&gt;\n * Andrew MacNamara if processed as 2 strings.\n * @param name\n * @return correctly formatted name\n */\npublic static String getNameTitleCase (String name) {\n    final String ACTIONABLE_DELIMITERS = \" '-/\";\n    StringBuilder sb = new StringBuilder();\n    if (name !=null &amp;&amp; !name.isEmpty()){                \n        boolean capitaliseNext = true;\n        for (char c : name.toCharArray()) {\n            c = (capitaliseNext)?Character.toUpperCase(c):Character.toLowerCase(c);\n            sb.append(c);\n            capitaliseNext = (ACTIONABLE_DELIMITERS.indexOf((int) c) &gt;= 0);\n        }                       \n        name = sb.toString();    \n        if (name.startsWith(\"Mc\") &amp;&amp; name.length() &gt; 2 ) {\n            char c = name.charAt(2);\n            if (ACTIONABLE_DELIMITERS.indexOf((int) c) &lt; 0) {\n                sb = new StringBuilder();\n                sb.append (name.substring(0,2));\n                sb.append (name.substring(2,3).toUpperCase());\n                sb.append (name.substring(3));\n                name=sb.toString();\n            }               \n        } else if (name.startsWith(\"Mac\") &amp;&amp; name.length() &gt; 3) {\n            char c = name.charAt(3);\n            if (ACTIONABLE_DELIMITERS.indexOf((int) c) &lt; 0) {\n                sb = new StringBuilder();\n                sb.append (name.substring(0,3));\n                sb.append (name.substring(3,4).toUpperCase());\n                sb.append (name.substring(4));\n                name=sb.toString();\n            }\n        }\n    }\n    return name;    \n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12125902,"reputation":29,"user_id":8854768,"display_name":"VAIBHAV SHEERSH"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1519110390,"creation_date":1519110390,"answer_id":48879599,"question_id":1086123,"body_markdown":"Conversion to Proper Title Case :\r\n\r\n    String s= &quot;ThiS iS SomE Text&quot;;\r\n    String[] arr = s.split(&quot; &quot;);\r\n    s = &quot;&quot;;\r\n    for (String s1 : arr) {\r\n        s += WordUtils.capitalize(s1.toLowerCase()) + &quot; &quot;;\r\n    }\r\n    s = s.substring(0, s.length() - 1);\r\n\r\nResult : &quot;This Is Some Text&quot;","title":"Is there a method for String conversion to Title Case?","body":"<p>Conversion to Proper Title Case :</p>\n\n<pre><code>String s= \"ThiS iS SomE Text\";\nString[] arr = s.split(\" \");\ns = \"\";\nfor (String s1 : arr) {\n    s += WordUtils.capitalize(s1.toLowerCase()) + \" \";\n}\ns = s.substring(0, s.length() - 1);\n</code></pre>\n\n<p>Result : \"This Is Some Text\"</p>\n"},{"tags":[],"owner":{"account_id":1729031,"reputation":7249,"user_id":1583052,"accept_rate":86,"display_name":"Dipu"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1578060352,"creation_date":1532558616,"answer_id":51528662,"question_id":1086123,"body_markdown":"This converter transform any string containing camel case, white-spaces, digits and other characters to sanitized title case.\r\n\r\n    /**\r\n     * Convert a string to title case in java (with tests).\r\n     *\r\n     * @author Sudipto Chandra\r\n     */\r\n    public abstract class TitleCase {\r\n    \r\n        /**\r\n         * Returns the character type. &lt;br&gt;\r\n         * &lt;br&gt;\r\n         * Digit = 2 &lt;br&gt;\r\n         * Lower case alphabet = 0 &lt;br&gt;\r\n         * Uppercase case alphabet = 1 &lt;br&gt;\r\n         * All else = -1.\r\n         *\r\n         * @param ch\r\n         * @return\r\n         */\r\n        private static int getCharType(char ch) {\r\n            if (Character.isLowerCase(ch)) {\r\n                return 0;\r\n            } else if (Character.isUpperCase(ch)) {\r\n                return 1;\r\n            } else if (Character.isDigit(ch)) {\r\n                return 2;\r\n            }\r\n            return -1;\r\n        }\r\n    \r\n        /**\r\n         * Converts any given string in camel or snake case to title case.\r\n         * &lt;br&gt;\r\n         * It uses the method getCharType and ignore any character that falls in\r\n         * negative character type category. It separates two alphabets of not-equal\r\n         * cases with a space. It accepts numbers and append it to the currently\r\n         * running group, and puts a space at the end.\r\n         * &lt;br&gt;\r\n         * If the result is empty after the operations, original string is returned.\r\n         *\r\n         * @param text the text to be converted.\r\n         * @return a title cased string\r\n         */\r\n        public static String titleCase(String text) {\r\n            if (text == null || text.length() == 0) {\r\n                return text;\r\n            }\r\n    \r\n            char[] str = text.toCharArray();\r\n            StringBuilder sb = new StringBuilder();\r\n    \r\n            boolean capRepeated = false;\r\n            for (int i = 0, prev = -1, next; i &lt; str.length; ++i, prev = next) {\r\n                next = getCharType(str[i]);\r\n                // trace consecutive capital cases\r\n                if (prev == 1 &amp;&amp; next == 1) {\r\n                    capRepeated = true;\r\n                } else if (next != 0) {\r\n                    capRepeated = false;\r\n                }\r\n                // next is ignorable\r\n                if (next == -1) {\r\n                    // System.out.printf(&quot;case 0, %d %d %s\\n&quot;, prev, next, sb.toString());\r\n                    continue; // does not append anything\r\n                }\r\n                // prev and next are of same type\r\n                if (prev == next) {\r\n                    sb.append(str[i]);\r\n                    // System.out.printf(&quot;case 1, %d %d %s\\n&quot;, prev, next, sb.toString());\r\n                    continue;\r\n                }\r\n                // next is not an alphabet\r\n                if (next == 2) {\r\n                    sb.append(str[i]);\r\n                    // System.out.printf(&quot;case 2, %d %d %s\\n&quot;, prev, next, sb.toString());\r\n                    continue;\r\n                }\r\n                // next is an alphabet, prev was not +\r\n                // next is uppercase and prev was lowercase\r\n                if (prev == -1 || prev == 2 || prev == 0) {\r\n                    if (sb.length() != 0) {\r\n                        sb.append(&#39; &#39;);\r\n                    }\r\n                    sb.append(Character.toUpperCase(str[i]));\r\n                    // System.out.printf(&quot;case 3, %d %d %s\\n&quot;, prev, next, sb.toString());\r\n                    continue;\r\n                }\r\n                // next is lowercase and prev was uppercase\r\n                if (prev == 1) {\r\n                    if (capRepeated) {\r\n                        sb.insert(sb.length() - 1, &#39; &#39;);\r\n                        capRepeated = false;\r\n                    }\r\n                    sb.append(str[i]);\r\n                    // System.out.printf(&quot;case 4, %d %d %s\\n&quot;, prev, next, sb.toString());\r\n                }\r\n            }\r\n            String output = sb.toString().trim();\r\n            output = (output.length() == 0) ? text : output;\r\n            //return output;\r\n    \r\n            // Capitalize all words (Optional)\r\n            String[] result = output.split(&quot; &quot;);\r\n            for (int i = 0; i &lt; result.length; ++i) {\r\n                result[i] = result[i].charAt(0) + result[i].substring(1).toLowerCase();\r\n            }\r\n            output = String.join(&quot; &quot;, result);\r\n            return output;\r\n        }\r\n    \r\n        /**\r\n         * Test method for the titleCase() function.\r\n         */\r\n        public static void testTitleCase() {\r\n            System.out.println(&quot;--------------- Title Case Tests --------------------&quot;);\r\n            String[][] samples = {\r\n                {null, null},\r\n                {&quot;&quot;, &quot;&quot;},\r\n                {&quot;a&quot;, &quot;A&quot;},\r\n                {&quot;aa&quot;, &quot;Aa&quot;},\r\n                {&quot;aaa&quot;, &quot;Aaa&quot;},\r\n                {&quot;aC&quot;, &quot;A C&quot;},\r\n                {&quot;AC&quot;, &quot;Ac&quot;},\r\n                {&quot;aCa&quot;, &quot;A Ca&quot;},\r\n                {&quot;ACa&quot;, &quot;A Ca&quot;},\r\n                {&quot;aCamel&quot;, &quot;A Camel&quot;},\r\n                {&quot;anCamel&quot;, &quot;An Camel&quot;},\r\n                {&quot;CamelCase&quot;, &quot;Camel Case&quot;},\r\n                {&quot;camelCase&quot;, &quot;Camel Case&quot;},\r\n                {&quot;snake_case&quot;, &quot;Snake Case&quot;},\r\n                {&quot;toCamelCaseString&quot;, &quot;To Camel Case String&quot;},\r\n                {&quot;toCAMELCase&quot;, &quot;To Camel Case&quot;},\r\n                {&quot;_under_the_scoreCamelWith_&quot;, &quot;Under The Score Camel With&quot;},\r\n                {&quot;ABDTest&quot;, &quot;Abd Test&quot;},\r\n                {&quot;title123Case&quot;, &quot;Title123 Case&quot;},\r\n                {&quot;expect11&quot;, &quot;Expect11&quot;},\r\n                {&quot;all0verMe3&quot;, &quot;All0 Ver Me3&quot;},\r\n                {&quot;___&quot;, &quot;___&quot;},\r\n                {&quot;__a__&quot;, &quot;A&quot;},\r\n                {&quot;_A_b_c____aa&quot;, &quot;A B C Aa&quot;},\r\n                {&quot;_get$It132done&quot;, &quot;Get It132 Done&quot;},\r\n                {&quot;_122_&quot;, &quot;122&quot;},\r\n                {&quot;_no112&quot;, &quot;No112&quot;},\r\n                {&quot;Case-13title&quot;, &quot;Case13 Title&quot;},\r\n                {&quot;-no-allow-&quot;, &quot;No Allow&quot;},\r\n                {&quot;_paren-_-allow--not!&quot;, &quot;Paren Allow Not&quot;},\r\n                {&quot;Other.Allow.--False?&quot;, &quot;Other Allow False&quot;},\r\n                {&quot;$39$ldl%LK3$lk_389$klnsl-32489  3 42034 &quot;, &quot;39 Ldl Lk3 Lk389 Klnsl32489342034&quot;},\r\n                {&quot;tHis will BE MY EXAMple&quot;, &quot;T His Will Be My Exa Mple&quot;},\r\n                {&quot;stripEvery.damn-paren- -_now&quot;, &quot;Strip Every Damn Paren Now&quot;},\r\n                {&quot;getMe&quot;, &quot;Get Me&quot;},\r\n                {&quot;whatSthePoint&quot;, &quot;What Sthe Point&quot;},\r\n                {&quot;n0pe_aLoud&quot;, &quot;N0 Pe A Loud&quot;},\r\n                {&quot;canHave SpacesThere&quot;, &quot;Can Have Spaces There&quot;},\r\n                {&quot;  why_underScore exists  &quot;, &quot;Why Under Score Exists&quot;},\r\n                {&quot;small-to-be-seen&quot;, &quot;Small To Be Seen&quot;},\r\n                {&quot;toCAMELCase&quot;, &quot;To Camel Case&quot;},\r\n                {&quot;_under_the_scoreCamelWith_&quot;, &quot;Under The Score Camel With&quot;},\r\n                {&quot;last one onTheList&quot;, &quot;Last One On The List&quot;}\r\n            };\r\n            int pass = 0;\r\n            for (String[] inp : samples) {\r\n                String out = titleCase(inp[0]);\r\n                //String out = WordUtils.capitalizeFully(inp[0]);\r\n                System.out.printf(&quot;TEST &#39;%s&#39;\\nWANTS &#39;%s&#39;\\nFOUND &#39;%s&#39;\\n&quot;, inp[0], inp[1], out);\r\n                boolean passed = (out == null ? inp[1] == null : out.equals(inp[1]));\r\n                pass += passed ? 1 : 0;\r\n                System.out.println(passed ? &quot;-- PASS --&quot; : &quot;!! FAIL !!&quot;);\r\n                System.out.println();\r\n            }\r\n            System.out.printf(&quot;\\n%d Passed, %d Failed.\\n&quot;, pass, samples.length - pass);\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            // run tests\r\n            testTitleCase();\r\n        }\r\n    }\r\n\r\n\r\nHere are some inputs:\r\n\r\n    aCamel\r\n    TitleCase\r\n    snake_case\r\n    fromCamelCASEString\r\n    ABCTest\r\n    expect11\r\n    _paren-_-allow--not!\r\n      why_underScore   exists  \r\n    last one onTheList \r\n\r\nAnd my outputs:\r\n\r\n    A Camel\r\n    Title Case\r\n    Snake Case\r\n    From Camel Case String\r\n    Abc Test\r\n    Expect11\r\n    Paren Allow Not\r\n    Why Under Score Exists\r\n    Last One On The List\r\n\r\n\r\n","title":"Is there a method for String conversion to Title Case?","body":"<p>This converter transform any string containing camel case, white-spaces, digits and other characters to sanitized title case.</p>\n\n<pre><code>/**\n * Convert a string to title case in java (with tests).\n *\n * @author Sudipto Chandra\n */\npublic abstract class TitleCase {\n\n    /**\n     * Returns the character type. &lt;br&gt;\n     * &lt;br&gt;\n     * Digit = 2 &lt;br&gt;\n     * Lower case alphabet = 0 &lt;br&gt;\n     * Uppercase case alphabet = 1 &lt;br&gt;\n     * All else = -1.\n     *\n     * @param ch\n     * @return\n     */\n    private static int getCharType(char ch) {\n        if (Character.isLowerCase(ch)) {\n            return 0;\n        } else if (Character.isUpperCase(ch)) {\n            return 1;\n        } else if (Character.isDigit(ch)) {\n            return 2;\n        }\n        return -1;\n    }\n\n    /**\n     * Converts any given string in camel or snake case to title case.\n     * &lt;br&gt;\n     * It uses the method getCharType and ignore any character that falls in\n     * negative character type category. It separates two alphabets of not-equal\n     * cases with a space. It accepts numbers and append it to the currently\n     * running group, and puts a space at the end.\n     * &lt;br&gt;\n     * If the result is empty after the operations, original string is returned.\n     *\n     * @param text the text to be converted.\n     * @return a title cased string\n     */\n    public static String titleCase(String text) {\n        if (text == null || text.length() == 0) {\n            return text;\n        }\n\n        char[] str = text.toCharArray();\n        StringBuilder sb = new StringBuilder();\n\n        boolean capRepeated = false;\n        for (int i = 0, prev = -1, next; i &lt; str.length; ++i, prev = next) {\n            next = getCharType(str[i]);\n            // trace consecutive capital cases\n            if (prev == 1 &amp;&amp; next == 1) {\n                capRepeated = true;\n            } else if (next != 0) {\n                capRepeated = false;\n            }\n            // next is ignorable\n            if (next == -1) {\n                // System.out.printf(\"case 0, %d %d %s\\n\", prev, next, sb.toString());\n                continue; // does not append anything\n            }\n            // prev and next are of same type\n            if (prev == next) {\n                sb.append(str[i]);\n                // System.out.printf(\"case 1, %d %d %s\\n\", prev, next, sb.toString());\n                continue;\n            }\n            // next is not an alphabet\n            if (next == 2) {\n                sb.append(str[i]);\n                // System.out.printf(\"case 2, %d %d %s\\n\", prev, next, sb.toString());\n                continue;\n            }\n            // next is an alphabet, prev was not +\n            // next is uppercase and prev was lowercase\n            if (prev == -1 || prev == 2 || prev == 0) {\n                if (sb.length() != 0) {\n                    sb.append(' ');\n                }\n                sb.append(Character.toUpperCase(str[i]));\n                // System.out.printf(\"case 3, %d %d %s\\n\", prev, next, sb.toString());\n                continue;\n            }\n            // next is lowercase and prev was uppercase\n            if (prev == 1) {\n                if (capRepeated) {\n                    sb.insert(sb.length() - 1, ' ');\n                    capRepeated = false;\n                }\n                sb.append(str[i]);\n                // System.out.printf(\"case 4, %d %d %s\\n\", prev, next, sb.toString());\n            }\n        }\n        String output = sb.toString().trim();\n        output = (output.length() == 0) ? text : output;\n        //return output;\n\n        // Capitalize all words (Optional)\n        String[] result = output.split(\" \");\n        for (int i = 0; i &lt; result.length; ++i) {\n            result[i] = result[i].charAt(0) + result[i].substring(1).toLowerCase();\n        }\n        output = String.join(\" \", result);\n        return output;\n    }\n\n    /**\n     * Test method for the titleCase() function.\n     */\n    public static void testTitleCase() {\n        System.out.println(\"--------------- Title Case Tests --------------------\");\n        String[][] samples = {\n            {null, null},\n            {\"\", \"\"},\n            {\"a\", \"A\"},\n            {\"aa\", \"Aa\"},\n            {\"aaa\", \"Aaa\"},\n            {\"aC\", \"A C\"},\n            {\"AC\", \"Ac\"},\n            {\"aCa\", \"A Ca\"},\n            {\"ACa\", \"A Ca\"},\n            {\"aCamel\", \"A Camel\"},\n            {\"anCamel\", \"An Camel\"},\n            {\"CamelCase\", \"Camel Case\"},\n            {\"camelCase\", \"Camel Case\"},\n            {\"snake_case\", \"Snake Case\"},\n            {\"toCamelCaseString\", \"To Camel Case String\"},\n            {\"toCAMELCase\", \"To Camel Case\"},\n            {\"_under_the_scoreCamelWith_\", \"Under The Score Camel With\"},\n            {\"ABDTest\", \"Abd Test\"},\n            {\"title123Case\", \"Title123 Case\"},\n            {\"expect11\", \"Expect11\"},\n            {\"all0verMe3\", \"All0 Ver Me3\"},\n            {\"___\", \"___\"},\n            {\"__a__\", \"A\"},\n            {\"_A_b_c____aa\", \"A B C Aa\"},\n            {\"_get$It132done\", \"Get It132 Done\"},\n            {\"_122_\", \"122\"},\n            {\"_no112\", \"No112\"},\n            {\"Case-13title\", \"Case13 Title\"},\n            {\"-no-allow-\", \"No Allow\"},\n            {\"_paren-_-allow--not!\", \"Paren Allow Not\"},\n            {\"Other.Allow.--False?\", \"Other Allow False\"},\n            {\"$39$ldl%LK3$lk_389$klnsl-32489  3 42034 \", \"39 Ldl Lk3 Lk389 Klnsl32489342034\"},\n            {\"tHis will BE MY EXAMple\", \"T His Will Be My Exa Mple\"},\n            {\"stripEvery.damn-paren- -_now\", \"Strip Every Damn Paren Now\"},\n            {\"getMe\", \"Get Me\"},\n            {\"whatSthePoint\", \"What Sthe Point\"},\n            {\"n0pe_aLoud\", \"N0 Pe A Loud\"},\n            {\"canHave SpacesThere\", \"Can Have Spaces There\"},\n            {\"  why_underScore exists  \", \"Why Under Score Exists\"},\n            {\"small-to-be-seen\", \"Small To Be Seen\"},\n            {\"toCAMELCase\", \"To Camel Case\"},\n            {\"_under_the_scoreCamelWith_\", \"Under The Score Camel With\"},\n            {\"last one onTheList\", \"Last One On The List\"}\n        };\n        int pass = 0;\n        for (String[] inp : samples) {\n            String out = titleCase(inp[0]);\n            //String out = WordUtils.capitalizeFully(inp[0]);\n            System.out.printf(\"TEST '%s'\\nWANTS '%s'\\nFOUND '%s'\\n\", inp[0], inp[1], out);\n            boolean passed = (out == null ? inp[1] == null : out.equals(inp[1]));\n            pass += passed ? 1 : 0;\n            System.out.println(passed ? \"-- PASS --\" : \"!! FAIL !!\");\n            System.out.println();\n        }\n        System.out.printf(\"\\n%d Passed, %d Failed.\\n\", pass, samples.length - pass);\n    }\n\n    public static void main(String[] args) {\n        // run tests\n        testTitleCase();\n    }\n}\n</code></pre>\n\n<p>Here are some inputs:</p>\n\n<pre><code>aCamel\nTitleCase\nsnake_case\nfromCamelCASEString\nABCTest\nexpect11\n_paren-_-allow--not!\n  why_underScore   exists  \nlast one onTheList \n</code></pre>\n\n<p>And my outputs:</p>\n\n<pre><code>A Camel\nTitle Case\nSnake Case\nFrom Camel Case String\nAbc Test\nExpect11\nParen Allow Not\nWhy Under Score Exists\nLast One On The List\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1980276,"reputation":8081,"user_id":1777072,"accept_rate":60,"display_name":"David Lavender"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1542643767,"creation_date":1542643767,"answer_id":53378600,"question_id":1086123,"body_markdown":"Using Spring&#39;s `StringUtils`:\r\n\r\n    org.springframework.util.StringUtils.capitalize(someText);\r\n\r\nIf you&#39;re already using Spring anyway, this avoids bringing in another framework.\r\n","title":"Is there a method for String conversion to Title Case?","body":"<p>Using Spring's <code>StringUtils</code>:</p>\n\n<pre><code>org.springframework.util.StringUtils.capitalize(someText);\n</code></pre>\n\n<p>If you're already using Spring anyway, this avoids bringing in another framework.</p>\n"},{"comments":[{"owner":{"account_id":6181284,"reputation":1107,"user_id":4816693,"display_name":"Marcus"},"score":1,"creation_date":1559128218,"post_id":56358436,"comment_id":99321886,"body_markdown":"This is not a valid answer as the OP asked for *builtin* function. See also the comment which addresses the hidden complexity behind this, i.e. i18n.","body":"This is not a valid answer as the OP asked for <i>builtin</i> function. See also the comment which addresses the hidden complexity behind this, i.e. i18n."}],"tags":[],"owner":{"account_id":16033712,"reputation":1,"user_id":11571952,"display_name":"Neha"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1559133080,"creation_date":1559125766,"answer_id":56358436,"question_id":1086123,"body_markdown":"\t\r\nThis should work:\r\n        \r\n\r\n    String str=&quot;i like pancakes&quot;;\r\n    String arr[]=str.split(&quot; &quot;);\r\n    String strNew=&quot;&quot;;\r\n    for(String str1:arr)\r\n    {\r\n    \tCharacter oldchar=str1.charAt(0);\r\n    \tCharacter newchar=Character.toUpperCase(str1.charAt(0));\r\n    \tstrNew=strNew+str1.replace(oldchar,newchar)+&quot; &quot;;\t\r\n   \t}\r\n    System.out.println(strNew);","title":"Is there a method for String conversion to Title Case?","body":"<p>This should work:</p>\n\n<pre><code>String str=\"i like pancakes\";\nString arr[]=str.split(\" \");\nString strNew=\"\";\nfor(String str1:arr)\n{\n    Character oldchar=str1.charAt(0);\n    Character newchar=Character.toUpperCase(str1.charAt(0));\n    strNew=strNew+str1.replace(oldchar,newchar)+\" \";    \n}\nSystem.out.println(strNew);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13778330,"reputation":41,"user_id":9944084,"display_name":"Abdulhamid Yusuf"},"comment_count":0,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1679120760,"creation_date":1559657824,"answer_id":56445782,"question_id":1086123,"body_markdown":"Use this method to convert a string to title case :\r\n\r\n    static String toTitleCase(String word) {\r\n        return Stream.of(word.split(&quot; &quot;))\r\n                .map(w -&gt; w.toUpperCase().charAt(0) + w.toLowerCase().substring(1))\r\n                .reduce((s, s2) -&gt; s + &quot; &quot; + s2)\r\n                .orElse(&quot;&quot;);\r\n    }","title":"Is there a method for String conversion to Title Case?","body":"<p>Use this method to convert a string to title case :</p>\n<pre><code>static String toTitleCase(String word) {\n    return Stream.of(word.split(&quot; &quot;))\n            .map(w -&gt; w.toUpperCase().charAt(0) + w.toLowerCase().substring(1))\n            .reduce((s, s2) -&gt; s + &quot; &quot; + s2)\n            .orElse(&quot;&quot;);\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":14402109,"reputation":11,"user_id":10403399,"display_name":"Parveen Sishodiya"},"score":0,"creation_date":1569950234,"post_id":58189450,"comment_id":102758671,"body_markdown":"Here i did&#39;t use trim method anywhere beacause in my case i was getting proper trimmed string.","body":"Here i did&#39;t use trim method anywhere beacause in my case i was getting proper trimmed string."}],"tags":[],"owner":{"account_id":14402109,"reputation":11,"user_id":10403399,"display_name":"Parveen Sishodiya"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1569949760,"creation_date":1569949760,"answer_id":58189450,"question_id":1086123,"body_markdown":"I had this problem and i searched for it\r\nthen i made my own method using some java keywords \r\njust need to pass String variable as parameter and get output as proper titled String.\r\n\r\n    public class Main\r\n    {\r\n      public static void main (String[]args)\r\n      {\r\n        String st = &quot;pARVeEN sISHOsIYA&quot;;\r\n        String mainn = getTitleCase (st);\r\n          System.out.println (mainn);\r\n      }\r\n      \r\n      \r\n      public static String getTitleCase(String input)\r\n      {\r\n        StringBuilder titleCase = new StringBuilder (input.length());\r\n        boolean hadSpace = false;\r\n    \tfor (char c:input.toCharArray ()){\r\n    \t\tif(Character.isSpaceChar(c)){\r\n    \t\t\thadSpace = true;\r\n    \t\t\ttitleCase.append (c);\r\n    \t\t\tcontinue;\r\n    \t    }\r\n    \t\tif(hadSpace){\r\n    \t\t\thadSpace = false;\r\n    \t\t\tc = Character.toUpperCase(c);\r\n    \t\t\ttitleCase.append (c);\r\n    \t\t}else{\r\n    \t\t\tc = Character.toLowerCase(c);\r\n    \t\t\ttitleCase.append (c);\r\n    \t\t}\r\n    \t}\r\n    \tString temp=titleCase.toString ();\r\n    \tStringBuilder titleCase1 = new StringBuilder (temp.length ());\r\n    \tint num=1;\r\n    \tfor (char c:temp.toCharArray ())\r\n    \t\t{   if(num==1)\r\n    \t\t\tc = Character.toUpperCase(c);\r\n    \t\t\ttitleCase1.append (c);\r\n    \t\t\tnum=0;\r\n    \t\t}\r\n    \t\treturn titleCase1.toString ();\r\n    \t}\r\n    }\r\n\r\n","title":"Is there a method for String conversion to Title Case?","body":"<p>I had this problem and i searched for it\nthen i made my own method using some java keywords \njust need to pass String variable as parameter and get output as proper titled String.</p>\n\n<pre><code>public class Main\n{\n  public static void main (String[]args)\n  {\n    String st = \"pARVeEN sISHOsIYA\";\n    String mainn = getTitleCase (st);\n      System.out.println (mainn);\n  }\n\n\n  public static String getTitleCase(String input)\n  {\n    StringBuilder titleCase = new StringBuilder (input.length());\n    boolean hadSpace = false;\n    for (char c:input.toCharArray ()){\n        if(Character.isSpaceChar(c)){\n            hadSpace = true;\n            titleCase.append (c);\n            continue;\n        }\n        if(hadSpace){\n            hadSpace = false;\n            c = Character.toUpperCase(c);\n            titleCase.append (c);\n        }else{\n            c = Character.toLowerCase(c);\n            titleCase.append (c);\n        }\n    }\n    String temp=titleCase.toString ();\n    StringBuilder titleCase1 = new StringBuilder (temp.length ());\n    int num=1;\n    for (char c:temp.toCharArray ())\n        {   if(num==1)\n            c = Character.toUpperCase(c);\n            titleCase1.append (c);\n            num=0;\n        }\n        return titleCase1.toString ();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":161801,"reputation":3081,"user_id":1537394,"accept_rate":18,"display_name":"Mladen Adamovic"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1585226909,"creation_date":1585226909,"answer_id":60867665,"question_id":1086123,"body_markdown":"It seems none of the answers format it in the actual title case: &quot;How to Land Your Dream Job&quot;, &quot;To Kill a Mockingbird&quot;, etc. so I&#39;ve made my own method. Works best for English languages texts. \r\n\r\n    private final static Set&lt;Character&gt; TITLE_CASE_DELIMITERS = new HashSet&lt;&gt;();\r\n    \r\n      static {\r\n        TITLE_CASE_DELIMITERS.add(&#39; &#39;);\r\n        TITLE_CASE_DELIMITERS.add(&#39;.&#39;);\r\n        TITLE_CASE_DELIMITERS.add(&#39;,&#39;);\r\n        TITLE_CASE_DELIMITERS.add(&#39;;&#39;);\r\n        TITLE_CASE_DELIMITERS.add(&#39;/&#39;);\r\n        TITLE_CASE_DELIMITERS.add(&#39;-&#39;);\r\n        TITLE_CASE_DELIMITERS.add(&#39;(&#39;);\r\n        TITLE_CASE_DELIMITERS.add(&#39;)&#39;);\r\n      }\r\n    \r\n      private final static Set&lt;String&gt; TITLE_SMALLCASED_WORDS = new HashSet&lt;&gt;();\r\n    \r\n      static {\r\n        TITLE_SMALLCASED_WORDS.add(&quot;a&quot;);\r\n        TITLE_SMALLCASED_WORDS.add(&quot;an&quot;);\r\n        TITLE_SMALLCASED_WORDS.add(&quot;the&quot;);\r\n        TITLE_SMALLCASED_WORDS.add(&quot;for&quot;);\r\n        TITLE_SMALLCASED_WORDS.add(&quot;in&quot;);\r\n        TITLE_SMALLCASED_WORDS.add(&quot;on&quot;);\r\n        TITLE_SMALLCASED_WORDS.add(&quot;of&quot;);\r\n        TITLE_SMALLCASED_WORDS.add(&quot;and&quot;);\r\n        TITLE_SMALLCASED_WORDS.add(&quot;but&quot;);\r\n        TITLE_SMALLCASED_WORDS.add(&quot;or&quot;);\r\n        TITLE_SMALLCASED_WORDS.add(&quot;nor&quot;);\r\n        TITLE_SMALLCASED_WORDS.add(&quot;to&quot;);\r\n      }\r\n    \r\n      public static String toCapitalizedWord(String oneWord) {\r\n        if (oneWord.length() &lt; 1) {\r\n          return oneWord.toUpperCase();\r\n        }\r\n        return &quot;&quot; + Character.toTitleCase(oneWord.charAt(0)) + oneWord.substring(1).toLowerCase();\r\n      }\r\n    \r\n      public static String toTitledWord(String oneWord) {\r\n        if (TITLE_SMALLCASED_WORDS.contains(oneWord.toLowerCase())) {\r\n          return oneWord.toLowerCase();\r\n        }\r\n        return toCapitalizedWord(oneWord);\r\n      }\r\n    \r\n      public static String toTitleCase(String str) {\r\n        StringBuilder result = new StringBuilder();\r\n        StringBuilder oneWord = new StringBuilder();\r\n    \r\n        char previousDelimiter = &#39;x&#39;;\r\n        /* on start, always move to upper case */\r\n        for (char c : str.toCharArray()) {\r\n          if (TITLE_CASE_DELIMITERS.contains(c)) {\r\n            if (previousDelimiter == &#39;-&#39; || previousDelimiter == &#39;x&#39;) {\r\n              result.append(toCapitalizedWord(oneWord.toString()));\r\n            } else {\r\n              result.append(toTitledWord(oneWord.toString()));\r\n            }\r\n            oneWord.setLength(0);\r\n            result.append(c);\r\n            previousDelimiter = c;\r\n          } else {\r\n            oneWord.append(c);\r\n          }\r\n        }\r\n        if (previousDelimiter == &#39;-&#39; || previousDelimiter == &#39;x&#39;) {\r\n          result.append(toCapitalizedWord(oneWord.toString()));\r\n        } else {\r\n          result.append(toTitledWord(oneWord.toString()));\r\n        }\r\n        return result.toString();\r\n      }\r\n    \r\n      public static void main(String[] args) {\r\n        System.out.println(toTitleCase(&quot;one year in paris&quot;));\r\n        System.out.println(toTitleCase(&quot;How to Land Your Dream Job&quot;));\r\n      }","title":"Is there a method for String conversion to Title Case?","body":"<p>It seems none of the answers format it in the actual title case: \"How to Land Your Dream Job\", \"To Kill a Mockingbird\", etc. so I've made my own method. Works best for English languages texts. </p>\n\n<pre><code>private final static Set&lt;Character&gt; TITLE_CASE_DELIMITERS = new HashSet&lt;&gt;();\n\n  static {\n    TITLE_CASE_DELIMITERS.add(' ');\n    TITLE_CASE_DELIMITERS.add('.');\n    TITLE_CASE_DELIMITERS.add(',');\n    TITLE_CASE_DELIMITERS.add(';');\n    TITLE_CASE_DELIMITERS.add('/');\n    TITLE_CASE_DELIMITERS.add('-');\n    TITLE_CASE_DELIMITERS.add('(');\n    TITLE_CASE_DELIMITERS.add(')');\n  }\n\n  private final static Set&lt;String&gt; TITLE_SMALLCASED_WORDS = new HashSet&lt;&gt;();\n\n  static {\n    TITLE_SMALLCASED_WORDS.add(\"a\");\n    TITLE_SMALLCASED_WORDS.add(\"an\");\n    TITLE_SMALLCASED_WORDS.add(\"the\");\n    TITLE_SMALLCASED_WORDS.add(\"for\");\n    TITLE_SMALLCASED_WORDS.add(\"in\");\n    TITLE_SMALLCASED_WORDS.add(\"on\");\n    TITLE_SMALLCASED_WORDS.add(\"of\");\n    TITLE_SMALLCASED_WORDS.add(\"and\");\n    TITLE_SMALLCASED_WORDS.add(\"but\");\n    TITLE_SMALLCASED_WORDS.add(\"or\");\n    TITLE_SMALLCASED_WORDS.add(\"nor\");\n    TITLE_SMALLCASED_WORDS.add(\"to\");\n  }\n\n  public static String toCapitalizedWord(String oneWord) {\n    if (oneWord.length() &lt; 1) {\n      return oneWord.toUpperCase();\n    }\n    return \"\" + Character.toTitleCase(oneWord.charAt(0)) + oneWord.substring(1).toLowerCase();\n  }\n\n  public static String toTitledWord(String oneWord) {\n    if (TITLE_SMALLCASED_WORDS.contains(oneWord.toLowerCase())) {\n      return oneWord.toLowerCase();\n    }\n    return toCapitalizedWord(oneWord);\n  }\n\n  public static String toTitleCase(String str) {\n    StringBuilder result = new StringBuilder();\n    StringBuilder oneWord = new StringBuilder();\n\n    char previousDelimiter = 'x';\n    /* on start, always move to upper case */\n    for (char c : str.toCharArray()) {\n      if (TITLE_CASE_DELIMITERS.contains(c)) {\n        if (previousDelimiter == '-' || previousDelimiter == 'x') {\n          result.append(toCapitalizedWord(oneWord.toString()));\n        } else {\n          result.append(toTitledWord(oneWord.toString()));\n        }\n        oneWord.setLength(0);\n        result.append(c);\n        previousDelimiter = c;\n      } else {\n        oneWord.append(c);\n      }\n    }\n    if (previousDelimiter == '-' || previousDelimiter == 'x') {\n      result.append(toCapitalizedWord(oneWord.toString()));\n    } else {\n      result.append(toTitledWord(oneWord.toString()));\n    }\n    return result.toString();\n  }\n\n  public static void main(String[] args) {\n    System.out.println(toTitleCase(\"one year in paris\"));\n    System.out.println(toTitleCase(\"How to Land Your Dream Job\"));\n  }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15351405,"reputation":29,"user_id":11075051,"display_name":"Reppin Frost"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1587726855,"creation_date":1587726855,"answer_id":61407064,"question_id":1086123,"body_markdown":"This is the simplest solution\r\n\r\n        static void title(String a,String b){\r\n        String ra = Character.toString(Character.toUpperCase(a.charAt(0)));\r\n        String rb = Character.toString(Character.toUpperCase(b.charAt(0)));\r\n        for(int i=1;i&lt;a.length();i++){\r\n            ra+=a.charAt(i);\r\n        }\r\n        for(int i=1;i&lt;b.length();i++){\r\n            rb+=b.charAt(i);\r\n        }\r\n        System.out.println(ra+&quot; &quot;+rb);","title":"Is there a method for String conversion to Title Case?","body":"<p>This is the simplest solution</p>\n\n<pre><code>    static void title(String a,String b){\n    String ra = Character.toString(Character.toUpperCase(a.charAt(0)));\n    String rb = Character.toString(Character.toUpperCase(b.charAt(0)));\n    for(int i=1;i&lt;a.length();i++){\n        ra+=a.charAt(i);\n    }\n    for(int i=1;i&lt;b.length();i++){\n        rb+=b.charAt(i);\n    }\n    System.out.println(ra+\" \"+rb);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"score":0,"creation_date":1672808191,"post_id":75000507,"comment_id":132354681,"body_markdown":"This throws away all spacing, turning it into UpperCamelCase, not Title Case.","body":"This throws away all spacing, turning it into UpperCamelCase, not Title Case."},{"owner":{"account_id":1164065,"reputation":53,"user_id":1143035,"display_name":"Thangaraj"},"score":0,"creation_date":1689090968,"post_id":75000507,"comment_id":135162756,"body_markdown":"Yes, just remove * in splitting string and add space between words","body":"Yes, just remove * in splitting string and add space between words"},{"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"score":0,"creation_date":1689097780,"post_id":75000507,"comment_id":135163999,"body_markdown":"Your latest updated version fixes the UpperCamelCase issue.  It works so long as you&#39;re OK normalizing all spaces to a single space.  If the exact spacing needs to be preserved (e.g. `&quot;    &quot;` should remain `&quot;    &quot;` and not become `&quot; &quot;`, or `&quot;\\n&quot;` should remain a newline instead of being converted to a space), then this solution couldn&#39;t be used as-is without modification.","body":"Your latest updated version fixes the UpperCamelCase issue.  It works so long as you&#39;re OK normalizing all spaces to a single space.  If the exact spacing needs to be preserved (e.g. <code>&quot;    &quot;</code> should remain <code>&quot;    &quot;</code> and not become <code>&quot; &quot;</code>, or <code>&quot;\\n&quot;</code> should remain a newline instead of being converted to a space), then this solution couldn&#39;t be used as-is without modification."},{"owner":{"account_id":1164065,"reputation":53,"user_id":1143035,"display_name":"Thangaraj"},"score":0,"creation_date":1689171713,"post_id":75000507,"comment_id":135176113,"body_markdown":"Yep it is too very long to reply, Validation should be done before passing values it is upto developer&#39;s work. Empty space is also a string, We cannot bound/restrict application/usage. That&#39;s why inbuilt methods are working for its need. Hence if you want to do your stuff there, you can :)","body":"Yep it is too very long to reply, Validation should be done before passing values it is upto developer&#39;s work. Empty space is also a string, We cannot bound/restrict application/usage. That&#39;s why inbuilt methods are working for its need. Hence if you want to do your stuff there, you can :)"},{"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"score":0,"creation_date":1689178726,"post_id":75000507,"comment_id":135177786,"body_markdown":"Sorry, I misread and thought this was splitting on runs of spaces (e.g. `\\\\s+`), not single spaces `\\\\s`.  Though it does still normalize spacing, which may or may not be desired (e.g. `abc\\tde\\tf` -&gt; `Abc De F` instead of `Abc\\tDe\\tF`.","body":"Sorry, I misread and thought this was splitting on runs of spaces (e.g. <code>\\\\s+</code>), not single spaces <code>\\\\s</code>.  Though it does still normalize spacing, which may or may not be desired (e.g. <code>abc\\tde\\tf</code> -&gt; <code>Abc De F</code> instead of <code>Abc\\tDe\\tF</code>."}],"tags":[],"owner":{"account_id":1164065,"reputation":53,"user_id":1143035,"display_name":"Thangaraj"},"comment_count":5,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689090859,"creation_date":1672800572,"answer_id":75000507,"question_id":1086123,"body_markdown":"**Without dependency -** \r\n\r\n     \r\n\t public static String capitalizeFirstLetter(String s) {\r\n\t\tif(s.trim().length()&gt;0){\r\n\t\t\treturn s.substring(0, 1).toUpperCase() + s.substring(1);\r\n\t\t}\r\n\t\treturn s;\r\n\t}\r\n\r\n\tpublic static String createTitleCase(String s) {\r\n\t\tif(s.trim().length()&gt;0){\r\n\t\t\tfinal StringBuilder sb =  new StringBuilder();\r\n\t\t\tString[] strArr = s.split(&quot;\\\\s&quot;);\r\n\t\t\tfor(int t =0; t &lt; strArr.length; t++) {\r\n\t\t\t\tsb.append(capitalizeFirstLetter(strArr[t]));\r\n\t\t\t\tif(t != strArr.length-1) {\r\n\t\t\t\t\tsb.append(&quot; &quot;);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\ts = sb.toString();\r\n\r\n\t\t\tsb.setLength(0);\r\n\t\t}\r\n\t\treturn s;\r\n\t}","title":"Is there a method for String conversion to Title Case?","body":"<p><strong>Without dependency -</strong></p>\n<pre><code> public static String capitalizeFirstLetter(String s) {\n    if(s.trim().length()&gt;0){\n        return s.substring(0, 1).toUpperCase() + s.substring(1);\n    }\n    return s;\n}\n\npublic static String createTitleCase(String s) {\n    if(s.trim().length()&gt;0){\n        final StringBuilder sb =  new StringBuilder();\n        String[] strArr = s.split(&quot;\\\\s&quot;);\n        for(int t =0; t &lt; strArr.length; t++) {\n            sb.append(capitalizeFirstLetter(strArr[t]));\n            if(t != strArr.length-1) {\n                sb.append(&quot; &quot;);\n            }\n        }\n\n        s = sb.toString();\n\n        sb.setLength(0);\n    }\n    return s;\n}\n</code></pre>\n"}],"owner":{"display_name":"Raji"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":157758,"favorite_count":0,"down_vote_count":1,"up_vote_count":128,"answer_count":22,"score":127,"last_activity_date":1689090859,"creation_date":1246871213,"question_id":1086123,"body_markdown":"Are there any built in methods available to convert a string into Title Case format\\?","title":"Is there a method for String conversion to Title Case?","body":"<p>Are there any built in methods available to convert a string into Title Case format?</p>\n"},{"tags":["java","spring","spring-boot","properties","localization"],"answers":[{"comments":[{"owner":{"account_id":4508336,"reputation":15533,"user_id":3665178,"accept_rate":73,"display_name":"Manuel Jordan"},"score":0,"creation_date":1689090881,"post_id":51008254,"comment_id":135162730,"body_markdown":"It is valid for `langs/messages` too. And even is possible change the expected file name how it is represented as the last term of the value, for example `langs.mensajes` or `langs/mensajes` ... IMHO is better use `/` in the path","body":"It is valid for <code>langs&#47;messages</code> too. And even is possible change the expected file name how it is represented as the last term of the value, for example <code>langs.mensajes</code> or <code>langs&#47;mensajes</code> ... IMHO is better use <code>&#47;</code> in the path"}],"tags":[],"owner":{"account_id":11726648,"reputation":19553,"user_id":8583692,"display_name":"Mahozad"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1689090797,"creation_date":1529829527,"answer_id":51008254,"question_id":51008253,"body_markdown":"Yes, it is possible. You just need to add this property in the `application.properties` or `application.yml` file:\r\n\r\n    spring.messages.basename=langs.messages\r\n\r\nHere *langs* is the name of the folder and *messages* is the base name of files.","title":"How to move messages.properties files into a separate folder?","body":"<p>Yes, it is possible. You just need to add this property in the <code>application.properties</code> or <code>application.yml</code> file:</p>\n<pre><code>spring.messages.basename=langs.messages\n</code></pre>\n<p>Here <em>langs</em> is the name of the folder and <em>messages</em> is the base name of files.</p>\n"}],"owner":{"account_id":11726648,"reputation":19553,"user_id":8583692,"display_name":"Mahozad"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":865,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":51008254,"answer_count":1,"score":0,"last_activity_date":1689090797,"creation_date":1529829527,"question_id":51008253,"body_markdown":"Is it possible to place **messages.properties** and all other locale-specific **messages_xx.properties** files in a sub-folder of the *resources* folder in a Spring Boot application?\r\nFor example to move them all in *langs* folder:\r\n\r\n    ─── &#128449; src\r\n       └─── &#128449; main\r\n           ├─── &#128449; java\r\n           └─── &#128449; resources\r\n               ├─── &#128449; langs\r\n               │   ├─── messages.properties\r\n               │   └─── messages_fa.properties\r\n               └─── ...","title":"How to move messages.properties files into a separate folder?","body":"<p>Is it possible to place <strong>messages.properties</strong> and all other locale-specific <strong>messages_xx.properties</strong> files in a sub-folder of the <em>resources</em> folder in a Spring Boot application?\nFor example to move them all in <em>langs</em> folder:</p>\n\n<pre><code>─── 🗁 src\n   └─── 🗁 main\n       ├─── 🗁 java\n       └─── 🗁 resources\n           ├─── 🗁 langs\n           │   ├─── messages.properties\n           │   └─── messages_fa.properties\n           └─── ...\n</code></pre>\n"},{"tags":["java","spring-boot","authentication","spring-security","oauth-2.0"],"answers":[{"tags":[],"owner":{"account_id":6822412,"reputation":1,"user_id":5249155,"display_name":"bs.mahi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689090483,"creation_date":1689090442,"answer_id":76663718,"question_id":76385848,"body_markdown":"In Spring Boot 3.1.1 release, they have changed oAuth2 implementation, here go with spring documentation for your [reference][1]\r\n\r\n\r\n  [1]: https://spring.io/blog/2023/05/24/spring-authorization-server-is-on-spring-initializr","title":"ClientAuthenticationMethod CLIENT_SECRET_POST not working as expected","body":"<p>In Spring Boot 3.1.1 release, they have changed oAuth2 implementation, here go with spring documentation for your <a href=\"https://spring.io/blog/2023/05/24/spring-authorization-server-is-on-spring-initializr\" rel=\"nofollow noreferrer\">reference</a></p>\n"}],"owner":{"account_id":1965077,"reputation":39,"user_id":1765577,"display_name":"vitor tavares"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":598,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689090483,"creation_date":1685655153,"question_id":76385848,"body_markdown":"Currently I&#180;m working on an authentication solution using spring, oauth client and webClient.\r\n\r\nI need send clientId and clientSecret inside the body without base64. \r\n\r\nHowever, CLIENT_SECRET_POST configuration keeps sending Basic authentication. Is there another way to implement client_secret_post ?\r\n\r\nConfiguration classes\r\n```\r\n    @Bean\r\n    SecurityFilterChain securityFilterChain(HttpSecurity httpSecurity) throws Exception {\r\n        httpSecurity.csrf().disable()\r\n                .authorizeRequests()\r\n                .antMatchers(&quot;/**&quot;).permitAll();\r\n        SecurityContextHolder.getContext().setAuthentication(null);\r\n        return httpSecurity.build();\r\n    }\r\n```\r\nWebClientConfiguration\r\n```\r\n    @Bean\r\n    ReactiveClientRegistrationRepository getRegistration(\r\n            @Value(&quot;${spring.security.oauth2.client.provider.clientName.token-uri}&quot;) String tokenUri,\r\n            @Value(&quot;${spring.security.oauth2.client.registration.clientName.client-id}&quot;) String clientId,\r\n            @Value(&quot;${spring.security.oauth2.client.registration.clientName.client-secret}&quot;) String clientSecret,\r\n            @Value(&quot;${spring.security.oauth2.client.registration.clientName.authorization-grant-type}&quot;) AuthorizationGrantType grantType\r\n\r\n    )\r\n    {\r\n        ClientRegistration registration = ClientRegistration\r\n                .withRegistrationId(&quot;clientName&quot;)\r\n                .clientAuthenticationMethod(ClientAuthenticationMethod.CLIENT_SECRET_POST)\r\n                .tokenUri(tokenUri)\r\n                .clientId(clientId)\r\n                .clientSecret(clientSecret)\r\n                .authorizationGrantType(grantType)\r\n                .build();\r\n        return new InMemoryReactiveClientRegistrationRepository(registration);\r\n    }\r\n\r\n    @Bean\r\n    WebClient webClient(OAuth2AuthorizedClientManager authorizedClientManager) {\r\n\r\n        ServletOAuth2AuthorizedClientExchangeFilterFunction filter = new ServletOAuth2AuthorizedClientExchangeFilterFunction(\r\n                authorizedClientManager);\r\n\r\n        filter.setDefaultClientRegistrationId(&quot;clientName&quot;);\r\n        return WebClient.builder().filter(filter)\r\n                .build();\r\n    }\r\n\r\n\r\n```\r\nWebClient request\r\n\r\n```\r\nwebClient.get()\r\n            .uri(uriBuilder -&gt; uriBuilder.path(URL_PATH +&quot;/account/&quot;+ id).build())\r\n            .retrieve()\r\n            .bodyToMono(AccountVO.class)\r\n            .block();\r\n```\r\n","title":"ClientAuthenticationMethod CLIENT_SECRET_POST not working as expected","body":"<p>Currently I´m working on an authentication solution using spring, oauth client and webClient.</p>\n<p>I need send clientId and clientSecret inside the body without base64.</p>\n<p>However, CLIENT_SECRET_POST configuration keeps sending Basic authentication. Is there another way to implement client_secret_post ?</p>\n<p>Configuration classes</p>\n<pre><code>    @Bean\n    SecurityFilterChain securityFilterChain(HttpSecurity httpSecurity) throws Exception {\n        httpSecurity.csrf().disable()\n                .authorizeRequests()\n                .antMatchers(&quot;/**&quot;).permitAll();\n        SecurityContextHolder.getContext().setAuthentication(null);\n        return httpSecurity.build();\n    }\n</code></pre>\n<p>WebClientConfiguration</p>\n<pre><code>    @Bean\n    ReactiveClientRegistrationRepository getRegistration(\n            @Value(&quot;${spring.security.oauth2.client.provider.clientName.token-uri}&quot;) String tokenUri,\n            @Value(&quot;${spring.security.oauth2.client.registration.clientName.client-id}&quot;) String clientId,\n            @Value(&quot;${spring.security.oauth2.client.registration.clientName.client-secret}&quot;) String clientSecret,\n            @Value(&quot;${spring.security.oauth2.client.registration.clientName.authorization-grant-type}&quot;) AuthorizationGrantType grantType\n\n    )\n    {\n        ClientRegistration registration = ClientRegistration\n                .withRegistrationId(&quot;clientName&quot;)\n                .clientAuthenticationMethod(ClientAuthenticationMethod.CLIENT_SECRET_POST)\n                .tokenUri(tokenUri)\n                .clientId(clientId)\n                .clientSecret(clientSecret)\n                .authorizationGrantType(grantType)\n                .build();\n        return new InMemoryReactiveClientRegistrationRepository(registration);\n    }\n\n    @Bean\n    WebClient webClient(OAuth2AuthorizedClientManager authorizedClientManager) {\n\n        ServletOAuth2AuthorizedClientExchangeFilterFunction filter = new ServletOAuth2AuthorizedClientExchangeFilterFunction(\n                authorizedClientManager);\n\n        filter.setDefaultClientRegistrationId(&quot;clientName&quot;);\n        return WebClient.builder().filter(filter)\n                .build();\n    }\n\n\n</code></pre>\n<p>WebClient request</p>\n<pre><code>webClient.get()\n            .uri(uriBuilder -&gt; uriBuilder.path(URL_PATH +&quot;/account/&quot;+ id).build())\n            .retrieve()\n            .bodyToMono(AccountVO.class)\n            .block();\n</code></pre>\n"},{"tags":["java","linux","windows","selenium-webdriver"],"answers":[{"tags":[],"owner":{"account_id":9243671,"reputation":1,"user_id":6866242,"display_name":"Ravi Prakash Jakkamputi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689089858,"creation_date":1689089858,"answer_id":76663647,"question_id":76653532,"body_markdown":"It seems there is issue with options in chromedriver for headless. \r\nCould you try the alternate method to set size\r\n\r\n    driver.manage().window().setSize(new Dimension(1600,1200));","title":"Selenium web element &quot;window-size=&quot; is not working in Automation with &quot;--headless=new&quot; chrome on Linux System","body":"<p>It seems there is issue with options in chromedriver for headless.\nCould you try the alternate method to set size</p>\n<pre><code>driver.manage().window().setSize(new Dimension(1600,1200));\n</code></pre>\n"}],"owner":{"account_id":21200527,"reputation":13,"user_id":15591279,"display_name":"Monita Shinkar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689089858,"creation_date":1688990506,"question_id":76653532,"body_markdown":"Observation: \r\n1. If we add any resolution like options.addArguments(&quot;window-size=1600,1200&quot;) it is not working for linux system.\r\n2. Default small resolution screens  like 800x600 are capture in screenshot folder with &quot;--headless=new&quot; chrome","title":"Selenium web element &quot;window-size=&quot; is not working in Automation with &quot;--headless=new&quot; chrome on Linux System","body":"<p>Observation:</p>\n<ol>\n<li>If we add any resolution like options.addArguments(&quot;window-size=1600,1200&quot;) it is not working for linux system.</li>\n<li>Default small resolution screens  like 800x600 are capture in screenshot folder with &quot;--headless=new&quot; chrome</li>\n</ol>\n"},{"tags":["java","jsp","tomcat","tomcat5.5","java-home"],"comments":[{"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"score":1,"creation_date":1288644272,"post_id":4072260,"comment_id":4377513,"body_markdown":"your exception now is completely different. It&#39;s for a new question. (but do some search before that ;) )","body":"your exception now is completely different. It&#39;s for a new question. (but do some search before that ;) )"},{"owner":{"account_id":173381,"reputation":2385,"user_id":402011,"accept_rate":96,"display_name":"LGAP"},"score":0,"creation_date":1288644385,"post_id":4072260,"comment_id":4377531,"body_markdown":"I rectified the issue... Thanks a lot for your support Bozho.. Sincere Thanks","body":"I rectified the issue... Thanks a lot for your support Bozho.. Sincere Thanks"},{"owner":{"account_id":2037921,"reputation":276,"user_id":1828726,"accept_rate":83,"display_name":"Daniel Yang"},"score":1,"creation_date":1581335950,"post_id":4072260,"comment_id":106385563,"body_markdown":"Check Tomcat Tutorial: https://tomcat.apache.org/tomcat-8.5-doc/windows-service-howto.html  ,    e.g. tomcat7  //US/Tomcat7  --JavaHome  D:\\Java8","body":"Check Tomcat Tutorial: <a href=\"https://tomcat.apache.org/tomcat-8.5-doc/windows-service-howto.html\" rel=\"nofollow noreferrer\">tomcat.apache.org/tomcat-8.5-doc/windows-service-howto.html</a>  ,    e.g. tomcat7  //US/Tomcat7  --JavaHome  D:\\Java8"}],"answers":[{"comments":[{"owner":{"account_id":173381,"reputation":2385,"user_id":402011,"accept_rate":96,"display_name":"LGAP"},"score":0,"creation_date":1288639189,"post_id":4072272,"comment_id":4376640,"body_markdown":"I could not find both these file catalina.sh / catalina.bat in my Tomact 5.5 folder","body":"I could not find both these file catalina.sh / catalina.bat in my Tomact 5.5 folder"},{"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"score":0,"creation_date":1288639315,"post_id":4072272,"comment_id":4376660,"body_markdown":"they are in `/bin`. But this is not the point. You have to set the _environment_ variables. Don&#39;t touch the catalina files.","body":"they are in <code>&#47;bin</code>. But this is not the point. You have to set the <i>environment</i> variables. Don&#39;t touch the catalina files."},{"owner":{"account_id":173381,"reputation":2385,"user_id":402011,"accept_rate":96,"display_name":"LGAP"},"score":0,"creation_date":1288639498,"post_id":4072272,"comment_id":4376688,"body_markdown":"You mean changing JVM `C:\\Program Files\\Java\\jre1.5.0_04\\bin\\client\\jvm.dll` from this?","body":"You mean changing JVM <code>C:\\Program Files\\Java\\jre1.5.0_04\\bin\\client\\jvm.dll</code> from this?"},{"owner":{"account_id":173381,"reputation":2385,"user_id":402011,"accept_rate":96,"display_name":"LGAP"},"score":0,"creation_date":1288639850,"post_id":4072272,"comment_id":4376739,"body_markdown":"JAVA_HOME is directing to version 1.6 only.. But when i used the code `out.println(&quot;Java Version = &quot;+ System.getProperty(&quot;java.version&quot;));` in my jsp code I got the version as 1.5.0_04 \\","body":"JAVA_HOME is directing to version 1.6 only.. But when i used the code <code>out.println(&quot;Java Version = &quot;+ System.getProperty(&quot;java.version&quot;));</code> in my jsp code I got the version as 1.5.0_04 \\"},{"owner":{"account_id":173381,"reputation":2385,"user_id":402011,"accept_rate":96,"display_name":"LGAP"},"score":0,"creation_date":1288641656,"post_id":4072272,"comment_id":4377070,"body_markdown":"JRE HOME is not set.. I cannot find it in the section where I find the JAVA_HOME","body":"JRE HOME is not set.. I cannot find it in the section where I find the JAVA_HOME"},{"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"score":0,"creation_date":1288641886,"post_id":4072272,"comment_id":4377114,"body_markdown":"How are you running tomcat? From command line? Service? Try from command-line, and check the value of JAVA_HOME (using echo %JAVA_HOME%).","body":"How are you running tomcat? From command line? Service? Try from command-line, and check the value of JAVA_HOME (using echo %JAVA_HOME%)."},{"owner":{"account_id":173381,"reputation":2385,"user_id":402011,"accept_rate":96,"display_name":"LGAP"},"score":0,"creation_date":1288642109,"post_id":4072272,"comment_id":4377148,"body_markdown":"I am running tomcat on command line only... `C:\\Program Files\\Java\\jdk1.6.0_10` This results on using the echo in command line.","body":"I am running tomcat on command line only... <code>C:\\Program Files\\Java\\jdk1.6.0_10</code> This results on using the echo in command line."},{"owner":{"account_id":173381,"reputation":2385,"user_id":402011,"accept_rate":96,"display_name":"LGAP"},"score":0,"creation_date":1288642171,"post_id":4072272,"comment_id":4377159,"body_markdown":"My actual requirement is described `http://stackoverflow.com/questions/4070443/error-stating-bad-version-in-class-file`here more clearly...","body":"My actual requirement is described <code>http:&#47;&#47;stackoverflow.com&#47;questions&#47;4070443&#47;error-stating-bad&zwnj;&#8203;-version-in-class-fi&zwnj;&#8203;le</code>here more clearly..."},{"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"score":2,"creation_date":1288642180,"post_id":4072272,"comment_id":4377161,"body_markdown":"and what is the output of running startup.bat ? There should be 4 lines showing different _HOME variables.","body":"and what is the output of running startup.bat ? There should be 4 lines showing different _HOME variables."},{"owner":{"account_id":173381,"reputation":2385,"user_id":402011,"accept_rate":96,"display_name":"LGAP"},"score":0,"creation_date":1288642343,"post_id":4072272,"comment_id":4377191,"body_markdown":"While running the tomcat5.exe file, the first few lines contains many locations out of which two locations are poiting to `C:\\Program Files\\Java\\jdk1.6.0_10` only","body":"While running the tomcat5.exe file, the first few lines contains many locations out of which two locations are poiting to <code>C:\\Program Files\\Java\\jdk1.6.0_10</code> only"},{"owner":{"account_id":173381,"reputation":2385,"user_id":402011,"accept_rate":96,"display_name":"LGAP"},"score":0,"creation_date":1288642398,"post_id":4072272,"comment_id":4377206,"body_markdown":"But I dont know how i got the version as 1.5.0_04 when i used `out.println(&quot;Java Version = &quot;+ System.getProperty(&quot;java.version&quot;));`","body":"But I dont know how i got the version as 1.5.0_04 when i used <code>out.println(&quot;Java Version = &quot;+ System.getProperty(&quot;java.version&quot;));</code>"},{"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"score":0,"creation_date":1288642918,"post_id":4072272,"comment_id":4377277,"body_markdown":"Try starting it with `startup.bat`. If it still does not work, look into setenv.bat, startup.bat and catalina.bat for 1.5","body":"Try starting it with <code>startup.bat</code>. If it still does not work, look into setenv.bat, startup.bat and catalina.bat for 1.5"},{"owner":{"account_id":173381,"reputation":2385,"user_id":402011,"accept_rate":96,"display_name":"LGAP"},"score":0,"creation_date":1288643608,"post_id":4072272,"comment_id":4377383,"body_markdown":"@Bozho Done with the version problem.. Kindly resolve my updated question.","body":"@Bozho Done with the version problem.. Kindly resolve my updated question."}],"tags":[],"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"comment_count":13,"down_vote_count":0,"up_vote_count":51,"is_accepted":true,"score":51,"last_activity_date":1288639681,"creation_date":1288638910,"answer_id":4072272,"question_id":4072260,"body_markdown":"When you open catalina.sh / catalina.bat, you can see :\n\n&gt; Environment Variable Prequisites\n&gt;\n&gt; JAVA_HOME       Must point at your Java Development Kit installation.\n\nSo, set your environment variable `JAVA_HOME` to point to Java 6. Also make sure `JRE_HOME` is pointing to the same target, if it is set.\n\nUpdate: since you are on Windows, &lt;a href=&quot;http://support.microsoft.com/kb/310519&quot;&gt;see here&lt;/a&gt; for how to manage your environment variables&lt;/a&gt;","title":"How to change Java version used by TOMCAT?","body":"<p>When you open catalina.sh / catalina.bat, you can see :</p>\n<blockquote>\n<p>Environment Variable Prequisites</p>\n<p>JAVA_HOME       Must point at your Java Development Kit installation.</p>\n</blockquote>\n<p>So, set your environment variable <code>JAVA_HOME</code> to point to Java 6. Also make sure <code>JRE_HOME</code> is pointing to the same target, if it is set.</p>\n<p>Update: since you are on Windows, <a href=\"http://support.microsoft.com/kb/310519\" rel=\"noreferrer\">see here</a> for how to manage your environment variables</p>\n"},{"comments":[{"owner":{"account_id":3333869,"reputation":1746,"user_id":2802063,"accept_rate":93,"display_name":"Aritra B"},"score":0,"creation_date":1385294162,"post_id":14764896,"comment_id":30075272,"body_markdown":"I have installed tomcat 6 using an .exe file [windows service] on windows 7 os. Thus I don&#39;t see the catalina.sh file in the bin directory for tomcat. Is there any other way, where I can change the jdk version mapped to such a tomcat installation?","body":"I have installed tomcat 6 using an .exe file [windows service] on windows 7 os. Thus I don&#39;t see the catalina.sh file in the bin directory for tomcat. Is there any other way, where I can change the jdk version mapped to such a tomcat installation?"}],"tags":[],"owner":{"account_id":1260243,"reputation":1132,"user_id":1796769,"display_name":"Jalkin"},"comment_count":1,"down_vote_count":1,"up_vote_count":14,"is_accepted":false,"score":13,"last_activity_date":1423220905,"creation_date":1360291510,"answer_id":14764896,"question_id":4072260,"body_markdown":"In Eclipse it is very easy to point Tomcat to a new JVM (in this example JRE6). My problem was I couldn&#39;t find where to do it. Here is the trick:\r\n\r\n 1. On the ECLIPSE top menu **FILE** pull down tab, select **NEW**, --&gt;**Other**\r\n 2. ...on the *New Server: Select A Wizard* window, select: **Server**-&gt; **Server**... click **NEXT**\r\n 3. . on the *New Server: Define a New Server* window, select **Apache&gt; Tomcat 7 Server**\r\n 4. ..now click the line in blue and underlined entitled: ***Configure Runtime Environments***\r\n 5. on the *Server Runtime Environments* window,\r\n 6. ..select **Apache**, expand it(click on the arrow to the left), select **TOMCAT v7.0**, and click **EDIT**.\r\n 7. you will see a window called ***EDIT SERVER RUNTIME ENVIRONMENT: TOMCAT SERVER***\r\n 8. On this screen there is a pulldown labeled **JREs**.\r\n 9. You should find your JRE listed like **JRE1.6.0.33**. If not use the **Installed JRE** button.\r\n 10. Select the desired JRE. Click the **FINISH** button.\r\n 11. Gracefully exit, in the *Server: Server Runtime Environments* window, click **OK**\r\n 12. in the *New Server: Define a new Server* window, hit **NEXT**\r\n 13. in the *New Server: Add and Remove* Window, select apps and install them on the server. \r\n 14. in the *New Server: Add and Remove* Window, click **Finish**\r\n\r\nThat&#39;s all. Interesting, only steps 7-10 seem to matter, and they will change the JRE used on all servers you have previously defined to use TOMCAT v7.0. The rest of the steps are just because I can&#39;t find any other way to get to the screen except by defining a new server. Does anyone else know an easier way?","title":"How to change Java version used by TOMCAT?","body":"<p>In Eclipse it is very easy to point Tomcat to a new JVM (in this example JRE6). My problem was I couldn't find where to do it. Here is the trick:</p>\n\n<ol>\n<li>On the ECLIPSE top menu <strong>FILE</strong> pull down tab, select <strong>NEW</strong>, --><strong>Other</strong></li>\n<li>...on the <em>New Server: Select A Wizard</em> window, select: <strong>Server</strong>-> <strong>Server</strong>... click <strong>NEXT</strong></li>\n<li>. on the <em>New Server: Define a New Server</em> window, select <strong>Apache> Tomcat 7 Server</strong></li>\n<li>..now click the line in blue and underlined entitled: <strong><em>Configure Runtime Environments</em></strong></li>\n<li>on the <em>Server Runtime Environments</em> window,</li>\n<li>..select <strong>Apache</strong>, expand it(click on the arrow to the left), select <strong>TOMCAT v7.0</strong>, and click <strong>EDIT</strong>.</li>\n<li>you will see a window called <strong><em>EDIT SERVER RUNTIME ENVIRONMENT: TOMCAT SERVER</em></strong></li>\n<li>On this screen there is a pulldown labeled <strong>JREs</strong>.</li>\n<li>You should find your JRE listed like <strong>JRE1.6.0.33</strong>. If not use the <strong>Installed JRE</strong> button.</li>\n<li>Select the desired JRE. Click the <strong>FINISH</strong> button.</li>\n<li>Gracefully exit, in the <em>Server: Server Runtime Environments</em> window, click <strong>OK</strong></li>\n<li>in the <em>New Server: Define a new Server</em> window, hit <strong>NEXT</strong></li>\n<li>in the <em>New Server: Add and Remove</em> Window, select apps and install them on the server. </li>\n<li>in the <em>New Server: Add and Remove</em> Window, click <strong>Finish</strong></li>\n</ol>\n\n<p>That's all. Interesting, only steps 7-10 seem to matter, and they will change the JRE used on all servers you have previously defined to use TOMCAT v7.0. The rest of the steps are just because I can't find any other way to get to the screen except by defining a new server. Does anyone else know an easier way?</p>\n"},{"comments":[{"owner":{"account_id":228633,"reputation":3657,"user_id":491066,"accept_rate":38,"display_name":"paiego"},"score":0,"creation_date":1385005133,"post_id":17413581,"comment_id":29969153,"body_markdown":"Not sure why the down-vote was made. A comment would be nice. Again this solution worked for me.","body":"Not sure why the down-vote was made. A comment would be nice. Again this solution worked for me."},{"owner":{"account_id":36833,"reputation":6264,"user_id":105137,"accept_rate":75,"display_name":"kostmo"},"score":1,"creation_date":1398441629,"post_id":17413581,"comment_id":35664601,"body_markdown":"On which distribution of Linux did that work?  I get `ls: cannot access /etc/sysconfig/tomcat7: No such file or directory`","body":"On which distribution of Linux did that work?  I get <code>ls: cannot access &#47;etc&#47;sysconfig&#47;tomcat7: No such file or directory</code>"},{"owner":{"account_id":228633,"reputation":3657,"user_id":491066,"accept_rate":38,"display_name":"paiego"},"score":0,"creation_date":1411100663,"post_id":17413581,"comment_id":40585617,"body_markdown":"Amazon Web Service AMI Linux","body":"Amazon Web Service AMI Linux"},{"owner":{"account_id":111356,"reputation":1379,"user_id":294214,"accept_rate":58,"display_name":"amertkara"},"score":2,"creation_date":1434717802,"post_id":17413581,"comment_id":49911656,"body_markdown":"@kostmo Check `/etc/default/tomcat7` (http://askubuntu.com/questions/154953/specify-jdk-for-tomcat7)","body":"@kostmo Check <code>&#47;etc&#47;default&#47;tomcat7</code> (<a href=\"http://askubuntu.com/questions/154953/specify-jdk-for-tomcat7\">askubuntu.com/questions/154953/specify-jdk-for-tomcat7</a>)"}],"tags":[],"owner":{"account_id":228633,"reputation":3657,"user_id":491066,"accept_rate":38,"display_name":"paiego"},"comment_count":4,"down_vote_count":2,"up_vote_count":6,"is_accepted":false,"score":4,"last_activity_date":1500914448,"creation_date":1372712262,"answer_id":17413581,"question_id":4072260,"body_markdown":"On Linux, Tomcat7 has a configuration file located at:\r\n\r\n    /etc/sysconfig/tomcat7\r\n\r\n... which is where server specific configurations should be made. You can set the JAVA_HOME env variable here w/o needing to create a profile.d/ script.\r\n\r\nThis worked for me.","title":"How to change Java version used by TOMCAT?","body":"<p>On Linux, Tomcat7 has a configuration file located at:</p>\n\n<pre><code>/etc/sysconfig/tomcat7\n</code></pre>\n\n<p>... which is where server specific configurations should be made. You can set the JAVA_HOME env variable here w/o needing to create a profile.d/ script.</p>\n\n<p>This worked for me.</p>\n"},{"tags":[],"owner":{"account_id":410277,"reputation":24594,"user_id":782034,"accept_rate":72,"display_name":"Nick Grealy"},"comment_count":0,"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1554987572,"creation_date":1374127197,"answer_id":17715628,"question_id":4072260,"body_markdown":"If you use the standard scripts to launch Tomcat (i.e. you haven&#39;t installed Tomcat as a windows service), you can use the setenv.bat file, to set your JRE_HOME version.\r\n\r\n&gt; On Windows, create the file `%CATALINA_BASE%\\bin\\setenv.bat`, with content:\r\n&gt; \r\n&gt; `set &quot;JRE_HOME=%ProgramFiles%\\Java\\jre1.6.0_20&quot;`\r\n&gt; \r\n&gt; `exit /b 0`\r\n\r\nAnd that should be it. \r\n\r\nYou can test this using %CATALINA_BASE%\\bin\\configtest.bat (Disclaimer: I&#39;ve only checked this with a Tomcat7 installation).\r\n\r\n**Further Reading:**\r\n\r\n - http://tomcat.apache.org/tomcat-5.5-doc/RUNNING.txt - Section:\r\n   &#39;Advanced Configuration - Multiple Tomcat Instances&#39;\r\n - http://tomcat.apache.org/tomcat-7.0-doc/RUNNING.txt - Section: &#39;(3.4)\r\n   Using the &quot;setenv&quot; script (optional, recommended)&#39;\r\n","title":"How to change Java version used by TOMCAT?","body":"<p>If you use the standard scripts to launch Tomcat (i.e. you haven't installed Tomcat as a windows service), you can use the setenv.bat file, to set your JRE_HOME version.</p>\n\n<blockquote>\n  <p>On Windows, create the file <code>%CATALINA_BASE%\\bin\\setenv.bat</code>, with content:</p>\n  \n  <p><code>set \"JRE_HOME=%ProgramFiles%\\Java\\jre1.6.0_20\"</code></p>\n  \n  <p><code>exit /b 0</code></p>\n</blockquote>\n\n<p>And that should be it. </p>\n\n<p>You can test this using %CATALINA_BASE%\\bin\\configtest.bat (Disclaimer: I've only checked this with a Tomcat7 installation).</p>\n\n<p><strong>Further Reading:</strong></p>\n\n<ul>\n<li><a href=\"http://tomcat.apache.org/tomcat-5.5-doc/RUNNING.txt\" rel=\"noreferrer\">http://tomcat.apache.org/tomcat-5.5-doc/RUNNING.txt</a> - Section:\n'Advanced Configuration - Multiple Tomcat Instances'</li>\n<li><a href=\"http://tomcat.apache.org/tomcat-7.0-doc/RUNNING.txt\" rel=\"noreferrer\">http://tomcat.apache.org/tomcat-7.0-doc/RUNNING.txt</a> - Section: '(3.4)\nUsing the \"setenv\" script (optional, recommended)'</li>\n</ul>\n"},{"comments":[{"owner":{"account_id":2016677,"reputation":851,"user_id":1803823,"display_name":"sartoris"},"score":0,"creation_date":1556663802,"post_id":30712629,"comment_id":98512520,"body_markdown":"FYI: tomcatw reads its properties from the registry - e.g.: HKEY_LOCAL_MACHINE\\SOFTWARE\\WOW6432Node\\Apache Software Foundation\\Procrun 2.0\\Tomcat7\\Parameters\\Java","body":"FYI: tomcatw reads its properties from the registry - e.g.: HKEY_LOCAL_MACHINE\\SOFTWARE\\WOW6432Node\\Apache Software Foundation\\Procrun 2.0\\Tomcat7\\Parameters\\Java"}],"tags":[],"owner":{"account_id":6434932,"reputation":667,"user_id":4986798,"display_name":"Michael"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1433775682,"creation_date":1433775682,"answer_id":30712629,"question_id":4072260,"body_markdown":"There are several good answers on here but I wanted to add one since it may be helpful for users like me who have Tomcat installed as a service on a Windows machine.\r\n\r\nOption 3 here: http://www.codejava.net/servers/tomcat/4-ways-to-change-jre-for-tomcat\r\n\r\nBasically, open tomcatw.exe and point Tomcat to the version of the JVM you need to use then restart the service. Ensure your deployed applications still work as well.","title":"How to change Java version used by TOMCAT?","body":"<p>There are several good answers on here but I wanted to add one since it may be helpful for users like me who have Tomcat installed as a service on a Windows machine.</p>\n\n<p>Option 3 here: <a href=\"http://www.codejava.net/servers/tomcat/4-ways-to-change-jre-for-tomcat\" rel=\"nofollow\">http://www.codejava.net/servers/tomcat/4-ways-to-change-jre-for-tomcat</a></p>\n\n<p>Basically, open tomcatw.exe and point Tomcat to the version of the JVM you need to use then restart the service. Ensure your deployed applications still work as well.</p>\n"},{"comments":[{"owner":{"account_id":1786737,"reputation":1906,"user_id":1628065,"accept_rate":86,"display_name":"drtf"},"score":0,"creation_date":1470581551,"post_id":31669132,"comment_id":64997930,"body_markdown":"For some reason I had the default Java path checked off","body":"For some reason I had the default Java path checked off"}],"tags":[],"owner":{"account_id":3062862,"reputation":815,"user_id":2595197,"accept_rate":41,"display_name":"Hazim Eid"},"comment_count":1,"down_vote_count":2,"up_vote_count":25,"is_accepted":false,"score":23,"last_activity_date":1484118437,"creation_date":1438065928,"answer_id":31669132,"question_id":4072260,"body_markdown":"**You can change the JDK or JRE location using the following steps:**\r\n\r\n 1. open the **terminal** or **cmd**.&lt;br &gt;\r\n 2. go to the `[tomcat-home]\\bin` directory.\r\n  &lt;br&gt;    ex: `c:\\tomcat8\\bin`\r\n 3. write the following\r\n    command: `Tomcat8W //ES//Tomcat8`\r\n 4. will open dialog, select the **java tab(top pane)**.\r\n 5. change the Java virtual Machine value.\r\n 6. click **OK**.\r\n\r\n***note:***\r\nin Apache TomEE same steps, but **step (3)** the command must be: `TomEE //ES`","title":"How to change Java version used by TOMCAT?","body":"<p><strong>You can change the JDK or JRE location using the following steps:</strong></p>\n\n<ol>\n<li>open the <strong>terminal</strong> or <strong>cmd</strong>.<br ></li>\n<li>go to the <code>[tomcat-home]\\bin</code> directory.\n<br>    ex: <code>c:\\tomcat8\\bin</code></li>\n<li>write the following\ncommand: <code>Tomcat8W //ES//Tomcat8</code></li>\n<li>will open dialog, select the <strong>java tab(top pane)</strong>.</li>\n<li>change the Java virtual Machine value.</li>\n<li>click <strong>OK</strong>.</li>\n</ol>\n\n<p><strong><em>note:</em></strong>\nin Apache TomEE same steps, but <strong>step (3)</strong> the command must be: <code>TomEE //ES</code></p>\n"},{"tags":[],"owner":{"account_id":7033497,"reputation":11,"user_id":5388423,"display_name":"test"},"comment_count":0,"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1443523941,"creation_date":1443523941,"answer_id":32842037,"question_id":4072260,"body_markdown":"test\r\nopen the termenal or cmd.\r\ngo to the [tomcat-home]\\bin directory. \r\nex: c:\\tomcat8\\bin\r\nwrite the following command: Tomcat8W //ES//Tomcat8\r\nwill open dialog, select the java tap(top tap).\r\nchange the Java virtual Machine value.","title":"How to change Java version used by TOMCAT?","body":"<p>test\nopen the termenal or cmd.\ngo to the [tomcat-home]\\bin directory. \nex: c:\\tomcat8\\bin\nwrite the following command: Tomcat8W //ES//Tomcat8\nwill open dialog, select the java tap(top tap).\nchange the Java virtual Machine value.</p>\n"},{"tags":[],"owner":{"account_id":16856943,"reputation":57,"user_id":12188660,"display_name":"mitesh keswani"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689089619,"creation_date":1689089619,"answer_id":76663614,"question_id":4072260,"body_markdown":"For me, it got set from File &gt; Project Structure &gt; Project &gt; sdk to right version and then apply and ok in Intellij from where I was running my tomcat.","title":"How to change Java version used by TOMCAT?","body":"<p>For me, it got set from File &gt; Project Structure &gt; Project &gt; sdk to right version and then apply and ok in Intellij from where I was running my tomcat.</p>\n"}],"owner":{"account_id":173381,"reputation":2385,"user_id":402011,"accept_rate":96,"display_name":"LGAP"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":259401,"favorite_count":0,"down_vote_count":1,"up_vote_count":64,"accepted_answer_id":4072272,"answer_count":8,"score":63,"last_activity_date":1689089619,"creation_date":1288638754,"question_id":4072260,"body_markdown":"I have Java 1.6 and Tomcat 5.5 installed on my system.\r\n\r\nBut Tomcat 5.5 accesses Java 1.5 and hence as the outcome I get the error `Bad version number in .class file` while executing java code with JSP.\r\n\r\nHow can I change the Tomcat version to Java 1.6?\r\n\r\n**UPDATE**\r\n\r\nI tried changing the JVM that the tomcat5w.exe is pointing to the version 1.6 and now I am out of the `Bad version in .class file` error. But now, I get the following error.\r\n\r\n    exception\r\n\r\n    org.apache.jasper.JasperException\r\n\torg.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:498)\r\n\torg.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:411)\r\n\torg.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:308)\r\n\torg.apache.jasper.servlet.JspServlet.service(JspServlet.java:259)\r\n\tjavax.servlet.http.HttpServlet.service(HttpServlet.java:729)\r\n\r\n    root cause\r\n\r\n    java.lang.NullPointerException\r\n\tmyfirst.SearchLink.checkURL(SearchLink.java:20)\r\n\torg.apache.jsp.Test_jsp._jspService(Test_jsp.java:52)\r\n\torg.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:98)\r\n\tjavax.servlet.http.HttpServlet.service(HttpServlet.java:729)\r\n\torg.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:369)\r\n\torg.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:308)\r\n\torg.apache.jasper.servlet.JspServlet.service(JspServlet.java:259)\r\n\tjavax.servlet.http.HttpServlet.service(HttpServlet.java:729)\r\n\r\nWhat might be the root cause?","title":"How to change Java version used by TOMCAT?","body":"<p>I have Java 1.6 and Tomcat 5.5 installed on my system.</p>\n\n<p>But Tomcat 5.5 accesses Java 1.5 and hence as the outcome I get the error <code>Bad version number in .class file</code> while executing java code with JSP.</p>\n\n<p>How can I change the Tomcat version to Java 1.6?</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>I tried changing the JVM that the tomcat5w.exe is pointing to the version 1.6 and now I am out of the <code>Bad version in .class file</code> error. But now, I get the following error.</p>\n\n<pre><code>exception\n\norg.apache.jasper.JasperException\norg.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:498)\norg.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:411)\norg.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:308)\norg.apache.jasper.servlet.JspServlet.service(JspServlet.java:259)\njavax.servlet.http.HttpServlet.service(HttpServlet.java:729)\n\nroot cause\n\njava.lang.NullPointerException\nmyfirst.SearchLink.checkURL(SearchLink.java:20)\norg.apache.jsp.Test_jsp._jspService(Test_jsp.java:52)\norg.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:98)\njavax.servlet.http.HttpServlet.service(HttpServlet.java:729)\norg.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:369)\norg.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:308)\norg.apache.jasper.servlet.JspServlet.service(JspServlet.java:259)\njavax.servlet.http.HttpServlet.service(HttpServlet.java:729)\n</code></pre>\n\n<p>What might be the root cause?</p>\n"},{"tags":["java","sql","spring","spring-boot"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689088171,"post_id":76663343,"comment_id":135162093,"body_markdown":"`TO_DATE` doesn&#39;t exist in H2. You&#39;ll need to use `CAST` or string literal in ISO date format","body":"<code>TO_DATE</code> doesn&#39;t exist in H2. You&#39;ll need to use <code>CAST</code> or string literal in ISO date format"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689088453,"post_id":76663343,"comment_id":135162163,"body_markdown":"`PARSEDATETIME(&#39;1-5-1981&#39;, &#39;dd-MM-yyyy&#39;)` can be tried too","body":"<code>PARSEDATETIME(&#39;1-5-1981&#39;, &#39;dd-MM-yyyy&#39;)</code> can be tried too"}],"answers":[{"tags":[],"owner":{"account_id":28969902,"reputation":61,"user_id":22190461,"display_name":"Guillem Chesa"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689089290,"creation_date":1689089290,"answer_id":76663578,"question_id":76663343,"body_markdown":"`TO_DATE` is not supported by every database vendor and H2 is one of them. To insert date values in a database using H2 you can just pass a String literal formatted with ISO format `YYYY-MM-DD`. So the query should look like:\r\n\r\n```\r\nINSERT INTO EMPLOYEE VALUES (7839, &#39;JOHN&#39;, &#39;KING&#39;, &#39;MARIA&#39;, &#39;PRESIDENT&#39;, NULL, &#39;1981-11-17&#39;, 5000, null);\r\nINSERT INTO EMPLOYEE VALUES (7698, &#39;JOHN&#39;, &#39;BLAKE&#39;, &#39;MARIA&#39;, &#39;MANAGER&#39;, 7839, &#39;1981-05-01&#39;, 2850, 30);\r\n```\r\n\r\nIf you use the `toString()` method on a `LocalDate` object it will be outputted exatly as needed in this case. So when you build the SQL query just pass that String, instead of a LocalDate object.","title":"How to fix an error creating bean with name &#39;dataSourceScriptDatabaseInitializer&#39;? Function &quot;TO_DATE&quot; not found","body":"<p><code>TO_DATE</code> is not supported by every database vendor and H2 is one of them. To insert date values in a database using H2 you can just pass a String literal formatted with ISO format <code>YYYY-MM-DD</code>. So the query should look like:</p>\n<pre><code>INSERT INTO EMPLOYEE VALUES (7839, 'JOHN', 'KING', 'MARIA', 'PRESIDENT', NULL, '1981-11-17', 5000, null);\nINSERT INTO EMPLOYEE VALUES (7698, 'JOHN', 'BLAKE', 'MARIA', 'MANAGER', 7839, '1981-05-01', 2850, 30);\n</code></pre>\n<p>If you use the <code>toString()</code> method on a <code>LocalDate</code> object it will be outputted exatly as needed in this case. So when you build the SQL query just pass that String, instead of a LocalDate object.</p>\n"}],"owner":{"account_id":28360587,"reputation":13,"user_id":21690681,"display_name":"Spiritus"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":335,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1689089290,"creation_date":1689087711,"question_id":76663343,"body_markdown":"I have data.sql, but I may not change it.\r\n\r\n    INSERT INTO EMPLOYEE VALUES (7839, &#39;JOHN&#39;, &#39;KING&#39;, &#39;MARIA&#39;, &#39;PRESIDENT&#39;, NULL, TO_DATE(&#39;17-11-1981&#39;, &#39;DD-MM-YYYY&#39;), 5000, null);\r\n    INSERT INTO EMPLOYEE VALUES (7698, &#39;JOHN&#39;, &#39;BLAKE&#39;, &#39;MARIA&#39;, &#39;MANAGER&#39;, 7839, TO_DATE(&#39;1-5-1981&#39;, &#39;DD-MM-YYYY&#39;), 2850, 30);\r\n and I have \r\n\r\n    @Entity\r\n    @Table(name =&quot;employee&quot;)\r\n    public class Employee {\r\n        @Id\r\n        @GeneratedValue(strategy =  GenerationType.IDENTITY)\r\n        @Column(name = &quot;id&quot;)\r\n        private Integer id;\r\n        @Column(name = &quot;hiredate&quot;)\r\n        private LocalDate hired;\r\n      // constructors, getters, setters\r\nwhen I run my MvcApplication I have an error:\r\n\r\n    org.springframework.beans.factory.BeanCreationException: Error creating bean with \r\n    name &#39;dataSourceScriptDatabaseInitializer&#39; defined in class path resource \r\n    [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]:\r\n    Invocation of init method failed; \r\n    nested exception is org.springframework.jdbc.datasource.init.ScriptStatementFailedException:\r\n    Failed to execute SQL script statement #5 of URL \r\n    [file:/Users/dh/IdeaProjectsE/employee-catalog/target/classes/data.sql]: \r\n    INSERT INTO EMPLOYEE VALUES (7839, &#39;JOHN&#39;, &#39;KING&#39;, &#39;MARIA&#39;, &#39;PRESIDENT&#39;, NULL, TO_DATE(&#39;17-11-1981&#39;, &#39;DD-MM-YYYY&#39;), 5000, null); nested exception is org.h2.jdbc.JdbcSQLSyntaxErrorException: Function &quot;TO_DATE&quot; not found; SQL statement:\r\n    INSERT INTO EMPLOYEE VALUES (7839, &#39;JOHN&#39;, &#39;KING&#39;, &#39;MARIA&#39;, &#39;PRESIDENT&#39;, NULL, TO_DATE(&#39;17-11-1981&#39;, &#39;DD-MM-YYYY&#39;), 5000, null) [90022-214]\r\nWhat am I doing wrong? How can I fix this?\r\n\r\nAlso I have application.properties\r\n\r\n    server.port=8080\r\n\r\n    spring.datasource.url=jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1\r\n    spring.datasource.driverClassName=org.h2.Driver\r\n    spring.datasource.username=sa\r\n    spring.datasource.password=\r\n\r\n    spring.h2.console.enabled=true\r\n    spring.h2.console.path=/h2\r\n\r\n    spring.jpa.database-platform=org.hibernate.dialect.H2Dialectspring.jpa.generate-ddl=false\r\n    spring.jpa.hibernate.ddl-auto=\r\n    spring.jpa.show-sql=true","title":"How to fix an error creating bean with name &#39;dataSourceScriptDatabaseInitializer&#39;? Function &quot;TO_DATE&quot; not found","body":"<p>I have data.sql, but I may not change it.</p>\n<pre><code>INSERT INTO EMPLOYEE VALUES (7839, 'JOHN', 'KING', 'MARIA', 'PRESIDENT', NULL, TO_DATE('17-11-1981', 'DD-MM-YYYY'), 5000, null);\nINSERT INTO EMPLOYEE VALUES (7698, 'JOHN', 'BLAKE', 'MARIA', 'MANAGER', 7839, TO_DATE('1-5-1981', 'DD-MM-YYYY'), 2850, 30);\n</code></pre>\n<p>and I have</p>\n<pre><code>@Entity\n@Table(name =&quot;employee&quot;)\npublic class Employee {\n    @Id\n    @GeneratedValue(strategy =  GenerationType.IDENTITY)\n    @Column(name = &quot;id&quot;)\n    private Integer id;\n    @Column(name = &quot;hiredate&quot;)\n    private LocalDate hired;\n  // constructors, getters, setters\n</code></pre>\n<p>when I run my MvcApplication I have an error:</p>\n<pre><code>org.springframework.beans.factory.BeanCreationException: Error creating bean with \nname 'dataSourceScriptDatabaseInitializer' defined in class path resource \n[org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]:\nInvocation of init method failed; \nnested exception is org.springframework.jdbc.datasource.init.ScriptStatementFailedException:\nFailed to execute SQL script statement #5 of URL \n[file:/Users/dh/IdeaProjectsE/employee-catalog/target/classes/data.sql]: \nINSERT INTO EMPLOYEE VALUES (7839, 'JOHN', 'KING', 'MARIA', 'PRESIDENT', NULL, TO_DATE('17-11-1981', 'DD-MM-YYYY'), 5000, null); nested exception is org.h2.jdbc.JdbcSQLSyntaxErrorException: Function &quot;TO_DATE&quot; not found; SQL statement:\nINSERT INTO EMPLOYEE VALUES (7839, 'JOHN', 'KING', 'MARIA', 'PRESIDENT', NULL, TO_DATE('17-11-1981', 'DD-MM-YYYY'), 5000, null) [90022-214]\n</code></pre>\n<p>What am I doing wrong? How can I fix this?</p>\n<p>Also I have application.properties</p>\n<pre><code>server.port=8080\n\nspring.datasource.url=jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1\nspring.datasource.driverClassName=org.h2.Driver\nspring.datasource.username=sa\nspring.datasource.password=\n\nspring.h2.console.enabled=true\nspring.h2.console.path=/h2\n\nspring.jpa.database-platform=org.hibernate.dialect.H2Dialectspring.jpa.generate-ddl=false\nspring.jpa.hibernate.ddl-auto=\nspring.jpa.show-sql=true\n</code></pre>\n"},{"tags":["java","windows","jna"],"comments":[{"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"score":1,"creation_date":1478879859,"post_id":40551661,"comment_id":68341663,"body_markdown":"You must use a 32-bit JRE to execute 32-bit code on 64-bit operating systems.","body":"You must use a 32-bit JRE to execute 32-bit code on 64-bit operating systems."},{"owner":{"account_id":3858478,"reputation":7458,"user_id":3196753,"display_name":"tresf"},"score":0,"creation_date":1569256535,"post_id":40551661,"comment_id":102529540,"body_markdown":"`Wow64DisableWow64FsRedirection` is for the other way around (when a 32-bit application is forced to talk to the 32-bit file system, such as `C:\\Program Files (x86)`, `C:\\System\\ SysWOW64`.  You&#39;re doing the exact opposite, which is as simple as starting the 32-bit process by it&#39;s absolute path.  The correct solution is @edwin-buck&#39;s below.   If you&#39;re not sure how to test if you&#39;re in a 64-bit environment, check `System.getenv(&quot;ProgramFiles(x86)&quot;);`","body":"<code>Wow64DisableWow64FsRedirection</code> is for the other way around (when a 32-bit application is forced to talk to the 32-bit file system, such as <code>C:\\Program Files (x86)</code>, <code>C:\\System\\ SysWOW64</code>.  You&#39;re doing the exact opposite, which is as simple as starting the 32-bit process by it&#39;s absolute path.  The correct solution is @edwin-buck&#39;s below.   If you&#39;re not sure how to test if you&#39;re in a 64-bit environment, check <code>System.getenv(&quot;ProgramFiles(x86)&quot;);</code>"}],"answers":[{"comments":[{"owner":{"display_name":"user6828073"},"score":0,"creation_date":1478881903,"post_id":40551794,"comment_id":68342865,"body_markdown":"your suggestion still is executing 64 bit version of &quot;notepad.exe&quot; :-(","body":"your suggestion still is executing 64 bit version of &quot;notepad.exe&quot; :-("},{"owner":{"account_id":114991,"reputation":69738,"user_id":302139,"accept_rate":75,"display_name":"Edwin Buck"},"score":0,"creation_date":1478882396,"post_id":40551794,"comment_id":68343125,"body_markdown":"@Saulo Apparently the 32 bit executables are not stored in System32, but in SysWOW64.  That&#39;s a naming convention that only programmers in Redmond would love.","body":"@Saulo Apparently the 32 bit executables are not stored in System32, but in SysWOW64.  That&#39;s a naming convention that only programmers in Redmond would love."},{"owner":{"account_id":476140,"reputation":35789,"user_id":886887,"accept_rate":94,"display_name":"Harry Johnston"},"score":1,"creation_date":1478907431,"post_id":40551794,"comment_id":68353630,"body_markdown":"It makes sense from a purely technical perspective, for what little that&#39;s worth.  (Plus changing the name of the Windows NT system folder would probably have caused all sorts of backwards compatibility issues.)","body":"It makes sense from a purely technical perspective, for what little that&#39;s worth.  (Plus changing the name of the Windows NT system folder would probably have caused all sorts of backwards compatibility issues.)"}],"tags":[],"owner":{"account_id":114991,"reputation":69738,"user_id":302139,"accept_rate":75,"display_name":"Edwin Buck"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1478882339,"creation_date":1478880182,"answer_id":40551794,"question_id":40551661,"body_markdown":"--- Updated because Windows is well, Windows ---\r\n\r\n32 bit executables are in SysWOW64, while 64 bit executables are in System32.  Apparently this bizarre choice makes sense to the people up in Redmond.\r\n\r\n--- Rest of post follows, with updates ---\r\n\r\nYou are asking a 64 bit program to load and interface with 32 bit executables.  The &quot;compatibility&quot; for 32 bit executables doesn&#39;t extend to linking them to 64 bit programs.\r\n\r\nYou need to launch a 32 bit JVM so the JNI interface will match the desired environment.\r\n\r\nHowever, your example might not even need JNI.  If you are launching 32-bit standalone programs, then you do not need to use JNI.  Instead you could use ProcessBuilder and pass the command line arguments to the shell to effectively ensure you launch the 32 bit executable.\r\n\r\n    ProcessBuilder pb = new ProcessBuider(String.format(&quot;%s\\\\SysWOW64\\\\notepad.exe&quot;, System.getEnv(&quot;WINDIR&quot;));\r\n    Process process = pb.start();\r\n\r\nJNI is for when you need to link the JVM to native libraries, it is not the preferred way to launch native applications.  `ProcessBuilder` is what you prefer to launch native applications.","title":"JNA: How use CreateProcess for execute 32 bit version of a system native app in 64 bit systems?","body":"<p>--- Updated because Windows is well, Windows ---</p>\n\n<p>32 bit executables are in SysWOW64, while 64 bit executables are in System32.  Apparently this bizarre choice makes sense to the people up in Redmond.</p>\n\n<p>--- Rest of post follows, with updates ---</p>\n\n<p>You are asking a 64 bit program to load and interface with 32 bit executables.  The \"compatibility\" for 32 bit executables doesn't extend to linking them to 64 bit programs.</p>\n\n<p>You need to launch a 32 bit JVM so the JNI interface will match the desired environment.</p>\n\n<p>However, your example might not even need JNI.  If you are launching 32-bit standalone programs, then you do not need to use JNI.  Instead you could use ProcessBuilder and pass the command line arguments to the shell to effectively ensure you launch the 32 bit executable.</p>\n\n<pre><code>ProcessBuilder pb = new ProcessBuider(String.format(\"%s\\\\SysWOW64\\\\notepad.exe\", System.getEnv(\"WINDIR\"));\nProcess process = pb.start();\n</code></pre>\n\n<p>JNI is for when you need to link the JVM to native libraries, it is not the preferred way to launch native applications.  <code>ProcessBuilder</code> is what you prefer to launch native applications.</p>\n"},{"comments":[{"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"score":2,"creation_date":1478883574,"post_id":40552013,"comment_id":68343769,"body_markdown":"You could have un-installed the 64-bit version, and installed the 32-bit JRE version for similar results with an easier to support solution.","body":"You could have un-installed the 64-bit version, and installed the 32-bit JRE version for similar results with an easier to support solution."},{"owner":{"display_name":"user6828073"},"score":0,"creation_date":1478885309,"post_id":40552013,"comment_id":68344652,"body_markdown":"Now i want know, if today 32 bit version of JVM is present on great part of pcs ( with 32 or 64 bit system installed ). Or on  64 bit system usually is JVM 64 bit?","body":"Now i want know, if today 32 bit version of JVM is present on great part of pcs ( with 32 or 64 bit system installed ). Or on  64 bit system usually is JVM 64 bit?"},{"owner":{"account_id":1975576,"reputation":20799,"user_id":1773434,"accept_rate":100,"display_name":"Govind Parmar"},"score":1,"creation_date":1479246881,"post_id":40552013,"comment_id":68475002,"body_markdown":"@Saulo sorry for the late answer but you really shouldn&#39;t make decisions based on what you *expect* to find on someone&#39;s computer; you should find out what they have installed and then perform the appropriate actions for each use case","body":"@Saulo sorry for the late answer but you really shouldn&#39;t make decisions based on what you <i>expect</i> to find on someone&#39;s computer; you should find out what they have installed and then perform the appropriate actions for each use case"}],"tags":[],"owner":{"account_id":1975576,"reputation":20799,"user_id":1773434,"accept_rate":100,"display_name":"Govind Parmar"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689089152,"creation_date":1478880879,"answer_id":40552013,"question_id":40551661,"body_markdown":"This may not be appropriate for your set-up depending on what your needs are, but at my company we had this problem when we moved to a 64-bit operating system for our terminal server and we had an in-house Java application that required the 32-bit version of Java to run properly.\r\n\r\nMy solution was to go into the 64-bit java directory, rename `java.exe` and `javaw.exe` to `java.exe.bak` and `javaw.exe.bak`, respectively, then replace those files with stubs that launched the 32-bit version of Java instead.  This was acceptable in our case since we only have one application that uses Java and we did not foresee ourselves writing any more applications in Java going forward:\r\n\r\n\t\r\n\t// Stub file that launches the 32-bit java.exe\r\n\t// Intended to replace the 64-bit java executable to ensure that (OUR APPLICATION) which only works with 32-bit java works correctly\r\n\t// Author: Govind Parmar\r\n\r\n\t#include &lt;Windows.h&gt;\r\n\t#include &lt;strsafe.h&gt;\r\n\r\n\tHRESULT cat_argv(int argc, WCHAR *argv[], WCHAR *argstr, int cchargstr)\r\n\t{\r\n\t\tint i;\r\n\t\tHRESULT hr;\r\n\t\tZeroMemory(argstr, sizeof(WCHAR) * cchargstr);\r\n\r\n\t\t// first arg is program name; start with i=1 instead of 0\r\n\t\tfor (i = 1; i &lt; argc; i++)\r\n\t\t{\r\n            // Space out arguments\r\n\t\t\thr = StringCchCatW(argstr, cchargstr, L&quot; &quot;);\r\n\t\t\tif (FAILED(hr)) break;\r\n\t\t\t\r\n\t\t\thr = StringCchCatW(argstr, cchargstr, argv[i]);\r\n\t\t\tif (FAILED(hr)) break;\r\n\r\n\t\t}\r\n\t\treturn hr;\r\n\t}\r\n\r\n\tint wmain(int argc, WCHAR *argv[])\r\n\t{\r\n\t\tSTARTUPINFO si;\r\n\t\tPROCESS_INFORMATION pi;\r\n\t\tWCHAR args[8192];\r\n\t\tDWORD dwExit;\r\n\t\tZeroMemory(&amp;si, sizeof(STARTUPINFO));\r\n\t\tZeroMemory(&amp;pi, sizeof(PROCESS_INFORMATION));\r\n\r\n\t\tsi.cb = sizeof(STARTUPINFO);\r\n\t\tif (FAILED(cat_argv(argc, argv, args, 8192)))\r\n\t\t{\r\n\t\t\t_putws(L&quot;Could not concatenate argument string!&quot;);\r\n\t\t\treturn 0;\r\n\t\t}\r\n\r\n\t\tCreateProcess(L&quot;C:\\\\Program Files (x86)\\\\Java\\\\jre1.8.0_101\\\\bin\\\\java.exe&quot;, args, NULL, NULL, FALSE, CREATE_UNICODE_ENVIRONMENT, NULL, L&quot;C:\\\\Program Files (x86)\\\\Java\\\\jre1.8.0_101\\\\bin\\\\&quot;, &amp;si, &amp;pi);\r\n\r\n\t\tWaitForSingleObject(pi.hProcess, INFINITE);\r\n\t\tGetExitCodeProcess(pi.hProcess, &amp;dwExit);\r\n\t\tCloseHandle(pi.hProcess);\r\n\t\tCloseHandle(pi.hThread);\r\n\r\n\t\treturn dwExit;\r\n\t}","title":"JNA: How use CreateProcess for execute 32 bit version of a system native app in 64 bit systems?","body":"<p>This may not be appropriate for your set-up depending on what your needs are, but at my company we had this problem when we moved to a 64-bit operating system for our terminal server and we had an in-house Java application that required the 32-bit version of Java to run properly.</p>\n<p>My solution was to go into the 64-bit java directory, rename <code>java.exe</code> and <code>javaw.exe</code> to <code>java.exe.bak</code> and <code>javaw.exe.bak</code>, respectively, then replace those files with stubs that launched the 32-bit version of Java instead.  This was acceptable in our case since we only have one application that uses Java and we did not foresee ourselves writing any more applications in Java going forward:</p>\n<pre><code>// Stub file that launches the 32-bit java.exe\n// Intended to replace the 64-bit java executable to ensure that (OUR APPLICATION) which only works with 32-bit java works correctly\n// Author: Govind Parmar\n\n#include &lt;Windows.h&gt;\n#include &lt;strsafe.h&gt;\n\nHRESULT cat_argv(int argc, WCHAR *argv[], WCHAR *argstr, int cchargstr)\n{\n    int i;\n    HRESULT hr;\n    ZeroMemory(argstr, sizeof(WCHAR) * cchargstr);\n\n    // first arg is program name; start with i=1 instead of 0\n    for (i = 1; i &lt; argc; i++)\n    {\n        // Space out arguments\n        hr = StringCchCatW(argstr, cchargstr, L&quot; &quot;);\n        if (FAILED(hr)) break;\n        \n        hr = StringCchCatW(argstr, cchargstr, argv[i]);\n        if (FAILED(hr)) break;\n\n    }\n    return hr;\n}\n\nint wmain(int argc, WCHAR *argv[])\n{\n    STARTUPINFO si;\n    PROCESS_INFORMATION pi;\n    WCHAR args[8192];\n    DWORD dwExit;\n    ZeroMemory(&amp;si, sizeof(STARTUPINFO));\n    ZeroMemory(&amp;pi, sizeof(PROCESS_INFORMATION));\n\n    si.cb = sizeof(STARTUPINFO);\n    if (FAILED(cat_argv(argc, argv, args, 8192)))\n    {\n        _putws(L&quot;Could not concatenate argument string!&quot;);\n        return 0;\n    }\n\n    CreateProcess(L&quot;C:\\\\Program Files (x86)\\\\Java\\\\jre1.8.0_101\\\\bin\\\\java.exe&quot;, args, NULL, NULL, FALSE, CREATE_UNICODE_ENVIRONMENT, NULL, L&quot;C:\\\\Program Files (x86)\\\\Java\\\\jre1.8.0_101\\\\bin\\\\&quot;, &amp;si, &amp;pi);\n\n    WaitForSingleObject(pi.hProcess, INFINITE);\n    GetExitCodeProcess(pi.hProcess, &amp;dwExit);\n    CloseHandle(pi.hProcess);\n    CloseHandle(pi.hThread);\n\n    return dwExit;\n}\n</code></pre>\n"}],"owner":{"display_name":"user6828073"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1275,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1689089152,"creation_date":1478879795,"question_id":40551661,"body_markdown":"I have a application that uses `JNA` for execute any other application using `CreateProcess` api. This works very fine, but when i need execute a 32 bit version of a system native app, is executing 64 bit version ( present on SysWOW64 folder ), for example: notepad.exe 64 bit.\r\n\r\nSo, exist some way for solve this troube? \r\n\r\nI had tried use `Wow64DisableWow64FsRedirection` but seem don&#39;t is working.\r\n\r\n[![enter image description here][1]][1] \r\n\r\nMy code:\r\n\r\n***Execute class:***\r\n\r\n    import com.sun.jna.Native;\r\n    import com.sun.jna.Pointer;\r\n    import com.sun.jna.Structure;\r\n    import com.sun.jna.WString;\r\n    import static com.sun.jna.platform.win32.WinBase.STARTF_USESHOWWINDOW;\r\n    import static com.sun.jna.platform.win32.WinUser.SW_HIDE;\r\n    import com.sun.jna.win32.StdCallLibrary;\r\n    import java.util.Arrays;\r\n    import java.util.List;\r\n    \r\n    \r\n    public class Execute {\r\n        \r\n        public interface Kernel32 extends StdCallLibrary {\r\n        Kernel32 INSTANCE = (Kernel32) Native.loadLibrary(&quot;kernel32&quot;, Kernel32.class);\r\n    \r\n        boolean CreateProcessA(\r\n                 String lpApplicationName\r\n                , String lpCommandLine\r\n                , Structure lpProcessAttributes\r\n                , Structure lpThreadAttributes\r\n                , boolean bInheritHandles\r\n                , int dwCreationFlags\r\n                , Structure lpEnvironment\r\n                , String lpCurrentDirectory\r\n                , Structure lpStartupInfo\r\n                , Structure lpProcessInformation);\r\n    }\r\n        \r\n    public static class ProcessInformation extends Structure {\r\n        public Pointer hProcess;\r\n        public Pointer hThread;\r\n        public int dwProcessId;\r\n        public int dwThreadId;\r\n    \r\n          @Override\r\n          protected List getFieldOrder() {\r\n          return Arrays.asList(new String[] { &quot;hProcess&quot;, &quot;hThread&quot;, &quot;dwProcessId&quot;, &quot;dwThreadId&quot; });\r\n      }\r\n        }\r\n    \r\n    public static class StartupInfoA extends Structure {\r\n        public int cb;\r\n        public WString lpReserved;\r\n        public WString lpDesktop;\r\n        public WString lpTitle;\r\n        public int dwX;\r\n        public int dwY;\r\n        public int dwXSize;\r\n        public int dwYSize;\r\n        public int dwXCountChars;\r\n        public int dwYCountChars;\r\n        public int dwFillAttribute;\r\n        public int dwFlags;\r\n        public short wShowWindow;\r\n        public short cbReserved2;\r\n        public Pointer lpReserved2;\r\n        public Pointer hStdInput;\r\n        public Pointer hStdOutput;\r\n        public Pointer hStdError;\r\n    \r\n            @Override\r\n            protected List getFieldOrder() {\r\n            return Arrays.asList(new String[] { &quot;cb&quot;, &quot;lpReserved&quot;, &quot;lpDesktop&quot;, &quot;lpTitle&quot;, &quot;dwX&quot;, &quot;dwY&quot;, &quot;dwXSize&quot;, &quot;dwYSize&quot;, &quot;dwXCountChars&quot;, &quot;dwYCountChars&quot;, &quot;dwFillAttribute&quot;, &quot;dwFlags&quot;, &quot;wShowWindow&quot;, &quot;cbReserved2&quot;, &quot;lpReserved2&quot;, &quot;hStdInput&quot;, &quot;hStdOutput&quot;, &quot;hStdError&quot; });\r\n      }\r\n        }\r\n    \r\n    public static void ExecuteProc(String software){\r\n        \r\n            ProcessInformation processInformation = new ProcessInformation();\r\n            StartupInfoA startupInfo = new StartupInfoA(); \r\n            startupInfo.dwFlags = STARTF_USESHOWWINDOW;\r\n            startupInfo.wShowWindow = SW_HIDE;\r\n    \r\n            Kernel32.INSTANCE.CreateProcessA(software, null\r\n                    , null\r\n                    , null\r\n                    , true\r\n                    , 0\r\n                    , null\r\n                    , &quot;C:\\\\Windows\\\\System32\\\\&quot;\r\n                    , startupInfo\r\n                    , processInformation);\r\n        }\r\n        \r\n    }\r\n\r\n***Main:***\r\n\r\n    public static native boolean Wow64DisableWow64FsRedirection(PointerByReference OldValue);\r\n    \r\n    public static void Exec() {\r\n            \r\n           PointerByReference lpBuffer = new PointerByReference();\r\n            \r\n           Wow64DisableWow64FsRedirection(lpBuffer); // fails here\r\n    \r\n           String sysdir = System.getenv(&quot;WINDIR&quot;) + &quot;\\\\System32\\\\&quot;;\r\n           ExecuteProc(sysdir + &quot;notepad.exe&quot;);\r\n    \r\n    }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/eXsD1.jpg","title":"JNA: How use CreateProcess for execute 32 bit version of a system native app in 64 bit systems?","body":"<p>I have a application that uses <code>JNA</code> for execute any other application using <code>CreateProcess</code> api. This works very fine, but when i need execute a 32 bit version of a system native app, is executing 64 bit version ( present on SysWOW64 folder ), for example: notepad.exe 64 bit.</p>\n\n<p>So, exist some way for solve this troube? </p>\n\n<p>I had tried use <code>Wow64DisableWow64FsRedirection</code> but seem don't is working.</p>\n\n<p><a href=\"https://i.stack.imgur.com/eXsD1.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eXsD1.jpg\" alt=\"enter image description here\"></a> </p>\n\n<p>My code:</p>\n\n<p><strong><em>Execute class:</em></strong></p>\n\n<pre><code>import com.sun.jna.Native;\nimport com.sun.jna.Pointer;\nimport com.sun.jna.Structure;\nimport com.sun.jna.WString;\nimport static com.sun.jna.platform.win32.WinBase.STARTF_USESHOWWINDOW;\nimport static com.sun.jna.platform.win32.WinUser.SW_HIDE;\nimport com.sun.jna.win32.StdCallLibrary;\nimport java.util.Arrays;\nimport java.util.List;\n\n\npublic class Execute {\n\n    public interface Kernel32 extends StdCallLibrary {\n    Kernel32 INSTANCE = (Kernel32) Native.loadLibrary(\"kernel32\", Kernel32.class);\n\n    boolean CreateProcessA(\n             String lpApplicationName\n            , String lpCommandLine\n            , Structure lpProcessAttributes\n            , Structure lpThreadAttributes\n            , boolean bInheritHandles\n            , int dwCreationFlags\n            , Structure lpEnvironment\n            , String lpCurrentDirectory\n            , Structure lpStartupInfo\n            , Structure lpProcessInformation);\n}\n\npublic static class ProcessInformation extends Structure {\n    public Pointer hProcess;\n    public Pointer hThread;\n    public int dwProcessId;\n    public int dwThreadId;\n\n      @Override\n      protected List getFieldOrder() {\n      return Arrays.asList(new String[] { \"hProcess\", \"hThread\", \"dwProcessId\", \"dwThreadId\" });\n  }\n    }\n\npublic static class StartupInfoA extends Structure {\n    public int cb;\n    public WString lpReserved;\n    public WString lpDesktop;\n    public WString lpTitle;\n    public int dwX;\n    public int dwY;\n    public int dwXSize;\n    public int dwYSize;\n    public int dwXCountChars;\n    public int dwYCountChars;\n    public int dwFillAttribute;\n    public int dwFlags;\n    public short wShowWindow;\n    public short cbReserved2;\n    public Pointer lpReserved2;\n    public Pointer hStdInput;\n    public Pointer hStdOutput;\n    public Pointer hStdError;\n\n        @Override\n        protected List getFieldOrder() {\n        return Arrays.asList(new String[] { \"cb\", \"lpReserved\", \"lpDesktop\", \"lpTitle\", \"dwX\", \"dwY\", \"dwXSize\", \"dwYSize\", \"dwXCountChars\", \"dwYCountChars\", \"dwFillAttribute\", \"dwFlags\", \"wShowWindow\", \"cbReserved2\", \"lpReserved2\", \"hStdInput\", \"hStdOutput\", \"hStdError\" });\n  }\n    }\n\npublic static void ExecuteProc(String software){\n\n        ProcessInformation processInformation = new ProcessInformation();\n        StartupInfoA startupInfo = new StartupInfoA(); \n        startupInfo.dwFlags = STARTF_USESHOWWINDOW;\n        startupInfo.wShowWindow = SW_HIDE;\n\n        Kernel32.INSTANCE.CreateProcessA(software, null\n                , null\n                , null\n                , true\n                , 0\n                , null\n                , \"C:\\\\Windows\\\\System32\\\\\"\n                , startupInfo\n                , processInformation);\n    }\n\n}\n</code></pre>\n\n<p><strong><em>Main:</em></strong></p>\n\n<pre><code>public static native boolean Wow64DisableWow64FsRedirection(PointerByReference OldValue);\n\npublic static void Exec() {\n\n       PointerByReference lpBuffer = new PointerByReference();\n\n       Wow64DisableWow64FsRedirection(lpBuffer); // fails here\n\n       String sysdir = System.getenv(\"WINDIR\") + \"\\\\System32\\\\\";\n       ExecuteProc(sysdir + \"notepad.exe\");\n\n}\n</code></pre>\n"},{"tags":["java","file","upload","mime-types","content-type"],"comments":[{"owner":{"account_id":7373320,"reputation":17364,"user_id":5612858,"display_name":"Arnaud"},"score":0,"creation_date":1557215225,"post_id":56017774,"comment_id":98679544,"body_markdown":"Have a look at Apache Tika : http://tika.apache.org/","body":"Have a look at Apache Tika : <a href=\"http://tika.apache.org/\" rel=\"nofollow noreferrer\">tika.apache.org</a>"},{"owner":{"account_id":3668752,"reputation":6568,"user_id":3065232,"accept_rate":25,"display_name":"Lijo"},"score":0,"creation_date":1557215254,"post_id":56017774,"comment_id":98679566,"body_markdown":"apache tika not works with multipart file","body":"apache tika not works with multipart file"}],"answers":[{"tags":[],"owner":{"account_id":19566903,"reputation":90,"user_id":14318842,"display_name":"Serkan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1666685137,"creation_date":1666685137,"answer_id":74190884,"question_id":56017774,"body_markdown":"it can be used to obtain file extension.\r\n//It will return extension like these png,jpp,jpeg, etc.\r\nString fileExtension = FilenameUtils.getExtension(multipartFile.getOriginalFilename());","title":"java multipart file how to find mime type if the file extension modified?","body":"<p>it can be used to obtain file extension.\n//It will return extension like these png,jpp,jpeg, etc.\nString fileExtension = FilenameUtils.getExtension(multipartFile.getOriginalFilename());</p>\n"},{"tags":[],"owner":{"account_id":15511867,"reputation":111,"user_id":11190435,"display_name":"Cihat &#214;zdenoğlu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689088573,"creation_date":1689088573,"answer_id":76663463,"question_id":56017774,"body_markdown":"Yes, both solution you shared not worked for me too. (getContentType..)\r\nIn my search I found this [this][1] sharing.\r\n\r\nThis solution is using Apache tika in validation and works with MultipartFile!\r\n\r\nUtils method;\r\n\r\n    public class FileUtils {\r\n        public static String getRealMimeType(MultipartFile file) {\r\n            AutoDetectParser parser = new AutoDetectParser();\r\n            Detector detector = parser.getDetector();\r\n            try {\r\n                Metadata metadata = new Metadata();\r\n                TikaInputStream stream = TikaInputStream.get(file.getInputStream());\r\n                MediaType mediaType = detector.detect(stream, metadata);\r\n                return mediaType.toString();\r\n            } catch (IOException e) {\r\n                return MimeTypes.OCTET_STREAM;\r\n            }\r\n        }\r\n    }\r\n\r\nController method;\r\n\r\n    @PostMapping(path = &quot;/check-real-type&quot;, consumes = MediaType.MULTIPART_FORM_DATA_VALUE)\r\n    public ResponseEntity&lt;Response&gt; checkRealType(@RequestPart MultipartFile file) {\r\n        String mimeType = FileUtils.getRealMimeType(file);\r\n        return ResponseEntity.ok(new Response(mimeType));\r\n    }\r\n\r\nDependency in pom.xml;\r\n\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;org.apache.tika&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;tika-core&lt;/artifactId&gt;\r\n    \t&lt;version&gt;2.8.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n  [1]: https://chidokun.github.io/2021/10/mime-type-and-upload-file-problem/en/","title":"java multipart file how to find mime type if the file extension modified?","body":"<p>Yes, both solution you shared not worked for me too. (getContentType..)\nIn my search I found this <a href=\"https://chidokun.github.io/2021/10/mime-type-and-upload-file-problem/en/\" rel=\"nofollow noreferrer\">this</a> sharing.</p>\n<p>This solution is using Apache tika in validation and works with MultipartFile!</p>\n<p>Utils method;</p>\n<pre><code>public class FileUtils {\n    public static String getRealMimeType(MultipartFile file) {\n        AutoDetectParser parser = new AutoDetectParser();\n        Detector detector = parser.getDetector();\n        try {\n            Metadata metadata = new Metadata();\n            TikaInputStream stream = TikaInputStream.get(file.getInputStream());\n            MediaType mediaType = detector.detect(stream, metadata);\n            return mediaType.toString();\n        } catch (IOException e) {\n            return MimeTypes.OCTET_STREAM;\n        }\n    }\n}\n</code></pre>\n<p>Controller method;</p>\n<pre><code>@PostMapping(path = &quot;/check-real-type&quot;, consumes = MediaType.MULTIPART_FORM_DATA_VALUE)\npublic ResponseEntity&lt;Response&gt; checkRealType(@RequestPart MultipartFile file) {\n    String mimeType = FileUtils.getRealMimeType(file);\n    return ResponseEntity.ok(new Response(mimeType));\n}\n</code></pre>\n<p>Dependency in pom.xml;</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.tika&lt;/groupId&gt;\n    &lt;artifactId&gt;tika-core&lt;/artifactId&gt;\n    &lt;version&gt;2.8.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":3668752,"reputation":6568,"user_id":3065232,"accept_rate":25,"display_name":"Lijo"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":4001,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1689088573,"creation_date":1557214907,"question_id":56017774,"body_markdown":"Java file upload\r\n getcontentType\r\n  mimetype\r\n\r\n always gives extension based on the extension passed\r\n How to check if some one passing javascript file with extension changed as pdf.\r\n \r\n\r\n  \r\n\r\n    1.  MimetypesFileTypeMap mimeTypesMap = new MimetypesFileTypeMap();\r\n                doc.setMimeType(mimeTypesMap.getContentType(file.getOriginalFilename()));\r\n    \r\n    2. file.getContentType()\r\n\r\n// works based on extension\r\n\r\n\r\n\r\n","title":"java multipart file how to find mime type if the file extension modified?","body":"<p>Java file upload\n getcontentType\n  mimetype</p>\n\n<p>always gives extension based on the extension passed\n How to check if some one passing javascript file with extension changed as pdf.</p>\n\n<pre><code>1.  MimetypesFileTypeMap mimeTypesMap = new MimetypesFileTypeMap();\n            doc.setMimeType(mimeTypesMap.getContentType(file.getOriginalFilename()));\n\n2. file.getContentType()\n</code></pre>\n\n<p>// works based on extension</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":7852,"page":316,"page_size":100}
