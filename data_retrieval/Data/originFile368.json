{"items":[{"tags":["java","hibernate","spring","bean-validation","hibernate-validator"],"answers":[{"comments":[{"owner":{"account_id":104911,"reputation":119222,"user_id":280244,"accept_rate":81,"display_name":"Ralph"},"score":0,"creation_date":1349782103,"post_id":4613151,"comment_id":17306274,"body_markdown":"One upvote from me, because you clearly stated that this is &quot;one possible&quot; solution.","body":"One upvote from me, because you clearly stated that this is &quot;one possible&quot; solution."}],"tags":[],"owner":{"account_id":93007,"reputation":51990,"user_id":254643,"display_name":"Raghuram"},"comment_count":1,"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1335533454,"creation_date":1294303550,"answer_id":4613151,"question_id":4613055,"body_markdown":"One possibility is to annotate the field as [@NaturalId][1]\r\n\r\n  [1]: http://docs.jboss.org/hibernate/stable/annotations/reference/en/html/entity.html#d0e2767","title":"hibernate unique key validation","body":"<p>One possibility is to annotate the field as <a href=\"http://docs.jboss.org/hibernate/stable/annotations/reference/en/html/entity.html#d0e2767\" rel=\"nofollow\">@NaturalId</a></p>\n"},{"tags":[],"owner":{"account_id":198697,"reputation":18245,"user_id":443515,"accept_rate":56,"display_name":"Qwerky"},"comment_count":0,"down_vote_count":3,"up_vote_count":6,"is_accepted":false,"score":3,"last_activity_date":1294308115,"creation_date":1294308115,"answer_id":4613716,"question_id":4613055,"body_markdown":"You could use the `@Column` attribute which can be set as `unique`.\r\n\r\n","title":"hibernate unique key validation","body":"<p>You could use the <code>@Column</code> attribute which can be set as <code>unique</code>.</p>\n"},{"comments":[{"owner":{"account_id":255877,"reputation":6710,"user_id":536205,"accept_rate":83,"display_name":"nidhin"},"score":0,"creation_date":1294389453,"post_id":4615120,"comment_id":5085229,"body_markdown":"Thanks, in case @Column(unique=true) how can i show error in view","body":"Thanks, in case @Column(unique=true) how can i show error in view"},{"owner":{"account_id":104911,"reputation":119222,"user_id":280244,"accept_rate":81,"display_name":"Ralph"},"score":0,"creation_date":1294395565,"post_id":4615120,"comment_id":5086094,"body_markdown":"@Column(unique=true) will create a data base constraint to the according column.  -- This means all you get is an exception if you try to store the entity with the not unique value. -- So there is no (easy) way to combine it with the Bean validation.","body":"@Column(unique=true) will create a data base constraint to the according column.  -- This means all you get is an exception if you try to store the entity with the not unique value. -- So there is no (easy) way to combine it with the Bean validation."},{"owner":{"account_id":143433,"reputation":8912,"user_id":351758,"accept_rate":73,"display_name":"Janning Vygen"},"score":4,"creation_date":1349777471,"post_id":4615120,"comment_id":17304161,"body_markdown":"Of course, the database needs a unique constraint to handle concurrently inserts. But I don&#39;t think you should let the database handle it alone. Validating the uniqueness before makes it much easier to show error messages to the user. So in my opinion it is a perfectly valid approach to do the validation beforehand and test for uniqueness. Usually you want to have &quot;username not available&quot; as soon as the user left the username field in his web browser. So doing an ajax request and trying to validate with jsr-303 is the way to go. That&#39;s why I down voted your answer (sorry for this)","body":"Of course, the database needs a unique constraint to handle concurrently inserts. But I don&#39;t think you should let the database handle it alone. Validating the uniqueness before makes it much easier to show error messages to the user. So in my opinion it is a perfectly valid approach to do the validation beforehand and test for uniqueness. Usually you want to have &quot;username not available&quot; as soon as the user left the username field in his web browser. So doing an ajax request and trying to validate with jsr-303 is the way to go. That&#39;s why I down voted your answer (sorry for this)"},{"owner":{"account_id":104911,"reputation":119222,"user_id":280244,"accept_rate":81,"display_name":"Ralph"},"score":0,"creation_date":1349782217,"post_id":4615120,"comment_id":17306323,"body_markdown":"@Jannig: You change the scope of the question, there was no one ever talking about the Ajax scenario.","body":"@Jannig: You change the scope of the question, there was no one ever talking about the Ajax scenario."},{"owner":{"account_id":143433,"reputation":8912,"user_id":351758,"accept_rate":73,"display_name":"Janning Vygen"},"score":4,"creation_date":1350055676,"post_id":4615120,"comment_id":17408717,"body_markdown":"Ajax was just an example. If you have a business rule you should validate it. Imagine the same example without ajax. You give a username and email address. The email address is not valid, so you get an error page. But as you not have tried to update the database you can&#39;t show the user an appropriate message according its choosen username. the user corrects the email adresse, submits and is getting the next error, talking about uniqueness of the username.","body":"Ajax was just an example. If you have a business rule you should validate it. Imagine the same example without ajax. You give a username and email address. The email address is not valid, so you get an error page. But as you not have tried to update the database you can&#39;t show the user an appropriate message according its choosen username. the user corrects the email adresse, submits and is getting the next error, talking about uniqueness of the username."},{"owner":{"account_id":143433,"reputation":8912,"user_id":351758,"accept_rate":73,"display_name":"Janning Vygen"},"score":0,"creation_date":1350055724,"post_id":4615120,"comment_id":17408732,"body_markdown":"From an architectural point of view, check the uniqueness at the same place where you validate all the other stuff.","body":"From an architectural point of view, check the uniqueness at the same place where you validate all the other stuff."}],"tags":[],"owner":{"account_id":104911,"reputation":119222,"user_id":280244,"accept_rate":81,"display_name":"Ralph"},"comment_count":6,"down_vote_count":2,"up_vote_count":10,"is_accepted":false,"score":8,"last_activity_date":1294318686,"creation_date":1294318686,"answer_id":4615120,"question_id":4613055,"body_markdown":"I think it is not wise to use Hibernate Validator (JSR 303) for this purpose.\r\nOr better it is not the goal of Hibernate Validator.\r\n\r\nThe JSR 303 is about bean validation. This means to check if a field is set correct. But what you want is in a much wider scope than a single bean. It is somehow in a global scope (regarding all Beans of this type). -- **I think you should let the database handle this problem. Set a unique constraint to the column in your database (for example by annotate the field with `@Column(unique=true)`) and the database will make sure that the field is unique.**\r\n\r\nAnyway, if you really want to use JSR303 for this, than you need to create your own Annotation and own Validator. The Validator have to access the Database and check if there is no other entity with the specified value. - But I believe there would be some problems to access the database from the Validator in the right session.\r\n","title":"hibernate unique key validation","body":"<p>I think it is not wise to use Hibernate Validator (JSR 303) for this purpose.\nOr better it is not the goal of Hibernate Validator.</p>\n\n<p>The JSR 303 is about bean validation. This means to check if a field is set correct. But what you want is in a much wider scope than a single bean. It is somehow in a global scope (regarding all Beans of this type). -- <strong>I think you should let the database handle this problem. Set a unique constraint to the column in your database (for example by annotate the field with <code>@Column(unique=true)</code>) and the database will make sure that the field is unique.</strong></p>\n\n<p>Anyway, if you really want to use JSR303 for this, than you need to create your own Annotation and own Validator. The Validator have to access the Database and check if there is no other entity with the specified value. - But I believe there would be some problems to access the database from the Validator in the right session.</p>\n"},{"comments":[{"owner":{"account_id":5291133,"reputation":4271,"user_id":4223697,"accept_rate":93,"display_name":"FuSsA"},"score":0,"creation_date":1462357270,"post_id":4733441,"comment_id":61599957,"body_markdown":"how can i use the same code with **Sessionfactory** instead of **EntityManager** ?","body":"how can i use the same code with <b>Sessionfactory</b> instead of <b>EntityManager</b> ?"},{"owner":{"account_id":1887821,"reputation":2984,"user_id":1706691,"accept_rate":69,"display_name":"James"},"score":0,"creation_date":1504818872,"post_id":4733441,"comment_id":79173398,"body_markdown":"Thanks. Changed `criteriaQuery.where(predicates.toArray(new Predicate[predicates.size()]));` to `criteriaQuery.select(root).where(predicates.toArray(new Predicate[predicates.size()]));`. Now it works for me. With Spring use, I got rid of `EntityManagerAwareValidator` &amp; `ConstraintValidatorFactoryImpl` and added `@PersistenceContext private EntityManager entityManager` directly in the `UniqueKeyValidator`.","body":"Thanks. Changed <code>criteriaQuery.where(predicates.toArray(new Predicate[predicates.size()]));</code> to <code>criteriaQuery.select(root).where(predicates.toArray(new Predicate[predicates.size()]));</code>. Now it works for me. With Spring use, I got rid of <code>EntityManagerAwareValidator</code> &amp; <code>ConstraintValidatorFactoryImpl</code> and added <code>@PersistenceContext private EntityManager entityManager</code> directly in the <code>UniqueKeyValidator</code>."},{"owner":{"account_id":5744250,"reputation":103,"user_id":4535957,"accept_rate":62,"display_name":"Xegara"},"score":0,"creation_date":1558047232,"post_id":4733441,"comment_id":98981422,"body_markdown":"How will this code work for update use cases? Let&#39;s say when you submit an update request with modified fields other than the field with the unique key constraint? Wouldn&#39;t that throw a false negative?","body":"How will this code work for update use cases? Let&#39;s say when you submit an update request with modified fields other than the field with the unique key constraint? Wouldn&#39;t that throw a false negative?"}],"tags":[],"owner":{"account_id":157771,"reputation":30404,"user_id":375953,"accept_rate":53,"display_name":"dira"},"comment_count":3,"down_vote_count":1,"up_vote_count":28,"is_accepted":true,"score":27,"last_activity_date":1295428220,"creation_date":1295428220,"answer_id":4733441,"question_id":4613055,"body_markdown":"One of the possible solutions is to create custom `@UniqueKey` constraint (and corresponding validator); and to look-up the existing records in database, provide an instance of `EntityManager` (or Hibernate `Session`)to `UniqueKeyValidator`.\r\n\r\n**EntityManagerAwareValidator** \r\n\r\n    public interface EntityManagerAwareValidator { \t\r\n         void setEntityManager(EntityManager entityManager); \r\n    } \r\n\r\n**ConstraintValidatorFactoryImpl**\r\n\r\n    public class ConstraintValidatorFactoryImpl implements ConstraintValidatorFactory {\r\n    \r\n    \tprivate EntityManagerFactory entityManagerFactory;\r\n    \r\n    \tpublic ConstraintValidatorFactoryImpl(EntityManagerFactory entityManagerFactory) {\r\n    \t\tthis.entityManagerFactory = entityManagerFactory;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic &lt;T extends ConstraintValidator&lt;?, ?&gt;&gt; T getInstance(Class&lt;T&gt; key) {\r\n    \t\tT instance = null;\r\n    \r\n    \t\ttry {\r\n    \t\t\tinstance = key.newInstance();\r\n    \t\t} catch (Exception e) { \r\n    \t\t\t// could not instantiate class\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \r\n    \t\tif(EntityManagerAwareValidator.class.isAssignableFrom(key)) {\r\n    \t\t\tEntityManagerAwareValidator validator = (EntityManagerAwareValidator) instance;\r\n    \t\t\tvalidator.setEntityManager(entityManagerFactory.createEntityManager());\r\n    \t\t}\r\n    \r\n    \t\treturn instance;\r\n    \t}\r\n    }\r\n\r\n**UniqueKey**\r\n\r\n    @Constraint(validatedBy={UniqueKeyValidator.class})\r\n    @Target({ElementType.TYPE})\r\n    @Retention(RUNTIME)\r\n    public @interface UniqueKey {\r\n    \r\n    \tString[] columnNames();\r\n    \r\n    \tString message() default &quot;{UniqueKey.message}&quot;;\r\n    \r\n    \tClass&lt;?&gt;[] groups() default {};\r\n    \r\n    \tClass&lt;? extends Payload&gt;[] payload() default {};\r\n    \r\n    \t@Target({ ElementType.TYPE })\r\n    \t@Retention(RUNTIME)\r\n    \t@Documented\r\n    \t@interface List {\r\n    \t\tUniqueKey[] value();\r\n    \t}\r\n    }\r\n\r\n**UniqueKeyValidator**\r\n\r\n    public class UniqueKeyValidator implements ConstraintValidator&lt;UniqueKey, Serializable&gt;, EntityManagerAwareValidator {\r\n    \r\n    \tprivate EntityManager entityManager;\r\n    \r\n    \t@Override\r\n    \tpublic void setEntityManager(EntityManager entityManager) {\r\n    \t\tthis.entityManager = entityManager;\r\n    \t}\r\n    \r\n    \tprivate String[] columnNames;\r\n    \r\n    \t@Override\r\n    \tpublic void initialize(UniqueKey constraintAnnotation) {\r\n    \t\tthis.columnNames = constraintAnnotation.columnNames();\r\n    \r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic boolean isValid(Serializable target, ConstraintValidatorContext context) {\r\n    \t\tClass&lt;?&gt; entityClass = target.getClass();\r\n    \r\n    \t\tCriteriaBuilder criteriaBuilder = entityManager.getCriteriaBuilder();\r\n    \r\n    \t\tCriteriaQuery&lt;Object&gt; criteriaQuery = criteriaBuilder.createQuery();\r\n    \r\n    \t\tRoot&lt;?&gt; root = criteriaQuery.from(entityClass);\r\n    \r\n    \t\tList&lt;Predicate&gt; predicates = new ArrayList&lt;Predicate&gt; (columnNames.length);\r\n    \r\n    \t\ttry {\r\n    \t\t\tfor(int i=0; i&lt;columnNames.length; i++) {\r\n    \t\t\t\tString propertyName = columnNames[i];\r\n    \t\t\t\tPropertyDescriptor desc = new PropertyDescriptor(propertyName, entityClass);\r\n    \t\t\t\tMethod readMethod = desc.getReadMethod();\r\n    \t\t\t\tObject propertyValue = readMethod.invoke(target);\r\n    \t\t\t\tPredicate predicate = criteriaBuilder.equal(root.get(propertyName), propertyValue);\r\n    \t\t\t\tpredicates.add(predicate);\r\n    \t\t\t}\r\n    \t\t} catch (Exception e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \r\n    \t\tcriteriaQuery.where(predicates.toArray(new Predicate[predicates.size()]));\r\n    \r\n    \t\tTypedQuery&lt;Object&gt; typedQuery = entityManager.createQuery(criteriaQuery);\r\n    \r\n    \t\tList&lt;Object&gt; resultSet = typedQuery.getResultList(); \r\n    \t\t\r\n    \t\treturn resultSet.size() == 0;\r\n    \t}\r\n    \r\n    }\r\n\r\n**Usage**\r\n\r\n    @UniqueKey(columnNames={&quot;userName&quot;})\r\n    // @UniqueKey(columnNames={&quot;userName&quot;, &quot;emailId&quot;}) // composite unique key\r\n    //@UniqueKey.List(value = {@UniqueKey(columnNames = { &quot;userName&quot; }), @UniqueKey(columnNames = { &quot;emailId&quot; })}) // more than one unique keys\r\n    public class User implements Serializable {\r\n    \r\n    \tprivate String userName;\r\n    \tprivate String password;\r\n    \tprivate String emailId;\r\n    \r\n    \tprotected User() {\r\n    \t\tsuper();\r\n    \t}\r\n    \r\n    \tpublic User(String userName) {\r\n    \t\tthis.userName = userName;\r\n    \t}\r\n            ....\r\n    }\r\n\r\n**Test**\r\n\r\n\tpublic void uniqueKey() {\r\n\t\tEntityManagerFactory entityManagerFactory = Persistence.createEntityManagerFactory(&quot;default&quot;);\r\n\r\n\t\tValidatorFactory validatorFactory = Validation.buildDefaultValidatorFactory();\r\n\t\tValidatorContext validatorContext = validatorFactory.usingContext();\r\n\t\tvalidatorContext.constraintValidatorFactory(new ConstraintValidatorFactoryImpl(entityManagerFactory));\r\n\t\tValidator validator = validatorContext.getValidator();\r\n\r\n\t\tEntityManager em = entityManagerFactory.createEntityManager();\r\n\r\n\t\tUser se = new User(&quot;abc&quot;, poizon);\r\n\r\n\t       Set&lt;ConstraintViolation&lt;User&gt;&gt; violations = validator.validate(se);\r\n\t\tSystem.out.println(&quot;Size:- &quot; + violations.size());\r\n\r\n\t\tem.getTransaction().begin();\r\n\t\tem.persist(se);\r\n\t\tem.getTransaction().commit();\r\n\r\n\t        User se1 = new User(&quot;abc&quot;);\r\n\t\t\r\n\t\tviolations = validator.validate(se1);\r\n\r\n\t\tSystem.out.println(&quot;Size:- &quot; + violations.size());\r\n\t}","title":"hibernate unique key validation","body":"<p>One of the possible solutions is to create custom <code>@UniqueKey</code> constraint (and corresponding validator); and to look-up the existing records in database, provide an instance of <code>EntityManager</code> (or Hibernate <code>Session</code>)to <code>UniqueKeyValidator</code>.</p>\n\n<p><strong>EntityManagerAwareValidator</strong> </p>\n\n<pre><code>public interface EntityManagerAwareValidator {  \n     void setEntityManager(EntityManager entityManager); \n} \n</code></pre>\n\n<p><strong>ConstraintValidatorFactoryImpl</strong></p>\n\n<pre><code>public class ConstraintValidatorFactoryImpl implements ConstraintValidatorFactory {\n\n    private EntityManagerFactory entityManagerFactory;\n\n    public ConstraintValidatorFactoryImpl(EntityManagerFactory entityManagerFactory) {\n        this.entityManagerFactory = entityManagerFactory;\n    }\n\n    @Override\n    public &lt;T extends ConstraintValidator&lt;?, ?&gt;&gt; T getInstance(Class&lt;T&gt; key) {\n        T instance = null;\n\n        try {\n            instance = key.newInstance();\n        } catch (Exception e) { \n            // could not instantiate class\n            e.printStackTrace();\n        }\n\n        if(EntityManagerAwareValidator.class.isAssignableFrom(key)) {\n            EntityManagerAwareValidator validator = (EntityManagerAwareValidator) instance;\n            validator.setEntityManager(entityManagerFactory.createEntityManager());\n        }\n\n        return instance;\n    }\n}\n</code></pre>\n\n<p><strong>UniqueKey</strong></p>\n\n<pre><code>@Constraint(validatedBy={UniqueKeyValidator.class})\n@Target({ElementType.TYPE})\n@Retention(RUNTIME)\npublic @interface UniqueKey {\n\n    String[] columnNames();\n\n    String message() default \"{UniqueKey.message}\";\n\n    Class&lt;?&gt;[] groups() default {};\n\n    Class&lt;? extends Payload&gt;[] payload() default {};\n\n    @Target({ ElementType.TYPE })\n    @Retention(RUNTIME)\n    @Documented\n    @interface List {\n        UniqueKey[] value();\n    }\n}\n</code></pre>\n\n<p><strong>UniqueKeyValidator</strong></p>\n\n<pre><code>public class UniqueKeyValidator implements ConstraintValidator&lt;UniqueKey, Serializable&gt;, EntityManagerAwareValidator {\n\n    private EntityManager entityManager;\n\n    @Override\n    public void setEntityManager(EntityManager entityManager) {\n        this.entityManager = entityManager;\n    }\n\n    private String[] columnNames;\n\n    @Override\n    public void initialize(UniqueKey constraintAnnotation) {\n        this.columnNames = constraintAnnotation.columnNames();\n\n    }\n\n    @Override\n    public boolean isValid(Serializable target, ConstraintValidatorContext context) {\n        Class&lt;?&gt; entityClass = target.getClass();\n\n        CriteriaBuilder criteriaBuilder = entityManager.getCriteriaBuilder();\n\n        CriteriaQuery&lt;Object&gt; criteriaQuery = criteriaBuilder.createQuery();\n\n        Root&lt;?&gt; root = criteriaQuery.from(entityClass);\n\n        List&lt;Predicate&gt; predicates = new ArrayList&lt;Predicate&gt; (columnNames.length);\n\n        try {\n            for(int i=0; i&lt;columnNames.length; i++) {\n                String propertyName = columnNames[i];\n                PropertyDescriptor desc = new PropertyDescriptor(propertyName, entityClass);\n                Method readMethod = desc.getReadMethod();\n                Object propertyValue = readMethod.invoke(target);\n                Predicate predicate = criteriaBuilder.equal(root.get(propertyName), propertyValue);\n                predicates.add(predicate);\n            }\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n\n        criteriaQuery.where(predicates.toArray(new Predicate[predicates.size()]));\n\n        TypedQuery&lt;Object&gt; typedQuery = entityManager.createQuery(criteriaQuery);\n\n        List&lt;Object&gt; resultSet = typedQuery.getResultList(); \n\n        return resultSet.size() == 0;\n    }\n\n}\n</code></pre>\n\n<p><strong>Usage</strong></p>\n\n<pre><code>@UniqueKey(columnNames={\"userName\"})\n// @UniqueKey(columnNames={\"userName\", \"emailId\"}) // composite unique key\n//@UniqueKey.List(value = {@UniqueKey(columnNames = { \"userName\" }), @UniqueKey(columnNames = { \"emailId\" })}) // more than one unique keys\npublic class User implements Serializable {\n\n    private String userName;\n    private String password;\n    private String emailId;\n\n    protected User() {\n        super();\n    }\n\n    public User(String userName) {\n        this.userName = userName;\n    }\n        ....\n}\n</code></pre>\n\n<p><strong>Test</strong></p>\n\n<pre><code>public void uniqueKey() {\n    EntityManagerFactory entityManagerFactory = Persistence.createEntityManagerFactory(\"default\");\n\n    ValidatorFactory validatorFactory = Validation.buildDefaultValidatorFactory();\n    ValidatorContext validatorContext = validatorFactory.usingContext();\n    validatorContext.constraintValidatorFactory(new ConstraintValidatorFactoryImpl(entityManagerFactory));\n    Validator validator = validatorContext.getValidator();\n\n    EntityManager em = entityManagerFactory.createEntityManager();\n\n    User se = new User(\"abc\", poizon);\n\n       Set&lt;ConstraintViolation&lt;User&gt;&gt; violations = validator.validate(se);\n    System.out.println(\"Size:- \" + violations.size());\n\n    em.getTransaction().begin();\n    em.persist(se);\n    em.getTransaction().commit();\n\n        User se1 = new User(\"abc\");\n\n    violations = validator.validate(se1);\n\n    System.out.println(\"Size:- \" + violations.size());\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2584833,"reputation":2656,"user_id":2240780,"accept_rate":78,"display_name":"Julien"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1675041617,"creation_date":1366729079,"answer_id":16172658,"question_id":4613055,"body_markdown":"I&#39;ve found kind of a tricky solution.\r\n\r\nFirst, I&#39;ve implemented the unique contraint to my MySql database : \r\n\r\n    CREATE TABLE XMLTAG\r\n    (\r\n    \tID INTEGER NOT NULL AUTO_INCREMENT,\r\n    \tLABEL VARCHAR(64) NOT NULL,\r\n    \tXPATH VARCHAR(128),\r\n    \tPRIMARY KEY (ID),\r\n    \tUNIQUE UQ_XMLTAG_LABEL(LABEL)\r\n    ) ;\r\n\r\nYou see that I manage XML Tags that are defined by a unique label and a text field named &quot;XPath&quot;. \r\n\r\nAnyway, the second step is to simply catch the error raised when the user tries to do a bad update. A bad update is when trying to replace the current label by an existing label. If you leave the label untouched, no problemo. So, in my controller : \r\n\r\n        @RequestMapping(value = &quot;/updatetag&quot;, method = RequestMethod.POST)\r\n    \tpublic String updateTag(\r\n    \t\t\t@ModelAttribute(&quot;tag&quot;) Tag tag, \r\n    \t\t\t@Valid Tag validTag,\r\n    \t\t\tBindingResult result,\r\n    \t\t\tModelMap map) {\r\n    \t\t\r\n    \t\tif(result.hasErrors()) {        // you don&#39;t care : validation of other\r\n    \t\t\treturn &quot;editTag&quot;;       // constraints like @NotEmpty\r\n    \t\t}\r\n    \t\t\r\n\r\n    \t\ttry {\r\n    \t\t\ttagService.updateTag(tag);    // try to update\r\n    \t\t\treturn &quot;redirect:/tags&quot;;   // &lt;- if it works   \t\t\r\n    \t\t}\r\n    \t\tcatch (DataIntegrityViolationException ex) { // if it doesn&#39;t work\r\n    \t\t\tresult.rejectValue(&quot;label&quot;, &quot;Unique.tag.label&quot;); // pass an error message to the view \r\n    \t\t\treturn &quot;editTag&quot;; // same treatment as other validation errors\r\n    \t\t}\r\n    \t}\r\n\r\nThis may conflict with the @Unique pattern but you can use this dirty method to valid the adding too.\r\n\r\nNote : there is still one problem : if other validation errors are catched before the exception, the message about unicity will not be displayed.","title":"hibernate unique key validation","body":"<p>I've found kind of a tricky solution.</p>\n<p>First, I've implemented the unique contraint to my MySql database :</p>\n<pre><code>CREATE TABLE XMLTAG\n(\n    ID INTEGER NOT NULL AUTO_INCREMENT,\n    LABEL VARCHAR(64) NOT NULL,\n    XPATH VARCHAR(128),\n    PRIMARY KEY (ID),\n    UNIQUE UQ_XMLTAG_LABEL(LABEL)\n) ;\n</code></pre>\n<p>You see that I manage XML Tags that are defined by a unique label and a text field named &quot;XPath&quot;.</p>\n<p>Anyway, the second step is to simply catch the error raised when the user tries to do a bad update. A bad update is when trying to replace the current label by an existing label. If you leave the label untouched, no problemo. So, in my controller :</p>\n<pre><code>    @RequestMapping(value = &quot;/updatetag&quot;, method = RequestMethod.POST)\n    public String updateTag(\n            @ModelAttribute(&quot;tag&quot;) Tag tag, \n            @Valid Tag validTag,\n            BindingResult result,\n            ModelMap map) {\n        \n        if(result.hasErrors()) {        // you don't care : validation of other\n            return &quot;editTag&quot;;       // constraints like @NotEmpty\n        }\n        \n\n        try {\n            tagService.updateTag(tag);    // try to update\n            return &quot;redirect:/tags&quot;;   // &lt;- if it works        \n        }\n        catch (DataIntegrityViolationException ex) { // if it doesn't work\n            result.rejectValue(&quot;label&quot;, &quot;Unique.tag.label&quot;); // pass an error message to the view \n            return &quot;editTag&quot;; // same treatment as other validation errors\n        }\n    }\n</code></pre>\n<p>This may conflict with the @Unique pattern but you can use this dirty method to valid the adding too.</p>\n<p>Note : there is still one problem : if other validation errors are catched before the exception, the message about unicity will not be displayed.</p>\n"},{"comments":[{"owner":{"account_id":6719220,"reputation":3760,"user_id":5179910,"accept_rate":69,"display_name":"Benjamin Lowry"},"score":0,"creation_date":1483349460,"post_id":41423955,"comment_id":70053931,"body_markdown":"Please consider adding an explanation as to how your code is the best method.","body":"Please consider adding an explanation as to how your code is the best method."},{"owner":{"account_id":7972602,"reputation":476,"user_id":6016735,"display_name":"Tanmoy Mandal"},"score":0,"creation_date":1483350105,"post_id":41423955,"comment_id":70054199,"body_markdown":"The code is based on the previous one using **EnintyManager**. One person asked for the Hibernate **Session**. Sorry for not mentioning. And thank you.","body":"The code is based on the previous one using <b>EnintyManager</b>. One person asked for the Hibernate <b>Session</b>. Sorry for not mentioning. And thank you."},{"owner":{"account_id":1075335,"reputation":2010,"user_id":1073623,"display_name":"infiniteRefactor"},"score":0,"creation_date":1483501837,"post_id":41423955,"comment_id":70118090,"body_markdown":"Note that this implementation does not support testing the validator in a unit test setting. In unit test settings validators are not created with Spring bean creation mechanism, thus `SessionFactory` should be manually injected into the validator, possibly using a custom `ConstraintValidatorFactory` as accepted answer does.","body":"Note that this implementation does not support testing the validator in a unit test setting. In unit test settings validators are not created with Spring bean creation mechanism, thus <code>SessionFactory</code> should be manually injected into the validator, possibly using a custom <code>ConstraintValidatorFactory</code> as accepted answer does."},{"owner":{"account_id":1077256,"reputation":2167,"user_id":1075119,"accept_rate":85,"display_name":"mneri"},"score":1,"creation_date":1575953406,"post_id":41423955,"comment_id":104729537,"body_markdown":"Why the `@Repository` annotation?","body":"Why the <code>@Repository</code> annotation?"}],"tags":[],"owner":{"account_id":7972602,"reputation":476,"user_id":6016735,"display_name":"Tanmoy Mandal"},"comment_count":4,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1483351859,"creation_date":1483348376,"answer_id":41423955,"question_id":4613055,"body_markdown":"This code is based on the previous one implemented using `EntityManager`.\r\nIn case anyone need to use Hibernate `Session`.\r\nCustom Annotation using Hibernate `Session`.\r\n&lt;br/&gt;`@`**UniqueKey.java**\r\n\r\n\r\n    import java.lang.annotation.*;\r\n    import javax.validation.Constraint;\r\n    import javax.validation.Payload;\r\n    \r\n    @Target({ElementType.ANNOTATION_TYPE, ElementType.FIELD, ElementType.METHOD})\r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    @Constraint(validatedBy = UniqueKeyValidator.class)\r\n    @Documented\r\n    public @interface UniqueKey {\r\n        String columnName();\r\n        Class&lt;?&gt; className();\r\n        String message() default &quot;{UniqueKey.message}&quot;;\r\n        Class&lt;?&gt;[] groups() default {};\r\n        Class&lt;? extends Payload&gt;[] payload() default {};\r\n    }\r\n\r\n\r\n**UnqieKeyValidator.java**\r\n\r\n\r\n    import ch.qos.logback.classic.gaffer.PropertyUtil;\r\n    import org.hibernate.Criteria;\r\n    import org.hibernate.Session;\r\n    import org.hibernate.SessionFactory;\r\n    import org.hibernate.criterion.Restrictions;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.stereotype.Repository;\r\n    import org.springframework.transaction.annotation.Transactional;\r\n    import javax.validation.ConstraintValidator;\r\n    import javax.validation.ConstraintValidatorContext;\r\n    import java.beans.PropertyDescriptor;\r\n    import java.lang.reflect.Method;\r\n    @Transactional\r\n    @Repository\r\n    public class UniqueKeyValidator implements ConstraintValidator&lt;UniqueKey, String&gt; {\r\n    \r\n        @Autowired\r\n        private SessionFactory sessionFactory;\r\n    \r\n        public Session getSession() {\r\n            return sessionFactory.getCurrentSession();\r\n        }\r\n    \r\n        private String columnName;\r\n        private Class&lt;?&gt; entityClass;\r\n    \r\n        @Override\r\n        public void initialize(UniqueKey constraintAnnotation) {\r\n            this.columnNames = constraintAnnotation.columnNames();\r\n            this.entityClass = constraintAnnotation.className();\r\n        }\r\n    \r\n        @Override\r\n        public boolean isValid(String value, ConstraintValidatorContext context) {\r\n            Class&lt;?&gt; entityClass = this.entityClass;\r\n            System.out.println(&quot;class: &quot; + entityClass.toString());\r\n            Criteria criteria = getSession().createCriteria(entityClass);\r\n            try {\r\n                    criteria.add(Restrictions.eq(this.columnName, value));\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n            return criteria.list().size()==0;\r\n        }\r\n    }\r\n\r\n\r\n**Usage**\r\n\r\n\r\n    @UniqueKey(columnNames=&quot;userName&quot;, className = UserEntity.class)\r\n    // @UniqueKey(columnNames=&quot;userName&quot;) // unique key\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"hibernate unique key validation","body":"<p>This code is based on the previous one implemented using <code>EntityManager</code>.\nIn case anyone need to use Hibernate <code>Session</code>.\nCustom Annotation using Hibernate <code>Session</code>.\n<br/><code>@</code><strong>UniqueKey.java</strong></p>\n\n<pre><code>import java.lang.annotation.*;\nimport javax.validation.Constraint;\nimport javax.validation.Payload;\n\n@Target({ElementType.ANNOTATION_TYPE, ElementType.FIELD, ElementType.METHOD})\n@Retention(RetentionPolicy.RUNTIME)\n@Constraint(validatedBy = UniqueKeyValidator.class)\n@Documented\npublic @interface UniqueKey {\n    String columnName();\n    Class&lt;?&gt; className();\n    String message() default \"{UniqueKey.message}\";\n    Class&lt;?&gt;[] groups() default {};\n    Class&lt;? extends Payload&gt;[] payload() default {};\n}\n</code></pre>\n\n<p><strong>UnqieKeyValidator.java</strong></p>\n\n<pre><code>import ch.qos.logback.classic.gaffer.PropertyUtil;\nimport org.hibernate.Criteria;\nimport org.hibernate.Session;\nimport org.hibernate.SessionFactory;\nimport org.hibernate.criterion.Restrictions;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Repository;\nimport org.springframework.transaction.annotation.Transactional;\nimport javax.validation.ConstraintValidator;\nimport javax.validation.ConstraintValidatorContext;\nimport java.beans.PropertyDescriptor;\nimport java.lang.reflect.Method;\n@Transactional\n@Repository\npublic class UniqueKeyValidator implements ConstraintValidator&lt;UniqueKey, String&gt; {\n\n    @Autowired\n    private SessionFactory sessionFactory;\n\n    public Session getSession() {\n        return sessionFactory.getCurrentSession();\n    }\n\n    private String columnName;\n    private Class&lt;?&gt; entityClass;\n\n    @Override\n    public void initialize(UniqueKey constraintAnnotation) {\n        this.columnNames = constraintAnnotation.columnNames();\n        this.entityClass = constraintAnnotation.className();\n    }\n\n    @Override\n    public boolean isValid(String value, ConstraintValidatorContext context) {\n        Class&lt;?&gt; entityClass = this.entityClass;\n        System.out.println(\"class: \" + entityClass.toString());\n        Criteria criteria = getSession().createCriteria(entityClass);\n        try {\n                criteria.add(Restrictions.eq(this.columnName, value));\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n        return criteria.list().size()==0;\n    }\n}\n</code></pre>\n\n<p><strong>Usage</strong></p>\n\n<pre><code>@UniqueKey(columnNames=\"userName\", className = UserEntity.class)\n// @UniqueKey(columnNames=\"userName\") // unique key\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5668909,"reputation":56,"user_id":4484241,"display_name":"Ahmed"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686894550,"creation_date":1680637344,"answer_id":75933233,"question_id":4613055,"body_markdown":"From my point of view the solutions provided here are missing very important case, which is update. We have to consider the primary key while asking our JPA APIs for persist or megre, So you **MUST** exclude the current entity from the uniqueness check (by using the primary key).\r\n\r\nThe below demonstration uses Spring Framework.\r\n\r\nThe annotation:\r\n\r\n    import javax.validation.Constraint;\r\n    import javax.validation.Payload;\r\n    import java.lang.annotation.*;\r\n    \r\n    @Target(ElementType.TYPE)\r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    @Documented\r\n    @Constraint(validatedBy = UniqueValidator.class)\r\n    public @interface Unique {\r\n        String[] fields();\r\n        String primaryKey();\r\n    \r\n        String message() default &quot;Email address must be unique!&quot;;\r\n    \r\n        Class&lt;?&gt;[] groups() default {};\r\n    \r\n        Class&lt;? extends Payload&gt;[] payload() default {};\r\n    \r\n        @Target({ ElementType.TYPE })\r\n        @Retention(RetentionPolicy.RUNTIME)\r\n        @Documented\r\n        @interface List {\r\n            Unique[] value();\r\n        }\r\n    }\r\n\r\n\r\nAnnotation validator implementation:\r\n\r\n    import lombok.extern.slf4j.Slf4j;\r\n    import org.springframework.stereotype.Component;\r\n    import javax.persistence.EntityManager;\r\n    import javax.persistence.PersistenceContext;\r\n    import javax.persistence.Query;\r\n    import javax.persistence.criteria.CriteriaBuilder;\r\n    import javax.persistence.criteria.CriteriaQuery;\r\n    import javax.persistence.criteria.Predicate;\r\n    import javax.persistence.criteria.Root;\r\n    import javax.validation.ConstraintValidator;\r\n    import javax.validation.ConstraintValidatorContext;\r\n    import java.beans.PropertyDescriptor;\r\n    import java.io.Serializable;\r\n    import java.lang.reflect.Method;\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    \r\n    @Slf4j\r\n    @Component\r\n    public class UniqueValidator implements ConstraintValidator&lt;Unique, Serializable&gt; {\r\n        @Autowied\r\n        private EntityManager entityManager;\r\n    \r\n        private String[] fields;\r\n        private String primaryKey;\r\n    \r\n        @Override\r\n        public void initialize(Unique constraintAnnotation) {\r\n            this.fields = constraintAnnotation.fields();\r\n            this.primaryKey = constraintAnnotation.primaryKey();\r\n        }\r\n    \r\n        @Override\r\n        public boolean isValid(Serializable target, ConstraintValidatorContext context) {\r\n            log.info(&quot;start validation...&quot;);\r\n            if(entityManager != null) {\r\n                Class entityClass = target.getClass();\r\n                CriteriaBuilder criteriaBuilder = entityManager.getCriteriaBuilder();\r\n                CriteriaQuery&lt;?&gt; criteriaQuery = criteriaBuilder.createQuery(entityClass);\r\n                Root&lt;?&gt; root = criteriaQuery.from(entityClass);\r\n                List&lt;Predicate&gt; predicates = new ArrayList(fields.length + 1);\r\n    \r\n                try {\r\n                    PropertyDescriptor desc = new PropertyDescriptor(primaryKey, entityClass);\r\n                    Method readMethod = desc.getReadMethod();\r\n                    Object propertyValue = readMethod.invoke(target);\r\n                    Predicate predicate = criteriaBuilder.notEqual(root.get(primaryKey), propertyValue);\r\n                    predicates.add(predicate);\r\n    \r\n                    for (int i = 0; i &lt; fields.length; i++) {\r\n                        String propertyName = fields[i];\r\n                        desc = new PropertyDescriptor(propertyName, entityClass);\r\n                        readMethod = desc.getReadMethod();\r\n                        propertyValue = readMethod.invoke(target);\r\n                        predicate = criteriaBuilder.equal(root.get(propertyName), propertyValue);\r\n                        predicates.add(predicate);\r\n                    }\r\n                } catch (Exception e) {\r\n                    e.printStackTrace();\r\n                }\r\n    \r\n                criteriaQuery.where(predicates.toArray(new Predicate[predicates.size()]));\r\n                Query typedQuery = entityManager.createQuery(criteriaQuery);\r\n                List&lt;Object&gt; resultSet = typedQuery.getResultList();\r\n                log.info(&quot;found {}&quot;, resultSet);\r\n                return resultSet.size() == 0;\r\n            }\r\n            return true;\r\n        }\r\n    }\r\n\r\nin case of you want use @Unique more than once for the same entity:\r\n\r\n    @Target(ElementType.TYPE)\r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    @Documented\r\n    public @interface Uniques {\r\n        Unique[] value();\r\n    }\r\n\r\nThe JPA entity:\r\n\r\n    @Unique(fields ={&quot;name&quot;, &quot;email&quot;}, primaryKey = &quot;id&quot;)\r\n    @Unique(fields ={&quot;phoneNumber&quot;}, primaryKey = &quot;id&quot;)\r\n    public class User implements Serializable {\r\n    \r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        @Column(name = &quot;user_id&quot;)\r\n        private Integer id;\r\n    \r\n        @Column(length = 60, nullable = false)\r\n        private String name;\r\n\r\n        @Column(length = 128, nullable = false, unique = true)\r\n        private String email;\r\n\r\n        @Column(length = 30, nullable = false)\r\n        private String phoneNumber;\r\n    }","title":"hibernate unique key validation","body":"<p>From my point of view the solutions provided here are missing very important case, which is update. We have to consider the primary key while asking our JPA APIs for persist or megre, So you <strong>MUST</strong> exclude the current entity from the uniqueness check (by using the primary key).</p>\n<p>The below demonstration uses Spring Framework.</p>\n<p>The annotation:</p>\n<pre><code>import javax.validation.Constraint;\nimport javax.validation.Payload;\nimport java.lang.annotation.*;\n\n@Target(ElementType.TYPE)\n@Retention(RetentionPolicy.RUNTIME)\n@Documented\n@Constraint(validatedBy = UniqueValidator.class)\npublic @interface Unique {\n    String[] fields();\n    String primaryKey();\n\n    String message() default &quot;Email address must be unique!&quot;;\n\n    Class&lt;?&gt;[] groups() default {};\n\n    Class&lt;? extends Payload&gt;[] payload() default {};\n\n    @Target({ ElementType.TYPE })\n    @Retention(RetentionPolicy.RUNTIME)\n    @Documented\n    @interface List {\n        Unique[] value();\n    }\n}\n</code></pre>\n<p>Annotation validator implementation:</p>\n<pre><code>import lombok.extern.slf4j.Slf4j;\nimport org.springframework.stereotype.Component;\nimport javax.persistence.EntityManager;\nimport javax.persistence.PersistenceContext;\nimport javax.persistence.Query;\nimport javax.persistence.criteria.CriteriaBuilder;\nimport javax.persistence.criteria.CriteriaQuery;\nimport javax.persistence.criteria.Predicate;\nimport javax.persistence.criteria.Root;\nimport javax.validation.ConstraintValidator;\nimport javax.validation.ConstraintValidatorContext;\nimport java.beans.PropertyDescriptor;\nimport java.io.Serializable;\nimport java.lang.reflect.Method;\nimport java.util.ArrayList;\nimport java.util.List;\n\n@Slf4j\n@Component\npublic class UniqueValidator implements ConstraintValidator&lt;Unique, Serializable&gt; {\n    @Autowied\n    private EntityManager entityManager;\n\n    private String[] fields;\n    private String primaryKey;\n\n    @Override\n    public void initialize(Unique constraintAnnotation) {\n        this.fields = constraintAnnotation.fields();\n        this.primaryKey = constraintAnnotation.primaryKey();\n    }\n\n    @Override\n    public boolean isValid(Serializable target, ConstraintValidatorContext context) {\n        log.info(&quot;start validation...&quot;);\n        if(entityManager != null) {\n            Class entityClass = target.getClass();\n            CriteriaBuilder criteriaBuilder = entityManager.getCriteriaBuilder();\n            CriteriaQuery&lt;?&gt; criteriaQuery = criteriaBuilder.createQuery(entityClass);\n            Root&lt;?&gt; root = criteriaQuery.from(entityClass);\n            List&lt;Predicate&gt; predicates = new ArrayList(fields.length + 1);\n\n            try {\n                PropertyDescriptor desc = new PropertyDescriptor(primaryKey, entityClass);\n                Method readMethod = desc.getReadMethod();\n                Object propertyValue = readMethod.invoke(target);\n                Predicate predicate = criteriaBuilder.notEqual(root.get(primaryKey), propertyValue);\n                predicates.add(predicate);\n\n                for (int i = 0; i &lt; fields.length; i++) {\n                    String propertyName = fields[i];\n                    desc = new PropertyDescriptor(propertyName, entityClass);\n                    readMethod = desc.getReadMethod();\n                    propertyValue = readMethod.invoke(target);\n                    predicate = criteriaBuilder.equal(root.get(propertyName), propertyValue);\n                    predicates.add(predicate);\n                }\n            } catch (Exception e) {\n                e.printStackTrace();\n            }\n\n            criteriaQuery.where(predicates.toArray(new Predicate[predicates.size()]));\n            Query typedQuery = entityManager.createQuery(criteriaQuery);\n            List&lt;Object&gt; resultSet = typedQuery.getResultList();\n            log.info(&quot;found {}&quot;, resultSet);\n            return resultSet.size() == 0;\n        }\n        return true;\n    }\n}\n</code></pre>\n<p>in case of you want use @Unique more than once for the same entity:</p>\n<pre><code>@Target(ElementType.TYPE)\n@Retention(RetentionPolicy.RUNTIME)\n@Documented\npublic @interface Uniques {\n    Unique[] value();\n}\n</code></pre>\n<p>The JPA entity:</p>\n<pre><code>@Unique(fields ={&quot;name&quot;, &quot;email&quot;}, primaryKey = &quot;id&quot;)\n@Unique(fields ={&quot;phoneNumber&quot;}, primaryKey = &quot;id&quot;)\npublic class User implements Serializable {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;user_id&quot;)\n    private Integer id;\n\n    @Column(length = 60, nullable = false)\n    private String name;\n\n    @Column(length = 128, nullable = false, unique = true)\n    private String email;\n\n    @Column(length = 30, nullable = false)\n    private String phoneNumber;\n}\n</code></pre>\n"}],"owner":{"account_id":255877,"reputation":6710,"user_id":536205,"accept_rate":83,"display_name":"nidhin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":33108,"favorite_count":0,"down_vote_count":0,"up_vote_count":18,"accepted_answer_id":4733441,"answer_count":7,"score":18,"last_activity_date":1686894550,"creation_date":1294302507,"question_id":4613055,"body_markdown":"I have a field, say, `user_name`, that should be unique in a table.\r\n\r\nWhat is the best way for validating it using Spring/Hibernate validation?","title":"hibernate unique key validation","body":"<p>I have a field, say, <code>user_name</code>, that should be unique in a table.</p>\n\n<p>What is the best way for validating it using Spring/Hibernate validation?</p>\n"},{"tags":["java","hibernate"],"owner":{"account_id":2814657,"reputation":261,"user_id":2420079,"display_name":"user2420079"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686894412,"creation_date":1686894412,"question_id":76487269,"body_markdown":"I have a following code in a pre Hibernate\r\n\r\n```\r\nTable table = namespace.locateTable(qualifiedTableName.getObjectName());\r\nif (table == null) {\r\n    table = namespace.createTable(qualifiedTableName.getObjectName(), false);\r\n}\r\n```\r\n\r\nIn hibernate 6.0 the signature of create table is changed to:\r\n\r\n```\r\n public Table createTable(Identifier logicalTableName, Function&lt;Identifier, Table&gt; creator);\r\n```\r\n\r\nSo it does not support the boolean type anymore. I am trying to find any sample of createTable instance in web for hibernate 6.0, but nothing useful was found. Could you please share any ideas or resources about the createTable with the new signature.","title":"Hibernate 6.0 CreateTable Issue","body":"<p>I have a following code in a pre Hibernate</p>\n<pre><code>Table table = namespace.locateTable(qualifiedTableName.getObjectName());\nif (table == null) {\n    table = namespace.createTable(qualifiedTableName.getObjectName(), false);\n}\n</code></pre>\n<p>In hibernate 6.0 the signature of create table is changed to:</p>\n<pre><code> public Table createTable(Identifier logicalTableName, Function&lt;Identifier, Table&gt; creator);\n</code></pre>\n<p>So it does not support the boolean type anymore. I am trying to find any sample of createTable instance in web for hibernate 6.0, but nothing useful was found. Could you please share any ideas or resources about the createTable with the new signature.</p>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1686894967,"post_id":76487214,"comment_id":134863660,"body_markdown":"I would guess that the transaction hasn&#39;t been committed at that point. You could use `@TransactionalEventListener` so that you listener is call when the commit of the transaction in which the message was sent is complete.","body":"I would guess that the transaction hasn&#39;t been committed at that point. You could use <code>@TransactionalEventListener</code> so that you listener is call when the commit of the transaction in which the message was sent is complete."},{"owner":{"account_id":17083914,"reputation":231,"user_id":12361701,"display_name":"Esmay Kapol"},"score":0,"creation_date":1686896432,"post_id":76487214,"comment_id":134863874,"body_markdown":"@tgdavies I just tried your suggestion but the same problem still exists. I added `@Transactional` to my Service method aswel, because I read that `@TransactionEventListener` must be fired from within a transaction.","body":"@tgdavies I just tried your suggestion but the same problem still exists. I added <code>@Transactional</code> to my Service method aswel, because I read that <code>@TransactionEventListener</code> must be fired from within a transaction."}],"owner":{"account_id":17083914,"reputation":231,"user_id":12361701,"display_name":"Esmay Kapol"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686893686,"creation_date":1686893686,"question_id":76487214,"body_markdown":"I&#39;m trying to trigger an event whenever a new entity is created in the database. To do so I am using an event and listener. I pass the Listing entity directly and try to do stuff with it, however when I try to get relational objects is always returns zero.\r\n\r\nListingService.java\r\n\r\n```java\r\npackage com.example.demo.service;\r\n\r\nimport com.example.demo.domain.Listing;\r\nimport com.example.demo.domain.ListingProduct;\r\nimport com.example.demo.domain.Platform;\r\nimport com.example.demo.domain.Product;\r\nimport com.example.demo.dto.ListingDto;\r\nimport com.example.demo.dto.ProductDto;\r\nimport com.example.demo.event.ListingCreatedEvent;\r\nimport com.example.demo.repository.ListingProductRepository;\r\nimport com.example.demo.repository.ListingRepository;\r\nimport com.example.demo.repository.PlatformRepository;\r\nimport com.example.demo.repository.ProductRepository;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.context.ApplicationEventPublisher;\r\nimport org.springframework.http.HttpStatus;\r\nimport org.springframework.stereotype.Service;\r\nimport org.springframework.transaction.annotation.Transactional;\r\nimport org.springframework.web.server.ResponseStatusException;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\nimport java.util.Optional;\r\n\r\n@Service\r\npublic class ListingService {\r\n\r\n    @Autowired\r\n    private ListingRepository listingRepository;\r\n\r\n    @Autowired\r\n    private ProductRepository productRepository;\r\n\r\n    @Autowired\r\n    private PlatformRepository platformRepository;\r\n\r\n    @Autowired\r\n    private ListingProductRepository listingProductRepository;\r\n    \r\n    @Autowired\r\n    private ApplicationEventPublisher applicationEventPublisher;\r\n\r\n    public Listing createListingWithProducts(ListingDto listingDto) {\r\n        Optional&lt;Listing&gt; listingOptional = this.listingRepository.findByUniqueIdentifier(listingDto.getListing());\r\n\r\n        if (listingOptional.isPresent())\r\n            throw new ResponseStatusException(\r\n                    HttpStatus.BAD_REQUEST, &quot;Listing with this unique identifier already exists.&quot;\r\n            );\r\n\r\n        Platform platform = this.platformRepository.findByName(listingDto.getPlatform())\r\n                .orElseGet(() -&gt; this.platformRepository.save(new Platform(listingDto.getPlatform())));\r\n\r\n        Listing listing = new Listing(listingDto.getListing());\r\n        listing.setPlatform(platform);\r\n\r\n        this.listingRepository.save(listing);\r\n\r\n        List&lt;ListingProduct&gt; listingProducts = new ArrayList&lt;&gt;();\r\n\r\n        for (ProductDto productDto : listingDto.getProducts()) {\r\n            Product product = this.productRepository.findByName(productDto.getName())\r\n                    .orElseGet(() -&gt; this.productRepository.save(new Product(productDto.getName())));\r\n\r\n            ListingProduct listingProduct = new ListingProduct();\r\n            listingProduct.setProduct(product);\r\n            listingProduct.setListing(listing);\r\n            listingProduct.setListingType(productDto.getListingType());\r\n            listingProduct.setCredits(productDto.getCredits());\r\n\r\n            listingProducts.add(listingProduct);\r\n        }\r\n        this.listingProductRepository.saveAll(listingProducts);\r\n        this.applicationEventPublisher.publishEvent(new ListingCreatedEvent(listing));\r\n        return listing;\r\n    }\r\n}\r\n```\r\n\r\nListingCreatedEvent.java\r\n```\r\npackage com.example.demo.event;\r\n\r\nimport com.example.demo.domain.Listing;\r\n\r\npublic class ListingCreatedEvent {\r\n    private Listing listing;\r\n\r\n    public ListingCreatedEvent(Listing listing) {\r\n        this.listing = listing;\r\n    }\r\n\r\n    public Listing getListing() {\r\n        return this.listing;\r\n    }\r\n}\r\n```\r\n\r\nListingEventListener.java\r\n```\r\npackage com.example.demo.listener;\r\n\r\nimport com.example.demo.domain.Listing;\r\nimport com.example.demo.event.ListingCreatedEvent;\r\nimport com.example.demo.repository.AlertRepository;\r\nimport com.example.demo.repository.ListingRepository;\r\nimport com.example.demo.service.RateLimitedTelegramService;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.context.event.EventListener;\r\nimport org.springframework.scheduling.annotation.Async;\r\nimport org.springframework.stereotype.Component;\r\n\r\nimport java.util.Optional;\r\n\r\n@Component\r\npublic class ListingEventListener {\r\n    @Autowired\r\n    private RateLimitedTelegramService rateLimitedTelegramService;\r\n\r\n    @Autowired\r\n    private AlertRepository alertRepository;\r\n\r\n    @Autowired\r\n    private ListingRepository listingRepository;\r\n\r\n    @EventListener\r\n    public void handleListingCreatedEvent(ListingCreatedEvent event) {\r\n\r\n        Optional&lt;Listing&gt; optionalListing = this.listingRepository.findById(event.getListing().getId());\r\n\r\n        if (optionalListing.isEmpty())\r\n            return;\r\n\r\n        Listing listing = optionalListing.get();\r\n\r\n        System.out.println(listing.getListingProducts().size());\r\n    }\r\n}\r\n```\r\n\r\nWhat have I tried so far? To be honest Spring Boot is quite new for me but I assume it has something to do with having the database not yet updated. So I added `@Transactional` to my Service but that didn&#39;t work.\r\n\r\nThen I tried to flush the database manually in my service, but that also didn&#39;t work.\r\n\r\nThe weird thing is, in my `handleListingCreatedEvent` method, if I get a random Listing by an ID it works, and it does print the size. However the newly passed Listing can&#39;t be found by the ID in the database (it does return an ID if I do listing.getId()) and I can&#39;t access the `event.getListing().getListingProducts().size()` directly.","title":"Spring Boot entity not persisted (yet)","body":"<p>I'm trying to trigger an event whenever a new entity is created in the database. To do so I am using an event and listener. I pass the Listing entity directly and try to do stuff with it, however when I try to get relational objects is always returns zero.</p>\n<p>ListingService.java</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.demo.service;\n\nimport com.example.demo.domain.Listing;\nimport com.example.demo.domain.ListingProduct;\nimport com.example.demo.domain.Platform;\nimport com.example.demo.domain.Product;\nimport com.example.demo.dto.ListingDto;\nimport com.example.demo.dto.ProductDto;\nimport com.example.demo.event.ListingCreatedEvent;\nimport com.example.demo.repository.ListingProductRepository;\nimport com.example.demo.repository.ListingRepository;\nimport com.example.demo.repository.PlatformRepository;\nimport com.example.demo.repository.ProductRepository;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.context.ApplicationEventPublisher;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.stereotype.Service;\nimport org.springframework.transaction.annotation.Transactional;\nimport org.springframework.web.server.ResponseStatusException;\n\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.Optional;\n\n@Service\npublic class ListingService {\n\n    @Autowired\n    private ListingRepository listingRepository;\n\n    @Autowired\n    private ProductRepository productRepository;\n\n    @Autowired\n    private PlatformRepository platformRepository;\n\n    @Autowired\n    private ListingProductRepository listingProductRepository;\n    \n    @Autowired\n    private ApplicationEventPublisher applicationEventPublisher;\n\n    public Listing createListingWithProducts(ListingDto listingDto) {\n        Optional&lt;Listing&gt; listingOptional = this.listingRepository.findByUniqueIdentifier(listingDto.getListing());\n\n        if (listingOptional.isPresent())\n            throw new ResponseStatusException(\n                    HttpStatus.BAD_REQUEST, &quot;Listing with this unique identifier already exists.&quot;\n            );\n\n        Platform platform = this.platformRepository.findByName(listingDto.getPlatform())\n                .orElseGet(() -&gt; this.platformRepository.save(new Platform(listingDto.getPlatform())));\n\n        Listing listing = new Listing(listingDto.getListing());\n        listing.setPlatform(platform);\n\n        this.listingRepository.save(listing);\n\n        List&lt;ListingProduct&gt; listingProducts = new ArrayList&lt;&gt;();\n\n        for (ProductDto productDto : listingDto.getProducts()) {\n            Product product = this.productRepository.findByName(productDto.getName())\n                    .orElseGet(() -&gt; this.productRepository.save(new Product(productDto.getName())));\n\n            ListingProduct listingProduct = new ListingProduct();\n            listingProduct.setProduct(product);\n            listingProduct.setListing(listing);\n            listingProduct.setListingType(productDto.getListingType());\n            listingProduct.setCredits(productDto.getCredits());\n\n            listingProducts.add(listingProduct);\n        }\n        this.listingProductRepository.saveAll(listingProducts);\n        this.applicationEventPublisher.publishEvent(new ListingCreatedEvent(listing));\n        return listing;\n    }\n}\n</code></pre>\n<p>ListingCreatedEvent.java</p>\n<pre><code>package com.example.demo.event;\n\nimport com.example.demo.domain.Listing;\n\npublic class ListingCreatedEvent {\n    private Listing listing;\n\n    public ListingCreatedEvent(Listing listing) {\n        this.listing = listing;\n    }\n\n    public Listing getListing() {\n        return this.listing;\n    }\n}\n</code></pre>\n<p>ListingEventListener.java</p>\n<pre><code>package com.example.demo.listener;\n\nimport com.example.demo.domain.Listing;\nimport com.example.demo.event.ListingCreatedEvent;\nimport com.example.demo.repository.AlertRepository;\nimport com.example.demo.repository.ListingRepository;\nimport com.example.demo.service.RateLimitedTelegramService;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.context.event.EventListener;\nimport org.springframework.scheduling.annotation.Async;\nimport org.springframework.stereotype.Component;\n\nimport java.util.Optional;\n\n@Component\npublic class ListingEventListener {\n    @Autowired\n    private RateLimitedTelegramService rateLimitedTelegramService;\n\n    @Autowired\n    private AlertRepository alertRepository;\n\n    @Autowired\n    private ListingRepository listingRepository;\n\n    @EventListener\n    public void handleListingCreatedEvent(ListingCreatedEvent event) {\n\n        Optional&lt;Listing&gt; optionalListing = this.listingRepository.findById(event.getListing().getId());\n\n        if (optionalListing.isEmpty())\n            return;\n\n        Listing listing = optionalListing.get();\n\n        System.out.println(listing.getListingProducts().size());\n    }\n}\n</code></pre>\n<p>What have I tried so far? To be honest Spring Boot is quite new for me but I assume it has something to do with having the database not yet updated. So I added <code>@Transactional</code> to my Service but that didn't work.</p>\n<p>Then I tried to flush the database manually in my service, but that also didn't work.</p>\n<p>The weird thing is, in my <code>handleListingCreatedEvent</code> method, if I get a random Listing by an ID it works, and it does print the size. However the newly passed Listing can't be found by the ID in the database (it does return an ID if I do listing.getId()) and I can't access the <code>event.getListing().getListingProducts().size()</code> directly.</p>\n"},{"tags":["java","spring-boot","jpa","spring-data-jpa","repository"],"comments":[{"owner":{"account_id":7646924,"reputation":1248,"user_id":5797253,"accept_rate":46,"display_name":"crimson589"},"score":0,"creation_date":1686890465,"post_id":76486966,"comment_id":134863163,"body_markdown":"Are you looking to return a different User object? what do you want to return when it&#39;s not found? if you want to return another User then you can use Optional&#39;s `orElse()` or `orElseGet()`","body":"Are you looking to return a different User object? what do you want to return when it&#39;s not found? if you want to return another User then you can use Optional&#39;s <code>orElse()</code> or <code>orElseGet()</code>"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1686891442,"post_id":76486966,"comment_id":134863253,"body_markdown":"I would leave the repository to return what is actually in the DB, and return default objects in your resource, as you are, or introduce another component which wraps your repository and provides those semantics. I would not change the behaviour of the repository from the default.","body":"I would leave the repository to return what is actually in the DB, and return default objects in your resource, as you are, or introduce another component which wraps your repository and provides those semantics. I would not change the behaviour of the repository from the default."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1686891493,"post_id":76486966,"comment_id":134863257,"body_markdown":"By the way, is that your actual code? The return value of `findByUsernameAndStatusFalse` is ignored.","body":"By the way, is that your actual code? The return value of <code>findByUsernameAndStatusFalse</code> is ignored."}],"answers":[{"tags":[],"owner":{"account_id":24597681,"reputation":125,"user_id":18500877,"display_name":"lavantho0508"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1686890536,"creation_date":1686890536,"answer_id":76487008,"question_id":76486966,"body_markdown":"You can use : \r\n   \r\n\r\n    public ResponseEntity&lt;User&gt; getUser(@PathVariable String username) {\r\n            User userExample = new User();\r\n            userExample.setUsername(username);\r\n            userExample.setStatus(false);\r\n            User user = userRepository.findOne(Example.of(userExample)).orElseThrow(\r\n        () -&gt; new RuntimeException(&quot;Username not found&quot; + username);\r\n    );\r\n            return ResponseEntity.ok(user);\r\n        }\r\n***the above code i use findOne and pass an example to search for an object, when not found throws an exception***\r\n\r\n**please add this method to controller**\r\n\r\n        @ExceptionHandler(RuntimeException.class)\r\n        public Map&lt;String,Object&gt; handleException(RuntimeException e) {\r\n            Map&lt;String,Object&gt; result = new HashMap&lt;&gt;();\r\n            result.put(&quot;status&quot;, HttpStatus.INTERNAL_SERVER_ERROR.value());\r\n            result.put(&quot;message&quot;, e.getMessage());\r\n            return result;\r\n        }\r\n**When you add this code, all RuntimeException is thrown then api will return status as 500 and message is messgae of that Exception**","title":"Is there anyway to return value when not found in findby jpa repository","body":"<p>You can use :</p>\n<pre><code>public ResponseEntity&lt;User&gt; getUser(@PathVariable String username) {\n        User userExample = new User();\n        userExample.setUsername(username);\n        userExample.setStatus(false);\n        User user = userRepository.findOne(Example.of(userExample)).orElseThrow(\n    () -&gt; new RuntimeException(&quot;Username not found&quot; + username);\n);\n        return ResponseEntity.ok(user);\n    }\n</code></pre>\n<p><em><strong>the above code i use findOne and pass an example to search for an object, when not found throws an exception</strong></em></p>\n<p><strong>please add this method to controller</strong></p>\n<pre><code>    @ExceptionHandler(RuntimeException.class)\n    public Map&lt;String,Object&gt; handleException(RuntimeException e) {\n        Map&lt;String,Object&gt; result = new HashMap&lt;&gt;();\n        result.put(&quot;status&quot;, HttpStatus.INTERNAL_SERVER_ERROR.value());\n        result.put(&quot;message&quot;, e.getMessage());\n        return result;\n    }\n</code></pre>\n<p><strong>When you add this code, all RuntimeException is thrown then api will return status as 500 and message is messgae of that Exception</strong></p>\n"},{"tags":[],"owner":{"account_id":28829784,"reputation":67,"user_id":22080520,"display_name":"vesper"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1686892430,"creation_date":1686892430,"answer_id":76487116,"question_id":76486966,"body_markdown":"`java.util.Optional#orElse`\r\n\r\nthis will return a default value if the optional doesnt have a value. example:\r\n\r\n`User user = userRepository.findByUsernameAndStatusFalse(username).orElse(null);`","title":"Is there anyway to return value when not found in findby jpa repository","body":"<p><code>java.util.Optional#orElse</code></p>\n<p>this will return a default value if the optional doesnt have a value. example:</p>\n<p><code>User user = userRepository.findByUsernameAndStatusFalse(username).orElse(null);</code></p>\n"}],"owner":{"account_id":28409447,"reputation":19,"user_id":21733036,"display_name":"MIM"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":458,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76487116,"answer_count":2,"score":1,"last_activity_date":1686892430,"creation_date":1686889838,"question_id":76486966,"body_markdown":"I have create a repository query. I want to response value when not found.\r\n\r\nHere are my code:\r\nin repository:\r\n```\r\nOptional&lt;User&gt; findByUsernameAndStatusFalse(String username);\r\n```\r\n\r\nin resource:\r\n\r\n```\r\n@GetMapping(&quot;/user/username/{username}&quot;)\r\n    public ResponseEntity&lt;User&gt; getUser(@PathVariable String username) {\r\n        Optional&lt;User&gt; user = userRepository.findByUsernameAndStatusFalse(username);\r\n        return ResponseUtil.wrapOrNotFound(user);\r\n    }\r\n```","title":"Is there anyway to return value when not found in findby jpa repository","body":"<p>I have create a repository query. I want to response value when not found.</p>\n<p>Here are my code:\nin repository:</p>\n<pre><code>Optional&lt;User&gt; findByUsernameAndStatusFalse(String username);\n</code></pre>\n<p>in resource:</p>\n<pre><code>@GetMapping(&quot;/user/username/{username}&quot;)\n    public ResponseEntity&lt;User&gt; getUser(@PathVariable String username) {\n        Optional&lt;User&gt; user = userRepository.findByUsernameAndStatusFalse(username);\n        return ResponseUtil.wrapOrNotFound(user);\n    }\n</code></pre>\n"},{"tags":["java","eclipse","autocomplete","content-assist"],"comments":[{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1686853224,"post_id":76484336,"comment_id":134858882,"body_markdown":"Maybe [this](https://mastodon.social/@howlger/110462282002158739). In _General &gt; Key_ select a command, set the focus into the field _Binding_ and hit Ctrl+Space. If Ctrl+Space is not shown, something is catching the shortcut so Eclipse and other applications do not get Ctrl+Space.","body":"Maybe <a href=\"https://mastodon.social/@howlger/110462282002158739\" rel=\"nofollow noreferrer\">this</a>. In <i>General &gt; Key</i> select a command, set the focus into the field <i>Binding</i> and hit Ctrl+Space. If Ctrl+Space is not shown, something is catching the shortcut so Eclipse and other applications do not get Ctrl+Space."},{"owner":{"account_id":28751777,"reputation":11,"user_id":22019696,"display_name":"NathanH"},"score":0,"creation_date":1686853669,"post_id":76484336,"comment_id":134858953,"body_markdown":"@howlger Tried that and &#39;ctrl + space&#39; is showing, so I do not think another application or process is hijacking the keybind","body":"@howlger Tried that and &#39;ctrl + space&#39; is showing, so I do not think another application or process is hijacking the keybind"},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1686853838,"post_id":76484336,"comment_id":134858992,"body_markdown":"Please show _General &gt; Keys_ filtered with `Ctrl+Space`. If you switch to a fresh workspace, does the issue persist?","body":"Please show <i>General &gt; Keys</i> filtered with <code>Ctrl+Space</code>. If you switch to a fresh workspace, does the issue persist?"},{"owner":{"account_id":28751777,"reputation":11,"user_id":22019696,"display_name":"NathanH"},"score":0,"creation_date":1686854210,"post_id":76484336,"comment_id":134859045,"body_markdown":"@howlger I have a photo showing keybinds sorted in order already, but I will add a photo with only &#39;ctrl + space&#39; singled out. \nAnd yes, the issue persists across all workspaces, and newly created ones.","body":"@howlger I have a photo showing keybinds sorted in order already, but I will add a photo with only &#39;ctrl + space&#39; singled out.  And yes, the issue persists across all workspaces, and newly created ones."},{"owner":{"account_id":13796,"reputation":19353,"user_id":27905,"display_name":"nitind"},"score":0,"creation_date":1686854750,"post_id":76484336,"comment_id":134859142,"body_markdown":"Try restoring the defaults on the &#39;Window -&gt; Preferences -&gt; Java -&gt; Editor -&gt; Content Assist -&gt; Advanced&#39; page, and if that doesn&#39;t fix it, try disabling that non-blocking option at the bottom.","body":"Try restoring the defaults on the &#39;Window -&gt; Preferences -&gt; Java -&gt; Editor -&gt; Content Assist -&gt; Advanced&#39; page, and if that doesn&#39;t fix it, try disabling that non-blocking option at the bottom."},{"owner":{"account_id":28751777,"reputation":11,"user_id":22019696,"display_name":"NathanH"},"score":0,"creation_date":1686855523,"post_id":76484336,"comment_id":134859284,"body_markdown":"@nitind Goodness, that solved it. I thought I already tried that &gt;_&gt;\nFeel free to post that as the answer","body":"@nitind Goodness, that solved it. I thought I already tried that &gt;_&gt; Feel free to post that as the answer"},{"owner":{"account_id":13796,"reputation":19353,"user_id":27905,"display_name":"nitind"},"score":0,"creation_date":1686858976,"post_id":76484336,"comment_id":134859913,"body_markdown":"Which one ended up clearing up the problem, @NathanH?","body":"Which one ended up clearing up the problem, @NathanH?"},{"owner":{"account_id":28751777,"reputation":11,"user_id":22019696,"display_name":"NathanH"},"score":0,"creation_date":1686861935,"post_id":76484336,"comment_id":134860472,"body_markdown":"@nitind, apologies. I got ahead of myself and didn&#39;t clarify. Unchecking &#39;Enable non-blocking completion&#39; seemed to have worked.","body":"@nitind, apologies. I got ahead of myself and didn&#39;t clarify. Unchecking &#39;Enable non-blocking completion&#39; seemed to have worked."},{"owner":{"account_id":10972151,"reputation":320,"user_id":8062035,"display_name":"Julian Broudy"},"score":0,"creation_date":1687178623,"post_id":76484336,"comment_id":134896225,"body_markdown":"If you happened to install [Microsoft PowerToys](https://learn.microsoft.com/en-us/windows/powertoys/#:~:text=Microsoft%20PowerToys,-%3A%20Utilities%20to%20customize) and enable the `Peek` functionality. Then change `Peek`&#39;s activation shortcut or disable it.","body":"If you happened to install <a href=\"https://learn.microsoft.com/en-us/windows/powertoys/#:~:text=Microsoft%20PowerToys,-%3A%20Utilities%20to%20customize\" rel=\"nofollow noreferrer\">Microsoft PowerToys</a> and enable the <code>Peek</code> functionality. Then change <code>Peek</code>&#39;s activation shortcut or disable it."}],"answers":[{"tags":[],"owner":{"account_id":13796,"reputation":19353,"user_id":27905,"display_name":"nitind"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686891958,"creation_date":1686891958,"answer_id":76487093,"question_id":76484336,"body_markdown":"Always try restoring the defaults on the &#39;Window -&gt; Preferences -&gt; Java -&gt; Editor -&gt; Content Assist -&gt; Advanced&#39; page, and if that doesn&#39;t fix it, try disabling that non-blocking option at the bottom. It&#39;s one of the few significant changes to the overall behavior in that area for a while.","title":"Eclipse 2023-06 suddenly no longer auto completing &#39;sysout&#39;","body":"<p>Always try restoring the defaults on the 'Window -&gt; Preferences -&gt; Java -&gt; Editor -&gt; Content Assist -&gt; Advanced' page, and if that doesn't fix it, try disabling that non-blocking option at the bottom. It's one of the few significant changes to the overall behavior in that area for a while.</p>\n"}],"owner":{"account_id":28751777,"reputation":11,"user_id":22019696,"display_name":"NathanH"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":256,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1686891958,"creation_date":1686851789,"question_id":76484336,"body_markdown":"While I recognize that this problem has been asked before, I have attempted solutions from multiple different threads with no solution as of yet.\r\n5 days ago when I was using Eclipse I had no issues whatsoever, now as of today I suddenly cannot auto complete &#39;sysout&#39; with &#39;ctrl + space&#39;.\r\nAs far as I am aware, there were no updates to Eclipse.\r\n\r\n\r\nI have gone through &#39;Window -&gt; Preferences -&gt; Java -&gt; Editor -&gt; Content Assist -&gt; Advanced&#39; and ensured that nothing was checked that interfered or conflicted with Eclipse being able to auto complete the java command, then reset to defaults.\r\nI checked that &#39;syso&#39; was a listed and active template.\r\nI made sure that there was not another keybind that was conflicting with &#39;ctrl + space&#39;\r\n[Window -&gt; ... -&gt; Content Assist -&gt; Advanced](https://i.stack.imgur.com/RfSb8.png)\r\n\r\n[Window -&gt; Preferences -&gt; General -&gt; Keys](https://i.stack.imgur.com/BftNz.png)\r\n\r\n[General -&gt; Keys(filtered)][1]\r\n\r\nI did discover however that after I close Eclipse, and then open it back up, I can autocomplete &#39;sysout&#39; once or twice, and then it stops and just pulls up the proposal context menu instead.\r\nThe below gif does not show the proposal menu for some reason and I couldn&#39;t get it to capture, but it most definitely shows up with &#39;System.out.println();&#39; as the only option:\r\n[Attempting to use &#39;sysout&#39; shortcut](https://i.stack.imgur.com/BGkcb.gif)\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/C8OSN.png","title":"Eclipse 2023-06 suddenly no longer auto completing &#39;sysout&#39;","body":"<p>While I recognize that this problem has been asked before, I have attempted solutions from multiple different threads with no solution as of yet.\n5 days ago when I was using Eclipse I had no issues whatsoever, now as of today I suddenly cannot auto complete 'sysout' with 'ctrl + space'.\nAs far as I am aware, there were no updates to Eclipse.</p>\n<p>I have gone through 'Window -&gt; Preferences -&gt; Java -&gt; Editor -&gt; Content Assist -&gt; Advanced' and ensured that nothing was checked that interfered or conflicted with Eclipse being able to auto complete the java command, then reset to defaults.\nI checked that 'syso' was a listed and active template.\nI made sure that there was not another keybind that was conflicting with 'ctrl + space'\n<a href=\"https://i.stack.imgur.com/RfSb8.png\" rel=\"nofollow noreferrer\">Window -&gt; ... -&gt; Content Assist -&gt; Advanced</a></p>\n<p><a href=\"https://i.stack.imgur.com/BftNz.png\" rel=\"nofollow noreferrer\">Window -&gt; Preferences -&gt; General -&gt; Keys</a></p>\n<p><a href=\"https://i.stack.imgur.com/C8OSN.png\" rel=\"nofollow noreferrer\">General -&gt; Keys(filtered)</a></p>\n<p>I did discover however that after I close Eclipse, and then open it back up, I can autocomplete 'sysout' once or twice, and then it stops and just pulls up the proposal context menu instead.\nThe below gif does not show the proposal menu for some reason and I couldn't get it to capture, but it most definitely shows up with 'System.out.println();' as the only option:\n<a href=\"https://i.stack.imgur.com/BGkcb.gif\" rel=\"nofollow noreferrer\">Attempting to use 'sysout' shortcut</a></p>\n"},{"tags":["java","floating-point","precision"],"comments":[{"owner":{"account_id":11104856,"reputation":1527,"user_id":8152324,"display_name":"ndc85430"},"score":0,"creation_date":1686888819,"post_id":76486887,"comment_id":134863047,"body_markdown":"Does this answer your question? [Division of integers in Java](https://stackoverflow.com/questions/7220681/division-of-integers-in-java)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/7220681/division-of-integers-in-java\">Division of integers in Java</a>"},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1686889343,"post_id":76486887,"comment_id":134863076,"body_markdown":"*&quot;Multiplication of int with float resulting wrong.&quot;* - The problem is that you are NOT multiplying an int and a float.  You are multiplying and dividing ints!","body":"<i>&quot;Multiplication of int with float resulting wrong.&quot;</i> - The problem is that you are NOT multiplying an int and a float.  You are multiplying and dividing ints!"},{"owner":{"account_id":3710720,"reputation":25429,"user_id":3088138,"display_name":"Lutz Lehmann"},"score":0,"creation_date":1686890617,"post_id":76486887,"comment_id":134863173,"body_markdown":"Design question: Why is `TempC` an int if you expect temperatures to have fractional parts? Making it a float too would automatically solve the problem in the computation.","body":"Design question: Why is <code>TempC</code> an int if you expect temperatures to have fractional parts? Making it a float too would automatically solve the problem in the computation."}],"answers":[{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686891501,"creation_date":1686888911,"answer_id":76486924,"question_id":76486887,"body_markdown":"&gt; _&quot;... Why decimal value set to zero?&quot;_\r\n\r\nThe reason this is happening is because the division of two _int_ values will result in an integer value, as opposed to a real&amp;mdash;_float_ or _double_.\r\n\r\nYou can remedy this by appending the _float_ or _double_ literal-suffix, to the end of either of those values.\r\n\r\nHere is an except from the _Java Tutorials_.  \r\n_[Primitive Data Types (The Java&amp;trade; Tutorials &amp;gt; Learning the Java Language &amp;gt; Language Basics)](https://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)_.\r\n\r\n&gt; _&quot;... A floating-point literal is of type float if it ends with the letter F or f; otherwise ... double and ... letter D or d. ...&quot;_\r\n\r\nOnly one literal-suffix is required, per arithmetic statement.&amp;nbsp; So the following will suffice.\r\n\r\n```java\r\ntempC * 9 / 5f\r\n```\r\n\r\nAs a final note, you _could_ specify a _double_ by simply writing it as _5.0_.  \r\nAlthough, you would then have to change _tempF_ to a _double_.\r\n\r\n```java\r\ndouble tempF = (tempC * 9 / 5.0) + 32;\r\n```","title":"Multiplication of int with float resulting wrong","body":"<blockquote>\n<p><em>&quot;... Why decimal value set to zero?&quot;</em></p>\n</blockquote>\n<p>The reason this is happening is because the division of two <em>int</em> values will result in an integer value, as opposed to a real—<em>float</em> or <em>double</em>.</p>\n<p>You can remedy this by appending the <em>float</em> or <em>double</em> literal-suffix, to the end of either of those values.</p>\n<p>Here is an except from the <em>Java Tutorials</em>.<br />\n<em><a href=\"https://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html\" rel=\"nofollow noreferrer\">Primitive Data Types (The Java™ Tutorials &gt; Learning the Java Language &gt; Language Basics)</a></em>.</p>\n<blockquote>\n<p><em>&quot;... A floating-point literal is of type float if it ends with the letter F or f; otherwise ... double and ... letter D or d. ...&quot;</em></p>\n</blockquote>\n<p>Only one literal-suffix is required, per arithmetic statement.  So the following will suffice.</p>\n<pre class=\"lang-java prettyprint-override\"><code>tempC * 9 / 5f\n</code></pre>\n<p>As a final note, you <em>could</em> specify a <em>double</em> by simply writing it as <em>5.0</em>.<br />\nAlthough, you would then have to change <em>tempF</em> to a <em>double</em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>double tempF = (tempC * 9 / 5.0) + 32;\n</code></pre>\n"}],"owner":{"account_id":3987561,"reputation":1,"user_id":3287668,"display_name":"Abhilash0496"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":92,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1686893968,"answer_count":1,"score":-1,"last_activity_date":1686891501,"creation_date":1686888044,"question_id":76486887,"body_markdown":"    import java.util.Scanner;\r\n    \r\n    public class Main {\r\n       public static void main(String[] args) {\r\n         Scanner input = new Scanner(System.in);\r\n         int tempC = input.nextInt();\r\n         float tempF = (tempC * 9 / 5) + 32;\r\n         System.out.println(tempF);\r\n       }\r\n    }\r\n\r\n**Expected output** - 109.4 \r\n\r\n**Current output** - 109.0 \r\n\r\nWhy decimal value  set to zero?","title":"Multiplication of int with float resulting wrong","body":"<pre><code>import java.util.Scanner;\n\npublic class Main {\n   public static void main(String[] args) {\n     Scanner input = new Scanner(System.in);\n     int tempC = input.nextInt();\n     float tempF = (tempC * 9 / 5) + 32;\n     System.out.println(tempF);\n   }\n}\n</code></pre>\n<p><strong>Expected output</strong> - 109.4</p>\n<p><strong>Current output</strong> - 109.0</p>\n<p>Why decimal value  set to zero?</p>\n"},{"tags":["java","methods","boolean"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1686812211,"post_id":76479840,"comment_id":134851251,"body_markdown":"debug your code, or at the very least put print statements in there.","body":"debug your code, or at the very least put print statements in there."},{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":0,"creation_date":1686813452,"post_id":76479840,"comment_id":134851528,"body_markdown":"You have a variable `Parity` in the main method and a method `Parity()`. The variable `Parity` only changes when you assign something to it. It doesn&#39;t change when you call the similarly called method `Parity()`.","body":"You have a variable <code>Parity</code> in the main method and a method <code>Parity()</code>. The variable <code>Parity</code> only changes when you assign something to it. It doesn&#39;t change when you call the similarly called method <code>Parity()</code>."}],"answers":[{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686891385,"creation_date":1686891385,"answer_id":76487056,"question_id":76479840,"body_markdown":"&gt; _&quot;When method Parity is called, boolean variable Parity does not change to incorporate method. ...&quot;_\r\n\r\nIn Java, there is no link between names.&amp;nbsp; Syntax, and ultimately the context of the statement, is used to disseminate the object.  \r\nThus, a class, method, and variable, all named _Parity_ would be different objects.\r\n\r\nYou&#39;ll have to assign the _Parity_ variable the returned value of the _Parity_ method.","title":"How to return a Boolean variable with two different parameter&#39;s?","body":"<blockquote>\n<p><em>&quot;When method Parity is called, boolean variable Parity does not change to incorporate method. ...&quot;</em></p>\n</blockquote>\n<p>In Java, there is no link between names.  Syntax, and ultimately the context of the statement, is used to disseminate the object.<br />\nThus, a class, method, and variable, all named <em>Parity</em> would be different objects.</p>\n<p>You'll have to assign the <em>Parity</em> variable the returned value of the <em>Parity</em> method.</p>\n"}],"owner":{"account_id":28825293,"reputation":1,"user_id":22076818,"display_name":"Tayfrax"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686891385,"creation_date":1686811913,"question_id":76479840,"body_markdown":"//When method Parity is called, boolean variable Parity does not change to incorporate method. I dont know what is being returned by the method, I assume its Val1 and Val2 but idk.\r\n\r\n       import java.util.Scanner;\r\n       import java.util.Random;\r\n      public class DiceRoll\r\n      {\r\n      public static void main (String[] args)\r\n      {\r\n           Scanner scan = new Scanner (System.in);\r\n           Random rand = new Random ();\r\n           \r\n           int gameNumber = 0;\r\n           int compPoint = 0;\r\n           int playerPoint = 0;\r\n           int currentGame = 0;\r\n           int compRoll = 0;\r\n           int playerRoll = 0;\r\n           int compRoll2 = 0;\r\n           int playerRoll2 = 0;\r\n           int sumComp = 0;\r\n           int sumPlayer = 0;\r\n           int Val1 = 0;\r\n           int Val2 =0;\r\n           boolean Parity = false;\r\n           \r\n           System.out.println (&quot; How many games? &quot;);\r\n           gameNumber = scan.nextInt ();\r\n           System.out.println (&quot;Number of games: &quot;+gameNumber);\r\n           \r\n           System.out.println (&quot;Computer Wins: &quot;+compPoint);\r\n           System.out.println (&quot;Player Wins: &quot;+playerPoint);\r\n           System.out.println (&quot;&quot;);\r\n           \r\n           currentGame = currentGame+1;\r\n           System.out.println (&quot;Current Game:&quot; +currentGame);\r\n           \r\n           compRoll = DiceRoll(10);\r\n           playerRoll = DiceRoll(10);\r\n           compRoll2 = DiceRoll (10);\r\n           playerRoll2 = DiceRoll (10);\r\n           sumComp = (compRoll + compRoll2);\r\n           sumPlayer = (playerRoll + playerRoll2);\r\n           \r\n           \r\n           System.out.printf (&quot;Computer: %d %d Total: %d \\nPlayer: %d %d Total: %d&quot; , compRoll, compRoll2,                         sumComp, playerRoll, playerRoll2, sumPlayer);\r\n           System.out.println (&quot;&quot;);\r\n           \r\n           //parityCheck = Val1;\r\n           if (Parity(Val1, Val2) == true)\r\n           {\r\n                System.out.println (&quot;Parity: True&quot;);\r\n           }\r\n           else\r\n           {\r\n                System.out.println (&quot;Parity: False&quot;);\r\n           }\r\n           \r\n                    \r\n           \r\n      }\r\n      public static int DiceRoll (int sides)\r\n      {\r\n          int rollTotal = 0 ;\r\n          int minRand = 1;\r\n          int maxRand = sides;\r\n          int range = (maxRand - minRand)+ 1;\r\n           \r\n           rollTotal = (int)(Math.random()* range) +minRand;\r\n           \r\n           return rollTotal;\r\n           \r\n      }\r\n      public static boolean Parity (int Val1, int Val2)\r\n      {\r\n           int evenSum = 0;\r\n           int oddSum = 0;\r\n           int sumComp2 = 0;\r\n           int sumPlayer2 = 0;\r\n           \r\n           sumComp2= Val1;\r\n           sumPlayer2= Val2;\r\n           \r\n          if (sumComp2 %2 == 0 &amp;&amp; sumPlayer2 == 0 || sumComp2 %2 == 1 &amp;&amp; sumPlayer2 == 1)\r\n           {\r\n                return true;\r\n           }\r\n           else\r\n           {\r\n                return false;\r\n           } \r\n           \r\n           //return ();\r\n      }\r\n }\r\n\r\nI have tried changing the println statements to display Val1 and Val2 but as the paramtres must call ints, they are unable to display anything but numbers.\r\n\r\n","title":"How to return a Boolean variable with two different parameter&#39;s?","body":"<p>//When method Parity is called, boolean variable Parity does not change to incorporate method. I dont know what is being returned by the method, I assume its Val1 and Val2 but idk.</p>\n<pre><code>   import java.util.Scanner;\n   import java.util.Random;\n  public class DiceRoll\n  {\n  public static void main (String[] args)\n  {\n       Scanner scan = new Scanner (System.in);\n       Random rand = new Random ();\n       \n       int gameNumber = 0;\n       int compPoint = 0;\n       int playerPoint = 0;\n       int currentGame = 0;\n       int compRoll = 0;\n       int playerRoll = 0;\n       int compRoll2 = 0;\n       int playerRoll2 = 0;\n       int sumComp = 0;\n       int sumPlayer = 0;\n       int Val1 = 0;\n       int Val2 =0;\n       boolean Parity = false;\n       \n       System.out.println (&quot; How many games? &quot;);\n       gameNumber = scan.nextInt ();\n       System.out.println (&quot;Number of games: &quot;+gameNumber);\n       \n       System.out.println (&quot;Computer Wins: &quot;+compPoint);\n       System.out.println (&quot;Player Wins: &quot;+playerPoint);\n       System.out.println (&quot;&quot;);\n       \n       currentGame = currentGame+1;\n       System.out.println (&quot;Current Game:&quot; +currentGame);\n       \n       compRoll = DiceRoll(10);\n       playerRoll = DiceRoll(10);\n       compRoll2 = DiceRoll (10);\n       playerRoll2 = DiceRoll (10);\n       sumComp = (compRoll + compRoll2);\n       sumPlayer = (playerRoll + playerRoll2);\n       \n       \n       System.out.printf (&quot;Computer: %d %d Total: %d \\nPlayer: %d %d Total: %d&quot; , compRoll, compRoll2,                         sumComp, playerRoll, playerRoll2, sumPlayer);\n       System.out.println (&quot;&quot;);\n       \n       //parityCheck = Val1;\n       if (Parity(Val1, Val2) == true)\n       {\n            System.out.println (&quot;Parity: True&quot;);\n       }\n       else\n       {\n            System.out.println (&quot;Parity: False&quot;);\n       }\n       \n                \n       \n  }\n  public static int DiceRoll (int sides)\n  {\n      int rollTotal = 0 ;\n      int minRand = 1;\n      int maxRand = sides;\n      int range = (maxRand - minRand)+ 1;\n       \n       rollTotal = (int)(Math.random()* range) +minRand;\n       \n       return rollTotal;\n       \n  }\n  public static boolean Parity (int Val1, int Val2)\n  {\n       int evenSum = 0;\n       int oddSum = 0;\n       int sumComp2 = 0;\n       int sumPlayer2 = 0;\n       \n       sumComp2= Val1;\n       sumPlayer2= Val2;\n       \n      if (sumComp2 %2 == 0 &amp;&amp; sumPlayer2 == 0 || sumComp2 %2 == 1 &amp;&amp; sumPlayer2 == 1)\n       {\n            return true;\n       }\n       else\n       {\n            return false;\n       } \n       \n       //return ();\n  }\n</code></pre>\n<p>}</p>\n<p>I have tried changing the println statements to display Val1 and Val2 but as the paramtres must call ints, they are unable to display anything but numbers.</p>\n"},{"tags":["java","inheritance","static"],"comments":[{"owner":{"account_id":2843847,"reputation":55833,"user_id":2442804,"accept_rate":80,"display_name":"luk2302"},"score":3,"creation_date":1686814923,"post_id":76480139,"comment_id":134851816,"body_markdown":"You get that output because j is initialized to 191919 and then decremented once, i is initialized to 0 and incremented once. What is there not to understand?","body":"You get that output because j is initialized to 191919 and then decremented once, i is initialized to 0 and incremented once. What is there not to understand?"},{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":0,"creation_date":1686819367,"post_id":76480139,"comment_id":134852698,"body_markdown":"Note that the code blocks in the class `ClassOne` (`{ --i; }` and `{ j++; }`) are [instance initializers](https://docs.oracle.com/javase/specs/jls/se17/html/jls-8.html#jls-8.6) and are only executed when you create a `new ClassOne()` instance.","body":"Note that the code blocks in the class <code>ClassOne</code> (<code>{ --i; }</code> and <code>{ j++; }</code>) are <a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-8.html#jls-8.6\" rel=\"nofollow noreferrer\">instance initializers</a> and are only executed when you create a <code>new ClassOne()</code> instance."},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1686890426,"post_id":76480139,"comment_id":134863160,"body_markdown":"Interesting topic, great question.","body":"Interesting topic, great question."}],"answers":[{"tags":[],"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686814676,"creation_date":1686814676,"answer_id":76480153,"question_id":76480139,"body_markdown":"`static int i, j = 191919;` only initializes `j` to 191919. `i` is initalized to the default, 0.","title":"how am i getting this output? i dont understand","body":"<p><code>static int i, j = 191919;</code> only initializes <code>j</code> to 191919. <code>i</code> is initalized to the default, 0.</p>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686890408,"creation_date":1686890408,"answer_id":76486994,"question_id":76480139,"body_markdown":"First, _ClassOne_ is created statically, assigning _j_ with _191919_.  \r\nThen, _ClassTwo_ is created statically, which then executes the _static initialization blocks_, incrementing _i_ by 1, and subsequently, decrementing _j_ by 1.\r\n\r\nYour values are now, _1_ and _191918_, respectively.\r\n\r\nI believe your discrepancy lies within the _instance initialization blocks_, within _ClassTwo_.  \r\n_[Initializing Fields (The Java&amp;trade; Tutorials &amp;gt; Learning the Java Language &amp;gt; Classes and Objects)](https://docs.oracle.com/javase/tutorial/java/javaOO/initial.html)_.\r\n\r\nThese are only executed upon a new instance, and not upon the _static_ initialization.","title":"how am i getting this output? i dont understand","body":"<p>First, <em>ClassOne</em> is created statically, assigning <em>j</em> with <em>191919</em>.<br />\nThen, <em>ClassTwo</em> is created statically, which then executes the <em>static initialization blocks</em>, incrementing <em>i</em> by 1, and subsequently, decrementing <em>j</em> by 1.</p>\n<p>Your values are now, <em>1</em> and <em>191918</em>, respectively.</p>\n<p>I believe your discrepancy lies within the <em>instance initialization blocks</em>, within <em>ClassTwo</em>.<br />\n<em><a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/initial.html\" rel=\"nofollow noreferrer\">Initializing Fields (The Java™ Tutorials &gt; Learning the Java Language &gt; Classes and Objects)</a></em>.</p>\n<p>These are only executed upon a new instance, and not upon the <em>static</em> initialization.</p>\n"}],"owner":{"account_id":28825611,"reputation":9,"user_id":22077074,"display_name":"hrithika"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":5,"up_vote_count":1,"answer_count":2,"score":-4,"last_activity_date":1686890408,"creation_date":1686814554,"question_id":76480139,"body_markdown":"```Java\r\nclass ClassOne\r\n{\r\n     static int i, j = 191919;\r\n \r\n     {\r\n         --i;\r\n     }\r\n \r\n     {\r\n         j++;\r\n     }\r\n}\r\n```\r\n```Java\r\npublic class ClassTwo extends ClassOne\r\n{\r\n    static\r\n    {\r\n        i++;\r\n    }\r\n \r\n    static\r\n    {\r\n        --j;\r\n    }\r\n \r\n    public static void main(String[] args)\r\n    {\r\n        System.out.println(i);\r\n \r\n        System.out.println(j);\r\n    }\r\n}\r\n```\r\nI got the output as \r\n```none\r\ni=1\r\nj=191918\r\n```","title":"how am i getting this output? i dont understand","body":"<pre><code>class ClassOne\n{\n     static int i, j = 191919;\n \n     {\n         --i;\n     }\n \n     {\n         j++;\n     }\n}\n</code></pre>\n<pre><code>public class ClassTwo extends ClassOne\n{\n    static\n    {\n        i++;\n    }\n \n    static\n    {\n        --j;\n    }\n \n    public static void main(String[] args)\n    {\n        System.out.println(i);\n \n        System.out.println(j);\n    }\n}\n</code></pre>\n<p>I got the output as</p>\n<pre class=\"lang-none prettyprint-override\"><code>i=1\nj=191918\n</code></pre>\n"},{"tags":["java","android","sql-server"],"comments":[{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":1,"creation_date":1686882122,"post_id":76486585,"comment_id":134862566,"body_markdown":"&quot;not working&quot; is not very informative, tells us nothing of use, and you may be ignoring important information that is being generated when your code fails (and not passing it on to us). Please tell the details of your problem. How is it not working specifically? Are you seeing any exception stack traces?","body":"&quot;not working&quot; is not very informative, tells us nothing of use, and you may be ignoring important information that is being generated when your code fails (and not passing it on to us). Please tell the details of your problem. How is it not working specifically? Are you seeing any exception stack traces?"},{"owner":{"account_id":28741348,"reputation":1,"user_id":22011397,"display_name":"Umendran Muniandy"},"score":0,"creation_date":1686882286,"post_id":76486585,"comment_id":134862575,"body_markdown":"the emulator is runnning but when I login its says wrong password which is an error message I was using SQL lite before this and this is my first time migrating to MS SQL server so this where im having the problem if I change back to &quot;com.microsoft.sqlserver.jdbc.SQLServerDriver&quot; its closing by itself where the logcat error is from the getConnection so there is somewhere wrong in the url but the ip address the name of the database and the username and password is all correct","body":"the emulator is runnning but when I login its says wrong password which is an error message I was using SQL lite before this and this is my first time migrating to MS SQL server so this where im having the problem if I change back to &quot;com.microsoft.sqlserver.jdbc.SQLServerDriver&quot; its closing by itself where the logcat error is from the getConnection so there is somewhere wrong in the url but the ip address the name of the database and the username and password is all correct"},{"owner":{"account_id":111736,"reputation":11811,"user_id":295004,"display_name":"Morrison Chang"},"score":3,"creation_date":1686883759,"post_id":76486585,"comment_id":134862687,"body_markdown":"Please reconsider using JDBC, [JDBC vs Web Service for Android](https://stackoverflow.com/q/15853367/295004) Also [edit your post](https://stackoverflow.com/posts/76486585/edit) with additional logcat details.","body":"Please reconsider using JDBC, <a href=\"https://stackoverflow.com/q/15853367/295004\">JDBC vs Web Service for Android</a> Also <a href=\"https://stackoverflow.com/posts/76486585/edit\">edit your post</a> with additional logcat details."},{"owner":{"account_id":28741348,"reputation":1,"user_id":22011397,"display_name":"Umendran Muniandy"},"score":0,"creation_date":1686884712,"post_id":76486585,"comment_id":134862760,"body_markdown":"This is my Logcat error:\n\nat com.example.canteenmeal.DatabaseHelper.&lt;init&gt;(DatabaseHelper.java:50)\nwhich is highlighting the getConnection","body":"This is my Logcat error:  at com.example.canteenmeal.DatabaseHelper.&lt;init&gt;(DatabaseHelper&zwnj;&#8203;.java:50) which is highlighting the getConnection"},{"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"score":1,"creation_date":1686885459,"post_id":76486585,"comment_id":134862820,"body_markdown":"JDBC should NEVER be used on a client device","body":"JDBC should NEVER be used on a client device"},{"owner":{"account_id":28741348,"reputation":1,"user_id":22011397,"display_name":"Umendran Muniandy"},"score":0,"creation_date":1686886826,"post_id":76486585,"comment_id":134862912,"body_markdown":"but it should still work right doesn&#39;t matter if its security or network traffic etc","body":"but it should still work right doesn&#39;t matter if its security or network traffic etc"},{"owner":{"account_id":111736,"reputation":11811,"user_id":295004,"display_name":"Morrison Chang"},"score":0,"creation_date":1686887567,"post_id":76486585,"comment_id":134862961,"body_markdown":"The full stack trace of your error is preferred. I would also state what tests you&#39;ve done to check that the emulator can see the MS SQL Server. I would also check the error logs of the MS SQL Server if anything notable can be found. Comments should be used to help clarify/improve the question. OP should add info to post as stack trace and other info should be a part of the question.","body":"The full stack trace of your error is preferred. I would also state what tests you&#39;ve done to check that the emulator can see the MS SQL Server. I would also check the error logs of the MS SQL Server if anything notable can be found. Comments should be used to help clarify/improve the question. OP should add info to post as stack trace and other info should be a part of the question."}],"answers":[{"tags":[],"owner":{"account_id":28741348,"reputation":1,"user_id":22011397,"display_name":"Umendran Muniandy"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1686890232,"creation_date":1686887791,"answer_id":76486876,"question_id":76486585,"body_markdown":"I have found the solution where I had to use strict mode in the databasehelper\r\nhere is the updated code:\r\n```\r\npublic DatabaseHelper(Context context) {\r\n    this.context= context;\r\n    StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();\r\n    StrictMode.setThreadPolicy(policy);\r\n\r\n    try {\r\n        // Load the SQL Server JDBC driver\r\n        Class.forName(&quot;net.sourceforge.jtds.jdbc.Driver&quot;);\r\n        // Connect to the database\r\n        connection = DriverManager.getConnection(DATABASE_URL,DATABASE_USERNAME,DATABASE_PASSWORD);\r\n    } catch (ClassNotFoundException | SQLException e) {\r\n        e.printStackTrace();\r\n    }\r\n}\r\n```","title":"Connect to SQL Server in Android","body":"<p>I have found the solution where I had to use strict mode in the databasehelper\nhere is the updated code:</p>\n<pre><code>public DatabaseHelper(Context context) {\n    this.context= context;\n    StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();\n    StrictMode.setThreadPolicy(policy);\n\n    try {\n        // Load the SQL Server JDBC driver\n        Class.forName(&quot;net.sourceforge.jtds.jdbc.Driver&quot;);\n        // Connect to the database\n        connection = DriverManager.getConnection(DATABASE_URL,DATABASE_USERNAME,DATABASE_PASSWORD);\n    } catch (ClassNotFoundException | SQLException e) {\n        e.printStackTrace();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":28741348,"reputation":1,"user_id":22011397,"display_name":"Umendran Muniandy"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":129,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1686890232,"creation_date":1686882005,"question_id":76486585,"body_markdown":"I have already downloaded jtds and also jdbc and even put under my libs I have tried the `com.microsoft.sqlserver.jdbc.SQLServerDriver` and also `net.sourceforge.jtds.jdbc.Driver` still not working. I also added both in my dependencies in my `build.gradle` but still not working and I even gave permission to the Android manifest for it \r\n\r\nHere is my `build.gradle` file for the dependencies:\r\n\r\n```\r\ndependencies {\r\n\r\n    implementation &#39;androidx.appcompat:appcompat:1.6.1&#39;\r\n    implementation &#39;com.google.android.material:material:1.5.0&#39;\r\n    implementation &#39;androidx.constraintlayout:constraintlayout:2.1.4&#39;\r\n    testImplementation &#39;junit:junit:4.13.2&#39;\r\n    androidTestImplementation &#39;androidx.test.ext:junit:1.1.5&#39;\r\n    androidTestImplementation &#39;androidx.test.espresso:espresso-core:3.5.1&#39;\r\n    //implementation &#39;com.microsoft.sqlserver:mssql-jdbc:9.4.0.jre8&#39;\r\n    //implementation &#39;net.sourceforge.jtds:jtds:1.3.1&#39;\r\n    implementation files(&#39;libs/jtds-1.3.1.jar&#39;)\r\n    implementation &#39;com.microsoft.sqlserver:mssql-jdbc:12.2.0.jre8&#39;\r\n}\r\n```\r\n\r\nHere is the AndroidManifest.xml:\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    package=&quot;com.example.canteenmeal&quot;&gt;\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.NFC&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot;/&gt;\r\n    &lt;uses-feature android:name=&quot;android.hardware.nfc&quot; /&gt;\r\n\r\n    &lt;application\r\n        android:allowBackup=&quot;true&quot;\r\n        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\r\n        android:fullBackupContent=&quot;@xml/backup_rules&quot;\r\n        android:icon=&quot;@mipmap/ic_launcher&quot;\r\n        android:label=&quot;@string/app_name&quot;\r\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\r\n        android:supportsRtl=&quot;true&quot;\r\n        android:theme=&quot;@style/Theme.CanteenMeal&quot;\r\n        tools:targetApi=&quot;31&quot;&gt;\r\n\r\n        &lt;activity\r\n            android:name=&quot;.MainActivity&quot;\r\n            android:theme=&quot;@style/Theme.AppCompat.Light.NoActionBar&quot;\r\n            android:exported=&quot;true&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n                &lt;action android:name=&quot;android.nfc.action.TECH_DISCOVERED&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/activity&gt;\r\n\r\n        &lt;activity\r\n            android:name=&quot;.AdminActivity&quot;\r\n            android:exported=&quot;true&quot;&gt;\r\n            &lt;!-- Define any necessary intent filters or other attributes for AdminActivity --&gt;\r\n        &lt;/activity&gt;\r\n\r\n        &lt;activity\r\n            android:name=&quot;.CanteenEmployeeActivity&quot;\r\n            android:exported=&quot;true&quot;&gt;\r\n            &lt;!-- Define any necessary intent filters or other attributes for CanteenEmployeeActivity --&gt;\r\n        &lt;/activity&gt;\r\n\r\n        &lt;!-- Other manifest entries --&gt;\r\n\r\n    &lt;/application&gt;\r\n&lt;/manifest&gt;\r\n```\r\n\r\nThis is my DatabaseHelper.java:\r\n\r\n```\r\npublic class DatabaseHelper {\r\n\r\n    private static final String DATABASE_URL = &quot;jdbc:sqlserver://10.1.32.111:1433/PROD&quot;;\r\n    private static final String DATABASE_USERNAME = &quot;Sexy&quot;;\r\n    private static final String DATABASE_PASSWORD = &quot;sexy&quot;;\r\n\r\n    // Login table constants\r\n    private static final String TABLE_NAME = &quot;users&quot;;\r\n    private static final String COLUMN_USERNAME = &quot;username&quot;;\r\n    private static final String COLUMN_PASSWORD = &quot;password&quot;;\r\n\r\n    // Employee table constants\r\n    private static final String TABLE_EMPLOYEE = &quot;employee&quot;;\r\n    private static final String COLUMN_EMPLOYEE_VISA = &quot;visa&quot;;\r\n    private static final String COLUMN_EMPLOYEE_NAME = &quot;employeename&quot;;\r\n    private static final String COLUMN_EMPLOYEE_BADGE_NUMBER = &quot;badgenumber&quot;;\r\n\r\n    // Report table constants\r\n    private static final String TABLE_REPORT = &quot;reports&quot;;\r\n    private static final String COLUMN_REPORT_EMPLOYEE_VISA = &quot;visa&quot;;\r\n    private static final String COLUMN_REPORT_EMPLOYEE_NAME = &quot;employeename&quot;;\r\n    private static final String COLUMN_REPORT_EMPLOYEE_BADGE_NUMBER = &quot;badgenumber&quot;;\r\n    private static final String COLUMN_COLOUR = &quot;Colour&quot;;\r\n    private static final String COLUMN_DATE_TIME = &quot;Date_Time&quot;;\r\n\r\n    private Connection connection;\r\n    private Context context;\r\n\r\n    public DatabaseHelper(Context context) {\r\n        this.context= context;\r\n\r\n        try {\r\n            // Load the SQL Server JDBC driver\r\n            Class.forName(&quot;com.microsoft.sqlserver.jdbc.SQLServerDriver&quot;);\r\n            // Connect to the database\r\n            connection = DriverManager.getConnection(DATABASE_URL, DATABASE_USERNAME, DATABASE_PASSWORD);\r\n        } catch (ClassNotFoundException | SQLException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n```\r\nI am sure that it has something has to do with the `getConnection` where its not working can someone help me please\r\n\r\n[Here are the details of the SQL server](https://i.stack.imgur.com/6zKxl.png)\r\n","title":"Connect to SQL Server in Android","body":"<p>I have already downloaded jtds and also jdbc and even put under my libs I have tried the <code>com.microsoft.sqlserver.jdbc.SQLServerDriver</code> and also <code>net.sourceforge.jtds.jdbc.Driver</code> still not working. I also added both in my dependencies in my <code>build.gradle</code> but still not working and I even gave permission to the Android manifest for it</p>\n<p>Here is my <code>build.gradle</code> file for the dependencies:</p>\n<pre><code>dependencies {\n\n    implementation 'androidx.appcompat:appcompat:1.6.1'\n    implementation 'com.google.android.material:material:1.5.0'\n    implementation 'androidx.constraintlayout:constraintlayout:2.1.4'\n    testImplementation 'junit:junit:4.13.2'\n    androidTestImplementation 'androidx.test.ext:junit:1.1.5'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.5.1'\n    //implementation 'com.microsoft.sqlserver:mssql-jdbc:9.4.0.jre8'\n    //implementation 'net.sourceforge.jtds:jtds:1.3.1'\n    implementation files('libs/jtds-1.3.1.jar')\n    implementation 'com.microsoft.sqlserver:mssql-jdbc:12.2.0.jre8'\n}\n</code></pre>\n<p>Here is the AndroidManifest.xml:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    package=&quot;com.example.canteenmeal&quot;&gt;\n\n    &lt;uses-permission android:name=&quot;android.permission.NFC&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot;/&gt;\n    &lt;uses-feature android:name=&quot;android.hardware.nfc&quot; /&gt;\n\n    &lt;application\n        android:allowBackup=&quot;true&quot;\n        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\n        android:fullBackupContent=&quot;@xml/backup_rules&quot;\n        android:icon=&quot;@mipmap/ic_launcher&quot;\n        android:label=&quot;@string/app_name&quot;\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\n        android:supportsRtl=&quot;true&quot;\n        android:theme=&quot;@style/Theme.CanteenMeal&quot;\n        tools:targetApi=&quot;31&quot;&gt;\n\n        &lt;activity\n            android:name=&quot;.MainActivity&quot;\n            android:theme=&quot;@style/Theme.AppCompat.Light.NoActionBar&quot;\n            android:exported=&quot;true&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n                &lt;action android:name=&quot;android.nfc.action.TECH_DISCOVERED&quot; /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n\n        &lt;activity\n            android:name=&quot;.AdminActivity&quot;\n            android:exported=&quot;true&quot;&gt;\n            &lt;!-- Define any necessary intent filters or other attributes for AdminActivity --&gt;\n        &lt;/activity&gt;\n\n        &lt;activity\n            android:name=&quot;.CanteenEmployeeActivity&quot;\n            android:exported=&quot;true&quot;&gt;\n            &lt;!-- Define any necessary intent filters or other attributes for CanteenEmployeeActivity --&gt;\n        &lt;/activity&gt;\n\n        &lt;!-- Other manifest entries --&gt;\n\n    &lt;/application&gt;\n&lt;/manifest&gt;\n</code></pre>\n<p>This is my DatabaseHelper.java:</p>\n<pre><code>public class DatabaseHelper {\n\n    private static final String DATABASE_URL = &quot;jdbc:sqlserver://10.1.32.111:1433/PROD&quot;;\n    private static final String DATABASE_USERNAME = &quot;Sexy&quot;;\n    private static final String DATABASE_PASSWORD = &quot;sexy&quot;;\n\n    // Login table constants\n    private static final String TABLE_NAME = &quot;users&quot;;\n    private static final String COLUMN_USERNAME = &quot;username&quot;;\n    private static final String COLUMN_PASSWORD = &quot;password&quot;;\n\n    // Employee table constants\n    private static final String TABLE_EMPLOYEE = &quot;employee&quot;;\n    private static final String COLUMN_EMPLOYEE_VISA = &quot;visa&quot;;\n    private static final String COLUMN_EMPLOYEE_NAME = &quot;employeename&quot;;\n    private static final String COLUMN_EMPLOYEE_BADGE_NUMBER = &quot;badgenumber&quot;;\n\n    // Report table constants\n    private static final String TABLE_REPORT = &quot;reports&quot;;\n    private static final String COLUMN_REPORT_EMPLOYEE_VISA = &quot;visa&quot;;\n    private static final String COLUMN_REPORT_EMPLOYEE_NAME = &quot;employeename&quot;;\n    private static final String COLUMN_REPORT_EMPLOYEE_BADGE_NUMBER = &quot;badgenumber&quot;;\n    private static final String COLUMN_COLOUR = &quot;Colour&quot;;\n    private static final String COLUMN_DATE_TIME = &quot;Date_Time&quot;;\n\n    private Connection connection;\n    private Context context;\n\n    public DatabaseHelper(Context context) {\n        this.context= context;\n\n        try {\n            // Load the SQL Server JDBC driver\n            Class.forName(&quot;com.microsoft.sqlserver.jdbc.SQLServerDriver&quot;);\n            // Connect to the database\n            connection = DriverManager.getConnection(DATABASE_URL, DATABASE_USERNAME, DATABASE_PASSWORD);\n        } catch (ClassNotFoundException | SQLException e) {\n            e.printStackTrace();\n        }\n    }\n</code></pre>\n<p>I am sure that it has something has to do with the <code>getConnection</code> where its not working can someone help me please</p>\n<p><a href=\"https://i.stack.imgur.com/6zKxl.png\" rel=\"nofollow noreferrer\">Here are the details of the SQL server</a></p>\n"},{"tags":["java","function"],"comments":[{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1686873375,"post_id":76486075,"comment_id":134861871,"body_markdown":"Just to verify that you are using the tools correctly, you could try typing in and running a Hello World program; e.g. the one in [Lesson 1: The hello world application](https://docs.oracle.com/javase/tutorial/getStarted/cupojava/index.html).  If you can get it to say &quot;Hello World&quot; you are compiling and running it correctly.","body":"Just to verify that you are using the tools correctly, you could try typing in and running a Hello World program; e.g. the one in <a href=\"https://docs.oracle.com/javase/tutorial/getStarted/cupojava/index.html\" rel=\"nofollow noreferrer\">Lesson 1: The hello world application</a>.  If you can get it to say &quot;Hello World&quot; you are compiling and running it correctly."}],"answers":[{"comments":[{"owner":{"account_id":26962995,"reputation":1,"user_id":20530366,"display_name":"ThatWeirdLittleKid"},"score":0,"creation_date":1686873764,"post_id":76486107,"comment_id":134861909,"body_markdown":"Thank you so much! I completely forgot that you still have to do System.out (I used to code in Python where you can just put the function name in and print the result)!","body":"Thank you so much! I completely forgot that you still have to do System.out (I used to code in Python where you can just put the function name in and print the result)!"}],"tags":[],"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686872191,"creation_date":1686872191,"answer_id":76486107,"question_id":76486075,"body_markdown":"The console is displaying the command used to execute your program; your program does not currently *output* anything.\r\n\r\n    areaObject(10, 12, 8, 6);\r\n\r\nGets the area but does nothing with it. Presumably you want to display the result like\r\n\r\n    System.out.println(areaObject(10, 12, 8, 6));\r\n\r\nWhich outputs\r\n\r\n    132.0\r\n\r\nThe second program also outputs nothing.\r\n\r\n    System.out.println(addition(2, 3));\r\n\r\nWould output\r\n\r\n    5.0","title":"Java code gives no output, returns &quot;java -classpath .:target/dependency/* Main&quot;","body":"<p>The console is displaying the command used to execute your program; your program does not currently <em>output</em> anything.</p>\n<pre><code>areaObject(10, 12, 8, 6);\n</code></pre>\n<p>Gets the area but does nothing with it. Presumably you want to display the result like</p>\n<pre><code>System.out.println(areaObject(10, 12, 8, 6));\n</code></pre>\n<p>Which outputs</p>\n<pre><code>132.0\n</code></pre>\n<p>The second program also outputs nothing.</p>\n<pre><code>System.out.println(addition(2, 3));\n</code></pre>\n<p>Would output</p>\n<pre><code>5.0\n</code></pre>\n"},{"comments":[{"owner":{"account_id":439639,"reputation":1373,"user_id":828709,"accept_rate":57,"display_name":"Brandon"},"score":1,"creation_date":1686923981,"post_id":76486964,"comment_id":134869452,"body_markdown":"Welcome to StackOverflow! When replying to a question, please check to see whether it has already been answered. If your answer doesn&#39;t differ significantly from the existing answers, then you can upvote the answer that matches your answer.","body":"Welcome to StackOverflow! When replying to a question, please check to see whether it has already been answered. If your answer doesn&#39;t differ significantly from the existing answers, then you can upvote the answer that matches your answer."}],"tags":[],"owner":{"account_id":28831409,"reputation":1,"user_id":22081723,"display_name":"Mayank Jindal"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686889767,"creation_date":1686889767,"answer_id":76486964,"question_id":76486075,"body_markdown":"You can use\r\n\r\nSystem.out.println(areaObject(10, 12, 8, 6));\r\n\r\nand\r\n\r\nSystem.out.println(addition(2, 3));\r\n","title":"Java code gives no output, returns &quot;java -classpath .:target/dependency/* Main&quot;","body":"<p>You can use</p>\n<p>System.out.println(areaObject(10, 12, 8, 6));</p>\n<p>and</p>\n<p>System.out.println(addition(2, 3));</p>\n"}],"owner":{"account_id":26962995,"reputation":1,"user_id":20530366,"display_name":"ThatWeirdLittleKid"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1686889767,"creation_date":1686871519,"question_id":76486075,"body_markdown":"I&#39;m trying to create Java code that will find the area of the following sketch:\r\n[I&#39;m trying to find the area of this shape](https://i.stack.imgur.com/8yNVa.jpg)\r\n\r\nHowever, my code (after debugging) returns the following in the console: \r\n    `java -classpath .:target/dependency/* Main`\r\n\r\nHere is the code that I tried to run:\r\n```\r\nclass Main {\r\n  public static void main(String[] args) {\r\n    areaObject(10, 12, 8, 6);\r\n  }\r\n  \r\n  static double areaObject(double rectangleLength, double rectangleWidth, double triangleHeight, double missingTriangleHeight){\r\n    double rectangleArea = rectangleLength * rectangleWidth;\r\n    double triangleArea = 0.5* triangleHeight * rectangleWidth;\r\n    double missingTriangleArea = 0.5 * rectangleWidth * missingTriangleHeight;\r\n    return rectangleArea + triangleArea - missingTriangleArea;\r\n  }\r\n}\r\n```\r\n\r\nI just started learning Java and decided to try and go back to the basics, and tried to add two numbers with functions. However, the code returned the same response; \r\n\r\n`java -classpath .:target/dependency/* Main`\r\n\r\nHere is the code for adding two numbers:\r\n\r\n```\r\nclass Main{\r\n  public static double addition(double firstNum, double secondNum){\r\n    return firstNum + secondNum;\r\n  }\r\n  public static void main(String[] args) {\r\n    addition(2, 3);\r\n  }\r\n}\r\n\r\n```\r\n\r\nI&#39;m sorry if I&#39;m slandering Java syntax or breaking lots of Java rules; I am new to Java and just started learning. Thank you!","title":"Java code gives no output, returns &quot;java -classpath .:target/dependency/* Main&quot;","body":"<p>I'm trying to create Java code that will find the area of the following sketch:\n<a href=\"https://i.stack.imgur.com/8yNVa.jpg\" rel=\"nofollow noreferrer\">I'm trying to find the area of this shape</a></p>\n<p>However, my code (after debugging) returns the following in the console:\n<code>java -classpath .:target/dependency/* Main</code></p>\n<p>Here is the code that I tried to run:</p>\n<pre><code>class Main {\n  public static void main(String[] args) {\n    areaObject(10, 12, 8, 6);\n  }\n  \n  static double areaObject(double rectangleLength, double rectangleWidth, double triangleHeight, double missingTriangleHeight){\n    double rectangleArea = rectangleLength * rectangleWidth;\n    double triangleArea = 0.5* triangleHeight * rectangleWidth;\n    double missingTriangleArea = 0.5 * rectangleWidth * missingTriangleHeight;\n    return rectangleArea + triangleArea - missingTriangleArea;\n  }\n}\n</code></pre>\n<p>I just started learning Java and decided to try and go back to the basics, and tried to add two numbers with functions. However, the code returned the same response;</p>\n<p><code>java -classpath .:target/dependency/* Main</code></p>\n<p>Here is the code for adding two numbers:</p>\n<pre><code>class Main{\n  public static double addition(double firstNum, double secondNum){\n    return firstNum + secondNum;\n  }\n  public static void main(String[] args) {\n    addition(2, 3);\n  }\n}\n\n</code></pre>\n<p>I'm sorry if I'm slandering Java syntax or breaking lots of Java rules; I am new to Java and just started learning. Thank you!</p>\n"},{"tags":["java","ssl","bouncycastle"],"answers":[{"comments":[{"owner":{"account_id":4326534,"reputation":422,"user_id":3533210,"display_name":"tobhai"},"score":0,"creation_date":1686141790,"post_id":76419784,"comment_id":134758128,"body_markdown":"Thanks for the clarification! \nIs my assumption correct, that the integer value of the named group can be obtained from: https://www.bouncycastle.org/docs/tlsdocs1.8on/constant-values.html#org.bouncycastle.tls.NamedGroup.brainpoolP512r1 ? E.g. 28 for brainpoolP512r1 ? Thanks alot!","body":"Thanks for the clarification!  Is my assumption correct, that the integer value of the named group can be obtained from: <a href=\"https://www.bouncycastle.org/docs/tlsdocs1.8on/constant-values.html#org.bouncycastle.tls.NamedGroup.brainpoolP512r1\" rel=\"nofollow noreferrer\">bouncycastle.org/docs/tlsdocs1.8on/&hellip;</a> ? E.g. 28 for brainpoolP512r1 ? Thanks alot!"},{"owner":{"account_id":4326534,"reputation":422,"user_id":3533210,"display_name":"tobhai"},"score":0,"creation_date":1686148965,"post_id":76419784,"comment_id":134759985,"body_markdown":"What I forgot to mention, brainpoolP512r1 was added to jdk.disabled.namedCurves in Java 16 (https://bugs.openjdk.org/browse/JDK-8251547)","body":"What I forgot to mention, brainpoolP512r1 was added to jdk.disabled.namedCurves in Java 16 (<a href=\"https://bugs.openjdk.org/browse/JDK-8251547\" rel=\"nofollow noreferrer\">bugs.openjdk.org/browse/JDK-8251547</a>)"},{"owner":{"account_id":97438,"reputation":3932,"user_id":264294,"display_name":"Peter Dettman"},"score":0,"creation_date":1686193419,"post_id":76419784,"comment_id":134766576,"body_markdown":"Yes, NamedGroup has the appropriate constants. jdk.disabled.namedCurves is currently ignored by BCJSSE.","body":"Yes, NamedGroup has the appropriate constants. jdk.disabled.namedCurves is currently ignored by BCJSSE."},{"owner":{"account_id":4326534,"reputation":422,"user_id":3533210,"display_name":"tobhai"},"score":0,"creation_date":1686238549,"post_id":76419784,"comment_id":134774767,"body_markdown":"The solution you proposed works fine if my subclassed version of `JcaTlsCrypto` supports secp256r1, secp521r1 (i == 23 || i == 25). \nI can then test the server via:\n`openssl s_client -debug -tls1_2 -curves secp256r1 -cipher ECDHE-RSA-AES256-GCM-SHA384 localhost:9000`.\nOddly enough when changing it to support brainpoolP256r1 or brainpoolP512r1 (i==26 || i ==28). It is not possible to connect via `openssl s_client -debug -tls1_2 -curves brainpoolP256r1 -cipher ECDHE-RSA-AES256-GCM-SHA384 localhost:9000`. Do you have additional pointers? Thanks alot!","body":"The solution you proposed works fine if my subclassed version of <code>JcaTlsCrypto</code> supports secp256r1, secp521r1 (i == 23 || i == 25).  I can then test the server via: <code>openssl s_client -debug -tls1_2 -curves secp256r1 -cipher ECDHE-RSA-AES256-GCM-SHA384 localhost:9000</code>. Oddly enough when changing it to support brainpoolP256r1 or brainpoolP512r1 (i==26 || i ==28). It is not possible to connect via <code>openssl s_client -debug -tls1_2 -curves brainpoolP256r1 -cipher ECDHE-RSA-AES256-GCM-SHA384 localhost:9000</code>. Do you have additional pointers? Thanks alot!"},{"owner":{"account_id":97438,"reputation":3932,"user_id":264294,"display_name":"Peter Dettman"},"score":0,"creation_date":1686239845,"post_id":76419784,"comment_id":134775025,"body_markdown":"You would still need to enable the brainpool curves using jdk.tls.namedGroups system property since they are not in our default list.","body":"You would still need to enable the brainpool curves using jdk.tls.namedGroups system property since they are not in our default list."},{"owner":{"account_id":97438,"reputation":3932,"user_id":264294,"display_name":"Peter Dettman"},"score":0,"creation_date":1686889086,"post_id":76419784,"comment_id":134863064,"body_markdown":"@tobhai See updated answer regarding our 1.74 release.","body":"@tobhai See updated answer regarding our 1.74 release."},{"owner":{"account_id":4326534,"reputation":422,"user_id":3533210,"display_name":"tobhai"},"score":0,"creation_date":1687265328,"post_id":76419784,"comment_id":134909890,"body_markdown":"Thank you very much! \nIs it still necessary to enable brainpoolP256r1 via the jdk.tls.namedGroups property?","body":"Thank you very much!  Is it still necessary to enable brainpoolP256r1 via the jdk.tls.namedGroups property?"},{"owner":{"account_id":97438,"reputation":3932,"user_id":264294,"display_name":"Peter Dettman"},"score":1,"creation_date":1687321785,"post_id":76419784,"comment_id":134918446,"body_markdown":"Use of SSLParameters.namedGroups overrides/replaces any jdk.tls.namedGroups setting, so the latter should be unnecessary.","body":"Use of SSLParameters.namedGroups overrides/replaces any jdk.tls.namedGroups setting, so the latter should be unnecessary."}],"tags":[],"owner":{"account_id":97438,"reputation":3932,"user_id":264294,"display_name":"Peter Dettman"},"comment_count":8,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1686889057,"creation_date":1686109621,"answer_id":76419784,"question_id":76415953,"body_markdown":"BCJSSE has not yet added the new `SSLParameters` methods; I will look at adding them now. I would expect similar methods to then also be backwardly available (i.e. in all supported JDK versions) via our extension API.\r\n\r\nAlso, just to clarify, BCJSSE supports the jdk.tls.namedGroups property always (no JDK or BCJSSE version dependency).\r\n\r\nIn the meantime it should be possible to subclass `JcaTlsCrypto` and override `hasNamedGroup()`. To enable this in your provider instance, subclass also `JcaTlsCryptoProvider` and override `create(SecureRandom, SecureRandom)` to create an instance of your JcaTlsCrypto subclass.\r\n\r\nFinally, either pass your JcaTlsCryptoProvider to `BouncyCastleJsseProvider(boolean, JcaTlsCryptoProvider)` constructor or if you are using java.security configuration use the config string to name your JcaTlsCryptoProvider subclass.\r\n\r\nUPDATE:\r\n\r\nWe just released 1.74 which contains support for the new `SSLParameters` properties. In earlier Java versions you would need to access the functionality though our extension API. e.g. cast `SSLSocket` to `org.bouncycastle.jsse.BCSSLSocket` and call `BCSSLSocket#setParameters(BCSSLParameters)` after using `BCSSLParameters#setNamedGroups`.","title":"BouncyCastle JsseProvider configure named groups without modifying jdk.tls.namedGroups","body":"<p>BCJSSE has not yet added the new <code>SSLParameters</code> methods; I will look at adding them now. I would expect similar methods to then also be backwardly available (i.e. in all supported JDK versions) via our extension API.</p>\n<p>Also, just to clarify, BCJSSE supports the jdk.tls.namedGroups property always (no JDK or BCJSSE version dependency).</p>\n<p>In the meantime it should be possible to subclass <code>JcaTlsCrypto</code> and override <code>hasNamedGroup()</code>. To enable this in your provider instance, subclass also <code>JcaTlsCryptoProvider</code> and override <code>create(SecureRandom, SecureRandom)</code> to create an instance of your JcaTlsCrypto subclass.</p>\n<p>Finally, either pass your JcaTlsCryptoProvider to <code>BouncyCastleJsseProvider(boolean, JcaTlsCryptoProvider)</code> constructor or if you are using java.security configuration use the config string to name your JcaTlsCryptoProvider subclass.</p>\n<p>UPDATE:</p>\n<p>We just released 1.74 which contains support for the new <code>SSLParameters</code> properties. In earlier Java versions you would need to access the functionality though our extension API. e.g. cast <code>SSLSocket</code> to <code>org.bouncycastle.jsse.BCSSLSocket</code> and call <code>BCSSLSocket#setParameters(BCSSLParameters)</code> after using <code>BCSSLParameters#setNamedGroups</code>.</p>\n"}],"owner":{"account_id":4326534,"reputation":422,"user_id":3533210,"display_name":"tobhai"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":192,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76419784,"answer_count":1,"score":0,"last_activity_date":1686889057,"creation_date":1686063598,"question_id":76415953,"body_markdown":"Is it possible to configure the BouncyCastleJsseProvider to use a specific elliptic curve without modifying the system property ```jdk.tls.namedGroups``` in Java 17?\r\n\r\n\r\nI need an ```SSLContext``` supporting only a specific curve. Ideally this should be achievable without tinkering with the system property to not interfere with other TLS connections.\r\n\r\nJava 20 [adds support for this configuration][1] via the ```SSLParameters``` but updating to Java 20 is not a real option for now.\r\n\r\n\r\n  [1]: https://bugs.openjdk.org/browse/JDK-8291950","title":"BouncyCastle JsseProvider configure named groups without modifying jdk.tls.namedGroups","body":"<p>Is it possible to configure the BouncyCastleJsseProvider to use a specific elliptic curve without modifying the system property <code>jdk.tls.namedGroups</code> in Java 17?</p>\n<p>I need an <code>SSLContext</code> supporting only a specific curve. Ideally this should be achievable without tinkering with the system property to not interfere with other TLS connections.</p>\n<p>Java 20 <a href=\"https://bugs.openjdk.org/browse/JDK-8291950\" rel=\"nofollow noreferrer\">adds support for this configuration</a> via the <code>SSLParameters</code> but updating to Java 20 is not a real option for now.</p>\n"},{"tags":["java","gradle","build.gradle","shadowjar","gradle-shadow-plugin"],"answers":[{"tags":[],"owner":{"account_id":26165906,"reputation":1,"user_id":19851730,"display_name":"Narnianknight"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686889051,"creation_date":1686889051,"answer_id":76486932,"question_id":76478708,"body_markdown":"I had to relocate `org.apache`. I suppose it interfered with an existing dependency. The reason this didn&#39;t work before was that I was using an nonexistent `gradle.properties` placeholder.\r\n```java\r\nbuildscript {\r\n    repositories {\r\n        jcenter()\r\n        maven {\r\n            name = &quot;forge&quot;\r\n            url = &quot;https://files.minecraftforge.net/maven&quot;\r\n        }\r\n    }\r\n    dependencies {\r\n        classpath &quot;net.minecraftforge.gradle:ForgeGradle:2.1-SNAPSHOT&quot;\r\n    }\r\n}\r\nplugins {\r\n    id &quot;com.github.johnrengelman.shadow&quot; version &quot;4.0.4&quot;\r\n    id &quot;java&quot;\r\n}\r\napply plugin: &quot;net.minecraftforge.gradle.forge&quot;\r\nrepositories {\r\n    jcenter()\r\n}\r\nconfigurations {\r\n    shade\r\n    implementation.extendsFrom shade\r\n}\r\ndependencies {\r\n    shade &quot;org.apache.httpcomponents:httpasyncclient:4.1.5&quot;\r\n}\r\nshadowJar {\r\n    classifier = &quot;&quot;\r\n    configurations = [project.configurations.shade]\r\n    relocate(&quot;org.apache&quot;, &quot;${group}.org.apache&quot;)\r\n}\r\nreobf {\r\n    shadowJar {}\r\n}\r\nshadowJar.finalizedBy(&#39;reobfShadowJar&#39;)\r\ncompileJava {\r\n    sourceCompatibility = targetCompatibility = &quot;1.8&quot;\r\n}\r\narchivesBaseName = &quot;${mod_id}&quot;\r\nversion = &quot;${mod_version}&quot;\r\ngroup = &quot;${group}&quot;\r\nminecraft {\r\n    version = &quot;1.8.9-11.15.1.2318-1.8.9&quot;\r\n    runDir = &quot;run&quot;\r\n    replace &quot;@VERSION@&quot;, project.version\r\n    replaceIn &quot;HighpixelSpeed.java&quot;\r\n    mappings = &quot;stable_22&quot;\r\n}\r\nprocessResources {\r\n    inputs.property &quot;mod_version&quot;, project.version\r\n    inputs.property &quot;mc_version&quot;, project.minecraft.version\r\n    from(sourceSets.main.resources.srcDirs) {\r\n        include &quot;mcmod.info&quot;\r\n        expand &quot;mod_id&quot;:&quot;${mod_id}&quot;,\r\n                &quot;mod_name&quot;:&quot;${mod_name}&quot;,\r\n                &quot;mod_version&quot;:&quot;${mod_version}&quot;,\r\n                &quot;mod_description&quot;:&quot;${mod_description}&quot;,\r\n                &quot;mc_version&quot;:&quot;${mc_version}&quot;\r\n    }\r\n\r\n    // copy everything else, thats not the mcmod.info\r\n    from(sourceSets.main.resources.srcDirs) {\r\n        exclude &quot;mcmod.info&quot;\r\n    }\r\n}\r\n```","title":"Gradle Shadow plugin dependencies are not detected at runtime","body":"<p>I had to relocate <code>org.apache</code>. I suppose it interfered with an existing dependency. The reason this didn't work before was that I was using an nonexistent <code>gradle.properties</code> placeholder.</p>\n<pre class=\"lang-java prettyprint-override\"><code>buildscript {\n    repositories {\n        jcenter()\n        maven {\n            name = &quot;forge&quot;\n            url = &quot;https://files.minecraftforge.net/maven&quot;\n        }\n    }\n    dependencies {\n        classpath &quot;net.minecraftforge.gradle:ForgeGradle:2.1-SNAPSHOT&quot;\n    }\n}\nplugins {\n    id &quot;com.github.johnrengelman.shadow&quot; version &quot;4.0.4&quot;\n    id &quot;java&quot;\n}\napply plugin: &quot;net.minecraftforge.gradle.forge&quot;\nrepositories {\n    jcenter()\n}\nconfigurations {\n    shade\n    implementation.extendsFrom shade\n}\ndependencies {\n    shade &quot;org.apache.httpcomponents:httpasyncclient:4.1.5&quot;\n}\nshadowJar {\n    classifier = &quot;&quot;\n    configurations = [project.configurations.shade]\n    relocate(&quot;org.apache&quot;, &quot;${group}.org.apache&quot;)\n}\nreobf {\n    shadowJar {}\n}\nshadowJar.finalizedBy('reobfShadowJar')\ncompileJava {\n    sourceCompatibility = targetCompatibility = &quot;1.8&quot;\n}\narchivesBaseName = &quot;${mod_id}&quot;\nversion = &quot;${mod_version}&quot;\ngroup = &quot;${group}&quot;\nminecraft {\n    version = &quot;1.8.9-11.15.1.2318-1.8.9&quot;\n    runDir = &quot;run&quot;\n    replace &quot;@VERSION@&quot;, project.version\n    replaceIn &quot;HighpixelSpeed.java&quot;\n    mappings = &quot;stable_22&quot;\n}\nprocessResources {\n    inputs.property &quot;mod_version&quot;, project.version\n    inputs.property &quot;mc_version&quot;, project.minecraft.version\n    from(sourceSets.main.resources.srcDirs) {\n        include &quot;mcmod.info&quot;\n        expand &quot;mod_id&quot;:&quot;${mod_id}&quot;,\n                &quot;mod_name&quot;:&quot;${mod_name}&quot;,\n                &quot;mod_version&quot;:&quot;${mod_version}&quot;,\n                &quot;mod_description&quot;:&quot;${mod_description}&quot;,\n                &quot;mc_version&quot;:&quot;${mc_version}&quot;\n    }\n\n    // copy everything else, thats not the mcmod.info\n    from(sourceSets.main.resources.srcDirs) {\n        exclude &quot;mcmod.info&quot;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":26165906,"reputation":1,"user_id":19851730,"display_name":"Narnianknight"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":133,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686889051,"creation_date":1686796341,"question_id":76478708,"body_markdown":"I am building a mod jar. I need an external library to be included in the final jar (org.apache.httpcomponents:httpasyncclient:4.1.5). I am using the Shadow plugin to make the fat jar. However, I cannot get the dependencies to be included properly.\r\n\r\nHere is my `build.gradle`:\r\n\r\n```java\r\nbuildscript {\r\n    repositories {\r\n        jcenter()\r\n        maven {\r\n            name = &quot;forge&quot;\r\n            url = &quot;https://files.minecraftforge.net/maven&quot;\r\n        }\r\n    }\r\n    dependencies {\r\n        classpath &quot;net.minecraftforge.gradle:ForgeGradle:2.1-SNAPSHOT&quot;\r\n    }\r\n}\r\nplugins {\r\n    id &quot;com.github.johnrengelman.shadow&quot; version &quot;4.0.4&quot;\r\n    id &quot;java&quot;\r\n}\r\napply plugin: &quot;net.minecraftforge.gradle.forge&quot;\r\n\r\nconfigurations {\r\n    shade\r\n    implementation.extendsFrom shade\r\n}\r\nrepositories {\r\n    jcenter()\r\n}\r\ndependencies {\r\n    compile &quot;org.apache.httpcomponents:httpasyncclient:4.1.5&quot;\r\n    shade &quot;org.apache.httpcomponents:httpasyncclient:4.1.5&quot;\r\n}\r\nshadowJar {\r\n    classifier = &#39;&#39;\r\n    configurations = [project.configurations.shade]\r\n    finalizedBy &#39;reobfShadowJar&#39;\r\n}\r\nreobf {\r\n    shadowJar {}\r\n}\r\ntasks.build.dependsOn reobfShadowJar\r\nshadowJar.finalizedBy(&#39;reobfShadowJar&#39;)\r\ncompileJava {\r\n    sourceCompatibility = targetCompatibility = &quot;1.8&quot;\r\n}\r\narchivesBaseName = &quot;${mod_id}&quot;\r\nversion = &quot;${mod_version}&quot;\r\ngroup = &quot;com.&lt;modid&gt;.&lt;modid&gt;&quot;\r\nminecraft {\r\n    version = &quot;1.8.9-11.15.1.2318-1.8.9&quot;\r\n    runDir = &quot;run&quot;\r\n    replace &quot;@VERSION@&quot;, project.version\r\n    replaceIn &quot;&lt;Modid&gt;.java&quot;\r\n    mappings = &quot;stable_22&quot;\r\n}\r\nprocessResources {\r\n    inputs.property &quot;mod_version&quot;, project.version\r\n    inputs.property &quot;mc_version&quot;, project.minecraft.version\r\n    from(sourceSets.main.resources.srcDirs) {\r\n        include &quot;mcmod.info&quot;\r\n        expand &quot;mod_id&quot;:&quot;${mod_id}&quot;,\r\n                &quot;mod_name&quot;:&quot;${mod_name}&quot;,\r\n                &quot;mod_version&quot;:&quot;${mod_version}&quot;,\r\n                &quot;mod_description&quot;:&quot;${mod_description}&quot;,\r\n                &quot;mc_version&quot;:&quot;${mc_version}&quot;\r\n    }\r\n    from(sourceSets.main.resources.srcDirs) {\r\n        exclude &quot;mcmod.info&quot;\r\n    }\r\n}\r\n```\r\nWhen I run the &quot;Minecraft Client&quot; run configuration in IDEA, everything works as expected. However, when I run `gradlew build`, at runtime, I get `Error: net.minecraftforge.fml.common.LoaderException: java.lang.NoClassDefFoundError: /org/apache/http/concurrent/FutureCallback`.\r\nWhy can&#39;t the mod loader find the classes, even though they are in the jar? (I might be doing this completely wrong).","title":"Gradle Shadow plugin dependencies are not detected at runtime","body":"<p>I am building a mod jar. I need an external library to be included in the final jar (org.apache.httpcomponents:httpasyncclient:4.1.5). I am using the Shadow plugin to make the fat jar. However, I cannot get the dependencies to be included properly.</p>\n<p>Here is my <code>build.gradle</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>buildscript {\n    repositories {\n        jcenter()\n        maven {\n            name = &quot;forge&quot;\n            url = &quot;https://files.minecraftforge.net/maven&quot;\n        }\n    }\n    dependencies {\n        classpath &quot;net.minecraftforge.gradle:ForgeGradle:2.1-SNAPSHOT&quot;\n    }\n}\nplugins {\n    id &quot;com.github.johnrengelman.shadow&quot; version &quot;4.0.4&quot;\n    id &quot;java&quot;\n}\napply plugin: &quot;net.minecraftforge.gradle.forge&quot;\n\nconfigurations {\n    shade\n    implementation.extendsFrom shade\n}\nrepositories {\n    jcenter()\n}\ndependencies {\n    compile &quot;org.apache.httpcomponents:httpasyncclient:4.1.5&quot;\n    shade &quot;org.apache.httpcomponents:httpasyncclient:4.1.5&quot;\n}\nshadowJar {\n    classifier = ''\n    configurations = [project.configurations.shade]\n    finalizedBy 'reobfShadowJar'\n}\nreobf {\n    shadowJar {}\n}\ntasks.build.dependsOn reobfShadowJar\nshadowJar.finalizedBy('reobfShadowJar')\ncompileJava {\n    sourceCompatibility = targetCompatibility = &quot;1.8&quot;\n}\narchivesBaseName = &quot;${mod_id}&quot;\nversion = &quot;${mod_version}&quot;\ngroup = &quot;com.&lt;modid&gt;.&lt;modid&gt;&quot;\nminecraft {\n    version = &quot;1.8.9-11.15.1.2318-1.8.9&quot;\n    runDir = &quot;run&quot;\n    replace &quot;@VERSION@&quot;, project.version\n    replaceIn &quot;&lt;Modid&gt;.java&quot;\n    mappings = &quot;stable_22&quot;\n}\nprocessResources {\n    inputs.property &quot;mod_version&quot;, project.version\n    inputs.property &quot;mc_version&quot;, project.minecraft.version\n    from(sourceSets.main.resources.srcDirs) {\n        include &quot;mcmod.info&quot;\n        expand &quot;mod_id&quot;:&quot;${mod_id}&quot;,\n                &quot;mod_name&quot;:&quot;${mod_name}&quot;,\n                &quot;mod_version&quot;:&quot;${mod_version}&quot;,\n                &quot;mod_description&quot;:&quot;${mod_description}&quot;,\n                &quot;mc_version&quot;:&quot;${mc_version}&quot;\n    }\n    from(sourceSets.main.resources.srcDirs) {\n        exclude &quot;mcmod.info&quot;\n    }\n}\n</code></pre>\n<p>When I run the &quot;Minecraft Client&quot; run configuration in IDEA, everything works as expected. However, when I run <code>gradlew build</code>, at runtime, I get <code>Error: net.minecraftforge.fml.common.LoaderException: java.lang.NoClassDefFoundError: /org/apache/http/concurrent/FutureCallback</code>.\nWhy can't the mod loader find the classes, even though they are in the jar? (I might be doing this completely wrong).</p>\n"},{"tags":["java","spring","spring-security"],"answers":[{"tags":[],"owner":{"account_id":28829784,"reputation":67,"user_id":22080520,"display_name":"vesper"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1686888282,"creation_date":1686888282,"answer_id":76486894,"question_id":76486788,"body_markdown":"im not sure what url you want to hit but i believe `.authenticated()` is causing spring to want to authenticate you\r\n\r\ni would say to check out [this response][1], they do a good job explaining how to enable/disable security for specific endpoints\r\n\r\nhope this helps\r\n\r\n  [1]: https://stackoverflow.com/a/57578627/22080520","title":"Spring security login is still coming even after I used permit all","body":"<p>im not sure what url you want to hit but i believe <code>.authenticated()</code> is causing spring to want to authenticate you</p>\n<p>i would say to check out <a href=\"https://stackoverflow.com/a/57578627/22080520\">this response</a>, they do a good job explaining how to enable/disable security for specific endpoints</p>\n<p>hope this helps</p>\n"}],"owner":{"account_id":28286294,"reputation":17,"user_id":21627193,"display_name":"Aditya"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":205,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76486894,"answer_count":1,"score":0,"last_activity_date":1686888282,"creation_date":1686886049,"question_id":76486788,"body_markdown":"I am very new to spring security. I am building a project which has login logout feature. I did the configuration as told in the tutorials but is still not allowing to access directly without login. \r\nAnd most of the methods which i use says that it is marked for \r\ndeprecated or marked for removal.\r\nI will be grateful if anyone can guide me\r\n\r\n\r\nI also noticed that it is not generating the default username and password for login\r\n\r\n\r\n```\r\npackage com.example.covidsurvey.config;\r\n\r\nimport org.apache.catalina.security.SecurityConfig;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.security.authentication.AuthenticationManager;\r\nimport org.springframework.security.authentication.dao.DaoAuthenticationProvider;\r\nimport org.springframework.security.config.annotation.authentication.configuration.AuthenticationConfiguration;\r\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\r\nimport org.springframework.security.config.http.SessionCreationPolicy;\r\nimport org.springframework.security.core.userdetails.UserDetailsService;\r\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\r\nimport org.springframework.security.web.SecurityFilterChain;\r\nimport org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter;\r\n\r\n@Configuration\r\n@EnableWebSecurity\r\npublic class MyConfig {\r\n    @Bean\r\n    public UserDetailsService getUserDetailServices() {\r\n        return new UserDetailServiceImpl();\r\n    }\r\n\r\n    @Bean\r\n    public BCryptPasswordEncoder passwordEncoder() {\r\n        return new BCryptPasswordEncoder();\r\n    }\r\n\r\n    @Bean\r\n    public DaoAuthenticationProvider authenticationProvider() {\r\n        DaoAuthenticationProvider daoAuthenticationProvider = new DaoAuthenticationProvider();\r\n        daoAuthenticationProvider.setUserDetailsService(this.getUserDetailServices());\r\n        daoAuthenticationProvider.setPasswordEncoder(passwordEncoder());\r\n        return daoAuthenticationProvider;\r\n    }\r\n\r\n    @Bean\r\n    public AuthenticationManager authenticationManager(AuthenticationConfiguration authenticationConfiguration) throws Exception {\r\n        return authenticationConfiguration.getAuthenticationManager();\r\n    }\r\n\r\n    @Bean\r\n    public SecurityFilterChain filterChain(HttpSecurity httpSecurity) throws Exception {\r\n        httpSecurity.csrf().disable()\r\n                .authorizeHttpRequests()\r\n                .requestMatchers(&quot;/admin/**&quot;).permitAll()\r\n                .and()\r\n                .authorizeHttpRequests().requestMatchers(&quot;/user/**&quot;).permitAll()\r\n                .anyRequest()\r\n                .authenticated()\r\n                .and()\r\n                .formLogin();\r\n\r\n\r\n        return httpSecurity.build();\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\n\r\n```\r\n","title":"Spring security login is still coming even after I used permit all","body":"<p>I am very new to spring security. I am building a project which has login logout feature. I did the configuration as told in the tutorials but is still not allowing to access directly without login.\nAnd most of the methods which i use says that it is marked for\ndeprecated or marked for removal.\nI will be grateful if anyone can guide me</p>\n<p>I also noticed that it is not generating the default username and password for login</p>\n<pre><code>package com.example.covidsurvey.config;\n\nimport org.apache.catalina.security.SecurityConfig;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.security.authentication.AuthenticationManager;\nimport org.springframework.security.authentication.dao.DaoAuthenticationProvider;\nimport org.springframework.security.config.annotation.authentication.configuration.AuthenticationConfiguration;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\nimport org.springframework.security.config.http.SessionCreationPolicy;\nimport org.springframework.security.core.userdetails.UserDetailsService;\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\nimport org.springframework.security.web.SecurityFilterChain;\nimport org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter;\n\n@Configuration\n@EnableWebSecurity\npublic class MyConfig {\n    @Bean\n    public UserDetailsService getUserDetailServices() {\n        return new UserDetailServiceImpl();\n    }\n\n    @Bean\n    public BCryptPasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder();\n    }\n\n    @Bean\n    public DaoAuthenticationProvider authenticationProvider() {\n        DaoAuthenticationProvider daoAuthenticationProvider = new DaoAuthenticationProvider();\n        daoAuthenticationProvider.setUserDetailsService(this.getUserDetailServices());\n        daoAuthenticationProvider.setPasswordEncoder(passwordEncoder());\n        return daoAuthenticationProvider;\n    }\n\n    @Bean\n    public AuthenticationManager authenticationManager(AuthenticationConfiguration authenticationConfiguration) throws Exception {\n        return authenticationConfiguration.getAuthenticationManager();\n    }\n\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity httpSecurity) throws Exception {\n        httpSecurity.csrf().disable()\n                .authorizeHttpRequests()\n                .requestMatchers(&quot;/admin/**&quot;).permitAll()\n                .and()\n                .authorizeHttpRequests().requestMatchers(&quot;/user/**&quot;).permitAll()\n                .anyRequest()\n                .authenticated()\n                .and()\n                .formLogin();\n\n\n        return httpSecurity.build();\n\n    }\n\n\n}\n\n\n</code></pre>\n"},{"tags":["java","docker","nginx","spring-security"],"comments":[{"owner":{"account_id":6014322,"reputation":7634,"user_id":4723732,"accept_rate":93,"display_name":"Richard Rublev"},"score":0,"creation_date":1686816431,"post_id":76480004,"comment_id":134852100,"body_markdown":"show us dockerfile.","body":"show us dockerfile."},{"owner":{"account_id":10526784,"reputation":35,"user_id":7757559,"display_name":"Mike Toleds"},"score":0,"creation_date":1686846802,"post_id":76480004,"comment_id":134857610,"body_markdown":"i have updated above and added Dockerfile and docker-compose.yaml content","body":"i have updated above and added Dockerfile and docker-compose.yaml content"}],"owner":{"account_id":10526784,"reputation":35,"user_id":7757559,"display_name":"Mike Toleds"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":99,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686887406,"creation_date":1686813401,"question_id":76480004,"body_markdown":"I have a Springboot app running behind Nginx whereby upon load of the screen, the ui will invoke the springboot endpoint (PermitAll - no auth required) and return data back to the client.  However, when accessing the endpoint, it returned 401 and 200 alternately.\r\n\r\nThe **Nginx** entry is quite simple.\r\n\r\n```\r\nlocation /v1/auth {\r\n    include /etc/nginx/shared.conf;\r\n    proxy_pass http://user-svc;\r\n}\r\n```\r\n\r\nthe **upstream** is\r\n\r\n```\r\nupstream user-svc {\r\n    server user-svc:8080;\r\n}\r\n```\r\n\r\nthe **shared.conf** looks like\r\n\r\n```\r\nerror_page 405 =200 $uri;\r\n# proxy_cache my_cache;\r\n# proxy_cache_valid 200 30s;\r\n# proxy_cache_methods GET HEAD POST;\r\n# proxy_cache_min_uses 1;\r\n# proxy_cache_use_stale error timeout http_500 http_502 http_503 http_504;\r\nproxy_cache_bypass $http_cache_control;\r\nproxy_no_cache $http_cache_control;\r\nproxy_cache off;\r\nproxy_redirect off;\r\nproxy_set_header Host $host;\r\nproxy_set_header X-Real-IP $remote_addr;\r\nproxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\r\n#proxy_set_header X-forwarded-Host $server_name;\r\nproxy_set_header X-Forwarded-Host $host:$server_port;\r\n```\r\n\r\n**Dockerfile**\r\n\r\n    FROM java-base-image as builder\r\n    WORKDIR /app\r\n    COPY pom.xml ./\r\n    COPY ./src ./src\r\n    RUN mvn -o clean install -DskipTests spring-boot:repackage\r\n    \r\n    FROM --platform=linux/amd64 jdk11-base-image\r\n    COPY --from=builder /app/target/user-svc-0.0.1-SNAPSHOT.jar /app/user-svc-0.0.1-SNAPSHOT.jar\r\n    EXPOSE 8080\r\n    WORKDIR /app\r\n    ENTRYPOINT [&quot;java&quot;, &quot;-jar&quot;, &quot;user-svc-0.0.1-SNAPSHOT.jar&quot;]\r\n\r\n\r\n**docker-compose.yaml**\r\n\r\n    version: &quot;3&quot;\r\n    services:\r\n      user-svc:\r\n        container_name: user-svc\r\n        image: user-svc:latest\r\n        expose:\r\n          - &quot;8080&quot;\r\n        networks:\r\n          - private-network\r\n        environment:\r\n          TZ: Asia/Singapore\r\n          SERVER_PORT: 8080\r\n          DB_URL: jdbc:mysql://mysql-db:3306/user\r\n          DB_USER: root\r\n          DB_PASS: password\r\n    networks:\r\n      private-network:\r\n        external: true\r\n\r\n\r\nThe problem only occurred when accessing via Nginx.  Accessing it directly, via docker container or standalone (via Intellij) everything is working fine where http 200 is always returned.\r\n\r\nMy expectation is to received a 200 code always since this endpoint doesn&#39;t require any authentication at all.\r\n\r\nAny ideas what could be the problem?","title":"NGINX + Springboot (with Spring Security) 401 problem","body":"<p>I have a Springboot app running behind Nginx whereby upon load of the screen, the ui will invoke the springboot endpoint (PermitAll - no auth required) and return data back to the client.  However, when accessing the endpoint, it returned 401 and 200 alternately.</p>\n<p>The <strong>Nginx</strong> entry is quite simple.</p>\n<pre><code>location /v1/auth {\n    include /etc/nginx/shared.conf;\n    proxy_pass http://user-svc;\n}\n</code></pre>\n<p>the <strong>upstream</strong> is</p>\n<pre><code>upstream user-svc {\n    server user-svc:8080;\n}\n</code></pre>\n<p>the <strong>shared.conf</strong> looks like</p>\n<pre><code>error_page 405 =200 $uri;\n# proxy_cache my_cache;\n# proxy_cache_valid 200 30s;\n# proxy_cache_methods GET HEAD POST;\n# proxy_cache_min_uses 1;\n# proxy_cache_use_stale error timeout http_500 http_502 http_503 http_504;\nproxy_cache_bypass $http_cache_control;\nproxy_no_cache $http_cache_control;\nproxy_cache off;\nproxy_redirect off;\nproxy_set_header Host $host;\nproxy_set_header X-Real-IP $remote_addr;\nproxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n#proxy_set_header X-forwarded-Host $server_name;\nproxy_set_header X-Forwarded-Host $host:$server_port;\n</code></pre>\n<p><strong>Dockerfile</strong></p>\n<pre><code>FROM java-base-image as builder\nWORKDIR /app\nCOPY pom.xml ./\nCOPY ./src ./src\nRUN mvn -o clean install -DskipTests spring-boot:repackage\n\nFROM --platform=linux/amd64 jdk11-base-image\nCOPY --from=builder /app/target/user-svc-0.0.1-SNAPSHOT.jar /app/user-svc-0.0.1-SNAPSHOT.jar\nEXPOSE 8080\nWORKDIR /app\nENTRYPOINT [&quot;java&quot;, &quot;-jar&quot;, &quot;user-svc-0.0.1-SNAPSHOT.jar&quot;]\n</code></pre>\n<p><strong>docker-compose.yaml</strong></p>\n<pre><code>version: &quot;3&quot;\nservices:\n  user-svc:\n    container_name: user-svc\n    image: user-svc:latest\n    expose:\n      - &quot;8080&quot;\n    networks:\n      - private-network\n    environment:\n      TZ: Asia/Singapore\n      SERVER_PORT: 8080\n      DB_URL: jdbc:mysql://mysql-db:3306/user\n      DB_USER: root\n      DB_PASS: password\nnetworks:\n  private-network:\n    external: true\n</code></pre>\n<p>The problem only occurred when accessing via Nginx.  Accessing it directly, via docker container or standalone (via Intellij) everything is working fine where http 200 is always returned.</p>\n<p>My expectation is to received a 200 code always since this endpoint doesn't require any authentication at all.</p>\n<p>Any ideas what could be the problem?</p>\n"},{"tags":["java","android-studio"],"owner":{"account_id":28802518,"reputation":1,"user_id":22059055,"display_name":"Arya Sujeet"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":10,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686885270,"creation_date":1686885270,"question_id":76486742,"body_markdown":"I want to save MerginMedia source in internal file .\r\nIn exo[enter image description here](https://i.stack.imgur.com/22Cad.png)player how can i do this.\r\n\r\n\r\n      MediaSource videoSource = new ProgressiveMediaSource\r\n               .Factory(new DefaultDataSource.Factory(this))\r\n                .createMediaSource(MediaItem.fromUri(Environment.getExternalStorageDirectory().getPath()+&quot;/&quot;+&quot;Aaaaaaa/a/video.mp4&quot;));\r\n        MediaSource audioSource = new ProgressiveMediaSource.Factory(new DefaultDataSource.Factory(this))\r\n                .createMediaSource(MediaItem.fromUri(Environment.getExternalStorageDirectory().getPath()+&quot;/&quot;+&quot;Aaaaaaa/a/audio.m4a&quot;));\r\n\r\n        MergingMediaSource mergedSource1111 = new MergingMediaSource(videoSource, audioSource);\r\n\r\n\r\n\r\nI want to save mergedSource1111  in internal memory please helps.","title":"I want to save MergingmediaSource into file","body":"<p>I want to save MerginMedia source in internal file .\nIn exo<a href=\"https://i.stack.imgur.com/22Cad.png\" rel=\"nofollow noreferrer\">enter image description here</a>player how can i do this.</p>\n<pre><code>  MediaSource videoSource = new ProgressiveMediaSource\n           .Factory(new DefaultDataSource.Factory(this))\n            .createMediaSource(MediaItem.fromUri(Environment.getExternalStorageDirectory().getPath()+&quot;/&quot;+&quot;Aaaaaaa/a/video.mp4&quot;));\n    MediaSource audioSource = new ProgressiveMediaSource.Factory(new DefaultDataSource.Factory(this))\n            .createMediaSource(MediaItem.fromUri(Environment.getExternalStorageDirectory().getPath()+&quot;/&quot;+&quot;Aaaaaaa/a/audio.m4a&quot;));\n\n    MergingMediaSource mergedSource1111 = new MergingMediaSource(videoSource, audioSource);\n</code></pre>\n<p>I want to save mergedSource1111  in internal memory please helps.</p>\n"},{"tags":["java","itext7"],"comments":[{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1686892238,"post_id":76486726,"comment_id":134863331,"body_markdown":"Have you tried non- breaking spaces there?","body":"Have you tried non- breaking spaces there?"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1686944369,"post_id":76486726,"comment_id":134873402,"body_markdown":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer.","body":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer."}],"owner":{"account_id":28831046,"reputation":1,"user_id":22081461,"display_name":"superfans"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":16,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686884918,"creation_date":1686884918,"question_id":76486726,"body_markdown":"In order to align the text in each line by column, sometimes it is necessary to add full-width spaces at the end of the line, but when I use itext7 to output pdf, the spaces at the end of the line will be cleared. How can I keep this space (the space must be full-width)? Please give me some advice, thank you!","title":"How to preserve the full-width spaces at the end of text lines when using itext 7?","body":"<p>In order to align the text in each line by column, sometimes it is necessary to add full-width spaces at the end of the line, but when I use itext7 to output pdf, the spaces at the end of the line will be cleared. How can I keep this space (the space must be full-width)? Please give me some advice, thank you!</p>\n"},{"tags":["java","multithreading","jvm","wait","notify"],"comments":[{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":1,"creation_date":1686883934,"post_id":76486638,"comment_id":134862706,"body_markdown":"Just as an aside, this sort of interleaving -- running one thread for a short amount of time, then waiting for another thread -- is almost always not something you&#39;d want to do in the real world.  Threads normally should be given a substantial amount of work to properly amortize their overhead.","body":"Just as an aside, this sort of interleaving -- running one thread for a short amount of time, then waiting for another thread -- is almost always not something you&#39;d want to do in the real world.  Threads normally should be given a substantial amount of work to properly amortize their overhead."},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1686884061,"post_id":76486638,"comment_id":134862714,"body_markdown":"My first observation is that `counter` almost certainly needs to be `volatile` so each thread will see the updates.","body":"My first observation is that <code>counter</code> almost certainly needs to be <code>volatile</code> so each thread will see the updates."},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1686884233,"post_id":76486638,"comment_id":134862728,"body_markdown":"while (counter%2==1) it appears and other code a &quot;carbon copy&quot; of conditions. The threads appear carbon copies so meet same requirements on wait, so both sit there on the same condition. Better define the two conditions, and walk through your work sequencing to check it&#39;s one thread after the other.","body":"while (counter%2==1) it appears and other code a &quot;carbon copy&quot; of conditions. The threads appear carbon copies so meet same requirements on wait, so both sit there on the same condition. Better define the two conditions, and walk through your work sequencing to check it&#39;s one thread after the other."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1686902032,"post_id":76486638,"comment_id":134864804,"body_markdown":"@markspace no, if there wasn’t the fundamental problem of using different objects for the synchronization, no `volatile` would be necessary.","body":"@markspace no, if there wasn’t the fundamental problem of using different objects for the synchronization, no <code>volatile</code> would be necessary."},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1686924718,"post_id":76486638,"comment_id":134869647,"body_markdown":"@Holger Are you sure?  I think it&#39;s obvious that `counter` is updated by both threads (using `counter++`, no less) and must be made `volatile`.  That&#39;s not the only problem, the OP is using two locks which aren&#39;t updated by the other thread, but I&#39;m sure `counter` is a problem as well.","body":"@Holger Are you sure?  I think it&#39;s obvious that <code>counter</code> is updated by both threads (using <code>counter++</code>, no less) and must be made <code>volatile</code>.  That&#39;s not the only problem, the OP is using two locks which aren&#39;t updated by the other thread, but I&#39;m sure <code>counter</code> is a problem as well."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1686925868,"post_id":76486638,"comment_id":134869938,"body_markdown":"@markspace when fixing the program, to use the same object for `synchronized` in both threads, the synchronization takes care of the memory visibility. With the correct synchronization, it’s impossible for the two threads to run at the same time here, as a thread can only return from `wait` when the other thread either left the `synchronized` block or entered `wait`, in other words, released the lock in some way, as returning from `wait` implies re-acquiring the lock. There is a *happens-before* relationship between releasing the lock and subsequent acquiring of the same lock.","body":"@markspace when fixing the program, to use the same object for <code>synchronized</code> in both threads, the synchronization takes care of the memory visibility. With the correct synchronization, it’s impossible for the two threads to run at the same time here, as a thread can only return from <code>wait</code> when the other thread either left the <code>synchronized</code> block or entered <code>wait</code>, in other words, released the lock in some way, as returning from <code>wait</code> implies re-acquiring the lock. There is a <i>happens-before</i> relationship between releasing the lock and subsequent acquiring of the same lock."},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1686926616,"post_id":76486638,"comment_id":134870097,"body_markdown":"Ah, right.  `wait()` *synchronizes-with* just like exiting a `synchronized` block.  The spec mentions `wait()` under its *happens-before* section but not in the *synchronizes-with* section (17.4.5 vs 17.4.4).  Bad spec!  @Holger","body":"Ah, right.  <code>wait()</code> <i>synchronizes-with</i> just like exiting a <code>synchronized</code> block.  The spec mentions <code>wait()</code> under its <i>happens-before</i> section but not in the <i>synchronizes-with</i> section (17.4.5 vs 17.4.4).  Bad spec!  @Holger"}],"answers":[{"comments":[{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1686895033,"post_id":76486725,"comment_id":134863667,"body_markdown":"I would advise to add `private` to `lock` - usually we do not want *external* code to be able to notify on it (probably valid for all fields...)","body":"I would advise to add <code>private</code> to <code>lock</code> - usually we do not want <i>external</i> code to be able to notify on it (probably valid for all fields...)"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1686902047,"post_id":76486725,"comment_id":134864806,"body_markdown":"It’s weird how you use “self” to avoid “`this`”. Further, your wording is pushing beginners into the wrong direction, to think that `even` and `odd` were objects, rather than variables containing references to objects.","body":"It’s weird how you use “self” to avoid “<code>this</code>”. Further, your wording is pushing beginners into the wrong direction, to think that <code>even</code> and <code>odd</code> were objects, rather than variables containing references to objects."},{"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"score":0,"creation_date":1686918543,"post_id":76486725,"comment_id":134868210,"body_markdown":"@Holger, That&#39;s funny, because I am usually the first one to call attention to the distinction between variables and objects and object references when failure to understand it is the root of somebody&#39;s problem; but that&#39;s not the case here. I wanted to call attention to the fact that each thread has its own distinct delegate, and it felt natural to call them out by name. I&#39;m pretty sure that all of us are guilty of  using the names of variables to identify the objects to which they refer when there&#39;s no possibility of misunderstanding which object is meant.","body":"@Holger, That&#39;s funny, because I am usually the first one to call attention to the distinction between variables and objects and object references when failure to understand it is the root of somebody&#39;s problem; but that&#39;s not the case here. I wanted to call attention to the fact that each thread has its own distinct delegate, and it felt natural to call them out by name. I&#39;m pretty sure that all of us are guilty of  using the names of variables to identify the objects to which they refer when there&#39;s no possibility of misunderstanding which object is meant."},{"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"score":0,"creation_date":1686919961,"post_id":76486725,"comment_id":134868497,"body_markdown":"@Holger, Re, &quot;&#39;self&#39; to _avoid_ &#39;this&#39;&quot;, I wasn&#39;t _consciously_ trying to avoid anything, though I have always felt that Java&#39;s `this` is somewhat awkward in comparison to the `self` from other languages. I&#39;d have to spend a lot more words to express the idea contained in &quot;its own self&quot; if I wasn&#39;t allowed to say, &quot;self.&quot; Also, If I&#39;d simply said, &quot;each object synchronizes on `this`,&quot; I wouldn&#39;t be telling the OP anything they don&#39;t already know. It&#39;s explicit in their own code.","body":"@Holger, Re, &quot;&#39;self&#39; to <i>avoid</i> &#39;this&#39;&quot;, I wasn&#39;t <i>consciously</i> trying to avoid anything, though I have always felt that Java&#39;s <code>this</code> is somewhat awkward in comparison to the <code>self</code> from other languages. I&#39;d have to spend a lot more words to express the idea contained in &quot;its own self&quot; if I wasn&#39;t allowed to say, &quot;self.&quot; Also, If I&#39;d simply said, &quot;each object synchronizes on <code>this</code>,&quot; I wouldn&#39;t be telling the OP anything they don&#39;t already know. It&#39;s explicit in their own code."},{"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"score":0,"creation_date":1686920154,"post_id":76486725,"comment_id":134868541,"body_markdown":"@user16320675, I would have done without even thinking about it if OP&#39;s `counter` also had been `private`.","body":"@user16320675, I would have done without even thinking about it if OP&#39;s <code>counter</code> also had been <code>private</code>."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1686921527,"post_id":76486725,"comment_id":134868859,"body_markdown":"In case of the `wait()` and `notify()` calls, it’s not that obvious that they are invoked on `this`. But yes, the important point is not that these two threads are synchronizing on “this” but that “this” is referring to different objects. Which are the two `Runnable` instances that have been passed to the two `Thread` constructors. But maybe, your wording is easier to grasp for beginners; it would be very useful to get feedback from the OP whether it was helpful…","body":"In case of the <code>wait()</code> and <code>notify()</code> calls, it’s not that obvious that they are invoked on <code>this</code>. But yes, the important point is not that these two threads are synchronizing on “this” but that “this” is referring to different objects. Which are the two <code>Runnable</code> instances that have been passed to the two <code>Thread</code> constructors. But maybe, your wording is easier to grasp for beginners; it would be very useful to get feedback from the OP whether it was helpful…"},{"owner":{"account_id":28830995,"reputation":1,"user_id":22081422,"display_name":"Avenger"},"score":0,"creation_date":1687053175,"post_id":76486725,"comment_id":134882935,"body_markdown":"Updated code : static Integer counter = Integer.valueOf(1);\n\tstatic Runnable odd = new Runnable() {\n\t\t@Override\n\t\tpublic void run() {\n\t\t\tsynchronized (counter) {\n\t\t\t\twhile(counter &lt; totalNos) {\t\n\t\t\t\t\twhile (counter%2==0) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\twait();\n\t\t\t\t\t\t} catch (InterruptedException e) {\n\t\t\t\t\t\t\te.printStackTrace();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tSystem.out.print(counter + &quot; &quot;);\n\t\t\t\t\tcounter++;\n\t\t\t\t\tnotify();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}; But Now :  Exception in thread &quot;Thread-0&quot; 2 Exception in thread &quot;Thread-1&quot; java.lang.IllegalMonitorStateException: current thread is not owner","body":"Updated code : static Integer counter = Integer.valueOf(1); \tstatic Runnable odd = new Runnable() { \t\t@Override \t\tpublic void run() { \t\t\tsynchronized (counter) { \t\t\t\twhile(counter &lt; totalNos) {\t \t\t\t\t\twhile (counter%2==0) { \t\t\t\t\t\ttry { \t\t\t\t\t\t\twait(); \t\t\t\t\t\t} catch (InterruptedException e) { \t\t\t\t\t\t\te.printStackTrace(); \t\t\t\t\t\t} \t\t\t\t\t} \t\t\t\t\tSystem.out.print(counter + &quot; &quot;); \t\t\t\t\tcounter++; \t\t\t\t\tnotify(); \t\t\t\t} \t\t\t} \t\t} \t}; But Now :  Exception in thread &quot;Thread-0&quot; 2 Exception in thread &quot;Thread-1&quot; java.lang.IllegalMonitorStateException: current thread is not owner"},{"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"score":0,"creation_date":1687054134,"post_id":76486725,"comment_id":134882982,"body_markdown":"That&#39;s because `wait()` is synonymous with `this.wait()`, but you need `counter.wait()`. Ditto for `notify`.","body":"That&#39;s because <code>wait()</code> is synonymous with <code>this.wait()</code>, but you need <code>counter.wait()</code>. Ditto for <code>notify</code>."}],"tags":[],"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"comment_count":8,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686884908,"creation_date":1686884908,"answer_id":76486725,"question_id":76486638,"body_markdown":"You have no synchronization between the two objects. Each of your two objects, `even` and `odd` synchronizes on its own self, waits on its own self, and notifies its own self. Or, more accurately, it _would_ notify its own self if it ever got to that point, but it doesn&#39;t get there because the other thread never notifies it.\r\n\r\nYou need to have both threads use the same object for synchronization. E.g.;\r\n\r\n``` lang-java\r\npublic class OddEven {\r\n    static final Object lock = new Object();\r\n    static int totalNos;\r\n    static int counter = 1;\r\n    static Runnable odd = new Runnable() {\r\n        @Override\r\n        public void run() {\r\n            synchronized (lock) {\r\n                ...\r\n                lock.wait();\r\n                ...\r\n                lock.notify();\r\n            }\r\n        }\r\n    }\r\n    .\r\n    .\r\n    .\r\n}\r\n```","title":"Thread is going in infinite wait state","body":"<p>You have no synchronization between the two objects. Each of your two objects, <code>even</code> and <code>odd</code> synchronizes on its own self, waits on its own self, and notifies its own self. Or, more accurately, it <em>would</em> notify its own self if it ever got to that point, but it doesn't get there because the other thread never notifies it.</p>\n<p>You need to have both threads use the same object for synchronization. E.g.;</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class OddEven {\n    static final Object lock = new Object();\n    static int totalNos;\n    static int counter = 1;\n    static Runnable odd = new Runnable() {\n        @Override\n        public void run() {\n            synchronized (lock) {\n                ...\n                lock.wait();\n                ...\n                lock.notify();\n            }\n        }\n    }\n    .\n    .\n    .\n}\n</code></pre>\n"}],"owner":{"account_id":28830995,"reputation":1,"user_id":22081422,"display_name":"Avenger"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686884908,"creation_date":1686883094,"question_id":76486638,"body_markdown":"Given an integer N, the task is to write a Java program to print the first N natural numbers in increasing order using two threads. However, the output is only showing the number 1 as the thread is going into an infinite loop and this is something the user could not debug.\r\n\r\n```java\r\npublic class OddEven {\r\n    static int totalNos;\r\n    static int counter = 1;\r\n    static Runnable odd = new Runnable() {\r\n        @Override\r\n        public void run() {\r\n            synchronized (this) {\r\n                while(counter &lt; totalNos) {\t\r\n                    while (counter%2==0) {\r\n                        try {\r\n                            wait();\r\n                        } catch (InterruptedException e) {\r\n                            e.printStackTrace();\r\n                        }\r\n                    }\r\n                    System.out.print(counter + &quot; &quot;);\r\n                    counter++;\r\n                    notify();\r\n                }\r\n            }\r\n        }\r\n    };\r\n    \r\n    static Runnable even = new Runnable() {\r\n        @Override\r\n        public void run() {\r\n            synchronized (this) {\r\n                while(counter &lt; totalNos) {\r\n                    while (counter%2==1) {\r\n                        try {\r\n                            wait();\r\n                        } catch (InterruptedException e) {\r\n                            e.printStackTrace();\r\n                        }\r\n                    }\r\n                    System.out.print(counter + &quot; &quot;);\r\n                    counter++;\r\n                    notify();\r\n                }\r\n            }\r\n        }\r\n    };\r\n    \r\n    public static void main(String[] args) {\r\n        System.out.println(&quot;Enter the total no&#39;s&quot;);\r\n        Scanner scObj = new Scanner(System.in);\r\n        totalNos = scObj.nextInt();\r\n        scObj.close();\r\n        Thread oddT1 = new Thread(odd);\r\n        Thread evenT1 = new Thread(even);\r\n        oddT1.start();\r\n        evenT1.start();\t \r\n      \r\n    }\r\n}\r\n```","title":"Thread is going in infinite wait state","body":"<p>Given an integer N, the task is to write a Java program to print the first N natural numbers in increasing order using two threads. However, the output is only showing the number 1 as the thread is going into an infinite loop and this is something the user could not debug.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class OddEven {\n    static int totalNos;\n    static int counter = 1;\n    static Runnable odd = new Runnable() {\n        @Override\n        public void run() {\n            synchronized (this) {\n                while(counter &lt; totalNos) { \n                    while (counter%2==0) {\n                        try {\n                            wait();\n                        } catch (InterruptedException e) {\n                            e.printStackTrace();\n                        }\n                    }\n                    System.out.print(counter + &quot; &quot;);\n                    counter++;\n                    notify();\n                }\n            }\n        }\n    };\n    \n    static Runnable even = new Runnable() {\n        @Override\n        public void run() {\n            synchronized (this) {\n                while(counter &lt; totalNos) {\n                    while (counter%2==1) {\n                        try {\n                            wait();\n                        } catch (InterruptedException e) {\n                            e.printStackTrace();\n                        }\n                    }\n                    System.out.print(counter + &quot; &quot;);\n                    counter++;\n                    notify();\n                }\n            }\n        }\n    };\n    \n    public static void main(String[] args) {\n        System.out.println(&quot;Enter the total no's&quot;);\n        Scanner scObj = new Scanner(System.in);\n        totalNos = scObj.nextInt();\n        scObj.close();\n        Thread oddT1 = new Thread(odd);\n        Thread evenT1 = new Thread(even);\n        oddT1.start();\n        evenT1.start();  \n      \n    }\n}\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":14283811,"reputation":6405,"user_id":10317684,"display_name":"Ricky Mo"},"score":0,"creation_date":1686895318,"post_id":76486702,"comment_id":134863713,"body_markdown":"You need [multi-threading](https://gist.github.com/declank/8fce5a02e4b6bb572e7a)","body":"You need <a href=\"https://gist.github.com/declank/8fce5a02e4b6bb572e7a\" rel=\"nofollow noreferrer\">multi-threading</a>"}],"owner":{"account_id":28828482,"reputation":1,"user_id":22079493,"display_name":"ItsJoever"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":12,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686884601,"creation_date":1686884601,"question_id":76486702,"body_markdown":"I have two classes that work fine if the server sends a message and the client replies before the server sends another one. For example, the server says &quot;Hello&quot; and the client responds with &quot;Hi&quot;. But if the server were to send &quot;Hello&quot; and then &quot;How are you?&quot;, the second message would not be sent until the client sends a message. Can I change this to allow multiple messages to be sent without a response first? \r\n\r\n```\r\nimport java.io.BufferedReader;\r\nimport java.io.DataInputStream;\r\nimport java.io.DataOutputStream;\r\nimport java.io.InputStreamReader;\r\nimport java.net.ServerSocket;\r\nimport java.net.Socket;\r\n\r\npublic class Server {\r\n   ServerSocket newServer;\r\n   Socket newSocket;\r\n   DataInputStream newInputStream;\r\n   DataOutputStream newOutputStream;\r\n   BufferedReader newReader;\r\n\r\n   public Server () {\r\n      try {\r\n         this.newServer = new ServerSocket(4444);\r\n         this.newSocket = newServer.accept();\r\n         this.newInputStream = new DataInputStream(newSocket.getInputStream());\r\n         this.newOutputStream = new DataOutputStream(newSocket.getOutputStream());\r\n         this.newReader = new BufferedReader(new InputStreamReader(System.in));\r\n\r\n      } catch (Exception e) {\r\n         System.out.println(e);\r\n      }\r\n   }\r\n\r\n   public void handleMessages () {\r\n      try {\r\n         String MessageReceived = &quot;&quot;;\r\n         String MessageSent;\r\n         while (!MessageReceived.equals(&quot;End Connection&quot;)) {\r\n            MessageReceived = newInputStream.readUTF();\r\n            System.out.println(&quot;Client says: &quot; + MessageReceived);\r\n            MessageSent = newReader.readLine();\r\n            newOutputStream.writeUTF(MessageSent + &quot;\\n&quot;);\r\n            newOutputStream.flush();\r\n         }\r\n         newInputStream.close();\r\n         newOutputStream.close();\r\n         newSocket.close();\r\n         newServer.close();\r\n      } catch (Exception e) {\r\n         System.out.println(e);\r\n      }\r\n   }\r\n\r\n   public static void main (String [] args) {\r\n      Server newServer = new Server ();\r\n      newServer.handleMessages();\r\n   }\r\n}\r\n```\r\n\r\n\r\n```\r\nimport java.io.BufferedReader;\r\nimport java.io.DataInputStream;\r\nimport java.io.DataOutputStream;\r\nimport java.io.InputStreamReader;\r\nimport java.net.ServerSocket;\r\nimport java.net.Socket;\r\n\r\npublic class Client {\r\n   Socket newSocket;\r\n   DataInputStream newInputStream;\r\n   DataOutputStream newOutputStream;\r\n   BufferedReader newReader;\r\n\r\n   public Client () {\r\n      try {\r\n         newSocket = new Socket (&quot;localhost&quot;, 4444);\r\n         newInputStream = new DataInputStream(newSocket.getInputStream());\r\n         newOutputStream = new DataOutputStream(newSocket.getOutputStream());\r\n         newReader = new BufferedReader(new InputStreamReader(System.in));\r\n\r\n      } catch (Exception e) {\r\n         System.out.println(e);\r\n      }\r\n   }\r\n   public void handleMessages () {\r\n      try {\r\n         String MessageReceived;\r\n         String MessageSent = &quot;&quot;;\r\n         while (!MessageSent.equals(&quot;End Connection&quot;)) {\r\n            if (newInputStream.available() &gt; 0) {\r\n               MessageReceived = newInputStream.readUTF();\r\n               System.out.println(&quot;Server says: &quot; + MessageReceived);\r\n            }\r\n            if (newReader.ready()) {\r\n               MessageSent = newReader.readLine();\r\n               newOutputStream.writeUTF(MessageSent + &quot;\\n&quot;);\r\n               newOutputStream.flush();\r\n            }\r\n         }\r\n         newInputStream.close();\r\n         newOutputStream.close();\r\n         newSocket.close();\r\n      } catch (Exception e) {\r\n         System.out.println(e);\r\n      }\r\n   }\r\n   public static void main (String [] args) {\r\n      Client newClient = new Client ();\r\n      newClient.handleMessages();\r\n   }\r\n}\r\n\r\n```","title":"Java server not sending consecutive messages until message is received","body":"<p>I have two classes that work fine if the server sends a message and the client replies before the server sends another one. For example, the server says &quot;Hello&quot; and the client responds with &quot;Hi&quot;. But if the server were to send &quot;Hello&quot; and then &quot;How are you?&quot;, the second message would not be sent until the client sends a message. Can I change this to allow multiple messages to be sent without a response first?</p>\n<pre><code>import java.io.BufferedReader;\nimport java.io.DataInputStream;\nimport java.io.DataOutputStream;\nimport java.io.InputStreamReader;\nimport java.net.ServerSocket;\nimport java.net.Socket;\n\npublic class Server {\n   ServerSocket newServer;\n   Socket newSocket;\n   DataInputStream newInputStream;\n   DataOutputStream newOutputStream;\n   BufferedReader newReader;\n\n   public Server () {\n      try {\n         this.newServer = new ServerSocket(4444);\n         this.newSocket = newServer.accept();\n         this.newInputStream = new DataInputStream(newSocket.getInputStream());\n         this.newOutputStream = new DataOutputStream(newSocket.getOutputStream());\n         this.newReader = new BufferedReader(new InputStreamReader(System.in));\n\n      } catch (Exception e) {\n         System.out.println(e);\n      }\n   }\n\n   public void handleMessages () {\n      try {\n         String MessageReceived = &quot;&quot;;\n         String MessageSent;\n         while (!MessageReceived.equals(&quot;End Connection&quot;)) {\n            MessageReceived = newInputStream.readUTF();\n            System.out.println(&quot;Client says: &quot; + MessageReceived);\n            MessageSent = newReader.readLine();\n            newOutputStream.writeUTF(MessageSent + &quot;\\n&quot;);\n            newOutputStream.flush();\n         }\n         newInputStream.close();\n         newOutputStream.close();\n         newSocket.close();\n         newServer.close();\n      } catch (Exception e) {\n         System.out.println(e);\n      }\n   }\n\n   public static void main (String [] args) {\n      Server newServer = new Server ();\n      newServer.handleMessages();\n   }\n}\n</code></pre>\n<pre><code>import java.io.BufferedReader;\nimport java.io.DataInputStream;\nimport java.io.DataOutputStream;\nimport java.io.InputStreamReader;\nimport java.net.ServerSocket;\nimport java.net.Socket;\n\npublic class Client {\n   Socket newSocket;\n   DataInputStream newInputStream;\n   DataOutputStream newOutputStream;\n   BufferedReader newReader;\n\n   public Client () {\n      try {\n         newSocket = new Socket (&quot;localhost&quot;, 4444);\n         newInputStream = new DataInputStream(newSocket.getInputStream());\n         newOutputStream = new DataOutputStream(newSocket.getOutputStream());\n         newReader = new BufferedReader(new InputStreamReader(System.in));\n\n      } catch (Exception e) {\n         System.out.println(e);\n      }\n   }\n   public void handleMessages () {\n      try {\n         String MessageReceived;\n         String MessageSent = &quot;&quot;;\n         while (!MessageSent.equals(&quot;End Connection&quot;)) {\n            if (newInputStream.available() &gt; 0) {\n               MessageReceived = newInputStream.readUTF();\n               System.out.println(&quot;Server says: &quot; + MessageReceived);\n            }\n            if (newReader.ready()) {\n               MessageSent = newReader.readLine();\n               newOutputStream.writeUTF(MessageSent + &quot;\\n&quot;);\n               newOutputStream.flush();\n            }\n         }\n         newInputStream.close();\n         newOutputStream.close();\n         newSocket.close();\n      } catch (Exception e) {\n         System.out.println(e);\n      }\n   }\n   public static void main (String [] args) {\n      Client newClient = new Client ();\n      newClient.handleMessages();\n   }\n}\n\n</code></pre>\n"},{"tags":["java","spring","spring-security","spring-webflux"],"answers":[{"tags":[],"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686884078,"creation_date":1686884078,"answer_id":76486681,"question_id":76485027,"body_markdown":"You have defined **OAuth2 client** configuration: requests authorized with sessions, and response to requests with missing or invalid authorization with 302 status (redirected to login). This is fine to serve pages rendered on the server (Thymeleaf, JSF or whatever).\r\n\r\nREST endpoints should be configured as **OAuth2 resource server**: requests authorized with access tokens, no sessions, and response to requests with missing or invalid authorization with 401 (unauthorized).\r\n\r\nIf your application serves both server-side rendered pages and REST resources, then you should define two different security filter-chains: one with client configuration and the other one with resource server configuration.\r\n\r\nWhen you define more than one security filter-chain bean, those should be decorated with `@Order` to define in which order they are evaluated and all filter-chains but the last one in `@Order` should have a security matcher (something like `http.securityMatcher(&quot;/api/**&quot;)` for a resource server filter chain) to restrict it to the resources it should secure and give a chance to those with higher order to process the request (evaluated next if the security matcher didn&#39;t match).\r\n\r\nMore details in [my tutorials][1] (one is dedicated to apps serving both a REST API and a Thymeleaf client).\r\n\r\n\r\n  [1]: https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials","title":"How to send different response for AJAX request if Authentication is required in Spring Boot","body":"<p>You have defined <strong>OAuth2 client</strong> configuration: requests authorized with sessions, and response to requests with missing or invalid authorization with 302 status (redirected to login). This is fine to serve pages rendered on the server (Thymeleaf, JSF or whatever).</p>\n<p>REST endpoints should be configured as <strong>OAuth2 resource server</strong>: requests authorized with access tokens, no sessions, and response to requests with missing or invalid authorization with 401 (unauthorized).</p>\n<p>If your application serves both server-side rendered pages and REST resources, then you should define two different security filter-chains: one with client configuration and the other one with resource server configuration.</p>\n<p>When you define more than one security filter-chain bean, those should be decorated with <code>@Order</code> to define in which order they are evaluated and all filter-chains but the last one in <code>@Order</code> should have a security matcher (something like <code>http.securityMatcher(&quot;/api/**&quot;)</code> for a resource server filter chain) to restrict it to the resources it should secure and give a chance to those with higher order to process the request (evaluated next if the security matcher didn't match).</p>\n<p>More details in <a href=\"https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials\" rel=\"nofollow noreferrer\">my tutorials</a> (one is dedicated to apps serving both a REST API and a Thymeleaf client).</p>\n"}],"owner":{"account_id":2316968,"reputation":2119,"user_id":2033800,"accept_rate":38,"display_name":"nicholasnet"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":77,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686884078,"creation_date":1686857915,"question_id":76485027,"body_markdown":"I have one application where I am using Spring Security and OAuth2 login. Everything is working. If the user is not logged in then it redirects user to login page as expected. However, this redirection is causing problem for `AJAX` request. Is there any way to send different response for `AJAX` request if user is not logged in. I tried something like this but it looks like `exceptionHandling` is not the right place to intercept such request.\r\n```\r\n@Bean\r\npublic SecurityWebFilterChain securityWebFilterChain(ServerHttpSecurity http) {\r\n    return http\r\n            .authorizeExchange(authorizeExchangeSpec -&gt; {\r\n                authorizeExchangeSpec.anyExchange().authenticated();\r\n            })\r\n            .csrf(csrfSpec -&gt; {\r\n                csrfSpec.csrfTokenRepository(CookieServerCsrfTokenRepository.withHttpOnlyFalse());\r\n            })\r\n            .logout(logoutSpec -&gt; {\r\n                logoutSpec.logoutSuccessHandler(oidcLogoutSuccessHandler(this.clientRegistrationRepository));\r\n            })\r\n            .oauth2Login(Customizer.withDefaults())\r\n            .exceptionHandling(exceptionHandlingSpec -&gt; {\r\n                exceptionHandlingSpec.authenticationEntryPoint((swe, e) -&gt; {\r\n                    // It seems its too late here to do such check none of the header have this? Eventhough `AJAX` request triggered this.\r\n                    if (swe.getRequest().getHeaders().containsKey(&quot;X-Requested-With&quot;)) {\r\n                        return Mono.fromRunnable(() -&gt; swe.getResponse().setStatusCode(HttpStatus.UNAUTHORIZED));\r\n                    }\r\n                });\r\n            })\r\n            .build();\r\n    }\r\n```","title":"How to send different response for AJAX request if Authentication is required in Spring Boot","body":"<p>I have one application where I am using Spring Security and OAuth2 login. Everything is working. If the user is not logged in then it redirects user to login page as expected. However, this redirection is causing problem for <code>AJAX</code> request. Is there any way to send different response for <code>AJAX</code> request if user is not logged in. I tried something like this but it looks like <code>exceptionHandling</code> is not the right place to intercept such request.</p>\n<pre><code>@Bean\npublic SecurityWebFilterChain securityWebFilterChain(ServerHttpSecurity http) {\n    return http\n            .authorizeExchange(authorizeExchangeSpec -&gt; {\n                authorizeExchangeSpec.anyExchange().authenticated();\n            })\n            .csrf(csrfSpec -&gt; {\n                csrfSpec.csrfTokenRepository(CookieServerCsrfTokenRepository.withHttpOnlyFalse());\n            })\n            .logout(logoutSpec -&gt; {\n                logoutSpec.logoutSuccessHandler(oidcLogoutSuccessHandler(this.clientRegistrationRepository));\n            })\n            .oauth2Login(Customizer.withDefaults())\n            .exceptionHandling(exceptionHandlingSpec -&gt; {\n                exceptionHandlingSpec.authenticationEntryPoint((swe, e) -&gt; {\n                    // It seems its too late here to do such check none of the header have this? Eventhough `AJAX` request triggered this.\n                    if (swe.getRequest().getHeaders().containsKey(&quot;X-Requested-With&quot;)) {\n                        return Mono.fromRunnable(() -&gt; swe.getResponse().setStatusCode(HttpStatus.UNAUTHORIZED));\n                    }\n                });\n            })\n            .build();\n    }\n</code></pre>\n"},{"tags":["java","ehcache","spring-cache"],"answers":[{"tags":[],"owner":{"account_id":9949,"reputation":13854,"user_id":18591,"display_name":"Louis Jacomet"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1412761010,"creation_date":1412761010,"answer_id":26253665,"question_id":26245019,"body_markdown":"When using on-heap tier in Ehcache, keys and values are by reference. So any modification to the object will be reflected in the cache.","title":"Modifying the object changes the Ehcache value","body":"<p>When using on-heap tier in Ehcache, keys and values are by reference. So any modification to the object will be reflected in the cache.</p>\n"},{"tags":[],"owner":{"account_id":3622222,"reputation":1087,"user_id":3020667,"accept_rate":75,"display_name":"Kandy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686882967,"creation_date":1686882967,"answer_id":76486630,"question_id":26245019,"body_markdown":"Yes this is how it works, its pass by reference as Louis commented above.\r\n\r\nThis behavior can be changed to make a new copy from cache by adding following configs to ehcache.xml file. refer[1]\r\n\r\n&gt; copyOnRead=&quot;true&quot;\r\n&gt; copyOnWrite=&quot;true&quot;\r\n\r\n eg:- \r\n\r\n    \t&lt;cache name=&quot;MyMethod&quot;\r\n\t\t   maxEntriesLocalHeap=&quot;2000&quot;\r\n\t\t   eternal=&quot;false&quot;\r\n\t\t   overflowToDisk=&quot;false&quot;\r\n\t\t   memoryStoreEvictionPolicy=&quot;LRU&quot;\r\n\t\t   copyOnRead=&quot;true&quot;\r\n\t\t   copyOnWrite=&quot;true&quot;\r\n\t\t   timeToLiveSeconds=&quot;86400&quot;/&gt;\r\n\r\nenjoy :)\r\n\r\nReference;\r\n  [1]: https://www.ehcache.org/generated/2.10.1/html/ehc-all/index.html#page/Ehcache_Documentation_Set%2Fco-cfgbasics_passing_copies.html%23","title":"Modifying the object changes the Ehcache value","body":"<p>Yes this is how it works, its pass by reference as Louis commented above.</p>\n<p>This behavior can be changed to make a new copy from cache by adding following configs to ehcache.xml file. refer[1]</p>\n<blockquote>\n<p>copyOnRead=&quot;true&quot;\ncopyOnWrite=&quot;true&quot;</p>\n</blockquote>\n<p>eg:-</p>\n<pre><code>    &lt;cache name=&quot;MyMethod&quot;\n       maxEntriesLocalHeap=&quot;2000&quot;\n       eternal=&quot;false&quot;\n       overflowToDisk=&quot;false&quot;\n       memoryStoreEvictionPolicy=&quot;LRU&quot;\n       copyOnRead=&quot;true&quot;\n       copyOnWrite=&quot;true&quot;\n       timeToLiveSeconds=&quot;86400&quot;/&gt;\n</code></pre>\n<p>enjoy :)</p>\n<p>Reference;\n[1]: <a href=\"https://www.ehcache.org/generated/2.10.1/html/ehc-all/index.html#page/Ehcache_Documentation_Set%2Fco-cfgbasics_passing_copies.html%23\" rel=\"nofollow noreferrer\">https://www.ehcache.org/generated/2.10.1/html/ehc-all/index.html#page/Ehcache_Documentation_Set%2Fco-cfgbasics_passing_copies.html%23</a></p>\n"}],"owner":{"account_id":335755,"reputation":16443,"user_id":663011,"accept_rate":83,"display_name":"Saurabh Kumar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":951,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":26253665,"answer_count":2,"score":1,"last_activity_date":1686882967,"creation_date":1412714889,"question_id":26245019,"body_markdown":"        @Override\r\n    \t@Cacheable(value = &quot;user-cache&quot;, key = &quot;#login&quot;, unless = &quot;#result == null&quot;)\r\n    \tpublic User findUserByLogin(final String login)\r\n    \t{\r\n    \t\treturn em.find(User.class, login);\r\n    \t}\r\n\r\nIf i set the password to null for example like below. What i saw the cache value is also modified accordingly because in the next call the cache is hit and the password there is set to NULL. Is this the right behavior? Do i have to create a new object after every retrieval if i want to modify that object.I am talking modifying in regard to not changing in the database but on service level.\r\n\r\n        public User getUserByLogin(final String login)\r\n\t{\r\n\t\tfinal User user = userRepository.findUserByLogin(login);\r\n\t\tuser.setPassword(null);\r\n\t\treturn user;\r\n\t}","title":"Modifying the object changes the Ehcache value","body":"<pre><code>    @Override\n    @Cacheable(value = \"user-cache\", key = \"#login\", unless = \"#result == null\")\n    public User findUserByLogin(final String login)\n    {\n        return em.find(User.class, login);\n    }\n</code></pre>\n\n<p>If i set the password to null for example like below. What i saw the cache value is also modified accordingly because in the next call the cache is hit and the password there is set to NULL. Is this the right behavior? Do i have to create a new object after every retrieval if i want to modify that object.I am talking modifying in regard to not changing in the database but on service level.</p>\n\n<pre><code>    public User getUserByLogin(final String login)\n{\n    final User user = userRepository.findUserByLogin(login);\n    user.setPassword(null);\n    return user;\n}\n</code></pre>\n"},{"tags":["java","gradle","swagger","openapi","springdoc"],"owner":{"account_id":25042032,"reputation":21,"user_id":21092608,"display_name":"Настя"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":159,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686882959,"creation_date":1686856037,"question_id":76484802,"body_markdown":"When I run the app, an openapi yaml file is generated in target: projectName/build\r\n\r\nBut I wanna  generate yaml file in my own package named &#39;doc&#39; \r\n\r\n I have next dependency in build.gradle:\r\n\r\n``\r\n implementation &quot;org.springdoc:springdoc-openapi-starter-webmvc-ui:$openapiVersion&quot;\r\n``\r\n\r\nalso my code application.yaml:\r\n\r\n swagger/openapi settings\r\n```\r\nSpringdoc:\r\n  show-actuator: false\r\n  swagger-ui:\r\n    url: &quot;/v3/api-docs&quot;\r\n    deep-linking: true\r\n    display-operation-id: false\r\n    disable-swagger-default-url: true\r\n    default-models-expand-depth: -1\r\n    default-model-expand-depth: 1\r\n    default-model-rendering: example\r\n    display-request-duration: false\r\n    doc-expansion: none\r\n    filter: false\r\n    operations-sorter: alpha\r\n    show-extensions: false\r\n    show-common-extensions: false\r\n    syntax-highlight:\r\n      activated: true\r\n      theme: monokai\r\n```\r\n\r\n","title":"Set path to output directory for generated openapi yaml file using swagger and gradle","body":"<p>When I run the app, an openapi yaml file is generated in target: projectName/build</p>\n<p>But I wanna  generate yaml file in my own package named 'doc'</p>\n<p>I have next dependency in build.gradle:</p>\n<p><code>implementation &quot;org.springdoc:springdoc-openapi-starter-webmvc-ui:$openapiVersion&quot;</code></p>\n<p>also my code application.yaml:</p>\n<p>swagger/openapi settings</p>\n<pre><code>Springdoc:\n  show-actuator: false\n  swagger-ui:\n    url: &quot;/v3/api-docs&quot;\n    deep-linking: true\n    display-operation-id: false\n    disable-swagger-default-url: true\n    default-models-expand-depth: -1\n    default-model-expand-depth: 1\n    default-model-rendering: example\n    display-request-duration: false\n    doc-expansion: none\n    filter: false\n    operations-sorter: alpha\n    show-extensions: false\n    show-common-extensions: false\n    syntax-highlight:\n      activated: true\n      theme: monokai\n</code></pre>\n"},{"tags":["java","spring-boot","optimization","microservices","resttemplate"],"comments":[{"owner":{"account_id":19934545,"reputation":554,"user_id":14607529,"display_name":"ODDminus1"},"score":1,"creation_date":1678343212,"post_id":75680995,"comment_id":133514592,"body_markdown":"I have never had the need to create multiple instances of RestTemplate as the upstream services usually have comparable response times and configurations. However, if you need separate configurations, creating additional rest templates for the odd services seems like a clean solution. I would evaluate this case-by-case but default to creating only one single RestTemplate.","body":"I have never had the need to create multiple instances of RestTemplate as the upstream services usually have comparable response times and configurations. However, if you need separate configurations, creating additional rest templates for the odd services seems like a clean solution. I would evaluate this case-by-case but default to creating only one single RestTemplate."},{"owner":{"account_id":13198960,"reputation":41,"user_id":9532751,"display_name":"Raj Talekar"},"score":0,"creation_date":1678344161,"post_id":75680995,"comment_id":133514760,"body_markdown":"@ODDminus1 Are you aware if there could be any downside of creating more rest template beans ?","body":"@ODDminus1 Are you aware if there could be any downside of creating more rest template beans ?"},{"owner":{"account_id":19934545,"reputation":554,"user_id":14607529,"display_name":"ODDminus1"},"score":0,"creation_date":1678345161,"post_id":75680995,"comment_id":133514972,"body_markdown":"Other than adding more objects to the memory of the app and diverging slightly from the singleton-pattern, there shouldn&#39;t really be any downsides. The memory-part is probably negligible. The main reason I&#39;d default to a single RestTemplate is only for code simplicity, avoiding issues related to mixing up beans of same class.","body":"Other than adding more objects to the memory of the app and diverging slightly from the singleton-pattern, there shouldn&#39;t really be any downsides. The memory-part is probably negligible. The main reason I&#39;d default to a single RestTemplate is only for code simplicity, avoiding issues related to mixing up beans of same class."}],"answers":[{"comments":[{"owner":{"account_id":13198960,"reputation":41,"user_id":9532751,"display_name":"Raj Talekar"},"score":0,"creation_date":1678347860,"post_id":75681025,"comment_id":133515570,"body_markdown":"Hey Nikolas, Thanks for your answer.\n\nI understand this would be a much cleaner approach, and even I am personally inclined towards doing this. But do you feel it will help me with any additional benefits if the configuration for most of the rest templates are same ? \n\nAlso do you think there could be any downside of this approach,  like multiple rest templates can cause in overall increase in number of connections maybe ?\n\nOur service runs on a very high scale, hence we need to be cautious for minor things as well.","body":"Hey Nikolas, Thanks for your answer.  I understand this would be a much cleaner approach, and even I am personally inclined towards doing this. But do you feel it will help me with any additional benefits if the configuration for most of the rest templates are same ?   Also do you think there could be any downside of this approach,  like multiple rest templates can cause in overall increase in number of connections maybe ?  Our service runs on a very high scale, hence we need to be cautious for minor things as well."},{"owner":{"account_id":4647011,"reputation":41835,"user_id":3764965,"accept_rate":94,"display_name":"Nikolas Charalambidis"},"score":0,"creation_date":1678463540,"post_id":75681025,"comment_id":133543110,"body_markdown":"I am not aware of any disadvantage aside from increased configuration complexity. The `RestTemplate` itself is not responsible for connections and does not use pooling by default. It is useful to configure various `RestTemplate` implementations for custom interceptors and error handlers specific to each service. What matters is the underlying `HttpClient` that defines connection pooling - take a look at `CloseableHttpClient` and `PoolingHttpClientConnectionManager`.","body":"I am not aware of any disadvantage aside from increased configuration complexity. The <code>RestTemplate</code> itself is not responsible for connections and does not use pooling by default. It is useful to configure various <code>RestTemplate</code> implementations for custom interceptors and error handlers specific to each service. What matters is the underlying <code>HttpClient</code> that defines connection pooling - take a look at <code>CloseableHttpClient</code> and <code>PoolingHttpClientConnectionManager</code>."}],"tags":[],"owner":{"account_id":4647011,"reputation":41835,"user_id":3764965,"accept_rate":94,"display_name":"Nikolas Charalambidis"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678342686,"creation_date":1678342686,"answer_id":75681025,"question_id":75680995,"body_markdown":"I would prefer to configure a separate `RestTemplate` for each service to configure timeouts, error handlers, and interceptors separately. Of course, you can inherit from a general parent and override what is needed. \r\n\r\nAlso, consider using [Spring Cloud Feign Client][1] which allows defining service-specific and default configurations in an easy way.\r\n\r\n\r\n  [1]: https://cloud.spring.io/spring-cloud-netflix/multi/multi_spring-cloud-feign.html","title":"What should be the best approach/practise when creating Rest Template beans for multiple upstream calls from a microservice","body":"<p>I would prefer to configure a separate <code>RestTemplate</code> for each service to configure timeouts, error handlers, and interceptors separately. Of course, you can inherit from a general parent and override what is needed.</p>\n<p>Also, consider using <a href=\"https://cloud.spring.io/spring-cloud-netflix/multi/multi_spring-cloud-feign.html\" rel=\"nofollow noreferrer\">Spring Cloud Feign Client</a> which allows defining service-specific and default configurations in an easy way.</p>\n"},{"tags":[],"owner":{"account_id":13198960,"reputation":41,"user_id":9532751,"display_name":"Raj Talekar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1686882446,"creation_date":1686882446,"answer_id":76486605,"question_id":75680995,"body_markdown":"I did a small experiment project by sharing the rest template between two different microservice calls and made one of them latent. It did not impact the performance of another microservice call.\r\n\r\nI ended up creating a separate connection pool for each upstream call to make sure there are always enough number of connections for everyone.","title":"What should be the best approach/practise when creating Rest Template beans for multiple upstream calls from a microservice","body":"<p>I did a small experiment project by sharing the rest template between two different microservice calls and made one of them latent. It did not impact the performance of another microservice call.</p>\n<p>I ended up creating a separate connection pool for each upstream call to make sure there are always enough number of connections for everyone.</p>\n"}],"owner":{"account_id":13198960,"reputation":41,"user_id":9532751,"display_name":"Raj Talekar"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":121,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76486605,"answer_count":2,"score":0,"last_activity_date":1686882446,"creation_date":1678342390,"question_id":75680995,"body_markdown":"Currently from our Spring based microservice, we make multiple calls to various other microservices. I wanted to understand what is the best practise of using the rest template bean, should we create a separate rest template bean for each upstream microservice ? Or should we just use a common rest template for all of them ? \r\n\r\nCould we gain advantages like isolation when using different rest template for each microservice ? meaning if 1 service is latent, it does not impact other services.\r\n\r\nCurrently we are using same rest template for all the services.\r\n","title":"What should be the best approach/practise when creating Rest Template beans for multiple upstream calls from a microservice","body":"<p>Currently from our Spring based microservice, we make multiple calls to various other microservices. I wanted to understand what is the best practise of using the rest template bean, should we create a separate rest template bean for each upstream microservice ? Or should we just use a common rest template for all of them ?</p>\n<p>Could we gain advantages like isolation when using different rest template for each microservice ? meaning if 1 service is latent, it does not impact other services.</p>\n<p>Currently we are using same rest template for all the services.</p>\n"},{"tags":["java","annotations","nullpointerexception","nullable","code-standards"],"comments":[{"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"score":1,"creation_date":1353455980,"post_id":13484202,"comment_id":18450419,"body_markdown":"I like the idea of `@Nullable` or `@Nonnull`, but if they are worth it is very &quot;likely to solicit debate&quot;","body":"I like the idea of <code>@Nullable</code> or <code>@Nonnull</code>, but if they are worth it is very &quot;likely to solicit debate&quot;"},{"owner":{"account_id":1051720,"reputation":1538,"user_id":1055489,"accept_rate":40,"display_name":"Theodore Murdock"},"score":0,"creation_date":1394490221,"post_id":13484202,"comment_id":33905098,"body_markdown":"I think the way to move to a world where this causes a compiler error or warning is to require a cast to `@Nonnull` when calling an `@Nonnull` method with a nullable variable. Of course, casting with an annotation is not possible in Java 7, but Java 8 will be adding the ability to apply annotations to the use of a variable, including casts. So this may become possible to implement in Java 8.","body":"I think the way to move to a world where this causes a compiler error or warning is to require a cast to <code>@Nonnull</code> when calling an <code>@Nonnull</code> method with a nullable variable. Of course, casting with an annotation is not possible in Java 7, but Java 8 will be adding the ability to apply annotations to the use of a variable, including casts. So this may become possible to implement in Java 8."},{"owner":{"account_id":5853491,"reputation":8043,"user_id":4611488,"display_name":"Stephan Herrmann"},"score":2,"creation_date":1442614383,"post_id":13484202,"comment_id":53169944,"body_markdown":"@TheodoreMurdock, yes, in Java 8 a cast `(@NonNull Integer) y` is syntactically possible, but a compiler is not allowed to emit any specific byte code based on the annotation. For runtime assertions tiny helper methods are sufficient as discussed in https://bugs.eclipse.org/442103 (e.g., `directPathToA(assertNonNull(y))`) - but mind you, this only helps to fail fast. The only safe way is by performing an actual null check (plus hopefully an alternative implementation in the else branch).","body":"@TheodoreMurdock, yes, in Java 8 a cast <code>(@NonNull Integer) y</code> is syntactically possible, but a compiler is not allowed to emit any specific byte code based on the annotation. For runtime assertions tiny helper methods are sufficient as discussed in <a href=\"https://bugs.eclipse.org/442103\" rel=\"nofollow noreferrer\">bugs.eclipse.org/442103</a> (e.g., <code>directPathToA(assertNonNull(y))</code>) - but mind you, this only helps to fail fast. The only safe way is by performing an actual null check (plus hopefully an alternative implementation in the else branch)."},{"owner":{"account_id":1051720,"reputation":1538,"user_id":1055489,"accept_rate":40,"display_name":"Theodore Murdock"},"score":0,"creation_date":1442859651,"post_id":13484202,"comment_id":53247190,"body_markdown":"@StephanHerrmann Hmm, disappointing that a null check can&#39;t be emitted for the assertion to automatically fail fast without the helper method. I am happy to see from your new answer that the other piece has benefitted from the ability to perform a cast: it is now somewhat lower cost to have our compilers emit an &#39;unchecked conversion&#39; warning when we fail to assert that a value is `@NonNull` when calling a method that takes an `@NonNull` parameter, because we now have an easier way to make that assertion when necessary.","body":"@StephanHerrmann Hmm, disappointing that a null check can&#39;t be emitted for the assertion to automatically fail fast without the helper method. I am happy to see from your new answer that the other piece has benefitted from the ability to perform a cast: it is now somewhat lower cost to have our compilers emit an &#39;unchecked conversion&#39; warning when we fail to assert that a value is <code>@NonNull</code> when calling a method that takes an <code>@NonNull</code> parameter, because we now have an easier way to make that assertion when necessary."},{"owner":{"account_id":1708399,"reputation":8104,"user_id":1566990,"accept_rate":67,"display_name":"James Dunn"},"score":3,"creation_date":1486050366,"post_id":13484202,"comment_id":71188874,"body_markdown":"It would be helpful in this question to say which ```@Nonnull``` and ```@Nullable``` you are talking about, as there are multiple similar annoations (See **[this question](http://stackoverflow.com/questions/35892063/which-nonnull-java-annotation-to-use)**).  Are you talking about the annotations in package ```javax.annotation```?","body":"It would be helpful in this question to say which <code>@Nonnull</code> and <code>@Nullable</code> you are talking about, as there are multiple similar annoations (See <b><a href=\"http://stackoverflow.com/questions/35892063/which-nonnull-java-annotation-to-use\">this question</a></b>).  Are you talking about the annotations in package <code>javax.annotation</code>?"},{"owner":{"account_id":199370,"reputation":19629,"user_id":444639,"accept_rate":84,"display_name":"Rylander"},"score":1,"creation_date":1486402955,"post_id":13484202,"comment_id":71319252,"body_markdown":"@TJamesBoone For the context of this question it does not matter, this was about how to use any of them effectively.","body":"@TJamesBoone For the context of this question it does not matter, this was about how to use any of them effectively."},{"owner":{"account_id":91981,"reputation":3055,"user_id":252308,"accept_rate":36,"display_name":"swooby"},"score":0,"creation_date":1489600471,"post_id":13484202,"comment_id":72746395,"body_markdown":"I don&#39;t mind writing the seemingly redundant and unnecessary &quot;void foo(@NonNull Object param1) { if (param1 == null) throw IllegalArgumentException(&#39;param1 must not be null&#39;) ... }&quot; to my code where appropriate, but my problem with this that the default lint rules flag the &quot;if&quot; check as unnecessary, where at runtime it really is necessary, and I don&#39;t trust that disabling the rule wouldn&#39;t have undesired side effects somewhere else in my code. Anyone have clean suggestions? I&#39;d love to implement the @NonNull annotation to throw a runtime exception if passed a null value during runtime.","body":"I don&#39;t mind writing the seemingly redundant and unnecessary &quot;void foo(@NonNull Object param1) { if (param1 == null) throw IllegalArgumentException(&#39;param1 must not be null&#39;) ... }&quot; to my code where appropriate, but my problem with this that the default lint rules flag the &quot;if&quot; check as unnecessary, where at runtime it really is necessary, and I don&#39;t trust that disabling the rule wouldn&#39;t have undesired side effects somewhere else in my code. Anyone have clean suggestions? I&#39;d love to implement the @NonNull annotation to throw a runtime exception if passed a null value during runtime."},{"owner":{"account_id":1233610,"reputation":2139,"user_id":1197682,"accept_rate":73,"display_name":"earizon"},"score":0,"creation_date":1497426770,"post_id":13484202,"comment_id":76068078,"body_markdown":"nulls are just plain wrong. The only reason to use nulls in a program according to &quot;todays&quot; standards is because we are receiving a pontentially nullable variable from a old (deprecated) library. The null must never &quot;scape&quot; a few lines of code, just to check if it&#39;s null and asign a proper value or throw an exception, and of course it must never be propagated outside of a local block of code or level of indirection.","body":"nulls are just plain wrong. The only reason to use nulls in a program according to &quot;todays&quot; standards is because we are receiving a pontentially nullable variable from a old (deprecated) library. The null must never &quot;scape&quot; a few lines of code, just to check if it&#39;s null and asign a proper value or throw an exception, and of course it must never be propagated outside of a local block of code or level of indirection."},{"owner":{"account_id":2078462,"reputation":10342,"user_id":2986984,"accept_rate":80,"display_name":"tkruse"},"score":0,"creation_date":1532740588,"post_id":13484202,"comment_id":90101004,"body_markdown":"related https://stackoverflow.com/questions/4963300","body":"related <a href=\"https://stackoverflow.com/questions/4963300\">stackoverflow.com/questions/4963300</a>"},{"owner":{"account_id":114118,"reputation":4732,"user_id":300236,"accept_rate":67,"display_name":"Brill Pappin"},"score":0,"creation_date":1559679746,"post_id":13484202,"comment_id":99494931,"body_markdown":"There is the concept of fail-fast, in that if @NonNull is ignored, you *want* an exception to be thrown, since you are declaring that null parameter is invalid at any time.","body":"There is the concept of fail-fast, in that if @NonNull is ignored, you <i>want</i> an exception to be thrown, since you are declaring that null parameter is invalid at any time."},{"owner":{"account_id":114116,"reputation":37510,"user_id":300224,"accept_rate":68,"display_name":"William Entriken"},"score":0,"creation_date":1565878206,"post_id":13484202,"comment_id":101490056,"body_markdown":"Coming from Swift and learning Java. It&#39;s like going VERY far back in time.","body":"Coming from Swift and learning Java. It&#39;s like going VERY far back in time."},{"owner":{"account_id":199370,"reputation":19629,"user_id":444639,"accept_rate":84,"display_name":"Rylander"},"score":0,"creation_date":1565895745,"post_id":13484202,"comment_id":101497750,"body_markdown":"@WilliamEntriken If you have the option, you can mix Kotlin in with Java. Kotlin is very interoperable with Java and has a lot of the niceties you expect in Swift... also solves this problem https://stackoverflow.com/a/46290602/444639","body":"@WilliamEntriken If you have the option, you can mix Kotlin in with Java. Kotlin is very interoperable with Java and has a lot of the niceties you expect in Swift... also solves this problem <a href=\"https://stackoverflow.com/a/46290602/444639\">stackoverflow.com/a/46290602/444639</a>"}],"answers":[{"comments":[{"owner":{"account_id":305679,"reputation":1039,"user_id":615987,"display_name":"Patrick"},"score":19,"creation_date":1517666273,"post_id":13485074,"comment_id":84192752,"body_markdown":"For return values possibly being empty, I strongly suggest using the `Optional` type instead of plain `null`","body":"For return values possibly being empty, I strongly suggest using the <code>Optional</code> type instead of plain <code>null</code>"},{"owner":{"account_id":300800,"reputation":10941,"user_id":608164,"accept_rate":62,"display_name":"30thh"},"score":12,"creation_date":1536320291,"post_id":13485074,"comment_id":91392024,"body_markdown":"Optional ist not better, than &quot;null&quot;. Optional#get() throws NoSuchElementException while a usage of the null throws NullPointerException. Both are RuntimeException&#39;s without meaningful description. I prefer nullable variables.","body":"Optional ist not better, than &quot;null&quot;. Optional#get() throws NoSuchElementException while a usage of the null throws NullPointerException. Both are RuntimeException&#39;s without meaningful description. I prefer nullable variables."},{"owner":{"account_id":221262,"reputation":2192,"user_id":479136,"accept_rate":60,"display_name":"GauravJ"},"score":8,"creation_date":1537490751,"post_id":13485074,"comment_id":91813704,"body_markdown":"@30thh why would you use Optional.get() directly and not Optional.isPresent() or Optional.map first?","body":"@30thh why would you use Optional.get() directly and not Optional.isPresent() or Optional.map first?"},{"owner":{"account_id":300800,"reputation":10941,"user_id":608164,"accept_rate":62,"display_name":"30thh"},"score":17,"creation_date":1537868607,"post_id":13485074,"comment_id":91930704,"body_markdown":"@GauravJ Why would you use a nullable variable directly and not check, if it null first? ;-)","body":"@GauravJ Why would you use a nullable variable directly and not check, if it null first? ;-)"},{"owner":{"account_id":1049200,"reputation":1560,"user_id":1053510,"display_name":"user1053510"},"score":17,"creation_date":1548400491,"post_id":13485074,"comment_id":95535383,"body_markdown":"The difference between `Optional` and nullable in this case is that `Optional` better communicates that this value can intentionally be empty. Certainly, it&#39;s not a magic wand and in the runtime it may fail exactly the same way as nullable variable. However, API reception by programmer is better with `Optional` in my opinion.","body":"The difference between <code>Optional</code> and nullable in this case is that <code>Optional</code> better communicates that this value can intentionally be empty. Certainly, it&#39;s not a magic wand and in the runtime it may fail exactly the same way as nullable variable. However, API reception by programmer is better with <code>Optional</code> in my opinion."},{"owner":{"account_id":9151100,"reputation":733,"user_id":6805653,"accept_rate":57,"display_name":"Shukant Pal"},"score":0,"creation_date":1549317732,"post_id":13485074,"comment_id":95852376,"body_markdown":"Why not create a static class instead of an extra `Optional` object?","body":"Why not create a static class instead of an extra <code>Optional</code> object?"},{"owner":{"account_id":1582434,"reputation":479,"user_id":1467494,"accept_rate":83,"display_name":"Laurent D."},"score":0,"creation_date":1605973808,"post_id":13485074,"comment_id":114820091,"body_markdown":"Thanks for remainding me the Null Object pattern","body":"Thanks for remainding me the Null Object pattern"},{"owner":{"account_id":132327,"reputation":485,"user_id":332940,"accept_rate":64,"display_name":"starflyer"},"score":0,"creation_date":1638478225,"post_id":13485074,"comment_id":124106137,"body_markdown":"Because &#39;null&#39; is an everything type. And you can only use Optional as an optional. Optionals don&#39;t give you NPEs.","body":"Because &#39;null&#39; is an everything type. And you can only use Optional as an optional. Optionals don&#39;t give you NPEs."},{"owner":{"account_id":1465496,"reputation":184,"user_id":6293817,"accept_rate":67,"display_name":"Ghos3t"},"score":1,"creation_date":1677100831,"post_id":13485074,"comment_id":133273580,"body_markdown":"@30thh the advantage of Optionals compared to null references is that the Optional class forces you to think about the case when the value is not present. As a consequence, you can prevent unintended null pointer exceptions. Where as null values can sneak up on you in production. https://www.oracle.com/technical-resources/articles/java/java8-optional.html","body":"@30thh the advantage of Optionals compared to null references is that the Optional class forces you to think about the case when the value is not present. As a consequence, you can prevent unintended null pointer exceptions. Where as null values can sneak up on you in production. <a href=\"https://www.oracle.com/technical-resources/articles/java/java8-optional.html\" rel=\"nofollow noreferrer\">oracle.com/technical-resources/articles/java/&hellip;</a>"},{"owner":{"account_id":16453092,"reputation":852,"user_id":11886026,"display_name":"Trayan Momkov"},"score":0,"creation_date":1677767964,"post_id":13485074,"comment_id":133405927,"body_markdown":"My answer to this: &quot;@GauravJ Why would you use a nullable variable directly and not check, if it null first? ;-)&quot; - You can easily forget to do the null check, while Optional reminds/forces you to do it. Good read here: https://www.oracle.com/technical-resources/articles/java/java8-optional.html","body":"My answer to this: &quot;@GauravJ Why would you use a nullable variable directly and not check, if it null first? ;-)&quot; - You can easily forget to do the null check, while Optional reminds/forces you to do it. Good read here: <a href=\"https://www.oracle.com/technical-resources/articles/java/java8-optional.html\" rel=\"nofollow noreferrer\">oracle.com/technical-resources/articles/java/&hellip;</a>"}],"tags":[],"owner":{"account_id":2056281,"reputation":2456,"user_id":1833963,"display_name":"Pedro Boechat"},"comment_count":10,"down_vote_count":1,"up_vote_count":89,"is_accepted":false,"score":88,"last_activity_date":1677789153,"creation_date":1353461682,"answer_id":13485074,"question_id":13484202,"body_markdown":"Short answer: I guess these annotations are only useful for your IDE to warn you of potentially null pointer errors.\r\n\r\nAs said in the &quot;Clean Code&quot; book, you should check your public method&#39;s parameters and also avoid checking invariants.\r\n\r\nAnother good tip is never returning null value and use [Null Object Pattern][1] instead.\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Null_Object_pattern","title":"How to use @Nullable and @Nonnull annotations more effectively?","body":"<p>Short answer: I guess these annotations are only useful for your IDE to warn you of potentially null pointer errors.</p>\n<p>As said in the &quot;Clean Code&quot; book, you should check your public method's parameters and also avoid checking invariants.</p>\n<p>Another good tip is never returning null value and use <a href=\"http://en.wikipedia.org/wiki/Null_Object_pattern\" rel=\"noreferrer\">Null Object Pattern</a> instead.</p>\n"},{"comments":[{"owner":{"account_id":180227,"reputation":38991,"user_id":413414,"accept_rate":72,"display_name":"Christopher Perry"},"score":17,"creation_date":1389414043,"post_id":13485101,"comment_id":31665334,"body_markdown":"You have to be careful with this. Optional should only be used where a value is truly optional, and the absence of which is used as a decision gate for further logic. I&#39;ve seen this abused with blanket replacement of Objects with Optionals and null checks replaced with checks for presence which misses the point.","body":"You have to be careful with this. Optional should only be used where a value is truly optional, and the absence of which is used as a decision gate for further logic. I&#39;ve seen this abused with blanket replacement of Objects with Optionals and null checks replaced with checks for presence which misses the point."},{"owner":{"account_id":723954,"reputation":1847,"user_id":666583,"display_name":"AndrewF"},"score":1,"creation_date":1571859560,"post_id":13485101,"comment_id":103383718,"body_markdown":"if you are targeting JDK 8 or newer, prefer to use `java.util.Optional` instead of Guava&#39;s class. [See Guava&#39;s notes/comparison](https://guava.dev/releases/28.1-jre/api/docs/com/google/common/base/Optional.html) for details on the differences.","body":"if you are targeting JDK 8 or newer, prefer to use <code>java.util.Optional</code> instead of Guava&#39;s class. <a href=\"https://guava.dev/releases/28.1-jre/api/docs/com/google/common/base/Optional.html\" rel=\"nofollow noreferrer\">See Guava&#39;s notes/comparison</a> for details on the differences."},{"owner":{"account_id":1032976,"reputation":5121,"user_id":1040915,"accept_rate":69,"display_name":"scubbo"},"score":1,"creation_date":1578420828,"post_id":13485101,"comment_id":105429961,"body_markdown":"&quot;null checks replaced with checks for presence which misses the point&quot; can you elaborate, then, on what the point *is*? This isn&#39;t the *only* reason for Optionals, in my opinion, but it&#39;s certainly by far the largest and best one.","body":"&quot;null checks replaced with checks for presence which misses the point&quot; can you elaborate, then, on what the point <i>is</i>? This isn&#39;t the <i>only</i> reason for Optionals, in my opinion, but it&#39;s certainly by far the largest and best one."}],"tags":[],"owner":{"account_id":23460,"reputation":176846,"user_id":58808,"accept_rate":78,"display_name":"Ionuț G. Stan"},"comment_count":3,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1353461888,"creation_date":1353461888,"answer_id":13485101,"question_id":13484202,"body_markdown":"In Java I&#39;d use [Guava&#39;s Optional type][1]. Being an actual type you get compiler guarantees about its use. It&#39;s easy to bypass it and obtain a `NullPointerException`, but at least the signature of the method clearly communicates what it expects as an argument or what it might return.\r\n\r\n\r\n  [1]: http://code.google.com/p/guava-libraries/wiki/UsingAndAvoidingNullExplained","title":"How to use @Nullable and @Nonnull annotations more effectively?","body":"<p>In Java I'd use <a href=\"http://code.google.com/p/guava-libraries/wiki/UsingAndAvoidingNullExplained\" rel=\"nofollow\">Guava's Optional type</a>. Being an actual type you get compiler guarantees about its use. It's easy to bypass it and obtain a <code>NullPointerException</code>, but at least the signature of the method clearly communicates what it expects as an argument or what it might return.</p>\n"},{"comments":[{"owner":{"account_id":15188,"reputation":15038,"user_id":31818,"display_name":"seh"},"score":11,"creation_date":1353504871,"post_id":13489578,"comment_id":18466292,"body_markdown":"I sympathize with the OP here, because even though you cite these two advantages, in both cases you used the word &quot;can.&quot; That means that there is no guarantee that these checks will actually occur. Now, that behavioral difference could be useful for performance-sensitive tests that you&#39;d like to avoid running in production mode, for which we have `assert`. I find `@Nullable` and `@Nonnull` to be useful ideas, but I&#39;d like more force behind them, rather than us hypothesizing about what one *could* do with them, which still leaves open the possibility of doing nothing with them.","body":"I sympathize with the OP here, because even though you cite these two advantages, in both cases you used the word &quot;can.&quot; That means that there is no guarantee that these checks will actually occur. Now, that behavioral difference could be useful for performance-sensitive tests that you&#39;d like to avoid running in production mode, for which we have <code>assert</code>. I find <code>@Nullable</code> and <code>@Nonnull</code> to be useful ideas, but I&#39;d like more force behind them, rather than us hypothesizing about what one <i>could</i> do with them, which still leaves open the possibility of doing nothing with them."},{"owner":{"account_id":2029491,"reputation":9823,"user_id":1813616,"display_name":"Uwe Plonus"},"score":2,"creation_date":1353505978,"post_id":13489578,"comment_id":18466795,"body_markdown":"The question is where to begin. At the moment his anntations are optional. Somtimes I would like it if they were not because in some circumstances it would be helpful to enforce them...","body":"The question is where to begin. At the moment his anntations are optional. Somtimes I would like it if they were not because in some circumstances it would be helpful to enforce them..."},{"owner":{"account_id":400827,"reputation":4516,"user_id":767033,"accept_rate":50,"display_name":"Chris.Zou"},"score":0,"creation_date":1426305239,"post_id":13489578,"comment_id":46329857,"body_markdown":"May I ask what is AOP you&#39;re referring here?","body":"May I ask what is AOP you&#39;re referring here?"},{"owner":{"account_id":2029491,"reputation":9823,"user_id":1813616,"display_name":"Uwe Plonus"},"score":0,"creation_date":1426333556,"post_id":13489578,"comment_id":46335272,"body_markdown":"@Chris.Zou AOP means aspect oriented programming, e.g. AspectJ","body":"@Chris.Zou AOP means aspect oriented programming, e.g. AspectJ"}],"tags":[],"owner":{"account_id":2029491,"reputation":9823,"user_id":1813616,"display_name":"Uwe Plonus"},"comment_count":4,"down_vote_count":1,"up_vote_count":40,"is_accepted":false,"score":39,"last_activity_date":1611618621,"creation_date":1353488248,"answer_id":13489578,"question_id":13484202,"body_markdown":"Other than your IDE giving you hints when you pass `null` to methods that expect the argument to not be null, there are further advantages:\r\n\r\n - Static code analysis tools can test the same as your IDE (e.g. FindBugs)\r\n - You can use [Aspect-oriented programming (AOP)][1] to check these assertions\r\n\r\nThis can help your code be more maintainable (since you do not need `null` checks) and less error-prone.\r\n \r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Aspect-oriented_programming","title":"How to use @Nullable and @Nonnull annotations more effectively?","body":"<p>Other than your IDE giving you hints when you pass <code>null</code> to methods that expect the argument to not be null, there are further advantages:</p>\n<ul>\n<li>Static code analysis tools can test the same as your IDE (e.g. FindBugs)</li>\n<li>You can use <a href=\"https://en.wikipedia.org/wiki/Aspect-oriented_programming\" rel=\"noreferrer\">Aspect-oriented programming (AOP)</a> to check these assertions</li>\n</ul>\n<p>This can help your code be more maintainable (since you do not need <code>null</code> checks) and less error-prone.</p>\n"},{"comments":[{"owner":{"account_id":357783,"reputation":5020,"user_id":698168,"display_name":"Julien Kronegg"},"score":1,"creation_date":1469194780,"post_id":32324996,"comment_id":64449902,"body_markdown":"Propagating the `@Nonnull`  to have `indirectPathToA(@Nonnull Integer y)` is IMHO a bad practice: you will need to mainain the propagation on the full call stack (so if you add a `null` check in `directPathToA()`, you will need to replace `@Nonnull`by `@Nullable` in the full call stack). This would be a huge maintenance effort for large applications.","body":"Propagating the <code>@Nonnull</code>  to have <code>indirectPathToA(@Nonnull Integer y)</code> is IMHO a bad practice: you will need to mainain the propagation on the full call stack (so if you add a <code>null</code> check in <code>directPathToA()</code>, you will need to replace <code>@Nonnull</code>by <code>@Nullable</code> in the full call stack). This would be a huge maintenance effort for large applications."},{"owner":{"account_id":1871673,"reputation":3967,"user_id":1693748,"accept_rate":29,"display_name":"Alexander Drobyshevsky"},"score":3,"creation_date":1496069118,"post_id":32324996,"comment_id":75499138,"body_markdown":"@Nonnull annotation just emphasises that null-verification of the argument is on your side (you have to guarantee that you pass non-null value). It is not the responsibility of the method.","body":"@Nonnull annotation just emphasises that null-verification of the argument is on your side (you have to guarantee that you pass non-null value). It is not the responsibility of the method."},{"owner":{"account_id":1871673,"reputation":3967,"user_id":1693748,"accept_rate":29,"display_name":"Alexander Drobyshevsky"},"score":1,"creation_date":1496069256,"post_id":32324996,"comment_id":75499215,"body_markdown":"@Nonnull is also sensible thing when null-value do not make any sense for this method","body":"@Nonnull is also sensible thing when null-value do not make any sense for this method"}],"tags":[],"owner":{"account_id":5237934,"reputation":89,"user_id":4185938,"display_name":"Andres"},"comment_count":3,"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1441134771,"creation_date":1441089204,"answer_id":32324996,"question_id":13484202,"body_markdown":"I agree that the annotations &quot;don&#39;t propagate very far&quot;. However, I see the mistake on the programmer&#39;s side.\r\n\r\nI understand the `Nonnull` annotation as documentation. The following method expresses that is requires (as a precondition) a non-null argument `x`.\r\n\r\n        public void directPathToA(@Nonnull Integer x){\r\n            x.toString(); // do stuff to x        \r\n        }\r\n\r\n\r\nThe following code snippet then contains a bug. The method calls `directPathToA()` without enforcing that `y` is non-null (that is, it does not guarantee the precondition of the called method). One possibility is to add a `Nonnull` annotation as well to `indirectPathToA()` (propagating the precondition). Possibility two is to check for the nullity of `y` in `indirectPathToA()` and avoid the call to `directPathToA()` when `y` is null.\r\n\r\n        public void indirectPathToA(Integer y){\r\n            directPathToA(y);\r\n        }","title":"How to use @Nullable and @Nonnull annotations more effectively?","body":"<p>I agree that the annotations \"don't propagate very far\". However, I see the mistake on the programmer's side.</p>\n\n<p>I understand the <code>Nonnull</code> annotation as documentation. The following method expresses that is requires (as a precondition) a non-null argument <code>x</code>.</p>\n\n<pre><code>    public void directPathToA(@Nonnull Integer x){\n        x.toString(); // do stuff to x        \n    }\n</code></pre>\n\n<p>The following code snippet then contains a bug. The method calls <code>directPathToA()</code> without enforcing that <code>y</code> is non-null (that is, it does not guarantee the precondition of the called method). One possibility is to add a <code>Nonnull</code> annotation as well to <code>indirectPathToA()</code> (propagating the precondition). Possibility two is to check for the nullity of <code>y</code> in <code>indirectPathToA()</code> and avoid the call to <code>directPathToA()</code> when <code>y</code> is null.</p>\n\n<pre><code>    public void indirectPathToA(Integer y){\n        directPathToA(y);\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5853491,"reputation":8043,"user_id":4611488,"display_name":"Stephan Herrmann"},"comment_count":0,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1442613971,"creation_date":1442613971,"answer_id":32661731,"question_id":13484202,"body_markdown":"Compiling the original example in Eclipse at compliance 1.8 and with annotation based null analysis enabled, we get this warning:\r\n\r\n        directPathToA(y);\r\n                      ^\r\n    Null type safety (type annotations): The expression of type &#39;Integer&#39; needs unchecked conversion to conform to &#39;@NonNull Integer&#39;\r\n\r\nThis warning is worded in analogy to those warnings you get when mixing generified code with legacy code using raw types (&quot;unchecked conversion&quot;). We have the exact same situation here: method `indirectPathToA()` has a &quot;legacy&quot; signature in that it doesn&#39;t specify any null contract. Tools can easily report this, so they will chase you down all alleys where null annotations need to be propagated but aren&#39;t yet.\r\n\r\nAnd when using a clever `@NonNullByDefault` we don&#39;t even have to say this every time.\r\n\r\nIn other words: whether or not null annotations &quot;propagate very far&quot; may depend on the tool you use, and on how rigorously you attend to all the warnings issued by the tool. With [TYPE_USE null annotations][1] you finally have the option to let the tool warn you about **every** possible NPE in your program, because nullness has become an intrisic property of the type system.\r\n\r\n\r\n  [1]: http://help.eclipse.org/mars/topic/org.eclipse.jdt.doc.user/tasks/task-using_null_type_annotations.htm?cp=1_3_9_1","title":"How to use @Nullable and @Nonnull annotations more effectively?","body":"<p>Compiling the original example in Eclipse at compliance 1.8 and with annotation based null analysis enabled, we get this warning:</p>\n\n<pre><code>    directPathToA(y);\n                  ^\nNull type safety (type annotations): The expression of type 'Integer' needs unchecked conversion to conform to '@NonNull Integer'\n</code></pre>\n\n<p>This warning is worded in analogy to those warnings you get when mixing generified code with legacy code using raw types (\"unchecked conversion\"). We have the exact same situation here: method <code>indirectPathToA()</code> has a \"legacy\" signature in that it doesn't specify any null contract. Tools can easily report this, so they will chase you down all alleys where null annotations need to be propagated but aren't yet.</p>\n\n<p>And when using a clever <code>@NonNullByDefault</code> we don't even have to say this every time.</p>\n\n<p>In other words: whether or not null annotations \"propagate very far\" may depend on the tool you use, and on how rigorously you attend to all the warnings issued by the tool. With <a href=\"http://help.eclipse.org/mars/topic/org.eclipse.jdt.doc.user/tasks/task-using_null_type_annotations.htm?cp=1_3_9_1\" rel=\"noreferrer\">TYPE_USE null annotations</a> you finally have the option to let the tool warn you about <strong>every</strong> possible NPE in your program, because nullness has become an intrisic property of the type system.</p>\n"},{"comments":[{"owner":{"account_id":91981,"reputation":3055,"user_id":252308,"accept_rate":36,"display_name":"swooby"},"score":1,"creation_date":1489601414,"post_id":37973823,"comment_id":72746901,"body_markdown":"Understood, but the default lint checks warn that runtime null checks are unnecessary, which at first impression seems to discourage this recommendation.","body":"Understood, but the default lint checks warn that runtime null checks are unnecessary, which at first impression seems to discourage this recommendation."},{"owner":{"account_id":3002132,"reputation":1376,"user_id":2547427,"accept_rate":50,"display_name":"jonathanzh"},"score":2,"creation_date":1489700044,"post_id":37973823,"comment_id":72798983,"body_markdown":"@swooby Usually I ignore lint warnings if I’m sure my code is correct. Those warnings are not errors.","body":"@swooby Usually I ignore lint warnings if I’m sure my code is correct. Those warnings are not errors."}],"tags":[],"owner":{"account_id":3002132,"reputation":1376,"user_id":2547427,"accept_rate":50,"display_name":"jonathanzh"},"comment_count":2,"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1634666577,"creation_date":1466613478,"answer_id":37973823,"question_id":13484202,"body_markdown":"I think this original question indirectly points to a general recommendation that run-time null-pointer check is still needed, even though @NonNull is used. Refer to the following link: \r\n\r\n[Java 8&#39;s new Type Annotations][1]\r\n\r\nIn the above blog, it is recommended that:\r\n\r\n&gt; **Optional Type Annotations are not a substitute for runtime validation**\r\n&gt; Before Type Annotations, the primary location for describing things\r\n&gt; like nullability or ranges was in the javadoc. With Type annotations,\r\n&gt; this communication comes into the bytecode in a way for compile-time\r\n&gt; verification. Your code should still perform runtime validation.\r\n\r\n\r\n  [1]: https://blogs.oracle.com/java/post/java-8s-new-type-annotations &quot;Java 8&#39;s new Type Annotations&quot;","title":"How to use @Nullable and @Nonnull annotations more effectively?","body":"<p>I think this original question indirectly points to a general recommendation that run-time null-pointer check is still needed, even though @NonNull is used. Refer to the following link:</p>\n<p><a href=\"https://blogs.oracle.com/java/post/java-8s-new-type-annotations\" rel=\"nofollow noreferrer\" title=\"Java 8's new Type Annotations\">Java 8's new Type Annotations</a></p>\n<p>In the above blog, it is recommended that:</p>\n<blockquote>\n<p><strong>Optional Type Annotations are not a substitute for runtime validation</strong>\nBefore Type Annotations, the primary location for describing things\nlike nullability or ranges was in the javadoc. With Type annotations,\nthis communication comes into the bytecode in a way for compile-time\nverification. Your code should still perform runtime validation.</p>\n</blockquote>\n"},{"comments":[{"owner":{"account_id":2785336,"reputation":1001,"user_id":2396907,"display_name":"vintprox"},"score":0,"creation_date":1645619154,"post_id":41679666,"comment_id":125919163,"body_markdown":"This is so much cleaner!","body":"This is so much cleaner!"}],"tags":[],"owner":{"account_id":1033857,"reputation":17546,"user_id":1041641,"accept_rate":67,"display_name":"TmTron"},"comment_count":1,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1484580345,"creation_date":1484580345,"answer_id":41679666,"question_id":13484202,"body_markdown":"What I do in my projects is to activate the following option in the &quot;Constant conditions &amp; exceptions&quot; code inspection:  \r\n*Suggest @Nullable annotation for methods that may possibly return null and report nullable values passed to non-annotated parameters*\r\n[![Inspections][1]][1]\r\n\r\nWhen activated, all non-annotated parameters will be treated as non-null and thus you will also see a warning on your indirect call:\r\n\r\n    clazz.indirectPathToA(null); \r\n\r\nFor even stronger checks the Checker Framework may be a good choice (see this nice [tutorial][2].  \r\n**Note**: I have not used that yet and there may be problems with the Jack compiler: see [this bugreport][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/bfG9h.png\r\n  [2]: https://github.com/glts/safer-spring-petclinic/wiki\r\n  [3]: https://github.com/karlicoss/checker-fenum-android-demo/issues/8","title":"How to use @Nullable and @Nonnull annotations more effectively?","body":"<p>What I do in my projects is to activate the following option in the \"Constant conditions &amp; exceptions\" code inspection:<br>\n<em>Suggest @Nullable annotation for methods that may possibly return null and report nullable values passed to non-annotated parameters</em>\n<a href=\"https://i.stack.imgur.com/bfG9h.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/bfG9h.png\" alt=\"Inspections\"></a></p>\n\n<p>When activated, all non-annotated parameters will be treated as non-null and thus you will also see a warning on your indirect call:</p>\n\n<pre><code>clazz.indirectPathToA(null); \n</code></pre>\n\n<p>For even stronger checks the Checker Framework may be a good choice (see this nice <a href=\"https://github.com/glts/safer-spring-petclinic/wiki\" rel=\"noreferrer\">tutorial</a>.<br>\n<strong>Note</strong>: I have not used that yet and there may be problems with the Jack compiler: see <a href=\"https://github.com/karlicoss/checker-fenum-android-demo/issues/8\" rel=\"noreferrer\">this bugreport</a></p>\n"},{"comments":[{"owner":{"account_id":15188,"reputation":15038,"user_id":31818,"display_name":"seh"},"score":3,"creation_date":1505825490,"post_id":46290602,"comment_id":79564161,"body_markdown":"The question addresses Java, per its first tag, and not Kotlin.","body":"The question addresses Java, per its first tag, and not Kotlin."},{"owner":{"account_id":199370,"reputation":19629,"user_id":444639,"accept_rate":84,"display_name":"Rylander"},"score":2,"creation_date":1505924454,"post_id":46290602,"comment_id":79615110,"body_markdown":"@seh see update for why this answer is relevant to this question.","body":"@seh see update for why this answer is relevant to this question."},{"owner":{"account_id":15188,"reputation":15038,"user_id":31818,"display_name":"seh"},"score":2,"creation_date":1505924950,"post_id":46290602,"comment_id":79615438,"body_markdown":"Fair enough. That&#39;s a nice feature of Kotlin. I just don&#39;t think it&#39;s going to satisfy those coming here to learn about Java.","body":"Fair enough. That&#39;s a nice feature of Kotlin. I just don&#39;t think it&#39;s going to satisfy those coming here to learn about Java."},{"owner":{"account_id":2640300,"reputation":1317,"user_id":2284107,"accept_rate":60,"display_name":"kAmol"},"score":0,"creation_date":1539751062,"post_id":46290602,"comment_id":92610559,"body_markdown":"but accessing `myString.hashCode()` will still be throwing NPE even if `@NotNull` is not added in parameter. So whats more specific about adding it?","body":"but accessing <code>myString.hashCode()</code> will still be throwing NPE even if <code>@NotNull</code> is not added in parameter. So whats more specific about adding it?"},{"owner":{"account_id":199370,"reputation":19629,"user_id":444639,"accept_rate":84,"display_name":"Rylander"},"score":0,"creation_date":1539889864,"post_id":46290602,"comment_id":92675482,"body_markdown":"@kAmol The difference here is that when using Kotlin, you will get a *compile* time error instead of a *runtime* error. The annotation is to notify that you the developer need to ensure that a null is not passed in. This will not prevent a null from being passed in at runtime, but it will prevent you from writing code that calls this method with a null (or with a function that can return null).","body":"@kAmol The difference here is that when using Kotlin, you will get a <i>compile</i> time error instead of a <i>runtime</i> error. The annotation is to notify that you the developer need to ensure that a null is not passed in. This will not prevent a null from being passed in at runtime, but it will prevent you from writing code that calls this method with a null (or with a function that can return null)."}],"tags":[],"owner":{"account_id":199370,"reputation":19629,"user_id":444639,"accept_rate":84,"display_name":"Rylander"},"comment_count":5,"down_vote_count":4,"up_vote_count":11,"is_accepted":false,"score":7,"last_activity_date":1686882371,"creation_date":1505785921,"answer_id":46290602,"question_id":13484202,"body_markdown":"If you use Kotlin, it supports these nullability annotations in its compiler and will prevent you from passing a null to a Java method that requires a non-null argument. Even though this question was originally targeted at Java, I mention this Kotlin feature because it is specifically **targeted at these Java annotation** and the question was *&quot;Is there a way to make **these annotations** more strictly enforced and/or propagate further?&quot;* and this feature does **make these annotation more strictly enforced**. \r\n\r\nJava class using `@NotNull` annotation:\r\n\r\n    public class MyJavaClazz {\r\n        public void foo(@NotNull String myString) {\r\n            // will result in an NPE if myString is null\r\n            myString.hashCode();\r\n        }\r\n    }\r\n\r\nKotlin class calling Java class and passing null for the argument annotated with `@NotNull`:\r\n\r\n    class MyKotlinClazz {\r\n        fun foo() {\r\n            MyJavaClazz().foo(null)\r\n        }\r\n    }  \r\n\r\nKotlin compiler error enforcing the `@NotNull` annotation:\r\n\r\n&gt; Error:(5, 27) Kotlin: Null can not be a value of a non-null type String\r\n\r\nSee: https://kotlinlang.org/docs/java-interop.html#nullability-annotations","title":"How to use @Nullable and @Nonnull annotations more effectively?","body":"<p>If you use Kotlin, it supports these nullability annotations in its compiler and will prevent you from passing a null to a Java method that requires a non-null argument. Even though this question was originally targeted at Java, I mention this Kotlin feature because it is specifically <strong>targeted at these Java annotation</strong> and the question was <em>&quot;Is there a way to make <strong>these annotations</strong> more strictly enforced and/or propagate further?&quot;</em> and this feature does <strong>make these annotation more strictly enforced</strong>.</p>\n<p>Java class using <code>@NotNull</code> annotation:</p>\n<pre><code>public class MyJavaClazz {\n    public void foo(@NotNull String myString) {\n        // will result in an NPE if myString is null\n        myString.hashCode();\n    }\n}\n</code></pre>\n<p>Kotlin class calling Java class and passing null for the argument annotated with <code>@NotNull</code>:</p>\n<pre><code>class MyKotlinClazz {\n    fun foo() {\n        MyJavaClazz().foo(null)\n    }\n}  \n</code></pre>\n<p>Kotlin compiler error enforcing the <code>@NotNull</code> annotation:</p>\n<blockquote>\n<p>Error:(5, 27) Kotlin: Null can not be a value of a non-null type String</p>\n</blockquote>\n<p>See: <a href=\"https://kotlinlang.org/docs/java-interop.html#nullability-annotations\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/java-interop.html#nullability-annotations</a></p>\n"},{"comments":[{"owner":{"account_id":199370,"reputation":19629,"user_id":444639,"accept_rate":84,"display_name":"Rylander"},"score":0,"creation_date":1577379629,"post_id":59429577,"comment_id":105156810,"body_markdown":"Even with `Optional`, there are still many libraries and frameworks that use these annotations such that it is not feasible to update/replace all of your dependencies with versions updated to use Optionals. `Optional` can however help in situations where you use null within your own code.","body":"Even with <code>Optional</code>, there are still many libraries and frameworks that use these annotations such that it is not feasible to update/replace all of your dependencies with versions updated to use Optionals. <code>Optional</code> can however help in situations where you use null within your own code."}],"tags":[],"owner":{"account_id":7678312,"reputation":512,"user_id":5818405,"display_name":"Mathieu Gemard"},"comment_count":1,"down_vote_count":9,"up_vote_count":2,"is_accepted":false,"score":-7,"last_activity_date":1588898347,"creation_date":1576864755,"answer_id":59429577,"question_id":13484202,"body_markdown":"**Since Java 8 new feature [Optional] [1] you should not use @Nullable or @Notnull in your own code anymore**. Take the example below:\r\n\r\n    public void printValue(@Nullable myValue) {\r\n        if (myValue != null) {\r\n            System.out.print(myValue);\r\n        } else {\r\n            System.out.print(&quot;I dont have a value&quot;);\r\n    }\r\n\r\nIt could be rewritten with:\r\n\r\n    public void printValue(Optional&lt;String&gt; myValue) {\r\n        if (myValue.ifPresent) {\r\n            System.out.print(myValue.get());\r\n        } else {\r\n            System.out.print(&quot;I dont have a value&quot;);\r\n    }\r\n\r\nUsing an optional **forces you to check for null value**. In the code above, you can only access the value by calling the `get` method.\r\n   \r\n\r\n\r\nAnother advantage is that the **code get more readable**. With the addition of Java 9 [ifPresentOrElse] [2], the function could even be written as:\r\n\r\n    public void printValue(Optional&lt;String&gt; myValue) {\r\n        myValue.ifPresentOrElse(\r\n            v -&gt; System.out.print(v),\r\n            () -&gt; System.out.print(&quot;I dont have a value&quot;),\r\n        )\r\n    }\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html\r\n  [2]: https://docs.oracle.com/javase/9/docs/api/java/util/Optional.html#ifPresentOrElse-java.util.function.Consumer-java.lang.Runnable-","title":"How to use @Nullable and @Nonnull annotations more effectively?","body":"<p><strong>Since Java 8 new feature <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html\" rel=\"nofollow noreferrer\">Optional</a> you should not use @Nullable or @Notnull in your own code anymore</strong>. Take the example below:</p>\n\n<pre><code>public void printValue(@Nullable myValue) {\n    if (myValue != null) {\n        System.out.print(myValue);\n    } else {\n        System.out.print(\"I dont have a value\");\n}\n</code></pre>\n\n<p>It could be rewritten with:</p>\n\n<pre><code>public void printValue(Optional&lt;String&gt; myValue) {\n    if (myValue.ifPresent) {\n        System.out.print(myValue.get());\n    } else {\n        System.out.print(\"I dont have a value\");\n}\n</code></pre>\n\n<p>Using an optional <strong>forces you to check for null value</strong>. In the code above, you can only access the value by calling the <code>get</code> method.</p>\n\n<p>Another advantage is that the <strong>code get more readable</strong>. With the addition of Java 9 <a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/Optional.html#ifPresentOrElse-java.util.function.Consumer-java.lang.Runnable-\" rel=\"nofollow noreferrer\">ifPresentOrElse</a>, the function could even be written as:</p>\n\n<pre><code>public void printValue(Optional&lt;String&gt; myValue) {\n    myValue.ifPresentOrElse(\n        v -&gt; System.out.print(v),\n        () -&gt; System.out.print(\"I dont have a value\"),\n    )\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16856943,"reputation":57,"user_id":12188660,"display_name":"mitesh keswani"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1668598818,"creation_date":1668598818,"answer_id":74459839,"question_id":13484202,"body_markdown":"@NotNull from javax.validation.constraints means that the method never returns a null value.. ;)\r\nSo, that means on getting any value from that method, you need not add any null check for checking for null pointer exceptions.. :D","title":"How to use @Nullable and @Nonnull annotations more effectively?","body":"<p>@NotNull from javax.validation.constraints means that the method never returns a null value.. ;)\nSo, that means on getting any value from that method, you need not add any null check for checking for null pointer exceptions.. :D</p>\n"},{"comments":[{"owner":{"account_id":199370,"reputation":19629,"user_id":444639,"accept_rate":84,"display_name":"Rylander"},"score":0,"creation_date":1682294458,"post_id":76070259,"comment_id":134188050,"body_markdown":"This is true, but an NPE would already be thrown... The answer I eventually went with is to use Kotlin wherever possible and then get this as a compile time check. See: https://stackoverflow.com/a/46290602/444639","body":"This is true, but an NPE would already be thrown... The answer I eventually went with is to use Kotlin wherever possible and then get this as a compile time check. See: <a href=\"https://stackoverflow.com/a/46290602/444639\">stackoverflow.com/a/46290602/444639</a>"}],"tags":[],"owner":{"account_id":1405436,"reputation":8300,"user_id":1333292,"accept_rate":81,"display_name":"ilomambo"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682056413,"creation_date":1682056413,"answer_id":76070259,"question_id":13484202,"body_markdown":"A very old question, but I don&#39;t see anybody pointing out that to get a check on execution time you should use assertions. \r\n\r\nLike this\r\n\r\n    assert x != null;\r\n\r\nThis will work (throw an exception) no matter the level of indirection","title":"How to use @Nullable and @Nonnull annotations more effectively?","body":"<p>A very old question, but I don't see anybody pointing out that to get a check on execution time you should use assertions.</p>\n<p>Like this</p>\n<pre><code>assert x != null;\n</code></pre>\n<p>This will work (throw an exception) no matter the level of indirection</p>\n"}],"owner":{"account_id":199370,"reputation":19629,"user_id":444639,"accept_rate":84,"display_name":"Rylander"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":243330,"favorite_count":0,"down_vote_count":2,"up_vote_count":181,"answer_count":11,"score":179,"last_activity_date":1686882371,"creation_date":1353455283,"question_id":13484202,"body_markdown":"I can see that `@Nullable` and `@Nonnull` annotations _could_ be helpful in preventing `NullPointerException`s but they do not propagate very far.\r\n\r\n - The effectiveness of these annotations drop off completely after one level of indirection, so if you only add a few they don&#39;t propagate very far. \r\n - Since these annotations are not well enforced there is a danger of assuming a value marked with `@Nonnull` is not null and consequently not performing null checks. \r\n\r\nThe code below causes a parameter marked with `@Nonnull` to be `null` without raising any complaints.  It throws a `NullPointerException` when it is run.\r\n\r\n\tpublic class Clazz {\r\n\t\tpublic static void main(String[] args){\r\n\t\t\tClazz clazz = new Clazz();\r\n\r\n            // this line raises a complaint with the IDE (IntelliJ 11)\r\n\t\t\tclazz.directPathToA(null);\r\n \r\n            // this line does not\r\n\t\t\tclazz.indirectPathToA(null); \r\n\t\t}\r\n\t\t\r\n\t\tpublic void indirectPathToA(Integer y){\r\n\t\t\tdirectPathToA(y);\r\n\t\t}\r\n\t\t\r\n\t\tpublic void directPathToA(@Nonnull Integer x){\r\n\t\t\tx.toString(); // do stuff to x        \r\n\t\t}\r\n\t}\r\n\r\nIs there a way to make these annotations more strictly enforced and/or propagate further?","title":"How to use @Nullable and @Nonnull annotations more effectively?","body":"<p>I can see that <code>@Nullable</code> and <code>@Nonnull</code> annotations <em>could</em> be helpful in preventing <code>NullPointerException</code>s but they do not propagate very far.</p>\n\n<ul>\n<li>The effectiveness of these annotations drop off completely after one level of indirection, so if you only add a few they don't propagate very far. </li>\n<li>Since these annotations are not well enforced there is a danger of assuming a value marked with <code>@Nonnull</code> is not null and consequently not performing null checks. </li>\n</ul>\n\n<p>The code below causes a parameter marked with <code>@Nonnull</code> to be <code>null</code> without raising any complaints.  It throws a <code>NullPointerException</code> when it is run.</p>\n\n<pre><code>public class Clazz {\n    public static void main(String[] args){\n        Clazz clazz = new Clazz();\n\n        // this line raises a complaint with the IDE (IntelliJ 11)\n        clazz.directPathToA(null);\n\n        // this line does not\n        clazz.indirectPathToA(null); \n    }\n\n    public void indirectPathToA(Integer y){\n        directPathToA(y);\n    }\n\n    public void directPathToA(@Nonnull Integer x){\n        x.toString(); // do stuff to x        \n    }\n}\n</code></pre>\n\n<p>Is there a way to make these annotations more strictly enforced and/or propagate further?</p>\n"},{"tags":["java","jedis"],"owner":{"account_id":27779580,"reputation":41,"user_id":21208196,"display_name":"LongKang Fan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686882159,"creation_date":1686882159,"question_id":76486592,"body_markdown":"I understand that ShardedJedisPool has been deprecated, and I would like to confirm if ShardedJedisPool is still available in any form in version 4.3.0. If not, how can I achieve the same functionality? Should I downgrade the Jedis version? Is that recommended? Or any Alternatives in the latest version?","title":"Usage of ShardedJedisPool in a Non-Cluster Redis Environment in lastest version: Deprecated or Alternatives?","body":"<p>I understand that ShardedJedisPool has been deprecated, and I would like to confirm if ShardedJedisPool is still available in any form in version 4.3.0. If not, how can I achieve the same functionality? Should I downgrade the Jedis version? Is that recommended? Or any Alternatives in the latest version?</p>\n"},{"tags":["java","anonymous-class"],"comments":[{"owner":{"display_name":"user6073886"},"score":2,"creation_date":1686824712,"post_id":76481523,"comment_id":134853854,"body_markdown":"I honestly really don&#39;t understand what you are trying to do and your problem description. But i can tell you that your `public void setAdjustNum(final int adjustNum)` currently is pointless and does nothing because you just assign the passed argument to itself: `adjustNum = adjustNum`. Maybe you meant `this.adjustNum = adjustNum;` but as i don&#39;t know what end result you even expect I can&#39;t tell you if this will lead to it.","body":"I honestly really don&#39;t understand what you are trying to do and your problem description. But i can tell you that your <code>public void setAdjustNum(final int adjustNum)</code> currently is pointless and does nothing because you just assign the passed argument to itself: <code>adjustNum = adjustNum</code>. Maybe you meant <code>this.adjustNum = adjustNum;</code> but as i don&#39;t know what end result you even expect I can&#39;t tell you if this will lead to it."},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1686825860,"post_id":76481523,"comment_id":134854080,"body_markdown":"Anonymous classes cannot access their enclosing classes variables unless they are final, as much it will not be considered the same as the enclosing class variable (different declared variable)if the variable has exactly the same name.It appears you are trying to pass out of the anonymous class a value in a variable that is declared in its outer enclosing class.","body":"Anonymous classes cannot access their enclosing classes variables unless they are final, as much it will not be considered the same as the enclosing class variable (different declared variable)if the variable has exactly the same name.It appears you are trying to pass out of the anonymous class a value in a variable that is declared in its outer enclosing class."},{"owner":{"account_id":9043972,"reputation":139,"user_id":6737118,"accept_rate":50,"display_name":"Tel lui"},"score":0,"creation_date":1686879537,"post_id":76481523,"comment_id":134862369,"body_markdown":"Sorry, all. I find there is typo for my code and I don&#39;t have any problem with it now...","body":"Sorry, all. I find there is typo for my code and I don&#39;t have any problem with it now..."}],"answers":[{"comments":[{"owner":{"account_id":9043972,"reputation":139,"user_id":6737118,"accept_rate":50,"display_name":"Tel lui"},"score":0,"creation_date":1686879731,"post_id":76481716,"comment_id":134862379,"body_markdown":"Thank you, Davide. I also find the last line is not using comparator2 as I wanted to. Sorry for the silly mistake.","body":"Thank you, Davide. I also find the last line is not using comparator2 as I wanted to. Sorry for the silly mistake."}],"tags":[],"owner":{"account_id":2016713,"reputation":26480,"user_id":1803853,"accept_rate":71,"display_name":"Davide Lorenzo MARINO"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1686825894,"creation_date":1686825894,"answer_id":76481716,"question_id":76481523,"body_markdown":"I found at least an error in your code:\r\n\r\n    public void setAdjustNum(int adjustNum) {\r\n        adjustNum = adjustNum;\r\n    }\r\n\r\nThis method does nothing because it resets adjustNum passed as parameter to the function. If you need to set the adjustNum field of the class your code must be updated to\r\n\r\n    public void setAdjustNum(int adjustNum) {\r\n        this.adjustNum = adjustNum;\r\n    }\r\n\r\nSo the `this.adjustNum` refers to the property of the instance, while `adjustNum` (without this) refers to the parameter passed to the function. In this case you really set the `adjustNum` calling `setAdjustNum` method","title":"Why updating a primitive instance variable value referring by the method of an anonymous class does not update the value in the method of it?","body":"<p>I found at least an error in your code:</p>\n<pre><code>public void setAdjustNum(int adjustNum) {\n    adjustNum = adjustNum;\n}\n</code></pre>\n<p>This method does nothing because it resets adjustNum passed as parameter to the function. If you need to set the adjustNum field of the class your code must be updated to</p>\n<pre><code>public void setAdjustNum(int adjustNum) {\n    this.adjustNum = adjustNum;\n}\n</code></pre>\n<p>So the <code>this.adjustNum</code> refers to the property of the instance, while <code>adjustNum</code> (without this) refers to the parameter passed to the function. In this case you really set the <code>adjustNum</code> calling <code>setAdjustNum</code> method</p>\n"}],"owner":{"account_id":9043972,"reputation":139,"user_id":6737118,"accept_rate":50,"display_name":"Tel lui"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76481716,"answer_count":1,"score":0,"last_activity_date":1686880118,"creation_date":1686824396,"question_id":76481523,"body_markdown":"Here is a problem I face when maintaining and old application, below are the code for demonstration:\r\nFirst, I created a class with field innerComp valued by instance of an anonymous class and a field adjustNum which is used in a method of innerComp:\r\n\r\n    public class InnerComparator {\r\n    private int adjustNum = 0;\r\n\r\n    public InnerComparator() {\r\n\r\n    }\r\n\r\n    public InnerComparator(int adjustNum) {\r\n        this.adjustNum = adjustNum;\r\n    }\r\n\r\n    public void setAdjustNum(int adjustNum) {\r\n      //        adjustNum = adjustNum;\r\n          this.adjustNum = adjustNum;\r\n    }\r\n    private Comparator innerComp = new Comparator() {\r\n        @Override\r\n        public int compare(Object o1, Object o2) {\r\n            System.out.println(adjustNum);\r\n            return adjustNum;\r\n        }\r\n    };\r\n\r\n    public Comparator getInnerComp() {\r\n        return innerComp;\r\n    }\r\n\r\n    public void sort(List list) {\r\n        Collections.sort(list, innerComp);\r\n    }\r\n}\r\n\r\nHere demonstrate how I use it:\r\n\r\n    public class CheckInnerClassUpdate {\r\n    public static void main(String[] args) {\r\n        InnerComparator comparator = new InnerComparator();\r\n        List&lt;String&gt; list = Arrays.asList(new String[]{&quot;1&quot;, &quot;2&quot;, &quot;3&quot;});\r\n        comparator.sort(list);\r\n        comparator.setAdjustNum(1);\r\n        comparator.sort(list);\r\n        InnerComparator comparator2 = new InnerComparator(1);\r\n        // comparator.sort(list);\r\n        comparator2.sort(list);\r\n    }\r\n}\r\n\r\nThe result is:\r\n0\r\n0\r\n1\r\n1\r\n1\r\n1\r\n----------------------------\r\n(Obsolete)\r\nThe result is:\r\n0\r\n0\r\n0\r\n0\r\n0\r\n0\r\nI would like to ask for the mechanism that generate the result. The result seems show that the adjustNum pass to the instance of the anonymous class is referring to the init value of the adjustNum. In the sample code, even if I pass the value via the constructor, the value pass to the innerComp is still 0. There is a missing piece of knowledge that I don&#39;t know and hopefully someone could help. Thank you. \r\n-----------------------------\r\n(Updated)\r\nAs mentioned answer, typo cause the confusion. I have fix the code and \r\n comment out the original code.","title":"Why updating a primitive instance variable value referring by the method of an anonymous class does not update the value in the method of it?","body":"<p>Here is a problem I face when maintaining and old application, below are the code for demonstration:\nFirst, I created a class with field innerComp valued by instance of an anonymous class and a field adjustNum which is used in a method of innerComp:</p>\n<pre><code>public class InnerComparator {\nprivate int adjustNum = 0;\n\npublic InnerComparator() {\n\n}\n\npublic InnerComparator(int adjustNum) {\n    this.adjustNum = adjustNum;\n}\n\npublic void setAdjustNum(int adjustNum) {\n  //        adjustNum = adjustNum;\n      this.adjustNum = adjustNum;\n}\nprivate Comparator innerComp = new Comparator() {\n    @Override\n    public int compare(Object o1, Object o2) {\n        System.out.println(adjustNum);\n        return adjustNum;\n    }\n};\n\npublic Comparator getInnerComp() {\n    return innerComp;\n}\n\npublic void sort(List list) {\n    Collections.sort(list, innerComp);\n}\n</code></pre>\n<p>}</p>\n<p>Here demonstrate how I use it:</p>\n<pre><code>public class CheckInnerClassUpdate {\npublic static void main(String[] args) {\n    InnerComparator comparator = new InnerComparator();\n    List&lt;String&gt; list = Arrays.asList(new String[]{&quot;1&quot;, &quot;2&quot;, &quot;3&quot;});\n    comparator.sort(list);\n    comparator.setAdjustNum(1);\n    comparator.sort(list);\n    InnerComparator comparator2 = new InnerComparator(1);\n    // comparator.sort(list);\n    comparator2.sort(list);\n}\n</code></pre>\n<p>}</p>\n<h2>The result is:\n0\n0\n1\n1\n1\n1</h2>\n<h2>(Obsolete)\nThe result is:\n0\n0\n0\n0\n0\n0\nI would like to ask for the mechanism that generate the result. The result seems show that the adjustNum pass to the instance of the anonymous class is referring to the init value of the adjustNum. In the sample code, even if I pass the value via the constructor, the value pass to the innerComp is still 0. There is a missing piece of knowledge that I don't know and hopefully someone could help. Thank you.</h2>\n<p>(Updated)\nAs mentioned answer, typo cause the confusion. I have fix the code and\ncomment out the original code.</p>\n"},{"tags":["python","java","aws-lambda","aws-lambda-layers"],"owner":{"account_id":12913491,"reputation":415,"user_id":9338509,"display_name":"lakshmiravali rimmalapudi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686879243,"creation_date":1686879243,"question_id":76486454,"body_markdown":"I am attempting to call a Java method (which is deployed as aws lambda layer) from within my Python code (which is deployed as aws lambda) using Jpype. However, I am unsure of what `jarpath` to input. Below is my Python code:\r\n\r\n```python\r\ndef call_java_method()\r\n    #jpype.addClassPath(JAR) - Not sure what path I should give here?\r\n    class_name = &#39;com.java.example.SampleJavaClass&#39;\r\n    my_class = JClass(class_name)\r\n\r\n    instance = my_class()\r\n    result = instance.sampleMethod()\r\n    print(result)\r\n```\r\n\r\nThe corresponding Java code has been deployed in a lambda layer:\r\n\r\n```java\r\npackage com.java.example;\r\n\r\npublic class SampleJavaClass {\r\n    public String sampleMethod() {\r\n        return &quot;sampleMethod() called!&quot;;\r\n    }\r\n}\r\n```\r\n\r\nHow can I address this issue?","title":"How to call methods in java lambda layer in python lambda?","body":"<p>I am attempting to call a Java method (which is deployed as aws lambda layer) from within my Python code (which is deployed as aws lambda) using Jpype. However, I am unsure of what <code>jarpath</code> to input. Below is my Python code:</p>\n<pre class=\"lang-py prettyprint-override\"><code>def call_java_method()\n    #jpype.addClassPath(JAR) - Not sure what path I should give here?\n    class_name = 'com.java.example.SampleJavaClass'\n    my_class = JClass(class_name)\n\n    instance = my_class()\n    result = instance.sampleMethod()\n    print(result)\n</code></pre>\n<p>The corresponding Java code has been deployed in a lambda layer:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.java.example;\n\npublic class SampleJavaClass {\n    public String sampleMethod() {\n        return &quot;sampleMethod() called!&quot;;\n    }\n}\n</code></pre>\n<p>How can I address this issue?</p>\n"},{"tags":["java","loops","dictionary","filter"],"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":1,"creation_date":1686676989,"post_id":76467302,"comment_id":134831002,"body_markdown":"`p -&gt; ages.contains(p.age)`","body":"<code>p -&gt; ages.contains(p.age)</code>"},{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":0,"creation_date":1686677018,"post_id":76467302,"comment_id":134831006,"body_markdown":"(with a follow-up `).toList()` at the end).","body":"(with a follow-up <code>).toList()</code> at the end)."},{"owner":{"account_id":11400015,"reputation":1904,"user_id":8357251,"display_name":"gdomo"},"score":0,"creation_date":1686677399,"post_id":76467302,"comment_id":134831096,"body_markdown":"It&#39;s better to put ages in a HashSet before (new HashSet&lt;&gt;(ages)) to do whole filtering in O(n) time instead of O(n*m)","body":"It&#39;s better to put ages in a HashSet before (new HashSet&lt;&gt;(ages)) to do whole filtering in O(n) time instead of O(n*m)"}],"answers":[{"tags":[],"owner":{"account_id":28814485,"reputation":11,"user_id":22068439,"display_name":"myoungin"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686878299,"creation_date":1686679834,"answer_id":76467636,"question_id":76467302,"body_markdown":"You can use `ages.contains(p.age)` in the lambda function.\r\n``` java\r\nList&lt;Person&gt; specificAges = people\r\n    .stream()\r\n    .filter(p -&gt; ages.contains(p.getAge()))\r\n    .collect(Collectors.toList());\r\n```\r\nI used getter method to get age of each `Person` class.","title":"How to filter a list of elements by a list of matching key values?","body":"<p>You can use <code>ages.contains(p.age)</code> in the lambda function.</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;Person&gt; specificAges = people\n    .stream()\n    .filter(p -&gt; ages.contains(p.getAge()))\n    .collect(Collectors.toList());\n</code></pre>\n<p>I used getter method to get age of each <code>Person</code> class.</p>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686689501,"creation_date":1686689501,"answer_id":76468633,"question_id":76467302,"body_markdown":"If a _stream_ is not a requirement, a _for-loop_ would also suffice.\r\n\r\n```java\r\nList&lt;Person&gt; specificAges = new ArrayList&lt;&gt;();\r\nfor (Person person : people) {\r\n    if (ages.contains(person.age)) specificAges.add(person);\r\n}\r\n```\r\n\r\nOutput\r\n\r\n```none\r\n[John 25, Lisa 54]\r\n```","title":"How to filter a list of elements by a list of matching key values?","body":"<p>If a <em>stream</em> is not a requirement, a <em>for-loop</em> would also suffice.</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;Person&gt; specificAges = new ArrayList&lt;&gt;();\nfor (Person person : people) {\n    if (ages.contains(person.age)) specificAges.add(person);\n}\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>[John 25, Lisa 54]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":28759342,"reputation":11,"user_id":22025617,"display_name":"migueljacuinde"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686877726,"creation_date":1686877726,"answer_id":76486384,"question_id":76467302,"body_markdown":"You can also create a separate Person class and use the annotations for quick constructor, getter/setter development.\r\n\r\n```java\r\n@Data\r\n@Builder\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\npublic class Person {\r\n    private String firstName;\r\n    private Integer age;\r\n\r\n    @Override\r\n    public String toString() {\r\n        return firstName + &quot; &quot; + age;\r\n    }\r\n}\r\n```\r\nThe rest of the code would remain the same. You can either use a stream of for each loop as mentioned.","title":"How to filter a list of elements by a list of matching key values?","body":"<p>You can also create a separate Person class and use the annotations for quick constructor, getter/setter development.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class Person {\n    private String firstName;\n    private Integer age;\n\n    @Override\n    public String toString() {\n        return firstName + &quot; &quot; + age;\n    }\n}\n</code></pre>\n<p>The rest of the code would remain the same. You can either use a stream of for each loop as mentioned.</p>\n"},{"tags":[],"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686878560,"creation_date":1686878560,"answer_id":76486424,"question_id":76467302,"body_markdown":"For a &quot;less code&quot; solution, make a copy then use `removeIf()`:\r\n\r\n```\r\nList&lt;Integer&gt; specificAges = new ArrayList&lt;&gt;(people);\r\nspecificAges.removeIf(p -&gt; !ages.contains(p.getAge()));\r\n```\r\n\r\nIf keeping the original list is not necessary, just:\r\n\r\n    people.removeIf(p -&gt; !ages.contains(p.getAge()));\r\n","title":"How to filter a list of elements by a list of matching key values?","body":"<p>For a &quot;less code&quot; solution, make a copy then use <code>removeIf()</code>:</p>\n<pre><code>List&lt;Integer&gt; specificAges = new ArrayList&lt;&gt;(people);\nspecificAges.removeIf(p -&gt; !ages.contains(p.getAge()));\n</code></pre>\n<p>If keeping the original list is not necessary, just:</p>\n<pre><code>people.removeIf(p -&gt; !ages.contains(p.getAge()));\n</code></pre>\n"}],"owner":{"account_id":27863021,"reputation":49,"user_id":21275121,"display_name":"Sherbet Head"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":79,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":4,"score":0,"last_activity_date":1686878560,"creation_date":1686676565,"question_id":76467302,"body_markdown":"I&#39;m struggling a bit with comparing the key/vals from multiple lists and could use some help. Given a list of `People` with a `firstName` and `age` property, and a separate list of ages, how would I filter the `People` list to return only those with one of the matching ages? \r\n\r\n\r\n```\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n\r\n        Person p1 = new Person(&quot;John&quot;, 25);\r\n        Person p2 = new Person(&quot;Lisa&quot;, 54);\r\n        Person p3 = new Person(&quot;Mike&quot;, 61);\r\n        List&lt;Person&gt; people = new ArrayList&lt;Person&gt;();\r\n        people.add(p1);\r\n        people.add(p2);\r\n        people.add(p3);\r\n\r\n        List&lt;Integer&gt; ages = Arrays.asList(25, 54);\r\n        List&lt;Person&gt; specificAges = people.stream().filter(p -&gt; p.age == ages?????)\r\n\r\n        System.out.println(specificAges);\r\n    }\r\n}\r\n\r\npublic class Person {\r\n    private String firstName;\r\n    private Integer age;\r\n\r\n    public Person(String firstName, Integer age) {\r\n        this.firstName = firstName;\r\n        this.age = age;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return firstName + &quot; &quot; + age;\r\n    }\r\n}\r\n```\r\nExpected Result: `[&quot;John 25&quot;, &quot;Lisa 54&quot;]`\r\n","title":"How to filter a list of elements by a list of matching key values?","body":"<p>I'm struggling a bit with comparing the key/vals from multiple lists and could use some help. Given a list of <code>People</code> with a <code>firstName</code> and <code>age</code> property, and a separate list of ages, how would I filter the <code>People</code> list to return only those with one of the matching ages?</p>\n<pre><code>public class Main {\n    public static void main(String[] args) {\n\n        Person p1 = new Person(&quot;John&quot;, 25);\n        Person p2 = new Person(&quot;Lisa&quot;, 54);\n        Person p3 = new Person(&quot;Mike&quot;, 61);\n        List&lt;Person&gt; people = new ArrayList&lt;Person&gt;();\n        people.add(p1);\n        people.add(p2);\n        people.add(p3);\n\n        List&lt;Integer&gt; ages = Arrays.asList(25, 54);\n        List&lt;Person&gt; specificAges = people.stream().filter(p -&gt; p.age == ages?????)\n\n        System.out.println(specificAges);\n    }\n}\n\npublic class Person {\n    private String firstName;\n    private Integer age;\n\n    public Person(String firstName, Integer age) {\n        this.firstName = firstName;\n        this.age = age;\n    }\n\n    @Override\n    public String toString() {\n        return firstName + &quot; &quot; + age;\n    }\n}\n</code></pre>\n<p>Expected Result: <code>[&quot;John 25&quot;, &quot;Lisa 54&quot;]</code></p>\n"},{"tags":["java","cdi","quarkus","jakarta-migration"],"comments":[{"owner":{"account_id":1115215,"reputation":10877,"user_id":1104727,"display_name":"Holly Cummins"},"score":0,"creation_date":1686740737,"post_id":76472614,"comment_id":134839893,"body_markdown":"Adding the javax dependency is a bad idea, because javax and jakarta classes should not be used together. \n\nWhere is the error you&#39;re seeing coming from? Is it in the IDE, or do you have a stack trace? Given that you&#39;re importing jakarta.enterprise.context.ApplicationScoped, ReviewServiceImpl should not be using any javax dependencies, unless one is coming in from a superclass?","body":"Adding the javax dependency is a bad idea, because javax and jakarta classes should not be used together.   Where is the error you&#39;re seeing coming from? Is it in the IDE, or do you have a stack trace? Given that you&#39;re importing jakarta.enterprise.context.ApplicationScoped, ReviewServiceImpl should not be using any javax dependencies, unless one is coming in from a superclass?"},{"owner":{"account_id":7481573,"reputation":43,"user_id":5686170,"display_name":"MightyThor"},"score":0,"creation_date":1686742595,"post_id":76472614,"comment_id":134840248,"body_markdown":"thanks for the reply @HollyCummins, I have updated the question by providing the log while running the application.","body":"thanks for the reply @HollyCummins, I have updated the question by providing the log while running the application."},{"owner":{"account_id":3052937,"reputation":17914,"user_id":2587166,"accept_rate":83,"display_name":"Luca Basso Ricci"},"score":0,"creation_date":1686743114,"post_id":76472614,"comment_id":134840369,"body_markdown":"run maven with -X for verbose output","body":"run maven with -X for verbose output"},{"owner":{"account_id":1115215,"reputation":10877,"user_id":1104727,"display_name":"Holly Cummins"},"score":0,"creation_date":1686758534,"post_id":76472614,"comment_id":134844144,"body_markdown":"I&#39;d be tempted to run a `mvn clean` and maybe even clean out a few things from `~/.m2/repository`, since the error you&#39;re seeing doesn&#39;t seem to align with what&#39;s in your code.","body":"I&#39;d be tempted to run a <code>mvn clean</code> and maybe even clean out a few things from <code>~&#47;.m2&#47;repository</code>, since the error you&#39;re seeing doesn&#39;t seem to align with what&#39;s in your code."}],"answers":[{"tags":[],"owner":{"account_id":6518557,"reputation":2810,"user_id":5043481,"display_name":"zforgo"},"comment_count":0,"down_vote_count":0,"up_vote_count":11,"is_accepted":true,"score":11,"last_activity_date":1686876543,"creation_date":1686876212,"answer_id":76486310,"question_id":76472614,"body_markdown":"MapStruct using custom annotation processor during build time for generating mapping sources. That supports several different ways to generate classes.\r\n\r\nHowever, `@Mapper(componentModel = &quot;cdi&quot;)` using `javax.enterprise.context.ApplicationScoped`, `@Mapper(componentModel = &quot;jakarta&quot;)` configuration imports the `jakarta.enterprise.context.ApplicationScoped` annotation.\r\n\r\nSo just change componentModel attribute to:\r\n\r\n```java\r\n@Mapper(componentModel = &quot;jakarta&quot;)\r\n```\r\nNote: \r\n\r\n* This componentModel value is supported since MapStruct 1.5.0.Final and above.\r\n* The updated [migration guide](https://github.com/quarkusio/quarkus/wiki/Migration-Guide-3.0#mapstruct) also describes this problem and this soulution\r\n\r\n","title":"ERROR Couldn&#39;t find type javax.enterprise.context.ApplicationScoped. Are you missing a dependency on your classpath?","body":"<p>MapStruct using custom annotation processor during build time for generating mapping sources. That supports several different ways to generate classes.</p>\n<p>However, <code>@Mapper(componentModel = &quot;cdi&quot;)</code> using <code>javax.enterprise.context.ApplicationScoped</code>, <code>@Mapper(componentModel = &quot;jakarta&quot;)</code> configuration imports the <code>jakarta.enterprise.context.ApplicationScoped</code> annotation.</p>\n<p>So just change componentModel attribute to:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Mapper(componentModel = &quot;jakarta&quot;)\n</code></pre>\n<p>Note:</p>\n<ul>\n<li>This componentModel value is supported since MapStruct 1.5.0.Final and above.</li>\n<li>The updated <a href=\"https://github.com/quarkusio/quarkus/wiki/Migration-Guide-3.0#mapstruct\" rel=\"noreferrer\">migration guide</a> also describes this problem and this soulution</li>\n</ul>\n"}],"owner":{"account_id":7481573,"reputation":43,"user_id":5686170,"display_name":"MightyThor"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1787,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":76486310,"answer_count":1,"score":4,"last_activity_date":1686876691,"creation_date":1686739000,"question_id":76472614,"body_markdown":"I&#39;m writing Backend using Quarkus. Below is my POM.xml file:\r\n\r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot;?&gt;\r\n&lt;project xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot; xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;groupId&gt;com.abcd.mpt&lt;/groupId&gt;\r\n    &lt;artifactId&gt;hc-web&lt;/artifactId&gt;\r\n    &lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;\r\n    &lt;properties&gt;\r\n        &lt;compiler-plugin.version&gt;3.11.0&lt;/compiler-plugin.version&gt;\r\n        &lt;maven.compiler.release&gt;17&lt;/maven.compiler.release&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n        &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\r\n        &lt;quarkus.platform.artifact-id&gt;quarkus-bom&lt;/quarkus.platform.artifact-id&gt;\r\n        &lt;quarkus.platform.group-id&gt;io.quarkus.platform&lt;/quarkus.platform.group-id&gt;\r\n        &lt;quarkus.platform.version&gt;3.1.1.Final&lt;/quarkus.platform.version&gt;\r\n        &lt;skipITs&gt;true&lt;/skipITs&gt;\r\n        &lt;surefire-plugin.version&gt;3.0.0&lt;/surefire-plugin.version&gt;\r\n    &lt;/properties&gt;\r\n\r\n\r\n    &lt;dependencyManagement&gt;\r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;${quarkus.platform.group-id}&lt;/groupId&gt;\r\n                &lt;artifactId&gt;${quarkus.platform.artifact-id}&lt;/artifactId&gt;\r\n                &lt;version&gt;${quarkus.platform.version}&lt;/version&gt;\r\n                &lt;type&gt;pom&lt;/type&gt;\r\n                &lt;scope&gt;import&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n    &lt;/dependencyManagement&gt;\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\r\n            &lt;artifactId&gt;quarkus-arc&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\r\n            &lt;artifactId&gt;quarkus-resteasy-reactive&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\r\n            &lt;artifactId&gt;quarkus-junit5&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.rest-assured&lt;/groupId&gt;\r\n            &lt;artifactId&gt;rest-assured&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\r\n            &lt;artifactId&gt;quarkus-jdbc-postgresql&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\r\n            &lt;artifactId&gt;quarkus-hibernate-orm-panache&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\r\n            &lt;artifactId&gt;quarkus-agroal&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\r\n            &lt;artifactId&gt;quarkus-flyway&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n            &lt;version&gt;1.18.26&lt;/version&gt; &lt;!-- Please check for the latest version --&gt;\r\n            &lt;scope&gt;provided&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\r\n            &lt;artifactId&gt;mapstruct&lt;/artifactId&gt;\r\n            &lt;version&gt;1.5.3.Final&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\r\n            &lt;artifactId&gt;mapstruct-processor&lt;/artifactId&gt;\r\n            &lt;version&gt;1.5.3.Final&lt;/version&gt;\r\n            &lt;scope&gt;provided&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.smallrye&lt;/groupId&gt;\r\n            &lt;artifactId&gt;smallrye-jwt-build&lt;/artifactId&gt;\r\n            &lt;version&gt;4.2.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\r\n            &lt;artifactId&gt;quarkus-rest-client&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n    &lt;/dependencies&gt;\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;${quarkus.platform.group-id}&lt;/groupId&gt;\r\n                &lt;artifactId&gt;quarkus-maven-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;${quarkus.platform.version}&lt;/version&gt;\r\n                &lt;extensions&gt;true&lt;/extensions&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;build&lt;/goal&gt;\r\n                            &lt;goal&gt;generate-code&lt;/goal&gt;\r\n                            &lt;goal&gt;generate-code-tests&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;${compiler-plugin.version}&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;compilerArgs&gt;\r\n                        &lt;arg&gt;-parameters&lt;/arg&gt;\r\n                    &lt;/compilerArgs&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;${surefire-plugin.version}&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;systemPropertyVariables&gt;\r\n                        &lt;java.util.logging.manager&gt;org.jboss.logmanager.LogManager&lt;/java.util.logging.manager&gt;\r\n                        &lt;maven.home&gt;${maven.home}&lt;/maven.home&gt;\r\n                    &lt;/systemPropertyVariables&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;artifactId&gt;maven-failsafe-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;${surefire-plugin.version}&lt;/version&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;integration-test&lt;/goal&gt;\r\n                            &lt;goal&gt;verify&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;systemPropertyVariables&gt;\r\n                                &lt;native.image.path&gt;${project.build.directory}/${project.build.finalName}-runner&lt;/native.image.path&gt;\r\n                                &lt;java.util.logging.manager&gt;org.jboss.logmanager.LogManager&lt;/java.util.logging.manager&gt;\r\n                                &lt;maven.home&gt;${maven.home}&lt;/maven.home&gt;\r\n                            &lt;/systemPropertyVariables&gt;\r\n                        &lt;/configuration&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n    &lt;profiles&gt;\r\n        &lt;profile&gt;\r\n            &lt;id&gt;native&lt;/id&gt;\r\n            &lt;activation&gt;\r\n                &lt;property&gt;\r\n                    &lt;name&gt;native&lt;/name&gt;\r\n                &lt;/property&gt;\r\n            &lt;/activation&gt;\r\n            &lt;properties&gt;\r\n                &lt;skipITs&gt;false&lt;/skipITs&gt;\r\n                &lt;quarkus.package.type&gt;native&lt;/quarkus.package.type&gt;\r\n            &lt;/properties&gt;\r\n        &lt;/profile&gt;\r\n    &lt;/profiles&gt;\r\n&lt;/project&gt;\r\n\r\n\r\n```\r\n\r\nand below is the code where I use @ApplicationScoped, \r\n\r\n\r\n```java\r\nimport jakarta.enterprise.context.ApplicationScoped;\r\nimport jakarta.transaction.Transactional;\r\nimport jakarta.ws.rs.NotFoundException;\r\nimport java.util.List;\r\n\r\n@ApplicationScoped\r\n@Transactional\r\npublic class ReviewServiceImpl implements ReviewService {\r\n\r\n\r\n\r\n    @Override\r\n    @Transactional\r\n    public ReviewDto createReview(ReviewDto reviewDTO) {\r\n        Review review;\r\n        try {\r\n            review = Review.find(&quot;id&quot;, reviewDTO.getId()).firstResult();\r\n        } catch (NullPointerException e) {\r\n            throw new NullPointerException(&quot;Review already exists&quot;);\r\n        }\r\n        review = ReviewMapper.INSTANCE.toEntity(reviewDTO);\r\n        review.persist();\r\n        return ReviewMapper.INSTANCE.toDto(review);\r\n    }\r\n\r\n    @Override\r\n    @Transactional\r\n    public ReviewDto updateReview(Long id, ReviewDto reviewDTO) {\r\n        Review review;\r\n        try{\r\n            review = Review.find(&quot;id&quot;,id).firstResult();\r\n        }catch(NullPointerException e){\r\n            throw new NotFoundException(&quot;Review not found for id: &quot; + id);\r\n        }\r\n\r\n        ReviewMapper.INSTANCE.updateFromDto(reviewDTO, review);\r\n        review.persist();\r\n\r\n        return ReviewMapper.INSTANCE.toDto(review);\r\n    }\r\n\r\n    @Override\r\n    public ReviewDto getReviewById(Long reviewId) {\r\n        Review review = Review.findById(reviewId);\r\n        if(review == null){\r\n        throw new NotFoundException(&quot;Review not found for id: &quot; + reviewId);\r\n        }\r\n        return ReviewMapper.INSTANCE.toDto(review);\r\n\r\n    }\r\n\r\n    @Override\r\n    public List&lt;ReviewDto&gt; getReviewsByDoctorId(Long doctorId) {\r\n        List&lt;Review&gt; reviews = Review.find(&quot;select r from Review r join r.reviewDoctorMaps d where d.doctor_id =?1&quot;,doctorId).list();\r\n        return ReviewMapper.INSTANCE.toDtoList(reviews);\r\n    }\r\n\r\n    @Override\r\n    public List&lt;ReviewDto&gt; getAllReviews() {\r\n        List&lt;Review&gt; reviews = Review.listAll();\r\n        return ReviewMapper.INSTANCE.toDtoList(reviews);\r\n    }\r\n}\r\n\r\n\r\n```\r\n\r\nI&#39;m already using jakarta.enterprise.context.ApplicationScoped then why it is asking me to use javax packages ? \r\n\r\n\r\n\r\n\r\n\r\nthere is no javax.* dependency used in the code, nor in any super class.\r\n\r\nthis is log when I run the application\r\n```none\r\n/Library/Java/JavaVirtualMachines/graalvm-17/Contents/Home/bin/java -Dmaven.multiModuleProjectDirectory=/Users/maulikdave/NetBeansProjects/hc/hc-web -Dmaven.home=/opt/homebrew/Cellar/maven/3.9.2/libexec -Dclassworlds.conf=/opt/homebrew/Cellar/maven/3.9.2/libexec/bin/m2.conf &quot;-javaagent:/Applications/IntelliJ IDEA CE.app/Contents/lib/idea_rt.jar=58339:/Applications/IntelliJ IDEA CE.app/Contents/bin&quot; -Dfile.encoding=UTF-8 -classpath /opt/homebrew/Cellar/maven/3.9.2/libexec/boot/plexus-classworlds.license:/opt/homebrew/Cellar/maven/3.9.2/libexec/boot/plexus-classworlds-2.7.0.jar org.codehaus.classworlds.Launcher -Didea.version=2022.2.5 clean compile quarkus:dev\r\n[INFO] Scanning for projects...\r\n[INFO] \r\n[INFO] ----------------&lt; com.abcd.mpt:hc-web &gt;----------------\r\n[INFO] Building hc-web 1.0.0-SNAPSHOT\r\n[INFO]   from pom.xml\r\n[INFO] --------------------------------[ jar ]---------------------------------\r\n[INFO] \r\n[INFO] --- clean:3.2.0:clean (default-clean) @ hc-web ---\r\n[INFO] Deleting /Users/maulikdave/NetBeansProjects/hc/hc-web/target\r\n[INFO] \r\n[INFO] --- resources:3.3.0:resources (default-resources) @ hc-web ---\r\n[INFO] Copying 42 resources\r\n[INFO] \r\n[INFO] --- quarkus:3.1.1.Final:generate-code (default) @ hc-web ---\r\n[INFO] \r\n[INFO] --- compiler:3.11.0:compile (default-compile) @ hc-web ---\r\n[INFO] Changes detected - recompiling the module! :source\r\n[INFO] Compiling 79 source files with javac [debug release 17] to target/classes\r\n[INFO] -------------------------------------------------------------\r\n[ERROR] COMPILATION ERROR : \r\n[INFO] -------------------------------------------------------------\r\n[ERROR] Couldn&#39;t find type javax.enterprise.context.ApplicationScoped. Are you missing a dependency on your classpath?\r\n[ERROR] Couldn&#39;t find type javax.enterprise.context.ApplicationScoped. Are you missing a dependency on your classpath?\r\n[ERROR] Couldn&#39;t find type javax.enterprise.context.ApplicationScoped. Are you missing a dependency on your classpath?\r\n[ERROR] Couldn&#39;t find type javax.enterprise.context.ApplicationScoped. Are you missing a dependency on your classpath?\r\n[ERROR] Couldn&#39;t find type javax.enterprise.context.ApplicationScoped. Are you missing a dependency on your classpath?\r\n[ERROR] Couldn&#39;t find type javax.enterprise.context.ApplicationScoped. Are you missing a dependency on your classpath?\r\n[ERROR] Couldn&#39;t find type javax.enterprise.context.ApplicationScoped. Are you missing a dependency on your classpath?\r\n[ERROR] Couldn&#39;t find type javax.enterprise.context.ApplicationScoped. Are you missing a dependency on your classpath?\r\n[ERROR] Couldn&#39;t find type javax.enterprise.context.ApplicationScoped. Are you missing a dependency on your classpath?\r\n[ERROR] Couldn&#39;t find type javax.enterprise.context.ApplicationScoped. Are you missing a dependency on your classpath?\r\n[INFO] 10 errors \r\n[INFO] -------------------------------------------------------------\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] BUILD FAILURE\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Total time:  4.029 s\r\n[INFO] Finished at: 2023-06-14T17:02:46+05:30\r\n[INFO] ------------------------------------------------------------------------\r\n[WARNING] \r\n[WARNING] Plugin validation issues were detected in 1 plugin(s)\r\n[WARNING] \r\n[WARNING]  * org.apache.maven.plugins:maven-resources-plugin:3.3.0\r\n[WARNING] \r\n[WARNING] For more or less details, use &#39;maven.plugin.validation&#39; property with one of the values (case insensitive): [BRIEF, DEFAULT, VERBOSE]\r\n[WARNING] \r\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.11.0:compile (default-compile) on project hc-web: Compilation failure: Compilation failure: \r\n[ERROR] Couldn&#39;t find type javax.enterprise.context.ApplicationScoped. Are you missing a dependency on your classpath?\r\n[ERROR] Couldn&#39;t find type javax.enterprise.context.ApplicationScoped. Are you missing a dependency on your classpath?\r\n[ERROR] Couldn&#39;t find type javax.enterprise.context.ApplicationScoped. Are you missing a dependency on your classpath?\r\n[ERROR] Couldn&#39;t find type javax.enterprise.context.ApplicationScoped. Are you missing a dependency on your classpath?\r\n[ERROR] Couldn&#39;t find type javax.enterprise.context.ApplicationScoped. Are you missing a dependency on your classpath?\r\n[ERROR] Couldn&#39;t find type javax.enterprise.context.ApplicationScoped. Are you missing a dependency on your classpath?\r\n[ERROR] Couldn&#39;t find type javax.enterprise.context.ApplicationScoped. Are you missing a dependency on your classpath?\r\n[ERROR] Couldn&#39;t find type javax.enterprise.context.ApplicationScoped. Are you missing a dependency on your classpath?\r\n[ERROR] Couldn&#39;t find type javax.enterprise.context.ApplicationScoped. Are you missing a dependency on your classpath?\r\n[ERROR] Couldn&#39;t find type javax.enterprise.context.ApplicationScoped. Are you missing a dependency on your classpath?\r\n[ERROR] -&gt; [Help 1]\r\n[ERROR] \r\n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\r\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\r\n[ERROR] \r\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\r\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException\r\n\r\n```","title":"ERROR Couldn&#39;t find type javax.enterprise.context.ApplicationScoped. Are you missing a dependency on your classpath?","body":"<p>I'm writing Backend using Quarkus. Below is my POM.xml file:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot;?&gt;\n&lt;project xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot; xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;com.abcd.mpt&lt;/groupId&gt;\n    &lt;artifactId&gt;hc-web&lt;/artifactId&gt;\n    &lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;\n    &lt;properties&gt;\n        &lt;compiler-plugin.version&gt;3.11.0&lt;/compiler-plugin.version&gt;\n        &lt;maven.compiler.release&gt;17&lt;/maven.compiler.release&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\n        &lt;quarkus.platform.artifact-id&gt;quarkus-bom&lt;/quarkus.platform.artifact-id&gt;\n        &lt;quarkus.platform.group-id&gt;io.quarkus.platform&lt;/quarkus.platform.group-id&gt;\n        &lt;quarkus.platform.version&gt;3.1.1.Final&lt;/quarkus.platform.version&gt;\n        &lt;skipITs&gt;true&lt;/skipITs&gt;\n        &lt;surefire-plugin.version&gt;3.0.0&lt;/surefire-plugin.version&gt;\n    &lt;/properties&gt;\n\n\n    &lt;dependencyManagement&gt;\n        &lt;dependencies&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;${quarkus.platform.group-id}&lt;/groupId&gt;\n                &lt;artifactId&gt;${quarkus.platform.artifact-id}&lt;/artifactId&gt;\n                &lt;version&gt;${quarkus.platform.version}&lt;/version&gt;\n                &lt;type&gt;pom&lt;/type&gt;\n                &lt;scope&gt;import&lt;/scope&gt;\n            &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n    &lt;/dependencyManagement&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\n            &lt;artifactId&gt;quarkus-arc&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\n            &lt;artifactId&gt;quarkus-resteasy-reactive&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\n            &lt;artifactId&gt;quarkus-junit5&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.rest-assured&lt;/groupId&gt;\n            &lt;artifactId&gt;rest-assured&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\n            &lt;artifactId&gt;quarkus-jdbc-postgresql&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\n            &lt;artifactId&gt;quarkus-hibernate-orm-panache&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\n            &lt;artifactId&gt;quarkus-agroal&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\n            &lt;artifactId&gt;quarkus-flyway&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;version&gt;1.18.26&lt;/version&gt; &lt;!-- Please check for the latest version --&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\n            &lt;artifactId&gt;mapstruct&lt;/artifactId&gt;\n            &lt;version&gt;1.5.3.Final&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\n            &lt;artifactId&gt;mapstruct-processor&lt;/artifactId&gt;\n            &lt;version&gt;1.5.3.Final&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.smallrye&lt;/groupId&gt;\n            &lt;artifactId&gt;smallrye-jwt-build&lt;/artifactId&gt;\n            &lt;version&gt;4.2.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\n            &lt;artifactId&gt;quarkus-rest-client&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n    &lt;/dependencies&gt;\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;${quarkus.platform.group-id}&lt;/groupId&gt;\n                &lt;artifactId&gt;quarkus-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;${quarkus.platform.version}&lt;/version&gt;\n                &lt;extensions&gt;true&lt;/extensions&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;build&lt;/goal&gt;\n                            &lt;goal&gt;generate-code&lt;/goal&gt;\n                            &lt;goal&gt;generate-code-tests&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;${compiler-plugin.version}&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;compilerArgs&gt;\n                        &lt;arg&gt;-parameters&lt;/arg&gt;\n                    &lt;/compilerArgs&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n                &lt;version&gt;${surefire-plugin.version}&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;systemPropertyVariables&gt;\n                        &lt;java.util.logging.manager&gt;org.jboss.logmanager.LogManager&lt;/java.util.logging.manager&gt;\n                        &lt;maven.home&gt;${maven.home}&lt;/maven.home&gt;\n                    &lt;/systemPropertyVariables&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-failsafe-plugin&lt;/artifactId&gt;\n                &lt;version&gt;${surefire-plugin.version}&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;integration-test&lt;/goal&gt;\n                            &lt;goal&gt;verify&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;systemPropertyVariables&gt;\n                                &lt;native.image.path&gt;${project.build.directory}/${project.build.finalName}-runner&lt;/native.image.path&gt;\n                                &lt;java.util.logging.manager&gt;org.jboss.logmanager.LogManager&lt;/java.util.logging.manager&gt;\n                                &lt;maven.home&gt;${maven.home}&lt;/maven.home&gt;\n                            &lt;/systemPropertyVariables&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n    &lt;profiles&gt;\n        &lt;profile&gt;\n            &lt;id&gt;native&lt;/id&gt;\n            &lt;activation&gt;\n                &lt;property&gt;\n                    &lt;name&gt;native&lt;/name&gt;\n                &lt;/property&gt;\n            &lt;/activation&gt;\n            &lt;properties&gt;\n                &lt;skipITs&gt;false&lt;/skipITs&gt;\n                &lt;quarkus.package.type&gt;native&lt;/quarkus.package.type&gt;\n            &lt;/properties&gt;\n        &lt;/profile&gt;\n    &lt;/profiles&gt;\n&lt;/project&gt;\n\n\n</code></pre>\n<p>and below is the code where I use @ApplicationScoped,</p>\n<pre class=\"lang-java prettyprint-override\"><code>import jakarta.enterprise.context.ApplicationScoped;\nimport jakarta.transaction.Transactional;\nimport jakarta.ws.rs.NotFoundException;\nimport java.util.List;\n\n@ApplicationScoped\n@Transactional\npublic class ReviewServiceImpl implements ReviewService {\n\n\n\n    @Override\n    @Transactional\n    public ReviewDto createReview(ReviewDto reviewDTO) {\n        Review review;\n        try {\n            review = Review.find(&quot;id&quot;, reviewDTO.getId()).firstResult();\n        } catch (NullPointerException e) {\n            throw new NullPointerException(&quot;Review already exists&quot;);\n        }\n        review = ReviewMapper.INSTANCE.toEntity(reviewDTO);\n        review.persist();\n        return ReviewMapper.INSTANCE.toDto(review);\n    }\n\n    @Override\n    @Transactional\n    public ReviewDto updateReview(Long id, ReviewDto reviewDTO) {\n        Review review;\n        try{\n            review = Review.find(&quot;id&quot;,id).firstResult();\n        }catch(NullPointerException e){\n            throw new NotFoundException(&quot;Review not found for id: &quot; + id);\n        }\n\n        ReviewMapper.INSTANCE.updateFromDto(reviewDTO, review);\n        review.persist();\n\n        return ReviewMapper.INSTANCE.toDto(review);\n    }\n\n    @Override\n    public ReviewDto getReviewById(Long reviewId) {\n        Review review = Review.findById(reviewId);\n        if(review == null){\n        throw new NotFoundException(&quot;Review not found for id: &quot; + reviewId);\n        }\n        return ReviewMapper.INSTANCE.toDto(review);\n\n    }\n\n    @Override\n    public List&lt;ReviewDto&gt; getReviewsByDoctorId(Long doctorId) {\n        List&lt;Review&gt; reviews = Review.find(&quot;select r from Review r join r.reviewDoctorMaps d where d.doctor_id =?1&quot;,doctorId).list();\n        return ReviewMapper.INSTANCE.toDtoList(reviews);\n    }\n\n    @Override\n    public List&lt;ReviewDto&gt; getAllReviews() {\n        List&lt;Review&gt; reviews = Review.listAll();\n        return ReviewMapper.INSTANCE.toDtoList(reviews);\n    }\n}\n\n\n</code></pre>\n<p>I'm already using jakarta.enterprise.context.ApplicationScoped then why it is asking me to use javax packages ?</p>\n<p>there is no javax.* dependency used in the code, nor in any super class.</p>\n<p>this is log when I run the application</p>\n<pre class=\"lang-none prettyprint-override\"><code>/Library/Java/JavaVirtualMachines/graalvm-17/Contents/Home/bin/java -Dmaven.multiModuleProjectDirectory=/Users/maulikdave/NetBeansProjects/hc/hc-web -Dmaven.home=/opt/homebrew/Cellar/maven/3.9.2/libexec -Dclassworlds.conf=/opt/homebrew/Cellar/maven/3.9.2/libexec/bin/m2.conf &quot;-javaagent:/Applications/IntelliJ IDEA CE.app/Contents/lib/idea_rt.jar=58339:/Applications/IntelliJ IDEA CE.app/Contents/bin&quot; -Dfile.encoding=UTF-8 -classpath /opt/homebrew/Cellar/maven/3.9.2/libexec/boot/plexus-classworlds.license:/opt/homebrew/Cellar/maven/3.9.2/libexec/boot/plexus-classworlds-2.7.0.jar org.codehaus.classworlds.Launcher -Didea.version=2022.2.5 clean compile quarkus:dev\n[INFO] Scanning for projects...\n[INFO] \n[INFO] ----------------&lt; com.abcd.mpt:hc-web &gt;----------------\n[INFO] Building hc-web 1.0.0-SNAPSHOT\n[INFO]   from pom.xml\n[INFO] --------------------------------[ jar ]---------------------------------\n[INFO] \n[INFO] --- clean:3.2.0:clean (default-clean) @ hc-web ---\n[INFO] Deleting /Users/maulikdave/NetBeansProjects/hc/hc-web/target\n[INFO] \n[INFO] --- resources:3.3.0:resources (default-resources) @ hc-web ---\n[INFO] Copying 42 resources\n[INFO] \n[INFO] --- quarkus:3.1.1.Final:generate-code (default) @ hc-web ---\n[INFO] \n[INFO] --- compiler:3.11.0:compile (default-compile) @ hc-web ---\n[INFO] Changes detected - recompiling the module! :source\n[INFO] Compiling 79 source files with javac [debug release 17] to target/classes\n[INFO] -------------------------------------------------------------\n[ERROR] COMPILATION ERROR : \n[INFO] -------------------------------------------------------------\n[ERROR] Couldn't find type javax.enterprise.context.ApplicationScoped. Are you missing a dependency on your classpath?\n[ERROR] Couldn't find type javax.enterprise.context.ApplicationScoped. Are you missing a dependency on your classpath?\n[ERROR] Couldn't find type javax.enterprise.context.ApplicationScoped. Are you missing a dependency on your classpath?\n[ERROR] Couldn't find type javax.enterprise.context.ApplicationScoped. Are you missing a dependency on your classpath?\n[ERROR] Couldn't find type javax.enterprise.context.ApplicationScoped. Are you missing a dependency on your classpath?\n[ERROR] Couldn't find type javax.enterprise.context.ApplicationScoped. Are you missing a dependency on your classpath?\n[ERROR] Couldn't find type javax.enterprise.context.ApplicationScoped. Are you missing a dependency on your classpath?\n[ERROR] Couldn't find type javax.enterprise.context.ApplicationScoped. Are you missing a dependency on your classpath?\n[ERROR] Couldn't find type javax.enterprise.context.ApplicationScoped. Are you missing a dependency on your classpath?\n[ERROR] Couldn't find type javax.enterprise.context.ApplicationScoped. Are you missing a dependency on your classpath?\n[INFO] 10 errors \n[INFO] -------------------------------------------------------------\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  4.029 s\n[INFO] Finished at: 2023-06-14T17:02:46+05:30\n[INFO] ------------------------------------------------------------------------\n[WARNING] \n[WARNING] Plugin validation issues were detected in 1 plugin(s)\n[WARNING] \n[WARNING]  * org.apache.maven.plugins:maven-resources-plugin:3.3.0\n[WARNING] \n[WARNING] For more or less details, use 'maven.plugin.validation' property with one of the values (case insensitive): [BRIEF, DEFAULT, VERBOSE]\n[WARNING] \n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.11.0:compile (default-compile) on project hc-web: Compilation failure: Compilation failure: \n[ERROR] Couldn't find type javax.enterprise.context.ApplicationScoped. Are you missing a dependency on your classpath?\n[ERROR] Couldn't find type javax.enterprise.context.ApplicationScoped. Are you missing a dependency on your classpath?\n[ERROR] Couldn't find type javax.enterprise.context.ApplicationScoped. Are you missing a dependency on your classpath?\n[ERROR] Couldn't find type javax.enterprise.context.ApplicationScoped. Are you missing a dependency on your classpath?\n[ERROR] Couldn't find type javax.enterprise.context.ApplicationScoped. Are you missing a dependency on your classpath?\n[ERROR] Couldn't find type javax.enterprise.context.ApplicationScoped. Are you missing a dependency on your classpath?\n[ERROR] Couldn't find type javax.enterprise.context.ApplicationScoped. Are you missing a dependency on your classpath?\n[ERROR] Couldn't find type javax.enterprise.context.ApplicationScoped. Are you missing a dependency on your classpath?\n[ERROR] Couldn't find type javax.enterprise.context.ApplicationScoped. Are you missing a dependency on your classpath?\n[ERROR] Couldn't find type javax.enterprise.context.ApplicationScoped. Are you missing a dependency on your classpath?\n[ERROR] -&gt; [Help 1]\n[ERROR] \n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR] \n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException\n\n</code></pre>\n"},{"tags":["java","android","exception","android-view","android-5.0-lollipop"],"comments":[{"owner":{"account_id":4514263,"reputation":7896,"user_id":3669559,"accept_rate":75,"display_name":"Oğuzhan D&#246;ng&#252;l"},"score":0,"creation_date":1494263964,"post_id":43748222,"comment_id":74742901,"body_markdown":"Are you developing a native app or other platforms like Xamarin?","body":"Are you developing a native app or other platforms like Xamarin?"},{"owner":{"account_id":361931,"reputation":8796,"user_id":704836,"accept_rate":63,"display_name":"casolorz"},"score":0,"creation_date":1494267284,"post_id":43748222,"comment_id":74744781,"body_markdown":"Normal Android with Java.","body":"Normal Android with Java."},{"owner":{"account_id":6473006,"reputation":27420,"user_id":6296561,"accept_rate":95,"display_name":"Zoe is on strike"},"score":0,"creation_date":1494772547,"post_id":43748222,"comment_id":74960129,"body_markdown":"I assume you have some kind of comprehension as to where this happens. Copy-paste the code and layout for the relevant activity into your question","body":"I assume you have some kind of comprehension as to where this happens. Copy-paste the code and layout for the relevant activity into your question"},{"owner":{"account_id":361931,"reputation":8796,"user_id":704836,"accept_rate":63,"display_name":"casolorz"},"score":0,"creation_date":1494811317,"post_id":43748222,"comment_id":74970616,"body_markdown":"I don&#39;t really know where it happens because the crash report from Crashlytics doesn&#39;t give me any more information and it has never happened to me and no user has ever reported it.  That being said, this answer http://stackoverflow.com/a/43853650/704836 might be onto something as I do use `makeSceneTransitionAnimation` once in my code for a very simple `ImageView`. Since I don&#39;t know of any users experiencing the issue, it is a bit hard to test it.","body":"I don&#39;t really know where it happens because the crash report from Crashlytics doesn&#39;t give me any more information and it has never happened to me and no user has ever reported it.  That being said, this answer <a href=\"http://stackoverflow.com/a/43853650/704836\">stackoverflow.com/a/43853650/704836</a> might be onto something as I do use <code>makeSceneTransitionAnimation</code> once in my code for a very simple <code>ImageView</code>. Since I don&#39;t know of any users experiencing the issue, it is a bit hard to test it."},{"owner":{"account_id":4903022,"reputation":1398,"user_id":3950602,"display_name":"Alexey Ozerov"},"score":0,"creation_date":1519659314,"post_id":43748222,"comment_id":84988689,"body_markdown":"This happens mostly with FireOS devices. No idea why.","body":"This happens mostly with FireOS devices. No idea why."}],"answers":[{"comments":[{"owner":{"account_id":361931,"reputation":8796,"user_id":704836,"accept_rate":63,"display_name":"casolorz"},"score":0,"creation_date":1494267270,"post_id":43853650,"comment_id":74744770,"body_markdown":"I do have one call to `makeSceneTransitionAnimation` in which I pass a simple `ImageView`. Thanks for link.","body":"I do have one call to <code>makeSceneTransitionAnimation</code> in which I pass a simple <code>ImageView</code>. Thanks for link."},{"owner":{"account_id":980790,"reputation":8154,"user_id":1000551,"display_name":"Vadim Kotov"},"score":0,"creation_date":1624543663,"post_id":43853650,"comment_id":120392578,"body_markdown":"@casolorz Did it stop the crashes? Can you share your experience?","body":"@casolorz Did it stop the crashes? Can you share your experience?"},{"owner":{"account_id":361931,"reputation":8796,"user_id":704836,"accept_rate":63,"display_name":"casolorz"},"score":0,"creation_date":1624561894,"post_id":43853650,"comment_id":120399823,"body_markdown":"This specific crash has gone away over time (this question is from 2017) but I don&#39;t remember if it was because of that `makeSceneTransitionAnimation` or if it just went away on its own with time.","body":"This specific crash has gone away over time (this question is from 2017) but I don&#39;t remember if it was because of that <code>makeSceneTransitionAnimation</code> or if it just went away on its own with time."}],"tags":[],"owner":{"account_id":6236664,"reputation":5308,"user_id":4851751,"accept_rate":100,"display_name":"Doron Yakovlev Golani"},"comment_count":3,"down_vote_count":1,"up_vote_count":12,"is_accepted":false,"score":11,"last_activity_date":1494263984,"creation_date":1494263984,"answer_id":43853650,"question_id":43748222,"body_markdown":"This issue seems related to https://stackoverflow.com/questions/26626344/scene-transition-with-hero-elements-throws-layer-exceeds-max-dimensions-support. \r\n\r\nYou should look at any activity transaction you are making and particularly for the effects of `makeSceneTransitionAnimation()`.","title":"java.lang.IllegalStateException: Unable to create layer for v","body":"<p>This issue seems related to <a href=\"https://stackoverflow.com/questions/26626344/scene-transition-with-hero-elements-throws-layer-exceeds-max-dimensions-support\">Scene transition with hero elements throws Layer exceeds max. dimensions supported by the GPU</a>. </p>\n\n<p>You should look at any activity transaction you are making and particularly for the effects of <code>makeSceneTransitionAnimation()</code>.</p>\n"},{"comments":[{"owner":{"account_id":361931,"reputation":8796,"user_id":704836,"accept_rate":63,"display_name":"casolorz"},"score":0,"creation_date":1539640572,"post_id":52823889,"comment_id":92567471,"body_markdown":"But where do I put that? I don&#39;t even know what activity it is happening under.","body":"But where do I put that? I don&#39;t even know what activity it is happening under."},{"owner":{"account_id":7745683,"reputation":709,"user_id":5863563,"display_name":"gabhor"},"score":0,"creation_date":1539689420,"post_id":52823889,"comment_id":92584861,"body_markdown":"Yes, it&#39;s hard to find because log doesn&#39;t contain any information about that view element. I suggest you go through your app screen by screen and try to figure out which activity/fragment contains that view because the app is going to crash when it tries to render it.\nAnother way is using `git bisect` if you source controlled your project with git. First you have to find a previous commit when it worked, then you can find the commit - which contains the buggy part - with _bisect_. Here you can find more information about how to use _bisect_: https://git-scm.com/docs/git-bisect","body":"Yes, it&#39;s hard to find because log doesn&#39;t contain any information about that view element. I suggest you go through your app screen by screen and try to figure out which activity/fragment contains that view because the app is going to crash when it tries to render it. Another way is using <code>git bisect</code> if you source controlled your project with git. First you have to find a previous commit when it worked, then you can find the commit - which contains the buggy part - with <i>bisect</i>. Here you can find more information about how to use <i>bisect</i>: <a href=\"https://git-scm.com/docs/git-bisect\" rel=\"nofollow noreferrer\">git-scm.com/docs/git-bisect</a>"}],"tags":[],"owner":{"account_id":7745683,"reputation":709,"user_id":5863563,"display_name":"gabhor"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1539633395,"creation_date":1539633395,"answer_id":52823889,"question_id":43748222,"body_markdown":"I also faced this issue when I tried to create a simple View. I just had to set `android:forceHasOverlappingRendering=&quot;false&quot;` in its xml. Note that it only works from API level 24.","title":"java.lang.IllegalStateException: Unable to create layer for v","body":"<p>I also faced this issue when I tried to create a simple View. I just had to set <code>android:forceHasOverlappingRendering=\"false\"</code> in its xml. Note that it only works from API level 24.</p>\n"},{"comments":[{"owner":{"account_id":252173,"reputation":503,"user_id":530026,"display_name":"inteist"},"score":12,"creation_date":1582396291,"post_id":58310313,"comment_id":106766231,"body_markdown":"this is not a good solution. It makes everything super jagged and slow. No reason to punish everyone because Samsun and LG screwed up a few of their models.","body":"this is not a good solution. It makes everything super jagged and slow. No reason to punish everyone because Samsun and LG screwed up a few of their models."}],"tags":[],"owner":{"account_id":7864640,"reputation":2014,"user_id":10109704,"display_name":"Hadi Ahmadi"},"comment_count":1,"down_vote_count":2,"up_vote_count":5,"is_accepted":false,"score":3,"last_activity_date":1585636639,"creation_date":1570646314,"answer_id":58310313,"question_id":43748222,"body_markdown":"adding `android:hardwareAccelerated=&quot;false&quot;` to `application` tag in `manifest` solve my problem\r\n\r\nEDIT: \r\nplease see comment by @inteist ","title":"java.lang.IllegalStateException: Unable to create layer for v","body":"<p>adding <code>android:hardwareAccelerated=\"false\"</code> to <code>application</code> tag in <code>manifest</code> solve my problem</p>\n\n<p>EDIT: \nplease see comment by @inteist </p>\n"},{"tags":[],"owner":{"account_id":12632292,"reputation":1755,"user_id":9183189,"display_name":"Pradip Tilala"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1599559022,"creation_date":1578555620,"answer_id":59659234,"question_id":43748222,"body_markdown":"    Fatal Exception: java.lang.IllegalStateException: Unable to create layer for LinearLayout, size 1080x4160 exceeds max size 4096\r\n           at android.os.MessageQueue.nativePollOnce(MessageQueue.java)\r\n           at android.os.MessageQueue.next(MessageQueue.java:323)\r\n           at android.os.Looper.loop(Looper.java:136)\r\n           at android.app.ActivityThread.main(ActivityThread.java:6186)\r\n           at java.lang.reflect.Method.invoke(Method.java)\r\n           at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:889)\r\n           at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:779)\r\n\r\nI have same issue for RecyclerView inside NestedScrollView\r\n\r\nRecyclerView &lt;- inside NestedScrollView\r\n\r\n**Solution:**\r\nAs RecyclerView inside scrollview or nestedscrollview try to load all items at once. As RecyclerView loads all items at once, also loads items that are not visible right now on screen. If you put log inside onBindViewHolder of RecylerView you find that all items loads at the start instead of based on the visibility of the item.\r\n\r\nThis causes UI to load more than 1-1.5 screens of content at a time. This causes the parent LinearLayout (inside the ScrollView) to throw exception. It&#39;s suggested to paginate your content and load no more than 1-1.5 screens of content at a time. [I had also issue related to same with Recyclerview without animation](https://android--kotlin.blogspot.com/2019/07/android-java-lang-illegalstateexception-unable-to-create-layer-for-linearlayout.html).","title":"java.lang.IllegalStateException: Unable to create layer for v","body":"<pre><code>Fatal Exception: java.lang.IllegalStateException: Unable to create layer for LinearLayout, size 1080x4160 exceeds max size 4096\n       at android.os.MessageQueue.nativePollOnce(MessageQueue.java)\n       at android.os.MessageQueue.next(MessageQueue.java:323)\n       at android.os.Looper.loop(Looper.java:136)\n       at android.app.ActivityThread.main(ActivityThread.java:6186)\n       at java.lang.reflect.Method.invoke(Method.java)\n       at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:889)\n       at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:779)\n</code></pre>\n<p>I have same issue for RecyclerView inside NestedScrollView</p>\n<p>RecyclerView &lt;- inside NestedScrollView</p>\n<p><strong>Solution:</strong>\nAs RecyclerView inside scrollview or nestedscrollview try to load all items at once. As RecyclerView loads all items at once, also loads items that are not visible right now on screen. If you put log inside onBindViewHolder of RecylerView you find that all items loads at the start instead of based on the visibility of the item.</p>\n<p>This causes UI to load more than 1-1.5 screens of content at a time. This causes the parent LinearLayout (inside the ScrollView) to throw exception. It's suggested to paginate your content and load no more than 1-1.5 screens of content at a time. <a href=\"https://android--kotlin.blogspot.com/2019/07/android-java-lang-illegalstateexception-unable-to-create-layer-for-linearlayout.html\" rel=\"nofollow noreferrer\">I had also issue related to same with Recyclerview without animation</a>.</p>\n"},{"tags":[],"owner":{"account_id":5267547,"reputation":3135,"user_id":4206951,"accept_rate":25,"display_name":"Oush"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1617788032,"creation_date":1617788032,"answer_id":66983305,"question_id":43748222,"body_markdown":"In my case, it was a **silly mistake** and Android Studio didn&#39;t show any warning.\r\n\r\nI had a view set with the id of `@+id/myView` yet I had also set in the same view/tag `android:layout_below=@id/myView`.\r\n\r\nSomething like this:\r\n\r\n    &lt;TextView\r\n        android:id=&quot;@+id/textview&quot;\r\n       android:layout_width=&quot;match_parent&quot;\r\n       android:layout_height=&quot;wrap_content&quot;\r\n       android:layout_below=&quot;@id/textview&quot; /&gt; &lt;!-- The traitor :( --&gt;","title":"java.lang.IllegalStateException: Unable to create layer for v","body":"<p>In my case, it was a <strong>silly mistake</strong> and Android Studio didn't show any warning.</p>\n<p>I had a view set with the id of <code>@+id/myView</code> yet I had also set in the same view/tag <code>android:layout_below=@id/myView</code>.</p>\n<p>Something like this:</p>\n<pre><code>&lt;TextView\n    android:id=&quot;@+id/textview&quot;\n   android:layout_width=&quot;match_parent&quot;\n   android:layout_height=&quot;wrap_content&quot;\n   android:layout_below=&quot;@id/textview&quot; /&gt; &lt;!-- The traitor :( --&gt;\n</code></pre>\n"}],"owner":{"account_id":361931,"reputation":8796,"user_id":704836,"accept_rate":63,"display_name":"casolorz"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17945,"favorite_count":0,"down_vote_count":0,"up_vote_count":31,"answer_count":5,"score":31,"last_activity_date":1686876345,"creation_date":1493764108,"question_id":43748222,"body_markdown":"I have this exception on crashlytics and have no idea how to reproduce or what the cause might be. Does anyone have any pointers as to where I should start looking? Only affects Android 5+.\r\n\r\n    Fatal Exception: java.lang.IllegalStateException: Unable to create layer for v\r\n           at android.os.MessageQueue.nativePollOnce(MessageQueue.java)\r\n           at android.os.MessageQueue.next(MessageQueue.java:323)\r\n           at android.os.Looper.loop(Looper.java:135)\r\n           at android.app.ActivityThread.main(ActivityThread.java:5585)\r\n           at java.lang.reflect.Method.invoke(Method.java)\r\n           at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:730)\r\n           at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:620)\r\n\r\nThanks. \r\n\r\n\r\n\r\nEdit: I would like to update that it doesn&#39;t only affect Android 5, it seems to affect Android 5+","title":"java.lang.IllegalStateException: Unable to create layer for v","body":"<p>I have this exception on crashlytics and have no idea how to reproduce or what the cause might be. Does anyone have any pointers as to where I should start looking? Only affects Android 5+.</p>\n\n<pre><code>Fatal Exception: java.lang.IllegalStateException: Unable to create layer for v\n       at android.os.MessageQueue.nativePollOnce(MessageQueue.java)\n       at android.os.MessageQueue.next(MessageQueue.java:323)\n       at android.os.Looper.loop(Looper.java:135)\n       at android.app.ActivityThread.main(ActivityThread.java:5585)\n       at java.lang.reflect.Method.invoke(Method.java)\n       at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:730)\n       at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:620)\n</code></pre>\n\n<p>Thanks. </p>\n\n<p>Edit: I would like to update that it doesn't only affect Android 5, it seems to affect Android 5+</p>\n"},{"tags":["java","android","android-recyclerview","android-livedata","mutablelivedata"],"comments":[{"owner":{"account_id":17575058,"reputation":2200,"user_id":12749998,"display_name":"Kozmotronik"},"score":0,"creation_date":1686895454,"post_id":76486247,"comment_id":134863732,"body_markdown":"Your question lacks a supporting code. Try adding some supporting code in a [minimal reproducible](https://stackoverflow.com/help/minimal-reproducible-example) form. This helps us to understand and figure out your problem better.","body":"Your question lacks a supporting code. Try adding some supporting code in a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible</a> form. This helps us to understand and figure out your problem better."}],"owner":{"account_id":28714937,"reputation":3,"user_id":21989716,"display_name":"Soil Milk"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":12,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686874845,"creation_date":1686874845,"question_id":76486247,"body_markdown":"So I have a LiveData RVA (Recycler View Adapter), along with an `ArrayList()`, all of which are `MutableLiveData`. However, I need to let the RVA know when the `ArrayList()`&#39;s are updating, so I need to call `notifyItemInserted`, `notifyItemRangeDeleted`, etc. However, when I set multiple `Observer`s to observe the RVA in order to perform the following, since **they all had the same owner (a fragment)**, all the observers would be notified when **I needed only 1.**\r\n\r\nFor example, if I added 1 element to `ArrayList()` :\r\n\r\n**Expected**: RVA calls `notifyItemInserted` through 1 observer\r\n\r\n**What Happened** RVA calls a bunch of different methods through multiple observers\r\n\r\nI don&#39;t think this is the right way to update a `MutableLiveData` RVA, but I don&#39;t know any other way. Unlike the `ArrayList()`, where you can just use `setValue` to update it, RVA has methods that I can&#39;t call without alerting a bunch of other methods.\r\n\r\nOne way I thought about was implementing a for loop to check what modification the `ArrayList()` was receiving and then relaying that to the RVA so it could use the correct `notify....()`. But I feel like that would be inefficient, especially since the user is updating the `ArrayList()` quite often.","title":"What to do if RVA is a LiveData but multiple observers are pointing to it to call notify.....()","body":"<p>So I have a LiveData RVA (Recycler View Adapter), along with an <code>ArrayList()</code>, all of which are <code>MutableLiveData</code>. However, I need to let the RVA know when the <code>ArrayList()</code>'s are updating, so I need to call <code>notifyItemInserted</code>, <code>notifyItemRangeDeleted</code>, etc. However, when I set multiple <code>Observer</code>s to observe the RVA in order to perform the following, since <strong>they all had the same owner (a fragment)</strong>, all the observers would be notified when <strong>I needed only 1.</strong></p>\n<p>For example, if I added 1 element to <code>ArrayList()</code> :</p>\n<p><strong>Expected</strong>: RVA calls <code>notifyItemInserted</code> through 1 observer</p>\n<p><strong>What Happened</strong> RVA calls a bunch of different methods through multiple observers</p>\n<p>I don't think this is the right way to update a <code>MutableLiveData</code> RVA, but I don't know any other way. Unlike the <code>ArrayList()</code>, where you can just use <code>setValue</code> to update it, RVA has methods that I can't call without alerting a bunch of other methods.</p>\n<p>One way I thought about was implementing a for loop to check what modification the <code>ArrayList()</code> was receiving and then relaying that to the RVA so it could use the correct <code>notify....()</code>. But I feel like that would be inefficient, especially since the user is updating the <code>ArrayList()</code> quite often.</p>\n"},{"tags":["java","spring-boot","logging","logstash"],"answers":[{"tags":[],"owner":{"account_id":12256914,"reputation":59,"user_id":8945727,"display_name":"Marcos Stefani Rosa"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686873112,"creation_date":1686873112,"answer_id":76486155,"question_id":76470299,"body_markdown":"I discover that I need to use the thag appender. Thank you...\r\n\r\n```\r\n    &lt;configuration&gt;\r\n        &lt;property resource=&quot;application.properties&quot; /&gt;\r\n        &lt;appender name=&quot;CONSOLE&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\r\n            &lt;encoder class=&quot;net.logstash.logback.encoder.LoggingEventCompositeJsonEncoder&quot;&gt;\r\n                &lt;providers&gt;\r\n                    &lt;logLevel/&gt;\r\n                    &lt;pattern&gt;\r\n                        &lt;pattern&gt;\r\n                            {\r\n                                &quot;service&quot;: &quot;${spring.application.name:-}&quot;,\r\n                                &quot;traceId&quot;: &quot;%X{traceId:-}&quot;,\r\n                                &quot;spanId&quot;: &quot;%X{spanId:-}&quot;,\r\n                                &quot;pid&quot;: &quot;${PID:-}&quot;\r\n                            }\r\n                        &lt;/pattern&gt;\r\n                    &lt;/pattern&gt;\r\n                    &lt;threadName /&gt;\r\n                    &lt;loggerName&gt;\r\n                        &lt;shortenedLoggerNameLength&gt;36&lt;/shortenedLoggerNameLength&gt;\r\n                    &lt;/loggerName&gt;\r\n                    &lt;arguments&gt;\r\n                        &lt;includeNonStructuredArguments&gt;false&lt;/includeNonStructuredArguments&gt;\r\n                    &lt;/arguments&gt;\r\n                    &lt;stackTrace /&gt;\r\n                    &lt;message /&gt;\r\n                &lt;/providers&gt;\r\n            &lt;/encoder&gt;\r\n        &lt;/appender&gt;\r\n        &lt;root level=&quot;DEBUG&quot;&gt;\r\n            &lt;appender-ref ref=&quot;CONSOLE&quot; /&gt;\r\n        &lt;/root&gt;\r\n    &lt;/configuration&gt;\r\n```","title":"How to add spring property or environment variable in LoggingEventCompositeJsonEncoder?","body":"<p>I discover that I need to use the thag appender. Thank you...</p>\n<pre><code>    &lt;configuration&gt;\n        &lt;property resource=&quot;application.properties&quot; /&gt;\n        &lt;appender name=&quot;CONSOLE&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\n            &lt;encoder class=&quot;net.logstash.logback.encoder.LoggingEventCompositeJsonEncoder&quot;&gt;\n                &lt;providers&gt;\n                    &lt;logLevel/&gt;\n                    &lt;pattern&gt;\n                        &lt;pattern&gt;\n                            {\n                                &quot;service&quot;: &quot;${spring.application.name:-}&quot;,\n                                &quot;traceId&quot;: &quot;%X{traceId:-}&quot;,\n                                &quot;spanId&quot;: &quot;%X{spanId:-}&quot;,\n                                &quot;pid&quot;: &quot;${PID:-}&quot;\n                            }\n                        &lt;/pattern&gt;\n                    &lt;/pattern&gt;\n                    &lt;threadName /&gt;\n                    &lt;loggerName&gt;\n                        &lt;shortenedLoggerNameLength&gt;36&lt;/shortenedLoggerNameLength&gt;\n                    &lt;/loggerName&gt;\n                    &lt;arguments&gt;\n                        &lt;includeNonStructuredArguments&gt;false&lt;/includeNonStructuredArguments&gt;\n                    &lt;/arguments&gt;\n                    &lt;stackTrace /&gt;\n                    &lt;message /&gt;\n                &lt;/providers&gt;\n            &lt;/encoder&gt;\n        &lt;/appender&gt;\n        &lt;root level=&quot;DEBUG&quot;&gt;\n            &lt;appender-ref ref=&quot;CONSOLE&quot; /&gt;\n        &lt;/root&gt;\n    &lt;/configuration&gt;\n</code></pre>\n"}],"owner":{"account_id":12256914,"reputation":59,"user_id":8945727,"display_name":"Marcos Stefani Rosa"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":120,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686873112,"creation_date":1686719647,"question_id":76470299,"body_markdown":"I have the configuration below. However, I need to put an environment variable after the LogLevel as a specific field. I don&#39;t know if it makes it easier, but I have this environment variable mapped in the `application.properties` file.\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;configuration&gt;\r\n    &lt;appender name=&quot;CONSOLE&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\r\n        &lt;encoder class=&quot;net.logstash.logback.encoder.LoggingEventCompositeJsonEncoder&quot;&gt;\r\n            &lt;providers&gt;\r\n                &lt;threadName /&gt;\r\n                &lt;logLevel /&gt;\r\n                &lt;loggerName&gt;\r\n                    &lt;shortenedLoggerNameLength&gt;36&lt;/shortenedLoggerNameLength&gt;\r\n                &lt;/loggerName&gt;\r\n                &lt;arguments&gt;\r\n                    &lt;includeNonStructuredArguments&gt;false&lt;/includeNonStructuredArguments&gt;\r\n                &lt;/arguments&gt;\r\n                &lt;stackTrace /&gt;\r\n                &lt;message /&gt;\r\n            &lt;/providers&gt;\r\n        &lt;/encoder&gt;\r\n    &lt;/appender&gt;\r\n\r\n    &lt;root level=&quot;DEBUG&quot;&gt;\r\n        &lt;appender-ref ref=&quot;CONSOLE&quot; /&gt;\r\n    &lt;/root&gt;\r\n&lt;/configuration&gt;\r\n```","title":"How to add spring property or environment variable in LoggingEventCompositeJsonEncoder?","body":"<p>I have the configuration below. However, I need to put an environment variable after the LogLevel as a specific field. I don't know if it makes it easier, but I have this environment variable mapped in the <code>application.properties</code> file.</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;configuration&gt;\n    &lt;appender name=&quot;CONSOLE&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\n        &lt;encoder class=&quot;net.logstash.logback.encoder.LoggingEventCompositeJsonEncoder&quot;&gt;\n            &lt;providers&gt;\n                &lt;threadName /&gt;\n                &lt;logLevel /&gt;\n                &lt;loggerName&gt;\n                    &lt;shortenedLoggerNameLength&gt;36&lt;/shortenedLoggerNameLength&gt;\n                &lt;/loggerName&gt;\n                &lt;arguments&gt;\n                    &lt;includeNonStructuredArguments&gt;false&lt;/includeNonStructuredArguments&gt;\n                &lt;/arguments&gt;\n                &lt;stackTrace /&gt;\n                &lt;message /&gt;\n            &lt;/providers&gt;\n        &lt;/encoder&gt;\n    &lt;/appender&gt;\n\n    &lt;root level=&quot;DEBUG&quot;&gt;\n        &lt;appender-ref ref=&quot;CONSOLE&quot; /&gt;\n    &lt;/root&gt;\n&lt;/configuration&gt;\n</code></pre>\n"},{"tags":["java","arrays"],"answers":[{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1686871206,"creation_date":1686871206,"answer_id":76486055,"question_id":76486039,"body_markdown":"From within the _Employee_ class constructor methods, you&#39;re initializing a _local variable_, as opposed to assigning the _class variable_.\r\n\r\n```java\r\ndouble[] weeklyHours = new double[DEFAULT_WEEKS];\r\n```\r\n\r\n```java\r\ndouble[] weeklyHours = new double[numWeeks];\r\n```\r\n\r\nJust remove the declaration type, to access the _class variable_.\r\n\r\n```java\r\nweeklyHours = new double[DEFAULT_WEEKS];\r\n```\r\n\r\n```java\r\nweeklyHours = new double[numWeeks];\r\n```","title":"Cannot read the array length because &quot;this.weeklyHours&quot; is null","body":"<p>From within the <em>Employee</em> class constructor methods, you're initializing a <em>local variable</em>, as opposed to assigning the <em>class variable</em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>double[] weeklyHours = new double[DEFAULT_WEEKS];\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>double[] weeklyHours = new double[numWeeks];\n</code></pre>\n<p>Just remove the declaration type, to access the <em>class variable</em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>weeklyHours = new double[DEFAULT_WEEKS];\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>weeklyHours = new double[numWeeks];\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1686871244,"creation_date":1686871244,"answer_id":76486058,"question_id":76486039,"body_markdown":"You have the same bug in both constructors. You are ***shadowing*** the field with a new local variable. Use `this` like you did with the other fields to avoid this class of error.\r\n\r\n    public Employee(String name, double salary) {\r\n        this.name = name;\r\n        this.salary = salary;\r\n        // double[] weeklyHours = new double[DEFAULT_WEEKS];\r\n        this.weeklyHours = new double[DEFAULT_WEEKS];\r\n    }\r\n\r\n    public Employee(String name, double salary, int numWeeks) {\r\n        this.name = name;\r\n        this.salary = salary;\r\n        // double[] weeklyHours = new double[numWeeks];\r\n        this.weeklyHours = new double[numWeeks];\r\n    }\r\n\r\nYou could replace the first constructor with\r\n\r\n    public Employee(String name, double salary) {\r\n        this(name, salary, DEFAULT_WEEKS);\r\n    }","title":"Cannot read the array length because &quot;this.weeklyHours&quot; is null","body":"<p>You have the same bug in both constructors. You are <em><strong>shadowing</strong></em> the field with a new local variable. Use <code>this</code> like you did with the other fields to avoid this class of error.</p>\n<pre><code>public Employee(String name, double salary) {\n    this.name = name;\n    this.salary = salary;\n    // double[] weeklyHours = new double[DEFAULT_WEEKS];\n    this.weeklyHours = new double[DEFAULT_WEEKS];\n}\n\npublic Employee(String name, double salary, int numWeeks) {\n    this.name = name;\n    this.salary = salary;\n    // double[] weeklyHours = new double[numWeeks];\n    this.weeklyHours = new double[numWeeks];\n}\n</code></pre>\n<p>You could replace the first constructor with</p>\n<pre><code>public Employee(String name, double salary) {\n    this(name, salary, DEFAULT_WEEKS);\n}\n</code></pre>\n"}],"owner":{"account_id":28830326,"reputation":1,"user_id":22080926,"display_name":"jjDestroyer4"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1686873842,"accepted_answer_id":76486055,"answer_count":2,"score":-1,"last_activity_date":1686871813,"creation_date":1686870848,"question_id":76486039,"body_markdown":"I am getting a `java.lang.NullPointerException` error for my `calculateTotalPay` method and `calculateAveragePay` method. The error message states that it cannot read the array length because `this.weeklyHours` is `null`. \r\n\r\n```java\r\npublic double calculateAveragePay() {\r\n  double averagePay = 0;\r\n  double totalPay = 0;\r\n // totalPay = calculateTotalPay();\r\n\r\n  averagePay = totalPay / weeklyHours.length;\r\n  return averagePay;\r\n}\r\n\r\npublic double calculateTotalPay() {\r\n  int totalAmount = 0;\r\n // for (int index = 0; index &lt; weeklyHours.length; index++)\r\n    totalAmount += weeklyHours[index];\r\n  return totalAmount;\r\n} \r\n```\r\n\r\n\r\n    public class Employee {\r\n    \tprivate static final int DEFAULT_WEEKS = 52;\r\n    \tprivate String name;\r\n    \tprivate double salary;\r\n    \tprivate double[] weeklyHours;\r\n    \t//private int numWeeks;\r\n    \r\n    \tpublic Employee(String name, double salary) {\r\n    \t\tthis.name = name;\r\n    \t\tthis.salary = salary;\r\n    \t\tdouble[] weeklyHours = new double[DEFAULT_WEEKS];\r\n    \t}\r\n    \r\n    \tpublic Employee(String name, double salary, int numWeeks) {\r\n    \t\tthis.name = name;\r\n    \t\tthis.salary = salary;\r\n    \t\tdouble[] weeklyHours = new double[numWeeks];\r\n    \t}\r\n\r\n","title":"Cannot read the array length because &quot;this.weeklyHours&quot; is null","body":"<p>I am getting a <code>java.lang.NullPointerException</code> error for my <code>calculateTotalPay</code> method and <code>calculateAveragePay</code> method. The error message states that it cannot read the array length because <code>this.weeklyHours</code> is <code>null</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public double calculateAveragePay() {\n  double averagePay = 0;\n  double totalPay = 0;\n // totalPay = calculateTotalPay();\n\n  averagePay = totalPay / weeklyHours.length;\n  return averagePay;\n}\n\npublic double calculateTotalPay() {\n  int totalAmount = 0;\n // for (int index = 0; index &lt; weeklyHours.length; index++)\n    totalAmount += weeklyHours[index];\n  return totalAmount;\n} \n</code></pre>\n<pre><code>public class Employee {\n    private static final int DEFAULT_WEEKS = 52;\n    private String name;\n    private double salary;\n    private double[] weeklyHours;\n    //private int numWeeks;\n\n    public Employee(String name, double salary) {\n        this.name = name;\n        this.salary = salary;\n        double[] weeklyHours = new double[DEFAULT_WEEKS];\n    }\n\n    public Employee(String name, double salary, int numWeeks) {\n        this.name = name;\n        this.salary = salary;\n        double[] weeklyHours = new double[numWeeks];\n    }\n</code></pre>\n"},{"tags":["java","io"],"comments":[{"owner":{"account_id":336748,"reputation":22028,"user_id":664577,"accept_rate":98,"display_name":"Anthony Accioly"},"score":0,"creation_date":1306627158,"post_id":6165104,"comment_id":7164690,"body_markdown":"You guys are right. Please Disregard","body":"You guys are right. Please Disregard"},{"owner":{"account_id":294022,"reputation":115930,"user_id":597657,"accept_rate":99,"display_name":"Eng.Fouad"},"score":0,"creation_date":1306629932,"post_id":6165104,"comment_id":7164891,"body_markdown":"I wonder what if I have a file with 8388609 terabytes, at least in the future :\\","body":"I wonder what if I have a file with 8388609 terabytes, at least in the future :\\"},{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1306657657,"post_id":6165104,"comment_id":7167023,"body_markdown":"There is likely to be a natural limit to how large a useful file can be.  Disks are getting bigger/cheaper but not so much faster. A typical disk can write 40 MB/s and a 1 GB file takes about half a minute, but a 1 TB =&gt; 8 hours, 1 PT =&gt; 1 year. Disk speeds may have improved by about 140x in the last 30 years, but it is hard to imagine a one peta-byte will be very practical and certainly not a 1 exa-byte file.","body":"There is likely to be a natural limit to how large a useful file can be.  Disks are getting bigger/cheaper but not so much faster. A typical disk can write 40 MB/s and a 1 GB file takes about half a minute, but a 1 TB =&gt; 8 hours, 1 PT =&gt; 1 year. Disk speeds may have improved by about 140x in the last 30 years, but it is hard to imagine a one peta-byte will be very practical and certainly not a 1 exa-byte file."}],"answers":[{"tags":[],"owner":{"account_id":179030,"reputation":13845,"user_id":411393,"accept_rate":100,"display_name":"QuantumMechanic"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1306627061,"creation_date":1306627061,"answer_id":6165114,"question_id":6165104,"body_markdown":"According to the [`File` API doc](http://download.oracle.com/javase/6/docs/api/java/io/File.html), `length()` returns `long`, not `int`.\r\n","title":"Getting the size of a big file","body":"<p>According to the <a href=\"http://download.oracle.com/javase/6/docs/api/java/io/File.html\" rel=\"nofollow\"><code>File</code> API doc</a>, <code>length()</code> returns <code>long</code>, not <code>int</code>.</p>\n"},{"tags":[],"owner":{"account_id":378721,"reputation":47508,"user_id":731620,"accept_rate":80,"display_name":"ratchet freak"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1306627088,"creation_date":1306627088,"answer_id":6165117,"question_id":6165104,"body_markdown":"`File.length()` returns a long ","title":"Getting the size of a big file","body":"<p><code>File.length()</code> returns a long </p>\n"},{"tags":[],"owner":{"account_id":31682,"reputation":22471,"user_id":87197,"accept_rate":81,"display_name":"Chris Dennett"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1306627226,"creation_date":1306627226,"answer_id":6165125,"question_id":6165104,"body_markdown":"I believe that `File.length()` returns a `long`? That should be sufficient.","title":"Getting the size of a big file","body":"<p>I believe that <code>File.length()</code> returns a <code>long</code>? That should be sufficient.</p>\n"}],"owner":{"account_id":336748,"reputation":22028,"user_id":664577,"accept_rate":98,"display_name":"Anthony Accioly"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1609,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":6165117,"answer_count":3,"score":1,"last_activity_date":1686870185,"creation_date":1306626958,"question_id":6165104,"body_markdown":"Pretty basic stuff but I can&#39;t find a way to read the size of a file with several gigabytes.\r\nI&#39;m aware of the method `File.length`.\r\nBut int max value is **2,147,483,647**.\r\nIs there a standard API method to read the size of a file with more than 2 gigabytes (maybe something that returns the length in kilobytes, or with Long / BigInteger)? If there isn&#39;t, which libraries are used to do that?\r\n\r\n**Update**\r\n\r\nPeople kindly pointed out that I should RTFM. Long max size can fit 8388608 terabytes. :)\r\n\r\n","title":"Getting the size of a big file","body":"<p>Pretty basic stuff but I can't find a way to read the size of a file with several gigabytes.\nI'm aware of the method <code>File.length</code>.\nBut int max value is <strong>2,147,483,647</strong>.\nIs there a standard API method to read the size of a file with more than 2 gigabytes (maybe something that returns the length in kilobytes, or with Long / BigInteger)? If there isn't, which libraries are used to do that?</p>\n<p><strong>Update</strong></p>\n<p>People kindly pointed out that I should RTFM. Long max size can fit 8388608 terabytes. :)</p>\n"},{"tags":["java","file","maven","glassfish","reload"],"answers":[{"tags":[],"owner":{"account_id":138128,"reputation":294236,"user_id":342852,"accept_rate":97,"display_name":"Sean Patrick Floyd"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1306447090,"creation_date":1306447090,"answer_id":6145617,"question_id":6145578,"body_markdown":"These possibilities come to mind:\r\n\r\n - Use the [antrun plugin][1] and the\r\n   [`&lt;touch&gt;`][2] task\r\n - [Use the GMaven plugin][3] and touch the file programmatically using Groovy\r\n\r\n\r\n  [1]: http://maven.apache.org/plugins/maven-antrun-plugin/\r\n  [2]: http://ant.apache.org/manual/Tasks/touch.html\r\n  [3]: http://docs.codehaus.org/display/GMAVEN/Executing+Groovy+Code","title":"Maven goal / plugin to touch a file","body":"<p>These possibilities come to mind:</p>\n\n<ul>\n<li>Use the <a href=\"http://maven.apache.org/plugins/maven-antrun-plugin/\">antrun plugin</a> and the\n<a href=\"http://ant.apache.org/manual/Tasks/touch.html\"><code>&lt;touch&gt;</code></a> task</li>\n<li><a href=\"http://docs.codehaus.org/display/GMAVEN/Executing+Groovy+Code\">Use the GMaven plugin</a> and touch the file programmatically using Groovy</li>\n</ul>\n"}],"owner":{"account_id":336748,"reputation":22028,"user_id":664577,"accept_rate":98,"display_name":"Anthony Accioly"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3310,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":6145617,"answer_count":1,"score":8,"last_activity_date":1686870129,"creation_date":1306446841,"question_id":6145578,"body_markdown":"I&#39;m looking for a way to touch a file using maven. \r\nThe specific user case for this is touching a `.reload` file in order to force Glassfish to redeploy an Application.\r\n\r\nIs there any built-in functionality or plugin able to touch a file?","title":"Maven goal / plugin to touch a file","body":"<p>I'm looking for a way to touch a file using maven.\nThe specific user case for this is touching a <code>.reload</code> file in order to force Glassfish to redeploy an Application.</p>\n<p>Is there any built-in functionality or plugin able to touch a file?</p>\n"},{"tags":["java","android","webview","android-webview"],"owner":{"account_id":16512724,"reputation":67,"user_id":11931029,"display_name":"dan123123"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686868773,"creation_date":1686868773,"question_id":76485914,"body_markdown":"I&#39;m trying to copy a webview&#39;s texture into a 500x500 pixel OpenGL texture using a bitmap and canvas (which are both 500x500 as well). I call the `draw(Canvas canvas)` method on the webview, but it doesn&#39;t fit properly into the 500x500 texture because the webview seems to be the dimensions of the device&#39;s screen. Is there a way to set the dimensions of the webview, ideally in pixels, so it fits properly into the texture?  \r\n\r\nI attempted to set `setUseWideViewPort` to `true` and adjusted the width and height in the meta tag in HTML, which had some effect on the dimensions. Setting the width and height to a large value (6000) seemed to fit more content into the texture, but I don&#39;t know how to perfectly fit the webview into it. Thanks for any help! ","title":"Specifying the width and height of a webview in android","body":"<p>I'm trying to copy a webview's texture into a 500x500 pixel OpenGL texture using a bitmap and canvas (which are both 500x500 as well). I call the <code>draw(Canvas canvas)</code> method on the webview, but it doesn't fit properly into the 500x500 texture because the webview seems to be the dimensions of the device's screen. Is there a way to set the dimensions of the webview, ideally in pixels, so it fits properly into the texture?</p>\n<p>I attempted to set <code>setUseWideViewPort</code> to <code>true</code> and adjusted the width and height in the meta tag in HTML, which had some effect on the dimensions. Setting the width and height to a large value (6000) seemed to fit more content into the texture, but I don't know how to perfectly fit the webview into it. Thanks for any help!</p>\n"},{"tags":["java","generics"],"comments":[{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1686859966,"post_id":76484386,"comment_id":134860077,"body_markdown":"I never use this, because of this specific reason, _it doesn&#39;t make sense_.  It&#39;s a hack, almost.  You&#39;re simply supplying the object type to the compiler.  So, _1_, the array size doesn&#39;t matter, and _3_, the syntax must comply.","body":"I never use this, because of this specific reason, <i>it doesn&#39;t make sense</i>.  It&#39;s a hack, almost.  You&#39;re simply supplying the object type to the compiler.  So, <i>1</i>, the array size doesn&#39;t matter, and <i>3</i>, the syntax must comply."}],"answers":[{"tags":[],"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1686852853,"creation_date":1686852853,"answer_id":76484451,"question_id":76484386,"body_markdown":"&gt; lst.toArray(new int[0][]); - The size 0 does not matter here. Trying to understand why? I tried looking at the implementation of the toArray method inside ArrayList as well.\r\n\r\nFrom the documentation: \r\n&gt; ...If the collection fits in the specified array, it is returned therein. Otherwise, a new array is allocated with the runtime type of the specified array and the size of this collection.\r\n\r\nAny size less than `lst.size()` will result in a new array being allocated.\r\n\r\n&gt; lst.toArray(new int[lst.size()][]) - Similar to (1), I can init use lst.size(). Does it mean there is no conceptual difference between (1) and (2)\r\n\r\nPretty much.  The only difference is that the array object you passed in here will be used, not a newly allocated array.\r\n\r\n&gt; Given (1) and (2) both work correctly, I tried this lst.toArray(new int[][]) - This does not compile and gives Array initializer expected. Is it related to the grammar of Java where if you are instantiating an array, size needs to be mandatory and hence the error?\r\n\r\nThis is correct.","title":"Understanding List.java&#39;s `&lt;T&gt; T[] toArray(T[] a)` method","body":"<blockquote>\n<p>lst.toArray(new int[0][]); - The size 0 does not matter here. Trying to understand why? I tried looking at the implementation of the toArray method inside ArrayList as well.</p>\n</blockquote>\n<p>From the documentation:</p>\n<blockquote>\n<p>...If the collection fits in the specified array, it is returned therein. Otherwise, a new array is allocated with the runtime type of the specified array and the size of this collection.</p>\n</blockquote>\n<p>Any size less than <code>lst.size()</code> will result in a new array being allocated.</p>\n<blockquote>\n<p>lst.toArray(new int[lst.size()][]) - Similar to (1), I can init use lst.size(). Does it mean there is no conceptual difference between (1) and (2)</p>\n</blockquote>\n<p>Pretty much.  The only difference is that the array object you passed in here will be used, not a newly allocated array.</p>\n<blockquote>\n<p>Given (1) and (2) both work correctly, I tried this lst.toArray(new int[][]) - This does not compile and gives Array initializer expected. Is it related to the grammar of Java where if you are instantiating an array, size needs to be mandatory and hence the error?</p>\n</blockquote>\n<p>This is correct.</p>\n"},{"tags":[],"owner":{"account_id":11400015,"reputation":1904,"user_id":8357251,"display_name":"gdomo"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686853243,"creation_date":1686853243,"answer_id":76484496,"question_id":76484386,"body_markdown":"According to `toArray(T[] a)` javadoc:\r\n\r\n&gt; If the list fits in the specified array, it is returned therein.\r\n&gt; Otherwise, a new array is allocated with the runtime type of the\r\n&gt; specified array and the size of this list.\r\n\r\nSo size of passed array affects would a new array be allocated or not. Thus in practice you are either pass zero sized array (`new int[0][]` in your case), either array of size &gt;= to `lst.size()`. Passing an array of positive size, but less then list size makes no sense as it would be thrown to create a new array that fits the list. Usually programmers prefer to pass zero sized array as it easy and short.\r\n\r\nRelating to 3) - you are absolutely right, Java requires array size to be defined when you create an array.","title":"Understanding List.java&#39;s `&lt;T&gt; T[] toArray(T[] a)` method","body":"<p>According to <code>toArray(T[] a)</code> javadoc:</p>\n<blockquote>\n<p>If the list fits in the specified array, it is returned therein.\nOtherwise, a new array is allocated with the runtime type of the\nspecified array and the size of this list.</p>\n</blockquote>\n<p>So size of passed array affects would a new array be allocated or not. Thus in practice you are either pass zero sized array (<code>new int[0][]</code> in your case), either array of size &gt;= to <code>lst.size()</code>. Passing an array of positive size, but less then list size makes no sense as it would be thrown to create a new array that fits the list. Usually programmers prefer to pass zero sized array as it easy and short.</p>\n<p>Relating to 3) - you are absolutely right, Java requires array size to be defined when you create an array.</p>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686868324,"creation_date":1686860881,"answer_id":76485297,"question_id":76484386,"body_markdown":"_Technically_, you should be using a _List\\&lt;Integer\\&gt;_, and not an _int[]_.  \r\nAlthough, in Java, an array of _int_ is recognized as an _object_.&amp;nbsp; Thus, providing it as the type will work.\r\n\r\nThe _Collections Framework_ was made for use with objects, and not primitive data-types.\r\n\r\n&gt; _&quot;... The size `0` does not matter here. Trying to understand why? ...&quot;_\r\n\r\nEssentially, the compiler needs to know what the object is&amp;mdash;so _new int[0]_ will suffice.\r\n\r\n&gt; _&quot;... Does it mean there is no conceptual difference between (1) and (2) ...&quot;_\r\n\r\nMore or less, yes.\r\n\r\n&gt; _&quot;... I tried this `lst.toArray(new int[][])` ..._  \r\n&gt; _... Is it related to the grammar of Java where if you are instantiating an array, size needs to be mandatory and hence the error?&quot;_\r\n\r\nExactly, the syntax must comply.\r\n\r\nI recommend the following book, which covers this topic well&amp;mdash;the interoperability of the _Collections Framework_, objects, and arrays.  \r\n_[Java: The Complete Reference, Twelfth Edition, 12th Edition](https://www.oreilly.com/library/view/java-the-complete/9781260463422/)_.","title":"Understanding List.java&#39;s `&lt;T&gt; T[] toArray(T[] a)` method","body":"<p><em>Technically</em>, you should be using a <em>List&lt;Integer&gt;</em>, and not an <em>int[]</em>.<br />\nAlthough, in Java, an array of <em>int</em> is recognized as an <em>object</em>.  Thus, providing it as the type will work.</p>\n<p>The <em>Collections Framework</em> was made for use with objects, and not primitive data-types.</p>\n<blockquote>\n<p><em>&quot;... The size <code>0</code> does not matter here. Trying to understand why? ...&quot;</em></p>\n</blockquote>\n<p>Essentially, the compiler needs to know what the object is—so <em>new int[0]</em> will suffice.</p>\n<blockquote>\n<p><em>&quot;... Does it mean there is no conceptual difference between (1) and (2) ...&quot;</em></p>\n</blockquote>\n<p>More or less, yes.</p>\n<blockquote>\n<p><em>&quot;... I tried this <code>lst.toArray(new int[][])</code> ...</em><br />\n<em>... Is it related to the grammar of Java where if you are instantiating an array, size needs to be mandatory and hence the error?&quot;</em></p>\n</blockquote>\n<p>Exactly, the syntax must comply.</p>\n<p>I recommend the following book, which covers this topic well—the interoperability of the <em>Collections Framework</em>, objects, and arrays.<br />\n<em><a href=\"https://www.oreilly.com/library/view/java-the-complete/9781260463422/\" rel=\"nofollow noreferrer\">Java: The Complete Reference, Twelfth Edition, 12th Edition</a></em>.</p>\n"}],"owner":{"account_id":5344340,"reputation":2306,"user_id":4260303,"accept_rate":42,"display_name":"curiousengineer"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":3,"score":3,"last_activity_date":1686868324,"creation_date":1686852205,"question_id":76484386,"body_markdown":"Have a Java list as `List&lt;int[]&gt; lst = new ArrayList&lt;&gt;();`\r\n\r\nI have the following code snippet&#39;s that I am trying to decipher. They all relate to understanding of generics and the the method `toArray()`\r\n1. `lst.toArray(new int[0][]);` - The size `0` does not matter here. Trying to understand why? I tried looking at the implementation of the toArray method inside `ArrayList` as well.\r\n\r\n2. `lst.toArray(new int[lst.size()][])` - Similar to (1), I can init use `lst.size()`. Does it mean there is no conceptual difference between (1) and (2)\r\n\r\n3. Given (1) and (2) both work correctly, I tried this `lst.toArray(new int[][])` - This does not compile and gives `Array initializer expected`. Is it related to the grammar of Java where if you are instantiating an array, size needs to be mandatory and hence the error?\r\n\r\nCan someone help me understand this? \r\n","title":"Understanding List.java&#39;s `&lt;T&gt; T[] toArray(T[] a)` method","body":"<p>Have a Java list as <code>List&lt;int[]&gt; lst = new ArrayList&lt;&gt;();</code></p>\n<p>I have the following code snippet's that I am trying to decipher. They all relate to understanding of generics and the the method <code>toArray()</code></p>\n<ol>\n<li><p><code>lst.toArray(new int[0][]);</code> - The size <code>0</code> does not matter here. Trying to understand why? I tried looking at the implementation of the toArray method inside <code>ArrayList</code> as well.</p>\n</li>\n<li><p><code>lst.toArray(new int[lst.size()][])</code> - Similar to (1), I can init use <code>lst.size()</code>. Does it mean there is no conceptual difference between (1) and (2)</p>\n</li>\n<li><p>Given (1) and (2) both work correctly, I tried this <code>lst.toArray(new int[][])</code> - This does not compile and gives <code>Array initializer expected</code>. Is it related to the grammar of Java where if you are instantiating an array, size needs to be mandatory and hence the error?</p>\n</li>\n</ol>\n<p>Can someone help me understand this?</p>\n"},{"tags":["java","amazon-web-services","kubernetes","terraform","quarkus"],"comments":[{"owner":{"account_id":11380463,"reputation":14217,"user_id":8343484,"display_name":"Marko E"},"score":0,"creation_date":1686822795,"post_id":76475625,"comment_id":134853460,"body_markdown":"Ok, and what happens when you run `terraform workspace show` in the same directory?","body":"Ok, and what happens when you run <code>terraform workspace show</code> in the same directory?"},{"owner":{"account_id":27519887,"reputation":1,"user_id":21000242,"display_name":"iAmAwfulAtProgramming"},"score":0,"creation_date":1686833545,"post_id":76475625,"comment_id":134855752,"body_markdown":"@MarkoE. Hi, I have resolved the issue now and have posted the solution, was super simple in the end :)","body":"@MarkoE. Hi, I have resolved the issue now and have posted the solution, was super simple in the end :)"}],"answers":[{"tags":[],"owner":{"account_id":27519887,"reputation":1,"user_id":21000242,"display_name":"iAmAwfulAtProgramming"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1686867607,"creation_date":1686833508,"answer_id":76482677,"question_id":76475625,"body_markdown":"Adding the following line to my `application.properties` resolved the issue. \r\n\r\n```\r\nquarkus.kubernetes.env.configmaps=CONFIG_MAP_NAME\r\n```\r\n\r\nIt seems as though the issue was that the configMap was being deployed correctly in the container, but wasn&#39;t setting the values as environment variables in quarkus. This line sets all the values in the configMap as environment variables in Quarkus. ","title":"Quarkus not picking up Kubernetes environment variable","body":"<p>Adding the following line to my <code>application.properties</code> resolved the issue.</p>\n<pre><code>quarkus.kubernetes.env.configmaps=CONFIG_MAP_NAME\n</code></pre>\n<p>It seems as though the issue was that the configMap was being deployed correctly in the container, but wasn't setting the values as environment variables in quarkus. This line sets all the values in the configMap as environment variables in Quarkus.</p>\n"}],"owner":{"account_id":27519887,"reputation":1,"user_id":21000242,"display_name":"iAmAwfulAtProgramming"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":128,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76482677,"answer_count":1,"score":0,"last_activity_date":1686867607,"creation_date":1686759332,"question_id":76475625,"body_markdown":"I have two environments when I am deploying on GitHub, and want to be able to discern between the two in my logs, therefore I have an `ENVIRONMENT` field which is set to either `QA` or `LIVE`.\r\n\r\nHere is how I set these fields in `main.tf`:\r\n\r\n```\r\nlocals {\r\n  environment = {\r\n    qa = &quot;QA&quot;\r\n    live = &quot;LIVE&quot;\r\n  }\r\n}\r\n\r\nresource &quot;kubernetes_manifest&quot; &quot;config&quot; {\r\n  manifest = {\r\n    &quot;apiVersion&quot; = &quot;v1&quot;\r\n    &quot;kind&quot;       = &quot;ConfigMap&quot;\r\n    &quot;metadata&quot; = {\r\n      &quot;name&quot;      = &quot;config&quot;\r\n      &quot;namespace&quot; = &quot;test&quot;\r\n    }\r\n    &quot;data&quot; = {\r\n      &quot;ENVIRONMENT&quot; = local.environment[terraform.workspace],\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nThis sets the `ENVIRONMENT` field in my configMap. I have confirmed this running `kubectl` commands, and can see this field with in the configMap with the deployment.\r\n\r\nI then read this field in my `application.properties` like so:\r\n\r\n```\r\nquarkus.log.json.additional-field.&quot;environment&quot;.value=${ENVIRONMENT:unknown}\r\n```\r\n\r\nBecause this is set on runtime, it will be set when there is a configMap available to read from, so I am very confused as to why all my logs still say `unknown` for the environment? I am using `quarkus-logging-json` for my logging","title":"Quarkus not picking up Kubernetes environment variable","body":"<p>I have two environments when I am deploying on GitHub, and want to be able to discern between the two in my logs, therefore I have an <code>ENVIRONMENT</code> field which is set to either <code>QA</code> or <code>LIVE</code>.</p>\n<p>Here is how I set these fields in <code>main.tf</code>:</p>\n<pre><code>locals {\n  environment = {\n    qa = &quot;QA&quot;\n    live = &quot;LIVE&quot;\n  }\n}\n\nresource &quot;kubernetes_manifest&quot; &quot;config&quot; {\n  manifest = {\n    &quot;apiVersion&quot; = &quot;v1&quot;\n    &quot;kind&quot;       = &quot;ConfigMap&quot;\n    &quot;metadata&quot; = {\n      &quot;name&quot;      = &quot;config&quot;\n      &quot;namespace&quot; = &quot;test&quot;\n    }\n    &quot;data&quot; = {\n      &quot;ENVIRONMENT&quot; = local.environment[terraform.workspace],\n    }\n  }\n}\n</code></pre>\n<p>This sets the <code>ENVIRONMENT</code> field in my configMap. I have confirmed this running <code>kubectl</code> commands, and can see this field with in the configMap with the deployment.</p>\n<p>I then read this field in my <code>application.properties</code> like so:</p>\n<pre><code>quarkus.log.json.additional-field.&quot;environment&quot;.value=${ENVIRONMENT:unknown}\n</code></pre>\n<p>Because this is set on runtime, it will be set when there is a configMap available to read from, so I am very confused as to why all my logs still say <code>unknown</code> for the environment? I am using <code>quarkus-logging-json</code> for my logging</p>\n"},{"tags":["java","kubernetes","gradle"],"answers":[{"tags":[],"owner":{"account_id":5604129,"reputation":318,"user_id":5399914,"display_name":"Munish Chouhan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686867097,"creation_date":1686867097,"answer_id":76485820,"question_id":75981235,"body_markdown":"It&#39;s still there:\r\n\r\nhttps://github.com/kubernetes-client/java/blob/master/fluent/src/main/java/io/kubernetes/client/openapi/models/V1JobBuilder.java#L5\r\n\r\nBut its re-packaged in a separate dependency:\r\nhttps://mvnrepository.com/artifact/io.kubernetes/client-java-api-fluent\r\n\r\nI believe if you add that dependency to your project it should work correctly, if it doesn&#39;t please let us know.\r\n\r\ncredits: https://github.com/kubernetes-client/java/issues/2706#issuecomment-1593625113","title":"How do i import the V1JobBuilderClass from the java kubernetes client version 18?","body":"<p>It's still there:</p>\n<p><a href=\"https://github.com/kubernetes-client/java/blob/master/fluent/src/main/java/io/kubernetes/client/openapi/models/V1JobBuilder.java#L5\" rel=\"nofollow noreferrer\">https://github.com/kubernetes-client/java/blob/master/fluent/src/main/java/io/kubernetes/client/openapi/models/V1JobBuilder.java#L5</a></p>\n<p>But its re-packaged in a separate dependency:\n<a href=\"https://mvnrepository.com/artifact/io.kubernetes/client-java-api-fluent\" rel=\"nofollow noreferrer\">https://mvnrepository.com/artifact/io.kubernetes/client-java-api-fluent</a></p>\n<p>I believe if you add that dependency to your project it should work correctly, if it doesn't please let us know.</p>\n<p>credits: <a href=\"https://github.com/kubernetes-client/java/issues/2706#issuecomment-1593625113\" rel=\"nofollow noreferrer\">https://github.com/kubernetes-client/java/issues/2706#issuecomment-1593625113</a></p>\n"}],"owner":{"account_id":15612131,"reputation":11,"user_id":21612911,"display_name":"Ayush"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":142,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1686867097,"creation_date":1681166247,"question_id":75981235,"body_markdown":"The client on master and the 18.0.0 release branch still has the class, but after upgrading from version 11 to version 18 intellij idea says that this class doesn&#39;t exist and the code doesn&#39;t compile. It does exist here https://github.com/kubernetes-client/java/blob/master/fluent/src/main/java/io/kubernetes/client/openapi/models/V1JobBuilder.java , so how do i import it? \r\n\r\nI am using gradle.\r\n    \r\n```\r\nimplementation &#39;io.kubernetes:client-java:18.0.0&#39;\r\n\r\nimport io.kubernetes.client.openapi.models.V1JobBuilder;\r\n```\r\n\r\n\r\nTried switching to generating the V1Job from yaml as well as using the setters (new V1Job().spec(...)), but its a very tedious process to translate it, and it would be safer to just not touch the code.","title":"How do i import the V1JobBuilderClass from the java kubernetes client version 18?","body":"<p>The client on master and the 18.0.0 release branch still has the class, but after upgrading from version 11 to version 18 intellij idea says that this class doesn't exist and the code doesn't compile. It does exist here <a href=\"https://github.com/kubernetes-client/java/blob/master/fluent/src/main/java/io/kubernetes/client/openapi/models/V1JobBuilder.java\" rel=\"nofollow noreferrer\">https://github.com/kubernetes-client/java/blob/master/fluent/src/main/java/io/kubernetes/client/openapi/models/V1JobBuilder.java</a> , so how do i import it?</p>\n<p>I am using gradle.</p>\n<pre><code>implementation 'io.kubernetes:client-java:18.0.0'\n\nimport io.kubernetes.client.openapi.models.V1JobBuilder;\n</code></pre>\n<p>Tried switching to generating the V1Job from yaml as well as using the setters (new V1Job().spec(...)), but its a very tedious process to translate it, and it would be safer to just not touch the code.</p>\n"},{"tags":["java","key-bindings"],"answers":[{"tags":[],"owner":{"account_id":10670591,"reputation":2028,"user_id":7855784,"display_name":"Subash J"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1534093790,"creation_date":1534093790,"answer_id":51811049,"question_id":51810984,"body_markdown":"Use Action to call like `component.getActionMap().put(&quot;doSomething&quot;, anAction);`\r\nRefer [Key Binding][1]  for more information. Below is a sample code I have referred in another Stackoverflow Question reference link [SO Ref link][2]\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html#howto\r\n  [2]: https://stackoverflow.com/questions/18234500/how-to-add-keylistener-to-jcomponent-when-mouse-is-entered\r\n\r\n    import java.awt.*;\r\n    import java.awt.event.*;\r\n    import javax.swing.*;\r\n    \r\n    public class ButtonBinding {\r\n    \r\n        private JPanel contentPane;\r\n        private JTextField tField;\r\n        private JButton button;\r\n        private KeyStroke keyStroke = KeyStroke.getKeyStroke(&quot;ENTER&quot;);\r\n    \r\n        private Action action = new AbstractAction() {\r\n            @Override\r\n            public void actionPerformed(ActionEvent ae) {\r\n                System.out.println(&quot;Action Performed&quot;);\r\n                contentPane.setBackground(Color.BLUE);\r\n            }\r\n        };\r\n    \r\n        private MouseAdapter mouseActions = new MouseAdapter() {\r\n            @Override\r\n            public void mouseEntered(MouseEvent me) {\r\n                System.out.println(&quot;Mouse Entered&quot;);\r\n                JButton button = (JButton) me.getSource(); \r\n                button.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(keyStroke, &quot;enter&quot;);\r\n                button.getActionMap().put(&quot;enter&quot;, action);\r\n            }\r\n    \r\n            @Override\r\n            public void mouseExited(MouseEvent me) {\r\n                System.out.println(&quot;Mouse Exited&quot;);\r\n                JButton button = (JButton) me.getSource();\r\n                button.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(keyStroke, &quot;none&quot;);\r\n                contentPane.setBackground(Color.RED);\r\n            }\r\n        };  \r\n    \r\n        private void displayGUI() {\r\n            JFrame frame = new JFrame(&quot;Button Binding Example&quot;);\r\n            frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);\r\n    \r\n            contentPane = new JPanel();\r\n            contentPane.setOpaque(true);\r\n            tField = new JTextField(10);\r\n            button = new JButton(&quot;Click Me&quot;);\r\n            button.addMouseListener(mouseActions);\r\n    \r\n            contentPane.add(tField);\r\n            contentPane.add(button);\r\n    \r\n            frame.setContentPane(contentPane);\r\n            frame.pack();\r\n            frame.setLocationByPlatform(true);\r\n            frame.setVisible(true);\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            Runnable runnable = new Runnable() {\r\n                @Override\r\n                public void run() {\r\n                    new ButtonBinding().displayGUI();\r\n                }\r\n            };\r\n            EventQueue.invokeLater(runnable);\r\n        }\r\n    }","title":"Keybinding not calling AbstractAction","body":"<p>Use Action to call like <code>component.getActionMap().put(\"doSomething\", anAction);</code>\nRefer <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html#howto\" rel=\"nofollow noreferrer\">Key Binding</a>  for more information. Below is a sample code I have referred in another Stackoverflow Question reference link <a href=\"https://stackoverflow.com/questions/18234500/how-to-add-keylistener-to-jcomponent-when-mouse-is-entered\">SO Ref link</a></p>\n\n<pre><code>import java.awt.*;\nimport java.awt.event.*;\nimport javax.swing.*;\n\npublic class ButtonBinding {\n\n    private JPanel contentPane;\n    private JTextField tField;\n    private JButton button;\n    private KeyStroke keyStroke = KeyStroke.getKeyStroke(\"ENTER\");\n\n    private Action action = new AbstractAction() {\n        @Override\n        public void actionPerformed(ActionEvent ae) {\n            System.out.println(\"Action Performed\");\n            contentPane.setBackground(Color.BLUE);\n        }\n    };\n\n    private MouseAdapter mouseActions = new MouseAdapter() {\n        @Override\n        public void mouseEntered(MouseEvent me) {\n            System.out.println(\"Mouse Entered\");\n            JButton button = (JButton) me.getSource(); \n            button.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(keyStroke, \"enter\");\n            button.getActionMap().put(\"enter\", action);\n        }\n\n        @Override\n        public void mouseExited(MouseEvent me) {\n            System.out.println(\"Mouse Exited\");\n            JButton button = (JButton) me.getSource();\n            button.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(keyStroke, \"none\");\n            contentPane.setBackground(Color.RED);\n        }\n    };  \n\n    private void displayGUI() {\n        JFrame frame = new JFrame(\"Button Binding Example\");\n        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);\n\n        contentPane = new JPanel();\n        contentPane.setOpaque(true);\n        tField = new JTextField(10);\n        button = new JButton(\"Click Me\");\n        button.addMouseListener(mouseActions);\n\n        contentPane.add(tField);\n        contentPane.add(button);\n\n        frame.setContentPane(contentPane);\n        frame.pack();\n        frame.setLocationByPlatform(true);\n        frame.setVisible(true);\n    }\n\n    public static void main(String[] args) {\n        Runnable runnable = new Runnable() {\n            @Override\n            public void run() {\n                new ButtonBinding().displayGUI();\n            }\n        };\n        EventQueue.invokeLater(runnable);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13165284,"reputation":521,"user_id":9509713,"display_name":"Nosrep"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1686866043,"creation_date":1686866043,"answer_id":76485756,"question_id":51810984,"body_markdown":"I forgot to add the C to the JFrame...","title":"Keybinding not calling AbstractAction","body":"<p>I forgot to add the C to the JFrame...</p>\n"}],"owner":{"account_id":13165284,"reputation":521,"user_id":9509713,"display_name":"Nosrep"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":154,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76485756,"answer_count":2,"score":1,"last_activity_date":1686866043,"creation_date":1534093309,"question_id":51810984,"body_markdown":"I am making a game where the user has to press keys to move around. I am using keybindings but they are not working. The keybindings are supposed to call the Wp class and print &quot;W pressed&quot;, but nothing happens. Here&#39;s the code:\r\n\r\n    public class SO extends JFrame {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tnew SO();\r\n    \t}\r\n    \tC c;\r\n    \tpublic SO(){\r\n    \t\tthis.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n    \t\tthis.setSize(500, 500);\r\n    \t\tc=new C();\r\n    \t\tc.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(KeyStroke.getKeyStroke(&quot;W&quot;), &quot;wp&quot;);\r\n    \t\tc.getActionMap().put(&quot;wp&quot;, new Wp());\r\n    \t\tthis.setVisible(true);\r\n    \t}\r\n    \tprivate class C extends JComponent {\r\n    \t\tpublic void paint(Graphics g){}\r\n    \t}\r\n    \tprivate class Wp extends AbstractAction {\r\n    \r\n    \t\t@Override\r\n    \t\tpublic void actionPerformed(ActionEvent arg0) {\r\n    \t\t\tSystem.out.println(&quot;W pressed&quot;);\r\n    \t\t}\r\n    \t\t\r\n    \t}\r\n    \r\n    }","title":"Keybinding not calling AbstractAction","body":"<p>I am making a game where the user has to press keys to move around. I am using keybindings but they are not working. The keybindings are supposed to call the Wp class and print \"W pressed\", but nothing happens. Here's the code:</p>\n\n<pre><code>public class SO extends JFrame {\n\n    public static void main(String[] args) {\n        new SO();\n    }\n    C c;\n    public SO(){\n        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        this.setSize(500, 500);\n        c=new C();\n        c.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(KeyStroke.getKeyStroke(\"W\"), \"wp\");\n        c.getActionMap().put(\"wp\", new Wp());\n        this.setVisible(true);\n    }\n    private class C extends JComponent {\n        public void paint(Graphics g){}\n    }\n    private class Wp extends AbstractAction {\n\n        @Override\n        public void actionPerformed(ActionEvent arg0) {\n            System.out.println(\"W pressed\");\n        }\n\n    }\n\n}\n</code></pre>\n"},{"tags":["java","linux","jar","jfreechart"],"answers":[{"tags":[],"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1686865905,"creation_date":1634768404,"answer_id":69653678,"question_id":69651478,"body_markdown":"As illustrated [here][1], you can clone the repository, check out the branch with the desired tag and use [tag:maven] to build the release JARs. See also [_Migration from JFreeChart 1.0.x_][2]\r\n\r\n&lt;!-- language: bash --&gt;\r\n\r\n    $ git clone https://github.com/jfree/jfreechart.git jfreechart\r\n    $ pushd jfreechart\r\n    $ git fetch --tags\r\n    $ git tag --list\r\n    …\r\n    v1.5.3\r\n    $ git checkout v1.5.3\r\n    Note: switching to &#39;v1.5.3&#39;.\r\n    …\r\n    $ mvn -P release package\r\n    …\r\n    [INFO] BUILD SUCCESS\r\n    …\r\n    $ ls -1 target/jfreechart-1.5.3*\r\n    target/jfreechart-1.5.3-javadoc.jar\r\n    target/jfreechart-1.5.3-sources.jar\r\n    target/jfreechart-1.5.3.jar\r\n\r\nAlternatively, download the desired JARs directly from the corresponding _mvnrepository_ directory:\r\n\r\nv1.5.2: [_mvnrepository_][3] &gt; [directory][4].&lt;br/&gt;\r\nv1.5.3: [_mvnrepository_][5] &gt; [directory][6].&lt;br/&gt;\r\nv1.5.4: [_mvnrepository_][7] &gt; [directory][8].\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/68810025/230513\r\n  [2]: https://github.com/jfree/jfreechart#migration\r\n  [3]: https://mvnrepository.com/artifact/org.jfree/jfreechart/1.5.2\r\n  [4]: https://repo1.maven.org/maven2/org/jfree/jfreechart/1.5.2/\r\n  [5]: https://mvnrepository.com/artifact/org.jfree/jfreechart/1.5.3\r\n  [6]: https://repo1.maven.org/maven2/org/jfree/jfreechart/1.5.3/\r\n  [7]: https://mvnrepository.com/artifact/org.jfree/jfreechart/1.5.4\r\n  [8]: https://repo1.maven.org/maven2/org/jfree/jfreechart/1.5.4/","title":"Create jfreechart-1.5.3 JAR from source code","body":"<p>As illustrated <a href=\"https://stackoverflow.com/a/68810025/230513\">here</a>, you can clone the repository, check out the branch with the desired tag and use <a href=\"/questions/tagged/maven\" class=\"post-tag\" title=\"show questions tagged &#39;maven&#39;\" aria-label=\"show questions tagged &#39;maven&#39;\" rel=\"tag\" aria-labelledby=\"tag-maven-tooltip-container\">maven</a> to build the release JARs. See also <a href=\"https://github.com/jfree/jfreechart#migration\" rel=\"nofollow noreferrer\"><em>Migration from JFreeChart 1.0.x</em></a></p>\n<pre class=\"lang-bash prettyprint-override\"><code>$ git clone https://github.com/jfree/jfreechart.git jfreechart\n$ pushd jfreechart\n$ git fetch --tags\n$ git tag --list\n…\nv1.5.3\n$ git checkout v1.5.3\nNote: switching to 'v1.5.3'.\n…\n$ mvn -P release package\n…\n[INFO] BUILD SUCCESS\n…\n$ ls -1 target/jfreechart-1.5.3*\ntarget/jfreechart-1.5.3-javadoc.jar\ntarget/jfreechart-1.5.3-sources.jar\ntarget/jfreechart-1.5.3.jar\n</code></pre>\n<p>Alternatively, download the desired JARs directly from the corresponding <em>mvnrepository</em> directory:</p>\n<p>v1.5.2: <a href=\"https://mvnrepository.com/artifact/org.jfree/jfreechart/1.5.2\" rel=\"nofollow noreferrer\"><em>mvnrepository</em></a> &gt; <a href=\"https://repo1.maven.org/maven2/org/jfree/jfreechart/1.5.2/\" rel=\"nofollow noreferrer\">directory</a>.<br/>\nv1.5.3: <a href=\"https://mvnrepository.com/artifact/org.jfree/jfreechart/1.5.3\" rel=\"nofollow noreferrer\"><em>mvnrepository</em></a> &gt; <a href=\"https://repo1.maven.org/maven2/org/jfree/jfreechart/1.5.3/\" rel=\"nofollow noreferrer\">directory</a>.<br/>\nv1.5.4: <a href=\"https://mvnrepository.com/artifact/org.jfree/jfreechart/1.5.4\" rel=\"nofollow noreferrer\"><em>mvnrepository</em></a> &gt; <a href=\"https://repo1.maven.org/maven2/org/jfree/jfreechart/1.5.4/\" rel=\"nofollow noreferrer\">directory</a>.</p>\n"}],"owner":{"account_id":9789757,"reputation":1,"user_id":7254797,"display_name":"Justyn Fogarty"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1020,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686865905,"creation_date":1634755539,"question_id":69651478,"body_markdown":"My program is trying to upgrade from an old version of JFreeChart, we are using [tag:ant] to compile and have JFreeChart imported as a .jar file. I am trying to get the new `jfreechart-1.5.3` source (I cannot find a jar on their website) into a working .jar file by using:\r\n```\r\njar cf jfreechart.jar jfreechart-1.5.3/src\r\n```\r\nWhen trying to compile with the new .jar file. I get the error that &quot;package org.jfree.chart&quot; does not exist. How do I update my program with a .jar file of the newest JFreeChart version?","title":"Create jfreechart-1.5.3 JAR from source code","body":"<p>My program is trying to upgrade from an old version of JFreeChart, we are using <a href=\"/questions/tagged/ant\" class=\"post-tag\" title=\"show questions tagged &#39;ant&#39;\" rel=\"tag\">ant</a> to compile and have JFreeChart imported as a .jar file. I am trying to get the new <code>jfreechart-1.5.3</code> source (I cannot find a jar on their website) into a working .jar file by using:</p>\n<pre><code>jar cf jfreechart.jar jfreechart-1.5.3/src\n</code></pre>\n<p>When trying to compile with the new .jar file. I get the error that &quot;package org.jfree.chart&quot; does not exist. How do I update my program with a .jar file of the newest JFreeChart version?</p>\n"},{"tags":["java","jsp","tapestry"],"answers":[{"comments":[{"owner":{"account_id":19345682,"reputation":71,"user_id":14144308,"display_name":"Redwood Thomas"},"score":0,"creation_date":1686877583,"post_id":76485420,"comment_id":134862219,"body_markdown":"Thanks for the update Peter. The code I am modifying is very old. it doesn&#39;t even have HTML tags. It&#39;s as below","body":"Thanks for the update Peter. The code I am modifying is very old. it doesn&#39;t even have HTML tags. It&#39;s as below"},{"owner":{"account_id":19345682,"reputation":71,"user_id":14144308,"display_name":"Redwood Thomas"},"score":0,"creation_date":1686877616,"post_id":76485420,"comment_id":134862221,"body_markdown":"``&lt;span jwcid=&quot;@StepShell&quot; stepTitle=&quot;Requirement Details&quot;&gt;\n    &lt;span jwcid=&quot;claimSummary&quot;/&gt;     \n     &lt;table class=&quot;main-field-entry&quot; id=&quot;requirementTable&quot;&gt;\n        &lt;tr&gt;        &lt;/tr&gt;        \n        &lt;tr&gt;         &lt;td class=&quot;field-label&quot;&gt;Created: &lt;/td&gt;\n            &lt;td&gt;&lt;text jwcid=&quot;created&quot;&gt;00/00/0000&lt;/text&gt;&lt;/td&gt;\n            &lt;td class=&quot;field-label&quot;&gt;Created By: &lt;/td&gt;\n            &lt;td&gt;&lt;text jwcid=&quot;createdBy&quot;&gt;Claims project&lt;/text&gt; &lt;/td&gt;\n          &lt;if jwcid = &quot;isNotFSC&quot; &gt;\n            &lt;td&gt;&lt;submit id=&quot;startFollowupARequirementTask&quot; jwcid=&quot;startFollowupARequirementTask&quot;/&gt;&lt;/td&gt;\n          &lt;/if&gt;`","body":"``&lt;span jwcid=&quot;@StepShell&quot; stepTitle=&quot;Requirement Details&quot;&gt;     &lt;span jwcid=&quot;claimSummary&quot;/&gt;           &lt;table class=&quot;main-field-entry&quot; id=&quot;requirementTable&quot;&gt;         &lt;tr&gt;        &lt;/tr&gt;                 &lt;tr&gt;         &lt;td class=&quot;field-label&quot;&gt;Created: &lt;/td&gt;             &lt;td&gt;&lt;text jwcid=&quot;created&quot;&gt;00/00/0000&lt;/text&gt;&lt;/td&gt;             &lt;td class=&quot;field-label&quot;&gt;Created By: &lt;/td&gt;             &lt;td&gt;&lt;text jwcid=&quot;createdBy&quot;&gt;Claims project&lt;/text&gt; &lt;/td&gt;           &lt;if jwcid = &quot;isNotFSC&quot; &gt;             &lt;td&gt;&lt;submit id=&quot;startFollowupARequirementTask&quot; jwcid=&quot;startFollowupARequirementTask&quot;/&gt;&lt;/td&gt;           &lt;/if&gt;`"},{"owner":{"account_id":19345682,"reputation":71,"user_id":14144308,"display_name":"Redwood Thomas"},"score":0,"creation_date":1686877709,"post_id":76485420,"comment_id":134862228,"body_markdown":"I tried your suggestion of adding the namespace declaration and the t:if directive, however it&#39;s now showing the field for cases where it&#39;s not supposed to show. Looks like the if statement itself is being bypassed and the field is displayed for all cases.","body":"I tried your suggestion of adding the namespace declaration and the t:if directive, however it&#39;s now showing the field for cases where it&#39;s not supposed to show. Looks like the if statement itself is being bypassed and the field is displayed for all cases."}],"tags":[],"owner":{"account_id":18999437,"reputation":2461,"user_id":13867124,"display_name":"AztecCodes"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686865306,"creation_date":1686862183,"answer_id":76485420,"question_id":76485317,"body_markdown":"Here you have an example of how you can write an OR condition using Tapestry syntax:\r\n\r\n**Code Example:**\r\n\r\n```lang-html\r\n&lt;tr&gt;\r\n    &lt;td class=&quot;field-label&quot;&gt;Created:&lt;/td&gt;\r\n    &lt;td&gt;&lt;text jwcid=&quot;created&quot;&gt;00/00/0000&lt;/text&gt;&lt;/td&gt;\r\n    &lt;td class=&quot;field-label&quot;&gt;Created By:&lt;/td&gt;\r\n    &lt;td&gt;&lt;text jwcid=&quot;createdBy&quot;&gt;Claims project&lt;/text&gt;&lt;/td&gt;\r\n\r\n    &lt;t:if test=&quot;${jwcid == &#39;isNotFSC&#39; || jwcid == &#39;isFSCIP&#39;}&quot;&gt;\r\n        &lt;td&gt;&lt;submit id=&quot;startFollowupARequirementTask&quot; jwcid=&quot;startFollowupARequirementTask&quot;/&gt;&lt;/td&gt;\r\n    &lt;/t:if&gt;\r\n&lt;/tr&gt;\r\n```\r\n\r\nTapestry wants you to use the `t:if` directive, and then you can use the `OR` operator `||` within this directive.\r\n\r\nAlso make sure that you have Tapestry namespace declaration at the beginning of your template file.\r\n\r\nJust add it to the top of the file if you didn&#39;t already:\r\n\r\n```lang-html\r\n&lt;html t:type=&quot;layout&quot; xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_4.xsd&quot;&gt;\r\n```\r\n\r\n","title":"Tapestry or JSP - OR condition","body":"<p>Here you have an example of how you can write an OR condition using Tapestry syntax:</p>\n<p><strong>Code Example:</strong></p>\n<pre class=\"lang-html prettyprint-override\"><code>&lt;tr&gt;\n    &lt;td class=&quot;field-label&quot;&gt;Created:&lt;/td&gt;\n    &lt;td&gt;&lt;text jwcid=&quot;created&quot;&gt;00/00/0000&lt;/text&gt;&lt;/td&gt;\n    &lt;td class=&quot;field-label&quot;&gt;Created By:&lt;/td&gt;\n    &lt;td&gt;&lt;text jwcid=&quot;createdBy&quot;&gt;Claims project&lt;/text&gt;&lt;/td&gt;\n\n    &lt;t:if test=&quot;${jwcid == 'isNotFSC' || jwcid == 'isFSCIP'}&quot;&gt;\n        &lt;td&gt;&lt;submit id=&quot;startFollowupARequirementTask&quot; jwcid=&quot;startFollowupARequirementTask&quot;/&gt;&lt;/td&gt;\n    &lt;/t:if&gt;\n&lt;/tr&gt;\n</code></pre>\n<p>Tapestry wants you to use the <code>t:if</code> directive, and then you can use the <code>OR</code> operator <code>||</code> within this directive.</p>\n<p>Also make sure that you have Tapestry namespace declaration at the beginning of your template file.</p>\n<p>Just add it to the top of the file if you didn't already:</p>\n<pre class=\"lang-html prettyprint-override\"><code>&lt;html t:type=&quot;layout&quot; xmlns:t=&quot;http://tapestry.apache.org/schema/tapestry_5_4.xsd&quot;&gt;\n</code></pre>\n"}],"owner":{"account_id":19345682,"reputation":71,"user_id":14144308,"display_name":"Redwood Thomas"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":57,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1686865306,"creation_date":1686861048,"question_id":76485317,"body_markdown":"I am new to [Tapestry][1] and [JSP][2]. How can I write this directive?\r\n\r\nIf jwcid is either **isNotFSC** OR **isFSCIP**, then it needs to display that field.\r\n\r\n```lang-html\r\n&lt;tr&gt;\r\n    &lt;td class=&quot;field-label&quot;&gt;Created: &lt;/td&gt;\r\n    &lt;td&gt;&lt;text jwcid=&quot;created&quot;&gt;00/00/0000&lt;/text&gt;&lt;/td&gt;\r\n    &lt;td class=&quot;field-label&quot;&gt;Created By: &lt;/td&gt;\r\n    &lt;td&gt;&lt;text jwcid=&quot;createdBy&quot;&gt;Claims project&lt;/text&gt; &lt;/td&gt;\r\n\r\n    &lt;if jwcid = &quot;isNotFSC&quot; || jwcid = &quot;isFSCIP&quot;&gt;\r\n        &lt;td&gt;&lt;submit id=&quot;startFollowupARequirementTask&quot; jwcid=&quot;startFollowupARequirementTask&quot;/&gt;&lt;/td&gt;\r\n    &lt;/if&gt;\r\n&lt;/tr&gt;\r\n```\r\n\r\nHow is the OR condition is written in Tapestry or JSP?\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Apache_Tapestry\r\n  [2]: https://en.wikipedia.org/wiki/Jakarta_Server_Pages\r\n\r\n\r\n","title":"Tapestry or JSP - OR condition","body":"<p>I am new to <a href=\"https://en.wikipedia.org/wiki/Apache_Tapestry\" rel=\"nofollow noreferrer\">Tapestry</a> and <a href=\"https://en.wikipedia.org/wiki/Jakarta_Server_Pages\" rel=\"nofollow noreferrer\">JSP</a>. How can I write this directive?</p>\n<p>If jwcid is either <strong>isNotFSC</strong> OR <strong>isFSCIP</strong>, then it needs to display that field.</p>\n<pre class=\"lang-html prettyprint-override\"><code>&lt;tr&gt;\n    &lt;td class=&quot;field-label&quot;&gt;Created: &lt;/td&gt;\n    &lt;td&gt;&lt;text jwcid=&quot;created&quot;&gt;00/00/0000&lt;/text&gt;&lt;/td&gt;\n    &lt;td class=&quot;field-label&quot;&gt;Created By: &lt;/td&gt;\n    &lt;td&gt;&lt;text jwcid=&quot;createdBy&quot;&gt;Claims project&lt;/text&gt; &lt;/td&gt;\n\n    &lt;if jwcid = &quot;isNotFSC&quot; || jwcid = &quot;isFSCIP&quot;&gt;\n        &lt;td&gt;&lt;submit id=&quot;startFollowupARequirementTask&quot; jwcid=&quot;startFollowupARequirementTask&quot;/&gt;&lt;/td&gt;\n    &lt;/if&gt;\n&lt;/tr&gt;\n</code></pre>\n<p>How is the OR condition is written in Tapestry or JSP?</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":1670879,"reputation":1569,"user_id":1537370,"accept_rate":79,"display_name":"Damo"},"score":0,"creation_date":1686868968,"post_id":76485615,"comment_id":134861483,"body_markdown":"Ty chatgpt: &quot;When sending cookies in an HTTP request, it&#39;s important to understand that certain properties like cookie expiry, domain, and path are typically handled by the client (browser) and are not sent explicitly to the server as part of the request.&quot;","body":"Ty chatgpt: &quot;When sending cookies in an HTTP request, it&#39;s important to understand that certain properties like cookie expiry, domain, and path are typically handled by the client (browser) and are not sent explicitly to the server as part of the request.&quot;"}],"owner":{"account_id":1670879,"reputation":1569,"user_id":1537370,"accept_rate":79,"display_name":"Damo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686865107,"creation_date":1686864263,"question_id":76485615,"body_markdown":"I can easily write Java client code that specify a cookie, where the cookie has a **name** and **value**. However, I cannot get this working for a cookie that also needs to specify a **domain**, and/or an **expiry**, and/or a **path**.  \r\n\r\nWhen i specify my cookie as:\r\n\r\n    cookieName=cookieValue; Expires=Wed, 21 Jun 2023 10:00:00 GMT; Domain=example.com\r\n\r\n2 cookies are created, (as in, this is what the server sees),\r\n\r\n    cookieName=cookieValue\r\n    Domain=example.com\r\n\r\nI am able to easily replicate this using Spring Boot setup;\r\n\r\n\r\n```\r\npackage com.example;\r\n\r\nimport org.junit.jupiter.api.Test;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.beans.factory.annotation.Value;\r\nimport org.springframework.boot.test.context.SpringBootTest;\r\nimport org.springframework.boot.test.web.client.TestRestTemplate;\r\nimport org.springframework.http.HttpHeaders;\r\nimport org.springframework.http.HttpMethod;\r\nimport org.springframework.http.RequestEntity;\r\n\r\nimport java.net.URI;\r\n\r\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\r\nclass TestTest {\r\n\r\n  @Value(value = &quot;${local.server.port}&quot;)\r\n  private int port;\r\n\r\n  @Autowired\r\n  private TestRestTemplate client;\r\n\r\n  @Test\r\n  public void cookie() {\r\n\r\n    // Setup\r\n    final HttpHeaders headers = new HttpHeaders();\r\n    headers.add(HttpHeaders.COOKIE, &quot;cookieName=cookieValue; Expires=Wed, 21 Jun 2023 10:00:00 GMT; Domain=example.com&quot;);\r\n\r\n    // Create the RequestEntity with the desired HTTP method, URL, and headers\r\n    RequestEntity&lt;Void&gt; requestEntity = new RequestEntity&lt;&gt;(headers, HttpMethod.GET, URI.create(&quot;http://localhost:&quot; + port + &quot;/test&quot;));\r\n\r\n    // Send the request and print the response\r\n    System.out.println(client.exchange(requestEntity, String.class));\r\n  }\r\n}\r\n```\r\n \r\n```\r\npackage com.example;\r\n\r\n\r\nimport jakarta.servlet.http.HttpServletRequest;\r\nimport org.springframework.http.HttpStatus;\r\nimport org.springframework.http.ResponseEntity;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\nimport org.springframework.web.bind.annotation.RestController;\r\n\r\nimport java.util.Arrays;\r\nimport java.util.List;\r\nimport java.util.stream.Collectors;\r\nimport java.util.stream.Stream;\r\n\r\n@RestController\r\npublic class TestController {\r\n  @GetMapping(&quot;/test&quot;)\r\n  public ResponseEntity&lt;List&lt;String&gt;&gt; test(HttpServletRequest request) {\r\n    Stream&lt;String&gt; stringStream = Arrays.stream(request.getCookies()).map(it -&gt; String.format(&quot;Name: %s, Value: %s, Domain: %s, Path: %s, Age: %s&quot;, it.getName(), it.getValue(), it.getDomain(), it.getPath(), it.getMaxAge()));\r\n    return ResponseEntity.status(HttpStatus.OK).body(stringStream.collect(Collectors.toList()));\r\n  }\r\n}\r\n\r\n```\r\n\r\nOutput:\r\n\r\n    &lt;200 OK \r\n      OK,[&quot;Name: cookieName, Value: cookieValue, Domain: null, Path: null, Age: -1&quot;,\r\n          &quot;Name: Domain, Value: example.com, Domain: null, Path: null, Age: -1&quot;],\r\n      [Content-Type:&quot;application/json&quot;, \r\n       Transfer-Encoding:&quot;chunked&quot;, \r\n       Date:&quot;Thu, 15 Jun 2023 21:19:18 GMT&quot;, \r\n       Keep-Alive:&quot;timeout=60&quot;, \r\n       Connection:&quot;keep-alive&quot;]&gt;\r\n\r\nI am baffled, and have tried a a few diff clients and using http servlet types and spring types, but same end result. Not sure if cookie is somehow truncating or what.\r\n\r\nAs an example of something else i tried, and had same outcome (i.e. 2 cookies &quot;created&quot; by http request object on the server):\r\n\r\n```\r\n    org.springframework.http.ResponseCookie cookie = ResponseCookie.from(&quot;meadow&quot;, &quot;SOPRANO&quot;)\r\n        .path(&quot;/prod&quot;)  // Set the desired path for the cookie\r\n        .maxAge(3600)  // Set the expiry time in seconds (e.g., 1 hour)\r\n        .domain(&quot;foo.com&quot;)\r\n        .build();\r\n\r\n    // Setup\r\n    final HttpHeaders headers = new HttpHeaders();\r\n    headers.add(HttpHeaders.COOKIE, cookie.toString());\r\n```\r\n\r\nThanks  \r\n\r\n","title":"Java client HTTP request with cookie that sets a domain, expiry, etc","body":"<p>I can easily write Java client code that specify a cookie, where the cookie has a <strong>name</strong> and <strong>value</strong>. However, I cannot get this working for a cookie that also needs to specify a <strong>domain</strong>, and/or an <strong>expiry</strong>, and/or a <strong>path</strong>.</p>\n<p>When i specify my cookie as:</p>\n<pre><code>cookieName=cookieValue; Expires=Wed, 21 Jun 2023 10:00:00 GMT; Domain=example.com\n</code></pre>\n<p>2 cookies are created, (as in, this is what the server sees),</p>\n<pre><code>cookieName=cookieValue\nDomain=example.com\n</code></pre>\n<p>I am able to easily replicate this using Spring Boot setup;</p>\n<pre><code>package com.example;\n\nimport org.junit.jupiter.api.Test;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.boot.test.context.SpringBootTest;\nimport org.springframework.boot.test.web.client.TestRestTemplate;\nimport org.springframework.http.HttpHeaders;\nimport org.springframework.http.HttpMethod;\nimport org.springframework.http.RequestEntity;\n\nimport java.net.URI;\n\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\nclass TestTest {\n\n  @Value(value = &quot;${local.server.port}&quot;)\n  private int port;\n\n  @Autowired\n  private TestRestTemplate client;\n\n  @Test\n  public void cookie() {\n\n    // Setup\n    final HttpHeaders headers = new HttpHeaders();\n    headers.add(HttpHeaders.COOKIE, &quot;cookieName=cookieValue; Expires=Wed, 21 Jun 2023 10:00:00 GMT; Domain=example.com&quot;);\n\n    // Create the RequestEntity with the desired HTTP method, URL, and headers\n    RequestEntity&lt;Void&gt; requestEntity = new RequestEntity&lt;&gt;(headers, HttpMethod.GET, URI.create(&quot;http://localhost:&quot; + port + &quot;/test&quot;));\n\n    // Send the request and print the response\n    System.out.println(client.exchange(requestEntity, String.class));\n  }\n}\n</code></pre>\n<pre><code>package com.example;\n\n\nimport jakarta.servlet.http.HttpServletRequest;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\nimport java.util.Arrays;\nimport java.util.List;\nimport java.util.stream.Collectors;\nimport java.util.stream.Stream;\n\n@RestController\npublic class TestController {\n  @GetMapping(&quot;/test&quot;)\n  public ResponseEntity&lt;List&lt;String&gt;&gt; test(HttpServletRequest request) {\n    Stream&lt;String&gt; stringStream = Arrays.stream(request.getCookies()).map(it -&gt; String.format(&quot;Name: %s, Value: %s, Domain: %s, Path: %s, Age: %s&quot;, it.getName(), it.getValue(), it.getDomain(), it.getPath(), it.getMaxAge()));\n    return ResponseEntity.status(HttpStatus.OK).body(stringStream.collect(Collectors.toList()));\n  }\n}\n\n</code></pre>\n<p>Output:</p>\n<pre><code>&lt;200 OK \n  OK,[&quot;Name: cookieName, Value: cookieValue, Domain: null, Path: null, Age: -1&quot;,\n      &quot;Name: Domain, Value: example.com, Domain: null, Path: null, Age: -1&quot;],\n  [Content-Type:&quot;application/json&quot;, \n   Transfer-Encoding:&quot;chunked&quot;, \n   Date:&quot;Thu, 15 Jun 2023 21:19:18 GMT&quot;, \n   Keep-Alive:&quot;timeout=60&quot;, \n   Connection:&quot;keep-alive&quot;]&gt;\n</code></pre>\n<p>I am baffled, and have tried a a few diff clients and using http servlet types and spring types, but same end result. Not sure if cookie is somehow truncating or what.</p>\n<p>As an example of something else i tried, and had same outcome (i.e. 2 cookies &quot;created&quot; by http request object on the server):</p>\n<pre><code>    org.springframework.http.ResponseCookie cookie = ResponseCookie.from(&quot;meadow&quot;, &quot;SOPRANO&quot;)\n        .path(&quot;/prod&quot;)  // Set the desired path for the cookie\n        .maxAge(3600)  // Set the expiry time in seconds (e.g., 1 hour)\n        .domain(&quot;foo.com&quot;)\n        .build();\n\n    // Setup\n    final HttpHeaders headers = new HttpHeaders();\n    headers.add(HttpHeaders.COOKIE, cookie.toString());\n</code></pre>\n<p>Thanks</p>\n"},{"tags":["java","timezone"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1686817861,"post_id":76480570,"comment_id":134852402,"body_markdown":"Summer time maybe? Find out by debugging/printing which zones are actually used at runtime.","body":"Summer time maybe? Find out by debugging/printing which zones are actually used at runtime."},{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":0,"creation_date":1686817926,"post_id":76480570,"comment_id":134852412,"body_markdown":"Maybe due to `daylight saving time`? [Minimal, reproducible example](https://stackoverflow.com/help/minimal-reproducible-example) would help.","body":"Maybe due to <code>daylight saving time</code>? <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">Minimal, reproducible example</a> would help."},{"owner":{"account_id":2232649,"reputation":455,"user_id":1969863,"accept_rate":64,"display_name":"athabaska"},"score":0,"creation_date":1686818317,"post_id":76480570,"comment_id":134852480,"body_markdown":"We don&#39;t have daylight saving. I am just getting zone=ZoneId.of(&quot;&#39;), and print zone.getRules().getOffset(LocalDateTime.now()). It&#39;s different on this one server.","body":"We don&#39;t have daylight saving. I am just getting zone=ZoneId.of(&quot;&#39;), and print zone.getRules().getOffset(LocalDateTime.now()). It&#39;s different on this one server."},{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":0,"creation_date":1686819774,"post_id":76480570,"comment_id":134852798,"body_markdown":"What is the `ZoneId.systemDefault()` in the servers? Do they all have the same default id or does the server that prints a different offset have a different zone id?","body":"What is the <code>ZoneId.systemDefault()</code> in the servers? Do they all have the same default id or does the server that prints a different offset have a different zone id?"},{"owner":{"account_id":2232649,"reputation":455,"user_id":1969863,"accept_rate":64,"display_name":"athabaska"},"score":0,"creation_date":1686829487,"post_id":76480570,"comment_id":134854784,"body_markdown":"System default is same as the one I use. On all servers daylight savings for now are PT0S, which I understand means no savings. When I print zone.getRules(), it says &quot;currentStandardOffset=+03:00&quot; on correct servers, and &quot;+04:00&quot; for bad one.","body":"System default is same as the one I use. On all servers daylight savings for now are PT0S, which I understand means no savings. When I print zone.getRules(), it says &quot;currentStandardOffset=+03:00&quot; on correct servers, and &quot;+04:00&quot; for bad one."},{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1686829718,"post_id":76480570,"comment_id":134854838,"body_markdown":"Printed how? What are you doing? Please provide a [minimal reproducible example](http://stackoverflow.com/help/minimal-reproducible-example).","body":"Printed how? What are you doing? Please provide a <a href=\"http://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."},{"owner":{"account_id":2232649,"reputation":455,"user_id":1969863,"accept_rate":64,"display_name":"athabaska"},"score":0,"creation_date":1686830511,"post_id":76480570,"comment_id":134855019,"body_markdown":"Added block to question","body":"Added block to question"}],"answers":[{"tags":[],"owner":{"account_id":2232649,"reputation":455,"user_id":1969863,"accept_rate":64,"display_name":"athabaska"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686864893,"creation_date":1686864893,"answer_id":76485666,"question_id":76480570,"body_markdown":" I just updated Java on the target server to latest version, and problem is gone.\r\n","title":"Timezone offset is incorrect in Java","body":"<p>I just updated Java on the target server to latest version, and problem is gone.</p>\n"}],"owner":{"account_id":2232649,"reputation":455,"user_id":1969863,"accept_rate":64,"display_name":"athabaska"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":88,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686864893,"creation_date":1686817759,"question_id":76480570,"body_markdown":"I was trying to find why on one of our windows servers Java application performs tasks one hour earlier than its supposed to.\r\n\r\nPrinted our time ZoneId offset - its +4 instead of +3. Java version is 1.8, same as other servers. Date and time settings in windows seem to be correct, timezone is +3 as it&#39;s supposed to be.\r\n\r\nI am not sure what to do - should I work around this in code somehow, or there is timezone settings somewhere in jre, which I can edit.\r\n\r\n\r\n----------\r\n\r\nThe code I use to see offset:\r\n\r\n    ZoneId def = ZoneId.systemDefault();\r\n    System.out.println(def.getRules().toString());\r\n\r\nOutput on bad server is &quot;ZoneRules[currentStandardOffset=+04:00]&quot;.\r\nMust be &quot;ZoneRules[currentStandardOffset=+03:00]&quot;.","title":"Timezone offset is incorrect in Java","body":"<p>I was trying to find why on one of our windows servers Java application performs tasks one hour earlier than its supposed to.</p>\n<p>Printed our time ZoneId offset - its +4 instead of +3. Java version is 1.8, same as other servers. Date and time settings in windows seem to be correct, timezone is +3 as it's supposed to be.</p>\n<p>I am not sure what to do - should I work around this in code somehow, or there is timezone settings somewhere in jre, which I can edit.</p>\n<hr />\n<p>The code I use to see offset:</p>\n<pre><code>ZoneId def = ZoneId.systemDefault();\nSystem.out.println(def.getRules().toString());\n</code></pre>\n<p>Output on bad server is &quot;ZoneRules[currentStandardOffset=+04:00]&quot;.\nMust be &quot;ZoneRules[currentStandardOffset=+03:00]&quot;.</p>\n"},{"tags":["java","concurrency"],"comments":[{"owner":{"account_id":10326,"reputation":9293,"user_id":19450,"display_name":"Ben Manes"},"score":0,"creation_date":1686769752,"post_id":76471096,"comment_id":134846323,"body_markdown":"Guava offers `MoreExecutors.newSequentialExecutor(delegate)` and `ExecutionSequencer`, but lack those additional requirements. My personal trick is to chain `CompletableFuture` by keeping the tail reference and use a Semaphore to bound the size. Examples: [PolicyActor](https://github.com/ben-manes/caffeine/blob/master/simulator/src/main/java/com/github/benmanes/caffeine/cache/simulator/policy/PolicyActor.java), [EventDispatcher](https://github.com/ben-manes/caffeine/blob/master/jcache/src/main/java/com/github/benmanes/caffeine/jcache/event/EventDispatcher.java).","body":"Guava offers <code>MoreExecutors.newSequentialExecutor(delegate)</code> and <code>ExecutionSequencer</code>, but lack those additional requirements. My personal trick is to chain <code>CompletableFuture</code> by keeping the tail reference and use a Semaphore to bound the size. Examples: <a href=\"https://github.com/ben-manes/caffeine/blob/master/simulator/src/main/java/com/github/benmanes/caffeine/cache/simulator/policy/PolicyActor.java\" rel=\"nofollow noreferrer\">PolicyActor</a>, <a href=\"https://github.com/ben-manes/caffeine/blob/master/jcache/src/main/java/com/github/benmanes/caffeine/jcache/event/EventDispatcher.java\" rel=\"nofollow noreferrer\">EventDispatcher</a>."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1686927257,"post_id":76471096,"comment_id":134870238,"body_markdown":"What’s the difference between this “serial executor” and a `ThreadPoolExecutor` configured to have exactly one thread?","body":"What’s the difference between this “serial executor” and a <code>ThreadPoolExecutor</code> configured to have exactly one thread?"}],"owner":{"account_id":1308925,"reputation":1067,"user_id":1257349,"accept_rate":30,"display_name":"meijuh"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686863090,"creation_date":1686727902,"question_id":76471096,"body_markdown":"I&#39;m looking for an off-the-shelf lockless serial executor. A serial executor allows concurrent enqueuing of tasks and serial processing of enqueued tasks. I already found [this example][1] which looks thread-safe. However, I&#39;m afraid those `synchronized` keywords may cause too much unnecessary contention, especially during enqueuing. The reason I&#39;m asking here for an off-the-shelf one is because writing a thread-safe lockless serial executor myself is far from trivial.\r\n\r\nSimilar to Spring&#39;s example of [ConcurrentWebSocketSessionDecorator.java][2], if possible, the lockless serial executor should have at least the following features:\r\n1. an overflow strategy,\r\n2. support for bounded queues.\r\n\r\nMaybe, there are alternative names for a &quot;serial executor&quot;, which would guide me in my search. That would be helpful too.\r\n\r\n  [1]: https://github.com/kabutz/javaspecialists/blob/master/src/main/java/eu/javaspecialists/tjsn/concurrency/util/SerialExecutor.java\r\n  [2]: https://github.com/spring-projects/spring-framework/blob/main/spring-websocket/src/main/java/org/springframework/web/socket/handler/ConcurrentWebSocketSessionDecorator.java","title":"Lockless serial executor","body":"<p>I'm looking for an off-the-shelf lockless serial executor. A serial executor allows concurrent enqueuing of tasks and serial processing of enqueued tasks. I already found <a href=\"https://github.com/kabutz/javaspecialists/blob/master/src/main/java/eu/javaspecialists/tjsn/concurrency/util/SerialExecutor.java\" rel=\"nofollow noreferrer\">this example</a> which looks thread-safe. However, I'm afraid those <code>synchronized</code> keywords may cause too much unnecessary contention, especially during enqueuing. The reason I'm asking here for an off-the-shelf one is because writing a thread-safe lockless serial executor myself is far from trivial.</p>\n<p>Similar to Spring's example of <a href=\"https://github.com/spring-projects/spring-framework/blob/main/spring-websocket/src/main/java/org/springframework/web/socket/handler/ConcurrentWebSocketSessionDecorator.java\" rel=\"nofollow noreferrer\">ConcurrentWebSocketSessionDecorator.java</a>, if possible, the lockless serial executor should have at least the following features:</p>\n<ol>\n<li>an overflow strategy,</li>\n<li>support for bounded queues.</li>\n</ol>\n<p>Maybe, there are alternative names for a &quot;serial executor&quot;, which would guide me in my search. That would be helpful too.</p>\n"},{"tags":["java","json","string","string-comparison"],"comments":[{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1686863066,"post_id":76485448,"comment_id":134860637,"body_markdown":"In retrospect, the VTC should be to link to this answer: https://stackoverflow.com/questions/56653323/s-doesnt-actually-capture-all-whitespace-characters - the &#39;weird whitespace&#39; is, amongst other things, [NARROW NO-BREAK SPACE](https://www.fileformat.info/info/unicode/char/202f/index.htm) - which `\\\\s` doesn&#39;t actually capture.","body":"In retrospect, the VTC should be to link to this answer: <a href=\"https://stackoverflow.com/questions/56653323/s-doesnt-actually-capture-all-whitespace-characters\" title=\"s doesnt actually capture all whitespace characters\">stackoverflow.com/questions/56653323/&hellip;</a> - the &#39;weird whitespace&#39; is, amongst other things, <a href=\"https://www.fileformat.info/info/unicode/char/202f/index.htm\" rel=\"nofollow noreferrer\">NARROW NO-BREAK SPACE</a> - which <code>\\\\s</code> doesn&#39;t actually capture."},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1686863103,"post_id":76485448,"comment_id":134860641,"body_markdown":"more generally you misunderstood `\\\\s`. `\\\\s` doesn&#39;t mean any whitespace. I know the tutorials say that, but they are all just plain wrong. It, specifically, refers __only__ to ASCII whitespace symbols: Tab, space, line break, and carriage return. Not things like no-break space and the like.","body":"more generally you misunderstood <code>\\\\s</code>. <code>\\\\s</code> doesn&#39;t mean any whitespace. I know the tutorials say that, but they are all just plain wrong. It, specifically, refers <b>only</b> to ASCII whitespace symbols: Tab, space, line break, and carriage return. Not things like no-break space and the like."}],"owner":{"account_id":16235333,"reputation":1,"user_id":11722932,"display_name":"Shahnawaz Syed"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1686864246,"answer_count":0,"score":0,"last_activity_date":1686862431,"creation_date":1686862431,"question_id":76485448,"body_markdown":"I am trying to compare two strings in my program. One is sourced from a spreadsheet the other is sourced from a JSONArray. \r\n\r\n```\r\nJSONArray String: &quot;Monday: 7:00 AM – 4:00 PM&quot;\r\nSpreadsheet String: &quot;Monday: 7:00 AM – 4:00 PM&quot;\r\n```\r\n\r\nObviously they appear to be equal but when using `.equals()` it returns false. I suspect that the reason is that the JSON File (outputs a different length of whitespace than the spreadsheet. I was able to confirm this using a Diff checker (&quot; &quot; vs &quot; &quot;).\r\n\r\n\r\nI have tried using `.replaceAll(&quot;\\\\s+&quot;,&quot; &quot;)` on both Strings but I am still getting a false result when I compare them. ","title":"Comparing two Strings with different types/lengths of whitespace using Java","body":"<p>I am trying to compare two strings in my program. One is sourced from a spreadsheet the other is sourced from a JSONArray.</p>\n<pre><code>JSONArray String: &quot;Monday: 7:00 AM – 4:00 PM&quot;\nSpreadsheet String: &quot;Monday: 7:00 AM – 4:00 PM&quot;\n</code></pre>\n<p>Obviously they appear to be equal but when using <code>.equals()</code> it returns false. I suspect that the reason is that the JSON File (outputs a different length of whitespace than the spreadsheet. I was able to confirm this using a Diff checker (&quot; &quot; vs &quot; &quot;).</p>\n<p>I have tried using <code>.replaceAll(&quot;\\\\s+&quot;,&quot; &quot;)</code> on both Strings but I am still getting a false result when I compare them.</p>\n"},{"tags":["java","url","uri","classpath"],"answers":[{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686862221,"creation_date":1686862221,"answer_id":76485425,"question_id":76485258,"body_markdown":"As per the _JavaDoc_, it looks like it will be any _url_ that is not in compliance to _[RFC 2396](https://www.ietf.org/rfc/rfc2396.txt)_.\r\n\r\n&gt; _&quot;... Note, any URL instance that complies with RFC 2396 can be converted to a URI. However, some URLs that are not strictly in compliance can not be converted to a URI. ...&quot;_\r\n\r\nHere is the RFC for a _url_, if you&#39;d like to compare the grammar&amp;mdash;section 2.  \r\n_[RFC 1738 &amp;ndash; Uniform Resource Locators (URL)](https://datatracker.ietf.org/doc/html/rfc1738)_.","title":"Can a Java resource URL be an invalid URI?","body":"<p>As per the <em>JavaDoc</em>, it looks like it will be any <em>url</em> that is not in compliance to <em><a href=\"https://www.ietf.org/rfc/rfc2396.txt\" rel=\"nofollow noreferrer\">RFC 2396</a></em>.</p>\n<blockquote>\n<p><em>&quot;... Note, any URL instance that complies with RFC 2396 can be converted to a URI. However, some URLs that are not strictly in compliance can not be converted to a URI. ...&quot;</em></p>\n</blockquote>\n<p>Here is the RFC for a <em>url</em>, if you'd like to compare the grammar—section 2.<br />\n<em><a href=\"https://datatracker.ietf.org/doc/html/rfc1738\" rel=\"nofollow noreferrer\">RFC 1738 – Uniform Resource Locators (URL)</a></em>.</p>\n"}],"owner":{"account_id":459254,"reputation":986,"user_id":859604,"display_name":"Olivier Cailloux"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686862221,"creation_date":1686860488,"question_id":76485258,"body_markdown":"Calling [`Class#getResource(String)`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Class.html#getResource(java.lang.String)) in Java returns a `URL`.  And a Java `URL` can, in general, be an [invalid](https://stackoverflow.com/questions/23384311/an-example-of-url-which-cannot-be-converted-touri) `URI`. By “invalid URI” I mean here being a URL that throws an `URISyntaxException` when calling [`toURI()`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/net/URL.html#toURI()).\r\n\r\nAre there some guarantees that this will not happen? That is: does the language guarantee that `getResource` will return a `URL` of the sort that can be converted to a `URI`? Otherwise, can anybody provide a – possibly hypothetical – example?\r\n","title":"Can a Java resource URL be an invalid URI?","body":"<p>Calling <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Class.html#getResource(java.lang.String)\" rel=\"nofollow noreferrer\"><code>Class#getResource(String)</code></a> in Java returns a <code>URL</code>.  And a Java <code>URL</code> can, in general, be an <a href=\"https://stackoverflow.com/questions/23384311/an-example-of-url-which-cannot-be-converted-touri\">invalid</a> <code>URI</code>. By “invalid URI” I mean here being a URL that throws an <code>URISyntaxException</code> when calling <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/net/URL.html#toURI()\" rel=\"nofollow noreferrer\"><code>toURI()</code></a>.</p>\n<p>Are there some guarantees that this will not happen? That is: does the language guarantee that <code>getResource</code> will return a <code>URL</code> of the sort that can be converted to a <code>URI</code>? Otherwise, can anybody provide a – possibly hypothetical – example?</p>\n"},{"tags":["java","postgresql","google-cloud-platform","jdbc","quarkus"],"comments":[{"owner":{"account_id":15760814,"reputation":68973,"user_id":11372593,"display_name":"guillaume blaquiere"},"score":0,"creation_date":1686691440,"post_id":76468701,"comment_id":134833589,"body_markdown":"What&#39;s the XXX format?","body":"What&#39;s the XXX format?"},{"owner":{"account_id":10383987,"reputation":2344,"user_id":7657749,"display_name":"Jan D.M."},"score":0,"creation_date":1686692205,"post_id":76468701,"comment_id":134833696,"body_markdown":"Well, at the moment I entered the incoming ip address instead of &#39;xxx&#39; , but that does not seem to work","body":"Well, at the moment I entered the incoming ip address instead of &#39;xxx&#39; , but that does not seem to work"},{"owner":{"account_id":15760814,"reputation":68973,"user_id":11372593,"display_name":"guillaume blaquiere"},"score":0,"creation_date":1686736849,"post_id":76468701,"comment_id":134839123,"body_markdown":"ok replace XXX by your database name.","body":"ok replace XXX by your database name."},{"owner":{"account_id":10383987,"reputation":2344,"user_id":7657749,"display_name":"Jan D.M."},"score":0,"creation_date":1686740717,"post_id":76468701,"comment_id":134839891,"body_markdown":"That is basically my question. What is the database name? I can see a connection name, a service account, but not a database name","body":"That is basically my question. What is the database name? I can see a connection name, a service account, but not a database name"},{"owner":{"account_id":15760814,"reputation":68973,"user_id":11372593,"display_name":"guillaume blaquiere"},"score":1,"creation_date":1686743998,"post_id":76468701,"comment_id":134840587,"body_markdown":"XXX must be the database name. When you create your Cloud SQL instance, it&#39;s a database engine with default database and you can also create your own database. Use that database name instead of XXX: https://cloud.google.com/sql/docs/mysql/create-manage-databases","body":"XXX must be the database name. When you create your Cloud SQL instance, it&#39;s a database engine with default database and you can also create your own database. Use that database name instead of XXX: <a href=\"https://cloud.google.com/sql/docs/mysql/create-manage-databases\" rel=\"nofollow noreferrer\">cloud.google.com/sql/docs/mysql/create-manage-databases</a>"}],"answers":[{"tags":[],"owner":{"account_id":25423833,"reputation":1324,"user_id":19229284,"display_name":"Chanpols"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1686861183,"creation_date":1686861183,"answer_id":76485329,"question_id":76468701,"body_markdown":"Posting this as a community wiki so that others can benefit from it.\r\n&lt;hr&gt;\r\nAs mentioned by @guillaume blaquiere:\r\n\r\n&gt; XXX must be the database name. When you create your Cloud SQL instance, it&#39;s a database engine with a default database and you can also create your own database.\r\n&lt;hr&gt;\r\nReference:\r\n\r\n - [Create and manage databases](https://cloud.google.com/sql/docs/mysql/create-manage-databases)","title":"How to set database jdbc url for Google Cloud SQL on quarkus?","body":"<p>Posting this as a community wiki so that others can benefit from it.</p>\n<hr>\nAs mentioned by @guillaume blaquiere:\n<blockquote>\n<p>XXX must be the database name. When you create your Cloud SQL instance, it's a database engine with a default database and you can also create your own database.</p>\n</blockquote>\n<hr>\nReference:\n<ul>\n<li><a href=\"https://cloud.google.com/sql/docs/mysql/create-manage-databases\" rel=\"nofollow noreferrer\">Create and manage databases</a></li>\n</ul>\n"}],"owner":{"account_id":10383987,"reputation":2344,"user_id":7657749,"display_name":"Jan D.M."},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":149,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76485329,"answer_count":1,"score":0,"last_activity_date":1686861183,"creation_date":1686690308,"question_id":76468701,"body_markdown":"I am trying to put my PostgreSQL DB onto Google Cloud SQL but encounter an error. To reproduce the error I do the following: \r\n\r\n 1. `mvn install`\r\n 2. `export GOOGLE_APPLICATION_CREDENTIALS=yyy.json`\r\n 3. `java -jar target/quarkus-app/quarkus-run.jar`\r\n\r\nWhich throws the following error:\r\n\r\n`org.postgresql.util.PSQLException: FATAL: database &quot;XXX&quot; does not exist`\r\n\r\nWhen looking at the official [documentation of quarkus][1] it mentions that I need to set the following properties:\r\n\r\n```\r\nquarkus.datasource.db-kind=other \r\nquarkus.datasource.jdbc.url=jdbc:postgresql:///XXX \r\nquarkus.datasource.jdbc.driver=org.postgresql.Driver\r\nquarkus.datasource.username=quarkus\r\nquarkus.datasource.password=quarkus\r\nquarkus.datasource.jdbc.additional-jdbc-properties.cloudSqlInstance=project-id:gcp-region:instance \r\nquarkus.datasource.jdbc.additional-jdbc-properties.socketFactory=com.google.cloud.sql.postgres.SocketFactory \r\n```\r\nI assume I did not enter the correct database name on the second line (`quarkus.datasource.jdbc.url`)\r\nWhat url should be given as a property? The public IP address, the connection name, ...?\r\n\r\n  [1]: https://quarkus.io/guides/deploying-to-google-cloud#using-cloud-sql-with-a-jdbc-driver","title":"How to set database jdbc url for Google Cloud SQL on quarkus?","body":"<p>I am trying to put my PostgreSQL DB onto Google Cloud SQL but encounter an error. To reproduce the error I do the following:</p>\n<ol>\n<li><code>mvn install</code></li>\n<li><code>export GOOGLE_APPLICATION_CREDENTIALS=yyy.json</code></li>\n<li><code>java -jar target/quarkus-app/quarkus-run.jar</code></li>\n</ol>\n<p>Which throws the following error:</p>\n<p><code>org.postgresql.util.PSQLException: FATAL: database &quot;XXX&quot; does not exist</code></p>\n<p>When looking at the official <a href=\"https://quarkus.io/guides/deploying-to-google-cloud#using-cloud-sql-with-a-jdbc-driver\" rel=\"nofollow noreferrer\">documentation of quarkus</a> it mentions that I need to set the following properties:</p>\n<pre><code>quarkus.datasource.db-kind=other \nquarkus.datasource.jdbc.url=jdbc:postgresql:///XXX \nquarkus.datasource.jdbc.driver=org.postgresql.Driver\nquarkus.datasource.username=quarkus\nquarkus.datasource.password=quarkus\nquarkus.datasource.jdbc.additional-jdbc-properties.cloudSqlInstance=project-id:gcp-region:instance \nquarkus.datasource.jdbc.additional-jdbc-properties.socketFactory=com.google.cloud.sql.postgres.SocketFactory \n</code></pre>\n<p>I assume I did not enter the correct database name on the second line (<code>quarkus.datasource.jdbc.url</code>)\nWhat url should be given as a property? The public IP address, the connection name, ...?</p>\n"},{"tags":["java","selenium-webdriver","webdriver","geckodriver","java-20"],"answers":[{"tags":[],"owner":{"account_id":10049107,"reputation":186647,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686860640,"creation_date":1686860640,"answer_id":76485277,"question_id":76485246,"body_markdown":"Initializing _Firefox_ with _GeckoDriver_\r\n---------------------------------\r\nUsing [Selenium](https://stackoverflow.com/a/54482491/7429447) _**v4.10.0**_, [GeckoDriver](https://stackoverflow.com/a/45331403/7429447) _**v0.33.0**_ and [tag:firefox] _**v114.0.1**_ you can use the minimum code block:\r\n\r\n\tWebDriver driver = new FirefoxDriver();\r\n\tdriver.get(&quot;https://www.selenium.dev/&quot;);\r\n\t\r\nConsole Output:\r\n\r\n\tJun 11, 2023 3:58:24 AM org.openqa.selenium.remote.service.DriverService$Builder getLogOutput\r\n\tINFO: Driver logs no longer sent to console by default; https://www.selenium.dev/documentation/webdriver/drivers/service/#setting-log-output\r\n\r\n","title":"How to initialize firefox with a Selenium Java project using Java 20","body":"<h2>Initializing <em>Firefox</em> with <em>GeckoDriver</em></h2>\n<p>Using <a href=\"https://stackoverflow.com/a/54482491/7429447\">Selenium</a> <em><strong>v4.10.0</strong></em>, <a href=\"https://stackoverflow.com/a/45331403/7429447\">GeckoDriver</a> <em><strong>v0.33.0</strong></em> and <a href=\"/questions/tagged/firefox\" class=\"post-tag\" title=\"show questions tagged &#39;firefox&#39;\" aria-label=\"show questions tagged &#39;firefox&#39;\" rel=\"tag\" aria-labelledby=\"tag-firefox-tooltip-container\">firefox</a> <em><strong>v114.0.1</strong></em> you can use the minimum code block:</p>\n<pre><code>WebDriver driver = new FirefoxDriver();\ndriver.get(&quot;https://www.selenium.dev/&quot;);\n</code></pre>\n<p>Console Output:</p>\n<pre><code>Jun 11, 2023 3:58:24 AM org.openqa.selenium.remote.service.DriverService$Builder getLogOutput\nINFO: Driver logs no longer sent to console by default; https://www.selenium.dev/documentation/webdriver/drivers/service/#setting-log-output\n</code></pre>\n"}],"owner":{"account_id":26796478,"reputation":11,"user_id":20389146,"display_name":"Mrym"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":212,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686860776,"creation_date":1686860365,"question_id":76485246,"body_markdown":"Which version of geckodriver should I use for Java version 20 and selenium  v4.10.0 ?\r\nwhile my firefox is 114. when I use geckodriver 0.33.0 I get this error:\r\n\r\n    Exception in thread &quot;main&quot; org.openqa.selenium.remote.NoSuchDriverException: geckodriver located at path, but invalid","title":"How to initialize firefox with a Selenium Java project using Java 20","body":"<p>Which version of geckodriver should I use for Java version 20 and selenium  v4.10.0 ?\nwhile my firefox is 114. when I use geckodriver 0.33.0 I get this error:</p>\n<pre><code>Exception in thread &quot;main&quot; org.openqa.selenium.remote.NoSuchDriverException: geckodriver located at path, but invalid\n</code></pre>\n"},{"tags":["java","spring-boot","selenium-webdriver"],"comments":[{"owner":{"account_id":8648244,"reputation":367,"user_id":6474819,"accept_rate":89,"display_name":"M. Rogers"},"score":0,"creation_date":1686767907,"post_id":76476630,"comment_id":134846014,"body_markdown":"Can you post a little code snippet where the error occurs?","body":"Can you post a little code snippet where the error occurs?"},{"owner":{"account_id":28125462,"reputation":1,"user_id":21490964,"display_name":"Lucas G&#252;imil"},"score":0,"creation_date":1686768487,"post_id":76476630,"comment_id":134846110,"body_markdown":"@M.Rogers yes, i have just done it!!! there it is","body":"@M.Rogers yes, i have just done it!!! there it is"}],"answers":[{"tags":[],"owner":{"account_id":10049107,"reputation":186647,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686773845,"creation_date":1686773845,"answer_id":76477242,"question_id":76476630,"body_markdown":"This error message...\r\n\r\n\t2023-06-14T15:27:44.720-03:00  WARN 10544 --- [cHttpClient-1-4] o.a.netty.handler.WebSocketHandler       : onError\r\n\tjava.net.SocketException: Connection reset\r\n\r\n...implies that [SocketException](https://stackoverflow.com/a/75303602/7429447) occured while [WebDriver](https://stackoverflow.com/a/48080871/7429447) was initializing the client.\r\n\r\n\r\n----------\r\n\r\n\r\njava.net.SocketException: Connection reset\r\n------------------------------------------\r\n[java.net.SocketException](https://www.geeksforgeeks.org/java-net-socketexception-in-java-with-examples/) may occur due to several possible reasons as follows:\r\n\r\n- It can occur on the server-side when the client closed the socket connection before the response could be returned over the socket. For example, by quitting the browser before the response was retrieved.\r\n- It can also occur by writing to a connection that the other end has already closed normally resulting in an application protocol error.\r\n\r\nBut in majority of the cases using [Selenium](https://stackoverflow.com/a/54482491/7429447) the main reason seems to _incorrect libraries_ being added/used.\r\n\r\n\r\n----------\r\n\r\n\r\nSolution\r\n--------\r\nTo get rid of this issue remove all the jars/libraries and download latest stable [**selenium-server-4.10.0.jar**](https://www.selenium.dev/downloads/), add to your project and execute your test.\r\n\r\nSample Code:\r\n\r\n\tpackage Day1;\r\n\r\n\timport org.openqa.selenium.WebDriver;\r\n\timport org.openqa.selenium.firefox.FirefoxDriver;\r\n\r\n\tpublic class genericTestFirefox {\r\n\r\n\t\tpublic static void main(String[] args) {\r\n\r\n\t\t\tWebDriver driver = new FirefoxDriver();\r\n\t\t\tdriver.get(&quot;https://www.google.com/&quot;);\r\n\t\t}\r\n\t}\r\n\t\r\nConsole Output:\r\n\r\n\tJun 15, 2023 1:44:30 AM org.openqa.selenium.remote.service.DriverService$Builder getLogOutput\r\n\tINFO: Driver logs no longer sent to console by default; https://www.selenium.dev/documentation/webdriver/drivers/service/#setting-log-output\t","title":"JAVA + SpringBoot + Selenium Automation","body":"<p>This error message...</p>\n<pre><code>2023-06-14T15:27:44.720-03:00  WARN 10544 --- [cHttpClient-1-4] o.a.netty.handler.WebSocketHandler       : onError\njava.net.SocketException: Connection reset\n</code></pre>\n<p>...implies that <a href=\"https://stackoverflow.com/a/75303602/7429447\">SocketException</a> occured while <a href=\"https://stackoverflow.com/a/48080871/7429447\">WebDriver</a> was initializing the client.</p>\n<hr />\n<h2>java.net.SocketException: Connection reset</h2>\n<p><a href=\"https://www.geeksforgeeks.org/java-net-socketexception-in-java-with-examples/\" rel=\"nofollow noreferrer\">java.net.SocketException</a> may occur due to several possible reasons as follows:</p>\n<ul>\n<li>It can occur on the server-side when the client closed the socket connection before the response could be returned over the socket. For example, by quitting the browser before the response was retrieved.</li>\n<li>It can also occur by writing to a connection that the other end has already closed normally resulting in an application protocol error.</li>\n</ul>\n<p>But in majority of the cases using <a href=\"https://stackoverflow.com/a/54482491/7429447\">Selenium</a> the main reason seems to <em>incorrect libraries</em> being added/used.</p>\n<hr />\n<h2>Solution</h2>\n<p>To get rid of this issue remove all the jars/libraries and download latest stable <a href=\"https://www.selenium.dev/downloads/\" rel=\"nofollow noreferrer\"><strong>selenium-server-4.10.0.jar</strong></a>, add to your project and execute your test.</p>\n<p>Sample Code:</p>\n<pre><code>package Day1;\n\nimport org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.firefox.FirefoxDriver;\n\npublic class genericTestFirefox {\n\n    public static void main(String[] args) {\n\n        WebDriver driver = new FirefoxDriver();\n        driver.get(&quot;https://www.google.com/&quot;);\n    }\n}\n</code></pre>\n<p>Console Output:</p>\n<pre><code>Jun 15, 2023 1:44:30 AM org.openqa.selenium.remote.service.DriverService$Builder getLogOutput\nINFO: Driver logs no longer sent to console by default; https://www.selenium.dev/documentation/webdriver/drivers/service/#setting-log-output    \n</code></pre>\n"}],"owner":{"account_id":28125462,"reputation":1,"user_id":21490964,"display_name":"Lucas G&#252;imil"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":80,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686860475,"creation_date":1686767769,"question_id":76476630,"body_markdown":"When I run the project everything goes just fine, but in the middle of the test the browser closes itself and console throws me the following error\r\n\r\n```\r\n2023-06-14T15:27:44.720-03:00  WARN 10544 --- [cHttpClient-1-4] o.a.netty.handler.WebSocketHandler       : onError\r\n\r\njava.net.SocketException: Connection reset\r\n\tat java.base/sun.nio.ch.SocketChannelImpl.throwConnectionReset(SocketChannelImpl.java:394) ~[na:na]\r\n\tat java.base/sun.nio.ch.SocketChannelImpl.read(SocketChannelImpl.java:426) ~[na:na]\r\n\tat io.netty.buffer.PooledByteBuf.setBytes(PooledByteBuf.java:256) ~[netty-buffer-4.1.92.Final.jar:4.1.92.Final]\r\n\tat io.netty.buffer.AbstractByteBuf.writeBytes(AbstractByteBuf.java:1132) ~[netty-buffer-4.1.92.Final.jar:4.1.92.Final]\r\n\tat io.netty.channel.socket.nio.NioSocketChannel.doReadBytes(NioSocketChannel.java:357) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]\r\n\tat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:151) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]\r\n\tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]\r\n\tat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]\r\n\tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]\r\n\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]\r\n\tat java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\r\n\r\n2023-06-14T15:27:44.736-03:00  WARN 10544 --- [cHttpClient-1-4] o.openqa.selenium.remote.http.WebSocket  : Connection reset\r\n\r\njava.net.SocketException: Connection reset\r\n\tat java.base/sun.nio.ch.SocketChannelImpl.throwConnectionReset(SocketChannelImpl.java:394) ~[na:na]\r\n\tat java.base/sun.nio.ch.SocketChannelImpl.read(SocketChannelImpl.java:426) ~[na:na]\r\n\tat io.netty.buffer.PooledByteBuf.setBytes(PooledByteBuf.java:256) ~[netty-buffer-4.1.92.Final.jar:4.1.92.Final]\r\n\tat io.netty.buffer.AbstractByteBuf.writeBytes(AbstractByteBuf.java:1132) ~[netty-buffer-4.1.92.Final.jar:4.1.92.Final]\r\n\tat io.netty.channel.socket.nio.NioSocketChannel.doReadBytes(NioSocketChannel.java:357) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]\r\n\tat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:151) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]\r\n\tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]\r\n\tat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]\r\n\tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]\r\n\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]\r\n\tat java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\r\n\r\n```\r\n\r\nTried changing the network adapter config goint to Internet Protocol 4 and specifying a DNS preferred adress. Then running cmd and using ipconfig /flushdns\r\n                            ipconfig /release \r\n                            ipconfig /renew\r\n                            netsh winsock reset\r\n\r\nStill does not work\r\n\r\n\r\n\r\n\r\n\r\nJUnit tells me that the line where the error happens is in this method\r\n\r\n    public void fillForm(String nombre, String email, String asunto, String mensaje) throws InterruptedException {\r\n\t\tWebElement nombreInput = driver.findElement(By.name(&quot;your-name&quot;));  \r\n\t\tnombreInput.sendKeys(nombre);\r\n\t\tWebElement emailInput = driver.findElement(By.name(&quot;your-email&quot;));\r\n\t    emailInput.sendKeys(email);\r\n\t    WebElement asuntoInput = driver.findElement(By.name(&quot;your-subject&quot;));\r\n\t    asuntoInput.sendKeys(asunto);\r\n\t    WebElement mensajeInput = driver.findElement(By.name(&quot;your-message&quot;));\r\n\t    mensajeInput.sendKeys(mensaje);\r\n\r\n","title":"JAVA + SpringBoot + Selenium Automation","body":"<p>When I run the project everything goes just fine, but in the middle of the test the browser closes itself and console throws me the following error</p>\n<pre><code>2023-06-14T15:27:44.720-03:00  WARN 10544 --- [cHttpClient-1-4] o.a.netty.handler.WebSocketHandler       : onError\n\njava.net.SocketException: Connection reset\n    at java.base/sun.nio.ch.SocketChannelImpl.throwConnectionReset(SocketChannelImpl.java:394) ~[na:na]\n    at java.base/sun.nio.ch.SocketChannelImpl.read(SocketChannelImpl.java:426) ~[na:na]\n    at io.netty.buffer.PooledByteBuf.setBytes(PooledByteBuf.java:256) ~[netty-buffer-4.1.92.Final.jar:4.1.92.Final]\n    at io.netty.buffer.AbstractByteBuf.writeBytes(AbstractByteBuf.java:1132) ~[netty-buffer-4.1.92.Final.jar:4.1.92.Final]\n    at io.netty.channel.socket.nio.NioSocketChannel.doReadBytes(NioSocketChannel.java:357) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]\n    at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:151) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]\n    at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]\n    at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]\n    at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]\n    at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]\n    at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]\n    at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]\n    at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]\n    at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\n\n2023-06-14T15:27:44.736-03:00  WARN 10544 --- [cHttpClient-1-4] o.openqa.selenium.remote.http.WebSocket  : Connection reset\n\njava.net.SocketException: Connection reset\n    at java.base/sun.nio.ch.SocketChannelImpl.throwConnectionReset(SocketChannelImpl.java:394) ~[na:na]\n    at java.base/sun.nio.ch.SocketChannelImpl.read(SocketChannelImpl.java:426) ~[na:na]\n    at io.netty.buffer.PooledByteBuf.setBytes(PooledByteBuf.java:256) ~[netty-buffer-4.1.92.Final.jar:4.1.92.Final]\n    at io.netty.buffer.AbstractByteBuf.writeBytes(AbstractByteBuf.java:1132) ~[netty-buffer-4.1.92.Final.jar:4.1.92.Final]\n    at io.netty.channel.socket.nio.NioSocketChannel.doReadBytes(NioSocketChannel.java:357) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]\n    at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:151) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]\n    at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]\n    at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]\n    at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]\n    at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562) ~[netty-transport-4.1.92.Final.jar:4.1.92.Final]\n    at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]\n    at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]\n    at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.92.Final.jar:4.1.92.Final]\n    at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\n\n</code></pre>\n<p>Tried changing the network adapter config goint to Internet Protocol 4 and specifying a DNS preferred adress. Then running cmd and using ipconfig /flushdns\nipconfig /release\nipconfig /renew\nnetsh winsock reset</p>\n<p>Still does not work</p>\n<p>JUnit tells me that the line where the error happens is in this method</p>\n<pre><code>public void fillForm(String nombre, String email, String asunto, String mensaje) throws InterruptedException {\n    WebElement nombreInput = driver.findElement(By.name(&quot;your-name&quot;));  \n    nombreInput.sendKeys(nombre);\n    WebElement emailInput = driver.findElement(By.name(&quot;your-email&quot;));\n    emailInput.sendKeys(email);\n    WebElement asuntoInput = driver.findElement(By.name(&quot;your-subject&quot;));\n    asuntoInput.sendKeys(asunto);\n    WebElement mensajeInput = driver.findElement(By.name(&quot;your-message&quot;));\n    mensajeInput.sendKeys(mensaje);\n</code></pre>\n"},{"tags":["java","maven","spring-boot","wildfly"],"comments":[{"owner":{"account_id":4181234,"reputation":3257,"user_id":3426201,"display_name":"Assafs"},"score":1,"creation_date":1546518326,"post_id":54021886,"comment_id":94880453,"body_markdown":"Did you consider adding the cdi-api to your pom.xml dependencies? It&#39;s not included within the dependencies you specified. &lt;dependency&gt;\n\t\t\t&lt;groupId&gt;javax.enterprise&lt;/groupId&gt;\n\t\t\t&lt;artifactId&gt;cdi-api&lt;/artifactId&gt;\n\t\t\t&lt;version&gt;1.2&lt;/version&gt;\n\t\t&lt;/dependency&gt;","body":"Did you consider adding the cdi-api to your pom.xml dependencies? It&#39;s not included within the dependencies you specified. &lt;dependency&gt; \t\t\t&lt;groupId&gt;javax.enterprise&lt;/groupId&gt; \t\t\t&lt;artifactId&gt;cdi-api&lt;/artifactId&gt; \t\t\t&lt;version&gt;1.2&lt;/version&gt; \t\t&lt;/dependency&gt;"},{"owner":{"account_id":10966372,"reputation":535,"user_id":8057985,"display_name":"DeooK"},"score":0,"creation_date":1546523609,"post_id":54021886,"comment_id":94883453,"body_markdown":"It works, thanks.\nWhat I don&#39;t understand is why Spring doesn&#39;t include CDI in their parent POM (or, at least, specify that this dependency it&#39;s needed) :/","body":"It works, thanks. What I don&#39;t understand is why Spring doesn&#39;t include CDI in their parent POM (or, at least, specify that this dependency it&#39;s needed) :/"},{"owner":{"account_id":4181234,"reputation":3257,"user_id":3426201,"display_name":"Assafs"},"score":1,"creation_date":1546523732,"post_id":54021886,"comment_id":94883505,"body_markdown":"Cool! I&#39;m glad it worked. If you don&#39;t mind, I&#39;ll post the same information below as an answer? It will be easier to read with the formatting. If this solves the issue, would you mind accepting the answer by clicking on the grey checkmark next to it, making it green?","body":"Cool! I&#39;m glad it worked. If you don&#39;t mind, I&#39;ll post the same information below as an answer? It will be easier to read with the formatting. If this solves the issue, would you mind accepting the answer by clicking on the grey checkmark next to it, making it green?"},{"owner":{"account_id":21994,"reputation":73808,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":1,"creation_date":1546575717,"post_id":54021886,"comment_id":94902081,"body_markdown":"@Assafs No need to prompt users to give you rep.  The system works.","body":"@Assafs No need to prompt users to give you rep.  The system works."}],"answers":[{"comments":[{"owner":{"account_id":3361715,"reputation":388,"user_id":2823380,"display_name":"Tanuj Verma"},"score":2,"creation_date":1569804350,"post_id":54023746,"comment_id":102702807,"body_markdown":"further if error comes kindly add below dependency \n&lt;dependency&gt;\n   &lt;groupId&gt;org.reactivestreams&lt;/groupId&gt;\n   &lt;artifactId&gt;reactive-streams&lt;/artifactId&gt;\n   &lt;version&gt;1.0.1&lt;/version&gt;\n&lt;/dependency&gt;","body":"further if error comes kindly add below dependency  &lt;dependency&gt;    &lt;groupId&gt;org.reactivestreams&lt;/groupId&gt;    &lt;artifactId&gt;reactive-streams&lt;/artifactId&gt;    &lt;version&gt;1.0.1&lt;/version&gt; &lt;/dependency&gt;"}],"tags":[],"owner":{"account_id":4181234,"reputation":3257,"user_id":3426201,"display_name":"Assafs"},"comment_count":1,"down_vote_count":0,"up_vote_count":13,"is_accepted":true,"score":13,"last_activity_date":1546523820,"creation_date":1546523820,"answer_id":54023746,"question_id":54021886,"body_markdown":"As we discussed in the comments, the solution might be as simple as adding the `cdi-api` to your **pom.xml** dependencies. It&#39;s not included within the dependencies you specified. \r\n\r\n    &lt;dependency&gt; \r\n        &lt;groupId&gt;javax.enterprise&lt;/groupId&gt; \r\n        &lt;artifactId&gt;cdi-api&lt;/artifactId&gt; \r\n        &lt;version&gt;1.2&lt;/version&gt; \r\n    &lt;/dependency&gt;","title":"Unable to find CDI BeanManager","body":"<p>As we discussed in the comments, the solution might be as simple as adding the <code>cdi-api</code> to your <strong>pom.xml</strong> dependencies. It's not included within the dependencies you specified. </p>\n\n<pre><code>&lt;dependency&gt; \n    &lt;groupId&gt;javax.enterprise&lt;/groupId&gt; \n    &lt;artifactId&gt;cdi-api&lt;/artifactId&gt; \n    &lt;version&gt;1.2&lt;/version&gt; \n&lt;/dependency&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4640922,"reputation":1498,"user_id":3760816,"display_name":"bupereira"},"score":0,"creation_date":1599355765,"post_id":62851853,"comment_id":112749145,"body_markdown":"This fixed it for me, since my project is not maven.","body":"This fixed it for me, since my project is not maven."}],"tags":[],"owner":{"account_id":3035610,"reputation":516,"user_id":2573786,"display_name":"ogarzonm"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1594485219,"creation_date":1594485219,"answer_id":62851853,"question_id":54021886,"body_markdown":"Remember, is necessary to include the context that start the CDI configuration.\r\n\r\n&gt; &lt;Context&gt;\r\n    &lt;Resource name=&quot;BeanManager&quot; auth=&quot;Container&quot; type=&quot;javax.enterprise.inject.spi.BeanManager&quot; factory=&quot;org.apache.webbeans.container.ManagerObjectFactory&quot; /&gt;\r\n&lt;/Context&gt;\r\n\r\n[You can check the all setup here][1]\r\n\r\nOr you can review this [blog][2] \r\n\r\n  [1]: https://balusc.omnifaces.org/2013/10/how-to-install-cdi-in-tomcat.html\r\n  [2]: http://fritzthecat-blog.blogspot.com/2019/08/jsf-23-maven-project-in-eclipse.html","title":"Unable to find CDI BeanManager","body":"<p>Remember, is necessary to include the context that start the CDI configuration.</p>\n<blockquote>\n\n</blockquote>\n<pre><code>&lt;Resource name=&quot;BeanManager&quot; auth=&quot;Container&quot; type=&quot;javax.enterprise.inject.spi.BeanManager&quot; factory=&quot;org.apache.webbeans.container.ManagerObjectFactory&quot; /&gt;\n</code></pre>\n\n<p><a href=\"https://balusc.omnifaces.org/2013/10/how-to-install-cdi-in-tomcat.html\" rel=\"nofollow noreferrer\">You can check the all setup here</a></p>\n<p>Or you can review this <a href=\"http://fritzthecat-blog.blogspot.com/2019/08/jsf-23-maven-project-in-eclipse.html\" rel=\"nofollow noreferrer\">blog</a></p>\n"},{"tags":[],"owner":{"account_id":8342762,"reputation":950,"user_id":6267583,"accept_rate":100,"display_name":"morecore"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1638291604,"creation_date":1638291604,"answer_id":70173203,"question_id":54021886,"body_markdown":"Not directly related to your Problem, but maybe it might help someone else.\r\n\r\nWe are using SpringBoot with [joinfaces][1], in our case the problem was caused by an error in the `faces-config.xml` - specifically in the header part `&lt;faces-config ...&gt;`. Maybe check your `git`, if the file was updated recently.\r\n\r\n\r\n  [1]: http://joinfaces.org/","title":"Unable to find CDI BeanManager","body":"<p>Not directly related to your Problem, but maybe it might help someone else.</p>\n<p>We are using SpringBoot with <a href=\"http://joinfaces.org/\" rel=\"nofollow noreferrer\">joinfaces</a>, in our case the problem was caused by an error in the <code>faces-config.xml</code> - specifically in the header part <code>&lt;faces-config ...&gt;</code>. Maybe check your <code>git</code>, if the file was updated recently.</p>\n"}],"owner":{"account_id":10966372,"reputation":535,"user_id":8057985,"display_name":"DeooK"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":24675,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":54023746,"answer_count":3,"score":10,"last_activity_date":1686860203,"creation_date":1546516829,"question_id":54021886,"body_markdown":"I&#39;m trying to set up a simple application to use SpringBoot 2.1.1 and Java 11 over Wildfly 14 (because Wildfly 15 isn&#39;t supported by Eclipse).\r\n\r\nThe deploy failed because Wildfly cannot find the CDI BeanManager in the project. I&#39;m only trying to follow the simple (official) tutorial, so I don&#39;t understand why the error appears.\r\n\r\nThis is the code:\r\n\r\npom.xml\r\n\r\n\t&lt;properties&gt;\r\n\t\t&lt;start-class&gt;main&lt;/start-class&gt;\r\n\t&lt;/properties&gt;\r\n\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.1.1.RELEASE&lt;/version&gt;\r\n\t&lt;/parent&gt;\r\n\r\n\t&lt;!-- Add typical dependencies for a web application --&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;!-- Package as an executable jar --&gt;\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\nApplication.java\r\n\r\n    package main;\r\n    \r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.EnableAutoConfiguration;\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n    \r\n    @SpringBootApplication\r\n    @EnableAutoConfiguration\r\n    public class Application {\r\n    \r\n\t    public static void main(String[] args) {\r\n\t\t    SpringApplication.run(Application.class, args);\r\n\t    }\r\n    \r\n    }\r\n\r\n\r\nThis is the stacktrace:\r\n\r\n    &gt; 12:51:13,365 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-8) WFLYSRV0027: Starting deployment of &quot;SpringBoot-0.0.1.war&quot; (runtime-name: &quot;SpringBoot-0.0.1.war&quot;)\r\n    &gt; WARNING: An illegal reflective access operation has occurred\r\n    &gt; WARNING: Illegal reflective access by io.undertow.util.FlexBase64$1 (jar:file:/C:/Users/87003556/Documents/Java/Wildfly%2014/modules/system/layers/base/io/undertow/core/main/undertow-core-2.0.13.Final.jar!/) to constructor java.lang.String(char[],boolean)\r\n    &gt; WARNING: Please consider reporting this to the maintainers of io.undertow.util.FlexBase64$1\r\n    &gt; WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations\r\n    &gt; WARNING: All illegal access operations will be denied in a future release\r\n    &gt; 12:51:13,429 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-6) WFLYUT0006: Undertow HTTPS listener https listening on 127.0.0.1:8443\r\n    &gt; 12:51:13,531 INFO  [org.jboss.ws.common.management] (MSC service thread 1-8) JBWS022052: Starting JBossWS 5.2.3.Final (Apache CXF 3.2.5.jbossorg-1) \r\n    &gt; 12:51:15,606 WARN  [org.jboss.as.ee] (MSC service thread 1-1) WFLYEE0007: Not installing optional component org.springframework.http.server.reactive.ServletServerHttpResponse$ResponseAsyncListener due to an exception (enable DEBUG log level to see the cause)\r\n    &gt; 12:51:15,606 WARN  [org.jboss.as.ee] (MSC service thread 1-1) WFLYEE0007: Not installing optional component org.springframework.http.server.reactive.ServletHttpHandlerAdapter$HandlerResultAsyncListener due to an exception (enable DEBUG log level to see the cause)\r\n    &gt; 12:51:15,622 WARN  [org.jboss.as.ee] (MSC service thread 1-1) WFLYEE0007: Not installing optional component org.springframework.http.server.ServletServerHttpAsyncRequestControl due to an exception (enable DEBUG log level to see the cause)\r\n    &gt; 12:51:15,622 WARN  [org.jboss.as.ee] (MSC service thread 1-1) WFLYEE0007: Not installing optional component org.springframework.web.context.request.async.StandardServletAsyncWebRequest due to an exception (enable DEBUG log level to see the cause)\r\n    &gt; 12:51:15,622 WARN  [org.jboss.as.ee] (MSC service thread 1-1) WFLYEE0007: Not installing optional component org.springframework.http.server.reactive.ServletServerHttpRequest$RequestAsyncListener due to an exception (enable DEBUG log level to see the cause)\r\n    &gt; 12:51:15,794 INFO  [org.infinispan.factories.GlobalComponentRegistry] (MSC service thread 1-7) ISPN000128: Infinispan version: Infinispan &#39;Estrella Galicia&#39; 9.3.1.Final\r\n    &gt; 12:51:15,966 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 72) WFLYCLINF0002: Started client-mappings cache from ejb container\r\n    &gt; 12:51:16,075 INFO  [io.undertow.servlet] (ServerService Thread Pool -- 85) 1 Spring WebApplicationInitializers detected on classpath\r\n    &gt; 12:51:16,153 INFO  [javax.enterprise.resource.webcontainer.jsf.config] (ServerService Thread Pool -- 85) Initializing Mojarra 2.3.5.SP2 for context &#39;/SpringBoot-0.0.1&#39;\r\n    &gt; 12:51:16,761 SEVERE [javax.enterprise.resource.webcontainer.jsf.config] (ServerService Thread Pool -- 85) Critical error during deployment: : com.sun.faces.config.ConfigurationException: Factory &#39;javax.faces.lifecycle.ClientWindowFactory&#39; was not configured properly.\r\n    &gt; \tat com.sun.faces.config.processor.FactoryConfigProcessor.verifyFactoriesExist(FactoryConfigProcessor.java:357)\r\n    &gt; \tat com.sun.faces.config.processor.FactoryConfigProcessor.process(FactoryConfigProcessor.java:243)\r\n    &gt; \tat com.sun.faces.config.ConfigManager.initialize(ConfigManager.java:443)\r\n    &gt; \tat com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:237)\r\n    &gt; \tat io.undertow.servlet.core.ApplicationListeners.contextInitialized(ApplicationListeners.java:187)\r\n    &gt; \tat io.undertow.servlet.core.DeploymentManagerImpl$1.call(DeploymentManagerImpl.java:216)\r\n    &gt; \tat io.undertow.servlet.core.DeploymentManagerImpl$1.call(DeploymentManagerImpl.java:185)\r\n    &gt; \tat io.undertow.servlet.core.ServletRequestContextThreadSetupAction$1.call(ServletRequestContextThreadSetupAction.java:42)\r\n    &gt; \tat io.undertow.servlet.core.ContextClassLoaderSetupAction$1.call(ContextClassLoaderSetupAction.java:43)\r\n    &gt; \t...\r\n    &gt; \tat org.jboss.threads.JBossThread.run(JBossThread.java:485)\r\n    &gt; Caused by: javax.faces.FacesException: Unable to find CDI BeanManager\r\n    &gt; \tat com.sun.faces.application.ApplicationImpl.isJsf23(ApplicationImpl.java:2714)\r\n    &gt; \tat com.sun.faces.application.ApplicationImpl.addELResolver(ApplicationImpl.java:549)\r\n    &gt; \t...\r\n    &gt; \tat javax.faces.FactoryFinder.getFactory(FactoryFinder.java:292)\r\n    &gt; \tat com.sun.faces.config.processor.FactoryConfigProcessor.verifyFactoriesExist(FactoryConfigProcessor.java:354)\r\n    &gt; \t... 29 more\r\n    &gt; \r\n    &gt; 12:51:16,761 ERROR [org.jboss.msc.service.fail] (ServerService Thread Pool -- 85) MSC000001: Failed to start service jboss.deployment.unit.&quot;SpringBoot-0.0.1.war&quot;.undertow-deployment: org.jboss.msc.service.StartException in service jboss.deployment.unit.&quot;SpringBoot-0.0.1.war&quot;.undertow-deployment: java.lang.RuntimeException: java.lang.RuntimeException: com.sun.faces.config.ConfigurationException: Factory &#39;javax.faces.lifecycle.ClientWindowFactory&#39; was not configured properly.\r\n    &gt; \tat org.wildfly.extension.undertow.deployment.UndertowDeploymentService$1.run(UndertowDeploymentService.java:81)\r\n    &gt; \tat java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)\r\n    &gt; \t...\r\n    &gt; \tat java.base/java.lang.Thread.run(Thread.java:825)\r\n    &gt; \tat org.jboss.threads.JBossThread.run(JBossThread.java:485)\r\n    &gt; Caused by: java.lang.RuntimeException: java.lang.RuntimeException: com.sun.faces.config.ConfigurationException: Factory &#39;javax.faces.lifecycle.ClientWindowFactory&#39; was not configured properly.\r\n    &gt; \tat io.undertow.servlet.core.DeploymentManagerImpl.deploy(DeploymentManagerImpl.java:252)\r\n    &gt; \tat org.wildfly.extension.undertow.deployment.UndertowDeploymentService.startContext(UndertowDeploymentService.java:96)\r\n    &gt; \tat org.wildfly.extension.undertow.deployment.UndertowDeploymentService$1.run(UndertowDeploymentService.java:78)\r\n    &gt; \t... 8 more\r\n    &gt; Caused by: java.lang.RuntimeException: com.sun.faces.config.ConfigurationException: Factory &#39;javax.faces.lifecycle.ClientWindowFactory&#39; was not configured properly.\r\n    &gt; \tat com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:315)\r\n    &gt; \tat io.undertow.servlet.core.ApplicationListeners.contextInitialized(ApplicationListeners.java:187)\r\n    &gt; \tat io.undertow.servlet.core.DeploymentManagerImpl$1.call(DeploymentManagerImpl.java:216)\r\n    &gt; \tat io.undertow.servlet.core.DeploymentManagerImpl$1.call(DeploymentManagerImpl.java:185)\r\n    &gt; \tat io.undertow.servlet.core.ServletRequestContextThreadSetupAction$1.call(ServletRequestContextThreadSetupAction.java:42)\r\n    &gt; \t...\r\n    &gt; \tat io.undertow.servlet.core.DeploymentManagerImpl.deploy(DeploymentManagerImpl.java:250)\r\n    &gt; \t... 10 more\r\n    &gt; Caused by: com.sun.faces.config.ConfigurationException: Factory &#39;javax.faces.lifecycle.ClientWindowFactory&#39; was not configured properly.\r\n    &gt; \tat com.sun.faces.config.processor.FactoryConfigProcessor.verifyFactoriesExist(FactoryConfigProcessor.java:357)\r\n    &gt; \t...\r\n    &gt; \tat com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:237)\r\n    &gt; \t... 26 more\r\n    &gt; Caused by: javax.faces.FacesException: Unable to find CDI BeanManager\r\n    &gt; \tat com.sun.faces.application.ApplicationImpl.isJsf23(ApplicationImpl.java:2714)\r\n    &gt; \tat com.sun.faces.application.ApplicationImpl.addELResolver(ApplicationImpl.java:549)\r\n    &gt; \tat org.jboss.as.jsf.injection.weld.WeldApplication.&lt;init&gt;(WeldApplication.java:60)\r\n    &gt; \tat org.jboss.as.jsf.injection.weld.WeldApplicationFactory.getApplication(WeldApplicationFactory.java:52)\r\n    &gt; \tat com.sun.faces.application.InjectionApplicationFactory.getApplication(InjectionApplicationFactory.java:88)\r\n    &gt; \t...\tat javax.faces.FactoryFinder.getFactory(FactoryFinder.java:292)\r\n    &gt; \tat com.sun.faces.config.processor.FactoryConfigProcessor.verifyFactoriesExist(FactoryConfigProcessor.java:354)\r\n    &gt; \t... 29 more\r\n    &gt; \r\n    &gt; 12:51:16,762 ERROR [org.jboss.as.controller.management-operation] (Controller Boot Thread) WFLYCTL0013: Operation (&quot;deploy&quot;) failed - address: ([(&quot;deployment&quot; =&gt; &quot;SpringBoot-0.0.1.war&quot;)]) - failure description: {&quot;WFLYCTL0080: Failed services&quot; =&gt; {&quot;jboss.deployment.unit.\\&quot;SpringBoot-0.0.1.war\\&quot;.undertow-deployment&quot; =&gt; &quot;java.lang.RuntimeException: java.lang.RuntimeException: com.sun.faces.config.ConfigurationException: Factory &#39;javax.faces.lifecycle.ClientWindowFactory&#39; was not configured properly.\r\n    &gt;     Caused by: java.lang.RuntimeException: java.lang.RuntimeException: com.sun.faces.config.ConfigurationException: Factory &#39;javax.faces.lifecycle.ClientWindowFactory&#39; was not configured properly.\r\n    &gt;     Caused by: java.lang.RuntimeException: com.sun.faces.config.ConfigurationException: Factory &#39;javax.faces.lifecycle.ClientWindowFactory&#39; was not configured properly.\r\n    &gt;     Caused by: com.sun.faces.config.ConfigurationException: Factory &#39;javax.faces.lifecycle.ClientWindowFactory&#39; was not configured properly.\r\n    &gt;     Caused by: javax.faces.FacesException: Unable to find CDI BeanManager&quot;}}\r\n    &gt; 12:51:16,762 INFO  [org.jboss.as.server] (ServerService Thread Pool -- 42) WFLYSRV0010: Deployed &quot;SpringBoot-0.0.1.war&quot; (runtime-name : &quot;SpringBoot-0.0.1.war&quot;)\r\n    &gt; 12:51:16,762 INFO  [org.jboss.as.controller] (Controller Boot Thread) WFLYCTL0183: Service status report\r\n    &gt; WFLYCTL0186:   Services which failed to start:      service jboss.deployment.unit.&quot;SpringBoot-0.0.1.war&quot;.undertow-deployment: java.lang.RuntimeException: java.lang.RuntimeException: com.sun.faces.config.ConfigurationException: Factory &#39;javax.faces.lifecycle.ClientWindowFactory&#39; was not configured properly.\r\n\r\n","title":"Unable to find CDI BeanManager","body":"<p>I'm trying to set up a simple application to use SpringBoot 2.1.1 and Java 11 over Wildfly 14 (because Wildfly 15 isn't supported by Eclipse).</p>\n<p>The deploy failed because Wildfly cannot find the CDI BeanManager in the project. I'm only trying to follow the simple (official) tutorial, so I don't understand why the error appears.</p>\n<p>This is the code:</p>\n<p>pom.xml</p>\n<pre><code>&lt;properties&gt;\n    &lt;start-class&gt;main&lt;/start-class&gt;\n&lt;/properties&gt;\n\n&lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;2.1.1.RELEASE&lt;/version&gt;\n&lt;/parent&gt;\n\n&lt;!-- Add typical dependencies for a web application --&gt;\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n\n&lt;!-- Package as an executable jar --&gt;\n&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n<p>Application.java</p>\n<pre><code>package main;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.EnableAutoConfiguration;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\n@EnableAutoConfiguration\npublic class Application {\n\n    public static void main(String[] args) {\n        SpringApplication.run(Application.class, args);\n    }\n\n}\n</code></pre>\n<p>This is the stacktrace:</p>\n<pre><code>&gt; 12:51:13,365 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-8) WFLYSRV0027: Starting deployment of &quot;SpringBoot-0.0.1.war&quot; (runtime-name: &quot;SpringBoot-0.0.1.war&quot;)\n&gt; WARNING: An illegal reflective access operation has occurred\n&gt; WARNING: Illegal reflective access by io.undertow.util.FlexBase64$1 (jar:file:/C:/Users/87003556/Documents/Java/Wildfly%2014/modules/system/layers/base/io/undertow/core/main/undertow-core-2.0.13.Final.jar!/) to constructor java.lang.String(char[],boolean)\n&gt; WARNING: Please consider reporting this to the maintainers of io.undertow.util.FlexBase64$1\n&gt; WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations\n&gt; WARNING: All illegal access operations will be denied in a future release\n&gt; 12:51:13,429 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-6) WFLYUT0006: Undertow HTTPS listener https listening on 127.0.0.1:8443\n&gt; 12:51:13,531 INFO  [org.jboss.ws.common.management] (MSC service thread 1-8) JBWS022052: Starting JBossWS 5.2.3.Final (Apache CXF 3.2.5.jbossorg-1) \n&gt; 12:51:15,606 WARN  [org.jboss.as.ee] (MSC service thread 1-1) WFLYEE0007: Not installing optional component org.springframework.http.server.reactive.ServletServerHttpResponse$ResponseAsyncListener due to an exception (enable DEBUG log level to see the cause)\n&gt; 12:51:15,606 WARN  [org.jboss.as.ee] (MSC service thread 1-1) WFLYEE0007: Not installing optional component org.springframework.http.server.reactive.ServletHttpHandlerAdapter$HandlerResultAsyncListener due to an exception (enable DEBUG log level to see the cause)\n&gt; 12:51:15,622 WARN  [org.jboss.as.ee] (MSC service thread 1-1) WFLYEE0007: Not installing optional component org.springframework.http.server.ServletServerHttpAsyncRequestControl due to an exception (enable DEBUG log level to see the cause)\n&gt; 12:51:15,622 WARN  [org.jboss.as.ee] (MSC service thread 1-1) WFLYEE0007: Not installing optional component org.springframework.web.context.request.async.StandardServletAsyncWebRequest due to an exception (enable DEBUG log level to see the cause)\n&gt; 12:51:15,622 WARN  [org.jboss.as.ee] (MSC service thread 1-1) WFLYEE0007: Not installing optional component org.springframework.http.server.reactive.ServletServerHttpRequest$RequestAsyncListener due to an exception (enable DEBUG log level to see the cause)\n&gt; 12:51:15,794 INFO  [org.infinispan.factories.GlobalComponentRegistry] (MSC service thread 1-7) ISPN000128: Infinispan version: Infinispan 'Estrella Galicia' 9.3.1.Final\n&gt; 12:51:15,966 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 72) WFLYCLINF0002: Started client-mappings cache from ejb container\n&gt; 12:51:16,075 INFO  [io.undertow.servlet] (ServerService Thread Pool -- 85) 1 Spring WebApplicationInitializers detected on classpath\n&gt; 12:51:16,153 INFO  [javax.enterprise.resource.webcontainer.jsf.config] (ServerService Thread Pool -- 85) Initializing Mojarra 2.3.5.SP2 for context '/SpringBoot-0.0.1'\n&gt; 12:51:16,761 SEVERE [javax.enterprise.resource.webcontainer.jsf.config] (ServerService Thread Pool -- 85) Critical error during deployment: : com.sun.faces.config.ConfigurationException: Factory 'javax.faces.lifecycle.ClientWindowFactory' was not configured properly.\n&gt;   at com.sun.faces.config.processor.FactoryConfigProcessor.verifyFactoriesExist(FactoryConfigProcessor.java:357)\n&gt;   at com.sun.faces.config.processor.FactoryConfigProcessor.process(FactoryConfigProcessor.java:243)\n&gt;   at com.sun.faces.config.ConfigManager.initialize(ConfigManager.java:443)\n&gt;   at com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:237)\n&gt;   at io.undertow.servlet.core.ApplicationListeners.contextInitialized(ApplicationListeners.java:187)\n&gt;   at io.undertow.servlet.core.DeploymentManagerImpl$1.call(DeploymentManagerImpl.java:216)\n&gt;   at io.undertow.servlet.core.DeploymentManagerImpl$1.call(DeploymentManagerImpl.java:185)\n&gt;   at io.undertow.servlet.core.ServletRequestContextThreadSetupAction$1.call(ServletRequestContextThreadSetupAction.java:42)\n&gt;   at io.undertow.servlet.core.ContextClassLoaderSetupAction$1.call(ContextClassLoaderSetupAction.java:43)\n&gt;   ...\n&gt;   at org.jboss.threads.JBossThread.run(JBossThread.java:485)\n&gt; Caused by: javax.faces.FacesException: Unable to find CDI BeanManager\n&gt;   at com.sun.faces.application.ApplicationImpl.isJsf23(ApplicationImpl.java:2714)\n&gt;   at com.sun.faces.application.ApplicationImpl.addELResolver(ApplicationImpl.java:549)\n&gt;   ...\n&gt;   at javax.faces.FactoryFinder.getFactory(FactoryFinder.java:292)\n&gt;   at com.sun.faces.config.processor.FactoryConfigProcessor.verifyFactoriesExist(FactoryConfigProcessor.java:354)\n&gt;   ... 29 more\n&gt; \n&gt; 12:51:16,761 ERROR [org.jboss.msc.service.fail] (ServerService Thread Pool -- 85) MSC000001: Failed to start service jboss.deployment.unit.&quot;SpringBoot-0.0.1.war&quot;.undertow-deployment: org.jboss.msc.service.StartException in service jboss.deployment.unit.&quot;SpringBoot-0.0.1.war&quot;.undertow-deployment: java.lang.RuntimeException: java.lang.RuntimeException: com.sun.faces.config.ConfigurationException: Factory 'javax.faces.lifecycle.ClientWindowFactory' was not configured properly.\n&gt;   at org.wildfly.extension.undertow.deployment.UndertowDeploymentService$1.run(UndertowDeploymentService.java:81)\n&gt;   at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)\n&gt;   ...\n&gt;   at java.base/java.lang.Thread.run(Thread.java:825)\n&gt;   at org.jboss.threads.JBossThread.run(JBossThread.java:485)\n&gt; Caused by: java.lang.RuntimeException: java.lang.RuntimeException: com.sun.faces.config.ConfigurationException: Factory 'javax.faces.lifecycle.ClientWindowFactory' was not configured properly.\n&gt;   at io.undertow.servlet.core.DeploymentManagerImpl.deploy(DeploymentManagerImpl.java:252)\n&gt;   at org.wildfly.extension.undertow.deployment.UndertowDeploymentService.startContext(UndertowDeploymentService.java:96)\n&gt;   at org.wildfly.extension.undertow.deployment.UndertowDeploymentService$1.run(UndertowDeploymentService.java:78)\n&gt;   ... 8 more\n&gt; Caused by: java.lang.RuntimeException: com.sun.faces.config.ConfigurationException: Factory 'javax.faces.lifecycle.ClientWindowFactory' was not configured properly.\n&gt;   at com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:315)\n&gt;   at io.undertow.servlet.core.ApplicationListeners.contextInitialized(ApplicationListeners.java:187)\n&gt;   at io.undertow.servlet.core.DeploymentManagerImpl$1.call(DeploymentManagerImpl.java:216)\n&gt;   at io.undertow.servlet.core.DeploymentManagerImpl$1.call(DeploymentManagerImpl.java:185)\n&gt;   at io.undertow.servlet.core.ServletRequestContextThreadSetupAction$1.call(ServletRequestContextThreadSetupAction.java:42)\n&gt;   ...\n&gt;   at io.undertow.servlet.core.DeploymentManagerImpl.deploy(DeploymentManagerImpl.java:250)\n&gt;   ... 10 more\n&gt; Caused by: com.sun.faces.config.ConfigurationException: Factory 'javax.faces.lifecycle.ClientWindowFactory' was not configured properly.\n&gt;   at com.sun.faces.config.processor.FactoryConfigProcessor.verifyFactoriesExist(FactoryConfigProcessor.java:357)\n&gt;   ...\n&gt;   at com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:237)\n&gt;   ... 26 more\n&gt; Caused by: javax.faces.FacesException: Unable to find CDI BeanManager\n&gt;   at com.sun.faces.application.ApplicationImpl.isJsf23(ApplicationImpl.java:2714)\n&gt;   at com.sun.faces.application.ApplicationImpl.addELResolver(ApplicationImpl.java:549)\n&gt;   at org.jboss.as.jsf.injection.weld.WeldApplication.&lt;init&gt;(WeldApplication.java:60)\n&gt;   at org.jboss.as.jsf.injection.weld.WeldApplicationFactory.getApplication(WeldApplicationFactory.java:52)\n&gt;   at com.sun.faces.application.InjectionApplicationFactory.getApplication(InjectionApplicationFactory.java:88)\n&gt;   ... at javax.faces.FactoryFinder.getFactory(FactoryFinder.java:292)\n&gt;   at com.sun.faces.config.processor.FactoryConfigProcessor.verifyFactoriesExist(FactoryConfigProcessor.java:354)\n&gt;   ... 29 more\n&gt; \n&gt; 12:51:16,762 ERROR [org.jboss.as.controller.management-operation] (Controller Boot Thread) WFLYCTL0013: Operation (&quot;deploy&quot;) failed - address: ([(&quot;deployment&quot; =&gt; &quot;SpringBoot-0.0.1.war&quot;)]) - failure description: {&quot;WFLYCTL0080: Failed services&quot; =&gt; {&quot;jboss.deployment.unit.\\&quot;SpringBoot-0.0.1.war\\&quot;.undertow-deployment&quot; =&gt; &quot;java.lang.RuntimeException: java.lang.RuntimeException: com.sun.faces.config.ConfigurationException: Factory 'javax.faces.lifecycle.ClientWindowFactory' was not configured properly.\n&gt;     Caused by: java.lang.RuntimeException: java.lang.RuntimeException: com.sun.faces.config.ConfigurationException: Factory 'javax.faces.lifecycle.ClientWindowFactory' was not configured properly.\n&gt;     Caused by: java.lang.RuntimeException: com.sun.faces.config.ConfigurationException: Factory 'javax.faces.lifecycle.ClientWindowFactory' was not configured properly.\n&gt;     Caused by: com.sun.faces.config.ConfigurationException: Factory 'javax.faces.lifecycle.ClientWindowFactory' was not configured properly.\n&gt;     Caused by: javax.faces.FacesException: Unable to find CDI BeanManager&quot;}}\n&gt; 12:51:16,762 INFO  [org.jboss.as.server] (ServerService Thread Pool -- 42) WFLYSRV0010: Deployed &quot;SpringBoot-0.0.1.war&quot; (runtime-name : &quot;SpringBoot-0.0.1.war&quot;)\n&gt; 12:51:16,762 INFO  [org.jboss.as.controller] (Controller Boot Thread) WFLYCTL0183: Service status report\n&gt; WFLYCTL0186:   Services which failed to start:      service jboss.deployment.unit.&quot;SpringBoot-0.0.1.war&quot;.undertow-deployment: java.lang.RuntimeException: java.lang.RuntimeException: com.sun.faces.config.ConfigurationException: Factory 'javax.faces.lifecycle.ClientWindowFactory' was not configured properly.\n</code></pre>\n"},{"tags":["java","search-engine","google-search","google-search-api"],"answers":[{"tags":[],"owner":{"account_id":6288600,"reputation":204,"user_id":4886983,"display_name":"BARHOUMI"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686860186,"creation_date":1686860186,"answer_id":76485228,"question_id":76485035,"body_markdown":"You have to use q argument to define image url instead of imageUrl\r\n\r\n    https://customsearch.googleapis.com/customsearch/v1?key=AIzaSyCca5akhZ492pP08QBchz5Q4QA6kFYsBrc&amp;cx=923a7bcc712ee431d&amp;searchType=image&amp;q=https://media.gq.com/photos/5a5f79d52316871dcb3c837f/master/w_1600,c_limit/Dua_Lipa_02.jpg","title":"programmable search engine returns 400 Request contains an invalid argument","body":"<p>You have to use q argument to define image url instead of imageUrl</p>\n<pre><code>https://customsearch.googleapis.com/customsearch/v1?key=AIzaSyCca5akhZ492pP08QBchz5Q4QA6kFYsBrc&amp;cx=923a7bcc712ee431d&amp;searchType=image&amp;q=https://media.gq.com/photos/5a5f79d52316871dcb3c837f/master/w_1600,c_limit/Dua_Lipa_02.jpg\n</code></pre>\n"}],"owner":{"account_id":7405799,"reputation":625,"user_id":5634777,"accept_rate":38,"display_name":"kaka"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":151,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1686860186,"creation_date":1686858002,"question_id":76485035,"body_markdown":"When I call this url from Java code, postman or a web browser\r\n\r\n    URL:\r\n    https://customsearch.googleapis.com/customsearch/v1?key=AIzaSyCca5akhZ492pP08QBchz5Q4QA6kFYsBrc&amp;cx=923a7bcc712ee431d&amp;searchType=image&amp;imgUrl=https://media.gq.com/photos/5a5f79d52316871dcb3c837f/master/w_1600,c_limit/Dua_Lipa_02.jpg\r\n\r\nResponse:\r\n\r\n    {\r\n        &quot;error&quot;: {\r\n            &quot;code&quot;: 400,\r\n            &quot;message&quot;: &quot;Request contains an invalid argument.&quot;,\r\n            &quot;errors&quot;: [\r\n                {\r\n                    &quot;message&quot;: &quot;Request contains an invalid argument.&quot;,\r\n                    &quot;domain&quot;: &quot;global&quot;,\r\n                    &quot;reason&quot;: &quot;badRequest&quot;\r\n                }\r\n            ],\r\n            &quot;status&quot;: &quot;INVALID_ARGUMENT&quot;\r\n        }\r\n     }\r\n","title":"programmable search engine returns 400 Request contains an invalid argument","body":"<p>When I call this url from Java code, postman or a web browser</p>\n<pre><code>URL:\nhttps://customsearch.googleapis.com/customsearch/v1?key=AIzaSyCca5akhZ492pP08QBchz5Q4QA6kFYsBrc&amp;cx=923a7bcc712ee431d&amp;searchType=image&amp;imgUrl=https://media.gq.com/photos/5a5f79d52316871dcb3c837f/master/w_1600,c_limit/Dua_Lipa_02.jpg\n</code></pre>\n<p>Response:</p>\n<pre><code>{\n    &quot;error&quot;: {\n        &quot;code&quot;: 400,\n        &quot;message&quot;: &quot;Request contains an invalid argument.&quot;,\n        &quot;errors&quot;: [\n            {\n                &quot;message&quot;: &quot;Request contains an invalid argument.&quot;,\n                &quot;domain&quot;: &quot;global&quot;,\n                &quot;reason&quot;: &quot;badRequest&quot;\n            }\n        ],\n        &quot;status&quot;: &quot;INVALID_ARGUMENT&quot;\n    }\n }\n</code></pre>\n"},{"tags":["java","junit","mockito","junit5","powermockito"],"comments":[{"owner":{"account_id":5676770,"reputation":21,"user_id":4489635,"display_name":"Shubham Singh"},"score":0,"creation_date":1686859597,"post_id":76483691,"comment_id":134860008,"body_markdown":"Can someone help with this?","body":"Can someone help with this?"}],"owner":{"account_id":5676770,"reputation":21,"user_id":4489635,"display_name":"Shubham Singh"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":116,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1686859690,"creation_date":1686846217,"question_id":76483691,"body_markdown":"I am not able to write test case for a class which has a function and that function has ServiceBusReceivedMessageContext as the parameter. ServiceBusReceivedMessageContext class is final class.Can someone help me to write test case for the method processMessage? I am not able to use mockito. I am writing test case for processMessage, but since ServiceBusReceivedMessageContext is final class and present in third party jar, how can it be possible to write test case for this method.\r\n\r\n\r\n```\r\npublic void processMessage(ServiceBusReceivedMessageContext context) {\r\n        try {\r\n            ServiceBusReceivedMessage message = context.getMessage();\r\n            \r\n        } catch (Exception e) {\r\n            log.error(&quot;Unhandled exception occurred while processing message: {}&quot;, e.getMessage(), e);\r\n            //throw new RuntimeException(&quot;Error processing message&quot;, e);\r\n        }\r\n    }\r\n\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\n\r\npackage com.azure.messaging.servicebus;\r\n\r\nimport com.azure.messaging.servicebus.models.AbandonOptions;\r\nimport com.azure.messaging.servicebus.models.CompleteOptions;\r\nimport com.azure.messaging.servicebus.models.DeadLetterOptions;\r\nimport com.azure.messaging.servicebus.models.DeferOptions;\r\n\r\nimport java.util.Objects;\r\n\r\n/**\r\n * The Service Bus processor message context that holds a received message and additional methods to settle the message.\r\n */\r\npublic final class ServiceBusReceivedMessageContext {\r\n    private final ServiceBusMessageContext receivedMessageContext;\r\n    private final ServiceBusReceiverAsyncClient receiverClient;\r\n    private final String fullyQualifiedNamespace;\r\n    private final String entityPath;\r\n\r\n    ServiceBusReceivedMessageContext(ServiceBusReceiverAsyncClient receiverClient,\r\n                                     ServiceBusMessageContext receivedMessageContext) {\r\n        this.receivedMessageContext = Objects.requireNonNull(receivedMessageContext,\r\n            &quot;&#39;receivedMessageContext&#39; cannot be null&quot;);\r\n        this.receiverClient = Objects.requireNonNull(receiverClient, &quot;&#39;receiverClient&#39; cannot be null&quot;);\r\n        entityPath = receiverClient.getEntityPath();\r\n        fullyQualifiedNamespace = receiverClient.getFullyQualifiedNamespace();\r\n    }\r\n\r\n    /**\r\n     * Gets the message received from Service Bus.\r\n     *\r\n     * @return The message received from Service Bus.\r\n     */\r\n    public ServiceBusReceivedMessage getMessage() {\r\n        return receivedMessageContext.getMessage();\r\n    }\r\n\r\n\r\n    /**\r\n     *  Gets the Service Bus resource this instance of {@link ServiceBusProcessorClient} interacts with.\r\n     *\r\n     * @return The Service Bus resource this instance of {@link ServiceBusProcessorClient} interacts with.\r\n     */\r\n    public String getEntityPath() {\r\n        return this.entityPath;\r\n    }\r\n\r\n    /**\r\n     * Gets the fully qualified Service Bus namespace that this instance of {@link ServiceBusProcessorClient}\r\n     * is associated with. This is likely similar to {@code {yournamespace}.servicebus.windows.net}.\r\n     *\r\n     * @return The fully qualified Service Bus namespace that this instance of {@link ServiceBusProcessorClient}\r\n     * is associated with.\r\n     */\r\n    public String getFullyQualifiedNamespace() {\r\n        return this.fullyQualifiedNamespace;\r\n    }\r\n\r\n    /**\r\n     * Abandons the {@link #getMessage() message} in this context.\r\n     */\r\n    public void abandon() {\r\n        receiverClient.abandon(receivedMessageContext.getMessage()).block();\r\n    }\r\n\r\n    /**\r\n     * Abandons the {@link #getMessage() message} in this context.\r\n     *\r\n     * @param options Additional options for abandoning the message.\r\n     */\r\n    public void abandon(AbandonOptions options) {\r\n        receiverClient.abandon(receivedMessageContext.getMessage(), options).block();\r\n    }\r\n\r\n    /**\r\n     * Completes the {@link #getMessage() message} in this context.\r\n     */\r\n    public void complete() {\r\n        receiverClient.complete(receivedMessageContext.getMessage()).block();\r\n    }\r\n\r\n    /**\r\n     * Completes the {@link #getMessage() message} in this context.\r\n     *\r\n     * @param options Additional options for completing the message.\r\n     * @throws NullPointerException if {@code options} are null.\r\n     */\r\n    public void complete(CompleteOptions options) {\r\n        receiverClient.complete(receivedMessageContext.getMessage(), options).block();\r\n    }\r\n\r\n    /**\r\n     * Defers the {@link #getMessage() message} in this context.\r\n     */\r\n    public void defer() {\r\n        receiverClient.defer(receivedMessageContext.getMessage()).block();\r\n    }\r\n\r\n    /**\r\n     * Defers the {@link #getMessage() message} in this context.\r\n     *\r\n     * @param options Additional options for deferring the message.\r\n     * @throws NullPointerException if {@code options} are null.\r\n     */\r\n    public void defer(DeferOptions options) {\r\n        receiverClient.defer(receivedMessageContext.getMessage(), options).block();\r\n    }\r\n\r\n    /**\r\n     * Dead-letters the {@link #getMessage() message} in this context.\r\n     */\r\n    public void deadLetter() {\r\n        receiverClient.deadLetter(receivedMessageContext.getMessage()).block();\r\n    }\r\n\r\n    /**\r\n     * Dead-letters the {@link #getMessage() message} in this context.\r\n     *\r\n     * @param options Additional options for dead-lettering the message.\r\n     *\r\n     * @throws NullPointerException if {@code options} are null.\r\n     */\r\n    public void deadLetter(DeadLetterOptions options) {\r\n        receiverClient.deadLetter(receivedMessageContext.getMessage(), options).block();\r\n    }\r\n}\r\n\r\n```\r\n","title":"How to write a test for a class which has a method and parameter in this method is of ServiceBusReceivedMessageContext?","body":"<p>I am not able to write test case for a class which has a function and that function has ServiceBusReceivedMessageContext as the parameter. ServiceBusReceivedMessageContext class is final class.Can someone help me to write test case for the method processMessage? I am not able to use mockito. I am writing test case for processMessage, but since ServiceBusReceivedMessageContext is final class and present in third party jar, how can it be possible to write test case for this method.</p>\n<pre><code>public void processMessage(ServiceBusReceivedMessageContext context) {\n        try {\n            ServiceBusReceivedMessage message = context.getMessage();\n            \n        } catch (Exception e) {\n            log.error(&quot;Unhandled exception occurred while processing message: {}&quot;, e.getMessage(), e);\n            //throw new RuntimeException(&quot;Error processing message&quot;, e);\n        }\n    }\n\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\n\npackage com.azure.messaging.servicebus;\n\nimport com.azure.messaging.servicebus.models.AbandonOptions;\nimport com.azure.messaging.servicebus.models.CompleteOptions;\nimport com.azure.messaging.servicebus.models.DeadLetterOptions;\nimport com.azure.messaging.servicebus.models.DeferOptions;\n\nimport java.util.Objects;\n\n/**\n * The Service Bus processor message context that holds a received message and additional methods to settle the message.\n */\npublic final class ServiceBusReceivedMessageContext {\n    private final ServiceBusMessageContext receivedMessageContext;\n    private final ServiceBusReceiverAsyncClient receiverClient;\n    private final String fullyQualifiedNamespace;\n    private final String entityPath;\n\n    ServiceBusReceivedMessageContext(ServiceBusReceiverAsyncClient receiverClient,\n                                     ServiceBusMessageContext receivedMessageContext) {\n        this.receivedMessageContext = Objects.requireNonNull(receivedMessageContext,\n            &quot;'receivedMessageContext' cannot be null&quot;);\n        this.receiverClient = Objects.requireNonNull(receiverClient, &quot;'receiverClient' cannot be null&quot;);\n        entityPath = receiverClient.getEntityPath();\n        fullyQualifiedNamespace = receiverClient.getFullyQualifiedNamespace();\n    }\n\n    /**\n     * Gets the message received from Service Bus.\n     *\n     * @return The message received from Service Bus.\n     */\n    public ServiceBusReceivedMessage getMessage() {\n        return receivedMessageContext.getMessage();\n    }\n\n\n    /**\n     *  Gets the Service Bus resource this instance of {@link ServiceBusProcessorClient} interacts with.\n     *\n     * @return The Service Bus resource this instance of {@link ServiceBusProcessorClient} interacts with.\n     */\n    public String getEntityPath() {\n        return this.entityPath;\n    }\n\n    /**\n     * Gets the fully qualified Service Bus namespace that this instance of {@link ServiceBusProcessorClient}\n     * is associated with. This is likely similar to {@code {yournamespace}.servicebus.windows.net}.\n     *\n     * @return The fully qualified Service Bus namespace that this instance of {@link ServiceBusProcessorClient}\n     * is associated with.\n     */\n    public String getFullyQualifiedNamespace() {\n        return this.fullyQualifiedNamespace;\n    }\n\n    /**\n     * Abandons the {@link #getMessage() message} in this context.\n     */\n    public void abandon() {\n        receiverClient.abandon(receivedMessageContext.getMessage()).block();\n    }\n\n    /**\n     * Abandons the {@link #getMessage() message} in this context.\n     *\n     * @param options Additional options for abandoning the message.\n     */\n    public void abandon(AbandonOptions options) {\n        receiverClient.abandon(receivedMessageContext.getMessage(), options).block();\n    }\n\n    /**\n     * Completes the {@link #getMessage() message} in this context.\n     */\n    public void complete() {\n        receiverClient.complete(receivedMessageContext.getMessage()).block();\n    }\n\n    /**\n     * Completes the {@link #getMessage() message} in this context.\n     *\n     * @param options Additional options for completing the message.\n     * @throws NullPointerException if {@code options} are null.\n     */\n    public void complete(CompleteOptions options) {\n        receiverClient.complete(receivedMessageContext.getMessage(), options).block();\n    }\n\n    /**\n     * Defers the {@link #getMessage() message} in this context.\n     */\n    public void defer() {\n        receiverClient.defer(receivedMessageContext.getMessage()).block();\n    }\n\n    /**\n     * Defers the {@link #getMessage() message} in this context.\n     *\n     * @param options Additional options for deferring the message.\n     * @throws NullPointerException if {@code options} are null.\n     */\n    public void defer(DeferOptions options) {\n        receiverClient.defer(receivedMessageContext.getMessage(), options).block();\n    }\n\n    /**\n     * Dead-letters the {@link #getMessage() message} in this context.\n     */\n    public void deadLetter() {\n        receiverClient.deadLetter(receivedMessageContext.getMessage()).block();\n    }\n\n    /**\n     * Dead-letters the {@link #getMessage() message} in this context.\n     *\n     * @param options Additional options for dead-lettering the message.\n     *\n     * @throws NullPointerException if {@code options} are null.\n     */\n    public void deadLetter(DeadLetterOptions options) {\n        receiverClient.deadLetter(receivedMessageContext.getMessage(), options).block();\n    }\n}\n\n</code></pre>\n"},{"tags":["java","enums","mapstruct"],"answers":[{"comments":[{"owner":{"account_id":14667513,"reputation":142,"user_id":10592946,"display_name":"BeshEater"},"score":0,"creation_date":1686830855,"post_id":66849821,"comment_id":134855096,"body_markdown":"Could you please update your comment, this feature is finally available","body":"Could you please update your comment, this feature is finally available"},{"owner":{"account_id":1128956,"reputation":19765,"user_id":1115491,"display_name":"Filip"},"score":0,"creation_date":1686859696,"post_id":66849821,"comment_id":134860020,"body_markdown":"Good point. Just updated the answer","body":"Good point. Just updated the answer"}],"tags":[],"owner":{"account_id":1128956,"reputation":19765,"user_id":1115491,"display_name":"Filip"},"comment_count":2,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1686859676,"creation_date":1617000818,"answer_id":66849821,"question_id":66795984,"body_markdown":"This can be done using `MappingConstants.THROW_EXCEPTION` and setting it to a `ValueMapping#target`.\r\n\r\nSo in this example in order to throw an exception for any remaining mapping you can write:\r\n\r\n```\r\n@ValueMapping(source = MappingConstants.ANY_REMAINING, target = MappingConstants.THROW_EXCEPTION)\r\n```\r\n\r\n**Note** this is available from version 1.5","title":"How to configure MapStruct to throw an exception when enum values can&#39;t be mapped","body":"<p>This can be done using <code>MappingConstants.THROW_EXCEPTION</code> and setting it to a <code>ValueMapping#target</code>.</p>\n<p>So in this example in order to throw an exception for any remaining mapping you can write:</p>\n<pre><code>@ValueMapping(source = MappingConstants.ANY_REMAINING, target = MappingConstants.THROW_EXCEPTION)\n</code></pre>\n<p><strong>Note</strong> this is available from version 1.5</p>\n"}],"owner":{"account_id":148117,"reputation":3294,"user_id":359666,"accept_rate":74,"display_name":"Uros K"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6909,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":66849821,"answer_count":1,"score":5,"last_activity_date":1686859676,"creation_date":1616662321,"question_id":66795984,"body_markdown":"This is my Mapper:\r\n```java\r\n@Mapper\r\npublic interface ProductMapper {\r\n    ProductClassification toProductClassification(ProductTypes pisType);\r\n}\r\n```\r\nWhere `ProductTypes` and `ProductClassification` are enums. I want it to throw an exception when it can&#39;t map the enums, but I get compiler error:\r\n`The following constants from the source enum have\r\nno corresponding constant in the target enum and must be be mapped via adding additional mappings: EXTERNAL, UNKNOWN.`\r\n\r\nI tried with `@ValueMappings` annotation, but can only configure it to set the value to null, which is not sufficient:\r\n```java\r\n@ValueMappings({\r\n    @ValueMapping(source = MappingConstants.ANY_REMAINING, target = MappingConstants.NULL)\r\n})\r\n```\r\n\r\nWhat would be the right way to configure MapStruct mapper to throw an exception when it can&#39;t map enum constants?","title":"How to configure MapStruct to throw an exception when enum values can&#39;t be mapped","body":"<p>This is my Mapper:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Mapper\npublic interface ProductMapper {\n    ProductClassification toProductClassification(ProductTypes pisType);\n}\n</code></pre>\n<p>Where <code>ProductTypes</code> and <code>ProductClassification</code> are enums. I want it to throw an exception when it can't map the enums, but I get compiler error:\n<code>The following constants from the source enum have no corresponding constant in the target enum and must be be mapped via adding additional mappings: EXTERNAL, UNKNOWN.</code></p>\n<p>I tried with <code>@ValueMappings</code> annotation, but can only configure it to set the value to null, which is not sufficient:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ValueMappings({\n    @ValueMapping(source = MappingConstants.ANY_REMAINING, target = MappingConstants.NULL)\n})\n</code></pre>\n<p>What would be the right way to configure MapStruct mapper to throw an exception when it can't map enum constants?</p>\n"},{"tags":["java","function","methods"],"comments":[{"owner":{"account_id":1960454,"reputation":44539,"user_id":1762224,"accept_rate":61,"display_name":"Mr. Polywhirl"},"score":1,"creation_date":1686857684,"post_id":76484983,"comment_id":134859679,"body_markdown":"Calling `(int) VALUE` would cast a `float` to an `int` in Java. In Java, casting is not a function call like in Python. In Java, you just place the type you want in parenthesis before the value you want to cast. Python and Java are two very different languages. If you want to learn Java, set aside what you know about Python and read some Java tutorials to get a better understanding. The `Math.round` static method (or function as you may) has a lot more overhead than a simple typecast. Also, casting to an `int` truncates the decimal, it does not round it. So both may have different output.","body":"Calling <code>(int) VALUE</code> would cast a <code>float</code> to an <code>int</code> in Java. In Java, casting is not a function call like in Python. In Java, you just place the type you want in parenthesis before the value you want to cast. Python and Java are two very different languages. If you want to learn Java, set aside what you know about Python and read some Java tutorials to get a better understanding. The <code>Math.round</code> static method (or function as you may) has a lot more overhead than a simple typecast. Also, casting to an <code>int</code> truncates the decimal, it does not round it. So both may have different output."},{"owner":{"account_id":21161580,"reputation":119,"user_id":16547129,"display_name":"AlexFullinator"},"score":0,"creation_date":1686857921,"post_id":76484983,"comment_id":134859716,"body_markdown":"@Mr.Polywhirl Oh, thanks for the info. So, is casting values the only time you&#39;d do something like `(int) VALUE`?","body":"@Mr.Polywhirl Oh, thanks for the info. So, is casting values the only time you&#39;d do something like <code>(int) VALUE</code>?"},{"owner":{"account_id":1960454,"reputation":44539,"user_id":1762224,"accept_rate":61,"display_name":"Mr. Polywhirl"},"score":0,"creation_date":1686857979,"post_id":76484983,"comment_id":134859731,"body_markdown":"Yes, casting a value does not require a function call, but you could have a method that internally casts a value and returns a new one.","body":"Yes, casting a value does not require a function call, but you could have a method that internally casts a value and returns a new one."},{"owner":{"account_id":21161580,"reputation":119,"user_id":16547129,"display_name":"AlexFullinator"},"score":0,"creation_date":1686858039,"post_id":76484983,"comment_id":134859744,"body_markdown":"@Mr.Polywhirl Alright, thanks so much for the clarification on this!","body":"@Mr.Polywhirl Alright, thanks so much for the clarification on this!"}],"answers":[{"tags":[],"owner":{"account_id":1960454,"reputation":44539,"user_id":1762224,"accept_rate":61,"display_name":"Mr. Polywhirl"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686858971,"creation_date":1686858558,"answer_id":76485090,"question_id":76484983,"body_markdown":"It depends on how you want to &quot;cast&quot;.\r\n\r\n1. If you are parsing a string in Python, you would call `int(str)`, but in Java you would have to use the boxed type&#39;s (`Integer.class`) static parsing method i.e `Integer.parseInt(str)`\r\n\r\n   ```py\r\n   # Python\r\n   str_val = &#39;42&#39;\r\n   int_val = int(str_val) # 42\r\n   print(type(str_val))   # &lt;class &#39;str&#39;&gt;\r\n   print(type(int_val))   # &lt;class &#39;int&#39;&gt;\r\n   ```\r\n\r\n   ```java\r\n   /* Java */\r\n   String strVal = &quot;42&quot;;\r\n   int intVal = Integer.parseInt(strVal); // 42\r\n   ```\r\n\r\n2. If you are converting a floating-point in Python, you would call `int(floating_value)`, but in Java you would simply place the desired type i.e. `(int)` before the value i.e. `(int) floatingValue`.\r\n\r\n   ```py\r\n   # Python\r\n   floating_value = 3.14\r\n   int_val = int(floating_value) # 3\r\n   print(type(floating_value))   # &lt;class &#39;float&#39;&gt;\r\n   print(type(int_val))          # &lt;class &#39;int&#39;&gt;\r\n   ```\r\n\r\n   ```java\r\n   /* Java */\r\n   float floatingVal = 3.14;\r\n   int intVal = (int) floatingVal; // 3\r\n   ```\r\n\r\nPython treats typecasting and parsing very similarly.","title":"Differences between some functions in Java","body":"<p>It depends on how you want to &quot;cast&quot;.</p>\n<ol>\n<li><p>If you are parsing a string in Python, you would call <code>int(str)</code>, but in Java you would have to use the boxed type's (<code>Integer.class</code>) static parsing method i.e <code>Integer.parseInt(str)</code></p>\n<pre class=\"lang-py prettyprint-override\"><code># Python\nstr_val = '42'\nint_val = int(str_val) # 42\nprint(type(str_val))   # &lt;class 'str'&gt;\nprint(type(int_val))   # &lt;class 'int'&gt;\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>/* Java */\nString strVal = &quot;42&quot;;\nint intVal = Integer.parseInt(strVal); // 42\n</code></pre>\n</li>\n<li><p>If you are converting a floating-point in Python, you would call <code>int(floating_value)</code>, but in Java you would simply place the desired type i.e. <code>(int)</code> before the value i.e. <code>(int) floatingValue</code>.</p>\n<pre class=\"lang-py prettyprint-override\"><code># Python\nfloating_value = 3.14\nint_val = int(floating_value) # 3\nprint(type(floating_value))   # &lt;class 'float'&gt;\nprint(type(int_val))          # &lt;class 'int'&gt;\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>/* Java */\nfloat floatingVal = 3.14;\nint intVal = (int) floatingVal; // 3\n</code></pre>\n</li>\n</ol>\n<p>Python treats typecasting and parsing very similarly.</p>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686858872,"creation_date":1686858872,"answer_id":76485113,"question_id":76484983,"body_markdown":"To preface, you mention the following.\r\n\r\n&gt; _&quot;... In Python, the equivalent to casting to an integer is `int(VALUE)` ...&quot;_\r\n\r\nThe _[Math#round](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Math.html#round(double))_ function may not be the procedure you&#39;re looking for.\r\n\r\nIn Java, you can cast a _[String](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html)_ value to an _[int](https://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)_ value using the _[Integer#parseInt](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Integer.html#parseInt(java.lang.String))_ method.\r\n\r\n```java\r\nint value = Integer.parseInt(&quot;123&quot;);\r\n```\r\n\r\n&gt; _&quot;... I am curious about the difference between using the `Math.round(VALUE)` function versus casting to an integer like `(int) VALUE` ...&quot;_\r\n\r\nIf you are speaking in terms of a rounding mode, then the _Math#round_ method is going to round towards positive infinity.\r\n\r\nConsider the following demonstration.\r\n\r\n```java\r\ndouble[] values = { 5.5, 2.5, 1.6, 1.1, 1.0, -1.0, -1.1, -1.6, -2.5, -5.5 };\r\nfor (double value : values)\r\n    System.out.printf(&quot;%4.1f to %2d%n&quot;, value, Math.round(value));\r\n```\r\n```none\r\n 5.5 to  6\r\n 2.5 to  3\r\n 1.6 to  2\r\n 1.1 to  1\r\n 1.0 to  1\r\n-1.0 to -1\r\n-1.1 to -1\r\n-1.6 to -2\r\n-2.5 to -2\r\n-5.5 to -5\r\n```\r\n\r\nWhereas, a cast to an _int_ is going to simply truncate the fractional value.  \r\nNo rounding will occur.\r\n\r\n```java\r\ndouble[] values = { 5.5, 2.5, 1.6, 1.1, 1.0, -1.0, -1.1, -1.6, -2.5, -5.5 };\r\nfor (double value : values)\r\n    System.out.printf(&quot;%4.1f to %2d%n&quot;, value, (int) value);\r\n```\r\n```none\r\n 5.5 to  5\r\n 2.5 to  2\r\n 1.6 to  1\r\n 1.1 to  1\r\n 1.0 to  1\r\n-1.0 to -1\r\n-1.1 to -1\r\n-1.6 to -1\r\n-2.5 to -2\r\n-5.5 to -5\r\n```","title":"Differences between some functions in Java","body":"<p>To preface, you mention the following.</p>\n<blockquote>\n<p><em>&quot;... In Python, the equivalent to casting to an integer is <code>int(VALUE)</code> ...&quot;</em></p>\n</blockquote>\n<p>The <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Math.html#round(double)\" rel=\"nofollow noreferrer\">Math#round</a></em> function may not be the procedure you're looking for.</p>\n<p>In Java, you can cast a <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html\" rel=\"nofollow noreferrer\">String</a></em> value to an <em><a href=\"https://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html\" rel=\"nofollow noreferrer\">int</a></em> value using the <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Integer.html#parseInt(java.lang.String)\" rel=\"nofollow noreferrer\">Integer#parseInt</a></em> method.</p>\n<pre class=\"lang-java prettyprint-override\"><code>int value = Integer.parseInt(&quot;123&quot;);\n</code></pre>\n<blockquote>\n<p><em>&quot;... I am curious about the difference between using the <code>Math.round(VALUE)</code> function versus casting to an integer like <code>(int) VALUE</code> ...&quot;</em></p>\n</blockquote>\n<p>If you are speaking in terms of a rounding mode, then the <em>Math#round</em> method is going to round towards positive infinity.</p>\n<p>Consider the following demonstration.</p>\n<pre class=\"lang-java prettyprint-override\"><code>double[] values = { 5.5, 2.5, 1.6, 1.1, 1.0, -1.0, -1.1, -1.6, -2.5, -5.5 };\nfor (double value : values)\n    System.out.printf(&quot;%4.1f to %2d%n&quot;, value, Math.round(value));\n</code></pre>\n<pre class=\"lang-none prettyprint-override\"><code> 5.5 to  6\n 2.5 to  3\n 1.6 to  2\n 1.1 to  1\n 1.0 to  1\n-1.0 to -1\n-1.1 to -1\n-1.6 to -2\n-2.5 to -2\n-5.5 to -5\n</code></pre>\n<p>Whereas, a cast to an <em>int</em> is going to simply truncate the fractional value.<br />\nNo rounding will occur.</p>\n<pre class=\"lang-java prettyprint-override\"><code>double[] values = { 5.5, 2.5, 1.6, 1.1, 1.0, -1.0, -1.1, -1.6, -2.5, -5.5 };\nfor (double value : values)\n    System.out.printf(&quot;%4.1f to %2d%n&quot;, value, (int) value);\n</code></pre>\n<pre class=\"lang-none prettyprint-override\"><code> 5.5 to  5\n 2.5 to  2\n 1.6 to  1\n 1.1 to  1\n 1.0 to  1\n-1.0 to -1\n-1.1 to -1\n-1.6 to -1\n-2.5 to -2\n-5.5 to -5\n</code></pre>\n"}],"owner":{"account_id":21161580,"reputation":119,"user_id":16547129,"display_name":"AlexFullinator"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":2,"score":-1,"last_activity_date":1686858971,"creation_date":1686857492,"question_id":76484983,"body_markdown":"I am new to Java and coming from a background in Python. I am curious about the difference between using the `Math.round(VALUE)` function versus casting to an integer like `(int) VALUE`. In Python, the equivalent to casting to an integer is `int(VALUE)`, so I am struggling to understand the distinction in Java. Can someone explain this difference to me?","title":"Differences between some functions in Java","body":"<p>I am new to Java and coming from a background in Python. I am curious about the difference between using the <code>Math.round(VALUE)</code> function versus casting to an integer like <code>(int) VALUE</code>. In Python, the equivalent to casting to an integer is <code>int(VALUE)</code>, so I am struggling to understand the distinction in Java. Can someone explain this difference to me?</p>\n"},{"tags":["java","jvm","garbage-collection"],"comments":[{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1686858037,"post_id":76484979,"comment_id":134859742,"body_markdown":"Which of the graphics is for which version of Java?","body":"Which of the graphics is for which version of Java?"},{"owner":{"account_id":1278736,"reputation":7363,"user_id":1233359,"accept_rate":73,"display_name":"Dreamer"},"score":0,"creation_date":1686858141,"post_id":76484979,"comment_id":134859769,"body_markdown":"@aled Sorry I forgot to mention all pictures are generated by JDK 11 except the 1st one","body":"@aled Sorry I forgot to mention all pictures are generated by JDK 11 except the 1st one"},{"owner":{"account_id":265649,"reputation":53086,"user_id":552759,"display_name":"jtahlborn"},"score":1,"creation_date":1686860173,"post_id":76484979,"comment_id":134860112,"body_markdown":"presumably java 11 is more aggressive about unloading classes.  so you are probably seeing classes churn more over time.  but as long as your loaded classes is remaining stable, there shouldn&#39;t be any memory issues.","body":"presumably java 11 is more aggressive about unloading classes.  so you are probably seeing classes churn more over time.  but as long as your loaded classes is remaining stable, there shouldn&#39;t be any memory issues."},{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":1,"creation_date":1686862745,"post_id":76484979,"comment_id":134860592,"body_markdown":"As long as metaspace is stable there is no issue. Classes are loaded into metaspace.","body":"As long as metaspace is stable there is no issue. Classes are loaded into metaspace."}],"owner":{"account_id":1278736,"reputation":7363,"user_id":1233359,"accept_rate":73,"display_name":"Dreamer"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686858357,"creation_date":1686857458,"question_id":76484979,"body_markdown":"I am monitoring an application after JDK 11 upgrade from 8. What I found interesting is compare with JDK 8, JDK 11 has significantly increased `Total Loaded Classes` by time compared to JDK 8, despite the `Load Classes` is being steady.\r\n\r\nCan I confirm if Loaded Classes count is being stable, then Total Loaded Classes raised over time should not be a concern as long as heap/non-heap memories are also being stable?\r\n\r\n---Java 8--- (total loaded vs loaded seems to be unchanged over time)\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n\r\n\r\n----Java 11----\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n[![enter image description here][3]][3]\r\n\r\n[![enter image description here][4]][4]\r\n\r\n[![enter image description here][5]][5]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/82Hi5.png\r\n  [2]: https://i.stack.imgur.com/z8Bgn.png\r\n  [3]: https://i.stack.imgur.com/ljKO5.png\r\n  [4]: https://i.stack.imgur.com/oWQLc.png\r\n  [5]: https://i.stack.imgur.com/Uyi6A.png","title":"jvm - total loaded classes vs loaded classes","body":"<p>I am monitoring an application after JDK 11 upgrade from 8. What I found interesting is compare with JDK 8, JDK 11 has significantly increased <code>Total Loaded Classes</code> by time compared to JDK 8, despite the <code>Load Classes</code> is being steady.</p>\n<p>Can I confirm if Loaded Classes count is being stable, then Total Loaded Classes raised over time should not be a concern as long as heap/non-heap memories are also being stable?</p>\n<p>---Java 8--- (total loaded vs loaded seems to be unchanged over time)</p>\n<p><a href=\"https://i.stack.imgur.com/82Hi5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/82Hi5.png\" alt=\"enter image description here\" /></a></p>\n<p>----Java 11----</p>\n<p><a href=\"https://i.stack.imgur.com/z8Bgn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/z8Bgn.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/ljKO5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ljKO5.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/oWQLc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/oWQLc.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/Uyi6A.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Uyi6A.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","mongodb","converters","spring-data-mongodb","mongodb-java"],"answers":[{"tags":[],"owner":{"account_id":6288600,"reputation":204,"user_id":4886983,"display_name":"BARHOUMI"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686857924,"creation_date":1686857924,"answer_id":76485029,"question_id":76468636,"body_markdown":"converter must be like this: \r\n\r\n    public class ArrayListToMapConverter implements Converter&lt;ArrayList, Map&lt;String, Object&gt;&gt; {\r\n\t@Override\r\n\tpublic Map&lt;String, Object&gt; convert(ArrayList source) {\r\n\t\tMap&lt;String, Object&gt; resultMap = new HashMap&lt;&gt;();\r\n\t\tfor (Object item : source) {\r\n\t\t\tif (item instanceof Map) {\r\n\t\t\t\t@SuppressWarnings(&quot;unchecked&quot;)\r\n\t\t\t\tMap&lt;String, Object&gt; mapItem = (Map&lt;String, Object&gt;) item;\r\n\t\t\t\tresultMap.putAll(mapItem);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn resultMap;\r\n\t}\r\n}","title":"Custom converter spring data mongodb","body":"<p>converter must be like this:</p>\n<pre><code>public class ArrayListToMapConverter implements Converter&lt;ArrayList, Map&lt;String, Object&gt;&gt; {\n@Override\npublic Map&lt;String, Object&gt; convert(ArrayList source) {\n    Map&lt;String, Object&gt; resultMap = new HashMap&lt;&gt;();\n    for (Object item : source) {\n        if (item instanceof Map) {\n            @SuppressWarnings(&quot;unchecked&quot;)\n            Map&lt;String, Object&gt; mapItem = (Map&lt;String, Object&gt;) item;\n            resultMap.putAll(mapItem);\n        }\n    }\n    return resultMap;\n}\n</code></pre>\n<p>}</p>\n"}],"owner":{"account_id":6288600,"reputation":204,"user_id":4886983,"display_name":"BARHOUMI"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":609,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686857924,"creation_date":1686689560,"question_id":76468636,"body_markdown":"I&#39;m trying to implement mu custom converter to be used in a specific find m&#233;thode. \r\nSo i implemented another mongoConfig with a custom mongoTemplate uses my custom converter as bellow.\r\n\r\nHere my attribute declared inside my entity called CommOutPut.\r\n\r\n    private List&lt;Map&lt;String, Object&gt;&gt; calls;\r\n\r\nMy find m&#233;thode is defined as bellow: \r\n\r\n    public List&lt;CommOutput&gt; getListCommSupervision(Date startDate, Date endDate, String whereComp) {\r\n\t\tQuery query = new Query();\r\n\t\tif (startDate != null &amp;&amp; endDate != null) {\r\n\t\t\tquery.addCriteria(Criteria.where(&quot;creationDate&quot;).gte(startDate).lte(endDate));\r\n\t\t} else {\r\n\t\t\tif (whereComp != null) {\r\n\t\t\t\tCriteria criteria = Criteria.where(StringUtils.substringBefore(whereComp, &quot;:&quot;)).is(StringUtils.substringAfter(whereComp, &quot;:&quot;));\r\n\t\t\t\tquery.addCriteria(criteria);\r\n\t\t\t}\r\n\t\t}\r\n\t\tquery.with(Sort.by(&quot;_id&quot;));\r\n\t\tquery.fields().include(&quot;creationDate&quot;).include(&quot;_id&quot;).include(&quot;commStatus&quot;)\r\n\t\t\t\t.include(&quot;commId&quot;).include(&quot;personId&quot;).include(&quot;sendWay&quot;)\r\n\t\t\t\t.include(&quot;commForceTreatment&quot;).include(&quot;errors&quot;).include(&quot;sysSourceIds&quot;)\r\n\t\t\t\t.include(&quot;calls.segmentId&quot;).include(&quot;calls.isFailureAllowed&quot;).include(&quot;calls.retHttp&quot;)\r\n\t\t\t\t.include(&quot;calls.retCode&quot;).include(&quot;orderStatus&quot;).include(&quot;commVectorStatus&quot;)\r\n\t\t\t\t.include(&quot;distributorId&quot;);\r\n\t\t\r\n\t\treturn mongoTemplateCustom.find(query, CommOutput.class);\r\n\t}\r\n\r\nMy original mongoConfig Bean:\r\n\r\n    @Configuration\r\n\t@Data\r\n\tpublic class MongoDaoTools extends MongoAutoConfiguration {\r\n\t\tprivate String env;\r\n\t\t\r\n\t\tprivate final DatabaseProperties properties;\r\n\t\t\r\n\t\t@Bean\r\n\t\tpublic MappingMongoConverter mappingMongoConverter(MongoDatabaseFactory databaseFactory) {\r\n\t\t\tMongoMappingContext context = new MongoMappingContext();\r\n\t\t\tDbRefResolver dbRefResolver = new DefaultDbRefResolver(databaseFactory);\r\n\t\t\tMappingMongoConverter converter = new MappingMongoConverter(dbRefResolver, context);\r\n\t\t\tconverter.setTypeMapper(new DefaultMongoTypeMapper(null));\r\n\t\t\tconverter.afterPropertiesSet();\r\n\t\t\treturn converter;\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\t@Bean\r\n\t\tpublic MongoClient mongoClient() {\r\n\t\t\tConnectionString connectionString = new ConnectionString(properties.getDatabaseUri());\r\n\t\t\treturn MongoClients.create(connectionString);\r\n\t\t}\r\n\t\t\r\n\t\t@Bean\r\n\t\tpublic MongoDatabaseFactory mongoDatabaseFactory(MongoClient client) {\r\n\t\t\treturn new SimpleMongoClientDatabaseFactory(client, properties.getDatabase());\r\n\t\t}\r\n\t\t\r\n\t\t@Bean\r\n\t\tpublic MongoTemplate mongoTemplate(MongoDatabaseFactory databaseFactory,MappingMongoConverter mappingMongoConverter) throws Exception {\r\n\t\t\treturn new MongoTemplate(databaseFactory,mappingMongoConverter);\r\n\t\t}\r\n\t}\r\n\r\nMy converter class annotated with @ReadingConverter: \r\n\r\n    public class ArrayListToMapConverter implements Converter&lt;ArrayList, List&lt;Map&lt;String, Object&gt;&gt;&gt; {\r\n\t@Override\r\n\tpublic List&lt;Map&lt;String, Object&gt;&gt; convert(ArrayList source) {\r\n\t\tSystem.out.println(&quot;**************il est dans convert***************&quot;);\r\n\t\tList&lt;Map&lt;String, Object&gt;&gt; resultList = new ArrayList&lt;&gt;();\r\n\t\tfor (Object item : source) {\r\n\t\t\tif (item instanceof Map) {\r\n\t\t\t\t@SuppressWarnings(&quot;unchecked&quot;)\r\n\t\t\t\tMap&lt;String, Object&gt; mapItem = (Map&lt;String, Object&gt;) item;\r\n\t\t\t\tresultList.add(mapItem);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn resultList;\r\n\t}\r\n}\r\n\r\n \r\n\r\nHere my custom mongoConfig contains my custom converter annotated with @Configuration: \r\n\r\n    public class MongoConfig extends MongoAutoConfiguration {\r\n\tprivate final DatabaseProperties properties;\r\n\t\r\n\tpublic MongoConfig(DatabaseProperties properties) {\r\n\t\tthis.properties = properties;\r\n\t}\r\n\t\r\n\t@Bean\r\n\t@Primary\r\n\tpublic MongoClient mongoClient() {\r\n\t\tConnectionString connectionString = new ConnectionString(properties.getDatabaseUri());\r\n\t\treturn MongoClients.create(connectionString);\r\n\t}\r\n\t\r\n\t@Bean\r\n\t@Primary\r\n\tpublic MongoDatabaseFactory mongoDatabaseFactory(MongoClient client) {\r\n\t\treturn new SimpleMongoClientDatabaseFactory(client, properties.getDatabase());\r\n\t}\r\n\t\r\n\t@Bean\r\n\t@Qualifier(&quot;mongoTemplateCustom&quot;)\r\n\tpublic MongoTemplate mongoTemplateCustom(MongoDatabaseFactory databaseFactory) {\r\n\t\tMongoMappingContext context = new MongoMappingContext();\r\n\t\tDbRefResolver dbRefResolver = new DefaultDbRefResolver(databaseFactory);\r\n\t\tMappingMongoConverter converter = new MappingMongoConverter(dbRefResolver, context);\r\n\t\tconverter.setCustomConversions(customConversions());\r\n\t\tconverter.setTypeMapper(new DefaultMongoTypeMapper(null));\r\n\t\treturn new MongoTemplate(databaseFactory, converter);\r\n\t}\r\n\t\r\n\t\r\n\t\r\n\t@Bean\r\n\t@Primary\r\n\tpublic MongoCustomConversions customConversions() {\r\n\t\tSystem.out.println(&quot;Il passe par l&#224;&#224;&#224;&#224;&#224;&#224;&#224;&quot;);\r\n\t\tList&lt;Converter&lt;?, ?&gt;&gt; converters = new ArrayList&lt;&gt;();\r\n\t\tconverters.add(new ArrayListToMapConverter());\r\n\t\treturn new MongoCustomConversions(converters);\r\n\t}\r\n}\r\n\r\n  \r\n\r\nAfter retrieving data from data base, i&#39;m performing a loop in my business layer and here is the issue! \r\n\r\n    if (comm.getCalls() != null &amp;&amp; !comm.getCalls().isEmpty()) {\r\n\t\t\tfor (Map&lt;String, Object&gt; call : comm.getCalls()) { // \r\n\r\njava.lang.ClassCastException: class java.util.ArrayList cannot be cast to class java.util.Map (java.util.ArrayList and java.util.Map are in module java.base of loader &#39;bootstrap&#39;)\r\n\r\nI guess that my converter was not be called correctly. \r\n\r\n\r\n","title":"Custom converter spring data mongodb","body":"<p>I'm trying to implement mu custom converter to be used in a specific find méthode.\nSo i implemented another mongoConfig with a custom mongoTemplate uses my custom converter as bellow.</p>\n<p>Here my attribute declared inside my entity called CommOutPut.</p>\n<pre><code>private List&lt;Map&lt;String, Object&gt;&gt; calls;\n</code></pre>\n<p>My find méthode is defined as bellow:</p>\n<pre><code>public List&lt;CommOutput&gt; getListCommSupervision(Date startDate, Date endDate, String whereComp) {\n    Query query = new Query();\n    if (startDate != null &amp;&amp; endDate != null) {\n        query.addCriteria(Criteria.where(&quot;creationDate&quot;).gte(startDate).lte(endDate));\n    } else {\n        if (whereComp != null) {\n            Criteria criteria = Criteria.where(StringUtils.substringBefore(whereComp, &quot;:&quot;)).is(StringUtils.substringAfter(whereComp, &quot;:&quot;));\n            query.addCriteria(criteria);\n        }\n    }\n    query.with(Sort.by(&quot;_id&quot;));\n    query.fields().include(&quot;creationDate&quot;).include(&quot;_id&quot;).include(&quot;commStatus&quot;)\n            .include(&quot;commId&quot;).include(&quot;personId&quot;).include(&quot;sendWay&quot;)\n            .include(&quot;commForceTreatment&quot;).include(&quot;errors&quot;).include(&quot;sysSourceIds&quot;)\n            .include(&quot;calls.segmentId&quot;).include(&quot;calls.isFailureAllowed&quot;).include(&quot;calls.retHttp&quot;)\n            .include(&quot;calls.retCode&quot;).include(&quot;orderStatus&quot;).include(&quot;commVectorStatus&quot;)\n            .include(&quot;distributorId&quot;);\n    \n    return mongoTemplateCustom.find(query, CommOutput.class);\n}\n</code></pre>\n<p>My original mongoConfig Bean:</p>\n<pre><code>@Configuration\n@Data\npublic class MongoDaoTools extends MongoAutoConfiguration {\n    private String env;\n    \n    private final DatabaseProperties properties;\n    \n    @Bean\n    public MappingMongoConverter mappingMongoConverter(MongoDatabaseFactory databaseFactory) {\n        MongoMappingContext context = new MongoMappingContext();\n        DbRefResolver dbRefResolver = new DefaultDbRefResolver(databaseFactory);\n        MappingMongoConverter converter = new MappingMongoConverter(dbRefResolver, context);\n        converter.setTypeMapper(new DefaultMongoTypeMapper(null));\n        converter.afterPropertiesSet();\n        return converter;\n    }\n    \n    \n    @Bean\n    public MongoClient mongoClient() {\n        ConnectionString connectionString = new ConnectionString(properties.getDatabaseUri());\n        return MongoClients.create(connectionString);\n    }\n    \n    @Bean\n    public MongoDatabaseFactory mongoDatabaseFactory(MongoClient client) {\n        return new SimpleMongoClientDatabaseFactory(client, properties.getDatabase());\n    }\n    \n    @Bean\n    public MongoTemplate mongoTemplate(MongoDatabaseFactory databaseFactory,MappingMongoConverter mappingMongoConverter) throws Exception {\n        return new MongoTemplate(databaseFactory,mappingMongoConverter);\n    }\n}\n</code></pre>\n<p>My converter class annotated with @ReadingConverter:</p>\n<pre><code>public class ArrayListToMapConverter implements Converter&lt;ArrayList, List&lt;Map&lt;String, Object&gt;&gt;&gt; {\n@Override\npublic List&lt;Map&lt;String, Object&gt;&gt; convert(ArrayList source) {\n    System.out.println(&quot;**************il est dans convert***************&quot;);\n    List&lt;Map&lt;String, Object&gt;&gt; resultList = new ArrayList&lt;&gt;();\n    for (Object item : source) {\n        if (item instanceof Map) {\n            @SuppressWarnings(&quot;unchecked&quot;)\n            Map&lt;String, Object&gt; mapItem = (Map&lt;String, Object&gt;) item;\n            resultList.add(mapItem);\n        }\n    }\n    return resultList;\n}\n</code></pre>\n<p>}</p>\n<p>Here my custom mongoConfig contains my custom converter annotated with @Configuration:</p>\n<pre><code>public class MongoConfig extends MongoAutoConfiguration {\nprivate final DatabaseProperties properties;\n\npublic MongoConfig(DatabaseProperties properties) {\n    this.properties = properties;\n}\n\n@Bean\n@Primary\npublic MongoClient mongoClient() {\n    ConnectionString connectionString = new ConnectionString(properties.getDatabaseUri());\n    return MongoClients.create(connectionString);\n}\n\n@Bean\n@Primary\npublic MongoDatabaseFactory mongoDatabaseFactory(MongoClient client) {\n    return new SimpleMongoClientDatabaseFactory(client, properties.getDatabase());\n}\n\n@Bean\n@Qualifier(&quot;mongoTemplateCustom&quot;)\npublic MongoTemplate mongoTemplateCustom(MongoDatabaseFactory databaseFactory) {\n    MongoMappingContext context = new MongoMappingContext();\n    DbRefResolver dbRefResolver = new DefaultDbRefResolver(databaseFactory);\n    MappingMongoConverter converter = new MappingMongoConverter(dbRefResolver, context);\n    converter.setCustomConversions(customConversions());\n    converter.setTypeMapper(new DefaultMongoTypeMapper(null));\n    return new MongoTemplate(databaseFactory, converter);\n}\n\n\n\n@Bean\n@Primary\npublic MongoCustomConversions customConversions() {\n    System.out.println(&quot;Il passe par lààààààà&quot;);\n    List&lt;Converter&lt;?, ?&gt;&gt; converters = new ArrayList&lt;&gt;();\n    converters.add(new ArrayListToMapConverter());\n    return new MongoCustomConversions(converters);\n}\n</code></pre>\n<p>}</p>\n<p>After retrieving data from data base, i'm performing a loop in my business layer and here is the issue!</p>\n<pre><code>if (comm.getCalls() != null &amp;&amp; !comm.getCalls().isEmpty()) {\n        for (Map&lt;String, Object&gt; call : comm.getCalls()) { // \n</code></pre>\n<p>java.lang.ClassCastException: class java.util.ArrayList cannot be cast to class java.util.Map (java.util.ArrayList and java.util.Map are in module java.base of loader 'bootstrap')</p>\n<p>I guess that my converter was not be called correctly.</p>\n"},{"tags":["java","connection-pooling","apache-commons-dbcp"],"comments":[{"owner":{"account_id":9847991,"reputation":56906,"user_id":7294900,"accept_rate":94,"display_name":"Ori Marko"},"score":0,"creation_date":1563963955,"post_id":57180501,"comment_id":100872420,"body_markdown":"What was the case of application got hang/unresponsive? was it a bug?","body":"What was the case of application got hang/unresponsive? was it a bug?"},{"owner":{"account_id":10281194,"reputation":11,"user_id":7586282,"display_name":"Sachin Kumar"},"score":0,"creation_date":1564037734,"post_id":57180501,"comment_id":100900517,"body_markdown":"No it was not a code bug. Let&#39;s assume there were maxActive connection limit = 20 and one request needs 2 connection. Then we hit 11 requests(means connections needed = 22) in parallel which lead to server unresponsive.","body":"No it was not a code bug. Let&#39;s assume there were maxActive connection limit = 20 and one request needs 2 connection. Then we hit 11 requests(means connections needed = 22) in parallel which lead to server unresponsive."},{"owner":{"account_id":9847991,"reputation":56906,"user_id":7294900,"accept_rate":94,"display_name":"Ori Marko"},"score":0,"creation_date":1564048274,"post_id":57180501,"comment_id":100906307,"body_markdown":"Show your configuration","body":"Show your configuration"},{"owner":{"account_id":10281194,"reputation":11,"user_id":7586282,"display_name":"Sachin Kumar"},"score":0,"creation_date":1564129302,"post_id":57180501,"comment_id":100936586,"body_markdown":"`final BasicDataSource basicDataSource = new BasicDataSource();` `basicDataSource.setUrl(url);`\n`basicDataSource.setUsername(user);`\n`basicDataSource.setPassword(password);`\n`basicDataSource.setDriverClassName(driver);`\n`if (driver.contains(&quot;oracle&quot;)) {`\n`basicDataSource.setValidationQuery(&quot;SELECT 1 FROM DUAL&quot;);`\n`}`\n`basicDataSource.setMaxTotal(20);`\n`basicDataSource.setMaxIdle(20);`\n`basicDataSource.setDefaultAutoCommit(false);`","body":"<code>final BasicDataSource basicDataSource = new BasicDataSource();</code> <code>basicDataSource.setUrl(url);</code> <code>basicDataSource.setUsername(user);</code> <code>basicDataSource.setPassword(password);</code> <code>basicDataSource.setDriverClassName(driver);</code> <code>if (driver.contains(&quot;oracle&quot;)) {</code> <code>basicDataSource.setValidationQuery(&quot;SELECT 1 FROM DUAL&quot;);</code> <code>}</code> <code>basicDataSource.setMaxTotal(20);</code> <code>basicDataSource.setMaxIdle(20);</code> <code>basicDataSource.setDefaultAutoCommit(false);</code>"}],"answers":[{"tags":[],"owner":{"account_id":7522842,"reputation":3473,"user_id":8082162,"accept_rate":71,"display_name":"aschoerk"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1563965053,"creation_date":1563965053,"answer_id":57181050,"question_id":57180501,"body_markdown":"Motivations to limit the number of connections in a db-Pool\r\n\r\n - The maximum number of connections clients might create to a DBMS normally is limited. By limiting the number of connections a node can use at the same time, you can calculate the hard limit and avoid meeting it.\r\n - if your application has a connection leak, this will hopefully lead on a single node to an error, not on the complete cluster, so you can handle it earlier, not when the DBMS stops working because all possible connections a dangling.\r\n\r\n","title":"apache-commons-dbcp connection pooling maxActive parameter","body":"<p>Motivations to limit the number of connections in a db-Pool</p>\n\n<ul>\n<li>The maximum number of connections clients might create to a DBMS normally is limited. By limiting the number of connections a node can use at the same time, you can calculate the hard limit and avoid meeting it.</li>\n<li>if your application has a connection leak, this will hopefully lead on a single node to an error, not on the complete cluster, so you can handle it earlier, not when the DBMS stops working because all possible connections a dangling.</li>\n</ul>\n"}],"owner":{"account_id":10281194,"reputation":11,"user_id":7586282,"display_name":"Sachin Kumar"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1505,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1686857521,"creation_date":1563963230,"question_id":57180501,"body_markdown":"We are using Apache DBCP 1.4 for database connection pooling, with Java back-end, in our application. We set the value for maxActive = 20(by default), there was a scenario where requests needed more than 20 connection for execution. At that time application gets hang/unresponsive.\r\n\r\nI have increased the value to maxActive = 50. Then execution completes successfully. In documentation of Apache DBCP, I have seen we can put the value of maxActive = -1, and this will not set upper limit on connection creation. \r\nCan I set maxActive = -1, if not can you please help me understand why it is not desirable and also what can be descent value we can set for maxActive so that my application do not gets hang/unresponsive.\r\n\r\n```java\r\nfinal BasicDataSource basicDataSource = new BasicDataSource(); \r\n\r\nbasicDataSource.setUrl(url);\r\nbasicDataSource.setUsername(user);\r\nbasicDataSource.setPassword(password);\r\nbasicDataSource.setDriverClassName(driver);\r\n\r\nif (driver.contains(&quot;oracle&quot;)) {\r\n  basicDataSource.setValidationQuery(&quot;SELECT 1 FROM DUAL&quot;); } \r\n  basicDataSource.setMaxTotal(20);\r\n  basicDataSource.setMaxIdle(20); \r\n  basicDataSource.setDefaultAutoCommit(false);\r\n}\r\n```","title":"apache-commons-dbcp connection pooling maxActive parameter","body":"<p>We are using Apache DBCP 1.4 for database connection pooling, with Java back-end, in our application. We set the value for maxActive = 20(by default), there was a scenario where requests needed more than 20 connection for execution. At that time application gets hang/unresponsive.</p>\n<p>I have increased the value to maxActive = 50. Then execution completes successfully. In documentation of Apache DBCP, I have seen we can put the value of maxActive = -1, and this will not set upper limit on connection creation.\nCan I set maxActive = -1, if not can you please help me understand why it is not desirable and also what can be descent value we can set for maxActive so that my application do not gets hang/unresponsive.</p>\n<pre class=\"lang-java prettyprint-override\"><code>final BasicDataSource basicDataSource = new BasicDataSource(); \n\nbasicDataSource.setUrl(url);\nbasicDataSource.setUsername(user);\nbasicDataSource.setPassword(password);\nbasicDataSource.setDriverClassName(driver);\n\nif (driver.contains(&quot;oracle&quot;)) {\n  basicDataSource.setValidationQuery(&quot;SELECT 1 FROM DUAL&quot;); } \n  basicDataSource.setMaxTotal(20);\n  basicDataSource.setMaxIdle(20); \n  basicDataSource.setDefaultAutoCommit(false);\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","junit","mockito"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1686911169,"post_id":76484746,"comment_id":134866790,"body_markdown":"Please show your full test instead of random snippets. I suspect you are using `@SpringBootTest` to run your test but without seeing the test class this is impossible to answer.","body":"Please show your full test instead of random snippets. I suspect you are using <code>@SpringBootTest</code> to run your test but without seeing the test class this is impossible to answer."},{"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1694951366,"post_id":76484746,"comment_id":135956315,"body_markdown":"Yes, `@Mock`/`@InjectMocks` is Mockito, whereas `@Autowired`/`@MockBean` is for Spring Boot based tests","body":"Yes, <code>@Mock</code>/<code>@InjectMocks</code> is Mockito, whereas <code>@Autowired</code>/<code>@MockBean</code> is for Spring Boot based tests"}],"answers":[{"tags":[],"owner":{"account_id":28829182,"reputation":31,"user_id":22080054,"display_name":"Dan901"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1686857431,"creation_date":1686857431,"answer_id":76484975,"question_id":76484746,"body_markdown":"`@Mock` and `@InjectMocks` annotations have nothing to do with Spring so it doesn&#39;t matter how you autowire the dependencies in the `ProfileController` class. From the error you got it looks like you are running the test with `@SpringBootTest` where the application context is started so you would need to use the `@MockBean` annotations on `ProfileService` and others in order for them to be injected into the application context.\r\n\r\nAlternatively, you can have a basic unit test without starting the whole application context where `@Mock` and `@InjectMocks` annotations would work as you expect. Just make sure to properly initialize the mocks. The easiest way would be to annotate the test class with `@ExtendWith(MockitoExtension.class)`","title":"Spring Boot / JUnit 5 / Mockito - mocking dependencies in Test classes","body":"<p><code>@Mock</code> and <code>@InjectMocks</code> annotations have nothing to do with Spring so it doesn't matter how you autowire the dependencies in the <code>ProfileController</code> class. From the error you got it looks like you are running the test with <code>@SpringBootTest</code> where the application context is started so you would need to use the <code>@MockBean</code> annotations on <code>ProfileService</code> and others in order for them to be injected into the application context.</p>\n<p>Alternatively, you can have a basic unit test without starting the whole application context where <code>@Mock</code> and <code>@InjectMocks</code> annotations would work as you expect. Just make sure to properly initialize the mocks. The easiest way would be to annotate the test class with <code>@ExtendWith(MockitoExtension.class)</code></p>\n"}],"owner":{"account_id":9286335,"reputation":85,"user_id":6896096,"display_name":"scadh"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":343,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686857431,"creation_date":1686855553,"question_id":76484746,"body_markdown":"I am trying to write JUnit 5 tests for a Spring Boot API but running into problem with dependency injection in the Test class. I wish to test endpoints in the ProfileController, which has 3 dependencies: ProfileService, ProfileModelAssembler (to add REST-centric decorations to json response, e.g. &quot;links&quot;) and ModelMapper. In my Test class, I have the following 3 annotated as shown:\r\n\r\n    @InjectMocks\r\n    ProfileController profileController;\r\n    \r\n    @Mock\r\n    ProfileService profileService;\r\n    \r\n    @Mock\r\n    ProfileModelAssembler profileModelAssembler;\r\n    \r\n    @Mock\r\n    ModelMapper modelMapper;\r\n\r\nWhen I try to run a test, it errors out instantiating the ProfileController due to unsatisfied dependency for the ProfileService (&quot;No qualifying bean of type x.ProfileService available&quot;).\r\n\r\nIn my ProfileController, I have tried to @Autowire those fields directly (not recommended, I know):\r\n\r\n    @Autowired\r\n    private ProfileService profileService;\r\n    @Autowired\r\n    private ProfileModelAssembler profileModelAssembler;\r\n    @Autowired\r\n    private ModelMapper modelMapper;\r\n\r\nas well as via constructor injection:\r\n\r\n    @Autowired\r\n    public ProfileController(ProfileService profileService, ProfileModelAssembler profileModelAssembler, ModelMapper modelMapper) {\r\n        this.profileService = profileService;\r\n        this.profileModelAssembler = profileModelAssembler;\r\n        this.modelMapper = modelMapper;\r\n    }\r\n\r\nError is the same either way. Tutorials I have found for JUnit and Mockito are absolutely all over the place in approach, doing things radically different from one another. I know there are always multiple solutions to a problem, but I&#39;ve been surprised at how little adherence to any sort of &quot;preferred&quot; practice there is. Any recommendations to eliminate this error or resources to which I could turn to learn JUnit/Mockito in a &quot;simple&quot; way for my relatively simple needs?","title":"Spring Boot / JUnit 5 / Mockito - mocking dependencies in Test classes","body":"<p>I am trying to write JUnit 5 tests for a Spring Boot API but running into problem with dependency injection in the Test class. I wish to test endpoints in the ProfileController, which has 3 dependencies: ProfileService, ProfileModelAssembler (to add REST-centric decorations to json response, e.g. &quot;links&quot;) and ModelMapper. In my Test class, I have the following 3 annotated as shown:</p>\n<pre><code>@InjectMocks\nProfileController profileController;\n\n@Mock\nProfileService profileService;\n\n@Mock\nProfileModelAssembler profileModelAssembler;\n\n@Mock\nModelMapper modelMapper;\n</code></pre>\n<p>When I try to run a test, it errors out instantiating the ProfileController due to unsatisfied dependency for the ProfileService (&quot;No qualifying bean of type x.ProfileService available&quot;).</p>\n<p>In my ProfileController, I have tried to @Autowire those fields directly (not recommended, I know):</p>\n<pre><code>@Autowired\nprivate ProfileService profileService;\n@Autowired\nprivate ProfileModelAssembler profileModelAssembler;\n@Autowired\nprivate ModelMapper modelMapper;\n</code></pre>\n<p>as well as via constructor injection:</p>\n<pre><code>@Autowired\npublic ProfileController(ProfileService profileService, ProfileModelAssembler profileModelAssembler, ModelMapper modelMapper) {\n    this.profileService = profileService;\n    this.profileModelAssembler = profileModelAssembler;\n    this.modelMapper = modelMapper;\n}\n</code></pre>\n<p>Error is the same either way. Tutorials I have found for JUnit and Mockito are absolutely all over the place in approach, doing things radically different from one another. I know there are always multiple solutions to a problem, but I've been surprised at how little adherence to any sort of &quot;preferred&quot; practice there is. Any recommendations to eliminate this error or resources to which I could turn to learn JUnit/Mockito in a &quot;simple&quot; way for my relatively simple needs?</p>\n"},{"tags":["java","excel"],"owner":{"account_id":28829266,"reputation":1,"user_id":22080118,"display_name":"Alejandro Pedreros"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686856913,"creation_date":1686856871,"question_id":76484909,"body_markdown":"```\r\npublic class SheetHandler extends DefaultHandler {\r\n    private static final Logger LOG = LoggerFactory.getLogger(SheetHandler.class);\r\n\r\n    private final SharedStringsTable sst;\r\n    private String lastContents;\r\n    private boolean nextIsString;\r\n    private boolean inlineStr;\r\n    private String cellRowCol;\r\n    private final LruCache&lt;Integer, String&gt; stringTableCache;\r\n    private CommonUtils utils = new CommonUtils();\r\n\r\n    private FloorCeilingLocalBean bean;\r\n    private List&lt;FloorCeilingLocalBean&gt; beanList;\r\n    private int rowCount = 0;\r\n    private int columnCount = 0;\r\n    private static final int HEADER_ROW = 0;\r\n    private static final int COLUMNS_MAXIMUM = 14; // restore file\r\n\r\n    private static final String ROW = &quot;row&quot;;\r\n    private static final String CELL = &quot;c&quot;;\r\n    private static final String CELL_ROW_COL = &quot;r&quot;; // A cells row/column position\r\n    private static final String CELL_VALUE = &quot;v&quot;;\r\n    private static final String CELL_INLINE = &quot;t&quot;;\r\n    private static final String CELL_TYPE = &quot;t&quot;;\r\n    private static final String CELL_TYPE_STRING = &quot;s&quot;;\r\n\r\n    private static final int STATION_CELL = 1;\r\n    private static final int CATEGORY_CELL = 2;\r\n    private static final int CAR_CELL = 3;\r\n    private static final int DAILY_FLOOR_CELL = 4;\r\n    private static final int DAILY_CEIL_CELL = 5;\r\n    private static final int WEEKLY_FLOOR_CELL = 6;\r\n    private static final int WEEKLY_CEIL_CELL = 7;\r\n    private static final int MONTHLY_FLOOR_CELL = 8;\r\n    private static final int MONTHLY_CEIL_CELL = 9;\r\n    private static final int WEEKEND_FLOOR_CELL = 10;\r\n    private static final int WEEKEND_CEIL_CELL = 11;\r\n    private static final int FROM_DATE_CELL = 12;\r\n    private static final int TO_DATE_CELL = 13;\r\n    private static final int LOCK_RULE = 14;\r\n    public SheetHandler(SharedStringsTable sst) {\r\n        this.sst = sst;\r\n        this.stringTableCache = new LruCache&lt;&gt;(100000);\r\n    }\r\n\r\n    public SheetHandler(SharedStringsTable sst, LruCache&lt;Integer, String&gt; stringTableCache) {\r\n        this.sst = sst;\r\n        this.stringTableCache = stringTableCache;\r\n    }\r\n\r\n    @Override\r\n    public void startDocument() {\r\n        beanList = new ArrayList&lt;&gt;();\r\n    }\r\n\r\n    private void startNewRow() {\r\n        columnCount = 1;\r\n\r\n        // header row\r\n        if (rowCount != HEADER_ROW) {\r\n            bean = new FloorCeilingLocalBean();\r\n        }\r\n    }\r\n\r\n    private void endRow() {\r\n        LOG.debug(&quot;Row: {}, Column: {},  Bean: {}&quot;,rowCount, columnCount-1, bean != null ? bean.toStringCsv() : &quot;&quot;);\r\n        // blank row or invalid row if the column count does not match one of these sizes\r\n        // also don&#39;t include the header row\r\n        int cols = columnCount - 1;\r\n        if ((cols == COLUMNS_MAXIMUM) &amp;&amp; (rowCount != HEADER_ROW)) {\r\n            beanList.add(bean);\r\n        }\r\n        rowCount++;\r\n    }\r\n\r\n    @Override\r\n    // callback function on a start tag element\r\n    public void startElement(String uri, String localName, String name, Attributes attributes)\r\n    {\r\n        // A ROW tag equals a new Floor/Ceiling bean\r\n        if(name.equals(ROW)) {\r\n            startNewRow();\r\n        } else\r\n        // A CELL tag equals a field in the bean\r\n        if(name.equals(CELL)) {\r\n            cellRowCol = attributes.getValue(CELL_ROW_COL);\r\n\r\n            // for a string cell the value is an index in the SST (Shared String Table).\r\n            // set the nextString flag, so we know to pull actual string value from the SST.\r\n            // If from a restore file the string value will be an in-line string\r\n            String cellType = attributes.getValue(CELL_TYPE);\r\n            nextIsString = cellType != null &amp;&amp; cellType.equals(CELL_TYPE_STRING);\r\n            inlineStr = cellType != null &amp;&amp; cellType.equals(&quot;inlineStr&quot;);\r\n        }\r\n\r\n        // Clear contents cache\r\n        lastContents = &quot;&quot;;\r\n    }\r\n\r\n    @Override\r\n    // Callback function on and end tag element\r\n    public void endElement(String uri, String localName, String name) {\r\n        // If a string cell, get the actual cell value from the SST. Cache it in the LRUCache if we need it again\r\n        if(nextIsString) {\r\n            Integer idx = Integer.valueOf(lastContents);\r\n            lastContents = stringTableCache.get(idx);\r\n            if (lastContents == null &amp;&amp; !stringTableCache.containsKey(idx)) {\r\n                lastContents = new XSSFRichTextString(sst.getEntryAt(idx)).toString();\r\n                stringTableCache.put(idx, lastContents);\r\n            }\r\n            nextIsString = false;\r\n        }\r\n\r\n        // A CELL_VALUE tag is the actual value in a cell\r\n        if((name.equals(CELL_VALUE) &amp;&amp; (rowCount &gt; 0)) || (inlineStr &amp;&amp; name.equals(CELL) &amp;&amp; (rowCount &gt; 0))) {\r\n            setBeanValue();\r\n            columnCount++;\r\n        }\r\n\r\n        //\r\n        if((name.equals(CELL_VALUE) &amp;&amp; (rowCount == 0)) || (inlineStr &amp;&amp; name.equals(CELL) &amp;&amp; (rowCount == 0))) {\r\n            validateHeader();\r\n            columnCount++;\r\n        }\r\n\r\n        // Ending ROW tag means end of bean population, so add bean to bean list\r\n        if(name.equals(ROW)) {\r\n            endRow();\r\n        }\r\n    }\r\n\r\n    // Based on the column set the corresponding field value in the bean.\r\n    // For any exceptions, the field in the bean will not be populated and the validator will filter it out\r\n    private void setBeanValue() {\r\n        try {\r\n            switch (columnCount) {\r\n                case STATION_CELL: bean.setStation(StringUtils.trim(lastContents)); break;\r\n                case CATEGORY_CELL: bean.setCategory(lastContents); break;\r\n                case CAR_CELL: bean.setCar(lastContents); break;\r\n                case DAILY_FLOOR_CELL: bean.setDailyFloorAmt(Float.parseFloat(lastContents)); break;\r\n                case DAILY_CEIL_CELL: bean.setDailyCeilingAmt(Float.parseFloat(lastContents)); break;\r\n                case WEEKLY_FLOOR_CELL: bean.setWeeklyFloorAmt(Float.parseFloat(lastContents)); break;\r\n                case WEEKLY_CEIL_CELL: bean.setWeeklyCeilingAmt(Float.parseFloat(lastContents)); break;\r\n                case MONTHLY_FLOOR_CELL: bean.setMonthlyFloorAmt(Float.parseFloat(lastContents)); break;\r\n                case MONTHLY_CEIL_CELL: bean.setMonthlyCeilingAmt(Float.parseFloat(lastContents)); break;\r\n                case WEEKEND_FLOOR_CELL: bean.setWeekendFloorAmt(Float.parseFloat(lastContents)); break;\r\n                case WEEKEND_CEIL_CELL: bean.setWeekendCeilingAmt(Float.parseFloat(lastContents)); break;\r\n                case FROM_DATE_CELL: bean.setFromDate( utils.getLocalDate(lastContents)); break;\r\n                case TO_DATE_CELL: bean.setToDate( utils.getLocalDate(lastContents)); break;\r\n                case LOCK_RULE: bean.setRuleLock(lastContents.equals(&quot;Y&quot;) ? true : false); break;\r\n                default: LOG.warn(&quot;Unknown cell position: row={}, column={}  and value={} &quot;, rowCount, columnCount, lastContents);\r\n            }\r\n        } catch (Exception e) {\r\n            LOG.warn(&quot;Unable to parse cell {} value={}&quot;, cellRowCol, lastContents);\r\n        }\r\n     }\r\n\r\n    /**\r\n     * Validate each header cell. An Invalid header name or additional columns invalidates the load\r\n     * of the file. Within Excel a column that is empty is not seen by the XML. For the header row\r\n     * we also need to verify that the header is always in the correct column/row position to account for this.\r\n     */\r\n    private void validateHeader() { // not reading the to_date and lock_field heading.\r\n        int columnNdx = columnCount - 1; // zero based array\r\n        if (columnCount &lt;= COLUMNS_MAXIMUM) { // need to avoid out-of-bounds on header array\r\n            int compareNameResult = StringUtils.compareIgnoreCase(HEADERS[columnNdx], StringUtils.trim(lastContents));\r\n            int comparePosResult = StringUtils.compareIgnoreCase(HEADER_POS[columnNdx], cellRowCol);\r\n            boolean lockFieldPresent = HEADERS[columnNdx].equalsIgnoreCase(&quot;LOCK_FIELD&quot;);\r\n            if ((compareNameResult != 0) || (comparePosResult != 0) &amp;&amp; !lockFieldPresent) {\r\n                LOG.error(&quot;{} column is either missing or misplaced. Please verify file layout.&quot;, HEADERS[columnNdx]);\r\n                throw new UnprocessableException(HEADERS[columnNdx] + &quot; column is either missing or misplaced. Please verify file layout.&quot;);\r\n            }\r\n        }\r\n    }\r\n\r\n    public List&lt;FloorCeilingLocalBean&gt; getResultList() {\r\n        return beanList;\r\n    }\r\n\r\n    // acct for header by subtracting 1\r\n    public int getRowCount() {\r\n        return rowCount-1;\r\n    }\r\n\r\n    public FloorCeilingLocalBean getBean() {\r\n        return bean;\r\n    }\r\n\r\n    @Override\r\n    public void characters(char[] ch, int start, int length) {\r\n        lastContents += new String(ch, start, length);\r\n    }\r\n}\r\n```\r\nI added `lockFieldPresent = HEADERS[columnNdx].equalsIgnoreCase(&quot;LOCK_FIELD&quot;)` to capture if LOCK_FIELD is missing, but when I tested the code by removing the field from the excel file, the error.log under validateHeaders did not produce the error message. ","title":"what logic to use in the validateHeader() to capture if LOCK_FIELD is missing?","body":"<pre><code>public class SheetHandler extends DefaultHandler {\n    private static final Logger LOG = LoggerFactory.getLogger(SheetHandler.class);\n\n    private final SharedStringsTable sst;\n    private String lastContents;\n    private boolean nextIsString;\n    private boolean inlineStr;\n    private String cellRowCol;\n    private final LruCache&lt;Integer, String&gt; stringTableCache;\n    private CommonUtils utils = new CommonUtils();\n\n    private FloorCeilingLocalBean bean;\n    private List&lt;FloorCeilingLocalBean&gt; beanList;\n    private int rowCount = 0;\n    private int columnCount = 0;\n    private static final int HEADER_ROW = 0;\n    private static final int COLUMNS_MAXIMUM = 14; // restore file\n\n    private static final String ROW = &quot;row&quot;;\n    private static final String CELL = &quot;c&quot;;\n    private static final String CELL_ROW_COL = &quot;r&quot;; // A cells row/column position\n    private static final String CELL_VALUE = &quot;v&quot;;\n    private static final String CELL_INLINE = &quot;t&quot;;\n    private static final String CELL_TYPE = &quot;t&quot;;\n    private static final String CELL_TYPE_STRING = &quot;s&quot;;\n\n    private static final int STATION_CELL = 1;\n    private static final int CATEGORY_CELL = 2;\n    private static final int CAR_CELL = 3;\n    private static final int DAILY_FLOOR_CELL = 4;\n    private static final int DAILY_CEIL_CELL = 5;\n    private static final int WEEKLY_FLOOR_CELL = 6;\n    private static final int WEEKLY_CEIL_CELL = 7;\n    private static final int MONTHLY_FLOOR_CELL = 8;\n    private static final int MONTHLY_CEIL_CELL = 9;\n    private static final int WEEKEND_FLOOR_CELL = 10;\n    private static final int WEEKEND_CEIL_CELL = 11;\n    private static final int FROM_DATE_CELL = 12;\n    private static final int TO_DATE_CELL = 13;\n    private static final int LOCK_RULE = 14;\n    public SheetHandler(SharedStringsTable sst) {\n        this.sst = sst;\n        this.stringTableCache = new LruCache&lt;&gt;(100000);\n    }\n\n    public SheetHandler(SharedStringsTable sst, LruCache&lt;Integer, String&gt; stringTableCache) {\n        this.sst = sst;\n        this.stringTableCache = stringTableCache;\n    }\n\n    @Override\n    public void startDocument() {\n        beanList = new ArrayList&lt;&gt;();\n    }\n\n    private void startNewRow() {\n        columnCount = 1;\n\n        // header row\n        if (rowCount != HEADER_ROW) {\n            bean = new FloorCeilingLocalBean();\n        }\n    }\n\n    private void endRow() {\n        LOG.debug(&quot;Row: {}, Column: {},  Bean: {}&quot;,rowCount, columnCount-1, bean != null ? bean.toStringCsv() : &quot;&quot;);\n        // blank row or invalid row if the column count does not match one of these sizes\n        // also don't include the header row\n        int cols = columnCount - 1;\n        if ((cols == COLUMNS_MAXIMUM) &amp;&amp; (rowCount != HEADER_ROW)) {\n            beanList.add(bean);\n        }\n        rowCount++;\n    }\n\n    @Override\n    // callback function on a start tag element\n    public void startElement(String uri, String localName, String name, Attributes attributes)\n    {\n        // A ROW tag equals a new Floor/Ceiling bean\n        if(name.equals(ROW)) {\n            startNewRow();\n        } else\n        // A CELL tag equals a field in the bean\n        if(name.equals(CELL)) {\n            cellRowCol = attributes.getValue(CELL_ROW_COL);\n\n            // for a string cell the value is an index in the SST (Shared String Table).\n            // set the nextString flag, so we know to pull actual string value from the SST.\n            // If from a restore file the string value will be an in-line string\n            String cellType = attributes.getValue(CELL_TYPE);\n            nextIsString = cellType != null &amp;&amp; cellType.equals(CELL_TYPE_STRING);\n            inlineStr = cellType != null &amp;&amp; cellType.equals(&quot;inlineStr&quot;);\n        }\n\n        // Clear contents cache\n        lastContents = &quot;&quot;;\n    }\n\n    @Override\n    // Callback function on and end tag element\n    public void endElement(String uri, String localName, String name) {\n        // If a string cell, get the actual cell value from the SST. Cache it in the LRUCache if we need it again\n        if(nextIsString) {\n            Integer idx = Integer.valueOf(lastContents);\n            lastContents = stringTableCache.get(idx);\n            if (lastContents == null &amp;&amp; !stringTableCache.containsKey(idx)) {\n                lastContents = new XSSFRichTextString(sst.getEntryAt(idx)).toString();\n                stringTableCache.put(idx, lastContents);\n            }\n            nextIsString = false;\n        }\n\n        // A CELL_VALUE tag is the actual value in a cell\n        if((name.equals(CELL_VALUE) &amp;&amp; (rowCount &gt; 0)) || (inlineStr &amp;&amp; name.equals(CELL) &amp;&amp; (rowCount &gt; 0))) {\n            setBeanValue();\n            columnCount++;\n        }\n\n        //\n        if((name.equals(CELL_VALUE) &amp;&amp; (rowCount == 0)) || (inlineStr &amp;&amp; name.equals(CELL) &amp;&amp; (rowCount == 0))) {\n            validateHeader();\n            columnCount++;\n        }\n\n        // Ending ROW tag means end of bean population, so add bean to bean list\n        if(name.equals(ROW)) {\n            endRow();\n        }\n    }\n\n    // Based on the column set the corresponding field value in the bean.\n    // For any exceptions, the field in the bean will not be populated and the validator will filter it out\n    private void setBeanValue() {\n        try {\n            switch (columnCount) {\n                case STATION_CELL: bean.setStation(StringUtils.trim(lastContents)); break;\n                case CATEGORY_CELL: bean.setCategory(lastContents); break;\n                case CAR_CELL: bean.setCar(lastContents); break;\n                case DAILY_FLOOR_CELL: bean.setDailyFloorAmt(Float.parseFloat(lastContents)); break;\n                case DAILY_CEIL_CELL: bean.setDailyCeilingAmt(Float.parseFloat(lastContents)); break;\n                case WEEKLY_FLOOR_CELL: bean.setWeeklyFloorAmt(Float.parseFloat(lastContents)); break;\n                case WEEKLY_CEIL_CELL: bean.setWeeklyCeilingAmt(Float.parseFloat(lastContents)); break;\n                case MONTHLY_FLOOR_CELL: bean.setMonthlyFloorAmt(Float.parseFloat(lastContents)); break;\n                case MONTHLY_CEIL_CELL: bean.setMonthlyCeilingAmt(Float.parseFloat(lastContents)); break;\n                case WEEKEND_FLOOR_CELL: bean.setWeekendFloorAmt(Float.parseFloat(lastContents)); break;\n                case WEEKEND_CEIL_CELL: bean.setWeekendCeilingAmt(Float.parseFloat(lastContents)); break;\n                case FROM_DATE_CELL: bean.setFromDate( utils.getLocalDate(lastContents)); break;\n                case TO_DATE_CELL: bean.setToDate( utils.getLocalDate(lastContents)); break;\n                case LOCK_RULE: bean.setRuleLock(lastContents.equals(&quot;Y&quot;) ? true : false); break;\n                default: LOG.warn(&quot;Unknown cell position: row={}, column={}  and value={} &quot;, rowCount, columnCount, lastContents);\n            }\n        } catch (Exception e) {\n            LOG.warn(&quot;Unable to parse cell {} value={}&quot;, cellRowCol, lastContents);\n        }\n     }\n\n    /**\n     * Validate each header cell. An Invalid header name or additional columns invalidates the load\n     * of the file. Within Excel a column that is empty is not seen by the XML. For the header row\n     * we also need to verify that the header is always in the correct column/row position to account for this.\n     */\n    private void validateHeader() { // not reading the to_date and lock_field heading.\n        int columnNdx = columnCount - 1; // zero based array\n        if (columnCount &lt;= COLUMNS_MAXIMUM) { // need to avoid out-of-bounds on header array\n            int compareNameResult = StringUtils.compareIgnoreCase(HEADERS[columnNdx], StringUtils.trim(lastContents));\n            int comparePosResult = StringUtils.compareIgnoreCase(HEADER_POS[columnNdx], cellRowCol);\n            boolean lockFieldPresent = HEADERS[columnNdx].equalsIgnoreCase(&quot;LOCK_FIELD&quot;);\n            if ((compareNameResult != 0) || (comparePosResult != 0) &amp;&amp; !lockFieldPresent) {\n                LOG.error(&quot;{} column is either missing or misplaced. Please verify file layout.&quot;, HEADERS[columnNdx]);\n                throw new UnprocessableException(HEADERS[columnNdx] + &quot; column is either missing or misplaced. Please verify file layout.&quot;);\n            }\n        }\n    }\n\n    public List&lt;FloorCeilingLocalBean&gt; getResultList() {\n        return beanList;\n    }\n\n    // acct for header by subtracting 1\n    public int getRowCount() {\n        return rowCount-1;\n    }\n\n    public FloorCeilingLocalBean getBean() {\n        return bean;\n    }\n\n    @Override\n    public void characters(char[] ch, int start, int length) {\n        lastContents += new String(ch, start, length);\n    }\n}\n</code></pre>\n<p>I added <code>lockFieldPresent = HEADERS[columnNdx].equalsIgnoreCase(&quot;LOCK_FIELD&quot;)</code> to capture if LOCK_FIELD is missing, but when I tested the code by removing the field from the excel file, the error.log under validateHeaders did not produce the error message.</p>\n"},{"tags":["java","object","methods","scope"],"comments":[{"owner":{"account_id":18361187,"reputation":686,"user_id":13373270,"display_name":"codebod"},"score":1,"creation_date":1686856196,"post_id":76484698,"comment_id":134859403,"body_markdown":"How about passing a parameter into `myMethod` such as `public void myMethod(Item otherItem) {...}`?","body":"How about passing a parameter into <code>myMethod</code> such as <code>public void myMethod(Item otherItem) {...}</code>?"},{"owner":{"account_id":9378,"reputation":14558,"user_id":17300,"display_name":"Stephen P"},"score":0,"creation_date":1686858911,"post_id":76484698,"comment_id":134859905,"body_markdown":"Is all that code you posted in _one_ file? If it is, that could be confusing you. If you have a file `Item.java` for the &quot;Item&quot; class it would contain, from the code you posted, the lines only from the line `class Item {` through the last closing brace `}` — now look at _only_ that file. Looking at that file, where does `object2` in &quot;myMethod&quot; come from? No, don&#39;t look at Main.java ... looking _only_ at Item.java, where does `object2` come from? Nowhere. It&#39;s not declared anywhere in Item.java — it is not in the `Item` class, and &quot;Item&quot; does not know that Main.java exists.","body":"Is all that code you posted in <i>one</i> file? If it is, that could be confusing you. If you have a file <code>Item.java</code> for the &quot;Item&quot; class it would contain, from the code you posted, the lines only from the line <code>class Item {</code> through the last closing brace <code>}</code> — now look at <i>only</i> that file. Looking at that file, where does <code>object2</code> in &quot;myMethod&quot; come from? No, don&#39;t look at Main.java ... looking <i>only</i> at Item.java, where does <code>object2</code> come from? Nowhere. It&#39;s not declared anywhere in Item.java — it is not in the <code>Item</code> class, and &quot;Item&quot; does not know that Main.java exists."}],"answers":[{"comments":[{"owner":{"account_id":28827590,"reputation":3,"user_id":22078664,"display_name":"Beau"},"score":0,"creation_date":1686858460,"post_id":76484912,"comment_id":134859826,"body_markdown":"Thank you, the purpose is to change instance variables of both objects based on the instance variables of the other object, and that within a method.\n\nThe int return type in the method declaration was supposed to be a void, sorry about that.\n\nI didn&#39;t know you could supply an object as a parameter like that to a method, but that seems to be exactly what I was looking for! I&#39;m assuming all the supplied object&#39;s instance variables that get changed within the method will also be changed within the main method? If so, that&#39;s exactly what I was looking for. Thank you so much!","body":"Thank you, the purpose is to change instance variables of both objects based on the instance variables of the other object, and that within a method.  The int return type in the method declaration was supposed to be a void, sorry about that.  I didn&#39;t know you could supply an object as a parameter like that to a method, but that seems to be exactly what I was looking for! I&#39;m assuming all the supplied object&#39;s instance variables that get changed within the method will also be changed within the main method? If so, that&#39;s exactly what I was looking for. Thank you so much!"},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1686859318,"post_id":76484912,"comment_id":134859964,"body_markdown":"@Beau, no problem, glad it helped.  _&quot;... I didn&#39;t know you could supply an object as a parameter like that to a method ...&quot;_, yes, since it is _of_ the enclosing class, somewhat confusing; logically it seems recursive.  It works.   _&quot;... I&#39;m assuming all the supplied object&#39;s instance variables that get changed within the method will also be changed within the main method? ...&quot;_, yes, the object that is passed will be updated, thus the object within _main_ will have the corresponding values.","body":"@Beau, no problem, glad it helped.  <i>&quot;... I didn&#39;t know you could supply an object as a parameter like that to a method ...&quot;</i>, yes, since it is <i>of</i> the enclosing class, somewhat confusing; logically it seems recursive.  It works.   <i>&quot;... I&#39;m assuming all the supplied object&#39;s instance variables that get changed within the method will also be changed within the main method? ...&quot;</i>, yes, the object that is passed will be updated, thus the object within <i>main</i> will have the corresponding values."}],"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1686856900,"creation_date":1686856900,"answer_id":76484912,"question_id":76484698,"body_markdown":"&gt; _&quot;... I&#39;d like to change the value of an instance variable of an object inside a method, while that object hasn&#39;t called the method ...&quot;_\r\n\r\nTechnically you can, if the object&#39;s variable is _[static](https://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html)_.   \r\nAlthough, this does not appear to be logical for your current design.\r\n\r\n&gt; _&quot;... I&#39;d like to change object2.num inside the method myMethod, but that will give an error, as object2 is outside the scope of myMethod. ...&quot;_\r\n\r\nCorrect, in Java, you won&#39;t be able to change an object&#39;s variable without the actual object.\r\n\r\n&gt; _&quot;... The only solution I&#39;ve come up with is to give object1 an additional instance variable, num2, which will act as object2.num. Outside of the method, I will then change object2.num to object1.num2. ...&quot;_\r\n\r\nYou&#39;ll have to provide more details about the functional purpose of the task.  \r\n\r\nI recommend passing _object2_ as a parameter to _myMethod_.  \r\nAdditionally, I had to add a _return_ here, since the method returns an _int_.\r\n\r\n```java\r\npublic int myMethod(Item object2) {\r\n    object2.num *= this.num;\r\n    return this.num *= object2.num;\r\n}\r\n```\r\n\r\nOr, you could just declare the method with a _void_ return type.\r\n\r\n```java\r\npublic void myMethod(Item object2) {\r\n    object2.num *= this.num;\r\n    this.num *= object2.num;\r\n}\r\n```\r\n\r\nAnd then, supply _object2_ as the argument.\r\n\r\n```java\r\nobject1.myMethod(object2);\r\n```\r\n\r\nOutput\r\n\r\n```none\r\n16 8\r\n```","title":"How to change the value of an instance variable of an object that didn&#39;t call the method?","body":"<blockquote>\n<p><em>&quot;... I'd like to change the value of an instance variable of an object inside a method, while that object hasn't called the method ...&quot;</em></p>\n</blockquote>\n<p>Technically you can, if the object's variable is <em><a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html\" rel=\"nofollow noreferrer\">static</a></em>.<br />\nAlthough, this does not appear to be logical for your current design.</p>\n<blockquote>\n<p><em>&quot;... I'd like to change object2.num inside the method myMethod, but that will give an error, as object2 is outside the scope of myMethod. ...&quot;</em></p>\n</blockquote>\n<p>Correct, in Java, you won't be able to change an object's variable without the actual object.</p>\n<blockquote>\n<p><em>&quot;... The only solution I've come up with is to give object1 an additional instance variable, num2, which will act as object2.num. Outside of the method, I will then change object2.num to object1.num2. ...&quot;</em></p>\n</blockquote>\n<p>You'll have to provide more details about the functional purpose of the task.</p>\n<p>I recommend passing <em>object2</em> as a parameter to <em>myMethod</em>.<br />\nAdditionally, I had to add a <em>return</em> here, since the method returns an <em>int</em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public int myMethod(Item object2) {\n    object2.num *= this.num;\n    return this.num *= object2.num;\n}\n</code></pre>\n<p>Or, you could just declare the method with a <em>void</em> return type.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void myMethod(Item object2) {\n    object2.num *= this.num;\n    this.num *= object2.num;\n}\n</code></pre>\n<p>And then, supply <em>object2</em> as the argument.</p>\n<pre class=\"lang-java prettyprint-override\"><code>object1.myMethod(object2);\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>16 8\n</code></pre>\n"}],"owner":{"account_id":28827590,"reputation":3,"user_id":22078664,"display_name":"Beau"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":142,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76484912,"answer_count":1,"score":0,"last_activity_date":1686856900,"creation_date":1686855146,"question_id":76484698,"body_markdown":"I&#39;m writing a program in java in which I&#39;d like to change the value of an instance variable of an object inside a method, while that object hasn&#39;t called the method. I&#39;m trying to do something similar to the attached code. I&#39;d like to change object2.num inside the method myMethod, but that will give an error, as object2 is outside the scope of myMethod.\r\n```\r\npublic class Main {\r\n\r\n  public static void main(String[] args) {\r\n\r\n    Item object1 = new Item(2);\r\n    Item object2 = new Item(4);\r\n    \r\n    object1.myMethod();\r\n    System.out.println(object1.num + &quot; &quot; + object2.num);\r\n  }\r\n}\r\n\r\nclass Item {\r\n  \r\n  int num;\r\n\r\n  Item(int n) {\r\n    num = n;\r\n  }\r\n\r\n  public int myMethod() {\r\n    object2.num *= this.num;\r\n    this.num *= object2.num;\r\n  }\r\n}\r\n```\r\n\r\n\r\nThe only solution I&#39;ve come up with is to give object1 an additional instance variable, num2, which will act as object2.num. Outside of the method, I will then change object2.num to object1.num2. However, this seems very suboptimal and will get annoying when working with multiple variables to change. Is there any more efficient way to achieve this?\r\n\r\nI&#39;m still pretty new to coding and there might already be a solution to this, so any help or a link to a solution will be greatly appreciated.","title":"How to change the value of an instance variable of an object that didn&#39;t call the method?","body":"<p>I'm writing a program in java in which I'd like to change the value of an instance variable of an object inside a method, while that object hasn't called the method. I'm trying to do something similar to the attached code. I'd like to change object2.num inside the method myMethod, but that will give an error, as object2 is outside the scope of myMethod.</p>\n<pre><code>public class Main {\n\n  public static void main(String[] args) {\n\n    Item object1 = new Item(2);\n    Item object2 = new Item(4);\n    \n    object1.myMethod();\n    System.out.println(object1.num + &quot; &quot; + object2.num);\n  }\n}\n\nclass Item {\n  \n  int num;\n\n  Item(int n) {\n    num = n;\n  }\n\n  public int myMethod() {\n    object2.num *= this.num;\n    this.num *= object2.num;\n  }\n}\n</code></pre>\n<p>The only solution I've come up with is to give object1 an additional instance variable, num2, which will act as object2.num. Outside of the method, I will then change object2.num to object1.num2. However, this seems very suboptimal and will get annoying when working with multiple variables to change. Is there any more efficient way to achieve this?</p>\n<p>I'm still pretty new to coding and there might already be a solution to this, so any help or a link to a solution will be greatly appreciated.</p>\n"},{"tags":["java","spring-boot","metrics","spring-boot-actuator"],"answers":[{"tags":[],"owner":{"account_id":188555,"reputation":6379,"user_id":427321,"accept_rate":71,"display_name":"Bal&#225;zs N&#233;meth"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1589264402,"creation_date":1589264402,"answer_id":61745055,"question_id":61744960,"body_markdown":"Have a look at [Spring Boot Actuator - HttpTrace][1]\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/actuator-api/html/#http-trace\r\n\r\nIt&#39;s not enabled in the latest versions by default but you can do so by implementing `HttpTraceRepository`.\r\n\r\nIn this repository you can use a counter to measure the number of requests, then add it to the MetricRegistry. Another option would be to use a filter and then use a counter there.","title":"How to count number of requests in spring boot app?","body":"<p>Have a look at <a href=\"https://docs.spring.io/spring-boot/docs/current/actuator-api/html/#http-trace\" rel=\"nofollow noreferrer\">Spring Boot Actuator - HttpTrace</a></p>\n\n<p>It's not enabled in the latest versions by default but you can do so by implementing <code>HttpTraceRepository</code>.</p>\n\n<p>In this repository you can use a counter to measure the number of requests, then add it to the MetricRegistry. Another option would be to use a filter and then use a counter there.</p>\n"},{"tags":[],"owner":{"account_id":8206242,"reputation":1370,"user_id":6175872,"display_name":"PatrickChen"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1589264444,"creation_date":1589264444,"answer_id":61745067,"question_id":61744960,"body_markdown":"A `spring-actuator` example:\r\n```xml\r\n//add pom\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n\r\n```\r\nusing the actuator\r\n```java\r\n@Bean\r\npublic SecurityWebFilterChain securityWebFilterChain(\r\n  ServerHttpSecurity http) {\r\n    return http.authorizeExchange()\r\n      .pathMatchers(&quot;/actuator/**&quot;).permitAll()\r\n      .anyExchange().authenticated()\r\n      .and().build();\r\n}\r\n```\r\nThen you can get the data from http://localhost:8080/metrics \r\n\r\ncheck more from the [official documentation][1]\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/reference/html/production-ready-features.html#production-ready-enabling","title":"How to count number of requests in spring boot app?","body":"<p>A <code>spring-actuator</code> example:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>//add pom\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n&lt;/dependency&gt;\n\n</code></pre>\n\n<p>using the actuator</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\npublic SecurityWebFilterChain securityWebFilterChain(\n  ServerHttpSecurity http) {\n    return http.authorizeExchange()\n      .pathMatchers(\"/actuator/**\").permitAll()\n      .anyExchange().authenticated()\n      .and().build();\n}\n</code></pre>\n\n<p>Then you can get the data from <a href=\"http://localhost:8080/metrics\" rel=\"nofollow noreferrer\">http://localhost:8080/metrics</a> </p>\n\n<p>check more from the <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/production-ready-features.html#production-ready-enabling\" rel=\"nofollow noreferrer\">official documentation</a></p>\n"},{"tags":[],"owner":{"account_id":8903318,"reputation":142,"user_id":6817932,"display_name":"Paulo Berezini"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686855706,"creation_date":1686855706,"answer_id":76484767,"question_id":61744960,"body_markdown":"U can add Spring Boot Actuator and Micrometer dependencies\r\n\r\napplication.properties\r\n\r\n    management.metrics.enable.http.server.requests=true\r\n    management.endpoints.web.exposure.include=*\r\n\r\nMaven:\r\n\r\n    &lt;dependencies&gt;\r\n      &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n      &lt;/dependency&gt;\r\n      &lt;dependency&gt;\r\n        &lt;groupId&gt;io.micrometer&lt;/groupId&gt;\r\n        &lt;artifactId&gt;micrometer-core&lt;/artifactId&gt;\r\n      &lt;/dependency&gt;\r\n      &lt;!-- Include a Micrometer registry of your choice --&gt;\r\n      &lt;dependency&gt;\r\n        &lt;groupId&gt;io.micrometer&lt;/groupId&gt;\r\n        &lt;artifactId&gt;micrometer-registry-prometheus&lt;/artifactId&gt;\r\n      &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\nGradle:\r\n\r\n    dependencies {\r\n      implementation &#39;org.springframework.boot:spring-boot-starter-actuator&#39;\r\n      implementation &#39;io.micrometer:micrometer-core&#39;\r\n      implementation &#39;io.micrometer:micrometer-registry-prometheus&#39;\r\n    }\r\n\r\nIf your runs on localhost:8080 use this\r\n\r\n    http://localhost:8080/actuator/metrics\r\n\r\n&gt; &quot;application.ready.time&quot;, &quot;application.started.time&quot;, &quot;disk.free&quot;,\r\n&gt; &quot;disk.total&quot;, &quot;executor.active&quot;, &quot;executor.completed&quot;,\r\n&gt; &quot;executor.pool.core&quot;, &quot;executor.pool.max&quot;, &quot;executor.pool.size&quot;,\r\n\r\n    http://localhost:8080/actuator/prometheus \r\n\r\n&gt; spring_data_repository_invocations_seconds_count{exception=&quot;None&quot;,method=&quot;findFirstByTitle&quot;,repository=&quot;NewsArticleRepository&quot;,state=&quot;SUCCESS&quot;,}\r\n&gt; 10.0 spring_data_repository_invocations_seconds_sum{exception=&quot;None&quot;,method=&quot;findFirstByTitle&quot;,repository=&quot;NewsArticleRepository&quot;,state=&quot;SUCCESS&quot;,}\r\n&gt; 0.0931051 spring_data_repository_invocations_seconds_count{exception=&quot;None&quot;,method=&quot;findByOrderByPublishedAtDesc&quot;,repository=&quot;NewsArticleRepository&quot;,state=&quot;SUCCESS&quot;,}\r\n&gt; 1.0 and .....\r\n\r\n    http://localhost:8080/actuator/metrics/http.server.requests\r\n\r\n&gt; &quot;name&quot;: &quot;http.server.requests&quot;, &quot;baseUnit&quot;: &quot;seconds&quot;, &quot;measurements&quot;:\r\n&gt; [   {\r\n&gt;     &quot;statistic&quot;: &quot;COUNT&quot;,\r\n&gt;     &quot;value&quot;: 20.0   },   {\r\n&gt;     &quot;statistic&quot;: &quot;TOTAL_TIME&quot;,\r\n&gt;     &quot;value&quot;: 2.0688337   },   {\r\n&gt;     &quot;statistic&quot;: &quot;MAX&quot;,\r\n&gt;     &quot;value&quot;: 0.0   } ],\r\n\r\n","title":"How to count number of requests in spring boot app?","body":"<p>U can add Spring Boot Actuator and Micrometer dependencies</p>\n<p>application.properties</p>\n<pre><code>management.metrics.enable.http.server.requests=true\nmanagement.endpoints.web.exposure.include=*\n</code></pre>\n<p>Maven:</p>\n<pre><code>&lt;dependencies&gt;\n  &lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n  &lt;/dependency&gt;\n  &lt;dependency&gt;\n    &lt;groupId&gt;io.micrometer&lt;/groupId&gt;\n    &lt;artifactId&gt;micrometer-core&lt;/artifactId&gt;\n  &lt;/dependency&gt;\n  &lt;!-- Include a Micrometer registry of your choice --&gt;\n  &lt;dependency&gt;\n    &lt;groupId&gt;io.micrometer&lt;/groupId&gt;\n    &lt;artifactId&gt;micrometer-registry-prometheus&lt;/artifactId&gt;\n  &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n<p>Gradle:</p>\n<pre><code>dependencies {\n  implementation 'org.springframework.boot:spring-boot-starter-actuator'\n  implementation 'io.micrometer:micrometer-core'\n  implementation 'io.micrometer:micrometer-registry-prometheus'\n}\n</code></pre>\n<p>If your runs on localhost:8080 use this</p>\n<pre><code>http://localhost:8080/actuator/metrics\n</code></pre>\n<blockquote>\n<p>&quot;application.ready.time&quot;, &quot;application.started.time&quot;, &quot;disk.free&quot;,\n&quot;disk.total&quot;, &quot;executor.active&quot;, &quot;executor.completed&quot;,\n&quot;executor.pool.core&quot;, &quot;executor.pool.max&quot;, &quot;executor.pool.size&quot;,</p>\n</blockquote>\n<pre><code>http://localhost:8080/actuator/prometheus \n</code></pre>\n<blockquote>\n<p>spring_data_repository_invocations_seconds_count{exception=&quot;None&quot;,method=&quot;findFirstByTitle&quot;,repository=&quot;NewsArticleRepository&quot;,state=&quot;SUCCESS&quot;,}\n10.0 spring_data_repository_invocations_seconds_sum{exception=&quot;None&quot;,method=&quot;findFirstByTitle&quot;,repository=&quot;NewsArticleRepository&quot;,state=&quot;SUCCESS&quot;,}\n0.0931051 spring_data_repository_invocations_seconds_count{exception=&quot;None&quot;,method=&quot;findByOrderByPublishedAtDesc&quot;,repository=&quot;NewsArticleRepository&quot;,state=&quot;SUCCESS&quot;,}\n1.0 and .....</p>\n</blockquote>\n<pre><code>http://localhost:8080/actuator/metrics/http.server.requests\n</code></pre>\n<blockquote>\n<p>&quot;name&quot;: &quot;http.server.requests&quot;, &quot;baseUnit&quot;: &quot;seconds&quot;, &quot;measurements&quot;:\n[   {\n&quot;statistic&quot;: &quot;COUNT&quot;,\n&quot;value&quot;: 20.0   },   {\n&quot;statistic&quot;: &quot;TOTAL_TIME&quot;,\n&quot;value&quot;: 2.0688337   },   {\n&quot;statistic&quot;: &quot;MAX&quot;,\n&quot;value&quot;: 0.0   } ],</p>\n</blockquote>\n"}],"owner":{"account_id":15614593,"reputation":157,"user_id":11265082,"display_name":"Angara kilkiri"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6911,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1686855706,"creation_date":1589263989,"question_id":61744960,"body_markdown":"I have a spring boot application whose metrics I want to later send to gcp. But for now I just need to find a way to count the total number of requests my application is handling either with `actuator` or with `micrometer`. Does anybody know how I could do something like this? Thanks In advance ","title":"How to count number of requests in spring boot app?","body":"<p>I have a spring boot application whose metrics I want to later send to gcp. But for now I just need to find a way to count the total number of requests my application is handling either with <code>actuator</code> or with <code>micrometer</code>. Does anybody know how I could do something like this? Thanks In advance </p>\n"},{"tags":["java","scala","apache-spark"],"comments":[{"owner":{"account_id":1315819,"reputation":1626,"user_id":1262728,"accept_rate":75,"display_name":"Erik van Oosten"},"score":0,"creation_date":1687025566,"post_id":76484716,"comment_id":134880770,"body_markdown":"The stacktrace that is posted here differs quite a bit from the other stackoverflow answer. This looks like you&#39;re trying to access a field that does not exist.","body":"The stacktrace that is posted here differs quite a bit from the other stackoverflow answer. This looks like you&#39;re trying to access a field that does not exist."}],"owner":{"account_id":26729789,"reputation":73,"user_id":20332351,"display_name":"Xuan Chen"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":218,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686855285,"creation_date":1686855285,"question_id":76484716,"body_markdown":"I&#39;m trying to classify some documents using Spark (3.3.2). First, I defined the `sparkSession` and obtained the `javaSparkContext`. Then, I read the corpus, collected them into `labeledWordList`, and put them into a `dataFrame`. After creating the pipeline model `pipelineModel`, I would like to test the model with training data which was splited using `randomSplit()`. The code is as following:\r\n\r\n```java\r\npackage com.nova.spark.nlp;\r\n\r\nimport com.hankcs.hanlp.HanLP;\r\nimport com.nova.spark.logger.Log;\r\nimport com.nova.spark.model.CategorizedDocument;\r\nimport org.apache.spark.api.java.JavaRDD;\r\nimport org.apache.spark.api.java.JavaSparkContext;\r\nimport org.apache.spark.ml.Pipeline;\r\nimport org.apache.spark.ml.PipelineModel;\r\nimport org.apache.spark.ml.PipelineStage;\r\nimport org.apache.spark.ml.classification.LogisticRegression;\r\nimport org.apache.spark.ml.evaluation.MulticlassClassificationEvaluator;\r\nimport org.apache.spark.ml.feature.HashingTF;\r\nimport org.apache.spark.ml.feature.IDF;\r\nimport org.apache.spark.ml.feature.IndexToString;\r\nimport org.apache.spark.ml.feature.StringIndexer;\r\nimport org.apache.spark.ml.feature.Tokenizer;\r\nimport org.apache.spark.sql.Dataset;\r\nimport org.apache.spark.sql.Row;\r\nimport org.apache.spark.sql.RowFactory;\r\nimport org.apache.spark.sql.SparkSession;\r\nimport org.apache.spark.sql.types.DataTypes;\r\nimport org.apache.spark.sql.types.StructField;\r\nimport org.apache.spark.sql.types.StructType;\r\nimport scala.Tuple2;\r\n\r\nimport java.io.File;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class PretrainModel {\r\n    private static final String CORPUS_PATH = &quot;src/main/resources/corpus min/&quot;;\r\n\r\n    static {\r\n        HanLP.Config.ShowTermNature = false;\r\n        Log.getLogger().info(&quot;PretrainModel::static:Initialize&quot;);\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        Log.getLogger().info(&quot;PretrainModel::main:Start&quot;);\r\n        File[] categories = new File(CORPUS_PATH).listFiles();\r\n        assert categories != null;\r\n        List&lt;CategorizedDocument&gt; labeledWordList = new ArrayList&lt;&gt;();\r\n\r\n        SparkSession sparkSession = SparkSession.builder()\r\n                .master(&quot;local[*]&quot;)\r\n                .config(&quot;spark.driver.allowMultipleContexts&quot;, &quot;true&quot;)\r\n                .appName(&quot;PretrainModel::main&quot;)\r\n                .getOrCreate();\r\n        JavaSparkContext javaSparkContext = JavaSparkContext.fromSparkContext(sparkSession.sparkContext());\r\n        for (File currentCorpusDirectory : categories) {\r\n            String categoryName = currentCorpusDirectory.getName();\r\n            if (categoryName.startsWith(&quot;.&quot;)) {\r\n                continue;\r\n            }\r\n            Log.getLogger().info(&quot;PretrainModel::readCategorizedCorpus::Category-&quot; + categoryName + &quot;:Process&quot;);\r\n            List&lt;CategorizedDocument&gt; categorizedDocuments = javaSparkContext\r\n                    .wholeTextFiles(CORPUS_PATH + categoryName, 1)\r\n                    .cache()\r\n                    .map(Tuple2::_2)\r\n                    .filter(line -&gt; line.length() &gt; 20)\r\n                    .map(line -&gt; String.join(&quot; &quot;, Processor.getSplitWords(line)))\r\n                    .map(document -&gt; new CategorizedDocument(categoryName, document))\r\n                    .collect();\r\n            labeledWordList.addAll(categorizedDocuments);\r\n        }\r\n        Log.getLogger().info(&quot;PretrainModel::main:Done&quot;);\r\n\r\n        JavaRDD&lt;Row&gt; labeledWordRDD = javaSparkContext\r\n                .parallelize(labeledWordList)\r\n                .map(document -&gt; RowFactory.create(document.getCategory(), document.getDocument()));\r\n        StructField labelField = DataTypes.createStructField(&quot;category&quot;, DataTypes.StringType, false);\r\n        StructField wordField = DataTypes.createStructField(&quot;document&quot;, DataTypes.StringType, false);\r\n        StructType structType = DataTypes.createStructType(List.of(labelField, wordField));\r\n        Dataset&lt;Row&gt; dataFrame = sparkSession.createDataFrame(labeledWordRDD, structType);\r\n        Dataset&lt;Row&gt;[] randomSplits = dataFrame.randomSplit(new double[]{0.8, 0.2});\r\n        Dataset&lt;Row&gt; trainDataFrame = randomSplits[0], testDataFrame = randomSplits[1];\r\n\r\n        Tokenizer tokenizer = new Tokenizer()\r\n                .setInputCol(&quot;document&quot;)\r\n                .setOutputCol(&quot;words&quot;);\r\n        HashingTF hashingTF = new HashingTF()\r\n                .setInputCol(&quot;words&quot;)\r\n                .setOutputCol(&quot;rawFeatures&quot;)\r\n                .setNumFeatures(2000);\r\n        IDF idf = new IDF()\r\n                .setInputCol(&quot;rawFeatures&quot;)\r\n                .setOutputCol(&quot;features&quot;)\r\n                .setMinDocFreq(5);\r\n        StringIndexer stringIndexer = new StringIndexer()\r\n                .setInputCol(&quot;category&quot;)\r\n                .setOutputCol(&quot;label&quot;);\r\n        LogisticRegression logisticRegression = new LogisticRegression()\r\n                .setMaxIter(10);\r\n        IndexToString indexToString = new IndexToString()\r\n                .setInputCol(&quot;prediction&quot;)\r\n                .setOutputCol(&quot;class&quot;);\r\n        Pipeline pipeline = new Pipeline()\r\n                .setStages(new PipelineStage[]{tokenizer, hashingTF, idf, stringIndexer, logisticRegression, indexToString});\r\n        PipelineModel pipelineModel = pipeline.fit(trainDataFrame);\r\n        Dataset&lt;Row&gt; predictedDataFrame = pipelineModel.transform(testDataFrame);\r\n        predictedDataFrame.select(&quot;category&quot;, &quot;label&quot;, &quot;prediction&quot;, &quot;class&quot;)\r\n                .show(30, false);\r\n        MulticlassClassificationEvaluator evaluator = new MulticlassClassificationEvaluator()\r\n                .setLabelCol(&quot;label&quot;)\r\n                .setPredictionCol(&quot;prediction&quot;)\r\n                .setMetricName(&quot;accuracy&quot;);\r\n        double accuracy = evaluator.evaluate(predictedDataFrame);\r\n        System.out.println(&quot;Accuracy = &quot; + accuracy);\r\n    }\r\n}\r\n```\r\nHowever, I encounter some exception like this:\r\n\r\n```text\r\nException in thread &quot;main&quot; java.util.NoSuchElementException: None.get\r\n\tat scala.None$.get(Option.scala:627)\r\n\tat scala.None$.get(Option.scala:626)\r\n\tat org.apache.spark.ml.feature.IndexToString.transform(StringIndexer.scala:605)\r\n\tat org.apache.spark.ml.PipelineModel.$anonfun$transform$4(Pipeline.scala:311)\r\n\tat org.apache.spark.ml.MLEvents.withTransformEvent(events.scala:146)\r\n\tat org.apache.spark.ml.MLEvents.withTransformEvent$(events.scala:139)\r\n\tat org.apache.spark.ml.util.Instrumentation.withTransformEvent(Instrumentation.scala:42)\r\n\tat org.apache.spark.ml.PipelineModel.$anonfun$transform$3(Pipeline.scala:311)\r\n\tat scala.collection.ArrayOps$.foldLeft$extension(ArrayOps.scala:782)\r\n\tat org.apache.spark.ml.PipelineModel.$anonfun$transform$2(Pipeline.scala:310)\r\n\tat org.apache.spark.ml.MLEvents.withTransformEvent(events.scala:146)\r\n\tat org.apache.spark.ml.MLEvents.withTransformEvent$(events.scala:139)\r\n\tat org.apache.spark.ml.util.Instrumentation.withTransformEvent(Instrumentation.scala:42)\r\n\tat org.apache.spark.ml.PipelineModel.$anonfun$transform$1(Pipeline.scala:308)\r\n\tat org.apache.spark.ml.util.Instrumentation$.$anonfun$instrumented$1(Instrumentation.scala:191)\r\n\tat scala.util.Try$.apply(Try.scala:210)\r\n\tat org.apache.spark.ml.util.Instrumentation$.instrumented(Instrumentation.scala:191)\r\n\tat org.apache.spark.ml.PipelineModel.transform(Pipeline.scala:307)\r\n\tat com.nova.spark.nlp.PretrainModel.main(PretrainModel.java:101)\r\n```\r\n\r\nI have learnt the post [None.get when streaming][1] carefully, and I maintain only one `javaSparkContext` (instead of mixing `javaSparkContext` and something like `sparkContext` together). Yet I still encounter the problem.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/50987061/spark-streaming-exception-java-util-nosuchelementexception-none-get","title":"Why does java.util.NoSuchElementException: None.get happened?","body":"<p>I'm trying to classify some documents using Spark (3.3.2). First, I defined the <code>sparkSession</code> and obtained the <code>javaSparkContext</code>. Then, I read the corpus, collected them into <code>labeledWordList</code>, and put them into a <code>dataFrame</code>. After creating the pipeline model <code>pipelineModel</code>, I would like to test the model with training data which was splited using <code>randomSplit()</code>. The code is as following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.nova.spark.nlp;\n\nimport com.hankcs.hanlp.HanLP;\nimport com.nova.spark.logger.Log;\nimport com.nova.spark.model.CategorizedDocument;\nimport org.apache.spark.api.java.JavaRDD;\nimport org.apache.spark.api.java.JavaSparkContext;\nimport org.apache.spark.ml.Pipeline;\nimport org.apache.spark.ml.PipelineModel;\nimport org.apache.spark.ml.PipelineStage;\nimport org.apache.spark.ml.classification.LogisticRegression;\nimport org.apache.spark.ml.evaluation.MulticlassClassificationEvaluator;\nimport org.apache.spark.ml.feature.HashingTF;\nimport org.apache.spark.ml.feature.IDF;\nimport org.apache.spark.ml.feature.IndexToString;\nimport org.apache.spark.ml.feature.StringIndexer;\nimport org.apache.spark.ml.feature.Tokenizer;\nimport org.apache.spark.sql.Dataset;\nimport org.apache.spark.sql.Row;\nimport org.apache.spark.sql.RowFactory;\nimport org.apache.spark.sql.SparkSession;\nimport org.apache.spark.sql.types.DataTypes;\nimport org.apache.spark.sql.types.StructField;\nimport org.apache.spark.sql.types.StructType;\nimport scala.Tuple2;\n\nimport java.io.File;\nimport java.util.ArrayList;\nimport java.util.List;\n\npublic class PretrainModel {\n    private static final String CORPUS_PATH = &quot;src/main/resources/corpus min/&quot;;\n\n    static {\n        HanLP.Config.ShowTermNature = false;\n        Log.getLogger().info(&quot;PretrainModel::static:Initialize&quot;);\n    }\n\n    public static void main(String[] args) {\n        Log.getLogger().info(&quot;PretrainModel::main:Start&quot;);\n        File[] categories = new File(CORPUS_PATH).listFiles();\n        assert categories != null;\n        List&lt;CategorizedDocument&gt; labeledWordList = new ArrayList&lt;&gt;();\n\n        SparkSession sparkSession = SparkSession.builder()\n                .master(&quot;local[*]&quot;)\n                .config(&quot;spark.driver.allowMultipleContexts&quot;, &quot;true&quot;)\n                .appName(&quot;PretrainModel::main&quot;)\n                .getOrCreate();\n        JavaSparkContext javaSparkContext = JavaSparkContext.fromSparkContext(sparkSession.sparkContext());\n        for (File currentCorpusDirectory : categories) {\n            String categoryName = currentCorpusDirectory.getName();\n            if (categoryName.startsWith(&quot;.&quot;)) {\n                continue;\n            }\n            Log.getLogger().info(&quot;PretrainModel::readCategorizedCorpus::Category-&quot; + categoryName + &quot;:Process&quot;);\n            List&lt;CategorizedDocument&gt; categorizedDocuments = javaSparkContext\n                    .wholeTextFiles(CORPUS_PATH + categoryName, 1)\n                    .cache()\n                    .map(Tuple2::_2)\n                    .filter(line -&gt; line.length() &gt; 20)\n                    .map(line -&gt; String.join(&quot; &quot;, Processor.getSplitWords(line)))\n                    .map(document -&gt; new CategorizedDocument(categoryName, document))\n                    .collect();\n            labeledWordList.addAll(categorizedDocuments);\n        }\n        Log.getLogger().info(&quot;PretrainModel::main:Done&quot;);\n\n        JavaRDD&lt;Row&gt; labeledWordRDD = javaSparkContext\n                .parallelize(labeledWordList)\n                .map(document -&gt; RowFactory.create(document.getCategory(), document.getDocument()));\n        StructField labelField = DataTypes.createStructField(&quot;category&quot;, DataTypes.StringType, false);\n        StructField wordField = DataTypes.createStructField(&quot;document&quot;, DataTypes.StringType, false);\n        StructType structType = DataTypes.createStructType(List.of(labelField, wordField));\n        Dataset&lt;Row&gt; dataFrame = sparkSession.createDataFrame(labeledWordRDD, structType);\n        Dataset&lt;Row&gt;[] randomSplits = dataFrame.randomSplit(new double[]{0.8, 0.2});\n        Dataset&lt;Row&gt; trainDataFrame = randomSplits[0], testDataFrame = randomSplits[1];\n\n        Tokenizer tokenizer = new Tokenizer()\n                .setInputCol(&quot;document&quot;)\n                .setOutputCol(&quot;words&quot;);\n        HashingTF hashingTF = new HashingTF()\n                .setInputCol(&quot;words&quot;)\n                .setOutputCol(&quot;rawFeatures&quot;)\n                .setNumFeatures(2000);\n        IDF idf = new IDF()\n                .setInputCol(&quot;rawFeatures&quot;)\n                .setOutputCol(&quot;features&quot;)\n                .setMinDocFreq(5);\n        StringIndexer stringIndexer = new StringIndexer()\n                .setInputCol(&quot;category&quot;)\n                .setOutputCol(&quot;label&quot;);\n        LogisticRegression logisticRegression = new LogisticRegression()\n                .setMaxIter(10);\n        IndexToString indexToString = new IndexToString()\n                .setInputCol(&quot;prediction&quot;)\n                .setOutputCol(&quot;class&quot;);\n        Pipeline pipeline = new Pipeline()\n                .setStages(new PipelineStage[]{tokenizer, hashingTF, idf, stringIndexer, logisticRegression, indexToString});\n        PipelineModel pipelineModel = pipeline.fit(trainDataFrame);\n        Dataset&lt;Row&gt; predictedDataFrame = pipelineModel.transform(testDataFrame);\n        predictedDataFrame.select(&quot;category&quot;, &quot;label&quot;, &quot;prediction&quot;, &quot;class&quot;)\n                .show(30, false);\n        MulticlassClassificationEvaluator evaluator = new MulticlassClassificationEvaluator()\n                .setLabelCol(&quot;label&quot;)\n                .setPredictionCol(&quot;prediction&quot;)\n                .setMetricName(&quot;accuracy&quot;);\n        double accuracy = evaluator.evaluate(predictedDataFrame);\n        System.out.println(&quot;Accuracy = &quot; + accuracy);\n    }\n}\n</code></pre>\n<p>However, I encounter some exception like this:</p>\n<pre><code>Exception in thread &quot;main&quot; java.util.NoSuchElementException: None.get\n    at scala.None$.get(Option.scala:627)\n    at scala.None$.get(Option.scala:626)\n    at org.apache.spark.ml.feature.IndexToString.transform(StringIndexer.scala:605)\n    at org.apache.spark.ml.PipelineModel.$anonfun$transform$4(Pipeline.scala:311)\n    at org.apache.spark.ml.MLEvents.withTransformEvent(events.scala:146)\n    at org.apache.spark.ml.MLEvents.withTransformEvent$(events.scala:139)\n    at org.apache.spark.ml.util.Instrumentation.withTransformEvent(Instrumentation.scala:42)\n    at org.apache.spark.ml.PipelineModel.$anonfun$transform$3(Pipeline.scala:311)\n    at scala.collection.ArrayOps$.foldLeft$extension(ArrayOps.scala:782)\n    at org.apache.spark.ml.PipelineModel.$anonfun$transform$2(Pipeline.scala:310)\n    at org.apache.spark.ml.MLEvents.withTransformEvent(events.scala:146)\n    at org.apache.spark.ml.MLEvents.withTransformEvent$(events.scala:139)\n    at org.apache.spark.ml.util.Instrumentation.withTransformEvent(Instrumentation.scala:42)\n    at org.apache.spark.ml.PipelineModel.$anonfun$transform$1(Pipeline.scala:308)\n    at org.apache.spark.ml.util.Instrumentation$.$anonfun$instrumented$1(Instrumentation.scala:191)\n    at scala.util.Try$.apply(Try.scala:210)\n    at org.apache.spark.ml.util.Instrumentation$.instrumented(Instrumentation.scala:191)\n    at org.apache.spark.ml.PipelineModel.transform(Pipeline.scala:307)\n    at com.nova.spark.nlp.PretrainModel.main(PretrainModel.java:101)\n</code></pre>\n<p>I have learnt the post <a href=\"https://stackoverflow.com/questions/50987061/spark-streaming-exception-java-util-nosuchelementexception-none-get\">None.get when streaming</a> carefully, and I maintain only one <code>javaSparkContext</code> (instead of mixing <code>javaSparkContext</code> and something like <code>sparkContext</code> together). Yet I still encounter the problem.</p>\n"},{"tags":["java","pact","pact-jvm"],"answers":[{"tags":[],"owner":{"account_id":7034556,"reputation":12335,"user_id":5389127,"display_name":"Ga&#235;l J"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686854996,"creation_date":1686854996,"answer_id":76484678,"question_id":76372512,"body_markdown":"You can use `arrayEachLike` or `arrayMinLike`/`arrayMaxLike` like this:\r\n\r\n```java\r\nDslPart expectedZoneResponse = \r\n  PactDslJsonArray.arrayEachLike()\r\n    .stringValue(&quot;Africa/Abidjan&quot;)\r\n    .stringValue(&quot;Asia/Tokyo&quot;);\r\n```\r\n\r\nSee also https://docs.pact.io/implementation_guides/jvm/consumer#matching-json-values-at-the-root","title":"Pact JVM, get array without any root as response","body":"<p>You can use <code>arrayEachLike</code> or <code>arrayMinLike</code>/<code>arrayMaxLike</code> like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>DslPart expectedZoneResponse = \n  PactDslJsonArray.arrayEachLike()\n    .stringValue(&quot;Africa/Abidjan&quot;)\n    .stringValue(&quot;Asia/Tokyo&quot;);\n</code></pre>\n<p>See also <a href=\"https://docs.pact.io/implementation_guides/jvm/consumer#matching-json-values-at-the-root\" rel=\"nofollow noreferrer\">https://docs.pact.io/implementation_guides/jvm/consumer#matching-json-values-at-the-root</a></p>\n"}],"owner":{"account_id":1711512,"reputation":33,"user_id":1569478,"display_name":"MMR"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686855097,"creation_date":1685528827,"question_id":76372512,"body_markdown":"\r\nUsing Pack for JVM using Junit5. Maven dependency that I have used is as follows.\r\n\r\n```\r\n&lt;dependency&gt;\r\n  &lt;groupId&gt;au.com.dius.pact.consumer&lt;/groupId&gt;\r\n  &lt;artifactId&gt;junit5&lt;/artifactId&gt;\r\n  &lt;scope&gt;test&lt;/scope&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nI am trying to create DslPart response pattern based below JSON payload. \r\n\r\n```\r\n[\r\n   &quot;Africa/Abidjan&quot;,\r\n   &quot;Asia/Tokyo&quot;,\r\n   &quot;Africa/Addis_Ababa&quot;,\r\n   ...\r\n] \r\n```\r\n\r\nI managed to define the below DslPart definition, which makes the test pass. \r\n\r\n```\r\n   DslPart expectedZoneResponse = new PactDslJsonArray()\r\n            .stringValue(&quot;Africa/Abidjan&quot;)\r\n            .stringValue(&quot;Asia/Tokyo&quot;);\r\n```\r\n\r\nPact definition is.\r\n\r\n```\r\n@Pact(consumer = &quot;Client&quot;, provider = &quot;ServiceApi&quot;)\r\npublic RequestResponsePact getTestArray(PactDslWithProvider builder)\r\n    return builder\r\n           .given(&quot;ZoneInfo&quot;)\r\n            .uponReceiving(&quot;Return all zones.&quot;)\r\n              .path(&quot;/zones&quot;)\r\n              .method(&quot;GET&quot;)\r\n            .willRespondWith()\r\n              .status(200)\r\n              .body(expectedZoneResponse)\r\n            .toPact();\r\n```\r\n\r\nThe above Client test creates the pact definition file but when I run it against my provider contract test, it fails because the response got from server is way more then the static 2 string defined in the pact definition file. \r\n\r\n```\r\nbody: $ Expected a List with 2 elements but received 603 elements\r\n```\r\n\r\nMy intent was to provide string pattern &quot;[a-zA-Z]+/[a-zA-Z]+&quot; in **DslPart expectedZoneResponse**, which could be matched, but I could not achieve it. \r\n\r\nHow can I modify **DslPart expectedZoneResponse** so that I reflects a patten instead of the 2 string constant?\r\n\r\nThanks,","title":"Pact JVM, get array without any root as response","body":"<p>Using Pack for JVM using Junit5. Maven dependency that I have used is as follows.</p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;au.com.dius.pact.consumer&lt;/groupId&gt;\n  &lt;artifactId&gt;junit5&lt;/artifactId&gt;\n  &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>I am trying to create DslPart response pattern based below JSON payload.</p>\n<pre><code>[\n   &quot;Africa/Abidjan&quot;,\n   &quot;Asia/Tokyo&quot;,\n   &quot;Africa/Addis_Ababa&quot;,\n   ...\n] \n</code></pre>\n<p>I managed to define the below DslPart definition, which makes the test pass.</p>\n<pre><code>   DslPart expectedZoneResponse = new PactDslJsonArray()\n            .stringValue(&quot;Africa/Abidjan&quot;)\n            .stringValue(&quot;Asia/Tokyo&quot;);\n</code></pre>\n<p>Pact definition is.</p>\n<pre><code>@Pact(consumer = &quot;Client&quot;, provider = &quot;ServiceApi&quot;)\npublic RequestResponsePact getTestArray(PactDslWithProvider builder)\n    return builder\n           .given(&quot;ZoneInfo&quot;)\n            .uponReceiving(&quot;Return all zones.&quot;)\n              .path(&quot;/zones&quot;)\n              .method(&quot;GET&quot;)\n            .willRespondWith()\n              .status(200)\n              .body(expectedZoneResponse)\n            .toPact();\n</code></pre>\n<p>The above Client test creates the pact definition file but when I run it against my provider contract test, it fails because the response got from server is way more then the static 2 string defined in the pact definition file.</p>\n<pre><code>body: $ Expected a List with 2 elements but received 603 elements\n</code></pre>\n<p>My intent was to provide string pattern &quot;[a-zA-Z]+/[a-zA-Z]+&quot; in <strong>DslPart expectedZoneResponse</strong>, which could be matched, but I could not achieve it.</p>\n<p>How can I modify <strong>DslPart expectedZoneResponse</strong> so that I reflects a patten instead of the 2 string constant?</p>\n<p>Thanks,</p>\n"},{"tags":["java","record"],"comments":[{"owner":{"account_id":2141010,"reputation":118249,"user_id":1899640,"display_name":"that other guy"},"score":1,"creation_date":1686854993,"post_id":76484461,"comment_id":134859180,"body_markdown":"There are many ways to trade cpu usage and code complexity for memory depending on the characteristics of the data. First see whether you truly need to keep the objects in memory, or whether you can stream them. Using a HashMap to deduplicate is very simple straight and forward, and definitely worth a try. An open addressing implementation can save a further ~48 bytes per unique item. Storing fields in arrays instead of objects is annoying but can save another ~16 bytes. Be aware of compressed OOPs and object alignment. Stop when it gets cheaper to buy more RAM than to complicate the codebase.","body":"There are many ways to trade cpu usage and code complexity for memory depending on the characteristics of the data. First see whether you truly need to keep the objects in memory, or whether you can stream them. Using a HashMap to deduplicate is very simple straight and forward, and definitely worth a try. An open addressing implementation can save a further ~48 bytes per unique item. Storing fields in arrays instead of objects is annoying but can save another ~16 bytes. Be aware of compressed OOPs and object alignment. Stop when it gets cheaper to buy more RAM than to complicate the codebase."}],"answers":[{"tags":[],"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1686855046,"creation_date":1686855046,"answer_id":76484689,"question_id":76484461,"body_markdown":"If you need to keep the count for each record, you can use `Map&lt;MyRecord, Integer&gt;`:\r\n```\r\nList&lt;MyRecord&gt; list = ...;\r\nMap&lt;MyRecord, Integer&gt; map = new HashMap&lt;&gt;();\r\nfor (MyRecord myRecord : list) {\r\n  map.compute(myRecord, (key, value) -&gt; value == null ? 1 : value + 1);\r\n}\r\n```\r\nThis approach uses [Map.compute()][1] to calculate the values.\r\n\r\nIf you only need to get rid any duplicates, adding to a `Set&lt;MyRecord&gt;` is enough:\r\n```\r\nList&lt;MyRecord&gt; list = ...;\r\nSet&lt;MyRecord&gt; set = new HashSet&lt;&gt;(list);\r\n```\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/Map.html#compute-K-java.util.function.BiFunction-","title":"Can I deduplicate records to save memory?","body":"<p>If you need to keep the count for each record, you can use <code>Map&lt;MyRecord, Integer&gt;</code>:</p>\n<pre><code>List&lt;MyRecord&gt; list = ...;\nMap&lt;MyRecord, Integer&gt; map = new HashMap&lt;&gt;();\nfor (MyRecord myRecord : list) {\n  map.compute(myRecord, (key, value) -&gt; value == null ? 1 : value + 1);\n}\n</code></pre>\n<p>This approach uses <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Map.html#compute-K-java.util.function.BiFunction-\" rel=\"nofollow noreferrer\">Map.compute()</a> to calculate the values.</p>\n<p>If you only need to get rid any duplicates, adding to a <code>Set&lt;MyRecord&gt;</code> is enough:</p>\n<pre><code>List&lt;MyRecord&gt; list = ...;\nSet&lt;MyRecord&gt; set = new HashSet&lt;&gt;(list);\n</code></pre>\n"}],"owner":{"account_id":9590347,"reputation":63,"user_id":7121473,"display_name":"iseki"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":76484689,"answer_count":1,"score":0,"last_activity_date":1686855046,"creation_date":1686852936,"question_id":76484461,"body_markdown":"I have lots of java records that store the equality value. May I deduplicate them to save memory? My records is fully immutable. \r\nBecause I read and construct them from a stream style data source(A JSON stream or csv stream), so I think they will be distinct object in memory. But most of them contains the same value.\r\n\r\nSuch as use a HashMap? I see the JVM internal string pool, but it&#39;s only for String and they&#39;re lived too long.","title":"Can I deduplicate records to save memory?","body":"<p>I have lots of java records that store the equality value. May I deduplicate them to save memory? My records is fully immutable.\nBecause I read and construct them from a stream style data source(A JSON stream or csv stream), so I think they will be distinct object in memory. But most of them contains the same value.</p>\n<p>Such as use a HashMap? I see the JVM internal string pool, but it's only for String and they're lived too long.</p>\n"},{"tags":["java","spring","spring-boot","hibernate","orm"],"answers":[{"tags":[],"owner":{"account_id":26151806,"reputation":151,"user_id":19839660,"display_name":"Iv&#225;n Larios"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686854937,"creation_date":1686854937,"answer_id":76484670,"question_id":76484067,"body_markdown":"I changed the code according to your requirements. I left the reverse relation on UserScanData as you had it on your code, in case you want to keep it. If I didn&#39;t explain the changes enough feel free to ask :)\r\n```\r\npublic class UserScan {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Column(name = &quot;id&quot;)\r\n    private Long id;\r\n\r\n    //more fields\r\n\r\n    @OneToOne(cascade = CascadeType.ALL)\r\n    @JoinColumn(name = &quot;user_scan_id&quot;) //You specify the column in UserScan table that refers to the UserScanData id.\r\n    private UserScanData userScanData;\r\n\r\n}\r\n\r\npublic class UserScanData {\r\n\r\n    @Id\r\n    @Column(name = &quot;user_scan_id&quot;)\r\n    private Long userScanId;\r\n\r\n    //more fields\r\n\r\n    @OneToOne(mappedBy= &quot;userScanData&quot;, fetch = FetchType.LAZY) //This is the reverse relation you may not need\r\n    private UserScan userScan;\r\n}\r\n```","title":"Hibernate OneToOne mapping by primary key","body":"<p>I changed the code according to your requirements. I left the reverse relation on UserScanData as you had it on your code, in case you want to keep it. If I didn't explain the changes enough feel free to ask :)</p>\n<pre><code>public class UserScan {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;id&quot;)\n    private Long id;\n\n    //more fields\n\n    @OneToOne(cascade = CascadeType.ALL)\n    @JoinColumn(name = &quot;user_scan_id&quot;) //You specify the column in UserScan table that refers to the UserScanData id.\n    private UserScanData userScanData;\n\n}\n\npublic class UserScanData {\n\n    @Id\n    @Column(name = &quot;user_scan_id&quot;)\n    private Long userScanId;\n\n    //more fields\n\n    @OneToOne(mappedBy= &quot;userScanData&quot;, fetch = FetchType.LAZY) //This is the reverse relation you may not need\n    private UserScan userScan;\n}\n</code></pre>\n"}],"owner":{"account_id":3210091,"reputation":5835,"user_id":2710256,"accept_rate":46,"display_name":"breakline"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686854937,"creation_date":1686849426,"question_id":76484067,"body_markdown":"Given these two entities how do I establish a working OneToOne relationship with Hibernate:\r\n\r\n    public class UserScan {\r\n    \r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        @Column(name = &quot;id&quot;)\r\n        private Long id;\r\n\r\n        //more fields\r\n\r\n        @OneToOne(mappedBy = &quot;userScan&quot;, cascade = CascadeType.ALL)\r\n        private UserScanData userScanData;\r\n    \r\n    }\r\n\r\n    public class UserScanData {\r\n\r\n        @Id\r\n        @Column(name = &quot;user_scan_id&quot;)\r\n        private Long userScanId;\r\n\r\n        //more fields\r\n\r\n        @OneToOne(fetch = FetchType.LAZY)\r\n        @MapsId\r\n        @JoinColumn(name = &quot;user_scan_id&quot;)\r\n        private UserScan userScan;\r\n    }\r\n\r\nObviously something is wrong here (I get an error of a missing field), but I&#39;m not sure how to do this. @PrimaryKeyJoinColumn did not work either.\r\n\r\nCurrent error is:\r\n\r\n**Schema-validation: missing column [user_scan_id] in table [user_scan]**\r\n\r\nI just want to connect the two table inside &quot;UserScan&quot;, &quot;UserScanData&quot; does not need to have the reverse relationship (unless needed by hibernate)\r\n\r\nAny help is appreciated.","title":"Hibernate OneToOne mapping by primary key","body":"<p>Given these two entities how do I establish a working OneToOne relationship with Hibernate:</p>\n<pre><code>public class UserScan {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;id&quot;)\n    private Long id;\n\n    //more fields\n\n    @OneToOne(mappedBy = &quot;userScan&quot;, cascade = CascadeType.ALL)\n    private UserScanData userScanData;\n\n}\n\npublic class UserScanData {\n\n    @Id\n    @Column(name = &quot;user_scan_id&quot;)\n    private Long userScanId;\n\n    //more fields\n\n    @OneToOne(fetch = FetchType.LAZY)\n    @MapsId\n    @JoinColumn(name = &quot;user_scan_id&quot;)\n    private UserScan userScan;\n}\n</code></pre>\n<p>Obviously something is wrong here (I get an error of a missing field), but I'm not sure how to do this. @PrimaryKeyJoinColumn did not work either.</p>\n<p>Current error is:</p>\n<p><strong>Schema-validation: missing column [user_scan_id] in table [user_scan]</strong></p>\n<p>I just want to connect the two table inside &quot;UserScan&quot;, &quot;UserScanData&quot; does not need to have the reverse relationship (unless needed by hibernate)</p>\n<p>Any help is appreciated.</p>\n"},{"tags":["java","while-loop","boolean"],"comments":[{"owner":{"account_id":129540,"reputation":210839,"user_id":328193,"accept_rate":91,"display_name":"David"},"score":0,"creation_date":1686845757,"post_id":76483611,"comment_id":134857385,"body_markdown":"Because that&#39;s the syntax of the language.  `=` is assignment, `==` is equality comparison.  Not every language uses this syntax, but a great many do.","body":"Because that&#39;s the syntax of the language.  <code>=</code> is assignment, <code>==</code> is equality comparison.  Not every language uses this syntax, but a great many do."},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":7,"creation_date":1686845796,"post_id":76483611,"comment_id":134857390,"body_markdown":"Your second example isn&#39;t comparing `d` with `false`. It&#39;s *assigning* the value of `false` to `d`. That&#39;s *almost certainly* not what you intended.","body":"Your second example isn&#39;t comparing <code>d</code> with <code>false</code>. It&#39;s <i>assigning</i> the value of <code>false</code> to <code>d</code>. That&#39;s <i>almost certainly</i> not what you intended."},{"owner":{"account_id":16400961,"reputation":814,"user_id":11846953,"display_name":"John Bayko"},"score":0,"creation_date":1686853811,"post_id":76483611,"comment_id":134858985,"body_markdown":"In math, writing algorithms would often use an arrow like &quot;&lt;-&quot; or &quot;&lt;=&quot; for assignment, and &quot;=&quot; for equality. There was no single arrow character, and the &quot;&lt;&quot; character was awkward to parse, so programming languages like Algol used &quot;:=&quot; for assignment, and &quot;=&quot; for equality. It worked, but &quot;:=&quot; was awkward to type, so C used &quot;=&quot; to assign and &quot;==&quot; to compare, which were a lot easier. That became the standard for most languages that followed, including Java.","body":"In math, writing algorithms would often use an arrow like &quot;&lt;-&quot; or &quot;&lt;=&quot; for assignment, and &quot;=&quot; for equality. There was no single arrow character, and the &quot;&lt;&quot; character was awkward to parse, so programming languages like Algol used &quot;:=&quot; for assignment, and &quot;=&quot; for equality. It worked, but &quot;:=&quot; was awkward to type, so C used &quot;=&quot; to assign and &quot;==&quot; to compare, which were a lot easier. That became the standard for most languages that followed, including Java."}],"answers":[{"tags":[],"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1686845768,"creation_date":1686845768,"answer_id":76483631,"question_id":76483611,"body_markdown":"Because **assignment** resolves to the assigned value. That sets `d` to `false` (and evaluates to `false`) and thus the `while` does not enter the loop body.\r\n\r\n    while (d=false) {\r\n\r\nAnd you don&#39;t need any `=` for `boolean`(s).\r\n\r\n    while (!d) {\r\n\r\n**or**\r\n\r\n    while (d) {\r\n\r\nare correct, and don&#39;t involve assignment.","title":"Why don&#39;t we have to use two &#39;=&#39; operands for mentioning equality for boolean variable?","body":"<p>Because <strong>assignment</strong> resolves to the assigned value. That sets <code>d</code> to <code>false</code> (and evaluates to <code>false</code>) and thus the <code>while</code> does not enter the loop body.</p>\n<pre><code>while (d=false) {\n</code></pre>\n<p>And you don't need any <code>=</code> for <code>boolean</code>(s).</p>\n<pre><code>while (!d) {\n</code></pre>\n<p><strong>or</strong></p>\n<pre><code>while (d) {\n</code></pre>\n<p>are correct, and don't involve assignment.</p>\n"},{"tags":[],"owner":{"account_id":1692034,"reputation":3196,"user_id":1554195,"display_name":"tquadrat"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686853338,"creation_date":1686853338,"answer_id":76484508,"question_id":76483611,"body_markdown":"If you really use two &quot;=&quot; operators (not operands), you would get a compiler error …\r\n\r\n&quot;=&quot; is the operator for assignments, &quot;==&quot; is the equality operator, and &quot;= =&quot; is a syntax error.\r\n\r\nHow to use it is explained in [this answer][1].\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/76483631/1554195","title":"Why don&#39;t we have to use two &#39;=&#39; operands for mentioning equality for boolean variable?","body":"<p>If you really use two &quot;=&quot; operators (not operands), you would get a compiler error …</p>\n<p>&quot;=&quot; is the operator for assignments, &quot;==&quot; is the equality operator, and &quot;= =&quot; is a syntax error.</p>\n<p>How to use it is explained in <a href=\"https://stackoverflow.com/a/76483631/1554195\">this answer</a>.</p>\n"}],"owner":{"account_id":28571449,"reputation":13,"user_id":21873606,"display_name":"emre.ddl"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"accepted_answer_id":76483631,"answer_count":2,"score":-2,"last_activity_date":1686853338,"creation_date":1686845649,"question_id":76483611,"body_markdown":"When I coding in a while loop in java , I discovered that we don&#39;t have to use two assignment operands for give meaning equality for JUST BOOLEAN VARİABLE(I found just it). What is the reason behind this situation? Thank you from now\r\n\r\n ` int a=30;\r\n\t  boolean d=true;\r\n\t \r\n\t  while (a==30) {   &lt;- We need to use like that for other variables\r\n           \r\n\t\t \r\n\t\t}`\r\n\r\n ` int a=30;\r\n\t  boolean d=true;\r\n\t \r\n\t  while (d=false) {   &lt;- We need to use like that for other variables\r\n           \r\n\t\t \r\n\t\t}`","title":"Why don&#39;t we have to use two &#39;=&#39; operands for mentioning equality for boolean variable?","body":"<p>When I coding in a while loop in java , I discovered that we don't have to use two assignment operands for give meaning equality for JUST BOOLEAN VARİABLE(I found just it). What is the reason behind this situation? Thank you from now</p>\n<p>` int a=30;\nboolean d=true;</p>\n<pre><code>  while (a==30) {   &lt;- We need to use like that for other variables\n       \n     \n    }`\n</code></pre>\n<p>` int a=30;\nboolean d=true;</p>\n<pre><code>  while (d=false) {   &lt;- We need to use like that for other variables\n       \n     \n    }`\n</code></pre>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"score":0,"creation_date":1686853518,"post_id":76484479,"comment_id":134858921,"body_markdown":"If you want a Web application you should add spring-boot-starter-web dependency.","body":"If you want a Web application you should add spring-boot-starter-web dependency."},{"owner":{"account_id":11400015,"reputation":1904,"user_id":8357251,"display_name":"gdomo"},"score":0,"creation_date":1686853535,"post_id":76484479,"comment_id":134858926,"body_markdown":"Have you added any spring boot starters dependencies?","body":"Have you added any spring boot starters dependencies?"}],"owner":{"account_id":7732618,"reputation":336,"user_id":5859299,"display_name":"Austin"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":73,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686853083,"creation_date":1686853083,"question_id":76484479,"body_markdown":"I have a spring boot app, it is just the basic example project. When I build the app and run the jar, the app stops at startup without actually launching the app. I get some output from the spring code, and I noticed that it is the same as what I see when I build the jar, but tomcat does not start. Does anyone know why the app is doing this?\r\n\r\nDemoApplication.java\r\n```\r\npackage com.example.demo;\r\n\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\n\r\n@SpringBootApplication\r\npublic class DemoApplication {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(DemoApplication.class, args);\r\n\t}\r\n\r\n}\r\n```\r\n\r\nOutput when running\r\n```\r\n .   ____          _            __ _ _\r\n /\\\\ / ___&#39;_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\r\n( ( )\\___ | &#39;_ | &#39;_| | &#39;_ \\/ _` | \\ \\ \\ \\\r\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\r\n  &#39;  |____| .__|_| |_|_| |_\\__, | / / / /\r\n =========|_|==============|___/=/_/_/_/\r\n :: Spring Boot ::               (v2.7.12)\r\n\r\n[2023-06-15 18:02:39.813] - 70503 INFO [main] --- com.example.demo.DemoApplication: Starting DemoApplication using Java 1.8.0_352 on machine16 with PID 503 (~/sv/lib/d-test.jar started by user6 in ~/sv)\r\n[2023-06-15 18:02:39.838] - 70503 INFO [main] --- com.example.demo.DemoApplication: No active profile set, falling back to 1 default profile: &quot;default&quot;\r\n[2023-06-15 18:02:40.883] - 70503 INFO [main] --- com.example.demo.DemoApplication: Started DemoApplication in 1.828 seconds (JVM running for 2.387)\r\n```\r\n\r\nOutput when building jar\r\n```\r\n.   ____          _            __ _ _\r\n /\\\\ / ___&#39;_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\r\n( ( )\\___ | &#39;_ | &#39;_| | &#39;_ \\/ _` | \\ \\ \\ \\\r\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\r\n  &#39;  |____| .__|_| |_|_| |_\\__, | / / / /\r\n =========|_|==============|___/=/_/_/_/\r\n :: Spring Boot ::               (v2.7.12)\r\n\r\n2023-06-15 18:07:10.050  INFO 123133 --- [           main] com.example.demo.DemoApplicationTests    : Starting DemoApplicationTests using Java 1.8.0_352 on machine16 with PID 8372 (started by user6 in ~/sv/demo)\r\n2023-06-15 18:07:10.051  INFO 123133 --- [           main] com.example.demo.DemoApplicationTests    : No active profile set, falling back to 1 default profile: &quot;default&quot;\r\n2023-06-15 18:07:11.185  INFO 123133 --- [           main] com.example.demo.DemoApplicationTests    : Started DemoApplicationTests in 1.347 seconds (JVM running for 2.184)\r\n\r\n```","title":"spring boot stops immediately, no exception thrown","body":"<p>I have a spring boot app, it is just the basic example project. When I build the app and run the jar, the app stops at startup without actually launching the app. I get some output from the spring code, and I noticed that it is the same as what I see when I build the jar, but tomcat does not start. Does anyone know why the app is doing this?</p>\n<p>DemoApplication.java</p>\n<pre><code>package com.example.demo;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class DemoApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(DemoApplication.class, args);\n    }\n\n}\n</code></pre>\n<p>Output when running</p>\n<pre><code> .   ____          _            __ _ _\n /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n  '  |____| .__|_| |_|_| |_\\__, | / / / /\n =========|_|==============|___/=/_/_/_/\n :: Spring Boot ::               (v2.7.12)\n\n[2023-06-15 18:02:39.813] - 70503 INFO [main] --- com.example.demo.DemoApplication: Starting DemoApplication using Java 1.8.0_352 on machine16 with PID 503 (~/sv/lib/d-test.jar started by user6 in ~/sv)\n[2023-06-15 18:02:39.838] - 70503 INFO [main] --- com.example.demo.DemoApplication: No active profile set, falling back to 1 default profile: &quot;default&quot;\n[2023-06-15 18:02:40.883] - 70503 INFO [main] --- com.example.demo.DemoApplication: Started DemoApplication in 1.828 seconds (JVM running for 2.387)\n</code></pre>\n<p>Output when building jar</p>\n<pre><code>.   ____          _            __ _ _\n /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n  '  |____| .__|_| |_|_| |_\\__, | / / / /\n =========|_|==============|___/=/_/_/_/\n :: Spring Boot ::               (v2.7.12)\n\n2023-06-15 18:07:10.050  INFO 123133 --- [           main] com.example.demo.DemoApplicationTests    : Starting DemoApplicationTests using Java 1.8.0_352 on machine16 with PID 8372 (started by user6 in ~/sv/demo)\n2023-06-15 18:07:10.051  INFO 123133 --- [           main] com.example.demo.DemoApplicationTests    : No active profile set, falling back to 1 default profile: &quot;default&quot;\n2023-06-15 18:07:11.185  INFO 123133 --- [           main] com.example.demo.DemoApplicationTests    : Started DemoApplicationTests in 1.347 seconds (JVM running for 2.184)\n\n</code></pre>\n"},{"tags":["java","serialization","linkedhashmap","objectoutputstream"],"comments":[{"owner":{"account_id":4564696,"reputation":43122,"user_id":3706016,"display_name":"jarlh"},"score":2,"creation_date":1686836937,"post_id":76483165,"comment_id":134856625,"body_markdown":"A [mcve] is a great start when asking for SQL assistance.","body":"A <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> is a great start when asking for SQL assistance."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1686846802,"post_id":76483165,"comment_id":134857609,"body_markdown":"Do you know about a for-each loop? `LinkedHashMap&lt;String, NetworkedSQLObject&gt; map = new LinkedHashMap&lt;&gt;(); for(Map.Entry&lt;String, SQLObject&gt;&gt; entry: data.entrySet()) { Host.instance.getLogger().info(&quot;adding NetworkedSQLObject: &quot; + entry.getKey() + &#39;:&#39; + entry.getValue().getType() + &quot; -&gt; &quot; + entry.getValue().getValue()); put(entry.getKey(), new NetworkedSQLObject(entry.getValue())); } return map;` Since Java&#160;8 it’s even simpler: `data.forEach((k,v) -&gt; Host.instance.getLogger().info(&quot;adding NetworkedSQLObject: &quot; + k + &#39;:&#39; +v.getType() + &quot; -&gt; &quot; + v.getValue()); put(k, new NetworkedSQLObject(v); }`","body":"Do you know about a for-each loop? <code>LinkedHashMap&lt;String, NetworkedSQLObject&gt; map = new LinkedHashMap&lt;&gt;(); for(Map.Entry&lt;String, SQLObject&gt;&gt; entry: data.entrySet()) { Host.instance.getLogger().info(&quot;adding NetworkedSQLObject: &quot; + entry.getKey() + &#39;:&#39; + entry.getValue().getType() + &quot; -&gt; &quot; + entry.getValue().getValue()); put(entry.getKey(), new NetworkedSQLObject(entry.getValue())); } return map;</code> Since Java 8 it’s even simpler: <code>data.forEach((k,v) -&gt; Host.instance.getLogger().info(&quot;adding NetworkedSQLObject: &quot; + k + &#39;:&#39; +v.getType() + &quot; -&gt; &quot; + v.getValue()); put(k, new NetworkedSQLObject(v); }</code>"},{"owner":{"account_id":24613253,"reputation":58,"user_id":18514542,"display_name":"TBCM"},"score":0,"creation_date":1686940001,"post_id":76483165,"comment_id":134872679,"body_markdown":"@Holger For my instance, using an iterator retains the order in which the `LinkedHashMap`&#39;s elements were added. This is how I abstract and fill in the data from my SQL response and my objects. a traditional for loop was not working, and without using a `.entrySet().iterator()` it would not be a linear iteration.","body":"@Holger For my instance, using an iterator retains the order in which the <code>LinkedHashMap</code>&#39;s elements were added. This is how I abstract and fill in the data from my SQL response and my objects. a traditional for loop was not working, and without using a <code>.entrySet().iterator()</code> it would not be a linear iteration."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1687161104,"post_id":76483165,"comment_id":134892663,"body_markdown":"That’s nonsense. The for-each loop uses an `Iterator` under the hood and behaves exactly the same. It’s not even clear what you think it is, if not a linear iteration.","body":"That’s nonsense. The for-each loop uses an <code>Iterator</code> under the hood and behaves exactly the same. It’s not even clear what you think it is, if not a linear iteration."},{"owner":{"account_id":24613253,"reputation":58,"user_id":18514542,"display_name":"TBCM"},"score":0,"creation_date":1687265659,"post_id":76483165,"comment_id":134909973,"body_markdown":"@Holger, im not sure, but i tried both ways, and was left with a completely unordered iteration order with a for loop.","body":"@Holger, im not sure, but i tried both ways, and was left with a completely unordered iteration order with a for loop."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1687265977,"post_id":76483165,"comment_id":134910064,"body_markdown":"I’d like to see a [mre] for that…","body":"I’d like to see a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> for that…"}],"answers":[{"comments":[{"owner":{"account_id":24613253,"reputation":58,"user_id":18514542,"display_name":"TBCM"},"score":1,"creation_date":1686939886,"post_id":76483223,"comment_id":134872662,"body_markdown":"This was an excellent answer, thank you. In future ill try to be more weary of the double brace pattern, I thought that it was just a more compact way to initialize arrays XD. Thanks!","body":"This was an excellent answer, thank you. In future ill try to be more weary of the double brace pattern, I thought that it was just a more compact way to initialize arrays XD. Thanks!"}],"tags":[],"owner":{"account_id":265649,"reputation":53086,"user_id":552759,"display_name":"jtahlborn"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1686837320,"creation_date":1686837320,"answer_id":76483223,"question_id":76483165,"body_markdown":"You have used the double brace initialization pattern in your class, which is generally not a desirable pattern (the double `{{}}`).  What that does is effectively define a new, inner class.  So you are not returning an actual LinkedHashMap, you are returning an anonymous inner class which extends from LinkedHashMap.  Since it is an inner class, it also retains a reference to the _outer_ class, in this case, your `SQLRow` class.  Simply removing the double brace initialization pattern should solve your problem.  (this is one of the many reasons the pattern should be avoided).","title":"Java LinkedHashMap converted to Object is serialized as another class?","body":"<p>You have used the double brace initialization pattern in your class, which is generally not a desirable pattern (the double <code>{{}}</code>).  What that does is effectively define a new, inner class.  So you are not returning an actual LinkedHashMap, you are returning an anonymous inner class which extends from LinkedHashMap.  Since it is an inner class, it also retains a reference to the <em>outer</em> class, in this case, your <code>SQLRow</code> class.  Simply removing the double brace initialization pattern should solve your problem.  (this is one of the many reasons the pattern should be avoided).</p>\n"}],"owner":{"account_id":24613253,"reputation":58,"user_id":18514542,"display_name":"TBCM"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":80,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76483223,"answer_count":1,"score":0,"last_activity_date":1686852940,"creation_date":1686836873,"question_id":76483165,"body_markdown":"I am trying to serialize a `LinkedHashMap` to be written to an `ObjectOutputStream`, but I&#39;ve encountered something strange. The `ObjectOutputStream`, writes the `LinkedHashMap` converted to an `Object`, however it is not a `LinkedHashMap`, it is writted as my class called `SQLRow`?!\r\n\r\n\r\n```\r\nHost.instance.getLogger().info(&quot;Sending back player data...&quot;);\r\nfinal LinkedHashMap&lt;String, NetworkedSQLObject&gt; hm = MirageSQLTables.players.getByPrimaryKey(rest.readUTF()).getAsSocketEligibleMap();\r\nHost.instance.getLogger().info(&quot;Linked Hash Map class name: &quot; + hm.getClass().getName());\r\nc.sendMessage(new SQLObjectResponsePacket(pID, (Object)hm));\r\n```\r\nNOTE: The function `getByPrimaryKey()` is a custom SQL function that returns my custom class, `SQLRow`.\r\n\r\noutput of code above:\r\n\r\n```\r\n\r\n14:37:03 [INFO] [Host] Sending back player data...\r\n14:37:03 [INFO] [Host] Getting col: id\r\n14:37:03 [INFO] [Host] Getting col: name\r\n14:37:03 [INFO] [Host] Getting col: date_joined\r\n14:37:03 [INFO] [Host] Getting col: rank\r\n14:37:03 [INFO] [Host] Getting col: moderator\r\n14:37:03 [INFO] [Host] adding NetworkedSQLObject: id:TEXT -&gt; 2\r\n14:37:03 [INFO] [Host] adding NetworkedSQLObject: name:TEXT -&gt; KrispWasntTaken\r\n14:37:03 [INFO] [Host] adding NetworkedSQLObject: date_joined:TIMESTAMP -&gt; 2023-06-14 18:19:15.0\r\n14:37:03 [INFO] [Host] adding NetworkedSQLObject: rank:INT -&gt; 0\r\n14:37:03 [INFO] [Host] adding NetworkedSQLObject: moderator:BIT -&gt; true\r\n14:37:03 [INFO] [Host] Linked Hash Map class name: mirage.database.sql.SQLRow$1 &lt;---- HERE!\r\n\r\n```\r\n\r\nIt says the same thing in the NetworkedSQLObject constructor. The function `getAsSocketEligibleMap()` is INSIDE the SQLRow class, but I am really confused as it has no ties to the class and returns a fresh new `LinkedHashMap`, not an instance of a `SQLRow`...\r\n\r\n`getAsSocketEligibleMap()` code:\r\n\r\n```\r\n\r\npublic LinkedHashMap&lt;String, NetworkedSQLObject&gt; getAsSocketEligibleMap(){\r\n        return new LinkedHashMap&lt;&gt;(){{\r\n            Set&lt;Map.Entry&lt;String, SQLObject&gt;&gt; es = data.entrySet();\r\n\r\n            Iterator&lt;Map.Entry&lt;String, SQLObject&gt;&gt; i = es.iterator();\r\n\r\n            while(i.hasNext()){\r\n                Map.Entry&lt;String, SQLObject&gt; entry = i.next();\r\n                Host.instance.getLogger().info(&quot;adding NetworkedSQLObject: &quot; + entry.getKey() + &#39;:&#39; + entry.getValue().getType() + &quot; -&gt; &quot; + entry.getValue().getValue());\r\n                put(entry.getKey(), new NetworkedSQLObject(entry.getValue()));\r\n            }\r\n        }};\r\n    }\r\n\r\n```\r\n\r\n\r\nAny help is appreciated...\r\n","title":"Java LinkedHashMap converted to Object is serialized as another class?","body":"<p>I am trying to serialize a <code>LinkedHashMap</code> to be written to an <code>ObjectOutputStream</code>, but I've encountered something strange. The <code>ObjectOutputStream</code>, writes the <code>LinkedHashMap</code> converted to an <code>Object</code>, however it is not a <code>LinkedHashMap</code>, it is writted as my class called <code>SQLRow</code>?!</p>\n<pre><code>Host.instance.getLogger().info(&quot;Sending back player data...&quot;);\nfinal LinkedHashMap&lt;String, NetworkedSQLObject&gt; hm = MirageSQLTables.players.getByPrimaryKey(rest.readUTF()).getAsSocketEligibleMap();\nHost.instance.getLogger().info(&quot;Linked Hash Map class name: &quot; + hm.getClass().getName());\nc.sendMessage(new SQLObjectResponsePacket(pID, (Object)hm));\n</code></pre>\n<p>NOTE: The function <code>getByPrimaryKey()</code> is a custom SQL function that returns my custom class, <code>SQLRow</code>.</p>\n<p>output of code above:</p>\n<pre><code>\n14:37:03 [INFO] [Host] Sending back player data...\n14:37:03 [INFO] [Host] Getting col: id\n14:37:03 [INFO] [Host] Getting col: name\n14:37:03 [INFO] [Host] Getting col: date_joined\n14:37:03 [INFO] [Host] Getting col: rank\n14:37:03 [INFO] [Host] Getting col: moderator\n14:37:03 [INFO] [Host] adding NetworkedSQLObject: id:TEXT -&gt; 2\n14:37:03 [INFO] [Host] adding NetworkedSQLObject: name:TEXT -&gt; KrispWasntTaken\n14:37:03 [INFO] [Host] adding NetworkedSQLObject: date_joined:TIMESTAMP -&gt; 2023-06-14 18:19:15.0\n14:37:03 [INFO] [Host] adding NetworkedSQLObject: rank:INT -&gt; 0\n14:37:03 [INFO] [Host] adding NetworkedSQLObject: moderator:BIT -&gt; true\n14:37:03 [INFO] [Host] Linked Hash Map class name: mirage.database.sql.SQLRow$1 &lt;---- HERE!\n\n</code></pre>\n<p>It says the same thing in the NetworkedSQLObject constructor. The function <code>getAsSocketEligibleMap()</code> is INSIDE the SQLRow class, but I am really confused as it has no ties to the class and returns a fresh new <code>LinkedHashMap</code>, not an instance of a <code>SQLRow</code>...</p>\n<p><code>getAsSocketEligibleMap()</code> code:</p>\n<pre><code>\npublic LinkedHashMap&lt;String, NetworkedSQLObject&gt; getAsSocketEligibleMap(){\n        return new LinkedHashMap&lt;&gt;(){{\n            Set&lt;Map.Entry&lt;String, SQLObject&gt;&gt; es = data.entrySet();\n\n            Iterator&lt;Map.Entry&lt;String, SQLObject&gt;&gt; i = es.iterator();\n\n            while(i.hasNext()){\n                Map.Entry&lt;String, SQLObject&gt; entry = i.next();\n                Host.instance.getLogger().info(&quot;adding NetworkedSQLObject: &quot; + entry.getKey() + ':' + entry.getValue().getType() + &quot; -&gt; &quot; + entry.getValue().getValue());\n                put(entry.getKey(), new NetworkedSQLObject(entry.getValue()));\n            }\n        }};\n    }\n\n</code></pre>\n<p>Any help is appreciated...</p>\n"},{"tags":["java","spring","spring-boot","spring-data-jpa"],"owner":{"account_id":792027,"reputation":2645,"user_id":869368,"display_name":"Matthias"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686852673,"creation_date":1686852673,"question_id":76484430,"body_markdown":"I&#39;m upgrading from Spring Boot 2 to Spring Boot 3.1. \r\nGenerally the application runs fine, however our API tests frequently fail since the upgrade due to a high amount of JPA Deadlock Exceptions. Such Deadlocks did not at all occur with Version 2 - it&#39;s the first time I am seeing them, and now they happen very often (~40% of tests will fail due to these deadlock exceptions). \r\n\r\nWhat I can see is that it&#39;s all inserts and it&#39;s all going to the same table, which isn&#39;t very big and does not have a lot of indexes to it (one foreign key index and one index on a state; that&#39;s it). There&#39;s not a single such exception on a different table, while some of them getting way more writes than this one. \r\n\r\nHas anyone seen such a behaviuor before? \r\n\r\n\r\n\r\n```\r\nCaused by: org.hibernate.exception.LockAcquisitionException: could not execute batch [(conn=1247) Deadlock found when trying to get lock; try restarting transaction] [insert into `order_purchase_order` (`buyer_purchase_order_comment`,`created_at`,`current_state`,`last_modified_at`,`order_id`,`state_history`,`supplier_dialect_id`,`supplier_id`,`supplier_id_name`,`supplier_name`,`supplier_sales_order_reference`,`id`) values (?,?,?,?,?,?,?,?,?,?,?,?)]\r\n\tat org.hibernate.dialect.MySQLDialect.lambda$buildSQLExceptionConversionDelegate$3(MySQLDialect.java:1178)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchImpl.lambda$performExecution$2(BatchImpl.java:289)\r\n\tat org.hibernate.engine.jdbc.mutation.internal.PreparedStatementGroupSingleTable.forEachStatement(PreparedStatementGroupSingleTable.java:59)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchImpl.performExecution(BatchImpl.java:262)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchImpl.execute(BatchImpl.java:241)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.getBatch(JdbcCoordinatorImpl.java:173)\r\n\tat org.hibernate.engine.jdbc.mutation.internal.MutationExecutorSingleBatched.resolveBatch(MutationExecutorSingleBatched.java:47)\r\n\tat org.hibernate.engine.jdbc.mutation.internal.MutationExecutorSingleBatched.performBatchedOperations(MutationExecutorSingleBatched.java:60)\r\n\tat org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.execute(AbstractMutationExecutor.java:55)\r\n\tat org.hibernate.persister.entity.mutation.InsertCoordinator.doStaticInserts(InsertCoordinator.java:170)\r\n\tat org.hibernate.persister.entity.mutation.InsertCoordinator.coordinateInsert(InsertCoordinator.java:112)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2670)\r\n\tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:102)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:618)\r\n\tat org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:489)\r\n\tat java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:721)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:486)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:358)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1412)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:485)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2296)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1961)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:169)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:267)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:561)\r\n\t... 24 common frames omitted\r\nCaused by: java.sql.BatchUpdateException: (conn=1247) Deadlock found when trying to get lock; try restarting transaction\r\n\tat org.mariadb.jdbc.export.ExceptionFactory.createBatchUpdate(ExceptionFactory.java:215)\r\n\tat org.mariadb.jdbc.client.impl.StandardClient.executePipeline(StandardClient.java:637)\r\n\tat org.mariadb.jdbc.ClientPreparedStatement.executeBatchPipeline(ClientPreparedStatement.java:196)\r\n\tat org.mariadb.jdbc.ClientPreparedStatement.executeInternalPreparedBatch(ClientPreparedStatement.java:128)\r\n\tat org.mariadb.jdbc.ClientPreparedStatement.executeBatch(ClientPreparedStatement.java:466)\r\n\tat com.zaxxer.hikari.pool.ProxyStatement.executeBatch(ProxyStatement.java:127)\r\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeBatch(HikariProxyPreparedStatement.java)\r\n\tat org.hibernate.engine.jdbc.batch.internal.BatchImpl.lambda$performExecution$2(BatchImpl.java:275)\r\n\t... 51 common frames omitted\r\nCaused by: java.sql.SQLTransactionRollbackException: (conn=1247) Deadlock found when trying to get lock; try restarting transaction\r\n\tat org.mariadb.jdbc.export.ExceptionFactory.createException(ExceptionFactory.java:296)\r\n\tat org.mariadb.jdbc.export.ExceptionFactory.create(ExceptionFactory.java:370)\r\n\tat org.mariadb.jdbc.message.ClientMessage.readPacket(ClientMessage.java:134)\r\n\tat org.mariadb.jdbc.client.impl.StandardClient.readPacket(StandardClient.java:872)\r\n\tat org.mariadb.jdbc.client.impl.StandardClient.readResults(StandardClient.java:811)\r\n\tat org.mariadb.jdbc.client.impl.StandardClient.readResponse(StandardClient.java:730)\r\n\tat org.mariadb.jdbc.client.impl.StandardClient.executePipeline(StandardClient.java:571)\r\n\t... 57 common frames omitted\r\n```","title":"Spring Boot 3 Upgrade - Spring Data JPA Deadlocks on insert to MariaDb at Concurrency","body":"<p>I'm upgrading from Spring Boot 2 to Spring Boot 3.1.\nGenerally the application runs fine, however our API tests frequently fail since the upgrade due to a high amount of JPA Deadlock Exceptions. Such Deadlocks did not at all occur with Version 2 - it's the first time I am seeing them, and now they happen very often (~40% of tests will fail due to these deadlock exceptions).</p>\n<p>What I can see is that it's all inserts and it's all going to the same table, which isn't very big and does not have a lot of indexes to it (one foreign key index and one index on a state; that's it). There's not a single such exception on a different table, while some of them getting way more writes than this one.</p>\n<p>Has anyone seen such a behaviuor before?</p>\n<pre><code>Caused by: org.hibernate.exception.LockAcquisitionException: could not execute batch [(conn=1247) Deadlock found when trying to get lock; try restarting transaction] [insert into `order_purchase_order` (`buyer_purchase_order_comment`,`created_at`,`current_state`,`last_modified_at`,`order_id`,`state_history`,`supplier_dialect_id`,`supplier_id`,`supplier_id_name`,`supplier_name`,`supplier_sales_order_reference`,`id`) values (?,?,?,?,?,?,?,?,?,?,?,?)]\n    at org.hibernate.dialect.MySQLDialect.lambda$buildSQLExceptionConversionDelegate$3(MySQLDialect.java:1178)\n    at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)\n    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)\n    at org.hibernate.engine.jdbc.batch.internal.BatchImpl.lambda$performExecution$2(BatchImpl.java:289)\n    at org.hibernate.engine.jdbc.mutation.internal.PreparedStatementGroupSingleTable.forEachStatement(PreparedStatementGroupSingleTable.java:59)\n    at org.hibernate.engine.jdbc.batch.internal.BatchImpl.performExecution(BatchImpl.java:262)\n    at org.hibernate.engine.jdbc.batch.internal.BatchImpl.execute(BatchImpl.java:241)\n    at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.getBatch(JdbcCoordinatorImpl.java:173)\n    at org.hibernate.engine.jdbc.mutation.internal.MutationExecutorSingleBatched.resolveBatch(MutationExecutorSingleBatched.java:47)\n    at org.hibernate.engine.jdbc.mutation.internal.MutationExecutorSingleBatched.performBatchedOperations(MutationExecutorSingleBatched.java:60)\n    at org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.execute(AbstractMutationExecutor.java:55)\n    at org.hibernate.persister.entity.mutation.InsertCoordinator.doStaticInserts(InsertCoordinator.java:170)\n    at org.hibernate.persister.entity.mutation.InsertCoordinator.coordinateInsert(InsertCoordinator.java:112)\n    at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2670)\n    at org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:102)\n    at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:618)\n    at org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:489)\n    at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:721)\n    at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:486)\n    at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:358)\n    at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\n    at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)\n    at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1412)\n    at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:485)\n    at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2296)\n    at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1961)\n    at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)\n    at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:169)\n    at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:267)\n    at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\n    at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:561)\n    ... 24 common frames omitted\nCaused by: java.sql.BatchUpdateException: (conn=1247) Deadlock found when trying to get lock; try restarting transaction\n    at org.mariadb.jdbc.export.ExceptionFactory.createBatchUpdate(ExceptionFactory.java:215)\n    at org.mariadb.jdbc.client.impl.StandardClient.executePipeline(StandardClient.java:637)\n    at org.mariadb.jdbc.ClientPreparedStatement.executeBatchPipeline(ClientPreparedStatement.java:196)\n    at org.mariadb.jdbc.ClientPreparedStatement.executeInternalPreparedBatch(ClientPreparedStatement.java:128)\n    at org.mariadb.jdbc.ClientPreparedStatement.executeBatch(ClientPreparedStatement.java:466)\n    at com.zaxxer.hikari.pool.ProxyStatement.executeBatch(ProxyStatement.java:127)\n    at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeBatch(HikariProxyPreparedStatement.java)\n    at org.hibernate.engine.jdbc.batch.internal.BatchImpl.lambda$performExecution$2(BatchImpl.java:275)\n    ... 51 common frames omitted\nCaused by: java.sql.SQLTransactionRollbackException: (conn=1247) Deadlock found when trying to get lock; try restarting transaction\n    at org.mariadb.jdbc.export.ExceptionFactory.createException(ExceptionFactory.java:296)\n    at org.mariadb.jdbc.export.ExceptionFactory.create(ExceptionFactory.java:370)\n    at org.mariadb.jdbc.message.ClientMessage.readPacket(ClientMessage.java:134)\n    at org.mariadb.jdbc.client.impl.StandardClient.readPacket(StandardClient.java:872)\n    at org.mariadb.jdbc.client.impl.StandardClient.readResults(StandardClient.java:811)\n    at org.mariadb.jdbc.client.impl.StandardClient.readResponse(StandardClient.java:730)\n    at org.mariadb.jdbc.client.impl.StandardClient.executePipeline(StandardClient.java:571)\n    ... 57 common frames omitted\n</code></pre>\n"},{"tags":["java","android","firebase","google-cloud-firestore"],"comments":[{"owner":{"account_id":9921486,"reputation":5699,"user_id":7344445,"display_name":"Atif AbbAsi"},"score":0,"creation_date":1509083310,"post_id":46894118,"comment_id":80883907,"body_markdown":"mDatabase.getReference().keepSynced(false);      \n      FirebaseDatabase.getInstance().setPersistenceEnabled(false);","body":"mDatabase.getReference().keepSynced(false);             FirebaseDatabase.getInstance().setPersistenceEnabled(false);"},{"owner":{"account_id":8084605,"reputation":337,"user_id":6092538,"accept_rate":78,"display_name":"Snehal Gongle"},"score":0,"creation_date":1509084980,"post_id":46894118,"comment_id":80884545,"body_markdown":"look personally i don&#39;t think that it has anything to do with the cache still in case it has that problem then check enable offline persistence(https://firebase.google.com/docs/firestore/manage-data/enable-offline#configure_offline_persistence)","body":"look personally i don&#39;t think that it has anything to do with the cache still in case it has that problem then check enable offline persistence(<a href=\"https://firebase.google.com/docs/firestore/manage-data/enable-offline#configure_offline_persistence\" rel=\"nofollow noreferrer\">firebase.google.com/docs/firestore/manage-data/&hellip;</a>&zwnj;&#8203;)"},{"owner":{"account_id":152400,"reputation":240448,"user_id":366904,"accept_rate":82,"display_name":"Cody Gray - on strike"},"score":0,"creation_date":1509106097,"post_id":46894118,"comment_id":80896736,"body_markdown":"Please consider easing up on the minor edits here. The question already has a bounty set, so it&#39;ll be featured for 5 more days without you needing to &quot;bump&quot; it with edits.","body":"Please consider easing up on the minor edits here. The question already has a bounty set, so it&#39;ll be featured for 5 more days without you needing to &quot;bump&quot; it with edits."},{"owner":{"account_id":7781537,"reputation":4101,"user_id":5887805,"display_name":"Alexander Vitanov"},"score":0,"creation_date":1509214883,"post_id":46894118,"comment_id":80932400,"body_markdown":"Did you try this: https://stackoverflow.com/questions/46790741/how-can-i-delete-the-available-state-in-a-local-cache","body":"Did you try this: <a href=\"https://stackoverflow.com/questions/46790741/how-can-i-delete-the-available-state-in-a-local-cache\" title=\"how can i delete the available state in a local cache\">stackoverflow.com/questions/46790741/&hellip;</a>"},{"owner":{"account_id":7888941,"reputation":4117,"user_id":7483311,"accept_rate":94,"display_name":"Tal Barda"},"score":0,"creation_date":1509302896,"post_id":46894118,"comment_id":80954315,"body_markdown":"@AlexanderVitanov It seems like an option to consider if I won&#39;t find the solution. However, if I have checked whether the snapshot is from cache or not and I found out it does, will I be able to get the snapshot from the server instead? Can I choose?","body":"@AlexanderVitanov It seems like an option to consider if I won&#39;t find the solution. However, if I have checked whether the snapshot is from cache or not and I found out it does, will I be able to get the snapshot from the server instead? Can I choose?"},{"owner":{"account_id":1529459,"reputation":485,"user_id":1427044,"accept_rate":38,"display_name":"eJoe"},"score":0,"creation_date":1509723831,"post_id":46894118,"comment_id":81149024,"body_markdown":"I have the same problem with Firestore in my application? Any progress on this?","body":"I have the same problem with Firestore in my application? Any progress on this?"},{"owner":{"account_id":7888941,"reputation":4117,"user_id":7483311,"accept_rate":94,"display_name":"Tal Barda"},"score":0,"creation_date":1509732258,"post_id":46894118,"comment_id":81153896,"body_markdown":"@eJoe Nope. I still haven&#39;t found a solution.","body":"@eJoe Nope. I still haven&#39;t found a solution."}],"answers":[{"comments":[{"owner":{"account_id":7888941,"reputation":4117,"user_id":7483311,"accept_rate":94,"display_name":"Tal Barda"},"score":0,"creation_date":1509115120,"post_id":46968268,"comment_id":80902709,"body_markdown":"Thanks for the answer. If I put `FirebaseFirestore.setLoggingEnabled(false)` instead of `setPersistenceEnabled(false)` the result stays the same, I can&#39;t make any requests to the server after going offline and than back online... \n\nAnd regarding to the thing the you wrote under &quot;try this&quot;, I think it&#39;s for `Realtime Database`, not `Firestore`.","body":"Thanks for the answer. If I put <code>FirebaseFirestore.setLoggingEnabled(false)</code> instead of <code>setPersistenceEnabled(false)</code> the result stays the same, I can&#39;t make any requests to the server after going offline and than back online...   And regarding to the thing the you wrote under &quot;try this&quot;, I think it&#39;s for <code>Realtime Database</code>, not <code>Firestore</code>."},{"owner":{"account_id":9921486,"reputation":5699,"user_id":7344445,"display_name":"Atif AbbAsi"},"score":0,"creation_date":1509130590,"post_id":46968268,"comment_id":80910849,"body_markdown":"Will review it again","body":"Will review it again"}],"tags":[],"owner":{"account_id":9921486,"reputation":5699,"user_id":7344445,"display_name":"Atif AbbAsi"},"comment_count":2,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1510749858,"creation_date":1509083239,"answer_id":46968268,"question_id":46894118,"body_markdown":"    // Enable Firestore logging\r\n        FirebaseFirestore.setLoggingEnabled(flase);\r\n    // Firestore\r\n        mFirestore = FirebaseFirestore.getInstance();\r\n\r\n   In general: the Firebase client tries to minimize the number of times it downloads data. But it also tries to minimize the amount of memory/disk space it uses.\r\n\r\nThe exact behavior depends on many things, such as whether the another listener has remained active on that location and whether you&#39;re using disk persistence. If you have two listeners for the same (or overlapping) data, updates will only be downloaded once. But if you remove the last listener for a location, the data for that location is removed from the (memory and/or disk) cache.\r\n\r\nWithout seeing a complete piece of code, it&#39;s hard to tell what will happen in your case.\r\n\r\nAlternatively: you can check for yourself by enabling Firebase&#39;s logging `[Firebase setLoggingEnabled:YES]`;\r\n\r\n  **try this For FireBase DataBase** \r\n\r\n      mDatabase.getReference().keepSynced(false);      \r\n          FirebaseDatabase.getInstance().setPersistenceEnabled(false);","title":"Can&#39;t Disable Offline Data In Firestore","body":"<pre><code>// Enable Firestore logging\n    FirebaseFirestore.setLoggingEnabled(flase);\n// Firestore\n    mFirestore = FirebaseFirestore.getInstance();\n</code></pre>\n\n<p>In general: the Firebase client tries to minimize the number of times it downloads data. But it also tries to minimize the amount of memory/disk space it uses.</p>\n\n<p>The exact behavior depends on many things, such as whether the another listener has remained active on that location and whether you're using disk persistence. If you have two listeners for the same (or overlapping) data, updates will only be downloaded once. But if you remove the last listener for a location, the data for that location is removed from the (memory and/or disk) cache.</p>\n\n<p>Without seeing a complete piece of code, it's hard to tell what will happen in your case.</p>\n\n<p>Alternatively: you can check for yourself by enabling Firebase's logging <code>[Firebase setLoggingEnabled:YES]</code>;</p>\n\n<p><strong>try this For FireBase DataBase</strong> </p>\n\n<pre><code>  mDatabase.getReference().keepSynced(false);      \n      FirebaseDatabase.getInstance().setPersistenceEnabled(false);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":7888941,"reputation":4117,"user_id":7483311,"accept_rate":94,"display_name":"Tal Barda"},"score":0,"creation_date":1511011040,"post_id":47358362,"comment_id":81685496,"body_markdown":"If Firestore is designed to retrieve data from the cache (after a disconnection) no matter what, then what &quot;setPersistenceEnabled(false)&quot; feature is good for?","body":"If Firestore is designed to retrieve data from the cache (after a disconnection) no matter what, then what &quot;setPersistenceEnabled(false)&quot; feature is good for?"},{"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1511012822,"post_id":47358362,"comment_id":81685965,"body_markdown":"I exaplained in my updated answer why is `setPersistenceEnabled(false)` feature is good for. Please take a look.","body":"I exaplained in my updated answer why is <code>setPersistenceEnabled(false)</code> feature is good for. Please take a look."}],"tags":[],"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"comment_count":2,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1540872418,"creation_date":1510948584,"answer_id":47358362,"question_id":46894118,"body_markdown":"I just ran a few tests in an Android application to see how this works. Because Firestore is currently still in `beta release` and the product might suffer changes any time, i cannot guarantee that this behaviour will still hold in the future.\r\n\r\n\tdb.collection(&quot;tests&quot;).document(&quot;fOpCiqmUjAzjnZimjd5c&quot;).get().addOnCompleteListener(new OnCompleteListener&lt;DocumentSnapshot&gt;() {\r\n\t\t@Override\r\n\t\tpublic void onComplete(@NonNull Task&lt;DocumentSnapshot&gt; task) {\r\n\t\t\tDocumentSnapshot documentSnapshot = task.getResult();\r\n\t\t\tSystem.out.println(&quot;isFromCache: &quot; + documentSnapshot.getMetadata().isFromCache());\r\n\t\t}\r\n\t});\r\n\r\nRegarding the code, is the same no matter if we&#39;re getting the data from the cache or you are connected to the servers.\r\n\r\nWhen I&#39;m online it prints:\r\n\r\n    isFromCache: false\r\n\r\nWhen I&#39;m offline, it prints:\r\n\r\n    isFromCache: true\r\n\r\nSo, for the moment, there is no way to stop the retrieval of the data from the cache while you are not connected to the server, as you cannot force the retrieval of the data from the cache while you&#39;re connected to the server.\r\n\r\nIf instead I use a listener:\r\n\r\n\tdb.collection(&quot;tests&quot;).document(&quot;fOpCiqmUjAzjnZimjd5c&quot;).addSnapshotListener(new DocumentListenOptions().includeMetadataChanges(), new EventListener&lt;DocumentSnapshot&gt;() {\r\n\t\t@Override\r\n\t\tpublic void onEvent(DocumentSnapshot documentSnapshot, FirebaseFirestoreException e) {\r\n\t\t\tSystem.out.println(&quot;listener.isFromCache: &quot; + documentSnapshot.getMetadata().isFromCache());\r\n\t\t}\r\n\t});\r\n\r\nI get two prints when I&#39;m online:\r\n\r\n    listener.isFromCache: true\r\n    listener.isFromCache: false\r\n\r\n\r\nFirestore is desinged to retrieve data from the chache when the device is permanently offline or while your application temporarily loses its network connection and for the moment you cannot change this behaviour.\r\n\r\nAs a concusion, an API that does something like this, currently doesn&#39;t exist yet.\r\n\r\n**Edit:** Unlike in Firebase, where to enable the offline persistence you need use this line of code:\r\n\r\n    FirebaseDatabase.getInstance().setPersistenceEnabled(true);\r\n\r\nIn Firestore, for Android and iOS, offline persistence is `enabled by default`. \r\n\r\nUsing the above line of code, means that you tell Firebase to create a local (internal) copy of your database so that your app can work even if it temporarily loses its network connection.\r\n\r\nIn Firestore we find the opposite, to disable persistence, we need to set the `PersistenceEnabled` option to `false`. This means that you tell Firestore not to create a local copy of your database on user device, which in term means that you&#39;ll not be able to query your database unless your are connected to Firebase servers. So without having a local copy of your database and if beeing disconected, an Exception will be thrown. That&#39;s why is a good practice to use the `OnFailureListener`.\r\n\r\n**Update (2018-06-13):** As also @TalBarda mentioned in his answer this is now possible starting with the 16.0.0 SDK version update. So we can achieve this with the help of the [DocumentReference.get(Source source)](https://firebase.google.com/docs/reference/android/com/google/firebase/firestore/DocumentReference.html#get(com.google.firebase.firestore.Source)) and [Query.get(Source source)](https://firebase.google.com/docs/reference/android/com/google/firebase/firestore/Query.html#get(com.google.firebase.firestore.Source)) methods.\r\n\r\n&gt; By default, `get()` attempts to provide up-to-date data when possible by waiting for data from the server, but it may return cached data or fail if you are offline and the server cannot be reached. This behavior can be altered via the Source parameter.\r\n\r\nSo we can now pass as an argument to the `DocumentReference` or to the `Query` the source so we can force the retrieval of data from the `server only`, `chache only` or attempt server and fall back to the cache.\r\n\r\nSo something like this is now possible:\r\n\r\n    FirebaseFirestore db = FirebaseFirestore.getInstance();\r\n    DocumentReference docIdRef = db.collection(&quot;tests&quot;).document(&quot;fOpCiqmUjAzjnZimjd5c&quot;);\r\n    docIdRef.get(Source.SERVER).addOnSuccessListener(new OnSuccessListener&lt;DocumentSnapshot&gt;() {\r\n        @Override\r\n        public void onSuccess(DocumentSnapshot documentSnapshot) {\r\n            //Get data from the documentSnapshot object\r\n        }\r\n    });\r\n\r\nIn this case, we force the data to be retrieved from the server only. If you want to force the data to be retrieved from the cache only, you should pass as an argument to the `get()` method, `Source.CACHE`. More informations [here](https://firebase.google.com/docs/reference/android/com/google/firebase/firestore/Source).","title":"Can&#39;t Disable Offline Data In Firestore","body":"<p>I just ran a few tests in an Android application to see how this works. Because Firestore is currently still in <code>beta release</code> and the product might suffer changes any time, i cannot guarantee that this behaviour will still hold in the future.</p>\n\n<pre><code>db.collection(\"tests\").document(\"fOpCiqmUjAzjnZimjd5c\").get().addOnCompleteListener(new OnCompleteListener&lt;DocumentSnapshot&gt;() {\n    @Override\n    public void onComplete(@NonNull Task&lt;DocumentSnapshot&gt; task) {\n        DocumentSnapshot documentSnapshot = task.getResult();\n        System.out.println(\"isFromCache: \" + documentSnapshot.getMetadata().isFromCache());\n    }\n});\n</code></pre>\n\n<p>Regarding the code, is the same no matter if we're getting the data from the cache or you are connected to the servers.</p>\n\n<p>When I'm online it prints:</p>\n\n<pre><code>isFromCache: false\n</code></pre>\n\n<p>When I'm offline, it prints:</p>\n\n<pre><code>isFromCache: true\n</code></pre>\n\n<p>So, for the moment, there is no way to stop the retrieval of the data from the cache while you are not connected to the server, as you cannot force the retrieval of the data from the cache while you're connected to the server.</p>\n\n<p>If instead I use a listener:</p>\n\n<pre><code>db.collection(\"tests\").document(\"fOpCiqmUjAzjnZimjd5c\").addSnapshotListener(new DocumentListenOptions().includeMetadataChanges(), new EventListener&lt;DocumentSnapshot&gt;() {\n    @Override\n    public void onEvent(DocumentSnapshot documentSnapshot, FirebaseFirestoreException e) {\n        System.out.println(\"listener.isFromCache: \" + documentSnapshot.getMetadata().isFromCache());\n    }\n});\n</code></pre>\n\n<p>I get two prints when I'm online:</p>\n\n<pre><code>listener.isFromCache: true\nlistener.isFromCache: false\n</code></pre>\n\n<p>Firestore is desinged to retrieve data from the chache when the device is permanently offline or while your application temporarily loses its network connection and for the moment you cannot change this behaviour.</p>\n\n<p>As a concusion, an API that does something like this, currently doesn't exist yet.</p>\n\n<p><strong>Edit:</strong> Unlike in Firebase, where to enable the offline persistence you need use this line of code:</p>\n\n<pre><code>FirebaseDatabase.getInstance().setPersistenceEnabled(true);\n</code></pre>\n\n<p>In Firestore, for Android and iOS, offline persistence is <code>enabled by default</code>. </p>\n\n<p>Using the above line of code, means that you tell Firebase to create a local (internal) copy of your database so that your app can work even if it temporarily loses its network connection.</p>\n\n<p>In Firestore we find the opposite, to disable persistence, we need to set the <code>PersistenceEnabled</code> option to <code>false</code>. This means that you tell Firestore not to create a local copy of your database on user device, which in term means that you'll not be able to query your database unless your are connected to Firebase servers. So without having a local copy of your database and if beeing disconected, an Exception will be thrown. That's why is a good practice to use the <code>OnFailureListener</code>.</p>\n\n<p><strong>Update (2018-06-13):</strong> As also @TalBarda mentioned in his answer this is now possible starting with the 16.0.0 SDK version update. So we can achieve this with the help of the <a href=\"https://firebase.google.com/docs/reference/android/com/google/firebase/firestore/DocumentReference.html#get(com.google.firebase.firestore.Source)\" rel=\"noreferrer\">DocumentReference.get(Source source)</a> and <a href=\"https://firebase.google.com/docs/reference/android/com/google/firebase/firestore/Query.html#get(com.google.firebase.firestore.Source)\" rel=\"noreferrer\">Query.get(Source source)</a> methods.</p>\n\n<blockquote>\n  <p>By default, <code>get()</code> attempts to provide up-to-date data when possible by waiting for data from the server, but it may return cached data or fail if you are offline and the server cannot be reached. This behavior can be altered via the Source parameter.</p>\n</blockquote>\n\n<p>So we can now pass as an argument to the <code>DocumentReference</code> or to the <code>Query</code> the source so we can force the retrieval of data from the <code>server only</code>, <code>chache only</code> or attempt server and fall back to the cache.</p>\n\n<p>So something like this is now possible:</p>\n\n<pre><code>FirebaseFirestore db = FirebaseFirestore.getInstance();\nDocumentReference docIdRef = db.collection(\"tests\").document(\"fOpCiqmUjAzjnZimjd5c\");\ndocIdRef.get(Source.SERVER).addOnSuccessListener(new OnSuccessListener&lt;DocumentSnapshot&gt;() {\n    @Override\n    public void onSuccess(DocumentSnapshot documentSnapshot) {\n        //Get data from the documentSnapshot object\n    }\n});\n</code></pre>\n\n<p>In this case, we force the data to be retrieved from the server only. If you want to force the data to be retrieved from the cache only, you should pass as an argument to the <code>get()</code> method, <code>Source.CACHE</code>. More informations <a href=\"https://firebase.google.com/docs/reference/android/com/google/firebase/firestore/Source\" rel=\"noreferrer\">here</a>.</p>\n"},{"comments":[{"owner":{"account_id":16277708,"reputation":719,"user_id":11754492,"display_name":"VLXU"},"score":1,"creation_date":1592580660,"post_id":50169115,"comment_id":110485660,"body_markdown":"How do I do this for `StreamBuilder`s?","body":"How do I do this for <code>StreamBuilder</code>s?"},{"owner":{"account_id":7306153,"reputation":2760,"user_id":5567009,"display_name":"Nigam Patro"},"score":0,"creation_date":1609677328,"post_id":50169115,"comment_id":115891655,"body_markdown":"At very first it gives data from cache even after setting Source as SERVER.","body":"At very first it gives data from cache even after setting Source as SERVER."}],"tags":[],"owner":{"account_id":7888941,"reputation":4117,"user_id":7483311,"accept_rate":94,"display_name":"Tal Barda"},"comment_count":2,"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1525417532,"creation_date":1525417532,"answer_id":50169115,"question_id":46894118,"body_markdown":"According to `Cloud Firestore` ***16.0.0*** SDK update, there is now a solution to this problem:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/laWUp.png\r\n_____\r\n\r\n\r\nYou are now able to choose if you would like to fetch your data from the *server only*, **or** from the *cache only*, like this (an example for server only):\r\n\r\n    DocumentReference documentReference= FirebaseFirestore.getInstance().document(&quot;example&quot;);\r\n    documentReference.get(Source.SERVER).addOnSuccessListener(new OnSuccessListener&lt;DocumentSnapshot&gt;() {\r\n        @Override\r\n        public void onSuccess(DocumentSnapshot documentSnapshot) {\r\n                //...\r\n        }\r\n    });\r\n\r\nFor cache only, just change the code above to `Source.CACHE`. \r\n_____\r\n**By default, both methods still attempt server and fall back to the cache.**\r\n","title":"Can&#39;t Disable Offline Data In Firestore","body":"<p>According to <code>Cloud Firestore</code> <strong><em>16.0.0</em></strong> SDK update, there is now a solution to this problem:</p>\n\n<p><a href=\"https://i.stack.imgur.com/laWUp.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/laWUp.png\" alt=\"enter image description here\"></a></p>\n\n<hr>\n\n<p>You are now able to choose if you would like to fetch your data from the <em>server only</em>, <strong>or</strong> from the <em>cache only</em>, like this (an example for server only):</p>\n\n<pre><code>DocumentReference documentReference= FirebaseFirestore.getInstance().document(\"example\");\ndocumentReference.get(Source.SERVER).addOnSuccessListener(new OnSuccessListener&lt;DocumentSnapshot&gt;() {\n    @Override\n    public void onSuccess(DocumentSnapshot documentSnapshot) {\n            //...\n    }\n});\n</code></pre>\n\n<p>For cache only, just change the code above to <code>Source.CACHE</code>. </p>\n\n<hr>\n\n<p><strong>By default, both methods still attempt server and fall back to the cache.</strong></p>\n"},{"tags":[],"owner":{"account_id":5102113,"reputation":125,"user_id":4091435,"display_name":"Ankit Tomer"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1548136480,"creation_date":1548136480,"answer_id":54302033,"question_id":46894118,"body_markdown":"`FirebaseFirestoreSettings settings = new FirebaseFirestoreSettings.Builder()\r\n               .setPersistenceEnabled(false)\r\n               .build();\r\ndbEventHome.setFirestoreSettings(settings);`\r\n\r\nBy setting this it is fetching from server always.","title":"Can&#39;t Disable Offline Data In Firestore","body":"<p><code>FirebaseFirestoreSettings settings = new FirebaseFirestoreSettings.Builder()\n               .setPersistenceEnabled(false)\n               .build();\ndbEventHome.setFirestoreSettings(settings);</code></p>\n\n<p>By setting this it is fetching from server always.</p>\n"},{"tags":[],"owner":{"account_id":13654567,"reputation":111,"user_id":9851480,"display_name":"Abdulkerim Yıldırım"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1654784899,"creation_date":1654784899,"answer_id":72562104,"question_id":46894118,"body_markdown":"In Kotlin;\r\n\r\n    val settings = FirebaseFirestoreSettings.Builder()\r\n                with(settings){\r\n                    isPersistenceEnabled = false\r\n    }\r\n    Firebase.firestore.firestoreSettings = settings.build()","title":"Can&#39;t Disable Offline Data In Firestore","body":"<p>In Kotlin;</p>\n<pre><code>val settings = FirebaseFirestoreSettings.Builder()\n            with(settings){\n                isPersistenceEnabled = false\n}\nFirebase.firestore.firestoreSettings = settings.build()\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19445039,"reputation":171,"user_id":14222768,"display_name":"EL HIRCH BADREDDYN"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1667678444,"creation_date":1667678444,"answer_id":74331083,"question_id":46894118,"body_markdown":"&gt;In Kotlin:\r\n```kotlin\r\n        val db:FirebaseFirestore = Firebase.firestore\r\n        val settings = firestoreSettings {\r\n            isPersistenceEnabled = false\r\n        }\r\n        db.firestoreSettings = settings\r\n```","title":"Can&#39;t Disable Offline Data In Firestore","body":"<blockquote>\n<p>In Kotlin:</p>\n</blockquote>\n<pre class=\"lang-kotlin prettyprint-override\"><code>        val db:FirebaseFirestore = Firebase.firestore\n        val settings = firestoreSettings {\n            isPersistenceEnabled = false\n        }\n        db.firestoreSettings = settings\n</code></pre>\n"},{"tags":[],"owner":{"account_id":158396,"reputation":13965,"user_id":377011,"accept_rate":75,"display_name":"Jonas Sourlier"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686852041,"creation_date":1686852041,"answer_id":76484367,"question_id":46894118,"body_markdown":"In the Javascript SDK, by using Firestore&#39;s `getDocFromServer` and `getDocsFromServer`, you prevent getting data from the cache.","title":"Can&#39;t Disable Offline Data In Firestore","body":"<p>In the Javascript SDK, by using Firestore's <code>getDocFromServer</code> and <code>getDocsFromServer</code>, you prevent getting data from the cache.</p>\n"}],"owner":{"account_id":7888941,"reputation":4117,"user_id":7483311,"accept_rate":94,"display_name":"Tal Barda"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11980,"favorite_count":0,"down_vote_count":0,"up_vote_count":22,"accepted_answer_id":50169115,"answer_count":7,"score":22,"last_activity_date":1686852041,"creation_date":1508775861,"question_id":46894118,"body_markdown":"After deleting data from my `Firestore Database`, it takes my `Android` `app` some time to realize that the data was deleted, and I assume that it&#39;s happening due the auto data cache. My app has nothing to do with offline usage and I&#39;d like to disable this feature...\r\n\r\nI have added this in my custom `Application Class`:\r\n\r\n    import android.app.Application;\r\n    import com.google.firebase.firestore.FirebaseFirestore;\r\n    import com.google.firebase.firestore.FirebaseFirestoreSettings;\r\n    \r\n    public class ApplicationClass extends Application {\r\n    \r\n        @Override\r\n        public void onCreate() {\r\n            super.onCreate();\r\n    \r\n            FirebaseFirestore db=FirebaseFirestore.getInstance();\r\n            FirebaseFirestoreSettings settings = new FirebaseFirestoreSettings.Builder()\r\n                    .setPersistenceEnabled(false)\r\n                    .build();\r\n            db.setFirestoreSettings(settings);\r\n        }\r\n    }\r\n\r\nThe problem occurs after turning off the internet connection and than turning it back on (*while the app is still running, in the background or not*)- the `Firestore module` seems to lose connection to the server, and it makes the opposite operation than the intended one - **instead of *stop* taking data from the cache, it takes data from the cache *only*.** \r\n\r\nFor example, debugging this code will always show that **`isFromCache` is `true`** and **`documentSnapshot` is empty** (even though that on the `server` side - it&#39;s not empty):\r\n\r\n    usersRef.document(loggedEmail).collection(&quot;challenges_received&quot;).get().addOnSuccessListener(new OnSuccessListener&lt;QuerySnapshot&gt;() {\r\n        @Override\r\n        public void onSuccess(QuerySnapshot documentSnapshots) {\r\n            boolean isFromCache=documentSnapshots.getMetadata().isFromCache();\r\n            if (!documentSnapshots.isEmpty()) {\r\n            }\r\n        }\r\n    });\r\n\r\n**Is this normal behavior?** \r\n\r\nIs there another way to disable the data cache in `Cloud Firestore`? \r\n\r\n_______\r\n\r\n***EDIT:***\r\n\r\nAdding: `FirebaseFirestore.setLoggingEnabled(flase);` (instead of the code above) in the custom `Application Class` gives the same result.\r\n","title":"Can&#39;t Disable Offline Data In Firestore","body":"<p>After deleting data from my <code>Firestore Database</code>, it takes my <code>Android</code> <code>app</code> some time to realize that the data was deleted, and I assume that it's happening due the auto data cache. My app has nothing to do with offline usage and I'd like to disable this feature...</p>\n\n<p>I have added this in my custom <code>Application Class</code>:</p>\n\n<pre><code>import android.app.Application;\nimport com.google.firebase.firestore.FirebaseFirestore;\nimport com.google.firebase.firestore.FirebaseFirestoreSettings;\n\npublic class ApplicationClass extends Application {\n\n    @Override\n    public void onCreate() {\n        super.onCreate();\n\n        FirebaseFirestore db=FirebaseFirestore.getInstance();\n        FirebaseFirestoreSettings settings = new FirebaseFirestoreSettings.Builder()\n                .setPersistenceEnabled(false)\n                .build();\n        db.setFirestoreSettings(settings);\n    }\n}\n</code></pre>\n\n<p>The problem occurs after turning off the internet connection and than turning it back on (<em>while the app is still running, in the background or not</em>)- the <code>Firestore module</code> seems to lose connection to the server, and it makes the opposite operation than the intended one - <strong>instead of <em>stop</em> taking data from the cache, it takes data from the cache <em>only</em>.</strong> </p>\n\n<p>For example, debugging this code will always show that <strong><code>isFromCache</code> is <code>true</code></strong> and <strong><code>documentSnapshot</code> is empty</strong> (even though that on the <code>server</code> side - it's not empty):</p>\n\n<pre><code>usersRef.document(loggedEmail).collection(\"challenges_received\").get().addOnSuccessListener(new OnSuccessListener&lt;QuerySnapshot&gt;() {\n    @Override\n    public void onSuccess(QuerySnapshot documentSnapshots) {\n        boolean isFromCache=documentSnapshots.getMetadata().isFromCache();\n        if (!documentSnapshots.isEmpty()) {\n        }\n    }\n});\n</code></pre>\n\n<p><strong>Is this normal behavior?</strong> </p>\n\n<p>Is there another way to disable the data cache in <code>Cloud Firestore</code>? </p>\n\n<hr>\n\n<p><strong><em>EDIT:</em></strong></p>\n\n<p>Adding: <code>FirebaseFirestore.setLoggingEnabled(flase);</code> (instead of the code above) in the custom <code>Application Class</code> gives the same result.</p>\n"},{"tags":["java","spring","maven","dependencies","confluence"],"owner":{"account_id":1947788,"reputation":25,"user_id":1752541,"accept_rate":75,"display_name":"user1752541"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686851908,"creation_date":1686851908,"question_id":76484351,"body_markdown":"I&#39;m currently struggling with the following issue: I need to use an interface in my plugin (PLUGIN A) that comes from another plugin (PLUGIN B). I&#39;m also the developer on PLUGIN B so I can make code changes (if needed).\r\n\r\nWhat I&#39;ve done so far:\r\n\r\n1. I&#39;ve added the packaged jar from PLUGIN B to my local maven repository by using this command:\r\n\r\n```\r\nmvn install:install-file -Dfile=plugin-b.jar \\\r\n    -DgroupId=com.my.plugin.b -DartifactId=plugin-b \\\r\n    -Dversion=1.0.0 \\\r\n    -Dpackaging=jar \r\n```\r\n\r\n2. Afterwards I&#39;ve added it as a dependency to the POM of my PLUGIN A:\r\n\r\n```\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.my.plugin.b&lt;/groupId&gt;\r\n            &lt;artifactId&gt;plugin-b&lt;/artifactId&gt;\r\n            &lt;version&gt;1.0.0&lt;/version&gt;\r\n            &lt;scope&gt;provided&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n```\r\n\r\nThis is also working so far as the plugin builds and I&#39;m capable of doing an import of the interface:\r\n\r\n```\r\nimport com.my.plugin.b.interfaces.MyInterface;\r\n```\r\n\r\nI can also use it in the IDE (IntelliJ) with all the code completion features. I was still having some troubles with the plugin not being installed on the server (could not find requirements) but this could be sorted out by adding this to the POM of PLUGIN A (inside the &lt;Import-Package&gt; tags of the &quot;confluence-maven-plugin&quot;:\r\n\r\n```\r\ncom.my.plugin.b.*;resolution:=&quot;optional&quot;,\r\n````\r\n\r\nBut when I&#39;m installing the now packaged version of PLUGIN A on my Confluence instance it gives me the following error in the logs when it comes to code execution:\r\n\r\n&gt;java.lang.NoClassDefFoundError: com/my/plugin/b/interfaces/MyInterface\r\n\r\n\r\nI&#39;ve no idea how I can fix this. I&#39;ve of course restarted the server and made a &quot;mvn clean package&quot; on the project.\r\n\r\nAlso I tried to use the scope &quot;compiled&quot; on the dependency pointing at PLUGIN B, but then the plugin doesn&#39;t do anything at all on the server and crashes with some spring related exceptions like:\r\n\r\n&gt;  getInstance Unable to create new reference LazyLoadedFilterReference{descriptor=com.my.plugin.b:rest-filter (null), filterConfig=com.atlassian.plugin.servlet.filter.PluginFilterConfig@82ha2js}\r\n\r\nProbably because it got problems with a lot of some other services/components that are coming out of PLUGIN B and are used in PLUGIN A by using spring scanner annotations. \r\n\r\nSo anybody got an idea of what to do, what to check or how I can solve this issue? \r\n\r\nSome more background information on the problem (explained without too much detail): In PLUGIN A the code is retrieving an object by a service that comes from a third party plugin (not in my responsibility, so no code access). In some cases the object returned by this service is an object of the type &quot;MyInterface&quot; because it is served by PLUGIN B. And I need to access this object and its method like defined in &quot;MyInterface&quot; for some calculations. I also tried creating an identical interface in PLUGIN A and cast it but all of this doesnt work.\r\n\r\nMaybe this information helps to find another solution for my problem.\r\n\r\nSo anybody got an idea of what to do, what to check or how I can solve this issue? \r\n\r\nThanks in advance!\r\n","title":"Using interface from another plugin (maven dependency) throws NoClassDefFoundError (Confluence Plugin)","body":"<p>I'm currently struggling with the following issue: I need to use an interface in my plugin (PLUGIN A) that comes from another plugin (PLUGIN B). I'm also the developer on PLUGIN B so I can make code changes (if needed).</p>\n<p>What I've done so far:</p>\n<ol>\n<li>I've added the packaged jar from PLUGIN B to my local maven repository by using this command:</li>\n</ol>\n<pre><code>mvn install:install-file -Dfile=plugin-b.jar \\\n    -DgroupId=com.my.plugin.b -DartifactId=plugin-b \\\n    -Dversion=1.0.0 \\\n    -Dpackaging=jar \n</code></pre>\n<ol start=\"2\">\n<li>Afterwards I've added it as a dependency to the POM of my PLUGIN A:</li>\n</ol>\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;com.my.plugin.b&lt;/groupId&gt;\n            &lt;artifactId&gt;plugin-b&lt;/artifactId&gt;\n            &lt;version&gt;1.0.0&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>This is also working so far as the plugin builds and I'm capable of doing an import of the interface:</p>\n<pre><code>import com.my.plugin.b.interfaces.MyInterface;\n</code></pre>\n<p>I can also use it in the IDE (IntelliJ) with all the code completion features. I was still having some troubles with the plugin not being installed on the server (could not find requirements) but this could be sorted out by adding this to the POM of PLUGIN A (inside the  tags of the &quot;confluence-maven-plugin&quot;:</p>\n<pre><code>com.my.plugin.b.*;resolution:=&quot;optional&quot;,\n</code></pre>\n<p>But when I'm installing the now packaged version of PLUGIN A on my Confluence instance it gives me the following error in the logs when it comes to code execution:</p>\n<blockquote>\n<p>java.lang.NoClassDefFoundError: com/my/plugin/b/interfaces/MyInterface</p>\n</blockquote>\n<p>I've no idea how I can fix this. I've of course restarted the server and made a &quot;mvn clean package&quot; on the project.</p>\n<p>Also I tried to use the scope &quot;compiled&quot; on the dependency pointing at PLUGIN B, but then the plugin doesn't do anything at all on the server and crashes with some spring related exceptions like:</p>\n<blockquote>\n<p>getInstance Unable to create new reference LazyLoadedFilterReference{descriptor=com.my.plugin.b:rest-filter (null), filterConfig=com.atlassian.plugin.servlet.filter.PluginFilterConfig@82ha2js}</p>\n</blockquote>\n<p>Probably because it got problems with a lot of some other services/components that are coming out of PLUGIN B and are used in PLUGIN A by using spring scanner annotations.</p>\n<p>So anybody got an idea of what to do, what to check or how I can solve this issue?</p>\n<p>Some more background information on the problem (explained without too much detail): In PLUGIN A the code is retrieving an object by a service that comes from a third party plugin (not in my responsibility, so no code access). In some cases the object returned by this service is an object of the type &quot;MyInterface&quot; because it is served by PLUGIN B. And I need to access this object and its method like defined in &quot;MyInterface&quot; for some calculations. I also tried creating an identical interface in PLUGIN A and cast it but all of this doesnt work.</p>\n<p>Maybe this information helps to find another solution for my problem.</p>\n<p>So anybody got an idea of what to do, what to check or how I can solve this issue?</p>\n<p>Thanks in advance!</p>\n"},{"tags":["java","tomcat","logging","single-sign-on","business-objects"],"comments":[{"owner":{"account_id":316385,"reputation":3253,"user_id":632537,"accept_rate":83,"display_name":"Isaac"},"score":0,"creation_date":1686923636,"post_id":76480943,"comment_id":134869369,"body_markdown":"You are going to get more engagement on this question [here](https://answers.sap.com/index.html) or [here](https://bobj-board.org/).","body":"You are going to get more engagement on this question <a href=\"https://answers.sap.com/index.html\" rel=\"nofollow noreferrer\">here</a> or <a href=\"https://bobj-board.org/\" rel=\"nofollow noreferrer\">here</a>."}],"owner":{"account_id":25975141,"reputation":1,"user_id":19689689,"display_name":"RACHID ABDELLAOUI"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686850533,"creation_date":1686820354,"question_id":76480943,"body_markdown":"Trying to set up SSO on SAP  BI 4.3 SP3 environment.\r\n\r\nThen get to the part where we have set up global.properties and entered the following lines in Tomcat settings:(java options)\r\n\r\n-`Djava.security.auth.login.config=c:\\windows\\bscLogin.conf`\r\n-`Djava.security.krb5.conf=c:\\windows\\krb5.ini`\r\n-`Djcsi.kerberos.debug=true`\r\n-`Dsun.security.krb5.debug=true`\r\n-`Djcsi.kerberos.maxpacketsize=0 `\r\n\r\nWhen we restart tomcat, stderr.log does not contain the message ‘Credentials Obtained’.\r\n\r\nAny idea what we could be doing wrong?\r\n\r\nThanks\r\n\r\nI checked all the files of configuration and they seem right","title":"The file stderr.log of SSO Tomcat not showing credentials obtained","body":"<p>Trying to set up SSO on SAP  BI 4.3 SP3 environment.</p>\n<p>Then get to the part where we have set up global.properties and entered the following lines in Tomcat settings:(java options)</p>\n<p>-<code>Djava.security.auth.login.config=c:\\windows\\bscLogin.conf</code>\n-<code>Djava.security.krb5.conf=c:\\windows\\krb5.ini</code>\n-<code>Djcsi.kerberos.debug=true</code>\n-<code>Dsun.security.krb5.debug=true</code>\n-<code>Djcsi.kerberos.maxpacketsize=0 </code></p>\n<p>When we restart tomcat, stderr.log does not contain the message ‘Credentials Obtained’.</p>\n<p>Any idea what we could be doing wrong?</p>\n<p>Thanks</p>\n<p>I checked all the files of configuration and they seem right</p>\n"},{"tags":["java","android","memory","memory-management","profiler"],"comments":[{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":0,"creation_date":1686865379,"post_id":76484177,"comment_id":134861032,"body_markdown":"Most likely the growing other memory part is caused by some code in one of the used native library. The memory profiler has problems to tag all memory allocated by those libraries correctly. Thus the native code most likely has a memory leak or you accumulate data in a structure you are not aware of.","body":"Most likely the growing other memory part is caused by some code in one of the used native library. The memory profiler has problems to tag all memory allocated by those libraries correctly. Thus the native code most likely has a memory leak or you accumulate data in a structure you are not aware of."},{"owner":{"account_id":13354497,"reputation":51,"user_id":15007032,"display_name":"zaxunobi"},"score":0,"creation_date":1686912586,"post_id":76484177,"comment_id":134867042,"body_markdown":"Is there anyway to find out what exactly is causing this? Could it be because of nested methods that garbage collectors does not clean?\nmethod1() calling inside at a certain point method2(), method 2 calling inside at a certain point method3() and so on...","body":"Is there anyway to find out what exactly is causing this? Could it be because of nested methods that garbage collectors does not clean? method1() calling inside at a certain point method2(), method 2 calling inside at a certain point method3() and so on..."},{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":0,"creation_date":1686913807,"post_id":76484177,"comment_id":134867270,"body_markdown":"Garbage collector only works on Java/Kotlin objects and data. On native level (.so files) there is no garbage collector, thus you have to manually everything you have allocated. If you forget something you have a memory leak.","body":"Garbage collector only works on Java/Kotlin objects and data. On native level (.so files) there is no garbage collector, thus you have to manually everything you have allocated. If you forget something you have a memory leak."},{"owner":{"account_id":13354497,"reputation":51,"user_id":15007032,"display_name":"zaxunobi"},"score":0,"creation_date":1686915013,"post_id":76484177,"comment_id":134867497,"body_markdown":"But I didn&#39;t write native code (C++) myself. I am using openCV that is in C++. Anyway, if that was the case then why I don&#39;t get memory leaks by calling in a loop a few Tesseract and openCV methods?","body":"But I didn&#39;t write native code (C++) myself. I am using openCV that is in C++. Anyway, if that was the case then why I don&#39;t get memory leaks by calling in a loop a few Tesseract and openCV methods?"},{"owner":{"account_id":13354497,"reputation":51,"user_id":15007032,"display_name":"zaxunobi"},"score":0,"creation_date":1686915056,"post_id":76484177,"comment_id":134867503,"body_markdown":"My only doubt at the moment would be the nested methods. Otherwise I have no clue what the issue could be and no idea how to find out.","body":"My only doubt at the moment would be the nested methods. Otherwise I have no clue what the issue could be and no idea how to find out."},{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":0,"creation_date":1686915395,"post_id":76484177,"comment_id":134867560,"body_markdown":"Based on what you have posted this question can not be answered. May be you use multiple threads and that causes the memory somewhere else, or you create a List or Map where you accidentally add data again and again. I would use you original app and then disable step by step smaller code parts until the memory grow is eliminated.","body":"Based on what you have posted this question can not be answered. May be you use multiple threads and that causes the memory somewhere else, or you create a List or Map where you accidentally add data again and again. I would use you original app and then disable step by step smaller code parts until the memory grow is eliminated."},{"owner":{"account_id":13354497,"reputation":51,"user_id":15007032,"display_name":"zaxunobi"},"score":0,"creation_date":1686917372,"post_id":76484177,"comment_id":134867963,"body_markdown":"I just realised you are right. The native code counter after a while gets very low and tagged as &quot;Others&quot;.","body":"I just realised you are right. The native code counter after a while gets very low and tagged as &quot;Others&quot;."}],"owner":{"account_id":13354497,"reputation":51,"user_id":15007032,"display_name":"zaxunobi"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":121,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686850362,"creation_date":1686850362,"question_id":76484177,"body_markdown":"I wrote a simple app that does three simple things: matches regex, perform OCR and use openCV to preprocess the image for a better OCR result.\r\nFor preprocessing the image I am using openCV.\r\nFor the OCR I am using Tesseract.\r\nI&#39;ve noticed that my app gets killed by the OS after 20 minutes or so, so I&#39;ve tried to launch the Android Profiler and monitor my app activity. \r\n\r\n[![enter image description here][1]][1]\r\n[![enter image description here][2]][2]\r\n[![enter image description here][3]][3]\r\n[![enter image description here][4]][4]\r\n\r\nAs you can see there is huge memory consumption tagged as &quot;Others&quot; that never goes down. As you can see there is also a relevant consumption tagged as &quot;Native&quot; but that fortunately goes up and down, I guess it depends mainly on when methods of openCV are called.\r\n\r\nI have tried the following code:\r\n\r\n    while(true){\r\n    Bitmap preprocessedImage = OpenCV.preprocessImageForOCR(imageName);\r\n    MyTesseract myTesseract = new MyTesseract(preprocessedImage);\r\n    myTesseract.getText();\r\n    }\r\n\r\nand, weirdly enough, the memory consumption is around 200-220 MB (mostly the &quot;Native&quot; code). So, I really don&#39;t understand what is happening.\r\n\r\n  [1]: https://i.stack.imgur.com/ph4of.png\r\n  [2]: https://i.stack.imgur.com/PWlR3.png\r\n  [3]: https://i.stack.imgur.com/OFSXG.png\r\n  [4]: https://i.stack.imgur.com/sodsh.png","title":"Android Profiler: huge memory consumption, tagged as &quot;Others&quot;, that doesn&#39;t get garbage collected","body":"<p>I wrote a simple app that does three simple things: matches regex, perform OCR and use openCV to preprocess the image for a better OCR result.\nFor preprocessing the image I am using openCV.\nFor the OCR I am using Tesseract.\nI've noticed that my app gets killed by the OS after 20 minutes or so, so I've tried to launch the Android Profiler and monitor my app activity.</p>\n<p><a href=\"https://i.stack.imgur.com/ph4of.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ph4of.png\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.stack.imgur.com/PWlR3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PWlR3.png\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.stack.imgur.com/OFSXG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OFSXG.png\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.stack.imgur.com/sodsh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sodsh.png\" alt=\"enter image description here\" /></a></p>\n<p>As you can see there is huge memory consumption tagged as &quot;Others&quot; that never goes down. As you can see there is also a relevant consumption tagged as &quot;Native&quot; but that fortunately goes up and down, I guess it depends mainly on when methods of openCV are called.</p>\n<p>I have tried the following code:</p>\n<pre><code>while(true){\nBitmap preprocessedImage = OpenCV.preprocessImageForOCR(imageName);\nMyTesseract myTesseract = new MyTesseract(preprocessedImage);\nmyTesseract.getText();\n}\n</code></pre>\n<p>and, weirdly enough, the memory consumption is around 200-220 MB (mostly the &quot;Native&quot; code). So, I really don't understand what is happening.</p>\n"},{"tags":["java","java-bytecode-asm"],"comments":[{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1579077497,"post_id":59740678,"comment_id":105642232,"body_markdown":"What do you mean with “which isn&#39;t defined classwide”?","body":"What do you mean with “which isn&#39;t defined classwide”?"},{"owner":{"account_id":16521301,"reputation":13,"user_id":11937394,"display_name":"EinWildesPanda"},"score":0,"creation_date":1579087522,"post_id":59740678,"comment_id":105647303,"body_markdown":"The source class (where this code snippet would be) doesn&#39;t extend any superclass, or not the superclass which would contain this method.","body":"The source class (where this code snippet would be) doesn&#39;t extend any superclass, or not the superclass which would contain this method."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1579112693,"post_id":59740678,"comment_id":105660839,"body_markdown":"ASM processes bytecode, not source code. Your source code snippet compiles to two different class files. The class file for the outer class does not have any relationship to the `onPacketReceiving` and hence, no information about it. The inner class does extend or implement `PacketAdapter` and contains an explicit declaration for the `onPacketReceiving` method. When you want to know whether `PacketAdapter` contains a declaration of `onPacketReceiving`, you have to check the class file for `PacketAdapter`.","body":"ASM processes bytecode, not source code. Your source code snippet compiles to two different class files. The class file for the outer class does not have any relationship to the <code>onPacketReceiving</code> and hence, no information about it. The inner class does extend or implement <code>PacketAdapter</code> and contains an explicit declaration for the <code>onPacketReceiving</code> method. When you want to know whether <code>PacketAdapter</code> contains a declaration of <code>onPacketReceiving</code>, you have to check the class file for <code>PacketAdapter</code>."},{"owner":{"account_id":16521301,"reputation":13,"user_id":11937394,"display_name":"EinWildesPanda"},"score":0,"creation_date":1579113756,"post_id":59740678,"comment_id":105661352,"body_markdown":"Thanks! That&#39;s the clue I needed!","body":"Thanks! That&#39;s the clue I needed!"}],"owner":{"account_id":16521301,"reputation":13,"user_id":11937394,"display_name":"EinWildesPanda"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":357,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1686849995,"creation_date":1579030838,"question_id":59740678,"body_markdown":"I have this code in a class I&#39;m reading with ASM:\r\n\r\n        ProtocolLibrary.getProtocolManager().addPacketListener((PacketListener)new PacketAdapter(instance, new PacketType[] { PacketType.Handshake.Client.SET_PROTOCOL }) {\r\n            public void onPacketReceiving(final PacketEvent event) {\r\n                // some code here\r\n            }\r\n        });\r\n\r\n And my question is: Is it possible to check if a method, like &quot;onPacketReceiving&quot;, is inherited from a superclass, which isn&#39;t defined classwide? (The code above is just an example, so the code should be flexible) I tried iterating through MethodInsnNodes and LocalVariableNodes and didn&#39;t find anything, that could help me.\r\n","title":"ASM -&gt; Checking if method is from abstract class","body":"<p>I have this code in a class I'm reading with ASM:</p>\n<pre><code>    ProtocolLibrary.getProtocolManager().addPacketListener((PacketListener)new PacketAdapter(instance, new PacketType[] { PacketType.Handshake.Client.SET_PROTOCOL }) {\n        public void onPacketReceiving(final PacketEvent event) {\n            // some code here\n        }\n    });\n</code></pre>\n<p>And my question is: Is it possible to check if a method, like &quot;onPacketReceiving&quot;, is inherited from a superclass, which isn't defined classwide? (The code above is just an example, so the code should be flexible) I tried iterating through MethodInsnNodes and LocalVariableNodes and didn't find anything, that could help me.</p>\n"},{"tags":["java","multithreading","exception","instance","program-entry-point"],"owner":{"account_id":18424937,"reputation":1,"user_id":13421496,"display_name":"Lucas Silva"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686849812,"creation_date":1686849812,"question_id":76484113,"body_markdown":"Na hora de executar o programa feito a selenium ele aparace a excess&#227;o Exception in thread &quot;main&quot; java.lang.NoSuchFieldError: INSTANCE\r\nException in thread &quot;main&quot; java.lang.NoSuchFieldError: INSTANCE\r\n\tat org.apache.http.conn.ssl.SSLConnectionSocketFactory.&lt;clinit&gt;(SSLConnectionSocketFactory.java:144)\r\n\tat org.openqa.selenium.remote.internal.HttpClientFactory.getClientConnectionManager(HttpClientFactory.java:71)\r\n\tat org.openqa.selenium.remote.internal.HttpClientFactory.&lt;init&gt;(HttpClientFactory.java:57)\r\n\tat org.openqa.selenium.remote.internal.HttpClientFactory.&lt;init&gt;(HttpClientFactory.java:60)\r\n\tat org.openqa.selenium.remote.internal.ApacheHttpClient$Factory.getDefaultHttpClientFactory(ApacheHttpClient.java:251)\r\n\tat org.openqa.selenium.remote.internal.ApacheHttpClient$Factory.&lt;init&gt;(ApacheHttpClient.java:228)\r\n\tat org.openqa.selenium.remote.HttpCommandExecutor.getDefaultClientFactory(HttpCommandExecutor.java:89)\r\n\tat org.openqa.selenium.remote.HttpCommandExecutor.&lt;init&gt;(HttpCommandExecutor.java:63)\r\n\tat org.openqa.selenium.remote.HttpCommandExecutor.&lt;init&gt;(HttpCommandExecutor.java:58)\r\n\tat org.openqa.selenium.firefox.internal.NewProfileExtensionConnection.start(NewProfileExtensionConnection.java:95)\r\n\tat org.openqa.selenium.firefox.FirefoxDriver.startClient(FirefoxDriver.java:275)\r\n\tat org.openqa.selenium.remote.RemoteWebDriver.&lt;init&gt;(RemoteWebDriver.java:116)\r\n\tat org.openqa.selenium.firefox.FirefoxDriver.&lt;init&gt;(FirefoxDriver.java:220)\r\n\tat org.openqa.selenium.firefox.FirefoxDriver.&lt;init&gt;(FirefoxDriver.java:215)\r\n\tat org.openqa.selenium.firefox.FirefoxDriver.&lt;init&gt;(FirefoxDriver.java:211)\r\n\tat org.openqa.selenium.firefox.FirefoxDriver.&lt;init&gt;(FirefoxDriver.java:124)\r\n\tat br.gov.pa.tj.selenium.LancarNavegador.main(LancarNavegador.java:13)\r\n\r\n\r\nEu espero corrigir o erro e que o programa rode","title":"Exception in thread &quot;main&quot; java.lang.NoSuchFieldError: INSTANCE selenium java","body":"<p>Na hora de executar o programa feito a selenium ele aparace a excessão Exception in thread &quot;main&quot; java.lang.NoSuchFieldError: INSTANCE\nException in thread &quot;main&quot; java.lang.NoSuchFieldError: INSTANCE\nat org.apache.http.conn.ssl.SSLConnectionSocketFactory.(SSLConnectionSocketFactory.java:144)\nat org.openqa.selenium.remote.internal.HttpClientFactory.getClientConnectionManager(HttpClientFactory.java:71)\nat org.openqa.selenium.remote.internal.HttpClientFactory.(HttpClientFactory.java:57)\nat org.openqa.selenium.remote.internal.HttpClientFactory.(HttpClientFactory.java:60)\nat org.openqa.selenium.remote.internal.ApacheHttpClient$Factory.getDefaultHttpClientFactory(ApacheHttpClient.java:251)\nat org.openqa.selenium.remote.internal.ApacheHttpClient$Factory.(ApacheHttpClient.java:228)\nat org.openqa.selenium.remote.HttpCommandExecutor.getDefaultClientFactory(HttpCommandExecutor.java:89)\nat org.openqa.selenium.remote.HttpCommandExecutor.(HttpCommandExecutor.java:63)\nat org.openqa.selenium.remote.HttpCommandExecutor.(HttpCommandExecutor.java:58)\nat org.openqa.selenium.firefox.internal.NewProfileExtensionConnection.start(NewProfileExtensionConnection.java:95)\nat org.openqa.selenium.firefox.FirefoxDriver.startClient(FirefoxDriver.java:275)\nat org.openqa.selenium.remote.RemoteWebDriver.(RemoteWebDriver.java:116)\nat org.openqa.selenium.firefox.FirefoxDriver.(FirefoxDriver.java:220)\nat org.openqa.selenium.firefox.FirefoxDriver.(FirefoxDriver.java:215)\nat org.openqa.selenium.firefox.FirefoxDriver.(FirefoxDriver.java:211)\nat org.openqa.selenium.firefox.FirefoxDriver.(FirefoxDriver.java:124)\nat br.gov.pa.tj.selenium.LancarNavegador.main(LancarNavegador.java:13)</p>\n<p>Eu espero corrigir o erro e que o programa rode</p>\n"},{"tags":["java","kotlin"],"owner":{"account_id":28828702,"reputation":1,"user_id":22079677,"display_name":"JohnDTA"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686849517,"creation_date":1686849517,"question_id":76484079,"body_markdown":"I&#39;m trying to create a feedback form with android studio I&#39;m quite a beginner but with android studio to make the simple form look it&#39;s not that hard what I need now is to send a &#39;feedback form&#39; to my telegram bot so when a user sends feedback to us, it should be sent to my telegrambot\r\n\r\n**values.xml**\r\n\r\n```\r\n&lt;string name=&quot;feedback&quot;&gt;&lt;/string&gt;\r\n```\r\n\r\ni search on internet very deep got this code\r\n\r\n```\r\nvar urlString = &quot;https://api.telegram.org/bot%s/sendMessage?chat_id=%s&amp;text=%s&quot;\r\nval apiToken = &quot;my_bot_api_token&quot;\r\nval chatId = &quot;@my_channel_name&quot;\r\nval text = &quot;Hello world!&quot;\r\nurlString = String.format(urlString, apiToken, chatId, text)\r\nval url = URL(urlString)\r\nval conn = url.openConnection()\r\nval inputStream = BufferedInputStream(conn.getInputStream())\r\nval br = BufferedReader(InputStreamReader(inputStream))\r\nval response = br.readText()\r\n// Do what you want with response\r\n```\r\n\r\nBut since I&#39;m a newbie in java/kotlin I can&#39;t figure out what functions to change\r\n\r\nAny help would be great","title":"How to send &quot;feedback&quot; to telegrambot using JAVA/Kotlin","body":"<p>I'm trying to create a feedback form with android studio I'm quite a beginner but with android studio to make the simple form look it's not that hard what I need now is to send a 'feedback form' to my telegram bot so when a user sends feedback to us, it should be sent to my telegrambot</p>\n<p><strong>values.xml</strong></p>\n<pre><code>&lt;string name=&quot;feedback&quot;&gt;&lt;/string&gt;\n</code></pre>\n<p>i search on internet very deep got this code</p>\n<pre><code>var urlString = &quot;https://api.telegram.org/bot%s/sendMessage?chat_id=%s&amp;text=%s&quot;\nval apiToken = &quot;my_bot_api_token&quot;\nval chatId = &quot;@my_channel_name&quot;\nval text = &quot;Hello world!&quot;\nurlString = String.format(urlString, apiToken, chatId, text)\nval url = URL(urlString)\nval conn = url.openConnection()\nval inputStream = BufferedInputStream(conn.getInputStream())\nval br = BufferedReader(InputStreamReader(inputStream))\nval response = br.readText()\n// Do what you want with response\n</code></pre>\n<p>But since I'm a newbie in java/kotlin I can't figure out what functions to change</p>\n<p>Any help would be great</p>\n"},{"tags":["java","spring","spring-boot","spring-security"],"comments":[{"owner":{"account_id":28679067,"reputation":23,"user_id":21960620,"display_name":"solanke57"},"score":0,"creation_date":1686851799,"post_id":76484037,"comment_id":134858588,"body_markdown":"&quot;I changed @WebMvcTest(JobOfferController.class) to\n@WebMvcTest @Import(JobOfferController.class)\nand it works. Could someone explain why this is the case?&quot;","body":"&quot;I changed @WebMvcTest(JobOfferController.class) to @WebMvcTest @Import(JobOfferController.class) and it works. Could someone explain why this is the case?&quot;"}],"owner":{"account_id":28679067,"reputation":23,"user_id":21960620,"display_name":"solanke57"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686849204,"creation_date":1686849204,"question_id":76484037,"body_markdown":"I have configured Spring Security, and when I try to test the controller, it doesn&#39;t work because, for example, when testing the POST method, it returns a 404 error code (not even 403 or 401).\r\n\r\nSecurityConfig.class\r\n\r\n```\r\n@Configuration\r\n@EnableWebSecurity\r\n@RequiredArgsConstructor\r\npublic class SecurityConfig {\r\n\r\n    private final JpaUserDetailsService jpaUserDetailsService;\r\n\r\n    @Bean\r\n    SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\r\n        return http\r\n                .authorizeHttpRequests(authorize -&gt; authorize\r\n                        .requestMatchers(&quot;/register&quot;).permitAll()\r\n                        .requestMatchers(HttpMethod.GET,&quot;/offers/**&quot;, &quot;/companies/**&quot;).permitAll()\r\n                        .anyRequest().authenticated())\r\n                .userDetailsService(jpaUserDetailsService)\r\n                .formLogin(Customizer.withDefaults())\r\n                .build();\r\n    }\r\n\r\n    @Bean\r\n    PasswordEncoder passwordEncoder() {\r\n        return new BCryptPasswordEncoder();\r\n    }\r\n}\r\n```\r\n\r\nJpaUserDetailsService.class\r\n\r\n\r\n```\r\n@Service\r\n@RequiredArgsConstructor\r\npublic class JpaUserDetailsService implements UserDetailsService {\r\n\r\n    private final AppUserRepository appUserRepository;\r\n\r\n    @Override\r\n    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\r\n        return appUserRepository.findByUsername(username)\r\n                .map(SecurityAppUser::new)\r\n                .orElseThrow(() -&gt; new UsernameNotFoundException(&quot;Username not found: &quot; + username));\r\n    }\r\n}\r\n```\r\n\r\nJobOfferController.class\r\n```\r\n@RestController\r\n@RequiredArgsConstructor\r\npublic class JobOfferController {\r\n\r\n    public static final String OFFER_PATH = &quot;/offers&quot;;\r\n    public static final String OFFER_PATH_ID = OFFER_PATH + &quot;/{offerId}&quot;;\r\n\r\n    private final JobOfferService jobOfferService;\r\n\r\n    @PostMapping(OFFER_PATH)\r\n    public ResponseEntity&lt;Void&gt; createOffer(@RequestBody JobOfferDto offerDto) {\r\n\r\n        JobOfferDto savedOffer = jobOfferService.saveNewOffer(offerDto);\r\n\r\n        HttpHeaders headers = new HttpHeaders();\r\n        headers.add(&quot;Location&quot;, OFFER_PATH + &quot;/&quot; + savedOffer.getId().toString());\r\n\r\n        return new ResponseEntity&lt;&gt;(headers, HttpStatus.CREATED);\r\n    }\r\n```\r\n\r\nJobOfferControllerTest\r\n\r\n```\r\n@WebMvcTest(JobOfferController.class)\r\n@ContextConfiguration(classes = SecurityConfig.class)\r\nclass JobOfferControllerTest {\r\n\r\n    @MockBean\r\n    private JobOfferService jobOfferService;\r\n\r\n    private MockMvc mockMvc;\r\n\r\n    @Autowired\r\n    private WebApplicationContext context;\r\n\r\n    @MockBean\r\n    private JpaUserDetailsService jpaUserDetailsService;\r\n\r\n    @Autowired\r\n    private ObjectMapper objectMapper;\r\n\r\n    @BeforeEach\r\n    void setUp() {\r\n        mockMvc = MockMvcBuilders\r\n                .webAppContextSetup(context)\r\n                .apply(springSecurity())\r\n                .build();\r\n    }\r\n\r\n    @Test\r\n    void shouldCreateOffer() throws Exception {\r\n        JobOfferDto offerDto = createTestOffer(null, &quot;test&quot;, &quot;test&quot;, &quot;test&quot;, &quot;test&quot;);\r\n        JobOfferDto savedDto = offerDto;\r\n        savedDto.setId(1L);\r\n\r\n        given(jobOfferService.saveNewOffer(any(JobOfferDto.class))).willReturn(savedDto);\r\n\r\n        mockMvc.perform(post(JobOfferController.OFFER_PATH)\r\n                        .with(user(&quot;user&quot;).password(&quot;password&quot;))\r\n                        .with(csrf())\r\n                .accept(MediaType.APPLICATION_JSON)\r\n                .contentType(MediaType.APPLICATION_JSON)\r\n                .content(objectMapper.writeValueAsString(offerDto)))\r\n                .andExpect(status().isCreated())\r\n                .andExpect(header().exists(&quot;Location&quot;));\r\n    }\r\n```\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nI tried to exclude security from this test, but I want to have it. This test method returns 404 not found and I have no idea why. \r\n\r\njava.lang.AssertionError: Status expected:&lt;201&gt; but was:&lt;404&gt;\r\nExpected :201\r\nActual   :404","title":"Spring Boot controller unit test is not working with security. When POST, returning 404 not found","body":"<p>I have configured Spring Security, and when I try to test the controller, it doesn't work because, for example, when testing the POST method, it returns a 404 error code (not even 403 or 401).</p>\n<p>SecurityConfig.class</p>\n<pre><code>@Configuration\n@EnableWebSecurity\n@RequiredArgsConstructor\npublic class SecurityConfig {\n\n    private final JpaUserDetailsService jpaUserDetailsService;\n\n    @Bean\n    SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n        return http\n                .authorizeHttpRequests(authorize -&gt; authorize\n                        .requestMatchers(&quot;/register&quot;).permitAll()\n                        .requestMatchers(HttpMethod.GET,&quot;/offers/**&quot;, &quot;/companies/**&quot;).permitAll()\n                        .anyRequest().authenticated())\n                .userDetailsService(jpaUserDetailsService)\n                .formLogin(Customizer.withDefaults())\n                .build();\n    }\n\n    @Bean\n    PasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder();\n    }\n}\n</code></pre>\n<p>JpaUserDetailsService.class</p>\n<pre><code>@Service\n@RequiredArgsConstructor\npublic class JpaUserDetailsService implements UserDetailsService {\n\n    private final AppUserRepository appUserRepository;\n\n    @Override\n    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\n        return appUserRepository.findByUsername(username)\n                .map(SecurityAppUser::new)\n                .orElseThrow(() -&gt; new UsernameNotFoundException(&quot;Username not found: &quot; + username));\n    }\n}\n</code></pre>\n<p>JobOfferController.class</p>\n<pre><code>@RestController\n@RequiredArgsConstructor\npublic class JobOfferController {\n\n    public static final String OFFER_PATH = &quot;/offers&quot;;\n    public static final String OFFER_PATH_ID = OFFER_PATH + &quot;/{offerId}&quot;;\n\n    private final JobOfferService jobOfferService;\n\n    @PostMapping(OFFER_PATH)\n    public ResponseEntity&lt;Void&gt; createOffer(@RequestBody JobOfferDto offerDto) {\n\n        JobOfferDto savedOffer = jobOfferService.saveNewOffer(offerDto);\n\n        HttpHeaders headers = new HttpHeaders();\n        headers.add(&quot;Location&quot;, OFFER_PATH + &quot;/&quot; + savedOffer.getId().toString());\n\n        return new ResponseEntity&lt;&gt;(headers, HttpStatus.CREATED);\n    }\n</code></pre>\n<p>JobOfferControllerTest</p>\n<pre><code>@WebMvcTest(JobOfferController.class)\n@ContextConfiguration(classes = SecurityConfig.class)\nclass JobOfferControllerTest {\n\n    @MockBean\n    private JobOfferService jobOfferService;\n\n    private MockMvc mockMvc;\n\n    @Autowired\n    private WebApplicationContext context;\n\n    @MockBean\n    private JpaUserDetailsService jpaUserDetailsService;\n\n    @Autowired\n    private ObjectMapper objectMapper;\n\n    @BeforeEach\n    void setUp() {\n        mockMvc = MockMvcBuilders\n                .webAppContextSetup(context)\n                .apply(springSecurity())\n                .build();\n    }\n\n    @Test\n    void shouldCreateOffer() throws Exception {\n        JobOfferDto offerDto = createTestOffer(null, &quot;test&quot;, &quot;test&quot;, &quot;test&quot;, &quot;test&quot;);\n        JobOfferDto savedDto = offerDto;\n        savedDto.setId(1L);\n\n        given(jobOfferService.saveNewOffer(any(JobOfferDto.class))).willReturn(savedDto);\n\n        mockMvc.perform(post(JobOfferController.OFFER_PATH)\n                        .with(user(&quot;user&quot;).password(&quot;password&quot;))\n                        .with(csrf())\n                .accept(MediaType.APPLICATION_JSON)\n                .contentType(MediaType.APPLICATION_JSON)\n                .content(objectMapper.writeValueAsString(offerDto)))\n                .andExpect(status().isCreated())\n                .andExpect(header().exists(&quot;Location&quot;));\n    }\n</code></pre>\n<p>I tried to exclude security from this test, but I want to have it. This test method returns 404 not found and I have no idea why.</p>\n<p>java.lang.AssertionError: Status expected:&lt;201&gt; but was:&lt;404&gt;\nExpected :201\nActual   :404</p>\n"},{"tags":["java","spring","google-cloud-pubsub"],"answers":[{"tags":[],"owner":{"account_id":3151721,"reputation":377,"user_id":2665035,"accept_rate":67,"display_name":"killernerd"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1615219253,"creation_date":1615219253,"answer_id":66533100,"question_id":66494681,"body_markdown":"Found the problem after creating a spring boot project from scratch (main project is normal spring). Noticed in the debug output that it was auto starting the service activator bean and some other things like actually subscribing to the channels which it wasn&#39;t doing in the main project.\r\n\r\nAfter a quick google the solution was simple, had to add\r\n\r\n    @EnableIntegration\r\n\r\nannotation at class level and the messages started coming in.","title":"pubsub messages not being pulled with poller and serviceactivator","body":"<p>Found the problem after creating a spring boot project from scratch (main project is normal spring). Noticed in the debug output that it was auto starting the service activator bean and some other things like actually subscribing to the channels which it wasn't doing in the main project.</p>\n<p>After a quick google the solution was simple, had to add</p>\n<pre><code>@EnableIntegration\n</code></pre>\n<p>annotation at class level and the messages started coming in.</p>\n"}],"owner":{"account_id":3151721,"reputation":377,"user_id":2665035,"accept_rate":67,"display_name":"killernerd"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":496,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":66533100,"answer_count":1,"score":0,"last_activity_date":1686848941,"creation_date":1614955847,"question_id":66494681,"body_markdown":"I&#39;ve been trying to get pubsub to work within a spring application. To get up and running I&#39;ve been reading through tutorials and documentation like [this][1]\r\n\r\nI can get things to build and start but if I go through cloud console to send a message to the test subscription it never arrives.\r\n\r\nThis is what my code looks like right now:\r\n\r\n    @Configuration\r\n    @Import({GcpPubSubAutoConfiguration.class})\r\n    public class PubSubConfigurator {\r\n\r\n    @Bean\r\n    public GcpProjectIdProvider projectIdProvider(){\r\n        return () -&gt; &quot;project-id&quot;;\r\n    }\r\n\r\n    @Bean\r\n    public CredentialsProvider credentialsProvider(){\r\n        return GoogleCredentials::getApplicationDefault;\r\n    }\r\n\r\n    @Bean\r\n    public MessageChannel inputMessageChannel() {\r\n       return new PublishSubscribeChannel();\r\n    }\r\n\r\n    @Bean\r\n    @InboundChannelAdapter(channel = &quot;inputMessageChannel&quot;, poller = @Poller(fixedDelay = &quot;5&quot;))\r\n    public MessageSource&lt;Object&gt; pubsubAdapter(PubSubTemplate pubSubTemplate) {\r\n        PubSubMessageSource messageSource = new PubSubMessageSource(pubSubTemplate,  &quot;tst-sandbox&quot;);\r\n        messageSource.setAckMode(AckMode.MANUAL);\r\n        messageSource.setPayloadType(String.class);\r\n        messageSource.setBlockOnPull(false);\r\n        messageSource.setMaxFetchSize(10);\r\n        //pubSubTemplate.pull(&quot;tst-sandbox&quot;, 10, true);\r\n        return messageSource;\r\n    }\r\n\r\n    // Define what happens to the messages arriving in the message channel.\r\n    @ServiceActivator(inputChannel = &quot;inputMessageChannel&quot;)\r\n    public void messageReceiver(\r\n            String payload,\r\n            @Header(GcpPubSubHeaders.ORIGINAL_MESSAGE) BasicAcknowledgeablePubsubMessage message) {\r\n        System.out.println(&quot;Message arrived via an inbound channel adapter from sub-one! Payload: &quot; + payload);\r\n        message.ack();\r\n    }\r\n    }\r\n\r\nMy thinking was that the poller annotation would start a poller to run every so often to check for messages and send them to the method annotated with service activator but this is clearly not the case as it is never hit.\r\n\r\nInterestingly enough if I put a breakpoint right before &quot;return messageSource&quot; and check the result of the template.pull call the messages ARE returned so it is seemingly not an issue with the connection itself.\r\n\r\nWhat am I missing here? Tutorials and documentation aren&#39;t helping much at this point as they all use pretty much the same bit of tutorial code like above...\r\n\r\nI have tried variations of the above code like creating the adapter instead of the messagesource like so:\r\n\r\n    @Bean\r\n    public PubSubInboundChannelAdapter inboundChannelAdapter(\r\n            @Qualifier(&quot;inputMessageChannel&quot;) MessageChannel messageChannel,\r\n            PubSubTemplate pubSubTemplate) {\r\n        PubSubInboundChannelAdapter adapter =\r\n                new PubSubInboundChannelAdapter(pubSubTemplate, &quot;tst-sandbox&quot;);\r\n        adapter.setOutputChannel(messageChannel);\r\n        adapter.setAckMode(AckMode.MANUAL);\r\n        adapter.setPayloadType(String.class);\r\n        return adapter;\r\n    }\r\n\r\nto no avail. Any suggestions are welcome.\r\n\r\n\r\n  [1]: https://cloud.spring.io/spring-cloud-gcp/multi/multi__spring_integration.html","title":"pubsub messages not being pulled with poller and serviceactivator","body":"<p>I've been trying to get pubsub to work within a spring application. To get up and running I've been reading through tutorials and documentation like <a href=\"https://cloud.spring.io/spring-cloud-gcp/multi/multi__spring_integration.html\" rel=\"nofollow noreferrer\">this</a></p>\n<p>I can get things to build and start but if I go through cloud console to send a message to the test subscription it never arrives.</p>\n<p>This is what my code looks like right now:</p>\n<pre><code>@Configuration\n@Import({GcpPubSubAutoConfiguration.class})\npublic class PubSubConfigurator {\n\n@Bean\npublic GcpProjectIdProvider projectIdProvider(){\n    return () -&gt; &quot;project-id&quot;;\n}\n\n@Bean\npublic CredentialsProvider credentialsProvider(){\n    return GoogleCredentials::getApplicationDefault;\n}\n\n@Bean\npublic MessageChannel inputMessageChannel() {\n   return new PublishSubscribeChannel();\n}\n\n@Bean\n@InboundChannelAdapter(channel = &quot;inputMessageChannel&quot;, poller = @Poller(fixedDelay = &quot;5&quot;))\npublic MessageSource&lt;Object&gt; pubsubAdapter(PubSubTemplate pubSubTemplate) {\n    PubSubMessageSource messageSource = new PubSubMessageSource(pubSubTemplate,  &quot;tst-sandbox&quot;);\n    messageSource.setAckMode(AckMode.MANUAL);\n    messageSource.setPayloadType(String.class);\n    messageSource.setBlockOnPull(false);\n    messageSource.setMaxFetchSize(10);\n    //pubSubTemplate.pull(&quot;tst-sandbox&quot;, 10, true);\n    return messageSource;\n}\n\n// Define what happens to the messages arriving in the message channel.\n@ServiceActivator(inputChannel = &quot;inputMessageChannel&quot;)\npublic void messageReceiver(\n        String payload,\n        @Header(GcpPubSubHeaders.ORIGINAL_MESSAGE) BasicAcknowledgeablePubsubMessage message) {\n    System.out.println(&quot;Message arrived via an inbound channel adapter from sub-one! Payload: &quot; + payload);\n    message.ack();\n}\n}\n</code></pre>\n<p>My thinking was that the poller annotation would start a poller to run every so often to check for messages and send them to the method annotated with service activator but this is clearly not the case as it is never hit.</p>\n<p>Interestingly enough if I put a breakpoint right before &quot;return messageSource&quot; and check the result of the template.pull call the messages ARE returned so it is seemingly not an issue with the connection itself.</p>\n<p>What am I missing here? Tutorials and documentation aren't helping much at this point as they all use pretty much the same bit of tutorial code like above...</p>\n<p>I have tried variations of the above code like creating the adapter instead of the messagesource like so:</p>\n<pre><code>@Bean\npublic PubSubInboundChannelAdapter inboundChannelAdapter(\n        @Qualifier(&quot;inputMessageChannel&quot;) MessageChannel messageChannel,\n        PubSubTemplate pubSubTemplate) {\n    PubSubInboundChannelAdapter adapter =\n            new PubSubInboundChannelAdapter(pubSubTemplate, &quot;tst-sandbox&quot;);\n    adapter.setOutputChannel(messageChannel);\n    adapter.setAckMode(AckMode.MANUAL);\n    adapter.setPayloadType(String.class);\n    return adapter;\n}\n</code></pre>\n<p>to no avail. Any suggestions are welcome.</p>\n"},{"tags":["java","hibernate","jpa","spring-data-jpa","spring-transactions"],"owner":{"account_id":422777,"reputation":841,"user_id":5328820,"display_name":"Burton"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686848770,"creation_date":1686848770,"question_id":76483980,"body_markdown":"I have a email queue send job that runs every minute, but am running into `PessimisticLockException` issues sometimes when jobs overlap (i.e. a job takes more than 60 seconds to complete). I am able to reproduce this in a test, but I can&#39;t seem to solve the issue. The general logic is below. \r\n\r\nClearly, in my attempt to use Transaction `Propagation.REQUIRES_NEW` for saving entities &quot;immediately&quot; to the database, I am causing issues elsewhere, but I just can&#39;t seem to figure out the correct logic on this.\r\n\r\nIt&#39;s worth noting that if I &quot;detach&quot; each EmailQueue entity from inside the &quot;send email loop&quot;, then I avoid the `PessimisticLockException`. However when I do this, 3 emails are sent instead of 2 (the `emailQueueService.findQueued(onOrBefore)` correctly returns 1 email on the first job, but returns 2 emails on the overlapping job - erroneously returning the previous &quot;SENT&quot; email)\r\n\r\n\r\n```\r\nJAVA\r\npublic void sendQueuedEmails(Instant onOrBefore) {\r\n\r\n    // Fetches EmailQueue.State = &quot;QUEUED&quot; and EmailQueue.ScheduledSendDateTime &lt;= onOrBefore\r\n    // !! ISSUE :: On overlapping job, this also returns emails marked &quot;SENT&quot;\r\n    List&lt;EmailQueue&gt; emailQueueList = emailQueueService.findQueued(onOrBefore);\r\n\r\n    // Change EmailQueue.State = &quot;SENDING&quot; in separate @Transaction so they don&#39;t get picked up again by overlapping job\r\n    // Uses @Transactional(propagation = Propagation.REQUIRES_NEW)\r\n    emailQueueService.markEmailQueuesAsSending(emailQueueList);\r\n\r\n    // Send email loop\r\n    for (EmailQueue emailQueue : emailQueueList) {\r\n\r\n        // Send EmailQueue\r\n        // Changes EmailQueue.State = &quot;SENT&quot; (no database calls made in this method)\r\n        appUserEmailSender.send(emailQueue);\r\n\r\n        // Save EmailQueue\r\n        // Uses @Transactional(propagation = Propagation.REQUIRES_NEW)\r\n        emailQueueService.saveAndCommit(emailQueue);\r\n\r\n        // !! ISSUE :: Without this statement a PessimisticLockException will be thrown when calling &quot;markEmailQueuesAsSending()&quot; on overlapping job\r\n        // emailQueueService.detach(emailQueue);\r\n    }\r\n}\r\n\r\n```\r\n\r\nAnd my test method looks like this:\r\n```\r\n@Test\r\nvoid sendQueuedEmails_overlapping_jobs() throws Exception {\r\n\r\n    // Load 2 Emails, 1 scheduled to be sent at 1am, 1 scheduled to be sent at 2am\r\n    helper.loadData(&quot;com/afs/core/service/email/EmailQueueSenderImplTest.xml&quot;, &quot;db/testData.dtd&quot;, DatabaseOperation.INSERT);\r\n\r\n    Instant scheduledSendDateTime_1 = // 1 am\r\n    Instant scheduledSendDateTime_2 = // 2 am\r\n\r\n    // half second delay each time myMailSenderMock.send() is called\r\n    doAnswer(AdditionalAnswers.answersWithDelay(500, invocation -&gt; null))\r\n            .when(myMailSenderMock).send();\r\n\r\n    // When calling overlapping sendQueuedEmails\r\n    emailQueueSender.sendQueuedEmails(scheduledSendDateTime_1);\r\n    emailQueueSender.sendQueuedEmails(scheduledSendDateTime_2);\r\n\r\n    // Then 2 emails should be sent successfully\r\n    Mockito.verify(myMailSenderMock, Mockito.times(2)).send();\r\n}\r\n```\r\n\r\nIn case this helps, my @Transactional methods are:\r\n```\r\n@Transactional(readOnly = false, propagation = Propagation.REQUIRES_NEW)\r\npublic void markEmailQueuesAsSending(List&lt;EmailQueue&gt; emailQueueList) {\r\n    for (EmailQueue emailQueue : emailQueueList) {\r\n        emailQueue.setEmailQueueState(EmailQueueState.SENDING);\r\n        this.save(emailQueue);\r\n    }\r\n    this.flush();\r\n}\r\n\r\n@Transactional(readOnly = false, propagation = Propagation.REQUIRES_NEW)\r\npublic void saveAndCommit(EmailQueue instance) {\r\n    save(instance);\r\n    this.flush();\r\n}\r\n```\r\n","title":"How to avoid PessimisticLockException for overlapping &quot;Email Queue Send&quot; jobs using Spring @Transactional","body":"<p>I have a email queue send job that runs every minute, but am running into <code>PessimisticLockException</code> issues sometimes when jobs overlap (i.e. a job takes more than 60 seconds to complete). I am able to reproduce this in a test, but I can't seem to solve the issue. The general logic is below.</p>\n<p>Clearly, in my attempt to use Transaction <code>Propagation.REQUIRES_NEW</code> for saving entities &quot;immediately&quot; to the database, I am causing issues elsewhere, but I just can't seem to figure out the correct logic on this.</p>\n<p>It's worth noting that if I &quot;detach&quot; each EmailQueue entity from inside the &quot;send email loop&quot;, then I avoid the <code>PessimisticLockException</code>. However when I do this, 3 emails are sent instead of 2 (the <code>emailQueueService.findQueued(onOrBefore)</code> correctly returns 1 email on the first job, but returns 2 emails on the overlapping job - erroneously returning the previous &quot;SENT&quot; email)</p>\n<pre><code>JAVA\npublic void sendQueuedEmails(Instant onOrBefore) {\n\n    // Fetches EmailQueue.State = &quot;QUEUED&quot; and EmailQueue.ScheduledSendDateTime &lt;= onOrBefore\n    // !! ISSUE :: On overlapping job, this also returns emails marked &quot;SENT&quot;\n    List&lt;EmailQueue&gt; emailQueueList = emailQueueService.findQueued(onOrBefore);\n\n    // Change EmailQueue.State = &quot;SENDING&quot; in separate @Transaction so they don't get picked up again by overlapping job\n    // Uses @Transactional(propagation = Propagation.REQUIRES_NEW)\n    emailQueueService.markEmailQueuesAsSending(emailQueueList);\n\n    // Send email loop\n    for (EmailQueue emailQueue : emailQueueList) {\n\n        // Send EmailQueue\n        // Changes EmailQueue.State = &quot;SENT&quot; (no database calls made in this method)\n        appUserEmailSender.send(emailQueue);\n\n        // Save EmailQueue\n        // Uses @Transactional(propagation = Propagation.REQUIRES_NEW)\n        emailQueueService.saveAndCommit(emailQueue);\n\n        // !! ISSUE :: Without this statement a PessimisticLockException will be thrown when calling &quot;markEmailQueuesAsSending()&quot; on overlapping job\n        // emailQueueService.detach(emailQueue);\n    }\n}\n\n</code></pre>\n<p>And my test method looks like this:</p>\n<pre><code>@Test\nvoid sendQueuedEmails_overlapping_jobs() throws Exception {\n\n    // Load 2 Emails, 1 scheduled to be sent at 1am, 1 scheduled to be sent at 2am\n    helper.loadData(&quot;com/afs/core/service/email/EmailQueueSenderImplTest.xml&quot;, &quot;db/testData.dtd&quot;, DatabaseOperation.INSERT);\n\n    Instant scheduledSendDateTime_1 = // 1 am\n    Instant scheduledSendDateTime_2 = // 2 am\n\n    // half second delay each time myMailSenderMock.send() is called\n    doAnswer(AdditionalAnswers.answersWithDelay(500, invocation -&gt; null))\n            .when(myMailSenderMock).send();\n\n    // When calling overlapping sendQueuedEmails\n    emailQueueSender.sendQueuedEmails(scheduledSendDateTime_1);\n    emailQueueSender.sendQueuedEmails(scheduledSendDateTime_2);\n\n    // Then 2 emails should be sent successfully\n    Mockito.verify(myMailSenderMock, Mockito.times(2)).send();\n}\n</code></pre>\n<p>In case this helps, my @Transactional methods are:</p>\n<pre><code>@Transactional(readOnly = false, propagation = Propagation.REQUIRES_NEW)\npublic void markEmailQueuesAsSending(List&lt;EmailQueue&gt; emailQueueList) {\n    for (EmailQueue emailQueue : emailQueueList) {\n        emailQueue.setEmailQueueState(EmailQueueState.SENDING);\n        this.save(emailQueue);\n    }\n    this.flush();\n}\n\n@Transactional(readOnly = false, propagation = Propagation.REQUIRES_NEW)\npublic void saveAndCommit(EmailQueue instance) {\n    save(instance);\n    this.flush();\n}\n</code></pre>\n"},{"tags":["java","json"],"comments":[{"owner":{"account_id":238684,"reputation":22543,"user_id":507738,"accept_rate":71,"display_name":"MC Emperor"},"score":0,"creation_date":1686850785,"post_id":76483944,"comment_id":134858404,"body_markdown":"Maybe you could use JsonPath for that...","body":"Maybe you could use JsonPath for that..."},{"owner":{"account_id":13009011,"reputation":1105,"user_id":9402689,"display_name":"Raymond Choi"},"score":0,"creation_date":1686881961,"post_id":76483944,"comment_id":134862550,"body_markdown":"You may try [Josson](https://github.com/octomix/josson).  To look for the flattened keys of `x/y/yCol1`, use _Josson_ function `getNode` with this statement `map(x.map(y.map(yCol1))).flatten(&#39;/&#39;).keys().prepend(&#39;/&#39;)`.","body":"You may try <a href=\"https://github.com/octomix/josson\" rel=\"nofollow noreferrer\">Josson</a>.  To look for the flattened keys of <code>x&#47;y&#47;yCol1</code>, use <i>Josson</i> function <code>getNode</code> with this statement <code>map(x.map(y.map(yCol1))).flatten(&#39;&#47;&#39;).keys().prepend(&#39;&#47;&#39;)</code>."}],"owner":{"display_name":"user18292068"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686848571,"creation_date":1686848363,"question_id":76483944,"body_markdown":"I&#39;m using Java and Jaxson primarily.\r\n\r\nAssume a json structure such as\r\n\r\n    {\r\n        &quot;a&quot; : &quot;aVal&quot;,\r\n        &quot;b&quot; : &quot;bVal&quot;,\r\n        &quot;x&quot; : [{\r\n            &quot;xCol1&quot; :&quot;x1_1&quot;,\r\n            &quot;xCol2&quot; :&quot;x1_2&quot;,\r\n            &quot;y&quot; : [{\r\n                &quot;yCol1&quot; : &quot;x1_y1_1&quot;,\r\n                &quot;yCol2&quot; : &quot;x1_y1_2&quot;,\r\n            },{\r\n                &quot;yCol1&quot; : &quot;x1_y2_1&quot;,\r\n                &quot;yCol2&quot; : &quot;x1_y2_2&quot;\r\n            }]\r\n        },{\r\n            &quot;xCol1&quot; :&quot;x2_1&quot;,\r\n            &quot;xCol2&quot; :&quot;x2_2&quot;,\r\n            &quot;y&quot; : [{\r\n                &quot;yCol1&quot; : &quot;x2_y1_1&quot;,\r\n                &quot;yCol2&quot; : &quot;x2_y1_2&quot;,\r\n            },{\r\n                &quot;yCol1&quot; : &quot;x2_y2_1&quot;,\r\n                &quot;yCol2&quot; : &quot;x2_y2_2&quot;\r\n            }]\r\n        }]\r\n    }\r\n\r\nAlso assume a spec that tells us which node(s) to look for, say `x/y/yCol1`. Both width and depth of json can be greater than what is shown here: we don&#39;t know either the json or the specification beforehand: it must be processed dynamically.\r\n\r\nThe following works to do this recursively, but doesn&#39;t seem elegant...\r\n\r\n    public static void getPaths(String cp, String rp, JsonNode cj, List&lt;String&gt; rsp) {\r\n        if (rp.indexOf(&quot;/&quot;, 0) == 1 ) {\r\n            rsp.add(rp);\r\n        } else {\r\n            Integer ix = rp.indexOf(&quot;/&quot;, 1);\r\n            String ncp = cp;\r\n            String nrp = rp;\r\n            if (ix &gt; 0) {\r\n                ncp = rp.substring(0, ix);\r\n                nrp = rp.substring(ix);\r\n            } else {\r\n                ncp = rp;\r\n            }\r\n            JsonNode nn = cj.at(ncp);\r\n            if (nn.getNodeType() == JsonNodeType.ARRAY) {\r\n                Integer i = 0;\r\n                for (JsonNode j : ((ArrayNode)nn)) {\r\n                    getMatchingPaths(cp + ncp + &quot;/&quot; + i.toString(), nrp, j, rsp);\r\n                    i++;\r\n                }\r\n            } else if (nn.getNodeType() != JsonNodeType.MISSING) {\r\n                rsp.add(cp + rp);\r\n            }\r\n        }\r\n    }\r\n\r\nBasically:\r\n\r\n - `cp` is the current path so far (outside caller pass in empty string)\r\n - `rp` is the remaining path (outside caller pass in the whole path)\r\n - `cj` is the current Node (outside caller pass in root node)\r\n - `rsp` is\r\n   the results (outside caller pass in an empty list)\r\n\r\nSo for the given example, the caller would turn the json string into jsonNode, create rspList as an empty list of string, and call `getPaths(&quot;&quot;, &quot;/x/y/yCol1&quot;, jsonNode, rspList)`. The resulting response list is:\r\n\r\n    /x/0/y/0/yCol1\r\n    /x/0/y/1/yCol1\r\n    /x/1/y/0/yCol1\r\n    /x/1/y/1/yCol1\r\n\r\nThis is good enough for me to loop through, find each node using `at` and do whatever I want (such as derive new fields adjacent to the found fields). But I wonder if there are more elegant approaches using jaxson tricks or streaming tricks.","title":"Dynamically find all matching nodes from nested json arrays","body":"<p>I'm using Java and Jaxson primarily.</p>\n<p>Assume a json structure such as</p>\n<pre><code>{\n    &quot;a&quot; : &quot;aVal&quot;,\n    &quot;b&quot; : &quot;bVal&quot;,\n    &quot;x&quot; : [{\n        &quot;xCol1&quot; :&quot;x1_1&quot;,\n        &quot;xCol2&quot; :&quot;x1_2&quot;,\n        &quot;y&quot; : [{\n            &quot;yCol1&quot; : &quot;x1_y1_1&quot;,\n            &quot;yCol2&quot; : &quot;x1_y1_2&quot;,\n        },{\n            &quot;yCol1&quot; : &quot;x1_y2_1&quot;,\n            &quot;yCol2&quot; : &quot;x1_y2_2&quot;\n        }]\n    },{\n        &quot;xCol1&quot; :&quot;x2_1&quot;,\n        &quot;xCol2&quot; :&quot;x2_2&quot;,\n        &quot;y&quot; : [{\n            &quot;yCol1&quot; : &quot;x2_y1_1&quot;,\n            &quot;yCol2&quot; : &quot;x2_y1_2&quot;,\n        },{\n            &quot;yCol1&quot; : &quot;x2_y2_1&quot;,\n            &quot;yCol2&quot; : &quot;x2_y2_2&quot;\n        }]\n    }]\n}\n</code></pre>\n<p>Also assume a spec that tells us which node(s) to look for, say <code>x/y/yCol1</code>. Both width and depth of json can be greater than what is shown here: we don't know either the json or the specification beforehand: it must be processed dynamically.</p>\n<p>The following works to do this recursively, but doesn't seem elegant...</p>\n<pre><code>public static void getPaths(String cp, String rp, JsonNode cj, List&lt;String&gt; rsp) {\n    if (rp.indexOf(&quot;/&quot;, 0) == 1 ) {\n        rsp.add(rp);\n    } else {\n        Integer ix = rp.indexOf(&quot;/&quot;, 1);\n        String ncp = cp;\n        String nrp = rp;\n        if (ix &gt; 0) {\n            ncp = rp.substring(0, ix);\n            nrp = rp.substring(ix);\n        } else {\n            ncp = rp;\n        }\n        JsonNode nn = cj.at(ncp);\n        if (nn.getNodeType() == JsonNodeType.ARRAY) {\n            Integer i = 0;\n            for (JsonNode j : ((ArrayNode)nn)) {\n                getMatchingPaths(cp + ncp + &quot;/&quot; + i.toString(), nrp, j, rsp);\n                i++;\n            }\n        } else if (nn.getNodeType() != JsonNodeType.MISSING) {\n            rsp.add(cp + rp);\n        }\n    }\n}\n</code></pre>\n<p>Basically:</p>\n<ul>\n<li><code>cp</code> is the current path so far (outside caller pass in empty string)</li>\n<li><code>rp</code> is the remaining path (outside caller pass in the whole path)</li>\n<li><code>cj</code> is the current Node (outside caller pass in root node)</li>\n<li><code>rsp</code> is\nthe results (outside caller pass in an empty list)</li>\n</ul>\n<p>So for the given example, the caller would turn the json string into jsonNode, create rspList as an empty list of string, and call <code>getPaths(&quot;&quot;, &quot;/x/y/yCol1&quot;, jsonNode, rspList)</code>. The resulting response list is:</p>\n<pre><code>/x/0/y/0/yCol1\n/x/0/y/1/yCol1\n/x/1/y/0/yCol1\n/x/1/y/1/yCol1\n</code></pre>\n<p>This is good enough for me to loop through, find each node using <code>at</code> and do whatever I want (such as derive new fields adjacent to the found fields). But I wonder if there are more elegant approaches using jaxson tricks or streaming tricks.</p>\n"},{"tags":["windows","path","java","javaw"],"comments":[{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1327508708,"post_id":9006127,"comment_id":11289035,"body_markdown":"Why do you need the location of the exe? Might you want to get the location of the jar instead?","body":"Why do you need the location of the exe? Might you want to get the location of the jar instead?"},{"owner":{"account_id":390715,"reputation":6107,"user_id":750965,"accept_rate":94,"display_name":"Johnydep"},"score":0,"creation_date":1327508921,"post_id":9006127,"comment_id":11289119,"body_markdown":"@Thomas, i need both. Location of jar can be found easily. I need to install my application as a windows service, and for that i need the abs path of default javaw.exe Actually it is there in Path but i am confused as it can show multiple entries of old and new versions, wondering how would i now which one is the default one?","body":"@Thomas, i need both. Location of jar can be found easily. I need to install my application as a windows service, and for that i need the abs path of default javaw.exe Actually it is there in Path but i am confused as it can show multiple entries of old and new versions, wondering how would i now which one is the default one?"}],"answers":[{"comments":[{"owner":{"account_id":390715,"reputation":6107,"user_id":750965,"accept_rate":94,"display_name":"Johnydep"},"score":0,"creation_date":1327509311,"post_id":9006281,"comment_id":11289278,"body_markdown":"Thank you, actually on my machine if i check Path=C:/Program Files/Java/jre7/bin; while JAVA_HOME=C:\\Program Files\\Java\\jdk1.6.0_26 So i am just wondering for system without jdk, would JAVA_HOME still be set with JRE Path?","body":"Thank you, actually on my machine if i check Path=C:/Program Files/Java/jre7/bin; while JAVA_HOME=C:\\Program Files\\Java\\jdk1.6.0_26 So i am just wondering for system without jdk, would JAVA_HOME still be set with JRE Path?"},{"owner":{"account_id":390715,"reputation":6107,"user_id":750965,"accept_rate":94,"display_name":"Johnydep"},"score":0,"creation_date":1327509416,"post_id":9006281,"comment_id":11289326,"body_markdown":"Actually to test it i would have to uninstall jdk, but if you could confirm then i will have my answer, thank you","body":"Actually to test it i would have to uninstall jdk, but if you could confirm then i will have my answer, thank you"},{"owner":{"display_name":"user330315"},"score":2,"creation_date":1327510690,"post_id":9006281,"comment_id":11289838,"body_markdown":"But the JAVA_HOME is not necessarily the java.exe that is used to launch the currently running application. I have three different JDKs installed and only a single JAVA_HOME.","body":"But the JAVA_HOME is not necessarily the java.exe that is used to launch the currently running application. I have three different JDKs installed and only a single JAVA_HOME."},{"owner":{"account_id":390715,"reputation":6107,"user_id":750965,"accept_rate":94,"display_name":"Johnydep"},"score":2,"creation_date":1327511138,"post_id":9006281,"comment_id":11290040,"body_markdown":"@a_horse_with_no_name, yes you are right but Andrew&#39;s answer is what i was looking for. I was trying System.getenv(&quot;JAVA_HOME&quot;) while what i needed was: System.getProperty(&quot;java.home&quot;);","body":"@a_horse_with_no_name, yes you are right but Andrew&#39;s answer is what i was looking for. I was trying System.getenv(&quot;JAVA_HOME&quot;) while what i needed was: System.getProperty(&quot;java.home&quot;);"},{"owner":{"account_id":15387,"reputation":63718,"user_id":32453,"accept_rate":92,"display_name":"rogerdpack"},"score":0,"creation_date":1359656608,"post_id":9006281,"comment_id":20439305,"body_markdown":"appears you can also programmatically tell whether you&#39;re running java vs. javaw or not, see http://stackoverflow.com/questions/14632272/java-how-to-know-if-youre-running-javaw-exe-vs-java-exe/14632463#14632463","body":"appears you can also programmatically tell whether you&#39;re running java vs. javaw or not, see <a href=\"http://stackoverflow.com/questions/14632272/java-how-to-know-if-youre-running-javaw-exe-vs-java-exe/14632463#14632463\" title=\"java how to know if youre running javaw exe vs java exe\">stackoverflow.com/questions/14632272/&hellip;</a>"},{"owner":{"account_id":94193,"reputation":20589,"user_id":257299,"accept_rate":64,"display_name":"kevinarpe"},"score":0,"creation_date":1633257743,"post_id":9006281,"comment_id":122706891,"body_markdown":"For future readers, the direction layout of JDK8 and JDK11 are different.  However, this answer works reliable on both directory layouts.  It is also useful to find `keytool(.exe)`","body":"For future readers, the direction layout of JDK8 and JDK11 are different.  However, this answer works reliable on both directory layouts.  It is also useful to find <code>keytool(.exe)</code>"},{"owner":{"account_id":3590209,"reputation":1021,"user_id":2996452,"accept_rate":62,"display_name":"Jokkeri"},"score":0,"creation_date":1691741603,"post_id":9006281,"comment_id":135535468,"body_markdown":"On JRE this returns: `java.home:C:\\Program Files\\Java\\Temurin_jre8_1.8.0_322` but on JDK this will point the JRE inside JDK: `java.home:C:\\Program Files\\Java\\jdk8u362-b09\\jre`","body":"On JRE this returns: <code>java.home:C:\\Program Files\\Java\\Temurin_jre8_1.8.0_322</code> but on JDK this will point the JRE inside JDK: <code>java.home:C:\\Program Files\\Java\\jdk8u362-b09\\jre</code>"}],"tags":[],"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"comment_count":7,"down_vote_count":0,"up_vote_count":38,"is_accepted":true,"score":38,"last_activity_date":1327509788,"creation_date":1327509036,"answer_id":9006281,"question_id":9006127,"body_markdown":"    String javaHome = System.getProperty(&quot;java.home&quot;);\r\n\r\n---\r\n\r\n&gt; Can you tell me either through pure Java ... on windows how is it possible to find out the location of javaw.exe?\r\n\r\n###E.G.\r\n\r\n    import java.io.File;\r\n    \r\n    class JavawLocation {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tString javaHome = System.getProperty(&quot;java.home&quot;);\r\n    \t\tFile f = new File(javaHome);\r\n    \t\tf = new File(f, &quot;bin&quot;);\r\n    \t\tf = new File(f, &quot;javaw.exe&quot;);\r\n    \t\tSystem.out.println(f + &quot;    exists: &quot; + f.exists());\r\n    \t}\r\n    }\r\n\r\n###Output\r\n\r\n    C:\\Program Files (x86)\\Java\\jdk1.6.0_29\\jre\\bin\\javaw.exe    exists: true\r\n    Press any key to continue . . .\r\n\r\nAnd yes, I am confident that will work in a JRE.","title":"Find absolute java.exe path programmatically from java code","body":"<pre><code>String javaHome = System.getProperty(\"java.home\");\n</code></pre>\n\n<hr>\n\n<blockquote>\n  <p>Can you tell me either through pure Java ... on windows how is it possible to find out the location of javaw.exe?</p>\n</blockquote>\n\n<h3>E.G.</h3>\n\n<pre><code>import java.io.File;\n\nclass JavawLocation {\n\n    public static void main(String[] args) {\n        String javaHome = System.getProperty(\"java.home\");\n        File f = new File(javaHome);\n        f = new File(f, \"bin\");\n        f = new File(f, \"javaw.exe\");\n        System.out.println(f + \"    exists: \" + f.exists());\n    }\n}\n</code></pre>\n\n<h3>Output</h3>\n\n<pre><code>C:\\Program Files (x86)\\Java\\jdk1.6.0_29\\jre\\bin\\javaw.exe    exists: true\nPress any key to continue . . .\n</code></pre>\n\n<p>And yes, I am confident that will work in a JRE.</p>\n"},{"comments":[{"owner":{"account_id":13301015,"reputation":170,"user_id":9602527,"display_name":"HeatZync"},"score":0,"creation_date":1677490346,"post_id":28439873,"comment_id":133340923,"body_markdown":"If you use the constructor with parent and child parameters, then you don&#39;t have to worry about the backslash: `new File(javaLibraryPath.substring(0, javaLibraryPath.indexOf(&#39;;&#39;)), &quot;java.exe&quot;)`","body":"If you use the constructor with parent and child parameters, then you don&#39;t have to worry about the backslash: <code>new File(javaLibraryPath.substring(0, javaLibraryPath.indexOf(&#39;;&#39;)), &quot;java.exe&quot;)</code>"}],"tags":[],"owner":{"account_id":3009343,"reputation":581,"user_id":2553175,"display_name":"Greg"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1457859855,"creation_date":1423595444,"answer_id":28439873,"question_id":9006127,"body_markdown":"On Windows, the java.library.path System Property begins with the path to the bin directory containing whichever java.exe was used to run your jar file.\r\n\r\nThis makes sense, because on Windows the first place any executable looks for DLL files is the directory containing the executable itself. So naturally, when the JVM runs, the first place it looks for DLLs is the directory containing java.exe.\r\n\r\nYou can acquire the path to java.exe as follows:\r\n\r\n    final String javaLibraryPath = System.getProperty(&quot;java.library.path&quot;);\r\n    final File javaExeFile = new File(\r\n      javaLibraryPath.substring(0, javaLibraryPath.indexOf(&#39;;&#39;)) + &quot;\\\\java.exe&quot;\r\n    );\r\n    final String javaExePath =\r\n      javaExeFile.exists() ? javaExeFile.getAbsolutePath() : &quot;java&quot;;\r\n\r\nThis code is Windows-specific - I hard-coded the path separator (;) and the file separator (\\). I also put in a fallback to just &quot;java&quot; in case the library path trick somehow doesn&#39;t work.\r\n\r\nI have tested this with Java 6 and 7 on Windows 7. I tried a 32-bit and 64-bit version of Java.","title":"Find absolute java.exe path programmatically from java code","body":"<p>On Windows, the java.library.path System Property begins with the path to the bin directory containing whichever java.exe was used to run your jar file.</p>\n\n<p>This makes sense, because on Windows the first place any executable looks for DLL files is the directory containing the executable itself. So naturally, when the JVM runs, the first place it looks for DLLs is the directory containing java.exe.</p>\n\n<p>You can acquire the path to java.exe as follows:</p>\n\n<pre><code>final String javaLibraryPath = System.getProperty(\"java.library.path\");\nfinal File javaExeFile = new File(\n  javaLibraryPath.substring(0, javaLibraryPath.indexOf(';')) + \"\\\\java.exe\"\n);\nfinal String javaExePath =\n  javaExeFile.exists() ? javaExeFile.getAbsolutePath() : \"java\";\n</code></pre>\n\n<p>This code is Windows-specific - I hard-coded the path separator (;) and the file separator (). I also put in a fallback to just \"java\" in case the library path trick somehow doesn't work.</p>\n\n<p>I have tested this with Java 6 and 7 on Windows 7. I tried a 32-bit and 64-bit version of Java.</p>\n"},{"tags":[],"owner":{"account_id":3225178,"reputation":1033,"user_id":2721809,"display_name":"Tim Angus"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1508513204,"creation_date":1508513204,"answer_id":46852384,"question_id":9006127,"body_markdown":"Here&#39;s a slightly more generalised solution that I came up with. Maybe useful:\r\n\r\n    private static String javaExe()\r\n    {\r\n        final String JAVA_HOME = System.getProperty(&quot;java.home&quot;);\r\n        final File BIN = new File(JAVA_HOME, &quot;bin&quot;);\r\n        File exe = new File(BIN, &quot;java&quot;);\r\n\r\n        if (!exe.exists())\r\n        {\r\n            // We might be on Windows, which needs an exe extension\r\n            exe = new File(BIN, &quot;java.exe&quot;);\r\n        }\r\n\r\n        if (exe.exists())\r\n        {\r\n            return exe.getAbsolutePath();\r\n        }\r\n\r\n        try\r\n        {\r\n            // Just try invoking java from the system path; this of course\r\n            // assumes &quot;java[.exe]&quot; is /actually/ Java\r\n            final String NAKED_JAVA = &quot;java&quot;;\r\n            new ProcessBuilder(NAKED_JAVA).start();\r\n\r\n            return NAKED_JAVA;\r\n        }\r\n        catch (IOException e)\r\n        {\r\n            return null;\r\n        }\r\n    }","title":"Find absolute java.exe path programmatically from java code","body":"<p>Here's a slightly more generalised solution that I came up with. Maybe useful:</p>\n\n<pre><code>private static String javaExe()\n{\n    final String JAVA_HOME = System.getProperty(\"java.home\");\n    final File BIN = new File(JAVA_HOME, \"bin\");\n    File exe = new File(BIN, \"java\");\n\n    if (!exe.exists())\n    {\n        // We might be on Windows, which needs an exe extension\n        exe = new File(BIN, \"java.exe\");\n    }\n\n    if (exe.exists())\n    {\n        return exe.getAbsolutePath();\n    }\n\n    try\n    {\n        // Just try invoking java from the system path; this of course\n        // assumes \"java[.exe]\" is /actually/ Java\n        final String NAKED_JAVA = \"java\";\n        new ProcessBuilder(NAKED_JAVA).start();\n\n        return NAKED_JAVA;\n    }\n    catch (IOException e)\n    {\n        return null;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23738735,"reputation":1,"user_id":17757081,"display_name":"Ian The Dead"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1652054829,"creation_date":1652054829,"answer_id":72165886,"question_id":9006127,"body_markdown":"an issue with using ```&quot;System.getProperty(&quot;java.home&quot;);&quot;```, is that it is not always the java exe that the jar is running on, if you want to get that, you can use ```&quot;System.getProperty(&quot;sun.boot.library.path&quot;);&quot;```, from there you can find &quot;java&quot;, &quot;java.exe&quot;, &quot;javaw&quot;, or &quot;javaw.exe&quot;... However there is still an issue with this, java will run just fine if the executable has been renamed, and the actual java executable&#39;s structure changes from different JRE&#39;s/JDKS&#39;s, so there is not much way to find the java exe if it has been renamed. unless someone else has a method ofc, in which case, can you share? :)\r\n\r\n(Also, I have seen some people suggest using the first index of ```System.getProperty(&quot;java.library.path&quot;);```, note, this might not work if the user/launcher has manually set the library path, something which is not too uncommon)","title":"Find absolute java.exe path programmatically from java code","body":"<p>an issue with using <code>&quot;System.getProperty(&quot;java.home&quot;);&quot;</code>, is that it is not always the java exe that the jar is running on, if you want to get that, you can use <code>&quot;System.getProperty(&quot;sun.boot.library.path&quot;);&quot;</code>, from there you can find &quot;java&quot;, &quot;java.exe&quot;, &quot;javaw&quot;, or &quot;javaw.exe&quot;... However there is still an issue with this, java will run just fine if the executable has been renamed, and the actual java executable's structure changes from different JRE's/JDKS's, so there is not much way to find the java exe if it has been renamed. unless someone else has a method ofc, in which case, can you share? :)</p>\n<p>(Also, I have seen some people suggest using the first index of <code>System.getProperty(&quot;java.library.path&quot;);</code>, note, this might not work if the user/launcher has manually set the library path, something which is not too uncommon)</p>\n"},{"tags":[],"owner":{"account_id":6912215,"reputation":467,"user_id":5307634,"display_name":"MbPCM"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1655670374,"creation_date":1655670374,"answer_id":72680130,"question_id":9006127,"body_markdown":"Compilation of All above methods\r\n\r\n    static String getJavaPath(){\r\n    \r\n            String tmp1 = System.getProperty(&quot;java.home&quot;) + &quot;\\\\bin\\\\java.exe&quot;;\r\n            String tmp2 = System.getProperty(&quot;sun.boot.library.path&quot;) + &quot;\\\\java.exe&quot;;\r\n            String tmp3 = System.getProperty(&quot;java.library.path&quot;)+ &quot;\\\\java.exe&quot;;\r\n            if(new File(tmp1).exists()) {\r\n                return tmp1;\r\n            }else if(new File(tmp2).exists()){\r\n                return tmp2;\r\n            }else if(new File(tmp3).exists()) {\r\n                return tmp3;\r\n            }else{\r\n                String[] paths = System.getenv(&quot;PATH&quot;).split(&quot;;&quot;);\r\n                for(String path:paths){\r\n                    if(new File(path + &quot;\\\\java.exe&quot;).exists()){\r\n                        return path + &quot;\\\\java.exe&quot;;\r\n                    }\r\n                }\r\n            }\r\n            return &quot;&quot;;\r\n        }","title":"Find absolute java.exe path programmatically from java code","body":"<p>Compilation of All above methods</p>\n<pre><code>static String getJavaPath(){\n\n        String tmp1 = System.getProperty(&quot;java.home&quot;) + &quot;\\\\bin\\\\java.exe&quot;;\n        String tmp2 = System.getProperty(&quot;sun.boot.library.path&quot;) + &quot;\\\\java.exe&quot;;\n        String tmp3 = System.getProperty(&quot;java.library.path&quot;)+ &quot;\\\\java.exe&quot;;\n        if(new File(tmp1).exists()) {\n            return tmp1;\n        }else if(new File(tmp2).exists()){\n            return tmp2;\n        }else if(new File(tmp3).exists()) {\n            return tmp3;\n        }else{\n            String[] paths = System.getenv(&quot;PATH&quot;).split(&quot;;&quot;);\n            for(String path:paths){\n                if(new File(path + &quot;\\\\java.exe&quot;).exists()){\n                    return path + &quot;\\\\java.exe&quot;;\n                }\n            }\n        }\n        return &quot;&quot;;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":479954,"reputation":2855,"user_id":892914,"accept_rate":89,"display_name":"jnovacho"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686848174,"creation_date":1686848174,"answer_id":76483923,"question_id":9006127,"body_markdown":"If you are running on Java 9+ you can use following snippet to check the Java command:\r\n\r\n    import java.io.IOException;\r\n    import java.util.Optional;\r\n    \r\n    public class ProcessUtils {\r\n      private ProcessUtils() {}\r\n    \r\n      public static Optional getCommandOfCurrentProcess() {\r\n         ProcessHandle processHandle = ProcessHandle.current();\r\n         return processHandle.info().command();\r\n      }\r\n    \r\n      public static void main(String[] args) throws IOException {\r\n        System.out.println(ProcessUtils.getCommandOfCurrentProcess());\r\n      }\r\n    }\r\n\r\nThis will use the new Java Process API to get the handle of itself. From there you can parse the path as needed.\r\n\r\n[Source][1]\r\n\r\n\r\n  [1]: https://www.rgagnon.com/javadetails/java-get-running-jvm-path.html","title":"Find absolute java.exe path programmatically from java code","body":"<p>If you are running on Java 9+ you can use following snippet to check the Java command:</p>\n<pre><code>import java.io.IOException;\nimport java.util.Optional;\n\npublic class ProcessUtils {\n  private ProcessUtils() {}\n\n  public static Optional getCommandOfCurrentProcess() {\n     ProcessHandle processHandle = ProcessHandle.current();\n     return processHandle.info().command();\n  }\n\n  public static void main(String[] args) throws IOException {\n    System.out.println(ProcessUtils.getCommandOfCurrentProcess());\n  }\n}\n</code></pre>\n<p>This will use the new Java Process API to get the handle of itself. From there you can parse the path as needed.</p>\n<p><a href=\"https://www.rgagnon.com/javadetails/java-get-running-jvm-path.html\" rel=\"nofollow noreferrer\">Source</a></p>\n"}],"owner":{"account_id":390715,"reputation":6107,"user_id":750965,"accept_rate":94,"display_name":"Johnydep"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":26570,"favorite_count":0,"down_vote_count":0,"up_vote_count":27,"accepted_answer_id":9006281,"answer_count":6,"score":27,"last_activity_date":1686848174,"creation_date":1327508477,"question_id":9006127,"body_markdown":"If I have a java jar or class file which is launched by the user (assuming java path is set in environment variables), so how can i from within the code, figure out absolute path of java.exe/javaw.exe from which this file is being launched.  \r\n  \r\nLike on ubuntu we can run: `% which java` and it shows the path.  \r\n  \r\nHowever on windows, if i check `System.getenv()` it may happen that there are multiple path&#39;s found e.g for old or new version. If through cmd line, I run `java -version` it does not show the path.  \r\n  \r\nCan you tell me either through pure java or command line on windows how is it possible to find out the location of javaw.exe?","title":"Find absolute java.exe path programmatically from java code","body":"<p>If I have a java jar or class file which is launched by the user (assuming java path is set in environment variables), so how can i from within the code, figure out absolute path of java.exe/javaw.exe from which this file is being launched.  </p>\n\n<p>Like on ubuntu we can run: <code>% which java</code> and it shows the path.  </p>\n\n<p>However on windows, if i check <code>System.getenv()</code> it may happen that there are multiple path's found e.g for old or new version. If through cmd line, I run <code>java -version</code> it does not show the path.  </p>\n\n<p>Can you tell me either through pure java or command line on windows how is it possible to find out the location of javaw.exe?</p>\n"},{"tags":["gradle","java"],"answers":[{"comments":[{"owner":{"account_id":7450,"reputation":269220,"user_id":12960,"display_name":"Brian Agnew"},"score":1,"creation_date":1581415784,"post_id":16666115,"comment_id":106416779,"body_markdown":"The above link is pointing to doc for Java 7. I wonder if you want something like https://docs.oracle.com/en/java/javase/11/tools/javac.html#GUID-AEEC9F07-CB49-4E96-8BC7-BCC2C7F725C9 ?","body":"The above link is pointing to doc for Java 7. I wonder if you want something like <a href=\"https://docs.oracle.com/en/java/javase/11/tools/javac.html#GUID-AEEC9F07-CB49-4E96-8BC7-BCC2C7F725C9\" rel=\"nofollow noreferrer\">docs.oracle.com/en/java/javase/11/tools/&hellip;</a> ?"}],"tags":[],"owner":{"account_id":42255,"reputation":8377,"user_id":123054,"accept_rate":83,"display_name":"Matt"},"comment_count":1,"down_vote_count":1,"up_vote_count":130,"is_accepted":true,"score":129,"last_activity_date":1665014828,"creation_date":1369127225,"answer_id":16666115,"question_id":16654951,"body_markdown":"`targetCompatibility` and `sourceCompatibility` maps to `-target release` and `-source release` in javac. Source is basically the source language level and target is the level of the bytecode that is generated.\r\n\r\nMore details can be found in the *Cross-Compilation Options for `javac`* section of *Tools Reference* [for Java 8][1], [for Java 11](https://docs.oracle.com/en/java/javase/11/tools/javac.html#GUID-AEEC9F07-CB49-4E96-8BC7-BCC2C7F725C9__CROSS-COMPILATIONOPTIONSFORJAVAC-7D3D83C3), [for Java 17][2], or [for Java 19][3]. \r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/technotes/tools/windows/javac.html\r\n  [2]: https://docs.oracle.com/en/java/javase/17/docs/specs/man/javac.html\r\n  [3]: https://docs.oracle.com/en/java/javase/19/docs/specs/man/javac.html","title":"What is the difference between &quot;sourceCompatibility&quot; and &quot;targetCompatibility&quot;?","body":"<p><code>targetCompatibility</code> and <code>sourceCompatibility</code> maps to <code>-target release</code> and <code>-source release</code> in javac. Source is basically the source language level and target is the level of the bytecode that is generated.</p>\n<p>More details can be found in the <em>Cross-Compilation Options for <code>javac</code></em> section of <em>Tools Reference</em> <a href=\"https://docs.oracle.com/javase/8/docs/technotes/tools/windows/javac.html\" rel=\"noreferrer\">for Java 8</a>, <a href=\"https://docs.oracle.com/en/java/javase/11/tools/javac.html#GUID-AEEC9F07-CB49-4E96-8BC7-BCC2C7F725C9__CROSS-COMPILATIONOPTIONSFORJAVAC-7D3D83C3\" rel=\"noreferrer\">for Java 11</a>, <a href=\"https://docs.oracle.com/en/java/javase/17/docs/specs/man/javac.html\" rel=\"noreferrer\">for Java 17</a>, or <a href=\"https://docs.oracle.com/en/java/javase/19/docs/specs/man/javac.html\" rel=\"noreferrer\">for Java 19</a>.</p>\n"},{"comments":[{"owner":{"account_id":1063749,"reputation":14067,"user_id":1064809,"accept_rate":70,"display_name":"Natix"},"score":5,"creation_date":1460121804,"post_id":22326989,"comment_id":60608805,"body_markdown":"This is a subtle, but very important observation.","body":"This is a subtle, but very important observation."},{"owner":{"account_id":4081547,"reputation":4204,"user_id":3351924,"accept_rate":89,"display_name":"secondbreakfast"},"score":2,"creation_date":1474394411,"post_id":22326989,"comment_id":66509987,"body_markdown":"How do you compare them?","body":"How do you compare them?"},{"owner":{"account_id":3298842,"reputation":14301,"user_id":2775450,"accept_rate":71,"display_name":"Codebender"},"score":0,"creation_date":1478705443,"post_id":22326989,"comment_id":68263038,"body_markdown":"Why do you fail the build? The &quot;bootstrap classpath&quot; option is given just for mitigating this issue. You can always use the proper bootstrap and it should work just fine.","body":"Why do you fail the build? The &quot;bootstrap classpath&quot; option is given just for mitigating this issue. You can always use the proper bootstrap and it should work just fine."},{"owner":{"account_id":9022797,"reputation":2681,"user_id":6723250,"accept_rate":62,"display_name":"xeruf"},"score":14,"creation_date":1509964130,"post_id":22326989,"comment_id":81218988,"body_markdown":"`if(JavaVersion.current() != JavaVersion.VERSION_1_8) throw new GradleException(&quot;This project requires Java 8, but it&#39;s running on &quot;+JavaVersion.current())` This is how I sort this issue out, right in the beginning of the build.gradle file.","body":"<code>if(JavaVersion.current() != JavaVersion.VERSION_1_8) throw new GradleException(&quot;This project requires Java 8, but it&#39;s running on &quot;+JavaVersion.current())</code> This is how I sort this issue out, right in the beginning of the build.gradle file."},{"owner":{"account_id":5914240,"reputation":1974,"user_id":4653517,"display_name":"James Mudd"},"score":3,"creation_date":1553850328,"post_id":22326989,"comment_id":97546753,"body_markdown":"Since Java 9 there is now a new `javac` option `--release` intended to address this problem, by only allowing use of API available in the specified Java version. For more on this see https://stackoverflow.com/a/43103038/4653517","body":"Since Java 9 there is now a new <code>javac</code> option <code>--release</code> intended to address this problem, by only allowing use of API available in the specified Java version. For more on this see <a href=\"https://stackoverflow.com/a/43103038/4653517\">stackoverflow.com/a/43103038/4653517</a>"},{"owner":{"account_id":10715125,"reputation":477,"user_id":8228163,"display_name":"Edw590"},"score":0,"creation_date":1630454685,"post_id":22326989,"comment_id":121959149,"body_markdown":"@JamesMudd Wait, so before Java 9 we could use a method only available on Java 8 even though the compatibility was set to Java 1, for example, and the IDE wouldn&#39;t warn about that!?","body":"@JamesMudd Wait, so before Java 9 we could use a method only available on Java 8 even though the compatibility was set to Java 1, for example, and the IDE wouldn&#39;t warn about that!?"},{"owner":{"account_id":5914240,"reputation":1974,"user_id":4653517,"display_name":"James Mudd"},"score":0,"creation_date":1630487127,"post_id":22326989,"comment_id":121966529,"body_markdown":"Typically yes. When the IDE has a setting for language level it typically means the language constructs i.e. is a lambda valid etc. It does not know which methods were added to the standard libraries in which Java version. So it will just compile against the JVM in use by the IDE. If you want to ensure this use a JVM of the version you are targeting, and don&#39;t rely on these version options.","body":"Typically yes. When the IDE has a setting for language level it typically means the language constructs i.e. is a lambda valid etc. It does not know which methods were added to the standard libraries in which Java version. So it will just compile against the JVM in use by the IDE. If you want to ensure this use a JVM of the version you are targeting, and don&#39;t rely on these version options."}],"tags":[],"owner":{"account_id":1808285,"reputation":1071,"user_id":1644873,"display_name":"user1644873"},"comment_count":7,"down_vote_count":0,"up_vote_count":96,"is_accepted":false,"score":96,"last_activity_date":1463039016,"creation_date":1394544148,"answer_id":22326989,"question_id":16654951,"body_markdown":"Be careful when you use these; we&#39;ve been bitten by people making assumptions.\r\n\r\nJust because you use sourceCompability (or targetCompatibility) of 1.5 doesn&#39;t mean you can always compile your code with JDK 1.6 and expect it to work under JDK 1.5. The issue is the available libraries.\r\n\r\nIf your code happens to call some method that is only available in JDK 1.6 it will still compile with the various Compatibility options for the target VM. But when you run it, it will fail because the offending method is not present (you&#39;ll get a MethodNotFoundException or ClassNotFoundException).\r\n\r\nFor this reason, I *always* compare the Compatibility setting to the actual Java version I&#39;m building under. If they don&#39;t match, I fail the build.","title":"What is the difference between &quot;sourceCompatibility&quot; and &quot;targetCompatibility&quot;?","body":"<p>Be careful when you use these; we've been bitten by people making assumptions.</p>\n\n<p>Just because you use sourceCompability (or targetCompatibility) of 1.5 doesn't mean you can always compile your code with JDK 1.6 and expect it to work under JDK 1.5. The issue is the available libraries.</p>\n\n<p>If your code happens to call some method that is only available in JDK 1.6 it will still compile with the various Compatibility options for the target VM. But when you run it, it will fail because the offending method is not present (you'll get a MethodNotFoundException or ClassNotFoundException).</p>\n\n<p>For this reason, I <em>always</em> compare the Compatibility setting to the actual Java version I'm building under. If they don't match, I fail the build.</p>\n"},{"comments":[{"owner":{"account_id":4753824,"reputation":954,"user_id":3843123,"accept_rate":50,"display_name":"isJulian00"},"score":0,"creation_date":1560628197,"post_id":29519066,"comment_id":99801867,"body_markdown":"how do we figure out which ones our project is using ?","body":"how do we figure out which ones our project is using ?"}],"tags":[],"owner":{"account_id":5273615,"reputation":706,"user_id":4211159,"display_name":"A Jakhar"},"comment_count":1,"down_vote_count":0,"up_vote_count":48,"is_accepted":false,"score":48,"last_activity_date":1428507218,"creation_date":1428507218,"answer_id":29519066,"question_id":16654951,"body_markdown":"**sourceCompatibility** =  specifies that version of the Java programming language be used to compile **.java** files.\r\ne.g sourceCompatibility 1.6 =specifies that version 1.6 of the Java programming language be used to compile **.java** files.\r\n\r\n*By default sourceCompatibility = &quot;version of the current JVM in use&quot; and targetCompatibility = sourceCompatibility* \r\n\r\n**targetCompatibility** = The option ensures that the generated class files will be compatible with VMs specified by targetCompatibility . Note that in most cases, the value of the -target option is the value of the -source option; in that case, you can omit the -target option.\r\n\r\n*Class files will run on the target specified by targetCompatibility and on later versions, but not on earlier versions of the VM*\r\n\r\n\r\n","title":"What is the difference between &quot;sourceCompatibility&quot; and &quot;targetCompatibility&quot;?","body":"<p><strong>sourceCompatibility</strong> =  specifies that version of the Java programming language be used to compile <strong>.java</strong> files.\ne.g sourceCompatibility 1.6 =specifies that version 1.6 of the Java programming language be used to compile <strong>.java</strong> files.</p>\n\n<p><em>By default sourceCompatibility = \"version of the current JVM in use\" and targetCompatibility = sourceCompatibility</em> </p>\n\n<p><strong>targetCompatibility</strong> = The option ensures that the generated class files will be compatible with VMs specified by targetCompatibility . Note that in most cases, the value of the -target option is the value of the -source option; in that case, you can omit the -target option.</p>\n\n<p><em>Class files will run on the target specified by targetCompatibility and on later versions, but not on earlier versions of the VM</em></p>\n"},{"comments":[{"owner":{"account_id":4643327,"reputation":4164,"user_id":3762471,"accept_rate":33,"display_name":"Victor Choy"},"score":0,"creation_date":1662520425,"post_id":61079964,"comment_id":130021753,"body_markdown":"This really explain what to be related with development in detail.","body":"This really explain what to be related with development in detail."}],"tags":[],"owner":{"account_id":15494779,"reputation":1291,"user_id":12824504,"display_name":"haoyu wang"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1586262251,"creation_date":1586262251,"answer_id":61079964,"question_id":16654951,"body_markdown":"In my opinion, “sourceCompatibility” means the what feature you can use in your source code.For example,if you set sourceCompatibility to 1.7, then you can&#39;t use lambda expression which a new feature in java 8 even though you jdk version is 1.8.  \r\nAs for “targetCompatibility”, it means which version of jre the generated class file can be run on, if you set it to 1.8,it may not run successfully on jdk 1.7, but it can usually run on higher version of jdk.","title":"What is the difference between &quot;sourceCompatibility&quot; and &quot;targetCompatibility&quot;?","body":"<p>In my opinion, “sourceCompatibility” means the what feature you can use in your source code.For example,if you set sourceCompatibility to 1.7, then you can't use lambda expression which a new feature in java 8 even though you jdk version is 1.8.<br>\nAs for “targetCompatibility”, it means which version of jre the generated class file can be run on, if you set it to 1.8,it may not run successfully on jdk 1.7, but it can usually run on higher version of jdk.</p>\n"},{"tags":[],"owner":{"account_id":1016338,"reputation":3267,"user_id":1027842,"accept_rate":75,"display_name":"Benjamin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1589456733,"creation_date":1589456733,"answer_id":61796556,"question_id":16654951,"body_markdown":"These are the flags for the javac command.\r\n\r\n    javac [options] [sourcefiles]\r\n\r\n    Options:\r\n    ...\r\n    -source release - Specifies the version of source code accepted.\r\n    ...\r\n    -target release - Generates class files for a specific VM version.\r\n    ...\r\n\r\nIn other words:  you write a code in a `source` version and compile your classes to the `target` VM version. In order to run it e.g. on other workstation with older java version.\r\n\r\nAccording to: https://docs.oracle.com/en/java/javase/11/tools/javac.html\r\n\r\n","title":"What is the difference between &quot;sourceCompatibility&quot; and &quot;targetCompatibility&quot;?","body":"<p>These are the flags for the javac command.</p>\n\n<pre><code>javac [options] [sourcefiles]\n\nOptions:\n...\n-source release - Specifies the version of source code accepted.\n...\n-target release - Generates class files for a specific VM version.\n...\n</code></pre>\n\n<p>In other words:  you write a code in a <code>source</code> version and compile your classes to the <code>target</code> VM version. In order to run it e.g. on other workstation with older java version.</p>\n\n<p>According to: <a href=\"https://docs.oracle.com/en/java/javase/11/tools/javac.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/en/java/javase/11/tools/javac.html</a></p>\n"},{"comments":[{"owner":{"account_id":6577455,"reputation":1711,"user_id":5082913,"display_name":"Shreck Ye"},"score":0,"creation_date":1673621196,"post_id":74501354,"comment_id":132546797,"body_markdown":"A reference on &quot;toolchains making `release` or `sourceCompatibility` tweaks obselete&quot;: https://blog.gradle.org/java-toolchains. It took me some time to find this.","body":"A reference on &quot;toolchains making <code>release</code> or <code>sourceCompatibility</code> tweaks obselete&quot;: <a href=\"https://blog.gradle.org/java-toolchains\" rel=\"nofollow noreferrer\">blog.gradle.org/java-toolchains</a>. It took me some time to find this."}],"tags":[],"owner":{"account_id":3703427,"reputation":473,"user_id":3082542,"display_name":"becke-ch"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1668872331,"creation_date":1668872331,"answer_id":74501354,"question_id":16654951,"body_markdown":"There have been given a lot of good explanations of what `sourceCompatibility` vs `targetCompatibility` is good for and a further good article can be found here [Gradle: sourceCompatiblity vs targetCompatibility][1]. But instead of `sourceCompatibility` vs `targetCompatibility` I would suggest to use the Gradle `toolchain` (see [Toolchains for JVM projects][2]) which makes `release` or `sourceCompatibility` tweaks obsolete and gurantees that langauge-features (`sourceCompatibility`), bytecode (`targetCompatibility`) and Java-API/-Libraries (`release`) will match the Java Version. (Only drawback is that the IDE support is not yet fully established but is on its way).\r\n\r\n\r\n  [1]: https://www.baeldung.com/gradle-sourcecompatiblity-vs-targetcompatibility\r\n  [2]: https://docs.gradle.org/current/userguide/toolchains.html","title":"What is the difference between &quot;sourceCompatibility&quot; and &quot;targetCompatibility&quot;?","body":"<p>There have been given a lot of good explanations of what <code>sourceCompatibility</code> vs <code>targetCompatibility</code> is good for and a further good article can be found here <a href=\"https://www.baeldung.com/gradle-sourcecompatiblity-vs-targetcompatibility\" rel=\"nofollow noreferrer\">Gradle: sourceCompatiblity vs targetCompatibility</a>. But instead of <code>sourceCompatibility</code> vs <code>targetCompatibility</code> I would suggest to use the Gradle <code>toolchain</code> (see <a href=\"https://docs.gradle.org/current/userguide/toolchains.html\" rel=\"nofollow noreferrer\">Toolchains for JVM projects</a>) which makes <code>release</code> or <code>sourceCompatibility</code> tweaks obsolete and gurantees that langauge-features (<code>sourceCompatibility</code>), bytecode (<code>targetCompatibility</code>) and Java-API/-Libraries (<code>release</code>) will match the Java Version. (Only drawback is that the IDE support is not yet fully established but is on its way).</p>\n"}],"owner":{"account_id":199370,"reputation":19629,"user_id":444639,"accept_rate":84,"display_name":"Rylander"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":150300,"favorite_count":0,"down_vote_count":1,"up_vote_count":200,"accepted_answer_id":16666115,"answer_count":6,"score":199,"last_activity_date":1686847265,"creation_date":1369071084,"question_id":16654951,"body_markdown":"What is the relationship/difference between `sourceCompatibility` and `targetCompatibility`? What happens when they are set to different values?\r\n\r\nAccording to the [Toolchain and compatibility](https://docs.gradle.org/current/userguide/java_plugin.html#toolchain_and_compatibility) section of the [Java plugin](http://www.gradle.org/docs/current/userguide/java_plugin.html) Gradle documentation:\r\n\r\n* `sourceCompatibility` is &quot;Java version compatibility to use when compiling Java source.&quot;\r\n* `targetCompatibility` is &quot;Java version to generate classes for.&quot;\r\n\r\nMy understanding is that `targetCompatibility` will generate Java bytecode that is compatible with a specific version of Java. Is this a subset of the functionality of `sourceCompatibility`?\r\n\r\n","title":"What is the difference between &quot;sourceCompatibility&quot; and &quot;targetCompatibility&quot;?","body":"<p>What is the relationship/difference between <code>sourceCompatibility</code> and <code>targetCompatibility</code>? What happens when they are set to different values?</p>\n<p>According to the <a href=\"https://docs.gradle.org/current/userguide/java_plugin.html#toolchain_and_compatibility\" rel=\"noreferrer\">Toolchain and compatibility</a> section of the <a href=\"http://www.gradle.org/docs/current/userguide/java_plugin.html\" rel=\"noreferrer\">Java plugin</a> Gradle documentation:</p>\n<ul>\n<li><code>sourceCompatibility</code> is &quot;Java version compatibility to use when compiling Java source.&quot;</li>\n<li><code>targetCompatibility</code> is &quot;Java version to generate classes for.&quot;</li>\n</ul>\n<p>My understanding is that <code>targetCompatibility</code> will generate Java bytecode that is compatible with a specific version of Java. Is this a subset of the functionality of <code>sourceCompatibility</code>?</p>\n"},{"tags":["java","maven","selenium-webdriver","testng","classpath"],"owner":{"account_id":4113062,"reputation":435,"user_id":3375417,"accept_rate":0,"display_name":"wheelerlc64"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686847069,"creation_date":1686847069,"question_id":76483797,"body_markdown":"Currently I have a TestNG/Selenium/Maven/Java project that I have setup to run as a jar with a goal of **test-jar**.  I used the maven dependency plugin to essentially copy all the dependencies to a lib folder in the test-classes folder within target directory.  My manifest in the JAR has the Class-Path with all jars.  When I run a java -jar myjar-tests.jar I get a NoClassDefFoundError as seenb elow:\r\n\r\n```\r\nException in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/testng/TestListenerAdapter\r\n        at runner.CrystalUIMain.main(CrystalUIMain.java:11)\r\nCaused by: java.lang.ClassNotFoundException: org.testng.TestListenerAdapter\r\n        at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:581)\r\n        at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178)\r\n        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521)\r\n        ... 1 more\r\n```\r\n\r\nBelow is my pom.xml (maven dependency plugin and goal as test-jar for maven jar plugin):\r\n\r\n```\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n\t&lt;groupId&gt;com.crystalfw&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;ui&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;packaging&gt;jar&lt;/packaging&gt;\r\n\r\n\t&lt;name&gt;ui&lt;/name&gt;\r\n\t&lt;url&gt;http://maven.apache.org&lt;/url&gt;\r\n\r\n\t&lt;properties&gt;\r\n\t\t&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n\t\t&lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt;\r\n\t\t&lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt;\r\n\t&lt;/properties&gt;\r\n\r\n\t&lt;dependencies&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.testng&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;testng&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;7.8.0&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;compile&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/org.seleniumhq.selenium/selenium-java --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;4.9.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.aventstack&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;extentreports&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;5.0.9&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.18.24&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;5.2.2&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/io.github.bonigarcia/webdrivermanager --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;io.github.bonigarcia&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;webdrivermanager&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;5.3.2&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.github.2gis.winium&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;winium-webdriver&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;0.1.0-1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;42.5.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/org.slf4j/slf4j-api --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.0.6&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/org.apache.logging.log4j/log4j-core --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.20.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.20.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/org.seleniumhq.selenium/selenium-http-jdk-client --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;selenium-http-jdk-client&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;4.8.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/io.rest-assured/rest-assured --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;io.rest-assured&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;rest-assured&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;5.3.0&lt;/version&gt;\r\n\t\t\t&lt;!-- &lt;scope&gt;test&lt;/scope&gt; --&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.googlecode.json-simple&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;json-simple&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.1.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.google.inject&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;guice&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;4.1.0&lt;/version&gt;\r\n&lt;!--\t\t\t&lt;classifier&gt;no_aop&lt;/classifier&gt;--&gt;\r\n&lt;!--\t\t\t&lt;scope&gt;compile&lt;/scope&gt;--&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.beust&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jcommander&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.48&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.google.guava&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;guava&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;32.0.1-jre&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;3.8.1&lt;/version&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;source&gt;${maven.compiler.source}&lt;/source&gt;\r\n\t\t\t\t\t&lt;target&gt;${maven.compiler.target}&lt;/target&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;3.6.0&lt;/version&gt;\r\n\t\t\t\t&lt;executions&gt;\r\n\t\t\t\t\t&lt;execution&gt;\r\n\t\t\t\t\t\t&lt;id&gt;copy-dependencies&lt;/id&gt;\r\n\t\t\t\t\t\t&lt;phase&gt;package&lt;/phase&gt;\r\n\t\t\t\t\t\t&lt;goals&gt;\r\n\t\t\t\t\t\t\t&lt;goal&gt;copy-dependencies&lt;/goal&gt;\r\n\t\t\t\t\t\t&lt;/goals&gt;\r\n\t\t\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t\t\t&lt;outputDirectory&gt;${project.build.directory}/test-classes/lib&lt;/outputDirectory&gt;\r\n\t\t\t\t\t\t\t&lt;overWriteReleases&gt;false&lt;/overWriteReleases&gt;\r\n\t\t\t\t\t\t\t&lt;overWriteSnapshots&gt;true&lt;/overWriteSnapshots&gt;\r\n\t\t\t\t\t\t\t&lt;overWriteIfNewer&gt;true&lt;/overWriteIfNewer&gt;\r\n\t\t\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t\t\t&lt;/execution&gt;\r\n\t\t\t\t&lt;/executions&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;3.3.0&lt;/version&gt;\r\n\t\t\t\t&lt;executions&gt;\r\n\t\t\t\t\t&lt;execution&gt;\r\n\t\t\t\t\t\t&lt;goals&gt;\r\n\t\t\t\t\t\t\t&lt;goal&gt;test-jar&lt;/goal&gt;\r\n\t\t\t\t\t\t&lt;/goals&gt;\r\n\t\t\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t\t\t&lt;archive&gt;\r\n&lt;!--\t\t\t\t\t\t\t\t&lt;manifestFile&gt;${project.build.outputDirectory}/META-INF/MANIFEST.MF&lt;/manifestFile&gt;--&gt;\r\n\t\t\t\t\t\t\t\t&lt;manifest&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;addClasspath&gt;true&lt;/addClasspath&gt;\r\n\t\t\t\t\t\t\t\t&lt;/manifest&gt;\r\n\t\t\t\t\t\t\t\t&lt;manifestEntries&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;Main-Class&gt;runner.CrystalUIMain&lt;/Main-Class&gt;\r\n\t\t\t\t\t\t\t\t&lt;/manifestEntries&gt;\r\n\t\t\t\t\t\t\t&lt;/archive&gt;\r\n\t\t\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t\t\t&lt;/execution&gt;\r\n\t\t\t\t&lt;/executions&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\nBelow is my main class:\r\n\r\n```\r\npackage runner;\r\n\r\nimport org.testng.TestListenerAdapter;\r\nimport org.testng.TestNG;\r\nimport org.testng.collections.Lists;\r\n\r\nimport java.util.List;\r\n\r\npublic class CrystalUIMain {\r\n    public static void main(String[] args) {\r\n        TestListenerAdapter tla = new TestListenerAdapter();\r\n        TestNG testng = new TestNG();\r\n        List&lt;String&gt; suites = Lists.newArrayList();\r\n        suites.add(&quot;testng_basic.xml&quot;);//path to xml..\r\n        testng.setTestSuites(suites);\r\n        testng.run();\r\n    }\r\n}\r\n```\r\n\r\nMETA-INF/MANIFEST.MF:\r\n\r\n```\r\nManifest-Version: 1.0\r\nCreated-By: Maven JAR Plugin 3.3.0\r\nBuild-Jdk-Spec: 17\r\nClass-Path: testng-7.8.0.jar jquery-3.6.1.jar selenium-java-4.9.0.jar se\r\n lenium-api-4.9.0.jar selenium-chrome-driver-4.9.0.jar selenium-chromium\r\n -driver-4.9.0.jar selenium-json-4.9.0.jar selenium-manager-4.9.0.jar se\r\n lenium-devtools-v110-4.9.0.jar selenium-devtools-v111-4.9.0.jar seleniu\r\n m-devtools-v112-4.9.0.jar selenium-devtools-v85-4.9.0.jar selenium-edge\r\n -driver-4.9.0.jar selenium-firefox-driver-4.9.0.jar selenium-ie-driver-\r\n 4.9.0.jar selenium-remote-driver-4.9.0.jar netty-buffer-4.1.91.Final.ja\r\n r netty-codec-http-4.1.91.Final.jar netty-codec-4.1.91.Final.jar netty-\r\n handler-4.1.91.Final.jar netty-common-4.1.91.Final.jar netty-transport-\r\n classes-epoll-4.1.91.Final.jar netty-transport-classes-kqueue-4.1.91.Fi\r\n nal.jar netty-transport-native-unix-common-4.1.91.Final.jar netty-trans\r\n port-4.1.91.Final.jar netty-resolver-4.1.91.Final.jar opentelemetry-api\r\n -1.25.0.jar opentelemetry-context-1.25.0.jar opentelemetry-exporter-log\r\n ging-1.25.0.jar opentelemetry-sdk-metrics-1.25.0.jar opentelemetry-sdk-\r\n logs-1.25.0-alpha.jar opentelemetry-api-logs-1.25.0-alpha.jar opentelem\r\n etry-api-events-1.25.0-alpha.jar opentelemetry-sdk-common-1.25.0.jar op\r\n entelemetry-sdk-extension-autoconfigure-spi-1.25.0.jar opentelemetry-sd\r\n k-extension-autoconfigure-1.25.0-alpha.jar opentelemetry-sdk-trace-1.25\r\n .0.jar opentelemetry-sdk-1.25.0.jar opentelemetry-semconv-1.25.0-alpha.\r\n jar jtoml-2.0.0.jar byte-buddy-1.14.4.jar commons-exec-1.3.jar async-ht\r\n tp-client-2.12.3.jar async-http-client-netty-utils-2.12.3.jar netty-cod\r\n ec-socks-4.1.60.Final.jar netty-handler-proxy-4.1.60.Final.jar netty-tr\r\n ansport-native-epoll-4.1.60.Final-linux-x86_64.jar netty-transport-nati\r\n ve-kqueue-4.1.60.Final-osx-x86_64.jar netty-reactive-streams-2.0.4.jar \r\n jakarta.activation-1.2.2.jar selenium-safari-driver-4.9.0.jar selenium-\r\n support-4.9.0.jar extentreports-5.0.9.jar rxjava-3.0.4.jar reactive-str\r\n eams-1.0.3.jar freemarker-2.3.30.jar gson-2.8.6.jar lombok-1.18.24.jar \r\n poi-ooxml-5.2.2.jar poi-5.2.2.jar commons-codec-1.15.jar commons-math3-\r\n 3.6.1.jar SparseBitSet-1.2.jar poi-ooxml-lite-5.2.2.jar xmlbeans-5.0.3.\r\n jar commons-compress-1.21.jar commons-io-2.11.0.jar curvesapi-1.07.jar \r\n commons-collections4-4.4.jar webdrivermanager-5.3.2.jar docker-java-3.2\r\n .14.jar docker-java-core-3.2.14.jar docker-java-api-3.2.14.jar jackson-\r\n annotations-2.10.3.jar jackson-databind-2.10.3.jar jackson-core-2.10.3.\r\n jar bcpkix-jdk15on-1.64.jar bcprov-jdk15on-1.64.jar jcl-over-slf4j-1.7.\r\n 30.jar docker-java-transport-httpclient5-3.2.14.jar docker-java-transpo\r\n rt-3.2.14.jar jna-5.12.1.jar dec-0.1.2.jar commons-lang3-3.12.0.jar htt\r\n pclient5-5.2.1.jar httpcore5-5.2.jar httpcore5-h2-5.2.jar winium-webdri\r\n ver-0.1.0-1.jar postgresql-42.5.0.jar checker-qual-3.5.0.jar slf4j-api-\r\n 2.0.6.jar log4j-core-2.20.0.jar log4j-api-2.20.0.jar selenium-http-jdk-\r\n client-4.8.1.jar auto-service-annotations-1.0.1.jar auto-service-1.0.1.\r\n jar auto-common-1.2.jar selenium-http-4.8.1.jar failsafe-3.3.0.jar rest\r\n -assured-5.3.0.jar groovy-4.0.6.jar groovy-xml-4.0.6.jar httpclient-4.5\r\n .13.jar httpcore-4.4.13.jar commons-logging-1.2.jar httpmime-4.5.13.jar\r\n  hamcrest-2.1.jar tagsoup-1.2.1.jar json-path-5.3.0.jar groovy-json-4.0\r\n .6.jar rest-assured-common-5.3.0.jar xml-path-5.3.0.jar json-simple-1.1\r\n .1.jar junit-4.10.jar hamcrest-core-1.1.jar guice-4.1.0.jar javax.injec\r\n t-1.jar aopalliance-1.0.jar jcommander-1.48.jar guava-32.0.1-jre.jar fa\r\n ilureaccess-1.0.1.jar listenablefuture-9999.0-empty-to-avoid-conflict-w\r\n ith-guava.jar jsr305-3.0.2.jar error_prone_annotations-2.18.0.jar j2obj\r\n c-annotations-2.8.jar\r\nMain-Class: runner.CrystalUIMain\r\n\r\n```\r\n\r\nAny suggestions as to why I am getting this error even with the manifest classpath having all the jars?","title":"NoClassDefFoundError running TestNG test jar","body":"<p>Currently I have a TestNG/Selenium/Maven/Java project that I have setup to run as a jar with a goal of <strong>test-jar</strong>.  I used the maven dependency plugin to essentially copy all the dependencies to a lib folder in the test-classes folder within target directory.  My manifest in the JAR has the Class-Path with all jars.  When I run a java -jar myjar-tests.jar I get a NoClassDefFoundError as seenb elow:</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/testng/TestListenerAdapter\n        at runner.CrystalUIMain.main(CrystalUIMain.java:11)\nCaused by: java.lang.ClassNotFoundException: org.testng.TestListenerAdapter\n        at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:581)\n        at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178)\n        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521)\n        ... 1 more\n</code></pre>\n<p>Below is my pom.xml (maven dependency plugin and goal as test-jar for maven jar plugin):</p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;com.crystalfw&lt;/groupId&gt;\n    &lt;artifactId&gt;ui&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n\n    &lt;name&gt;ui&lt;/name&gt;\n    &lt;url&gt;http://maven.apache.org&lt;/url&gt;\n\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt;\n        &lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.testng&lt;/groupId&gt;\n            &lt;artifactId&gt;testng&lt;/artifactId&gt;\n            &lt;version&gt;7.8.0&lt;/version&gt;\n            &lt;scope&gt;compile&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- https://mvnrepository.com/artifact/org.seleniumhq.selenium/selenium-java --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n            &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\n            &lt;version&gt;4.9.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.aventstack&lt;/groupId&gt;\n            &lt;artifactId&gt;extentreports&lt;/artifactId&gt;\n            &lt;version&gt;5.0.9&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;version&gt;1.18.24&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\n            &lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;\n            &lt;version&gt;5.2.2&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- https://mvnrepository.com/artifact/io.github.bonigarcia/webdrivermanager --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.github.bonigarcia&lt;/groupId&gt;\n            &lt;artifactId&gt;webdrivermanager&lt;/artifactId&gt;\n            &lt;version&gt;5.3.2&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.github.2gis.winium&lt;/groupId&gt;\n            &lt;artifactId&gt;winium-webdriver&lt;/artifactId&gt;\n            &lt;version&gt;0.1.0-1&lt;/version&gt;\n        &lt;/dependency&gt;\n\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n            &lt;version&gt;42.5.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- https://mvnrepository.com/artifact/org.slf4j/slf4j-api --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n            &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\n            &lt;version&gt;2.0.6&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- https://mvnrepository.com/artifact/org.apache.logging.log4j/log4j-core --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\n            &lt;version&gt;2.20.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\n            &lt;version&gt;2.20.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- https://mvnrepository.com/artifact/org.seleniumhq.selenium/selenium-http-jdk-client --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n            &lt;artifactId&gt;selenium-http-jdk-client&lt;/artifactId&gt;\n            &lt;version&gt;4.8.1&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- https://mvnrepository.com/artifact/io.rest-assured/rest-assured --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.rest-assured&lt;/groupId&gt;\n            &lt;artifactId&gt;rest-assured&lt;/artifactId&gt;\n            &lt;version&gt;5.3.0&lt;/version&gt;\n            &lt;!-- &lt;scope&gt;test&lt;/scope&gt; --&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.googlecode.json-simple&lt;/groupId&gt;\n            &lt;artifactId&gt;json-simple&lt;/artifactId&gt;\n            &lt;version&gt;1.1.1&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.inject&lt;/groupId&gt;\n            &lt;artifactId&gt;guice&lt;/artifactId&gt;\n            &lt;version&gt;4.1.0&lt;/version&gt;\n&lt;!--            &lt;classifier&gt;no_aop&lt;/classifier&gt;--&gt;\n&lt;!--            &lt;scope&gt;compile&lt;/scope&gt;--&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.beust&lt;/groupId&gt;\n            &lt;artifactId&gt;jcommander&lt;/artifactId&gt;\n            &lt;version&gt;1.48&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.guava&lt;/groupId&gt;\n            &lt;artifactId&gt;guava&lt;/artifactId&gt;\n            &lt;version&gt;32.0.1-jre&lt;/version&gt;\n        &lt;/dependency&gt;\n\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.8.1&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;${maven.compiler.source}&lt;/source&gt;\n                    &lt;target&gt;${maven.compiler.target}&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.6.0&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;copy-dependencies&lt;/id&gt;\n                        &lt;phase&gt;package&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;copy-dependencies&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;outputDirectory&gt;${project.build.directory}/test-classes/lib&lt;/outputDirectory&gt;\n                            &lt;overWriteReleases&gt;false&lt;/overWriteReleases&gt;\n                            &lt;overWriteSnapshots&gt;true&lt;/overWriteSnapshots&gt;\n                            &lt;overWriteIfNewer&gt;true&lt;/overWriteIfNewer&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.3.0&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;test-jar&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;archive&gt;\n&lt;!--                                &lt;manifestFile&gt;${project.build.outputDirectory}/META-INF/MANIFEST.MF&lt;/manifestFile&gt;--&gt;\n                                &lt;manifest&gt;\n                                    &lt;addClasspath&gt;true&lt;/addClasspath&gt;\n                                &lt;/manifest&gt;\n                                &lt;manifestEntries&gt;\n                                    &lt;Main-Class&gt;runner.CrystalUIMain&lt;/Main-Class&gt;\n                                &lt;/manifestEntries&gt;\n                            &lt;/archive&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p>Below is my main class:</p>\n<pre><code>package runner;\n\nimport org.testng.TestListenerAdapter;\nimport org.testng.TestNG;\nimport org.testng.collections.Lists;\n\nimport java.util.List;\n\npublic class CrystalUIMain {\n    public static void main(String[] args) {\n        TestListenerAdapter tla = new TestListenerAdapter();\n        TestNG testng = new TestNG();\n        List&lt;String&gt; suites = Lists.newArrayList();\n        suites.add(&quot;testng_basic.xml&quot;);//path to xml..\n        testng.setTestSuites(suites);\n        testng.run();\n    }\n}\n</code></pre>\n<p>META-INF/MANIFEST.MF:</p>\n<pre><code>Manifest-Version: 1.0\nCreated-By: Maven JAR Plugin 3.3.0\nBuild-Jdk-Spec: 17\nClass-Path: testng-7.8.0.jar jquery-3.6.1.jar selenium-java-4.9.0.jar se\n lenium-api-4.9.0.jar selenium-chrome-driver-4.9.0.jar selenium-chromium\n -driver-4.9.0.jar selenium-json-4.9.0.jar selenium-manager-4.9.0.jar se\n lenium-devtools-v110-4.9.0.jar selenium-devtools-v111-4.9.0.jar seleniu\n m-devtools-v112-4.9.0.jar selenium-devtools-v85-4.9.0.jar selenium-edge\n -driver-4.9.0.jar selenium-firefox-driver-4.9.0.jar selenium-ie-driver-\n 4.9.0.jar selenium-remote-driver-4.9.0.jar netty-buffer-4.1.91.Final.ja\n r netty-codec-http-4.1.91.Final.jar netty-codec-4.1.91.Final.jar netty-\n handler-4.1.91.Final.jar netty-common-4.1.91.Final.jar netty-transport-\n classes-epoll-4.1.91.Final.jar netty-transport-classes-kqueue-4.1.91.Fi\n nal.jar netty-transport-native-unix-common-4.1.91.Final.jar netty-trans\n port-4.1.91.Final.jar netty-resolver-4.1.91.Final.jar opentelemetry-api\n -1.25.0.jar opentelemetry-context-1.25.0.jar opentelemetry-exporter-log\n ging-1.25.0.jar opentelemetry-sdk-metrics-1.25.0.jar opentelemetry-sdk-\n logs-1.25.0-alpha.jar opentelemetry-api-logs-1.25.0-alpha.jar opentelem\n etry-api-events-1.25.0-alpha.jar opentelemetry-sdk-common-1.25.0.jar op\n entelemetry-sdk-extension-autoconfigure-spi-1.25.0.jar opentelemetry-sd\n k-extension-autoconfigure-1.25.0-alpha.jar opentelemetry-sdk-trace-1.25\n .0.jar opentelemetry-sdk-1.25.0.jar opentelemetry-semconv-1.25.0-alpha.\n jar jtoml-2.0.0.jar byte-buddy-1.14.4.jar commons-exec-1.3.jar async-ht\n tp-client-2.12.3.jar async-http-client-netty-utils-2.12.3.jar netty-cod\n ec-socks-4.1.60.Final.jar netty-handler-proxy-4.1.60.Final.jar netty-tr\n ansport-native-epoll-4.1.60.Final-linux-x86_64.jar netty-transport-nati\n ve-kqueue-4.1.60.Final-osx-x86_64.jar netty-reactive-streams-2.0.4.jar \n jakarta.activation-1.2.2.jar selenium-safari-driver-4.9.0.jar selenium-\n support-4.9.0.jar extentreports-5.0.9.jar rxjava-3.0.4.jar reactive-str\n eams-1.0.3.jar freemarker-2.3.30.jar gson-2.8.6.jar lombok-1.18.24.jar \n poi-ooxml-5.2.2.jar poi-5.2.2.jar commons-codec-1.15.jar commons-math3-\n 3.6.1.jar SparseBitSet-1.2.jar poi-ooxml-lite-5.2.2.jar xmlbeans-5.0.3.\n jar commons-compress-1.21.jar commons-io-2.11.0.jar curvesapi-1.07.jar \n commons-collections4-4.4.jar webdrivermanager-5.3.2.jar docker-java-3.2\n .14.jar docker-java-core-3.2.14.jar docker-java-api-3.2.14.jar jackson-\n annotations-2.10.3.jar jackson-databind-2.10.3.jar jackson-core-2.10.3.\n jar bcpkix-jdk15on-1.64.jar bcprov-jdk15on-1.64.jar jcl-over-slf4j-1.7.\n 30.jar docker-java-transport-httpclient5-3.2.14.jar docker-java-transpo\n rt-3.2.14.jar jna-5.12.1.jar dec-0.1.2.jar commons-lang3-3.12.0.jar htt\n pclient5-5.2.1.jar httpcore5-5.2.jar httpcore5-h2-5.2.jar winium-webdri\n ver-0.1.0-1.jar postgresql-42.5.0.jar checker-qual-3.5.0.jar slf4j-api-\n 2.0.6.jar log4j-core-2.20.0.jar log4j-api-2.20.0.jar selenium-http-jdk-\n client-4.8.1.jar auto-service-annotations-1.0.1.jar auto-service-1.0.1.\n jar auto-common-1.2.jar selenium-http-4.8.1.jar failsafe-3.3.0.jar rest\n -assured-5.3.0.jar groovy-4.0.6.jar groovy-xml-4.0.6.jar httpclient-4.5\n .13.jar httpcore-4.4.13.jar commons-logging-1.2.jar httpmime-4.5.13.jar\n  hamcrest-2.1.jar tagsoup-1.2.1.jar json-path-5.3.0.jar groovy-json-4.0\n .6.jar rest-assured-common-5.3.0.jar xml-path-5.3.0.jar json-simple-1.1\n .1.jar junit-4.10.jar hamcrest-core-1.1.jar guice-4.1.0.jar javax.injec\n t-1.jar aopalliance-1.0.jar jcommander-1.48.jar guava-32.0.1-jre.jar fa\n ilureaccess-1.0.1.jar listenablefuture-9999.0-empty-to-avoid-conflict-w\n ith-guava.jar jsr305-3.0.2.jar error_prone_annotations-2.18.0.jar j2obj\n c-annotations-2.8.jar\nMain-Class: runner.CrystalUIMain\n\n</code></pre>\n<p>Any suggestions as to why I am getting this error even with the manifest classpath having all the jars?</p>\n"},{"tags":["java","json","serialization","clojure"],"answers":[{"comments":[{"owner":{"account_id":6207506,"reputation":4736,"user_id":4834965,"accept_rate":75,"display_name":"Josh"},"score":0,"creation_date":1482862716,"post_id":41340405,"comment_id":69902019,"body_markdown":"@ykembayev I don&#39;t understand people who come here and ask questions, and get detailed answers like this which no doubt took time to compile, and don&#39;t even bother to upvote the answer.","body":"@ykembayev I don&#39;t understand people who come here and ask questions, and get detailed answers like this which no doubt took time to compile, and don&#39;t even bother to upvote the answer."},{"owner":{"account_id":3600446,"reputation":108,"user_id":3214583,"display_name":"ykembayev"},"score":0,"creation_date":1482896468,"post_id":41340405,"comment_id":69911873,"body_markdown":"@Josh _Thanks for the feedback! Votes cast by those with less than 15 reputation are recorded, but do not change the publicly displayed post score._","body":"@Josh <i>Thanks for the feedback! Votes cast by those with less than 15 reputation are recorded, but do not change the publicly displayed post score.</i>"}],"tags":[],"owner":{"account_id":2041247,"reputation":29451,"user_id":1822379,"accept_rate":60,"display_name":"Alan Thompson"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1686846829,"creation_date":1482821612,"answer_id":41340405,"question_id":41339445,"body_markdown":"I have renamed your example classes to make it more concrete:\r\n\r\n    public class Person {\r\n\t  String  name;\r\n\t  Address address;\r\n    }\r\n    \r\n    public class Address {\r\n\t  String street;\r\n\t  String city;\r\n    }\r\n\r\nHere is an outline of what to do. You simply define a conversion function for each class, and then compose them hierarchically:\r\n\r\n    (defn address-&gt;clj [address]\r\n\t  {:street  (.-street address)\r\n\t\tcity    (.-city address)})\r\n    \r\n    (defn person-&gt;clj [person]\r\n\t  {:name     (.-name person)\r\n\t\taddress  (address-&gt;clj (.-address person))})\r\n\r\nConsider some sample data (NOTE: constructor details omitted)\r\n\r\n    (def addr-1    (Address. &quot;123 Main St&quot; &quot;Anytown&quot;))\r\n    (def person-1  (Person.  &quot;Joe Smith&quot; addr-1))\r\n    \r\n    (someClass-&gt;clj  person-1)    ; Convert Java person-1 obj\r\n\r\nYou will get a Clojure map back that looks like:\r\n\r\n    {:name      &quot;Joe Smith&quot;\r\n\t :address \t{:street &quot;123 Main St&quot; \r\n\t\t\t     :city   &quot;Anytown&quot;}}\r\n\r\n---------------------\r\nUpdate\r\n\r\nIf you are working with a Java bean, please see also:\r\n\r\n- the [bean-dip][1] library\r\n- the [clojure.java.data][2] library\r\n\r\n\r\n  [1]: https://github.com/uwcpdx/bean-dip/\r\n  [2]: https://github.com/clojure/java.data","title":"How to serialize java class to json in clojure","body":"<p>I have renamed your example classes to make it more concrete:</p>\n<pre><code>public class Person {\n  String  name;\n  Address address;\n}\n\npublic class Address {\n  String street;\n  String city;\n}\n</code></pre>\n<p>Here is an outline of what to do. You simply define a conversion function for each class, and then compose them hierarchically:</p>\n<pre><code>(defn address-&gt;clj [address]\n  {:street  (.-street address)\n    city    (.-city address)})\n\n(defn person-&gt;clj [person]\n  {:name     (.-name person)\n    address  (address-&gt;clj (.-address person))})\n</code></pre>\n<p>Consider some sample data (NOTE: constructor details omitted)</p>\n<pre><code>(def addr-1    (Address. &quot;123 Main St&quot; &quot;Anytown&quot;))\n(def person-1  (Person.  &quot;Joe Smith&quot; addr-1))\n\n(someClass-&gt;clj  person-1)    ; Convert Java person-1 obj\n</code></pre>\n<p>You will get a Clojure map back that looks like:</p>\n<pre><code>{:name      &quot;Joe Smith&quot;\n :address   {:street &quot;123 Main St&quot; \n             :city   &quot;Anytown&quot;}}\n</code></pre>\n<hr />\n<p>Update</p>\n<p>If you are working with a Java bean, please see also:</p>\n<ul>\n<li>the <a href=\"https://github.com/uwcpdx/bean-dip/\" rel=\"nofollow noreferrer\">bean-dip</a> library</li>\n<li>the <a href=\"https://github.com/clojure/java.data\" rel=\"nofollow noreferrer\">clojure.java.data</a> library</li>\n</ul>\n"},{"comments":[{"owner":{"account_id":3600446,"reputation":108,"user_id":3214583,"display_name":"ykembayev"},"score":0,"creation_date":1482830191,"post_id":41341645,"comment_id":69886596,"body_markdown":"thanks, I searched for universal method do it. Problem was solved by clj-gson","body":"thanks, I searched for universal method do it. Problem was solved by clj-gson"}],"tags":[],"owner":{"account_id":1610297,"reputation":512,"user_id":1489467,"accept_rate":0,"display_name":"Mamun"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1482827567,"creation_date":1482827567,"answer_id":41341645,"question_id":41339445,"body_markdown":"I am not sure, I understand your question correctly. If you would like to convert java bean to clojure data structure, you could simply use clojure **bean** API. Using postwalk, you could also convert all inner part too. Find an example in bellow\r\n\r\n\r\n      (let [ao (doto (AnotherClass.)\r\n                     (.setAnotherkey &quot;Ano&quot;)\r\n                     (.setAnothervalue &quot;Ano-value&quot;))\r\n        o (doto  (SomeClass.)\r\n                 (.setKey &quot;A&quot;)\r\n                 (.setValue &quot;A-value&quot;)\r\n                 (.setAnotherClass ao))]\r\n       (-&gt;&gt; (dissoc (bean o) :class)\r\n             (w/postwalk (fn [v]\r\n                        (if (contains? #{AnotherClass SomeClass} (type v))\r\n                         (dissoc (bean v) :class)\r\n                         v)))))\r\n\r\n    ;;Output {:anotherClass {:anotherkey &quot;Ano&quot;, :anothervalue &quot;Ano-value&quot;}, :key &quot;A&quot;, :value &quot;A-value&quot;}","title":"How to serialize java class to json in clojure","body":"<p>I am not sure, I understand your question correctly. If you would like to convert java bean to clojure data structure, you could simply use clojure <strong>bean</strong> API. Using postwalk, you could also convert all inner part too. Find an example in bellow</p>\n\n<pre><code>  (let [ao (doto (AnotherClass.)\n                 (.setAnotherkey \"Ano\")\n                 (.setAnothervalue \"Ano-value\"))\n    o (doto  (SomeClass.)\n             (.setKey \"A\")\n             (.setValue \"A-value\")\n             (.setAnotherClass ao))]\n   (-&gt;&gt; (dissoc (bean o) :class)\n         (w/postwalk (fn [v]\n                    (if (contains? #{AnotherClass SomeClass} (type v))\n                     (dissoc (bean v) :class)\n                     v)))))\n\n;;Output {:anotherClass {:anotherkey \"Ano\", :anothervalue \"Ano-value\"}, :key \"A\", :value \"A-value\"}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3600446,"reputation":108,"user_id":3214583,"display_name":"ykembayev"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1482829968,"creation_date":1482829968,"answer_id":41342196,"question_id":41339445,"body_markdown":"Thanks everybody. Problem was solved by [clj-gson][1]\r\n\r\n\r\n  [1]: https://github.com/spoon16/clj-gson","title":"How to serialize java class to json in clojure","body":"<p>Thanks everybody. Problem was solved by <a href=\"https://github.com/spoon16/clj-gson\" rel=\"nofollow noreferrer\">clj-gson</a></p>\n"},{"tags":[],"owner":{"account_id":40443,"reputation":1902,"user_id":117220,"accept_rate":67,"display_name":"Petr Gladkikh"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1581437768,"creation_date":1503047318,"answer_id":45752803,"question_id":41339445,"body_markdown":"With `clojure.data.json` you can extend writer protocol when necessary. E.g.:\r\n```clojure\r\n(require &#39;clojure.data.json)\r\n(extend-type java.util.UUID\r\n  clojure.data.json/JSONWriter\r\n  (-write [object ^PrintWriter out]\r\n     (.print out (str &quot; something &quot;))))\r\n```\r\n","title":"How to serialize java class to json in clojure","body":"<p>With <code>clojure.data.json</code> you can extend writer protocol when necessary. E.g.:</p>\n\n<pre class=\"lang-clj prettyprint-override\"><code>(require 'clojure.data.json)\n(extend-type java.util.UUID\n  clojure.data.json/JSONWriter\n  (-write [object ^PrintWriter out]\n     (.print out (str \" something \"))))\n</code></pre>\n"}],"owner":{"account_id":3600446,"reputation":108,"user_id":3214583,"display_name":"ykembayev"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":758,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":41342196,"answer_count":4,"score":3,"last_activity_date":1686846829,"creation_date":1482816182,"question_id":41339445,"body_markdown":"I have many java classes, which can contain another class\r\n\r\n    public class SomeClass(){\r\n        private String key;\r\n        private String value;\r\n        private AnotherClass anotherClass;\r\n    }\r\n\r\n    public class AnotherClass(){\r\n        private String anotherkey;\r\n        private String anothervalue;\r\n    }\r\n\r\nHow can convert SomeClass to json in clojure? Already tried to use [cheshire][1], [clojure/data.json][2], but unsuccessfully\r\n\r\n\r\n  [1]: https://github.com/dakrone/cheshire#cheshire\r\n  [2]: https://github.com/clojure/data.json","title":"How to serialize java class to json in clojure","body":"<p>I have many java classes, which can contain another class</p>\n\n<pre><code>public class SomeClass(){\n    private String key;\n    private String value;\n    private AnotherClass anotherClass;\n}\n\npublic class AnotherClass(){\n    private String anotherkey;\n    private String anothervalue;\n}\n</code></pre>\n\n<p>How can convert SomeClass to json in clojure? Already tried to use <a href=\"https://github.com/dakrone/cheshire#cheshire\" rel=\"nofollow noreferrer\">cheshire</a>, <a href=\"https://github.com/clojure/data.json\" rel=\"nofollow noreferrer\">clojure/data.json</a>, but unsuccessfully</p>\n"},{"tags":["java","mysql"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1686832814,"post_id":76482567,"comment_id":134855576,"body_markdown":"Stop using the oudated `java.util.Date` class. Move to the newer `java.time.` API","body":"Stop using the oudated <code>java.util.Date</code> class. Move to the newer <code>java.time.</code> API"},{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":0,"creation_date":1686832819,"post_id":76482567,"comment_id":134855579,"body_markdown":"You better not use `Date` and `Calendar` anymore, use `java.time`, maybe `String insertMe = LocalDateTime.now().format(DateTimeFormatter.ofPattern(&quot;uuuu-MM-dd HH:mm:ss&quot;);`","body":"You better not use <code>Date</code> and <code>Calendar</code> anymore, use <code>java.time</code>, maybe <code>String insertMe = LocalDateTime.now().format(DateTimeFormatter.ofPattern(&quot;uuuu&zwnj;&#8203;-MM-dd HH:mm:ss&quot;);</code>"},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1686832862,"post_id":76482567,"comment_id":134855589,"body_markdown":"There are many examples in the internet and on stack overflow. Try to search before wirting a new question","body":"There are many examples in the internet and on stack overflow. Try to search before wirting a new question"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":2,"creation_date":1686834005,"post_id":76482567,"comment_id":134855867,"body_markdown":"Why do you need a `String`? What is the datatype of the column in your database?  If it is anything related to dates/times/timestamps leave it as is and let JDBC do the proper thing.","body":"Why do you need a <code>String</code>? What is the datatype of the column in your database?  If it is anything related to dates/times/timestamps leave it as is and let JDBC do the proper thing."}],"answers":[{"tags":[],"owner":{"account_id":28819895,"reputation":99,"user_id":22072627,"display_name":"CaptainObvious"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686833423,"creation_date":1686833423,"answer_id":76482667,"question_id":76482567,"body_markdown":"To convert a Date object to a String in the format &quot;yyyy-MM-dd HH:mm:ss&quot;, you can use the SimpleDateFormat class in Java. \r\n\r\n```import java.text.SimpleDateFormat;\r\nimport java.util.Calendar;\r\nimport java.util.Date;\r\n\r\npublic class DateToStringExample {\r\n    public static void main(String[] args) {\r\n        Calendar calendar = Calendar.getInstance();\r\n        Date date = calendar.getTime();\r\n\r\n        SimpleDateFormat dateFormat = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);\r\n        String dateString = dateFormat.format(date);\r\n\r\n        System.out.println(&quot;Formatted Date String: &quot; + dateString);\r\n    }\r\n}\r\n```\r\n\r\nI made an example for you, you first obtain the current date and time using the Calendar class. Then, you create an instance of SimpleDateFormat and specify the desired format pattern as &quot;yyyy-MM-dd HH:mm:ss&quot;. Finally, you format the Date object using the format() method of SimpleDateFormat, which returns the formatted date string.\r\n\r\nYou can then use the dateString variable to insert the formatted date into a MySQL table","title":"Convert java Date format into a string so MySQL can read that string","body":"<p>To convert a Date object to a String in the format &quot;yyyy-MM-dd HH:mm:ss&quot;, you can use the SimpleDateFormat class in Java.</p>\n<pre><code>import java.util.Calendar;\nimport java.util.Date;\n\npublic class DateToStringExample {\n    public static void main(String[] args) {\n        Calendar calendar = Calendar.getInstance();\n        Date date = calendar.getTime();\n\n        SimpleDateFormat dateFormat = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);\n        String dateString = dateFormat.format(date);\n\n        System.out.println(&quot;Formatted Date String: &quot; + dateString);\n    }\n}\n</code></pre>\n<p>I made an example for you, you first obtain the current date and time using the Calendar class. Then, you create an instance of SimpleDateFormat and specify the desired format pattern as &quot;yyyy-MM-dd HH:mm:ss&quot;. Finally, you format the Date object using the format() method of SimpleDateFormat, which returns the formatted date string.</p>\n<p>You can then use the dateString variable to insert the formatted date into a MySQL table</p>\n"},{"tags":[],"owner":{"account_id":9527261,"reputation":93,"user_id":7080129,"display_name":"sstlv_seraph"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686833835,"creation_date":1686833835,"answer_id":76482723,"question_id":76482567,"body_markdown":"You can use SimpleDateFormat:\r\n\r\n     Date date = new Date();\r\n     SimpleDateFormat dateFormat = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);\r\n     String formattedDate = dateFormat.format(date);\r\n\r\nor\r\n\r\n    Date date = new Date();\r\n    DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss&quot;);\r\n    String formattedDate = formatter.format(date.toInstant());","title":"Convert java Date format into a string so MySQL can read that string","body":"<p>You can use SimpleDateFormat:</p>\n<pre><code> Date date = new Date();\n SimpleDateFormat dateFormat = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);\n String formattedDate = dateFormat.format(date);\n</code></pre>\n<p>or</p>\n<pre><code>Date date = new Date();\nDateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss&quot;);\nString formattedDate = formatter.format(date.toInstant());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686846393,"creation_date":1686846393,"answer_id":76483714,"question_id":76482567,"body_markdown":"There are a few ways to accomplish this.\r\n\r\nThe quickest way would be to use a _String_ format using the _tF_ and _tT_ specifiers.  \r\nThe _Formatter_ class offers the complete list of specifiers.  \r\n_[Formatter (Java SE 20 &amp;amp; JDK 20) &amp;ndash; Date/Time Conversions](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Formatter.html#dt)_.\r\n\r\nAs a note, the _1$_ here is to de-reference the first argument&amp;mdash;as opposed to adding the argument twice.\r\n\r\n```java\r\nString string = &quot;%tF %1$tT&quot;.formatted(date.getTime());\r\n```\r\n\r\nOutput\r\n\r\n```none\r\n2023-06-15 12:18:49\r\n```\r\n\r\nAdditionally, as others have recommended, you can use the _[SimpleDateFormat](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/text/SimpleDateFormat.html)_ class.\r\n\r\nAgain, the complete list of format specifiers can be found within the JavaDoc, linked above.\r\n\r\n```java\r\nSimpleDateFormat format = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);\r\nString string = format.format(date);\r\n```","title":"Convert java Date format into a string so MySQL can read that string","body":"<p>There are a few ways to accomplish this.</p>\n<p>The quickest way would be to use a <em>String</em> format using the <em>tF</em> and <em>tT</em> specifiers.<br />\nThe <em>Formatter</em> class offers the complete list of specifiers.<br />\n<em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Formatter.html#dt\" rel=\"nofollow noreferrer\">Formatter (Java SE 20 &amp; JDK 20) – Date/Time Conversions</a></em>.</p>\n<p>As a note, the <em>1$</em> here is to de-reference the first argument—as opposed to adding the argument twice.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String string = &quot;%tF %1$tT&quot;.formatted(date.getTime());\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>2023-06-15 12:18:49\n</code></pre>\n<p>Additionally, as others have recommended, you can use the <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/text/SimpleDateFormat.html\" rel=\"nofollow noreferrer\">SimpleDateFormat</a></em> class.</p>\n<p>Again, the complete list of format specifiers can be found within the JavaDoc, linked above.</p>\n<pre class=\"lang-java prettyprint-override\"><code>SimpleDateFormat format = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);\nString string = format.format(date);\n</code></pre>\n"}],"owner":{"account_id":24836356,"reputation":11,"user_id":18714950,"display_name":"Renato Pomparau"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1686846393,"creation_date":1686832704,"question_id":76482567,"body_markdown":"I need to convert a Date in java:\r\n`Date date=calendar.getTime();` // yyyy-MM-dd\r\nI want to turn it into a String &quot;yyyy-MM-dd HH:mm:ss&quot; so i can insert it into a table in MySQL. Any ideea?\r\n","title":"Convert java Date format into a string so MySQL can read that string","body":"<p>I need to convert a Date in java:\n<code>Date date=calendar.getTime();</code> // yyyy-MM-dd\nI want to turn it into a String &quot;yyyy-MM-dd HH:mm:ss&quot; so i can insert it into a table in MySQL. Any ideea?</p>\n"},{"tags":["java","jaxb","classloader","websphere-liberty"],"answers":[{"tags":[],"owner":{"account_id":13739626,"reputation":116,"user_id":9915084,"display_name":"Thomas Johnson"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686846113,"creation_date":1686846113,"answer_id":76483676,"question_id":76468344,"body_markdown":"unfortunately, I do not think it&#39;s possible to extend the `NamespacePrefixMapper` class while using the `jaxb-2.2` feature on Liberty. I&#39;ve tested this myself with a custom user feature, and hit a `NoClassDefFoundError`. The reason this doesn&#39;t work with a user feature, is that the `jaxb-2.2` OSGi feature was written very intentionally to not expose any of the internal implementation packages, `com.sun.xml.bind.*`, as `IBM-API-Package` in it&#39;s feature manifest file.  \r\n\r\nIf you have a hard dependency on the `NamespacePrefixMapper` class, you might think about packaging your own JAXB specification and implementation and not enabling the `jaxb-2.2` feature on Liberty. You might also look at alternatives to using the `NamespacePrefixMapper`. You may or may not find this link useful for that https://stackoverflow.com/questions/3289644/define-spring-jaxb-namespaces-without-using-namespaceprefixmapper. ","title":"Application JAXB namespace mapper custom implementation not working in Liberty","body":"<p>unfortunately, I do not think it's possible to extend the <code>NamespacePrefixMapper</code> class while using the <code>jaxb-2.2</code> feature on Liberty. I've tested this myself with a custom user feature, and hit a <code>NoClassDefFoundError</code>. The reason this doesn't work with a user feature, is that the <code>jaxb-2.2</code> OSGi feature was written very intentionally to not expose any of the internal implementation packages, <code>com.sun.xml.bind.*</code>, as <code>IBM-API-Package</code> in it's feature manifest file.</p>\n<p>If you have a hard dependency on the <code>NamespacePrefixMapper</code> class, you might think about packaging your own JAXB specification and implementation and not enabling the <code>jaxb-2.2</code> feature on Liberty. You might also look at alternatives to using the <code>NamespacePrefixMapper</code>. You may or may not find this link useful for that <a href=\"https://stackoverflow.com/questions/3289644/define-spring-jaxb-namespaces-without-using-namespaceprefixmapper\">Define Spring JAXB namespaces without using NamespacePrefixMapper</a>.</p>\n"}],"owner":{"account_id":8738198,"reputation":31,"user_id":6536060,"display_name":"Igupta"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1686846113,"creation_date":1686686690,"question_id":76468344,"body_markdown":"I&#39;m migrating from WAS to Liberty where in we are having JAXB as application dependency. I have extended the NamespaceMapper of the jaxb-impl and when I&#39;m trying to set it to Marshaller Property I&#39;m getting the error that the nampespace mapper should be instance of com.sun.xml.bind.marshaller.NamespacePrefixMapper and not of my custom namespace mapper.\r\n\r\n```\r\npublic class MyNamespaceMapper extends com.sun.xml.bind.marshaller.NamespacePrefixMapper{\r\n// custom logic.\r\n}\r\nJAXBContext context =JAXBContext.newInstance(&quot;class&quot;);\r\nMarshaller marshaller = context.createMarshaller();\r\nmarshaller.setProperty(&quot;com.sun.xml.bind.namespacePrefixMapper&quot;, new MyNamespaceMapper());\r\n```\r\n\r\n\r\n\r\nI have tried changing the delegation to parent last for the jaxb library but then I run into classloader issues.\r\nI tried using the ContextClassLoader but I keep running into the same issue.\r\nI tried creating the liberty user feature as well but I was unable run it correctly. Here is the maifest files of the feature I tried to create.\r\n\r\nFeature-marshaller.MF\r\n```\r\n\r\nSubsystem-ManifestVersion: 1.0\r\nSubsystem-SymbolicName: m-1.0.0; visibility:=public\r\nSubsystem-Version: 1.0.0.qualifier\r\nSubsystem-Type: osgi.subsystem.feature\r\nSubsystem-Content: marshaller; version=&quot;[1,1.0.100)&quot;\r\nIBM-Feature-Version: 2\r\nIBM-API-Package: com.sun.xml.bind.marshaller; type=&quot;api&quot;\r\nIBM-ShortName: m-1.0.0\r\n\r\n```\r\nMANIFEST.MF\r\n```\r\nManifest-Version: 1.0\r\nBundle-ManifestVersion: 2\r\nBundle-Name: marshaller\r\nBundle-SymbolicName: marshaller\r\nBundle-Version: 1.0.0\r\nImport-Package: org.osgi.framework\r\nBundle-RequiredExecutionEnvironment: JavaSE-1.8\r\nExport-Package: com.sun.xml.bind.marshaller\r\nBundle-ClassPath: jaxb-impl-1.0.jar\r\n\r\n```\r\nI tried to create this OSGI bundle from the option create plugin from existing jar and I pointed to the jaxb jar. and then I created these Manife`your text`st files.\r\n\r\nCan someone please help me fix this issue?\r\n\r\n","title":"Application JAXB namespace mapper custom implementation not working in Liberty","body":"<p>I'm migrating from WAS to Liberty where in we are having JAXB as application dependency. I have extended the NamespaceMapper of the jaxb-impl and when I'm trying to set it to Marshaller Property I'm getting the error that the nampespace mapper should be instance of com.sun.xml.bind.marshaller.NamespacePrefixMapper and not of my custom namespace mapper.</p>\n<pre><code>public class MyNamespaceMapper extends com.sun.xml.bind.marshaller.NamespacePrefixMapper{\n// custom logic.\n}\nJAXBContext context =JAXBContext.newInstance(&quot;class&quot;);\nMarshaller marshaller = context.createMarshaller();\nmarshaller.setProperty(&quot;com.sun.xml.bind.namespacePrefixMapper&quot;, new MyNamespaceMapper());\n</code></pre>\n<p>I have tried changing the delegation to parent last for the jaxb library but then I run into classloader issues.\nI tried using the ContextClassLoader but I keep running into the same issue.\nI tried creating the liberty user feature as well but I was unable run it correctly. Here is the maifest files of the feature I tried to create.</p>\n<p>Feature-marshaller.MF</p>\n<pre><code>\nSubsystem-ManifestVersion: 1.0\nSubsystem-SymbolicName: m-1.0.0; visibility:=public\nSubsystem-Version: 1.0.0.qualifier\nSubsystem-Type: osgi.subsystem.feature\nSubsystem-Content: marshaller; version=&quot;[1,1.0.100)&quot;\nIBM-Feature-Version: 2\nIBM-API-Package: com.sun.xml.bind.marshaller; type=&quot;api&quot;\nIBM-ShortName: m-1.0.0\n\n</code></pre>\n<p>MANIFEST.MF</p>\n<pre><code>Manifest-Version: 1.0\nBundle-ManifestVersion: 2\nBundle-Name: marshaller\nBundle-SymbolicName: marshaller\nBundle-Version: 1.0.0\nImport-Package: org.osgi.framework\nBundle-RequiredExecutionEnvironment: JavaSE-1.8\nExport-Package: com.sun.xml.bind.marshaller\nBundle-ClassPath: jaxb-impl-1.0.jar\n\n</code></pre>\n<p>I tried to create this OSGI bundle from the option create plugin from existing jar and I pointed to the jaxb jar. and then I created these Manife<code>your text</code>st files.</p>\n<p>Can someone please help me fix this issue?</p>\n"},{"tags":["java","spring-boot","telegram-bot"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1643892491,"post_id":70971550,"comment_id":125462931,"body_markdown":"If you look at the code for the bot it uses Spring Boot 2.5 and not Spring Boot 2.6. Now it doesn&#39;t have the mean it doesn&#39;t work with 2.6 but it definitely hasn&#39;t been tested with it. So I would suggest downgrading to 2.5.x (whatever the latest version of that is).","body":"If you look at the code for the bot it uses Spring Boot 2.5 and not Spring Boot 2.6. Now it doesn&#39;t have the mean it doesn&#39;t work with 2.6 but it definitely hasn&#39;t been tested with it. So I would suggest downgrading to 2.5.x (whatever the latest version of that is)."}],"answers":[{"tags":[],"owner":{"account_id":27686348,"reputation":9,"user_id":21134035,"display_name":"Vladyslav Tupchiienko"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1675350248,"creation_date":1675350190,"answer_id":75325082,"question_id":70971550,"body_markdown":"Try to register your bot manually. \r\n\r\n1. Create bean for TelegramBotsAPI:  \r\n\r\n        @Bean  \r\n        public TelegramBotsApi telegramBotsApi() {  \r\n            return new TelegramBotsApi(DefaultBotSession.class);  \r\n        }\r\n\r\n  \r\n\r\n2. Register your bot in the constructor:\r\n\r\n        @Component\r\n        public class MySecretaryBot extends TelegramLongPollingBot {\r\n        \r\n            @Autowired\r\n            public MySecretaryBot(TelegramBotsApi telegramBotsApi) {\r\n                telegramBotsApi.registerBot(this);\r\n            }\r\n    \r\n            ...\r\n    \r\n        }\r\n\r\n","title":"Trying to implement telegrambots-spring-boot-starter and create Telegram bot, but it doesn&#39;t work","body":"<p>Try to register your bot manually.</p>\n<ol>\n<li><p>Create bean for TelegramBotsAPI:</p>\n<pre><code> @Bean  \n public TelegramBotsApi telegramBotsApi() {  \n     return new TelegramBotsApi(DefaultBotSession.class);  \n }\n</code></pre>\n</li>\n<li><p>Register your bot in the constructor:</p>\n<pre><code> @Component\n public class MySecretaryBot extends TelegramLongPollingBot {\n\n     @Autowired\n     public MySecretaryBot(TelegramBotsApi telegramBotsApi) {\n         telegramBotsApi.registerBot(this);\n     }\n\n     ...\n\n }\n</code></pre>\n</li>\n</ol>\n"},{"comments":[{"owner":{"account_id":1261634,"reputation":24571,"user_id":1219755,"accept_rate":84,"display_name":"alexanoid"},"score":0,"creation_date":1678381919,"post_id":75441038,"comment_id":133525834,"body_markdown":"Thanks! With Spring Boot 3 the following in the component scan `org.telegram.telegrambots` did the trick!","body":"Thanks! With Spring Boot 3 the following in the component scan <code>org.telegram.telegrambots</code> did the trick!"}],"tags":[],"owner":{"account_id":22248768,"reputation":11,"user_id":18965881,"display_name":"Ivan Kaliuzhnyi"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1676321302,"creation_date":1676321302,"answer_id":75441038,"question_id":70971550,"body_markdown":"You should set scanning directive.\r\nTry this:\r\n\r\n    @SpringBootApplication\r\n    @ComponentScan(basePackages = {\r\n            &quot;com.telegram.secretary.bot&quot;,\r\n            &quot;org.telegram.telegrambots&quot;\r\n    })\r\n    public class Application {\r\n    \r\n        public static void main(String[] args) {\r\n            SpringApplication.run(Application.class, args);\r\n        }\r\n    \r\n    }","title":"Trying to implement telegrambots-spring-boot-starter and create Telegram bot, but it doesn&#39;t work","body":"<p>You should set scanning directive.\nTry this:</p>\n<pre><code>@SpringBootApplication\n@ComponentScan(basePackages = {\n        &quot;com.telegram.secretary.bot&quot;,\n        &quot;org.telegram.telegrambots&quot;\n})\npublic class Application {\n\n    public static void main(String[] args) {\n        SpringApplication.run(Application.class, args);\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13271068,"reputation":312,"user_id":9582156,"display_name":"bovae"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1686846068,"creation_date":1686846068,"answer_id":76483671,"question_id":70971550,"body_markdown":"Your version of `telegrambots-spring-boot-starter` probably was not updated for Spring Boot 2.7.0 and newer support.\r\nSince Spring Boot 2.7.0 there was a change related to auto-configuration ([Release Notes][1]).\r\n\r\nIn order to make it work – create a new file under `src/main/resources/META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports` and put the next line there:\r\n\r\n    org.telegram.telegrambots.starter.TelegramBotStarterConfiguration\r\n\r\n\r\n  [1]: https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-2.7-Release-Notes#changes-to-auto-configuration","title":"Trying to implement telegrambots-spring-boot-starter and create Telegram bot, but it doesn&#39;t work","body":"<p>Your version of <code>telegrambots-spring-boot-starter</code> probably was not updated for Spring Boot 2.7.0 and newer support.\nSince Spring Boot 2.7.0 there was a change related to auto-configuration (<a href=\"https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-2.7-Release-Notes#changes-to-auto-configuration\" rel=\"nofollow noreferrer\">Release Notes</a>).</p>\n<p>In order to make it work – create a new file under <code>src/main/resources/META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports</code> and put the next line there:</p>\n<pre><code>org.telegram.telegrambots.starter.TelegramBotStarterConfiguration\n</code></pre>\n"}],"owner":{"account_id":12426544,"reputation":29,"user_id":9050960,"display_name":"This Immortal"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2572,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1686846068,"creation_date":1643892295,"question_id":70971550,"body_markdown":"I use Spring boot and telegrambots-spring-boot-starter dependency. I did all things as it showed in this repository:\r\nhttps://github.com/rubenlagus/TelegramBots/tree/master/telegrambots-spring-boot-starter. \r\nBut it didn&#39;t work. \r\n\r\n**My pom.xml:**\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.6.3&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.telegram&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;secretary.bot&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;secretary.bot&lt;/name&gt;\r\n\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;1.8&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.telegram&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;telegrambots-spring-boot-starter&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;5.7.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;2.6.3&lt;/version&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\n**My Bot class:**\r\n```\r\npackage com.telegram.secretary.bot;\r\n\r\nimport org.springframework.stereotype.Component;\r\nimport org.telegram.telegrambots.bots.TelegramLongPollingBot;\r\nimport org.telegram.telegrambots.meta.api.methods.send.SendMessage;\r\nimport org.telegram.telegrambots.meta.api.objects.Update;\r\nimport org.telegram.telegrambots.meta.exceptions.TelegramApiException;\r\n\r\n\r\nimport java.util.List;\r\n\r\n@Component\r\npublic class MySecretaryBot extends TelegramLongPollingBot {\r\n\r\n    @Override\r\n    public String getBotUsername() {\r\n        return &quot;Oyaqbot&quot;;\r\n    }\r\n\r\n    @Override\r\n    public String getBotToken() {\r\n        return &quot;5240178378:AAHA6GVOT2fGp_pFMyXD75LEBlms6iEVtSs&quot;;\r\n    }\r\n\r\n    @Override\r\n    public void onRegister() {\r\n\r\n    }\r\n\r\n    @Override\r\n    public void onUpdateReceived(Update update) {\r\n\r\n        String command = update.getMessage().getText();\r\n\r\n        if(command.equals(&quot;/hello&quot;)){\r\n            String message = &quot;Hello, dear friend!&quot;;\r\n\r\n            SendMessage response = new SendMessage();\r\n            response.setChatId(update.getMessage().getChatId().toString());\r\n            response.setText(message);\r\n\r\n            try {\r\n                execute(response);\r\n            }\r\n            catch (TelegramApiException e){\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void onUpdatesReceived(List&lt;Update&gt; updates) {\r\n\r\n    }\r\n}\r\n```\r\n\r\n**My Main Spring boot class:**\r\n```\r\npackage com.telegram.secretary.bot;\r\n\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\n\r\n\r\n@SpringBootApplication\r\npublic class Application {\r\n\r\n\tpublic static void main(String[] args) {\r\n\r\n\t\tSpringApplication.run(Application.class, args);\r\n\t}\r\n\r\n}\r\n```\r\nNote: According to the repository telegram bot starter for Spring boot automatically registers your bot and no need registration code. And ApiContextInitializer.init(); method also doesn&#39;t exist anymore. \r\n","title":"Trying to implement telegrambots-spring-boot-starter and create Telegram bot, but it doesn&#39;t work","body":"<p>I use Spring boot and telegrambots-spring-boot-starter dependency. I did all things as it showed in this repository:\n<a href=\"https://github.com/rubenlagus/TelegramBots/tree/master/telegrambots-spring-boot-starter\" rel=\"nofollow noreferrer\">https://github.com/rubenlagus/TelegramBots/tree/master/telegrambots-spring-boot-starter</a>.\nBut it didn't work.</p>\n<p><strong>My pom.xml:</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.6.3&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.telegram&lt;/groupId&gt;\n    &lt;artifactId&gt;secretary.bot&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;secretary.bot&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        \n        &lt;dependency&gt;\n            &lt;groupId&gt;org.telegram&lt;/groupId&gt;\n            &lt;artifactId&gt;telegrambots-spring-boot-starter&lt;/artifactId&gt;\n            &lt;version&gt;5.7.1&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.6.3&lt;/version&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p><strong>My Bot class:</strong></p>\n<pre><code>package com.telegram.secretary.bot;\n\nimport org.springframework.stereotype.Component;\nimport org.telegram.telegrambots.bots.TelegramLongPollingBot;\nimport org.telegram.telegrambots.meta.api.methods.send.SendMessage;\nimport org.telegram.telegrambots.meta.api.objects.Update;\nimport org.telegram.telegrambots.meta.exceptions.TelegramApiException;\n\n\nimport java.util.List;\n\n@Component\npublic class MySecretaryBot extends TelegramLongPollingBot {\n\n    @Override\n    public String getBotUsername() {\n        return &quot;Oyaqbot&quot;;\n    }\n\n    @Override\n    public String getBotToken() {\n        return &quot;5240178378:AAHA6GVOT2fGp_pFMyXD75LEBlms6iEVtSs&quot;;\n    }\n\n    @Override\n    public void onRegister() {\n\n    }\n\n    @Override\n    public void onUpdateReceived(Update update) {\n\n        String command = update.getMessage().getText();\n\n        if(command.equals(&quot;/hello&quot;)){\n            String message = &quot;Hello, dear friend!&quot;;\n\n            SendMessage response = new SendMessage();\n            response.setChatId(update.getMessage().getChatId().toString());\n            response.setText(message);\n\n            try {\n                execute(response);\n            }\n            catch (TelegramApiException e){\n                e.printStackTrace();\n            }\n        }\n    }\n\n    @Override\n    public void onUpdatesReceived(List&lt;Update&gt; updates) {\n\n    }\n}\n</code></pre>\n<p><strong>My Main Spring boot class:</strong></p>\n<pre><code>package com.telegram.secretary.bot;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n\n@SpringBootApplication\npublic class Application {\n\n    public static void main(String[] args) {\n\n        SpringApplication.run(Application.class, args);\n    }\n\n}\n</code></pre>\n<p>Note: According to the repository telegram bot starter for Spring boot automatically registers your bot and no need registration code. And ApiContextInitializer.init(); method also doesn't exist anymore.</p>\n"},{"tags":["java","xml","xml-parsing","erp"],"comments":[{"owner":{"account_id":1020072,"reputation":233593,"user_id":1030675,"display_name":"choroba"},"score":4,"creation_date":1686846107,"post_id":76483641,"comment_id":134857447,"body_markdown":"Where does the value come from? It&#39;s not present in the XML anywhere. Also, what code do you use to extract it?","body":"Where does the value come from? It&#39;s not present in the XML anywhere. Also, what code do you use to extract it?"},{"owner":{"account_id":1692034,"reputation":3196,"user_id":1554195,"display_name":"tquadrat"},"score":0,"creation_date":1686853133,"post_id":76483641,"comment_id":134858867,"body_markdown":"The issue is with the output, not with the input data. Something that is taken from just your description. But if you want an explanation on how to fix this, you need to show the code you use.","body":"The issue is with the output, not with the input data. Something that is taken from just your description. But if you want an explanation on how to fix this, you need to show the code you use."}],"owner":{"account_id":19840472,"reputation":109,"user_id":14533154,"display_name":"AdnanKattekaden"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686846024,"creation_date":1686845832,"question_id":76483641,"body_markdown":"I have an XML code snippet as follows:\r\n```\r\n&lt;element id=&quot;billNoPre&quot; class=&quot;LabelText&quot; value=&quot;Reference:0-&quot; field=&quot;&quot;&gt;\r\n    &lt;matrix x=&quot;0&quot; y=&quot;0&quot; height=&quot;10&quot; scaleX=&quot;1&quot; scaleY=&quot;1&quot; rotation=&quot;0&quot; /&gt;\r\n    &lt;style fontStyle=&quot;normal&quot; lineHeight=&quot;100%&quot; textAlign=&quot;right&quot; fontSize=&quot;10&quot; fontWeight=&quot;bold&quot; fontFamily=&quot;calibriEmbedded&quot; /&gt;\r\n&lt;/element&gt;\r\n\r\n&lt;element id=&quot;billNo&quot; class=&quot;LabelText&quot; prefixElement=&quot;billNoPre&quot; value=&quot;00.00&quot; field=&quot;billNumber&quot;&gt;\r\n    &lt;matrix x=&quot;440&quot; y=&quot;15&quot; height=&quot;15&quot; scaleX=&quot;1&quot; scaleY=&quot;1&quot; rotation=&quot;0&quot; /&gt;\r\n    &lt;style fontStyle=&quot;normal&quot; lineHeight=&quot;100%&quot; textAlign=&quot;right&quot; fontWeight=&quot;bold&quot; fontSize=&quot;10&quot; fontFamily=&quot;calibriEmbedded&quot; /&gt;\r\n&lt;/element&gt;\r\n```\r\nWhen I retrieve the value of the billNo element, it includes extra whitespace between the prefix &quot;Reference:0-&quot; and the actual value &quot;4564564564&quot;. The current output is &quot;Reference:0- 4564564564&quot;, but I want it to be &quot;Reference:0-4564564564&quot; without any extra whitespace.\r\n\r\nHow can I modify the code to achieve the desired output?","title":"How to remove extra whitespace between prefix and value in XML element using attributes?","body":"<p>I have an XML code snippet as follows:</p>\n<pre><code>&lt;element id=&quot;billNoPre&quot; class=&quot;LabelText&quot; value=&quot;Reference:0-&quot; field=&quot;&quot;&gt;\n    &lt;matrix x=&quot;0&quot; y=&quot;0&quot; height=&quot;10&quot; scaleX=&quot;1&quot; scaleY=&quot;1&quot; rotation=&quot;0&quot; /&gt;\n    &lt;style fontStyle=&quot;normal&quot; lineHeight=&quot;100%&quot; textAlign=&quot;right&quot; fontSize=&quot;10&quot; fontWeight=&quot;bold&quot; fontFamily=&quot;calibriEmbedded&quot; /&gt;\n&lt;/element&gt;\n\n&lt;element id=&quot;billNo&quot; class=&quot;LabelText&quot; prefixElement=&quot;billNoPre&quot; value=&quot;00.00&quot; field=&quot;billNumber&quot;&gt;\n    &lt;matrix x=&quot;440&quot; y=&quot;15&quot; height=&quot;15&quot; scaleX=&quot;1&quot; scaleY=&quot;1&quot; rotation=&quot;0&quot; /&gt;\n    &lt;style fontStyle=&quot;normal&quot; lineHeight=&quot;100%&quot; textAlign=&quot;right&quot; fontWeight=&quot;bold&quot; fontSize=&quot;10&quot; fontFamily=&quot;calibriEmbedded&quot; /&gt;\n&lt;/element&gt;\n</code></pre>\n<p>When I retrieve the value of the billNo element, it includes extra whitespace between the prefix &quot;Reference:0-&quot; and the actual value &quot;4564564564&quot;. The current output is &quot;Reference:0- 4564564564&quot;, but I want it to be &quot;Reference:0-4564564564&quot; without any extra whitespace.</p>\n<p>How can I modify the code to achieve the desired output?</p>\n"},{"tags":["java","amazon-dynamodb"],"answers":[{"tags":[],"owner":{"account_id":257345,"reputation":6764,"user_id":538697,"display_name":"hunterhacker"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686845938,"creation_date":1686845938,"answer_id":76483657,"question_id":76483526,"body_markdown":"Well, the underlying condition expression string can support NOT as an operator. \r\n\r\nhttps://docs.aws.amazon.com/amazondynamodb/latest/developerguide/Expressions.ConditionExpressions.html\r\n","title":"Is it possible to negate a DynamoDB ConditionCheck in a WriteTransaction?","body":"<p>Well, the underlying condition expression string can support NOT as an operator.</p>\n<p><a href=\"https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/Expressions.ConditionExpressions.html\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/Expressions.ConditionExpressions.html</a></p>\n"}],"owner":{"account_id":12106354,"reputation":5,"user_id":8845063,"display_name":"Ethan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686845938,"creation_date":1686845065,"question_id":76483526,"body_markdown":"I&#39;m using DynamoDB transactions and wondering if I can conditionally write to my database if and only if a certain [ConditionCheck](https://docs.aws.amazon.com/amazondynamodb/latest/APIReference/API_ConditionCheck.html) in my transaction fails. I would just restructure my ConditionCheck to search for the reverse of my current check, but with my current table design it would require some sort of `not_begins_with` query which isn&#39;t supported. Any chance someone knows of some sort of negation operator for ConditionChecks or the DynamoDB Java SDK that I can&#39;t find?","title":"Is it possible to negate a DynamoDB ConditionCheck in a WriteTransaction?","body":"<p>I'm using DynamoDB transactions and wondering if I can conditionally write to my database if and only if a certain <a href=\"https://docs.aws.amazon.com/amazondynamodb/latest/APIReference/API_ConditionCheck.html\" rel=\"nofollow noreferrer\">ConditionCheck</a> in my transaction fails. I would just restructure my ConditionCheck to search for the reverse of my current check, but with my current table design it would require some sort of <code>not_begins_with</code> query which isn't supported. Any chance someone knows of some sort of negation operator for ConditionChecks or the DynamoDB Java SDK that I can't find?</p>\n"},{"tags":["java","spring","tomcat","hotswap"],"comments":[{"owner":{"account_id":1600162,"reputation":1885,"user_id":1481345,"display_name":"Ale Zalazar"},"score":0,"creation_date":1686845595,"post_id":76483477,"comment_id":134857343,"body_markdown":"What kind of infrastructure are you running on? Can you boot an additional instance and switch traffic?","body":"What kind of infrastructure are you running on? Can you boot an additional instance and switch traffic?"},{"owner":{"account_id":10579480,"reputation":13,"user_id":7793849,"display_name":"Nethish Rajendran"},"score":0,"creation_date":1687060573,"post_id":76483477,"comment_id":134883245,"body_markdown":"We are using kubernetes and tomcat as servlet container. I guess we can do that. But many processes usually keep running in the background.","body":"We are using kubernetes and tomcat as servlet container. I guess we can do that. But many processes usually keep running in the background."}],"answers":[{"comments":[{"owner":{"account_id":10579480,"reputation":13,"user_id":7793849,"display_name":"Nethish Rajendran"},"score":0,"creation_date":1687060678,"post_id":76483578,"comment_id":134883247,"body_markdown":"Thank you. I understand there would be some side effect, but don&#39;t exactly know what kind. Depends on how smart JVM with hotswap is I guess, but I can imagine it causing serious problems during runtime that we will never be able to debug if issues arise.","body":"Thank you. I understand there would be some side effect, but don&#39;t exactly know what kind. Depends on how smart JVM with hotswap is I guess, but I can imagine it causing serious problems during runtime that we will never be able to debug if issues arise."},{"owner":{"account_id":21741636,"reputation":1162,"user_id":16048914,"display_name":"David Weber"},"score":0,"creation_date":1687201593,"post_id":76483578,"comment_id":134900906,"body_markdown":"There could be any side effects you can (and can not) think of. From false business logic in the code because everything must be done fast, to &quot;errors&quot; the compiler/JVM does not recognize. And think about caches, caches with wrong cached data. I ran into cache problems several times while doing &quot;easier&quot; stuff than hot swapping. Wrong cached older versions of classes, wrong cached dependencies, and so on. And yes, you are right: You will never be able to debug this. And even more to think about: What if the hot swap breaks the prod system? Before hot swapping a backup is recommended (IMO)!","body":"There could be any side effects you can (and can not) think of. From false business logic in the code because everything must be done fast, to &quot;errors&quot; the compiler/JVM does not recognize. And think about caches, caches with wrong cached data. I ran into cache problems several times while doing &quot;easier&quot; stuff than hot swapping. Wrong cached older versions of classes, wrong cached dependencies, and so on. And yes, you are right: You will never be able to debug this. And even more to think about: What if the hot swap breaks the prod system? Before hot swapping a backup is recommended (IMO)!"}],"tags":[],"owner":{"account_id":21741636,"reputation":1162,"user_id":16048914,"display_name":"David Weber"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1686845831,"creation_date":1686845415,"answer_id":76483578,"question_id":76483477,"body_markdown":"Don&#39;t.\r\n\r\nPro: \r\nNo deploymemt time.\r\n\r\nCon: \r\nNever, NEVER do a hot swap on a production system. Only if you are 100% sure about everything, but no one is 100% sure.\r\nI would recommend to never practice this task. \r\nSaved time isn&#39;t worth more than safety. \r\nWhat if your code has side effects you so not know?\r\n\r\nPlease don&#39;t. \r\n\r\nFix the bugs and then create a release.\r\n\r\nPlease Take a look at this Image:\r\nhttps://rapidbi.com/wp-content/uploads/2017/03/Project-management-triangle.png.webp\r\nYou can only pull in TWO sides of the triangle.\r\n\r\nKind regards","title":"Is it a good practice to hot swap java code in production?","body":"<p>Don't.</p>\n<p>Pro:\nNo deploymemt time.</p>\n<p>Con:\nNever, NEVER do a hot swap on a production system. Only if you are 100% sure about everything, but no one is 100% sure.\nI would recommend to never practice this task.\nSaved time isn't worth more than safety.\nWhat if your code has side effects you so not know?</p>\n<p>Please don't.</p>\n<p>Fix the bugs and then create a release.</p>\n<p>Please Take a look at this Image:\n<a href=\"https://rapidbi.com/wp-content/uploads/2017/03/Project-management-triangle.png.webp\" rel=\"nofollow noreferrer\">https://rapidbi.com/wp-content/uploads/2017/03/Project-management-triangle.png.webp</a>\nYou can only pull in TWO sides of the triangle.</p>\n<p>Kind regards</p>\n"}],"owner":{"account_id":10579480,"reputation":13,"user_id":7793849,"display_name":"Nethish Rajendran"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":145,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":76483578,"answer_count":1,"score":0,"last_activity_date":1686845831,"creation_date":1686844686,"question_id":76483477,"body_markdown":"We have a huge spring based monolith Java app that takes ~30 minutes to deploy. I recently found out the hotswap capabilities coming with the JDK quite helpful in development although it can only hotswap method body. \r\n\r\n\r\nThe official docs from oracle suggests below [here](https://docs.oracle.com/javase/8/docs/technotes/guides/jpda/enhancements1.4.html#hotswap)\r\n&gt; Organizations deploying long running servers wish to be able to fix bugs without taking down the server.\r\n&gt; \r\n\r\nIs it recommended to do it in production?. What are the pros and cons of it?\r\n","title":"Is it a good practice to hot swap java code in production?","body":"<p>We have a huge spring based monolith Java app that takes ~30 minutes to deploy. I recently found out the hotswap capabilities coming with the JDK quite helpful in development although it can only hotswap method body.</p>\n<p>The official docs from oracle suggests below <a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/jpda/enhancements1.4.html#hotswap\" rel=\"nofollow noreferrer\">here</a></p>\n<blockquote>\n<p>Organizations deploying long running servers wish to be able to fix bugs without taking down the server.</p>\n</blockquote>\n<p>Is it recommended to do it in production?. What are the pros and cons of it?</p>\n"},{"tags":["java","android","typedarray"],"comments":[{"owner":{"account_id":3397419,"reputation":38710,"user_id":2850651,"display_name":"Mike M."},"score":0,"creation_date":1532625419,"post_id":51543905,"comment_id":90056418,"body_markdown":"How are you instantiating `MyKeyboardView`? Are you inflating a layout? If so, have you actually set any of those custom attributes on the `&lt;MyKeyboardView&gt;` in the layout you&#39;re inflating?","body":"How are you instantiating <code>MyKeyboardView</code>? Are you inflating a layout? If so, have you actually set any of those custom attributes on the <code>&lt;MyKeyboardView&gt;</code> in the layout you&#39;re inflating?"},{"owner":{"account_id":8641082,"reputation":65,"user_id":6469760,"accept_rate":50,"display_name":"natanao1995"},"score":0,"creation_date":1532625673,"post_id":51543905,"comment_id":90056560,"body_markdown":"@MikeM. added code to question","body":"@MikeM. added code to question"},{"owner":{"account_id":3397419,"reputation":38710,"user_id":2850651,"display_name":"Mike M."},"score":0,"creation_date":1532626048,"post_id":51543905,"comment_id":90056758,"body_markdown":"Those attributes are going to be in your app&#39;s namespace, not the system namespace. Add `xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;`, and change the `android` prefix on all of your attributes to `app`. (Lemme know if Android Studio complains about anything.)","body":"Those attributes are going to be in your app&#39;s namespace, not the system namespace. Add <code>xmlns:app=&quot;http:&#47;&#47;schemas.android.com&#47;apk&#47;res-auto&quot;</code>, and change the <code>android</code> prefix on all of your attributes to <code>app</code>. (Lemme know if Android Studio complains about anything.)"},{"owner":{"account_id":8641082,"reputation":65,"user_id":6469760,"accept_rate":50,"display_name":"natanao1995"},"score":1,"creation_date":1532626860,"post_id":51543905,"comment_id":90057136,"body_markdown":"@MikeM. thank you so much! Now I have many other problems but at least my keyboard was inflated and doesn&#39;t crash anymore. Create an answer, so I will check it as right one)","body":"@MikeM. thank you so much! Now I have many other problems but at least my keyboard was inflated and doesn&#39;t crash anymore. Create an answer, so I will check it as right one)"}],"answers":[{"tags":[],"owner":{"account_id":3397419,"reputation":38710,"user_id":2850651,"display_name":"Mike M."},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1532627702,"creation_date":1532627702,"answer_id":51544893,"question_id":51543905,"body_markdown":"Your custom `View` attributes are going to be in your app&#39;s namespace, not the system namespace, so they weren&#39;t found in the given `AttributeSet` when they had the system namespace prefix on them.\r\n\r\nAdd the `xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;` namespace declaration either directly in the `&lt;MyKeyboardView&gt;` tag, or in an ancestor tag, and change the prefix on all of your attributes to `app`.\r\n\r\nNote that the prefix can be any valid name you like, though `app` is probably the most common.","title":"obtainStyledAttributes works wrong","body":"<p>Your custom <code>View</code> attributes are going to be in your app's namespace, not the system namespace, so they weren't found in the given <code>AttributeSet</code> when they had the system namespace prefix on them.</p>\n\n<p>Add the <code>xmlns:app=\"http://schemas.android.com/apk/res-auto\"</code> namespace declaration either directly in the <code>&lt;MyKeyboardView&gt;</code> tag, or in an ancestor tag, and change the prefix on all of your attributes to <code>app</code>.</p>\n\n<p>Note that the prefix can be any valid name you like, though <code>app</code> is probably the most common.</p>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1686909465,"post_id":76482845,"comment_id":134866402,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/76482845/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":11057093,"reputation":1,"user_id":8119633,"display_name":"Alim S. Ajiev"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686845760,"creation_date":1686834669,"answer_id":76482845,"question_id":51543905,"body_markdown":"If you do not need your attributes being styleable You may not use &quot;declare-styleable&quot; at all. Just put your attributes in &quot;com.test.features.keyboard.MyKeyboardView&quot; tag without any namespace prefix and get their values like this:\r\n\r\n    attrs.getAttributeIntValue( null, &quot;your_attribute&quot;, 0 );","title":"obtainStyledAttributes works wrong","body":"<p>If you do not need your attributes being styleable You may not use &quot;declare-styleable&quot; at all. Just put your attributes in &quot;com.test.features.keyboard.MyKeyboardView&quot; tag without any namespace prefix and get their values like this:</p>\n<pre><code>attrs.getAttributeIntValue( null, &quot;your_attribute&quot;, 0 );\n</code></pre>\n"}],"owner":{"account_id":8641082,"reputation":65,"user_id":6469760,"accept_rate":50,"display_name":"natanao1995"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1330,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":51544893,"answer_count":2,"score":2,"last_activity_date":1686845760,"creation_date":1532623834,"question_id":51543905,"body_markdown":"I am trying to create my own keyboard. Using Android Keyboard is not enough for my task so I decided to create inheritor class directly from View.class. As base I decided to use code of Keyboard.class and then start change things one by one.\r\n\r\nI faced many problems trying even compile that class, used some reflection and hacks to obtain private fields. I created file attrs to be able to use Keyboard&#39;s attributes and tags.  Finally class compilled and know it crashes becouse parameteres, that should go from inflating, are null. \r\n\r\nWhat I found out is that method context.obtainStyledAttributes(attrs, R.styleable.MyKeyboardView); returns wrong result and a.getIndexCount(); after that returns 0.\r\n\r\nhere is my attr.xml file:\r\n\r\n    &lt;resources&gt;\r\n    &lt;declare-styleable name=&quot;MyKeyboardView&quot;&gt;\r\n        &lt;attr name=&quot;keyBackground&quot; format=&quot;reference&quot; /&gt;\r\n        &lt;attr name=&quot;keyTextSize&quot; format=&quot;dimension&quot; /&gt;\r\n        &lt;attr name=&quot;labelTextSize&quot; format=&quot;dimension&quot; /&gt;\r\n        &lt;attr name=&quot;state_long_pressable&quot; format=&quot;boolean&quot; /&gt;\r\n        &lt;attr name=&quot;keyTextColor&quot; format=&quot;color&quot; /&gt;\r\n        &lt;attr name=&quot;keyPreviewLayout&quot; format=&quot;reference&quot; /&gt;\r\n        &lt;attr name=&quot;keyPreviewOffset&quot; format=&quot;dimension&quot; /&gt;\r\n        &lt;attr name=&quot;keyPreviewHeight&quot; format=&quot;dimension&quot; /&gt;\r\n        &lt;attr name=&quot;verticalCorrection&quot; format=&quot;dimension&quot; /&gt;\r\n        &lt;attr name=&quot;shadowColor&quot; format=&quot;color&quot; /&gt;\r\n        &lt;attr name=&quot;shadowRadius&quot; format=&quot;float&quot; /&gt;\r\n        &lt;attr name=&quot;backgroundDimAmount&quot; format=&quot;float&quot; /&gt;\r\n        &lt;attr name=&quot;popupLayout&quot; format=&quot;reference&quot; /&gt;\r\n    &lt;/declare-styleable&gt;\r\n&lt;/resources&gt;\r\n\r\nhere is part of my keyboard class:\r\n\r\n    public MyKeyboardView(Context context, AttributeSet attrs) {\r\n        this(context, attrs, Resources.getSystem().getIdentifier(&quot;keyboardViewStyle&quot;, &quot;attr&quot;, &quot;android&quot;));\r\n    }\r\n\r\n    public MyKeyboardView(Context context, AttributeSet attrs, int defStyleAttr) {\r\n        this(context, attrs, defStyleAttr, 0);\r\n    }\r\n\r\n    public MyKeyboardView(Context context, AttributeSet attrs, int defStyleAttr, int defStyleRes) {\r\n        super(context, attrs, defStyleAttr, defStyleRes);\r\n\r\n        TypedArray a = context.obtainStyledAttributes(\r\n                attrs, R.styleable.MyKeyboardView);\r\n\r\n        LayoutInflater inflate =\r\n                (LayoutInflater) context\r\n                        .getSystemService(Context.LAYOUT_INFLATER_SERVICE);\r\n\r\n        int previewLayout = 0;\r\n        int keyTextSize = 0;\r\n\r\n        int n = a.getIndexCount();\r\n\r\nThis is how I use keyboard in layout:\r\n\r\n    &lt;FrameLayout\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;240dp&quot;\r\n        android:layout_gravity=&quot;bottom&quot;&gt;\r\n        &lt;com.test.features.keyboard.MyKeyboardView\r\n            xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n            android:id=&quot;@+id/keyboard_view&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;match_parent&quot;\r\n            android:paddingTop=&quot;2.5dip&quot;\r\n            android:keyPreviewHeight=&quot;@dimen/key_height&quot;\r\n            android:shadowRadius=&quot;0&quot;\r\n            android:keyPreviewLayout=&quot;@layout/keyboard_key_preview&quot;\r\n            android:keyPreviewOffset=&quot;0dp&quot;\r\n            android:keyBackground=&quot;@drawable/keyboard_key_background&quot;\r\n            android:keyTextColor=&quot;@color/keyboard_key_color&quot;\r\n            android:background=&quot;@color/primary&quot;\r\n            android:popupLayout=&quot;@layout/keyboard_popup_layout&quot;/&gt;\r\n\r\ntried to use it like so, length() returned 11, but switch case found almost no matches. And if found, default value was used:\r\n\r\n    int n = a.length();\r\n\r\n        for (int i = 0; i &lt; n; i++) {\r\n            int attr = a.getIndex(i);\r\n\r\n            switch (attr) {\r\n                case R.styleable.MyKeyboardView_keyBackground:\r\n                    mKeyBackground = a.getDrawable(attr);\r\n                    break;\r\n                case R.styleable.MyKeyboardView_verticalCorrection:\r\n                    mVerticalCorrection = a.getDimensionPixelOffset(attr, 0);\r\n                    break;\r\n                case R.styleable.MyKeyboardView_keyPreviewLayout:\r\n                    previewLayout = a.getResourceId(attr, 0);\r\n                    break;\r\n                case R.styleable.MyKeyboardView_keyPreviewOffset:\r\n                    mPreviewOffset = a.getDimensionPixelOffset(attr, 0);\r\n                    break;\r\n                case R.styleable.MyKeyboardView_keyPreviewHeight:\r\n                    mPreviewHeight = a.getDimensionPixelSize(attr, 80);\r\n                    break;\r\n                case R.styleable.MyKeyboardView_keyTextSize:\r\n                    mKeyTextSize = a.getDimensionPixelSize(attr, 18);\r\n                    break;\r\n                case R.styleable.MyKeyboardView_keyTextColor:\r\n                    mKeyTextColor = a.getColor(attr, 0xFF000000);\r\n                    break;\r\n                case R.styleable.MyKeyboardView_labelTextSize:\r\n                    mLabelTextSize = a.getDimensionPixelSize(attr, 14);\r\n                    break;\r\n                case R.styleable.MyKeyboardView_popupLayout:\r\n                    mPopupLayout = a.getResourceId(attr, 0);\r\n                    break;\r\n                case R.styleable.MyKeyboardView_shadowColor:\r\n                    mShadowColor = a.getColor(attr, 0);\r\n                    break;\r\n                case R.styleable.MyKeyboardView_shadowRadius:\r\n                    mShadowRadius = a.getFloat(attr, 0f);\r\n                    break;\r\n            }\r\n        }","title":"obtainStyledAttributes works wrong","body":"<p>I am trying to create my own keyboard. Using Android Keyboard is not enough for my task so I decided to create inheritor class directly from View.class. As base I decided to use code of Keyboard.class and then start change things one by one.</p>\n\n<p>I faced many problems trying even compile that class, used some reflection and hacks to obtain private fields. I created file attrs to be able to use Keyboard's attributes and tags.  Finally class compilled and know it crashes becouse parameteres, that should go from inflating, are null. </p>\n\n<p>What I found out is that method context.obtainStyledAttributes(attrs, R.styleable.MyKeyboardView); returns wrong result and a.getIndexCount(); after that returns 0.</p>\n\n<p>here is my attr.xml file:</p>\n\n<pre><code>&lt;resources&gt;\n&lt;declare-styleable name=\"MyKeyboardView\"&gt;\n    &lt;attr name=\"keyBackground\" format=\"reference\" /&gt;\n    &lt;attr name=\"keyTextSize\" format=\"dimension\" /&gt;\n    &lt;attr name=\"labelTextSize\" format=\"dimension\" /&gt;\n    &lt;attr name=\"state_long_pressable\" format=\"boolean\" /&gt;\n    &lt;attr name=\"keyTextColor\" format=\"color\" /&gt;\n    &lt;attr name=\"keyPreviewLayout\" format=\"reference\" /&gt;\n    &lt;attr name=\"keyPreviewOffset\" format=\"dimension\" /&gt;\n    &lt;attr name=\"keyPreviewHeight\" format=\"dimension\" /&gt;\n    &lt;attr name=\"verticalCorrection\" format=\"dimension\" /&gt;\n    &lt;attr name=\"shadowColor\" format=\"color\" /&gt;\n    &lt;attr name=\"shadowRadius\" format=\"float\" /&gt;\n    &lt;attr name=\"backgroundDimAmount\" format=\"float\" /&gt;\n    &lt;attr name=\"popupLayout\" format=\"reference\" /&gt;\n&lt;/declare-styleable&gt;\n</code></pre>\n\n<p></p>\n\n<p>here is part of my keyboard class:</p>\n\n<pre><code>public MyKeyboardView(Context context, AttributeSet attrs) {\n    this(context, attrs, Resources.getSystem().getIdentifier(\"keyboardViewStyle\", \"attr\", \"android\"));\n}\n\npublic MyKeyboardView(Context context, AttributeSet attrs, int defStyleAttr) {\n    this(context, attrs, defStyleAttr, 0);\n}\n\npublic MyKeyboardView(Context context, AttributeSet attrs, int defStyleAttr, int defStyleRes) {\n    super(context, attrs, defStyleAttr, defStyleRes);\n\n    TypedArray a = context.obtainStyledAttributes(\n            attrs, R.styleable.MyKeyboardView);\n\n    LayoutInflater inflate =\n            (LayoutInflater) context\n                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);\n\n    int previewLayout = 0;\n    int keyTextSize = 0;\n\n    int n = a.getIndexCount();\n</code></pre>\n\n<p>This is how I use keyboard in layout:</p>\n\n<pre><code>&lt;FrameLayout\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"240dp\"\n    android:layout_gravity=\"bottom\"&gt;\n    &lt;com.test.features.keyboard.MyKeyboardView\n        xmlns:android=\"http://schemas.android.com/apk/res/android\"\n        android:id=\"@+id/keyboard_view\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:paddingTop=\"2.5dip\"\n        android:keyPreviewHeight=\"@dimen/key_height\"\n        android:shadowRadius=\"0\"\n        android:keyPreviewLayout=\"@layout/keyboard_key_preview\"\n        android:keyPreviewOffset=\"0dp\"\n        android:keyBackground=\"@drawable/keyboard_key_background\"\n        android:keyTextColor=\"@color/keyboard_key_color\"\n        android:background=\"@color/primary\"\n        android:popupLayout=\"@layout/keyboard_popup_layout\"/&gt;\n</code></pre>\n\n<p>tried to use it like so, length() returned 11, but switch case found almost no matches. And if found, default value was used:</p>\n\n<pre><code>int n = a.length();\n\n    for (int i = 0; i &lt; n; i++) {\n        int attr = a.getIndex(i);\n\n        switch (attr) {\n            case R.styleable.MyKeyboardView_keyBackground:\n                mKeyBackground = a.getDrawable(attr);\n                break;\n            case R.styleable.MyKeyboardView_verticalCorrection:\n                mVerticalCorrection = a.getDimensionPixelOffset(attr, 0);\n                break;\n            case R.styleable.MyKeyboardView_keyPreviewLayout:\n                previewLayout = a.getResourceId(attr, 0);\n                break;\n            case R.styleable.MyKeyboardView_keyPreviewOffset:\n                mPreviewOffset = a.getDimensionPixelOffset(attr, 0);\n                break;\n            case R.styleable.MyKeyboardView_keyPreviewHeight:\n                mPreviewHeight = a.getDimensionPixelSize(attr, 80);\n                break;\n            case R.styleable.MyKeyboardView_keyTextSize:\n                mKeyTextSize = a.getDimensionPixelSize(attr, 18);\n                break;\n            case R.styleable.MyKeyboardView_keyTextColor:\n                mKeyTextColor = a.getColor(attr, 0xFF000000);\n                break;\n            case R.styleable.MyKeyboardView_labelTextSize:\n                mLabelTextSize = a.getDimensionPixelSize(attr, 14);\n                break;\n            case R.styleable.MyKeyboardView_popupLayout:\n                mPopupLayout = a.getResourceId(attr, 0);\n                break;\n            case R.styleable.MyKeyboardView_shadowColor:\n                mShadowColor = a.getColor(attr, 0);\n                break;\n            case R.styleable.MyKeyboardView_shadowRadius:\n                mShadowRadius = a.getFloat(attr, 0f);\n                break;\n        }\n    }\n</code></pre>\n"},{"tags":["java","firebase","android-studio","firebase-realtime-database","firebase-authentication"],"comments":[{"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1686896261,"post_id":76483600,"comment_id":134863846,"body_markdown":"Does this [answer](https://stackoverflow.com/questions/72224454/execution-failed-for-task-appmapdebugsourcesetpaths-error-while-evaluatin/72226009#72226009) help?","body":"Does this <a href=\"https://stackoverflow.com/questions/72224454/execution-failed-for-task-appmapdebugsourcesetpaths-error-while-evaluatin/72226009#72226009\">answer</a> help?"},{"owner":{"account_id":28808432,"reputation":1,"user_id":22063719,"display_name":"Niru 15"},"score":0,"creation_date":1686922333,"post_id":76483600,"comment_id":134869045,"body_markdown":"@AlexMamo Hi, It&#39;s not working","body":"@AlexMamo Hi, It&#39;s not working"}],"owner":{"account_id":28808432,"reputation":1,"user_id":22063719,"display_name":"Niru 15"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686845586,"creation_date":1686845586,"question_id":76483600,"body_markdown":"I had an error when I linked my Android studio program with Firebase. I don&#39;t understand how to fix this error, please help me upgrade it.\r\n\r\nbuild.gradle(My Web) - Source Code\r\n\r\n```\r\nbuildscript {\r\n    repositories {\r\n        google()  // Google&#39;s Maven repository\r\n        mavenCentral()  // Maven Central repository\r\n    }\r\n    dependencies {// Add the dependency for the Google services Gradle plugin\r\n        classpath &#39;com.google.gms:google-services:4.3.15&#39;\r\n    }\r\n}\r\nplugins {\r\n    id &#39;com.android.application&#39; version &#39;8.0.2&#39; apply false\r\n    id &#39;com.android.library&#39; version &#39;8.0.2&#39; apply false\r\n}\r\n\r\nallprojects {\r\n    repositories {// Make sure that you have the following two repositories\r\n        google()  // Google&#39;s Maven repository\r\n        mavenCentral()  // Maven Central repository\r\n    }\r\n}\r\n```\r\n[enter image description here](https://i.stack.imgur.com/zyEux.png)\r\n\r\nHelp me solve this error","title":"Build was configured to prefer settings repositories over project repositories but repository &#39;Google&#39; was added by build file &#39;build.grable&#39;:17","body":"<p>I had an error when I linked my Android studio program with Firebase. I don't understand how to fix this error, please help me upgrade it.</p>\n<p>build.gradle(My Web) - Source Code</p>\n<pre><code>buildscript {\n    repositories {\n        google()  // Google's Maven repository\n        mavenCentral()  // Maven Central repository\n    }\n    dependencies {// Add the dependency for the Google services Gradle plugin\n        classpath 'com.google.gms:google-services:4.3.15'\n    }\n}\nplugins {\n    id 'com.android.application' version '8.0.2' apply false\n    id 'com.android.library' version '8.0.2' apply false\n}\n\nallprojects {\n    repositories {// Make sure that you have the following two repositories\n        google()  // Google's Maven repository\n        mavenCentral()  // Maven Central repository\n    }\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/zyEux.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>Help me solve this error</p>\n"},{"tags":["java","spring","spring-integration","spring-integration-sftp"],"answers":[{"comments":[{"owner":{"account_id":1374245,"reputation":4806,"user_id":1308570,"accept_rate":76,"display_name":"kaysush"},"score":0,"creation_date":1686847284,"post_id":76483599,"comment_id":134857697,"body_markdown":"So i should be calling remove method on filter and not on meta store directly . Is my understanding correct ?","body":"So i should be calling remove method on filter and not on meta store directly . Is my understanding correct ?"},{"owner":{"account_id":3273937,"reputation":114870,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"score":0,"creation_date":1686848910,"post_id":76483599,"comment_id":134858041,"body_markdown":"Correct. For `MetadataStore` you would also need a `key` and know how that key is build in the `SftpPersistentAcceptOnceFileListFilter`. But in general: it is OK to use any public API on those classes.","body":"Correct. For <code>MetadataStore</code> you would also need a <code>key</code> and know how that key is build in the <code>SftpPersistentAcceptOnceFileListFilter</code>. But in general: it is OK to use any public API on those classes."}],"tags":[],"owner":{"account_id":3273937,"reputation":114870,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1686845577,"creation_date":1686845577,"answer_id":76483599,"question_id":76482739,"body_markdown":"The mentioned `SftpPersistentAcceptOnceFileListFilter` is a `ResettableFileListFilter`:\r\n\r\n\r\n    /**\r\n     * A {@link FileListFilter} that can be reset by removing a specific file from its\r\n     * state.\r\n     * @param &lt;F&gt; The type that will be filtered.\r\n     *\r\n     * @author Gary Russell\r\n     *\r\n     * @since 4.1.7\r\n     */\r\n    public interface ResettableFileListFilter&lt;F&gt; extends FileListFilter&lt;F&gt; {\r\n\r\nSo, you indeed can just have it as a top-level bean and call its `remove()` whenever your file processing has failed.\r\n\r\nThe framework does that in several places, but really before the message is delivered to target channel:\r\n\r\n\tprivate void resetFilterIfNecessary(AbstractFileInfo&lt;F&gt; file) {\r\n\t\tif (this.filter instanceof ResettableFileListFilter) {\r\n\t\t\tthis.logger.info(\r\n\t\t\t\t\tLogMessage.format(&quot;Removing the remote file &#39;%s&#39; from the filter for a subsequent transfer attempt&quot;,\r\n\t\t\t\t\t\t\tfile.getFilename()));\r\n\t\t\t((ResettableFileListFilter&lt;F&gt;) this.filter).remove(file.getFileInfo());\r\n\t\t}\r\n\t}\r\n\r\n\r\nThat `FileInfo` is available for your as a `FileHeaders.REMOTE_FILE_INFO` header in the message you process downstream.","title":"Removing a file from ConcurrentMetadataStore if file processing fails in spring-integration-sftp","body":"<p>The mentioned <code>SftpPersistentAcceptOnceFileListFilter</code> is a <code>ResettableFileListFilter</code>:</p>\n<pre><code>/**\n * A {@link FileListFilter} that can be reset by removing a specific file from its\n * state.\n * @param &lt;F&gt; The type that will be filtered.\n *\n * @author Gary Russell\n *\n * @since 4.1.7\n */\npublic interface ResettableFileListFilter&lt;F&gt; extends FileListFilter&lt;F&gt; {\n</code></pre>\n<p>So, you indeed can just have it as a top-level bean and call its <code>remove()</code> whenever your file processing has failed.</p>\n<p>The framework does that in several places, but really before the message is delivered to target channel:</p>\n<pre><code>private void resetFilterIfNecessary(AbstractFileInfo&lt;F&gt; file) {\n    if (this.filter instanceof ResettableFileListFilter) {\n        this.logger.info(\n                LogMessage.format(&quot;Removing the remote file '%s' from the filter for a subsequent transfer attempt&quot;,\n                        file.getFilename()));\n        ((ResettableFileListFilter&lt;F&gt;) this.filter).remove(file.getFileInfo());\n    }\n}\n</code></pre>\n<p>That <code>FileInfo</code> is available for your as a <code>FileHeaders.REMOTE_FILE_INFO</code> header in the message you process downstream.</p>\n"}],"owner":{"account_id":1374245,"reputation":4806,"user_id":1308570,"accept_rate":76,"display_name":"kaysush"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":86,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":76483599,"answer_count":1,"score":1,"last_activity_date":1686845577,"creation_date":1686833938,"question_id":76482739,"body_markdown":"I am facing a problem while using spring-integration-sftp to pull files from SFTP servers and do some processing. I&#39;m using `RedisMetadataStore` to power my `SftpPersistentAcceptOnceFileListFilter`. I&#39;m using a `Streaming Inbound Channel Adapter` for my use case. \r\n\r\nThe problem is as soon as a new file event is delivered to my handler that file is marked as processed in the Redis metadata store, so now if my downstream processing fails, that file is lost forever. I have retries in place, but what I would like to do is mark that file as un-processed in redis and have it picked up again in next poll cycle. \r\n\r\nI found that there is a [remove][1] method on RedisMetadataStore class that can remove a key if there is any exception while processing, but wanted to know is it advisable to call the remove method directly ? Because as far as I can understand, these methods are supposed to be called by the filter and not directly but I couldn&#39;t find any thing to deal with this situation. \r\n\r\nAre there any constructs to remove a file from `SftpPersistentAcceptOnceFileListFilter` if it fails during processing ? \r\n\r\n\r\n  [1]: https://docs.spring.io/spring-integration/api/org/springframework/integration/redis/metadata/RedisMetadataStore.html#remove(java.lang.String)","title":"Removing a file from ConcurrentMetadataStore if file processing fails in spring-integration-sftp","body":"<p>I am facing a problem while using spring-integration-sftp to pull files from SFTP servers and do some processing. I'm using <code>RedisMetadataStore</code> to power my <code>SftpPersistentAcceptOnceFileListFilter</code>. I'm using a <code>Streaming Inbound Channel Adapter</code> for my use case.</p>\n<p>The problem is as soon as a new file event is delivered to my handler that file is marked as processed in the Redis metadata store, so now if my downstream processing fails, that file is lost forever. I have retries in place, but what I would like to do is mark that file as un-processed in redis and have it picked up again in next poll cycle.</p>\n<p>I found that there is a <a href=\"https://docs.spring.io/spring-integration/api/org/springframework/integration/redis/metadata/RedisMetadataStore.html#remove(java.lang.String)\" rel=\"nofollow noreferrer\">remove</a> method on RedisMetadataStore class that can remove a key if there is any exception while processing, but wanted to know is it advisable to call the remove method directly ? Because as far as I can understand, these methods are supposed to be called by the filter and not directly but I couldn't find any thing to deal with this situation.</p>\n<p>Are there any constructs to remove a file from <code>SftpPersistentAcceptOnceFileListFilter</code> if it fails during processing ?</p>\n"},{"tags":["java","junit","junit5","dbunit","spring-test-dbunit"],"owner":{"account_id":26030173,"reputation":49,"user_id":19736518,"display_name":"rhoudri hamza"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":172,"favorite_count":0,"down_vote_count":1,"up_vote_count":4,"answer_count":0,"score":3,"last_activity_date":1686845461,"creation_date":1686845461,"question_id":76483585,"body_markdown":"am trying to migrate from Junit4 to Junit5 knowing that am working with Spring Mvc , version 4.3.5 and i wanna know if there s someway to work with dbUnit for my class Repository\r\n\r\nI did my research and the last version of dependency for Dbunit which is 2.7.3 uses Junit4. So i need to confirm that there is no way to use Dbunit while using Junit 5 except if i decide to migrate towards Spring 5 or Spring Boot cus i found some articles that talks about this\r\n\r\nthe header of my old version of my class test normally u dont need it to answer my question but as i cant post the question for Quality reasons here it is : \r\n\r\n```\r\nContextConfiguration\r\n\r\n@TestPropertySource(locations = &quot;classpath:environnements.properties&quot;)\r\n@TestExecutionListeners(listeners = { DependencyInjectionTestExecutionListener.class,\r\n        TransactionDbUnitTestExecutionListener.class })\r\n//TODO ajouter les xml des d&#233;pendances\r\n// faire par groupes de dependances dans chaque test ?\r\n@DatabaseSetup(value = {&quot;/dbunit/RepositoryTyp-setup.xml&quot;, &quot;/dbunit/RepositoryPTest-setup.xml&quot;}, type = DatabaseOperation.CLEAN_INSERT)\r\npublic class PRepositoryTest extends SpringDbBasedTest {\r\n```","title":"Is There anyway i can use Dbunit with Junit5 while being in Spring 4?","body":"<p>am trying to migrate from Junit4 to Junit5 knowing that am working with Spring Mvc , version 4.3.5 and i wanna know if there s someway to work with dbUnit for my class Repository</p>\n<p>I did my research and the last version of dependency for Dbunit which is 2.7.3 uses Junit4. So i need to confirm that there is no way to use Dbunit while using Junit 5 except if i decide to migrate towards Spring 5 or Spring Boot cus i found some articles that talks about this</p>\n<p>the header of my old version of my class test normally u dont need it to answer my question but as i cant post the question for Quality reasons here it is :</p>\n<pre><code>ContextConfiguration\n\n@TestPropertySource(locations = &quot;classpath:environnements.properties&quot;)\n@TestExecutionListeners(listeners = { DependencyInjectionTestExecutionListener.class,\n        TransactionDbUnitTestExecutionListener.class })\n//TODO ajouter les xml des dépendances\n// faire par groupes de dependances dans chaque test ?\n@DatabaseSetup(value = {&quot;/dbunit/RepositoryTyp-setup.xml&quot;, &quot;/dbunit/RepositoryPTest-setup.xml&quot;}, type = DatabaseOperation.CLEAN_INSERT)\npublic class PRepositoryTest extends SpringDbBasedTest {\n</code></pre>\n"},{"tags":["java","android-studio","kotlin","maven","gradle"],"owner":{"account_id":23031506,"reputation":42,"user_id":17150924,"display_name":"Khoshghalb2c.IR"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":156,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1686844709,"creation_date":1686844709,"question_id":76483481,"body_markdown":"I have to use `maven { url &#39;https://jitpack.io&#39; }` to use the in-app payment library.\r\n&lt;br/&gt;But when I add `maven { url &#39;https://jitpack.io&#39; }` to `repositories` in `build.gradle (module)`-&gt;`allprojects`, files `Java` and `Kotlin` get corrupted and give an error.\r\n&lt;br/&gt;My code after adding `maven { url &#39;https://jitpack.io&#39; }` is as follows.\r\n\r\nbuild.gradle (project):\r\n``` lang-gradle\r\nplugins {\r\n    id &#39;com.android.application&#39;\r\n    id &#39;kotlin-android&#39;\r\n}\r\n\r\nandroid {\r\n    compileSdkVersion 32\r\n    buildToolsVersion &quot;31.0.0&quot;\r\n\r\n    defaultConfig {\r\n        applicationId &quot;ir.sazl.cardbank&quot;\r\n        minSdkVersion 21\r\n        targetSdkVersion 32\r\n        versionCode 12\r\n        versionName &quot;1.1.1&quot;\r\n\r\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\r\n    }\r\n\r\n    buildTypes {\r\n        release {\r\n            minifyEnabled true\r\n            proguardFiles getDefaultProguardFile(&#39;proguard-android-optimize.txt&#39;), &#39;proguard-rules.pro&#39;\r\n        }\r\n    }\r\n    compileOptions {\r\n        sourceCompatibility JavaVersion.VERSION_1_8\r\n        targetCompatibility JavaVersion.VERSION_1_8\r\n    }\r\n}\r\n\r\ndependencies {\r\n    implementation &#39;androidx.appcompat:appcompat:1.5.1&#39;\r\n    implementation &#39;com.google.android.material:material:1.6.1&#39;\r\n    implementation &#39;androidx.constraintlayout:constraintlayout:2.1.4&#39;\r\n    implementation &quot;org.jetbrains.kotlin:kotlin-stdlib:$kotlin_version&quot;\r\n    testImplementation &#39;junit:junit:4.+&#39;\r\n    androidTestImplementation &#39;androidx.test.ext:junit:1.1.3&#39;\r\n    androidTestImplementation &#39;androidx.test.espresso:espresso-core:3.4.0&#39;\r\n    implementation &#39;com.github.duanhong169:colorpicker:1.1.6&#39;\r\n    implementation &quot;com.github.cafebazaar.Poolakey:poolakey:2.1.0&quot;\r\n}\r\n```\r\n\r\nbuild.gradle (module):\r\n```lang-gradle\r\n// Top-level build file where you can add configuration options common to all sub-projects/modules.\r\nbuildscript {\r\n    ext {\r\n        kotlin_version = &#39;1.5.31&#39;\r\n    }\r\n    repositories {\r\n        google()\r\n        mavenCentral()\r\n    }\r\n    dependencies {\r\n        classpath &quot;com.android.tools.build:gradle:4.2.1&quot;\r\n        classpath &quot;org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version&quot;\r\n\r\n        // NOTE: Do not place your application dependencies here; they belong\r\n        // in the individual module build.gradle files\r\n    }\r\n}\r\n\r\nallprojects {\r\n    repositories {\r\n        google()\r\n        mavenCentral()\r\n        jcenter() // Warning: this repository is going to shut down soon\r\n        maven { url &#39;https://jitpack.io&#39; }\r\n    }\r\n}\r\n\r\ntask clean(type: Delete) {\r\n    delete rootProject.buildDir\r\n}\r\n```\r\n&lt;br/&gt;&lt;br/&gt;\r\n**These are the errors:**\r\n&lt;br/&gt;`java` file error:&lt;br/&gt;\r\n[![Java File Error][1]][1]\r\n&lt;br/&gt;&lt;br/&gt;`kotlin` file error:&lt;br/&gt;\r\n[![Kotlin File Error][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/vWupu.png\r\n  [2]: https://i.stack.imgur.com/t3iaF.png","title":"Android Studio maven { url &#39;https://jitpack.io&#39; } Corrupts java &amp; kotlin files","body":"<p>I have to use <code>maven { url 'https://jitpack.io' }</code> to use the in-app payment library.\n<br/>But when I add <code>maven { url 'https://jitpack.io' }</code> to <code>repositories</code> in <code>build.gradle (module)</code>-&gt;<code>allprojects</code>, files <code>Java</code> and <code>Kotlin</code> get corrupted and give an error.\n<br/>My code after adding <code>maven { url 'https://jitpack.io' }</code> is as follows.</p>\n<p>build.gradle (project):</p>\n<pre class=\"lang-gradle prettyprint-override\"><code>plugins {\n    id 'com.android.application'\n    id 'kotlin-android'\n}\n\nandroid {\n    compileSdkVersion 32\n    buildToolsVersion &quot;31.0.0&quot;\n\n    defaultConfig {\n        applicationId &quot;ir.sazl.cardbank&quot;\n        minSdkVersion 21\n        targetSdkVersion 32\n        versionCode 12\n        versionName &quot;1.1.1&quot;\n\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\n    }\n\n    buildTypes {\n        release {\n            minifyEnabled true\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n        }\n    }\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n}\n\ndependencies {\n    implementation 'androidx.appcompat:appcompat:1.5.1'\n    implementation 'com.google.android.material:material:1.6.1'\n    implementation 'androidx.constraintlayout:constraintlayout:2.1.4'\n    implementation &quot;org.jetbrains.kotlin:kotlin-stdlib:$kotlin_version&quot;\n    testImplementation 'junit:junit:4.+'\n    androidTestImplementation 'androidx.test.ext:junit:1.1.3'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.4.0'\n    implementation 'com.github.duanhong169:colorpicker:1.1.6'\n    implementation &quot;com.github.cafebazaar.Poolakey:poolakey:2.1.0&quot;\n}\n</code></pre>\n<p>build.gradle (module):</p>\n<pre class=\"lang-gradle prettyprint-override\"><code>// Top-level build file where you can add configuration options common to all sub-projects/modules.\nbuildscript {\n    ext {\n        kotlin_version = '1.5.31'\n    }\n    repositories {\n        google()\n        mavenCentral()\n    }\n    dependencies {\n        classpath &quot;com.android.tools.build:gradle:4.2.1&quot;\n        classpath &quot;org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version&quot;\n\n        // NOTE: Do not place your application dependencies here; they belong\n        // in the individual module build.gradle files\n    }\n}\n\nallprojects {\n    repositories {\n        google()\n        mavenCentral()\n        jcenter() // Warning: this repository is going to shut down soon\n        maven { url 'https://jitpack.io' }\n    }\n}\n\ntask clean(type: Delete) {\n    delete rootProject.buildDir\n}\n</code></pre>\n<p><br/><br/>\n<strong>These are the errors:</strong>\n<br/><code>java</code> file error:<br/>\n<a href=\"https://i.stack.imgur.com/vWupu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vWupu.png\" alt=\"Java File Error\" /></a>\n<br/><br/><code>kotlin</code> file error:<br/>\n<a href=\"https://i.stack.imgur.com/t3iaF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/t3iaF.png\" alt=\"Kotlin File Error\" /></a></p>\n"},{"tags":["java","openapi-generator","openapi-generator-cli"],"comments":[{"owner":{"account_id":9235242,"reputation":1488,"user_id":6860078,"display_name":"tbatch"},"score":0,"creation_date":1686844273,"post_id":76483322,"comment_id":134857054,"body_markdown":"Is there a reason that you are using the cli in gradle instead of using the gradle plugin?","body":"Is there a reason that you are using the cli in gradle instead of using the gradle plugin?"},{"owner":{"account_id":26289969,"reputation":313,"user_id":19957114,"display_name":"dev-rifaii"},"score":0,"creation_date":1686844409,"post_id":76483322,"comment_id":134857087,"body_markdown":"@tbatch I remember having a hard setting up configuration with gradle plugin so I went with cli","body":"@tbatch I remember having a hard setting up configuration with gradle plugin so I went with cli"}],"owner":{"account_id":26289969,"reputation":313,"user_id":19957114,"display_name":"dev-rifaii"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":248,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686843487,"creation_date":1686843487,"question_id":76483322,"body_markdown":"My current setup:\r\n\r\n```groovy\r\nconfigurations {\r\n    openApiGenerator\r\n}\r\n\r\ndependencies {\r\n    implementation &#39;org.springframework.boot:spring-boot-starter&#39;\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-web&#39;\r\n    implementation &#39;org.springframework.cloud:spring-cloud-starter-openfeign:4.0.1&#39;\r\n    implementation &#39;javax.annotation:javax.annotation-api:1.3.2&#39;\r\n    openApiGenerator &#39;org.openapitools:openapi-generator-cli:6.6.0&#39;\r\n}\r\n\r\ndef openApiGeneratorConfig = {\r\n    classpath configurations.openApiGenerator\r\n    mainClass = &#39;org.openapitools.codegen.OpenAPIGenerator&#39;\r\n    args &#39;generate&#39;\r\n    args &#39;-g&#39;, &#39;java&#39;\r\n    args &#39;-o&#39;, &quot;$projectDir&quot;\r\n    args &#39;-t&#39;, &quot;$projectDir/src/main/resources/openapi-config/templates&quot;\r\n    args &quot;--additional-properties&quot;, &quot;library=feign,&quot; +\r\n            &quot;dateLibrary=java8,&quot; +\r\n            &quot;useBeanValidation=false,&quot; +\r\n            &quot;performBeanValidation=false&quot;\r\n}\r\n\r\ntask generateApi(type: JavaExec) {\r\n    configure openApiGeneratorConfig\r\n    systemProperties = [&#39;apis&#39;: &#39;&#39;, &#39;models&#39;: &#39;&#39;]\r\n    args &#39;-i&#39;, &#39;https://petstore3.swagger.io/api/v3/openapi.yaml&#39;\r\n    args &#39;-c&#39;, &quot;$projectDir/src/main/resources/openapi-config/pet.json&quot;\r\n}\r\n```\r\n\r\n\r\nI&#39;m setting both useBeanValidation and performBeanValidation to false yet I still get @javax.annotation.Nullable annotations in my model fields.","title":"OpenApi CodeGen validating fields despite setting performBeanValidation to false","body":"<p>My current setup:</p>\n<pre><code>configurations {\n    openApiGenerator\n}\n\ndependencies {\n    implementation 'org.springframework.boot:spring-boot-starter'\n    implementation 'org.springframework.boot:spring-boot-starter-web'\n    implementation 'org.springframework.cloud:spring-cloud-starter-openfeign:4.0.1'\n    implementation 'javax.annotation:javax.annotation-api:1.3.2'\n    openApiGenerator 'org.openapitools:openapi-generator-cli:6.6.0'\n}\n\ndef openApiGeneratorConfig = {\n    classpath configurations.openApiGenerator\n    mainClass = 'org.openapitools.codegen.OpenAPIGenerator'\n    args 'generate'\n    args '-g', 'java'\n    args '-o', &quot;$projectDir&quot;\n    args '-t', &quot;$projectDir/src/main/resources/openapi-config/templates&quot;\n    args &quot;--additional-properties&quot;, &quot;library=feign,&quot; +\n            &quot;dateLibrary=java8,&quot; +\n            &quot;useBeanValidation=false,&quot; +\n            &quot;performBeanValidation=false&quot;\n}\n\ntask generateApi(type: JavaExec) {\n    configure openApiGeneratorConfig\n    systemProperties = ['apis': '', 'models': '']\n    args '-i', 'https://petstore3.swagger.io/api/v3/openapi.yaml'\n    args '-c', &quot;$projectDir/src/main/resources/openapi-config/pet.json&quot;\n}\n</code></pre>\n<p>I'm setting both useBeanValidation and performBeanValidation to false yet I still get @javax.annotation.Nullable annotations in my model fields.</p>\n"},{"tags":["java","spring-boot","mockito","junit5"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":2,"creation_date":1686831426,"post_id":76482332,"comment_id":134855247,"body_markdown":"You don&#39;t assert anything on the fetched books, only the size of the collection. All your other asserts are on your created list of Books not BookDtos.","body":"You don&#39;t assert anything on the fetched books, only the size of the collection. All your other asserts are on your created list of Books not BookDtos."},{"owner":{"account_id":2862907,"reputation":193,"user_id":2457774,"accept_rate":100,"display_name":"10101101"},"score":0,"creation_date":1686833614,"post_id":76482332,"comment_id":134855772,"body_markdown":"@M.Deinum Thanks! Could you please see my updated answer ?","body":"@M.Deinum Thanks! Could you please see my updated answer ?"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1686833853,"post_id":76482332,"comment_id":134855826,"body_markdown":"Which is what you wanted... You will get a list with 3 elements, 1 book and 2 `null` elements. Hence your assertions will fail.","body":"Which is what you wanted... You will get a list with 3 elements, 1 book and 2 <code>null</code> elements. Hence your assertions will fail."},{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1686833970,"post_id":76482332,"comment_id":134855856,"body_markdown":"in the code you posted, I only see `Mockito.doReturn(bookDtos.get(2)...` as a comment. What you have really configured is `Mockito.when(mapper.map(book, BookDto.class)).thenReturn(bookDtos.get(0), bookDtos.get(1), bookDtos.get(2));`","body":"in the code you posted, I only see <code>Mockito.doReturn(bookDtos.get(2)...</code> as a comment. What you have really configured is <code>Mockito.when(mapper.map(book, BookDto.class)).thenReturn(bookDtos.get(0), bookDtos.get(1), bookDtos.get(2));</code>"},{"owner":{"account_id":2862907,"reputation":193,"user_id":2457774,"accept_rate":100,"display_name":"10101101"},"score":0,"creation_date":1686843282,"post_id":76482332,"comment_id":134856899,"body_markdown":"Thanks guys, could you please tell if there is better way, to not have to write the same when statement 3 times ?","body":"Thanks guys, could you please tell if there is better way, to not have to write the same when statement 3 times ?"}],"answers":[{"tags":[],"owner":{"account_id":2862907,"reputation":193,"user_id":2457774,"accept_rate":100,"display_name":"10101101"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1686843072,"creation_date":1686843072,"answer_id":76483289,"question_id":76482332,"body_markdown":"Thanks for comments, indeeed the problem was with my misunderstanding of mockito.\r\n\r\nHere is the fixed test which is now working as I expected.\r\n\r\n    @Test\r\n    public void testFetchAllBooks() {\r\n        Mockito.doReturn(bookDtos.get(0))\r\n                .when(mapper).map(books.get(0), BookDto.class);\r\n        Mockito.doReturn(bookDtos.get(1))\r\n                .when(mapper).map(books.get(1), BookDto.class);\r\n        Mockito.doReturn(bookDtos.get(2))\r\n                .when(mapper).map(books.get(2), BookDto.class);\r\n        Mockito.doReturn(books)\r\n                .when(bookRepository).findAll();\r\n        List&lt;BookDto&gt; fetchedBooks = bookService.fetchAllBooks();\r\n        assertThat(fetchedBooks.size()).isEqualTo(3);\r\n        assertThat(fetchedBooks.get(0))\r\n            .hasFieldOrPropertyWithValue(&quot;title&quot;, &quot;Lord of the Rings&quot;)\r\n            .hasFieldOrPropertyWithValue(&quot;author&quot;, &quot;J.R.R. Tolkien&quot;)\r\n            .hasFieldOrPropertyWithValue(&quot;releaseYear&quot;, 1951)\r\n            .hasFieldOrPropertyWithValue(&quot;description&quot;, &quot;Trilogy&quot;);\r\n        assertThat(fetchedBooks.get(1))\r\n            .hasFieldOrPropertyWithValue(&quot;title&quot;, &quot;Dune&quot;)\r\n            .hasFieldOrPropertyWithValue(&quot;author&quot;, &quot;Frank Herbert&quot;)\r\n            .hasFieldOrPropertyWithValue(&quot;releaseYear&quot;, 1960)\r\n            .hasFieldOrPropertyWithValue(&quot;description&quot;, &quot;Part I&quot;);\r\n        assertThat(fetchedBooks.get(2))\r\n            .hasFieldOrPropertyWithValue(&quot;title&quot;, &quot;Hobbit&quot;)\r\n            .hasFieldOrPropertyWithValue(&quot;author&quot;, &quot;J.R.R. Tolkien&quot;)\r\n            .hasFieldOrPropertyWithValue(&quot;releaseYear&quot;, 1947)\r\n            .hasFieldOrPropertyWithValue(&quot;description&quot;, &quot;Story&quot;);\r\n    }","title":"Why my Service unit test using mockito and model mapper is not failing?","body":"<p>Thanks for comments, indeeed the problem was with my misunderstanding of mockito.</p>\n<p>Here is the fixed test which is now working as I expected.</p>\n<pre><code>@Test\npublic void testFetchAllBooks() {\n    Mockito.doReturn(bookDtos.get(0))\n            .when(mapper).map(books.get(0), BookDto.class);\n    Mockito.doReturn(bookDtos.get(1))\n            .when(mapper).map(books.get(1), BookDto.class);\n    Mockito.doReturn(bookDtos.get(2))\n            .when(mapper).map(books.get(2), BookDto.class);\n    Mockito.doReturn(books)\n            .when(bookRepository).findAll();\n    List&lt;BookDto&gt; fetchedBooks = bookService.fetchAllBooks();\n    assertThat(fetchedBooks.size()).isEqualTo(3);\n    assertThat(fetchedBooks.get(0))\n        .hasFieldOrPropertyWithValue(&quot;title&quot;, &quot;Lord of the Rings&quot;)\n        .hasFieldOrPropertyWithValue(&quot;author&quot;, &quot;J.R.R. Tolkien&quot;)\n        .hasFieldOrPropertyWithValue(&quot;releaseYear&quot;, 1951)\n        .hasFieldOrPropertyWithValue(&quot;description&quot;, &quot;Trilogy&quot;);\n    assertThat(fetchedBooks.get(1))\n        .hasFieldOrPropertyWithValue(&quot;title&quot;, &quot;Dune&quot;)\n        .hasFieldOrPropertyWithValue(&quot;author&quot;, &quot;Frank Herbert&quot;)\n        .hasFieldOrPropertyWithValue(&quot;releaseYear&quot;, 1960)\n        .hasFieldOrPropertyWithValue(&quot;description&quot;, &quot;Part I&quot;);\n    assertThat(fetchedBooks.get(2))\n        .hasFieldOrPropertyWithValue(&quot;title&quot;, &quot;Hobbit&quot;)\n        .hasFieldOrPropertyWithValue(&quot;author&quot;, &quot;J.R.R. Tolkien&quot;)\n        .hasFieldOrPropertyWithValue(&quot;releaseYear&quot;, 1947)\n        .hasFieldOrPropertyWithValue(&quot;description&quot;, &quot;Story&quot;);\n}\n</code></pre>\n"}],"owner":{"account_id":2862907,"reputation":193,"user_id":2457774,"accept_rate":100,"display_name":"10101101"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76483289,"answer_count":1,"score":0,"last_activity_date":1686843072,"creation_date":1686831134,"question_id":76482332,"body_markdown":"I am quite new to Spring and Mockito and I am trapped in one tutorial.\r\nI have a simple service which is fetching books from repository\r\n\r\n    @Service\r\n    public class BookService {\r\n    \r\n        private  BookRepository bookRepository;\r\n        private  ModelMapper modelMapper;\r\n\r\n        public BookService(BookRepository bookRepository, ModelMapper modelMapper) {\r\n            this.bookRepository = bookRepository;\r\n            this.modelMapper = modelMapper;\r\n        }\r\n    \r\n        public List&lt;BookDto&gt; fetchAllBooks() {\r\n            List&lt;Book&gt; books = bookRepository.findAll();\r\n            return books.stream()\r\n                .map(convertBookModelToBookDto())\r\n                .collect(Collectors.toList());\r\n        }\r\n    \r\n        private Function&lt;Book, BookDto&gt; convertBookModelToBookDto() {\r\n            return book -&gt; modelMapper.map(book, BookDto.class);\r\n        }\r\n    }\r\n\r\nThen I have a simple unit test for that service, with just one test\r\n\r\n    @ExtendWith(MockitoExtension.class)\r\n    public class BookServiceTest {\r\n    \r\n    @InjectMocks\r\n    private BookService bookService;\r\n    \r\n    @Mock\r\n    private BookRepository bookRepository;\r\n    \r\n    @Mock\r\n    private ModelMapper mapper;\r\n    \r\n    private List&lt;Book&gt; books;\r\n    private List&lt;BookDto&gt; bookDtos;\r\n    \r\n    @BeforeEach\r\n    public void setUp() {\r\n        Book book = getBook(&quot;Lord of the Rings&quot;, &quot;J.R.R. Tolkien&quot;, 1951, &quot;Trilogy&quot;);\r\n        Book book2 = getBook(&quot;Dune&quot;, &quot;Frank Herbert&quot;, 1960, &quot;Part I&quot;);\r\n        Book book3 = getBook(&quot;Hobbit&quot;, &quot;J.R.R. Tolkien&quot;, 1947, &quot;Story&quot;);\r\n        books = new ArrayList&lt;&gt;();\r\n        books.add(book);\r\n        books.add(book2);\r\n        books.add(book3);\r\n        \r\n        BookDto bookDto = getBookDto(&quot;Lord of the Rings&quot;, &quot;J.R.R. Tolkien&quot;, 1951, &quot;Trilogy&quot;);\r\n        BookDto bookDto2 = getBookDto(&quot;Dune&quot;, &quot;Frank Herbert&quot;, 1960, &quot;Part I&quot;);\r\n        BookDto bookDto3 = getBookDto(&quot;Hobbit&quot;, &quot;J.R.R. Tolkien&quot;, 1947, &quot;Story&quot;);\r\n        bookDtos = new ArrayList&lt;&gt;();\r\n        bookDtos.add(bookDto);\r\n        bookDtos.add(bookDto2);\r\n        bookDtos.add(bookDto3);\r\n        \r\n        MockitoAnnotations.openMocks(this);\r\n    }\r\n\r\n    /**\r\n     * Test of fetchAllBooks method, of class BookService.\r\n     */\r\n    @Test\r\n    public void testFetchAllBooks() {\r\n        Book book = books.get(0);\r\n        // Mockito.doReturn(bookDtos.get(2)).when(mapper).map(book, BookDto.class);\r\n        // Mockito.doReturn(books).when(bookRepository).findAll();\r\n        Mockito.when(bookRepository.findAll()).thenReturn(books);\r\n        Mockito.when(mapper.map(book, BookDto.class))\r\n            .thenReturn(bookDtos.get(0), bookDtos.get(1), bookDtos.get(2));\r\n        List&lt;BookDto&gt; fetchedBooks = bookService.fetchAllBooks();\r\n        assertThat(fetchedBooks.size()).isEqualTo(3);\r\n        assertThat(fetchedBooks.get(0))\r\n            .hasFieldOrPropertyWithValue(&quot;title&quot;, &quot;Lord of the Rings&quot;)\r\n            .hasFieldOrPropertyWithValue(&quot;author&quot;, &quot;J.R.R. Tolkien&quot;)\r\n            .hasFieldOrPropertyWithValue(&quot;releaseYear&quot;, 1951)\r\n            .hasFieldOrPropertyWithValue(&quot;description&quot;, &quot;Trilogy&quot;);\r\n        assertThat(fetchedBooks.get(1))\r\n            .hasFieldOrPropertyWithValue(&quot;title&quot;, &quot;Dune&quot;)\r\n            .hasFieldOrPropertyWithValue(&quot;author&quot;, &quot;Frank Herbert&quot;)\r\n            .hasFieldOrPropertyWithValue(&quot;releaseYear&quot;, 1960)\r\n            .hasFieldOrPropertyWithValue(&quot;description&quot;, &quot;Part I&quot;);\r\n        assertThat(fetchedBooks.get(2))\r\n            .hasFieldOrPropertyWithValue(&quot;title&quot;, &quot;Hobbit&quot;)\r\n            .hasFieldOrPropertyWithValue(&quot;author&quot;, &quot;J.R.R. Tolkien&quot;)\r\n            .hasFieldOrPropertyWithValue(&quot;releaseYear&quot;, 1947)\r\n            .hasFieldOrPropertyWithValue(&quot;description&quot;, &quot;Story&quot;);\r\n    }\r\n    \r\n    private Book getBook(String title, String author, int year, String description) {\r\n        return Book.builder()\r\n                .author(author)\r\n                .title(title)\r\n                .releaseYear(year)\r\n                .description(description)\r\n                .build();\r\n    }\r\n    \r\n    private BookDto getBookDto(String title, String author, int year, String description) {\r\n        return BookDto.builder()\r\n                .author(author)\r\n                .title(title)\r\n                .releaseYear(year)\r\n                .description(description)\r\n                .build();\r\n    }\r\n    }\r\n\r\nThis is my configuration for model mapper\r\n\r\n    @Configuration\r\n    public class ModelMapperConfiguration {\r\n    \r\n    @Bean\r\n    public ModelMapper modelMapper() {\r\n        return new ModelMapper();\r\n    }\r\n    }\r\n\r\nThis is my Book entity class\r\n\r\n    @Data\r\n    @Builder\r\n    @AllArgsConstructor\r\n    @NoArgsConstructor\r\n    @Entity\r\n    @Table(name = &quot;books&quot;)\r\n    public class Book implements Serializable {\r\n    \r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Column(columnDefinition = &quot;NUMERIC(19,0)&quot;)\r\n    private Long id;\r\n    \r\n    @Column(name = &quot;title&quot;, nullable = false, unique = true)\r\n    private String title;\r\n    \r\n    @Column(name = &quot;description&quot;, nullable = false)\r\n    private String description;\r\n    \r\n    @Column(name = &quot;author&quot;, nullable = false)\r\n    private String author;\r\n    \r\n    @Column(name = &quot;release_year&quot;, nullable = false)\r\n    private Integer releaseYear;\r\n    }\r\n\r\nThis is my BookDto class\r\n\r\n    @Data\r\n    @Builder\r\n    @AllArgsConstructor\r\n    @NoArgsConstructor\r\n    public class BookDto {\r\n    \r\n    private Long id;\r\n    \r\n    private String title;\r\n    \r\n    private String description;\r\n    \r\n    private String author;\r\n    \r\n    private Integer releaseYear;\r\n    }\r\n\r\nI dont know why my unit test is not failing, as it should because of this line\r\n\r\n    Mockito.doReturn(bookDtos.get(2)).when(mapper).map(book, BookDto.class);\r\n\r\nbecause it should return the third book dto, for each of the fetched books, so the assertions regarding the first and second fetched books should fail...\r\n\r\nI dont know what I am missing here.\r\n\r\nSpring Boot 2.7.12\r\nMockito 5.3.1\r\nAssertj 3.24.2\r\nModel Mapper 3.1.1\r\nJUnit 5\r\nJava 17\r\n\r\n\r\n**Edit 1**\r\n\r\nIn the assertions of books fetched I was using books, not fetchedBooks.\r\n\r\nBut now get following error when run test:\r\n\r\n    java.lang.AssertionError: Expecting actual not to be null\r\n\r\nat this line:\r\n\r\n    .hasFieldOrPropertyWithValue(&quot;title&quot;, &quot;Dune&quot;)","title":"Why my Service unit test using mockito and model mapper is not failing?","body":"<p>I am quite new to Spring and Mockito and I am trapped in one tutorial.\nI have a simple service which is fetching books from repository</p>\n<pre><code>@Service\npublic class BookService {\n\n    private  BookRepository bookRepository;\n    private  ModelMapper modelMapper;\n\n    public BookService(BookRepository bookRepository, ModelMapper modelMapper) {\n        this.bookRepository = bookRepository;\n        this.modelMapper = modelMapper;\n    }\n\n    public List&lt;BookDto&gt; fetchAllBooks() {\n        List&lt;Book&gt; books = bookRepository.findAll();\n        return books.stream()\n            .map(convertBookModelToBookDto())\n            .collect(Collectors.toList());\n    }\n\n    private Function&lt;Book, BookDto&gt; convertBookModelToBookDto() {\n        return book -&gt; modelMapper.map(book, BookDto.class);\n    }\n}\n</code></pre>\n<p>Then I have a simple unit test for that service, with just one test</p>\n<pre><code>@ExtendWith(MockitoExtension.class)\npublic class BookServiceTest {\n\n@InjectMocks\nprivate BookService bookService;\n\n@Mock\nprivate BookRepository bookRepository;\n\n@Mock\nprivate ModelMapper mapper;\n\nprivate List&lt;Book&gt; books;\nprivate List&lt;BookDto&gt; bookDtos;\n\n@BeforeEach\npublic void setUp() {\n    Book book = getBook(&quot;Lord of the Rings&quot;, &quot;J.R.R. Tolkien&quot;, 1951, &quot;Trilogy&quot;);\n    Book book2 = getBook(&quot;Dune&quot;, &quot;Frank Herbert&quot;, 1960, &quot;Part I&quot;);\n    Book book3 = getBook(&quot;Hobbit&quot;, &quot;J.R.R. Tolkien&quot;, 1947, &quot;Story&quot;);\n    books = new ArrayList&lt;&gt;();\n    books.add(book);\n    books.add(book2);\n    books.add(book3);\n    \n    BookDto bookDto = getBookDto(&quot;Lord of the Rings&quot;, &quot;J.R.R. Tolkien&quot;, 1951, &quot;Trilogy&quot;);\n    BookDto bookDto2 = getBookDto(&quot;Dune&quot;, &quot;Frank Herbert&quot;, 1960, &quot;Part I&quot;);\n    BookDto bookDto3 = getBookDto(&quot;Hobbit&quot;, &quot;J.R.R. Tolkien&quot;, 1947, &quot;Story&quot;);\n    bookDtos = new ArrayList&lt;&gt;();\n    bookDtos.add(bookDto);\n    bookDtos.add(bookDto2);\n    bookDtos.add(bookDto3);\n    \n    MockitoAnnotations.openMocks(this);\n}\n\n/**\n * Test of fetchAllBooks method, of class BookService.\n */\n@Test\npublic void testFetchAllBooks() {\n    Book book = books.get(0);\n    // Mockito.doReturn(bookDtos.get(2)).when(mapper).map(book, BookDto.class);\n    // Mockito.doReturn(books).when(bookRepository).findAll();\n    Mockito.when(bookRepository.findAll()).thenReturn(books);\n    Mockito.when(mapper.map(book, BookDto.class))\n        .thenReturn(bookDtos.get(0), bookDtos.get(1), bookDtos.get(2));\n    List&lt;BookDto&gt; fetchedBooks = bookService.fetchAllBooks();\n    assertThat(fetchedBooks.size()).isEqualTo(3);\n    assertThat(fetchedBooks.get(0))\n        .hasFieldOrPropertyWithValue(&quot;title&quot;, &quot;Lord of the Rings&quot;)\n        .hasFieldOrPropertyWithValue(&quot;author&quot;, &quot;J.R.R. Tolkien&quot;)\n        .hasFieldOrPropertyWithValue(&quot;releaseYear&quot;, 1951)\n        .hasFieldOrPropertyWithValue(&quot;description&quot;, &quot;Trilogy&quot;);\n    assertThat(fetchedBooks.get(1))\n        .hasFieldOrPropertyWithValue(&quot;title&quot;, &quot;Dune&quot;)\n        .hasFieldOrPropertyWithValue(&quot;author&quot;, &quot;Frank Herbert&quot;)\n        .hasFieldOrPropertyWithValue(&quot;releaseYear&quot;, 1960)\n        .hasFieldOrPropertyWithValue(&quot;description&quot;, &quot;Part I&quot;);\n    assertThat(fetchedBooks.get(2))\n        .hasFieldOrPropertyWithValue(&quot;title&quot;, &quot;Hobbit&quot;)\n        .hasFieldOrPropertyWithValue(&quot;author&quot;, &quot;J.R.R. Tolkien&quot;)\n        .hasFieldOrPropertyWithValue(&quot;releaseYear&quot;, 1947)\n        .hasFieldOrPropertyWithValue(&quot;description&quot;, &quot;Story&quot;);\n}\n\nprivate Book getBook(String title, String author, int year, String description) {\n    return Book.builder()\n            .author(author)\n            .title(title)\n            .releaseYear(year)\n            .description(description)\n            .build();\n}\n\nprivate BookDto getBookDto(String title, String author, int year, String description) {\n    return BookDto.builder()\n            .author(author)\n            .title(title)\n            .releaseYear(year)\n            .description(description)\n            .build();\n}\n}\n</code></pre>\n<p>This is my configuration for model mapper</p>\n<pre><code>@Configuration\npublic class ModelMapperConfiguration {\n\n@Bean\npublic ModelMapper modelMapper() {\n    return new ModelMapper();\n}\n}\n</code></pre>\n<p>This is my Book entity class</p>\n<pre><code>@Data\n@Builder\n@AllArgsConstructor\n@NoArgsConstructor\n@Entity\n@Table(name = &quot;books&quot;)\npublic class Book implements Serializable {\n\n@Id\n@GeneratedValue(strategy = GenerationType.IDENTITY)\n@Column(columnDefinition = &quot;NUMERIC(19,0)&quot;)\nprivate Long id;\n\n@Column(name = &quot;title&quot;, nullable = false, unique = true)\nprivate String title;\n\n@Column(name = &quot;description&quot;, nullable = false)\nprivate String description;\n\n@Column(name = &quot;author&quot;, nullable = false)\nprivate String author;\n\n@Column(name = &quot;release_year&quot;, nullable = false)\nprivate Integer releaseYear;\n}\n</code></pre>\n<p>This is my BookDto class</p>\n<pre><code>@Data\n@Builder\n@AllArgsConstructor\n@NoArgsConstructor\npublic class BookDto {\n\nprivate Long id;\n\nprivate String title;\n\nprivate String description;\n\nprivate String author;\n\nprivate Integer releaseYear;\n}\n</code></pre>\n<p>I dont know why my unit test is not failing, as it should because of this line</p>\n<pre><code>Mockito.doReturn(bookDtos.get(2)).when(mapper).map(book, BookDto.class);\n</code></pre>\n<p>because it should return the third book dto, for each of the fetched books, so the assertions regarding the first and second fetched books should fail...</p>\n<p>I dont know what I am missing here.</p>\n<p>Spring Boot 2.7.12\nMockito 5.3.1\nAssertj 3.24.2\nModel Mapper 3.1.1\nJUnit 5\nJava 17</p>\n<p><strong>Edit 1</strong></p>\n<p>In the assertions of books fetched I was using books, not fetchedBooks.</p>\n<p>But now get following error when run test:</p>\n<pre><code>java.lang.AssertionError: Expecting actual not to be null\n</code></pre>\n<p>at this line:</p>\n<pre><code>.hasFieldOrPropertyWithValue(&quot;title&quot;, &quot;Dune&quot;)\n</code></pre>\n"},{"tags":["java","spring-boot","jersey","junit5","jersey-client"],"owner":{"account_id":7372006,"reputation":473,"user_id":5611906,"accept_rate":100,"display_name":"TCH"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686843046,"creation_date":1686837390,"question_id":76483235,"body_markdown":"## Context\r\nI want to test authorizations on Jersey resources in my application. I use JUnit5 and SpringBoot.   \r\nAll the Jersey resources tests extends a JerseyConfiguration class which has a SpringBoot configuration (see below) to create/mock all application services used in the tests. \r\n  \r\nThe &quot;success&quot; cases of my tests work fine, but I expect some of my test to fail with a response 403, because the method called by `@PreAuthorize()` should return false.    \r\nHowever, these fail cases return a response 200. With the debugger, I noticed that the method in `@PreAuthorize()` **is not called at all**, which explains the result 200.    \r\n\r\nSo I wonder if I forgot something in the configuration and how I can make the `@PreAuthorize()` method to be called in the tests\r\n\r\n## Files\r\n \r\n*MyResourceTest.java*  \r\n```java\r\n    public class MyResourceTest extends JerseyConfiguration {\r\n        // some  @Autowired services\r\n    }\r\n```\r\n\r\n*JerseyConfiguration.java*\r\n```java\r\n    public abstract class JerseyConfiguration extends FastJerseyTest {\r\n    \r\n        @Override\r\n        protected void configure(final ResourceConfig config) {\r\n            config.register(AuthenticationExceptionMapperProvider.class);\r\n            config.register(AccessDeniedExceptionMapperProvider.class);\r\n            config.register(JacksonObjectMapperProvider.class);\r\n            config.packages(&quot;jersey.resources.package&quot;); // this creates instances for resources\r\n            config.property(\r\n                &quot;contextConfig&quot;,\r\n                new AnnotationConfigApplicationContext(SpringTestConfig.class)\r\n            );\r\n        }\r\n\r\n        @Override\r\n        protected void configureClient(final ClientConfig config) {\r\n            config.register(JacksonObjectMapperProvider.class);\r\n            config.register(MultiPartFeature.class);\r\n        }\r\n    }\r\n```\r\n\r\n*SpringTestConfig.java*    \r\nIn security.components.package, there are all the `@Component` that implements the methods used in `@PreAuthorize` (like `CanSave.java`, see below)\r\n```java\r\n        @ExtendWith(SpringExtension.class)\r\n        @ComponentScan(basePackages = {&quot;security.components.package&quot;})\r\n        @PropertySource(locations = &quot;classpath:application-test.properties&quot;)\r\n        @Import(SecurityConfiguration.class)\r\n        public class SpringTestConfig {\r\n            ... some mocks\r\n        }\r\n```\r\n\r\n*MyResource.java*\r\n```java\r\n@Component\r\n@Path(&quot;/api&quot;)\r\n@Produces(ResourceConstants.JSON_UTF8)\r\n@Consumes(ResourceConstants.JSON_UTF8)\r\npublic class MyResource {\r\n\r\n    @Autowired\r\n    private MyService service;\r\n\r\n    @POST\r\n    @Path(&quot;/save&quot;)\r\n    @PreAuthorize(&quot;@canSave.checkRole(#id)&quot;)\r\n    public List&lt;Entity&gt; save(@QueryParam(&quot;id&quot;) final Integer id) {\r\n        return this.service.saveBatch(id);\r\n    }\r\n}\r\n```\r\n\r\n*CanSave.java*\r\n```java\r\n@Component(CanSave.NAME)\r\npublic class CanSave {\r\n\r\n    public static final String NAME = &quot;canSave&quot;;\r\n\r\n    public boolean checkRole(final Integer id) {\r\n        // some check\r\n    }\r\n}\r\n```","title":"Test @PreAuthorize with Jersey Resources","body":"<h2>Context</h2>\n<p>I want to test authorizations on Jersey resources in my application. I use JUnit5 and SpringBoot.<br />\nAll the Jersey resources tests extends a JerseyConfiguration class which has a SpringBoot configuration (see below) to create/mock all application services used in the tests.</p>\n<p>The &quot;success&quot; cases of my tests work fine, but I expect some of my test to fail with a response 403, because the method called by <code>@PreAuthorize()</code> should return false.<br />\nHowever, these fail cases return a response 200. With the debugger, I noticed that the method in <code>@PreAuthorize()</code> <strong>is not called at all</strong>, which explains the result 200.</p>\n<p>So I wonder if I forgot something in the configuration and how I can make the <code>@PreAuthorize()</code> method to be called in the tests</p>\n<h2>Files</h2>\n<p><em>MyResourceTest.java</em></p>\n<pre class=\"lang-java prettyprint-override\"><code>    public class MyResourceTest extends JerseyConfiguration {\n        // some  @Autowired services\n    }\n</code></pre>\n<p><em>JerseyConfiguration.java</em></p>\n<pre class=\"lang-java prettyprint-override\"><code>    public abstract class JerseyConfiguration extends FastJerseyTest {\n    \n        @Override\n        protected void configure(final ResourceConfig config) {\n            config.register(AuthenticationExceptionMapperProvider.class);\n            config.register(AccessDeniedExceptionMapperProvider.class);\n            config.register(JacksonObjectMapperProvider.class);\n            config.packages(&quot;jersey.resources.package&quot;); // this creates instances for resources\n            config.property(\n                &quot;contextConfig&quot;,\n                new AnnotationConfigApplicationContext(SpringTestConfig.class)\n            );\n        }\n\n        @Override\n        protected void configureClient(final ClientConfig config) {\n            config.register(JacksonObjectMapperProvider.class);\n            config.register(MultiPartFeature.class);\n        }\n    }\n</code></pre>\n<p><em>SpringTestConfig.java</em><br />\nIn security.components.package, there are all the <code>@Component</code> that implements the methods used in <code>@PreAuthorize</code> (like <code>CanSave.java</code>, see below)</p>\n<pre class=\"lang-java prettyprint-override\"><code>        @ExtendWith(SpringExtension.class)\n        @ComponentScan(basePackages = {&quot;security.components.package&quot;})\n        @PropertySource(locations = &quot;classpath:application-test.properties&quot;)\n        @Import(SecurityConfiguration.class)\n        public class SpringTestConfig {\n            ... some mocks\n        }\n</code></pre>\n<p><em>MyResource.java</em></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\n@Path(&quot;/api&quot;)\n@Produces(ResourceConstants.JSON_UTF8)\n@Consumes(ResourceConstants.JSON_UTF8)\npublic class MyResource {\n\n    @Autowired\n    private MyService service;\n\n    @POST\n    @Path(&quot;/save&quot;)\n    @PreAuthorize(&quot;@canSave.checkRole(#id)&quot;)\n    public List&lt;Entity&gt; save(@QueryParam(&quot;id&quot;) final Integer id) {\n        return this.service.saveBatch(id);\n    }\n}\n</code></pre>\n<p><em>CanSave.java</em></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component(CanSave.NAME)\npublic class CanSave {\n\n    public static final String NAME = &quot;canSave&quot;;\n\n    public boolean checkRole(final Integer id) {\n        // some check\n    }\n}\n</code></pre>\n"},{"tags":["java","maven","integration-testing","maven-module"],"comments":[{"owner":{"account_id":473079,"reputation":149,"user_id":881982,"display_name":"Kaspars Rinkevics"},"score":0,"creation_date":1686843455,"post_id":76483276,"comment_id":134856922,"body_markdown":"One option could be to create a script that wolud first build Module A and then execute integration tests in Module B.","body":"One option could be to create a script that wolud first build Module A and then execute integration tests in Module B."},{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1686845814,"post_id":76483276,"comment_id":134857394,"body_markdown":"First you have to define the dependencies correctly ... then maven will automatically package module-A before running module-B ... Why are the integration tests in module-B  instead of A? Can you give more detailed information on that ... And what kind of functionally needs really to execute the jar ? Are usual unit- integration tests are not enough?","body":"First you have to define the dependencies correctly ... then maven will automatically package module-A before running module-B ... Why are the integration tests in module-B  instead of A? Can you give more detailed information on that ... And what kind of functionally needs really to execute the jar ? Are usual unit- integration tests are not enough?"},{"owner":{"account_id":101780,"reputation":2397,"user_id":273593,"accept_rate":38,"display_name":"Vito De Tullio"},"score":0,"creation_date":1686901835,"post_id":76483276,"comment_id":134864768,"body_markdown":"ok, then how can I express the dependencies correctly? again: if I build module-A I get and executable jar. In module-B I want to *use* the executable jar in my tests. Moreover I want to be able to update the source code of module-A, run the tests in module-B and then mvn should automatically rebuild the executable jar.","body":"ok, then how can I express the dependencies correctly? again: if I build module-A I get and executable jar. In module-B I want to <i>use</i> the executable jar in my tests. Moreover I want to be able to update the source code of module-A, run the tests in module-B and then mvn should automatically rebuild the executable jar."}],"owner":{"account_id":101780,"reputation":2397,"user_id":273593,"accept_rate":38,"display_name":"Vito De Tullio"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":89,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1686838233,"creation_date":1686838233,"question_id":76483276,"body_markdown":"I have a multi-module maven project.\r\none of the modules (module-A) let me create an executable jar. This jar is normally executed from a third party application and communicate via stdin/stdout.\r\n\r\na second one (module-B) is an integration test. In this module I want to verify that the third party process can communicate succesfully and my jar can behave in the expected way.\r\n\r\nat the moment, if I do some changes to module-A source code, I need to firstly `mvn package` the module to get the new jar and then I can run the tests in module-B.\r\n\r\nwhat is the best way to tell module-B to firstly package module-A before running the tests?\r\n","title":"package a module before integration tests","body":"<p>I have a multi-module maven project.\none of the modules (module-A) let me create an executable jar. This jar is normally executed from a third party application and communicate via stdin/stdout.</p>\n<p>a second one (module-B) is an integration test. In this module I want to verify that the third party process can communicate succesfully and my jar can behave in the expected way.</p>\n<p>at the moment, if I do some changes to module-A source code, I need to firstly <code>mvn package</code> the module to get the new jar and then I can run the tests in module-B.</p>\n<p>what is the best way to tell module-B to firstly package module-A before running the tests?</p>\n"},{"tags":["java","spring","hibernate","jpa"],"comments":[{"owner":{"account_id":7788110,"reputation":1429,"user_id":6306585,"accept_rate":60,"display_name":"Shakirov Ramil"},"score":0,"creation_date":1686830752,"post_id":76482244,"comment_id":134855078,"body_markdown":"what if use nativeQuery = true?","body":"what if use nativeQuery = true?"},{"owner":{"account_id":1192733,"reputation":1507,"user_id":1165160,"accept_rate":92,"display_name":"King Midas"},"score":0,"creation_date":1686835794,"post_id":76482244,"comment_id":134856321,"body_markdown":"I would like to avoid using native queries as I use different sql engines on different scenarios.","body":"I would like to avoid using native queries as I use different sql engines on different scenarios."}],"answers":[{"tags":[],"owner":{"account_id":1192733,"reputation":1507,"user_id":1165160,"accept_rate":92,"display_name":"King Midas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1686837701,"creation_date":1686837701,"answer_id":76483264,"question_id":76482244,"body_markdown":"Seems that the issue is related to the `:types IS NULL` part. Removing it make it works perfectly:\r\n\r\n```\r\n @Query(&quot;&quot;&quot;\r\n        SELECT COUNT(a) FROM MyEntity e WHERE\r\n        e.type IN :types\r\n        &quot;&quot;&quot;)\r\n    long countByTypesIn(@Param(&quot;types&quot;) List&lt;Type&gt; types);\r\n}\r\n```\r\n\r\n","title":"Spring JPA issue with IN operator","body":"<p>Seems that the issue is related to the <code>:types IS NULL</code> part. Removing it make it works perfectly:</p>\n<pre><code> @Query(&quot;&quot;&quot;\n        SELECT COUNT(a) FROM MyEntity e WHERE\n        e.type IN :types\n        &quot;&quot;&quot;)\n    long countByTypesIn(@Param(&quot;types&quot;) List&lt;Type&gt; types);\n}\n</code></pre>\n"}],"owner":{"account_id":1192733,"reputation":1507,"user_id":1165160,"accept_rate":92,"display_name":"King Midas"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":76483264,"answer_count":1,"score":2,"last_activity_date":1686837701,"creation_date":1686830381,"question_id":76482244,"body_markdown":"I have a very simple query. It is not the original one, but I can reproduce the issue with it and is simpler to understand. \r\n\r\n    @Repository\r\n    public interface MyRepository extends JpaRepository&lt;MyEntity, Long&gt; {\r\n\r\n     @Query(&quot;&quot;&quot;\r\n            SELECT COUNT(a) FROM MyEntity e WHERE\r\n            (:types IS NULL OR e.type IN :types)\r\n            &quot;&quot;&quot;)\r\n        long countByTypesIn(@Param(&quot;types&quot;) List&lt;Type&gt; types);\r\n    }\r\n\r\nThe idea here is, that types list is null, is not used on the where clause, and if the list is populated, only filter by the elements present on the list. \r\n\r\nThe entity has apart from other columns:\r\n\r\n```\r\n@Entity\r\npublic class MyEntity {\r\n    [...]\r\n    @ManyToOne(fetch = FetchType.EAGER, optional = false)\r\n    @JoinColumn(name = &quot;my_type&quot;)\r\n    private Type type;\r\n    [...]\r\n}\r\n```\r\n\r\n\r\nThen I create a test, where I call the repository for this count:\r\n\r\n```          \r\nAssert.assertEquals(myRepository.countByTypesIn(Collections.singletonList(type)), 1);\r\n```\r\n\r\n\r\nThe problem I have here, is that sometimes the test is launching the next exception:\r\n\r\n```\r\njava.lang.AssertionError: Unexpected value type (expected : java.lang.Long) : [myType (456)] (java.util.Collections$SingletonList)\r\n\tat org.hibernate.sql.exec.internal.JdbcParameterBindingImpl.&lt;init&gt;(JdbcParameterBindingImpl.java:23)\r\n```\r\nClass Type overrides `toString()`to show exactly the name of the type and an ID. \r\n\r\nThat as far I can understand, means that is expecting a long in param `:types` but receives a collection. But it is a collection, and must be a collection for a `IN` operator. I do not understand why is looking for a Long\r\n\r\nAnd the worst, is only failing the 50% of the times. Sometimes yes, sometimes not. I have debugged, and the hibernate class `JdbcParameterBindingImpl` is receiving different parameters in some cases. But the test is exactly the same. ","title":"Spring JPA issue with IN operator","body":"<p>I have a very simple query. It is not the original one, but I can reproduce the issue with it and is simpler to understand.</p>\n<pre><code>@Repository\npublic interface MyRepository extends JpaRepository&lt;MyEntity, Long&gt; {\n\n @Query(&quot;&quot;&quot;\n        SELECT COUNT(a) FROM MyEntity e WHERE\n        (:types IS NULL OR e.type IN :types)\n        &quot;&quot;&quot;)\n    long countByTypesIn(@Param(&quot;types&quot;) List&lt;Type&gt; types);\n}\n</code></pre>\n<p>The idea here is, that types list is null, is not used on the where clause, and if the list is populated, only filter by the elements present on the list.</p>\n<p>The entity has apart from other columns:</p>\n<pre><code>@Entity\npublic class MyEntity {\n    [...]\n    @ManyToOne(fetch = FetchType.EAGER, optional = false)\n    @JoinColumn(name = &quot;my_type&quot;)\n    private Type type;\n    [...]\n}\n</code></pre>\n<p>Then I create a test, where I call the repository for this count:</p>\n<pre><code>Assert.assertEquals(myRepository.countByTypesIn(Collections.singletonList(type)), 1);\n</code></pre>\n<p>The problem I have here, is that sometimes the test is launching the next exception:</p>\n<pre><code>java.lang.AssertionError: Unexpected value type (expected : java.lang.Long) : [myType (456)] (java.util.Collections$SingletonList)\n    at org.hibernate.sql.exec.internal.JdbcParameterBindingImpl.&lt;init&gt;(JdbcParameterBindingImpl.java:23)\n</code></pre>\n<p>Class Type overrides <code>toString()</code>to show exactly the name of the type and an ID.</p>\n<p>That as far I can understand, means that is expecting a long in param <code>:types</code> but receives a collection. But it is a collection, and must be a collection for a <code>IN</code> operator. I do not understand why is looking for a Long</p>\n<p>And the worst, is only failing the 50% of the times. Sometimes yes, sometimes not. I have debugged, and the hibernate class <code>JdbcParameterBindingImpl</code> is receiving different parameters in some cases. But the test is exactly the same.</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":7792,"page":368,"page_size":100}
