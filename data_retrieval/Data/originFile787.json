{"items":[{"tags":["java","spring-mvc","spring-aop","proxyfactory"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1671711075,"post_id":74888329,"comment_id":132159262,"body_markdown":"Stop using the old outdated xml configuration of spring","body":"Stop using the old outdated xml configuration of spring"},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1671711184,"post_id":74888329,"comment_id":132159306,"body_markdown":"Take care of java namning conventions. Class names should start with upper case character","body":"Take care of java namning conventions. Class names should start with upper case character"},{"owner":{"account_id":19194105,"reputation":1,"user_id":14023227,"display_name":"Arun Pandey"},"score":0,"creation_date":1671711466,"post_id":74888329,"comment_id":132159380,"body_markdown":"unable to resolve the error, why it is not able to create a bean proxy?","body":"unable to resolve the error, why it is not able to create a bean proxy?"},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1671712166,"post_id":74888329,"comment_id":132159596,"body_markdown":"Looks like a problem with your java version: *ClassFormatError*. Maybe you have different versions while compile and runtime?","body":"Looks like a problem with your java version: <i>ClassFormatError</i>. Maybe you have different versions while compile and runtime?"},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1671717176,"post_id":74888329,"comment_id":132161176,"body_markdown":"Just update your Spring + CGLib combo to something which runs fine on more recent Java versions.","body":"Just update your Spring + CGLib combo to something which runs fine on more recent Java versions."},{"owner":{"account_id":19194105,"reputation":1,"user_id":14023227,"display_name":"Arun Pandey"},"score":0,"creation_date":1671803206,"post_id":74888329,"comment_id":132179911,"body_markdown":"updated to the newest version and it worked. Thanks a lot.","body":"updated to the newest version and it worked. Thanks a lot."}],"answers":[{"tags":[],"owner":{"account_id":1901420,"reputation":3763,"user_id":1717210,"display_name":"TacheDeChoco"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671713282,"creation_date":1671713282,"answer_id":74888744,"question_id":74888329,"body_markdown":"&gt; module java.base does not &quot;opens java.lang&quot; to unnamed module\r\n&gt; @445b295b\r\n\r\nIt seems to be a JPMS (Java Platform Module System) issue.\r\nI guess the (very old) CGLIB library (the one Spring is using internally to dynamically create proxies) does not have a module descriptor allowing to access &quot;outer&quot; classes\r\n\r\nStarting the JVM with `--add-reads modules=ALL-UNNAMED` may fix the problem.","title":"Error creating bean with name bean id &quot;proxy&quot;","body":"<blockquote>\n<p>module java.base does not &quot;opens java.lang&quot; to unnamed module\n@445b295b</p>\n</blockquote>\n<p>It seems to be a JPMS (Java Platform Module System) issue.\nI guess the (very old) CGLIB library (the one Spring is using internally to dynamically create proxies) does not have a module descriptor allowing to access &quot;outer&quot; classes</p>\n<p>Starting the JVM with <code>--add-reads modules=ALL-UNNAMED</code> may fix the problem.</p>\n"}],"owner":{"account_id":19194105,"reputation":1,"user_id":14023227,"display_name":"Arun Pandey"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":237,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1671717045,"answer_count":1,"score":0,"last_activity_date":1671723312,"creation_date":1671710993,"question_id":74888329,"body_markdown":"applicatonContext.xml\r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;beans\r\n        xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n        xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n        xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans  \r\n                   http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&quot;&gt;\r\n    &lt;bean id=&quot;obj&quot; class=&quot;com.learningspring.aop.aopA&quot;/&gt;\r\n    &lt;bean id=&quot;beforeAdvisor&quot; class=&quot;com.learningspring.aop.BeforeAdvisor&quot;/&gt;\r\n    &lt;bean id=&quot;proxy&quot; class=&quot;org.springframework.aop.framework.ProxyFactoryBean&quot;&gt;\r\n        &lt;property name=&quot;target&quot; ref=&quot;obj&quot;/&gt;\r\n        &lt;property name=&quot;interceptorNames&quot;&gt;\r\n            &lt;list&gt;\r\n                &lt;value&gt;beforeAdvisor&lt;/value&gt;\r\n            &lt;/list&gt;\r\n        &lt;/property&gt;\r\n    &lt;/bean&gt;\r\n&lt;/beans&gt;\r\n```\r\n\r\naopA.java\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    package com.learningspring.aop;\r\n    public class aopA {\r\n    \tpublic void m() {\r\n    \t\tSystem.out.println(&quot;Actual business logic&quot;);\r\n    \t}\r\n    }\r\n\r\nBeforeAdvisor.java\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    package com.learningspring.aop;\r\n    \r\n    import java.lang.reflect.Method;\r\n    import org.springframework.aop.MethodBeforeAdvice;\r\n    \r\n    public class BeforeAdvisor implements MethodBeforeAdvice {\r\n    \t@Override\r\n    \tpublic void before(Method method, Object[] args, Object target) throws Throwable {\r\n                 System.out.println(&quot;Additional concern before actual logic &quot;);\r\n    \t}\r\n    }\r\n\r\nTestAOP.java\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    package com.learningspring.aop;\r\n    \r\n    import org.springframework.beans.factory.BeanFactory;\r\n    import org.springframework.beans.factory.xml.XmlBeanFactory;\r\n    import org.springframework.core.io.ClassPathResource;\r\n    import org.springframework.core.io.Resource;  \r\n    \r\n    public class TestAOP {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tResource r = new ClassPathResource(&quot;applicationContext.xml&quot;);\r\n    \t\tBeanFactory bf = new XmlBeanFactory(r);\r\n    \t\taopA a = (aopA) bf.getBean(&quot;proxy&quot;);\r\n    \t\ta.m();\r\n    \t}\r\n    }\r\n\r\nI had run the above program but I am getting the following error:\r\n\r\n&lt;!-- language: none --&gt;\r\n\r\n    Exception in thread &quot;main&quot; org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;proxy&#39;: FactoryBean threw exception on object creation; nested exception is java.lang.ExceptionInInitializerError\r\n    \tat org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:150)\r\n    \tat org.springframework.beans.factory.support.FactoryBeanRegistrySupport.getObjectFromFactoryBean(FactoryBeanRegistrySupport.java:102)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getObjectForBeanInstance(AbstractBeanFactory.java:1387)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:301)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:189)\r\n    \tat com.learningspring.aop.TestAOP.main(TestAOP.java:19)\r\n    Caused by: java.lang.ExceptionInInitializerError\r\n    \tat net.sf.cglib.core.KeyFactory$Generator.generateClass(KeyFactory.java:166)\r\n    \tat net.sf.cglib.core.DefaultGeneratorStrategy.generate(DefaultGeneratorStrategy.java:25)\r\n    \tat net.sf.cglib.core.AbstractClassGenerator.create(AbstractClassGenerator.java:216)\r\n    \tat net.sf.cglib.core.KeyFactory$Generator.create(KeyFactory.java:144)\r\n    \tat net.sf.cglib.core.KeyFactory.create(KeyFactory.java:116)\r\n    \tat net.sf.cglib.core.KeyFactory.create(KeyFactory.java:108)\r\n    \tat net.sf.cglib.core.KeyFactory.create(KeyFactory.java:104)\r\n    \tat net.sf.cglib.proxy.Enhancer.&lt;clinit&gt;(Enhancer.java:69)\r\n    \tat org.springframework.aop.framework.Cglib2AopProxy.createEnhancer(Cglib2AopProxy.java:228)\r\n    \tat org.springframework.aop.framework.Cglib2AopProxy.getProxy(Cglib2AopProxy.java:170)\r\n    \tat org.springframework.aop.framework.ProxyFactoryBean.getProxy(ProxyFactoryBean.java:362)\r\n    \tat org.springframework.aop.framework.ProxyFactoryBean.getSingletonInstance(ProxyFactoryBean.java:316)\r\n    \tat org.springframework.aop.framework.ProxyFactoryBean.getObject(ProxyFactoryBean.java:242)\r\n    \tat org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:143)\r\n    \t... 5 more\r\n    Caused by: java.lang.reflect.InaccessibleObjectException: Unable to make protected final java.lang.Class java.lang.ClassLoader.defineClass(java.lang.String,byte[],int,int,java.security.ProtectionDomain) throws java.lang.ClassFormatError accessible: module java.base does not &quot;opens java.lang&quot; to unnamed module @445b295b\r\n    \tat java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:354)\r\n    \tat java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:297)\r\n    \tat java.base/java.lang.reflect.Method.checkCanSetAccessible(Method.java:199)\r\n    \tat java.base/java.lang.reflect.Method.setAccessible(Method.java:193)\r\n    \tat net.sf.cglib.core.ReflectUtils$2.run(ReflectUtils.java:56)\r\n    \tat java.base/java.security.AccessController.doPrivileged(AccessController.java:318)\r\n    \tat net.sf.cglib.core.ReflectUtils.&lt;clinit&gt;(ReflectUtils.java:46)\r\n    \t... 19 more\r\n","title":"Error creating bean with name bean id &quot;proxy&quot;","body":"<p>applicatonContext.xml</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;beans\n        xmlns=&quot;http://www.springframework.org/schema/beans&quot;\n        xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n        xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans  \n                   http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&quot;&gt;\n    &lt;bean id=&quot;obj&quot; class=&quot;com.learningspring.aop.aopA&quot;/&gt;\n    &lt;bean id=&quot;beforeAdvisor&quot; class=&quot;com.learningspring.aop.BeforeAdvisor&quot;/&gt;\n    &lt;bean id=&quot;proxy&quot; class=&quot;org.springframework.aop.framework.ProxyFactoryBean&quot;&gt;\n        &lt;property name=&quot;target&quot; ref=&quot;obj&quot;/&gt;\n        &lt;property name=&quot;interceptorNames&quot;&gt;\n            &lt;list&gt;\n                &lt;value&gt;beforeAdvisor&lt;/value&gt;\n            &lt;/list&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n&lt;/beans&gt;\n</code></pre>\n<p>aopA.java</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.learningspring.aop;\npublic class aopA {\n    public void m() {\n        System.out.println(&quot;Actual business logic&quot;);\n    }\n}\n</code></pre>\n<p>BeforeAdvisor.java</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.learningspring.aop;\n\nimport java.lang.reflect.Method;\nimport org.springframework.aop.MethodBeforeAdvice;\n\npublic class BeforeAdvisor implements MethodBeforeAdvice {\n    @Override\n    public void before(Method method, Object[] args, Object target) throws Throwable {\n             System.out.println(&quot;Additional concern before actual logic &quot;);\n    }\n}\n</code></pre>\n<p>TestAOP.java</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.learningspring.aop;\n\nimport org.springframework.beans.factory.BeanFactory;\nimport org.springframework.beans.factory.xml.XmlBeanFactory;\nimport org.springframework.core.io.ClassPathResource;\nimport org.springframework.core.io.Resource;  \n\npublic class TestAOP {\n    public static void main(String[] args) {\n        Resource r = new ClassPathResource(&quot;applicationContext.xml&quot;);\n        BeanFactory bf = new XmlBeanFactory(r);\n        aopA a = (aopA) bf.getBean(&quot;proxy&quot;);\n        a.m();\n    }\n}\n</code></pre>\n<p>I had run the above program but I am getting the following error:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Exception in thread &quot;main&quot; org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'proxy': FactoryBean threw exception on object creation; nested exception is java.lang.ExceptionInInitializerError\n    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:150)\n    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.getObjectFromFactoryBean(FactoryBeanRegistrySupport.java:102)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getObjectForBeanInstance(AbstractBeanFactory.java:1387)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:301)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:189)\n    at com.learningspring.aop.TestAOP.main(TestAOP.java:19)\nCaused by: java.lang.ExceptionInInitializerError\n    at net.sf.cglib.core.KeyFactory$Generator.generateClass(KeyFactory.java:166)\n    at net.sf.cglib.core.DefaultGeneratorStrategy.generate(DefaultGeneratorStrategy.java:25)\n    at net.sf.cglib.core.AbstractClassGenerator.create(AbstractClassGenerator.java:216)\n    at net.sf.cglib.core.KeyFactory$Generator.create(KeyFactory.java:144)\n    at net.sf.cglib.core.KeyFactory.create(KeyFactory.java:116)\n    at net.sf.cglib.core.KeyFactory.create(KeyFactory.java:108)\n    at net.sf.cglib.core.KeyFactory.create(KeyFactory.java:104)\n    at net.sf.cglib.proxy.Enhancer.&lt;clinit&gt;(Enhancer.java:69)\n    at org.springframework.aop.framework.Cglib2AopProxy.createEnhancer(Cglib2AopProxy.java:228)\n    at org.springframework.aop.framework.Cglib2AopProxy.getProxy(Cglib2AopProxy.java:170)\n    at org.springframework.aop.framework.ProxyFactoryBean.getProxy(ProxyFactoryBean.java:362)\n    at org.springframework.aop.framework.ProxyFactoryBean.getSingletonInstance(ProxyFactoryBean.java:316)\n    at org.springframework.aop.framework.ProxyFactoryBean.getObject(ProxyFactoryBean.java:242)\n    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:143)\n    ... 5 more\nCaused by: java.lang.reflect.InaccessibleObjectException: Unable to make protected final java.lang.Class java.lang.ClassLoader.defineClass(java.lang.String,byte[],int,int,java.security.ProtectionDomain) throws java.lang.ClassFormatError accessible: module java.base does not &quot;opens java.lang&quot; to unnamed module @445b295b\n    at java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:354)\n    at java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:297)\n    at java.base/java.lang.reflect.Method.checkCanSetAccessible(Method.java:199)\n    at java.base/java.lang.reflect.Method.setAccessible(Method.java:193)\n    at net.sf.cglib.core.ReflectUtils$2.run(ReflectUtils.java:56)\n    at java.base/java.security.AccessController.doPrivileged(AccessController.java:318)\n    at net.sf.cglib.core.ReflectUtils.&lt;clinit&gt;(ReflectUtils.java:46)\n    ... 19 more\n</code></pre>\n"},{"tags":["java","amazon-web-services","aws-lambda","aws-java-sdk"],"answers":[{"comments":[{"owner":{"account_id":2052160,"reputation":2825,"user_id":1830916,"display_name":"locus2k"},"score":0,"creation_date":1632830998,"post_id":69356946,"comment_id":122594779,"body_markdown":"The region is already specified with the environment variable AWS_DEFAULT_REGION. The lambda sets the variable and the access keys when it executes. Also if the secret couldn&#39;t be found due to the wrong region it would&#39;ve thrown an exception but my lambda isn&#39;t even doing that. It is just hanging until it times out.","body":"The region is already specified with the environment variable AWS_DEFAULT_REGION. The lambda sets the variable and the access keys when it executes. Also if the secret couldn&#39;t be found due to the wrong region it would&#39;ve thrown an exception but my lambda isn&#39;t even doing that. It is just hanging until it times out."},{"owner":{"account_id":7442031,"reputation":3314,"user_id":5659521,"display_name":"Amit Meena"},"score":0,"creation_date":1632834175,"post_id":69356946,"comment_id":122596171,"body_markdown":"Can you please describe the networking config of lambda.","body":"Can you please describe the networking config of lambda."},{"owner":{"account_id":2052160,"reputation":2825,"user_id":1830916,"display_name":"locus2k"},"score":0,"creation_date":1632834338,"post_id":69356946,"comment_id":122596253,"body_markdown":"The lambda is triggered by API Gateway. I&#39;ve been testing it via the test feature inside the Lambda Management Console. All that works fine and I can see the api gateway hit it and trigger it but it still times out when trying to get the secret","body":"The lambda is triggered by API Gateway. I&#39;ve been testing it via the test feature inside the Lambda Management Console. All that works fine and I can see the api gateway hit it and trigger it but it still times out when trying to get the secret"},{"owner":{"account_id":7442031,"reputation":3314,"user_id":5659521,"display_name":"Amit Meena"},"score":0,"creation_date":1632836769,"post_id":69356946,"comment_id":122597607,"body_markdown":"It will be good if you define a VPC endpoint you can define an endpoint for SecreteManager. Please refer: https://heathivie.com/2020/08/13/aws-lambda-and-secrets-manager-timeout/","body":"It will be good if you define a VPC endpoint you can define an endpoint for SecreteManager. Please refer: <a href=\"https://heathivie.com/2020/08/13/aws-lambda-and-secrets-manager-timeout/\" rel=\"nofollow noreferrer\">heathivie.com/2020/08/13/aws-lambda-and-secrets-manager-time&zwnj;&#8203;out</a>"},{"owner":{"account_id":2052160,"reputation":2825,"user_id":1830916,"display_name":"locus2k"},"score":0,"creation_date":1632837411,"post_id":69356946,"comment_id":122597946,"body_markdown":"My lambda is not attached to a VPC so it should be able to get secrets","body":"My lambda is not attached to a VPC so it should be able to get secrets"},{"owner":{"account_id":2052160,"reputation":2825,"user_id":1830916,"display_name":"locus2k"},"score":1,"creation_date":1632887765,"post_id":69356946,"comment_id":122611076,"body_markdown":"I figured out the issue after many more hours of googling","body":"I figured out the issue after many more hours of googling"},{"owner":{"account_id":7442031,"reputation":3314,"user_id":5659521,"display_name":"Amit Meena"},"score":0,"creation_date":1632891969,"post_id":69356946,"comment_id":122611845,"body_markdown":"Cool. This should have been mentioned in AWS documentation thogh.","body":"Cool. This should have been mentioned in AWS documentation thogh."}],"tags":[],"owner":{"account_id":7442031,"reputation":3314,"user_id":5659521,"display_name":"Amit Meena"},"comment_count":7,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1632836914,"creation_date":1632811537,"answer_id":69356946,"question_id":69356259,"body_markdown":"Troubleshooting steps:\r\n\r\n1. Please specify the region while creating the client.\r\n```\r\nAWSSecretsManager client = AWSSecretsManagerClientBuilder.standard().withRegion(Regions.&lt;YOUR_REGION&gt;).build();\r\n```\r\nPlease refer: https://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/secretsmanager/AWSSecretsManagerClientBuilder.html\r\n\r\n2. If this does not work and the lambda is still timing out define a VPC endpoint for the SecreteManager service.\r\n\r\nPlease refer: https://heathivie.com/2020/08/13/aws-lambda-and-secrets-manager-timeout/\r\n\r\nRegards\r\nAmit","title":"Unable to retrieve AWS Secrets from Lambda running Java","body":"<p>Troubleshooting steps:</p>\n<ol>\n<li>Please specify the region while creating the client.</li>\n</ol>\n<pre><code>AWSSecretsManager client = AWSSecretsManagerClientBuilder.standard().withRegion(Regions.&lt;YOUR_REGION&gt;).build();\n</code></pre>\n<p>Please refer: <a href=\"https://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/secretsmanager/AWSSecretsManagerClientBuilder.html\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/secretsmanager/AWSSecretsManagerClientBuilder.html</a></p>\n<ol start=\"2\">\n<li>If this does not work and the lambda is still timing out define a VPC endpoint for the SecreteManager service.</li>\n</ol>\n<p>Please refer: <a href=\"https://heathivie.com/2020/08/13/aws-lambda-and-secrets-manager-timeout/\" rel=\"nofollow noreferrer\">https://heathivie.com/2020/08/13/aws-lambda-and-secrets-manager-timeout/</a></p>\n<p>Regards\nAmit</p>\n"},{"tags":[],"owner":{"account_id":2052160,"reputation":2825,"user_id":1830916,"display_name":"locus2k"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1632887733,"creation_date":1632887733,"answer_id":69370204,"question_id":69356259,"body_markdown":"I figured out the issue. The problem was that Java Lambdas need time to spin up and then initialize the SecretsManager client which caused the time.\r\n\r\nI ended up making the client static \r\n\r\n    public class HandlerStream implements RequestStreamHandler {\r\n      static SecretsManagerClient client = SecretsManagerClient.builder().build();\r\n      ...\r\n    }\r\n\r\n\r\nEven after that I got an out of memory exception so I increased the memory of the lambda to 256 which seemed to solve the problem. Some reason the lambda is using 146 mb of memory upon execution. I dont know if this is due to how it handles java or not.\r\n","title":"Unable to retrieve AWS Secrets from Lambda running Java","body":"<p>I figured out the issue. The problem was that Java Lambdas need time to spin up and then initialize the SecretsManager client which caused the time.</p>\n<p>I ended up making the client static</p>\n<pre><code>public class HandlerStream implements RequestStreamHandler {\n  static SecretsManagerClient client = SecretsManagerClient.builder().build();\n  ...\n}\n</code></pre>\n<p>Even after that I got an out of memory exception so I increased the memory of the lambda to 256 which seemed to solve the problem. Some reason the lambda is using 146 mb of memory upon execution. I dont know if this is due to how it handles java or not.</p>\n"},{"tags":[],"owner":{"account_id":15199214,"reputation":11,"user_id":10967684,"display_name":"DaddyBaddy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671722891,"creation_date":1671531027,"answer_id":74861431,"question_id":69356259,"body_markdown":"I ran into this problem when creating a lambda using Terraform. I&#39;d not set a value for the timeout of the lambda and the default timeout value for Lambda execution is 3 seconds.\r\n\r\nIt was taking longer than 3 seconds to create the secretsmanager client using the Java SDK builder so my Lambda was hitting the execution timeout on every execution.  \r\n","title":"Unable to retrieve AWS Secrets from Lambda running Java","body":"<p>I ran into this problem when creating a lambda using Terraform. I'd not set a value for the timeout of the lambda and the default timeout value for Lambda execution is 3 seconds.</p>\n<p>It was taking longer than 3 seconds to create the secretsmanager client using the Java SDK builder so my Lambda was hitting the execution timeout on every execution.</p>\n"}],"owner":{"account_id":2052160,"reputation":2825,"user_id":1830916,"display_name":"locus2k"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1721,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":69370204,"answer_count":3,"score":3,"last_activity_date":1671722891,"creation_date":1632807064,"question_id":69356259,"body_markdown":"I am writing a AWS Lambda function that will handle requests from discord. I am storing my discord values in AWS SecretsManager and need to retrieve them so I can verify the requests.\r\n\r\nI have my lambda set to time out after 30 seconds and when my lambda runs it times out and never get the secrets value. I ran the same code in my IDE and it was able to fetch the values. I even assumed the role of my lambda and was able to execute the code in my IDE as well. The lambda role has the following permissions:\r\n\r\n`secretsmanager:GetSecretValue, secretsmanager:DescribeSecret, secretsmanager:ListSecrets`\r\n\r\nI even gave the lambda role read permissions to the secret value. Would anyone know why its timing out in the lambda and not getting the value? Here is my lambda handler class.\r\n\r\n    public class HandlerStream implements RequestHandler&lt;DiscordEventRequest, DiscordEventResponse&gt; {\r\n      DiscordSecrets discordSecrets;\r\n      Gson gson = new GsonBuilder().setPrettyPrinting().create();\r\n    \r\n      @Override\r\n      public DiscordEventResponse handleRequest(DiscordEventRequest event, Context context) {\r\n        LambdaLogger logger = context.getLogger();\r\n    \r\n        logger.log(String.format(&quot;Received Event: %s&quot;, gson.toJson(event)));\r\n        try {\r\n          getDiscordSecrets(logger);\r\n    \r\n          DiscordEventResponse response = new DiscordEventResponse();\r\n          switch (event.getJsonBody().getType()) {\r\n            case 1:\r\n              response.setType(1);\r\n          }\r\n    \r\n          return response;\r\n        } catch (Throwable ex) {\r\n          logger.log(&quot;Exception occurred when executing lambda: &quot; + ex.getMessage());\r\n        }\r\n       throw new RuntimeException(&quot;[UNAUTHORIZED] invalid state detected&quot;);\r\n      }\r\n    \r\n      private DiscordSecrets getDiscordSecrets(LambdaLogger logger) {\r\n        if (discordSecrets == null) {\r\n          String tokenName = System.getenv(&quot;discordToken&quot;);\r\n    \r\n          logger.log(&quot;Token Name &quot; + tokenName);\r\n    \r\n          AWSSecretsManager client = AWSSecretsManagerClientBuilder.standard().build();\r\n    \r\n          GetSecretValueRequest request = new GetSecretValueRequest().withSecretId(tokenName);\r\n    \r\n          GetSecretValueResult response = client.getSecretValue(request);\r\n    \r\n          String secret;\r\n    \r\n          logger.log(&quot;Got secret value&quot;);\r\n    \r\n          if (response.getSecretString() != null) {\r\n            secret = response.getSecretString();\r\n          } else {\r\n            secret = new String(Base64.getDecoder().decode(response.getSecretString().getBytes(StandardCharsets.UTF_8)));\r\n          }\r\n          discordSecrets = gson.fromJson(secret, DiscordSecrets.class);\r\n          logger.log(&quot;Discord Secrets &quot; + gson.toJson(discordSecrets));\r\n        }\r\n        return discordSecrets;\r\n      }\r\n    }\r\n\r\nThis is what is returned from the lambda (I changed it to 5 seconds for quicker time outs but it was timing out after 30 seconds as well)\r\n\r\n    2021-09-28T00:11:12.827-05:00\tSTART RequestId: e5e211d0-9307-4609-9939-ff54f876e516 Version: $LATEST\r\n    2021-09-28T00:11:13.321-05:00\tReceived Event: { &quot;jsonBody&quot;: { &quot;type&quot;: 1, &quot;version&quot;: 0 } }\r\n    2021-09-28T00:11:13.321-05:00\tToken Name DiscordToken\r\n    2021-09-28T00:11:17.842-05:00\tEND RequestId: e5e211d0-9307-4609-9939-ff54f876e516\r\n    2021-09-28T00:11:17.842-05:00\tREPORT RequestId: e5e211d0-9307-4609-9939-ff54f876e516 Duration: 5005.29 ms Billed Duration: 5000 ms Memory Size: 128 MB Max Memory Used: 102 MB Init Duration: 492.26 ms\r\n    2021-09-28T00:11:17.842-05:00\t2021-09-28T05:11:17.833Z e5e211d0-9307-4609-9939-ff54f876e516 Task timed out after 5.01 seconds\r\n\r\nIt never hits the &quot;Got secret value&quot; nor does it throw an exception. All it does it wait until eventually the lambda times out.\r\n\r\nAny help would be appreciated\r\n\r\n**Update**\r\nI updated my lambda to use the v2 of the client as follows\r\n  \r\n\r\n    private DiscordSecrets getDiscordSecrets(LambdaLogger logger) {\r\n        if (discordSecrets == null) {\r\n          String tokenName = System.getenv(&quot;discordToken&quot;);\r\n    \r\n          logger.log(&quot;Token Name &quot; + tokenName);\r\n          logger.log(&quot;Creating Client&quot;);\r\n          SecretsManagerClient client = SecretsManagerClient.builder().region(Region.US_EAST_2).build();\r\n          logger.log(&quot;Done creating client&quot;);\r\n          String secret;\r\n    \r\n          GetSecretValueRequest request = GetSecretValueRequest.builder().secretId(tokenName).build();\r\n          GetSecretValueResponse response = client.getSecretValue(request);\r\n    \r\n          logger.log(&quot;Got secret value&quot;);\r\n    \r\n          if (response.secretString() != null) {\r\n            secret = response.secretString();\r\n          } else {\r\n            secret = new String(Base64.getDecoder().decode(response.secretBinary().asByteBuffer()).array());\r\n          }\r\n          discordSecrets = gson.fromJson(secret, DiscordSecrets.class);\r\n          logger.log(&quot;Discord Secrets &quot; + gson.toJson(discordSecrets));\r\n        }\r\n        return discordSecrets;\r\n      }\r\n\r\nIt looks like it is hanging on trying to create the client. As it times out before `Done creating client` happens. IT also was hanging getting the client with the old method as well.","title":"Unable to retrieve AWS Secrets from Lambda running Java","body":"<p>I am writing a AWS Lambda function that will handle requests from discord. I am storing my discord values in AWS SecretsManager and need to retrieve them so I can verify the requests.</p>\n<p>I have my lambda set to time out after 30 seconds and when my lambda runs it times out and never get the secrets value. I ran the same code in my IDE and it was able to fetch the values. I even assumed the role of my lambda and was able to execute the code in my IDE as well. The lambda role has the following permissions:</p>\n<p><code>secretsmanager:GetSecretValue, secretsmanager:DescribeSecret, secretsmanager:ListSecrets</code></p>\n<p>I even gave the lambda role read permissions to the secret value. Would anyone know why its timing out in the lambda and not getting the value? Here is my lambda handler class.</p>\n<pre><code>public class HandlerStream implements RequestHandler&lt;DiscordEventRequest, DiscordEventResponse&gt; {\n  DiscordSecrets discordSecrets;\n  Gson gson = new GsonBuilder().setPrettyPrinting().create();\n\n  @Override\n  public DiscordEventResponse handleRequest(DiscordEventRequest event, Context context) {\n    LambdaLogger logger = context.getLogger();\n\n    logger.log(String.format(&quot;Received Event: %s&quot;, gson.toJson(event)));\n    try {\n      getDiscordSecrets(logger);\n\n      DiscordEventResponse response = new DiscordEventResponse();\n      switch (event.getJsonBody().getType()) {\n        case 1:\n          response.setType(1);\n      }\n\n      return response;\n    } catch (Throwable ex) {\n      logger.log(&quot;Exception occurred when executing lambda: &quot; + ex.getMessage());\n    }\n   throw new RuntimeException(&quot;[UNAUTHORIZED] invalid state detected&quot;);\n  }\n\n  private DiscordSecrets getDiscordSecrets(LambdaLogger logger) {\n    if (discordSecrets == null) {\n      String tokenName = System.getenv(&quot;discordToken&quot;);\n\n      logger.log(&quot;Token Name &quot; + tokenName);\n\n      AWSSecretsManager client = AWSSecretsManagerClientBuilder.standard().build();\n\n      GetSecretValueRequest request = new GetSecretValueRequest().withSecretId(tokenName);\n\n      GetSecretValueResult response = client.getSecretValue(request);\n\n      String secret;\n\n      logger.log(&quot;Got secret value&quot;);\n\n      if (response.getSecretString() != null) {\n        secret = response.getSecretString();\n      } else {\n        secret = new String(Base64.getDecoder().decode(response.getSecretString().getBytes(StandardCharsets.UTF_8)));\n      }\n      discordSecrets = gson.fromJson(secret, DiscordSecrets.class);\n      logger.log(&quot;Discord Secrets &quot; + gson.toJson(discordSecrets));\n    }\n    return discordSecrets;\n  }\n}\n</code></pre>\n<p>This is what is returned from the lambda (I changed it to 5 seconds for quicker time outs but it was timing out after 30 seconds as well)</p>\n<pre><code>2021-09-28T00:11:12.827-05:00   START RequestId: e5e211d0-9307-4609-9939-ff54f876e516 Version: $LATEST\n2021-09-28T00:11:13.321-05:00   Received Event: { &quot;jsonBody&quot;: { &quot;type&quot;: 1, &quot;version&quot;: 0 } }\n2021-09-28T00:11:13.321-05:00   Token Name DiscordToken\n2021-09-28T00:11:17.842-05:00   END RequestId: e5e211d0-9307-4609-9939-ff54f876e516\n2021-09-28T00:11:17.842-05:00   REPORT RequestId: e5e211d0-9307-4609-9939-ff54f876e516 Duration: 5005.29 ms Billed Duration: 5000 ms Memory Size: 128 MB Max Memory Used: 102 MB Init Duration: 492.26 ms\n2021-09-28T00:11:17.842-05:00   2021-09-28T05:11:17.833Z e5e211d0-9307-4609-9939-ff54f876e516 Task timed out after 5.01 seconds\n</code></pre>\n<p>It never hits the &quot;Got secret value&quot; nor does it throw an exception. All it does it wait until eventually the lambda times out.</p>\n<p>Any help would be appreciated</p>\n<p><strong>Update</strong>\nI updated my lambda to use the v2 of the client as follows</p>\n<pre><code>private DiscordSecrets getDiscordSecrets(LambdaLogger logger) {\n    if (discordSecrets == null) {\n      String tokenName = System.getenv(&quot;discordToken&quot;);\n\n      logger.log(&quot;Token Name &quot; + tokenName);\n      logger.log(&quot;Creating Client&quot;);\n      SecretsManagerClient client = SecretsManagerClient.builder().region(Region.US_EAST_2).build();\n      logger.log(&quot;Done creating client&quot;);\n      String secret;\n\n      GetSecretValueRequest request = GetSecretValueRequest.builder().secretId(tokenName).build();\n      GetSecretValueResponse response = client.getSecretValue(request);\n\n      logger.log(&quot;Got secret value&quot;);\n\n      if (response.secretString() != null) {\n        secret = response.secretString();\n      } else {\n        secret = new String(Base64.getDecoder().decode(response.secretBinary().asByteBuffer()).array());\n      }\n      discordSecrets = gson.fromJson(secret, DiscordSecrets.class);\n      logger.log(&quot;Discord Secrets &quot; + gson.toJson(discordSecrets));\n    }\n    return discordSecrets;\n  }\n</code></pre>\n<p>It looks like it is hanging on trying to create the client. As it times out before <code>Done creating client</code> happens. IT also was hanging getting the client with the old method as well.</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":39846,"reputation":991173,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":2,"creation_date":1409696611,"post_id":25633172,"comment_id":40050001,"body_markdown":"`Looper` and `Handler` are mostly there in support of the main application thread. You are welcome to use them for other threads, and occasionally there will be cause for that (see `LocationManager`). However, having used a `HandlerThread` before, a `ThreadPoolExecutor` would be my choice for background work.","body":"<code>Looper</code> and <code>Handler</code> are mostly there in support of the main application thread. You are welcome to use them for other threads, and occasionally there will be cause for that (see <code>LocationManager</code>). However, having used a <code>HandlerThread</code> before, a <code>ThreadPoolExecutor</code> would be my choice for background work."}],"answers":[{"tags":[],"owner":{"account_id":405484,"reputation":34324,"user_id":774398,"accept_rate":83,"display_name":"Patrick"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1671722741,"creation_date":1409696556,"answer_id":25633323,"question_id":25633172,"body_markdown":"A looper by itself does not have many advantages over an executor. It is how Android manages worker. But you are able to get the main thread of your app with `Looper.getMainLooper()`, this can have the following advantages:\r\n\r\n* You can change the ui from the MainLooper, (only do if not a compute intense background task, since you would freeze the UI)\r\n* Execute Runnables &quot;in-sync&quot; with the all the other native tasks. Meaning you post your Runnable in the same queue as android does\r\n* No need to create a thread yourself. You can use the already running Looper.","title":"Looper/Handler vs. Executor","body":"<p>A looper by itself does not have many advantages over an executor. It is how Android manages worker. But you are able to get the main thread of your app with <code>Looper.getMainLooper()</code>, this can have the following advantages:</p>\n<ul>\n<li>You can change the ui from the MainLooper, (only do if not a compute intense background task, since you would freeze the UI)</li>\n<li>Execute Runnables &quot;in-sync&quot; with the all the other native tasks. Meaning you post your Runnable in the same queue as android does</li>\n<li>No need to create a thread yourself. You can use the already running Looper.</li>\n</ul>\n"}],"owner":{"display_name":"user2476398"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2070,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":25633323,"answer_count":1,"score":2,"last_activity_date":1671722741,"creation_date":1409695805,"question_id":25633172,"body_markdown":"Why use Looper/Handler when I could use an Executor method(s)?\r\n\r\nThe Looper/Handler duo seems rather clunky and doesn&#39;t seem to do a great deal beyond allowing the queuing of runnables and seemingly has less flexibility.\r\n\r\nWhat was the looper design rationale?\r\n\r\nThanks.\r\n","title":"Looper/Handler vs. Executor","body":"<p>Why use Looper/Handler when I could use an Executor method(s)?</p>\n\n<p>The Looper/Handler duo seems rather clunky and doesn't seem to do a great deal beyond allowing the queuing of runnables and seemingly has less flexibility.</p>\n\n<p>What was the looper design rationale?</p>\n\n<p>Thanks.</p>\n"},{"tags":["java","spring-boot","design-patterns","repository","repository-pattern"],"comments":[{"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"score":0,"creation_date":1670513496,"post_id":74732623,"comment_id":131896739,"body_markdown":"The if-else version is the most readable, after all.","body":"The if-else version is the most readable, after all."},{"owner":{"account_id":14482834,"reputation":3924,"user_id":10461625,"display_name":"PatPanda"},"score":0,"creation_date":1670513593,"post_id":74732623,"comment_id":131896780,"body_markdown":"but definitely not flexible, as all repositories mapping are hardcoded within the controller. (And the hashmap is quite nice! :) )","body":"but definitely not flexible, as all repositories mapping are hardcoded within the controller. (And the hashmap is quite nice! :) )"},{"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"score":1,"creation_date":1670513654,"post_id":74732623,"comment_id":131896807,"body_markdown":"What do you mean by flexible? If you get a new repository you have to touch the code anyway.","body":"What do you mean by flexible? If you get a new repository you have to touch the code anyway."},{"owner":{"account_id":26317294,"reputation":210,"user_id":19979867,"display_name":"Leonardo Emmanuel de Azevedo"},"score":0,"creation_date":1670515187,"post_id":74732623,"comment_id":131897392,"body_markdown":"You can have an interface to represent all repositories and use SPEL to use the one you need based on properties","body":"You can have an interface to represent all repositories and use SPEL to use the one you need based on properties"}],"answers":[{"comments":[{"owner":{"account_id":14482834,"reputation":3924,"user_id":10461625,"display_name":"PatPanda"},"score":0,"creation_date":1671157794,"post_id":74819010,"comment_id":132043879,"body_markdown":"Hello @eltabo, thank you for this answer. This solution is very nice, very clean. Leveraging a Factory is quite smart. However, since repositories will extends two interfaces with save(), there is a risk of ```reference to save is ambiguous``` as well as ```types my.repository.BaseRepository and org.springframework.data.repository.reactive.ReactiveCrudRepository&lt;my.model.MyPojo,java.lang.String&gt; are incompatible;```","body":"Hello @eltabo, thank you for this answer. This solution is very nice, very clean. Leveraging a Factory is quite smart. However, since repositories will extends two interfaces with save(), there is a risk of <code>reference to save is ambiguous</code> as well as <code>types my.repository.BaseRepository and org.springframework.data.repository.reactive.ReactiveCrudRep&zwnj;&#8203;ository&lt;my.model.MyP&zwnj;&#8203;ojo,java.lang.String&zwnj;&#8203;&gt; are incompatible;</code>"},{"owner":{"account_id":14482834,"reputation":3924,"user_id":10461625,"display_name":"PatPanda"},"score":0,"creation_date":1671157992,"post_id":74819010,"comment_id":132043900,"body_markdown":"Furthermore, I am quite interested in the ```@Value``` Map, because it offers the ability to configure multiple &quot;whereToSave&quot; mapping to one same repository. Instead of having ```@Repository(&quot;repoA&quot;)```, I can do in the map {repoA:ARepository, mongo:MongoDbRepository , yetAnotherWhereToWithValueA:ARepositry}","body":"Furthermore, I am quite interested in the <code>@Value</code> Map, because it offers the ability to configure multiple &quot;whereToSave&quot; mapping to one same repository. Instead of having <code>@Repository(&quot;repoA&quot;)</code>, I can do in the map {repoA:ARepository, mongo:MongoDbRepository , yetAnotherWhereToWithValueA:ARepositry}"},{"owner":{"account_id":14482834,"reputation":3924,"user_id":10461625,"display_name":"PatPanda"},"score":0,"creation_date":1671158015,"post_id":74819010,"comment_id":132043906,"body_markdown":"With that said, this solution is very advanced and nice, upvote","body":"With that said, this solution is very advanced and nice, upvote"},{"owner":{"account_id":2487219,"reputation":3759,"user_id":2165447,"display_name":"eltabo"},"score":0,"creation_date":1671232318,"post_id":74819010,"comment_id":132062750,"body_markdown":"In that case I think your propossed solution have the same incompatibility with ReactiveCrudRepository because you rely on a Function&lt;MyPojo, MyPojo&gt;, anyway let&#39;s take a look","body":"In that case I think your propossed solution have the same incompatibility with ReactiveCrudRepository because you rely on a Function&lt;MyPojo, MyPojo&gt;, anyway let&#39;s take a look"}],"tags":[],"owner":{"account_id":2487219,"reputation":3759,"user_id":2165447,"display_name":"eltabo"},"comment_count":4,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1671150465,"creation_date":1671150465,"answer_id":74819010,"question_id":74732623,"body_markdown":"You can create a base repository to be extended by all your repositories:\r\n\r\n    public interface BaseRepository {\r\n    \tMyPojo save(MyPojo onboarding);\r\n    }\r\n\r\n\r\nso you will have a bunch of repositories like:\r\n\r\n    @Repository(&quot;repoA&quot;)\r\n    public interface ARepository extends JpaRepository&lt;MyPojo, String&gt;, BaseRepository {\r\n    }\r\n\r\n    @Repository(&quot;repoB&quot;)\r\n    public interface BRepository extends JpaRepository&lt;MyPojo, String&gt;, BaseRepository {\r\n    }\r\n\r\n    ...\r\n\r\nThose repositories will be provided by a factory:\r\n\r\n    public interface BaseRepositoryFactory {\r\n    \tBaseRepository getBaseRepository(String whereToSave);\r\n    }\r\n\r\nthat you must configure in a ServiceLocatorFactoryBean:\r\n\r\n    @Bean\r\n    public ServiceLocatorFactoryBean baseRepositoryBean() {\r\n    \tServiceLocatorFactoryBean serviceLocatorFactoryBean = new ServiceLocatorFactoryBean();\r\n    \tserviceLocatorFactoryBean.setServiceLocatorInterface(BaseRepositoryFactory.class);\r\n    \treturn serviceLocatorFactoryBean;\r\n    }\r\n\r\nNow you can inject the factory wherever you need and get the repo want:\r\n\r\n    @Autowired\r\n    private BaseRepositoryFactory baseRepositoryFactory;\r\n    \r\n    ...\r\n    \r\n    baseRepositoryFactory.getBaseRepository(&quot;repoA&quot;).save(myPojo);\r\n    \r\n    ...\r\n\r\n\r\nHope it helps.","title":"SpringBoot selecting the @Repository based on design pattern and configuration","body":"<p>You can create a base repository to be extended by all your repositories:</p>\n<pre><code>public interface BaseRepository {\n    MyPojo save(MyPojo onboarding);\n}\n</code></pre>\n<p>so you will have a bunch of repositories like:</p>\n<pre><code>@Repository(&quot;repoA&quot;)\npublic interface ARepository extends JpaRepository&lt;MyPojo, String&gt;, BaseRepository {\n}\n\n@Repository(&quot;repoB&quot;)\npublic interface BRepository extends JpaRepository&lt;MyPojo, String&gt;, BaseRepository {\n}\n\n...\n</code></pre>\n<p>Those repositories will be provided by a factory:</p>\n<pre><code>public interface BaseRepositoryFactory {\n    BaseRepository getBaseRepository(String whereToSave);\n}\n</code></pre>\n<p>that you must configure in a ServiceLocatorFactoryBean:</p>\n<pre><code>@Bean\npublic ServiceLocatorFactoryBean baseRepositoryBean() {\n    ServiceLocatorFactoryBean serviceLocatorFactoryBean = new ServiceLocatorFactoryBean();\n    serviceLocatorFactoryBean.setServiceLocatorInterface(BaseRepositoryFactory.class);\n    return serviceLocatorFactoryBean;\n}\n</code></pre>\n<p>Now you can inject the factory wherever you need and get the repo want:</p>\n<pre><code>@Autowired\nprivate BaseRepositoryFactory baseRepositoryFactory;\n\n...\n\nbaseRepositoryFactory.getBaseRepository(&quot;repoA&quot;).save(myPojo);\n\n...\n</code></pre>\n<p>Hope it helps.</p>\n"},{"comments":[{"owner":{"account_id":14482834,"reputation":3924,"user_id":10461625,"display_name":"PatPanda"},"score":0,"creation_date":1671272186,"post_id":74827531,"comment_id":132066885,"body_markdown":"Hello @mh377, this is a great post! Thanks! However, having the ```@Bean public Map repositoryMap() {```, even in a separate @Configuration, is still requiring the code level to have the hash map hard coded. This is a much better version of my ControllerVersionTwo, but still requires the code to hold the mapping. What I am looking for, is for a configuration from property file to hold the configuration","body":"Hello @mh377, this is a great post! Thanks! However, having the <code>@Bean public Map repositoryMap() {</code>, even in a separate @Configuration, is still requiring the code level to have the hash map hard coded. This is a much better version of my ControllerVersionTwo, but still requires the code to hold the mapping. What I am looking for, is for a configuration from property file to hold the configuration"},{"owner":{"account_id":114811,"reputation":1718,"user_id":301757,"accept_rate":83,"display_name":"mh377"},"score":0,"creation_date":1671274493,"post_id":74827531,"comment_id":132067198,"body_markdown":"Then if you want to have it in configuration e.g. store the class names in a list a yaml the you probably want to create a new instance based on those class names using reflection https://stackoverflow.com/questions/6094575/creating-an-instance-using-the-class-name-and-calling-constructor","body":"Then if you want to have it in configuration e.g. store the class names in a list a yaml the you probably want to create a new instance based on those class names using reflection <a href=\"https://stackoverflow.com/questions/6094575/creating-an-instance-using-the-class-name-and-calling-constructor\" title=\"creating an instance using the class name and calling constructor\">stackoverflow.com/questions/6094575/&hellip;</a>"},{"owner":{"account_id":5776494,"reputation":122,"user_id":4558427,"accept_rate":40,"display_name":"Raphallal"},"score":0,"creation_date":1671639918,"post_id":74827531,"comment_id":132143382,"body_markdown":"If you define a name for each `@Repository` component, then `@Autowired` a `Map&lt;String, ? extends Repository&gt;`, maybe you don&#39;t even have to hardcode the map. [Documentation says](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/beans/factory/annotation/Autowired.html) &quot;In case of an array, Collection, or Map dependency type, the container autowires all beans matching the declared value type.&quot;. Maybe that is what you are looking for.","body":"If you define a name for each <code>@Repository</code> component, then <code>@Autowired</code> a <code>Map&lt;String, ? extends Repository&gt;</code>, maybe you don&#39;t even have to hardcode the map. <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/beans/factory/annotation/Autowired.html\" rel=\"nofollow noreferrer\">Documentation says</a> &quot;In case of an array, Collection, or Map dependency type, the container autowires all beans matching the declared value type.&quot;. Maybe that is what you are looking for."}],"tags":[],"owner":{"account_id":114811,"reputation":1718,"user_id":301757,"accept_rate":83,"display_name":"mh377"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1671211613,"creation_date":1671209761,"answer_id":74827531,"question_id":74732623,"body_markdown":"Have you tried creating a configuration class to create your repository map \r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    @Configuration\r\n    public class MyConfiguration {\r\n\r\n      @Bean\r\n      public Map repositoryMap() {\r\n        Map&lt;String, ? extends Repository&gt; repositoryMap = new HashMap&lt;&gt;();\r\n        \r\n        repositoryMap.put(&#39;redis&#39;, new RedisRepository());\r\n        repositoryMap.put(&#39;mongo&#39;, new MongoRepository());\r\n        repositoryMap.put(&#39;elastic&#39;, new ElasticRepository());\r\n        \r\n        return Collections.unmodifiableMap(repositoryMap);\r\n      \r\n      }\r\n\r\n\r\n    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n\r\nThen you could have the following in your rest controller\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    @RestController\r\n    @Configuration\r\n    public class ControllerVersionFour {\r\n\r\n        @Autowired\r\n        private Map&lt;String, ? extends Repository&gt; repositoryMap;\r\n        \r\n        @PostMapping(path = &quot;/save/{dbname}&quot;)\r\n        public String save(@RequestBody MyRequest myRequest,  @PathVariable(&quot;dbname&quot;) String dbname) {\r\n            MyPojo myPojo = new MyPojo(UUID.randomUUID().toString(), myRequest.getValue());\r\n            return repisitoryMap.get(dbname).save(myPojo);\r\n        }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nIt might be better to have the db as a path/query parameter instead of having it in the request body. That way you may or may not be able to just save the request body depending on your use case instead of creating another pojo.\r\n\r\nThis [post][1] may also be useful for autowiring a map\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/20918825/can-spring-autowired-map","title":"SpringBoot selecting the @Repository based on design pattern and configuration","body":"<p>Have you tried creating a configuration class to create your repository map</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>@Configuration\npublic class MyConfiguration {\n\n  @Bean\n  public Map repositoryMap() {\n    Map&lt;String, ? extends Repository&gt; repositoryMap = new HashMap&lt;&gt;();\n    \n    repositoryMap.put('redis', new RedisRepository());\n    repositoryMap.put('mongo', new MongoRepository());\n    repositoryMap.put('elastic', new ElasticRepository());\n    \n    return Collections.unmodifiableMap(repositoryMap);\n  \n  }\n\n\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>Then you could have the following in your rest controller</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>@RestController\n@Configuration\npublic class ControllerVersionFour {\n\n    @Autowired\n    private Map&lt;String, ? extends Repository&gt; repositoryMap;\n    \n    @PostMapping(path = \"/save/{dbname}\")\n    public String save(@RequestBody MyRequest myRequest,  @PathVariable(\"dbname\") String dbname) {\n        MyPojo myPojo = new MyPojo(UUID.randomUUID().toString(), myRequest.getValue());\n        return repisitoryMap.get(dbname).save(myPojo);\n    }</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>It might be better to have the db as a path/query parameter instead of having it in the request body. That way you may or may not be able to just save the request body depending on your use case instead of creating another pojo.</p>\n<p>This <a href=\"https://stackoverflow.com/questions/20918825/can-spring-autowired-map\">post</a> may also be useful for autowiring a map</p>\n"},{"comments":[{"owner":{"account_id":14482834,"reputation":3924,"user_id":10461625,"display_name":"PatPanda"},"score":0,"creation_date":1671712958,"post_id":74887431,"comment_id":132159837,"body_markdown":"Hello @Philippe, this is a very nice answer. This common interface + ```applicationContext.getBean()``` is working like a charm. However, I am still looking for a map configured by @Value. Because in your example, the &quot;whereToSave&quot; can only be &quot;redis&quot;. I am hoping for a map style configuration where I can map multiple keys to RedisRepository, for instance, a map like this will have two keys mapping to redis repo: ```{redis:RedisRepository, mongo:MongoDbRepository , saveToRedisPlease:RedisRepositry}```. With that said, your solution is very nice. Upvote","body":"Hello @Philippe, this is a very nice answer. This common interface + <code>applicationContext.getBean()</code> is working like a charm. However, I am still looking for a map configured by @Value. Because in your example, the &quot;whereToSave&quot; can only be &quot;redis&quot;. I am hoping for a map style configuration where I can map multiple keys to RedisRepository, for instance, a map like this will have two keys mapping to redis repo: <code>{redis:RedisRepository, mongo:MongoDbRepository , saveToRedisPlease:RedisRepositry}</code>. With that said, your solution is very nice. Upvote"},{"owner":{"account_id":4945120,"reputation":143,"user_id":3980746,"display_name":"Philippe K"},"score":0,"creation_date":1671722638,"post_id":74887431,"comment_id":132163196,"body_markdown":"I change the implementation to retrieve a map that deal with aliases","body":"I change the implementation to retrieve a map that deal with aliases"},{"owner":{"account_id":14482834,"reputation":3924,"user_id":10461625,"display_name":"PatPanda"},"score":0,"creation_date":1671756164,"post_id":74887431,"comment_id":132171344,"body_markdown":"This is correct, thank you @Philippe! Thanks for the clear explanations","body":"This is correct, thank you @Philippe! Thanks for the clear explanations"}],"tags":[],"owner":{"account_id":4945120,"reputation":143,"user_id":3980746,"display_name":"Philippe K"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1671722605,"creation_date":1671706181,"answer_id":74887431,"question_id":74732623,"body_markdown":"**Short answer:** \r\n * create a shared interface\r\n * create multiple sub-class of this interface (one per storage) using different spring component names\r\n * Use a map to deal with aliases\r\n * use Spring context to retrieve the right bean by alias (instead of creating a custom factory)\r\n\r\nNow adding a new storage is only adding a new `Repository` classes with a name\r\n\r\n\r\n\r\n**Explanation:**\r\nAs mentioned in the other answer you first need to define a common interface as you can&#39;t use the `CrudRepository.save(...)`.\r\nIn my example I reuse the same signature as the `save` method to avoid re-implementing it in the sub-classes of `CrudRepository`.\r\n\r\n```java\r\npublic interface MyInterface&lt;T&gt; {\r\n    &lt;S extends T&gt; S save(S entity);\r\n}\r\n```\r\n\r\nRedis Repository:\r\n```java\r\n@Repository(&quot;redis&quot;) // Here is the name of the redis repo\r\npublic class RedisRepository implements MyInterface&lt;MyPojo&gt;  {\r\n    @Override\r\n    public &lt;S extends MyPojo&gt; S save(S entity) {\r\n        entity.setValue(entity.getValue() + &quot; saved by redis&quot;);\r\n        return entity;\r\n    }\r\n}\r\n```\r\n\r\nFor the other `CrudRepository` no need to provide an implementation:\r\n```java\r\n@Repository(&quot;elastic&quot;) // Here is the name of the elastic repo\r\npublic interface ElasticRepository  extends CrudRepository&lt;MyPojo, String&gt;, MyInterface&lt;MyPojo&gt; {\r\n}\r\n```\r\n\r\nCreate a configuration for your aliases in `application.yml`\r\n```yaml\r\nconfiguration:\r\n  design:\r\n    pattern:\r\n      map:\r\n        redis: redis\r\n        saveToRedisPlease: redis\r\n        elastic: elastic\r\n```\r\n\r\nCreate a custom properties to retrieve the map:\r\n```java\r\n@Component\r\n@ConfigurationProperties(prefix = &quot;configuration.design.pattern&quot;)\r\npublic class PatternProperties {\r\n    private Map&lt;String, String&gt;  map;\r\n\r\n    public String getRepoName(String alias) {\r\n        return map.get(alias);\r\n    }\r\n\r\n    public Map&lt;String, String&gt; getMap() {\r\n        return map;\r\n    }\r\n\r\n    public void setMap(Map&lt;String, String&gt; map) {\r\n        this.map = map;\r\n    }\r\n}\r\n```\r\n\r\nNow create the version three of your repository with the injection of `SpringContext`:\r\n```java\r\n@RestController\r\npublic class ControllerVersionThree {\r\n\r\n    private final ApplicationContext context;\r\n\r\n    private PatternProperties designPatternMap;\r\n\r\n    public ControllerVersionThree(ApplicationContext context,\r\n                                  PatternProperties designPatternMap) {\r\n        this.context = context;\r\n        this.designPatternMap = designPatternMap;\r\n    }\r\n\r\n    @PostMapping(path = &quot;/save&quot;)\r\n    public String save(@RequestBody MyRequest myRequest) {\r\n        String whereToSave = myRequest.getWhereToSave();\r\n        MyPojo myPojo = new MyPojo(UUID.randomUUID().toString(), myRequest.getValue());\r\n        String repoName = designPatternMap.getRepoName(whereToSave);\r\n        MyInterface&lt;MyPojo&gt; repo = context.getBean(repoName, MyInterface.class);\r\n        return repo.save(myPojo).toString();\r\n    }\r\n\r\n}\r\n```\r\n\r\nYou can check that this is working with a test:\r\n```java\r\nimport org.junit.jupiter.api.Test;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.boot.test.context.SpringBootTest;\r\nimport org.springframework.boot.test.web.client.TestRestTemplate;\r\nimport org.springframework.boot.test.web.server.LocalServerPort;\r\nimport org.springframework.http.HttpEntity;\r\n\r\nimport static org.junit.jupiter.api.Assertions.assertEquals;\r\n\r\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\r\nclass ControllerVersionThreeTest {\r\n    @LocalServerPort\r\n    private int port;\r\n    @Autowired\r\n    private TestRestTemplate restTemplate;\r\n\r\n    @Test\r\n    void testSaveByRedis() {\r\n        // Given: here &#39;redis&#39; is the name of the spring beans\r\n        HttpEntity&lt;MyRequest&gt; request = new HttpEntity&lt;&gt;(new MyRequest(&quot;redis&quot;, &quot;aValue&quot;));\r\n\r\n        // When\r\n        String response = restTemplate.postForObject(&quot;http://localhost:&quot; + port + &quot;/save&quot;, request, String.class);\r\n\r\n        // Then\r\n        assertEquals(&quot;MyPojo{value=&#39;aValue saved by redis&#39;}&quot;, response);\r\n    }\r\n\r\n    @Test\r\n    void testSaveByRedisAlias() {\r\n        // Given: here &#39;saveToRedisPlease&#39; is an alias name of the spring beans\r\n        HttpEntity&lt;MyRequest&gt; request = new HttpEntity&lt;&gt;(new MyRequest(&quot;saveToRedisPlease&quot;, &quot;aValue&quot;));\r\n\r\n        // When\r\n        String response = restTemplate.postForObject(&quot;http://localhost:&quot; + port + &quot;/save&quot;, request, String.class);\r\n\r\n        // Then\r\n        assertEquals(&quot;MyPojo{value=&#39;aValue saved by redis&#39;}&quot;, response);\r\n    }\r\n\r\n}\r\n```\r\n\r\n\r\n","title":"SpringBoot selecting the @Repository based on design pattern and configuration","body":"<p><strong>Short answer:</strong></p>\n<ul>\n<li>create a shared interface</li>\n<li>create multiple sub-class of this interface (one per storage) using different spring component names</li>\n<li>Use a map to deal with aliases</li>\n<li>use Spring context to retrieve the right bean by alias (instead of creating a custom factory)</li>\n</ul>\n<p>Now adding a new storage is only adding a new <code>Repository</code> classes with a name</p>\n<p><strong>Explanation:</strong>\nAs mentioned in the other answer you first need to define a common interface as you can't use the <code>CrudRepository.save(...)</code>.\nIn my example I reuse the same signature as the <code>save</code> method to avoid re-implementing it in the sub-classes of <code>CrudRepository</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface MyInterface&lt;T&gt; {\n    &lt;S extends T&gt; S save(S entity);\n}\n</code></pre>\n<p>Redis Repository:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Repository(&quot;redis&quot;) // Here is the name of the redis repo\npublic class RedisRepository implements MyInterface&lt;MyPojo&gt;  {\n    @Override\n    public &lt;S extends MyPojo&gt; S save(S entity) {\n        entity.setValue(entity.getValue() + &quot; saved by redis&quot;);\n        return entity;\n    }\n}\n</code></pre>\n<p>For the other <code>CrudRepository</code> no need to provide an implementation:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Repository(&quot;elastic&quot;) // Here is the name of the elastic repo\npublic interface ElasticRepository  extends CrudRepository&lt;MyPojo, String&gt;, MyInterface&lt;MyPojo&gt; {\n}\n</code></pre>\n<p>Create a configuration for your aliases in <code>application.yml</code></p>\n<pre class=\"lang-yaml prettyprint-override\"><code>configuration:\n  design:\n    pattern:\n      map:\n        redis: redis\n        saveToRedisPlease: redis\n        elastic: elastic\n</code></pre>\n<p>Create a custom properties to retrieve the map:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\n@ConfigurationProperties(prefix = &quot;configuration.design.pattern&quot;)\npublic class PatternProperties {\n    private Map&lt;String, String&gt;  map;\n\n    public String getRepoName(String alias) {\n        return map.get(alias);\n    }\n\n    public Map&lt;String, String&gt; getMap() {\n        return map;\n    }\n\n    public void setMap(Map&lt;String, String&gt; map) {\n        this.map = map;\n    }\n}\n</code></pre>\n<p>Now create the version three of your repository with the injection of <code>SpringContext</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RestController\npublic class ControllerVersionThree {\n\n    private final ApplicationContext context;\n\n    private PatternProperties designPatternMap;\n\n    public ControllerVersionThree(ApplicationContext context,\n                                  PatternProperties designPatternMap) {\n        this.context = context;\n        this.designPatternMap = designPatternMap;\n    }\n\n    @PostMapping(path = &quot;/save&quot;)\n    public String save(@RequestBody MyRequest myRequest) {\n        String whereToSave = myRequest.getWhereToSave();\n        MyPojo myPojo = new MyPojo(UUID.randomUUID().toString(), myRequest.getValue());\n        String repoName = designPatternMap.getRepoName(whereToSave);\n        MyInterface&lt;MyPojo&gt; repo = context.getBean(repoName, MyInterface.class);\n        return repo.save(myPojo).toString();\n    }\n\n}\n</code></pre>\n<p>You can check that this is working with a test:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.junit.jupiter.api.Test;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.context.SpringBootTest;\nimport org.springframework.boot.test.web.client.TestRestTemplate;\nimport org.springframework.boot.test.web.server.LocalServerPort;\nimport org.springframework.http.HttpEntity;\n\nimport static org.junit.jupiter.api.Assertions.assertEquals;\n\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\nclass ControllerVersionThreeTest {\n    @LocalServerPort\n    private int port;\n    @Autowired\n    private TestRestTemplate restTemplate;\n\n    @Test\n    void testSaveByRedis() {\n        // Given: here 'redis' is the name of the spring beans\n        HttpEntity&lt;MyRequest&gt; request = new HttpEntity&lt;&gt;(new MyRequest(&quot;redis&quot;, &quot;aValue&quot;));\n\n        // When\n        String response = restTemplate.postForObject(&quot;http://localhost:&quot; + port + &quot;/save&quot;, request, String.class);\n\n        // Then\n        assertEquals(&quot;MyPojo{value='aValue saved by redis'}&quot;, response);\n    }\n\n    @Test\n    void testSaveByRedisAlias() {\n        // Given: here 'saveToRedisPlease' is an alias name of the spring beans\n        HttpEntity&lt;MyRequest&gt; request = new HttpEntity&lt;&gt;(new MyRequest(&quot;saveToRedisPlease&quot;, &quot;aValue&quot;));\n\n        // When\n        String response = restTemplate.postForObject(&quot;http://localhost:&quot; + port + &quot;/save&quot;, request, String.class);\n\n        // Then\n        assertEquals(&quot;MyPojo{value='aValue saved by redis'}&quot;, response);\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":14482834,"reputation":3924,"user_id":10461625,"display_name":"PatPanda"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":788,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74887431,"answer_count":3,"score":0,"last_activity_date":1671722605,"creation_date":1670513162,"question_id":74732623,"body_markdown":"Small question on Spring Boot, and how to use a design pattern combined with Spring @Value configuration in order to select the appropriate @Repository please.\r\n\r\nSetup: A springboot project which does nothing but save a pojo. The &quot;difficulty&quot; is the need to choose where to save the pojo, based on some info from inside the payload request.\r\n\r\nI started with a first straightforward version, which looks like this:\r\n\r\n```\r\n   @RestController\r\npublic class ControllerVersionOne {\r\n\r\n    @Autowired private ElasticRepository elasticRepository;\r\n    @Autowired private MongoDbRepository mongoRepository;\r\n    @Autowired private RedisRepository redisRepository;\r\n\r\n    //imagine many more other repositories\r\n//imagine many more other repositories\r\n//imagine many more other repositories\r\n\r\n    @PostMapping(path = &quot;/save&quot;)\r\n    public String save(@RequestBody MyRequest myRequest) {\r\n        String whereToSave = myRequest.getWhereToSave();\r\n        MyPojo myPojo = new MyPojo(UUID.randomUUID().toString(), myRequest.getValue());\r\n        if (whereToSave.equals(&quot;elastic&quot;)) {\r\n            return elasticRepository.save(myPojo).toString();\r\n        } else if (whereToSave.equals(&quot;mongo&quot;)) {\r\n            return mongoRepository.save(myPojo).toString();\r\n        } else if (whereToSave.equals(&quot;redis&quot;)) {\r\n            return redisRepository.save(myPojo).toString();\r\n            // imagine many more if \r\n            // imagine many more if \r\n            // imagine many more if \r\n\r\n        } else {\r\n            return &quot;unknown destination&quot;;\r\n        }\r\n    }\r\n```\r\n\r\nWith the appropriate @Configuration and @Repository for each and every databases. I am showing 3 here, but imagine many. The project has a way to inject future @Configuration and @Repository as well (the question is not here actually)\r\n\r\n```\r\n@Configuration\r\npublic class ElasticConfiguration extends ElasticsearchConfiguration {\r\n\r\n@Repository\r\npublic interface ElasticRepository extends CrudRepository&lt;MyPojo, String&gt; {\r\n\r\n\r\n@Configuration\r\npublic class MongoConfiguration extends AbstractMongoClientConfiguration {\r\n\r\n@Repository\r\npublic interface MongoDbRepository extends MongoRepository&lt;MyPojo, String&gt; {\r\n\r\n\r\n@Configuration\r\npublic class RedisConfiguration {\r\n\r\n@Repository\r\npublic interface RedisRepository {\r\n```\r\nPlease note, some of the repositories are not children of CrudRepository. There is no direct ___Repository which can cover everything.\r\n \r\nAnd this first version is working fine. Very happy, meaning I am able to save the pojo to where it should be saved, as I am getting the correct repository bean, using this if else structure. \r\nIn my opinion, this structure is not very elegant (if it ok if we have different opinion here), especially, not flexible at all (need to hardcode each and every possible repository, again imagine many).\r\n\r\nThis is why I went to refactor and change to this second version:\r\n\r\n```\r\n@RestController\r\npublic class ControllerVersionTwo {\r\n\r\n    private ElasticRepository elasticRepository;\r\n    private MongoDbRepository mongoRepository;\r\n    private RedisRepository redisRepository;\r\n    private Map&lt;String, Function&lt;MyPojo, MyPojo&gt;&gt; designPattern;\r\n\r\n    @Autowired\r\n    public ControllerVersionTwo(ElasticRepository elasticRepository, MongoDbRepository mongoRepository, RedisRepository redisRepository) {\r\n        this.elasticRepository = elasticRepository;\r\n        this.mongoRepository = mongoRepository;\r\n        this.redisRepository = redisRepository;\r\n// many more repositories\r\n        designPattern = new HashMap&lt;&gt;();\r\n        designPattern.put(&quot;elastic&quot;, myPojo -&gt; elasticRepository.save(myPojo));\r\n        designPattern.put(&quot;mongo&quot;, myPojo -&gt; mongoRepository.save(myPojo));\r\n        designPattern.put(&quot;redis&quot;, myPojo -&gt; redisRepository.save(myPojo));\r\n//many more put\r\n    }\r\n\r\n    @PostMapping(path = &quot;/save&quot;)\r\n    public String save(@RequestBody MyRequest myRequest) {\r\n        String whereToSave = myRequest.getWhereToSave();\r\n        MyPojo myPojo = new MyPojo(UUID.randomUUID().toString(), myRequest.getValue());\r\n        return designPattern.get(whereToSave).apply(myPojo).toString();\r\n    }\r\n```\r\n\r\nAs you can see, I am leveraging a design pattern refactoring the if-else into a hashmap.\r\n\r\nThis post is not about if-else vs hashmap by the way.\r\n\r\nWorking fine, but please note, the map is a ```Map&lt;String, Function&lt;MyPojo, MyPojo&gt;&gt;```, as I cannot construct a map of ```Map&lt;String, @Repository&gt;```.\r\n\r\nWith this second version, the if-else is being refactored, but again, we need to hardcode the hashmap.\r\n\r\nThis is why I am having the idea to build a third version, where I can configure the map itself, via a spring boot property @Value for Map:\r\n\r\nHere is what I tried:\r\n\r\n```\r\n@RestController\r\npublic class ControllerVersionThree {\r\n\r\n    @Value(&quot;#{${configuration.design.pattern.map}}&quot;)\r\n    Map&lt;String, String&gt; configurationDesignPatternMap;\r\n\r\n    private Map&lt;String, Function&lt;MyPojo, MyPojo&gt;&gt; designPatternStrategy;\r\n\r\n    public ControllerVersionThree() {\r\n        convertConfigurationDesignPatternMapToDesignPatternStrategy(configurationDesignPatternMap, designPatternStrategy);\r\n    }\r\n\r\n    private void convertConfigurationDesignPatternMapToDesignPatternStrategy(Map&lt;String, String&gt; configurationDesignPatternMap, Map&lt;String, Function&lt;MyPojo, MyPojo&gt;&gt; designPatternStrategy) {\r\n        // convert configurationDesignPatternMap\r\n        // {elastic:ElasticRepository, mongo:MongoDbRepository , redis:RedisRepository , ...}\r\n        // to a map where I can directly get the appropriate repository based on the key\r\n    }\r\n\r\n    @PostMapping(path = &quot;/save&quot;)\r\n    public String save(@RequestBody MyRequest myRequest) {\r\n        String whereToSave = myRequest.getWhereToSave();\r\n        MyPojo myPojo = new MyPojo(UUID.randomUUID().toString(), myRequest.getValue());\r\n        return designPatternStrategy.get(whereToSave).apply(myPojo).toString();\r\n    } \r\n```\r\n\r\nAnd I would configure in the property file:\r\n\r\n```\r\nconfiguration.design.pattern.map={elastic:ElasticRepository, mongo:MongoDbRepository , saveToRedis:RedisRepositry, redis:RedisRepository , ...}\r\n```\r\nAnd tomorrow, I would be able to configure add or remove the future repository target.\r\n\r\n```\r\nconfiguration.design.pattern.map={elastic:ElasticRepository, anotherElasticKeyForSameElasticRepository, redis:RedisRepository , postgre:PostGreRepository}\r\n```\r\n\r\nUnfortunately, I am stuck.\r\n\r\nWhat is the correct code in order to leverage a configurable property for mapping a key with it&#39;s &quot;which @Repository to use&quot; please?\r\n\r\nThank you for your help.","title":"SpringBoot selecting the @Repository based on design pattern and configuration","body":"<p>Small question on Spring Boot, and how to use a design pattern combined with Spring @Value configuration in order to select the appropriate @Repository please.</p>\n<p>Setup: A springboot project which does nothing but save a pojo. The &quot;difficulty&quot; is the need to choose where to save the pojo, based on some info from inside the payload request.</p>\n<p>I started with a first straightforward version, which looks like this:</p>\n<pre><code>   @RestController\npublic class ControllerVersionOne {\n\n    @Autowired private ElasticRepository elasticRepository;\n    @Autowired private MongoDbRepository mongoRepository;\n    @Autowired private RedisRepository redisRepository;\n\n    //imagine many more other repositories\n//imagine many more other repositories\n//imagine many more other repositories\n\n    @PostMapping(path = &quot;/save&quot;)\n    public String save(@RequestBody MyRequest myRequest) {\n        String whereToSave = myRequest.getWhereToSave();\n        MyPojo myPojo = new MyPojo(UUID.randomUUID().toString(), myRequest.getValue());\n        if (whereToSave.equals(&quot;elastic&quot;)) {\n            return elasticRepository.save(myPojo).toString();\n        } else if (whereToSave.equals(&quot;mongo&quot;)) {\n            return mongoRepository.save(myPojo).toString();\n        } else if (whereToSave.equals(&quot;redis&quot;)) {\n            return redisRepository.save(myPojo).toString();\n            // imagine many more if \n            // imagine many more if \n            // imagine many more if \n\n        } else {\n            return &quot;unknown destination&quot;;\n        }\n    }\n</code></pre>\n<p>With the appropriate @Configuration and @Repository for each and every databases. I am showing 3 here, but imagine many. The project has a way to inject future @Configuration and @Repository as well (the question is not here actually)</p>\n<pre><code>@Configuration\npublic class ElasticConfiguration extends ElasticsearchConfiguration {\n\n@Repository\npublic interface ElasticRepository extends CrudRepository&lt;MyPojo, String&gt; {\n\n\n@Configuration\npublic class MongoConfiguration extends AbstractMongoClientConfiguration {\n\n@Repository\npublic interface MongoDbRepository extends MongoRepository&lt;MyPojo, String&gt; {\n\n\n@Configuration\npublic class RedisConfiguration {\n\n@Repository\npublic interface RedisRepository {\n</code></pre>\n<p>Please note, some of the repositories are not children of CrudRepository. There is no direct ___Repository which can cover everything.</p>\n<p>And this first version is working fine. Very happy, meaning I am able to save the pojo to where it should be saved, as I am getting the correct repository bean, using this if else structure.\nIn my opinion, this structure is not very elegant (if it ok if we have different opinion here), especially, not flexible at all (need to hardcode each and every possible repository, again imagine many).</p>\n<p>This is why I went to refactor and change to this second version:</p>\n<pre><code>@RestController\npublic class ControllerVersionTwo {\n\n    private ElasticRepository elasticRepository;\n    private MongoDbRepository mongoRepository;\n    private RedisRepository redisRepository;\n    private Map&lt;String, Function&lt;MyPojo, MyPojo&gt;&gt; designPattern;\n\n    @Autowired\n    public ControllerVersionTwo(ElasticRepository elasticRepository, MongoDbRepository mongoRepository, RedisRepository redisRepository) {\n        this.elasticRepository = elasticRepository;\n        this.mongoRepository = mongoRepository;\n        this.redisRepository = redisRepository;\n// many more repositories\n        designPattern = new HashMap&lt;&gt;();\n        designPattern.put(&quot;elastic&quot;, myPojo -&gt; elasticRepository.save(myPojo));\n        designPattern.put(&quot;mongo&quot;, myPojo -&gt; mongoRepository.save(myPojo));\n        designPattern.put(&quot;redis&quot;, myPojo -&gt; redisRepository.save(myPojo));\n//many more put\n    }\n\n    @PostMapping(path = &quot;/save&quot;)\n    public String save(@RequestBody MyRequest myRequest) {\n        String whereToSave = myRequest.getWhereToSave();\n        MyPojo myPojo = new MyPojo(UUID.randomUUID().toString(), myRequest.getValue());\n        return designPattern.get(whereToSave).apply(myPojo).toString();\n    }\n</code></pre>\n<p>As you can see, I am leveraging a design pattern refactoring the if-else into a hashmap.</p>\n<p>This post is not about if-else vs hashmap by the way.</p>\n<p>Working fine, but please note, the map is a <code>Map&lt;String, Function&lt;MyPojo, MyPojo&gt;&gt;</code>, as I cannot construct a map of <code>Map&lt;String, @Repository&gt;</code>.</p>\n<p>With this second version, the if-else is being refactored, but again, we need to hardcode the hashmap.</p>\n<p>This is why I am having the idea to build a third version, where I can configure the map itself, via a spring boot property @Value for Map:</p>\n<p>Here is what I tried:</p>\n<pre><code>@RestController\npublic class ControllerVersionThree {\n\n    @Value(&quot;#{${configuration.design.pattern.map}}&quot;)\n    Map&lt;String, String&gt; configurationDesignPatternMap;\n\n    private Map&lt;String, Function&lt;MyPojo, MyPojo&gt;&gt; designPatternStrategy;\n\n    public ControllerVersionThree() {\n        convertConfigurationDesignPatternMapToDesignPatternStrategy(configurationDesignPatternMap, designPatternStrategy);\n    }\n\n    private void convertConfigurationDesignPatternMapToDesignPatternStrategy(Map&lt;String, String&gt; configurationDesignPatternMap, Map&lt;String, Function&lt;MyPojo, MyPojo&gt;&gt; designPatternStrategy) {\n        // convert configurationDesignPatternMap\n        // {elastic:ElasticRepository, mongo:MongoDbRepository , redis:RedisRepository , ...}\n        // to a map where I can directly get the appropriate repository based on the key\n    }\n\n    @PostMapping(path = &quot;/save&quot;)\n    public String save(@RequestBody MyRequest myRequest) {\n        String whereToSave = myRequest.getWhereToSave();\n        MyPojo myPojo = new MyPojo(UUID.randomUUID().toString(), myRequest.getValue());\n        return designPatternStrategy.get(whereToSave).apply(myPojo).toString();\n    } \n</code></pre>\n<p>And I would configure in the property file:</p>\n<pre><code>configuration.design.pattern.map={elastic:ElasticRepository, mongo:MongoDbRepository , saveToRedis:RedisRepositry, redis:RedisRepository , ...}\n</code></pre>\n<p>And tomorrow, I would be able to configure add or remove the future repository target.</p>\n<pre><code>configuration.design.pattern.map={elastic:ElasticRepository, anotherElasticKeyForSameElasticRepository, redis:RedisRepository , postgre:PostGreRepository}\n</code></pre>\n<p>Unfortunately, I am stuck.</p>\n<p>What is the correct code in order to leverage a configurable property for mapping a key with it's &quot;which @Repository to use&quot; please?</p>\n<p>Thank you for your help.</p>\n"},{"tags":["java","nullpointerexception","rabbitmq","amqp"],"comments":[{"owner":{"account_id":17006998,"reputation":713,"user_id":12302982,"display_name":"Igor Flakiewicz"},"score":0,"creation_date":1671729839,"post_id":74890568,"comment_id":132165454,"body_markdown":"Each time you are opening a new channel and keeping it alive, that&#39;s why you run out of space in your connection pool. You should define your channel as a singleton or a spring bean or close it properly each time.","body":"Each time you are opening a new channel and keeping it alive, that&#39;s why you run out of space in your connection pool. You should define your channel as a singleton or a spring bean or close it properly each time."},{"owner":{"account_id":14801365,"reputation":376,"user_id":15322661,"display_name":"Rustam"},"score":0,"creation_date":1671729964,"post_id":74890568,"comment_id":132165487,"body_markdown":"do you use 1 connection for whole app?","body":"do you use 1 connection for whole app?"}],"owner":{"account_id":23303959,"reputation":1,"user_id":17384194,"display_name":"Georgii Smirnoff"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":241,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671722594,"creation_date":1671722594,"question_id":74890568,"body_markdown":"I have a java service that works with Rabbitmq server, it gets tasks and send answers to the queue. However, after 334 handling to the Rabbitmq queue connection looses and throw nullPointerException. I can not understand why after long time working service looses connection to Rabbitmq.\r\n\r\nHow error looks\r\n\r\n```\r\n [1;31mERROR[0;39m - Consumer com.rabbitmq.client.impl.ChannelN$4@59ef17e4 (amq.ctag-_itVmRHd4yWS6gG-Gh4XqQ) method handleDelivery for channel AMQChannel(amqp://guest@0.0.0.0:5672/,1) threw an exception for channel AMQChannel(amqp://guest@0.0.0.0:5672/,1)\r\njava.lang.NullPointerException: null\r\n\tat com.peterservice.artifactory.deployPlugins.RabbitWorker.getSenderChannel(RabbitWorker.java:1364)\r\n\tat com.peterservice.artifactory.deployPlugins.RabbitWorker.lambda$runWorker$0(RabbitWorker.java:269)\r\n\tat com.rabbitmq.client.impl.ChannelN$4.handleDelivery(ChannelN.java:1404)\r\n\tat com.rabbitmq.client.impl.ConsumerDispatcher$5.run(ConsumerDispatcher.java:149)\r\n\tat com.rabbitmq.client.impl.ConsumerWorkService$WorkPoolRunnable.run(ConsumerWorkService.java:104)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n\tat java.lang.Thread.run(Thread.java:750)\r\n```\r\n\r\nWhere error happens\r\n\r\n```\r\nprivate static Channel getSenderChannel(Connection connection) throws IOException {\r\n    Channel channel = connection.createChannel();\r\n    channel.queueDeclare(settings.deployDoneQueue(), durable, false, false, null);\r\n    return channel;\r\n}\r\n```\r\n\r\nI made a load testing and understood that this error happens every time after 334 counts that service connects to Rabbitmq.","title":"Java service looses a connection to Rabbitmq and throws a NullPointerException","body":"<p>I have a java service that works with Rabbitmq server, it gets tasks and send answers to the queue. However, after 334 handling to the Rabbitmq queue connection looses and throw nullPointerException. I can not understand why after long time working service looses connection to Rabbitmq.</p>\n<p>How error looks</p>\n<pre><code> [1;31mERROR[0;39m - Consumer com.rabbitmq.client.impl.ChannelN$4@59ef17e4 (amq.ctag-_itVmRHd4yWS6gG-Gh4XqQ) method handleDelivery for channel AMQChannel(amqp://guest@0.0.0.0:5672/,1) threw an exception for channel AMQChannel(amqp://guest@0.0.0.0:5672/,1)\njava.lang.NullPointerException: null\n    at com.peterservice.artifactory.deployPlugins.RabbitWorker.getSenderChannel(RabbitWorker.java:1364)\n    at com.peterservice.artifactory.deployPlugins.RabbitWorker.lambda$runWorker$0(RabbitWorker.java:269)\n    at com.rabbitmq.client.impl.ChannelN$4.handleDelivery(ChannelN.java:1404)\n    at com.rabbitmq.client.impl.ConsumerDispatcher$5.run(ConsumerDispatcher.java:149)\n    at com.rabbitmq.client.impl.ConsumerWorkService$WorkPoolRunnable.run(ConsumerWorkService.java:104)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n    at java.lang.Thread.run(Thread.java:750)\n</code></pre>\n<p>Where error happens</p>\n<pre><code>private static Channel getSenderChannel(Connection connection) throws IOException {\n    Channel channel = connection.createChannel();\n    channel.queueDeclare(settings.deployDoneQueue(), durable, false, false, null);\n    return channel;\n}\n</code></pre>\n<p>I made a load testing and understood that this error happens every time after 334 counts that service connects to Rabbitmq.</p>\n"},{"tags":["java","android","kotlin"],"answers":[{"tags":[],"owner":{"account_id":17324369,"reputation":36,"user_id":12548944,"display_name":"Juan Santos Poyato"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671722542,"creation_date":1671722542,"answer_id":74890559,"question_id":74885948,"body_markdown":"You can always use a relative path, if i&#39;m not wrong:\r\n\r\n&gt; &quot;../../../build/outputs/apk/debug/name-app-debug.apk&quot;\r\n\r\nI never used Kotlin so maybe you want to know a specific way of getting via absolute path, but normally relative pathing should work.\r\n\r\nThough it doesn&#39;t take much googling to discover how to do it, in the official documentation:\r\n\r\n[Absolute pathing Kotlin][1]\r\n\r\n\r\n  [1]: https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.io.path/java.nio.file.-path/absolute-path-string.html","title":"How to Read a File which is in another directory in Kotlin?","body":"<p>You can always use a relative path, if i'm not wrong:</p>\n<blockquote>\n<p>&quot;../../../build/outputs/apk/debug/name-app-debug.apk&quot;</p>\n</blockquote>\n<p>I never used Kotlin so maybe you want to know a specific way of getting via absolute path, but normally relative pathing should work.</p>\n<p>Though it doesn't take much googling to discover how to do it, in the official documentation:</p>\n<p><a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.io.path/java.nio.file.-path/absolute-path-string.html\" rel=\"nofollow noreferrer\">Absolute pathing Kotlin</a></p>\n"}],"owner":{"account_id":14190083,"reputation":186,"user_id":14311942,"display_name":"Krishna"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":304,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1671722542,"creation_date":1671697857,"question_id":74885948,"body_markdown":"I am a node.js developer first time learning and woking on an Android Project. I have requirement where i need to read .apk file from Build folder and push it to cloud api. \r\n\r\nMy `.apk` lives in `project-name/app/build/outputs/apk/debug/name-app-debug.apk`\r\n\r\nI need call it or use it from `project-name/app/androidTest/java/com.name.app.name/testUtils`\r\n\r\nIf it&#39;s node.js i would have done something like `const filePath = path.resolve(process.cwd() + &#39;/app/build/outputs/apk/debug/name-app-debug.apk&#39;);`\r\n\r\nBut it&#39;s so hard to do the same in the Kotlin or find a solution online. \r\n\r\n    testUtils.kt\r\n\r\n    class TestUtils { \r\n    val file = File(&quot;path/to/file&quot;)\r\n    }\r\nhow to get the `path/to/file` for apk file which lives in `app/build/outputs/apk/debug/name-app-debug.apk` ?","title":"How to Read a File which is in another directory in Kotlin?","body":"<p>I am a node.js developer first time learning and woking on an Android Project. I have requirement where i need to read .apk file from Build folder and push it to cloud api.</p>\n<p>My <code>.apk</code> lives in <code>project-name/app/build/outputs/apk/debug/name-app-debug.apk</code></p>\n<p>I need call it or use it from <code>project-name/app/androidTest/java/com.name.app.name/testUtils</code></p>\n<p>If it's node.js i would have done something like <code>const filePath = path.resolve(process.cwd() + '/app/build/outputs/apk/debug/name-app-debug.apk');</code></p>\n<p>But it's so hard to do the same in the Kotlin or find a solution online.</p>\n<pre><code>testUtils.kt\n\nclass TestUtils { \nval file = File(&quot;path/to/file&quot;)\n}\n</code></pre>\n<p>how to get the <code>path/to/file</code> for apk file which lives in <code>app/build/outputs/apk/debug/name-app-debug.apk</code> ?</p>\n"},{"tags":["java","multithreading"],"comments":[{"owner":{"account_id":80795,"reputation":8986,"user_id":228208,"accept_rate":88,"display_name":"Kylar"},"score":0,"creation_date":1267812504,"post_id":2388850,"comment_id":2367157,"body_markdown":"What do you mean by &#39;affected&#39;? Are you asking if it can cause them to not execute at the proper time? or not wake up? Or are you asking if they can wake up accidentally?","body":"What do you mean by &#39;affected&#39;? Are you asking if it can cause them to not execute at the proper time? or not wake up? Or are you asking if they can wake up accidentally?"},{"owner":{"account_id":1079,"reputation":27949,"user_id":1432,"accept_rate":66,"display_name":"jsight"},"score":0,"creation_date":1267812727,"post_id":2388850,"comment_id":2367194,"body_markdown":"I&#39;m asking if they can be woken up accidentally before they should be woken up (with &quot;should be&quot; being defined as a length of time greater than the natural inaccuracy of the underlying timer).","body":"I&#39;m asking if they can be woken up accidentally before they should be woken up (with &quot;should be&quot; being defined as a length of time greater than the natural inaccuracy of the underlying timer)."}],"answers":[{"comments":[{"owner":{"account_id":316665,"reputation":87011,"user_id":632951,"accept_rate":83,"display_name":"Pacerier"},"score":8,"creation_date":1323356324,"post_id":2389016,"comment_id":10420234,"body_markdown":"So do you mean the answer is &quot;No, we do not have to guard against spurious wakeup&quot; or &quot;Yes, we do have to guard against spurious wakeup&quot; ?","body":"So do you mean the answer is &quot;No, we do not have to guard against spurious wakeup&quot; or &quot;Yes, we do have to guard against spurious wakeup&quot; ?"},{"owner":{"account_id":94193,"reputation":20589,"user_id":257299,"accept_rate":64,"display_name":"kevinarpe"},"score":0,"creation_date":1609751480,"post_id":2389016,"comment_id":115910494,"body_markdown":"@Pacerier: I would summarise (or rephase) as: `Thread.sleep()` does not suffer from spurious wake-ups.  (The official JDK docs make no mention of spurious wake-ups for `Thread.sleep()`)  However, `Thread.sleep()` is not guaranteed to sleep `x` milliseconds, as another thread may call `Thread.interrupt()` to wake-up the sleeping thread.","body":"@Pacerier: I would summarise (or rephase) as: <code>Thread.sleep()</code> does not suffer from spurious wake-ups.  (The official JDK docs make no mention of spurious wake-ups for <code>Thread.sleep()</code>)  However, <code>Thread.sleep()</code> is not guaranteed to sleep <code>x</code> milliseconds, as another thread may call <code>Thread.interrupt()</code> to wake-up the sleeping thread."}],"tags":[],"owner":{"account_id":48447,"reputation":44848,"user_id":143938,"display_name":"Jonathan Feinberg"},"comment_count":2,"down_vote_count":2,"up_vote_count":12,"is_accepted":true,"score":10,"last_activity_date":1267813628,"creation_date":1267813628,"answer_id":2389016,"question_id":2388850,"body_markdown":"You&#39;re asking whether `Thread.sleep()` is affected by the same [spurious wakeup][1] issue that is documented to affect `Object.wait(long)`, right? The answer is that there is no documented spurious wakeup associated with `Thread.sleep()`. You&#39;re right that no hard guarantees are made about exactly how long you&#39;ll sleep when you request N milliseconds. Also, of course, `Thread.sleep()` terminates on thread interrupt.\r\n\r\n\r\n  [1]: http://java.sun.com/javase/6/docs/api/java/lang/Object.html#wait%28long%29","title":"Do spurious wakeups affect Thread.sleep?","body":"<p>You're asking whether <code>Thread.sleep()</code> is affected by the same <a href=\"http://java.sun.com/javase/6/docs/api/java/lang/Object.html#wait%28long%29\" rel=\"noreferrer\">spurious wakeup</a> issue that is documented to affect <code>Object.wait(long)</code>, right? The answer is that there is no documented spurious wakeup associated with <code>Thread.sleep()</code>. You're right that no hard guarantees are made about exactly how long you'll sleep when you request N milliseconds. Also, of course, <code>Thread.sleep()</code> terminates on thread interrupt.</p>\n"},{"tags":[],"owner":{"account_id":106491,"reputation":59253,"user_id":283676,"accept_rate":93,"display_name":"Andrey"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1267813763,"creation_date":1267813763,"answer_id":2389029,"question_id":2388850,"body_markdown":"real interval of sleep is always &gt;= required interval. it is especially sensitive on small intervals.\r\n\r\nnow about &quot;spurious wakeups&quot;. it was not mentioned about Thread.sleep","title":"Do spurious wakeups affect Thread.sleep?","body":"<p>real interval of sleep is always >= required interval. it is especially sensitive on small intervals.</p>\n\n<p>now about \"spurious wakeups\". it was not mentioned about Thread.sleep</p>\n"}],"owner":{"account_id":1079,"reputation":27949,"user_id":1432,"accept_rate":66,"display_name":"jsight"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2343,"favorite_count":0,"down_vote_count":0,"up_vote_count":18,"accepted_answer_id":2389016,"answer_count":2,"score":18,"last_activity_date":1671722163,"creation_date":1267811939,"question_id":2388850,"body_markdown":"Do spurious wakeups affect calls to `Thread.sleep(x)`?  \r\n\r\nObviously, the timer is not 100% precise (leading to minor inaccuracies in wakeup times), but is it affected by the spurious wakeup problem?","title":"Do spurious wakeups affect Thread.sleep?","body":"<p>Do spurious wakeups affect calls to <code>Thread.sleep(x)</code>?</p>\n<p>Obviously, the timer is not 100% precise (leading to minor inaccuracies in wakeup times), but is it affected by the spurious wakeup problem?</p>\n"},{"tags":["java","android","android-source","getaddrinfo","android-soong"],"owner":{"account_id":22215880,"reputation":41,"user_id":16454332,"display_name":"Markusbug"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":133,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671722145,"creation_date":1671722145,"question_id":74890481,"body_markdown":"I added an app to AOSP and it has the &quot;platform&quot; certificate. When I just install it on my device it resolves the domain just fine, but as a system app I get an GaiException: android_getaddrinfo failed: EAI_NODATA (No address associated with hostname).\r\n\r\nThis is the entire log of the crash:\r\n```\r\naused by: android.system.GaiException: android_getaddrinfo failed: EAI_NODATA (No address associated with hostname)\r\n12-22 10:00:32.792  5656  5681 W System.err:    at libcore.io.Linux.android_getaddrinfo(Native Method)\r\n12-22 10:00:32.792  5656  5681 W System.err:    at libcore.io.ForwardingOs.android_getaddrinfo(ForwardingOs.java:136)\r\n12-22 10:00:32.792  5656  5681 W System.err:    at libcore.io.BlockGuardOs.android_getaddrinfo(BlockGuardOs.java:221)\r\n12-22 10:00:32.792  5656  5681 W System.err:    at libcore.io.ForwardingOs.android_getaddrinfo(ForwardingOs.java:136)\r\n12-22 10:00:32.792  5656  5681 W System.err:    at java.net.Inet6AddressImpl.lookupHostByName(Inet6AddressImpl.java:135)\r\n```\r\n\r\nDo I need to add a permission or tell the build-system somewhere to get the permission to resolve domains?\r\n\r\nThank you!","title":"GaiException while resolving domain on AOSP platform app","body":"<p>I added an app to AOSP and it has the &quot;platform&quot; certificate. When I just install it on my device it resolves the domain just fine, but as a system app I get an GaiException: android_getaddrinfo failed: EAI_NODATA (No address associated with hostname).</p>\n<p>This is the entire log of the crash:</p>\n<pre><code>aused by: android.system.GaiException: android_getaddrinfo failed: EAI_NODATA (No address associated with hostname)\n12-22 10:00:32.792  5656  5681 W System.err:    at libcore.io.Linux.android_getaddrinfo(Native Method)\n12-22 10:00:32.792  5656  5681 W System.err:    at libcore.io.ForwardingOs.android_getaddrinfo(ForwardingOs.java:136)\n12-22 10:00:32.792  5656  5681 W System.err:    at libcore.io.BlockGuardOs.android_getaddrinfo(BlockGuardOs.java:221)\n12-22 10:00:32.792  5656  5681 W System.err:    at libcore.io.ForwardingOs.android_getaddrinfo(ForwardingOs.java:136)\n12-22 10:00:32.792  5656  5681 W System.err:    at java.net.Inet6AddressImpl.lookupHostByName(Inet6AddressImpl.java:135)\n</code></pre>\n<p>Do I need to add a permission or tell the build-system somewhere to get the permission to resolve domains?</p>\n<p>Thank you!</p>\n"},{"tags":["java","hibernate","jpa"],"comments":[{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1671736238,"post_id":74890474,"comment_id":132167299,"body_markdown":"JPA annotations have nothing to do with Jackson/JSON annotations; Stack overflow likely has to do with JSON serialization not JPA. You will want to look at and evaluate how your are going to send JSON data to/from the server so that these circular relationships can be built appropriately. There are many tutorials on dealing with JSON mappings.","body":"JPA annotations have nothing to do with Jackson/JSON annotations; Stack overflow likely has to do with JSON serialization not JPA. You will want to look at and evaluate how your are going to send JSON data to/from the server so that these circular relationships can be built appropriately. There are many tutorials on dealing with JSON mappings."}],"owner":{"account_id":16298176,"reputation":1,"user_id":20840557,"display_name":" "},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671722096,"creation_date":1671722096,"question_id":74890474,"body_markdown":"I have two entities, each one pointing to one single table in an postgres. The entities belong to an Spring/graddle/JPA/Hibernate web application.\r\n\r\n```\r\n@Entity\r\n@Table(name = &quot;STAFF&quot;)\r\n@AttributeOverride(name = &quot;id&quot;, column = @Column(name = &quot;ID&quot;))\r\npublic class StaffEntity extends AbstractEntity {\r\n\r\n    @Column(name = &quot;NAME&quot;)\r\n    private String name;\r\n\r\n    @Column(name = &quot;SHORT_NAME&quot;)\r\n    private String shortName;\r\n\t\r\n\t@ManyToOne(cascade = CascadeType.ALL, fetch = FetchType.LAZY)\r\n    @JoinColumn(name = &quot;STAFF_GROUP_ID&quot;, referencedColumnName = &quot;ID&quot;)\r\n    private StaffGroupEntity staffGroup;\r\n\t\r\n\t /* More attributes, getters and setters */\r\n\t \r\n\r\n@Entity\r\n@Table(name = &quot;STAFF_GROUP&quot;)\r\n@AttributeOverride(name = &quot;id&quot;, column = @Column(name = &quot;ID&quot;))\r\npublic class StaffGroupEntity extends AbstractEntity {\r\n\r\n    @Column(name = &quot;NAME&quot;)\r\n    private String name;\r\n\t\r\n    @ManyToOne(cascade = CascadeType.ALL, fetch = FetchType.LAZY)\r\n    @JoinColumn(name = &quot;LEAD_ID&quot;, referencedColumnName = &quot;ID&quot;)\r\n    private StaffEntity lead;\r\n\r\n/* More attributes, getters and setters */\r\n```\r\nWhen i update with swagger the group with a lead that is already in the group i get a stackOverFlowError\r\n&gt; java.lang.StackOverflowError: null\r\n\r\nmapping with  mapstruct\r\n","title":"Problem with inserting entity object with two unidirectional One to Many relationship","body":"<p>I have two entities, each one pointing to one single table in an postgres. The entities belong to an Spring/graddle/JPA/Hibernate web application.</p>\n<pre><code>@Entity\n@Table(name = &quot;STAFF&quot;)\n@AttributeOverride(name = &quot;id&quot;, column = @Column(name = &quot;ID&quot;))\npublic class StaffEntity extends AbstractEntity {\n\n    @Column(name = &quot;NAME&quot;)\n    private String name;\n\n    @Column(name = &quot;SHORT_NAME&quot;)\n    private String shortName;\n    \n    @ManyToOne(cascade = CascadeType.ALL, fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;STAFF_GROUP_ID&quot;, referencedColumnName = &quot;ID&quot;)\n    private StaffGroupEntity staffGroup;\n    \n     /* More attributes, getters and setters */\n     \n\n@Entity\n@Table(name = &quot;STAFF_GROUP&quot;)\n@AttributeOverride(name = &quot;id&quot;, column = @Column(name = &quot;ID&quot;))\npublic class StaffGroupEntity extends AbstractEntity {\n\n    @Column(name = &quot;NAME&quot;)\n    private String name;\n    \n    @ManyToOne(cascade = CascadeType.ALL, fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;LEAD_ID&quot;, referencedColumnName = &quot;ID&quot;)\n    private StaffEntity lead;\n\n/* More attributes, getters and setters */\n</code></pre>\n<p>When i update with swagger the group with a lead that is already in the group i get a stackOverFlowError</p>\n<blockquote>\n<p>java.lang.StackOverflowError: null</p>\n</blockquote>\n<p>mapping with  mapstruct</p>\n"},{"tags":["java","conditional-statements","executor","data-pipeline","azkaban"],"owner":{"account_id":8074741,"reputation":21,"user_id":6086190,"display_name":"Holsi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":100,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671721999,"creation_date":1671721999,"question_id":74890454,"body_markdown":"I&#39;m try to use conditional flows on Azkaban. When I submit/upload my project inside web node I receive this error. \r\n\r\n`Validator Directory Flow reports errors:\r\nError loading flow yaml file sample.flow:Cannot create property=nodes for JavaBean=NodeBean{name=&#39;null&#39;, config=null, dependsOn=null, type=&#39;null&#39;, nodes=null, trigger=null} in &#39;reader&#39;, line 1, column 1: nodes: ^ Cannot create property=condition for JavaBean=NodeBean{name=&#39;JobB&#39;, config=null, dependsOn=[JobA], type=&#39;command&#39;, nodes=null, trigger=null} in &#39;reader&#39;, line 7, column 4: - name: JobB ^ Unable to find property &#39;condition&#39; on class: azkaban.project.NodeBean in &#39;reader&#39;, line 11, column 15: condition: ${JobA:param1} == 1 ^ in &#39;reader&#39;, line 2, column 2: - name: JobA ^`\r\n\r\nI have tried several to create different flows but it seems like a problem relating to the Keyword condition present inside the yaml file.\r\n\r\nQuesto &#232; il flow di esempio presente anche sulla documentazione\r\n\r\n`\r\n```\r\nnodes:\r\n - name: JobA\r\n   type: command\r\n   config:\r\n     command: bash ./write_to_props.sh\r\n\r\n - name: JobB\r\n   type: command\r\n   dependsOn:\r\n     - JobA\r\n   config:\r\n     command: echo This is JobB.\r\n   condition: ${JobA:param1} == 1\r\n\r\n - name: JobC\r\n   type: command\r\n   dependsOn:\r\n     - JobA\r\n   config:\r\n     command: echo This is JobC.\r\n   condition: ${JobA:param1} == 2\r\n\r\n - name: JobD\r\n   type: command\r\n   dependsOn:\r\n     - JobB\r\n     - JobC\r\n   config:\r\n     command: pwd\r\n   condition: one_success\r\n\r\n```\r\n`\r\n\r\nWhile this is the content of write_to_props.sh\r\n\r\n`\r\n```\r\necho &#39;{&quot;param1&quot;: &quot;100&quot;}&#39; &gt; $JOB_OUTPUT_PROP_FILE\r\n\r\n```\r\n`\r\n\r\n\r\n\r\nI expect that there are no syntactic errors as submissive to the Azkaban Web node and that the DAG is performed depending on the condition inserted.","title":"Azkaban 3.44 conditional flow not working (including example on official documentation)","body":"<p>I'm try to use conditional flows on Azkaban. When I submit/upload my project inside web node I receive this error.</p>\n<p><code>Validator Directory Flow reports errors: Error loading flow yaml file sample.flow:Cannot create property=nodes for JavaBean=NodeBean{name='null', config=null, dependsOn=null, type='null', nodes=null, trigger=null} in 'reader', line 1, column 1: nodes: ^ Cannot create property=condition for JavaBean=NodeBean{name='JobB', config=null, dependsOn=[JobA], type='command', nodes=null, trigger=null} in 'reader', line 7, column 4: - name: JobB ^ Unable to find property 'condition' on class: azkaban.project.NodeBean in 'reader', line 11, column 15: condition: ${JobA:param1} == 1 ^ in 'reader', line 2, column 2: - name: JobA ^</code></p>\n<p>I have tried several to create different flows but it seems like a problem relating to the Keyword condition present inside the yaml file.</p>\n<p>Questo  il flow di esempio presente anche sulla documentazione</p>\n<p>`</p>\n<pre><code>nodes:\n - name: JobA\n   type: command\n   config:\n     command: bash ./write_to_props.sh\n\n - name: JobB\n   type: command\n   dependsOn:\n     - JobA\n   config:\n     command: echo This is JobB.\n   condition: ${JobA:param1} == 1\n\n - name: JobC\n   type: command\n   dependsOn:\n     - JobA\n   config:\n     command: echo This is JobC.\n   condition: ${JobA:param1} == 2\n\n - name: JobD\n   type: command\n   dependsOn:\n     - JobB\n     - JobC\n   config:\n     command: pwd\n   condition: one_success\n\n</code></pre>\n<p>`</p>\n<p>While this is the content of write_to_props.sh</p>\n<p>`</p>\n<pre><code>echo '{&quot;param1&quot;: &quot;100&quot;}' &gt; $JOB_OUTPUT_PROP_FILE\n\n</code></pre>\n<p>`</p>\n<p>I expect that there are no syntactic errors as submissive to the Azkaban Web node and that the DAG is performed depending on the condition inserted.</p>\n"},{"tags":["java","hibernate","jpa","orm","lazy-loading"],"answers":[{"comments":[{"owner":{"account_id":6591916,"reputation":191,"user_id":5092813,"display_name":"James Martinez"},"score":0,"creation_date":1681019657,"post_id":4929311,"comment_id":133990183,"body_markdown":"That link no longer works.","body":"That link no longer works."}],"tags":[],"owner":{"account_id":43539,"reputation":79200,"user_id":127320,"accept_rate":87,"display_name":"Aravind Yarram"},"comment_count":1,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1671721939,"creation_date":1297136240,"answer_id":4929311,"question_id":4929243,"body_markdown":"&quot;Hydration&quot; is a loose term. In our company we use &quot;rehydration&quot; as the term to load all the object properties of an entire object graph. [Here is a post][1] that talks about various levels of hydration (again this is a general usage though they are using in the context of Hibernate).\r\n\r\n\r\n  [1]: http://forum.springsource.org/archive/index.php/t-23439.html","title":"Clarifying terminology - What does &quot;hydrating&quot; a JPA or Hibernate entity mean when fetching the entity from the DB","body":"<p>&quot;Hydration&quot; is a loose term. In our company we use &quot;rehydration&quot; as the term to load all the object properties of an entire object graph. <a href=\"http://forum.springsource.org/archive/index.php/t-23439.html\" rel=\"nofollow noreferrer\">Here is a post</a> that talks about various levels of hydration (again this is a general usage though they are using in the context of Hibernate).</p>\n"},{"tags":[],"owner":{"account_id":116580,"reputation":118713,"user_id":305644,"accept_rate":75,"display_name":"hvgotcodes"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1297137098,"creation_date":1297137098,"answer_id":4929365,"question_id":4929243,"body_markdown":"I think the term &#39;hydrate(s)&#39; in the context of ORM simply means the framework gives you objects.  So the objects are &#39;hydrated&#39; by the ORM after the data is pulled from the store.  The term can be applied anytime an ORM framework gives you an object/graph that is represented in the store.","title":"Clarifying terminology - What does &quot;hydrating&quot; a JPA or Hibernate entity mean when fetching the entity from the DB","body":"<p>I think the term 'hydrate(s)' in the context of ORM simply means the framework gives you objects.  So the objects are 'hydrated' by the ORM after the data is pulled from the store.  The term can be applied anytime an ORM framework gives you an object/graph that is represented in the store.</p>\n"},{"comments":[{"owner":{"account_id":119737,"reputation":29617,"user_id":311660,"accept_rate":92,"display_name":"ocodo"},"score":20,"creation_date":1301949997,"post_id":4929478,"comment_id":6302217,"body_markdown":"Of course it is, however, it was first, it&#39;s simple and as such it&#39;s far less convoluted. You may have also realised at this point that pretty much everything on the software layer, even a bit value being &quot;true/false&quot; or &quot;1/0&quot; is metaphorical... Should we start calling &#39;true&#39; something else now? How about &#39;almost certainly&#39; in respect to Heisenberg?","body":"Of course it is, however, it was first, it&#39;s simple and as such it&#39;s far less convoluted. You may have also realised at this point that pretty much everything on the software layer, even a bit value being &quot;true/false&quot; or &quot;1/0&quot; is metaphorical... Should we start calling &#39;true&#39; something else now? How about &#39;almost certainly&#39; in respect to Heisenberg?"},{"owner":{"account_id":61273,"reputation":3270,"user_id":182702,"accept_rate":33,"display_name":"Kyle Mathews"},"score":20,"creation_date":1389136571,"post_id":4929478,"comment_id":31529856,"body_markdown":"I think &quot;hydrate&quot; is a far better metaphor than &quot;populate&quot;. Populate brings to mind a group of colonizers moving to a foreign or virgin territory and &quot;populating&quot; it. There is an empty space and you fill it with something unrelated (but presumably belongs there). Where when hydrating something, say a dried fig, the essence of the substance is there but it lacks fullness. That&#39;s exactly what happens when you &quot;hydrate&quot; an object. Far from being &quot;marketing fluff&quot;, hydrate is an excellent metaphor.","body":"I think &quot;hydrate&quot; is a far better metaphor than &quot;populate&quot;. Populate brings to mind a group of colonizers moving to a foreign or virgin territory and &quot;populating&quot; it. There is an empty space and you fill it with something unrelated (but presumably belongs there). Where when hydrating something, say a dried fig, the essence of the substance is there but it lacks fullness. That&#39;s exactly what happens when you &quot;hydrate&quot; an object. Far from being &quot;marketing fluff&quot;, hydrate is an excellent metaphor."},{"owner":{"account_id":119737,"reputation":29617,"user_id":311660,"accept_rate":92,"display_name":"ocodo"},"score":8,"creation_date":1389192686,"post_id":4929478,"comment_id":31556070,"body_markdown":"@KyleMathews Well, it&#39;s three years on since I posted my answer, I didn&#39;t make explicitly clear that &quot;Populated&quot; was the pre-existing term for the same activity, at this point &quot;Hydrated&quot; is still a marginal term, and is only used in certain language/product cultures, while &quot;Populated&quot; remains as the generic and more broadly used term.  By all means go ahead and use &quot;Hydrate&quot; if it pleases you, personally I find it pretentious and affected.","body":"@KyleMathews Well, it&#39;s three years on since I posted my answer, I didn&#39;t make explicitly clear that &quot;Populated&quot; was the pre-existing term for the same activity, at this point &quot;Hydrated&quot; is still a marginal term, and is only used in certain language/product cultures, while &quot;Populated&quot; remains as the generic and more broadly used term.  By all means go ahead and use &quot;Hydrate&quot; if it pleases you, personally I find it pretentious and affected."},{"owner":{"account_id":24566,"reputation":7371,"user_id":62590,"accept_rate":86,"display_name":"Samantha Branham"},"score":27,"creation_date":1392838845,"post_id":4929478,"comment_id":33148672,"body_markdown":"If you use &quot;hydrate&quot; around people who don&#39;t understand that word, you&#39;re going to have to explain it. Why not just use a word that&#39;s already going to be understandable by your audience, even if it&#39;s not the most precise word possible?","body":"If you use &quot;hydrate&quot; around people who don&#39;t understand that word, you&#39;re going to have to explain it. Why not just use a word that&#39;s already going to be understandable by your audience, even if it&#39;s not the most precise word possible?"},{"owner":{"account_id":136531,"reputation":21531,"user_id":340088,"accept_rate":68,"display_name":"jbx"},"score":3,"creation_date":1410263477,"post_id":4929478,"comment_id":40252354,"body_markdown":"While I agree that the choice of the term &#39;hydration&#39; might be disputable (it does sound a bit too obscure), especially since it doesn&#39;t immediately imply loading of the data from a data store into memory, I think it is a distinct process from &#39;population&#39;, which normally refers to filling abstract data types such as arrays, lists, trees and tables with elements, irrespective of whether it is in memory or in a persistent storage. We populate an array with all the users, we populate a table with all the transaction records. We hydrate a new product instance with its data.","body":"While I agree that the choice of the term &#39;hydration&#39; might be disputable (it does sound a bit too obscure), especially since it doesn&#39;t immediately imply loading of the data from a data store into memory, I think it is a distinct process from &#39;population&#39;, which normally refers to filling abstract data types such as arrays, lists, trees and tables with elements, irrespective of whether it is in memory or in a persistent storage. We populate an array with all the users, we populate a table with all the transaction records. We hydrate a new product instance with its data."},{"owner":{"account_id":485433,"reputation":12443,"user_id":901749,"accept_rate":50,"display_name":"ZenMaster"},"score":0,"creation_date":1447090617,"post_id":4929478,"comment_id":55003957,"body_markdown":"How about _inflate_ and _deflate_ in that context? _[yes, I am aware it&#39;s an old question and an old discussion]_","body":"How about <i>inflate</i> and <i>deflate</i> in that context? <i>[yes, I am aware it&#39;s an old question and an old discussion]</i>"},{"owner":{"account_id":119737,"reputation":29617,"user_id":311660,"accept_rate":92,"display_name":"ocodo"},"score":1,"creation_date":1447155842,"post_id":4929478,"comment_id":55031822,"body_markdown":"As it happens deflate / inflate is old compression terminology used by [lha/lzh](https://en.wikipedia.org/wiki/LHA_(file_format))","body":"As it happens deflate / inflate is old compression terminology used by <a href=\"https://en.wikipedia.org/wiki/LHA_(file_format)\" rel=\"nofollow noreferrer\">lha/lzh</a>"},{"owner":{"account_id":454356,"reputation":14197,"user_id":851885,"accept_rate":98,"display_name":"BadHorsie"},"score":14,"creation_date":1473892235,"post_id":4929478,"comment_id":66318609,"body_markdown":"The fact that nobody knows what hydrate is supposed to mean without looking it up shows that it is a stupid buzz word that is unfortunately now entrenched in many ORM frameworks.","body":"The fact that nobody knows what hydrate is supposed to mean without looking it up shows that it is a stupid buzz word that is unfortunately now entrenched in many ORM frameworks."},{"owner":{"account_id":119737,"reputation":29617,"user_id":311660,"accept_rate":92,"display_name":"ocodo"},"score":0,"creation_date":1473901092,"post_id":4929478,"comment_id":66320826,"body_markdown":"I could&#39;ve said that as my answer, but it&#39;s a little blunt.  Can&#39;t say I disagree though.","body":"I could&#39;ve said that as my answer, but it&#39;s a little blunt.  Can&#39;t say I disagree though."},{"owner":{"account_id":296842,"reputation":531,"user_id":602037,"accept_rate":100,"display_name":"Pedro Lamar&#227;o"},"score":0,"creation_date":1653316280,"post_id":4929478,"comment_id":127815830,"body_markdown":"I don&#39;t remember ever encountering this term &quot;hydrate&quot; before today. For ever me and my colleagues have been using other more common terms to mean we are filling an object with stuff -- like &quot;fill&quot;.","body":"I don&#39;t remember ever encountering this term &quot;hydrate&quot; before today. For ever me and my colleagues have been using other more common terms to mean we are filling an object with stuff -- like &quot;fill&quot;."},{"owner":{"account_id":119737,"reputation":29617,"user_id":311660,"accept_rate":92,"display_name":"ocodo"},"score":1,"creation_date":1660117525,"post_id":4929478,"comment_id":129454180,"body_markdown":"@PedroLamar&#227;o - I was talking about this with my wife today, and she said &quot;fill(ing) up&quot; or &quot;fill(ing) out&quot; is the way people talked about this activity before the daft _attempted-verb-creation_.  It&#39;s fun to think of filling out a form as &quot;hydrating a form&quot;, insisting it&#39;s the &quot;new&quot; way we say that...  and then trying really hard not to cringe.","body":"@PedroLamar&#227;o - I was talking about this with my wife today, and she said &quot;fill(ing) up&quot; or &quot;fill(ing) out&quot; is the way people talked about this activity before the daft <i>attempted-verb-creation</i>.  It&#39;s fun to think of filling out a form as &quot;hydrating a form&quot;, insisting it&#39;s the &quot;new&quot; way we say that...  and then trying really hard not to cringe."}],"tags":[],"owner":{"account_id":119737,"reputation":29617,"user_id":311660,"accept_rate":92,"display_name":"ocodo"},"comment_count":11,"down_vote_count":2,"up_vote_count":159,"is_accepted":true,"score":157,"last_activity_date":1521945918,"creation_date":1297138251,"answer_id":4929478,"question_id":4929243,"body_markdown":"Hydrate began as a term for populating an instantiated (but empty) value-object/model from a db, (specifically in Hibernate.)\r\n\r\nVarious other ORMs and tools like BizTalk use Hydrate and other related terminology, (e.g. BizTalk uses the term Dehydrated to mean an instance is available but not yet populated.)\r\n\r\nPersonally I&#39;m averse to redundant terminology overhauls, **populated** means the same thing, without re-inventing language. It adds nothing and leads to confusion (common first thought on encountering re-invented terms: *is this somehow different and magical?*).\r\n\r\nThe BizTalk extension of this style of language, specifically **Dehydrated** is redundant.  I expect people haven&#39;t forgotten how to say, ***empty***, or ***clear***?\r\n\r\n*Hydrated* and its related metaphors are essentially marketing tools, invented to differentiate Hibernate from competing products.\r\n\r\nAt this point Hibernate and other ORM products have used these terms for many years, so Hydrate (and Dehydrate) are here to stay.\r\n\r\n","title":"Clarifying terminology - What does &quot;hydrating&quot; a JPA or Hibernate entity mean when fetching the entity from the DB","body":"<p>Hydrate began as a term for populating an instantiated (but empty) value-object/model from a db, (specifically in Hibernate.)</p>\n\n<p>Various other ORMs and tools like BizTalk use Hydrate and other related terminology, (e.g. BizTalk uses the term Dehydrated to mean an instance is available but not yet populated.)</p>\n\n<p>Personally I'm averse to redundant terminology overhauls, <strong>populated</strong> means the same thing, without re-inventing language. It adds nothing and leads to confusion (common first thought on encountering re-invented terms: <em>is this somehow different and magical?</em>).</p>\n\n<p>The BizTalk extension of this style of language, specifically <strong>Dehydrated</strong> is redundant.  I expect people haven't forgotten how to say, <strong><em>empty</em></strong>, or <strong><em>clear</em></strong>?</p>\n\n<p><em>Hydrated</em> and its related metaphors are essentially marketing tools, invented to differentiate Hibernate from competing products.</p>\n\n<p>At this point Hibernate and other ORM products have used these terms for many years, so Hydrate (and Dehydrate) are here to stay.</p>\n"},{"tags":[],"owner":{"account_id":298429,"reputation":2189,"user_id":604450,"display_name":"jpertino"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1297144995,"creation_date":1297144995,"answer_id":4930089,"question_id":4929243,"body_markdown":"the term hydration is extensively used in the guts of the hibernate library to refer to the process of setting the fields of a recently loaded object, and is indeed related to the object graph populaton.  \r\nbut it&#39;s different than the concept of lazy loading, that is, giving the user a half-filled object and letting the rest be loaded on demand.  \r\nthe hydration is always performed, lazily or eagerly and it&#39;s hibernate stuff.  \r\nlazy loading is just for convenience\r\n\r\nreplace hibernate with the name of your orm of choice","title":"Clarifying terminology - What does &quot;hydrating&quot; a JPA or Hibernate entity mean when fetching the entity from the DB","body":"<p>the term hydration is extensively used in the guts of the hibernate library to refer to the process of setting the fields of a recently loaded object, and is indeed related to the object graph populaton.<br>\nbut it's different than the concept of lazy loading, that is, giving the user a half-filled object and letting the rest be loaded on demand.<br>\nthe hydration is always performed, lazily or eagerly and it's hibernate stuff.<br>\nlazy loading is just for convenience</p>\n\n<p>replace hibernate with the name of your orm of choice</p>\n"},{"tags":[],"owner":{"account_id":1012936,"reputation":145178,"user_id":1025118,"accept_rate":100,"display_name":"Vlad Mihalcea"},"comment_count":0,"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1610205714,"creation_date":1428583289,"answer_id":29538797,"question_id":4929243,"body_markdown":"Entity loaded state\r\n-------------------\r\n\r\nWhen you are fetching an entity, Hibernate will try to load it either from the second-level cache or the database.\r\n\r\n[![Entity loaded state][1]](http://vladmihalcea.com/how-does-hibernate-store-second-level-cache-entries/)\r\n\r\nIf the entity is not stored in the second-level cache, then a query is executed and the JDBC `ResultSet` is transformed into an `Object[]` that contains the loading-time entity property values.\r\n\r\nThe second-level cache stores this `Object[]` when caching an entity. So, when loading an entity either from the DB or the second-level cache, you will get the `Object[]` entity property value array.\r\n\r\nThe process of transforming the `Object[]` loaded state into a Java entity object is called *hydration*, and it looks as follows:\r\n\t\r\n    final Object[] values = persister.hydrate(\r\n        rs, id, object,\r\n        rootPersister, cols, eagerPropertyFetch, session\r\n    );\r\n\r\nThe loaded state is saved in the currently running Persistence Context as an [EntityEntry](https://docs.jboss.org/hibernate/orm/5.3/javadocs/org/hibernate/engine/spi/EntityEntry.html) object, and it will be used later for the default dirty checking mechanism, which compares the current entity data against the loading-time snapshot.\r\n\r\nThe loaded state is also used as the cache entry value for the second-level entity cache.\r\n\r\nThe inverse operation of transforming the entity to an `Object[]` that&#39;s used when binding SQL parameter values for `INSERT`, `UPDATE` or `DELETE` statements is called [*dehydration*][2].\r\n\r\n  [1]: https://i.stack.imgur.com/KhalZ.png \r\n  [2]: https://docs.jboss.org/hibernate/orm/5.3/javadocs/org/hibernate/persister/entity/AbstractEntityPersister.html#dehydrate-java.io.Serializable-java.lang.Object:A-boolean:A-boolean:A:A-int-java.sql.PreparedStatement-org.hibernate.engine.spi.SharedSessionContractImplementor-boolean-","title":"Clarifying terminology - What does &quot;hydrating&quot; a JPA or Hibernate entity mean when fetching the entity from the DB","body":"<h2>Entity loaded state</h2>\n<p>When you are fetching an entity, Hibernate will try to load it either from the second-level cache or the database.</p>\n<p><a href=\"http://vladmihalcea.com/how-does-hibernate-store-second-level-cache-entries/\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/KhalZ.png\" alt=\"Entity loaded state\" /></a></p>\n<p>If the entity is not stored in the second-level cache, then a query is executed and the JDBC <code>ResultSet</code> is transformed into an <code>Object[]</code> that contains the loading-time entity property values.</p>\n<p>The second-level cache stores this <code>Object[]</code> when caching an entity. So, when loading an entity either from the DB or the second-level cache, you will get the <code>Object[]</code> entity property value array.</p>\n<p>The process of transforming the <code>Object[]</code> loaded state into a Java entity object is called <em>hydration</em>, and it looks as follows:</p>\n<pre><code>final Object[] values = persister.hydrate(\n    rs, id, object,\n    rootPersister, cols, eagerPropertyFetch, session\n);\n</code></pre>\n<p>The loaded state is saved in the currently running Persistence Context as an <a href=\"https://docs.jboss.org/hibernate/orm/5.3/javadocs/org/hibernate/engine/spi/EntityEntry.html\" rel=\"noreferrer\">EntityEntry</a> object, and it will be used later for the default dirty checking mechanism, which compares the current entity data against the loading-time snapshot.</p>\n<p>The loaded state is also used as the cache entry value for the second-level entity cache.</p>\n<p>The inverse operation of transforming the entity to an <code>Object[]</code> that's used when binding SQL parameter values for <code>INSERT</code>, <code>UPDATE</code> or <code>DELETE</code> statements is called <a href=\"https://docs.jboss.org/hibernate/orm/5.3/javadocs/org/hibernate/persister/entity/AbstractEntityPersister.html#dehydrate-java.io.Serializable-java.lang.Object:A-boolean:A-boolean:A:A-int-java.sql.PreparedStatement-org.hibernate.engine.spi.SharedSessionContractImplementor-boolean-\" rel=\"noreferrer\"><em>dehydration</em></a>.</p>\n"},{"tags":[],"owner":{"account_id":1423626,"reputation":1591,"user_id":1347707,"accept_rate":100,"display_name":"cprn"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1661967894,"creation_date":1549562379,"answer_id":54579504,"question_id":4929243,"body_markdown":"*Hydration* is a general ORM domain term meaning a **method** by which the query result is returned. It&#39;s not a process, not a verb, not an action or event that occurs but a noun. Therefore *to hydrate* simply means *to use a hydration method*. Hydration method creates a structure that represents data. There&#39;s a popular misconception, though, that every hydration not only instantiates an object but also populates it before returning its reference. That&#39;s not a rule. While a specific hydration can also populate an object, not all hydrations do that. Different hydrations return different structures:\r\n\r\n - singular scalar\r\n - array of scalars\r\n - array of arrays\r\n - array of objects\r\n - object collecting scalars\r\n - object collecting arrays\r\n - object collecting other objects\r\n - ...more\r\n\r\nIt&#39;s an ORM implementation detail. Some ORMs provide multiple hydrations and you can choose one by passing an argument to query builder, some don&#39;t give you that control and replace it by convention trying to be smart about it (which is the source of the hydration/population misconception mentioned above). More advanced ones allow you to write your own hydrators for custom objects that can map field types. The term itself is closely related to deserialization (which is more general and doesn&#39;t necessarily involve a database or an ORM).","title":"Clarifying terminology - What does &quot;hydrating&quot; a JPA or Hibernate entity mean when fetching the entity from the DB","body":"<p><em>Hydration</em> is a general ORM domain term meaning a <strong>method</strong> by which the query result is returned. It's not a process, not a verb, not an action or event that occurs but a noun. Therefore <em>to hydrate</em> simply means <em>to use a hydration method</em>. Hydration method creates a structure that represents data. There's a popular misconception, though, that every hydration not only instantiates an object but also populates it before returning its reference. That's not a rule. While a specific hydration can also populate an object, not all hydrations do that. Different hydrations return different structures:</p>\n<ul>\n<li>singular scalar</li>\n<li>array of scalars</li>\n<li>array of arrays</li>\n<li>array of objects</li>\n<li>object collecting scalars</li>\n<li>object collecting arrays</li>\n<li>object collecting other objects</li>\n<li>...more</li>\n</ul>\n<p>It's an ORM implementation detail. Some ORMs provide multiple hydrations and you can choose one by passing an argument to query builder, some don't give you that control and replace it by convention trying to be smart about it (which is the source of the hydration/population misconception mentioned above). More advanced ones allow you to write your own hydrators for custom objects that can map field types. The term itself is closely related to deserialization (which is more general and doesn't necessarily involve a database or an ORM).</p>\n"}],"owner":{"account_id":23524,"reputation":28912,"user_id":59015,"accept_rate":69,"display_name":"Marty Pitt"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":39405,"favorite_count":0,"down_vote_count":0,"up_vote_count":94,"accepted_answer_id":4929478,"answer_count":6,"score":94,"last_activity_date":1671721939,"creation_date":1297135149,"question_id":4929243,"body_markdown":"In the context of ORM / Lazy loading of entities, my understanding of the term &quot;Hydration&quot; is as follows:\r\n\r\n&quot;Hydrating&quot; describes the process of populating some or all of the previously unpopulated attributes of an entity fetched using lazy loading.\r\n\r\nEg:  class `Author` is loaded from the database:\r\n\r\n    @Entity\r\n    class Author\r\n    {\r\n         @Id\r\n         long id;\r\n         List&lt;Book&gt; books;\r\n    }\r\n\r\nInitially, the `books` collection is not populated.\r\n\r\nIt is my understanding that the process of loading the `books` collection from the database is referred to as &quot;Hydrating&quot; the collection.\r\n\r\n\r\n\r\nIs this definition correct, and is the term common place?  Is there another more common term I should be using for this process?\r\n\r\n\r\n\r\n","title":"Clarifying terminology - What does &quot;hydrating&quot; a JPA or Hibernate entity mean when fetching the entity from the DB","body":"<p>In the context of ORM / Lazy loading of entities, my understanding of the term \"Hydration\" is as follows:</p>\n\n<p>\"Hydrating\" describes the process of populating some or all of the previously unpopulated attributes of an entity fetched using lazy loading.</p>\n\n<p>Eg:  class <code>Author</code> is loaded from the database:</p>\n\n<pre><code>@Entity\nclass Author\n{\n     @Id\n     long id;\n     List&lt;Book&gt; books;\n}\n</code></pre>\n\n<p>Initially, the <code>books</code> collection is not populated.</p>\n\n<p>It is my understanding that the process of loading the <code>books</code> collection from the database is referred to as \"Hydrating\" the collection.</p>\n\n<p>Is this definition correct, and is the term common place?  Is there another more common term I should be using for this process?</p>\n"},{"tags":["java","dependencies","version","okhttp","nosuchmethoderror"],"answers":[{"comments":[{"owner":{"account_id":25398964,"reputation":95,"user_id":19208792,"display_name":"Gourav Kumar"},"score":0,"creation_date":1671906221,"post_id":74889992,"comment_id":132195903,"body_markdown":"Can you share some resources or any open source project which uses this approach?","body":"Can you share some resources or any open source project which uses this approach?"}],"tags":[],"owner":{"account_id":4497436,"reputation":18081,"user_id":3656904,"accept_rate":67,"display_name":"talex"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671719777,"creation_date":1671719777,"answer_id":74889992,"question_id":74889939,"body_markdown":"There is no proper solution for this problem. You can choose only one version.\r\n\r\nWay around this is to use OSGi, but it will require major redesign of your application.","title":"How to use two different version of same package of a dependency?","body":"<p>There is no proper solution for this problem. You can choose only one version.</p>\n<p>Way around this is to use OSGi, but it will require major redesign of your application.</p>\n"},{"comments":[{"owner":{"account_id":13203350,"reputation":868,"user_id":9535950,"display_name":"Thomas Behr"},"score":1,"creation_date":1671720893,"post_id":74890153,"comment_id":132162460,"body_markdown":"The second suggestion does not necessarily work if the application uses methods from v3.14.9 that have been removed for v4.10.0.","body":"The second suggestion does not necessarily work if the application uses methods from v3.14.9 that have been removed for v4.10.0."}],"tags":[],"owner":{"account_id":5156692,"reputation":339,"user_id":4129751,"accept_rate":42,"display_name":"Dravidian"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671720565,"creation_date":1671720565,"answer_id":74890153,"question_id":74889939,"body_markdown":"This is a classic problem where you have more than 1 version of the dependency available during the runtime. I would suggest you uplift the version of okHttp in your application to match that of the external dependency. This would remove many headaches like &quot;class path resolution&quot; issues. \r\n\r\nIf you&#39;re using a build tool like Maven, there may be another solution where you use define 3.14.9v as the compile time dependency and include 4.10.0v as the runtime dependency so only 4.10.0v is packaged-in and available during the runtime.","title":"How to use two different version of same package of a dependency?","body":"<p>This is a classic problem where you have more than 1 version of the dependency available during the runtime. I would suggest you uplift the version of okHttp in your application to match that of the external dependency. This would remove many headaches like &quot;class path resolution&quot; issues.</p>\n<p>If you're using a build tool like Maven, there may be another solution where you use define 3.14.9v as the compile time dependency and include 4.10.0v as the runtime dependency so only 4.10.0v is packaged-in and available during the runtime.</p>\n"},{"comments":[{"owner":{"account_id":25398964,"reputation":95,"user_id":19208792,"display_name":"Gourav Kumar"},"score":0,"creation_date":1671735201,"post_id":74890414,"comment_id":132167050,"body_markdown":"i can&#39;t upgrade my dependency, is there any other way?","body":"i can&#39;t upgrade my dependency, is there any other way?"},{"owner":{"account_id":19414861,"reputation":443,"user_id":14198583,"display_name":"Christopher"},"score":0,"creation_date":1671804992,"post_id":74890414,"comment_id":132180369,"body_markdown":"Nothing simple that I know about. Someone mentioned OSGi, which might work but be difficult. You might be able to split your application into two applications and make them communicate via some kind of RPC. That would allow you to keep the dependencies straight, but represents a major restructuring of your application.","body":"Nothing simple that I know about. Someone mentioned OSGi, which might work but be difficult. You might be able to split your application into two applications and make them communicate via some kind of RPC. That would allow you to keep the dependencies straight, but represents a major restructuring of your application."},{"owner":{"account_id":25398964,"reputation":95,"user_id":19208792,"display_name":"Gourav Kumar"},"score":0,"creation_date":1671830127,"post_id":74890414,"comment_id":132186326,"body_markdown":"okay and what if i can control the external dependency means make some changes in the the way its loading classes, dependencies, keeping in my that i still can&#39;t change the version. any classloader approach?","body":"okay and what if i can control the external dependency means make some changes in the the way its loading classes, dependencies, keeping in my that i still can&#39;t change the version. any classloader approach?"}],"tags":[],"owner":{"account_id":19414861,"reputation":443,"user_id":14198583,"display_name":"Christopher"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671721801,"creation_date":1671721801,"answer_id":74890414,"question_id":74889939,"body_markdown":"I would try to upgrade my code from 3.14 to 4.10 to match the external dependency. Generally it is good to upgrade packages whenever you can, so this should be a good thing (unless there is a strong reason why you can&#39;t).  The worse case is when an external dependency forces you to downgrade, which is frustrating but sometimes unavoidable.\r\n\r\n","title":"How to use two different version of same package of a dependency?","body":"<p>I would try to upgrade my code from 3.14 to 4.10 to match the external dependency. Generally it is good to upgrade packages whenever you can, so this should be a good thing (unless there is a strong reason why you can't).  The worse case is when an external dependency forces you to downgrade, which is frustrating but sometimes unavoidable.</p>\n"}],"owner":{"account_id":25398964,"reputation":95,"user_id":19208792,"display_name":"Gourav Kumar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":518,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":3,"score":0,"last_activity_date":1671721801,"creation_date":1671719461,"question_id":74889939,"body_markdown":"I am working with a usecase where my application is using okhttp [version:3.14.9] which is written in `java`, I am also importing some external dependency which uses okhttp [version:4.10.0] which is written in `Kotlin`, the external dependency is using a method of okhttp (4.10.0) which is not in okhttp (3.14.9). since my application during runtime calls the method with the (3.14.9) dependency hence unable to find the method and throws **java.lang.NoSuchMethodError**.\r\n\r\nI know this is such a common problem which every other java application faced at some point of time. So I want to know the right approach which is used widely by most java applications.","title":"How to use two different version of same package of a dependency?","body":"<p>I am working with a usecase where my application is using okhttp [version:3.14.9] which is written in <code>java</code>, I am also importing some external dependency which uses okhttp [version:4.10.0] which is written in <code>Kotlin</code>, the external dependency is using a method of okhttp (4.10.0) which is not in okhttp (3.14.9). since my application during runtime calls the method with the (3.14.9) dependency hence unable to find the method and throws <strong>java.lang.NoSuchMethodError</strong>.</p>\n<p>I know this is such a common problem which every other java application faced at some point of time. So I want to know the right approach which is used widely by most java applications.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":195331,"reputation":275428,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":0,"creation_date":1671720303,"post_id":74890028,"comment_id":132162241,"body_markdown":"_contain the combination of id_ Contain it where? Do you have a separate data class?","body":"<i>contain the combination of id</i> Contain it where? Do you have a separate data class?"},{"owner":{"account_id":3221623,"reputation":3136,"user_id":2718939,"display_name":"Ronak Jain"},"score":0,"creation_date":1671720369,"post_id":74890028,"comment_id":132162273,"body_markdown":"&quot;but it will not preserve the original list&quot; - meaning?\n\nI think you can Map and create new Student objects, I can show you the code but need to understand what you meant by this to be certain if that&#39;s what you want.","body":"&quot;but it will not preserve the original list&quot; - meaning?  I think you can Map and create new Student objects, I can show you the code but need to understand what you meant by this to be certain if that&#39;s what you want."},{"owner":{"account_id":1672317,"reputation":23196,"user_id":1538553,"accept_rate":59,"display_name":"sjain"},"score":0,"creation_date":1671720410,"post_id":74890028,"comment_id":132162282,"body_markdown":"Contain in the same list as a combination of id and name. This is what I want as a modified list. The original list data is coming from DB.","body":"Contain in the same list as a combination of id and name. This is what I want as a modified list. The original list data is coming from DB."},{"owner":{"account_id":26879624,"reputation":386,"user_id":20460294,"display_name":"Anon"},"score":0,"creation_date":1671720424,"post_id":74890028,"comment_id":132162287,"body_markdown":"that map just converts a list of students to a set of strings","body":"that map just converts a list of students to a set of strings"},{"owner":{"account_id":3221623,"reputation":3136,"user_id":2718939,"display_name":"Ronak Jain"},"score":0,"creation_date":1671720501,"post_id":74890028,"comment_id":132162313,"body_markdown":"@MyGod is the field present in the original class? if yes it can be achieved. From DB it&#39;ll come null, you can set it in the Map.","body":"@MyGod is the field present in the original class? if yes it can be achieved. From DB it&#39;ll come null, you can set it in the Map."},{"owner":{"account_id":26879624,"reputation":386,"user_id":20460294,"display_name":"Anon"},"score":0,"creation_date":1671720522,"post_id":74890028,"comment_id":132162318,"body_markdown":"you should have 2 diferent classes one the entity that gets the stuff from db and the other one that convers with the extra things you have or does your student class has the private String idName; but comes null?","body":"you should have 2 diferent classes one the entity that gets the stuff from db and the other one that convers with the extra things you have or does your student class has the private String idName; but comes null?"},{"owner":{"account_id":1672317,"reputation":23196,"user_id":1538553,"accept_rate":59,"display_name":"sjain"},"score":0,"creation_date":1671720654,"post_id":74890028,"comment_id":132162371,"body_markdown":"@all I have modified the question with original and required list.","body":"@all I have modified the question with original and required list."},{"owner":{"account_id":1672317,"reputation":23196,"user_id":1538553,"accept_rate":59,"display_name":"sjain"},"score":0,"creation_date":1671720755,"post_id":74890028,"comment_id":132162417,"body_markdown":"@RonakJain the field is a combination of the values itself of that row.","body":"@RonakJain the field is a combination of the values itself of that row."},{"owner":{"account_id":26879624,"reputation":386,"user_id":20460294,"display_name":"Anon"},"score":0,"creation_date":1671720832,"post_id":74890028,"comment_id":132162443,"body_markdown":"you could do a foreach and use setIdName() and add the things you want i think this is what you are asking?","body":"you could do a foreach and use setIdName() and add the things you want i think this is what you are asking?"},{"owner":{"account_id":6714862,"reputation":16230,"user_id":5176992,"display_name":"Eritrean"},"score":0,"creation_date":1671720960,"post_id":74890028,"comment_id":132162497,"body_markdown":"Your question doesn&#39;t make sense. You cann&#39;t have a class with a dynamic number of fields","body":"Your question doesn&#39;t make sense. You cann&#39;t have a class with a dynamic number of fields"},{"owner":{"account_id":1672317,"reputation":23196,"user_id":1538553,"accept_rate":59,"display_name":"sjain"},"score":0,"creation_date":1671720991,"post_id":74890028,"comment_id":132162505,"body_markdown":"@Anon I want to use java8 stream to do that same thing.","body":"@Anon I want to use java8 stream to do that same thing."},{"owner":{"account_id":1672317,"reputation":23196,"user_id":1538553,"accept_rate":59,"display_name":"sjain"},"score":0,"creation_date":1671721060,"post_id":74890028,"comment_id":132162527,"body_markdown":"@Eritrean - Field I will add in the Student class itself. Its not dynamic.","body":"@Eritrean - Field I will add in the Student class itself. Its not dynamic."},{"owner":{"account_id":26879624,"reputation":386,"user_id":20460294,"display_name":"Anon"},"score":0,"creation_date":1671721060,"post_id":74890028,"comment_id":132162528,"body_markdown":"@MyGod stream.forEach() ?","body":"@MyGod stream.forEach() ?"},{"owner":{"account_id":3221623,"reputation":3136,"user_id":2718939,"display_name":"Ronak Jain"},"score":0,"creation_date":1671721098,"post_id":74890028,"comment_id":132162548,"body_markdown":"@MyGod There are two classes in your question - Student with idName and one without. Are they different or do you want to add the field on the fly?","body":"@MyGod There are two classes in your question - Student with idName and one without. Are they different or do you want to add the field on the fly?"},{"owner":{"account_id":1672317,"reputation":23196,"user_id":1538553,"accept_rate":59,"display_name":"sjain"},"score":0,"creation_date":1671721198,"post_id":74890028,"comment_id":132162587,"body_markdown":"@RonakJain idName I will add to account for the issue. It will be fixed.","body":"@RonakJain idName I will add to account for the issue. It will be fixed."}],"answers":[{"tags":[],"owner":{"account_id":3221623,"reputation":3136,"user_id":2718939,"display_name":"Ronak Jain"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1671721568,"creation_date":1671721568,"answer_id":74890361,"question_id":74890028,"body_markdown":"If you&#39;re using same class\r\n\r\n    @Setter\r\n    @Getter\r\n    @ToString\r\n    static class Student{\r\n        private long id;\r\n        private String name;\r\n        private String school;\r\n        private String idName; //initially will be null\r\n\r\n        public Student(long id, String name, String school) {\r\n            this.id = id;\r\n            this.name = name;\r\n            this.school = school;\r\n        }\r\n\r\n    }\r\n\r\nUse ForEach\r\n\r\n    list.forEach(student -&gt; student.setIdName(student.id+student.name));\r\n\r\nOr Streams\r\n\r\n    list.stream().forEach(student -&gt; student.setIdName(student.id+student.name));\r\n\r\nIf you have two separate classes, one with the idName field and one without as in the question. \r\n\r\n    List&lt;Student&gt; list = Stream\r\n            .of(new Student(1, &quot;Sam&quot;, &quot;School&quot;),\r\n                new Student(2, &quot;Ronald&quot;, &quot;School2&quot;))\r\n            .collect(Collectors.toList());\r\n\r\n     //Create a List with StudentPOJO object having another field as idName\r\n    List&lt;StudentPOJO&gt; newList = list\r\n    .stream()\r\n    .map(student -&gt; new StudentPOJO(student.id, student.name, student.school, student.id + student.name))\r\n\r\n    .collect(Collectors.toList());\r\n\r\n\r\nClasses\r\n\r\nStudent\r\n\r\n    @AllArgsConstructor\r\n    @Setter\r\n    @Getter\r\n    @ToString\r\n    static class Student{\r\n        private long id;\r\n        private String name;\r\n        private String school;\r\n    }\r\n   \r\nStudentPOJO\r\n\r\n    @AllArgsConstructor\r\n    @Setter\r\n    @Getter\r\n    @ToString\r\n    static class StudentPOJO{\r\n        private long id;\r\n        private String name;\r\n        private String school;\r\n        private String idName;\r\n    }\r\n\r\n","title":"Dynamically modify the list to add new field in each object of the list","body":"<p>If you're using same class</p>\n<pre><code>@Setter\n@Getter\n@ToString\nstatic class Student{\n    private long id;\n    private String name;\n    private String school;\n    private String idName; //initially will be null\n\n    public Student(long id, String name, String school) {\n        this.id = id;\n        this.name = name;\n        this.school = school;\n    }\n\n}\n</code></pre>\n<p>Use ForEach</p>\n<pre><code>list.forEach(student -&gt; student.setIdName(student.id+student.name));\n</code></pre>\n<p>Or Streams</p>\n<pre><code>list.stream().forEach(student -&gt; student.setIdName(student.id+student.name));\n</code></pre>\n<p>If you have two separate classes, one with the idName field and one without as in the question.</p>\n<pre><code>List&lt;Student&gt; list = Stream\n        .of(new Student(1, &quot;Sam&quot;, &quot;School&quot;),\n            new Student(2, &quot;Ronald&quot;, &quot;School2&quot;))\n        .collect(Collectors.toList());\n\n //Create a List with StudentPOJO object having another field as idName\nList&lt;StudentPOJO&gt; newList = list\n.stream()\n.map(student -&gt; new StudentPOJO(student.id, student.name, student.school, student.id + student.name))\n\n.collect(Collectors.toList());\n</code></pre>\n<p>Classes</p>\n<p>Student</p>\n<pre><code>@AllArgsConstructor\n@Setter\n@Getter\n@ToString\nstatic class Student{\n    private long id;\n    private String name;\n    private String school;\n}\n</code></pre>\n<p>StudentPOJO</p>\n<pre><code>@AllArgsConstructor\n@Setter\n@Getter\n@ToString\nstatic class StudentPOJO{\n    private long id;\n    private String name;\n    private String school;\n    private String idName;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3182409,"reputation":761,"user_id":2688838,"display_name":"user2688838"},"score":0,"creation_date":1671808309,"post_id":74890397,"comment_id":132181258,"body_markdown":"The question was &quot;how to add new a new field to a class&quot; not &quot;how add new element to a list&quot;","body":"The question was &quot;how to add new a new field to a class&quot; not &quot;how add new element to a list&quot;"}],"tags":[],"owner":{"account_id":26611389,"reputation":1,"user_id":20231531,"display_name":"Miroslav inko"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671721745,"creation_date":1671721745,"answer_id":74890397,"question_id":74890028,"body_markdown":"You can create a new list of modified students and add them to the original list like this:\r\n\r\n    List&lt;Student&gt; modifiedStudents = students.stream().map(s -&gt; {\r\n    Student modifiedStudent = new Student();\r\n    modifiedStudent.setId(s.getId());\r\n    modifiedStudent.setName(s.getName());\r\n    modifiedStudent.setSchool(s.getSchool());\r\n    modifiedStudent.setIdName(s.getId() + &quot;,&quot; + s.getName());\r\n    return modifiedStudent;\r\n    }).collect(Collectors.toList());\r\n    students.addAll(modifiedStudents);\r\n\r\nThis will preserve the original list and also add the modified students to it.","title":"Dynamically modify the list to add new field in each object of the list","body":"<p>You can create a new list of modified students and add them to the original list like this:</p>\n<pre><code>List&lt;Student&gt; modifiedStudents = students.stream().map(s -&gt; {\nStudent modifiedStudent = new Student();\nmodifiedStudent.setId(s.getId());\nmodifiedStudent.setName(s.getName());\nmodifiedStudent.setSchool(s.getSchool());\nmodifiedStudent.setIdName(s.getId() + &quot;,&quot; + s.getName());\nreturn modifiedStudent;\n}).collect(Collectors.toList());\nstudents.addAll(modifiedStudents);\n</code></pre>\n<p>This will preserve the original list and also add the modified students to it.</p>\n"}],"owner":{"account_id":1672317,"reputation":23196,"user_id":1538553,"accept_rate":59,"display_name":"sjain"},"comment_count":15,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":58,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":74890361,"answer_count":2,"score":0,"last_activity_date":1671721745,"creation_date":1671719968,"question_id":74890028,"body_markdown":"I have Student class as follows:-\r\n\r\n    public class Student{\r\n       private long id;\r\n       private String name;\r\n       private String school;\r\n    \r\n    }\r\n\r\nNow I have list of Students coming from DB -\r\n\r\n    List&lt;Student&gt; students = apiService.getStudents();\r\n\r\nI want to dynamically modify this list such that it will also contain the combination of id and name as a separate field. So it will be like-\r\n\r\n    public class Student{\r\n       private long id;\r\n       private String name;\r\n       private String school;\r\n       private String idName;\r\n    }\r\n\r\nI can map it like this - \r\n\r\n            students.stream().map(p -&gt; p.getId() + &quot;,&quot;+p.getName())).\r\n            collect(Collectors.toSet());\r\n\r\nbut it will not preserve the original list..\r\n\r\nSo not sure how to do this.\r\n\r\n**Original List -**\r\n\r\n    id= 576, name = &quot;Kevin&quot;, school = &quot;ABC&quot;\r\n    id= 577, name = &quot;Varon&quot;, school = &quot;DEF&quot;\r\n\r\n**New List -**\r\n\r\n    id= 576, name = &quot;Kevin&quot;, school = &quot;ABC&quot;, idName= &quot;576Kevin&quot;\r\n    id= 577, name = &quot;Varon&quot;, school = &quot;DEF&quot;, idName= &quot;577Varon&quot;\r\n\r\n","title":"Dynamically modify the list to add new field in each object of the list","body":"<p>I have Student class as follows:-</p>\n<pre><code>public class Student{\n   private long id;\n   private String name;\n   private String school;\n\n}\n</code></pre>\n<p>Now I have list of Students coming from DB -</p>\n<pre><code>List&lt;Student&gt; students = apiService.getStudents();\n</code></pre>\n<p>I want to dynamically modify this list such that it will also contain the combination of id and name as a separate field. So it will be like-</p>\n<pre><code>public class Student{\n   private long id;\n   private String name;\n   private String school;\n   private String idName;\n}\n</code></pre>\n<p>I can map it like this -</p>\n<pre><code>        students.stream().map(p -&gt; p.getId() + &quot;,&quot;+p.getName())).\n        collect(Collectors.toSet());\n</code></pre>\n<p>but it will not preserve the original list..</p>\n<p>So not sure how to do this.</p>\n<p><strong>Original List -</strong></p>\n<pre><code>id= 576, name = &quot;Kevin&quot;, school = &quot;ABC&quot;\nid= 577, name = &quot;Varon&quot;, school = &quot;DEF&quot;\n</code></pre>\n<p><strong>New List -</strong></p>\n<pre><code>id= 576, name = &quot;Kevin&quot;, school = &quot;ABC&quot;, idName= &quot;576Kevin&quot;\nid= 577, name = &quot;Varon&quot;, school = &quot;DEF&quot;, idName= &quot;577Varon&quot;\n</code></pre>\n"},{"tags":["java","exception","intellij-idea","default","extends"],"answers":[{"comments":[{"owner":{"account_id":26168067,"reputation":11,"user_id":20360432,"display_name":"French Goulash"},"score":0,"creation_date":1670243700,"post_id":74674752,"comment_id":131823738,"body_markdown":"I understand and it answers the question, but I don&#39;t have the Exception entry in the Code tap on your step 3","body":"I understand and it answers the question, but I don&#39;t have the Exception entry in the Code tap on your step 3"},{"owner":{"account_id":3298176,"reputation":7146,"user_id":2774914,"accept_rate":94,"display_name":"diziaq"},"score":0,"creation_date":1670250147,"post_id":74674752,"comment_id":131826115,"body_markdown":"For sure, it would not work in the original version of IDEA, I have a customized one.\nUpdated the answer, so the same could be achieve with LiveTemplates, but a bit trickier.","body":"For sure, it would not work in the original version of IDEA, I have a customized one. Updated the answer, so the same could be achieve with LiveTemplates, but a bit trickier."}],"tags":[],"owner":{"account_id":3298176,"reputation":7146,"user_id":2774914,"accept_rate":94,"display_name":"diziaq"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1670250400,"creation_date":1670150570,"answer_id":74674752,"question_id":74669424,"body_markdown":"Overriding default behavior for creating new exception classes in not available yet for IntelliJ IDEA. Here is a [feature request][1].\r\n\r\nStill it is possible to use LiveTemplates.\r\n\r\n1. In the main menu, go to File &gt; Settings (or Preferences on macOS).\r\n2. In the Settings/Preferences dialog, navigate to the Editor &gt; Live Templates section.\r\n3. In the right pane, find &quot;Java&quot; item and expand it.\r\n4. Add new entry, e.g. &quot;**exc**&quot; (or any symbols on your choice).\r\n4. In the editor window, modify the template code as needed to change the default behavior.\r\n \r\nFor example, to make the created exception class extend the Exception class instead of Throwable modify the code as follows:\r\n\r\n    public class $NAME$ extends Exception {\r\n        public $NAME$() {\r\n        }\r\n    \r\n        public $NAME$(String message) {\r\n            super(message);\r\n        }\r\n    \r\n        public $NAME$(String message, Throwable cause) {\r\n            super(message, cause);\r\n        }\r\n    \r\n        public $NAME$(Throwable cause) {\r\n            super(cause);\r\n        }\r\n    \r\n        protected $NAME$(String message, Throwable cause, boolean enableSuppression, boolean writableStackTrace) {\r\n            super(message, cause, enableSuppression, writableStackTrace);\r\n        }\r\n    }\r\n\r\nAfter making the desired changes, click `Apply` button to save changes. \r\n\r\nUsage:\r\n1. Create a class file\r\n2. Remove contents except for &quot;package ...&quot; line.\r\n3. Put cursor somewhere, type **exc**, push `Tab` key.\r\n4. The template will be expanded and the cursor will be at the position where you have to type the name of the exception class. \r\n\r\n  [1]: https://youtrack.jetbrains.com/issue/IDEABKL-4191?_gl=1*k50lyk*_ga*MTUwOTk5NTExOS4xNjcwMjQ5MjY1*_ga_9J976DJZ68*MTY3MDI0OTI2NC4xLjEuMTY3MDI0OTI4Mi4wLjAuMA..&amp;_ga=2.4638963.1186768439.1670249265-1509995119.1670249265","title":"How to define Intellij IDEA template for Java exception class","body":"<p>Overriding default behavior for creating new exception classes in not available yet for IntelliJ IDEA. Here is a <a href=\"https://youtrack.jetbrains.com/issue/IDEABKL-4191?_gl=1*k50lyk*_ga*MTUwOTk5NTExOS4xNjcwMjQ5MjY1*_ga_9J976DJZ68*MTY3MDI0OTI2NC4xLjEuMTY3MDI0OTI4Mi4wLjAuMA..&amp;_ga=2.4638963.1186768439.1670249265-1509995119.1670249265\" rel=\"nofollow noreferrer\">feature request</a>.</p>\n<p>Still it is possible to use LiveTemplates.</p>\n<ol>\n<li>In the main menu, go to File &gt; Settings (or Preferences on macOS).</li>\n<li>In the Settings/Preferences dialog, navigate to the Editor &gt; Live Templates section.</li>\n<li>In the right pane, find &quot;Java&quot; item and expand it.</li>\n<li>Add new entry, e.g. &quot;<strong>exc</strong>&quot; (or any symbols on your choice).</li>\n<li>In the editor window, modify the template code as needed to change the default behavior.</li>\n</ol>\n<p>For example, to make the created exception class extend the Exception class instead of Throwable modify the code as follows:</p>\n<pre><code>public class $NAME$ extends Exception {\n    public $NAME$() {\n    }\n\n    public $NAME$(String message) {\n        super(message);\n    }\n\n    public $NAME$(String message, Throwable cause) {\n        super(message, cause);\n    }\n\n    public $NAME$(Throwable cause) {\n        super(cause);\n    }\n\n    protected $NAME$(String message, Throwable cause, boolean enableSuppression, boolean writableStackTrace) {\n        super(message, cause, enableSuppression, writableStackTrace);\n    }\n}\n</code></pre>\n<p>After making the desired changes, click <code>Apply</code> button to save changes.</p>\n<p>Usage:</p>\n<ol>\n<li>Create a class file</li>\n<li>Remove contents except for &quot;package ...&quot; line.</li>\n<li>Put cursor somewhere, type <strong>exc</strong>, push <code>Tab</code> key.</li>\n<li>The template will be expanded and the cursor will be at the position where you have to type the name of the exception class.</li>\n</ol>\n"}],"owner":{"account_id":26168067,"reputation":11,"user_id":20360432,"display_name":"French Goulash"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":295,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":74674752,"answer_count":1,"score":0,"last_activity_date":1671721694,"creation_date":1670091578,"question_id":74669424,"body_markdown":"When I define a new exeption on IntelliJ IDEA Ultimate and use ctlr + enter to create the exception class, it extends Throwable by default, I would like to change that to exception but I can&#39;t find where it is in the settings.\r\n\r\nI&#39;ve tried to to the settings in Editor -&gt; File and Code Templates but I can&#39;t find what I&#39;m searching for.","title":"How to define Intellij IDEA template for Java exception class","body":"<p>When I define a new exeption on IntelliJ IDEA Ultimate and use ctlr + enter to create the exception class, it extends Throwable by default, I would like to change that to exception but I can't find where it is in the settings.</p>\n<p>I've tried to to the settings in Editor -&gt; File and Code Templates but I can't find what I'm searching for.</p>\n"},{"tags":["java","android","vlc","libvlc"],"comments":[{"owner":{"account_id":16127880,"reputation":601,"user_id":11642248,"display_name":"Muhammad Arbaz Zafar"},"score":0,"creation_date":1622208788,"post_id":41849541,"comment_id":119733790,"body_markdown":"can you help me how to integrate camera rtsp stream in flutter","body":"can you help me how to integrate camera rtsp stream in flutter"}],"answers":[{"comments":[{"owner":{"account_id":5346091,"reputation":3706,"user_id":4261613,"accept_rate":74,"display_name":"Mikhail"},"score":0,"creation_date":1485876752,"post_id":41961321,"comment_id":71101520,"body_markdown":"Hi, thank you for your answer! I have tried this and it does not seem to be working. What version of LibVLC are you using?","body":"Hi, thank you for your answer! I have tried this and it does not seem to be working. What version of LibVLC are you using?"},{"owner":{"account_id":9207370,"reputation":683,"user_id":6864948,"display_name":"Andrew G"},"score":0,"creation_date":1485876912,"post_id":41961321,"comment_id":71101644,"body_markdown":"compile &quot;de.mrmaffen:vlc-android-sdk:2.0.6&quot;","body":"compile &quot;de.mrmaffen:vlc-android-sdk:2.0.6&quot;"},{"owner":{"account_id":5346091,"reputation":3706,"user_id":4261613,"accept_rate":74,"display_name":"Mikhail"},"score":0,"creation_date":1485883056,"post_id":41961321,"comment_id":71106177,"body_markdown":"With your code I have managed to reduce delay to ~800 ms. Is it possible to get it down even further?","body":"With your code I have managed to reduce delay to ~800 ms. Is it possible to get it down even further?"},{"owner":{"account_id":6883163,"reputation":1563,"user_id":5289242,"display_name":"Kacper Dziubek"},"score":1,"creation_date":1504777669,"post_id":41961321,"comment_id":79147871,"body_markdown":"Great anwser! With this solution I reduced delay in rtsp stream from ~2s to ~300ms ;)","body":"Great anwser! With this solution I reduced delay in rtsp stream from ~2s to ~300ms ;)"},{"owner":{"account_id":22264521,"reputation":329,"user_id":20837030,"display_name":"jcredking"},"score":0,"creation_date":1683891001,"post_id":41961321,"comment_id":134439582,"body_markdown":"I also get delays with 2 sec it is possible to stream without delays  it&#39;s a local network","body":"I also get delays with 2 sec it is possible to stream without delays  it&#39;s a local network"}],"tags":[],"owner":{"account_id":9207370,"reputation":683,"user_id":6864948,"display_name":"Andrew G"},"comment_count":5,"down_vote_count":1,"up_vote_count":14,"is_accepted":false,"score":13,"last_activity_date":1485876545,"creation_date":1485876545,"answer_id":41961321,"question_id":41849541,"body_markdown":"There is a way to reduce the delay from ~2sec to ~200ms\r\n\r\nSolution:\r\n\r\n     ArrayList&lt;String&gt; options = new ArrayList&lt;&gt;();\r\n     options.add(&quot;--file-caching=2000&quot;);\r\n     options.add(&quot;-vvv&quot;);\r\n    \r\n     LibVLC mLibVLC = new LibVLC(getApplicationContext(), options);\r\n     MediaPlayer mMediaPlayer =  new MediaPlayer(mLibVLC);\r\n    \r\n     Media media = new Media(mLibVLC, Uri.parse(&quot;rtsp://192.168.0.1:1935/myApp/myStream&quot;));\r\n            media.setHWDecoderEnabled(true, false);\r\n            media.addOption(&quot;:network-caching=150&quot;);\r\n            media.addOption(&quot;:clock-jitter=0&quot;);\r\n            media.addOption(&quot;:clock-synchro=0&quot;);\r\n    \r\n     mMediaPlayer.setMedia(media);\r\n     mMediaPlayer.play();\r\n\r\nHope this help you! =)","title":"Reduce delay when playing rtp stream with libvlc on Android","body":"<p>There is a way to reduce the delay from ~2sec to ~200ms</p>\n\n<p>Solution:</p>\n\n<pre><code> ArrayList&lt;String&gt; options = new ArrayList&lt;&gt;();\n options.add(\"--file-caching=2000\");\n options.add(\"-vvv\");\n\n LibVLC mLibVLC = new LibVLC(getApplicationContext(), options);\n MediaPlayer mMediaPlayer =  new MediaPlayer(mLibVLC);\n\n Media media = new Media(mLibVLC, Uri.parse(\"rtsp://192.168.0.1:1935/myApp/myStream\"));\n        media.setHWDecoderEnabled(true, false);\n        media.addOption(\":network-caching=150\");\n        media.addOption(\":clock-jitter=0\");\n        media.addOption(\":clock-synchro=0\");\n\n mMediaPlayer.setMedia(media);\n mMediaPlayer.play();\n</code></pre>\n\n<p>Hope this help you! =)</p>\n"},{"comments":[{"owner":{"account_id":1995082,"reputation":143,"user_id":1788205,"display_name":"MARSH"},"score":0,"creation_date":1674901593,"post_id":70623437,"comment_id":132815607,"body_markdown":"This code also working fine  Thanks for post but i am getting bottom black bar its not fitting video view in Surface view can you please help me what i am doing wrong  URL  [1]: https://i.stack.imgur.com/5iG9u.png","body":"This code also working fine  Thanks for post but i am getting bottom black bar its not fitting video view in Surface view can you please help me what i am doing wrong  URL  [1]: <a href=\"https://i.stack.imgur.com/5iG9u.png\" rel=\"nofollow noreferrer\">i.stack.imgur.com/5iG9u.png</a>"}],"tags":[],"owner":{"account_id":13912874,"reputation":637,"user_id":10045546,"display_name":"Suresh"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1641568925,"creation_date":1641568925,"answer_id":70623437,"question_id":41849541,"body_markdown":"Using the following as options did the trick for me.\r\n\r\n    ArrayList&lt;String&gt; options = new ArrayList&lt;&gt;();\r\n    options.add(&quot;-vvv&quot;);\r\n    options.add(&quot;--rtsp-tcp&quot;);\r\n\r\nLibVLC used:\r\n\r\n    implementation &#39;org.videolan.android:libvlc-all:3+&#39;","title":"Reduce delay when playing rtp stream with libvlc on Android","body":"<p>Using the following as options did the trick for me.</p>\n<pre><code>ArrayList&lt;String&gt; options = new ArrayList&lt;&gt;();\noptions.add(&quot;-vvv&quot;);\noptions.add(&quot;--rtsp-tcp&quot;);\n</code></pre>\n<p>LibVLC used:</p>\n<pre><code>implementation 'org.videolan.android:libvlc-all:3+'\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1995082,"reputation":143,"user_id":1788205,"display_name":"MARSH"},"score":0,"creation_date":1674901090,"post_id":74890337,"comment_id":132815553,"body_markdown":"This code also working fine  Thanks for post but i am getting bottom black bar its not fitting video view in Surface view can you please help me what i am doing wrong","body":"This code also working fine  Thanks for post but i am getting bottom black bar its not fitting video view in Surface view can you please help me what i am doing wrong"}],"tags":[],"owner":{"account_id":23101759,"reputation":81,"user_id":17211088,"display_name":"BurhanY"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1671721435,"creation_date":1671721435,"answer_id":74890337,"question_id":41849541,"body_markdown":"I solved this problem.\r\n\r\nAndroid:\r\n\r\n        val options: ArrayList&lt;String&gt; = ArrayList()\r\n        options.add(&quot;--file-caching=2000&quot;)\r\n        options.add(&quot;-vvv&quot;)\r\n        options.add(&quot;--rtsp-tcp&quot;)\r\n\r\nFlutter:\r\n\r\n    class _MyHomePageState extends State&lt;MyHomePage&gt; {\r\n    final VlcPlayerController _vlcViewController = \r\n    VlcPlayerController.network(\r\n      &quot;rtsp://RTSP_URL_HERE&quot;,\r\n      autoPlay: true,\r\n      options: VlcPlayerOptions(\r\n          rtp: VlcRtpOptions([VlcRtpOptions.rtpOverRtsp(true)])));\r\n","title":"Reduce delay when playing rtp stream with libvlc on Android","body":"<p>I solved this problem.</p>\n<p>Android:</p>\n<pre><code>    val options: ArrayList&lt;String&gt; = ArrayList()\n    options.add(&quot;--file-caching=2000&quot;)\n    options.add(&quot;-vvv&quot;)\n    options.add(&quot;--rtsp-tcp&quot;)\n</code></pre>\n<p>Flutter:</p>\n<pre><code>class _MyHomePageState extends State&lt;MyHomePage&gt; {\nfinal VlcPlayerController _vlcViewController = \nVlcPlayerController.network(\n  &quot;rtsp://RTSP_URL_HERE&quot;,\n  autoPlay: true,\n  options: VlcPlayerOptions(\n      rtp: VlcRtpOptions([VlcRtpOptions.rtpOverRtsp(true)])));\n</code></pre>\n"}],"owner":{"account_id":5346091,"reputation":3706,"user_id":4261613,"accept_rate":74,"display_name":"Mikhail"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12177,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":3,"score":5,"last_activity_date":1671721435,"creation_date":1485341174,"question_id":41849541,"body_markdown":"I am using LibVLC version 3.0.0 to play incoming mpeg2ts stream over rtp on Android. The code is the following:\r\n        \r\n    SurfaceView playerView; //Initialized somewhere before    \r\n\r\n    LibVLC libVlc = new LibVLC(context, arrayListOf(&quot;--file-caching=150&quot;, &quot;--network-caching=150&quot;,\r\n                        &quot;--clock-jitter=0&quot;, &quot;--live-caching=150&quot;, &quot;--clock-synchro=0&quot;,\r\n                        &quot;-vvv&quot;, &quot;--drop-late-frames&quot;, &quot;--skip-frames&quot;));\r\n    MediaPlayer player = new MediaPlayer(libVlc);\r\n    IVLCVout vout = player.getVLCVout();\r\n    vout.setVideoView(playerView);\r\n    vout.attachViews();\r\n    Media media = new Media(libVlc, Uri.parse(&quot;rtp://@:&quot; + UDP_PORT + &quot;/&quot;));\r\n    player.setMedia(media);\r\n    player.play();\r\n\r\nThis does play the stream, but there is a delay of approximately 2 seconds. I know for certain that the delay can be reduced to ~300 ms as some other player can play it at this delay. Which options should I use to reduce this latency? I understand that I will have to trade quality for it, but how do I do it in the first place?","title":"Reduce delay when playing rtp stream with libvlc on Android","body":"<p>I am using LibVLC version 3.0.0 to play incoming mpeg2ts stream over rtp on Android. The code is the following:</p>\n\n<pre><code>SurfaceView playerView; //Initialized somewhere before    \n\nLibVLC libVlc = new LibVLC(context, arrayListOf(\"--file-caching=150\", \"--network-caching=150\",\n                    \"--clock-jitter=0\", \"--live-caching=150\", \"--clock-synchro=0\",\n                    \"-vvv\", \"--drop-late-frames\", \"--skip-frames\"));\nMediaPlayer player = new MediaPlayer(libVlc);\nIVLCVout vout = player.getVLCVout();\nvout.setVideoView(playerView);\nvout.attachViews();\nMedia media = new Media(libVlc, Uri.parse(\"rtp://@:\" + UDP_PORT + \"/\"));\nplayer.setMedia(media);\nplayer.play();\n</code></pre>\n\n<p>This does play the stream, but there is a delay of approximately 2 seconds. I know for certain that the delay can be reduced to ~300 ms as some other player can play it at this delay. Which options should I use to reduce this latency? I understand that I will have to trade quality for it, but how do I do it in the first place?</p>\n"},{"tags":["java","performance","apache-spark","spark-streaming"],"comments":[{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":1,"creation_date":1671564270,"post_id":74865520,"comment_id":132125217,"body_markdown":"Does this actually run? In my experience, you cannot create/use SparkSession within `foreachRDD`. Also, why are you trying to use Spark Streaming instead of Structured Streaming, where you already get DataFrame batches out of the box? And what are you hoping to do with a loop over a list of one query, or run the exact same query multiple times over the exact same dataframe? Why would you need to run hundreds of different queries on the same 5 minute chunk of data?","body":"Does this actually run? In my experience, you cannot create/use SparkSession within <code>foreachRDD</code>. Also, why are you trying to use Spark Streaming instead of Structured Streaming, where you already get DataFrame batches out of the box? And what are you hoping to do with a loop over a list of one query, or run the exact same query multiple times over the exact same dataframe? Why would you need to run hundreds of different queries on the same 5 minute chunk of data?"},{"owner":{"account_id":10672429,"reputation":1,"user_id":7857112,"display_name":"data engineer"},"score":0,"creation_date":1671615096,"post_id":74865520,"comment_id":132135045,"body_markdown":"1- Yes it works well, this application is already deployed in production and my mission is to optimize it. 2 - Currently I can&#39;t migrate it to Structured Streaming, I updated the code to show you that from RDD I create my dataframe. 3 - Yes the goal is to run different aggregation queries every 5 minutes (on a different dataframe). 4 - I receive every 5 minutes 3 million of different records from a kafka topic","body":"1- Yes it works well, this application is already deployed in production and my mission is to optimize it. 2 - Currently I can&#39;t migrate it to Structured Streaming, I updated the code to show you that from RDD I create my dataframe. 3 - Yes the goal is to run different aggregation queries every 5 minutes (on a different dataframe). 4 - I receive every 5 minutes 3 million of different records from a kafka topic"},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1671733576,"post_id":74865520,"comment_id":132166562,"body_markdown":"I only ask because `JavaSparkSessionSingleton`  seems like an anti pattern. And I see no reason here that is stopping you from doing what Structured Streaming already does (your map function would be the only change). If you really want to optimize this, I would suggest not using Spark. Dump data into a BI/OLAP database where many queries can be submitted, such as Druid, Apache Pinot, Clickhouse, etc.","body":"I only ask because <code>JavaSparkSessionSingleton</code>  seems like an anti pattern. And I see no reason here that is stopping you from doing what Structured Streaming already does (your map function would be the only change). If you really want to optimize this, I would suggest not using Spark. Dump data into a BI/OLAP database where many queries can be submitted, such as Druid, Apache Pinot, Clickhouse, etc."}],"owner":{"account_id":10672429,"reputation":1,"user_id":7857112,"display_name":"data engineer"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":123,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671721311,"creation_date":1671550828,"question_id":74865520,"body_markdown":"I have a Spark Streaming application that reads from Kafka with a batch interval of 5 minutes\r\n\r\nMy application stores the input in a DataFrame, and is configured to execute aggregation queries on the dataframe (~ 1000 queries)\r\n\r\nCurrent solution: from the driver I execute a &quot;for loop&quot; on the list of 1000 queries and execute them.\r\n\r\nProblem: I have a hundred queries to execute and it takes a huge amount of time for my application.\r\n\r\nIs there a way to make this process more faster ?\r\n\r\n\r\n```  \r\n        SparkConf sparkConf = new SparkConf();\r\n\t\t\r\n\t\tmessagesFromKafka.foreachRDD((VoidFunction2&lt;JavaRDD&lt;String&gt;, Time&gt;) (rdd, time) -&gt; {\r\n\t\t\t\r\n\t\t\t//...\r\n\t\t\tSparkSession spark = JavaSparkSessionSingleton.getInstance(sparkConf);\r\n\t\t\t\r\n\t\t\t// Convert RDD[String]\r\n\t\t    JavaRDD&lt;Bean&gt; rddRow = rdd.map((Function&lt;String, Bean&gt;) line -&gt; {\r\n\r\n\t\t       Bean row = new Bean();\r\n\t\t       \r\n\t\t       row.setFiled1(line.split(&quot;;&quot;)[0]);\r\n\t\t       row.setFiled2(line.split(&quot;;&quot;)[1]);\r\n\t\t       //..\r\n\t\t       return row;\r\n\r\n\t\t    });\r\n\t\t\t\r\n\t\t\t// ...\r\n\t\t\tDataset&lt;Bean&gt; ds = spark.createDataFrame(rddRow, Bean.class);\r\n\t\t\t\r\n\t\t\t// Prepare List of query ...\r\n\t\t\tList&lt;String&gt; listQuery = new ArrayList&lt;&gt;();\r\n\t\t\tlistQuery.add(&quot;select sum(..)  group by filed1...&quot;);\r\n\t\t\tlistQuery.add(&quot;select avg (..) group by field2...&quot;);\r\n\t\t\t\r\n\t\t\t// perform aggregation with key query\r\n\t\t\tfor (String query : listQuery) {\r\n\t\t\t\tDataset&lt;Bean&gt; dsResult = spark.sql(query);\r\n\t\t\t}\r\n\t\t\r\n\t\t}\r\n```\r\n","title":"Spark : dataframe - how to properly parallelize the execution","body":"<p>I have a Spark Streaming application that reads from Kafka with a batch interval of 5 minutes</p>\n<p>My application stores the input in a DataFrame, and is configured to execute aggregation queries on the dataframe (~ 1000 queries)</p>\n<p>Current solution: from the driver I execute a &quot;for loop&quot; on the list of 1000 queries and execute them.</p>\n<p>Problem: I have a hundred queries to execute and it takes a huge amount of time for my application.</p>\n<p>Is there a way to make this process more faster ?</p>\n<pre><code>        SparkConf sparkConf = new SparkConf();\n        \n        messagesFromKafka.foreachRDD((VoidFunction2&lt;JavaRDD&lt;String&gt;, Time&gt;) (rdd, time) -&gt; {\n            \n            //...\n            SparkSession spark = JavaSparkSessionSingleton.getInstance(sparkConf);\n            \n            // Convert RDD[String]\n            JavaRDD&lt;Bean&gt; rddRow = rdd.map((Function&lt;String, Bean&gt;) line -&gt; {\n\n               Bean row = new Bean();\n               \n               row.setFiled1(line.split(&quot;;&quot;)[0]);\n               row.setFiled2(line.split(&quot;;&quot;)[1]);\n               //..\n               return row;\n\n            });\n            \n            // ...\n            Dataset&lt;Bean&gt; ds = spark.createDataFrame(rddRow, Bean.class);\n            \n            // Prepare List of query ...\n            List&lt;String&gt; listQuery = new ArrayList&lt;&gt;();\n            listQuery.add(&quot;select sum(..)  group by filed1...&quot;);\n            listQuery.add(&quot;select avg (..) group by field2...&quot;);\n            \n            // perform aggregation with key query\n            for (String query : listQuery) {\n                Dataset&lt;Bean&gt; dsResult = spark.sql(query);\n            }\n        \n        }\n</code></pre>\n"},{"tags":["java","swing"],"comments":[{"owner":{"account_id":6017640,"reputation":8919,"user_id":4725875,"display_name":"DevilsHnd - "},"score":0,"creation_date":1671719032,"post_id":74888410,"comment_id":132161782,"body_markdown":"When the `path` variable is filled, does it contain what you think it does? Print `path` to the console window once it is filled to make sure the format is correct. Is it missing a directory separator ( `\\\\ or /` ) before the image file name? Does the image file name contain a proper file name extension (ex: `.png`)?","body":"When the <code>path</code> variable is filled, does it contain what you think it does? Print <code>path</code> to the console window once it is filled to make sure the format is correct. Is it missing a directory separator ( <code>\\\\ or &#47;</code> ) before the image file name? Does the image file name contain a proper file name extension (ex: <code>.png</code>)?"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1671906337,"post_id":74888410,"comment_id":132195932,"body_markdown":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example).","body":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}],"owner":{"account_id":24599552,"reputation":1,"user_id":18502598,"display_name":"omar eltalaa"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671721084,"creation_date":1671711365,"question_id":74888410,"body_markdown":"i am working on hangman game project and i think im done with the code but everytime i load the game it gives me this error which i wrote when it cannot load the images file. im not sure if im doing something wrong to load the directory for the images file. here is the code...\r\nthis is ofcourse one of 5 classes but i want to be sure if im making a mistake loading the directory or is it something else. Also if u have any suggestions on how to improve this code im open to that.. \r\n\r\n\r\n```\r\nimport java.awt.Dimension;\r\nimport java.awt.Graphics;\r\nimport java.awt.event.MouseListener;\r\nimport java.awt.image.BufferedImage;\r\nimport java.io.File;\r\nimport java.io.IOException;\r\nimport javax.imageio.ImageIO;\r\nimport javax.swing.JLabel;\r\n\r\n/**\r\n * A tile representing a letter to be guessed during a game.\r\n * @author Jeff A.\r\n */\r\npublic class letterBlocks extends JLabel\r\n{\r\n    /**\r\n     * Add a TileListener\r\n     * @param l The MouseListener to attach as a TileListener\r\n     */\r\n    public void addTileListener(MouseListener l)\r\n    {\r\n        tileListener = l;\r\n        addMouseListener(tileListener);\r\n    }\r\n    /**\r\n     * The directory containing the letter images.\r\n     */\r\n    private final String IMAGE_DIRECTORY;\r\n\r\n    /**\r\n     * The type of image (.jpg, .png, etc. to include the period).\r\n     */\r\n    private final String IMAGE_TYPE;\r\n\r\n    /**\r\n     * The images of the letters in the window.\r\n     */\r\n    private final char IMAGE_LETTER;\r\n    /**\r\n     * The preferred width of the tiles.\r\n     */\r\n    private final int PREFERRED_WIDTH;\r\n\r\n    /**\r\n     * The preferred height of the tiles.\r\n     */\r\n    private final int PREFERRED_HEIGHT;\r\n\r\n    /**\r\n     * The current path of the current image.\r\n     */\r\n    private String path;\r\n\r\n    /**\r\n     * The current image being displayed.\r\n     */\r\n    private BufferedImage image;\r\n\r\n    /**\r\n     * A custom MouseListener from the GameBoard class to change the tiles on\r\n     * a click.\r\n     */\r\n    private MouseListener tileListener;\r\n\r\n    /**\r\n     * The default constructor.\r\n     */\r\n    public letterBlocks() { this(&#39;A&#39;, &quot;C:\\\\Users\\\\omare\\\\Dropbox\\\\My PC (LAPTOP-AGJUFI2M)\\\\Desktop\\\\Images&quot;, &quot;.png&quot;); }\r\n\r\n    /**\r\n     * Creates a new LetterTile given the letter to be displayed, the directory\r\n     * of the letter image series, and the image type.\r\n     * @param imageLetter The letter to be displayed on the tile.\r\n     * @param imageDirectory The directory holding the letter images.\r\n     * @param imageType The type of the letter images.\r\n     */\r\n    public letterBlocks(char imageLetter, String imageDirectory, String imageType)\r\n    {\r\n        IMAGE_LETTER = imageLetter;\r\n        IMAGE_DIRECTORY = imageDirectory;\r\n        IMAGE_TYPE = imageType;\r\n\r\n        PREFERRED_WIDTH = PREFERRED_HEIGHT = 50;\r\n\r\n        setPreferredSize(new Dimension(PREFERRED_WIDTH, PREFERRED_HEIGHT));\r\n        path = IMAGE_DIRECTORY + IMAGE_LETTER + IMAGE_TYPE;\r\n        image = loadImage(path);\r\n    }\r\n\r\n    /**\r\n     * Changes the tile&#39;s appearance and removes the mouse listener to prevent\r\n     * the tile from being clicked again.\r\n     * @return The tile&#39;s letter.\r\n     */\r\n    public char guess()\r\n    {\r\n        loadNewImage(&quot;guessed&quot;);\r\n        removeTileListener();\r\n        return IMAGE_LETTER;\r\n    }\r\n\r\n    /**\r\n     * Loads a new image in the hangman image series.\r\n     * @param suffix The suffix of the image name.\r\n     */\r\n    private void loadNewImage(String suffix)\r\n    {\r\n        path = IMAGE_DIRECTORY + IMAGE_LETTER + &quot;_&quot; + suffix + IMAGE_TYPE;\r\n        image = loadImage(path);\r\n        repaint();\r\n    }\r\n\r\n    /**\r\n     * Remove the tile&#39;s TileListener.\r\n     */\r\n    public void removeTileListener() { removeMouseListener(tileListener); }\r\n\r\n    /**\r\n     * Loads an image from a file.\r\n     * @param imagePath The path to load an image from.\r\n     * @return A BufferedImage object on success, exits on failure.\r\n     */\r\n    private BufferedImage loadImage(String imagePath)\r\n    {\r\n        BufferedImage img = null;\r\n\r\n        try\r\n        {\r\n            img = ImageIO.read(new File(imagePath));\r\n        }\r\n\r\n        catch (IOException ex)\r\n        {\r\n            System.err.println(&quot;loadImage(): Error: Image at &quot;\r\n                    + imagePath + &quot; could not be found&quot;);\r\n            System.exit(1);\r\n        }\r\n        return img;\r\n    }\r\n\r\n    @Override\r\n    protected void paintComponent(Graphics g)\r\n    {\r\n        super.paintComponent(g);\r\n        g.drawImage(image,\r\n                0,\r\n                0,\r\n                PREFERRED_WIDTH,\r\n                PREFERRED_HEIGHT,\r\n                null);\r\n    }\r\n}\r\n```\r\n\r\n\r\ni tried to put the images in different files and that didnt work","title":"java GUI. keep getting loadImage(): Error: Image at images/f.png could not be found","body":"<p>i am working on hangman game project and i think im done with the code but everytime i load the game it gives me this error which i wrote when it cannot load the images file. im not sure if im doing something wrong to load the directory for the images file. here is the code...\nthis is ofcourse one of 5 classes but i want to be sure if im making a mistake loading the directory or is it something else. Also if u have any suggestions on how to improve this code im open to that..</p>\n<pre><code>import java.awt.Dimension;\nimport java.awt.Graphics;\nimport java.awt.event.MouseListener;\nimport java.awt.image.BufferedImage;\nimport java.io.File;\nimport java.io.IOException;\nimport javax.imageio.ImageIO;\nimport javax.swing.JLabel;\n\n/**\n * A tile representing a letter to be guessed during a game.\n * @author Jeff A.\n */\npublic class letterBlocks extends JLabel\n{\n    /**\n     * Add a TileListener\n     * @param l The MouseListener to attach as a TileListener\n     */\n    public void addTileListener(MouseListener l)\n    {\n        tileListener = l;\n        addMouseListener(tileListener);\n    }\n    /**\n     * The directory containing the letter images.\n     */\n    private final String IMAGE_DIRECTORY;\n\n    /**\n     * The type of image (.jpg, .png, etc. to include the period).\n     */\n    private final String IMAGE_TYPE;\n\n    /**\n     * The images of the letters in the window.\n     */\n    private final char IMAGE_LETTER;\n    /**\n     * The preferred width of the tiles.\n     */\n    private final int PREFERRED_WIDTH;\n\n    /**\n     * The preferred height of the tiles.\n     */\n    private final int PREFERRED_HEIGHT;\n\n    /**\n     * The current path of the current image.\n     */\n    private String path;\n\n    /**\n     * The current image being displayed.\n     */\n    private BufferedImage image;\n\n    /**\n     * A custom MouseListener from the GameBoard class to change the tiles on\n     * a click.\n     */\n    private MouseListener tileListener;\n\n    /**\n     * The default constructor.\n     */\n    public letterBlocks() { this('A', &quot;C:\\\\Users\\\\omare\\\\Dropbox\\\\My PC (LAPTOP-AGJUFI2M)\\\\Desktop\\\\Images&quot;, &quot;.png&quot;); }\n\n    /**\n     * Creates a new LetterTile given the letter to be displayed, the directory\n     * of the letter image series, and the image type.\n     * @param imageLetter The letter to be displayed on the tile.\n     * @param imageDirectory The directory holding the letter images.\n     * @param imageType The type of the letter images.\n     */\n    public letterBlocks(char imageLetter, String imageDirectory, String imageType)\n    {\n        IMAGE_LETTER = imageLetter;\n        IMAGE_DIRECTORY = imageDirectory;\n        IMAGE_TYPE = imageType;\n\n        PREFERRED_WIDTH = PREFERRED_HEIGHT = 50;\n\n        setPreferredSize(new Dimension(PREFERRED_WIDTH, PREFERRED_HEIGHT));\n        path = IMAGE_DIRECTORY + IMAGE_LETTER + IMAGE_TYPE;\n        image = loadImage(path);\n    }\n\n    /**\n     * Changes the tile's appearance and removes the mouse listener to prevent\n     * the tile from being clicked again.\n     * @return The tile's letter.\n     */\n    public char guess()\n    {\n        loadNewImage(&quot;guessed&quot;);\n        removeTileListener();\n        return IMAGE_LETTER;\n    }\n\n    /**\n     * Loads a new image in the hangman image series.\n     * @param suffix The suffix of the image name.\n     */\n    private void loadNewImage(String suffix)\n    {\n        path = IMAGE_DIRECTORY + IMAGE_LETTER + &quot;_&quot; + suffix + IMAGE_TYPE;\n        image = loadImage(path);\n        repaint();\n    }\n\n    /**\n     * Remove the tile's TileListener.\n     */\n    public void removeTileListener() { removeMouseListener(tileListener); }\n\n    /**\n     * Loads an image from a file.\n     * @param imagePath The path to load an image from.\n     * @return A BufferedImage object on success, exits on failure.\n     */\n    private BufferedImage loadImage(String imagePath)\n    {\n        BufferedImage img = null;\n\n        try\n        {\n            img = ImageIO.read(new File(imagePath));\n        }\n\n        catch (IOException ex)\n        {\n            System.err.println(&quot;loadImage(): Error: Image at &quot;\n                    + imagePath + &quot; could not be found&quot;);\n            System.exit(1);\n        }\n        return img;\n    }\n\n    @Override\n    protected void paintComponent(Graphics g)\n    {\n        super.paintComponent(g);\n        g.drawImage(image,\n                0,\n                0,\n                PREFERRED_WIDTH,\n                PREFERRED_HEIGHT,\n                null);\n    }\n}\n</code></pre>\n<p>i tried to put the images in different files and that didnt work</p>\n"},{"tags":["java","android","string","locale","number-formatting"],"comments":[{"owner":{"account_id":17835,"reputation":303915,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":1,"creation_date":1671720712,"post_id":74890133,"comment_id":132162396,"body_markdown":"So yet another generation of developers re-invents [`MessageFormat`](https://developer.android.com/reference/java/text/MessageFormat). That won&#39;t help you solve the question of &quot;how do I phrase this in russian&quot;, you&#39;ll still need translators for that, but it provides the technical base.","body":"So yet another generation of developers re-invents <a href=\"https://developer.android.com/reference/java/text/MessageFormat\" rel=\"nofollow noreferrer\"><code>MessageFormat</code></a>. That won&#39;t help you solve the question of &quot;how do I phrase this in russian&quot;, you&#39;ll still need translators for that, but it provides the technical base."},{"owner":{"account_id":13113788,"reputation":10080,"user_id":9473786,"display_name":"Tyler V"},"score":1,"creation_date":1671723865,"post_id":74890133,"comment_id":132163621,"body_markdown":"Does this answer your question? [How to use Android quantity strings (plurals)](https://stackoverflow.com/questions/41950952/how-to-use-android-quantity-strings-plurals). Android has a tool for this already - called a &quot;quantity string&quot;. You&#39;d made a version for each locale in that local&#39;s resource XML file that uses the appropriate grammar.","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/41950952/how-to-use-android-quantity-strings-plurals\">How to use Android quantity strings (plurals)</a>. Android has a tool for this already - called a &quot;quantity string&quot;. You&#39;d made a version for each locale in that local&#39;s resource XML file that uses the appropriate grammar."},{"owner":{"account_id":21267548,"reputation":310,"user_id":15647563,"display_name":"K-Galalem"},"score":0,"creation_date":1671724640,"post_id":74890133,"comment_id":132163890,"body_markdown":"Unfortunately , this fails to deal with arabic because I can&#39;t define a way for the `number % 100` condition, and that&#39;s base of my question: How to deal with all (weird) locales","body":"Unfortunately , this fails to deal with arabic because I can&#39;t define a way for the <code>number % 100</code> condition, and that&#39;s base of my question: How to deal with all (weird) locales"}],"owner":{"account_id":21267548,"reputation":310,"user_id":15647563,"display_name":"K-Galalem"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1671724099,"answer_count":0,"score":0,"last_activity_date":1671720488,"creation_date":1671720488,"question_id":74890133,"body_markdown":"I&#39;m working on a native android app (java) which supports different locales: `en, fr, de, es, pt, it, ru, ar`\r\n\r\nI need to display a number of objects to the user\r\n&gt; example: You have 7 days left \r\n\r\nwhat I used to do is provide a double-from translation for the same sentence, One for the singluar form and the other for the plural\r\n```java\r\nprivate static final String SENTENCE_SINGLE = &quot;You have 1 day left&quot;; \r\nprivate static final String SENTENCE_PLURAL = &quot;You have %d days left&quot;; \r\n\r\npublic String stringify(number) {\r\n  if (number &lt; 0)\r\n    return null;\r\n  if (number == 1)\r\n    return SENTENCE_SINGLE;\r\n  return String.format(Locale.ENGLISH, SENTENCE_PLURAL, number);\r\n}\r\n```\r\n\r\nThis works fine with `English` and `French`. But when I&#39;m dealing with `Arabic` for example, I have to consider a sentence for the number 2, and another for every first 10 numbers in each 100th. (Kinda complicated, I know)\r\n\r\nfor refrence\r\n\r\n```java\r\n// The arabic way\r\nprivate static final String SENTENCE_SINGLE = &quot;You have 1 day left&quot;; \r\nprivate static final String SENTENCE_DOUBLE = &quot;You have two-days left&quot;; \r\nprivate static final String SENTENCE_PLURAL = &quot;You have %d days left&quot;;  \r\nprivate static final String SENTENCE_PLURAL_FIRST_10 = &quot;You have %d special-way-day left&quot;; \r\n\r\npublic String stringify(number) {\r\n  if (number &lt; 0)\r\n    return null;\r\n  if (number == 1)\r\n    return SENTENCE_SINGLE;\r\n  if (number == 2)\r\n    return SENTENCE_DOUBLE;\r\n  if (number % 100 &lt;= 10 &amp;&amp; number % 100 &gt;= 2)\r\n    return String.format(Locale.ENGLISH, SENTENCE_PLURAL_FIRST_10, number);\r\n  return String.format(Locale.ENGLISH, SENTENCE_PLURAL, number);\r\n}\r\n```\r\nI should have a unified function for all locales. I still can work with this method, even though I will be using redundant sentences for simple locales like\r\n```java\r\n// for English\r\nprivate static final String SENTENCE_SINGLE = &quot;You have 1 day left&quot;; \r\nprivate static final String SENTENCE_DOUBLE = &quot;You have 2 days left&quot;; \r\nprivate static final String SENTENCE_PLURAL = &quot;You have %d days left&quot;;  \r\nprivate static final String SENTENCE_PLURAL_FIRST_10 = &quot;You have %d days left&quot;; \r\n```\r\n\r\nThe problem is I have no Idea how the grammar in the other languages work ***(de|German, es|Spanish, pt|Portugese, it|Italian, ru|Russian)***, I&#39;m mostly working with google translate :)\r\n\r\nIs there an existing library I can use, or can someone explain how numbers work in the other languages,  ","title":"How to stringify quantities/numbers in different locales grammatically correct in android java","body":"<p>I'm working on a native android app (java) which supports different locales: <code>en, fr, de, es, pt, it, ru, ar</code></p>\n<p>I need to display a number of objects to the user</p>\n<blockquote>\n<p>example: You have 7 days left</p>\n</blockquote>\n<p>what I used to do is provide a double-from translation for the same sentence, One for the singluar form and the other for the plural</p>\n<pre class=\"lang-java prettyprint-override\"><code>private static final String SENTENCE_SINGLE = &quot;You have 1 day left&quot;; \nprivate static final String SENTENCE_PLURAL = &quot;You have %d days left&quot;; \n\npublic String stringify(number) {\n  if (number &lt; 0)\n    return null;\n  if (number == 1)\n    return SENTENCE_SINGLE;\n  return String.format(Locale.ENGLISH, SENTENCE_PLURAL, number);\n}\n</code></pre>\n<p>This works fine with <code>English</code> and <code>French</code>. But when I'm dealing with <code>Arabic</code> for example, I have to consider a sentence for the number 2, and another for every first 10 numbers in each 100th. (Kinda complicated, I know)</p>\n<p>for refrence</p>\n<pre class=\"lang-java prettyprint-override\"><code>// The arabic way\nprivate static final String SENTENCE_SINGLE = &quot;You have 1 day left&quot;; \nprivate static final String SENTENCE_DOUBLE = &quot;You have two-days left&quot;; \nprivate static final String SENTENCE_PLURAL = &quot;You have %d days left&quot;;  \nprivate static final String SENTENCE_PLURAL_FIRST_10 = &quot;You have %d special-way-day left&quot;; \n\npublic String stringify(number) {\n  if (number &lt; 0)\n    return null;\n  if (number == 1)\n    return SENTENCE_SINGLE;\n  if (number == 2)\n    return SENTENCE_DOUBLE;\n  if (number % 100 &lt;= 10 &amp;&amp; number % 100 &gt;= 2)\n    return String.format(Locale.ENGLISH, SENTENCE_PLURAL_FIRST_10, number);\n  return String.format(Locale.ENGLISH, SENTENCE_PLURAL, number);\n}\n</code></pre>\n<p>I should have a unified function for all locales. I still can work with this method, even though I will be using redundant sentences for simple locales like</p>\n<pre class=\"lang-java prettyprint-override\"><code>// for English\nprivate static final String SENTENCE_SINGLE = &quot;You have 1 day left&quot;; \nprivate static final String SENTENCE_DOUBLE = &quot;You have 2 days left&quot;; \nprivate static final String SENTENCE_PLURAL = &quot;You have %d days left&quot;;  \nprivate static final String SENTENCE_PLURAL_FIRST_10 = &quot;You have %d days left&quot;; \n</code></pre>\n<p>The problem is I have no Idea how the grammar in the other languages work <em><strong>(de|German, es|Spanish, pt|Portugese, it|Italian, ru|Russian)</strong></em>, I'm mostly working with google translate :)</p>\n<p>Is there an existing library I can use, or can someone explain how numbers work in the other languages,</p>\n"},{"tags":["java","spring-boot","swagger","swagger-ui"],"comments":[{"owner":{"account_id":873767,"reputation":973,"user_id":924036,"display_name":"Kaj Hejer"},"score":0,"creation_date":1671720061,"post_id":74890017,"comment_id":132162164,"body_markdown":"Does it work if you change `public ResponseEntity&lt;?&gt; getAllExampleList(){` to `public ResponseEntity&lt;String&gt; getAllExampleList(){`? Maybe you then also need to change the return value of your `getAllExampleList()`method.","body":"Does it work if you change <code>public ResponseEntity&lt;?&gt; getAllExampleList(){</code> to <code>public ResponseEntity&lt;String&gt; getAllExampleList(){</code>? Maybe you then also need to change the return value of your <code>getAllExampleList()</code>method."}],"owner":{"account_id":17598420,"reputation":1,"user_id":12768907,"display_name":"Ice-men"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":176,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671719900,"creation_date":1671719900,"question_id":74890017,"body_markdown":"I have a problem with the ApiResponse of my REST service. The problem is, within the Swagger UI, the following code doesn&#39;t return me an array of objects, it does return me &quot;{}&quot;. How can I solve this problem?\r\n\r\n```\r\n//GET\r\n\t@ApiOperation(\r\n\t\t\tvalue  = &quot;Display the entire ExampleList&quot;,\r\n\t\t\tnotes  = &quot;Allows viewing of the entire ExampleList in the MongoDB database&quot;,\r\n\t\t\tresponse = ExampleListDTO.class,\r\n\t\t\tresponseContainer = &quot;List&quot;,\r\n\t\t\tproduces = &quot;application/json&quot;\r\n\t\t\t)\r\n\t@ApiResponses(value = {\r\n            @ApiResponse(\r\n            \t\tresponseCode =  &quot;404&quot;,\r\n            \t\tdescription = &quot;Not found - The ValueList was not found&quot;\r\n            \t\t),\r\n            @ApiResponse(\r\n            \t\tresponseCode = &quot;200&quot;,\r\n            \t\tcontent = @Content(\r\n            \t\t\t\tarray = @ArraySchema(\r\n            \t\t\t\t\t\tschema = @Schema(\r\n            \t\t\t\t\t\t\t\timplementation =ExampleListDTO.class\r\n            \t\t\t\t\t\t\t\t)\r\n            \t\t\t\t\t\t)\r\n            \t\t\t\t), \r\n            \t\tdescription = &quot;Successfully retrieved&quot;\r\n            \t\t)\r\n            })\r\n\t@GetMapping(&quot;/exampleList&quot;)\r\n\tpublic ResponseEntity&lt;?&gt; getAllExampleList(){\r\n\t\treturn exampleListService.getAllExampleList();\r\n\t}\r\n```\r\n\r\nI would like it to return this result to me:\r\n\r\n```\r\n[\r\n  {\r\n    &quot;type&quot;: &quot;string&quot;,\r\n    &quot;exampleSet&quot;: [\r\n      &quot;string&quot;\r\n    ]\r\n  }\r\n]\r\n```","title":"How to get a List of items in Swagger (Springfox) in Spring Boot","body":"<p>I have a problem with the ApiResponse of my REST service. The problem is, within the Swagger UI, the following code doesn't return me an array of objects, it does return me &quot;{}&quot;. How can I solve this problem?</p>\n<pre><code>//GET\n    @ApiOperation(\n            value  = &quot;Display the entire ExampleList&quot;,\n            notes  = &quot;Allows viewing of the entire ExampleList in the MongoDB database&quot;,\n            response = ExampleListDTO.class,\n            responseContainer = &quot;List&quot;,\n            produces = &quot;application/json&quot;\n            )\n    @ApiResponses(value = {\n            @ApiResponse(\n                    responseCode =  &quot;404&quot;,\n                    description = &quot;Not found - The ValueList was not found&quot;\n                    ),\n            @ApiResponse(\n                    responseCode = &quot;200&quot;,\n                    content = @Content(\n                            array = @ArraySchema(\n                                    schema = @Schema(\n                                            implementation =ExampleListDTO.class\n                                            )\n                                    )\n                            ), \n                    description = &quot;Successfully retrieved&quot;\n                    )\n            })\n    @GetMapping(&quot;/exampleList&quot;)\n    public ResponseEntity&lt;?&gt; getAllExampleList(){\n        return exampleListService.getAllExampleList();\n    }\n</code></pre>\n<p>I would like it to return this result to me:</p>\n<pre><code>[\n  {\n    &quot;type&quot;: &quot;string&quot;,\n    &quot;exampleSet&quot;: [\n      &quot;string&quot;\n    ]\n  }\n]\n</code></pre>\n"},{"tags":["java",".net-core","ikvm"],"answers":[{"tags":[],"owner":{"account_id":180568,"reputation":1700,"user_id":413967,"accept_rate":29,"display_name":"Jerome Haltom"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1668627659,"creation_date":1668627659,"answer_id":74466273,"question_id":69563707,"body_markdown":"IKVM now supports .NET Core and .NET.\r\n\r\nhttps://github.com/ikvm-revived/ikvm/\r\n\r\nhttps://www.nuget.org/packages/IKVM\r\n\r\n","title":"Calling Java components from dot net core","body":"<p>IKVM now supports .NET Core and .NET.</p>\n<p><a href=\"https://github.com/ikvm-revived/ikvm/\" rel=\"nofollow noreferrer\">https://github.com/ikvm-revived/ikvm/</a></p>\n<p><a href=\"https://www.nuget.org/packages/IKVM\" rel=\"nofollow noreferrer\">https://www.nuget.org/packages/IKVM</a></p>\n"}],"owner":{"account_id":3999276,"reputation":1374,"user_id":3295746,"accept_rate":57,"display_name":"tone"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":159,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74466273,"answer_count":1,"score":1,"last_activity_date":1671719864,"creation_date":1634170598,"question_id":69563707,"body_markdown":"I have a java component in the form of a .jar file that is running via a stand-alone executable in a dot net framework app. The .jar file is a third party component, and rewriting it is not an option - it is maintained, and I want the ability to update the component as needed. That would be too hard if I had to convert this to c#.\r\n\r\nIt&#39;s worked solidly for a couple of years, but it is one of the last applications I have in the old dot net framework. I want to get rid of dot net framework altogether, and move to using dot net core for executing the jar file, or more specifically .NET 5 (or above)\r\n\r\nI was using a free component IKVM from Windward Studios to do this. Some work was done to upgrade that for dot net core, but the project doesn&#39;t look like it&#39;s been continued.\r\n\r\nI&#39;m thinking, surely someone has a need to run java components from within dot net core! Is there some more standard way of doing this now?\r\n\r\nHow do I go about achieving that?","title":"Calling Java components from dot net core","body":"<p>I have a java component in the form of a .jar file that is running via a stand-alone executable in a dot net framework app. The .jar file is a third party component, and rewriting it is not an option - it is maintained, and I want the ability to update the component as needed. That would be too hard if I had to convert this to c#.</p>\n<p>It's worked solidly for a couple of years, but it is one of the last applications I have in the old dot net framework. I want to get rid of dot net framework altogether, and move to using dot net core for executing the jar file, or more specifically .NET 5 (or above)</p>\n<p>I was using a free component IKVM from Windward Studios to do this. Some work was done to upgrade that for dot net core, but the project doesn't look like it's been continued.</p>\n<p>I'm thinking, surely someone has a need to run java components from within dot net core! Is there some more standard way of doing this now?</p>\n<p>How do I go about achieving that?</p>\n"},{"tags":["java","android","kotlin","jvm","smartcard"],"comments":[{"owner":{"account_id":26876598,"reputation":301,"user_id":20457753,"display_name":"providerZ"},"score":0,"creation_date":1671709612,"post_id":74888021,"comment_id":132158865,"body_markdown":"maybe you are using the wrong import for your smart card io, Try to delete the import and import the right one, Perhaps there is more than one kind of smart card  io","body":"maybe you are using the wrong import for your smart card io, Try to delete the import and import the right one, Perhaps there is more than one kind of smart card  io"},{"owner":{"account_id":2126588,"reputation":29,"user_id":1888568,"display_name":"D.K."},"score":0,"creation_date":1671711211,"post_id":74888021,"comment_id":132159309,"body_markdown":"@providerZ,  \nTried to import in different other classes with same result. \nAlso if I create `.java` class instead of `.kt` class so package smartcardio is visible without any problem","body":"@providerZ,   Tried to import in different other classes with same result.  Also if I create <code>.java</code> class instead of <code>.kt</code> class so package smartcardio is visible without any problem"},{"owner":{"account_id":26876598,"reputation":301,"user_id":20457753,"display_name":"providerZ"},"score":0,"creation_date":1671711977,"post_id":74888021,"comment_id":132159539,"body_markdown":"then check the SDKs versions make sure they have the same versions the Gradle and the kotlin","body":"then check the SDKs versions make sure they have the same versions the Gradle and the kotlin"},{"owner":{"account_id":2126588,"reputation":29,"user_id":1888568,"display_name":"D.K."},"score":0,"creation_date":1671712562,"post_id":74888021,"comment_id":132159722,"body_markdown":"@providerZ, versions looks like everywhere pointed the same. JDK 11 and target JVM 8","body":"@providerZ, versions looks like everywhere pointed the same. JDK 11 and target JVM 8"},{"owner":{"account_id":4997462,"reputation":10007,"user_id":4017501,"accept_rate":62,"display_name":"cutiko"},"score":0,"creation_date":1671713631,"post_id":74888021,"comment_id":132160021,"body_markdown":"Please add the gradle dependencies","body":"Please add the gradle dependencies"},{"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1671714400,"post_id":74888021,"comment_id":132160255,"body_markdown":"Please edit your question to convert the image into text in the post, and use a [code block](https://meta.stackoverflow.com/editing-help#code) for any code you have. This will make it easier to answer your question because readers can search the text or copy the code to reproduce the issue.","body":"Please edit your question to convert the image into text in the post, and use a <a href=\"https://meta.stackoverflow.com/editing-help#code\">code block</a> for any code you have. This will make it easier to answer your question because readers can search the text or copy the code to reproduce the issue."},{"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1671714505,"post_id":74888021,"comment_id":132160278,"body_markdown":"Does this answer your question? [How to use javax.smartcardio package on Android?](https://stackoverflow.com/questions/47049308/how-to-use-javax-smartcardio-package-on-android)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/47049308/how-to-use-javax-smartcardio-package-on-android\">How to use javax.smartcardio package on Android?</a>"},{"owner":{"account_id":2126588,"reputation":29,"user_id":1888568,"display_name":"D.K."},"score":0,"creation_date":1671718532,"post_id":74888021,"comment_id":132161605,"body_markdown":"@dan1st\nWill convert to code blocks.\nAs I assume this has nothing to do with Android. I think this is like multiplatform project. And module com.tangem.jvm is for desktop since module com.tangem.sdk.android does not depend on it.","body":"@dan1st Will convert to code blocks. As I assume this has nothing to do with Android. I think this is like multiplatform project. And module com.tangem.jvm is for desktop since module com.tangem.sdk.android does not depend on it."},{"owner":{"account_id":2126588,"reputation":29,"user_id":1888568,"display_name":"D.K."},"score":0,"creation_date":1671718945,"post_id":74888021,"comment_id":132161750,"body_markdown":"@cutiko\nThis is dependencies for com.tangem.jvm module\n`dependencies {  \n    implementation &quot;org.jetbrains.kotlin:kotlin-stdlib:${versions.kotlin}&quot;\n\n    implementation project(&#39;:tangem-sdk-core&#39;)\n\n    implementation &#39;org.jetbrains.kotlinx:kotlinx-coroutines-core:1.3.9&#39;\n    implementation &quot;org.jetbrains.kotlinx:kotlinx-coroutines-jdk8:1.3.9&quot;\n    implementation &quot;com.squareup.sqldelight:sqlite-driver:1.4.3&quot;\n}`","body":"@cutiko This is dependencies for com.tangem.jvm module <code>dependencies {       implementation &quot;org.jetbrains.kotlin:kotlin-stdlib:${versions.kotlin}&quot;      implementation project(&#39;:tangem-sdk-core&#39;)      implementation &#39;org.jetbrains.kotlinx:kotlinx-coroutines-core:1.3.9&#39;     implementation &quot;org.jetbrains.kotlinx:kotlinx-coroutines-jdk8:1.3.9&quot;     implementation &quot;com.squareup.sqldelight:sqlite-driver:1.4.3&quot; }</code>"},{"owner":{"account_id":4997462,"reputation":10007,"user_id":4017501,"accept_rate":62,"display_name":"cutiko"},"score":0,"creation_date":1671719568,"post_id":74888021,"comment_id":132161970,"body_markdown":"Tangem documentation explicitly says to add the dependencies using gradle, why are you adding them as a local project?\n\nhttps://developers.tangem.com/getting-started/android\nhttps://developers.tangem.com/getting-started/jvm","body":"Tangem documentation explicitly says to add the dependencies using gradle, why are you adding them as a local project?  <a href=\"https://developers.tangem.com/getting-started/android\" rel=\"nofollow noreferrer\">developers.tangem.com/getting-started/android</a> <a href=\"https://developers.tangem.com/getting-started/jvm\" rel=\"nofollow noreferrer\">developers.tangem.com/getting-started/jvm</a>"},{"owner":{"account_id":2126588,"reputation":29,"user_id":1888568,"display_name":"D.K."},"score":0,"creation_date":1671719953,"post_id":74888021,"comment_id":132162126,"body_markdown":"@cutico I&#39;m not adding anything. Just pulled sdk project from repository and trying to build. By  that link you posted they say about to add ready compiled sdk to user custom projects, but my intention is to learn source code of their sdk and compile it locally.","body":"@cutico I&#39;m not adding anything. Just pulled sdk project from repository and trying to build. By  that link you posted they say about to add ready compiled sdk to user custom projects, but my intention is to learn source code of their sdk and compile it locally."}],"owner":{"account_id":2126588,"reputation":29,"user_id":1888568,"display_name":"D.K."},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":183,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671719493,"creation_date":1671709298,"question_id":74888021,"body_markdown":"I&#39;m trying to build project written in Kotlin that has classes with references to `javax.smartcardio` package. As build system Gradle is used. And when I try to build system just shows &quot;Unresolved reference&quot; message. `java.smartcardio` module is a part of JDK and I&#39;m using as target JVM version 8 so I think there is no necessity in `module-info.java` files.  \r\n  \r\nI googled a lot and have not found any solution for now. So would appreciate any advice.  \r\nAlso I&#39;m full time C# developer so Java, Kotlin is very new for me.\r\n\r\nLink to source of project that I try to build:  \r\n`https://github.com/tangem/tangem-sdk-android`\r\n\r\nSome screenshots:  \r\n[![enter image description here][1]][1]  \r\n\r\n[![enter image description here][2]][2]  \r\n \r\n[![enter image description here][3]][3]  \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/zYnqz.png\r\n  [2]: https://i.stack.imgur.com/HAIk8.png\r\n  [3]: https://i.stack.imgur.com/BLkg8.png\r\n\r\nThis are the gradle dependencies:\r\n\r\n```\r\ndependencies {\r\n     implementation &quot;org.jetbrains.kotlin:kotlin-stdlib:${versions.kotlin}&quot;\r\n     implementation project(&#39;:tangem-sdk-core&#39;)\r\n     implementation &#39;org.jetbrains.kotlinx:kotlinx-coroutines-core:1.3.9&#39;\r\n     implementation &quot;org.jetbrains.kotlinx:kotlinx-coroutines-jdk8:1.3.9&quot;\r\n     implementation &quot;com.squareup.sqldelight:sqlite-driver:1.4.3&quot; \r\n}\r\n```","title":"Unresolved reference when building Kotlin source code","body":"<p>I'm trying to build project written in Kotlin that has classes with references to <code>javax.smartcardio</code> package. As build system Gradle is used. And when I try to build system just shows &quot;Unresolved reference&quot; message. <code>java.smartcardio</code> module is a part of JDK and I'm using as target JVM version 8 so I think there is no necessity in <code>module-info.java</code> files.</p>\n<p>I googled a lot and have not found any solution for now. So would appreciate any advice.<br />\nAlso I'm full time C# developer so Java, Kotlin is very new for me.</p>\n<p>Link to source of project that I try to build:<br />\n<code>https://github.com/tangem/tangem-sdk-android</code></p>\n<p>Some screenshots:<br />\n<a href=\"https://i.stack.imgur.com/zYnqz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zYnqz.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/HAIk8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HAIk8.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/BLkg8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BLkg8.png\" alt=\"enter image description here\" /></a></p>\n<p>This are the gradle dependencies:</p>\n<pre><code>dependencies {\n     implementation &quot;org.jetbrains.kotlin:kotlin-stdlib:${versions.kotlin}&quot;\n     implementation project(':tangem-sdk-core')\n     implementation 'org.jetbrains.kotlinx:kotlinx-coroutines-core:1.3.9'\n     implementation &quot;org.jetbrains.kotlinx:kotlinx-coroutines-jdk8:1.3.9&quot;\n     implementation &quot;com.squareup.sqldelight:sqlite-driver:1.4.3&quot; \n}\n</code></pre>\n"},{"tags":["python","java","powershell","kerberos","rundeck"],"comments":[{"owner":{"account_id":10794194,"reputation":848,"user_id":7940557,"display_name":"John R Smith"},"score":0,"creation_date":1671414474,"post_id":74831001,"comment_id":132087861,"body_markdown":"&quot;However, now I want to use a domain account, rundeck@MANAGEMENT.CORP&quot;.  Maybe I&#39;m missing something.  But how do you expect it to work when the SPNs are linked to the computer account, rather than the domain user account?","body":"&quot;However, now I want to use a domain account, rundeck@MANAGEMENT.CORP&quot;.  Maybe I&#39;m missing something.  But how do you expect it to work when the SPNs are linked to the computer account, rather than the domain user account?"},{"owner":{"account_id":20633931,"reputation":53,"user_id":15218259,"display_name":"Roger McCarrick"},"score":0,"creation_date":1671424909,"post_id":74831001,"comment_id":132089068,"body_markdown":"John, you may not be missing something, I certainly am missing something. I do not know anything about SPNs and so I don&#39;t know about what account they are linked to. Do you know how I can rectify the issue and have SPNs registered to the correct account? Thanks very much.","body":"John, you may not be missing something, I certainly am missing something. I do not know anything about SPNs and so I don&#39;t know about what account they are linked to. Do you know how I can rectify the issue and have SPNs registered to the correct account? Thanks very much."},{"owner":{"account_id":14433269,"reputation":3831,"user_id":10426011,"display_name":"MegaDrive68k"},"score":0,"creation_date":1671453485,"post_id":74831001,"comment_id":132095475,"body_markdown":"Could you try with the &quot;new&quot;  Pywinrm plugin instead of the old and unsupported Overthere WinRM? Overthere WInRM is no longer maintained anymore, take a look at this: https://github.com/rundeck-plugins/rundeck-winrm-plugin#using-kerberos-authentication","body":"Could you try with the &quot;new&quot;  Pywinrm plugin instead of the old and unsupported Overthere WinRM? Overthere WInRM is no longer maintained anymore, take a look at this: <a href=\"https://github.com/rundeck-plugins/rundeck-winrm-plugin#using-kerberos-authentication\" rel=\"nofollow noreferrer\">github.com/rundeck-plugins/&hellip;</a>"},{"owner":{"account_id":10794194,"reputation":848,"user_id":7940557,"display_name":"John R Smith"},"score":0,"creation_date":1671459599,"post_id":74831001,"comment_id":132097424,"body_markdown":"Hmmm...this would be a whole project to troubleshoot.  There&#39;s could be any number of multiple things wrong in this case.  Not really sure how I can be of further help.","body":"Hmmm...this would be a whole project to troubleshoot.  There&#39;s could be any number of multiple things wrong in this case.  Not really sure how I can be of further help."},{"owner":{"account_id":20633931,"reputation":53,"user_id":15218259,"display_name":"Roger McCarrick"},"score":0,"creation_date":1671460824,"post_id":74831001,"comment_id":132097872,"body_markdown":"MagaDrive68k it seems winrm plugin is the one I have, rundeck-winrm-plugin-1.3.8.jar.","body":"MagaDrive68k it seems winrm plugin is the one I have, rundeck-winrm-plugin-1.3.8.jar."},{"owner":{"account_id":20633931,"reputation":53,"user_id":15218259,"display_name":"Roger McCarrick"},"score":0,"creation_date":1671460893,"post_id":74831001,"comment_id":132097896,"body_markdown":"John you pointed at the SPNs, so I think the thing to do it remove them and re-add them correctly. I just don&#39;t know how.","body":"John you pointed at the SPNs, so I think the thing to do it remove them and re-add them correctly. I just don&#39;t know how."},{"owner":{"account_id":14433269,"reputation":3831,"user_id":10426011,"display_name":"MegaDrive68k"},"score":0,"creation_date":1671465279,"post_id":74831001,"comment_id":132099467,"body_markdown":"Rundeck 4.8 includes the pywinrm plugin out of the box (py-winrm-plugin-2.1.0.zip). That&#39;s an upgraded Rundeck instance that includes the old overthere winrm plugin.","body":"Rundeck 4.8 includes the pywinrm plugin out of the box (py-winrm-plugin-2.1.0.zip). That&#39;s an upgraded Rundeck instance that includes the old overthere winrm plugin."},{"owner":{"account_id":20633931,"reputation":53,"user_id":15218259,"display_name":"Roger McCarrick"},"score":0,"creation_date":1671466852,"post_id":74831001,"comment_id":132100014,"body_markdown":"Ok.. so I was using the newer version first, where in the Rundeck gui I choose &quot;WinRM Node Executor Python&quot; as the default node executor. (I moved rundeck-winrm-plugin-1.3.8.jar out of the libtext folder and restarted the rundeck service). I&#39;m back to the original error &#39;Server not found in Kerberos database&#39;. So this is perhaps related to the SPNs not associated to the domain account. When I use the local computer account and basic auth, it works. So I&#39;m back to how do I get the correct SPN ? Thanks","body":"Ok.. so I was using the newer version first, where in the Rundeck gui I choose &quot;WinRM Node Executor Python&quot; as the default node executor. (I moved rundeck-winrm-plugin-1.3.8.jar out of the libtext folder and restarted the rundeck service). I&#39;m back to the original error &#39;Server not found in Kerberos database&#39;. So this is perhaps related to the SPNs not associated to the domain account. When I use the local computer account and basic auth, it works. So I&#39;m back to how do I get the correct SPN ? Thanks"},{"owner":{"account_id":10794194,"reputation":848,"user_id":7940557,"display_name":"John R Smith"},"score":0,"creation_date":1671478786,"post_id":74831001,"comment_id":132103820,"body_markdown":"&#39;Server not found in Kerberos database&#39; means you are using a wrong SPN.  Give me a few to look at this some more.","body":"&#39;Server not found in Kerberos database&#39; means you are using a wrong SPN.  Give me a few to look at this some more."},{"owner":{"account_id":10794194,"reputation":848,"user_id":7940557,"display_name":"John R Smith"},"score":0,"creation_date":1671480596,"post_id":74831001,"comment_id":132104288,"body_markdown":"Have your admin run this then try it again:  setspn -S  HTTP/NYMGMTRDNODE01.MANAGEMENT.CORP:5985 rundeck","body":"Have your admin run this then try it again:  setspn -S  HTTP/NYMGMTRDNODE01.MANAGEMENT.CORP:5985 rundeck"},{"owner":{"account_id":20633931,"reputation":53,"user_id":15218259,"display_name":"Roger McCarrick"},"score":0,"creation_date":1671487664,"post_id":74831001,"comment_id":132106266,"body_markdown":"Ok I got my admin to add &quot;setspn -A WSMAN/NYMGMTRDNODE01:5985 MANAGEMENT\\srv-rundeck&quot; .. and it works. thanks","body":"Ok I got my admin to add &quot;setspn -A WSMAN/NYMGMTRDNODE01:5985 MANAGEMENT\\srv-rundeck&quot; .. and it works. thanks"},{"owner":{"account_id":10794194,"reputation":848,"user_id":7940557,"display_name":"John R Smith"},"score":0,"creation_date":1671489274,"post_id":74831001,"comment_id":132106631,"body_markdown":"I just turned my comment into an Answer, so this Question can be properly signposted.","body":"I just turned my comment into an Answer, so this Question can be properly signposted."}],"answers":[{"tags":[],"owner":{"account_id":10794194,"reputation":848,"user_id":7940557,"display_name":"John R Smith"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1671489303,"creation_date":1671489303,"answer_id":74856725,"question_id":74831001,"body_markdown":"Have your admin run this then try it again: \r\n\r\n    setspn -S HTTP/NYMGMTRDNODE01.MANAGEMENT.CORP:5985 rundeck","title":"Rundeck Node Authentication with domain account","body":"<p>Have your admin run this then try it again:</p>\n<pre><code>setspn -S HTTP/NYMGMTRDNODE01.MANAGEMENT.CORP:5985 rundeck\n</code></pre>\n"},{"comments":[{"owner":{"account_id":16597346,"reputation":600,"user_id":11993925,"display_name":"Muneeb Ahmad Khurram"},"score":0,"creation_date":1671810369,"post_id":74889902,"comment_id":132181827,"body_markdown":"Hey, Roger try to comment this to John, instead that we he gets a notification tagging him.","body":"Hey, Roger try to comment this to John, instead that we he gets a notification tagging him."}],"tags":[],"owner":{"account_id":20633931,"reputation":53,"user_id":15218259,"display_name":"Roger McCarrick"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671719277,"creation_date":1671719277,"answer_id":74889902,"question_id":74831001,"body_markdown":"Actually John I misread you&#39;re answer.\r\nWhat I did was:\r\n\r\n```\r\nsetspn -A WSMAN/NYMGMTRDNODE01:5985 MANAGEMENT\\srv-rundeck\r\n```\r\n\r\nThanks\r\n","title":"Rundeck Node Authentication with domain account","body":"<p>Actually John I misread you're answer.\nWhat I did was:</p>\n<pre><code>setspn -A WSMAN/NYMGMTRDNODE01:5985 MANAGEMENT\\srv-rundeck\n</code></pre>\n<p>Thanks</p>\n"}],"owner":{"account_id":20633931,"reputation":53,"user_id":15218259,"display_name":"Roger McCarrick"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":520,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74856725,"answer_count":2,"score":0,"last_activity_date":1671719277,"creation_date":1671237067,"question_id":74831001,"body_markdown":"I have installed Rundeck 4.8.0 on Redhat 9.\r\nI have a Windows 2022 Server node.\r\nI have a local account on the node called rundeck and its in the Administrators group.\r\nIn Rundeck key storage, I made a password key, with the password for the local rundeck account.\r\nIn my project I have a yaml file pointing to the node with the rundeck username.\r\nThat works, I can run jobs that call powershell scripts on the node.\r\n\r\n\r\nHowever, now I want to use a domain account, rundeck@MANAGEMENT.CORP\r\n\r\nI have installed necessary apps:\r\n yum install gcc python-devel krb5-devel krb5-workstation python-devel python3-devel\r\n\r\nIn My Project config, under Default Node Executor, I first tried to use the built in &quot;WinRM Node Executor Python&quot;\r\n\r\n\r\n```\r\nInterpreter - Python3\r\nAuthentication - Kerberos\r\nusername - rundeck@MANAGEMENT.CORP\r\nPassword - path to key store\r\nProtocol - http\r\nshell - powershell\r\nkrb5C Config file - /etc/krb5.conf\r\n```\r\n\r\nmy /etc/krb5.conf \r\n```\r\n[libdefaults]\r\n    dns_lookup_realm = false\r\n    dns_lookup_kdc = false\r\n    ticket_lifetime = 24h\r\n    renew_lifetime = 7d\r\n    forwardable = true\r\n    rdns = false\r\n    pkinit_anchors = FILE:/etc/pki/tls/certs/ca-bundle.crt\r\n    spake_preauth_groups = edwards25519\r\n    dns_canonicalize_hostname = fallback\r\n    qualify_shortname = &quot;&quot;\r\n    default_ccache_name = KEYRING:persistent:%{uid}\r\nudp_preference_limit = 0\r\ndefault_realm = MANAGEMENT.CORP\r\n\r\n[realms]\r\n  MANAGEMENT.CORP = {\r\n     kdc = NYMGMTDC01.management.corp\r\n     admin_server = NYMGMTDC01.management.corp\r\n     default_domain = MANAGEMENT.CORP\r\n}\r\n\r\n[domain_realm]\r\n  .management.corp = MANAGEMWNT.CORP\r\n  management.corp = MANAGEMWNT.CORP\r\n```\r\n\r\nOn the windows node the winrm config looks like this\r\n```\r\nwinrm get winrm/config\r\nConfig\r\n    MaxEnvelopeSizekb = 500\r\n    MaxTimeoutms = 60000\r\n    MaxBatchItems = 32000\r\n    MaxProviderRequests = 4294967295\r\n    Client\r\n        NetworkDelayms = 5000\r\n        URLPrefix = wsman\r\n        AllowUnencrypted = true\r\n        Auth\r\n            Basic = true\r\n            Digest = true\r\n            Kerberos = true\r\n            Negotiate = true\r\n            Certificate = true\r\n            CredSSP = false\r\n        DefaultPorts\r\n            HTTP = 5985\r\n            HTTPS = 5986\r\n        TrustedHosts\r\n    Service\r\n        RootSDDL = O:NSG:BAD:P(A;;GA;;;BA)(A;;GR;;;IU)S:P(AU;FA;GA;;;WD)(AU;SA;GXGW;;;WD)\r\n        MaxConcurrentOperations = 4294967295\r\n        MaxConcurrentOperationsPerUser = 1500\r\n        EnumerationTimeoutms = 240000\r\n        MaxConnections = 300\r\n        MaxPacketRetrievalTimeSeconds = 120\r\n        AllowUnencrypted = true\r\n        Auth\r\n            Basic = true\r\n            Kerberos = true\r\n            Negotiate = true\r\n            Certificate = false\r\n            CredSSP = false\r\n            CbtHardeningLevel = Relaxed\r\n        DefaultPorts\r\n            HTTP = 5985\r\n            HTTPS = 5986\r\n        IPv4Filter = *\r\n        IPv6Filter = *\r\n        EnableCompatibilityHttpListener = false\r\n        EnableCompatibilityHttpsListener = false\r\n        CertificateThumbprint\r\n        AllowRemoteAccess = true\r\n    Winrs\r\n        AllowRemoteShellAccess = true\r\n        IdleTimeout = 7200000\r\n        MaxConcurrentUsers = 2147483647\r\n        MaxShellRunTime = 2147483647\r\n        MaxProcessesPerShell = 2147483647\r\n        MaxMemoryPerShellMB = 1024\r\n        MaxShellsPerUser = 2147483647\r\n```\r\n\r\nWhen I test I the node I get this error:\r\n```\r\n[ERROR  ]  generate_request_header(): authGSSClientStep() failed: (kerberos_.py:257)[winrm.vendor.requests_kerberos.kerberos_]\r\nTraceback (most recent call last):\r\n  File &quot;/usr/local/lib/python3.9/site-packages/winrm/vendor/requests_kerberos/kerberos_.py&quot;, line 245, in generate_request_header\r\n    result = kerberos.authGSSClientStep(self.context[host],\r\nkerberos.GSSError: ((&#39;Unspecified GSS failure.  Minor code may provide more information&#39;, 851968), (&#39;Server not found in Kerberos database&#39;, -1765328377))\r\n[ERROR  ]  ((&#39;Unspecified GSS failure.  Minor code may provide more information&#39;, 851968), (&#39;Server not found in Kerberos database&#39;, -1765328377)) (kerberos_.py:259)[winrm.vendor.requests_kerberos.kerberos_]\r\n```\r\n\r\nFrom my googling around, this points to a lack of SPN, but the node&#39;s SPNs look fine.\r\n```\r\nsetspn -L NYMGMTRDNODE01\r\nRegistered ServicePrincipalNames for CN=NYMGMTRDNODE01,OU=Servers1,OU=Servers,OU=Management,DC=management,DC=corp:\r\n        WSMAN/NYMGMTRDNODE01.management.corp:5985\r\n        TERMSRV/NYMGMTRDNODE01.management.corp\r\n        WSMAN/NYMGMTRDNODE01.management.corp\r\n        RestrictedKrbHost/NYMGMTRDNODE01.management.corp\r\n        HOST/NYMGMTRDNODE01.management.corp\r\n        TERMSRV/NYMGMTRDNODE01\r\n        WSMAN/NYMGMTRDNODE01\r\n        RestrictedKrbHost/NYMGMTRDNODE01\r\n        HOST/NYMGMTRDNODE01\r\n```\r\nI even had our admin add &quot;WSMAN/NYMGMTRDNODE01.management.corp:5985&quot; incase the port wasnt being specified.\r\nAlso on the node itself I tested the winrm connection.\r\n\r\n```\r\nwinrm identify -r:http://NYMGMTRDNODE01.management.corp:5985 -auth:kerberos -u:rundeck@MANAGEMENT.CORP -p:PASSWORD -encoding:utf-8\r\n\r\nIdentifyResponse\r\n    ProtocolVersion = http://schemas.dmtf.org/wbem/wsman/1/wsman.xsd\r\n    ProductVendor = Microsoft Corporation\r\n    ProductVersion = OS: 10.0.20348 SP: 0.0 Stack: 3.0\r\n    SecurityProfiles\r\n        SecurityProfileName = http://schemas.dmtf.org/wbem/wsman/1/wsman/secprofile/http/basic, http://schemas.dmtf.org/wbem/wsman/1/wsman/secprofile/http/spnego-kerberos\r\n```\r\n\r\nSo next I tried the Overthere WinRm plugin, rundeck-winrm-plugin-1.3.8.jar\r\nI created a resources.xml  file :\r\n\r\n```\r\n&lt;node name=&quot;NYMGMTRDNODE01&quot;\r\ndescription=&quot;Windows node&quot;\r\ntags=&quot;Windows&quot;\r\nhostname=&quot;NYMGMTRDNODE01.MANAGEMENT.CORP&quot;\r\nusername=&quot;rundeck&quot;\r\nosFamily=&quot;Windows&quot;\r\nosName=&quot;Microsoft Windows Server 2022Standard&quot;\r\nosArch=&quot;amd64&quot;\r\nnode-executor=&quot;overthere-winrm&quot;\r\nwinrm-auth-type=&quot;kerberos&quot;\r\nwinrm-protocol=&quot;http&quot;\r\nwinrm-cmd=&quot;Powershell&quot;\r\nwinrm-kerberos-debug=&quot;true&quot;\r\nwinrm-domain=&quot;MANAGEMENT.CORP&quot;\r\nwinrm-port=&quot;5985&quot;\r\nwinrm-timeout=&quot;PT28800.000S&quot;\r\nwinrm-connection-timeout=&quot;28800000&quot;\r\nconnectionType=&quot;WINRM_NATIVE&quot;\r\nwinrm-password-storage-path=&quot;keys/NYMGMTRDNODE01.password&quot;/&gt;\r\n```\r\n\r\nWhen I test this node, the debug shows this:\r\n```\r\nDebug is  true storeKey false useTicketCache false useKeyTab false doNotPrompt false ticketCache is null isInitiator true KeyTab is null refreshKrb5Config is true principal is null tryFirstPass is false useFirstPass is false storePass is false clearPass is false\r\nRefreshing Kerberos configuration\r\n\t\t[Krb5LoginModule] user entered username: srv-rundeck@MANAGEMENT.CORP\r\nprincipal is srv-rundeck@MANAGEMENT.CORP\r\nCommit Succeeded\r\n```\r\nand then the error :\r\n\r\n```\r\n[overthere-winrm:NYMGMTRDNODE01.MANAGEMENT.CORP] failed: WinRM Error: Unexpected HTTP response on http://NYMGMTRDNODE01.MANAGEMENT.CORP:5985/wsman:   (401)\r\nFailed: WinRMProtocolError: WinRM Error: Unexpected HTTP response on http://NYMGMTRDNODE01.MANAGEMENT.CORP:5985/wsman:   (401)\r\nExecution failed: 106 in project Staging-Windows: [Workflow result: , step failures: {1=Dispatch failed on 1 nodes: [NYMGMTRDNODE01: WinRMProtocolError: WinRM Error: Unexpected HTTP response on http://NYMGMTRDNODE01.MANAGEMENT.CORP:5985/wsman:   (401) + {dataContext=MultiDataContextImpl(map={}, base=null)} ]}, Node failures: {NYMGMTRDNODE01=[WinRMProtocolError: WinRM Error: Unexpected HTTP response on http://NYMGMTRDNODE01.MANAGEMENT.CORP:5985/wsman:   (401) + {dataContext=MultiDataContextImpl(map={}, base=null)} ]}, status: failed]\r\n```\r\n\r\nI have found a lot of posts with the &quot;Unexpected HTTP response (401)&quot; issue.\r\nI have tried to follow all the fixes, some people seem to have no resolution and some do.\r\n\r\nI&#39;ve on been this for 48 hours straight. So any ideas, any help would be greatly appreciated. \r\n\r\nthanks you.\r\n","title":"Rundeck Node Authentication with domain account","body":"<p>I have installed Rundeck 4.8.0 on Redhat 9.\nI have a Windows 2022 Server node.\nI have a local account on the node called rundeck and its in the Administrators group.\nIn Rundeck key storage, I made a password key, with the password for the local rundeck account.\nIn my project I have a yaml file pointing to the node with the rundeck username.\nThat works, I can run jobs that call powershell scripts on the node.</p>\n<p>However, now I want to use a domain account, rundeck@MANAGEMENT.CORP</p>\n<p>I have installed necessary apps:\nyum install gcc python-devel krb5-devel krb5-workstation python-devel python3-devel</p>\n<p>In My Project config, under Default Node Executor, I first tried to use the built in &quot;WinRM Node Executor Python&quot;</p>\n<pre><code>Interpreter - Python3\nAuthentication - Kerberos\nusername - rundeck@MANAGEMENT.CORP\nPassword - path to key store\nProtocol - http\nshell - powershell\nkrb5C Config file - /etc/krb5.conf\n</code></pre>\n<p>my /etc/krb5.conf</p>\n<pre><code>[libdefaults]\n    dns_lookup_realm = false\n    dns_lookup_kdc = false\n    ticket_lifetime = 24h\n    renew_lifetime = 7d\n    forwardable = true\n    rdns = false\n    pkinit_anchors = FILE:/etc/pki/tls/certs/ca-bundle.crt\n    spake_preauth_groups = edwards25519\n    dns_canonicalize_hostname = fallback\n    qualify_shortname = &quot;&quot;\n    default_ccache_name = KEYRING:persistent:%{uid}\nudp_preference_limit = 0\ndefault_realm = MANAGEMENT.CORP\n\n[realms]\n  MANAGEMENT.CORP = {\n     kdc = NYMGMTDC01.management.corp\n     admin_server = NYMGMTDC01.management.corp\n     default_domain = MANAGEMENT.CORP\n}\n\n[domain_realm]\n  .management.corp = MANAGEMWNT.CORP\n  management.corp = MANAGEMWNT.CORP\n</code></pre>\n<p>On the windows node the winrm config looks like this</p>\n<pre><code>winrm get winrm/config\nConfig\n    MaxEnvelopeSizekb = 500\n    MaxTimeoutms = 60000\n    MaxBatchItems = 32000\n    MaxProviderRequests = 4294967295\n    Client\n        NetworkDelayms = 5000\n        URLPrefix = wsman\n        AllowUnencrypted = true\n        Auth\n            Basic = true\n            Digest = true\n            Kerberos = true\n            Negotiate = true\n            Certificate = true\n            CredSSP = false\n        DefaultPorts\n            HTTP = 5985\n            HTTPS = 5986\n        TrustedHosts\n    Service\n        RootSDDL = O:NSG:BAD:P(A;;GA;;;BA)(A;;GR;;;IU)S:P(AU;FA;GA;;;WD)(AU;SA;GXGW;;;WD)\n        MaxConcurrentOperations = 4294967295\n        MaxConcurrentOperationsPerUser = 1500\n        EnumerationTimeoutms = 240000\n        MaxConnections = 300\n        MaxPacketRetrievalTimeSeconds = 120\n        AllowUnencrypted = true\n        Auth\n            Basic = true\n            Kerberos = true\n            Negotiate = true\n            Certificate = false\n            CredSSP = false\n            CbtHardeningLevel = Relaxed\n        DefaultPorts\n            HTTP = 5985\n            HTTPS = 5986\n        IPv4Filter = *\n        IPv6Filter = *\n        EnableCompatibilityHttpListener = false\n        EnableCompatibilityHttpsListener = false\n        CertificateThumbprint\n        AllowRemoteAccess = true\n    Winrs\n        AllowRemoteShellAccess = true\n        IdleTimeout = 7200000\n        MaxConcurrentUsers = 2147483647\n        MaxShellRunTime = 2147483647\n        MaxProcessesPerShell = 2147483647\n        MaxMemoryPerShellMB = 1024\n        MaxShellsPerUser = 2147483647\n</code></pre>\n<p>When I test I the node I get this error:</p>\n<pre><code>[ERROR  ]  generate_request_header(): authGSSClientStep() failed: (kerberos_.py:257)[winrm.vendor.requests_kerberos.kerberos_]\nTraceback (most recent call last):\n  File &quot;/usr/local/lib/python3.9/site-packages/winrm/vendor/requests_kerberos/kerberos_.py&quot;, line 245, in generate_request_header\n    result = kerberos.authGSSClientStep(self.context[host],\nkerberos.GSSError: (('Unspecified GSS failure.  Minor code may provide more information', 851968), ('Server not found in Kerberos database', -1765328377))\n[ERROR  ]  (('Unspecified GSS failure.  Minor code may provide more information', 851968), ('Server not found in Kerberos database', -1765328377)) (kerberos_.py:259)[winrm.vendor.requests_kerberos.kerberos_]\n</code></pre>\n<p>From my googling around, this points to a lack of SPN, but the node's SPNs look fine.</p>\n<pre><code>setspn -L NYMGMTRDNODE01\nRegistered ServicePrincipalNames for CN=NYMGMTRDNODE01,OU=Servers1,OU=Servers,OU=Management,DC=management,DC=corp:\n        WSMAN/NYMGMTRDNODE01.management.corp:5985\n        TERMSRV/NYMGMTRDNODE01.management.corp\n        WSMAN/NYMGMTRDNODE01.management.corp\n        RestrictedKrbHost/NYMGMTRDNODE01.management.corp\n        HOST/NYMGMTRDNODE01.management.corp\n        TERMSRV/NYMGMTRDNODE01\n        WSMAN/NYMGMTRDNODE01\n        RestrictedKrbHost/NYMGMTRDNODE01\n        HOST/NYMGMTRDNODE01\n</code></pre>\n<p>I even had our admin add &quot;WSMAN/NYMGMTRDNODE01.management.corp:5985&quot; incase the port wasnt being specified.\nAlso on the node itself I tested the winrm connection.</p>\n<pre><code>winrm identify -r:http://NYMGMTRDNODE01.management.corp:5985 -auth:kerberos -u:rundeck@MANAGEMENT.CORP -p:PASSWORD -encoding:utf-8\n\nIdentifyResponse\n    ProtocolVersion = http://schemas.dmtf.org/wbem/wsman/1/wsman.xsd\n    ProductVendor = Microsoft Corporation\n    ProductVersion = OS: 10.0.20348 SP: 0.0 Stack: 3.0\n    SecurityProfiles\n        SecurityProfileName = http://schemas.dmtf.org/wbem/wsman/1/wsman/secprofile/http/basic, http://schemas.dmtf.org/wbem/wsman/1/wsman/secprofile/http/spnego-kerberos\n</code></pre>\n<p>So next I tried the Overthere WinRm plugin, rundeck-winrm-plugin-1.3.8.jar\nI created a resources.xml  file :</p>\n<pre><code>&lt;node name=&quot;NYMGMTRDNODE01&quot;\ndescription=&quot;Windows node&quot;\ntags=&quot;Windows&quot;\nhostname=&quot;NYMGMTRDNODE01.MANAGEMENT.CORP&quot;\nusername=&quot;rundeck&quot;\nosFamily=&quot;Windows&quot;\nosName=&quot;Microsoft Windows Server 2022Standard&quot;\nosArch=&quot;amd64&quot;\nnode-executor=&quot;overthere-winrm&quot;\nwinrm-auth-type=&quot;kerberos&quot;\nwinrm-protocol=&quot;http&quot;\nwinrm-cmd=&quot;Powershell&quot;\nwinrm-kerberos-debug=&quot;true&quot;\nwinrm-domain=&quot;MANAGEMENT.CORP&quot;\nwinrm-port=&quot;5985&quot;\nwinrm-timeout=&quot;PT28800.000S&quot;\nwinrm-connection-timeout=&quot;28800000&quot;\nconnectionType=&quot;WINRM_NATIVE&quot;\nwinrm-password-storage-path=&quot;keys/NYMGMTRDNODE01.password&quot;/&gt;\n</code></pre>\n<p>When I test this node, the debug shows this:</p>\n<pre><code>Debug is  true storeKey false useTicketCache false useKeyTab false doNotPrompt false ticketCache is null isInitiator true KeyTab is null refreshKrb5Config is true principal is null tryFirstPass is false useFirstPass is false storePass is false clearPass is false\nRefreshing Kerberos configuration\n        [Krb5LoginModule] user entered username: srv-rundeck@MANAGEMENT.CORP\nprincipal is srv-rundeck@MANAGEMENT.CORP\nCommit Succeeded\n</code></pre>\n<p>and then the error :</p>\n<pre><code>[overthere-winrm:NYMGMTRDNODE01.MANAGEMENT.CORP] failed: WinRM Error: Unexpected HTTP response on http://NYMGMTRDNODE01.MANAGEMENT.CORP:5985/wsman:   (401)\nFailed: WinRMProtocolError: WinRM Error: Unexpected HTTP response on http://NYMGMTRDNODE01.MANAGEMENT.CORP:5985/wsman:   (401)\nExecution failed: 106 in project Staging-Windows: [Workflow result: , step failures: {1=Dispatch failed on 1 nodes: [NYMGMTRDNODE01: WinRMProtocolError: WinRM Error: Unexpected HTTP response on http://NYMGMTRDNODE01.MANAGEMENT.CORP:5985/wsman:   (401) + {dataContext=MultiDataContextImpl(map={}, base=null)} ]}, Node failures: {NYMGMTRDNODE01=[WinRMProtocolError: WinRM Error: Unexpected HTTP response on http://NYMGMTRDNODE01.MANAGEMENT.CORP:5985/wsman:   (401) + {dataContext=MultiDataContextImpl(map={}, base=null)} ]}, status: failed]\n</code></pre>\n<p>I have found a lot of posts with the &quot;Unexpected HTTP response (401)&quot; issue.\nI have tried to follow all the fixes, some people seem to have no resolution and some do.</p>\n<p>I've on been this for 48 hours straight. So any ideas, any help would be greatly appreciated.</p>\n<p>thanks you.</p>\n"},{"tags":["java","json"],"comments":[{"owner":{"account_id":682692,"reputation":49061,"user_id":535275,"accept_rate":91,"display_name":"Scott Hunter"},"score":4,"creation_date":1671713086,"post_id":74888668,"comment_id":132159873,"body_markdown":"You forgot to include your attempt to solve this problem.","body":"You forgot to include your attempt to solve this problem."},{"owner":{"account_id":1901420,"reputation":3763,"user_id":1717210,"display_name":"TacheDeChoco"},"score":0,"creation_date":1671713481,"post_id":74888668,"comment_id":132159987,"body_markdown":"Use **JsonPath** to query your json - https://www.baeldung.com/guide-to-jayway-jsonpath","body":"Use <b>JsonPath</b> to query your json - <a href=\"https://www.baeldung.com/guide-to-jayway-jsonpath\" rel=\"nofollow noreferrer\">baeldung.com/guide-to-jayway-jsonpath</a>"}],"answers":[{"comments":[{"owner":{"account_id":22755662,"reputation":85,"user_id":16915156,"display_name":"Garry S"},"score":0,"creation_date":1671716597,"post_id":74889216,"comment_id":132160973,"body_markdown":"getting error when I try to put above function in Java code.","body":"getting error when I try to put above function in Java code."}],"tags":[],"owner":{"account_id":24516834,"reputation":56,"user_id":18430457,"display_name":"Tsimpragakis Vasilis"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1671719243,"creation_date":1671715755,"answer_id":74889216,"question_id":74888668,"body_markdown":"For me, it was easier to map JSONArray to Map&lt;String,Object&gt; and implement functionality there!\r\n\r\nBelow is attached my code on kotlin\r\n\r\n    fun main() {\r\n    val json =\r\n        &quot;[{\\&quot;commandResponse\\&quot;:\\&quot;\\&quot;,\\&quot;errorMessage\\&quot;:\\&quot;harddisk crash not applicable.\\&quot;,\\&quot;name\\&quot;:\\&quot;harddiskcrash\\&quot;,\\&quot;command\\&quot;:\\&quot;harddiskcrash\\&quot;,\\&quot;status\\&quot;:\\&quot;NotApplicable\\&quot;},{\\&quot;commandResponse\\&quot;:\\&quot;\\&quot;,\\&quot;errorMessage\\&quot;:\\&quot;stby-harddisk crash not applicable.\\&quot;,\\&quot;name\\&quot;:\\&quot;stby-harddiskcrash\\&quot;,\\&quot;command\\&quot;:\\&quot;stby-harddiskcrash\\&quot;,\\&quot;status\\&quot;:\\&quot;NotApplicable\\&quot;},{\\&quot;commandResponse\\&quot;:\\&quot;16.0.1\\&quot;,\\&quot;errorMessage\\&quot;:\\&quot;_showconfigall not applicable.\\&quot;,\\&quot;name\\&quot;:\\&quot;show_version\\&quot;,\\&quot;command\\&quot;:\\&quot;show version\\&quot;,\\&quot;status\\&quot;:\\&quot;NotApplicable\\&quot;},{\\&quot;commandResponse\\&quot;:\\&quot;\\&quot;,\\&quot;errorMessage\\&quot;:\\&quot;_showpolicy-map not applicable.\\&quot;,\\&quot;name\\&quot;:\\&quot;_showpolicy-map\\&quot;,\\&quot;command\\&quot;:\\&quot;_showpolicy-map\\&quot;,\\&quot;status\\&quot;:\\&quot;NotApplicable\\&quot;},{\\&quot;commandResponse\\&quot;:\\&quot;\\&quot;,\\&quot;errorMessage\\&quot;:\\&quot;system dirvarlog not applicable.\\&quot;,\\&quot;name\\&quot;:\\&quot;show version log\\&quot;,\\&quot;command\\&quot;:\\&quot;show version log\\&quot;,\\&quot;status\\&quot;:\\&quot;NotApplicable\\&quot;}]&quot;\r\n    val array = JSONParser().parse(json) as JSONArray\r\n    println(findCommandResponseByCommand(&quot;show version&quot;,array))\r\n    }\r\n    \r\n    fun findCommandResponseByCommand(command: String, jsonArray: JSONArray): String {\r\n        val found = jsonArray\r\n            .map { it as Map&lt;String, Any&gt; }\r\n            .find { it[&quot;command&quot;] == command }\r\n        return found?.get(&quot;commandResponse&quot;) as? String ?: &quot;&quot;\r\n    }\r\n\r\nThe output is \r\n\r\n    16.0.1\r\n\r\nAdded java code\r\n\r\n    public class Test {\r\n    public static void main(String[] args) throws ParseException {\r\n        String json =\r\n                &quot;[{\\&quot;commandResponse\\&quot;:\\&quot;\\&quot;,\\&quot;errorMessage\\&quot;:\\&quot;harddisk crash not applicable.\\&quot;,\\&quot;name\\&quot;:\\&quot;harddiskcrash\\&quot;,\\&quot;command\\&quot;:\\&quot;harddiskcrash\\&quot;,\\&quot;status\\&quot;:\\&quot;NotApplicable\\&quot;},{\\&quot;commandResponse\\&quot;:\\&quot;\\&quot;,\\&quot;errorMessage\\&quot;:\\&quot;stby-harddisk crash not applicable.\\&quot;,\\&quot;name\\&quot;:\\&quot;stby-harddiskcrash\\&quot;,\\&quot;command\\&quot;:\\&quot;stby-harddiskcrash\\&quot;,\\&quot;status\\&quot;:\\&quot;NotApplicable\\&quot;},{\\&quot;commandResponse\\&quot;:\\&quot;16.0.1\\&quot;,\\&quot;errorMessage\\&quot;:\\&quot;_showconfigall not applicable.\\&quot;,\\&quot;name\\&quot;:\\&quot;show_version\\&quot;,\\&quot;command\\&quot;:\\&quot;show version\\&quot;,\\&quot;status\\&quot;:\\&quot;NotApplicable\\&quot;},{\\&quot;commandResponse\\&quot;:\\&quot;\\&quot;,\\&quot;errorMessage\\&quot;:\\&quot;_showpolicy-map not applicable.\\&quot;,\\&quot;name\\&quot;:\\&quot;_showpolicy-map\\&quot;,\\&quot;command\\&quot;:\\&quot;_showpolicy-map\\&quot;,\\&quot;status\\&quot;:\\&quot;NotApplicable\\&quot;},{\\&quot;commandResponse\\&quot;:\\&quot;\\&quot;,\\&quot;errorMessage\\&quot;:\\&quot;system dirvarlog not applicable.\\&quot;,\\&quot;name\\&quot;:\\&quot;show version log\\&quot;,\\&quot;command\\&quot;:\\&quot;show version log\\&quot;,\\&quot;status\\&quot;:\\&quot;NotApplicable\\&quot;}]&quot;;\r\n        JSONArray array = (JSONArray) new JSONParser().parse(json) ;\r\n        System.out.println(findCommandResponseByCommand(&quot;show version&quot;,array));\r\n    }\r\n\r\n    private static String findCommandResponseByCommand(String command, JSONArray jsonArray) {\r\n        Optional result = jsonArray.stream()\r\n                .filter(json -&gt;  ((Map&lt;String, Object&gt;) json).get(&quot;command&quot;).equals(command))\r\n                .findAny();\r\n        if(result.isPresent()){\r\n            return ((Map&lt;String, Object&gt;) result.get()).get(&quot;commandResponse&quot;).toString();\r\n        }\r\n        return &quot;&quot;;\r\n    }\r\n    }","title":"How to search/find specific word In JSON Array with java","body":"<p>For me, it was easier to map JSONArray to Map&lt;String,Object&gt; and implement functionality there!</p>\n<p>Below is attached my code on kotlin</p>\n<pre><code>fun main() {\nval json =\n    &quot;[{\\&quot;commandResponse\\&quot;:\\&quot;\\&quot;,\\&quot;errorMessage\\&quot;:\\&quot;harddisk crash not applicable.\\&quot;,\\&quot;name\\&quot;:\\&quot;harddiskcrash\\&quot;,\\&quot;command\\&quot;:\\&quot;harddiskcrash\\&quot;,\\&quot;status\\&quot;:\\&quot;NotApplicable\\&quot;},{\\&quot;commandResponse\\&quot;:\\&quot;\\&quot;,\\&quot;errorMessage\\&quot;:\\&quot;stby-harddisk crash not applicable.\\&quot;,\\&quot;name\\&quot;:\\&quot;stby-harddiskcrash\\&quot;,\\&quot;command\\&quot;:\\&quot;stby-harddiskcrash\\&quot;,\\&quot;status\\&quot;:\\&quot;NotApplicable\\&quot;},{\\&quot;commandResponse\\&quot;:\\&quot;16.0.1\\&quot;,\\&quot;errorMessage\\&quot;:\\&quot;_showconfigall not applicable.\\&quot;,\\&quot;name\\&quot;:\\&quot;show_version\\&quot;,\\&quot;command\\&quot;:\\&quot;show version\\&quot;,\\&quot;status\\&quot;:\\&quot;NotApplicable\\&quot;},{\\&quot;commandResponse\\&quot;:\\&quot;\\&quot;,\\&quot;errorMessage\\&quot;:\\&quot;_showpolicy-map not applicable.\\&quot;,\\&quot;name\\&quot;:\\&quot;_showpolicy-map\\&quot;,\\&quot;command\\&quot;:\\&quot;_showpolicy-map\\&quot;,\\&quot;status\\&quot;:\\&quot;NotApplicable\\&quot;},{\\&quot;commandResponse\\&quot;:\\&quot;\\&quot;,\\&quot;errorMessage\\&quot;:\\&quot;system dirvarlog not applicable.\\&quot;,\\&quot;name\\&quot;:\\&quot;show version log\\&quot;,\\&quot;command\\&quot;:\\&quot;show version log\\&quot;,\\&quot;status\\&quot;:\\&quot;NotApplicable\\&quot;}]&quot;\nval array = JSONParser().parse(json) as JSONArray\nprintln(findCommandResponseByCommand(&quot;show version&quot;,array))\n}\n\nfun findCommandResponseByCommand(command: String, jsonArray: JSONArray): String {\n    val found = jsonArray\n        .map { it as Map&lt;String, Any&gt; }\n        .find { it[&quot;command&quot;] == command }\n    return found?.get(&quot;commandResponse&quot;) as? String ?: &quot;&quot;\n}\n</code></pre>\n<p>The output is</p>\n<pre><code>16.0.1\n</code></pre>\n<p>Added java code</p>\n<pre><code>public class Test {\npublic static void main(String[] args) throws ParseException {\n    String json =\n            &quot;[{\\&quot;commandResponse\\&quot;:\\&quot;\\&quot;,\\&quot;errorMessage\\&quot;:\\&quot;harddisk crash not applicable.\\&quot;,\\&quot;name\\&quot;:\\&quot;harddiskcrash\\&quot;,\\&quot;command\\&quot;:\\&quot;harddiskcrash\\&quot;,\\&quot;status\\&quot;:\\&quot;NotApplicable\\&quot;},{\\&quot;commandResponse\\&quot;:\\&quot;\\&quot;,\\&quot;errorMessage\\&quot;:\\&quot;stby-harddisk crash not applicable.\\&quot;,\\&quot;name\\&quot;:\\&quot;stby-harddiskcrash\\&quot;,\\&quot;command\\&quot;:\\&quot;stby-harddiskcrash\\&quot;,\\&quot;status\\&quot;:\\&quot;NotApplicable\\&quot;},{\\&quot;commandResponse\\&quot;:\\&quot;16.0.1\\&quot;,\\&quot;errorMessage\\&quot;:\\&quot;_showconfigall not applicable.\\&quot;,\\&quot;name\\&quot;:\\&quot;show_version\\&quot;,\\&quot;command\\&quot;:\\&quot;show version\\&quot;,\\&quot;status\\&quot;:\\&quot;NotApplicable\\&quot;},{\\&quot;commandResponse\\&quot;:\\&quot;\\&quot;,\\&quot;errorMessage\\&quot;:\\&quot;_showpolicy-map not applicable.\\&quot;,\\&quot;name\\&quot;:\\&quot;_showpolicy-map\\&quot;,\\&quot;command\\&quot;:\\&quot;_showpolicy-map\\&quot;,\\&quot;status\\&quot;:\\&quot;NotApplicable\\&quot;},{\\&quot;commandResponse\\&quot;:\\&quot;\\&quot;,\\&quot;errorMessage\\&quot;:\\&quot;system dirvarlog not applicable.\\&quot;,\\&quot;name\\&quot;:\\&quot;show version log\\&quot;,\\&quot;command\\&quot;:\\&quot;show version log\\&quot;,\\&quot;status\\&quot;:\\&quot;NotApplicable\\&quot;}]&quot;;\n    JSONArray array = (JSONArray) new JSONParser().parse(json) ;\n    System.out.println(findCommandResponseByCommand(&quot;show version&quot;,array));\n}\n\nprivate static String findCommandResponseByCommand(String command, JSONArray jsonArray) {\n    Optional result = jsonArray.stream()\n            .filter(json -&gt;  ((Map&lt;String, Object&gt;) json).get(&quot;command&quot;).equals(command))\n            .findAny();\n    if(result.isPresent()){\n        return ((Map&lt;String, Object&gt;) result.get()).get(&quot;commandResponse&quot;).toString();\n    }\n    return &quot;&quot;;\n}\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13009011,"reputation":1105,"user_id":9402689,"display_name":"Raymond Choi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671717378,"creation_date":1671717378,"answer_id":74889512,"question_id":74888668,"body_markdown":"You may consider another library _Josson_ to do the job.\r\n\r\nhttps://github.com/octomix/josson\r\n\r\n    Josson commandsData = Josson.fromJsonString(&quot;[{\\&quot;commandResponse\\&quot;:\\&quot;\\&quot;,\\&quot;errorMessage\\&quot;:\\&quot;harddisk crash not applicable.\\&quot;,\\&quot;name\\&quot;:\\&quot;harddiskcrash\\&quot;,\\&quot;command\\&quot;:\\&quot;harddiskcrash\\&quot;,\\&quot;status\\&quot;:\\&quot;NotApplicable\\&quot;},{\\&quot;commandResponse\\&quot;:\\&quot;\\&quot;,\\&quot;errorMessage\\&quot;:\\&quot;stby-harddisk crash not applicable.\\&quot;,\\&quot;name\\&quot;:\\&quot;stby-harddiskcrash\\&quot;,\\&quot;command\\&quot;:\\&quot;stby-harddiskcrash\\&quot;,\\&quot;status\\&quot;:\\&quot;NotApplicable\\&quot;},{\\&quot;commandResponse\\&quot;:\\&quot;16.0.1\\&quot;,\\&quot;errorMessage\\&quot;:\\&quot;_showconfigall not applicable.\\&quot;,\\&quot;name\\&quot;:\\&quot;show_version\\&quot;,\\&quot;command\\&quot;:\\&quot;show version\\&quot;,\\&quot;status\\&quot;:\\&quot;NotApplicable\\&quot;},{\\&quot;commandResponse\\&quot;:\\&quot;\\&quot;,\\&quot;errorMessage\\&quot;:\\&quot;_showpolicy-map not applicable.\\&quot;,\\&quot;name\\&quot;:\\&quot;_showpolicy-map\\&quot;,\\&quot;command\\&quot;:\\&quot;_showpolicy-map\\&quot;,\\&quot;status\\&quot;:\\&quot;NotApplicable\\&quot;},{\\&quot;commandResponse\\&quot;:\\&quot;\\&quot;,\\&quot;errorMessage\\&quot;:\\&quot;system dirvarlog not applicable.\\&quot;,\\&quot;name\\&quot;:\\&quot;show version log\\&quot;,\\&quot;command\\&quot;:\\&quot;show version log\\&quot;,\\&quot;status\\&quot;:\\&quot;NotApplicable\\&quot;}]&quot;);\r\n    String response = commandsData.getString(&quot;[command=&#39;show version&#39;].commandResponse&quot;);\r\n    System.out.println(response);\r\n\r\n__Output__\r\n\r\n    16.0.1","title":"How to search/find specific word In JSON Array with java","body":"<p>You may consider another library <em>Josson</em> to do the job.</p>\n<p><a href=\"https://github.com/octomix/josson\" rel=\"nofollow noreferrer\">https://github.com/octomix/josson</a></p>\n<pre><code>Josson commandsData = Josson.fromJsonString(&quot;[{\\&quot;commandResponse\\&quot;:\\&quot;\\&quot;,\\&quot;errorMessage\\&quot;:\\&quot;harddisk crash not applicable.\\&quot;,\\&quot;name\\&quot;:\\&quot;harddiskcrash\\&quot;,\\&quot;command\\&quot;:\\&quot;harddiskcrash\\&quot;,\\&quot;status\\&quot;:\\&quot;NotApplicable\\&quot;},{\\&quot;commandResponse\\&quot;:\\&quot;\\&quot;,\\&quot;errorMessage\\&quot;:\\&quot;stby-harddisk crash not applicable.\\&quot;,\\&quot;name\\&quot;:\\&quot;stby-harddiskcrash\\&quot;,\\&quot;command\\&quot;:\\&quot;stby-harddiskcrash\\&quot;,\\&quot;status\\&quot;:\\&quot;NotApplicable\\&quot;},{\\&quot;commandResponse\\&quot;:\\&quot;16.0.1\\&quot;,\\&quot;errorMessage\\&quot;:\\&quot;_showconfigall not applicable.\\&quot;,\\&quot;name\\&quot;:\\&quot;show_version\\&quot;,\\&quot;command\\&quot;:\\&quot;show version\\&quot;,\\&quot;status\\&quot;:\\&quot;NotApplicable\\&quot;},{\\&quot;commandResponse\\&quot;:\\&quot;\\&quot;,\\&quot;errorMessage\\&quot;:\\&quot;_showpolicy-map not applicable.\\&quot;,\\&quot;name\\&quot;:\\&quot;_showpolicy-map\\&quot;,\\&quot;command\\&quot;:\\&quot;_showpolicy-map\\&quot;,\\&quot;status\\&quot;:\\&quot;NotApplicable\\&quot;},{\\&quot;commandResponse\\&quot;:\\&quot;\\&quot;,\\&quot;errorMessage\\&quot;:\\&quot;system dirvarlog not applicable.\\&quot;,\\&quot;name\\&quot;:\\&quot;show version log\\&quot;,\\&quot;command\\&quot;:\\&quot;show version log\\&quot;,\\&quot;status\\&quot;:\\&quot;NotApplicable\\&quot;}]&quot;);\nString response = commandsData.getString(&quot;[command='show version'].commandResponse&quot;);\nSystem.out.println(response);\n</code></pre>\n<p><strong>Output</strong></p>\n<pre><code>16.0.1\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1671717817,"creation_date":1671717392,"answer_id":74889516,"question_id":74888668,"body_markdown":"To find the required JSON-object in the array, you need to iterate over array elements and check if it contains the target value (like `&quot;Show Version&quot;`). If the matching object was found, you need to extract the value that corresponds to `&quot;commandResponse&quot;` from it.\r\n\r\nHere&#39;s how it might be implemented using Stream API (`JSONArray` is a subtype of `ArrayList` therefore we can invoke `stream()` on it):\r\n\r\n    @SuppressWarnings(&quot;unchecked&quot;)\r\n    public static String getResponse(JSONArray array, String search) {\r\n        \r\n        return (String) array.stream()\r\n            .filter(jsonObject -&gt; ((JSONObject) jsonObject).values().stream()\r\n                .anyMatch(s1 -&gt; ((String) s1).equalsIgnoreCase(search))\r\n            )\r\n            .map(jsonObject -&gt; ((JSONObject) jsonObject).get(&quot;commandResponse&quot;))\r\n            .findFirst()\r\n            .orElse(&quot;given value doesn&#39;t exist&quot;); // apply other methods like orElseThrow() depending on your needs\r\n    }\r\n\r\n*Usage example:*\r\n\r\n    public static void main(String[] args) throws IOException, ParseException {\r\n        JSONParser parser = new JSONParser();\r\n        String json = &quot;[{\\&quot;commandResponse\\&quot;:\\&quot;\\&quot;,\\&quot;errorMessage\\&quot;:\\&quot;harddisk crash not applicable.\\&quot;,\\&quot;name\\&quot;:\\&quot;harddiskcrash\\&quot;,\\&quot;command\\&quot;:\\&quot;harddiskcrash\\&quot;,\\&quot;status\\&quot;:\\&quot;NotApplicable\\&quot;},{\\&quot;commandResponse\\&quot;:\\&quot;\\&quot;,\\&quot;errorMessage\\&quot;:\\&quot;stby-harddisk crash not applicable.\\&quot;,\\&quot;name\\&quot;:\\&quot;stby-harddiskcrash\\&quot;,\\&quot;command\\&quot;:\\&quot;stby-harddiskcrash\\&quot;,\\&quot;status\\&quot;:\\&quot;NotApplicable\\&quot;},{\\&quot;commandResponse\\&quot;:\\&quot;16.0.1\\&quot;,\\&quot;errorMessage\\&quot;:\\&quot;_showconfigall not applicable.\\&quot;,\\&quot;name\\&quot;:\\&quot;show_version\\&quot;,\\&quot;command\\&quot;:\\&quot;show version\\&quot;,\\&quot;status\\&quot;:\\&quot;NotApplicable\\&quot;},{\\&quot;commandResponse\\&quot;:\\&quot;\\&quot;,\\&quot;errorMessage\\&quot;:\\&quot;_showpolicy-map not applicable.\\&quot;,\\&quot;name\\&quot;:\\&quot;_showpolicy-map\\&quot;,\\&quot;command\\&quot;:\\&quot;_showpolicy-map\\&quot;,\\&quot;status\\&quot;:\\&quot;NotApplicable\\&quot;},{\\&quot;commandResponse\\&quot;:\\&quot;\\&quot;,\\&quot;errorMessage\\&quot;:\\&quot;system dirvarlog not applicable.\\&quot;,\\&quot;name\\&quot;:\\&quot;show version log\\&quot;,\\&quot;command\\&quot;:\\&quot;show version log\\&quot;,\\&quot;status\\&quot;:\\&quot;NotApplicable\\&quot;}]&quot;;\r\n        JSONArray array = (JSONArray) parser.parse(json);\r\n        System.out.println(getResponse(array, &quot;Show Version&quot;));\r\n    }\r\n\r\n*Output:*\r\n\r\n```\r\n16.0.1\r\n```\r\n\r\n**Note:** I would not recommend using `org.json.simple` for any task apart from very trivial. It is very unflexible, and not type-safe. Its `JSONArray` extends `ArrayList` of **row type**, for that reason type casts pop up all over the place.\r\n","title":"How to search/find specific word In JSON Array with java","body":"<p>To find the required JSON-object in the array, you need to iterate over array elements and check if it contains the target value (like <code>&quot;Show Version&quot;</code>). If the matching object was found, you need to extract the value that corresponds to <code>&quot;commandResponse&quot;</code> from it.</p>\n<p>Here's how it might be implemented using Stream API (<code>JSONArray</code> is a subtype of <code>ArrayList</code> therefore we can invoke <code>stream()</code> on it):</p>\n<pre><code>@SuppressWarnings(&quot;unchecked&quot;)\npublic static String getResponse(JSONArray array, String search) {\n    \n    return (String) array.stream()\n        .filter(jsonObject -&gt; ((JSONObject) jsonObject).values().stream()\n            .anyMatch(s1 -&gt; ((String) s1).equalsIgnoreCase(search))\n        )\n        .map(jsonObject -&gt; ((JSONObject) jsonObject).get(&quot;commandResponse&quot;))\n        .findFirst()\n        .orElse(&quot;given value doesn't exist&quot;); // apply other methods like orElseThrow() depending on your needs\n}\n</code></pre>\n<p><em>Usage example:</em></p>\n<pre><code>public static void main(String[] args) throws IOException, ParseException {\n    JSONParser parser = new JSONParser();\n    String json = &quot;[{\\&quot;commandResponse\\&quot;:\\&quot;\\&quot;,\\&quot;errorMessage\\&quot;:\\&quot;harddisk crash not applicable.\\&quot;,\\&quot;name\\&quot;:\\&quot;harddiskcrash\\&quot;,\\&quot;command\\&quot;:\\&quot;harddiskcrash\\&quot;,\\&quot;status\\&quot;:\\&quot;NotApplicable\\&quot;},{\\&quot;commandResponse\\&quot;:\\&quot;\\&quot;,\\&quot;errorMessage\\&quot;:\\&quot;stby-harddisk crash not applicable.\\&quot;,\\&quot;name\\&quot;:\\&quot;stby-harddiskcrash\\&quot;,\\&quot;command\\&quot;:\\&quot;stby-harddiskcrash\\&quot;,\\&quot;status\\&quot;:\\&quot;NotApplicable\\&quot;},{\\&quot;commandResponse\\&quot;:\\&quot;16.0.1\\&quot;,\\&quot;errorMessage\\&quot;:\\&quot;_showconfigall not applicable.\\&quot;,\\&quot;name\\&quot;:\\&quot;show_version\\&quot;,\\&quot;command\\&quot;:\\&quot;show version\\&quot;,\\&quot;status\\&quot;:\\&quot;NotApplicable\\&quot;},{\\&quot;commandResponse\\&quot;:\\&quot;\\&quot;,\\&quot;errorMessage\\&quot;:\\&quot;_showpolicy-map not applicable.\\&quot;,\\&quot;name\\&quot;:\\&quot;_showpolicy-map\\&quot;,\\&quot;command\\&quot;:\\&quot;_showpolicy-map\\&quot;,\\&quot;status\\&quot;:\\&quot;NotApplicable\\&quot;},{\\&quot;commandResponse\\&quot;:\\&quot;\\&quot;,\\&quot;errorMessage\\&quot;:\\&quot;system dirvarlog not applicable.\\&quot;,\\&quot;name\\&quot;:\\&quot;show version log\\&quot;,\\&quot;command\\&quot;:\\&quot;show version log\\&quot;,\\&quot;status\\&quot;:\\&quot;NotApplicable\\&quot;}]&quot;;\n    JSONArray array = (JSONArray) parser.parse(json);\n    System.out.println(getResponse(array, &quot;Show Version&quot;));\n}\n</code></pre>\n<p><em>Output:</em></p>\n<pre><code>16.0.1\n</code></pre>\n<p><strong>Note:</strong> I would not recommend using <code>org.json.simple</code> for any task apart from very trivial. It is very unflexible, and not type-safe. Its <code>JSONArray</code> extends <code>ArrayList</code> of <strong>row type</strong>, for that reason type casts pop up all over the place.</p>\n"}],"owner":{"account_id":22755662,"reputation":85,"user_id":16915156,"display_name":"Garry S"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":262,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74889216,"answer_count":3,"score":0,"last_activity_date":1671719243,"creation_date":1671712915,"question_id":74888668,"body_markdown":"I have a below JSON Array from the below, I want to get commandResponse associated with searched Command.\r\n\r\ne.g. lets say I searched command &quot;show version&quot;, It should return my commandResponse as 16.0.1.\r\n\r\n\r\nJSON Array\r\n\r\n    [{&quot;commandResponse&quot;:&quot;&quot;,&quot;errorMessage&quot;:&quot;harddisk crash not applicable.&quot;,&quot;name&quot;:&quot;harddiskcrash&quot;,&quot;command&quot;:&quot;harddiskcrash&quot;,&quot;status&quot;:&quot;NotApplicable&quot;},{&quot;commandResponse&quot;:&quot;&quot;,&quot;errorMessage&quot;:&quot;stby-harddisk crash not applicable.&quot;,&quot;name&quot;:&quot;stby-harddiskcrash&quot;,&quot;command&quot;:&quot;stby-harddiskcrash&quot;,&quot;status&quot;:&quot;NotApplicable&quot;},{&quot;commandResponse&quot;:&quot;16.0.1&quot;,&quot;errorMessage&quot;:&quot;_showconfigall not applicable.&quot;,&quot;name&quot;:&quot;show_version&quot;,&quot;command&quot;:&quot;show version&quot;,&quot;status&quot;:&quot;NotApplicable&quot;},{&quot;commandResponse&quot;:&quot;&quot;,&quot;errorMessage&quot;:&quot;_showpolicy-map not applicable.&quot;,&quot;name&quot;:&quot;_showpolicy-map&quot;,&quot;command&quot;:&quot;_showpolicy-map&quot;,&quot;status&quot;:&quot;NotApplicable&quot;},{&quot;commandResponse&quot;:&quot;&quot;,&quot;errorMessage&quot;:&quot;system dirvarlog not applicable.&quot;,&quot;name&quot;:&quot;show version log&quot;,&quot;command&quot;:&quot;show version log&quot;,&quot;status&quot;:&quot;NotApplicable&quot;}]\r\n\r\nNote: If you see JSON data show version word is present 2 times, show version &amp; show version log but it should return only show version command data. \r\n\r\n\r\nI tried to do this using JsonPath:\r\n\r\n    List&lt;Map&lt;String, Object&gt;&gt; finalDataList = commandsData.read(&quot;$[?(@.command == &#39;Show Version&#39;)]&quot;);\r\n\r\nBut it gives me below error: \r\n\r\n    The method parse(String) is undefined for the type JsonPath\r\n\r\nNotes:\r\n\r\n - JSON parser Library - com.googlecode.json-simple \r\n \r\n - commandsData - This is JSON Array","title":"How to search/find specific word In JSON Array with java","body":"<p>I have a below JSON Array from the below, I want to get commandResponse associated with searched Command.</p>\n<p>e.g. lets say I searched command &quot;show version&quot;, It should return my commandResponse as 16.0.1.</p>\n<p>JSON Array</p>\n<pre><code>[{&quot;commandResponse&quot;:&quot;&quot;,&quot;errorMessage&quot;:&quot;harddisk crash not applicable.&quot;,&quot;name&quot;:&quot;harddiskcrash&quot;,&quot;command&quot;:&quot;harddiskcrash&quot;,&quot;status&quot;:&quot;NotApplicable&quot;},{&quot;commandResponse&quot;:&quot;&quot;,&quot;errorMessage&quot;:&quot;stby-harddisk crash not applicable.&quot;,&quot;name&quot;:&quot;stby-harddiskcrash&quot;,&quot;command&quot;:&quot;stby-harddiskcrash&quot;,&quot;status&quot;:&quot;NotApplicable&quot;},{&quot;commandResponse&quot;:&quot;16.0.1&quot;,&quot;errorMessage&quot;:&quot;_showconfigall not applicable.&quot;,&quot;name&quot;:&quot;show_version&quot;,&quot;command&quot;:&quot;show version&quot;,&quot;status&quot;:&quot;NotApplicable&quot;},{&quot;commandResponse&quot;:&quot;&quot;,&quot;errorMessage&quot;:&quot;_showpolicy-map not applicable.&quot;,&quot;name&quot;:&quot;_showpolicy-map&quot;,&quot;command&quot;:&quot;_showpolicy-map&quot;,&quot;status&quot;:&quot;NotApplicable&quot;},{&quot;commandResponse&quot;:&quot;&quot;,&quot;errorMessage&quot;:&quot;system dirvarlog not applicable.&quot;,&quot;name&quot;:&quot;show version log&quot;,&quot;command&quot;:&quot;show version log&quot;,&quot;status&quot;:&quot;NotApplicable&quot;}]\n</code></pre>\n<p>Note: If you see JSON data show version word is present 2 times, show version &amp; show version log but it should return only show version command data.</p>\n<p>I tried to do this using JsonPath:</p>\n<pre><code>List&lt;Map&lt;String, Object&gt;&gt; finalDataList = commandsData.read(&quot;$[?(@.command == 'Show Version')]&quot;);\n</code></pre>\n<p>But it gives me below error:</p>\n<pre><code>The method parse(String) is undefined for the type JsonPath\n</code></pre>\n<p>Notes:</p>\n<ul>\n<li><p>JSON parser Library - com.googlecode.json-simple</p>\n</li>\n<li><p>commandsData - This is JSON Array</p>\n</li>\n</ul>\n"},{"tags":["java","nullable","lombok","builder"],"comments":[{"owner":{"account_id":2645973,"reputation":65777,"user_id":2288659,"accept_rate":90,"display_name":"Silvio Mayolo"},"score":1,"creation_date":1669655436,"post_id":74604086,"comment_id":131686597,"body_markdown":"Can both exist? Or must *exactly* one be non-null? If it&#39;s the latter, you&#39;re probably looking for a sealed class with two subclasses for the two cases. If both can exist but at least one must, then I don&#39;t think Lombok can help you and you&#39;ll just need to have an explicit check in your constructor.","body":"Can both exist? Or must <i>exactly</i> one be non-null? If it&#39;s the latter, you&#39;re probably looking for a sealed class with two subclasses for the two cases. If both can exist but at least one must, then I don&#39;t think Lombok can help you and you&#39;ll just need to have an explicit check in your constructor."},{"owner":{"account_id":18911549,"reputation":600,"user_id":13797513,"display_name":"chptr-one"},"score":0,"creation_date":1669655749,"post_id":74604086,"comment_id":131686705,"body_markdown":"If I solved this problem in the language with another type system, I would determine the type that meets your requirements, and would use one field of this type instead of two `String maybe_`. I&#39;m not sure that this approach is possible in Java","body":"If I solved this problem in the language with another type system, I would determine the type that meets your requirements, and would use one field of this type instead of two <code>String maybe_</code>. I&#39;m not sure that this approach is possible in Java"},{"owner":{"account_id":24453333,"reputation":151,"user_id":18375257,"display_name":"user18375257"},"score":0,"creation_date":1669657153,"post_id":74604086,"comment_id":131687166,"body_markdown":"@SilvioMayolo yes both can exist. That&#39;s a shame it&#39;s probably not possible. But thanks for the response","body":"@SilvioMayolo yes both can exist. That&#39;s a shame it&#39;s probably not possible. But thanks for the response"}],"answers":[{"tags":[],"owner":{"account_id":5244521,"reputation":327,"user_id":4190682,"display_name":"Maneki"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671717769,"creation_date":1671717769,"answer_id":74889598,"question_id":74604086,"body_markdown":"You can use `@AssertFalse`, an annotation of the package `javax.validation.constraints` :\r\n\r\n    @Getter\r\n    @Builder\r\n    @RequiredArgsConstructor\r\n    class Example {\r\n        private final String maybeA;\r\n        private final String maybeB;\r\n\r\n        @AssertFalse\r\n        private boolean oneFieldHasToExists() {\r\n            return maybeA == null &amp;&amp; maybeB == null;\r\n        }\r\n    }","title":"Lombok two nullable values but one must be present","body":"<p>You can use <code>@AssertFalse</code>, an annotation of the package <code>javax.validation.constraints</code> :</p>\n<pre><code>@Getter\n@Builder\n@RequiredArgsConstructor\nclass Example {\n    private final String maybeA;\n    private final String maybeB;\n\n    @AssertFalse\n    private boolean oneFieldHasToExists() {\n        return maybeA == null &amp;&amp; maybeB == null;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4181375,"reputation":5121,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671719026,"creation_date":1671719026,"answer_id":74889852,"question_id":74604086,"body_markdown":"Something like:\r\n\r\n```\r\n@Getter\r\nclass Example {\r\n    private final String maybeA;\r\n    private final String maybeB;\r\n\r\n    @Builder\r\n    public Example(String maybeA, String maybeB) {\r\n       if (maybeA == null &amp;&amp; maybeB == null) {\r\n          throw IllegalArgumentException(&quot;...&quot;);\r\n       }\r\n       this.maybeA = maybeA;\r\n       this.maybeB = maybeB;\r\n    }\r\n}\r\n```","title":"Lombok two nullable values but one must be present","body":"<p>Something like:</p>\n<pre><code>@Getter\nclass Example {\n    private final String maybeA;\n    private final String maybeB;\n\n    @Builder\n    public Example(String maybeA, String maybeB) {\n       if (maybeA == null &amp;&amp; maybeB == null) {\n          throw IllegalArgumentException(&quot;...&quot;);\n       }\n       this.maybeA = maybeA;\n       this.maybeB = maybeB;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":24453333,"reputation":151,"user_id":18375257,"display_name":"user18375257"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":169,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":2,"score":1,"last_activity_date":1671719026,"creation_date":1669655098,"question_id":74604086,"body_markdown":"Given the following object\r\n\r\n```\r\n@Getter\r\n@Builder\r\n@RequiredArgsConstructor\r\nclass Example {\r\n    private final String maybeA;\r\n    private final String maybeB;\r\n}\r\n\r\n```\r\n\r\nIs it possible to add a constraint where one of these fields has to exist?\r\n\r\nSo we can have A and B, A or B, but not A nor B.","title":"Lombok two nullable values but one must be present","body":"<p>Given the following object</p>\n<pre><code>@Getter\n@Builder\n@RequiredArgsConstructor\nclass Example {\n    private final String maybeA;\n    private final String maybeB;\n}\n\n</code></pre>\n<p>Is it possible to add a constraint where one of these fields has to exist?</p>\n<p>So we can have A and B, A or B, but not A nor B.</p>\n"},{"tags":["java","gis","jts"],"answers":[{"comments":[{"owner":{"account_id":3323719,"reputation":2084,"user_id":2794211,"accept_rate":77,"display_name":"Elbbard"},"score":0,"creation_date":1672825684,"post_id":74889817,"comment_id":132358438,"body_markdown":"Thank you very much for your answer! Unfortunately it seems that my edges are never on the frame and `quadEdgeSubdivision.isFrameEdge(edge)` never seems to be true. Any idea why that could be?","body":"Thank you very much for your answer! Unfortunately it seems that my edges are never on the frame and <code>quadEdgeSubdivision.isFrameEdge(edge)</code> never seems to be true. Any idea why that could be?"},{"owner":{"account_id":195980,"reputation":10228,"user_id":439194,"accept_rate":100,"display_name":"Ian Turton"},"score":0,"creation_date":1672827540,"post_id":74889817,"comment_id":132359057,"body_markdown":"try `quadEdgeSubdivision.getPrimaryEdges(true)`? to include the frame","body":"try <code>quadEdgeSubdivision.getPrimaryEdges(true)</code>? to include the frame"},{"owner":{"account_id":3323719,"reputation":2084,"user_id":2794211,"accept_rate":77,"display_name":"Elbbard"},"score":0,"creation_date":1672830816,"post_id":74889817,"comment_id":132360039,"body_markdown":"Unfortunately the frame seems to be a triangle which encloses my geometry. It means that the frame doesn&#39;t include the outter edges of my geometry. Basically what I would need is a way to know if an edge is part of only one face. If it is part of two faces, then it would be an inner edge of the geometry. My final goal is to extrude the geometry vertically and build walls on the outter edges. Do you know if I can do that with quad edges? Many thanks!","body":"Unfortunately the frame seems to be a triangle which encloses my geometry. It means that the frame doesn&#39;t include the outter edges of my geometry. Basically what I would need is a way to know if an edge is part of only one face. If it is part of two faces, then it would be an inner edge of the geometry. My final goal is to extrude the geometry vertically and build walls on the outter edges. Do you know if I can do that with quad edges? Many thanks!"},{"owner":{"account_id":195980,"reputation":10228,"user_id":439194,"accept_rate":100,"display_name":"Ian Turton"},"score":0,"creation_date":1672832306,"post_id":74889817,"comment_id":132360453,"body_markdown":"so would any triangle involving the frame be on the outside of your geometry?","body":"so would any triangle involving the frame be on the outside of your geometry?"},{"owner":{"account_id":3323719,"reputation":2084,"user_id":2794211,"accept_rate":77,"display_name":"Elbbard"},"score":0,"creation_date":1672833010,"post_id":74889817,"comment_id":132360645,"body_markdown":"I think I may have been confusing with the &quot;outter edge&quot; term. I am trying to get the edges from the original geometry that are not inside the geometry itself. A drawing would probably be easier to explain. For example, if I had a square made of two triangles: what I want is the four exterior edges of the square, and I don&#39;t want the edge in the center of the square because during the 3d extrusion, it will be hidden inside the 3d mesh. Does it make better sense like this? The frame of the `QuadEdgeSubdivison` gives me additional edges that are not part of the original geometry.","body":"I think I may have been confusing with the &quot;outter edge&quot; term. I am trying to get the edges from the original geometry that are not inside the geometry itself. A drawing would probably be easier to explain. For example, if I had a square made of two triangles: what I want is the four exterior edges of the square, and I don&#39;t want the edge in the center of the square because during the 3d extrusion, it will be hidden inside the 3d mesh. Does it make better sense like this? The frame of the <code>QuadEdgeSubdivison</code> gives me additional edges that are not part of the original geometry."},{"owner":{"account_id":3323719,"reputation":2084,"user_id":2794211,"accept_rate":77,"display_name":"Elbbard"},"score":0,"creation_date":1672834804,"post_id":74889817,"comment_id":132361232,"body_markdown":"I found a solution for my problem here: https://softwareengineering.stackexchange.com/a/270342. Basically I iterate over all the edges of my initial triangulation. Each edge that appears twice is an inside edge. This way I will only keep the exterior edges of my triangulation.","body":"I found a solution for my problem here: <a href=\"https://softwareengineering.stackexchange.com/a/270342\">softwareengineering.stackexchange.com/a/270342</a>. Basically I iterate over all the edges of my initial triangulation. Each edge that appears twice is an inside edge. This way I will only keep the exterior edges of my triangulation."}],"tags":[],"owner":{"account_id":195980,"reputation":10228,"user_id":439194,"accept_rate":100,"display_name":"Ian Turton"},"comment_count":6,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1671718825,"creation_date":1671718825,"answer_id":74889817,"question_id":74887527,"body_markdown":"I think that rather than a `Geometry` you want to work with a [`QuadEdgeSubdivision`][1]. Then you can have code like:\r\n\r\n\r\n        QuadEdgeSubdivision quadEdgeSubdivision = builder.getSubdivision();\r\n        @SuppressWarnings(&quot;unchecked&quot;)\r\n        Collection&lt;QuadEdge&gt; primaryEdges = quadEdgeSubdivision.getPrimaryEdges(false);\r\n\r\n        for (QuadEdge edge : primaryEdges) {\r\n          if (quadEdgeSubdivision.isFrameEdge(edge)){\r\n             // this is an outer edge\r\n          }\r\n            // Edges have vertexes and are part of a triangle\r\n            Vertex[] v = new Vertex[3];\r\n            v[0] = edge.orig();\r\n            v[1] = edge.dest();\r\n            v[2] = edge.oNext().dest();\r\n            // or you can get a LineString \r\n            LineSegment lineSegment = edges[i].toLineSegment();\r\n            ...\r\n         }\r\n\r\nYou can see this sort of thing in action in the [GeoTools Contour process][2] that I [wrote about][3] a couple of years ago. \r\n\r\n\r\n  [1]: https://javadocng.mobanisto.com/jts-1.17.1/org/locationtech/jts/triangulate/quadedge/QuadEdgeSubdivision.html\r\n  [2]: https://github.com/geotools/geotools/blob/main/modules/unsupported/process-feature/src/main/java/org/geotools/process/vector/Contours.java#L163\r\n  [3]: https://blog.ianturton.com/geotools/2020/12/24/contours.html","title":"Transform triangles into a list of vertex indices with JTS and DelaunayTriangulationBuilder","body":"<p>I think that rather than a <code>Geometry</code> you want to work with a <a href=\"https://javadocng.mobanisto.com/jts-1.17.1/org/locationtech/jts/triangulate/quadedge/QuadEdgeSubdivision.html\" rel=\"nofollow noreferrer\"><code>QuadEdgeSubdivision</code></a>. Then you can have code like:</p>\n<pre><code>    QuadEdgeSubdivision quadEdgeSubdivision = builder.getSubdivision();\n    @SuppressWarnings(&quot;unchecked&quot;)\n    Collection&lt;QuadEdge&gt; primaryEdges = quadEdgeSubdivision.getPrimaryEdges(false);\n\n    for (QuadEdge edge : primaryEdges) {\n      if (quadEdgeSubdivision.isFrameEdge(edge)){\n         // this is an outer edge\n      }\n        // Edges have vertexes and are part of a triangle\n        Vertex[] v = new Vertex[3];\n        v[0] = edge.orig();\n        v[1] = edge.dest();\n        v[2] = edge.oNext().dest();\n        // or you can get a LineString \n        LineSegment lineSegment = edges[i].toLineSegment();\n        ...\n     }\n</code></pre>\n<p>You can see this sort of thing in action in the <a href=\"https://github.com/geotools/geotools/blob/main/modules/unsupported/process-feature/src/main/java/org/geotools/process/vector/Contours.java#L163\" rel=\"nofollow noreferrer\">GeoTools Contour process</a> that I <a href=\"https://blog.ianturton.com/geotools/2020/12/24/contours.html\" rel=\"nofollow noreferrer\">wrote about</a> a couple of years ago.</p>\n"}],"owner":{"account_id":3323719,"reputation":2084,"user_id":2794211,"accept_rate":77,"display_name":"Elbbard"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":118,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":74889817,"answer_count":1,"score":2,"last_activity_date":1671718825,"creation_date":1671706698,"question_id":74887527,"body_markdown":"I have this little piece of code:\r\n\r\n```java\r\nDelaunayTriangulationBuilder builder = new DelaunayTriangulationBuilder();\r\nbuilder.setSites(geometry);\r\nbuilder.setTolerance(0.0000001);\r\nGeometry triangulation = builder.getTriangles(new GeometryFactory());\r\n``` \r\n\r\nIt will tessellate a Geometry to create a list of triangles. I want to use this result in a 3d application, but in order to optimize the storage space I would like to have it in the following structure:\r\n\r\n- An ordered list of unique vertices (of the outter edges)\r\n- A list of vertex indices (cw or ccw) that represent each of the triangles\r\n\r\nI have a hard time finding an efficient way to do that using the JTS DelaunayTriangulationBuilder class.\r\n\r\nAny help would be appreciated, thank you!","title":"Transform triangles into a list of vertex indices with JTS and DelaunayTriangulationBuilder","body":"<p>I have this little piece of code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>DelaunayTriangulationBuilder builder = new DelaunayTriangulationBuilder();\nbuilder.setSites(geometry);\nbuilder.setTolerance(0.0000001);\nGeometry triangulation = builder.getTriangles(new GeometryFactory());\n</code></pre>\n<p>It will tessellate a Geometry to create a list of triangles. I want to use this result in a 3d application, but in order to optimize the storage space I would like to have it in the following structure:</p>\n<ul>\n<li>An ordered list of unique vertices (of the outter edges)</li>\n<li>A list of vertex indices (cw or ccw) that represent each of the triangles</li>\n</ul>\n<p>I have a hard time finding an efficient way to do that using the JTS DelaunayTriangulationBuilder class.</p>\n<p>Any help would be appreciated, thank you!</p>\n"},{"tags":["java","arrays","loops","java.util.scanner","do-while"],"answers":[{"tags":[],"owner":{"account_id":7421543,"reputation":2874,"user_id":5645656,"accept_rate":100,"display_name":"Cardinal System"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671476223,"creation_date":1671476223,"answer_id":74854880,"question_id":74854663,"body_markdown":"You need to store each input in an [array][1] or collection, such as [`ArrayList`][2].\r\n\r\nIf you choose to use an array, you can ask the user how many items will be entered then use that value for the length of the array:\r\n\r\n    System.out.print(&quot;Enter the number of items in your cart: &quot;);\r\n    int arraySize = scan.nextInt();\r\n    \r\n    String[] itemNames = new String[arraySize];\r\n    double[] itemPrices = new double[arraySize];\r\n\r\nIf you decide you use a list, you do not need to ask the user for the list size, since lists are dynamically expanding data types:\r\n\r\n    List&lt;String&gt; itemNames = new ArrayList&lt;String&gt;();\r\n    List&lt;Double&gt; itemPrices = new ArrayList&lt;Double&gt;();\r\n\r\nThen for every iteration of your loop, you save the values into the arrays/lists:\r\n\r\n    System.out.print(&quot;Enter the number of items in your cart: &quot;);\r\n    int arraySize = scan.nextInt();\r\n    \r\n    String[] itemNames = new String[arraySize];\r\n    double[] itemPrices = new double[arraySize];\r\n\r\n    for(int i = 0; i &lt; ararySize; i++) {\r\n        System.out.println(&quot;Enter item &quot; + (i + 1) + &quot; and it&#39;s price:&quot;);\r\n\r\n        itemNames[i] = scan.next();\r\n        itemPrices[i] = scan.nextDouble();\r\n\r\n        // ...    \r\n    }\r\n    // ...\r\n\r\nOr for the list approach:\r\n\r\n    List&lt;String&gt; itemNames = new ArrayList&lt;String&gt;();\r\n    List&lt;Double&gt; itemPrices = new ArrayList&lt;Double&gt;();\r\n\r\n    do {\r\n        System.out.println(&quot;Enter item &quot; + i + &quot; and it&#39;s price:&quot;);\r\n\r\n        itemNames.add(scan.next());\r\n        itemPrices.add(scan.nextDouble());\r\n\r\n        // ...\r\n    } while (quest.equalsIgnoreCase(&quot;yes&quot;)); {\r\n        // ...\r\n    }\r\n\r\nThen you can iterate over the list/array to print your output:\r\n\r\n    for(int i = 0; i &lt; itemNames.length; i++) {\r\n        String name = itemNames[i];\r\n        double price = itemPrices[i];\r\n        System.out.println(&quot;Item &quot; + i + &quot;: &quot; + name + &quot; Price: &quot; + price + &quot;,&quot;);\r\n    }\r\n\r\nFor list:\r\n\r\n    for(int i = 0; i &lt; itemNames.size(); i++) {\r\n        String name = itemNames.get(i);\r\n        double price = itemPrices.get(i);\r\n        System.out.println(&quot;Item &quot; + i + &quot;: &quot; + name + &quot; Price: &quot; + price + &quot;,&quot;);\r\n    }\r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/util/ArrayList.html\r\n","title":"How to store all the user inputs in do while loop, and call them to print later in Java program?","body":"<p>You need to store each input in an <a href=\"https://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html\" rel=\"nofollow noreferrer\">array</a> or collection, such as <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/ArrayList.html\" rel=\"nofollow noreferrer\"><code>ArrayList</code></a>.</p>\n<p>If you choose to use an array, you can ask the user how many items will be entered then use that value for the length of the array:</p>\n<pre><code>System.out.print(&quot;Enter the number of items in your cart: &quot;);\nint arraySize = scan.nextInt();\n\nString[] itemNames = new String[arraySize];\ndouble[] itemPrices = new double[arraySize];\n</code></pre>\n<p>If you decide you use a list, you do not need to ask the user for the list size, since lists are dynamically expanding data types:</p>\n<pre><code>List&lt;String&gt; itemNames = new ArrayList&lt;String&gt;();\nList&lt;Double&gt; itemPrices = new ArrayList&lt;Double&gt;();\n</code></pre>\n<p>Then for every iteration of your loop, you save the values into the arrays/lists:</p>\n<pre><code>System.out.print(&quot;Enter the number of items in your cart: &quot;);\nint arraySize = scan.nextInt();\n\nString[] itemNames = new String[arraySize];\ndouble[] itemPrices = new double[arraySize];\n\nfor(int i = 0; i &lt; ararySize; i++) {\n    System.out.println(&quot;Enter item &quot; + (i + 1) + &quot; and it's price:&quot;);\n\n    itemNames[i] = scan.next();\n    itemPrices[i] = scan.nextDouble();\n\n    // ...    \n}\n// ...\n</code></pre>\n<p>Or for the list approach:</p>\n<pre><code>List&lt;String&gt; itemNames = new ArrayList&lt;String&gt;();\nList&lt;Double&gt; itemPrices = new ArrayList&lt;Double&gt;();\n\ndo {\n    System.out.println(&quot;Enter item &quot; + i + &quot; and it's price:&quot;);\n\n    itemNames.add(scan.next());\n    itemPrices.add(scan.nextDouble());\n\n    // ...\n} while (quest.equalsIgnoreCase(&quot;yes&quot;)); {\n    // ...\n}\n</code></pre>\n<p>Then you can iterate over the list/array to print your output:</p>\n<pre><code>for(int i = 0; i &lt; itemNames.length; i++) {\n    String name = itemNames[i];\n    double price = itemPrices[i];\n    System.out.println(&quot;Item &quot; + i + &quot;: &quot; + name + &quot; Price: &quot; + price + &quot;,&quot;);\n}\n</code></pre>\n<p>For list:</p>\n<pre><code>for(int i = 0; i &lt; itemNames.size(); i++) {\n    String name = itemNames.get(i);\n    double price = itemPrices.get(i);\n    System.out.println(&quot;Item &quot; + i + &quot;: &quot; + name + &quot; Price: &quot; + price + &quot;,&quot;);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27300220,"reputation":1,"user_id":20817165,"display_name":"Rashad F"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671718557,"creation_date":1671682650,"answer_id":74884073,"question_id":74854663,"body_markdown":"I finally solved the task. Thanks everybody who helped, really appreciated. Here&#39;s the code:\r\n\r\n    Scanner scan = new Scanner(System.in);\r\n    String itemName;\r\n    double price;\r\n    String[] items = new String[10];\r\n    double[] prices = new double[10];\r\n    int itemNumbers[] = new int[10];\r\n    String answer;\r\n    double total = 0;\r\n    int i = 1;\r\n    \r\n    int index = 0;\r\n    do {\r\n        System.out.println(&quot;Enter item &quot; + i + &quot; and it&#39;s price:&quot;);\r\n        itemName = scan.next();\r\n        price = scan.nextDouble();\r\n        scan.nextLine();\r\n        total = total + price;\r\n        items[index] = itemName;\r\n        prices[index] = price;\r\n        itemNumbers[index] = i;\r\n        index++;\r\n        System.out.println(&quot;Add one more item?&quot;);\r\n        answer = scan.next();\r\n        i++;\r\n    \r\n    } while (answer.equalsIgnoreCase(&quot;yes&quot;) &amp;&amp; i &lt;= 10); {\r\n        for (int j = 0; j &lt; index; j++) {\r\n            System.out.print(&quot;Item &quot; + itemNumbers[j] + &quot;: &quot; + items[j] + &quot; price: &quot; + prices[j] + &quot;,&quot;);\r\n        }\r\n    }\r\n    System.out.println(&quot;\\nTotal price: &quot; + total);","title":"How to store all the user inputs in do while loop, and call them to print later in Java program?","body":"<p>I finally solved the task. Thanks everybody who helped, really appreciated. Here's the code:</p>\n<pre><code>Scanner scan = new Scanner(System.in);\nString itemName;\ndouble price;\nString[] items = new String[10];\ndouble[] prices = new double[10];\nint itemNumbers[] = new int[10];\nString answer;\ndouble total = 0;\nint i = 1;\n\nint index = 0;\ndo {\n    System.out.println(&quot;Enter item &quot; + i + &quot; and it's price:&quot;);\n    itemName = scan.next();\n    price = scan.nextDouble();\n    scan.nextLine();\n    total = total + price;\n    items[index] = itemName;\n    prices[index] = price;\n    itemNumbers[index] = i;\n    index++;\n    System.out.println(&quot;Add one more item?&quot;);\n    answer = scan.next();\n    i++;\n\n} while (answer.equalsIgnoreCase(&quot;yes&quot;) &amp;&amp; i &lt;= 10); {\n    for (int j = 0; j &lt; index; j++) {\n        System.out.print(&quot;Item &quot; + itemNumbers[j] + &quot;: &quot; + items[j] + &quot; price: &quot; + prices[j] + &quot;,&quot;);\n    }\n}\nSystem.out.println(&quot;\\nTotal price: &quot; + total);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":16660292,"reputation":586,"user_id":12040427,"display_name":"Gauthier Tassin"},"score":1,"creation_date":1671748378,"post_id":74884261,"comment_id":132170222,"body_markdown":"Please improve your formatting answer. &quot;This version works too&quot; should be outside of your code block. And your code block should be well indented and with formatting rule (you can use a formatter for that)","body":"Please improve your formatting answer. &quot;This version works too&quot; should be outside of your code block. And your code block should be well indented and with formatting rule (you can use a formatter for that)"}],"tags":[],"owner":{"account_id":27300220,"reputation":1,"user_id":20817165,"display_name":"Rashad F"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1671684947,"creation_date":1671684947,"answer_id":74884261,"question_id":74854663,"body_markdown":"    This version works too. Without arrays.\r\n    \r\n    String shoppingList = &quot;&quot;;\r\n    \t    \tString item = &quot;&quot;;\r\n    \t    \tString addMore = &quot;&quot;;\r\n    \t    \tdouble price = 0;\r\n    \t    \tint count = 1;\r\n    \t    \tdouble totalPrice = 0;\r\n    \r\n    \t    \tdo {\r\n    \t    \t\tSystem.out.println(&quot;Enter Item&quot;+ count + &quot; and its price:&quot;);\r\n    \t    \t\titem = scan.next();\r\n    \t    \t\tprice = scan.nextDouble();\r\n    \t    \t\tshoppingList += (&quot;Item&quot; + count + &quot;: &quot; + item + &quot; Price: &quot; + price + &quot;, &quot;);\r\n    \t    \t\ttotalPrice += price;\r\n    \t    \t\tSystem.out.println(&quot;Add one more item?&quot;);\r\n    \t    \t\taddMore = scan.next();\r\n    \t    \t\tcount++;\r\n    \t    \t} while (addMore.equalsIgnoreCase(&quot;yes&quot;));\r\n    \t    \tSystem.out.println(shoppingList.substring(0, shoppingList.length()-2));\r\n    \t    \tSystem.out.println(&quot;Total price: &quot; + totalPrice);\r\n            ","title":"How to store all the user inputs in do while loop, and call them to print later in Java program?","body":"<pre><code>This version works too. Without arrays.\n\nString shoppingList = &quot;&quot;;\n            String item = &quot;&quot;;\n            String addMore = &quot;&quot;;\n            double price = 0;\n            int count = 1;\n            double totalPrice = 0;\n\n            do {\n                System.out.println(&quot;Enter Item&quot;+ count + &quot; and its price:&quot;);\n                item = scan.next();\n                price = scan.nextDouble();\n                shoppingList += (&quot;Item&quot; + count + &quot;: &quot; + item + &quot; Price: &quot; + price + &quot;, &quot;);\n                totalPrice += price;\n                System.out.println(&quot;Add one more item?&quot;);\n                addMore = scan.next();\n                count++;\n            } while (addMore.equalsIgnoreCase(&quot;yes&quot;));\n            System.out.println(shoppingList.substring(0, shoppingList.length()-2));\n            System.out.println(&quot;Total price: &quot; + totalPrice);\n        \n</code></pre>\n"}],"owner":{"account_id":27300220,"reputation":1,"user_id":20817165,"display_name":"Rashad F"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":349,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":3,"score":-1,"last_activity_date":1671718557,"creation_date":1671475162,"question_id":74854663,"body_markdown":"I have to write a Java program with do while loop. Basically it&#39;s like self-checkout register in grocery stores. At first program prompts user to enter Item 1 name and price, after we enter it asks &quot;do you want to add more?&quot; and prompts user. if we say yes then it repeats, add Item 2 **(item number increments)** name and price.  So it goes like this till we say &quot;no&quot; or till entering 10 items. And after that program prints all item numbers correspondingly their names, and prices one by one. Also calculates total of all items. My code prints only last item number, name, price and total. I don&#39;t know how to merge array to do while. \r\n**Example how it should look:** \r\n```\r\n_output: Enter Item1 and its price:_\r\n\r\n_input: Tomatoes_\r\n\r\n_input: 5.5_\r\n\r\n_output: Add one more item?_\r\n\r\n_input: yes_\r\n\r\n_output: Enter Item2 and its price:_\r\n\r\n_input: Cheese_\r\n\r\n_input: 3.5_\r\n\r\n_output: Add one more item?_\r\n\r\n_input: yes_\r\n\r\n_output: Enter Item3 and its price:_\r\n\r\n_input: Apples_\r\n\r\n_input: 6.3_\r\n\r\n_output: Add one more item?_\r\n\r\n_input: no_\r\n\r\n_output: Item1: Tomatoes Price: 5.5, Item2: Cheese Price: 3.5, Item3: Apples Price: 6.3_\r\n\r\n_output: Total price: 15.3_\r\n```\r\n\r\n\r\n\r\nHere&#39;s my code.  It prints only last item&#39;s number, name and price with total.  But can&#39;t manage to print all of them one by one as in example.\r\n\r\n\r\n```\r\n        Scanner scan = new Scanner(System.in);\r\n        \r\n         String item;\r\n        double price;\r\n        int i=1;\r\n        double total=0;\r\n        String quest;\r\n        String items [] = {}; \r\n        do {\r\n        \tSystem.out.println(&quot;Enter item &quot; + i + &quot; and it&#39;s price:&quot;);\r\n        \titem = scan.next();\r\n            price=scan.nextDouble();\r\n            i++;\r\n            total=total+price;\r\n           \r\n           \r\n           \r\n            System.out.println(&quot;Add one more item?&quot;);\r\n            quest=scan.next();\r\n        } while (quest.equalsIgnoreCase(&quot;yes&quot;)) ; {\r\n        \tSystem.out.println(&quot;Item &quot;+i+&quot;: &quot; + item + &quot; Price: &quot; + price + &quot;,&quot;);\r\n        \tSystem.out.println(&quot;Total price: &quot; + total);\r\n        }\r\n```\r\n","title":"How to store all the user inputs in do while loop, and call them to print later in Java program?","body":"<p>I have to write a Java program with do while loop. Basically it's like self-checkout register in grocery stores. At first program prompts user to enter Item 1 name and price, after we enter it asks &quot;do you want to add more?&quot; and prompts user. if we say yes then it repeats, add Item 2 <strong>(item number increments)</strong> name and price.  So it goes like this till we say &quot;no&quot; or till entering 10 items. And after that program prints all item numbers correspondingly their names, and prices one by one. Also calculates total of all items. My code prints only last item number, name, price and total. I don't know how to merge array to do while.\n<strong>Example how it should look:</strong></p>\n<pre><code>_output: Enter Item1 and its price:_\n\n_input: Tomatoes_\n\n_input: 5.5_\n\n_output: Add one more item?_\n\n_input: yes_\n\n_output: Enter Item2 and its price:_\n\n_input: Cheese_\n\n_input: 3.5_\n\n_output: Add one more item?_\n\n_input: yes_\n\n_output: Enter Item3 and its price:_\n\n_input: Apples_\n\n_input: 6.3_\n\n_output: Add one more item?_\n\n_input: no_\n\n_output: Item1: Tomatoes Price: 5.5, Item2: Cheese Price: 3.5, Item3: Apples Price: 6.3_\n\n_output: Total price: 15.3_\n</code></pre>\n<p>Here's my code.  It prints only last item's number, name and price with total.  But can't manage to print all of them one by one as in example.</p>\n<pre><code>        Scanner scan = new Scanner(System.in);\n        \n         String item;\n        double price;\n        int i=1;\n        double total=0;\n        String quest;\n        String items [] = {}; \n        do {\n            System.out.println(&quot;Enter item &quot; + i + &quot; and it's price:&quot;);\n            item = scan.next();\n            price=scan.nextDouble();\n            i++;\n            total=total+price;\n           \n           \n           \n            System.out.println(&quot;Add one more item?&quot;);\n            quest=scan.next();\n        } while (quest.equalsIgnoreCase(&quot;yes&quot;)) ; {\n            System.out.println(&quot;Item &quot;+i+&quot;: &quot; + item + &quot; Price: &quot; + price + &quot;,&quot;);\n            System.out.println(&quot;Total price: &quot; + total);\n        }\n</code></pre>\n"},{"tags":["java","spring","spring-boot","runtime","applicationcontext"],"answers":[{"comments":[{"owner":{"account_id":19656220,"reputation":13,"user_id":14388809,"display_name":"Abhay Sardhara"},"score":0,"creation_date":1671714838,"post_id":74881393,"comment_id":132160374,"body_markdown":"I tried your solution, but it is not working for my case. Thanks by the way","body":"I tried your solution, but it is not working for my case. Thanks by the way"}],"tags":[],"owner":{"account_id":2124329,"reputation":612,"user_id":1886904,"display_name":"egeorge"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671653976,"creation_date":1671653976,"answer_id":74881393,"question_id":74876686,"body_markdown":"Since you are definitely in a Web application, you might try using `GenericWebApplicationContext` instead.\r\n\r\n```Java\r\n@Autowired private GenericWebApplicationContext context;\r\n```\r\nThen,\r\n```Java\r\ncontext.registerBean(generatedClass.getCannonicalName(), generatedClass);\r\n```\r\nI don&#39;t know if this does anything different than what you have, but I think it is the more spring-approved way to do it.","title":"Add runtime generated class bean to spring boot application context","body":"<p>Since you are definitely in a Web application, you might try using <code>GenericWebApplicationContext</code> instead.</p>\n<pre><code>@Autowired private GenericWebApplicationContext context;\n</code></pre>\n<p>Then,</p>\n<pre><code>context.registerBean(generatedClass.getCannonicalName(), generatedClass);\n</code></pre>\n<p>I don't know if this does anything different than what you have, but I think it is the more spring-approved way to do it.</p>\n"}],"owner":{"account_id":19656220,"reputation":13,"user_id":14388809,"display_name":"Abhay Sardhara"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":509,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1671718145,"creation_date":1671628750,"question_id":74876686,"body_markdown":"I am working on a project where I generate a class after the spring boot context starts and compile it to the target/classes folder. I know Spring scans the package and registers all the beans in the application context when the application starts. But here, we are generating a class with annotation @Service at runtime, and the application context is unaware of this new bean. So, other beans cannot find this runtime-generated class. This bean is also not in the bean list of Actuator -&gt; Beans in IntelliJ IDEA\r\n\r\nWhen I rerun the application, this runtime-generated bean gets registered in the application context, and other beans can find out or utilize that bean. Actuator -&gt; Beans in IntelliJ IDEA also shows this bean. I want to register this runtime-generated bean to the application context without restarting/rerunning the application. Please let me know what I am missing here.\r\n\r\nI tried this, but it did not work for me.\r\n\r\n\r\n```\r\n@RestController\r\n@Scope(&quot;prototype&quot;)\r\n@Slf4j\r\npublic class myClass {\r\n\r\n    @Autowired\r\n    private ApplicationContext appContext;\r\n\r\n    @GetMapping(&quot;/beanRegistration&quot;)\r\n    public void beanRegistration() {\r\n        try {\r\n            Class&lt;?&gt; generatedClass = Class.forName(&quot;myApp.sam.protocompiler.GrpcServerImpl&quot;);\r\n            log.info(&quot;generatedClass : {} | Methods count: {} | Super class : {}&quot;, generatedClass.getCanonicalName(), generatedClass.getMethods().length, generatedClass.getSuperclass());\r\n\r\n            ConfigurableListableBeanFactory beanFactory = ((ConfigurableApplicationContext) appContext).getBeanFactory();\r\n            beanFactory.registerSingleton(generatedClass.getCanonicalName(), generatedClass);\r\n\r\n            String[] beans = appContext.getBeanDefinitionNames();\r\n            Arrays.sort(beans);\r\n            for (String bean : beans) {\r\n                if(bean.contains(generatedClass.getCanonicalName())) {\r\n                    System.out.println(&quot;New Bean : &quot; + bean);\r\n                }\r\n            }\r\n        } catch (Exception ex) {\r\n            log.error(&quot;Error : {}&quot;, ex.getMessage(), ex);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nAlso, Is it possible to Scan components after the application is started running? If we can scan runtime-generated components at runtime, we can solve this problem.\r\n","title":"Add runtime generated class bean to spring boot application context","body":"<p>I am working on a project where I generate a class after the spring boot context starts and compile it to the target/classes folder. I know Spring scans the package and registers all the beans in the application context when the application starts. But here, we are generating a class with annotation @Service at runtime, and the application context is unaware of this new bean. So, other beans cannot find this runtime-generated class. This bean is also not in the bean list of Actuator -&gt; Beans in IntelliJ IDEA</p>\n<p>When I rerun the application, this runtime-generated bean gets registered in the application context, and other beans can find out or utilize that bean. Actuator -&gt; Beans in IntelliJ IDEA also shows this bean. I want to register this runtime-generated bean to the application context without restarting/rerunning the application. Please let me know what I am missing here.</p>\n<p>I tried this, but it did not work for me.</p>\n<pre><code>@RestController\n@Scope(&quot;prototype&quot;)\n@Slf4j\npublic class myClass {\n\n    @Autowired\n    private ApplicationContext appContext;\n\n    @GetMapping(&quot;/beanRegistration&quot;)\n    public void beanRegistration() {\n        try {\n            Class&lt;?&gt; generatedClass = Class.forName(&quot;myApp.sam.protocompiler.GrpcServerImpl&quot;);\n            log.info(&quot;generatedClass : {} | Methods count: {} | Super class : {}&quot;, generatedClass.getCanonicalName(), generatedClass.getMethods().length, generatedClass.getSuperclass());\n\n            ConfigurableListableBeanFactory beanFactory = ((ConfigurableApplicationContext) appContext).getBeanFactory();\n            beanFactory.registerSingleton(generatedClass.getCanonicalName(), generatedClass);\n\n            String[] beans = appContext.getBeanDefinitionNames();\n            Arrays.sort(beans);\n            for (String bean : beans) {\n                if(bean.contains(generatedClass.getCanonicalName())) {\n                    System.out.println(&quot;New Bean : &quot; + bean);\n                }\n            }\n        } catch (Exception ex) {\n            log.error(&quot;Error : {}&quot;, ex.getMessage(), ex);\n        }\n    }\n}\n</code></pre>\n<p>Also, Is it possible to Scan components after the application is started running? If we can scan runtime-generated components at runtime, we can solve this problem.</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":2450346,"reputation":5181,"user_id":2136795,"display_name":"Gyro Gearless"},"score":0,"creation_date":1671718900,"post_id":74889655,"comment_id":132161731,"body_markdown":"Maybe a good time to re-read about the `@Override` annotation...","body":"Maybe a good time to re-read about the <code>@Override</code> annotation..."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1671727865,"post_id":74889655,"comment_id":132164875,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":26205171,"reputation":1,"user_id":19884858,"display_name":"mivlix"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671718007,"creation_date":1671718007,"question_id":74889655,"body_markdown":"Task:\r\n\r\nDownload projects from the [link](https://github.com/myitschool-book/HomeWork.2.4.1). Open the HomeWork.2.4.1 project in android studio and modify MainActivity.java so that your application solves a quadratic equation like a*x*x+b*x+c=0.\r\n\r\nInput data: three fields for entering real numbers - coefficients a, b, c\r\n\r\nAnswer: one real root, or two real roots separated by a space, or the word **any** (for any roots), or the word **none** (if there are no roots) should be displayed.\r\n\r\nExample: input -2, 2, 0 output 1.0, 0.0\r\n\r\nAfter you have finished the application, right click on the APP and select Run &#39;All Test&#39;\r\n\r\n[enter image description here](https://i.stack.imgur.com/a4p8Y.png)\r\n\r\nAfter checking, a message similar to the following will be displayed:\r\n\r\n**YOUR RESULT: -1.618034, -3**\r\n\r\nI don&#39;t know what is wrong. I writed OnClick{SolveEquation} but after click on button app fall down. What is wrong? Equation don&#39;t solve.\r\n\r\n\r\n\r\nMy code:\r\n\r\n```\r\npackage ru.samsung.itschool.book;\r\n\r\nimport static java.lang.Math.sqrt;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport android.annotation.SuppressLint;\r\nimport android.os.Bundle;\r\nimport android.view.View;\r\nimport android.widget.EditText;\r\nimport android.widget.TextView;\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n    }\r\n\r\n    public void OnClick(){ // when click on the button\r\n        solveEquation();\r\n    }\r\n\r\n    @SuppressLint(&quot;SetTextI18n&quot;)\r\n    public void solveEquation() { // solver\r\n        double a = Double.parseDouble( ((EditText)\r\n                findViewById(R.id.a)).getText().toString());\r\n        double b = Double.parseDouble( ((EditText)\r\n                findViewById(R.id.b)).getText().toString());\r\n        double c = Double.parseDouble( ((EditText)\r\n                findViewById(R.id.c)).getText().toString());\r\n        TextView result = (TextView) findViewById(R.id.res);\r\n\r\n        double d = b * b - 4 * a * c;\r\n        double root1 = 0;\r\n        double root2 = 0;\r\n        if (d &gt;= 0) {\r\n            root1 = ((-b + sqrt(d)) / (2 * a));\r\n            root2 = ((-b - sqrt(d)) / (2 * a));\r\n        }\r\n        result.setText(&quot;&quot; + String.valueOf(root1) + String.valueOf(root2));\r\n    }\r\n}\r\n```\r\n","title":"I don&#39;t know whats wrong with this Android Studio project. Task: complete app that calculates quadratic equation","body":"<p>Task:</p>\n<p>Download projects from the <a href=\"https://github.com/myitschool-book/HomeWork.2.4.1\" rel=\"nofollow noreferrer\">link</a>. Open the HomeWork.2.4.1 project in android studio and modify MainActivity.java so that your application solves a quadratic equation like a<em>x</em>x+b*x+c=0.</p>\n<p>Input data: three fields for entering real numbers - coefficients a, b, c</p>\n<p>Answer: one real root, or two real roots separated by a space, or the word <strong>any</strong> (for any roots), or the word <strong>none</strong> (if there are no roots) should be displayed.</p>\n<p>Example: input -2, 2, 0 output 1.0, 0.0</p>\n<p>After you have finished the application, right click on the APP and select Run 'All Test'</p>\n<p><a href=\"https://i.stack.imgur.com/a4p8Y.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>After checking, a message similar to the following will be displayed:</p>\n<p><strong>YOUR RESULT: -1.618034, -3</strong></p>\n<p>I don't know what is wrong. I writed OnClick{SolveEquation} but after click on button app fall down. What is wrong? Equation don't solve.</p>\n<p>My code:</p>\n<pre><code>package ru.samsung.itschool.book;\n\nimport static java.lang.Math.sqrt;\nimport androidx.appcompat.app.AppCompatActivity;\nimport android.annotation.SuppressLint;\nimport android.os.Bundle;\nimport android.view.View;\nimport android.widget.EditText;\nimport android.widget.TextView;\n\npublic class MainActivity extends AppCompatActivity {\n    @Override\n    public void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n    }\n\n    public void OnClick(){ // when click on the button\n        solveEquation();\n    }\n\n    @SuppressLint(&quot;SetTextI18n&quot;)\n    public void solveEquation() { // solver\n        double a = Double.parseDouble( ((EditText)\n                findViewById(R.id.a)).getText().toString());\n        double b = Double.parseDouble( ((EditText)\n                findViewById(R.id.b)).getText().toString());\n        double c = Double.parseDouble( ((EditText)\n                findViewById(R.id.c)).getText().toString());\n        TextView result = (TextView) findViewById(R.id.res);\n\n        double d = b * b - 4 * a * c;\n        double root1 = 0;\n        double root2 = 0;\n        if (d &gt;= 0) {\n            root1 = ((-b + sqrt(d)) / (2 * a));\n            root2 = ((-b - sqrt(d)) / (2 * a));\n        }\n        result.setText(&quot;&quot; + String.valueOf(root1) + String.valueOf(root2));\n    }\n}\n</code></pre>\n"},{"tags":["java","testing","spring-boot-test","mockmvc"],"answers":[{"comments":[{"owner":{"account_id":4268929,"reputation":155,"user_id":3491303,"accept_rate":10,"display_name":"Xavi G&#243;mez Canals"},"score":0,"creation_date":1649707282,"post_id":71833531,"comment_id":126940035,"body_markdown":"I have tried with .content, but it keeps returning 400. I put .content(String.valueOf(requestParams)))","body":"I have tried with .content, but it keeps returning 400. I put .content(String.valueOf(requestParams)))"}],"tags":[],"owner":{"account_id":9763630,"reputation":16595,"user_id":7237884,"display_name":"Panagiotis Bougioukos"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1649707427,"creation_date":1649706498,"answer_id":71833531,"question_id":71833261,"body_markdown":"Your problem is here\r\n\r\n    this.mockMvc.perform(patch(&quot;/companies/1&quot;)\r\n                .contentType(MediaType.APPLICATION_JSON)\r\n                .params(requestParams))  &lt;---------------------\r\n                .andExpect(status().isOk())\r\n                .andExpect(jsonPath(&quot;$.name&quot;, Matchers.is(&quot;xavi2&quot;)));\r\n    \r\n        }\r\n\r\nYou pass the data as request parameters. But in your API you have `@RequestBody` meaning it expects to get the data in http request body and not as request parameters.\r\n\r\nThis is why you face `400` error meaning `Bad Request` which is caused by Spring having matched the URL path and also the http method type but something additional which was in the signature of API method was not provided in your request.\r\n\r\nSo you should use the `.content(requestParams)` method to set the content you want in the body of the request which you will send\r\n\r\n[Related documentation][1]\r\n\r\nOtherwise your API should have used `@RequestParam` instead of `@RequestBody` to receive the input as request parameters as previously sent from test.\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/test/web/servlet/request/MockHttpServletRequestBuilder.html#params-org.springframework.util.MultiValueMap-","title":"Spring boot patch request on controller with Map parameter. Test with mockmvc","body":"<p>Your problem is here</p>\n<pre><code>this.mockMvc.perform(patch(&quot;/companies/1&quot;)\n            .contentType(MediaType.APPLICATION_JSON)\n            .params(requestParams))  &lt;---------------------\n            .andExpect(status().isOk())\n            .andExpect(jsonPath(&quot;$.name&quot;, Matchers.is(&quot;xavi2&quot;)));\n\n    }\n</code></pre>\n<p>You pass the data as request parameters. But in your API you have <code>@RequestBody</code> meaning it expects to get the data in http request body and not as request parameters.</p>\n<p>This is why you face <code>400</code> error meaning <code>Bad Request</code> which is caused by Spring having matched the URL path and also the http method type but something additional which was in the signature of API method was not provided in your request.</p>\n<p>So you should use the <code>.content(requestParams)</code> method to set the content you want in the body of the request which you will send</p>\n<p><a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/test/web/servlet/request/MockHttpServletRequestBuilder.html#params-org.springframework.util.MultiValueMap-\" rel=\"nofollow noreferrer\">Related documentation</a></p>\n<p>Otherwise your API should have used <code>@RequestParam</code> instead of <code>@RequestBody</code> to receive the input as request parameters as previously sent from test.</p>\n"}],"owner":{"account_id":4268929,"reputation":155,"user_id":3491303,"accept_rate":10,"display_name":"Xavi G&#243;mez Canals"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3208,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71833531,"answer_count":1,"score":0,"last_activity_date":1671717935,"creation_date":1649705056,"question_id":71833261,"body_markdown":"I&#39;m trying to test a &#39;patch request&#39; from my CompanyController that has a Map and Id as a parameters. I expected get a http status 200, but I get a http status 400.\r\nCan someone explain to me what I&#39;m doing wrong? thank you\r\n\r\nCompanyController (some parts of the code are omitted):\r\n    \r\n    @RestController\r\n    public class CompanyController {\r\n    \r\n        @Autowired\r\n        private CompanyService companyService;\r\n  \r\n        @PatchMapping(&quot;companies/{id}&quot;)\r\n        public ResponseEntity&lt;CompanyDTO&gt; patchUpdateCompany(@PathVariable Integer id,\r\n                                                             @RequestBody Map&lt;String, Object&gt; updates) throws JsonMappingException {\r\n    \r\n            Optional&lt;CompanyDTO&gt; optionalCompanyDTO = this.companyService.patchUpdateCompany(updates, id);\r\n    \r\n            return ResponseEntity.ok(optionalCompanyDTO.get());\r\n        }\r\n    \r\n    }\r\n\r\n\r\n\r\nCompanyControllerTest (some parts of the code are omitted)\r\n\r\n    @WebMvcTest(CompanyController.class)\r\n    public class CompanyControllerTest {\r\n    \r\n        @MockBean\r\n        private CompanyService companyService;\r\n    \r\n        @Autowired\r\n        private MockMvc mockMvc;\r\n    \r\n        private static List&lt;CompanyDTO&gt; companyDTOList;\r\n    \r\n        @BeforeAll\r\n        public static void beforeAll(){\r\n            companyDTOList = new ArrayList&lt;&gt;();\r\n            CompanyDTO companyDTO1 = CompanyDTO.builder().id(1).name(&quot;xavi&quot;).build();\r\n            CompanyDTO companyDTO2 = CompanyDTO.builder().id(2).name(&quot;marteta&quot;).build();\r\n            companyDTOList.add(companyDTO1);\r\n            companyDTOList.add(companyDTO2);\r\n        }\r\n    \r\n        @Test\r\n        void givenMapAndIdWhenPatchUpdateCompanyThenReturnHttpStatusOk() throws Exception {\r\n            Mockito.when(this.companyService.getCompanyById(1)).thenReturn(Optional.of(companyDTOList.get(0)));\r\n    \r\n            MultiValueMap&lt;String, String&gt; parameters = new LinkedMultiValueMap&lt;&gt;();\r\n            parameters.add(&quot;name&quot;, &quot;xavi2&quot;);\r\n    \r\n            this.mockMvc.perform(patch(&quot;/companies/1&quot;)\r\n                .contentType(MediaType.APPLICATION_JSON)\r\n                .params(requestParams))\r\n                .andExpect(status().isOk())\r\n                .andExpect(jsonPath(&quot;$.name&quot;, Matchers.is(&quot;xavi2&quot;)));\r\n    \r\n        }\r\n    }\r\n\r\n","title":"Spring boot patch request on controller with Map parameter. Test with mockmvc","body":"<p>I'm trying to test a 'patch request' from my CompanyController that has a Map and Id as a parameters. I expected get a http status 200, but I get a http status 400.\nCan someone explain to me what I'm doing wrong? thank you</p>\n<p>CompanyController (some parts of the code are omitted):</p>\n<pre><code>@RestController\npublic class CompanyController {\n\n    @Autowired\n    private CompanyService companyService;\n\n    @PatchMapping(&quot;companies/{id}&quot;)\n    public ResponseEntity&lt;CompanyDTO&gt; patchUpdateCompany(@PathVariable Integer id,\n                                                         @RequestBody Map&lt;String, Object&gt; updates) throws JsonMappingException {\n\n        Optional&lt;CompanyDTO&gt; optionalCompanyDTO = this.companyService.patchUpdateCompany(updates, id);\n\n        return ResponseEntity.ok(optionalCompanyDTO.get());\n    }\n\n}\n</code></pre>\n<p>CompanyControllerTest (some parts of the code are omitted)</p>\n<pre><code>@WebMvcTest(CompanyController.class)\npublic class CompanyControllerTest {\n\n    @MockBean\n    private CompanyService companyService;\n\n    @Autowired\n    private MockMvc mockMvc;\n\n    private static List&lt;CompanyDTO&gt; companyDTOList;\n\n    @BeforeAll\n    public static void beforeAll(){\n        companyDTOList = new ArrayList&lt;&gt;();\n        CompanyDTO companyDTO1 = CompanyDTO.builder().id(1).name(&quot;xavi&quot;).build();\n        CompanyDTO companyDTO2 = CompanyDTO.builder().id(2).name(&quot;marteta&quot;).build();\n        companyDTOList.add(companyDTO1);\n        companyDTOList.add(companyDTO2);\n    }\n\n    @Test\n    void givenMapAndIdWhenPatchUpdateCompanyThenReturnHttpStatusOk() throws Exception {\n        Mockito.when(this.companyService.getCompanyById(1)).thenReturn(Optional.of(companyDTOList.get(0)));\n\n        MultiValueMap&lt;String, String&gt; parameters = new LinkedMultiValueMap&lt;&gt;();\n        parameters.add(&quot;name&quot;, &quot;xavi2&quot;);\n\n        this.mockMvc.perform(patch(&quot;/companies/1&quot;)\n            .contentType(MediaType.APPLICATION_JSON)\n            .params(requestParams))\n            .andExpect(status().isOk())\n            .andExpect(jsonPath(&quot;$.name&quot;, Matchers.is(&quot;xavi2&quot;)));\n\n    }\n}\n</code></pre>\n"},{"tags":["java","datetime","formatting","iso8601"],"comments":[{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1671748697,"post_id":1554852,"comment_id":132170291,"body_markdown":"Contrary to your second sentence, `+05:30` is *not* a time zone. That text is an offset from UTC. A time zone has a name in format of `Continent/Region` such as `Europe/Paris` or `Asia/Kolkata`.","body":"Contrary to your second sentence, <code>+05:30</code> is <i>not</i> a time zone. That text is an offset from UTC. A time zone has a name in format of <code>Continent&#47;Region</code> such as <code>Europe&#47;Paris</code> or <code>Asia&#47;Kolkata</code>."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1671748720,"post_id":1554852,"comment_id":132170297,"body_markdown":"There is nothing odd about `+05:30` with a COLON character (`:`) versus `+0530`. Quite the opposite, as I have seen multiple libraries that expect the COLON character to be present despite the international standard [ISO 8601](https://en.wikipedia.org/wiki/ISO_8601) making it optional. So I recommend always including the COLON.","body":"There is nothing odd about <code>+05:30</code> with a COLON character (<code>:</code>) versus <code>+0530</code>. Quite the opposite, as I have seen multiple libraries that expect the COLON character to be present despite the international standard <a href=\"https://en.wikipedia.org/wiki/ISO_8601\" rel=\"nofollow noreferrer\">ISO 8601</a> making it optional. So I recommend always including the COLON."}],"answers":[{"comments":[{"owner":{"account_id":59692,"reputation":35753,"user_id":178526,"accept_rate":85,"display_name":"sfussenegger"},"score":0,"creation_date":1255357640,"post_id":1554880,"comment_id":1413063,"body_markdown":"I&#39;ve just tested it, but it doesn&#39;t work: new SimpleDateFormat(&quot;EEE, d MMM yyyy HH:mm:ss z&quot;).parse(&quot;Wed, 4 Jul 2001 12:08:56 -07:00&quot;)","body":"I&#39;ve just tested it, but it doesn&#39;t work: new SimpleDateFormat(&quot;EEE, d MMM yyyy HH:mm:ss z&quot;).parse(&quot;Wed, 4 Jul 2001 12:08:56 -07:00&quot;)"},{"owner":{"account_id":7450,"reputation":269220,"user_id":12960,"display_name":"Brian Agnew"},"score":0,"creation_date":1255357944,"post_id":1554880,"comment_id":1413090,"body_markdown":"What happens if (say) you have GMT-07:00 (I appreciate that&#39;s not what you currently have)","body":"What happens if (say) you have GMT-07:00 (I appreciate that&#39;s not what you currently have)"},{"owner":{"account_id":59692,"reputation":35753,"user_id":178526,"accept_rate":85,"display_name":"sfussenegger"},"score":0,"creation_date":1255358315,"post_id":1554880,"comment_id":1413127,"body_markdown":"Yes, it works after prepending GMT to the timezone (&quot;Wed, 4 Jul 2001 12:08:56 GMT-07:00&quot;). But given the format from the question, this (using &#39;z&#39; instead of &#39;Z&#39; in format string) still isn&#39;t a viable way to parse those dates.","body":"Yes, it works after prepending GMT to the timezone (&quot;Wed, 4 Jul 2001 12:08:56 GMT-07:00&quot;). But given the format from the question, this (using &#39;z&#39; instead of &#39;Z&#39; in format string) still isn&#39;t a viable way to parse those dates."},{"owner":{"account_id":7450,"reputation":269220,"user_id":12960,"display_name":"Brian Agnew"},"score":0,"creation_date":1255359302,"post_id":1554880,"comment_id":1413245,"body_markdown":"Yes. Agreed. You may want to check out Joda (for this and other time/date issues)","body":"Yes. Agreed. You may want to check out Joda (for this and other time/date issues)"}],"tags":[],"owner":{"account_id":7450,"reputation":269220,"user_id":12960,"display_name":"Brian Agnew"},"comment_count":4,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1255358267,"creation_date":1255357275,"answer_id":1554880,"question_id":1554852,"body_markdown":"SimpleDateFormat should accept this. From [the doc][1]:\r\n\r\n&gt; For parsing, general time zones are\r\n&gt; also accepted.\r\n\r\nand these [are specified as][2]:\r\n\r\n    GMTOffsetTimeZone:\r\n                 GMT Sign Hours : Minutes\r\n\r\nwhich looks like what you have ?\r\n\r\nIf that fails, then the [Joda DateTimeFormat][3] claims to do this. I would be tempted to use Joda regardless, for a whole range of reasons (a more consistent and simpler API, thread-safety for formatters/parsers etc.)\r\n\r\n\r\n  [1]: http://java.sun.com/j2se/1.4.2/docs/api/java/text/SimpleDateFormat.html#rfc822timezone\r\n  [2]: http://java.sun.com/j2se/1.4.2/docs/api/java/text/SimpleDateFormat.html#timezone\r\n  [3]: http://joda-time.sourceforge.net/api-release/org/joda/time/format/DateTimeFormat.html","title":"Parsing a date string using java.text.SimpleDateFormat","body":"<p>SimpleDateFormat should accept this. From <a href=\"http://java.sun.com/j2se/1.4.2/docs/api/java/text/SimpleDateFormat.html#rfc822timezone\" rel=\"nofollow noreferrer\">the doc</a>:</p>\n\n<blockquote>\n  <p>For parsing, general time zones are\n  also accepted.</p>\n</blockquote>\n\n<p>and these <a href=\"http://java.sun.com/j2se/1.4.2/docs/api/java/text/SimpleDateFormat.html#timezone\" rel=\"nofollow noreferrer\">are specified as</a>:</p>\n\n<pre><code>GMTOffsetTimeZone:\n             GMT Sign Hours : Minutes\n</code></pre>\n\n<p>which looks like what you have ?</p>\n\n<p>If that fails, then the <a href=\"http://joda-time.sourceforge.net/api-release/org/joda/time/format/DateTimeFormat.html\" rel=\"nofollow noreferrer\">Joda DateTimeFormat</a> claims to do this. I would be tempted to use Joda regardless, for a whole range of reasons (a more consistent and simpler API, thread-safety for formatters/parsers etc.)</p>\n"},{"tags":[],"owner":{"account_id":59692,"reputation":35753,"user_id":178526,"accept_rate":85,"display_name":"sfussenegger"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1255357297,"creation_date":1255357297,"answer_id":1554885,"question_id":1554852,"body_markdown":"I&#39;ve looked into this problem myself several month ago. If I remember correctly, SimpleDateFormat isn&#39;t flexible enough to accept other timezone formats (mine was +530). What I did was a simple pre-processing step - i.e. try to remove the colon before passing the String to SimpleDateFormat.","title":"Parsing a date string using java.text.SimpleDateFormat","body":"<p>I've looked into this problem myself several month ago. If I remember correctly, SimpleDateFormat isn't flexible enough to accept other timezone formats (mine was +530). What I did was a simple pre-processing step - i.e. try to remove the colon before passing the String to SimpleDateFormat.</p>\n"},{"tags":[],"owner":{"account_id":45934,"reputation":203679,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1255357334,"creation_date":1255357334,"answer_id":1554890,"question_id":1554852,"body_markdown":"Is this by chance a date string that comes from an XML file (ISO8601 format)? Unfortunately there is no (easy) way to parse this with `SimpleDateFormat`, exactly due to the &#39;:&#39; in the timezone part that `SimpleDateFormat` has no way to deal with properly.\r\n\r\nHave a look at [my answer in this other question][1] about how to parse XML datetime strings.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/1553695/how-to-interpret-the-these-time-stamps/1553983#1553983","title":"Parsing a date string using java.text.SimpleDateFormat","body":"<p>Is this by chance a date string that comes from an XML file (ISO8601 format)? Unfortunately there is no (easy) way to parse this with <code>SimpleDateFormat</code>, exactly due to the ':' in the timezone part that <code>SimpleDateFormat</code> has no way to deal with properly.</p>\n\n<p>Have a look at <a href=\"https://stackoverflow.com/questions/1553695/how-to-interpret-the-these-time-stamps/1553983#1553983\">my answer in this other question</a> about how to parse XML datetime strings.</p>\n"},{"tags":[],"owner":{"account_id":49175,"reputation":23807,"user_id":146347,"accept_rate":100,"display_name":"KLE"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1255357344,"creation_date":1255357344,"answer_id":1554891,"question_id":1554852,"body_markdown":"Of course, there is always the hack of **preprocessing your String**.\r\n\r\nIf nobody finds a better answer, that would be something already. You could encapsulate it in a method, with a comment to explain the hack.","title":"Parsing a date string using java.text.SimpleDateFormat","body":"<p>Of course, there is always the hack of <strong>preprocessing your String</strong>.</p>\n\n<p>If nobody finds a better answer, that would be something already. You could encapsulate it in a method, with a comment to explain the hack.</p>\n"},{"tags":[],"owner":{"account_id":45510,"reputation":9296,"user_id":134176,"accept_rate":100,"display_name":"Dean Povey"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1255357401,"creation_date":1255357401,"answer_id":1554895,"question_id":1554852,"body_markdown":"Can you not preprocess with a regex and replace the timezone e.g.\r\n\r\n    String dateAndTime = ...\r\n    String preprocessed = dateAndTime.replace(&quot;([+-])(\\\\d\\\\d):(\\\\d\\\\d)$&quot;, &quot;$1$2$3&quot;);\r\n    // Go on with your life \r\n\r\n","title":"Parsing a date string using java.text.SimpleDateFormat","body":"<p>Can you not preprocess with a regex and replace the timezone e.g.</p>\n\n<pre><code>String dateAndTime = ...\nString preprocessed = dateAndTime.replace(\"([+-])(\\\\d\\\\d):(\\\\d\\\\d)$\", \"$1$2$3\");\n// Go on with your life \n</code></pre>\n"},{"tags":[],"owner":{"account_id":188977,"reputation":7184,"user_id":428022,"accept_rate":96,"display_name":"shiami"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1284538110,"creation_date":1284538110,"answer_id":3715749,"question_id":1554852,"body_markdown":"I think it should use the `replaceAll` method of the `String` for `regular expression`.\r\n\r\n    String dateAndTime = ...\r\n    String preprocessed = dateAndTime.replaceAll(&quot;(GMT)([+-])(\\\\d\\\\d):(\\\\d\\\\d)&quot;, &quot;$2$3$4&quot;);\r\n","title":"Parsing a date string using java.text.SimpleDateFormat","body":"<p>I think it should use the <code>replaceAll</code> method of the <code>String</code> for <code>regular expression</code>.</p>\n\n<pre><code>String dateAndTime = ...\nString preprocessed = dateAndTime.replaceAll(\"(GMT)([+-])(\\\\d\\\\d):(\\\\d\\\\d)\", \"$2$3$4\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2179728,"reputation":73077,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1671717830,"creation_date":1671717830,"answer_id":74889608,"question_id":1554852,"body_markdown":"Java 8+\r\n--\r\n\r\nThe most appropriate type to prase *1997-02-14T00:00:00.0000000+05:30* into is [`OffsetDateTime`](https://docs.oracle.com/javase/8/docs/api/java/time/OffsetDateTime.html). Note that `java.time` API is based on [ISO 8601](https://en.wikipedia.org/wiki/ISO_8601) and therefore you do not need to specify a `DateTimeFormatter` to parse a date-time string which is already in ISO 8601 format. \r\n    \r\n    import java.time.Instant;\r\n    import java.time.OffsetDateTime;\r\n    import java.time.ZonedDateTime;\r\n    \r\n    class Main {\r\n        public static void main(String[] args) {\r\n            String strDateTime = &quot;1997-02-14T00:00:00.0000000+05:30&quot;;\r\n            OffsetDateTime odt = OffsetDateTime.parse(strDateTime);\r\n            System.out.println(odt);\r\n    \r\n            // Technically, you can also parse it into a ZonedDateTime but a ZonedDateTime\r\n            // is supposed to contain ZoneId along with ZoneOffset\r\n            System.out.println(ZonedDateTime.parse(strDateTime));\r\n    \r\n            // With Java 12+, it is also possible to parse it into an Instant\r\n            System.out.println(Instant.parse(strDateTime));\r\n        }\r\n    }\r\n\r\n**Output**:\r\n\r\n    1997-02-14T00:00+05:30\r\n    1997-02-14T00:00+05:30\r\n    1997-02-13T18:30:00Z\r\n\r\nLearn more about the modern Date-Time API from **[Trail: Date Time](https://docs.oracle.com/javase/tutorial/datetime/index.html)**.\r\n\r\nJust for the sake of completeness\r\n--\r\n\r\nThe `java.util` Date-Time API and their formatting API, `SimpleDateFormat` are outdated and error-prone. Since the release of Java-8 (Mar 2014), it is highly recommended to stop using them completely and switch to the [modern Date-Time API](https://www.oracle.com/technical-resources/articles/java/jf14-Date-Time.html). However, for any reason, if you want to stick to the legacy API, you can use `SimpleDateFormat(&quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSSSSSSXXX&quot;)` to parse your string.\r\n    \r\n    class Main {\r\n        public static void main(String[] args) throws ParseException {\r\n            String strDateTime = &quot;1997-02-14T00:00:00.0000000+05:30&quot;;\r\n            DateFormat sdf = new SimpleDateFormat(&quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSSSSSSXXX&quot;);\r\n            Date date = sdf.parse(strDateTime);\r\n            System.out.println(date);\r\n        }\r\n    }\r\n\r\n**Output**:\r\n\r\n    Thu Feb 13 18:30:00 GMT 1997","title":"Parsing a date string using java.text.SimpleDateFormat","body":"<h2>Java 8+</h2>\n<p>The most appropriate type to prase <em>1997-02-14T00:00:00.0000000+05:30</em> into is <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/OffsetDateTime.html\" rel=\"nofollow noreferrer\"><code>OffsetDateTime</code></a>. Note that <code>java.time</code> API is based on <a href=\"https://en.wikipedia.org/wiki/ISO_8601\" rel=\"nofollow noreferrer\">ISO 8601</a> and therefore you do not need to specify a <code>DateTimeFormatter</code> to parse a date-time string which is already in ISO 8601 format.</p>\n<pre><code>import java.time.Instant;\nimport java.time.OffsetDateTime;\nimport java.time.ZonedDateTime;\n\nclass Main {\n    public static void main(String[] args) {\n        String strDateTime = &quot;1997-02-14T00:00:00.0000000+05:30&quot;;\n        OffsetDateTime odt = OffsetDateTime.parse(strDateTime);\n        System.out.println(odt);\n\n        // Technically, you can also parse it into a ZonedDateTime but a ZonedDateTime\n        // is supposed to contain ZoneId along with ZoneOffset\n        System.out.println(ZonedDateTime.parse(strDateTime));\n\n        // With Java 12+, it is also possible to parse it into an Instant\n        System.out.println(Instant.parse(strDateTime));\n    }\n}\n</code></pre>\n<p><strong>Output</strong>:</p>\n<pre><code>1997-02-14T00:00+05:30\n1997-02-14T00:00+05:30\n1997-02-13T18:30:00Z\n</code></pre>\n<p>Learn more about the modern Date-Time API from <strong><a href=\"https://docs.oracle.com/javase/tutorial/datetime/index.html\" rel=\"nofollow noreferrer\">Trail: Date Time</a></strong>.</p>\n<h2>Just for the sake of completeness</h2>\n<p>The <code>java.util</code> Date-Time API and their formatting API, <code>SimpleDateFormat</code> are outdated and error-prone. Since the release of Java-8 (Mar 2014), it is highly recommended to stop using them completely and switch to the <a href=\"https://www.oracle.com/technical-resources/articles/java/jf14-Date-Time.html\" rel=\"nofollow noreferrer\">modern Date-Time API</a>. However, for any reason, if you want to stick to the legacy API, you can use <code>SimpleDateFormat(&quot;yyyy-MM-dd'T'HH:mm:ss.SSSSSSSXXX&quot;)</code> to parse your string.</p>\n<pre><code>class Main {\n    public static void main(String[] args) throws ParseException {\n        String strDateTime = &quot;1997-02-14T00:00:00.0000000+05:30&quot;;\n        DateFormat sdf = new SimpleDateFormat(&quot;yyyy-MM-dd'T'HH:mm:ss.SSSSSSSXXX&quot;);\n        Date date = sdf.parse(strDateTime);\n        System.out.println(date);\n    }\n}\n</code></pre>\n<p><strong>Output</strong>:</p>\n<pre><code>Thu Feb 13 18:30:00 GMT 1997\n</code></pre>\n"}],"owner":{"account_id":5099,"reputation":20098,"user_id":8024,"accept_rate":81,"display_name":"Baishampayan Ghose"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3033,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":1554895,"answer_count":7,"score":0,"last_activity_date":1671717830,"creation_date":1255356955,"question_id":1554852,"body_markdown":"I have a weird problem, I need to parse a date string that looks like `1997-02-14T00:00:00.0000000+05:30`. The odd thing about the date string is the time zone information. It&#39;s `+05:30` instead of the usual `+0530`.\r\n\r\nI have the basic format string ready, `yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSSSSSSZ` which would have worked like a charm, if not for the TZ information.\r\n\r\nCan anyone suggest a solution to this problem? Is there some kind format string which can handle that kind of TZ info?\r\n\r\nThanks in advance.","title":"Parsing a date string using java.text.SimpleDateFormat","body":"<p>I have a weird problem, I need to parse a date string that looks like <code>1997-02-14T00:00:00.0000000+05:30</code>. The odd thing about the date string is the time zone information. It's <code>+05:30</code> instead of the usual <code>+0530</code>.</p>\n\n<p>I have the basic format string ready, <code>yyyy-MM-dd'T'HH:mm:ss.SSSSSSSZ</code> which would have worked like a charm, if not for the TZ information.</p>\n\n<p>Can anyone suggest a solution to this problem? Is there some kind format string which can handle that kind of TZ info?</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["java","arrays","sorting"],"comments":[{"owner":{"account_id":1726806,"reputation":13951,"user_id":4790924,"accept_rate":67,"display_name":"Sharon Ben Asher"},"score":0,"creation_date":1671619419,"post_id":74874754,"comment_id":132136450,"body_markdown":"what is the input that expected output is `[0,1,0] [1,2,2]`? why would value 1 be present in two different rows of the pyramid?","body":"what is the input that expected output is <code>[0,1,0] [1,2,2]</code>? why would value 1 be present in two different rows of the pyramid?"},{"owner":{"account_id":23137132,"reputation":9,"user_id":20830702,"display_name":"Omar Russo Castillo"},"score":0,"creation_date":1671619679,"post_id":74874754,"comment_id":132136525,"body_markdown":"It&#39;s an example what I want is to sort the list and then creat a pyramid were the first number at the top is the smallest of the list and in the second row the next two and so on","body":"It&#39;s an example what I want is to sort the list and then creat a pyramid were the first number at the top is the smallest of the list and in the second row the next two and so on"},{"owner":{"account_id":1726806,"reputation":13951,"user_id":4790924,"accept_rate":67,"display_name":"Sharon Ben Asher"},"score":2,"creation_date":1671620488,"post_id":74874754,"comment_id":132136773,"body_markdown":"if you want help, you need to give complete example: input, expected output and actual. also, if you get error, it tells you the source line number","body":"if you want help, you need to give complete example: input, expected output and actual. also, if you get error, it tells you the source line number"}],"owner":{"account_id":23137132,"reputation":9,"user_id":20830702,"display_name":"Omar Russo Castillo"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1671640127,"answer_count":0,"score":0,"last_activity_date":1671717649,"creation_date":1671619030,"question_id":74874754,"body_markdown":"I&#39;m learning java and wanted to do this problem:\r\n\r\nBuild a pyramid from given input list of integer values. Numbers are to be sorted ascending from top to bottom, from left to right.\r\n\r\nEmpty spaces are to be filled with zeros. In order to make the pyramid symmetric input numbers should alternate with zeros.\r\n\r\nFor example, for input `A={2, 4, 3, 5, 6, 1}` the pyramid will look like:\r\n\r\n- \\[0,0,1,0,0\\]                                                        \r\n  \\[0,2,0,3,0\\]                                                        \r\n  \\[4,0,5,0,6\\]\r\n\r\nI&#39;ve written some code but the problem is that the solution comes out something like:\r\n- \\[0,1,2\\]                                                               \r\n  \\[0,1,2\\]\r\n\r\nInstead it should be something like this:\r\n- \\[0,1,0\\]                                                            \r\n  \\[1,2,2\\]\r\n\r\nNow I get an Array out of index error, what can I change?\r\n\r\n\r\n\r\n```\r\npublic int[][] buildPyramid(List&lt;Integer&gt; inputNumbers) \r\n    throws CannotBuildPyramidException {\r\n\r\n    // Calculate the number of rows in the pyramid\r\n    int rows = (int) (Math.sqrt(inputNumbers.size() * 2) - 1);\r\n\r\n    // Initialize the 2D array that will hold the pyramid\r\n    int[][] pyramid = new int[rows][rows];\r\n\r\n    // Initialize the variables that will help us navigate through the pyramid\r\n    int row = 0;\r\n    int col = rows / 2;\r\n    boolean isDown = true;\r\n\r\n    // Iterate through the list of numbers and build the pyramid\r\n    for (int num : inputNumbers) {\r\n        pyramid[row][col] = num;\r\n\r\n        if (isDown) {\r\n            row++;\r\n        } else {\r\n            row--;\r\n            col--;\r\n        }\r\n\r\n        if (row == rows) {\r\n            row = rows - 2;\r\n            col++;\r\n            isDown = false;\r\n        } else if (row &lt; 0) {\r\n            row = 1;\r\n            isDown = true;\r\n        }\r\n    }\r\n\r\n    // Print the pyramid\r\n    for (int i = 0; i &lt; rows; i++) {\r\n        for (int j = 0; j &lt; rows; j++) {\r\n            if (pyramid[i][j] == 0) {\r\n                System.out.print(&quot;0 &quot;);\r\n            } else {\r\n                System.out.print(pyramid[i][j] + &quot; &quot;);\r\n            }\r\n        }\r\n        System.out.println();\r\n    }\r\n    return pyramid;\r\n}\r\n```","title":"Build a pyramid in java with a List of integers","body":"<p>I'm learning java and wanted to do this problem:</p>\n<p>Build a pyramid from given input list of integer values. Numbers are to be sorted ascending from top to bottom, from left to right.</p>\n<p>Empty spaces are to be filled with zeros. In order to make the pyramid symmetric input numbers should alternate with zeros.</p>\n<p>For example, for input <code>A={2, 4, 3, 5, 6, 1}</code> the pyramid will look like:</p>\n<ul>\n<li>[0,0,1,0,0]<br />\n[0,2,0,3,0]<br />\n[4,0,5,0,6]</li>\n</ul>\n<p>I've written some code but the problem is that the solution comes out something like:</p>\n<ul>\n<li>[0,1,2]<br />\n[0,1,2]</li>\n</ul>\n<p>Instead it should be something like this:</p>\n<ul>\n<li>[0,1,0]<br />\n[1,2,2]</li>\n</ul>\n<p>Now I get an Array out of index error, what can I change?</p>\n<pre><code>public int[][] buildPyramid(List&lt;Integer&gt; inputNumbers) \n    throws CannotBuildPyramidException {\n\n    // Calculate the number of rows in the pyramid\n    int rows = (int) (Math.sqrt(inputNumbers.size() * 2) - 1);\n\n    // Initialize the 2D array that will hold the pyramid\n    int[][] pyramid = new int[rows][rows];\n\n    // Initialize the variables that will help us navigate through the pyramid\n    int row = 0;\n    int col = rows / 2;\n    boolean isDown = true;\n\n    // Iterate through the list of numbers and build the pyramid\n    for (int num : inputNumbers) {\n        pyramid[row][col] = num;\n\n        if (isDown) {\n            row++;\n        } else {\n            row--;\n            col--;\n        }\n\n        if (row == rows) {\n            row = rows - 2;\n            col++;\n            isDown = false;\n        } else if (row &lt; 0) {\n            row = 1;\n            isDown = true;\n        }\n    }\n\n    // Print the pyramid\n    for (int i = 0; i &lt; rows; i++) {\n        for (int j = 0; j &lt; rows; j++) {\n            if (pyramid[i][j] == 0) {\n                System.out.print(&quot;0 &quot;);\n            } else {\n                System.out.print(pyramid[i][j] + &quot; &quot;);\n            }\n        }\n        System.out.println();\n    }\n    return pyramid;\n}\n</code></pre>\n"},{"tags":["java","splunk","mulesoft","appender"],"comments":[{"owner":{"account_id":3110,"reputation":32932,"user_id":4418,"accept_rate":94,"display_name":"warren"},"score":0,"creation_date":1623324009,"post_id":67913798,"comment_id":120049703,"body_markdown":"What version of Splunk? What has changed in your log4j config from before the error to now? What has changed with your Splunk configuration since before the error to now?","body":"What version of Splunk? What has changed in your log4j config from before the error to now? What has changed with your Splunk configuration since before the error to now?"},{"owner":{"account_id":977507,"reputation":2280,"user_id":998126,"display_name":"Alexander Pavlov"},"score":0,"creation_date":1623333286,"post_id":67913798,"comment_id":120054262,"body_markdown":"it is classpath problem, ensure `splunk-library-javalogging-NNN.jar` is added to your classpath. Also, you can try remove `packages=&quot;...&quot;` attribute","body":"it is classpath problem, ensure <code>splunk-library-javalogging-NNN.jar</code> is added to your classpath. Also, you can try remove <code>packages=&quot;...&quot;</code> attribute"},{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1623346272,"post_id":67913798,"comment_id":120060317,"body_markdown":"If it worked before, something has to has changed. Please provide details of the version of Mule and whatever changes were made.","body":"If it worked before, something has to has changed. Please provide details of the version of Mule and whatever changes were made."},{"owner":{"account_id":446439,"reputation":2037,"user_id":2956829,"accept_rate":93,"display_name":"el n00b"},"score":1,"creation_date":1631900403,"post_id":67913798,"comment_id":122357684,"body_markdown":"Any updates on this? I&#39;m using splunk-library-javalogging:1.6.2 with log4j-core:2.14.1/log4-api:2.14.1","body":"Any updates on this? I&#39;m using splunk-library-javalogging:1.6.2 with log4j-core:2.14.1/log4-api:2.14.1"}],"owner":{"account_id":3686251,"reputation":71,"user_id":3069970,"display_name":"user3069970"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":864,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":0,"score":3,"last_activity_date":1671717120,"creation_date":1623291736,"question_id":67913798,"body_markdown":"Suddenly from 31/May/2021- we are getting this error\r\n&gt;ERROR Error processing element SplunkHttp ([Appenders: null]): CLASS_NOT_FOUND\r\n\r\nWe are using log4j2 configuration file for sending logs to Splunk.\r\n\r\nFull file below: Intentionally hiding host, port, token, env details.\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;Configuration status=&quot;INFO&quot; name=&quot;cloudhub&quot;\r\n        packages=&quot;com.mulesoft.ch.logging.appender,com.splunk.logging,org.apache.logging.log4j,com.mule.support&quot;&gt;\r\n            &lt;Appenders&gt;\r\n                    &lt;SplunkHttp name=&quot;SPLUNK-ONPREM&quot; source=&quot;app-dev&quot;\r\n                            url=&quot;host:port&quot; host=&quot;dummy-host&quot;\r\n                            token=&quot;token -value&quot; index=&quot;main&quot;\r\n                            disableCertificateValidation=&quot;true&quot;&gt;\r\n                            &lt;PatternLayout pattern=&quot;%-5p %d [%t] [event: %X{correlationId}] %c: %m%n&quot;&gt;&lt;/PatternLayout&gt;\r\n            &lt;/SplunkHttp&gt;\r\n            &lt;/Appenders&gt;\r\n            &lt;Loggers&gt;\r\n                    &lt;AsyncLogger\r\n                            name=&quot;org.mule.runtime.core.internal.processor.LoggerMessageProcessor&quot;\r\n                            level=&quot;INFO&quot; /&gt;\r\n                    &lt;AsyncLogger name=&quot;com.mulesoft.agent&quot; level=&quot;INFO&quot; /&gt;\r\n                    &lt;AsyncRoot level=&quot;INFO&quot;&gt;\r\n                            &lt;AppenderRef ref=&quot;SPLUNK-ONPREM&quot; /&gt;\r\n                    &lt;/AsyncRoot&gt;\r\n                    &lt;AsyncLogger name=&quot;com.gigaspaces&quot; level=&quot;ERROR&quot; /&gt;\r\n                    &lt;AsyncLogger name=&quot;com.j_spaces&quot; level=&quot;ERROR&quot; /&gt;\r\n                    &lt;AsyncLogger name=&quot;com.sun.jini&quot; level=&quot;ERROR&quot; /&gt;\r\n                    &lt;AsyncLogger name=&quot;net.jini&quot; level=&quot;ERROR&quot; /&gt;\r\n                    &lt;AsyncLogger name=&quot;org.apache&quot; level=&quot;WARN&quot; /&gt;\r\n                    &lt;AsyncLogger name=&quot;org.apache.cxf&quot; level=&quot;WARN&quot; /&gt;\r\n                    &lt;AsyncLogger name=&quot;org.springframework.beans.factory&quot;\r\n                            level=&quot;WARN&quot; /&gt;\r\n    \r\n                    &lt;AsyncLogger name=&quot;org.mule&quot; level=&quot;INFO&quot; /&gt;\r\n                    &lt;AsyncLogger name=&quot;com.mulesoft&quot; level=&quot;INFO&quot; /&gt;\r\n                    &lt;AsyncLogger name=&quot;org.jetel&quot; level=&quot;WARN&quot; /&gt;\r\n                    &lt;AsyncLogger name=&quot;Tracking&quot; level=&quot;WARN&quot; /&gt;\r\n                    &lt;AsyncLogger name=&quot;org.mule&quot; level=&quot;INFO&quot; /&gt;\r\n                    &lt;AsyncLogger name=&quot;com.mulesoft&quot; level=&quot;INFO&quot; /&gt;\r\n                    &lt;AsyncLogger name=&quot;org.mule.extensions.jms&quot; level=&quot;INFO&quot; /&gt;\r\n                    &lt;AsyncLogger name=&quot;org.mule.service.http.impl.service.HttpMessageLogger&quot;\r\n                            level=&quot;INFO&quot; /&gt;\r\n    \r\n                    &lt;AsyncLogger name=&quot;org.mule.extension.salesforce&quot; level=&quot;INFO&quot; /&gt;\r\n                    &lt;AsyncLogger name=&quot;org.mule.extension.ftp&quot; level=&quot;INFO&quot; /&gt;\r\n                    &lt;AsyncLogger name=&quot;org.mule.extension.sftp&quot; level=&quot;INFO&quot; /&gt;\r\n                    &lt;AsyncLogger name=&quot;com.mulesoft.extension.ftps&quot; level=&quot;INFO&quot; /&gt;\r\n                    &lt;AsyncLogger name=&quot;org.mule.modules.sap&quot; level=&quot;INFO&quot; /&gt;\r\n                    &lt;AsyncLogger name=&quot;com.mulesoft.extension.mq&quot; level=&quot;INFO&quot; /&gt;\r\n                    &lt;AsyncLogger name=&quot;com.mulesoft.mq&quot; level=&quot;INFO&quot; /&gt;\r\n                    &lt;AsyncLogger name=&quot;org.mule.extension.db&quot; level=&quot;INFO&quot; /&gt;\r\n                    &lt;AsyncLogger name=&quot;httpclient.wire&quot; level=&quot;DEBUG&quot; /&gt;\r\n                    &lt;AsyncLogger name=&quot;org.mule.transport.email&quot; level=&quot;DEBUG&quot; /&gt;\r\n    \r\n            &lt;/Loggers&gt;\r\n    &lt;/Configuration&gt;","title":"SplunkHttp Appender Error: ERROR Error processing element SplunkHttp ([Appenders: null]): CLASS_NOT_FOUND","body":"<p>Suddenly from 31/May/2021- we are getting this error</p>\n<blockquote>\n<p>ERROR Error processing element SplunkHttp ([Appenders: null]): CLASS_NOT_FOUND</p>\n</blockquote>\n<p>We are using log4j2 configuration file for sending logs to Splunk.</p>\n<p>Full file below: Intentionally hiding host, port, token, env details.</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;Configuration status=&quot;INFO&quot; name=&quot;cloudhub&quot;\n    packages=&quot;com.mulesoft.ch.logging.appender,com.splunk.logging,org.apache.logging.log4j,com.mule.support&quot;&gt;\n        &lt;Appenders&gt;\n                &lt;SplunkHttp name=&quot;SPLUNK-ONPREM&quot; source=&quot;app-dev&quot;\n                        url=&quot;host:port&quot; host=&quot;dummy-host&quot;\n                        token=&quot;token -value&quot; index=&quot;main&quot;\n                        disableCertificateValidation=&quot;true&quot;&gt;\n                        &lt;PatternLayout pattern=&quot;%-5p %d [%t] [event: %X{correlationId}] %c: %m%n&quot;&gt;&lt;/PatternLayout&gt;\n        &lt;/SplunkHttp&gt;\n        &lt;/Appenders&gt;\n        &lt;Loggers&gt;\n                &lt;AsyncLogger\n                        name=&quot;org.mule.runtime.core.internal.processor.LoggerMessageProcessor&quot;\n                        level=&quot;INFO&quot; /&gt;\n                &lt;AsyncLogger name=&quot;com.mulesoft.agent&quot; level=&quot;INFO&quot; /&gt;\n                &lt;AsyncRoot level=&quot;INFO&quot;&gt;\n                        &lt;AppenderRef ref=&quot;SPLUNK-ONPREM&quot; /&gt;\n                &lt;/AsyncRoot&gt;\n                &lt;AsyncLogger name=&quot;com.gigaspaces&quot; level=&quot;ERROR&quot; /&gt;\n                &lt;AsyncLogger name=&quot;com.j_spaces&quot; level=&quot;ERROR&quot; /&gt;\n                &lt;AsyncLogger name=&quot;com.sun.jini&quot; level=&quot;ERROR&quot; /&gt;\n                &lt;AsyncLogger name=&quot;net.jini&quot; level=&quot;ERROR&quot; /&gt;\n                &lt;AsyncLogger name=&quot;org.apache&quot; level=&quot;WARN&quot; /&gt;\n                &lt;AsyncLogger name=&quot;org.apache.cxf&quot; level=&quot;WARN&quot; /&gt;\n                &lt;AsyncLogger name=&quot;org.springframework.beans.factory&quot;\n                        level=&quot;WARN&quot; /&gt;\n\n                &lt;AsyncLogger name=&quot;org.mule&quot; level=&quot;INFO&quot; /&gt;\n                &lt;AsyncLogger name=&quot;com.mulesoft&quot; level=&quot;INFO&quot; /&gt;\n                &lt;AsyncLogger name=&quot;org.jetel&quot; level=&quot;WARN&quot; /&gt;\n                &lt;AsyncLogger name=&quot;Tracking&quot; level=&quot;WARN&quot; /&gt;\n                &lt;AsyncLogger name=&quot;org.mule&quot; level=&quot;INFO&quot; /&gt;\n                &lt;AsyncLogger name=&quot;com.mulesoft&quot; level=&quot;INFO&quot; /&gt;\n                &lt;AsyncLogger name=&quot;org.mule.extensions.jms&quot; level=&quot;INFO&quot; /&gt;\n                &lt;AsyncLogger name=&quot;org.mule.service.http.impl.service.HttpMessageLogger&quot;\n                        level=&quot;INFO&quot; /&gt;\n\n                &lt;AsyncLogger name=&quot;org.mule.extension.salesforce&quot; level=&quot;INFO&quot; /&gt;\n                &lt;AsyncLogger name=&quot;org.mule.extension.ftp&quot; level=&quot;INFO&quot; /&gt;\n                &lt;AsyncLogger name=&quot;org.mule.extension.sftp&quot; level=&quot;INFO&quot; /&gt;\n                &lt;AsyncLogger name=&quot;com.mulesoft.extension.ftps&quot; level=&quot;INFO&quot; /&gt;\n                &lt;AsyncLogger name=&quot;org.mule.modules.sap&quot; level=&quot;INFO&quot; /&gt;\n                &lt;AsyncLogger name=&quot;com.mulesoft.extension.mq&quot; level=&quot;INFO&quot; /&gt;\n                &lt;AsyncLogger name=&quot;com.mulesoft.mq&quot; level=&quot;INFO&quot; /&gt;\n                &lt;AsyncLogger name=&quot;org.mule.extension.db&quot; level=&quot;INFO&quot; /&gt;\n                &lt;AsyncLogger name=&quot;httpclient.wire&quot; level=&quot;DEBUG&quot; /&gt;\n                &lt;AsyncLogger name=&quot;org.mule.transport.email&quot; level=&quot;DEBUG&quot; /&gt;\n\n        &lt;/Loggers&gt;\n&lt;/Configuration&gt;\n</code></pre>\n"},{"tags":["java","spring-boot","docker","maven","intellij-idea"],"comments":[{"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"score":0,"creation_date":1671698411,"post_id":74885949,"comment_id":132155521,"body_markdown":"I don&#39;t understand what you are trying to do","body":"I don&#39;t understand what you are trying to do"},{"owner":{"account_id":27324853,"reputation":1,"user_id":20837979,"display_name":"Martin Baltuhin"},"score":0,"creation_date":1671699903,"post_id":74885949,"comment_id":132155922,"body_markdown":"I am trying to build my app inside a docker container every build, as opposed to building on the workstation itself. Is it possible?","body":"I am trying to build my app inside a docker container every build, as opposed to building on the workstation itself. Is it possible?"},{"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"score":0,"creation_date":1671700127,"post_id":74885949,"comment_id":132155984,"body_markdown":"Yes. You would need to run maven inside the Dockerfile","body":"Yes. You would need to run maven inside the Dockerfile"},{"owner":{"account_id":15396644,"reputation":25775,"user_id":11107541,"display_name":"starball"},"score":0,"creation_date":1671745654,"post_id":74885949,"comment_id":132169604,"body_markdown":"Please [edit] clarifications into you question post. Don&#39;t hide them in the comments.","body":"Please <a href=\"https://stackoverflow.com/posts/74885949/edit\">edit</a> clarifications into you question post. Don&#39;t hide them in the comments."},{"owner":{"account_id":27324853,"reputation":1,"user_id":20837979,"display_name":"Martin Baltuhin"},"score":0,"creation_date":1672838663,"post_id":74885949,"comment_id":132362537,"body_markdown":"I have stated everything i want to ask in the right order. I need to launch a container WHEN click to build my app INSIDE IDEA.","body":"I have stated everything i want to ask in the right order. I need to launch a container WHEN click to build my app INSIDE IDEA."}],"answers":[{"comments":[{"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"score":0,"creation_date":1671714464,"post_id":74888569,"comment_id":132160271,"body_markdown":"you should replace install with package. It&#39; makes no sense","body":"you should replace install with package. It&#39; makes no sense"},{"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"score":0,"creation_date":1671718283,"post_id":74888569,"comment_id":132161517,"body_markdown":"and you probably need to copy more than just the src directory","body":"and you probably need to copy more than just the src directory"},{"owner":{"account_id":27324853,"reputation":1,"user_id":20837979,"display_name":"Martin Baltuhin"},"score":0,"creation_date":1672838706,"post_id":74888569,"comment_id":132362555,"body_markdown":"i know how to do the Dockerfile. I need to make it automatic for builds inside Intellij Idea versus building on the actual host.","body":"i know how to do the Dockerfile. I need to make it automatic for builds inside Intellij Idea versus building on the actual host."}],"tags":[],"owner":{"account_id":3578314,"reputation":1458,"user_id":2987069,"display_name":"Yash Jagdale"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671717081,"creation_date":1671712274,"answer_id":74888569,"question_id":74885949,"body_markdown":"You are expecting something like this?\r\n\r\n    FROM eclipse-temurin:17-jdk-alpine as build\r\n    WORKDIR /workspace/app\r\n    \r\n    COPY mvnw .\r\n    COPY .mvn .mvn\r\n    COPY pom.xml .\r\n    COPY src src\r\n    \r\n    RUN ./mvnw package -DskipTests\r\n    \r\n    FROM eclipse-temurin:17-jdk-alpine\r\n    ARG JAR_FILE=target/*.jar\r\n    VOLUME /tmp\r\n    ARG DEPENDENCY=/workspace/app/target/dependency\r\n    COPY --from=build  /workspace/app/${JAR_FILE} /app/\r\n    ENTRYPOINT [&quot;sh&quot;, &quot;-c&quot;, &quot;java ${JAVA_OPTS} -jar /app.jar ${0} ${@}&quot;]\r\n   \r\n\r\nYou can use the maven container as a build container to save maven installation time in case it takes. ","title":"How to build spring boot app in Intellij IDEA in a docker image within the IDE?","body":"<p>You are expecting something like this?</p>\n<pre><code>FROM eclipse-temurin:17-jdk-alpine as build\nWORKDIR /workspace/app\n\nCOPY mvnw .\nCOPY .mvn .mvn\nCOPY pom.xml .\nCOPY src src\n\nRUN ./mvnw package -DskipTests\n\nFROM eclipse-temurin:17-jdk-alpine\nARG JAR_FILE=target/*.jar\nVOLUME /tmp\nARG DEPENDENCY=/workspace/app/target/dependency\nCOPY --from=build  /workspace/app/${JAR_FILE} /app/\nENTRYPOINT [&quot;sh&quot;, &quot;-c&quot;, &quot;java ${JAVA_OPTS} -jar /app.jar ${0} ${@}&quot;]\n</code></pre>\n<p>You can use the maven container as a build container to save maven installation time in case it takes.</p>\n"}],"owner":{"account_id":27324853,"reputation":1,"user_id":20837979,"display_name":"Martin Baltuhin"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":402,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1671717081,"creation_date":1671697864,"question_id":74885949,"body_markdown":"I need to replicate the build in our CI/CD tool in the dev workstations of the developers by making Intellij IDEA build within a docker container instead of the current system. Is this doable? I find similar threads with launching the app inside (that i don&#39;t need), i need it only as a build environment. I already have the Docker plugin installed but i fail to see how to make it as a build environment.\r\n\r\nI have installed the docker plugin, prepared the image. I have docker installed on the workstation.","title":"How to build spring boot app in Intellij IDEA in a docker image within the IDE?","body":"<p>I need to replicate the build in our CI/CD tool in the dev workstations of the developers by making Intellij IDEA build within a docker container instead of the current system. Is this doable? I find similar threads with launching the app inside (that i don't need), i need it only as a build environment. I already have the Docker plugin installed but i fail to see how to make it as a build environment.</p>\n<p>I have installed the docker plugin, prepared the image. I have docker installed on the workstation.</p>\n"},{"tags":["java","inheritance","annotations","lombok"],"answers":[{"tags":[],"owner":{"account_id":5244521,"reputation":327,"user_id":4190682,"display_name":"Maneki"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671716772,"creation_date":1671716772,"answer_id":74889401,"question_id":74663687,"body_markdown":"You&#39;ve just need to cast it like this :\r\n\r\n    ((PoliceStation) city.getStation()).setPoliceStationName(&quot;SFPD&quot;);","title":"How can I use @SuperBuilder and @Data to be able to access a subclasses properties when it is a member of another class?","body":"<p>You've just need to cast it like this :</p>\n<pre><code>((PoliceStation) city.getStation()).setPoliceStationName(&quot;SFPD&quot;);\n</code></pre>\n"}],"owner":{"account_id":21341966,"reputation":81,"user_id":15712331,"display_name":"jgialis"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":114,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1671716772,"creation_date":1670036800,"question_id":74663687,"body_markdown":"Sorry, my title might be a bit confusing but I am already pretty confused my self and I am not sure how best to word it with out confusing more or using incorrect terms/concepts.\r\n\r\nAnyways, here is my situation:\r\n\r\n    public class Main {\r\n        public static void main(String [] args) {\r\n            City city = getCity();\r\n            city.getStation().setPoliceStationName(&quot;SFPD&quot;) //ERROR?\r\n            city.setPoliceStationName(&quot;SFPD&quot;); //ERROR?\r\n        }\r\n    \r\n        public static City getCity(){\r\n            return City\r\n                .builder()\r\n                .station(getPoliceStation())\r\n                .cityName(&quot;CityName&quot;)\r\n                .build();\r\n        }\r\n    \r\n        public static PoliceStation getPoliceStation(){\r\n            return PoliceStation\r\n                .builder()\r\n                .policeStationName(&quot;NYPD&quot;)\r\n                .build();\r\n        }\r\n    }\r\n\r\nI have another set of classes here:\r\n\r\n    @Data\r\n    @SuperBuilder\r\n    public class City {\r\n        private String cityName;\r\n        private Station station;\r\n    }\r\n    \r\n    @Data\r\n    @SuperBuilder\r\n    public abstract class Station {\r\n        private String stationName;\r\n    }\r\n    \r\n    @EqualsAndHashCode(callSuper = true)\r\n    @Data\r\n    @SuperBuilder\r\n    public class PoliceStation extends Station{\r\n        private String policeStationName;\r\n    }\r\n\r\nI would like to try and be able to modify the name of the police station, but it seems that the type returned is of type Station and **not** PoliceStation. How can I go about achieving this with a setup similar to this (using lombok)?\r\n\r\nThanks \r\n","title":"How can I use @SuperBuilder and @Data to be able to access a subclasses properties when it is a member of another class?","body":"<p>Sorry, my title might be a bit confusing but I am already pretty confused my self and I am not sure how best to word it with out confusing more or using incorrect terms/concepts.</p>\n<p>Anyways, here is my situation:</p>\n<pre><code>public class Main {\n    public static void main(String [] args) {\n        City city = getCity();\n        city.getStation().setPoliceStationName(&quot;SFPD&quot;) //ERROR?\n        city.setPoliceStationName(&quot;SFPD&quot;); //ERROR?\n    }\n\n    public static City getCity(){\n        return City\n            .builder()\n            .station(getPoliceStation())\n            .cityName(&quot;CityName&quot;)\n            .build();\n    }\n\n    public static PoliceStation getPoliceStation(){\n        return PoliceStation\n            .builder()\n            .policeStationName(&quot;NYPD&quot;)\n            .build();\n    }\n}\n</code></pre>\n<p>I have another set of classes here:</p>\n<pre><code>@Data\n@SuperBuilder\npublic class City {\n    private String cityName;\n    private Station station;\n}\n\n@Data\n@SuperBuilder\npublic abstract class Station {\n    private String stationName;\n}\n\n@EqualsAndHashCode(callSuper = true)\n@Data\n@SuperBuilder\npublic class PoliceStation extends Station{\n    private String policeStationName;\n}\n</code></pre>\n<p>I would like to try and be able to modify the name of the police station, but it seems that the type returned is of type Station and <strong>not</strong> PoliceStation. How can I go about achieving this with a setup similar to this (using lombok)?</p>\n<p>Thanks</p>\n"},{"tags":["java","mysql","swing"],"comments":[{"owner":{"account_id":114128,"reputation":50467,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":2,"creation_date":1671716660,"post_id":74889112,"comment_id":132160991,"body_markdown":"Separate your concerns.  Read your database rows into a `java.util.List`.  You can test this piece separately from your GUI.  Then create your GUI using the `List` and an `int` index to move backward and forward through the `List`.","body":"Separate your concerns.  Read your database rows into a <code>java.util.List</code>.  You can test this piece separately from your GUI.  Then create your GUI using the <code>List</code> and an <code>int</code> index to move backward and forward through the <code>List</code>."}],"answers":[{"tags":[],"owner":{"account_id":3537420,"reputation":400,"user_id":2955337,"display_name":"sleepyhead"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671716438,"creation_date":1671716438,"answer_id":74889350,"question_id":74889112,"body_markdown":"rs stands for result set, which is the result from the sql query. In getStocks the while loop goes over each row and adds the results into a list of models. Your nextRecord, does not have an rs, because there is no variable in that method. You call getStocks that returns a list of models as an list-array and you can iterate over the models or just pick the first models unit\r\n\r\nstring unit = models.get(0).getUnit\r\n\r\nI don&#39;t understand what nextRecord is supposed to do, but it may also need that you first have to execute an sql query, which you can then do a while(rs.next()) over, unless you get only one row, then just read the rs directly without loop\r\n\r\n\r\n","title":"how to navigate through records with java swing sql query","body":"<p>rs stands for result set, which is the result from the sql query. In getStocks the while loop goes over each row and adds the results into a list of models. Your nextRecord, does not have an rs, because there is no variable in that method. You call getStocks that returns a list of models as an list-array and you can iterate over the models or just pick the first models unit</p>\n<p>string unit = models.get(0).getUnit</p>\n<p>I don't understand what nextRecord is supposed to do, but it may also need that you first have to execute an sql query, which you can then do a while(rs.next()) over, unless you get only one row, then just read the rs directly without loop</p>\n"}],"owner":{"account_id":26762048,"reputation":7,"user_id":20359835,"display_name":"weit"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":70,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1671716438,"creation_date":1671715160,"question_id":74889112,"body_markdown":"I need to navigate between records using sql query in java swing project that I wrote using mvc architecture in eclipse. how can I do that? \r\nPlease help me. Stackoverflow still asks me for clarification o i don&#39;t know how to explain further\r\n\r\nhere is my code\r\n```\r\npackage model;\r\n\r\nimport java.sql.Connection;\r\nimport java.sql.DriverManager;\r\nimport java.sql.PreparedStatement;\r\nimport java.sql.ResultSet;\r\nimport java.sql.SQLException;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\nimport java.util.logging.Level;\r\nimport java.util.logging.Logger;\r\nimport controller.MainController;\r\n\r\npublic class MainModel {\r\n\t\r\n\r\n\tpublic Connection  connection;\r\n\tpublic PreparedStatement statement;\r\n\t\r\n\tprivate static String dburl = &quot;jdbc:mysql://localhost:3306/stok1&quot;;\r\n\tprivate static String username = &quot;root&quot;;\r\n\tprivate static String password = &quot;&quot;;\r\n\t\r\n\tprivate String stockCode;\r\n    private String stockName;\r\n    private int stockType;\r\n    private String unit;\r\n    private String barcode;\r\n    private double kdv;\r\n    private String explanation;\r\n    private String createDate;\r\n    private ResultSet rs;\r\n    \r\n\tpublic String getStockCode() {\r\n\t\treturn stockCode;\r\n\t}\r\n\tpublic void setStockCode(String stockCode) {\r\n\t\tthis.stockCode = stockCode;\r\n\t}\r\n\tpublic String getStockName() {\r\n\t\treturn stockName;\r\n\t}\r\n\tpublic void setStockName(String stockName) {\r\n\t\tthis.stockName = stockName;\r\n\t}\r\n\tpublic int getStockType() {\r\n\t\treturn stockType;\r\n\t}\r\n\tpublic void setStockType(int stockType) {\r\n\t\tthis.stockType = stockType;\r\n\t}\r\n\tpublic String getUnit() {\r\n\t\treturn unit;\r\n\t}\r\n\tpublic void setUnit(String unit) {\r\n\t\tthis.unit = unit;\r\n\t}\r\n\tpublic String getBarcode() {\r\n\t\treturn barcode;\r\n\t}\r\n\tpublic void setBarcode(String barcode) {\r\n\t\tthis.barcode = barcode;\r\n\t}\r\n\tpublic double getKdv() {\r\n\t\treturn kdv;\r\n\t}\r\n\tpublic void setKdv(double kdv) {\r\n\t\tthis.kdv = kdv;\r\n\t}\r\n\tpublic String getExplanation() {\r\n\t\treturn explanation;\r\n\t}\r\n\tpublic void setExplanation(String explanation) {\r\n\t\tthis.explanation = explanation;\r\n\t}\r\n\tpublic String getCreateDate() {\r\n\t\treturn createDate;\r\n\t}\r\n\tpublic void setCreateDate(String createDate) {\r\n\t\tthis.createDate = createDate;\r\n\t}\r\n\t\r\n\r\npublic class Service {\r\n\t\t\r\n\t\tprivate List&lt;MainModel&gt; models;\r\n\t\t\r\n\t\tpublic Service() {\r\n\t\t\tmodels = new ArrayList&lt;&gt;();\r\n\t\t}\r\n\t\t\r\n\t\tpublic void save (MainModel model) {\r\n\t\t\tmodels.add(model);\r\n\t\t}\r\n\t\t\r\n\t\tpublic void copy (MainModel model) {\r\n\t\t\tmodels.add(model);\r\n\t\t}\r\n\t\t\r\n\t\tpublic void update (MainModel model) {\r\n\t\t\tfor(int i=0; i&lt;models.size();i++) { \r\n\t\t\tMainModel stc = models.get(i);\r\n\t\t\tif(stc.getStockCode().equals(model.getStockCode())) {\r\n\t\t\t\tmodels.set(i, model);\r\n\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tpublic void delete (MainModel model) {\r\n\t\t\tfor(int i=0; i&lt;models.size();i++) { \r\n\t\t\t\tMainModel stc = models.get(i);\r\n\t\t\t\tif(stc.getStockCode().equals(model.getStockCode())) {\r\n\t\t\t\t\tmodels.remove(i);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tpublic List&lt;MainModel&gt; getStocks(){\r\n\t\t\t\r\n\t\t\treturn models;\r\n\t\t}\r\n\r\n\t}\r\n\t\r\n\tprivate Connection getConnection() {\r\n\t\ttry {\r\n\t\t\tif(connection == null) {\r\n\t\t\t\tconnection = DriverManager.getConnection(dburl,username,password);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}catch (Exception ex){\r\n\t\t\tLogger.getLogger(MainModel.class.getName()).log(Level.SEVERE, null, ex);\r\n\t\t}\r\n\t\treturn connection;\r\n\t}\r\n\t\r\n\tpublic void save (MainModel model) {\r\n\t\t\r\n\t\ttry {\r\n\t\t\t\r\n\t\t\tstatement =  getConnection().prepareStatement(&quot;select stokKodu from stockcard1 where stokKodu=?&quot;);\r\n\t\t\tstatement.setString(1, model.getStockCode()); \r\n\t\t\tResultSet rs =statement.executeQuery();\r\n\t\t\tstatement =  getConnection().prepareStatement(&quot;insert into stockcard1 values(?,?,?,?,?,?,?,?)&quot;);\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tstatement.setString(1, model.getStockCode());\r\n\t\t\tstatement.setString(2, model.getStockName());\r\n\t\t\tstatement.setInt(3, model.getStockType()+1);\r\n\t\t\tstatement.setString(4, model.getUnit());\r\n\t\t\tstatement.setString(5, model.getBarcode());\r\n\t\t\tstatement.setDouble(6, model.getKdv());\r\n\t\t\tstatement.setString(7, model.getExplanation());\r\n\t\t\tstatement.setString(8,  model.getCreateDate());\r\n\t\t\tstatement.executeUpdate();\r\n\t\t\t//getConnection().close();\r\n\t\t\t\r\n\t\t}catch (Exception ex){\r\n\t\t\tLogger.getLogger(MainModel.class.getName()).log(Level.SEVERE, null, ex);\r\n\t\t}\r\n\t\r\n\t\t\r\n\t}\r\n\t\r\n\tpublic void copy (MainModel model) {\r\n\t\ttry {\r\n\t\t\t\t\t\r\n\t\t\t\t\tstatement =  getConnection().prepareStatement(&quot;select stokKodu from stockcard1 where stokKodu=?&quot;);\r\n\t\t\t\t\tstatement.setString(1, model.getStockCode()); \r\n\t\t\t\t\tResultSet rs =statement.executeQuery();\r\n\t\t\t\t\tstatement =  getConnection().prepareStatement(&quot;insert into stockcard1 values(?,?,?,?,?,?,?,?)&quot;);\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\tstatement.setString(1, model.getStockCode());\r\n\t\t\t\t\tstatement.setString(2, model.getStockName());\r\n\t\t\t\t\tstatement.setInt(3, model.getStockType()+1);\r\n\t\t\t\t\tstatement.setString(4, model.getUnit());\r\n\t\t\t\t\tstatement.setString(5, model.getBarcode());\r\n\t\t\t\t\tstatement.setDouble(6, model.getKdv());\r\n\t\t\t\t\tstatement.setString(7, model.getExplanation());\r\n\t\t\t\t\tstatement.setString(8,  model.getCreateDate());\r\n\t\t\t\t\tstatement.executeUpdate();\r\n\t\t\t\t\t\r\n\t\t\t\t}catch (Exception ex){\r\n\t\t\t\t\tLogger.getLogger(MainModel.class.getName()).log(Level.SEVERE, null, ex);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\r\n\tpublic void update (MainModel model) {\r\n\t\ttry {\r\n\t\t\tstatement =  getConnection().prepareStatement(&quot;update stockcard1 set stokAdi=?, stokTipi=?, birimi=?, barkodu=?, kdvTipi=?, aciklama=?, olusturmaTarihi=? where stokKodu=?&quot;);\r\n\t\t\tstatement.setString(1, model.getStockName());\r\n\t\t\tstatement.setInt(2, model.getStockType()+1);\r\n\t\t\tstatement.setString(3, model.getUnit());\r\n\t\t\tstatement.setString(4, model.getBarcode());\r\n\t\t\tstatement.setDouble(5, model.getKdv());\r\n\t\t\tstatement.setString(6, model.getExplanation());\r\n\t\t\tstatement.setString(7,  model.getCreateDate());\r\n\t\t\tstatement.setString(8, model.getStockCode());\r\n\t\t\tstatement.executeUpdate();\r\n\t\t\t//getConnection().close();\r\n\t\t}catch (Exception ex){\r\n\t\t}\r\n\t}\r\n\t\r\n\tpublic void delete (MainModel model) {\r\n\t\ttry {\r\n\t\t\tstatement =  getConnection().prepareStatement(&quot;delete from stockcard1 where stokKodu=?&quot;);\r\n\t\t\tstatement.setString(1, model.getStockCode());\r\n\t\t\tstatement.executeUpdate();\r\n\t\t\t//getConnection().close();\r\n\t\t}catch (Exception ex){\r\n\t\t}\r\n\t}\r\n\t\r\n\tpublic void nextRecord() {\r\n\t    try {\r\n\t        // Bir sonraki kayda ge&#231;i yap\r\n\t        if (rs.next()) {\r\n\t            getStocks(barcode);\r\n\t        }\r\n\t    } catch (SQLException e) {\r\n\t        e.printStackTrace();\r\n\t    }\r\n\t}\r\n\r\n\t\r\n\t\r\n\tpublic List&lt;MainModel&gt; getStocks(String Stock_Code) {\r\n\t\t\r\n\t\ttry {\r\n\t\t\t\r\n\t\t\tif (Stock_Code !=null) {\r\n\t\t\t\tstatement =  getConnection().prepareStatement(&quot;select stokKodu,stokAdi,stokTipi,birimi,barkodu,kdvTipi,aciklama,olusturmaTarihi from stockcard1 where &quot;\r\n\t\t\t\t\t\t+ &quot;stokKodu=? or stokAdi=?&quot;);\r\n\t\t\t\tstatement.setString(1, Stock_Code);\r\n\t\t\t\tstatement.setString(2, Stock_Code);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tstatement =  getConnection().prepareStatement(&quot;select * from stockcard1&quot;);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t\trs =statement.executeQuery();\r\n\t\t\tList&lt;MainModel&gt; models = new ArrayList&lt;&gt;();\r\n\t\t\twhile(rs.next()) {\r\n\t\t\t\tMainModel model = new MainModel();\r\n\t\t\t\tmodel.setStockCode(rs.getString(&quot;stokKodu&quot;));\r\n\t\t\t\tmodel.setStockCode(rs.getString(&quot;stokKodu&quot;));\r\n\t\t\t\tmodel.setStockName(rs.getString(&quot;stokAdi&quot;));\r\n\t\t\t\tmodel.setStockType(rs.getInt(&quot;stokTipi&quot;));\r\n\t\t\t\tmodel.setUnit(rs.getString(&quot;birimi&quot;));\r\n\t\t\t\tmodel.setBarcode(rs.getString(&quot;barkodu&quot;));\r\n\t\t\t\tmodel.setKdv(rs.getDouble(&quot;kdvTipi&quot;));\r\n\t\t\t\tmodel.setExplanation(rs.getString(&quot;aciklama&quot;));\r\n\t\t\t\tmodel.setCreateDate(rs.getString(&quot;olusturmaTarihi&quot;));\r\n\t\t\t\tmodels.add(model);\r\n\t\t\t}\r\n\t\t\treturn models;\r\n\t\t}catch (Exception ex){\r\n\t\t\tLogger.getLogger(MainController.class.getName()).log(Level.SEVERE, null, ex);\r\n\t\t}\r\n\t\treturn new ArrayList&lt;&gt;();\r\n\t}\r\n\t\r\n}\r\n\r\n```\r\nI searched that I could navigate with the rs.next command, but I couldn&#39;t add it to my own code.","title":"how to navigate through records with java swing sql query","body":"<p>I need to navigate between records using sql query in java swing project that I wrote using mvc architecture in eclipse. how can I do that?\nPlease help me. Stackoverflow still asks me for clarification o i don't know how to explain further</p>\n<p>here is my code</p>\n<pre><code>package model;\n\nimport java.sql.Connection;\nimport java.sql.DriverManager;\nimport java.sql.PreparedStatement;\nimport java.sql.ResultSet;\nimport java.sql.SQLException;\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.logging.Level;\nimport java.util.logging.Logger;\nimport controller.MainController;\n\npublic class MainModel {\n    \n\n    public Connection  connection;\n    public PreparedStatement statement;\n    \n    private static String dburl = &quot;jdbc:mysql://localhost:3306/stok1&quot;;\n    private static String username = &quot;root&quot;;\n    private static String password = &quot;&quot;;\n    \n    private String stockCode;\n    private String stockName;\n    private int stockType;\n    private String unit;\n    private String barcode;\n    private double kdv;\n    private String explanation;\n    private String createDate;\n    private ResultSet rs;\n    \n    public String getStockCode() {\n        return stockCode;\n    }\n    public void setStockCode(String stockCode) {\n        this.stockCode = stockCode;\n    }\n    public String getStockName() {\n        return stockName;\n    }\n    public void setStockName(String stockName) {\n        this.stockName = stockName;\n    }\n    public int getStockType() {\n        return stockType;\n    }\n    public void setStockType(int stockType) {\n        this.stockType = stockType;\n    }\n    public String getUnit() {\n        return unit;\n    }\n    public void setUnit(String unit) {\n        this.unit = unit;\n    }\n    public String getBarcode() {\n        return barcode;\n    }\n    public void setBarcode(String barcode) {\n        this.barcode = barcode;\n    }\n    public double getKdv() {\n        return kdv;\n    }\n    public void setKdv(double kdv) {\n        this.kdv = kdv;\n    }\n    public String getExplanation() {\n        return explanation;\n    }\n    public void setExplanation(String explanation) {\n        this.explanation = explanation;\n    }\n    public String getCreateDate() {\n        return createDate;\n    }\n    public void setCreateDate(String createDate) {\n        this.createDate = createDate;\n    }\n    \n\npublic class Service {\n        \n        private List&lt;MainModel&gt; models;\n        \n        public Service() {\n            models = new ArrayList&lt;&gt;();\n        }\n        \n        public void save (MainModel model) {\n            models.add(model);\n        }\n        \n        public void copy (MainModel model) {\n            models.add(model);\n        }\n        \n        public void update (MainModel model) {\n            for(int i=0; i&lt;models.size();i++) { \n            MainModel stc = models.get(i);\n            if(stc.getStockCode().equals(model.getStockCode())) {\n                models.set(i, model);\n                break;\n                }\n            }\n        }\n        \n        public void delete (MainModel model) {\n            for(int i=0; i&lt;models.size();i++) { \n                MainModel stc = models.get(i);\n                if(stc.getStockCode().equals(model.getStockCode())) {\n                    models.remove(i);\n                    break;\n                }\n            }\n        }\n        \n        public List&lt;MainModel&gt; getStocks(){\n            \n            return models;\n        }\n\n    }\n    \n    private Connection getConnection() {\n        try {\n            if(connection == null) {\n                connection = DriverManager.getConnection(dburl,username,password);\n            }\n            \n        }catch (Exception ex){\n            Logger.getLogger(MainModel.class.getName()).log(Level.SEVERE, null, ex);\n        }\n        return connection;\n    }\n    \n    public void save (MainModel model) {\n        \n        try {\n            \n            statement =  getConnection().prepareStatement(&quot;select stokKodu from stockcard1 where stokKodu=?&quot;);\n            statement.setString(1, model.getStockCode()); \n            ResultSet rs =statement.executeQuery();\n            statement =  getConnection().prepareStatement(&quot;insert into stockcard1 values(?,?,?,?,?,?,?,?)&quot;);\n            \n            \n            statement.setString(1, model.getStockCode());\n            statement.setString(2, model.getStockName());\n            statement.setInt(3, model.getStockType()+1);\n            statement.setString(4, model.getUnit());\n            statement.setString(5, model.getBarcode());\n            statement.setDouble(6, model.getKdv());\n            statement.setString(7, model.getExplanation());\n            statement.setString(8,  model.getCreateDate());\n            statement.executeUpdate();\n            //getConnection().close();\n            \n        }catch (Exception ex){\n            Logger.getLogger(MainModel.class.getName()).log(Level.SEVERE, null, ex);\n        }\n    \n        \n    }\n    \n    public void copy (MainModel model) {\n        try {\n                    \n                    statement =  getConnection().prepareStatement(&quot;select stokKodu from stockcard1 where stokKodu=?&quot;);\n                    statement.setString(1, model.getStockCode()); \n                    ResultSet rs =statement.executeQuery();\n                    statement =  getConnection().prepareStatement(&quot;insert into stockcard1 values(?,?,?,?,?,?,?,?)&quot;);\n                    \n                    \n                    statement.setString(1, model.getStockCode());\n                    statement.setString(2, model.getStockName());\n                    statement.setInt(3, model.getStockType()+1);\n                    statement.setString(4, model.getUnit());\n                    statement.setString(5, model.getBarcode());\n                    statement.setDouble(6, model.getKdv());\n                    statement.setString(7, model.getExplanation());\n                    statement.setString(8,  model.getCreateDate());\n                    statement.executeUpdate();\n                    \n                }catch (Exception ex){\n                    Logger.getLogger(MainModel.class.getName()).log(Level.SEVERE, null, ex);\n                }\n            }\n    \n    public void update (MainModel model) {\n        try {\n            statement =  getConnection().prepareStatement(&quot;update stockcard1 set stokAdi=?, stokTipi=?, birimi=?, barkodu=?, kdvTipi=?, aciklama=?, olusturmaTarihi=? where stokKodu=?&quot;);\n            statement.setString(1, model.getStockName());\n            statement.setInt(2, model.getStockType()+1);\n            statement.setString(3, model.getUnit());\n            statement.setString(4, model.getBarcode());\n            statement.setDouble(5, model.getKdv());\n            statement.setString(6, model.getExplanation());\n            statement.setString(7,  model.getCreateDate());\n            statement.setString(8, model.getStockCode());\n            statement.executeUpdate();\n            //getConnection().close();\n        }catch (Exception ex){\n        }\n    }\n    \n    public void delete (MainModel model) {\n        try {\n            statement =  getConnection().prepareStatement(&quot;delete from stockcard1 where stokKodu=?&quot;);\n            statement.setString(1, model.getStockCode());\n            statement.executeUpdate();\n            //getConnection().close();\n        }catch (Exception ex){\n        }\n    }\n    \n    public void nextRecord() {\n        try {\n            // Bir sonraki kayda gei yap\n            if (rs.next()) {\n                getStocks(barcode);\n            }\n        } catch (SQLException e) {\n            e.printStackTrace();\n        }\n    }\n\n    \n    \n    public List&lt;MainModel&gt; getStocks(String Stock_Code) {\n        \n        try {\n            \n            if (Stock_Code !=null) {\n                statement =  getConnection().prepareStatement(&quot;select stokKodu,stokAdi,stokTipi,birimi,barkodu,kdvTipi,aciklama,olusturmaTarihi from stockcard1 where &quot;\n                        + &quot;stokKodu=? or stokAdi=?&quot;);\n                statement.setString(1, Stock_Code);\n                statement.setString(2, Stock_Code);\n            }\n            else {\n                statement =  getConnection().prepareStatement(&quot;select * from stockcard1&quot;);\n            }\n            \n            \n            rs =statement.executeQuery();\n            List&lt;MainModel&gt; models = new ArrayList&lt;&gt;();\n            while(rs.next()) {\n                MainModel model = new MainModel();\n                model.setStockCode(rs.getString(&quot;stokKodu&quot;));\n                model.setStockCode(rs.getString(&quot;stokKodu&quot;));\n                model.setStockName(rs.getString(&quot;stokAdi&quot;));\n                model.setStockType(rs.getInt(&quot;stokTipi&quot;));\n                model.setUnit(rs.getString(&quot;birimi&quot;));\n                model.setBarcode(rs.getString(&quot;barkodu&quot;));\n                model.setKdv(rs.getDouble(&quot;kdvTipi&quot;));\n                model.setExplanation(rs.getString(&quot;aciklama&quot;));\n                model.setCreateDate(rs.getString(&quot;olusturmaTarihi&quot;));\n                models.add(model);\n            }\n            return models;\n        }catch (Exception ex){\n            Logger.getLogger(MainController.class.getName()).log(Level.SEVERE, null, ex);\n        }\n        return new ArrayList&lt;&gt;();\n    }\n    \n}\n\n</code></pre>\n<p>I searched that I could navigate with the rs.next command, but I couldn't add it to my own code.</p>\n"},{"tags":["java","oracle","java-7","objectinputstream","objectoutputstream"],"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1428029501,"post_id":29424389,"comment_id":47022302,"body_markdown":"Never used it. One use would be as a protocol sanity check to ensure the sender was using `writeUnshared().` If he isn&#39;t the exception described will result.","body":"Never used it. One use would be as a protocol sanity check to ensure the sender was using <code>writeUnshared().</code> If he isn&#39;t the exception described will result."}],"answers":[{"tags":[],"owner":{"account_id":10282,"reputation":5778,"user_id":19347,"accept_rate":80,"display_name":"FoxyBOA"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1454601079,"creation_date":1438344899,"answer_id":31745963,"question_id":29424389,"body_markdown":"I believe it could be very special cases related to security(?). Like this one (from [here][1]).\r\n\r\n&gt; A.6\tGuarding Unshared Deserialized Objects\r\n&gt; \r\n&gt; If a class has any private or package private object reference fields,\r\n&gt; and the class depends on the fact that these object references are not\r\n&gt; available outside the class (or package), then either the referenced\r\n&gt; objects must be defensively copied as part of the deserialization\r\n&gt; process, or else the ObjectOutputStream.writeUnshared and\r\n&gt; ObjectInputStream.readUnshared methods (introduced in version 1.4 of\r\n&gt; the JavaTM 2 SDK, Standard Edition) should be used to ensure unique\r\n&gt; references to the internal objects.\r\n&gt; \r\n&gt; In the copying approach, the sub-objects deserialized from the stream\r\n&gt; should be treated as &quot;untrusted input&quot;: newly created objects,\r\n&gt; initialized to have the same value as the deserialized sub-objects,\r\n&gt; should be substituted for the sub-objects by the readObject method.\r\n&gt; For example, suppose an object has a private byte array field, b, that\r\n&gt; must remain private:\r\n&gt; \r\n&gt;      private void readObject(ObjectInputStream s)\r\n&gt;         throws IOException, ClassNotFoundException\r\n&gt;     {\r\n&gt;         s.defaultReadObject();\r\n&gt; \r\n&gt;         b = (byte[])b.clone();\r\n&gt; \r\n&gt;         if (&lt;invariants are not satisfied&gt;)\r\n&gt;             throw new java.io.StreamCorruptedException();\r\n&gt;     }\r\n&gt; This issue is particularly important when considering serialization of\r\n&gt; immutable objects containing internal (necessarily private) references to\r\n&gt; mutable sub-objects. If no special measures are taken to copy the sub-objects\r\n&gt; during deserialization of the container object, then a malicious party with \r\n&gt; write access to the serialization stream may violate the container object&#39;s \r\n&gt; immutability by forging references to its mutable sub-objects, and using these \r\n&gt; references to change the internal state of the container object. Thus, in this \r\n&gt; case it is imperative that the immutable container class provide a\r\n&gt; class-specific deserialization method which makes private copies of\r\n&gt; each mutable component object it deserializes. Note that for the\r\n&gt; purpose of maintaining immutability, it is unnecessary to copy\r\n&gt; immutable component objects.\r\n&gt; \r\n&gt; It is also important to note that calling clone may not always be the\r\n&gt; right way to defensively copy a sub-object. If the clone method cannot\r\n&gt; be counted on to produce an independent copy (and not to &quot;steal&quot; a\r\n&gt; reference to the copy), an alternative means should be used to produce\r\n&gt; the copy. An alternative means of copying should always be used if the\r\n&gt; class of the sub-object is not final, since the clone method or helper\r\n&gt; methods that it calls may be overridden by subclasses.\r\n&gt; \r\n&gt; Starting in version 1.4 of the JavaTM 2 SDK, Standard Edition, unique\r\n&gt; references to deserialized objects can also be ensured by using the\r\n&gt; ObjectOutputStream.writeUnshared and ObjectInputStream.readUnshared\r\n&gt; methods, thus avoiding the complication, performance costs and memory\r\n&gt; overhead of defensive copying.\r\n\r\n  [1]: http://www.cs.mun.ca/java-api-1.5/guide/serialization/spec/security.html","title":"When would one use ObjectInputStream.readUnshared() vs .readObject()?","body":"<p>I believe it could be very special cases related to security(?). Like this one (from <a href=\"http://www.cs.mun.ca/java-api-1.5/guide/serialization/spec/security.html\" rel=\"nofollow\">here</a>).</p>\n\n<blockquote>\n  <p>A.6   Guarding Unshared Deserialized Objects</p>\n  \n  <p>If a class has any private or package private object reference fields,\n  and the class depends on the fact that these object references are not\n  available outside the class (or package), then either the referenced\n  objects must be defensively copied as part of the deserialization\n  process, or else the ObjectOutputStream.writeUnshared and\n  ObjectInputStream.readUnshared methods (introduced in version 1.4 of\n  the JavaTM 2 SDK, Standard Edition) should be used to ensure unique\n  references to the internal objects.</p>\n  \n  <p>In the copying approach, the sub-objects deserialized from the stream\n  should be treated as \"untrusted input\": newly created objects,\n  initialized to have the same value as the deserialized sub-objects,\n  should be substituted for the sub-objects by the readObject method.\n  For example, suppose an object has a private byte array field, b, that\n  must remain private:</p>\n\n<pre><code> private void readObject(ObjectInputStream s)\n    throws IOException, ClassNotFoundException\n{\n    s.defaultReadObject();\n\n    b = (byte[])b.clone();\n\n    if (&lt;invariants are not satisfied&gt;)\n        throw new java.io.StreamCorruptedException();\n}\n</code></pre>\n  \n  <p>This issue is particularly important when considering serialization of\n  immutable objects containing internal (necessarily private) references to\n  mutable sub-objects. If no special measures are taken to copy the sub-objects\n  during deserialization of the container object, then a malicious party with \n  write access to the serialization stream may violate the container object's \n  immutability by forging references to its mutable sub-objects, and using these \n  references to change the internal state of the container object. Thus, in this \n  case it is imperative that the immutable container class provide a\n  class-specific deserialization method which makes private copies of\n  each mutable component object it deserializes. Note that for the\n  purpose of maintaining immutability, it is unnecessary to copy\n  immutable component objects.</p>\n  \n  <p>It is also important to note that calling clone may not always be the\n  right way to defensively copy a sub-object. If the clone method cannot\n  be counted on to produce an independent copy (and not to \"steal\" a\n  reference to the copy), an alternative means should be used to produce\n  the copy. An alternative means of copying should always be used if the\n  class of the sub-object is not final, since the clone method or helper\n  methods that it calls may be overridden by subclasses.</p>\n  \n  <p>Starting in version 1.4 of the JavaTM 2 SDK, Standard Edition, unique\n  references to deserialized objects can also be ensured by using the\n  ObjectOutputStream.writeUnshared and ObjectInputStream.readUnshared\n  methods, thus avoiding the complication, performance costs and memory\n  overhead of defensive copying.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":27327296,"reputation":1,"user_id":20840067,"display_name":"Alexander Semikov"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671716077,"creation_date":1671716077,"answer_id":74889281,"question_id":29424389,"body_markdown":"I have used readUnshared() successfully when readObject() produces OutOfMemory exception. More info: https://orenkishon.wordpress.com/2014/06/28/java-memory-leak-caused-by-objectinputstream/","title":"When would one use ObjectInputStream.readUnshared() vs .readObject()?","body":"<p>I have used readUnshared() successfully when readObject() produces OutOfMemory exception. More info: <a href=\"https://orenkishon.wordpress.com/2014/06/28/java-memory-leak-caused-by-objectinputstream/\" rel=\"nofollow noreferrer\">https://orenkishon.wordpress.com/2014/06/28/java-memory-leak-caused-by-objectinputstream/</a></p>\n"}],"owner":{"account_id":1728581,"reputation":2763,"user_id":1582712,"accept_rate":51,"display_name":"E.S."},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4549,"favorite_count":0,"down_vote_count":1,"up_vote_count":7,"answer_count":2,"score":6,"last_activity_date":1671716077,"creation_date":1428019187,"question_id":29424389,"body_markdown":"There are two similar methods in the Java ObjectInputStream:\r\n\r\n[readUnshared()][1]\r\n\r\nand\r\n\r\n[readObject()][2]\r\n\r\nThe documentation states:\r\n\r\n&gt; `public Object readUnshared() throws IOException, ClassNotFoundException`\r\n    \r\n&gt; Reads an &quot;unshared&quot; object from the ObjectInputStream. This method is identical to readObject, except that it prevents subsequent calls to readObject and readUnshared from returning additional references to the deserialized instance obtained via this call. Specifically:\r\n    \r\n&gt; If readUnshared is called to deserialize a back-reference (the stream representation of an object which has been written previously to the stream), an ObjectStreamException will be thrown.\r\n\r\n&gt; If readUnshared returns successfully, then any subsequent attempts to deserialize back-references to the stream handle deserialized by readUnshared will cause an ObjectStreamException to be thrown. \r\n    \r\n&gt; Deserializing an object via readUnshared invalidates the stream handle associated with the returned object. Note that this in itself does not always guarantee that the reference returned by readUnshared is unique; the deserialized object may define a readResolve method which returns an object visible to other parties, or readUnshared may return a Class object or enum constant obtainable elsewhere in the stream or through external means. If the deserialized object defines a readResolve method and the invocation of that method returns an array, then readUnshared returns a shallow clone of that array; this guarantees that the returned array object is unique and cannot be obtained a second time from an invocation of readObject or readUnshared on the ObjectInputStream, even if the underlying data stream has been manipulated.\r\n    \r\n&gt; ObjectInputStream subclasses which override this method can only be constructed in security contexts possessing the &quot;enableSubclassImplementation&quot; SerializablePermission; any attempt to instantiate such a subclass without this permission will cause a SecurityException to be thrown.\r\n\r\nBut I was wondering if anyone had real life uses for this using `.readUnshared()` vs `.readObject()`\r\n\r\n  [1]: http://docs.oracle.com/javase/8/docs/api/java/io/ObjectInputStream.html#readUnshared--\r\n  [2]: http://docs.oracle.com/javase/8/docs/api/java/io/ObjectInputStream.html#readObject--","title":"When would one use ObjectInputStream.readUnshared() vs .readObject()?","body":"<p>There are two similar methods in the Java ObjectInputStream:</p>\n\n<p><a href=\"http://docs.oracle.com/javase/8/docs/api/java/io/ObjectInputStream.html#readUnshared--\" rel=\"nofollow\">readUnshared()</a></p>\n\n<p>and</p>\n\n<p><a href=\"http://docs.oracle.com/javase/8/docs/api/java/io/ObjectInputStream.html#readObject--\" rel=\"nofollow\">readObject()</a></p>\n\n<p>The documentation states:</p>\n\n<blockquote>\n  <p><code>public Object readUnshared() throws IOException, ClassNotFoundException</code></p>\n  \n  <p>Reads an \"unshared\" object from the ObjectInputStream. This method is identical to readObject, except that it prevents subsequent calls to readObject and readUnshared from returning additional references to the deserialized instance obtained via this call. Specifically:</p>\n  \n  <p>If readUnshared is called to deserialize a back-reference (the stream representation of an object which has been written previously to the stream), an ObjectStreamException will be thrown.</p>\n  \n  <p>If readUnshared returns successfully, then any subsequent attempts to deserialize back-references to the stream handle deserialized by readUnshared will cause an ObjectStreamException to be thrown. </p>\n  \n  <p>Deserializing an object via readUnshared invalidates the stream handle associated with the returned object. Note that this in itself does not always guarantee that the reference returned by readUnshared is unique; the deserialized object may define a readResolve method which returns an object visible to other parties, or readUnshared may return a Class object or enum constant obtainable elsewhere in the stream or through external means. If the deserialized object defines a readResolve method and the invocation of that method returns an array, then readUnshared returns a shallow clone of that array; this guarantees that the returned array object is unique and cannot be obtained a second time from an invocation of readObject or readUnshared on the ObjectInputStream, even if the underlying data stream has been manipulated.</p>\n  \n  <p>ObjectInputStream subclasses which override this method can only be constructed in security contexts possessing the \"enableSubclassImplementation\" SerializablePermission; any attempt to instantiate such a subclass without this permission will cause a SecurityException to be thrown.</p>\n</blockquote>\n\n<p>But I was wondering if anyone had real life uses for this using <code>.readUnshared()</code> vs <code>.readObject()</code></p>\n"},{"tags":["java","xss","servlet-filters","owasp"],"comments":[{"owner":{"account_id":8198,"reputation":176803,"user_id":14637,"accept_rate":88,"display_name":"Thomas"},"score":2,"creation_date":1671611408,"post_id":74872411,"comment_id":132133865,"body_markdown":"XSS doesn&#39;t happen in URLs, it happens in HTML output. So that&#39;s the place where you need to prevent it, by encoding URLs and other content properly. Please edit your question to show the code where the URL ends up incorrectly encoded in the HTML output.","body":"XSS doesn&#39;t happen in URLs, it happens in HTML output. So that&#39;s the place where you need to prevent it, by encoding URLs and other content properly. Please edit your question to show the code where the URL ends up incorrectly encoded in the HTML output."},{"owner":{"account_id":52822,"reputation":1089035,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"score":0,"creation_date":1671611409,"post_id":74872411,"comment_id":132133866,"body_markdown":"You do not need to escape them during request processing. You need to escape them during generating the HTML code. See abovelinked duplicate.","body":"You do not need to escape them during request processing. You need to escape them during generating the HTML code. See abovelinked duplicate."},{"owner":{"account_id":27314721,"reputation":1,"user_id":20829343,"display_name":"Saikrishna Mahankali"},"score":0,"creation_date":1671715964,"post_id":74872411,"comment_id":132160775,"body_markdown":"@BalusC The issue is if I add a script tag to the url in the browser the script executes and then the page loads. I want to avoid the execution of the script tag. So I tried using the above code to catch the query string and encode it to prevent script tag from executing but it didn&#39;t work. How can I prevent this from happening? Is there a way to catch the script tag?","body":"@BalusC The issue is if I add a script tag to the url in the browser the script executes and then the page loads. I want to avoid the execution of the script tag. So I tried using the above code to catch the query string and encode it to prevent script tag from executing but it didn&#39;t work. How can I prevent this from happening? Is there a way to catch the script tag?"},{"owner":{"account_id":52822,"reputation":1089035,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"score":0,"creation_date":1671716290,"post_id":74872411,"comment_id":132160886,"body_markdown":"The script only executes if it&#39;s embedded in a HTML page. The abovelinked duplicate shows how to prevent this from happening.","body":"The script only executes if it&#39;s embedded in a HTML page. The abovelinked duplicate shows how to prevent this from happening."},{"owner":{"account_id":27314721,"reputation":1,"user_id":20829343,"display_name":"Saikrishna Mahankali"},"score":0,"creation_date":1671768288,"post_id":74872411,"comment_id":132172681,"body_markdown":"@BalusC If I encode the HTML response in my servlet filter will it avoid the execution of the script tag?","body":"@BalusC If I encode the HTML response in my servlet filter will it avoid the execution of the script tag?"}],"owner":{"account_id":27314721,"reputation":1,"user_id":20829343,"display_name":"Saikrishna Mahankali"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1671611311,"answer_count":0,"score":0,"last_activity_date":1671715868,"creation_date":1671606539,"question_id":74872411,"body_markdown":"If I append a script tag to a url in the browser the script executes and then the page loads. I want to avoid the execution of the script tag. I tried redirecting to the encoded url using servlet filter and owasp java encoder. The script is getting triggered first and then encoding happens. How do I prevent the script tag from executing?\r\n\r\nServer: Tomcat v8.5\r\n\r\nBrowser: Chrome, Edge\r\n\r\nBelow is the code for the servlet filter\r\n\r\n```java\r\npublic void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {\r\n    HttpServletRequest httpServletRequest = ((HttpServletRequest) request);\r\n    String queryString = httpServletRequest.getQueryString();\r\n    if (queryString.contains(&quot;script&quot;)) {\r\n        HttpServletRequest modifiedRequest = new HttpServletRequestWrapper((httpServletRequest)) {\r\n            @Override\r\n            public String getRequestURI() {\r\n                String encodedQueryString = Encode.forUri(httpServletRequest.getQueryString());\r\n                return httpServletRequest.getRequestURI() + &quot;?&quot; + encodedQueryString;\r\n            }\r\n        };\r\n        chain.doFilter(modifiedRequest, response);\r\n    } else {\r\n        chain.doFilter(request, response);\r\n    }\r\n}\r\n```","title":"How to prevent XSS in the url? or prevent execution of script tag in the url? https://example.com/about/?&quot;&gt;&lt;script&gt;alert(1)&lt;/script&gt;","body":"<p>If I append a script tag to a url in the browser the script executes and then the page loads. I want to avoid the execution of the script tag. I tried redirecting to the encoded url using servlet filter and owasp java encoder. The script is getting triggered first and then encoding happens. How do I prevent the script tag from executing?</p>\n<p>Server: Tomcat v8.5</p>\n<p>Browser: Chrome, Edge</p>\n<p>Below is the code for the servlet filter</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {\n    HttpServletRequest httpServletRequest = ((HttpServletRequest) request);\n    String queryString = httpServletRequest.getQueryString();\n    if (queryString.contains(&quot;script&quot;)) {\n        HttpServletRequest modifiedRequest = new HttpServletRequestWrapper((httpServletRequest)) {\n            @Override\n            public String getRequestURI() {\n                String encodedQueryString = Encode.forUri(httpServletRequest.getQueryString());\n                return httpServletRequest.getRequestURI() + &quot;?&quot; + encodedQueryString;\n            }\n        };\n        chain.doFilter(modifiedRequest, response);\n    } else {\n        chain.doFilter(request, response);\n    }\n}\n</code></pre>\n"},{"tags":["java","generics","exception","jls","throws"],"comments":[{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":1,"creation_date":1671706822,"post_id":74887521,"comment_id":132157985,"body_markdown":"Can you show an example of what you think the quote means? i.e. the code that &quot;will outright lead to Compile time Error&quot;.","body":"Can you show an example of what you think the quote means? i.e. the code that &quot;will outright lead to Compile time Error&quot;."}],"answers":[{"comments":[{"owner":{"account_id":16188208,"reputation":493,"user_id":11687703,"display_name":"theutonium.18"},"score":0,"creation_date":1671715540,"post_id":74888010,"comment_id":132160624,"body_markdown":"Had something similar in mind - but looks like Intellij fooled me :)","body":"Had something similar in mind - but looks like Intellij fooled me :)"}],"tags":[],"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1671709238,"creation_date":1671709238,"answer_id":74888010,"question_id":74887521,"body_markdown":"Here is an example:\r\n\r\n```\r\nclass Superclass&lt;T extends Exception&gt; {\r\n    public void foo() throws T {}\r\n}\r\n\r\nclass Subclass&lt;T extends Exception&gt; extends Superclass&lt;T&gt; {\r\n    public void foo() throws Exception {}\r\n}\r\n```\r\n\r\n`T` is not a supertype of `Exception`, so according to the quote, there should be a warning. \r\n\r\n`Subclass.foo` actually fulfils the requirements for overriding (see [8.4.8.1][1]). Specifically, `Subclass.foo` has the same signature as the erasure of the inherited `Superclass.foo`. The inherited method is supposed to throw `T`, but after erasure, it throws `Exception` too.\r\n\r\nIntelliJ puts a red underline this, as if it were an error, but you can actually still compile and run the code.\r\n\r\nHere is what `javac` produces:\r\n\r\n```\r\n% javac -J-Duser.language=en -Xlint:unchecked Superclass.java\r\nSuperclass.java:6: warning: [unchecked] foo() in Subclass cannot override foo() in Superclass\r\n    public void foo() throws Exception {}\r\n                ^\r\n  overridden method does not throw Exception\r\n1 warning\r\n```\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/specs/jls/se17/html/jls-8.html#jls-8.4.8.1","title":"Generic throws clause handling in case of overridden methods","body":"<p>Here is an example:</p>\n<pre><code>class Superclass&lt;T extends Exception&gt; {\n    public void foo() throws T {}\n}\n\nclass Subclass&lt;T extends Exception&gt; extends Superclass&lt;T&gt; {\n    public void foo() throws Exception {}\n}\n</code></pre>\n<p><code>T</code> is not a supertype of <code>Exception</code>, so according to the quote, there should be a warning.</p>\n<p><code>Subclass.foo</code> actually fulfils the requirements for overriding (see <a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-8.html#jls-8.4.8.1\" rel=\"nofollow noreferrer\">8.4.8.1</a>). Specifically, <code>Subclass.foo</code> has the same signature as the erasure of the inherited <code>Superclass.foo</code>. The inherited method is supposed to throw <code>T</code>, but after erasure, it throws <code>Exception</code> too.</p>\n<p>IntelliJ puts a red underline this, as if it were an error, but you can actually still compile and run the code.</p>\n<p>Here is what <code>javac</code> produces:</p>\n<pre><code>% javac -J-Duser.language=en -Xlint:unchecked Superclass.java\nSuperclass.java:6: warning: [unchecked] foo() in Subclass cannot override foo() in Superclass\n    public void foo() throws Exception {}\n                ^\n  overridden method does not throw Exception\n1 warning\n</code></pre>\n"}],"owner":{"account_id":16188208,"reputation":493,"user_id":11687703,"display_name":"theutonium.18"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74888010,"answer_count":1,"score":0,"last_activity_date":1671715477,"creation_date":1671706669,"question_id":74887521,"body_markdown":"Consider the following clause from JLS: 8.4.8.3.\r\n\r\n&gt; If the unerased throws clause of m1 does not contain a supertype of each exception type in the throws clause of m2 (adapted, if necessary, to the type parameters of m1), a compile-time unchecked warning occurs.\r\n\r\nClearly - based on the other rules: \r\n1. the super class method must throw **super-type of all exception types** that the **overridden class method throws**.\r\n2. The child exception list cannot have more members than parent.\r\n\r\nWhat can be the example that satisfies the above clause - that **leads to unchecked warning** - because based on the rules - it will outright **lead to Compile time Error**.","title":"Generic throws clause handling in case of overridden methods","body":"<p>Consider the following clause from JLS: 8.4.8.3.</p>\n<blockquote>\n<p>If the unerased throws clause of m1 does not contain a supertype of each exception type in the throws clause of m2 (adapted, if necessary, to the type parameters of m1), a compile-time unchecked warning occurs.</p>\n</blockquote>\n<p>Clearly - based on the other rules:</p>\n<ol>\n<li>the super class method must throw <strong>super-type of all exception types</strong> that the <strong>overridden class method throws</strong>.</li>\n<li>The child exception list cannot have more members than parent.</li>\n</ol>\n<p>What can be the example that satisfies the above clause - that <strong>leads to unchecked warning</strong> - because based on the rules - it will outright <strong>lead to Compile time Error</strong>.</p>\n"},{"tags":["python","java","process","scripting","processbuilder"],"comments":[{"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1671704589,"post_id":74887074,"comment_id":132157264,"body_markdown":"Why do you think it doesn&#39;t run the script? Can you show the code waiting for the processes to end?","body":"Why do you think it doesn&#39;t run the script? Can you show the code waiting for the processes to end?"},{"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1671707268,"post_id":74887074,"comment_id":132158149,"body_markdown":"Can you share the code doing `winner.getName()` - it seems like the `File` object is `null` which is different from the file not existing.","body":"Can you share the code doing <code>winner.getName()</code> - it seems like the <code>File</code> object is <code>null</code> which is different from the file not existing."}],"answers":[{"tags":[],"owner":{"account_id":23298645,"reputation":79,"user_id":17379671,"display_name":"BOGDAN DONICI"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1671715078,"creation_date":1671715078,"answer_id":74889092,"question_id":74887074,"body_markdown":"The error was in the environment variables. I had two environment variables, one pointing to python.exe and the other pointing to a Python/Scripts folder, the latter of which was located within the directory of the python.exe file. It seems, for some strange reason, that java was calling the Scripts folder to execute the script I was passing as input to the process builder class. So I removed that environment variable then proceeded to update all the libraries used in the python script.","title":"Java ProcessBuilder class can&#39;t run .py script","body":"<p>The error was in the environment variables. I had two environment variables, one pointing to python.exe and the other pointing to a Python/Scripts folder, the latter of which was located within the directory of the python.exe file. It seems, for some strange reason, that java was calling the Scripts folder to execute the script I was passing as input to the process builder class. So I removed that environment variable then proceeded to update all the libraries used in the python script.</p>\n"}],"owner":{"account_id":23298645,"reputation":79,"user_id":17379671,"display_name":"BOGDAN DONICI"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74889092,"answer_count":1,"score":0,"last_activity_date":1671715078,"creation_date":1671704417,"question_id":74887074,"body_markdown":"I have a program that builds a set of processes that need to execute a `main.py` script but with different parameters between them. The scripts have the following form:\r\n\r\n    python C:/Users/us/Git/main.py 2 24 C:/Users/us/Git/output\r\n    python C:/Users/us/Git/main.py 24 48 C:/Users/us/Git/output\r\n\r\nIn Java I use the ProcessBuilder to run the process:\r\n\r\n    for (int i = 0; i &lt; cores; i++) {\r\n        ProcessBuilder pb;\r\n        if (i == 0) {\r\n            pb = new ProcessBuilder(&quot;python&quot;, scriptPath, &quot;&quot; + 2, &quot;&quot; + (last + subpart + diff) + &quot;&quot;, &quot;&quot; + currentPath + &quot;\\\\output&quot;);\r\n            last = last + subpart + diff;\r\n        } else {\r\n            pb = new ProcessBuilder(&quot;python&quot;, scriptPath, &quot;&quot; + last, &quot;&quot; + (last + subpart) + &quot;&quot;, &quot;&quot; + currentPath + &quot;\\\\output&quot;);\r\n            last = last + subpart;\r\n        }\r\n        builders[i] = pb;\r\n    }\r\n    for (int i = 0; i &lt; cores; i++) {\r\n        processes[i] = builders[i].start();\r\n    }\r\n    System.out.print(&quot;waiting for &quot; + processes.length + &quot; processes to end&quot;);\r\n\r\nBut, everytime I run the Java program, it seems that the `ProcessBuilder` didn&#39;t run the script... why? How can I resolve?\r\n\r\n\r\n\r\nI&#39;m currently using Intellij as IDE.\r\n\r\nI&#39;ve tried to build the project and the run the `.jar` file and, it seems to work. But what I actually need is to run the scripts without building the project everytime\r\n\r\n### Why I think the ProcessBuilder dosen&#39;t run the scripts?\r\nThe scripts after running, have to produce some files after clustering process, and these files have to be inside the `output` directory. When the java code, after processes finished, go to search for this files, it dosen&#39;t find them. In fact, the Exeption thrown is:\r\n\r\n    Exception in thread &quot;main&quot; java.lang.NullPointerException: Cannot invoke &quot;java.io.File.getName()&quot; because &quot;winner&quot; is null","title":"Java ProcessBuilder class can&#39;t run .py script","body":"<p>I have a program that builds a set of processes that need to execute a <code>main.py</code> script but with different parameters between them. The scripts have the following form:</p>\n<pre><code>python C:/Users/us/Git/main.py 2 24 C:/Users/us/Git/output\npython C:/Users/us/Git/main.py 24 48 C:/Users/us/Git/output\n</code></pre>\n<p>In Java I use the ProcessBuilder to run the process:</p>\n<pre><code>for (int i = 0; i &lt; cores; i++) {\n    ProcessBuilder pb;\n    if (i == 0) {\n        pb = new ProcessBuilder(&quot;python&quot;, scriptPath, &quot;&quot; + 2, &quot;&quot; + (last + subpart + diff) + &quot;&quot;, &quot;&quot; + currentPath + &quot;\\\\output&quot;);\n        last = last + subpart + diff;\n    } else {\n        pb = new ProcessBuilder(&quot;python&quot;, scriptPath, &quot;&quot; + last, &quot;&quot; + (last + subpart) + &quot;&quot;, &quot;&quot; + currentPath + &quot;\\\\output&quot;);\n        last = last + subpart;\n    }\n    builders[i] = pb;\n}\nfor (int i = 0; i &lt; cores; i++) {\n    processes[i] = builders[i].start();\n}\nSystem.out.print(&quot;waiting for &quot; + processes.length + &quot; processes to end&quot;);\n</code></pre>\n<p>But, everytime I run the Java program, it seems that the <code>ProcessBuilder</code> didn't run the script... why? How can I resolve?</p>\n<p>I'm currently using Intellij as IDE.</p>\n<p>I've tried to build the project and the run the <code>.jar</code> file and, it seems to work. But what I actually need is to run the scripts without building the project everytime</p>\n<h3>Why I think the ProcessBuilder dosen't run the scripts?</h3>\n<p>The scripts after running, have to produce some files after clustering process, and these files have to be inside the <code>output</code> directory. When the java code, after processes finished, go to search for this files, it dosen't find them. In fact, the Exeption thrown is:</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.NullPointerException: Cannot invoke &quot;java.io.File.getName()&quot; because &quot;winner&quot; is null\n</code></pre>\n"},{"tags":["java","spring","spring-boot","jooq"],"comments":[{"owner":{"account_id":2030,"reputation":50607,"user_id":2788,"accept_rate":69,"display_name":"Strelok"},"score":0,"creation_date":1520309063,"post_id":49115470,"comment_id":85251678,"body_markdown":"The `spring.datasource` configuration should be enough. You have an extra `=` sign in `spring.datasource.url`.","body":"The <code>spring.datasource</code> configuration should be enough. You have an extra <code>=</code> sign in <code>spring.datasource.url</code>."}],"answers":[{"comments":[{"owner":{"account_id":4352234,"reputation":3771,"user_id":3552141,"accept_rate":55,"display_name":"jhyot"},"score":1,"creation_date":1520274300,"post_id":49115876,"comment_id":85239398,"body_markdown":"You actually don&#39;t need to create the DSLContext instance and configure it yourself. Spring Boot will do it for you. Have a look at JooqAutoConfiguration.java. But you probably *do* need to supply your DB configuration and have the DB driver on the classpath before Spring Boot will load the DSLContext.","body":"You actually don&#39;t need to create the DSLContext instance and configure it yourself. Spring Boot will do it for you. Have a look at JooqAutoConfiguration.java. But you probably <i>do</i> need to supply your DB configuration and have the DB driver on the classpath before Spring Boot will load the DSLContext."},{"owner":{"account_id":1611562,"reputation":11552,"user_id":1490322,"accept_rate":71,"display_name":"Jose Martinez"},"score":0,"creation_date":1520274651,"post_id":49115876,"comment_id":85239585,"body_markdown":"@jhyot yes you are right.  i updated my answer.  thank you","body":"@jhyot yes you are right.  i updated my answer.  thank you"},{"owner":{"account_id":5514461,"reputation":51,"user_id":4379720,"display_name":"croul"},"score":0,"creation_date":1520302921,"post_id":49115876,"comment_id":85250353,"body_markdown":"Thank you for your help. I added properties and jooqConfiguration class, but got another error message. I updated the question.","body":"Thank you for your help. I added properties and jooqConfiguration class, but got another error message. I updated the question."},{"owner":{"account_id":1611562,"reputation":11552,"user_id":1490322,"accept_rate":71,"display_name":"Jose Martinez"},"score":0,"creation_date":1520307856,"post_id":49115876,"comment_id":85251386,"body_markdown":"Did you follow step 4 in the link I provided?","body":"Did you follow step 4 in the link I provided?"},{"owner":{"account_id":5514461,"reputation":51,"user_id":4379720,"display_name":"croul"},"score":1,"creation_date":1520317991,"post_id":49115876,"comment_id":85254185,"body_markdown":"@JoseMartinez  I re-installed JDK then problem fixed. Do not know the reason actually. Thank you .","body":"@JoseMartinez  I re-installed JDK then problem fixed. Do not know the reason actually. Thank you ."}],"tags":[],"owner":{"account_id":1611562,"reputation":11552,"user_id":1490322,"accept_rate":71,"display_name":"Jose Martinez"},"comment_count":5,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1520274571,"creation_date":1520269776,"answer_id":49115876,"question_id":49115470,"body_markdown":"You need to instantiate the `DSLContext`.\r\n\r\n\r\nFirst add the properties:\r\n\r\n    spring.datasource.url=jdbc:h2:~/jooq\r\n    spring.datasource.username=sa\r\n    spring.datasource.password=xxx\r\n\r\n\r\nEDIT:  As per jhyot&#39;s comment... adding the configuration should be good enough, since the `DSLContext` will be created for you by `JooqAutoConfiguration`.  \r\n\r\nOptional:  Add the configuration to create the DSLContext bean.  Here is an example.\r\n\r\n    @Configuration\r\n    public class JooqConfiguration {\r\n    \r\n    \t@Autowired\r\n    \tprivate DataSource dataSource;\r\n    \t \r\n    \t@Bean\r\n    \tpublic DataSourceConnectionProvider connectionProvider() {\r\n    \t\treturn new DataSourceConnectionProvider\r\n    \t\t  (new TransactionAwareDataSourceProxy(dataSource));\r\n    \t}\r\n    \r\n    \t@Bean\r\n    \tpublic DefaultDSLContext dsl() {\r\n    \t\treturn new DefaultDSLContext(configuration());\r\n    \t}\r\n    \r\n    \tpublic DefaultConfiguration configuration() {\r\n    \t\tDefaultConfiguration jooqConfiguration = new DefaultConfiguration();\r\n    \t\tjooqConfiguration.set(connectionProvider());\r\n    \t\tjooqConfiguration\r\n    \t\t  .set(new DefaultExecuteListenerProvider(exceptionTransformer()));\r\n    \t \r\n    \t\treturn jooqConfiguration;\r\n    \t}\r\n    \r\n    }\r\n\r\nReference:  http://www.baeldung.com/spring-boot-support-for-jooq","title":"Spring boot with JOOQ got a message &quot;required a bean of type &#39;org.jooq.DSLContext&#39; that could not be found&quot;","body":"<p>You need to instantiate the <code>DSLContext</code>.</p>\n\n<p>First add the properties:</p>\n\n<pre><code>spring.datasource.url=jdbc:h2:~/jooq\nspring.datasource.username=sa\nspring.datasource.password=xxx\n</code></pre>\n\n<p>EDIT:  As per jhyot's comment... adding the configuration should be good enough, since the <code>DSLContext</code> will be created for you by <code>JooqAutoConfiguration</code>.  </p>\n\n<p>Optional:  Add the configuration to create the DSLContext bean.  Here is an example.</p>\n\n<pre><code>@Configuration\npublic class JooqConfiguration {\n\n    @Autowired\n    private DataSource dataSource;\n\n    @Bean\n    public DataSourceConnectionProvider connectionProvider() {\n        return new DataSourceConnectionProvider\n          (new TransactionAwareDataSourceProxy(dataSource));\n    }\n\n    @Bean\n    public DefaultDSLContext dsl() {\n        return new DefaultDSLContext(configuration());\n    }\n\n    public DefaultConfiguration configuration() {\n        DefaultConfiguration jooqConfiguration = new DefaultConfiguration();\n        jooqConfiguration.set(connectionProvider());\n        jooqConfiguration\n          .set(new DefaultExecuteListenerProvider(exceptionTransformer()));\n\n        return jooqConfiguration;\n    }\n\n}\n</code></pre>\n\n<p>Reference:  <a href=\"http://www.baeldung.com/spring-boot-support-for-jooq\" rel=\"nofollow noreferrer\">http://www.baeldung.com/spring-boot-support-for-jooq</a></p>\n"},{"tags":[],"owner":{"account_id":247217,"reputation":213465,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1634281096,"creation_date":1634281096,"answer_id":69580971,"question_id":49115470,"body_markdown":"One reason why people using Spring Boot 2.4 or 2.5 with jOOQ 3.15+ may run into this message:\r\n\r\n&gt; No qualifying bean of type &#39;org.jooq.DSLContext&#39; available: expected at least 1 bean which qualifies as autowire candidate.\r\n\r\n... is because jOOQ 3.15 has a new R2DBC dependency, and Spring Boot 2.4 / 2.5 isn&#39;t ready yet for third parties that work with *both* JDBC and R2DBC, see also https://stackoverflow.com/q/68297295/521799\r\n\r\nMost users aren&#39;t using R2DBC, so you can just exclude the `R2dbcAutoConfiguration` (watch out for typos. It&#39;s *not* `R2dbcDataAutoConfiguration`):\r\n\r\n```java\r\n@SpringBootApplication(exclude = { R2dbcAutoConfiguration.class })\r\n```\r\n\r\n","title":"Spring boot with JOOQ got a message &quot;required a bean of type &#39;org.jooq.DSLContext&#39; that could not be found&quot;","body":"<p>One reason why people using Spring Boot 2.4 or 2.5 with jOOQ 3.15+ may run into this message:</p>\n<blockquote>\n<p>No qualifying bean of type 'org.jooq.DSLContext' available: expected at least 1 bean which qualifies as autowire candidate.</p>\n</blockquote>\n<p>... is because jOOQ 3.15 has a new R2DBC dependency, and Spring Boot 2.4 / 2.5 isn't ready yet for third parties that work with <em>both</em> JDBC and R2DBC, see also <a href=\"https://stackoverflow.com/q/68297295/521799\">How to fix &quot;Consider defining a bean of type &#39;org.jooq.DSLContext&#39; in your configuration.&quot; after update to jOOQ 3.15.0</a></p>\n<p>Most users aren't using R2DBC, so you can just exclude the <code>R2dbcAutoConfiguration</code> (watch out for typos. It's <em>not</em> <code>R2dbcDataAutoConfiguration</code>):</p>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootApplication(exclude = { R2dbcAutoConfiguration.class })\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17851190,"reputation":1,"user_id":12966921,"display_name":"Hamzatli"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663920602,"creation_date":1663920602,"answer_id":73824777,"question_id":49115470,"body_markdown":"Just exclude R2dbc\r\n\r\n    @SpringBootApplication(exclude = { R2dbcAutoConfiguration.class })\r\n\r\n","title":"Spring boot with JOOQ got a message &quot;required a bean of type &#39;org.jooq.DSLContext&#39; that could not be found&quot;","body":"<p>Just exclude R2dbc</p>\n<pre><code>@SpringBootApplication(exclude = { R2dbcAutoConfiguration.class })\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11389854,"reputation":6032,"user_id":8370915,"display_name":"invzbl3"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671711626,"creation_date":1671711626,"answer_id":74888459,"question_id":49115470,"body_markdown":"I&#39;ve reproduced the same issue as:\r\n\r\n    Caused by: java.lang.ClassNotFoundException: org.jooq.DSLContext\r\n    \tat java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641) ~[na:na]\r\n    \tat java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188) ~[na:na]\r\n    \tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520) ~[na:na]\r\n    \t... 11 common frames omitted\r\n\r\n\r\nAnd it was fixed after adding in `POM`:\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-jooq&lt;/artifactId&gt;\r\n            &lt;version&gt;2.7.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\neven without the usage of:\r\n\r\n    @SpringBootApplication(exclude = { R2dbcAutoConfiguration.class })\r\n\r\nand any additional configurations.","title":"Spring boot with JOOQ got a message &quot;required a bean of type &#39;org.jooq.DSLContext&#39; that could not be found&quot;","body":"<p>I've reproduced the same issue as:</p>\n<pre><code>Caused by: java.lang.ClassNotFoundException: org.jooq.DSLContext\n    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641) ~[na:na]\n    at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188) ~[na:na]\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520) ~[na:na]\n    ... 11 common frames omitted\n</code></pre>\n<p>And it was fixed after adding in <code>POM</code>:</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-jooq&lt;/artifactId&gt;\n        &lt;version&gt;2.7.1&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>even without the usage of:</p>\n<pre><code>@SpringBootApplication(exclude = { R2dbcAutoConfiguration.class })\n</code></pre>\n<p>and any additional configurations.</p>\n"}],"owner":{"account_id":5514461,"reputation":51,"user_id":4379720,"display_name":"croul"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10012,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":4,"score":3,"last_activity_date":1671714567,"creation_date":1520268494,"question_id":49115470,"body_markdown":"I created a simple project with spring boot and JOOQ, added dependency &quot;spring-boot-starter-jooq&quot;. The application failed to start when I compiled.\r\n\r\n**Here is the pom.xml:**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \r\n    \t&lt;groupId&gt;com.bingo&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;api&lt;/artifactId&gt;\r\n    \t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    \t&lt;packaging&gt;jar&lt;/packaging&gt;\r\n    \r\n    \t&lt;name&gt;api&lt;/name&gt;\r\n    \t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n    \r\n    \t&lt;parent&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;2.0.0.RELEASE&lt;/version&gt;\r\n    \t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n    \t&lt;/parent&gt;\r\n    \r\n    \t&lt;properties&gt;\r\n    \t\t&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    \t\t&lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\r\n    \t\t&lt;java.version&gt;1.8&lt;/java.version&gt;\r\n    \t&lt;/properties&gt;\r\n    \r\n    \t&lt;dependencies&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-jooq&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;mysql&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.hashids&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;hashids&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;1.0.1&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.google.guava&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;guava&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;18.0&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t&lt;/dependencies&gt;\r\n    \r\n    \t&lt;build&gt;\r\n    \t\t&lt;plugins&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.jooq&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;jooq-codegen-maven&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t&lt;jdbc&gt;\r\n    \t\t\t\t\t\t&lt;driver&gt;com.mysql.jdbc.Driver&lt;/driver&gt;\r\n    \t\t\t\t\t\t&lt;url&gt;jdbc:mysql://123.123.123.123:3306/dbname&lt;/url&gt;\r\n    \t\t\t\t\t\t&lt;user&gt;root&lt;/user&gt;\r\n    \t\t\t\t\t\t&lt;password&gt;password&lt;/password&gt;\r\n    \t\t\t\t\t&lt;/jdbc&gt;\r\n    \t\t\t\t\t&lt;generator&gt;\r\n    \t\t\t\t\t\t&lt;database&gt;\r\n    \t\t\t\t\t\t\t&lt;name&gt;org.jooq.util.mysql.MySQLDatabase&lt;/name&gt;\r\n    \t\t\t\t\t\t\t&lt;includes&gt;.*&lt;/includes&gt;\r\n    \t\t\t\t\t\t\t&lt;excludes&gt;&lt;/excludes&gt;\r\n    \t\t\t\t\t\t\t&lt;inputSchema&gt;dbname&lt;/inputSchema&gt;\r\n    \t\t\t\t\t\t\t&lt;forcedTypes&gt;\r\n    \t\t\t\t\t\t\t\t&lt;forcedType&gt;\r\n    \t\t\t\t\t\t\t\t\t&lt;name&gt;CustomUUID&lt;/name&gt;\r\n    \t\t\t\t\t\t\t\t\t&lt;types&gt;binary.*&lt;/types&gt;\r\n    \t\t\t\t\t\t\t\t&lt;/forcedType&gt;\r\n    \t\t\t\t\t\t\t\t&lt;forcedType&gt;\r\n    \t\t\t\t\t\t\t\t\t&lt;name&gt;Geometry&lt;/name&gt;\r\n    \t\t\t\t\t\t\t\t\t&lt;types&gt;(geometry|GEOMETRY)&lt;/types&gt;\r\n    \t\t\t\t\t\t\t\t&lt;/forcedType&gt;\r\n    \t\t\t\t\t\t\t&lt;/forcedTypes&gt;\r\n    \t\t\t\t\t\t\t&lt;properties&gt;\r\n    \t\t\t\t\t\t\t\t&lt;property&gt;\r\n    \t\t\t\t\t\t\t\t\t&lt;key&gt;packages&lt;/key&gt;\r\n    \t\t\t\t\t\t\t\t\t&lt;value&gt;com.bingo.api.entity&lt;/value&gt;\r\n    \t\t\t\t\t\t\t\t&lt;/property&gt;\r\n    \t\t\t\t\t\t\t&lt;/properties&gt;\r\n    \t\t\t\t\t\t&lt;/database&gt;\r\n    \t\t\t\t\t\t&lt;generate&gt;\r\n    \t\t\t\t\t\t\t&lt;pojos&gt;true&lt;/pojos&gt;\r\n    \t\t\t\t\t\t&lt;/generate&gt;\r\n    \t\t\t\t\t&lt;/generator&gt;\r\n    \t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t&lt;/plugins&gt;\r\n    \t&lt;/build&gt;\r\n    &lt;/project&gt;\r\n\r\n**This is where I want to inject DSLContext:**\r\n\r\n    @Service\r\n    public class GameDao {\r\n        private final DSLContext create;\r\n        @Autowired\r\n        public GameDao(DSLContext dslContext) {\r\n            this.create = dslContext;\r\n        }\r\n    }\r\n\r\n**Error Message:**\r\n\r\n    Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;gameDao&#39; defined in file [/Users/yangzhiwei/Downloads/BingoApi/target/classes/com/bingo/api/dao/GameDao.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type &#39;org.jooq.DSLContext&#39; available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}\r\n\r\n    /*************************** \r\n    \r\n    APPLICATION FAILED TO START\r\n    \r\n    /*************************** \r\n    \r\n    Description:  Parameter 0 of constructor in com.bingo.api.dao.GameDao required a bean of type &#39;org.jooq.DSLContext&#39; that could not be found. \r\n    Action: Consider defining a bean of type &#39;org.jooq.DSLContext&#39; in your configuration.\r\n\r\nAny help please?\r\n\r\nUpdate:\r\n1.I added properties in application.properties file like this:\r\n\r\n    spring.datasource.url==jdbc:mysql://123.123.123.123:3306/bingo\r\n    spring.datasource.user=username\r\n    spring.datasource.password=password\r\n2.I added jooqConfiguration class.\r\nNow got another error message:\r\n\r\n    Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;jooqConfiguration&#39;: Unsatisfied dependency expressed through field &#39;dataSource&#39;; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type &#39;javax.sql.DataSource&#39; available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}\r\n    ***************************\r\n    APPLICATION FAILED TO START\r\n    ***************************\r\n    \r\n    Description:\r\n    \r\n    Field dataSource in com.bingo.api.config.JooqConfiguration required a bean of type &#39;javax.sql.DataSource&#39; that could not be found.\r\n    \t- Bean method &#39;dataSource&#39; not loaded because @ConditionalOnProperty (spring.datasource.jndi-name) did not find property &#39;jndi-name&#39;\r\n    \t- Bean method &#39;dataSource&#39; not loaded because @ConditionalOnClass did not find required class &#39;javax.transaction.TransactionManager&#39;","title":"Spring boot with JOOQ got a message &quot;required a bean of type &#39;org.jooq.DSLContext&#39; that could not be found&quot;","body":"<p>I created a simple project with spring boot and JOOQ, added dependency &quot;spring-boot-starter-jooq&quot;. The application failed to start when I compiled.</p>\n<p><strong>Here is the pom.xml:</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;com.bingo&lt;/groupId&gt;\n    &lt;artifactId&gt;api&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n\n    &lt;name&gt;api&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.0.0.RELEASE&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-jooq&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hashids&lt;/groupId&gt;\n            &lt;artifactId&gt;hashids&lt;/artifactId&gt;\n            &lt;version&gt;1.0.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.guava&lt;/groupId&gt;\n            &lt;artifactId&gt;guava&lt;/artifactId&gt;\n            &lt;version&gt;18.0&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.jooq&lt;/groupId&gt;\n                &lt;artifactId&gt;jooq-codegen-maven&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;jdbc&gt;\n                        &lt;driver&gt;com.mysql.jdbc.Driver&lt;/driver&gt;\n                        &lt;url&gt;jdbc:mysql://123.123.123.123:3306/dbname&lt;/url&gt;\n                        &lt;user&gt;root&lt;/user&gt;\n                        &lt;password&gt;password&lt;/password&gt;\n                    &lt;/jdbc&gt;\n                    &lt;generator&gt;\n                        &lt;database&gt;\n                            &lt;name&gt;org.jooq.util.mysql.MySQLDatabase&lt;/name&gt;\n                            &lt;includes&gt;.*&lt;/includes&gt;\n                            &lt;excludes&gt;&lt;/excludes&gt;\n                            &lt;inputSchema&gt;dbname&lt;/inputSchema&gt;\n                            &lt;forcedTypes&gt;\n                                &lt;forcedType&gt;\n                                    &lt;name&gt;CustomUUID&lt;/name&gt;\n                                    &lt;types&gt;binary.*&lt;/types&gt;\n                                &lt;/forcedType&gt;\n                                &lt;forcedType&gt;\n                                    &lt;name&gt;Geometry&lt;/name&gt;\n                                    &lt;types&gt;(geometry|GEOMETRY)&lt;/types&gt;\n                                &lt;/forcedType&gt;\n                            &lt;/forcedTypes&gt;\n                            &lt;properties&gt;\n                                &lt;property&gt;\n                                    &lt;key&gt;packages&lt;/key&gt;\n                                    &lt;value&gt;com.bingo.api.entity&lt;/value&gt;\n                                &lt;/property&gt;\n                            &lt;/properties&gt;\n                        &lt;/database&gt;\n                        &lt;generate&gt;\n                            &lt;pojos&gt;true&lt;/pojos&gt;\n                        &lt;/generate&gt;\n                    &lt;/generator&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p><strong>This is where I want to inject DSLContext:</strong></p>\n<pre><code>@Service\npublic class GameDao {\n    private final DSLContext create;\n    @Autowired\n    public GameDao(DSLContext dslContext) {\n        this.create = dslContext;\n    }\n}\n</code></pre>\n<p><strong>Error Message:</strong></p>\n<pre><code>Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'gameDao' defined in file [/Users/yangzhiwei/Downloads/BingoApi/target/classes/com/bingo/api/dao/GameDao.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.jooq.DSLContext' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}\n\n/*************************** \n\nAPPLICATION FAILED TO START\n\n/*************************** \n\nDescription:  Parameter 0 of constructor in com.bingo.api.dao.GameDao required a bean of type 'org.jooq.DSLContext' that could not be found. \nAction: Consider defining a bean of type 'org.jooq.DSLContext' in your configuration.\n</code></pre>\n<p>Any help please?</p>\n<p>Update:\n1.I added properties in application.properties file like this:</p>\n<pre><code>spring.datasource.url==jdbc:mysql://123.123.123.123:3306/bingo\nspring.datasource.user=username\nspring.datasource.password=password\n</code></pre>\n<p>2.I added jooqConfiguration class.\nNow got another error message:</p>\n<pre><code>Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'jooqConfiguration': Unsatisfied dependency expressed through field 'dataSource'; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'javax.sql.DataSource' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}\n***************************\nAPPLICATION FAILED TO START\n***************************\n\nDescription:\n\nField dataSource in com.bingo.api.config.JooqConfiguration required a bean of type 'javax.sql.DataSource' that could not be found.\n    - Bean method 'dataSource' not loaded because @ConditionalOnProperty (spring.datasource.jndi-name) did not find property 'jndi-name'\n    - Bean method 'dataSource' not loaded because @ConditionalOnClass did not find required class 'javax.transaction.TransactionManager'\n</code></pre>\n"},{"tags":["java","android","android-recyclerview"],"comments":[{"owner":{"account_id":18378745,"reputation":802,"user_id":13387235,"display_name":"Dhruv Sakariya"},"score":1,"creation_date":1671702080,"post_id":74886542,"comment_id":132156543,"body_markdown":"on button click just call api and clear old list and insert new data came from api.","body":"on button click just call api and clear old list and insert new data came from api."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1671906381,"post_id":74886542,"comment_id":132195937,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"answers":[{"tags":[],"owner":{"account_id":15714451,"reputation":184,"user_id":20839582,"display_name":"sajidjuneja"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671714539,"creation_date":1671714539,"answer_id":74888977,"question_id":74886542,"body_markdown":"You can use SparseBooleanArray or ArrayList of integers with ids/position of selected elements. Then in onBindViewHolder, check the ids/position is and change background color and in onClick add ids/position in SparseBooleanArray or ArrayList.","title":"Reset All Items after Click on any new Item - RecyclerView","body":"<p>You can use SparseBooleanArray or ArrayList of integers with ids/position of selected elements. Then in onBindViewHolder, check the ids/position is and change background color and in onClick add ids/position in SparseBooleanArray or ArrayList.</p>\n"}],"owner":{"account_id":20986291,"reputation":19,"user_id":15420019,"display_name":"Aaraf Rao"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1671714539,"creation_date":1671701505,"question_id":74886542,"body_markdown":"Actually I want to acheive the fucntionality in which **whenever i click on new Item the old one should be reset**, I have changed the color and background by setting click listener on viewholder in Adapter but dont know to reset the previuos one.\r\n\r\n\r\n[![Here at the second layout i want to acheive that functionality](https://i.stack.imgur.com/JGA7D.png)](https://i.stack.imgur.com/JGA7D.png)\r\n\r\nhere is the source code of Adapter\r\n\r\n`\r\n```\r\n\r\npublic class DateAdapter extends RecyclerView.Adapter&lt;DateAdapter.VH&gt; {\r\n    private List&lt;DateModel&gt; driverListModelList;\r\n    private ClickListener clickListener;\r\n\r\n    public DateAdapter(List&lt;DateModel&gt; driverListModelList, ClickListener clickListener) {\r\n        this.driverListModelList = driverListModelList;\r\n        this.clickListener = clickListener;\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public DateAdapter.VH onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n        View v = LayoutInflater.from(parent.getContext()).inflate(R.layout.date_item, parent, false);\r\n        return new DateAdapter.VH(v);\r\n    }\r\n\r\n    @Override\r\n    public void onBindViewHolder(@NonNull DateAdapter.VH holder, int position) {\r\n\r\n        holder.setData(driverListModelList.get(position).getDay(), driverListModelList.get(position).getMonth(),\r\n                driverListModelList.get(position).getDate());\r\n\r\n\r\n        holder.itemView.setOnClickListener(view -&gt; {\r\n            holder.itemView.setBackground(ContextCompat.getDrawable(holder.itemView.getContext(), R.drawable.day_bar_item2));\r\n            holder.day.setTextColor(Color.WHITE);\r\n            holder.month.setTextColor(Color.WHITE);\r\n            holder.date.setTextColor(Color.WHITE);\r\n        });\r\n\r\n    }\r\n\r\n    @Override\r\n    public int getItemCount() {\r\n        return driverListModelList.size();\r\n    }\r\n\r\n    class VH extends RecyclerView.ViewHolder implements View.OnClickListener {\r\n\r\n        private TextView day;\r\n        private TextView month;\r\n        private TextView date;\r\n\r\n        @SuppressLint(&quot;ResourceAsColor&quot;)\r\n        public VH(@NonNull View itemView) {\r\n            super(itemView);\r\n\r\n            day = itemView.findViewById(R.id.dayTxt);\r\n            month = itemView.findViewById(R.id.txtMonth);\r\n            date = itemView.findViewById(R.id.txtDate);\r\n\r\n//            itemView.setOnClickListener(this);\r\n\r\n            \r\n        }\r\n\r\n        private void setData(final String day, final String month, final String date) {\r\n            this.day.setText(day);\r\n            this.month.setText(month);\r\n            this.date.setText(date);\r\n        }\r\n\r\n\r\n        @Override\r\n        public void onClick(View view) {\r\n            clickListener.onItemClicked(getAdapterPosition());\r\n        }\r\n    }\r\n}\r\n\r\n```\r\n`\r\n\r\ni tried by recyclerView.invalidate(); and notifiyDataSetChanged();","title":"Reset All Items after Click on any new Item - RecyclerView","body":"<p>Actually I want to acheive the fucntionality in which <strong>whenever i click on new Item the old one should be reset</strong>, I have changed the color and background by setting click listener on viewholder in Adapter but dont know to reset the previuos one.</p>\n<p><a href=\"https://i.stack.imgur.com/JGA7D.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JGA7D.png\" alt=\"Here at the second layout i want to acheive that functionality\" /></a></p>\n<p>here is the source code of Adapter</p>\n<p>`</p>\n<pre><code>\npublic class DateAdapter extends RecyclerView.Adapter&lt;DateAdapter.VH&gt; {\n    private List&lt;DateModel&gt; driverListModelList;\n    private ClickListener clickListener;\n\n    public DateAdapter(List&lt;DateModel&gt; driverListModelList, ClickListener clickListener) {\n        this.driverListModelList = driverListModelList;\n        this.clickListener = clickListener;\n    }\n\n    @NonNull\n    @Override\n    public DateAdapter.VH onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\n        View v = LayoutInflater.from(parent.getContext()).inflate(R.layout.date_item, parent, false);\n        return new DateAdapter.VH(v);\n    }\n\n    @Override\n    public void onBindViewHolder(@NonNull DateAdapter.VH holder, int position) {\n\n        holder.setData(driverListModelList.get(position).getDay(), driverListModelList.get(position).getMonth(),\n                driverListModelList.get(position).getDate());\n\n\n        holder.itemView.setOnClickListener(view -&gt; {\n            holder.itemView.setBackground(ContextCompat.getDrawable(holder.itemView.getContext(), R.drawable.day_bar_item2));\n            holder.day.setTextColor(Color.WHITE);\n            holder.month.setTextColor(Color.WHITE);\n            holder.date.setTextColor(Color.WHITE);\n        });\n\n    }\n\n    @Override\n    public int getItemCount() {\n        return driverListModelList.size();\n    }\n\n    class VH extends RecyclerView.ViewHolder implements View.OnClickListener {\n\n        private TextView day;\n        private TextView month;\n        private TextView date;\n\n        @SuppressLint(&quot;ResourceAsColor&quot;)\n        public VH(@NonNull View itemView) {\n            super(itemView);\n\n            day = itemView.findViewById(R.id.dayTxt);\n            month = itemView.findViewById(R.id.txtMonth);\n            date = itemView.findViewById(R.id.txtDate);\n\n//            itemView.setOnClickListener(this);\n\n            \n        }\n\n        private void setData(final String day, final String month, final String date) {\n            this.day.setText(day);\n            this.month.setText(month);\n            this.date.setText(date);\n        }\n\n\n        @Override\n        public void onClick(View view) {\n            clickListener.onItemClicked(getAdapterPosition());\n        }\n    }\n}\n\n</code></pre>\n<p>`</p>\n<p>i tried by recyclerView.invalidate(); and notifiyDataSetChanged();</p>\n"},{"tags":["java","spring","filter","spring-security"],"comments":[{"owner":{"account_id":26648222,"reputation":31,"user_id":20262886,"display_name":"Micha Maj"},"score":1,"creation_date":1671717728,"post_id":74888966,"comment_id":132161351,"body_markdown":"Maybe this answer can help you: https://stackoverflow.com/a/57697485/20262886","body":"Maybe this answer can help you: <a href=\"https://stackoverflow.com/a/57697485/20262886\">stackoverflow.com/a/57697485/20262886</a>"}],"owner":{"account_id":14064561,"reputation":1,"user_id":11202859,"display_name":"jesus cabrera"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671714484,"creation_date":1671714484,"question_id":74888966,"body_markdown":"I have an application, which I have to add a parameter to the controller as @requestParam, as would be the best way\r\nWith a filter I can filter but not modify the request\r\n\r\nI want to add the user by taking it out of the token, for this I have to decode the token and then add the controllers in all the calls","title":"how to intercept a request to a controller and add a parameter in it","body":"<p>I have an application, which I have to add a parameter to the controller as @requestParam, as would be the best way\nWith a filter I can filter but not modify the request</p>\n<p>I want to add the user by taking it out of the token, for this I have to decode the token and then add the controllers in all the calls</p>\n"},{"tags":["java","spring-boot","jpa","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":11016405,"reputation":55,"user_id":8092128,"display_name":"Witek"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671714150,"creation_date":1671714150,"answer_id":74888910,"question_id":74887487,"body_markdown":"I just noticed that my DB model makes no sense.&lt;br&gt; \r\nThe question in the Answers table is not unique accross the system, so there are two ways of solving it:\r\n\r\n - add a category_id reference to answers table (which is what JPA is\r\n   complaining about) &lt;br&gt;\r\nor \r\n- make the question_id unique in the system through some sequence generator or anything else","title":"JPA - how to map composite keys hierarchy","body":"<p>I just noticed that my DB model makes no sense.<br>\nThe question in the Answers table is not unique accross the system, so there are two ways of solving it:</p>\n<ul>\n<li>add a category_id reference to answers table (which is what JPA is\ncomplaining about) <br>\nor</li>\n<li>make the question_id unique in the system through some sequence generator or anything else</li>\n</ul>\n"}],"owner":{"account_id":11016405,"reputation":55,"user_id":8092128,"display_name":"Witek"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":110,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1671714336,"creation_date":1671706473,"question_id":74887487,"body_markdown":"I have a db structure similar to this on the picture\r\n[![enter image description here][1]][1]\r\n\r\n  [1]: https://i.stack.imgur.com/bwZ6p.png\r\n\r\ntable ``questions`` has composite primary key (id, cate_id), where cate_id is foreign key to categories(cate_id)&lt;br&gt;\r\ntable ``answers`` has composite primary key (id, question_id), where question_id is foreign key to questions(id)&lt;br&gt;\r\n\r\nfrom data perspective it looks like this:&lt;br&gt;\r\nCATEGORIES\r\n\r\n| cate_id| name|\r\n|:---- |:------:|\r\n| C1  | Cat 1    |\r\n| C2  | Cat 2    |\r\n\r\nQUESTIONS\r\n\r\n|id|cate_id|question|\r\n|:---- |:------:|:------:|\r\n| Q1  | C1    |what ?|\r\n| Q2  | C1    |why ?|\r\n| Q1  | C2    |when ?|\r\n| Q2  | C2    |who ?|\r\n\r\nANSWERS\r\n\r\n|id|question_id|answer|\r\n|:---- |:------:|:------:|\r\n| A1  | Q1    |aaa|\r\n| A2  | Q1    |bbb|\r\n| A1  | Q2    |ccc|\r\n| A2  | Q2    |ddd|\r\n\r\nNow I&#39;m trying to map it to JPA model:&lt;br&gt;\r\nthe category entity is the simplest:&lt;br&gt;\r\n```\r\n@Entity\r\n@Table(name = &quot;categories&quot;)\r\npublic class Category {\r\n\r\n    @Id\r\n    @Column(name = &quot;cate_id&quot;)\r\n    private Long id;\r\n...\r\n}\r\n```\r\n\r\nnow I&#39;m adding the QuestionId to reflect the composite key and Question entity:&lt;br&gt;\r\n```\r\n@Embeddable\r\npublic class QuestionId implements Serializable {\r\n\r\n    @Column(name = &quot;id&quot;)\r\n    private Long id;\r\n\r\n    @Column(name = &quot;cate_id&quot;)\r\n    private Long categoryId;\r\n//constructors, hashCode, equals, etc\r\n}\r\n\r\n@Entity\r\n@Table(name = &quot;questions&quot;)\r\npublic class Question {\r\n\r\n    @EmbeddedId\r\n    private QuestionId id;\r\n\r\n    @ManyToOne\r\n    @MapsId(value = &quot;categoryId&quot;)\r\n    @JoinColumn(name = &quot;cate_id&quot;)\r\n    private Category category;\r\n}\r\n```\r\nall good so far&lt;br&gt;\r\n\r\nthe problem starts when I try to add next level: the Answers entity\r\n```\r\n@Embeddable\r\npublic class AnswerId implements Serializable {\r\n\r\n    @Column(name = &quot;id&quot;)\r\n    private Long id;\r\n\r\n    @Column(name = &quot;question_id&quot;)\r\n    private Long questionId;\r\n//constructors, hashCode, equals, etc\r\n}\r\n\r\n@Entity\r\n@Table(name = &quot;answers&quot;)\r\npublic class Answer {\r\n\r\n    @EmbeddedId\r\n    private AnswerId id;\r\n\r\n    @ManyToOne\r\n    @MapsId(value = &quot;questionId&quot;)\r\n    @JoinColumn(name = &quot;question_id&quot;, referencedColumnName = &quot;id&quot;)\r\n    private Question question;\r\n}\r\n```\r\n\r\nAfter creating the Answer entity I&#39;m receiving this error on application startup&lt;br&gt;\r\n``Caused by: org.hibernate.AnnotationException: Unable to find column reference in the @MapsId mapping: cate_id``&lt;br&gt;\r\nFor me it looks like the Answer entity needs access to Categories which makes no sense I guess.&lt;be&gt;\r\nAnd it has nothing to do with existing database configuration because I have the same result on H2 in-memory db and ``spring.jpa.hibernate.ddl-auto=create``\r\n\r\nany suggestions will be more than welcome&lt;br&gt;\r\nthanks in advance","title":"JPA - how to map composite keys hierarchy","body":"<p>I have a db structure similar to this on the picture\n<a href=\"https://i.stack.imgur.com/bwZ6p.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bwZ6p.png\" alt=\"enter image description here\" /></a></p>\n<p>table <code>questions</code> has composite primary key (id, cate_id), where cate_id is foreign key to categories(cate_id)<br>\ntable <code>answers</code> has composite primary key (id, question_id), where question_id is foreign key to questions(id)<br></p>\n<p>from data perspective it looks like this:<br>\nCATEGORIES</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th style=\"text-align: left;\">cate_id</th>\n<th style=\"text-align: center;\">name</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: left;\">C1</td>\n<td style=\"text-align: center;\">Cat 1</td>\n</tr>\n<tr>\n<td style=\"text-align: left;\">C2</td>\n<td style=\"text-align: center;\">Cat 2</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>QUESTIONS</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th style=\"text-align: left;\">id</th>\n<th style=\"text-align: center;\">cate_id</th>\n<th style=\"text-align: center;\">question</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: left;\">Q1</td>\n<td style=\"text-align: center;\">C1</td>\n<td style=\"text-align: center;\">what ?</td>\n</tr>\n<tr>\n<td style=\"text-align: left;\">Q2</td>\n<td style=\"text-align: center;\">C1</td>\n<td style=\"text-align: center;\">why ?</td>\n</tr>\n<tr>\n<td style=\"text-align: left;\">Q1</td>\n<td style=\"text-align: center;\">C2</td>\n<td style=\"text-align: center;\">when ?</td>\n</tr>\n<tr>\n<td style=\"text-align: left;\">Q2</td>\n<td style=\"text-align: center;\">C2</td>\n<td style=\"text-align: center;\">who ?</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>ANSWERS</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th style=\"text-align: left;\">id</th>\n<th style=\"text-align: center;\">question_id</th>\n<th style=\"text-align: center;\">answer</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: left;\">A1</td>\n<td style=\"text-align: center;\">Q1</td>\n<td style=\"text-align: center;\">aaa</td>\n</tr>\n<tr>\n<td style=\"text-align: left;\">A2</td>\n<td style=\"text-align: center;\">Q1</td>\n<td style=\"text-align: center;\">bbb</td>\n</tr>\n<tr>\n<td style=\"text-align: left;\">A1</td>\n<td style=\"text-align: center;\">Q2</td>\n<td style=\"text-align: center;\">ccc</td>\n</tr>\n<tr>\n<td style=\"text-align: left;\">A2</td>\n<td style=\"text-align: center;\">Q2</td>\n<td style=\"text-align: center;\">ddd</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>Now I'm trying to map it to JPA model:<br>\nthe category entity is the simplest:<br></p>\n<pre><code>@Entity\n@Table(name = &quot;categories&quot;)\npublic class Category {\n\n    @Id\n    @Column(name = &quot;cate_id&quot;)\n    private Long id;\n...\n}\n</code></pre>\n<p>now I'm adding the QuestionId to reflect the composite key and Question entity:<br></p>\n<pre><code>@Embeddable\npublic class QuestionId implements Serializable {\n\n    @Column(name = &quot;id&quot;)\n    private Long id;\n\n    @Column(name = &quot;cate_id&quot;)\n    private Long categoryId;\n//constructors, hashCode, equals, etc\n}\n\n@Entity\n@Table(name = &quot;questions&quot;)\npublic class Question {\n\n    @EmbeddedId\n    private QuestionId id;\n\n    @ManyToOne\n    @MapsId(value = &quot;categoryId&quot;)\n    @JoinColumn(name = &quot;cate_id&quot;)\n    private Category category;\n}\n</code></pre>\n<p>all good so far<br></p>\n<p>the problem starts when I try to add next level: the Answers entity</p>\n<pre><code>@Embeddable\npublic class AnswerId implements Serializable {\n\n    @Column(name = &quot;id&quot;)\n    private Long id;\n\n    @Column(name = &quot;question_id&quot;)\n    private Long questionId;\n//constructors, hashCode, equals, etc\n}\n\n@Entity\n@Table(name = &quot;answers&quot;)\npublic class Answer {\n\n    @EmbeddedId\n    private AnswerId id;\n\n    @ManyToOne\n    @MapsId(value = &quot;questionId&quot;)\n    @JoinColumn(name = &quot;question_id&quot;, referencedColumnName = &quot;id&quot;)\n    private Question question;\n}\n</code></pre>\n<p>After creating the Answer entity I'm receiving this error on application startup<br>\n<code>Caused by: org.hibernate.AnnotationException: Unable to find column reference in the @MapsId mapping: cate_id</code><br>\nFor me it looks like the Answer entity needs access to Categories which makes no sense I guess.\nAnd it has nothing to do with existing database configuration because I have the same result on H2 in-memory db and <code>spring.jpa.hibernate.ddl-auto=create</code></p>\n<p>any suggestions will be more than welcome<br>\nthanks in advance</p>\n"},{"tags":["java","xml","jdom"],"answers":[{"tags":[],"owner":{"account_id":217320,"reputation":42820,"user_id":473070,"accept_rate":82,"display_name":"Vladimir Ivanov"},"comment_count":0,"down_vote_count":0,"up_vote_count":59,"is_accepted":true,"score":59,"last_activity_date":1291364965,"creation_date":1291364965,"answer_id":4343704,"question_id":4343683,"body_markdown":"    new XMLOutputter().outputString(doc);","title":"How to convert org.jdom.Document to String","body":"<pre><code>new XMLOutputter().outputString(doc);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":250702,"reputation":2188,"user_id":527583,"accept_rate":44,"display_name":"Aravind"},"comment_count":0,"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1453281177,"creation_date":1291365367,"answer_id":4343740,"question_id":4343683,"body_markdown":"I got the answer myself\r\n\r\n    XMLOutputter xmOut = new XMLOutputter(); \r\n    System.out.println(&quot;----&quot; + xmOut.outputString(doc));\r\n\r\n","title":"How to convert org.jdom.Document to String","body":"<p>I got the answer myself</p>\n\n<pre><code>XMLOutputter xmOut = new XMLOutputter(); \nSystem.out.println(\"----\" + xmOut.outputString(doc));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18950252,"reputation":419,"user_id":13828134,"display_name":"mwangox"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671713363,"creation_date":1671713363,"answer_id":74888758,"question_id":4343683,"body_markdown":"You can as well do like this with StringWriter\r\n\r\n        StringWriter writer = new StringWriter();\r\n        new XMLOutputter().output(doc, writer);\r\n        System.out.println(writer.toString());","title":"How to convert org.jdom.Document to String","body":"<p>You can as well do like this with StringWriter</p>\n<pre><code>    StringWriter writer = new StringWriter();\n    new XMLOutputter().output(doc, writer);\n    System.out.println(writer.toString());\n</code></pre>\n"}],"owner":{"account_id":250702,"reputation":2188,"user_id":527583,"accept_rate":44,"display_name":"Aravind"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":27283,"favorite_count":0,"down_vote_count":0,"up_vote_count":31,"accepted_answer_id":4343704,"answer_count":3,"score":31,"last_activity_date":1671713363,"creation_date":1291364759,"question_id":4343683,"body_markdown":"How do I to convert an org.jdom.Document to a String in Java?\r\n ","title":"How to convert org.jdom.Document to String","body":"<p>How do I to convert an org.jdom.Document to a String in Java?</p>\n"},{"tags":["java","generics","lombok"],"comments":[{"owner":{"account_id":4728704,"reputation":17032,"user_id":3824919,"display_name":"Tom"},"score":2,"creation_date":1671698197,"post_id":74885743,"comment_id":132155461,"body_markdown":"I don&#39;t think it will work in this setup. Lombok uses wildcards for `builder()` which would require casts anyway and generics have no inheritance: [Is List a subclass of List? Why are Java generics not implicitly polymorphic?](//stackoverflow.com/q/2745265)","body":"I don&#39;t think it will work in this setup. Lombok uses wildcards for <code>builder()</code> which would require casts anyway and generics have no inheritance: <a href=\"//stackoverflow.com/q/2745265\">Is List a subclass of List? Why are Java generics not implicitly polymorphic?</a>"},{"owner":{"account_id":1658807,"reputation":31819,"user_id":1527544,"accept_rate":54,"display_name":"Antoniossss"},"score":0,"creation_date":1671699518,"post_id":74885743,"comment_id":132155809,"body_markdown":"Thanks @Tom. I guess this is acceptable statement that it &quot;cannot be done&quot;. I did delombok builders to see what is the actual implementation before, but didnt think that wildcards there will couse me the problems.","body":"Thanks @Tom. I guess this is acceptable statement that it &quot;cannot be done&quot;. I did delombok builders to see what is the actual implementation before, but didnt think that wildcards there will couse me the problems."},{"owner":{"account_id":1658807,"reputation":31819,"user_id":1527544,"accept_rate":54,"display_name":"Antoniossss"},"score":0,"creation_date":1671699563,"post_id":74885743,"comment_id":132155827,"body_markdown":"You can put your comment as an answer, so I can upvote propertly if you would like.","body":"You can put your comment as an answer, so I can upvote propertly if you would like."},{"owner":{"account_id":4728704,"reputation":17032,"user_id":3824919,"display_name":"Tom"},"score":0,"creation_date":1671699680,"post_id":74885743,"comment_id":132155858,"body_markdown":"Give this question a bit of time, maybe someone will find a way or can suggest a different approach.","body":"Give this question a bit of time, maybe someone will find a way or can suggest a different approach."}],"answers":[{"comments":[{"owner":{"account_id":1658807,"reputation":31819,"user_id":1527544,"accept_rate":54,"display_name":"Antoniossss"},"score":0,"creation_date":1671711679,"post_id":74887706,"comment_id":132159452,"body_markdown":"This does infact allows code to compile, but I still have a warining regarding unchecked cast `Unchecked assignment: &#39;? extends BUILDER&#39; to &#39;BUILDER&#39;`. Any wy to overcome that now?","body":"This does infact allows code to compile, but I still have a warining regarding unchecked cast <code>Unchecked assignment: &#39;? extends BUILDER&#39; to &#39;BUILDER&#39;</code>. Any wy to overcome that now?"},{"owner":{"account_id":1658807,"reputation":31819,"user_id":1527544,"accept_rate":54,"display_name":"Antoniossss"},"score":0,"creation_date":1671712011,"post_id":74887706,"comment_id":132159548,"body_markdown":"Also it can be right away  `commonize(BUILDER obj)` in your example so the signature is less scary.","body":"Also it can be right away  <code>commonize(BUILDER obj)</code> in your example so the signature is less scary."},{"owner":{"account_id":1658807,"reputation":31819,"user_id":1527544,"accept_rate":54,"display_name":"Antoniossss"},"score":0,"creation_date":1671712343,"post_id":74887706,"comment_id":132159658,"body_markdown":"`&lt;C extends BUILDER, BUILDER extends Base.BaseBuilder&lt;?, C&gt;&gt;` removes the warning and still works!. No idea why.... ON the other hand its now `Type parameter &#39;C&#39; hides visible type &#39;org.checkerframework.checker.units.qual.C&#39;` so i guess I have traded 1 warning to another.","body":"<code>&lt;C extends BUILDER, BUILDER extends Base.BaseBuilder&lt;?, C&gt;&gt;</code> removes the warning and still works!. No idea why.... ON the other hand its now <code>Type parameter &#39;C&#39; hides visible type &#39;org.checkerframework.checker.units.qual.C&#39;</code> so i guess I have traded 1 warning to another."},{"owner":{"account_id":13887193,"reputation":7307,"user_id":10026074,"display_name":"Jan Rieke"},"score":0,"creation_date":1671712345,"post_id":74887706,"comment_id":132159660,"body_markdown":"Hmm, I neither get that warning in Eclipse nor with javac. Which compiler do you use?","body":"Hmm, I neither get that warning in Eclipse nor with javac. Which compiler do you use?"},{"owner":{"account_id":1658807,"reputation":31819,"user_id":1527544,"accept_rate":54,"display_name":"Antoniossss"},"score":0,"creation_date":1671712427,"post_id":74887706,"comment_id":132159683,"body_markdown":"I use javac JDK11","body":"I use javac JDK11"},{"owner":{"account_id":13887193,"reputation":7307,"user_id":10026074,"display_name":"Jan Rieke"},"score":0,"creation_date":1671712888,"post_id":74887706,"comment_id":132159815,"body_markdown":"Same here, no warning. There must be something slightly different between this example and your actual code. BTW: The &quot;&#39;C&#39; hides&quot; warning can be simply removed by using something else than &quot;C&quot;, like &quot;CL&quot;.","body":"Same here, no warning. There must be something slightly different between this example and your actual code. BTW: The &quot;&#39;C&#39; hides&quot; warning can be simply removed by using something else than &quot;C&quot;, like &quot;CL&quot;."},{"owner":{"account_id":1658807,"reputation":31819,"user_id":1527544,"accept_rate":54,"display_name":"Antoniossss"},"score":0,"creation_date":1671712979,"post_id":74887706,"comment_id":132159845,"body_markdown":"I will try it out on my PC when Ill be back home. Cannot post images from coprorate network;)","body":"I will try it out on my PC when Ill be back home. Cannot post images from coprorate network;)"}],"tags":[],"owner":{"account_id":13887193,"reputation":7307,"user_id":10026074,"display_name":"Jan Rieke"},"comment_count":7,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1671713351,"creation_date":1671707655,"answer_id":74887706,"question_id":74885743,"body_markdown":"That&#39;s quite a tricky one, but you nearly had it. This is way to go:\r\n\r\n\tpublic static &lt;B extends BUILDER, BUILDER extends Base.BaseBuilder&lt;?, B&gt;&gt; BUILDER commonize(BUILDER builder) {\r\n\t\treturn builder.someName(&quot;commonName&quot;);\r\n\t}\r\n\r\n\r\nIf you are feeling jaunty today, you may even go further with `@ExtensionMethod`:\r\n\r\n\t@ExtensionMethod({ Extensions.class })\r\n\tpublic class Example {\r\n\t\tstatic void testGeneric() {\r\n\t\t\tFoo foo = Foo.builder().commonize().fooProp(&quot;foo?&quot;).build();\r\n\t\t\tBar bar = Bar.builder().commonize().barProp(&quot;foo?&quot;).build();\r\n\t\t\tSystem.out.println(foo);\r\n\t\t\tSystem.out.println(bar);\r\n\t\t}\r\n\t}\r\n\t\r\n\tclass Extensions {\r\n\t\tpublic static &lt;B extends BUILDER, BUILDER extends Base.BaseBuilder&lt;?, B&gt;&gt; BUILDER commonize(BUILDER builder) {\r\n\t\t\treturn builder.someName(&quot;commonName&quot;);\r\n\t\t}\r\n\t}","title":"How to use generics with @SuperBuilder to common logic to a base class builder?","body":"<p>That's quite a tricky one, but you nearly had it. This is way to go:</p>\n<pre><code>public static &lt;B extends BUILDER, BUILDER extends Base.BaseBuilder&lt;?, B&gt;&gt; BUILDER commonize(BUILDER builder) {\n    return builder.someName(&quot;commonName&quot;);\n}\n</code></pre>\n<p>If you are feeling jaunty today, you may even go further with <code>@ExtensionMethod</code>:</p>\n<pre><code>@ExtensionMethod({ Extensions.class })\npublic class Example {\n    static void testGeneric() {\n        Foo foo = Foo.builder().commonize().fooProp(&quot;foo?&quot;).build();\n        Bar bar = Bar.builder().commonize().barProp(&quot;foo?&quot;).build();\n        System.out.println(foo);\n        System.out.println(bar);\n    }\n}\n\nclass Extensions {\n    public static &lt;B extends BUILDER, BUILDER extends Base.BaseBuilder&lt;?, B&gt;&gt; BUILDER commonize(BUILDER builder) {\n        return builder.someName(&quot;commonName&quot;);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":1658807,"reputation":31819,"user_id":1527544,"accept_rate":54,"display_name":"Antoniossss"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":210,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":74887706,"answer_count":1,"score":2,"last_activity_date":1671713351,"creation_date":1671696774,"question_id":74885743,"body_markdown":"I have 2 DTOs that share common base - typical inheritance. I also want to use builder pattern, so Lombok&#39;s @SuperBuilder comes to the rescue. Now I want to apply common logic to the &quot;common&quot; part of builders. \r\n\r\nI am able to do it with casting, but I don&#39;t know how to keep it typesafe using generics. \r\n\r\nUsing following (runnable) example, how to define generics in `commonize` method so that `testGeneric` will work and stop yelding compilation errors?\r\n\r\n        public class Example {\r\n            static &lt;C extends Base, BUILDER extends Base.BaseBuilder&lt;C, BUILDER&gt;&gt; BUILDER commonize(BUILDER builder) {\r\n                return builder.someName(&quot;commonName&quot;);\r\n            }\r\n            static &lt; BUILDER extends Base.BaseBuilder&gt; BUILDER rawComminize(BUILDER builder) {\r\n                return (BUILDER)builder.someName(&quot;commonName&quot;);\r\n            }\r\n        \r\n            static void testGeneric(){\r\n                //that yelds compilation errors - how to fix it?\r\n                Foo foo = commonize(Foo.builder()).fooProp(&quot;foo?&quot;).build();\r\n                Bar bar = commonize(Bar.builder()).barProp(&quot;bar?&quot;).build();\r\n                System.out.println(foo);\r\n                System.out.println(bar);\r\n            }\r\n            static void testCasts(){\r\n                //thats fine and works as expected - but not strictly type safe\r\n                Foo foo = rawComminize(Foo.builder()).fooProp(&quot;foo?&quot;).build();\r\n                Bar bar = rawComminize(Bar.builder()).barProp(&quot;bar?&quot;).build();\r\n                System.out.println(foo);\r\n                System.out.println(bar);\r\n            }\r\n            public static void main(String[] args) {\r\n                testGeneric();\r\n                testCasts();\r\n            }\r\n        }\r\n        \r\n        @SuperBuilder\r\n        @ToString\r\n        class Base {\r\n            String someName;\r\n        }\r\n        @ToString(callSuper = true)\r\n        @SuperBuilder\r\n        class Foo extends Base {\r\n            String fooProp;\r\n        }\r\n        @ToString(callSuper = true)\r\n        @SuperBuilder\r\n        class Bar extends Base {\r\n            String barProp;\r\n        }\r\n\r\n","title":"How to use generics with @SuperBuilder to common logic to a base class builder?","body":"<p>I have 2 DTOs that share common base - typical inheritance. I also want to use builder pattern, so Lombok's @SuperBuilder comes to the rescue. Now I want to apply common logic to the &quot;common&quot; part of builders.</p>\n<p>I am able to do it with casting, but I don't know how to keep it typesafe using generics.</p>\n<p>Using following (runnable) example, how to define generics in <code>commonize</code> method so that <code>testGeneric</code> will work and stop yelding compilation errors?</p>\n<pre><code>    public class Example {\n        static &lt;C extends Base, BUILDER extends Base.BaseBuilder&lt;C, BUILDER&gt;&gt; BUILDER commonize(BUILDER builder) {\n            return builder.someName(&quot;commonName&quot;);\n        }\n        static &lt; BUILDER extends Base.BaseBuilder&gt; BUILDER rawComminize(BUILDER builder) {\n            return (BUILDER)builder.someName(&quot;commonName&quot;);\n        }\n    \n        static void testGeneric(){\n            //that yelds compilation errors - how to fix it?\n            Foo foo = commonize(Foo.builder()).fooProp(&quot;foo?&quot;).build();\n            Bar bar = commonize(Bar.builder()).barProp(&quot;bar?&quot;).build();\n            System.out.println(foo);\n            System.out.println(bar);\n        }\n        static void testCasts(){\n            //thats fine and works as expected - but not strictly type safe\n            Foo foo = rawComminize(Foo.builder()).fooProp(&quot;foo?&quot;).build();\n            Bar bar = rawComminize(Bar.builder()).barProp(&quot;bar?&quot;).build();\n            System.out.println(foo);\n            System.out.println(bar);\n        }\n        public static void main(String[] args) {\n            testGeneric();\n            testCasts();\n        }\n    }\n    \n    @SuperBuilder\n    @ToString\n    class Base {\n        String someName;\n    }\n    @ToString(callSuper = true)\n    @SuperBuilder\n    class Foo extends Base {\n        String fooProp;\n    }\n    @ToString(callSuper = true)\n    @SuperBuilder\n    class Bar extends Base {\n        String barProp;\n    }\n</code></pre>\n"},{"tags":["java","reflection","static"],"answers":[{"comments":[{"owner":{"account_id":279220,"reputation":2393,"user_id":574263,"accept_rate":44,"display_name":"mjaggard"},"score":11,"creation_date":1366196069,"post_id":2467555,"comment_id":22915703,"body_markdown":"Why not use getMethod with the correct name instead of looping through all the methods?","body":"Why not use getMethod with the correct name instead of looping through all the methods?"},{"owner":{"account_id":434653,"reputation":811,"user_id":820757,"accept_rate":76,"display_name":"Tony Eastwood"},"score":11,"creation_date":1379320343,"post_id":2467555,"comment_id":27765458,"body_markdown":"Sometimes it&#39;s much easier to loop and find the method by name than to use getMethod because getMethod  (or getDeclaredMethod) requires that you work out the parameter types in great detail.  It just depends if micro efficiency matters - Java iteration is very quick so unless you&#39;re calling the method millions of times in some inner loop then iteration will be fast enough","body":"Sometimes it&#39;s much easier to loop and find the method by name than to use getMethod because getMethod  (or getDeclaredMethod) requires that you work out the parameter types in great detail.  It just depends if micro efficiency matters - Java iteration is very quick so unless you&#39;re calling the method millions of times in some inner loop then iteration will be fast enough"},{"owner":{"account_id":92694,"reputation":11510,"user_id":253938,"accept_rate":81,"display_name":"RenniePet"},"score":2,"creation_date":1448866489,"post_id":2467555,"comment_id":55741612,"body_markdown":"Also in a more real-life situation you would probably only be finding the method once even if you&#39;re going to use reflection to invoke it multiple times. So extra overhead when finding it is immaterial.","body":"Also in a more real-life situation you would probably only be finding the method once even if you&#39;re going to use reflection to invoke it multiple times. So extra overhead when finding it is immaterial."},{"owner":{"account_id":1804338,"reputation":681,"user_id":2866559,"accept_rate":71,"display_name":"Ulysse Mizrahi"},"score":5,"creation_date":1475057380,"post_id":2467555,"comment_id":66785386,"body_markdown":"Gonna have a bad time with overloaded methods though.","body":"Gonna have a bad time with overloaded methods though."},{"owner":{"account_id":1301807,"reputation":1960,"user_id":1251543,"display_name":"cobbzilla"},"score":1,"creation_date":1523895755,"post_id":2467555,"comment_id":86739045,"body_markdown":"@UlysseMizrahi it all depends on what you match on, but yes if you&#39;re writing library code, it can be dangerous to only rely on name. I usually check for a specific annotation, or a particular method signature, like &quot;static method that takes a String and returns an instance of the class&quot;, then assert that there is only one such method found.","body":"@UlysseMizrahi it all depends on what you match on, but yes if you&#39;re writing library code, it can be dangerous to only rely on name. I usually check for a specific annotation, or a particular method signature, like &quot;static method that takes a String and returns an instance of the class&quot;, then assert that there is only one such method found."}],"tags":[],"owner":{"account_id":89539,"reputation":462,"user_id":246976,"display_name":"Frostman"},"comment_count":5,"down_vote_count":3,"up_vote_count":20,"is_accepted":false,"score":17,"last_activity_date":1482127586,"creation_date":1268887138,"answer_id":2467555,"question_id":2467544,"body_markdown":"    String methodName= &quot;...&quot;;\r\n    String[] args = {};\r\n    \r\n    Method[] methods = clazz.getMethods();\r\n    for (Method m : methods) {\r\n        if (methodName.equals(m.getName())) {\r\n            // for static methods we can use null as instance of class\r\n            m.invoke(null, new Object[] {args});\r\n            break;\r\n        }\r\n    }\r\n\r\n","title":"Invoking a static method using reflection","body":"<pre><code>String methodName= \"...\";\nString[] args = {};\n\nMethod[] methods = clazz.getMethods();\nfor (Method m : methods) {\n    if (methodName.equals(m.getName())) {\n        // for static methods we can use null as instance of class\n        m.invoke(null, new Object[] {args});\n        break;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18600,"reputation":39591,"user_id":42769,"accept_rate":95,"display_name":"Adeel Ansari"},"comment_count":0,"down_vote_count":0,"up_vote_count":344,"is_accepted":true,"score":344,"last_activity_date":1268887265,"creation_date":1268887265,"answer_id":2467562,"question_id":2467544,"body_markdown":"    // String.class here is the parameter type, that might not be the case with you\r\n    Method method = clazz.getMethod(&quot;methodName&quot;, String.class);\r\n    Object o = method.invoke(null, &quot;whatever&quot;);\r\n\r\nIn case the method is private use `getDeclaredMethod()` instead of `getMethod()`. And call `setAccessible(true)` on the method object.\r\n\r\n","title":"Invoking a static method using reflection","body":"<pre><code>// String.class here is the parameter type, that might not be the case with you\nMethod method = clazz.getMethod(\"methodName\", String.class);\nObject o = method.invoke(null, \"whatever\");\n</code></pre>\n\n<p>In case the method is private use <code>getDeclaredMethod()</code> instead of <code>getMethod()</code>. And call <code>setAccessible(true)</code> on the method object.</p>\n"},{"comments":[{"owner":{"account_id":9288944,"reputation":1498,"user_id":6897913,"display_name":"linjiejun"},"score":0,"creation_date":1603530081,"post_id":2467563,"comment_id":114070953,"body_markdown":"what if m is a method that recive a method or Callable interface as parameter","body":"what if m is a method that recive a method or Callable interface as parameter"}],"tags":[],"owner":{"account_id":49683,"reputation":9264,"user_id":148059,"display_name":"atk"},"comment_count":1,"down_vote_count":1,"up_vote_count":57,"is_accepted":false,"score":56,"last_activity_date":1369320359,"creation_date":1268887279,"answer_id":2467563,"question_id":2467544,"body_markdown":"Fromthe Javadoc of Method.invoke():\r\n\r\n&lt;blockquote&gt;If the underlying method is static, then the specified obj argument is ignored. It may be null. &lt;/blockquote&gt;\r\n\r\n\r\nWhat happens when you \r\n\r\n&lt;pre&gt;\r\nClass klass = ...;\r\nMethod m = klass.getDeclaredMethod(methodName, paramtypes);\r\nm.invoke(null, args)\r\n&lt;/pre&gt;","title":"Invoking a static method using reflection","body":"<p>Fromthe Javadoc of Method.invoke():</p>\n\n<blockquote>If the underlying method is static, then the specified obj argument is ignored. It may be null. </blockquote>\n\n<p>What happens when you </p>\n\n<pre>\nClass klass = ...;\nMethod m = klass.getDeclaredMethod(methodName, paramtypes);\nm.invoke(null, args)\n</pre>\n"},{"tags":[],"owner":{"account_id":4008309,"reputation":3688,"user_id":3302424,"accept_rate":70,"display_name":"Hari Krishna"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1585904379,"creation_date":1585904379,"answer_id":61008345,"question_id":2467544,"body_markdown":"    public class Add {\r\n        static int add(int a, int b){\r\n            return (a+b);\r\n        }\r\n    }\r\n\r\nIn the above example, &#39;add&#39; is a static method that takes two integers as arguments.\r\n\r\nFollowing snippet is used to call &#39;add&#39; method with input 1 and 2.\r\n\r\n    Class myClass = Class.forName(&quot;Add&quot;);\r\n    Method method = myClass.getDeclaredMethod(&quot;add&quot;, int.class, int.class);\r\n    Object result = method.invoke(null, 1, 2);\r\n\r\nReference [link][1].\r\n\r\n\r\n  [1]: https://self-learning-java-tutorial.blogspot.com/2014/08/invoke-static-methods-using-reflection.html","title":"Invoking a static method using reflection","body":"<pre><code>public class Add {\n    static int add(int a, int b){\n        return (a+b);\n    }\n}\n</code></pre>\n\n<p>In the above example, 'add' is a static method that takes two integers as arguments.</p>\n\n<p>Following snippet is used to call 'add' method with input 1 and 2.</p>\n\n<pre><code>Class myClass = Class.forName(\"Add\");\nMethod method = myClass.getDeclaredMethod(\"add\", int.class, int.class);\nObject result = method.invoke(null, 1, 2);\n</code></pre>\n\n<p>Reference <a href=\"https://self-learning-java-tutorial.blogspot.com/2014/08/invoke-static-methods-using-reflection.html\" rel=\"noreferrer\">link</a>.</p>\n"},{"tags":[],"owner":{"account_id":2520941,"reputation":867,"user_id":2360439,"display_name":"D.A.H"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1671712702,"creation_date":1671712702,"answer_id":74888632,"question_id":2467544,"body_markdown":"Please keep in mind, that you have to also provide argument types, when trying to get desired method.\r\n\r\nBelow an example written using Groovy.\r\n\r\n    import groovy.transform.CompileStatic\r\n    import org.springframework.util.ReflectionUtils\r\n    \r\n    import java.lang.reflect.Method\r\n    \r\n    @CompileStatic\r\n    class Fun {\r\n    \r\n        final static String funText() {\r\n            return &#39;Have fun now!&#39;\r\n        }\r\n    \r\n        final static String myText(String text) {\r\n            return text\r\n        }\r\n    \r\n    }\r\n    \r\n    Method m1 = ReflectionUtils.findMethod(Fun, &#39;funText&#39;)\r\n    println m1.invoke(null)\r\n    \r\n    Method m2 = ReflectionUtils.findMethod(Fun, &#39;myText&#39;, String)\r\n    println m2.invoke(null, &#39;Some text.&#39;)\r\n    \r\n    Method m3 = ReflectionUtils.findMethod(Fun, &#39;myText&#39;)\r\n    println m3.invoke(null, &#39;Another text.&#39;)\r\n\r\nOn example below `m3` will fail as there is no such method.\r\n\r\n","title":"Invoking a static method using reflection","body":"<p>Please keep in mind, that you have to also provide argument types, when trying to get desired method.</p>\n<p>Below an example written using Groovy.</p>\n<pre><code>import groovy.transform.CompileStatic\nimport org.springframework.util.ReflectionUtils\n\nimport java.lang.reflect.Method\n\n@CompileStatic\nclass Fun {\n\n    final static String funText() {\n        return 'Have fun now!'\n    }\n\n    final static String myText(String text) {\n        return text\n    }\n\n}\n\nMethod m1 = ReflectionUtils.findMethod(Fun, 'funText')\nprintln m1.invoke(null)\n\nMethod m2 = ReflectionUtils.findMethod(Fun, 'myText', String)\nprintln m2.invoke(null, 'Some text.')\n\nMethod m3 = ReflectionUtils.findMethod(Fun, 'myText')\nprintln m3.invoke(null, 'Another text.')\n</code></pre>\n<p>On example below <code>m3</code> will fail as there is no such method.</p>\n"}],"owner":{"account_id":95778,"reputation":3982,"user_id":260654,"accept_rate":71,"display_name":"Steven"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":180829,"favorite_count":0,"down_vote_count":0,"up_vote_count":240,"accepted_answer_id":2467562,"answer_count":5,"score":240,"last_activity_date":1671712702,"creation_date":1268886838,"question_id":2467544,"body_markdown":"I want to invoke the `main` method which is static. I got the object of type `Class`, but I am not able to create an instance of that class and also not able to invoke the `static` method `main`.","title":"Invoking a static method using reflection","body":"<p>I want to invoke the <code>main</code> method which is static. I got the object of type <code>Class</code>, but I am not able to create an instance of that class and also not able to invoke the <code>static</code> method <code>main</code>.</p>\n"},{"tags":["java","integration-testing","graph-databases","assertion","nebula-graph"],"comments":[{"owner":{"account_id":1496632,"reputation":609,"user_id":1402404,"display_name":"Wey Gu"},"score":1,"creation_date":1671722699,"post_id":74888618,"comment_id":132163227,"body_markdown":"have you checked this: https://github.com/nebula-contrib/ngbatis/tree/master/src/test yet? Basically it included a docker-compose and the kind of end to end test calls to the dockerized NebulaGraph cluster then.","body":"have you checked this: <a href=\"https://github.com/nebula-contrib/ngbatis/tree/master/src/test\" rel=\"nofollow noreferrer\">github.com/nebula-contrib/ngbatis/tree/master/src/test</a> yet? Basically it included a docker-compose and the kind of end to end test calls to the dockerized NebulaGraph cluster then."},{"owner":{"account_id":117925,"reputation":4564,"user_id":308578,"accept_rate":88,"display_name":"saber tabatabaee yazdi"},"score":1,"creation_date":1671793447,"post_id":74888618,"comment_id":132177312,"body_markdown":"thank you very much i want to ask questions from the nebula that I guess others asked and search for it by google in the future. when we have a simple sample of a nebula graph others enjoy and many developers want to use it. when we have good knowledge base others love this technology. I want to guess newbie developers like me. one of the KPIs is a number of StackOverflow questions and answers.","body":"thank you very much i want to ask questions from the nebula that I guess others asked and search for it by google in the future. when we have a simple sample of a nebula graph others enjoy and many developers want to use it. when we have good knowledge base others love this technology. I want to guess newbie developers like me. one of the KPIs is a number of StackOverflow questions and answers."},{"owner":{"account_id":1496632,"reputation":609,"user_id":1402404,"display_name":"Wey Gu"},"score":1,"creation_date":1671802287,"post_id":74888618,"comment_id":132179617,"body_markdown":"thanks so much Saber, maybe I should create an end to end example project like this.","body":"thanks so much Saber, maybe I should create an end to end example project like this."},{"owner":{"account_id":117925,"reputation":4564,"user_id":308578,"accept_rate":88,"display_name":"saber tabatabaee yazdi"},"score":0,"creation_date":1671862761,"post_id":74888618,"comment_id":132189630,"body_markdown":"I want to be a Nebula Graph promoter in some universities I have many students in telegram and I want to make cbt learning videos in Persian for them. I want to introduce Nebula for other University professors to use nebula graphs in research. so i need some samples and open-source cases.","body":"I want to be a Nebula Graph promoter in some universities I have many students in telegram and I want to make cbt learning videos in Persian for them. I want to introduce Nebula for other University professors to use nebula graphs in research. so i need some samples and open-source cases."}],"owner":{"account_id":117925,"reputation":4564,"user_id":308578,"accept_rate":88,"display_name":"saber tabatabaee yazdi"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671712591,"creation_date":1671712591,"question_id":74888618,"body_markdown":"I have a Jetty HTTP Server to run a JAX-RS or Eclipse Jersey application.\r\n\r\nI want to have an integration test with the Nebula graph\r\n\r\nhow can I implement tests with Nebula Graph as:\r\n\r\n 1. tests run in separate env (independent of local or production env)\r\n 2. my integration test run in nebula graph as docker or any other solution\r\n 3. my ci-cd runs those tests easily\r\n 4. my developers produce data and assert them after saving\r\n\r\n","title":"java integration test with jetty jersey application with nebula graph database","body":"<p>I have a Jetty HTTP Server to run a JAX-RS or Eclipse Jersey application.</p>\n<p>I want to have an integration test with the Nebula graph</p>\n<p>how can I implement tests with Nebula Graph as:</p>\n<ol>\n<li>tests run in separate env (independent of local or production env)</li>\n<li>my integration test run in nebula graph as docker or any other solution</li>\n<li>my ci-cd runs those tests easily</li>\n<li>my developers produce data and assert them after saving</li>\n</ol>\n"},{"tags":["java","spring-boot","forum","xenforo"],"owner":{"account_id":27200105,"reputation":11,"user_id":20732458,"display_name":"Hariharasudhan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671712128,"creation_date":1671712128,"question_id":74888535,"body_markdown":"I&#39;m trying to create a web application in which I want to display data from forums using Tapatalk and XenForo.\r\nI want to display all the posts and messages I get in my forum feed. I want to create the application in Java. \r\n\r\n\r\nI&#39;m completely new to this so can anyone give me idea for it? Is there any packages to implement them?","title":"How can I integrate Tapatalk and XenForo in my java application?","body":"<p>I'm trying to create a web application in which I want to display data from forums using Tapatalk and XenForo.\nI want to display all the posts and messages I get in my forum feed. I want to create the application in Java.</p>\n<p>I'm completely new to this so can anyone give me idea for it? Is there any packages to implement them?</p>\n"},{"tags":["java","gradle","build.gradle","artifactory"],"answers":[{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1671819457,"post_id":74888469,"comment_id":132184142,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/74888469/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":25542851,"reputation":37,"user_id":19328650,"display_name":"podehi"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1671711673,"creation_date":1671711673,"answer_id":74888469,"question_id":74887721,"body_markdown":"I added metadataSources to the repositories like so:\r\n```\r\nrepositories {\r\n    maven {\r\n        url &quot;https://artifactory.(...)/artifactory/jcenter/&quot;\r\n        credentials {\r\n            username artifactoryUsername\r\n            password artifactoryPassword\r\n        }\r\n        metadataSources{\r\n            artifact()\r\n        }\r\n    }\r\n    maven {\r\n        url &quot;https://artifactory.(...)/artifactory/libs-release-local/&quot;\r\n        credentials {\r\n            username artifactoryUsername\r\n            password artifactoryPassword\r\n        }\r\n        metadataSources{\r\n            artifact()\r\n        }\r\n    }\r\n}\r\n```\r\nand it fixed the issue.","title":"Gradle looking for POM instead of ZIP","body":"<p>I added metadataSources to the repositories like so:</p>\n<pre><code>repositories {\n    maven {\n        url &quot;https://artifactory.(...)/artifactory/jcenter/&quot;\n        credentials {\n            username artifactoryUsername\n            password artifactoryPassword\n        }\n        metadataSources{\n            artifact()\n        }\n    }\n    maven {\n        url &quot;https://artifactory.(...)/artifactory/libs-release-local/&quot;\n        credentials {\n            username artifactoryUsername\n            password artifactoryPassword\n        }\n        metadataSources{\n            artifact()\n        }\n    }\n}\n</code></pre>\n<p>and it fixed the issue.</p>\n"}],"owner":{"account_id":25542851,"reputation":37,"user_id":19328650,"display_name":"podehi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":211,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74888469,"answer_count":1,"score":1,"last_activity_date":1671711673,"creation_date":1671707750,"question_id":74887721,"body_markdown":"Here&#39;s a part of my build.gradle:\r\n```\r\napply plugin: &#39;java&#39;\r\n\r\nrepositories {\r\n    maven {\r\n        url &quot;https://artifactory.(...)/artifactory/jcenter/&quot;\r\n        credentials {\r\n            username artifactoryUsername\r\n            password artifactoryPassword\r\n        }\r\n    }\r\n    maven {\r\n        url &quot;https://artifactory.(...)/artifactory/libs-release-local/&quot;\r\n        credentials {\r\n            username artifactoryUsername\r\n            password artifactoryPassword\r\n        }\r\n    }\r\n}\r\n\r\nconfigurations {\r\n    [amq, amqBundles, amqExtensions]\r\n}\r\n\r\ndependencies {\r\n    amq(group: &#39;com.redhat&#39;, name: &#39;amq-broker&#39;, version: &#39;7.10.0&#39;, ext: &#39;zip&#39;)\r\n    amqBundles(group: &quot;org.postgresql&quot;, name: &quot;postgresql&quot;, version: &quot;42.2.14&quot;, ext: &quot;jar&quot;)\r\n    amqExtensions(group: &quot;biz.paluch.logging&quot;, name: &quot;logstash-gelf&quot;, version: &quot;1.14.1&quot;, ext: &quot;jar&quot;)\r\n}\r\n\r\n(...)\r\n\r\ntask extractAmq(type: Copy) {\r\n    from configurations.amq.files\r\n    into &quot;$buildDir/software/amq&quot;\r\n}\r\n```\r\n\r\nAnd here&#39;s the error I get when I run &quot;gradle help&quot;:\r\n```\r\nA problem occurred evaluating root project &#39;installer&#39;.\r\n&gt; Could not resolve all files for configuration &#39;:amq&#39;.\r\n   &gt; Could not find com.redhat:amq-broker:7.10.0.\r\n     Searched in the following locations:\r\n       - https://artifactory.(...)/artifactory/jcenter/com/redhat/amq-broker/7.10.0/amq-broker-7.10.0.pom\r\n       - https://artifactory.(...)/artifactory/libs-release-local/com/redhat/amq-broker/7.10.0/amq-broker-7.10.0.pom\r\n     Required by:\r\n         project :\r\n```\r\n\r\nIt fails at the &quot;from configurations.amq.files&quot; line.\r\n\r\nWhy is it looking for a .pom instead of .zip and how can I fix that? ","title":"Gradle looking for POM instead of ZIP","body":"<p>Here's a part of my build.gradle:</p>\n<pre><code>apply plugin: 'java'\n\nrepositories {\n    maven {\n        url &quot;https://artifactory.(...)/artifactory/jcenter/&quot;\n        credentials {\n            username artifactoryUsername\n            password artifactoryPassword\n        }\n    }\n    maven {\n        url &quot;https://artifactory.(...)/artifactory/libs-release-local/&quot;\n        credentials {\n            username artifactoryUsername\n            password artifactoryPassword\n        }\n    }\n}\n\nconfigurations {\n    [amq, amqBundles, amqExtensions]\n}\n\ndependencies {\n    amq(group: 'com.redhat', name: 'amq-broker', version: '7.10.0', ext: 'zip')\n    amqBundles(group: &quot;org.postgresql&quot;, name: &quot;postgresql&quot;, version: &quot;42.2.14&quot;, ext: &quot;jar&quot;)\n    amqExtensions(group: &quot;biz.paluch.logging&quot;, name: &quot;logstash-gelf&quot;, version: &quot;1.14.1&quot;, ext: &quot;jar&quot;)\n}\n\n(...)\n\ntask extractAmq(type: Copy) {\n    from configurations.amq.files\n    into &quot;$buildDir/software/amq&quot;\n}\n</code></pre>\n<p>And here's the error I get when I run &quot;gradle help&quot;:</p>\n<pre><code>A problem occurred evaluating root project 'installer'.\n&gt; Could not resolve all files for configuration ':amq'.\n   &gt; Could not find com.redhat:amq-broker:7.10.0.\n     Searched in the following locations:\n       - https://artifactory.(...)/artifactory/jcenter/com/redhat/amq-broker/7.10.0/amq-broker-7.10.0.pom\n       - https://artifactory.(...)/artifactory/libs-release-local/com/redhat/amq-broker/7.10.0/amq-broker-7.10.0.pom\n     Required by:\n         project :\n</code></pre>\n<p>It fails at the &quot;from configurations.amq.files&quot; line.</p>\n<p>Why is it looking for a .pom instead of .zip and how can I fix that?</p>\n"},{"tags":["java","spring","http","resttemplate"],"owner":{"account_id":18169782,"reputation":41,"user_id":13219649,"display_name":"N S"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":124,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671711574,"creation_date":1671711574,"question_id":74888445,"body_markdown":"My code tries to call restTemplate.exchange() and handles error through a custom response error handler and explained here https://www.baeldung.com/spring-rest-template-error-handling\r\n\r\nThe problem is when I try to read httpResponse.getBody() which returns an InputStream and convert it to String, I get &#39;Attempted to read from a closed stream&#39; error. \r\n\r\nNot sure what other ways could be. I&#39;ve tried a lot of way including InputStreamReader, Scanner, IOUtils etc but all of them through the same error.\r\n\r\n```\r\n@Component\r\npublic class RestTemplateResponseErrorHandler \r\n  implements ResponseErrorHandler {\r\n\r\n    @Override\r\n    public boolean hasError(ClientHttpResponse httpResponse) \r\n      throws IOException {\r\n\r\n        return ...\r\n    }\r\n\r\n    @Override\r\n    public void handleError(ClientHttpResponse httpResponse) \r\n      throws IOException {\r\n\r\n        if (httpResponse.getStatusCode()\r\n          .series() == HttpStatus.Series.SERVER_ERROR) {\r\n            \r\n              //error\r\n              log.error(httpResponse.getBody);\r\n\r\n\r\n        } \r\n    }\r\n}\r\n```","title":"How can I convert EofSensorInputStream (InputStream) to String?","body":"<p>My code tries to call restTemplate.exchange() and handles error through a custom response error handler and explained here <a href=\"https://www.baeldung.com/spring-rest-template-error-handling\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-rest-template-error-handling</a></p>\n<p>The problem is when I try to read httpResponse.getBody() which returns an InputStream and convert it to String, I get 'Attempted to read from a closed stream' error.</p>\n<p>Not sure what other ways could be. I've tried a lot of way including InputStreamReader, Scanner, IOUtils etc but all of them through the same error.</p>\n<pre><code>@Component\npublic class RestTemplateResponseErrorHandler \n  implements ResponseErrorHandler {\n\n    @Override\n    public boolean hasError(ClientHttpResponse httpResponse) \n      throws IOException {\n\n        return ...\n    }\n\n    @Override\n    public void handleError(ClientHttpResponse httpResponse) \n      throws IOException {\n\n        if (httpResponse.getStatusCode()\n          .series() == HttpStatus.Series.SERVER_ERROR) {\n            \n              //error\n              log.error(httpResponse.getBody);\n\n\n        } \n    }\n}\n</code></pre>\n"},{"tags":["java","angular","spring","spring-boot","maven"],"owner":{"account_id":16206688,"reputation":607,"user_id":11701675,"display_name":"natyus"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671711418,"creation_date":1671704795,"question_id":74887146,"body_markdown":"I have a spring boot and a angular application which is compiled together and when I start my spring boot application localhost:8080 I am first routed to the standard spring security login screen and if i log in I am on my angular login screen. But when I try to use my angular page for example click on the login button on my angular page (Static no authentification) I am routed back to a whitelable page (error page). How can I tell spring to only use my angular pages.\r\n\r\nI do not know where to do the setting but I think it has to be done spring site not angular.","title":"Compiling webapp and spring boot together causes routing to not work","body":"<p>I have a spring boot and a angular application which is compiled together and when I start my spring boot application localhost:8080 I am first routed to the standard spring security login screen and if i log in I am on my angular login screen. But when I try to use my angular page for example click on the login button on my angular page (Static no authentification) I am routed back to a whitelable page (error page). How can I tell spring to only use my angular pages.</p>\n<p>I do not know where to do the setting but I think it has to be done spring site not angular.</p>\n"},{"tags":["java","spring","spring-statemachine"],"owner":{"account_id":27326145,"reputation":11,"user_id":20839092,"display_name":"Viorel Moldovanu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1671711232,"creation_date":1671711232,"question_id":74888376,"body_markdown":"Using Spring Statemachine I encountered a problem when changing the status:\r\nPENDING is the initial status and we have a problem when changing from ARRIVED -&gt; IN_PROGRESS and IN_PROGRESS -&gt; COMPLETED.\r\n\r\nIt changes from ARRIVED to IN_PROGRESS only when it changes from PENDING to IN_PROGRESS.\r\nWe can change from IN_PROGRESS to COMPLETED, only if it changes from PENDING to COMPLETED.\r\n\r\n\r\n\r\n\r\n```\r\n/**\r\n * allow only the following transitions:\r\n *\r\n * PENDING -&gt; WAITING or ARRIVED or NO_SHOW or USER_CANCELLED or TEAM_CANCELLED\r\n * WAITING -&gt; ARRIVED or NO_SHOW\r\n * ARRIVED -&gt; IN_PROGRESS or USER_CANCELLED or TEAM_CANCELLED\r\n * IN_PROGRESS -&gt;  COMPLETED or USER_CANCELLED or TEAM_CANCELLED\r\n * COMPLETED -&gt; no transition\r\n * USER_CANCELLED -&gt; no transition\r\n * TEAM_CANCELLED -&gt; no transition\r\n * NO_SHOW -&gt; no transition\r\n */\r\n```\r\n\r\n possibly the configuration is not written correctly, can someone help us?\r\n\r\n\r\n```\r\npublic void configure(final StateMachineStateConfigurer&lt;Appointment.Status, Appointment.Status&gt; states) throws Exception {\r\n    states\r\n            .withStates()\r\n            .initial(Appointment.Status.PENDING)\r\n            .states(EnumSet.allOf(Appointment.Status.class))\r\n            .end(Appointment.Status.COMPLETED)\r\n            .end(Appointment.Status.USER_CANCELLED)\r\n            .end(Appointment.Status.TEAM_CANCELLED)\r\n            .end(Appointment.Status.NO_SHOW);\r\n}\r\n```\r\n\r\n```\r\npublic void configure(final StateMachineTransitionConfigurer&lt;Appointment.Status, Appointment.Status&gt; transitions) throws Exception {\r\n    transitions\r\n            .withExternal()\r\n            .source(Appointment.Status.PENDING)\r\n            .target(Appointment.Status.WAITING)\r\n            .event(Appointment.Status.WAITING)\r\n            .and()\r\n\r\n            .withExternal()\r\n            .source(Appointment.Status.PENDING)\r\n            .target(Appointment.Status.ARRIVED)\r\n            .event(Appointment.Status.ARRIVED)\r\n            .and()\r\n\r\n            .withExternal()\r\n            .source(Appointment.Status.PENDING)\r\n            .target(Appointment.Status.NO_SHOW)\r\n            .event(Appointment.Status.NO_SHOW)\r\n            .and()\r\n\r\n            .withExternal()\r\n            .source(Appointment.Status.PENDING)\r\n            .target(Appointment.Status.USER_CANCELLED)\r\n            .event(Appointment.Status.USER_CANCELLED)\r\n            .and()\r\n\r\n            .withExternal()\r\n            .source(Appointment.Status.PENDING)\r\n            .target(Appointment.Status.TEAM_CANCELLED)\r\n            .event(Appointment.Status.TEAM_CANCELLED)\r\n            .and()\r\n\r\n            .withExternal()\r\n            .source(Appointment.Status.WAITING)\r\n            .target(Appointment.Status.ARRIVED)\r\n            .event(Appointment.Status.ARRIVED)\r\n            .and()\r\n\r\n            .withExternal()\r\n            .source(Appointment.Status.WAITING)\r\n            .target(Appointment.Status.NO_SHOW)\r\n            .event(Appointment.Status.NO_SHOW)\r\n            .and()\r\n\r\n            .withExternal()\r\n            .source(Appointment.Status.ARRIVED)\r\n            .target(Appointment.Status.IN_PROGRESS)\r\n            .event(Appointment.Status.IN_PROGRESS)\r\n            .and()\r\n\r\n            .withExternal()\r\n            .source(Appointment.Status.ARRIVED)\r\n            .target(Appointment.Status.USER_CANCELLED)\r\n            .event(Appointment.Status.USER_CANCELLED)\r\n            .and()\r\n\r\n            .withExternal()\r\n            .source(Appointment.Status.ARRIVED)\r\n            .target(Appointment.Status.TEAM_CANCELLED)\r\n            .event(Appointment.Status.TEAM_CANCELLED)\r\n            .and()\r\n\r\n            .withExternal()\r\n            .source(Appointment.Status.IN_PROGRESS)\r\n            .target(Appointment.Status.COMPLETED)\r\n            .event(Appointment.Status.COMPLETED)\r\n            .and()\r\n\r\n            .withExternal()\r\n            .source(Appointment.Status.IN_PROGRESS)\r\n            .target(Appointment.Status.USER_CANCELLED)\r\n            .event(Appointment.Status.USER_CANCELLED)\r\n            .and()\r\n\r\n            .withExternal()\r\n            .source(Appointment.Status.IN_PROGRESS)\r\n            .target(Appointment.Status.TEAM_CANCELLED)\r\n            .event(Appointment.Status.TEAM_CANCELLED);\r\n}\r\n```\r\n","title":"Using Spring Statemachine we have difficulty changing some statuses","body":"<p>Using Spring Statemachine I encountered a problem when changing the status:\nPENDING is the initial status and we have a problem when changing from ARRIVED -&gt; IN_PROGRESS and IN_PROGRESS -&gt; COMPLETED.</p>\n<p>It changes from ARRIVED to IN_PROGRESS only when it changes from PENDING to IN_PROGRESS.\nWe can change from IN_PROGRESS to COMPLETED, only if it changes from PENDING to COMPLETED.</p>\n<pre><code>/**\n * allow only the following transitions:\n *\n * PENDING -&gt; WAITING or ARRIVED or NO_SHOW or USER_CANCELLED or TEAM_CANCELLED\n * WAITING -&gt; ARRIVED or NO_SHOW\n * ARRIVED -&gt; IN_PROGRESS or USER_CANCELLED or TEAM_CANCELLED\n * IN_PROGRESS -&gt;  COMPLETED or USER_CANCELLED or TEAM_CANCELLED\n * COMPLETED -&gt; no transition\n * USER_CANCELLED -&gt; no transition\n * TEAM_CANCELLED -&gt; no transition\n * NO_SHOW -&gt; no transition\n */\n</code></pre>\n<p>possibly the configuration is not written correctly, can someone help us?</p>\n<pre><code>public void configure(final StateMachineStateConfigurer&lt;Appointment.Status, Appointment.Status&gt; states) throws Exception {\n    states\n            .withStates()\n            .initial(Appointment.Status.PENDING)\n            .states(EnumSet.allOf(Appointment.Status.class))\n            .end(Appointment.Status.COMPLETED)\n            .end(Appointment.Status.USER_CANCELLED)\n            .end(Appointment.Status.TEAM_CANCELLED)\n            .end(Appointment.Status.NO_SHOW);\n}\n</code></pre>\n<pre><code>public void configure(final StateMachineTransitionConfigurer&lt;Appointment.Status, Appointment.Status&gt; transitions) throws Exception {\n    transitions\n            .withExternal()\n            .source(Appointment.Status.PENDING)\n            .target(Appointment.Status.WAITING)\n            .event(Appointment.Status.WAITING)\n            .and()\n\n            .withExternal()\n            .source(Appointment.Status.PENDING)\n            .target(Appointment.Status.ARRIVED)\n            .event(Appointment.Status.ARRIVED)\n            .and()\n\n            .withExternal()\n            .source(Appointment.Status.PENDING)\n            .target(Appointment.Status.NO_SHOW)\n            .event(Appointment.Status.NO_SHOW)\n            .and()\n\n            .withExternal()\n            .source(Appointment.Status.PENDING)\n            .target(Appointment.Status.USER_CANCELLED)\n            .event(Appointment.Status.USER_CANCELLED)\n            .and()\n\n            .withExternal()\n            .source(Appointment.Status.PENDING)\n            .target(Appointment.Status.TEAM_CANCELLED)\n            .event(Appointment.Status.TEAM_CANCELLED)\n            .and()\n\n            .withExternal()\n            .source(Appointment.Status.WAITING)\n            .target(Appointment.Status.ARRIVED)\n            .event(Appointment.Status.ARRIVED)\n            .and()\n\n            .withExternal()\n            .source(Appointment.Status.WAITING)\n            .target(Appointment.Status.NO_SHOW)\n            .event(Appointment.Status.NO_SHOW)\n            .and()\n\n            .withExternal()\n            .source(Appointment.Status.ARRIVED)\n            .target(Appointment.Status.IN_PROGRESS)\n            .event(Appointment.Status.IN_PROGRESS)\n            .and()\n\n            .withExternal()\n            .source(Appointment.Status.ARRIVED)\n            .target(Appointment.Status.USER_CANCELLED)\n            .event(Appointment.Status.USER_CANCELLED)\n            .and()\n\n            .withExternal()\n            .source(Appointment.Status.ARRIVED)\n            .target(Appointment.Status.TEAM_CANCELLED)\n            .event(Appointment.Status.TEAM_CANCELLED)\n            .and()\n\n            .withExternal()\n            .source(Appointment.Status.IN_PROGRESS)\n            .target(Appointment.Status.COMPLETED)\n            .event(Appointment.Status.COMPLETED)\n            .and()\n\n            .withExternal()\n            .source(Appointment.Status.IN_PROGRESS)\n            .target(Appointment.Status.USER_CANCELLED)\n            .event(Appointment.Status.USER_CANCELLED)\n            .and()\n\n            .withExternal()\n            .source(Appointment.Status.IN_PROGRESS)\n            .target(Appointment.Status.TEAM_CANCELLED)\n            .event(Appointment.Status.TEAM_CANCELLED);\n}\n</code></pre>\n"},{"tags":["java","utf-8"],"comments":[{"owner":{"account_id":1475,"reputation":533794,"user_id":1968,"accept_rate":83,"display_name":"Konrad Rudolph"},"score":2,"creation_date":1671707137,"post_id":74887443,"comment_id":132158090,"body_markdown":"`Char` is already a `String`, it makes no sense to write `&quot;&quot;+Char`.  I keep seeing this pattern on here recently, is this taught somewhere?","body":"<code>Char</code> is already a <code>String</code>, it makes no sense to write <code>&quot;&quot;+Char</code>.  I keep seeing this pattern on here recently, is this taught somewhere?"},{"owner":{"account_id":16788104,"reputation":151,"user_id":12136508,"display_name":"newman"},"score":0,"creation_date":1671707248,"post_id":74887443,"comment_id":132158141,"body_markdown":"@Konrad Rudolph\n Thank you! Indeed! It just my wrong self education","body":"@Konrad Rudolph  Thank you! Indeed! It just my wrong self education"},{"owner":{"account_id":1475,"reputation":533794,"user_id":1968,"accept_rate":83,"display_name":"Konrad Rudolph"},"score":0,"creation_date":1671707310,"post_id":74887443,"comment_id":132158160,"body_markdown":"@NewMan No worries, and its a mistake that can honestly happen to everyone. I was just confused because I keep seeing this increasingly frequently","body":"@NewMan No worries, and its a mistake that can honestly happen to everyone. I was just confused because I keep seeing this increasingly frequently"},{"owner":{"account_id":17835,"reputation":303915,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1671710550,"post_id":74887443,"comment_id":132159109,"body_markdown":"I&#39;ve voted to reopen this, since the suggested duplicate https://stackoverflow.com/questions/15947992/java-unicode-string-length actually talks about **another** reason why the number of visible characters don&#39;t match the result of `length`: The dupe is about multiple Unicode codepoints combining to make a single &quot;visible character&quot;. It&#39;s likely that there **is** a correct dupe target on Stackoverflow, but this is not it.","body":"I&#39;ve voted to reopen this, since the suggested duplicate <a href=\"https://stackoverflow.com/questions/15947992/java-unicode-string-length\" title=\"java unicode string length\">stackoverflow.com/questions/15947992/java-unicode-string-len&zwnj;&#8203;gth</a> actually talks about <b>another</b> reason why the number of visible characters don&#39;t match the result of <code>length</code>: The dupe is about multiple Unicode codepoints combining to make a single &quot;visible character&quot;. It&#39;s likely that there <b>is</b> a correct dupe target on Stackoverflow, but this is not it."},{"owner":{"account_id":16788104,"reputation":151,"user_id":12136508,"display_name":"newman"},"score":0,"creation_date":1671712106,"post_id":74887443,"comment_id":132159582,"body_markdown":"I have examined the above-mentioned refference. Now I have another question. I have saved the char &#39;&#39; in Notepad (UTF-8 withowt BOM) and now I see that the saved file has length of 6 bytes. Why is it so? As far as I know the UTF-8 symbols are less or equal 4 bytes...","body":"I have examined the above-mentioned refference. Now I have another question. I have saved the char &#39;&#39; in Notepad (UTF-8 withowt BOM) and now I see that the saved file has length of 6 bytes. Why is it so? As far as I know the UTF-8 symbols are less or equal 4 bytes..."},{"owner":{"account_id":17835,"reputation":303915,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":1,"creation_date":1671713730,"post_id":74887443,"comment_id":132160042,"body_markdown":"@NewMan: that issue is exactly the one that&#39;s explained in the question I linked to above: Some &quot;characters&quot; are actually multiple codepoints that combine to produce a singular visible character. See [here](https://www.fontspace.com/unicode/analyzer#e=4K6V4K-B) for how this character is construced. It&#39;s two Unicode codepoints, both of which require 3 bytes each in UTF-8. In other words: please make sure to actually read the *answers* on that other question, they explain in quite some detail.","body":"@NewMan: that issue is exactly the one that&#39;s explained in the question I linked to above: Some &quot;characters&quot; are actually multiple codepoints that combine to produce a singular visible character. See <a href=\"https://www.fontspace.com/unicode/analyzer#e=4K6V4K-B\" rel=\"nofollow noreferrer\">here</a> for how this character is construced. It&#39;s two Unicode codepoints, both of which require 3 bytes each in UTF-8. In other words: please make sure to actually read the <i>answers</i> on that other question, they explain in quite some detail."},{"owner":{"account_id":17835,"reputation":303915,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":1,"creation_date":1671713954,"post_id":74887443,"comment_id":132160117,"body_markdown":"[This question explains the basic principles of code points, code units, graphemes, glyphs, ... quite well](https://stackoverflow.com/questions/27331819/whats-the-difference-between-a-character-a-code-point-a-glyph-and-a-grapheme).","body":"<a href=\"https://stackoverflow.com/questions/27331819/whats-the-difference-between-a-character-a-code-point-a-glyph-and-a-grapheme\">This question explains the basic principles of code points, code units, graphemes, glyphs, ... quite well</a>."}],"answers":[{"tags":[],"owner":{"account_id":17835,"reputation":303915,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1671707888,"creation_date":1671707888,"answer_id":74887758,"question_id":74887443,"body_markdown":"`&#66377;` is U+10349.\r\n\r\nAs the 5-digit Unicode number indicates, it&#39;s outside of [the Basic Multilingual Plane][1], which is the set of Unicode characters that can be represented in 16 bits.\r\n\r\nJava strings are encoded using UTF-16, so this character requires two 16 bit code units (`char`s) to be represented in a `String`. Specifically it will be represented using the `char` values 0xD800 and 0xDF49.\r\n\r\nFor backwards compatibility reasons [`String.length` returns the number of code units][2] (i.e. `char` values) needed to make up the String and not the number of Unicode codepoints.\r\n\r\nThe reason this kind of problem doesn&#39;t show up more often is that the majority of frequently used characters are in the BMP and are therefore represented by one code unit. The most common exception to this are some Emojis.\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Plane_(Unicode)#Basic_Multilingual_Plane\r\n  [2]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html#length()","title":"UTF-8 string length returns 2 despite the string consists of a single char &#39;&#66377;&#39;","body":"<p><code></code> is U+10349.</p>\n<p>As the 5-digit Unicode number indicates, it's outside of <a href=\"https://en.wikipedia.org/wiki/Plane_(Unicode)#Basic_Multilingual_Plane\" rel=\"nofollow noreferrer\">the Basic Multilingual Plane</a>, which is the set of Unicode characters that can be represented in 16 bits.</p>\n<p>Java strings are encoded using UTF-16, so this character requires two 16 bit code units (<code>char</code>s) to be represented in a <code>String</code>. Specifically it will be represented using the <code>char</code> values 0xD800 and 0xDF49.</p>\n<p>For backwards compatibility reasons <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html#length()\" rel=\"nofollow noreferrer\"><code>String.length</code> returns the number of code units</a> (i.e. <code>char</code> values) needed to make up the String and not the number of Unicode codepoints.</p>\n<p>The reason this kind of problem doesn't show up more often is that the majority of frequently used characters are in the BMP and are therefore represented by one code unit. The most common exception to this are some Emojis.</p>\n"}],"owner":{"account_id":16788104,"reputation":151,"user_id":12136508,"display_name":"newman"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":84,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":74887758,"answer_count":1,"score":-1,"last_activity_date":1671710487,"creation_date":1671706266,"question_id":74887443,"body_markdown":"Why does strLen equal 2 despite the string consists of a single char &#39;&#66377;&#39;?\r\n\r\n        byte[] bytesChar = {(byte)240, (byte)144, (byte)141,(byte)137};\r\n        String chars = new String(bytesChar, StandardCharsets.UTF_8);\r\n        int strLen = chars.length();","title":"UTF-8 string length returns 2 despite the string consists of a single char &#39;&#66377;&#39;","body":"<p>Why does strLen equal 2 despite the string consists of a single char ''?</p>\n<pre><code>    byte[] bytesChar = {(byte)240, (byte)144, (byte)141,(byte)137};\n    String chars = new String(bytesChar, StandardCharsets.UTF_8);\n    int strLen = chars.length();\n</code></pre>\n"},{"tags":["java","classloader"],"answers":[{"comments":[{"owner":{"account_id":16720659,"reputation":408,"user_id":12085680,"display_name":"BugsOverflow"},"score":0,"creation_date":1671716029,"post_id":74888201,"comment_id":132160793,"body_markdown":"At the end when you say not to be confused with manual invocation of loadClass, it also applies to manual invocation of findClass right?","body":"At the end when you say not to be confused with manual invocation of loadClass, it also applies to manual invocation of findClass right?"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1671719790,"post_id":74888201,"comment_id":132162063,"body_markdown":"No, class loader implementations usually only have a cache for loaded classes, so when calling `loadClass` manually, you may get different results when the first invocation fails but the second finds a class file. However, thats depending on the particular `ClassLoader` subclass whereas the resolution of symbolic references is done by the JVM and leads to not calling into the class loader at all, when theres a recorded failure.","body":"No, class loader implementations usually only have a cache for loaded classes, so when calling <code>loadClass</code> manually, you may get different results when the first invocation fails but the second finds a class file. However, thats depending on the particular <code>ClassLoader</code> subclass whereas the resolution of symbolic references is done by the JVM and leads to not calling into the class loader at all, when theres a recorded failure."},{"owner":{"account_id":16720659,"reputation":408,"user_id":12085680,"display_name":"BugsOverflow"},"score":0,"creation_date":1671720776,"post_id":74888201,"comment_id":132162425,"body_markdown":"Sorry for insisting but I really want to be able to understand it, so I think I get that manually calling the loadClass could get me a different result, so for example: lets suppose that it already failed in loading a particular class, and also keep in mind that internally at some point the loadClass method also calls the findClass method right? So lets suppose I invoke loadClass manually, it will ignore the previous failure for that particular class im trying to load and so it will call findClass to try and find the class I want to load, right?","body":"Sorry for insisting but I really want to be able to understand it, so I think I get that manually calling the loadClass could get me a different result, so for example: lets suppose that it already failed in loading a particular class, and also keep in mind that internally at some point the loadClass method also calls the findClass method right? So lets suppose I invoke loadClass manually, it will ignore the previous failure for that particular class im trying to load and so it will call findClass to try and find the class I want to load, right?"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1671721753,"post_id":74888201,"comment_id":132162809,"body_markdown":"Yes, `loadClass` will call `findClass`, even on a subsequent call, [online demonstration](https://tio.run/##tVK7coMwEOz9FTdUUIQfyHsyTpVH4XSZFLJ0tuUIiUgnPybjbyeSgRgMKXONhmV32VuxZht2sRafVVX6uZIcuGLOwTOTGr4nEKbBHTEKx8ZIAUV4m87ISr18/wBmly5ryAAPUf9kmEAbvOAaNG67YHqixpkbo5BpWEjr6E0WGBRkPV52OHevG7RWCuxgpTWEnFDU3le3N8FCi@NDEw00KzADWlmzdTXtxdCj8VpMdxxLkkb3ssSRizTKcvzyTLk0uU@ybEBqiL@ZxxlxumstgmFvr@4cU566GgQ9psrG1IcRDMOXYLZ3hEVuPOVl6IOUThPOlAqdMXDIjRZAIVoysD23tEjeanC@RJufah5EanWHFiS771XDVa7CX1DLY7ctsVVyRnyV/nFXuOsXPbJgoJxb/kOGyJzUksOkqn4A)","body":"Yes, <code>loadClass</code> will call <code>findClass</code>, even on a subsequent call, <a href=\"https://tio.run/##tVK7coMwEOz9FTdUUIQfyHsyTpVH4XSZFLJ0tuUIiUgnPybjbyeSgRgMKXONhmV32VuxZht2sRafVVX6uZIcuGLOwTOTGr4nEKbBHTEKx8ZIAUV4m87ISr18/wBmly5ryAAPUf9kmEAbvOAaNG67YHqixpkbo5BpWEjr6E0WGBRkPV52OHevG7RWCuxgpTWEnFDU3le3N8FCi@NDEw00KzADWlmzdTXtxdCj8VpMdxxLkkb3ssSRizTKcvzyTLk0uU@ybEBqiL@ZxxlxumstgmFvr@4cU566GgQ9psrG1IcRDMOXYLZ3hEVuPOVl6IOUThPOlAqdMXDIjRZAIVoysD23tEjeanC@RJufah5EanWHFiS771XDVa7CX1DLY7ctsVVyRnyV/nFXuOsXPbJgoJxb/kOGyJzUksOkqn4A\" rel=\"nofollow noreferrer\">online demonstration</a>"}],"tags":[],"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"comment_count":4,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1671710253,"creation_date":1671710253,"answer_id":74888201,"question_id":74524269,"body_markdown":"Actually, the absence of a guaranty that multiple resolution attempts will be made is already enough to allow the behavior of remembering and reusing the result of the first symbol resolution attempt, whether it is a failure or success.\r\n\r\nBut its even mandated behavior, as specified in The Java Virtual Machine Specification, [&#167;5.4.3. Resolution]:\r\n\r\n&gt; Subsequent attempts to resolve the symbolic reference always fail with the same error that was thrown as a result of the initial resolution attempt.\r\n\r\nThis is not be confused with manual invocations of `loadClass` on a `ClassLoader` instance.\r\n\r\n[&#167;5.4.3. Resolution]: https://docs.oracle.com/javase/specs/jvms/se17/html/jvms-5.html#jvms-5.4.3","title":"Java ClassLoader: findClass is not called again after ClassNotFoundException occurs","body":"<p>Actually, the absence of a guaranty that multiple resolution attempts will be made is already enough to allow the behavior of remembering and reusing the result of the first symbol resolution attempt, whether it is a failure or success.</p>\n<p>But its even mandated behavior, as specified in The Java Virtual Machine Specification, <a href=\"https://docs.oracle.com/javase/specs/jvms/se17/html/jvms-5.html#jvms-5.4.3\" rel=\"nofollow noreferrer\">5.4.3. Resolution</a>:</p>\n<blockquote>\n<p>Subsequent attempts to resolve the symbolic reference always fail with the same error that was thrown as a result of the initial resolution attempt.</p>\n</blockquote>\n<p>This is not be confused with manual invocations of <code>loadClass</code> on a <code>ClassLoader</code> instance.</p>\n"}],"owner":{"account_id":16720659,"reputation":408,"user_id":12085680,"display_name":"BugsOverflow"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":151,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":74888201,"answer_count":1,"score":2,"last_activity_date":1671710253,"creation_date":1669060682,"question_id":74524269,"body_markdown":"**Context**:\r\nI have a microservice that at application BootStrap goes and gets all the classes it needs from another microservice as a Zip, then it loads all the classes this Zip contains and executes some code.\r\n\r\n**Problem**:\r\n\r\nWhat we are experiencing is that in some cases the service that gives the Zip with the classes does not answer (this is not the problem I want to address here). \r\n\r\nThe problem is that when this happens we throw a `ClassNotFoundException` and execute again and in this execution the programm again detects it needs to load a class it does not have... So it goes to the `findClass()` method and tries to get it by calling the Microservices asking for this class, but the service that gives the Zip with the class again does not respond so we throw another `ClassNotFoundException`... And again execute but this time it does not even try to call `findClass()` method, it is like Java is saying &quot;okay this is definetely not here so im not even going to bother calling findClass()&quot;, I am trying to find where in the documentation is this specified (because I wanna see where is this specified, is it normal?).\r\n\r\n[Oracle Documentation ClassLoader][1]\r\n\r\nThe closest I could find to what I experience is [this][2] \r\n\r\nBut in that case they do have the class, but the loader does not bother in loading it again because it detects it already has it, we are experiencing the same but in reverse, the loader does not have it, and it does not bother in trying again. Where is this in the docs?\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/lang/ClassLoader.html\r\n  [2]: https://stackoverflow.com/questions/9804601/java-classloader-load-same-class-twice","title":"Java ClassLoader: findClass is not called again after ClassNotFoundException occurs","body":"<p><strong>Context</strong>:\nI have a microservice that at application BootStrap goes and gets all the classes it needs from another microservice as a Zip, then it loads all the classes this Zip contains and executes some code.</p>\n<p><strong>Problem</strong>:</p>\n<p>What we are experiencing is that in some cases the service that gives the Zip with the classes does not answer (this is not the problem I want to address here).</p>\n<p>The problem is that when this happens we throw a <code>ClassNotFoundException</code> and execute again and in this execution the programm again detects it needs to load a class it does not have... So it goes to the <code>findClass()</code> method and tries to get it by calling the Microservices asking for this class, but the service that gives the Zip with the class again does not respond so we throw another <code>ClassNotFoundException</code>... And again execute but this time it does not even try to call <code>findClass()</code> method, it is like Java is saying &quot;okay this is definetely not here so im not even going to bother calling findClass()&quot;, I am trying to find where in the documentation is this specified (because I wanna see where is this specified, is it normal?).</p>\n<p><a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/ClassLoader.html\" rel=\"nofollow noreferrer\">Oracle Documentation ClassLoader</a></p>\n<p>The closest I could find to what I experience is <a href=\"https://stackoverflow.com/questions/9804601/java-classloader-load-same-class-twice\">this</a></p>\n<p>But in that case they do have the class, but the loader does not bother in loading it again because it detects it already has it, we are experiencing the same but in reverse, the loader does not have it, and it does not bother in trying again. Where is this in the docs?</p>\n"},{"tags":["java","reflection","enums"],"comments":[{"owner":{"account_id":971666,"reputation":8005,"user_id":994125,"display_name":"Laf"},"score":0,"creation_date":1447425756,"post_id":33694654,"comment_id":55161947,"body_markdown":"I have rolled back your edit. The accepted answer should not be edited into your question.","body":"I have rolled back your edit. The accepted answer should not be edited into your question."}],"answers":[{"comments":[{"owner":{"account_id":1275436,"reputation":2012,"user_id":1230816,"accept_rate":62,"display_name":"Jemolah"},"score":0,"creation_date":1447424849,"post_id":33694736,"comment_id":55161295,"body_markdown":"Thanks for the answer. Although I do not like to rely on a private field here I use this solution. I have modified my code in the question itself.","body":"Thanks for the answer. Although I do not like to rely on a private field here I use this solution. I have modified my code in the question itself."},{"owner":{"account_id":4934454,"reputation":37277,"user_id":3973077,"accept_rate":77,"display_name":"Paul Boddington"},"score":0,"creation_date":1447425300,"post_id":33694736,"comment_id":55161616,"body_markdown":"It should be `getDeclaringClass` not `getClass`. You need to change the signature of the method to make the method `getDeclaringClass` visible.","body":"It should be <code>getDeclaringClass</code> not <code>getClass</code>. You need to change the signature of the method to make the method <code>getDeclaringClass</code> visible."}],"tags":[],"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"comment_count":2,"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1447429921,"creation_date":1447424033,"answer_id":33694736,"question_id":33694654,"body_markdown":"If the map is not empty, you can retrieve one key and check its class. Otherwise the only way is to access the `keyType` private field of the EnumMap via reflection (the field is not exposed through the public API).\r\n\r\nIn the first case you can do:\r\n\r\n    Iterator&lt;?&gt; it = map.keySet().iterator();\r\n    while (it.hasNext()) {\r\n      Object key = it.next();\r\n      if (key != null) return key.getDeclaringClass();\r\n    }\r\n\r\nIn the second case (which obviously also works for non empty enums) you can use:\r\n\r\n    private static Class&lt;?&gt; enumMapType(EnumMap&lt;?, ?&gt; map) {\r\n      try {\r\n        Field keyType = EnumMap.class.getDeclaredField(&quot;keyType&quot;);\r\n        keyType.setAccessible(true);\r\n        return (Class&lt;?&gt;) keyType.get(map);\r\n      } catch (IllegalAccessException | NoSuchFieldException e) {\r\n        throw new AssertionError(&quot;Could not find EnumMap type&quot;, e);\r\n      }\r\n    }\r\n\r\nThis could break if the internal implementation of `EnumMap` changes and it would be better to find a way around your requirement.\r\n","title":"How do I find out the enum used in an EnumMap?","body":"<p>If the map is not empty, you can retrieve one key and check its class. Otherwise the only way is to access the <code>keyType</code> private field of the EnumMap via reflection (the field is not exposed through the public API).</p>\n\n<p>In the first case you can do:</p>\n\n<pre><code>Iterator&lt;?&gt; it = map.keySet().iterator();\nwhile (it.hasNext()) {\n  Object key = it.next();\n  if (key != null) return key.getDeclaringClass();\n}\n</code></pre>\n\n<p>In the second case (which obviously also works for non empty enums) you can use:</p>\n\n<pre><code>private static Class&lt;?&gt; enumMapType(EnumMap&lt;?, ?&gt; map) {\n  try {\n    Field keyType = EnumMap.class.getDeclaredField(\"keyType\");\n    keyType.setAccessible(true);\n    return (Class&lt;?&gt;) keyType.get(map);\n  } catch (IllegalAccessException | NoSuchFieldException e) {\n    throw new AssertionError(\"Could not find EnumMap type\", e);\n  }\n}\n</code></pre>\n\n<p>This could break if the internal implementation of <code>EnumMap</code> changes and it would be better to find a way around your requirement.</p>\n"},{"comments":[{"owner":{"account_id":1275436,"reputation":2012,"user_id":1230816,"accept_rate":62,"display_name":"Jemolah"},"score":1,"creation_date":1447425165,"post_id":33695035,"comment_id":55161534,"body_markdown":"This is a nice approach: subclassing EnumMap and provide a getter for that field.","body":"This is a nice approach: subclassing EnumMap and provide a getter for that field."}],"tags":[],"owner":{"account_id":4934454,"reputation":37277,"user_id":3973077,"accept_rate":77,"display_name":"Paul Boddington"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1447425043,"creation_date":1447425043,"answer_id":33695035,"question_id":33694654,"body_markdown":"If the `EnumMap` is not empty you can use \r\n\r\n    map.keySet().iterator().next().getDeclaringClass();\r\n\r\n`getClass()` does not work if the enum has a method with a constant-specific implementation.\r\n\r\nIf the `EnumMap` is empty you could use reflection, as shown in @assylias&#39;s answer.\r\n\r\nAn alternative is to subclass `EnumMap` and write a `public` getter.\r\n\r\n\r\n    public final class MyEnumMap&lt;K extends Enum&lt;K&gt;, V&gt; extends EnumMap&lt;K, V&gt; {\r\n    \r\n        private final Class&lt;K&gt; keyType;\r\n    \r\n        public MyEnumMap(Class&lt;K&gt; keyType) {\r\n            super(keyType);\r\n            this.keyType = keyType;\r\n        }\r\n    \r\n        public Class&lt;K&gt; keyType() { return keyType; }\r\n    }","title":"How do I find out the enum used in an EnumMap?","body":"<p>If the <code>EnumMap</code> is not empty you can use </p>\n\n<pre><code>map.keySet().iterator().next().getDeclaringClass();\n</code></pre>\n\n<p><code>getClass()</code> does not work if the enum has a method with a constant-specific implementation.</p>\n\n<p>If the <code>EnumMap</code> is empty you could use reflection, as shown in @assylias's answer.</p>\n\n<p>An alternative is to subclass <code>EnumMap</code> and write a <code>public</code> getter.</p>\n\n<pre><code>public final class MyEnumMap&lt;K extends Enum&lt;K&gt;, V&gt; extends EnumMap&lt;K, V&gt; {\n\n    private final Class&lt;K&gt; keyType;\n\n    public MyEnumMap(Class&lt;K&gt; keyType) {\n        super(keyType);\n        this.keyType = keyType;\n    }\n\n    public Class&lt;K&gt; keyType() { return keyType; }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"score":0,"creation_date":1672132455,"post_id":74888150,"comment_id":132225756,"body_markdown":"What a stupid hack. +1","body":"What a stupid hack. +1"}],"tags":[],"owner":{"account_id":5418486,"reputation":31,"user_id":4312951,"display_name":"Donald"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1671710016,"creation_date":1671710016,"answer_id":74888150,"question_id":33694654,"body_markdown":"In case you cannot subclass the `EnumMap`, serializing into an `ObjectOutputStream` and de-serializing with a specialized `ObjectInputStream` which resolves the `EnumMap` class descriptor to your own subclass of `EnumMap` can help. Your subclass must have the same `serialVersionUID` as `java.util.EnumMap` and must have simple name `EnumMap`, not be an inner class, but can live in any package.\r\n\r\nHere is an example for such an `EnumMap` subclass:\r\n\r\n```\r\npackage your.package.name.here;\r\n\r\nimport java.io.ObjectInputStream;\r\n\r\n/**\r\n * A serialization-compatible mock for {@link java.util.EnumMap} that uses an equal {@link #serialVersionUID} and a\r\n * compatible set of fields. When de-serializing an {@link java.util.EnumMap} instance into an instance of this class,\r\n * e.g., by overriding {@link ObjectInputStream}&#39;s {@link ObjectInputStream#resolveClass} method such that it delivers\r\n * this class instead of {@link java.util.EnumMap}, the fields are made accessible through getters; in particular,\r\n * {@link #getKeyType()} reveals the original {@link java.util.EnumMap}&#39;s key type, even if the map is empty.&lt;p&gt;\r\n * \r\n * The {@link EnumMap#getEnumMapKeyType(java.util.EnumMap)} method can be used to determine the key type of any\r\n * {@link java.util.EnumMap}, even if it&#39;s empty.\r\n */\r\nclass EnumMap&lt;K extends Enum&lt;K&gt;, V&gt; extends java.util.EnumMap&lt;K, V&gt; {\r\n    private final Class&lt;K&gt; keyType;\r\n    private transient K[] keyUniverse;\r\n    private transient Object[] vals;\r\n    private transient int size = 0;\r\n    private static final long serialVersionUID = 458661240069192865L;\r\n    \r\n    EnumMap(Class&lt;K&gt; c) {\r\n        super(c);\r\n        keyType = null;\r\n    }\r\n    \r\n    public K[] getKeyUniverse() {\r\n        return keyUniverse;\r\n    }\r\n\r\n    public Object[] getVals() {\r\n        return vals;\r\n    }\r\n\r\n    public int getSize() {\r\n        return size;\r\n    }\r\n\r\n    public Class&lt;K&gt; getKeyType() {\r\n        return keyType;\r\n    }\r\n\r\n    /**\r\n     * Reconstitute the &lt;tt&gt;EnumMap&lt;/tt&gt; instance from a stream (i.e., deserialize it).\r\n     */\r\n    private void readObject(java.io.ObjectInputStream s) throws java.io.IOException, ClassNotFoundException {\r\n        // Read in the key type and any hidden stuff\r\n        s.defaultReadObject();\r\n        // Read in size (number of Mappings)\r\n        int size = s.readInt();\r\n        // Read the keys and values, and put the mappings in the HashMap\r\n        for (int i = 0; i &lt; size; i++) {\r\n            s.readObject(); // key\r\n            s.readObject(); // value\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nNote the public getters for the fields. With this, you can implement a little utility that provides the specialized ObjectInputStream and then fetches the key type from the instance of your specialized EnumMap, like this:\r\n\r\n```\r\npackage your.package.name.here;\r\n\r\nimport java.io.ByteArrayInputStream;\r\nimport java.io.ByteArrayOutputStream;\r\nimport java.io.IOException;\r\nimport java.io.InputStream;\r\nimport java.io.ObjectInputStream;\r\nimport java.io.ObjectOutputStream;\r\nimport java.io.ObjectStreamClass;\r\n\r\npublic class EnumMapUtil {\r\n    private static class MyObjectInputStream extends ObjectInputStream {\r\n        public MyObjectInputStream(InputStream in) throws IOException {\r\n            super(in);\r\n        }\r\n\r\n        @Override\r\n        protected Class&lt;?&gt; resolveClass(ObjectStreamClass desc) throws IOException, ClassNotFoundException {\r\n            final Class&lt;?&gt; result;\r\n            if (desc.getName().equals(&quot;java.util.EnumMap&quot;)) {\r\n                result = your.package.name.here.EnumMap.class;\r\n            } else {\r\n                result = super.resolveClass(desc);\r\n            }\r\n            return result;\r\n        }\r\n    }\r\n    \r\n    public static &lt;K extends Enum&lt;K&gt;, V&gt; Class&lt;K&gt; getKeyType(java.util.EnumMap&lt;K, V&gt; enumMap) throws IOException, ClassNotFoundException {\r\n        final Class&lt;K&gt; result;\r\n        if (enumMap.isEmpty()) {\r\n            final ByteArrayOutputStream bos = new ByteArrayOutputStream();\r\n            final ObjectOutputStream oos = new ObjectOutputStream(bos);\r\n            oos.writeObject(enumMap);\r\n            oos.close();\r\n            final ObjectInputStream ois = new MyObjectInputStream(new ByteArrayInputStream(bos.toByteArray()));\r\n            @SuppressWarnings(&quot;unchecked&quot;)\r\n            final your.package.name.here.EnumMap&lt;K, V&gt; readMap = (your.package.name.here.EnumMap&lt;K, V&gt;) ois.readObject();\r\n            final Class&lt;K&gt; keyType = readMap.getKeyType();\r\n            result = keyType;\r\n        } else {\r\n            result = enumMap.keySet().iterator().next().getDeclaringClass();\r\n        }\r\n        return result;\r\n    }\r\n}\r\n```\r\n\r\nYou should then be able to use something like `EnumMapUtil.getKeyType(myEmptyEnumMap)` which returns the enum&#39;s `Class` object on which you could then, e.g., call `getEnumConstants()`.","title":"How do I find out the enum used in an EnumMap?","body":"<p>In case you cannot subclass the <code>EnumMap</code>, serializing into an <code>ObjectOutputStream</code> and de-serializing with a specialized <code>ObjectInputStream</code> which resolves the <code>EnumMap</code> class descriptor to your own subclass of <code>EnumMap</code> can help. Your subclass must have the same <code>serialVersionUID</code> as <code>java.util.EnumMap</code> and must have simple name <code>EnumMap</code>, not be an inner class, but can live in any package.</p>\n<p>Here is an example for such an <code>EnumMap</code> subclass:</p>\n<pre><code>package your.package.name.here;\n\nimport java.io.ObjectInputStream;\n\n/**\n * A serialization-compatible mock for {@link java.util.EnumMap} that uses an equal {@link #serialVersionUID} and a\n * compatible set of fields. When de-serializing an {@link java.util.EnumMap} instance into an instance of this class,\n * e.g., by overriding {@link ObjectInputStream}'s {@link ObjectInputStream#resolveClass} method such that it delivers\n * this class instead of {@link java.util.EnumMap}, the fields are made accessible through getters; in particular,\n * {@link #getKeyType()} reveals the original {@link java.util.EnumMap}'s key type, even if the map is empty.&lt;p&gt;\n * \n * The {@link EnumMap#getEnumMapKeyType(java.util.EnumMap)} method can be used to determine the key type of any\n * {@link java.util.EnumMap}, even if it's empty.\n */\nclass EnumMap&lt;K extends Enum&lt;K&gt;, V&gt; extends java.util.EnumMap&lt;K, V&gt; {\n    private final Class&lt;K&gt; keyType;\n    private transient K[] keyUniverse;\n    private transient Object[] vals;\n    private transient int size = 0;\n    private static final long serialVersionUID = 458661240069192865L;\n    \n    EnumMap(Class&lt;K&gt; c) {\n        super(c);\n        keyType = null;\n    }\n    \n    public K[] getKeyUniverse() {\n        return keyUniverse;\n    }\n\n    public Object[] getVals() {\n        return vals;\n    }\n\n    public int getSize() {\n        return size;\n    }\n\n    public Class&lt;K&gt; getKeyType() {\n        return keyType;\n    }\n\n    /**\n     * Reconstitute the &lt;tt&gt;EnumMap&lt;/tt&gt; instance from a stream (i.e., deserialize it).\n     */\n    private void readObject(java.io.ObjectInputStream s) throws java.io.IOException, ClassNotFoundException {\n        // Read in the key type and any hidden stuff\n        s.defaultReadObject();\n        // Read in size (number of Mappings)\n        int size = s.readInt();\n        // Read the keys and values, and put the mappings in the HashMap\n        for (int i = 0; i &lt; size; i++) {\n            s.readObject(); // key\n            s.readObject(); // value\n        }\n    }\n}\n</code></pre>\n<p>Note the public getters for the fields. With this, you can implement a little utility that provides the specialized ObjectInputStream and then fetches the key type from the instance of your specialized EnumMap, like this:</p>\n<pre><code>package your.package.name.here;\n\nimport java.io.ByteArrayInputStream;\nimport java.io.ByteArrayOutputStream;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.ObjectInputStream;\nimport java.io.ObjectOutputStream;\nimport java.io.ObjectStreamClass;\n\npublic class EnumMapUtil {\n    private static class MyObjectInputStream extends ObjectInputStream {\n        public MyObjectInputStream(InputStream in) throws IOException {\n            super(in);\n        }\n\n        @Override\n        protected Class&lt;?&gt; resolveClass(ObjectStreamClass desc) throws IOException, ClassNotFoundException {\n            final Class&lt;?&gt; result;\n            if (desc.getName().equals(&quot;java.util.EnumMap&quot;)) {\n                result = your.package.name.here.EnumMap.class;\n            } else {\n                result = super.resolveClass(desc);\n            }\n            return result;\n        }\n    }\n    \n    public static &lt;K extends Enum&lt;K&gt;, V&gt; Class&lt;K&gt; getKeyType(java.util.EnumMap&lt;K, V&gt; enumMap) throws IOException, ClassNotFoundException {\n        final Class&lt;K&gt; result;\n        if (enumMap.isEmpty()) {\n            final ByteArrayOutputStream bos = new ByteArrayOutputStream();\n            final ObjectOutputStream oos = new ObjectOutputStream(bos);\n            oos.writeObject(enumMap);\n            oos.close();\n            final ObjectInputStream ois = new MyObjectInputStream(new ByteArrayInputStream(bos.toByteArray()));\n            @SuppressWarnings(&quot;unchecked&quot;)\n            final your.package.name.here.EnumMap&lt;K, V&gt; readMap = (your.package.name.here.EnumMap&lt;K, V&gt;) ois.readObject();\n            final Class&lt;K&gt; keyType = readMap.getKeyType();\n            result = keyType;\n        } else {\n            result = enumMap.keySet().iterator().next().getDeclaringClass();\n        }\n        return result;\n    }\n}\n</code></pre>\n<p>You should then be able to use something like <code>EnumMapUtil.getKeyType(myEmptyEnumMap)</code> which returns the enum's <code>Class</code> object on which you could then, e.g., call <code>getEnumConstants()</code>.</p>\n"}],"owner":{"account_id":1275436,"reputation":2012,"user_id":1230816,"accept_rate":62,"display_name":"Jemolah"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":546,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":33694736,"answer_count":3,"score":3,"last_activity_date":1671710016,"creation_date":1447423827,"question_id":33694654,"body_markdown":"I have a test class with an internal enum and an EnumMap like the following. How do I find out which enum is used within the EnumMap?\r\n\r\n    enum MyEnum { ENUM1, ENUM2 }\r\n    EnumMap&lt;MyEnum, String&gt; emap = new EnumMap&lt;&gt;( MyEnum.class );\r\n    public void discover() {\r\n      Class&lt;?&gt; eclass = ???;\r\n      System.out.println( eclass );\r\n    }\r\n\r\nshould print \r\n\r\n&gt; MyEnum.class\r\n\r\n      ","title":"How do I find out the enum used in an EnumMap?","body":"<p>I have a test class with an internal enum and an EnumMap like the following. How do I find out which enum is used within the EnumMap?</p>\n\n<pre><code>enum MyEnum { ENUM1, ENUM2 }\nEnumMap&lt;MyEnum, String&gt; emap = new EnumMap&lt;&gt;( MyEnum.class );\npublic void discover() {\n  Class&lt;?&gt; eclass = ???;\n  System.out.println( eclass );\n}\n</code></pre>\n\n<p>should print </p>\n\n<blockquote>\n  <p>MyEnum.class</p>\n</blockquote>\n"},{"tags":["java","spring-boot","pojo","spring-annotations"],"comments":[{"owner":{"account_id":12226275,"reputation":102,"user_id":8923778,"display_name":"Bacem W."},"score":0,"creation_date":1671617095,"post_id":74874198,"comment_id":132135714,"body_markdown":"you can use  private transient id; \nif you dont need to serialize/deserialize it","body":"you can use  private transient id;  if you dont need to serialize/deserialize it"}],"answers":[{"comments":[{"owner":{"display_name":"user13876589"},"score":0,"creation_date":1671631554,"post_id":74874388,"comment_id":132140243,"body_markdown":"Hi \nThank you for the effort. It is not my model, it is dto only and i am able to get data from front end for 3 fields correctly, but i wanted to reply with same with 2 fields(i won&#39;t sent other 1 field), so i used @JsonIgnore. But this annotation will always ignores the value even from the front end (even thought they have sent data for all 3 data). What i really want is i want to recieve data for 3 fields and wants to send only 2 data as response using only one dto. Is it possible ?","body":"Hi  Thank you for the effort. It is not my model, it is dto only and i am able to get data from front end for 3 fields correctly, but i wanted to reply with same with 2 fields(i won&#39;t sent other 1 field), so i used @JsonIgnore. But this annotation will always ignores the value even from the front end (even thought they have sent data for all 3 data). What i really want is i want to recieve data for 3 fields and wants to send only 2 data as response using only one dto. Is it possible ?"}],"tags":[],"owner":{"account_id":11084453,"reputation":211,"user_id":8138689,"display_name":"Satyajit Bhatt"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671617819,"creation_date":1671617468,"answer_id":74874388,"question_id":74874198,"body_markdown":"&gt; You just need to use @JsonInclude(JsonInclude.Include.NON_NULL) at class level and it will be helpful for ignore all your null fields.\r\n\r\nFor example :\r\n\r\n    @JsonInclude(JsonInclude.Include.NON_NULL)\r\n    public class Test {\r\n        // Fields\r\n        // Constructors\r\n        // Getters - setters\r\n    }\r\n\r\nAs of now you are using only one POJO it&#39;s not good practice because it&#39;s your main entity into your project, so good practice is always make DTO for the same.","title":"How to ignore field/column only when return response from spring boot","body":"<blockquote>\n<p>You just need to use @JsonInclude(JsonInclude.Include.NON_NULL) at class level and it will be helpful for ignore all your null fields.</p>\n</blockquote>\n<p>For example :</p>\n<pre><code>@JsonInclude(JsonInclude.Include.NON_NULL)\npublic class Test {\n    // Fields\n    // Constructors\n    // Getters - setters\n}\n</code></pre>\n<p>As of now you are using only one POJO it's not good practice because it's your main entity into your project, so good practice is always make DTO for the same.</p>\n"},{"tags":[],"owner":{"account_id":1706859,"reputation":1320,"user_id":1565759,"accept_rate":83,"display_name":"sonOfRa"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671709916,"creation_date":1671639745,"answer_id":74878937,"question_id":74874198,"body_markdown":"This is possible via the @JsonView annotation that is part of Jackson. Spring can leverage it to define the views used on the controller.\r\n\r\nYou&#39;d define your DTO class like this:\r\n\r\n    class User {\r\n        User(String internalId, String externalId, String name) {\r\n            this.internalId = internalId;\r\n            this.externalId = externalId;\r\n            this.name = name;\r\n        }\r\n        @JsonView(User.Views.Internal.class)\r\n        String internalId;\r\n    \r\n        @JsonView(User.Views.Public.class)\r\n        String externalId;\r\n    \r\n        @JsonView(User.Views.Public.class)\r\n        String name;\r\n    \r\n        static class Views {\r\n            static class Public {\r\n    \r\n            }\r\n    \r\n            static class Internal extends Public {\r\n    \r\n            }\r\n        }\r\n    }\r\n\r\nThe Views internal class acts as a marker to jackson, in order to tell it which fields to include in which configuration. It does not need to be an inner class, but that makes for a shorter code snippet to paste here. Since Internal extends Public, all fields marked with Public are also included when the Internal view is selected.\r\n\r\nYou can then define a controller like this:\r\n\r\n    @RestController\r\n    class UserController {\r\n    \r\n        @GetMapping(&quot;/user/internal&quot;)\r\n        @JsonView(User.Views.Internal.class)\r\n        User getPublicUser() {\r\n            return new User(&quot;internal&quot;, &quot;external&quot;, &quot;john&quot;);\r\n        }\r\n    \r\n        @GetMapping(&quot;/user/public&quot;)\r\n        @JsonView(User.Views.Public.class)\r\n        User getPrivateUser() {\r\n            return new User(&quot;internal&quot;, &quot;external&quot;, &quot;john&quot;);\r\n        }\r\n    }\r\n\r\nSince Spring is aware of the JsonView annotations, the JSON returned by the /public endpoint will contain only externalId and name, and the /internal endpoint will additionally include the internalId field.\r\n\r\nNote that fields with *no* annotation will not be included if you enable any view. This behaviour can be controlled by MapperFeature.DEFAULT_VIEW_INCLUSION, which was `false` in the default Spring ObjectMapper when I used this for the last time.\r\n\r\nYou can also annotate your @RequestBody parameters to controller methods with JsonView, to allow/disallow certain parameters on input objects, and then use a different set of parameters for output objects.","title":"How to ignore field/column only when return response from spring boot","body":"<p>This is possible via the @JsonView annotation that is part of Jackson. Spring can leverage it to define the views used on the controller.</p>\n<p>You'd define your DTO class like this:</p>\n<pre><code>class User {\n    User(String internalId, String externalId, String name) {\n        this.internalId = internalId;\n        this.externalId = externalId;\n        this.name = name;\n    }\n    @JsonView(User.Views.Internal.class)\n    String internalId;\n\n    @JsonView(User.Views.Public.class)\n    String externalId;\n\n    @JsonView(User.Views.Public.class)\n    String name;\n\n    static class Views {\n        static class Public {\n\n        }\n\n        static class Internal extends Public {\n\n        }\n    }\n}\n</code></pre>\n<p>The Views internal class acts as a marker to jackson, in order to tell it which fields to include in which configuration. It does not need to be an inner class, but that makes for a shorter code snippet to paste here. Since Internal extends Public, all fields marked with Public are also included when the Internal view is selected.</p>\n<p>You can then define a controller like this:</p>\n<pre><code>@RestController\nclass UserController {\n\n    @GetMapping(&quot;/user/internal&quot;)\n    @JsonView(User.Views.Internal.class)\n    User getPublicUser() {\n        return new User(&quot;internal&quot;, &quot;external&quot;, &quot;john&quot;);\n    }\n\n    @GetMapping(&quot;/user/public&quot;)\n    @JsonView(User.Views.Public.class)\n    User getPrivateUser() {\n        return new User(&quot;internal&quot;, &quot;external&quot;, &quot;john&quot;);\n    }\n}\n</code></pre>\n<p>Since Spring is aware of the JsonView annotations, the JSON returned by the /public endpoint will contain only externalId and name, and the /internal endpoint will additionally include the internalId field.</p>\n<p>Note that fields with <em>no</em> annotation will not be included if you enable any view. This behaviour can be controlled by MapperFeature.DEFAULT_VIEW_INCLUSION, which was <code>false</code> in the default Spring ObjectMapper when I used this for the last time.</p>\n<p>You can also annotate your @RequestBody parameters to controller methods with JsonView, to allow/disallow certain parameters on input objects, and then use a different set of parameters for output objects.</p>\n"}],"owner":{"display_name":"user13876589"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1307,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1671709916,"creation_date":1671616619,"question_id":74874198,"body_markdown":"I need to ignore the field when return the response from spring boot. Pls find below info,\r\n\r\nI have one pojo called Student as below\r\n\r\n    Student {\r\n    id,\r\n    name,\r\n    lastName\r\n    }\r\n\r\ni am getting a body for as PostRequest  as below \r\n\r\n    {\r\n    id:&quot;1&quot;,\r\n    name:&quot;Test&quot;,\r\n    lname:&quot;Test&quot;\r\n    }\r\n\r\ni want get all the data from frontEnd (id,name,Lname) But i just want to return the same pojo class without id as below,\r\n\r\n    {\r\n    name:&quot;Test&quot;,\r\n    lName:&quot;Test&quot;\r\n    }\r\n\r\nI have tried @JsonIgnore for column id, **But it makes the id column as null(id=null -it is coming like this even when i send data to id field from postman) when i get the data from frontEnd**.\r\n\r\nI would like to **use only one pojo** to get the data with proper data(withoud getting id as Null), and need to send back the data by ignoring the id column.\r\n\r\nIs there any way to achieve it instead of using another pojo?\r\n","title":"How to ignore field/column only when return response from spring boot","body":"<p>I need to ignore the field when return the response from spring boot. Pls find below info,</p>\n<p>I have one pojo called Student as below</p>\n<pre><code>Student {\nid,\nname,\nlastName\n}\n</code></pre>\n<p>i am getting a body for as PostRequest  as below</p>\n<pre><code>{\nid:&quot;1&quot;,\nname:&quot;Test&quot;,\nlname:&quot;Test&quot;\n}\n</code></pre>\n<p>i want get all the data from frontEnd (id,name,Lname) But i just want to return the same pojo class without id as below,</p>\n<pre><code>{\nname:&quot;Test&quot;,\nlName:&quot;Test&quot;\n}\n</code></pre>\n<p>I have tried @JsonIgnore for column id, <strong>But it makes the id column as null(id=null -it is coming like this even when i send data to id field from postman) when i get the data from frontEnd</strong>.</p>\n<p>I would like to <strong>use only one pojo</strong> to get the data with proper data(withoud getting id as Null), and need to send back the data by ignoring the id column.</p>\n<p>Is there any way to achieve it instead of using another pojo?</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":1,"creation_date":1671708884,"post_id":74887896,"comment_id":132158647,"body_markdown":"If the jar is depleyed, there is no `src/main/resources` folder. Use `Class.getResource` instead of `File`","body":"If the jar is depleyed, there is no <code>src&#47;main&#47;resources</code> folder. Use <code>Class.getResource</code> instead of <code>File</code>"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1671708944,"post_id":74887896,"comment_id":132158669,"body_markdown":"probably because `src` folder isn&#39;t deployed! :) (spring-boot!?) try: `@Value(&quot;classpath:/afp/fop.xconf&quot;) Resource fopConfig` instead (org.springframework.core.io;) ..then you can `FopFactory.newInstance(fopConfig.getFile())`","body":"probably because <code>src</code> folder isn&#39;t deployed! :) (spring-boot!?) try: <code>@Value(&quot;classpath:&#47;afp&#47;fop.xconf&quot;) Resource fopConfig</code> instead (org.springframework.core.io;) ..then you can <code>FopFactory.newInstance(fopConfig.getFile())</code>"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1671709498,"post_id":74887896,"comment_id":132158833,"body_markdown":"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/core/io/Resource.html (+ subclasses)","body":"<a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/core/io/Resource.html\" rel=\"nofollow noreferrer\">docs.spring.io/spring-framework/docs/current/javadoc-api/org&zwnj;&#8203;/&hellip;</a> (+ subclasses)"},{"owner":{"display_name":"user11491936"},"score":2,"creation_date":1671710742,"post_id":74887896,"comment_id":132159165,"body_markdown":"@xerx593 When I try your suggestion I got this return : \n`[nio-8080-exec-3] e.e.c.FileGenerationController           : java.io.FileNotFoundException: class path resource [afp/fop.xconf] cannot be resolved to absolute file path because it does not reside in the file system: jar:file:/C:/Users/Guen/Downloads/editique-0.16.0-SNAPSHOT.jar!/BOOT-INF/classes!/afp/fop.xconf`","body":"@xerx593 When I try your suggestion I got this return :  <code>[nio-8080-exec-3] e.e.c.FileGenerationController           : java.io.FileNotFoundException: class path resource [afp&#47;fop.xconf] cannot be resolved to absolute file path because it does not reside in the file system: jar:file:&#47;C:&#47;Users&#47;Guen&#47;Downloads&#47;editique-0.16.0-SNAPSHOT.j&zwnj;&#8203;ar!&#47;BOOT-INF&#47;classes&zwnj;&#8203;!&#47;afp&#47;fop.xconf</code>"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1671719435,"post_id":74887896,"comment_id":132161914,"body_markdown":"i assume best for spring-boot-fop is to: &quot;expand the jar&quot; (which is also best practice for docker images) or at least provide the configs (+fop-resources) externally (since once worked around `new File(...)`, you have the next problem with &quot;baseUrl&quot; and subordinate (conf) resources","body":"i assume best for spring-boot-fop is to: &quot;expand the jar&quot; (which is also best practice for docker images) or at least provide the configs (+fop-resources) externally (since once worked around <code>new File(...)</code>, you have the next problem with &quot;baseUrl&quot; and subordinate (conf) resources"}],"answers":[{"tags":[],"owner":{"account_id":61566,"reputation":68934,"user_id":183406,"accept_rate":74,"display_name":"meriton"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1671709594,"creation_date":1671709594,"answer_id":74888065,"question_id":74887896,"body_markdown":"A `File` object points to a file. The resources within a JAR file are not files, so you can not create a `File` object that points to them.\r\n\r\nIn Spring, one usually would inject a `Resource` instead, and pass that `Resource` to the `FopFactory`. That presumes that the `FopFactory` accepts a `Resource`, or can be changed to accept one.\r\n\r\nIf that isn&#39;t the case, calling code can ask the `Resource` for an `InputStream`, and pass that to the `FopFactory`. If the `FopFactory` is an `org.apache.fop.apps.FopFactory`, this can be accomplished by writing `FapFactory.newInstance(baseURI, resource.getInputStream())`.\r\n\r\nIf the `FopFactory` doesn&#39;t accept an `InputStream` either, the only option is to read the `InputStream`, write it to a temporary file, and pass that `File` to the `FopFactory`. But that&#39;s really convoluted, and there is nearly always a better option.","title":"File not found in jar after deployment","body":"<p>A <code>File</code> object points to a file. The resources within a JAR file are not files, so you can not create a <code>File</code> object that points to them.</p>\n<p>In Spring, one usually would inject a <code>Resource</code> instead, and pass that <code>Resource</code> to the <code>FopFactory</code>. That presumes that the <code>FopFactory</code> accepts a <code>Resource</code>, or can be changed to accept one.</p>\n<p>If that isn't the case, calling code can ask the <code>Resource</code> for an <code>InputStream</code>, and pass that to the <code>FopFactory</code>. If the <code>FopFactory</code> is an <code>org.apache.fop.apps.FopFactory</code>, this can be accomplished by writing <code>FapFactory.newInstance(baseURI, resource.getInputStream())</code>.</p>\n<p>If the <code>FopFactory</code> doesn't accept an <code>InputStream</code> either, the only option is to read the <code>InputStream</code>, write it to a temporary file, and pass that <code>File</code> to the <code>FopFactory</code>. But that's really convoluted, and there is nearly always a better option.</p>\n"}],"owner":{"display_name":"user11491936"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":298,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":74888065,"answer_count":1,"score":0,"last_activity_date":1671709594,"creation_date":1671708560,"question_id":74887896,"body_markdown":"I have program that throws FileNotFoundException on this statement when the jar is deployed :\r\n\r\n    final var fopFactory = FopFactory.newInstance(new File(&quot;src//main//resources//afp//fop.xconf&quot;));\r\n\r\nBut this works very well locally with intellij.\r\nI looked around a bit and apparently it needs to go through an InputStream but my `FopFactory.newInstance` is waiting a File object as a parameter and not an InputStream.\r\nCould you tell me how to work around this problem please ?\r\n\r\nThanks in advance.","title":"File not found in jar after deployment","body":"<p>I have program that throws FileNotFoundException on this statement when the jar is deployed :</p>\n<pre><code>final var fopFactory = FopFactory.newInstance(new File(&quot;src//main//resources//afp//fop.xconf&quot;));\n</code></pre>\n<p>But this works very well locally with intellij.\nI looked around a bit and apparently it needs to go through an InputStream but my <code>FopFactory.newInstance</code> is waiting a File object as a parameter and not an InputStream.\nCould you tell me how to work around this problem please ?</p>\n<p>Thanks in advance.</p>\n"},{"tags":["java","reactive-programming","project-reactor","flux","rsocket"],"answers":[{"comments":[{"owner":{"account_id":16020895,"reputation":63,"user_id":11562446,"display_name":"Saad Moumen"},"score":0,"creation_date":1606829419,"post_id":61694228,"comment_id":115075566,"body_markdown":"Is your suggestion valid in the case where we want to add an element to the flux following an Http call ? i.e a client sends a POST request to an endpoint with the message he wants to publish. thank you","body":"Is your suggestion valid in the case where we want to add an element to the flux following an Http call ? i.e a client sends a POST request to an endpoint with the message he wants to publish. thank you"},{"owner":{"account_id":1126254,"reputation":27393,"user_id":1113486,"display_name":"Simon Basl&#233;"},"score":0,"creation_date":1606923070,"post_id":61694228,"comment_id":115110885,"body_markdown":"that sounds like a completely different use case. in OP&#39;s case, a single `Flux` needed to reflect a single listener established by calling (as I understand non-reactive) `subscriber(Consumer)`. in your case it sounds like multiple calls to that endpoint should all publish to the same `Flux`. Look into the `Sinks` API in 3.4.0 for that.","body":"that sounds like a completely different use case. in OP&#39;s case, a single <code>Flux</code> needed to reflect a single listener established by calling (as I understand non-reactive) <code>subscriber(Consumer)</code>. in your case it sounds like multiple calls to that endpoint should all publish to the same <code>Flux</code>. Look into the <code>Sinks</code> API in 3.4.0 for that."},{"owner":{"account_id":16020895,"reputation":63,"user_id":11562446,"display_name":"Saad Moumen"},"score":0,"creation_date":1607013616,"post_id":61694228,"comment_id":115144936,"body_markdown":"That&#39;s exactly what I did! It&#39;s SO well-made and seems to cover the Safe production from multiple threads. Thank you Simon.","body":"That&#39;s exactly what I did! It&#39;s SO well-made and seems to cover the Safe production from multiple threads. Thank you Simon."}],"tags":[],"owner":{"account_id":1126254,"reputation":27393,"user_id":1113486,"display_name":"Simon Basl&#233;"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1589015040,"creation_date":1589015040,"answer_id":61694228,"question_id":61654947,"body_markdown":"this is a typical use case of Flux.create. you register an obsereer from inside the create lambda, which will pass the data it receives down to the provided FluxSink","title":"How to dynamically add elements to reactor hot flux from another method?","body":"<p>this is a typical use case of Flux.create. you register an obsereer from inside the create lambda, which will pass the data it receives down to the provided FluxSink</p>\n"},{"tags":[],"owner":{"account_id":4311991,"reputation":3414,"user_id":3522818,"accept_rate":67,"display_name":"kerner1000"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1671709375,"creation_date":1611483526,"answer_id":65869403,"question_id":61654947,"body_markdown":"As Simon already pointed out, this is what you use `Flux.create` for.\r\n\r\nTake a look at the [Getting Started Guide][1] on [projectreactor.io][2].\r\n\r\nIn short, you register a custom listener inside the lambda of the `create` method:\r\n\r\n    Flux&lt;String&gt; bridge = Flux.create(sink -&gt; {\r\n        myEventProcessor.register( \r\n          new MyEventListener&lt;String&gt;() { \r\n    \r\n            public void onDataChunk(List&lt;String&gt; chunk) {\r\n              for(String s : chunk) {\r\n                sink.next(s); \r\n              }\r\n            }\r\n    \r\n            public void processComplete() {\r\n                sink.complete(); \r\n            }\r\n        });\r\n    });\r\n\r\nWhat you want to do is to pass the incoming elements on to a [FluxSink][3], which will then publish those elements on the Flux.\r\n\r\n\r\n  [1]: https://projectreactor.io/docs/core/release/reference/#producing\r\n  [2]: https://projectreactor.io/\r\n  [3]: https://projectreactor.io/docs/core/release/api/reactor/core/publisher/FluxSink.html","title":"How to dynamically add elements to reactor hot flux from another method?","body":"<p>As Simon already pointed out, this is what you use <code>Flux.create</code> for.</p>\n<p>Take a look at the <a href=\"https://projectreactor.io/docs/core/release/reference/#producing\" rel=\"nofollow noreferrer\">Getting Started Guide</a> on <a href=\"https://projectreactor.io/\" rel=\"nofollow noreferrer\">projectreactor.io</a>.</p>\n<p>In short, you register a custom listener inside the lambda of the <code>create</code> method:</p>\n<pre><code>Flux&lt;String&gt; bridge = Flux.create(sink -&gt; {\n    myEventProcessor.register( \n      new MyEventListener&lt;String&gt;() { \n\n        public void onDataChunk(List&lt;String&gt; chunk) {\n          for(String s : chunk) {\n            sink.next(s); \n          }\n        }\n\n        public void processComplete() {\n            sink.complete(); \n        }\n    });\n});\n</code></pre>\n<p>What you want to do is to pass the incoming elements on to a <a href=\"https://projectreactor.io/docs/core/release/api/reactor/core/publisher/FluxSink.html\" rel=\"nofollow noreferrer\">FluxSink</a>, which will then publish those elements on the Flux.</p>\n"}],"owner":{"account_id":6460845,"reputation":345,"user_id":5004735,"accept_rate":60,"display_name":"Mr.Ustiik"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4427,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":2,"score":4,"last_activity_date":1671709375,"creation_date":1588845504,"question_id":61654947,"body_markdown":"I have a data source service, which takes an observer as a parameter.\r\n```\r\nvoid subscribe(Consumer onEventConsumer);\r\n```\r\nI want to use flux as a response stream for RSocket.\r\nHow can I do this?\r\nAs I see it now, it should be something like\r\n```\r\nFlux&lt;T&gt; controllerMethod(RequestMessage mgs) {\r\n   var flux = Flux.empty();\r\n   dataSource.subscribe(event -&gt; flux.push(event));\r\n   return flux;\r\n}\r\n```\r\nBut I have big doubts that it&#39;s a proper solution, and I&#39;m new in the reactive approach, I don&#39;t know what methods I should use here?","title":"How to dynamically add elements to reactor hot flux from another method?","body":"<p>I have a data source service, which takes an observer as a parameter.</p>\n\n<pre><code>void subscribe(Consumer onEventConsumer);\n</code></pre>\n\n<p>I want to use flux as a response stream for RSocket.\nHow can I do this?\nAs I see it now, it should be something like</p>\n\n<pre><code>Flux&lt;T&gt; controllerMethod(RequestMessage mgs) {\n   var flux = Flux.empty();\n   dataSource.subscribe(event -&gt; flux.push(event));\n   return flux;\n}\n</code></pre>\n\n<p>But I have big doubts that it's a proper solution, and I'm new in the reactive approach, I don't know what methods I should use here?</p>\n"},{"tags":["java","lambda"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1671688940,"post_id":74884591,"comment_id":132153415,"body_markdown":"*But it doesn&#39;t work.* Is not an error description. Please explain what it means","body":"<i>But it doesn&#39;t work.</i> Is not an error description. Please explain what it means"},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1671688999,"post_id":74884591,"comment_id":132153431,"body_markdown":"*I am trying to replace all 0s with values*. `replaceFirst` only replaces the first accurence of a String. User replace if you want to replace all.","body":"<i>I am trying to replace all 0s with values</i>. <code>replaceFirst</code> only replaces the first accurence of a String. User replace if you want to replace all."}],"answers":[{"tags":[],"owner":{"account_id":22540249,"reputation":911,"user_id":16730900,"display_name":"jh316"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671688723,"creation_date":1671688723,"answer_id":74884649,"question_id":74884591,"body_markdown":"String.replaceFirst doesn&#39;t replace the substrings in the `name` String; it returns a new `String` with the modifications. See here: https://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replaceFirst(java.lang.String,%20java.lang.String)\r\n","title":"Java - Replace char using Lambda","body":"<p>String.replaceFirst doesn't replace the substrings in the <code>name</code> String; it returns a new <code>String</code> with the modifications. See here: <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replaceFirst(java.lang.String,%20java.lang.String)\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replaceFirst(java.lang.String,%20java.lang.String)</a></p>\n"},{"tags":[],"owner":{"account_id":27123034,"reputation":1993,"user_id":20666497,"display_name":"Albina"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671690220,"creation_date":1671689327,"answer_id":74884713,"question_id":74884591,"body_markdown":"If you want to replace the first zero with `Value1`, the second one with `Value2`, etc. it won&#39;t work. \r\n\r\nThere is no guarantee that elements will be in an original order during iteration. It&#39;s all about **hashing** as you are using a `HashMap`.\r\n\r\n&gt; ... This class makes no guarantees as to the order of the map; in particular, it does not guarantee that the order will remain constant over time.\r\n\r\nsee the [docs][1].\r\n\r\n*It seems you don&#39;t need this data structure for the task*.\r\n\r\nInstead, you can use an `ArrayList`. All elements in it will be ordered while iteration (as you have put them).\r\n\r\n```\r\nList&lt;String&gt; valuesForReplacement = new ArrayList&lt;&gt;();\r\nvaluesForReplacement.add(&quot;Value1&quot;);\r\nvaluesForReplacement.add(&quot;Value2&quot;);\r\nvaluesForReplacement.add(&quot;Value3&quot;);\r\nvaluesForReplacement.add(&quot;Value4&quot;);\r\n\r\nfor (String value : valuesForReplacement) {\r\n   name = name.replaceFirst(&quot;0&quot;, value);\r\n}\r\n```\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/HashMap.html","title":"Java - Replace char using Lambda","body":"<p>If you want to replace the first zero with <code>Value1</code>, the second one with <code>Value2</code>, etc. it won't work.</p>\n<p>There is no guarantee that elements will be in an original order during iteration. It's all about <strong>hashing</strong> as you are using a <code>HashMap</code>.</p>\n<blockquote>\n<p>... This class makes no guarantees as to the order of the map; in particular, it does not guarantee that the order will remain constant over time.</p>\n</blockquote>\n<p>see the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/HashMap.html\" rel=\"nofollow noreferrer\">docs</a>.</p>\n<p><em>It seems you don't need this data structure for the task</em>.</p>\n<p>Instead, you can use an <code>ArrayList</code>. All elements in it will be ordered while iteration (as you have put them).</p>\n<pre><code>List&lt;String&gt; valuesForReplacement = new ArrayList&lt;&gt;();\nvaluesForReplacement.add(&quot;Value1&quot;);\nvaluesForReplacement.add(&quot;Value2&quot;);\nvaluesForReplacement.add(&quot;Value3&quot;);\nvaluesForReplacement.add(&quot;Value4&quot;);\n\nfor (String value : valuesForReplacement) {\n   name = name.replaceFirst(&quot;0&quot;, value);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12555337,"reputation":136,"user_id":9135271,"display_name":"AleksanderSzporka"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671693581,"creation_date":1671689969,"answer_id":74884793,"question_id":74884591,"body_markdown":"\r\nPlease consider this code:\r\n\r\n```\r\npublic static void main(String[] args) {\r\n        AtomicReference&lt;String&gt; name = new AtomicReference&lt;&gt;(&quot;(call SP_PKG.GETINFOTYPE(0, 0, 0, 0))&quot;);\r\n        Map&lt;String, String&gt; params = new TreeMap&lt;&gt;();\r\n        params.put(&quot;Param1&quot;, &quot;Value1&quot;);\r\n        params.put(&quot;Param2&quot;, &quot;Value2&quot;);\r\n        params.put(&quot;Param3&quot;, &quot;Value3&quot;);\r\n        params.forEach((key, value) -&gt; name.set(name.get().replaceFirst(&quot;0&quot;, value)));\r\n        System.out.println(name.get());\r\n    }\r\n```\r\n\r\noutput:\r\n```\r\n(call SP_PKG.GETINFOTYPE(Value1, Value2, Value3, 0))\r\n```\r\n\r\n\r\n----------\r\n\r\n\r\n -  `HashMap` does not provide ordering and in this case is essential. So I have chosen to use `TreeMap` instead. As map keys are not used you can also use any implementation of `List` interface\r\n\r\n\r\nYou wrote:\r\n&gt; . Is there a way to do this using lambdas instead of writing traditional code that loops through each entry and replaces.\r\n\r\n &gt; (key, value) -&gt; name.set(name.get().replaceFirst(&quot;0&quot;, value))\r\n\r\n- This is use of lambda expression. We are providing here implementation for `BiConsumer&lt;? super K, ? super V&gt; action`. Probably you wanted to use `Steam API`, but there are no need for it. In this case as we are modifying single object.\r\n\r\n \r\n- Sample code that you have provided doesn&#39;t work because `replaceFirst` method returns modified `String` and in your code there is no `name` variable reference reassignment.\r\n\r\n- I have also used `AtomicReference&lt;String&gt;`, instead of String for variable `name`, because variables that are modified inside lamdas have to be effectively final (see [JLS &#167;15.27.2][1]) \r\n&gt; The restriction to effectively final variables prohibits access to dynamically-changing local variables, whose capture would likely introduce concurrency problems.\r\n\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/specs/jls/se10/html/jls-15.html#jls-15.27.2","title":"Java - Replace char using Lambda","body":"<p>Please consider this code:</p>\n<pre><code>public static void main(String[] args) {\n        AtomicReference&lt;String&gt; name = new AtomicReference&lt;&gt;(&quot;(call SP_PKG.GETINFOTYPE(0, 0, 0, 0))&quot;);\n        Map&lt;String, String&gt; params = new TreeMap&lt;&gt;();\n        params.put(&quot;Param1&quot;, &quot;Value1&quot;);\n        params.put(&quot;Param2&quot;, &quot;Value2&quot;);\n        params.put(&quot;Param3&quot;, &quot;Value3&quot;);\n        params.forEach((key, value) -&gt; name.set(name.get().replaceFirst(&quot;0&quot;, value)));\n        System.out.println(name.get());\n    }\n</code></pre>\n<p>output:</p>\n<pre><code>(call SP_PKG.GETINFOTYPE(Value1, Value2, Value3, 0))\n</code></pre>\n<hr />\n<ul>\n<li><code>HashMap</code> does not provide ordering and in this case is essential. So I have chosen to use <code>TreeMap</code> instead. As map keys are not used you can also use any implementation of <code>List</code> interface</li>\n</ul>\n<p>You wrote:</p>\n<blockquote>\n<p>. Is there a way to do this using lambdas instead of writing traditional code that loops through each entry and replaces.</p>\n</blockquote>\n<blockquote>\n<p>(key, value) -&gt; name.set(name.get().replaceFirst(&quot;0&quot;, value))</p>\n</blockquote>\n<ul>\n<li><p>This is use of lambda expression. We are providing here implementation for <code>BiConsumer&lt;? super K, ? super V&gt; action</code>. Probably you wanted to use <code>Steam API</code>, but there are no need for it. In this case as we are modifying single object.</p>\n</li>\n<li><p>Sample code that you have provided doesn't work because <code>replaceFirst</code> method returns modified <code>String</code> and in your code there is no <code>name</code> variable reference reassignment.</p>\n</li>\n<li><p>I have also used <code>AtomicReference&lt;String&gt;</code>, instead of String for variable <code>name</code>, because variables that are modified inside lamdas have to be effectively final (see <a href=\"https://docs.oracle.com/javase/specs/jls/se10/html/jls-15.html#jls-15.27.2\" rel=\"nofollow noreferrer\">JLS 15.27.2</a>)</p>\n</li>\n</ul>\n<blockquote>\n<p>The restriction to effectively final variables prohibits access to dynamically-changing local variables, whose capture would likely introduce concurrency problems.</p>\n</blockquote>\n"},{"comments":[{"owner":{"account_id":12464937,"reputation":77,"user_id":9075285,"display_name":"RadhikaRao"},"score":0,"creation_date":1671725103,"post_id":74885200,"comment_id":132164059,"body_markdown":"Thank you gajju_15. This worked for me. Explanation is also very good.","body":"Thank you gajju_15. This worked for me. Explanation is also very good."}],"tags":[],"owner":{"account_id":5479796,"reputation":527,"user_id":4356634,"display_name":"gajju_15"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1671708953,"creation_date":1671693389,"answer_id":74885200,"question_id":74884591,"body_markdown":"- first of all you are replacing and not assigning,to get correct replaced string you need to assign to variable after replacement for ex:  \r\n     \r\n\r\n&gt; name = name.replaceFirst(&quot;0&quot;, v.toString());\r\n\r\n- and you want to do it inside foreach with lamda expression which will not work in your case,\r\nto get this working your code required below changes to achieve desired result :\r\n- Order will not be guaranteed in your case, if you want to do it in order, you can use **LinkedHashMap**.\r\n\r\n \r\n\r\n       public static void main(String[] args) {\r\n            final String[] name = {&quot;(call SP_PKG.GETINFOTYPE(0, 0, 0, 0))&quot;};\r\n            Map&lt;String, String&gt; params = new HashMap&lt;String, String&gt;();\r\n            params.put(&quot;Param1&quot;, &quot;Value1&quot;);\r\n            params.put(&quot;Param2&quot;, &quot;Value2&quot;);\r\n            params.put(&quot;Param3&quot;, &quot;Value3&quot;);\r\n            System.out.println(&quot;Hello&quot;);\r\n            params.forEach((k, v) -&gt; {\r\n                name[0] = name[0].replaceFirst(&quot;0&quot;, v.toString());\r\n            });\r\n            System.out.println(name[0]);\r\n    \r\n    \r\n        }\r\n\r\n\r\n- because your code will require multiple replacements to get desired result which you can not use same variable to assign multiple times inside lamda expression, because lamda statement required  an **effectively final variable** to be used else it will give you error\r\n- so what you can do you can make the **name** as final array and use inside lamba statementas i mentioned in code example above.","title":"Java - Replace char using Lambda","body":"<ul>\n<li>first of all you are replacing and not assigning,to get correct replaced string you need to assign to variable after replacement for ex:</li>\n</ul>\n<blockquote>\n<p>name = name.replaceFirst(&quot;0&quot;, v.toString());</p>\n</blockquote>\n<ul>\n<li><p>and you want to do it inside foreach with lamda expression which will not work in your case,\nto get this working your code required below changes to achieve desired result :</p>\n</li>\n<li><p>Order will not be guaranteed in your case, if you want to do it in order, you can use <strong>LinkedHashMap</strong>.</p>\n<pre><code> public static void main(String[] args) {\n      final String[] name = {&quot;(call SP_PKG.GETINFOTYPE(0, 0, 0, 0))&quot;};\n      Map&lt;String, String&gt; params = new HashMap&lt;String, String&gt;();\n      params.put(&quot;Param1&quot;, &quot;Value1&quot;);\n      params.put(&quot;Param2&quot;, &quot;Value2&quot;);\n      params.put(&quot;Param3&quot;, &quot;Value3&quot;);\n      System.out.println(&quot;Hello&quot;);\n      params.forEach((k, v) -&gt; {\n          name[0] = name[0].replaceFirst(&quot;0&quot;, v.toString());\n      });\n      System.out.println(name[0]);\n\n\n  }\n</code></pre>\n</li>\n<li><p>because your code will require multiple replacements to get desired result which you can not use same variable to assign multiple times inside lamda expression, because lamda statement required  an <strong>effectively final variable</strong> to be used else it will give you error</p>\n</li>\n<li><p>so what you can do you can make the <strong>name</strong> as final array and use inside lamba statementas i mentioned in code example above.</p>\n</li>\n</ul>\n"}],"owner":{"account_id":12464937,"reputation":77,"user_id":9075285,"display_name":"RadhikaRao"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":91,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":4,"score":-1,"last_activity_date":1671708953,"creation_date":1671688254,"question_id":74884591,"body_markdown":"In this code, I am trying to replace all 0s with values from the Map. But it doesn&#39;t work. Is there a way to do this using lambdas instead of writing traditional code that loops through each entry and replaces.\r\n\r\n    import java.util.Map;\r\n    import java.util.HashMap;\r\n    \r\n    class Main {\r\n      public static void main(String[] args) {\r\n        String name = &quot;(call SP_PKG.GETINFOTYPE(0, 0, 0, 0))&quot;;\r\n        Map&lt;String, String&gt; params = new HashMap&lt;String, String&gt;();\r\n        params.put(&quot;Param1&quot;, &quot;Value1&quot;);\r\n        params.put(&quot;Param2&quot;, &quot;Value2&quot;);\r\n        params.put(&quot;Param3&quot;, &quot;Value3&quot;);\r\n        System.out.println(&quot;Hello&quot;);\r\n        params.forEach((k,v) -&gt; name.replaceFirst(&quot;0&quot;, v.toString())); \r\n        System.out.println(name);\r\n      }\r\n    }","title":"Java - Replace char using Lambda","body":"<p>In this code, I am trying to replace all 0s with values from the Map. But it doesn't work. Is there a way to do this using lambdas instead of writing traditional code that loops through each entry and replaces.</p>\n<pre><code>import java.util.Map;\nimport java.util.HashMap;\n\nclass Main {\n  public static void main(String[] args) {\n    String name = &quot;(call SP_PKG.GETINFOTYPE(0, 0, 0, 0))&quot;;\n    Map&lt;String, String&gt; params = new HashMap&lt;String, String&gt;();\n    params.put(&quot;Param1&quot;, &quot;Value1&quot;);\n    params.put(&quot;Param2&quot;, &quot;Value2&quot;);\n    params.put(&quot;Param3&quot;, &quot;Value3&quot;);\n    System.out.println(&quot;Hello&quot;);\n    params.forEach((k,v) -&gt; name.replaceFirst(&quot;0&quot;, v.toString())); \n    System.out.println(name);\n  }\n}\n</code></pre>\n"},{"tags":["java","ios","pdf","itext"],"comments":[{"owner":{"account_id":1707578,"reputation":868,"user_id":1566339,"display_name":"Andr&#233; Lemos"},"score":1,"creation_date":1671703806,"post_id":74884894,"comment_id":132157044,"body_markdown":"can you attach the PDF file? Also, 5.5.6 is a version from 2015, so I&#39;d definitely recommend moving to 5.5.13.3 (there shouldn&#39;t be a lot of API changes), or if you&#39;re starting a project from scratch, just go for iText 7.2.4 which is the newest version.","body":"can you attach the PDF file? Also, 5.5.6 is a version from 2015, so I&#39;d definitely recommend moving to 5.5.13.3 (there shouldn&#39;t be a lot of API changes), or if you&#39;re starting a project from scratch, just go for iText 7.2.4 which is the newest version."},{"owner":{"account_id":180181,"reputation":76390,"user_id":413337,"accept_rate":64,"display_name":"Codo"},"score":0,"creation_date":1671724924,"post_id":74884894,"comment_id":132163995,"body_markdown":"&quot;while sending it&quot;: How do you &quot;send&quot; the PDF? It&#39;s possibly the source of the problem. Show your code and provide more information (incl. the problematic). At the moment, there isn&#39;t sufficient information to answer your question.","body":"&quot;while sending it&quot;: How do you &quot;send&quot; the PDF? It&#39;s possibly the source of the problem. Show your code and provide more information (incl. the problematic). At the moment, there isn&#39;t sufficient information to answer your question."}],"owner":{"account_id":27323952,"reputation":1,"user_id":20837207,"display_name":"viral"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671708830,"creation_date":1671690786,"question_id":74884894,"body_markdown":"**N** replaced by **!** on ios using `itext pdf` in java while sending it on android and desktops it works fine but when sending the pdf on ios n gets replaced.\r\n\r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;com.itextpdf&lt;/groupId&gt;\r\n    &lt;artifactId&gt;itextpdf&lt;/artifactId&gt;\r\n    &lt;version&gt;5.5.6&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nUsing this version of `itextpdf`.\r\n\r\nIs it due to the older version..?\r\n\r\nCannot use `PdfReader` and `PdfStammper` because I am not editing existing pdf I am creating a new pdf.","title":"N replaced by ! on ios Using itext pdf in java","body":"<p><strong>N</strong> replaced by <strong>!</strong> on ios using <code>itext pdf</code> in java while sending it on android and desktops it works fine but when sending the pdf on ios n gets replaced.</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.itextpdf&lt;/groupId&gt;\n    &lt;artifactId&gt;itextpdf&lt;/artifactId&gt;\n    &lt;version&gt;5.5.6&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Using this version of <code>itextpdf</code>.</p>\n<p>Is it due to the older version..?</p>\n<p>Cannot use <code>PdfReader</code> and <code>PdfStammper</code> because I am not editing existing pdf I am creating a new pdf.</p>\n"},{"tags":["java","gradle","intellij-idea","saxon","java-module"],"comments":[{"owner":{"account_id":529122,"reputation":158120,"user_id":415448,"accept_rate":33,"display_name":"Michael Kay"},"score":0,"creation_date":1671621705,"post_id":74851117,"comment_id":132137096,"body_markdown":"I&#39;m sorry, we haven&#39;t done any work with Java modules at Saxonica, so we can&#39;t offer any useful advice.","body":"I&#39;m sorry, we haven&#39;t done any work with Java modules at Saxonica, so we can&#39;t offer any useful advice."}],"answers":[{"tags":[],"owner":{"account_id":12127488,"reputation":703,"user_id":8855688,"accept_rate":43,"display_name":"neblaz"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671708706,"creation_date":1671705934,"answer_id":74887387,"question_id":74851117,"body_markdown":"I found here https://stackoverflow.com/questions/58708213/gradle-build-add-module-path a snippet which might solved it, but maybe only partially, so not sure if this answer can be marked as the solution.\r\n\r\nI added to the project `build.gradle` \r\n\r\n    subprojects {\r\n        apply plugin: &#39;java&#39;\r\n    \r\n        sourceCompatibility = 19\r\n        targetCompatibility = 19\r\n    \r\n        compileJava {\r\n            doFirst {\r\n                options.compilerArgs += [\r\n                        &#39;--module-path&#39;, classpath.asPath,\r\n                        &#39;-Xmaxerrs&#39;, 1000\r\n                ]\r\n                classpath = files()\r\n            }\r\n        }\r\n    }\r\n\r\nNow trying to build it (with `Gradle 7.6` and `OpenJDK 19`), it doesn&#39;t complain to not finding modules, so far at least, but now I have the next problem which I desribed here https://stackoverflow.com/questions/74887317/java-modules-gradle-external-dependencies-modules-reading-from-more-then-one","title":"Java Modules, Gradle project - Problems with external libraries","body":"<p>I found here <a href=\"https://stackoverflow.com/questions/58708213/gradle-build-add-module-path\">Gradle build - add module path</a> a snippet which might solved it, but maybe only partially, so not sure if this answer can be marked as the solution.</p>\n<p>I added to the project <code>build.gradle</code></p>\n<pre><code>subprojects {\n    apply plugin: 'java'\n\n    sourceCompatibility = 19\n    targetCompatibility = 19\n\n    compileJava {\n        doFirst {\n            options.compilerArgs += [\n                    '--module-path', classpath.asPath,\n                    '-Xmaxerrs', 1000\n            ]\n            classpath = files()\n        }\n    }\n}\n</code></pre>\n<p>Now trying to build it (with <code>Gradle 7.6</code> and <code>OpenJDK 19</code>), it doesn't complain to not finding modules, so far at least, but now I have the next problem which I desribed here <a href=\"https://stackoverflow.com/questions/74887317/java-modules-gradle-external-dependencies-modules-reading-from-more-then-one\">Java Modules, Gradle, external dependencies - Modules reading from more then one</a></p>\n"}],"owner":{"account_id":12127488,"reputation":703,"user_id":8855688,"accept_rate":43,"display_name":"neblaz"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":754,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1671708706,"creation_date":1671455999,"question_id":74851117,"body_markdown":"I have a multi module project in `IntelliJ`, a java library project, using `Gradle` with quite old versions of libraries \r\nI must say, and now switching to `Java 11` (using right now OpenJDK 11.0.2 from https://jdk.java.net/archive/).\r\n\r\nI want to modularize that library project, adding to all modules a `module-info.java`.\r\nI keep getting an error in one of the modules with one of the dependencies, `Saxon-HE`.\r\n\r\nI isolated that module in a separate project (using `Gradle 7.6`), and modified the `build.gradle` dependencies step by step as `IntelliJ` discovered \r\nimport errors, while using the latest versions of the dependencies.\r\n\r\nThe `build.gradle` of the project looks like this:\r\n\r\n    plugins {\r\n        id &#39;java&#39;\r\n    }\r\n    \r\n    group &#39;org.example&#39;\r\n    version &#39;1.0-SNAPSHOT&#39;\r\n    \r\n    repositories {\r\n        mavenCentral()\r\n    }\r\n    \r\n    dependencies {\r\n        testImplementation &#39;org.junit.jupiter:junit-jupiter-api:5.8.1&#39;\r\n        testRuntimeOnly &#39;org.junit.jupiter:junit-jupiter-engine:5.8.1&#39;\r\n    }\r\n    \r\n    test {\r\n        useJUnitPlatform()\r\n    }\r\n\r\n\r\nThe `build.gradle` of the module looks like this up to the point with the error with `Saxon-HE`.\r\n\r\n    plugins {\r\n        id &#39;java&#39;\r\n    }\r\n    \r\n    group &#39;org.example&#39;\r\n    version &#39;1.0-SNAPSHOT&#39;\r\n    \r\n    repositories {\r\n        mavenCentral()\r\n    }\r\n    \r\n    dependencies {\r\n        implementation group: &#39;javax.xml.bind&#39;, name: &#39;jaxb-api&#39;, version: &#39;2.3.1&#39;\r\n        implementation group: &#39;org.jdom&#39;, name: &#39;jdom2&#39;, version: &#39;2.0.6.1&#39;\r\n        implementation group: &#39;org.apache.commons&#39;, name: &#39;commons-lang3&#39;, version: &#39;3.12.0&#39;\r\n        implementation group: &#39;commons-io&#39;, name: &#39;commons-io&#39;, version: &#39;2.11.0&#39;\r\n        implementation group: &#39;org.slf4j&#39;, name: &#39;slf4j-api&#39;, version: &#39;2.0.6&#39;\r\n        implementation group: &#39;com.squareup.okhttp3&#39;, name: &#39;okhttp&#39;, version: &#39;4.10.0&#39;\r\n    \r\n        testImplementation &#39;org.junit.jupiter:junit-jupiter-api:5.8.1&#39;\r\n        testRuntimeOnly &#39;org.junit.jupiter:junit-jupiter-engine:5.8.1&#39;\r\n    }\r\n    \r\n    test {\r\n        useJUnitPlatform()\r\n    }\r\n\r\nThe `module-info.java` looks like this, I used the recommendations of `IntelliJ` so it added automatically the `requires` statements:\r\n\r\n    module mymodule1 {\r\n        requires org.apache.commons.lang3;\r\n        requires org.apache.commons.io;\r\n        requires org.slf4j;\r\n        requires okhttp3;\r\n        requires okio;\r\n        requires java.xml;\r\n        requires org.jdom2;\r\n    }\r\n\r\nThe next import error `IntelliJ` discovers while building it results because one of my classes has the import statement: \r\n\r\n    import net.sf.saxon.xpath.XPathFactoryImpl;\r\n\r\nBuilding the project results in the error:\r\n\r\n    error: package net.sf.saxon.xpath does not exist\r\n    import net.sf.saxon.xpath.XPathFactoryImpl;\r\n\r\nLooking at https://mvnrepository.com/artifact/net.sf.saxon/Saxon-HE/11.4 I added to `build.gradle` of the module: \r\n\r\n    implementation group: &#39;net.sf.saxon&#39;, name: &#39;Saxon-HE&#39;, version: &#39;11.4&#39;\r\n\r\nIn `IntelliJ` I can see in the `Project` navigator view, in `External Libraries` that there is \r\n\r\n    Gradle: net.sf.saxon.Saxon-HE:11.4 \r\n    Saxon-HE-11.4.jar\r\n\r\n`IntelliJ` recommends \r\n \r\n\r\n    Add &#39;requires Saxon.HE&#39; directive to module-info.java\r\n\r\nThe `module-info.java` looks now like this:\r\n\r\n    module mymodule1 {\r\n        requires org.apache.commons.lang3;\r\n        requires org.apache.commons.io;\r\n        requires org.slf4j;\r\n        requires okhttp3;\r\n        requires okio;\r\n        requires java.xml;\r\n        requires org.jdom2;\r\n        requires Saxon.HE;\r\n    }\r\n\r\nAfter that the error in the particular class using that import statement is gone, `IntelliJ` doesn&#39;t complain.\r\n\r\nBut when then building the project I get the error \r\n\r\n    C:\\Users\\ME\\PROJECTS\\myproject\\mymodule1\\src\\main\\java\\module-info.java:9: error: module not found: Saxon.HE\r\n            requires Saxon.HE;\r\n                          ^\r\n\r\nRemoving the `requires Saxon.HE` and building the project results in the error:\r\n\r\n    error: package net.sf.saxon.xpath is not visible\r\n    import net.sf.saxon.xpath.XPathFactoryImpl;\r\n                       ^\r\n      (package net.sf.saxon.xpath is declared in the unnamed module, but module net.sf.saxon.xpath does not read it)\r\n\r\nI find this error message weired, because it says `but module net.sf.saxon.xpath does not read it`, I would rather expect `but module mymodule1 does not read it.`\r\n\r\nI don&#39;t know what&#39;s going wrong, other external dependencies are not problematic but `Saxon-HE` is.\r\n","title":"Java Modules, Gradle project - Problems with external libraries","body":"<p>I have a multi module project in <code>IntelliJ</code>, a java library project, using <code>Gradle</code> with quite old versions of libraries\nI must say, and now switching to <code>Java 11</code> (using right now OpenJDK 11.0.2 from <a href=\"https://jdk.java.net/archive/\" rel=\"nofollow noreferrer\">https://jdk.java.net/archive/</a>).</p>\n<p>I want to modularize that library project, adding to all modules a <code>module-info.java</code>.\nI keep getting an error in one of the modules with one of the dependencies, <code>Saxon-HE</code>.</p>\n<p>I isolated that module in a separate project (using <code>Gradle 7.6</code>), and modified the <code>build.gradle</code> dependencies step by step as <code>IntelliJ</code> discovered\nimport errors, while using the latest versions of the dependencies.</p>\n<p>The <code>build.gradle</code> of the project looks like this:</p>\n<pre><code>plugins {\n    id 'java'\n}\n\ngroup 'org.example'\nversion '1.0-SNAPSHOT'\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    testImplementation 'org.junit.jupiter:junit-jupiter-api:5.8.1'\n    testRuntimeOnly 'org.junit.jupiter:junit-jupiter-engine:5.8.1'\n}\n\ntest {\n    useJUnitPlatform()\n}\n</code></pre>\n<p>The <code>build.gradle</code> of the module looks like this up to the point with the error with <code>Saxon-HE</code>.</p>\n<pre><code>plugins {\n    id 'java'\n}\n\ngroup 'org.example'\nversion '1.0-SNAPSHOT'\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    implementation group: 'javax.xml.bind', name: 'jaxb-api', version: '2.3.1'\n    implementation group: 'org.jdom', name: 'jdom2', version: '2.0.6.1'\n    implementation group: 'org.apache.commons', name: 'commons-lang3', version: '3.12.0'\n    implementation group: 'commons-io', name: 'commons-io', version: '2.11.0'\n    implementation group: 'org.slf4j', name: 'slf4j-api', version: '2.0.6'\n    implementation group: 'com.squareup.okhttp3', name: 'okhttp', version: '4.10.0'\n\n    testImplementation 'org.junit.jupiter:junit-jupiter-api:5.8.1'\n    testRuntimeOnly 'org.junit.jupiter:junit-jupiter-engine:5.8.1'\n}\n\ntest {\n    useJUnitPlatform()\n}\n</code></pre>\n<p>The <code>module-info.java</code> looks like this, I used the recommendations of <code>IntelliJ</code> so it added automatically the <code>requires</code> statements:</p>\n<pre><code>module mymodule1 {\n    requires org.apache.commons.lang3;\n    requires org.apache.commons.io;\n    requires org.slf4j;\n    requires okhttp3;\n    requires okio;\n    requires java.xml;\n    requires org.jdom2;\n}\n</code></pre>\n<p>The next import error <code>IntelliJ</code> discovers while building it results because one of my classes has the import statement:</p>\n<pre><code>import net.sf.saxon.xpath.XPathFactoryImpl;\n</code></pre>\n<p>Building the project results in the error:</p>\n<pre><code>error: package net.sf.saxon.xpath does not exist\nimport net.sf.saxon.xpath.XPathFactoryImpl;\n</code></pre>\n<p>Looking at <a href=\"https://mvnrepository.com/artifact/net.sf.saxon/Saxon-HE/11.4\" rel=\"nofollow noreferrer\">https://mvnrepository.com/artifact/net.sf.saxon/Saxon-HE/11.4</a> I added to <code>build.gradle</code> of the module:</p>\n<pre><code>implementation group: 'net.sf.saxon', name: 'Saxon-HE', version: '11.4'\n</code></pre>\n<p>In <code>IntelliJ</code> I can see in the <code>Project</code> navigator view, in <code>External Libraries</code> that there is</p>\n<pre><code>Gradle: net.sf.saxon.Saxon-HE:11.4 \nSaxon-HE-11.4.jar\n</code></pre>\n<p><code>IntelliJ</code> recommends</p>\n<pre><code>Add 'requires Saxon.HE' directive to module-info.java\n</code></pre>\n<p>The <code>module-info.java</code> looks now like this:</p>\n<pre><code>module mymodule1 {\n    requires org.apache.commons.lang3;\n    requires org.apache.commons.io;\n    requires org.slf4j;\n    requires okhttp3;\n    requires okio;\n    requires java.xml;\n    requires org.jdom2;\n    requires Saxon.HE;\n}\n</code></pre>\n<p>After that the error in the particular class using that import statement is gone, <code>IntelliJ</code> doesn't complain.</p>\n<p>But when then building the project I get the error</p>\n<pre><code>C:\\Users\\ME\\PROJECTS\\myproject\\mymodule1\\src\\main\\java\\module-info.java:9: error: module not found: Saxon.HE\n        requires Saxon.HE;\n                      ^\n</code></pre>\n<p>Removing the <code>requires Saxon.HE</code> and building the project results in the error:</p>\n<pre><code>error: package net.sf.saxon.xpath is not visible\nimport net.sf.saxon.xpath.XPathFactoryImpl;\n                   ^\n  (package net.sf.saxon.xpath is declared in the unnamed module, but module net.sf.saxon.xpath does not read it)\n</code></pre>\n<p>I find this error message weired, because it says <code>but module net.sf.saxon.xpath does not read it</code>, I would rather expect <code>but module mymodule1 does not read it.</code></p>\n<p>I don't know what's going wrong, other external dependencies are not problematic but <code>Saxon-HE</code> is.</p>\n"},{"tags":["java","recursion","completable-future"],"comments":[{"owner":{"account_id":249169,"reputation":19388,"user_id":525036,"accept_rate":25,"display_name":"Didier L"},"score":0,"creation_date":1671705713,"post_id":74886967,"comment_id":132157620,"body_markdown":"If `runAffinityFilters()` returns `CompletableFuture&lt;Void&gt;`, then `ctx` is of type `Void`, so this code would not compile. Could you provide a [mre]? (side note, `CompletableFuture.completedFuture(context).thenCompose(this::getNextCandidateSet)` is a complicated way to do `getNextCandidateSet(context)`)","body":"If <code>runAffinityFilters()</code> returns <code>CompletableFuture&lt;Void&gt;</code>, then <code>ctx</code> is of type <code>Void</code>, so this code would not compile. Could you provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>? (side note, <code>CompletableFuture.completedFuture(context).thenCompose(this:&zwnj;&#8203;:getNextCandidateSet&zwnj;&#8203;)</code> is a complicated way to do <code>getNextCandidateSet(context)</code>)"},{"owner":{"account_id":2362508,"reputation":1030,"user_id":2068897,"accept_rate":81,"display_name":"mdzh"},"score":0,"creation_date":1671708698,"post_id":74886967,"comment_id":132158598,"body_markdown":"I updated the question with a full working although very simplified and stripped example","body":"I updated the question with a full working although very simplified and stripped example"},{"owner":{"account_id":249169,"reputation":19388,"user_id":525036,"accept_rate":25,"display_name":"Didier L"},"score":0,"creation_date":1671711429,"post_id":74886967,"comment_id":132159370,"body_markdown":"Good, however there is nothing asynchronous in the code you posted, so everything is effectively running recursively on the main thread, and `CompletableFuture` is useless. If I make `runAffinityFilters()` use `thenComposeAsync()` instead of `thenCompose()`, it succeeds.","body":"Good, however there is nothing asynchronous in the code you posted, so everything is effectively running recursively on the main thread, and <code>CompletableFuture</code> is useless. If I make <code>runAffinityFilters()</code> use <code>thenComposeAsync()</code> instead of <code>thenCompose()</code>, it succeeds."},{"owner":{"account_id":2362508,"reputation":1030,"user_id":2068897,"accept_rate":81,"display_name":"mdzh"},"score":0,"creation_date":1671714147,"post_id":74886967,"comment_id":132160179,"body_markdown":"Well, obviously my &#39;real&#39; implementation of runAffinityFilters() is not simply returning CompletableFuture.completedFuture(success)... I pasted the code like that for simplicity - as I said, it&#39;s doing DB calls in reality. You don&#39;t expect me to write down a working example with a DB stack, do you?","body":"Well, obviously my &#39;real&#39; implementation of runAffinityFilters() is not simply returning CompletableFuture.completedFuture(success)... I pasted the code like that for simplicity - as I said, it&#39;s doing DB calls in reality. You don&#39;t expect me to write down a working example with a DB stack, do you?"},{"owner":{"account_id":249169,"reputation":19388,"user_id":525036,"accept_rate":25,"display_name":"Didier L"},"score":1,"creation_date":1671715352,"post_id":74886967,"comment_id":132160557,"body_markdown":"I indeed dont expect a DB call (it wouldnt be a minimal example), I expect something that properly represents it. Here its not the case, so it does not really help understanding your problem. If your DB call was truly async, you wouldnt have an issue, as indicated in my previous comment.","body":"I indeed dont expect a DB call (it wouldnt be a minimal example), I expect something that properly represents it. Here its not the case, so it does not really help understanding your problem. If your DB call was truly async, you wouldnt have an issue, as indicated in my previous comment."},{"owner":{"account_id":2362508,"reputation":1030,"user_id":2068897,"accept_rate":81,"display_name":"mdzh"},"score":0,"creation_date":1671718250,"post_id":74886967,"comment_id":132161502,"body_markdown":"I see... I didn&#39;t know that I can force the execution of runAffinityFilters() to be on a different thread by using thenComposeAsync(). That&#39;s very usable and exactly what I need!\nThank you!\n\nThe thing with runAffinityFilters() is that it may be sync or async - depending on conditions. I guess in my lab env it was mostly doing sync calls and hence the StackOverflowError","body":"I see... I didn&#39;t know that I can force the execution of runAffinityFilters() to be on a different thread by using thenComposeAsync(). That&#39;s very usable and exactly what I need! Thank you!  The thing with runAffinityFilters() is that it may be sync or async - depending on conditions. I guess in my lab env it was mostly doing sync calls and hence the StackOverflowError"}],"owner":{"account_id":2362508,"reputation":1030,"user_id":2068897,"accept_rate":81,"display_name":"mdzh"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":184,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671708672,"creation_date":1671703870,"question_id":74886967,"body_markdown":"So I have this piece of Java code written with recursion. \r\n    \r\n    package test;\r\n\r\n    import java.util.ArrayList;\r\n    import java.util.Iterator;\r\n    import java.util.List;\r\n    import java.util.concurrent.CompletableFuture;\r\n    import java.util.stream.IntStream;\r\n\r\n    public class Main {\r\n        public static void main(String[] args) {\r\n\r\n            List&lt;AllocationCandidateSet&gt; candidates = new ArrayList&lt;&gt;();\r\n            IntStream.range(0, 5000).forEach(__ -&gt; candidates.add(new AllocationCandidateSet()));\r\n            AllocationContext ctx = new AllocationContext();\r\n            ctx.currentPlacementZoneAllocationCandidatesProvider = candidates.iterator();\r\n\r\n            Main main = new Main();\r\n            main.attemptAllocation(ctx).join();\r\n\r\n            System.out.println(ctx.firstSuccessfulCandidateSet);\r\n            System.out.println(ctx.iteration);\r\n    }\r\n\r\n    private CompletableFuture&lt;AllocationContext&gt; attemptAllocation(AllocationContext context) {\r\n        return CompletableFuture.completedFuture(context)\r\n                .thenCompose(this::getNextCandidateSet)\r\n                .thenCompose(this::runAffinityFilters)\r\n                .thenCompose(ctx -&gt; {\r\n                    if (ctx.firstSuccessfulCandidateSet == null\r\n                            &amp;&amp; context.currentPlacementZoneAllocationCandidatesProvider.hasNext()) {\r\n                        return attemptAllocation(ctx);\r\n                    } else {\r\n                        return CompletableFuture.completedFuture(ctx);\r\n                    }\r\n                });\r\n    }\r\n\r\n    private CompletableFuture&lt;AllocationContext&gt; getNextCandidateSet(AllocationContext ctx) {\r\n        // For the sake of simplicity, I omitted most of the logic inside this method.\r\n        ctx.currentCandidateSet = ctx.currentPlacementZoneAllocationCandidatesProvider.next();\r\n        ctx.iteration++;\r\n        return CompletableFuture.completedFuture(ctx);\r\n    }\r\n\r\n    private CompletableFuture&lt;AllocationContext&gt; runAffinityFilters(AllocationContext ctx) {\r\n        // This is a long running async operation doing DB calls\r\n        return CompletableFuture.completedFuture(ctx)\r\n                .thenCompose(context -&gt; {\r\n                    // Do some DB calls and run business logic and evaluate if the current AllocationCandidateSet is successful\r\n                    boolean success = context.iteration == 1876;\r\n                    return CompletableFuture.completedFuture(success);\r\n                })\r\n                .thenAccept(success -&gt; {\r\n                    if (success) {\r\n                        ctx.firstSuccessfulCandidateSet = ctx.currentCandidateSet;\r\n                    }\r\n                })\r\n                .thenApply(__ -&gt; ctx);\r\n    }\r\n\r\n    public static class AllocationContext {\r\n        Iterator&lt;AllocationCandidateSet&gt; currentPlacementZoneAllocationCandidatesProvider;\r\n        AllocationCandidateSet currentCandidateSet;\r\n\r\n        AllocationCandidateSet firstSuccessfulCandidateSet;\r\n\r\n        int iteration = 0;\r\n    }\r\n\r\n    public static class AllocationCandidateSet {\r\n\r\n    }\r\n}\r\n\r\nResults are accumulated inside the AllocationContext which is a thread-safe object holder that contains Iterator - context.currentPlacementZoneAllocationCandidatesProvider.\r\nThe iterator is a normal one - having `next()` and `hasNext()` methods.\r\n\r\nThe `getNextCandidateSet()` method advances the iterator forward. This method is actually sync as opposed to async so theoretically `.thenCompose(this::getNextCandidateSet)` can be replaced with `.thenApply(this::getNextCandidateSet)` with little refactoring.\r\n\r\nThe problem I&#39;m having is with the `runAffinityFilters()` method... This method is doing async calls to the Database with **must** be non-blocking. Its signature returns `CompletableFuture&lt;AllocationContext&gt;` and it&#39;s not feasible to change it.\r\n\r\nTherefore, calls to `runAffinityFilters()` are chained in this CompletableFuture chain with recursion - after each runAffinityFilters() call, a check for successful result is made - if running the affinity filters yielded no success ( `(ctx.firstSuccessfulCandidateSet == null` ) and the iterator can be advanced ( `context.currentPlacementZoneAllocationCandidatesProvider.hasNext()` )\r\n ... then `allocateAttempt(ctx)` is invoked again.\r\n\r\nIs there a way to replace the recursion with regular iteration? With the recursive solution I&#39;m hitting StackOverflowError near the 1000th loop...\r\nIt would be ideal to continue running `runAffinityFilters()` as async call, waiting for it to complete, checking the condition `if (ctx.firstSuccessfulCandidateSet == null\r\n                            &amp;&amp; context.currentPlacementZoneAllocationCandidatesProvider.hasNext()) ` and then continuing with next iteration.","title":"Iterate over list of CompletableFutures in loop without recursion","body":"<p>So I have this piece of Java code written with recursion.</p>\n<pre><code>package test;\n\nimport java.util.ArrayList;\nimport java.util.Iterator;\nimport java.util.List;\nimport java.util.concurrent.CompletableFuture;\nimport java.util.stream.IntStream;\n\npublic class Main {\n    public static void main(String[] args) {\n\n        List&lt;AllocationCandidateSet&gt; candidates = new ArrayList&lt;&gt;();\n        IntStream.range(0, 5000).forEach(__ -&gt; candidates.add(new AllocationCandidateSet()));\n        AllocationContext ctx = new AllocationContext();\n        ctx.currentPlacementZoneAllocationCandidatesProvider = candidates.iterator();\n\n        Main main = new Main();\n        main.attemptAllocation(ctx).join();\n\n        System.out.println(ctx.firstSuccessfulCandidateSet);\n        System.out.println(ctx.iteration);\n}\n\nprivate CompletableFuture&lt;AllocationContext&gt; attemptAllocation(AllocationContext context) {\n    return CompletableFuture.completedFuture(context)\n            .thenCompose(this::getNextCandidateSet)\n            .thenCompose(this::runAffinityFilters)\n            .thenCompose(ctx -&gt; {\n                if (ctx.firstSuccessfulCandidateSet == null\n                        &amp;&amp; context.currentPlacementZoneAllocationCandidatesProvider.hasNext()) {\n                    return attemptAllocation(ctx);\n                } else {\n                    return CompletableFuture.completedFuture(ctx);\n                }\n            });\n}\n\nprivate CompletableFuture&lt;AllocationContext&gt; getNextCandidateSet(AllocationContext ctx) {\n    // For the sake of simplicity, I omitted most of the logic inside this method.\n    ctx.currentCandidateSet = ctx.currentPlacementZoneAllocationCandidatesProvider.next();\n    ctx.iteration++;\n    return CompletableFuture.completedFuture(ctx);\n}\n\nprivate CompletableFuture&lt;AllocationContext&gt; runAffinityFilters(AllocationContext ctx) {\n    // This is a long running async operation doing DB calls\n    return CompletableFuture.completedFuture(ctx)\n            .thenCompose(context -&gt; {\n                // Do some DB calls and run business logic and evaluate if the current AllocationCandidateSet is successful\n                boolean success = context.iteration == 1876;\n                return CompletableFuture.completedFuture(success);\n            })\n            .thenAccept(success -&gt; {\n                if (success) {\n                    ctx.firstSuccessfulCandidateSet = ctx.currentCandidateSet;\n                }\n            })\n            .thenApply(__ -&gt; ctx);\n}\n\npublic static class AllocationContext {\n    Iterator&lt;AllocationCandidateSet&gt; currentPlacementZoneAllocationCandidatesProvider;\n    AllocationCandidateSet currentCandidateSet;\n\n    AllocationCandidateSet firstSuccessfulCandidateSet;\n\n    int iteration = 0;\n}\n\npublic static class AllocationCandidateSet {\n\n}\n</code></pre>\n<p>}</p>\n<p>Results are accumulated inside the AllocationContext which is a thread-safe object holder that contains Iterator - context.currentPlacementZoneAllocationCandidatesProvider.\nThe iterator is a normal one - having <code>next()</code> and <code>hasNext()</code> methods.</p>\n<p>The <code>getNextCandidateSet()</code> method advances the iterator forward. This method is actually sync as opposed to async so theoretically <code>.thenCompose(this::getNextCandidateSet)</code> can be replaced with <code>.thenApply(this::getNextCandidateSet)</code> with little refactoring.</p>\n<p>The problem I'm having is with the <code>runAffinityFilters()</code> method... This method is doing async calls to the Database with <strong>must</strong> be non-blocking. Its signature returns <code>CompletableFuture&lt;AllocationContext&gt;</code> and it's not feasible to change it.</p>\n<p>Therefore, calls to <code>runAffinityFilters()</code> are chained in this CompletableFuture chain with recursion - after each runAffinityFilters() call, a check for successful result is made - if running the affinity filters yielded no success ( <code>(ctx.firstSuccessfulCandidateSet == null</code> ) and the iterator can be advanced ( <code>context.currentPlacementZoneAllocationCandidatesProvider.hasNext()</code> )\n... then <code>allocateAttempt(ctx)</code> is invoked again.</p>\n<p>Is there a way to replace the recursion with regular iteration? With the recursive solution I'm hitting StackOverflowError near the 1000th loop...\nIt would be ideal to continue running <code>runAffinityFilters()</code> as async call, waiting for it to complete, checking the condition <code>if (ctx.firstSuccessfulCandidateSet == null &amp;&amp; context.currentPlacementZoneAllocationCandidatesProvider.hasNext()) </code> and then continuing with next iteration.</p>\n"},{"tags":["java","swt","eclipse-rcp","nattable"],"comments":[{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1671708556,"post_id":74887547,"comment_id":132158556,"body_markdown":"That is the default right-click menu for an input field on Windows. For example, when you right-click a file or folder on your desktop or in the Windows _File Explorer_ and choose _Properties_, and then right-click on the input field with the name, you will get the same menu. If you want to have a different right-click menu, you have to add it explicitly to the SWT _Text_ widget.","body":"That is the default right-click menu for an input field on Windows. For example, when you right-click a file or folder on your desktop or in the Windows <i>File Explorer</i> and choose <i>Properties</i>, and then right-click on the input field with the name, you will get the same menu. If you want to have a different right-click menu, you have to add it explicitly to the SWT <i>Text</i> widget."}],"owner":{"account_id":22581587,"reputation":7,"user_id":16766157,"display_name":"Ashray M V"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671708590,"creation_date":1671706864,"question_id":74887547,"body_markdown":"When a cell is in edit mode, and I right click on that cell then I get few menu items which feel unnecessary.\r\n\r\nThe menu items as shown in the image:\r\n[![Image][1]][1]\r\n\r\nLet me know if there is a way to remove those menu items.\r\n\r\n  [1]: https://i.stack.imgur.com/BSG0w.png","title":"Unnecessary menu items in edit cell NatTable","body":"<p>When a cell is in edit mode, and I right click on that cell then I get few menu items which feel unnecessary.</p>\n<p>The menu items as shown in the image:\n<a href=\"https://i.stack.imgur.com/BSG0w.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BSG0w.png\" alt=\"Image\" /></a></p>\n<p>Let me know if there is a way to remove those menu items.</p>\n"},{"tags":["java","spring-boot","debugging","jpa","projection"],"answers":[{"comments":[{"owner":{"account_id":24183247,"reputation":472,"user_id":18570428,"display_name":"Talenel"},"score":0,"creation_date":1671438024,"post_id":74828149,"comment_id":132091146,"body_markdown":"No, I&#39;m using STS. I tried to do your answer in STS but I don&#39;t find it...","body":"No, I&#39;m using STS. I tried to do your answer in STS but I don&#39;t find it..."}],"tags":[],"owner":{"account_id":873767,"reputation":973,"user_id":924036,"display_name":"Kaj Hejer"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671213381,"creation_date":1671213381,"answer_id":74828149,"question_id":74795264,"body_markdown":"From your screenshot it seems like you are using Intellij. Is that correct?\r\n\r\nIf it is, you might try the suggestion regarding &quot;Enable auto expressions in Variables view&quot;. and some other options described on https://youtrack.jetbrains.com/issue/IDEA-75922/Debugging-lazy-loaded-JPA-entity-attributes.\r\n","title":"How can I debug JPA projections content in Java?","body":"<p>From your screenshot it seems like you are using Intellij. Is that correct?</p>\n<p>If it is, you might try the suggestion regarding &quot;Enable auto expressions in Variables view&quot;. and some other options described on <a href=\"https://youtrack.jetbrains.com/issue/IDEA-75922/Debugging-lazy-loaded-JPA-entity-attributes\" rel=\"nofollow noreferrer\">https://youtrack.jetbrains.com/issue/IDEA-75922/Debugging-lazy-loaded-JPA-entity-attributes</a>.</p>\n"}],"owner":{"account_id":24183247,"reputation":472,"user_id":18570428,"display_name":"Talenel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":380,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1671708320,"creation_date":1671005634,"question_id":74795264,"body_markdown":"I&#39;m using `JPA` `projections` in my project.\r\nI have my `Projection` class which I can do getters without problem.\r\n\r\n    public interface ProjectionOP {\r\n    \r\n        \tString getName();\r\n        \t\r\n        \tLocalDate getDate();\r\n    //more attributes...\r\n        }\r\n\r\nIf I print `projectionOp.getName();` it returns the value stored successfully.\r\n\r\nAnyway, using debug mode, I can not view this value. If I use debug mode, it shows the following image, which I don&#39;t understand. \r\n\r\n[![enter image description here][1]][1]\r\n\r\nIt is possible to view the value of attributes &#39;name&#39; and &#39;date&#39; of my projectionOP in debug mode?\r\nI use STS IDE\r\n\r\n  [1]: https://i.stack.imgur.com/LGmNU.png","title":"How can I debug JPA projections content in Java?","body":"<p>I'm using <code>JPA</code> <code>projections</code> in my project.\nI have my <code>Projection</code> class which I can do getters without problem.</p>\n<pre><code>public interface ProjectionOP {\n\n        String getName();\n        \n        LocalDate getDate();\n//more attributes...\n    }\n</code></pre>\n<p>If I print <code>projectionOp.getName();</code> it returns the value stored successfully.</p>\n<p>Anyway, using debug mode, I can not view this value. If I use debug mode, it shows the following image, which I don't understand.</p>\n<p><a href=\"https://i.stack.imgur.com/LGmNU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LGmNU.png\" alt=\"enter image description here\" /></a></p>\n<p>It is possible to view the value of attributes 'name' and 'date' of my projectionOP in debug mode?\nI use STS IDE</p>\n"},{"tags":["java","gradle","intellij-idea","saxon","java-module"],"answers":[{"tags":[],"owner":{"account_id":12127488,"reputation":703,"user_id":8855688,"accept_rate":43,"display_name":"neblaz"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671707884,"creation_date":1671707884,"answer_id":74887756,"question_id":74887317,"body_markdown":"Due to character limitation for posts (30000) I have to add some more information here.\r\n\r\n`IntelliJ` didn&#39;t tell me about other problems, I found in one class this import statement \r\n\r\n    import org.apache.fop.apps.FOUserAgent\r\n\r\nwhich lead me to adding to `build.gradle` \r\n\r\n    implementation group: &#39;org.apache.xmlgraphics&#39;, name: &#39;fop&#39;, version: &#39;2.8&#39;\r\n\r\nand adding to `module-info.java`\r\n\r\n    requires fop;\r\n\r\nwhich pulled many other dependencies \r\n\r\n    implementation group: &#39;org.apache.xmlgraphics&#39;, name: &#39;fop&#39;, version: &#39;2.8&#39;\r\n    ---------------------------------------------------------------------------\r\n    --&gt;\r\n    com.thoughtworks.qdox:qdox:1.12\r\n    commons-io:commons-io:2.11.0\r\n    commons-logging:commons-logging:1.2\r\n    org.apache.pdfbox:fontbox:2.0.24\r\n    org.apache.xmlgraphics:batik-anim:1.16\r\n    org.apache.xmlgraphics:batik-awt-util:1.16\r\n    org.apache.xmlgraphics:batik-bridge:1.16\r\n    org.apache.xmlgraphics:batik-constants:1.16\r\n    org.apache.xmlgraphics:batik-css:1.16\r\n    org.apache.xmlgraphics:batik-dom:1.16\r\n    org.apache.xmlgraphics:batik-ext:1.16\r\n    org.apache.xmlgraphics:batik-extension:1.16\r\n    org.apache.xmlgraphics:batik-gvt:1.16\r\n    org.apache.xmlgraphics:batik-i18n:1.16\r\n    org.apache.xmlgraphics:batik-parser:1.16\r\n    org.apache.xmlgraphics:batik-script:1.16\r\n    org.apache.xmlgraphics:batik-shared-resources:1.16\r\n    org.apache.xmlgraphics:batik-svg-dom:1.16\r\n    org.apache.xmlgraphics:batik-svggen:1.16\r\n    org.apache.xmlgraphics:batik-transcoder:1.16\r\n    org.apache.xmlgraphics:batik-util:1.16\r\n    org.apache.xmlgraphics:batik-xml:1.16\r\n    org.apache.xmlgraphics:fop-core:2.8\r\n    org.apache.xmlgraphics:fop-events:2.8\r\n    org.apache.xmlgraphics:fop-util:2.8\r\n    org.apache.xmlgraphics:xmlgraphics-commons:2.8\r\n    xml-apis:xml-apis:1.4.01\r\n    xml-apis:xml-apis-ext:1.3.04\r\n\r\nBuilding it now leads to about 5200 errors, similar to the described, for example \r\n\r\n    error: module org.apache.commons.lang3 reads package org.apache.fop.fonts.base14 from both fop and fop.core\r\n    error: module Saxon.HE reads package org.apache.fop.render from both fop and fop.core","title":"Java Modules, Gradle, external dependencies - Modules reading from more then one","body":"<p>Due to character limitation for posts (30000) I have to add some more information here.</p>\n<p><code>IntelliJ</code> didn't tell me about other problems, I found in one class this import statement</p>\n<pre><code>import org.apache.fop.apps.FOUserAgent\n</code></pre>\n<p>which lead me to adding to <code>build.gradle</code></p>\n<pre><code>implementation group: 'org.apache.xmlgraphics', name: 'fop', version: '2.8'\n</code></pre>\n<p>and adding to <code>module-info.java</code></p>\n<pre><code>requires fop;\n</code></pre>\n<p>which pulled many other dependencies</p>\n<pre><code>implementation group: 'org.apache.xmlgraphics', name: 'fop', version: '2.8'\n---------------------------------------------------------------------------\n--&gt;\ncom.thoughtworks.qdox:qdox:1.12\ncommons-io:commons-io:2.11.0\ncommons-logging:commons-logging:1.2\norg.apache.pdfbox:fontbox:2.0.24\norg.apache.xmlgraphics:batik-anim:1.16\norg.apache.xmlgraphics:batik-awt-util:1.16\norg.apache.xmlgraphics:batik-bridge:1.16\norg.apache.xmlgraphics:batik-constants:1.16\norg.apache.xmlgraphics:batik-css:1.16\norg.apache.xmlgraphics:batik-dom:1.16\norg.apache.xmlgraphics:batik-ext:1.16\norg.apache.xmlgraphics:batik-extension:1.16\norg.apache.xmlgraphics:batik-gvt:1.16\norg.apache.xmlgraphics:batik-i18n:1.16\norg.apache.xmlgraphics:batik-parser:1.16\norg.apache.xmlgraphics:batik-script:1.16\norg.apache.xmlgraphics:batik-shared-resources:1.16\norg.apache.xmlgraphics:batik-svg-dom:1.16\norg.apache.xmlgraphics:batik-svggen:1.16\norg.apache.xmlgraphics:batik-transcoder:1.16\norg.apache.xmlgraphics:batik-util:1.16\norg.apache.xmlgraphics:batik-xml:1.16\norg.apache.xmlgraphics:fop-core:2.8\norg.apache.xmlgraphics:fop-events:2.8\norg.apache.xmlgraphics:fop-util:2.8\norg.apache.xmlgraphics:xmlgraphics-commons:2.8\nxml-apis:xml-apis:1.4.01\nxml-apis:xml-apis-ext:1.3.04\n</code></pre>\n<p>Building it now leads to about 5200 errors, similar to the described, for example</p>\n<pre><code>error: module org.apache.commons.lang3 reads package org.apache.fop.fonts.base14 from both fop and fop.core\nerror: module Saxon.HE reads package org.apache.fop.render from both fop and fop.core\n</code></pre>\n"}],"owner":{"account_id":12127488,"reputation":703,"user_id":8855688,"accept_rate":43,"display_name":"neblaz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":281,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1671708028,"creation_date":1671705624,"question_id":74887317,"body_markdown":"Starting with an initial problem discussed here https://stackoverflow.com/questions/74851117/java-modules-gradle-project-problems-with-external-libraries I now face a next problem in my project, which is based now on `Gradle 7.6`, now trying with `OpenJDK 19`.\r\n\r\nTrying to build in `IntelliJ` with `Build &gt; Build Project` or `Gradle &gt; Tasks &gt; build &gt; build` I get the following outpu (about 350 errors):\r\n\r\n        error: the unnamed module reads package org.xml.sax from both java.xml and xml.apis\r\n        error: the unnamed module reads package org.xml.sax.helpers from both java.xml and xml.apis\r\n        error: the unnamed module reads package org.xml.sax.ext from both java.xml and xml.apis\r\n        error: the unnamed module reads package org.w3c.dom from both java.xml and xml.apis\r\n        error: the unnamed module reads package org.w3c.dom.views from both java.xml and xml.apis\r\n        error: the unnamed module reads package org.w3c.dom.traversal from both java.xml and xml.apis\r\n        error: the unnamed module reads package org.w3c.dom.ranges from both java.xml and xml.apis\r\n        error: the unnamed module reads package org.w3c.dom.ls from both java.xml and xml.apis\r\n        error: the unnamed module reads package org.w3c.dom.html from both xercesImpl and xml.apis\r\n        error: the unnamed module reads package org.w3c.dom.events from both java.xml and xml.apis\r\n        error: the unnamed module reads package org.w3c.dom.bootstrap from both java.xml and xml.apis\r\n        error: the unnamed module reads package javax.xml from both java.xml and xml.apis\r\n        error: the unnamed module reads package javax.xml.xpath from both java.xml and xml.apis\r\n        error: the unnamed module reads package javax.xml.validation from both java.xml and xml.apis\r\n        error: the unnamed module reads package javax.xml.transform from both java.xml and xml.apis\r\n        error: the unnamed module reads package javax.xml.transform.stream from both java.xml and xml.apis\r\n        error: the unnamed module reads package javax.xml.transform.stax from both java.xml and xml.apis\r\n        error: the unnamed module reads package javax.xml.transform.sax from both java.xml and xml.apis\r\n        error: the unnamed module reads package javax.xml.transform.dom from both java.xml and xml.apis\r\n        error: the unnamed module reads package javax.xml.stream from both java.xml and xml.apis\r\n        error: the unnamed module reads package javax.xml.stream.util from both java.xml and xml.apis\r\n        error: the unnamed module reads package javax.xml.stream.events from both java.xml and xml.apis\r\n        error: the unnamed module reads package javax.xml.parsers from both java.xml and xml.apis\r\n        error: the unnamed module reads package javax.xml.namespace from both java.xml and xml.apis\r\n        error: the unnamed module reads package javax.xml.datatype from both java.xml and xml.apis\r\n        error: module okio reads package org.w3c.dom.html from both xercesImpl and xml.apis\r\n        error: module okio reads package javax.xml from both xml.apis and java.xml\r\n        error: module okio reads package javax.xml.datatype from both xml.apis and java.xml\r\n        error: module okio reads package javax.xml.namespace from both xml.apis and java.xml\r\n        error: module okio reads package javax.xml.parsers from both xml.apis and java.xml\r\n        error: module okio reads package javax.xml.stream from both xml.apis and java.xml\r\n        error: module okio reads package javax.xml.stream.events from both xml.apis and java.xml\r\n        error: module okio reads package javax.xml.stream.util from both xml.apis and java.xml\r\n        error: module okio reads package javax.xml.transform from both xml.apis and java.xml\r\n        error: module okio reads package javax.xml.transform.dom from both xml.apis and java.xml\r\n        error: module okio reads package javax.xml.transform.sax from both xml.apis and java.xml\r\n        error: module okio reads package javax.xml.transform.stax from both xml.apis and java.xml\r\n        error: module okio reads package javax.xml.transform.stream from both xml.apis and java.xml\r\n        error: module okio reads package javax.xml.validation from both xml.apis and java.xml\r\n        error: module okio reads package javax.xml.xpath from both xml.apis and java.xml\r\n        error: module okio reads package org.w3c.dom from both xml.apis and java.xml\r\n        error: module okio reads package org.w3c.dom.bootstrap from both xml.apis and java.xml\r\n        error: module okio reads package org.w3c.dom.events from both xml.apis and java.xml\r\n        error: module okio reads package org.w3c.dom.ls from both xml.apis and java.xml\r\n        error: module okio reads package org.w3c.dom.ranges from both xml.apis and java.xml\r\n        error: module okio reads package org.w3c.dom.traversal from both xml.apis and java.xml\r\n        error: module okio reads package org.w3c.dom.views from both xml.apis and java.xml\r\n        error: module okio reads package org.xml.sax from both xml.apis and java.xml\r\n        error: module okio reads package org.xml.sax.ext from both xml.apis and java.xml\r\n        error: module okio reads package org.xml.sax.helpers from both xml.apis and java.xml\r\n        error: module okhttp3 reads package org.w3c.dom.html from both xercesImpl and xml.apis\r\n        error: module okhttp3 reads package javax.xml from both xml.apis and java.xml\r\n        error: module okhttp3 reads package javax.xml.datatype from both xml.apis and java.xml\r\n        error: module okhttp3 reads package javax.xml.namespace from both xml.apis and java.xml\r\n        error: module okhttp3 reads package javax.xml.parsers from both xml.apis and java.xml\r\n        error: module okhttp3 reads package javax.xml.stream from both xml.apis and java.xml\r\n        error: module okhttp3 reads package javax.xml.stream.events from both xml.apis and java.xml\r\n        error: module okhttp3 reads package javax.xml.stream.util from both xml.apis and java.xml\r\n        error: module okhttp3 reads package javax.xml.transform from both xml.apis and java.xml\r\n        error: module okhttp3 reads package javax.xml.transform.dom from both xml.apis and java.xml\r\n        error: module okhttp3 reads package javax.xml.transform.sax from both xml.apis and java.xml\r\n        error: module okhttp3 reads package javax.xml.transform.stax from both xml.apis and java.xml\r\n        error: module okhttp3 reads package javax.xml.transform.stream from both xml.apis and java.xml\r\n        error: module okhttp3 reads package javax.xml.validation from both xml.apis and java.xml\r\n        error: module okhttp3 reads package javax.xml.xpath from both xml.apis and java.xml\r\n        error: module okhttp3 reads package org.w3c.dom from both xml.apis and java.xml\r\n        error: module okhttp3 reads package org.w3c.dom.bootstrap from both xml.apis and java.xml\r\n        error: module okhttp3 reads package org.w3c.dom.events from both xml.apis and java.xml\r\n        error: module okhttp3 reads package org.w3c.dom.ls from both xml.apis and java.xml\r\n        error: module okhttp3 reads package org.w3c.dom.ranges from both xml.apis and java.xml\r\n        error: module okhttp3 reads package org.w3c.dom.traversal from both xml.apis and java.xml\r\n        error: module okhttp3 reads package org.w3c.dom.views from both xml.apis and java.xml\r\n        error: module okhttp3 reads package org.xml.sax from both xml.apis and java.xml\r\n        error: module okhttp3 reads package org.xml.sax.ext from both xml.apis and java.xml\r\n        error: module okhttp3 reads package org.xml.sax.helpers from both xml.apis and java.xml\r\n        error: module org.apache.commons.io reads package org.w3c.dom.html from both xercesImpl and xml.apis\r\n        error: module org.apache.commons.io reads package javax.xml from both xml.apis and java.xml\r\n    ... shortened due to character limitation for posts ...\r\n        C:\\Users\\ME\\PROJECTS\\myproject\\mymodule1\\src\\main\\java\\module-info.java:1: error: module mymodule1 reads package org.w3c.dom.html from both xercesImpl and xml.apis\r\n        module mymodule1 {\r\n        ^\r\n        351 errors\r\n\r\nFirst, there seems to be an `unnamed module`, but which one is it, how to find that?\r\n\r\nWith the `Java Modules` system it is not allowed that the same package (name) is exported more then once, as I understand. Having those external dependencies, they don&#39;t care, some are not modularized anyway.\r\n\r\nHow to deal now with this problem?\r\nI&#39;m not the developer of the project, now I have the task to modularize the project.\r\nOne naive look tells me, do I need all those external dependencis, if I can remove the one or the other maybe the problem is gone. Doing everything with `java.xml` if possible, but that would mean to rewrite the project. But assuming for now that I need all those external dependencies, how can I solve this problem? I&#39;m new to the Java Modules system, also not much familiar with Gradle.\r\n\r\nThose external dependencies bring in additional transitive dependencies and conflicts arise while modules (dependencies) try to read packages which are provided in this scenario from two modules:\r\n\r\n    java.xml and xml.apis\r\n    xercesImpl and xml.apis\r\n","title":"Java Modules, Gradle, external dependencies - Modules reading from more then one","body":"<p>Starting with an initial problem discussed here <a href=\"https://stackoverflow.com/questions/74851117/java-modules-gradle-project-problems-with-external-libraries\">Java Modules, Gradle project - Problems with external libraries</a> I now face a next problem in my project, which is based now on <code>Gradle 7.6</code>, now trying with <code>OpenJDK 19</code>.</p>\n<p>Trying to build in <code>IntelliJ</code> with <code>Build &gt; Build Project</code> or <code>Gradle &gt; Tasks &gt; build &gt; build</code> I get the following outpu (about 350 errors):</p>\n<pre><code>    error: the unnamed module reads package org.xml.sax from both java.xml and xml.apis\n    error: the unnamed module reads package org.xml.sax.helpers from both java.xml and xml.apis\n    error: the unnamed module reads package org.xml.sax.ext from both java.xml and xml.apis\n    error: the unnamed module reads package org.w3c.dom from both java.xml and xml.apis\n    error: the unnamed module reads package org.w3c.dom.views from both java.xml and xml.apis\n    error: the unnamed module reads package org.w3c.dom.traversal from both java.xml and xml.apis\n    error: the unnamed module reads package org.w3c.dom.ranges from both java.xml and xml.apis\n    error: the unnamed module reads package org.w3c.dom.ls from both java.xml and xml.apis\n    error: the unnamed module reads package org.w3c.dom.html from both xercesImpl and xml.apis\n    error: the unnamed module reads package org.w3c.dom.events from both java.xml and xml.apis\n    error: the unnamed module reads package org.w3c.dom.bootstrap from both java.xml and xml.apis\n    error: the unnamed module reads package javax.xml from both java.xml and xml.apis\n    error: the unnamed module reads package javax.xml.xpath from both java.xml and xml.apis\n    error: the unnamed module reads package javax.xml.validation from both java.xml and xml.apis\n    error: the unnamed module reads package javax.xml.transform from both java.xml and xml.apis\n    error: the unnamed module reads package javax.xml.transform.stream from both java.xml and xml.apis\n    error: the unnamed module reads package javax.xml.transform.stax from both java.xml and xml.apis\n    error: the unnamed module reads package javax.xml.transform.sax from both java.xml and xml.apis\n    error: the unnamed module reads package javax.xml.transform.dom from both java.xml and xml.apis\n    error: the unnamed module reads package javax.xml.stream from both java.xml and xml.apis\n    error: the unnamed module reads package javax.xml.stream.util from both java.xml and xml.apis\n    error: the unnamed module reads package javax.xml.stream.events from both java.xml and xml.apis\n    error: the unnamed module reads package javax.xml.parsers from both java.xml and xml.apis\n    error: the unnamed module reads package javax.xml.namespace from both java.xml and xml.apis\n    error: the unnamed module reads package javax.xml.datatype from both java.xml and xml.apis\n    error: module okio reads package org.w3c.dom.html from both xercesImpl and xml.apis\n    error: module okio reads package javax.xml from both xml.apis and java.xml\n    error: module okio reads package javax.xml.datatype from both xml.apis and java.xml\n    error: module okio reads package javax.xml.namespace from both xml.apis and java.xml\n    error: module okio reads package javax.xml.parsers from both xml.apis and java.xml\n    error: module okio reads package javax.xml.stream from both xml.apis and java.xml\n    error: module okio reads package javax.xml.stream.events from both xml.apis and java.xml\n    error: module okio reads package javax.xml.stream.util from both xml.apis and java.xml\n    error: module okio reads package javax.xml.transform from both xml.apis and java.xml\n    error: module okio reads package javax.xml.transform.dom from both xml.apis and java.xml\n    error: module okio reads package javax.xml.transform.sax from both xml.apis and java.xml\n    error: module okio reads package javax.xml.transform.stax from both xml.apis and java.xml\n    error: module okio reads package javax.xml.transform.stream from both xml.apis and java.xml\n    error: module okio reads package javax.xml.validation from both xml.apis and java.xml\n    error: module okio reads package javax.xml.xpath from both xml.apis and java.xml\n    error: module okio reads package org.w3c.dom from both xml.apis and java.xml\n    error: module okio reads package org.w3c.dom.bootstrap from both xml.apis and java.xml\n    error: module okio reads package org.w3c.dom.events from both xml.apis and java.xml\n    error: module okio reads package org.w3c.dom.ls from both xml.apis and java.xml\n    error: module okio reads package org.w3c.dom.ranges from both xml.apis and java.xml\n    error: module okio reads package org.w3c.dom.traversal from both xml.apis and java.xml\n    error: module okio reads package org.w3c.dom.views from both xml.apis and java.xml\n    error: module okio reads package org.xml.sax from both xml.apis and java.xml\n    error: module okio reads package org.xml.sax.ext from both xml.apis and java.xml\n    error: module okio reads package org.xml.sax.helpers from both xml.apis and java.xml\n    error: module okhttp3 reads package org.w3c.dom.html from both xercesImpl and xml.apis\n    error: module okhttp3 reads package javax.xml from both xml.apis and java.xml\n    error: module okhttp3 reads package javax.xml.datatype from both xml.apis and java.xml\n    error: module okhttp3 reads package javax.xml.namespace from both xml.apis and java.xml\n    error: module okhttp3 reads package javax.xml.parsers from both xml.apis and java.xml\n    error: module okhttp3 reads package javax.xml.stream from both xml.apis and java.xml\n    error: module okhttp3 reads package javax.xml.stream.events from both xml.apis and java.xml\n    error: module okhttp3 reads package javax.xml.stream.util from both xml.apis and java.xml\n    error: module okhttp3 reads package javax.xml.transform from both xml.apis and java.xml\n    error: module okhttp3 reads package javax.xml.transform.dom from both xml.apis and java.xml\n    error: module okhttp3 reads package javax.xml.transform.sax from both xml.apis and java.xml\n    error: module okhttp3 reads package javax.xml.transform.stax from both xml.apis and java.xml\n    error: module okhttp3 reads package javax.xml.transform.stream from both xml.apis and java.xml\n    error: module okhttp3 reads package javax.xml.validation from both xml.apis and java.xml\n    error: module okhttp3 reads package javax.xml.xpath from both xml.apis and java.xml\n    error: module okhttp3 reads package org.w3c.dom from both xml.apis and java.xml\n    error: module okhttp3 reads package org.w3c.dom.bootstrap from both xml.apis and java.xml\n    error: module okhttp3 reads package org.w3c.dom.events from both xml.apis and java.xml\n    error: module okhttp3 reads package org.w3c.dom.ls from both xml.apis and java.xml\n    error: module okhttp3 reads package org.w3c.dom.ranges from both xml.apis and java.xml\n    error: module okhttp3 reads package org.w3c.dom.traversal from both xml.apis and java.xml\n    error: module okhttp3 reads package org.w3c.dom.views from both xml.apis and java.xml\n    error: module okhttp3 reads package org.xml.sax from both xml.apis and java.xml\n    error: module okhttp3 reads package org.xml.sax.ext from both xml.apis and java.xml\n    error: module okhttp3 reads package org.xml.sax.helpers from both xml.apis and java.xml\n    error: module org.apache.commons.io reads package org.w3c.dom.html from both xercesImpl and xml.apis\n    error: module org.apache.commons.io reads package javax.xml from both xml.apis and java.xml\n... shortened due to character limitation for posts ...\n    C:\\Users\\ME\\PROJECTS\\myproject\\mymodule1\\src\\main\\java\\module-info.java:1: error: module mymodule1 reads package org.w3c.dom.html from both xercesImpl and xml.apis\n    module mymodule1 {\n    ^\n    351 errors\n</code></pre>\n<p>First, there seems to be an <code>unnamed module</code>, but which one is it, how to find that?</p>\n<p>With the <code>Java Modules</code> system it is not allowed that the same package (name) is exported more then once, as I understand. Having those external dependencies, they don't care, some are not modularized anyway.</p>\n<p>How to deal now with this problem?\nI'm not the developer of the project, now I have the task to modularize the project.\nOne naive look tells me, do I need all those external dependencis, if I can remove the one or the other maybe the problem is gone. Doing everything with <code>java.xml</code> if possible, but that would mean to rewrite the project. But assuming for now that I need all those external dependencies, how can I solve this problem? I'm new to the Java Modules system, also not much familiar with Gradle.</p>\n<p>Those external dependencies bring in additional transitive dependencies and conflicts arise while modules (dependencies) try to read packages which are provided in this scenario from two modules:</p>\n<pre><code>java.xml and xml.apis\nxercesImpl and xml.apis\n</code></pre>\n"},{"tags":["java","json","spring","spring-boot","fileoutputstream"],"answers":[{"tags":[],"owner":{"account_id":235169,"reputation":19,"user_id":3369593,"display_name":"HermanW"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671707904,"creation_date":1671707904,"answer_id":74887762,"question_id":74861637,"body_markdown":"IMHO, If you&#39;re using docker or any container to deploy the apps, just let the code to write on the root folder (home where app.jar deployed), coz in the runtime actually the metadata will not accessible since it already bundled on the jar by spring-boot. ","title":"How to create a json file inside the resource folder in SpringBoot?","body":"<p>IMHO, If you're using docker or any container to deploy the apps, just let the code to write on the root folder (home where app.jar deployed), coz in the runtime actually the metadata will not accessible since it already bundled on the jar by spring-boot.</p>\n"}],"owner":{"account_id":27109450,"reputation":1,"user_id":20654814,"display_name":"Madan Gopal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":395,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1671707904,"creation_date":1671532133,"question_id":74861637,"body_markdown":"I want to write into a json file inside the resource folder of springboot. So I wanted to check, how to create a file and insert data. If file exists after creation then add the data into file, else create file and add data.\r\n\r\n    ClassLoader classLoader = Thread.currentThread().getContextClassLoader();    \r\n    FileOutputStream fileOutputStream = new FileOutputStream(new      \r\n        File(classLoader.getResourceAsStream(&quot;/Response.json&quot;).toString()));    \r\n    OutputStreamWriter outputStreamWriter = new \r\n        OutputStreamWriter(fileOutputStream, StandardCharsets.UTF_8);    \r\n    BufferedWriter writer = new BufferedWriter(outputStreamWriter);    \r\n    try { \r\n         for(list){} \r\n         string result=&quot;user Should be active user&quot;;  \r\n         writer.write(String.valueOf(result)); \r\n         writer.close();\r\n    } catch{}\r\n\r\n","title":"How to create a json file inside the resource folder in SpringBoot?","body":"<p>I want to write into a json file inside the resource folder of springboot. So I wanted to check, how to create a file and insert data. If file exists after creation then add the data into file, else create file and add data.</p>\n<pre><code>ClassLoader classLoader = Thread.currentThread().getContextClassLoader();    \nFileOutputStream fileOutputStream = new FileOutputStream(new      \n    File(classLoader.getResourceAsStream(&quot;/Response.json&quot;).toString()));    \nOutputStreamWriter outputStreamWriter = new \n    OutputStreamWriter(fileOutputStream, StandardCharsets.UTF_8);    \nBufferedWriter writer = new BufferedWriter(outputStreamWriter);    \ntry { \n     for(list){} \n     string result=&quot;user Should be active user&quot;;  \n     writer.write(String.valueOf(result)); \n     writer.close();\n} catch{}\n</code></pre>\n"},{"tags":["java","sql","jooq"],"answers":[{"tags":[],"owner":{"account_id":247217,"reputation":213465,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1671707612,"creation_date":1671707612,"answer_id":74887693,"question_id":74886535,"body_markdown":"&gt; Is there a way to implement this also with jOOQ?\r\n\r\nEven before all these features are available, you could implement it yourself using the existing [`VisitListener` SPI][1]. An example is given [in this blog post, showing how to implement row level security with jOOQ using a `VisitListener`][2]. The implementation details are too complex for a Stack Overflow answer, though the blog post will provide you with sufficient ideas.\r\n\r\n&gt; The initial promising way seemed to be [QOM](https://blog.jooq.org/traversing-jooq-expression-trees-with-the-new-traverser-api/). But if I understand correctly it isn&#39;t ready yet for this requirement as it doesn&#39;t traverse into the JOIN parts. \r\n\r\nIt will traverse into `JOIN` trees starting from jOOQ 3.18, see also [#13640][3] for a list of changes. You can access 3.18.0-SNAPSHOT builds already today: https://www.jooq.org/download/versions\r\n\r\n&gt; Also as it is experimental it might be risky (?).\r\n\r\nAs of jOOQ 3.18, the `QOM` API is still subject to (incompatible) change between minor releases. E.g. there might be\r\n\r\n- Method name changes\r\n- Type hierarchy changes (e.g. it&#39;s unclear if a `Select` should have set operations (internal status quo), or if a new, higher level type will be needed)\r\n\r\nThe risk on your end is probably acceptable. The API won&#39;t go away anymore. Numerous customers already rely on it to implement custom SQL transformations like you do.\r\n\r\n&gt; Is there a rough time/version schedule planned for it or is it too unforeseeable in the future?\r\n\r\nNo promises, of course, but I have strong hopes for this API to finalise by the end of 2023.\r\n\r\n&gt; There seems to have been the idea to [implement a soft-deleting feature in jOOQ at some time](https://github.com/jOOQ/jOOQ/issues/2683).\r\n\r\nIndeed, soft-deleting will come to jOOQ soon in one of the next releases (3.19 or so?): [#2683][4]. To implement it properly, jOOQ first needed a robust:\r\n\r\n- [Public query object model (`QOM`) API][5]\r\n- [`QOM` traversal][6] and [replacement][7] capabilities\r\n- [SQL transformation capabilities][8]\r\n\r\nI.e. all the things you&#39;ve found yourself. However, it&#39;s likely that soft-deleting can be published before all the above will leave experimental status.\r\n\r\n\r\n  [1]: https://www.jooq.org/javadoc/latest/org.jooq/org/jooq/VisitListener.html\r\n  [2]: https://blog.jooq.org/implementing-client-side-row-level-security-with-jooq/\r\n  [3]: https://github.com/jOOQ/jOOQ/issues/13640\r\n  [4]: https://github.com/jOOQ/jOOQ/issues/2683\r\n  [5]: https://www.jooq.org/doc/latest/manual/sql-building/model-api/\r\n  [6]: https://www.jooq.org/doc/latest/manual/sql-building/model-api/model-api-traversal/\r\n  [7]: https://www.jooq.org/doc/latest/manual/sql-building/model-api/model-api-replacement/\r\n  [8]: https://www.jooq.org/doc/latest/manual/sql-building/queryparts/sql-transformation/","title":"jOOQ - Filter out logical deleted rows","body":"<blockquote>\n<p>Is there a way to implement this also with jOOQ?</p>\n</blockquote>\n<p>Even before all these features are available, you could implement it yourself using the existing <a href=\"https://www.jooq.org/javadoc/latest/org.jooq/org/jooq/VisitListener.html\" rel=\"nofollow noreferrer\"><code>VisitListener</code> SPI</a>. An example is given <a href=\"https://blog.jooq.org/implementing-client-side-row-level-security-with-jooq/\" rel=\"nofollow noreferrer\">in this blog post, showing how to implement row level security with jOOQ using a <code>VisitListener</code></a>. The implementation details are too complex for a Stack Overflow answer, though the blog post will provide you with sufficient ideas.</p>\n<blockquote>\n<p>The initial promising way seemed to be <a href=\"https://blog.jooq.org/traversing-jooq-expression-trees-with-the-new-traverser-api/\" rel=\"nofollow noreferrer\">QOM</a>. But if I understand correctly it isn't ready yet for this requirement as it doesn't traverse into the JOIN parts.</p>\n</blockquote>\n<p>It will traverse into <code>JOIN</code> trees starting from jOOQ 3.18, see also <a href=\"https://github.com/jOOQ/jOOQ/issues/13640\" rel=\"nofollow noreferrer\">#13640</a> for a list of changes. You can access 3.18.0-SNAPSHOT builds already today: <a href=\"https://www.jooq.org/download/versions\" rel=\"nofollow noreferrer\">https://www.jooq.org/download/versions</a></p>\n<blockquote>\n<p>Also as it is experimental it might be risky (?).</p>\n</blockquote>\n<p>As of jOOQ 3.18, the <code>QOM</code> API is still subject to (incompatible) change between minor releases. E.g. there might be</p>\n<ul>\n<li>Method name changes</li>\n<li>Type hierarchy changes (e.g. it's unclear if a <code>Select</code> should have set operations (internal status quo), or if a new, higher level type will be needed)</li>\n</ul>\n<p>The risk on your end is probably acceptable. The API won't go away anymore. Numerous customers already rely on it to implement custom SQL transformations like you do.</p>\n<blockquote>\n<p>Is there a rough time/version schedule planned for it or is it too unforeseeable in the future?</p>\n</blockquote>\n<p>No promises, of course, but I have strong hopes for this API to finalise by the end of 2023.</p>\n<blockquote>\n<p>There seems to have been the idea to <a href=\"https://github.com/jOOQ/jOOQ/issues/2683\" rel=\"nofollow noreferrer\">implement a soft-deleting feature in jOOQ at some time</a>.</p>\n</blockquote>\n<p>Indeed, soft-deleting will come to jOOQ soon in one of the next releases (3.19 or so?): <a href=\"https://github.com/jOOQ/jOOQ/issues/2683\" rel=\"nofollow noreferrer\">#2683</a>. To implement it properly, jOOQ first needed a robust:</p>\n<ul>\n<li><a href=\"https://www.jooq.org/doc/latest/manual/sql-building/model-api/\" rel=\"nofollow noreferrer\">Public query object model (<code>QOM</code>) API</a></li>\n<li><a href=\"https://www.jooq.org/doc/latest/manual/sql-building/model-api/model-api-traversal/\" rel=\"nofollow noreferrer\"><code>QOM</code> traversal</a> and <a href=\"https://www.jooq.org/doc/latest/manual/sql-building/model-api/model-api-replacement/\" rel=\"nofollow noreferrer\">replacement</a> capabilities</li>\n<li><a href=\"https://www.jooq.org/doc/latest/manual/sql-building/queryparts/sql-transformation/\" rel=\"nofollow noreferrer\">SQL transformation capabilities</a></li>\n</ul>\n<p>I.e. all the things you've found yourself. However, it's likely that soft-deleting can be published before all the above will leave experimental status.</p>\n"}],"owner":{"account_id":20754825,"reputation":69,"user_id":15241481,"display_name":"db2222"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":171,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74887693,"answer_count":1,"score":1,"last_activity_date":1671707612,"creation_date":1671701471,"question_id":74886535,"body_markdown":"Our previously used framework has a mechanism that automatically extends the SQL to filter out the logically deleted rows. Is there a way to implement this also with jOOQ?\r\n\r\nThe idea would be:\r\n- Find out all the involved tables via the ```FROM``` and ```JOIN``` parts (a more complex logic isn&#39;t needed).\r\n- Determine if they are a logical deletable table (we already have our own meta data for this).\r\n- Extend the ```JOIN ... ON ...``` part with ```deleted = 0``` if deleted wasn&#39;t already given.\r\n- Add/extend the ```WHERE``` part with ```deleted = 0``` if deleted wasn&#39;t already given for the main table.\r\n\r\nThe initial promising way seemed to be ```QOM``` (https://blog.jooq.org/traversing-jooq-expression-trees-with-the-new-traverser-api/).\r\nBut if I understand correctly it isn&#39;t ready yet for this requirement as it doesn&#39;t traverse into the ```JOIN``` parts.\r\nAlso as it is experimental it might be risky (?). Is there a rough time/version schedule planned for it or is it too unforeseeable in the future?\r\n\r\nExtending the ```WHERE``` part (without an existing check) is very easy with ```addConditions```.\r\nBut doing the same for the ```JOIN ... ON ...``` part?\r\n\r\nAs jOOQ doesn&#39;t allow extending certain classes as they are marked as final (not meant as a criticism as there are understandable reasons for it) and Java doesn&#39;t support extension methods like C# the only solution I could think of up until now is that we have our own top-level select-method that does it all.\r\n\r\nExample:\r\nselectFromWhereNotDeleted(table1, table2, table3) -&gt; rest of the select statement can be added via fluent API\r\n\r\nIt adds the correct join conditions based on our meta data. Also it determines if the table is logical deletable and adds ```deleted = 0``` everywhere accordingly. This is implemented and it works. But it totally breaks with the standard known SQL syntax. Especially if you want to only select certain columns and/or extend the ```JOIN ... ON ...``` part. I&#39;ve made that work also but again a special syntax per table parameter is needed (wrapper class/methods). Meaning you have to jump between the SQL parts when writing the code.\r\n\r\nThe alternative would have been to implemented all the involved jOOQ classes ourselves as a wrapper to be able to extend them with the needed methods.\r\nI scratched that as I find it too messy (too many layers, too much code, too brittle if jOOQ changes in the future).\r\n\r\nThere seems to have been the idea to implement a soft-deleting feature in jOOQ at some time (https://github.com/jOOQ/jOOQ/issues/2683).\r\n\r\nBut am I missing something? Is there already a better/easier way?","title":"jOOQ - Filter out logical deleted rows","body":"<p>Our previously used framework has a mechanism that automatically extends the SQL to filter out the logically deleted rows. Is there a way to implement this also with jOOQ?</p>\n<p>The idea would be:</p>\n<ul>\n<li>Find out all the involved tables via the <code>FROM</code> and <code>JOIN</code> parts (a more complex logic isn't needed).</li>\n<li>Determine if they are a logical deletable table (we already have our own meta data for this).</li>\n<li>Extend the <code>JOIN ... ON ...</code> part with <code>deleted = 0</code> if deleted wasn't already given.</li>\n<li>Add/extend the <code>WHERE</code> part with <code>deleted = 0</code> if deleted wasn't already given for the main table.</li>\n</ul>\n<p>The initial promising way seemed to be <code>QOM</code> (<a href=\"https://blog.jooq.org/traversing-jooq-expression-trees-with-the-new-traverser-api/\" rel=\"nofollow noreferrer\">https://blog.jooq.org/traversing-jooq-expression-trees-with-the-new-traverser-api/</a>).\nBut if I understand correctly it isn't ready yet for this requirement as it doesn't traverse into the <code>JOIN</code> parts.\nAlso as it is experimental it might be risky (?). Is there a rough time/version schedule planned for it or is it too unforeseeable in the future?</p>\n<p>Extending the <code>WHERE</code> part (without an existing check) is very easy with <code>addConditions</code>.\nBut doing the same for the <code>JOIN ... ON ...</code> part?</p>\n<p>As jOOQ doesn't allow extending certain classes as they are marked as final (not meant as a criticism as there are understandable reasons for it) and Java doesn't support extension methods like C# the only solution I could think of up until now is that we have our own top-level select-method that does it all.</p>\n<p>Example:\nselectFromWhereNotDeleted(table1, table2, table3) -&gt; rest of the select statement can be added via fluent API</p>\n<p>It adds the correct join conditions based on our meta data. Also it determines if the table is logical deletable and adds <code>deleted = 0</code> everywhere accordingly. This is implemented and it works. But it totally breaks with the standard known SQL syntax. Especially if you want to only select certain columns and/or extend the <code>JOIN ... ON ...</code> part. I've made that work also but again a special syntax per table parameter is needed (wrapper class/methods). Meaning you have to jump between the SQL parts when writing the code.</p>\n<p>The alternative would have been to implemented all the involved jOOQ classes ourselves as a wrapper to be able to extend them with the needed methods.\nI scratched that as I find it too messy (too many layers, too much code, too brittle if jOOQ changes in the future).</p>\n<p>There seems to have been the idea to implement a soft-deleting feature in jOOQ at some time (<a href=\"https://github.com/jOOQ/jOOQ/issues/2683\" rel=\"nofollow noreferrer\">https://github.com/jOOQ/jOOQ/issues/2683</a>).</p>\n<p>But am I missing something? Is there already a better/easier way?</p>\n"},{"tags":["java","android","google-cloud-firestore","pagination"],"comments":[{"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":1,"creation_date":1671707902,"post_id":74887683,"comment_id":132158345,"body_markdown":"&quot;the pagination is not working&quot; doesn&#39;t provide enough information so we can help. What exactly doesn&#39;t work? Do you have any errors? Besides that, I think that this [resource](https://medium.com/firebase-tips-tricks/how-to-paginate-firestore-using-paging-3-on-android-c485acb0a2df) will help.","body":"&quot;the pagination is not working&quot; doesn&#39;t provide enough information so we can help. What exactly doesn&#39;t work? Do you have any errors? Besides that, I think that this <a href=\"https://medium.com/firebase-tips-tricks/how-to-paginate-firestore-using-paging-3-on-android-c485acb0a2df\" rel=\"nofollow noreferrer\">resource</a> will help."},{"owner":{"account_id":26351131,"reputation":79,"user_id":20397293,"display_name":"Puru Chaudhary"},"score":0,"creation_date":1671708317,"post_id":74887683,"comment_id":132158473,"body_markdown":"no sir the problem is that if we set limit to 5 then only 5 items fetch after that it does not fetch any item but if we use it without nested scroll view in a simple layout it works but it is not working in nested scroll view but we need that inside nested","body":"no sir the problem is that if we set limit to 5 then only 5 items fetch after that it does not fetch any item but if we use it without nested scroll view in a simple layout it works but it is not working in nested scroll view but we need that inside nested"},{"owner":{"account_id":72426,"reputation":573804,"user_id":209103,"accept_rate":73,"display_name":"Frank van Puffelen"},"score":0,"creation_date":1671721915,"post_id":74887683,"comment_id":132162891,"body_markdown":"Did you already debug the problem locally? For example: if you set a breakpoint on the second pagination query, run the code in a debugger, and check `lastVisible` does that have the value that you expect it to have?","body":"Did you already debug the problem locally? For example: if you set a breakpoint on the second pagination query, run the code in a debugger, and check <code>lastVisible</code> does that have the value that you expect it to have?"}],"owner":{"account_id":26351131,"reputation":79,"user_id":20397293,"display_name":"Puru Chaudhary"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":133,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671707540,"creation_date":1671707540,"question_id":74887683,"body_markdown":"I am building an app where i am fetching the data from firestore and want to use pagination but the problem is that the pagination is not working in nested scroll view. the code is something like this\r\n\r\n\r\nMy XML Code is something like this:\r\n\r\n    &lt;androidx.drawerlayout.widget.DrawerLayout\r\n    \r\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    tools:context=&quot;.HomeFragment&quot;&gt;\r\n\r\n    &lt;androidx.coordinatorlayout.widget.CoordinatorLayout\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;&gt;\r\n\r\n        &lt;com.google.android.material.appbar.AppBarLayout\r\n            android:id=&quot;@+id/appBarLayout&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:background=&quot;@color/white&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;parent&quot;&gt;\r\n\r\n            &lt;androidx.appcompat.widget.Toolbar\r\n                android:id=&quot;@+id/toolbar&quot;\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;?attr/actionBarSize&quot;\r\n                android:theme=&quot;@style/ThemeOverlay.AppCompat.Dark.ActionBar&quot;\r\n                app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n                app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n                app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n                app:layout_scrollFlags=&quot;scroll|enterAlways&quot;\r\n                app:popupTheme=&quot;@style/Theme.AppCompat.Light&quot;&gt;\r\n\r\n                &lt;TextView\r\n                    android:id=&quot;@+id/location&quot;\r\n                    android:layout_width=&quot;wrap_content&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:drawableStart=&quot;@drawable/ic_baseline_location_on_24red&quot;\r\n                    android:drawableEnd=&quot;@drawable/ic_baseline_keyboard_arrow_down_24&quot;\r\n                    android:fontFamily=&quot;@font/baloo_bhai&quot;\r\n                    android:text=&quot;Your Location&quot;\r\n                    android:textColor=&quot;#050505&quot;\r\n                    android:textSize=&quot;20dp&quot; /&gt;\r\n\r\n            &lt;/androidx.appcompat.widget.Toolbar&gt;\r\n\r\n            &lt;RelativeLayout\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_below=&quot;@+id/toolbar&quot;\r\n                android:padding=&quot;5dp&quot;\r\n                app:layout_behavior=&quot;@string/appbar_scrolling_view_behavior&quot;&gt;\r\n\r\n\r\n                &lt;androidx.appcompat.widget.SearchView\r\n                    android:id=&quot;@+id/searchbar&quot;\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:layout_alignParentTop=&quot;true&quot;\r\n                    android:background=&quot;@drawable/searchbardesign&quot;\r\n                    android:focusable=&quot;false&quot;\r\n                    app:iconifiedByDefault=&quot;false&quot;\r\n                    app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n                    app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n                    app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n                    app:queryHint=&quot;search here eg. rooms in delhi... &quot; /&gt;\r\n\r\n            &lt;/RelativeLayout&gt;\r\n\r\n        &lt;/com.google.android.material.appbar.AppBarLayout&gt;\r\n\r\n\r\n        &lt;androidx.swiperefreshlayout.widget.SwipeRefreshLayout\r\n            android:id=&quot;@+id/swipeFreshLayout&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;match_parent&quot;\r\n            android:layout_marginBottom=&quot;?actionBarSize&quot;\r\n            app:layout_behavior=&quot;@string/appbar_scrolling_view_behavior&quot;&gt;\r\n\r\n            &lt;androidx.core.widget.NestedScrollView\r\n                android:id=&quot;@+id/nestedScrollView&quot;\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;match_parent&quot;\r\n                android:layout_marginBottom=&quot;?actionBarSize&quot;\r\n                android:clipToPadding=&quot;true&quot;\r\n                app:layout_behavior=&quot;@string/appbar_scrolling_view_behavior&quot;\r\n                app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n                app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n                app:layout_constraintTop_toTopOf=&quot;parent&quot;&gt;\r\n\r\n                &lt;LinearLayout\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;match_parent&quot;\r\n                    android:orientation=&quot;vertical&quot;&gt;\r\n\r\n\r\n                    &lt;org.imaginativeworld.whynotimagecarousel.ImageCarousel\r\n                        android:id=&quot;@+id/carousel&quot;\r\n                        android:layout_width=&quot;match_parent&quot;\r\n                        android:layout_height=&quot;150dp&quot;\r\n                        android:layout_marginBottom=&quot;10dp&quot;\r\n                        app:autoPlay=&quot;false&quot;\r\n                        app:autoPlayDelay=&quot;3000&quot;\r\n                        app:autoWidthFixing=&quot;true&quot;\r\n                        app:carouselType=&quot;SHOWCASE&quot;\r\n                        app:imageScaleType=&quot;fitXY&quot;\r\n                        app:infiniteCarousel=&quot;true&quot;\r\n                        app:scaleOnScroll=&quot;false&quot;\r\n                        app:scalingFactor=&quot;0.15&quot;\r\n                        app:showBottomShadow=&quot;false&quot;\r\n                        app:showCaption=&quot;false&quot;\r\n                        app:showNavigationButtons=&quot;false&quot;\r\n                        app:showTopShadow=&quot;false&quot;\r\n                        app:touchToPause=&quot;true&quot; /&gt;\r\n\r\n                    &lt;androidx.recyclerview.widget.RecyclerView\r\n                        android:id=&quot;@+id/roomsRecyclerView&quot;\r\n                        android:layout_width=&quot;match_parent&quot;\r\n                        android:layout_height=&quot;match_parent&quot; \r\n                       android:layoutAnimation=&quot;@anim/layout_animation_slide_from_bottom&quot;\r\n                        android:orientation=&quot;vertical&quot;\r\n                        android:scrollbars=&quot;vertical&quot; /&gt;\r\n\r\n\r\n                    &lt;ProgressBar\r\n                        android:id=&quot;@+id/recyclerView_progress&quot;\r\n                        android:layout_width=&quot;wrap_content&quot;\r\n                        android:layout_height=&quot;wrap_content&quot;\r\n                        android:layout_gravity=&quot;center&quot;\r\n                        android:visibility=&quot;gone&quot; /&gt;\r\n\r\n\r\n                &lt;/LinearLayout&gt;\r\n\r\n\r\n            &lt;/androidx.core.widget.NestedScrollView&gt;\r\n        &lt;/androidx.swiperefreshlayout.widget.SwipeRefreshLayout&gt;\r\n\r\n\r\n    &lt;/androidx.coordinatorlayout.widget.CoordinatorLayout&gt;\r\n\r\n    &lt;/androidx.drawerlayout.widget.DrawerLayout&gt;\r\n\r\n\r\nMy Java code is something like this there is method paginationcode() in which i have written pagination code and then in the oncreate method i have written the other code \r\n\r\n\r\n      // this is the code i have written inside onCreate\r\n\r\n             recyclerViewRooms.setNestedScrollingEnabled(false);\r\n\r\n     nestedScrollView.getViewTreeObserver().addOnScrollChangedListener(new ViewTreeObserver.OnScrollChangedListener() {\r\n                @Override\r\n                public void onScrollChanged() {\r\n\r\n                    View view = (View) nestedScrollView.getChildAt(nestedScrollView.getChildCount() - 1);\r\n\r\n                    int diff = (view.getBottom() - (nestedScrollView.getHeight() + nestedScrollView\r\n                            .getScrollY()));\r\n\r\n                    if (diff == 0) {\r\n                        // your pagination code\r\n\r\n                        paginationCode();\r\n\r\n                    }\r\n                }\r\n            });\r\n\r\n    // this is the method code\r\n\r\n      public void paginationCode()\r\n       {\r\n        FirebaseFirestore firebaseFirestore = FirebaseFirestore.getInstance();\r\n        Query productsRef =  firebaseFirestore.collectionGroup(&quot;room_details&quot;);\r\n        Query query = productsRef.orderBy(&quot;location&quot;, Query.Direction.ASCENDING).limit(limit);\r\n\r\n        progressBar.setVisibility(View.VISIBLE);\r\n\r\n        query.get().addOnCompleteListener(new OnCompleteListener&lt;QuerySnapshot&gt;() {\r\n            @Override\r\n            public void onComplete(@NonNull Task&lt;QuerySnapshot&gt; task) {\r\n\r\n\r\n                if (task.isSuccessful()) {\r\n\r\n                    for (DocumentSnapshot d : task.getResult()) {\r\n                        RoomsDetails obj = d.toObject(RoomsDetails.class);\r\n                        roomsDetails.add(obj);\r\n                    }\r\n\r\n                    roomsAdapter.notifyDataSetChanged();\r\n                }\r\n                lastVisible = task.getResult().getDocuments().get(task.getResult().size() - 1);\r\n\r\n                RecyclerView.OnScrollListener onScrollListener = new RecyclerView.OnScrollListener() {\r\n                    @Override\r\n                    public void onScrollStateChanged(@NonNull RecyclerView recyclerView, int newState) {\r\n                        super.onScrollStateChanged(recyclerView, newState);\r\n                        if (newState == AbsListView.OnScrollListener.SCROLL_STATE_TOUCH_SCROLL) {\r\n                            isScrolling = true;\r\n                            progressBar.setVisibility(View.GONE);\r\n                        }\r\n                    }\r\n\r\n                    @Override\r\n                    public void onScrolled(@NonNull RecyclerView recyclerView, int dx, int dy) {\r\n                        super.onScrolled(recyclerView, dx, dy);\r\n                        LinearLayoutManager linearLayoutManager = ((LinearLayoutManager) recyclerView.getLayoutManager());\r\n                        int firstVisibleItemPosition = linearLayoutManager.findFirstVisibleItemPosition();\r\n                        int visibleItemCount = linearLayoutManager.getChildCount();\r\n                        int totalItemCount = linearLayoutManager.getItemCount();\r\n\r\n\r\n                        if (isScrolling &amp;&amp; (firstVisibleItemPosition + visibleItemCount == totalItemCount) &amp;&amp; !isLastItemReached) {\r\n                            isScrolling = false;\r\n\r\n                            progressBar.setVisibility(View.VISIBLE);\r\n\r\n                            Query nextQuery = productsRef.orderBy(&quot;location&quot;, Query.Direction.ASCENDING).startAfter(lastVisible).limit(limit);\r\n                            nextQuery.get().addOnCompleteListener(new OnCompleteListener&lt;QuerySnapshot&gt;() {\r\n                                @Override\r\n                                public void onComplete(@NonNull Task&lt;QuerySnapshot&gt; t) {\r\n                                  \r\n\r\n                                    if (t.isSuccessful()) {\r\n                                        for (DocumentSnapshot d : t.getResult()) {\r\n                                            RoomsDetails productModel = d.toObject(RoomsDetails.class);\r\n                                            roomsDetails.add(productModel);\r\n                                            Toast.makeText(getContext(), &quot;hey this is&quot;, Toast.LENGTH_SHORT).show();\r\n                                        }\r\n\r\n                                        progressBar.setVisibility(View.GONE);\r\n                                        roomsAdapter.notifyDataSetChanged();\r\n                                        lastVisible = t.getResult().getDocuments().get(t.getResult().size() - 1);\r\n\r\n\r\n                                        if (t.getResult().size() &lt; limit) {\r\n                                            isLastItemReached = true;\r\n                                        }\r\n                                    }\r\n                                }\r\n                            });\r\n\r\n                        }\r\n                    }\r\n                };\r\n\r\n                recyclerViewRooms.addOnScrollListener(onScrollListener);\r\n\r\n            }\r\n        });\r\n    }\r\n    ","title":"Pagination is not working inside nested scroll view in android java","body":"<p>I am building an app where i am fetching the data from firestore and want to use pagination but the problem is that the pagination is not working in nested scroll view. the code is something like this</p>\n<p>My XML Code is something like this:</p>\n<pre><code>&lt;androidx.drawerlayout.widget.DrawerLayout\n\nxmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\nxmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\nxmlns:tools=&quot;http://schemas.android.com/tools&quot;\nandroid:layout_width=&quot;match_parent&quot;\nandroid:layout_height=&quot;match_parent&quot;\ntools:context=&quot;.HomeFragment&quot;&gt;\n\n&lt;androidx.coordinatorlayout.widget.CoordinatorLayout\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    app:layout_constraintStart_toStartOf=&quot;parent&quot;\n    app:layout_constraintTop_toTopOf=&quot;parent&quot;&gt;\n\n    &lt;com.google.android.material.appbar.AppBarLayout\n        android:id=&quot;@+id/appBarLayout&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:background=&quot;@color/white&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;&gt;\n\n        &lt;androidx.appcompat.widget.Toolbar\n            android:id=&quot;@+id/toolbar&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;?attr/actionBarSize&quot;\n            android:theme=&quot;@style/ThemeOverlay.AppCompat.Dark.ActionBar&quot;\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\n            app:layout_constraintTop_toTopOf=&quot;parent&quot;\n            app:layout_scrollFlags=&quot;scroll|enterAlways&quot;\n            app:popupTheme=&quot;@style/Theme.AppCompat.Light&quot;&gt;\n\n            &lt;TextView\n                android:id=&quot;@+id/location&quot;\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:drawableStart=&quot;@drawable/ic_baseline_location_on_24red&quot;\n                android:drawableEnd=&quot;@drawable/ic_baseline_keyboard_arrow_down_24&quot;\n                android:fontFamily=&quot;@font/baloo_bhai&quot;\n                android:text=&quot;Your Location&quot;\n                android:textColor=&quot;#050505&quot;\n                android:textSize=&quot;20dp&quot; /&gt;\n\n        &lt;/androidx.appcompat.widget.Toolbar&gt;\n\n        &lt;RelativeLayout\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_below=&quot;@+id/toolbar&quot;\n            android:padding=&quot;5dp&quot;\n            app:layout_behavior=&quot;@string/appbar_scrolling_view_behavior&quot;&gt;\n\n\n            &lt;androidx.appcompat.widget.SearchView\n                android:id=&quot;@+id/searchbar&quot;\n                android:layout_width=&quot;match_parent&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:layout_alignParentTop=&quot;true&quot;\n                android:background=&quot;@drawable/searchbardesign&quot;\n                android:focusable=&quot;false&quot;\n                app:iconifiedByDefault=&quot;false&quot;\n                app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n                app:layout_constraintStart_toStartOf=&quot;parent&quot;\n                app:layout_constraintTop_toTopOf=&quot;parent&quot;\n                app:queryHint=&quot;search here eg. rooms in delhi... &quot; /&gt;\n\n        &lt;/RelativeLayout&gt;\n\n    &lt;/com.google.android.material.appbar.AppBarLayout&gt;\n\n\n    &lt;androidx.swiperefreshlayout.widget.SwipeRefreshLayout\n        android:id=&quot;@+id/swipeFreshLayout&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot;\n        android:layout_marginBottom=&quot;?actionBarSize&quot;\n        app:layout_behavior=&quot;@string/appbar_scrolling_view_behavior&quot;&gt;\n\n        &lt;androidx.core.widget.NestedScrollView\n            android:id=&quot;@+id/nestedScrollView&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;match_parent&quot;\n            android:layout_marginBottom=&quot;?actionBarSize&quot;\n            android:clipToPadding=&quot;true&quot;\n            app:layout_behavior=&quot;@string/appbar_scrolling_view_behavior&quot;\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\n            app:layout_constraintTop_toTopOf=&quot;parent&quot;&gt;\n\n            &lt;LinearLayout\n                android:layout_width=&quot;match_parent&quot;\n                android:layout_height=&quot;match_parent&quot;\n                android:orientation=&quot;vertical&quot;&gt;\n\n\n                &lt;org.imaginativeworld.whynotimagecarousel.ImageCarousel\n                    android:id=&quot;@+id/carousel&quot;\n                    android:layout_width=&quot;match_parent&quot;\n                    android:layout_height=&quot;150dp&quot;\n                    android:layout_marginBottom=&quot;10dp&quot;\n                    app:autoPlay=&quot;false&quot;\n                    app:autoPlayDelay=&quot;3000&quot;\n                    app:autoWidthFixing=&quot;true&quot;\n                    app:carouselType=&quot;SHOWCASE&quot;\n                    app:imageScaleType=&quot;fitXY&quot;\n                    app:infiniteCarousel=&quot;true&quot;\n                    app:scaleOnScroll=&quot;false&quot;\n                    app:scalingFactor=&quot;0.15&quot;\n                    app:showBottomShadow=&quot;false&quot;\n                    app:showCaption=&quot;false&quot;\n                    app:showNavigationButtons=&quot;false&quot;\n                    app:showTopShadow=&quot;false&quot;\n                    app:touchToPause=&quot;true&quot; /&gt;\n\n                &lt;androidx.recyclerview.widget.RecyclerView\n                    android:id=&quot;@+id/roomsRecyclerView&quot;\n                    android:layout_width=&quot;match_parent&quot;\n                    android:layout_height=&quot;match_parent&quot; \n                   android:layoutAnimation=&quot;@anim/layout_animation_slide_from_bottom&quot;\n                    android:orientation=&quot;vertical&quot;\n                    android:scrollbars=&quot;vertical&quot; /&gt;\n\n\n                &lt;ProgressBar\n                    android:id=&quot;@+id/recyclerView_progress&quot;\n                    android:layout_width=&quot;wrap_content&quot;\n                    android:layout_height=&quot;wrap_content&quot;\n                    android:layout_gravity=&quot;center&quot;\n                    android:visibility=&quot;gone&quot; /&gt;\n\n\n            &lt;/LinearLayout&gt;\n\n\n        &lt;/androidx.core.widget.NestedScrollView&gt;\n    &lt;/androidx.swiperefreshlayout.widget.SwipeRefreshLayout&gt;\n\n\n&lt;/androidx.coordinatorlayout.widget.CoordinatorLayout&gt;\n\n&lt;/androidx.drawerlayout.widget.DrawerLayout&gt;\n</code></pre>\n<p>My Java code is something like this there is method paginationcode() in which i have written pagination code and then in the oncreate method i have written the other code</p>\n<pre><code>  // this is the code i have written inside onCreate\n\n         recyclerViewRooms.setNestedScrollingEnabled(false);\n\n nestedScrollView.getViewTreeObserver().addOnScrollChangedListener(new ViewTreeObserver.OnScrollChangedListener() {\n            @Override\n            public void onScrollChanged() {\n\n                View view = (View) nestedScrollView.getChildAt(nestedScrollView.getChildCount() - 1);\n\n                int diff = (view.getBottom() - (nestedScrollView.getHeight() + nestedScrollView\n                        .getScrollY()));\n\n                if (diff == 0) {\n                    // your pagination code\n\n                    paginationCode();\n\n                }\n            }\n        });\n\n// this is the method code\n\n  public void paginationCode()\n   {\n    FirebaseFirestore firebaseFirestore = FirebaseFirestore.getInstance();\n    Query productsRef =  firebaseFirestore.collectionGroup(&quot;room_details&quot;);\n    Query query = productsRef.orderBy(&quot;location&quot;, Query.Direction.ASCENDING).limit(limit);\n\n    progressBar.setVisibility(View.VISIBLE);\n\n    query.get().addOnCompleteListener(new OnCompleteListener&lt;QuerySnapshot&gt;() {\n        @Override\n        public void onComplete(@NonNull Task&lt;QuerySnapshot&gt; task) {\n\n\n            if (task.isSuccessful()) {\n\n                for (DocumentSnapshot d : task.getResult()) {\n                    RoomsDetails obj = d.toObject(RoomsDetails.class);\n                    roomsDetails.add(obj);\n                }\n\n                roomsAdapter.notifyDataSetChanged();\n            }\n            lastVisible = task.getResult().getDocuments().get(task.getResult().size() - 1);\n\n            RecyclerView.OnScrollListener onScrollListener = new RecyclerView.OnScrollListener() {\n                @Override\n                public void onScrollStateChanged(@NonNull RecyclerView recyclerView, int newState) {\n                    super.onScrollStateChanged(recyclerView, newState);\n                    if (newState == AbsListView.OnScrollListener.SCROLL_STATE_TOUCH_SCROLL) {\n                        isScrolling = true;\n                        progressBar.setVisibility(View.GONE);\n                    }\n                }\n\n                @Override\n                public void onScrolled(@NonNull RecyclerView recyclerView, int dx, int dy) {\n                    super.onScrolled(recyclerView, dx, dy);\n                    LinearLayoutManager linearLayoutManager = ((LinearLayoutManager) recyclerView.getLayoutManager());\n                    int firstVisibleItemPosition = linearLayoutManager.findFirstVisibleItemPosition();\n                    int visibleItemCount = linearLayoutManager.getChildCount();\n                    int totalItemCount = linearLayoutManager.getItemCount();\n\n\n                    if (isScrolling &amp;&amp; (firstVisibleItemPosition + visibleItemCount == totalItemCount) &amp;&amp; !isLastItemReached) {\n                        isScrolling = false;\n\n                        progressBar.setVisibility(View.VISIBLE);\n\n                        Query nextQuery = productsRef.orderBy(&quot;location&quot;, Query.Direction.ASCENDING).startAfter(lastVisible).limit(limit);\n                        nextQuery.get().addOnCompleteListener(new OnCompleteListener&lt;QuerySnapshot&gt;() {\n                            @Override\n                            public void onComplete(@NonNull Task&lt;QuerySnapshot&gt; t) {\n                              \n\n                                if (t.isSuccessful()) {\n                                    for (DocumentSnapshot d : t.getResult()) {\n                                        RoomsDetails productModel = d.toObject(RoomsDetails.class);\n                                        roomsDetails.add(productModel);\n                                        Toast.makeText(getContext(), &quot;hey this is&quot;, Toast.LENGTH_SHORT).show();\n                                    }\n\n                                    progressBar.setVisibility(View.GONE);\n                                    roomsAdapter.notifyDataSetChanged();\n                                    lastVisible = t.getResult().getDocuments().get(t.getResult().size() - 1);\n\n\n                                    if (t.getResult().size() &lt; limit) {\n                                        isLastItemReached = true;\n                                    }\n                                }\n                            }\n                        });\n\n                    }\n                }\n            };\n\n            recyclerViewRooms.addOnScrollListener(onScrollListener);\n\n        }\n    });\n}\n</code></pre>\n"},{"tags":["java","hibernate","jpa","ehcache"],"owner":{"account_id":27325799,"reputation":1,"user_id":20838802,"display_name":"nciak"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":169,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671707147,"creation_date":1671706692,"question_id":74887524,"body_markdown":"I&#39;m trying to make my JpaReposiory method cacheable using hibernate. It is throwing exception because I&#39;m using custom Converter on enum field I guess.\r\n\r\n\r\nMy JpaRepository method where I&#39;m using org.hibernate.cacheable:\r\n\r\n\r\n```\r\n@QueryHints({@javax.persistence.QueryHint(name = &quot;org.hibernate.cacheable&quot;, value = &quot;true&quot;)})\r\n@EntityGraph(attributePaths = {&quot;ticketOffer.event.venue&quot;, &quot;ticketOffer.seller&quot;, &quot;buyer&quot;}, type = EntityGraphType.FETCH)\r\nList&lt;TicketPurchase&gt; findByOrderStatusInOrderByCreatedDateDesc(List&lt;OrderStatus&gt; orderStatuses);\r\n```\r\n\r\n\r\nOrderStatus is enum in TicketPurchase class which uses custom @Converter:\r\n\r\n\r\n```\r\n@Convert(converter = OrderStatusConverter.class)\r\nprivate OrderStatus orderStatus;\r\n```\r\n\r\nMu custom converter class:\r\n\r\n```\r\n@Converter\r\npublic class OrderStatusConverter implements AttributeConverter&lt;OrderStatus, String&gt; {\r\n    @Override\r\n    public String convertToDatabaseColumn(OrderStatus orderStatus) {\r\n        return orderStatus.getCode();\r\n    }\r\n \r\n    @Override\r\n    public OrderStatus convertToEntityAttribute(String dbData) {\r\n        return OrderStatus.fromCode(dbData);\r\n    }\r\n}\r\n```\r\n\r\nAnd my OrderStatus class:\r\n\r\n\r\n```\r\npublic enum OrderStatus {\r\n   ORDER_CANCELED_WITH_REFUND(&quot;-2&quot;), ORDER_FAILED(&quot;-1&quot;), ORDER_SUBMITTED(&quot;0&quot;), ORDER_CONFIRMED_PAYMENT(&quot;1&quot;), ORDER_IN_DELIVERY(&quot;2&quot;), ORDER_DELIVERED(&quot;3&quot;), ORDER_PAYMENT_SENT(&quot;4&quot;);\r\n   \r\n    private String code;\r\n\r\n   OrderStatus(String code) {\r\n        this.code = code;\r\n    }\r\n\r\n    public String getCode() {\r\n        return code;\r\n    }\r\n    \r\n    @Override\r\n    public String toString() {\r\n       return this.code;\r\n    }\r\n    \r\n    public static OrderStatus fromCode(String code) {\r\n        switch (code) {\r\n        case &quot;-2&quot;:\r\n            return OrderStatus.ORDER_CANCELED_WITH_REFUND;\r\n \r\n        case &quot;-1&quot;:\r\n            return OrderStatus.ORDER_FAILED;\r\n \r\n        case &quot;0&quot;:\r\n            return OrderStatus.ORDER_SUBMITTED;\r\n \r\n        case &quot;1&quot;:\r\n            return OrderStatus.ORDER_CONFIRMED_PAYMENT;\r\n            \r\n        case &quot;2&quot;:\r\n            return OrderStatus.ORDER_IN_DELIVERY;\r\n            \r\n        case &quot;3&quot;:\r\n            return OrderStatus.ORDER_DELIVERED;\r\n\r\n        case &quot;4&quot;:\r\n            return OrderStatus.ORDER_PAYMENT_SENT;\r\n            \r\n        default:\r\n            throw new IllegalArgumentException(&quot;Code [&quot; + code + &quot;] not supported.&quot;);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n\r\nException stack trace:\r\n\r\n\r\n```\r\norg.ehcache.spi.resilience.StoreAccessException: org.ehcache.spi.serialization.SerializerException: java.io.NotSerializableException: org.hibernate.metamodel.model.convert.internal.JpaAttributeConverterImpl\r\n\tat org.ehcache.core.exceptions.StorePassThroughException.handleException(StorePassThroughException.java:78)\r\n\tat org.ehcache.impl.internal.store.offheap.AbstractOffHeapStore.computeWithRetry(AbstractOffHeapStore.java:1046)\r\n\tat org.ehcache.impl.internal.store.offheap.AbstractOffHeapStore.put(AbstractOffHeapStore.java:250)\r\n\tat org.ehcache.impl.internal.store.tiering.TieredStore.put(TieredStore.java:108)\r\n\tat org.ehcache.core.Ehcache.doPut(Ehcache.java:94)\r\n\tat org.ehcache.core.EhcacheBase.put(EhcacheBase.java:189)\r\n\tat org.ehcache.jsr107.Eh107Cache.put(Eh107Cache.java:175)\r\n\tat org.hibernate.cache.jcache.internal.JCacheAccessImpl.putIntoCache(JCacheAccessImpl.java:43)\r\n\tat org.hibernate.cache.spi.support.DirectAccessRegionTemplate.putIntoCache(DirectAccessRegionTemplate.java:44)\r\n\tat org.hibernate.cache.internal.QueryResultsCacheImpl.put(QueryResultsCacheImpl.java:92)\r\n\tat org.hibernate.loader.Loader.putResultInQueryCache(Loader.java:2831)\r\n\tat org.hibernate.loader.Loader.listUsingQueryCache(Loader.java:2714)\r\n\tat org.hibernate.loader.Loader.list(Loader.java:2674)\r\n\tat org.hibernate.loader.hql.QueryLoader.list(QueryLoader.java:540)\r\n\tat org.hibernate.hql.internal.ast.QueryTranslatorImpl.list(QueryTranslatorImpl.java:400)\r\n\tat org.hibernate.engine.query.spi.HQLQueryPlan.performList(HQLQueryPlan.java:219)\r\n\tat org.hibernate.internal.SessionImpl.list(SessionImpl.java:1459)\r\n\tat org.hibernate.query.internal.AbstractProducedQuery.doList(AbstractProducedQuery.java:1649)\r\n\tat org.hibernate.query.internal.AbstractProducedQuery.list(AbstractProducedQuery.java:1617)\r\n\tat org.hibernate.query.Query.getResultList(Query.java:165)\r\n\tat org.hibernate.query.criteria.internal.compile.CriteriaQueryTypeQueryAdapter.getResultList(CriteriaQueryTypeQueryAdapter.java:76)\r\n\tat jdk.internal.reflect.GeneratedMethodAccessor307.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:564)\r\n\tat org.springframework.orm.jpa.SharedEntityManagerCreator$DeferredQueryInvocationHandler.invoke(SharedEntityManagerCreator.java:406)\r\n\tat com.sun.proxy.$Proxy267.getResultList(Unknown Source)\r\n\tat org.springframework.data.jpa.repository.query.JpaQueryExecution$CollectionExecution.doExecute(JpaQueryExecution.java:128)\r\n\tat org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:90)\r\n\tat org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:155)\r\n\tat org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:143)\r\n\tat org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:137)\r\n\tat org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:121)\r\n\tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:159)\r\n\tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:138)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n\tat org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:80)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n\tat org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:145)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n\tat org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)\r\n\tat pl.alebilet.web.cc.$Proxy237.findByOrderStatusInOrderByCreatedDateDesc(Unknown Source)\r\n\tat pl.alebilet.web.cc.CcIndexController.handleDashboardRefresh(CcIndexController.java:60)\r\n\tat pl.alebilet.web.cc.CcIndexController$$FastClassBySpringCGLIB$$da9d0e9c.invoke(&lt;generated&gt;)\r\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)\r\n\tat org.springframework.security.access.intercept.aopalliance.MethodSecurityInterceptor.invoke(MethodSecurityInterceptor.java:61)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)\r\n\tat pl.alebilet.web.cc.CcIndexController$$EnhancerBySpringCGLIB$$2ea27fc5.handleDashboardRefresh(&lt;generated&gt;)\r\n\tat jdk.internal.reflect.GeneratedMethodAccessor310.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:564)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:655)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:764)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\tat pl.alebilet.urllocale.UrlLocaleExtractorFilter.doFilter(UrlLocaleExtractorFilter.java:39)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\tat org.springframework.web.servlet.resource.ResourceUrlEncodingFilter.doFilter(ResourceUrlEncodingFilter.java:67)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)\r\n\tat org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)\r\n\tat org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\tat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)\r\n\tat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\tat org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)\r\n\tat org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\tat org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\tat org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:102)\r\n\tat org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:93)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\tat org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\tat org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\tat org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:219)\r\n\tat org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:213)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\tat pl.alebilet.filters.AjaxLoginFilter.doFilterInternal(AjaxLoginFilter.java:23)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\tat org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:219)\r\n\tat org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:213)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\tat org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:178)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)\r\n\tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\tat org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)\r\n\tat org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\tat org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)\r\n\tat org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\tat org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\tat org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)\r\n\tat org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:832)\r\nCaused by: org.ehcache.spi.serialization.SerializerException: java.io.NotSerializableException: org.hibernate.metamodel.model.convert.internal.JpaAttributeConverterImpl\r\n\tat org.ehcache.impl.serialization.PlainJavaSerializer.serialize(PlainJavaSerializer.java:51)\r\n\tat org.ehcache.impl.internal.store.offheap.portability.SerializerPortability.encode(SerializerPortability.java:39)\r\n\tat org.ehcache.shadow.org.terracotta.offheapstore.storage.PortabilityBasedStorageEngine.writeMapping(PortabilityBasedStorageEngine.java:63)\r\n\tat org.ehcache.shadow.org.terracotta.offheapstore.OffHeapHashMap.tryWriteEntry(OffHeapHashMap.java:699)\r\n\tat org.ehcache.shadow.org.terracotta.offheapstore.OffHeapHashMap.writeEntry(OffHeapHashMap.java:683)\r\n\tat org.ehcache.shadow.org.terracotta.offheapstore.OffHeapHashMap.computeWithMetadata(OffHeapHashMap.java:1958)\r\n\tat org.ehcache.shadow.org.terracotta.offheapstore.AbstractLockedOffHeapHashMap.computeWithMetadata(AbstractLockedOffHeapHashMap.java:520)\r\n\tat org.ehcache.shadow.org.terracotta.offheapstore.concurrent.AbstractConcurrentOffHeapMap.computeWithMetadata(AbstractConcurrentOffHeapMap.java:725)\r\n\tat org.ehcache.impl.internal.store.offheap.EhcacheConcurrentOffHeapClockCache.compute(EhcacheConcurrentOffHeapClockCache.java:152)\r\n\tat org.ehcache.impl.internal.store.offheap.AbstractOffHeapStore.computeWithRetry(AbstractOffHeapStore.java:1031)\r\n\t... 163 more\r\nCaused by: java.io.NotSerializableException: org.hibernate.metamodel.model.convert.internal.JpaAttributeConverterImpl\r\n\tat java.base/java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1193)\r\n\tat java.base/java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1579)\r\n\tat java.base/java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1536)\r\n\tat java.base/java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1444)\r\n\tat java.base/java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1187)\r\n\tat java.base/java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1579)\r\n\tat java.base/java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1536)\r\n\tat java.base/java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1444)\r\n\tat java.base/java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1187)\r\n\tat java.base/java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1579)\r\n\tat java.base/java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1536)\r\n\tat java.base/java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1444)\r\n\tat java.base/java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1187)\r\n\tat java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:353)\r\n\tat java.base/java.util.HashMap.internalWriteEntries(HashMap.java:1931)\r\n\tat java.base/java.util.HashMap.writeObject(HashMap.java:1501)\r\n\tat java.base/jdk.internal.reflect.GeneratedMethodAccessor198.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:564)\r\n\tat java.base/java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:1196)\r\n\tat java.base/java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1523)\r\n\tat java.base/java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1444)\r\n\tat java.base/java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1187)\r\n\tat java.base/java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1579)\r\n\tat java.base/java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1536)\r\n\tat java.base/java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1444)\r\n\tat java.base/java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1187)\r\n\tat java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:353)\r\n\tat org.ehcache.impl.serialization.PlainJavaSerializer.serialize(PlainJavaSerializer.java:49)\r\n\t... 172 more\r\n```\r\n\r\n\r\nI want to make JpaRepository method cacheable using org.hibernate.cacheable where I&#39;m using enum with custom @Converter as a query parameter. Any ideas what should I do with this?","title":"NotSerializableException when trying to add hibernate cacheable to JpaRepository method using Enum with custom @Converter","body":"<p>I'm trying to make my JpaReposiory method cacheable using hibernate. It is throwing exception because I'm using custom Converter on enum field I guess.</p>\n<p>My JpaRepository method where I'm using org.hibernate.cacheable:</p>\n<pre><code>@QueryHints({@javax.persistence.QueryHint(name = &quot;org.hibernate.cacheable&quot;, value = &quot;true&quot;)})\n@EntityGraph(attributePaths = {&quot;ticketOffer.event.venue&quot;, &quot;ticketOffer.seller&quot;, &quot;buyer&quot;}, type = EntityGraphType.FETCH)\nList&lt;TicketPurchase&gt; findByOrderStatusInOrderByCreatedDateDesc(List&lt;OrderStatus&gt; orderStatuses);\n</code></pre>\n<p>OrderStatus is enum in TicketPurchase class which uses custom @Converter:</p>\n<pre><code>@Convert(converter = OrderStatusConverter.class)\nprivate OrderStatus orderStatus;\n</code></pre>\n<p>Mu custom converter class:</p>\n<pre><code>@Converter\npublic class OrderStatusConverter implements AttributeConverter&lt;OrderStatus, String&gt; {\n    @Override\n    public String convertToDatabaseColumn(OrderStatus orderStatus) {\n        return orderStatus.getCode();\n    }\n \n    @Override\n    public OrderStatus convertToEntityAttribute(String dbData) {\n        return OrderStatus.fromCode(dbData);\n    }\n}\n</code></pre>\n<p>And my OrderStatus class:</p>\n<pre><code>public enum OrderStatus {\n   ORDER_CANCELED_WITH_REFUND(&quot;-2&quot;), ORDER_FAILED(&quot;-1&quot;), ORDER_SUBMITTED(&quot;0&quot;), ORDER_CONFIRMED_PAYMENT(&quot;1&quot;), ORDER_IN_DELIVERY(&quot;2&quot;), ORDER_DELIVERED(&quot;3&quot;), ORDER_PAYMENT_SENT(&quot;4&quot;);\n   \n    private String code;\n\n   OrderStatus(String code) {\n        this.code = code;\n    }\n\n    public String getCode() {\n        return code;\n    }\n    \n    @Override\n    public String toString() {\n       return this.code;\n    }\n    \n    public static OrderStatus fromCode(String code) {\n        switch (code) {\n        case &quot;-2&quot;:\n            return OrderStatus.ORDER_CANCELED_WITH_REFUND;\n \n        case &quot;-1&quot;:\n            return OrderStatus.ORDER_FAILED;\n \n        case &quot;0&quot;:\n            return OrderStatus.ORDER_SUBMITTED;\n \n        case &quot;1&quot;:\n            return OrderStatus.ORDER_CONFIRMED_PAYMENT;\n            \n        case &quot;2&quot;:\n            return OrderStatus.ORDER_IN_DELIVERY;\n            \n        case &quot;3&quot;:\n            return OrderStatus.ORDER_DELIVERED;\n\n        case &quot;4&quot;:\n            return OrderStatus.ORDER_PAYMENT_SENT;\n            \n        default:\n            throw new IllegalArgumentException(&quot;Code [&quot; + code + &quot;] not supported.&quot;);\n        }\n    }\n}\n</code></pre>\n<p>Exception stack trace:</p>\n<pre><code>org.ehcache.spi.resilience.StoreAccessException: org.ehcache.spi.serialization.SerializerException: java.io.NotSerializableException: org.hibernate.metamodel.model.convert.internal.JpaAttributeConverterImpl\n    at org.ehcache.core.exceptions.StorePassThroughException.handleException(StorePassThroughException.java:78)\n    at org.ehcache.impl.internal.store.offheap.AbstractOffHeapStore.computeWithRetry(AbstractOffHeapStore.java:1046)\n    at org.ehcache.impl.internal.store.offheap.AbstractOffHeapStore.put(AbstractOffHeapStore.java:250)\n    at org.ehcache.impl.internal.store.tiering.TieredStore.put(TieredStore.java:108)\n    at org.ehcache.core.Ehcache.doPut(Ehcache.java:94)\n    at org.ehcache.core.EhcacheBase.put(EhcacheBase.java:189)\n    at org.ehcache.jsr107.Eh107Cache.put(Eh107Cache.java:175)\n    at org.hibernate.cache.jcache.internal.JCacheAccessImpl.putIntoCache(JCacheAccessImpl.java:43)\n    at org.hibernate.cache.spi.support.DirectAccessRegionTemplate.putIntoCache(DirectAccessRegionTemplate.java:44)\n    at org.hibernate.cache.internal.QueryResultsCacheImpl.put(QueryResultsCacheImpl.java:92)\n    at org.hibernate.loader.Loader.putResultInQueryCache(Loader.java:2831)\n    at org.hibernate.loader.Loader.listUsingQueryCache(Loader.java:2714)\n    at org.hibernate.loader.Loader.list(Loader.java:2674)\n    at org.hibernate.loader.hql.QueryLoader.list(QueryLoader.java:540)\n    at org.hibernate.hql.internal.ast.QueryTranslatorImpl.list(QueryTranslatorImpl.java:400)\n    at org.hibernate.engine.query.spi.HQLQueryPlan.performList(HQLQueryPlan.java:219)\n    at org.hibernate.internal.SessionImpl.list(SessionImpl.java:1459)\n    at org.hibernate.query.internal.AbstractProducedQuery.doList(AbstractProducedQuery.java:1649)\n    at org.hibernate.query.internal.AbstractProducedQuery.list(AbstractProducedQuery.java:1617)\n    at org.hibernate.query.Query.getResultList(Query.java:165)\n    at org.hibernate.query.criteria.internal.compile.CriteriaQueryTypeQueryAdapter.getResultList(CriteriaQueryTypeQueryAdapter.java:76)\n    at jdk.internal.reflect.GeneratedMethodAccessor307.invoke(Unknown Source)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:564)\n    at org.springframework.orm.jpa.SharedEntityManagerCreator$DeferredQueryInvocationHandler.invoke(SharedEntityManagerCreator.java:406)\n    at com.sun.proxy.$Proxy267.getResultList(Unknown Source)\n    at org.springframework.data.jpa.repository.query.JpaQueryExecution$CollectionExecution.doExecute(JpaQueryExecution.java:128)\n    at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:90)\n    at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:155)\n    at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:143)\n    at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:137)\n    at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:121)\n    at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:159)\n    at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:138)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:80)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)\n    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:145)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)\n    at pl.alebilet.web.cc.$Proxy237.findByOrderStatusInOrderByCreatedDateDesc(Unknown Source)\n    at pl.alebilet.web.cc.CcIndexController.handleDashboardRefresh(CcIndexController.java:60)\n    at pl.alebilet.web.cc.CcIndexController$$FastClassBySpringCGLIB$$da9d0e9c.invoke(&lt;generated&gt;)\n    at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)\n    at org.springframework.security.access.intercept.aopalliance.MethodSecurityInterceptor.invoke(MethodSecurityInterceptor.java:61)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)\n    at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)\n    at pl.alebilet.web.cc.CcIndexController$$EnhancerBySpringCGLIB$$2ea27fc5.handleDashboardRefresh(&lt;generated&gt;)\n    at jdk.internal.reflect.GeneratedMethodAccessor310.invoke(Unknown Source)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:564)\n    at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067)\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)\n    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:655)\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at pl.alebilet.urllocale.UrlLocaleExtractorFilter.doFilter(UrlLocaleExtractorFilter.java:39)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.springframework.web.servlet.resource.ResourceUrlEncodingFilter.doFilter(ResourceUrlEncodingFilter.java:67)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)\n    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)\n    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)\n    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)\n    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:102)\n    at org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:93)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:219)\n    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:213)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at pl.alebilet.filters.AjaxLoginFilter.doFilterInternal(AjaxLoginFilter.java:23)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:219)\n    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:213)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:178)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)\n    at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)\n    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)\n    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)\n    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)\n    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360)\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890)\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n    at java.base/java.lang.Thread.run(Thread.java:832)\nCaused by: org.ehcache.spi.serialization.SerializerException: java.io.NotSerializableException: org.hibernate.metamodel.model.convert.internal.JpaAttributeConverterImpl\n    at org.ehcache.impl.serialization.PlainJavaSerializer.serialize(PlainJavaSerializer.java:51)\n    at org.ehcache.impl.internal.store.offheap.portability.SerializerPortability.encode(SerializerPortability.java:39)\n    at org.ehcache.shadow.org.terracotta.offheapstore.storage.PortabilityBasedStorageEngine.writeMapping(PortabilityBasedStorageEngine.java:63)\n    at org.ehcache.shadow.org.terracotta.offheapstore.OffHeapHashMap.tryWriteEntry(OffHeapHashMap.java:699)\n    at org.ehcache.shadow.org.terracotta.offheapstore.OffHeapHashMap.writeEntry(OffHeapHashMap.java:683)\n    at org.ehcache.shadow.org.terracotta.offheapstore.OffHeapHashMap.computeWithMetadata(OffHeapHashMap.java:1958)\n    at org.ehcache.shadow.org.terracotta.offheapstore.AbstractLockedOffHeapHashMap.computeWithMetadata(AbstractLockedOffHeapHashMap.java:520)\n    at org.ehcache.shadow.org.terracotta.offheapstore.concurrent.AbstractConcurrentOffHeapMap.computeWithMetadata(AbstractConcurrentOffHeapMap.java:725)\n    at org.ehcache.impl.internal.store.offheap.EhcacheConcurrentOffHeapClockCache.compute(EhcacheConcurrentOffHeapClockCache.java:152)\n    at org.ehcache.impl.internal.store.offheap.AbstractOffHeapStore.computeWithRetry(AbstractOffHeapStore.java:1031)\n    ... 163 more\nCaused by: java.io.NotSerializableException: org.hibernate.metamodel.model.convert.internal.JpaAttributeConverterImpl\n    at java.base/java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1193)\n    at java.base/java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1579)\n    at java.base/java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1536)\n    at java.base/java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1444)\n    at java.base/java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1187)\n    at java.base/java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1579)\n    at java.base/java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1536)\n    at java.base/java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1444)\n    at java.base/java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1187)\n    at java.base/java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1579)\n    at java.base/java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1536)\n    at java.base/java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1444)\n    at java.base/java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1187)\n    at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:353)\n    at java.base/java.util.HashMap.internalWriteEntries(HashMap.java:1931)\n    at java.base/java.util.HashMap.writeObject(HashMap.java:1501)\n    at java.base/jdk.internal.reflect.GeneratedMethodAccessor198.invoke(Unknown Source)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:564)\n    at java.base/java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:1196)\n    at java.base/java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1523)\n    at java.base/java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1444)\n    at java.base/java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1187)\n    at java.base/java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1579)\n    at java.base/java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1536)\n    at java.base/java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1444)\n    at java.base/java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1187)\n    at java.base/java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:353)\n    at org.ehcache.impl.serialization.PlainJavaSerializer.serialize(PlainJavaSerializer.java:49)\n    ... 172 more\n</code></pre>\n<p>I want to make JpaRepository method cacheable using org.hibernate.cacheable where I'm using enum with custom @Converter as a query parameter. Any ideas what should I do with this?</p>\n"},{"tags":["java","android"],"answers":[{"tags":[],"owner":{"account_id":4750297,"reputation":592,"user_id":3840506,"accept_rate":100,"display_name":"Adrian David Smith"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1455788493,"creation_date":1455788493,"answer_id":35477783,"question_id":35404931,"body_markdown":"So after what feels like forever I have finally solved the issue.\r\n\r\nThe keystore used was a file that was originally converted from a .p12 file. Even though that new keystore file contained the correct fingerprints and correct format, there is a bug in Android Studio where it doesn&#39;t sign it with the correct fingerprints if the .p12 file was not converted correctly or Android Studio doesn&#39;t pass the correct values when signing the APK with this keystore file.\r\n\r\nYou will need to sign the APK manually. And this is kind of a mission to do. So I have made an automated script that will do it for you.\r\n\r\nhttps://github.com/SierraII/morphthis\r\n\r\nThis script will sign APK files with the specified keystore file. The APK file will be signed whether it has been previously signed or not.\r\n\r\nAnyone who runs into this issue, I hope this saves you 3 days!","title":"KeyStore Signing with Different Fingerprint","body":"<p>So after what feels like forever I have finally solved the issue.</p>\n\n<p>The keystore used was a file that was originally converted from a .p12 file. Even though that new keystore file contained the correct fingerprints and correct format, there is a bug in Android Studio where it doesn't sign it with the correct fingerprints if the .p12 file was not converted correctly or Android Studio doesn't pass the correct values when signing the APK with this keystore file.</p>\n\n<p>You will need to sign the APK manually. And this is kind of a mission to do. So I have made an automated script that will do it for you.</p>\n\n<p><a href=\"https://github.com/SierraII/morphthis\" rel=\"nofollow\">https://github.com/SierraII/morphthis</a></p>\n\n<p>This script will sign APK files with the specified keystore file. The APK file will be signed whether it has been previously signed or not.</p>\n\n<p>Anyone who runs into this issue, I hope this saves you 3 days!</p>\n"}],"owner":{"account_id":4750297,"reputation":592,"user_id":3840506,"accept_rate":100,"display_name":"Adrian David Smith"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":807,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":35477783,"answer_count":1,"score":0,"last_activity_date":1671706507,"creation_date":1455526311,"question_id":35404931,"body_markdown":"I am having a weird issue when signing and uploading an Android app.\r\n\r\nWe received this JKS file. And when I run:  \r\n`keytool -list -v -keystore key.jks -storepass THE_PASSWORD -keypass THE_PASSWORD`\r\n\r\nTo list all the information about it, I get the following:  \r\n\r\n    Keystore type: JKS\r\n    Keystore provider: SUN\r\n\r\n    Your keystore contains 1 entry\r\n\r\n    Alias name: 1\r\n    Creation date: 12 Feb 2016\r\n    Entry type: PrivateKeyEntry\r\n    Certificate chain length: 1\r\n    Certificate[1]:\r\n    Owner: CN=..., OU=..., O=..., C=ZA\r\n    Issuer: CN=..., OU=..., O=..., C=ZA\r\n    Serial number: ********\r\n    Valid from: Sun Apr 28 17:21:31 SAST 2013 until: Thu Apr 29 17:21:31 SAST 2038\r\n    Certificate fingerprints:\r\n\t     MD5:  D5:A5:CF:***\r\n\t     SHA1: 55:18:5F:***\r\n\t     SHA256: DC:36:CF:***\r\n\t     Signature algorithm name: SHA1withRSA\r\n\t     Version: 3\r\n\r\n    Extensions:\r\n\r\n    #1: ObjectId: 2.5.29.37 Criticality=false\r\n    ExtendedKeyUsages [\r\n      codeSigning\r\n    ]\r\n\r\n\r\nHowever, when using Android Studio, I try to generate a signed APK and use this JKS file, the build and apk gets produced, except with a different key? \r\n\r\nWhen I run:\r\n\r\n    keytool -list -printcert -jarfile app-release.apk\r\n\r\nI get the following output:\r\n\r\n    Owner: CN=..., OU=..., O=..., C=ZA\r\n    Issuer: CN=..., OU=..., O=..., C=ZA\r\n    Serial number: ********\r\n    Valid from: Sun Apr 28 17:21:31 SAST 2013 until: Thu Apr 29 17:21:31 SAST 2038\r\n    Certificate fingerprints:\r\n             MD5:  EC:FB:D6:***\r\n             SHA1: 40:A3:F0:***\r\n             SHA256: 40:41:3C:***\r\n             Signature algorithm name: SHA1withRSA\r\n             Version: 3\r\n\r\n    Extensions: \r\n\r\n    #1: ObjectId: 2.5.29.37 Criticality=false\r\n    ExtendedKeyUsages [\r\n      codeSigning\r\n    ]\r\n\r\nNotice all information is the same... the serial number, owner, issuer, everything except the fingerprints.\r\n\r\nI am not signing it in debug mode, my Gradle files are pointing to the correct JKS file. \r\n\r\nAlso for testing purposes I have tried a different JKS file. And viewed the JKS file compared to the APK and all information is correct. Including the SHA1 key.\r\n\r\nIs there anything that I can try or anything small that I must be missing?  \r\nThank you all in advance.\r\n","title":"KeyStore Signing with Different Fingerprint","body":"<p>I am having a weird issue when signing and uploading an Android app.</p>\n<p>We received this JKS file. And when I run:<br />\n<code>keytool -list -v -keystore key.jks -storepass THE_PASSWORD -keypass THE_PASSWORD</code></p>\n<p>To list all the information about it, I get the following:</p>\n<pre><code>Keystore type: JKS\nKeystore provider: SUN\n\nYour keystore contains 1 entry\n\nAlias name: 1\nCreation date: 12 Feb 2016\nEntry type: PrivateKeyEntry\nCertificate chain length: 1\nCertificate[1]:\nOwner: CN=..., OU=..., O=..., C=ZA\nIssuer: CN=..., OU=..., O=..., C=ZA\nSerial number: ********\nValid from: Sun Apr 28 17:21:31 SAST 2013 until: Thu Apr 29 17:21:31 SAST 2038\nCertificate fingerprints:\n     MD5:  D5:A5:CF:***\n     SHA1: 55:18:5F:***\n     SHA256: DC:36:CF:***\n     Signature algorithm name: SHA1withRSA\n     Version: 3\n\nExtensions:\n\n#1: ObjectId: 2.5.29.37 Criticality=false\nExtendedKeyUsages [\n  codeSigning\n]\n</code></pre>\n<p>However, when using Android Studio, I try to generate a signed APK and use this JKS file, the build and apk gets produced, except with a different key?</p>\n<p>When I run:</p>\n<pre><code>keytool -list -printcert -jarfile app-release.apk\n</code></pre>\n<p>I get the following output:</p>\n<pre><code>Owner: CN=..., OU=..., O=..., C=ZA\nIssuer: CN=..., OU=..., O=..., C=ZA\nSerial number: ********\nValid from: Sun Apr 28 17:21:31 SAST 2013 until: Thu Apr 29 17:21:31 SAST 2038\nCertificate fingerprints:\n         MD5:  EC:FB:D6:***\n         SHA1: 40:A3:F0:***\n         SHA256: 40:41:3C:***\n         Signature algorithm name: SHA1withRSA\n         Version: 3\n\nExtensions: \n\n#1: ObjectId: 2.5.29.37 Criticality=false\nExtendedKeyUsages [\n  codeSigning\n]\n</code></pre>\n<p>Notice all information is the same... the serial number, owner, issuer, everything except the fingerprints.</p>\n<p>I am not signing it in debug mode, my Gradle files are pointing to the correct JKS file.</p>\n<p>Also for testing purposes I have tried a different JKS file. And viewed the JKS file compared to the APK and all information is correct. Including the SHA1 key.</p>\n<p>Is there anything that I can try or anything small that I must be missing?<br />\nThank you all in advance.</p>\n"},{"tags":["java","android","android-webview"],"answers":[{"tags":[],"owner":{"account_id":21848852,"reputation":87,"user_id":16141229,"display_name":"Ayaka_Ago"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1626798625,"creation_date":1626798625,"answer_id":68458371,"question_id":68435271,"body_markdown":"Do you override [WebChromeClient#onShowFileChooser()][1] method?\r\n\r\nTo override this method, you also need to override [Activity#onActityResult()][2]&#185; to get results from [SAF][3] *(or other file select application)*.\r\n\r\n```java\r\npublic class WebViewActivity extends Activity\r\n{\r\n    //chooser callbak\r\n    private ValueCallback fileCallback;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState)\r\n    {\r\n        super.onCreate(savedInstanceState);\r\n        WebView web=new WebView(this);\r\n        setContentView(web);\r\n        //set\r\n        web.setWebChromeClient(new MyWebChrome());\r\n\r\n    }\r\n\r\n    \r\n    private class MyWebChrome extends WebChromeClient {\r\n        @Override\r\n        public boolean onShowFileChooser(WebView v, ValueCallback back, WebChromeClient.FileChooserParams param) {\r\n            //assign value\r\n            fileCallback=back;\r\n            //launch chooser activity\r\n            //createIntent will automatically set intent parameters for choosing file\r\n            startActivityForResult(param.createIntent(),0);\r\n            return true;\r\n        }\r\n    }\r\n\r\n    @Override\r\n    protected void onActivityResult(int requestCode, int resultCode, Intent data)\r\n    {\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n        if (requestCode!=0||fileCallback==null){\r\n            return;\r\n        }\r\n        //send result, then it&#39;s done\r\n        fileCallback.onReceiveValue(\r\n            WebChromeClient.FileChooserParams.parseResult(resultCode,data)\r\n        );\r\n        fileCallback=null;\r\n    }\r\n    \r\n}\r\n\r\n```\r\n\r\nhope it work\r\n\r\n----------\r\n&#185;**For [AppCompatActivity][4], prefer using [```registerForActivityResult```][5]** (I used OnActivityResult because I didn&#39;t use AppCompatActivity)\r\n\r\n\r\n  [1]: https://developer.android.com/reference/android/webkit/WebChromeClient#onShowFileChooser(android.webkit.WebView,%20android.webkit.ValueCallback%3Candroid.net.Uri[]%3E,%20android.webkit.WebChromeClient.FileChooserParams)\r\n  [2]: https://developer.android.com/reference/android/app/Activity#onActivityResult(int,%20int,%20android.content.Intent)\r\n  [3]: https://developer.android.com/guide/topics/providers/document-provider\r\n  [4]: https://developer.android.com/reference/androidx/appcompat/app/AppCompatActivity?hl=en\r\n  [5]: https://developer.android.com/reference/androidx/activity/result/ActivityResultCaller#registerForActivityResult(androidx.activity.result.contract.ActivityResultContract%3CI,%20O%3E,%20androidx.activity.result.ActivityResultCallback%3CO%3E)\r\n","title":"How to Enable File Upload and Insert Image in Android WebView for xenforo forum site","body":"<p>Do you override <a href=\"https://developer.android.com/reference/android/webkit/WebChromeClient#onShowFileChooser(android.webkit.WebView,%20android.webkit.ValueCallback%3Candroid.net.Uri%5B%5D%3E,%20android.webkit.WebChromeClient.FileChooserParams)\" rel=\"nofollow noreferrer\">WebChromeClient#onShowFileChooser()</a> method?</p>\n<p>To override this method, you also need to override <a href=\"https://developer.android.com/reference/android/app/Activity#onActivityResult(int,%20int,%20android.content.Intent)\" rel=\"nofollow noreferrer\">Activity#onActityResult()</a> to get results from <a href=\"https://developer.android.com/guide/topics/providers/document-provider\" rel=\"nofollow noreferrer\">SAF</a> <em>(or other file select application)</em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class WebViewActivity extends Activity\n{\n    //chooser callbak\n    private ValueCallback fileCallback;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState)\n    {\n        super.onCreate(savedInstanceState);\n        WebView web=new WebView(this);\n        setContentView(web);\n        //set\n        web.setWebChromeClient(new MyWebChrome());\n\n    }\n\n    \n    private class MyWebChrome extends WebChromeClient {\n        @Override\n        public boolean onShowFileChooser(WebView v, ValueCallback back, WebChromeClient.FileChooserParams param) {\n            //assign value\n            fileCallback=back;\n            //launch chooser activity\n            //createIntent will automatically set intent parameters for choosing file\n            startActivityForResult(param.createIntent(),0);\n            return true;\n        }\n    }\n\n    @Override\n    protected void onActivityResult(int requestCode, int resultCode, Intent data)\n    {\n        super.onActivityResult(requestCode, resultCode, data);\n        if (requestCode!=0||fileCallback==null){\n            return;\n        }\n        //send result, then it's done\n        fileCallback.onReceiveValue(\n            WebChromeClient.FileChooserParams.parseResult(resultCode,data)\n        );\n        fileCallback=null;\n    }\n    \n}\n\n</code></pre>\n<p>hope it work</p>\n<hr />\n<p><strong>For <a href=\"https://developer.android.com/reference/androidx/appcompat/app/AppCompatActivity?hl=en\" rel=\"nofollow noreferrer\">AppCompatActivity</a>, prefer using <a href=\"https://developer.android.com/reference/androidx/activity/result/ActivityResultCaller#registerForActivityResult(androidx.activity.result.contract.ActivityResultContract%3CI,%20O%3E,%20androidx.activity.result.ActivityResultCallback%3CO%3E)\" rel=\"nofollow noreferrer\"><code>registerForActivityResult</code></a></strong> (I used OnActivityResult because I didn't use AppCompatActivity)</p>\n"}],"owner":{"account_id":22243670,"reputation":21,"user_id":16477706,"display_name":"Na na"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1012,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1671706434,"creation_date":1626670558,"question_id":68435271,"body_markdown":"I am trying to build a webview for a xenforo forum site. everything works ok except for &quot;attach file&quot; and &quot;insert image&quot; feature when trying to post in a thread. Please see attched image where I want to enable this feature on the app -&gt; [xf][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/nszAB.png\r\n\r\nWhat code (and precisely where please) do I need to add to enable this on the Android Webview.\r\n\r\nactivity_main.xml:\r\n\r\n```\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        tools:context=&quot;.MainActivity&quot;&gt;\r\n\r\n        &lt;androidx.swiperefreshlayout.widget.SwipeRefreshLayout\r\n            android:id=&quot;@+id/swipeContainer&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;match_parent&quot;&gt;\r\n\r\n            &lt;WebView\r\n                android:layout_width=&quot;fill_parent&quot;\r\n                android:layout_height=&quot;fill_parent&quot;\r\n                android:id=&quot;@+id/webView&quot;\r\n                android:layout_alignParentTop=&quot;true&quot;\r\n                android:layout_alignParentLeft=&quot;true&quot;\r\n                android:layout_alignParentStart=&quot;true&quot;\r\n                android:layout_alignParentBottom=&quot;true&quot;\r\n                android:layout_alignParentRight=&quot;true&quot;\r\n                android:layout_alignParentEnd=&quot;true&quot;\r\n                tools:ignore=&quot;MissingConstraints&quot; /&gt;\r\n\r\n        &lt;/androidx.swiperefreshlayout.widget.SwipeRefreshLayout&gt;\r\n\r\n    &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n\r\n```\r\n\r\nAndroidManifest:\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    package=&quot;com.example.MYAPPNAME&quot;&gt;\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.CAMERA&quot;/&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot;/&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;/&gt;\r\n\r\n    &lt;application\r\n        android:allowBackup=&quot;true&quot;\r\n        android:icon=&quot;@mipmap/ic_launcher&quot;\r\n        android:label=&quot;@string/app_name&quot;\r\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\r\n        android:supportsRtl=&quot;true&quot;\r\n        android:theme=&quot;@style/Theme.MYAPPNAME&quot;&gt;\r\n        &lt;activity android:name=&quot;.MainActivity&quot;&gt;&lt;/activity&gt;\r\n        &lt;activity android:name=&quot;.SplashActivity&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n\r\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/activity&gt;\r\n    &lt;/application&gt;\r\n\r\n&lt;/manifest&gt;\r\n```\r\n\r\nMainActivity.java\r\n\r\n```\r\npackage com.example.MYAPPNAME;\r\n\r\nimport android.app.AlertDialog;\r\nimport android.content.Context;\r\nimport android.content.DialogInterface;\r\nimport android.content.Intent;\r\nimport android.net.ConnectivityManager;\r\nimport android.net.NetworkInfo;\r\nimport android.net.Uri;\r\nimport android.os.Bundle;\r\nimport android.provider.MediaStore;\r\nimport android.util.Log;\r\nimport android.webkit.ValueCallback;\r\nimport android.webkit.WebChromeClient;\r\nimport android.webkit.WebView;\r\nimport android.webkit.WebViewClient;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.swiperefreshlayout.widget.SwipeRefreshLayout;\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    String websiteURL = &quot;https://www.MYAPPURL.com&quot;; // sets web url\r\n    private WebView webview;\r\n    SwipeRefreshLayout mySwipeRefreshLayout;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        if( ! CheckNetwork.isInternetAvailable(this)) //returns true if internet available\r\n        {\r\n            //if there is no internet do this\r\n            setContentView(R.layout.activity_main);\r\n            //Toast.makeText(this,&quot;No Internet Connection, Chris&quot;,Toast.LENGTH_LONG).show();\r\n\r\n            new AlertDialog.Builder(this) //alert the person knowing they are about to close\r\n                    .setTitle(&quot;No internet connection available&quot;)\r\n                    .setMessage(&quot;Please Check you&#39;re Mobile data or Wifi network.&quot;)\r\n                    .setPositiveButton(&quot;Ok&quot;, new DialogInterface.OnClickListener() {\r\n                        @Override\r\n                        public void onClick(DialogInterface dialog, int which) {\r\n                            finish();\r\n                        }\r\n                    })\r\n                    //.setNegativeButton(&quot;No&quot;, null)\r\n                    .show();\r\n\r\n        }\r\n        else\r\n        {\r\n            //Webview stuff\r\n            webview = findViewById(R.id.webView);\r\n            webview.getSettings().setJavaScriptEnabled(true);\r\n            webview.getSettings().setDomStorageEnabled(true);\r\n            webview.setOverScrollMode(WebView.OVER_SCROLL_NEVER);\r\n            webview.loadUrl(websiteURL);\r\n            webview.setWebViewClient(new WebViewClientDemo());\r\n\r\n        }\r\n\r\n        //Swipe to refresh functionality\r\n        mySwipeRefreshLayout = (SwipeRefreshLayout)this.findViewById(R.id.swipeContainer);\r\n\r\n        mySwipeRefreshLayout.setOnRefreshListener(\r\n                new SwipeRefreshLayout.OnRefreshListener() {\r\n                    @Override\r\n                    public void onRefresh() {\r\n                        webview.reload();\r\n                    }\r\n                }\r\n        );\r\n\r\n    }\r\n\r\n\r\n    private class WebViewClientDemo extends WebViewClient {\r\n        private WebView wv;\r\n        private String url;\r\n\r\n        @Override\r\n        //Keep webview in app when clicking links\r\n        public boolean shouldOverrideUrlLoading(WebView view, String url) {\r\n            if(url.startsWith(&quot;tel:&quot;) || url.startsWith(&quot;whatsapp:&quot;)) {\r\n                Intent intent = new Intent(Intent.ACTION_VIEW);\r\n                intent.setData(Uri.parse(url));\r\n                startActivity(intent);\r\n                webview.goBack();\r\n                return true;\r\n            }\r\n            return false;\r\n        }\r\n        @Override\r\n        public void onPageFinished(WebView view, String url) {\r\n            super.onPageFinished(view, url);\r\n            mySwipeRefreshLayout.setRefreshing(false);\r\n        }\r\n\r\n    }\r\n\r\n    //set back button functionality\r\n    @Override\r\n    public void onBackPressed() { //if user presses the back button do this\r\n        if (webview.isFocused() &amp;&amp; webview.canGoBack()) { //check if in webview and the user can go back\r\n            webview.goBack(); //go back in webview\r\n        } else { //do this if the webview cannot go back any further\r\n\r\n            new AlertDialog.Builder(this) //alert the person knowing they are about to close\r\n                    .setTitle(&quot;EXIT&quot;)\r\n                    .setMessage(&quot;Are you sure. You want to close this app?&quot;)\r\n                    .setPositiveButton(&quot;Yes&quot;, new DialogInterface.OnClickListener() {\r\n                        @Override\r\n                        public void onClick(DialogInterface dialog, int which) {\r\n                            finish();\r\n                        }\r\n                    })\r\n                    .setNegativeButton(&quot;No&quot;, null)\r\n                    .show();\r\n        }\r\n    }\r\n\r\n\r\n}\r\n\r\nclass CheckNetwork {\r\n\r\n    private static final String TAG = CheckNetwork.class.getSimpleName();\r\n\r\n    public static boolean isInternetAvailable(Context context)\r\n    {\r\n        NetworkInfo info = (NetworkInfo) ((ConnectivityManager)\r\n                context.getSystemService(Context.CONNECTIVITY_SERVICE)).getActiveNetworkInfo();\r\n\r\n        if (info == null)\r\n        {\r\n            Log.d(TAG,&quot;no internet connection&quot;);\r\n            return false;\r\n        }\r\n        else\r\n        {\r\n            if(info.isConnected())\r\n            {\r\n                Log.d(TAG,&quot; internet connection available...&quot;);\r\n                return true;\r\n            }\r\n            else\r\n            {\r\n                Log.d(TAG,&quot; internet connection&quot;);\r\n                return true;\r\n            }\r\n\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n","title":"How to Enable File Upload and Insert Image in Android WebView for xenforo forum site","body":"<p>I am trying to build a webview for a xenforo forum site. everything works ok except for &quot;attach file&quot; and &quot;insert image&quot; feature when trying to post in a thread. Please see attched image where I want to enable this feature on the app -&gt; <a href=\"https://i.stack.imgur.com/nszAB.png\" rel=\"nofollow noreferrer\">xf</a></p>\n<p>What code (and precisely where please) do I need to add to enable this on the Android Webview.</p>\n<p>activity_main.xml:</p>\n<pre><code>\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n    &lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot;\n        tools:context=&quot;.MainActivity&quot;&gt;\n\n        &lt;androidx.swiperefreshlayout.widget.SwipeRefreshLayout\n            android:id=&quot;@+id/swipeContainer&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;match_parent&quot;&gt;\n\n            &lt;WebView\n                android:layout_width=&quot;fill_parent&quot;\n                android:layout_height=&quot;fill_parent&quot;\n                android:id=&quot;@+id/webView&quot;\n                android:layout_alignParentTop=&quot;true&quot;\n                android:layout_alignParentLeft=&quot;true&quot;\n                android:layout_alignParentStart=&quot;true&quot;\n                android:layout_alignParentBottom=&quot;true&quot;\n                android:layout_alignParentRight=&quot;true&quot;\n                android:layout_alignParentEnd=&quot;true&quot;\n                tools:ignore=&quot;MissingConstraints&quot; /&gt;\n\n        &lt;/androidx.swiperefreshlayout.widget.SwipeRefreshLayout&gt;\n\n    &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n\n</code></pre>\n<p>AndroidManifest:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    package=&quot;com.example.MYAPPNAME&quot;&gt;\n\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.CAMERA&quot;/&gt;\n    &lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot;/&gt;\n    &lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;/&gt;\n\n    &lt;application\n        android:allowBackup=&quot;true&quot;\n        android:icon=&quot;@mipmap/ic_launcher&quot;\n        android:label=&quot;@string/app_name&quot;\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\n        android:supportsRtl=&quot;true&quot;\n        android:theme=&quot;@style/Theme.MYAPPNAME&quot;&gt;\n        &lt;activity android:name=&quot;.MainActivity&quot;&gt;&lt;/activity&gt;\n        &lt;activity android:name=&quot;.SplashActivity&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n    &lt;/application&gt;\n\n&lt;/manifest&gt;\n</code></pre>\n<p>MainActivity.java</p>\n<pre><code>package com.example.MYAPPNAME;\n\nimport android.app.AlertDialog;\nimport android.content.Context;\nimport android.content.DialogInterface;\nimport android.content.Intent;\nimport android.net.ConnectivityManager;\nimport android.net.NetworkInfo;\nimport android.net.Uri;\nimport android.os.Bundle;\nimport android.provider.MediaStore;\nimport android.util.Log;\nimport android.webkit.ValueCallback;\nimport android.webkit.WebChromeClient;\nimport android.webkit.WebView;\nimport android.webkit.WebViewClient;\n\nimport androidx.appcompat.app.AppCompatActivity;\nimport androidx.swiperefreshlayout.widget.SwipeRefreshLayout;\n\npublic class MainActivity extends AppCompatActivity {\n\n    String websiteURL = &quot;https://www.MYAPPURL.com&quot;; // sets web url\n    private WebView webview;\n    SwipeRefreshLayout mySwipeRefreshLayout;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        if( ! CheckNetwork.isInternetAvailable(this)) //returns true if internet available\n        {\n            //if there is no internet do this\n            setContentView(R.layout.activity_main);\n            //Toast.makeText(this,&quot;No Internet Connection, Chris&quot;,Toast.LENGTH_LONG).show();\n\n            new AlertDialog.Builder(this) //alert the person knowing they are about to close\n                    .setTitle(&quot;No internet connection available&quot;)\n                    .setMessage(&quot;Please Check you're Mobile data or Wifi network.&quot;)\n                    .setPositiveButton(&quot;Ok&quot;, new DialogInterface.OnClickListener() {\n                        @Override\n                        public void onClick(DialogInterface dialog, int which) {\n                            finish();\n                        }\n                    })\n                    //.setNegativeButton(&quot;No&quot;, null)\n                    .show();\n\n        }\n        else\n        {\n            //Webview stuff\n            webview = findViewById(R.id.webView);\n            webview.getSettings().setJavaScriptEnabled(true);\n            webview.getSettings().setDomStorageEnabled(true);\n            webview.setOverScrollMode(WebView.OVER_SCROLL_NEVER);\n            webview.loadUrl(websiteURL);\n            webview.setWebViewClient(new WebViewClientDemo());\n\n        }\n\n        //Swipe to refresh functionality\n        mySwipeRefreshLayout = (SwipeRefreshLayout)this.findViewById(R.id.swipeContainer);\n\n        mySwipeRefreshLayout.setOnRefreshListener(\n                new SwipeRefreshLayout.OnRefreshListener() {\n                    @Override\n                    public void onRefresh() {\n                        webview.reload();\n                    }\n                }\n        );\n\n    }\n\n\n    private class WebViewClientDemo extends WebViewClient {\n        private WebView wv;\n        private String url;\n\n        @Override\n        //Keep webview in app when clicking links\n        public boolean shouldOverrideUrlLoading(WebView view, String url) {\n            if(url.startsWith(&quot;tel:&quot;) || url.startsWith(&quot;whatsapp:&quot;)) {\n                Intent intent = new Intent(Intent.ACTION_VIEW);\n                intent.setData(Uri.parse(url));\n                startActivity(intent);\n                webview.goBack();\n                return true;\n            }\n            return false;\n        }\n        @Override\n        public void onPageFinished(WebView view, String url) {\n            super.onPageFinished(view, url);\n            mySwipeRefreshLayout.setRefreshing(false);\n        }\n\n    }\n\n    //set back button functionality\n    @Override\n    public void onBackPressed() { //if user presses the back button do this\n        if (webview.isFocused() &amp;&amp; webview.canGoBack()) { //check if in webview and the user can go back\n            webview.goBack(); //go back in webview\n        } else { //do this if the webview cannot go back any further\n\n            new AlertDialog.Builder(this) //alert the person knowing they are about to close\n                    .setTitle(&quot;EXIT&quot;)\n                    .setMessage(&quot;Are you sure. You want to close this app?&quot;)\n                    .setPositiveButton(&quot;Yes&quot;, new DialogInterface.OnClickListener() {\n                        @Override\n                        public void onClick(DialogInterface dialog, int which) {\n                            finish();\n                        }\n                    })\n                    .setNegativeButton(&quot;No&quot;, null)\n                    .show();\n        }\n    }\n\n\n}\n\nclass CheckNetwork {\n\n    private static final String TAG = CheckNetwork.class.getSimpleName();\n\n    public static boolean isInternetAvailable(Context context)\n    {\n        NetworkInfo info = (NetworkInfo) ((ConnectivityManager)\n                context.getSystemService(Context.CONNECTIVITY_SERVICE)).getActiveNetworkInfo();\n\n        if (info == null)\n        {\n            Log.d(TAG,&quot;no internet connection&quot;);\n            return false;\n        }\n        else\n        {\n            if(info.isConnected())\n            {\n                Log.d(TAG,&quot; internet connection available...&quot;);\n                return true;\n            }\n            else\n            {\n                Log.d(TAG,&quot; internet connection&quot;);\n                return true;\n            }\n\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","selenium-webdriver","ui-automation","ole","browser-automation"],"owner":{"account_id":27259735,"reputation":11,"user_id":20782747,"display_name":"Omkar Shrotri"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":178,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1671706245,"creation_date":1671095963,"question_id":74809254,"body_markdown":"[![enter image description here][1]][1]\r\n\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Fa7FV.png\r\n  [2]: https://i.stack.imgur.com/h5JdU.png\r\n\r\n\r\nHello All\r\n\r\n    Hey,it&#39;s omkaar as a software tester(Automation Selenium+Java). \r\nThere is a scinario of reading excel file using Automation (selenium+java)which having .xls (Microsoft Excel 97-2003 Worksheet) file extension.\r\nNow i am not able to read excel file due to the error/popup massege(Please have look attched screenshot) which is obsereved while opening that file manually. \r\n\r\n\r\nSteps which i have followed to read excel file.\r\n1) Created object of file class and give the refference of that perticular file.\r\n2) Created workbook instance.\r\n3) Created sheet, row and cell instance.\r\n4) Used &quot;for each loop&quot; to iterate through each cell to get the data.\r\n(You can also go through attached code.)\r\n\r\nhere is my code.\r\npublic class WorkWithXLSFile extends BaseTest {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\t\r\n\t\ttry {\r\n\t\t\tFile file = new File(&quot;C:\\\\Users\\\\Omkar Shrotri\\\\Downloads\\\\Ticketdetails.xls&quot;);\r\n\r\n\t\t\tif (file.exists()) {\r\n\r\n\t\t\t\tFileInputStream fis = new FileInputStream(file);\r\n\r\n\t\t\t\tHSSFWorkbook wb = new HSSFWorkbook(fis);\r\n\r\n\t\t\t\tHSSFSheet sheet1 = wb.getSheetAt(0);\r\n\r\n\t\t\t\tDataFormatter formatter11 = new DataFormatter();\r\n\r\n\t\t\t\tfor (int i = 0; i &lt;= 7; i++) {\r\n\t\t\t\t\tString excel_data = formatter11.formatCellValue(sheet1.getRow(2).getCell(i));\r\n\t\t\t\t\t// int s = i+1;\r\n\t\t\t\t\tString web_data = driver.findElement(By.xpath(&quot;//table/tbody/tr[1]/td[&#39;&quot; + i + &quot;&#39;]&quot;)).getText();\r\n\t\t\t\t\tif (excel_data.equals(web_data)) {\r\n\t\t\t\t\t\tSystem.out.println(&quot;Passed&quot;);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t} catch (Exception NotOLE2FileException) {\r\n\t\t\tSystem.out.print(NotOLE2FileException);\r\n\t\t\t// handle popup\r\n\t\t\t// try code\r\n\t\t}\r\n\t\t\r\n\r\n\t}\r\n\r\n}","title":"how to solve - Getting OLE2 exception while opening .xls excel file using selenium+java","body":"<p><a href=\"https://i.stack.imgur.com/Fa7FV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Fa7FV.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/h5JdU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/h5JdU.png\" alt=\"enter image description here\" /></a></p>\n<p>Hello All</p>\n<pre><code>Hey,it's omkaar as a software tester(Automation Selenium+Java). \n</code></pre>\n<p>There is a scinario of reading excel file using Automation (selenium+java)which having .xls (Microsoft Excel 97-2003 Worksheet) file extension.\nNow i am not able to read excel file due to the error/popup massege(Please have look attched screenshot) which is obsereved while opening that file manually.</p>\n<p>Steps which i have followed to read excel file.</p>\n<ol>\n<li>Created object of file class and give the refference of that perticular file.</li>\n<li>Created workbook instance.</li>\n<li>Created sheet, row and cell instance.</li>\n<li>Used &quot;for each loop&quot; to iterate through each cell to get the data.\n(You can also go through attached code.)</li>\n</ol>\n<p>here is my code.\npublic class WorkWithXLSFile extends BaseTest {</p>\n<pre><code>public static void main(String[] args) {\n    \n    try {\n        File file = new File(&quot;C:\\\\Users\\\\Omkar Shrotri\\\\Downloads\\\\Ticketdetails.xls&quot;);\n\n        if (file.exists()) {\n\n            FileInputStream fis = new FileInputStream(file);\n\n            HSSFWorkbook wb = new HSSFWorkbook(fis);\n\n            HSSFSheet sheet1 = wb.getSheetAt(0);\n\n            DataFormatter formatter11 = new DataFormatter();\n\n            for (int i = 0; i &lt;= 7; i++) {\n                String excel_data = formatter11.formatCellValue(sheet1.getRow(2).getCell(i));\n                // int s = i+1;\n                String web_data = driver.findElement(By.xpath(&quot;//table/tbody/tr[1]/td['&quot; + i + &quot;']&quot;)).getText();\n                if (excel_data.equals(web_data)) {\n                    System.out.println(&quot;Passed&quot;);\n                }\n            }\n\n        }\n    } catch (Exception NotOLE2FileException) {\n        System.out.print(NotOLE2FileException);\n        // handle popup\n        // try code\n    }\n    \n\n}\n</code></pre>\n<p>}</p>\n"},{"tags":["java","xml","file-handling"],"comments":[{"owner":{"account_id":13203350,"reputation":868,"user_id":9535950,"display_name":"Thomas Behr"},"score":0,"creation_date":1671705910,"post_id":74887215,"comment_id":132157684,"body_markdown":"Your code never writes the changed text back to the file. Moreover, you probably need to trim your lines, otherwise your comparison may fail due to whitespace/non-printing chars. That said, you are already reading the file line by line. Why do you concatenate all that lines, if you need to replace a complete line anyways? Keep the lines separate and write them back to the file line by (changed) line. That&#39;s what [BufferedWriter](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/BufferedWriter.html) is for.","body":"Your code never writes the changed text back to the file. Moreover, you probably need to trim your lines, otherwise your comparison may fail due to whitespace/non-printing chars. That said, you are already reading the file line by line. Why do you concatenate all that lines, if you need to replace a complete line anyways? Keep the lines separate and write them back to the file line by (changed) line. That&#39;s what <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/BufferedWriter.html\" rel=\"nofollow noreferrer\">BufferedWriter</a> is for."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":2,"creation_date":1671706608,"post_id":74887215,"comment_id":132157934,"body_markdown":"And ... seriously ... an XML parser doesn&#39;t care if you use single or double quotes in the XML declaration.  They *mean* the same thing.  So why are you even doing this?","body":"And ... seriously ... an XML parser doesn&#39;t care if you use single or double quotes in the XML declaration.  They <i>mean</i> the same thing.  So why are you even doing this?"},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1671706977,"post_id":74887215,"comment_id":132158034,"body_markdown":"*&quot;... your comparison may fail due to whitespace/non-printing chars ... &quot;* - That includes embedded whitespace, so trimming may not be sufficient.  And there are numerous other edge-cases.","body":"<i>&quot;... your comparison may fail due to whitespace/non-printing chars ... &quot;</i> - That includes embedded whitespace, so trimming may not be sufficient.  And there are numerous other edge-cases."}],"answers":[{"tags":[],"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1671706195,"creation_date":1671706195,"answer_id":74887433,"question_id":74887215,"body_markdown":"Method `replaceAll` treats its first argument as a [regular expression](https://docs.oracle.com/javase/tutorial/essential/regex/).\r\n\r\nThe question mark (i.e. `?`) is a [metacharacter](https://www.regextutorial.org/regular-expression-metacharacters.php) but you want to treat it as a normal character.\r\n\r\nYou have two options:\r\n1. Call method [replace](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html#replace(java.lang.CharSequence,java.lang.CharSequence)) rather than method `replaceAll`.\r\n2. Escape the question marks by preceding them with a [double] backslash (i.e. `\\`)\r\n```java\r\nString oldLine = &quot;&lt;\\\\?xml version=\\&quot;1.0\\&quot; encoding=\\&quot;UTF-8\\&quot;\\\\?&gt;&quot;;\r\nString newLine = &quot;&lt;?xml version=\\&#39;1.0\\&#39; encoding=\\&#39;UTF-8\\&#39;?&gt;&quot;;\r\nfileContents = fileContents.replaceAll(oldLine, newLine);\r\n```\r\n","title":"How do I change the quotes on xml Declaration using Java File Handling?","body":"<p>Method <code>replaceAll</code> treats its first argument as a <a href=\"https://docs.oracle.com/javase/tutorial/essential/regex/\" rel=\"nofollow noreferrer\">regular expression</a>.</p>\n<p>The question mark (i.e. <code>?</code>) is a <a href=\"https://www.regextutorial.org/regular-expression-metacharacters.php\" rel=\"nofollow noreferrer\">metacharacter</a> but you want to treat it as a normal character.</p>\n<p>You have two options:</p>\n<ol>\n<li>Call method <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html#replace(java.lang.CharSequence,java.lang.CharSequence)\" rel=\"nofollow noreferrer\">replace</a> rather than method <code>replaceAll</code>.</li>\n<li>Escape the question marks by preceding them with a [double] backslash (i.e. <code>\\</code>)</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>String oldLine = &quot;&lt;\\\\?xml version=\\&quot;1.0\\&quot; encoding=\\&quot;UTF-8\\&quot;\\\\?&gt;&quot;;\nString newLine = &quot;&lt;?xml version=\\'1.0\\' encoding=\\'UTF-8\\'?&gt;&quot;;\nfileContents = fileContents.replaceAll(oldLine, newLine);\n</code></pre>\n"}],"owner":{"account_id":18419177,"reputation":67,"user_id":13417270,"display_name":"Amruit Pratyay"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1671706195,"creation_date":1671705130,"question_id":74887215,"body_markdown":"I currently have a bunch of XML files and the task was to change the text under a specific element. So, in my logic, I was fetching the root element, getting its children and then for the specific children element, I was using `setText()` method to change the content of it.\r\nNow the only issue is, the XML declaration which initially was:\r\n```xml\r\n&lt;?xml version=&#39;1.0&#39; encoding=&#39;UTF-8&#39;?&gt;\r\n```\r\nchanges to:\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n```\r\nI tried creating a string buffer and replacing the line, but for some reason it&#39;s not working. The code for it was as follows:\r\n```java\r\nStringBuffer buffer = new StringBuffer();\r\nwhile (sc.hasNextLine()) {\r\n    buffer.append(sc.nextLine()+System.lineSeparator());\r\n}\r\nString fileContents = buffer.toString();\r\nsc.close();\r\nString oldLine = &quot;&lt;?xml version=\\&quot;1.0\\&quot; encoding=\\&quot;UTF-8\\&quot;?&gt;&quot;;\r\nString newLine = &quot;&lt;?xml version=\\&#39;1.0\\&#39; encoding=\\&#39;UTF-8\\&#39;?&gt;&quot;;\r\ntry {\r\n    fileContents = fileContents.replaceAll(oldLine, newLine);\r\n}\r\ncatch(Exception e) {\r\n    System.out.println(&quot;Not Changed&quot;);\r\n}\r\n```\r\nDoes anyone know an approach that could work for this scenario? \r\n","title":"How do I change the quotes on xml Declaration using Java File Handling?","body":"<p>I currently have a bunch of XML files and the task was to change the text under a specific element. So, in my logic, I was fetching the root element, getting its children and then for the specific children element, I was using <code>setText()</code> method to change the content of it.\nNow the only issue is, the XML declaration which initially was:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version='1.0' encoding='UTF-8'?&gt;\n</code></pre>\n<p>changes to:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n</code></pre>\n<p>I tried creating a string buffer and replacing the line, but for some reason it's not working. The code for it was as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>StringBuffer buffer = new StringBuffer();\nwhile (sc.hasNextLine()) {\n    buffer.append(sc.nextLine()+System.lineSeparator());\n}\nString fileContents = buffer.toString();\nsc.close();\nString oldLine = &quot;&lt;?xml version=\\&quot;1.0\\&quot; encoding=\\&quot;UTF-8\\&quot;?&gt;&quot;;\nString newLine = &quot;&lt;?xml version=\\'1.0\\' encoding=\\'UTF-8\\'?&gt;&quot;;\ntry {\n    fileContents = fileContents.replaceAll(oldLine, newLine);\n}\ncatch(Exception e) {\n    System.out.println(&quot;Not Changed&quot;);\n}\n</code></pre>\n<p>Does anyone know an approach that could work for this scenario?</p>\n"},{"tags":["java","owl","owl-api"],"comments":[{"owner":{"account_id":6077505,"reputation":8407,"user_id":4744359,"display_name":"UninformedUser"},"score":1,"creation_date":1671519135,"post_id":74854775,"comment_id":132110919,"body_markdown":"what you are talking about is some extension Matthew did during his PhD thesis but that never made it to the OWL API project. You can find the code here: https://github.com/matthewhorridge/owlexplanation","body":"what you are talking about is some extension Matthew did during his PhD thesis but that never made it to the OWL API project. You can find the code here: <a href=\"https://github.com/matthewhorridge/owlexplanation\" rel=\"nofollow noreferrer\">github.com/matthewhorridge/owlexplanation</a>"},{"owner":{"account_id":17195861,"reputation":3,"user_id":12448638,"display_name":"bird"},"score":0,"creation_date":1671534172,"post_id":74854775,"comment_id":132115094,"body_markdown":"@UninformedUser Hmm, but is there a way of using this code inside mine to get laconic explanations?","body":"@UninformedUser Hmm, but is there a way of using this code inside mine to get laconic explanations?"},{"owner":{"account_id":529247,"reputation":10544,"user_id":1197045,"display_name":"Ignazio"},"score":0,"creation_date":1671539367,"post_id":74854775,"comment_id":132116760,"body_markdown":"@AngelosPoulis the examples in the owlexplanation project use OWLAPI, so yes.","body":"@AngelosPoulis the examples in the owlexplanation project use OWLAPI, so yes."},{"owner":{"account_id":17195861,"reputation":3,"user_id":12448638,"display_name":"bird"},"score":0,"creation_date":1671553711,"post_id":74854775,"comment_id":132121882,"body_markdown":"@Ignazio Can you provide me an example on how to get the laconic explanations? I can&#39;t find any in the owlexplanation github repository.","body":"@Ignazio Can you provide me an example on how to get the laconic explanations? I can&#39;t find any in the owlexplanation github repository."},{"owner":{"account_id":6077505,"reputation":8407,"user_id":4744359,"display_name":"UninformedUser"},"score":0,"creation_date":1671606133,"post_id":74854775,"comment_id":132132560,"body_markdown":"well, there is an example on the Github page. Just change the type of explanation generator factory you want to create, i.e. use `ExplanationManager.createLaconicExplanationGeneratorFactory` - nothing more has to be changed","body":"well, there is an example on the Github page. Just change the type of explanation generator factory you want to create, i.e. use <code>ExplanationManager.createLaconicExplanationGeneratorFactory</code> - nothing more has to be changed"},{"owner":{"account_id":529247,"reputation":10544,"user_id":1197045,"display_name":"Ignazio"},"score":0,"creation_date":1671613470,"post_id":74854775,"comment_id":132134523,"body_markdown":"@UninformedUser has already put a link to the owlexplanation repository in a comment","body":"@UninformedUser has already put a link to the owlexplanation repository in a comment"},{"owner":{"account_id":17195861,"reputation":3,"user_id":12448638,"display_name":"bird"},"score":0,"creation_date":1671622496,"post_id":74854775,"comment_id":132137334,"body_markdown":"@UninformedUser I have already tried this and keep getting `java.lang.NullPointerException`.","body":"@UninformedUser I have already tried this and keep getting <code>java.lang.NullPointerException</code>."},{"owner":{"account_id":6077505,"reputation":8407,"user_id":4744359,"display_name":"UninformedUser"},"score":0,"creation_date":1671629541,"post_id":74854775,"comment_id":132139556,"body_markdown":"ok, but at which line? The code in your question is not self-contained, there should be an error stack trace","body":"ok, but at which line? The code in your question is not self-contained, there should be an error stack trace"},{"owner":{"account_id":17195861,"reputation":3,"user_id":12448638,"display_name":"bird"},"score":0,"creation_date":1671631477,"post_id":74854775,"comment_id":132140217,"body_markdown":"@UninformedUser This line of code in function `explain`: `Set&lt;Explanation&lt;OWLAxiom&gt;&gt; explanations = explanation_generator.getExplanations(entailment, 1);` causes the `java.lang.NullPointerException`. I have updated the question to be more specific.","body":"@UninformedUser This line of code in function <code>explain</code>: <code>Set&lt;Explanation&lt;OWLAxiom&gt;&gt; explanations = explanation_generator.getExplanations(entailment, 1);</code> causes the <code>java.lang.NullPointerException</code>. I have updated the question to be more specific."},{"owner":{"account_id":6077505,"reputation":8407,"user_id":4744359,"display_name":"UninformedUser"},"score":0,"creation_date":1671695782,"post_id":74854775,"comment_id":132154793,"body_markdown":"which version do you use? Latest version has no code in Line 69 so I&#39;m wondering which API do you use: https://github.com/matthewhorridge/owlexplanation/blob/v2.0.1/src/main/java/org/semanticweb/owl/explanation/impl/blackbox/StructuralTypePriorityExpansionStrategy.java#L69 - also, does it happen for any inferred axiom or some specific one?","body":"which version do you use? Latest version has no code in Line 69 so I&#39;m wondering which API do you use: <a href=\"https://github.com/matthewhorridge/owlexplanation/blob/v2.0.1/src/main/java/org/semanticweb/owl/explanation/impl/blackbox/StructuralTypePriorityExpansionStrategy.java#L69\" rel=\"nofollow noreferrer\">github.com/matthewhorridge/owlexplanation/blob/v2.0.1/src/ma&zwnj;&#8203;in/&hellip;</a> - also, does it happen for any inferred axiom or some specific one?"},{"owner":{"account_id":17195861,"reputation":3,"user_id":12448638,"display_name":"bird"},"score":0,"creation_date":1671706392,"post_id":74854775,"comment_id":132157850,"body_markdown":"@UninformedUser I&#39;m using owlapi version 5.1.14 and owlexplanation version 5.0.0. It happens for all inferred axioms. I have also updated my question if this helps debugging.","body":"@UninformedUser I&#39;m using owlapi version 5.1.14 and owlexplanation version 5.0.0. It happens for all inferred axioms. I have also updated my question if this helps debugging."},{"owner":{"account_id":529247,"reputation":10544,"user_id":1197045,"display_name":"Ignazio"},"score":0,"creation_date":1675283942,"post_id":74854775,"comment_id":132898029,"body_markdown":"See if https://stackoverflow.com/questions/70593249/explanations-in-consistent-owl-ontologies helps, seems to relate to the same issues","body":"See if <a href=\"https://stackoverflow.com/questions/70593249/explanations-in-consistent-owl-ontologies\" title=\"explanations in consistent owl ontologies\">stackoverflow.com/questions/70593249/&hellip;</a> helps, seems to relate to the same issues"}],"owner":{"account_id":17195861,"reputation":3,"user_id":12448638,"display_name":"bird"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":99,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671706184,"creation_date":1671475688,"question_id":74854775,"body_markdown":"I am using OWLAPI to get all the inferred axioms and their explanations, for some ontologies. For the explanations, I need to get the explanation with the minimal set of axioms for each inferred axiom (laconic explanation), but I can&#39;t figure out how to do it, and I don&#39;t see any mention of laconic in the owlapi docs (http://owlcs.github.io/owlapi/apidocs_5/index.html).\r\n\r\nIs there a way to get the laconic explanations for an inferred axiom in OWLAPI?\r\nIf so, is it possible to give me an example of how I can achieve this?\r\n\r\n\r\n**UPDATE:** Following the advice given in comments, I changed my code to:\r\n\r\n```\r\npublic static void explain(OWLAxiom entailment, ExplanationGenerator&lt;OWLAxiom&gt; explanation_generator) {\r\n     try {\r\n\t    Set&lt;Explanation&lt;OWLAxiom&gt;&gt; explanations = \r\n                          explanation_generator.getExplanations(entailment, 1);\r\n        explanations.forEach(System.out::println);\r\n\t    System.out.println(&quot;EndOfExplanation\\n&quot;);\r\n\t } catch (Exception e) {\r\n\t    System.out.println(e);\r\n\t }\r\n};\r\n\r\n\r\n// This method replicates code existing in the owlexplanation project; \r\n// it&#39;s needed because the factories in owlexplanation do not set InitialEntailmentCheckStrategy correctly\r\npublic static ExplanationGeneratorFactory&lt;OWLAxiom&gt; createExplanationGeneratorFactory(\r\n       OWLReasonerFactory reasonerFactory, ExplanationProgressMonitor&lt;OWLAxiom&gt; progressMonitor,\r\n            Supplier&lt;OWLOntologyManager&gt; m) {\r\n    EntailmentCheckerFactory&lt;OWLAxiom&gt; checker = new SatisfiabilityEntailmentCheckerFactory(reasonerFactory, m);\r\n    Configuration&lt;OWLAxiom&gt; config = new Configuration&lt;&gt;(checker, \r\n    new StructuralTypePriorityExpansionStrategy&lt;OWLAxiom&gt;(InitialEntailmentCheckStrategy.PERFORM, m),\r\n    new DivideAndConquerContractionStrategy&lt;OWLAxiom&gt;(), progressMonitor, m);\r\n    return new BlackBoxExplanationGeneratorFactory&lt;&gt;(config);\r\n};\r\n\r\n\r\npublic static void main(String[] args) {\r\n    ...\r\n     ExplanationGeneratorFactory&lt;OWLAxiom&gt; genFac = \r\n       ExplanationManager.createLaconicExplanationGeneratorFactory(\r\n                 reasoner_factory, OWLManager::createOWLOntologyManager);\r\n     ExplanationGenerator&lt;OWLAxiom&gt; gen = genFac.createExplanationGenerator(onto);\r\n     inferred_axioms_onto.logicalAxioms().forEach(e -&gt; explain(e, gen));\r\n}\r\n```\r\n\r\nbut I still get `java.lang.NullPointerException` which is caused in  the line `Set&lt;Explanation&lt;OWLAxiom&gt;&gt; explanations = explanation_generator.getExplanations(entailment, 1);`.\r\n\r\nThe error stack trace is:\r\n\r\n``` \r\nat org.semanticweb.owl.explanation.impl.blackbox.StructuralTypePriorityExpansionStrategy.doExpansion(StructuralTypePriorityExpansionStrategy.java:69)\r\n\tat org.semanticweb.owl.explanation.impl.blackbox.BlackBoxExplanationGenerator2.doExpansion(BlackBoxExplanationGenerator2.java:262)\r\n\tat org.semanticweb.owl.explanation.impl.blackbox.BlackBoxExplanationGenerator2.computeExplanation(BlackBoxExplanationGenerator2.java:183)\r\n\tat org.semanticweb.owl.explanation.impl.blackbox.BlackBoxExplanationGenerator2.generateExplanation(BlackBoxExplanationGenerator2.java:292)\r\n\tat org.semanticweb.owl.explanation.impl.blackbox.hst.HittingSetTree.buildHittingSetTree(HittingSetTree.java:110)\r\n\tat org.semanticweb.owl.explanation.impl.blackbox.BlackBoxExplanationGenerator2.getExplanations(BlackBoxExplanationGenerator2.java:118)\r\n\tat org.semanticweb.owl.explanation.impl.blackbox.BlackBoxExplanationGenerator2.getExplanations(BlackBoxExplanationGenerator2.java:94)\r\n\tat org.semanticweb.owl.explanation.impl.laconic.LaconicExplanationGenerator.computePreciseJustsOptimised(LaconicExplanationGenerator.java:173)\r\n\tat org.semanticweb.owl.explanation.impl.laconic.LaconicExplanationGenerator.getExplanations(LaconicExplanationGenerator.java:386)\r\n\tat msc.Explainer.explain(Explainer.java:46)\r\n\tat msc.Explainer.lambda$2(Explainer.java:132)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)\r\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1384)\r\n\tat java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:580)\r\n\tat java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:270)\r\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\r\n\tat java.util.Iterator.forEachRemaining(Iterator.java:116)\r\n\tat java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\r\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\r\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\r\n\tat java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\r\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)\r\n\tat msc.Explainer.main(Explainer.java:132)\r\n```\r\n\r\nI have taken the `ExplanationGenerationFactory` function from this answer on getting explanations: https://stackoverflow.com/questions/70593249/explanations-in-consistent-owl-ontologies, as without it I couldn&#39;t get explanations at all.","title":"Laconic Explanations in OWLAPI","body":"<p>I am using OWLAPI to get all the inferred axioms and their explanations, for some ontologies. For the explanations, I need to get the explanation with the minimal set of axioms for each inferred axiom (laconic explanation), but I can't figure out how to do it, and I don't see any mention of laconic in the owlapi docs (<a href=\"http://owlcs.github.io/owlapi/apidocs_5/index.html\" rel=\"nofollow noreferrer\">http://owlcs.github.io/owlapi/apidocs_5/index.html</a>).</p>\n<p>Is there a way to get the laconic explanations for an inferred axiom in OWLAPI?\nIf so, is it possible to give me an example of how I can achieve this?</p>\n<p><strong>UPDATE:</strong> Following the advice given in comments, I changed my code to:</p>\n<pre><code>public static void explain(OWLAxiom entailment, ExplanationGenerator&lt;OWLAxiom&gt; explanation_generator) {\n     try {\n        Set&lt;Explanation&lt;OWLAxiom&gt;&gt; explanations = \n                          explanation_generator.getExplanations(entailment, 1);\n        explanations.forEach(System.out::println);\n        System.out.println(&quot;EndOfExplanation\\n&quot;);\n     } catch (Exception e) {\n        System.out.println(e);\n     }\n};\n\n\n// This method replicates code existing in the owlexplanation project; \n// it's needed because the factories in owlexplanation do not set InitialEntailmentCheckStrategy correctly\npublic static ExplanationGeneratorFactory&lt;OWLAxiom&gt; createExplanationGeneratorFactory(\n       OWLReasonerFactory reasonerFactory, ExplanationProgressMonitor&lt;OWLAxiom&gt; progressMonitor,\n            Supplier&lt;OWLOntologyManager&gt; m) {\n    EntailmentCheckerFactory&lt;OWLAxiom&gt; checker = new SatisfiabilityEntailmentCheckerFactory(reasonerFactory, m);\n    Configuration&lt;OWLAxiom&gt; config = new Configuration&lt;&gt;(checker, \n    new StructuralTypePriorityExpansionStrategy&lt;OWLAxiom&gt;(InitialEntailmentCheckStrategy.PERFORM, m),\n    new DivideAndConquerContractionStrategy&lt;OWLAxiom&gt;(), progressMonitor, m);\n    return new BlackBoxExplanationGeneratorFactory&lt;&gt;(config);\n};\n\n\npublic static void main(String[] args) {\n    ...\n     ExplanationGeneratorFactory&lt;OWLAxiom&gt; genFac = \n       ExplanationManager.createLaconicExplanationGeneratorFactory(\n                 reasoner_factory, OWLManager::createOWLOntologyManager);\n     ExplanationGenerator&lt;OWLAxiom&gt; gen = genFac.createExplanationGenerator(onto);\n     inferred_axioms_onto.logicalAxioms().forEach(e -&gt; explain(e, gen));\n}\n</code></pre>\n<p>but I still get <code>java.lang.NullPointerException</code> which is caused in  the line <code>Set&lt;Explanation&lt;OWLAxiom&gt;&gt; explanations = explanation_generator.getExplanations(entailment, 1);</code>.</p>\n<p>The error stack trace is:</p>\n<pre><code>at org.semanticweb.owl.explanation.impl.blackbox.StructuralTypePriorityExpansionStrategy.doExpansion(StructuralTypePriorityExpansionStrategy.java:69)\n    at org.semanticweb.owl.explanation.impl.blackbox.BlackBoxExplanationGenerator2.doExpansion(BlackBoxExplanationGenerator2.java:262)\n    at org.semanticweb.owl.explanation.impl.blackbox.BlackBoxExplanationGenerator2.computeExplanation(BlackBoxExplanationGenerator2.java:183)\n    at org.semanticweb.owl.explanation.impl.blackbox.BlackBoxExplanationGenerator2.generateExplanation(BlackBoxExplanationGenerator2.java:292)\n    at org.semanticweb.owl.explanation.impl.blackbox.hst.HittingSetTree.buildHittingSetTree(HittingSetTree.java:110)\n    at org.semanticweb.owl.explanation.impl.blackbox.BlackBoxExplanationGenerator2.getExplanations(BlackBoxExplanationGenerator2.java:118)\n    at org.semanticweb.owl.explanation.impl.blackbox.BlackBoxExplanationGenerator2.getExplanations(BlackBoxExplanationGenerator2.java:94)\n    at org.semanticweb.owl.explanation.impl.laconic.LaconicExplanationGenerator.computePreciseJustsOptimised(LaconicExplanationGenerator.java:173)\n    at org.semanticweb.owl.explanation.impl.laconic.LaconicExplanationGenerator.getExplanations(LaconicExplanationGenerator.java:386)\n    at msc.Explainer.explain(Explainer.java:46)\n    at msc.Explainer.lambda$2(Explainer.java:132)\n    at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)\n    at java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1384)\n    at java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:580)\n    at java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:270)\n    at java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n    at java.util.Iterator.forEachRemaining(Iterator.java:116)\n    at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\n    at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n    at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n    at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\n    at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\n    at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n    at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)\n    at msc.Explainer.main(Explainer.java:132)\n</code></pre>\n<p>I have taken the <code>ExplanationGenerationFactory</code> function from this answer on getting explanations: <a href=\"https://stackoverflow.com/questions/70593249/explanations-in-consistent-owl-ontologies\">Explanations in Consistent OWL Ontologies</a>, as without it I couldn't get explanations at all.</p>\n"},{"tags":["java","elasticsearch","spring-data-elasticsearch"],"comments":[{"owner":{"account_id":7187902,"reputation":5118,"user_id":5489276,"accept_rate":20,"display_name":"Sagar Patel"},"score":0,"creation_date":1671540960,"post_id":74861579,"comment_id":132117297,"body_markdown":"are you using Spring data Elasticsearch ? Can you please provide maven dependancy ?","body":"are you using Spring data Elasticsearch ? Can you please provide maven dependancy ?"},{"owner":{"account_id":4231656,"reputation":1566,"user_id":3463844,"display_name":"Esteban"},"score":0,"creation_date":1671546246,"post_id":74861579,"comment_id":132119133,"body_markdown":"Hi Sagar, I&#39;m not using it because it was deprecated and a lot of classes were removed, including &quot;elasticsearchTemplate&quot;, and that is the reason why i&#39;m asking....","body":"Hi Sagar, I&#39;m not using it because it was deprecated and a lot of classes were removed, including &quot;elasticsearchTemplate&quot;, and that is the reason why i&#39;m asking...."}],"answers":[{"tags":[],"owner":{"account_id":4231656,"reputation":1566,"user_id":3463844,"display_name":"Esteban"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671617940,"creation_date":1671617940,"answer_id":74874505,"question_id":74861579,"body_markdown":"It took me a while to find, as I could not find it in the official documentation, but \r\nthe replacement for deprecated \r\n\r\n**&#39;org.springframework.data.elasticsearch.client.erhlc.ElasticsearchRestTemplate&#39;**\r\n\r\nis \r\n\r\n**&#39;org.springframework.data.elasticsearch.client.elc.ReactiveElasticsearchTemplate&#39;** \r\n\r\nRegarding the &quot;searchForStream&quot;, now the searches can be converted into streams...\r\n\r\nAlso you need to include into gradle/maven the updated dependency...\r\n\r\n    api group: &#39;org.springframework.data&#39;, name: &#39;spring-data-elasticsearch&#39;, version: &quot;5.0.0&quot;","title":"Replacement for searchForStream method in ElasticSearch java api client","body":"<p>It took me a while to find, as I could not find it in the official documentation, but\nthe replacement for deprecated</p>\n<p><strong>'org.springframework.data.elasticsearch.client.erhlc.ElasticsearchRestTemplate'</strong></p>\n<p>is</p>\n<p><strong>'org.springframework.data.elasticsearch.client.elc.ReactiveElasticsearchTemplate'</strong></p>\n<p>Regarding the &quot;searchForStream&quot;, now the searches can be converted into streams...</p>\n<p>Also you need to include into gradle/maven the updated dependency...</p>\n<pre><code>api group: 'org.springframework.data', name: 'spring-data-elasticsearch', version: &quot;5.0.0&quot;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4231656,"reputation":1566,"user_id":3463844,"display_name":"Esteban"},"score":0,"creation_date":1671799415,"post_id":74887429,"comment_id":132178907,"body_markdown":"@PJ Thanks! I had a bunch of technical issues and I wasnt able to find the new class and the method... With your help, I could...","body":"@PJ Thanks! I had a bunch of technical issues and I wasnt able to find the new class and the method... With your help, I could..."}],"tags":[],"owner":{"account_id":5534873,"reputation":18496,"user_id":4393565,"accept_rate":67,"display_name":"P.J.Meisch"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1671706166,"creation_date":1671706166,"answer_id":74887429,"question_id":74861579,"body_markdown":"`ElasticsearchOperations.searchForStream(Query query, Class&lt;T&gt; clazz)` is available in Spring Data Elasticsearch 5.0 as it was in 4.4. This did not change at all. What has changed is that Spring Data Elasticsearch now uses the new client from Elasticsearch.\r\n\r\nWhat has changed is that you cannot use the `NativeSearchQueryBuilder` as this was creating native queries for the old client. You will now need to use the `NativeQueryBuilder`.\r\n\r\nAs for the solution you suggest in your answer: You cannot just use a reactive implementation as a replacement for the existing imperative one.\r\n\r\nAnd the easiest solution would be to not have a `ElasticsearchTemplate` injected, but use the interface `ElasticsearchOperations` instead.","title":"Replacement for searchForStream method in ElasticSearch java api client","body":"<p><code>ElasticsearchOperations.searchForStream(Query query, Class&lt;T&gt; clazz)</code> is available in Spring Data Elasticsearch 5.0 as it was in 4.4. This did not change at all. What has changed is that Spring Data Elasticsearch now uses the new client from Elasticsearch.</p>\n<p>What has changed is that you cannot use the <code>NativeSearchQueryBuilder</code> as this was creating native queries for the old client. You will now need to use the <code>NativeQueryBuilder</code>.</p>\n<p>As for the solution you suggest in your answer: You cannot just use a reactive implementation as a replacement for the existing imperative one.</p>\n<p>And the easiest solution would be to not have a <code>ElasticsearchTemplate</code> injected, but use the interface <code>ElasticsearchOperations</code> instead.</p>\n"}],"owner":{"account_id":4231656,"reputation":1566,"user_id":3463844,"display_name":"Esteban"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":844,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74887429,"answer_count":2,"score":1,"last_activity_date":1671706166,"creation_date":1671531856,"question_id":74861579,"body_markdown":"I am migrating a java application from elastic search high level client to java api client, as required for Spring Boot 3, as it no longer supports &#39;org.springframework.data.elasticsearch.client.erhlc.ElasticsearchRestTemplate&#39;...\r\n\r\nI&#39;m unable to find a new way to search with a stream!\r\nHere is an old code snippet...\r\n\r\n    NativeSearchQueryBuilder builder = new NativeSearchQueryBuilder() //\r\n        .withQuery(q) //\r\n        .withPageable(PageRequest.of(0, 1000)); //\r\n\r\n    NativeSearchQuery searchQuery = builder.build();\r\n\r\n    Stream&lt;X&gt; list = elasticsearchTemplate.searchForStream(searchQuery, X.class).stream();\r\n\r\nI&#39;m using Spring Boot 3, Elastic Search 8.5.3 and the Java Api 8.5.3...\r\n\r\nHere is the gradle dependency...\r\n\r\n    implementation group: &#39;co.elastic.clients&#39;, name: &#39;elasticsearch-java&#39;, version: &quot;8.5.3&quot;","title":"Replacement for searchForStream method in ElasticSearch java api client","body":"<p>I am migrating a java application from elastic search high level client to java api client, as required for Spring Boot 3, as it no longer supports 'org.springframework.data.elasticsearch.client.erhlc.ElasticsearchRestTemplate'...</p>\n<p>I'm unable to find a new way to search with a stream!\nHere is an old code snippet...</p>\n<pre><code>NativeSearchQueryBuilder builder = new NativeSearchQueryBuilder() //\n    .withQuery(q) //\n    .withPageable(PageRequest.of(0, 1000)); //\n\nNativeSearchQuery searchQuery = builder.build();\n\nStream&lt;X&gt; list = elasticsearchTemplate.searchForStream(searchQuery, X.class).stream();\n</code></pre>\n<p>I'm using Spring Boot 3, Elastic Search 8.5.3 and the Java Api 8.5.3...</p>\n<p>Here is the gradle dependency...</p>\n<pre><code>implementation group: 'co.elastic.clients', name: 'elasticsearch-java', version: &quot;8.5.3&quot;\n</code></pre>\n"},{"tags":["java","android","react-native"],"owner":{"account_id":26735102,"reputation":21,"user_id":20336792,"display_name":"Eli K"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":142,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671706152,"creation_date":1671706152,"question_id":74887428,"body_markdown":"I downloaded an react-native npm package which is android barcode scanner based on zxing library. However, it turned out that it was using a depricated method with Integrator. As a clue, it recommended to use ScanOptions and ScanContract. I don&#39;t know Java or Android, nevertheless I tried my best and this is what I have as of now: \r\n\r\nso, there are three Java files in the folder of this native module:, module itself:\r\n`\r\n```\r\n// BarcodeZxingScanModule.java\r\n\r\npublic class BarcodeZxingScanModule extends ReactContextBaseJavaModule implements ActivityEventListener {\r\n\r\n    private final ReactApplicationContext reactContext;\r\n\r\n    public BarcodeZxingScanModule(ReactApplicationContext reactContext) {\r\n        super(reactContext);\r\n        this.reactContext = reactContext;\r\n    }\r\n\r\n    @Override\r\n    public String getName() {\r\n        return &quot;BarcodeZxingScan&quot;;\r\n    }\r\n\r\n\r\n    @ReactMethod\r\n    public void sampleMethod(String stringArgument, Promise promise) {\r\n        // TODO: Implement some actually useful functionality\r\n        try {\r\n            promise.resolve(stringArgument);\r\n        } catch (Exception e) {\r\n            promise.reject(e);\r\n            //TODO: handle exception\r\n        }\r\n    }\r\n\r\n\r\n    @ReactMethod\r\n    public void showQrReader(Callback callback) {\r\n//        ContinuousCaptureActivity captureActivity = new ContinuousCaptureActivity();\r\n//\r\n//        captureActivity.fragmentLauncher.launch(options);\r\n        Callback mCallback = callback;\r\n        //IntentIntegrator integrator = new IntentIntegrator(getCurrentActivity());\r\n        //integrator.setOrientationLocked(true);\r\n        //integrator.setCaptureActivity(ContinuousCaptureActivity.class);\r\n         //integrator.initiateScan();\r\n\r\n//\r\n\r\n//        Intent intent = new Intent(getCurrentActivity(), ContinuousCaptureActivity.class);\r\n//        reactContext.startActivity(intent);\r\n\r\n        Intent intent = new Intent(getReactApplicationContext(), ContinuousCaptureActivity.class);\r\n        intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);\r\n        getReactApplicationContext().startActivityForResult(intent, 1, null);\r\n        reactContext.addActivityEventListener(this);\r\n    }\r\n\r\n    @Override\r\n    public void onActivityResult(Activity activity, int requestCode, int resultCode, Intent data) {\r\n        Log.d(&quot;Barcode scanner :&quot;,  &quot;data&quot; + data);\r\n    }\r\n\r\n    @Override\r\n    public void onNewIntent(Intent intent) {\r\n    }\r\n\r\n}\r\n\r\n```\r\n`\r\npackage, that I haven&#39;t made any changes to : \r\n\r\n`\r\n```\r\npublic class BarcodeZxingScanPackage implements ReactPackage {\r\n    @Override\r\n    public List&lt;NativeModule&gt; createNativeModules(ReactApplicationContext reactContext) {\r\n        return Arrays.&lt;NativeModule&gt;asList(new BarcodeZxingScanModule(reactContext));\r\n    }\r\n\r\n    public List&lt;Class&lt;? extends JavaScriptModule&gt;&gt; createJSModules() {\r\n        return null;\r\n    }\r\n\r\n\r\n    @Override\r\n    public List&lt;ViewManager&gt; createViewManagers(ReactApplicationContext reactContext) {\r\n        return Collections.emptyList();\r\n    }\r\n}\r\n```\r\n`\r\nand activity: \r\n\r\n`\r\n```\r\npublic class ContinuousCaptureActivity extends AppCompatActivity {\r\n\r\n    public final ActivityResultLauncher&lt;ScanOptions&gt; fragmentLauncher = registerForActivityResult(new ScanContract(),\r\n            result -&gt; {\r\n                if(result.getContents() == null) {\r\n                    Log.d(&quot;BarcodeReader&quot;, &quot;info : &quot; + result.getContents());\r\n\r\n                } else {\r\n                    Log.d(&quot;BarcodeReader&quot;, &quot;info : &quot; + result.getContents());\r\n                    Intent intent = new Intent();\r\n                    intent.putExtra(&quot;STRING&quot;, result.getContents());\r\n                    setResult(this.RESULT_OK, intent);\r\n                }\r\n                finish();\r\n            });\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n\r\n        ScanOptions options = new ScanOptions();\r\n        options.setDesiredBarcodeFormats(ScanOptions.DATA_MATRIX);\r\n        options.setOrientationLocked(true);\r\n        options.setBeepEnabled(false);\r\n        options.setTorchEnabled(false);\r\n        fragmentLauncher.launch(options);\r\n    }\r\n\r\n}\r\n```\r\n`\r\n\r\nas of now, I am getting log in the activity file, however, I need it to return that data to the callback that I am sending from react:\r\n\r\n`\r\n```\r\nconst BarcodeScanner = () =&gt; {\r\n\r\n  const barcodeScanned = (data) =&gt; {\r\n    console.log(&quot;Barcode &quot;, data);\r\n  };\r\n\r\n  const handleClick = () =&gt; {\r\n    console.log(&#39;starting the process&#39;)\r\n    BarcodeZxingScan.showQrReader(barcodeScanned);\r\n  };\r\n\r\n  return (\r\n    &lt;View&gt;\r\n      &lt;TouchableOpacity\r\n        onPress={() =&gt; handleClick()}\r\n        style={{\r\n          margin: 20,\r\n          backgroundColor: &quot;steelblue&quot;,\r\n          justifyContent: &quot;center&quot;,\r\n          alignItems: &quot;center&quot;,\r\n        }}\r\n      &gt;\r\n        &lt;Text style={{ fontSize: 26 }}&gt;SCAN&lt;/Text&gt;\r\n      &lt;/TouchableOpacity&gt;\r\n    &lt;/View&gt;\r\n  );\r\n};\r\n\r\nexport default BarcodeScanner;\r\n```\r\n`\r\nhow can I make this possible. Thank you!\r\n\r\nI re-write the mail logic from Itgrator to Intent and all the code within activity class is new (based on ScanOptions and ScanContract)","title":"How to pass data from intent to callback?","body":"<p>I downloaded an react-native npm package which is android barcode scanner based on zxing library. However, it turned out that it was using a depricated method with Integrator. As a clue, it recommended to use ScanOptions and ScanContract. I don't know Java or Android, nevertheless I tried my best and this is what I have as of now:</p>\n<p>so, there are three Java files in the folder of this native module:, module itself:\n`</p>\n<pre><code>// BarcodeZxingScanModule.java\n\npublic class BarcodeZxingScanModule extends ReactContextBaseJavaModule implements ActivityEventListener {\n\n    private final ReactApplicationContext reactContext;\n\n    public BarcodeZxingScanModule(ReactApplicationContext reactContext) {\n        super(reactContext);\n        this.reactContext = reactContext;\n    }\n\n    @Override\n    public String getName() {\n        return &quot;BarcodeZxingScan&quot;;\n    }\n\n\n    @ReactMethod\n    public void sampleMethod(String stringArgument, Promise promise) {\n        // TODO: Implement some actually useful functionality\n        try {\n            promise.resolve(stringArgument);\n        } catch (Exception e) {\n            promise.reject(e);\n            //TODO: handle exception\n        }\n    }\n\n\n    @ReactMethod\n    public void showQrReader(Callback callback) {\n//        ContinuousCaptureActivity captureActivity = new ContinuousCaptureActivity();\n//\n//        captureActivity.fragmentLauncher.launch(options);\n        Callback mCallback = callback;\n        //IntentIntegrator integrator = new IntentIntegrator(getCurrentActivity());\n        //integrator.setOrientationLocked(true);\n        //integrator.setCaptureActivity(ContinuousCaptureActivity.class);\n         //integrator.initiateScan();\n\n//\n\n//        Intent intent = new Intent(getCurrentActivity(), ContinuousCaptureActivity.class);\n//        reactContext.startActivity(intent);\n\n        Intent intent = new Intent(getReactApplicationContext(), ContinuousCaptureActivity.class);\n        intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);\n        getReactApplicationContext().startActivityForResult(intent, 1, null);\n        reactContext.addActivityEventListener(this);\n    }\n\n    @Override\n    public void onActivityResult(Activity activity, int requestCode, int resultCode, Intent data) {\n        Log.d(&quot;Barcode scanner :&quot;,  &quot;data&quot; + data);\n    }\n\n    @Override\n    public void onNewIntent(Intent intent) {\n    }\n\n}\n\n</code></pre>\n<p>`\npackage, that I haven't made any changes to :</p>\n<p>`</p>\n<pre><code>public class BarcodeZxingScanPackage implements ReactPackage {\n    @Override\n    public List&lt;NativeModule&gt; createNativeModules(ReactApplicationContext reactContext) {\n        return Arrays.&lt;NativeModule&gt;asList(new BarcodeZxingScanModule(reactContext));\n    }\n\n    public List&lt;Class&lt;? extends JavaScriptModule&gt;&gt; createJSModules() {\n        return null;\n    }\n\n\n    @Override\n    public List&lt;ViewManager&gt; createViewManagers(ReactApplicationContext reactContext) {\n        return Collections.emptyList();\n    }\n}\n</code></pre>\n<p>`\nand activity:</p>\n<p>`</p>\n<pre><code>public class ContinuousCaptureActivity extends AppCompatActivity {\n\n    public final ActivityResultLauncher&lt;ScanOptions&gt; fragmentLauncher = registerForActivityResult(new ScanContract(),\n            result -&gt; {\n                if(result.getContents() == null) {\n                    Log.d(&quot;BarcodeReader&quot;, &quot;info : &quot; + result.getContents());\n\n                } else {\n                    Log.d(&quot;BarcodeReader&quot;, &quot;info : &quot; + result.getContents());\n                    Intent intent = new Intent();\n                    intent.putExtra(&quot;STRING&quot;, result.getContents());\n                    setResult(this.RESULT_OK, intent);\n                }\n                finish();\n            });\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n\n        ScanOptions options = new ScanOptions();\n        options.setDesiredBarcodeFormats(ScanOptions.DATA_MATRIX);\n        options.setOrientationLocked(true);\n        options.setBeepEnabled(false);\n        options.setTorchEnabled(false);\n        fragmentLauncher.launch(options);\n    }\n\n}\n</code></pre>\n<p>`</p>\n<p>as of now, I am getting log in the activity file, however, I need it to return that data to the callback that I am sending from react:</p>\n<p>`</p>\n<pre><code>const BarcodeScanner = () =&gt; {\n\n  const barcodeScanned = (data) =&gt; {\n    console.log(&quot;Barcode &quot;, data);\n  };\n\n  const handleClick = () =&gt; {\n    console.log('starting the process')\n    BarcodeZxingScan.showQrReader(barcodeScanned);\n  };\n\n  return (\n    &lt;View&gt;\n      &lt;TouchableOpacity\n        onPress={() =&gt; handleClick()}\n        style={{\n          margin: 20,\n          backgroundColor: &quot;steelblue&quot;,\n          justifyContent: &quot;center&quot;,\n          alignItems: &quot;center&quot;,\n        }}\n      &gt;\n        &lt;Text style={{ fontSize: 26 }}&gt;SCAN&lt;/Text&gt;\n      &lt;/TouchableOpacity&gt;\n    &lt;/View&gt;\n  );\n};\n\nexport default BarcodeScanner;\n</code></pre>\n<p>`\nhow can I make this possible. Thank you!</p>\n<p>I re-write the mail logic from Itgrator to Intent and all the code within activity class is new (based on ScanOptions and ScanContract)</p>\n"},{"tags":["java","spring","postgresql","hibernate","mustache"],"comments":[{"owner":{"account_id":1901420,"reputation":3763,"user_id":1717210,"display_name":"TacheDeChoco"},"score":3,"creation_date":1671713847,"post_id":74887354,"comment_id":132160087,"body_markdown":"You need to introduce a **transactional** `Service` layer between the controller and the repository. Nice article about it: https://www.codeusingjava.com/boot/trans/1","body":"You need to introduce a <b>transactional</b> <code>Service</code> layer between the controller and the repository. Nice article about it: <a href=\"https://www.codeusingjava.com/boot/trans/1\" rel=\"nofollow noreferrer\">codeusingjava.com/boot/trans/1</a>"},{"owner":{"account_id":11601616,"reputation":1,"user_id":13161313,"display_name":"den_kochanovskiy"},"score":0,"creation_date":1671799375,"post_id":74887354,"comment_id":132178895,"body_markdown":"Thanks for the help, I implemented receiving all messages and saving new ones through services, receiving all messages is successful, but saving new messages to the database still does not work and the log is also empty","body":"Thanks for the help, I implemented receiving all messages and saving new ones through services, receiving all messages is successful, but saving new messages to the database still does not work and the log is also empty"}],"owner":{"account_id":11601616,"reputation":1,"user_id":13161313,"display_name":"den_kochanovskiy"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":666,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671705776,"creation_date":1671705776,"question_id":74887354,"body_markdown":"Spring Boot 3.0.0 application, after filling out the form and submitting it, the input field is cleared, but saving to the corresponding database table does not occur. There are no errors in the log.\r\n\r\nModel\r\n```\r\nimport jakarta.persistence.Entity;\r\nimport jakarta.persistence.GeneratedValue;\r\nimport jakarta.persistence.GenerationType;\r\nimport jakarta.persistence.Id;\r\n\r\n@Entity\r\npublic class Message {\r\n    @Id\r\n    @GeneratedValue(strategy= GenerationType.AUTO)\r\n    private Integer id;\r\n    private String text;\r\n\r\n    public Message() {\r\n    }\r\n\r\n    public Message(String text) {\r\n        this.text = text;\r\n    }\r\n\r\n    public Integer getId() {\r\n        return id;\r\n    }\r\n\r\n    public void setId(Integer id) {\r\n        this.id = id;\r\n    }\r\n\r\n    public String getText() {\r\n        return text;\r\n    }\r\n\r\n    public void setText(String text) {\r\n        this.text = text;\r\n    }\r\n}\r\n\r\n```\r\nRepository\r\n```\r\nimport kz.onlineshelter.helppet.model.Message;\r\nimport org.springframework.data.repository.CrudRepository;\r\n\r\npublic interface MessageRepository extends CrudRepository&lt;Message, Long&gt; {}\r\n```\r\nController\r\n\r\n```\r\nimport kz.onlineshelter.helppet.model.Message;\r\nimport kz.onlineshelter.helppet.repository.MessageRepository;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.stereotype.Controller;\r\nimport org.springframework.web.bind.annotation.*;\r\n\r\nimport java.util.Map;\r\n\r\n@Controller\r\n@RequestMapping(method={RequestMethod.POST,RequestMethod.GET})\r\npublic class AppController {\r\n    private final MessageRepository messageRepository;\r\n\r\n    @Autowired\r\n    public AppController(MessageRepository messageRepository) {\r\n        this.messageRepository = messageRepository;\r\n    }\r\n\r\n    @GetMapping(&quot;/message&quot;)\r\n    public String message(Map&lt;String, Object&gt; model) {\r\n        Iterable&lt;Message&gt; messages = messageRepository.findAll();\r\n\r\n        model.put(&quot;messages&quot;, messages);\r\n\r\n        return &quot;message&quot;;\r\n    }\r\n\r\n    @PostMapping\r\n    public String add(@RequestParam String text, Map&lt;String, Object&gt; model) {\r\n        Message message = new Message(text);\r\n\r\n        messageRepository.save(message);\r\n\r\n        Iterable&lt;Message&gt; messages = messageRepository.findAll();\r\n\r\n        model.put(&quot;messages&quot;, messages);\r\n\r\n        return &quot;message&quot;;\r\n    }\r\n}\r\n```\r\nApplication\r\n\r\n```\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\n\r\n@SpringBootApplication\r\npublic class HelppetApplication {\r\n   public static void main(String[] args) {\r\n      SpringApplication.run(HelppetApplication.class, args);\r\n   }\r\n}\r\n```\r\nresources/templates/message.mustache\r\n\r\n```\r\n&lt;html&gt;\r\n\r\n&lt;body&gt;\r\n&lt;div&gt;\r\n    &lt;form method=&quot;post&quot;&gt;\r\n        &lt;input type=&quot;text&quot; name=&quot;text&quot; placeholder=&quot;Enter your text&quot; /&gt;&lt;br&gt;\r\n        &lt;button type=&quot;submit&quot;&gt;Add&lt;/button&gt;\r\n    &lt;/form&gt;\r\n&lt;/div&gt;\r\n&lt;div&gt;List of messages&lt;/div&gt;\r\n{{#messages}}\r\n    &lt;div&gt;\r\n        &lt;span&gt;{{text}}&lt;/span&gt;\r\n    &lt;/div&gt;\r\n{{/messages}}\r\n&lt;/body&gt;\r\n&lt;/html&gt;\r\n```\r\napplication.properties\r\n```\r\nspring.datasource.url=jdbc:postgresql://localhost:5432/***\r\nspring.datasource.username=***\r\nspring.datasource.password=***\r\nspring.jpa.generate-ddl=true\r\n```\r\npom.xml\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n   xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n   &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n   &lt;parent&gt;\r\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n      &lt;version&gt;3.0.0&lt;/version&gt;\r\n      &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n   &lt;/parent&gt;\r\n   &lt;groupId&gt;***&lt;/groupId&gt;\r\n   &lt;artifactId&gt;helppet&lt;/artifactId&gt;\r\n   &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n   &lt;packaging&gt;war&lt;/packaging&gt;\r\n   &lt;name&gt;***&lt;/name&gt;\r\n   &lt;description&gt;***&lt;/description&gt;\r\n   &lt;properties&gt;\r\n      &lt;java.version&gt;17&lt;/java.version&gt;\r\n   &lt;/properties&gt;\r\n   &lt;dependencies&gt;\r\n      &lt;dependency&gt;\r\n         &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n         &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n      &lt;/dependency&gt;\r\n      &lt;dependency&gt;\r\n         &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n         &lt;artifactId&gt;spring-boot-starter-mustache&lt;/artifactId&gt;\r\n      &lt;/dependency&gt;\r\n      &lt;dependency&gt;\r\n         &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n         &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n      &lt;/dependency&gt;\r\n      &lt;dependency&gt;\r\n         &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n         &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n         &lt;scope&gt;runtime&lt;/scope&gt;\r\n         &lt;optional&gt;true&lt;/optional&gt;\r\n      &lt;/dependency&gt;\r\n      &lt;dependency&gt;\r\n         &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n         &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n         &lt;scope&gt;runtime&lt;/scope&gt;\r\n      &lt;/dependency&gt;\r\n      &lt;dependency&gt;\r\n         &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n         &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\r\n         &lt;scope&gt;provided&lt;/scope&gt;\r\n      &lt;/dependency&gt;\r\n      &lt;dependency&gt;\r\n         &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n         &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n         &lt;scope&gt;test&lt;/scope&gt;\r\n      &lt;/dependency&gt;\r\n   &lt;/dependencies&gt;\r\n\r\n   &lt;build&gt;\r\n      &lt;plugins&gt;\r\n         &lt;plugin&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n         &lt;/plugin&gt;\r\n      &lt;/plugins&gt;\r\n   &lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\nlog file\r\n```\r\n&quot;C:\\Program Files\\BellSoft\\LibericaJDK-17\\bin\\java.exe&quot; -XX:TieredStopAtLevel=1 -noverify -Dspring.output.ansi.enabled=always &quot;-javaagent:C:\\Program Files\\JetBrains\\IntelliJ IDEA 2021.2.2\\lib\\idea_rt.jar=63010:C:\\Program Files\\JetBrains\\IntelliJ IDEA 2021.2.2\\bin&quot; -Dcom.sun.management.jmxremote -Dspring.jmx.enabled=true -Dspring.liveBeansView.mbeanDomain -Dspring.application.admin.enabled=true -Dfile.encoding=UTF-8 -classpath &quot;C:\\java projects\\helppet\\target\\classes;C:\\Users\\Admin\\.m2\\repository\\org\\springframework\\boot\\spring-boot-starter-data-jpa\\3.0.0\\spring-boot-starter-data-jpa-3.0.0.jar;C:\\Users\\Admin\\.m2\\repository\\org\\springframework\\boot\\spring-boot-starter-aop\\3.0.0\\spring-boot-starter-aop-3.0.0.jar;C:\\Users\\Admin\\.m2\\repository\\org\\springframework\\spring-aop\\6.0.2\\spring-aop-6.0.2.jar;C:\\Users\\Admin\\.m2\\repository\\org\\aspectj\\aspectjweaver\\1.9.9.1\\aspectjweaver-1.9.9.1.jar;C:\\Users\\Admin\\.m2\\repository\\org\\springframework\\boot\\spring-boot-starter-jdbc\\3.0.0\\spring-boot-starter-jdbc-3.0.0.jar;C:\\Users\\Admin\\.m2\\repository\\com\\zaxxer\\HikariCP\\5.0.1\\HikariCP-5.0.1.jar;C:\\Users\\Admin\\.m2\\repository\\org\\springframework\\spring-jdbc\\6.0.2\\spring-jdbc-6.0.2.jar;C:\\Users\\Admin\\.m2\\repository\\org\\hibernate\\orm\\hibernate-core\\6.1.5.Final\\hibernate-core-6.1.5.Final.jar;C:\\Users\\Admin\\.m2\\repository\\jakarta\\persistence\\jakarta.persistence-api\\3.1.0\\jakarta.persistence-api-3.1.0.jar;C:\\Users\\Admin\\.m2\\repository\\jakarta\\transaction\\jakarta.transaction-api\\2.0.1\\jakarta.transaction-api-2.0.1.jar;C:\\Users\\Admin\\.m2\\repository\\org\\jboss\\logging\\jboss-logging\\3.5.0.Final\\jboss-logging-3.5.0.Final.jar;C:\\Users\\Admin\\.m2\\repository\\org\\hibernate\\common\\hibernate-commons-annotations\\6.0.2.Final\\hibernate-commons-annotations-6.0.2.Final.jar;C:\\Users\\Admin\\.m2\\repository\\org\\jboss\\jandex\\2.4.2.Final\\jandex-2.4.2.Final.jar;C:\\Users\\Admin\\.m2\\repository\\com\\fasterxml\\classmate\\1.5.1\\classmate-1.5.1.jar;C:\\Users\\Admin\\.m2\\repository\\net\\bytebuddy\\byte-buddy\\1.12.19\\byte-buddy-1.12.19.jar;C:\\Users\\Admin\\.m2\\repository\\org\\glassfish\\jaxb\\jaxb-runtime\\4.0.1\\jaxb-runtime-4.0.1.jar;C:\\Users\\Admin\\.m2\\repository\\org\\glassfish\\jaxb\\jaxb-core\\4.0.1\\jaxb-core-4.0.1.jar;C:\\Users\\Admin\\.m2\\repository\\org\\eclipse\\angus\\angus-activation\\1.0.0\\angus-activation-1.0.0.jar;C:\\Users\\Admin\\.m2\\repository\\org\\glassfish\\jaxb\\txw2\\4.0.1\\txw2-4.0.1.jar;C:\\Users\\Admin\\.m2\\repository\\com\\sun\\istack\\istack-commons-runtime\\4.1.1\\istack-commons-runtime-4.1.1.jar;C:\\Users\\Admin\\.m2\\repository\\jakarta\\inject\\jakarta.inject-api\\2.0.0\\jakarta.inject-api-2.0.0.jar;C:\\Users\\Admin\\.m2\\repository\\org\\antlr\\antlr4-runtime\\4.10.1\\antlr4-runtime-4.10.1.jar;C:\\Users\\Admin\\.m2\\repository\\org\\springframework\\data\\spring-data-jpa\\3.0.0\\spring-data-jpa-3.0.0.jar;C:\\Users\\Admin\\.m2\\repository\\org\\springframework\\data\\spring-data-commons\\3.0.0\\spring-data-commons-3.0.0.jar;C:\\Users\\Admin\\.m2\\repository\\org\\springframework\\spring-orm\\6.0.2\\spring-orm-6.0.2.jar;C:\\Users\\Admin\\.m2\\repository\\org\\springframework\\spring-context\\6.0.2\\spring-context-6.0.2.jar;C:\\Users\\Admin\\.m2\\repository\\org\\springframework\\spring-tx\\6.0.2\\spring-tx-6.0.2.jar;C:\\Users\\Admin\\.m2\\repository\\org\\springframework\\spring-beans\\6.0.2\\spring-beans-6.0.2.jar;C:\\Users\\Admin\\.m2\\repository\\org\\slf4j\\slf4j-api\\2.0.4\\slf4j-api-2.0.4.jar;C:\\Users\\Admin\\.m2\\repository\\org\\springframework\\spring-aspects\\6.0.2\\spring-aspects-6.0.2.jar;C:\\Users\\Admin\\.m2\\repository\\org\\springframework\\boot\\spring-boot-starter-mustache\\3.0.0\\spring-boot-starter-mustache-3.0.0.jar;C:\\Users\\Admin\\.m2\\repository\\org\\springframework\\boot\\spring-boot-starter\\3.0.0\\spring-boot-starter-3.0.0.jar;C:\\Users\\Admin\\.m2\\repository\\org\\springframework\\boot\\spring-boot-starter-logging\\3.0.0\\spring-boot-starter-logging-3.0.0.jar;C:\\Users\\Admin\\.m2\\repository\\ch\\qos\\logback\\logback-classic\\1.4.5\\logback-classic-1.4.5.jar;C:\\Users\\Admin\\.m2\\repository\\ch\\qos\\logback\\logback-core\\1.4.5\\logback-core-1.4.5.jar;C:\\Users\\Admin\\.m2\\repository\\org\\apache\\logging\\log4j\\log4j-to-slf4j\\2.19.0\\log4j-to-slf4j-2.19.0.jar;C:\\Users\\Admin\\.m2\\repository\\org\\apache\\logging\\log4j\\log4j-api\\2.19.0\\log4j-api-2.19.0.jar;C:\\Users\\Admin\\.m2\\repository\\org\\slf4j\\jul-to-slf4j\\2.0.4\\jul-to-slf4j-2.0.4.jar;C:\\Users\\Admin\\.m2\\repository\\org\\yaml\\snakeyaml\\1.33\\snakeyaml-1.33.jar;C:\\Users\\Admin\\.m2\\repository\\com\\samskivert\\jmustache\\1.15\\jmustache-1.15.jar;C:\\Users\\Admin\\.m2\\repository\\org\\springframework\\boot\\spring-boot-starter-web\\3.0.0\\spring-boot-starter-web-3.0.0.jar;C:\\Users\\Admin\\.m2\\repository\\org\\springframework\\boot\\spring-boot-starter-json\\3.0.0\\spring-boot-starter-json-3.0.0.jar;C:\\Users\\Admin\\.m2\\repository\\com\\fasterxml\\jackson\\core\\jackson-databind\\2.14.1\\jackson-databind-2.14.1.jar;C:\\Users\\Admin\\.m2\\repository\\com\\fasterxml\\jackson\\core\\jackson-annotations\\2.14.1\\jackson-annotations-2.14.1.jar;C:\\Users\\Admin\\.m2\\repository\\com\\fasterxml\\jackson\\core\\jackson-core\\2.14.1\\jackson-core-2.14.1.jar;C:\\Users\\Admin\\.m2\\repository\\com\\fasterxml\\jackson\\datatype\\jackson-datatype-jdk8\\2.14.1\\jackson-datatype-jdk8-2.14.1.jar;C:\\Users\\Admin\\.m2\\repository\\com\\fasterxml\\jackson\\datatype\\jackson-datatype-jsr310\\2.14.1\\jackson-datatype-jsr310-2.14.1.jar;C:\\Users\\Admin\\.m2\\repository\\com\\fasterxml\\jackson\\module\\jackson-module-parameter-names\\2.14.1\\jackson-module-parameter-names-2.14.1.jar;C:\\Users\\Admin\\.m2\\repository\\org\\springframework\\spring-web\\6.0.2\\spring-web-6.0.2.jar;C:\\Users\\Admin\\.m2\\repository\\io\\micrometer\\micrometer-observation\\1.10.2\\micrometer-observation-1.10.2.jar;C:\\Users\\Admin\\.m2\\repository\\io\\micrometer\\micrometer-commons\\1.10.2\\micrometer-commons-1.10.2.jar;C:\\Users\\Admin\\.m2\\repository\\org\\springframework\\spring-webmvc\\6.0.2\\spring-webmvc-6.0.2.jar;C:\\Users\\Admin\\.m2\\repository\\org\\springframework\\spring-expression\\6.0.2\\spring-expression-6.0.2.jar;C:\\Users\\Admin\\.m2\\repository\\org\\springframework\\boot\\spring-boot-devtools\\3.0.0\\spring-boot-devtools-3.0.0.jar;C:\\Users\\Admin\\.m2\\repository\\org\\springframework\\boot\\spring-boot\\3.0.0\\spring-boot-3.0.0.jar;C:\\Users\\Admin\\.m2\\repository\\org\\springframework\\boot\\spring-boot-autoconfigure\\3.0.0\\spring-boot-autoconfigure-3.0.0.jar;C:\\Users\\Admin\\.m2\\repository\\org\\postgresql\\postgresql\\42.5.1\\postgresql-42.5.1.jar;C:\\Users\\Admin\\.m2\\repository\\org\\checkerframework\\checker-qual\\3.5.0\\checker-qual-3.5.0.jar;C:\\Users\\Admin\\.m2\\repository\\org\\springframework\\boot\\spring-boot-starter-tomcat\\3.0.0\\spring-boot-starter-tomcat-3.0.0.jar;C:\\Users\\Admin\\.m2\\repository\\jakarta\\annotation\\jakarta.annotation-api\\2.1.1\\jakarta.annotation-api-2.1.1.jar;C:\\Users\\Admin\\.m2\\repository\\org\\apache\\tomcat\\embed\\tomcat-embed-core\\10.1.1\\tomcat-embed-core-10.1.1.jar;C:\\Users\\Admin\\.m2\\repository\\org\\apache\\tomcat\\embed\\tomcat-embed-el\\10.1.1\\tomcat-embed-el-10.1.1.jar;C:\\Users\\Admin\\.m2\\repository\\org\\apache\\tomcat\\embed\\tomcat-embed-websocket\\10.1.1\\tomcat-embed-websocket-10.1.1.jar;C:\\Users\\Admin\\.m2\\repository\\jakarta\\xml\\bind\\jakarta.xml.bind-api\\4.0.0\\jakarta.xml.bind-api-4.0.0.jar;C:\\Users\\Admin\\.m2\\repository\\jakarta\\activation\\jakarta.activation-api\\2.1.0\\jakarta.activation-api-2.1.0.jar;C:\\Users\\Admin\\.m2\\repository\\org\\springframework\\spring-core\\6.0.2\\spring-core-6.0.2.jar;C:\\Users\\Admin\\.m2\\repository\\org\\springframework\\spring-jcl\\6.0.2\\spring-jcl-6.0.2.jar&quot; kz.onlineshelter.helppet.HelppetApplication\r\nOpenJDK 64-Bit Server VM warning: Options -Xverify:none and -noverify were deprecated in JDK 13 and will likely be removed in a future release.\r\n\r\n  .   ____          _            __ _ _\r\n /\\\\ / ___&#39;_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\r\n( ( )\\___ | &#39;_ | &#39;_| | &#39;_ \\/ _` | \\ \\ \\ \\\r\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\r\n  &#39;  |____| .__|_| |_|_| |_\\__, | / / / /\r\n =========|_|==============|___/=/_/_/_/\r\n :: Spring Boot ::                (v3.0.0)\r\n\r\n2022-12-22T10:18:07.901+03:00  INFO 8316 --- [  restartedMain] k.o.***.***Application                   : Starting ***Application using Java 17.0.4.1 with PID 8316 (*:\\***\\***\\target\\classes started by Admin in *:\\***\\***)\r\n2022-12-22T10:18:07.903+03:00  INFO 8316 --- [  restartedMain] k.o.***.***Application                   : No active profile set, falling back to 1 default profile: &quot;default&quot;\r\n2022-12-22T10:18:07.944+03:00  INFO 8316 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set &#39;spring.devtools.add-properties&#39; to &#39;false&#39; to disable\r\n2022-12-22T10:18:07.944+03:00  INFO 8316 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the &#39;logging.level.web&#39; property to &#39;DEBUG&#39;\r\n2022-12-22T10:18:08.400+03:00  INFO 8316 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.\r\n2022-12-22T10:18:08.435+03:00  INFO 8316 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 30 ms. Found 1 JPA repository interfaces.\r\n2022-12-22T10:18:08.807+03:00  INFO 8316 --- [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)\r\n2022-12-22T10:18:08.815+03:00  INFO 8316 --- [  restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\r\n2022-12-22T10:18:08.815+03:00  INFO 8316 --- [  restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]\r\n2022-12-22T10:18:08.861+03:00  INFO 8316 --- [  restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\r\n2022-12-22T10:18:08.861+03:00  INFO 8316 --- [  restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 917 ms\r\n2022-12-22T10:18:08.950+03:00  INFO 8316 --- [  restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...\r\n2022-12-22T10:18:09.038+03:00  INFO 8316 --- [  restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@54ef2cef\r\n2022-12-22T10:18:09.039+03:00  INFO 8316 --- [  restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.\r\n2022-12-22T10:18:09.070+03:00  INFO 8316 --- [  restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]\r\n2022-12-22T10:18:09.110+03:00  INFO 8316 --- [  restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.1.5.Final\r\n2022-12-22T10:18:09.232+03:00  WARN 8316 --- [  restartedMain] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead\r\n2022-12-22T10:18:09.344+03:00  INFO 8316 --- [  restartedMain] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect\r\n2022-12-22T10:18:09.824+03:00  INFO 8316 --- [  restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]\r\n2022-12-22T10:18:09.830+03:00  INFO 8316 --- [  restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit &#39;default&#39;\r\n2022-12-22T10:18:10.004+03:00  WARN 8316 --- [  restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning\r\n2022-12-22T10:18:10.234+03:00  INFO 8316 --- [  restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729\r\n2022-12-22T10:18:10.256+03:00  INFO 8316 --- [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path &#39;&#39;\r\n2022-12-22T10:18:10.265+03:00  INFO 8316 --- [  restartedMain] k.o.helppet.HelppetApplication           : Started HelppetApplication in 2.768 seconds (process running for 4.113)\r\n2022-12-22T10:18:13.951+03:00  INFO 8316 --- [nio-8080-exec-5] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet &#39;dispatcherServlet&#39;\r\n2022-12-22T10:18:13.952+03:00  INFO 8316 --- [nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Initializing Servlet &#39;dispatcherServlet&#39;\r\n2022-12-22T10:18:13.954+03:00  INFO 8316 --- [nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms\r\n```\r\nAfter starting the application, the corresponding table in the database is successfully created\r\n\r\nI added an annotation @Repository into Repository, added an annotation @Transactional into Controller in add method, into the signature of the same method added an anotation @ResponseBody but that didn&#39;t solve the issue.","title":"Not saving to database, Spring Boot, Hibernate, PostgreSQL","body":"<p>Spring Boot 3.0.0 application, after filling out the form and submitting it, the input field is cleared, but saving to the corresponding database table does not occur. There are no errors in the log.</p>\n<p>Model</p>\n<pre><code>import jakarta.persistence.Entity;\nimport jakarta.persistence.GeneratedValue;\nimport jakarta.persistence.GenerationType;\nimport jakarta.persistence.Id;\n\n@Entity\npublic class Message {\n    @Id\n    @GeneratedValue(strategy= GenerationType.AUTO)\n    private Integer id;\n    private String text;\n\n    public Message() {\n    }\n\n    public Message(String text) {\n        this.text = text;\n    }\n\n    public Integer getId() {\n        return id;\n    }\n\n    public void setId(Integer id) {\n        this.id = id;\n    }\n\n    public String getText() {\n        return text;\n    }\n\n    public void setText(String text) {\n        this.text = text;\n    }\n}\n\n</code></pre>\n<p>Repository</p>\n<pre><code>import kz.onlineshelter.helppet.model.Message;\nimport org.springframework.data.repository.CrudRepository;\n\npublic interface MessageRepository extends CrudRepository&lt;Message, Long&gt; {}\n</code></pre>\n<p>Controller</p>\n<pre><code>import kz.onlineshelter.helppet.model.Message;\nimport kz.onlineshelter.helppet.repository.MessageRepository;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.web.bind.annotation.*;\n\nimport java.util.Map;\n\n@Controller\n@RequestMapping(method={RequestMethod.POST,RequestMethod.GET})\npublic class AppController {\n    private final MessageRepository messageRepository;\n\n    @Autowired\n    public AppController(MessageRepository messageRepository) {\n        this.messageRepository = messageRepository;\n    }\n\n    @GetMapping(&quot;/message&quot;)\n    public String message(Map&lt;String, Object&gt; model) {\n        Iterable&lt;Message&gt; messages = messageRepository.findAll();\n\n        model.put(&quot;messages&quot;, messages);\n\n        return &quot;message&quot;;\n    }\n\n    @PostMapping\n    public String add(@RequestParam String text, Map&lt;String, Object&gt; model) {\n        Message message = new Message(text);\n\n        messageRepository.save(message);\n\n        Iterable&lt;Message&gt; messages = messageRepository.findAll();\n\n        model.put(&quot;messages&quot;, messages);\n\n        return &quot;message&quot;;\n    }\n}\n</code></pre>\n<p>Application</p>\n<pre><code>import org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class HelppetApplication {\n   public static void main(String[] args) {\n      SpringApplication.run(HelppetApplication.class, args);\n   }\n}\n</code></pre>\n<p>resources/templates/message.mustache</p>\n<pre><code>&lt;html&gt;\n\n&lt;body&gt;\n&lt;div&gt;\n    &lt;form method=&quot;post&quot;&gt;\n        &lt;input type=&quot;text&quot; name=&quot;text&quot; placeholder=&quot;Enter your text&quot; /&gt;&lt;br&gt;\n        &lt;button type=&quot;submit&quot;&gt;Add&lt;/button&gt;\n    &lt;/form&gt;\n&lt;/div&gt;\n&lt;div&gt;List of messages&lt;/div&gt;\n{{#messages}}\n    &lt;div&gt;\n        &lt;span&gt;{{text}}&lt;/span&gt;\n    &lt;/div&gt;\n{{/messages}}\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>application.properties</p>\n<pre><code>spring.datasource.url=jdbc:postgresql://localhost:5432/***\nspring.datasource.username=***\nspring.datasource.password=***\nspring.jpa.generate-ddl=true\n</code></pre>\n<p>pom.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n   xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n   &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n   &lt;parent&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n      &lt;version&gt;3.0.0&lt;/version&gt;\n      &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n   &lt;/parent&gt;\n   &lt;groupId&gt;***&lt;/groupId&gt;\n   &lt;artifactId&gt;helppet&lt;/artifactId&gt;\n   &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n   &lt;packaging&gt;war&lt;/packaging&gt;\n   &lt;name&gt;***&lt;/name&gt;\n   &lt;description&gt;***&lt;/description&gt;\n   &lt;properties&gt;\n      &lt;java.version&gt;17&lt;/java.version&gt;\n   &lt;/properties&gt;\n   &lt;dependencies&gt;\n      &lt;dependency&gt;\n         &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n         &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n      &lt;/dependency&gt;\n      &lt;dependency&gt;\n         &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n         &lt;artifactId&gt;spring-boot-starter-mustache&lt;/artifactId&gt;\n      &lt;/dependency&gt;\n      &lt;dependency&gt;\n         &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n         &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n      &lt;/dependency&gt;\n      &lt;dependency&gt;\n         &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n         &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n         &lt;scope&gt;runtime&lt;/scope&gt;\n         &lt;optional&gt;true&lt;/optional&gt;\n      &lt;/dependency&gt;\n      &lt;dependency&gt;\n         &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n         &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n         &lt;scope&gt;runtime&lt;/scope&gt;\n      &lt;/dependency&gt;\n      &lt;dependency&gt;\n         &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n         &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\n         &lt;scope&gt;provided&lt;/scope&gt;\n      &lt;/dependency&gt;\n      &lt;dependency&gt;\n         &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n         &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n         &lt;scope&gt;test&lt;/scope&gt;\n      &lt;/dependency&gt;\n   &lt;/dependencies&gt;\n\n   &lt;build&gt;\n      &lt;plugins&gt;\n         &lt;plugin&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n         &lt;/plugin&gt;\n      &lt;/plugins&gt;\n   &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>log file</p>\n<pre><code>&quot;C:\\Program Files\\BellSoft\\LibericaJDK-17\\bin\\java.exe&quot; -XX:TieredStopAtLevel=1 -noverify -Dspring.output.ansi.enabled=always &quot;-javaagent:C:\\Program Files\\JetBrains\\IntelliJ IDEA 2021.2.2\\lib\\idea_rt.jar=63010:C:\\Program Files\\JetBrains\\IntelliJ IDEA 2021.2.2\\bin&quot; -Dcom.sun.management.jmxremote -Dspring.jmx.enabled=true -Dspring.liveBeansView.mbeanDomain -Dspring.application.admin.enabled=true -Dfile.encoding=UTF-8 -classpath &quot;C:\\java projects\\helppet\\target\\classes;C:\\Users\\Admin\\.m2\\repository\\org\\springframework\\boot\\spring-boot-starter-data-jpa\\3.0.0\\spring-boot-starter-data-jpa-3.0.0.jar;C:\\Users\\Admin\\.m2\\repository\\org\\springframework\\boot\\spring-boot-starter-aop\\3.0.0\\spring-boot-starter-aop-3.0.0.jar;C:\\Users\\Admin\\.m2\\repository\\org\\springframework\\spring-aop\\6.0.2\\spring-aop-6.0.2.jar;C:\\Users\\Admin\\.m2\\repository\\org\\aspectj\\aspectjweaver\\1.9.9.1\\aspectjweaver-1.9.9.1.jar;C:\\Users\\Admin\\.m2\\repository\\org\\springframework\\boot\\spring-boot-starter-jdbc\\3.0.0\\spring-boot-starter-jdbc-3.0.0.jar;C:\\Users\\Admin\\.m2\\repository\\com\\zaxxer\\HikariCP\\5.0.1\\HikariCP-5.0.1.jar;C:\\Users\\Admin\\.m2\\repository\\org\\springframework\\spring-jdbc\\6.0.2\\spring-jdbc-6.0.2.jar;C:\\Users\\Admin\\.m2\\repository\\org\\hibernate\\orm\\hibernate-core\\6.1.5.Final\\hibernate-core-6.1.5.Final.jar;C:\\Users\\Admin\\.m2\\repository\\jakarta\\persistence\\jakarta.persistence-api\\3.1.0\\jakarta.persistence-api-3.1.0.jar;C:\\Users\\Admin\\.m2\\repository\\jakarta\\transaction\\jakarta.transaction-api\\2.0.1\\jakarta.transaction-api-2.0.1.jar;C:\\Users\\Admin\\.m2\\repository\\org\\jboss\\logging\\jboss-logging\\3.5.0.Final\\jboss-logging-3.5.0.Final.jar;C:\\Users\\Admin\\.m2\\repository\\org\\hibernate\\common\\hibernate-commons-annotations\\6.0.2.Final\\hibernate-commons-annotations-6.0.2.Final.jar;C:\\Users\\Admin\\.m2\\repository\\org\\jboss\\jandex\\2.4.2.Final\\jandex-2.4.2.Final.jar;C:\\Users\\Admin\\.m2\\repository\\com\\fasterxml\\classmate\\1.5.1\\classmate-1.5.1.jar;C:\\Users\\Admin\\.m2\\repository\\net\\bytebuddy\\byte-buddy\\1.12.19\\byte-buddy-1.12.19.jar;C:\\Users\\Admin\\.m2\\repository\\org\\glassfish\\jaxb\\jaxb-runtime\\4.0.1\\jaxb-runtime-4.0.1.jar;C:\\Users\\Admin\\.m2\\repository\\org\\glassfish\\jaxb\\jaxb-core\\4.0.1\\jaxb-core-4.0.1.jar;C:\\Users\\Admin\\.m2\\repository\\org\\eclipse\\angus\\angus-activation\\1.0.0\\angus-activation-1.0.0.jar;C:\\Users\\Admin\\.m2\\repository\\org\\glassfish\\jaxb\\txw2\\4.0.1\\txw2-4.0.1.jar;C:\\Users\\Admin\\.m2\\repository\\com\\sun\\istack\\istack-commons-runtime\\4.1.1\\istack-commons-runtime-4.1.1.jar;C:\\Users\\Admin\\.m2\\repository\\jakarta\\inject\\jakarta.inject-api\\2.0.0\\jakarta.inject-api-2.0.0.jar;C:\\Users\\Admin\\.m2\\repository\\org\\antlr\\antlr4-runtime\\4.10.1\\antlr4-runtime-4.10.1.jar;C:\\Users\\Admin\\.m2\\repository\\org\\springframework\\data\\spring-data-jpa\\3.0.0\\spring-data-jpa-3.0.0.jar;C:\\Users\\Admin\\.m2\\repository\\org\\springframework\\data\\spring-data-commons\\3.0.0\\spring-data-commons-3.0.0.jar;C:\\Users\\Admin\\.m2\\repository\\org\\springframework\\spring-orm\\6.0.2\\spring-orm-6.0.2.jar;C:\\Users\\Admin\\.m2\\repository\\org\\springframework\\spring-context\\6.0.2\\spring-context-6.0.2.jar;C:\\Users\\Admin\\.m2\\repository\\org\\springframework\\spring-tx\\6.0.2\\spring-tx-6.0.2.jar;C:\\Users\\Admin\\.m2\\repository\\org\\springframework\\spring-beans\\6.0.2\\spring-beans-6.0.2.jar;C:\\Users\\Admin\\.m2\\repository\\org\\slf4j\\slf4j-api\\2.0.4\\slf4j-api-2.0.4.jar;C:\\Users\\Admin\\.m2\\repository\\org\\springframework\\spring-aspects\\6.0.2\\spring-aspects-6.0.2.jar;C:\\Users\\Admin\\.m2\\repository\\org\\springframework\\boot\\spring-boot-starter-mustache\\3.0.0\\spring-boot-starter-mustache-3.0.0.jar;C:\\Users\\Admin\\.m2\\repository\\org\\springframework\\boot\\spring-boot-starter\\3.0.0\\spring-boot-starter-3.0.0.jar;C:\\Users\\Admin\\.m2\\repository\\org\\springframework\\boot\\spring-boot-starter-logging\\3.0.0\\spring-boot-starter-logging-3.0.0.jar;C:\\Users\\Admin\\.m2\\repository\\ch\\qos\\logback\\logback-classic\\1.4.5\\logback-classic-1.4.5.jar;C:\\Users\\Admin\\.m2\\repository\\ch\\qos\\logback\\logback-core\\1.4.5\\logback-core-1.4.5.jar;C:\\Users\\Admin\\.m2\\repository\\org\\apache\\logging\\log4j\\log4j-to-slf4j\\2.19.0\\log4j-to-slf4j-2.19.0.jar;C:\\Users\\Admin\\.m2\\repository\\org\\apache\\logging\\log4j\\log4j-api\\2.19.0\\log4j-api-2.19.0.jar;C:\\Users\\Admin\\.m2\\repository\\org\\slf4j\\jul-to-slf4j\\2.0.4\\jul-to-slf4j-2.0.4.jar;C:\\Users\\Admin\\.m2\\repository\\org\\yaml\\snakeyaml\\1.33\\snakeyaml-1.33.jar;C:\\Users\\Admin\\.m2\\repository\\com\\samskivert\\jmustache\\1.15\\jmustache-1.15.jar;C:\\Users\\Admin\\.m2\\repository\\org\\springframework\\boot\\spring-boot-starter-web\\3.0.0\\spring-boot-starter-web-3.0.0.jar;C:\\Users\\Admin\\.m2\\repository\\org\\springframework\\boot\\spring-boot-starter-json\\3.0.0\\spring-boot-starter-json-3.0.0.jar;C:\\Users\\Admin\\.m2\\repository\\com\\fasterxml\\jackson\\core\\jackson-databind\\2.14.1\\jackson-databind-2.14.1.jar;C:\\Users\\Admin\\.m2\\repository\\com\\fasterxml\\jackson\\core\\jackson-annotations\\2.14.1\\jackson-annotations-2.14.1.jar;C:\\Users\\Admin\\.m2\\repository\\com\\fasterxml\\jackson\\core\\jackson-core\\2.14.1\\jackson-core-2.14.1.jar;C:\\Users\\Admin\\.m2\\repository\\com\\fasterxml\\jackson\\datatype\\jackson-datatype-jdk8\\2.14.1\\jackson-datatype-jdk8-2.14.1.jar;C:\\Users\\Admin\\.m2\\repository\\com\\fasterxml\\jackson\\datatype\\jackson-datatype-jsr310\\2.14.1\\jackson-datatype-jsr310-2.14.1.jar;C:\\Users\\Admin\\.m2\\repository\\com\\fasterxml\\jackson\\module\\jackson-module-parameter-names\\2.14.1\\jackson-module-parameter-names-2.14.1.jar;C:\\Users\\Admin\\.m2\\repository\\org\\springframework\\spring-web\\6.0.2\\spring-web-6.0.2.jar;C:\\Users\\Admin\\.m2\\repository\\io\\micrometer\\micrometer-observation\\1.10.2\\micrometer-observation-1.10.2.jar;C:\\Users\\Admin\\.m2\\repository\\io\\micrometer\\micrometer-commons\\1.10.2\\micrometer-commons-1.10.2.jar;C:\\Users\\Admin\\.m2\\repository\\org\\springframework\\spring-webmvc\\6.0.2\\spring-webmvc-6.0.2.jar;C:\\Users\\Admin\\.m2\\repository\\org\\springframework\\spring-expression\\6.0.2\\spring-expression-6.0.2.jar;C:\\Users\\Admin\\.m2\\repository\\org\\springframework\\boot\\spring-boot-devtools\\3.0.0\\spring-boot-devtools-3.0.0.jar;C:\\Users\\Admin\\.m2\\repository\\org\\springframework\\boot\\spring-boot\\3.0.0\\spring-boot-3.0.0.jar;C:\\Users\\Admin\\.m2\\repository\\org\\springframework\\boot\\spring-boot-autoconfigure\\3.0.0\\spring-boot-autoconfigure-3.0.0.jar;C:\\Users\\Admin\\.m2\\repository\\org\\postgresql\\postgresql\\42.5.1\\postgresql-42.5.1.jar;C:\\Users\\Admin\\.m2\\repository\\org\\checkerframework\\checker-qual\\3.5.0\\checker-qual-3.5.0.jar;C:\\Users\\Admin\\.m2\\repository\\org\\springframework\\boot\\spring-boot-starter-tomcat\\3.0.0\\spring-boot-starter-tomcat-3.0.0.jar;C:\\Users\\Admin\\.m2\\repository\\jakarta\\annotation\\jakarta.annotation-api\\2.1.1\\jakarta.annotation-api-2.1.1.jar;C:\\Users\\Admin\\.m2\\repository\\org\\apache\\tomcat\\embed\\tomcat-embed-core\\10.1.1\\tomcat-embed-core-10.1.1.jar;C:\\Users\\Admin\\.m2\\repository\\org\\apache\\tomcat\\embed\\tomcat-embed-el\\10.1.1\\tomcat-embed-el-10.1.1.jar;C:\\Users\\Admin\\.m2\\repository\\org\\apache\\tomcat\\embed\\tomcat-embed-websocket\\10.1.1\\tomcat-embed-websocket-10.1.1.jar;C:\\Users\\Admin\\.m2\\repository\\jakarta\\xml\\bind\\jakarta.xml.bind-api\\4.0.0\\jakarta.xml.bind-api-4.0.0.jar;C:\\Users\\Admin\\.m2\\repository\\jakarta\\activation\\jakarta.activation-api\\2.1.0\\jakarta.activation-api-2.1.0.jar;C:\\Users\\Admin\\.m2\\repository\\org\\springframework\\spring-core\\6.0.2\\spring-core-6.0.2.jar;C:\\Users\\Admin\\.m2\\repository\\org\\springframework\\spring-jcl\\6.0.2\\spring-jcl-6.0.2.jar&quot; kz.onlineshelter.helppet.HelppetApplication\nOpenJDK 64-Bit Server VM warning: Options -Xverify:none and -noverify were deprecated in JDK 13 and will likely be removed in a future release.\n\n  .   ____          _            __ _ _\n /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n  '  |____| .__|_| |_|_| |_\\__, | / / / /\n =========|_|==============|___/=/_/_/_/\n :: Spring Boot ::                (v3.0.0)\n\n2022-12-22T10:18:07.901+03:00  INFO 8316 --- [  restartedMain] k.o.***.***Application                   : Starting ***Application using Java 17.0.4.1 with PID 8316 (*:\\***\\***\\target\\classes started by Admin in *:\\***\\***)\n2022-12-22T10:18:07.903+03:00  INFO 8316 --- [  restartedMain] k.o.***.***Application                   : No active profile set, falling back to 1 default profile: &quot;default&quot;\n2022-12-22T10:18:07.944+03:00  INFO 8316 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable\n2022-12-22T10:18:07.944+03:00  INFO 8316 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'\n2022-12-22T10:18:08.400+03:00  INFO 8316 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.\n2022-12-22T10:18:08.435+03:00  INFO 8316 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 30 ms. Found 1 JPA repository interfaces.\n2022-12-22T10:18:08.807+03:00  INFO 8316 --- [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)\n2022-12-22T10:18:08.815+03:00  INFO 8316 --- [  restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\n2022-12-22T10:18:08.815+03:00  INFO 8316 --- [  restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]\n2022-12-22T10:18:08.861+03:00  INFO 8316 --- [  restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\n2022-12-22T10:18:08.861+03:00  INFO 8316 --- [  restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 917 ms\n2022-12-22T10:18:08.950+03:00  INFO 8316 --- [  restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...\n2022-12-22T10:18:09.038+03:00  INFO 8316 --- [  restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@54ef2cef\n2022-12-22T10:18:09.039+03:00  INFO 8316 --- [  restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.\n2022-12-22T10:18:09.070+03:00  INFO 8316 --- [  restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]\n2022-12-22T10:18:09.110+03:00  INFO 8316 --- [  restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.1.5.Final\n2022-12-22T10:18:09.232+03:00  WARN 8316 --- [  restartedMain] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead\n2022-12-22T10:18:09.344+03:00  INFO 8316 --- [  restartedMain] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect\n2022-12-22T10:18:09.824+03:00  INFO 8316 --- [  restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]\n2022-12-22T10:18:09.830+03:00  INFO 8316 --- [  restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'\n2022-12-22T10:18:10.004+03:00  WARN 8316 --- [  restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning\n2022-12-22T10:18:10.234+03:00  INFO 8316 --- [  restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729\n2022-12-22T10:18:10.256+03:00  INFO 8316 --- [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path ''\n2022-12-22T10:18:10.265+03:00  INFO 8316 --- [  restartedMain] k.o.helppet.HelppetApplication           : Started HelppetApplication in 2.768 seconds (process running for 4.113)\n2022-12-22T10:18:13.951+03:00  INFO 8316 --- [nio-8080-exec-5] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'\n2022-12-22T10:18:13.952+03:00  INFO 8316 --- [nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'\n2022-12-22T10:18:13.954+03:00  INFO 8316 --- [nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms\n</code></pre>\n<p>After starting the application, the corresponding table in the database is successfully created</p>\n<p>I added an annotation @Repository into Repository, added an annotation @Transactional into Controller in add method, into the signature of the same method added an anotation @ResponseBody but that didn't solve the issue.</p>\n"},{"tags":["java","spring-boot","hibernate","hibernate-6.x"],"answers":[{"tags":[],"owner":{"account_id":3936694,"reputation":4506,"user_id":9244861,"accept_rate":67,"display_name":"Pavan Jadda"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1669698210,"creation_date":1669697482,"answer_id":74609291,"question_id":74609243,"body_markdown":"Hibernate 6 changed the way Instant date type is stored. \r\n\r\n\r\n&gt; Instant now maps to the type code SqlType.TIMESTAMP_UTC by default, which maps to the SQL type timestamp with time zone if possible, and falls back to timestamp. Due to this change, schema validation errors could occur on some databases. \r\n\r\n&gt; The migration to timestamp with time zone might require a migration expression like cast(old as timestamp with time zone). To retain backwards compatibility, configure the setting hibernate.type.preferred_instant_jdbc_type to TIMESTAMP.\r\n\r\n\r\n\r\n\r\nHibernate 5 stores the Java `Instant` in the format of `2020-08-03 14:54:40.0000000` and Hibernate 6 adds Timezone which would become `2020-08-03 14:54:40.0000000  +00:00`\r\n\r\nI am not a fan of new implementation, but if you like to change it, add below line to **application.properties** file in spring boot\r\n\r\n`spring.jpa.properties.hibernate.type.preferred_instant_jdbc_type=TIMESTAMP`\r\n\r\nSee [Hibernate 6 migration guide][1] for details.\r\n\r\n\r\n  [1]: https://github.com/hibernate/hibernate-orm/blob/6.0/migration-guide.adoc#instant-mapping-changes","title":"Spring Boot 3 and Hibernate 6 migration error: The conversion from datetime2 to DATETIMEOFFSET is unsupported","body":"<p>Hibernate 6 changed the way Instant date type is stored.</p>\n<blockquote>\n<p>Instant now maps to the type code SqlType.TIMESTAMP_UTC by default, which maps to the SQL type timestamp with time zone if possible, and falls back to timestamp. Due to this change, schema validation errors could occur on some databases.</p>\n</blockquote>\n<blockquote>\n<p>The migration to timestamp with time zone might require a migration expression like cast(old as timestamp with time zone). To retain backwards compatibility, configure the setting hibernate.type.preferred_instant_jdbc_type to TIMESTAMP.</p>\n</blockquote>\n<p>Hibernate 5 stores the Java <code>Instant</code> in the format of <code>2020-08-03 14:54:40.0000000</code> and Hibernate 6 adds Timezone which would become <code>2020-08-03 14:54:40.0000000  +00:00</code></p>\n<p>I am not a fan of new implementation, but if you like to change it, add below line to <strong>application.properties</strong> file in spring boot</p>\n<p><code>spring.jpa.properties.hibernate.type.preferred_instant_jdbc_type=TIMESTAMP</code></p>\n<p>See <a href=\"https://github.com/hibernate/hibernate-orm/blob/6.0/migration-guide.adoc#instant-mapping-changes\" rel=\"noreferrer\">Hibernate 6 migration guide</a> for details.</p>\n"},{"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":2,"creation_date":1669706263,"post_id":74609804,"comment_id":131697284,"body_markdown":"Hibernate 3 and 4 aren&#39;t even supported, miinimum is 5.6 using the Jakarta one.","body":"Hibernate 3 and 4 aren&#39;t even supported, miinimum is 5.6 using the Jakarta one."},{"owner":{"account_id":9531412,"reputation":2010,"user_id":7082956,"display_name":"Valerij Dobler"},"score":0,"creation_date":1685718428,"post_id":74609804,"comment_id":134704919,"body_markdown":"Spring Framework 6 correlates to Spring Boot 3. You read the table wrong.","body":"Spring Framework 6 correlates to Spring Boot 3. You read the table wrong."}],"tags":[],"owner":{"account_id":12876570,"reputation":1,"user_id":9313081,"display_name":"Anuja Koralage"},"comment_count":2,"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1669702487,"creation_date":1669702487,"answer_id":74609804,"question_id":74609243,"body_markdown":"Before you upgrade the version please check its compatibility. [Check here][1], If you are using Spring boot 3.0.0 better to use hibernate [3.x-4.2].\r\n\r\n\r\n  [1]: https://github.com/ghusta/matrice-versions-spring-hibernate","title":"Spring Boot 3 and Hibernate 6 migration error: The conversion from datetime2 to DATETIMEOFFSET is unsupported","body":"<p>Before you upgrade the version please check its compatibility. <a href=\"https://github.com/ghusta/matrice-versions-spring-hibernate\" rel=\"nofollow noreferrer\">Check here</a>, If you are using Spring boot 3.0.0 better to use hibernate [3.x-4.2].</p>\n"}],"owner":{"account_id":3936694,"reputation":4506,"user_id":9244861,"accept_rate":67,"display_name":"Pavan Jadda"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4147,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1671705747,"creation_date":1669696865,"question_id":74609243,"body_markdown":"I upgraded my Spring Boot project to Spring Boot 3.0.0 and Hibernate 6.x. The application starts without any error and when I access any table information that has `Instant` date type, I get below error \r\n\r\n```\r\nCaused by: com.microsoft.sqlserver.jdbc.SQLServerException: The conversion from datetime2 to DATETIMEOFFSET is unsupported.\r\n\r\n```\r\nI am using SQL Server 2016 with Spring Data 3.0.0","title":"Spring Boot 3 and Hibernate 6 migration error: The conversion from datetime2 to DATETIMEOFFSET is unsupported","body":"<p>I upgraded my Spring Boot project to Spring Boot 3.0.0 and Hibernate 6.x. The application starts without any error and when I access any table information that has <code>Instant</code> date type, I get below error</p>\n<pre><code>Caused by: com.microsoft.sqlserver.jdbc.SQLServerException: The conversion from datetime2 to DATETIMEOFFSET is unsupported.\n\n</code></pre>\n<p>I am using SQL Server 2016 with Spring Data 3.0.0</p>\n"},{"tags":["java","spring-boot","integration-testing","spock"],"comments":[{"owner":{"account_id":3672748,"reputation":3884,"user_id":3059517,"accept_rate":85,"display_name":"Mark Giaconia"},"score":0,"creation_date":1669838320,"post_id":74633439,"comment_id":131736796,"body_markdown":"Welcome to Stack Overflow! Can you post what error messages you are seeing, or any more detail?","body":"Welcome to Stack Overflow! Can you post what error messages you are seeing, or any more detail?"},{"owner":{"account_id":21959529,"reputation":73,"user_id":16237620,"display_name":"Rafa Borkowski"},"score":0,"creation_date":1669838587,"post_id":74633439,"comment_id":131736881,"body_markdown":"I have this information in spock:\n```\nCondition not satisfied:\n\ntestService != null\n|           |\nnull        false\n\nCondition not satisfied:\n\ntestService != null\n|           |\nnull        false\n\n\tat com.example.testspring3.TestSpring3ApplicationSpec.context test(TestSpring3ApplicationSpec.groovy:15)\n```\nAnd in console I cannot see characteristic info about starting spring server in spock case.","body":"I have this information in spock: ``` Condition not satisfied:  testService != null |           | null        false  Condition not satisfied:  testService != null |           | null        false  \tat com.example.testspring3.TestSpring3ApplicationSpec.context test(TestSpring3ApplicationSpec.groovy:15) ``` And in console I cannot see characteristic info about starting spring server in spock case."},{"owner":{"account_id":3672748,"reputation":3884,"user_id":3059517,"accept_rate":85,"display_name":"Mark Giaconia"},"score":0,"creation_date":1669838882,"post_id":74633439,"comment_id":131736974,"body_markdown":"That&#39;s helpful, it would be better to update/edit your answer with that info, so folks will see it easier and not have to comb through comments","body":"That&#39;s helpful, it would be better to update/edit your answer with that info, so folks will see it easier and not have to comb through comments"},{"owner":{"account_id":21959529,"reputation":73,"user_id":16237620,"display_name":"Rafa Borkowski"},"score":0,"creation_date":1669839160,"post_id":74633439,"comment_id":131737059,"body_markdown":"I know, but I cannot paste any images to my post, so I added screenshots with responses in README on github","body":"I know, but I cannot paste any images to my post, so I added screenshots with responses in README on github"},{"owner":{"account_id":67966,"reputation":12546,"user_id":2145769,"accept_rate":67,"display_name":"Leonard Br&#252;nings"},"score":0,"creation_date":1669839731,"post_id":74633439,"comment_id":131737217,"body_markdown":"https://github.com/spockframework/spock/issues/1539","body":"<a href=\"https://github.com/spockframework/spock/issues/1539\" rel=\"nofollow noreferrer\">github.com/spockframework/spock/issues/1539</a>"},{"owner":{"account_id":21959529,"reputation":73,"user_id":16237620,"display_name":"Rafa Borkowski"},"score":0,"creation_date":1669840525,"post_id":74633439,"comment_id":131737421,"body_markdown":"That is the answer for my question :D thanks a lot. Adding annotation @ContextConfiguration resolve problem and I hope that this bug will be fixed very soon","body":"That is the answer for my question :D thanks a lot. Adding annotation @ContextConfiguration resolve problem and I hope that this bug will be fixed very soon"},{"owner":{"account_id":1888781,"reputation":2007,"user_id":1707427,"display_name":"S&#246;ren"},"score":0,"creation_date":1678817334,"post_id":74633439,"comment_id":133605844,"body_markdown":"Does this answer your question? [Getting NullPointerException on autowired test subject in Spock](https://stackoverflow.com/questions/75490552/getting-nullpointerexception-on-autowired-test-subject-in-spock)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/75490552/getting-nullpointerexception-on-autowired-test-subject-in-spock\">Getting NullPointerException on autowired test subject in Spock</a>"}],"answers":[{"tags":[],"owner":{"account_id":67966,"reputation":12546,"user_id":2145769,"accept_rate":67,"display_name":"Leonard Br&#252;nings"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1669846968,"creation_date":1669846968,"answer_id":74634863,"question_id":74633439,"body_markdown":"Update to Spock 2.4-M1 which was released today.","title":"Spring Boot 3 with testing in Spock doesn&#39;t create context in @SpringBootTest test","body":"<p>Update to Spock 2.4-M1 which was released today.</p>\n"}],"owner":{"account_id":21959529,"reputation":73,"user_id":16237620,"display_name":"Rafa Borkowski"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2377,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":74634863,"answer_count":1,"score":7,"last_activity_date":1671705741,"creation_date":1669837948,"question_id":74633439,"body_markdown":"I created simple project with the newest Spring Boot 3 and spock versions, which you can find here: https://github.com/RafBorkowski/SpringBoot3SpockExample. When I try to start test with junit, context of spring starting normally and test passing, but when I try to do the same test in spock I noticed that spring is not starting and not creating context, what lead to test failure. When I downgrade Spring boot version to 2.7.5, everything work normally.\r\n\r\nP.S. I added screenshots with responses in README on github.\r\n\r\nAny ideas? ","title":"Spring Boot 3 with testing in Spock doesn&#39;t create context in @SpringBootTest test","body":"<p>I created simple project with the newest Spring Boot 3 and spock versions, which you can find here: <a href=\"https://github.com/RafBorkowski/SpringBoot3SpockExample\" rel=\"noreferrer\">https://github.com/RafBorkowski/SpringBoot3SpockExample</a>. When I try to start test with junit, context of spring starting normally and test passing, but when I try to do the same test in spock I noticed that spring is not starting and not creating context, what lead to test failure. When I downgrade Spring boot version to 2.7.5, everything work normally.</p>\n<p>P.S. I added screenshots with responses in README on github.</p>\n<p>Any ideas?</p>\n"},{"tags":["java","spring","spring-boot","spring-security"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1670222800,"post_id":74672347,"comment_id":131817213,"body_markdown":"It already is an `@Service` and thus detected. You don&#39;t need anything else.","body":"It already is an <code>@Service</code> and thus detected. You don&#39;t need anything else."},{"owner":{"account_id":4597208,"reputation":48209,"user_id":3728901,"accept_rate":58,"display_name":"Vy Do"},"score":0,"creation_date":1670223866,"post_id":74672347,"comment_id":131817456,"body_markdown":"Seemly I need customize by password_encoder, password_decoder, not default AuthenticationManagerBuilder... I am not sure, I am have very little knowledge in Spring Security. Please write for me specific lines of code.","body":"Seemly I need customize by password_encoder, password_decoder, not default AuthenticationManagerBuilder... I am not sure, I am have very little knowledge in Spring Security. Please write for me specific lines of code."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1670224254,"post_id":74672347,"comment_id":131817534,"body_markdown":"You don&#39;t need to. Expose the `PasswordEncoder` as a bean. That is all with the newer versions of Spring Security. I strongly suggest a read of the upgrade documentation.","body":"You don&#39;t need to. Expose the <code>PasswordEncoder</code> as a bean. That is all with the newer versions of Spring Security. I strongly suggest a read of the upgrade documentation."}],"owner":{"account_id":4597208,"reputation":48209,"user_id":3728901,"accept_rate":58,"display_name":"Vy Do"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":845,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1671705690,"creation_date":1670119556,"question_id":74672347,"body_markdown":"Spring Boot 2.7\r\n\r\nFile `UserDetailsImpl.java`\r\n\r\n```java\r\npackage com.example.security.services;\r\n\r\nimport com.example.models.User;\r\nimport com.fasterxml.jackson.annotation.JsonIgnore;\r\nimport org.springframework.security.core.GrantedAuthority;\r\nimport org.springframework.security.core.authority.SimpleGrantedAuthority;\r\nimport org.springframework.security.core.userdetails.UserDetails;\r\n\r\nimport java.util.Collection;\r\nimport java.util.List;\r\nimport java.util.Objects;\r\nimport java.util.stream.Collectors;\r\n\r\npublic class UserDetailsImpl implements UserDetails {\r\n\r\n    private static final long serialVersionUID = 1L;\r\n    private Long id;\r\n    private String username;\r\n    private String email;\r\n\r\n    @JsonIgnore\r\n    private String password;\r\n\r\n    private Collection&lt;? extends GrantedAuthority&gt; authorities;\r\n\r\n    public UserDetailsImpl(Long id, String username, String email, String password, Collection&lt;? extends GrantedAuthority&gt; authorities) {\r\n        this.id = id;\r\n        this.username = username;\r\n        this.email = email;\r\n        this.password = password;\r\n        this.authorities = authorities;\r\n    }\r\n\r\n    public static UserDetailsImpl build(User user) {\r\n        List&lt;GrantedAuthority&gt; authorities = user.getRoles().stream().map(role -&gt; new SimpleGrantedAuthority(role.getName().name())).collect(Collectors.toList());\r\n        return new UserDetailsImpl(user.getId(), user.getUsername(), user.getEmail(), user.getPassword(), authorities);\r\n    }\r\n\r\n    @Override\r\n    public Collection&lt;? extends GrantedAuthority&gt; getAuthorities() {\r\n        return authorities;\r\n    }\r\n\r\n    public Long getId() {\r\n        return id;\r\n    }\r\n\r\n    public String getEmail() {\r\n        return email;\r\n    }\r\n\r\n    @Override\r\n    public String getPassword() {\r\n        return password;\r\n    }\r\n\r\n    @Override\r\n    public String getUsername() {\r\n        return username;\r\n    }\r\n\r\n    @Override\r\n    public boolean isAccountNonExpired() {\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public boolean isAccountNonLocked() {\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public boolean isCredentialsNonExpired() {\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public boolean isEnabled() {\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public boolean equals(Object o) {\r\n        if (this == o)\r\n            return true;\r\n        if (o == null || getClass() != o.getClass())\r\n            return false;\r\n        UserDetailsImpl user = (UserDetailsImpl) o;\r\n        return Objects.equals(id, user.id);\r\n    }\r\n\r\n}\r\n```\r\n\r\nFile `UserDetailsServiceImpl.java`\r\n\r\n```java\r\npackage com.example.security.services;\r\n\r\nimport com.example.models.User;\r\nimport com.example.repository.UserRepository;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.security.core.userdetails.UserDetails;\r\nimport org.springframework.security.core.userdetails.UserDetailsService;\r\nimport org.springframework.security.core.userdetails.UsernameNotFoundException;\r\nimport org.springframework.stereotype.Service;\r\nimport org.springframework.transaction.annotation.Transactional;\r\n\r\n@Service\r\npublic class UserDetailsServiceImpl implements UserDetailsService {\r\n\r\n    @Autowired\r\n    UserRepository userRepository;\r\n\r\n    @Override\r\n    @Transactional\r\n    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\r\n        User user = userRepository.findByUsername(username).orElseThrow(() -&gt; new UsernameNotFoundException(&quot;User Not Found with username: &quot; + username));\r\n        return UserDetailsImpl.build(user);\r\n    }\r\n\r\n}\r\n```\r\n\r\n\r\n```java\r\n@EnableWebSecurity\r\n@Configuration\r\n@EnableGlobalMethodSecurity extends ... (\r\n        // securedEnabled = true,\r\n        // jsr250Enabled = true,\r\n        prePostEnabled = true)\r\npublic class WebSecurityConfig {\r\n\r\n    @Autowired\r\n    UserDetailsServiceImpl userDetailsService;\r\n\r\n    @Autowired\r\n    private AuthEntryPointJwt unauthorizedHandler;\r\n\r\n    @Bean\r\n    public AuthTokenFilter authenticationJwtTokenFilter() {\r\n        return new AuthTokenFilter();\r\n    }\r\n\r\n    public void configure(AuthenticationManagerBuilder authenticationManagerBuilder) throws Exception {\r\n        authenticationManagerBuilder.userDetailsService(userDetailsService).passwordEncoder(passwordEncoder());\r\n    }\r\n\r\n    @Bean\r\n    public AuthenticationManager authenticationManagerBean() throws Exception {\r\n        return super.authenticationManagerBean();\r\n    }\r\n```\r\n\r\nI tried in Spring Boot 3.0.0\r\n\r\n```java\r\n    @Bean\r\n    public UserDetailsService userDetailsService(AuthenticationManagerBuilder authenticationManagerBuilder) {\r\n        // UserDetails user = User.builder().username(&quot;user&quot;).password(&quot;{noop}test&quot;).authorities(&quot;user&quot;).build();\r\n        return userDetailsService(userDetailsService).passwordEncoder(passwordEncoder());\r\n    }\r\n```\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n[![enter image description here][2]][2]\r\n\r\nBut syntax error, how to re-write correctly?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Fc2Pa.png\r\n  [2]: https://i.stack.imgur.com/syTAa.png","title":"How to use UserDetailsService after upgrade Spring Boot 2.7.x to Spring Boot 3.0.0?","body":"<p>Spring Boot 2.7</p>\n<p>File <code>UserDetailsImpl.java</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.security.services;\n\nimport com.example.models.User;\nimport com.fasterxml.jackson.annotation.JsonIgnore;\nimport org.springframework.security.core.GrantedAuthority;\nimport org.springframework.security.core.authority.SimpleGrantedAuthority;\nimport org.springframework.security.core.userdetails.UserDetails;\n\nimport java.util.Collection;\nimport java.util.List;\nimport java.util.Objects;\nimport java.util.stream.Collectors;\n\npublic class UserDetailsImpl implements UserDetails {\n\n    private static final long serialVersionUID = 1L;\n    private Long id;\n    private String username;\n    private String email;\n\n    @JsonIgnore\n    private String password;\n\n    private Collection&lt;? extends GrantedAuthority&gt; authorities;\n\n    public UserDetailsImpl(Long id, String username, String email, String password, Collection&lt;? extends GrantedAuthority&gt; authorities) {\n        this.id = id;\n        this.username = username;\n        this.email = email;\n        this.password = password;\n        this.authorities = authorities;\n    }\n\n    public static UserDetailsImpl build(User user) {\n        List&lt;GrantedAuthority&gt; authorities = user.getRoles().stream().map(role -&gt; new SimpleGrantedAuthority(role.getName().name())).collect(Collectors.toList());\n        return new UserDetailsImpl(user.getId(), user.getUsername(), user.getEmail(), user.getPassword(), authorities);\n    }\n\n    @Override\n    public Collection&lt;? extends GrantedAuthority&gt; getAuthorities() {\n        return authorities;\n    }\n\n    public Long getId() {\n        return id;\n    }\n\n    public String getEmail() {\n        return email;\n    }\n\n    @Override\n    public String getPassword() {\n        return password;\n    }\n\n    @Override\n    public String getUsername() {\n        return username;\n    }\n\n    @Override\n    public boolean isAccountNonExpired() {\n        return true;\n    }\n\n    @Override\n    public boolean isAccountNonLocked() {\n        return true;\n    }\n\n    @Override\n    public boolean isCredentialsNonExpired() {\n        return true;\n    }\n\n    @Override\n    public boolean isEnabled() {\n        return true;\n    }\n\n    @Override\n    public boolean equals(Object o) {\n        if (this == o)\n            return true;\n        if (o == null || getClass() != o.getClass())\n            return false;\n        UserDetailsImpl user = (UserDetailsImpl) o;\n        return Objects.equals(id, user.id);\n    }\n\n}\n</code></pre>\n<p>File <code>UserDetailsServiceImpl.java</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.security.services;\n\nimport com.example.models.User;\nimport com.example.repository.UserRepository;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.security.core.userdetails.UserDetails;\nimport org.springframework.security.core.userdetails.UserDetailsService;\nimport org.springframework.security.core.userdetails.UsernameNotFoundException;\nimport org.springframework.stereotype.Service;\nimport org.springframework.transaction.annotation.Transactional;\n\n@Service\npublic class UserDetailsServiceImpl implements UserDetailsService {\n\n    @Autowired\n    UserRepository userRepository;\n\n    @Override\n    @Transactional\n    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\n        User user = userRepository.findByUsername(username).orElseThrow(() -&gt; new UsernameNotFoundException(&quot;User Not Found with username: &quot; + username));\n        return UserDetailsImpl.build(user);\n    }\n\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@EnableWebSecurity\n@Configuration\n@EnableGlobalMethodSecurity extends ... (\n        // securedEnabled = true,\n        // jsr250Enabled = true,\n        prePostEnabled = true)\npublic class WebSecurityConfig {\n\n    @Autowired\n    UserDetailsServiceImpl userDetailsService;\n\n    @Autowired\n    private AuthEntryPointJwt unauthorizedHandler;\n\n    @Bean\n    public AuthTokenFilter authenticationJwtTokenFilter() {\n        return new AuthTokenFilter();\n    }\n\n    public void configure(AuthenticationManagerBuilder authenticationManagerBuilder) throws Exception {\n        authenticationManagerBuilder.userDetailsService(userDetailsService).passwordEncoder(passwordEncoder());\n    }\n\n    @Bean\n    public AuthenticationManager authenticationManagerBean() throws Exception {\n        return super.authenticationManagerBean();\n    }\n</code></pre>\n<p>I tried in Spring Boot 3.0.0</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Bean\n    public UserDetailsService userDetailsService(AuthenticationManagerBuilder authenticationManagerBuilder) {\n        // UserDetails user = User.builder().username(&quot;user&quot;).password(&quot;{noop}test&quot;).authorities(&quot;user&quot;).build();\n        return userDetailsService(userDetailsService).passwordEncoder(passwordEncoder());\n    }\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/Fc2Pa.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Fc2Pa.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/syTAa.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/syTAa.png\" alt=\"enter image description here\" /></a></p>\n<p>But syntax error, how to re-write correctly?</p>\n"},{"tags":["java","spring","spring-boot","intellij-idea"],"answers":[{"tags":[],"owner":{"account_id":20853579,"reputation":338,"user_id":16436722,"display_name":""},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1670147454,"creation_date":1670147305,"answer_id":74674394,"question_id":74672505,"body_markdown":"It is just a reminder that configuration properties will not be available until you Make changes and annotation processor is re-run\r\n\r\nYou can enable annotation processors in IntelliJ via the following:\r\n\r\n- Click on File  \r\n- Click on Settings  \r\n- In the little search box in the upper-left hand corner, search for &quot;Annotation Processors&quot;  \r\n- Check &quot;Enable annotation processing&quot;  \r\n- Click &lt;kbd&gt;OK&lt;/kbd&gt;\r\n\r\n[![enter image description here][1]][1]\r\nor  \r\nadd dependency in pom.xml  \r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;\r\n        &lt;optional&gt;true&lt;/optional&gt;\r\n    &lt;/dependency&gt;    \r\n[Configuring the Annotation Processor][2]\r\nand add anatation `@Configuration`\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Os6Hq.png\r\n  [2]: https://docs.spring.io/spring-boot/docs/3.0.0/reference/html/configuration-metadata.html#appendix.configuration-metadata.annotation-processor","title":"How to do as guide &quot;Re-run Spring Boot Configuration Annotation Processor to update generated metadata&quot;?","body":"<p>It is just a reminder that configuration properties will not be available until you Make changes and annotation processor is re-run</p>\n<p>You can enable annotation processors in IntelliJ via the following:</p>\n<ul>\n<li>Click on File</li>\n<li>Click on Settings</li>\n<li>In the little search box in the upper-left hand corner, search for &quot;Annotation Processors&quot;</li>\n<li>Check &quot;Enable annotation processing&quot;</li>\n<li>Click <kbd>OK</kbd></li>\n</ul>\n<p><a href=\"https://i.stack.imgur.com/Os6Hq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Os6Hq.png\" alt=\"enter image description here\" /></a>\nor<br />\nadd dependency in pom.xml</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;\n    &lt;optional&gt;true&lt;/optional&gt;\n&lt;/dependency&gt;    \n</code></pre>\n<p><a href=\"https://docs.spring.io/spring-boot/docs/3.0.0/reference/html/configuration-metadata.html#appendix.configuration-metadata.annotation-processor\" rel=\"nofollow noreferrer\">Configuring the Annotation Processor</a>\nand add anatation <code>@Configuration</code></p>\n"}],"owner":{"account_id":4597208,"reputation":48209,"user_id":3728901,"accept_rate":58,"display_name":"Vy Do"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1173,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74674394,"answer_count":1,"score":1,"last_activity_date":1671705671,"creation_date":1670122215,"question_id":74672505,"body_markdown":"For example, I have file `DataSourceConfig.java`\r\n\r\n```java\r\npackage com.apress.demo;\r\n\r\nimport org.springframework.boot.context.properties.ConfigurationProperties;\r\nimport org.springframework.stereotype.Component;\r\n\r\n@Component\r\n@ConfigurationProperties(prefix = &quot;jdbc&quot;)\r\npublic class DataSourceConfig {\r\n    private String driver;\r\n    private String url;\r\n    private String username;\r\n    private String password;\r\n\r\n    @Override\r\n    public String toString() {\r\n        return &quot;DataSourceConfig [driver=&quot; + driver + &quot;, url=&quot; + url + &quot;, username=&quot; + username + &quot;]&quot;;\r\n    }\r\n\r\n    public String getDriver() {\r\n        return driver;\r\n    }\r\n\r\n    public void setDriver(String driver) {\r\n        this.driver = driver;\r\n    }\r\n\r\n    public String getUrl() {\r\n        return url;\r\n    }\r\n\r\n    public void setUrl(String url) {\r\n        this.url = url;\r\n    }\r\n\r\n    public String getUsername() {\r\n        return username;\r\n    }\r\n\r\n    public void setUsername(String username) {\r\n        this.username = username;\r\n    }\r\n\r\n    public String getPassword() {\r\n        return password;\r\n    }\r\n\r\n    public void setPassword(String password) {\r\n        this.password = password;\r\n    }\r\n\r\n}\r\n```\r\n\r\n\r\nHow to do this notice?\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/hsHbm.png","title":"How to do as guide &quot;Re-run Spring Boot Configuration Annotation Processor to update generated metadata&quot;?","body":"<p>For example, I have file <code>DataSourceConfig.java</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.apress.demo;\n\nimport org.springframework.boot.context.properties.ConfigurationProperties;\nimport org.springframework.stereotype.Component;\n\n@Component\n@ConfigurationProperties(prefix = &quot;jdbc&quot;)\npublic class DataSourceConfig {\n    private String driver;\n    private String url;\n    private String username;\n    private String password;\n\n    @Override\n    public String toString() {\n        return &quot;DataSourceConfig [driver=&quot; + driver + &quot;, url=&quot; + url + &quot;, username=&quot; + username + &quot;]&quot;;\n    }\n\n    public String getDriver() {\n        return driver;\n    }\n\n    public void setDriver(String driver) {\n        this.driver = driver;\n    }\n\n    public String getUrl() {\n        return url;\n    }\n\n    public void setUrl(String url) {\n        this.url = url;\n    }\n\n    public String getUsername() {\n        return username;\n    }\n\n    public void setUsername(String username) {\n        this.username = username;\n    }\n\n    public String getPassword() {\n        return password;\n    }\n\n    public void setPassword(String password) {\n        this.password = password;\n    }\n\n}\n</code></pre>\n<p>How to do this notice?</p>\n<p><a href=\"https://i.stack.imgur.com/hsHbm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hsHbm.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","kotlin","gradle","junit"],"owner":{"account_id":11884699,"reputation":497,"user_id":8697412,"display_name":"Barracuda"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":136,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671705636,"creation_date":1671704487,"question_id":74887086,"body_markdown":"I am trying to run all tests in my project with intellij but when I do, the compile test task runs infinitely. \r\n\r\nI ran the tests with debug option. The output shows same logs over and over related to file locks.\r\nHere is a snippet of logs\r\n\r\n        2022-12-22T12:17:52.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\r\n    2022-12-22T12:17:52.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired on daemon addresses registry.\r\n    2022-12-22T12:17:52.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\r\n    2022-12-22T12:17:52.927+0200 [DEBUG] [org.gradle.internal.resources.AbstractTrackedResourceLock] Daemon worker Thread 2: acquired lock on worker lease\r\n    2022-12-22T12:17:52.927+0200 [DEBUG] [org.gradle.internal.resources.AbstractTrackedResourceLock] Daemon worker Thread 2: released lock on worker lease\r\n    2022-12-22T12:18:02.583+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\r\n    2022-12-22T12:18:02.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired on daemon addresses registry.\r\n    2022-12-22T12:18:02.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\r\n    2022-12-22T12:18:02.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\r\n    2022-12-22T12:18:02.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired on daemon addresses registry.\r\n    2022-12-22T12:18:02.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\r\n    2022-12-22T12:18:10.304+0200 [DEBUG] [sun.rmi.client.ref] RMI RenewClean-[127.0.0.1:17128,org.jetbrains.kotlin.daemon.common.LoopbackNetworkInterface$ClientLoopbackSocketFactory@2c57e79a]: get connection\r\n    2022-12-22T12:18:10.305+0200 [DEBUG] [sun.rmi.transport.tcp] RMI RenewClean-[127.0.0.1:17128,org.jetbrains.kotlin.daemon.common.LoopbackNetworkInterface$ClientLoopbackSocketFactory@2c57e79a]: create connection\r\n    2022-12-22T12:18:10.309+0200 [DEBUG] [sun.rmi.loader] RMI RenewClean-[127.0.0.1:17128,org.jetbrains.kotlin.daemon.common.LoopbackNetworkInterface$ClientLoopbackSocketFactory@2c57e79a]: name = &quot;java.rmi.dgc.Lease&quot;, codebase = &quot;&quot;, defaultLoader = jdk.internal.loader.ClassLoaders$PlatformClassLoader@72972e91\r\n    2022-12-22T12:18:10.310+0200 [DEBUG] [sun.rmi.loader] RMI RenewClean-[127.0.0.1:17128,org.jetbrains.kotlin.daemon.common.LoopbackNetworkInterface$ClientLoopbackSocketFactory@2c57e79a]: name = &quot;java.rmi.dgc.VMID&quot;, codebase = &quot;&quot;, defaultLoader = jdk.internal.loader.ClassLoaders$PlatformClassLoader@72972e91\r\n    2022-12-22T12:18:10.310+0200 [DEBUG] [sun.rmi.loader] RMI RenewClean-[127.0.0.1:17128,org.jetbrains.kotlin.daemon.common.LoopbackNetworkInterface$ClientLoopbackSocketFactory@2c57e79a]: name = &quot;[B&quot;, codebase = &quot;&quot;, defaultLoader = jdk.internal.loader.ClassLoaders$PlatformClassLoader@72972e91\r\n    2022-12-22T12:18:10.310+0200 [DEBUG] [sun.rmi.loader] RMI RenewClean-[127.0.0.1:17128,org.jetbrains.kotlin.daemon.common.LoopbackNetworkInterface$ClientLoopbackSocketFactory@2c57e79a]: name = &quot;java.rmi.server.UID&quot;, codebase = &quot;&quot;, defaultLoader = jdk.internal.loader.ClassLoaders$PlatformClassLoader@72972e91\r\n    2022-12-22T12:18:10.310+0200 [DEBUG] [sun.rmi.client.ref] RMI RenewClean-[127.0.0.1:17128,org.jetbrains.kotlin.daemon.common.LoopbackNetworkInterface$ClientLoopbackSocketFactory@2c57e79a]: free connection (reuse = true)\r\n    2022-12-22T12:18:10.310+0200 [DEBUG] [sun.rmi.transport.tcp] RMI RenewClean-[127.0.0.1:17128,org.jetbrains.kotlin.daemon.common.LoopbackNetworkInterface$ClientLoopbackSocketFactory@2c57e79a]: reuse connection\r\n    2022-12-22T12:18:10.311+0200 [DEBUG] [sun.rmi.transport.tcp] RMI RenewClean-[127.0.0.1:17128,org.jetbrains.kotlin.daemon.common.LoopbackNetworkInterface$ClientLoopbackSocketFactory@2c57e79a]: create reaper\r\n    2022-12-22T12:18:10.577+0200 [DEBUG] [sun.rmi.transport.tcp] RMI TCP Connection(2)-127.0.0.1: accepted socket from [127.0.0.1:43282]\r\n    2022-12-22T12:18:10.578+0200 [DEBUG] [sun.rmi.transport.tcp] RMI TCP Connection(2)-127.0.0.1: (port 41601) op = 80\r\n    2022-12-22T12:18:10.578+0200 [DEBUG] [sun.rmi.loader] RMI TCP Connection(2)-127.0.0.1: name = &quot;[Ljava.rmi.server.ObjID;&quot;, codebase = &quot;&quot;, defaultLoader = jdk.internal.loader.ClassLoaders$PlatformClassLoader@72972e91\r\n    2022-12-22T12:18:10.578+0200 [DEBUG] [sun.rmi.loader] RMI TCP Connection(2)-127.0.0.1: name = &quot;java.rmi.dgc.Lease&quot;, codebase = &quot;&quot;, defaultLoader = jdk.internal.loader.ClassLoaders$PlatformClassLoader@72972e91\r\n    2022-12-22T12:18:10.579+0200 [DEBUG] [sun.rmi.loader] RMI TCP Connection(2)-127.0.0.1: name = &quot;java.rmi.dgc.VMID&quot;, codebase = &quot;&quot;, defaultLoader = jdk.internal.loader.ClassLoaders$PlatformClassLoader@72972e91\r\n    2022-12-22T12:18:10.579+0200 [DEBUG] [sun.rmi.loader] RMI TCP Connection(2)-127.0.0.1: name = &quot;[B&quot;, codebase = &quot;&quot;, defaultLoader = jdk.internal.loader.ClassLoaders$PlatformClassLoader@72972e91\r\n    2022-12-22T12:18:10.579+0200 [DEBUG] [sun.rmi.loader] RMI TCP Connection(2)-127.0.0.1: name = &quot;java.rmi.server.UID&quot;, codebase = &quot;&quot;, defaultLoader = jdk.internal.loader.ClassLoaders$PlatformClassLoader@72972e91\r\n    2022-12-22T12:18:12.583+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\r\n    2022-12-22T12:18:12.583+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired on daemon addresses registry.\r\n    2022-12-22T12:18:12.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\r\n    2022-12-22T12:18:12.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\r\n    2022-12-22T12:18:12.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired on daemon addresses registry.\r\n    2022-12-22T12:18:12.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\r\n    2022-12-22T12:18:22.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\r\n    2022-12-22T12:18:22.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired on daemon addresses registry.\r\n    2022-12-22T12:18:22.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\r\n    2022-12-22T12:18:22.585+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\r\n    2022-12-22T12:18:22.585+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired on daemon addresses registry.\r\n    2022-12-22T12:18:22.585+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\r\n    2022-12-22T12:18:22.928+0200 [DEBUG] [org.gradle.internal.resources.AbstractTrackedResourceLock] Daemon worker Thread 2: acquired lock on worker lease\r\n    2022-12-22T12:18:22.928+0200 [DEBUG] [org.gradle.internal.resources.AbstractTrackedResourceLock] Daemon worker Thread 2: released lock on worker lease\r\n    2022-12-22T12:18:25.312+0200 [DEBUG] [sun.rmi.transport.tcp] RMI Scheduler(0): close connection\r\n    2022-12-22T12:18:25.582+0200 [DEBUG] [sun.rmi.transport.tcp] RMI TCP Connection(2)-127.0.0.1: (port 41601) connection closed\r\n    2022-12-22T12:18:25.582+0200 [DEBUG] [sun.rmi.transport.tcp] RMI TCP Connection(2)-127.0.0.1: close connection\r\n    2022-12-22T12:18:32.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\r\n    2022-12-22T12:18:32.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired on daemon addresses registry.\r\n    2022-12-22T12:18:32.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\r\n    2022-12-22T12:18:32.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\r\n    2022-12-22T12:18:32.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired on daemon addresses registry.\r\n    2022-12-22T12:18:32.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\r\n    2022-12-22T12:18:42.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\r\n    2022-12-22T12:18:42.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired on daemon addresses registry.\r\n    2022-12-22T12:18:42.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\r\n    2022-12-22T12:18:42.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\r\n    2022-12-22T12:18:42.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired on daemon addresses registry.\r\n    2022-12-22T12:18:42.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\r\n    2022-12-22T12:18:52.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\r\n    2022-12-22T12:18:52.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired on daemon addresses registry.\r\n    2022-12-22T12:18:52.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\r\n    2022-12-22T12:18:52.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\r\n    2022-12-22T12:18:52.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired on daemon addresses registry.\r\n    2022-12-22T12:18:52.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\r\n    2022-12-22T12:18:52.928+0200 [DEBUG] [org.gradle.internal.resources.AbstractTrackedResourceLock] Daemon worker Thread 2: acquired lock on worker lease\r\n    2022-12-22T12:18:52.928+0200 [DEBUG] [org.gradle.internal.resources.AbstractTrackedResourceLock] Daemon worker Thread 2: released lock on worker lease\r\n    2022-12-22T12:19:02.583+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\r\n    2022-12-22T12:19:02.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired on daemon addresses registry.\r\n    2022-12-22T12:19:02.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\r\n    2022-12-22T12:19:02.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\r\n    2022-12-22T12:19:02.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired on daemon addresses registry.\r\n    2022-12-22T12:19:02.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\r\n    2022-12-22T12:19:12.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\r\n    2022-12-22T12:19:12.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired on daemon addresses registry.\r\n    2022-12-22T12:19:12.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\r\n    2022-12-22T12:19:12.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\r\n    2022-12-22T12:19:12.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired on daemon addresses registry.\r\n    2022-12-22T12:19:12.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\r\n    2022-12-22T12:19:22.583+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\r\n    2022-12-22T12:19:22.583+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired on daemon addresses registry.\r\n    2022-12-22T12:19:22.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\r\n    2022-12-22T12:19:22.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\r\n    2022-12-22T12:19:22.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired on daemon addresses registry.\r\n    2022-12-22T12:19:22.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\r\n    2022-12-22T12:19:22.928+0200 [DEBUG] [org.gradle.internal.resources.AbstractTrackedResourceLock] Daemon worker Thread 2: acquired lock on worker lease\r\n    2022-12-22T12:19:22.928+0200 [DEBUG] [org.gradle.internal.resources.AbstractTrackedResourceLock] Daemon worker Thread 2: released lock on worker lease\r\n    2022-12-22T12:19:32.583+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\r\n    2022-12-22T12:19:32.583+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired on daemon addresses registry.\r\n    2022-12-22T12:19:32.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\r\n    2022-12-22T12:19:32.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\r\n    2022-12-22T12:19:32.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired on daemon addresses registry.\r\n    2022-12-22T12:19:32.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\r\n    2022-12-22T12:19:42.583+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\r\n    2022-12-22T12:19:42.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired on daemon addresses registry.\r\n    2022-12-22T12:19:42.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\r\n    2022-12-22T12:19:42.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\r\n    2022-12-22T12:19:42.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired on daemon addresses registry.\r\n    2022-12-22T12:19:42.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\r\n\r\nWhat could be the problem? At first I thought it&#39;s a permission problem, so I ran intellij with sudo. But the result is the same.\r\n\r\nUPDATE\r\nThis the process that I found \r\n\r\n    root       18076  116 29.1 11723948 4753968 pts/1 Sl+ 11:52  50:32 /opt/idea-IU-222.3345.118/jbr/bin/java -classpath /opt/idea-IU-222.3345.118/lib/util.jar:/opt/idea-IU-222.3345.118/lib/app.jar:/opt/idea-IU-222.3345.118/lib/3rd-party-rt.jar:/opt/idea-IU-222.3345.118/lib/jna.jar:/opt/idea-IU-222.3345.118/lib/platform-statistics-devkit.jar:/opt/idea-IU-222.3345.118/lib/jps-model.jar:/opt/idea-IU-222.3345.118/lib/rd-core.jar:/opt/idea-IU-222.3345.118/lib/rd-framework.jar:/opt/idea-IU-222.3345.118/lib/stats.jar:/opt/idea-IU-222.3345.118/lib/protobuf.jar:/opt/idea-IU-222.3345.118/lib/external-system-rt.jar:/opt/idea-IU-222.3345.118/lib/jsp-base-openapi.jar:/opt/idea-IU-222.3345.118/lib/forms_rt.jar:/opt/idea-IU-222.3345.118/lib/intellij-test-discovery.jar:/opt/idea-IU-222.3345.118/lib/rd-swing.jar:/opt/idea-IU-222.3345.118/lib/annotations.jar:/opt/idea-IU-222.3345.118/lib/groovy.jar:/opt/idea-IU-222.3345.118/lib/annotations-java5.jar:/opt/idea-IU-222.3345.118/lib/asm-9.2.jar:/opt/idea-IU-222.3345.118/lib/asm-analysis-9.2.jar:/opt/idea-IU-222.3345.118/lib/asm-commons-9.2.jar:/opt/idea-IU-222.3345.118/lib/asm-tree-9.2.jar:/opt/idea-IU-222.3345.118/lib/asm-util-9.2.jar:/opt/idea-IU-222.3345.118/lib/async-profiler.jar:/opt/idea-IU-222.3345.118/lib/byte-buddy-agent.jar:/opt/idea-IU-222.3345.118/lib/error-prone-annotations.jar:/opt/idea-IU-222.3345.118/lib/externalProcess-rt.jar:/opt/idea-IU-222.3345.118/lib/grpc-netty-shaded.jar:/opt/idea-IU-222.3345.118/lib/idea_rt.jar:/opt/idea-IU-222.3345.118/lib/intellij-coverage-agent-1.0.673.jar:/opt/idea-IU-222.3345.118/lib/jffi-1.3.9-native.jar:/opt/idea-IU-222.3345.118/lib/jffi-1.3.9.jar:/opt/idea-IU-222.3345.118/lib/jnr-a64asm-1.0.0.jar:/opt/idea-IU-222.3345.118/lib/jnr-ffi-2.2.12.jar:/opt/idea-IU-222.3345.118/lib/jnr-x86asm-1.0.2.jar:/opt/idea-IU-222.3345.118/lib/jsch-agent.jar:/opt/idea-IU-222.3345.118/lib/junit.jar:/opt/idea-IU-222.3345.118/lib/junit4.jar:/opt/idea-IU-222.3345.118/lib/junixsocket-core.jar:/opt/idea-IU-222.3345.118/lib/kotlin-test-assertions-core-jvm.jar:/opt/idea-IU-222.3345.118/lib/lz4-java.jar:/opt/idea-IU-222.3345.118/lib/platform-objectSerializer-annotations.jar:/opt/idea-IU-222.3345.118/lib/pty4j.jar:/opt/idea-IU-222.3345.118/lib/rd-text.jar:/opt/idea-IU-222.3345.118/lib/tests_bootstrap.jar:/opt/idea-IU-222.3345.118/lib/uast-tests.jar:/opt/idea-IU-222.3345.118/lib/util_rt.jar:/opt/idea-IU-222.3345.118/lib/winp.jar:/opt/idea-IU-222.3345.118/lib/ant/lib/ant.jar:/opt/idea-IU-222.3345.118/lib/dbus-java-3.2.1.jar:/opt/idea-IU-222.3345.118/lib/java-utils-1.0.6.jar -Xms128m -Xmx750m -XX:ReservedCodeCacheSize=512m -XX:+UseG1GC -XX:SoftRefLRUPolicyMSPerMB=50 -XX:CICompilerCount=2 -XX:+HeapDumpOnOutOfMemoryError -XX:-OmitStackTraceInFastThrow -XX:+IgnoreUnrecognizedVMOptions -XX:CompileCommand=exclude,com/intellij/openapi/vfs/impl/FilePartNodeRoot,trieDescend -ea -Dsun.io.useCanonCaches=false -Dsun.java2d.metal=true -Djbr.catch.SIGABRT=true -Djdk.http.auth.tunneling.disabledSchemes=&quot;&quot; -Djdk.attach.allowAttachSelf=true -Djdk.module.illegalAccess.silent=true -Dkotlinx.coroutines.debug=off -Dsun.tools.attach.tmp.only=true -Xmx1994m -XX:ErrorFile=/root/java_error_in_idea_%p.log -XX:HeapDumpPath=/root/java_error_in_idea_.hprof -Djb.vmOptionsFile=/root/.config/JetBrains/IntelliJIdea2022.2/idea64.vmoptions -Djava.system.class.loader=com.intellij.util.lang.PathClassLoader -Didea.strict.classpath=true -Didea.vendor.name=JetBrains -Didea.paths.selector=IntelliJIdea2022.2 -Didea.jre.check=true -Dsplash=true --add-opens=java.base/java.io=ALL-UNNAMED --add-opens=java.base/java.lang=ALL-UNNAMED --add-opens=java.base/java.lang.reflect=ALL-UNNAMED --add-opens=java.base/java.net=ALL-UNNAMED --add-opens=java.base/java.nio=ALL-UNNAMED --add-opens=java.base/java.nio.charset=ALL-UNNAMED --add-opens=java.base/java.text=ALL-UNNAMED --add-opens=java.base/java.time=ALL-UNNAMED --add-opens=java.base/java.util=ALL-UNNAMED --add-opens=java.base/java.util.concurrent=ALL-UNNAMED --add-opens=java.base/java.util.concurrent.atomic=ALL-UNNAMED --add-opens=java.base/jdk.internal.vm=ALL-UNNAMED --add-opens=java.base/sun.nio.ch=ALL-UNNAMED --add-opens=java.base/sun.security.ssl=ALL-UNNAMED --add-opens=java.base/sun.security.util=ALL-UNNAMED --add-opens=java.desktop/com.sun.java.swing.plaf.gtk=ALL-UNNAMED --add-opens=java.desktop/java.awt=ALL-UNNAMED --add-opens=java.desktop/java.awt.dnd.peer=ALL-UNNAMED --add-opens=java.desktop/java.awt.event=ALL-UNNAMED --add-opens=java.desktop/java.awt.image=ALL-UNNAMED --add-opens=java.desktop/java.awt.peer=ALL-UNNAMED --add-opens=java.desktop/javax.swing=ALL-UNNAMED --add-opens=java.desktop/javax.swing.plaf.basic=ALL-UNNAMED --add-opens=java.desktop/javax.swing.text.html=ALL-UNNAMED --add-opens=java.desktop/sun.awt.X11=ALL-UNNAMED --add-opens=java.desktop/sun.awt.datatransfer=ALL-UNNAMED --add-opens=java.desktop/sun.awt.image=ALL-UNNAMED --add-opens=java.desktop/sun.awt=ALL-UNNAMED --add-opens=java.desktop/sun.font=ALL-UNNAMED --add-opens=java.desktop/sun.java2d=ALL-UNNAMED --add-opens=java.desktop/sun.swing=ALL-UNNAMED --add-opens=jdk.attach/sun.tools.attach=ALL-UNNAMED --add-opens=jdk.compiler/com.sun.tools.javac.api=ALL-UNNAMED --add-opens=jdk.internal.jvmstat/sun.jvmstat.monitor=ALL-UNNAMED --add-opens=jdk.jdi/com.sun.tools.jdi=ALL-UNNAMED com.intellij.idea.Main\r\n\r\nand /proc/18076/status contains indicates that the process is sleeping.","title":"Gradle tests compile task runs infinitely","body":"<p>I am trying to run all tests in my project with intellij but when I do, the compile test task runs infinitely.</p>\n<p>I ran the tests with debug option. The output shows same logs over and over related to file locks.\nHere is a snippet of logs</p>\n<pre><code>    2022-12-22T12:17:52.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\n2022-12-22T12:17:52.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired on daemon addresses registry.\n2022-12-22T12:17:52.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\n2022-12-22T12:17:52.927+0200 [DEBUG] [org.gradle.internal.resources.AbstractTrackedResourceLock] Daemon worker Thread 2: acquired lock on worker lease\n2022-12-22T12:17:52.927+0200 [DEBUG] [org.gradle.internal.resources.AbstractTrackedResourceLock] Daemon worker Thread 2: released lock on worker lease\n2022-12-22T12:18:02.583+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\n2022-12-22T12:18:02.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired on daemon addresses registry.\n2022-12-22T12:18:02.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\n2022-12-22T12:18:02.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\n2022-12-22T12:18:02.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired on daemon addresses registry.\n2022-12-22T12:18:02.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\n2022-12-22T12:18:10.304+0200 [DEBUG] [sun.rmi.client.ref] RMI RenewClean-[127.0.0.1:17128,org.jetbrains.kotlin.daemon.common.LoopbackNetworkInterface$ClientLoopbackSocketFactory@2c57e79a]: get connection\n2022-12-22T12:18:10.305+0200 [DEBUG] [sun.rmi.transport.tcp] RMI RenewClean-[127.0.0.1:17128,org.jetbrains.kotlin.daemon.common.LoopbackNetworkInterface$ClientLoopbackSocketFactory@2c57e79a]: create connection\n2022-12-22T12:18:10.309+0200 [DEBUG] [sun.rmi.loader] RMI RenewClean-[127.0.0.1:17128,org.jetbrains.kotlin.daemon.common.LoopbackNetworkInterface$ClientLoopbackSocketFactory@2c57e79a]: name = &quot;java.rmi.dgc.Lease&quot;, codebase = &quot;&quot;, defaultLoader = jdk.internal.loader.ClassLoaders$PlatformClassLoader@72972e91\n2022-12-22T12:18:10.310+0200 [DEBUG] [sun.rmi.loader] RMI RenewClean-[127.0.0.1:17128,org.jetbrains.kotlin.daemon.common.LoopbackNetworkInterface$ClientLoopbackSocketFactory@2c57e79a]: name = &quot;java.rmi.dgc.VMID&quot;, codebase = &quot;&quot;, defaultLoader = jdk.internal.loader.ClassLoaders$PlatformClassLoader@72972e91\n2022-12-22T12:18:10.310+0200 [DEBUG] [sun.rmi.loader] RMI RenewClean-[127.0.0.1:17128,org.jetbrains.kotlin.daemon.common.LoopbackNetworkInterface$ClientLoopbackSocketFactory@2c57e79a]: name = &quot;[B&quot;, codebase = &quot;&quot;, defaultLoader = jdk.internal.loader.ClassLoaders$PlatformClassLoader@72972e91\n2022-12-22T12:18:10.310+0200 [DEBUG] [sun.rmi.loader] RMI RenewClean-[127.0.0.1:17128,org.jetbrains.kotlin.daemon.common.LoopbackNetworkInterface$ClientLoopbackSocketFactory@2c57e79a]: name = &quot;java.rmi.server.UID&quot;, codebase = &quot;&quot;, defaultLoader = jdk.internal.loader.ClassLoaders$PlatformClassLoader@72972e91\n2022-12-22T12:18:10.310+0200 [DEBUG] [sun.rmi.client.ref] RMI RenewClean-[127.0.0.1:17128,org.jetbrains.kotlin.daemon.common.LoopbackNetworkInterface$ClientLoopbackSocketFactory@2c57e79a]: free connection (reuse = true)\n2022-12-22T12:18:10.310+0200 [DEBUG] [sun.rmi.transport.tcp] RMI RenewClean-[127.0.0.1:17128,org.jetbrains.kotlin.daemon.common.LoopbackNetworkInterface$ClientLoopbackSocketFactory@2c57e79a]: reuse connection\n2022-12-22T12:18:10.311+0200 [DEBUG] [sun.rmi.transport.tcp] RMI RenewClean-[127.0.0.1:17128,org.jetbrains.kotlin.daemon.common.LoopbackNetworkInterface$ClientLoopbackSocketFactory@2c57e79a]: create reaper\n2022-12-22T12:18:10.577+0200 [DEBUG] [sun.rmi.transport.tcp] RMI TCP Connection(2)-127.0.0.1: accepted socket from [127.0.0.1:43282]\n2022-12-22T12:18:10.578+0200 [DEBUG] [sun.rmi.transport.tcp] RMI TCP Connection(2)-127.0.0.1: (port 41601) op = 80\n2022-12-22T12:18:10.578+0200 [DEBUG] [sun.rmi.loader] RMI TCP Connection(2)-127.0.0.1: name = &quot;[Ljava.rmi.server.ObjID;&quot;, codebase = &quot;&quot;, defaultLoader = jdk.internal.loader.ClassLoaders$PlatformClassLoader@72972e91\n2022-12-22T12:18:10.578+0200 [DEBUG] [sun.rmi.loader] RMI TCP Connection(2)-127.0.0.1: name = &quot;java.rmi.dgc.Lease&quot;, codebase = &quot;&quot;, defaultLoader = jdk.internal.loader.ClassLoaders$PlatformClassLoader@72972e91\n2022-12-22T12:18:10.579+0200 [DEBUG] [sun.rmi.loader] RMI TCP Connection(2)-127.0.0.1: name = &quot;java.rmi.dgc.VMID&quot;, codebase = &quot;&quot;, defaultLoader = jdk.internal.loader.ClassLoaders$PlatformClassLoader@72972e91\n2022-12-22T12:18:10.579+0200 [DEBUG] [sun.rmi.loader] RMI TCP Connection(2)-127.0.0.1: name = &quot;[B&quot;, codebase = &quot;&quot;, defaultLoader = jdk.internal.loader.ClassLoaders$PlatformClassLoader@72972e91\n2022-12-22T12:18:10.579+0200 [DEBUG] [sun.rmi.loader] RMI TCP Connection(2)-127.0.0.1: name = &quot;java.rmi.server.UID&quot;, codebase = &quot;&quot;, defaultLoader = jdk.internal.loader.ClassLoaders$PlatformClassLoader@72972e91\n2022-12-22T12:18:12.583+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\n2022-12-22T12:18:12.583+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired on daemon addresses registry.\n2022-12-22T12:18:12.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\n2022-12-22T12:18:12.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\n2022-12-22T12:18:12.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired on daemon addresses registry.\n2022-12-22T12:18:12.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\n2022-12-22T12:18:22.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\n2022-12-22T12:18:22.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired on daemon addresses registry.\n2022-12-22T12:18:22.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\n2022-12-22T12:18:22.585+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\n2022-12-22T12:18:22.585+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired on daemon addresses registry.\n2022-12-22T12:18:22.585+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\n2022-12-22T12:18:22.928+0200 [DEBUG] [org.gradle.internal.resources.AbstractTrackedResourceLock] Daemon worker Thread 2: acquired lock on worker lease\n2022-12-22T12:18:22.928+0200 [DEBUG] [org.gradle.internal.resources.AbstractTrackedResourceLock] Daemon worker Thread 2: released lock on worker lease\n2022-12-22T12:18:25.312+0200 [DEBUG] [sun.rmi.transport.tcp] RMI Scheduler(0): close connection\n2022-12-22T12:18:25.582+0200 [DEBUG] [sun.rmi.transport.tcp] RMI TCP Connection(2)-127.0.0.1: (port 41601) connection closed\n2022-12-22T12:18:25.582+0200 [DEBUG] [sun.rmi.transport.tcp] RMI TCP Connection(2)-127.0.0.1: close connection\n2022-12-22T12:18:32.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\n2022-12-22T12:18:32.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired on daemon addresses registry.\n2022-12-22T12:18:32.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\n2022-12-22T12:18:32.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\n2022-12-22T12:18:32.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired on daemon addresses registry.\n2022-12-22T12:18:32.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\n2022-12-22T12:18:42.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\n2022-12-22T12:18:42.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired on daemon addresses registry.\n2022-12-22T12:18:42.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\n2022-12-22T12:18:42.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\n2022-12-22T12:18:42.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired on daemon addresses registry.\n2022-12-22T12:18:42.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\n2022-12-22T12:18:52.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\n2022-12-22T12:18:52.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired on daemon addresses registry.\n2022-12-22T12:18:52.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\n2022-12-22T12:18:52.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\n2022-12-22T12:18:52.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired on daemon addresses registry.\n2022-12-22T12:18:52.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\n2022-12-22T12:18:52.928+0200 [DEBUG] [org.gradle.internal.resources.AbstractTrackedResourceLock] Daemon worker Thread 2: acquired lock on worker lease\n2022-12-22T12:18:52.928+0200 [DEBUG] [org.gradle.internal.resources.AbstractTrackedResourceLock] Daemon worker Thread 2: released lock on worker lease\n2022-12-22T12:19:02.583+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\n2022-12-22T12:19:02.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired on daemon addresses registry.\n2022-12-22T12:19:02.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\n2022-12-22T12:19:02.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\n2022-12-22T12:19:02.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired on daemon addresses registry.\n2022-12-22T12:19:02.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\n2022-12-22T12:19:12.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\n2022-12-22T12:19:12.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired on daemon addresses registry.\n2022-12-22T12:19:12.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\n2022-12-22T12:19:12.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\n2022-12-22T12:19:12.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired on daemon addresses registry.\n2022-12-22T12:19:12.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\n2022-12-22T12:19:22.583+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\n2022-12-22T12:19:22.583+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired on daemon addresses registry.\n2022-12-22T12:19:22.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\n2022-12-22T12:19:22.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\n2022-12-22T12:19:22.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired on daemon addresses registry.\n2022-12-22T12:19:22.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\n2022-12-22T12:19:22.928+0200 [DEBUG] [org.gradle.internal.resources.AbstractTrackedResourceLock] Daemon worker Thread 2: acquired lock on worker lease\n2022-12-22T12:19:22.928+0200 [DEBUG] [org.gradle.internal.resources.AbstractTrackedResourceLock] Daemon worker Thread 2: released lock on worker lease\n2022-12-22T12:19:32.583+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\n2022-12-22T12:19:32.583+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired on daemon addresses registry.\n2022-12-22T12:19:32.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\n2022-12-22T12:19:32.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\n2022-12-22T12:19:32.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired on daemon addresses registry.\n2022-12-22T12:19:32.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\n2022-12-22T12:19:42.583+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\n2022-12-22T12:19:42.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired on daemon addresses registry.\n2022-12-22T12:19:42.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\n2022-12-22T12:19:42.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\n2022-12-22T12:19:42.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired on daemon addresses registry.\n2022-12-22T12:19:42.584+0200 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\n</code></pre>\n<p>What could be the problem? At first I thought it's a permission problem, so I ran intellij with sudo. But the result is the same.</p>\n<p>UPDATE\nThis the process that I found</p>\n<pre><code>root       18076  116 29.1 11723948 4753968 pts/1 Sl+ 11:52  50:32 /opt/idea-IU-222.3345.118/jbr/bin/java -classpath /opt/idea-IU-222.3345.118/lib/util.jar:/opt/idea-IU-222.3345.118/lib/app.jar:/opt/idea-IU-222.3345.118/lib/3rd-party-rt.jar:/opt/idea-IU-222.3345.118/lib/jna.jar:/opt/idea-IU-222.3345.118/lib/platform-statistics-devkit.jar:/opt/idea-IU-222.3345.118/lib/jps-model.jar:/opt/idea-IU-222.3345.118/lib/rd-core.jar:/opt/idea-IU-222.3345.118/lib/rd-framework.jar:/opt/idea-IU-222.3345.118/lib/stats.jar:/opt/idea-IU-222.3345.118/lib/protobuf.jar:/opt/idea-IU-222.3345.118/lib/external-system-rt.jar:/opt/idea-IU-222.3345.118/lib/jsp-base-openapi.jar:/opt/idea-IU-222.3345.118/lib/forms_rt.jar:/opt/idea-IU-222.3345.118/lib/intellij-test-discovery.jar:/opt/idea-IU-222.3345.118/lib/rd-swing.jar:/opt/idea-IU-222.3345.118/lib/annotations.jar:/opt/idea-IU-222.3345.118/lib/groovy.jar:/opt/idea-IU-222.3345.118/lib/annotations-java5.jar:/opt/idea-IU-222.3345.118/lib/asm-9.2.jar:/opt/idea-IU-222.3345.118/lib/asm-analysis-9.2.jar:/opt/idea-IU-222.3345.118/lib/asm-commons-9.2.jar:/opt/idea-IU-222.3345.118/lib/asm-tree-9.2.jar:/opt/idea-IU-222.3345.118/lib/asm-util-9.2.jar:/opt/idea-IU-222.3345.118/lib/async-profiler.jar:/opt/idea-IU-222.3345.118/lib/byte-buddy-agent.jar:/opt/idea-IU-222.3345.118/lib/error-prone-annotations.jar:/opt/idea-IU-222.3345.118/lib/externalProcess-rt.jar:/opt/idea-IU-222.3345.118/lib/grpc-netty-shaded.jar:/opt/idea-IU-222.3345.118/lib/idea_rt.jar:/opt/idea-IU-222.3345.118/lib/intellij-coverage-agent-1.0.673.jar:/opt/idea-IU-222.3345.118/lib/jffi-1.3.9-native.jar:/opt/idea-IU-222.3345.118/lib/jffi-1.3.9.jar:/opt/idea-IU-222.3345.118/lib/jnr-a64asm-1.0.0.jar:/opt/idea-IU-222.3345.118/lib/jnr-ffi-2.2.12.jar:/opt/idea-IU-222.3345.118/lib/jnr-x86asm-1.0.2.jar:/opt/idea-IU-222.3345.118/lib/jsch-agent.jar:/opt/idea-IU-222.3345.118/lib/junit.jar:/opt/idea-IU-222.3345.118/lib/junit4.jar:/opt/idea-IU-222.3345.118/lib/junixsocket-core.jar:/opt/idea-IU-222.3345.118/lib/kotlin-test-assertions-core-jvm.jar:/opt/idea-IU-222.3345.118/lib/lz4-java.jar:/opt/idea-IU-222.3345.118/lib/platform-objectSerializer-annotations.jar:/opt/idea-IU-222.3345.118/lib/pty4j.jar:/opt/idea-IU-222.3345.118/lib/rd-text.jar:/opt/idea-IU-222.3345.118/lib/tests_bootstrap.jar:/opt/idea-IU-222.3345.118/lib/uast-tests.jar:/opt/idea-IU-222.3345.118/lib/util_rt.jar:/opt/idea-IU-222.3345.118/lib/winp.jar:/opt/idea-IU-222.3345.118/lib/ant/lib/ant.jar:/opt/idea-IU-222.3345.118/lib/dbus-java-3.2.1.jar:/opt/idea-IU-222.3345.118/lib/java-utils-1.0.6.jar -Xms128m -Xmx750m -XX:ReservedCodeCacheSize=512m -XX:+UseG1GC -XX:SoftRefLRUPolicyMSPerMB=50 -XX:CICompilerCount=2 -XX:+HeapDumpOnOutOfMemoryError -XX:-OmitStackTraceInFastThrow -XX:+IgnoreUnrecognizedVMOptions -XX:CompileCommand=exclude,com/intellij/openapi/vfs/impl/FilePartNodeRoot,trieDescend -ea -Dsun.io.useCanonCaches=false -Dsun.java2d.metal=true -Djbr.catch.SIGABRT=true -Djdk.http.auth.tunneling.disabledSchemes=&quot;&quot; -Djdk.attach.allowAttachSelf=true -Djdk.module.illegalAccess.silent=true -Dkotlinx.coroutines.debug=off -Dsun.tools.attach.tmp.only=true -Xmx1994m -XX:ErrorFile=/root/java_error_in_idea_%p.log -XX:HeapDumpPath=/root/java_error_in_idea_.hprof -Djb.vmOptionsFile=/root/.config/JetBrains/IntelliJIdea2022.2/idea64.vmoptions -Djava.system.class.loader=com.intellij.util.lang.PathClassLoader -Didea.strict.classpath=true -Didea.vendor.name=JetBrains -Didea.paths.selector=IntelliJIdea2022.2 -Didea.jre.check=true -Dsplash=true --add-opens=java.base/java.io=ALL-UNNAMED --add-opens=java.base/java.lang=ALL-UNNAMED --add-opens=java.base/java.lang.reflect=ALL-UNNAMED --add-opens=java.base/java.net=ALL-UNNAMED --add-opens=java.base/java.nio=ALL-UNNAMED --add-opens=java.base/java.nio.charset=ALL-UNNAMED --add-opens=java.base/java.text=ALL-UNNAMED --add-opens=java.base/java.time=ALL-UNNAMED --add-opens=java.base/java.util=ALL-UNNAMED --add-opens=java.base/java.util.concurrent=ALL-UNNAMED --add-opens=java.base/java.util.concurrent.atomic=ALL-UNNAMED --add-opens=java.base/jdk.internal.vm=ALL-UNNAMED --add-opens=java.base/sun.nio.ch=ALL-UNNAMED --add-opens=java.base/sun.security.ssl=ALL-UNNAMED --add-opens=java.base/sun.security.util=ALL-UNNAMED --add-opens=java.desktop/com.sun.java.swing.plaf.gtk=ALL-UNNAMED --add-opens=java.desktop/java.awt=ALL-UNNAMED --add-opens=java.desktop/java.awt.dnd.peer=ALL-UNNAMED --add-opens=java.desktop/java.awt.event=ALL-UNNAMED --add-opens=java.desktop/java.awt.image=ALL-UNNAMED --add-opens=java.desktop/java.awt.peer=ALL-UNNAMED --add-opens=java.desktop/javax.swing=ALL-UNNAMED --add-opens=java.desktop/javax.swing.plaf.basic=ALL-UNNAMED --add-opens=java.desktop/javax.swing.text.html=ALL-UNNAMED --add-opens=java.desktop/sun.awt.X11=ALL-UNNAMED --add-opens=java.desktop/sun.awt.datatransfer=ALL-UNNAMED --add-opens=java.desktop/sun.awt.image=ALL-UNNAMED --add-opens=java.desktop/sun.awt=ALL-UNNAMED --add-opens=java.desktop/sun.font=ALL-UNNAMED --add-opens=java.desktop/sun.java2d=ALL-UNNAMED --add-opens=java.desktop/sun.swing=ALL-UNNAMED --add-opens=jdk.attach/sun.tools.attach=ALL-UNNAMED --add-opens=jdk.compiler/com.sun.tools.javac.api=ALL-UNNAMED --add-opens=jdk.internal.jvmstat/sun.jvmstat.monitor=ALL-UNNAMED --add-opens=jdk.jdi/com.sun.tools.jdi=ALL-UNNAMED com.intellij.idea.Main\n</code></pre>\n<p>and /proc/18076/status contains indicates that the process is sleeping.</p>\n"},{"tags":["java","spring-boot","docker","intellij-idea"],"comments":[{"owner":{"account_id":18655,"reputation":4922,"user_id":42962,"accept_rate":71,"display_name":"hooknc"},"score":0,"creation_date":1670175052,"post_id":74677853,"comment_id":131809038,"body_markdown":"You can name your Docker images and container instances in the Run configuration.","body":"You can name your Docker images and container instances in the Run configuration."},{"owner":{"account_id":13863020,"reputation":137043,"user_id":10008173,"display_name":"David Maze"},"score":0,"creation_date":1670185645,"post_id":74677853,"comment_id":131811484,"body_markdown":"The `docker build -t` option does this.  It looks like you included an image of some sort in your question; how is that PNG file related to your application or the Docker build sequence?","body":"The <code>docker build -t</code> option does this.  It looks like you included an image of some sort in your question; how is that PNG file related to your application or the Docker build sequence?"},{"owner":{"account_id":293130,"reputation":238938,"user_id":596285,"accept_rate":100,"display_name":"BMitch"},"score":0,"creation_date":1671726454,"post_id":74677853,"comment_id":132164466,"body_markdown":"Possible duplicate: https://stackoverflow.com/q/38986057/596285","body":"Possible duplicate: <a href=\"https://stackoverflow.com/q/38986057/596285\">stackoverflow.com/q/38986057/596285</a>"}],"owner":{"account_id":4597208,"reputation":48209,"user_id":3728901,"accept_rate":58,"display_name":"Vy Do"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":101,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671705593,"creation_date":1670166309,"question_id":74677853,"body_markdown":"My `Dockerfile`\r\n\r\n```\r\nFROM amazoncorretto:19-alpine3.16-jdk\r\nWORKDIR /app\r\nARG JAR_FILE=target/spring_jwt-1.0.0-SNAPSHOT.jar\r\nCOPY ${JAR_FILE} ./app.jar\r\nEXPOSE 8081\r\nENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;app.jar&quot;]\r\n```\r\n\r\nHow to set name, tag for Docker image?\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/otoEm.png","title":"&#39;&lt;unknown&gt; Dockerfile: Dockerfile&#39; has been deployed successfully","body":"<p>My <code>Dockerfile</code></p>\n<pre><code>FROM amazoncorretto:19-alpine3.16-jdk\nWORKDIR /app\nARG JAR_FILE=target/spring_jwt-1.0.0-SNAPSHOT.jar\nCOPY ${JAR_FILE} ./app.jar\nEXPOSE 8081\nENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;app.jar&quot;]\n</code></pre>\n<p>How to set name, tag for Docker image?</p>\n<p><a href=\"https://i.stack.imgur.com/otoEm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/otoEm.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","spring-boot","gradle","graalvm"],"answers":[{"tags":[],"owner":{"account_id":1640555,"reputation":1305,"user_id":1513086,"accept_rate":50,"display_name":"Ali Bigdeli"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1670259616,"creation_date":1670238424,"answer_id":74687176,"question_id":74678121,"body_markdown":"I found the solution. \r\nFirstly I added a version to my `build.gradle` file like this : \r\n\r\n```groovy \r\nplugins {\r\n\t// ...\r\n}\r\n\r\ngroup = &#39;groovy&#39;\r\nversion = &#39;1&#39; // &lt;-------------- HERE\r\nsourceCompatibility = &#39;17&#39;\r\n\r\nconfigurations {\r\n\t//...\r\n}\r\n```\r\nJust before executing the command `./gradlew nativeCompile`, I ran the following two commands : \r\n```bash \r\n$ ./gradlew processAot\r\n...\r\n\r\n$ ./gradlew processTestAot \r\n... \r\n```\r\n\r\nAfter that, everything works fine.","title":"GraalVM &quot;Invalid GAV coordinates&quot; error? (Spring boot 3)","body":"<p>I found the solution.\nFirstly I added a version to my <code>build.gradle</code> file like this :</p>\n<pre><code>plugins {\n    // ...\n}\n\ngroup = 'groovy'\nversion = '1' // &lt;-------------- HERE\nsourceCompatibility = '17'\n\nconfigurations {\n    //...\n}\n</code></pre>\n<p>Just before executing the command <code>./gradlew nativeCompile</code>, I ran the following two commands :</p>\n<pre class=\"lang-bash prettyprint-override\"><code>$ ./gradlew processAot\n...\n\n$ ./gradlew processTestAot \n... \n</code></pre>\n<p>After that, everything works fine.</p>\n"}],"owner":{"account_id":1640555,"reputation":1305,"user_id":1513086,"accept_rate":50,"display_name":"Ali Bigdeli"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":134,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74687176,"answer_count":1,"score":0,"last_activity_date":1671705510,"creation_date":1670168245,"question_id":74678121,"body_markdown":"Recently I downloaded  Spring Boot 3 to test the embedded GraalVM. I run the `./gradlew native compile command the result is: \r\n\r\n```shell \r\n$ ./gradlew nativeCompile\r\n\r\nFAILURE: Build failed with an exception.\r\n\r\n* What went wrong:\r\nCould not determine the dependencies of task &#39;:nativeCompile&#39;.\r\n&gt; Invalid GAV coordinates: groovy:it_groovy_comparre: (expected format: groupId:artifactId: version)\r\n\r\n....\r\n\r\nBUILD FAILED in 752ms\r\n\r\n```\r\n\r\nWhat is my problem with dependencies? When I run that command in debug mode there is nothing new except this error.\r\n\r\nNOTE: \r\n * my `$JAVA_HOME` variable value is: `/home/&lt;my username&gt;/.jdks/graalvm-ce-java17-22.3.0/`, which point to a Graalvm java \r\n * my build automation tool is Gradle. \r\n * When I tested the command in groovy the result was the same ","title":"GraalVM &quot;Invalid GAV coordinates&quot; error? (Spring boot 3)","body":"<p>Recently I downloaded  Spring Boot 3 to test the embedded GraalVM. I run the `./gradlew native compile command the result is:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>$ ./gradlew nativeCompile\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nCould not determine the dependencies of task ':nativeCompile'.\n&gt; Invalid GAV coordinates: groovy:it_groovy_comparre: (expected format: groupId:artifactId: version)\n\n....\n\nBUILD FAILED in 752ms\n\n</code></pre>\n<p>What is my problem with dependencies? When I run that command in debug mode there is nothing new except this error.</p>\n<p>NOTE:</p>\n<ul>\n<li>my <code>$JAVA_HOME</code> variable value is: <code>/home/&lt;my username&gt;/.jdks/graalvm-ce-java17-22.3.0/</code>, which point to a Graalvm java</li>\n<li>my build automation tool is Gradle.</li>\n<li>When I tested the command in groovy the result was the same</li>\n</ul>\n"},{"tags":["java","android","okhttp"],"answers":[{"tags":[],"owner":{"account_id":469598,"reputation":2912,"user_id":876267,"accept_rate":85,"display_name":"Mehmed"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1516999946,"creation_date":1516999946,"answer_id":48469347,"question_id":48468253,"body_markdown":"You may try following mechanism:\r\n\r\n    private int uploadedImageCount;\r\n    \r\n    ...\r\n\r\n    public void sendAll() {\r\n        uploadedImageCount = 0;\r\n        OkHttpClient client = new OkHttpClient();\r\n        client.dispatcher().setMaxRequestsPerHost(50);\r\n        MediaType MEDIA_TYPE = MediaType.parse(&quot;image/png&quot;);\r\n\r\n        for (int i = 0; i &lt; images.size(); i++) {\r\n            File sourceFile = new File(images.get(i).getImageURI());\r\n\r\n            RequestBody requestBody = new MultipartBody.Builder()\r\n                    .setType(MultipartBody.FORM)\r\n                    .addFormDataPart(&quot;image&quot;, sourceFile.getName(), RequestBody.create(MEDIA_TYPE, sourceFile))\r\n                    .addFormDataPart(&quot;name&quot;, images.get(i).getJobID())\r\n                    .build();\r\n\r\n            Request request = new Request.Builder()\r\n                    .url(&quot;xxxxxxxxxxx&quot;)\r\n                    .post(requestBody)\r\n                    .build();\r\n\r\n            client.newCall(request).enqueue(new Callback() {\r\n                @Override\r\n                public void onFailure(Call call, IOException e) {\r\n                    onImageUploadFailed();\r\n                }\r\n\r\n                @Override\r\n                public void onResponse(Call call, Response response) throws IOException {\r\n                    if (response.isSuccessful()) {\r\n                        onImageUploaded();\r\n                    } else {\r\n                        onImageUploadFailed();\r\n                    }\r\n                }\r\n            });\r\n        }\r\n\r\n        if (signatures.size() &gt; 0) {\r\n            File sourceFile = new File(Uri.parse(signatures.get(0).getImageURI()).toString());\r\n            String newJobID = signatures.get(0).getJobID().concat(&quot;-signature&quot;);\r\n\r\n            RequestBody requestBody = new MultipartBody.Builder()\r\n                    .setType(MultipartBody.FORM)\r\n                    .addFormDataPart(&quot;image&quot;, sourceFile.getName(), RequestBody.create(MEDIA_TYPE, sourceFile))\r\n                    .addFormDataPart(&quot;name&quot;, newJobID)\r\n                    .build();\r\n\r\n            Request request = new Request.Builder()\r\n                    .url(&quot;XXXXXXXXXXX&quot;)\r\n                    .post(requestBody)\r\n                    .build();\r\n\r\n            client.newCall(request).enqueue(new Callback() {\r\n                @Override\r\n                public void onFailure(Call call, IOException e) {\r\n\r\n                }\r\n\r\n                @Override\r\n                public void onResponse(Call call, Response response) throws IOException {\r\n\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    public void onImageUploaded() {\r\n        uploadedImageCount++;\r\n        if (uploadedImageCount == images.size()) {\r\n            runFinalRequest();\r\n        }\r\n    }\r\n\r\n    public void onImageUploadFailed() {\r\n        // Handle failure case. You may detect failed image and try to resend\r\n    }","title":"Sending multiple requests using OkHTTP android","body":"<p>You may try following mechanism:</p>\n\n<pre><code>private int uploadedImageCount;\n\n...\n\npublic void sendAll() {\n    uploadedImageCount = 0;\n    OkHttpClient client = new OkHttpClient();\n    client.dispatcher().setMaxRequestsPerHost(50);\n    MediaType MEDIA_TYPE = MediaType.parse(\"image/png\");\n\n    for (int i = 0; i &lt; images.size(); i++) {\n        File sourceFile = new File(images.get(i).getImageURI());\n\n        RequestBody requestBody = new MultipartBody.Builder()\n                .setType(MultipartBody.FORM)\n                .addFormDataPart(\"image\", sourceFile.getName(), RequestBody.create(MEDIA_TYPE, sourceFile))\n                .addFormDataPart(\"name\", images.get(i).getJobID())\n                .build();\n\n        Request request = new Request.Builder()\n                .url(\"xxxxxxxxxxx\")\n                .post(requestBody)\n                .build();\n\n        client.newCall(request).enqueue(new Callback() {\n            @Override\n            public void onFailure(Call call, IOException e) {\n                onImageUploadFailed();\n            }\n\n            @Override\n            public void onResponse(Call call, Response response) throws IOException {\n                if (response.isSuccessful()) {\n                    onImageUploaded();\n                } else {\n                    onImageUploadFailed();\n                }\n            }\n        });\n    }\n\n    if (signatures.size() &gt; 0) {\n        File sourceFile = new File(Uri.parse(signatures.get(0).getImageURI()).toString());\n        String newJobID = signatures.get(0).getJobID().concat(\"-signature\");\n\n        RequestBody requestBody = new MultipartBody.Builder()\n                .setType(MultipartBody.FORM)\n                .addFormDataPart(\"image\", sourceFile.getName(), RequestBody.create(MEDIA_TYPE, sourceFile))\n                .addFormDataPart(\"name\", newJobID)\n                .build();\n\n        Request request = new Request.Builder()\n                .url(\"XXXXXXXXXXX\")\n                .post(requestBody)\n                .build();\n\n        client.newCall(request).enqueue(new Callback() {\n            @Override\n            public void onFailure(Call call, IOException e) {\n\n            }\n\n            @Override\n            public void onResponse(Call call, Response response) throws IOException {\n\n            }\n        });\n    }\n}\n\npublic void onImageUploaded() {\n    uploadedImageCount++;\n    if (uploadedImageCount == images.size()) {\n        runFinalRequest();\n    }\n}\n\npublic void onImageUploadFailed() {\n    // Handle failure case. You may detect failed image and try to resend\n}\n</code></pre>\n"}],"owner":{"account_id":10927445,"reputation":415,"user_id":8031749,"accept_rate":81,"display_name":"alan samuel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7058,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":48469347,"answer_count":1,"score":3,"last_activity_date":1671705481,"creation_date":1516994884,"question_id":48468253,"body_markdown":"I am sending multiple images using `OkHTTP`. Since all the requests are asynchronous, I cannot run my final call until all the requests are done. How can I achieve this in `OkHTTP`? \r\n\r\nI need to run my `RunFinalRequest()` after all the images have been sent. What I tried is, I put the my `RunFinalRequest()` on `OnResponse()` but it sometimes doesn&#39;t go through even though there is a response. Is there a better way to do it? \r\n\r\nHere is my code:\r\n\r\n\r\n\r\n\r\n    public void SendALL(){\r\n\r\n        OkHttpClient client = new OkHttpClient();\r\n        client.dispatcher().setMaxRequestsPerHost(50);\r\n\r\n\r\n        final MediaType MEDIA_TYPE = MediaType.parse(&quot;image/png&quot;);\r\n\r\n\r\n        for (int i = 0; i &lt; images.size(); i++){\r\n\r\n\r\n            File sourceFile = new File(images.get(i).getImageURI());\r\n\r\n\r\n            RequestBody requestBody = new MultipartBody.Builder()\r\n                    .setType(MultipartBody.FORM)\r\n\r\n                    .addFormDataPart(&quot;image&quot;, sourceFile.getName(), RequestBody.create(MEDIA_TYPE, sourceFile))\r\n                    .addFormDataPart(&quot;name&quot;, images.get(i).getJobID())\r\n                    .build();\r\n\r\n            Request request = new Request.Builder()\r\n                    .url(&quot;xxxxxxxxxxx&quot;)\r\n                    .post(requestBody)\r\n                    .build();\r\n\r\n            client.newCall(request).enqueue(new Callback() {\r\n                @Override\r\n                public void onFailure(Call call, IOException e) {\r\n\r\n                }\r\n\r\n                @Override\r\n                public void onResponse(Call call, Response response) throws IOException {\r\n\r\n                }\r\n            });\r\n        }\r\n\r\n        if(signatures.size() &gt; 0){\r\n\r\n            File sourceFile = new File(Uri.parse(signatures.get(0).getImageURI()).toString());\r\n\r\n\r\n            String newJobID = signatures.get(0).getJobID().concat(&quot;-signature&quot;);\r\n\r\n\r\n            RequestBody requestBody = new MultipartBody.Builder()\r\n                    .setType(MultipartBody.FORM)\r\n\r\n                    .addFormDataPart(&quot;image&quot;, sourceFile.getName(), RequestBody.create(MEDIA_TYPE, sourceFile))\r\n                    .addFormDataPart(&quot;name&quot;, newJobID)\r\n                    .build();\r\n\r\n            Request request = new Request.Builder()\r\n                    .url(&quot;XXXXXXXXXXX&quot;)\r\n                    .post(requestBody)\r\n                    .build();\r\n\r\n            client.newCall(request).enqueue(new Callback() {\r\n                @Override\r\n                public void onFailure(Call call, IOException e) {\r\n\r\n                }\r\n\r\n                @Override\r\n                public void onResponse(Call call, Response response) throws IOException {\r\n\r\n                }\r\n            });\r\n\r\n        }\r\n\r\n    RunFinalRequest();","title":"Sending multiple requests using OkHTTP android","body":"<p>I am sending multiple images using <code>OkHTTP</code>. Since all the requests are asynchronous, I cannot run my final call until all the requests are done. How can I achieve this in <code>OkHTTP</code>?</p>\n<p>I need to run my <code>RunFinalRequest()</code> after all the images have been sent. What I tried is, I put the my <code>RunFinalRequest()</code> on <code>OnResponse()</code> but it sometimes doesn't go through even though there is a response. Is there a better way to do it?</p>\n<p>Here is my code:</p>\n<pre><code>public void SendALL(){\n\n    OkHttpClient client = new OkHttpClient();\n    client.dispatcher().setMaxRequestsPerHost(50);\n\n\n    final MediaType MEDIA_TYPE = MediaType.parse(&quot;image/png&quot;);\n\n\n    for (int i = 0; i &lt; images.size(); i++){\n\n\n        File sourceFile = new File(images.get(i).getImageURI());\n\n\n        RequestBody requestBody = new MultipartBody.Builder()\n                .setType(MultipartBody.FORM)\n\n                .addFormDataPart(&quot;image&quot;, sourceFile.getName(), RequestBody.create(MEDIA_TYPE, sourceFile))\n                .addFormDataPart(&quot;name&quot;, images.get(i).getJobID())\n                .build();\n\n        Request request = new Request.Builder()\n                .url(&quot;xxxxxxxxxxx&quot;)\n                .post(requestBody)\n                .build();\n\n        client.newCall(request).enqueue(new Callback() {\n            @Override\n            public void onFailure(Call call, IOException e) {\n\n            }\n\n            @Override\n            public void onResponse(Call call, Response response) throws IOException {\n\n            }\n        });\n    }\n\n    if(signatures.size() &gt; 0){\n\n        File sourceFile = new File(Uri.parse(signatures.get(0).getImageURI()).toString());\n\n\n        String newJobID = signatures.get(0).getJobID().concat(&quot;-signature&quot;);\n\n\n        RequestBody requestBody = new MultipartBody.Builder()\n                .setType(MultipartBody.FORM)\n\n                .addFormDataPart(&quot;image&quot;, sourceFile.getName(), RequestBody.create(MEDIA_TYPE, sourceFile))\n                .addFormDataPart(&quot;name&quot;, newJobID)\n                .build();\n\n        Request request = new Request.Builder()\n                .url(&quot;XXXXXXXXXXX&quot;)\n                .post(requestBody)\n                .build();\n\n        client.newCall(request).enqueue(new Callback() {\n            @Override\n            public void onFailure(Call call, IOException e) {\n\n            }\n\n            @Override\n            public void onResponse(Call call, Response response) throws IOException {\n\n            }\n        });\n\n    }\n\nRunFinalRequest();\n</code></pre>\n"},{"tags":["java","spring","frameworks"],"comments":[{"owner":{"account_id":216151,"reputation":26327,"user_id":471213,"accept_rate":82,"display_name":"usr-local-"},"score":15,"creation_date":1547721721,"post_id":1061717,"comment_id":95292985,"body_markdown":"I understand that the question is very broad, but I do think that in this very specific case the question is very important for junion developers who are often spoken about Spring by people who assume it is enough popular that there is no need to even tell what it does. After all, raise your hand if you never heard about Instagram and what its purpose is.... (confession: I never used Insta)","body":"I understand that the question is very broad, but I do think that in this very specific case the question is very important for junion developers who are often spoken about Spring by people who assume it is enough popular that there is no need to even tell what it does. After all, raise your hand if you never heard about Instagram and what its purpose is.... (confession: I never used Insta)"},{"owner":{"account_id":21157,"reputation":16683,"user_id":51230,"accept_rate":83,"display_name":"Maksim"},"score":2,"creation_date":1547742774,"post_id":1061717,"comment_id":95305201,"body_markdown":"Question was asked 10 years ago, and at that time Spring was a bit smaller than now with all its sub projects, such as Spring Boot, Spring Data, Spring Rest, etc. And actually that&#39;s why it was closer a year ago, because of the broadness of this question.\n\nAt the time when I asked this question I just wanted to understand DI and why it is needed.","body":"Question was asked 10 years ago, and at that time Spring was a bit smaller than now with all its sub projects, such as Spring Boot, Spring Data, Spring Rest, etc. And actually that&#39;s why it was closer a year ago, because of the broadness of this question.  At the time when I asked this question I just wanted to understand DI and why it is needed."}],"answers":[{"tags":[],"owner":{"account_id":40332,"reputation":8882,"user_id":116880,"accept_rate":94,"display_name":"stevedbrown"},"comment_count":0,"down_vote_count":1,"up_vote_count":10,"is_accepted":false,"score":9,"last_activity_date":1418720859,"creation_date":1246336322,"answer_id":1061737,"question_id":1061717,"body_markdown":"Spring is great for gluing instances of classes together.  You know that your Hibernate classes are always going to need a datasource, Spring wires them together (and has an implementation of the datasource too).  \r\n\r\nYour data access objects will always need Hibernate access, Spring wires the Hibernate classes into your DAOs for you.\r\n\r\nAdditionally, Spring basically gives you solid configurations of a bunch of libraries, and in that, gives you guidance in what libs you should use. \r\n\r\nSpring is really a great tool.  (I wasn&#39;t talking about Spring MVC, just the base framework).","title":"What exactly is Spring Framework for?","body":"<p>Spring is great for gluing instances of classes together.  You know that your Hibernate classes are always going to need a datasource, Spring wires them together (and has an implementation of the datasource too).  </p>\n\n<p>Your data access objects will always need Hibernate access, Spring wires the Hibernate classes into your DAOs for you.</p>\n\n<p>Additionally, Spring basically gives you solid configurations of a bunch of libraries, and in that, gives you guidance in what libs you should use. </p>\n\n<p>Spring is really a great tool.  (I wasn't talking about Spring MVC, just the base framework).</p>\n"},{"comments":[{"owner":{"account_id":11089,"reputation":400050,"user_id":21234,"accept_rate":91,"display_name":"skaffman"},"score":6,"creation_date":1246371556,"post_id":1061775,"comment_id":875934,"body_markdown":"Spring *contains* an MVC framework. But it&#39;s a lot, lot more than that.","body":"Spring <i>contains</i> an MVC framework. But it&#39;s a lot, lot more than that."},{"owner":{"account_id":11089,"reputation":400050,"user_id":21234,"accept_rate":91,"display_name":"skaffman"},"score":0,"creation_date":1246386244,"post_id":1061775,"comment_id":877303,"body_markdown":"Without wishing to nitpick too much, WebMVC is part of the core spring distro. Webflow, RCP et al are not.","body":"Without wishing to nitpick too much, WebMVC is part of the core spring distro. Webflow, RCP et al are not."},{"owner":{"account_id":2433769,"reputation":1393,"user_id":2124148,"accept_rate":100,"display_name":"Jossie Calderon"},"score":1,"creation_date":1465748881,"post_id":1061775,"comment_id":63020524,"body_markdown":"That&#39;s nice, I did not know that you can instantiate objects of type Interface in Java - **which is illegal** @skaffman help me understand this answer (see Instance of FourWheel)","body":"That&#39;s nice, I did not know that you can instantiate objects of type Interface in Java - <b>which is illegal</b> @skaffman help me understand this answer (see Instance of FourWheel)"}],"tags":[],"owner":{"account_id":23171,"reputation":14281,"user_id":57847,"accept_rate":76,"display_name":"Priyank"},"comment_count":3,"down_vote_count":2,"up_vote_count":66,"is_accepted":false,"score":64,"last_activity_date":1418720621,"creation_date":1246337235,"answer_id":1061775,"question_id":1061717,"body_markdown":"Spring *contains* (*as Skaffman rightly pointed out*) a MVC framework. To explain in short here are my inputs.\r\nSpring supports segregation of service layer, web layer and business layer, but what it really does best is &quot;injection&quot; of objects. So to explain that with an example consider the example below:\r\n\r\n    public interface FourWheel\r\n    {\r\n       public void drive();\r\n    }\r\n\r\n    public class Sedan implements FourWheel\r\n    {\r\n       public void drive()\r\n       {\r\n          //drive gracefully\r\n       }\r\n    }\r\n\r\n    public class SUV implements FourWheel\r\n    {\r\n       public void drive()\r\n       {\r\n          //Rule the rough terrain\r\n       }\r\n    }\r\n\r\nNow in your code you have a class called RoadTrip as follows\r\n\r\n    public class RoadTrip\r\n    {\r\n        private FourWheel myCarForTrip;\r\n    }\r\n\r\nNow whenever you want a instance of Trip; sometimes you may want a SUV to initialize FourWheel or sometimes you may want Sedan. It really depends what you want based on specific situation. \r\n\r\nTo solve this problem you&#39;d want to have a Factory Pattern as creational pattern. Where a factory returns the right instance. So eventually you&#39;ll end up with lots of glue code just to instantiate objects correctly. Spring does the job of glue code best without that glue code. You declare mappings in XML and it initialized the objects automatically. It also does lot using singleton architecture for instances and that helps in optimized memory usage.\r\n\r\nThis is also called Inversion Of Control. Other frameworks to do this are Google guice, Pico container etc. \r\n\r\nApart from this, Spring has validation framework, extensive support for DAO layer in collaboration with JDBC, iBatis and Hibernate (and many more). Provides excellent Transactional control over database transactions. \r\n\r\nThere is lot more to Spring that can be read up in good books like &quot;Pro Spring&quot;.\r\n\r\nFollowing URLs may be of help too.  \r\nhttp://static.springframework.org/docs/Spring-MVC-step-by-step/  \r\nhttp://en.wikipedia.org/wiki/Spring_Framework  \r\nhttp://www.theserverside.com/tt/articles/article.tss?l=SpringFramework  ","title":"What exactly is Spring Framework for?","body":"<p>Spring <em>contains</em> (<em>as Skaffman rightly pointed out</em>) a MVC framework. To explain in short here are my inputs.\nSpring supports segregation of service layer, web layer and business layer, but what it really does best is \"injection\" of objects. So to explain that with an example consider the example below:</p>\n\n<pre><code>public interface FourWheel\n{\n   public void drive();\n}\n\npublic class Sedan implements FourWheel\n{\n   public void drive()\n   {\n      //drive gracefully\n   }\n}\n\npublic class SUV implements FourWheel\n{\n   public void drive()\n   {\n      //Rule the rough terrain\n   }\n}\n</code></pre>\n\n<p>Now in your code you have a class called RoadTrip as follows</p>\n\n<pre><code>public class RoadTrip\n{\n    private FourWheel myCarForTrip;\n}\n</code></pre>\n\n<p>Now whenever you want a instance of Trip; sometimes you may want a SUV to initialize FourWheel or sometimes you may want Sedan. It really depends what you want based on specific situation. </p>\n\n<p>To solve this problem you'd want to have a Factory Pattern as creational pattern. Where a factory returns the right instance. So eventually you'll end up with lots of glue code just to instantiate objects correctly. Spring does the job of glue code best without that glue code. You declare mappings in XML and it initialized the objects automatically. It also does lot using singleton architecture for instances and that helps in optimized memory usage.</p>\n\n<p>This is also called Inversion Of Control. Other frameworks to do this are Google guice, Pico container etc. </p>\n\n<p>Apart from this, Spring has validation framework, extensive support for DAO layer in collaboration with JDBC, iBatis and Hibernate (and many more). Provides excellent Transactional control over database transactions. </p>\n\n<p>There is lot more to Spring that can be read up in good books like \"Pro Spring\".</p>\n\n<p>Following URLs may be of help too.<br>\n<a href=\"http://static.springframework.org/docs/Spring-MVC-step-by-step/\" rel=\"noreferrer\">http://static.springframework.org/docs/Spring-MVC-step-by-step/</a><br>\n<a href=\"http://en.wikipedia.org/wiki/Spring_Framework\" rel=\"noreferrer\">http://en.wikipedia.org/wiki/Spring_Framework</a><br>\n<a href=\"http://www.theserverside.com/tt/articles/article.tss?l=SpringFramework\" rel=\"noreferrer\">http://www.theserverside.com/tt/articles/article.tss?l=SpringFramework</a>  </p>\n"},{"tags":[],"owner":{"account_id":38490,"reputation":8552,"user_id":110478,"accept_rate":63,"display_name":"Pablojim"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1246376299,"creation_date":1246376299,"answer_id":1064408,"question_id":1061717,"body_markdown":"Spring started off as a fairly simple dependency injection system. Now it is huge and has everything in it (except for the proverbial kitchen sink).\r\n\r\nBut fear not, it is quite modular so you can use just the pieces you want.\r\n\r\nTo see where it all began try:\r\n\r\n[http://www.amazon.com/Expert-One-Design-Development-Programmer/dp/0764543857/ref=sr_1_1?ie=UTF8&amp;s=books&amp;qid=1246374863&amp;sr=1-1][1] \r\n\r\nIt might be old but it is an excellent book.\r\n\r\nFor another good book this time exclusively devoted to Spring see:\r\n\r\n[http://www.amazon.com/Professional-Java-Development-Spring-Framework/dp/0764574833/ref=sr_1_2?ie=UTF8&amp;s=books&amp;qid=1246374863&amp;sr=1-2][2]\r\n\r\nIt also references older versions of Spring but is definitely worth looking at.\r\n\r\n\r\n  [1]: http://www.amazon.com/Expert-One-Design-Development-Programmer/dp/0764543857/ref=sr_1_1?ie=UTF8&amp;s=books&amp;qid=1246374863&amp;sr=1-1\r\n  [2]: http://www.amazon.com/Professional-Java-Development-Spring-Framework/dp/0764574833/ref=sr_1_2?ie=UTF8&amp;s=books&amp;qid=1246374863&amp;sr=1-2","title":"What exactly is Spring Framework for?","body":"<p>Spring started off as a fairly simple dependency injection system. Now it is huge and has everything in it (except for the proverbial kitchen sink).</p>\n\n<p>But fear not, it is quite modular so you can use just the pieces you want.</p>\n\n<p>To see where it all began try:</p>\n\n<p><a href=\"https://rads.stackoverflow.com/amzn/click/com/0764543857\" rel=\"nofollow noreferrer\" rel=\"nofollow noreferrer\">http://www.amazon.com/Expert-One-Design-Development-Programmer/dp/0764543857/ref=sr_1_1?ie=UTF8&amp;s=books&amp;qid=1246374863&amp;sr=1-1</a> </p>\n\n<p>It might be old but it is an excellent book.</p>\n\n<p>For another good book this time exclusively devoted to Spring see:</p>\n\n<p><a href=\"https://rads.stackoverflow.com/amzn/click/com/0764574833\" rel=\"nofollow noreferrer\" rel=\"nofollow noreferrer\">http://www.amazon.com/Professional-Java-Development-Spring-Framework/dp/0764574833/ref=sr_1_2?ie=UTF8&amp;s=books&amp;qid=1246374863&amp;sr=1-2</a></p>\n\n<p>It also references older versions of Spring but is definitely worth looking at.</p>\n"},{"comments":[{"owner":{"account_id":418301,"reputation":1812,"user_id":794779,"accept_rate":93,"display_name":"fred"},"score":152,"creation_date":1325224651,"post_id":1064562,"comment_id":10786381,"body_markdown":"Whats the difference between having to change a line of code and a line of XML? The effort and maintenance hell is exactly the same, or even worse, since the external xml files arguably adds complexity? Sorry but I just dont get it, I dont see any benefit at all. Please fill me in if Im missing something.","body":"Whats the difference between having to change a line of code and a line of XML? The effort and maintenance hell is exactly the same, or even worse, since the external xml files arguably adds complexity? Sorry but I just dont get it, I dont see any benefit at all. Please fill me in if Im missing something."},{"owner":{"account_id":78181,"reputation":46967,"user_id":222674,"accept_rate":97,"display_name":"Petar Minchev"},"score":23,"creation_date":1325237523,"post_id":1064562,"comment_id":10788379,"body_markdown":"@fred - Imagine you are doing unit testing. Without dependency injection(DI can be used with annotations or with XML) you can&#39;t properly test, because you can&#39;t mock the dependencies.","body":"@fred - Imagine you are doing unit testing. Without dependency injection(DI can be used with annotations or with XML) you can&#39;t properly test, because you can&#39;t mock the dependencies."},{"owner":{"account_id":410503,"reputation":3729,"user_id":782381,"display_name":"Mike Braun"},"score":19,"creation_date":1326393912,"post_id":1064562,"comment_id":11039739,"body_markdown":"@fred - defining all injection in XML indeed makes little sense. It&#39;s a massive overhead to maintain. Therefor EJB introduced the concept of annotations for injection points. Those are much simpler and a default instance will be injected (for unit tests this can be changed once). This worked so well that Spring has now copied this approach. Note that if needed (but only if really needed) annotations can still be overriden by XML in EJB.","body":"@fred - defining all injection in XML indeed makes little sense. It&#39;s a massive overhead to maintain. Therefor EJB introduced the concept of annotations for injection points. Those are much simpler and a default instance will be injected (for unit tests this can be changed once). This worked so well that Spring has now copied this approach. Note that if needed (but only if really needed) annotations can still be overriden by XML in EJB."},{"owner":{"account_id":26963,"reputation":35564,"user_id":70616,"accept_rate":74,"display_name":"victor hugo"},"score":8,"creation_date":1337818251,"post_id":1064562,"comment_id":13937857,"body_markdown":"@fred Also, in the real world it would be changing one line of XML vs. a bunch of lines of code.","body":"@fred Also, in the real world it would be changing one line of XML vs. a bunch of lines of code."},{"owner":{"account_id":134685,"reputation":14507,"user_id":510036,"accept_rate":96,"display_name":"Qix - MONICA WAS MISTREATED"},"score":37,"creation_date":1416945866,"post_id":1064562,"comment_id":42769497,"body_markdown":"Or, you know, use a factory static method. Change the factory&#39;s return type, and now all of the classes that use that return value are changed. *Presto* Spring is now no longer needed...","body":"Or, you know, use a factory static method. Change the factory&#39;s return type, and now all of the classes that use that return value are changed. <i>Presto</i> Spring is now no longer needed..."},{"owner":{"account_id":2871380,"reputation":6293,"user_id":2464658,"accept_rate":32,"display_name":"Jack Twain"},"score":1,"creation_date":1420368984,"post_id":1064562,"comment_id":43940205,"body_markdown":"great answer, but I don&#39;t think the Spring Documentation is a great book. It didn&#39;t start with the basics as you did here. It would be great if you link a better introductory to Spring. Something that shows examples as you did to explain the ideas.","body":"great answer, but I don&#39;t think the Spring Documentation is a great book. It didn&#39;t start with the basics as you did here. It would be great if you link a better introductory to Spring. Something that shows examples as you did to explain the ideas."},{"owner":{"account_id":26963,"reputation":35564,"user_id":70616,"accept_rate":74,"display_name":"victor hugo"},"score":1,"creation_date":1420493069,"post_id":1064562,"comment_id":43986214,"body_markdown":"It used to be, almost 6 years ago when I wrote this answer (wow 6 years!)","body":"It used to be, almost 6 years ago when I wrote this answer (wow 6 years!)"},{"owner":{"account_id":2254066,"reputation":5334,"user_id":1985648,"accept_rate":59,"display_name":"Don Cheadle"},"score":8,"creation_date":1429027515,"post_id":1064562,"comment_id":47406892,"body_markdown":"@fred in this example, we see the `UserLister` object only being used once. So yes, here, it is a choice of &quot;change one line in XML, or change one line in code&quot;. But now, imagine in a larger application that `UserLister` is being used in multiple classes / packages. Now it&#39;s obvious that you&#39;d rather change the one line in XML than find every use of the class and change the instantiation (in potentially a dozen classes)","body":"@fred in this example, we see the <code>UserLister</code> object only being used once. So yes, here, it is a choice of &quot;change one line in XML, or change one line in code&quot;. But now, imagine in a larger application that <code>UserLister</code> is being used in multiple classes / packages. Now it&#39;s obvious that you&#39;d rather change the one line in XML than find every use of the class and change the instantiation (in potentially a dozen classes)"},{"owner":{"account_id":134685,"reputation":14507,"user_id":510036,"accept_rate":96,"display_name":"Qix - MONICA WAS MISTREATED"},"score":17,"creation_date":1429027787,"post_id":1064562,"comment_id":47407071,"body_markdown":"@mmcrae I&#39;d rather do one refactorization call in my IDE than write XML.","body":"@mmcrae I&#39;d rather do one refactorization call in my IDE than write XML."},{"owner":{"account_id":1926871,"reputation":1162,"user_id":1737080,"accept_rate":100,"display_name":"Prathik Rajendran M"},"score":1,"creation_date":1433243497,"post_id":1064562,"comment_id":49257160,"body_markdown":"@fred I think using a factory in this case would also lead to the same case. But without a factory if each of your view has x = new y(); then you have to go to each view and change that y to something else like z.","body":"@fred I think using a factory in this case would also lead to the same case. But without a factory if each of your view has x = new y(); then you have to go to each view and change that y to something else like z."},{"owner":{"account_id":1754183,"reputation":2119,"user_id":1602584,"accept_rate":55,"display_name":"Ash"},"score":0,"creation_date":1433297736,"post_id":1064562,"comment_id":49286687,"body_markdown":"Not the best piece of code to justify the need for a new framework. See my answer.","body":"Not the best piece of code to justify the need for a new framework. See my answer."},{"owner":{"account_id":1242585,"reputation":735,"user_id":1204819,"accept_rate":76,"display_name":"insidesin"},"score":3,"creation_date":1438684751,"post_id":1064562,"comment_id":51539778,"body_markdown":"@mmcrae Why would you change lots of lines of code? The class instantiates the dependency, so you&#39;d only replace one line of code for every &#39;different&#39; line you&#39;d be replacing in XML. I don&#39;t support Spring, nor contest it.","body":"@mmcrae Why would you change lots of lines of code? The class instantiates the dependency, so you&#39;d only replace one line of code for every &#39;different&#39; line you&#39;d be replacing in XML. I don&#39;t support Spring, nor contest it."},{"owner":{"account_id":2591971,"reputation":16544,"user_id":2246488,"accept_rate":47,"display_name":"James Wierzba"},"score":0,"creation_date":1441290921,"post_id":1064562,"comment_id":52627809,"body_markdown":"It seems Spring dependency injection is best suited for CRUD applications","body":"It seems Spring dependency injection is best suited for CRUD applications"},{"owner":{"account_id":2433769,"reputation":1393,"user_id":2124148,"accept_rate":100,"display_name":"Jossie Calderon"},"score":0,"creation_date":1465795694,"post_id":1064562,"comment_id":63031851,"body_markdown":"Actually @victorhugo, the framework **does** control the application...you got it all wrong.","body":"Actually @victorhugo, the framework <b>does</b> control the application...you got it all wrong."},{"owner":{"account_id":26963,"reputation":35564,"user_id":70616,"accept_rate":74,"display_name":"victor hugo"},"score":1,"creation_date":1470494653,"post_id":1064562,"comment_id":64979627,"body_markdown":"@JossieCalderon please elaborate your comment. Otherwise I recommend you to read http://docs.spring.io/spring/docs/current/spring-framework-reference/html/beans.html","body":"@JossieCalderon please elaborate your comment. Otherwise I recommend you to read <a href=\"http://docs.spring.io/spring/docs/current/spring-framework-reference/html/beans.html\" rel=\"nofollow noreferrer\">docs.spring.io/spring/docs/current/spring-framework-referenc&zwnj;&#8203;e/&hellip;</a>"},{"owner":{"account_id":6558676,"reputation":5363,"user_id":5070577,"accept_rate":100,"display_name":"Walfrat"},"score":0,"creation_date":1481275001,"post_id":1064562,"comment_id":69320430,"body_markdown":"@JamesWierzba absolutely not, it fits for anything that need dependency injection and is expect to grow.","body":"@JamesWierzba absolutely not, it fits for anything that need dependency injection and is expect to grow."},{"owner":{"account_id":423955,"reputation":2521,"user_id":803674,"accept_rate":76,"display_name":"niken"},"score":4,"creation_date":1495132913,"post_id":1064562,"comment_id":75136033,"body_markdown":"Spring is good for people who don&#39;t want to spend effort to learn and think and use an api... It yields absolutely nothing and solves very little. Added complexity of having to load a tone of useless spring classes and potential memory leaks and learning to understand the framework is a deterent. I see no use for it other than just saying &quot;yea i know how to write xml configs, hee haw&quot; Anyways 75 up votes cannot be wrong... Spring is more or less useless library, the only reason people use it is because it&#39;s popular. Almost 10 years working with java I have yet to see a useful implementation","body":"Spring is good for people who don&#39;t want to spend effort to learn and think and use an api... It yields absolutely nothing and solves very little. Added complexity of having to load a tone of useless spring classes and potential memory leaks and learning to understand the framework is a deterent. I see no use for it other than just saying &quot;yea i know how to write xml configs, hee haw&quot; Anyways 75 up votes cannot be wrong... Spring is more or less useless library, the only reason people use it is because it&#39;s popular. Almost 10 years working with java I have yet to see a useful implementation"},{"owner":{"account_id":42147,"reputation":16251,"user_id":2326914,"accept_rate":33,"display_name":"Rog&#233;rio"},"score":0,"creation_date":1504830198,"post_id":1064562,"comment_id":79176685,"body_markdown":"@mamakin So very true... I have seen Spring used in a few real-world projects, but so far it has always clearly being used for purely political reasons - only adding unnecessary complexity, without solving any real problems or adding any flexibilty that actually got used.","body":"@mamakin So very true... I have seen Spring used in a few real-world projects, but so far it has always clearly being used for purely political reasons - only adding unnecessary complexity, without solving any real problems or adding any flexibilty that actually got used."},{"owner":{"account_id":423955,"reputation":2521,"user_id":803674,"accept_rate":76,"display_name":"niken"},"score":0,"creation_date":1504883245,"post_id":1064562,"comment_id":79201537,"body_markdown":"I have to add a caveat to my last comment &quot;adds very little&quot; and &quot;solve nothing&quot; are not entirely accurate statements... While it&#39;s true that spring is over-and-miss used a lot, there are places where it shines and is absolutely invaluable. One such place is transactions and eip. Spring libs give you a standard approach to orchestrating and enlisting transactions. This functionality is absolutely invaluable in certain applications...","body":"I have to add a caveat to my last comment &quot;adds very little&quot; and &quot;solve nothing&quot; are not entirely accurate statements... While it&#39;s true that spring is over-and-miss used a lot, there are places where it shines and is absolutely invaluable. One such place is transactions and eip. Spring libs give you a standard approach to orchestrating and enlisting transactions. This functionality is absolutely invaluable in certain applications..."},{"owner":{"account_id":6716155,"reputation":127,"user_id":5177929,"accept_rate":83,"display_name":"Zolt&#225;n Raffai"},"score":0,"creation_date":1531123367,"post_id":1064562,"comment_id":89460143,"body_markdown":"Spring is a framework that aims to reduce the complexity and helps to make a lot of things simpler to develop.\nIn parallel with the above, it also helps to reduce the lots of boilerplate code which you couldnt get rid of before: The necessary code which is repetitive and draws focus away from the main logic. Here are some history and approach to why spring was born: https://www.zoltanraffai.com/blog/what-is-spring-framework-in-java/","body":"Spring is a framework that aims to reduce the complexity and helps to make a lot of things simpler to develop. In parallel with the above, it also helps to reduce the lots of boilerplate code which you couldnt get rid of before: The necessary code which is repetitive and draws focus away from the main logic. Here are some history and approach to why spring was born: <a href=\"https://www.zoltanraffai.com/blog/what-is-spring-framework-in-java/\" rel=\"nofollow noreferrer\">zoltanraffai.com/blog/what-is-spring-framework-in-java</a>"},{"owner":{"account_id":146428,"reputation":9156,"user_id":356887,"accept_rate":78,"display_name":"xdhmoore"},"score":0,"creation_date":1553195020,"post_id":1064562,"comment_id":97304747,"body_markdown":"Also, the guys at spring are software engineering wizards. I&#39;m always impressed at when I read the spring code at how elegant things are.","body":"Also, the guys at spring are software engineering wizards. I&#39;m always impressed at when I read the spring code at how elegant things are."},{"owner":{"account_id":5483053,"reputation":406,"user_id":4358787,"display_name":"Gaurav"},"score":0,"creation_date":1561097923,"post_id":1064562,"comment_id":99959961,"body_markdown":"@victorhugo flawless answer!","body":"@victorhugo flawless answer!"},{"owner":{"account_id":2977114,"reputation":3234,"user_id":2527942,"accept_rate":78,"display_name":"Erdinc Ay"},"score":0,"creation_date":1567774782,"post_id":1064562,"comment_id":102075071,"body_markdown":"In my opinion, that was only the starting point of Spring. I met one of the core-developers of Spring and their intention is a fully-comprehensive Java SE stack alternative to Java EE application development.","body":"In my opinion, that was only the starting point of Spring. I met one of the core-developers of Spring and their intention is a fully-comprehensive Java SE stack alternative to Java EE application development."},{"owner":{"account_id":4351385,"reputation":1031,"user_id":3551604,"display_name":"c-x-berger"},"score":2,"creation_date":1595964388,"post_id":1064562,"comment_id":111655097,"body_markdown":"&gt; What if I don&#39;t want to use Spring anymore? Just don&#39;t use it! Your application isn&#39;t coupled to it.\nah, yes, all these `@Autowired`/`@Inject`ed fields will still work without Spring putting values in place for me","body":"&gt; What if I don&#39;t want to use Spring anymore? Just don&#39;t use it! Your application isn&#39;t coupled to it. ah, yes, all these <code>@Autowired</code>/<code>@Inject</code>ed fields will still work without Spring putting values in place for me"}],"tags":[],"owner":{"account_id":26963,"reputation":35564,"user_id":70616,"accept_rate":74,"display_name":"victor hugo"},"comment_count":24,"down_vote_count":1,"up_vote_count":741,"is_accepted":true,"score":740,"last_activity_date":1671705315,"creation_date":1246377840,"answer_id":1064562,"question_id":1061717,"body_markdown":"Basically Spring is a framework for [Tag:Dependency-Injection] which is a pattern that allows building very decoupled systems.\r\n\r\n## The problem ##\r\n\r\nFor example, suppose you need to list the users of the system and thus declare an interface called `UserLister`:\r\n\r\n```java\r\npublic interface UserLister {\r\n    List&lt;User&gt; getUsers();\r\n}\r\n```\r\n\r\nAnd maybe an implementation accessing a database to get all the users:\r\n\r\n```java\r\npublic class UserListerDB implements UserLister {\r\n    public List&lt;User&gt; getUsers() {\r\n        // DB access code here\r\n    }\r\n}\r\n```\r\n\r\nIn your view you&#39;ll need to access an instance (just an example, remember):\r\n\r\n```java\r\npublic class SomeView {\r\n    private UserLister userLister;\r\n\r\n    public void render() {\r\n        List&lt;User&gt; users = userLister.getUsers();\r\n        view.render(users);\r\n    }\r\n}\r\n```\r\n\r\nNote that the code above hasn&#39;t initialized the variable `userLister`. What should we do? If I explicitly instantiate the object like this:\r\n\r\n```java\r\nUserLister userLister = new UserListerDB();\r\n```\r\n\r\n...I&#39;d couple the view with my implementation of the class that access the DB. What if I want to switch from the DB implementation to another that gets the user list from a comma-separated file (remember, it&#39;s an example)? In that case, I would go to my code again and change the above line to:\r\n\r\n```java\r\nUserLister userLister = new UserListerCommaSeparatedFile();\r\n```\r\n\r\nThis has no problem with a small program like this but... What happens in a program that has hundreds of views and a similar number of business classes? The maintenance becomes a nightmare!\r\n\r\n## Spring (Dependency Injection) approach ##\r\n\r\nWhat Spring does is to *wire* the classes up by using an XML file or annotations, this way all the objects are instantiated and initialized by Spring and *injected* in the right places (Servlets, Web Frameworks, Business classes, DAOs, etc, etc, etc...).\r\n\r\nGoing back to the example in Spring we just need to have a setter for the `userLister` field and have either an XML file like this:\r\n\r\n```xml\r\n&lt;bean id=&quot;userLister&quot; class=&quot;UserListerDB&quot; /&gt;\r\n\r\n&lt;bean class=&quot;SomeView&quot;&gt;\r\n    &lt;property name=&quot;userLister&quot; ref=&quot;userLister&quot; /&gt;\r\n&lt;/bean&gt;\r\n```\r\n\r\nor more simply annotate the filed in our view class with `@Inject`:\r\n\r\n```java\r\n@Inject\r\nprivate UserLister userLister;\r\n```\r\n\r\nThis way when the view is created it *magically* will have a `UserLister` ready to work.\r\n\r\n```java\r\nList&lt;User&gt; users = userLister.getUsers();  // This will actually work\r\n                                           // without adding any line of code\r\n```\r\n\r\nIt is great! Isn&#39;t it?\r\n\r\n- *What if you want to use another implementation of your `UserLister` interface?* Just change the XML.\r\n- *What if don&#39;t have a `UserLister` implementation ready?* Program a temporal mock implementation of `UserLister` and ease the development of the view.\r\n- *What if I don&#39;t want to use Spring anymore?* Just don&#39;t use it! Your application isn&#39;t coupled to it. [Inversion of Control][1] states: &quot;The application controls the framework, not the framework controls the application&quot;.\r\n\r\nThere are some other options for Dependency Injection around there, what in my opinion has made Spring so famous besides its simplicity, elegance and stability is that the guys of SpringSource have programmed many many POJOs that help to integrate Spring with many other common frameworks without being intrusive in your application. Also, Spring has several good subprojects like Spring MVC, Spring WebFlow, Spring Security and again a loooong list of etceteras.\r\n\r\nAnyway, I encourage you to read [Martin Fowler&#39;s article][2] about Dependency Injection and Inversion of Control because he does it better than me. &lt;s&gt;After understanding the basics take a look at [Spring Documentation][3]&lt;/s&gt;, in my opinion, it &lt;s&gt;is&lt;/s&gt; **used to be** the best Spring book ever.\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Inversion_of_control\r\n  [2]: http://martinfowler.com/articles/injection.html\r\n  [3]: http://static.springframework.org/spring/docs/2.5.x/reference/index.html","title":"What exactly is Spring Framework for?","body":"<p>Basically Spring is a framework for <a href=\"/questions/tagged/dependency-injection\" class=\"post-tag\" title=\"show questions tagged &#39;dependency-injection&#39;\" aria-label=\"show questions tagged &#39;dependency-injection&#39;\" rel=\"tag\" aria-labelledby=\"dependency-injection-container\">dependency-injection</a> which is a pattern that allows building very decoupled systems.</p>\n<h2>The problem</h2>\n<p>For example, suppose you need to list the users of the system and thus declare an interface called <code>UserLister</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface UserLister {\n    List&lt;User&gt; getUsers();\n}\n</code></pre>\n<p>And maybe an implementation accessing a database to get all the users:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class UserListerDB implements UserLister {\n    public List&lt;User&gt; getUsers() {\n        // DB access code here\n    }\n}\n</code></pre>\n<p>In your view you'll need to access an instance (just an example, remember):</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class SomeView {\n    private UserLister userLister;\n\n    public void render() {\n        List&lt;User&gt; users = userLister.getUsers();\n        view.render(users);\n    }\n}\n</code></pre>\n<p>Note that the code above hasn't initialized the variable <code>userLister</code>. What should we do? If I explicitly instantiate the object like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>UserLister userLister = new UserListerDB();\n</code></pre>\n<p>...I'd couple the view with my implementation of the class that access the DB. What if I want to switch from the DB implementation to another that gets the user list from a comma-separated file (remember, it's an example)? In that case, I would go to my code again and change the above line to:</p>\n<pre class=\"lang-java prettyprint-override\"><code>UserLister userLister = new UserListerCommaSeparatedFile();\n</code></pre>\n<p>This has no problem with a small program like this but... What happens in a program that has hundreds of views and a similar number of business classes? The maintenance becomes a nightmare!</p>\n<h2>Spring (Dependency Injection) approach</h2>\n<p>What Spring does is to <em>wire</em> the classes up by using an XML file or annotations, this way all the objects are instantiated and initialized by Spring and <em>injected</em> in the right places (Servlets, Web Frameworks, Business classes, DAOs, etc, etc, etc...).</p>\n<p>Going back to the example in Spring we just need to have a setter for the <code>userLister</code> field and have either an XML file like this:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;bean id=&quot;userLister&quot; class=&quot;UserListerDB&quot; /&gt;\n\n&lt;bean class=&quot;SomeView&quot;&gt;\n    &lt;property name=&quot;userLister&quot; ref=&quot;userLister&quot; /&gt;\n&lt;/bean&gt;\n</code></pre>\n<p>or more simply annotate the filed in our view class with <code>@Inject</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Inject\nprivate UserLister userLister;\n</code></pre>\n<p>This way when the view is created it <em>magically</em> will have a <code>UserLister</code> ready to work.</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;User&gt; users = userLister.getUsers();  // This will actually work\n                                           // without adding any line of code\n</code></pre>\n<p>It is great! Isn't it?</p>\n<ul>\n<li><em>What if you want to use another implementation of your <code>UserLister</code> interface?</em> Just change the XML.</li>\n<li><em>What if don't have a <code>UserLister</code> implementation ready?</em> Program a temporal mock implementation of <code>UserLister</code> and ease the development of the view.</li>\n<li><em>What if I don't want to use Spring anymore?</em> Just don't use it! Your application isn't coupled to it. <a href=\"http://en.wikipedia.org/wiki/Inversion_of_control\" rel=\"nofollow noreferrer\">Inversion of Control</a> states: &quot;The application controls the framework, not the framework controls the application&quot;.</li>\n</ul>\n<p>There are some other options for Dependency Injection around there, what in my opinion has made Spring so famous besides its simplicity, elegance and stability is that the guys of SpringSource have programmed many many POJOs that help to integrate Spring with many other common frameworks without being intrusive in your application. Also, Spring has several good subprojects like Spring MVC, Spring WebFlow, Spring Security and again a loooong list of etceteras.</p>\n<p>Anyway, I encourage you to read <a href=\"http://martinfowler.com/articles/injection.html\" rel=\"nofollow noreferrer\">Martin Fowler's article</a> about Dependency Injection and Inversion of Control because he does it better than me. <s>After understanding the basics take a look at <a href=\"http://static.springframework.org/spring/docs/2.5.x/reference/index.html\" rel=\"nofollow noreferrer\">Spring Documentation</a></s>, in my opinion, it <s>is</s> <strong>used to be</strong> the best Spring book ever.</p>\n"},{"tags":[],"owner":{"account_id":425,"reputation":21449,"user_id":543,"accept_rate":90,"display_name":"bpapa"},"comment_count":0,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1246397718,"creation_date":1246397718,"answer_id":1066202,"question_id":1061717,"body_markdown":"What you&#39;d probably want in a web application with Spring - \r\n\r\n - Spring MVC, which with 2.5+ allows you to use POJOs as Controller classes, meaning you don&#39;t have to extend from any particular framework (as in Struts or Spring pre-2.5). Controller classes are also dead simple to test thanks in part to dependency injection\r\n - Spring integration with Hibernate, which does a good job of simplifying work with that ORM solution (for most cases)\r\n - Using Spring for a web app enables you to use your Domain Objects at all levels of the application - the same classes that are mapped using Hibernate are the classes you use as &quot;form beans.&quot; By nature, this will lead to a more robust  domain model, in part because it&#39;s going to cut down on the number of classes.\r\n - Spring form tags make it easier to create forms without much hassle. \r\n\r\nIn addition, Spring is HUGE - so there are a lot of other things you might be interested in using in a web app such as Spring AOP or Spring Security. But the four things listed above describe the common components of Spring that are used in a web app. \r\n\r\n","title":"What exactly is Spring Framework for?","body":"<p>What you'd probably want in a web application with Spring - </p>\n\n<ul>\n<li>Spring MVC, which with 2.5+ allows you to use POJOs as Controller classes, meaning you don't have to extend from any particular framework (as in Struts or Spring pre-2.5). Controller classes are also dead simple to test thanks in part to dependency injection</li>\n<li>Spring integration with Hibernate, which does a good job of simplifying work with that ORM solution (for most cases)</li>\n<li>Using Spring for a web app enables you to use your Domain Objects at all levels of the application - the same classes that are mapped using Hibernate are the classes you use as \"form beans.\" By nature, this will lead to a more robust  domain model, in part because it's going to cut down on the number of classes.</li>\n<li>Spring form tags make it easier to create forms without much hassle. </li>\n</ul>\n\n<p>In addition, Spring is HUGE - so there are a lot of other things you might be interested in using in a web app such as Spring AOP or Spring Security. But the four things listed above describe the common components of Spring that are used in a web app. </p>\n"},{"comments":[{"owner":{"account_id":418189,"reputation":1882,"user_id":794606,"accept_rate":80,"display_name":"Jacek Cz"},"score":1,"creation_date":1442741457,"post_id":2249198,"comment_id":53200462,"body_markdown":"Can I correct? *Was* alternative to (horrible) EJB 2 ... seems  &quot;new EJB&quot; (in part, JPA 2, etc) has grooving acceptance. &quot;Happy hours&quot; of spring part &quot;a kind of EJB&quot; seems be past.  a.d. 2015","body":"Can I correct? <i>Was</i> alternative to (horrible) EJB 2 ... seems  &quot;new EJB&quot; (in part, JPA 2, etc) has grooving acceptance. &quot;Happy hours&quot; of spring part &quot;a kind of EJB&quot; seems be past.  a.d. 2015"}],"tags":[],"owner":{"account_id":62111,"reputation":40153,"user_id":184730,"accept_rate":72,"display_name":"fastcodejava"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1265940045,"creation_date":1265940045,"answer_id":2249198,"question_id":1061717,"body_markdown":"Spring is a good alternative to [Enterprise JavaBeans (EJB)][1] technology. It also has web framework and web services framework component.\r\n\r\n\r\n  [1]: http://java.sun.com/products/ejb/","title":"What exactly is Spring Framework for?","body":"<p>Spring is a good alternative to <a href=\"http://java.sun.com/products/ejb/\" rel=\"nofollow noreferrer\">Enterprise JavaBeans (EJB)</a> technology. It also has web framework and web services framework component.</p>\n"},{"comments":[{"owner":{"account_id":16535035,"reputation":437,"user_id":11947303,"display_name":"CodeSlave"},"score":0,"creation_date":1666123717,"post_id":2738632,"comment_id":130860373,"body_markdown":"Nice reply but someone who does not already know what Spring is, will not undertand it.","body":"Nice reply but someone who does not already know what Spring is, will not undertand it."}],"tags":[],"owner":{"account_id":130067,"reputation":335,"user_id":329053,"display_name":"Johan"},"comment_count":1,"down_vote_count":4,"up_vote_count":24,"is_accepted":false,"score":20,"last_activity_date":1272555235,"creation_date":1272555235,"answer_id":2738632,"question_id":1061717,"body_markdown":"Very short summarized, I will say that Spring is the &quot;glue&quot; in your application. It&#39;s used to integrate different frameworks and your own code.","title":"What exactly is Spring Framework for?","body":"<p>Very short summarized, I will say that Spring is the \"glue\" in your application. It's used to integrate different frameworks and your own code.</p>\n"},{"comments":[{"owner":{"account_id":56561,"reputation":2573,"user_id":169447,"accept_rate":89,"display_name":"Sakamoto Kazuma"},"score":9,"creation_date":1421943063,"post_id":8677123,"comment_id":44563094,"body_markdown":"YMMV, IMHO - Your Mileage May Vary, In My Humble Opinion    for those of you who not fluent in abbreviations like me...","body":"YMMV, IMHO - Your Mileage May Vary, In My Humble Opinion    for those of you who not fluent in abbreviations like me..."}],"tags":[],"owner":{"account_id":1137862,"reputation":161,"user_id":1122535,"display_name":"karstensrage"},"comment_count":1,"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1418721002,"creation_date":1325229291,"answer_id":8677123,"question_id":1061717,"body_markdown":"Spring is three things.\r\n\r\n 1. Spring handles Dependency Injection and I recommend you read Martin Fowler&#39;s excellent introduction on dependency injection.\r\n 2. The second thing Spring does is wrap excellent Java libraries in a very elegant way to use in your applications. For a good example see how Spring wraps Task Executors and Quartz Scheduler. \r\n 3. Thirdly Spring provides a bunch of implementations of web stuff like REST, an MVC web framework and more. They figure since you are using Spring for the first two, maybe you can just use it for everything your web app needs. \r\n\r\nThe problem is that Spring DI is really well thought out, the wrappers around other things are really well thought out in that the other things thought everything out and Spring just nicely wraps it. The Spring implementations of MVC and REST and all the other stuff is not as well done (YMMV, IMHO) but there are exceptions (Spring Security is da bomb). **So I tend to use Spring for DI, and its cool wrappers but prefer other stuff for Web (I like Tapestry a lot), REST (Jersey is really robust), etc.**","title":"What exactly is Spring Framework for?","body":"<p>Spring is three things.</p>\n\n<ol>\n<li>Spring handles Dependency Injection and I recommend you read Martin Fowler's excellent introduction on dependency injection.</li>\n<li>The second thing Spring does is wrap excellent Java libraries in a very elegant way to use in your applications. For a good example see how Spring wraps Task Executors and Quartz Scheduler. </li>\n<li>Thirdly Spring provides a bunch of implementations of web stuff like REST, an MVC web framework and more. They figure since you are using Spring for the first two, maybe you can just use it for everything your web app needs. </li>\n</ol>\n\n<p>The problem is that Spring DI is really well thought out, the wrappers around other things are really well thought out in that the other things thought everything out and Spring just nicely wraps it. The Spring implementations of MVC and REST and all the other stuff is not as well done (YMMV, IMHO) but there are exceptions (Spring Security is da bomb). <strong>So I tend to use Spring for DI, and its cool wrappers but prefer other stuff for Web (I like Tapestry a lot), REST (Jersey is really robust), etc.</strong></p>\n"},{"tags":[],"owner":{"account_id":11529,"reputation":8184,"user_id":22263,"accept_rate":80,"display_name":"Tom De Leu"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1326182137,"creation_date":1326182137,"answer_id":8800116,"question_id":1061717,"body_markdown":"I see two parts to this:\r\n\r\n 1.  &quot;What exactly is Spring for&quot; -&gt; see the accepted answer by victor hugo.\r\n 2. &quot;[...] Spring is [a] good framework for web development&quot; -&gt; people saying this are talking about Spring MVC. Spring MVC is one of the many parts of Spring, and is a web framework making use of the general features of Spring, like dependency injection. It&#39;s a pretty generic framework in that it is very configurable: you can use different db layers (Hibernate, iBatis, plain JDBC), different view layers (JSP, Velocity, Freemarker...)\r\n\r\nNote that you can perfectly well use Spring in a web application without using Spring MVC. I would say most Java web applications do this, while using other web frameworks like Wicket, Struts, Seam, ...\r\n","title":"What exactly is Spring Framework for?","body":"<p>I see two parts to this:</p>\n\n<ol>\n<li>\"What exactly is Spring for\" -> see the accepted answer by victor hugo.</li>\n<li>\"[...] Spring is [a] good framework for web development\" -> people saying this are talking about Spring MVC. Spring MVC is one of the many parts of Spring, and is a web framework making use of the general features of Spring, like dependency injection. It's a pretty generic framework in that it is very configurable: you can use different db layers (Hibernate, iBatis, plain JDBC), different view layers (JSP, Velocity, Freemarker...)</li>\n</ol>\n\n<p>Note that you can perfectly well use Spring in a web application without using Spring MVC. I would say most Java web applications do this, while using other web frameworks like Wicket, Struts, Seam, ...</p>\n"},{"comments":[{"owner":{"account_id":466175,"reputation":5524,"user_id":870769,"accept_rate":83,"display_name":"sthzg"},"score":12,"creation_date":1448095855,"post_id":30609701,"comment_id":55447561,"body_markdown":"Frustration aside, I am wondering about your arguments. I don&#39;t know any programming tool that you can&#39;t use to produce bad design. What you  aim at is that using frameworks you can make bad code do lots of stuff. That&#39;s universally true and not specific to Spring. Otherwise what&#39;s the point? Don&#39;t you think competent developers can make great use of what Spring has to offer - being particular in which tools of the framework they use? At least I am quite certain that you don&#39;t imply that no Spring developer has ever heard of extending classes. The further reading is hilarious, though.","body":"Frustration aside, I am wondering about your arguments. I don&#39;t know any programming tool that you can&#39;t use to produce bad design. What you  aim at is that using frameworks you can make bad code do lots of stuff. That&#39;s universally true and not specific to Spring. Otherwise what&#39;s the point? Don&#39;t you think competent developers can make great use of what Spring has to offer - being particular in which tools of the framework they use? At least I am quite certain that you don&#39;t imply that no Spring developer has ever heard of extending classes. The further reading is hilarious, though."},{"owner":{"account_id":6119906,"reputation":1424,"user_id":4773759,"accept_rate":82,"display_name":"Edouard Berthe"},"score":2,"creation_date":1501594932,"post_id":30609701,"comment_id":77839989,"body_markdown":"Furthermore, your example works because the view needs only one injected service (`UserLister`), but what if it needs several services, *not shared* between the different `BaseView`&#39;s children? There is (fortunately) no multiple inheritance in Java.","body":"Furthermore, your example works because the view needs only one injected service (<code>UserLister</code>), but what if it needs several services, <i>not shared</i> between the different <code>BaseView</code>&#39;s children? There is (fortunately) no multiple inheritance in Java."},{"owner":{"account_id":1754183,"reputation":2119,"user_id":1602584,"accept_rate":55,"display_name":"Ash"},"score":0,"creation_date":1551931007,"post_id":30609701,"comment_id":96823792,"body_markdown":"@EdouardBerthe Fair point. My answer was not an attempt to disregard DI, it just points out the example shown in the accepted answer is not the greatest; the scenario you are proposing would most likely work better. The point I was really trying to make is not that you don&#39;t need DI, but rather you don&#39;t need an entire framework to do it.","body":"@EdouardBerthe Fair point. My answer was not an attempt to disregard DI, it just points out the example shown in the accepted answer is not the greatest; the scenario you are proposing would most likely work better. The point I was really trying to make is not that you don&#39;t need DI, but rather you don&#39;t need an entire framework to do it."}],"tags":[],"owner":{"account_id":1754183,"reputation":2119,"user_id":1602584,"accept_rate":55,"display_name":"Ash"},"comment_count":3,"down_vote_count":6,"up_vote_count":31,"is_accepted":false,"score":25,"last_activity_date":1433297673,"creation_date":1433297673,"answer_id":30609701,"question_id":1061717,"body_markdown":"What is Spring for? I will answer that question shortly, but first, let&#39;s take another look at the example by victor hugo. It&#39;s not a great example because it doesn&#39;t justify the need for a new framework.\r\n\r\n    public class BaseView {\r\n      protected UserLister userLister;\r\n\r\n      public BaseView() {\r\n        userLister = new UserListerDB(); // only line of code that needs changing\r\n      }\r\n    }\r\n\r\n    public class SomeView extends BaseView {\r\n      public SomeView() {\r\n        super();\r\n      }\r\n\r\n      public void render() {\r\n        List&lt;User&gt; users = userLister.getUsers();\r\n        view.render(users);\r\n      }\r\n    }\r\n\r\nDone! So now even if you have hundreds or thousands of views, you still just need to change the one line of code, as in the Spring XML approach.\r\nBut changing a line of code still requires recompiling as opposed to editing XML you say? Well my fussy friend, use Ant and script away!\r\n\r\nSo what is Spring for? It&#39;s for:\r\n\r\n 1. Blind developers who follow the herd\r\n 2. Employers who do not ever want to hire graduate programmers because they don&#39;t teach such frameworks at Uni\r\n 3. Projects that started off with a bad design and need patchwork (as shown by victor hugo&#39;s example)\r\n\r\nFurther reading: http://discuss.joelonsoftware.com/?joel.3.219431.12","title":"What exactly is Spring Framework for?","body":"<p>What is Spring for? I will answer that question shortly, but first, let's take another look at the example by victor hugo. It's not a great example because it doesn't justify the need for a new framework.</p>\n\n<pre><code>public class BaseView {\n  protected UserLister userLister;\n\n  public BaseView() {\n    userLister = new UserListerDB(); // only line of code that needs changing\n  }\n}\n\npublic class SomeView extends BaseView {\n  public SomeView() {\n    super();\n  }\n\n  public void render() {\n    List&lt;User&gt; users = userLister.getUsers();\n    view.render(users);\n  }\n}\n</code></pre>\n\n<p>Done! So now even if you have hundreds or thousands of views, you still just need to change the one line of code, as in the Spring XML approach.\nBut changing a line of code still requires recompiling as opposed to editing XML you say? Well my fussy friend, use Ant and script away!</p>\n\n<p>So what is Spring for? It's for:</p>\n\n<ol>\n<li>Blind developers who follow the herd</li>\n<li>Employers who do not ever want to hire graduate programmers because they don't teach such frameworks at Uni</li>\n<li>Projects that started off with a bad design and need patchwork (as shown by victor hugo's example)</li>\n</ol>\n\n<p>Further reading: <a href=\"http://discuss.joelonsoftware.com/?joel.3.219431.12\">http://discuss.joelonsoftware.com/?joel.3.219431.12</a></p>\n"},{"comments":[{"owner":{"account_id":21157,"reputation":16683,"user_id":51230,"accept_rate":83,"display_name":"Maksim"},"score":1,"creation_date":1442799854,"post_id":32677791,"comment_id":53216905,"body_markdown":"I believe now Spring framework is trying to move away from XML to Annotations and Java configuration.","body":"I believe now Spring framework is trying to move away from XML to Annotations and Java configuration."}],"tags":[],"owner":{"account_id":418189,"reputation":1882,"user_id":794606,"accept_rate":80,"display_name":"Jacek Cz"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1511975299,"creation_date":1442741139,"answer_id":32677791,"question_id":1061717,"body_markdown":"Spring was dependency injection in the begining, then add king of wrappers for almost everything (wrapper over JPA implementations etc).\r\n\r\nLong story ... most parts of Spring preffer XML solutions (XML scripting engine ... brrrr), so for DI I use Guice\r\n\r\nGood library, but with growing depnedenciec, for example **Spring** JDBC (maybe one Java jdbc solution with real names parameters) take from maven 4-5 next.\r\n\r\nUsing Spring MVC (part of &quot;big spring&quot;) for web development ... it is &quot;request based&quot; framework, there is holy war &quot;request vs component&quot; ... up to You","title":"What exactly is Spring Framework for?","body":"<p>Spring was dependency injection in the begining, then add king of wrappers for almost everything (wrapper over JPA implementations etc).</p>\n\n<p>Long story ... most parts of Spring preffer XML solutions (XML scripting engine ... brrrr), so for DI I use Guice</p>\n\n<p>Good library, but with growing depnedenciec, for example <strong>Spring</strong> JDBC (maybe one Java jdbc solution with real names parameters) take from maven 4-5 next.</p>\n\n<p>Using Spring MVC (part of \"big spring\") for web development ... it is \"request based\" framework, there is holy war \"request vs component\" ... up to You</p>\n"},{"comments":[{"owner":{"account_id":368,"reputation":44335,"user_id":459,"accept_rate":81,"display_name":"dlamblin"},"score":1,"creation_date":1554299745,"post_id":37019275,"comment_id":97700846,"body_markdown":"I&#39;d actually like to see the mvc, data, jpa and other parts of Spring have an option to not use Spring&#39;s core DI, but put Dagger in the heart of Spring instead.","body":"I&#39;d actually like to see the mvc, data, jpa and other parts of Spring have an option to not use Spring&#39;s core DI, but put Dagger in the heart of Spring instead."}],"tags":[],"owner":{"account_id":3130088,"reputation":43207,"user_id":2648077,"accept_rate":80,"display_name":"Alireza Fattahi"},"comment_count":1,"down_vote_count":0,"up_vote_count":49,"is_accepted":false,"score":49,"last_activity_date":1590526300,"creation_date":1462340098,"answer_id":37019275,"question_id":1061717,"body_markdown":"Old days, **Spring** was a dependency injection frame work only like (**Guice**, **PicoContainer**,...), but nowadays it is a total solution for building your **Enterprise Application**.\r\n\r\nThe spring dependency injection, which is, of course, the heart of spring is still there (and you can review other good answers here), but there are more from spring...\r\n\r\nSpring now has lots of projects, each with some sub-projects (http://spring.io/projects). When someone speaks about spring, you must find out what **spring project** he is talking about, is it only spring core, which is known as **spring framework**, or it is another spring projects.\r\n\r\nSome spring projects which is worth too mention are:\r\n\r\n -  **Spring Security**    - http://projects.spring.io/spring-security/\r\n -  **Spring Webservices** - http://projects.spring.io/spring-ws/\r\n - **Spring Integration**  - http://projects.spring.io/spring-integration/\r\n\r\nIf you need some more specify feature for your application, you may find it there too:\r\n\r\n \r\n - **Spring Batch**  batch framework designed to enable the development of  \r\nbatch application\r\n - **Spring HATEOAS** easy creation of REST API based on HATEOAS principal\r\n - **Spring Mobile** and **Spring Andriod** for mobile application development\r\n - **Spring Shell**  builds a full-featured shell ( aka command line) application \r\n - **Spring Cloud** and **Spring Cloud Data Flow** for cloud applications\r\n\r\nThere are also some tiny projects there for example **spring-social-facebook** (http://projects.spring.io/spring-social-facebook/)\r\n\r\nYou can use spring for web development as it has the `Spring MVC` module which is part of **Spring Framework** project. Or you can use spring with another web framework, like **struts2**.\r\n","title":"What exactly is Spring Framework for?","body":"<p>Old days, <strong>Spring</strong> was a dependency injection frame work only like (<strong>Guice</strong>, <strong>PicoContainer</strong>,...), but nowadays it is a total solution for building your <strong>Enterprise Application</strong>.</p>\n\n<p>The spring dependency injection, which is, of course, the heart of spring is still there (and you can review other good answers here), but there are more from spring...</p>\n\n<p>Spring now has lots of projects, each with some sub-projects (<a href=\"http://spring.io/projects\" rel=\"nofollow noreferrer\">http://spring.io/projects</a>). When someone speaks about spring, you must find out what <strong>spring project</strong> he is talking about, is it only spring core, which is known as <strong>spring framework</strong>, or it is another spring projects.</p>\n\n<p>Some spring projects which is worth too mention are:</p>\n\n<ul>\n<li><strong>Spring Security</strong>    - <a href=\"http://projects.spring.io/spring-security/\" rel=\"nofollow noreferrer\">http://projects.spring.io/spring-security/</a></li>\n<li><strong>Spring Webservices</strong> - <a href=\"http://projects.spring.io/spring-ws/\" rel=\"nofollow noreferrer\">http://projects.spring.io/spring-ws/</a></li>\n<li><strong>Spring Integration</strong>  - <a href=\"http://projects.spring.io/spring-integration/\" rel=\"nofollow noreferrer\">http://projects.spring.io/spring-integration/</a></li>\n</ul>\n\n<p>If you need some more specify feature for your application, you may find it there too:</p>\n\n<ul>\n<li><strong>Spring Batch</strong>  batch framework designed to enable the development of<br>\nbatch application</li>\n<li><strong>Spring HATEOAS</strong> easy creation of REST API based on HATEOAS principal</li>\n<li><strong>Spring Mobile</strong> and <strong>Spring Andriod</strong> for mobile application development</li>\n<li><strong>Spring Shell</strong>  builds a full-featured shell ( aka command line) application </li>\n<li><strong>Spring Cloud</strong> and <strong>Spring Cloud Data Flow</strong> for cloud applications</li>\n</ul>\n\n<p>There are also some tiny projects there for example <strong>spring-social-facebook</strong> (<a href=\"http://projects.spring.io/spring-social-facebook/\" rel=\"nofollow noreferrer\">http://projects.spring.io/spring-social-facebook/</a>)</p>\n\n<p>You can use spring for web development as it has the <code>Spring MVC</code> module which is part of <strong>Spring Framework</strong> project. Or you can use spring with another web framework, like <strong>struts2</strong>.</p>\n"},{"comments":[{"owner":{"account_id":3173922,"reputation":1380,"user_id":2682255,"accept_rate":45,"display_name":"Arpan Buch"},"score":0,"creation_date":1534909664,"post_id":46266270,"comment_id":90869452,"body_markdown":"But even in case of Spring, we still would be defining beans. and the bean id will be given in the code,  isn&#39;t it ? so if you change the bean tomorrow, you still have to change the code, isn&#39;t it ? so what&#39;s the benefit.","body":"But even in case of Spring, we still would be defining beans. and the bean id will be given in the code,  isn&#39;t it ? so if you change the bean tomorrow, you still have to change the code, isn&#39;t it ? so what&#39;s the benefit."},{"owner":{"account_id":7356800,"reputation":6070,"user_id":5601284,"accept_rate":100,"display_name":"byxor"},"score":1,"creation_date":1568639696,"post_id":46266270,"comment_id":102327147,"body_markdown":"@ArpanBuch I think the benefit of spring is that you can choose a different implementation without recompiling any code (so long as the other implementation already exists). I&#39;m a beginner, so I could be wrong.","body":"@ArpanBuch I think the benefit of spring is that you can choose a different implementation without recompiling any code (so long as the other implementation already exists). I&#39;m a beginner, so I could be wrong."}],"tags":[],"owner":{"account_id":3184796,"reputation":2097,"user_id":2690723,"display_name":"Sumit Pokhrel"},"comment_count":2,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1505671624,"creation_date":1505665388,"answer_id":46266270,"question_id":1061717,"body_markdown":"The advantage is [Dependency Injection (DI)][1]. It means outsourcing the task of object creation.Let me explain with an example. \r\n\r\n     \r\n    public interface Lunch\r\n    {\r\n       public void eat();\r\n    }\r\n    \r\n    public class Buffet implements Lunch\r\n    {\r\n       public void eat()\r\n       {\r\n          // Eat as much as you can \r\n       }\r\n    }\r\n    \r\n    public class Plated implements Lunch\r\n    {\r\n       public void eat()\r\n       {\r\n          // Eat a limited portion\r\n       }\r\n    }\r\n\r\nNow in my code I have a class LunchDecide as follows: \r\n\r\n    public class LunchDecide {\r\n        private Lunch todaysLunch;\r\n        public LunchDecide(){\r\n            this.todaysLunch = new Buffet(); // choose Buffet -&gt; eat as much as you want\r\n            //this.todaysLunch = new Plated(); // choose Plated -&gt; eat a limited portion \r\n        }\r\n    }\r\nIn the above class, depending on our mood, we pick Buffet() or Plated(). However this system is tightly coupled. Every time we need a different type of Object, we need to change the code. In this case, commenting out a line ! Imagine there are 50 different classes used by 50 different people. It would be a hell of a mess. In this case, we need to Decouple the system. Let&#39;s rewrite the LunchDecide class. \r\n\r\n    public class LunchDecide {\r\n        private Lunch todaysLunch;\r\n        public LunchDecide(Lunch todaysLunch){\r\n            this.todaysLunch = todaysLunch\r\n            }\r\n        }\r\nNotice that instead of creating an object using new keyword we passed the reference to an object of Lunch Type as a parameter to our constructor. Here, object creation is outsourced. This code can be wired either using Xml config file (legacy) or Java Annotations (modern). Either way, the decision on which Type of object would be created would be done there during runtime. An object would be injected by Xml into our code - Our Code is dependent on Xml for that job. Hence, Dependency Injection (DI). \r\nDI not only helps in making our system loosely coupled, it simplifies writing of Unit tests since it allows dependencies to be mocked. Last but not the least, DI streamlines Aspect Oriented Programming (AOP) which leads to further decoupling and increase of modularity. \r\nAlso note that above DI is Constructor Injection. DI can be done by Setter Injection as well - same plain old setter method from encapsulation. \r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Dependency_injection","title":"What exactly is Spring Framework for?","body":"<p>The advantage is <a href=\"https://en.wikipedia.org/wiki/Dependency_injection\" rel=\"noreferrer\">Dependency Injection (DI)</a>. It means outsourcing the task of object creation.Let me explain with an example. </p>\n\n<pre><code>public interface Lunch\n{\n   public void eat();\n}\n\npublic class Buffet implements Lunch\n{\n   public void eat()\n   {\n      // Eat as much as you can \n   }\n}\n\npublic class Plated implements Lunch\n{\n   public void eat()\n   {\n      // Eat a limited portion\n   }\n}\n</code></pre>\n\n<p>Now in my code I have a class LunchDecide as follows: </p>\n\n<pre><code>public class LunchDecide {\n    private Lunch todaysLunch;\n    public LunchDecide(){\n        this.todaysLunch = new Buffet(); // choose Buffet -&gt; eat as much as you want\n        //this.todaysLunch = new Plated(); // choose Plated -&gt; eat a limited portion \n    }\n}\n</code></pre>\n\n<p>In the above class, depending on our mood, we pick Buffet() or Plated(). However this system is tightly coupled. Every time we need a different type of Object, we need to change the code. In this case, commenting out a line ! Imagine there are 50 different classes used by 50 different people. It would be a hell of a mess. In this case, we need to Decouple the system. Let's rewrite the LunchDecide class. </p>\n\n<pre><code>public class LunchDecide {\n    private Lunch todaysLunch;\n    public LunchDecide(Lunch todaysLunch){\n        this.todaysLunch = todaysLunch\n        }\n    }\n</code></pre>\n\n<p>Notice that instead of creating an object using new keyword we passed the reference to an object of Lunch Type as a parameter to our constructor. Here, object creation is outsourced. This code can be wired either using Xml config file (legacy) or Java Annotations (modern). Either way, the decision on which Type of object would be created would be done there during runtime. An object would be injected by Xml into our code - Our Code is dependent on Xml for that job. Hence, Dependency Injection (DI). \nDI not only helps in making our system loosely coupled, it simplifies writing of Unit tests since it allows dependencies to be mocked. Last but not the least, DI streamlines Aspect Oriented Programming (AOP) which leads to further decoupling and increase of modularity. \nAlso note that above DI is Constructor Injection. DI can be done by Setter Injection as well - same plain old setter method from encapsulation. </p>\n"},{"comments":[{"owner":{"account_id":2070965,"reputation":1494,"user_id":1845463,"accept_rate":43,"display_name":"Stefano L"},"score":0,"creation_date":1519984394,"post_id":46343847,"comment_id":85138323,"body_markdown":"Wrong. You cannot use the `@Bean` annotation on class level. Must be one of `@Component`, `@Service`, `@Repository` etc. Rest is correct. You should maybe also point out that Autowiring the Interface in this way will only work if there is only 1 candidate class in classpath suitable for injection, otherwise Spring application error.","body":"Wrong. You cannot use the <code>@Bean</code> annotation on class level. Must be one of <code>@Component</code>, <code>@Service</code>, <code>@Repository</code> etc. Rest is correct. You should maybe also point out that Autowiring the Interface in this way will only work if there is only 1 candidate class in classpath suitable for injection, otherwise Spring application error."},{"owner":{"account_id":4647011,"reputation":41835,"user_id":3764965,"accept_rate":94,"display_name":"Nikolas Charalambidis"},"score":0,"creation_date":1520017476,"post_id":46343847,"comment_id":85157317,"body_markdown":"@StefanoL: Yes, you are right. I wonder people ignored my mistake. Thanks for the comment.","body":"@StefanoL: Yes, you are right. I wonder people ignored my mistake. Thanks for the comment."}],"tags":[],"owner":{"account_id":4647011,"reputation":41835,"user_id":3764965,"accept_rate":94,"display_name":"Nikolas Charalambidis"},"comment_count":2,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1624702008,"creation_date":1505996603,"answer_id":46343847,"question_id":1061717,"body_markdown":"The accepted answer doesn&#39;t involve the annotations usage since Spring introduced support for various annotations for configuration.\r\n\r\n## Spring annotations approach (Dependency Injection) ##\r\n\r\nThere the another way to wire the classes up alongside using a XML file: the annotations. Let&#39;s use the example from the accepted answer and register the bean directly on the class using one of the annotations `@Component`, `@Service`, `@Repository` or `@Configuration`:\r\n\r\n    @Component\r\n    public class UserListerDB implements UserLister {\r\n        public List&lt;User&gt; getUsers() {\r\n            // DB access code here\r\n        }\r\n    }\r\n\r\n&gt; This way when the view is created it magically will have a UserLister ready to work.\r\n\r\nThe above statement is valid with a little bonus of no need of any XML file usage and wiring with another annotation `@Autowired` that finds a relevant implementation and inject it in.\r\n\r\n    @Autowired\r\n    private UserLister userLister;\r\n\r\nUse the `@Bean` annotation on a method used to get the bean implementation to inject.\r\n","title":"What exactly is Spring Framework for?","body":"<p>The accepted answer doesn't involve the annotations usage since Spring introduced support for various annotations for configuration.</p>\n<h2>Spring annotations approach (Dependency Injection)</h2>\n<p>There the another way to wire the classes up alongside using a XML file: the annotations. Let's use the example from the accepted answer and register the bean directly on the class using one of the annotations <code>@Component</code>, <code>@Service</code>, <code>@Repository</code> or <code>@Configuration</code>:</p>\n<pre><code>@Component\npublic class UserListerDB implements UserLister {\n    public List&lt;User&gt; getUsers() {\n        // DB access code here\n    }\n}\n</code></pre>\n<blockquote>\n<p>This way when the view is created it magically will have a UserLister ready to work.</p>\n</blockquote>\n<p>The above statement is valid with a little bonus of no need of any XML file usage and wiring with another annotation <code>@Autowired</code> that finds a relevant implementation and inject it in.</p>\n<pre><code>@Autowired\nprivate UserLister userLister;\n</code></pre>\n<p>Use the <code>@Bean</code> annotation on a method used to get the bean implementation to inject.</p>\n"},{"comments":[{"owner":{"account_id":2847461,"reputation":261,"user_id":2445461,"display_name":"tomj0101"},"score":1,"creation_date":1512454910,"post_id":47645061,"comment_id":82252848,"body_markdown":"```Spring Framework help you with several things like, don&#39;t reinvent the wheel. you can connect very easily with some database just using Spring Data, or create schedule tasks like CronJob or Windows Task. amazing !```","body":"<code>Spring Framework help you with several things like, don&#39;t reinvent the wheel. you can connect very easily with some database just using Spring Data, or create schedule tasks like CronJob or Windows Task. amazing !</code>"}],"tags":[],"owner":{"account_id":1875874,"reputation":71921,"user_id":1697099,"accept_rate":100,"display_name":"Premraj"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1512454107,"creation_date":1512440344,"answer_id":47645061,"question_id":1061717,"body_markdown":"- Spring is a lightweight and flexible framework compare to J2EE.\r\n- Spring container act as a inversion of control. \r\n- Spring uses AOP i.e. proxies and Singleton, Factory and Template Method Design patterns.\r\n- Tiered architectures: Separation of concerns and Reusable layers and Easy maintenance.\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/UXWKb.jpg","title":"What exactly is Spring Framework for?","body":"<ul>\n<li>Spring is a lightweight and flexible framework compare to J2EE.</li>\n<li>Spring container act as a inversion of control. </li>\n<li>Spring uses AOP i.e. proxies and Singleton, Factory and Template Method Design patterns.</li>\n<li>Tiered architectures: Separation of concerns and Reusable layers and Easy maintenance.</li>\n</ul>\n\n<p><a href=\"https://i.stack.imgur.com/UXWKb.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UXWKb.jpg\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":5047486,"reputation":2810,"user_id":4052998,"accept_rate":43,"display_name":"pratik deshai"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1577080224,"creation_date":1518529403,"answer_id":48768234,"question_id":1061717,"body_markdown":"Spring framework is definitely good for web development and to be more specific for restful api services.\r\n\r\nIt is good for the above because of its [dependency injection][1]  and integration with other modules like [spring security][2], [spring aop][3], [mvc framework][4], [microservices][5]\r\n&lt;br&gt;\r\n\r\nWith in any application, security is most probably a requirement.\r\n&lt;br&gt;\r\nIf you aim to build a product that needs long maintenance, then you will need the utilize the Aop concept.   \r\n&lt;br&gt;\r\nIf your application has to much traffic thus increasing the load, you need to use the microservices concept.\r\n&lt;br&gt;\r\n\r\nSpring is giving all these features in one platform. Support with [many modules][6].\r\n&lt;br&gt;\r\nMost importantly, spring is [open source][7] and an extensible framework,have a hook everywhere to integrate custom code in life cycle.\r\n&lt;br&gt;\r\n\r\n[Spring Data][8] is one project which provides integration with your project. \r\n\r\n&lt;br&gt;\r\nSo spring can fit into almost every requirement.\r\n\r\n\r\n  [1]: https://dzone.com/articles/how-dependency-injection-di-works-in-spring-java-a\r\n  [2]: https://www.dineshonjava.com/spring-security-take-baby-step-to-secure/\r\n  [3]: https://www.dineshonjava.com/spring-aop-tutorial-with-example-aspect-advice-pointcut-joinpoint/\r\n  [4]: https://www.dineshonjava.com/spring-web-mvc-framework-chapter-38/\r\n  [5]: https://www.dineshonjava.com/microservices-with-spring-boot/\r\n  [6]: https://spring.io/projects\r\n  [7]: https://projects.spring.io/spring-framework/\r\n  [8]: https://projects.spring.io/spring-data/","title":"What exactly is Spring Framework for?","body":"<p>Spring framework is definitely good for web development and to be more specific for restful api services.</p>\n\n<p>It is good for the above because of its <a href=\"https://dzone.com/articles/how-dependency-injection-di-works-in-spring-java-a\" rel=\"nofollow noreferrer\">dependency injection</a>  and integration with other modules like <a href=\"https://www.dineshonjava.com/spring-security-take-baby-step-to-secure/\" rel=\"nofollow noreferrer\">spring security</a>, <a href=\"https://www.dineshonjava.com/spring-aop-tutorial-with-example-aspect-advice-pointcut-joinpoint/\" rel=\"nofollow noreferrer\">spring aop</a>, <a href=\"https://www.dineshonjava.com/spring-web-mvc-framework-chapter-38/\" rel=\"nofollow noreferrer\">mvc framework</a>, <a href=\"https://www.dineshonjava.com/microservices-with-spring-boot/\" rel=\"nofollow noreferrer\">microservices</a>\n<br></p>\n\n<p>With in any application, security is most probably a requirement.\n<br>\nIf you aim to build a product that needs long maintenance, then you will need the utilize the Aop concept.<br>\n<br>\nIf your application has to much traffic thus increasing the load, you need to use the microservices concept.\n<br></p>\n\n<p>Spring is giving all these features in one platform. Support with <a href=\"https://spring.io/projects\" rel=\"nofollow noreferrer\">many modules</a>.\n<br>\nMost importantly, spring is <a href=\"https://projects.spring.io/spring-framework/\" rel=\"nofollow noreferrer\">open source</a> and an extensible framework,have a hook everywhere to integrate custom code in life cycle.\n<br></p>\n\n<p><a href=\"https://projects.spring.io/spring-data/\" rel=\"nofollow noreferrer\">Spring Data</a> is one project which provides integration with your project. </p>\n\n<p><br>\nSo spring can fit into almost every requirement.</p>\n"},{"tags":[],"owner":{"account_id":9337303,"reputation":9995,"user_id":6931119,"accept_rate":89,"display_name":"Witold Kaczurba"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1522084691,"creation_date":1522083749,"answer_id":49496854,"question_id":1061717,"body_markdown":"In the past I thought about Spring framework from purely technical standpoint. \r\n\r\nGiven some experience of team work and developing enterprise Webapps - I would say that Spring is for **faster development of applications** (web applications) by **decoupling** its individual elements (beans). Faster development makes it so popular. Spring allows shifting responsibility of building (wiring up) the application onto the Spring framework. The Spring framework&#39;s **dependency injection** is responsible for connecting/ wiring up individual beans into a working application.\r\n\r\nThis way developers can be focused more on development of individual components (beans) as soon as interfaces between beans are defined.\r\n\r\nTesting of such application is easy - the primary focus is given to individual beans. They can be easily decoupled and mocked, so unit-testing is fast and efficient.\r\n\r\nSpring framework defines multiple specialized beans such as **@Controller** (**@Restcontroller**), **@Repository**, **@Component** to serve web purposes. Spring together with Maven provide a structure that is intuitive to developers.\r\nTeam work is easy and fast as there is individual elements are kept apart and can be reused.","title":"What exactly is Spring Framework for?","body":"<p>In the past I thought about Spring framework from purely technical standpoint. </p>\n\n<p>Given some experience of team work and developing enterprise Webapps - I would say that Spring is for <strong>faster development of applications</strong> (web applications) by <strong>decoupling</strong> its individual elements (beans). Faster development makes it so popular. Spring allows shifting responsibility of building (wiring up) the application onto the Spring framework. The Spring framework's <strong>dependency injection</strong> is responsible for connecting/ wiring up individual beans into a working application.</p>\n\n<p>This way developers can be focused more on development of individual components (beans) as soon as interfaces between beans are defined.</p>\n\n<p>Testing of such application is easy - the primary focus is given to individual beans. They can be easily decoupled and mocked, so unit-testing is fast and efficient.</p>\n\n<p>Spring framework defines multiple specialized beans such as <strong>@Controller</strong> (<strong>@Restcontroller</strong>), <strong>@Repository</strong>, <strong>@Component</strong> to serve web purposes. Spring together with Maven provide a structure that is intuitive to developers.\nTeam work is easy and fast as there is individual elements are kept apart and can be reused.</p>\n"}],"owner":{"account_id":21157,"reputation":16683,"user_id":51230,"accept_rate":83,"display_name":"Maksim"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":288252,"favorite_count":0,"down_vote_count":7,"up_vote_count":661,"closed_date":1522093371,"accepted_answer_id":1064562,"answer_count":17,"score":654,"last_activity_date":1671705315,"creation_date":1246335900,"question_id":1061717,"body_markdown":"I hear a lot about [Spring][1], people are saying all over the web that Spring is a good framework for web development. What exactly is Spring Framework for in a nutshell? Why should I used it over just plain Java.\r\n\r\n\r\n  [1]: https://spring.io/","title":"What exactly is Spring Framework for?","body":"<p>I hear a lot about <a href=\"https://spring.io/\" rel=\"noreferrer\">Spring</a>, people are saying all over the web that Spring is a good framework for web development. What exactly is Spring Framework for in a nutshell? Why should I used it over just plain Java.</p>\n"},{"tags":["java","maven"],"comments":[{"owner":{"account_id":2818342,"reputation":299906,"user_id":2422776,"display_name":"Mureinik"},"score":4,"creation_date":1671610065,"post_id":74872911,"comment_id":132133534,"body_markdown":"Wouldn&#39;t it be easier to move the file to the &quot;right&quot; directory and just give it a different name? e.g., call it `pom-etc.xml` and build with `mvn compile -f pom-etc.xml`?","body":"Wouldn&#39;t it be easier to move the file to the &quot;right&quot; directory and just give it a different name? e.g., call it <code>pom-etc.xml</code> and build with <code>mvn compile -f pom-etc.xml</code>?"},{"owner":{"account_id":1186616,"reputation":12512,"user_id":1160445,"display_name":"Maciej Walkowiak"},"score":1,"creation_date":1671610332,"post_id":74872911,"comment_id":132133602,"body_markdown":"It would but in the actual real use case the pom.xml file is created dynamically in runtime and ideally would be located in /tmp. I realise this is an edge case.","body":"It would but in the actual real use case the pom.xml file is created dynamically in runtime and ideally would be located in /tmp. I realise this is an edge case."},{"owner":{"account_id":156886,"reputation":1810,"user_id":374458,"accept_rate":54,"display_name":"Nicolas"},"score":1,"creation_date":1671611084,"post_id":74872911,"comment_id":132133799,"body_markdown":"Maybe you could generate a &quot;master&quot; POM dynamically, which includes every module from tour project. This way, you will be able to set the paths you need.","body":"Maybe you could generate a &quot;master&quot; POM dynamically, which includes every module from tour project. This way, you will be able to set the paths you need."},{"owner":{"account_id":1186616,"reputation":12512,"user_id":1160445,"display_name":"Maciej Walkowiak"},"score":1,"creation_date":1671617625,"post_id":74872911,"comment_id":132135879,"body_markdown":"Thanks Nicolas this is super neat! It does not though completely solve the problem.","body":"Thanks Nicolas this is super neat! It does not though completely solve the problem."},{"owner":{"account_id":3874110,"reputation":7800,"user_id":3208640,"display_name":"void"},"score":1,"creation_date":1671617990,"post_id":74872911,"comment_id":132136009,"body_markdown":"You have already 2 solutions which are working well - you say the problem might be for plugins, then it should be a problem for plugin and that plugin should have a tag or a way recognizing it - I think it is not Maven Problem.","body":"You have already 2 solutions which are working well - you say the problem might be for plugins, then it should be a problem for plugin and that plugin should have a tag or a way recognizing it - I think it is not Maven Problem."}],"answers":[{"comments":[{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":2,"creation_date":1671615476,"post_id":74873767,"comment_id":132135173,"body_markdown":"I would suggest not to expose internals which are technically available but this exposes those internals to become an public API...","body":"I would suggest not to expose internals which are technically available but this exposes those internals to become an public API..."},{"owner":{"account_id":1186616,"reputation":12512,"user_id":1160445,"display_name":"Maciej Walkowiak"},"score":2,"creation_date":1671617436,"post_id":74873767,"comment_id":132135819,"body_markdown":"Does not seem to work. I agree with complying to the directory layout - it is a special use case.","body":"Does not seem to work. I agree with complying to the directory layout - it is a special use case."}],"tags":[],"owner":{"account_id":1686882,"reputation":1183,"user_id":1549977,"accept_rate":86,"display_name":"Benjamin Marwell"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671705259,"creation_date":1671614494,"answer_id":74873767,"question_id":74872911,"body_markdown":"While it does not comply with [the standard directory layout][1], you can try calling maven like this:\r\n\r\n\r\n    mvn verify &quot;-Dbasedir=$PWD&quot; &quot;-Dmaven.multiModuleProjectDirectory=$PWD&quot;\r\n\r\nHowever, this is untested and it is an internal API as noted by Karl Heinz in the comments. Please do not use it and especially do not expect support for this configuration.\r\n\r\nThat said:\r\nIf it doesn&#39;t work, please try to comply to the directory layout instead at any cost.\r\n\r\nPlease also note that some plugins will still not work with this configuration: they might add other directories with different logic.\r\n\r\nThat said, the solution is (sadly) only: please fix your project. Maybe you can link the file to the base directory?\r\n\r\n\r\n  [1]: https://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html","title":"How to run Maven with a pom.xml in different location than the project sources","body":"<p>While it does not comply with <a href=\"https://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html\" rel=\"nofollow noreferrer\">the standard directory layout</a>, you can try calling maven like this:</p>\n<pre><code>mvn verify &quot;-Dbasedir=$PWD&quot; &quot;-Dmaven.multiModuleProjectDirectory=$PWD&quot;\n</code></pre>\n<p>However, this is untested and it is an internal API as noted by Karl Heinz in the comments. Please do not use it and especially do not expect support for this configuration.</p>\n<p>That said:\nIf it doesn't work, please try to comply to the directory layout instead at any cost.</p>\n<p>Please also note that some plugins will still not work with this configuration: they might add other directories with different logic.</p>\n<p>That said, the solution is (sadly) only: please fix your project. Maybe you can link the file to the base directory?</p>\n"},{"tags":[],"owner":{"account_id":888714,"reputation":34077,"user_id":927493,"accept_rate":61,"display_name":"J Fabian Meier"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671639626,"creation_date":1671639626,"answer_id":74878915,"question_id":74872911,"body_markdown":"Actually, I would just change the source and target directories (by using the command line parameters). I am not aware of a plugin that goes around this.\r\n\r\nOf course, you need to test this a lot because you might break assumptions. ","title":"How to run Maven with a pom.xml in different location than the project sources","body":"<p>Actually, I would just change the source and target directories (by using the command line parameters). I am not aware of a plugin that goes around this.</p>\n<p>Of course, you need to test this a lot because you might break assumptions.</p>\n"}],"owner":{"account_id":1186616,"reputation":12512,"user_id":1160445,"display_name":"Maciej Walkowiak"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1329,"favorite_count":0,"down_vote_count":2,"up_vote_count":8,"answer_count":2,"score":6,"last_activity_date":1671705259,"creation_date":1671609762,"question_id":74872911,"body_markdown":"I need to run Maven with a `pom.xml` file located in different directory than the rest of the project.\r\n\r\nFor example:\r\n\r\n```\r\n.  maven-f-sample git:(main)  tree .         \r\n etc\r\n&#160;&#160;  pom.xml\r\n src\r\n     main\r\n         java\r\n        &#160;&#160;  org\r\n        &#160;&#160;      example\r\n        &#160;&#160;          Main.java\r\n         resources\r\n```\r\n\r\nWhen I run `mvn` from the root of the project with `mvn compile -f etc/pom.xml` it expects `src` directory in `etc/src`.\r\n\r\nI know I can modify source and target directories in `pom.xml` with:\r\n\r\n```\r\n&lt;build&gt;\r\n    &lt;sourceDirectory&gt;../src&lt;/sourceDirectory&gt;\r\n    &lt;directory&gt;../target&lt;/directory&gt;\r\n&lt;/build&gt;\r\n```\r\n\r\nbut since other plugins may rely on other directories than `src` I don&#39;t think this is a reliable solution.\r\n\r\nIs there a trick to either make Maven use sources located in the same directory from which the command is executed, or to set the project directory with another option, **without modifying the `pom.xml`?**\r\n\r\n*In case you are wondering &quot;why&quot;?*\r\n\r\nI realise this is not a typical way to use Maven - I need it specifically for [Just](https://just.maciejwalkowiak.com/) that generates custom `pom.xml` in runtime. Right now it creates it in the project directory as `pom.xml.tmp` but ideally it would be created in `/tmp`.","title":"How to run Maven with a pom.xml in different location than the project sources","body":"<p>I need to run Maven with a <code>pom.xml</code> file located in different directory than the rest of the project.</p>\n<p>For example:</p>\n<pre><code>.  maven-f-sample git:(main)  tree .         \n etc\n  pom.xml\n src\n     main\n         java\n          org\n              example\n                  Main.java\n         resources\n</code></pre>\n<p>When I run <code>mvn</code> from the root of the project with <code>mvn compile -f etc/pom.xml</code> it expects <code>src</code> directory in <code>etc/src</code>.</p>\n<p>I know I can modify source and target directories in <code>pom.xml</code> with:</p>\n<pre><code>&lt;build&gt;\n    &lt;sourceDirectory&gt;../src&lt;/sourceDirectory&gt;\n    &lt;directory&gt;../target&lt;/directory&gt;\n&lt;/build&gt;\n</code></pre>\n<p>but since other plugins may rely on other directories than <code>src</code> I don't think this is a reliable solution.</p>\n<p>Is there a trick to either make Maven use sources located in the same directory from which the command is executed, or to set the project directory with another option, <strong>without modifying the <code>pom.xml</code>?</strong></p>\n<p><em>In case you are wondering &quot;why&quot;?</em></p>\n<p>I realise this is not a typical way to use Maven - I need it specifically for <a href=\"https://just.maciejwalkowiak.com/\" rel=\"noreferrer\">Just</a> that generates custom <code>pom.xml</code> in runtime. Right now it creates it in the project directory as <code>pom.xml.tmp</code> but ideally it would be created in <code>/tmp</code>.</p>\n"},{"tags":["java","xml","apache-camel","saxon","spring-camel"],"comments":[{"owner":{"account_id":529122,"reputation":158120,"user_id":415448,"accept_rate":33,"display_name":"Michael Kay"},"score":0,"creation_date":1671147434,"post_id":74818383,"comment_id":132042352,"body_markdown":"I don&#39;t know anything about Camel, but my guess would be (a) it&#39;s unlikely to work and (b) the fact that you got a `NoSuchMethodError` strongly suggests that it doesn&#39;t.","body":"I don&#39;t know anything about Camel, but my guess would be (a) it&#39;s unlikely to work and (b) the fact that you got a <code>NoSuchMethodError</code> strongly suggests that it doesn&#39;t."}],"answers":[{"tags":[],"owner":{"account_id":22247129,"reputation":2052,"user_id":16480631,"display_name":"Pasi &#214;sterman"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1671704845,"creation_date":1671704845,"answer_id":74887156,"question_id":74818383,"body_markdown":"No, your camel dependencies should always match with the version of camel you&#39;re using. Sometimes you might want/need to change version of transitive dependency if one of your camel dependencies is using version of a library that has a bug that&#39;s been patched in later (minor) version but that&#39;s about it. \r\n\r\nA lot has changed between Camel version 2.13.4 and 3.14.x including the fact that Camel 2.25.0 reached it&#39;s EOL (end of life) in [January 2022](https://camel.apache.org/blog/2020/03/LTS-Release-Schedule/) meaning that it will no longer receive updates. \r\n\r\nYour options are either to upgrade your integration to more recent camel version or implement a custom processor or camel-component that does what you do with camel-saxon in your integration but by using more recent versions of saxon related libraries. ","title":"Is it possible to use camel 2.13.4 with camel-saxon 3.14.0?","body":"<p>No, your camel dependencies should always match with the version of camel you're using. Sometimes you might want/need to change version of transitive dependency if one of your camel dependencies is using version of a library that has a bug that's been patched in later (minor) version but that's about it.</p>\n<p>A lot has changed between Camel version 2.13.4 and 3.14.x including the fact that Camel 2.25.0 reached it's EOL (end of life) in <a href=\"https://camel.apache.org/blog/2020/03/LTS-Release-Schedule/\" rel=\"nofollow noreferrer\">January 2022</a> meaning that it will no longer receive updates.</p>\n<p>Your options are either to upgrade your integration to more recent camel version or implement a custom processor or camel-component that does what you do with camel-saxon in your integration but by using more recent versions of saxon related libraries.</p>\n"}],"owner":{"account_id":23908312,"reputation":5,"user_id":17905600,"display_name":"greenTea"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":121,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74887156,"answer_count":1,"score":0,"last_activity_date":1671704845,"creation_date":1671144414,"question_id":74818383,"body_markdown":"I am trying to update the version of camel-saxon being used in my project from 2.13.4 to 3.14.0 while keeping the version of camel-core at 2.13.4. Also I am building with Java 1.8.265. Once I change the version of camel-saxon from 2.13.4 to 3.14.0 in my pom.xml and try building with maven clean install I get the following error:\r\n\r\n    java.lang.NoSuchMethodError: org.apache.camel.language.xquery.XQueryLanguage.property(Ljava/lang/Class;[Ljava/lang/Object;ILjava/lang/Object;)Ljava/lang/Object;\r\n        at org.apache.camel.language.xquery.XQueryLanguage.configureBuilder(XQueryLanguage.java:85)\r\n        at org.apache.camel.language.xquery.XQueryLanguage.createExpression(XQueryLanguage.java:80)\r\n        at org.apache.camel.language.xquery.XQueryLanguage.createExpression(XQueryLanguage.java:67)\r\n\r\n\r\nMy first thought was to try to upgrade camel-core from 2.13.4 to 3.14.0 but I would like to avoid that if possible for the time being. So is there an api/jar or something else I can use to bridge the gap between camel-core and camel-saxon or is the only way to upgrade camel-saxon by updating both dependencies?\r\n\r\n\r\nIf anyone is interested what error I get when trying to upgrade camel-core to 3.14.0 along with camel-saxon. I get the following error:\r\n\r\n&gt; org.apache.camel.FailedToCreateRouteException: Failed to create route\r\n&gt; route2 at: &gt;&gt;&gt; InOut[inOut] &lt;&lt;&lt; in route:\r\n&gt; Route(route2)[From[vm:urn:myurn] -&gt; [ConvertBodyTo... because of\r\n&gt; Failed to resolve endpoint:\r\n&gt; xslt://path/to/file/myfile.xsl?transformerFactory=tFactory\r\n&gt; due to: Error binding property (transformerFactory=tFactory) with\r\n&gt; name: transformerFactory on bean:\r\n&gt; xslt://path/to/file/myfile.xsl?transformerFactory=tFactory\r\n&gt; with value: tFactory\r\n\r\n\r\nand route:\r\n```\r\n&lt;bean id=&quot;tFactory&quot; class=&quot;net.sf.saxon.TransformerFactoryImpl&quot;/&gt;\r\n&lt;camelContext trace=&quot;true&quot; xmlns=&quot;http://camel.apache.org/schema/spring&quot;&gt;\r\n&lt;route&gt;\r\n\t\t&lt;from uri=&quot;vm:urn:myurn&quot; /&gt;\r\n\t\t&lt;convertBodyTo type=&quot;java.lang.String&quot;/&gt;\r\n\t\t&lt;log message=&quot;my message&quot; loggingLevel=&quot;INFO&quot;\r\n\t\t\tlogName=&quot;my.logname&quot; /&gt;\r\n\t\t&lt;inOut uri=&quot;xslt:path/to/file/myfile.xsl?transformerFactory=tFactory&quot;/&gt;\r\n\t\t&lt;convertBodyTo type=&quot;java.lang.String&quot;/&gt;\r\n\t\t&lt;log message=&quot;my message&quot; loggingLevel=&quot;INFO&quot;\r\n\t\t\t\tlogName=&quot;my.log&quot; /&gt;\r\n\t\t&lt;inOut uri=&quot;mock:processedout&quot;/&gt;\r\n\t&lt;/route&gt;\r\n&lt;/camelContext&gt;\r\n```","title":"Is it possible to use camel 2.13.4 with camel-saxon 3.14.0?","body":"<p>I am trying to update the version of camel-saxon being used in my project from 2.13.4 to 3.14.0 while keeping the version of camel-core at 2.13.4. Also I am building with Java 1.8.265. Once I change the version of camel-saxon from 2.13.4 to 3.14.0 in my pom.xml and try building with maven clean install I get the following error:</p>\n<pre><code>java.lang.NoSuchMethodError: org.apache.camel.language.xquery.XQueryLanguage.property(Ljava/lang/Class;[Ljava/lang/Object;ILjava/lang/Object;)Ljava/lang/Object;\n    at org.apache.camel.language.xquery.XQueryLanguage.configureBuilder(XQueryLanguage.java:85)\n    at org.apache.camel.language.xquery.XQueryLanguage.createExpression(XQueryLanguage.java:80)\n    at org.apache.camel.language.xquery.XQueryLanguage.createExpression(XQueryLanguage.java:67)\n</code></pre>\n<p>My first thought was to try to upgrade camel-core from 2.13.4 to 3.14.0 but I would like to avoid that if possible for the time being. So is there an api/jar or something else I can use to bridge the gap between camel-core and camel-saxon or is the only way to upgrade camel-saxon by updating both dependencies?</p>\n<p>If anyone is interested what error I get when trying to upgrade camel-core to 3.14.0 along with camel-saxon. I get the following error:</p>\n<blockquote>\n<p>org.apache.camel.FailedToCreateRouteException: Failed to create route\nroute2 at: &gt;&gt;&gt; InOut[inOut] &lt;&lt;&lt; in route:\nRoute(route2)[From[vm:urn:myurn] -&gt; [ConvertBodyTo... because of\nFailed to resolve endpoint:\nxslt://path/to/file/myfile.xsl?transformerFactory=tFactory\ndue to: Error binding property (transformerFactory=tFactory) with\nname: transformerFactory on bean:\nxslt://path/to/file/myfile.xsl?transformerFactory=tFactory\nwith value: tFactory</p>\n</blockquote>\n<p>and route:</p>\n<pre><code>&lt;bean id=&quot;tFactory&quot; class=&quot;net.sf.saxon.TransformerFactoryImpl&quot;/&gt;\n&lt;camelContext trace=&quot;true&quot; xmlns=&quot;http://camel.apache.org/schema/spring&quot;&gt;\n&lt;route&gt;\n        &lt;from uri=&quot;vm:urn:myurn&quot; /&gt;\n        &lt;convertBodyTo type=&quot;java.lang.String&quot;/&gt;\n        &lt;log message=&quot;my message&quot; loggingLevel=&quot;INFO&quot;\n            logName=&quot;my.logname&quot; /&gt;\n        &lt;inOut uri=&quot;xslt:path/to/file/myfile.xsl?transformerFactory=tFactory&quot;/&gt;\n        &lt;convertBodyTo type=&quot;java.lang.String&quot;/&gt;\n        &lt;log message=&quot;my message&quot; loggingLevel=&quot;INFO&quot;\n                logName=&quot;my.log&quot; /&gt;\n        &lt;inOut uri=&quot;mock:processedout&quot;/&gt;\n    &lt;/route&gt;\n&lt;/camelContext&gt;\n</code></pre>\n"},{"tags":["java","httprequest","x-forwarded-for"],"owner":{"account_id":1073482,"reputation":10989,"user_id":1072187,"accept_rate":36,"display_name":"John Little"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":341,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671704837,"creation_date":1671638960,"question_id":74878782,"body_markdown":"we are using a system which requires the X-Forwarded-For header from the request for security, but it can only handle a single value. The specification says that we can receive multiple X-Forwarded-For headers, and they MUST be combined in the right order (presumably first header found goes to the left of the resultant single string, and the last to the right).\r\n\r\nBelow is our guess at the right code, but this makes some big assumptions:\r\n\r\n1. does the request.getHeaders() function return the headers in the right order?\r\n1. does the Enumeration.getNext() return the right order?\r\n\r\n\r\n```\r\n  public String getForwardedFor(SlingHttpServletRequest request) {\r\n\t  String result = null;\r\n      Enumeration&lt;String&gt; forwaradedForHeaders = request.getHeaders(&quot;X-Forwarded-For&quot;);\r\n      while (forwaradedForHeaders.hasMoreElements()) {\r\n    \t  String header = forwaradedForHeaders.nextElement();\r\n    \t  if (result == null) {\r\n    \t\t  result = header;\r\n    \t  } else {\r\n    \t\t  result = result + &quot;, &quot; + header;\r\n    \t  }\r\n      }\r\n\t  return result;\r\n  }\r\n```\r\n\r\n\r\nUPDATE\r\n----------------------\r\n\r\nI realised I need to include the actual IP of the thing which called my middleware, and add this to the right end of the string (I think).\r\n\r\nNow I have this:\r\n\r\n```\r\n  public String getForwardedFor(SlingHttpServletRequest request) {\r\n\t  String result = &quot;&quot;;\r\n      Enumeration&lt;String&gt; forwaradedForHeaders = request.getHeaders(&quot;X-Forwarded-For&quot;);\r\n      while (forwaradedForHeaders.hasMoreElements()) {\r\n    \t  String header = forwaradedForHeaders.nextElement();\r\n    \t  if (result.equals(&quot;&quot;)) {\r\n    \t\t  result = header;\r\n    \t  } else {\r\n    \t\t  result = result + &quot;, &quot; + header;\r\n    \t  }\r\n      }\r\n      \r\n      String clientIP = request.getRemoteAddr();\r\n      \r\n      if (result.equals(&quot;&quot;)) {\r\n    \t  result += clientIP;\r\n      } else {\r\n    \t  result += &quot;, &quot; + clientIP;\r\n      }\r\n      \r\n      logger.debug(&quot;getForwardedFor:&quot; + forwaradedForHeaders);\r\n\t  return result;\r\n  }\r\n```\r\n\r\nHowever, this has a strange effect. If the request has an X-Forwarded-For header set, then request.getRemoteAddr() does NOT return the ip of the client who called the middleware, it returns the last value from X-Forwarded-For.  If the client doesnt send anything in X-Forwarded-For, then request.getRemoteAddr() returns the IP of the caller. what is going on here, and how do you get the callers IP if the X-Forwarded-For header is already set?","title":"how to correctly join multiple X-Forwarded-For headers in java","body":"<p>we are using a system which requires the X-Forwarded-For header from the request for security, but it can only handle a single value. The specification says that we can receive multiple X-Forwarded-For headers, and they MUST be combined in the right order (presumably first header found goes to the left of the resultant single string, and the last to the right).</p>\n<p>Below is our guess at the right code, but this makes some big assumptions:</p>\n<ol>\n<li>does the request.getHeaders() function return the headers in the right order?</li>\n<li>does the Enumeration.getNext() return the right order?</li>\n</ol>\n<pre><code>  public String getForwardedFor(SlingHttpServletRequest request) {\n      String result = null;\n      Enumeration&lt;String&gt; forwaradedForHeaders = request.getHeaders(&quot;X-Forwarded-For&quot;);\n      while (forwaradedForHeaders.hasMoreElements()) {\n          String header = forwaradedForHeaders.nextElement();\n          if (result == null) {\n              result = header;\n          } else {\n              result = result + &quot;, &quot; + header;\n          }\n      }\n      return result;\n  }\n</code></pre>\n<h2>UPDATE</h2>\n<p>I realised I need to include the actual IP of the thing which called my middleware, and add this to the right end of the string (I think).</p>\n<p>Now I have this:</p>\n<pre><code>  public String getForwardedFor(SlingHttpServletRequest request) {\n      String result = &quot;&quot;;\n      Enumeration&lt;String&gt; forwaradedForHeaders = request.getHeaders(&quot;X-Forwarded-For&quot;);\n      while (forwaradedForHeaders.hasMoreElements()) {\n          String header = forwaradedForHeaders.nextElement();\n          if (result.equals(&quot;&quot;)) {\n              result = header;\n          } else {\n              result = result + &quot;, &quot; + header;\n          }\n      }\n      \n      String clientIP = request.getRemoteAddr();\n      \n      if (result.equals(&quot;&quot;)) {\n          result += clientIP;\n      } else {\n          result += &quot;, &quot; + clientIP;\n      }\n      \n      logger.debug(&quot;getForwardedFor:&quot; + forwaradedForHeaders);\n      return result;\n  }\n</code></pre>\n<p>However, this has a strange effect. If the request has an X-Forwarded-For header set, then request.getRemoteAddr() does NOT return the ip of the client who called the middleware, it returns the last value from X-Forwarded-For.  If the client doesnt send anything in X-Forwarded-For, then request.getRemoteAddr() returns the IP of the caller. what is going on here, and how do you get the callers IP if the X-Forwarded-For header is already set?</p>\n"},{"tags":["java","spring","spring-boot","spring-security"],"comments":[{"owner":{"account_id":21488921,"reputation":4730,"user_id":15835039,"display_name":"Steve Riesenberg"},"score":4,"creation_date":1670100959,"post_id":74666596,"comment_id":131796336,"body_markdown":"Does this help? https://docs.spring.io/spring-security/reference/5.8/migration/servlet/config.html#_stop_using_websecurityconfigureradapter","body":"Does this help? <a href=\"https://docs.spring.io/spring-security/reference/5.8/migration/servlet/config.html#_stop_using_websecurityconfigureradapter\" rel=\"nofollow noreferrer\">docs.spring.io/spring-security/reference/5.8/migration/servl&zwnj;&#8203;et/&hellip;</a>"},{"owner":{"account_id":4597208,"reputation":48209,"user_id":3728901,"accept_rate":58,"display_name":"Vy Do"},"score":0,"creation_date":1670101280,"post_id":74666596,"comment_id":131796392,"body_markdown":"How to migration this config `.authorizeRequests().antMatchers(&quot;/api/auth/**&quot;, &quot;/swagger-ui/**&quot;, &quot;/v3/api-docs/**&quot;).permitAll()` in Spring Boot 3?","body":"How to migration this config <code>.authorizeRequests().antMatchers(&quot;&#47;api&#47;auth&#47;**&quot;, &quot;&#47;swagger-ui&#47;**&quot;, &quot;&#47;v3&#47;api-docs&#47;**&quot;).permitAll()</code> in Spring Boot 3?"},{"owner":{"account_id":21488921,"reputation":4730,"user_id":15835039,"display_name":"Steve Riesenberg"},"score":3,"creation_date":1670101648,"post_id":74666596,"comment_id":131796446,"body_markdown":"That topic is also covered on the same page linked above under [Use the new requestMatchers methods](https://docs.spring.io/spring-security/reference/5.8/migration/servlet/config.html#use-new-requestmatchers).","body":"That topic is also covered on the same page linked above under <a href=\"https://docs.spring.io/spring-security/reference/5.8/migration/servlet/config.html#use-new-requestmatchers\" rel=\"nofollow noreferrer\">Use the new requestMatchers methods</a>."},{"owner":{"account_id":4597208,"reputation":48209,"user_id":3728901,"accept_rate":58,"display_name":"Vy Do"},"score":0,"creation_date":1670103725,"post_id":74666596,"comment_id":131796864,"body_markdown":"We use `.requestMatchers`","body":"We use <code>.requestMatchers</code>"}],"answers":[{"tags":[],"owner":{"account_id":23645759,"reputation":11,"user_id":20660000,"display_name":"Jo&#227;o Vitor Menezes"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1670075109,"creation_date":1670075030,"answer_id":74667296,"question_id":74666596,"body_markdown":"On Spring Boot 3 `WebSecurityConfigurerAdapter` is deprecated. So in your case the `WebSecurityConfig` class should not extend any class and most be implemented by itself. You can implement the `userDetailsService` by yourself as a `@Bean` and also set the `AuthenticationManager`, not just return the super. \r\nI had the same problem and my solution was just to add `@SuppressWarnings(&quot;deprecation&quot;)`\r\nbefore the `@Configuration` annotation in the class.","title":"How to fix error of WebSecurityConfigurerAdapter when upgrade to Spring Boot 3.0.0?","body":"<p>On Spring Boot 3 <code>WebSecurityConfigurerAdapter</code> is deprecated. So in your case the <code>WebSecurityConfig</code> class should not extend any class and most be implemented by itself. You can implement the <code>userDetailsService</code> by yourself as a <code>@Bean</code> and also set the <code>AuthenticationManager</code>, not just return the super.\nI had the same problem and my solution was just to add <code>@SuppressWarnings(&quot;deprecation&quot;)</code>\nbefore the <code>@Configuration</code> annotation in the class.</p>\n"},{"tags":[],"owner":{"account_id":23368420,"reputation":147,"user_id":17439681,"display_name":"sof_user"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1670361444,"creation_date":1670361444,"answer_id":74709135,"question_id":74666596,"body_markdown":"WebSecurityConfigurerAdapter is deprecated and should use component-based security configuration. You&#39;ll have to create a SecurityFilterChain bean for HTTPSecurity and shouldn&#39;t extend **WebSecurityConfigurerAdapter** as other answer suggested. Please refer **https://spring.io/blog/2022/02/21/spring-security-without-the-websecurityconfigureradapter** for more details.","title":"How to fix error of WebSecurityConfigurerAdapter when upgrade to Spring Boot 3.0.0?","body":"<p>WebSecurityConfigurerAdapter is deprecated and should use component-based security configuration. You'll have to create a SecurityFilterChain bean for HTTPSecurity and shouldn't extend <strong>WebSecurityConfigurerAdapter</strong> as other answer suggested. Please refer <strong><a href=\"https://spring.io/blog/2022/02/21/spring-security-without-the-websecurityconfigureradapter\" rel=\"noreferrer\">https://spring.io/blog/2022/02/21/spring-security-without-the-websecurityconfigureradapter</a></strong> for more details.</p>\n"},{"tags":[],"owner":{"account_id":19001594,"reputation":31,"user_id":13868936,"display_name":"UJJAWAL KUMAR"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1670485057,"creation_date":1670485057,"answer_id":74726925,"question_id":74666596,"body_markdown":"replace `.antMatchers -&gt; .requestMatchers` (it will work in spring 3.0.0 )","title":"How to fix error of WebSecurityConfigurerAdapter when upgrade to Spring Boot 3.0.0?","body":"<p>replace <code>.antMatchers -&gt; .requestMatchers</code> (it will work in spring 3.0.0 )</p>\n"}],"owner":{"account_id":4597208,"reputation":48209,"user_id":3728901,"accept_rate":58,"display_name":"Vy Do"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":29890,"favorite_count":0,"down_vote_count":1,"up_vote_count":10,"answer_count":3,"score":9,"last_activity_date":1671704745,"creation_date":1670069263,"question_id":74666596,"body_markdown":"I have code work ok with Spring 2.x . Source code of Spring 2.x\r\n\r\n[![enter image description here][1]][1]\r\n\r\nFile `CustomFilter.java`\r\n\r\n```java\r\npackage com.example.security;\r\n\r\nimport jakarta.servlet.FilterChain;\r\nimport jakarta.servlet.ServletException;\r\nimport jakarta.servlet.ServletRequest;\r\nimport jakarta.servlet.ServletResponse;\r\nimport org.springframework.web.filter.GenericFilterBean;\r\n\r\nimport java.io.IOException;\r\n\r\npublic class CustomFilter extends GenericFilterBean {\r\n\r\n    @Override\r\n    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {\r\n        chain.doFilter(request, response);\r\n    }\r\n}\r\n```\r\n\r\nFile `AuthEntryPointJwt.java`\r\n\r\n```java\r\npackage com.example.security.jwt;\r\n\r\nimport com.fasterxml.jackson.databind.ObjectMapper;\r\nimport jakarta.servlet.http.HttpServletRequest;\r\nimport jakarta.servlet.http.HttpServletResponse;\r\nimport org.slf4j.Logger;\r\nimport org.slf4j.LoggerFactory;\r\nimport org.springframework.http.MediaType;\r\nimport org.springframework.security.core.AuthenticationException;\r\nimport org.springframework.security.web.AuthenticationEntryPoint;\r\nimport org.springframework.stereotype.Component;\r\n\r\nimport java.io.IOException;\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\n\r\n@Component\r\npublic class AuthEntryPointJwt implements AuthenticationEntryPoint {\r\n\r\n    private static final Logger logger = LoggerFactory.getLogger(AuthEntryPointJwt.class);\r\n\r\n    @Override\r\n    public void commence(HttpServletRequest request, HttpServletResponse response, AuthenticationException authException) throws IOException {\r\n        logger.error(&quot;Unauthorized error: {}&quot;, authException.getMessage());\r\n        response.setContentType(MediaType.APPLICATION_JSON_VALUE);\r\n        response.setStatus(HttpServletResponse.SC_UNAUTHORIZED);\r\n        final Map&lt;String, Object&gt; body = new HashMap&lt;&gt;();\r\n        body.put(&quot;status&quot;, HttpServletResponse.SC_UNAUTHORIZED);\r\n        body.put(&quot;error&quot;, &quot;Unauthorized&quot;);\r\n        body.put(&quot;message&quot;, authException.getMessage());\r\n        body.put(&quot;path&quot;, request.getServletPath());\r\n        final ObjectMapper mapper = new ObjectMapper();\r\n        mapper.writeValue(response.getOutputStream(), body);\r\n    }\r\n\r\n}\r\n```\r\n\r\nFile `AuthTokenFilter.java`\r\n\r\n```java\r\npackage com.example.security.jwt;\r\n\r\nimport com.example.security.services.UserDetailsServiceImpl;\r\nimport jakarta.servlet.FilterChain;\r\nimport jakarta.servlet.ServletException;\r\nimport jakarta.servlet.http.HttpServletRequest;\r\nimport jakarta.servlet.http.HttpServletResponse;\r\nimport org.slf4j.Logger;\r\nimport org.slf4j.LoggerFactory;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.security.authentication.UsernamePasswordAuthenticationToken;\r\nimport org.springframework.security.core.context.SecurityContextHolder;\r\nimport org.springframework.security.core.userdetails.UserDetails;\r\nimport org.springframework.security.web.authentication.WebAuthenticationDetailsSource;\r\nimport org.springframework.util.StringUtils;\r\nimport org.springframework.web.filter.OncePerRequestFilter;\r\n\r\nimport java.io.IOException;\r\n\r\npublic class AuthTokenFilter extends OncePerRequestFilter {\r\n\r\n    private static final Logger logger = LoggerFactory.getLogger(AuthTokenFilter.class);\r\n\r\n    @Autowired\r\n    private JwtUtils jwtUtils;\r\n\r\n    @Autowired\r\n    private UserDetailsServiceImpl userDetailsService;\r\n\r\n    @Override\r\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException {\r\n        try {\r\n            String jwt = parseJwt(request);\r\n            if (jwt != null &amp;&amp; jwtUtils.validateJwtToken(jwt)) {\r\n                String username = jwtUtils.getUserNameFromJwtToken(jwt);\r\n                UserDetails userDetails = userDetailsService.loadUserByUsername(username);\r\n                UsernamePasswordAuthenticationToken authentication = new UsernamePasswordAuthenticationToken(userDetails, null, userDetails.getAuthorities());\r\n                authentication.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\r\n                SecurityContextHolder.getContext().setAuthentication(authentication);\r\n            }\r\n        } catch (Exception e) {\r\n            logger.error(&quot;Cannot set user authentication: {}&quot;, e);\r\n        }\r\n        filterChain.doFilter(request, response);\r\n    }\r\n\r\n    private String parseJwt(HttpServletRequest request) {\r\n        String headerAuth = request.getHeader(&quot;Authorization&quot;);\r\n        if (StringUtils.hasText(headerAuth) &amp;&amp; headerAuth.startsWith(&quot;Bearer &quot;)) {\r\n            return headerAuth.substring(7);\r\n        }\r\n        return null;\r\n    }\r\n\r\n}\r\n```\r\n\r\nFile `JwtUtils.java`\r\n\r\n```java\r\npackage com.example.security.jwt;\r\n\r\nimport com.example.security.services.UserDetailsImpl;\r\nimport io.jsonwebtoken.ExpiredJwtException;\r\nimport io.jsonwebtoken.Jwts;\r\nimport io.jsonwebtoken.MalformedJwtException;\r\nimport io.jsonwebtoken.SignatureAlgorithm;\r\nimport io.jsonwebtoken.SignatureException;\r\nimport io.jsonwebtoken.UnsupportedJwtException;\r\nimport org.slf4j.Logger;\r\nimport org.slf4j.LoggerFactory;\r\nimport org.springframework.beans.factory.annotation.Value;\r\nimport org.springframework.security.core.Authentication;\r\nimport org.springframework.stereotype.Component;\r\n\r\nimport java.util.Date;\r\n\r\n@Component\r\npublic class JwtUtils {\r\n\r\n    private static final Logger logger = LoggerFactory.getLogger(JwtUtils.class);\r\n\r\n    @Value(&quot;${app.jwtSecret}&quot;)\r\n    private String jwtSecret;\r\n\r\n    @Value(&quot;${app.jwtExpirationMs}&quot;)\r\n    private int jwtExpirationMs;\r\n\r\n    public String generateJwtToken(Authentication authentication) {\r\n        UserDetailsImpl userPrincipal = (UserDetailsImpl) authentication.getPrincipal();\r\n        return Jwts.builder().setSubject((userPrincipal.getUsername())).setIssuedAt(new Date()).setExpiration(new Date((new Date()).getTime() + jwtExpirationMs)).signWith(SignatureAlgorithm.HS512, jwtSecret).compact();\r\n    }\r\n\r\n    public String getUserNameFromJwtToken(String token) {\r\n        return Jwts.parser().setSigningKey(jwtSecret).parseClaimsJws(token).getBody().getSubject();\r\n    }\r\n\r\n    public boolean validateJwtToken(String authToken) {\r\n        try {\r\n            Jwts.parser().setSigningKey(jwtSecret).parseClaimsJws(authToken);\r\n            return true;\r\n        } catch (SignatureException e) {\r\n            logger.error(&quot;Invalid JWT signature: {}&quot;, e.getMessage());\r\n        } catch (MalformedJwtException e) {\r\n            logger.error(&quot;Invalid JWT token: {}&quot;, e.getMessage());\r\n        } catch (ExpiredJwtException e) {\r\n            logger.error(&quot;JWT token is expired: {}&quot;, e.getMessage());\r\n        } catch (UnsupportedJwtException e) {\r\n            logger.error(&quot;JWT token is unsupported: {}&quot;, e.getMessage());\r\n        } catch (IllegalArgumentException e) {\r\n            logger.error(&quot;JWT claims string is empty: {}&quot;, e.getMessage());\r\n        }\r\n        return false;\r\n    }\r\n\r\n}\r\n```\r\n\r\nFile `UserDetailsImpl.java`\r\n\r\n```java\r\npackage com.example.security.services;\r\n\r\nimport com.example.models.User;\r\nimport com.fasterxml.jackson.annotation.JsonIgnore;\r\nimport org.springframework.security.core.GrantedAuthority;\r\nimport org.springframework.security.core.authority.SimpleGrantedAuthority;\r\nimport org.springframework.security.core.userdetails.UserDetails;\r\n\r\nimport java.util.Collection;\r\nimport java.util.List;\r\nimport java.util.Objects;\r\nimport java.util.stream.Collectors;\r\n\r\npublic class UserDetailsImpl implements UserDetails {\r\n\r\n    private static final long serialVersionUID = 1L;\r\n    private Long id;\r\n    private String username;\r\n    private String email;\r\n\r\n    @JsonIgnore\r\n    private String password;\r\n\r\n    private Collection&lt;? extends GrantedAuthority&gt; authorities;\r\n\r\n    public UserDetailsImpl(Long id, String username, String email, String password, Collection&lt;? extends GrantedAuthority&gt; authorities) {\r\n        this.id = id;\r\n        this.username = username;\r\n        this.email = email;\r\n        this.password = password;\r\n        this.authorities = authorities;\r\n    }\r\n\r\n    public static UserDetailsImpl build(User user) {\r\n        List&lt;GrantedAuthority&gt; authorities = user.getRoles().stream().map(role -&gt; new SimpleGrantedAuthority(role.getName().name())).collect(Collectors.toList());\r\n        return new UserDetailsImpl(user.getId(), user.getUsername(), user.getEmail(), user.getPassword(), authorities);\r\n    }\r\n\r\n    @Override\r\n    public Collection&lt;? extends GrantedAuthority&gt; getAuthorities() {\r\n        return authorities;\r\n    }\r\n\r\n    public Long getId() {\r\n        return id;\r\n    }\r\n\r\n    public String getEmail() {\r\n        return email;\r\n    }\r\n\r\n    @Override\r\n    public String getPassword() {\r\n        return password;\r\n    }\r\n\r\n    @Override\r\n    public String getUsername() {\r\n        return username;\r\n    }\r\n\r\n    @Override\r\n    public boolean isAccountNonExpired() {\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public boolean isAccountNonLocked() {\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public boolean isCredentialsNonExpired() {\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public boolean isEnabled() {\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public boolean equals(Object o) {\r\n        if (this == o)\r\n            return true;\r\n        if (o == null || getClass() != o.getClass())\r\n            return false;\r\n        UserDetailsImpl user = (UserDetailsImpl) o;\r\n        return Objects.equals(id, user.id);\r\n    }\r\n\r\n}\r\n```\r\n\r\nFile `UserDetailsServiceImpl.java`\r\n\r\n```java\r\npackage com.example.security.services;\r\n\r\nimport com.example.models.User;\r\nimport com.example.repository.UserRepository;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.security.core.userdetails.UserDetails;\r\nimport org.springframework.security.core.userdetails.UserDetailsService;\r\nimport org.springframework.security.core.userdetails.UsernameNotFoundException;\r\nimport org.springframework.stereotype.Service;\r\nimport org.springframework.transaction.annotation.Transactional;\r\n\r\n// Original.\r\n@Service\r\npublic class UserDetailsServiceImpl implements UserDetailsService {\r\n\r\n    @Autowired\r\n    UserRepository userRepository;\r\n\r\n    @Override\r\n    @Transactional\r\n    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\r\n        User user = userRepository.findByUsername(username).orElseThrow(() -&gt; new UsernameNotFoundException(&quot;User Not Found with username: &quot; + username));\r\n        return UserDetailsImpl.build(user);\r\n    }\r\n\r\n}\r\n```\r\n\r\n\r\nfile `WebSecurityConfig.java`\r\n\r\n```java\r\npackage com.example.security;\r\n\r\nimport com.example.security.jwt.AuthEntryPointJwt;\r\nimport com.example.security.jwt.AuthTokenFilter;\r\nimport com.example.security.services.UserDetailsServiceImpl;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.security.authentication.AuthenticationManager;\r\nimport org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;\r\nimport org.springframework.security.config.annotation.method.configuration.EnableGlobalMethodSecurity;\r\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\r\nimport org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;\r\nimport org.springframework.security.config.http.SessionCreationPolicy;\r\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\r\nimport org.springframework.security.crypto.password.PasswordEncoder;\r\nimport org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter;\r\n\r\n@Configuration\r\n@EnableWebSecurity\r\n@EnableGlobalMethodSecurity(\r\n        // securedEnabled = true,\r\n        // jsr250Enabled = true,\r\n        prePostEnabled = true)\r\npublic class WebSecurityConfig extends WebSecurityConfigurerAdapter {\r\n\r\n    @Autowired\r\n    UserDetailsServiceImpl userDetailsService;\r\n\r\n    @Autowired\r\n    private AuthEntryPointJwt unauthorizedHandler;\r\n\r\n    @Bean\r\n    public AuthTokenFilter authenticationJwtTokenFilter() {\r\n        return new AuthTokenFilter();\r\n    }\r\n\r\n    @Override\r\n    public void configure(AuthenticationManagerBuilder authenticationManagerBuilder) throws Exception {\r\n        authenticationManagerBuilder.userDetailsService(userDetailsService).passwordEncoder(passwordEncoder());\r\n    }\r\n\r\n    @Bean\r\n    @Override\r\n    public AuthenticationManager authenticationManagerBean() throws Exception {\r\n        return super.authenticationManagerBean();\r\n    }\r\n\r\n    @Bean\r\n    public PasswordEncoder passwordEncoder() {\r\n        return new BCryptPasswordEncoder();\r\n    }\r\n\r\n\r\n    // Nu id gi l&#234;n != id ca tenant ca user &#243; trong database, th&#236; kh&#244;ng cho i tip.\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n        http.cors().and().csrf().disable()\r\n                .exceptionHandling().authenticationEntryPoint(unauthorizedHandler).and()\r\n                .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS).and()\r\n                //.authorizeRequests().antMatchers(&quot;/api/auth/**&quot;, &quot;/swagger-ui/**&quot;).permitAll()\r\n\r\n                .authorizeRequests().antMatchers(&quot;/api/auth/**&quot;, &quot;/swagger-ui/**&quot;, &quot;/v3/api-docs/**&quot;).permitAll()\r\n\r\n                .antMatchers(&quot;/app/**&quot;).permitAll()\r\n                .antMatchers(&quot;/api/test/**&quot;).permitAll()\r\n                .anyRequest().authenticated();\r\n        http.addFilterBefore(authenticationJwtTokenFilter(), UsernamePasswordAuthenticationFilter.class);\r\n        //;\r\n\r\n        // .addFilterAfter(new CustomFilter(), BasicAuthenticationFilter.class); // VyDN 2022_07_22 // https://www.baeldung.com/spring-security-custom-filter\r\n    }\r\n\r\n}\r\n\r\n// Add filter before, after: https://stackoverflow.com/a/59000469\r\n\r\n```\r\nNow, I am using Java / JDK 19, Spring Boot 3.0.0 . After upgrade to Spring Boot 3.0.0 , it causes syntax error. [![enter image description here][2]][2]\r\n\r\n[![enter image description here][3]][3]\r\n\r\nHow to fix error of `WebSecurityConfigurerAdapter` when upgrade to Spring Boot 3.0.0? Specific to my configuration. Please guide me rewrite file `WebSecurityConfig.java`\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/CuLwV.png\r\n  [2]: https://i.stack.imgur.com/Zq1iw.png\r\n  [3]: https://i.stack.imgur.com/ATRpU.png","title":"How to fix error of WebSecurityConfigurerAdapter when upgrade to Spring Boot 3.0.0?","body":"<p>I have code work ok with Spring 2.x . Source code of Spring 2.x</p>\n<p><a href=\"https://i.stack.imgur.com/CuLwV.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/CuLwV.png\" alt=\"enter image description here\" /></a></p>\n<p>File <code>CustomFilter.java</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.security;\n\nimport jakarta.servlet.FilterChain;\nimport jakarta.servlet.ServletException;\nimport jakarta.servlet.ServletRequest;\nimport jakarta.servlet.ServletResponse;\nimport org.springframework.web.filter.GenericFilterBean;\n\nimport java.io.IOException;\n\npublic class CustomFilter extends GenericFilterBean {\n\n    @Override\n    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {\n        chain.doFilter(request, response);\n    }\n}\n</code></pre>\n<p>File <code>AuthEntryPointJwt.java</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.security.jwt;\n\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport jakarta.servlet.http.HttpServletRequest;\nimport jakarta.servlet.http.HttpServletResponse;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.http.MediaType;\nimport org.springframework.security.core.AuthenticationException;\nimport org.springframework.security.web.AuthenticationEntryPoint;\nimport org.springframework.stereotype.Component;\n\nimport java.io.IOException;\nimport java.util.HashMap;\nimport java.util.Map;\n\n@Component\npublic class AuthEntryPointJwt implements AuthenticationEntryPoint {\n\n    private static final Logger logger = LoggerFactory.getLogger(AuthEntryPointJwt.class);\n\n    @Override\n    public void commence(HttpServletRequest request, HttpServletResponse response, AuthenticationException authException) throws IOException {\n        logger.error(&quot;Unauthorized error: {}&quot;, authException.getMessage());\n        response.setContentType(MediaType.APPLICATION_JSON_VALUE);\n        response.setStatus(HttpServletResponse.SC_UNAUTHORIZED);\n        final Map&lt;String, Object&gt; body = new HashMap&lt;&gt;();\n        body.put(&quot;status&quot;, HttpServletResponse.SC_UNAUTHORIZED);\n        body.put(&quot;error&quot;, &quot;Unauthorized&quot;);\n        body.put(&quot;message&quot;, authException.getMessage());\n        body.put(&quot;path&quot;, request.getServletPath());\n        final ObjectMapper mapper = new ObjectMapper();\n        mapper.writeValue(response.getOutputStream(), body);\n    }\n\n}\n</code></pre>\n<p>File <code>AuthTokenFilter.java</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.security.jwt;\n\nimport com.example.security.services.UserDetailsServiceImpl;\nimport jakarta.servlet.FilterChain;\nimport jakarta.servlet.ServletException;\nimport jakarta.servlet.http.HttpServletRequest;\nimport jakarta.servlet.http.HttpServletResponse;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.security.authentication.UsernamePasswordAuthenticationToken;\nimport org.springframework.security.core.context.SecurityContextHolder;\nimport org.springframework.security.core.userdetails.UserDetails;\nimport org.springframework.security.web.authentication.WebAuthenticationDetailsSource;\nimport org.springframework.util.StringUtils;\nimport org.springframework.web.filter.OncePerRequestFilter;\n\nimport java.io.IOException;\n\npublic class AuthTokenFilter extends OncePerRequestFilter {\n\n    private static final Logger logger = LoggerFactory.getLogger(AuthTokenFilter.class);\n\n    @Autowired\n    private JwtUtils jwtUtils;\n\n    @Autowired\n    private UserDetailsServiceImpl userDetailsService;\n\n    @Override\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException {\n        try {\n            String jwt = parseJwt(request);\n            if (jwt != null &amp;&amp; jwtUtils.validateJwtToken(jwt)) {\n                String username = jwtUtils.getUserNameFromJwtToken(jwt);\n                UserDetails userDetails = userDetailsService.loadUserByUsername(username);\n                UsernamePasswordAuthenticationToken authentication = new UsernamePasswordAuthenticationToken(userDetails, null, userDetails.getAuthorities());\n                authentication.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\n                SecurityContextHolder.getContext().setAuthentication(authentication);\n            }\n        } catch (Exception e) {\n            logger.error(&quot;Cannot set user authentication: {}&quot;, e);\n        }\n        filterChain.doFilter(request, response);\n    }\n\n    private String parseJwt(HttpServletRequest request) {\n        String headerAuth = request.getHeader(&quot;Authorization&quot;);\n        if (StringUtils.hasText(headerAuth) &amp;&amp; headerAuth.startsWith(&quot;Bearer &quot;)) {\n            return headerAuth.substring(7);\n        }\n        return null;\n    }\n\n}\n</code></pre>\n<p>File <code>JwtUtils.java</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.security.jwt;\n\nimport com.example.security.services.UserDetailsImpl;\nimport io.jsonwebtoken.ExpiredJwtException;\nimport io.jsonwebtoken.Jwts;\nimport io.jsonwebtoken.MalformedJwtException;\nimport io.jsonwebtoken.SignatureAlgorithm;\nimport io.jsonwebtoken.SignatureException;\nimport io.jsonwebtoken.UnsupportedJwtException;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.security.core.Authentication;\nimport org.springframework.stereotype.Component;\n\nimport java.util.Date;\n\n@Component\npublic class JwtUtils {\n\n    private static final Logger logger = LoggerFactory.getLogger(JwtUtils.class);\n\n    @Value(&quot;${app.jwtSecret}&quot;)\n    private String jwtSecret;\n\n    @Value(&quot;${app.jwtExpirationMs}&quot;)\n    private int jwtExpirationMs;\n\n    public String generateJwtToken(Authentication authentication) {\n        UserDetailsImpl userPrincipal = (UserDetailsImpl) authentication.getPrincipal();\n        return Jwts.builder().setSubject((userPrincipal.getUsername())).setIssuedAt(new Date()).setExpiration(new Date((new Date()).getTime() + jwtExpirationMs)).signWith(SignatureAlgorithm.HS512, jwtSecret).compact();\n    }\n\n    public String getUserNameFromJwtToken(String token) {\n        return Jwts.parser().setSigningKey(jwtSecret).parseClaimsJws(token).getBody().getSubject();\n    }\n\n    public boolean validateJwtToken(String authToken) {\n        try {\n            Jwts.parser().setSigningKey(jwtSecret).parseClaimsJws(authToken);\n            return true;\n        } catch (SignatureException e) {\n            logger.error(&quot;Invalid JWT signature: {}&quot;, e.getMessage());\n        } catch (MalformedJwtException e) {\n            logger.error(&quot;Invalid JWT token: {}&quot;, e.getMessage());\n        } catch (ExpiredJwtException e) {\n            logger.error(&quot;JWT token is expired: {}&quot;, e.getMessage());\n        } catch (UnsupportedJwtException e) {\n            logger.error(&quot;JWT token is unsupported: {}&quot;, e.getMessage());\n        } catch (IllegalArgumentException e) {\n            logger.error(&quot;JWT claims string is empty: {}&quot;, e.getMessage());\n        }\n        return false;\n    }\n\n}\n</code></pre>\n<p>File <code>UserDetailsImpl.java</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.security.services;\n\nimport com.example.models.User;\nimport com.fasterxml.jackson.annotation.JsonIgnore;\nimport org.springframework.security.core.GrantedAuthority;\nimport org.springframework.security.core.authority.SimpleGrantedAuthority;\nimport org.springframework.security.core.userdetails.UserDetails;\n\nimport java.util.Collection;\nimport java.util.List;\nimport java.util.Objects;\nimport java.util.stream.Collectors;\n\npublic class UserDetailsImpl implements UserDetails {\n\n    private static final long serialVersionUID = 1L;\n    private Long id;\n    private String username;\n    private String email;\n\n    @JsonIgnore\n    private String password;\n\n    private Collection&lt;? extends GrantedAuthority&gt; authorities;\n\n    public UserDetailsImpl(Long id, String username, String email, String password, Collection&lt;? extends GrantedAuthority&gt; authorities) {\n        this.id = id;\n        this.username = username;\n        this.email = email;\n        this.password = password;\n        this.authorities = authorities;\n    }\n\n    public static UserDetailsImpl build(User user) {\n        List&lt;GrantedAuthority&gt; authorities = user.getRoles().stream().map(role -&gt; new SimpleGrantedAuthority(role.getName().name())).collect(Collectors.toList());\n        return new UserDetailsImpl(user.getId(), user.getUsername(), user.getEmail(), user.getPassword(), authorities);\n    }\n\n    @Override\n    public Collection&lt;? extends GrantedAuthority&gt; getAuthorities() {\n        return authorities;\n    }\n\n    public Long getId() {\n        return id;\n    }\n\n    public String getEmail() {\n        return email;\n    }\n\n    @Override\n    public String getPassword() {\n        return password;\n    }\n\n    @Override\n    public String getUsername() {\n        return username;\n    }\n\n    @Override\n    public boolean isAccountNonExpired() {\n        return true;\n    }\n\n    @Override\n    public boolean isAccountNonLocked() {\n        return true;\n    }\n\n    @Override\n    public boolean isCredentialsNonExpired() {\n        return true;\n    }\n\n    @Override\n    public boolean isEnabled() {\n        return true;\n    }\n\n    @Override\n    public boolean equals(Object o) {\n        if (this == o)\n            return true;\n        if (o == null || getClass() != o.getClass())\n            return false;\n        UserDetailsImpl user = (UserDetailsImpl) o;\n        return Objects.equals(id, user.id);\n    }\n\n}\n</code></pre>\n<p>File <code>UserDetailsServiceImpl.java</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.security.services;\n\nimport com.example.models.User;\nimport com.example.repository.UserRepository;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.security.core.userdetails.UserDetails;\nimport org.springframework.security.core.userdetails.UserDetailsService;\nimport org.springframework.security.core.userdetails.UsernameNotFoundException;\nimport org.springframework.stereotype.Service;\nimport org.springframework.transaction.annotation.Transactional;\n\n// Original.\n@Service\npublic class UserDetailsServiceImpl implements UserDetailsService {\n\n    @Autowired\n    UserRepository userRepository;\n\n    @Override\n    @Transactional\n    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\n        User user = userRepository.findByUsername(username).orElseThrow(() -&gt; new UsernameNotFoundException(&quot;User Not Found with username: &quot; + username));\n        return UserDetailsImpl.build(user);\n    }\n\n}\n</code></pre>\n<p>file <code>WebSecurityConfig.java</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.security;\n\nimport com.example.security.jwt.AuthEntryPointJwt;\nimport com.example.security.jwt.AuthTokenFilter;\nimport com.example.security.services.UserDetailsServiceImpl;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.security.authentication.AuthenticationManager;\nimport org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;\nimport org.springframework.security.config.annotation.method.configuration.EnableGlobalMethodSecurity;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\nimport org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;\nimport org.springframework.security.config.http.SessionCreationPolicy;\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\nimport org.springframework.security.crypto.password.PasswordEncoder;\nimport org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter;\n\n@Configuration\n@EnableWebSecurity\n@EnableGlobalMethodSecurity(\n        // securedEnabled = true,\n        // jsr250Enabled = true,\n        prePostEnabled = true)\npublic class WebSecurityConfig extends WebSecurityConfigurerAdapter {\n\n    @Autowired\n    UserDetailsServiceImpl userDetailsService;\n\n    @Autowired\n    private AuthEntryPointJwt unauthorizedHandler;\n\n    @Bean\n    public AuthTokenFilter authenticationJwtTokenFilter() {\n        return new AuthTokenFilter();\n    }\n\n    @Override\n    public void configure(AuthenticationManagerBuilder authenticationManagerBuilder) throws Exception {\n        authenticationManagerBuilder.userDetailsService(userDetailsService).passwordEncoder(passwordEncoder());\n    }\n\n    @Bean\n    @Override\n    public AuthenticationManager authenticationManagerBean() throws Exception {\n        return super.authenticationManagerBean();\n    }\n\n    @Bean\n    public PasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder();\n    }\n\n\n    // Nu id gi ln != id ca tenant ca user  trong database, th khng cho i tip.\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http.cors().and().csrf().disable()\n                .exceptionHandling().authenticationEntryPoint(unauthorizedHandler).and()\n                .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS).and()\n                //.authorizeRequests().antMatchers(&quot;/api/auth/**&quot;, &quot;/swagger-ui/**&quot;).permitAll()\n\n                .authorizeRequests().antMatchers(&quot;/api/auth/**&quot;, &quot;/swagger-ui/**&quot;, &quot;/v3/api-docs/**&quot;).permitAll()\n\n                .antMatchers(&quot;/app/**&quot;).permitAll()\n                .antMatchers(&quot;/api/test/**&quot;).permitAll()\n                .anyRequest().authenticated();\n        http.addFilterBefore(authenticationJwtTokenFilter(), UsernamePasswordAuthenticationFilter.class);\n        //;\n\n        // .addFilterAfter(new CustomFilter(), BasicAuthenticationFilter.class); // VyDN 2022_07_22 // https://www.baeldung.com/spring-security-custom-filter\n    }\n\n}\n\n// Add filter before, after: https://stackoverflow.com/a/59000469\n\n</code></pre>\n<p>Now, I am using Java / JDK 19, Spring Boot 3.0.0 . After upgrade to Spring Boot 3.0.0 , it causes syntax error. <a href=\"https://i.stack.imgur.com/Zq1iw.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/Zq1iw.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/ATRpU.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/ATRpU.png\" alt=\"enter image description here\" /></a></p>\n<p>How to fix error of <code>WebSecurityConfigurerAdapter</code> when upgrade to Spring Boot 3.0.0? Specific to my configuration. Please guide me rewrite file <code>WebSecurityConfig.java</code></p>\n"},{"tags":["java","junit","junit4","junit3"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":1,"creation_date":1671704920,"post_id":74887136,"comment_id":132157345,"body_markdown":"honestly, I&#39;ve never seen any unit test code like this. Also, the fact that you need to instantiate your unit test class to run your tests seems dodgy","body":"honestly, I&#39;ve never seen any unit test code like this. Also, the fact that you need to instantiate your unit test class to run your tests seems dodgy"},{"owner":{"account_id":1570181,"reputation":304,"user_id":1458041,"accept_rate":0,"display_name":"Mich&#232;le S."},"score":0,"creation_date":1671705199,"post_id":74887136,"comment_id":132157438,"body_markdown":"The run-Method is not static. Can you tell me, how to run the tests without instantiating?","body":"The run-Method is not static. Can you tell me, how to run the tests without instantiating?"},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1671706932,"post_id":74887136,"comment_id":132158018,"body_markdown":"by running it as a unit test.","body":"by running it as a unit test."},{"owner":{"account_id":1570181,"reputation":304,"user_id":1458041,"accept_rate":0,"display_name":"Mich&#232;le S."},"score":0,"creation_date":1671707914,"post_id":74887136,"comment_id":132158351,"body_markdown":"Could you provide a code-sample please?","body":"Could you provide a code-sample please?"},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":1,"creation_date":1671708652,"post_id":74887136,"comment_id":132158586,"body_markdown":"https://www.baeldung.com/junit","body":"<a href=\"https://www.baeldung.com/junit\" rel=\"nofollow noreferrer\">baeldung.com/junit</a>"},{"owner":{"account_id":1570181,"reputation":304,"user_id":1458041,"accept_rate":0,"display_name":"Mich&#232;le S."},"score":0,"creation_date":1671709584,"post_id":74887136,"comment_id":132158856,"body_markdown":"I need Class A to run the tests! I could not find any hint, how to do that.","body":"I need Class A to run the tests! I could not find any hint, how to do that."},{"owner":{"account_id":5240687,"reputation":1727,"user_id":4187837,"accept_rate":86,"display_name":"Gavin"},"score":0,"creation_date":1671709972,"post_id":74887136,"comment_id":132158963,"body_markdown":"If you are using Junit it is junit that runs the test.  Of course there is nothing stopping you from implementing your own runner, to do that you should check the docs for the version of junit you are using. Having made the same mistake in the past I would also strongly suggest not having a base test class that you inherit from. It quickly becomes fragile and makes it harder to test.","body":"If you are using Junit it is junit that runs the test.  Of course there is nothing stopping you from implementing your own runner, to do that you should check the docs for the version of junit you are using. Having made the same mistake in the past I would also strongly suggest not having a base test class that you inherit from. It quickly becomes fragile and makes it harder to test."}],"owner":{"account_id":1570181,"reputation":304,"user_id":1458041,"accept_rate":0,"display_name":"Mich&#232;le S."},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":264,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671704737,"creation_date":1671704737,"question_id":74887136,"body_markdown":"I simplified the problem.\r\n\r\nI have 3 classes:\r\n\r\n1) My operating class, which has just one static method (add) in it, which should add to ints:\r\n```\r\n    public class T{\r\n        public static int add(int a, int b){\r\n            return a+b;\r\n        }\r\n    }\r\n```     \r\nI am pretty sure, there is no error in this simple method. Here is my jUnit-Test:\r\n```\r\nimport org.junit.*;\r\nimport static org.junit.Assert.*;\r\nimport junit.framework.TestCase; \r\n\r\npublic class MyJUnitTest extends TestCase{\r\n    T t;\r\n    public boolean test(){\r\n       junit.framework.TestResult t = this.run();\r\n       System.out.println(t.wasSuccessful());\r\n       System.out.println(t.failures.nextElement());\r\n       return t.wasSuccessful();\r\n    }\r\n    public void setUp() throws Exception {\r\n       t = new T();\r\n    }\r\n    public void tearDown() throws Exception {\r\n        t = null;\r\n    }\r\n    //@Test\r\n    public void test1(){\r\n        int[] vgl1 = new int[1];\r\n        int[] vgl2 = new int[1];\r\n        vgl1[0] = t.add(1,2);\r\n        vgl2[0] = 3;\r\n        Assert.assertArrayEquals(&quot;Test one&quot;, vgl1, vgl2);\r\n    }\r\n}   \r\n```\r\n\r\nNote: I test with Arrays, because in my not simplified Version of the problem, there are Arrays, which I have to test.\r\n\r\nHere comes the problem, I cannot understand: If I run the Test in my IDE I get a success (till here, quite understandable), but if I run a third class with one static method:\r\n```\r\npublic class A{\r\n    public static void abc(){\r\n        MyJUnitTest t = new MyJUnitTest();\r\n        t.test();\r\n    }\r\n}\r\n```\r\nI get a failureCount of one and wasSuccessful returns false. Also `System.out.println(t.failures.nextElement());` prints `null(MyJUnitTest): TestCase.fName cannot be null`.\r\n\r\nThis is, what I cannot understand. The test should be successful!\r\n\r\nAlso I tried to use jUnit4, which means, I adapted my `MyJUnitTest`-Class. But doing so, I cannot call the run-Method. Is there an equivalent in jUnit4? In my IDE I can just click on &quot;test All&quot;, but I need to make the Tests in another class an get the information, wheather all Test were successful.","title":"jUnit-Testing from another class","body":"<p>I simplified the problem.</p>\n<p>I have 3 classes:</p>\n<ol>\n<li>My operating class, which has just one static method (add) in it, which should add to ints:</li>\n</ol>\n<pre><code>    public class T{\n        public static int add(int a, int b){\n            return a+b;\n        }\n    }\n</code></pre>\n<p>I am pretty sure, there is no error in this simple method. Here is my jUnit-Test:</p>\n<pre><code>import org.junit.*;\nimport static org.junit.Assert.*;\nimport junit.framework.TestCase; \n\npublic class MyJUnitTest extends TestCase{\n    T t;\n    public boolean test(){\n       junit.framework.TestResult t = this.run();\n       System.out.println(t.wasSuccessful());\n       System.out.println(t.failures.nextElement());\n       return t.wasSuccessful();\n    }\n    public void setUp() throws Exception {\n       t = new T();\n    }\n    public void tearDown() throws Exception {\n        t = null;\n    }\n    //@Test\n    public void test1(){\n        int[] vgl1 = new int[1];\n        int[] vgl2 = new int[1];\n        vgl1[0] = t.add(1,2);\n        vgl2[0] = 3;\n        Assert.assertArrayEquals(&quot;Test one&quot;, vgl1, vgl2);\n    }\n}   \n</code></pre>\n<p>Note: I test with Arrays, because in my not simplified Version of the problem, there are Arrays, which I have to test.</p>\n<p>Here comes the problem, I cannot understand: If I run the Test in my IDE I get a success (till here, quite understandable), but if I run a third class with one static method:</p>\n<pre><code>public class A{\n    public static void abc(){\n        MyJUnitTest t = new MyJUnitTest();\n        t.test();\n    }\n}\n</code></pre>\n<p>I get a failureCount of one and wasSuccessful returns false. Also <code>System.out.println(t.failures.nextElement());</code> prints <code>null(MyJUnitTest): TestCase.fName cannot be null</code>.</p>\n<p>This is, what I cannot understand. The test should be successful!</p>\n<p>Also I tried to use jUnit4, which means, I adapted my <code>MyJUnitTest</code>-Class. But doing so, I cannot call the run-Method. Is there an equivalent in jUnit4? In my IDE I can just click on &quot;test All&quot;, but I need to make the Tests in another class an get the information, wheather all Test were successful.</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":7788702,"reputation":836,"user_id":5892518,"display_name":"Harsh"},"score":0,"creation_date":1670495489,"post_id":74728799,"comment_id":131890439,"body_markdown":"It is because this class might have been moved or removed from the `javax.servlet` package, expand your dependencies to find out where this class is, most likely you may have to downgrade it if that class isn&#39;t in 3.0.0","body":"It is because this class might have been moved or removed from the <code>javax.servlet</code> package, expand your dependencies to find out where this class is, most likely you may have to downgrade it if that class isn&#39;t in 3.0.0"},{"owner":{"account_id":1268556,"reputation":48098,"user_id":1225328,"accept_rate":93,"display_name":"sp00m"},"score":0,"creation_date":1670497564,"post_id":74728799,"comment_id":131891130,"body_markdown":"You should go through this doc carefully, it&#39;s all pretty well explained: https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-3.0-Migration-Guide","body":"You should go through this doc carefully, it&#39;s all pretty well explained: <a href=\"https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-3.0-Migration-Guide\" rel=\"nofollow noreferrer\">github.com/spring-projects/spring-boot/wiki/&hellip;</a>"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1670506391,"post_id":74728799,"comment_id":131894018,"body_markdown":"You are mixing Spring Security and Spring Boot with incompatible versions. Generally this means your dependencies are mess. Use the `spring-boot-starter-security` and remove any plain `org.springframework.security` dependencies you have or think you need to manage yourself.","body":"You are mixing Spring Security and Spring Boot with incompatible versions. Generally this means your dependencies are mess. Use the <code>spring-boot-starter-security</code> and remove any plain <code>org.springframework.security</code> dependencies you have or think you need to manage yourself."}],"answers":[{"tags":[],"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"comment_count":0,"down_vote_count":1,"up_vote_count":4,"is_accepted":true,"score":3,"last_activity_date":1670497003,"creation_date":1670497003,"answer_id":74729190,"question_id":74728799,"body_markdown":"The [release notes for Spring-Boot 3.0][springReleaseNotes] state that:\r\n\r\n&gt; ...\r\n&gt;\r\n&gt; Spring Boot 3.0 has migrated from Java EE to Jakarta EE APIs for all dependencies. Wherever possible, Jakarta EE 10 compatible dependencies have been chosen, including:\r\n&gt;\r\n&gt; ...\r\n&gt;\r\n&gt; - Jakarta Servlet 6.0\r\n&gt;\r\n&gt; ...\r\n\r\nAs such, the import changed from `javax.servlet` to `jakarta.servlet`.\r\n\r\n[springReleaseNotes]: https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-3.0-Release-Notes","title":"Just upgraded from Spring Boot 2.7.4 to Spring Boot 3.0.0, caused error Caused by: java.lang.NoClassDefFoundError: javax.servlet.Filter","body":"<p>The <a href=\"https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-3.0-Release-Notes\" rel=\"nofollow noreferrer\">release notes for Spring-Boot 3.0</a> state that:</p>\n<blockquote>\n<p>...</p>\n<p>Spring Boot 3.0 has migrated from Java EE to Jakarta EE APIs for all dependencies. Wherever possible, Jakarta EE 10 compatible dependencies have been chosen, including:</p>\n<p>...</p>\n<ul>\n<li>Jakarta Servlet 6.0</li>\n</ul>\n<p>...</p>\n</blockquote>\n<p>As such, the import changed from <code>javax.servlet</code> to <code>jakarta.servlet</code>.</p>\n"},{"tags":[],"owner":{"account_id":23368420,"reputation":147,"user_id":17439681,"display_name":"sof_user"},"comment_count":0,"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1670607650,"creation_date":1670607650,"answer_id":74746544,"question_id":74728799,"body_markdown":"You should change ``javax.*`` to ``jakarta.*`` wherever applicable in your project to migrate to Spring boot 3.0.0","title":"Just upgraded from Spring Boot 2.7.4 to Spring Boot 3.0.0, caused error Caused by: java.lang.NoClassDefFoundError: javax.servlet.Filter","body":"<p>You should change <code>javax.*</code> to <code>jakarta.*</code> wherever applicable in your project to migrate to Spring boot 3.0.0</p>\n"}],"owner":{"account_id":15714113,"reputation":97,"user_id":11338722,"display_name":"Sudan Shrestha"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5826,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74729190,"answer_count":2,"score":1,"last_activity_date":1671704566,"creation_date":1670495216,"question_id":74728799,"body_markdown":"Upgraded the application from Spring 2.7.4 to 3.0.0\r\nGot the following exception while trying to run\r\n\r\n```\r\njava.lang.IllegalStateException: Failed to introspect Class [org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration] from ClassLoader [jdk.internal.loader.ClassLoaders$AppClassLoader@eaa1a4da]\r\n\tat org.springframework.util.ReflectionUtils.getDeclaredMethods(ReflectionUtils.java:483)\r\n\tat org.springframework.util.ReflectionUtils.doWithMethods(ReflectionUtils.java:360)\r\n\tat org.springframework.util.ReflectionUtils.getUniqueDeclaredMethods(ReflectionUtils.java:417)\r\n\r\n\r\nCaused by: java.lang.NoClassDefFoundError: javax.servlet.Filter\r\n\tat java.base/java.lang.Class.getDeclaredMethodsImpl(Native Method)\r\n\tat java.base/java.lang.Class.getDeclaredMethods(Class.java:1180)\r\n\tat org.springframework.util.ReflectionUtils.getDeclaredMethods(ReflectionUtils.java:465)\r\n```\r\n\r\nCan anyone help me to fix this?","title":"Just upgraded from Spring Boot 2.7.4 to Spring Boot 3.0.0, caused error Caused by: java.lang.NoClassDefFoundError: javax.servlet.Filter","body":"<p>Upgraded the application from Spring 2.7.4 to 3.0.0\nGot the following exception while trying to run</p>\n<pre><code>java.lang.IllegalStateException: Failed to introspect Class [org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration] from ClassLoader [jdk.internal.loader.ClassLoaders$AppClassLoader@eaa1a4da]\n    at org.springframework.util.ReflectionUtils.getDeclaredMethods(ReflectionUtils.java:483)\n    at org.springframework.util.ReflectionUtils.doWithMethods(ReflectionUtils.java:360)\n    at org.springframework.util.ReflectionUtils.getUniqueDeclaredMethods(ReflectionUtils.java:417)\n\n\nCaused by: java.lang.NoClassDefFoundError: javax.servlet.Filter\n    at java.base/java.lang.Class.getDeclaredMethodsImpl(Native Method)\n    at java.base/java.lang.Class.getDeclaredMethods(Class.java:1180)\n    at org.springframework.util.ReflectionUtils.getDeclaredMethods(ReflectionUtils.java:465)\n</code></pre>\n<p>Can anyone help me to fix this?</p>\n"},{"tags":["java","spring-boot","spring-boot-actuator"],"answers":[{"tags":[],"owner":{"account_id":373060,"reputation":2543,"user_id":722466,"accept_rate":52,"display_name":"Abbadon"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671704463,"creation_date":1670845303,"answer_id":74770584,"question_id":74770127,"body_markdown":"The current latest version of spring-cloud-dependencies is not compatible with Spring Boot 3.X.\r\n\r\nIt is necessary to migrate to a newer version to make it work.\r\n\r\nAt the time of writing I used the following combination which was working:\r\n\r\n```\r\nimplementation(platform(&quot;org.springframework.boot:spring-boot-dependencies:3.0.0&quot;))\r\nimplementation(platform(&quot;org.springframework.cloud:spring-cloud-dependencies:2022.0.0&quot;))\r\n```\r\n","title":"How to enable POST env management endpoint with Spring boot 3.x and Spring WebFlux?","body":"<p>The current latest version of spring-cloud-dependencies is not compatible with Spring Boot 3.X.</p>\n<p>It is necessary to migrate to a newer version to make it work.</p>\n<p>At the time of writing I used the following combination which was working:</p>\n<pre><code>implementation(platform(&quot;org.springframework.boot:spring-boot-dependencies:3.0.0&quot;))\nimplementation(platform(&quot;org.springframework.cloud:spring-cloud-dependencies:2022.0.0&quot;))\n</code></pre>\n"}],"owner":{"account_id":373060,"reputation":2543,"user_id":722466,"accept_rate":52,"display_name":"Abbadon"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":246,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1671704468,"creation_date":1670842895,"question_id":74770127,"body_markdown":"How to enable POST env management endpoint with Spring boot 3.x and Spring WebFlux?\r\n\r\nThis was working fine with Spring Boot 2.7.x and is no more working with Spring Boot 3.x.\r\n\r\nActivating the debug mode (debug: true) I can&#39;t find any trace of `WritableEnvironmentEndpointAutoConfiguration`.\r\n\r\nHere is the relevant part of my application.yml.\r\n\r\n```\r\nmanagement:\r\n  endpoints:\r\n    enabled-by-default: true\r\n    web:\r\n      exposure:\r\n        include: &#39;*&#39;\r\n  endpoint:\r\n    env:\r\n      post:\r\n        enabled: true\r\n      enabled: true\r\n    health:\r\n      probes:\r\n        enabled: true\r\n      show-details: always\r\n```","title":"How to enable POST env management endpoint with Spring boot 3.x and Spring WebFlux?","body":"<p>How to enable POST env management endpoint with Spring boot 3.x and Spring WebFlux?</p>\n<p>This was working fine with Spring Boot 2.7.x and is no more working with Spring Boot 3.x.</p>\n<p>Activating the debug mode (debug: true) I can't find any trace of <code>WritableEnvironmentEndpointAutoConfiguration</code>.</p>\n<p>Here is the relevant part of my application.yml.</p>\n<pre><code>management:\n  endpoints:\n    enabled-by-default: true\n    web:\n      exposure:\n        include: '*'\n  endpoint:\n    env:\n      post:\n        enabled: true\n      enabled: true\n    health:\n      probes:\n        enabled: true\n      show-details: always\n</code></pre>\n"},{"tags":["java","checkbox","vaadin"],"comments":[{"owner":{"account_id":3837378,"reputation":35488,"user_id":3181392,"display_name":"cfrick"},"score":0,"creation_date":1671470059,"post_id":74852801,"comment_id":132101181,"body_markdown":"Just in case the title on the label (not thec checkbox) is good enough, you can go via `setRenderer` and create your own label.","body":"Just in case the title on the label (not thec checkbox) is good enough, you can go via <code>setRenderer</code> and create your own label."}],"answers":[{"tags":[],"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671467198,"creation_date":1671467198,"answer_id":74853281,"question_id":74852801,"body_markdown":"There is no way to get the CheckBoxes inside CheckBoxGroup.\r\n\r\nI would suggest instead of creating a CheckBoxGroup, create individual CheckBoxes.\r\n\r\nIf you prefer to use a CheckBoxGroup you can add a feature request: https://github.com/vaadin/flow-components/issues","title":"Is there a way to get a checkbox component out of a checkboxgroup component in Vaadin 23.3.0?","body":"<p>There is no way to get the CheckBoxes inside CheckBoxGroup.</p>\n<p>I would suggest instead of creating a CheckBoxGroup, create individual CheckBoxes.</p>\n<p>If you prefer to use a CheckBoxGroup you can add a feature request: <a href=\"https://github.com/vaadin/flow-components/issues\" rel=\"nofollow noreferrer\">https://github.com/vaadin/flow-components/issues</a></p>\n"},{"tags":[],"owner":{"account_id":27298903,"reputation":11,"user_id":20816077,"display_name":"Rutger ter Heide"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1671703994,"creation_date":1671541280,"answer_id":74863509,"question_id":74852801,"body_markdown":"I have found a solution to my problem.\r\nIt is not the neatest solution but it does what I want:\r\n\r\n```java\r\ncheckboxGroup.getElement().getChildren().forEach(child -&gt; {\r\n    child.getComponent().ifPresent(component -&gt; {\r\n        if (component instanceof Checkbox) {\r\n            final Checkbox checkbox = (Checkbox) component;\r\n            if (Objects.equals(checkbox.getLabel(), Enum.TYPE.toString())) {\r\n                checkbox.setTooltipText(&quot;TEST&quot;);\r\n            }\r\n        }\r\n    });\r\n});\r\n```\r\n\r\nVia getElement, I manage to access the Children of the checkboxGroup. In a loop, I go through them all and check if it is an instance of a checkbox class. If so, I cast them to that class and can add the tooltip.\r\n\r\nShould the internal structure of the checkboxGroup component change in later versions of Vaadin, this solution might no longer work.\r\n","title":"Is there a way to get a checkbox component out of a checkboxgroup component in Vaadin 23.3.0?","body":"<p>I have found a solution to my problem.\nIt is not the neatest solution but it does what I want:</p>\n<pre class=\"lang-java prettyprint-override\"><code>checkboxGroup.getElement().getChildren().forEach(child -&gt; {\n    child.getComponent().ifPresent(component -&gt; {\n        if (component instanceof Checkbox) {\n            final Checkbox checkbox = (Checkbox) component;\n            if (Objects.equals(checkbox.getLabel(), Enum.TYPE.toString())) {\n                checkbox.setTooltipText(&quot;TEST&quot;);\n            }\n        }\n    });\n});\n</code></pre>\n<p>Via getElement, I manage to access the Children of the checkboxGroup. In a loop, I go through them all and check if it is an instance of a checkbox class. If so, I cast them to that class and can add the tooltip.</p>\n<p>Should the internal structure of the checkboxGroup component change in later versions of Vaadin, this solution might no longer work.</p>\n"}],"owner":{"account_id":27298903,"reputation":11,"user_id":20816077,"display_name":"Rutger ter Heide"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":102,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74863509,"answer_count":2,"score":0,"last_activity_date":1671703994,"creation_date":1671464814,"question_id":74852801,"body_markdown":"I need a single checkbox component to add a tool-tip on it. However, the component is of a CheckboxGroup type. Is there a way to get a Checkbox component out of a CheckboxGroup component?\r\n\r\nI have tried to look up different type of methods on the CheckbocGroup class but I can get the Items back which are a Enum type. I need a class that is a child class of the Vaadin Component class.\r\nI was expecting something like:\r\n\r\n```\r\nCheckboxGroup&lt;Enum&gt; checkboxGroup = new CheckboxGroup();\r\ncheckboxGroup.setItems(Enum.values())\r\n\r\nCheckbox checkbox = checkboxGroup.getCheckboxOfType(Enum.Type);\r\ncheckbox.setTooltipText(&quot;TEST&quot;);\r\n```","title":"Is there a way to get a checkbox component out of a checkboxgroup component in Vaadin 23.3.0?","body":"<p>I need a single checkbox component to add a tool-tip on it. However, the component is of a CheckboxGroup type. Is there a way to get a Checkbox component out of a CheckboxGroup component?</p>\n<p>I have tried to look up different type of methods on the CheckbocGroup class but I can get the Items back which are a Enum type. I need a class that is a child class of the Vaadin Component class.\nI was expecting something like:</p>\n<pre><code>CheckboxGroup&lt;Enum&gt; checkboxGroup = new CheckboxGroup();\ncheckboxGroup.setItems(Enum.values())\n\nCheckbox checkbox = checkboxGroup.getCheckboxOfType(Enum.Type);\ncheckbox.setTooltipText(&quot;TEST&quot;);\n</code></pre>\n"},{"tags":["java","spring","junit","h2","junit4"],"comments":[{"owner":{"account_id":2761650,"reputation":2950,"user_id":2378429,"display_name":"O.O.Balance"},"score":0,"creation_date":1540808885,"post_id":53031214,"comment_id":92986193,"body_markdown":"Looks to me like the error message is telling you there is no table named `ROLLETEST` (case is ignored), yet you try to insert into it. Have you created the table?","body":"Looks to me like the error message is telling you there is no table named <code>ROLLETEST</code> (case is ignored), yet you try to insert into it. Have you created the table?"}],"answers":[{"tags":[],"owner":{"account_id":3339793,"reputation":615,"user_id":2806315,"accept_rate":67,"display_name":"Bernd"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1541543012,"creation_date":1541543012,"answer_id":53181003,"question_id":53031214,"body_markdown":"Sorry, for answering so late, but I have been ill the last couple of days.\r\nWhat I did wrong was that I was not aware of doing an Integration test here.\r\nSo, some steps had to be done before doing the test itself.\r\nI copied the application-test.properties to besides my application.properties file.\r\nThen I annotated my main test class as following:\r\n\r\n    @RunWith(SpringRunner.class)\r\n    @SpringBootTest\r\n    @AutoConfigureMockMvc\r\n    @ActiveProfiles(&quot;test&quot;)\r\n\r\nThen ApplicationContext starts up, creates my tables in my in-memory-database and I can do my tests.","title":"Do a Unit test with an H2 database","body":"<p>Sorry, for answering so late, but I have been ill the last couple of days.\nWhat I did wrong was that I was not aware of doing an Integration test here.\nSo, some steps had to be done before doing the test itself.\nI copied the application-test.properties to besides my application.properties file.\nThen I annotated my main test class as following:</p>\n\n<pre><code>@RunWith(SpringRunner.class)\n@SpringBootTest\n@AutoConfigureMockMvc\n@ActiveProfiles(\"test\")\n</code></pre>\n\n<p>Then ApplicationContext starts up, creates my tables in my in-memory-database and I can do my tests.</p>\n"}],"owner":{"account_id":3339793,"reputation":615,"user_id":2806315,"accept_rate":67,"display_name":"Bernd"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20744,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":1,"score":5,"last_activity_date":1671703985,"creation_date":1540727598,"question_id":53031214,"body_markdown":"I am starting to write some Unit test with an H2 database.\r\n\r\nTherefore, I want to create a table out of my @Entity.\r\n\r\nHowever, I always get the following error message:\r\n\r\n&gt; 12:40:13.635 [main] WARN org.springframework.context.support.GenericApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;dataSource&#39; defined in at.wrk.fmd.config.JpaConfigTest: Bean instantiation via factory method failed;\r\n&gt;\r\n&gt; Table &quot;ROLLETEST&quot; not found; SQL statement:\r\n&gt;\r\n&gt; INSERT INTO RolleTest(created_at, bezeichnung) VALUES (now(), &#39;ADMIN&#39;) [42102-197]\r\njava.lang.IllegalStateException: Failed to load ApplicationContext\r\n\r\nHere are my classes:\r\n\r\nJpaConfigTest\r\n\r\n```java\r\n@Configuration\r\n@EnableJpaRepositories\r\n@PropertySource(&quot;application.propertiesTest&quot;)\r\n@EnableTransactionManagement\r\npublic class JpaConfigTest {\r\n\r\n    @Autowired\r\n    private Environment env;\r\n     \r\n    @Bean\r\n    public DataSource dataSource() {\r\n        DataSource dataSource = new DriverManagerDataSource(&quot;jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1&quot;, &quot;sa&quot;, null);\r\n        new ResourceDatabasePopulator(new ClassPathResource(&quot;/import-test.sql&quot;)).execute(dataSource);\r\n \r\n        return dataSource;\r\n    }\r\n}\r\n```\r\n\r\nInMemoryDbTest:\r\n\r\n```java\r\n@RunWith(SpringJUnit4ClassRunner.class)\r\n@ContextConfiguration(\r\n  classes = { JpaConfigTest.class }, \r\n  loader = AnnotationConfigContextLoader.class)\r\n@Transactional\r\n@WebMvcTest\r\npublic class InMemoryDbTest {\r\n     \r\n    @Resource\r\n    private StudentRepository studentRepository;\r\n     \r\n    @Test\r\n    public void givenStudent_whenSave_thenGetOk() {\r\n        Student student = new Student(1, &quot;john&quot;);\r\n        studentRepository.save(student);\r\n         \r\n        List&lt;Student&gt; student2 = studentRepository.findAll();\r\n    }\r\n}\r\n```\r\n\r\napplication.propertiesTest\r\n\r\n```properties\r\nserver.port=8080\r\nserver.error.whitelabel.enabled=false\r\n\r\n# H2\r\nspring.datasource.driver-class-name=org.h2.Driver\r\nspring.datasource.url=jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1\r\nspring.datasource.username=sa\r\nspring.datasource.password=sa\r\n```\r\n\r\nimport-test.sql\r\n\r\n```sql\r\nINSERT INTO RolleTest(created_at, bezeichnung) VALUES (now(), &#39;ADMIN&#39;);\r\n```\r\n\r\nMaybe someone can tell me what I am missing here.","title":"Do a Unit test with an H2 database","body":"<p>I am starting to write some Unit test with an H2 database.</p>\n<p>Therefore, I want to create a table out of my @Entity.</p>\n<p>However, I always get the following error message:</p>\n<blockquote>\n<p>12:40:13.635 [main] WARN org.springframework.context.support.GenericApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource' defined in at.wrk.fmd.config.JpaConfigTest: Bean instantiation via factory method failed;</p>\n<p>Table &quot;ROLLETEST&quot; not found; SQL statement:</p>\n<p>INSERT INTO RolleTest(created_at, bezeichnung) VALUES (now(), 'ADMIN') [42102-197]\njava.lang.IllegalStateException: Failed to load ApplicationContext</p>\n</blockquote>\n<p>Here are my classes:</p>\n<p>JpaConfigTest</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableJpaRepositories\n@PropertySource(&quot;application.propertiesTest&quot;)\n@EnableTransactionManagement\npublic class JpaConfigTest {\n\n    @Autowired\n    private Environment env;\n     \n    @Bean\n    public DataSource dataSource() {\n        DataSource dataSource = new DriverManagerDataSource(&quot;jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1&quot;, &quot;sa&quot;, null);\n        new ResourceDatabasePopulator(new ClassPathResource(&quot;/import-test.sql&quot;)).execute(dataSource);\n \n        return dataSource;\n    }\n}\n</code></pre>\n<p>InMemoryDbTest:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RunWith(SpringJUnit4ClassRunner.class)\n@ContextConfiguration(\n  classes = { JpaConfigTest.class }, \n  loader = AnnotationConfigContextLoader.class)\n@Transactional\n@WebMvcTest\npublic class InMemoryDbTest {\n     \n    @Resource\n    private StudentRepository studentRepository;\n     \n    @Test\n    public void givenStudent_whenSave_thenGetOk() {\n        Student student = new Student(1, &quot;john&quot;);\n        studentRepository.save(student);\n         \n        List&lt;Student&gt; student2 = studentRepository.findAll();\n    }\n}\n</code></pre>\n<p>application.propertiesTest</p>\n<pre><code>server.port=8080\nserver.error.whitelabel.enabled=false\n\n# H2\nspring.datasource.driver-class-name=org.h2.Driver\nspring.datasource.url=jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1\nspring.datasource.username=sa\nspring.datasource.password=sa\n</code></pre>\n<p>import-test.sql</p>\n<pre class=\"lang-sql prettyprint-override\"><code>INSERT INTO RolleTest(created_at, bezeichnung) VALUES (now(), 'ADMIN');\n</code></pre>\n<p>Maybe someone can tell me what I am missing here.</p>\n"},{"tags":["java","android","kotlin","android-recyclerview","smooth-scrolling"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1671906327,"post_id":74886983,"comment_id":132195931,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"owner":{"account_id":26958767,"reputation":11,"user_id":20526737,"display_name":"Akshay Hadiya"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671703944,"creation_date":1671703944,"question_id":74886983,"body_markdown":"I am trying to set animation with &quot;scrolltopositionwithoffset&quot; but when get offsset its call it is does&#39;t smooth scroll it is just rich the offset.i needed to set use &quot;scrolltopositionwithoffset&quot; method because i get offset. i can&#39;t use &quot;smoothScrollToPosition&quot;.\r\n\r\nHow can I apply smooth Scroll animation with &quot;smoothScrollToPosition&quot; this method?\r\n\r\nCan Anyone have answer?\r\n\r\nI want to apply smooth Scroll animation with &quot;smoothScrollToPosition&quot; this method.","title":"how I apply scroll animation with &quot;scrolltopositionwithoffset&quot; method?","body":"<p>I am trying to set animation with &quot;scrolltopositionwithoffset&quot; but when get offsset its call it is does't smooth scroll it is just rich the offset.i needed to set use &quot;scrolltopositionwithoffset&quot; method because i get offset. i can't use &quot;smoothScrollToPosition&quot;.</p>\n<p>How can I apply smooth Scroll animation with &quot;smoothScrollToPosition&quot; this method?</p>\n<p>Can Anyone have answer?</p>\n<p>I want to apply smooth Scroll animation with &quot;smoothScrollToPosition&quot; this method.</p>\n"},{"tags":["python","java","python-3.x","kotlin","kryo"],"comments":[{"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1671704224,"post_id":74886898,"comment_id":132157165,"body_markdown":"Maybe it&#39;s related to [this line](https://github.com/SagerNet/SagerNet/blob/60c9544515fd4d09c217e004b3abedb31a01bd83/app/build.gradle.kts#L64).","body":"Maybe it&#39;s related to <a href=\"https://github.com/SagerNet/SagerNet/blob/60c9544515fd4d09c217e004b3abedb31a01bd83/app/build.gradle.kts#L64\" rel=\"nofollow noreferrer\">this line</a>."},{"owner":{"account_id":23213354,"reputation":1,"user_id":17306525,"display_name":"Mohammad Mahdi Zojaji Monfared"},"score":0,"creation_date":1671707740,"post_id":74886898,"comment_id":132158295,"body_markdown":"@dan1st yeah. but this library not in python.","body":"@dan1st yeah. but this library not in python."}],"owner":{"account_id":23213354,"reputation":1,"user_id":17306525,"display_name":"Mohammad Mahdi Zojaji Monfared"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":159,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671703906,"creation_date":1671703506,"question_id":74886898,"body_markdown":"I want to develope this code in python:\r\n`Base64Encoder.encodeUrlSafe(ZipUtil.zlib(KryoConverters.serialize(this), 9))`\r\n\r\ni found kotlin code in this repo:\r\nhttps://github.com/SagerNet/SagerNet/blob/dev/app/src/main/java/io/nekohasekai/sagernet/fmt/UniversalFmt.kt\r\n\r\n\r\nbase64encode and zlib will have no problem.\r\nBut i can&#39;t find any KryoConverters library.\r\nHow can i do that?","title":"KryoConverters serializer in python","body":"<p>I want to develope this code in python:\n<code>Base64Encoder.encodeUrlSafe(ZipUtil.zlib(KryoConverters.serialize(this), 9))</code></p>\n<p>i found kotlin code in this repo:\n<a href=\"https://github.com/SagerNet/SagerNet/blob/dev/app/src/main/java/io/nekohasekai/sagernet/fmt/UniversalFmt.kt\" rel=\"nofollow noreferrer\">https://github.com/SagerNet/SagerNet/blob/dev/app/src/main/java/io/nekohasekai/sagernet/fmt/UniversalFmt.kt</a></p>\n<p>base64encode and zlib will have no problem.\nBut i can't find any KryoConverters library.\nHow can i do that?</p>\n"},{"tags":["java","spring","cqrs","axon-framework"],"answers":[{"tags":[],"owner":{"account_id":1610757,"reputation":1067,"user_id":1856573,"accept_rate":90,"display_name":"lapadets"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671703772,"creation_date":1671703772,"answer_id":74886952,"question_id":74877836,"body_markdown":"I think your `CommandGateway` bean is not registered in the Spring context.\r\n\r\nTry\r\n\r\n    @Autowired\r\n    private CommandGateway commandGateway;\r\n\r\nOr you can define it as a bean:\r\n\r\n    @Bean\r\n    public CommandGateway commandGateway(CommandBus commandBus) {\r\n        return new DefaultCommandGateway(commandBus);\r\n    }","title":"CommandGateway in springboot","body":"<p>I think your <code>CommandGateway</code> bean is not registered in the Spring context.</p>\n<p>Try</p>\n<pre><code>@Autowired\nprivate CommandGateway commandGateway;\n</code></pre>\n<p>Or you can define it as a bean:</p>\n<pre><code>@Bean\npublic CommandGateway commandGateway(CommandBus commandBus) {\n    return new DefaultCommandGateway(commandBus);\n}\n</code></pre>\n"}],"owner":{"account_id":27318495,"reputation":1,"user_id":20832628,"display_name":"Law"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":290,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1671703772,"creation_date":1671634294,"question_id":74877836,"body_markdown":"I have this error that has made me not advance in the CQRS implementation in spring boot.\r\n\r\nErr: Parameter 0 of constructor in com.lawrence.digitalbanking.command.controller.AccountCommandRestAPI required a bean of type &#39;org.axonframework.commandhandling.gateway.CommandGateway&#39; that could not be found.\r\n\r\nHere is my class code:`\r\n```\r\n@RestController\r\n@RequestMapping(&quot;/commands/accounts&quot;)\r\n@Slf4j\r\n@AllArgsConstructor\r\npublic class AccountCommandRestAPI {\r\n\tprivate CommandGateway commandGateway;\r\n\t\r\n\t@PostMapping(&quot;/create&quot;)\r\n\tpublic CompletableFuture&lt;String&gt; newAccount(@RequestBody CreateAccountRequestDTO request) {\r\n\t\tlog.info(&quot;CreateAccountRequestDTO =&gt;&quot;+request.getInitialBalance().toString());\r\n\t\tCompletableFuture&lt;String&gt; resp =  commandGateway.send(new createAccountCommand(\r\n\t\t\t\tUUID.randomUUID().toString(),\r\n\t\t\t\trequest.getInitialBalance(),\r\n\t\t\t\trequest.getCurrency()\r\n\t\t\t\t));\r\n\t\treturn resp;\r\n\t}\r\n}\r\n\r\n```\r\n`\r\nThis is my pom.xml dependency\r\n`\r\n```\r\n&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.axonframework&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;axon-spring-boot-starter&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;4.6.2&lt;/version&gt;\r\n\t\t\t&lt;exclusions&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.axonframework&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;axon-server-connector&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t&lt;/exclusions&gt;\r\n\t\t&lt;/dependency&gt;\r\n```\r\n\r\nI don&#39;t really know what I am missing. I have tried several times. My CommandGateway is not getting injected.\r\n\r\nPlease thanks in Advance.\r\n\r\nI was expecting it to run but it throws that error despite the dependency being included in the pom.xml","title":"CommandGateway in springboot","body":"<p>I have this error that has made me not advance in the CQRS implementation in spring boot.</p>\n<p>Err: Parameter 0 of constructor in com.lawrence.digitalbanking.command.controller.AccountCommandRestAPI required a bean of type 'org.axonframework.commandhandling.gateway.CommandGateway' that could not be found.</p>\n<p>Here is my class code:`</p>\n<pre><code>@RestController\n@RequestMapping(&quot;/commands/accounts&quot;)\n@Slf4j\n@AllArgsConstructor\npublic class AccountCommandRestAPI {\n    private CommandGateway commandGateway;\n    \n    @PostMapping(&quot;/create&quot;)\n    public CompletableFuture&lt;String&gt; newAccount(@RequestBody CreateAccountRequestDTO request) {\n        log.info(&quot;CreateAccountRequestDTO =&gt;&quot;+request.getInitialBalance().toString());\n        CompletableFuture&lt;String&gt; resp =  commandGateway.send(new createAccountCommand(\n                UUID.randomUUID().toString(),\n                request.getInitialBalance(),\n                request.getCurrency()\n                ));\n        return resp;\n    }\n}\n\n</code></pre>\n<p><code>This is my pom.xml dependency</code></p>\n<pre><code>&lt;dependency&gt;\n            &lt;groupId&gt;org.axonframework&lt;/groupId&gt;\n            &lt;artifactId&gt;axon-spring-boot-starter&lt;/artifactId&gt;\n            &lt;version&gt;4.6.2&lt;/version&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.axonframework&lt;/groupId&gt;\n                    &lt;artifactId&gt;axon-server-connector&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>I don't really know what I am missing. I have tried several times. My CommandGateway is not getting injected.</p>\n<p>Please thanks in Advance.</p>\n<p>I was expecting it to run but it throws that error despite the dependency being included in the pom.xml</p>\n"},{"tags":["java","spring-boot","hibernate-envers","hibernate-6.x"],"answers":[{"tags":[],"owner":{"account_id":1477182,"reputation":1388,"user_id":1387310,"accept_rate":64,"display_name":"Scandinave"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1671631656,"creation_date":1671631656,"answer_id":74877276,"question_id":74774484,"body_markdown":"I finally found the problem by reading the Jakarta Persistence Spec. \r\n\r\n&gt; The JoinTable annotation is used in the mapping of entity associations. **A JoinTable annotation is\r\nspecified on the owning side of the association**\r\n\r\nIn my project there is a `@JoinTable` annotation on both side of the association. This was working before Hibernate 6, but not now. I just had to remove the @JoinTable not needed to solve the error.","title":"Migration Hibernate 6","body":"<p>I finally found the problem by reading the Jakarta Persistence Spec.</p>\n<blockquote>\n<p>The JoinTable annotation is used in the mapping of entity associations. <strong>A JoinTable annotation is\nspecified on the owning side of the association</strong></p>\n</blockquote>\n<p>In my project there is a <code>@JoinTable</code> annotation on both side of the association. This was working before Hibernate 6, but not now. I just had to remove the @JoinTable not needed to solve the error.</p>\n"}],"owner":{"account_id":1477182,"reputation":1388,"user_id":1387310,"accept_rate":64,"display_name":"Scandinave"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1069,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":74877276,"answer_count":1,"score":3,"last_activity_date":1671703746,"creation_date":1670863597,"question_id":74774484,"body_markdown":"I try to migrate a SpringBoot application to SpringBoot 3. Sprinboot 3 use Hibernate 6.\r\nMy application refuse to start because of the following error \r\n\r\n    Caused by: java.lang.NullPointerException: Cannot invoke &quot;java.util.Map.get(Object)&quot; because the return value of &quot;java.util.Map.get(Object)&quot; is null\r\n\tat org.hibernate.envers.configuration.internal.metadata.AuditMetadataGenerator.addJoins(AuditMetadataGenerator.java:206)\r\n\tat org.hibernate.envers.configuration.internal.metadata.AuditMetadataGenerator.generateSecondPass(AuditMetadataGenerator.java:409)\r\n\tat org.hibernate.envers.configuration.internal.EntitiesConfigurator.configure(EntitiesConfigurator.java:86)\r\n\tat org.hibernate.envers.boot.internal.EnversServiceImpl.initialize(EnversServiceImpl.java:129)\r\n\tat org.hibernate.envers.boot.internal.AdditionalJaxbMappingProducerImpl.produceAdditionalMappings(AdditionalJaxbMappingProducerImpl.java:92)\r\n\tat org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:329)\r\n\tat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1350)\r\n\tat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1421)\r\n\tat org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)\r\n\tat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)\r\n\tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)\r\n\tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)\r\n\tat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)\r\n\t... 110 common frames omitted\r\n\r\nAfter digging in the Envers code it appear that the problem is located in the [org.hibernate.envers.configuration.internal.metadata.AuditMetadaGenerator][1] class. \r\n\r\nAt line 337, there is a condition that let a audited class be referenced during the `first pass` of envers . \r\n\r\n    if ( entity.isJoinAware() ) {\r\n\t\t\tfinal JoinAwarePersistentEntity joinAwareEntity = (JoinAwarePersistentEntity) entity;\r\n\t\t\tcreateJoins( persistentClass, joinAwareEntity, auditingData );\r\n\t\t\taddJoins( persistentClass, propertyMapper, auditingData, persistentClass.getEntityName(), mappingData, true );\r\n\t}\r\n\r\n    private void createJoins(PersistentClass persistentClass, JoinAwarePersistentEntity entity, ClassAuditingData auditingData) {\r\n\t\tfinal Iterator&lt;org.hibernate.mapping.Join&gt; joins = persistentClass.getJoinIterator();\r\n\t\tfinal Map&lt;org.hibernate.mapping.Join, Join&gt; joinElements = new HashMap&lt;&gt;();\r\n\t\tentityJoins.put( persistentClass.getEntityName(), joinElements );\r\n        ....\r\n\r\n\r\nThis is this list that is called during the `second pass` line 206.\r\n\r\n    while ( joins.hasNext() ) {\r\n\t\t\tfinal org.hibernate.mapping.Join join = joins.next();\r\n\t\t\tfinal Join entityJoin = entityJoins.get( entityName ).get( join );\r\n\r\nHere `entityJoins.get(entityName)` return `null` for one of my entity.\r\n\r\nThis entity is correctly annotated with @Audited and extend from another Entity like this:\r\n\r\n    @Entity\r\n    @Table(name = &quot;a&quot;)\r\n    @Audited\r\n    @DiscriminatorValue(&quot;DISCRIMINATOR&quot;)\r\n    public class A extends B {\r\n       //...\r\n    }\r\n\r\n    @Entity\r\n    @Table(name = &quot;b&quot;)\r\n    @Inheritance(strategy = InheritanceType.JOINED)\r\n    @Audited\r\n    public abstract class B {\r\n       //...\r\n    }\r\n\r\nIn my comprehension, specifying the Inheritance with a value of `InheritanceType.JOINED` make envers create a [JoinedSubclassPersistentEntity][2] that itself inherit from [PersistentEntity][3].\r\n\r\nThis `PersistentEntity` has a method : \r\n\r\n    public boolean isJoinAware() {\r\n        return false;\r\n    }\r\n\r\nthat is overriden by it&#39;s children like [RootPersistentEntity][4] by :\r\n\r\n    @Override\r\n    public boolean isJoinAware() {\r\n        return true;\r\n    }\r\n\r\nThis override is not made by `JoinedSubclassPersistentEntity` which is the class generated when using Joined inheritence strategy. \r\n\r\nThis cause my entity to not be add to the `first pass` but still processed by the `second pass`.  \r\n\r\nSo the question is ? Is it a bug in Envers ? Can i used Joined inheritence strategy with a @Audited class ? \r\n\r\nIt was working well in hibernate 5.6.\r\n\r\n\r\n  [1]: https://github.com/hibernate/hibernate-orm/blob/6.1.5/hibernate-envers/src/main/java/org/hibernate/envers/configuration/internal/metadata/AuditMetadataGenerator.java\r\n  [2]: https://github.com/hibernate/hibernate-orm/blob/main/hibernate-envers/src/main/java/org/hibernate/envers/boot/model/SubclassPersistentEntity.java\r\n  [3]: https://github.com/hibernate/hibernate-orm/blob/main/hibernate-envers/src/main/java/org/hibernate/envers/boot/model/PersistentEntity.java\r\n  [4]: https://github.com/hibernate/hibernate-orm/blob/main/hibernate-envers/src/main/java/org/hibernate/envers/boot/model/RootPersistentEntity.java\r\n\r\n[Edit]: \r\nI managed to reproduce the error with a simple test class : \r\n\r\n\r\n    @Entity\r\n    @Audited\r\n    @DiscriminatorValue(&quot;OPTION&quot;)\r\n    public class Child extends Parent{\r\n    \r\n        private String propA;\r\n    \r\n        @OneToMany(fetch = FetchType.LAZY, cascade = CascadeType.ALL)\r\n        @JoinTable(name = &quot;recursive_children_child&quot;, joinColumns = {@JoinColumn(name = &quot;child_id&quot;, nullable = false, updatable = false)}, inverseJoinColumns = {@JoinColumn(name = &quot;recursive_id&quot;, nullable = false, updatable = false)})\r\n        @NotAudited\r\n        @OrderBy(&quot;propA DESC&quot;)\r\n        private List&lt;Child&gt; children = new ArrayList&lt;&gt;();\r\n    \r\n        @ManyToOne(fetch = FetchType.LAZY)\r\n        @JoinTable(name = &quot;recursive_children_child&quot;, joinColumns = {@JoinColumn(name = &quot;recursive_id&quot;)}, inverseJoinColumns = {@JoinColumn(name = &quot;child_id&quot;)})\r\n        @NotAudited\r\n        private Child recursiveChild;\r\n        public Child(String propA) {\r\n            this.propA = propA;\r\n        }\r\n    \r\n        public Child() {\r\n    \r\n        }\r\n    \r\n        public String getPropA() {\r\n            return propA;\r\n        }\r\n    \r\n        public void setPropA(String propA) {\r\n            this.propA = propA;\r\n        }\r\n    }\r\n\r\nThe problem seems to be with the recursive relationship in the `Child` class. Ember try to audit the relationship despite the presence of `@Audited` annotation.\r\n\r\nLink to a project that reproduce the bug =&gt; https://github.com/scandinave/envers6-migration-bug","title":"Migration Hibernate 6","body":"<p>I try to migrate a SpringBoot application to SpringBoot 3. Sprinboot 3 use Hibernate 6.\nMy application refuse to start because of the following error</p>\n<pre><code>Caused by: java.lang.NullPointerException: Cannot invoke &quot;java.util.Map.get(Object)&quot; because the return value of &quot;java.util.Map.get(Object)&quot; is null\nat org.hibernate.envers.configuration.internal.metadata.AuditMetadataGenerator.addJoins(AuditMetadataGenerator.java:206)\nat org.hibernate.envers.configuration.internal.metadata.AuditMetadataGenerator.generateSecondPass(AuditMetadataGenerator.java:409)\nat org.hibernate.envers.configuration.internal.EntitiesConfigurator.configure(EntitiesConfigurator.java:86)\nat org.hibernate.envers.boot.internal.EnversServiceImpl.initialize(EnversServiceImpl.java:129)\nat org.hibernate.envers.boot.internal.AdditionalJaxbMappingProducerImpl.produceAdditionalMappings(AdditionalJaxbMappingProducerImpl.java:92)\nat org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:329)\nat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1350)\nat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1421)\nat org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)\nat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)\nat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)\nat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)\nat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)\n... 110 common frames omitted\n</code></pre>\n<p>After digging in the Envers code it appear that the problem is located in the <a href=\"https://github.com/hibernate/hibernate-orm/blob/6.1.5/hibernate-envers/src/main/java/org/hibernate/envers/configuration/internal/metadata/AuditMetadataGenerator.java\" rel=\"nofollow noreferrer\">org.hibernate.envers.configuration.internal.metadata.AuditMetadaGenerator</a> class.</p>\n<p>At line 337, there is a condition that let a audited class be referenced during the <code>first pass</code> of envers .</p>\n<pre><code>if ( entity.isJoinAware() ) {\n        final JoinAwarePersistentEntity joinAwareEntity = (JoinAwarePersistentEntity) entity;\n        createJoins( persistentClass, joinAwareEntity, auditingData );\n        addJoins( persistentClass, propertyMapper, auditingData, persistentClass.getEntityName(), mappingData, true );\n}\n\nprivate void createJoins(PersistentClass persistentClass, JoinAwarePersistentEntity entity, ClassAuditingData auditingData) {\n    final Iterator&lt;org.hibernate.mapping.Join&gt; joins = persistentClass.getJoinIterator();\n    final Map&lt;org.hibernate.mapping.Join, Join&gt; joinElements = new HashMap&lt;&gt;();\n    entityJoins.put( persistentClass.getEntityName(), joinElements );\n    ....\n</code></pre>\n<p>This is this list that is called during the <code>second pass</code> line 206.</p>\n<pre><code>while ( joins.hasNext() ) {\n        final org.hibernate.mapping.Join join = joins.next();\n        final Join entityJoin = entityJoins.get( entityName ).get( join );\n</code></pre>\n<p>Here <code>entityJoins.get(entityName)</code> return <code>null</code> for one of my entity.</p>\n<p>This entity is correctly annotated with @Audited and extend from another Entity like this:</p>\n<pre><code>@Entity\n@Table(name = &quot;a&quot;)\n@Audited\n@DiscriminatorValue(&quot;DISCRIMINATOR&quot;)\npublic class A extends B {\n   //...\n}\n\n@Entity\n@Table(name = &quot;b&quot;)\n@Inheritance(strategy = InheritanceType.JOINED)\n@Audited\npublic abstract class B {\n   //...\n}\n</code></pre>\n<p>In my comprehension, specifying the Inheritance with a value of <code>InheritanceType.JOINED</code> make envers create a <a href=\"https://github.com/hibernate/hibernate-orm/blob/main/hibernate-envers/src/main/java/org/hibernate/envers/boot/model/SubclassPersistentEntity.java\" rel=\"nofollow noreferrer\">JoinedSubclassPersistentEntity</a> that itself inherit from <a href=\"https://github.com/hibernate/hibernate-orm/blob/main/hibernate-envers/src/main/java/org/hibernate/envers/boot/model/PersistentEntity.java\" rel=\"nofollow noreferrer\">PersistentEntity</a>.</p>\n<p>This <code>PersistentEntity</code> has a method :</p>\n<pre><code>public boolean isJoinAware() {\n    return false;\n}\n</code></pre>\n<p>that is overriden by it's children like <a href=\"https://github.com/hibernate/hibernate-orm/blob/main/hibernate-envers/src/main/java/org/hibernate/envers/boot/model/RootPersistentEntity.java\" rel=\"nofollow noreferrer\">RootPersistentEntity</a> by :</p>\n<pre><code>@Override\npublic boolean isJoinAware() {\n    return true;\n}\n</code></pre>\n<p>This override is not made by <code>JoinedSubclassPersistentEntity</code> which is the class generated when using Joined inheritence strategy.</p>\n<p>This cause my entity to not be add to the <code>first pass</code> but still processed by the <code>second pass</code>.</p>\n<p>So the question is ? Is it a bug in Envers ? Can i used Joined inheritence strategy with a @Audited class ?</p>\n<p>It was working well in hibernate 5.6.</p>\n<p>[Edit]:\nI managed to reproduce the error with a simple test class :</p>\n<pre><code>@Entity\n@Audited\n@DiscriminatorValue(&quot;OPTION&quot;)\npublic class Child extends Parent{\n\n    private String propA;\n\n    @OneToMany(fetch = FetchType.LAZY, cascade = CascadeType.ALL)\n    @JoinTable(name = &quot;recursive_children_child&quot;, joinColumns = {@JoinColumn(name = &quot;child_id&quot;, nullable = false, updatable = false)}, inverseJoinColumns = {@JoinColumn(name = &quot;recursive_id&quot;, nullable = false, updatable = false)})\n    @NotAudited\n    @OrderBy(&quot;propA DESC&quot;)\n    private List&lt;Child&gt; children = new ArrayList&lt;&gt;();\n\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinTable(name = &quot;recursive_children_child&quot;, joinColumns = {@JoinColumn(name = &quot;recursive_id&quot;)}, inverseJoinColumns = {@JoinColumn(name = &quot;child_id&quot;)})\n    @NotAudited\n    private Child recursiveChild;\n    public Child(String propA) {\n        this.propA = propA;\n    }\n\n    public Child() {\n\n    }\n\n    public String getPropA() {\n        return propA;\n    }\n\n    public void setPropA(String propA) {\n        this.propA = propA;\n    }\n}\n</code></pre>\n<p>The problem seems to be with the recursive relationship in the <code>Child</code> class. Ember try to audit the relationship despite the presence of <code>@Audited</code> annotation.</p>\n<p>Link to a project that reproduce the bug =&gt; <a href=\"https://github.com/scandinave/envers6-migration-bug\" rel=\"nofollow noreferrer\">https://github.com/scandinave/envers6-migration-bug</a></p>\n"},{"tags":["java","spring","spring-boot","spring-native"],"answers":[{"tags":[],"owner":{"account_id":6052716,"reputation":1842,"user_id":4859182,"accept_rate":92,"display_name":"solomkinmv"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671650924,"creation_date":1671650924,"answer_id":74880929,"question_id":74880928,"body_markdown":"While writing my question I&#39;ve found solution to this problem and decided to share with others.\r\n\r\nSpring Native requires hints where to use reflection.\r\n\r\nUse `@RegisterReflectionForBinding(WordsResponse.class)` to specify that DTO requires reflection.\r\n\r\nDocs: https://docs.spring.io/spring-framework/docs/6.0.0/reference/html/core.html#aot-hints-register-reflection-for-binding\r\n\r\nI&#39;ve used it in the handler to put it close to the place where I create response.\r\n\r\n```\r\n    @Override\r\n    @RegisterReflectionForBinding(value = WordsResponse.class)\r\n    public Mono&lt;ServerResponse&gt; handle(ServerRequest request) {\r\n        return wordsService.getWords()\r\n                           .flatMap(wordsResponse -&gt; ServerResponse.ok()\r\n                                                                   .contentType(MediaType.APPLICATION_JSON)\r\n                                                                   .bodyValue(wordsResponse))\r\n                           .switchIfEmpty(ServerResponse.notFound().build());\r\n    }\r\n```\r\n","title":"Content type &#39;application/json&#39; not supported for bodyType when using native images","body":"<p>While writing my question I've found solution to this problem and decided to share with others.</p>\n<p>Spring Native requires hints where to use reflection.</p>\n<p>Use <code>@RegisterReflectionForBinding(WordsResponse.class)</code> to specify that DTO requires reflection.</p>\n<p>Docs: <a href=\"https://docs.spring.io/spring-framework/docs/6.0.0/reference/html/core.html#aot-hints-register-reflection-for-binding\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-framework/docs/6.0.0/reference/html/core.html#aot-hints-register-reflection-for-binding</a></p>\n<p>I've used it in the handler to put it close to the place where I create response.</p>\n<pre><code>    @Override\n    @RegisterReflectionForBinding(value = WordsResponse.class)\n    public Mono&lt;ServerResponse&gt; handle(ServerRequest request) {\n        return wordsService.getWords()\n                           .flatMap(wordsResponse -&gt; ServerResponse.ok()\n                                                                   .contentType(MediaType.APPLICATION_JSON)\n                                                                   .bodyValue(wordsResponse))\n                           .switchIfEmpty(ServerResponse.notFound().build());\n    }\n</code></pre>\n"}],"owner":{"account_id":6052716,"reputation":1842,"user_id":4859182,"accept_rate":92,"display_name":"solomkinmv"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1242,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1671703701,"creation_date":1671650924,"question_id":74880928,"body_markdown":"I&#39;m using Spring Boot 3 with WebFlux. Tests run successfully, local service also works fine. Problems appear when running native image generated by `gradlew bootBuildImage`.\r\n\r\nCode example:\r\n\r\n```\r\n@Configuration\r\npublic class RouteConfiguration {\r\n\r\n    @Bean\r\n    RouterFunction&lt;ServerResponse&gt; routerFunction(GetWordsHandler getWordsHandler) {\r\n        return RouterFunctions.route()\r\n                              .GET(&quot;/api/words/&quot;, getWordsHandler)\r\n                              .build();\r\n    }\r\n\r\n}\r\n\r\n@Component\r\n@AllArgsConstructor\r\npublic class GetWordsHandler implements HandlerFunction&lt;ServerResponse&gt; {\r\n\r\n    private final WordsService wordsService;\r\n\r\n    @Override\r\n    public Mono&lt;ServerResponse&gt; handle(ServerRequest request) {\r\n        return wordsService.getWords()\r\n                           .flatMap(wordsResponse -&gt; ServerResponse.ok()\r\n                                                                   .contentType(MediaType.APPLICATION_JSON)\r\n                                                                   .bodyValue(wordsResponse))\r\n                           .switchIfEmpty(ServerResponse.notFound().build());\r\n    }\r\n}\r\n\r\npublic record WordsResponse(List&lt;String&gt; words) {\r\n}\r\n\r\n```\r\n\r\n\r\nStack trace:\r\n\r\n```\r\norg.springframework.web.reactive.function.UnsupportedMediaTypeException: Content type &#39;application/json&#39; not supported for bodyType=com.example.WordsResponse\r\n\tat org.springframework.web.reactive.function.BodyInserters.unsupportedError(BodyInserters.java:391) ~[na:na]\r\n\tSuppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException:\r\nError has been observed at the following site(s):\r\n\t*__checkpoint ? Handler in.solomk.dictionary.api.handler.AddWordHandler@531fc147 [DispatcherHandler]\r\n\t*__checkpoint ? org.springframework.web.filter.reactive.ServerHttpObservationFilter [DefaultWebFilterChain]\r\n\t*__checkpoint ? org.springframework.web.cors.reactive.CorsWebFilter [DefaultWebFilterChain]\r\n\t*__checkpoint ? HTTP POST &quot;/api/words&quot; [ExceptionHandlingWebHandler]\r\nOriginal Stack Trace:\r\n\t\tat org.springframework.web.reactive.function.BodyInserters.unsupportedError(BodyInserters.java:391) ~[na:na]\r\n\t\tat org.springframework.web.reactive.function.BodyInserters.lambda$writeWithMessageWriters$11(BodyInserters.java:381) ~[na:na]\r\n\t\tat java.base@17.0.5/java.util.Optional.orElseGet(Optional.java:364) ~[in.solomk.dictionary.DictionaryApplication:na]\r\n\t\tat org.springframework.web.reactive.function.BodyInserters.writeWithMessageWriters(BodyInserters.java:381) ~[na:na]\r\n\t\tat org.springframework.web.reactive.function.BodyInserters.lambda$fromPublisher$4(BodyInserters.java:185) ~[na:na]\r\n\t\tat org.springframework.web.reactive.function.server.DefaultEntityResponseBuilder$DefaultEntityResponse.writeToInternal(DefaultEntityResponseBuilder.java:233) ~[na:na]\r\n\t\tat org.springframework.web.reactive.function.server.DefaultServerResponseBuilder$AbstractServerResponse.writeTo(DefaultServerResponseBuilder.java:343) ~[in.solomk.dictionary.DictionaryApplication:6.0.2]\r\n\t\tat org.springframework.web.reactive.function.server.support.ServerResponseResultHandler.handleResult(ServerResponseResultHandler.java:94) ~[in.solomk.dictionary.DictionaryApplication:6.0.2]\r\n\t\tat org.springframework.web.reactive.DispatcherHandler.doHandleResult(DispatcherHandler.java:209) ~[in.solomk.dictionary.DictionaryApplication:6.0.2]\r\n\t\tat org.springframework.web.reactive.DispatcherHandler.handleResult(DispatcherHandler.java:192) ~[in.solomk.dictionary.DictionaryApplication:6.0.2]\r\n\t\tat org.springframework.web.reactive.DispatcherHandler.lambda$handleRequestWith$6(DispatcherHandler.java:184) ~[in.solomk.dictionary.DictionaryApplication:6.0.2]\r\n\t\tat reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:132) ~[in.solomk.dictionary.DictionaryApplication:3.5.0]\r\n\t\tat reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:129) ~[na:na]\r\n\t\tat reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:129) ~[na:na]\r\n\t\tat reactor.core.publisher.Operators$ScalarSubscription.request(Operators.java:2508) ~[in.solomk.dictionary.DictionaryApplication:3.5.0]\r\n\t\tat reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.request(FluxMapFuseable.java:171) ~[na:na]\r\n\t\tat reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.request(FluxMapFuseable.java:171) ~[na:na]\r\n\t\tat reactor.core.publisher.MonoFlatMap$FlatMapMain.request(MonoFlatMap.java:194) ~[in.solomk.dictionary.DictionaryApplication:3.5.0]\r\n\t\tat reactor.core.publisher.MonoFlatMap$FlatMapInner.onSubscribe(MonoFlatMap.java:291) ~[in.solomk.dictionary.DictionaryApplication:3.5.0]\r\n\t\tat reactor.core.publisher.MonoFlatMap$FlatMapMain.onSubscribe(MonoFlatMap.java:117) ~[in.solomk.dictionary.DictionaryApplication:3.5.0]\r\n\t\tat reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onSubscribe(FluxMapFuseable.java:96) ~[na:na]\r\n\t\tat reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onSubscribe(FluxMapFuseable.java:96) ~[na:na]\r\n\t\tat reactor.core.publisher.MonoJust.subscribe(MonoJust.java:55) ~[na:na]\r\n\t\tat reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:64) ~[in.solomk.dictionary.DictionaryApplication:3.5.0]\r\n\t\tat reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:165) ~[in.solomk.dictionary.DictionaryApplication:3.5.0]\r\n\t\tat reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onNext(FluxOnErrorResume.java:79) ~[na:na]\r\n\t\tat reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onNext(FluxSwitchIfEmpty.java:74) ~[na:na]\r\n\t\tat reactor.core.publisher.MonoNext$NextSubscriber.onNext(MonoNext.java:82) ~[in.solomk.dictionary.DictionaryApplication:3.5.0]\r\n\t\tat reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.innerNext(FluxConcatMapNoPrefetch.java:258) ~[in.solomk.dictionary.DictionaryApplication:3.5.0]\r\n\t\tat reactor.core.publisher.FluxConcatMap$ConcatMapInner.onNext(FluxConcatMap.java:863) ~[na:na]\r\n\t\tat reactor.core.publisher.FluxMap$MapSubscriber.onNext(FluxMap.java:122) ~[na:na]\r\n\t\tat reactor.core.publisher.FluxPeek$PeekSubscriber.onNext(FluxPeek.java:200) ~[na:na]\r\n\t\tat reactor.core.publisher.MonoNext$NextSubscriber.onNext(MonoNext.java:82) ~[in.solomk.dictionary.DictionaryApplication:3.5.0]\r\n\t\tat reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.innerNext(FluxConcatMapNoPrefetch.java:258) ~[in.solomk.dictionary.DictionaryApplication:3.5.0]\r\n\t\tat reactor.core.publisher.FluxConcatMap$ConcatMapInner.onNext(FluxConcatMap.java:863) ~[na:na]\r\n\t\tat reactor.core.publisher.FluxConcatMap$WeakScalarSubscription.request(FluxConcatMap.java:479) ~[na:na]\r\n\t\tat reactor.core.publisher.Operators$MultiSubscriptionSubscriber.request(Operators.java:2268) ~[in.solomk.dictionary.DictionaryApplication:3.5.0]\r\n\t\tat reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.request(FluxConcatMapNoPrefetch.java:338) ~[in.solomk.dictionary.DictionaryApplication:3.5.0]\r\n\t\tat reactor.core.publisher.MonoNext$NextSubscriber.request(MonoNext.java:108) ~[in.solomk.dictionary.DictionaryApplication:3.5.0]\r\n\t\tat reactor.core.publisher.FluxPeek$PeekSubscriber.request(FluxPeek.java:138) ~[na:na]\r\n\t\tat reactor.core.publisher.FluxMap$MapSubscriber.request(FluxMap.java:164) ~[na:na]\r\n\t\tat reactor.core.publisher.Operators$MultiSubscriptionSubscriber.request(Operators.java:2268) ~[in.solomk.dictionary.DictionaryApplication:3.5.0]\r\n\t\tat reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.request(FluxConcatMapNoPrefetch.java:338) ~[in.solomk.dictionary.DictionaryApplication:3.5.0]\r\n\t\tat reactor.core.publisher.MonoNext$NextSubscriber.request(MonoNext.java:108) ~[in.solomk.dictionary.DictionaryApplication:3.5.0]\r\n\t\tat reactor.core.publisher.Operators$MultiSubscriptionSubscriber.set(Operators.java:2304) ~[in.solomk.dictionary.DictionaryApplication:3.5.0]\r\n\t\tat reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onSubscribe(Operators.java:2178) ~[in.solomk.dictionary.DictionaryApplication:3.5.0]\r\n\t\tat reactor.core.publisher.MonoNext$NextSubscriber.onSubscribe(MonoNext.java:70) ~[in.solomk.dictionary.DictionaryApplication:3.5.0]\r\n\t\tat reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.onSubscribe(FluxConcatMapNoPrefetch.java:164) ~[in.solomk.dictionary.DictionaryApplication:3.5.0]\r\n\t\tat reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:165) ~[na:na]\r\n\t\tat reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:87) ~[na:na]\r\n\t\tat reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:64) ~[in.solomk.dictionary.DictionaryApplication:3.5.0]\r\n\t\tat reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:52) ~[na:na]\r\n\t\tat reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:64) ~[in.solomk.dictionary.DictionaryApplication:3.5.0]\r\n\t\tat reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:52) ~[na:na]\r\n\t\tat reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:64) ~[in.solomk.dictionary.DictionaryApplication:3.5.0]\r\n\t\tat reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:52) ~[na:na]\r\n\t\tat reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:64) ~[in.solomk.dictionary.DictionaryApplication:3.5.0]\r\n\t\tat reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:52) ~[na:na]\r\n\t\tat reactor.core.publisher.Mono.subscribe(Mono.java:4444) ~[in.solomk.dictionary.DictionaryApplication:3.5.0]\r\n\t\tat reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.subscribeNext(MonoIgnoreThen.java:263) ~[in.solomk.dictionary.DictionaryApplication:3.5.0]\r\n\t\tat reactor.core.publisher.MonoIgnoreThen.subscribe(MonoIgnoreThen.java:51) ~[na:na]\r\n\t\tat reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:64) ~[in.solomk.dictionary.DictionaryApplication:3.5.0]\r\n\t\tat reactor.core.publisher.MonoDeferContextual.subscribe(MonoDeferContextual.java:55) ~[na:na]\r\n\t\tat reactor.netty.http.server.HttpServer$HttpServerHandle.onStateChange(HttpServer.java:997) ~[na:na]\r\n\t\tat reactor.netty.ReactorNetty$CompositeConnectionObserver.onStateChange(ReactorNetty.java:680) ~[na:na]\r\n\t\tat reactor.netty.transport.ServerTransport$ChildObserver.onStateChange(ServerTransport.java:477) ~[na:na]\r\n\t\tat reactor.netty.http.server.HttpServerOperations.onInboundNext(HttpServerOperations.java:573) ~[in.solomk.dictionary.DictionaryApplication:1.1.0]\r\n\t\tat reactor.netty.channel.ChannelOperationsHandler.channelRead(ChannelOperationsHandler.java:113) ~[in.solomk.dictionary.DictionaryApplication:1.1.0]\r\n\t\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444) ~[in.solomk.dictionary.DictionaryApplication:4.1.85.Final]\r\n\t\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[in.solomk.dictionary.DictionaryApplication:4.1.85.Final]\r\n\t\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412) ~[in.solomk.dictionary.DictionaryApplication:4.1.85.Final]\r\n\t\tat reactor.netty.http.server.HttpTrafficHandler.channelRead(HttpTrafficHandler.java:220) ~[in.solomk.dictionary.DictionaryApplication:1.1.0]\r\n\t\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442) ~[in.solomk.dictionary.DictionaryApplication:4.1.85.Final]\r\n\t\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[in.solomk.dictionary.DictionaryApplication:4.1.85.Final]\r\n\t\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412) ~[in.solomk.dictionary.DictionaryApplication:4.1.85.Final]\r\n\t\tat io.netty.channel.CombinedChannelDuplexHandler$DelegatingChannelHandlerContext.fireChannelRead(CombinedChannelDuplexHandler.java:436) ~[in.solomk.dictionary.DictionaryApplication:4.1.85.Final]\r\n\t\tat io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:346) ~[in.solomk.dictionary.DictionaryApplication:4.1.85.Final]\r\n\t\tat io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:333) ~[in.solomk.dictionary.DictionaryApplication:4.1.85.Final]\r\n\t\tat io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:454) ~[in.solomk.dictionary.DictionaryApplication:4.1.85.Final]\r\n\t\tat io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:290) ~[in.solomk.dictionary.DictionaryApplication:4.1.85.Final]\r\n\t\tat io.netty.channel.CombinedChannelDuplexHandler.channelRead(CombinedChannelDuplexHandler.java:251) ~[in.solomk.dictionary.DictionaryApplication:4.1.85.Final]\r\n\t\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442) ~[in.solomk.dictionary.DictionaryApplication:4.1.85.Final]\r\n\t\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[in.solomk.dictionary.DictionaryApplication:4.1.85.Final]\r\n\t\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412) ~[in.solomk.dictionary.DictionaryApplication:4.1.85.Final]\r\n\t\tat io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410) ~[in.solomk.dictionary.DictionaryApplication:4.1.85.Final]\r\n\t\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440) ~[in.solomk.dictionary.DictionaryApplication:4.1.85.Final]\r\n\t\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[in.solomk.dictionary.DictionaryApplication:4.1.85.Final]\r\n\t\tat io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919) ~[in.solomk.dictionary.DictionaryApplication:4.1.85.Final]\r\n\t\tat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166) ~[in.solomk.dictionary.DictionaryApplication:4.1.85.Final]\r\n\t\tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788) ~[na:na]\r\n\t\tat io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724) ~[na:na]\r\n\t\tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650) ~[na:na]\r\n\t\tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562) ~[na:na]\r\n\t\tat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997) ~[na:na]\r\n\t\tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[na:na]\r\n\t\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[na:na]\r\n\t\tat java.base@17.0.5/java.lang.Thread.run(Thread.java:833) ~[in.solomk.dictionary.DictionaryApplication:na]\r\n\t\tat com.oracle.svm.core.thread.PlatformThreads.threadStartRoutine(PlatformThreads.java:775) ~[in.solomk.dictionary.DictionaryApplication:na]\r\n\t\tat com.oracle.svm.core.posix.thread.PosixPlatformThreads.pthreadStartRoutine(PosixPlatformThreads.java:203) ~[na:na]\r\n```\r\n\r\nSimilar issue on GitHub, but there&#39;s no such classes: https://github.com/spring-projects-experimental/spring-native/issues/1721\r\n\r\nSpring Boot version 3.0.0. Project mostly generated with Spring Initializer.","title":"Content type &#39;application/json&#39; not supported for bodyType when using native images","body":"<p>I'm using Spring Boot 3 with WebFlux. Tests run successfully, local service also works fine. Problems appear when running native image generated by <code>gradlew bootBuildImage</code>.</p>\n<p>Code example:</p>\n<pre><code>@Configuration\npublic class RouteConfiguration {\n\n    @Bean\n    RouterFunction&lt;ServerResponse&gt; routerFunction(GetWordsHandler getWordsHandler) {\n        return RouterFunctions.route()\n                              .GET(&quot;/api/words/&quot;, getWordsHandler)\n                              .build();\n    }\n\n}\n\n@Component\n@AllArgsConstructor\npublic class GetWordsHandler implements HandlerFunction&lt;ServerResponse&gt; {\n\n    private final WordsService wordsService;\n\n    @Override\n    public Mono&lt;ServerResponse&gt; handle(ServerRequest request) {\n        return wordsService.getWords()\n                           .flatMap(wordsResponse -&gt; ServerResponse.ok()\n                                                                   .contentType(MediaType.APPLICATION_JSON)\n                                                                   .bodyValue(wordsResponse))\n                           .switchIfEmpty(ServerResponse.notFound().build());\n    }\n}\n\npublic record WordsResponse(List&lt;String&gt; words) {\n}\n\n</code></pre>\n<p>Stack trace:</p>\n<pre><code>org.springframework.web.reactive.function.UnsupportedMediaTypeException: Content type 'application/json' not supported for bodyType=com.example.WordsResponse\n    at org.springframework.web.reactive.function.BodyInserters.unsupportedError(BodyInserters.java:391) ~[na:na]\n    Suppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException:\nError has been observed at the following site(s):\n    *__checkpoint ? Handler in.solomk.dictionary.api.handler.AddWordHandler@531fc147 [DispatcherHandler]\n    *__checkpoint ? org.springframework.web.filter.reactive.ServerHttpObservationFilter [DefaultWebFilterChain]\n    *__checkpoint ? org.springframework.web.cors.reactive.CorsWebFilter [DefaultWebFilterChain]\n    *__checkpoint ? HTTP POST &quot;/api/words&quot; [ExceptionHandlingWebHandler]\nOriginal Stack Trace:\n        at org.springframework.web.reactive.function.BodyInserters.unsupportedError(BodyInserters.java:391) ~[na:na]\n        at org.springframework.web.reactive.function.BodyInserters.lambda$writeWithMessageWriters$11(BodyInserters.java:381) ~[na:na]\n        at java.base@17.0.5/java.util.Optional.orElseGet(Optional.java:364) ~[in.solomk.dictionary.DictionaryApplication:na]\n        at org.springframework.web.reactive.function.BodyInserters.writeWithMessageWriters(BodyInserters.java:381) ~[na:na]\n        at org.springframework.web.reactive.function.BodyInserters.lambda$fromPublisher$4(BodyInserters.java:185) ~[na:na]\n        at org.springframework.web.reactive.function.server.DefaultEntityResponseBuilder$DefaultEntityResponse.writeToInternal(DefaultEntityResponseBuilder.java:233) ~[na:na]\n        at org.springframework.web.reactive.function.server.DefaultServerResponseBuilder$AbstractServerResponse.writeTo(DefaultServerResponseBuilder.java:343) ~[in.solomk.dictionary.DictionaryApplication:6.0.2]\n        at org.springframework.web.reactive.function.server.support.ServerResponseResultHandler.handleResult(ServerResponseResultHandler.java:94) ~[in.solomk.dictionary.DictionaryApplication:6.0.2]\n        at org.springframework.web.reactive.DispatcherHandler.doHandleResult(DispatcherHandler.java:209) ~[in.solomk.dictionary.DictionaryApplication:6.0.2]\n        at org.springframework.web.reactive.DispatcherHandler.handleResult(DispatcherHandler.java:192) ~[in.solomk.dictionary.DictionaryApplication:6.0.2]\n        at org.springframework.web.reactive.DispatcherHandler.lambda$handleRequestWith$6(DispatcherHandler.java:184) ~[in.solomk.dictionary.DictionaryApplication:6.0.2]\n        at reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:132) ~[in.solomk.dictionary.DictionaryApplication:3.5.0]\n        at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:129) ~[na:na]\n        at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:129) ~[na:na]\n        at reactor.core.publisher.Operators$ScalarSubscription.request(Operators.java:2508) ~[in.solomk.dictionary.DictionaryApplication:3.5.0]\n        at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.request(FluxMapFuseable.java:171) ~[na:na]\n        at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.request(FluxMapFuseable.java:171) ~[na:na]\n        at reactor.core.publisher.MonoFlatMap$FlatMapMain.request(MonoFlatMap.java:194) ~[in.solomk.dictionary.DictionaryApplication:3.5.0]\n        at reactor.core.publisher.MonoFlatMap$FlatMapInner.onSubscribe(MonoFlatMap.java:291) ~[in.solomk.dictionary.DictionaryApplication:3.5.0]\n        at reactor.core.publisher.MonoFlatMap$FlatMapMain.onSubscribe(MonoFlatMap.java:117) ~[in.solomk.dictionary.DictionaryApplication:3.5.0]\n        at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onSubscribe(FluxMapFuseable.java:96) ~[na:na]\n        at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onSubscribe(FluxMapFuseable.java:96) ~[na:na]\n        at reactor.core.publisher.MonoJust.subscribe(MonoJust.java:55) ~[na:na]\n        at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:64) ~[in.solomk.dictionary.DictionaryApplication:3.5.0]\n        at reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:165) ~[in.solomk.dictionary.DictionaryApplication:3.5.0]\n        at reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onNext(FluxOnErrorResume.java:79) ~[na:na]\n        at reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onNext(FluxSwitchIfEmpty.java:74) ~[na:na]\n        at reactor.core.publisher.MonoNext$NextSubscriber.onNext(MonoNext.java:82) ~[in.solomk.dictionary.DictionaryApplication:3.5.0]\n        at reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.innerNext(FluxConcatMapNoPrefetch.java:258) ~[in.solomk.dictionary.DictionaryApplication:3.5.0]\n        at reactor.core.publisher.FluxConcatMap$ConcatMapInner.onNext(FluxConcatMap.java:863) ~[na:na]\n        at reactor.core.publisher.FluxMap$MapSubscriber.onNext(FluxMap.java:122) ~[na:na]\n        at reactor.core.publisher.FluxPeek$PeekSubscriber.onNext(FluxPeek.java:200) ~[na:na]\n        at reactor.core.publisher.MonoNext$NextSubscriber.onNext(MonoNext.java:82) ~[in.solomk.dictionary.DictionaryApplication:3.5.0]\n        at reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.innerNext(FluxConcatMapNoPrefetch.java:258) ~[in.solomk.dictionary.DictionaryApplication:3.5.0]\n        at reactor.core.publisher.FluxConcatMap$ConcatMapInner.onNext(FluxConcatMap.java:863) ~[na:na]\n        at reactor.core.publisher.FluxConcatMap$WeakScalarSubscription.request(FluxConcatMap.java:479) ~[na:na]\n        at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.request(Operators.java:2268) ~[in.solomk.dictionary.DictionaryApplication:3.5.0]\n        at reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.request(FluxConcatMapNoPrefetch.java:338) ~[in.solomk.dictionary.DictionaryApplication:3.5.0]\n        at reactor.core.publisher.MonoNext$NextSubscriber.request(MonoNext.java:108) ~[in.solomk.dictionary.DictionaryApplication:3.5.0]\n        at reactor.core.publisher.FluxPeek$PeekSubscriber.request(FluxPeek.java:138) ~[na:na]\n        at reactor.core.publisher.FluxMap$MapSubscriber.request(FluxMap.java:164) ~[na:na]\n        at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.request(Operators.java:2268) ~[in.solomk.dictionary.DictionaryApplication:3.5.0]\n        at reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.request(FluxConcatMapNoPrefetch.java:338) ~[in.solomk.dictionary.DictionaryApplication:3.5.0]\n        at reactor.core.publisher.MonoNext$NextSubscriber.request(MonoNext.java:108) ~[in.solomk.dictionary.DictionaryApplication:3.5.0]\n        at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.set(Operators.java:2304) ~[in.solomk.dictionary.DictionaryApplication:3.5.0]\n        at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onSubscribe(Operators.java:2178) ~[in.solomk.dictionary.DictionaryApplication:3.5.0]\n        at reactor.core.publisher.MonoNext$NextSubscriber.onSubscribe(MonoNext.java:70) ~[in.solomk.dictionary.DictionaryApplication:3.5.0]\n        at reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.onSubscribe(FluxConcatMapNoPrefetch.java:164) ~[in.solomk.dictionary.DictionaryApplication:3.5.0]\n        at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:165) ~[na:na]\n        at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:87) ~[na:na]\n        at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:64) ~[in.solomk.dictionary.DictionaryApplication:3.5.0]\n        at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:52) ~[na:na]\n        at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:64) ~[in.solomk.dictionary.DictionaryApplication:3.5.0]\n        at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:52) ~[na:na]\n        at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:64) ~[in.solomk.dictionary.DictionaryApplication:3.5.0]\n        at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:52) ~[na:na]\n        at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:64) ~[in.solomk.dictionary.DictionaryApplication:3.5.0]\n        at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:52) ~[na:na]\n        at reactor.core.publisher.Mono.subscribe(Mono.java:4444) ~[in.solomk.dictionary.DictionaryApplication:3.5.0]\n        at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.subscribeNext(MonoIgnoreThen.java:263) ~[in.solomk.dictionary.DictionaryApplication:3.5.0]\n        at reactor.core.publisher.MonoIgnoreThen.subscribe(MonoIgnoreThen.java:51) ~[na:na]\n        at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:64) ~[in.solomk.dictionary.DictionaryApplication:3.5.0]\n        at reactor.core.publisher.MonoDeferContextual.subscribe(MonoDeferContextual.java:55) ~[na:na]\n        at reactor.netty.http.server.HttpServer$HttpServerHandle.onStateChange(HttpServer.java:997) ~[na:na]\n        at reactor.netty.ReactorNetty$CompositeConnectionObserver.onStateChange(ReactorNetty.java:680) ~[na:na]\n        at reactor.netty.transport.ServerTransport$ChildObserver.onStateChange(ServerTransport.java:477) ~[na:na]\n        at reactor.netty.http.server.HttpServerOperations.onInboundNext(HttpServerOperations.java:573) ~[in.solomk.dictionary.DictionaryApplication:1.1.0]\n        at reactor.netty.channel.ChannelOperationsHandler.channelRead(ChannelOperationsHandler.java:113) ~[in.solomk.dictionary.DictionaryApplication:1.1.0]\n        at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444) ~[in.solomk.dictionary.DictionaryApplication:4.1.85.Final]\n        at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[in.solomk.dictionary.DictionaryApplication:4.1.85.Final]\n        at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412) ~[in.solomk.dictionary.DictionaryApplication:4.1.85.Final]\n        at reactor.netty.http.server.HttpTrafficHandler.channelRead(HttpTrafficHandler.java:220) ~[in.solomk.dictionary.DictionaryApplication:1.1.0]\n        at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442) ~[in.solomk.dictionary.DictionaryApplication:4.1.85.Final]\n        at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[in.solomk.dictionary.DictionaryApplication:4.1.85.Final]\n        at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412) ~[in.solomk.dictionary.DictionaryApplication:4.1.85.Final]\n        at io.netty.channel.CombinedChannelDuplexHandler$DelegatingChannelHandlerContext.fireChannelRead(CombinedChannelDuplexHandler.java:436) ~[in.solomk.dictionary.DictionaryApplication:4.1.85.Final]\n        at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:346) ~[in.solomk.dictionary.DictionaryApplication:4.1.85.Final]\n        at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:333) ~[in.solomk.dictionary.DictionaryApplication:4.1.85.Final]\n        at io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:454) ~[in.solomk.dictionary.DictionaryApplication:4.1.85.Final]\n        at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:290) ~[in.solomk.dictionary.DictionaryApplication:4.1.85.Final]\n        at io.netty.channel.CombinedChannelDuplexHandler.channelRead(CombinedChannelDuplexHandler.java:251) ~[in.solomk.dictionary.DictionaryApplication:4.1.85.Final]\n        at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442) ~[in.solomk.dictionary.DictionaryApplication:4.1.85.Final]\n        at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[in.solomk.dictionary.DictionaryApplication:4.1.85.Final]\n        at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412) ~[in.solomk.dictionary.DictionaryApplication:4.1.85.Final]\n        at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410) ~[in.solomk.dictionary.DictionaryApplication:4.1.85.Final]\n        at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440) ~[in.solomk.dictionary.DictionaryApplication:4.1.85.Final]\n        at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[in.solomk.dictionary.DictionaryApplication:4.1.85.Final]\n        at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919) ~[in.solomk.dictionary.DictionaryApplication:4.1.85.Final]\n        at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166) ~[in.solomk.dictionary.DictionaryApplication:4.1.85.Final]\n        at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788) ~[na:na]\n        at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724) ~[na:na]\n        at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650) ~[na:na]\n        at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562) ~[na:na]\n        at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997) ~[na:na]\n        at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[na:na]\n        at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[na:na]\n        at java.base@17.0.5/java.lang.Thread.run(Thread.java:833) ~[in.solomk.dictionary.DictionaryApplication:na]\n        at com.oracle.svm.core.thread.PlatformThreads.threadStartRoutine(PlatformThreads.java:775) ~[in.solomk.dictionary.DictionaryApplication:na]\n        at com.oracle.svm.core.posix.thread.PosixPlatformThreads.pthreadStartRoutine(PosixPlatformThreads.java:203) ~[na:na]\n</code></pre>\n<p>Similar issue on GitHub, but there's no such classes: <a href=\"https://github.com/spring-projects-experimental/spring-native/issues/1721\" rel=\"nofollow noreferrer\">https://github.com/spring-projects-experimental/spring-native/issues/1721</a></p>\n<p>Spring Boot version 3.0.0. Project mostly generated with Spring Initializer.</p>\n"}],"has_more":true,"backoff":10,"quota_max":10000,"quota_remaining":9436,"page":787,"page_size":100}
