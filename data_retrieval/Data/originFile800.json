{"items":[{"tags":["java","functional-programming","vavr"],"comments":[{"owner":{"account_id":2645973,"reputation":65777,"user_id":2288659,"accept_rate":90,"display_name":"Silvio Mayolo"},"score":6,"creation_date":1624480980,"post_id":68106804,"comment_id":120374351,"body_markdown":"It sounds like you&#39;re looking for [type aliases](https://stackoverflow.com/questions/5604390/how-do-i-create-some-variable-type-alias-in-java), a feature which Java regrettably does not support.","body":"It sounds like you&#39;re looking for <a href=\"https://stackoverflow.com/questions/5604390/how-do-i-create-some-variable-type-alias-in-java\">type aliases</a>, a feature which Java regrettably does not support."},{"owner":{"account_id":442405,"reputation":2504,"user_id":833009,"accept_rate":50,"display_name":"jvwilge"},"score":0,"creation_date":1626077716,"post_id":68106804,"comment_id":120786896,"body_markdown":"It might work if you override all the methods that return `Either` and create some static method where you can provide an `Either` and return a `Result`. I ran into the same thing with Validation, but I&#39;m a bit reluctant to override everything, it doesn&#39;t feel right on how we use vavr currently.","body":"It might work if you override all the methods that return <code>Either</code> and create some static method where you can provide an <code>Either</code> and return a <code>Result</code>. I ran into the same thing with Validation, but I&#39;m a bit reluctant to override everything, it doesn&#39;t feel right on how we use vavr currently."},{"owner":{"account_id":5006320,"reputation":522,"user_id":4023887,"display_name":"Cristian Rodriguez"},"score":0,"creation_date":1628890128,"post_id":68106804,"comment_id":121550502,"body_markdown":"If your always going to use Either with your Error type maybe you could use Try instead and extend your type Error from Exception","body":"If your always going to use Either with your Error type maybe you could use Try instead and extend your type Error from Exception"}],"answers":[{"tags":[],"owner":{"account_id":61147,"reputation":2846,"user_id":182393,"accept_rate":85,"display_name":"Koziołek"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671291576,"creation_date":1671291576,"answer_id":74835336,"question_id":68106804,"body_markdown":"What about using `toTry` method from `Value` interface? Your code could look like:\r\n\r\n```java\r\npublic Try&lt;Employee&gt; processEmployee(Employee e){\r\n  //… blebleble\r\n\r\n  var someEither&lt;Error, Employee&gt; = eitherResult();\r\n\r\n  return someEither.toTry();\r\n}\r\n```\r\n\r\nYou have „simplified” type that contains everything that you need and contains `toEither()` method (if you need that).\r\n","title":"Fix left side in Either of Java Vavr","body":"<p>What about using <code>toTry</code> method from <code>Value</code> interface? Your code could look like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public Try&lt;Employee&gt; processEmployee(Employee e){\n  //… blebleble\n\n  var someEither&lt;Error, Employee&gt; = eitherResult();\n\n  return someEither.toTry();\n}\n</code></pre>\n<p>You have „simplified” type that contains everything that you need and contains <code>toEither()</code> method (if you need that).</p>\n"}],"owner":{"account_id":1464665,"reputation":2163,"user_id":1526032,"accept_rate":77,"display_name":"jakstack"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":250,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":1,"score":5,"last_activity_date":1671291576,"creation_date":1624480845,"question_id":68106804,"body_markdown":"\r\nI want to avoid:\r\n\r\n    Either&lt;Error, Employee&gt; processEmployee(Employee e)\r\n\r\nand use:\r\n\r\n    Result&lt;Employee&gt; processEmployee(Employee e)\r\n\r\nwhere left is fixed:\r\n\r\n    Result&lt;T&gt; extends Either&lt;Error, T&gt;\r\n\r\nIs there an example of this?\r\n\r\nWhen I try this nothing compiles for me and I&#39;m forced to implement a concrete class of `Result&lt;T&gt;` which I want to avoid.\r\n\r\nThe reason I want to do this is to simplify the method signatures and the stream code that uses these methods.","title":"Fix left side in Either of Java Vavr","body":"<p>I want to avoid:</p>\n<pre><code>Either&lt;Error, Employee&gt; processEmployee(Employee e)\n</code></pre>\n<p>and use:</p>\n<pre><code>Result&lt;Employee&gt; processEmployee(Employee e)\n</code></pre>\n<p>where left is fixed:</p>\n<pre><code>Result&lt;T&gt; extends Either&lt;Error, T&gt;\n</code></pre>\n<p>Is there an example of this?</p>\n<p>When I try this nothing compiles for me and I'm forced to implement a concrete class of <code>Result&lt;T&gt;</code> which I want to avoid.</p>\n<p>The reason I want to do this is to simplify the method signatures and the stream code that uses these methods.</p>\n"},{"tags":["python","java","c","rust","wc"],"comments":[{"owner":{"account_id":2734060,"reputation":263882,"user_id":2357112,"accept_rate":26,"display_name":"user2357112"},"score":3,"creation_date":1670909804,"post_id":74780384,"comment_id":131976354,"body_markdown":"Your different ways of line counting use different definitions of a line.","body":"Your different ways of line counting use different definitions of a line."},{"owner":{"account_id":26377,"reputation":352187,"user_id":68587,"accept_rate":95,"display_name":"John Kugelman"},"score":5,"creation_date":1670910111,"post_id":74780384,"comment_id":131976394,"body_markdown":"Can you post an example file that we can test with? It&#39;d be really nice if you can reduce it down to a couple of lines. Reproducing this shouldn&#39;t require feeding it 6GB of input data.","body":"Can you post an example file that we can test with? It&#39;d be really nice if you can reduce it down to a couple of lines. Reproducing this shouldn&#39;t require feeding it 6GB of input data."},{"owner":{"account_id":1901532,"reputation":61142,"user_id":1717300,"accept_rate":89,"display_name":"hyde"},"score":3,"creation_date":1670910622,"post_id":74780384,"comment_id":131976457,"body_markdown":"Thing you need to define: how many lines do these files have: `&quot;&quot;`, `&quot;\\n&quot;`, `&quot;x\\n&quot;`,  `&quot;\\nx&quot;`,","body":"Thing you need to define: how many lines do these files have: <code>&quot;&quot;</code>, <code>&quot;\\n&quot;</code>, <code>&quot;x\\n&quot;</code>,  <code>&quot;\\nx&quot;</code>,"},{"owner":{"account_id":2734060,"reputation":263882,"user_id":2357112,"accept_rate":26,"display_name":"user2357112"},"score":3,"creation_date":1670910771,"post_id":74780384,"comment_id":131976477,"body_markdown":"And one more test case, on top of those listed by hyde: `&quot;a\\rb\\n&quot;`","body":"And one more test case, on top of those listed by hyde: <code>&quot;a\\rb\\n&quot;</code>"},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":1,"creation_date":1670913681,"post_id":74780384,"comment_id":131977004,"body_markdown":"I would suggest `&quot;a\\rb\\nb&quot;` but I don&#39;t want to confuse people.","body":"I would suggest <code>&quot;a\\rb\\nb&quot;</code> but I don&#39;t want to confuse people."},{"owner":{"account_id":463151,"reputation":95124,"user_id":865874,"accept_rate":100,"display_name":"rodrigo"},"score":2,"creation_date":1670929620,"post_id":74780384,"comment_id":131981777,"body_markdown":"Curiosuly, if you run `$ echo -n &quot;hello&quot; | wc -l` you will get 0 lines. My guess for the one-off difference is that your file does not end in an end-of-line character. The other differences between Java/Python and Rust/C would be because of stray `\\r` characters in the middle of proper, `\\n` separated, lines.","body":"Curiosuly, if you run <code>$ echo -n &quot;hello&quot; | wc -l</code> you will get 0 lines. My guess for the one-off difference is that your file does not end in an end-of-line character. The other differences between Java/Python and Rust/C would be because of stray <code>\\r</code> characters in the middle of proper, <code>\\n</code> separated, lines."},{"owner":{"account_id":26754384,"reputation":41,"user_id":20353238,"display_name":"Sebasos"},"score":0,"creation_date":1671009447,"post_id":74780384,"comment_id":132002291,"body_markdown":"Sorry, I couldn&#39;t manually make a smaller file to replicate the case, it&#39;s too big and I don&#39;t know exactly where the characters are that cause this, but already with your answers I could understand the cause, thanks!","body":"Sorry, I couldn&#39;t manually make a smaller file to replicate the case, it&#39;s too big and I don&#39;t know exactly where the characters are that cause this, but already with your answers I could understand the cause, thanks!"},{"owner":{"account_id":6767185,"reputation":17842,"user_id":5211833,"accept_rate":83,"display_name":"Adriaan"},"score":0,"creation_date":1671011329,"post_id":74780384,"comment_id":132002927,"body_markdown":"Please do not add answers to the question body itself. Instead, you should add it as an answer. [Answering your own question is allowed and even encouraged](https://stackoverflow.com/help/self-answer).","body":"Please do not add answers to the question body itself. Instead, you should add it as an answer. <a href=\"https://stackoverflow.com/help/self-answer\">Answering your own question is allowed and even encouraged</a>."}],"answers":[{"tags":[],"owner":{"account_id":26754384,"reputation":41,"user_id":20353238,"display_name":"Sebasos"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1671291511,"creation_date":1671011717,"answer_id":74796388,"question_id":74780384,"body_markdown":"My Regex expression for a line is `.*?\\\\n|.+`. This works in https://regexr.com/. \r\n\r\nFor some reason in the file reading implementation I&#39;m using in Python and Java the character `&#39;\\r&#39;` is interpreted as a line feed, but this doesn&#39;t happen with the Rust implementation, nor the wc one and obviously neither with the one I made in C (even when it is explicit).\r\n\r\nBut if I change the conditional `((buffer[i] == &#39;\\n&#39;)` for `((buffer[i] == &#39;\\n&#39;) || (buffer[i] == &#39;\\r&#39;))` I get the same value as in Python and Java minus 1.","title":"Why do I have different line counts?","body":"<p>My Regex expression for a line is <code>.*?\\\\n|.+</code>. This works in <a href=\"https://regexr.com/\" rel=\"nofollow noreferrer\">https://regexr.com/</a>.</p>\n<p>For some reason in the file reading implementation I'm using in Python and Java the character <code>'\\r'</code> is interpreted as a line feed, but this doesn't happen with the Rust implementation, nor the wc one and obviously neither with the one I made in C (even when it is explicit).</p>\n<p>But if I change the conditional <code>((buffer[i] == '\\n')</code> for <code>((buffer[i] == '\\n') || (buffer[i] == '\\r'))</code> I get the same value as in Python and Java minus 1.</p>\n"}],"owner":{"account_id":26754384,"reputation":41,"user_id":20353238,"display_name":"Sebasos"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":168,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"answer_count":1,"score":2,"last_activity_date":1671291511,"creation_date":1670909595,"question_id":74780384,"body_markdown":"I made these different programs in different programming languages to count the number of lines of a file, and it turns out that the output differs according to the program, but the strange thing is that some programs have the same results, I was testing them with a 6gb utf-8 xml file with about 146 million lines.\r\n\r\n```python\r\n# Python\r\n# Output -&gt; 146114085 lines\r\nimport time\r\n\r\nlines = 0\r\n\r\nstart = time.perf_counter()\r\n\r\nwith open(&#39;file_path&#39;) as myfile:\r\n    for line in myfile:\r\n        lines += 1\r\n\r\nprint(&quot;{} lines&quot;.format(lines))\r\n\r\nend = time.perf_counter()\r\n\r\nelapsed = end - start\r\n\r\nprint(f&#39;Elapsed time: {elapsed:.3f} seconds&#39;)\r\n```\r\n\r\n\r\n```java\r\n// Java\r\n// Output -&gt; 146114085 lines (just as with python)\r\n\r\nimport java.io.BufferedReader;\r\nimport java.io.FileNotFoundException;\r\nimport java.io.FileReader;\r\nimport java.io.IOException;\r\n\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n        try {\r\n            long startTime = System.currentTimeMillis();\r\n            int BUFFER_SIZE = 1024*1024;\r\n            String filePath = &quot;file_path&quot;;\r\n            FileReader file = file = new FileReader(filePath);\r\n            BufferedReader reader = new BufferedReader(file, BUFFER_SIZE);\r\n            long lines = reader.lines().count();\r\n            reader.close();\r\n            System.out.println(&quot;The number of lines is &quot; + lines);\r\n            long elapsedTime = System.currentTimeMillis() - startTime;\r\n            System.out.println(&quot;Duration in seconds: &quot; + elapsedTime/1000);\r\n        } catch (FileNotFoundException e) {\r\n            throw new RuntimeException(e);\r\n        } catch (IOException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n\r\n```rust\r\n// Rust\r\n// Output -&gt; 146113746 lines\r\nuse std::fs::File;\r\nuse std::io::{BufRead, BufReader, Error, Read};\r\nuse std::time::Instant;\r\n\r\nfn main() {\r\n    let file_path = &quot;file_path&quot;;\r\n    let buffer_size = 1024*1024;\r\n    let start = Instant::now();\r\n    if let Err(err) = read_file(buffer_size, file_path) {\r\n        println!(&quot;{}&quot;, err);\r\n    }\r\n    let duration = start.elapsed();\r\n    println!(&quot;The function took {} seconds to execute&quot;, duration.as_secs());\r\n}\r\n\r\nfn read_file(buffer_size: usize, file_path: &amp;str) -&gt; Result&lt;(), Error&gt; {\r\n    let file = File::open(file_path)?;\r\n    let reader = BufReader::with_capacity(buffer_size, file);\r\n    let lines = reader.lines().fold(0, |sum, _| sum + 1);\r\n    println!(&quot;Number of lines {}&quot;, lines);\r\n    Ok(())\r\n}\r\n```\r\n\r\n\r\n```c\r\n// C\r\n// Output -&gt; 146113745 lines (one line less than rust output)\r\n#include &lt;stdio.h&gt;\r\n#include &lt;stdlib.h&gt;\r\n#include &lt;time.h&gt;\r\n\r\nint main(int argc, char *argv[]) {\r\n    // start time\r\n    clock_t start = clock();\r\n\r\n    // File path\r\n    const char* file_path = &quot;file_path&quot;;\r\n\r\n    // Open the file for reading\r\n    FILE *fp = fopen(file_path, &quot;r&quot;);\r\n\r\n    // Allocate a buffer to hold the data\r\n    const size_t BUFFER_SIZE = 1024*1024;\r\n    char *buffer = malloc(BUFFER_SIZE);\r\n\r\n    // Declare the number of lines variable\r\n    unsigned int lines = 0;\r\n\r\n    // Read the data in chunks\r\n    while (!feof(fp)) {\r\n        // Read a chunk of data from the file\r\n        size_t bytes_read = fread(buffer, 1, BUFFER_SIZE, fp);\r\n\r\n        // Process the data here...\r\n        for (int i = 0; i &lt; bytes_read; i++) {\r\n            if (buffer[i] == &#39;\\n&#39;) {\r\n                lines++;\r\n            }\r\n        }\r\n    }\r\n\r\n    printf(&quot;The number of lines %u\\n&quot;, lines);\r\n\r\n    // Clean up\r\n    free(buffer);\r\n    fclose(fp);\r\n\r\n    // End\r\n    clock_t end = clock();\r\n\r\n    // Calculate the elapsed time in seconds\r\n    double elapsed = (double) ((end - start) / CLOCKS_PER_SEC);\r\n\r\n    printf(&quot;Elapsed time: %f seconds&quot;, elapsed);\r\n\r\n    return 0;\r\n}\r\n\r\n```\r\n\r\nFinally, the command wc\r\nOutput -&gt; 146113745 lines (just as with C)\r\n`wc -l file_path`\r\n\r\n\r\n\r\n\r\n\r\nI think the correct answer is Rust&#39;s, because it has one more than wc/C, and it is the last line that has no line change as it reaches the end of the file. The cases that cause me confusion are java and python.","title":"Why do I have different line counts?","body":"<p>I made these different programs in different programming languages to count the number of lines of a file, and it turns out that the output differs according to the program, but the strange thing is that some programs have the same results, I was testing them with a 6gb utf-8 xml file with about 146 million lines.</p>\n<pre class=\"lang-py prettyprint-override\"><code># Python\n# Output -&gt; 146114085 lines\nimport time\n\nlines = 0\n\nstart = time.perf_counter()\n\nwith open('file_path') as myfile:\n    for line in myfile:\n        lines += 1\n\nprint(&quot;{} lines&quot;.format(lines))\n\nend = time.perf_counter()\n\nelapsed = end - start\n\nprint(f'Elapsed time: {elapsed:.3f} seconds')\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>// Java\n// Output -&gt; 146114085 lines (just as with python)\n\nimport java.io.BufferedReader;\nimport java.io.FileNotFoundException;\nimport java.io.FileReader;\nimport java.io.IOException;\n\npublic class Main {\n    public static void main(String[] args) {\n        try {\n            long startTime = System.currentTimeMillis();\n            int BUFFER_SIZE = 1024*1024;\n            String filePath = &quot;file_path&quot;;\n            FileReader file = file = new FileReader(filePath);\n            BufferedReader reader = new BufferedReader(file, BUFFER_SIZE);\n            long lines = reader.lines().count();\n            reader.close();\n            System.out.println(&quot;The number of lines is &quot; + lines);\n            long elapsedTime = System.currentTimeMillis() - startTime;\n            System.out.println(&quot;Duration in seconds: &quot; + elapsedTime/1000);\n        } catch (FileNotFoundException e) {\n            throw new RuntimeException(e);\n        } catch (IOException e) {\n            throw new RuntimeException(e);\n        }\n    }\n}\n</code></pre>\n<pre class=\"lang-rust prettyprint-override\"><code>// Rust\n// Output -&gt; 146113746 lines\nuse std::fs::File;\nuse std::io::{BufRead, BufReader, Error, Read};\nuse std::time::Instant;\n\nfn main() {\n    let file_path = &quot;file_path&quot;;\n    let buffer_size = 1024*1024;\n    let start = Instant::now();\n    if let Err(err) = read_file(buffer_size, file_path) {\n        println!(&quot;{}&quot;, err);\n    }\n    let duration = start.elapsed();\n    println!(&quot;The function took {} seconds to execute&quot;, duration.as_secs());\n}\n\nfn read_file(buffer_size: usize, file_path: &amp;str) -&gt; Result&lt;(), Error&gt; {\n    let file = File::open(file_path)?;\n    let reader = BufReader::with_capacity(buffer_size, file);\n    let lines = reader.lines().fold(0, |sum, _| sum + 1);\n    println!(&quot;Number of lines {}&quot;, lines);\n    Ok(())\n}\n</code></pre>\n<pre class=\"lang-c prettyprint-override\"><code>// C\n// Output -&gt; 146113745 lines (one line less than rust output)\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n\nint main(int argc, char *argv[]) {\n    // start time\n    clock_t start = clock();\n\n    // File path\n    const char* file_path = &quot;file_path&quot;;\n\n    // Open the file for reading\n    FILE *fp = fopen(file_path, &quot;r&quot;);\n\n    // Allocate a buffer to hold the data\n    const size_t BUFFER_SIZE = 1024*1024;\n    char *buffer = malloc(BUFFER_SIZE);\n\n    // Declare the number of lines variable\n    unsigned int lines = 0;\n\n    // Read the data in chunks\n    while (!feof(fp)) {\n        // Read a chunk of data from the file\n        size_t bytes_read = fread(buffer, 1, BUFFER_SIZE, fp);\n\n        // Process the data here...\n        for (int i = 0; i &lt; bytes_read; i++) {\n            if (buffer[i] == '\\n') {\n                lines++;\n            }\n        }\n    }\n\n    printf(&quot;The number of lines %u\\n&quot;, lines);\n\n    // Clean up\n    free(buffer);\n    fclose(fp);\n\n    // End\n    clock_t end = clock();\n\n    // Calculate the elapsed time in seconds\n    double elapsed = (double) ((end - start) / CLOCKS_PER_SEC);\n\n    printf(&quot;Elapsed time: %f seconds&quot;, elapsed);\n\n    return 0;\n}\n\n</code></pre>\n<p>Finally, the command wc\nOutput -&gt; 146113745 lines (just as with C)\n<code>wc -l file_path</code></p>\n<p>I think the correct answer is Rust's, because it has one more than wc/C, and it is the last line that has no line change as it reaches the end of the file. The cases that cause me confusion are java and python.</p>\n"},{"tags":["java","java.util.scanner"],"comments":[{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":0,"creation_date":1671289071,"post_id":74835076,"comment_id":132069718,"body_markdown":"It&#39;s not clear from the text of the problem, but could it be that you shouldn&#39;t expect the number from the standard input but instead it comes as an argument to the program?","body":"It&#39;s not clear from the text of the problem, but could it be that you shouldn&#39;t expect the number from the standard input but instead it comes as an argument to the program?"},{"owner":{"account_id":13286877,"reputation":1,"user_id":9592676,"display_name":"Puru Raj Singh Uppal"},"score":0,"creation_date":1671290719,"post_id":74835076,"comment_id":132070010,"body_markdown":"@Federico klez Culloca if I am not expected to take the input from the user, how am I supposed to iterate for recursive multiplication? How can the logic be applied without the input?","body":"@Federico klez Culloca if I am not expected to take the input from the user, how am I supposed to iterate for recursive multiplication? How can the logic be applied without the input?"},{"owner":{"account_id":13286877,"reputation":1,"user_id":9592676,"display_name":"Puru Raj Singh Uppal"},"score":0,"creation_date":1671291078,"post_id":74835076,"comment_id":132070067,"body_markdown":"Thank you @ \nFederico klez Culloca\nI was not supposed to take an input from the user. Thanks a ton. Been stuck on this problems for a few hours now.","body":"Thank you @  Federico klez Culloca I was not supposed to take an input from the user. Thanks a ton. Been stuck on this problems for a few hours now."},{"owner":{"account_id":5156519,"reputation":3345,"user_id":5272567,"display_name":"Matthias"},"score":0,"creation_date":1671721493,"post_id":74835076,"comment_id":132162710,"body_markdown":"@FedericoklezCulloca please post your answer and puru raj singh uppal please accept so this question can be closed","body":"@FedericoklezCulloca please post your answer and puru raj singh uppal please accept so this question can be closed"},{"owner":{"account_id":13286877,"reputation":1,"user_id":9592676,"display_name":"Puru Raj Singh Uppal"},"score":0,"creation_date":1672206621,"post_id":74835076,"comment_id":132241105,"body_markdown":"how to accept an answer to a question?","body":"how to accept an answer to a question?"}],"answers":[{"tags":[],"owner":{"account_id":27276926,"reputation":1,"user_id":20797391,"display_name":"Kaloo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671291509,"creation_date":1671291481,"answer_id":74835323,"question_id":74835076,"body_markdown":"It seems like standard input is not available on this platform... a thing I would try is using next() and Integer.parseInt() but I&#39;m almost 100% sure this wouldn&#39;t help. Since the exception involved is NoSuchElementException, I&#39;m pretty sure it&#39;s also useless to use try{} and catch (java.util.NoSuchElementException e) {}... it really seems like standard input is not enabled.\r\nStill, give this a try:\r\n\r\n    import java.util.Scanner;\r\n    class Tester {\r\n        public static void main(String[] args) {\r\n            // Implement your code here\r\n            int sequence=1;\r\n            \r\n            Scanner sc = new Scanner(System.in);\r\n            System.out.print(&quot;Enter the length of sequence: &quot;);      \r\n    \r\n            // input the lenght of the sequence\r\n            int n = 0;\r\n            do\r\n            {\r\n                try\r\n                {\r\n                   n = sc.nextInt();\r\n                }\r\n                catch (java.util.NoSuchElementException e)\r\n                { // intentionally left blank\r\n                }\r\n            } while (sc.hasNextLine());\r\n            while(n!=0)\r\n            {\r\n               System.out.print(sequence);\r\n               System.out.print(&quot; &quot;);\r\n               sequence*=2;\r\n               n-=1;\r\n            }\r\n            sc.close();\r\n        }\r\n    }","title":"Unable to complete a simple function using scanner class","body":"<p>It seems like standard input is not available on this platform... a thing I would try is using next() and Integer.parseInt() but I'm almost 100% sure this wouldn't help. Since the exception involved is NoSuchElementException, I'm pretty sure it's also useless to use try{} and catch (java.util.NoSuchElementException e) {}... it really seems like standard input is not enabled.\nStill, give this a try:</p>\n<pre><code>import java.util.Scanner;\nclass Tester {\n    public static void main(String[] args) {\n        // Implement your code here\n        int sequence=1;\n        \n        Scanner sc = new Scanner(System.in);\n        System.out.print(&quot;Enter the length of sequence: &quot;);      \n\n        // input the lenght of the sequence\n        int n = 0;\n        do\n        {\n            try\n            {\n               n = sc.nextInt();\n            }\n            catch (java.util.NoSuchElementException e)\n            { // intentionally left blank\n            }\n        } while (sc.hasNextLine());\n        while(n!=0)\n        {\n           System.out.print(sequence);\n           System.out.print(&quot; &quot;);\n           sequence*=2;\n           n-=1;\n        }\n        sc.close();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":13286877,"reputation":1,"user_id":9592676,"display_name":"Puru Raj Singh Uppal"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1671291509,"creation_date":1671288937,"question_id":74835076,"body_markdown":"I am trying to solve a question on the online platform of Infosys Ltd InfyTQ platform. The problem is in java. The problem description is as follows:\r\n\r\nImplement a program to display the geometric sequence as given below for a given value n, where n is the number of elements in the sequence.\r\n\r\n-------&gt;  1, 2, 4, 8, 16, 32, 64, ______, 1024\r\n\r\nSample Input and Output\r\n\r\n-------&gt;  5 :::: 1, 2, 4, 8, 16\r\n-------&gt;  8 :::: 1, 2, 4, 8, 16, 32, 64, 128\r\n\r\nWhat I am given is the following: \r\n\r\n\r\n```\r\nclass Tester {\r\n\tpublic static void main(String[] args) {\r\n\t\t// Implement your code here \r\n\t}\r\n}\r\n```\r\n\r\nWhat I am trying to implement is the following\r\n\r\n\r\n```\r\nimport java.util.Scanner;\r\n\r\nclass Tester {\r\n\tpublic static void main(String[] args) {\r\n\t\t// Implement your code here\r\n\t\tint sequence=1;\r\n        \r\n        Scanner sc = new Scanner(System.in);\r\n        System.out.print(&quot;Enter the length of sequence: &quot;);      \r\n\r\n        // input the lenght of the sequence\r\n        int n = sc.nextInt();\r\n        while(n!=0)\r\n        {\r\n           System.out.print(sequence);\r\n           System.out.print(&quot; &quot;);\r\n           sequence*=2;\r\n           n-=1;\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nI have tried the above code in an online compiler and on my system on the Visual Studio Code.\r\nWhile in the online compiler it&#39;s working flawlessly. On my system it&#39;s not giving any errors.\r\nThe errors while compiling on their platform are as follows: \r\n\r\nEnter the length of sequence:\r\nRuntime Exception\r\n\r\n```\r\nException in thread &quot;main&quot; java.util.NoSuchElementException\r\nat java.base/java.util.Scanner.throwFor(Scanner.java:937)\r\nat java.base/java.util.Scanner.next(Scanner.java:1594)\r\nat java.base/java.util.Scanner.nextInt(Scanner.java:2258)\r\nat java.base/java.util.Scanner.nextInt(Scanner.java:2212)\r\nat Tester.main(myCode.java:12)\r\n```\r\n\r\nI am unable to modify anything on the online platform that I am working on. So nothing deep can be done. Please help solve the above problem so that it&#39;s accepted by the platform, so that I may proceed further. \r\n\r\nThe errors while compiling on their platform are as given above. \r\n\r\nThe logic is flawless. The only problem is with their system I think. But maybe I am going wrong somewhere here. Maybe the SC is leaking. I don&#39;t know for sure. The errors are the only ones that are given above. Please help in the regard.","title":"Unable to complete a simple function using scanner class","body":"<p>I am trying to solve a question on the online platform of Infosys Ltd InfyTQ platform. The problem is in java. The problem description is as follows:</p>\n<p>Implement a program to display the geometric sequence as given below for a given value n, where n is the number of elements in the sequence.</p>\n<p>-------&gt;  1, 2, 4, 8, 16, 32, 64, ______, 1024</p>\n<p>Sample Input and Output</p>\n<p>-------&gt;  5 :::: 1, 2, 4, 8, 16\n-------&gt;  8 :::: 1, 2, 4, 8, 16, 32, 64, 128</p>\n<p>What I am given is the following:</p>\n<pre><code>class Tester {\n    public static void main(String[] args) {\n        // Implement your code here \n    }\n}\n</code></pre>\n<p>What I am trying to implement is the following</p>\n<pre><code>import java.util.Scanner;\n\nclass Tester {\n    public static void main(String[] args) {\n        // Implement your code here\n        int sequence=1;\n        \n        Scanner sc = new Scanner(System.in);\n        System.out.print(&quot;Enter the length of sequence: &quot;);      \n\n        // input the lenght of the sequence\n        int n = sc.nextInt();\n        while(n!=0)\n        {\n           System.out.print(sequence);\n           System.out.print(&quot; &quot;);\n           sequence*=2;\n           n-=1;\n        }\n    }\n}\n</code></pre>\n<p>I have tried the above code in an online compiler and on my system on the Visual Studio Code.\nWhile in the online compiler it's working flawlessly. On my system it's not giving any errors.\nThe errors while compiling on their platform are as follows:</p>\n<p>Enter the length of sequence:\nRuntime Exception</p>\n<pre><code>Exception in thread &quot;main&quot; java.util.NoSuchElementException\nat java.base/java.util.Scanner.throwFor(Scanner.java:937)\nat java.base/java.util.Scanner.next(Scanner.java:1594)\nat java.base/java.util.Scanner.nextInt(Scanner.java:2258)\nat java.base/java.util.Scanner.nextInt(Scanner.java:2212)\nat Tester.main(myCode.java:12)\n</code></pre>\n<p>I am unable to modify anything on the online platform that I am working on. So nothing deep can be done. Please help solve the above problem so that it's accepted by the platform, so that I may proceed further.</p>\n<p>The errors while compiling on their platform are as given above.</p>\n<p>The logic is flawless. The only problem is with their system I think. But maybe I am going wrong somewhere here. Maybe the SC is leaking. I don't know for sure. The errors are the only ones that are given above. Please help in the regard.</p>\n"},{"tags":["java","apache-spark","apache-spark-sql","garbage-collection","out-of-memory"],"comments":[{"owner":{"account_id":54150,"reputation":2013,"user_id":161995,"accept_rate":100,"display_name":"Erik"},"score":0,"creation_date":1671095189,"post_id":74806663,"comment_id":132025117,"body_markdown":"If you don&#39;t have a gc log, get one. I would guess there&#39;s a memory leak of some sort in there.","body":"If you don&#39;t have a gc log, get one. I would guess there&#39;s a memory leak of some sort in there."}],"answers":[{"tags":[],"owner":{"account_id":5968065,"reputation":14213,"user_id":4691279,"accept_rate":58,"display_name":"hagrawal7777"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671291007,"creation_date":1671291007,"answer_id":74835289,"question_id":74806663,"body_markdown":"The `java.lang.OutOfMemoryError: GC Overhead limit exceeded` occurs if the Java process is spending more than approximately 98% of its time doing garbage collection and if it is recovering less than 2% of the heap. Read more over [docs.oracle.com][1].\r\n\r\nThere could be two possible reasons: (1.) you are having a memory leak - in most of cases this turns out to be the root cause (2.) you are not using sufficient heap memory.\r\n\r\nI would suggest do heap dump analysis and see if you have memory leak. Also, try to increase memory and see how it goes.  \r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/technotes/guides/troubleshoot/memleaks002.html","title":"Exception in thread &quot;dispatcher-event-loop-5&quot; java.lang.OutOfMemoryError: GC overhead limit exceeded : Spark","body":"<p>The <code>java.lang.OutOfMemoryError: GC Overhead limit exceeded</code> occurs if the Java process is spending more than approximately 98% of its time doing garbage collection and if it is recovering less than 2% of the heap. Read more over <a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/troubleshoot/memleaks002.html\" rel=\"nofollow noreferrer\">docs.oracle.com</a>.</p>\n<p>There could be two possible reasons: (1.) you are having a memory leak - in most of cases this turns out to be the root cause (2.) you are not using sufficient heap memory.</p>\n<p>I would suggest do heap dump analysis and see if you have memory leak. Also, try to increase memory and see how it goes.</p>\n"}],"owner":{"account_id":19048337,"reputation":189,"user_id":13907061,"display_name":"Rahul Patidar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":344,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1671291007,"creation_date":1671076502,"question_id":74806663,"body_markdown":"Could someone please make a suggestion here? I am executing the following code using the spark submit command, which is taking data from the src hive table (hive is taking data from the spark streaming job and the source is Kafka) every 5 minutes and doing some aggregation over the last 2 hours of partition at the target side.\r\n\r\n    val sparksql=&quot;insert OVERWRITE table  hivedesttable(partition_date,partition_hour) \r\n        select &quot;some business logic with aggregation and group by condition&quot; from hivesrctable\r\n        where concat(partitionDate,&quot;:&quot;,partitionHour) in ${partitionDateHour}&quot;\r\n\r\n    new Thread(new Runnable {\r\n    override def run(): Unit = {\r\n    while (true) {\r\n    val currentTs = java.time.LocalDateTime.now\r\n    var partitionDateHour = (0 until 2)\r\n    .map(h =&gt; currentTs.minusHours(h))\r\n    .map(ts =&gt; s&quot;&#39;${ts.toString.substring(0, 10)}${&quot;:&quot;}${ts.toString.substring(11,13)}&#39;&quot;)\r\n    .toList.toString().drop(4)\r\n\r\n    /** replacing ${partitionDateHour} value in query from current Thread value dynamically*/\r\n      val sparksql=  spark_sql.replace(&quot;${partitionDateHour}&quot;,partitionDateHour)\r\n      spark.sql(sparksql)\r\n      Thread.sleep(300000)}}}).start()\r\n      scala.io.StdIn.readLine()\r\n\r\n\r\nIt was working properly for 5 to 6 hours before displaying the error message below.\r\n\r\n\r\n    Exception in thread &quot;dispatcher-event-loop-5&quot; in java.lang.OutOfMemoryError: GC overhead \r\n    limit exceeded\r\n    22/12/13 19:07:42 ERROR FileFormatWriter: Aborting job null.\r\n    org.apache.spark.sql.catalyst.errors.package$TreeNodeException: execute, tree:\r\n    Exchange hashpartitioning\r\n    +- *HashAggregate\r\n    +- Exchange hashpartitioning\r\n    +- *HashAggregate\r\n    +- *Filter \r\n\r\n\r\n\r\nMy Spark-submit Configuration :\r\n\r\n    --conf &quot;spark.hadoop.hive.exec.dynamic.partition=true&quot;\r\n    --conf &quot;spark.hadoop.hive.exec.dynamic.partition.mode=nonstrict&quot; \r\n    --num-executors 1\r\n    --driver-cores 1 \r\n    --driver-memory 1G  \r\n    --executor-cores 1  \r\n    --executor-memory 1G  \r\n\r\n\r\nI attempted to increase —executor-memory, but the issue persisted. I&#39;m wondering if there&#39;s a way to release all of the GC process&#39;s resources after each thread so that unneeded objects and resources can be freed up.\r\n\r\nCould someone please advise me on how to handle this situation?","title":"Exception in thread &quot;dispatcher-event-loop-5&quot; java.lang.OutOfMemoryError: GC overhead limit exceeded : Spark","body":"<p>Could someone please make a suggestion here? I am executing the following code using the spark submit command, which is taking data from the src hive table (hive is taking data from the spark streaming job and the source is Kafka) every 5 minutes and doing some aggregation over the last 2 hours of partition at the target side.</p>\n<pre><code>val sparksql=&quot;insert OVERWRITE table  hivedesttable(partition_date,partition_hour) \n    select &quot;some business logic with aggregation and group by condition&quot; from hivesrctable\n    where concat(partitionDate,&quot;:&quot;,partitionHour) in ${partitionDateHour}&quot;\n\nnew Thread(new Runnable {\noverride def run(): Unit = {\nwhile (true) {\nval currentTs = java.time.LocalDateTime.now\nvar partitionDateHour = (0 until 2)\n.map(h =&gt; currentTs.minusHours(h))\n.map(ts =&gt; s&quot;'${ts.toString.substring(0, 10)}${&quot;:&quot;}${ts.toString.substring(11,13)}'&quot;)\n.toList.toString().drop(4)\n\n/** replacing ${partitionDateHour} value in query from current Thread value dynamically*/\n  val sparksql=  spark_sql.replace(&quot;${partitionDateHour}&quot;,partitionDateHour)\n  spark.sql(sparksql)\n  Thread.sleep(300000)}}}).start()\n  scala.io.StdIn.readLine()\n</code></pre>\n<p>It was working properly for 5 to 6 hours before displaying the error message below.</p>\n<pre><code>Exception in thread &quot;dispatcher-event-loop-5&quot; in java.lang.OutOfMemoryError: GC overhead \nlimit exceeded\n22/12/13 19:07:42 ERROR FileFormatWriter: Aborting job null.\norg.apache.spark.sql.catalyst.errors.package$TreeNodeException: execute, tree:\nExchange hashpartitioning\n+- *HashAggregate\n+- Exchange hashpartitioning\n+- *HashAggregate\n+- *Filter \n</code></pre>\n<p>My Spark-submit Configuration :</p>\n<pre><code>--conf &quot;spark.hadoop.hive.exec.dynamic.partition=true&quot;\n--conf &quot;spark.hadoop.hive.exec.dynamic.partition.mode=nonstrict&quot; \n--num-executors 1\n--driver-cores 1 \n--driver-memory 1G  \n--executor-cores 1  \n--executor-memory 1G  \n</code></pre>\n<p>I attempted to increase —executor-memory, but the issue persisted. I'm wondering if there's a way to release all of the GC process's resources after each thread so that unneeded objects and resources can be freed up.</p>\n<p>Could someone please advise me on how to handle this situation?</p>\n"},{"tags":["java","visual-studio-code","vscode-extensions","vscode-code-runner"],"answers":[{"tags":[],"owner":{"account_id":19088616,"reputation":8284,"user_id":13939333,"display_name":"Molly Wang-MSFT"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1637549372,"creation_date":1637547937,"answer_id":70060265,"question_id":70045974,"body_markdown":"Uninstall Code Runner and choose `Java: Create New Project` from **Command Palette**. \r\n\r\nCreate a no build tools project and coding in `.java` files which stored in folder `src`, then all the generated `.class` files will be stored in folder `bin` by default.\r\n\r\n[![enter image description here][1]][1]\r\n\r\nAbout the compilation errors, please post code snippets for further solution.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/27qrI.png","title":"How to change the CodeRunner .class file creation from same working directory of the java file in vs code?","body":"<p>Uninstall Code Runner and choose <code>Java: Create New Project</code> from <strong>Command Palette</strong>.</p>\n<p>Create a no build tools project and coding in <code>.java</code> files which stored in folder <code>src</code>, then all the generated <code>.class</code> files will be stored in folder <code>bin</code> by default.</p>\n<p><a href=\"https://i.stack.imgur.com/27qrI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/27qrI.png\" alt=\"enter image description here\" /></a></p>\n<p>About the compilation errors, please post code snippets for further solution.</p>\n"},{"tags":[],"owner":{"account_id":22140355,"reputation":157,"user_id":16456741,"display_name":"Basit"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671290858,"creation_date":1671290858,"answer_id":74835275,"question_id":70045974,"body_markdown":"Install [Test Runner for Java][1] or  [Extension Pack for Java][2] extension both by Microsoft. Better would be to go with an extension pack.\r\n\r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\n  [1]: https://marketplace.visualstudio.com/items?itemName=vscjava.vscode-java-test\r\n  [2]: https://marketplace.visualstudio.com/items?itemName=vscjava.vscode-java-pack\r\n  [3]: https://i.stack.imgur.com/yjWTp.png","title":"How to change the CodeRunner .class file creation from same working directory of the java file in vs code?","body":"<p>Install <a href=\"https://marketplace.visualstudio.com/items?itemName=vscjava.vscode-java-test\" rel=\"nofollow noreferrer\">Test Runner for Java</a> or  <a href=\"https://marketplace.visualstudio.com/items?itemName=vscjava.vscode-java-pack\" rel=\"nofollow noreferrer\">Extension Pack for Java</a> extension both by Microsoft. Better would be to go with an extension pack.</p>\n<p><a href=\"https://i.stack.imgur.com/yjWTp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yjWTp.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":17811536,"reputation":653,"user_id":12936009,"display_name":"NobinPegasus"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":700,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":2,"score":1,"last_activity_date":1671290858,"creation_date":1637411862,"question_id":70045974,"body_markdown":"I am currently using vs code to run my java files.\r\nBut when I use coderunner and run my java file it creates a .class file for every class in the same directory of my java file. Which gets messy how can I get rid of that?\r\nI am ok with uninstalling the coderunner but in that case the java file errors doesn&#39;t show up properly and build fails.\r\n\r\n\r\n[![My VS Code][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Ob3Ec.png","title":"How to change the CodeRunner .class file creation from same working directory of the java file in vs code?","body":"<p>I am currently using vs code to run my java files.\nBut when I use coderunner and run my java file it creates a .class file for every class in the same directory of my java file. Which gets messy how can I get rid of that?\nI am ok with uninstalling the coderunner but in that case the java file errors doesn't show up properly and build fails.</p>\n<p><a href=\"https://i.stack.imgur.com/Ob3Ec.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Ob3Ec.png\" alt=\"My VS Code\" /></a></p>\n"},{"tags":["java","mysql","spring-boot","flyway"],"comments":[{"owner":{"account_id":16523805,"reputation":56,"user_id":11939169,"display_name":"K3v1n 0X90"},"score":0,"creation_date":1671283017,"post_id":74834251,"comment_id":132068543,"body_markdown":"Maybe it is a problem with the naming of the migration scripts have you tried to adhere explicitly to this Schema: V1_1_0__my_first_migration.sql","body":"Maybe it is a problem with the naming of the migration scripts have you tried to adhere explicitly to this Schema: V1_1_0__my_first_migration.sql"},{"owner":{"account_id":16523805,"reputation":56,"user_id":11939169,"display_name":"K3v1n 0X90"},"score":0,"creation_date":1671283342,"post_id":74834251,"comment_id":132068615,"body_markdown":"According to official docs example also the location does may not need the resources as first part but something like classpath:db/migration should be enough https://flywaydb.org/documentation/concepts/migrations.html#naming","body":"According to official docs example also the location does may not need the resources as first part but something like classpath:db/migration should be enough <a href=\"https://flywaydb.org/documentation/concepts/migrations.html#naming\" rel=\"nofollow noreferrer\">flywaydb.org/documentation/concepts/migrations.html#naming</a>"},{"owner":{"account_id":16523805,"reputation":56,"user_id":11939169,"display_name":"K3v1n 0X90"},"score":0,"creation_date":1671283496,"post_id":74834251,"comment_id":132068634,"body_markdown":"That’s because everything below resources is put into classpath root.","body":"That’s because everything below resources is put into classpath root."},{"owner":{"account_id":16523805,"reputation":56,"user_id":11939169,"display_name":"K3v1n 0X90"},"score":0,"creation_date":1671285135,"post_id":74834251,"comment_id":132068940,"body_markdown":"If nothing helps it might be a good idea to set a breakpoint in the flyway spring boot starter and debug it during application startup. \n\nhttps://github.com/spring-projects/spring-boot/blob/main/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration.java \n\nYou can find it in IntelliJ under the dependencies section.","body":"If nothing helps it might be a good idea to set a breakpoint in the flyway spring boot starter and debug it during application startup.   <a href=\"https://github.com/spring-projects/spring-boot/blob/main/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration.java\" rel=\"nofollow noreferrer\">github.com/spring-projects/spring-boot/blob/main/&hellip;</a>   You can find it in IntelliJ under the dependencies section."},{"owner":{"account_id":27275565,"reputation":89,"user_id":20796242,"display_name":"diho472"},"score":0,"creation_date":1671305518,"post_id":74834251,"comment_id":132072722,"body_markdown":"@K3v1n0X90 Hi, thanks for the answer I changed the file names and unfortunately it didn&#39;t change anything, I also tried to debug it, but here I don&#39;t know too much where to set the breakpoint and what in total I should check in it.","body":"@K3v1n0X90 Hi, thanks for the answer I changed the file names and unfortunately it didn&#39;t change anything, I also tried to debug it, but here I don&#39;t know too much where to set the breakpoint and what in total I should check in it."}],"owner":{"account_id":27275565,"reputation":89,"user_id":20796242,"display_name":"diho472"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":277,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1671290608,"creation_date":1671281886,"question_id":74834251,"body_markdown":"After launching an application written in spring boot, the sql scripts do not load into the database. \r\n\r\nOnly an empty table named `flyway_schema_history` is created in the database. \r\n\r\n[![empty table: flyway_schema_history](https://i.stack.imgur.com/2SHfH.png)](https://i.stack.imgur.com/2SHfH.png)\r\n\r\nThe path given to the scripts is as follows: **resources/db.migration**[![path in project](https://i.stack.imgur.com/B4giV.png)](https://i.stack.imgur.com/B4giV.png)\r\n\r\nAn example script named **V1__create_invoice.sql** looks like this:\r\n\r\n    create table invoice\r\n    (\r\n        id          bigint        not null auto_increment PRIMARY KEY,\r\n        name        varchar(255)  not null,\r\n        price       decimal(9, 2) not null,\r\n    );\r\n\r\nIn the IntelliJ console, I get such information about the database or flyway: [![logs](https://i.stack.imgur.com/ihuLj.png)](https://i.stack.imgur.com/ihuLj.png)\r\n\r\nThis is how flyway configuration files are defined:\r\n\r\n    spring.flyway.baselineOnMigrate=true\r\n    spring.flyway.locations=classpath:resources/db/migration\r\n    spring.flyway.enabled=true\r\n\r\nThis is how the files to connect to the database are defined:\r\n\r\n    spring.datasource.url=jdbc:mysql://${DATABASE_URL:localhost}:${DATABASE_PORT:3306}/${DATABASE_NAME:public}?useUnicode=true&amp;serverTimezone=UTC\r\n    spring.datasource.username=${DATABASE_USERNAME:root}\r\n    spring.datasource.password=${DATABASE_PASSWORD:password}\r\n\r\n\r\n\r\n\r\n\r\nI&#39;ve tried changing the path to the scripts folder several times, for example like this \r\n`classpath:db/migration` or `classpath:db.migration` but it didn&#39;t change anything. ","title":"Flyway unable to find location and load sql scripts","body":"<p>After launching an application written in spring boot, the sql scripts do not load into the database.</p>\n<p>Only an empty table named <code>flyway_schema_history</code> is created in the database.</p>\n<p><a href=\"https://i.stack.imgur.com/2SHfH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2SHfH.png\" alt=\"empty table: flyway_schema_history\" /></a></p>\n<p>The path given to the scripts is as follows: <strong>resources/db.migration</strong><a href=\"https://i.stack.imgur.com/B4giV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/B4giV.png\" alt=\"path in project\" /></a></p>\n<p>An example script named <strong>V1__create_invoice.sql</strong> looks like this:</p>\n<pre><code>create table invoice\n(\n    id          bigint        not null auto_increment PRIMARY KEY,\n    name        varchar(255)  not null,\n    price       decimal(9, 2) not null,\n);\n</code></pre>\n<p>In the IntelliJ console, I get such information about the database or flyway: <a href=\"https://i.stack.imgur.com/ihuLj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ihuLj.png\" alt=\"logs\" /></a></p>\n<p>This is how flyway configuration files are defined:</p>\n<pre><code>spring.flyway.baselineOnMigrate=true\nspring.flyway.locations=classpath:resources/db/migration\nspring.flyway.enabled=true\n</code></pre>\n<p>This is how the files to connect to the database are defined:</p>\n<pre><code>spring.datasource.url=jdbc:mysql://${DATABASE_URL:localhost}:${DATABASE_PORT:3306}/${DATABASE_NAME:public}?useUnicode=true&amp;serverTimezone=UTC\nspring.datasource.username=${DATABASE_USERNAME:root}\nspring.datasource.password=${DATABASE_PASSWORD:password}\n</code></pre>\n<p>I've tried changing the path to the scripts folder several times, for example like this\n<code>classpath:db/migration</code> or <code>classpath:db.migration</code> but it didn't change anything.</p>\n"},{"tags":["java","typescript","generics","compiler-errors","type-inference"],"answers":[{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1671289315,"creation_date":1671289315,"answer_id":74835119,"question_id":74834184,"body_markdown":"TypeScript (as well JavaScript) conceptually very different from Java.\r\n\r\nIn TypeScript/JavaScript *everything is build around **Objects***, whilst in Java world *everything revolves around **Classes***.\r\n\r\nIn Java, you **can&#39;t** create an object right on the spot (like it can be done in TypeScript/JavaScript).\r\n\r\nYou need to define a `class` first (or a `record` which is basically a specialized version of a `class`). Sure, you can use an *anonymous inner class* of obtain an instance of a subtype of a particular type (like `java.lang.Object`) and this subclass would be created for you under the hood, but you need Generic type for the properties of your object this option doesn&#39;t fit into your use-case (there&#39;s no way to define new Generic parameters while creating an anonymous inner class).\r\n\r\nSo you need to use either a `class` or a [Java 16 `record`][record] to define your custom generic type (*note that records are immutable, i.e. all properties are final*).\r\n\r\n# Defining a Generic Class\r\n\r\nA generic class that matches the structure of the enclosing object `{ a;  b;  c; }` in your example might look like this:\r\n\r\n    public class MyType&lt;A, B, C&gt; {\r\n        private A a;\r\n        private B b;\r\n        private C c;\r\n        \r\n        // constructor, getters, etc.\r\n    }\r\n\r\n# Defining a Generic Record\r\n\r\nThe inner object which has a structure `{ d; e; }` can be described as the following record (*note that canonical all-args constructor, getters, `equals/hashCode` and `toString` of a record would be auto-generated by the compiler, so the record definition can be literally a one-line*r):\r\n\r\n```\r\npublic record Pair&lt;L, R&gt;(L left, R right) {}\r\n```\r\n\r\n***Note:** some libraries like Vavr and Apache Commons offer types `Triple` and `Pair`, but they are not available in the JDK. Some might say that standard JDK&#39;s `Map.Entry` is a vague analogous of `Pair`, it would be semantically vied to substitute a domain type with map entry.*\r\n\r\n# Type Inference\r\n\r\nRegarding the type inference, in Java we have such notions like [*Target type*][targetType], *poly expressions* (expressions that are context-sensitive and which type should be inferred either from Assignment context, Invocation context or Casting context), etc. This subject is very broad, and many issues related to type inference might be encountered, but to put it simple if you need the compiler to infer some types there should be some source of that information (like assignment context, argument types, etc.).\r\n\r\nHere&#39;s an example of type inference with Java 10 [*Local variable type inference via* `var` *word*][var] and Java 7 [*diamond* `&lt;&gt;` *operator*][diamond] (*suppose `MyType` declares both no-args and all-args constructors*):\r\n\r\n```\r\nMyType&lt;Integer, String, Pair&lt;Integer, String&gt;&gt; myType = new MyType&lt;&gt;();\r\n        \r\nvar myType2 = new MyType&lt;&gt;(1, &quot;b&quot;, new Pair&lt;&gt;(4, &quot;e&quot;)); // &lt;&gt; literally means - infer the type of generic parameters\r\n```\r\n\r\n\r\n\r\n   [record]: https://docs.oracle.com/en/java/javase/16/language/records.html\r\n\r\n   [targetType]: https://docs.oracle.com/javase/tutorial/java/generics/genTypeInference.html#target_types\r\n\r\n   [var]: https://developer.oracle.com/learn/technical-articles/jdk-10-local-variable-type-inference\r\n\r\n   [diamond]: https://docs.oracle.com/javase/tutorial/java/generics/types.html#diamond","title":"Functionnal programming in java and helpful compiler errors","body":"<p>TypeScript (as well JavaScript) conceptually very different from Java.</p>\n<p>In TypeScript/JavaScript <em>everything is build around <strong>Objects</strong></em>, whilst in Java world <em>everything revolves around <strong>Classes</strong></em>.</p>\n<p>In Java, you <strong>can't</strong> create an object right on the spot (like it can be done in TypeScript/JavaScript).</p>\n<p>You need to define a <code>class</code> first (or a <code>record</code> which is basically a specialized version of a <code>class</code>). Sure, you can use an <em>anonymous inner class</em> of obtain an instance of a subtype of a particular type (like <code>java.lang.Object</code>) and this subclass would be created for you under the hood, but you need Generic type for the properties of your object this option doesn't fit into your use-case (there's no way to define new Generic parameters while creating an anonymous inner class).</p>\n<p>So you need to use either a <code>class</code> or a <a href=\"https://docs.oracle.com/en/java/javase/16/language/records.html\" rel=\"nofollow noreferrer\">Java 16 <code>record</code></a> to define your custom generic type (<em>note that records are immutable, i.e. all properties are final</em>).</p>\n<h1>Defining a Generic Class</h1>\n<p>A generic class that matches the structure of the enclosing object <code>{ a;  b;  c; }</code> in your example might look like this:</p>\n<pre><code>public class MyType&lt;A, B, C&gt; {\n    private A a;\n    private B b;\n    private C c;\n    \n    // constructor, getters, etc.\n}\n</code></pre>\n<h1>Defining a Generic Record</h1>\n<p>The inner object which has a structure <code>{ d; e; }</code> can be described as the following record (<em>note that canonical all-args constructor, getters, <code>equals/hashCode</code> and <code>toString</code> of a record would be auto-generated by the compiler, so the record definition can be literally a one-line</em>r):</p>\n<pre><code>public record Pair&lt;L, R&gt;(L left, R right) {}\n</code></pre>\n<p><em><strong>Note:</strong> some libraries like Vavr and Apache Commons offer types <code>Triple</code> and <code>Pair</code>, but they are not available in the JDK. Some might say that standard JDK's <code>Map.Entry</code> is a vague analogous of <code>Pair</code>, it would be semantically vied to substitute a domain type with map entry.</em></p>\n<h1>Type Inference</h1>\n<p>Regarding the type inference, in Java we have such notions like <a href=\"https://docs.oracle.com/javase/tutorial/java/generics/genTypeInference.html#target_types\" rel=\"nofollow noreferrer\"><em>Target type</em></a>, <em>poly expressions</em> (expressions that are context-sensitive and which type should be inferred either from Assignment context, Invocation context or Casting context), etc. This subject is very broad, and many issues related to type inference might be encountered, but to put it simple if you need the compiler to infer some types there should be some source of that information (like assignment context, argument types, etc.).</p>\n<p>Here's an example of type inference with Java 10 <a href=\"https://developer.oracle.com/learn/technical-articles/jdk-10-local-variable-type-inference\" rel=\"nofollow noreferrer\"><em>Local variable type inference via</em> <code>var</code> <em>word</em></a> and Java 7 <a href=\"https://docs.oracle.com/javase/tutorial/java/generics/types.html#diamond\" rel=\"nofollow noreferrer\"><em>diamond</em> <code>&lt;&gt;</code> <em>operator</em></a> (<em>suppose <code>MyType</code> declares both no-args and all-args constructors</em>):</p>\n<pre><code>MyType&lt;Integer, String, Pair&lt;Integer, String&gt;&gt; myType = new MyType&lt;&gt;();\n        \nvar myType2 = new MyType&lt;&gt;(1, &quot;b&quot;, new Pair&lt;&gt;(4, &quot;e&quot;)); // &lt;&gt; literally means - infer the type of generic parameters\n</code></pre>\n"}],"owner":{"account_id":2971436,"reputation":8140,"user_id":2523414,"display_name":"Cl&#233;ment Pr&#233;vost"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":74835119,"answer_count":1,"score":2,"last_activity_date":1671289665,"creation_date":1671281359,"question_id":74834184,"body_markdown":"I&#39;m looking for a way to define generic computation on a piece of data and get the compiler to yell if I get it wrong.\r\n\r\nComing from the typescript world, you can do something like this:\r\n\r\n```typescript\r\n/**\r\n * Type inferred as:\r\n * Array&lt;{\r\n *   a: number;\r\n *   b: string;\r\n *   c: { d: number; e: string };\r\n * }&gt;\r\n */\r\nconst data = [\r\n  { a: 1, b: &quot;b&quot;, c: { d: 4, e: &quot;e&quot; } },\r\n  { a: 2, b: &quot;b&quot;, c: { d: 4, e: &quot;e&quot; } },\r\n  { a: 3, b: &quot;b&quot;, c: { d: 4, e: &quot;e&quot; } },\r\n];\r\n\r\nconst result = data\r\n  // change the type of c to string\r\n  .map(o =&gt; ({...o, c: JSON.stringify(o.c)}))\r\n  // adding a new field\r\n  .map(o =&gt; ({...o, d: &quot;new&quot;}))\r\n;\r\n/** \r\n * `result` type is automatically inferred as:\r\n * Array&lt;{\r\n *     d: string;\r\n *     c: string;\r\n *     a: number;\r\n *     b: string;\r\n * }&gt;\r\n */\r\n```\r\n\r\nAt the end of this, the type of `result` will be properly infered and each type in between `map` is inferred too.\r\n\r\nBenefits here is that the compiler is actually helping uncover bugs.\r\n\r\n**How would you do something similar in java?**\r\n\r\nI tried to use a generic `Map` object with a generic type spanning multiple lower level types that sort of mimic a JS dictionary. But in this case, the compiler doesn&#39;t know that key X is actually of type Y, so it&#39;s totally useless in catching bugs.\r\n\r\nMy conclusion is that it&#39;s not possible to have the same kind of static analysis in java that we have in Typescript. The Java compiler is just not made to propagate and update unnamed types as it goes on and catch those kinds of bugs.\r\n\r\n","title":"Functionnal programming in java and helpful compiler errors","body":"<p>I'm looking for a way to define generic computation on a piece of data and get the compiler to yell if I get it wrong.</p>\n<p>Coming from the typescript world, you can do something like this:</p>\n<pre class=\"lang-js prettyprint-override\"><code>/**\n * Type inferred as:\n * Array&lt;{\n *   a: number;\n *   b: string;\n *   c: { d: number; e: string };\n * }&gt;\n */\nconst data = [\n  { a: 1, b: &quot;b&quot;, c: { d: 4, e: &quot;e&quot; } },\n  { a: 2, b: &quot;b&quot;, c: { d: 4, e: &quot;e&quot; } },\n  { a: 3, b: &quot;b&quot;, c: { d: 4, e: &quot;e&quot; } },\n];\n\nconst result = data\n  // change the type of c to string\n  .map(o =&gt; ({...o, c: JSON.stringify(o.c)}))\n  // adding a new field\n  .map(o =&gt; ({...o, d: &quot;new&quot;}))\n;\n/** \n * `result` type is automatically inferred as:\n * Array&lt;{\n *     d: string;\n *     c: string;\n *     a: number;\n *     b: string;\n * }&gt;\n */\n</code></pre>\n<p>At the end of this, the type of <code>result</code> will be properly infered and each type in between <code>map</code> is inferred too.</p>\n<p>Benefits here is that the compiler is actually helping uncover bugs.</p>\n<p><strong>How would you do something similar in java?</strong></p>\n<p>I tried to use a generic <code>Map</code> object with a generic type spanning multiple lower level types that sort of mimic a JS dictionary. But in this case, the compiler doesn't know that key X is actually of type Y, so it's totally useless in catching bugs.</p>\n<p>My conclusion is that it's not possible to have the same kind of static analysis in java that we have in Typescript. The Java compiler is just not made to propagate and update unnamed types as it goes on and catch those kinds of bugs.</p>\n"},{"tags":["java"],"owner":{"account_id":26685959,"reputation":1,"user_id":20295272,"display_name":"Gongas04"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671289633,"creation_date":1671289599,"question_id":74835150,"body_markdown":"```\r\npublic static void main(String[] args) throws IOException, InterruptedException {\r\n        // Set up the gnuplot command and arguments\r\n        String[] cmd = {&quot;gnuplot&quot;, &quot;-e&quot;, &quot;set terminal png; set output &#39;plotS.png&#39;; plot &#39;graficoS.txt&#39; using 1:2 with lines&quot;};\r\n        String[] cmd2 = {&quot;gnuplot&quot;, &quot;-e&quot;, &quot;set terminal png; set output &#39;plotS.png&#39;; replot &#39;graficoI.txt&#39; using 1:3 with lines&quot;};\r\n        String[] cmd3 = {&quot;gnuplot&quot;, &quot;-e&quot;, &quot;set terminal png; set output &#39;plotS.png&#39;; replot &#39;graficoR.txt&#39; using 1:4 with lines&quot;};\r\n\r\n        // Start the processes\r\n        Process process = Runtime.getRuntime().exec(cmd);\r\n        process.waitFor();\r\n        Process process2 = Runtime.getRuntime().exec(cmd2);\r\n        process2.waitFor();\r\n        Process process3 = Runtime.getRuntime().exec(cmd3);\r\n        process3.waitFor();\r\n\r\n        // Read the output from the processes\r\n        BufferedReader reader = new BufferedReader(new InputStreamReader(process.getInputStream()));\r\n        String line;\r\n        while ((line = reader.readLine()) != null) {\r\n            System.out.println(line);\r\n        }\r\n        reader.close();\r\n```\r\n\r\nNot showing nothing on the png file , even the gnuplot graphic.\r\nIn different png files its working , but in the same it isn&#39;t.\r\n","title":"Error creating 3 different graphics in the same png file using gnuplot and java.lang.Runtime and without any Library","body":"<pre><code>public static void main(String[] args) throws IOException, InterruptedException {\n        // Set up the gnuplot command and arguments\n        String[] cmd = {&quot;gnuplot&quot;, &quot;-e&quot;, &quot;set terminal png; set output 'plotS.png'; plot 'graficoS.txt' using 1:2 with lines&quot;};\n        String[] cmd2 = {&quot;gnuplot&quot;, &quot;-e&quot;, &quot;set terminal png; set output 'plotS.png'; replot 'graficoI.txt' using 1:3 with lines&quot;};\n        String[] cmd3 = {&quot;gnuplot&quot;, &quot;-e&quot;, &quot;set terminal png; set output 'plotS.png'; replot 'graficoR.txt' using 1:4 with lines&quot;};\n\n        // Start the processes\n        Process process = Runtime.getRuntime().exec(cmd);\n        process.waitFor();\n        Process process2 = Runtime.getRuntime().exec(cmd2);\n        process2.waitFor();\n        Process process3 = Runtime.getRuntime().exec(cmd3);\n        process3.waitFor();\n\n        // Read the output from the processes\n        BufferedReader reader = new BufferedReader(new InputStreamReader(process.getInputStream()));\n        String line;\n        while ((line = reader.readLine()) != null) {\n            System.out.println(line);\n        }\n        reader.close();\n</code></pre>\n<p>Not showing nothing on the png file , even the gnuplot graphic.\nIn different png files its working , but in the same it isn't.</p>\n"},{"tags":["java","3d"],"comments":[{"owner":{"account_id":17593023,"reputation":826,"user_id":12764490,"display_name":"Tim Hunter"},"score":0,"creation_date":1611674162,"post_id":65903855,"comment_id":116523368,"body_markdown":"If you&#39;re okay with considering using C# instead, you may want to consider something like a [Arduino to Unity](https://www.alanzucconi.com/2015/10/07/how-to-integrate-arduino-with-unity/) connection since Unity, as a game engine, has a lot of these 3D modeling and control tools readily available. Just an idea to consider.","body":"If you&#39;re okay with considering using C# instead, you may want to consider something like a <a href=\"https://www.alanzucconi.com/2015/10/07/how-to-integrate-arduino-with-unity/\" rel=\"nofollow noreferrer\">Arduino to Unity</a> connection since Unity, as a game engine, has a lot of these 3D modeling and control tools readily available. Just an idea to consider."},{"owner":{"account_id":13990079,"reputation":11,"user_id":10104242,"display_name":"Gandalf1783"},"score":1,"creation_date":1611674433,"post_id":65903855,"comment_id":116523499,"body_markdown":"Yeah, I just know Java way better, except in these Graphics parts. However, I&#39;ll try Unity for now. I guess its more flexible overall.\nThanks for the idea though.","body":"Yeah, I just know Java way better, except in these Graphics parts. However, I&#39;ll try Unity for now. I guess its more flexible overall. Thanks for the idea though."}],"answers":[{"tags":[],"owner":{"account_id":13990079,"reputation":11,"user_id":10104242,"display_name":"Gandalf1783"},"down_vote_count":1,"up_vote_count":0,"is_accepted":true,"score":-1,"last_activity_date":1671289513,"creation_date":1671289513,"answer_id":74835137,"question_id":65903855,"body_markdown":"Unity worked out for this, even though i was getting buggy behaviour.\r\nTherefore i tried out Processing, which turned out to work fine. There are some snippets online where you can pass in the values of your arduino and it just works out.\r\n\r\nI cannot provide more details since the project was abandoned.\r\n","title":"Java 3D Object Rendering with Yaw/Pitch/Roll","body":"<p>Unity worked out for this, even though i was getting buggy behaviour.\nTherefore i tried out Processing, which turned out to work fine. There are some snippets online where you can pass in the values of your arduino and it just works out.</p>\n<p>I cannot provide more details since the project was abandoned.</p>\n"}],"owner":{"account_id":13990079,"reputation":11,"user_id":10104242,"display_name":"Gandalf1783"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":106,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74835137,"answer_count":1,"score":0,"last_activity_date":1671289513,"creation_date":1611673651,"question_id":65903855,"body_markdown":"Im looking for a way of displaying a 3D Rectangle, which could be moved by the values a gyrosensor delivers from my arduino.\r\n\r\nI just don&#39;t know where to start with the Implementation of the 3D Space, the communication works fine.\r\n\r\nI did not find any useful information online, however, I just need a Window (Don&#39;t know, is JFrame enough for this) with a model that I can set x/y/z and yaw/pitch/roll etc.\r\n\r\nAre there libraries or code-examples?\r\n\r\nI did see one integration with JavaFX which I have never used yet, or the implementations were in other languages.","title":"Java 3D Object Rendering with Yaw/Pitch/Roll","body":"<p>Im looking for a way of displaying a 3D Rectangle, which could be moved by the values a gyrosensor delivers from my arduino.</p>\n<p>I just don't know where to start with the Implementation of the 3D Space, the communication works fine.</p>\n<p>I did not find any useful information online, however, I just need a Window (Don't know, is JFrame enough for this) with a model that I can set x/y/z and yaw/pitch/roll etc.</p>\n<p>Are there libraries or code-examples?</p>\n<p>I did see one integration with JavaFX which I have never used yet, or the implementations were in other languages.</p>\n"},{"tags":["java","excel","apache-poi","xlsx"],"answers":[{"tags":[],"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1671289362,"creation_date":1671258937,"answer_id":74832243,"question_id":74824737,"body_markdown":"Microsoft Excel never stores localized formula strings.  It always stores en_US formula strings. So use `cell.setCellFormula(&quot;COUNTA(B10:B37)&quot;);` to make it work.\r\n\r\n`Cell.setCellFormula` always sets the formula string as stored directly into the file.\r\n\r\nThe Excel GUI will change that formula to the German version `=ANZAHL2(B10:B37)` after it had read the en_US formula string from the file storage.","title":"Apache POI Excel Formula entering @ Symbols","body":"<p>Microsoft Excel never stores localized formula strings.  It always stores en_US formula strings. So use <code>cell.setCellFormula(&quot;COUNTA(B10:B37)&quot;);</code> to make it work.</p>\n<p><code>Cell.setCellFormula</code> always sets the formula string as stored directly into the file.</p>\n<p>The Excel GUI will change that formula to the German version <code>=ANZAHL2(B10:B37)</code> after it had read the en_US formula string from the file storage.</p>\n"}],"owner":{"account_id":10921980,"reputation":77,"user_id":8027961,"display_name":"Josef"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":469,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1671289362,"creation_date":1671195224,"question_id":74824737,"body_markdown":"i generate an excel document with my application.\r\nI try to set a formula like this:\r\n\r\n    cell.setCellFormula(&quot;ANZAHL2(B10:B37&quot;);\r\n\r\nWhat gets generated in my Excel-File is this:\r\n\r\n    =@ANZAHL2(B10:B37)\r\n\r\nWhere does the @-Symbol come from?\r\n\r\nI have other cells where i just sum up different cell-values, and these work just fine\r\n\r\n    cell.setCellFormula(&quot;A5+A10&quot;);\r\n\r\ngives me\r\n \r\n    =(A5+A10)\r\n\r\nI found this thread\r\nhttps://stackoverflow.com/questions/62614172/apache-poi-excel-formula-entering-symbols-where-they-dont-belong\r\nbut the solution provided to put a &#39;_xlfn.&#39; in front of the aggregate-function doesnt work for me.\r\n\r\n    cell.setCellFormula(&quot;_xlfn.ANZAHL2(B10:B37&quot;);\r\n\r\nThanks in advance!","title":"Apache POI Excel Formula entering @ Symbols","body":"<p>i generate an excel document with my application.\nI try to set a formula like this:</p>\n<pre><code>cell.setCellFormula(&quot;ANZAHL2(B10:B37&quot;);\n</code></pre>\n<p>What gets generated in my Excel-File is this:</p>\n<pre><code>=@ANZAHL2(B10:B37)\n</code></pre>\n<p>Where does the @-Symbol come from?</p>\n<p>I have other cells where i just sum up different cell-values, and these work just fine</p>\n<pre><code>cell.setCellFormula(&quot;A5+A10&quot;);\n</code></pre>\n<p>gives me</p>\n<pre><code>=(A5+A10)\n</code></pre>\n<p>I found this thread\n<a href=\"https://stackoverflow.com/questions/62614172/apache-poi-excel-formula-entering-symbols-where-they-dont-belong\">Apache POI Excel Formula entering @ Symbols where they don&#39;t belong</a>\nbut the solution provided to put a '_xlfn.' in front of the aggregate-function doesnt work for me.</p>\n<pre><code>cell.setCellFormula(&quot;_xlfn.ANZAHL2(B10:B37&quot;);\n</code></pre>\n<p>Thanks in advance!</p>\n"},{"tags":["java","android","firebase","firebase-authentication"],"comments":[{"owner":{"account_id":72426,"reputation":573714,"user_id":209103,"accept_rate":73,"display_name":"Frank van Puffelen"},"score":0,"creation_date":1671289258,"post_id":74834669,"comment_id":132069757,"body_markdown":"I tried to answer below, but going forward please read [how to ask a good question](https://stackoverflow.com/help/how-to-ask) and follow the guidance in there. It might also be good to read up on what a [XY problem](http://meta.stackexchange.com/questions/66377/what-is-the-xy-problem) is.","body":"I tried to answer below, but going forward please read <a href=\"https://stackoverflow.com/help/how-to-ask\">how to ask a good question</a> and follow the guidance in there. It might also be good to read up on what a <a href=\"http://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY problem</a> is."}],"answers":[{"tags":[],"owner":{"account_id":72426,"reputation":573714,"user_id":209103,"accept_rate":73,"display_name":"Frank van Puffelen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671289189,"creation_date":1671289189,"answer_id":74835105,"question_id":74834669,"body_markdown":"The UID of a user is determined by the authentication provider. It can&#39;t be set from client-side application code, as that would be a security risk.\r\n\r\nIf you want to determine the UID of your users, you can [implement your own provider](https://firebase.google.com/docs/auth/android/custom-auth). Note that this will include writing code that runs in a trusted environment, such as a server that you control, or Cloud Functions/Cloud Run.\r\n\r\nAlternatively you can implement a mapping from the UID of the user to whatever ID system you want to use in your database.","title":"How to change user.getid in firebase","body":"<p>The UID of a user is determined by the authentication provider. It can't be set from client-side application code, as that would be a security risk.</p>\n<p>If you want to determine the UID of your users, you can <a href=\"https://firebase.google.com/docs/auth/android/custom-auth\" rel=\"nofollow noreferrer\">implement your own provider</a>. Note that this will include writing code that runs in a trusted environment, such as a server that you control, or Cloud Functions/Cloud Run.</p>\n<p>Alternatively you can implement a mapping from the UID of the user to whatever ID system you want to use in your database.</p>\n"}],"owner":{"account_id":25437524,"reputation":13,"user_id":19241020,"display_name":"samer"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1671289189,"creation_date":1671285341,"question_id":74834669,"body_markdown":"  \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n\r\n    public void register(final String username, final String fullname, String email, String password) {\r\n        auth.createUserWithEmailAndPassword(email, password)\r\n            .addOnCompleteListener(RegisterActivity.this, new OnCompleteListener&lt;AuthResult&gt;() {\r\n                @Override\r\n                public void onComplete(@NonNull Task&lt;AuthResult&gt; task) {\r\n                    if (task.isSuccessful()) {\r\n                        pd.show();\r\n                        FirebaseUser firebaseUser = auth.getCurrentUser();\r\n                        String userID =&quot;Queenlab@&quot;+firebaseUser.getUid();\r\n                        //  circleIV.setImageDrawable(drawable2);\r\n\r\n                        reference = FirebaseDatabase.getInstance().getReference().child(&quot;Users&quot;).child(userID);\r\n                        HashMap&lt;String, Object&gt; map = new HashMap&lt;&gt;();\r\n                        map.put(&quot;id&quot;,userID);\r\n                        map.put(&quot;username&quot;, username.toLowerCase());\r\n                        map.put(&quot;fullname&quot;, fullname);\r\n                        map.put(&quot;imageurl&quot;, &quot;https://th.bing.com/th/id/OIP.PXxWJplK9ObsWdxdFCqLOwHaE8?pid=ImgDet&amp;rs=1&quot;);\r\n                        map.put(&quot;bio&quot;, &quot;&quot;);\r\n                        map.put(&quot;instgram&quot;, &quot;&quot;);    \r\n\r\n                        reference.setValue(map).addOnCompleteListener(new OnCompleteListener&lt;Void&gt;() {\r\n                            @Override\r\n                            public void onComplete(@NonNull Task&lt;Void&gt; task) {\r\n                                if (task.isSuccessful()) {\r\n                                    Toast.makeText(RegisterActivity.this, &quot;Register sccessful sending Email Verification&quot;, Toast.LENGTH_SHORT).show();\r\n                                    sendVerificationEmail();\r\n                                    auth.signOut();\r\n                                    Intent intent = new Intent(RegisterActivity.this, LoginActivity.class);\r\n                                    intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TASK | Intent.FLAG_ACTIVITY_NEW_TASK);\r\n                                    startActivity(intent);\r\n                                }\r\n                            }\r\n                        });\r\n                    } else {\r\n                        pd.dismiss();\r\n                        Toast.makeText(RegisterActivity.this, task.getException().getMessage(), Toast.LENGTH_SHORT).show();\r\n                    }\r\n                }\r\n            });\r\n        }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/e8tUJ.jpg\r\n\r\n","title":"How to change user.getid in firebase","body":"<p><a href=\"https://i.stack.imgur.com/e8tUJ.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/e8tUJ.jpg\" alt=\"enter image description here\" /></a></p>\n<pre><code>public void register(final String username, final String fullname, String email, String password) {\n    auth.createUserWithEmailAndPassword(email, password)\n        .addOnCompleteListener(RegisterActivity.this, new OnCompleteListener&lt;AuthResult&gt;() {\n            @Override\n            public void onComplete(@NonNull Task&lt;AuthResult&gt; task) {\n                if (task.isSuccessful()) {\n                    pd.show();\n                    FirebaseUser firebaseUser = auth.getCurrentUser();\n                    String userID =&quot;Queenlab@&quot;+firebaseUser.getUid();\n                    //  circleIV.setImageDrawable(drawable2);\n\n                    reference = FirebaseDatabase.getInstance().getReference().child(&quot;Users&quot;).child(userID);\n                    HashMap&lt;String, Object&gt; map = new HashMap&lt;&gt;();\n                    map.put(&quot;id&quot;,userID);\n                    map.put(&quot;username&quot;, username.toLowerCase());\n                    map.put(&quot;fullname&quot;, fullname);\n                    map.put(&quot;imageurl&quot;, &quot;https://th.bing.com/th/id/OIP.PXxWJplK9ObsWdxdFCqLOwHaE8?pid=ImgDet&amp;rs=1&quot;);\n                    map.put(&quot;bio&quot;, &quot;&quot;);\n                    map.put(&quot;instgram&quot;, &quot;&quot;);    \n\n                    reference.setValue(map).addOnCompleteListener(new OnCompleteListener&lt;Void&gt;() {\n                        @Override\n                        public void onComplete(@NonNull Task&lt;Void&gt; task) {\n                            if (task.isSuccessful()) {\n                                Toast.makeText(RegisterActivity.this, &quot;Register sccessful sending Email Verification&quot;, Toast.LENGTH_SHORT).show();\n                                sendVerificationEmail();\n                                auth.signOut();\n                                Intent intent = new Intent(RegisterActivity.this, LoginActivity.class);\n                                intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TASK | Intent.FLAG_ACTIVITY_NEW_TASK);\n                                startActivity(intent);\n                            }\n                        }\n                    });\n                } else {\n                    pd.dismiss();\n                    Toast.makeText(RegisterActivity.this, task.getException().getMessage(), Toast.LENGTH_SHORT).show();\n                }\n            }\n        });\n    }\n</code></pre>\n"},{"tags":["java","intellij-idea"],"comments":[{"owner":{"account_id":3538058,"reputation":5428,"user_id":2960034,"display_name":"y.bedrov"},"score":0,"creation_date":1671459022,"post_id":74835050,"comment_id":132097259,"body_markdown":"Have you tried &quot;Move to&quot; action under cog wheel in project tool window? To show editor tabs you need to enable them in &quot;Settings/Preferences | Editor | General | Editor Tabs&quot; while you&#39;re in distraction free mode.","body":"Have you tried &quot;Move to&quot; action under cog wheel in project tool window? To show editor tabs you need to enable them in &quot;Settings/Preferences | Editor | General | Editor Tabs&quot; while you&#39;re in distraction free mode."}],"owner":{"account_id":12870550,"reputation":11,"user_id":9309168,"display_name":"Anindra"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":99,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671288757,"creation_date":1671288757,"question_id":74835050,"body_markdown":"Almost every time I use distraction free mode on Intellij, but when I open project tab it&#39;s open always left side and it is distractive. So I want to move it left to right permanently.Example: [![Screenshot when Project tab on right ][1]][1]\r\n Also is there is any way to show tabs in Distraction-free mode? It will me helpful for me. Example: [![Tabs on Intellij IDEA][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Pd9Bn.jpg\r\n  [2]: https://i.stack.imgur.com/s3keR.png","title":"How do I move the project tab to the left or right side of the editor window in IntelliJ IDEA, and how can I show tabs in the Distraction-free mode?","body":"<p>Almost every time I use distraction free mode on Intellij, but when I open project tab it's open always left side and it is distractive. So I want to move it left to right permanently.Example: <a href=\"https://i.stack.imgur.com/Pd9Bn.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Pd9Bn.jpg\" alt=\"Screenshot when Project tab on right \" /></a>\nAlso is there is any way to show tabs in Distraction-free mode? It will me helpful for me. Example: <a href=\"https://i.stack.imgur.com/s3keR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/s3keR.png\" alt=\"Tabs on Intellij IDEA\" /></a></p>\n"},{"tags":["java","android","google-cloud-firestore"],"answers":[{"tags":[],"owner":{"account_id":72426,"reputation":573714,"user_id":209103,"accept_rate":73,"display_name":"Frank van Puffelen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671288661,"creation_date":1671288661,"answer_id":74835039,"question_id":74834782,"body_markdown":"From the Firestore documentation on [query limits](https://firebase.google.com/docs/firestore/query-data/queries#query_limitations):\r\n\r\n&gt; In a compound query, range (`&lt;`, `&lt;=`, `&gt;`, `&gt;=`) and not equals (`!=`, `not-in`) comparisons must all filter on the same field.\r\n\r\nSince `startAt` and `endAt` are jut aliases of `&gt;=` and `&lt;=`, those are also part of this limit.\r\n\r\nSo you won&#39;t be able to filter for `&gt;=` on `timeIn` *and* search the `name` using `startAt`/`endAt`. You can only perform range conditions on one of them, and will have to perform further filtering in your application code.\r\n\r\nIf you want to learn more on why this limit exists, check out episode 2 of [Get to know Cloud Firestore](https://firestore.video) on [How do queries work in Cloud Firestore?](https://www.youtube.com/watch?v=Ofux_4c94FI&amp;list=PLl-K7zZEsYLluG5MCVEzXAQ7ACZBCuZgZ&amp;index=2&amp;t=5s) I also gave an introduction to this in a talk a few years ago on [Querying Firebase and Firestore](https://www.youtube.com/watch?v=mx1mMdHBi5Q).","title":"How to use whereGreaterThanOrEqualTo() for different field and startAt() endAt() for different field at the same time","body":"<p>From the Firestore documentation on <a href=\"https://firebase.google.com/docs/firestore/query-data/queries#query_limitations\" rel=\"nofollow noreferrer\">query limits</a>:</p>\n<blockquote>\n<p>In a compound query, range (<code>&lt;</code>, <code>&lt;=</code>, <code>&gt;</code>, <code>&gt;=</code>) and not equals (<code>!=</code>, <code>not-in</code>) comparisons must all filter on the same field.</p>\n</blockquote>\n<p>Since <code>startAt</code> and <code>endAt</code> are jut aliases of <code>&gt;=</code> and <code>&lt;=</code>, those are also part of this limit.</p>\n<p>So you won't be able to filter for <code>&gt;=</code> on <code>timeIn</code> <em>and</em> search the <code>name</code> using <code>startAt</code>/<code>endAt</code>. You can only perform range conditions on one of them, and will have to perform further filtering in your application code.</p>\n<p>If you want to learn more on why this limit exists, check out episode 2 of <a href=\"https://firestore.video\" rel=\"nofollow noreferrer\">Get to know Cloud Firestore</a> on <a href=\"https://www.youtube.com/watch?v=Ofux_4c94FI&amp;list=PLl-K7zZEsYLluG5MCVEzXAQ7ACZBCuZgZ&amp;index=2&amp;t=5s\" rel=\"nofollow noreferrer\">How do queries work in Cloud Firestore?</a> I also gave an introduction to this in a talk a few years ago on <a href=\"https://www.youtube.com/watch?v=mx1mMdHBi5Q\" rel=\"nofollow noreferrer\">Querying Firebase and Firestore</a>.</p>\n"}],"owner":{"account_id":26090846,"reputation":113,"user_id":19787762,"display_name":"Vince Yba&#241;ez"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1671288661,"creation_date":1671286375,"question_id":74834782,"body_markdown":"I want to filter my user collection based on `timeIn` and `fullName`. For example, I want to get all users that have `timeIn &gt;= today` and search the name of a user using `startAt`, `endAt`.\r\n\r\nThis is what I did but it&#39;s not working:\r\n\r\n    private void load() {\r\n        Query query = db.collection(&quot;Monitoring&quot;);\r\n\r\n        if(!course.isEmpty()){\r\n            query = query.whereEqualTo(&quot;course&quot;, course);\r\n        }\r\n\r\n        if(!year.isEmpty()){\r\n            query = query.whereEqualTo(&quot;year&quot;, year);\r\n        }\r\n\r\n        if(!block.isEmpty()){\r\n            query = query.whereEqualTo(&quot;block&quot;, block);\r\n        }\r\n\r\n        query = query.whereGreaterThanOrEqualTo(&quot;timeIn&quot;, 1671298034).orderBy(&quot;timeIn&quot;);\r\n\r\n        if(selectedToDate != null){\r\n            query = query.whereLessThanOrEqualTo(&quot;timeIn&quot;, selectedToDate);\r\n        }\r\n\r\n        if(!search.isEmpty()){\r\n            query = query.orderBy(&quot;fullName&quot;).startAt(search).endAt(search + &#39;\\uf8ff&#39;);\r\n        }\r\n\r\n        FirestoreRecyclerOptions&lt;Monitoring&gt; options = new FirestoreRecyclerOptions.Builder&lt;Monitoring&gt;()\r\n                .setQuery(query, Monitoring.class)\r\n                .build();\r\n\r\n        Listener listener = new Listener() {\r\n            @Override\r\n            public void setTotal(int total) {\r\n                if(total &gt; 0){\r\n                    tv_noresult.setVisibility(View.INVISIBLE);\r\n                }else{\r\n                    tv_noresult.setVisibility(View.VISIBLE);\r\n                }\r\n                tv_total.setText(String.valueOf(total));\r\n            }\r\n        };\r\n\r\n        attendanceAdapter = new AttendanceAdapter(options, getContext(), listener);\r\n        rv.setAdapter(attendanceAdapter);\r\n        attendanceAdapter.startListening();\r\n    }\r\n\r\n","title":"How to use whereGreaterThanOrEqualTo() for different field and startAt() endAt() for different field at the same time","body":"<p>I want to filter my user collection based on <code>timeIn</code> and <code>fullName</code>. For example, I want to get all users that have <code>timeIn &gt;= today</code> and search the name of a user using <code>startAt</code>, <code>endAt</code>.</p>\n<p>This is what I did but it's not working:</p>\n<pre><code>private void load() {\n    Query query = db.collection(&quot;Monitoring&quot;);\n\n    if(!course.isEmpty()){\n        query = query.whereEqualTo(&quot;course&quot;, course);\n    }\n\n    if(!year.isEmpty()){\n        query = query.whereEqualTo(&quot;year&quot;, year);\n    }\n\n    if(!block.isEmpty()){\n        query = query.whereEqualTo(&quot;block&quot;, block);\n    }\n\n    query = query.whereGreaterThanOrEqualTo(&quot;timeIn&quot;, 1671298034).orderBy(&quot;timeIn&quot;);\n\n    if(selectedToDate != null){\n        query = query.whereLessThanOrEqualTo(&quot;timeIn&quot;, selectedToDate);\n    }\n\n    if(!search.isEmpty()){\n        query = query.orderBy(&quot;fullName&quot;).startAt(search).endAt(search + '\\uf8ff');\n    }\n\n    FirestoreRecyclerOptions&lt;Monitoring&gt; options = new FirestoreRecyclerOptions.Builder&lt;Monitoring&gt;()\n            .setQuery(query, Monitoring.class)\n            .build();\n\n    Listener listener = new Listener() {\n        @Override\n        public void setTotal(int total) {\n            if(total &gt; 0){\n                tv_noresult.setVisibility(View.INVISIBLE);\n            }else{\n                tv_noresult.setVisibility(View.VISIBLE);\n            }\n            tv_total.setText(String.valueOf(total));\n        }\n    };\n\n    attendanceAdapter = new AttendanceAdapter(options, getContext(), listener);\n    rv.setAdapter(attendanceAdapter);\n    attendanceAdapter.startListening();\n}\n</code></pre>\n"},{"tags":["java","cordova","plugins"],"owner":{"account_id":6965032,"reputation":99,"user_id":6937460,"display_name":"Guilherme Lirio"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":164,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1671288500,"creation_date":1663011150,"question_id":73694404,"body_markdown":"I created a plugin in cordova to open a new activity with a predetermined URL, which is working perfectly.\r\n\r\nBut I wanted to create a command to be able to close it, but I&#39;m not able to.\r\n\r\nWhen I use the **AbrirHTML.close()** function, nothing happens.\r\n\r\nHow do I resolve this?\r\n\r\n***AbrirHTML.js***\r\n\r\n    var exec = require(&#39;cordova/exec&#39;);\r\n    \r\n    function plugin() {\r\n    \r\n    }\r\n    \r\n    plugin.prototype.open = function (params) {\r\n        exec(function (res) {\r\n            console.log(&#39;params&#39;, params)\r\n            console.log(&#39;res&#39;, res);\r\n        }, function (err) {\r\n            console.log(err);\r\n        }, &quot;AbrirHTML&quot;, &quot;open&quot;, [params]);\r\n    }\r\n    \r\n    plugin.prototype.close = function (params) {\r\n        exec(function (res) {\r\n            console.log(&#39;res&#39;, res);\r\n        }, function (err) {\r\n            console.log(err);\r\n        }, &quot;AbrirHTML&quot;, &quot;close&quot;, null);\r\n    \r\n    }\r\n    \r\n    module.exports = new plugin();\r\n\r\n***plugin.xml***\r\n\r\n    &lt;?xml version=&#39;1.0&#39; encoding=&#39;utf-8&#39;?&gt;\r\n    &lt;plugin id=&quot;com.actionsistemas.abrirhtml&quot; version=&quot;0.0.1&quot; xmlns=&quot;http://apache.org/cordova/ns/plugins/1.0&quot; xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\r\n        &lt;name&gt;AbrirHTML&lt;/name&gt;\r\n        &lt;js-module name=&quot;AbrirHTML&quot; src=&quot;www/AbrirHTML.js&quot;&gt;\r\n            &lt;clobbers target=&quot;AbrirHTML&quot; /&gt;\r\n        &lt;/js-module&gt;\r\n        &lt;platform name=&quot;android&quot;&gt;\r\n            &lt;config-file parent=&quot;/*&quot; target=&quot;res/xml/config.xml&quot;&gt;\r\n                &lt;feature name=&quot;AbrirHTML&quot;&gt;\r\n                    &lt;param name=&quot;android-package&quot; value=&quot;com.actionsistemas.abrirhtml.AbrirHTML&quot; /&gt;\r\n                &lt;/feature&gt;\r\n            &lt;/config-file&gt;\r\n            &lt;config-file target=&quot;AndroidManifest.xml&quot; parent=&quot;/manifest/application&quot;&gt;\r\n                &lt;activity android:label=&quot;Menu&quot; android:name=&quot;com.actionsistemas.abrirhtml.NewActivity&quot; android:theme=&quot;@style/Theme.Transparent&quot;&gt;&lt;/activity&gt;\r\n            &lt;/config-file&gt;\r\n            &lt;config-file parent=&quot;/*&quot; target=&quot;AndroidManifest.xml&quot;&gt;&lt;/config-file&gt;\r\n            &lt;source-file src=&quot;src/android/AbrirHTML.java&quot; target-dir=&quot;src/com/actionsistemas/abrirhtml&quot; /&gt;\r\n            &lt;source-file src=&quot;src/android/NewActivity.java&quot; target-dir=&quot;src/com/actionsistemas/abrirhtml&quot; /&gt;\r\n            &lt;source-file src=&quot;src/android/activity_new.xml&quot; target-dir=&quot;res/layout&quot;/&gt;\r\n        &lt;/platform&gt;\r\n    &lt;/plugin&gt;\r\n\r\n***AbrirHTML.java***\r\n\r\n    package com.actionsistemas.abrirhtml;\r\n    \r\n    import android.content.Context;\r\n    import android.content.Intent;\r\n    import android.util.Log;\r\n    \r\n    import org.apache.cordova.CordovaPlugin;\r\n    import org.apache.cordova.CallbackContext;\r\n    import org.apache.cordova.CordovaWebView;\r\n    import org.apache.cordova.CordovaInterface;\r\n    \r\n    import org.json.JSONArray;\r\n    import org.json.JSONException;\r\n    import org.json.JSONObject;\r\n    \r\n    public class AbrirHTML extends CordovaPlugin {\r\n    \r\n        public void initialize(CordovaInterface cordova, CordovaWebView webView) {\r\n            super.initialize(cordova, webView);\r\n        }\r\n    \r\n        @Override\r\n        public boolean execute(String action, JSONArray args, CallbackContext callbackContext) throws JSONException {\r\n            Context context = cordova.getActivity().getApplicationContext();\r\n            if(action.equals(&quot;open&quot;)) {\r\n                String url = args.getString(0);\r\n                Log.e(&quot;*** URL ***&quot;, url);\r\n                this.openNewActivity(context, url);\r\n                return true;\r\n            } else if(action.equals(&quot;close&quot;)){\r\n                this.closeNewActivity(context);\r\n                return true;\r\n            }\r\n            return false;\r\n        }\r\n    \r\n        private void openNewActivity(Context context, String url) {\r\n            Intent intent = new Intent(context, NewActivity.class);\r\n            intent.putExtra(&quot;url&quot;, url);\r\n            this.cordova.getActivity().startActivity(intent);\r\n        }\r\n    \r\n        private void closeNewActivity(Context context) {\r\n            //Intent intent = new Intent(context, NewActivity.class);\r\n            this.cordova.getActivity().finish();\r\n        }\r\n    }\r\n\r\n\r\n***NewActivity.java***\r\n\r\n    package com.actionsistemas.abrirhtml;\r\n    \r\n    import android.app.Activity;\r\n    import android.content.Intent;\r\n    import android.os.Bundle;\r\n    import android.webkit.WebSettings;\r\n    import android.webkit.WebView;\r\n    import android.util.Log;\r\n    \r\n    public class NewActivity extends Activity {\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            String package_name = getApplication().getPackageName();\r\n            Intent intent = getIntent();\r\n            String html = intent.getStringExtra(&quot;url&quot;);\r\n            Log.e(&quot;*** HTML ***&quot;, html);\r\n            setContentView(getApplication().getResources().getIdentifier(&quot;activity_new&quot;, &quot;layout&quot;, package_name));\r\n            WebView webView = (WebView) findViewById(getApplication().getResources().getIdentifier(&quot;web1&quot;, &quot;id&quot;, package_name));  \r\n            WebSettings settings = webView.getSettings();\r\n            settings.setSupportMultipleWindows(true);\r\n            settings.setJavaScriptCanOpenWindowsAutomatically(false);\r\n            settings.setAllowFileAccessFromFileURLs(true);\r\n            settings.setAllowUniversalAccessFromFileURLs(true);\r\n            settings.setJavaScriptEnabled(true);\r\n            settings.setDomStorageEnabled(true);\r\n            settings.setCacheMode(2);\r\n            webView.clearCache(true);\r\n            webView.setBackgroundColor(0);\r\n    \t\twebView.setLayerType(WebView.LAYER_TYPE_SOFTWARE, null);\r\n            //webView.loadUrl(&quot;file:///android_asset/www/menu.html&quot;);\r\n            webView.loadUrl(html);\r\n        }\r\n    \r\n        @Override\r\n        public void onDestroy() {\r\n            super.onDestroy();\r\n            String package_name = getApplication().getPackageName();\r\n            WebView webView = (WebView) findViewById(getApplication().getResources().getIdentifier(&quot;web1&quot;, &quot;id&quot;, package_name));  \r\n            webView.destroy();\r\n        }\r\n    }","title":"Close a new Activity in Cordova Plugin","body":"<p>I created a plugin in cordova to open a new activity with a predetermined URL, which is working perfectly.</p>\n<p>But I wanted to create a command to be able to close it, but I'm not able to.</p>\n<p>When I use the <strong>AbrirHTML.close()</strong> function, nothing happens.</p>\n<p>How do I resolve this?</p>\n<p><em><strong>AbrirHTML.js</strong></em></p>\n<pre><code>var exec = require('cordova/exec');\n\nfunction plugin() {\n\n}\n\nplugin.prototype.open = function (params) {\n    exec(function (res) {\n        console.log('params', params)\n        console.log('res', res);\n    }, function (err) {\n        console.log(err);\n    }, &quot;AbrirHTML&quot;, &quot;open&quot;, [params]);\n}\n\nplugin.prototype.close = function (params) {\n    exec(function (res) {\n        console.log('res', res);\n    }, function (err) {\n        console.log(err);\n    }, &quot;AbrirHTML&quot;, &quot;close&quot;, null);\n\n}\n\nmodule.exports = new plugin();\n</code></pre>\n<p><em><strong>plugin.xml</strong></em></p>\n<pre><code>&lt;?xml version='1.0' encoding='utf-8'?&gt;\n&lt;plugin id=&quot;com.actionsistemas.abrirhtml&quot; version=&quot;0.0.1&quot; xmlns=&quot;http://apache.org/cordova/ns/plugins/1.0&quot; xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\n    &lt;name&gt;AbrirHTML&lt;/name&gt;\n    &lt;js-module name=&quot;AbrirHTML&quot; src=&quot;www/AbrirHTML.js&quot;&gt;\n        &lt;clobbers target=&quot;AbrirHTML&quot; /&gt;\n    &lt;/js-module&gt;\n    &lt;platform name=&quot;android&quot;&gt;\n        &lt;config-file parent=&quot;/*&quot; target=&quot;res/xml/config.xml&quot;&gt;\n            &lt;feature name=&quot;AbrirHTML&quot;&gt;\n                &lt;param name=&quot;android-package&quot; value=&quot;com.actionsistemas.abrirhtml.AbrirHTML&quot; /&gt;\n            &lt;/feature&gt;\n        &lt;/config-file&gt;\n        &lt;config-file target=&quot;AndroidManifest.xml&quot; parent=&quot;/manifest/application&quot;&gt;\n            &lt;activity android:label=&quot;Menu&quot; android:name=&quot;com.actionsistemas.abrirhtml.NewActivity&quot; android:theme=&quot;@style/Theme.Transparent&quot;&gt;&lt;/activity&gt;\n        &lt;/config-file&gt;\n        &lt;config-file parent=&quot;/*&quot; target=&quot;AndroidManifest.xml&quot;&gt;&lt;/config-file&gt;\n        &lt;source-file src=&quot;src/android/AbrirHTML.java&quot; target-dir=&quot;src/com/actionsistemas/abrirhtml&quot; /&gt;\n        &lt;source-file src=&quot;src/android/NewActivity.java&quot; target-dir=&quot;src/com/actionsistemas/abrirhtml&quot; /&gt;\n        &lt;source-file src=&quot;src/android/activity_new.xml&quot; target-dir=&quot;res/layout&quot;/&gt;\n    &lt;/platform&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p><em><strong>AbrirHTML.java</strong></em></p>\n<pre><code>package com.actionsistemas.abrirhtml;\n\nimport android.content.Context;\nimport android.content.Intent;\nimport android.util.Log;\n\nimport org.apache.cordova.CordovaPlugin;\nimport org.apache.cordova.CallbackContext;\nimport org.apache.cordova.CordovaWebView;\nimport org.apache.cordova.CordovaInterface;\n\nimport org.json.JSONArray;\nimport org.json.JSONException;\nimport org.json.JSONObject;\n\npublic class AbrirHTML extends CordovaPlugin {\n\n    public void initialize(CordovaInterface cordova, CordovaWebView webView) {\n        super.initialize(cordova, webView);\n    }\n\n    @Override\n    public boolean execute(String action, JSONArray args, CallbackContext callbackContext) throws JSONException {\n        Context context = cordova.getActivity().getApplicationContext();\n        if(action.equals(&quot;open&quot;)) {\n            String url = args.getString(0);\n            Log.e(&quot;*** URL ***&quot;, url);\n            this.openNewActivity(context, url);\n            return true;\n        } else if(action.equals(&quot;close&quot;)){\n            this.closeNewActivity(context);\n            return true;\n        }\n        return false;\n    }\n\n    private void openNewActivity(Context context, String url) {\n        Intent intent = new Intent(context, NewActivity.class);\n        intent.putExtra(&quot;url&quot;, url);\n        this.cordova.getActivity().startActivity(intent);\n    }\n\n    private void closeNewActivity(Context context) {\n        //Intent intent = new Intent(context, NewActivity.class);\n        this.cordova.getActivity().finish();\n    }\n}\n</code></pre>\n<p><em><strong>NewActivity.java</strong></em></p>\n<pre><code>package com.actionsistemas.abrirhtml;\n\nimport android.app.Activity;\nimport android.content.Intent;\nimport android.os.Bundle;\nimport android.webkit.WebSettings;\nimport android.webkit.WebView;\nimport android.util.Log;\n\npublic class NewActivity extends Activity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        String package_name = getApplication().getPackageName();\n        Intent intent = getIntent();\n        String html = intent.getStringExtra(&quot;url&quot;);\n        Log.e(&quot;*** HTML ***&quot;, html);\n        setContentView(getApplication().getResources().getIdentifier(&quot;activity_new&quot;, &quot;layout&quot;, package_name));\n        WebView webView = (WebView) findViewById(getApplication().getResources().getIdentifier(&quot;web1&quot;, &quot;id&quot;, package_name));  \n        WebSettings settings = webView.getSettings();\n        settings.setSupportMultipleWindows(true);\n        settings.setJavaScriptCanOpenWindowsAutomatically(false);\n        settings.setAllowFileAccessFromFileURLs(true);\n        settings.setAllowUniversalAccessFromFileURLs(true);\n        settings.setJavaScriptEnabled(true);\n        settings.setDomStorageEnabled(true);\n        settings.setCacheMode(2);\n        webView.clearCache(true);\n        webView.setBackgroundColor(0);\n        webView.setLayerType(WebView.LAYER_TYPE_SOFTWARE, null);\n        //webView.loadUrl(&quot;file:///android_asset/www/menu.html&quot;);\n        webView.loadUrl(html);\n    }\n\n    @Override\n    public void onDestroy() {\n        super.onDestroy();\n        String package_name = getApplication().getPackageName();\n        WebView webView = (WebView) findViewById(getApplication().getResources().getIdentifier(&quot;web1&quot;, &quot;id&quot;, package_name));  \n        webView.destroy();\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","sockets","spring-integration-ip"],"owner":{"account_id":1871818,"reputation":705,"user_id":1693871,"accept_rate":23,"display_name":"pincoin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":135,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671288071,"creation_date":1671287613,"question_id":74834917,"body_markdown":"I am now making TCP socket server using Spring boot integration ip.\r\n\r\n\r\n```java\r\npublic AbstractServerConnectionFactory serverConnectionFactory() {\r\n    TcpNioServerConnectionFactory serverConnectionFactory = new TcpNioServerConnectionFactory(port);\r\n    serverConnectionFactory.setUsingDirectBuffers(true);\r\n    serverConnectionFactory.setSoTcpNoDelay(true);\r\n    serverConnectionFactory.setSoKeepAlive(true);\r\n    serverConnectionFactory.setSoTimeout(5);\r\n    serverConnectionFactory.setSingleUse(false);\r\n\r\n\r\n    // I use ByteArrayStxEtxSerializer provided by Spring boot.\r\n    serverConnectionFactory.setSerializer(SERIALIZER);\r\n    serverConnectionFactory.setDeserializer(SERIALIZER);\r\n\r\n    return serverConnectionFactory;\r\n}\r\n```\r\n\r\nMy test client code is like this:\r\n\r\n```\r\nSocket sock = new Socket(&quot;127.0.0.1&quot;, 8081);\r\n\r\nOutputStream os = new BufferedOutputStream(sock.getOutputStream());\r\nBufferedReader br = new BufferedReader(new InputStreamReader(sock.getInputStream()));\r\n\r\nByteArrayOutputStream baos = new ByteArrayOutputStream();\r\n\r\nbaos.write(0x02); // STX\r\nbaos.write(0x41); // A\r\nbaos.write(0x03); // ETX\r\n\r\nSystem.out.println(Arrays.toString(baos.toByteArray()));\r\nos.write(baos.toByteArray());\r\nos.flush();\r\n\r\nString line = null;\r\n\r\nwhile ((line = br.readLine()) != null) {\r\n    System.out.println(&quot;from server: &quot; + line);\r\n}\r\n\r\nos.close();\r\nbr.close();\r\nsock.close();\r\n```\r\n\r\nIn order to flush output stream into client, I need to set `setSingleUse(true)` or `setSoTimeout(n)`. Otherwise, it blocks for a while.\r\n\r\n\r\nI read the following from the official document:\r\n\r\n&gt; An outbound TCP gateway is provided. It allows for simple\r\n&gt; request-response processing. If the associated connection factory is\r\n&gt; configured for single-use connections, a new connection is immediately\r\n&gt; created for each new request. Otherwise, if the connection is in use,\r\n&gt; the calling thread blocks on the connection until either a response is\r\n&gt; received or a timeout or I/O error occurs.\r\n\r\nI think my test client waits until timeout for about 2 minutes if I don&#39;t set `single-use` or `timeout`.\r\n\r\nHow can I force the server to flush output stream into socket instead of `single-use` or `timeout`?\r\n\r\nThank you.","title":"spring boot integration ip (tcp) force flush in order to respond","body":"<p>I am now making TCP socket server using Spring boot integration ip.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public AbstractServerConnectionFactory serverConnectionFactory() {\n    TcpNioServerConnectionFactory serverConnectionFactory = new TcpNioServerConnectionFactory(port);\n    serverConnectionFactory.setUsingDirectBuffers(true);\n    serverConnectionFactory.setSoTcpNoDelay(true);\n    serverConnectionFactory.setSoKeepAlive(true);\n    serverConnectionFactory.setSoTimeout(5);\n    serverConnectionFactory.setSingleUse(false);\n\n\n    // I use ByteArrayStxEtxSerializer provided by Spring boot.\n    serverConnectionFactory.setSerializer(SERIALIZER);\n    serverConnectionFactory.setDeserializer(SERIALIZER);\n\n    return serverConnectionFactory;\n}\n</code></pre>\n<p>My test client code is like this:</p>\n<pre><code>Socket sock = new Socket(&quot;127.0.0.1&quot;, 8081);\n\nOutputStream os = new BufferedOutputStream(sock.getOutputStream());\nBufferedReader br = new BufferedReader(new InputStreamReader(sock.getInputStream()));\n\nByteArrayOutputStream baos = new ByteArrayOutputStream();\n\nbaos.write(0x02); // STX\nbaos.write(0x41); // A\nbaos.write(0x03); // ETX\n\nSystem.out.println(Arrays.toString(baos.toByteArray()));\nos.write(baos.toByteArray());\nos.flush();\n\nString line = null;\n\nwhile ((line = br.readLine()) != null) {\n    System.out.println(&quot;from server: &quot; + line);\n}\n\nos.close();\nbr.close();\nsock.close();\n</code></pre>\n<p>In order to flush output stream into client, I need to set <code>setSingleUse(true)</code> or <code>setSoTimeout(n)</code>. Otherwise, it blocks for a while.</p>\n<p>I read the following from the official document:</p>\n<blockquote>\n<p>An outbound TCP gateway is provided. It allows for simple\nrequest-response processing. If the associated connection factory is\nconfigured for single-use connections, a new connection is immediately\ncreated for each new request. Otherwise, if the connection is in use,\nthe calling thread blocks on the connection until either a response is\nreceived or a timeout or I/O error occurs.</p>\n</blockquote>\n<p>I think my test client waits until timeout for about 2 minutes if I don't set <code>single-use</code> or <code>timeout</code>.</p>\n<p>How can I force the server to flush output stream into socket instead of <code>single-use</code> or <code>timeout</code>?</p>\n<p>Thank you.</p>\n"},{"tags":["java","netbeans","type-hinting"],"owner":{"account_id":25825820,"reputation":1,"user_id":19563966,"display_name":"Big Roma"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":16,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1671287999,"answer_count":0,"score":0,"last_activity_date":1671287916,"creation_date":1671287898,"question_id":74834951,"body_markdown":"[enter image description here](https://i.stack.imgur.com/iIkhT.png)\r\n\r\n\r\n\r\nI don&#39;t know if this happens in other situations besides StringBuilder, I don&#39;t remember. But it&#39;s pretty annoying that little gray text that says &quot;str:&quot;.\r\nI don&#39;t know if it&#39;s some kind of hint, but I&#39;d like to know how to disable it.\r\n\r\nI have tried to solve it in &quot;Tools - Options - Editor - Hints&quot; turning different options on and off, but I have not managed to disable it yet\r\n\r\n","title":"How to disable little text &quot;str:&quot; hints on NetBeans 16?","body":"<p><a href=\"https://i.stack.imgur.com/iIkhT.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>I don't know if this happens in other situations besides StringBuilder, I don't remember. But it's pretty annoying that little gray text that says &quot;str:&quot;.\nI don't know if it's some kind of hint, but I'd like to know how to disable it.</p>\n<p>I have tried to solve it in &quot;Tools - Options - Editor - Hints&quot; turning different options on and off, but I have not managed to disable it yet</p>\n"},{"tags":["java","fibonacci"],"comments":[{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1671264886,"post_id":74832492,"comment_id":132065994,"body_markdown":"What happens if you print `y` instead of `x`?","body":"What happens if you print <code>y</code> instead of <code>x</code>?"},{"owner":{"account_id":3212023,"reputation":1016,"user_id":17856705,"display_name":"Computable"},"score":1,"creation_date":1671271042,"post_id":74832492,"comment_id":132066725,"body_markdown":"Your issue is one of semantics. The common Fibonacci number sequence (F) is 0,1,1,2,3,5,8,13... and the *`nth`* Fibonacci number is F(n) = F(n-1)+F(n-2) with F(0) = 0 and F(1) = 1. So your prompt is requesting **`n`** and so F(7) does indeed = 13. Your code produces the correct answer. Also, &quot;when I enter 1, it shows 0&quot;; this is not true: your code produces 1 when 1 is entered.  This is what I get when i enter &quot;0&quot;, &quot;1&quot;, &quot;2&quot;, &quot;3&quot;, etc... `0 1 1 2 3 5&quot; which is correct.  [Reference](https://oeis.org/search?q=fibonacci&amp;language=english&amp;go=Search)","body":"Your issue is one of semantics. The common Fibonacci number sequence (F) is 0,1,1,2,3,5,8,13... and the <i><code>nth</code></i> Fibonacci number is F(n) = F(n-1)+F(n-2) with F(0) = 0 and F(1) = 1. So your prompt is requesting <b><code>n</code></b> and so F(7) does indeed = 13. Your code produces the correct answer. Also, &quot;when I enter 1, it shows 0&quot;; this is not true: your code produces 1 when 1 is entered.  This is what I get when i enter &quot;0&quot;, &quot;1&quot;, &quot;2&quot;, &quot;3&quot;, etc... `0 1 1 2 3 5&quot; which is correct.  <a href=\"https://oeis.org/search?q=fibonacci&amp;language=english&amp;go=Search\" rel=\"nofollow noreferrer\">Reference</a>"}],"answers":[{"tags":[],"owner":{"account_id":27279765,"reputation":22,"user_id":20799830,"display_name":"Spandan Chakrabarty"},"down_vote_count":2,"up_vote_count":1,"is_accepted":true,"score":-1,"last_activity_date":1671263217,"creation_date":1671263217,"answer_id":74832543,"question_id":74832492,"body_markdown":"you will have to change the for condition to i &lt;= n-1 and make a separate condition for when it is the first term.\r\nFibonacci series is 1 1 2 3 5 8 13\r\nbut according to your code it is taking it as 1 2 3 5 8 13 ","title":"Java code shows wrong Fibonacci number in Fibonacci sequence","body":"<p>you will have to change the for condition to i &lt;= n-1 and make a separate condition for when it is the first term.\nFibonacci series is 1 1 2 3 5 8 13\nbut according to your code it is taking it as 1 2 3 5 8 13</p>\n"},{"tags":[],"owner":{"account_id":21760253,"reputation":9,"user_id":16064924,"display_name":"0x0"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1671263280,"creation_date":1671263280,"answer_id":74832548,"question_id":74832492,"body_markdown":"Try this\r\n\r\n    Scanner input = new Scanner(System.in);\r\n    System.out.print(&quot;In: &quot;);\r\n    int n = input.nextInt();\r\n    \r\n    int x = 0;\r\n    int y = 1;\r\n    int a;\r\n    \r\n    for (int i = 1; i &lt;= n; i++) {\r\n      a = x + y;\r\n      x = y;\r\n      y = a;\r\n    }\r\n    System.out.print(x + &quot; &quot;);\r\n\r\n","title":"Java code shows wrong Fibonacci number in Fibonacci sequence","body":"<p>Try this</p>\n<pre><code>Scanner input = new Scanner(System.in);\nSystem.out.print(&quot;In: &quot;);\nint n = input.nextInt();\n\nint x = 0;\nint y = 1;\nint a;\n\nfor (int i = 1; i &lt;= n; i++) {\n  a = x + y;\n  x = y;\n  y = a;\n}\nSystem.out.print(x + &quot; &quot;);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14744999,"reputation":1,"user_id":10648626,"display_name":"Kim Kahler"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671266463,"creation_date":1671266463,"answer_id":74832796,"question_id":74832492,"body_markdown":"Spandan is correct, if you modify your code to the below you will get the correct response all the way from 1 and up...\r\n\r\nNote: \r\n1. The loop now iterates only as long as i&lt;n which removes the unwanted result. \r\n\r\n2. The loop though will never produce the first number in the sequence (zero) as the first iteration can not be lower than one. For that reason I have added the print of X before the loop runs the first time. \r\n\r\nI hope this helps :)\r\n\r\n\r\n    import java.util.Scanner;\r\n    \r\n    public class Fibonacci {\r\n      public static void main(String[] args) {\r\n        Scanner input = new Scanner(System.in);\r\n        System.out.print(&quot;Enter the number of terms: &quot;);\r\n        int n = input.nextInt();\r\n    \r\n        int x = 0;\r\n        int y = 1;\r\n        int a;\r\n    \r\n        System.out.print(&quot;Fibonacci sequence: &quot;);\r\n        System.out.print(x + &quot; &quot;);\r\n         \r\n        for (int i = 1; i &lt; n; i++) {\r\n          a = x + y;\r\n          x = y;\r\n          y = a;\r\n          System.out.print(x + &quot; &quot;);\r\n        }\r\n      }\r\n    }","title":"Java code shows wrong Fibonacci number in Fibonacci sequence","body":"<p>Spandan is correct, if you modify your code to the below you will get the correct response all the way from 1 and up...</p>\n<p>Note:</p>\n<ol>\n<li><p>The loop now iterates only as long as i&lt;n which removes the unwanted result.</p>\n</li>\n<li><p>The loop though will never produce the first number in the sequence (zero) as the first iteration can not be lower than one. For that reason I have added the print of X before the loop runs the first time.</p>\n</li>\n</ol>\n<p>I hope this helps :)</p>\n<pre><code>import java.util.Scanner;\n\npublic class Fibonacci {\n  public static void main(String[] args) {\n    Scanner input = new Scanner(System.in);\n    System.out.print(&quot;Enter the number of terms: &quot;);\n    int n = input.nextInt();\n\n    int x = 0;\n    int y = 1;\n    int a;\n\n    System.out.print(&quot;Fibonacci sequence: &quot;);\n    System.out.print(x + &quot; &quot;);\n     \n    for (int i = 1; i &lt; n; i++) {\n      a = x + y;\n      x = y;\n      y = a;\n      System.out.print(x + &quot; &quot;);\n    }\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":23713806,"reputation":45,"user_id":17735273,"display_name":"Johannes"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":127,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":74832543,"answer_count":3,"score":-2,"last_activity_date":1671287420,"creation_date":1671262562,"question_id":74832492,"body_markdown":"Im trying to make a Java code that displays the nth number in the Fibonacci sequence. For example if i put in 7, the code should show the number 8 since the 7th number in the Fibonacci sequence is 8.\r\n\r\nBut when I tried to make one, it shows the wrong number. For some reason, when i enter 7 it shows 13, and when I enter 1, it shows a 1 although I already stated that the first number is 0 in the code.\r\n\r\n    Scanner input = new Scanner(System.in);\r\n    System.out.print(“In: ”);\r\n    int n = input.nextInt();\r\n\r\n    int x = 0;\r\n    int y = 1;\r\n    int a;\r\n    \r\n    for (int i = 1; i &lt;= n; i++) {\r\n      a = x + y;\r\n      x = y;\r\n      y = a;\r\n    }\r\n    System.out.print(x + &quot; &quot;);\r\n\r\nI think the code for some reason ignores the first 0 which I dint understand. I would love some help, thank you.","title":"Java code shows wrong Fibonacci number in Fibonacci sequence","body":"<p>Im trying to make a Java code that displays the nth number in the Fibonacci sequence. For example if i put in 7, the code should show the number 8 since the 7th number in the Fibonacci sequence is 8.</p>\n<p>But when I tried to make one, it shows the wrong number. For some reason, when i enter 7 it shows 13, and when I enter 1, it shows a 1 although I already stated that the first number is 0 in the code.</p>\n<pre><code>Scanner input = new Scanner(System.in);\nSystem.out.print(“In: ”);\nint n = input.nextInt();\n\nint x = 0;\nint y = 1;\nint a;\n\nfor (int i = 1; i &lt;= n; i++) {\n  a = x + y;\n  x = y;\n  y = a;\n}\nSystem.out.print(x + &quot; &quot;);\n</code></pre>\n<p>I think the code for some reason ignores the first 0 which I dint understand. I would love some help, thank you.</p>\n"},{"tags":["java","maven","intellij-idea","maven-dependency"],"answers":[{"tags":[],"owner":{"account_id":27226326,"reputation":43,"user_id":20754780,"display_name":"tsavaph"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1671287158,"creation_date":1670955525,"answer_id":74789308,"question_id":74785253,"body_markdown":"I solved it by,\r\n1) In intellij, `File -&gt; Project Structure -&gt; Project Settings -&gt; Libraries`\r\n2) Select all libraries and delete it\r\n3) Then &quot;Maven - Reload All Maven Projects&quot;","title":"Could not find artifact org.thymeleaf.extras:thymeleaf-extras-springsecurity:pom","body":"<p>I solved it by,</p>\n<ol>\n<li>In intellij, <code>File -&gt; Project Structure -&gt; Project Settings -&gt; Libraries</code></li>\n<li>Select all libraries and delete it</li>\n<li>Then &quot;Maven - Reload All Maven Projects&quot;</li>\n</ol>\n"}],"owner":{"account_id":27226326,"reputation":43,"user_id":20754780,"display_name":"tsavaph"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1303,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74789308,"answer_count":1,"score":0,"last_activity_date":1671287158,"creation_date":1670936285,"question_id":74785253,"body_markdown":"I am trying to get the dependency `thymeleaf-extras-springsecurity5` and it is red and cannot be found with an error\r\n\r\n&gt; Could not find artifact org.thymeleaf.extras:thymeleaf-extras-springsecurity:pom:unknown in central (https://repo.maven.apache.org/maven2)\r\n\r\nWhat I do wrong? I use IntelliJ IDEA 2022.3 (Community Edition).\r\n\r\nHere is my pom:\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n   xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n   &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n   &lt;parent&gt;\r\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n      &lt;version&gt;3.0.0&lt;/version&gt;\r\n      &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n   &lt;/parent&gt;\r\n   &lt;groupId&gt;ru&lt;/groupId&gt;\r\n   &lt;artifactId&gt;sandwich-cloud&lt;/artifactId&gt;\r\n   &lt;version&gt;0.0.5-SNAPSHOT&lt;/version&gt;\r\n   &lt;name&gt;sandwich-cloud&lt;/name&gt;\r\n   &lt;description&gt;Sandwich Cloud Pet Project&lt;/description&gt;\r\n   &lt;properties&gt;\r\n      &lt;java.version&gt;17&lt;/java.version&gt;\r\n   &lt;/properties&gt;\r\n   &lt;dependencies&gt;\r\n      &lt;dependency&gt;\r\n         &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n         &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\r\n      &lt;/dependency&gt;\r\n      &lt;dependency&gt;\r\n         &lt;groupId&gt;org.thymeleaf.extras&lt;/groupId&gt;\r\n         &lt;artifactId&gt;thymeleaf-extras-springsecurity5&lt;/artifactId&gt;\r\n      &lt;/dependency&gt;\r\n      &lt;dependency&gt;\r\n         &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n         &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n      &lt;/dependency&gt;\r\n      &lt;dependency&gt;\r\n         &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n         &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n         &lt;scope&gt;runtime&lt;/scope&gt;\r\n         &lt;optional&gt;true&lt;/optional&gt;\r\n      &lt;/dependency&gt;\r\n      &lt;dependency&gt;\r\n         &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n         &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n         &lt;optional&gt;true&lt;/optional&gt;\r\n      &lt;/dependency&gt;\r\n      &lt;dependency&gt;\r\n         &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n         &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n         &lt;scope&gt;test&lt;/scope&gt;\r\n      &lt;/dependency&gt;\r\n      &lt;dependency&gt;\r\n         &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n         &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\r\n      &lt;/dependency&gt;\r\n      &lt;dependency&gt;\r\n         &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n         &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\r\n         &lt;scope&gt;test&lt;/scope&gt;\r\n      &lt;/dependency&gt;\r\n      &lt;dependency&gt;\r\n         &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n         &lt;artifactId&gt;htmlunit-driver&lt;/artifactId&gt;\r\n         &lt;scope&gt;test&lt;/scope&gt;\r\n      &lt;/dependency&gt;\r\n      &lt;dependency&gt;\r\n         &lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n         &lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n         &lt;scope&gt;runtime&lt;/scope&gt;\r\n      &lt;/dependency&gt;\r\n      &lt;dependency&gt;\r\n         &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n         &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n      &lt;/dependency&gt;\r\n      &lt;dependency&gt;\r\n         &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n         &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n      &lt;/dependency&gt;\r\n   &lt;/dependencies&gt;\r\n\r\n   &lt;build&gt;\r\n      &lt;plugins&gt;\r\n         &lt;plugin&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n            &lt;configuration&gt;\r\n               &lt;excludes&gt;\r\n                  &lt;exclude&gt;\r\n                     &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n                     &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n                  &lt;/exclude&gt;\r\n               &lt;/excludes&gt;\r\n            &lt;/configuration&gt;\r\n         &lt;/plugin&gt;\r\n      &lt;/plugins&gt;\r\n   &lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```","title":"Could not find artifact org.thymeleaf.extras:thymeleaf-extras-springsecurity:pom","body":"<p>I am trying to get the dependency <code>thymeleaf-extras-springsecurity5</code> and it is red and cannot be found with an error</p>\n<blockquote>\n<p>Could not find artifact org.thymeleaf.extras:thymeleaf-extras-springsecurity:pom:unknown in central (<a href=\"https://repo.maven.apache.org/maven2\" rel=\"nofollow noreferrer\">https://repo.maven.apache.org/maven2</a>)</p>\n</blockquote>\n<p>What I do wrong? I use IntelliJ IDEA 2022.3 (Community Edition).</p>\n<p>Here is my pom:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n   xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n   &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n   &lt;parent&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n      &lt;version&gt;3.0.0&lt;/version&gt;\n      &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n   &lt;/parent&gt;\n   &lt;groupId&gt;ru&lt;/groupId&gt;\n   &lt;artifactId&gt;sandwich-cloud&lt;/artifactId&gt;\n   &lt;version&gt;0.0.5-SNAPSHOT&lt;/version&gt;\n   &lt;name&gt;sandwich-cloud&lt;/name&gt;\n   &lt;description&gt;Sandwich Cloud Pet Project&lt;/description&gt;\n   &lt;properties&gt;\n      &lt;java.version&gt;17&lt;/java.version&gt;\n   &lt;/properties&gt;\n   &lt;dependencies&gt;\n      &lt;dependency&gt;\n         &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n         &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\n      &lt;/dependency&gt;\n      &lt;dependency&gt;\n         &lt;groupId&gt;org.thymeleaf.extras&lt;/groupId&gt;\n         &lt;artifactId&gt;thymeleaf-extras-springsecurity5&lt;/artifactId&gt;\n      &lt;/dependency&gt;\n      &lt;dependency&gt;\n         &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n         &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n      &lt;/dependency&gt;\n      &lt;dependency&gt;\n         &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n         &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n         &lt;scope&gt;runtime&lt;/scope&gt;\n         &lt;optional&gt;true&lt;/optional&gt;\n      &lt;/dependency&gt;\n      &lt;dependency&gt;\n         &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n         &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n         &lt;optional&gt;true&lt;/optional&gt;\n      &lt;/dependency&gt;\n      &lt;dependency&gt;\n         &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n         &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n         &lt;scope&gt;test&lt;/scope&gt;\n      &lt;/dependency&gt;\n      &lt;dependency&gt;\n         &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n         &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n      &lt;/dependency&gt;\n      &lt;dependency&gt;\n         &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n         &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\n         &lt;scope&gt;test&lt;/scope&gt;\n      &lt;/dependency&gt;\n      &lt;dependency&gt;\n         &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n         &lt;artifactId&gt;htmlunit-driver&lt;/artifactId&gt;\n         &lt;scope&gt;test&lt;/scope&gt;\n      &lt;/dependency&gt;\n      &lt;dependency&gt;\n         &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n         &lt;artifactId&gt;h2&lt;/artifactId&gt;\n         &lt;scope&gt;runtime&lt;/scope&gt;\n      &lt;/dependency&gt;\n      &lt;dependency&gt;\n         &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n         &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n      &lt;/dependency&gt;\n      &lt;dependency&gt;\n         &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n         &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n      &lt;/dependency&gt;\n   &lt;/dependencies&gt;\n\n   &lt;build&gt;\n      &lt;plugins&gt;\n         &lt;plugin&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;configuration&gt;\n               &lt;excludes&gt;\n                  &lt;exclude&gt;\n                     &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                     &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                  &lt;/exclude&gt;\n               &lt;/excludes&gt;\n            &lt;/configuration&gt;\n         &lt;/plugin&gt;\n      &lt;/plugins&gt;\n   &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n"},{"tags":["java","spring-boot","unit-testing","kotlin","mockito"],"comments":[{"owner":{"account_id":13385928,"reputation":1,"user_id":9659828,"display_name":"Anurag Parothia"},"score":0,"creation_date":1671287471,"post_id":74834763,"comment_id":132069420,"body_markdown":"@ArvindKumarAvinash still the same issue presists\nParameter specified as non-null is null, mean the mockito response is null","body":"@ArvindKumarAvinash still the same issue presists Parameter specified as non-null is null, mean the mockito response is null"},{"owner":{"account_id":88165,"reputation":1499,"user_id":244051,"display_name":"Erik Finnman"},"score":0,"creation_date":1672137627,"post_id":74834763,"comment_id":132226877,"body_markdown":"Have you tried adding the Kotlin module to the objectMapper: `objectMapper.registerKotlinModule()`?","body":"Have you tried adding the Kotlin module to the objectMapper: <code>objectMapper.registerKotlinModule()</code>?"},{"owner":{"account_id":13385928,"reputation":1,"user_id":9659828,"display_name":"Anurag Parothia"},"score":0,"creation_date":1672640541,"post_id":74834763,"comment_id":132316746,"body_markdown":"yes but that is also giving same response.","body":"yes but that is also giving same response."}],"owner":{"account_id":13385928,"reputation":1,"user_id":9659828,"display_name":"Anurag Parothia"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":80,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671286228,"creation_date":1671286228,"question_id":74834763,"body_markdown":"Mockito response is null after adding ZonedDateTime module by registerModule..\r\nThis is the test I am writing... \r\n\r\n\r\n\r\n```\r\n@PostMapping(&quot;/bankStatement&quot;)\r\nfun getBankStatementList(@Valid @RequestBody request: GenericRequest&lt;BankStatementRequestDTO&gt;): ResponseEntity&lt;ResponseDTO&gt; {\r\n    return createSuccessResponse(bankStatementService.getBankStatementList(request.data))\r\n}\r\n```\r\n\r\n\r\n```\r\n\r\nfun getBankStatementListSuccess() {\r\n    val DEFAULT_DATE:ZonedDateTime  = ZonedDateTime.ofInstant(Instant.ofEpochMilli(0L), ZoneOffset.UTC);\r\n    val request = GenericRequest(\r\n        BankStatementRequestDTO(\r\n            10,\r\n            1,\r\n            &quot;&quot;,\r\n            emptyList(),\r\n            DEFAULT_DATE,\r\n            DEFAULT_DATE,\r\n            &quot;03b3238c-66bb-4a4a-b205-4a9e8231b420&quot;\r\n        )\r\n    )\r\n    val response =\r\n        BankStatementListResponseDTO(\r\n            listOf(\r\n                BankStatementResponseDTO(\r\n                    &quot;XXX123&quot;,\r\n                    &quot;CREDIT&quot;,\r\n                    &quot;upi-123213&quot;,\r\n                    &quot;03b3238c-66bb-4a4a-b205-4a9e8231b420&quot;,\r\n                    &quot;UPI&quot;,\r\n                    BigDecimal(1234),\r\n                    &quot;remarks&quot;,\r\n                    DEFAULT_DATE,\r\n                    DEFAULT_DATE,\r\n                    &quot;CLAIMED&quot;,\r\n                    &quot;COIN12345678900&quot;\r\n                )\r\n            ),\r\n            1\r\n        )\r\n\r\n    Mockito.`when`(bankStatementService.getBankStatementList(request.data)).thenReturn(response)\r\n    val objectMapper = jacksonObjectMapper()\r\n    objectMapper.registerModule(JavaTimeModule())\r\n    mvc.perform(\r\n        MockMvcRequestBuilders\r\n            .post(&quot;/api/v1/bankStatement&quot;)\r\n            .accept(MediaType.APPLICATION_JSON)\r\n            .contentType(MediaType.APPLICATION_JSON)\r\n            .content(objectMapper.writeValueAsString(request))\r\n    ).andExpect(MockMvcResultMatchers.status().isOk)\r\n        .andExpect(MockMvcResultMatchers.content().contentType(MediaType.APPLICATION_JSON))\r\n}\r\n```\r\n\r\n\r\nThe Error\r\n\r\n```\r\nRequest processing failed; nested exception is java.lang.NullPointerException: Parameter specified as non-null is null: method com.coinomerelaunch.brokeradminbackend.shared.dto.ResponseAdapterKt.createSuccessResponse, parameter dto\r\norg.springframework.web.util.NestedServletException: Request processing failed; nested exception is java.lang.NullPointerException: Parameter specified as non-null is null: method com.coinomerelaunch.brokeradminbackend.shared.dto.ResponseAdapterKt.createSuccessResponse, parameter dto\r\n\tat app//org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\r\n```\r\n\r\n\r\n\r\n\r\nWhen I am using Date instead of ZonedDateTime test works..\r\nafter adding ZonedDate ..I have to add library\r\n\r\n```\r\nimplementation(&quot;com.fasterxml.jackson.datatype:jackson-datatype-jsr310:2.9.5&quot;)\r\n\r\n```\r\n\r\nalso added these lines\r\n\r\n\r\n```\r\nval objectMapper = jacksonObjectMapper()\r\n    objectMapper.registerModule(JavaTimeModule())\r\n```\r\n```\r\ncontent(objectMapper.writeValueAsString(request))\r\n```\r\n but not works\r\n\r\nSomeone please help me why the mockito response is not getting mocked when I add the jackson library ..or Im missing something\r\n\r\n","title":"Mockito response is null after adding ZonedDateTime module by registerModule","body":"<p>Mockito response is null after adding ZonedDateTime module by registerModule..\nThis is the test I am writing...</p>\n<pre><code>@PostMapping(&quot;/bankStatement&quot;)\nfun getBankStatementList(@Valid @RequestBody request: GenericRequest&lt;BankStatementRequestDTO&gt;): ResponseEntity&lt;ResponseDTO&gt; {\n    return createSuccessResponse(bankStatementService.getBankStatementList(request.data))\n}\n</code></pre>\n<pre><code>\nfun getBankStatementListSuccess() {\n    val DEFAULT_DATE:ZonedDateTime  = ZonedDateTime.ofInstant(Instant.ofEpochMilli(0L), ZoneOffset.UTC);\n    val request = GenericRequest(\n        BankStatementRequestDTO(\n            10,\n            1,\n            &quot;&quot;,\n            emptyList(),\n            DEFAULT_DATE,\n            DEFAULT_DATE,\n            &quot;03b3238c-66bb-4a4a-b205-4a9e8231b420&quot;\n        )\n    )\n    val response =\n        BankStatementListResponseDTO(\n            listOf(\n                BankStatementResponseDTO(\n                    &quot;XXX123&quot;,\n                    &quot;CREDIT&quot;,\n                    &quot;upi-123213&quot;,\n                    &quot;03b3238c-66bb-4a4a-b205-4a9e8231b420&quot;,\n                    &quot;UPI&quot;,\n                    BigDecimal(1234),\n                    &quot;remarks&quot;,\n                    DEFAULT_DATE,\n                    DEFAULT_DATE,\n                    &quot;CLAIMED&quot;,\n                    &quot;COIN12345678900&quot;\n                )\n            ),\n            1\n        )\n\n    Mockito.`when`(bankStatementService.getBankStatementList(request.data)).thenReturn(response)\n    val objectMapper = jacksonObjectMapper()\n    objectMapper.registerModule(JavaTimeModule())\n    mvc.perform(\n        MockMvcRequestBuilders\n            .post(&quot;/api/v1/bankStatement&quot;)\n            .accept(MediaType.APPLICATION_JSON)\n            .contentType(MediaType.APPLICATION_JSON)\n            .content(objectMapper.writeValueAsString(request))\n    ).andExpect(MockMvcResultMatchers.status().isOk)\n        .andExpect(MockMvcResultMatchers.content().contentType(MediaType.APPLICATION_JSON))\n}\n</code></pre>\n<p>The Error</p>\n<pre><code>Request processing failed; nested exception is java.lang.NullPointerException: Parameter specified as non-null is null: method com.coinomerelaunch.brokeradminbackend.shared.dto.ResponseAdapterKt.createSuccessResponse, parameter dto\norg.springframework.web.util.NestedServletException: Request processing failed; nested exception is java.lang.NullPointerException: Parameter specified as non-null is null: method com.coinomerelaunch.brokeradminbackend.shared.dto.ResponseAdapterKt.createSuccessResponse, parameter dto\n    at app//org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\n</code></pre>\n<p>When I am using Date instead of ZonedDateTime test works..\nafter adding ZonedDate ..I have to add library</p>\n<pre><code>implementation(&quot;com.fasterxml.jackson.datatype:jackson-datatype-jsr310:2.9.5&quot;)\n\n</code></pre>\n<p>also added these lines</p>\n<pre><code>val objectMapper = jacksonObjectMapper()\n    objectMapper.registerModule(JavaTimeModule())\n</code></pre>\n<pre><code>content(objectMapper.writeValueAsString(request))\n</code></pre>\n<p>but not works</p>\n<p>Someone please help me why the mockito response is not getting mocked when I add the jackson library ..or Im missing something</p>\n"},{"tags":["java","eclipse","tomcat"],"comments":[{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1671288538,"post_id":74834719,"comment_id":132069626,"body_markdown":"The problem view shows errors you have to fix first. In your `pom.xml` the Java version is missing, so the Maven default Java 5 is used, but Tomcat 10 requires Java 8 or higher. Does in your `pom.xml` adding `&lt;properties&gt;&lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;&lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;&lt;/properties&gt;` fix it?","body":"The problem view shows errors you have to fix first. In your <code>pom.xml</code> the Java version is missing, so the Maven default Java 5 is used, but Tomcat 10 requires Java 8 or higher. Does in your <code>pom.xml</code> adding <code>&lt;properties&gt;&lt;maven.compiler.source&gt;17&lt;&#47;maven.compiler.source&zwnj;&#8203;&gt;&lt;maven.compiler.tar&zwnj;&#8203;get&gt;17&lt;&#47;maven.compil&zwnj;&#8203;er.target&gt;&lt;&#47;properti&zwnj;&#8203;es&gt;</code> fix it?"},{"owner":{"account_id":13796,"reputation":19353,"user_id":27905,"display_name":"nitind"},"score":0,"creation_date":1671529497,"post_id":74834719,"comment_id":132113678,"body_markdown":"What&#39;s in its `.project` file?","body":"What&#39;s in its <code>.project</code> file?"}],"owner":{"account_id":20892011,"reputation":99,"user_id":15347191,"display_name":"Nguyen Cuc"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671285770,"creation_date":1671285770,"question_id":74834719,"body_markdown":"I am coding java with eclipse and here is my problem.\r\n\r\nI added Tomcat v10.0 to my Project successfully and as you can see in this picture\r\n\r\n[![Added Tomcat][1]][1]\r\n\r\n\r\nBut my problem is, I do not see the &quot;Run on Server&quot; when I clicked to the &quot;Run As&quot; ? As you can see in this picture ?\r\n\r\n[![my problem][2]][2]\r\n\r\nI think that when I added the Tomcat successfully, the Tomcat must appeared at &quot;Run As&quot; ?\r\n\r\n  [1]: https://i.stack.imgur.com/giFMI.png\r\n  [2]: https://i.stack.imgur.com/SchsV.png\r\n\r\nCould you please give me some advice ? Thank you in advance.","title":"Eclipse &#39;s &quot;Run as&quot; does not auto add &quot;Run on Server&quot; even to I added the Tomcat server to the Project?","body":"<p>I am coding java with eclipse and here is my problem.</p>\n<p>I added Tomcat v10.0 to my Project successfully and as you can see in this picture</p>\n<p><a href=\"https://i.stack.imgur.com/giFMI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/giFMI.png\" alt=\"Added Tomcat\" /></a></p>\n<p>But my problem is, I do not see the &quot;Run on Server&quot; when I clicked to the &quot;Run As&quot; ? As you can see in this picture ?</p>\n<p><a href=\"https://i.stack.imgur.com/SchsV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SchsV.png\" alt=\"my problem\" /></a></p>\n<p>I think that when I added the Tomcat successfully, the Tomcat must appeared at &quot;Run As&quot; ?</p>\n<p>Could you please give me some advice ? Thank you in advance.</p>\n"},{"tags":["java","spring","spring-boot","kotlin","azure-active-directory"],"comments":[{"owner":{"display_name":"user9578963"},"score":0,"creation_date":1671288575,"post_id":74834378,"comment_id":132069633,"body_markdown":"I followed this guide from microsoft (protect a resource server/api)[https://learn.microsoft.com/en-us/azure/developer/java/spring-framework/spring-boot-starter-for-azure-active-directory-developer-guide#protect-a-resource-serverapi].  Remember to provide a valid jwt, using the client as audience.","body":"I followed this guide from microsoft (protect a resource server/api)[<a href=\"https://learn.microsoft.com/en-us/azure/developer/java/spring-framework/spring-boot-starter-for-azure-active-directory-developer-guide#protect-a-resource-serverapi]\" rel=\"nofollow noreferrer\">learn.microsoft.com/en-us/azure/developer/java/s&zwnj;&#8203;pring-framework/&hellip;</a>.  Remember to provide a valid jwt, using the client as audience."},{"owner":{"account_id":22839070,"reputation":51,"user_id":17081102,"display_name":"PlaeschZ"},"score":0,"creation_date":1671309581,"post_id":74834378,"comment_id":132073537,"body_markdown":"@meridsa thanks, i have create a fresh spring boot project. with just a Controller returning &quot;Hello&quot; and the application.yml as shown in the docs you have postet. But iI am getting 401 error","body":"@meridsa thanks, i have create a fresh spring boot project. with just a Controller returning &quot;Hello&quot; and the application.yml as shown in the docs you have postet. But iI am getting 401 error"},{"owner":{"account_id":7844807,"reputation":584,"user_id":5930227,"accept_rate":50,"display_name":"Emmanuel Ogoma"},"score":0,"creation_date":1692631468,"post_id":74834378,"comment_id":135646538,"body_markdown":"Have you gotten any help with this, I am also getting 401 error, with log message Failed to authenticate since the JWT was invalid. I can confirm that the token is still valid","body":"Have you gotten any help with this, I am also getting 401 error, with log message Failed to authenticate since the JWT was invalid. I can confirm that the token is still valid"}],"owner":{"account_id":22839070,"reputation":51,"user_id":17081102,"display_name":"PlaeschZ"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1244,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1671285542,"creation_date":1671282880,"question_id":74834378,"body_markdown":"I am running into an issue and asking for any help. \r\nI got a react app running and there I log in with the oidc azure ad. I am getting all information I wanted as well as a jwt.\r\n\r\nNow I want my frontend to call routes on my spring boot backend. That&#39;s why I decided that my backend is a resource server. And here I want to validate the provided JWT. \r\nAs soon as I do a request I got the following error:\r\n\r\n&gt; Failed to lazily resolve the supplied JwtDecoder instance\r\n\r\n&gt; Unable to resolve the Configuration with the provided Issuer of\r\n&gt; &quot;https://login.microsoftonline.com/3d1f9219-b455-xxxx-xxxx-xxxxxxxxxxxx/wsfed&quot;\r\n\r\nI think that my issuer-uri is wrong. But I cannot find a solution for this. \r\nHere is my filterChain method:\r\n\r\n    @Bean\r\n    open fun filterChain(http: HttpSecurity) : SecurityFilterChain{\r\n        http\r\n            .authorizeHttpRequests{\r\n                authorize -&gt; authorize.antMatchers(&quot;/**&quot;).hasAnyAuthority(&quot;SCOPE_user.read&quot;)\r\n                .anyRequest().authenticated()\r\n            }\r\n            .oauth2ResourceServer{\r\n                oauth2 -&gt; oauth2.jwt(Customizer.withDefaults())\r\n            }\r\n        return http.build()\r\n    }\r\n\r\nand thats my application.yml\r\n\r\n \r\n\r\n    spring:\r\n        security:\r\n            oauth2:\r\n              resourceserver:\r\n                jwt:\r\n                  issuer-uri: https://login.microsoftonline.com/3d1f9219-b455-xxxx-xxxx-xxxxxxxxxxxx/wsfed\r\n\r\nI&#39;ve already tried other issuer-uris like\r\nhttps://login.microsoftonline.com/common/discovery/keys\r\nhttps://login.microsoftonline.com/{tenant_id}/discovery/keys?appid={client_id} \r\n\r\nbut without success.\r\n\r\nI know this is kotlin but I am fine with java too.\r\n\r\n\r\nEDIT:\r\n\r\nI&#39;ve changed the issuer-uri to:\r\nhttps://login.microsoftonline.com/{tenant-id}/v2.0\r\n\r\nBut now I am facing 401 Unauthorized http error\r\n\r\n\r\n\r\n","title":"Spring boot ressource server with azure ad","body":"<p>I am running into an issue and asking for any help.\nI got a react app running and there I log in with the oidc azure ad. I am getting all information I wanted as well as a jwt.</p>\n<p>Now I want my frontend to call routes on my spring boot backend. That's why I decided that my backend is a resource server. And here I want to validate the provided JWT.\nAs soon as I do a request I got the following error:</p>\n<blockquote>\n<p>Failed to lazily resolve the supplied JwtDecoder instance</p>\n</blockquote>\n<blockquote>\n<p>Unable to resolve the Configuration with the provided Issuer of\n&quot;https://login.microsoftonline.com/3d1f9219-b455-xxxx-xxxx-xxxxxxxxxxxx/wsfed&quot;</p>\n</blockquote>\n<p>I think that my issuer-uri is wrong. But I cannot find a solution for this.\nHere is my filterChain method:</p>\n<pre><code>@Bean\nopen fun filterChain(http: HttpSecurity) : SecurityFilterChain{\n    http\n        .authorizeHttpRequests{\n            authorize -&gt; authorize.antMatchers(&quot;/**&quot;).hasAnyAuthority(&quot;SCOPE_user.read&quot;)\n            .anyRequest().authenticated()\n        }\n        .oauth2ResourceServer{\n            oauth2 -&gt; oauth2.jwt(Customizer.withDefaults())\n        }\n    return http.build()\n}\n</code></pre>\n<p>and thats my application.yml</p>\n<pre><code>spring:\n    security:\n        oauth2:\n          resourceserver:\n            jwt:\n              issuer-uri: https://login.microsoftonline.com/3d1f9219-b455-xxxx-xxxx-xxxxxxxxxxxx/wsfed\n</code></pre>\n<p>I've already tried other issuer-uris like\n<a href=\"https://login.microsoftonline.com/common/discovery/keys\" rel=\"nofollow noreferrer\">https://login.microsoftonline.com/common/discovery/keys</a>\n<a href=\"https://login.microsoftonline.com/%7Btenant_id%7D/discovery/keys?appid=%7Bclient_id%7D\" rel=\"nofollow noreferrer\">https://login.microsoftonline.com/{tenant_id}/discovery/keys?appid={client_id}</a></p>\n<p>but without success.</p>\n<p>I know this is kotlin but I am fine with java too.</p>\n<p>EDIT:</p>\n<p>I've changed the issuer-uri to:\n<a href=\"https://login.microsoftonline.com/%7Btenant-id%7D/v2.0\" rel=\"nofollow noreferrer\">https://login.microsoftonline.com/{tenant-id}/v2.0</a></p>\n<p>But now I am facing 401 Unauthorized http error</p>\n"},{"tags":["java","smartsheet-api","smartsheet-api-2.0","smartsheet-java-sdk-v2"],"owner":{"account_id":23214420,"reputation":1,"user_id":17307493,"display_name":"DiKiyBimer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671285053,"creation_date":1671284811,"question_id":74834609,"body_markdown":"I have a not big, but unsolvable for me problem. My Java code connects with smartsheet, and reads a list of sheets at folder (by folder id), next, it copies from folder ony sheets (leaving reports and dashboards), changing name of sheets and paste them at another folder. I&#39;m using Correto 17.\r\n\r\nHow can I change a value of cell at any sheet by code. I need change only 1 cell for each running code, so it not should be a genius loop. I want to understand the basics of this.\r\n\r\nBelow I added 2 classes at part after copying and renaming. Everything is working perfect before I trying to change cell. If it will help: cell is unlocked, valueType text_number, not a formula, just text, but in sheet are other cells with values, they are with formulas / they are locked).\r\n\r\nI can read a value at cell but can&#39;t set it.\r\n\r\n```\r\npublic void projectFolderCreate(String projectID_Value) throws SmartsheetException {\r\n\r\n Smartsheet smartsheet = SmartsheetFactory.createDefaultClient(API);\r\n System.out.println(&quot;Folder working. Loading folder: &quot; + getFolderID());\r\n\r\n Folder workFolder = smartsheet.folderResources().getFolder(getFolderID(), null);\r\n\r\nfor (var element : workFolder.getSheets()) {\r\n\r\nSystem.out.println(element.getId());\r\nContainerDestination containerDestination = new ContainerDestination().setDestinationType(DestinationType.FOLDER).setDestinationId(8775808614459268L).setNewName(element.getName().replace(&quot;Project_Name&quot;, projectID_Value));\r\nSheet sheet = smartsheet.sheetResources().copySheet(element.getId(),containerDestination,EnumSet.of(SheetCopyInclusion.DATA,SheetCopyInclusion.CELLLINKS));\r\nif (sheet.getName().endsWith(&quot;Metadata&quot;)) {\r\nSheet newSheet = smartsheet.sheetResources().getSheet(sheet.getId(),null,null,null,null,null,null,null); \r\nlong newSheetId = newSheet.getId(); \r\nSystem.out.println(&quot;ID of the New Sheet : &quot; + newSheetId); \r\nColumn projIDcolumn = newSheet.getColumns().get(1); \r\nSystem.out.println(projIDcolumn.getTitle()); \r\nRow firstRow = newSheet.getRows().get(2); \r\nfirstRow.getCells().get(2).setValue(new CellDataItem().setObjectValue(projectID_Value)); \r\nfirstRow.getColumnByIndex(projIDcolumn.getIndex()); \r\nCell s = newSheet.getRows().get(2).getCells().get(1).setDisplayValue(projectID_Value); \r\n}System.out.println(sheet.getName() + &quot; was created&quot;);\r\n}\r\n}\r\n```\r\n\r\n```\r\nProjectFolderWorking(String projectID) throws SQLException, SmartsheetException {     \r\nString folderID;\r\nLikeAWall law = new LikeAWall(1);\r\nDataBase db = new DataBase(law.getPickDB());\r\ndb.setApi();\r\nSmartIM smartIM = new SmartIM(db.getApi());\r\nfolderID = String.valueOf(SmartIM.getFolderID());\r\nSystem.out.println(&quot;FolderID: &quot; + folderID);\r\nsetProjectID(projectID);\r\nsmartIM.projectFolderCreate(getProjectID());\r\n}\r\n```\r\n\r\nI&#39;m sure that linking to variable was good, because I tried getters, but setters of this aren&#39;t working but compiling without any exceptions / errors / bugs / problems and of coarse result.\r\n\r\nBelow are the methods I tried.\r\n```\r\nsmartsheet.sheetResources().getSheet(sheet.getId(),null,null,null,null,null,null,null).getRows().get(2).getCells().set(1,null);\r\nsmartsheet.sheetResources().getSheet(sheet.getId(),null,null,null,null,null,null,null).getRows().get(2).getCells().get(1).setDisplayValue(projectID_Value)\r\nsmartsheet.sheetResources().getSheet(sheet.getId(),null,null,null,null,null,null,null).getRows().get(2).getCells().get(1).setValue(projectID_Value.toString) / and getBytes() \r\nsmartsheet.sheetResources().getSheet(sheet.getId(),null,null,null,null,null,null,null).getRows().get(2).getCells().get(1).setObjectValue()\r\n```\r\nThis is didn&#39;t make sense, but I just broke. I tried do every above with parts as:\r\n```\r\nSheet sh = lallalalla;\r\nColumn s = sh.lalallalala;\r\nRows w = sh.lalallala;\r\nCell = w.getCells().get(lalallaa);\r\n```","title":"Changing cells in sheet using Java and Smartsheet API","body":"<p>I have a not big, but unsolvable for me problem. My Java code connects with smartsheet, and reads a list of sheets at folder (by folder id), next, it copies from folder ony sheets (leaving reports and dashboards), changing name of sheets and paste them at another folder. I'm using Correto 17.</p>\n<p>How can I change a value of cell at any sheet by code. I need change only 1 cell for each running code, so it not should be a genius loop. I want to understand the basics of this.</p>\n<p>Below I added 2 classes at part after copying and renaming. Everything is working perfect before I trying to change cell. If it will help: cell is unlocked, valueType text_number, not a formula, just text, but in sheet are other cells with values, they are with formulas / they are locked).</p>\n<p>I can read a value at cell but can't set it.</p>\n<pre><code>public void projectFolderCreate(String projectID_Value) throws SmartsheetException {\n\n Smartsheet smartsheet = SmartsheetFactory.createDefaultClient(API);\n System.out.println(&quot;Folder working. Loading folder: &quot; + getFolderID());\n\n Folder workFolder = smartsheet.folderResources().getFolder(getFolderID(), null);\n\nfor (var element : workFolder.getSheets()) {\n\nSystem.out.println(element.getId());\nContainerDestination containerDestination = new ContainerDestination().setDestinationType(DestinationType.FOLDER).setDestinationId(8775808614459268L).setNewName(element.getName().replace(&quot;Project_Name&quot;, projectID_Value));\nSheet sheet = smartsheet.sheetResources().copySheet(element.getId(),containerDestination,EnumSet.of(SheetCopyInclusion.DATA,SheetCopyInclusion.CELLLINKS));\nif (sheet.getName().endsWith(&quot;Metadata&quot;)) {\nSheet newSheet = smartsheet.sheetResources().getSheet(sheet.getId(),null,null,null,null,null,null,null); \nlong newSheetId = newSheet.getId(); \nSystem.out.println(&quot;ID of the New Sheet : &quot; + newSheetId); \nColumn projIDcolumn = newSheet.getColumns().get(1); \nSystem.out.println(projIDcolumn.getTitle()); \nRow firstRow = newSheet.getRows().get(2); \nfirstRow.getCells().get(2).setValue(new CellDataItem().setObjectValue(projectID_Value)); \nfirstRow.getColumnByIndex(projIDcolumn.getIndex()); \nCell s = newSheet.getRows().get(2).getCells().get(1).setDisplayValue(projectID_Value); \n}System.out.println(sheet.getName() + &quot; was created&quot;);\n}\n}\n</code></pre>\n<pre><code>ProjectFolderWorking(String projectID) throws SQLException, SmartsheetException {     \nString folderID;\nLikeAWall law = new LikeAWall(1);\nDataBase db = new DataBase(law.getPickDB());\ndb.setApi();\nSmartIM smartIM = new SmartIM(db.getApi());\nfolderID = String.valueOf(SmartIM.getFolderID());\nSystem.out.println(&quot;FolderID: &quot; + folderID);\nsetProjectID(projectID);\nsmartIM.projectFolderCreate(getProjectID());\n}\n</code></pre>\n<p>I'm sure that linking to variable was good, because I tried getters, but setters of this aren't working but compiling without any exceptions / errors / bugs / problems and of coarse result.</p>\n<p>Below are the methods I tried.</p>\n<pre><code>smartsheet.sheetResources().getSheet(sheet.getId(),null,null,null,null,null,null,null).getRows().get(2).getCells().set(1,null);\nsmartsheet.sheetResources().getSheet(sheet.getId(),null,null,null,null,null,null,null).getRows().get(2).getCells().get(1).setDisplayValue(projectID_Value)\nsmartsheet.sheetResources().getSheet(sheet.getId(),null,null,null,null,null,null,null).getRows().get(2).getCells().get(1).setValue(projectID_Value.toString) / and getBytes() \nsmartsheet.sheetResources().getSheet(sheet.getId(),null,null,null,null,null,null,null).getRows().get(2).getCells().get(1).setObjectValue()\n</code></pre>\n<p>This is didn't make sense, but I just broke. I tried do every above with parts as:</p>\n<pre><code>Sheet sh = lallalalla;\nColumn s = sh.lalallalala;\nRows w = sh.lalallala;\nCell = w.getCells().get(lalallaa);\n</code></pre>\n"},{"tags":["java","eclipse","selenium","iframe","automation"],"comments":[{"owner":{"account_id":13920126,"reputation":1489,"user_id":10050775,"display_name":"Jaky Ruby"},"score":0,"creation_date":1671284965,"post_id":74834590,"comment_id":132068907,"body_markdown":"If I search the xpath `//iframe[@id=&#39;gdpr-consent-notice&#39;]` I do not find anything in that page. Is your xpath correct? Are you sure url is correct? Because I do not see any popup. What is the error you are getting in your console?","body":"If I search the xpath <code>&#47;&#47;iframe[@id=&#39;gdpr-consent-notice&#39;]</code> I do not find anything in that page. Is your xpath correct? Are you sure url is correct? Because I do not see any popup. What is the error you are getting in your console?"},{"owner":{"account_id":10404380,"reputation":2588,"user_id":7671727,"display_name":"AbiSaran"},"score":0,"creation_date":1671285110,"post_id":74834590,"comment_id":132068932,"body_markdown":"No such element with id - &#39;gdpr-consent-notice&#39;, is the URL correct?","body":"No such element with id - &#39;gdpr-consent-notice&#39;, is the URL correct?"},{"owner":{"account_id":15895519,"reputation":1,"user_id":11469404,"display_name":"Nik"},"score":0,"creation_date":1671385291,"post_id":74834590,"comment_id":132083505,"body_markdown":"hello, thanks for helping out. I just tried again, the owner of the page must have done some changes. I did not change anything in my code and now it started working. The same code that I was trying to debug for days before I asked it here. I do see a popup - when running the automation it&#39;s there all the time, I have also now seen that after I deleted cookies, one tab did not show the popup, so I opened a new tab - and that one did. I don&#39;t understand this...","body":"hello, thanks for helping out. I just tried again, the owner of the page must have done some changes. I did not change anything in my code and now it started working. The same code that I was trying to debug for days before I asked it here. I do see a popup - when running the automation it&#39;s there all the time, I have also now seen that after I deleted cookies, one tab did not show the popup, so I opened a new tab - and that one did. I don&#39;t understand this..."}],"owner":{"account_id":15895519,"reputation":1,"user_id":11469404,"display_name":"Nik"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671284678,"creation_date":1671284678,"question_id":74834590,"body_markdown":"I am trying to accept the GDPR Consent window via Selenium (Java), which is placed in an iframe. I understood from the lecture and forums that I have to first switch to that frame (which I did) and then click on the button. However, nothing happens.\r\nCan anyone please help?Thanks\r\n\r\n\r\n```\r\nimport java.time.Duration;\r\n\r\nimport org.openqa.selenium.By;\r\nimport org.openqa.selenium.WebDriver;\r\nimport org.openqa.selenium.WebElement;\r\nimport org.openqa.selenium.chrome.ChromeDriver;\r\n\r\npublic class GDPRiframe {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\t// TODO Auto-generated method stub\r\n\t\t\r\n\t\tSystem.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;/Users/DDD/WebDrivers/chromedriver&quot;);\r\n\r\n\t\tWebDriver driver = new ChromeDriver();\r\n\t\t\r\n\t\tdriver.get(&quot;http://demo.guru99.com/test/&quot;);\r\n\r\n\t\tdriver.manage().timeouts().implicitlyWait(Duration.ofSeconds(5));\r\n\t\t\r\n\t\tWebElement frameelement = driver.findElement(By.xpath(&quot;//iframe[@id=&#39;gdpr-consent-notice&#39;]&quot;));\r\n\r\n\t\tdriver.switchTo().frame(frameelement);\r\n\t\t\t\r\n\t\tdriver.findElement(By.xpath(&quot;//button[@id=&#39;save&#39;]&quot;)).click();\t\r\n\t\t\r\n\t\t\r\n\r\n\t}\r\n\r\n}\r\n```\r\n\r\n\r\n- Verified the css of the object via console, if there is no issue with that - appears to be ok. Also, I tried to click on a link within the frame, also not working. Seems as if I was not switched to the frame. \r\n\r\nThanks","title":"Picking element in iframe using Selenium Java / not able to accept GDPR consent window via automation","body":"<p>I am trying to accept the GDPR Consent window via Selenium (Java), which is placed in an iframe. I understood from the lecture and forums that I have to first switch to that frame (which I did) and then click on the button. However, nothing happens.\nCan anyone please help?Thanks</p>\n<pre><code>import java.time.Duration;\n\nimport org.openqa.selenium.By;\nimport org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.WebElement;\nimport org.openqa.selenium.chrome.ChromeDriver;\n\npublic class GDPRiframe {\n\n    public static void main(String[] args) {\n        // TODO Auto-generated method stub\n        \n        System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;/Users/DDD/WebDrivers/chromedriver&quot;);\n\n        WebDriver driver = new ChromeDriver();\n        \n        driver.get(&quot;http://demo.guru99.com/test/&quot;);\n\n        driver.manage().timeouts().implicitlyWait(Duration.ofSeconds(5));\n        \n        WebElement frameelement = driver.findElement(By.xpath(&quot;//iframe[@id='gdpr-consent-notice']&quot;));\n\n        driver.switchTo().frame(frameelement);\n            \n        driver.findElement(By.xpath(&quot;//button[@id='save']&quot;)).click();   \n        \n        \n\n    }\n\n}\n</code></pre>\n<ul>\n<li>Verified the css of the object via console, if there is no issue with that - appears to be ok. Also, I tried to click on a link within the frame, also not working. Seems as if I was not switched to the frame.</li>\n</ul>\n<p>Thanks</p>\n"},{"tags":["java","spring","spring-boot","spring-security-oauth2"],"owner":{"account_id":11641898,"reputation":25,"user_id":8526032,"display_name":"ketaki"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":165,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671284315,"creation_date":1671284315,"question_id":74834553,"body_markdown":"I am using Google SSO in my Spring Boot Application. Used this thread for same.\r\n&lt;https://stackoverflow.com/questions/12195225/step-by-step-google-sso-java&gt;\r\n\r\n1. I am using HttpClient to call first google endpoint to get the google sign in - where user can add google creadentials.\r\n2. It gets redirected to the redirect_url configuration set, which in turn calls my Controller \\login, where I get the code returned by google api, there I send another api call to get access_token\r\n3. In my LoginController, I am able to get the user details, but I do not know how to manage adding it in Authentication and make it available for other controllers. I also want to use these User details for Audit purpose.\r\n\r\nBelow is my code for main classes\r\n\r\n```\r\n@Component\r\n@Slf4j\r\npublic class SecurityFilter extends GenericFilterBean {\r\n\r\n    @Override\r\n    public void doFilter(ServletRequest request, ServletResponse response, FilterChain filterChain)\r\n            throws IOException, ServletException {\r\n        HttpServletRequest req = (HttpServletRequest) request;\r\n        HttpServletResponse resp = (HttpServletResponse) response;\r\n        HttpSession session = req.getSession(false);\r\n\r\n        try {\r\n            // How to check here if authentication already done.\r\n        \tString redirectUrl = GoogleSSORestClient.getRedirectUrl();\r\n            resp.sendRedirect(redirectUrl);\r\n            filterChain.doFilter(request, response);\r\n        } catch (NullPointerException e) {\r\n        \te.printStackTrace();\r\n        }\r\n        //filterChain.doFilter(request, response);\r\n    }\r\n}\r\n```\r\n\r\n```\r\n  \r\n@Controller\r\n \r\npublic class LoginController {\r\n\r\n    @Autowired\r\n    LoginService service;\r\n\r\n    @RequestMapping(value=&quot;/login&quot;, method = RequestMethod.GET)\r\n    public String showLoginPage(@RequestParam Map&lt;String,String&gt; allRequestParams, ModelMap model){\r\n    \t\r\n    \tif(!allRequestParams.containsKey(&quot;access_token&quot;)) {\r\n    \t\tString code =allRequestParams.get(&quot;code&quot;);\r\n        \tString accessToken = GoogleSSORestClient.getAccessToken(code);\r\n        \tUser user = getUserInfo(accessToken);\r\n            \r\n        \tif (user != null) {\r\n                //UsernamePasswordAuthenticationToken authentication = new UsernamePasswordAuthenticationToken(user,\r\n                  //      new Credentials(type, decodedToken, token, session), null);\r\n                //authentication.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\r\n                //SecurityContextHolder.getContext().setAuthentication(authentication);\r\n            \t \r\n            \tif (user != null) {\r\n                    UsernamePasswordAuthenticationToken authentication = new UsernamePasswordAuthenticationToken(user,\r\n                            new Credentials(), null);\r\n                    authentication.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\r\n                    SecurityContextHolder.getContext().setAuthentication(authentication);\r\n                }\r\n            }\r\n    \t}\r\n    \t\r\n        return &quot;success&quot;;\r\n    }\r\n      \r\nprivate User getUserInfo(String accessToken) {\r\n    User user = null;\r\n     \r\n    String urlToRead = &quot;https://www.googleapis.com/oauth2/v1/userinfo?access_token=&quot; + accessToken;\r\n    URL url;\r\n\tHttpURLConnection conn;\r\n\ttry {\r\n\t\turl = new URL(urlToRead);\r\n\t\tconn = (HttpURLConnection) url.openConnection();\r\n    String id = null;\r\n    \r\n    String picture = null;\r\n    StringBuilder result = new StringBuilder();\r\n   // try {\r\n    \t conn.setRequestMethod(&quot;GET&quot;);\r\n    \t try (BufferedReader reader = new BufferedReader(\r\n                 new InputStreamReader(conn.getInputStream()))) {\r\n             for (String line; (line = reader.readLine()) != null; ) {\r\n                 result.append(line);\r\n             }\r\n    \t }\r\n        //JSONParser jsonParser = new JSONParser();\r\n        JSONObject obj = new JSONObject(result.toString());\r\n        JSONObject parsed = (JSONObject)obj;\r\n        id = (String) parsed.get(&quot;id&quot;);\r\n         \r\n        picture = (String) parsed.get(&quot;picture&quot;);\r\n        \r\n        user = new User();\r\n        user.setId(googleId);\r\n        user.setPicture(picture);\r\n         \r\n    }catch (MalformedURLException e1) {\r\n\t\t// TODO Auto-generated catch block\r\n\t\te1.printStackTrace();\r\n\t} catch (IOException e) {\r\n        throw new RuntimeException(e);\r\n    }\r\n    \r\n    return user;\r\n}\r\n\r\n\r\n}\r\n```\r\n\r\nI have added SecurityConfig, but not sure if I should go with Authentication Provider\r\n\r\n```\r\n\r\n@Configuration\r\n@EnableWebSecurity\r\n@EnableGlobalMethodSecurity(securedEnabled = true, jsr250Enabled = true, prePostEnabled = true)\r\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\r\n\r\n    @Autowired\r\n    ObjectMapper objectMapper;\r\n\r\n    @Autowired\r\n    SecurityProperties restSecProps;\r\n\r\n    @Autowired\r\n    public SecurityFilter tokenAuthenticationFilter;\r\n\r\n    @Bean\r\n    public AuthenticationEntryPoint restAuthenticationEntryPoint() {\r\n        return (httpServletRequest, httpServletResponse, e) -&gt; {\r\n            Map&lt;String, Object&gt; errorObject = new HashMap&lt;&gt;();\r\n            int errorCode = 401;\r\n            errorObject.put(&quot;message&quot;, &quot;Unauthorized access of protected resource, invalid credentials&quot;);\r\n            errorObject.put(&quot;error&quot;, HttpStatus.UNAUTHORIZED);\r\n            errorObject.put(&quot;code&quot;, errorCode);\r\n            errorObject.put(&quot;timestamp&quot;, new Timestamp(new Date().getTime()));\r\n            httpServletResponse.setContentType(&quot;application/json;charset=UTF-8&quot;);\r\n            httpServletResponse.setStatus(errorCode);\r\n            httpServletResponse.getWriter().write(objectMapper.writeValueAsString(errorObject));\r\n        };\r\n    }\r\n\r\n    @Bean\r\n    CorsConfigurationSource corsConfigurationSource() {\r\n        CorsConfiguration configuration = new CorsConfiguration();\r\n        configuration.setAllowedOrigins(restSecProps.getAllowedOrigins());\r\n        configuration.setAllowedMethods(restSecProps.getAllowedMethods());\r\n        configuration.setAllowedHeaders(restSecProps.getAllowedHeaders());\r\n        configuration.setAllowCredentials(restSecProps.isAllowCredentials());\r\n        configuration.setExposedHeaders(restSecProps.getExposedHeaders());\r\n        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\r\n        source.registerCorsConfiguration(&quot;/**&quot;, configuration);\r\n        return source;\r\n    }\r\n\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n        /*http.cors().configurationSource(corsConfigurationSource()).and().csrf().disable().formLogin().disable()\r\n                .httpBasic().disable().exceptionHandling().authenticationEntryPoint(restAuthenticationEntryPoint())\r\n                .and().authorizeRequests()\r\n                .antMatchers(restSecProps.getAllowedPublicApis().toArray(new String[1])).permitAll()\r\n                .antMatchers(HttpMethod.OPTIONS, &quot;/**&quot;).permitAll().anyRequest().authenticated().and()\r\n                .addFilterBefore(tokenAuthenticationFilter, UsernamePasswordAuthenticationFilter.class)\r\n                .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS);*/\r\n    \t\r\n    \t/*String redirectUrl = GoogleSSOClient.getRedirectUrl();\r\n    \thttp\r\n        .authorizeRequests()\r\n        \t.antMatchers(&quot;/resources/**&quot;).permitAll()\r\n            .anyRequest().authenticated()\r\n            .and()\r\n        .formLogin()\r\n        \t\r\n            .loginPage(redirectUrl) \r\n            .defaultSuccessUrl(&quot;/login&quot;) \r\n            .permitAll(); */\r\n    }\r\n}\r\n```\r\nAny Suggestions will be of great help.\r\nThanks,\r\n","title":"Issues in setting Authentication after successfull google SSO login in Spring Security and Boot","body":"<p>I am using Google SSO in my Spring Boot Application. Used this thread for same.\n<a href=\"https://stackoverflow.com/questions/12195225/step-by-step-google-sso-java\">Step by step Google SSO (java)?</a></p>\n<ol>\n<li>I am using HttpClient to call first google endpoint to get the google sign in - where user can add google creadentials.</li>\n<li>It gets redirected to the redirect_url configuration set, which in turn calls my Controller \\login, where I get the code returned by google api, there I send another api call to get access_token</li>\n<li>In my LoginController, I am able to get the user details, but I do not know how to manage adding it in Authentication and make it available for other controllers. I also want to use these User details for Audit purpose.</li>\n</ol>\n<p>Below is my code for main classes</p>\n<pre><code>@Component\n@Slf4j\npublic class SecurityFilter extends GenericFilterBean {\n\n    @Override\n    public void doFilter(ServletRequest request, ServletResponse response, FilterChain filterChain)\n            throws IOException, ServletException {\n        HttpServletRequest req = (HttpServletRequest) request;\n        HttpServletResponse resp = (HttpServletResponse) response;\n        HttpSession session = req.getSession(false);\n\n        try {\n            // How to check here if authentication already done.\n            String redirectUrl = GoogleSSORestClient.getRedirectUrl();\n            resp.sendRedirect(redirectUrl);\n            filterChain.doFilter(request, response);\n        } catch (NullPointerException e) {\n            e.printStackTrace();\n        }\n        //filterChain.doFilter(request, response);\n    }\n}\n</code></pre>\n<pre><code>  \n@Controller\n \npublic class LoginController {\n\n    @Autowired\n    LoginService service;\n\n    @RequestMapping(value=&quot;/login&quot;, method = RequestMethod.GET)\n    public String showLoginPage(@RequestParam Map&lt;String,String&gt; allRequestParams, ModelMap model){\n        \n        if(!allRequestParams.containsKey(&quot;access_token&quot;)) {\n            String code =allRequestParams.get(&quot;code&quot;);\n            String accessToken = GoogleSSORestClient.getAccessToken(code);\n            User user = getUserInfo(accessToken);\n            \n            if (user != null) {\n                //UsernamePasswordAuthenticationToken authentication = new UsernamePasswordAuthenticationToken(user,\n                  //      new Credentials(type, decodedToken, token, session), null);\n                //authentication.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\n                //SecurityContextHolder.getContext().setAuthentication(authentication);\n                 \n                if (user != null) {\n                    UsernamePasswordAuthenticationToken authentication = new UsernamePasswordAuthenticationToken(user,\n                            new Credentials(), null);\n                    authentication.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\n                    SecurityContextHolder.getContext().setAuthentication(authentication);\n                }\n            }\n        }\n        \n        return &quot;success&quot;;\n    }\n      \nprivate User getUserInfo(String accessToken) {\n    User user = null;\n     \n    String urlToRead = &quot;https://www.googleapis.com/oauth2/v1/userinfo?access_token=&quot; + accessToken;\n    URL url;\n    HttpURLConnection conn;\n    try {\n        url = new URL(urlToRead);\n        conn = (HttpURLConnection) url.openConnection();\n    String id = null;\n    \n    String picture = null;\n    StringBuilder result = new StringBuilder();\n   // try {\n         conn.setRequestMethod(&quot;GET&quot;);\n         try (BufferedReader reader = new BufferedReader(\n                 new InputStreamReader(conn.getInputStream()))) {\n             for (String line; (line = reader.readLine()) != null; ) {\n                 result.append(line);\n             }\n         }\n        //JSONParser jsonParser = new JSONParser();\n        JSONObject obj = new JSONObject(result.toString());\n        JSONObject parsed = (JSONObject)obj;\n        id = (String) parsed.get(&quot;id&quot;);\n         \n        picture = (String) parsed.get(&quot;picture&quot;);\n        \n        user = new User();\n        user.setId(googleId);\n        user.setPicture(picture);\n         \n    }catch (MalformedURLException e1) {\n        // TODO Auto-generated catch block\n        e1.printStackTrace();\n    } catch (IOException e) {\n        throw new RuntimeException(e);\n    }\n    \n    return user;\n}\n\n\n}\n</code></pre>\n<p>I have added SecurityConfig, but not sure if I should go with Authentication Provider</p>\n<pre><code>\n@Configuration\n@EnableWebSecurity\n@EnableGlobalMethodSecurity(securedEnabled = true, jsr250Enabled = true, prePostEnabled = true)\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\n\n    @Autowired\n    ObjectMapper objectMapper;\n\n    @Autowired\n    SecurityProperties restSecProps;\n\n    @Autowired\n    public SecurityFilter tokenAuthenticationFilter;\n\n    @Bean\n    public AuthenticationEntryPoint restAuthenticationEntryPoint() {\n        return (httpServletRequest, httpServletResponse, e) -&gt; {\n            Map&lt;String, Object&gt; errorObject = new HashMap&lt;&gt;();\n            int errorCode = 401;\n            errorObject.put(&quot;message&quot;, &quot;Unauthorized access of protected resource, invalid credentials&quot;);\n            errorObject.put(&quot;error&quot;, HttpStatus.UNAUTHORIZED);\n            errorObject.put(&quot;code&quot;, errorCode);\n            errorObject.put(&quot;timestamp&quot;, new Timestamp(new Date().getTime()));\n            httpServletResponse.setContentType(&quot;application/json;charset=UTF-8&quot;);\n            httpServletResponse.setStatus(errorCode);\n            httpServletResponse.getWriter().write(objectMapper.writeValueAsString(errorObject));\n        };\n    }\n\n    @Bean\n    CorsConfigurationSource corsConfigurationSource() {\n        CorsConfiguration configuration = new CorsConfiguration();\n        configuration.setAllowedOrigins(restSecProps.getAllowedOrigins());\n        configuration.setAllowedMethods(restSecProps.getAllowedMethods());\n        configuration.setAllowedHeaders(restSecProps.getAllowedHeaders());\n        configuration.setAllowCredentials(restSecProps.isAllowCredentials());\n        configuration.setExposedHeaders(restSecProps.getExposedHeaders());\n        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\n        source.registerCorsConfiguration(&quot;/**&quot;, configuration);\n        return source;\n    }\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        /*http.cors().configurationSource(corsConfigurationSource()).and().csrf().disable().formLogin().disable()\n                .httpBasic().disable().exceptionHandling().authenticationEntryPoint(restAuthenticationEntryPoint())\n                .and().authorizeRequests()\n                .antMatchers(restSecProps.getAllowedPublicApis().toArray(new String[1])).permitAll()\n                .antMatchers(HttpMethod.OPTIONS, &quot;/**&quot;).permitAll().anyRequest().authenticated().and()\n                .addFilterBefore(tokenAuthenticationFilter, UsernamePasswordAuthenticationFilter.class)\n                .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS);*/\n        \n        /*String redirectUrl = GoogleSSOClient.getRedirectUrl();\n        http\n        .authorizeRequests()\n            .antMatchers(&quot;/resources/**&quot;).permitAll()\n            .anyRequest().authenticated()\n            .and()\n        .formLogin()\n            \n            .loginPage(redirectUrl) \n            .defaultSuccessUrl(&quot;/login&quot;) \n            .permitAll(); */\n    }\n}\n</code></pre>\n<p>Any Suggestions will be of great help.\nThanks,</p>\n"},{"tags":["java","spring","querydsl"],"answers":[{"tags":[],"owner":{"account_id":16415358,"reputation":118,"user_id":11857649,"display_name":"DPCII"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1671283971,"creation_date":1588617808,"answer_id":61599367,"question_id":61598374,"body_markdown":"I figured it out. It&#39;s a little non-intuitive, but using `BooleanBuilder` and `JPAQuery&lt;?&gt;` you can create a dynamic series of boolean predicates, which return a list of matches.\r\n\r\nExample:\r\n```java\r\nQProductModel product = QProductModel.productModel;\r\nJPAQuery&lt;?&gt; query = new JPAQuery&lt;&gt;(//entity manager goes here//);\r\n\r\n// example list of search parameters separated by +\r\nString[] params = matchingWords.split(&quot;[+]&quot;);\r\n\r\nBooleanBuilder builder = new BooleanBuilder();\r\nfor(String param : params) {\r\n    builder.or(product.title.containsIgnoreCase(param));\r\n}\r\n\r\n// then you can put together the query like so:\r\nList&lt;ProductModel&gt; products = query.select(product)\r\n    .from(product)\r\n    .where(builder)\r\n    .fetch();\r\n\r\nreturn products;\r\n```","title":"Dynamic search term SQL query with Spring JPA or QueryDSL","body":"<p>I figured it out. It's a little non-intuitive, but using <code>BooleanBuilder</code> and <code>JPAQuery&lt;?&gt;</code> you can create a dynamic series of boolean predicates, which return a list of matches.</p>\n<p>Example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>QProductModel product = QProductModel.productModel;\nJPAQuery&lt;?&gt; query = new JPAQuery&lt;&gt;(//entity manager goes here//);\n\n// example list of search parameters separated by +\nString[] params = matchingWords.split(&quot;[+]&quot;);\n\nBooleanBuilder builder = new BooleanBuilder();\nfor(String param : params) {\n    builder.or(product.title.containsIgnoreCase(param));\n}\n\n// then you can put together the query like so:\nList&lt;ProductModel&gt; products = query.select(product)\n    .from(product)\n    .where(builder)\n    .fetch();\n\nreturn products;\n</code></pre>\n"}],"owner":{"account_id":16415358,"reputation":118,"user_id":11857649,"display_name":"DPCII"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":978,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":61599367,"answer_count":1,"score":1,"last_activity_date":1671283971,"creation_date":1588614151,"question_id":61598374,"body_markdown":"I am trying to learn QueryDSL in order to return the results of a single search term from Postgres:\r\n\r\n```\r\n    @GetMapping(&quot;/product/contains/{matchingWords}&quot;)\r\n    public List&lt;ProductModel&gt; findByTitleContaining(@PathVariable String matchingWords) {\r\n\r\n        QProductModel product = QProductModel.productModel;\r\n        JPAQuery&lt;?&gt; query = new JPAQuery&lt;&gt;(em);\r\n\r\n        List&lt;ProductModel&gt; products = query.select(product)\r\n                .from(product)\r\n                .where(product.title.toLowerCase()\r\n                        .contains(matchingWords.toLowerCase()))\r\n                .fetch();\r\n        return products;\r\n    }\r\n\r\n```\r\n\r\nBut I also want to search for any number of search terms, for example, say this is my list of search terms divided by the plus symbol:\r\n\r\n```\r\n   String[] params = matchingWords.split(&quot;[+]&quot;);\r\n```\r\n\r\nHow can I dynamically create *contains(params[0]) AND/OR contains(params[1] AND/OR ... contains(params[n])* using either QueryDSL or any Java/Spring query framework? I see QueryDSL has a predicate system, but I still don&#39;t understand how to dynamically create a query based on a variable number of parameters searching in the same column.","title":"Dynamic search term SQL query with Spring JPA or QueryDSL","body":"<p>I am trying to learn QueryDSL in order to return the results of a single search term from Postgres:</p>\n\n<pre><code>    @GetMapping(\"/product/contains/{matchingWords}\")\n    public List&lt;ProductModel&gt; findByTitleContaining(@PathVariable String matchingWords) {\n\n        QProductModel product = QProductModel.productModel;\n        JPAQuery&lt;?&gt; query = new JPAQuery&lt;&gt;(em);\n\n        List&lt;ProductModel&gt; products = query.select(product)\n                .from(product)\n                .where(product.title.toLowerCase()\n                        .contains(matchingWords.toLowerCase()))\n                .fetch();\n        return products;\n    }\n\n</code></pre>\n\n<p>But I also want to search for any number of search terms, for example, say this is my list of search terms divided by the plus symbol:</p>\n\n<pre><code>   String[] params = matchingWords.split(\"[+]\");\n</code></pre>\n\n<p>How can I dynamically create <em>contains(params[0]) AND/OR contains(params[1] AND/OR ... contains(params[n])</em> using either QueryDSL or any Java/Spring query framework? I see QueryDSL has a predicate system, but I still don't understand how to dynamically create a query based on a variable number of parameters searching in the same column.</p>\n"},{"tags":["java","amazon-web-services","maven","tomcat","amazon-ec2"],"comments":[{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":1,"creation_date":1671222490,"post_id":74829165,"comment_id":132060790,"body_markdown":"Spring Boot 3.0.0 requires JDK17+... also 404 means not found??","body":"Spring Boot 3.0.0 requires JDK17+... also 404 means not found??"},{"owner":{"account_id":6967732,"reputation":604,"user_id":5345105,"display_name":"Shubham Arya"},"score":0,"creation_date":1671283196,"post_id":74829165,"comment_id":132068586,"body_markdown":"Will try to downgrade spring boot version and will give it a try","body":"Will try to downgrade spring boot version and will give it a try"},{"owner":{"account_id":6967732,"reputation":604,"user_id":5345105,"display_name":"Shubham Arya"},"score":0,"creation_date":1671283597,"post_id":74829165,"comment_id":132068660,"body_markdown":"Thanks a lot, this was indeed the issue. I created a new project with spring boot 2.7.6 and it is working perfectly fine.","body":"Thanks a lot, this was indeed the issue. I created a new project with spring boot 2.7.6 and it is working perfectly fine."}],"answers":[{"tags":[],"owner":{"account_id":8262384,"reputation":47,"user_id":6213291,"display_name":"Anup Mondal"},"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1671222974,"creation_date":1671222974,"answer_id":74829530,"question_id":74829165,"body_markdown":"You have to add a &quot;/&quot; before &quot;code&quot;\r\n\r\n    @GetMapping(&quot;/code&quot;)","title":"REST API returning http status 404 when deployed on EC2 instance on AWS","body":"<p>You have to add a &quot;/&quot; before &quot;code&quot;</p>\n<pre><code>@GetMapping(&quot;/code&quot;)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25311212,"reputation":1,"user_id":19133923,"display_name":"Sergey Korotaev"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1671224915,"creation_date":1671224915,"answer_id":74829777,"question_id":74829165,"body_markdown":"you forgot to add / for your path in controller methods because of you use path: \r\n\r\n    /logincode\r\n\r\n instead `/login/code`","title":"REST API returning http status 404 when deployed on EC2 instance on AWS","body":"<p>you forgot to add / for your path in controller methods because of you use path:</p>\n<pre><code>/logincode\n</code></pre>\n<p>instead <code>/login/code</code></p>\n"},{"tags":[],"owner":{"account_id":6967732,"reputation":604,"user_id":5345105,"display_name":"Shubham Arya"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1671283825,"creation_date":1671283825,"answer_id":74834498,"question_id":74829165,"body_markdown":"As highlighted by @khmarbaise above, I was using spring boot 3.0.0 but I had java 8 installed on my EC2 instance and spring boot 3.0.0 requires java version 17+, and that is why I was getting 404 when hitting my APIs.\r\n\r\nAfter downgrading my spring boot version to 2.7.6 I am able to get a corresponding response from the APIs.\r\n\r\nAlso, as mentioned by other comments regarding the use of &quot;/&quot;, omitting the slash was not an issue as the slash is an optional parameter.\r\n\r\nThanks","title":"REST API returning http status 404 when deployed on EC2 instance on AWS","body":"<p>As highlighted by @khmarbaise above, I was using spring boot 3.0.0 but I had java 8 installed on my EC2 instance and spring boot 3.0.0 requires java version 17+, and that is why I was getting 404 when hitting my APIs.</p>\n<p>After downgrading my spring boot version to 2.7.6 I am able to get a corresponding response from the APIs.</p>\n<p>Also, as mentioned by other comments regarding the use of &quot;/&quot;, omitting the slash was not an issue as the slash is an optional parameter.</p>\n<p>Thanks</p>\n"}],"owner":{"account_id":6967732,"reputation":604,"user_id":5345105,"display_name":"Shubham Arya"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":341,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74834498,"answer_count":3,"score":0,"last_activity_date":1671283825,"creation_date":1671220277,"question_id":74829165,"body_markdown":"I have a simple spring boot app which has just 2 rest controllers and I am exporting the war for the same.\r\nI am deploying the same war using the tomcat manager on EC2 instance on AWS, but unfortunately I am getting http status 404 when trying to hit the API.\r\n\r\nURL that I am trying to hit is -\r\n\r\n**[public IP shared by AWS]:[port number on which tomcat is running:8080]/[context route which is the name of my war file]/[my mapped urls]**\r\n\r\n**[publicIP]:8080/aws-0.0.1-SNAPSHOT/login/code**\r\n\r\n**My Controller class**\r\n```\r\n@RestController\r\n@RequestMapping(&quot;/login&quot;)\r\npublic class TestController {\r\n\r\n\t@GetMapping(&quot;code&quot;)\r\n\tpublic String returnCode() {\r\n\t\treturn &quot;returning code&quot;;\r\n\t}\r\n\r\n\t@GetMapping(&quot;received-code&quot;)\r\n\tpublic String returnReceivedCode(@RequestParam String code) {\r\n\t\treturn code;\r\n\t}\r\n\r\n}\r\n\r\n```\r\n\r\n**My pom.xml**\r\n\r\n\r\n```\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.0.0&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.test&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;aws&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;packaging&gt;war&lt;/packaging&gt;\r\n\t&lt;name&gt;aws&lt;/name&gt;\r\n\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n```\r\n\r\n\r\nI tried with java version 8 as well, the tomcat version that I have on my EC2 instance is 9 (apache-tomcat-9.0.70)\r\n\r\nI also tried getting one sample war application that tomcat shares for the testing purpose -\r\nhttps://tomcat.apache.org/tomcat-7.0-doc/appdev/sample/\r\n\r\nBut surprisingly, this is working fine which tells me that my tomcat and java installations don&#39;t have any issues.\r\n\r\nAny help would be appreciated.","title":"REST API returning http status 404 when deployed on EC2 instance on AWS","body":"<p>I have a simple spring boot app which has just 2 rest controllers and I am exporting the war for the same.\nI am deploying the same war using the tomcat manager on EC2 instance on AWS, but unfortunately I am getting http status 404 when trying to hit the API.</p>\n<p>URL that I am trying to hit is -</p>\n<p><strong>[public IP shared by AWS]:[port number on which tomcat is running:8080]/[context route which is the name of my war file]/[my mapped urls]</strong></p>\n<p><strong>[publicIP]:8080/aws-0.0.1-SNAPSHOT/login/code</strong></p>\n<p><strong>My Controller class</strong></p>\n<pre><code>@RestController\n@RequestMapping(&quot;/login&quot;)\npublic class TestController {\n\n    @GetMapping(&quot;code&quot;)\n    public String returnCode() {\n        return &quot;returning code&quot;;\n    }\n\n    @GetMapping(&quot;received-code&quot;)\n    public String returnReceivedCode(@RequestParam String code) {\n        return code;\n    }\n\n}\n\n</code></pre>\n<p><strong>My pom.xml</strong></p>\n<pre><code>    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.0.0&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.test&lt;/groupId&gt;\n    &lt;artifactId&gt;aws&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;war&lt;/packaging&gt;\n    &lt;name&gt;aws&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n</code></pre>\n<p>I tried with java version 8 as well, the tomcat version that I have on my EC2 instance is 9 (apache-tomcat-9.0.70)</p>\n<p>I also tried getting one sample war application that tomcat shares for the testing purpose -\n<a href=\"https://tomcat.apache.org/tomcat-7.0-doc/appdev/sample/\" rel=\"nofollow noreferrer\">https://tomcat.apache.org/tomcat-7.0-doc/appdev/sample/</a></p>\n<p>But surprisingly, this is working fine which tells me that my tomcat and java installations don't have any issues.</p>\n<p>Any help would be appreciated.</p>\n"},{"tags":["java","spring-boot","springdoc-openapi-ui"],"answers":[{"tags":[],"owner":{"account_id":27220217,"reputation":11,"user_id":20749626,"display_name":"h3y"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671283591,"creation_date":1671283591,"answer_id":74834476,"question_id":74834086,"body_markdown":"For swagger v3+, the swagger ui default access is now ```swagger-ui/``` instead of ```swagger-ui.html```\r\nYou should be able to access by amending your url to ```localhost:8080/swagger-ui/```\r\n","title":"Can&#39;t open OpenApi (Swagger) page","body":"<p>For swagger v3+, the swagger ui default access is now <code>swagger-ui/</code> instead of <code>swagger-ui.html</code>\nYou should be able to access by amending your url to <code>localhost:8080/swagger-ui/</code></p>\n"}],"owner":{"account_id":20853579,"reputation":338,"user_id":16436722,"display_name":"стасевич"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":324,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1671283802,"creation_date":1671280246,"question_id":74834086,"body_markdown":"Gradle:  \r\n\r\n    implementation group: &#39;org.springdoc&#39;, name: &#39;springdoc-openapi-ui&#39;, version: &#39;1.6.13&#39;\r\n    implementation group: &#39;io.swagger.core.v3&#39;, name: &#39;swagger-annotations&#39;, version: &#39;2.2.7&#39;   \r\n\r\nProperties:  \r\n\r\n    springdoc.swagger-ui.enabled=true\r\n    springdoc.swagger-ui.path=/swagger-ui.html  \r\n\r\nController:  \r\n\r\n    @RestController\r\n    \r\n        @RequestMapping(&quot;/api/v1/cheque&quot;)\r\n        @FieldDefaults(level = AccessLevel.PRIVATE,makeFinal = true)\r\n        public class ChequeController {\r\n        \r\n            ProductService productService;\r\n        \r\n            public ChequeController(ProductService productService) {\r\n                this.productService = productService;\r\n            }\r\n        \r\n            @GetMapping(value = &quot;/get/{id}&quot;, produces = &quot;application/json&quot;)\r\n            public Optional&lt;Product&gt; getByid(@PathVariable Long id) {\r\n                return productService.getById(id);\r\n            }\r\n        \r\n            @GetMapping(&quot;/test&quot;)\r\n            public String test() {\r\n                return &quot;test&quot;;\r\n            }\r\n        }  \r\n  \r\nConf:  \r\n\r\n    @Configuration\r\n    public class OpenApiConfiguration {\r\n    \r\n        @Bean\r\n        public OpenAPI customOpenAPI() {\r\n            return new OpenAPI()\r\n                    .info(\r\n                            new Info()\r\n                                    .title(&quot;Example Swagger Api&quot;)\r\n                                    .version(&quot;1.0.0&quot;)\r\n                    );\r\n        }\r\n    }\r\n\r\n  \r\n\r\nTrying to open in `localhost:8080/swagger-ui.html` and getting: \r\n\r\n`Whitelabel Error Page There was an unexpected error (type=Not Found, status=404).` in [https://springdoc.org/#getting-started][1] saying, that it will automatically deploy swagger-ui to a spring-boot application  \r\nwhat im doing wrong\r\n\r\n\r\n  [1]: https://springdoc.org/#getting-started","title":"Can&#39;t open OpenApi (Swagger) page","body":"<p>Gradle:</p>\n<pre><code>implementation group: 'org.springdoc', name: 'springdoc-openapi-ui', version: '1.6.13'\nimplementation group: 'io.swagger.core.v3', name: 'swagger-annotations', version: '2.2.7'   \n</code></pre>\n<p>Properties:</p>\n<pre><code>springdoc.swagger-ui.enabled=true\nspringdoc.swagger-ui.path=/swagger-ui.html  \n</code></pre>\n<p>Controller:</p>\n<pre><code>@RestController\n\n    @RequestMapping(&quot;/api/v1/cheque&quot;)\n    @FieldDefaults(level = AccessLevel.PRIVATE,makeFinal = true)\n    public class ChequeController {\n    \n        ProductService productService;\n    \n        public ChequeController(ProductService productService) {\n            this.productService = productService;\n        }\n    \n        @GetMapping(value = &quot;/get/{id}&quot;, produces = &quot;application/json&quot;)\n        public Optional&lt;Product&gt; getByid(@PathVariable Long id) {\n            return productService.getById(id);\n        }\n    \n        @GetMapping(&quot;/test&quot;)\n        public String test() {\n            return &quot;test&quot;;\n        }\n    }  \n</code></pre>\n<p>Conf:</p>\n<pre><code>@Configuration\npublic class OpenApiConfiguration {\n\n    @Bean\n    public OpenAPI customOpenAPI() {\n        return new OpenAPI()\n                .info(\n                        new Info()\n                                .title(&quot;Example Swagger Api&quot;)\n                                .version(&quot;1.0.0&quot;)\n                );\n    }\n}\n</code></pre>\n<p>Trying to open in <code>localhost:8080/swagger-ui.html</code> and getting:</p>\n<p><code>Whitelabel Error Page There was an unexpected error (type=Not Found, status=404).</code> in <a href=\"https://springdoc.org/#getting-started\" rel=\"nofollow noreferrer\">https://springdoc.org/#getting-started</a> saying, that it will automatically deploy swagger-ui to a spring-boot application<br />\nwhat im doing wrong</p>\n"},{"tags":["java","intellij-idea","dcevm","hotswapagent"],"comments":[{"owner":{"account_id":36734,"reputation":392117,"user_id":104891,"display_name":"CrazyCoder"},"score":0,"creation_date":1671221991,"post_id":74829295,"comment_id":132060660,"body_markdown":"What IDE version do you use?","body":"What IDE version do you use?"},{"owner":{"account_id":27240408,"reputation":63,"user_id":20766685,"display_name":"Kevin Olsen"},"score":0,"creation_date":1671223602,"post_id":74829295,"comment_id":132061055,"body_markdown":"@CrazyCoder thank you very much for the answer. I am using version 2022.3.","body":"@CrazyCoder thank you very much for the answer. I am using version 2022.3."}],"answers":[{"tags":[],"owner":{"account_id":25354128,"reputation":3100,"user_id":19170534,"display_name":"Andreas Violaris"},"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1671222788,"creation_date":1671222788,"answer_id":74829508,"question_id":74829295,"body_markdown":"Well, the version you mention does not require the use of the HotSwapAgent plugin or of any other plugin.\r\n\r\nWhat you have to do is define the folder `dcevm-11.0.15+1` as JDK and put the following argument in the VM options of your project&#39;s debug configuration, in IntelliJ:\r\n\r\n    -XX:HotswapAgent=fatjar\r\n\r\nor\r\n\r\n    -XX:HotswapAgent=core\r\n\r\nIn fatjar mode all plugins will be available. In core mode only core JVM plugins will be available.","title":"TravaOpenJDK11 - HotSwapAgent - DCEVM installation not found","body":"<p>Well, the version you mention does not require the use of the HotSwapAgent plugin or of any other plugin.</p>\n<p>What you have to do is define the folder <code>dcevm-11.0.15+1</code> as JDK and put the following argument in the VM options of your project's debug configuration, in IntelliJ:</p>\n<pre><code>-XX:HotswapAgent=fatjar\n</code></pre>\n<p>or</p>\n<pre><code>-XX:HotswapAgent=core\n</code></pre>\n<p>In fatjar mode all plugins will be available. In core mode only core JVM plugins will be available.</p>\n"}],"owner":{"account_id":27240408,"reputation":63,"user_id":20766685,"display_name":"Kevin Olsen"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":653,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":74829508,"answer_count":1,"score":6,"last_activity_date":1671283769,"creation_date":1671221194,"question_id":74829295,"body_markdown":"I&#39;m trying to use the HotSwapAgent plugin in IntelliJ. So, I have set as &quot;agent path&quot; the path of `hotswap-agent.jar` (found in the Trava Open JDK folder) that I downloaded from [here](https://github.com/TravaOpenJDK/trava-jdk-11-dcevm/releases/download/dcevm-11.0.15%2B1/Openjdk11u-dcevm-windows-x64.zip). But as you can see [here](https://i.stack.imgur.com/xDYNz.png), I get the following error:\r\n\r\n&gt; DCEVM installation not found for JDK specified for the current project. You should download and install it.\r\n\r\nHowever, the download link redirects [here](https://github.com/dcevm/dcevm/releases), where there are installers only up to version 8 (which seems reasonable to me since the Trava Open JDK 11 I&#39;m trying to use is already patched and includes its own agent.\r\n\r\nSo, what am I missing here?","title":"TravaOpenJDK11 - HotSwapAgent - DCEVM installation not found","body":"<p>I'm trying to use the HotSwapAgent plugin in IntelliJ. So, I have set as &quot;agent path&quot; the path of <code>hotswap-agent.jar</code> (found in the Trava Open JDK folder) that I downloaded from <a href=\"https://github.com/TravaOpenJDK/trava-jdk-11-dcevm/releases/download/dcevm-11.0.15%2B1/Openjdk11u-dcevm-windows-x64.zip\" rel=\"noreferrer\">here</a>. But as you can see <a href=\"https://i.stack.imgur.com/xDYNz.png\" rel=\"noreferrer\">here</a>, I get the following error:</p>\n<blockquote>\n<p>DCEVM installation not found for JDK specified for the current project. You should download and install it.</p>\n</blockquote>\n<p>However, the download link redirects <a href=\"https://github.com/dcevm/dcevm/releases\" rel=\"noreferrer\">here</a>, where there are installers only up to version 8 (which seems reasonable to me since the Trava Open JDK 11 I'm trying to use is already patched and includes its own agent.</p>\n<p>So, what am I missing here?</p>\n"},{"tags":["java","spring-boot","spring-security"],"comments":[{"owner":{"account_id":2064278,"reputation":13129,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1671356071,"post_id":74834374,"comment_id":132078480,"body_markdown":"Please enable spring security debug logs and post them here","body":"Please enable spring security debug logs and post them here"}],"owner":{"account_id":26768638,"reputation":3,"user_id":20369341,"display_name":"John"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671282856,"creation_date":1671282856,"question_id":74834374,"body_markdown":"After configuring Spring&#39;s Web Security my register works expected but when I try to login my login page says that my username or password is invalid a I am using in memory mysql database and I checked database values after register if I am typing in correct (username, password). When i used hardcoded values in CustomUserDetailsService login worked like expected\r\n\r\n**My SecurityConfig :**\r\n\r\n```\r\npackage ru.connor.shopping_app.config;\r\n\r\nimport lombok.RequiredArgsConstructor;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;\r\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\nimport org.springframework.security.config.annotation.web.builders.WebSecurity;\r\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\r\nimport org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;\r\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\r\nimport org.springframework.security.crypto.password.PasswordEncoder;\r\nimport ru.connor.shopping_app.service.CustomUserDetailsService;\r\n\r\n\r\n@Configuration\r\n@EnableWebSecurity\r\n@RequiredArgsConstructor\r\npublic class SpringSecurity extends WebSecurityConfigurerAdapter {\r\n    private final CustomUserDetailsService customUserDetailsService;\r\n\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n        http.authorizeRequests()\r\n                .antMatchers(&quot;/login&quot;, &quot;/register&quot;, &quot;/error&quot;, &quot;/shop/**&quot;, &quot;/image/**&quot;).permitAll()\r\n                .antMatchers(&quot;/admin/**&quot;).hasRole(&quot;ADMIN&quot;)\r\n                .anyRequest().authenticated()\r\n                .and()\r\n                .formLogin().loginPage(&quot;/login&quot;)\r\n                .loginProcessingUrl(&quot;/process_login&quot;)\r\n                .defaultSuccessUrl(&quot;/&quot;)\r\n                .usernameParameter(&quot;email&quot;)\r\n                .passwordParameter(&quot;password&quot;)\r\n                .failureUrl(&quot;/login?error&quot;)\r\n                .and()\r\n                .logout().logoutUrl(&quot;/logout&quot;).logoutSuccessUrl(&quot;/login&quot;); // Logout\r\n    }\r\n\r\n    @Override\r\n    protected void configure(AuthenticationManagerBuilder auth) throws Exception {\r\n        auth.userDetailsService(customUserDetailsService).passwordEncoder(passwordEncoder());\r\n    }\r\n\r\n    @Bean\r\n    public PasswordEncoder passwordEncoder(){\r\n        return new BCryptPasswordEncoder();\r\n    }\r\n\r\n    @Override\r\n    public void configure(WebSecurity web) throws Exception {\r\n        web.ignoring().antMatchers(&quot;/resources/**&quot;, &quot;/static/**&quot;, &quot;/images/**&quot;, &quot;/productImages/**&quot;, &quot;/css/**&quot;, &quot;/js/**&quot;);\r\n    }\r\n\r\n\r\n}\r\n\r\n```\r\n\r\n\r\n**CustomUserDetailsService :**\r\n\r\n\r\n```\r\npackage ru.connor.shopping_app.service;\r\n\r\nimport lombok.RequiredArgsConstructor;\r\nimport org.springframework.security.core.userdetails.UserDetails;\r\nimport org.springframework.security.core.userdetails.UserDetailsService;\r\nimport org.springframework.security.core.userdetails.UsernameNotFoundException;\r\nimport org.springframework.stereotype.Service;\r\nimport ru.connor.shopping_app.model.User;\r\nimport ru.connor.shopping_app.repository.UserRepository;\r\n\r\nimport java.util.Optional;\r\n\r\n\r\n@RequiredArgsConstructor\r\n@Service\r\npublic class CustomUserDetailsService implements UserDetailsService {\r\n    private final UserRepository userRepository;\r\n\r\n    @Override\r\n    public UserDetails loadUserByUsername(String s) throws UsernameNotFoundException {\r\n        Optional&lt;User&gt; user = userRepository.findAllByEmail(s);\r\n        if (user.isEmpty()) throw new UsernameNotFoundException(&quot;User not found&quot;);\r\n\r\n        return new User(user.get());\r\n    }\r\n}\r\n```\r\n\r\n**UserService:** \r\n\r\n\r\n```\r\npackage ru.connor.shopping_app.service;\r\n\r\nimport lombok.RequiredArgsConstructor;\r\nimport lombok.extern.slf4j.Slf4j;\r\nimport org.springframework.security.crypto.password.PasswordEncoder;\r\nimport org.springframework.stereotype.Service;\r\nimport ru.connor.shopping_app.model.Role;\r\nimport ru.connor.shopping_app.model.User;\r\nimport ru.connor.shopping_app.repository.UserRepository;\r\n\r\nimport java.security.Principal;\r\nimport java.util.Arrays;\r\nimport java.util.List;\r\nimport java.util.Map;\r\nimport java.util.Set;\r\nimport java.util.stream.Collectors;\r\n\r\n@Service\r\n@Slf4j\r\n@RequiredArgsConstructor\r\npublic class UserService {\r\n    private final UserRepository userRepository;\r\n    private final PasswordEncoder passwordEncoder;\r\n\r\n    public boolean createUser(User user) {\r\n        String email = user.getEmail();\r\n        if (userRepository.findByEmail(email) != null) return false;\r\n        user.setActive(true);\r\n        user.setFirstName(user.getFirstName());\r\n        user.setLastName(user.getLastName());\r\n        user.setPassword(passwordEncoder.encode(user.getPassword()));\r\n        user.getRoles().add(Role.ROLE_USER);\r\n        log.info(&quot;Saving new User with email: {}&quot;, email);\r\n        userRepository.save(user);\r\n        return true;\r\n    }\r\n\r\n    public List&lt;User&gt; list() {\r\n        return userRepository.findAll();\r\n    }\r\n\r\n    public void banUser(Long id) {\r\n        User user = userRepository.findById(Math.toIntExact(id)).orElse(null);\r\n        if (user != null) {\r\n            if (user.isActive()) {\r\n                user.setActive(false);\r\n                log.info(&quot;Ban user with id = {}; email: {}&quot;, user.getId(), user.getEmail());\r\n            } else {\r\n                user.setActive(true);\r\n                log.info(&quot;Unban user with id = {}; email: {}&quot;, user.getId(), user.getEmail());\r\n            }\r\n        }\r\n        userRepository.save(user);\r\n    }\r\n\r\n    public void changeUserRoles(User user, Map&lt;String, String&gt; form) {\r\n        Set&lt;String&gt; roles = Arrays.stream(Role.values())\r\n                .map(Role::name)\r\n                .collect(Collectors.toSet());\r\n        user.getRoles().clear();\r\n        for (String key : form.keySet()) {\r\n            if (roles.contains(key)) {\r\n                user.getRoles().add(Role.valueOf(key));\r\n            }\r\n        }\r\n        userRepository.save(user);\r\n    }\r\n\r\n    public User getUserByPrincipal(Principal principal) {\r\n        if (principal == null) return new User();\r\n        return userRepository.findByEmail(principal.getName());\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\nI do not understand what the problem is","title":"After configuring Spring Web security login gives me Invalid username and password error","body":"<p>After configuring Spring's Web Security my register works expected but when I try to login my login page says that my username or password is invalid a I am using in memory mysql database and I checked database values after register if I am typing in correct (username, password). When i used hardcoded values in CustomUserDetailsService login worked like expected</p>\n<p><strong>My SecurityConfig :</strong></p>\n<pre><code>package ru.connor.shopping_app.config;\n\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.builders.WebSecurity;\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\nimport org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\nimport org.springframework.security.crypto.password.PasswordEncoder;\nimport ru.connor.shopping_app.service.CustomUserDetailsService;\n\n\n@Configuration\n@EnableWebSecurity\n@RequiredArgsConstructor\npublic class SpringSecurity extends WebSecurityConfigurerAdapter {\n    private final CustomUserDetailsService customUserDetailsService;\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http.authorizeRequests()\n                .antMatchers(&quot;/login&quot;, &quot;/register&quot;, &quot;/error&quot;, &quot;/shop/**&quot;, &quot;/image/**&quot;).permitAll()\n                .antMatchers(&quot;/admin/**&quot;).hasRole(&quot;ADMIN&quot;)\n                .anyRequest().authenticated()\n                .and()\n                .formLogin().loginPage(&quot;/login&quot;)\n                .loginProcessingUrl(&quot;/process_login&quot;)\n                .defaultSuccessUrl(&quot;/&quot;)\n                .usernameParameter(&quot;email&quot;)\n                .passwordParameter(&quot;password&quot;)\n                .failureUrl(&quot;/login?error&quot;)\n                .and()\n                .logout().logoutUrl(&quot;/logout&quot;).logoutSuccessUrl(&quot;/login&quot;); // Logout\n    }\n\n    @Override\n    protected void configure(AuthenticationManagerBuilder auth) throws Exception {\n        auth.userDetailsService(customUserDetailsService).passwordEncoder(passwordEncoder());\n    }\n\n    @Bean\n    public PasswordEncoder passwordEncoder(){\n        return new BCryptPasswordEncoder();\n    }\n\n    @Override\n    public void configure(WebSecurity web) throws Exception {\n        web.ignoring().antMatchers(&quot;/resources/**&quot;, &quot;/static/**&quot;, &quot;/images/**&quot;, &quot;/productImages/**&quot;, &quot;/css/**&quot;, &quot;/js/**&quot;);\n    }\n\n\n}\n\n</code></pre>\n<p><strong>CustomUserDetailsService :</strong></p>\n<pre><code>package ru.connor.shopping_app.service;\n\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.security.core.userdetails.UserDetails;\nimport org.springframework.security.core.userdetails.UserDetailsService;\nimport org.springframework.security.core.userdetails.UsernameNotFoundException;\nimport org.springframework.stereotype.Service;\nimport ru.connor.shopping_app.model.User;\nimport ru.connor.shopping_app.repository.UserRepository;\n\nimport java.util.Optional;\n\n\n@RequiredArgsConstructor\n@Service\npublic class CustomUserDetailsService implements UserDetailsService {\n    private final UserRepository userRepository;\n\n    @Override\n    public UserDetails loadUserByUsername(String s) throws UsernameNotFoundException {\n        Optional&lt;User&gt; user = userRepository.findAllByEmail(s);\n        if (user.isEmpty()) throw new UsernameNotFoundException(&quot;User not found&quot;);\n\n        return new User(user.get());\n    }\n}\n</code></pre>\n<p><strong>UserService:</strong></p>\n<pre><code>package ru.connor.shopping_app.service;\n\nimport lombok.RequiredArgsConstructor;\nimport lombok.extern.slf4j.Slf4j;\nimport org.springframework.security.crypto.password.PasswordEncoder;\nimport org.springframework.stereotype.Service;\nimport ru.connor.shopping_app.model.Role;\nimport ru.connor.shopping_app.model.User;\nimport ru.connor.shopping_app.repository.UserRepository;\n\nimport java.security.Principal;\nimport java.util.Arrays;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.Set;\nimport java.util.stream.Collectors;\n\n@Service\n@Slf4j\n@RequiredArgsConstructor\npublic class UserService {\n    private final UserRepository userRepository;\n    private final PasswordEncoder passwordEncoder;\n\n    public boolean createUser(User user) {\n        String email = user.getEmail();\n        if (userRepository.findByEmail(email) != null) return false;\n        user.setActive(true);\n        user.setFirstName(user.getFirstName());\n        user.setLastName(user.getLastName());\n        user.setPassword(passwordEncoder.encode(user.getPassword()));\n        user.getRoles().add(Role.ROLE_USER);\n        log.info(&quot;Saving new User with email: {}&quot;, email);\n        userRepository.save(user);\n        return true;\n    }\n\n    public List&lt;User&gt; list() {\n        return userRepository.findAll();\n    }\n\n    public void banUser(Long id) {\n        User user = userRepository.findById(Math.toIntExact(id)).orElse(null);\n        if (user != null) {\n            if (user.isActive()) {\n                user.setActive(false);\n                log.info(&quot;Ban user with id = {}; email: {}&quot;, user.getId(), user.getEmail());\n            } else {\n                user.setActive(true);\n                log.info(&quot;Unban user with id = {}; email: {}&quot;, user.getId(), user.getEmail());\n            }\n        }\n        userRepository.save(user);\n    }\n\n    public void changeUserRoles(User user, Map&lt;String, String&gt; form) {\n        Set&lt;String&gt; roles = Arrays.stream(Role.values())\n                .map(Role::name)\n                .collect(Collectors.toSet());\n        user.getRoles().clear();\n        for (String key : form.keySet()) {\n            if (roles.contains(key)) {\n                user.getRoles().add(Role.valueOf(key));\n            }\n        }\n        userRepository.save(user);\n    }\n\n    public User getUserByPrincipal(Principal principal) {\n        if (principal == null) return new User();\n        return userRepository.findByEmail(principal.getName());\n    }\n}\n</code></pre>\n<p>I do not understand what the problem is</p>\n"},{"tags":["java","spring","dependency-injection","configuration"],"answers":[{"tags":[],"owner":{"account_id":6389739,"reputation":2892,"user_id":4956336,"display_name":"p3consulting"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1671282484,"creation_date":1671282484,"answer_id":74834326,"question_id":74833334,"body_markdown":"Try\r\n\r\n    System.setProperty(&quot;credentialsPropertyPrefix&quot;,cmd.getOptionValue(CREDENTIALS_PROPERTY_PREFIX_ARGUMENT));\r\n        application.run();","title":"How to inject/pass value into @Configuration-bean after/in application.run() method?","body":"<p>Try</p>\n<pre><code>System.setProperty(&quot;credentialsPropertyPrefix&quot;,cmd.getOptionValue(CREDENTIALS_PROPERTY_PREFIX_ARGUMENT));\n    application.run();\n</code></pre>\n"}],"owner":{"account_id":25181007,"reputation":81,"user_id":19022508,"display_name":"Mykhailo Pavliuk"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74834326,"answer_count":1,"score":0,"last_activity_date":1671282484,"creation_date":1671272547,"question_id":74833334,"body_markdown":"My application in main method reads parameters and runs Spring application. My Configuration with DataSource bean inside needs to read one of the parameter to use in initialization of datasource.\r\n\r\n**Application class**\r\n```\r\npublic static void main(String[] args) throws ParseException, IOException {\r\n   SpringApplication application = new SpringApplication(BpMaterializedViewToolApplication.class);\r\n\r\n   CommandLine cmd = getCmd(args);\r\n \r\n   String credentialsPropertyPrefix = cmd.getOptionValue(CREDENTIALS_PROPERTY_PREFIX_ARGUMENT);\r\n\r\n   application.run(credentialsPropertyPrefix);\r\n}\r\n\r\n@Override\r\npublic void run(String... args) {\r\n   someMethod(args[0]);\r\n}\r\n\r\n```\r\n\r\n**Configuration class**\r\n\r\n```\r\n@Configuration\r\npublic class DataSourceConfig {\r\n\r\n    @Value(&quot;${credentialsPropertyPrefix}&quot;) // doesn&#39;t work, but need something like this\r\n    private String credentialsPropertyPrefix;\r\n\r\n    @Autowired\r\n    private Environment env;\r\n\r\n    @Bean\r\n    @Primary\r\n    public DataSource getDataSource() {\r\n        String username = env.getProperty(credentialsPropertyPrefix + &quot;.username&quot;); // credentialsPropertyPrefix needs to be present there\r\n        ...\r\n    }\r\n\r\n```\r\n\r\n\r\nSo I need my `DataSource getDataSource()` to properly read that `credentialsPropertyPrefix` argument and use in datasource.","title":"How to inject/pass value into @Configuration-bean after/in application.run() method?","body":"<p>My application in main method reads parameters and runs Spring application. My Configuration with DataSource bean inside needs to read one of the parameter to use in initialization of datasource.</p>\n<p><strong>Application class</strong></p>\n<pre><code>public static void main(String[] args) throws ParseException, IOException {\n   SpringApplication application = new SpringApplication(BpMaterializedViewToolApplication.class);\n\n   CommandLine cmd = getCmd(args);\n \n   String credentialsPropertyPrefix = cmd.getOptionValue(CREDENTIALS_PROPERTY_PREFIX_ARGUMENT);\n\n   application.run(credentialsPropertyPrefix);\n}\n\n@Override\npublic void run(String... args) {\n   someMethod(args[0]);\n}\n\n</code></pre>\n<p><strong>Configuration class</strong></p>\n<pre><code>@Configuration\npublic class DataSourceConfig {\n\n    @Value(&quot;${credentialsPropertyPrefix}&quot;) // doesn't work, but need something like this\n    private String credentialsPropertyPrefix;\n\n    @Autowired\n    private Environment env;\n\n    @Bean\n    @Primary\n    public DataSource getDataSource() {\n        String username = env.getProperty(credentialsPropertyPrefix + &quot;.username&quot;); // credentialsPropertyPrefix needs to be present there\n        ...\n    }\n\n</code></pre>\n<p>So I need my <code>DataSource getDataSource()</code> to properly read that <code>credentialsPropertyPrefix</code> argument and use in datasource.</p>\n"},{"tags":["java","apache-poi","conditional-formatting"],"comments":[{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":1,"creation_date":1670418342,"post_id":74716993,"comment_id":131871539,"body_markdown":"You will need to elaborate on the `it should highlight the selected cells in column &#39;J&#39; but the entire column &#39;J&#39; is getting highlighted` part. The screenshot shows the same values over and over, so no wonder they all get red font. And from what I can tell, it is not an issue with cell range you are highlighting. So you should also elaborate on what actually the issue is. Also some raw data would help to reproduce the issue","body":"You will need to elaborate on the <code>it should highlight the selected cells in column &#39;J&#39; but the entire column &#39;J&#39; is getting highlighted</code> part. The screenshot shows the same values over and over, so no wonder they all get red font. And from what I can tell, it is not an issue with cell range you are highlighting. So you should also elaborate on what actually the issue is. Also some raw data would help to reproduce the issue"},{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":2,"creation_date":1670419998,"post_id":74716993,"comment_id":131872095,"body_markdown":"Can&#39;t reproduce anything in excel with that information. However, you might want to evaluate formulas before writing to file: `workbook.getCreationHelper().createFormulaEvaluator().evaluateAll();`","body":"Can&#39;t reproduce anything in excel with that information. However, you might want to evaluate formulas before writing to file: <code>workbook.getCreationHelper().createFormulaEvaluator().evalua&zwnj;&#8203;teAll();</code>"},{"owner":{"account_id":19313733,"reputation":355,"user_id":14118943,"display_name":"Chennai Cheetah"},"score":0,"creation_date":1670499109,"post_id":74716993,"comment_id":131891652,"body_markdown":"@XtremeBaumer I have updated the post and added the xml related information. Let me know if this helps","body":"@XtremeBaumer I have updated the post and added the xml related information. Let me know if this helps"},{"owner":{"account_id":19313733,"reputation":355,"user_id":14118943,"display_name":"Chennai Cheetah"},"score":0,"creation_date":1670500010,"post_id":74716993,"comment_id":131891946,"body_markdown":"@XtremeBaumer By the way evaluate formula didn&#39;t help.","body":"@XtremeBaumer By the way evaluate formula didn&#39;t help."},{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":1,"creation_date":1670500364,"post_id":74716993,"comment_id":131892058,"body_markdown":"I strongly believe that you are either omitting crucial information or that the formula is broken as it is. Unless you can provide a reproducible example I don&#39;t see any way we can help you","body":"I strongly believe that you are either omitting crucial information or that the formula is broken as it is. Unless you can provide a reproducible example I don&#39;t see any way we can help you"},{"owner":{"account_id":19313733,"reputation":355,"user_id":14118943,"display_name":"Chennai Cheetah"},"score":0,"creation_date":1670559236,"post_id":74716993,"comment_id":131907322,"body_markdown":"@XtremeBaumer I have added the full code for reference with all snapshots.","body":"@XtremeBaumer I have added the full code for reference with all snapshots."},{"owner":{"account_id":4912982,"reputation":14853,"user_id":3957754,"accept_rate":50,"display_name":"JRichardsz"},"score":0,"creation_date":1670907372,"post_id":74716993,"comment_id":131976064,"body_markdown":"Did you validated if the formula is applied to all the rows of column J ?","body":"Did you validated if the formula is applied to all the rows of column J ?"},{"owner":{"account_id":14781952,"reputation":120,"user_id":10675247,"display_name":"Philippe Fery"},"score":0,"creation_date":1671020376,"post_id":74716993,"comment_id":132005963,"body_markdown":"Try to replace your formula by: `String kkf =&quot;IF(AND(NOT(ISBLANK(J4)),NOT(ISNUMBER(FIND(J4,PossibleValues!$D$2)))),TRUE,FALSE)&quot;;` It works for me (but it is case sensitive)","body":"Try to replace your formula by: <code>String kkf =&quot;IF(AND(NOT(ISBLANK(J4)),NOT(ISNUMBER(FIND(J4,PossibleValue&zwnj;&#8203;s!$D$2)))),TRUE,FALS&zwnj;&#8203;E)&quot;;</code> It works for me (but it is case sensitive)"},{"owner":{"account_id":19313733,"reputation":355,"user_id":14118943,"display_name":"Chennai Cheetah"},"score":0,"creation_date":1671021566,"post_id":74716993,"comment_id":132006371,"body_markdown":"@PhilippeFery Thanks for the reply.. it worked..but one catch is the formula u provided will handle one value at a time. If I enter comma-separate ones like (FL,MD) it is highlighting that as well. The expectation is to handle comma-separated values also","body":"@PhilippeFery Thanks for the reply.. it worked..but one catch is the formula u provided will handle one value at a time. If I enter comma-separate ones like (FL,MD) it is highlighting that as well. The expectation is to handle comma-separated values also"},{"owner":{"account_id":14781952,"reputation":120,"user_id":10675247,"display_name":"Philippe Fery"},"score":0,"creation_date":1671022214,"post_id":74716993,"comment_id":132006604,"body_markdown":"Ok, I will have a look at it","body":"Ok, I will have a look at it"},{"owner":{"account_id":7547772,"reputation":8583,"user_id":5730279,"display_name":"hc_dev"},"score":0,"creation_date":1671281445,"post_id":74716993,"comment_id":132068263,"body_markdown":"Should mention related your question for [conditional formatting comma-separated values](https://stackoverflow.com/questions/74370667/apache-poi-conditional-formatting-for-comma-separated-values-mismatch), particularly if this is a requirement here.","body":"Should mention related your question for <a href=\"https://stackoverflow.com/questions/74370667/apache-poi-conditional-formatting-for-comma-separated-values-mismatch\">conditional formatting comma-separated values</a>, particularly if this is a requirement here."}],"answers":[{"tags":[],"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1671282413,"creation_date":1671258384,"answer_id":74832216,"question_id":74716993,"body_markdown":"## Short answer\r\n\r\nThe problem is with the `FILTERXML` function used in your conditional formatting. This should be prefixed `_xlfn` in XML sheet storage. To make it work your formula should be changed to following:\r\n\r\n```java\r\nString kkf = &quot;IF(AND(NOT(ISBLANK(J4)),ISERROR(SUM(MATCH(_xlfn.FILTERXML(\\&quot;&lt;t&gt;&lt;s&gt;\\&quot;&amp;SUBSTITUTE(J4,\\&quot;,\\&quot;,\\&quot;&lt;/s&gt;&lt;s&gt;\\&quot;)&amp;\\&quot;&lt;/s&gt;&lt;/t&gt;\\&quot;,\\&quot;//s\\&quot;),_xlfn.FILTERXML(\\&quot;&lt;t&gt;&lt;s&gt;\\&quot;&amp;SUBSTITUTE(PossibleValues!$D$2,\\&quot;,\\&quot;,\\&quot;&lt;/s&gt;&lt;s&gt;\\&quot;)&amp;\\&quot;&lt;/s&gt;&lt;/t&gt;\\&quot;,\\&quot;//s\\&quot;),0))),\\&quot;\\&quot;),TRUE())&quot;;\r\n```\r\n\r\n### Reason\r\n\r\n[FILTERXML function](https://support.microsoft.com/en-us/office/filterxml-function-4df72efc-11ec-4951-86f5-c1374812f5b7) was introduced in Excel 2013. So it was introduced after Microsoft had published the `Office Open XML` file format for Microsoft Office files in 2006 for Office 2007. To mark such later introduced functions, Microsoft decided to prefix them with `_xlfn` in XML storage. After reading the XML, the Excel GUI knows whether the function is known in that Excel version or not. If yes, the prefix gets removed and the function name gets localized (e.g. in German Excel: to `XMLFILTER`). If not, the prefix remains and the user also knows that this function is unknown in that Excel version. See [Issue: An _xlfn. prefix is displayed in front of a formula](https://support.microsoft.com/en-us/office/issue-an-xlfn-prefix-is-displayed-in-front-of-a-formula-882f1ef7-68fb-4fcd-8d54-9fbb77fd5025).\r\n\r\n\r\n### Why we need the storage formula version?\r\n\r\nIn Apache POI `Cell.setCellFormula` as well as `SheetConditionalFormatting.createConditionalFormattingRule` sets the formula string into the XML directly. So that string must be exactly as it shall be stored in XML.\r\n\r\n### Learn more about this by inspecting the file-formats\r\n\r\n`Office Open XML` files, and so also `*.xlsx` files, are ZIP archives containing XML files and other files into a specific directory structure. So one simply can unzip a `*.xlsx` file to have a look into.\r\n\r\nSo after creating your `color.xlsx` using your code, unzip it and have a look into `xl/worksheets/sheet1.xml`.\r\n\r\nYou will find something like:\r\n\r\n    &lt;conditionalFormatting sqref=&quot;J4:J10000&quot;&gt;\r\n     &lt;cfRule type=&quot;expression&quot; dxfId=&quot;1&quot; priority=&quot;2&quot;&gt;\r\n      &lt;formula&gt;\r\n       &lt;![CDATA[ IF(AND(NOT(ISBLANK(J4)),ISERROR(SUM(MATCH(FILTERXML(&quot;&lt;t&gt;&lt;s&gt;&quot;&amp;SUBSTITUTE(J4,&quot;,&quot;,&quot;&lt;/s&gt;&lt;s&gt;&quot;)&amp;&quot;&lt;/s&gt;&lt;/t&gt;&quot;,&quot;//s&quot;),FILTERXML(&quot;&lt;t&gt;&lt;s&gt;&quot;&amp;SUBSTITUTE(PossibleValues!$D$2,&quot;,&quot;,&quot;&lt;/s&gt;&lt;s&gt;&quot;)&amp;&quot;&lt;/s&gt;&lt;/t&gt;&quot;,&quot;//s&quot;),0))),&quot;&quot;),TRUE()) ]]&gt;\r\n      &lt;/formula&gt;\r\n     &lt;/cfRule&gt;\r\n    &lt;/conditionalFormatting&gt;\r\n\r\nAnd this does not work in Excel.\r\n\r\nNow open the `color.xlsx` in Excel and make it work. Then save the the `color.xlsx`, unzip it again and have a look into `xl/worksheets/sheet1.xml`.\r\n\r\nYou will find something like:\r\n\r\n    &lt;x14:conditionalFormattings&gt;\r\n     &lt;x14:conditionalFormatting xmlns:xm=&quot;http://schemas.microsoft.com/office/excel/2006/main&quot;&gt;\r\n      &lt;x14:cfRule type=&quot;expression&quot; priority=&quot;2&quot; id=&quot;{00000000-000E-0000-0000-000002000000}&quot;&gt;\r\n       &lt;xm:f&gt;IF(AND(NOT(ISBLANK(J4)),ISERROR(SUM(MATCH(_xlfn.FILTERXML(&quot;&lt;t&gt;&lt;s&gt;&quot;&amp;SUBSTITUTE(J4,&quot;,&quot;,&quot;&lt;/s&gt;&lt;s&gt;&quot;)&amp;&quot;&lt;/s&gt;&lt;/t&gt;&quot;,&quot;//s&quot;),_xlfn.FILTERXML(&quot;&lt;t&gt;&lt;s&gt;&quot;&amp;SUBSTITUTE(PossibleValues!$D$2,&quot;,&quot;,&quot;&lt;/s&gt;&lt;s&gt;&quot;)&amp;&quot;&lt;/s&gt;&lt;/t&gt;&quot;,&quot;//s&quot;),0))),&quot;&quot;),TRUE())&lt;/xm:f&gt;\r\n      ...\r\n      &lt;/x14:cfRule&gt;\r\n      ...\r\n     &lt;/x14:conditionalFormatting&gt;\r\n    &lt;/x14:conditionalFormattings&gt;\r\n\r\nThis shows the `_xlfn` prefix before `FILTERXML` in formula string.\r\n\r\nIt also shows that a totally different version of conditional formatting is used. But that&#39;s a secondary problem. The prefixed version of the formula string also works using as formula string within the old version of `conditionalFormatting`. But, of course that is not guaranteed in all cases. So to be on save side for all cases, one of two possibilities must be given:\r\n\r\n* either one avoids using all Excel functions introduced after publishing `Office Open XML` in 2006 (Office 2007)\r\n* or Apache POI has to fully support all changes Microsoft made after publishing `Office Open XML` in 2006 (Office 2007). \r\n\r\nTo fulfill the latter Apache POI is far away. It not even supports all features of Office 2007 up to now.","title":"Conditional formatting highlight only invalid cells","body":"<h2>Short answer</h2>\n<p>The problem is with the <code>FILTERXML</code> function used in your conditional formatting. This should be prefixed <code>_xlfn</code> in XML sheet storage. To make it work your formula should be changed to following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String kkf = &quot;IF(AND(NOT(ISBLANK(J4)),ISERROR(SUM(MATCH(_xlfn.FILTERXML(\\&quot;&lt;t&gt;&lt;s&gt;\\&quot;&amp;SUBSTITUTE(J4,\\&quot;,\\&quot;,\\&quot;&lt;/s&gt;&lt;s&gt;\\&quot;)&amp;\\&quot;&lt;/s&gt;&lt;/t&gt;\\&quot;,\\&quot;//s\\&quot;),_xlfn.FILTERXML(\\&quot;&lt;t&gt;&lt;s&gt;\\&quot;&amp;SUBSTITUTE(PossibleValues!$D$2,\\&quot;,\\&quot;,\\&quot;&lt;/s&gt;&lt;s&gt;\\&quot;)&amp;\\&quot;&lt;/s&gt;&lt;/t&gt;\\&quot;,\\&quot;//s\\&quot;),0))),\\&quot;\\&quot;),TRUE())&quot;;\n</code></pre>\n<h3>Reason</h3>\n<p><a href=\"https://support.microsoft.com/en-us/office/filterxml-function-4df72efc-11ec-4951-86f5-c1374812f5b7\" rel=\"nofollow noreferrer\">FILTERXML function</a> was introduced in Excel 2013. So it was introduced after Microsoft had published the <code>Office Open XML</code> file format for Microsoft Office files in 2006 for Office 2007. To mark such later introduced functions, Microsoft decided to prefix them with <code>_xlfn</code> in XML storage. After reading the XML, the Excel GUI knows whether the function is known in that Excel version or not. If yes, the prefix gets removed and the function name gets localized (e.g. in German Excel: to <code>XMLFILTER</code>). If not, the prefix remains and the user also knows that this function is unknown in that Excel version. See <a href=\"https://support.microsoft.com/en-us/office/issue-an-xlfn-prefix-is-displayed-in-front-of-a-formula-882f1ef7-68fb-4fcd-8d54-9fbb77fd5025\" rel=\"nofollow noreferrer\">Issue: An _xlfn. prefix is displayed in front of a formula</a>.</p>\n<h3>Why we need the storage formula version?</h3>\n<p>In Apache POI <code>Cell.setCellFormula</code> as well as <code>SheetConditionalFormatting.createConditionalFormattingRule</code> sets the formula string into the XML directly. So that string must be exactly as it shall be stored in XML.</p>\n<h3>Learn more about this by inspecting the file-formats</h3>\n<p><code>Office Open XML</code> files, and so also <code>*.xlsx</code> files, are ZIP archives containing XML files and other files into a specific directory structure. So one simply can unzip a <code>*.xlsx</code> file to have a look into.</p>\n<p>So after creating your <code>color.xlsx</code> using your code, unzip it and have a look into <code>xl/worksheets/sheet1.xml</code>.</p>\n<p>You will find something like:</p>\n<pre><code>&lt;conditionalFormatting sqref=&quot;J4:J10000&quot;&gt;\n &lt;cfRule type=&quot;expression&quot; dxfId=&quot;1&quot; priority=&quot;2&quot;&gt;\n  &lt;formula&gt;\n   &lt;![CDATA[ IF(AND(NOT(ISBLANK(J4)),ISERROR(SUM(MATCH(FILTERXML(&quot;&lt;t&gt;&lt;s&gt;&quot;&amp;SUBSTITUTE(J4,&quot;,&quot;,&quot;&lt;/s&gt;&lt;s&gt;&quot;)&amp;&quot;&lt;/s&gt;&lt;/t&gt;&quot;,&quot;//s&quot;),FILTERXML(&quot;&lt;t&gt;&lt;s&gt;&quot;&amp;SUBSTITUTE(PossibleValues!$D$2,&quot;,&quot;,&quot;&lt;/s&gt;&lt;s&gt;&quot;)&amp;&quot;&lt;/s&gt;&lt;/t&gt;&quot;,&quot;//s&quot;),0))),&quot;&quot;),TRUE()) ]]&gt;\n  &lt;/formula&gt;\n &lt;/cfRule&gt;\n&lt;/conditionalFormatting&gt;\n</code></pre>\n<p>And this does not work in Excel.</p>\n<p>Now open the <code>color.xlsx</code> in Excel and make it work. Then save the the <code>color.xlsx</code>, unzip it again and have a look into <code>xl/worksheets/sheet1.xml</code>.</p>\n<p>You will find something like:</p>\n<pre><code>&lt;x14:conditionalFormattings&gt;\n &lt;x14:conditionalFormatting xmlns:xm=&quot;http://schemas.microsoft.com/office/excel/2006/main&quot;&gt;\n  &lt;x14:cfRule type=&quot;expression&quot; priority=&quot;2&quot; id=&quot;{00000000-000E-0000-0000-000002000000}&quot;&gt;\n   &lt;xm:f&gt;IF(AND(NOT(ISBLANK(J4)),ISERROR(SUM(MATCH(_xlfn.FILTERXML(&quot;&lt;t&gt;&lt;s&gt;&quot;&amp;SUBSTITUTE(J4,&quot;,&quot;,&quot;&lt;/s&gt;&lt;s&gt;&quot;)&amp;&quot;&lt;/s&gt;&lt;/t&gt;&quot;,&quot;//s&quot;),_xlfn.FILTERXML(&quot;&lt;t&gt;&lt;s&gt;&quot;&amp;SUBSTITUTE(PossibleValues!$D$2,&quot;,&quot;,&quot;&lt;/s&gt;&lt;s&gt;&quot;)&amp;&quot;&lt;/s&gt;&lt;/t&gt;&quot;,&quot;//s&quot;),0))),&quot;&quot;),TRUE())&lt;/xm:f&gt;\n  ...\n  &lt;/x14:cfRule&gt;\n  ...\n &lt;/x14:conditionalFormatting&gt;\n&lt;/x14:conditionalFormattings&gt;\n</code></pre>\n<p>This shows the <code>_xlfn</code> prefix before <code>FILTERXML</code> in formula string.</p>\n<p>It also shows that a totally different version of conditional formatting is used. But that's a secondary problem. The prefixed version of the formula string also works using as formula string within the old version of <code>conditionalFormatting</code>. But, of course that is not guaranteed in all cases. So to be on save side for all cases, one of two possibilities must be given:</p>\n<ul>\n<li>either one avoids using all Excel functions introduced after publishing <code>Office Open XML</code> in 2006 (Office 2007)</li>\n<li>or Apache POI has to fully support all changes Microsoft made after publishing <code>Office Open XML</code> in 2006 (Office 2007).</li>\n</ul>\n<p>To fulfill the latter Apache POI is far away. It not even supports all features of Office 2007 up to now.</p>\n"},{"tags":[],"owner":{"account_id":14781952,"reputation":120,"user_id":10675247,"display_name":"Philippe Fery"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671277231,"creation_date":1671277231,"answer_id":74833771,"question_id":74716993,"body_markdown":"If using VBA is an acceptable solution for you, then a possible solution would be to create an .xlsm file containing the functions needed for conditional formatting.\r\n\r\n1. Create manually the color.xlsm file\r\n2. Add the 2 empty sheets &quot;Ruleset&quot; and &quot;PossibleValues&quot;\r\n3. Open VBA editor\r\n4. In sheet &quot;Ruleset&quot; add following Sub:\r\n\r\n&gt;     Private Sub Worksheet_Change(ByVal Target As Range)\r\n&gt;         If Not Intersect(Target, Range(&quot;$j$4:$j$1000&quot;)) Is Nothing Then\r\n&gt;             Highlight Target\r\n&gt;         End If\r\n&gt;     End Sub\r\n\r\n5. Create a VBA Module and add following Sub...\r\n\r\n&gt;     Sub Highlight(ByVal Cell As Range)\r\n&gt;         Dim Entry() As String\r\n&gt;         Entry = Split(Cell.Value, &quot;,&quot;)     \r\n&gt;         Dim StatesString As String\r\n&gt;         StatesString = UCase(Worksheets(&quot;PossibleValues&quot;).Range(&quot;D2&quot;).Value)\r\n&gt;         Dim States() As String\r\n&gt;         States = Split(StatesString, &quot;,&quot;)\r\n&gt;     \r\n&gt;         Dim Matches As Integer\r\n&gt;         Matches = 0\r\n&gt;         For EntryIdx = 0 To UBound(Entry)\r\n&gt;             If (IsInArray(Entry(EntryIdx), States)) Then\r\n&gt;                 Matches = Matches + 1\r\n&gt;             End If\r\n&gt;         Next EntryIdx\r\n&gt;     \r\n&gt;         If (UBound(Entry) + 1 = Matches) Then\r\n&gt;             Cell.Font.Color = vbBlack\r\n&gt;         Else\r\n&gt;             Cell.Font.Color = vbRed\r\n&gt;         End If End Sub\r\n\r\n...and the following function:\r\n\r\n&gt;     Private Function IsInArray(valToBeFound As Variant, arr As Variant) As Boolean\r\n&gt;         &#39;DEVELOPER: Ryan Wells (wellsr.com)\r\n&gt;         &#39;DESCRIPTION: Function to check if a value is in an array of values\r\n&gt;         &#39;INPUT: Pass the function a value to search for and an array of values of any data type.\r\n&gt;         &#39;OUTPUT: True if is in array, false otherwise\r\n&gt;         Dim element As Variant\r\n&gt;         On Error GoTo IsInArrayError: &#39;array is empty\r\n&gt;         For Each element In arr\r\n&gt;             If element = valToBeFound Then\r\n&gt;                 IsInArray = True\r\n&gt;                 Exit Function\r\n&gt;             End If\r\n&gt;         Next element\r\n&gt;     Exit Function\r\n&gt;     IsInArrayError:\r\n&gt;     On Error GoTo 0\r\n&gt;     IsInArray = False\r\n&gt;     End Function\r\n\r\n6. Finally, you will need to adapt your code to open this manually created .xlsm file rather than creating it programmatically.\r\n\r\nHope it helps\r\n","title":"Conditional formatting highlight only invalid cells","body":"<p>If using VBA is an acceptable solution for you, then a possible solution would be to create an .xlsm file containing the functions needed for conditional formatting.</p>\n<ol>\n<li>Create manually the color.xlsm file</li>\n<li>Add the 2 empty sheets &quot;Ruleset&quot; and &quot;PossibleValues&quot;</li>\n<li>Open VBA editor</li>\n<li>In sheet &quot;Ruleset&quot; add following Sub:</li>\n</ol>\n<blockquote>\n<pre><code>Private Sub Worksheet_Change(ByVal Target As Range)\n    If Not Intersect(Target, Range(&quot;$j$4:$j$1000&quot;)) Is Nothing Then\n        Highlight Target\n    End If\nEnd Sub\n</code></pre>\n</blockquote>\n<ol start=\"5\">\n<li>Create a VBA Module and add following Sub...</li>\n</ol>\n<blockquote>\n<pre><code>Sub Highlight(ByVal Cell As Range)\n    Dim Entry() As String\n    Entry = Split(Cell.Value, &quot;,&quot;)     \n    Dim StatesString As String\n    StatesString = UCase(Worksheets(&quot;PossibleValues&quot;).Range(&quot;D2&quot;).Value)\n    Dim States() As String\n    States = Split(StatesString, &quot;,&quot;)\n\n    Dim Matches As Integer\n    Matches = 0\n    For EntryIdx = 0 To UBound(Entry)\n        If (IsInArray(Entry(EntryIdx), States)) Then\n            Matches = Matches + 1\n        End If\n    Next EntryIdx\n\n    If (UBound(Entry) + 1 = Matches) Then\n        Cell.Font.Color = vbBlack\n    Else\n        Cell.Font.Color = vbRed\n    End If End Sub\n</code></pre>\n</blockquote>\n<p>...and the following function:</p>\n<blockquote>\n<pre><code>Private Function IsInArray(valToBeFound As Variant, arr As Variant) As Boolean\n    'DEVELOPER: Ryan Wells (wellsr.com)\n    'DESCRIPTION: Function to check if a value is in an array of values\n    'INPUT: Pass the function a value to search for and an array of values of any data type.\n    'OUTPUT: True if is in array, false otherwise\n    Dim element As Variant\n    On Error GoTo IsInArrayError: 'array is empty\n    For Each element In arr\n        If element = valToBeFound Then\n            IsInArray = True\n            Exit Function\n        End If\n    Next element\nExit Function\nIsInArrayError:\nOn Error GoTo 0\nIsInArray = False\nEnd Function\n</code></pre>\n</blockquote>\n<ol start=\"6\">\n<li>Finally, you will need to adapt your code to open this manually created .xlsm file rather than creating it programmatically.</li>\n</ol>\n<p>Hope it helps</p>\n"}],"owner":{"account_id":19313733,"reputation":355,"user_id":14118943,"display_name":"Chennai Cheetah"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":336,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":74832216,"answer_count":2,"score":3,"last_activity_date":1671282413,"creation_date":1670417428,"question_id":74716993,"body_markdown":"I am creating below conditional formatting rule in Apache POI.\r\n\r\n## Issue\r\nExpected: \r\n* The formula should highlight only invalid values in column &#39;J&#39;.\r\n\r\nActual:\r\n* But all values of the entire column &#39;J&#39; get highlighted, even for valid values.\r\n\r\n### Formula\r\n```java\r\nString kkf=&quot;IF(AND(NOT(ISBLANK(J4)),ISERROR(SUM(MATCH(FILTERXML(\\&quot;&lt;t&gt;&lt;s&gt;\\&quot;&amp;SUBSTITUTE(J4,\\&quot;,\\&quot;,\\&quot;&lt;/s&gt;&lt;s&gt;\\&quot;)&amp;\\&quot;&lt;/s&gt;&lt;/t&gt;\\&quot;,\\&quot;//s\\&quot;),FILTERXML(\\&quot;&lt;t&gt;&lt;s&gt;\\&quot;&amp;SUBSTITUTE(PossibleValues!$D$2,\\&quot;,\\&quot;,\\&quot;&lt;/s&gt;&lt;s&gt;\\&quot;)&amp;\\&quot;&lt;/s&gt;&lt;/t&gt;\\&quot;,\\&quot;//s\\&quot;),0))),\\&quot;\\&quot;),TRUE())&quot;;\r\n```\r\n\r\n## Full Code\r\n\r\n```java\r\nimport java.util.ArrayList;\r\n\r\nimport org.apache.commons.io.FileUtils;\r\nimport org.json.CDL;\r\nimport org.json.JSONArray;\r\nimport org.json.JSONException;\r\nimport org.json.JSONObject;\r\n\r\nimport  java.io.*;\r\nimport  org.apache.poi.hssf.usermodel.HSSFSheet;\r\nimport  org.apache.poi.hssf.usermodel.HSSFWorkbook;\r\nimport org.apache.poi.hssf.util.HSSFColor;\r\nimport org.apache.poi.xssf.usermodel.XSSFCellStyle;\r\nimport org.apache.poi.xssf.usermodel.XSSFFont;\r\nimport org.apache.poi.xssf.usermodel.XSSFHyperlink;\r\nimport org.apache.poi.xssf.usermodel.XSSFRow;\r\nimport org.apache.poi.xssf.usermodel.XSSFSheet;\r\nimport org.apache.poi.xssf.usermodel.XSSFWorkbook;\r\nimport org.apache.poi.ss.usermodel.BorderStyle;\r\nimport org.apache.poi.ss.usermodel.Cell;\r\nimport org.apache.poi.ss.usermodel.CellStyle;\r\nimport org.apache.poi.ss.usermodel.ComparisonOperator;\r\nimport org.apache.poi.ss.usermodel.ConditionalFormattingRule;\r\nimport org.apache.poi.ss.usermodel.CreationHelper;\r\nimport org.apache.poi.ss.usermodel.DataFormatter;\r\nimport org.apache.poi.ss.usermodel.FillPatternType;\r\nimport org.apache.poi.ss.usermodel.Font;\r\nimport org.apache.poi.ss.usermodel.FormulaEvaluator;\r\nimport org.apache.poi.ss.usermodel.HorizontalAlignment;\r\nimport org.apache.poi.ss.usermodel.IndexedColors;\r\nimport org.apache.poi.ss.usermodel.Row;\r\nimport org.apache.poi.ss.usermodel.SheetConditionalFormatting;\r\nimport org.apache.poi.ss.usermodel.VerticalAlignment;\r\nimport org.apache.poi.ss.util.CellRangeAddress;\r\nimport org.apache.poi.ss.util.CellReference;\r\nimport org.apache.poi.common.usermodel.Hyperlink;\r\nimport org.apache.poi.hssf.usermodel.HSSFCellStyle;\r\nimport  org.apache.poi.hssf.usermodel.HSSFRow;\r\n\r\npublic class Red {\r\n    public static void main(String[] args) throws Exception{\r\n\r\nString str=&quot;{\\&quot;rulesetgroupname\\&quot;:\\&quot;Coastal122\\&quot;,\\&quot;downloadtype\\&quot;:\\&quot;Template\\&quot;,\\&quot;rulesetid\\&quot;:\\&quot;638a0ac02944f902b1eebab3\\&quot;,\\&quot;rulesetversion\\&quot;:\\&quot;0.1\\&quot;,\\&quot;rulegroupid\\&quot;:\\&quot;638a09f28bd88c16a76fa599\\&quot;,\\&quot;product\\&quot;:\\&quot;CAT\\&quot;,\\&quot;ruletype\\&quot;:\\&quot;ERWR\\&quot;,\\&quot;dataobjects\\&quot;:\\&quot;Location 24,Class Codes 24,BPP Covg 24,Building Covg 24,Building 24,Policy 24\\&quot;,\\&quot;ruletemplateversion\\&quot;:\\&quot;1\\&quot;,\\&quot;ruleTemplaeResponseId\\&quot;:\\&quot;638a09f28bd88c16a76fa599\\&quot;,\\&quot;dataobject\\&quot;:\\&quot;Location 24\\&quot;,\\&quot;rulegroup\\&quot;:\\&quot;CAT Testing122\\&quot;,\\&quot;metadataheaders\\&quot;:[\\&quot;Rule Name\\&quot;,\\&quot;Rule Label\\&quot;,\\&quot;Modified By\\&quot;,\\&quot;Modified At\\&quot;,\\&quot;Rule ID\\&quot;,\\&quot;Rule Status (Add/Change/Expire/Verify)\\&quot;,\\&quot;Effective Date [MM/DD/YYYY]\\&quot;,\\&quot;Expiration Date [MM/DD/YYYY]\\&quot;,\\&quot;Has Rule Changed?\\&quot;],\\&quot;conditionheaders\\&quot;:[{\\&quot;label\\&quot;:\\&quot;State\\&quot;,\\&quot;type\\&quot;:\\&quot;Collection\\&quot;,\\&quot;name\\&quot;:\\&quot;State\\&quot;,\\&quot;dataobject\\&quot;:\\&quot;Location 24\\&quot;,\\&quot;values\\&quot;:\\&quot;NC,SC,TX,VA,MA,GA,AL,IL,DE,NY,MS,NH,RI,ME,FL,MN,CT,NJ,MD\\&quot;},{\\&quot;label\\&quot;:\\&quot;Counties\\&quot;,\\&quot;type\\&quot;:\\&quot;Collection\\&quot;,\\&quot;name\\&quot;:\\&quot;Counties\\&quot;,\\&quot;dataobject\\&quot;:\\&quot;Location 24\\&quot;,\\&quot;values\\&quot;:\\&quot;\\&quot;},{\\&quot;label\\&quot;:\\&quot;Zip Codes\\&quot;,\\&quot;type\\&quot;:\\&quot;Collection\\&quot;,\\&quot;name\\&quot;:\\&quot;ZipCodes\\&quot;,\\&quot;dataobject\\&quot;:\\&quot;Location 24\\&quot;,\\&quot;values\\&quot;:\\&quot;\\&quot;}],\\&quot;outcomeheaders\\&quot;:[{\\&quot;label\\&quot;:\\&quot;Output\\&quot;,\\&quot;type\\&quot;:\\&quot;String\\&quot;,\\&quot;name\\&quot;:\\&quot;RuleCode\\&quot;,\\&quot;dataobject\\&quot;:\\&quot;Location 24\\&quot;}]}&quot;;\r\n\r\n    \tJSONObject output;\r\n        try {\r\n            output = new JSONObject(str);\r\n\r\n          \r\n            \r\n            String filename = &quot;D:\\\\project\\\\excel\\\\color.xlsx&quot; ;\r\n            \r\n\r\n\t\t\tXSSFWorkbook workbook = new XSSFWorkbook();\r\n\t\t\tString rulegroup = output.getString(&quot;rulegroup&quot;);\r\n\t\t\tString downloadtype = output.getString(&quot;downloadtype&quot;);\r\n\t\t\tXSSFSheet sheet = workbook.createSheet(&quot;Ruleset&quot;);\r\n\r\n\t\t\tsheet.setDefaultColumnWidth(10);\r\n\r\n\t\t\tArrayList&lt;String&gt; headers = new ArrayList&lt;String&gt;();\r\n\t\t\tArrayList&lt;String&gt; nameheaders = new ArrayList&lt;String&gt;();\r\n\r\n\t\t\t// Top Element Font\r\n\r\n\t\t\tFont font31 = workbook.createFont();\r\n\t\t\tfont31.setColor(HSSFColor.HSSFColorPredefined.BLACK.getIndex());\r\n\t\t\tfont31.setBold(true);\r\n\t\t\t\r\n\t\t\tXSSFCellStyle style12 = workbook.createCellStyle();\r\n\t\t\tstyle12.setFillForegroundColor(HSSFColor.HSSFColorPredefined.PALE_BLUE.getIndex());\r\n\t\t\tstyle12.setFillPattern(FillPatternType.SOLID_FOREGROUND);\r\n\t\t\tstyle12.setAlignment(HorizontalAlignment.CENTER);\r\n\t\t\tstyle12.setVerticalAlignment(VerticalAlignment.CENTER);\r\n\t\t\tstyle12.setBorderTop(BorderStyle.MEDIUM);\r\n\t\t\tstyle12.setBorderBottom(BorderStyle.MEDIUM);\r\n\t\t\tstyle12.setBorderLeft(BorderStyle.MEDIUM);\r\n\t\t\tstyle12.setBorderRight(BorderStyle.MEDIUM);\r\n\t\t\tstyle12.setWrapText(true);\r\n\t\t\tstyle12.setFont(font31);\r\n\t\t\t\r\n\t\t\tXSSFCellStyle style13 = workbook.createCellStyle();\r\n\t\t\tstyle13.setFillForegroundColor(HSSFColor.HSSFColorPredefined.GREY_40_PERCENT.getIndex());\r\n\t\t\tstyle13.setFillPattern(FillPatternType.SOLID_FOREGROUND);\r\n\t\t\tstyle13.setAlignment(HorizontalAlignment.CENTER);\r\n\t\t\tstyle13.setVerticalAlignment(VerticalAlignment.CENTER);\r\n\t\t\tstyle13.setBorderTop(BorderStyle.MEDIUM);\r\n\t\t\tstyle13.setBorderBottom(BorderStyle.MEDIUM);\r\n\t\t\tstyle13.setBorderLeft(BorderStyle.MEDIUM);\r\n\t\t\tstyle13.setBorderRight(BorderStyle.MEDIUM);\r\n\t\t\tstyle13.setWrapText(true);\r\n\t\t\tstyle13.setFont(font31);\r\n\r\n\t\t\tXSSFCellStyle style14 = workbook.createCellStyle();\r\n\t\t\tFont font32 = workbook.createFont();\r\n\t\t\tfont32.setBold(true);\r\n\t\t\tfont32.setColor(HSSFColor.HSSFColorPredefined.BLACK.getIndex());\r\n\t\t\tstyle14.setBorderTop(BorderStyle.MEDIUM);\r\n\t\t\tstyle14.setBorderBottom(BorderStyle.MEDIUM);\r\n\t\t\tstyle14.setBorderLeft(BorderStyle.MEDIUM);\r\n\t\t\tstyle14.setBorderRight(BorderStyle.MEDIUM);\r\n\t\t\tstyle14.setAlignment(HorizontalAlignment.CENTER);\r\n\t\t\tstyle14.setVerticalAlignment(VerticalAlignment.CENTER);\r\n\t\t\tstyle14.setWrapText(true);\r\n\t\t\tstyle14.setFont(font32);\r\n\t\t\t// Get Top elements\r\n\r\n\t\t\tString product = output.getString(&quot;product&quot;);\r\n\t\t\tString ruletype = output.getString(&quot;ruletype&quot;);\r\n\t\t\tString dataobject = output.getString(&quot;dataobjects&quot;);\r\n\t\t\tString rulesetid = output.getString(&quot;rulesetid&quot;);\r\n\t\t\tString rulesetversion = output.getString(&quot;rulesetversion&quot;);\r\n\t\t\tString rulegroupid = output.getString(&quot;rulegroupid&quot;);\r\n\t\t\tString ruletemplateversion = output.getString(&quot;ruletemplateversion&quot;);\r\n\t\t\tString rulesetgroupname = output.getString(&quot;rulesetgroupname&quot;);\r\n\r\n\t\t\tXSSFRow rowhead = sheet.createRow((short) 0);\r\n\t\t\trowhead.createCell(0).setCellValue(&quot;Product/Process&quot;);\r\n\t\t\trowhead.getCell(0).setCellStyle(style14);\r\n\t\t\trowhead.createCell(1).setCellValue(product);\r\n\t\t\trowhead.getCell(1).setCellStyle(style13);\r\n\t\t\trowhead.createCell(2).setCellValue(&quot;RuleType&quot;);\r\n\t\t\trowhead.getCell(2).setCellStyle(style14);\r\n\t\t\trowhead.createCell(3).setCellValue(ruletype);\r\n\t\t\trowhead.getCell(3).setCellStyle(style13);\r\n\t\t\trowhead.createCell(4).setCellValue(&quot;DataObject&quot;);\r\n\t\t\trowhead.getCell(4).setCellStyle(style14);\r\n\t\t\trowhead.createCell(5).setCellValue(dataobject);\r\n\t\t\trowhead.getCell(5).setCellStyle(style13);\r\n\t\t\trowhead.createCell(6).setCellValue(&quot;RuleTemplate&quot;);\r\n\t\t\trowhead.getCell(6).setCellStyle(style14);\r\n\t\t\trowhead.createCell(7).setCellValue(rulegroup);\r\n\t\t\trowhead.getCell(7).setCellStyle(style13);\r\n\t\t\trowhead.createCell(8).setCellValue(&quot;RulesetID&quot;);\r\n\t\t\trowhead.getCell(8).setCellStyle(style14);\r\n\t\t\trowhead.createCell(9).setCellValue(rulesetid);\r\n\t\t\trowhead.getCell(9).setCellStyle(style13);\r\n\t\t\trowhead.createCell(10).setCellValue(&quot;RuleSetVersion&quot;);\r\n\t\t\trowhead.getCell(10).setCellStyle(style14);\r\n\t\t\trowhead.createCell(11).setCellValue(rulesetversion);\r\n\t\t\trowhead.getCell(11).setCellStyle(style13);\r\n\t\t\trowhead.createCell(12).setCellValue(&quot;RuleTemplateID&quot;);\r\n\t\t\trowhead.getCell(12).setCellStyle(style14);\r\n\t\t\trowhead.createCell(13).setCellValue(rulegroupid);\r\n\t\t\trowhead.getCell(13).setCellStyle(style13);\r\n\t\t\trowhead.createCell(14).setCellValue(&quot;RuleTemplateVersion&quot;);\r\n\t\t\trowhead.getCell(14).setCellStyle(style14);\r\n\t\t\trowhead.createCell(15).setCellValue(ruletemplateversion);\r\n\t\t\trowhead.getCell(15).setCellStyle(style13);\r\n\t\t\trowhead.createCell(16).setCellValue(&quot;RuleSetGroupName&quot;);\r\n\t\t\trowhead.getCell(16).setCellStyle(style14);\r\n\t\t\trowhead.createCell(17).setCellValue(rulesetgroupname);\r\n\t\t\trowhead.getCell(17).setCellStyle(style12);\r\n\r\n\t\t\trowhead.setHeightInPoints((2 * sheet.getDefaultRowHeightInPoints()));\r\n\r\n\t\t\tJSONArray metadataheader = output.getJSONArray(&quot;metadataheaders&quot;);\r\n\t\t\tJSONArray conditionheader = output.getJSONArray(&quot;conditionheaders&quot;);\r\n\t\t\tJSONArray outcomeheader = output.getJSONArray(&quot;outcomeheaders&quot;);\r\n\r\n\t\t\tInteger metheadcount = metadataheader.length();\r\n\t\t\tInteger conheadcount = conditionheader.length();\r\n\t\t\tInteger outheadcount = outcomeheader.length();\r\n\r\n\t\t\tmetadataheader.getString(0);\r\n\r\n\t\t\tfor (int i = 0; i &lt; metadataheader.length(); i++) {\r\n\t\t\t\theaders.add(metadataheader.getString(i));\r\n\t\t\t\tnameheaders.add(metadataheader.getString(i));\r\n\t\t\t}\r\n\r\n\t\t\tfor (int i = 0; i &lt; conditionheader.length(); i++) {\r\n\r\n\t\t\t\tJSONObject json = conditionheader.getJSONObject(i);\r\n\t\t\t\tString conname = json.getString(&quot;label&quot;);\r\n\t\t\t\tString contype = json.getString(&quot;type&quot;);\r\n\t\t\t\tString dataobject1 = json.getString(&quot;dataobject&quot;);\r\n\t\t\t\tcontype = &quot;[&quot; + contype + &quot;]&quot;;\r\n\t\t\t\tString fnl = dataobject1 + &quot;.&quot; + conname + &quot; &quot; + contype;\r\n\r\n\t\t\t\theaders.add(fnl);\r\n\r\n\t\t\t\tnameheaders.add(conname);\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor (int i = 0; i &lt; outcomeheader.length(); i++) {\r\n\r\n\t\t\t\tJSONObject json = outcomeheader.getJSONObject(i);\r\n//\t\t\t\tif(json.isEmpty()) {\r\n//\t\t\t\t\tthrow new Exception(&quot;Outcome Attributes filed should not be empty&quot;);\r\n//\t\t\t\t} \r\n\t\t\t\tString conname = json.getString(&quot;label&quot;);\r\n\t\t\t\tString contype = json.getString(&quot;type&quot;);\r\n\t\t\t\tString dataobject1 = json.getString(&quot;dataobject&quot;);\r\n\t\t\t\tcontype = &quot;[&quot; + contype + &quot;]&quot;;\r\n\t\t\t\tString fnl = dataobject1 + &quot;.&quot; + conname + &quot; &quot; + contype;\r\n\t\t\t\theaders.add(fnl);\r\n\r\n\t\t\t\tnameheaders.add(conname);\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Merging Region\r\n\t\t\t// HSSFRow merge = sheet.createRow((short)1);\r\n\t\t\tRow row = sheet.createRow(1);\r\n\t\t\tCell cell = row.createCell(0);\r\n\t\t\tcell.setCellValue(&quot;MetaData&quot;);\r\n\r\n\t\t\t// Merging cells by providing cell index\r\n\t\t\tsheet.addMergedRegion(new CellRangeAddress(1, 1, 0, metheadcount - 1));\r\n\t\t\tFont font3 = workbook.createFont();\r\n\t\t\tfont3.setColor(HSSFColor.HSSFColorPredefined.BLACK.getIndex());\r\n\t\t\tfont3.setBold(true);\r\n\r\n\t\t\tXSSFCellStyle style = workbook.createCellStyle();\r\n\t\t\tstyle.setFillForegroundColor(HSSFColor.HSSFColorPredefined.LIGHT_GREEN.getIndex());\r\n\t\t\tstyle.setFillPattern(FillPatternType.SOLID_FOREGROUND);\r\n\t\t\tstyle.setAlignment(HorizontalAlignment.CENTER);\r\n\t\t\tstyle.setVerticalAlignment(VerticalAlignment.CENTER);\r\n\t\t\tstyle.setWrapText(true);\r\n\r\n\t\t\t/*\r\n\t\t\t * style.setBorderTop(BorderStyle.MEDIUM);\r\n\t\t\t * style.setBorderBottom(BorderStyle.MEDIUM);\r\n\t\t\t * style.setBorderLeft(BorderStyle.MEDIUM);\r\n\t\t\t * style.setBorderRight(BorderStyle.MEDIUM);\r\n\t\t\t */\r\n\t\t\tstyle.setFont(font3);\r\n\t\t\tcell.setCellStyle(style);\r\n\r\n\t\t\t// style.setFont(headerFont);\r\n\t\t\t// style.setFillForegroundColor(IndexedColors.BLACK.getIndex());\r\n\r\n\t\t\tCell cell1 = row.createCell(metheadcount);\r\n\t\t\tcell1.setCellValue(&quot;Conditional Attributes&quot;);\r\n\r\n\t\t\tif (conheadcount &gt; 1) {\r\n\t\t\t\tsheet.addMergedRegion(new CellRangeAddress(1, 1, metheadcount, metheadcount + conheadcount - 1));\r\n\t\t\t}\r\n\r\n\t\t\tXSSFCellStyle style1 = workbook.createCellStyle();\r\n\t\t\tFont font1 = workbook.createFont();\r\n\t\t\tfont1.setColor(HSSFColor.HSSFColorPredefined.BLACK.getIndex());\r\n\t\t\tfont1.setBold(true);\r\n\t\t\tstyle1.setFont(font1);\r\n\t\t\tstyle1.setWrapText(true);\r\n\t\t\tstyle1.setFillForegroundColor(HSSFColor.HSSFColorPredefined.LIGHT_ORANGE.getIndex());\r\n\t\t\tstyle1.setFillPattern(FillPatternType.SOLID_FOREGROUND);\r\n\t\t\tstyle1.setAlignment(HorizontalAlignment.CENTER);\r\n\t\t\tstyle1.setVerticalAlignment(VerticalAlignment.CENTER);\r\n\t\t\t/*\r\n\t\t\t * style1.setBorderTop(BorderStyle.MEDIUM);\r\n\t\t\t * style1.setBorderBottom(BorderStyle.MEDIUM);\r\n\t\t\t * style1.setBorderLeft(BorderStyle.MEDIUM);\r\n\t\t\t * style1.setBorderRight(BorderStyle.MEDIUM);\r\n\t\t\t */\r\n\t\t\tcell1.setCellStyle(style1);\r\n\r\n\t\t\tCell cell2 = row.createCell(metheadcount + conheadcount);\r\n\t\t\tcell2.setCellValue(&quot;Outcome Attributes&quot;);\r\n\t\t\tif (outheadcount &gt; 1) {\r\n\t\t\t\tsheet.addMergedRegion(new CellRangeAddress(1, 1, metheadcount + conheadcount,\r\n\t\t\t\t\t\tmetheadcount + conheadcount + outheadcount - 1));\r\n\t\t\t}\r\n\t\t\tXSSFCellStyle style2 = workbook.createCellStyle();\r\n\t\t\tFont font2 = workbook.createFont();\r\n\t\t\tfont2.setColor(HSSFColor.HSSFColorPredefined.BLACK.getIndex());\r\n\t\t\tfont2.setBold(true);\r\n\r\n\t\t\tstyle2.setFont(font2);\r\n\t\t\tstyle2.setFillForegroundColor(HSSFColor.HSSFColorPredefined.LIGHT_CORNFLOWER_BLUE.getIndex());\r\n\t\t\tstyle2.setFillPattern(FillPatternType.SOLID_FOREGROUND);\r\n\t\t\tstyle2.setAlignment(HorizontalAlignment.CENTER);\r\n\t\t\tstyle2.setVerticalAlignment(VerticalAlignment.CENTER);\r\n\t\t\tstyle2.setWrapText(true);\r\n\t\t\t/*\r\n\t\t\t * style2.setBorderTop(BorderStyle.MEDIUM);\r\n\t\t\t * style2.setBorderBottom(BorderStyle.MEDIUM);\r\n\t\t\t * style2.setBorderLeft(BorderStyle.MEDIUM);\r\n\t\t\t * style2.setBorderRight(BorderStyle.MEDIUM);\r\n\t\t\t */\r\n\t\t\tcell2.setCellStyle(style2);\r\n\r\n\t\t\trow.setHeightInPoints((2 * sheet.getDefaultRowHeightInPoints()));\r\n\r\n\t\t\t/*\r\n\t\t\t * HSSFCellStyle style22 = workbook.createCellStyle(); Font font22 =\r\n\t\t\t * workbook.createFont();\r\n\t\t\t * font22.setColor(HSSFColor.HSSFColorPredefined.BLACK.getIndex());\r\n\t\t\t * font22.setBold(true); style22.setFont(font22);\r\n\t\t\t * style22.setAlignment(HorizontalAlignment.CENTER);\r\n\t\t\t */\r\n\r\n\t\t\tXSSFCellStyle style22 = workbook.createCellStyle();\r\n\t\t\tFont font22 = workbook.createFont();\r\n\t\t\tfont22.setColor(HSSFColor.HSSFColorPredefined.BLACK.getIndex());\r\n\t\t\tfont22.setBold(true);\r\n\t\t\tstyle22.setFont(font22);\r\n\t\t\tstyle22.setBorderTop(BorderStyle.MEDIUM);\r\n\t\t\tstyle22.setBorderBottom(BorderStyle.MEDIUM);\r\n\t\t\tstyle22.setBorderLeft(BorderStyle.MEDIUM);\r\n\t\t\tstyle22.setBorderRight(BorderStyle.MEDIUM);\r\n\t\t\tstyle22.setWrapText(true);\r\n\t\t\t// style22.setFillForegroundColor(HSSFColor.HSSFColorPredefined.WHITE.getIndex());\r\n\t\t\t// style22.setFillPattern(FillPatternType.SOLID_FOREGROUND);\r\n\t\t\tstyle22.setAlignment(HorizontalAlignment.CENTER);\r\n\r\n\t\t\tXSSFRow rowheader = sheet.createRow((short) 2);\r\n\r\n\t\t\tfor (int z = 0; z &lt; headers.size(); z++) {\r\n\t\t\t\trowheader.createCell(z).setCellValue(headers.get(z));\r\n\t\t\t\tString metaDataCellValue = rowheader.getCell(z).getStringCellValue();\r\n\t\t\t\tif(metaDataCellValue.equals(&quot;Rule Name&quot;) || metaDataCellValue.equals(&quot;Modified By&quot;) ||\r\n\t\t\t\t\t\tmetaDataCellValue.equals(&quot;Modified At&quot;) || metaDataCellValue.equals(&quot;Rule ID&quot;)) {\r\n\t\t\t\t\trowheader.getCell(z).setCellStyle(style13);\r\n\t\t\t\t} else {\r\n\t\t\t\t\trowheader.getCell(z).setCellStyle(style22);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\r\n\t\t\t}\r\n\r\n\t\t\trowheader.setHeightInPoints((2 * sheet.getDefaultRowHeightInPoints()));\r\n\r\n\t\t\t// Get Details\r\n\r\n\t\t\tDataFormatter formatter = new DataFormatter();\r\n\r\n\t\t\tif (downloadtype.equalsIgnoreCase(&quot;rulesets&quot;)) {\r\n\r\n\t\t\t\tJSONArray values = output.getJSONArray(&quot;values&quot;);\r\n\t\t\t\tif (!values.isEmpty()) {\r\n\r\n\t\t\t\t\tshort valcell = 3;\r\n\r\n\t\t\t\t\tfor (int val = 0; val &lt; values.length(); val++) {\r\n\r\n\t\t\t\t\t\tXSSFRow rowheader2 = sheet.createRow((short) valcell + val);\r\n\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tJSONObject firstvals = values.getJSONObject(val);\r\n\r\n\t\t\t\t\t\t\tJSONArray methead1 = firstvals.optJSONArray(&quot;metadata&quot;);\r\n\t\t\t\t\t\t\tJSONArray conhead1 = firstvals.optJSONArray(&quot;condition&quot;);\r\n\t\t\t\t\t\t\tJSONArray outhead1 = firstvals.optJSONArray(&quot;outcome&quot;);\r\n\r\n\t\t\t\t\t\t\tfor (int i = 0; i &lt; methead1.length(); i++) {\r\n\t\t\t\t\t\t\t\tJSONObject json = methead1.getJSONObject(i);\r\n\t\t\t\t\t\t\t\tString val23 = json.get(&quot;value&quot;).toString();\r\n\t\t\t\t\t\t\t\tString name = &quot;&quot;;\r\n\t\t\t\t\t\t\t\tif (!json.isNull(&quot;label&quot;)) {\r\n\t\t\t\t\t\t\t\t\tname = (json.getString(&quot;label&quot;));\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tname = (json.getString(&quot;name&quot;));\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tint index = nameheaders.indexOf(name);\r\n\t\t\t\t\t\t\t\trowheader2.createCell(index).setCellValue(val23);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tfor (int y = 0; y &lt; conhead1.length(); y++) {\r\n\t\t\t\t\t\t\t\tJSONObject json = conhead1.getJSONObject(y);\r\n\t\t\t\t\t\t\t\tString val23 = json.get(&quot;value&quot;).toString();\r\n\r\n\t\t\t\t\t\t\t\tString name = &quot;&quot;;\r\n\t\t\t\t\t\t\t\tif (!json.isNull(&quot;label&quot;)) {\r\n\t\t\t\t\t\t\t\t\tname = (json.getString(&quot;label&quot;));\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tname = (json.getString(&quot;name&quot;));\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tString oper = (json.getString(&quot;operator&quot;));\r\n\t\t\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t\t\t\tif (oper.equalsIgnoreCase(&quot;not in&quot;)) {\r\n\r\n\t\t\t\t\t\t\t\t\tval23 = &quot;NOT IN(&quot; + val23 + &quot;)&quot;;\r\n\r\n\t\t\t\t\t\t\t\t} else if (oper.equalsIgnoreCase(&quot;neq&quot;)) {\r\n\r\n\t\t\t\t\t\t\t\t\tval23 = &quot;NOT EQUALS(&quot; + val23 + &quot;)&quot;;\r\n\t\t\t\t\t\t\t\t} else if (oper.equalsIgnoreCase(&quot;&gt;&quot;) || oper.equalsIgnoreCase(&quot;GT&quot;) ) {\r\n\r\n\t\t\t\t\t\t\t\t\tval23 =  &quot;&gt;&quot; + val23;\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t} else if (oper.equalsIgnoreCase(&quot;&gt;=&quot;) || oper.equalsIgnoreCase(&quot;GTE&quot;)) {\r\n\r\n\t\t\t\t\t\t\t\t\tval23 =  &quot;&gt;=&quot; + val23;\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t \t}else if (oper.equalsIgnoreCase(&quot;&lt;&quot;) || oper.equalsIgnoreCase(&quot;LT&quot;)) {\r\n\r\n\t\t\t\t\t\t\t \t\tval23 =  &quot;&lt;&quot; + val23;\r\n\t\t\t\t\t\t\t \t\t\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t \telse if ( oper.equalsIgnoreCase(&quot;&lt;=&quot;) || oper.equalsIgnoreCase(&quot;LTE&quot;)) {\r\n\r\n\t\t\t\t\t\t\t \t\tval23 =  &quot;&lt;=&quot; + val23;\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tint index = nameheaders.indexOf(name);\r\n\t\t\t\t\t\t\t\tif (index &gt; 0) {\r\n\t\t\t\t\t\t\t\t\trowheader2.createCell(index).setCellValue(val23);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tfor (int za = 0; za &lt; outhead1.length(); za++) {\r\n\t\t\t\t\t\t\t\tJSONObject json = outhead1.getJSONObject(za);\r\n\t\t\t\t\t\t\t\tString val23 = json.get(&quot;value&quot;).toString();\r\n\r\n\t\t\t\t\t\t\t\tString name = &quot;&quot;;\r\n\t\t\t\t\t\t\t\tif (!json.isNull(&quot;label&quot;)) {\r\n\t\t\t\t\t\t\t\t\tname = (json.getString(&quot;label&quot;));\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tname = (json.getString(&quot;name&quot;));\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tint index = nameheaders.indexOf(name);\r\n\r\n\t\t\t\t\t\t\t\tif (index &gt; 0) {\r\n\t\t\t\t\t\t\t\t\trowheader2.createCell(index).setCellValue(val23);\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} catch (JSONException e) {\r\n\t\t\t\t\t\t\te.printStackTrace();\r\n\t\t\t\t\t\t\tString error = e.getMessage();\r\n\t\t\t\t\t\t\tthrow new Exception(error);\r\n\t\t\t\t\t\t} catch (Exception e) {\r\n\t\t\t\t\t\t\t// String error = e.getMessage();\r\n\t\t\t\t\t\t\te.printStackTrace();\r\n\t\t\t\t\t\t\tthrow new Exception(e.getMessage());\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} //\r\n\r\n\t\t\t}\r\n\r\n\r\n\t\t\t\r\n\r\n\t\t\tFormulaEvaluator evaluator = workbook.getCreationHelper().createFormulaEvaluator();\r\n\t\t\tevaluator.evaluateAll();\r\n\r\n\t\t\t// Duplicate Highlighter\r\n\r\n\t\t\tString lcollett = &quot;&quot;;\r\n\t\t\tString csv1 = &quot;&quot;;\r\n\t\t\tSheetConditionalFormatting sheetCF = sheet.getSheetConditionalFormatting();\r\n\t\t\tint s1 = sheet.getNumMergedRegions();\r\n\r\n\t\t\tfor (int i = 0; i &lt; s1; i++) {\r\n\t\t\t\tCellRangeAddress region = sheet.getMergedRegion(i);\r\n\t\t\t\tint colIndex = region.getFirstColumn();\r\n\t\t\t\tint rowNum = region.getFirstRow();\r\n\t\t\t\tString val1 = formatter.formatCellValue(sheet.getRow(rowNum).getCell(colIndex));\r\n\t\t\t\tif (val1.contains(&quot;MetaData&quot;)) {\r\n\t\t\t\t\tint fcol = sheet.getMergedRegion(i).getFirstColumn();\r\n\t\t\t\t\tint lcol = sheet.getMergedRegion(i).getLastColumn();\r\n\t\t\t\t\tlcollett = CellReference.convertNumToColString(lcol);\r\n\t\t\t\t\tfor (i = fcol; i &lt;= lcol; i++) {\r\n\t\t\t\t\t\tsheet.autoSizeColumn(i);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor (int i = 0; i &lt; s1; i++) {\r\n\t\t\t\tCellRangeAddress region = sheet.getMergedRegion(i);\r\n\t\t\t\tint colIndex = region.getFirstColumn();\r\n\t\t\t\tint rowNum = region.getFirstRow();\r\n\t\t\t\tString val1 = formatter.formatCellValue(sheet.getRow(rowNum).getCell(colIndex));\r\n\t\t\t\tArrayList&lt;String&gt; xsdf = new ArrayList&lt;String&gt;();\r\n\t\t\t\tif (val1.contains(&quot;Conditional&quot;)) {\r\n\t\t\t\t\tint fcol = sheet.getMergedRegion(i).getFirstColumn();\r\n\t\t\t\t\tint lcol = sheet.getMergedRegion(i).getLastColumn();\r\n\t\t\t\t\tString fcollett = &quot;&quot;;\r\n\t\t\t\t\tlcollett = CellReference.convertNumToColString(lcol);\r\n\t\t\t\t\tfor (i = fcol; i &lt;= lcol; i++) {\r\n\t\t\t\t\t\tfcollett = CellReference.convertNumToColString(i);\r\n\t\t\t\t\t\tif (i == lcol) {\r\n\t\t\t\t\t\t\txsdf.add(&quot;$&quot; + fcollett + &quot;$4:$&quot; + fcollett + &quot;$10000,\\&quot;*\\&quot;&amp;$&quot; + fcollett + &quot;4&amp;\\&quot;*\\&quot;&quot;);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\txsdf.add(&quot;$&quot; + fcollett + &quot;$4:$&quot; + fcollett + &quot;$10000,$&quot; + fcollett + &quot;4&quot;);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tsheet.autoSizeColumn(i);\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tcsv1 = String.join(&quot;,&quot;, xsdf);\r\n\t\t\t\t\tcsv1 = &quot;COUNTIFS(&quot; + csv1 + &quot;)&gt;1&quot;;\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor (int i = 0; i &lt; s1; i++) {\r\n\t\t\t\tCellRangeAddress region = sheet.getMergedRegion(i);\r\n\t\t\t\tint colIndex = region.getFirstColumn();\r\n\t\t\t\tint rowNum = region.getFirstRow();\r\n\t\t\t\tString val1 = formatter.formatCellValue(sheet.getRow(rowNum).getCell(colIndex));\r\n\t\t\t\tif (val1.contains(&quot;Outcome&quot;)) {\r\n\t\t\t\t\tint fcol = sheet.getMergedRegion(i).getFirstColumn();\r\n\t\t\t\t\tint lcol = sheet.getMergedRegion(i).getLastColumn();\r\n\t\t\t\t\tlcollett = CellReference.convertNumToColString(lcol);\r\n\t\t\t\t\tfor (i = fcol; i &lt;= lcol; i++) {\r\n\t\t\t\t\t\tsheet.autoSizeColumn(i);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tConditionalFormattingRule rule1 = sheetCF.createConditionalFormattingRule(csv1);\r\n\t\t\torg.apache.poi.ss.usermodel.FontFormatting font = rule1.createFontFormatting();\r\n\t\t\tfont.setFontStyle(false, true);\r\n\t\t\tfont.setFontColorIndex(IndexedColors.BLUE.index);\r\n\t\t\tString cellrangeadd = &quot;A4:&quot; + lcollett + &quot;10000&quot;;\r\n\t\t\tCellRangeAddress[] regions = new CellRangeAddress[] { CellRangeAddress.valueOf(cellrangeadd) };\r\n\t\t\tsheetCF.addConditionalFormatting(regions, rule1);\r\n\t\t\t\r\n\t\t\t// Sheet 3\r\n\t\t\t\r\n\t\t\tSheetConditionalFormatting sheetCFa = sheet.getSheetConditionalFormatting();\r\n\t\t\t\r\n\t\t\tXSSFSheet sheet21 = workbook.createSheet(&quot;PossibleValues&quot;);\r\n\r\n\t\t\tsheet21.setColumnWidth(0, 20 * 256);\r\n\t\t\tsheet21.setColumnWidth(1, 50 * 256);\r\n\t\t\t\r\n\t\t\tXSSFRow rowhead33 = sheet21.createRow((short) 0);\r\n\r\n\t\t\trowhead33.createCell(0).setCellValue(&quot;DataObject&quot;);\r\n\t\t\trowhead33.getCell(0).setCellStyle(style14);\r\n\t\t\trowhead33.createCell(1).setCellValue(&quot;AttributeName&quot;);\r\n\t\t\trowhead33.getCell(1).setCellStyle(style14);\r\n\t\t\trowhead33.createCell(2).setCellValue(&quot;DataType&quot;);\r\n\t\t\trowhead33.getCell(2).setCellStyle(style14);\r\n\t\t\trowhead33.createCell(3).setCellValue(&quot;PossibleValues&quot;);\r\n\t\t\trowhead33.getCell(3).setCellStyle(style14);\r\n\r\n\t\t\t\r\n\t\t    int attcell=1;\r\n\t\t    ArrayList&lt;String&gt; xkdf = new ArrayList&lt;String&gt;();\r\n\t\t\tfor (int i = 0; i &lt; conditionheader.length(); i++) {\r\n\r\n\t\t\t\tJSONObject json = conditionheader.getJSONObject(i);\r\n\t\t\t\tString conname = json.getString(&quot;label&quot;);\r\n\t\t\t\tString contype = json.getString(&quot;type&quot;);\r\n\t\t\t\tString dataobject1 = json.getString(&quot;dataobject&quot;);\r\n\t\t\t\tString pv = json.getString(&quot;values&quot;);\r\n\t\t\tString \tcontypea = &quot;[&quot; + contype + &quot;]&quot;;\r\n\t\t\tString fnl = dataobject1 + &quot;.&quot; + conname + &quot; &quot; + contypea;\r\n\t\t\t\r\n\t\t\t\txkdf.add(fnl);\r\n\t\t\t\t\r\n\r\n\t\t\t\tXSSFRow rowhead334 = sheet21.createRow((short) attcell + i);\r\n\t\t\t\t\t \r\n\t\t\t\trowhead334.createCell(0).setCellValue(dataobject1);\r\n\t\t\t\trowhead334.createCell(1).setCellValue(conname);\r\n\t\t\t\trowhead334.createCell(2).setCellValue(contype);\r\n\t\t        rowhead334.createCell(3).setCellValue(pv);\r\n\r\n\r\n\t\t\t}\r\n\t\t\t\r\n\t\r\n\t\t\tString kkf = &quot;IF(AND(NOT(ISBLANK(J4)),ISERROR(SUM(MATCH(FILTERXML(\\&quot;&lt;t&gt;&lt;s&gt;\\&quot;&amp;SUBSTITUTE(J4,\\&quot;,\\&quot;,\\&quot;&lt;/s&gt;&lt;s&gt;\\&quot;)&amp;\\&quot;&lt;/s&gt;&lt;/t&gt;\\&quot;,\\&quot;//s\\&quot;),FILTERXML(\\&quot;&lt;t&gt;&lt;s&gt;\\&quot;&amp;SUBSTITUTE(PossibleValues!$D$2,\\&quot;,\\&quot;,\\&quot;&lt;/s&gt;&lt;s&gt;\\&quot;)&amp;\\&quot;&lt;/s&gt;&lt;/t&gt;\\&quot;,\\&quot;//s\\&quot;),0))),\\&quot;\\&quot;),TRUE())&quot;;\r\n\t\t\tConditionalFormattingRule rule13 = sheetCF.createConditionalFormattingRule(kkf);\r\n\t\t\torg.apache.poi.ss.usermodel.FontFormatting font535 = rule13.createFontFormatting();\r\n\t\t\tfont535.setFontStyle(false, true);\r\n\t\t\tfont535.setFontColorIndex(IndexedColors.RED.index);\r\n\t\t\t\r\n\t\t\tString cellrangeadd2 = &quot;J4:J10000&quot;;\r\n\t\t\tCellRangeAddress[] regionssd = new CellRangeAddress[] { CellRangeAddress.valueOf(cellrangeadd2) };\r\n\t\t\tsheetCF.addConditionalFormatting(regionssd, rule13);\r\n\r\n\t\t\t  FileOutputStream fileOut = new FileOutputStream(filename);\r\n\t\t\t  workbook.write(fileOut); \r\n\t\t\t  fileOut.close(); \r\n\t\t\t  workbook.close();\r\n  \r\n            System.out.println(&quot;Your excel file has been generated!&quot;);   \r\n\r\n          \r\n        } catch (JSONException e) {\r\n            e.printStackTrace();\r\n        } catch (IOException e) {\r\n            // TODO Auto-generated catch block\r\n            e.printStackTrace();\r\n        }        \r\n    }\r\n\r\n}\r\n```\r\n\r\n## Required manual post-production in Excel\r\nNow  I did the below steps\r\n\r\n1. Add three values in column &#39;J&#39; named &quot;State&quot;. All cells are getting highlighted, see image below:\r\n\r\n[![all cells get highlighted, no matter if valid][1]][1]\r\n\r\n\r\n2. Click Conditional Formatting &gt; Manage Rules &gt; Select Rule (Format Red) &gt; Edit Rules &gt; OK &gt; Apply &gt; OK\r\n\r\nAfter this action the column values are getting highlighted correctly.\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n## Question\r\nIs there anything I missed in my Java code?\r\nHow do I avoid this manual activity in Excel?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/mrJ2p.png\r\n  [2]: https://i.stack.imgur.com/RziCK.png\r\n  [3]: https://i.stack.imgur.com/ThIlD.png","title":"Conditional formatting highlight only invalid cells","body":"<p>I am creating below conditional formatting rule in Apache POI.</p>\n<h2>Issue</h2>\n<p>Expected:</p>\n<ul>\n<li>The formula should highlight only invalid values in column 'J'.</li>\n</ul>\n<p>Actual:</p>\n<ul>\n<li>But all values of the entire column 'J' get highlighted, even for valid values.</li>\n</ul>\n<h3>Formula</h3>\n<pre class=\"lang-java prettyprint-override\"><code>String kkf=&quot;IF(AND(NOT(ISBLANK(J4)),ISERROR(SUM(MATCH(FILTERXML(\\&quot;&lt;t&gt;&lt;s&gt;\\&quot;&amp;SUBSTITUTE(J4,\\&quot;,\\&quot;,\\&quot;&lt;/s&gt;&lt;s&gt;\\&quot;)&amp;\\&quot;&lt;/s&gt;&lt;/t&gt;\\&quot;,\\&quot;//s\\&quot;),FILTERXML(\\&quot;&lt;t&gt;&lt;s&gt;\\&quot;&amp;SUBSTITUTE(PossibleValues!$D$2,\\&quot;,\\&quot;,\\&quot;&lt;/s&gt;&lt;s&gt;\\&quot;)&amp;\\&quot;&lt;/s&gt;&lt;/t&gt;\\&quot;,\\&quot;//s\\&quot;),0))),\\&quot;\\&quot;),TRUE())&quot;;\n</code></pre>\n<h2>Full Code</h2>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.ArrayList;\n\nimport org.apache.commons.io.FileUtils;\nimport org.json.CDL;\nimport org.json.JSONArray;\nimport org.json.JSONException;\nimport org.json.JSONObject;\n\nimport  java.io.*;\nimport  org.apache.poi.hssf.usermodel.HSSFSheet;\nimport  org.apache.poi.hssf.usermodel.HSSFWorkbook;\nimport org.apache.poi.hssf.util.HSSFColor;\nimport org.apache.poi.xssf.usermodel.XSSFCellStyle;\nimport org.apache.poi.xssf.usermodel.XSSFFont;\nimport org.apache.poi.xssf.usermodel.XSSFHyperlink;\nimport org.apache.poi.xssf.usermodel.XSSFRow;\nimport org.apache.poi.xssf.usermodel.XSSFSheet;\nimport org.apache.poi.xssf.usermodel.XSSFWorkbook;\nimport org.apache.poi.ss.usermodel.BorderStyle;\nimport org.apache.poi.ss.usermodel.Cell;\nimport org.apache.poi.ss.usermodel.CellStyle;\nimport org.apache.poi.ss.usermodel.ComparisonOperator;\nimport org.apache.poi.ss.usermodel.ConditionalFormattingRule;\nimport org.apache.poi.ss.usermodel.CreationHelper;\nimport org.apache.poi.ss.usermodel.DataFormatter;\nimport org.apache.poi.ss.usermodel.FillPatternType;\nimport org.apache.poi.ss.usermodel.Font;\nimport org.apache.poi.ss.usermodel.FormulaEvaluator;\nimport org.apache.poi.ss.usermodel.HorizontalAlignment;\nimport org.apache.poi.ss.usermodel.IndexedColors;\nimport org.apache.poi.ss.usermodel.Row;\nimport org.apache.poi.ss.usermodel.SheetConditionalFormatting;\nimport org.apache.poi.ss.usermodel.VerticalAlignment;\nimport org.apache.poi.ss.util.CellRangeAddress;\nimport org.apache.poi.ss.util.CellReference;\nimport org.apache.poi.common.usermodel.Hyperlink;\nimport org.apache.poi.hssf.usermodel.HSSFCellStyle;\nimport  org.apache.poi.hssf.usermodel.HSSFRow;\n\npublic class Red {\n    public static void main(String[] args) throws Exception{\n\nString str=&quot;{\\&quot;rulesetgroupname\\&quot;:\\&quot;Coastal122\\&quot;,\\&quot;downloadtype\\&quot;:\\&quot;Template\\&quot;,\\&quot;rulesetid\\&quot;:\\&quot;638a0ac02944f902b1eebab3\\&quot;,\\&quot;rulesetversion\\&quot;:\\&quot;0.1\\&quot;,\\&quot;rulegroupid\\&quot;:\\&quot;638a09f28bd88c16a76fa599\\&quot;,\\&quot;product\\&quot;:\\&quot;CAT\\&quot;,\\&quot;ruletype\\&quot;:\\&quot;ERWR\\&quot;,\\&quot;dataobjects\\&quot;:\\&quot;Location 24,Class Codes 24,BPP Covg 24,Building Covg 24,Building 24,Policy 24\\&quot;,\\&quot;ruletemplateversion\\&quot;:\\&quot;1\\&quot;,\\&quot;ruleTemplaeResponseId\\&quot;:\\&quot;638a09f28bd88c16a76fa599\\&quot;,\\&quot;dataobject\\&quot;:\\&quot;Location 24\\&quot;,\\&quot;rulegroup\\&quot;:\\&quot;CAT Testing122\\&quot;,\\&quot;metadataheaders\\&quot;:[\\&quot;Rule Name\\&quot;,\\&quot;Rule Label\\&quot;,\\&quot;Modified By\\&quot;,\\&quot;Modified At\\&quot;,\\&quot;Rule ID\\&quot;,\\&quot;Rule Status (Add/Change/Expire/Verify)\\&quot;,\\&quot;Effective Date [MM/DD/YYYY]\\&quot;,\\&quot;Expiration Date [MM/DD/YYYY]\\&quot;,\\&quot;Has Rule Changed?\\&quot;],\\&quot;conditionheaders\\&quot;:[{\\&quot;label\\&quot;:\\&quot;State\\&quot;,\\&quot;type\\&quot;:\\&quot;Collection\\&quot;,\\&quot;name\\&quot;:\\&quot;State\\&quot;,\\&quot;dataobject\\&quot;:\\&quot;Location 24\\&quot;,\\&quot;values\\&quot;:\\&quot;NC,SC,TX,VA,MA,GA,AL,IL,DE,NY,MS,NH,RI,ME,FL,MN,CT,NJ,MD\\&quot;},{\\&quot;label\\&quot;:\\&quot;Counties\\&quot;,\\&quot;type\\&quot;:\\&quot;Collection\\&quot;,\\&quot;name\\&quot;:\\&quot;Counties\\&quot;,\\&quot;dataobject\\&quot;:\\&quot;Location 24\\&quot;,\\&quot;values\\&quot;:\\&quot;\\&quot;},{\\&quot;label\\&quot;:\\&quot;Zip Codes\\&quot;,\\&quot;type\\&quot;:\\&quot;Collection\\&quot;,\\&quot;name\\&quot;:\\&quot;ZipCodes\\&quot;,\\&quot;dataobject\\&quot;:\\&quot;Location 24\\&quot;,\\&quot;values\\&quot;:\\&quot;\\&quot;}],\\&quot;outcomeheaders\\&quot;:[{\\&quot;label\\&quot;:\\&quot;Output\\&quot;,\\&quot;type\\&quot;:\\&quot;String\\&quot;,\\&quot;name\\&quot;:\\&quot;RuleCode\\&quot;,\\&quot;dataobject\\&quot;:\\&quot;Location 24\\&quot;}]}&quot;;\n\n        JSONObject output;\n        try {\n            output = new JSONObject(str);\n\n          \n            \n            String filename = &quot;D:\\\\project\\\\excel\\\\color.xlsx&quot; ;\n            \n\n            XSSFWorkbook workbook = new XSSFWorkbook();\n            String rulegroup = output.getString(&quot;rulegroup&quot;);\n            String downloadtype = output.getString(&quot;downloadtype&quot;);\n            XSSFSheet sheet = workbook.createSheet(&quot;Ruleset&quot;);\n\n            sheet.setDefaultColumnWidth(10);\n\n            ArrayList&lt;String&gt; headers = new ArrayList&lt;String&gt;();\n            ArrayList&lt;String&gt; nameheaders = new ArrayList&lt;String&gt;();\n\n            // Top Element Font\n\n            Font font31 = workbook.createFont();\n            font31.setColor(HSSFColor.HSSFColorPredefined.BLACK.getIndex());\n            font31.setBold(true);\n            \n            XSSFCellStyle style12 = workbook.createCellStyle();\n            style12.setFillForegroundColor(HSSFColor.HSSFColorPredefined.PALE_BLUE.getIndex());\n            style12.setFillPattern(FillPatternType.SOLID_FOREGROUND);\n            style12.setAlignment(HorizontalAlignment.CENTER);\n            style12.setVerticalAlignment(VerticalAlignment.CENTER);\n            style12.setBorderTop(BorderStyle.MEDIUM);\n            style12.setBorderBottom(BorderStyle.MEDIUM);\n            style12.setBorderLeft(BorderStyle.MEDIUM);\n            style12.setBorderRight(BorderStyle.MEDIUM);\n            style12.setWrapText(true);\n            style12.setFont(font31);\n            \n            XSSFCellStyle style13 = workbook.createCellStyle();\n            style13.setFillForegroundColor(HSSFColor.HSSFColorPredefined.GREY_40_PERCENT.getIndex());\n            style13.setFillPattern(FillPatternType.SOLID_FOREGROUND);\n            style13.setAlignment(HorizontalAlignment.CENTER);\n            style13.setVerticalAlignment(VerticalAlignment.CENTER);\n            style13.setBorderTop(BorderStyle.MEDIUM);\n            style13.setBorderBottom(BorderStyle.MEDIUM);\n            style13.setBorderLeft(BorderStyle.MEDIUM);\n            style13.setBorderRight(BorderStyle.MEDIUM);\n            style13.setWrapText(true);\n            style13.setFont(font31);\n\n            XSSFCellStyle style14 = workbook.createCellStyle();\n            Font font32 = workbook.createFont();\n            font32.setBold(true);\n            font32.setColor(HSSFColor.HSSFColorPredefined.BLACK.getIndex());\n            style14.setBorderTop(BorderStyle.MEDIUM);\n            style14.setBorderBottom(BorderStyle.MEDIUM);\n            style14.setBorderLeft(BorderStyle.MEDIUM);\n            style14.setBorderRight(BorderStyle.MEDIUM);\n            style14.setAlignment(HorizontalAlignment.CENTER);\n            style14.setVerticalAlignment(VerticalAlignment.CENTER);\n            style14.setWrapText(true);\n            style14.setFont(font32);\n            // Get Top elements\n\n            String product = output.getString(&quot;product&quot;);\n            String ruletype = output.getString(&quot;ruletype&quot;);\n            String dataobject = output.getString(&quot;dataobjects&quot;);\n            String rulesetid = output.getString(&quot;rulesetid&quot;);\n            String rulesetversion = output.getString(&quot;rulesetversion&quot;);\n            String rulegroupid = output.getString(&quot;rulegroupid&quot;);\n            String ruletemplateversion = output.getString(&quot;ruletemplateversion&quot;);\n            String rulesetgroupname = output.getString(&quot;rulesetgroupname&quot;);\n\n            XSSFRow rowhead = sheet.createRow((short) 0);\n            rowhead.createCell(0).setCellValue(&quot;Product/Process&quot;);\n            rowhead.getCell(0).setCellStyle(style14);\n            rowhead.createCell(1).setCellValue(product);\n            rowhead.getCell(1).setCellStyle(style13);\n            rowhead.createCell(2).setCellValue(&quot;RuleType&quot;);\n            rowhead.getCell(2).setCellStyle(style14);\n            rowhead.createCell(3).setCellValue(ruletype);\n            rowhead.getCell(3).setCellStyle(style13);\n            rowhead.createCell(4).setCellValue(&quot;DataObject&quot;);\n            rowhead.getCell(4).setCellStyle(style14);\n            rowhead.createCell(5).setCellValue(dataobject);\n            rowhead.getCell(5).setCellStyle(style13);\n            rowhead.createCell(6).setCellValue(&quot;RuleTemplate&quot;);\n            rowhead.getCell(6).setCellStyle(style14);\n            rowhead.createCell(7).setCellValue(rulegroup);\n            rowhead.getCell(7).setCellStyle(style13);\n            rowhead.createCell(8).setCellValue(&quot;RulesetID&quot;);\n            rowhead.getCell(8).setCellStyle(style14);\n            rowhead.createCell(9).setCellValue(rulesetid);\n            rowhead.getCell(9).setCellStyle(style13);\n            rowhead.createCell(10).setCellValue(&quot;RuleSetVersion&quot;);\n            rowhead.getCell(10).setCellStyle(style14);\n            rowhead.createCell(11).setCellValue(rulesetversion);\n            rowhead.getCell(11).setCellStyle(style13);\n            rowhead.createCell(12).setCellValue(&quot;RuleTemplateID&quot;);\n            rowhead.getCell(12).setCellStyle(style14);\n            rowhead.createCell(13).setCellValue(rulegroupid);\n            rowhead.getCell(13).setCellStyle(style13);\n            rowhead.createCell(14).setCellValue(&quot;RuleTemplateVersion&quot;);\n            rowhead.getCell(14).setCellStyle(style14);\n            rowhead.createCell(15).setCellValue(ruletemplateversion);\n            rowhead.getCell(15).setCellStyle(style13);\n            rowhead.createCell(16).setCellValue(&quot;RuleSetGroupName&quot;);\n            rowhead.getCell(16).setCellStyle(style14);\n            rowhead.createCell(17).setCellValue(rulesetgroupname);\n            rowhead.getCell(17).setCellStyle(style12);\n\n            rowhead.setHeightInPoints((2 * sheet.getDefaultRowHeightInPoints()));\n\n            JSONArray metadataheader = output.getJSONArray(&quot;metadataheaders&quot;);\n            JSONArray conditionheader = output.getJSONArray(&quot;conditionheaders&quot;);\n            JSONArray outcomeheader = output.getJSONArray(&quot;outcomeheaders&quot;);\n\n            Integer metheadcount = metadataheader.length();\n            Integer conheadcount = conditionheader.length();\n            Integer outheadcount = outcomeheader.length();\n\n            metadataheader.getString(0);\n\n            for (int i = 0; i &lt; metadataheader.length(); i++) {\n                headers.add(metadataheader.getString(i));\n                nameheaders.add(metadataheader.getString(i));\n            }\n\n            for (int i = 0; i &lt; conditionheader.length(); i++) {\n\n                JSONObject json = conditionheader.getJSONObject(i);\n                String conname = json.getString(&quot;label&quot;);\n                String contype = json.getString(&quot;type&quot;);\n                String dataobject1 = json.getString(&quot;dataobject&quot;);\n                contype = &quot;[&quot; + contype + &quot;]&quot;;\n                String fnl = dataobject1 + &quot;.&quot; + conname + &quot; &quot; + contype;\n\n                headers.add(fnl);\n\n                nameheaders.add(conname);\n\n            }\n\n            for (int i = 0; i &lt; outcomeheader.length(); i++) {\n\n                JSONObject json = outcomeheader.getJSONObject(i);\n//              if(json.isEmpty()) {\n//                  throw new Exception(&quot;Outcome Attributes filed should not be empty&quot;);\n//              } \n                String conname = json.getString(&quot;label&quot;);\n                String contype = json.getString(&quot;type&quot;);\n                String dataobject1 = json.getString(&quot;dataobject&quot;);\n                contype = &quot;[&quot; + contype + &quot;]&quot;;\n                String fnl = dataobject1 + &quot;.&quot; + conname + &quot; &quot; + contype;\n                headers.add(fnl);\n\n                nameheaders.add(conname);\n\n            }\n\n            // Merging Region\n            // HSSFRow merge = sheet.createRow((short)1);\n            Row row = sheet.createRow(1);\n            Cell cell = row.createCell(0);\n            cell.setCellValue(&quot;MetaData&quot;);\n\n            // Merging cells by providing cell index\n            sheet.addMergedRegion(new CellRangeAddress(1, 1, 0, metheadcount - 1));\n            Font font3 = workbook.createFont();\n            font3.setColor(HSSFColor.HSSFColorPredefined.BLACK.getIndex());\n            font3.setBold(true);\n\n            XSSFCellStyle style = workbook.createCellStyle();\n            style.setFillForegroundColor(HSSFColor.HSSFColorPredefined.LIGHT_GREEN.getIndex());\n            style.setFillPattern(FillPatternType.SOLID_FOREGROUND);\n            style.setAlignment(HorizontalAlignment.CENTER);\n            style.setVerticalAlignment(VerticalAlignment.CENTER);\n            style.setWrapText(true);\n\n            /*\n             * style.setBorderTop(BorderStyle.MEDIUM);\n             * style.setBorderBottom(BorderStyle.MEDIUM);\n             * style.setBorderLeft(BorderStyle.MEDIUM);\n             * style.setBorderRight(BorderStyle.MEDIUM);\n             */\n            style.setFont(font3);\n            cell.setCellStyle(style);\n\n            // style.setFont(headerFont);\n            // style.setFillForegroundColor(IndexedColors.BLACK.getIndex());\n\n            Cell cell1 = row.createCell(metheadcount);\n            cell1.setCellValue(&quot;Conditional Attributes&quot;);\n\n            if (conheadcount &gt; 1) {\n                sheet.addMergedRegion(new CellRangeAddress(1, 1, metheadcount, metheadcount + conheadcount - 1));\n            }\n\n            XSSFCellStyle style1 = workbook.createCellStyle();\n            Font font1 = workbook.createFont();\n            font1.setColor(HSSFColor.HSSFColorPredefined.BLACK.getIndex());\n            font1.setBold(true);\n            style1.setFont(font1);\n            style1.setWrapText(true);\n            style1.setFillForegroundColor(HSSFColor.HSSFColorPredefined.LIGHT_ORANGE.getIndex());\n            style1.setFillPattern(FillPatternType.SOLID_FOREGROUND);\n            style1.setAlignment(HorizontalAlignment.CENTER);\n            style1.setVerticalAlignment(VerticalAlignment.CENTER);\n            /*\n             * style1.setBorderTop(BorderStyle.MEDIUM);\n             * style1.setBorderBottom(BorderStyle.MEDIUM);\n             * style1.setBorderLeft(BorderStyle.MEDIUM);\n             * style1.setBorderRight(BorderStyle.MEDIUM);\n             */\n            cell1.setCellStyle(style1);\n\n            Cell cell2 = row.createCell(metheadcount + conheadcount);\n            cell2.setCellValue(&quot;Outcome Attributes&quot;);\n            if (outheadcount &gt; 1) {\n                sheet.addMergedRegion(new CellRangeAddress(1, 1, metheadcount + conheadcount,\n                        metheadcount + conheadcount + outheadcount - 1));\n            }\n            XSSFCellStyle style2 = workbook.createCellStyle();\n            Font font2 = workbook.createFont();\n            font2.setColor(HSSFColor.HSSFColorPredefined.BLACK.getIndex());\n            font2.setBold(true);\n\n            style2.setFont(font2);\n            style2.setFillForegroundColor(HSSFColor.HSSFColorPredefined.LIGHT_CORNFLOWER_BLUE.getIndex());\n            style2.setFillPattern(FillPatternType.SOLID_FOREGROUND);\n            style2.setAlignment(HorizontalAlignment.CENTER);\n            style2.setVerticalAlignment(VerticalAlignment.CENTER);\n            style2.setWrapText(true);\n            /*\n             * style2.setBorderTop(BorderStyle.MEDIUM);\n             * style2.setBorderBottom(BorderStyle.MEDIUM);\n             * style2.setBorderLeft(BorderStyle.MEDIUM);\n             * style2.setBorderRight(BorderStyle.MEDIUM);\n             */\n            cell2.setCellStyle(style2);\n\n            row.setHeightInPoints((2 * sheet.getDefaultRowHeightInPoints()));\n\n            /*\n             * HSSFCellStyle style22 = workbook.createCellStyle(); Font font22 =\n             * workbook.createFont();\n             * font22.setColor(HSSFColor.HSSFColorPredefined.BLACK.getIndex());\n             * font22.setBold(true); style22.setFont(font22);\n             * style22.setAlignment(HorizontalAlignment.CENTER);\n             */\n\n            XSSFCellStyle style22 = workbook.createCellStyle();\n            Font font22 = workbook.createFont();\n            font22.setColor(HSSFColor.HSSFColorPredefined.BLACK.getIndex());\n            font22.setBold(true);\n            style22.setFont(font22);\n            style22.setBorderTop(BorderStyle.MEDIUM);\n            style22.setBorderBottom(BorderStyle.MEDIUM);\n            style22.setBorderLeft(BorderStyle.MEDIUM);\n            style22.setBorderRight(BorderStyle.MEDIUM);\n            style22.setWrapText(true);\n            // style22.setFillForegroundColor(HSSFColor.HSSFColorPredefined.WHITE.getIndex());\n            // style22.setFillPattern(FillPatternType.SOLID_FOREGROUND);\n            style22.setAlignment(HorizontalAlignment.CENTER);\n\n            XSSFRow rowheader = sheet.createRow((short) 2);\n\n            for (int z = 0; z &lt; headers.size(); z++) {\n                rowheader.createCell(z).setCellValue(headers.get(z));\n                String metaDataCellValue = rowheader.getCell(z).getStringCellValue();\n                if(metaDataCellValue.equals(&quot;Rule Name&quot;) || metaDataCellValue.equals(&quot;Modified By&quot;) ||\n                        metaDataCellValue.equals(&quot;Modified At&quot;) || metaDataCellValue.equals(&quot;Rule ID&quot;)) {\n                    rowheader.getCell(z).setCellStyle(style13);\n                } else {\n                    rowheader.getCell(z).setCellStyle(style22);\n                }\n                \n\n            }\n\n            rowheader.setHeightInPoints((2 * sheet.getDefaultRowHeightInPoints()));\n\n            // Get Details\n\n            DataFormatter formatter = new DataFormatter();\n\n            if (downloadtype.equalsIgnoreCase(&quot;rulesets&quot;)) {\n\n                JSONArray values = output.getJSONArray(&quot;values&quot;);\n                if (!values.isEmpty()) {\n\n                    short valcell = 3;\n\n                    for (int val = 0; val &lt; values.length(); val++) {\n\n                        XSSFRow rowheader2 = sheet.createRow((short) valcell + val);\n\n                        try {\n                            JSONObject firstvals = values.getJSONObject(val);\n\n                            JSONArray methead1 = firstvals.optJSONArray(&quot;metadata&quot;);\n                            JSONArray conhead1 = firstvals.optJSONArray(&quot;condition&quot;);\n                            JSONArray outhead1 = firstvals.optJSONArray(&quot;outcome&quot;);\n\n                            for (int i = 0; i &lt; methead1.length(); i++) {\n                                JSONObject json = methead1.getJSONObject(i);\n                                String val23 = json.get(&quot;value&quot;).toString();\n                                String name = &quot;&quot;;\n                                if (!json.isNull(&quot;label&quot;)) {\n                                    name = (json.getString(&quot;label&quot;));\n                                } else {\n                                    name = (json.getString(&quot;name&quot;));\n                                }\n                                int index = nameheaders.indexOf(name);\n                                rowheader2.createCell(index).setCellValue(val23);\n                            }\n\n                            for (int y = 0; y &lt; conhead1.length(); y++) {\n                                JSONObject json = conhead1.getJSONObject(y);\n                                String val23 = json.get(&quot;value&quot;).toString();\n\n                                String name = &quot;&quot;;\n                                if (!json.isNull(&quot;label&quot;)) {\n                                    name = (json.getString(&quot;label&quot;));\n                                } else {\n                                    name = (json.getString(&quot;name&quot;));\n                                }\n\n                                String oper = (json.getString(&quot;operator&quot;));\n                                \n\n                                if (oper.equalsIgnoreCase(&quot;not in&quot;)) {\n\n                                    val23 = &quot;NOT IN(&quot; + val23 + &quot;)&quot;;\n\n                                } else if (oper.equalsIgnoreCase(&quot;neq&quot;)) {\n\n                                    val23 = &quot;NOT EQUALS(&quot; + val23 + &quot;)&quot;;\n                                } else if (oper.equalsIgnoreCase(&quot;&gt;&quot;) || oper.equalsIgnoreCase(&quot;GT&quot;) ) {\n\n                                    val23 =  &quot;&gt;&quot; + val23;\n                                    \n                                } else if (oper.equalsIgnoreCase(&quot;&gt;=&quot;) || oper.equalsIgnoreCase(&quot;GTE&quot;)) {\n\n                                    val23 =  &quot;&gt;=&quot; + val23;\n                                    \n                                    \n                                    \n                                }else if (oper.equalsIgnoreCase(&quot;&lt;&quot;) || oper.equalsIgnoreCase(&quot;LT&quot;)) {\n\n                                    val23 =  &quot;&lt;&quot; + val23;\n                                    \n                                    \n                                }\n                                else if ( oper.equalsIgnoreCase(&quot;&lt;=&quot;) || oper.equalsIgnoreCase(&quot;LTE&quot;)) {\n\n                                    val23 =  &quot;&lt;=&quot; + val23;\n                                    \n                                }\n\n                                int index = nameheaders.indexOf(name);\n                                if (index &gt; 0) {\n                                    rowheader2.createCell(index).setCellValue(val23);\n                                }\n                            }\n\n                            for (int za = 0; za &lt; outhead1.length(); za++) {\n                                JSONObject json = outhead1.getJSONObject(za);\n                                String val23 = json.get(&quot;value&quot;).toString();\n\n                                String name = &quot;&quot;;\n                                if (!json.isNull(&quot;label&quot;)) {\n                                    name = (json.getString(&quot;label&quot;));\n                                } else {\n                                    name = (json.getString(&quot;name&quot;));\n                                }\n\n                                int index = nameheaders.indexOf(name);\n\n                                if (index &gt; 0) {\n                                    rowheader2.createCell(index).setCellValue(val23);\n                                }\n\n                            }\n                        } catch (JSONException e) {\n                            e.printStackTrace();\n                            String error = e.getMessage();\n                            throw new Exception(error);\n                        } catch (Exception e) {\n                            // String error = e.getMessage();\n                            e.printStackTrace();\n                            throw new Exception(e.getMessage());\n                        }\n\n                    }\n\n                } //\n\n            }\n\n\n            \n\n            FormulaEvaluator evaluator = workbook.getCreationHelper().createFormulaEvaluator();\n            evaluator.evaluateAll();\n\n            // Duplicate Highlighter\n\n            String lcollett = &quot;&quot;;\n            String csv1 = &quot;&quot;;\n            SheetConditionalFormatting sheetCF = sheet.getSheetConditionalFormatting();\n            int s1 = sheet.getNumMergedRegions();\n\n            for (int i = 0; i &lt; s1; i++) {\n                CellRangeAddress region = sheet.getMergedRegion(i);\n                int colIndex = region.getFirstColumn();\n                int rowNum = region.getFirstRow();\n                String val1 = formatter.formatCellValue(sheet.getRow(rowNum).getCell(colIndex));\n                if (val1.contains(&quot;MetaData&quot;)) {\n                    int fcol = sheet.getMergedRegion(i).getFirstColumn();\n                    int lcol = sheet.getMergedRegion(i).getLastColumn();\n                    lcollett = CellReference.convertNumToColString(lcol);\n                    for (i = fcol; i &lt;= lcol; i++) {\n                        sheet.autoSizeColumn(i);\n                    }\n\n                }\n\n            }\n\n            for (int i = 0; i &lt; s1; i++) {\n                CellRangeAddress region = sheet.getMergedRegion(i);\n                int colIndex = region.getFirstColumn();\n                int rowNum = region.getFirstRow();\n                String val1 = formatter.formatCellValue(sheet.getRow(rowNum).getCell(colIndex));\n                ArrayList&lt;String&gt; xsdf = new ArrayList&lt;String&gt;();\n                if (val1.contains(&quot;Conditional&quot;)) {\n                    int fcol = sheet.getMergedRegion(i).getFirstColumn();\n                    int lcol = sheet.getMergedRegion(i).getLastColumn();\n                    String fcollett = &quot;&quot;;\n                    lcollett = CellReference.convertNumToColString(lcol);\n                    for (i = fcol; i &lt;= lcol; i++) {\n                        fcollett = CellReference.convertNumToColString(i);\n                        if (i == lcol) {\n                            xsdf.add(&quot;$&quot; + fcollett + &quot;$4:$&quot; + fcollett + &quot;$10000,\\&quot;*\\&quot;&amp;$&quot; + fcollett + &quot;4&amp;\\&quot;*\\&quot;&quot;);\n                        } else {\n                            xsdf.add(&quot;$&quot; + fcollett + &quot;$4:$&quot; + fcollett + &quot;$10000,$&quot; + fcollett + &quot;4&quot;);\n                        }\n\n                        sheet.autoSizeColumn(i);\n\n                    }\n\n                    csv1 = String.join(&quot;,&quot;, xsdf);\n                    csv1 = &quot;COUNTIFS(&quot; + csv1 + &quot;)&gt;1&quot;;\n                }\n\n            }\n\n            for (int i = 0; i &lt; s1; i++) {\n                CellRangeAddress region = sheet.getMergedRegion(i);\n                int colIndex = region.getFirstColumn();\n                int rowNum = region.getFirstRow();\n                String val1 = formatter.formatCellValue(sheet.getRow(rowNum).getCell(colIndex));\n                if (val1.contains(&quot;Outcome&quot;)) {\n                    int fcol = sheet.getMergedRegion(i).getFirstColumn();\n                    int lcol = sheet.getMergedRegion(i).getLastColumn();\n                    lcollett = CellReference.convertNumToColString(lcol);\n                    for (i = fcol; i &lt;= lcol; i++) {\n                        sheet.autoSizeColumn(i);\n                    }\n\n                }\n\n            }\n\n            ConditionalFormattingRule rule1 = sheetCF.createConditionalFormattingRule(csv1);\n            org.apache.poi.ss.usermodel.FontFormatting font = rule1.createFontFormatting();\n            font.setFontStyle(false, true);\n            font.setFontColorIndex(IndexedColors.BLUE.index);\n            String cellrangeadd = &quot;A4:&quot; + lcollett + &quot;10000&quot;;\n            CellRangeAddress[] regions = new CellRangeAddress[] { CellRangeAddress.valueOf(cellrangeadd) };\n            sheetCF.addConditionalFormatting(regions, rule1);\n            \n            // Sheet 3\n            \n            SheetConditionalFormatting sheetCFa = sheet.getSheetConditionalFormatting();\n            \n            XSSFSheet sheet21 = workbook.createSheet(&quot;PossibleValues&quot;);\n\n            sheet21.setColumnWidth(0, 20 * 256);\n            sheet21.setColumnWidth(1, 50 * 256);\n            \n            XSSFRow rowhead33 = sheet21.createRow((short) 0);\n\n            rowhead33.createCell(0).setCellValue(&quot;DataObject&quot;);\n            rowhead33.getCell(0).setCellStyle(style14);\n            rowhead33.createCell(1).setCellValue(&quot;AttributeName&quot;);\n            rowhead33.getCell(1).setCellStyle(style14);\n            rowhead33.createCell(2).setCellValue(&quot;DataType&quot;);\n            rowhead33.getCell(2).setCellStyle(style14);\n            rowhead33.createCell(3).setCellValue(&quot;PossibleValues&quot;);\n            rowhead33.getCell(3).setCellStyle(style14);\n\n            \n            int attcell=1;\n            ArrayList&lt;String&gt; xkdf = new ArrayList&lt;String&gt;();\n            for (int i = 0; i &lt; conditionheader.length(); i++) {\n\n                JSONObject json = conditionheader.getJSONObject(i);\n                String conname = json.getString(&quot;label&quot;);\n                String contype = json.getString(&quot;type&quot;);\n                String dataobject1 = json.getString(&quot;dataobject&quot;);\n                String pv = json.getString(&quot;values&quot;);\n            String  contypea = &quot;[&quot; + contype + &quot;]&quot;;\n            String fnl = dataobject1 + &quot;.&quot; + conname + &quot; &quot; + contypea;\n            \n                xkdf.add(fnl);\n                \n\n                XSSFRow rowhead334 = sheet21.createRow((short) attcell + i);\n                     \n                rowhead334.createCell(0).setCellValue(dataobject1);\n                rowhead334.createCell(1).setCellValue(conname);\n                rowhead334.createCell(2).setCellValue(contype);\n                rowhead334.createCell(3).setCellValue(pv);\n\n\n            }\n            \n    \n            String kkf = &quot;IF(AND(NOT(ISBLANK(J4)),ISERROR(SUM(MATCH(FILTERXML(\\&quot;&lt;t&gt;&lt;s&gt;\\&quot;&amp;SUBSTITUTE(J4,\\&quot;,\\&quot;,\\&quot;&lt;/s&gt;&lt;s&gt;\\&quot;)&amp;\\&quot;&lt;/s&gt;&lt;/t&gt;\\&quot;,\\&quot;//s\\&quot;),FILTERXML(\\&quot;&lt;t&gt;&lt;s&gt;\\&quot;&amp;SUBSTITUTE(PossibleValues!$D$2,\\&quot;,\\&quot;,\\&quot;&lt;/s&gt;&lt;s&gt;\\&quot;)&amp;\\&quot;&lt;/s&gt;&lt;/t&gt;\\&quot;,\\&quot;//s\\&quot;),0))),\\&quot;\\&quot;),TRUE())&quot;;\n            ConditionalFormattingRule rule13 = sheetCF.createConditionalFormattingRule(kkf);\n            org.apache.poi.ss.usermodel.FontFormatting font535 = rule13.createFontFormatting();\n            font535.setFontStyle(false, true);\n            font535.setFontColorIndex(IndexedColors.RED.index);\n            \n            String cellrangeadd2 = &quot;J4:J10000&quot;;\n            CellRangeAddress[] regionssd = new CellRangeAddress[] { CellRangeAddress.valueOf(cellrangeadd2) };\n            sheetCF.addConditionalFormatting(regionssd, rule13);\n\n              FileOutputStream fileOut = new FileOutputStream(filename);\n              workbook.write(fileOut); \n              fileOut.close(); \n              workbook.close();\n  \n            System.out.println(&quot;Your excel file has been generated!&quot;);   \n\n          \n        } catch (JSONException e) {\n            e.printStackTrace();\n        } catch (IOException e) {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n        }        \n    }\n\n}\n</code></pre>\n<h2>Required manual post-production in Excel</h2>\n<p>Now  I did the below steps</p>\n<ol>\n<li>Add three values in column 'J' named &quot;State&quot;. All cells are getting highlighted, see image below:</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/mrJ2p.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mrJ2p.png\" alt=\"all cells get highlighted, no matter if valid\" /></a></p>\n<ol start=\"2\">\n<li>Click Conditional Formatting &gt; Manage Rules &gt; Select Rule (Format Red) &gt; Edit Rules &gt; OK &gt; Apply &gt; OK</li>\n</ol>\n<p>After this action the column values are getting highlighted correctly.</p>\n<p><a href=\"https://i.stack.imgur.com/RziCK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RziCK.png\" alt=\"enter image description here\" /></a></p>\n<h2>Question</h2>\n<p>Is there anything I missed in my Java code?\nHow do I avoid this manual activity in Excel?</p>\n"},{"tags":["java","android","android-studio"],"comments":[{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":1,"creation_date":1671280222,"post_id":74834042,"comment_id":132068073,"body_markdown":"We will not follow links to tutorials.","body":"We will not follow links to tutorials."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1671280297,"post_id":74834042,"comment_id":132068084,"body_markdown":"And you should tell us at which moment or at which action the &#39;auto&#39;save should be done. What is &#39;autosaving&#39; to begin with you might explain.","body":"And you should tell us at which moment or at which action the &#39;auto&#39;save should be done. What is &#39;autosaving&#39; to begin with you might explain."},{"owner":{"account_id":27281380,"reputation":9,"user_id":20801232,"display_name":"Io567"},"score":0,"creation_date":1671282453,"post_id":74834042,"comment_id":132068424,"body_markdown":"Autosave should be done while you write. Idk how to explain.","body":"Autosave should be done while you write. Idk how to explain."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1671490138,"post_id":74834042,"comment_id":132106792,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"tags":[],"owner":{"account_id":20420629,"reputation":658,"user_id":14981685,"display_name":"hossein"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671282356,"creation_date":1671282356,"answer_id":74834312,"question_id":74834042,"body_markdown":"you can use &quot;periodic work request&quot; to auto-save your notes.\r\nyou can use this tutorial or other tutorial\r\n[enter link description here][1]\r\n\r\n\r\n  [1]: https://www.google.com/search?q=periodic%20request&amp;sxsrf=ALiCzsa5cUTx869BzHAGQiGFvTMdNKx0Sw%3A1671282160905&amp;ei=8L2dY4H3NumX9u8Pq6mv0A0&amp;ved=0ahUKEwiBr5Sc24D8AhXpi_0HHavUC9oQ4dUDCBA&amp;uact=5&amp;oq=periodic%20request&amp;gs_lcp=Cgxnd3Mtd2l6LXNlcnAQAzIECCMQJzIECCMQJzIFCAAQgAQyBggAEBYQHjIGCAAQFhAeMgYIABAWEB4yBggAEBYQHjIGCAAQFhAeMgYIABAWEB4yBggAEBYQHjoKCAAQRxDWBBCwA0oECEEYAEoECEYYAFCkCFikCGCTC2gCcAF4AIABiwKIAYsCkgEDMi0xmAEAoAEByAEIwAEB&amp;sclient=gws-wiz-serp#fpstate=ive&amp;vld=cid:3b4201b2,vid:1VVir3-4hII","title":"How can I add autosave to a Note App with entities?","body":"<p>you can use &quot;periodic work request&quot; to auto-save your notes.\nyou can use this tutorial or other tutorial\n<a href=\"https://www.google.com/search?q=periodic%20request&amp;sxsrf=ALiCzsa5cUTx869BzHAGQiGFvTMdNKx0Sw%3A1671282160905&amp;ei=8L2dY4H3NumX9u8Pq6mv0A0&amp;ved=0ahUKEwiBr5Sc24D8AhXpi_0HHavUC9oQ4dUDCBA&amp;uact=5&amp;oq=periodic%20request&amp;gs_lcp=Cgxnd3Mtd2l6LXNlcnAQAzIECCMQJzIECCMQJzIFCAAQgAQyBggAEBYQHjIGCAAQFhAeMgYIABAWEB4yBggAEBYQHjIGCAAQFhAeMgYIABAWEB4yBggAEBYQHjoKCAAQRxDWBBCwA0oECEEYAEoECEYYAFCkCFikCGCTC2gCcAF4AIABiwKIAYsCkgEDMi0xmAEAoAEByAEIwAEB&amp;sclient=gws-wiz-serp#fpstate=ive&amp;vld=cid:3b4201b2,vid:1VVir3-4hII\" rel=\"nofollow noreferrer\">enter link description here</a></p>\n"}],"owner":{"account_id":27281380,"reputation":9,"user_id":20801232,"display_name":"Io567"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1671282356,"creation_date":1671279795,"question_id":74834042,"body_markdown":"I want to learn how to make android apps so I followed a tutorial series on YouTube and I made a Note App. But I need to add autosave and I don&#39;t know how. I searched on YouTube and I tried everything and nothing works.\r\nHere is the Playlist with the tutorials:\r\nhttps://youtube.com/playlist?list=PLam6bY5NszYN6-a1wt7yRISWfmYPdkbMu\r\n\r\nAs I said before, I&#39;m new to all of this, but I really want to make this app.","title":"How can I add autosave to a Note App with entities?","body":"<p>I want to learn how to make android apps so I followed a tutorial series on YouTube and I made a Note App. But I need to add autosave and I don't know how. I searched on YouTube and I tried everything and nothing works.\nHere is the Playlist with the tutorials:\n<a href=\"https://youtube.com/playlist?list=PLam6bY5NszYN6-a1wt7yRISWfmYPdkbMu\" rel=\"nofollow noreferrer\">https://youtube.com/playlist?list=PLam6bY5NszYN6-a1wt7yRISWfmYPdkbMu</a></p>\n<p>As I said before, I'm new to all of this, but I really want to make this app.</p>\n"},{"tags":["java","generics"],"comments":[{"owner":{"account_id":7595189,"reputation":44576,"user_id":5761558,"display_name":"ernest_k"},"score":0,"creation_date":1671109464,"post_id":74811907,"comment_id":132030122,"body_markdown":"IMO, what makes the difference is that your *interface* designed around `Container&lt;T&gt;` rather than `T`. In other words, if `T` were the parameter types in your method signatures, you wouldn&#39;t have this problem with generic types.","body":"IMO, what makes the difference is that your <i>interface</i> designed around <code>Container&lt;T&gt;</code> rather than <code>T</code>. In other words, if <code>T</code> were the parameter types in your method signatures, you wouldn&#39;t have this problem with generic types."},{"owner":{"account_id":94267,"reputation":47134,"user_id":257465,"display_name":"tzaman"},"score":0,"creation_date":1671109474,"post_id":74811907,"comment_id":132030129,"body_markdown":"It seems like there&#39;s two different things you&#39;re trying to be generic over here, i.e. the contained type _and_ the container type. Can you elaborate a bit why a `StringContainer` is producing and consuming containers rather than strings?","body":"It seems like there&#39;s two different things you&#39;re trying to be generic over here, i.e. the contained type <i>and</i> the container type. Can you elaborate a bit why a <code>StringContainer</code> is producing and consuming containers rather than strings?"},{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":1,"creation_date":1671109508,"post_id":74811907,"comment_id":132030141,"body_markdown":"Why is 4 a problem? Why did you expect there to be a diamond operator in the first place? It seems like it is your expectation that is wrong in the case of 4.","body":"Why is 4 a problem? Why did you expect there to be a diamond operator in the first place? It seems like it is your expectation that is wrong in the case of 4."},{"owner":{"account_id":15496532,"reputation":13,"user_id":12911324,"display_name":"Maurits Silvis"},"score":0,"creation_date":1671109695,"post_id":74811907,"comment_id":132030206,"body_markdown":"@tzaman My StringContainer will also produce and consume strings, but the methods for it don&#39;t cause me trouble so I left them out. An example of a StringContainer of this form could be a node in a linked list that contains both data (strings) and references to other nodes (containers) of strings.","body":"@tzaman My StringContainer will also produce and consume strings, but the methods for it don&#39;t cause me trouble so I left them out. An example of a StringContainer of this form could be a node in a linked list that contains both data (strings) and references to other nodes (containers) of strings."},{"owner":{"account_id":15496532,"reputation":13,"user_id":12911324,"display_name":"Maurits Silvis"},"score":0,"creation_date":1671109823,"post_id":74811907,"comment_id":132030258,"body_markdown":"@ernest_k Exactly, interface methods like `set(T value)` and their corresponding implementation `set(String value)` would be just fine. Since those methods don&#39;t cause me trouble, I left them out of the example code.","body":"@ernest_k Exactly, interface methods like <code>set(T value)</code> and their corresponding implementation <code>set(String value)</code> would be just fine. Since those methods don&#39;t cause me trouble, I left them out of the example code."},{"owner":{"account_id":94267,"reputation":47134,"user_id":257465,"display_name":"tzaman"},"score":0,"creation_date":1671109829,"post_id":74811907,"comment_id":132030261,"body_markdown":"So is it intended that one concrete type of `StringContainer` should be able to consume another type? Or is that what you&#39;re trying to prevent with type checks?","body":"So is it intended that one concrete type of <code>StringContainer</code> should be able to consume another type? Or is that what you&#39;re trying to prevent with type checks?"},{"owner":{"account_id":15496532,"reputation":13,"user_id":12911324,"display_name":"Maurits Silvis"},"score":0,"creation_date":1671109930,"post_id":74811907,"comment_id":132030296,"body_markdown":"@Sweeper I&#39;m much more used to generic implementations of generic interfaces than non-generic ones from seeing code like `List&lt;String&gt; list = new ArrayList&lt;&gt;();`. I wasn&#39;t necessarily expecting a diamond operator in my code. The absence of it looked curious to me, though.","body":"@Sweeper I&#39;m much more used to generic implementations of generic interfaces than non-generic ones from seeing code like <code>List&lt;String&gt; list = new ArrayList&lt;&gt;();</code>. I wasn&#39;t necessarily expecting a diamond operator in my code. The absence of it looked curious to me, though."},{"owner":{"account_id":15496532,"reputation":13,"user_id":12911324,"display_name":"Maurits Silvis"},"score":0,"creation_date":1671110222,"post_id":74811907,"comment_id":132030410,"body_markdown":"@tzaman I would like to see that the type `StringContainer implements Container&lt;String&gt;` does not accept types other than `StringContainer`, just like the original non-interface-implementing version. That&#39;s why I was thinking of type checks. Maybe I&#39;m entirely down the wrong road, though?","body":"@tzaman I would like to see that the type <code>StringContainer implements Container&lt;String&gt;</code> does not accept types other than <code>StringContainer</code>, just like the original non-interface-implementing version. That&#39;s why I was thinking of type checks. Maybe I&#39;m entirely down the wrong road, though?"},{"owner":{"account_id":2139538,"reputation":42501,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":0,"creation_date":1671110804,"post_id":74811907,"comment_id":132030609,"body_markdown":"Agree with @Sweeper, #4 is just nonsense. That&#39;s not a drawback. That&#39;s your expectations being wrong. I can make a `class MyStringList implements List&lt;String&gt;` and instantiate it with `List&lt;String&gt; strs = new MyStringList()`. The type parameter is already specified by the class. Instantiators don&#39;t need to specify it either explicitly or implicitly.","body":"Agree with @Sweeper, #4 is just nonsense. That&#39;s not a drawback. That&#39;s your expectations being wrong. I can make a <code>class MyStringList implements List&lt;String&gt;</code> and instantiate it with <code>List&lt;String&gt; strs = new MyStringList()</code>. The type parameter is already specified by the class. Instantiators don&#39;t need to specify it either explicitly or implicitly."},{"owner":{"account_id":15496532,"reputation":13,"user_id":12911324,"display_name":"Maurits Silvis"},"score":0,"creation_date":1671111602,"post_id":74811907,"comment_id":132030938,"body_markdown":"@Michael Okay, thanks for that :) I&#39;m still getting used to Java, so it&#39;s good to hear what are common (or not) idioms.","body":"@Michael Okay, thanks for that :) I&#39;m still getting used to Java, so it&#39;s good to hear what are common (or not) idioms."}],"answers":[{"tags":[],"owner":{"account_id":2139538,"reputation":42501,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1671110398,"creation_date":1671110398,"answer_id":74812195,"question_id":74811907,"body_markdown":"Is this what you&#39;re looking for? It&#39;s called a recursive type bound.\r\n\r\n    interface Container&lt;T extends Container&lt;T&gt;&gt; {\r\n        T produce();\r\n    \r\n        void consume(T container);\r\n    }\r\n    \r\n    class StringContainer implements Container&lt;StringContainer&gt; {\r\n        @Override\r\n        public StringContainer produce() {\r\n            return new StringContainer();\r\n        }\r\n        \r\n        @Override\r\n        public void consume(StringContainer container) {\r\n        }\r\n    }\r\n\r\n","title":"How to define a general interface for several type-specific classes?","body":"<p>Is this what you're looking for? It's called a recursive type bound.</p>\n<pre><code>interface Container&lt;T extends Container&lt;T&gt;&gt; {\n    T produce();\n\n    void consume(T container);\n}\n\nclass StringContainer implements Container&lt;StringContainer&gt; {\n    @Override\n    public StringContainer produce() {\n        return new StringContainer();\n    }\n    \n    @Override\n    public void consume(StringContainer container) {\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7595189,"reputation":44576,"user_id":5761558,"display_name":"ernest_k"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1671111101,"creation_date":1671110575,"answer_id":74812232,"question_id":74811907,"body_markdown":"It seems that you have two APIs, and you should treat them separately with separate interfaces. Yes, you can merge them into the same interface with distinct method names.\r\n\r\nI think you should have two interfaces for your &quot;containers&quot; and for your &quot;containers of containers&quot;. Here&#39;s what I&#39;d make it:\r\n\r\n\tinterface Container&lt;T&gt; {\r\n\t\tT produce();\r\n\t\tvoid consume(T container);\r\n\t}\r\n\t\r\n\tinterface MetaContainer&lt;T, R extends Container&lt;T&gt;&gt; {\r\n\t\tR produceContainer();\r\n\t\tvoid consumeContainer(R container);\r\n\t}\r\n\t\r\n\tclass StringContainer implements Container&lt;String&gt;, MetaContainer&lt;String, StringContainer&gt; {\r\n\t\t@Override\r\n\t\tpublic String produce() {\r\n\t\t\treturn &quot;&quot;;\r\n\t\t}\r\n\t\r\n\t\t@Override\r\n\t\tpublic void consume(String container) {\r\n\t\t}\r\n\t\r\n\t\t@Override\r\n\t\tpublic StringContainer produceContainer() {\r\n\t\t\treturn this;\r\n\t\t}\r\n\t\r\n\t\t@Override\r\n\t\tpublic void consumeContainer(StringContainer container) {\r\n\t\t}\r\n\t}\r\n\r\nI implemented both interfaces using the same class to emulate your `StringContainer` class.","title":"How to define a general interface for several type-specific classes?","body":"<p>It seems that you have two APIs, and you should treat them separately with separate interfaces. Yes, you can merge them into the same interface with distinct method names.</p>\n<p>I think you should have two interfaces for your &quot;containers&quot; and for your &quot;containers of containers&quot;. Here's what I'd make it:</p>\n<pre><code>interface Container&lt;T&gt; {\n    T produce();\n    void consume(T container);\n}\n\ninterface MetaContainer&lt;T, R extends Container&lt;T&gt;&gt; {\n    R produceContainer();\n    void consumeContainer(R container);\n}\n\nclass StringContainer implements Container&lt;String&gt;, MetaContainer&lt;String, StringContainer&gt; {\n    @Override\n    public String produce() {\n        return &quot;&quot;;\n    }\n\n    @Override\n    public void consume(String container) {\n    }\n\n    @Override\n    public StringContainer produceContainer() {\n        return this;\n    }\n\n    @Override\n    public void consumeContainer(StringContainer container) {\n    }\n}\n</code></pre>\n<p>I implemented both interfaces using the same class to emulate your <code>StringContainer</code> class.</p>\n"}],"owner":{"account_id":15496532,"reputation":13,"user_id":12911324,"display_name":"Maurits Silvis"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":107,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74812195,"answer_count":2,"score":1,"last_activity_date":1671281846,"creation_date":1671109042,"question_id":74811907,"body_markdown":"While trying to program to interfaces, I regularly find myself in the following situation:\r\n\r\n- I have several very similar classes representing containers or algorithms for different types.\r\n- I would like to define a common interface for these classes.\r\n\r\nConsider, e.g., a string container.\r\nSuch a container will likely have string processing methods.\r\nSince those methods are easily represented using generic interfaces, I am ignoring them.\r\nHere, I want to focus on methods that can be used to process or provide references to other string containers:\r\n\r\n```java\r\npublic class StringContainer {\r\n    StringContainer produce() {\r\n        return new StringContainer();\r\n    }\r\n\r\n    void consume(StringContainer stringContainer) {\r\n    }\r\n}\r\n```\r\n\r\nThis class can be used just fine in code like:\r\n\r\n```java\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n        StringContainer stringContainer = new StringContainer();\r\n        stringContainer.produce();\r\n        stringContainer.consume(stringContainer);\r\n    }\r\n}\r\n```\r\n\r\nThe problem is: I&#39;m using a concrete class and not an interface to refer to the string container.\r\nWhat if I want to introduce a double container or a list container later and want to leave the rest of the code as is?\r\n\r\nMaybe generics could form a solution to this problem?\r\nHere is my try.\r\nI first define a generic container class:\r\n\r\n```java\r\ninterface Container&lt;T&gt; {\r\n    Container&lt;T&gt; produce();\r\n\r\n    void consume(Container&lt;T&gt; container);\r\n}\r\n```\r\n\r\nI then create type-specific implementations of the form:\r\n\r\n```java\r\npublic class StringContainer implements Container&lt;String&gt; {\r\n    @Override\r\n    public Container&lt;String&gt; produce() {\r\n        return new StringContainer();\r\n    }\r\n\r\n    @Override\r\n    public void consume(Container&lt;String&gt; container) {\r\n    }\r\n\r\n    public void consume(StringContainer container) {\r\n    }\r\n}\r\n```\r\n\r\nThe above classes can be used as follows:\r\n\r\n```java\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n        Container&lt;String&gt; stringContainer = new StringContainer();\r\n        stringContainer.produce();\r\n        stringContainer.consume(stringContainer);\r\n    }\r\n}\r\n```\r\n\r\nHowever, the above approach has several drawbacks:\r\n\r\n1. The `consume(Container&lt;String&gt; container)` method accepts other types than `StringContainer`.\r\n2. In `consume(Container&lt;String&gt; container)`, the parametrized type `Container&lt;String&gt;` has to be used when processing `container`. I can&#39;t assign it to `StringContainer` variables (without type checks or casts).\r\n3. The alternative `consume(StringContainer container)` method is defined for `StringContainer` objects, but can&#39;t be called from a `Container&lt;String&gt;` reference.\r\n4. Finally, to me, the line `Container&lt;String&gt; stringContainer = new StringContainer();` has an awkward-looking notation that suggests a diamond operator is missing in `new StringContainer()`.\r\n\r\nWhat is the idiomatic way to define a general interface for several type-specific classes, which doesn&#39;t have (all) the above drawbacks?\r\n\r\nShould I ignore point 4 and address points 1 and 2 by adding type checks/casts, throwing an `UnsupportedOperationException` or `IllegalArgumentException` in case passed objects aren&#39;t `StringContainer`s?\r\nOr is there another way to use generics? Can type bounds help me, for example?\r\nOr should I look for a solution outside of generics?\r\n\r\n---\r\n\r\nUpdate:\r\n\r\nBased on the answers given so far, I have come to realize that I had conflicting goals:\r\n\r\n- On the one hand, I wanted to restrict the types accepted by container methods (as described by points 1 and 2).\r\n- On the other hand, I wanted to address and pass container types using an interface reference (as hinted at by point 3 and my implicit desire to keep the second `main` method as is). \r\n\r\nI now see that these goals cannot both be reached statically.\r\nSince I don&#39;t want to rephrase my question in retrospect, I&#39;ll forget about my second (rather implicit) goal and mark the first-posted solution that addressed points 1 and 2 as the answer.","title":"How to define a general interface for several type-specific classes?","body":"<p>While trying to program to interfaces, I regularly find myself in the following situation:</p>\n<ul>\n<li>I have several very similar classes representing containers or algorithms for different types.</li>\n<li>I would like to define a common interface for these classes.</li>\n</ul>\n<p>Consider, e.g., a string container.\nSuch a container will likely have string processing methods.\nSince those methods are easily represented using generic interfaces, I am ignoring them.\nHere, I want to focus on methods that can be used to process or provide references to other string containers:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class StringContainer {\n    StringContainer produce() {\n        return new StringContainer();\n    }\n\n    void consume(StringContainer stringContainer) {\n    }\n}\n</code></pre>\n<p>This class can be used just fine in code like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Main {\n    public static void main(String[] args) {\n        StringContainer stringContainer = new StringContainer();\n        stringContainer.produce();\n        stringContainer.consume(stringContainer);\n    }\n}\n</code></pre>\n<p>The problem is: I'm using a concrete class and not an interface to refer to the string container.\nWhat if I want to introduce a double container or a list container later and want to leave the rest of the code as is?</p>\n<p>Maybe generics could form a solution to this problem?\nHere is my try.\nI first define a generic container class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>interface Container&lt;T&gt; {\n    Container&lt;T&gt; produce();\n\n    void consume(Container&lt;T&gt; container);\n}\n</code></pre>\n<p>I then create type-specific implementations of the form:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class StringContainer implements Container&lt;String&gt; {\n    @Override\n    public Container&lt;String&gt; produce() {\n        return new StringContainer();\n    }\n\n    @Override\n    public void consume(Container&lt;String&gt; container) {\n    }\n\n    public void consume(StringContainer container) {\n    }\n}\n</code></pre>\n<p>The above classes can be used as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Main {\n    public static void main(String[] args) {\n        Container&lt;String&gt; stringContainer = new StringContainer();\n        stringContainer.produce();\n        stringContainer.consume(stringContainer);\n    }\n}\n</code></pre>\n<p>However, the above approach has several drawbacks:</p>\n<ol>\n<li>The <code>consume(Container&lt;String&gt; container)</code> method accepts other types than <code>StringContainer</code>.</li>\n<li>In <code>consume(Container&lt;String&gt; container)</code>, the parametrized type <code>Container&lt;String&gt;</code> has to be used when processing <code>container</code>. I can't assign it to <code>StringContainer</code> variables (without type checks or casts).</li>\n<li>The alternative <code>consume(StringContainer container)</code> method is defined for <code>StringContainer</code> objects, but can't be called from a <code>Container&lt;String&gt;</code> reference.</li>\n<li>Finally, to me, the line <code>Container&lt;String&gt; stringContainer = new StringContainer();</code> has an awkward-looking notation that suggests a diamond operator is missing in <code>new StringContainer()</code>.</li>\n</ol>\n<p>What is the idiomatic way to define a general interface for several type-specific classes, which doesn't have (all) the above drawbacks?</p>\n<p>Should I ignore point 4 and address points 1 and 2 by adding type checks/casts, throwing an <code>UnsupportedOperationException</code> or <code>IllegalArgumentException</code> in case passed objects aren't <code>StringContainer</code>s?\nOr is there another way to use generics? Can type bounds help me, for example?\nOr should I look for a solution outside of generics?</p>\n<hr />\n<p>Update:</p>\n<p>Based on the answers given so far, I have come to realize that I had conflicting goals:</p>\n<ul>\n<li>On the one hand, I wanted to restrict the types accepted by container methods (as described by points 1 and 2).</li>\n<li>On the other hand, I wanted to address and pass container types using an interface reference (as hinted at by point 3 and my implicit desire to keep the second <code>main</code> method as is).</li>\n</ul>\n<p>I now see that these goals cannot both be reached statically.\nSince I don't want to rephrase my question in retrospect, I'll forget about my second (rather implicit) goal and mark the first-posted solution that addressed points 1 and 2 as the answer.</p>\n"},{"tags":["java","mysql","apache-kafka","debezium"],"answers":[{"tags":[],"owner":{"account_id":10582871,"reputation":985,"user_id":7796098,"display_name":"Duy Nguyen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671281801,"creation_date":1671281801,"answer_id":74834235,"question_id":74755931,"body_markdown":"I suspect that your mysql connector config has problems.\r\n- `.with(&quot;database.include.list&quot;, String.join(&quot;,&quot;, mysql.getTables()))`: this should be in format `DB1,DB2` (Or `mysql` in you case). Or you really wanted to configure for table list, didn&#39;t you? So it should be `table.include.list=mysql.table1,mysql.table2`\r\n- `database.whitelist` and `database.whitelist` were removed in recent Debezium versions. Now they become `database.include.list` and `database.exclude.list`\r\n\r\nHope these points can help you.\r\n","title":"I am not able to capture data changes with Debezium-Java","body":"<p>I suspect that your mysql connector config has problems.</p>\n<ul>\n<li><code>.with(&quot;database.include.list&quot;, String.join(&quot;,&quot;, mysql.getTables()))</code>: this should be in format <code>DB1,DB2</code> (Or <code>mysql</code> in you case). Or you really wanted to configure for table list, didn't you? So it should be <code>table.include.list=mysql.table1,mysql.table2</code></li>\n<li><code>database.whitelist</code> and <code>database.whitelist</code> were removed in recent Debezium versions. Now they become <code>database.include.list</code> and <code>database.exclude.list</code></li>\n</ul>\n<p>Hope these points can help you.</p>\n"}],"owner":{"account_id":24704705,"reputation":1,"user_id":18595655,"display_name":"Furkan Ozmen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":216,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1671281801,"creation_date":1670700363,"question_id":74755931,"body_markdown":"I&#39;m trying to make a Debezium example with Java. I want to capture this every time data is deleted in the database. When the application runs, it prints the following log on the screen:\r\n\r\n    Dec 10, 2022 10:18:46 PM com.github.shyiko.mysql.binlog.BinaryLogClient connect\r\n    INFO: Connected to localhost:3305 at binlog.000008/3443 (sid:10181, cid:41)\r\n\r\nBut when I delete something in the database, debezium is not able to catch it.\r\n\r\nConnection Config Class\r\n\r\n```\r\npublic DebeziumSignal connect(Connection data) {\r\n    final Configuration configuration = DebeziumConfigLoader.load(data);\r\n\r\n    engine = DebeziumEngine.create(ChangeEventFormat.of(Connect.class))\r\n            .using(configuration.asProperties())\r\n            .notifying(this::handleEvent)\r\n            .build();\r\n\r\n    return new DebeziumSignal(engine);\r\n}\r\n```\r\n\r\n\r\nConfig Data class:\r\n\r\n```\r\npublic static Configuration load(Connection connection) {\r\n    final MysqlConnection mysql = connection.getMysqlConnection();\r\n    return Configuration.create()\r\n            .with(&quot;name&quot;, &quot;customer-mysql-connector&quot;)\r\n            .with(&quot;connector.class&quot;, &quot;io.debezium.connector.mysql.MySqlConnector&quot;)\r\n            .with(&quot;offset.storage&quot;, &quot;org.apache.kafka.connect.storage.FileOffsetBackingStore&quot;)\r\n            .with(&quot;offset.flush.interval.ms&quot;, &quot;60000&quot;)\r\n            .with(&quot;database.hostname&quot;, mysql.getHost())\r\n            .with(&quot;database.port&quot;, mysql.getPort())\r\n            .with(&quot;database.user&quot;, mysql.getUsername())\r\n            .with(&quot;database.password&quot;, mysql.getPassword())\r\n            .with(&quot;database.dbname&quot;, mysql.getDbName())\r\n            .with(&quot;database.include.list&quot;, String.join(&quot;,&quot;, mysql.getTables()))\r\n            .with(&quot;include.schema.changes&quot;, &quot;false&quot;)\r\n            .with(&quot;database.server.id&quot;, &quot;10181&quot;)\r\n            .with(&quot;database.server.name&quot;, &quot;customer-mysql-db-server&quot;)\r\n            .with(&quot;database.history&quot;,\r\n                    &quot;io.debezium.relational.history.FileDatabaseHistory&quot;)\r\n            .with(&quot;database.history.file.filename&quot;,\r\n                    &quot;/tmp/dbhistory.dat&quot;)\r\n            .with(&quot;database.whitelist&quot;, &quot;mysql.*&quot;)\r\n            .with(&quot;offset.storage.file.filename&quot;, &quot;/tmp/offsets.dat&quot;)\r\n            .with(&quot;table.whitelist&quot;, &quot;mysql.*&quot;)\r\n            .build();\r\n}\r\n```\r\n\r\n\r\nconnection:\r\n\r\n```\r\nexecutorService.submit(engine);\r\n```\r\n\r\n\r\nI expect the method named `handleEvent` to work when data is deleted from User table but it doesn&#39;t.","title":"I am not able to capture data changes with Debezium-Java","body":"<p>I'm trying to make a Debezium example with Java. I want to capture this every time data is deleted in the database. When the application runs, it prints the following log on the screen:</p>\n<pre><code>Dec 10, 2022 10:18:46 PM com.github.shyiko.mysql.binlog.BinaryLogClient connect\nINFO: Connected to localhost:3305 at binlog.000008/3443 (sid:10181, cid:41)\n</code></pre>\n<p>But when I delete something in the database, debezium is not able to catch it.</p>\n<p>Connection Config Class</p>\n<pre><code>public DebeziumSignal connect(Connection data) {\n    final Configuration configuration = DebeziumConfigLoader.load(data);\n\n    engine = DebeziumEngine.create(ChangeEventFormat.of(Connect.class))\n            .using(configuration.asProperties())\n            .notifying(this::handleEvent)\n            .build();\n\n    return new DebeziumSignal(engine);\n}\n</code></pre>\n<p>Config Data class:</p>\n<pre><code>public static Configuration load(Connection connection) {\n    final MysqlConnection mysql = connection.getMysqlConnection();\n    return Configuration.create()\n            .with(&quot;name&quot;, &quot;customer-mysql-connector&quot;)\n            .with(&quot;connector.class&quot;, &quot;io.debezium.connector.mysql.MySqlConnector&quot;)\n            .with(&quot;offset.storage&quot;, &quot;org.apache.kafka.connect.storage.FileOffsetBackingStore&quot;)\n            .with(&quot;offset.flush.interval.ms&quot;, &quot;60000&quot;)\n            .with(&quot;database.hostname&quot;, mysql.getHost())\n            .with(&quot;database.port&quot;, mysql.getPort())\n            .with(&quot;database.user&quot;, mysql.getUsername())\n            .with(&quot;database.password&quot;, mysql.getPassword())\n            .with(&quot;database.dbname&quot;, mysql.getDbName())\n            .with(&quot;database.include.list&quot;, String.join(&quot;,&quot;, mysql.getTables()))\n            .with(&quot;include.schema.changes&quot;, &quot;false&quot;)\n            .with(&quot;database.server.id&quot;, &quot;10181&quot;)\n            .with(&quot;database.server.name&quot;, &quot;customer-mysql-db-server&quot;)\n            .with(&quot;database.history&quot;,\n                    &quot;io.debezium.relational.history.FileDatabaseHistory&quot;)\n            .with(&quot;database.history.file.filename&quot;,\n                    &quot;/tmp/dbhistory.dat&quot;)\n            .with(&quot;database.whitelist&quot;, &quot;mysql.*&quot;)\n            .with(&quot;offset.storage.file.filename&quot;, &quot;/tmp/offsets.dat&quot;)\n            .with(&quot;table.whitelist&quot;, &quot;mysql.*&quot;)\n            .build();\n}\n</code></pre>\n<p>connection:</p>\n<pre><code>executorService.submit(engine);\n</code></pre>\n<p>I expect the method named <code>handleEvent</code> to work when data is deleted from User table but it doesn't.</p>\n"},{"tags":["java","discord","discord-jda"],"answers":[{"tags":[],"owner":{"account_id":14719989,"reputation":5877,"user_id":10630900,"display_name":"Minn"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1671281613,"creation_date":1671281613,"answer_id":74834211,"question_id":74833816,"body_markdown":"Assuming you&#39;re using the latest version of JDA (5.0.0-beta.2), the way to send a select menu is this:\r\n\r\n 1. Create a `StringSelectMenu` to allow selecting arbitrary strings:\r\n\r\n    ```java\r\n    // The string here is the id later used to identify the menu on use. Make it unique for each menu.\r\n    StringSelectMenu.Builder builder = StringSelectMenu.create(&quot;menu:id&quot;);\r\n    // Add one or more options\r\n    // First parameter is the label that the user will see, the second is the value your bot will receive when this is selected.\r\n    builder.addOption(&quot;Hello World&quot;, &quot;hello_world&quot;);\r\n    // Then once you have configured all you want, build it\r\n    StringSelectMenu menu = builder.build();\r\n    ```\r\n\r\n2. Send the menu using one of the send methods (reply/sendMessage)\r\n   ```java\r\n   // ActionRow is the layout in which your component is arranged (this is currently the only available layout)\r\n   channel.sendMessageComponents(ActionRow.of(menu)).queue();\r\n   ```\r\n\r\n3. Setup an event listener for this menu\r\n   ```java\r\n   public void Listener extends ListenerAdapter {\r\n       @Override\r\n       public void onStringSelectInteraction(StringSelectInteractionEvent event) {\r\n           // same id as before in create(...)\r\n           if (event.getComponentId().equals(&quot;menu:id&quot;)) {\r\n               List&lt;String&gt; selected = event.getValues(); // the values the user selected\r\n               ... your code to handle the selection ...\r\n               // Either reply with a message\r\n               event.reply(&quot;Your selection was processed&quot;).queue();\r\n               // Or by editing the message (replace means it removes the menu)\r\n               event.editMessage(&quot;It was selected&quot;).setReplace(true).queue();\r\n           }\r\n       }\r\n   }\r\n   ```\r\n\r\nThere is also `EntitySelectMenu` which works rather similarly, but can be used to select `User`/`Member`/`Role` or `GuildChannel` instead of string options.","title":"How To Send DropDown Menu In Java Discord API?","body":"<p>Assuming you're using the latest version of JDA (5.0.0-beta.2), the way to send a select menu is this:</p>\n<ol>\n<li><p>Create a <code>StringSelectMenu</code> to allow selecting arbitrary strings:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// The string here is the id later used to identify the menu on use. Make it unique for each menu.\nStringSelectMenu.Builder builder = StringSelectMenu.create(&quot;menu:id&quot;);\n// Add one or more options\n// First parameter is the label that the user will see, the second is the value your bot will receive when this is selected.\nbuilder.addOption(&quot;Hello World&quot;, &quot;hello_world&quot;);\n// Then once you have configured all you want, build it\nStringSelectMenu menu = builder.build();\n</code></pre>\n</li>\n<li><p>Send the menu using one of the send methods (reply/sendMessage)</p>\n<pre class=\"lang-java prettyprint-override\"><code>// ActionRow is the layout in which your component is arranged (this is currently the only available layout)\nchannel.sendMessageComponents(ActionRow.of(menu)).queue();\n</code></pre>\n</li>\n<li><p>Setup an event listener for this menu</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void Listener extends ListenerAdapter {\n    @Override\n    public void onStringSelectInteraction(StringSelectInteractionEvent event) {\n        // same id as before in create(...)\n        if (event.getComponentId().equals(&quot;menu:id&quot;)) {\n            List&lt;String&gt; selected = event.getValues(); // the values the user selected\n            ... your code to handle the selection ...\n            // Either reply with a message\n            event.reply(&quot;Your selection was processed&quot;).queue();\n            // Or by editing the message (replace means it removes the menu)\n            event.editMessage(&quot;It was selected&quot;).setReplace(true).queue();\n        }\n    }\n}\n</code></pre>\n</li>\n</ol>\n<p>There is also <code>EntitySelectMenu</code> which works rather similarly, but can be used to select <code>User</code>/<code>Member</code>/<code>Role</code> or <code>GuildChannel</code> instead of string options.</p>\n"}],"owner":{"account_id":26564882,"reputation":102,"user_id":20192114,"display_name":"LakshyaK2011"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":791,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74834211,"answer_count":1,"score":0,"last_activity_date":1671281613,"creation_date":1671277546,"question_id":74833816,"body_markdown":"I Am Making A Bot In Java Discord API,&lt;br&gt;\r\nI want to send a Drop Down Menu In A Channel,&lt;br&gt;\r\nThere is a MessageChannel Object I Have and I Know How To Send Message By&lt;br&gt; `channel.sendMessage(&quot;MESSAGE&quot;).queue();`&lt;br&gt;\r\nBut How I Send A Drop Down Menu?&lt;br&gt;\r\n\r\nI Have Tried,\r\n1) Making A Class Implementing SelectMenu Interface,&lt;br&gt;\r\ni have overrided all the necessary methods like `getMinValue()`, `getPlaceHolder()`&lt;br&gt;\r\nI Have Expected,\r\nI My Bot Will Send A Drop Down Menu, in a text channel and when I select an option it will send me some result in that channel","title":"How To Send DropDown Menu In Java Discord API?","body":"<p>I Am Making A Bot In Java Discord API,<br>\nI want to send a Drop Down Menu In A Channel,<br>\nThere is a MessageChannel Object I Have and I Know How To Send Message By<br> <code>channel.sendMessage(&quot;MESSAGE&quot;).queue();</code><br>\nBut How I Send A Drop Down Menu?<br></p>\n<p>I Have Tried,</p>\n<ol>\n<li>Making A Class Implementing SelectMenu Interface,<br>\ni have overrided all the necessary methods like <code>getMinValue()</code>, <code>getPlaceHolder()</code><br>\nI Have Expected,\nI My Bot Will Send A Drop Down Menu, in a text channel and when I select an option it will send me some result in that channel</li>\n</ol>\n"},{"tags":["java","android","kotlin","retrofit","android-jetpack-compose"],"answers":[{"tags":[],"owner":{"account_id":21393252,"reputation":199,"user_id":15756879,"display_name":"Mohamed Shawky"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671199888,"creation_date":1671199888,"answer_id":74825622,"question_id":74825563,"body_markdown":"HTTP 400 Bad Request so I guess the problem here as you trying to send with the wrong path as you see here you setting your POST endpoint wrong it shouldn&#39;t start with the &quot;/&quot; remove this and it should work fine I guess \r\n\r\n    @Multipart\r\n        @POST(&quot;v1/imagetotext&quot;)\r\n        suspend fun uploadImage(\r\n            @Part image: MultipartBody.Part,\r\n        ): Call&lt;List&lt;Word&gt;&gt;\r\n\r\n","title":"Send an image to an OCR API with Rertofit and Kotlin","body":"<p>HTTP 400 Bad Request so I guess the problem here as you trying to send with the wrong path as you see here you setting your POST endpoint wrong it shouldn't start with the &quot;/&quot; remove this and it should work fine I guess</p>\n<pre><code>@Multipart\n    @POST(&quot;v1/imagetotext&quot;)\n    suspend fun uploadImage(\n        @Part image: MultipartBody.Part,\n    ): Call&lt;List&lt;Word&gt;&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17107880,"reputation":137,"user_id":12379488,"display_name":"masinnlos"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1671281571,"creation_date":1671281571,"answer_id":74834207,"question_id":74825563,"body_markdown":"I solved the problem by adding a header to my post request.\r\n\r\n```\r\ninterface FileApi {\r\n\r\n    @Headers(&quot;X-Api-Key: add your header&quot;)\r\n    @Multipart\r\n    @POST(&quot;v1/imagetotext&quot;)\r\n    fun uploadImage(\r\n        @Part image: MultipartBody.Part,\r\n    ): Call&lt;List&lt;Word&gt;&gt;\r\n\r\n\r\n    companion object {\r\n        private val client = OkHttpClient.Builder().build()\r\n        val instance by lazy {\r\n            Retrofit.Builder()\r\n                //TODO: add some API url\r\n                .baseUrl(&quot;https://api.api-ninjas.com/&quot;)\r\n                .client(client) // add a client instance here, e.g. OkHttpClient\r\n                .addConverterFactory(GsonConverterFactory.create())\r\n                .build()\r\n                .create(FileApi::class.java)\r\n        }\r\n    }\r\n}\r\n```","title":"Send an image to an OCR API with Rertofit and Kotlin","body":"<p>I solved the problem by adding a header to my post request.</p>\n<pre><code>interface FileApi {\n\n    @Headers(&quot;X-Api-Key: add your header&quot;)\n    @Multipart\n    @POST(&quot;v1/imagetotext&quot;)\n    fun uploadImage(\n        @Part image: MultipartBody.Part,\n    ): Call&lt;List&lt;Word&gt;&gt;\n\n\n    companion object {\n        private val client = OkHttpClient.Builder().build()\n        val instance by lazy {\n            Retrofit.Builder()\n                //TODO: add some API url\n                .baseUrl(&quot;https://api.api-ninjas.com/&quot;)\n                .client(client) // add a client instance here, e.g. OkHttpClient\n                .addConverterFactory(GsonConverterFactory.create())\n                .build()\n                .create(FileApi::class.java)\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":17107880,"reputation":137,"user_id":12379488,"display_name":"masinnlos"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":246,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74834207,"answer_count":2,"score":1,"last_activity_date":1671281571,"creation_date":1671199614,"question_id":74825563,"body_markdown":"I&#39;m trying to send an image to extract text from it using https://api-ninjas.com/api/imagetotext. I still get an HTTP 400 Error though and couldn&#39;t figure out why! I have an image in my assets folder and I should receive a list of words from the API as mentioned in the link. Any hints about how to get a appropriate error or to fix it would be great. My Code is: \r\n\r\n```\r\ndata class Word(\r\n    val bounding_box: BoundingBox,\r\n    val text: String\r\n)\r\n\r\ndata class BoundingBox(\r\n    val x1: Int,\r\n    val x2: Int,\r\n    val y1: Int,\r\n    val y2: Int\r\n)\r\n```\r\n\r\nFileApi.kt\r\n\r\n``` \r\nimport com.example.misinfo.retrofitfileupload.dto.Word\r\nimport okhttp3.MultipartBody\r\nimport okhttp3.OkHttpClient\r\nimport retrofit2.Call\r\nimport retrofit2.Retrofit\r\nimport retrofit2.converter.gson.GsonConverterFactory\r\nimport retrofit2.http.Multipart\r\nimport retrofit2.http.POST\r\nimport retrofit2.http.Part\r\n\r\ninterface FileApi {\r\n\r\n    @Multipart\r\n    @POST(&quot;/v1/imagetotext&quot;)\r\n    suspend fun uploadImage(\r\n        @Part image: MultipartBody.Part,\r\n    ): Call&lt;List&lt;Word&gt;&gt;\r\n\r\n\r\n    companion object {\r\n        private val client = OkHttpClient.Builder().build()\r\n        val instance by lazy {\r\n            Retrofit.Builder()\r\n                //TODO: add some API url\r\n                .baseUrl(&quot;https://api.api-ninjas.com/&quot;)\r\n                .client(client) // add a client instance here, e.g. OkHttpClient\r\n                .addConverterFactory(GsonConverterFactory.create())\r\n                .build()\r\n                .create(FileApi::class.java)\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nFileRepository.kt\r\n\r\n```\r\n\r\nimport android.util.Log\r\nimport com.example.misinfo.retrofitfileupload.dto.Word\r\nimport okhttp3.MultipartBody\r\nimport java.io.File\r\nimport java.io.IOException\r\nimport okhttp3.RequestBody.Companion.asRequestBody\r\nimport retrofit2.Call\r\nimport retrofit2.Callback\r\nimport retrofit2.HttpException\r\nimport retrofit2.Response\r\n\r\nclass FileRepository {\r\n\r\n    suspend fun uploadImage(file: File): Boolean {\r\n        var res = false\r\n        try {\r\n            FileApi.instance.uploadImage(\r\n                image = MultipartBody.Part\r\n                    .createFormData(\r\n                        &quot;image&quot;,\r\n                        file.name,\r\n                        file.asRequestBody()\r\n                    )\r\n            ).enqueue(\r\n                object : Callback&lt;List&lt;Word&gt;&gt; {\r\n                    override fun onFailure(call: Call&lt;List&lt;Word&gt;&gt;, t: Throwable) {\r\n                        Log.e(&quot;API Request&quot;, &quot;I got an error and i don&#39;t know why :(&quot;)\r\n                    }\r\n                    override fun onResponse( call: Call&lt;List&lt;Word&gt;&gt;, response: Response&lt;List&lt;Word&gt;&gt;) {\r\n                        val responseBody = response.body()\r\n                        Log.e(&quot;API Request&quot;, responseBody.toString())\r\n                    }\r\n                }\r\n            )\r\n            res = true\r\n            return res\r\n        } catch (e: IOException) {\r\n            e.printStackTrace()\r\n            return res\r\n        } catch (e: HttpException) {\r\n            e.printStackTrace()\r\n            return res\r\n        } finally {\r\n            Log.e(&quot;API Request&quot;, res.toString())\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nFileViewModel.kt\r\n\r\n```\r\nimport androidx.lifecycle.ViewModel\r\nimport androidx.lifecycle.viewModelScope\r\nimport com.example.misinfo.retrofitfileupload.FileRepository\r\nimport kotlinx.coroutines.launch\r\nimport java.io.File\r\n\r\nclass FileViewModel(\r\n    private val repository: FileRepository= FileRepository()\r\n): ViewModel() {\r\n    fun uploadImage(file: File){\r\n        viewModelScope.launch {\r\n            repository.uploadImage(file)\r\n        }\r\n    }\r\n\r\n}\r\n```\r\n\r\nMainActicity.kt\r\n\r\n```\r\nclass MainActivity : ComponentActivity() {\r\n\r\n    class MyReceiver : BroadcastReceiver() {\r\n        override fun onReceive(context: Context?, intent: Intent?) {\r\n            println(&quot;Clicked on Pip Action&quot;)\r\n        }\r\n    }\r\n\r\n    private val isPipSupported by lazy {\r\n        packageManager.hasSystemFeature(\r\n            PackageManager.FEATURE_PICTURE_IN_PICTURE\r\n        )\r\n    }\r\n\r\n    private var viewBounds = Rect()\r\n\r\n    @RequiresApi(Build.VERSION_CODES.O)\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n        setContent {\r\n            MisInfoTheme {\r\n                //ApplicationSwitcher()\r\n                val viewModel = viewModel&lt;FileViewModel&gt;()\r\n                Box(\r\n                    modifier = Modifier.fillMaxSize(),\r\n                    contentAlignment = Alignment.Center\r\n                ) {\r\n                    Button(onClick = {\r\n                        val file = File(cacheDir, &quot;img.png&quot;)\r\n                        file.createNewFile()\r\n                        file.outputStream().use {\r\n                            assets.open(&quot;img.png&quot;).copyTo(it)\r\n                        }\r\n                        viewModel.uploadImage(file)\r\n                    }) {\r\n                        Text(text = &quot;Upload image&quot;)\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n```","title":"Send an image to an OCR API with Rertofit and Kotlin","body":"<p>I'm trying to send an image to extract text from it using <a href=\"https://api-ninjas.com/api/imagetotext\" rel=\"nofollow noreferrer\">https://api-ninjas.com/api/imagetotext</a>. I still get an HTTP 400 Error though and couldn't figure out why! I have an image in my assets folder and I should receive a list of words from the API as mentioned in the link. Any hints about how to get a appropriate error or to fix it would be great. My Code is:</p>\n<pre><code>data class Word(\n    val bounding_box: BoundingBox,\n    val text: String\n)\n\ndata class BoundingBox(\n    val x1: Int,\n    val x2: Int,\n    val y1: Int,\n    val y2: Int\n)\n</code></pre>\n<p>FileApi.kt</p>\n<pre><code>import com.example.misinfo.retrofitfileupload.dto.Word\nimport okhttp3.MultipartBody\nimport okhttp3.OkHttpClient\nimport retrofit2.Call\nimport retrofit2.Retrofit\nimport retrofit2.converter.gson.GsonConverterFactory\nimport retrofit2.http.Multipart\nimport retrofit2.http.POST\nimport retrofit2.http.Part\n\ninterface FileApi {\n\n    @Multipart\n    @POST(&quot;/v1/imagetotext&quot;)\n    suspend fun uploadImage(\n        @Part image: MultipartBody.Part,\n    ): Call&lt;List&lt;Word&gt;&gt;\n\n\n    companion object {\n        private val client = OkHttpClient.Builder().build()\n        val instance by lazy {\n            Retrofit.Builder()\n                //TODO: add some API url\n                .baseUrl(&quot;https://api.api-ninjas.com/&quot;)\n                .client(client) // add a client instance here, e.g. OkHttpClient\n                .addConverterFactory(GsonConverterFactory.create())\n                .build()\n                .create(FileApi::class.java)\n        }\n    }\n}\n</code></pre>\n<p>FileRepository.kt</p>\n<pre><code>\nimport android.util.Log\nimport com.example.misinfo.retrofitfileupload.dto.Word\nimport okhttp3.MultipartBody\nimport java.io.File\nimport java.io.IOException\nimport okhttp3.RequestBody.Companion.asRequestBody\nimport retrofit2.Call\nimport retrofit2.Callback\nimport retrofit2.HttpException\nimport retrofit2.Response\n\nclass FileRepository {\n\n    suspend fun uploadImage(file: File): Boolean {\n        var res = false\n        try {\n            FileApi.instance.uploadImage(\n                image = MultipartBody.Part\n                    .createFormData(\n                        &quot;image&quot;,\n                        file.name,\n                        file.asRequestBody()\n                    )\n            ).enqueue(\n                object : Callback&lt;List&lt;Word&gt;&gt; {\n                    override fun onFailure(call: Call&lt;List&lt;Word&gt;&gt;, t: Throwable) {\n                        Log.e(&quot;API Request&quot;, &quot;I got an error and i don't know why :(&quot;)\n                    }\n                    override fun onResponse( call: Call&lt;List&lt;Word&gt;&gt;, response: Response&lt;List&lt;Word&gt;&gt;) {\n                        val responseBody = response.body()\n                        Log.e(&quot;API Request&quot;, responseBody.toString())\n                    }\n                }\n            )\n            res = true\n            return res\n        } catch (e: IOException) {\n            e.printStackTrace()\n            return res\n        } catch (e: HttpException) {\n            e.printStackTrace()\n            return res\n        } finally {\n            Log.e(&quot;API Request&quot;, res.toString())\n        }\n    }\n}\n</code></pre>\n<p>FileViewModel.kt</p>\n<pre><code>import androidx.lifecycle.ViewModel\nimport androidx.lifecycle.viewModelScope\nimport com.example.misinfo.retrofitfileupload.FileRepository\nimport kotlinx.coroutines.launch\nimport java.io.File\n\nclass FileViewModel(\n    private val repository: FileRepository= FileRepository()\n): ViewModel() {\n    fun uploadImage(file: File){\n        viewModelScope.launch {\n            repository.uploadImage(file)\n        }\n    }\n\n}\n</code></pre>\n<p>MainActicity.kt</p>\n<pre><code>class MainActivity : ComponentActivity() {\n\n    class MyReceiver : BroadcastReceiver() {\n        override fun onReceive(context: Context?, intent: Intent?) {\n            println(&quot;Clicked on Pip Action&quot;)\n        }\n    }\n\n    private val isPipSupported by lazy {\n        packageManager.hasSystemFeature(\n            PackageManager.FEATURE_PICTURE_IN_PICTURE\n        )\n    }\n\n    private var viewBounds = Rect()\n\n    @RequiresApi(Build.VERSION_CODES.O)\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContent {\n            MisInfoTheme {\n                //ApplicationSwitcher()\n                val viewModel = viewModel&lt;FileViewModel&gt;()\n                Box(\n                    modifier = Modifier.fillMaxSize(),\n                    contentAlignment = Alignment.Center\n                ) {\n                    Button(onClick = {\n                        val file = File(cacheDir, &quot;img.png&quot;)\n                        file.createNewFile()\n                        file.outputStream().use {\n                            assets.open(&quot;img.png&quot;).copyTo(it)\n                        }\n                        viewModel.uploadImage(file)\n                    }) {\n                        Text(text = &quot;Upload image&quot;)\n                    }\n                }\n            }\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","batik"],"comments":[{"owner":{"account_id":27273777,"reputation":1,"user_id":20794720,"display_name":"mrader"},"score":0,"creation_date":1671469634,"post_id":74834189,"comment_id":132101045,"body_markdown":"I did some further evaluation: It seems that when you update style inside the styles tag of the SVG document (i.e. in the CSS part), the new style is not cascaded down to the SVG elements. So the short question is: How can I enforce that styles are re-applied to an already parsed SVG document.","body":"I did some further evaluation: It seems that when you update style inside the styles tag of the SVG document (i.e. in the CSS part), the new style is not cascaded down to the SVG elements. So the short question is: How can I enforce that styles are re-applied to an already parsed SVG document."}],"owner":{"account_id":27273777,"reputation":1,"user_id":20794720,"display_name":"mrader"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671281404,"creation_date":1671281404,"question_id":74834189,"body_markdown":"I have inherited code from a Batik application, which loads an SVG Document from file and puts it in a buffered image property in the class, which is then converted to a PNG by the client. Initially loading it works fine. Updating it does not work. The code below is for initial loading of the document, parsing it, and writing it into a buffered image.\r\n\r\n```\r\npublic void decode(BOrd ord, byte[] bytes, BTransform.Scale scale) {\r\n      try {\r\n         InputStream inputStream = new ByteArrayInputStream(bytes);\r\n         String uri = &quot;ord://&quot; + ord;\r\n         String parser = XMLResourceDescriptor.getXMLParserClassName();\r\n         SAXSVGDocumentFactory f = new SAXSVGDocumentFactory(parser);\r\n         svgDocument = (SVGOMDocument)f.createDocument(uri, inputStream);\r\n         originalStyles=null; //Set to null to force update\r\n         updateDocument(svgDocument, owner);\r\n         UserAgent userAgent = new UserAgentAdapter();\r\n         BridgeContext bridgeContext = AccessController.doPrivileged((PrivilegedAction&lt;BridgeContext&gt;)() -&gt; {\r\n            return new BridgeContext(userAgent, new DocumentLoader(userAgent)) {\r\n               public SVGAnimationEngine getAnimationEngine() {\r\n                  if (this.animationEngine == null) {\r\n                     this.animationEngine = new SVGAnimationEngine(this.document, this) {\r\n                        protected float tick(float time, boolean hyperlinking) {\r\n                           return BMtSvgDecoder.ENABLE_SVG_HYPERLINKING ? super.tick(time, hyperlinking) : super.tick(time, false);\r\n                        }\r\n                     };\r\n                     this.setAnimationLimitingMode();\r\n                  }\r\n\r\n                  return this.animationEngine;\r\n               }\r\n            };\r\n         });\r\n         //Dynamic state means that the rendering should update if the document has changed.\r\n         bridgeContext.setDynamicState(BridgeContext.DYNAMIC);\r\n         //Remember the bridge context.\r\n         this.bridgeContext=bridgeContext;\r\n         //GVT is the data structure used internally to render the document\r\n         GVTBuilder builder = new GVTBuilder();\r\n         GraphicsNode gvtRoot = builder.build(bridgeContext, svgDocument);\r\n         this.image = initImage(bridgeContext, scale);\r\n         if (scale != null) {\r\n            AffineTransform trans = new AffineTransform();\r\n            trans.scale(scale.getX(), scale.getY());\r\n            gvtRoot.setTransform(trans);\r\n         }\r\n         this.image = initImage(bridgeContext, scale);\r\n         renderImage(this.image, gvtRoot);//Creates the buffered image which is stored as field.\r\n         if (hasAnimationElement(svgDocument)) {\r\n            this.animator = new BMtSvgDecoder.SvgAnimator(svgDocument, bridgeContext, gvtRoot, scale);\r\n         } else {\r\n            this.animator = null;\r\n         }\r\n//         printXML(&quot;Initially loaded SVG&quot;, svgDocument);\r\n      } catch (Exception e) {\r\n         throw new BajaRuntimeException(e);\r\n      }\r\n   }\r\n```\r\n\r\nThe &quot;updateDocument(svgDocument, owner)&quot; method, does 2 things: \r\n\r\n- It retrieves the \\&lt;style\\&gt; tags from the SVG and updates their &quot;textContent&quot; to replace things like &quot;var(--custom-variable)&quot; by the real variable values\r\n\r\n- It updates some svg tags (e.g. text tag) providing updated texts.\r\n\r\nI have noted that the initial parsing of the SVG document is a bottleneck, so I tried to put an additional method in the class, which uses the already parsed document stored in the class (without reloading it) and just re-render the buffered image. **The issue is that while the updated svg-tags are rendered correctly, the updated styles (CSS) don&#39;t seem to be considered.** \r\n\r\nHere is the update method that takes the already parsed document, updates it, and rerenders it:\r\n\r\n```\r\n   public BImage rerenderDocument(BTransform.Scale scale) {\r\n      //Updates the document using the information of the binders in the  owner SVG Widget (BSvgPicture)\r\n      updateDocument(svgDocument, owner);\r\n//      printXML(&quot;UPDATED SVG&quot;, svgDocument);\r\n      GVTBuilder builder = new GVTBuilder();\r\n      GraphicsNode gvtRoot = builder.build(bridgeContext, svgDocument);\r\n      if (scale != null) {\r\n         AffineTransform trans = new AffineTransform();\r\n         trans.scale(scale.getX(), scale.getY());\r\n         gvtRoot.setTransform(trans);\r\n      }\r\n      this.image = initImage(bridgeContext, scale);\r\n      renderImage(this.image, gvtRoot);\r\n      return BImage.make(getRenderedImageBytes());\r\n   }\r\n```\r\n\r\nThe original SVG document is below: the custom properties are replaced by the &quot;updateDocument(svgDocument, owner). Note that the initial --color1 value is grey (#808080). The &quot;updateDocument&quot; method is supposed to update it to red (see document below). Dumping the updated document on the client shows that it is correct, its red, but the image still sometimes is grey...\r\n\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;\r\n&lt;!DOCTYPE \t\tsvg PUBLIC &quot;-//W3C//DTD SVG 1.1//EN&quot; &quot;http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd&quot;&gt;\r\n&lt;!-- Generiert durch Microsoft Visio, SVG Export svgSensor.svg Zeichenblatt-1 --&gt;\r\n&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; xmlns:xlink=&quot;http://www.w3.org/1999/xlink&quot; xmlns:ev=&quot;http://www.w3.org/2001/xml-events&quot; width=&quot;200px&quot; height=&quot;200px&quot; viewBox=&quot;0 0 200 200&quot; xml:space=&quot;preserve&quot; color-interpolation-filters=&quot;sRGB&quot; class=&quot;base&quot;&gt;\r\n\t&lt;style id=&quot;styles&quot;&gt;\r\n  :root{\r\n\t--angle1: 90deg;\r\n\t--origin-x1: 100px;\r\n\t--origin-y1: 100px;\r\n\t--translate-x1: 0px;\r\n\t--translate-y1: 0px;\r\n\t--angle2: 0deg;\r\n\t--origin-x2: 0px;\r\n\t--origin-y2: 0px;\r\n\t--translate-x2: 100px;\r\n\t--translate-y2: 140px;\r\n\t--color1: #808080;\r\n\t--color2: white;\r\n\t--color3: black;\r\n\t--color4: red;\r\n\t--colorSymbolText: black;\r\n\t--colorValueText: black;\r\n\t--colorStatusText: black;\r\n\t--stroke1-width: 3px;\t \r\n\t--font1-family: Calibri;\r\n\t--font1-size: 24px;\r\n\t--font1-style: normal;\r\n\t--font1-weight: normal;\r\n\t--font1-text-decoration: none;\r\n\t--font2-family: Calibri;\r\n\t--font2-size: 18px;\r\n\t--font2-style: normal;\r\n\t--font2-weight: normal;\r\n\t--font2-text-decoration: none;\r\n\t--font3-family: Segoe UI Symbol;\r\n\t--font3-size: 18px;\r\n\t--font3-style: normal;\r\n\t--font3-weight: normal;\r\n\t--font3-text-decoration: none;\r\n\t}\r\n    .format1 {\r\n\t    fill: var(--color1);\r\n\t\tstroke: var(--color3);\r\n\t\tstroke-width: var(--stroke1-width);\r\n\t}\r\n\t.symbolTextFormat{\r\n\t\ttext-anchor:middle;\r\n\t\tdominant-baseline: central;\r\n\t\tfont-family: var(--font1-family);\r\n\t\tfont-size: var(--font1-size);\r\n\t\tfont-style: var(--font1-style);\r\n        font-weight: var(--font1-weight);\t\r\n\t\ttext-decoration: var(--font1-text-decoration);\r\n\t\tfill: var(--colorSymbolText);\r\n\t}\r\n\t.valueTextFormat{\r\n\t\ttext-anchor:middle;\r\n\t\tdominant-baseline: central;\r\n\t\tfont-family: var(--font2-family);\r\n\t\tfont-size: var(--font2-size);\r\n\t\tfont-style: var(--font2-style);\r\n        font-weight: var(--font2-weight);\t\r\n\t\ttext-decoration: var(--font2-text-decoration);\r\n\t\tfill: var(--colorValueText);\r\n\t}\r\n\t.statusTextFormat{\r\n\t\tfont-family: var(--font3-family);\r\n\t\tfont-size: var(--font3-size);\r\n\t\tfont-style: var(--font3-style);\r\n        font-weight: var(--font3-weight);\t\r\n\t\ttext-decoration: var(--font3-text-decoration);\r\n\t\tfill: var(--colorStatusText);\r\n\t}\r\n\t.gradient1 {\r\n\t    fill: url(#radialGradient1);\r\n\t}\r\n\t.shapePositionTransform{\r\n\r\n\t\ttransform: translate(var(--translate-x1), var(--translate-y1));\t\r\n\t}\r\n\t.shapeOrientationTransform{\r\n\t\ttransform-origin: var(--origin-x1) var(--origin-y1);\r\n\t\ttransform: rotate(var(--angle1));\t\r\n\t}\r\n\t\t\r\n\t.valueTextTransform{\r\n\t\ttransform-origin: var(--origin-x2) var(--origin-y2);\r\n\t\ttransform: rotate(var(--angle2)) translate(var(--translate-x2), var(--translate-y2));\t\r\n\t}\r\n\t.gradient1-start {\r\n\t\tstop-color:var(--color2); \r\n\t\tstop-opacity: 1;\r\n\t}\r\n    .gradient1-mid {\r\n\t\tstop-color:var(--color2); \r\n\t\tstop-opacity: 1;\r\n\t}\r\n    .gradient1-stop {\r\n\t\tstop-color:var(--color1);  \r\n\t\tstop-opacity: 1;\r\n\t}\r\n  &lt;/style&gt;\r\n\t&lt;defs id=&quot;Patterns_And_Gradients&quot;&gt;\r\n\t\t&lt;radialGradient id=&quot;radialGradient1&quot; cx=&quot;0.5&quot; cy=&quot;0.5&quot; r=&quot;0.73&quot;&gt;\r\n\t\t\t&lt;stop class=&quot;gradient1-start&quot; offset=&quot;0%&quot;/&gt;\r\n\t\t\t&lt;stop class=&quot;gradient1-mid&quot; offset=&quot;10%&quot;/&gt;\r\n\t\t\t&lt;stop class=&quot;gradient1-stop&quot; offset=&quot;100%&quot;/&gt;\r\n\t\t&lt;/radialGradient&gt;\r\n\t&lt;/defs&gt;\r\n\t&lt;g id=&quot;widgetContainer&quot;&gt;\r\n\t\t&lt;g id=&quot;shape&quot; class=&quot;shapePositionTransform&quot;&gt;\r\n\t\t\t&lt;circle class=&quot;format1 gradient1&quot; cx=&quot;100&quot; cy=&quot;100&quot; r=&quot;20&quot;/&gt;\r\n\t\t\t&lt;text id=&quot;symbolText&quot; class=&quot;symbolTextFormat symbolTextXYAdjust&quot; x=&quot;100&quot; y=&quot;100&quot;&gt;T&lt;/text&gt;\r\n\t\t\t&lt;!-- for use in wb, apply the svg transform attribute, not the CSS style \r\n\t\t\t&lt;g class=&quot;rotatableContent1&quot; transform=&quot;rotate(45, 50, 50)&quot; &gt;\r\n\t\t\tthe parametes are angle, transform origin x, transform origin y.\r\n\t--&gt;\r\n\t\t&lt;g id=&quot;probe&quot;&gt;\r\n\t\t\t&lt;!--line id=&quot;directionLine&quot; class=&quot;directionLine&quot; x1=&quot;50&quot; y1=&quot;10&quot; x2=&quot;50&quot; y2=&quot;50&quot; transform=&quot;rotate(0, 50, 50)&quot; /--&gt;\r\n\t\t\t&lt;line id=&quot;probeLine&quot; class=&quot;format1 shapeOrientationTransform&quot; x1=&quot;100&quot; y1=&quot;80&quot; x2=&quot;100&quot; y2=&quot;60&quot;/&gt;\r\n\t\t&lt;/g&gt;\r\n\t&lt;/g&gt;\r\n\t&lt;g id=&quot;valueStatusTextGroup&quot;&gt;\r\n\t\t&lt;text id=&quot;valueText&quot; class=&quot;valueTextFormat valueTextTransform&quot; x=&quot;0&quot; y=&quot;0&quot;&gt;20 &#176;C\r\n\t\t&lt;tspan id=&quot;statusTextPrefix&quot;&gt;{&lt;/tspan&gt;\r\n\t\t&lt;tspan id=&quot;statusTextOverridden&quot; class=&quot;statusTextFormat statusTextXYAdjust&quot; dx=&quot;-5&quot;&gt;✋&lt;/tspan&gt;\r\n\t\t&lt;tspan id=&quot;statusTextAlarm&quot; class=&quot;statusTextFormat statusTextXYAdjust&quot; dx=&quot;-4&quot;&gt;⚠&lt;/tspan&gt;\r\n\t\t&lt;tspan id=&quot;statusTextSuffix&quot; class= &quot;statusTextXYAdjust&quot; dx=&quot;-2&quot;&gt;}&lt;/tspan&gt;&lt;/text&gt;\r\n\t&lt;/g&gt;\r\n&lt;/g&gt;\r\n&lt;/svg&gt;\r\n\r\n```\r\n\r\nHere is the resulting document after update:\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;&lt;!-- Generiert durch Microsoft Visio, SVG Export svgSensor.svg Zeichenblatt-1 --&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; xmlns:xlink=&quot;http://www.w3.org/1999/xlink&quot; xmlns:ev=&quot;http://www.w3.org/2001/xml-events&quot; contentScriptType=&quot;text/ecmascript&quot; zoomAndPan=&quot;magnify&quot; contentStyleType=&quot;text/css&quot; version=&quot;1.0&quot; width=&quot;200px&quot; xml:space=&quot;preserve&quot; preserveAspectRatio=&quot;xMidYMid meet&quot; viewBox=&quot;0 0 200 200&quot; height=&quot;200px&quot; class=&quot;base&quot; color-interpolation-filters=&quot;sRGB&quot;&gt;\r\n        &lt;style id=&quot;styles&quot; xml:space=&quot;preserve&quot;&gt;\r\n  :root{\r\n        --angle1: 90deg;\r\n        --origin-x1: 100px;\r\n        --origin-y1: 100px;\r\n        --translate-x1: 0px;\r\n        --translate-y1: 0px;\r\n        --angle2: 0deg;\r\n        --origin-x2: 0px;\r\n        --origin-y2: 0px;\r\n        --translate-x2: 100px;\r\n        --translate-y2: 140px;\r\n        --color1: #ff0000;\r\n        --color2: #ffffff;\r\n        --color3: #000000;\r\n        --color4: #0000ff;\r\n        --colorSymbolText: #000000;\r\n        --colorValueText: #000000;\r\n        --colorStatusText: #ff0000;\r\n        --stroke1-width: 3.0px;\r\n        --font1-family: Calibri;\r\n        --font1-size: 24.0;\r\n        --font1-style: normal;\r\n        --font1-weight: normal;\r\n        --font1-text-decoration: none;\r\n        --font2-family: Calibri;\r\n        --font2-size: 18.0;\r\n        --font2-style: normal;\r\n        --font2-weight: normal;\r\n        --font2-text-decoration: none;\r\n        --font3-family: Segoe UI Symbol;\r\n        --font3-size: 18.0;\r\n        --font3-style: normal;\r\n        --font3-weight: normal;\r\n        --font3-text-decoration: none;\r\n        }\r\n    .format1 {\r\n            fill: #ff0000;\r\n                stroke: #000000;\r\n                stroke-width: 3.0px;\r\n        }\r\n        .symbolTextFormat{\r\n                text-anchor:middle;\r\n                dominant-baseline: central;\r\n                font-family: Calibri;\r\n                font-size: 24.0;\r\n                font-style: normal;\r\n        font-weight: normal;\r\n                text-decoration: none;\r\n                fill: #000000;\r\n        }\r\n        .valueTextFormat{\r\n                text-anchor:middle;\r\n                dominant-baseline: central;\r\n                font-family: Calibri;\r\n                font-size: 18.0;\r\n                font-style: normal;\r\n        font-weight: normal;\r\n                text-decoration: none;\r\n                fill: #000000;\r\n        }\r\n        .statusTextFormat{\r\n                font-family: Segoe UI Symbol;\r\n                font-size: 18.0;\r\n                font-style: normal;\r\n        font-weight: normal;\r\n                text-decoration: none;\r\n                fill: #ff0000;\r\n        }\r\n        .gradient1 {\r\n            fill: url(#radialGradient1);\r\n        }\r\n\r\n\r\n\r\n\r\n        .gradient1-start {\r\n                stop-color:#ffffff;\r\n                stop-opacity: 1;\r\n        }\r\n    .gradient1-mid {\r\n                stop-color:#ffffff;\r\n                stop-opacity: 1;\r\n        }\r\n    .gradient1-stop {\r\n                stop-color:#ff0000;\r\n                stop-opacity: 1;\r\n        }\r\n  &lt;/style&gt;\r\n        &lt;defs id=&quot;Patterns_And_Gradients&quot;&gt;\r\n                &lt;radialGradient xlink:type=&quot;simple&quot; r=&quot;0.73&quot; xlink:actuate=&quot;onLoad&quot; cx=&quot;0.5&quot; cy=&quot;0.5&quot; id=&quot;radialGradient1&quot; xlink:show=&quot;other&quot;&gt;\r\n                        &lt;stop offset=&quot;0%&quot; class=&quot;gradient1-start&quot;/&gt;\r\n                        &lt;stop offset=&quot;10%&quot; class=&quot;gradient1-mid&quot;/&gt;\r\n                        &lt;stop offset=&quot;100%&quot; class=&quot;gradient1-stop&quot;/&gt;\r\n                &lt;/radialGradient&gt;\r\n        &lt;/defs&gt;\r\n        &lt;g id=&quot;widgetContainer&quot;&gt;\r\n                &lt;g class=&quot;shapePositionTransform&quot; id=&quot;shape&quot; transform=&quot;rotate(0.0, 0.0, 0.0) translate(0.0, 0.0)&quot;&gt;\r\n                        &lt;circle r=&quot;20&quot; class=&quot;format1 gradient1&quot; cx=&quot;100&quot; cy=&quot;100&quot;/&gt;\r\n                        &lt;text dy=&quot;8.5&quot; x=&quot;100&quot; y=&quot;100&quot; id=&quot;symbolText&quot; class=&quot;symbolTextFormat symbolTextXYAdjust&quot;&gt;T&lt;/text&gt;\r\n                        &lt;!-- for use in wb, apply the svg transform attribute, not the CSS style\r\n                        &lt;g class=&quot;rotatableContent1&quot; transform=&quot;rotate(45, 50, 50)&quot; &gt;\r\n                        the parametes are angle, transform origin x, transform origin y.\r\n        --&gt;\r\n                &lt;g id=&quot;probe&quot;&gt;\r\n                        &lt;!--line id=&quot;directionLine&quot; class=&quot;directionLine&quot; x1=&quot;50&quot; y1=&quot;10&quot; x2=&quot;50&quot; y2=&quot;50&quot; transform=&quot;rotate(0, 50, 50)&quot; /--&gt;\r\n                        &lt;line transform=&quot;rotate(90.0, 100.0, 100.0) translate(0.0, 0.0)&quot; x1=&quot;100&quot; x2=&quot;100&quot; y1=&quot;80&quot; y2=&quot;60&quot; class=&quot;format1 shapeOrientationTransform&quot; id=&quot;probeLine&quot;/&gt;\r\n                &lt;/g&gt;\r\n        &lt;/g&gt;\r\n        &lt;g id=&quot;valueStatusTextGroup&quot;&gt;\r\n                &lt;text x=&quot;0&quot; y=&quot;0&quot; id=&quot;valueText&quot; class=&quot;valueTextFormat valueTextTransform&quot; transform=&quot;rotate(0.0, 100.0, 100.0) translate(100.0, 140.0)&quot;&gt;-26.5 ┬░C&lt;tspan id=&quot;statusTextPrefix&quot;&gt;[&lt;/tspan&gt;\r\n                &lt;tspan class=&quot;statusTextFormat statusTextXYAdjust&quot; dx=&quot;-11.0&quot; id=&quot;statusTextOverridden&quot;/&gt;\r\n                &lt;tspan class=&quot;statusTextFormat statusTextXYAdjust&quot; dx=&quot;-11.0&quot; id=&quot;statusTextAlarm&quot;&gt;&#212;&#220;&#225;&lt;/tspan&gt;\r\n                &lt;tspan class=&quot;statusTextXYAdjust&quot; dx=&quot;-11.0&quot; id=&quot;statusTextSuffix&quot;&gt;]&lt;/tspan&gt;&lt;/text&gt;\r\n        &lt;/g&gt;\r\n&lt;/g&gt;\r\n&lt;/svg&gt;\r\n```\r\n\r\nWhat I noted is that somewhere in the process, the strange xlink... attributes have been introduced into the svg. \r\n\r\n**Anyone has an idea why the code above won&#39;t consider the changed style?**\r\n","title":"Updating SVG Document CSS styles not always reflected in resulting image","body":"<p>I have inherited code from a Batik application, which loads an SVG Document from file and puts it in a buffered image property in the class, which is then converted to a PNG by the client. Initially loading it works fine. Updating it does not work. The code below is for initial loading of the document, parsing it, and writing it into a buffered image.</p>\n<pre><code>public void decode(BOrd ord, byte[] bytes, BTransform.Scale scale) {\n      try {\n         InputStream inputStream = new ByteArrayInputStream(bytes);\n         String uri = &quot;ord://&quot; + ord;\n         String parser = XMLResourceDescriptor.getXMLParserClassName();\n         SAXSVGDocumentFactory f = new SAXSVGDocumentFactory(parser);\n         svgDocument = (SVGOMDocument)f.createDocument(uri, inputStream);\n         originalStyles=null; //Set to null to force update\n         updateDocument(svgDocument, owner);\n         UserAgent userAgent = new UserAgentAdapter();\n         BridgeContext bridgeContext = AccessController.doPrivileged((PrivilegedAction&lt;BridgeContext&gt;)() -&gt; {\n            return new BridgeContext(userAgent, new DocumentLoader(userAgent)) {\n               public SVGAnimationEngine getAnimationEngine() {\n                  if (this.animationEngine == null) {\n                     this.animationEngine = new SVGAnimationEngine(this.document, this) {\n                        protected float tick(float time, boolean hyperlinking) {\n                           return BMtSvgDecoder.ENABLE_SVG_HYPERLINKING ? super.tick(time, hyperlinking) : super.tick(time, false);\n                        }\n                     };\n                     this.setAnimationLimitingMode();\n                  }\n\n                  return this.animationEngine;\n               }\n            };\n         });\n         //Dynamic state means that the rendering should update if the document has changed.\n         bridgeContext.setDynamicState(BridgeContext.DYNAMIC);\n         //Remember the bridge context.\n         this.bridgeContext=bridgeContext;\n         //GVT is the data structure used internally to render the document\n         GVTBuilder builder = new GVTBuilder();\n         GraphicsNode gvtRoot = builder.build(bridgeContext, svgDocument);\n         this.image = initImage(bridgeContext, scale);\n         if (scale != null) {\n            AffineTransform trans = new AffineTransform();\n            trans.scale(scale.getX(), scale.getY());\n            gvtRoot.setTransform(trans);\n         }\n         this.image = initImage(bridgeContext, scale);\n         renderImage(this.image, gvtRoot);//Creates the buffered image which is stored as field.\n         if (hasAnimationElement(svgDocument)) {\n            this.animator = new BMtSvgDecoder.SvgAnimator(svgDocument, bridgeContext, gvtRoot, scale);\n         } else {\n            this.animator = null;\n         }\n//         printXML(&quot;Initially loaded SVG&quot;, svgDocument);\n      } catch (Exception e) {\n         throw new BajaRuntimeException(e);\n      }\n   }\n</code></pre>\n<p>The &quot;updateDocument(svgDocument, owner)&quot; method, does 2 things:</p>\n<ul>\n<li><p>It retrieves the &lt;style&gt; tags from the SVG and updates their &quot;textContent&quot; to replace things like &quot;var(--custom-variable)&quot; by the real variable values</p>\n</li>\n<li><p>It updates some svg tags (e.g. text tag) providing updated texts.</p>\n</li>\n</ul>\n<p>I have noted that the initial parsing of the SVG document is a bottleneck, so I tried to put an additional method in the class, which uses the already parsed document stored in the class (without reloading it) and just re-render the buffered image. <strong>The issue is that while the updated svg-tags are rendered correctly, the updated styles (CSS) don't seem to be considered.</strong></p>\n<p>Here is the update method that takes the already parsed document, updates it, and rerenders it:</p>\n<pre><code>   public BImage rerenderDocument(BTransform.Scale scale) {\n      //Updates the document using the information of the binders in the  owner SVG Widget (BSvgPicture)\n      updateDocument(svgDocument, owner);\n//      printXML(&quot;UPDATED SVG&quot;, svgDocument);\n      GVTBuilder builder = new GVTBuilder();\n      GraphicsNode gvtRoot = builder.build(bridgeContext, svgDocument);\n      if (scale != null) {\n         AffineTransform trans = new AffineTransform();\n         trans.scale(scale.getX(), scale.getY());\n         gvtRoot.setTransform(trans);\n      }\n      this.image = initImage(bridgeContext, scale);\n      renderImage(this.image, gvtRoot);\n      return BImage.make(getRenderedImageBytes());\n   }\n</code></pre>\n<p>The original SVG document is below: the custom properties are replaced by the &quot;updateDocument(svgDocument, owner). Note that the initial --color1 value is grey (#808080). The &quot;updateDocument&quot; method is supposed to update it to red (see document below). Dumping the updated document on the client shows that it is correct, its red, but the image still sometimes is grey...</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;\n&lt;!DOCTYPE       svg PUBLIC &quot;-//W3C//DTD SVG 1.1//EN&quot; &quot;http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd&quot;&gt;\n&lt;!-- Generiert durch Microsoft Visio, SVG Export svgSensor.svg Zeichenblatt-1 --&gt;\n&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; xmlns:xlink=&quot;http://www.w3.org/1999/xlink&quot; xmlns:ev=&quot;http://www.w3.org/2001/xml-events&quot; width=&quot;200px&quot; height=&quot;200px&quot; viewBox=&quot;0 0 200 200&quot; xml:space=&quot;preserve&quot; color-interpolation-filters=&quot;sRGB&quot; class=&quot;base&quot;&gt;\n    &lt;style id=&quot;styles&quot;&gt;\n  :root{\n    --angle1: 90deg;\n    --origin-x1: 100px;\n    --origin-y1: 100px;\n    --translate-x1: 0px;\n    --translate-y1: 0px;\n    --angle2: 0deg;\n    --origin-x2: 0px;\n    --origin-y2: 0px;\n    --translate-x2: 100px;\n    --translate-y2: 140px;\n    --color1: #808080;\n    --color2: white;\n    --color3: black;\n    --color4: red;\n    --colorSymbolText: black;\n    --colorValueText: black;\n    --colorStatusText: black;\n    --stroke1-width: 3px;    \n    --font1-family: Calibri;\n    --font1-size: 24px;\n    --font1-style: normal;\n    --font1-weight: normal;\n    --font1-text-decoration: none;\n    --font2-family: Calibri;\n    --font2-size: 18px;\n    --font2-style: normal;\n    --font2-weight: normal;\n    --font2-text-decoration: none;\n    --font3-family: Segoe UI Symbol;\n    --font3-size: 18px;\n    --font3-style: normal;\n    --font3-weight: normal;\n    --font3-text-decoration: none;\n    }\n    .format1 {\n        fill: var(--color1);\n        stroke: var(--color3);\n        stroke-width: var(--stroke1-width);\n    }\n    .symbolTextFormat{\n        text-anchor:middle;\n        dominant-baseline: central;\n        font-family: var(--font1-family);\n        font-size: var(--font1-size);\n        font-style: var(--font1-style);\n        font-weight: var(--font1-weight);   \n        text-decoration: var(--font1-text-decoration);\n        fill: var(--colorSymbolText);\n    }\n    .valueTextFormat{\n        text-anchor:middle;\n        dominant-baseline: central;\n        font-family: var(--font2-family);\n        font-size: var(--font2-size);\n        font-style: var(--font2-style);\n        font-weight: var(--font2-weight);   \n        text-decoration: var(--font2-text-decoration);\n        fill: var(--colorValueText);\n    }\n    .statusTextFormat{\n        font-family: var(--font3-family);\n        font-size: var(--font3-size);\n        font-style: var(--font3-style);\n        font-weight: var(--font3-weight);   \n        text-decoration: var(--font3-text-decoration);\n        fill: var(--colorStatusText);\n    }\n    .gradient1 {\n        fill: url(#radialGradient1);\n    }\n    .shapePositionTransform{\n\n        transform: translate(var(--translate-x1), var(--translate-y1)); \n    }\n    .shapeOrientationTransform{\n        transform-origin: var(--origin-x1) var(--origin-y1);\n        transform: rotate(var(--angle1));   \n    }\n        \n    .valueTextTransform{\n        transform-origin: var(--origin-x2) var(--origin-y2);\n        transform: rotate(var(--angle2)) translate(var(--translate-x2), var(--translate-y2));   \n    }\n    .gradient1-start {\n        stop-color:var(--color2); \n        stop-opacity: 1;\n    }\n    .gradient1-mid {\n        stop-color:var(--color2); \n        stop-opacity: 1;\n    }\n    .gradient1-stop {\n        stop-color:var(--color1);  \n        stop-opacity: 1;\n    }\n  &lt;/style&gt;\n    &lt;defs id=&quot;Patterns_And_Gradients&quot;&gt;\n        &lt;radialGradient id=&quot;radialGradient1&quot; cx=&quot;0.5&quot; cy=&quot;0.5&quot; r=&quot;0.73&quot;&gt;\n            &lt;stop class=&quot;gradient1-start&quot; offset=&quot;0%&quot;/&gt;\n            &lt;stop class=&quot;gradient1-mid&quot; offset=&quot;10%&quot;/&gt;\n            &lt;stop class=&quot;gradient1-stop&quot; offset=&quot;100%&quot;/&gt;\n        &lt;/radialGradient&gt;\n    &lt;/defs&gt;\n    &lt;g id=&quot;widgetContainer&quot;&gt;\n        &lt;g id=&quot;shape&quot; class=&quot;shapePositionTransform&quot;&gt;\n            &lt;circle class=&quot;format1 gradient1&quot; cx=&quot;100&quot; cy=&quot;100&quot; r=&quot;20&quot;/&gt;\n            &lt;text id=&quot;symbolText&quot; class=&quot;symbolTextFormat symbolTextXYAdjust&quot; x=&quot;100&quot; y=&quot;100&quot;&gt;T&lt;/text&gt;\n            &lt;!-- for use in wb, apply the svg transform attribute, not the CSS style \n            &lt;g class=&quot;rotatableContent1&quot; transform=&quot;rotate(45, 50, 50)&quot; &gt;\n            the parametes are angle, transform origin x, transform origin y.\n    --&gt;\n        &lt;g id=&quot;probe&quot;&gt;\n            &lt;!--line id=&quot;directionLine&quot; class=&quot;directionLine&quot; x1=&quot;50&quot; y1=&quot;10&quot; x2=&quot;50&quot; y2=&quot;50&quot; transform=&quot;rotate(0, 50, 50)&quot; /--&gt;\n            &lt;line id=&quot;probeLine&quot; class=&quot;format1 shapeOrientationTransform&quot; x1=&quot;100&quot; y1=&quot;80&quot; x2=&quot;100&quot; y2=&quot;60&quot;/&gt;\n        &lt;/g&gt;\n    &lt;/g&gt;\n    &lt;g id=&quot;valueStatusTextGroup&quot;&gt;\n        &lt;text id=&quot;valueText&quot; class=&quot;valueTextFormat valueTextTransform&quot; x=&quot;0&quot; y=&quot;0&quot;&gt;20 °C\n        &lt;tspan id=&quot;statusTextPrefix&quot;&gt;{&lt;/tspan&gt;\n        &lt;tspan id=&quot;statusTextOverridden&quot; class=&quot;statusTextFormat statusTextXYAdjust&quot; dx=&quot;-5&quot;&gt;✋&lt;/tspan&gt;\n        &lt;tspan id=&quot;statusTextAlarm&quot; class=&quot;statusTextFormat statusTextXYAdjust&quot; dx=&quot;-4&quot;&gt;⚠&lt;/tspan&gt;\n        &lt;tspan id=&quot;statusTextSuffix&quot; class= &quot;statusTextXYAdjust&quot; dx=&quot;-2&quot;&gt;}&lt;/tspan&gt;&lt;/text&gt;\n    &lt;/g&gt;\n&lt;/g&gt;\n&lt;/svg&gt;\n\n</code></pre>\n<p>Here is the resulting document after update:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;&lt;!-- Generiert durch Microsoft Visio, SVG Export svgSensor.svg Zeichenblatt-1 --&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; xmlns:xlink=&quot;http://www.w3.org/1999/xlink&quot; xmlns:ev=&quot;http://www.w3.org/2001/xml-events&quot; contentScriptType=&quot;text/ecmascript&quot; zoomAndPan=&quot;magnify&quot; contentStyleType=&quot;text/css&quot; version=&quot;1.0&quot; width=&quot;200px&quot; xml:space=&quot;preserve&quot; preserveAspectRatio=&quot;xMidYMid meet&quot; viewBox=&quot;0 0 200 200&quot; height=&quot;200px&quot; class=&quot;base&quot; color-interpolation-filters=&quot;sRGB&quot;&gt;\n        &lt;style id=&quot;styles&quot; xml:space=&quot;preserve&quot;&gt;\n  :root{\n        --angle1: 90deg;\n        --origin-x1: 100px;\n        --origin-y1: 100px;\n        --translate-x1: 0px;\n        --translate-y1: 0px;\n        --angle2: 0deg;\n        --origin-x2: 0px;\n        --origin-y2: 0px;\n        --translate-x2: 100px;\n        --translate-y2: 140px;\n        --color1: #ff0000;\n        --color2: #ffffff;\n        --color3: #000000;\n        --color4: #0000ff;\n        --colorSymbolText: #000000;\n        --colorValueText: #000000;\n        --colorStatusText: #ff0000;\n        --stroke1-width: 3.0px;\n        --font1-family: Calibri;\n        --font1-size: 24.0;\n        --font1-style: normal;\n        --font1-weight: normal;\n        --font1-text-decoration: none;\n        --font2-family: Calibri;\n        --font2-size: 18.0;\n        --font2-style: normal;\n        --font2-weight: normal;\n        --font2-text-decoration: none;\n        --font3-family: Segoe UI Symbol;\n        --font3-size: 18.0;\n        --font3-style: normal;\n        --font3-weight: normal;\n        --font3-text-decoration: none;\n        }\n    .format1 {\n            fill: #ff0000;\n                stroke: #000000;\n                stroke-width: 3.0px;\n        }\n        .symbolTextFormat{\n                text-anchor:middle;\n                dominant-baseline: central;\n                font-family: Calibri;\n                font-size: 24.0;\n                font-style: normal;\n        font-weight: normal;\n                text-decoration: none;\n                fill: #000000;\n        }\n        .valueTextFormat{\n                text-anchor:middle;\n                dominant-baseline: central;\n                font-family: Calibri;\n                font-size: 18.0;\n                font-style: normal;\n        font-weight: normal;\n                text-decoration: none;\n                fill: #000000;\n        }\n        .statusTextFormat{\n                font-family: Segoe UI Symbol;\n                font-size: 18.0;\n                font-style: normal;\n        font-weight: normal;\n                text-decoration: none;\n                fill: #ff0000;\n        }\n        .gradient1 {\n            fill: url(#radialGradient1);\n        }\n\n\n\n\n        .gradient1-start {\n                stop-color:#ffffff;\n                stop-opacity: 1;\n        }\n    .gradient1-mid {\n                stop-color:#ffffff;\n                stop-opacity: 1;\n        }\n    .gradient1-stop {\n                stop-color:#ff0000;\n                stop-opacity: 1;\n        }\n  &lt;/style&gt;\n        &lt;defs id=&quot;Patterns_And_Gradients&quot;&gt;\n                &lt;radialGradient xlink:type=&quot;simple&quot; r=&quot;0.73&quot; xlink:actuate=&quot;onLoad&quot; cx=&quot;0.5&quot; cy=&quot;0.5&quot; id=&quot;radialGradient1&quot; xlink:show=&quot;other&quot;&gt;\n                        &lt;stop offset=&quot;0%&quot; class=&quot;gradient1-start&quot;/&gt;\n                        &lt;stop offset=&quot;10%&quot; class=&quot;gradient1-mid&quot;/&gt;\n                        &lt;stop offset=&quot;100%&quot; class=&quot;gradient1-stop&quot;/&gt;\n                &lt;/radialGradient&gt;\n        &lt;/defs&gt;\n        &lt;g id=&quot;widgetContainer&quot;&gt;\n                &lt;g class=&quot;shapePositionTransform&quot; id=&quot;shape&quot; transform=&quot;rotate(0.0, 0.0, 0.0) translate(0.0, 0.0)&quot;&gt;\n                        &lt;circle r=&quot;20&quot; class=&quot;format1 gradient1&quot; cx=&quot;100&quot; cy=&quot;100&quot;/&gt;\n                        &lt;text dy=&quot;8.5&quot; x=&quot;100&quot; y=&quot;100&quot; id=&quot;symbolText&quot; class=&quot;symbolTextFormat symbolTextXYAdjust&quot;&gt;T&lt;/text&gt;\n                        &lt;!-- for use in wb, apply the svg transform attribute, not the CSS style\n                        &lt;g class=&quot;rotatableContent1&quot; transform=&quot;rotate(45, 50, 50)&quot; &gt;\n                        the parametes are angle, transform origin x, transform origin y.\n        --&gt;\n                &lt;g id=&quot;probe&quot;&gt;\n                        &lt;!--line id=&quot;directionLine&quot; class=&quot;directionLine&quot; x1=&quot;50&quot; y1=&quot;10&quot; x2=&quot;50&quot; y2=&quot;50&quot; transform=&quot;rotate(0, 50, 50)&quot; /--&gt;\n                        &lt;line transform=&quot;rotate(90.0, 100.0, 100.0) translate(0.0, 0.0)&quot; x1=&quot;100&quot; x2=&quot;100&quot; y1=&quot;80&quot; y2=&quot;60&quot; class=&quot;format1 shapeOrientationTransform&quot; id=&quot;probeLine&quot;/&gt;\n                &lt;/g&gt;\n        &lt;/g&gt;\n        &lt;g id=&quot;valueStatusTextGroup&quot;&gt;\n                &lt;text x=&quot;0&quot; y=&quot;0&quot; id=&quot;valueText&quot; class=&quot;valueTextFormat valueTextTransform&quot; transform=&quot;rotate(0.0, 100.0, 100.0) translate(100.0, 140.0)&quot;&gt;-26.5 ┬░C&lt;tspan id=&quot;statusTextPrefix&quot;&gt;[&lt;/tspan&gt;\n                &lt;tspan class=&quot;statusTextFormat statusTextXYAdjust&quot; dx=&quot;-11.0&quot; id=&quot;statusTextOverridden&quot;/&gt;\n                &lt;tspan class=&quot;statusTextFormat statusTextXYAdjust&quot; dx=&quot;-11.0&quot; id=&quot;statusTextAlarm&quot;&gt;ÔÜá&lt;/tspan&gt;\n                &lt;tspan class=&quot;statusTextXYAdjust&quot; dx=&quot;-11.0&quot; id=&quot;statusTextSuffix&quot;&gt;]&lt;/tspan&gt;&lt;/text&gt;\n        &lt;/g&gt;\n&lt;/g&gt;\n&lt;/svg&gt;\n</code></pre>\n<p>What I noted is that somewhere in the process, the strange xlink... attributes have been introduced into the svg.</p>\n<p><strong>Anyone has an idea why the code above won't consider the changed style?</strong></p>\n"},{"tags":["java","spring","jpa","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":25822,"reputation":78747,"user_id":66686,"accept_rate":87,"display_name":"Jens Schauder"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1671280592,"creation_date":1671201535,"answer_id":74825924,"question_id":74825430,"body_markdown":"A persistence unit is basically a bunch of entity classes grouped together with common configuration for the database connection and behaviour of the JPA implementation.\r\n\r\nClassically, it was defined using a [`persistence.xml`][1]. In there you would give the persistence unit a name by an XML root tag like [`&lt;persistence-unit name=&quot;OrderManagement5&quot;&gt;`][2]. This is the name referenced by the `String` argument of `Persistence.createEntityManagerFactory(String persistenceUnitName)`.\r\n\r\nWith modern application frameworks and the default case of just one persistence unit in the application, all this gets configured automatically and the persistence unit name doesn&#39;t appear anywhere in your code anymore.\r\n\r\n  [1]: https://docs.oracle.com/cd/E16439_01/doc.1013/e13981/cfgdepds005.htm\r\n  [2]: https://docs.oracle.com/cd/E16439_01/doc.1013/e13981/cfgdepds005.htm#CIHGJEBF","title":"Persistence.createEntityManagerFactory(String persistenceUnitName) what does this argument refer to?","body":"<p>A persistence unit is basically a bunch of entity classes grouped together with common configuration for the database connection and behaviour of the JPA implementation.</p>\n<p>Classically, it was defined using a <a href=\"https://docs.oracle.com/cd/E16439_01/doc.1013/e13981/cfgdepds005.htm\" rel=\"nofollow noreferrer\"><code>persistence.xml</code></a>. In there you would give the persistence unit a name by an XML root tag like <a href=\"https://docs.oracle.com/cd/E16439_01/doc.1013/e13981/cfgdepds005.htm#CIHGJEBF\" rel=\"nofollow noreferrer\"><code>&lt;persistence-unit name=&quot;OrderManagement5&quot;&gt;</code></a>. This is the name referenced by the <code>String</code> argument of <code>Persistence.createEntityManagerFactory(String persistenceUnitName)</code>.</p>\n<p>With modern application frameworks and the default case of just one persistence unit in the application, all this gets configured automatically and the persistence unit name doesn't appear anywhere in your code anymore.</p>\n"}],"owner":{"account_id":26364842,"reputation":23,"user_id":20020483,"display_name":"Abd El Rahman Ashraf"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":112,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"closed_date":1671289262,"accepted_answer_id":74825924,"answer_count":1,"score":1,"last_activity_date":1671280914,"creation_date":1671198995,"question_id":74825430,"body_markdown":"In [`Persistence.createEntityManagerFactory(String persistenceUnitName)`][1] what does the argument refer to?\r\n\r\nJavaDoc just says\r\n\r\n&gt; persistenceUnitName - the name of the persistence unit\r\n\r\nWhich basically just repeats the argument name.\r\n\r\n  [1]: https://docs.oracle.com/javaee/7/api/index.html?javax/persistence/EntityManagerFactory.html","title":"Persistence.createEntityManagerFactory(String persistenceUnitName) what does this argument refer to?","body":"<p>In <a href=\"https://docs.oracle.com/javaee/7/api/index.html?javax/persistence/EntityManagerFactory.html\" rel=\"nofollow noreferrer\"><code>Persistence.createEntityManagerFactory(String persistenceUnitName)</code></a> what does the argument refer to?</p>\n<p>JavaDoc just says</p>\n<blockquote>\n<p>persistenceUnitName - the name of the persistence unit</p>\n</blockquote>\n<p>Which basically just repeats the argument name.</p>\n"},{"tags":["java","completable-future"],"comments":[{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1671445193,"post_id":74821353,"comment_id":132093204,"body_markdown":"How do you know, how many task you have? Or will you invoke `doTask` up to `Integer.MAX_VALUE`?","body":"How do you know, how many task you have? Or will you invoke <code>doTask</code> up to <code>Integer.MAX_VALUE</code>?"}],"answers":[{"tags":[],"owner":{"account_id":13794509,"reputation":138,"user_id":9956025,"display_name":"Hrithik Manchanda"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671178562,"creation_date":1671178562,"answer_id":74821776,"question_id":74821353,"body_markdown":"Refer to this answer on this thread [Click here][1]. Seems a duplicate of this question.\r\n\r\n**thenRun** method is used to run the task after the previous future is completed successfully. This method will be skipped in case of any failures in previous stages. \r\n\r\n**whenComplete** method is used as the final stage of execution chain. Here you will receive the composed result of all the other functions in the supply chain and you can choose to fail your future or handle exceptions accordingly inside this.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/69857335","title":"How to Construct an asynchronously executed task chain based on Java CompletableFuture","body":"<p>Refer to this answer on this thread <a href=\"https://stackoverflow.com/a/69857335\">Click here</a>. Seems a duplicate of this question.</p>\n<p><strong>thenRun</strong> method is used to run the task after the previous future is completed successfully. This method will be skipped in case of any failures in previous stages.</p>\n<p><strong>whenComplete</strong> method is used as the final stage of execution chain. Here you will receive the composed result of all the other functions in the supply chain and you can choose to fail your future or handle exceptions accordingly inside this.</p>\n"},{"tags":[],"owner":{"account_id":173621,"reputation":10596,"user_id":402428,"display_name":"michid"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671280536,"creation_date":1671280536,"answer_id":74834113,"question_id":74821353,"body_markdown":"You can compose the futures for the individual tasks via [`CompletableFuture#thenCompose`][1] in a loop: \r\n\r\n    CompletableFuture&lt;?&gt; future = createFirstTask();\r\n    while (hasMoreTasks()) {\r\n        future = future.thenCompose(this::createNextTask);\r\n    }\r\n\r\nHere every next tasks depends on the result of the previous one until no more task is left. \r\n\r\nConceptionally this is a fold operation, which unfortunately is not part of the API of `CompletableFuture`. But if you don&#39;t mind using my [better future library][2] (which is just a thin wrapper around `CompleteableFuture`), I just recently added support for [folding streams of futures][3] there. \r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html#thenCompose-java.util.function.Function-\r\n  [2]: https://github.com/mduerig/better-future\r\n  [3]: https://github.com/mduerig/better-future#combining-reducing-folding-and-collecting","title":"How to Construct an asynchronously executed task chain based on Java CompletableFuture","body":"<p>You can compose the futures for the individual tasks via <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html#thenCompose-java.util.function.Function-\" rel=\"nofollow noreferrer\"><code>CompletableFuture#thenCompose</code></a> in a loop:</p>\n<pre><code>CompletableFuture&lt;?&gt; future = createFirstTask();\nwhile (hasMoreTasks()) {\n    future = future.thenCompose(this::createNextTask);\n}\n</code></pre>\n<p>Here every next tasks depends on the result of the previous one until no more task is left.</p>\n<p>Conceptionally this is a fold operation, which unfortunately is not part of the API of <code>CompletableFuture</code>. But if you don't mind using my <a href=\"https://github.com/mduerig/better-future\" rel=\"nofollow noreferrer\">better future library</a> (which is just a thin wrapper around <code>CompleteableFuture</code>), I just recently added support for <a href=\"https://github.com/mduerig/better-future#combining-reducing-folding-and-collecting\" rel=\"nofollow noreferrer\">folding streams of futures</a> there.</p>\n"}],"owner":{"account_id":20570287,"reputation":21,"user_id":15098782,"display_name":"xiaopeng li"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":194,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1671280536,"creation_date":1671175625,"question_id":74821353,"body_markdown":"I have N tasks to execute, and the number of tasks is not fixed. The next task can only be executed after the previous task is completed. How can the entire task chain be executed asynchronously?\r\n\r\nIf the number of tasks is fixed, such as N=2, I can use the following code. How to do it if N is not fixed\r\n\r\n```\r\npublic void futureTest() throws InterruptedException {\r\n        CompletableFuture&lt;Integer&gt; finalFuture = new CompletableFuture&lt;&gt;();\r\n        \r\n        CompletableFuture&lt;Integer&gt; cf1 = doTask(1);\r\n        AtomicReference&lt;CompletableFuture&lt;Integer&gt;&gt; cf2 = new AtomicReference&lt;&gt;(new CompletableFuture&lt;&gt;());\r\n\r\n        cf1.whenComplete(((integer1, throwable1) -&gt; {\r\n            if (throwable1 != null) {\r\n                finalFuture.completeExceptionally(throwable1);\r\n                return;\r\n            }\r\n            \r\n            // when task1 complete then submit task2\r\n            cf2.set(doTask(2));\r\n            cf2.get().whenComplete(((integer2, throwable2) -&gt; {\r\n                if (throwable2 != null) {\r\n                    finalFuture.completeExceptionally(throwable2);\r\n                    return;\r\n                }\r\n                \r\n                finalFuture.complete(integer2);\r\n            }));\r\n        }));\r\n        \r\n        finalFuture.whenComplete(((integer, throwable) -&gt; {\r\n            System.out.println(&quot;all task is done&quot;);\r\n        }));\r\n        \r\n        Thread.sleep(1000000);\r\n    }\r\n\r\nprivate CompletableFuture&lt;Integer&gt; doTask(int index) {\r\n        CompletableFuture&lt;Integer&gt; cf = new CompletableFuture&lt;&gt;();\r\n\r\n        // Simulate task execution\r\n        THREAD_POOL.execute(() -&gt; {\r\n            Thread.sleep(3_000);\r\n            cf.complete(index);\r\n        });\r\n        \r\n        return cf;\r\n    }\r\n```\r\n\r\n\r\n\r\nI looked at Compeltable&#39;s API docs and none of them seem to solve my problem. I tried to use a loop to control the task submission, but all failed, unable to submit the next task after the previous task is completed","title":"How to Construct an asynchronously executed task chain based on Java CompletableFuture","body":"<p>I have N tasks to execute, and the number of tasks is not fixed. The next task can only be executed after the previous task is completed. How can the entire task chain be executed asynchronously?</p>\n<p>If the number of tasks is fixed, such as N=2, I can use the following code. How to do it if N is not fixed</p>\n<pre><code>public void futureTest() throws InterruptedException {\n        CompletableFuture&lt;Integer&gt; finalFuture = new CompletableFuture&lt;&gt;();\n        \n        CompletableFuture&lt;Integer&gt; cf1 = doTask(1);\n        AtomicReference&lt;CompletableFuture&lt;Integer&gt;&gt; cf2 = new AtomicReference&lt;&gt;(new CompletableFuture&lt;&gt;());\n\n        cf1.whenComplete(((integer1, throwable1) -&gt; {\n            if (throwable1 != null) {\n                finalFuture.completeExceptionally(throwable1);\n                return;\n            }\n            \n            // when task1 complete then submit task2\n            cf2.set(doTask(2));\n            cf2.get().whenComplete(((integer2, throwable2) -&gt; {\n                if (throwable2 != null) {\n                    finalFuture.completeExceptionally(throwable2);\n                    return;\n                }\n                \n                finalFuture.complete(integer2);\n            }));\n        }));\n        \n        finalFuture.whenComplete(((integer, throwable) -&gt; {\n            System.out.println(&quot;all task is done&quot;);\n        }));\n        \n        Thread.sleep(1000000);\n    }\n\nprivate CompletableFuture&lt;Integer&gt; doTask(int index) {\n        CompletableFuture&lt;Integer&gt; cf = new CompletableFuture&lt;&gt;();\n\n        // Simulate task execution\n        THREAD_POOL.execute(() -&gt; {\n            Thread.sleep(3_000);\n            cf.complete(index);\n        });\n        \n        return cf;\n    }\n</code></pre>\n<p>I looked at Compeltable's API docs and none of them seem to solve my problem. I tried to use a loop to control the task submission, but all failed, unable to submit the next task after the previous task is completed</p>\n"},{"tags":["javascript","java","alm","polarion"],"answers":[{"tags":[],"owner":{"account_id":11941,"reputation":29273,"user_id":23264,"accept_rate":100,"display_name":"Peter Parker"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1594016093,"creation_date":1594016093,"answer_id":62750239,"question_id":58340858,"body_markdown":"The XMLHttpRequest-object is not part of the Javascript Context of the JavaSavehook. So you cannot use it.\r\n\r\nThe Javascript Interpreter&quot;Rhino&quot; does not have an XMLHttpRequest object because it is just wrapping the Java Network classes.\r\n\r\nhttps://stackoverflow.com/questions/13985560/xmlhttprequest-in-rhino (but I doubt the solution helps you..)","title":"How to create a XMLHttpRequest POST within a Polarion Work Item post-save script","body":"<p>The XMLHttpRequest-object is not part of the Javascript Context of the JavaSavehook. So you cannot use it.</p>\n<p>The Javascript Interpreter&quot;Rhino&quot; does not have an XMLHttpRequest object because it is just wrapping the Java Network classes.</p>\n<p><a href=\"https://stackoverflow.com/questions/13985560/xmlhttprequest-in-rhino\">XMLHttpRequest in Rhino?</a> (but I doubt the solution helps you..)</p>\n"}],"owner":{"account_id":16872636,"reputation":11,"user_id":12200824,"display_name":"OliverSM"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":477,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1671280087,"creation_date":1570795274,"question_id":58340858,"body_markdown":"I&#39;m currently trying to send data from a Polarion work item to a Java servlet. I have a post-save trigger which upon saving my work activates my javascript.\r\nThis script is supposed to check the work item fields for data, validate it and transmit it to my servlet via a POST request.\r\n\r\nTo enable this post save trigger in Polarion I&#39;m using the following plugin.\r\nhttps://extensions.polarion.com/extensions/134-fmc-work-item-save\r\nI can already get the data from all the work item fields. The only thing I am unable to do is create a XMLHttpRequest.\r\n\r\n    var xhr =  new XMLHttpRequest();\r\n\r\n    xhr.open(&quot;POST&quot;, &quot;/postservlet&quot;, true);\r\n\r\n    xhr.setRequestHeader(&quot;Content-Type&quot;, &quot;application/json&quot;);\r\n\r\n    xhr.setRequestHeader(&quot;Accept&quot;, &quot;application/json&quot;);\t\r\n\r\n    xhr.send(JSON.stringify({value: &quot;test&quot;}));\r\n\r\nreturns:\r\n\r\n&gt; TypeError: this.XMLHttpRequest is not a function\r\n\r\nI am by no means an experienced web developer but this means the javascript can&#39;t access the browser window global methods since I am using a plugin to load the javascript and it&#39;s not being added to the HTML page directly.\r\n\r\nIncluding something like jquery from a CDN is also currently not possible.\r\n\r\nI am looking for a way to allow this script to use the XMLHttpRequest or for some other way to enable post requests in Polarion. Either via a different plugin or by editing the source code (if that&#39;s even possible).","title":"How to create a XMLHttpRequest POST within a Polarion Work Item post-save script","body":"<p>I'm currently trying to send data from a Polarion work item to a Java servlet. I have a post-save trigger which upon saving my work activates my javascript.\nThis script is supposed to check the work item fields for data, validate it and transmit it to my servlet via a POST request.</p>\n\n<p>To enable this post save trigger in Polarion I'm using the following plugin.\n<a href=\"https://extensions.polarion.com/extensions/134-fmc-work-item-save\" rel=\"nofollow noreferrer\">https://extensions.polarion.com/extensions/134-fmc-work-item-save</a>\nI can already get the data from all the work item fields. The only thing I am unable to do is create a XMLHttpRequest.</p>\n\n<pre><code>var xhr =  new XMLHttpRequest();\n\nxhr.open(\"POST\", \"/postservlet\", true);\n\nxhr.setRequestHeader(\"Content-Type\", \"application/json\");\n\nxhr.setRequestHeader(\"Accept\", \"application/json\"); \n\nxhr.send(JSON.stringify({value: \"test\"}));\n</code></pre>\n\n<p>returns:</p>\n\n<blockquote>\n  <p>TypeError: this.XMLHttpRequest is not a function</p>\n</blockquote>\n\n<p>I am by no means an experienced web developer but this means the javascript can't access the browser window global methods since I am using a plugin to load the javascript and it's not being added to the HTML page directly.</p>\n\n<p>Including something like jquery from a CDN is also currently not possible.</p>\n\n<p>I am looking for a way to allow this script to use the XMLHttpRequest or for some other way to enable post requests in Polarion. Either via a different plugin or by editing the source code (if that's even possible).</p>\n"},{"tags":["java","java-11"],"comments":[{"owner":{"account_id":26317294,"reputation":210,"user_id":19979867,"display_name":"Leonardo Emmanuel de Azevedo"},"score":0,"creation_date":1671221944,"post_id":74829265,"comment_id":132060645,"body_markdown":"Please, be more specific. What does your application does? have you found any memory leak? We can&#39;t do nothing with this kind of information","body":"Please, be more specific. What does your application does? have you found any memory leak? We can&#39;t do nothing with this kind of information"},{"owner":{"account_id":20099597,"reputation":446,"user_id":14738350,"display_name":"devblack.exe"},"score":0,"creation_date":1671222417,"post_id":74829265,"comment_id":132060770,"body_markdown":"As @LeonardoEmmanueldeAzevedo already mentioned, we need more information to help you. It could be anything, memory leak, dependable resources, etc. Try enabling [Garbage Collection](https://baeldung.com/java-verbose-gc) logs to identify the issue.","body":"As @LeonardoEmmanueldeAzevedo already mentioned, we need more information to help you. It could be anything, memory leak, dependable resources, etc. Try enabling <a href=\"https://baeldung.com/java-verbose-gc\" rel=\"nofollow noreferrer\">Garbage Collection</a> logs to identify the issue."},{"owner":{"account_id":213468,"reputation":103485,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1671279923,"post_id":74829265,"comment_id":132068024,"body_markdown":"Depending on the garbage collector used, memory is not returned to the OS until application exit, so it remains in use. For example, ShenandoahGC will release memory back if it hasn&#39;t been used for - by default - 5 minutes. AFAIK, the default collectors in Java 11 (and Java 8 for that matter) which are used when no collector has been explicitly configured, do not release memory back to the OS. However, defaults have changed compared to Java 8, so possibly the results in higher CPU and memory requirements. You may want to look at tuning and configuring the garbage collector.","body":"Depending on the garbage collector used, memory is not returned to the OS until application exit, so it remains in use. For example, ShenandoahGC will release memory back if it hasn&#39;t been used for - by default - 5 minutes. AFAIK, the default collectors in Java 11 (and Java 8 for that matter) which are used when no collector has been explicitly configured, do not release memory back to the OS. However, defaults have changed compared to Java 8, so possibly the results in higher CPU and memory requirements. You may want to look at tuning and configuring the garbage collector."}],"owner":{"account_id":9615182,"reputation":235,"user_id":7138221,"display_name":"VKR"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671279996,"creation_date":1671220981,"question_id":74829265,"body_markdown":"Recently we upgraded the java version from 8 to 11. Whenever the application processing a high load of data, CPU and memory reach maximum &gt;90%. Still, after the load got reduced, the CPU/Memory is not getting down until we restart the application.\r\n\r\nI have these parameters\r\n\r\n    APP_JVM_XMS=256M\r\n    APP_JVM_XMX=4096M\r\n\r\n","title":"Java 11 Linux VM cpu memory not coming down until we restart application","body":"<p>Recently we upgraded the java version from 8 to 11. Whenever the application processing a high load of data, CPU and memory reach maximum &gt;90%. Still, after the load got reduced, the CPU/Memory is not getting down until we restart the application.</p>\n<p>I have these parameters</p>\n<pre><code>APP_JVM_XMS=256M\nAPP_JVM_XMX=4096M\n</code></pre>\n"},{"tags":["java","unit-testing","mockito","junit5"],"comments":[{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1671188093,"post_id":74823419,"comment_id":132050003,"body_markdown":"no screenshots of plain text please","body":"no screenshots of plain text please"},{"owner":{"account_id":25463394,"reputation":41,"user_id":19262819,"display_name":"AceKokuren"},"score":0,"creation_date":1671188211,"post_id":74823419,"comment_id":132050044,"body_markdown":"@kleopatra I thought it would be easier to read?","body":"@kleopatra I thought it would be easier to read?"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1671189597,"post_id":74823419,"comment_id":132050467,"body_markdown":"Please read [ask].","body":"Please read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1671189791,"post_id":74823419,"comment_id":132050513,"body_markdown":"You have a mock `XWPFDocument` in your test, but that has nothing to do with the instance you create in `populateDoc`. You need to refactor your code to inject a factory which produces `XWPFDocument` instances, then inject a mock factory which returns your mock `XWPFDocument`.","body":"You have a mock <code>XWPFDocument</code> in your test, but that has nothing to do with the instance you create in <code>populateDoc</code>. You need to refactor your code to inject a factory which produces <code>XWPFDocument</code> instances, then inject a mock factory which returns your mock <code>XWPFDocument</code>."},{"owner":{"account_id":25463394,"reputation":41,"user_id":19262819,"display_name":"AceKokuren"},"score":0,"creation_date":1671191272,"post_id":74823419,"comment_id":132051018,"body_markdown":"@tgdavies I thought Factory methods were used when I have subclasses of a class. Here I am not subclassing, I just need to utilise XWPFDocument. Or am I misunderstanding their use case?","body":"@tgdavies I thought Factory methods were used when I have subclasses of a class. Here I am not subclassing, I just need to utilise XWPFDocument. Or am I misunderstanding their use case?"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1671231404,"post_id":74823419,"comment_id":132062618,"body_markdown":"See the linked duplicate.","body":"See the linked duplicate."}],"owner":{"account_id":25463394,"reputation":41,"user_id":19262819,"display_name":"AceKokuren"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1671279503,"answer_count":0,"score":0,"last_activity_date":1671279497,"creation_date":1671187948,"question_id":74823419,"body_markdown":"I have a method that writes out to a word doc using Apache POI API. The issue I am having is, I want to test the method without creating an external document. The method that creates the document is the `.write(OutputStream)`. \r\n\r\nI need to find a way to get that method to `doNothing()` but when I have tried to mock the XWPFDocument, I get errors that there were 0 invocations on the mock. \r\n\r\nHere is the method I am trying to test:\r\n\r\n```lang-java\r\npublic String populateDoc(String text) {\r\n    try (XWPFDocument doc = new XWPFDocument();\r\n         OutputStream out = Files.newOutputStream(OUT)) {\r\n        StringBuilder sb = new StringBuilder();\r\n        LOGGER.info(&quot;Document Created.&quot;);\r\n        String[] lines = text.split(&quot;\\n&quot;);\r\n        for (String line : lines) {\r\n            XWPFParagraph para = doc.createParagraph();\r\n            XWPFRun run = para.createRun();\r\n            run.setText(line);\r\n            sb.append(line);\r\n            sb.append(&quot;\\n&quot;);\r\n        }\r\n        LOGGER.info(&quot;Document saved.&quot;);\r\n        doc.write(out);\r\n        return sb.toString();\r\n    } catch (IOException ioe) {\r\n        LOGGER.error(ioe);\r\n    }\r\n    return null;\r\n}\r\n```\r\n\r\nThe test I have right now that creates an external document which I don&#39;t want:\r\n\r\n```lang-java\r\n@ExtendWith(MockitoExtension.class)\r\npublic class FileWriterTest {\r\n    @Test\r\n    void testFileContainsAParagraph() {\r\n        FileWriter fileWriter = new FileWriter(&quot;src/test/resources/outputTest.docx&quot;);\r\n        String text = &quot;Hello World.\\n&quot;;\r\n\r\n        Assertions.assertEquals(text, fileWriter.populateDoc(text));\r\n    }\r\n}\r\n```\r\n\r\nWhat I have tried:\r\n\r\n```lang-java\r\n@Test\r\nvoid testTextReturnsHello() throws IOException {\r\n    XWPFDocument doc = mock (XWPFDocument.class);\r\n    FileWriter fileWriter = new FileWriter();\r\n    OutputStream out = Files.newOutputStream(Paths.get(&quot;src/test/resources/outputTest.docx&quot;));\r\n    String text = &quot;Hello&quot;;\r\n    Mockito.doNothing().when(doc).write(out);\r\n    \r\n    Assertions.assertEquals(text, fileWriter.populateDoc(text));\r\n    \r\n    Mockito.verify(doc).write(out);\r\n}\r\n```\r\nError I get:\r\n\r\n```none\r\norg.mockito.exceptions.base.MockitoException: \r\nOnly void methods can doNothing()!\r\nExample of correct use of doNothing():\r\n    doNothing().\r\n    doThrow(new RuntimeException())\r\n    .when(mock).someVoidMethod();\r\nAbove means:\r\nsomeVoidMethod() does nothing the 1st time but throws an exception the 2nd time is called\r\n```","title":"Stub out a method call inside a method for testing","body":"<p>I have a method that writes out to a word doc using Apache POI API. The issue I am having is, I want to test the method without creating an external document. The method that creates the document is the <code>.write(OutputStream)</code>.</p>\n<p>I need to find a way to get that method to <code>doNothing()</code> but when I have tried to mock the XWPFDocument, I get errors that there were 0 invocations on the mock.</p>\n<p>Here is the method I am trying to test:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public String populateDoc(String text) {\n    try (XWPFDocument doc = new XWPFDocument();\n         OutputStream out = Files.newOutputStream(OUT)) {\n        StringBuilder sb = new StringBuilder();\n        LOGGER.info(&quot;Document Created.&quot;);\n        String[] lines = text.split(&quot;\\n&quot;);\n        for (String line : lines) {\n            XWPFParagraph para = doc.createParagraph();\n            XWPFRun run = para.createRun();\n            run.setText(line);\n            sb.append(line);\n            sb.append(&quot;\\n&quot;);\n        }\n        LOGGER.info(&quot;Document saved.&quot;);\n        doc.write(out);\n        return sb.toString();\n    } catch (IOException ioe) {\n        LOGGER.error(ioe);\n    }\n    return null;\n}\n</code></pre>\n<p>The test I have right now that creates an external document which I don't want:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ExtendWith(MockitoExtension.class)\npublic class FileWriterTest {\n    @Test\n    void testFileContainsAParagraph() {\n        FileWriter fileWriter = new FileWriter(&quot;src/test/resources/outputTest.docx&quot;);\n        String text = &quot;Hello World.\\n&quot;;\n\n        Assertions.assertEquals(text, fileWriter.populateDoc(text));\n    }\n}\n</code></pre>\n<p>What I have tried:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Test\nvoid testTextReturnsHello() throws IOException {\n    XWPFDocument doc = mock (XWPFDocument.class);\n    FileWriter fileWriter = new FileWriter();\n    OutputStream out = Files.newOutputStream(Paths.get(&quot;src/test/resources/outputTest.docx&quot;));\n    String text = &quot;Hello&quot;;\n    Mockito.doNothing().when(doc).write(out);\n    \n    Assertions.assertEquals(text, fileWriter.populateDoc(text));\n    \n    Mockito.verify(doc).write(out);\n}\n</code></pre>\n<p>Error I get:</p>\n<pre class=\"lang-none prettyprint-override\"><code>org.mockito.exceptions.base.MockitoException: \nOnly void methods can doNothing()!\nExample of correct use of doNothing():\n    doNothing().\n    doThrow(new RuntimeException())\n    .when(mock).someVoidMethod();\nAbove means:\nsomeVoidMethod() does nothing the 1st time but throws an exception the 2nd time is called\n</code></pre>\n"},{"tags":["java","time-complexity","owl","ontology"],"comments":[{"owner":{"account_id":529247,"reputation":10544,"user_id":1197045,"display_name":"Ignazio"},"score":0,"creation_date":1671026599,"post_id":74791190,"comment_id":132008281,"body_markdown":"The semantic differences between one modeling strategy and the other are too deep for the question to make sense. Regardless of which version takes more computing power, they&#39;re entirely different ontologies and cannot be used to get the same inferences; they don&#39;t carry the same information.","body":"The semantic differences between one modeling strategy and the other are too deep for the question to make sense. Regardless of which version takes more computing power, they&#39;re entirely different ontologies and cannot be used to get the same inferences; they don&#39;t carry the same information."},{"owner":{"account_id":12880652,"reputation":59,"user_id":10264746,"display_name":"user10264746"},"score":0,"creation_date":1671064767,"post_id":74791190,"comment_id":132019807,"body_markdown":"@ Ignazio Can you elaborate? It&#39;s doesn&#39;t seem to me that there is a deep, substantial difference between, for example, modeling a Cajun pizza as a class which is a subclass of SpicyPizza vs an individual which with the type SpicyPizza.\n\nYes, the model-theoretic semantics are different in these two cases, but the two ontologies function the same in practice, yes? You would just query them in a slightly different manner. Eg. in the first case you might run a query to return all subclasses of SpicyPizza, and in the second case you might run a query to return all individuals of type SpicyPizza.","body":"@ Ignazio Can you elaborate? It&#39;s doesn&#39;t seem to me that there is a deep, substantial difference between, for example, modeling a Cajun pizza as a class which is a subclass of SpicyPizza vs an individual which with the type SpicyPizza.  Yes, the model-theoretic semantics are different in these two cases, but the two ontologies function the same in practice, yes? You would just query them in a slightly different manner. Eg. in the first case you might run a query to return all subclasses of SpicyPizza, and in the second case you might run a query to return all individuals of type SpicyPizza."},{"owner":{"account_id":12880652,"reputation":59,"user_id":10264746,"display_name":"user10264746"},"score":0,"creation_date":1671064820,"post_id":74791190,"comment_id":132019815,"body_markdown":"@ Ignazio The question I&#39;m most concerned with (out of all of the ones I listed in the original post) is: which of the two searches described in the previous comment would be faster to execute?","body":"@ Ignazio The question I&#39;m most concerned with (out of all of the ones I listed in the original post) is: which of the two searches described in the previous comment would be faster to execute?"},{"owner":{"account_id":529247,"reputation":10544,"user_id":1197045,"display_name":"Ignazio"},"score":0,"creation_date":1671211517,"post_id":74791190,"comment_id":132057808,"body_markdown":"I disagree that two ontologies with a different model semantics function the same in practice. They would satisfy *some* use cases but not all. E.g., how do you model two Cajun pizza to be delivered at my apartment, if Cajun pizza is an individual?","body":"I disagree that two ontologies with a different model semantics function the same in practice. They would satisfy <i>some</i> use cases but not all. E.g., how do you model two Cajun pizza to be delivered at my apartment, if Cajun pizza is an individual?"},{"owner":{"account_id":529247,"reputation":10544,"user_id":1197045,"display_name":"Ignazio"},"score":0,"creation_date":1671211581,"post_id":74791190,"comment_id":132057834,"body_markdown":"To reiterate, you can&#39;t compare the speed of a paper airplane and of a turtle, even if both have Boeing written on the side.","body":"To reiterate, you can&#39;t compare the speed of a paper airplane and of a turtle, even if both have Boeing written on the side."},{"owner":{"account_id":12880652,"reputation":59,"user_id":10264746,"display_name":"user10264746"},"score":0,"creation_date":1671227442,"post_id":74791190,"comment_id":132061896,"body_markdown":"You&#39;re right - the pizza ontology was a bad example for me to use because there are some potential use cases in which you&#39;d want to have multiple instances of a named pizza. So suppose either that we weren&#39;t designing this ontology for those use cases, or that we simply change the example to one where we have classes each of which you&#39;d never want to instantiate twice. For example, you could model files in a particular folder on a hard drive as classes, or you could model them as individuals. Is that an acceptable example? If so, what efficiency concerns would come into play?","body":"You&#39;re right - the pizza ontology was a bad example for me to use because there are some potential use cases in which you&#39;d want to have multiple instances of a named pizza. So suppose either that we weren&#39;t designing this ontology for those use cases, or that we simply change the example to one where we have classes each of which you&#39;d never want to instantiate twice. For example, you could model files in a particular folder on a hard drive as classes, or you could model them as individuals. Is that an acceptable example? If so, what efficiency concerns would come into play?"}],"answers":[{"tags":[],"owner":{"account_id":2550620,"reputation":4287,"user_id":2214440,"display_name":"Henriette Harmse"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1671279153,"creation_date":1671279153,"answer_id":74833969,"question_id":74791190,"body_markdown":"**TLDR**\r\n\r\nIn this case, whether you are using individuals or classes will have little to no effect on the computational complexity of reasoning tasks. In general, the expressiveness of the Description Logic (DL) used is by far the biggest predictor of the resulting computational complexity. Thus, for conjunctive queries, use OWL2 QL, for classification use OWL2 EL.   \r\n\r\nAs for the choice between using individuals and classes, I tend to prefer classes mainly because of the expressiveness they allow. See my [SO answer][1] in this regard.\r\n\r\n\r\n**The longer answer**\r\n\r\nHere I try to in some large brush-strokes give an idea of some of the considerations wrt complexity results. However, this is just tip of the iceberg and to serve as possible starting point for further investigation.\r\n\r\nThe main factors contributing to computational complexity is the reasoning task used and the DL used.\r\n\r\n*Reasoning tasks*\r\n\r\nReasoning tasks are tasks like consistency checking, classification and query answering. Consistency checking and classification often is seen as &quot;standard reasoning tasks&quot; meaning that when DLs are designed, these are the reasoning tasks for which designers aim to achieve decidablity. Query answering however is undecidable for many DLs. For DLs with negation, consistency checking can be reduced to classification. Many DLs that are derivatives of EL do not have negation and thus do not have consistency checking as reasoning task. For those DLs that have consistency checking, consistency checking and classification have the same computational complexity. Query answering is a different reasoning task which can have different computational complexity.\r\n\r\n*DLs*\r\n\r\nThe semantics of OWL2 is given by the Description Logic SROIQ (see [OWL 2 Direct Semantics][2]). This is a highly expressive DL of which the computational complexity for classification is N2ExpTime-complete (see [RIQ and SROIQ are Harder than SHOIQ][3] paper). For the Description Logic EL++, which is the underlying DL used for OWL2 EL, classification has polynomial time complexity (see [Pushing the EL envelope][4] paper). \r\n\r\nThe DL underlying OWL2 QL is DL-Lite&lt;sub&gt;R&lt;/sub&gt; for which computational complexity is given by the following figure \r\n\r\n[![Complexity of basic DL-Lite logics][5]][5] taken from the [The DL-Lite Family and Relations][6] paper. \r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/74574370/ontologies-only-built-with-classes-and-not-class-instances/74575916#74575916\r\n  [2]: https://www.w3.org/TR/owl2-direct-semantics/\r\n  [3]: https://www.google.com/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=&amp;cad=rja&amp;uact=8&amp;ved=2ahUKEwiI5vOowoD8AhWFilwKHRoBAcoQFnoECAUQAQ&amp;url=https%3A%2F%2Fwww.aaai.org%2FPapers%2FKR%2F2008%2FKR08-027.pdf&amp;usg=AOvVaw3mE8osFduK17zpA46-xrUf\r\n  [4]: https://www.google.com/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=&amp;cad=rja&amp;uact=8&amp;ved=2ahUKEwim6eqJxID8AhXEglwKHZifDMAQFnoECAgQAQ&amp;url=https%3A%2F%2Fwww.ijcai.org%2FProceedings%2F05%2FPapers%2F0372.pdf&amp;usg=AOvVaw1-fOLFQA6GqnLovnktBmK2\r\n  [5]: https://i.stack.imgur.com/1TWLy.png\r\n  [6]: https://www.jair.org/index.php/jair/article/view/10623","title":"In an OWL ontology where entities can be modeled either as classes or individuals, is it more computationally efficient to model them as individuals?","body":"<p><strong>TLDR</strong></p>\n<p>In this case, whether you are using individuals or classes will have little to no effect on the computational complexity of reasoning tasks. In general, the expressiveness of the Description Logic (DL) used is by far the biggest predictor of the resulting computational complexity. Thus, for conjunctive queries, use OWL2 QL, for classification use OWL2 EL.</p>\n<p>As for the choice between using individuals and classes, I tend to prefer classes mainly because of the expressiveness they allow. See my <a href=\"https://stackoverflow.com/questions/74574370/ontologies-only-built-with-classes-and-not-class-instances/74575916#74575916\">SO answer</a> in this regard.</p>\n<p><strong>The longer answer</strong></p>\n<p>Here I try to in some large brush-strokes give an idea of some of the considerations wrt complexity results. However, this is just tip of the iceberg and to serve as possible starting point for further investigation.</p>\n<p>The main factors contributing to computational complexity is the reasoning task used and the DL used.</p>\n<p><em>Reasoning tasks</em></p>\n<p>Reasoning tasks are tasks like consistency checking, classification and query answering. Consistency checking and classification often is seen as &quot;standard reasoning tasks&quot; meaning that when DLs are designed, these are the reasoning tasks for which designers aim to achieve decidablity. Query answering however is undecidable for many DLs. For DLs with negation, consistency checking can be reduced to classification. Many DLs that are derivatives of EL do not have negation and thus do not have consistency checking as reasoning task. For those DLs that have consistency checking, consistency checking and classification have the same computational complexity. Query answering is a different reasoning task which can have different computational complexity.</p>\n<p><em>DLs</em></p>\n<p>The semantics of OWL2 is given by the Description Logic SROIQ (see <a href=\"https://www.w3.org/TR/owl2-direct-semantics/\" rel=\"nofollow noreferrer\">OWL 2 Direct Semantics</a>). This is a highly expressive DL of which the computational complexity for classification is N2ExpTime-complete (see <a href=\"https://www.google.com/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=&amp;cad=rja&amp;uact=8&amp;ved=2ahUKEwiI5vOowoD8AhWFilwKHRoBAcoQFnoECAUQAQ&amp;url=https%3A%2F%2Fwww.aaai.org%2FPapers%2FKR%2F2008%2FKR08-027.pdf&amp;usg=AOvVaw3mE8osFduK17zpA46-xrUf\" rel=\"nofollow noreferrer\">RIQ and SROIQ are Harder than SHOIQ</a> paper). For the Description Logic EL++, which is the underlying DL used for OWL2 EL, classification has polynomial time complexity (see <a href=\"https://www.google.com/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=&amp;cad=rja&amp;uact=8&amp;ved=2ahUKEwim6eqJxID8AhXEglwKHZifDMAQFnoECAgQAQ&amp;url=https%3A%2F%2Fwww.ijcai.org%2FProceedings%2F05%2FPapers%2F0372.pdf&amp;usg=AOvVaw1-fOLFQA6GqnLovnktBmK2\" rel=\"nofollow noreferrer\">Pushing the EL envelope</a> paper).</p>\n<p>The DL underlying OWL2 QL is DL-Lite<sub>R</sub> for which computational complexity is given by the following figure</p>\n<p><a href=\"https://i.stack.imgur.com/1TWLy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1TWLy.png\" alt=\"Complexity of basic DL-Lite logics\" /></a> taken from the <a href=\"https://www.jair.org/index.php/jair/article/view/10623\" rel=\"nofollow noreferrer\">The DL-Lite Family and Relations</a> paper.</p>\n"}],"owner":{"account_id":12880652,"reputation":59,"user_id":10264746,"display_name":"user10264746"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":105,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1671279153,"creation_date":1670967768,"question_id":74791190,"body_markdown":"When using a reasoner on an OWL ontology in which certain entities could be modeled either as classes or individuals, is it overall more computationally efficient to model those entities as individuals instead of classes? Or are they equally efficient?\r\n\r\nSuppose you have an ontology (from https://protege.stanford.edu/ontologies/pizza/pizza.owl) with the following class hierarchy:\r\n```\r\nPizza\r\n\tCheesyPizza\r\n\tInterestingPizza\r\n\tMeatyPizza\r\n\tNamedPizza\r\n\t\tAmerican\r\n\t\tCajun\r\n\t\tCapricciosa\r\n\t\tCaprina\r\n\t\tFiorentina\r\n\t\tFourSeasons\r\n\t\tGiardiniera\r\n\t\tLaReine\r\n\t\tMargherita\r\n\t\tMushroom\r\n\t\tNapoletana\r\n\t\tParmense\r\n\t\tPolloAdAstra\r\n\t\tPrinceCarlo\r\n\t\tQuattroFormaggi\r\n\t\tSiciliana\r\n\t\tSloppyGiuseppe\r\n\t\tSoho\r\n\t\tVeneziana\r\n\tNonVegetarianPizza\r\n\tRealItalianPizza\r\n\tSpicyPizza\r\n\tSpicyPizzaEquivalent\r\n\tThinAndCrispyPizza\r\n\tUnclosedPizza\r\n\tVegetarianPizza\r\n\t… etc.\r\n```\r\nThe items in the “namedPizza” category (eg. American, Cajun, etc) can be modeled as classes, or they could plausibly be modeled as individuals instead.\r\n\r\nOverall, would modeling them as individuals make it more computationally efficient to use a reasoner?\r\n\r\nWhat effect would the choice to model them as individuals have on the efficiency of checking: Ontology Consistency, Class Expression Satisfiability, Class Expression Subsumption, and Conjunctive Query Answering?\r\n\r\nOverall, would the increased complexity of Instance Checking be offset by gains in efficiency in those other categories?\r\n\r\nIn particular, what overall effect would this have on Conjunctive Query Answering?\r\n\r\nDo the answers to any of the above questions vary depending the OWL profile of the ontology (eg. OWL-EL vs OWL-DL, etc)?","title":"In an OWL ontology where entities can be modeled either as classes or individuals, is it more computationally efficient to model them as individuals?","body":"<p>When using a reasoner on an OWL ontology in which certain entities could be modeled either as classes or individuals, is it overall more computationally efficient to model those entities as individuals instead of classes? Or are they equally efficient?</p>\n<p>Suppose you have an ontology (from <a href=\"https://protege.stanford.edu/ontologies/pizza/pizza.owl\" rel=\"nofollow noreferrer\">https://protege.stanford.edu/ontologies/pizza/pizza.owl</a>) with the following class hierarchy:</p>\n<pre><code>Pizza\n    CheesyPizza\n    InterestingPizza\n    MeatyPizza\n    NamedPizza\n        American\n        Cajun\n        Capricciosa\n        Caprina\n        Fiorentina\n        FourSeasons\n        Giardiniera\n        LaReine\n        Margherita\n        Mushroom\n        Napoletana\n        Parmense\n        PolloAdAstra\n        PrinceCarlo\n        QuattroFormaggi\n        Siciliana\n        SloppyGiuseppe\n        Soho\n        Veneziana\n    NonVegetarianPizza\n    RealItalianPizza\n    SpicyPizza\n    SpicyPizzaEquivalent\n    ThinAndCrispyPizza\n    UnclosedPizza\n    VegetarianPizza\n    … etc.\n</code></pre>\n<p>The items in the “namedPizza” category (eg. American, Cajun, etc) can be modeled as classes, or they could plausibly be modeled as individuals instead.</p>\n<p>Overall, would modeling them as individuals make it more computationally efficient to use a reasoner?</p>\n<p>What effect would the choice to model them as individuals have on the efficiency of checking: Ontology Consistency, Class Expression Satisfiability, Class Expression Subsumption, and Conjunctive Query Answering?</p>\n<p>Overall, would the increased complexity of Instance Checking be offset by gains in efficiency in those other categories?</p>\n<p>In particular, what overall effect would this have on Conjunctive Query Answering?</p>\n<p>Do the answers to any of the above questions vary depending the OWL profile of the ontology (eg. OWL-EL vs OWL-DL, etc)?</p>\n"},{"tags":["java","php","spring-boot","file"],"answers":[{"tags":[],"owner":{"account_id":873767,"reputation":973,"user_id":924036,"display_name":"Kaj Hejer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671273001,"creation_date":1671273001,"answer_id":74833368,"question_id":74833228,"body_markdown":"You can use `ResponseEntity&lt;StreamingResponseBody&gt;` for this.\r\n\r\nYou have choose which content-type you want to return. We ended up with `produces = MediaType.APPLICATION_NDJSON_VALUE`.\r\n\r\nWe had to modify the way we did rest request by changing from `RestClient to `WebClient`:\r\n\r\n```\r\nFlux&lt;DataBuffer&gt; dataStream = return webClient.method(method)\r\n                .uri(url)\r\n                .retrieve()\r\n                .bodyToFlux(DataBuffer.class);\r\n\r\nDataBufferUtils.write(dataStream, response.getOutputStream())\r\n                .map(DataBufferUtils::release)\r\n                .blockLast();\r\n```\r\n\r\nWhen we finally got this to work, it works really well :) \r\n\r\nYou can see some other examples on https://www.baeldung.com/spring-mvc-sse-streams.\r\n\r\n","title":"How does spring boot return byte stream in real time like PHP&#39;s readfile function?","body":"<p>You can use <code>ResponseEntity&lt;StreamingResponseBody&gt;</code> for this.</p>\n<p>You have choose which content-type you want to return. We ended up with <code>produces = MediaType.APPLICATION_NDJSON_VALUE</code>.</p>\n<p>We had to modify the way we did rest request by changing from <code>RestClient to </code>WebClient`:</p>\n<pre><code>Flux&lt;DataBuffer&gt; dataStream = return webClient.method(method)\n                .uri(url)\n                .retrieve()\n                .bodyToFlux(DataBuffer.class);\n\nDataBufferUtils.write(dataStream, response.getOutputStream())\n                .map(DataBufferUtils::release)\n                .blockLast();\n</code></pre>\n<p>When we finally got this to work, it works really well :)</p>\n<p>You can see some other examples on <a href=\"https://www.baeldung.com/spring-mvc-sse-streams\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-mvc-sse-streams</a>.</p>\n"},{"tags":[],"owner":{"account_id":18532347,"reputation":3,"user_id":19769337,"display_name":"许基目"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1671278023,"creation_date":1671278023,"answer_id":74833862,"question_id":74833228,"body_markdown":"\r\nI solved the problem by java&#39;s URL class\r\n```\r\npackage com.api.controller;\r\n\r\nimport cn.dev33.satoken.annotation.SaCheckLogin;\r\nimport cn.dev33.satoken.stp.StpUtil;\r\nimport com.api.common.result.PageReq;\r\nimport com.api.common.result.PageResult;\r\nimport com.api.common.result.Result;\r\nimport com.api.common.user.AddBalanceReq;\r\nimport com.api.constant.ResultCode;\r\nimport com.api.dao.ApiUserDao;\r\nimport com.api.dao.UserFlowDao;\r\nimport com.api.entity.ApiUserEntity;\r\nimport com.api.entity.UserFlowEntity;\r\nimport com.api.execption.ResRunException;\r\nimport com.api.service.ApiUserService;\r\nimport com.baomidou.mybatisplus.extension.plugins.pagination.Page;\r\nimport io.swagger.annotations.Api;\r\nimport io.swagger.annotations.ApiOperation;\r\n\r\nimport org.apache.commons.io.FileUtils;\r\nimport org.apache.commons.io.IOUtils;\r\nimport org.springframework.core.io.ByteArrayResource;\r\nimport org.springframework.core.io.FileSystemResource;\r\nimport org.springframework.core.io.InputStreamResource;\r\nimport org.springframework.core.io.Resource;\r\nimport org.springframework.data.redis.core.StringRedisTemplate;\r\nimport org.springframework.http.HttpHeaders;\r\n\r\nimport org.springframework.http.ResponseEntity;\r\nimport org.springframework.stereotype.Controller;\r\nimport org.springframework.transaction.annotation.Transactional;\r\nimport org.springframework.validation.annotation.Validated;\r\nimport org.springframework.web.bind.annotation.CrossOrigin;\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\nimport org.springframework.web.bind.annotation.RequestMethod;\r\nimport org.springframework.web.bind.annotation.RequestParam;\r\nimport org.springframework.web.client.RestTemplate;\r\nimport org.springframework.web.servlet.mvc.method.annotation.StreamingResponseBody;\r\nimport reactor.core.publisher.Flux;\r\n\r\nimport javax.servlet.ServletOutputStream;\r\nimport javax.servlet.http.HttpServletResponse;\r\nimport java.awt.image.DataBuffer;\r\nimport java.io.*;\r\nimport java.net.MalformedURLException;\r\nimport java.net.URL;\r\nimport java.net.URLEncoder;\r\nimport java.nio.charset.StandardCharsets;\r\nimport java.nio.file.Files;\r\nimport java.nio.file.Path;\r\nimport java.nio.file.Paths;\r\nimport java.util.Date;\r\n\r\n\r\n@Controller\r\n@Api(tags = &quot;test&quot;)\r\n@RequestMapping(&quot;/test&quot;)\r\n@CrossOrigin\r\npublic class TestController {\r\n \r\n    /**\r\n     * 添加用户月\r\n     *\r\n     * @param req\r\n     * @return\r\n     */\r\n    @RequestMapping(value = &quot;/get&quot;, method = RequestMethod.GET)\r\n    @ApiOperation(value = &quot;get&quot;)\r\n    public void test(String url, HttpServletResponse response) throws IOException {\r\n\r\n        URL url1 = new URL(url);\r\n\r\n        InputStream is = url1.openStream();\r\n\r\n        int ch;\r\n        while ((ch = is.read()) != -1) {\r\n            response.getWriter().write(ch);\r\n        }\r\n        \r\n    }\r\n\r\n\r\n}\r\n\r\n```","title":"How does spring boot return byte stream in real time like PHP&#39;s readfile function?","body":"<p>I solved the problem by java's URL class</p>\n<pre><code>package com.api.controller;\n\nimport cn.dev33.satoken.annotation.SaCheckLogin;\nimport cn.dev33.satoken.stp.StpUtil;\nimport com.api.common.result.PageReq;\nimport com.api.common.result.PageResult;\nimport com.api.common.result.Result;\nimport com.api.common.user.AddBalanceReq;\nimport com.api.constant.ResultCode;\nimport com.api.dao.ApiUserDao;\nimport com.api.dao.UserFlowDao;\nimport com.api.entity.ApiUserEntity;\nimport com.api.entity.UserFlowEntity;\nimport com.api.execption.ResRunException;\nimport com.api.service.ApiUserService;\nimport com.baomidou.mybatisplus.extension.plugins.pagination.Page;\nimport io.swagger.annotations.Api;\nimport io.swagger.annotations.ApiOperation;\n\nimport org.apache.commons.io.FileUtils;\nimport org.apache.commons.io.IOUtils;\nimport org.springframework.core.io.ByteArrayResource;\nimport org.springframework.core.io.FileSystemResource;\nimport org.springframework.core.io.InputStreamResource;\nimport org.springframework.core.io.Resource;\nimport org.springframework.data.redis.core.StringRedisTemplate;\nimport org.springframework.http.HttpHeaders;\n\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.transaction.annotation.Transactional;\nimport org.springframework.validation.annotation.Validated;\nimport org.springframework.web.bind.annotation.CrossOrigin;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RequestMethod;\nimport org.springframework.web.bind.annotation.RequestParam;\nimport org.springframework.web.client.RestTemplate;\nimport org.springframework.web.servlet.mvc.method.annotation.StreamingResponseBody;\nimport reactor.core.publisher.Flux;\n\nimport javax.servlet.ServletOutputStream;\nimport javax.servlet.http.HttpServletResponse;\nimport java.awt.image.DataBuffer;\nimport java.io.*;\nimport java.net.MalformedURLException;\nimport java.net.URL;\nimport java.net.URLEncoder;\nimport java.nio.charset.StandardCharsets;\nimport java.nio.file.Files;\nimport java.nio.file.Path;\nimport java.nio.file.Paths;\nimport java.util.Date;\n\n\n@Controller\n@Api(tags = &quot;test&quot;)\n@RequestMapping(&quot;/test&quot;)\n@CrossOrigin\npublic class TestController {\n \n    /**\n     * 添加用户月\n     *\n     * @param req\n     * @return\n     */\n    @RequestMapping(value = &quot;/get&quot;, method = RequestMethod.GET)\n    @ApiOperation(value = &quot;get&quot;)\n    public void test(String url, HttpServletResponse response) throws IOException {\n\n        URL url1 = new URL(url);\n\n        InputStream is = url1.openStream();\n\n        int ch;\n        while ((ch = is.read()) != -1) {\n            response.getWriter().write(ch);\n        }\n        \n    }\n\n\n}\n\n</code></pre>\n"}],"owner":{"account_id":18532347,"reputation":3,"user_id":19769337,"display_name":"许基目"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":407,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74833862,"answer_count":2,"score":0,"last_activity_date":1671278023,"creation_date":1671271390,"question_id":74833228,"body_markdown":"I am solving a requirement. I am using the springboot framework. Now there is an interface that passes in the parameter url. This url is a network file address. After receiving the request, the interface uses its own network to request the network file and returns it to the client in real time. , php&#39;s readfile function can solve the problem, but is there such a solution in the java language? What I need is to return to the client in real time, instead of reading all and returning to the client\r\n\r\n```\r\n@Controller\r\n@Api(tags = &quot;test&quot;)\r\n@RequestMapping(&quot;/test&quot;)\r\n@CrossOrigin\r\npublic class TestController {\r\n\r\n    @RequestMapping(value = &quot;/get&quot;, method = RequestMethod.POST)\r\n    @ApiOperation(value = &quot;get&quot;)\r\n    public ResponseEntity&lt;FileSystemResource&gt; test() throws IOException {\r\n      \r\n        OkHttpClient client = new OkHttpClient().newBuilder()\r\n                .build();\r\n        MediaType mediaType = MediaType.parse(&quot;application/json&quot;);\r\n        RequestBody body = RequestBody.create(mediaType, &quot;{\\&quot;123\\&quot;: 1}&quot;);\r\n        Request request = new Request.Builder()\r\n                .url(&quot;https://github.com/xujimu/ios_super_sign/archive/refs/heads/master.zip&quot;)\r\n                .method(&quot;GET&quot;, body)\r\n                .addHeader(&quot;Content-Type&quot;, &quot;application/json&quot;)\r\n                .build();\r\n        Response response = client.newCall(request).execute();\r\n        \r\n    }\r\n\r\n\r\n}\r\n```","title":"How does spring boot return byte stream in real time like PHP&#39;s readfile function?","body":"<p>I am solving a requirement. I am using the springboot framework. Now there is an interface that passes in the parameter url. This url is a network file address. After receiving the request, the interface uses its own network to request the network file and returns it to the client in real time. , php's readfile function can solve the problem, but is there such a solution in the java language? What I need is to return to the client in real time, instead of reading all and returning to the client</p>\n<pre><code>@Controller\n@Api(tags = &quot;test&quot;)\n@RequestMapping(&quot;/test&quot;)\n@CrossOrigin\npublic class TestController {\n\n    @RequestMapping(value = &quot;/get&quot;, method = RequestMethod.POST)\n    @ApiOperation(value = &quot;get&quot;)\n    public ResponseEntity&lt;FileSystemResource&gt; test() throws IOException {\n      \n        OkHttpClient client = new OkHttpClient().newBuilder()\n                .build();\n        MediaType mediaType = MediaType.parse(&quot;application/json&quot;);\n        RequestBody body = RequestBody.create(mediaType, &quot;{\\&quot;123\\&quot;: 1}&quot;);\n        Request request = new Request.Builder()\n                .url(&quot;https://github.com/xujimu/ios_super_sign/archive/refs/heads/master.zip&quot;)\n                .method(&quot;GET&quot;, body)\n                .addHeader(&quot;Content-Type&quot;, &quot;application/json&quot;)\n                .build();\n        Response response = client.newCall(request).execute();\n        \n    }\n\n\n}\n</code></pre>\n"},{"tags":["java","android","flutter","dart","apk"],"comments":[{"owner":{"account_id":14268773,"reputation":16829,"user_id":10306997,"display_name":"eamirho3ein"},"score":0,"creation_date":1671279074,"post_id":74833790,"comment_id":132067904,"body_markdown":"run `flutter clean` then build your app","body":"run <code>flutter clean</code> then build your app"},{"owner":{"account_id":25560631,"reputation":1,"user_id":19343308,"display_name":"Hanan Saleem"},"score":0,"creation_date":1671285692,"post_id":74833790,"comment_id":132069046,"body_markdown":"@eamirho3ein Thanks But I already did that many time but it result same.","body":"@eamirho3ein Thanks But I already did that many time but it result same."}],"answers":[{"tags":[],"owner":{"account_id":20898609,"reputation":124,"user_id":15352195,"display_name":"Navid Hosseini"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671277941,"creation_date":1671277941,"answer_id":74833853,"question_id":74833790,"body_markdown":"if your plan is publish to google play you can export appbundle for android devices\r\n\r\n    flutter build appbundle","title":"How can we reduce the apk size in flutter","body":"<p>if your plan is publish to google play you can export appbundle for android devices</p>\n<pre><code>flutter build appbundle\n</code></pre>\n"}],"owner":{"account_id":25560631,"reputation":1,"user_id":19343308,"display_name":"Hanan Saleem"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1671277941,"creation_date":1671277392,"question_id":74833790,"body_markdown":"I&#39;m building my apk with flutter build apk --split-per-abi but it still generate 60mb apk. [1# Here is the result of size analyzer ](https://i.stack.imgur.com/HROgt.png)[2#](https://i.stack.imgur.com/8Keqd.png)[pubspec.yaml  all the packages that is used in this project](https://i.stack.imgur.com/bRmzk.png)\r\n\r\nI tried removing all the unused package but it didn&#39;t work after that I created new project same result .It should not be that large for ios it goes to 900+mbs","title":"How can we reduce the apk size in flutter","body":"<p>I'm building my apk with flutter build apk --split-per-abi but it still generate 60mb apk. <a href=\"https://i.stack.imgur.com/HROgt.png\" rel=\"nofollow noreferrer\">1# Here is the result of size analyzer </a><a href=\"https://i.stack.imgur.com/8Keqd.png\" rel=\"nofollow noreferrer\">2#</a><a href=\"https://i.stack.imgur.com/bRmzk.png\" rel=\"nofollow noreferrer\">pubspec.yaml  all the packages that is used in this project</a></p>\n<p>I tried removing all the unused package but it didn't work after that I created new project same result .It should not be that large for ios it goes to 900+mbs</p>\n"},{"tags":["java","jmeter","classpath"],"comments":[{"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"score":1,"creation_date":1671225767,"post_id":74829826,"comment_id":132061518,"body_markdown":"Hi LMR and welcome. Do please try and add all the tags that are relevant. Also include the full command and a description of the context. If applicable, runtime environment (which Java &amp; JMeter version) also can help. You can add stuff to the question by hitting [edit].","body":"Hi LMR and welcome. Do please try and add all the tags that are relevant. Also include the full command and a description of the context. If applicable, runtime environment (which Java &amp; JMeter version) also can help. You can add stuff to the question by hitting <a href=\"https://stackoverflow.com/posts/74829826/edit\">edit</a>."}],"answers":[{"tags":[],"owner":{"account_id":3460456,"reputation":162728,"user_id":2897748,"display_name":"Dmitri T"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671277477,"creation_date":1671277477,"answer_id":74833800,"question_id":74829826,"body_markdown":"I cannot reproduce your issue using the following dummy simple class:\r\n\r\n    package Cajeros;\r\n    \r\n    public class RecepcionParametrosCajeros {\r\n    \r\n        public RecepcionParametrosCajeros() {\r\n    \r\n        }\r\n    \r\n        public String foo() {\r\n            return &quot;foo&quot;;\r\n        }\r\n    }\r\n\r\nimporting the jar as:\r\n\r\n    jmeter -Juser.classpath=trama.jar\r\n\r\nand invoking it like:\r\n\r\n\timport Cajeros.RecepcionParametrosCajeros;\r\n\t\r\n\tString foo = new RecepcionParametrosCajeros().foo();\r\n\t\r\n\tlog.info(&quot;Got string &quot; + foo);\r\n\r\n\r\nSo double check that the file is present in JMeter&#39;s &quot;bin&quot; directory \r\n\r\nMore information:\r\n\r\n - [JMeter&#39;s Classpath][1]\r\n - [Overriding Properties Via The Command Line][2]\r\n\r\nAlso be aware of the following recommendations:\r\n\r\n 1. [Always use the latest version of JMeter][3], consider migrating to [JMeter 5.5][4]\r\n 2. [Since JMeter 3.1 it&#39;s recommended to use JSR223 Test Elements and Groovy language][5] for scripting. It might also resolve your problem as Beanshell is not 100% Java compatible and you may face problems with generics, inner classes, features introduced after Java 5 and so on.   \r\n\r\n\r\n  [1]: https://jmeter.apache.org/usermanual/get-started.html#classpath\r\n  [2]: https://jmeter.apache.org/usermanual/get-started.html#override\r\n  [3]: https://jmeter.apache.org/usermanual/best-practices.html#use_latest_version\r\n  [4]: https://www.blazemeter.com/blog/jmeter-5-5\r\n  [5]: https://jmeter.apache.org/usermanual/best-practices.html#bsh_scripting","title":"-Guser.classpath=arhivo.jar not load .jar","body":"<p>I cannot reproduce your issue using the following dummy simple class:</p>\n<pre><code>package Cajeros;\n\npublic class RecepcionParametrosCajeros {\n\n    public RecepcionParametrosCajeros() {\n\n    }\n\n    public String foo() {\n        return &quot;foo&quot;;\n    }\n}\n</code></pre>\n<p>importing the jar as:</p>\n<pre><code>jmeter -Juser.classpath=trama.jar\n</code></pre>\n<p>and invoking it like:</p>\n<pre><code>import Cajeros.RecepcionParametrosCajeros;\n\nString foo = new RecepcionParametrosCajeros().foo();\n\nlog.info(&quot;Got string &quot; + foo);\n</code></pre>\n<p>So double check that the file is present in JMeter's &quot;bin&quot; directory</p>\n<p>More information:</p>\n<ul>\n<li><a href=\"https://jmeter.apache.org/usermanual/get-started.html#classpath\" rel=\"nofollow noreferrer\">JMeter's Classpath</a></li>\n<li><a href=\"https://jmeter.apache.org/usermanual/get-started.html#override\" rel=\"nofollow noreferrer\">Overriding Properties Via The Command Line</a></li>\n</ul>\n<p>Also be aware of the following recommendations:</p>\n<ol>\n<li><a href=\"https://jmeter.apache.org/usermanual/best-practices.html#use_latest_version\" rel=\"nofollow noreferrer\">Always use the latest version of JMeter</a>, consider migrating to <a href=\"https://www.blazemeter.com/blog/jmeter-5-5\" rel=\"nofollow noreferrer\">JMeter 5.5</a></li>\n<li><a href=\"https://jmeter.apache.org/usermanual/best-practices.html#bsh_scripting\" rel=\"nofollow noreferrer\">Since JMeter 3.1 it's recommended to use JSR223 Test Elements and Groovy language</a> for scripting. It might also resolve your problem as Beanshell is not 100% Java compatible and you may face problems with generics, inner classes, features introduced after Java 5 and so on.</li>\n</ol>\n"}],"owner":{"account_id":8464677,"reputation":1,"user_id":6349158,"display_name":"Luis Miguel Ramirez Jaramillo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1671277477,"creation_date":1671225250,"question_id":74829826,"body_markdown":"\r\nI am using JMeter 5.0 mode no GUI and OpenJDK Runtime Environment Corretto-8.322.06.1 (build 1.8.0_322-b06) \r\n\r\n```\r\njmeter.bat -f -Ghilos=1 -Gsubida=1 -Gciclo=1 -GDatosCajero=DT_TramasATMPropios.csv -Guser.classpath=trama.jar -n -LERROR -t Cajeros_distribuidos.jmx -l result.csv -Djmeter.save.saveservice.output_format=csv -Ljmeter.engine=DEBUG\r\n```\r\n\r\n\r\nerror parameter\r\n```\r\n-Guser.classpath=file.jar \r\n```\r\ntake parameters globally in jmeter.log\r\n\r\n&gt; INFO o.a.j.JMeter: Setting Global property: user.classpath=trama.jar\r\n\r\n[Jmeter.log][1]\r\n\r\nerror \r\n\r\n&gt;  ERROR o.a.j.u.BeanShellInterpreter: Error invoking bsh method: eval\tSourced file: inline evaluation of: ``import Cajeros.RecepcionParametrosCajeros; import java.util.concurrent.ThreadLoc . . . &#39;&#39; : Typed variable declaration : Class: RecepcionParametrosCajeros not found in namespace\r\n\r\nproperty in the non-GUI JMeter command, but it does not take the .jar, when I use the property with \r\n\r\n```\r\n-Juser.classpath=file.jar\r\n```\r\n if it takes it, it also takes the rego global variables with -G\r\n\r\nwork globally with -G for distributed testing\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/9EDe2.png","title":"-Guser.classpath=arhivo.jar not load .jar","body":"<p>I am using JMeter 5.0 mode no GUI and OpenJDK Runtime Environment Corretto-8.322.06.1 (build 1.8.0_322-b06)</p>\n<pre><code>jmeter.bat -f -Ghilos=1 -Gsubida=1 -Gciclo=1 -GDatosCajero=DT_TramasATMPropios.csv -Guser.classpath=trama.jar -n -LERROR -t Cajeros_distribuidos.jmx -l result.csv -Djmeter.save.saveservice.output_format=csv -Ljmeter.engine=DEBUG\n</code></pre>\n<p>error parameter</p>\n<pre><code>-Guser.classpath=file.jar \n</code></pre>\n<p>take parameters globally in jmeter.log</p>\n<blockquote>\n<p>INFO o.a.j.JMeter: Setting Global property: user.classpath=trama.jar</p>\n</blockquote>\n<p><a href=\"https://i.stack.imgur.com/9EDe2.png\" rel=\"nofollow noreferrer\">Jmeter.log</a></p>\n<p>error</p>\n<blockquote>\n<p>ERROR o.a.j.u.BeanShellInterpreter: Error invoking bsh method: eval  Sourced file: inline evaluation of: ``import Cajeros.RecepcionParametrosCajeros; import java.util.concurrent.ThreadLoc . . . '' : Typed variable declaration : Class: RecepcionParametrosCajeros not found in namespace</p>\n</blockquote>\n<p>property in the non-GUI JMeter command, but it does not take the .jar, when I use the property with</p>\n<pre><code>-Juser.classpath=file.jar\n</code></pre>\n<p>if it takes it, it also takes the rego global variables with -G</p>\n<p>work globally with -G for distributed testing</p>\n"},{"tags":["java","memory-management","garbage-collection"],"comments":[{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":3,"creation_date":1671173686,"post_id":74820913,"comment_id":132046181,"body_markdown":"1) It really doesn&#39;t matter where they live. 2) At least *some* of the metadata lives in metaspace.  3)  It is not &quot;officially&quot; documented because it is an implementation detail (and it doesn&#39;t matter, and you don&#39;t *need* the documentation.).  4) If you really want to know, there is the source code ......","body":"1) It really doesn&#39;t matter where they live. 2) At least <i>some</i> of the metadata lives in metaspace.  3)  It is not &quot;officially&quot; documented because it is an implementation detail (and it doesn&#39;t matter, and you don&#39;t <i>need</i> the documentation.).  4) If you really want to know, there is the source code ......"},{"owner":{"account_id":26377,"reputation":352187,"user_id":68587,"accept_rate":95,"display_name":"John Kugelman"},"score":1,"creation_date":1671173962,"post_id":74820913,"comment_id":132046228,"body_markdown":"@StephenC Points 1 and 4 aren&#39;t helpful.","body":"@StephenC Points 1 and 4 aren&#39;t helpful."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":3,"creation_date":1671174516,"post_id":74820913,"comment_id":132046312,"body_markdown":"@JohnKugelman - I disagree.  It really doesn&#39;t matter where they live.  It changes not one iota from a practical programming perspective where the objects live ... or how little / much of the metadata is in the heap vs metaspace.  And it is helpful to help someone to realize this.","body":"@JohnKugelman - I disagree.  It really doesn&#39;t matter where they live.  It changes not one iota from a practical programming perspective where the objects live ... or how little / much of the metadata is in the heap vs metaspace.  And it is helpful to help someone to realize this."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1671438948,"post_id":74820913,"comment_id":132091404,"body_markdown":"@StephenC I agree with point 1 up to the point that I have to disagree with point 4. The [heap memory](https://docs.oracle.com/javase/specs/jvms/se17/html/jvms-2.html#jvms-2.5.3) is a formal term, so it’s irrelevant what the source code does. This is best illustrated by the fact that prior to JDK&#160;8, the HotSpot&#160;JVM reported the PermGen as “non heap” memory to monitoring tools, despite it contained objects and was garbage collected, so it had all properties of heap memory. This demonstrates that the implementation is not authoritative to answer this, but also that it really doesn’t matter.","body":"@StephenC I agree with point 1 up to the point that I have to disagree with point 4. The <a href=\"https://docs.oracle.com/javase/specs/jvms/se17/html/jvms-2.html#jvms-2.5.3\" rel=\"nofollow noreferrer\">heap memory</a> is a formal term, so it’s irrelevant what the source code does. This is best illustrated by the fact that prior to JDK 8, the HotSpot JVM reported the PermGen as “non heap” memory to monitoring tools, despite it contained objects and was garbage collected, so it had all properties of heap memory. This demonstrates that the implementation is not authoritative to answer this, but also that it really doesn’t matter."}],"answers":[{"tags":[],"owner":{"account_id":5968065,"reputation":14213,"user_id":4691279,"accept_rate":58,"display_name":"hagrawal7777"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671175135,"creation_date":1671175135,"answer_id":74821277,"question_id":74820913,"body_markdown":"IMHO, objects of `java.lang.Class` class can&#39;t be considered as class metadata. **Class metadata is nothing but JVM&#39;s internal representation of Java classes** - basically when JVM loads `.class` file then it doesn&#39;t store all the bytecode present in that `.class` file, but creates an internal data structure that holds everything which is needed from that `.class` file and that gets stored in Metaspace or PermGen.\r\n\r\nSo, based on my knowledge I would say objects of `java.lang.Class` class will reside on heap and class metadata of `java.lang.Class` class will reside on Metaspace or PermGen. However, I can&#39;t give any official doc about first part of my statement, and offical doc for second part can be read over [here][1].\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/11/gctuning/other-considerations.html#GUID-B29C9153-3530-4C15-9154-E74F44E3DAD9","title":"Where do objects of &quot;java.lang.Class&quot; class reside","body":"<p>IMHO, objects of <code>java.lang.Class</code> class can't be considered as class metadata. <strong>Class metadata is nothing but JVM's internal representation of Java classes</strong> - basically when JVM loads <code>.class</code> file then it doesn't store all the bytecode present in that <code>.class</code> file, but creates an internal data structure that holds everything which is needed from that <code>.class</code> file and that gets stored in Metaspace or PermGen.</p>\n<p>So, based on my knowledge I would say objects of <code>java.lang.Class</code> class will reside on heap and class metadata of <code>java.lang.Class</code> class will reside on Metaspace or PermGen. However, I can't give any official doc about first part of my statement, and offical doc for second part can be read over <a href=\"https://docs.oracle.com/en/java/javase/11/gctuning/other-considerations.html#GUID-B29C9153-3530-4C15-9154-E74F44E3DAD9\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}],"owner":{"account_id":6619055,"reputation":2065,"user_id":5111394,"accept_rate":53,"display_name":"pjj"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":88,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":1,"score":1,"last_activity_date":1671277339,"creation_date":1671172244,"question_id":74820913,"body_markdown":"I searched a lot but I couldn&#39;t find the answer for where do objects of `java.lang.Class` class reside - is it the Heap or Metaspace/PermGen. My own understanding is that objects of `java.lang.Class` represents the class metadata so they should reside on Metaspace (or PermGen for pre-Java8). \r\n\r\nCould someone please confirm, and I need some official documentation which clearly mentions the same.","title":"Where do objects of &quot;java.lang.Class&quot; class reside","body":"<p>I searched a lot but I couldn't find the answer for where do objects of <code>java.lang.Class</code> class reside - is it the Heap or Metaspace/PermGen. My own understanding is that objects of <code>java.lang.Class</code> represents the class metadata so they should reside on Metaspace (or PermGen for pre-Java8).</p>\n<p>Could someone please confirm, and I need some official documentation which clearly mentions the same.</p>\n"},{"tags":["java","optaplanner","timetable"],"answers":[{"tags":[],"owner":{"account_id":9133364,"reputation":4450,"user_id":6794063,"display_name":"Luk&#225;š Petrovick&#253;"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1671277114,"creation_date":1671277114,"answer_id":74833759,"question_id":74833213,"body_markdown":"You need to add a filter.\r\n\r\n    private Constraint studentConflict(ConstraintFactory constraintFactory){\r\n        // students can only sit one exam at the same time\r\n        // selects a lesson and pairs it with another one\r\n        return constraintFactory.forEach(Exam.class)\r\n                .join(Exam.class,\r\n                        Joiners.equal(Exam::getTimeslot))\r\n                .filter((exam1, exam2) -&gt; {\r\n                     // call any code that compares the two lists and returns true on overlap\r\n                })\r\n                .penalize(HardSoftScore.ONE_HARD)\r\n                .asConstraint(&quot;Student conflict&quot;);\r\n    }\r\n\r\nThis is the best you can do with the current model. However, it is probably not very efficient. Every time an `Exam` is evaluated, the filter is executed and the lists will be compared in their entirety.\r\n\r\nWe can do better. Assuming that a `Student` is a problem fact or a planning entity, you can do this, which will be much more incremental:\r\n\r\n    private Constraint studentConflict(ConstraintFactory constraintFactory){\r\n        // students can only sit one exam at the same time\r\n        // selects a lesson and pairs it with another one\r\n        return constraintFactory.forEachUniquePair(Exam.class,\r\n                Joiners.equal(Exam::getTimeslot))\r\n            .ifExists(Student.class,\r\n                Joiners.filtering((exam1, exam2, student) -&gt; \r\n                    exam1.getStudents().contains(student) &amp;&amp;\r\n                    exam2.getStudents().contains(student))\r\n            .penalize(HardSoftScore.ONE_HARD)\r\n            .asConstraint(&quot;Student conflict&quot;);\r\n    }\r\n\r\nNeedless to say, for this to be as efficient as possible, `getStudents()` should return a `Set`, not a `List`. (Or the lists should be very small.)","title":"Optaplanner - see if the same item appears in two lists","body":"<p>You need to add a filter.</p>\n<pre><code>private Constraint studentConflict(ConstraintFactory constraintFactory){\n    // students can only sit one exam at the same time\n    // selects a lesson and pairs it with another one\n    return constraintFactory.forEach(Exam.class)\n            .join(Exam.class,\n                    Joiners.equal(Exam::getTimeslot))\n            .filter((exam1, exam2) -&gt; {\n                 // call any code that compares the two lists and returns true on overlap\n            })\n            .penalize(HardSoftScore.ONE_HARD)\n            .asConstraint(&quot;Student conflict&quot;);\n}\n</code></pre>\n<p>This is the best you can do with the current model. However, it is probably not very efficient. Every time an <code>Exam</code> is evaluated, the filter is executed and the lists will be compared in their entirety.</p>\n<p>We can do better. Assuming that a <code>Student</code> is a problem fact or a planning entity, you can do this, which will be much more incremental:</p>\n<pre><code>private Constraint studentConflict(ConstraintFactory constraintFactory){\n    // students can only sit one exam at the same time\n    // selects a lesson and pairs it with another one\n    return constraintFactory.forEachUniquePair(Exam.class,\n            Joiners.equal(Exam::getTimeslot))\n        .ifExists(Student.class,\n            Joiners.filtering((exam1, exam2, student) -&gt; \n                exam1.getStudents().contains(student) &amp;&amp;\n                exam2.getStudents().contains(student))\n        .penalize(HardSoftScore.ONE_HARD)\n        .asConstraint(&quot;Student conflict&quot;);\n}\n</code></pre>\n<p>Needless to say, for this to be as efficient as possible, <code>getStudents()</code> should return a <code>Set</code>, not a <code>List</code>. (Or the lists should be very small.)</p>\n"}],"owner":{"account_id":27280526,"reputation":3,"user_id":20800491,"display_name":"Kate"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":103,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74833759,"answer_count":1,"score":0,"last_activity_date":1671277114,"creation_date":1671271263,"question_id":74833213,"body_markdown":"I am currently trying to make an exam timetabling program. I have got it so that the exams are assigned to a timeslot however the student conflict part is not working.\r\nI currently have my students in lists as attributes of subject objects. Each exam also has a subject attribute which is an instance of a subject class. The problem I&#39;m having is that when comparing the lists of students it is being said that there are no conflicts as the list are not identical. However I need it to search through the lists and see if there is the same string appears in both. \r\nI&#39;m very new to this so if anyone could sagest a better way of structuring my problem or a solve for the looking in the strings I would be very grateful.\r\n\r\n```\r\nprivate Constraint studentConflict(ConstraintFactory constraintFactory){\r\n        // students can only sit one exam at the same time\r\n        // selects a lesson and pairs it with another one\r\n        return constraintFactory\r\n                .forEach(Exam.class)\r\n                .join(Exam.class,\r\n                        //...in the same timeslot ...\r\n                        Joiners.equal(Exam::getTimeslot),\r\n                        //...has the same students ...\r\n                        Joiners.equal(Exam::getStudentstoString))\r\n                .penalize(HardSoftScore.ONE_HARD)\r\n                .asConstraint(&quot;Student conflict&quot;);\r\n    }\r\n```\r\nsection of output:\r\n\r\n\r\n\r\n[section of output](https://i.stack.imgur.com/c8OcR.png)","title":"Optaplanner - see if the same item appears in two lists","body":"<p>I am currently trying to make an exam timetabling program. I have got it so that the exams are assigned to a timeslot however the student conflict part is not working.\nI currently have my students in lists as attributes of subject objects. Each exam also has a subject attribute which is an instance of a subject class. The problem I'm having is that when comparing the lists of students it is being said that there are no conflicts as the list are not identical. However I need it to search through the lists and see if there is the same string appears in both.\nI'm very new to this so if anyone could sagest a better way of structuring my problem or a solve for the looking in the strings I would be very grateful.</p>\n<pre><code>private Constraint studentConflict(ConstraintFactory constraintFactory){\n        // students can only sit one exam at the same time\n        // selects a lesson and pairs it with another one\n        return constraintFactory\n                .forEach(Exam.class)\n                .join(Exam.class,\n                        //...in the same timeslot ...\n                        Joiners.equal(Exam::getTimeslot),\n                        //...has the same students ...\n                        Joiners.equal(Exam::getStudentstoString))\n                .penalize(HardSoftScore.ONE_HARD)\n                .asConstraint(&quot;Student conflict&quot;);\n    }\n</code></pre>\n<p>section of output:</p>\n<p><a href=\"https://i.stack.imgur.com/c8OcR.png\" rel=\"nofollow noreferrer\">section of output</a></p>\n"},{"tags":["java","spring","rest","spring-mvc","spring-data-rest"],"comments":[{"owner":{"account_id":5072657,"reputation":3280,"user_id":4071001,"display_name":"lcnicolau"},"score":0,"creation_date":1552171252,"post_id":30912826,"comment_id":96910995,"body_markdown":"Take a look at [this](https://stackoverflow.com/a/49344988/4071001) to see some useful examples of how to expose the identifiers for **all entities**, or only those that extend or implement a **specific superclass or interface**, or marked with some **specific annotation**.","body":"Take a look at <a href=\"https://stackoverflow.com/a/49344988/4071001\">this</a> to see some useful examples of how to expose the identifiers for <b>all entities</b>, or only those that extend or implement a <b>specific superclass or interface</b>, or marked with some <b>specific annotation</b>."}],"answers":[{"tags":[],"owner":{"account_id":462743,"reputation":1326,"user_id":865221,"accept_rate":100,"display_name":"Justin Lewis"},"down_vote_count":2,"up_vote_count":19,"is_accepted":true,"score":17,"last_activity_date":1445001997,"creation_date":1445001997,"answer_id":33171702,"question_id":30912826,"body_markdown":"Currently, there is no way to do this provided by SDR. [This issue](https://jira.spring.io/browse/DATAREST-161) on the SDR Jira tracker gives some explanation as to why this isn&#39;t (and perhaps shouldn&#39;t) be possible.\r\n\r\nThe argument is basically that since the IDs are already contained within the `self` links in the response, you don&#39;t need to expose them as properties of the object itself.\r\n\r\nThat said, you may be able to use reflection to retrieve all classes that have a `javax.persistence.Id` annotation and then call `RepositoryRestConfiguration#exposeIdsFor(Class&lt;?&gt;... domainTypes)`.","title":"Expose all IDs when using Spring Data Rest","body":"<p>Currently, there is no way to do this provided by SDR. <a href=\"https://jira.spring.io/browse/DATAREST-161\" rel=\"noreferrer\">This issue</a> on the SDR Jira tracker gives some explanation as to why this isn't (and perhaps shouldn't) be possible.</p>\n\n<p>The argument is basically that since the IDs are already contained within the <code>self</code> links in the response, you don't need to expose them as properties of the object itself.</p>\n\n<p>That said, you may be able to use reflection to retrieve all classes that have a <code>javax.persistence.Id</code> annotation and then call <code>RepositoryRestConfiguration#exposeIdsFor(Class&lt;?&gt;... domainTypes)</code>.</p>\n"},{"tags":[],"owner":{"account_id":4382227,"reputation":2318,"user_id":3573553,"display_name":"Mark"},"down_vote_count":1,"up_vote_count":20,"is_accepted":false,"score":19,"last_activity_date":1471143559,"creation_date":1471143559,"answer_id":38938767,"question_id":30912826,"body_markdown":"I discovered that if you name the `@Id` field &#39;`Id`&#39; it will display in the JSON if you have a public getter for the `Id`. The Id will show up as a JSON key called &#39;`id`&#39;\r\n\r\nFor example: `@Id @Column(name=&quot;PERSON_ROLE_ID&quot;) private Long Id;`\r\n\r\nThis also works for `@EmbeddedId` fields called &#39;`Id`&#39; as well as long as it has a public getter. In this case the fields of the Id will show up as a JSON object.\r\n\r\nFor example: `@EmbeddedId private PrimaryKey Id;`\r\n\r\nSurprisingly this is case sensitive, calling id &#39;`id`&#39; doesn&#39;t work even though it would be a more conventional name for a Java field.\r\n\r\nI should say that I discovered this completely by accident so I don&#39;t know if this is an accepted convention or will work with previous or future versions of Spring Data and REST. Therefore I have included the relevant parts of my maven pom just incase it&#39;s sensittive to versions...\r\n\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;1.4.0.RELEASE&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\r\n\t&lt;properties&gt;\r\n\t\t&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n\t\t&lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\r\n\t\t&lt;java.version&gt;1.8&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-data-rest&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.oracle&lt;/groupId&gt;\r\n            &lt;artifactId&gt;ojdbc7&lt;/artifactId&gt;\r\n            &lt;version&gt;12.1.0.2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n            &lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n            &lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;","title":"Expose all IDs when using Spring Data Rest","body":"<p>I discovered that if you name the <code>@Id</code> field '<code>Id</code>' it will display in the JSON if you have a public getter for the <code>Id</code>. The Id will show up as a JSON key called '<code>id</code>'</p>\n\n<p>For example: <code>@Id @Column(name=\"PERSON_ROLE_ID\") private Long Id;</code></p>\n\n<p>This also works for <code>@EmbeddedId</code> fields called '<code>Id</code>' as well as long as it has a public getter. In this case the fields of the Id will show up as a JSON object.</p>\n\n<p>For example: <code>@EmbeddedId private PrimaryKey Id;</code></p>\n\n<p>Surprisingly this is case sensitive, calling id '<code>id</code>' doesn't work even though it would be a more conventional name for a Java field.</p>\n\n<p>I should say that I discovered this completely by accident so I don't know if this is an accepted convention or will work with previous or future versions of Spring Data and REST. Therefore I have included the relevant parts of my maven pom just incase it's sensittive to versions...</p>\n\n<pre><code>&lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;1.4.0.RELEASE&lt;/version&gt;\n    &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n&lt;/parent&gt;\n\n&lt;properties&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\n    &lt;java.version&gt;1.8&lt;/java.version&gt;\n&lt;/properties&gt;\n\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-data-rest&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.oracle&lt;/groupId&gt;\n        &lt;artifactId&gt;ojdbc7&lt;/artifactId&gt;\n        &lt;version&gt;12.1.0.2&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n        &lt;artifactId&gt;h2&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":50410,"reputation":3979,"user_id":150371,"accept_rate":54,"display_name":"raksja"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1474994394,"creation_date":1474994394,"answer_id":39730046,"question_id":30912826,"body_markdown":"Proabably you can try this to include all id fields. I havent tried it yet, but will keep posted.\r\n\r\n     public class ExposeAllRepositoryRestConfiguration extends RepositoryRestConfiguration {\r\n    \t@Override\r\n    \tpublic boolean isIdExposedFor(Class&lt;?&gt; domainType) {\r\n    \t\treturn true;\r\n    \t\t}\r\n    \t}\r\n\r\n[Excerpt from this link][1]\r\n\r\n\r\n  [1]: https://jira.spring.io/browse/DATAREST-366","title":"Expose all IDs when using Spring Data Rest","body":"<p>Proabably you can try this to include all id fields. I havent tried it yet, but will keep posted.</p>\n\n<pre><code> public class ExposeAllRepositoryRestConfiguration extends RepositoryRestConfiguration {\n    @Override\n    public boolean isIdExposedFor(Class&lt;?&gt; domainType) {\n        return true;\n        }\n    }\n</code></pre>\n\n<p><a href=\"https://jira.spring.io/browse/DATAREST-366\" rel=\"nofollow\">Excerpt from this link</a></p>\n"},{"tags":[],"owner":{"account_id":173186,"reputation":4270,"user_id":401712,"display_name":"Dario Seidl"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1487562495,"creation_date":1487562495,"answer_id":42336166,"question_id":30912826,"body_markdown":"You can use this method to find all `@Entity` classes of the EntityManagerFactory:\r\n\r\n    private List&lt;Class&lt;?&gt;&gt; getAllManagedEntityTypes(EntityManagerFactory entityManagerFactory) {\r\n        List&lt;Class&lt;?&gt;&gt; entityClasses = new ArrayList&lt;&gt;();\r\n        Metamodel metamodel = entityManagerFactory.getMetamodel();\r\n        for (ManagedType&lt;?&gt; managedType : metamodel.getManagedTypes()) {\r\n            Class&lt;?&gt; javaType = managedType.getJavaType();\r\n            if (javaType.isAnnotationPresent(Entity.class)) {\r\n                entityClasses.add(managedType.getJavaType());\r\n            }\r\n        }\r\n        return entityClasses;\r\n    }\r\n\r\nthen, to expose the IDs for all your entity classes:\r\n\r\n\t@Configuration\r\n\tpublic class RestConfig extends RepositoryRestMvcConfiguration {\r\n\r\n\t\t@Bean\r\n\t\tpublic RepositoryRestConfigurer repositoryRestConfigurer(EntityManagerFactory entityManagerFactory) {\r\n\t\t\tList&lt;Class&lt;?&gt;&gt; entityClasses = getAllManagedEntityTypes(entityManagerFactory);\r\n\r\n\t\t\treturn new RepositoryRestConfigurerAdapter() {\r\n\r\n\t\t\t\t@Override\r\n\t\t\t\tpublic void configureRepositoryRestConfiguration(RepositoryRestConfiguration config) {\r\n\t\t\t\t\tfor (Class&lt;?&gt; entityClass : entityClasses) {\r\n\t\t\t\t\t\tconfig.exposeIdsFor(entityClass);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t}\r\n\t}","title":"Expose all IDs when using Spring Data Rest","body":"<p>You can use this method to find all <code>@Entity</code> classes of the EntityManagerFactory:</p>\n\n<pre><code>private List&lt;Class&lt;?&gt;&gt; getAllManagedEntityTypes(EntityManagerFactory entityManagerFactory) {\n    List&lt;Class&lt;?&gt;&gt; entityClasses = new ArrayList&lt;&gt;();\n    Metamodel metamodel = entityManagerFactory.getMetamodel();\n    for (ManagedType&lt;?&gt; managedType : metamodel.getManagedTypes()) {\n        Class&lt;?&gt; javaType = managedType.getJavaType();\n        if (javaType.isAnnotationPresent(Entity.class)) {\n            entityClasses.add(managedType.getJavaType());\n        }\n    }\n    return entityClasses;\n}\n</code></pre>\n\n<p>then, to expose the IDs for all your entity classes:</p>\n\n<pre><code>@Configuration\npublic class RestConfig extends RepositoryRestMvcConfiguration {\n\n    @Bean\n    public RepositoryRestConfigurer repositoryRestConfigurer(EntityManagerFactory entityManagerFactory) {\n        List&lt;Class&lt;?&gt;&gt; entityClasses = getAllManagedEntityTypes(entityManagerFactory);\n\n        return new RepositoryRestConfigurerAdapter() {\n\n            @Override\n            public void configureRepositoryRestConfiguration(RepositoryRestConfiguration config) {\n                for (Class&lt;?&gt; entityClass : entityClasses) {\n                    config.exposeIdsFor(entityClass);\n                }\n            }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3616959,"reputation":364,"user_id":3016572,"display_name":"kidfruit"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1494485477,"creation_date":1494485477,"answer_id":43908420,"question_id":30912826,"body_markdown":"You can add all your entity classes by **exposeIdsFor**. Replace &quot;db.entity&quot; to whick package you put your entities.\r\n\r\n    @Configuration\r\n    public class CustomRepositoryRestConfigurer extends RepositoryRestConfigurerAdapter {\r\n        Logger logger = Logger.getLogger(this.getClass());\r\n    \r\n        @Override\r\n        public void configureRepositoryRestConfiguration(RepositoryRestConfiguration config) {\r\n            Set&lt;String&gt; classNameSet = ClassTool.getClassName(&quot;db.entity&quot;, false);\r\n            for (String className : classNameSet) {\r\n                try {\r\n                    config.exposeIdsFor(Class.forName(className));\r\n                } catch (ClassNotFoundException e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n    \r\n            logger.info(&quot;exposeIdsFor : &quot; + classNameSet);\r\n        }\r\n    }\r\n\r\nThe ClassTool is my custom function to get class from given package, you can write by yourself.","title":"Expose all IDs when using Spring Data Rest","body":"<p>You can add all your entity classes by <strong>exposeIdsFor</strong>. Replace \"db.entity\" to whick package you put your entities.</p>\n\n<pre><code>@Configuration\npublic class CustomRepositoryRestConfigurer extends RepositoryRestConfigurerAdapter {\n    Logger logger = Logger.getLogger(this.getClass());\n\n    @Override\n    public void configureRepositoryRestConfiguration(RepositoryRestConfiguration config) {\n        Set&lt;String&gt; classNameSet = ClassTool.getClassName(\"db.entity\", false);\n        for (String className : classNameSet) {\n            try {\n                config.exposeIdsFor(Class.forName(className));\n            } catch (ClassNotFoundException e) {\n                e.printStackTrace();\n            }\n        }\n\n        logger.info(\"exposeIdsFor : \" + classNameSet);\n    }\n}\n</code></pre>\n\n<p>The ClassTool is my custom function to get class from given package, you can write by yourself.</p>\n"},{"tags":[],"owner":{"account_id":389200,"reputation":4415,"user_id":748524,"accept_rate":95,"display_name":"Stephan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1511198008,"creation_date":1511198008,"answer_id":47397498,"question_id":30912826,"body_markdown":"Here is what worked perfectly for me ([source here][1]):\r\n\r\n    @Configuration\r\n    public class RepositoryRestConfig extends RepositoryRestConfigurerAdapter {\r\n \r\n      @Override\r\n      public void configureRepositoryRestConfiguration(final RepositoryRestConfiguration config) {\r\n\r\n        final ClassPathScanningCandidateComponentProvider provider = new ClassPathScanningCandidateComponentProvider(\r\n            false);\r\n        provider.addIncludeFilter(new AnnotationTypeFilter(Entity.class));\r\n\r\n        final Set&lt;BeanDefinition&gt; beans = provider.findCandidateComponents(&quot;com.your.domain&quot;);\r\n\r\n        for (final BeanDefinition bean : beans) {\r\n          try {\r\n            config.exposeIdsFor(Class.forName(bean.getBeanClassName()));\r\n          } catch (final ClassNotFoundException e) {\r\n            // Can&#39;t throw ClassNotFoundException due to the method signature. Need to cast it\r\n            throw new IllegalStateException(&quot;Failed to expose `id` field due to&quot;, e);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\nIt finds all beans with the @Entity annotation and exposes them.\r\n\r\n  [1]: https://jira.spring.io/browse/DATAREST-161?focusedCommentId=153328&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-153328","title":"Expose all IDs when using Spring Data Rest","body":"<p>Here is what worked perfectly for me (<a href=\"https://jira.spring.io/browse/DATAREST-161?focusedCommentId=153328&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-153328\" rel=\"nofollow noreferrer\">source here</a>):</p>\n\n<pre><code>@Configuration\npublic class RepositoryRestConfig extends RepositoryRestConfigurerAdapter {\n\n  @Override\n  public void configureRepositoryRestConfiguration(final RepositoryRestConfiguration config) {\n\n    final ClassPathScanningCandidateComponentProvider provider = new ClassPathScanningCandidateComponentProvider(\n        false);\n    provider.addIncludeFilter(new AnnotationTypeFilter(Entity.class));\n\n    final Set&lt;BeanDefinition&gt; beans = provider.findCandidateComponents(\"com.your.domain\");\n\n    for (final BeanDefinition bean : beans) {\n      try {\n        config.exposeIdsFor(Class.forName(bean.getBeanClassName()));\n      } catch (final ClassNotFoundException e) {\n        // Can't throw ClassNotFoundException due to the method signature. Need to cast it\n        throw new IllegalStateException(\"Failed to expose `id` field due to\", e);\n      }\n    }\n  }\n}\n</code></pre>\n\n<p>It finds all beans with the @Entity annotation and exposes them.</p>\n"},{"tags":[],"owner":{"account_id":948386,"reputation":2575,"user_id":975123,"accept_rate":75,"display_name":"mekazu"},"down_vote_count":0,"up_vote_count":44,"is_accepted":false,"score":44,"last_activity_date":1513056288,"creation_date":1513056288,"answer_id":47765828,"question_id":30912826,"body_markdown":"If you want to expose the id field for all your entity classes:\r\n\r\n    import java.util.stream.Collectors;\r\n    \r\n    import javax.persistence.EntityManager;\r\n    \r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.data.rest.core.config.RepositoryRestConfiguration;\r\n    import org.springframework.data.rest.webmvc.config.RepositoryRestConfigurerAdapter;\r\n    \r\n    @Configuration\r\n    public class MyRepositoryRestConfigurerAdapter extends RepositoryRestConfigurerAdapter {\r\n    \r\n    \t@Autowired\r\n    \tprivate EntityManager entityManager;\r\n    \r\n    \t@Override\r\n    \tpublic void configureRepositoryRestConfiguration(RepositoryRestConfiguration config) {\r\n    \t\tconfig.exposeIdsFor(entityManager.getMetamodel().getEntities().stream().map(e -&gt; e.getJavaType()).collect(Collectors.toList()).toArray(new Class[0]));\r\n    \t}\r\n    \r\n    }\r\n\r\n","title":"Expose all IDs when using Spring Data Rest","body":"<p>If you want to expose the id field for all your entity classes:</p>\n\n<pre><code>import java.util.stream.Collectors;\n\nimport javax.persistence.EntityManager;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.data.rest.core.config.RepositoryRestConfiguration;\nimport org.springframework.data.rest.webmvc.config.RepositoryRestConfigurerAdapter;\n\n@Configuration\npublic class MyRepositoryRestConfigurerAdapter extends RepositoryRestConfigurerAdapter {\n\n    @Autowired\n    private EntityManager entityManager;\n\n    @Override\n    public void configureRepositoryRestConfiguration(RepositoryRestConfiguration config) {\n        config.exposeIdsFor(entityManager.getMetamodel().getEntities().stream().map(e -&gt; e.getJavaType()).collect(Collectors.toList()).toArray(new Class[0]));\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6979229,"reputation":31,"user_id":5352814,"display_name":"Phearun Rath"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1513168350,"creation_date":1513167985,"answer_id":47793003,"question_id":30912826,"body_markdown":"Try this configuration. It works perfectly fine for me.\r\n\r\n    @Configuration\r\n    public class RestConfiguration extends RepositoryRestConfigurerAdapter{\r\n\t\r\n\t      @PersistenceContext\r\n\t      private EntityManager entityManager;\r\n\t\r\n\t      @Override\r\n\t      public void configureRepositoryRestConfiguration(RepositoryRestConfiguration config) {\r\n\t\t       //TODO: Expose for specific entity!\r\n\t\t       //config.exposeIdsFor(Officer.class);\r\n\t           //config.exposeIdsFor(Position.class);\r\n\t\t\r\n\t\t       //TODO: Expose id for all entities!\r\n\t\t       entityManager.getMetamodel().getEntities().forEach(entity-&gt;{\r\n\t\t\t        try {\r\n\t\t\t\t         System.out.println(&quot;Model: &quot; + entity.getName());\r\n\t\t\t\t         Class&lt;? extends Object&gt; clazz = Class.forName(String.format(&quot;yourpackage.%s&quot;, entity.getName()));\r\n\t\t\t\t         config.exposeIdsFor(clazz);\r\n\t\t\t        } catch (Exception e) {\r\n\t\t\t\t         System.out.println(e.getMessage());\r\n\t\t\t        }\r\n\t\t        });\r\n\t    }\r\n    }","title":"Expose all IDs when using Spring Data Rest","body":"<p>Try this configuration. It works perfectly fine for me.</p>\n\n<pre><code>@Configuration\npublic class RestConfiguration extends RepositoryRestConfigurerAdapter{\n\n      @PersistenceContext\n      private EntityManager entityManager;\n\n      @Override\n      public void configureRepositoryRestConfiguration(RepositoryRestConfiguration config) {\n           //TODO: Expose for specific entity!\n           //config.exposeIdsFor(Officer.class);\n           //config.exposeIdsFor(Position.class);\n\n           //TODO: Expose id for all entities!\n           entityManager.getMetamodel().getEntities().forEach(entity-&gt;{\n                try {\n                     System.out.println(\"Model: \" + entity.getName());\n                     Class&lt;? extends Object&gt; clazz = Class.forName(String.format(\"yourpackage.%s\", entity.getName()));\n                     config.exposeIdsFor(clazz);\n                } catch (Exception e) {\n                     System.out.println(e.getMessage());\n                }\n            });\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14328892,"reputation":39,"user_id":10350169,"display_name":"David B."},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1536710086,"creation_date":1536710086,"answer_id":52285614,"question_id":30912826,"body_markdown":"Please find a simple solution for this, avoiding to find entities related.\r\n\r\n    @Component\r\n    public class EntityExposingIdConfiguration extends RepositoryRestConfigurerAdapter {\r\n    \r\n        @Override\r\n        public void configureRepositoryRestConfiguration(RepositoryRestConfiguration config) {\r\n            try {\r\n                Field exposeIdsFor = RepositoryRestConfiguration.class.getDeclaredField(&quot;exposeIdsFor&quot;);\r\n                exposeIdsFor.setAccessible(true);\r\n                ReflectionUtils.setField(exposeIdsFor, config, new ListAlwaysContains());\r\n            } catch (NoSuchFieldException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    \r\n        class ListAlwaysContains extends ArrayList {\r\n    \r\n            @Override\r\n            public boolean contains(Object o) {\r\n                return true;\r\n            }\r\n        }\r\n    }","title":"Expose all IDs when using Spring Data Rest","body":"<p>Please find a simple solution for this, avoiding to find entities related.</p>\n\n<pre><code>@Component\npublic class EntityExposingIdConfiguration extends RepositoryRestConfigurerAdapter {\n\n    @Override\n    public void configureRepositoryRestConfiguration(RepositoryRestConfiguration config) {\n        try {\n            Field exposeIdsFor = RepositoryRestConfiguration.class.getDeclaredField(\"exposeIdsFor\");\n            exposeIdsFor.setAccessible(true);\n            ReflectionUtils.setField(exposeIdsFor, config, new ListAlwaysContains());\n        } catch (NoSuchFieldException e) {\n            e.printStackTrace();\n        }\n    }\n\n    class ListAlwaysContains extends ArrayList {\n\n        @Override\n        public boolean contains(Object o) {\n            return true;\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14244247,"reputation":21,"user_id":10289805,"display_name":"Francois Gengler"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1552660704,"creation_date":1552660704,"answer_id":55185024,"question_id":30912826,"body_markdown":"Following piece of code looks prettier:\r\n\r\n    .exposeIdsFor(entityManager.getMetamodel().getEntities().stream().map(entityType -&gt; entityType.getJavaType()).toArray(Class[]::new))","title":"Expose all IDs when using Spring Data Rest","body":"<p>Following piece of code looks prettier:</p>\n\n<pre><code>.exposeIdsFor(entityManager.getMetamodel().getEntities().stream().map(entityType -&gt; entityType.getJavaType()).toArray(Class[]::new))\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6812577,"reputation":1,"user_id":5242256,"display_name":"Terry"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1561106427,"creation_date":1561106427,"answer_id":56699801,"question_id":30912826,"body_markdown":"You can try with this solution:\r\n- First import [reflections][1] library to your POM file:\r\n\r\n    &lt;dependency&gt;\r\n\t    &lt;groupId&gt;org.reflections&lt;/groupId&gt;\r\n\t    &lt;artifactId&gt;reflections&lt;/artifactId&gt;\r\n\t    &lt;version&gt;0.9.11&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n- Then change your RepositoryConfig class to:\r\n\r\n    @Configuration\r\n    public class RepositoryConfig extends RepositoryRestMvcConfiguration {\r\n        @Override\r\n        protected void configureRepositoryRestConfiguration(RepositoryRestConfiguration config) {\r\n            Reflections reflections = new Reflections(&quot;com.example.entity&quot;);\r\n            Set&lt;Class&lt;?&gt;&gt; idExposedClasses = reflections.getTypesAnnotatedWith(Entity.class, false);\r\n            idExposedClasses.forEach(config::exposeIdsFor);\r\n            return config;\r\n        }\r\n    }\r\n\r\nChange ***&quot;com.example.entity&quot;*** to your **Entity package** and you are good to go. Good luck!\r\n\r\n  [1]: https://mvnrepository.com/artifact/org.reflections/reflections","title":"Expose all IDs when using Spring Data Rest","body":"<p>You can try with this solution:\n- First import <a href=\"https://mvnrepository.com/artifact/org.reflections/reflections\" rel=\"nofollow noreferrer\">reflections</a> library to your POM file:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.reflections&lt;/groupId&gt;\n    &lt;artifactId&gt;reflections&lt;/artifactId&gt;\n    &lt;version&gt;0.9.11&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>- Then change your RepositoryConfig class to:</p>\n\n<pre><code>@Configuration\npublic class RepositoryConfig extends RepositoryRestMvcConfiguration {\n    @Override\n    protected void configureRepositoryRestConfiguration(RepositoryRestConfiguration config) {\n        Reflections reflections = new Reflections(\"com.example.entity\");\n        Set&lt;Class&lt;?&gt;&gt; idExposedClasses = reflections.getTypesAnnotatedWith(Entity.class, false);\n        idExposedClasses.forEach(config::exposeIdsFor);\n        return config;\n    }\n}\n</code></pre>\n\n<p>Change <strong><em>\"com.example.entity\"</em></strong> to your <strong>Entity package</strong> and you are good to go. Good luck!</p>\n"},{"tags":[],"owner":{"account_id":5954045,"reputation":3379,"user_id":4681265,"display_name":"Adrian"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1653072156,"creation_date":1604608851,"answer_id":64704957,"question_id":30912826,"body_markdown":"Full working example based on [@FrancoisGengler&#39;s answer][1]:\r\n\r\n    @SpringBootApplication\r\n    public class DataRestApplication {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tSpringApplication.run(DataRestApplication.class, args);\r\n    \t}\r\n    \r\n    \t@Bean\r\n    \tpublic RepositoryRestConfigurer repositoryRestConfigurer(EntityManager entityManager) {\r\n    \t\treturn RepositoryRestConfigurer.withConfig(config -&gt; {\r\n    \t\t\tconfig.exposeIdsFor(entityManager.getMetamodel().getEntities()\r\n    \t\t\t\t\t.stream().map(Type::getJavaType).toArray(Class[]::new));\r\n    \t\t});\r\n    \t}\r\n    }\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/55185024/584676","title":"Expose all IDs when using Spring Data Rest","body":"<p>Full working example based on <a href=\"https://stackoverflow.com/a/55185024/584676\">@FrancoisGengler's answer</a>:</p>\n<pre><code>@SpringBootApplication\npublic class DataRestApplication {\n    public static void main(String[] args) {\n        SpringApplication.run(DataRestApplication.class, args);\n    }\n\n    @Bean\n    public RepositoryRestConfigurer repositoryRestConfigurer(EntityManager entityManager) {\n        return RepositoryRestConfigurer.withConfig(config -&gt; {\n            config.exposeIdsFor(entityManager.getMetamodel().getEntities()\n                    .stream().map(Type::getJavaType).toArray(Class[]::new));\n        });\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5129456,"reputation":954,"user_id":4110190,"display_name":"Jonas Pedersen"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1647422469,"creation_date":1622452657,"answer_id":67771005,"question_id":30912826,"body_markdown":"An updated answer to [@mekasu][1]. The `RepositoryRestConfigurer` interface was changed a bit in 2.4.\r\n\r\n**Pre 2.4:**\r\n\r\n````\r\nimport org.springframework.data.rest.webmvc.config.RepositoryRestConfigurer;\r\nimport javax.persistence.EntityManager;\r\nimport javax.persistence.metamodel.Type;\r\n\r\n@Configuration\r\npublic class Config implements RepositoryRestConfigurer {\r\n\r\n    @Autowired\r\n    private EntityManager entityManager;\r\n\r\n    @Override\r\n    public void configureRepositoryRestConfiguration(RepositoryRestConfiguration config) {\r\n        config.exposeIdsFor(entityManager.getMetamodel().getEntities().stream().map(Type::getJavaType).toArray(Class[]::new));\r\n    }\r\n}\r\n````\r\n\r\n**Post 2.4**\r\n````\r\nimport org.springframework.data.rest.webmvc.config.RepositoryRestConfigurer;\r\nimport org.springframework.web.servlet.config.annotation.CorsRegistry;\r\nimport javax.persistence.EntityManager;\r\nimport javax.persistence.metamodel.Type;\r\n\r\n@Configuration\r\npublic class Config implements RepositoryRestConfigurer {\r\n\r\n    @Autowired\r\n    private EntityManager entityManager;\r\n\r\n    @Override\r\n    public void configureRepositoryRestConfiguration(RepositoryRestConfiguration config, CorsRegistry cors) {\r\n        config.exposeIdsFor(entityManager.getMetamodel().getEntities().stream().map(Type::getJavaType).toArray(Class[]::new));\r\n    }\r\n}\r\n````\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/47765828/4110190","title":"Expose all IDs when using Spring Data Rest","body":"<p>An updated answer to <a href=\"https://stackoverflow.com/a/47765828/4110190\">@mekasu</a>. The <code>RepositoryRestConfigurer</code> interface was changed a bit in 2.4.</p>\n<p><strong>Pre 2.4:</strong></p>\n<pre><code>import org.springframework.data.rest.webmvc.config.RepositoryRestConfigurer;\nimport javax.persistence.EntityManager;\nimport javax.persistence.metamodel.Type;\n\n@Configuration\npublic class Config implements RepositoryRestConfigurer {\n\n    @Autowired\n    private EntityManager entityManager;\n\n    @Override\n    public void configureRepositoryRestConfiguration(RepositoryRestConfiguration config) {\n        config.exposeIdsFor(entityManager.getMetamodel().getEntities().stream().map(Type::getJavaType).toArray(Class[]::new));\n    }\n}\n</code></pre>\n<p><strong>Post 2.4</strong></p>\n<pre><code>import org.springframework.data.rest.webmvc.config.RepositoryRestConfigurer;\nimport org.springframework.web.servlet.config.annotation.CorsRegistry;\nimport javax.persistence.EntityManager;\nimport javax.persistence.metamodel.Type;\n\n@Configuration\npublic class Config implements RepositoryRestConfigurer {\n\n    @Autowired\n    private EntityManager entityManager;\n\n    @Override\n    public void configureRepositoryRestConfiguration(RepositoryRestConfiguration config, CorsRegistry cors) {\n        config.exposeIdsFor(entityManager.getMetamodel().getEntities().stream().map(Type::getJavaType).toArray(Class[]::new));\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":130873,"reputation":20683,"user_id":330457,"accept_rate":82,"display_name":"Jin Kwon"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1622796672,"creation_date":1622796672,"answer_id":67834287,"question_id":30912826,"body_markdown":"I&#39;m sharing my solution which is based on [other answer](https://stackoverflow.com/a/47765828/330457).\r\n\r\nIn my case which configures multiple databases, I don&#39;t why but, I need to autowire instances of `EntityManagerFactory`.\r\n\r\n```java\r\n@Db1 @Autowire\r\nEntityManagerFactory entityManagerFactoryDb1;\r\n\r\n@Db2 @Autowire\r\nEntityManagerFactory entityManagerFactoryDb2;\r\n```\r\n\r\nNow all I need is a method streaming all entity classes gathered from all injected persistence units.\r\n\r\n(Maybe, checking the existence of `@Entity` annotation or a custom annotation , say `@EntityRestExposeId`, can be applied.)\r\n\r\n```java\r\n    private void forEachEntityClass(final Consumer&lt;? super Class&lt;?&gt;&gt; consumer) {\r\n        Arrays.stream(DataRestConfiguration.class.getDeclaredFields())\r\n                .filter(f -&gt; {\r\n                    final int modifiers = f.getModifiers();\r\n                    return !Modifier.isStatic(modifiers);\r\n                })\r\n                .filter(f -&gt; EntityManagerFactory.class.isAssignableFrom(f.getType()))\r\n                .map(f -&gt; {\r\n                    f.setAccessible(true);\r\n                    try {\r\n                        return (EntityManagerFactory) f.get(this);\r\n                    } catch (final ReflectiveOperationException roe) {\r\n                        throw new RuntimeException(roe);\r\n                    }\r\n                })\r\n                .flatMap(emf -&gt; emf.getMetamodel().getEntities().stream().map(EntityType::getJavaType))\r\n                .forEach(consumer);\r\n    }\r\n```\r\n\r\nCalling the `exposeIdFor` method is straightforward.\r\n\r\n```java\r\n@Configuration\r\nclass DataRestConfiguration {\r\n\r\n    @Bean\r\n    public RepositoryRestConfigurer repositoryRestConfigurer() {\r\n        return RepositoryRestConfigurer.withConfig((configuration, registry) -&gt; {\r\n            forEachEntityClass(configuration::exposeIdsFor);\r\n            // ...\r\n        });\r\n    }\r\n\r\n    private void forEachEntityClass(final Consumer&lt;? super Class&lt;?&gt;&gt; consumer) {\r\n        // ...\r\n    }\r\n\r\n    @Db1 @Autowired\r\n    EntityManagerFactory entityManagerFactoryDb1;\r\n\r\n    @Db2 @Autowired\r\n    EntityManagerFactory entityManagerFactoryDb2;\r\n\r\n    @Db3 @Autowired\r\n    EntityManagerFactory entityManagerFactoryDb3;\r\n}\r\n```","title":"Expose all IDs when using Spring Data Rest","body":"<p>I'm sharing my solution which is based on <a href=\"https://stackoverflow.com/a/47765828/330457\">other answer</a>.</p>\n<p>In my case which configures multiple databases, I don't why but, I need to autowire instances of <code>EntityManagerFactory</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Db1 @Autowire\nEntityManagerFactory entityManagerFactoryDb1;\n\n@Db2 @Autowire\nEntityManagerFactory entityManagerFactoryDb2;\n</code></pre>\n<p>Now all I need is a method streaming all entity classes gathered from all injected persistence units.</p>\n<p>(Maybe, checking the existence of <code>@Entity</code> annotation or a custom annotation , say <code>@EntityRestExposeId</code>, can be applied.)</p>\n<pre class=\"lang-java prettyprint-override\"><code>    private void forEachEntityClass(final Consumer&lt;? super Class&lt;?&gt;&gt; consumer) {\n        Arrays.stream(DataRestConfiguration.class.getDeclaredFields())\n                .filter(f -&gt; {\n                    final int modifiers = f.getModifiers();\n                    return !Modifier.isStatic(modifiers);\n                })\n                .filter(f -&gt; EntityManagerFactory.class.isAssignableFrom(f.getType()))\n                .map(f -&gt; {\n                    f.setAccessible(true);\n                    try {\n                        return (EntityManagerFactory) f.get(this);\n                    } catch (final ReflectiveOperationException roe) {\n                        throw new RuntimeException(roe);\n                    }\n                })\n                .flatMap(emf -&gt; emf.getMetamodel().getEntities().stream().map(EntityType::getJavaType))\n                .forEach(consumer);\n    }\n</code></pre>\n<p>Calling the <code>exposeIdFor</code> method is straightforward.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\nclass DataRestConfiguration {\n\n    @Bean\n    public RepositoryRestConfigurer repositoryRestConfigurer() {\n        return RepositoryRestConfigurer.withConfig((configuration, registry) -&gt; {\n            forEachEntityClass(configuration::exposeIdsFor);\n            // ...\n        });\n    }\n\n    private void forEachEntityClass(final Consumer&lt;? super Class&lt;?&gt;&gt; consumer) {\n        // ...\n    }\n\n    @Db1 @Autowired\n    EntityManagerFactory entityManagerFactoryDb1;\n\n    @Db2 @Autowired\n    EntityManagerFactory entityManagerFactoryDb2;\n\n    @Db3 @Autowired\n    EntityManagerFactory entityManagerFactoryDb3;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15548139,"reputation":496,"user_id":11216698,"display_name":"Daniel Jeney"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1671276990,"creation_date":1671276652,"answer_id":74833713,"question_id":30912826,"body_markdown":"Here is a short solution to expose all ids using only things from springframework: \r\n\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.data.repository.support.Repositories;\r\n    import org.springframework.data.rest.core.config.RepositoryRestConfiguration;\r\n    import org.springframework.data.rest.webmvc.config.RepositoryRestConfigurer;\r\n    import org.springframework.web.servlet.config.annotation.CorsRegistry;\r\n    \r\n    @Configuration\r\n    public class MyRepositoryRestConfigurer implements RepositoryRestConfigurer {\r\n    \t@Autowired\r\n    \tprivate Repositories repositories;\r\n    \r\n    \t@Override\r\n    \tpublic void configureRepositoryRestConfiguration(RepositoryRestConfiguration config, CorsRegistry cors) {\r\n    \t\tthis.repositories.iterator().forEachRemaining(r -&gt; {\r\n    \t\t\tconfig.exposeIdsFor(r);\r\n    \t\t});\r\n    \t}\r\n    }","title":"Expose all IDs when using Spring Data Rest","body":"<p>Here is a short solution to expose all ids using only things from springframework:</p>\n<pre><code>import org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.data.repository.support.Repositories;\nimport org.springframework.data.rest.core.config.RepositoryRestConfiguration;\nimport org.springframework.data.rest.webmvc.config.RepositoryRestConfigurer;\nimport org.springframework.web.servlet.config.annotation.CorsRegistry;\n\n@Configuration\npublic class MyRepositoryRestConfigurer implements RepositoryRestConfigurer {\n    @Autowired\n    private Repositories repositories;\n\n    @Override\n    public void configureRepositoryRestConfiguration(RepositoryRestConfiguration config, CorsRegistry cors) {\n        this.repositories.iterator().forEachRemaining(r -&gt; {\n            config.exposeIdsFor(r);\n        });\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":6366980,"reputation":535,"user_id":4940680,"accept_rate":56,"display_name":"Baiteman"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":33098,"favorite_count":0,"down_vote_count":0,"up_vote_count":39,"accepted_answer_id":33171702,"answer_count":15,"score":39,"last_activity_date":1671276990,"creation_date":1434623217,"question_id":30912826,"body_markdown":"I&#39;d like to expose all IDs using a Spring Rest interface.\r\n\r\nI know that per default an ID like this will not be exposed via the rest interface:\r\n\r\n        @Id\r\n    \t@GeneratedValue(strategy=GenerationType.IDENTITY)\r\n    \t@Column(unique=true, nullable=false)\r\n    \tprivate Long id;\r\n\r\n\r\n\r\nI&#39;m aware that I can use this to expose the ID for `User`:\r\n\r\n    @Configuration\r\n    public class RepositoryConfig extends RepositoryRestMvcConfiguration {\r\n        @Override\r\n        protected void configureRepositoryRestConfiguration(RepositoryRestConfiguration config) {\r\n            config.exposeIdsFor(User.class);\r\n        }\r\n    }\r\n\r\nBut is there an easy way to expose all IDs without manually maintaining a list in this `configureRepositoryRestConfiguration` method?","title":"Expose all IDs when using Spring Data Rest","body":"<p>I'd like to expose all IDs using a Spring Rest interface.</p>\n\n<p>I know that per default an ID like this will not be exposed via the rest interface:</p>\n\n<pre><code>    @Id\n    @GeneratedValue(strategy=GenerationType.IDENTITY)\n    @Column(unique=true, nullable=false)\n    private Long id;\n</code></pre>\n\n<p>I'm aware that I can use this to expose the ID for <code>User</code>:</p>\n\n<pre><code>@Configuration\npublic class RepositoryConfig extends RepositoryRestMvcConfiguration {\n    @Override\n    protected void configureRepositoryRestConfiguration(RepositoryRestConfiguration config) {\n        config.exposeIdsFor(User.class);\n    }\n}\n</code></pre>\n\n<p>But is there an easy way to expose all IDs without manually maintaining a list in this <code>configureRepositoryRestConfiguration</code> method?</p>\n"},{"tags":["java","oracle","jdbc","callable-statement"],"comments":[{"owner":{"account_id":10958861,"reputation":504,"user_id":8052787,"display_name":"FredvN"},"score":2,"creation_date":1671212485,"post_id":74827729,"comment_id":132058106,"body_markdown":"Does this answer your question? [Oracle Stored Procedure JDBC call with named paramaters fails with &#39;Found Symbol &gt;&#39;](https://stackoverflow.com/questions/61667703/oracle-stored-procedure-jdbc-call-with-named-paramaters-fails-with-found-symbol)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/61667703/oracle-stored-procedure-jdbc-call-with-named-paramaters-fails-with-found-symbol\">Oracle Stored Procedure JDBC call with named paramaters fails with &#39;Found Symbol &gt;&#39;</a>"},{"owner":{"account_id":98359,"reputation":184987,"user_id":266304,"display_name":"Alex Poole"},"score":1,"creation_date":1671287064,"post_id":74827729,"comment_id":132069343,"body_markdown":"That does not answer this question, no. It shows someone using `=&gt;` incorrectly, and the answer is to not use it which isn’t the right (or only) answer here; and it doesn’t refer to skipping some default arguments.","body":"That does not answer this question, no. It shows someone using <code>=&gt;</code> incorrectly, and the answer is to not use it which isn’t the right (or only) answer here; and it doesn’t refer to skipping some default arguments."}],"answers":[{"tags":[],"owner":{"account_id":98359,"reputation":184987,"user_id":266304,"display_name":"Alex Poole"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1671214460,"creation_date":1671214460,"answer_id":74828323,"question_id":74827729,"body_markdown":"You can either use the `=&gt;` notation to specify which parameters you are passing, and use positional notation:\r\n\r\n```\r\nstmt = connection.prepareCall(&quot;CALL create_entity(p_name =&gt; ?, p_location =&gt; ?)&quot;);\r\nstmt.registerOutParameter(1, ...);\r\nstmt.registerOutParameter(2, ...);\r\n...\r\nstmt.execute();\r\nstmt.getString(1);\r\nstmt.getInt(2);\r\n```\r\n\r\nOr use named binding:\r\n\r\n```\r\nstmt = connection.prepareCall(&quot;CALL create_entity(?, ?)&quot;);\r\nstmt.registerOutParameter(&quot;P_NAME&quot;, ...);\r\nstmt.registerOutParameter(&quot;P_LOCATION&quot;, ...);\r\n...\r\nstmt.execute();\r\nstmt.getString(&quot;P_NAME&quot;);\r\nstmt.getInt(&quot;P_LOCATION&quot;);\r\n```\r\n\r\nBut don&#39;t mix them (as the question linked in a comment shows, that won&#39;t work); and your driver and version might affect what is allowed.\r\n\r\nIf you want to override any of the input parameters then you can add those to the argument list, and bind values for them, while leaving the rest to use their defaults.","title":"Getting output parameters of a procedure","body":"<p>You can either use the <code>=&gt;</code> notation to specify which parameters you are passing, and use positional notation:</p>\n<pre><code>stmt = connection.prepareCall(&quot;CALL create_entity(p_name =&gt; ?, p_location =&gt; ?)&quot;);\nstmt.registerOutParameter(1, ...);\nstmt.registerOutParameter(2, ...);\n...\nstmt.execute();\nstmt.getString(1);\nstmt.getInt(2);\n</code></pre>\n<p>Or use named binding:</p>\n<pre><code>stmt = connection.prepareCall(&quot;CALL create_entity(?, ?)&quot;);\nstmt.registerOutParameter(&quot;P_NAME&quot;, ...);\nstmt.registerOutParameter(&quot;P_LOCATION&quot;, ...);\n...\nstmt.execute();\nstmt.getString(&quot;P_NAME&quot;);\nstmt.getInt(&quot;P_LOCATION&quot;);\n</code></pre>\n<p>But don't mix them (as the question linked in a comment shows, that won't work); and your driver and version might affect what is allowed.</p>\n<p>If you want to override any of the input parameters then you can add those to the argument list, and bind values for them, while leaving the rest to use their defaults.</p>\n"}],"owner":{"account_id":7992105,"reputation":244,"user_id":6029661,"display_name":"Alex.K"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":509,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74828323,"answer_count":1,"score":1,"last_activity_date":1671276870,"creation_date":1671211049,"question_id":74827729,"body_markdown":"I have a stored procedure with plenty of parameters, I need to call this procedure from Java. All of procedure&#39;s input parameters have defaults, like this:\r\n\r\n    PROCEDURE create_entity\r\n    (\r\n        p_id number deafult 1,\r\n        p_code number default 1,\r\n        p_uid number default 1,\r\n    \r\n        --......here comes about 50 of similar parameters with defaults set\r\n    \r\n        p_name out varchar2,\r\n        p_location out number\r\n    )\r\n\r\nMy goal is to call this procedure via JDBC without specifying any input arguments, and fetch `p_name`, `p_location` output parameter values.\r\nIn this case, do I need to specify all of 50 input parameters, even though I&#39;m fine with using their default values?\r\n\r\n    CallableStatement stmt = connection.prepareCall(&quot;CALL create_entity(?, ?, ?, ?, ?, ?, ? ......)&quot;)\r\n\r\nIs there any way to omit specifying those &#39;?&#39; in a call statement?\r\nHow can I get just the output parameters values in an easy way?\r\n","title":"Getting output parameters of a procedure","body":"<p>I have a stored procedure with plenty of parameters, I need to call this procedure from Java. All of procedure's input parameters have defaults, like this:</p>\n<pre><code>PROCEDURE create_entity\n(\n    p_id number deafult 1,\n    p_code number default 1,\n    p_uid number default 1,\n\n    --......here comes about 50 of similar parameters with defaults set\n\n    p_name out varchar2,\n    p_location out number\n)\n</code></pre>\n<p>My goal is to call this procedure via JDBC without specifying any input arguments, and fetch <code>p_name</code>, <code>p_location</code> output parameter values.\nIn this case, do I need to specify all of 50 input parameters, even though I'm fine with using their default values?</p>\n<pre><code>CallableStatement stmt = connection.prepareCall(&quot;CALL create_entity(?, ?, ?, ?, ?, ?, ? ......)&quot;)\n</code></pre>\n<p>Is there any way to omit specifying those '?' in a call statement?\nHow can I get just the output parameters values in an easy way?</p>\n"},{"tags":["java","mysql","jdbc","prepared-statement"],"answers":[{"tags":[],"owner":{"account_id":2818342,"reputation":299858,"user_id":2422776,"display_name":"Mureinik"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1671225109,"creation_date":1671225109,"answer_id":74829801,"question_id":74829748,"body_markdown":"You can&#39;t bind obejct names (in this case, a column name), only values. \r\n\r\nHaving said that, since all the values here seem to be hard-coded, you really don&#39;t need a `PreparedStamtement`, and could just execute the statement directly:\r\n\r\n```java\r\ncon.executeUpdate(&quot;UPDATE member_ships SET Cyclone = 9 WHERE UUID = 316931131188576123l&quot;); \r\n```","title":"Java SQL Prepared Statement Update not working","body":"<p>You can't bind obejct names (in this case, a column name), only values.</p>\n<p>Having said that, since all the values here seem to be hard-coded, you really don't need a <code>PreparedStamtement</code>, and could just execute the statement directly:</p>\n<pre class=\"lang-java prettyprint-override\"><code>con.executeUpdate(&quot;UPDATE member_ships SET Cyclone = 9 WHERE UUID = 316931131188576123l&quot;); \n</code></pre>\n"}],"owner":{"account_id":20346438,"reputation":5,"user_id":14924188,"display_name":"Azalen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":130,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1671276810,"accepted_answer_id":74829801,"answer_count":1,"score":0,"last_activity_date":1671276781,"creation_date":1671224688,"question_id":74829748,"body_markdown":"I have the problem that I just can&#39;t get the following code to run. I&#39;ve tried and changed all of them but I always get an error, maybe you have an idea where the error is?\r\n\r\n```java\r\npublic class TestCommand implements ServerCommand{\r\n\r\n    @Override\r\n    public void performcommand(SlashCommandInteractionEvent event, Member m, MessageChannelUnion channel,\r\n            VoiceChannel ec, VoiceChannel pub, TextChannel log, Guild guild) {\r\n\r\n\t\tConnection connection = null;\r\n\t\tPreparedStatement preparedStatement = null;\r\n\t\t\t\t\r\n\t\tString sql = (&quot;UPDATE member_ships SET?= ? WHERE UUID= ?&quot;); \r\n\t\t\r\n\t\ttry {\r\n    \t\tconnection = MySQL.getConnection();\r\n    \t\tpreparedStatement = connection.prepareStatement(sql);\r\n    \t\tpreparedStatement.setString(1,&quot;Cyclone&quot;);\r\n    \t\tpreparedStatement.setInt(2,9);\r\n    \t\tpreparedStatement.setLong(3,316931131188576123l);\r\n    \t\tpreparedStatement.executeUpdate();\r\n\t\t}   catch (SQLException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t} finally {\r\n\t\t\tMySQL.closePreparedStatement(preparedStatement);\r\n\t\t\tMySQL.closeConnection(connection);\r\n\t\t}\r\n\t}\r\n}\r\n```\r\nThe MySQL class\r\n\r\n```java\r\npublic class MySQL {\r\n\r\n\tpublic static Connection getConnection() throws SQLException {\r\n\t\tConnection connection = DriverManager.getConnection(&quot;jdbc:mysql://*****&quot;,&quot;***&quot;,&quot;****&quot;);\r\n\t\tconnection.setAutoCommit(true);\r\n        System.out.println(&quot;Database connecion successful&quot;); //TODO Remove \r\n\t\treturn connection;\r\n\t}\r\n```\r\n\r\nAnd here the error stacktrace:\r\n\r\n```none\r\njava.sql.SQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near &#39;&#39;Cyclone&#39;= 9 WHERE UUID= 316931131188576123&#39; at line 1\r\n        at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:120)\r\n        at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)\r\n        at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916)\r\n        at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1061)\r\n        at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1009)\r\n        at com.mysql.cj.jdbc.ClientPreparedStatement.executeLargeUpdate(ClientPreparedStatement.java:1320)\r\n        at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdate(ClientPreparedStatement.java:994)\r\n```\r\n","title":"Java SQL Prepared Statement Update not working","body":"<p>I have the problem that I just can't get the following code to run. I've tried and changed all of them but I always get an error, maybe you have an idea where the error is?</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class TestCommand implements ServerCommand{\n\n    @Override\n    public void performcommand(SlashCommandInteractionEvent event, Member m, MessageChannelUnion channel,\n            VoiceChannel ec, VoiceChannel pub, TextChannel log, Guild guild) {\n\n        Connection connection = null;\n        PreparedStatement preparedStatement = null;\n                \n        String sql = (&quot;UPDATE member_ships SET?= ? WHERE UUID= ?&quot;); \n        \n        try {\n            connection = MySQL.getConnection();\n            preparedStatement = connection.prepareStatement(sql);\n            preparedStatement.setString(1,&quot;Cyclone&quot;);\n            preparedStatement.setInt(2,9);\n            preparedStatement.setLong(3,316931131188576123l);\n            preparedStatement.executeUpdate();\n        }   catch (SQLException e) {\n            e.printStackTrace();\n        } finally {\n            MySQL.closePreparedStatement(preparedStatement);\n            MySQL.closeConnection(connection);\n        }\n    }\n}\n</code></pre>\n<p>The MySQL class</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class MySQL {\n\n    public static Connection getConnection() throws SQLException {\n        Connection connection = DriverManager.getConnection(&quot;jdbc:mysql://*****&quot;,&quot;***&quot;,&quot;****&quot;);\n        connection.setAutoCommit(true);\n        System.out.println(&quot;Database connecion successful&quot;); //TODO Remove \n        return connection;\n    }\n</code></pre>\n<p>And here the error stacktrace:</p>\n<pre class=\"lang-none prettyprint-override\"><code>java.sql.SQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near ''Cyclone'= 9 WHERE UUID= 316931131188576123' at line 1\n        at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:120)\n        at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)\n        at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916)\n        at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1061)\n        at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1009)\n        at com.mysql.cj.jdbc.ClientPreparedStatement.executeLargeUpdate(ClientPreparedStatement.java:1320)\n        at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdate(ClientPreparedStatement.java:994)\n</code></pre>\n"},{"tags":["java","javadoc"],"comments":[{"owner":{"account_id":2803497,"reputation":25202,"user_id":2411243,"display_name":"Zabuzard"},"score":0,"creation_date":1671264732,"post_id":74832608,"comment_id":132065981,"body_markdown":"Does your class include an import of the exception? Otherwise you have to fully classify it. If you dont know what I mean, please share the full code of the `InitialHandlerAndStorer` file.","body":"Does your class include an import of the exception? Otherwise you have to fully classify it. If you dont know what I mean, please share the full code of the <code>InitialHandlerAndStorer</code> file."},{"owner":{"account_id":16683494,"reputation":126,"user_id":12058001,"display_name":"Aitsuken"},"score":0,"creation_date":1671265609,"post_id":74832608,"comment_id":132066062,"body_markdown":"Yessir, I have it imported, and the exception is recognized within the code but somehow not  by the javadoc","body":"Yessir, I have it imported, and the exception is recognized within the code but somehow not  by the javadoc"},{"owner":{"account_id":2803497,"reputation":25202,"user_id":2411243,"display_name":"Zabuzard"},"score":0,"creation_date":1671266151,"post_id":74832608,"comment_id":132066131,"body_markdown":"Does it work for javadoc when you fully qualify it? I.e. `@throws pl.sydygaliev.java_journey.model.exception.WrongFormatException when there is unacceptable character for the keyword`?","body":"Does it work for javadoc when you fully qualify it? I.e. <code>@throws pl.sydygaliev.java_journey.model.exception.WrongFormatExcept&zwnj;&#8203;ion when there is unacceptable character for the keyword</code>?"},{"owner":{"account_id":2803497,"reputation":25202,"user_id":2411243,"display_name":"Zabuzard"},"score":1,"creation_date":1671266212,"post_id":74832608,"comment_id":132066141,"body_markdown":"How do you run the javadoc command? Maybe it is missing the file in its classpath arguments etc","body":"How do you run the javadoc command? Maybe it is missing the file in its classpath arguments etc"},{"owner":{"account_id":16683494,"reputation":126,"user_id":12058001,"display_name":"Aitsuken"},"score":0,"creation_date":1671266571,"post_id":74832608,"comment_id":132066171,"body_markdown":"Javadoc works fine, I generate it in netbeans, in the run section. If I remove throws tag, javadoc is generated without problems","body":"Javadoc works fine, I generate it in netbeans, in the run section. If I remove throws tag, javadoc is generated without problems"},{"owner":{"account_id":16683494,"reputation":126,"user_id":12058001,"display_name":"Aitsuken"},"score":0,"creation_date":1671266654,"post_id":74832608,"comment_id":132066180,"body_markdown":"I tried to fully qualify and it still has the same error complain","body":"I tried to fully qualify and it still has the same error complain"}],"answers":[{"tags":[],"owner":{"account_id":16683494,"reputation":126,"user_id":12058001,"display_name":"Aitsuken"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1671276438,"creation_date":1671276438,"answer_id":74833703,"question_id":74832608,"body_markdown":"It appears that the method must have the following syntax:\r\n\r\n    public String handleKeyword(String keyword) throws WrongFormatException{\r\n    ...\r\n\r\nBut since I had try and catch block within the function I couldn&#39;t create the above syntax. I removed try and catch block in the method and added the try and catch block elsewhere, where method was called","title":"Custom exception, Javadoc unknown throwable exception","body":"<p>It appears that the method must have the following syntax:</p>\n<pre><code>public String handleKeyword(String keyword) throws WrongFormatException{\n...\n</code></pre>\n<p>But since I had try and catch block within the function I couldn't create the above syntax. I removed try and catch block in the method and added the try and catch block elsewhere, where method was called</p>\n"}],"owner":{"account_id":16683494,"reputation":126,"user_id":12058001,"display_name":"Aitsuken"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":96,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74833703,"answer_count":1,"score":0,"last_activity_date":1671276438,"creation_date":1671263982,"question_id":74832608,"body_markdown":"I have trouble with generating Javadoc, it complains \r\n\r\n&quot;Uknown throwable @throws pl.sydygaliev.java_journey.model.exception.WrongFormatException&quot;\r\n\r\nHere&#39;s the body of javadoc comment\r\n\r\n    /**\r\n     * The method that is used to handle given keyword.\r\n     * If keyword has illegal values, it returns null.\r\n     * @param keyword is used for keyword validation\r\n     * @return keyword with given value or null if keyword\r\n     * has unacceptable characters\r\n     * @throws WrongFormatException when there is unacceptable \r\n     * character for the keyword\r\n     */\r\n    public String handleKeyword(String keyword) {\r\n\r\nJavadoc\r\nBody of the custom exception\r\n\r\n    package pl.sydygaliev.java_journey.model.exception;\r\n    \r\n    \r\n    public class WrongFormatException extends Exception{\r\n    }\r\n\r\nInitialHandlerAndStorer class where javadoc trouble occured and subpackage of custom exceptions within that package\r\n[![InitialHandlerAndStorer class where javadoc trouble occured][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/VWYno.png","title":"Custom exception, Javadoc unknown throwable exception","body":"<p>I have trouble with generating Javadoc, it complains</p>\n<p>&quot;Uknown throwable @throws pl.sydygaliev.java_journey.model.exception.WrongFormatException&quot;</p>\n<p>Here's the body of javadoc comment</p>\n<pre><code>/**\n * The method that is used to handle given keyword.\n * If keyword has illegal values, it returns null.\n * @param keyword is used for keyword validation\n * @return keyword with given value or null if keyword\n * has unacceptable characters\n * @throws WrongFormatException when there is unacceptable \n * character for the keyword\n */\npublic String handleKeyword(String keyword) {\n</code></pre>\n<p>Javadoc\nBody of the custom exception</p>\n<pre><code>package pl.sydygaliev.java_journey.model.exception;\n\n\npublic class WrongFormatException extends Exception{\n}\n</code></pre>\n<p>InitialHandlerAndStorer class where javadoc trouble occured and subpackage of custom exceptions within that package\n<a href=\"https://i.stack.imgur.com/VWYno.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VWYno.png\" alt=\"InitialHandlerAndStorer class where javadoc trouble occured\" /></a></p>\n"},{"tags":["java","spring-mvc","model-view-controller"],"answers":[{"tags":[],"owner":{"account_id":19135454,"reputation":17,"user_id":13976520,"display_name":"Mike"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671033713,"creation_date":1671033713,"answer_id":74801007,"question_id":74694006,"body_markdown":"Use the meta tag within the head element of your HTML as explained here:  https://www.geeksforgeeks.org/how-to-automatic-refresh-a-web-page-in-fixed-time/","title":"Refresh data from database constantly","body":"<p>Use the meta tag within the head element of your HTML as explained here:  <a href=\"https://www.geeksforgeeks.org/how-to-automatic-refresh-a-web-page-in-fixed-time/\" rel=\"nofollow noreferrer\">https://www.geeksforgeeks.org/how-to-automatic-refresh-a-web-page-in-fixed-time/</a></p>\n"},{"tags":[],"owner":{"account_id":12695732,"reputation":3368,"user_id":9224219,"display_name":"Datz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671191630,"creation_date":1671191630,"answer_id":74824094,"question_id":74694006,"body_markdown":"You did not explain, what your requirements exactly are. Does the data really change every 5 seconds? Or do you not want to miss one update?\r\n\r\nTo refresh your web-page use this head tag:\r\n\r\n```\r\n&lt;head&gt;\r\n  &lt;title&gt;Product Manager&lt;/title&gt;\r\n  &lt;meta charset=&quot;utf-8&quot;/&gt;\r\n&#160;&#160;&lt;meta http-equiv=&quot;refresh&quot; content=&quot;5&quot;&gt;\r\n&lt;/head&gt;\r\n```\r\n\r\nBut if the data only changes from time to time, I would use pushing (instead of pulling).\r\n\r\nFor example with HTML5 server-sent-events: \r\nhttps://www.w3schools.com/html/html5_serversentevents.asp\r\n\r\nYou can query the db table with a spring boot scheduler every 5 seconds, or you can use messaging on the server side whenever the data changes. (Which I would prefer. This could reduce the CPU load and bandwidth and be more sustainable.)","title":"Refresh data from database constantly","body":"<p>You did not explain, what your requirements exactly are. Does the data really change every 5 seconds? Or do you not want to miss one update?</p>\n<p>To refresh your web-page use this head tag:</p>\n<pre><code>&lt;head&gt;\n  &lt;title&gt;Product Manager&lt;/title&gt;\n  &lt;meta charset=&quot;utf-8&quot;/&gt;\n  &lt;meta http-equiv=&quot;refresh&quot; content=&quot;5&quot;&gt;\n&lt;/head&gt;\n</code></pre>\n<p>But if the data only changes from time to time, I would use pushing (instead of pulling).</p>\n<p>For example with HTML5 server-sent-events:\n<a href=\"https://www.w3schools.com/html/html5_serversentevents.asp\" rel=\"nofollow noreferrer\">https://www.w3schools.com/html/html5_serversentevents.asp</a></p>\n<p>You can query the db table with a spring boot scheduler every 5 seconds, or you can use messaging on the server side whenever the data changes. (Which I would prefer. This could reduce the CPU load and bandwidth and be more sustainable.)</p>\n"},{"tags":[],"owner":{"account_id":20251223,"reputation":146,"user_id":16662014,"display_name":"Abu Hurairah"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671263140,"creation_date":1671263140,"answer_id":74832538,"question_id":74694006,"body_markdown":"Make a while loop that sleeps for 5 seconds and then fetches data from the database and updates the DOM. Do it in javascript. ","title":"Refresh data from database constantly","body":"<p>Make a while loop that sleeps for 5 seconds and then fetches data from the database and updates the DOM. Do it in javascript.</p>\n"},{"tags":[],"owner":{"account_id":7235145,"reputation":1198,"user_id":5520677,"display_name":"Radu M"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671269754,"creation_date":1671269754,"answer_id":74833073,"question_id":74694006,"body_markdown":"I think that what you try to do, is not possible without a different architecture, because you have here a server side rendered page which does not use websockets or something similar.\r\n\r\nIn a &quot;modern world&quot;, you would have a Websocket Client connected to your Backend, which gets informed in real time, when there are changes to your Database Table. (regardless of the reactive way you know that the data changed or by using &quot;primitive polling to your database table&quot; in your backend and then pushing the changes on the websocket)\r\n\r\nBut if you want to leave it the way you have it now, I see only two options:\r\n1. Try some AJAX, that updates this DOM Element periodically\r\n2. Refresh the Page with JavaScript every X seconds, which in turn will reload the data, by performing the Rest API Call again","title":"Refresh data from database constantly","body":"<p>I think that what you try to do, is not possible without a different architecture, because you have here a server side rendered page which does not use websockets or something similar.</p>\n<p>In a &quot;modern world&quot;, you would have a Websocket Client connected to your Backend, which gets informed in real time, when there are changes to your Database Table. (regardless of the reactive way you know that the data changed or by using &quot;primitive polling to your database table&quot; in your backend and then pushing the changes on the websocket)</p>\n<p>But if you want to leave it the way you have it now, I see only two options:</p>\n<ol>\n<li>Try some AJAX, that updates this DOM Element periodically</li>\n<li>Refresh the Page with JavaScript every X seconds, which in turn will reload the data, by performing the Rest API Call again</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":1130138,"reputation":2050,"user_id":1116434,"accept_rate":60,"display_name":"Anass Kartit"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1671276285,"creation_date":1671274598,"answer_id":74833539,"question_id":74694006,"body_markdown":"While you can still use javascript setInterval function to call the api like this:\r\n\r\n    setInterval(function() {\r\n      $.ajax({\r\n        url: &#39;http://yourserver.com/getproductlist&#39;,\r\n        type: &#39;GET&#39;,\r\n        success: function(data) {\r\n          // your code to refresh the table here\r\n        }\r\n      });\r\n    }, 5000);\r\n\r\nYour will : \r\n1. overloading the server, imagine thousands of people refreshing every 5 seconds.\r\n2. risk of displaying old data: data will be 5 seconds old (example product can be out of stock).\r\n\r\nA better choice would be to use real time solution using websocket and messaging using something like RabbitMQ:\r\n\r\nRabbitMQ will send updates to the client when the data in the database is changed (trigger could help). This way, the client only receives updates when there is new data, rather than constantly polling the server for updates.\r\nif you are hosting your solution in azure you can use azure storage queues or service bus, in AWS you can use SQS.\r\na similar question is here: https://stackoverflow.com/questions/25947790/real-time-updates-from-database-using-jsf-java-ee","title":"Refresh data from database constantly","body":"<p>While you can still use javascript setInterval function to call the api like this:</p>\n<pre><code>setInterval(function() {\n  $.ajax({\n    url: 'http://yourserver.com/getproductlist',\n    type: 'GET',\n    success: function(data) {\n      // your code to refresh the table here\n    }\n  });\n}, 5000);\n</code></pre>\n<p>Your will :</p>\n<ol>\n<li>overloading the server, imagine thousands of people refreshing every 5 seconds.</li>\n<li>risk of displaying old data: data will be 5 seconds old (example product can be out of stock).</li>\n</ol>\n<p>A better choice would be to use real time solution using websocket and messaging using something like RabbitMQ:</p>\n<p>RabbitMQ will send updates to the client when the data in the database is changed (trigger could help). This way, the client only receives updates when there is new data, rather than constantly polling the server for updates.\nif you are hosting your solution in azure you can use azure storage queues or service bus, in AWS you can use SQS.\na similar question is here: <a href=\"https://stackoverflow.com/questions/25947790/real-time-updates-from-database-using-jsf-java-ee\">Real time updates from database using JSF/Java EE</a></p>\n"}],"owner":{"account_id":965625,"reputation":1524,"user_id":1103606,"accept_rate":51,"display_name":"Peter Penzov"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":460,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":5,"score":2,"last_activity_date":1671276285,"creation_date":1670271885,"question_id":74694006,"body_markdown":"I have this Spring VMC table which I would like to display:\r\n\r\n    @Controller\r\n    public class FileImportsController {\r\n    \r\n        private EntityImportRequestsService entityImportRequestsService;\r\n    \r\n        @Autowired\r\n        public FileImportsController(EntityImportRequestsService entityImportRequestsService) {\r\n            this.entityImportRequestsService = entityImportRequestsService;\r\n        }\r\n    \r\n        @GetMapping(&quot;/imported_files&quot;)\r\n        public String viewHomePage(Model model) {\r\n            List&lt;EntityImportRequestsTable&gt; listProducts = entityImportRequestsService.findAll();\r\n            model.addAttribute(&quot;listProducts&quot;, listProducts);\r\n            return &quot;index&quot;;\r\n        }\r\n    \r\n    }\r\n\r\npage:\r\n\r\n    &lt;!DOCTYPE html&gt;\r\n    &lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot;\r\n          xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;\r\n    &lt;head&gt;\r\n      &lt;meta charset=&quot;utf-8&quot;/&gt;\r\n      &lt;title&gt;Product Manager&lt;/title&gt;\r\n    &lt;/head&gt;\r\n    &lt;body&gt;\r\n    &lt;div align=&quot;center&quot;&gt;\r\n      &lt;h1&gt;Product List&lt;/h1&gt;\r\n      &lt;table border=&quot;1&quot; cellpadding=&quot;10&quot;&gt;\r\n        &lt;thead&gt;\r\n        &lt;tr&gt;\r\n          &lt;th&gt;Product ID&lt;/th&gt;\r\n          &lt;th&gt;Name&lt;/th&gt;\r\n          &lt;th&gt;Brand&lt;/th&gt;\r\n          &lt;th&gt;Made In&lt;/th&gt;\r\n          &lt;th&gt;Price&lt;/th&gt;\r\n        &lt;/tr&gt;\r\n        &lt;/thead&gt;\r\n        &lt;tbody&gt;\r\n        &lt;tr th:each=&quot;product : ${listProducts}&quot;&gt;\r\n          &lt;td th:text=&quot;${product.requestId}&quot;&gt;Product ID&lt;/td&gt;\r\n          &lt;td th:text=&quot;${product.name}&quot;&gt;Name&lt;/td&gt;\r\n          &lt;td th:text=&quot;${product.brand}&quot;&gt;Brand&lt;/td&gt;\r\n          &lt;td th:text=&quot;${product.madein}&quot;&gt;Made in&lt;/td&gt;\r\n          &lt;td th:text=&quot;${product.price}&quot;&gt;Price&lt;/td&gt;\r\n        &lt;/tr&gt;\r\n        &lt;/tbody&gt;\r\n      &lt;/table&gt;\r\n    &lt;/div&gt;\r\n    &lt;/body&gt;\r\n    &lt;/html&gt;\r\n\r\nHow I can pull database table data every 5 seconds and refresh the table data?","title":"Refresh data from database constantly","body":"<p>I have this Spring VMC table which I would like to display:</p>\n<pre><code>@Controller\npublic class FileImportsController {\n\n    private EntityImportRequestsService entityImportRequestsService;\n\n    @Autowired\n    public FileImportsController(EntityImportRequestsService entityImportRequestsService) {\n        this.entityImportRequestsService = entityImportRequestsService;\n    }\n\n    @GetMapping(&quot;/imported_files&quot;)\n    public String viewHomePage(Model model) {\n        List&lt;EntityImportRequestsTable&gt; listProducts = entityImportRequestsService.findAll();\n        model.addAttribute(&quot;listProducts&quot;, listProducts);\n        return &quot;index&quot;;\n    }\n\n}\n</code></pre>\n<p>page:</p>\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot;\n      xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;\n&lt;head&gt;\n  &lt;meta charset=&quot;utf-8&quot;/&gt;\n  &lt;title&gt;Product Manager&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;div align=&quot;center&quot;&gt;\n  &lt;h1&gt;Product List&lt;/h1&gt;\n  &lt;table border=&quot;1&quot; cellpadding=&quot;10&quot;&gt;\n    &lt;thead&gt;\n    &lt;tr&gt;\n      &lt;th&gt;Product ID&lt;/th&gt;\n      &lt;th&gt;Name&lt;/th&gt;\n      &lt;th&gt;Brand&lt;/th&gt;\n      &lt;th&gt;Made In&lt;/th&gt;\n      &lt;th&gt;Price&lt;/th&gt;\n    &lt;/tr&gt;\n    &lt;/thead&gt;\n    &lt;tbody&gt;\n    &lt;tr th:each=&quot;product : ${listProducts}&quot;&gt;\n      &lt;td th:text=&quot;${product.requestId}&quot;&gt;Product ID&lt;/td&gt;\n      &lt;td th:text=&quot;${product.name}&quot;&gt;Name&lt;/td&gt;\n      &lt;td th:text=&quot;${product.brand}&quot;&gt;Brand&lt;/td&gt;\n      &lt;td th:text=&quot;${product.madein}&quot;&gt;Made in&lt;/td&gt;\n      &lt;td th:text=&quot;${product.price}&quot;&gt;Price&lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;/tbody&gt;\n  &lt;/table&gt;\n&lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>How I can pull database table data every 5 seconds and refresh the table data?</p>\n"},{"tags":["javascript","java","arrays","datetime","filter"],"comments":[{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1671404245,"post_id":74827900,"comment_id":132086652,"body_markdown":"Why the &quot;javascript&quot; tag? Java is not JavaScript.","body":"Why the &quot;javascript&quot; tag? Java is not JavaScript."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1671404310,"post_id":74827900,"comment_id":132086665,"body_markdown":"Never use either `Date` class bundled with Java. Both are terribly flawed. Both are legacy, supplanted years ago by the modern *java.time* classes defined in JSR 310.","body":"Never use either <code>Date</code> class bundled with Java. Both are terribly flawed. Both are legacy, supplanted years ago by the modern <i>java.time</i> classes defined in JSR 310."},{"owner":{"account_id":25674680,"reputation":11,"user_id":19438326,"display_name":"Laustrup"},"score":0,"creation_date":1671442449,"post_id":74827900,"comment_id":132092336,"body_markdown":"I use JavaScript tags, because it is JavaScript. I&#39;m just fetching an event object from an Java application. Found out from another that Date is outdated, so that might be true.","body":"I use JavaScript tags, because it is JavaScript. I&#39;m just fetching an event object from an Java application. Found out from another that Date is outdated, so that might be true."}],"answers":[{"tags":[],"owner":{"account_id":2179728,"reputation":73047,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1671212664,"creation_date":1671212337,"answer_id":74827974,"question_id":74827900,"body_markdown":"&gt; The Java application open doors are of LocalDateTime\r\n\r\nNo, this is not correct. [`LocalDateTime#now`](https://docs.oracle.com/javase/8/docs/api/java/time/LocalDateTime.html#now--) returns the current date-time from the system clock in the default time-zone. You should use [`Instant#now`](https://docs.oracle.com/javase/8/docs/api/java/time/Instant.html#now--). An `Instant` is an instantaneous point on the time-line.\r\n\r\nYou can use `Instant.now().toEpochMilli()` to get the number of milliseconds from the epoch of 1970-01-01T00:00:00Z. \r\n\r\nLearn more about the modern Date-Time API from **[Trail: Date Time](https://docs.oracle.com/javase/tutorial/datetime/index.html)**.","title":"JavaScript current date is before other datetime","body":"<blockquote>\n<p>The Java application open doors are of LocalDateTime</p>\n</blockquote>\n<p>No, this is not correct. <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/LocalDateTime.html#now--\" rel=\"nofollow noreferrer\"><code>LocalDateTime#now</code></a> returns the current date-time from the system clock in the default time-zone. You should use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/Instant.html#now--\" rel=\"nofollow noreferrer\"><code>Instant#now</code></a>. An <code>Instant</code> is an instantaneous point on the time-line.</p>\n<p>You can use <code>Instant.now().toEpochMilli()</code> to get the number of milliseconds from the epoch of 1970-01-01T00:00:00Z.</p>\n<p>Learn more about the modern Date-Time API from <strong><a href=\"https://docs.oracle.com/javase/tutorial/datetime/index.html\" rel=\"nofollow noreferrer\">Trail: Date Time</a></strong>.</p>\n"}],"owner":{"account_id":25674680,"reputation":11,"user_id":19438326,"display_name":"Laustrup"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1671276162,"creation_date":1671211905,"question_id":74827900,"body_markdown":"I am fetching some event objects from a Java application and wish to filter them, so they only consists of events that are having open doors (start time) after the current time.\r\nThe Java application open doors are of LocalDateTime\r\n\r\nSo far I found this as a opportunity:\r\n\r\n    events.filter((event) =&gt; {\r\n         return Date.now() &lt;= Date.parse((event._openDoors).toString())\r\n    });\r\n\r\nIs this correctly and if so is there an smarter way?","title":"JavaScript current date is before other datetime","body":"<p>I am fetching some event objects from a Java application and wish to filter them, so they only consists of events that are having open doors (start time) after the current time.\nThe Java application open doors are of LocalDateTime</p>\n<p>So far I found this as a opportunity:</p>\n<pre><code>events.filter((event) =&gt; {\n     return Date.now() &lt;= Date.parse((event._openDoors).toString())\n});\n</code></pre>\n<p>Is this correctly and if so is there an smarter way?</p>\n"},{"tags":["java","loops","for-loop","initialization","user-input"],"comments":[{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":1,"creation_date":1671236689,"post_id":74830653,"comment_id":132063355,"body_markdown":"The problem is not the reassignment, it’s that integer division of `10/100` is 0.","body":"The problem is not the reassignment, it’s that integer division of <code>10&#47;100</code> is 0."},{"owner":{"account_id":27277138,"reputation":3,"user_id":20797573,"display_name":"Gijon-ui"},"score":0,"creation_date":1671261325,"post_id":74830653,"comment_id":132065594,"body_markdown":"Do you mean the data type? If that&#39;s what you mean, I tried making it a double, but the code said the data types aren&#39;t compatible or something along those lines. And amount has to be an integer.","body":"Do you mean the data type? If that&#39;s what you mean, I tried making it a double, but the code said the data types aren&#39;t compatible or something along those lines. And amount has to be an integer."}],"answers":[{"tags":[],"owner":{"account_id":26879624,"reputation":386,"user_id":20460294,"display_name":"Anon"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1671276137,"creation_date":1671276137,"answer_id":74833680,"question_id":74830653,"body_markdown":"You need mod and sub to be floats then cast the result to int on the amount\r\n\r\n        Scanner scanner = new Scanner(System.in);\r\n        int amount = scanner.nextInt();\r\n        float mod = 10F / 100F;\r\n        for (int x=1; x&lt;=3; x++){\r\n            float sub = amount*mod;\r\n            amount = (int) (amount-sub);\r\n        }\r\n        System.out.println(amount);","title":"How to use a new value for user input in a loop, e.g. reducing the value of the user input and using the new value in the next iteration","body":"<p>You need mod and sub to be floats then cast the result to int on the amount</p>\n<pre><code>    Scanner scanner = new Scanner(System.in);\n    int amount = scanner.nextInt();\n    float mod = 10F / 100F;\n    for (int x=1; x&lt;=3; x++){\n        float sub = amount*mod;\n        amount = (int) (amount-sub);\n    }\n    System.out.println(amount);\n</code></pre>\n"}],"owner":{"account_id":27277138,"reputation":3,"user_id":20797573,"display_name":"Gijon-ui"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":42,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1671278713,"accepted_answer_id":74833680,"answer_count":1,"score":-1,"last_activity_date":1671276137,"creation_date":1671232548,"question_id":74830653,"body_markdown":"I need to re-initialize a user input in order to use it for the next iteration in a for loop...assuming for loop is the best choice for this. The loop is supposed to run three times and print out the final value gotten from the three iterations. In each iteration, it takes 10 percent of the amount entered by the user and subtracts it from the original amount. It then takes this new value and uses it in place of the initial value in the next iteration. However, instead of taking this new value, it retains the initial value and uses it again. I&#39;m clearly doing something wrong, but I don&#39;t know what it is. \r\n\r\n```\r\nimport java.util.Scanner;\r\n\r\npublic class Program {\r\n\tpublic static void main(String[] args) {\r\n\t\tScanner scanner = new Scanner(System.in);\r\n\t\tint amount = scanner.nextInt();\r\n\t\tfor (int x=1; x&lt;=3; x++){\r\n\t\t\tint mod = (10/100);\r\n\t\t\tint sub = amount*mod;\r\n    \t\tamount = amount-sub; // *** line 10\t***\r\n\t\t}\r\n\t\tSystem.out.println(amount);\r\n\t}\r\n}\r\n```\r\nThis is the attempt I made at the code. The line I labeled as line 10 is my attempt at re-initializing the value &quot;amount&quot;.","title":"How to use a new value for user input in a loop, e.g. reducing the value of the user input and using the new value in the next iteration","body":"<p>I need to re-initialize a user input in order to use it for the next iteration in a for loop...assuming for loop is the best choice for this. The loop is supposed to run three times and print out the final value gotten from the three iterations. In each iteration, it takes 10 percent of the amount entered by the user and subtracts it from the original amount. It then takes this new value and uses it in place of the initial value in the next iteration. However, instead of taking this new value, it retains the initial value and uses it again. I'm clearly doing something wrong, but I don't know what it is.</p>\n<pre><code>import java.util.Scanner;\n\npublic class Program {\n    public static void main(String[] args) {\n        Scanner scanner = new Scanner(System.in);\n        int amount = scanner.nextInt();\n        for (int x=1; x&lt;=3; x++){\n            int mod = (10/100);\n            int sub = amount*mod;\n            amount = amount-sub; // *** line 10 ***\n        }\n        System.out.println(amount);\n    }\n}\n</code></pre>\n<p>This is the attempt I made at the code. The line I labeled as line 10 is my attempt at re-initializing the value &quot;amount&quot;.</p>\n"},{"tags":["java","hibernate","postgresql","orm","sequence"],"answers":[{"tags":[],"owner":{"account_id":6179062,"reputation":604,"user_id":4815139,"display_name":"valery.barysok"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1451478985,"creation_date":1451478985,"answer_id":34529706,"question_id":34528450,"body_markdown":"In nutshell, you can use multiple sequence generators for one entity but **for primary keys only** (composite primary key).\r\n\r\nFrom SequenceGenerator documentation:\r\n\r\n&gt; Defines a primary key generator that may be referenced by name when a generator element is specified for the GeneratedValue annotation. A sequence generator may be specified on the entity class or on the primary key field or property. The scope of the generator name is global to the persistence unit (across all generator types).\r\n\r\n\r\nCode example:\r\n\r\n    public class TestPK implements Serializable {\r\n\r\n        private Integer test1;\r\n\r\n        private Integer test2;\r\n\r\n        ...\r\n    }\r\n\r\n    @Entity\r\n    @IdClass(TestPK.class)\r\n    public class Test implements Serializable {\r\n\r\n        private static final long serialVersionUID = 1L;\r\n\r\n        @Id\r\n        @SequenceGenerator(name = &quot;seq_test1&quot;, sequenceName = &quot;seq_test1&quot;, allocationSize = 7)\r\n        @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;seq_test1&quot;)\r\n        @Column(name = &quot;test1&quot;, unique = true, nullable = false)\r\n        private Integer test1;\r\n\r\n        @Id\r\n        @Column(name = &quot;test2&quot;, nullable = false, unique = true)\r\n        @SequenceGenerator(name = &quot;seq_test2&quot;, sequenceName = &quot;seq_test2&quot;, allocationSize = 7)\r\n        @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;seq_test2&quot;)\r\n        private Integer test2;\r\n\r\n        ...\r\n\r\n        @Override\r\n        public String toString() {\r\n            return &quot;Test{&quot; +\r\n                    &quot;test1=&quot; + test1 +\r\n                    &quot;, test2=&quot; + test2 +\r\n                    &#39;}&#39;;\r\n        }\r\n    }\r\n\r\n    public interface TestRepository extends Repository&lt;Test, String&gt; {\r\n\r\n        Page&lt;Test&gt; findAll(Pageable pageable);\r\n\r\n        void save(Test test);\r\n    }\r\n\r\n    @SpringBootApplication\r\n    public class Application implements CommandLineRunner {\r\n\r\n        @Autowired\r\n        private TestRepository testRepository;\r\n\r\n        @Override\r\n        public void run(String... args) throws Exception {\r\n            testRepository.save(new Test());\r\n            Page&lt;Test&gt; all = testRepository.findAll(null);\r\n            System.out.println(all.iterator().next());\r\n        }\r\n\r\n        public static void main(String[] args) {\r\n    \t\tSpringApplication.run(Application.class, args);\r\n        }\r\n    }","title":"Multiple Hibernate sequence generators for one entity with PostgreSQL","body":"<p>In nutshell, you can use multiple sequence generators for one entity but <strong>for primary keys only</strong> (composite primary key).</p>\n\n<p>From SequenceGenerator documentation:</p>\n\n<blockquote>\n  <p>Defines a primary key generator that may be referenced by name when a generator element is specified for the GeneratedValue annotation. A sequence generator may be specified on the entity class or on the primary key field or property. The scope of the generator name is global to the persistence unit (across all generator types).</p>\n</blockquote>\n\n<p>Code example:</p>\n\n<pre><code>public class TestPK implements Serializable {\n\n    private Integer test1;\n\n    private Integer test2;\n\n    ...\n}\n\n@Entity\n@IdClass(TestPK.class)\npublic class Test implements Serializable {\n\n    private static final long serialVersionUID = 1L;\n\n    @Id\n    @SequenceGenerator(name = \"seq_test1\", sequenceName = \"seq_test1\", allocationSize = 7)\n    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = \"seq_test1\")\n    @Column(name = \"test1\", unique = true, nullable = false)\n    private Integer test1;\n\n    @Id\n    @Column(name = \"test2\", nullable = false, unique = true)\n    @SequenceGenerator(name = \"seq_test2\", sequenceName = \"seq_test2\", allocationSize = 7)\n    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = \"seq_test2\")\n    private Integer test2;\n\n    ...\n\n    @Override\n    public String toString() {\n        return \"Test{\" +\n                \"test1=\" + test1 +\n                \", test2=\" + test2 +\n                '}';\n    }\n}\n\npublic interface TestRepository extends Repository&lt;Test, String&gt; {\n\n    Page&lt;Test&gt; findAll(Pageable pageable);\n\n    void save(Test test);\n}\n\n@SpringBootApplication\npublic class Application implements CommandLineRunner {\n\n    @Autowired\n    private TestRepository testRepository;\n\n    @Override\n    public void run(String... args) throws Exception {\n        testRepository.save(new Test());\n        Page&lt;Test&gt; all = testRepository.findAll(null);\n        System.out.println(all.iterator().next());\n    }\n\n    public static void main(String[] args) {\n        SpringApplication.run(Application.class, args);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1012936,"reputation":145168,"user_id":1025118,"accept_rate":100,"display_name":"Vlad Mihalcea"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1451481709,"creation_date":1451481709,"answer_id":34530385,"question_id":34528450,"body_markdown":"No you can not. The generator are applicable for identifier columns only.\r\n\r\nMake sure you create this sequence with a script (e.g. `hibernate.hbm2ddl.import_files`):\r\n\r\n    create sequence subscription_code_1_seq start 1 increment 7\r\n\r\nThen use a mapping like this:\r\n\r\n    @Id\r\n    @SequenceGenerator(\r\n            name=&quot;subscription_id_seq&quot;,\r\n            sequenceName=&quot;subscription_id_seq&quot;,\r\n            allocationSize=7\r\n    )\r\n    @GeneratedValue(\r\n            strategy=GenerationType.SEQUENCE,\r\n            generator=&quot;subscription_id_seq&quot;\r\n    )\r\n    @Column(unique=true, nullable=false)\r\n    private Integer id;\r\n\r\n    @Column(\r\n            name=&quot;code&quot;,\r\n            nullable=false,\r\n            unique=true,\r\n            insertable = false,\r\n            updatable = false,\r\n            columnDefinition = &quot;BIGINT DEFAULT nextval(&#39;subscription_code_1_seq&#39;)&quot;\r\n    )\r\n    @Generated(GenerationTime.INSERT)\r\n    private Integer code;","title":"Multiple Hibernate sequence generators for one entity with PostgreSQL","body":"<p>No you can not. The generator are applicable for identifier columns only.</p>\n\n<p>Make sure you create this sequence with a script (e.g. <code>hibernate.hbm2ddl.import_files</code>):</p>\n\n<pre><code>create sequence subscription_code_1_seq start 1 increment 7\n</code></pre>\n\n<p>Then use a mapping like this:</p>\n\n<pre><code>@Id\n@SequenceGenerator(\n        name=\"subscription_id_seq\",\n        sequenceName=\"subscription_id_seq\",\n        allocationSize=7\n)\n@GeneratedValue(\n        strategy=GenerationType.SEQUENCE,\n        generator=\"subscription_id_seq\"\n)\n@Column(unique=true, nullable=false)\nprivate Integer id;\n\n@Column(\n        name=\"code\",\n        nullable=false,\n        unique=true,\n        insertable = false,\n        updatable = false,\n        columnDefinition = \"BIGINT DEFAULT nextval('subscription_code_1_seq')\"\n)\n@Generated(GenerationTime.INSERT)\nprivate Integer code;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4247506,"reputation":1690,"user_id":3475722,"accept_rate":83,"display_name":"Greg"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671276032,"creation_date":1671276032,"answer_id":74833674,"question_id":34528450,"body_markdown":"An alternative solution would be to use @GeneratorType.\r\nWith this annotation, you can provide a custom implementation during insert and update of the hosting entity. In this case, adding a sequence\r\n\r\nFirst create this sequence and add it during the creation or altering of the table: \r\n\r\n\r\n    CREATE SEQUENCE project_code_seq INCREMENT 1 START 1;\r\n    ALTER TABLE project\r\n        ADD COLUMN key bigint NOT NULL DEFAULT nextval(&#39;project_code_seq&#39;);\r\n\r\nCreate a class that implements the ValueGenerator:\r\n\r\n    public class ProjectCodeGenerator implements ValueGenerator&lt;Long&gt; {\r\n    \r\n        private static final String SELECT_NEXTVAL = &quot;select nextval(&#39;project_code_seq&#39;)&quot;;\r\n    \r\n        @Override\r\n        public Long generateValue(Session session, Object object) {\r\n            if (object instanceof ProjectEntity project) {\r\n    \r\n                    var result = (BigInteger) session.createNativeQuery(SELECT_NEXTVAL)\r\n                            .setHibernateFlushMode(\r\n                                    FlushMode.COMMIT).getSingleResult();\r\n                    return result.longValue();\r\n                    \r\n            } else {\r\n                throw new RuntimeException(&quot;Can only be used for &quot; + ProjectEntity.class);\r\n            }\r\n        }\r\n    \r\n    }\r\n\r\n\r\nThen on the entity you can add the @GeneratorType annotation:\r\n\r\n    @GeneratorType(type = ProjectCodeGenerator.class, when = GenerationTime.INSERT)\r\n    private Long code;\r\n\r\n\r\nNote that the ProjectCodeGenerator can be tuned to whatever you desire and more logic can be added.","title":"Multiple Hibernate sequence generators for one entity with PostgreSQL","body":"<p>An alternative solution would be to use @GeneratorType.\nWith this annotation, you can provide a custom implementation during insert and update of the hosting entity. In this case, adding a sequence</p>\n<p>First create this sequence and add it during the creation or altering of the table:</p>\n<pre><code>CREATE SEQUENCE project_code_seq INCREMENT 1 START 1;\nALTER TABLE project\n    ADD COLUMN key bigint NOT NULL DEFAULT nextval('project_code_seq');\n</code></pre>\n<p>Create a class that implements the ValueGenerator:</p>\n<pre><code>public class ProjectCodeGenerator implements ValueGenerator&lt;Long&gt; {\n\n    private static final String SELECT_NEXTVAL = &quot;select nextval('project_code_seq')&quot;;\n\n    @Override\n    public Long generateValue(Session session, Object object) {\n        if (object instanceof ProjectEntity project) {\n\n                var result = (BigInteger) session.createNativeQuery(SELECT_NEXTVAL)\n                        .setHibernateFlushMode(\n                                FlushMode.COMMIT).getSingleResult();\n                return result.longValue();\n                \n        } else {\n            throw new RuntimeException(&quot;Can only be used for &quot; + ProjectEntity.class);\n        }\n    }\n\n}\n</code></pre>\n<p>Then on the entity you can add the @GeneratorType annotation:</p>\n<pre><code>@GeneratorType(type = ProjectCodeGenerator.class, when = GenerationTime.INSERT)\nprivate Long code;\n</code></pre>\n<p>Note that the ProjectCodeGenerator can be tuned to whatever you desire and more logic can be added.</p>\n"}],"owner":{"account_id":7548042,"reputation":1536,"user_id":5730424,"display_name":"Deepak"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11526,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":34530385,"answer_count":3,"score":4,"last_activity_date":1671276032,"creation_date":1451474192,"question_id":34528450,"body_markdown":"Can I use Multiple sequence generators for one entity, like\r\n\r\n    @Id\r\n    @SequenceGenerator(name=”subscription_id_seq”,sequenceName=”subscription_id_seq”, allocationSize=7)\r\n    @GeneratedValue(strategy=GenerationType.SEQUENCE, generator=”subscription_id_seq”)\r\n    @Column(unique=true, nullable=false)\r\n    private Integer id\r\n    \r\n    @Column(name=&quot;code&quot;, nullable=false, unique=true )\r\n    @SequenceGenerator(name=&quot;subscription_code_1_seq&quot;,sequenceName=&quot;subscription_code_1_seq&quot;, allocationSize=7)\r\n    @GeneratedValue(strategy=GenerationType.SEQUENCE, generator=&quot;subscription_code_1_seq&quot;)\r\n    private Integer code;","title":"Multiple Hibernate sequence generators for one entity with PostgreSQL","body":"<p>Can I use Multiple sequence generators for one entity, like</p>\n\n<pre><code>@Id\n@SequenceGenerator(name=”subscription_id_seq”,sequenceName=”subscription_id_seq”, allocationSize=7)\n@GeneratedValue(strategy=GenerationType.SEQUENCE, generator=”subscription_id_seq”)\n@Column(unique=true, nullable=false)\nprivate Integer id\n\n@Column(name=\"code\", nullable=false, unique=true )\n@SequenceGenerator(name=\"subscription_code_1_seq\",sequenceName=\"subscription_code_1_seq\", allocationSize=7)\n@GeneratedValue(strategy=GenerationType.SEQUENCE, generator=\"subscription_code_1_seq\")\nprivate Integer code;\n</code></pre>\n"},{"tags":["java","lambda","syntax","java-8"],"comments":[{"owner":{"account_id":7743155,"reputation":55371,"user_id":5862071,"accept_rate":86,"display_name":"Ousmane D."},"score":2,"creation_date":1524762612,"post_id":50048223,"comment_id":87113283,"body_markdown":"For these type of questions you can answer them yourself by simply running it on your favourite IDE.","body":"For these type of questions you can answer them yourself by simply running it on your favourite IDE."}],"answers":[{"tags":[],"owner":{"account_id":2818342,"reputation":299858,"user_id":2422776,"display_name":"Mureinik"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1524761382,"creation_date":1524761382,"answer_id":50048288,"question_id":50048223,"body_markdown":"The second option is correct. But note you could clean the code up even further by using method references:\r\n\r\n    MyInterface myInterface = System.out::println;","title":"How to covert the follow code to lambda expression?","body":"<p>The second option is correct. But note you could clean the code up even further by using method references:</p>\n\n<pre><code>MyInterface myInterface = System.out::println;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6512774,"reputation":7115,"user_id":5039498,"display_name":"Amit Bera"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1524762609,"creation_date":1524761413,"answer_id":50048300,"question_id":50048223,"body_markdown":"    MyInterface myInterface = new MyInterface(message -&gt; message);\r\nThe above line of code gives you compilation error.Howerver your last option is correct.\r\n\r\nYou can use `method reference` or write your own `lambda` expression\r\n\r\n\t\r\n\r\n    MyInterface myInterface = System.out::println; // using method reference\r\nor\r\n\r\n\t\r\n\r\n    MyInterface myInterface = message-&gt; System.out.println(message);","title":"How to covert the follow code to lambda expression?","body":"<pre><code>MyInterface myInterface = new MyInterface(message -&gt; message);\n</code></pre>\n\n<p>The above line of code gives you compilation error.Howerver your last option is correct.</p>\n\n<p>You can use <code>method reference</code> or write your own <code>lambda</code> expression</p>\n\n<pre><code>MyInterface myInterface = System.out::println; // using method reference\n</code></pre>\n\n<p>or</p>\n\n<pre><code>MyInterface myInterface = message-&gt; System.out.println(message);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4325009,"reputation":2727,"user_id":3861128,"accept_rate":71,"display_name":"Abdelghani Roussi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1524779845,"creation_date":1524779845,"answer_id":50052420,"question_id":50048223,"body_markdown":"I&#39;ll add an important points to complete others answers :\r\n\r\n 1. Where can you use lambdas ?\r\n\r\n&gt; You can use a lambda expression in the context of a functional\r\n&gt; interface (In a nutshell, a functional interface is an interface that\r\n&gt; specifies exactly one abstract method)\r\n\r\nSo your interface **`MyInterface`** should be a functional interface.\r\n\r\n 2. The function descriptor.\r\n\r\n&gt; The abstract method in your functional interface is called\r\n&gt; **`function descriptor`**, so in order to assign a lambda expression to a\r\n&gt; Functional interface, the lambda should have the same signature as the\r\n&gt; abstract method\r\n\r\nFor example your interface `MyInterface` receives only lambdas that takes a string parameter and doesn&#39;t return any thing ( void ).\r\n\r\n\r\n----------\r\n\r\n\r\n**Extras** \r\n\r\nThe **`java.util.function`** package contains many Functional interfaces that can help you working and using lambdas and so we can say that your interface is of type Consumer&lt;T&gt;, which is a functional interface that takes an object in input and (consume it) return void, see [Package java.util.function][1]\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/function/package-summary.html","title":"How to covert the follow code to lambda expression?","body":"<p>I'll add an important points to complete others answers :</p>\n\n<ol>\n<li>Where can you use lambdas ?</li>\n</ol>\n\n<blockquote>\n  <p>You can use a lambda expression in the context of a functional\n  interface (In a nutshell, a functional interface is an interface that\n  specifies exactly one abstract method)</p>\n</blockquote>\n\n<p>So your interface <strong><code>MyInterface</code></strong> should be a functional interface.</p>\n\n<ol start=\"2\">\n<li>The function descriptor.</li>\n</ol>\n\n<blockquote>\n  <p>The abstract method in your functional interface is called\n  <strong><code>function descriptor</code></strong>, so in order to assign a lambda expression to a\n  Functional interface, the lambda should have the same signature as the\n  abstract method</p>\n</blockquote>\n\n<p>For example your interface <code>MyInterface</code> receives only lambdas that takes a string parameter and doesn't return any thing ( void ).</p>\n\n<hr>\n\n<p><strong>Extras</strong> </p>\n\n<p>The <strong><code>java.util.function</code></strong> package contains many Functional interfaces that can help you working and using lambdas and so we can say that your interface is of type Consumer, which is a functional interface that takes an object in input and (consume it) return void, see <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/function/package-summary.html\" rel=\"nofollow noreferrer\">Package java.util.function</a></p>\n"}],"owner":{"account_id":12386054,"reputation":69,"user_id":9029457,"display_name":"Andy P."},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":77,"favorite_count":0,"down_vote_count":4,"up_vote_count":1,"accepted_answer_id":50048288,"answer_count":3,"score":-3,"last_activity_date":1671275253,"creation_date":1524761175,"question_id":50048223,"body_markdown":"I&#39;m learning lambda, and I know the 3 steps rule which is:\r\n\r\n1. Removing the method name\r\n2. Removing the parameter types\r\n3. Removing the return statement\r\n\r\n&lt;br/&gt;\r\n\r\n\r\n\t\r\n\r\n    MyInterface myInterface = new MyInterface() \r\n    {\r\n        @Override\r\n        public void printMe(String message) {\r\n            System.out.println(message);\r\n        }\r\n    };\r\n\r\nIs the answer\r\n\r\n    MyInterface myInterface = new MyInterface(message -&gt; message);\r\n\r\nOr\r\n   \r\n    MyInterface myInterface = message -&gt; System.out.println(message);\r\n\r\nOr I maybe all wrong...?","title":"How to covert the follow code to lambda expression?","body":"<p>I'm learning lambda, and I know the 3 steps rule which is:</p>\n\n<ol>\n<li>Removing the method name</li>\n<li>Removing the parameter types</li>\n<li>Removing the return statement</li>\n</ol>\n\n<p><br/></p>\n\n<pre><code>MyInterface myInterface = new MyInterface() \n{\n    @Override\n    public void printMe(String message) {\n        System.out.println(message);\n    }\n};\n</code></pre>\n\n<p>Is the answer</p>\n\n<pre><code>MyInterface myInterface = new MyInterface(message -&gt; message);\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>MyInterface myInterface = message -&gt; System.out.println(message);\n</code></pre>\n\n<p>Or I maybe all wrong...?</p>\n"},{"tags":["java","selenium","selenium-webdriver","xpath","tooltip"],"answers":[{"tags":[],"owner":{"account_id":13823959,"reputation":5465,"user_id":9978746,"display_name":"E.Wiest"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1671274113,"creation_date":1671274113,"answer_id":74833494,"question_id":74833291,"body_markdown":"You could use `normalize-space` with the following XPath :\r\n\r\nIn your browser console :\r\n\r\n    $x(&quot;normalize-space(//div[@class=&#39;tooltip-inner&#39;])&quot;) \r\n\r\nOutput : `Downtime 1.1h`","title":"How to write xpath to combine a text from a tooltip in a case like this?","body":"<p>You could use <code>normalize-space</code> with the following XPath :</p>\n<p>In your browser console :</p>\n<pre><code>$x(&quot;normalize-space(//div[@class='tooltip-inner'])&quot;) \n</code></pre>\n<p>Output : <code>Downtime 1.1h</code></p>\n"}],"owner":{"account_id":24682121,"reputation":75,"user_id":18575723,"display_name":"Jackie M"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74833494,"answer_count":1,"score":0,"last_activity_date":1671274113,"creation_date":1671271988,"question_id":74833291,"body_markdown":"In this element, text is not together in this line:\r\n\r\n    &lt;div class=&quot;tooltip-inner&quot;&gt; Downtime &lt;br _ngcontent-shw-c48=&quot;&quot;&gt; 1.1h &lt;/div&gt;\r\n\r\nBut in console using **xpath**, I want to combine and print the text in single line\r\nlike this: &quot;**Downtime 1.1h**&quot;.","title":"How to write xpath to combine a text from a tooltip in a case like this?","body":"<p>In this element, text is not together in this line:</p>\n<pre><code>&lt;div class=&quot;tooltip-inner&quot;&gt; Downtime &lt;br _ngcontent-shw-c48=&quot;&quot;&gt; 1.1h &lt;/div&gt;\n</code></pre>\n<p>But in console using <strong>xpath</strong>, I want to combine and print the text in single line\nlike this: &quot;<strong>Downtime 1.1h</strong>&quot;.</p>\n"},{"tags":["java","oop","this","superclass"],"comments":[{"owner":{"account_id":27279969,"reputation":11,"user_id":20800012,"display_name":"ahmed alaa"},"score":0,"creation_date":1671267705,"post_id":74832825,"comment_id":132066299,"body_markdown":"/*what output you expect of that*/  public class Student extends Person {\n    public void method1() {\n        System.out.print(&quot;Student 1 &quot;);\n        super.method2();\n        this.method2();\n    }\n    public void method2() {\n        System.out.print(&quot;Student 2 &quot;);\n    }\n}","body":"/*what output you expect of that*/  public class Student extends Person {     public void method1() {         System.out.print(&quot;Student 1 &quot;);         super.method2();         this.method2();     }     public void method2() {         System.out.print(&quot;Student 2 &quot;);     } }"}],"answers":[{"tags":[],"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1671272562,"creation_date":1671269575,"answer_id":74833056,"question_id":74832825,"body_markdown":"You are correct in that `super.xxx()` vs `this.xxx()` has some sort of a &quot;compile time vs runtime&quot; distinction, but it is certainly not that `super.xxx()` is &quot;*run*&quot; at compile time.\r\n\r\nA more accurate wording would be, the method that will be called by a `super.xxx` call is decided at compile time (*statically dispatched*). And the method that will be called by a `this.xxx` call is decided at runtime (*dynamically dispatched*).\r\n\r\nYou can see this by comparing the clauses in the Java Language Specification, in the sections about processing method invocations. The important steps that differs between `super.xxx` and `this.xxx` are (emphasis mine):\r\n\r\n### [Compile-Time Step 1: Determine Type to Search][1]\r\n\r\n&gt;  If the form is `Primary . [TypeArguments] Identifier`, then let T be the type of the Primary expression. The type to search is T if T is a class or interface type, or the upper bound of T if T is a type variable.\r\n&gt;\r\n&gt;  If the form is `super . [TypeArguments] Identifier`, then the type to search is the direct superclass type of **the class whose declaration contains the method invocation**.\r\n\r\nNotice that this is done at compile time. The call `super.method1();` in `Student` will cause a search in `Person` because `Person` is &quot;the class whose declaration contains the method invocation&quot;. Eventually, we&#39;ll find `Person.method1` in a later step.\r\n\r\nOn the other hand, the call `this.method2();` in `Student` will search in `Student`.\r\n\r\n### [Locate Method to Invoke][2]\r\n\r\n&gt; - Let `Q` be the qualifying class or interface of the method invocation (&#167;13.1).\r\n&gt; \r\n&gt; - Let `m` be the method found in Q or a superclass or superinterface of Q. (Note that m was merely the name of the method in the previous\r\n&gt; section; here it is the actual declaration.)\r\n&gt; \r\n&gt; -  Let `C` be the class or interface that declares m.\r\n&gt; \r\n&gt; [...]\r\n&gt; \r\n&gt; -  **If the invocation mode is `super`, overriding is not allowed. Method m of class or interface C is the one to be invoked.** If m is abstract,\r\n&gt; an AbstractMethodError is thrown.\r\n&gt; \r\n&gt; [...]\r\n&gt; \r\n&gt; - Otherwise, the invocation mode is `interface` or `virtual`.\r\n&gt; \r\n&gt;     If the method m of class or interface C is private, then it is the method to be invoked.\r\n&gt; \r\n&gt;     Otherwise, overriding may occur. **A dynamic method lookup, specified below, is used to locate the method to invoke.** The lookup\r\n&gt; procedure starts from class R, the actual run-time class of the target\r\n&gt; object.\r\n\r\nThis is a runtime step. For `super.method1();`, `C` is `Person` (since we found `Person.method1()`), and the invocation mode is `super`, so that is what is invoked.\r\n\r\nFor `this.method2();`, a dynamic method lookup occurs, which in this case involves finding the appropriate overridden method depending on the runtime type of `this`.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/specs/jls/se17/html/jls-15.html#jls-15.12.1\r\n  [2]: https://docs.oracle.com/javase/specs/jls/se17/html/jls-15.html#jls-15.12.4.4","title":"Does super() run in compiletime and this() run in runtime? and why?","body":"<p>You are correct in that <code>super.xxx()</code> vs <code>this.xxx()</code> has some sort of a &quot;compile time vs runtime&quot; distinction, but it is certainly not that <code>super.xxx()</code> is &quot;<em>run</em>&quot; at compile time.</p>\n<p>A more accurate wording would be, the method that will be called by a <code>super.xxx</code> call is decided at compile time (<em>statically dispatched</em>). And the method that will be called by a <code>this.xxx</code> call is decided at runtime (<em>dynamically dispatched</em>).</p>\n<p>You can see this by comparing the clauses in the Java Language Specification, in the sections about processing method invocations. The important steps that differs between <code>super.xxx</code> and <code>this.xxx</code> are (emphasis mine):</p>\n<h3><a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-15.html#jls-15.12.1\" rel=\"nofollow noreferrer\">Compile-Time Step 1: Determine Type to Search</a></h3>\n<blockquote>\n<p>If the form is <code>Primary . [TypeArguments] Identifier</code>, then let T be the type of the Primary expression. The type to search is T if T is a class or interface type, or the upper bound of T if T is a type variable.</p>\n<p>If the form is <code>super . [TypeArguments] Identifier</code>, then the type to search is the direct superclass type of <strong>the class whose declaration contains the method invocation</strong>.</p>\n</blockquote>\n<p>Notice that this is done at compile time. The call <code>super.method1();</code> in <code>Student</code> will cause a search in <code>Person</code> because <code>Person</code> is &quot;the class whose declaration contains the method invocation&quot;. Eventually, we'll find <code>Person.method1</code> in a later step.</p>\n<p>On the other hand, the call <code>this.method2();</code> in <code>Student</code> will search in <code>Student</code>.</p>\n<h3><a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-15.html#jls-15.12.4.4\" rel=\"nofollow noreferrer\">Locate Method to Invoke</a></h3>\n<blockquote>\n<ul>\n<li><p>Let <code>Q</code> be the qualifying class or interface of the method invocation (§13.1).</p>\n</li>\n<li><p>Let <code>m</code> be the method found in Q or a superclass or superinterface of Q. (Note that m was merely the name of the method in the previous\nsection; here it is the actual declaration.)</p>\n</li>\n<li><p>Let <code>C</code> be the class or interface that declares m.</p>\n</li>\n</ul>\n<p>[...]</p>\n<ul>\n<li><strong>If the invocation mode is <code>super</code>, overriding is not allowed. Method m of class or interface C is the one to be invoked.</strong> If m is abstract,\nan AbstractMethodError is thrown.</li>\n</ul>\n<p>[...]</p>\n<ul>\n<li><p>Otherwise, the invocation mode is <code>interface</code> or <code>virtual</code>.</p>\n<p>If the method m of class or interface C is private, then it is the method to be invoked.</p>\n<p>Otherwise, overriding may occur. <strong>A dynamic method lookup, specified below, is used to locate the method to invoke.</strong> The lookup\nprocedure starts from class R, the actual run-time class of the target\nobject.</p>\n</li>\n</ul>\n</blockquote>\n<p>This is a runtime step. For <code>super.method1();</code>, <code>C</code> is <code>Person</code> (since we found <code>Person.method1()</code>), and the invocation mode is <code>super</code>, so that is what is invoked.</p>\n<p>For <code>this.method2();</code>, a dynamic method lookup occurs, which in this case involves finding the appropriate overridden method depending on the runtime type of <code>this</code>.</p>\n"}],"owner":{"account_id":27279969,"reputation":11,"user_id":20800012,"display_name":"ahmed alaa"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":86,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":74833056,"answer_count":1,"score":0,"last_activity_date":1671272562,"creation_date":1671266829,"question_id":74832825,"body_markdown":"in this program it will print &quot;Student 1 Person 1 Undergrad 2 &quot;\r\n\r\nthat means super.method1() &gt; super() of student \r\nthis.method2() this of Undergrad()\r\n\r\nDoes super() run in compiletime and  this() run in runtime? and why  ?\r\n\r\n\r\n```\r\npublic class Person {\r\n    public void method1() {\r\n        System.out.print(&quot;Person 1 &quot;);\r\n    }\r\n    public void method2()  {\r\n        System.out.print(&quot;Person 2 &quot;);\r\n    }\r\n}\r\n```\r\n\r\n```\r\npublic class Student extends Person {\r\n    public void method1() {\r\n        System.out.print(&quot;Student 1 &quot;);\r\n        super.method1();\r\n        this.method2();\r\n    }\r\n    public void method2() {\r\n        System.out.print(&quot;Student 2 &quot;);\r\n    }\r\n}\r\n```\r\n\r\n```\r\npublic class Undergrad extends Student {\r\n     /*public void method1() {\r\n         System.out.print(&quot;ahmed&quot;);\r\n     }*/\r\n     public void method2() {\r\n         System.out.print(&quot;Undergrad 2 &quot;);\r\n     }\r\n}\r\n```\r\n\r\n```\r\npublic class main {\r\n    \r\n    static void main(){\r\n        Person u = new Undergrad();\r\n        u.method1();    \r\n        \r\n    }\r\n\r\n}\r\n```\r\n\r\n\r\n\r\n\r\nI expect output: It will cause an infinite execution, printing &quot;Student 1&quot; over and over.\r\n\r\noutput was:&quot;Student 1 Person 1 Undergrad 2 &quot;.","title":"Does super() run in compiletime and this() run in runtime? and why?","body":"<p>in this program it will print &quot;Student 1 Person 1 Undergrad 2 &quot;</p>\n<p>that means super.method1() &gt; super() of student\nthis.method2() this of Undergrad()</p>\n<p>Does super() run in compiletime and  this() run in runtime? and why  ?</p>\n<pre><code>public class Person {\n    public void method1() {\n        System.out.print(&quot;Person 1 &quot;);\n    }\n    public void method2()  {\n        System.out.print(&quot;Person 2 &quot;);\n    }\n}\n</code></pre>\n<pre><code>public class Student extends Person {\n    public void method1() {\n        System.out.print(&quot;Student 1 &quot;);\n        super.method1();\n        this.method2();\n    }\n    public void method2() {\n        System.out.print(&quot;Student 2 &quot;);\n    }\n}\n</code></pre>\n<pre><code>public class Undergrad extends Student {\n     /*public void method1() {\n         System.out.print(&quot;ahmed&quot;);\n     }*/\n     public void method2() {\n         System.out.print(&quot;Undergrad 2 &quot;);\n     }\n}\n</code></pre>\n<pre><code>public class main {\n    \n    static void main(){\n        Person u = new Undergrad();\n        u.method1();    \n        \n    }\n\n}\n</code></pre>\n<p>I expect output: It will cause an infinite execution, printing &quot;Student 1&quot; over and over.</p>\n<p>output was:&quot;Student 1 Person 1 Undergrad 2 &quot;.</p>\n"},{"tags":["java","junit","mockito"],"answers":[{"tags":[],"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1565593345,"creation_date":1565567674,"answer_id":57454424,"question_id":57454212,"body_markdown":"In Java, two objects aren&#39;t equal because they are instances of the same class! Objects are equal because calling *a.equals(b)* returns true!\r\n\r\nIn your case, that class *PublishJob* probably doesn&#39;t override the equals method. So, comparing two lambda instances results in false. And note: I really don&#39;t see how you could fix this by adding an equals method. \r\n\r\nIn other words: when you do `publisher::executionHandler` you create **two** different lambda instances. It doesn&#39;t matter that they will both make a call on the same object. You have **two** lambda instances. And they are simply not **equal**. And that Mockito method checks for **equality**. \r\n\r\nI think one way how to test this: see if you can get that lambda to be executed. Then verify that the expected call takes place on that object. ","title":"How to verify lambda functions Mockito","body":"<p>In Java, two objects aren't equal because they are instances of the same class! Objects are equal because calling <em>a.equals(b)</em> returns true!</p>\n\n<p>In your case, that class <em>PublishJob</em> probably doesn't override the equals method. So, comparing two lambda instances results in false. And note: I really don't see how you could fix this by adding an equals method. </p>\n\n<p>In other words: when you do <code>publisher::executionHandler</code> you create <strong>two</strong> different lambda instances. It doesn't matter that they will both make a call on the same object. You have <strong>two</strong> lambda instances. And they are simply not <strong>equal</strong>. And that Mockito method checks for <strong>equality</strong>. </p>\n\n<p>I think one way how to test this: see if you can get that lambda to be executed. Then verify that the expected call takes place on that object. </p>\n"}],"owner":{"account_id":1227709,"reputation":1322,"user_id":1192961,"accept_rate":78,"display_name":"Nilesh Barai"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1861,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":57454424,"answer_count":1,"score":7,"last_activity_date":1671272521,"creation_date":1565564531,"question_id":57454212,"body_markdown":"I am trying to test following method: \r\n\r\n    public void execute(Publisher&lt;T&gt; publisher) throws Exception {\r\n        PublishStrategy&lt;T&gt; publishStrategy = publisher.getPublishStrategy();\r\n        publishStrategy.execute(publisher::executionHandler);\r\n    }\r\n\r\nFollowing is the Junit code: \r\n\r\n    @Test\r\n    public void testExecute() throws Exception {\r\n        PublishStrategy&lt;Event&gt; publishStrategy = Mockito.mock(PublishStrategy.class);\r\n        Publisher&lt;Event&gt; publisher = Mockito.mock(Publisher.class);\r\n        Mockito.when(publisher.getPublishStrategy()).thenReturn(publishStrategy);\r\n        Mockito.doNothing().when(publishStrategy).execute(publisher::executionHandler);\r\n        PublishJob job = new PublishJob(publisher);\r\n        job.execute(publisher);\r\n        Mockito.verify(publishStrategy, Mockito.times(1)).execute(publisher::executionHandler);\r\n    }\r\n\r\nOn the verify method call, I am getting following mockito exception: \r\n\r\n\tArgument(s) are different! Wanted:\r\n\tpublishStrategy.execute(\r\n\t\tcom.test.producer.jobs.PublishJobTest$$Lambda$3/1146825051@6f45df59\r\n\t);\r\n\t-&gt; at com.test.producer.jobs.PublishJobTest.testExecute(PublishJobTest.java:23)\r\n\tActual invocation has different arguments:\r\n\tpublishStrategy.execute(\r\n\t\tcom.producer.jobs.PublishJob$$Lambda$2/1525409936@38e79ae3\r\n\t);\r\n\t-&gt; at com.producer.jobs.PublishJob.execute(PublishJob.java:30)\r\n\r\nI don&#39;t understand why mockito considers both the lambda&#39;s are different? \r\n\r\n**Update**\r\nI solved it without using `Mockito`. \r\n\r\nHere&#39;s the other approach. `Omitted empty overridden methods`: \r\n\r\n    @Test\r\n    public void testExecute() throws Exception {\r\n        PublishStrategy&lt;Event&gt; publishStrategy = new PublishStrategy&lt;Event&gt;() {\r\n            @Override\r\n            public void execute(Consumer&lt;List&lt;Event&gt;&gt; handler) {\r\n                Assert.assertNotNull(handler);\r\n            }\r\n        };\r\n        Publisher&lt;Event&gt; publisher = new AbstractPublisher&lt;Event&gt;() {\r\n            @Override\r\n            public void init(PublishStrategy&lt;Event&gt; publishStrategy) {\r\n                this.publishStrategy = publishStrategy;\r\n            }\r\n\r\n            @Override\r\n            public void executionHandler(List&lt;IngestEvent&gt; items) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public PublishStrategy&lt;IngestEvent&gt; getPublishStrategy() {\r\n                return this.publishStrategy;\r\n            }\r\n        };\r\n        publisher.init(publishStrategy);\r\n        PublishJob job = new PublishJob();\r\n        job.execute(publisher);\r\n    }\r\n\r\n","title":"How to verify lambda functions Mockito","body":"<p>I am trying to test following method: </p>\n\n<pre><code>public void execute(Publisher&lt;T&gt; publisher) throws Exception {\n    PublishStrategy&lt;T&gt; publishStrategy = publisher.getPublishStrategy();\n    publishStrategy.execute(publisher::executionHandler);\n}\n</code></pre>\n\n<p>Following is the Junit code: </p>\n\n<pre><code>@Test\npublic void testExecute() throws Exception {\n    PublishStrategy&lt;Event&gt; publishStrategy = Mockito.mock(PublishStrategy.class);\n    Publisher&lt;Event&gt; publisher = Mockito.mock(Publisher.class);\n    Mockito.when(publisher.getPublishStrategy()).thenReturn(publishStrategy);\n    Mockito.doNothing().when(publishStrategy).execute(publisher::executionHandler);\n    PublishJob job = new PublishJob(publisher);\n    job.execute(publisher);\n    Mockito.verify(publishStrategy, Mockito.times(1)).execute(publisher::executionHandler);\n}\n</code></pre>\n\n<p>On the verify method call, I am getting following mockito exception: </p>\n\n<pre><code>Argument(s) are different! Wanted:\npublishStrategy.execute(\n    com.test.producer.jobs.PublishJobTest$$Lambda$3/1146825051@6f45df59\n);\n-&gt; at com.test.producer.jobs.PublishJobTest.testExecute(PublishJobTest.java:23)\nActual invocation has different arguments:\npublishStrategy.execute(\n    com.producer.jobs.PublishJob$$Lambda$2/1525409936@38e79ae3\n);\n-&gt; at com.producer.jobs.PublishJob.execute(PublishJob.java:30)\n</code></pre>\n\n<p>I don't understand why mockito considers both the lambda's are different? </p>\n\n<p><strong>Update</strong>\nI solved it without using <code>Mockito</code>. </p>\n\n<p>Here's the other approach. <code>Omitted empty overridden methods</code>: </p>\n\n<pre><code>@Test\npublic void testExecute() throws Exception {\n    PublishStrategy&lt;Event&gt; publishStrategy = new PublishStrategy&lt;Event&gt;() {\n        @Override\n        public void execute(Consumer&lt;List&lt;Event&gt;&gt; handler) {\n            Assert.assertNotNull(handler);\n        }\n    };\n    Publisher&lt;Event&gt; publisher = new AbstractPublisher&lt;Event&gt;() {\n        @Override\n        public void init(PublishStrategy&lt;Event&gt; publishStrategy) {\n            this.publishStrategy = publishStrategy;\n        }\n\n        @Override\n        public void executionHandler(List&lt;IngestEvent&gt; items) {\n\n        }\n\n        @Override\n        public PublishStrategy&lt;IngestEvent&gt; getPublishStrategy() {\n            return this.publishStrategy;\n        }\n    };\n    publisher.init(publishStrategy);\n    PublishJob job = new PublishJob();\n    job.execute(publisher);\n}\n</code></pre>\n"},{"tags":["java","spring-boot","authentication","kerberos","parallelstream"],"answers":[{"tags":[],"owner":{"account_id":23775056,"reputation":11,"user_id":17788633,"display_name":"Hao Deng"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1670898332,"creation_date":1670898293,"answer_id":74779343,"question_id":74779261,"body_markdown":"Maybe you can cache the ticket and the token on Kerberos&#39; server-side. ","title":"How to achieve Parallel Authentication using Kerberos?","body":"<p>Maybe you can cache the ticket and the token on Kerberos' server-side.</p>\n"},{"tags":[],"owner":{"account_id":20740,"reputation":13570,"user_id":49849,"display_name":"user1686"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1671272393,"creation_date":1671272393,"answer_id":74833322,"question_id":74779261,"body_markdown":"&gt; When I initially tried to make these calls as parallel, I understood that the Kerberos Ticket and the Token will be invalidated when initiating the parallel request as the previous ticket will no longer be valid, but I would like to listen from other experts here if there&#39;s any other way that we can achieve this.\r\n\r\nNo, the _ticket_ is multiple-use and never invalidated (until it reaches the ~10h expiry) &amp;ndash; you can see in `klist` that the same ticket stays around across multiple runs. Only the _token_ built out of a ticket + verifier is single-use, but the application can freely create as many tokens from a single cached ticket as it wants.\r\n\r\nWhen using e.g. HTTP, normally you (or the HTTP client library) would call the GSSAPI or Kerberos library to start a new &quot;security context&quot; and get a new token immediately before every HTTP request. It&#39;s fine to start multiple GSSAPI contexts and get multiple tokens in parallel; the GSSAPI/Kerberos library will take care of acquiring and caching the service ticket.","title":"How to achieve Parallel Authentication using Kerberos?","body":"<blockquote>\n<p>When I initially tried to make these calls as parallel, I understood that the Kerberos Ticket and the Token will be invalidated when initiating the parallel request as the previous ticket will no longer be valid, but I would like to listen from other experts here if there's any other way that we can achieve this.</p>\n</blockquote>\n<p>No, the <em>ticket</em> is multiple-use and never invalidated (until it reaches the ~10h expiry) – you can see in <code>klist</code> that the same ticket stays around across multiple runs. Only the <em>token</em> built out of a ticket + verifier is single-use, but the application can freely create as many tokens from a single cached ticket as it wants.</p>\n<p>When using e.g. HTTP, normally you (or the HTTP client library) would call the GSSAPI or Kerberos library to start a new &quot;security context&quot; and get a new token immediately before every HTTP request. It's fine to start multiple GSSAPI contexts and get multiple tokens in parallel; the GSSAPI/Kerberos library will take care of acquiring and caching the service ticket.</p>\n"}],"owner":{"account_id":13606034,"reputation":101,"user_id":9815155,"display_name":"Mohamed Yusuff"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":122,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1671272393,"creation_date":1670897344,"question_id":74779261,"body_markdown":"I have a requirement to make multiple independent micro service calls in parallel in Spring Boot (Java) in order to address the performance issue in making sequential calls and these micro services are authenticated using Kerberos.\r\n\r\nWhen I initially tried to make these calls as parallel, I understood that the Kerberos Ticket and the Token will be invalidated when initiating the parallel request as the previous ticket will no longer be valid, but I would like to listen from other experts here if there&#39;s any other way that we can achieve this.","title":"How to achieve Parallel Authentication using Kerberos?","body":"<p>I have a requirement to make multiple independent micro service calls in parallel in Spring Boot (Java) in order to address the performance issue in making sequential calls and these micro services are authenticated using Kerberos.</p>\n<p>When I initially tried to make these calls as parallel, I understood that the Kerberos Ticket and the Token will be invalidated when initiating the parallel request as the previous ticket will no longer be valid, but I would like to listen from other experts here if there's any other way that we can achieve this.</p>\n"},{"tags":["java","spring","spring-boot","spring-data-jpa"],"comments":[{"owner":{"account_id":27141954,"reputation":1,"user_id":20682697,"display_name":"Yosseuf"},"score":0,"creation_date":1671216891,"post_id":74828591,"comment_id":132059241,"body_markdown":"Done a little research found out that All I had to do was just using @Embedded Anotation.","body":"Done a little research found out that All I had to do was just using @Embedded Anotation."}],"answers":[{"tags":[],"owner":{"account_id":480617,"reputation":2495,"user_id":893952,"accept_rate":57,"display_name":"Harry Coder"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671227122,"creation_date":1671227122,"answer_id":74830040,"question_id":74828591,"body_markdown":"You can use: `@Embeddable` and `@Embedded`. Use this [link][1] for more details.\r\n\r\n\r\n  [1]: https://www.baeldung.com/jpa-embedded-embeddable","title":"How to turn an object properties into coulmns in spring jpa","body":"<p>You can use: <code>@Embeddable</code> and <code>@Embedded</code>. Use this <a href=\"https://www.baeldung.com/jpa-embedded-embeddable\" rel=\"nofollow noreferrer\">link</a> for more details.</p>\n"},{"tags":[],"owner":{"account_id":14962947,"reputation":132,"user_id":10802150,"display_name":"mingle08"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671249203,"creation_date":1671249203,"answer_id":74831676,"question_id":74828591,"body_markdown":"if class MsgDetail has a field: Msg, then add @Entity and @Table on Msg.","title":"How to turn an object properties into coulmns in spring jpa","body":"<p>if class MsgDetail has a field: Msg, then add @Entity and @Table on Msg.</p>\n"}],"owner":{"account_id":27141954,"reputation":1,"user_id":20682697,"display_name":"Yosseuf"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1671272301,"creation_date":1671216143,"question_id":74828591,"body_markdown":"So I have an entity class where one of its properties is another object. How can I make spring jpa turn that class&#39;s properties into columns just like the properties of my entity class?\r\n\r\nI have tried to make that object&#39;s class into an entity but didn&#39;t know how I can include it in my first class.","title":"How to turn an object properties into coulmns in spring jpa","body":"<p>So I have an entity class where one of its properties is another object. How can I make spring jpa turn that class's properties into columns just like the properties of my entity class?</p>\n<p>I have tried to make that object's class into an entity but didn't know how I can include it in my first class.</p>\n"},{"tags":["java","lambda","foreach"],"comments":[{"owner":{"account_id":277416,"reputation":681848,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":1,"creation_date":1532872943,"post_id":51581061,"comment_id":90127423,"body_markdown":"Why woud you loop if you don&#39;t do anything with the other elements? What do you **actually** want to achieve? Note that forEach() is not the only way to loop over a list. Use what is best for your use-case.","body":"Why woud you loop if you don&#39;t do anything with the other elements? What do you <b>actually</b> want to achieve? Note that forEach() is not the only way to loop over a list. Use what is best for your use-case."}],"answers":[{"tags":[],"owner":{"account_id":7743155,"reputation":55371,"user_id":5862071,"accept_rate":86,"display_name":"Ousmane D."},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1532873661,"creation_date":1532873147,"answer_id":51581110,"question_id":51581061,"body_markdown":"It seems like you&#39;re asking, how to print the first object but iterate over the remaining elements and do some other logic with them, in which case you can go with:\r\n\r\n    if(!userList.isEmpty()) System.out.println(userList.get(0));\r\n    userList.subList(1, userList.size()).forEach(user -&gt; ...);\r\n","title":"Java List forEach Lambda expressional - first elements and loop through all elements","body":"<p>It seems like you're asking, how to print the first object but iterate over the remaining elements and do some other logic with them, in which case you can go with:</p>\n\n<pre><code>if(!userList.isEmpty()) System.out.println(userList.get(0));\nuserList.subList(1, userList.size()).forEach(user -&gt; ...);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9489110,"reputation":2186,"user_id":7054574,"display_name":"Anddo"},"down_vote_count":1,"up_vote_count":2,"is_accepted":true,"score":1,"last_activity_date":1532876561,"creation_date":1532873186,"answer_id":51581121,"question_id":51581061,"body_markdown":"If you want to apply certain logic to first user and continue looping with others then you might use condition to check the first object is the current or not. As I understand from your question, this is what you want \r\n\r\n    userList.forEach(user -&gt; {\r\n    \tif (userList.get(0) == user)\r\n    \t\tSystem.out.println(&quot;This is user with index 0&quot;);\r\n        System.out.println(user + &quot; All users including 0&quot;);\r\n    });\r\n\r\nAs Aomine said in the comments, this might not be great solution for checking the first element of the list each time and might not work correctly if the same user object is repeated on the list so better to separate the logic like this\r\n\r\n    // Do something with the first user only\r\n    if(!userList.isEmpty())\r\n    \tSystem.out.println(userList.get(0));\r\n    \r\n    // Do some stuff for all users in the list except the first one\r\n    userList.subList(1, userList.size()).forEach(user -&gt; {\r\n        \tSystem.out.println(user + &quot; All users without 0&quot;);\r\n    );\r\n    \r\n    // Do some stuff for all users in the list\r\n    userList.forEach(user -&gt; {\r\n        \tSystem.out.println(user + &quot; All users&quot;);\r\n    );\r\n\r\nAnother approach using stream\r\n\r\n    // Dealing with first user only\r\n    if (!userList.isEmpty()) {\r\n        System.out.println(&quot;this is first user: &quot; + userList.get(0));\r\n    }\r\n    // using stream skipping the first element\r\n    userList.stream().skip(1).forEach(user -&gt; {\r\n        System.out.println(user);\r\n    });\r\n\r\nAlso you might use iterator approach\r\n\r\n    // getting the iterator from the list\r\n    Iterator&lt;String&gt; users = userList.iterator();\r\n    \r\n    // the first user\r\n    if(users.hasNext())\r\n        System.out.println(&quot;this is first user :&quot; + users.next());\r\n    \r\n    // the rest of the users\r\n    users.forEachRemaining(user -&gt; {\r\n        System.out.println(user);\r\n    });","title":"Java List forEach Lambda expressional - first elements and loop through all elements","body":"<p>If you want to apply certain logic to first user and continue looping with others then you might use condition to check the first object is the current or not. As I understand from your question, this is what you want </p>\n\n<pre><code>userList.forEach(user -&gt; {\n    if (userList.get(0) == user)\n        System.out.println(\"This is user with index 0\");\n    System.out.println(user + \" All users including 0\");\n});\n</code></pre>\n\n<p>As Aomine said in the comments, this might not be great solution for checking the first element of the list each time and might not work correctly if the same user object is repeated on the list so better to separate the logic like this</p>\n\n<pre><code>// Do something with the first user only\nif(!userList.isEmpty())\n    System.out.println(userList.get(0));\n\n// Do some stuff for all users in the list except the first one\nuserList.subList(1, userList.size()).forEach(user -&gt; {\n        System.out.println(user + \" All users without 0\");\n);\n\n// Do some stuff for all users in the list\nuserList.forEach(user -&gt; {\n        System.out.println(user + \" All users\");\n);\n</code></pre>\n\n<p>Another approach using stream</p>\n\n<pre><code>// Dealing with first user only\nif (!userList.isEmpty()) {\n    System.out.println(\"this is first user: \" + userList.get(0));\n}\n// using stream skipping the first element\nuserList.stream().skip(1).forEach(user -&gt; {\n    System.out.println(user);\n});\n</code></pre>\n\n<p>Also you might use iterator approach</p>\n\n<pre><code>// getting the iterator from the list\nIterator&lt;String&gt; users = userList.iterator();\n\n// the first user\nif(users.hasNext())\n    System.out.println(\"this is first user :\" + users.next());\n\n// the rest of the users\nusers.forEachRemaining(user -&gt; {\n    System.out.println(user);\n});\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9671656,"reputation":2721,"user_id":7176382,"display_name":"Shubhendu Pramanik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1532873223,"creation_date":1532873223,"answer_id":51581125,"question_id":51581061,"body_markdown":"Here&#39;s the solution using `for-each`\r\n\r\n    List&lt;String&gt; userList = Arrays.asList(&quot;2&quot;,&quot;3&quot;,&quot;4&quot;);\r\n    \r\n            IntStream.range(0, userList.size()).forEach(i -&gt; {\r\n                if (i == 0)\r\n                    System.out.println(userList.get(i));\r\n                else {\r\n                    System.out.println(&quot;do other stuff&quot;);\r\n                }\r\n            });\r\n\r\n***O/P:***\r\n\r\n    2\r\n    do other stuff\r\n    do other stuff","title":"Java List forEach Lambda expressional - first elements and loop through all elements","body":"<p>Here's the solution using <code>for-each</code></p>\n\n<pre><code>List&lt;String&gt; userList = Arrays.asList(\"2\",\"3\",\"4\");\n\n        IntStream.range(0, userList.size()).forEach(i -&gt; {\n            if (i == 0)\n                System.out.println(userList.get(i));\n            else {\n                System.out.println(\"do other stuff\");\n            }\n        });\n</code></pre>\n\n<p><strong><em>O/P:</em></strong></p>\n\n<pre><code>2\ndo other stuff\ndo other stuff\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1874713,"reputation":518,"user_id":1696156,"accept_rate":67,"display_name":"rlwheeler"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1532873477,"creation_date":1532873477,"answer_id":51581171,"question_id":51581061,"body_markdown":"This should work\r\n\r\n    userList.foreach(user -&gt; {\r\n        If(user == userList.get(0){\r\n            System.out.println(user)\r\n        }\r\n    })","title":"Java List forEach Lambda expressional - first elements and loop through all elements","body":"<p>This should work</p>\n\n<pre><code>userList.foreach(user -&gt; {\n    If(user == userList.get(0){\n        System.out.println(user)\n    }\n})\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7743155,"reputation":55371,"user_id":5862071,"accept_rate":86,"display_name":"Ousmane D."},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1532874849,"creation_date":1532874849,"answer_id":51581357,"question_id":51581061,"body_markdown":"Here&#39;s another solution in JDK9 since you&#39;re into lambda expressions:\r\n\r\n    IntStream.range(0, userList.size())\r\n             .peek(i -&gt; {if(i == 0) System.out.println(userList.get(i));})\r\n             .dropWhile(i -&gt; i == 0)\r\n             .forEach(i -&gt; /* some other logic here */ );\r\n\r\nPersonally, and for production code, I&#39;d go with [my other answer][1] but if you&#39;re just having fun with lambda then the above is another approach you could take.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/51581061/java-list-foreach-lamba-expressional-first-elements-and-loop-through-all-eleme/51581110#51581110","title":"Java List forEach Lambda expressional - first elements and loop through all elements","body":"<p>Here's another solution in JDK9 since you're into lambda expressions:</p>\n\n<pre><code>IntStream.range(0, userList.size())\n         .peek(i -&gt; {if(i == 0) System.out.println(userList.get(i));})\n         .dropWhile(i -&gt; i == 0)\n         .forEach(i -&gt; /* some other logic here */ );\n</code></pre>\n\n<p>Personally, and for production code, I'd go with <a href=\"https://stackoverflow.com/questions/51581061/java-list-foreach-lamba-expressional-first-elements-and-loop-through-all-eleme/51581110#51581110\">my other answer</a> but if you're just having fun with lambda then the above is another approach you could take.</p>\n"}],"owner":{"account_id":7212490,"reputation":1864,"user_id":5506061,"accept_rate":64,"display_name":"Krish"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1521,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":51581121,"answer_count":5,"score":6,"last_activity_date":1671272154,"creation_date":1532872798,"question_id":51581061,"body_markdown":"I can able to loop through all elements of List like below:\r\n\r\n    userList.forEach(user -&gt; {\r\n        System.out.println(user);\r\n    });\r\n\r\nI want to print the user object only for first element but I should loop for all elements in list.\r\nHow to achieve that ?\r\n\r\n\r\n\r\n","title":"Java List forEach Lambda expressional - first elements and loop through all elements","body":"<p>I can able to loop through all elements of List like below:</p>\n\n<pre><code>userList.forEach(user -&gt; {\n    System.out.println(user);\n});\n</code></pre>\n\n<p>I want to print the user object only for first element but I should loop for all elements in list.\nHow to achieve that ?</p>\n"},{"tags":["java","javafx","compilation","graalvm-native-image"],"comments":[{"owner":{"account_id":213468,"reputation":103485,"user_id":466862,"display_name":"Mark Rotteveel"},"score":5,"creation_date":1671266159,"post_id":74832753,"comment_id":132066132,"body_markdown":"You should look at jpackage for generating self-contained applications. But in its simplest form, you can use jlink to generate a custom runtime image (including an equivalent of the JRE). See also https://openjfx.io/openjfx-docs/#modular.","body":"You should look at jpackage for generating self-contained applications. But in its simplest form, you can use jlink to generate a custom runtime image (including an equivalent of the JRE). See also <a href=\"https://openjfx.io/openjfx-docs/#modular\" rel=\"nofollow noreferrer\">openjfx.io/openjfx-docs/#modular</a>."},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":5,"creation_date":1671266821,"post_id":74832753,"comment_id":132066198,"body_markdown":"Take a look at the &quot;Packaging&quot; section of the FAQs in the [JavaFX tag wiki](https://stackoverflow.com/tags/javafx/info). The [jpackage tool](https://docs.oracle.com/en/java/javase/17/jpackage/packaging-overview.html#GUID-E0966C49-ABBB-46A2-8DF7-1D3F96640F05) may be what you&#39;re looking for.","body":"Take a look at the &quot;Packaging&quot; section of the FAQs in the <a href=\"https://stackoverflow.com/tags/javafx/info\">JavaFX tag wiki</a>. The <a href=\"https://docs.oracle.com/en/java/javase/17/jpackage/packaging-overview.html#GUID-E0966C49-ABBB-46A2-8DF7-1D3F96640F05\" rel=\"nofollow noreferrer\">jpackage tool</a> may be what you&#39;re looking for."},{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":1,"creation_date":1671400862,"post_id":74832753,"comment_id":132086133,"body_markdown":"The powers to be got so caught up in the modular stuff that they forgot simplicity. We got use to just focusing on the logic involved in our code. Lately, it&#39;s has been more difficult to get projects running and to create executables than writing code.","body":"The powers to be got so caught up in the modular stuff that they forgot simplicity. We got use to just focusing on the logic involved in our code. Lately, it&#39;s has been more difficult to get projects running and to create executables than writing code."}],"answers":[{"tags":[],"owner":{"account_id":5347179,"reputation":10433,"user_id":4262407,"accept_rate":40,"display_name":"mipa"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1671271970,"creation_date":1671271970,"answer_id":74833289,"question_id":74832753,"body_markdown":"I understand your frustration because properly packaging JavaFX applications is made mored complicated than it should be. There are a lot of tools that you have to combine which also leave much room for errors. The main problem is that the official OpenJFX Maven plugin (https://github.com/openjfx/javafx-maven-plugin) still doesn&#39;t have a packaging option. It has a Jlink goal but that does not help much in practice because it requires a fully modularised application which I have not yet seen in the wild for any serious project because many important libraries are not yet modular (and probably never will be).\r\n\r\nTogether with Dirk I have therefore created a demo project which combines jdeps, jlink and jpackage in a way that it can also handle non-modular projects and build an application and installer for all desktop platforms. Maybe you want to have a look at this repo:\r\nhttps://github.com/dlemmermann/JPackageScriptFX\r\n\r\nYou could also use Gluons GluonFX plugin (https://github.com/gluonhq/gluonfx-maven-plugin) which does contain a packaging option but that internally uses GraalVM native-image which requires some extra care to get it going and I personally never felt the need for this on desktop. It&#39;s the best option though if you also want to go mobile.","title":"How to distribute java programs?","body":"<p>I understand your frustration because properly packaging JavaFX applications is made mored complicated than it should be. There are a lot of tools that you have to combine which also leave much room for errors. The main problem is that the official OpenJFX Maven plugin (<a href=\"https://github.com/openjfx/javafx-maven-plugin\" rel=\"noreferrer\">https://github.com/openjfx/javafx-maven-plugin</a>) still doesn't have a packaging option. It has a Jlink goal but that does not help much in practice because it requires a fully modularised application which I have not yet seen in the wild for any serious project because many important libraries are not yet modular (and probably never will be).</p>\n<p>Together with Dirk I have therefore created a demo project which combines jdeps, jlink and jpackage in a way that it can also handle non-modular projects and build an application and installer for all desktop platforms. Maybe you want to have a look at this repo:\n<a href=\"https://github.com/dlemmermann/JPackageScriptFX\" rel=\"noreferrer\">https://github.com/dlemmermann/JPackageScriptFX</a></p>\n<p>You could also use Gluons GluonFX plugin (<a href=\"https://github.com/gluonhq/gluonfx-maven-plugin\" rel=\"noreferrer\">https://github.com/gluonhq/gluonfx-maven-plugin</a>) which does contain a packaging option but that internally uses GraalVM native-image which requires some extra care to get it going and I personally never felt the need for this on desktop. It's the best option though if you also want to go mobile.</p>\n"}],"owner":{"account_id":22458671,"reputation":49,"user_id":16661679,"display_name":"Alex"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":232,"favorite_count":0,"down_vote_count":1,"up_vote_count":5,"answer_count":1,"score":4,"last_activity_date":1671271970,"creation_date":1671265876,"question_id":74832753,"body_markdown":"I started developing applications in Java + JavaFx a little over a month ago.\r\n\r\nI was able to make a couple of beautiful animated applications.\r\nWhen compiling to a jar-file, I ran into the following problems:\r\n- Java17 doesn&#39;t run with jre which is for normal people, https://www.java.com/en/download/ , this begs the first question, why can&#39;t I develop on newer versions of java jdk without pain, why should I go down to version 8 and lose a lot of features\r\n\r\n- Also my javafx jars didn&#39;t want to run at all without any console messages (javafx unnamed .... @729347c ) and wouldn&#39;t run on double click. There were also messages like No runtime for favafx blah blah blah.\r\n  I solved it by installing liberica jdk https://bell-sw.com/pages/downloads/#/java-17-lts. Now I can successfully compile jar files and run them by double clicking\r\n\r\n- I read right there, in a bunch of topics, that Oracle now means that I have to deliver to the clients the required version of jre (Jre17), the question is how can I do this. Newer versions of Lauch4j removed the ability to package jar along with jre. But I don&#39;t like Lauch4j either.\r\n\r\n- Later I learned about such thing as native-image in GraalVm. I tried compiling a jar file with javafx and it didn&#39;t work for me in any way. The program just crashed. And I found on the BellSoft website the package I needed https://bell-sw.com/pages/downloads/native-image-kit/#/nik-22-17, which has a configured graalvm. Thinking that these gods solved all my problems again, I compiled my jar file into an exe (yes, I changed the jdk in the environment paths). And Now I am getting Segment Fault message. But this is already better, at least it starts, although it crashes immediately after launch. Inside, by the way, the code of the usual default javafx program from Inteliji with the Hello javafx button\r\n\r\nIn general, I painted all the problems that I encountered. And I have 2 questions\r\n- How can I distribute my javafx programs with my own jre like big companies do?\r\n- How to compile javafx program to native-image?\r\n\r\nMy environment:\r\n- Windows 10\r\n- Liberica Native Image Kit 22.3.0+2 (java17 jdk)\r\n- Latest version of Inteliji\r\n\r\nI will also clarify that I do not want to force clients to download anything (except perhaps https://www.java.com/en/download/, but no more), I want a completely native program\r\n\r\nSorry if it&#39;s messy\r\n\r\n\r\neverything I tried and did is described above","title":"How to distribute java programs?","body":"<p>I started developing applications in Java + JavaFx a little over a month ago.</p>\n<p>I was able to make a couple of beautiful animated applications.\nWhen compiling to a jar-file, I ran into the following problems:</p>\n<ul>\n<li><p>Java17 doesn't run with jre which is for normal people, <a href=\"https://www.java.com/en/download/\" rel=\"nofollow noreferrer\">https://www.java.com/en/download/</a> , this begs the first question, why can't I develop on newer versions of java jdk without pain, why should I go down to version 8 and lose a lot of features</p>\n</li>\n<li><p>Also my javafx jars didn't want to run at all without any console messages (javafx unnamed .... @729347c ) and wouldn't run on double click. There were also messages like No runtime for favafx blah blah blah.\nI solved it by installing liberica jdk <a href=\"https://bell-sw.com/pages/downloads/#/java-17-lts\" rel=\"nofollow noreferrer\">https://bell-sw.com/pages/downloads/#/java-17-lts</a>. Now I can successfully compile jar files and run them by double clicking</p>\n</li>\n<li><p>I read right there, in a bunch of topics, that Oracle now means that I have to deliver to the clients the required version of jre (Jre17), the question is how can I do this. Newer versions of Lauch4j removed the ability to package jar along with jre. But I don't like Lauch4j either.</p>\n</li>\n<li><p>Later I learned about such thing as native-image in GraalVm. I tried compiling a jar file with javafx and it didn't work for me in any way. The program just crashed. And I found on the BellSoft website the package I needed <a href=\"https://bell-sw.com/pages/downloads/native-image-kit/#/nik-22-17\" rel=\"nofollow noreferrer\">https://bell-sw.com/pages/downloads/native-image-kit/#/nik-22-17</a>, which has a configured graalvm. Thinking that these gods solved all my problems again, I compiled my jar file into an exe (yes, I changed the jdk in the environment paths). And Now I am getting Segment Fault message. But this is already better, at least it starts, although it crashes immediately after launch. Inside, by the way, the code of the usual default javafx program from Inteliji with the Hello javafx button</p>\n</li>\n</ul>\n<p>In general, I painted all the problems that I encountered. And I have 2 questions</p>\n<ul>\n<li>How can I distribute my javafx programs with my own jre like big companies do?</li>\n<li>How to compile javafx program to native-image?</li>\n</ul>\n<p>My environment:</p>\n<ul>\n<li>Windows 10</li>\n<li>Liberica Native Image Kit 22.3.0+2 (java17 jdk)</li>\n<li>Latest version of Inteliji</li>\n</ul>\n<p>I will also clarify that I do not want to force clients to download anything (except perhaps <a href=\"https://www.java.com/en/download/\" rel=\"nofollow noreferrer\">https://www.java.com/en/download/</a>, but no more), I want a completely native program</p>\n<p>Sorry if it's messy</p>\n<p>everything I tried and did is described above</p>\n"},{"tags":["java","jackson","yaml","snakeyaml"],"answers":[{"tags":[],"owner":{"account_id":7953408,"reputation":1827,"user_id":6003541,"display_name":"Rafał Sokalski"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1671271901,"creation_date":1671271224,"answer_id":74833206,"question_id":74832841,"body_markdown":"As far as I know SnakeYAML uses reflection inside, so because of that you need to have property names in your classes equal to property name in your YAML file.\r\n\r\nSo in your case if you have yaml file with snake case you would have to use property name in your classes with snake case.\r\n\r\nSee example below:\r\n\r\nCustomer.java\r\n\r\n    @Data\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    public class Customer {\r\n        private String first_name;\r\n        private String last_name;\r\n        private Integer age;\r\n    }\r\n\r\n\r\nOrder.java\r\n\r\n\r\n    @Data\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    public class Order {\r\n        private List&lt;Customer&gt; customers;\r\n    }\r\n\r\n\r\n\r\nMain.java\r\n\r\n    public class Main {\r\n    \r\n        @SneakyThrows\r\n        public static void main(String[] args) {\r\n            InputStream inputStream = Main.class.getClassLoader().getResourceAsStream(&quot;jackson.yaml&quot;);\r\n    \r\n            Yaml yaml = new Yaml();\r\n            Order order = yaml.loadAs(inputStream, Order.class);\r\n            System.out.println(order);\r\n        }\r\n    }\r\n\r\n\r\njackson.yaml\r\n\r\n\r\n    customers:\r\n      - first_name: &quot;John&quot;\r\n        last_name: &quot;Doe&quot;\r\n        age: 52\r\n\r\n\r\n\r\n\r\nOutput:\r\n\r\n    Order(customers=[Customer(first_name=John, last_name=Doe, age=52)])\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n**EDIT:**\r\n\r\n\r\nThere is also an option to define TypeDescriptors which tells SnakeYAML how to map fields. See example below:\r\n\r\n\r\n    public class Main {\r\n    \r\n        @SneakyThrows\r\n        public static void main(String[] args) {\r\n            InputStream inputStream = Main.class.getClassLoader().getResourceAsStream(&quot;jackson.yaml&quot;);\r\n    \r\n            TypeDescription customerDescriptor = new TypeDescription(Customer.class);\r\n            customerDescriptor.substituteProperty(&quot;first_name&quot;, String.class, &quot;getFirstName&quot;, &quot;setFirstName&quot;);\r\n            customerDescriptor.substituteProperty(&quot;last_name&quot;, String.class, &quot;getLastName&quot;, &quot;setLastName&quot;);\r\n            customerDescriptor.setExcludes(&quot;firstName&quot;, &quot;lastName&quot;);\r\n    \r\n            Constructor constructor = new Constructor(Customer.class);\r\n            Representer representer = new Representer(new DumperOptions());\r\n    \r\n            constructor.addTypeDescription(customerDescriptor);\r\n            representer.addTypeDescription(customerDescriptor);\r\n    \r\n            Yaml yaml = new Yaml(constructor, representer);\r\n            Order order = yaml.loadAs(inputStream, Order.class);\r\n            System.out.println(order);\r\n        }\r\n    }\r\n\r\n\r\njackson.yaml\r\n\r\n    customers:\r\n      - first_name: &quot;John&quot;\r\n        last_name: &quot;Doe&quot;\r\n        age: 52\r\n\r\n\r\nCustomer.java\r\n\r\n\r\n    @Data\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    public class Customer {\r\n        private String firstName;\r\n        private String lastName;\r\n        private Integer age;\r\n    }\r\n\r\n\r\n\r\nOutput:\r\n\r\nOrder(customers=[Customer(firstName=John, lastName=Doe, age=52)])\r\n","title":"How to parse snake_case properties in SnakeYAML","body":"<p>As far as I know SnakeYAML uses reflection inside, so because of that you need to have property names in your classes equal to property name in your YAML file.</p>\n<p>So in your case if you have yaml file with snake case you would have to use property name in your classes with snake case.</p>\n<p>See example below:</p>\n<p>Customer.java</p>\n<pre><code>@Data\n@NoArgsConstructor\n@AllArgsConstructor\npublic class Customer {\n    private String first_name;\n    private String last_name;\n    private Integer age;\n}\n</code></pre>\n<p>Order.java</p>\n<pre><code>@Data\n@NoArgsConstructor\n@AllArgsConstructor\npublic class Order {\n    private List&lt;Customer&gt; customers;\n}\n</code></pre>\n<p>Main.java</p>\n<pre><code>public class Main {\n\n    @SneakyThrows\n    public static void main(String[] args) {\n        InputStream inputStream = Main.class.getClassLoader().getResourceAsStream(&quot;jackson.yaml&quot;);\n\n        Yaml yaml = new Yaml();\n        Order order = yaml.loadAs(inputStream, Order.class);\n        System.out.println(order);\n    }\n}\n</code></pre>\n<p>jackson.yaml</p>\n<pre><code>customers:\n  - first_name: &quot;John&quot;\n    last_name: &quot;Doe&quot;\n    age: 52\n</code></pre>\n<p>Output:</p>\n<pre><code>Order(customers=[Customer(first_name=John, last_name=Doe, age=52)])\n</code></pre>\n<p><strong>EDIT:</strong></p>\n<p>There is also an option to define TypeDescriptors which tells SnakeYAML how to map fields. See example below:</p>\n<pre><code>public class Main {\n\n    @SneakyThrows\n    public static void main(String[] args) {\n        InputStream inputStream = Main.class.getClassLoader().getResourceAsStream(&quot;jackson.yaml&quot;);\n\n        TypeDescription customerDescriptor = new TypeDescription(Customer.class);\n        customerDescriptor.substituteProperty(&quot;first_name&quot;, String.class, &quot;getFirstName&quot;, &quot;setFirstName&quot;);\n        customerDescriptor.substituteProperty(&quot;last_name&quot;, String.class, &quot;getLastName&quot;, &quot;setLastName&quot;);\n        customerDescriptor.setExcludes(&quot;firstName&quot;, &quot;lastName&quot;);\n\n        Constructor constructor = new Constructor(Customer.class);\n        Representer representer = new Representer(new DumperOptions());\n\n        constructor.addTypeDescription(customerDescriptor);\n        representer.addTypeDescription(customerDescriptor);\n\n        Yaml yaml = new Yaml(constructor, representer);\n        Order order = yaml.loadAs(inputStream, Order.class);\n        System.out.println(order);\n    }\n}\n</code></pre>\n<p>jackson.yaml</p>\n<pre><code>customers:\n  - first_name: &quot;John&quot;\n    last_name: &quot;Doe&quot;\n    age: 52\n</code></pre>\n<p>Customer.java</p>\n<pre><code>@Data\n@NoArgsConstructor\n@AllArgsConstructor\npublic class Customer {\n    private String firstName;\n    private String lastName;\n    private Integer age;\n}\n</code></pre>\n<p>Output:</p>\n<p>Order(customers=[Customer(firstName=John, lastName=Doe, age=52)])</p>\n"}],"owner":{"account_id":1813580,"reputation":431,"user_id":1649163,"display_name":"mgramin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":562,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74833206,"answer_count":1,"score":0,"last_activity_date":1671271901,"creation_date":1671266991,"question_id":74832841,"body_markdown":"Jackson provides a dead simple way to parse camel_case properties. For example:\r\n\r\njackson.yaml with snake_case properties:\r\n```\r\ncustomers:\r\n  - first_name: &quot;John&quot;\r\n    last_name: &quot;Doe&quot;\r\n    age: 52\r\n```\r\n\r\nCode for parse:\r\n```\r\nObjectMapper objectMapper = new ObjectMapper(new YAMLFactory());\r\nobjectMapper.setPropertyNamingStrategy(PropertyNamingStrategies.SNAKE_CASE);\r\nInputStream inputStream = Main.class.getClassLoader().getResourceAsStream(&quot;jackson.yaml&quot;);\r\nOrders orders = objectMapper.readValue(inputStream, Orders.class);\r\n```\r\n\r\nBut is there something similar in SnakeYaml (such as `PropertyNamingStrategies.SNAKE_CASE` option) ?\r\n\r\n\r\nPS\r\nFor now, the only way I&#39;ve found is to use the `@YamlProperty` annotation on each property separately","title":"How to parse snake_case properties in SnakeYAML","body":"<p>Jackson provides a dead simple way to parse camel_case properties. For example:</p>\n<p>jackson.yaml with snake_case properties:</p>\n<pre><code>customers:\n  - first_name: &quot;John&quot;\n    last_name: &quot;Doe&quot;\n    age: 52\n</code></pre>\n<p>Code for parse:</p>\n<pre><code>ObjectMapper objectMapper = new ObjectMapper(new YAMLFactory());\nobjectMapper.setPropertyNamingStrategy(PropertyNamingStrategies.SNAKE_CASE);\nInputStream inputStream = Main.class.getClassLoader().getResourceAsStream(&quot;jackson.yaml&quot;);\nOrders orders = objectMapper.readValue(inputStream, Orders.class);\n</code></pre>\n<p>But is there something similar in SnakeYaml (such as <code>PropertyNamingStrategies.SNAKE_CASE</code> option) ?</p>\n<p>PS\nFor now, the only way I've found is to use the <code>@YamlProperty</code> annotation on each property separately</p>\n"},{"tags":["java","char"],"comments":[{"owner":{"account_id":11590,"reputation":10755,"user_id":22417,"display_name":"brianpeiris"},"score":0,"creation_date":1261851224,"post_id":1963908,"comment_id":1877480,"body_markdown":"This question is duplicate of http://stackoverflow.com/questions/1008802/converting-symbols-accent-letters-to-english-alphabet Please refer to that question for an answer","body":"This question is duplicate of <a href=\"http://stackoverflow.com/questions/1008802/converting-symbols-accent-letters-to-english-alphabet\" title=\"converting symbols accent letters to english alphabet\">stackoverflow.com/questions/1008802/&hellip;</a> Please refer to that question for an answer"},{"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1261862989,"post_id":1963908,"comment_id":1878057,"body_markdown":"&amp;#198; corresponds to the char with int value 198.","body":"&amp;#198; corresponds to the char with int value 198."}],"answers":[{"tags":[],"owner":{"account_id":59951,"reputation":51423,"user_id":179233,"accept_rate":100,"display_name":"Kaleb Brasee"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1261850288,"creation_date":1261850288,"answer_id":1963924,"question_id":1963908,"body_markdown":"As far as I know, there&#39;s no way to do this automatically -- you&#39;d have to substitute manually using [String.replaceAll][1].\r\n\r\n    String str = &quot;Paran&#225;&quot;;\r\n    str = str.replaceAll(&quot;&#225;&quot;, &quot;a&quot;);\r\n    str = str.replaceAll(&quot;&#198;&quot;, &quot;a&quot;);\r\n\r\n\r\n  [1]: http://java.sun.com/javase/6/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29","title":"How to convert accented letters to regular char in Java","body":"<p>As far as I know, there's no way to do this automatically -- you'd have to substitute manually using <a href=\"http://java.sun.com/javase/6/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29\" rel=\"nofollow noreferrer\">String.replaceAll</a>.</p>\n\n<pre><code>String str = \"Paraná\";\nstr = str.replaceAll(\"á\", \"a\");\nstr = str.replaceAll(\"Æ\", \"a\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":44736,"reputation":98412,"user_id":131433,"accept_rate":76,"display_name":"bmargulies"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1605827198,"creation_date":1261851095,"answer_id":1963956,"question_id":1963908,"body_markdown":"Look at icu4j or the JDK 1.6 Normalizer:\r\n\r\n    public String removeAccents(String text) {\r\n        return Normalizer.normalize(text, Normalizer.Form.NFD)\r\n                         .replaceAll(&quot;\\\\p{InCombiningDiacriticalMarks}+&quot;, &quot;&quot;);\r\n    }","title":"How to convert accented letters to regular char in Java","body":"<p>Look at icu4j or the JDK 1.6 Normalizer:</p>\n<pre><code>public String removeAccents(String text) {\n    return Normalizer.normalize(text, Normalizer.Form.NFD)\n                     .replaceAll(&quot;\\\\p{InCombiningDiacriticalMarks}+&quot;, &quot;&quot;);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27251064,"reputation":1,"user_id":20775516,"display_name":"user20775516"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671271829,"creation_date":1671022145,"answer_id":74798561,"question_id":1963908,"body_markdown":"Try something similar to the following code snippet:\r\n```\r\nimport org.apache.commons.lang3.StringUtils;\r\n\r\npublic class Test {\r\n    public static void main(String[] args) {\r\n\r\n\t\tString original = new String(&quot;Ramesh &#214;hrman&quot;);\r\n\t\ttry {\r\n\t\t\t\r\n\t\t    System.out.println(StringUtils.stripAccents(original));\r\n\t\t\t\r\n\t\t} catch (Exception e) {\r\n\t\t}\r\n\t\t\r\n\t}\r\n}\r\n```\r\nOutput: Ramesh Ohrman","title":"How to convert accented letters to regular char in Java","body":"<p>Try something similar to the following code snippet:</p>\n<pre><code>import org.apache.commons.lang3.StringUtils;\n\npublic class Test {\n    public static void main(String[] args) {\n\n        String original = new String(&quot;Ramesh Öhrman&quot;);\n        try {\n            \n            System.out.println(StringUtils.stripAccents(original));\n            \n        } catch (Exception e) {\n        }\n        \n    }\n}\n</code></pre>\n<p>Output: Ramesh Ohrman</p>\n"}],"owner":{"account_id":15510,"reputation":30708,"user_id":32834,"accept_rate":79,"display_name":"Frank"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5470,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":1963956,"answer_count":3,"score":4,"last_activity_date":1671271829,"creation_date":1261849851,"question_id":1963908,"body_markdown":"How do I convert `&amp;#198;` and `&amp;#225;` into a regular English char with Java ? What I have is something like this : Local TV from Paran`&amp;#225;`. How to convert it to [Parana] ?","title":"How to convert accented letters to regular char in Java","body":"<p>How do I convert <code>&amp;#198;</code> and <code>&amp;#225;</code> into a regular English char with Java ? What I have is something like this : Local TV from Paran<code>&amp;#225;</code>. How to convert it to [Parana] ?</p>\n"},{"tags":["java","java-8","option-type"],"answers":[{"tags":[],"owner":{"account_id":6243460,"reputation":97907,"user_id":4856258,"accept_rate":100,"display_name":"Tagir Valeev"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1671271697,"creation_date":1452485248,"answer_id":34714054,"question_id":34713973,"body_markdown":"No, there&#39;s no way to do it in more elegant way using standard Java API. I asked Paul Sandoz about adding `mapToInt`, etc., [here](http://mail.openjdk.java.net/pipermail/core-libs-dev/2015-September/035426.html)&#39;s his answer:\r\n\r\nMe:\r\n\r\n&gt; Isn&#39;t it a good idea to provide also a way\r\n&gt; to transfer between `Optional` types like `mapToInt`, `mapToObj`, etc.,\r\n&gt; like it&#39;s done in Stream API?\r\n\r\nPaul:\r\n\r\n&gt; I don’t wanna go there, my response is transform `Optional*` into a `*Stream`. An argument for adding `mapOrElseGet` (notice that the primitive variants return `U`) is that other functionality can be composed from it.\r\n\r\nSo you will likely to have in Java-9:\r\n\r\n    return Optional.of(someString).filter(s -&gt; s.matches(&quot;\\\\d+&quot;))\r\n         .mapOrElseGet(s -&gt; OptionalInt.of(Integer.parseInt(s)), OptionalInt::empty);\r\n\r\nBut nothing more.\r\n\r\nThat&#39;s because JDK authors insist that the `Optional` class and its primitive friends (especially primitive friends) should not be widely used, it&#39;s just a convenient way to perform a limited set of operations on the return value of methods which may return &quot;the absence of the value&quot;. Also primitive optionals are designed for performance improvement, but actually it&#39;s much less significant than with streams, so using `Optional&lt;Integer&gt;` is also fine. With Valhalla project you will be able to use `Optional&lt;int&gt;` and `OptionalInt` will become unnecessary.\r\n\r\nIn your particular case the better way to do it is using ternary operator:\r\n\r\n    return someString != null &amp;&amp; someString.matches(&quot;\\\\d+&quot;) ? \r\n           OptionalInt.of(Integer.parseInt(someString)) : OptionalInt.empty();\r\n\r\nI assume that you want to return the `OptionalInt` from the method. Otherwise it&#39;s even more questionable why you would need it.\r\n\r\n","title":"How to convert an Optional to an OptionalInt?","body":"<p>No, there's no way to do it in more elegant way using standard Java API. I asked Paul Sandoz about adding <code>mapToInt</code>, etc., <a href=\"http://mail.openjdk.java.net/pipermail/core-libs-dev/2015-September/035426.html\" rel=\"nofollow noreferrer\">here</a>'s his answer:</p>\n<p>Me:</p>\n<blockquote>\n<p>Isn't it a good idea to provide also a way\nto transfer between <code>Optional</code> types like <code>mapToInt</code>, <code>mapToObj</code>, etc.,\nlike it's done in Stream API?</p>\n</blockquote>\n<p>Paul:</p>\n<blockquote>\n<p>I don’t wanna go there, my response is transform <code>Optional*</code> into a <code>*Stream</code>. An argument for adding <code>mapOrElseGet</code> (notice that the primitive variants return <code>U</code>) is that other functionality can be composed from it.</p>\n</blockquote>\n<p>So you will likely to have in Java-9:</p>\n<pre><code>return Optional.of(someString).filter(s -&gt; s.matches(&quot;\\\\d+&quot;))\n     .mapOrElseGet(s -&gt; OptionalInt.of(Integer.parseInt(s)), OptionalInt::empty);\n</code></pre>\n<p>But nothing more.</p>\n<p>That's because JDK authors insist that the <code>Optional</code> class and its primitive friends (especially primitive friends) should not be widely used, it's just a convenient way to perform a limited set of operations on the return value of methods which may return &quot;the absence of the value&quot;. Also primitive optionals are designed for performance improvement, but actually it's much less significant than with streams, so using <code>Optional&lt;Integer&gt;</code> is also fine. With Valhalla project you will be able to use <code>Optional&lt;int&gt;</code> and <code>OptionalInt</code> will become unnecessary.</p>\n<p>In your particular case the better way to do it is using ternary operator:</p>\n<pre><code>return someString != null &amp;&amp; someString.matches(&quot;\\\\d+&quot;) ? \n       OptionalInt.of(Integer.parseInt(someString)) : OptionalInt.empty();\n</code></pre>\n<p>I assume that you want to return the <code>OptionalInt</code> from the method. Otherwise it's even more questionable why you would need it.</p>\n"},{"tags":[],"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1452527999,"creation_date":1452509529,"answer_id":34719670,"question_id":34713973,"body_markdown":"While the code isn&#39;t more readable than an ordinary conditional expression, there is a simple solution:\r\n\r\n    public OptionalInt getInt() {\r\n        return Stream.of(someString).filter(s -&gt; s != null &amp;&amp; s.matches(&quot;\\\\d+&quot;))\r\n            .mapToInt(Integer::parseInt).findAny();\r\n    }\r\n\r\n---\r\nWith Java&#160;9, you could use\r\n\r\n    public OptionalInt getInt() {\r\n        return Stream.ofNullable(someString).filter(s -&gt; s.matches(&quot;\\\\d+&quot;))\r\n            .mapToInt(Integer::parseInt).findAny();\r\n    }\r\nAs said, neither is more readable than an ordinary conditional expression, but I think, it still looks better than using `mapOrElseGet` (and the first variant doesn&#39;t need Java&#160;9.","title":"How to convert an Optional to an OptionalInt?","body":"<p>While the code isn't more readable than an ordinary conditional expression, there is a simple solution:</p>\n\n<pre><code>public OptionalInt getInt() {\n    return Stream.of(someString).filter(s -&gt; s != null &amp;&amp; s.matches(\"\\\\d+\"))\n        .mapToInt(Integer::parseInt).findAny();\n}\n</code></pre>\n\n<hr>\n\n<p>With Java 9, you could use</p>\n\n<pre><code>public OptionalInt getInt() {\n    return Stream.ofNullable(someString).filter(s -&gt; s.matches(\"\\\\d+\"))\n        .mapToInt(Integer::parseInt).findAny();\n}\n</code></pre>\n\n<p>As said, neither is more readable than an ordinary conditional expression, but I think, it still looks better than using <code>mapOrElseGet</code> (and the first variant doesn't need Java 9.</p>\n"},{"tags":[],"owner":{"account_id":60521,"reputation":34336,"user_id":180719,"accept_rate":88,"display_name":"Olivier Gr&#233;goire"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1490112593,"creation_date":1490111855,"answer_id":42932197,"question_id":34713973,"body_markdown":"If you have any object and not just a `String`, you can temporarily go through a `Stream`:\r\n\r\n    public static &lt;T&gt; OptionalInt toOptionalInt(Optional&lt;T&gt; optional, ToIntFunction&lt;? super T&gt; func) {\r\n      return optional.map(Stream::of).orElseGet(Stream::empty)\r\n        .mapToInt(func)\r\n        .findFirst();\r\n    }\r\n\r\nThis solution has the advantage to be a one-liner, meaning you can copy/paste the content of the method and just change `func` to whatever you want. The disadvantage is going through a Stream to achieve what you want. But if you want a generic one-liner, this is it.\r\n\r\nIf you want a utility method, you probably prefer to use the following:\r\n\r\n    public static &lt;T&gt; OptionalInt toOptionalInt(Optional&lt;T&gt; optional, ToIntFunction&lt;? super T&gt; func) {\r\n      if (optional.isPresent()) {\r\n        return OptionalInt.of(func.applyAsInt(optional.get()));\r\n      } else {\r\n        return OptionalInt.empty();\r\n      }\r\n    }","title":"How to convert an Optional to an OptionalInt?","body":"<p>If you have any object and not just a <code>String</code>, you can temporarily go through a <code>Stream</code>:</p>\n\n<pre><code>public static &lt;T&gt; OptionalInt toOptionalInt(Optional&lt;T&gt; optional, ToIntFunction&lt;? super T&gt; func) {\n  return optional.map(Stream::of).orElseGet(Stream::empty)\n    .mapToInt(func)\n    .findFirst();\n}\n</code></pre>\n\n<p>This solution has the advantage to be a one-liner, meaning you can copy/paste the content of the method and just change <code>func</code> to whatever you want. The disadvantage is going through a Stream to achieve what you want. But if you want a generic one-liner, this is it.</p>\n\n<p>If you want a utility method, you probably prefer to use the following:</p>\n\n<pre><code>public static &lt;T&gt; OptionalInt toOptionalInt(Optional&lt;T&gt; optional, ToIntFunction&lt;? super T&gt; func) {\n  if (optional.isPresent()) {\n    return OptionalInt.of(func.applyAsInt(optional.get()));\n  } else {\n    return OptionalInt.empty();\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1325557,"reputation":379,"user_id":1270447,"display_name":"zman0900"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1522218289,"creation_date":1522218289,"answer_id":49527489,"question_id":34713973,"body_markdown":"Here&#39;s another option that doesn&#39;t need to use a Stream and avoids compiling regex every time:\r\n\r\n    private static final Predicate&lt;String&gt; IS_DIGITS = Pattern.compile(&quot;^\\\\d+$&quot;)\r\n            .asPredicate();\r\n    \r\n    public OptionalInt getInt() {\r\n        return Optional.ofNullable(someString)\r\n                .filter(IS_DIGITS)\r\n                .map(Integer::valueOf)\r\n                .map(OptionalInt::of)\r\n                .orElseGet(OptionalInt::empty);\r\n    }\r\n\r\nNote that you need to anchor the regex because asPredicate() uses find() instead of matches().  \r\n\r\nOr if you&#39;re using Guava, you can eliminate the regex entirely and use their Ints class:\r\n\r\n    public OptionalInt getInt() {\r\n        return Optional.ofNullable(someString)\r\n                .map(Ints::tryParse)\r\n                .map(OptionalInt::of)\r\n                .orElseGet(OptionalInt::empty);\r\n    }","title":"How to convert an Optional to an OptionalInt?","body":"<p>Here's another option that doesn't need to use a Stream and avoids compiling regex every time:</p>\n\n<pre><code>private static final Predicate&lt;String&gt; IS_DIGITS = Pattern.compile(\"^\\\\d+$\")\n        .asPredicate();\n\npublic OptionalInt getInt() {\n    return Optional.ofNullable(someString)\n            .filter(IS_DIGITS)\n            .map(Integer::valueOf)\n            .map(OptionalInt::of)\n            .orElseGet(OptionalInt::empty);\n}\n</code></pre>\n\n<p>Note that you need to anchor the regex because asPredicate() uses find() instead of matches().  </p>\n\n<p>Or if you're using Guava, you can eliminate the regex entirely and use their Ints class:</p>\n\n<pre><code>public OptionalInt getInt() {\n    return Optional.ofNullable(someString)\n            .map(Ints::tryParse)\n            .map(OptionalInt::of)\n            .orElseGet(OptionalInt::empty);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":73589,"reputation":5327,"user_id":211794,"accept_rate":58,"display_name":"Ashok Koyi"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1554827107,"creation_date":1554827107,"answer_id":55597287,"question_id":34713973,"body_markdown":"This is how I convert an `Optional&lt;String&gt;` to `OptionalInt`\r\n\r\n    OptionalInt lastSeenId = Optional.of(&quot;123&quot;).map(Integer::parseInt).map(OptionalInt::of).orElseGet(OptionalInt::empty);","title":"How to convert an Optional to an OptionalInt?","body":"<p>This is how I convert an <code>Optional&lt;String&gt;</code> to <code>OptionalInt</code></p>\n\n<pre><code>OptionalInt lastSeenId = Optional.of(\"123\").map(Integer::parseInt).map(OptionalInt::of).orElseGet(OptionalInt::empty);\n</code></pre>\n"}],"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9019,"favorite_count":0,"down_vote_count":0,"up_vote_count":15,"accepted_answer_id":34719670,"answer_count":5,"score":15,"last_activity_date":1671271697,"creation_date":1452484480,"question_id":34713973,"body_markdown":"I have an `Optional` that I want to &quot;convert&quot; to an `OptionalInt`, but there doesn&#39;t seem to be a simple way to do this.\r\n\r\nHere&#39;s what I want to do (contrived example):\r\n\r\n    public OptionalInt getInt() {\r\n        return Optional.ofNullable(someString).filter(s -&gt; s.matches(&quot;\\\\d+&quot;)).mapToInt(Integer::parseInt);\r\n    }\r\n\r\nHowever, there&#39;s no `mapToInt()` method for `Optional`.\r\n\r\nThe best I could come up with is:\r\n    \r\n    return Optional.ofNullable(someString)\r\n        .filter(s -&gt; s.matches(&quot;\\\\d+&quot;))\r\n        .map(s -&gt; OptionalInt.of(Integer.parseInt(s)))\r\n        .orElse(OptionalInt.empty());\r\n\r\nbut that seems inelegant.\r\n\r\nAm I missing something from the JDK that can make the conversion more elegant?\r\n ","title":"How to convert an Optional to an OptionalInt?","body":"<p>I have an <code>Optional</code> that I want to \"convert\" to an <code>OptionalInt</code>, but there doesn't seem to be a simple way to do this.</p>\n\n<p>Here's what I want to do (contrived example):</p>\n\n<pre><code>public OptionalInt getInt() {\n    return Optional.ofNullable(someString).filter(s -&gt; s.matches(\"\\\\d+\")).mapToInt(Integer::parseInt);\n}\n</code></pre>\n\n<p>However, there's no <code>mapToInt()</code> method for <code>Optional</code>.</p>\n\n<p>The best I could come up with is:</p>\n\n<pre><code>return Optional.ofNullable(someString)\n    .filter(s -&gt; s.matches(\"\\\\d+\"))\n    .map(s -&gt; OptionalInt.of(Integer.parseInt(s)))\n    .orElse(OptionalInt.empty());\n</code></pre>\n\n<p>but that seems inelegant.</p>\n\n<p>Am I missing something from the JDK that can make the conversion more elegant?</p>\n"},{"tags":["java","math","floating-point","format","double"],"comments":[{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1671270839,"post_id":74833126,"comment_id":132066701,"body_markdown":"They say you should use `BigDecimal` for amounts that need to be accurate.","body":"They say you should use <code>BigDecimal</code> for amounts that need to be accurate."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1671273632,"post_id":74833126,"comment_id":132067078,"body_markdown":"From [the doumentation:](https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/Formatter.html#syntax) *If the precision is not specified then the default value is 6.* This means that `%f` without specification of precision will print 6 decimals after the decimal separator and round as necessary, for example `0.001057`. There is a solution in the answer.","body":"From <a href=\"https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/Formatter.html#syntax\" rel=\"nofollow noreferrer\">the doumentation:</a> <i>If the precision is not specified then the default value is 6.</i> This means that <code>%f</code> without specification of precision will print 6 decimals after the decimal separator and round as necessary, for example <code>0.001057</code>. There is a solution in the answer."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1671273928,"post_id":74833126,"comment_id":132067119,"body_markdown":"If you want 0.0010565 but don’t want redundant trailing zeroes, another solution is `new DecimalFormat(&quot;#####0.0#################&quot;).format(chargeAmount)`. This will print at least one decimal and up to 18 decimals if they are non-zero.","body":"If you want 0.0010565 but don’t want redundant trailing zeroes, another solution is <code>new DecimalFormat(&quot;#####0.0#################&quot;).format(chargeAmou&zwnj;&#8203;nt)</code>. This will print at least one decimal and up to 18 decimals if they are non-zero."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1671819465,"post_id":74833126,"comment_id":132184147,"body_markdown":"I seem to understand that the answer was deleted because of [GPT policy](https://stackoverflow.com/help/gpt-policy) (which I support).","body":"I seem to understand that the answer was deleted because of <a href=\"https://stackoverflow.com/help/gpt-policy\">GPT policy</a> (which I support)."},{"owner":{"account_id":2802349,"reputation":146413,"user_id":2410359,"accept_rate":87,"display_name":"chux - Reinstate Monica"},"score":1,"creation_date":1672055635,"post_id":74833126,"comment_id":132213454,"body_markdown":"Try `&quot;%f&quot;` --&gt; `&quot;%.7f&quot;` to see a 7 decimal digit result.","body":"Try <code>&quot;%f&quot;</code> --&gt; <code>&quot;%.7f&quot;</code> to see a 7 decimal digit result."},{"owner":{"account_id":2802349,"reputation":146413,"user_id":2410359,"accept_rate":87,"display_name":"chux - Reinstate Monica"},"score":0,"creation_date":1672055818,"post_id":74833126,"comment_id":132213483,"body_markdown":"I suspect OP is getting 0.001057 because math is done in a wider than `double` and the exact amount is like 0.001056500000000000000048741663....  When rounded to 6 places is 0.001057.","body":"I suspect OP is getting 0.001057 because math is done in a wider than <code>double</code> and the exact amount is like 0.001056500000000000000048741663....  When rounded to 6 places is 0.001057."},{"owner":{"account_id":2802349,"reputation":146413,"user_id":2410359,"accept_rate":87,"display_name":"chux - Reinstate Monica"},"score":0,"creation_date":1672055881,"post_id":74833126,"comment_id":132213500,"body_markdown":"Rather than `double`, use decimal floating point types for money.","body":"Rather than <code>double</code>, use decimal floating point types for money."}],"owner":{"account_id":18127419,"reputation":1,"user_id":13182835,"display_name":"Syed Omer Asfaq"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":184,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671270914,"creation_date":1671270486,"question_id":74833126,"body_markdown":"My value is `0.10565`\r\n\r\nWhen this value get divided by 100 and formatted to string it gets converted to `0.001057`.\r\n\r\nBut my expected value is `\r\n0.0010565` , there should be no rounding off happening at the end.\r\n\r\nIs there any way to do it?\r\n\r\n\r\n```\r\nchargeAmount = Double.parseDouble(chargeInCents)/(double)100;\r\nchargeInDollar = String.format(&quot;%f&quot;, chargeAmount);\r\n```\r\nIt tried using this to convert my double value to string after dividing it by 100 \r\n","title":"String.format(&quot;%f&quot;, value) - Rounding off end digits","body":"<p>My value is <code>0.10565</code></p>\n<p>When this value get divided by 100 and formatted to string it gets converted to <code>0.001057</code>.</p>\n<p>But my expected value is <code> 0.0010565</code> , there should be no rounding off happening at the end.</p>\n<p>Is there any way to do it?</p>\n<pre><code>chargeAmount = Double.parseDouble(chargeInCents)/(double)100;\nchargeInDollar = String.format(&quot;%f&quot;, chargeAmount);\n</code></pre>\n<p>It tried using this to convert my double value to string after dividing it by 100</p>\n"},{"tags":["java","windows","startup"],"comments":[{"owner":{"account_id":297814,"reputation":25314,"user_id":603516,"accept_rate":100,"display_name":"Vadzim"},"score":1,"creation_date":1548580266,"post_id":5953525,"comment_id":95585426,"body_markdown":"See also [How to create a windows service from java app](https://stackoverflow.com/questions/68113/how-to-create-a-windows-service-from-java-app)","body":"See also <a href=\"https://stackoverflow.com/questions/68113/how-to-create-a-windows-service-from-java-app\">How to create a windows service from java app</a>"}],"answers":[{"tags":[],"owner":{"account_id":29046,"reputation":66704,"user_id":78182,"accept_rate":94,"display_name":"Stefan Kendall"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1305046517,"creation_date":1305046517,"answer_id":5953560,"question_id":5953525,"body_markdown":"The answer to [this question][1] might suit your needs. Setup your java application to run as a windows service and you should be good to go.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/68113/how-to-create-a-windows-service-from-java-app","title":"Run Java application at Windows startup","body":"<p>The answer to <a href=\"https://stackoverflow.com/questions/68113/how-to-create-a-windows-service-from-java-app\">this question</a> might suit your needs. Setup your java application to run as a windows service and you should be good to go.</p>\n"},{"tags":[],"owner":{"account_id":140436,"reputation":1632,"user_id":346744,"accept_rate":88,"display_name":"MikeKusold"},"down_vote_count":5,"up_vote_count":45,"is_accepted":false,"score":40,"last_activity_date":1305046614,"creation_date":1305046614,"answer_id":5953583,"question_id":5953525,"body_markdown":"Create a .bat file and put this inside:\r\n\r\n`javaw -Xmx200m -jar C:\\Path\\to\\jarfile\\TheJar.jar`\r\n\r\nThen put the .bat file into the windows startup folder.\r\n\r\n&gt; One more thing: There&#39;s a difference between using **java** and **javaw**. While **java** is better when you are debugging an application, the application prints text or something like that, **javaw** is better when you don&#39;t need that. Why? Because **java** runs java program using a console that shows all that application prints (println&#39;s, exception stacktraces and so on) while **javaw** doesn&#39;t run on console.","title":"Run Java application at Windows startup","body":"<p>Create a .bat file and put this inside:</p>\n\n<p><code>javaw -Xmx200m -jar C:\\Path\\to\\jarfile\\TheJar.jar</code></p>\n\n<p>Then put the .bat file into the windows startup folder.</p>\n\n<blockquote>\n  <p>One more thing: There's a difference between using <strong>java</strong> and <strong>javaw</strong>. While <strong>java</strong> is better when you are debugging an application, the application prints text or something like that, <strong>javaw</strong> is better when you don't need that. Why? Because <strong>java</strong> runs java program using a console that shows all that application prints (println's, exception stacktraces and so on) while <strong>javaw</strong> doesn't run on console.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1305046740,"creation_date":1305046740,"answer_id":5953610,"question_id":5953525,"body_markdown":"Use &quot;winsw&quot; - http://kenai.com/projects/winsw - which was written for Glassfish v3 but works well with Java programs in general.\r\n\r\nRequire .NET runtime installed.","title":"Run Java application at Windows startup","body":"<p>Use \"winsw\" - <a href=\"http://kenai.com/projects/winsw\" rel=\"nofollow\">http://kenai.com/projects/winsw</a> - which was written for Glassfish v3 but works well with Java programs in general.</p>\n\n<p>Require .NET runtime installed.</p>\n"},{"tags":[],"owner":{"account_id":178454,"reputation":5330,"user_id":410439,"accept_rate":81,"display_name":"Ravi Parekh"},"down_vote_count":0,"up_vote_count":24,"is_accepted":false,"score":24,"last_activity_date":1495621305,"creation_date":1312972487,"answer_id":7009421,"question_id":5953525,"body_markdown":"it&#39;s simple as you have to put shortcut in \r\n\r\n**Windows 7**\r\n`C:\\users\\All Users\\Start Menu\\Programs\\Startup`(Admin)  or `User home directory(%userProfile%)`\r\n\r\n**Windows 10 :**\r\nIn Run   `shell:startup`\r\n\r\nin it&#39;s property -&gt; shortcut -&gt; target - &gt; `java.exe -jar D:\\..\\runJar.jar`\r\n\r\n**NOTE: This will run only after you login**\r\n\r\n\r\n----------\r\n\r\n\r\n**With Admin Right**\r\n\r\n`sc create serviceName binpath= &quot;java.exe -jar D:\\..\\runJar.jar&quot;` Will create windows service\r\n\r\n if you get **timeout** use `cmd /c D:\\JAVA7~1\\jdk1.7.0_51\\bin\\java.exe -jar d:\\jenkins\\jenkins.war` but even with this you&#39;ll get timeout but in background java.exe will be started. Check in task manager\r\n___\r\nIn some restricted environment as I was in corporate environment\r\n\r\n**ERROR:**\r\n\r\n`The service did not respond to the start or control request in a timely fashion`\r\n\r\nIn this case\r\n\r\n`cmd /c D:\\JAVA7~1\\jdk1.7.0_51\\bin\\java.exe -jar d:\\jenkins\\jenkins.war`\r\n\r\nThis will give you an error if you run manually but will run in background.\r\n\r\n**NOTE: This will run at windows logon start-up(before sign-in, Based on service &#39;`Startup Type`&#39;)**\r\n\r\n[Detailed explanation of creating windows service][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/3663331/creating-a-service-with-sc-exe-how-to-pass-in-context-parameters\r\n\r\n\r\n----------\r\n\r\n**Regedit**\r\n\r\n**Note: Edit Advanced User only**\r\n\r\n**To Run for Current User Only**\r\n\r\n    HKEY_CURRENT_USER/SOFTWARE/MICROSOFT/WINDOWS/CURRENT_VERSION/RUN\r\n\r\n**To Run for All Users**\r\n\r\n    hkey_local_machine/SOFTWARE/MICROSOFT/WINDOWS/CURRENT_VERSION/RUN\r\n\r\nCreate a String with Name and Path using above command\r\n","title":"Run Java application at Windows startup","body":"<p>it's simple as you have to put shortcut in </p>\n\n<p><strong>Windows 7</strong>\n<code>C:\\users\\All Users\\Start Menu\\Programs\\Startup</code>(Admin)  or <code>User home directory(%userProfile%)</code></p>\n\n<p><strong>Windows 10 :</strong>\nIn Run   <code>shell:startup</code></p>\n\n<p>in it's property -> shortcut -> target - > <code>java.exe -jar D:\\..\\runJar.jar</code></p>\n\n<p><strong>NOTE: This will run only after you login</strong></p>\n\n<hr>\n\n<p><strong>With Admin Right</strong></p>\n\n<p><code>sc create serviceName binpath= \"java.exe -jar D:\\..\\runJar.jar\"</code> Will create windows service</p>\n\n<p>if you get <strong>timeout</strong> use <code>cmd /c D:\\JAVA7~1\\jdk1.7.0_51\\bin\\java.exe -jar d:\\jenkins\\jenkins.war</code> but even with this you'll get timeout but in background java.exe will be started. Check in task manager</p>\n\n<hr>\n\n<p>In some restricted environment as I was in corporate environment</p>\n\n<p><strong>ERROR:</strong></p>\n\n<p><code>The service did not respond to the start or control request in a timely fashion</code></p>\n\n<p>In this case</p>\n\n<p><code>cmd /c D:\\JAVA7~1\\jdk1.7.0_51\\bin\\java.exe -jar d:\\jenkins\\jenkins.war</code></p>\n\n<p>This will give you an error if you run manually but will run in background.</p>\n\n<p><strong>NOTE: This will run at windows logon start-up(before sign-in, Based on service '<code>Startup Type</code>')</strong></p>\n\n<p><a href=\"https://stackoverflow.com/questions/3663331/creating-a-service-with-sc-exe-how-to-pass-in-context-parameters\">Detailed explanation of creating windows service</a></p>\n\n<hr>\n\n<p><strong>Regedit</strong></p>\n\n<p><strong>Note: Edit Advanced User only</strong></p>\n\n<p><strong>To Run for Current User Only</strong></p>\n\n<pre><code>HKEY_CURRENT_USER/SOFTWARE/MICROSOFT/WINDOWS/CURRENT_VERSION/RUN\n</code></pre>\n\n<p><strong>To Run for All Users</strong></p>\n\n<pre><code>hkey_local_machine/SOFTWARE/MICROSOFT/WINDOWS/CURRENT_VERSION/RUN\n</code></pre>\n\n<p>Create a String with Name and Path using above command</p>\n"},{"tags":[],"owner":{"account_id":4118482,"reputation":557,"user_id":3379482,"accept_rate":59,"display_name":"user3379482"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1580089148,"creation_date":1398868117,"answer_id":23390836,"question_id":5953525,"body_markdown":"1. Open &#39;Run&#39; (Windows-Key+`R`) \r\n2. Write `regedit`\r\n3. Go to `HKey local machine` -&gt; `Software` -&gt; `Microsoft` -&gt; `Windows` -&gt; `Current version` -&gt; `run`\r\n4. Click on it and in the other panel right-click on nothing and choose\r\n`Add` -&gt; `String value`\r\n5. Name it `java`\r\n6. Double-click it and put it&#39;s value as follows:\r\n`javaw -Xmx200m -jar C:\\Path\\to\\jarfile\\TheJar.jar`","title":"Run Java application at Windows startup","body":"<ol>\n<li>Open 'Run' (Windows-Key+<code>R</code>) </li>\n<li>Write <code>regedit</code></li>\n<li>Go to <code>HKey local machine</code> -> <code>Software</code> -> <code>Microsoft</code> -> <code>Windows</code> -> <code>Current version</code> -> <code>run</code></li>\n<li>Click on it and in the other panel right-click on nothing and choose\n<code>Add</code> -> <code>String value</code></li>\n<li>Name it <code>java</code></li>\n<li>Double-click it and put it's value as follows:\n<code>javaw -Xmx200m -jar C:\\Path\\to\\jarfile\\TheJar.jar</code></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":57788,"reputation":46110,"user_id":173149,"accept_rate":62,"display_name":"gavenkoa"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1420824078,"creation_date":1420824078,"answer_id":27865862,"question_id":5953525,"body_markdown":"In order to create service from any executable use ``srvany.exe`` from [Windows\r\nResource Kits 2003][1] (take attention to spaces after ``=``)::\r\n\r\n    cmd&gt; sc create NAME binPath= &quot;c:\\Program Files\\Windows Resource Kits\\Tools\\srvany.exe&quot; ^\r\n       type= own start= auto error= normal DisplayName= &quot;NAME for services.msc&quot;\r\n\r\nThen pass what `srvany.exe` wrapper will do:\r\n\r\n    cmd&gt; reg add &quot;HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\services\\NAME\\Parameters&quot; ^\r\n         /v &quot;Application&quot; ^\r\n         /d &quot;\\&quot;c:\\Program Files\\Java\\jre7\\bin\\java.exe\\&quot; -cp c:\\home\\devel\\service Main&quot;\r\n\r\nAbove you see quoting syntax for spaces. Next start service with:\r\n\r\n    cmd&gt; sc start NAME\r\n\r\nIf you make error recheck your settings with:\r\n\r\n    cmd&gt; reg query &quot;HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\services\\NAME&quot; /s\r\n\r\nand remove service:\r\n\r\n    cmd&gt; sc delete NAME\r\n\r\nand make steps again.\r\n\r\nVisit GUI `services.msc` and check with `procexp.exe` service actually start.\r\n\r\nSee also:  https://stackoverflow.com/questions/3663331/creating-a-service-with-sc-exe-how-to-pass-in-context-parameters\r\n\r\n**NOTE** All involved instruments is **official Microsoft**!!!\r\n\r\n\r\n  [1]: http://www.microsoft.com/en-us/download/confirmation.aspx?id=17657","title":"Run Java application at Windows startup","body":"<p>In order to create service from any executable use <code>srvany.exe</code> from <a href=\"http://www.microsoft.com/en-us/download/confirmation.aspx?id=17657\" rel=\"nofollow noreferrer\">Windows\nResource Kits 2003</a> (take attention to spaces after <code>=</code>)::</p>\n\n<pre><code>cmd&gt; sc create NAME binPath= \"c:\\Program Files\\Windows Resource Kits\\Tools\\srvany.exe\" ^\n   type= own start= auto error= normal DisplayName= \"NAME for services.msc\"\n</code></pre>\n\n<p>Then pass what <code>srvany.exe</code> wrapper will do:</p>\n\n<pre><code>cmd&gt; reg add \"HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\services\\NAME\\Parameters\" ^\n     /v \"Application\" ^\n     /d \"\\\"c:\\Program Files\\Java\\jre7\\bin\\java.exe\\\" -cp c:\\home\\devel\\service Main\"\n</code></pre>\n\n<p>Above you see quoting syntax for spaces. Next start service with:</p>\n\n<pre><code>cmd&gt; sc start NAME\n</code></pre>\n\n<p>If you make error recheck your settings with:</p>\n\n<pre><code>cmd&gt; reg query \"HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\services\\NAME\" /s\n</code></pre>\n\n<p>and remove service:</p>\n\n<pre><code>cmd&gt; sc delete NAME\n</code></pre>\n\n<p>and make steps again.</p>\n\n<p>Visit GUI <code>services.msc</code> and check with <code>procexp.exe</code> service actually start.</p>\n\n<p>See also:  <a href=\"https://stackoverflow.com/questions/3663331/creating-a-service-with-sc-exe-how-to-pass-in-context-parameters\">creating a service with sc.exe; how to pass in context parameters</a></p>\n\n<p><strong>NOTE</strong> All involved instruments is <strong>official Microsoft</strong>!!!</p>\n"},{"tags":[],"owner":{"account_id":116759,"reputation":7831,"user_id":306060,"accept_rate":72,"display_name":"Yanki Twizzy"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1420824700,"creation_date":1420824700,"answer_id":27866026,"question_id":5953525,"body_markdown":"If you are not ready to do the config yourself or if you want the same functionality on multile computers, then you can use [Advanced Installer][1]. You can package jars to be installed on Windows and set params that will run your program on startup\r\n\r\n\r\n  [1]: http://www.advancedinstaller.com/","title":"Run Java application at Windows startup","body":"<p>If you are not ready to do the config yourself or if you want the same functionality on multile computers, then you can use <a href=\"http://www.advancedinstaller.com/\" rel=\"nofollow\">Advanced Installer</a>. You can package jars to be installed on Windows and set params that will run your program on startup</p>\n"},{"tags":[],"owner":{"account_id":5364957,"reputation":821,"user_id":4275217,"display_name":"Mior"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1514959596,"creation_date":1442058521,"answer_id":32538420,"question_id":5953525,"body_markdown":"If you want to do it programmatically from Java you can write directly into Windows registry startup folder.\r\n\r\n[Here][1] is link how to write into Windows registry programmatically.\r\n\r\nwhen you have implemented function to work with registry than what you need is just run this code\r\n\r\n    String value = &quot;\\&quot;javaw -jar &quot; + System.getProperty(&quot;user.dir&quot;) + &quot;\\\\myJar.jar\\&quot;&quot;;\r\n    WinRegistry.writeStringValue(WinRegistry.HKEY_CURRENT_USER, &quot;Software\\\\Microsoft\\\\Windows\\\\CurrentVersion\\\\Run&quot;, &quot;myJar autorun key&quot;, value);\r\n\r\nwhere value for key need to be command what runs your application like java -jar myJar.jar\r\n\r\nto remove it from autorun you simply \r\n\r\n    WinRegistry.deleteValue(WinRegistry.HKEY_CURRENT_USER, &quot;Software\\\\Microsoft\\\\Windows\\\\CurrentVersion\\\\Run&quot;, &quot;myJar autorun key&quot;);\r\n\r\n  [1]: https://stackoverflow.com/questions/62289/read-write-to-windows-registry-using-java\r\n\r\n**UPDATE**\r\n\r\n    Replace WinRegistry.writeStringValue with WinRegistry.setStringValue recent version of java 1.8.x","title":"Run Java application at Windows startup","body":"<p>If you want to do it programmatically from Java you can write directly into Windows registry startup folder.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/62289/read-write-to-windows-registry-using-java\">Here</a> is link how to write into Windows registry programmatically.</p>\n\n<p>when you have implemented function to work with registry than what you need is just run this code</p>\n\n<pre><code>String value = \"\\\"javaw -jar \" + System.getProperty(\"user.dir\") + \"\\\\myJar.jar\\\"\";\nWinRegistry.writeStringValue(WinRegistry.HKEY_CURRENT_USER, \"Software\\\\Microsoft\\\\Windows\\\\CurrentVersion\\\\Run\", \"myJar autorun key\", value);\n</code></pre>\n\n<p>where value for key need to be command what runs your application like java -jar myJar.jar</p>\n\n<p>to remove it from autorun you simply </p>\n\n<pre><code>WinRegistry.deleteValue(WinRegistry.HKEY_CURRENT_USER, \"Software\\\\Microsoft\\\\Windows\\\\CurrentVersion\\\\Run\", \"myJar autorun key\");\n</code></pre>\n\n<p><strong>UPDATE</strong></p>\n\n<pre><code>Replace WinRegistry.writeStringValue with WinRegistry.setStringValue recent version of java 1.8.x\n</code></pre>\n"}],"owner":{"account_id":749646,"reputation":493,"user_id":744092,"accept_rate":20,"display_name":"shan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":104042,"favorite_count":0,"down_vote_count":0,"up_vote_count":45,"answer_count":8,"score":45,"last_activity_date":1671268456,"creation_date":1305046367,"question_id":5953525,"body_markdown":"I have a JAR file containing a Java application. How can I make it start with Windows, without needing user interaction?","title":"Run Java application at Windows startup","body":"<p>I have a JAR file containing a Java application. How can I make it start with Windows, without needing user interaction?</p>\n"},{"tags":["java","maven","java-native-interface"],"comments":[{"owner":{"account_id":1198039,"reputation":10944,"user_id":1169349,"display_name":"Reg"},"score":0,"creation_date":1659008170,"post_id":73152091,"comment_id":129196158,"body_markdown":"I have worked on two projects (different companies) with JNI implementations; we kept the C++ code in separate repo and used the generated DLL in our Java Project.","body":"I have worked on two projects (different companies) with JNI implementations; we kept the C++ code in separate repo and used the generated DLL in our Java Project."},{"owner":{"account_id":3581132,"reputation":1802,"user_id":2989330,"accept_rate":69,"display_name":"Green绿色"},"score":0,"creation_date":1659010634,"post_id":73152091,"comment_id":129197012,"body_markdown":"Did you also kept the JNI interface code in the separate repository? At least that code is highly dependent on the Java code and must change whenever the package of the corresponding classes change.","body":"Did you also kept the JNI interface code in the separate repository? At least that code is highly dependent on the Java code and must change whenever the package of the corresponding classes change."},{"owner":{"account_id":1198039,"reputation":10944,"user_id":1169349,"display_name":"Reg"},"score":0,"creation_date":1659011829,"post_id":73152091,"comment_id":129197532,"body_markdown":"To be honest I can&#39;t remember, but in general - if it was c++ it was kept in the c++ repo and java in the Java repo :)","body":"To be honest I can&#39;t remember, but in general - if it was c++ it was kept in the c++ repo and java in the Java repo :)"},{"owner":{"account_id":3581132,"reputation":1802,"user_id":2989330,"accept_rate":69,"display_name":"Green绿色"},"score":0,"creation_date":1659055227,"post_id":73152091,"comment_id":129210363,"body_markdown":"I see. In our current project, we do exactly the same, but the JNI code is rather hardly coupled to the Java code structure, so I thought, I&#39;d be better to put it into the Java project. However, what&#39;s the rationale of the `java` folder then? isn&#39;t it redundant then?","body":"I see. In our current project, we do exactly the same, but the JNI code is rather hardly coupled to the Java code structure, so I thought, I&#39;d be better to put it into the Java project. However, what&#39;s the rationale of the <code>java</code> folder then? isn&#39;t it redundant then?"},{"owner":{"account_id":1198039,"reputation":10944,"user_id":1169349,"display_name":"Reg"},"score":0,"creation_date":1659076469,"post_id":73152091,"comment_id":129213506,"body_markdown":"I don&#39;t think so, as the other folder would normally be a resource folder. So Java Code and Resources? But I am not 100% sure what the creators had in mind. I have worked with maven for 10 years now and have never questioned it :D","body":"I don&#39;t think so, as the other folder would normally be a resource folder. So Java Code and Resources? But I am not 100% sure what the creators had in mind. I have worked with maven for 10 years now and have never questioned it :D"},{"owner":{"account_id":1198039,"reputation":10944,"user_id":1169349,"display_name":"Reg"},"score":0,"creation_date":1659076674,"post_id":73152091,"comment_id":129213550,"body_markdown":"With no practical experience, I would have create maven 1 project with 2 Modules Then use the maven-nar-plugin to build the c++ module and just the standard for the other. This way, you don&#39;t get two build systems on the same folder structure.","body":"With no practical experience, I would have create maven 1 project with 2 Modules Then use the maven-nar-plugin to build the c++ module and just the standard for the other. This way, you don&#39;t get two build systems on the same folder structure."},{"owner":{"account_id":3581132,"reputation":1802,"user_id":2989330,"accept_rate":69,"display_name":"Green绿色"},"score":1,"creation_date":1659078651,"post_id":73152091,"comment_id":129214097,"body_markdown":"Thank you for you&#39;re suggestions. You&#39;re right, the other folder is `resources`, I overlooked it when I was thinking about this question.","body":"Thank you for you&#39;re suggestions. You&#39;re right, the other folder is <code>resources</code>, I overlooked it when I was thinking about this question."},{"owner":{"account_id":3581132,"reputation":1802,"user_id":2989330,"accept_rate":69,"display_name":"Green绿色"},"score":1,"creation_date":1669279734,"post_id":73152091,"comment_id":131609998,"body_markdown":"Little addition: When creating a C++ project in Android Studio, the default project structure is exactly as I described above. They also have a `cpp/` directory in `src/main` next to `java/` and `resources/`.","body":"Little addition: When creating a C++ project in Android Studio, the default project structure is exactly as I described above. They also have a <code>cpp&#47;</code> directory in <code>src&#47;main</code> next to <code>java&#47;</code> and <code>resources&#47;</code>."}],"answers":[{"tags":[],"owner":{"account_id":3581132,"reputation":1802,"user_id":2989330,"accept_rate":69,"display_name":"Green绿色"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671268392,"creation_date":1671268392,"answer_id":74832972,"question_id":73152091,"body_markdown":"According to the description of the [Maven directory structure](https://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html):\r\n\r\n&gt; If there are other contributing sources to the artifact build, they would be under other subdirectories. For example src/main/antlr would contain Antlr grammar definition files.\r\n\r\nTaking into account that JNI code is also something contributing to the artifact build, that the default Android Studio project structure for Android apps with NDK also includes a folder `src/main/cpp`, and that JNI code is naturally hardly coupled with the corresponding Java class, I believe it&#39;s best to include at least the JNI code into the Java project at `src/main/cpp`. Usually, the core C/C++ library code is something generalizable, so it would be kept in a separate project and built separately.","title":"Maven project structure for Java+JNI project","body":"<p>According to the description of the <a href=\"https://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html\" rel=\"nofollow noreferrer\">Maven directory structure</a>:</p>\n<blockquote>\n<p>If there are other contributing sources to the artifact build, they would be under other subdirectories. For example src/main/antlr would contain Antlr grammar definition files.</p>\n</blockquote>\n<p>Taking into account that JNI code is also something contributing to the artifact build, that the default Android Studio project structure for Android apps with NDK also includes a folder <code>src/main/cpp</code>, and that JNI code is naturally hardly coupled with the corresponding Java class, I believe it's best to include at least the JNI code into the Java project at <code>src/main/cpp</code>. Usually, the core C/C++ library code is something generalizable, so it would be kept in a separate project and built separately.</p>\n"}],"owner":{"account_id":3581132,"reputation":1802,"user_id":2989330,"accept_rate":69,"display_name":"Green绿色"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":208,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1671268392,"creation_date":1659007536,"question_id":73152091,"body_markdown":"The default Java Maven project structure is usually\r\n\r\n```\r\nsrc/\r\n  main/\r\n    java/\r\n      org/example/Main.java\r\n  test/\r\n    java/\r\n```\r\n\r\nIf I have a project with C++/JNI code, would it be right to extend on this idea and put the C++ code into the folder `src/main/cpp` or would it be usually put somewhere else? If so, what is the rationale behind the `java` folder?","title":"Maven project structure for Java+JNI project","body":"<p>The default Java Maven project structure is usually</p>\n<pre><code>src/\n  main/\n    java/\n      org/example/Main.java\n  test/\n    java/\n</code></pre>\n<p>If I have a project with C++/JNI code, would it be right to extend on this idea and put the C++ code into the folder <code>src/main/cpp</code> or would it be usually put somewhere else? If so, what is the rationale behind the <code>java</code> folder?</p>\n"},{"tags":["java","cloudflare","htmlunit"],"comments":[{"owner":{"account_id":6163228,"reputation":2754,"user_id":4804091,"display_name":"RBRi"},"score":0,"creation_date":1670571580,"post_id":74732202,"comment_id":131909330,"body_markdown":"at least the cookie isssue should be fixed - https://github.com/HtmlUnit/htmlunit/issues/524","body":"at least the cookie isssue should be fixed - <a href=\"https://github.com/HtmlUnit/htmlunit/issues/524\" rel=\"nofollow noreferrer\">github.com/HtmlUnit/htmlunit/issues/524</a>"},{"owner":{"account_id":16209077,"reputation":389,"user_id":11703579,"display_name":"gbossa"},"score":0,"creation_date":1671046925,"post_id":74732202,"comment_id":132015594,"body_markdown":"Thanks man! Is this updated repo on Maven?","body":"Thanks man! Is this updated repo on Maven?"},{"owner":{"account_id":6163228,"reputation":2754,"user_id":4804091,"display_name":"RBRi"},"score":0,"creation_date":1671090231,"post_id":74732202,"comment_id":132023751,"body_markdown":"there is an updated snapshot available - you can find some info on how to switch to the snapshot on the bottom of this https://github.com/HtmlUnit/htmlunit page.","body":"there is an updated snapshot available - you can find some info on how to switch to the snapshot on the bottom of this <a href=\"https://github.com/HtmlUnit/htmlunit\" rel=\"nofollow noreferrer\">github.com/HtmlUnit/htmlunit</a> page."},{"owner":{"account_id":16209077,"reputation":389,"user_id":11703579,"display_name":"gbossa"},"score":0,"creation_date":1671109943,"post_id":74732202,"comment_id":132030303,"body_markdown":"Well, that did it. At least for my problem, update the version of htmlunit did the trick. (Had to update apache.commons.lang3 too). Please, post it as an answer so I can accept. Thanks!","body":"Well, that did it. At least for my problem, update the version of htmlunit did the trick. (Had to update apache.commons.lang3 too). Please, post it as an answer so I can accept. Thanks!"},{"owner":{"account_id":6163228,"reputation":2754,"user_id":4804091,"display_name":"RBRi"},"score":0,"creation_date":1671268151,"post_id":74732202,"comment_id":132066346,"body_markdown":"bgossa - done :-)","body":"bgossa - done :-)"}],"answers":[{"tags":[],"owner":{"account_id":6163228,"reputation":2754,"user_id":4804091,"display_name":"RBRi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1671268105,"creation_date":1671268105,"answer_id":74832946,"question_id":74732202,"body_markdown":"There was an update/fix regarding the cookie processing in HtmlUnit. The latest 2.68.0-SNAPSHOT or all future releases should fix that.\r\n\r\nSee https://github.com/HtmlUnit/htmlunit/issues/524 for more.\r\n\r\nThis is also related to https://stackoverflow.com/questions/74619619/htmlunit-returning-empty-list-of-domelements/74812329#74812329","title":"Java Htmlunit Cloudflare protection stuck on redirecting to the final page","body":"<p>There was an update/fix regarding the cookie processing in HtmlUnit. The latest 2.68.0-SNAPSHOT or all future releases should fix that.</p>\n<p>See <a href=\"https://github.com/HtmlUnit/htmlunit/issues/524\" rel=\"nofollow noreferrer\">https://github.com/HtmlUnit/htmlunit/issues/524</a> for more.</p>\n<p>This is also related to <a href=\"https://stackoverflow.com/questions/74619619/htmlunit-returning-empty-list-of-domelements/74812329#74812329\">HtmlUnit returning empty list of DomElements</a></p>\n"}],"owner":{"account_id":16209077,"reputation":389,"user_id":11703579,"display_name":"gbossa"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":235,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74832946,"answer_count":1,"score":1,"last_activity_date":1671268105,"creation_date":1670511296,"question_id":74732202,"body_markdown":"So, I am trying to access a website (using `Java Htmlunit - version 2.20 - can&#180;t update it, company policies`) - it is a government website - `https://www2.aneel.gov.br:443/aplicacoes_liferay/tarifa/` - hosted by Cloudflare. \r\n\r\nWhen accessing via normal Browser, everything is normal. When accessing via `htmlunit`, Cloudflare starts the proccess of `Checking if the site connection is secure`. \r\n\r\nI can proceed to the next step, which is `Connection is secure - Proceeding...`\r\nBut it just stucks there. \r\nPlease, how can I bypass it correctly.\r\n\r\nP.S.: There is no way to have my `IP` on a whitelist for this. I must go through this verification and redirection on my own. \r\n\r\nThanks in advance!\r\n\r\nSome code sample: \r\n\r\n    BrowserVersion chrome = new BrowserVersion(\r\n\t\t\t\t&quot;Netscape&quot;, \r\n\t\t\t\t&quot;5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/108.0.0.0 Safari/537.36&quot;, \r\n\t\t\t\t&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/108.0.0.0 Safari/537.36&quot;, \r\n\t\t\t\t108);\r\n\t\tchrome.setApplicationCodeName(&quot;Mozilla&quot;);\r\n\t\tchrome.setVendor(&quot;Google Inc.&quot;);\r\n\t\tchrome.setHtmlAcceptHeader(&quot;text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9&quot;);\r\n\t\tchrome.setImgAcceptHeader(&quot;image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8&quot;);\r\n\t\tchrome.setCssAcceptHeader(&quot;text/css,*/*;q=0.1&quot;);\r\n\t\tchrome.setScriptAcceptHeader(&quot;*/*&quot;);\r\n\t\tchrome.setBrowserLanguage(&quot;en-US,en;q=0.9,pt;q=0.8,mt;q=0.7&quot;);\r\n\t\tchrome.setPlatform(&quot;Windows&quot;);\r\n\t\tchrome.setUserLanguage(&quot;pt-BR&quot;);\r\n\t\tchrome.setSystemLanguage(&quot;pt-BR&quot;);\r\n\t\t\r\n\t\ttry (WebClient webClient = new WebClient(chrome)) {\r\n\t\t\tString url = &quot;https://www2.aneel.gov.br:443/aplicacoes_liferay/tarifa/&quot;;\r\n\t\t\t\r\n\t\t\t// par&#226;metros do webclient\r\n\t\t\twebClient.getOptions().setCssEnabled(true);\r\n\t\t\twebClient.setJavaScriptTimeout(0);\r\n\t\t\twebClient.getOptions().setThrowExceptionOnScriptError(false);\r\n\t\t\twebClient.getOptions().setUseInsecureSSL(false);\r\n\t\t\twebClient.getOptions().setThrowExceptionOnFailingStatusCode(false);\r\n\t\t\twebClient.getOptions().setTimeout(0);\r\n\t\t\t\r\n\t\t\tCookieManager cookies = new CookieManager();\r\n\t\t\t\r\n\t\t\tcookies.setCookiesEnabled(true);\r\n\t\t\twebClient.setCookieManager(cookies);\r\n\t\t\t\r\n\t\t\t\r\n\t\t\twebClient.getOptions().setJavaScriptEnabled(true);\r\n\t\t\twebClient.getOptions().setRedirectEnabled(true);\r\n\t\t\t\r\n\t\t\twebClient.waitForBackgroundJavaScript(10000);\r\n\t\t\twebClient.waitForBackgroundJavaScriptStartingBefore(10000);\r\n\t\t\t\r\n\t\t\twebClient.getCache().setMaxSize(0);\r\n\t\t\t\r\n\t\t\tHtmlPage page = webClient.getPage(url);\r\n\t\t\twebClient.getRefreshHandler().handleRefresh(page, new URL(url), 10);\r\n\t\t\t\r\n\t\t\tsynchronized(page) {\r\n\t\t        page.wait(10000);\r\n\t\t    }\r\n\t\t\t\r\n\t\t\tURL _url = new URL(url);\r\n\t\t\t\r\n\t\t    for(Cookie c : webClient.getCookies(_url)) {\r\n\t\t        if (c.getName().contains(&quot;cf_chl_2&quot;)) {\r\n        \t\t\t\r\n\t\t        \tCookie cook = new Cookie(c.getDomain(), c.getName(), c.getValue(), c.getPath(), -1, false);\r\n\t\t        \twebClient.getCookieManager().removeCookie(c);\r\n\t\t        \twebClient.getCookieManager().addCookie(cook);\r\n\t\t        }\r\n\t\t    }\r\n\t\t\t\r\n\t\t\tif (page.asXml().contains(&quot;Checking if the site connection is secure&quot;)) {\r\n\t\t\t\tlog.info(page.asXml());\r\n\t\t\t\t\r\n\t\t\t    page = webClient.getPage(url);\r\n\t\t\t    webClient.waitForBackgroundJavaScript(10_000);\r\n\t\t\t}\r\n\r\n(Some parts of this code, I got from this [question/answer][1])\r\n\r\n\r\nSome parts of the log I got so far...\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\nAs you can see, `Checking if the site connection is secure` and `Proceeding...` appears. But... It&#180;s just it.... (Error: 1020, Firewall stuff...)...\r\n\r\nP.S.: This manually added cookie is to replace a cookie that was returning an error of negative max age.\r\n\r\n    [com.gargoylesoftware.htmlunit.IncorrectnessListenerImpl] (JS executor for com.gargoylesoftware.htmlunit.WebClient@724c8784) set-cookie http-equiv meta tag: invalid cookie &#39;cf_chl_2=; Max-Age=-99999999;&#39;; reason: &#39;Negative &#39;max-age&#39; attribute: -99999999&#39;.\r\n\r\n\r\nSo please, in the name of the `Gods of Programming Languages`, how can I procceed to the final webpage? \r\n\r\nThanks!!!!\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/32232259/accessing-webpage-with-cloudflare-protection\r\n  [2]: https://i.stack.imgur.com/pHeI3.png","title":"Java Htmlunit Cloudflare protection stuck on redirecting to the final page","body":"<p>So, I am trying to access a website (using <code>Java Htmlunit - version 2.20 - can´t update it, company policies</code>) - it is a government website - <code>https://www2.aneel.gov.br:443/aplicacoes_liferay/tarifa/</code> - hosted by Cloudflare.</p>\n<p>When accessing via normal Browser, everything is normal. When accessing via <code>htmlunit</code>, Cloudflare starts the proccess of <code>Checking if the site connection is secure</code>.</p>\n<p>I can proceed to the next step, which is <code>Connection is secure - Proceeding...</code>\nBut it just stucks there.\nPlease, how can I bypass it correctly.</p>\n<p>P.S.: There is no way to have my <code>IP</code> on a whitelist for this. I must go through this verification and redirection on my own.</p>\n<p>Thanks in advance!</p>\n<p>Some code sample:</p>\n<pre><code>BrowserVersion chrome = new BrowserVersion(\n            &quot;Netscape&quot;, \n            &quot;5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/108.0.0.0 Safari/537.36&quot;, \n            &quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/108.0.0.0 Safari/537.36&quot;, \n            108);\n    chrome.setApplicationCodeName(&quot;Mozilla&quot;);\n    chrome.setVendor(&quot;Google Inc.&quot;);\n    chrome.setHtmlAcceptHeader(&quot;text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9&quot;);\n    chrome.setImgAcceptHeader(&quot;image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8&quot;);\n    chrome.setCssAcceptHeader(&quot;text/css,*/*;q=0.1&quot;);\n    chrome.setScriptAcceptHeader(&quot;*/*&quot;);\n    chrome.setBrowserLanguage(&quot;en-US,en;q=0.9,pt;q=0.8,mt;q=0.7&quot;);\n    chrome.setPlatform(&quot;Windows&quot;);\n    chrome.setUserLanguage(&quot;pt-BR&quot;);\n    chrome.setSystemLanguage(&quot;pt-BR&quot;);\n    \n    try (WebClient webClient = new WebClient(chrome)) {\n        String url = &quot;https://www2.aneel.gov.br:443/aplicacoes_liferay/tarifa/&quot;;\n        \n        // parâmetros do webclient\n        webClient.getOptions().setCssEnabled(true);\n        webClient.setJavaScriptTimeout(0);\n        webClient.getOptions().setThrowExceptionOnScriptError(false);\n        webClient.getOptions().setUseInsecureSSL(false);\n        webClient.getOptions().setThrowExceptionOnFailingStatusCode(false);\n        webClient.getOptions().setTimeout(0);\n        \n        CookieManager cookies = new CookieManager();\n        \n        cookies.setCookiesEnabled(true);\n        webClient.setCookieManager(cookies);\n        \n        \n        webClient.getOptions().setJavaScriptEnabled(true);\n        webClient.getOptions().setRedirectEnabled(true);\n        \n        webClient.waitForBackgroundJavaScript(10000);\n        webClient.waitForBackgroundJavaScriptStartingBefore(10000);\n        \n        webClient.getCache().setMaxSize(0);\n        \n        HtmlPage page = webClient.getPage(url);\n        webClient.getRefreshHandler().handleRefresh(page, new URL(url), 10);\n        \n        synchronized(page) {\n            page.wait(10000);\n        }\n        \n        URL _url = new URL(url);\n        \n        for(Cookie c : webClient.getCookies(_url)) {\n            if (c.getName().contains(&quot;cf_chl_2&quot;)) {\n                \n                Cookie cook = new Cookie(c.getDomain(), c.getName(), c.getValue(), c.getPath(), -1, false);\n                webClient.getCookieManager().removeCookie(c);\n                webClient.getCookieManager().addCookie(cook);\n            }\n        }\n        \n        if (page.asXml().contains(&quot;Checking if the site connection is secure&quot;)) {\n            log.info(page.asXml());\n            \n            page = webClient.getPage(url);\n            webClient.waitForBackgroundJavaScript(10_000);\n        }\n</code></pre>\n<p>(Some parts of this code, I got from this <a href=\"https://stackoverflow.com/questions/32232259/accessing-webpage-with-cloudflare-protection\">question/answer</a>)</p>\n<p>Some parts of the log I got so far...</p>\n<p><a href=\"https://i.stack.imgur.com/pHeI3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pHeI3.png\" alt=\"enter image description here\" /></a></p>\n<p>As you can see, <code>Checking if the site connection is secure</code> and <code>Proceeding...</code> appears. But... It´s just it.... (Error: 1020, Firewall stuff...)...</p>\n<p>P.S.: This manually added cookie is to replace a cookie that was returning an error of negative max age.</p>\n<pre><code>[com.gargoylesoftware.htmlunit.IncorrectnessListenerImpl] (JS executor for com.gargoylesoftware.htmlunit.WebClient@724c8784) set-cookie http-equiv meta tag: invalid cookie 'cf_chl_2=; Max-Age=-99999999;'; reason: 'Negative 'max-age' attribute: -99999999'.\n</code></pre>\n<p>So please, in the name of the <code>Gods of Programming Languages</code>, how can I procceed to the final webpage?</p>\n<p>Thanks!!!!</p>\n"},{"tags":["java","spring-boot","file-io","operating-system","heap-memory"],"owner":{"account_id":16514934,"reputation":137,"user_id":11932679,"display_name":"Spring boot progammer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671268058,"creation_date":1671262510,"question_id":74832483,"body_markdown":"I am using Spring Boot to read through CSV file and processing the data. \r\nBut I notice, while reading the data and PipedOutputStream to write data into PipedInputStream and later reading the InputStream increases the heap memory usage? \r\nWhy is that happening since we are not storing anything in memory, the maximum heap memory for my system is 1GB and file size is 51MB. \r\nI am using the following code to read the file:\r\n```\r\n//data =&gt; FilePart data is read from API\r\n PipedOutputStream osPipe = new PipedOutputStream();\r\n    PipedInputStream isPipe = new PipedInputStream(osPipe);\r\n    DataBufferUtils.write(data, osPipe)\r\n        .doOnComplete(() -&gt; {\r\n            osPipe.close();\r\n        })\r\n        .subscribe(DataBufferUtils.releaseConsumer());\r\n    BufferedReader reader = new InputStreamReader(isPipe);\r\n    CsvToBean&lt;T&gt; cb = new CsvToBeanBuilder&lt;T&gt;(reader).withType(clazz).withFilter(\r\n        lineString -&gt; Arrays.stream(lineString).map(String::trim)\r\n            .anyMatch(value -&gt; value.length() &gt; 0)).build();\r\n    return cb.parse(); \r\n\r\n```","title":"JVM Heap memory usage increases with increase in writing data using PipedInputStream and PipedOutputStream","body":"<p>I am using Spring Boot to read through CSV file and processing the data.\nBut I notice, while reading the data and PipedOutputStream to write data into PipedInputStream and later reading the InputStream increases the heap memory usage?\nWhy is that happening since we are not storing anything in memory, the maximum heap memory for my system is 1GB and file size is 51MB.\nI am using the following code to read the file:</p>\n<pre><code>//data =&gt; FilePart data is read from API\n PipedOutputStream osPipe = new PipedOutputStream();\n    PipedInputStream isPipe = new PipedInputStream(osPipe);\n    DataBufferUtils.write(data, osPipe)\n        .doOnComplete(() -&gt; {\n            osPipe.close();\n        })\n        .subscribe(DataBufferUtils.releaseConsumer());\n    BufferedReader reader = new InputStreamReader(isPipe);\n    CsvToBean&lt;T&gt; cb = new CsvToBeanBuilder&lt;T&gt;(reader).withType(clazz).withFilter(\n        lineString -&gt; Arrays.stream(lineString).map(String::trim)\n            .anyMatch(value -&gt; value.length() &gt; 0)).build();\n    return cb.parse(); \n\n</code></pre>\n"},{"tags":["java","javax.sound.midi"],"answers":[{"tags":[],"owner":{"account_id":9026259,"reputation":1316,"user_id":6725459,"display_name":"jjazzboss"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671267667,"creation_date":1671267667,"answer_id":74832910,"question_id":74826672,"body_markdown":"To be notified when a Sequencer plays a Note ON/OFF, you need a custom Receiver and connect it to the Sequencer. \r\n\r\n    Receiver myReceiver = new Receiver()\r\n    {\r\n        public void send(MidiMessage message, long timeStamp)\r\n        {\r\n            // If it&#39;s a NOTE_ON/NOTE_OFF then do something, preferably on a different thread if it&#39;s a long task\r\n        }\r\n        ...\r\n    };\r\n\r\n    ...\r\n    sequencer.getTransmitter().setReceiver(myReceiver);","title":"Each time sequencer plays event, do something","body":"<p>To be notified when a Sequencer plays a Note ON/OFF, you need a custom Receiver and connect it to the Sequencer.</p>\n<pre><code>Receiver myReceiver = new Receiver()\n{\n    public void send(MidiMessage message, long timeStamp)\n    {\n        // If it's a NOTE_ON/NOTE_OFF then do something, preferably on a different thread if it's a long task\n    }\n    ...\n};\n\n...\nsequencer.getTransmitter().setReceiver(myReceiver);\n</code></pre>\n"}],"owner":{"account_id":21500466,"reputation":1,"user_id":15844761,"display_name":"fakezoo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1671267667,"creation_date":1671205336,"question_id":74826672,"body_markdown":"We are trying to write a low-level guitar Hero clone for a semester project. \r\n\r\nI have created the track, sequence and sequencer for a song. Now I want the sequencer to notify another class every time its processes/plays an event of type NOTE_ON in its sequence. The other class would then set the timing for the user to hit a certain key on their keyboard.\r\n\r\n\r\n\r\nI do not know if what I am trying here is possible. This is my current code, it uses a sequence that has been filled by a track. The track has several MidiEvents, so far the only statuses are NOTE_ON and NOTE_OFF. \r\n\r\n\r\n```\r\npublic void startSequencer() throws MidiUnavailableException, InterruptedException, InvalidMidiDataException {\r\n\r\n    sequencer.open();\r\n    Thread.sleep(2000);\r\n\r\n\r\n    // sequence includes a single track\r\n    sequencer.setSequence(sequence);\r\n\r\n    //Start sequencer, music plays\r\n    sequencer.start();\r\n\r\n    //TODO Sync sequencer with UserInputHandler, via Sequencer.Syncmode?\r\n\r\n    //Check every 100 ms if the sequencer is still running, if not, close it.\r\n    while (sequencer.isRunning()) {\r\n        Thread.sleep(100);\r\n    }\r\n    sequencer.close();\r\n}\r\n```\r\n","title":"Each time sequencer plays event, do something","body":"<p>We are trying to write a low-level guitar Hero clone for a semester project.</p>\n<p>I have created the track, sequence and sequencer for a song. Now I want the sequencer to notify another class every time its processes/plays an event of type NOTE_ON in its sequence. The other class would then set the timing for the user to hit a certain key on their keyboard.</p>\n<p>I do not know if what I am trying here is possible. This is my current code, it uses a sequence that has been filled by a track. The track has several MidiEvents, so far the only statuses are NOTE_ON and NOTE_OFF.</p>\n<pre><code>public void startSequencer() throws MidiUnavailableException, InterruptedException, InvalidMidiDataException {\n\n    sequencer.open();\n    Thread.sleep(2000);\n\n\n    // sequence includes a single track\n    sequencer.setSequence(sequence);\n\n    //Start sequencer, music plays\n    sequencer.start();\n\n    //TODO Sync sequencer with UserInputHandler, via Sequencer.Syncmode?\n\n    //Check every 100 ms if the sequencer is still running, if not, close it.\n    while (sequencer.isRunning()) {\n        Thread.sleep(100);\n    }\n    sequencer.close();\n}\n</code></pre>\n"},{"tags":["java","maven","jenkins"],"comments":[{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":3,"creation_date":1496160722,"post_id":44266942,"comment_id":75542361,"body_markdown":"Don&#39;t use MavenJob Type...simply using pipeline jobs etc. there you can decide which JDK version you use ...","body":"Don&#39;t use MavenJob Type...simply using pipeline jobs etc. there you can decide which JDK version you use ..."},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1496161337,"post_id":44266942,"comment_id":75542730,"body_markdown":"The interaction is based on that Jenkins will try to be informed about finishing single modules and if there are artifacts being created and some other stuff. This is handled by a EventSpy implementation in Jenkins. That can cause issues like this.","body":"The interaction is based on that Jenkins will try to be informed about finishing single modules and if there are artifacts being created and some other stuff. This is handled by a EventSpy implementation in Jenkins. That can cause issues like this."},{"owner":{"account_id":1169697,"reputation":1416,"user_id":1147141,"accept_rate":42,"display_name":"bichito"},"score":0,"creation_date":1498478049,"post_id":44266942,"comment_id":76498787,"body_markdown":"Is there something about the 1.7 tool chain or just need 1.7 bytecode?","body":"Is there something about the 1.7 tool chain or just need 1.7 bytecode?"},{"owner":{"account_id":1223747,"reputation":1055,"user_id":1189810,"display_name":"JSamir"},"score":0,"creation_date":1498568041,"post_id":44266942,"comment_id":76542154,"body_markdown":"@khmarbaise if you post your comment as an answer I would accept it since that helped me solve the problem by using a pipeline job.","body":"@khmarbaise if you post your comment as an answer I would accept it since that helped me solve the problem by using a pipeline job."}],"answers":[{"tags":[],"owner":{"account_id":3936130,"reputation":723,"user_id":3252477,"display_name":"Kineolyan"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1498477409,"creation_date":1498477409,"answer_id":44758972,"question_id":44266942,"body_markdown":"this is apparently a technical limitation of Jenkins plugin [**Maven Integration**](https://plugins.jenkins.io/maven-plugin).\r\n\r\n&gt; Because java serialized classes are exchanged between Jenkins master and Maven Jobs it is required that the JVM used to launch Maven is superior or equal to the version of Java for which Jenkins Master is built for.\r\n\r\nI suspect that you have a Jenkins version too recent, requiring a JDK version &gt;= 8.  \r\nAs the required version was 7, you could either use java 7 or 8 - or even 9. So your build succeeded with Java7, even if your Jenkins was started with Java8.\r\n\r\nYou can either downgrade your Jenkins installation, or move all your builds to Java8.\r\n\r\nCheers","title":"How to use Jenkins 2.63 with jobs which should be built using Java 1.7?","body":"<p>this is apparently a technical limitation of Jenkins plugin <a href=\"https://plugins.jenkins.io/maven-plugin\" rel=\"nofollow noreferrer\"><strong>Maven Integration</strong></a>.</p>\n\n<blockquote>\n  <p>Because java serialized classes are exchanged between Jenkins master and Maven Jobs it is required that the JVM used to launch Maven is superior or equal to the version of Java for which Jenkins Master is built for.</p>\n</blockquote>\n\n<p>I suspect that you have a Jenkins version too recent, requiring a JDK version >= 8.<br>\nAs the required version was 7, you could either use java 7 or 8 - or even 9. So your build succeeded with Java7, even if your Jenkins was started with Java8.</p>\n\n<p>You can either downgrade your Jenkins installation, or move all your builds to Java8.</p>\n\n<p>Cheers</p>\n"},{"tags":[],"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1498575787,"creation_date":1498575787,"answer_id":44783706,"question_id":44266942,"body_markdown":"The interaction is based on that Jenkins will try to be informed about finishing single modules and if there are artifacts being created and some other stuff. This is handled by a EventSpy implementation in Jenkins. That can cause issues like this.","title":"How to use Jenkins 2.63 with jobs which should be built using Java 1.7?","body":"<p>The interaction is based on that Jenkins will try to be informed about finishing single modules and if there are artifacts being created and some other stuff. This is handled by a EventSpy implementation in Jenkins. That can cause issues like this.</p>\n"},{"tags":[],"owner":{"account_id":379152,"reputation":3080,"user_id":732328,"accept_rate":40,"display_name":"Kayvan Tehrani"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1671267593,"creation_date":1512593791,"answer_id":47683327,"question_id":44266942,"body_markdown":"As you might probably know Jenkins &gt;= 2.54 requires Java &gt;= 8 thus Maven jobs must be launched with Java &gt;= 8\r\n\r\nBesides that the Error message is guiding you with:\r\n\r\n&gt; ***Use the Maven JDK Toolchains (plugin) to build your maven project***...\r\n\r\nUsing that plugin would probably help you to run your jenkins job using **Java 8** and also compile your project files using **Java 7**.\r\n\r\nI resolved my problem this way some years ago.\r\n\r\nYou can see more details on [this Answer][1]. \r\n\r\n\r\n  [1]: https://stackoverflow.com/a/47669588/732328","title":"How to use Jenkins 2.63 with jobs which should be built using Java 1.7?","body":"<p>As you might probably know Jenkins &gt;= 2.54 requires Java &gt;= 8 thus Maven jobs must be launched with Java &gt;= 8</p>\n<p>Besides that the Error message is guiding you with:</p>\n<blockquote>\n<p><em><strong>Use the Maven JDK Toolchains (plugin) to build your maven project</strong></em>...</p>\n</blockquote>\n<p>Using that plugin would probably help you to run your jenkins job using <strong>Java 8</strong> and also compile your project files using <strong>Java 7</strong>.</p>\n<p>I resolved my problem this way some years ago.</p>\n<p>You can see more details on <a href=\"https://stackoverflow.com/a/47669588/732328\">this Answer</a>.</p>\n"},{"tags":[],"owner":{"account_id":231683,"reputation":4218,"user_id":496038,"display_name":"pringi"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1520416490,"creation_date":1520416490,"answer_id":49148879,"question_id":44266942,"body_markdown":"For using **Java 1.7** on *Jenkins &gt;= 2.54* you need to transform the *Maven project* in a *Free-style project*. In the *Free-style project* you can specify the *JDK* version. This is because starting from version *2.54*, *Jenkins* was upgraded to use *Java 8*.\r\n\r\n\r\nFrom Jenkins [release notes][1]:\r\n\r\n&gt; **Using the Maven project type with Java 7**\r\n&gt; \r\n&gt; Users with jobs configured with the &quot;Maven project&quot; type may not be\r\n&gt; able to use Java 7 for their Maven jobs. The correct behavior is not\r\n&gt; guaranteed so proceed at your own risk. The Maven Project uses Jenkins\r\n&gt; Remoting to establish &quot;interceptors&quot; within the Maven executable.\r\n&gt; Because of this, Maven uses Remoting and other Jenkins core classes,\r\n&gt; and this behavior may break an update\r\n\r\n\r\nYou can also see [here][2] how to create a *Free-style project* \r\n\r\n\r\n  [1]: https://jenkins.io/blog/2017/04/10/jenkins-has-upgraded-to-java-8/\r\n  [2]: https://wiki.jenkins.io/display/JENKINS/Building+a+software+project","title":"How to use Jenkins 2.63 with jobs which should be built using Java 1.7?","body":"<p>For using <strong>Java 1.7</strong> on <em>Jenkins >= 2.54</em> you need to transform the <em>Maven project</em> in a <em>Free-style project</em>. In the <em>Free-style project</em> you can specify the <em>JDK</em> version. This is because starting from version <em>2.54</em>, <em>Jenkins</em> was upgraded to use <em>Java 8</em>.</p>\n\n<p>From Jenkins <a href=\"https://jenkins.io/blog/2017/04/10/jenkins-has-upgraded-to-java-8/\" rel=\"nofollow noreferrer\">release notes</a>:</p>\n\n<blockquote>\n  <p><strong>Using the Maven project type with Java 7</strong></p>\n  \n  <p>Users with jobs configured with the \"Maven project\" type may not be\n  able to use Java 7 for their Maven jobs. The correct behavior is not\n  guaranteed so proceed at your own risk. The Maven Project uses Jenkins\n  Remoting to establish \"interceptors\" within the Maven executable.\n  Because of this, Maven uses Remoting and other Jenkins core classes,\n  and this behavior may break an update</p>\n</blockquote>\n\n<p>You can also see <a href=\"https://wiki.jenkins.io/display/JENKINS/Building+a+software+project\" rel=\"nofollow noreferrer\">here</a> how to create a <em>Free-style project</em> </p>\n"}],"owner":{"account_id":1223747,"reputation":1055,"user_id":1189810,"display_name":"JSamir"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2765,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":44783706,"answer_count":4,"score":4,"last_activity_date":1671267593,"creation_date":1496160063,"question_id":44266942,"body_markdown":"we have a Jenkins job which is/was configured to use JDK7. Upon inspecting the logs, i noticed following ERRORs:\r\n\r\n    ERROR: Invalid project setup: jenkins/security/MasterToSlaveCallable : Unsupported major.minor version 52.0\r\n    ERROR: [JENKINS-18403][JENKINS-28294] JDK &#39;JDK 1.7.0_45&#39; not supported to run Maven projects.\r\n    ERROR: Maven projects have to be launched with a Java version greater or equal to the minimum version required by the master.\r\n    ERROR: Use the Maven JDK Toolchains (plugin) to build your maven project with an older JDK.\r\n    ERROR: Retrying with slave Java and setting compile/test properties to point to /usr/java/jdk1.7.0_45/.\r\n\r\n\r\nAfter some googling it seems that there is some interaction between the Job and Jenkins itself. Since Jenkins is started with JDK8 and the Job with JDK7 it seems to produce this ERROR. The build is OK, because Jenkins then proceeds to build with JDK8. But we actually want this built with 1.7.\r\n\r\nSo the question is:\r\nIf we start Jenkins with JDK8, how can i get the Jobs to compile with JDK7 without this error?","title":"How to use Jenkins 2.63 with jobs which should be built using Java 1.7?","body":"<p>we have a Jenkins job which is/was configured to use JDK7. Upon inspecting the logs, i noticed following ERRORs:</p>\n\n<pre><code>ERROR: Invalid project setup: jenkins/security/MasterToSlaveCallable : Unsupported major.minor version 52.0\nERROR: [JENKINS-18403][JENKINS-28294] JDK 'JDK 1.7.0_45' not supported to run Maven projects.\nERROR: Maven projects have to be launched with a Java version greater or equal to the minimum version required by the master.\nERROR: Use the Maven JDK Toolchains (plugin) to build your maven project with an older JDK.\nERROR: Retrying with slave Java and setting compile/test properties to point to /usr/java/jdk1.7.0_45/.\n</code></pre>\n\n<p>After some googling it seems that there is some interaction between the Job and Jenkins itself. Since Jenkins is started with JDK8 and the Job with JDK7 it seems to produce this ERROR. The build is OK, because Jenkins then proceeds to build with JDK8. But we actually want this built with 1.7.</p>\n\n<p>So the question is:\nIf we start Jenkins with JDK8, how can i get the Jobs to compile with JDK7 without this error?</p>\n"},{"tags":["java","spring","spring-boot","spring-mvc"],"comments":[{"owner":{"account_id":2522926,"reputation":30310,"user_id":2192903,"accept_rate":73,"display_name":"Arnaud Denoyelle"},"score":0,"creation_date":1569924613,"post_id":58182553,"comment_id":102744911,"body_markdown":"Did you try to annotate the DTO class as @Validated in the controller method signature ? something like `void foo(@Validated MyDTO dto)`","body":"Did you try to annotate the DTO class as @Validated in the controller method signature ? something like <code>void foo(@Validated MyDTO dto)</code>"},{"owner":{"account_id":8389931,"reputation":503,"user_id":6298969,"display_name":"Rahul"},"score":0,"creation_date":1569925137,"post_id":58182553,"comment_id":102745153,"body_markdown":"@ArnaudDenoyelle This DTO has been used in multiple location more than 25 files, Do I have to make changes in every file? Is there any other solution?","body":"@ArnaudDenoyelle This DTO has been used in multiple location more than 25 files, Do I have to make changes in every file? Is there any other solution?"},{"owner":{"account_id":11478953,"reputation":937,"user_id":8413680,"display_name":"Sujay Mohan"},"score":0,"creation_date":1569930304,"post_id":58182553,"comment_id":102747782,"body_markdown":"Does you app has starter - spring-boot-starter-web which will load hibernate Validator to dependency. Which will validate the bean. Please go through this link - https://stackoverflow.com/questions/48200444/spring-validation-vs-hibernate-validation?rq=1","body":"Does you app has starter - spring-boot-starter-web which will load hibernate Validator to dependency. Which will validate the bean. Please go through this link - <a href=\"https://stackoverflow.com/questions/48200444/spring-validation-vs-hibernate-validation?rq=1\" title=\"spring validation vs hibernate validation\">stackoverflow.com/questions/48200444/&hellip;</a>"},{"owner":{"account_id":4475914,"reputation":14400,"user_id":3641067,"accept_rate":73,"display_name":"bur&#230;quete"},"score":0,"creation_date":1571384055,"post_id":58182553,"comment_id":103230406,"body_markdown":"Check my answer, it should resolve your issue. But if `@NotNull` does not work while `@JsonPattern` works, then it might be the case with the wrong `@NotNull` being used. Otherwise it seems you forgot adding `@Valid` on your controller method.","body":"Check my answer, it should resolve your issue. But if <code>@NotNull</code> does not work while <code>@JsonPattern</code> works, then it might be the case with the wrong <code>@NotNull</code> being used. Otherwise it seems you forgot adding <code>@Valid</code> on your controller method."}],"answers":[{"tags":[],"owner":{"account_id":11025369,"reputation":101,"user_id":8098444,"display_name":"A. Lefaux"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1569924641,"creation_date":1569924641,"answer_id":58182589,"question_id":58182553,"body_markdown":"Have you got the right import ?  \r\nI use ```import javax.validation.constraints.NotNull;```","title":"@NotNull annotation is not working in Spring boot application","body":"<p>Have you got the right import ?<br>\nI use <code>import javax.validation.constraints.NotNull;</code></p>\n"},{"tags":[],"owner":{"account_id":11377012,"reputation":12762,"user_id":8340997,"display_name":"Anish B."},"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1617544499,"creation_date":1569924890,"answer_id":58182663,"question_id":58182553,"body_markdown":"Your DTO class is correct. You have to use `@Valid` annotation. \r\n\r\nFor example :\r\n\r\n    @Controller\r\n    public class Controller {\r\n    \r\n        @PostMapping(&quot;/&quot;)\r\n        public String checkPersonInfo(@Valid AbstractDTO abstractDTO, BindingResult bindingResult) {\r\n    \r\n            if (bindingResult.hasErrors()) {\r\n                return &quot;some-page&quot;;\r\n            }\r\n            return &quot;some-other-page&quot;;\r\n        }\r\n    }\r\n\r\n**Refer to this &lt;a href=&quot;https://spring.io/guides/gs/validating-form-input/&quot;&gt;Spring Boot Example On Validating Form Input &lt;/a&gt; for reference.**\r\n\r\nWhy to use `@Valid` annotation ? \r\n\r\n*This allows you to validate the set of constraints applied on the data members of a class.*\r\n\r\n---\r\n\r\n*However, if you have XML based configuration in your project, then you have to add this below in the **applicationContext.xml** given below. (Source : &lt;a href=&quot;https://developer.ucsd.edu/develop/data-layer/jpa/java-validation-api.html&quot;&gt;here&lt;/a&gt;)*\r\n\r\n    &lt;bean\r\n        class=&quot;org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter&quot;&gt;\r\n        &lt;property name=&quot;webBindingInitializer&quot;&gt;\r\n            &lt;bean\r\n                class=&quot;org.springframework.web.bind.support.ConfigurableWebBindingInitializer&quot;&gt;\r\n                &lt;property name=&quot;validator&quot; ref=&quot;validator&quot; /&gt;\r\n            &lt;/bean&gt;\r\n        &lt;/property&gt;\r\n    &lt;/bean&gt; \r\n    \r\n        &lt;bean id=&quot;validator&quot;\r\n            class=&quot;org.springframework.validation.beanvalidation.LocalValidatorFactoryBean&quot;&gt;\r\n        &lt;/bean&gt;","title":"@NotNull annotation is not working in Spring boot application","body":"<p>Your DTO class is correct. You have to use <code>@Valid</code> annotation.</p>\n<p>For example :</p>\n<pre><code>@Controller\npublic class Controller {\n\n    @PostMapping(&quot;/&quot;)\n    public String checkPersonInfo(@Valid AbstractDTO abstractDTO, BindingResult bindingResult) {\n\n        if (bindingResult.hasErrors()) {\n            return &quot;some-page&quot;;\n        }\n        return &quot;some-other-page&quot;;\n    }\n}\n</code></pre>\n<p><strong>Refer to this <a href=\"https://spring.io/guides/gs/validating-form-input/\" rel=\"noreferrer\">Spring Boot Example On Validating Form Input </a> for reference.</strong></p>\n<p>Why to use <code>@Valid</code> annotation ?</p>\n<p><em>This allows you to validate the set of constraints applied on the data members of a class.</em></p>\n<hr />\n<p><em>However, if you have XML based configuration in your project, then you have to add this below in the <strong>applicationContext.xml</strong> given below. (Source : <a href=\"https://developer.ucsd.edu/develop/data-layer/jpa/java-validation-api.html\" rel=\"noreferrer\">here</a>)</em></p>\n<pre><code>&lt;bean\n    class=&quot;org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter&quot;&gt;\n    &lt;property name=&quot;webBindingInitializer&quot;&gt;\n        &lt;bean\n            class=&quot;org.springframework.web.bind.support.ConfigurableWebBindingInitializer&quot;&gt;\n            &lt;property name=&quot;validator&quot; ref=&quot;validator&quot; /&gt;\n        &lt;/bean&gt;\n    &lt;/property&gt;\n&lt;/bean&gt; \n\n    &lt;bean id=&quot;validator&quot;\n        class=&quot;org.springframework.validation.beanvalidation.LocalValidatorFactoryBean&quot;&gt;\n    &lt;/bean&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4475914,"reputation":14400,"user_id":3641067,"accept_rate":73,"display_name":"bur&#230;quete"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1569924916,"creation_date":1569924916,"answer_id":58182668,"question_id":58182553,"body_markdown":"You have an endpoint with some request body like;\r\n\r\n    @RestController\r\n    public class TheController {\r\n    \r\n        @PostMapping(path = &quot;/doSomething&quot;, consumes = &quot;application/json&quot;, produces = &quot;application/json&quot;)\r\n        public void post(@Valid @RequestBody AbstractDTO request) {\r\n            //code\r\n        }\r\n    }\r\n\r\nYou need to have `@Valid` annotation for the request object. Only with this you&#39;d have validation enabled for `AbstractDTO` for `/doSomething` endpoint.\r\n\r\nCheck [here](https://www.baeldung.com/spring-boot-bean-validation), for more in depth details","title":"@NotNull annotation is not working in Spring boot application","body":"<p>You have an endpoint with some request body like;</p>\n\n<pre><code>@RestController\npublic class TheController {\n\n    @PostMapping(path = \"/doSomething\", consumes = \"application/json\", produces = \"application/json\")\n    public void post(@Valid @RequestBody AbstractDTO request) {\n        //code\n    }\n}\n</code></pre>\n\n<p>You need to have <code>@Valid</code> annotation for the request object. Only with this you'd have validation enabled for <code>AbstractDTO</code> for <code>/doSomething</code> endpoint.</p>\n\n<p>Check <a href=\"https://www.baeldung.com/spring-boot-bean-validation\" rel=\"noreferrer\">here</a>, for more in depth details</p>\n"},{"tags":[],"owner":{"account_id":11671380,"reputation":41,"user_id":8546331,"display_name":"nguyen"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1671267384,"creation_date":1671266280,"answer_id":74832782,"question_id":58182553,"body_markdown":"**Description**\r\n\r\n1. In my case, I define 1 parent class A has 3 sub class B, C, D such as:\r\n\r\n&gt; public A {   private B bCommand;   private C cCommand;   private D\r\n&gt; dCommand; }\r\n\r\n2. I annotated @NotNull, @NotBlank for some fields in 3 sub class.\r\nIn Controller, I have put @Valid for function like that:\r\n\r\n&gt; @PostMapping() public ResponseEntity create(@RequestBody @Valid A   \r\n&gt; command){ }\r\n\r\n**Solution**\r\n1. I put @Valid for sub class which has field(s) need to check constraint.\r\n2. Example:\r\nClass B, C have some fields which have constraint like not null\r\n\r\n&gt; public A {  @Valid   private B bCommand;  @Valid   private C cCommand;\r\n&gt; private D dCommand; }\r\n\r\n","title":"@NotNull annotation is not working in Spring boot application","body":"<p><strong>Description</strong></p>\n<ol>\n<li>In my case, I define 1 parent class A has 3 sub class B, C, D such as:</li>\n</ol>\n<blockquote>\n<p>public A {   private B bCommand;   private C cCommand;   private D\ndCommand; }</p>\n</blockquote>\n<ol start=\"2\">\n<li>I annotated @NotNull, @NotBlank for some fields in 3 sub class.\nIn Controller, I have put @Valid for function like that:</li>\n</ol>\n<blockquote>\n<p>@PostMapping() public ResponseEntity create(@RequestBody @Valid A<br />\ncommand){ }</p>\n</blockquote>\n<p><strong>Solution</strong></p>\n<ol>\n<li>I put @Valid for sub class which has field(s) need to check constraint.</li>\n<li>Example:\nClass B, C have some fields which have constraint like not null</li>\n</ol>\n<blockquote>\n<p>public A {  @Valid   private B bCommand;  @Valid   private C cCommand;\nprivate D dCommand; }</p>\n</blockquote>\n"}],"owner":{"account_id":8389931,"reputation":503,"user_id":6298969,"display_name":"Rahul"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":54557,"favorite_count":0,"down_vote_count":0,"up_vote_count":21,"answer_count":4,"score":21,"last_activity_date":1671267384,"creation_date":1569924480,"question_id":58182553,"body_markdown":"Below is my DTO class.\r\n\r\n    public class AbstractDTO extends BaseDTO {\r\n\r\n        private Integer createdBy;\r\n    \r\n        @JsonFormat(shape = JsonFormat.Shape.STRING, pattern = DATE_FORMAT)\r\n        @NotNull(message = &quot;createdDate may not be null&quot;)\r\n        private LocalDateTime createdDate;\r\n\r\n        private Integer lastModifiedBy;\r\n        @JsonFormat(shape = JsonFormat.Shape.STRING, pattern = DATE_FORMAT)\r\n        private LocalDateTime lastModifiedDate;\r\n\r\n        private Boolean isActive;\r\n\r\n        // getter &amp; setters\r\n    }\r\n\r\nHere I am trying to annotate createdDate field as @NotNull but is it not working. It is allowing in request body and after executing the service in postman not getting any error.\r\n\r\nI have tried below options but no luck.\r\n\r\n**1) Tried to add maven dependency.**\r\n    \r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n\r\n**2) Tried to annotate DTO class as @Validated**\r\n\r\n**3) Tried to annotate createdDate field @Valid with @NotNull but still not luck.**\r\n\r\nPlease help me out with this issue. ","title":"@NotNull annotation is not working in Spring boot application","body":"<p>Below is my DTO class.</p>\n\n<pre><code>public class AbstractDTO extends BaseDTO {\n\n    private Integer createdBy;\n\n    @JsonFormat(shape = JsonFormat.Shape.STRING, pattern = DATE_FORMAT)\n    @NotNull(message = \"createdDate may not be null\")\n    private LocalDateTime createdDate;\n\n    private Integer lastModifiedBy;\n    @JsonFormat(shape = JsonFormat.Shape.STRING, pattern = DATE_FORMAT)\n    private LocalDateTime lastModifiedDate;\n\n    private Boolean isActive;\n\n    // getter &amp; setters\n}\n</code></pre>\n\n<p>Here I am trying to annotate createdDate field as @NotNull but is it not working. It is allowing in request body and after executing the service in postman not getting any error.</p>\n\n<p>I have tried below options but no luck.</p>\n\n<p><strong>1) Tried to add maven dependency.</strong></p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p><strong>2) Tried to annotate DTO class as @Validated</strong></p>\n\n<p><strong>3) Tried to annotate createdDate field @Valid with @NotNull but still not luck.</strong></p>\n\n<p>Please help me out with this issue. </p>\n"},{"tags":["java","try-with-resources"],"comments":[{"owner":{"account_id":12074363,"reputation":384,"user_id":8828452,"display_name":"Gryphon"},"score":1,"creation_date":1597255310,"post_id":63382197,"comment_id":112076087,"body_markdown":"An exception can be thrown during the ```close``` portion as well. So if the try block throws an exception, try-with-resources will attempt to close the filehandle, and if that _also_ throws an exception, then this would cover the case where both of them throw exceptions.\n\nFrom the same page:\n\n&quot;In the example writeToFileZipFileContents, an exception can be thrown from the try block, and **up to two exceptions can be thrown from the try-with-resources statement when it tries to close the ```ZipFile``` and ```BufferedWriter``` objects**&quot;","body":"An exception can be thrown during the <code>close</code> portion as well. So if the try block throws an exception, try-with-resources will attempt to close the filehandle, and if that <i>also</i> throws an exception, then this would cover the case where both of them throw exceptions.  From the same page:  &quot;In the example writeToFileZipFileContents, an exception can be thrown from the try block, and <b>up to two exceptions can be thrown from the try-with-resources statement when it tries to close the <code>ZipFile</code> and <code>BufferedWriter</code> objects</b>&quot;"}],"answers":[{"tags":[],"owner":{"account_id":123958,"reputation":109285,"user_id":318758,"accept_rate":100,"display_name":"Joni"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1597255396,"creation_date":1597255396,"answer_id":63382343,"question_id":63382197,"body_markdown":"&gt; How can an exception be thrown from both the try-with-resources statement and the try block ? If the exception is thrown from the try-with-resources statement, it means that resource initialization failed.\r\n\r\nThe *try-with-resources statement* not only initializes but also closes the resource, and closing *may* throw an exception.\r\n\r\nThis sentence comes right after a description of a similar situation when using *try-finally*, and compares it with *try-with-resources*.","title":"Exceptions from both try block and try-with-resources","body":"<blockquote>\n<p>How can an exception be thrown from both the try-with-resources statement and the try block ? If the exception is thrown from the try-with-resources statement, it means that resource initialization failed.</p>\n</blockquote>\n<p>The <em>try-with-resources statement</em> not only initializes but also closes the resource, and closing <em>may</em> throw an exception.</p>\n<p>This sentence comes right after a description of a similar situation when using <em>try-finally</em>, and compares it with <em>try-with-resources</em>.</p>\n"},{"tags":[],"owner":{"account_id":1601183,"reputation":44,"user_id":1482174,"display_name":"ice"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671267223,"creation_date":1671267223,"answer_id":74832864,"question_id":63382197,"body_markdown":"oracle documentation sucks. i wouldn&#39;t call try-with-resources block for implicit close methods, but rather for constructors and doc doesn&#39;t say anything about exception in constructors","title":"Exceptions from both try block and try-with-resources","body":"<p>oracle documentation sucks. i wouldn't call try-with-resources block for implicit close methods, but rather for constructors and doc doesn't say anything about exception in constructors</p>\n"}],"owner":{"account_id":9118599,"reputation":457,"user_id":6784881,"display_name":"Talos"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":332,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":63382343,"answer_count":2,"score":1,"last_activity_date":1671267223,"creation_date":1597254843,"question_id":63382197,"body_markdown":"[Documentation](https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html) says\r\n&gt; However, in this example, if the methods `readLine` and `close` both throw exceptions, then the method `readFirstLineFromFileWithFinallyBlock` throws the exception thrown from the `finally` block; the exception thrown from the `try` block is suppressed. In contrast, in the example `readFirstLineFromFile`, **if exceptions are thrown from both the `try` block and the `try`-with-resources statement**, then the method `readFirstLineFromFile` throws the exception thrown from the `try` block; the exception thrown from the `try`-with-resources block is suppressed. In Java SE 7 and later, you can retrieve suppressed exceptions; see the section Suppressed Exceptions for more information.\r\n\r\nI don&#39;t understand the bold part\r\n&gt; ... **if exceptions are thrown from both the `try` block and the `try`-with-resources statement** ...\r\n\r\nHow can an exception be thrown from both the `try`-with-resources statement and the `try` block ? If the exception is thrown from the `try`-with-resources statement, it means that resource initialization failed. In this case, `try` block is never executed. Thus the previous statement can&#39;t happen.\r\n\r\nI must have misunderstood this [documentation](https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html) and how `try`-with-resources works. Can you provide example where the bold statement actually happens ?\r\n\r\n&lt;hr&gt;\r\nMentioned methods\r\n\r\n```\r\nstatic String readFirstLineFromFile(String path) throws IOException {\r\n    try (BufferedReader br =\r\n                   new BufferedReader(new FileReader(path))) {\r\n        return br.readLine();\r\n    }\r\n}\r\n```\r\n\r\n```\r\nstatic String readFirstLineFromFileWithFinallyBlock(String path)\r\n                                                     throws IOException {\r\n    BufferedReader br = new BufferedReader(new FileReader(path));\r\n    try {\r\n        return br.readLine();\r\n    } finally {\r\n        if (br != null) br.close();\r\n    }\r\n}\r\n```\r\n\r\n","title":"Exceptions from both try block and try-with-resources","body":"<p><a href=\"https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html\" rel=\"nofollow noreferrer\">Documentation</a> says</p>\n<blockquote>\n<p>However, in this example, if the methods <code>readLine</code> and <code>close</code> both throw exceptions, then the method <code>readFirstLineFromFileWithFinallyBlock</code> throws the exception thrown from the <code>finally</code> block; the exception thrown from the <code>try</code> block is suppressed. In contrast, in the example <code>readFirstLineFromFile</code>, <strong>if exceptions are thrown from both the <code>try</code> block and the <code>try</code>-with-resources statement</strong>, then the method <code>readFirstLineFromFile</code> throws the exception thrown from the <code>try</code> block; the exception thrown from the <code>try</code>-with-resources block is suppressed. In Java SE 7 and later, you can retrieve suppressed exceptions; see the section Suppressed Exceptions for more information.</p>\n</blockquote>\n<p>I don't understand the bold part</p>\n<blockquote>\n<p>... <strong>if exceptions are thrown from both the <code>try</code> block and the <code>try</code>-with-resources statement</strong> ...</p>\n</blockquote>\n<p>How can an exception be thrown from both the <code>try</code>-with-resources statement and the <code>try</code> block ? If the exception is thrown from the <code>try</code>-with-resources statement, it means that resource initialization failed. In this case, <code>try</code> block is never executed. Thus the previous statement can't happen.</p>\n<p>I must have misunderstood this <a href=\"https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html\" rel=\"nofollow noreferrer\">documentation</a> and how <code>try</code>-with-resources works. Can you provide example where the bold statement actually happens ?</p>\n<hr>\nMentioned methods\n<pre><code>static String readFirstLineFromFile(String path) throws IOException {\n    try (BufferedReader br =\n                   new BufferedReader(new FileReader(path))) {\n        return br.readLine();\n    }\n}\n</code></pre>\n<pre><code>static String readFirstLineFromFileWithFinallyBlock(String path)\n                                                     throws IOException {\n    BufferedReader br = new BufferedReader(new FileReader(path));\n    try {\n        return br.readLine();\n    } finally {\n        if (br != null) br.close();\n    }\n}\n</code></pre>\n"},{"tags":["java","log4j2"],"answers":[{"tags":[],"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1671267049,"creation_date":1671267049,"answer_id":74832850,"question_id":74813074,"body_markdown":"When you call one of the logger methods, Log4j2 creates a [`Message`](https://logging.apache.org/log4j/2.x/log4j-api/apidocs/org/apache/logging/log4j/message/Message.html), which usually has a fixed string representation.\r\n\r\nMost methods create [`ParameterizedMessage`](https://logging.apache.org/log4j/2.x/log4j-api/apidocs/org/apache/logging/log4j/message/ParameterizedMessage.html)s (cf. [available messages](https://logging.apache.org/log4j/2.x/manual/messages.html)), that use [`StringBuilder#append`](https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/StringBuilder.html) to format your parameters. This does not provide any alternative representation for integers.\r\n\r\nIf you want a different format you can:\r\n\r\n1. Use [`Logger#printf`](https://logging.apache.org/log4j/2.x/log4j-api/apidocs/org/apache/logging/log4j/Logger.html#printf-org.apache.logging.log4j.Level-java.lang.String-java.lang.Object...-) which interprets your format string using [`java.util.Formatter`](https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/Formatter.html) and creates a [`StringFormattedMessage`](https://logging.apache.org/log4j/2.x/log4j-api/apidocs/org/apache/logging/log4j/message/StringFormattedMessage.html):\r\n\r\n   ```lang-java\r\n   log.printf(Level.INFO, &quot;Reading %,d entries (multiplied with one million)&quot;,\r\n           entries * 1_000_000);\r\n   ```\r\n\r\n   As you can deduce from the method signature, it always creates a temporary object array and is not garbage-free.\r\n\r\n1. When you create your logger, you can specify a different [`MessageFactory`](https://logging.apache.org/log4j/2.x/log4j-api/apidocs/org/apache/logging/log4j/message/MessageFactory.html). If you use [StringFormatterMessageFactory](https://logging.apache.org/log4j/2.x/log4j-api/apidocs/org/apache/logging/log4j/message/StringFormatterMessageFactory.html), **all** your messages will be formatted with `java.util.Formatter`:\r\n\r\n   ```lang-java\r\n   final Logger log = LogManager.getLogger(MyClass.class,\r\n           StringFormatterMessageFactory.INSTANCE);\r\n   log.info(&quot;Reading %,d entries (multiplied with one million)&quot;, entries * 1_000_000);\r\n   ```\r\n\r\n   This solution does **not** create temporary object arrays.\r\n\r\n1. You can also use [`FormattedMessageFactory`](https://logging.apache.org/log4j/2.x/log4j-api/apidocs/org/apache/logging/log4j/message/FormattedMessageFactory.html), which dynamically determines if your format string conforms to `java.util.Formatter`, `java.text.MessageFormat` or uses simple `{}` placeholders. This flexibility, of course, comes at a slight performance cost.","title":"Log4J2 Thousands Delimiter","body":"<p>When you call one of the logger methods, Log4j2 creates a <a href=\"https://logging.apache.org/log4j/2.x/log4j-api/apidocs/org/apache/logging/log4j/message/Message.html\" rel=\"nofollow noreferrer\"><code>Message</code></a>, which usually has a fixed string representation.</p>\n<p>Most methods create <a href=\"https://logging.apache.org/log4j/2.x/log4j-api/apidocs/org/apache/logging/log4j/message/ParameterizedMessage.html\" rel=\"nofollow noreferrer\"><code>ParameterizedMessage</code></a>s (cf. <a href=\"https://logging.apache.org/log4j/2.x/manual/messages.html\" rel=\"nofollow noreferrer\">available messages</a>), that use <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/StringBuilder.html\" rel=\"nofollow noreferrer\"><code>StringBuilder#append</code></a> to format your parameters. This does not provide any alternative representation for integers.</p>\n<p>If you want a different format you can:</p>\n<ol>\n<li><p>Use <a href=\"https://logging.apache.org/log4j/2.x/log4j-api/apidocs/org/apache/logging/log4j/Logger.html#printf-org.apache.logging.log4j.Level-java.lang.String-java.lang.Object...-\" rel=\"nofollow noreferrer\"><code>Logger#printf</code></a> which interprets your format string using <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/Formatter.html\" rel=\"nofollow noreferrer\"><code>java.util.Formatter</code></a> and creates a <a href=\"https://logging.apache.org/log4j/2.x/log4j-api/apidocs/org/apache/logging/log4j/message/StringFormattedMessage.html\" rel=\"nofollow noreferrer\"><code>StringFormattedMessage</code></a>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>log.printf(Level.INFO, &quot;Reading %,d entries (multiplied with one million)&quot;,\n        entries * 1_000_000);\n</code></pre>\n<p>As you can deduce from the method signature, it always creates a temporary object array and is not garbage-free.</p>\n</li>\n<li><p>When you create your logger, you can specify a different <a href=\"https://logging.apache.org/log4j/2.x/log4j-api/apidocs/org/apache/logging/log4j/message/MessageFactory.html\" rel=\"nofollow noreferrer\"><code>MessageFactory</code></a>. If you use <a href=\"https://logging.apache.org/log4j/2.x/log4j-api/apidocs/org/apache/logging/log4j/message/StringFormatterMessageFactory.html\" rel=\"nofollow noreferrer\">StringFormatterMessageFactory</a>, <strong>all</strong> your messages will be formatted with <code>java.util.Formatter</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>final Logger log = LogManager.getLogger(MyClass.class,\n        StringFormatterMessageFactory.INSTANCE);\nlog.info(&quot;Reading %,d entries (multiplied with one million)&quot;, entries * 1_000_000);\n</code></pre>\n<p>This solution does <strong>not</strong> create temporary object arrays.</p>\n</li>\n<li><p>You can also use <a href=\"https://logging.apache.org/log4j/2.x/log4j-api/apidocs/org/apache/logging/log4j/message/FormattedMessageFactory.html\" rel=\"nofollow noreferrer\"><code>FormattedMessageFactory</code></a>, which dynamically determines if your format string conforms to <code>java.util.Formatter</code>, <code>java.text.MessageFormat</code> or uses simple <code>{}</code> placeholders. This flexibility, of course, comes at a slight performance cost.</p>\n</li>\n</ol>\n"}],"owner":{"account_id":16376965,"reputation":13,"user_id":11828840,"display_name":"Adler auf H&#246;henflug"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":128,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"accepted_answer_id":74832850,"answer_count":1,"score":-1,"last_activity_date":1671267049,"creation_date":1671114417,"question_id":74813074,"body_markdown":"Anybody an idea how I include the delimiter for the thousand power in big numbers using the `{}` annotation?\r\n```\r\nlog.info(&quot;Reading {} entries (multiplied with one million)&quot;, entries * 1_000_000);\r\n```\r\n\r\nOutput (currently):\r\n```\r\nReading 80000000 entries (multiplied with one million)\r\n```\r\n\r\nOutput (desired):\r\n```\r\nReading 80,000,000 entries (multiplied with one million)\r\n```\r\n\r\nIs there a way to realize this directly in Log4J2 without using an additional formatter like e.g. `DecimalFormat`?","title":"Log4J2 Thousands Delimiter","body":"<p>Anybody an idea how I include the delimiter for the thousand power in big numbers using the <code>{}</code> annotation?</p>\n<pre><code>log.info(&quot;Reading {} entries (multiplied with one million)&quot;, entries * 1_000_000);\n</code></pre>\n<p>Output (currently):</p>\n<pre><code>Reading 80000000 entries (multiplied with one million)\n</code></pre>\n<p>Output (desired):</p>\n<pre><code>Reading 80,000,000 entries (multiplied with one million)\n</code></pre>\n<p>Is there a way to realize this directly in Log4J2 without using an additional formatter like e.g. <code>DecimalFormat</code>?</p>\n"},{"tags":["java","hibernate","orm","quarkus","graalvm"],"answers":[{"tags":[],"owner":{"account_id":385127,"reputation":6284,"user_id":742081,"display_name":"Ladicek"},"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1573461094,"creation_date":1573461094,"answer_id":58797886,"question_id":58797453,"body_markdown":"Panache is purely optional and you can stick with plain JPA, as documented in https://quarkus.io/guides/hibernate-orm.\r\n\r\nIf you could explain why you think you have to use Panache, I believe that would be interesting for the Quarkus team.","title":"Quarkus without heavy dependencies on Panache?","body":"<p>Panache is purely optional and you can stick with plain JPA, as documented in <a href=\"https://quarkus.io/guides/hibernate-orm\" rel=\"noreferrer\">https://quarkus.io/guides/hibernate-orm</a>.</p>\n\n<p>If you could explain why you think you have to use Panache, I believe that would be interesting for the Quarkus team.</p>\n"},{"tags":[],"owner":{"account_id":3209522,"reputation":33,"user_id":2709781,"display_name":"theoblade"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1671266943,"creation_date":1671266943,"answer_id":74832838,"question_id":58797453,"body_markdown":"First of all, I totally agree. I feel it&#39;s going against the idea of spec first.\r\n\r\nBut I have the feeling that the idea is to extend Quarkus reactive capabilities which they already admitted is currently only available for REST resources.\r\n\r\nIf you stick on JPA I guess you won&#39;t have access to Mutuniy features, unlike if you use Panache and Hibernate Reactive.","title":"Quarkus without heavy dependencies on Panache?","body":"<p>First of all, I totally agree. I feel it's going against the idea of spec first.</p>\n<p>But I have the feeling that the idea is to extend Quarkus reactive capabilities which they already admitted is currently only available for REST resources.</p>\n<p>If you stick on JPA I guess you won't have access to Mutuniy features, unlike if you use Panache and Hibernate Reactive.</p>\n"}],"owner":{"account_id":1104623,"reputation":20026,"user_id":1103561,"accept_rate":55,"display_name":"4ntoine"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2721,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":58797886,"answer_count":2,"score":6,"last_activity_date":1671266943,"creation_date":1573458910,"question_id":58797453,"body_markdown":"I like the idea of using JAX-RS in Quarkus as it will make the code not dependent on framework implementation. However when it comes to DB [we&#39;re proposed][1] to use &quot;Panache&quot; and extend the DB entities from `PanacheEntity`. I guess it&#39;s very handy and good for AOT work (what is basically Quarkus is trying to do) and simplifies Quarkus work a lot, but it introduces heavy dependency on particular implementation and we can&#39;t use pure JPA modules because of that.\r\n\r\nThis conflicts with &quot;clean architecture&quot; and make testing of such DB module complicated [if possible at all]. Let&#39;s say i&#39;d like to be able to use the same DB module (using pure JPA annotations only) for both Spring and Quarkus-based app modules. It forces me to duplicate the code or cheat in terms of design purity.\r\n\r\nIs there any possibility to use pure JPA annotations for persistence and probably pay the price with plugins (that modify the code during compilations) or by using of ORM framework(s) that do not do runtime bytecode modification/use reflection? Any examples?\r\n\r\n\r\nPS. Congrats on [1.0][2] release! Good job, Quarkus team.\r\n\r\n\r\n  [1]: https://quarkus.io/guides/hibernate-orm-panache\r\n  [2]: https://quarkus.io/blog/announcing-quarkus-1-0/","title":"Quarkus without heavy dependencies on Panache?","body":"<p>I like the idea of using JAX-RS in Quarkus as it will make the code not dependent on framework implementation. However when it comes to DB <a href=\"https://quarkus.io/guides/hibernate-orm-panache\" rel=\"noreferrer\">we're proposed</a> to use \"Panache\" and extend the DB entities from <code>PanacheEntity</code>. I guess it's very handy and good for AOT work (what is basically Quarkus is trying to do) and simplifies Quarkus work a lot, but it introduces heavy dependency on particular implementation and we can't use pure JPA modules because of that.</p>\n\n<p>This conflicts with \"clean architecture\" and make testing of such DB module complicated [if possible at all]. Let's say i'd like to be able to use the same DB module (using pure JPA annotations only) for both Spring and Quarkus-based app modules. It forces me to duplicate the code or cheat in terms of design purity.</p>\n\n<p>Is there any possibility to use pure JPA annotations for persistence and probably pay the price with plugins (that modify the code during compilations) or by using of ORM framework(s) that do not do runtime bytecode modification/use reflection? Any examples?</p>\n\n<p>PS. Congrats on <a href=\"https://quarkus.io/blog/announcing-quarkus-1-0/\" rel=\"noreferrer\">1.0</a> release! Good job, Quarkus team.</p>\n"},{"tags":["java","logging","logback"],"answers":[{"tags":[],"owner":{"account_id":8669647,"reputation":188,"user_id":6810828,"display_name":"aleshka-batman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1671266611,"creation_date":1671266611,"answer_id":74832810,"question_id":74828961,"body_markdown":"There is no direct way to do it.\r\n\r\nThe Appender silently discards event:\r\n\r\n[AsyncAppenderBase.java][1]\r\n```java\r\n    @Override\r\n    protected void append(E eventObject) {\r\n        if (isQueueBelowDiscardingThreshold() &amp;&amp; isDiscardable(eventObject)) {\r\n            return;\r\n        }\r\n        preprocess(eventObject);\r\n        put(eventObject);\r\n    }\r\n```\r\n\r\n\r\n  [1]: https://github.com/qos-ch/logback/blob/master/logback-core/src/main/java/ch/qos/logback/core/AsyncAppenderBase.java#L161\r\n\r\nHowever, you can create your own appender by extending `AsyncAppenderBase`  or `AsyncAppender` and override `append` method with your custom logic.","title":"Logback - how can you tell AsyncAppender&#39;s queue is full and starts dropping events?","body":"<p>There is no direct way to do it.</p>\n<p>The Appender silently discards event:</p>\n<p><a href=\"https://github.com/qos-ch/logback/blob/master/logback-core/src/main/java/ch/qos/logback/core/AsyncAppenderBase.java#L161\" rel=\"nofollow noreferrer\">AsyncAppenderBase.java</a></p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Override\n    protected void append(E eventObject) {\n        if (isQueueBelowDiscardingThreshold() &amp;&amp; isDiscardable(eventObject)) {\n            return;\n        }\n        preprocess(eventObject);\n        put(eventObject);\n    }\n</code></pre>\n<p>However, you can create your own appender by extending <code>AsyncAppenderBase</code>  or <code>AsyncAppender</code> and override <code>append</code> method with your custom logic.</p>\n"}],"owner":{"account_id":7262222,"reputation":105,"user_id":5538455,"display_name":"DECEMCLMC"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":185,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74832810,"answer_count":1,"score":0,"last_activity_date":1671266611,"creation_date":1671218899,"question_id":74828961,"body_markdown":"Is there a way to know that logback is discarding logging events because the queue is full? Is it logged anywhere?","title":"Logback - how can you tell AsyncAppender&#39;s queue is full and starts dropping events?","body":"<p>Is there a way to know that logback is discarding logging events because the queue is full? Is it logged anywhere?</p>\n"},{"tags":["java","multithreading","asynchronous","design-patterns","concurrency"],"comments":[{"owner":{"account_id":292208,"reputation":10665,"user_id":2245707,"accept_rate":17,"display_name":"pveentjer"},"score":0,"creation_date":1671259641,"post_id":74832255,"comment_id":132065400,"body_markdown":"I doubt that spawning a thread for every request is a good thing because you have unbound threads in your system and this can lead to all kinds of problems. Probably better to use a threadpool. Using a fixed timeout is also problematic because it can lead to false positives: so a test fails even though the change will appear eventually.  One way to deal with this is to have a single thread in the test class that is shared between all tests and checks for each of the tests if the desired state is set at an interval of e.g. 100ms. And you can give a long timeout for the test e.g. 30s.","body":"I doubt that spawning a thread for every request is a good thing because you have unbound threads in your system and this can lead to all kinds of problems. Probably better to use a threadpool. Using a fixed timeout is also problematic because it can lead to false positives: so a test fails even though the change will appear eventually.  One way to deal with this is to have a single thread in the test class that is shared between all tests and checks for each of the tests if the desired state is set at an interval of e.g. 100ms. And you can give a long timeout for the test e.g. 30s."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1671262136,"post_id":74832255,"comment_id":132065688,"body_markdown":"If I am understanding your description correctly, the real problem here is the design / architecture of your REST service.  For a start, doing the database writes asynchronously sounds wrong, and having a single (?) main thread for business logic is wrong.","body":"If I am understanding your description correctly, the real problem here is the design / architecture of your REST service.  For a start, doing the database writes asynchronously sounds wrong, and having a single (?) main thread for business logic is wrong."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1671262543,"post_id":74832255,"comment_id":132065736,"body_markdown":"But one way to deal with testing would be to use mocks to test the business logic handling and the database separately.","body":"But one way to deal with testing would be to use mocks to test the business logic handling and the database separately."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1671263094,"post_id":74832255,"comment_id":132065803,"body_markdown":"Your title is unclear and somewhat off-track from your question. I suggest you rewrite to summarize your actual question.","body":"Your title is unclear and somewhat off-track from your question. I suggest you rewrite to summarize your actual question."},{"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"score":0,"creation_date":1671295860,"post_id":74832255,"comment_id":132070866,"body_markdown":"Don&#39;t use `sleep()` to coordinate the activity of threads. If thread T needs the result of some task that thread U performs &quot;aysnchronously,&quot; then you should use some thread-to-thread signalling means (Semaphore, CompletableFuture, BlockingQueue, Exchanger,...) that allows thread T to either (A) wait until the _exact moment_ when thread U signals that the task is complete and the result is ready, or (B) not wait at all if the task was already completed.","body":"Don&#39;t use <code>sleep()</code> to coordinate the activity of threads. If thread T needs the result of some task that thread U performs &quot;aysnchronously,&quot; then you should use some thread-to-thread signalling means (Semaphore, CompletableFuture, BlockingQueue, Exchanger,...) that allows thread T to either (A) wait until the <i>exact moment</i> when thread U signals that the task is complete and the result is ready, or (B) not wait at all if the task was already completed."},{"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"score":0,"creation_date":1671296284,"post_id":74832255,"comment_id":132070935,"body_markdown":"Don&#39;t test routines that directly call `sleep()`. (This is another good reason for not using `sleep()` at all.) If there&#39;s some reason why a thread absolutely _must_ sleep (e.g., in order to schedule real-time activities), then you can have it call some `o.sleep()` method, where `o` is an object that can be [_mocked_](https://en.wikipedia.org/wiki/Test_double). Then, your tests can verify that the routine calls `o.sleep(n)` when it is supposed to do, but without _actually_ sleeping for `n` milliseconds.","body":"Don&#39;t test routines that directly call <code>sleep()</code>. (This is another good reason for not using <code>sleep()</code> at all.) If there&#39;s some reason why a thread absolutely <i>must</i> sleep (e.g., in order to schedule real-time activities), then you can have it call some <code>o.sleep()</code> method, where <code>o</code> is an object that can be <a href=\"https://en.wikipedia.org/wiki/Test_double\" rel=\"nofollow noreferrer\"><i>mocked</i></a>. Then, your tests can verify that the routine calls <code>o.sleep(n)</code> when it is supposed to do, but without <i>actually</i> sleeping for <code>n</code> milliseconds."}],"answers":[{"tags":[],"owner":{"account_id":16523805,"reputation":56,"user_id":11939169,"display_name":"K3v1n 0X90"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1671266361,"creation_date":1671266361,"answer_id":74832791,"question_id":74832255,"body_markdown":"I would suggest to change your api design if possible. One possible solution could be to have your first api call respond with http 202 accepted and return some kind of job ID to the client. With this job ID the client could check the progress via a GET on another endpoint. This would allow you to have polling in your test without hardcoding some sleep values. \r\n\r\nHere is a example that shows the process in a bit more detail. \r\n\r\nhttps://restfulapi.net/http-status-202-accepted/","title":"Alternative to Thread.sleep() for for better performance","body":"<p>I would suggest to change your api design if possible. One possible solution could be to have your first api call respond with http 202 accepted and return some kind of job ID to the client. With this job ID the client could check the progress via a GET on another endpoint. This would allow you to have polling in your test without hardcoding some sleep values.</p>\n<p>Here is a example that shows the process in a bit more detail.</p>\n<p><a href=\"https://restfulapi.net/http-status-202-accepted/\" rel=\"nofollow noreferrer\">https://restfulapi.net/http-status-202-accepted/</a></p>\n"}],"owner":{"account_id":21507820,"reputation":97,"user_id":15850958,"display_name":"mitali"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":392,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1671266361,"creation_date":1671259129,"question_id":74832255,"body_markdown":"I have developed a REST service. The service have one Api endpoint: v1/customer. This Api\r\ndoes two things:\r\n1) It executes the business logic in main thread \r\n2) Spawns a child thread to perform the non critical DB writes. The main thread returns response to client immediately, whereas the child thread write to DB asynchronously.\r\n\r\nAs both of the these operations Step 1 and 2 are not synchronous, it is becoming increasingly challenging to test both of these scenario. \r\nLet&#39;s say when I try to test the API. I am testing two things (api response and DB writes)\r\nAs the DB writes happen async fashion. I have to use a Thread.sleep(2000). This process is not scalable and doesn&#39;t yield right result. Soon I might have 1000 test cases to run and the total time to run all these testcases will increase enormously.\r\nWhat design technique shall I use to test the DB writes keeping performance and execution time in mind.","title":"Alternative to Thread.sleep() for for better performance","body":"<p>I have developed a REST service. The service have one Api endpoint: v1/customer. This Api\ndoes two things:</p>\n<ol>\n<li>It executes the business logic in main thread</li>\n<li>Spawns a child thread to perform the non critical DB writes. The main thread returns response to client immediately, whereas the child thread write to DB asynchronously.</li>\n</ol>\n<p>As both of the these operations Step 1 and 2 are not synchronous, it is becoming increasingly challenging to test both of these scenario.\nLet's say when I try to test the API. I am testing two things (api response and DB writes)\nAs the DB writes happen async fashion. I have to use a Thread.sleep(2000). This process is not scalable and doesn't yield right result. Soon I might have 1000 test cases to run and the total time to run all these testcases will increase enormously.\nWhat design technique shall I use to test the DB writes keeping performance and execution time in mind.</p>\n"},{"tags":["java","jexl"],"answers":[{"tags":[],"owner":{"account_id":95910,"reputation":238649,"user_id":260990,"accept_rate":81,"display_name":"jmj"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1322308536,"creation_date":1322308536,"answer_id":8278235,"question_id":8278218,"body_markdown":"You need to make [commons-logging][1] jar available in classpath at runtime\r\n\r\n\r\n  [1]: http://commons.apache.org/logging/download_logging.cgi","title":"Can&#39;t create JexlEngine object","body":"<p>You need to make <a href=\"http://commons.apache.org/logging/download_logging.cgi\" rel=\"nofollow\">commons-logging</a> jar available in classpath at runtime</p>\n"},{"tags":[],"owner":{"account_id":17335028,"reputation":41,"user_id":12557126,"display_name":"mohammad.sh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671265644,"creation_date":1671265644,"answer_id":74832730,"question_id":8278218,"body_markdown":"I also encountered the same error (Caused by: java.lang.ClassNotFoundException: org.apache.commons.jexl3.MapContext) when I used the following dependency:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.jxls&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jxls&lt;/artifactId&gt;\r\n        &lt;version&gt;2.12.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.jxls&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jxls-poi&lt;/artifactId&gt;\r\n        &lt;version&gt;2.12.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n Just add the following line to your pom:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n        &lt;artifactId&gt;commons-jexl3&lt;/artifactId&gt;\r\n        &lt;version&gt;3.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nAnd the project will be executed correctly.","title":"Can&#39;t create JexlEngine object","body":"<p>I also encountered the same error (Caused by: java.lang.ClassNotFoundException: org.apache.commons.jexl3.MapContext) when I used the following dependency:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.jxls&lt;/groupId&gt;\n    &lt;artifactId&gt;jxls&lt;/artifactId&gt;\n    &lt;version&gt;2.12.0&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.jxls&lt;/groupId&gt;\n    &lt;artifactId&gt;jxls-poi&lt;/artifactId&gt;\n    &lt;version&gt;2.12.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Just add the following line to your pom:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n    &lt;artifactId&gt;commons-jexl3&lt;/artifactId&gt;\n    &lt;version&gt;3.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>And the project will be executed correctly.</p>\n"}],"owner":{"account_id":399082,"reputation":6427,"user_id":764182,"accept_rate":57,"display_name":"Dmitry Belaventsev"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1393,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":8278235,"answer_count":2,"score":1,"last_activity_date":1671265644,"creation_date":1322308420,"question_id":8278218,"body_markdown":"I write the following class:\r\n\r\n    import org.apache.commons.jexl2.*;\r\n    \r\n    public class NelderMead {\r\n    \t// контсанты\r\n    \tprivate static int \t\tM = 3;\r\n    \tprivate static double \tE = 0.005;\r\n    \tprivate static double\tA = 1.000;\r\n    \tprivate static double\tB = 0.500;\r\n    \tprivate static double\tY = 2.000;\r\n    \t\r\n    \t// переменные\r\n    \tprivate JexlEngine jexl = new JexlEngine();\r\n    \tprivate Expression func;\r\n    \tprivate String funcString = &quot;&quot;;\r\n    \tprivate MapContext[] iterations;\r\n    \t\r\n    \tpublic NelderMead(){\r\n    \t\tthis.jexl = new JexlEngine();\r\n    \t}\r\n    \t\r\n    \tpublic NelderMead(String funcString){\r\n    \t\tthis.jexl = new JexlEngine();\r\n    \t\tthis.setFunc(funcString);\r\n    \t}\r\n    \t\r\n    \t\r\n    \tpublic void setFunc(String funcString){\r\n    \t\tthis.funcString = funcString;\r\n    \t\tthis.func = this.jexl.createExpression(funcString);\r\n    \t}\r\n    \t\r\n    \tpublic double funcEval(MapContext args){\r\n    \t\treturn (Double) this.func.evaluate(args);\r\n    \t}\r\n    \t\r\n    \tpublic boolean checkCriterian(){\r\n    \t\treturn true;\r\n    \t}\r\n    }\r\n\r\nBut the I create object of this class I have the foolowing error:\r\n\r\n\r\n    Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/apache/commons/logging/LogFactory\r\n    \tat org.apache.commons.jexl2.JexlEngine$UberspectHolder.&lt;clinit&gt;(JexlEngine.java:121)\r\n    \tat org.apache.commons.jexl2.JexlEngine.getUberspect(JexlEngine.java:205)\r\n    \tat org.apache.commons.jexl2.JexlEngine.&lt;init&gt;(JexlEngine.java:182)\r\n    \tat org.apache.commons.jexl2.JexlEngine.&lt;init&gt;(JexlEngine.java:170)\r\n    \tat NelderMead.&lt;init&gt;(NelderMead.java:22)\r\n    \tat Test.main(Test.java:10)\r\n    Caused by: java.lang.ClassNotFoundException: org.apache.commons.logging.LogFactory\r\n    \tat java.net.URLClassLoader$1.run(URLClassLoader.java:202)\r\n    \tat java.security.AccessController.doPrivileged(Native Method)\r\n    \tat java.net.URLClassLoader.findClass(URLClassLoader.java:190)\r\n    \tat java.lang.ClassLoader.loadClass(ClassLoader.java:306)\r\n    \tat sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)\r\n    \tat java.lang.ClassLoader.loadClass(ClassLoader.java:247)\r\n    \t... 6 more\r\non first line of the constructor (when create an object of JexlEngine):\r\n\r\n\tpublic NelderMead(String funcString){\r\n\t\tthis.jexl = new JexlEngine();\r\n\t\tthis.setFunc(funcString);\r\n\t}\r\n\r\n\r\nCould you help me - why this code cause the errors?\r\n\r\nPS\r\nI use .jar file to use this lib.","title":"Can&#39;t create JexlEngine object","body":"<p>I write the following class:</p>\n\n<pre><code>import org.apache.commons.jexl2.*;\n\npublic class NelderMead {\n    // контсанты\n    private static int      M = 3;\n    private static double   E = 0.005;\n    private static double   A = 1.000;\n    private static double   B = 0.500;\n    private static double   Y = 2.000;\n\n    // переменные\n    private JexlEngine jexl = new JexlEngine();\n    private Expression func;\n    private String funcString = \"\";\n    private MapContext[] iterations;\n\n    public NelderMead(){\n        this.jexl = new JexlEngine();\n    }\n\n    public NelderMead(String funcString){\n        this.jexl = new JexlEngine();\n        this.setFunc(funcString);\n    }\n\n\n    public void setFunc(String funcString){\n        this.funcString = funcString;\n        this.func = this.jexl.createExpression(funcString);\n    }\n\n    public double funcEval(MapContext args){\n        return (Double) this.func.evaluate(args);\n    }\n\n    public boolean checkCriterian(){\n        return true;\n    }\n}\n</code></pre>\n\n<p>But the I create object of this class I have the foolowing error:</p>\n\n<pre><code>Exception in thread \"main\" java.lang.NoClassDefFoundError: org/apache/commons/logging/LogFactory\n    at org.apache.commons.jexl2.JexlEngine$UberspectHolder.&lt;clinit&gt;(JexlEngine.java:121)\n    at org.apache.commons.jexl2.JexlEngine.getUberspect(JexlEngine.java:205)\n    at org.apache.commons.jexl2.JexlEngine.&lt;init&gt;(JexlEngine.java:182)\n    at org.apache.commons.jexl2.JexlEngine.&lt;init&gt;(JexlEngine.java:170)\n    at NelderMead.&lt;init&gt;(NelderMead.java:22)\n    at Test.main(Test.java:10)\nCaused by: java.lang.ClassNotFoundException: org.apache.commons.logging.LogFactory\n    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)\n    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)\n    ... 6 more\n</code></pre>\n\n<p>on first line of the constructor (when create an object of JexlEngine):</p>\n\n<pre><code>public NelderMead(String funcString){\n    this.jexl = new JexlEngine();\n    this.setFunc(funcString);\n}\n</code></pre>\n\n<p>Could you help me - why this code cause the errors?</p>\n\n<p>PS\nI use .jar file to use this lib.</p>\n"},{"tags":["java","android","firebase","firebase-realtime-database","android-recyclerview"],"comments":[{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":1,"creation_date":1671279069,"post_id":74832712,"comment_id":132067902,"body_markdown":"What exactly in this code doesn&#39;t work the way you expect?\nTell us what is wrong with shared code. Do you have any errors?","body":"What exactly in this code doesn&#39;t work the way you expect? Tell us what is wrong with shared code. Do you have any errors?"},{"owner":{"account_id":26845407,"reputation":19,"user_id":20431236,"display_name":"prabin chand"},"score":0,"creation_date":1671286910,"post_id":74832712,"comment_id":132069304,"body_markdown":"There is no error in this code. The onle feature i want to add is : when item on recyclerView is deleted is should show some deleted animation and should remove from list. But when users click on &quot;UNDO&quot; button snackbar, deleted item should come back in same position including animation.","body":"There is no error in this code. The onle feature i want to add is : when item on recyclerView is deleted is should show some deleted animation and should remove from list. But when users click on &quot;UNDO&quot; button snackbar, deleted item should come back in same position including animation."}],"owner":{"account_id":26845407,"reputation":19,"user_id":20431236,"display_name":"prabin chand"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671265369,"creation_date":1671265369,"question_id":74832712,"body_markdown":"I want to create undo function using Snackbar in FirebaseRecyclerAdapter when &quot;Delete&quot; option is clicked.\r\nI have achieved my goal to create Undo function using Snackbar but my main aim is to show item deleted from **FirebaseRecyclerAdapter** and when undo is clicked I want that deleted item to be back in **FirebaseRecyclerAdapter**. How can I do that? Please help me !\r\n\r\n&gt;Here&#39;s my code of **FirebaseRecyclerAdapter** class.\r\n\r\n\r\n\r\n    public class MyAdapter extends FirebaseRecyclerAdapter&lt;ExpenseModel, MyAdapter.MyViewHolder&gt; {\r\n        DatabaseReference databaseReference;\r\n        GoogleSignInAccount account;\r\n        Context context;\r\n        int calendarClick,\r\n                beerClick,\r\n                rentClick,\r\n                bikeClick,\r\n                groceryClick,\r\n                foodClick = 0;\r\n    \r\n        String whichCategorySelected;\r\n        boolean isCategorySelected = false;\r\n        String expenseType = &quot;&quot;;\r\n        String updateDate = &quot;&quot;;\r\n        String stopDelete = &quot;&quot;;\r\n    \r\n    \r\n    \r\n        public MyAdapter(@NonNull FirebaseRecyclerOptions&lt;ExpenseModel&gt; options, Context context) {\r\n            super(options);\r\n            this.context = context;\r\n        }\r\n    \r\n        @SuppressLint(&quot;SetTextI18n&quot;)\r\n        @Override\r\n        protected void onBindViewHolder(@NonNull MyViewHolder holder, @SuppressLint(&quot;RecyclerView&quot;) int position, @NonNull ExpenseModel model) {\r\n            account = GoogleSignIn.getLastSignedInAccount(context);\r\n            setDatabaseReference(account);\r\n            holder.expenseItem.setText(model.getDescription());\r\n            holder.expenseAmount.setText(&quot;Rs. &quot; + model.getAmount());\r\n            holder.expenseDate.setText(model.getTime());\r\n            holder.category.setText(model.getExType());\r\n    \r\n            //show update dialog when clicked on recycler view item and\r\n            //delete the selected item from recycler view\r\n            holder.itemView.setOnClickListener(new View.OnClickListener()  {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    int timeSnackBar = 5000;\r\n    \r\n                    PopupMenu popupMenu = new PopupMenu(context, view);\r\n                    popupMenu.getMenu().add(&quot;Edit&quot;);\r\n                    popupMenu.getMenu().add(&quot;Delete&quot;);\r\n                    popupMenu.getMenu().add(&quot;Delete all&quot;);\r\n                    popupMenu.setOnMenuItemClickListener(new PopupMenu.OnMenuItemClickListener() {\r\n                        @Override\r\n                        public boolean onMenuItemClick(MenuItem menuItem) {\r\n                            if (menuItem.getTitle().equals(&quot;Edit&quot;)) {\r\n                                calendarClick = 0;\r\n                                expenseType = model.getExType();\r\n                                showUpdateDialog(view, model.getDescription(), model.getAmount(), model.getTime(), position);\r\n                            } else if (menuItem.getTitle().equals(&quot;Delete&quot;)) {\r\n    \r\n                                Snackbar snackbar = Snackbar.make(view, &quot;Item is being deleted&quot;, Snackbar.LENGTH_LONG)\r\n                                        .setAction(&quot;UNDO&quot;, new View.OnClickListener() {\r\n                                            @Override\r\n                                            public void onClick(View view) {\r\n                                                stopDelete = &quot;STOP&quot;;\r\n                                            }\r\n                                        }).setDuration(timeSnackBar);\r\n    //                            snackbar.getView().getLayoutParams().width = ViewGroup.LayoutParams.MATCH_PARENT;\r\n                                Snackbar.SnackbarLayout snackbarLayout = (Snackbar.SnackbarLayout) snackbar.getView();\r\n    \r\n                                snackbarLayout.setPadding(0,0,0,0);\r\n                                snackbar.show();\r\n                                new Handler().postDelayed(new Runnable() {\r\n                                    @Override\r\n                                    public void run() {\r\n                                        if (!stopDelete.equals(&quot;STOP&quot;)) {\r\n                                            databaseReference.child(Objects.requireNonNull(getRef(holder.getLayoutPosition()).getKey()))\r\n                                                    .removeValue().addOnCompleteListener(new OnCompleteListener&lt;Void&gt;() {\r\n                                                        @Override\r\n                                                        public void onComplete(@NonNull Task&lt;Void&gt; task) {\r\n                                                            if (task.isSuccessful()) {\r\n                                                                Toast.makeText(context, &quot;Deleted&quot;, Toast.LENGTH_SHORT).show();\r\n                                                                stopDelete = &quot;&quot;;\r\n                                                            }\r\n                                                        }\r\n                                                    });\r\n                                        }else {\r\n                                            stopDelete = &quot;&quot;;\r\n                                        }\r\n                                    }\r\n                                }, timeSnackBar);\r\n    \r\n    \r\n                            } else {\r\n                                new AlertDialog.Builder(context)\r\n                                        .setTitle(&quot;Alert&quot;)\r\n                                        .setMessage(&quot;Are you sure delete everything ?&quot;)\r\n                                        .setCancelable(false)\r\n                                        .setIcon(R.drawable.warning)\r\n                                        .setPositiveButton(&quot;Continue&quot;, new DialogInterface.OnClickListener() {\r\n                                            @Override\r\n                                            public void onClick(DialogInterface dialogInterface, int i) {\r\n                                                getDatabaseReference(account).removeValue().addOnCompleteListener(new OnCompleteListener&lt;Void&gt;() {\r\n                                                    @Override\r\n                                                    public void onComplete(@NonNull Task&lt;Void&gt; task) {\r\n                                                        if (task.isSuccessful()) {\r\n                                                            Toast.makeText(view.getContext(), &quot;All expenses deleted&quot;, Toast.LENGTH_SHORT).show();\r\n                                                        }\r\n                                                    }\r\n                                                }).addOnFailureListener(new OnFailureListener() {\r\n                                                    @Override\r\n                                                    public void onFailure(@NonNull Exception e) {\r\n                                                        Toast.makeText(view.getContext(), &quot;Something went wrong. Please check your internet&quot;, Toast.LENGTH_SHORT).show();\r\n                                                    }\r\n                                                });\r\n                                            }\r\n                                        }).setNegativeButton(&quot;Cancel&quot;, null)\r\n                                        .show();\r\n                            }\r\n                            return true;\r\n                        }\r\n                    });\r\n                    popupMenu.show();\r\n                }\r\n            });\r\n        }\r\n    \r\n    \r\n        @NonNull\r\n        @Override\r\n        public MyViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n            View v = LayoutInflater.from(parent.getContext()).inflate(R.layout.item_view, parent, false);\r\n            return new MyViewHolder(v);\r\n        }\r\n    \r\n        public static class MyViewHolder extends RecyclerView.ViewHolder {\r\n            TextView expenseItem, expenseAmount, expenseDate, category;\r\n    \r\n            public MyViewHolder(@NonNull View itemView) {\r\n                super(itemView);\r\n                expenseItem = itemView.findViewById(R.id.recyclerItemView);\r\n                expenseAmount = itemView.findViewById(R.id.recyclerAmountView);\r\n                expenseDate = itemView.findViewById(R.id.recyclerDateView);\r\n                category = itemView.findViewById(R.id.recyclerCategory);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n","title":"How to create undo using Snackbar in FirebaseRecyclerAdapter?","body":"<p>I want to create undo function using Snackbar in FirebaseRecyclerAdapter when &quot;Delete&quot; option is clicked.\nI have achieved my goal to create Undo function using Snackbar but my main aim is to show item deleted from <strong>FirebaseRecyclerAdapter</strong> and when undo is clicked I want that deleted item to be back in <strong>FirebaseRecyclerAdapter</strong>. How can I do that? Please help me !</p>\n<blockquote>\n<p>Here's my code of <strong>FirebaseRecyclerAdapter</strong> class.</p>\n</blockquote>\n<pre><code>public class MyAdapter extends FirebaseRecyclerAdapter&lt;ExpenseModel, MyAdapter.MyViewHolder&gt; {\n    DatabaseReference databaseReference;\n    GoogleSignInAccount account;\n    Context context;\n    int calendarClick,\n            beerClick,\n            rentClick,\n            bikeClick,\n            groceryClick,\n            foodClick = 0;\n\n    String whichCategorySelected;\n    boolean isCategorySelected = false;\n    String expenseType = &quot;&quot;;\n    String updateDate = &quot;&quot;;\n    String stopDelete = &quot;&quot;;\n\n\n\n    public MyAdapter(@NonNull FirebaseRecyclerOptions&lt;ExpenseModel&gt; options, Context context) {\n        super(options);\n        this.context = context;\n    }\n\n    @SuppressLint(&quot;SetTextI18n&quot;)\n    @Override\n    protected void onBindViewHolder(@NonNull MyViewHolder holder, @SuppressLint(&quot;RecyclerView&quot;) int position, @NonNull ExpenseModel model) {\n        account = GoogleSignIn.getLastSignedInAccount(context);\n        setDatabaseReference(account);\n        holder.expenseItem.setText(model.getDescription());\n        holder.expenseAmount.setText(&quot;Rs. &quot; + model.getAmount());\n        holder.expenseDate.setText(model.getTime());\n        holder.category.setText(model.getExType());\n\n        //show update dialog when clicked on recycler view item and\n        //delete the selected item from recycler view\n        holder.itemView.setOnClickListener(new View.OnClickListener()  {\n            @Override\n            public void onClick(View view) {\n                int timeSnackBar = 5000;\n\n                PopupMenu popupMenu = new PopupMenu(context, view);\n                popupMenu.getMenu().add(&quot;Edit&quot;);\n                popupMenu.getMenu().add(&quot;Delete&quot;);\n                popupMenu.getMenu().add(&quot;Delete all&quot;);\n                popupMenu.setOnMenuItemClickListener(new PopupMenu.OnMenuItemClickListener() {\n                    @Override\n                    public boolean onMenuItemClick(MenuItem menuItem) {\n                        if (menuItem.getTitle().equals(&quot;Edit&quot;)) {\n                            calendarClick = 0;\n                            expenseType = model.getExType();\n                            showUpdateDialog(view, model.getDescription(), model.getAmount(), model.getTime(), position);\n                        } else if (menuItem.getTitle().equals(&quot;Delete&quot;)) {\n\n                            Snackbar snackbar = Snackbar.make(view, &quot;Item is being deleted&quot;, Snackbar.LENGTH_LONG)\n                                    .setAction(&quot;UNDO&quot;, new View.OnClickListener() {\n                                        @Override\n                                        public void onClick(View view) {\n                                            stopDelete = &quot;STOP&quot;;\n                                        }\n                                    }).setDuration(timeSnackBar);\n//                            snackbar.getView().getLayoutParams().width = ViewGroup.LayoutParams.MATCH_PARENT;\n                            Snackbar.SnackbarLayout snackbarLayout = (Snackbar.SnackbarLayout) snackbar.getView();\n\n                            snackbarLayout.setPadding(0,0,0,0);\n                            snackbar.show();\n                            new Handler().postDelayed(new Runnable() {\n                                @Override\n                                public void run() {\n                                    if (!stopDelete.equals(&quot;STOP&quot;)) {\n                                        databaseReference.child(Objects.requireNonNull(getRef(holder.getLayoutPosition()).getKey()))\n                                                .removeValue().addOnCompleteListener(new OnCompleteListener&lt;Void&gt;() {\n                                                    @Override\n                                                    public void onComplete(@NonNull Task&lt;Void&gt; task) {\n                                                        if (task.isSuccessful()) {\n                                                            Toast.makeText(context, &quot;Deleted&quot;, Toast.LENGTH_SHORT).show();\n                                                            stopDelete = &quot;&quot;;\n                                                        }\n                                                    }\n                                                });\n                                    }else {\n                                        stopDelete = &quot;&quot;;\n                                    }\n                                }\n                            }, timeSnackBar);\n\n\n                        } else {\n                            new AlertDialog.Builder(context)\n                                    .setTitle(&quot;Alert&quot;)\n                                    .setMessage(&quot;Are you sure delete everything ?&quot;)\n                                    .setCancelable(false)\n                                    .setIcon(R.drawable.warning)\n                                    .setPositiveButton(&quot;Continue&quot;, new DialogInterface.OnClickListener() {\n                                        @Override\n                                        public void onClick(DialogInterface dialogInterface, int i) {\n                                            getDatabaseReference(account).removeValue().addOnCompleteListener(new OnCompleteListener&lt;Void&gt;() {\n                                                @Override\n                                                public void onComplete(@NonNull Task&lt;Void&gt; task) {\n                                                    if (task.isSuccessful()) {\n                                                        Toast.makeText(view.getContext(), &quot;All expenses deleted&quot;, Toast.LENGTH_SHORT).show();\n                                                    }\n                                                }\n                                            }).addOnFailureListener(new OnFailureListener() {\n                                                @Override\n                                                public void onFailure(@NonNull Exception e) {\n                                                    Toast.makeText(view.getContext(), &quot;Something went wrong. Please check your internet&quot;, Toast.LENGTH_SHORT).show();\n                                                }\n                                            });\n                                        }\n                                    }).setNegativeButton(&quot;Cancel&quot;, null)\n                                    .show();\n                        }\n                        return true;\n                    }\n                });\n                popupMenu.show();\n            }\n        });\n    }\n\n\n    @NonNull\n    @Override\n    public MyViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\n        View v = LayoutInflater.from(parent.getContext()).inflate(R.layout.item_view, parent, false);\n        return new MyViewHolder(v);\n    }\n\n    public static class MyViewHolder extends RecyclerView.ViewHolder {\n        TextView expenseItem, expenseAmount, expenseDate, category;\n\n        public MyViewHolder(@NonNull View itemView) {\n            super(itemView);\n            expenseItem = itemView.findViewById(R.id.recyclerItemView);\n            expenseAmount = itemView.findViewById(R.id.recyclerAmountView);\n            expenseDate = itemView.findViewById(R.id.recyclerDateView);\n            category = itemView.findViewById(R.id.recyclerCategory);\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","apache-poi"],"comments":[{"owner":{"account_id":6815038,"reputation":73,"user_id":5244029,"display_name":"hhafeez"},"score":1,"creation_date":1489068613,"post_id":42697014,"comment_id":72516889,"body_markdown":"its possible look at http://poi.apache.org/slideshow/xslf-cookbook.html#NewPresentation","body":"its possible look at <a href=\"http://poi.apache.org/slideshow/xslf-cookbook.html#NewPresentation\" rel=\"nofollow noreferrer\">poi.apache.org/slideshow/xslf-cookbook.html#NewPresentation</a>"},{"owner":{"account_id":309918,"reputation":544,"user_id":2573071,"accept_rate":70,"display_name":"CrazyProgrammer"},"score":0,"creation_date":1489068872,"post_id":42697014,"comment_id":72517072,"body_markdown":"in the example, it shows to add text in the PPT, that works, but want to add html content, text with html tags. should display as html formatted content","body":"in the example, it shows to add text in the PPT, that works, but want to add html content, text with html tags. should display as html formatted content"},{"owner":{"account_id":6815038,"reputation":73,"user_id":5244029,"display_name":"hhafeez"},"score":0,"creation_date":1489069418,"post_id":42697014,"comment_id":72517470,"body_markdown":"html text is a text so you should be able to write tags as text","body":"html text is a text so you should be able to write tags as text"},{"owner":{"account_id":309918,"reputation":544,"user_id":2573071,"accept_rate":70,"display_name":"CrazyProgrammer"},"score":0,"creation_date":1489069475,"post_id":42697014,"comment_id":72517513,"body_markdown":"That didnt work. That display as tags itself. its not getting formatted.","body":"That didnt work. That display as tags itself. its not getting formatted."},{"owner":{"account_id":6815038,"reputation":73,"user_id":5244029,"display_name":"hhafeez"},"score":0,"creation_date":1489069539,"post_id":42697014,"comment_id":72517547,"body_markdown":"what you mean by formatting. you can always format a text whatever ways you want","body":"what you mean by formatting. you can always format a text whatever ways you want"},{"owner":{"account_id":309918,"reputation":544,"user_id":2573071,"accept_rate":70,"display_name":"CrazyProgrammer"},"score":0,"creation_date":1489069655,"post_id":42697014,"comment_id":72517627,"body_markdown":"I want to set HTML content to display in the ppt, for example &lt;b&gt;bold&lt;/b&gt; should display as **bold** like that","body":"I want to set HTML content to display in the ppt, for example &lt;b&gt;bold&lt;/b&gt; should display as <b>bold</b> like that"},{"owner":{"account_id":6815038,"reputation":73,"user_id":5244029,"display_name":"hhafeez"},"score":0,"creation_date":1489069750,"post_id":42697014,"comment_id":72517697,"body_markdown":"This is not going to happen. That is not formatting. that is rendering of html which will not happen in ppt. The browser understands html tags. ppt is not a browser.","body":"This is not going to happen. That is not formatting. that is rendering of html which will not happen in ppt. The browser understands html tags. ppt is not a browser."},{"owner":{"account_id":6815038,"reputation":73,"user_id":5244029,"display_name":"hhafeez"},"score":0,"creation_date":1489069969,"post_id":42697014,"comment_id":72517851,"body_markdown":"why would you write in ppt if you want to render it as html page?","body":"why would you write in ppt if you want to render it as html page?"},{"owner":{"account_id":2359576,"reputation":3386,"user_id":2066598,"display_name":"kiwiwings"},"score":0,"creation_date":1489074558,"post_id":42697014,"comment_id":72521253,"body_markdown":"I did [something similar for docx](http://stackoverflow.com/questions/17800017/writing-styled-text-to-a-docx-file/17823048#17823048) ... maybe I try to write something like this for H/XSLF too ...","body":"I did <a href=\"http://stackoverflow.com/questions/17800017/writing-styled-text-to-a-docx-file/17823048#17823048\">something similar for docx</a> ... maybe I try to write something like this for H/XSLF too ..."},{"owner":{"account_id":309918,"reputation":544,"user_id":2573071,"accept_rate":70,"display_name":"CrazyProgrammer"},"score":0,"creation_date":1489130603,"post_id":42697014,"comment_id":72545814,"body_markdown":"what you did looks really nice... if you can manage to do the same for pptx it will be great","body":"what you did looks really nice... if you can manage to do the same for pptx it will be great"},{"owner":{"account_id":5094142,"reputation":302,"user_id":4086136,"display_name":"PeteZaria"},"score":0,"creation_date":1564233166,"post_id":42697014,"comment_id":100967593,"body_markdown":"Okay let&#39;s say I want to export a graphic chart or even the content of a pbi report in an iframe from HTML to PowerPoint  . Ideally, in order to get the expected result, the process should be able to first identify the content of the HTML element id, then if it&#39;s NOT limited to text,....being able to take a snapshot of the content then convert it as an image which the PowerPoint conversion tool may be able to recognize. In most Powerpoint cases, graphics are mainly static images... and that&#39;s a lot of coding...","body":"Okay let&#39;s say I want to export a graphic chart or even the content of a pbi report in an iframe from HTML to PowerPoint  . Ideally, in order to get the expected result, the process should be able to first identify the content of the HTML element id, then if it&#39;s NOT limited to text,....being able to take a snapshot of the content then convert it as an image which the PowerPoint conversion tool may be able to recognize. In most Powerpoint cases, graphics are mainly static images... and that&#39;s a lot of coding..."}],"owner":{"account_id":309918,"reputation":544,"user_id":2573071,"accept_rate":70,"display_name":"CrazyProgrammer"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1271,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1671263601,"creation_date":1489067084,"question_id":42697014,"body_markdown":"I want to insert few html content programmatically to ppt file generated using apache poi. \r\n\r\nDoes pptx poi framework supports inserting html content to the ppt slides?","title":"Insert HTML content in PPT using apache poi java","body":"<p>I want to insert few html content programmatically to ppt file generated using apache poi. </p>\n\n<p>Does pptx poi framework supports inserting html content to the ppt slides?</p>\n"},{"tags":["java","mysql","tomcat"],"comments":[{"owner":{"account_id":1133647,"reputation":2061,"user_id":1119161,"accept_rate":31,"display_name":"dsp_user"},"score":0,"creation_date":1473935120,"post_id":39508026,"comment_id":66333704,"body_markdown":"Is your application hosted on a Tomcat instance, which serves multiple web applications (not just yours)? There&#39;s a possibility that Tomcat closes your app (to save Resources) when it&#39;s not used by anyone so it takes some time to reload when you next visit it.","body":"Is your application hosted on a Tomcat instance, which serves multiple web applications (not just yours)? There&#39;s a possibility that Tomcat closes your app (to save Resources) when it&#39;s not used by anyone so it takes some time to reload when you next visit it."},{"owner":{"account_id":4352944,"reputation":4918,"user_id":3589625,"accept_rate":68,"display_name":"Ondrej Tokar"},"score":0,"creation_date":1473935595,"post_id":39508026,"comment_id":66333991,"body_markdown":"Hmm yes there is one tomcat server and multiple apps on it. Is there a way to keep it open and ready for every app?","body":"Hmm yes there is one tomcat server and multiple apps on it. Is there a way to keep it open and ready for every app?"},{"owner":{"account_id":1133647,"reputation":2061,"user_id":1119161,"accept_rate":31,"display_name":"dsp_user"},"score":0,"creation_date":1473935750,"post_id":39508026,"comment_id":66334089,"body_markdown":"I don&#39;t know if you can keep it open but you can ask your web hosting provider. Maybe it&#39;s not the issue at all.","body":"I don&#39;t know if you can keep it open but you can ask your web hosting provider. Maybe it&#39;s not the issue at all."},{"owner":{"account_id":4352944,"reputation":4918,"user_id":3589625,"accept_rate":68,"display_name":"Ondrej Tokar"},"score":0,"creation_date":1473937109,"post_id":39508026,"comment_id":66334801,"body_markdown":"I am hosting it myself on AWS. Hmm it&#39;s shame I haven&#39;t got any answer on this or at least a guidance.","body":"I am hosting it myself on AWS. Hmm it&#39;s shame I haven&#39;t got any answer on this or at least a guidance."},{"owner":{"account_id":1133647,"reputation":2061,"user_id":1119161,"accept_rate":31,"display_name":"dsp_user"},"score":0,"creation_date":1473938082,"post_id":39508026,"comment_id":66335387,"body_markdown":"Try to debug it using your browser (press F12 and you see requests etc). This way you will know whether the browser is making some extra server trips when the page is taking long to load etc","body":"Try to debug it using your browser (press F12 and you see requests etc). This way you will know whether the browser is making some extra server trips when the page is taking long to load etc"},{"owner":{"account_id":4352944,"reputation":4918,"user_id":3589625,"accept_rate":68,"display_name":"Ondrej Tokar"},"score":0,"creation_date":1473938739,"post_id":39508026,"comment_id":66335764,"body_markdown":"No it&#39;s not the browser, it&#39;s that one single request that responds longer the first time.","body":"No it&#39;s not the browser, it&#39;s that one single request that responds longer the first time."},{"owner":{"account_id":1133647,"reputation":2061,"user_id":1119161,"accept_rate":31,"display_name":"dsp_user"},"score":0,"creation_date":1473941286,"post_id":39508026,"comment_id":66337200,"body_markdown":"Note  that while the cache-control attribute in the request header is set to no cache (in my browser), the response header cache-control attribute is set to 52 seconds, which basically instructs the browser to revalidate the same request after that period (same as hitting Refresh I think).","body":"Note  that while the cache-control attribute in the request header is set to no cache (in my browser), the response header cache-control attribute is set to 52 seconds, which basically instructs the browser to revalidate the same request after that period (same as hitting Refresh I think)."}],"answers":[{"tags":[],"owner":{"account_id":1426585,"reputation":2315,"user_id":1349927,"accept_rate":62,"display_name":"tak3shi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1473939543,"creation_date":1473939543,"answer_id":39510135,"question_id":39508026,"body_markdown":"The content is 200kB in size. You need to optimize it in the front and backend.\r\n\r\nThe main problem is in your backend. Check why it takes so long.\r\n\r\nIn the frontend you can enable gzip compression. Check the tomcat documentation on how to do it. This will reduce the size for the download. \r\n\r\nThe second time is probably faster for you due to browser caching.\r\nCheck the response code in Firebug, if the response is 304 it is cached. Response 200 means it has been loaded from the server.\r\n","title":"First response is slow Tomcat","body":"<p>The content is 200kB in size. You need to optimize it in the front and backend.</p>\n\n<p>The main problem is in your backend. Check why it takes so long.</p>\n\n<p>In the frontend you can enable gzip compression. Check the tomcat documentation on how to do it. This will reduce the size for the download. </p>\n\n<p>The second time is probably faster for you due to browser caching.\nCheck the response code in Firebug, if the response is 304 it is cached. Response 200 means it has been loaded from the server.</p>\n"},{"tags":[],"owner":{"account_id":23684642,"reputation":16,"user_id":17709766,"display_name":"B&#233;ci Roboz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671263557,"creation_date":1671263110,"answer_id":74832537,"question_id":39508026,"body_markdown":"ORM systems (like [Hibernate][1]) can cause significantly slow startup if you forget to turn off the initial modell-schema sync option in production environment, for example in [Spring][2] -&gt; JPA -&gt; Hibernate -&gt; application-[server].yml-&gt; \r\n\r\n```\r\nspring:\r\n    jpa:\r\n        hibernate:\r\n            ddl-auto: update\r\n```\r\n&lt;strike&gt;update&lt;/strike&gt; none\r\n\r\n[If your model didn&#39;t change, switch &quot;update&quot; to &quot;none&quot; in the production environment for faster startup.][3]\r\n\r\n\r\n  [1]: https://hibernate.org/orm/\r\n  [2]: https://spring.io/projects/spring-boot\r\n  [3]: https://docs.spring.io/spring-boot/docs/1.1.0.M1/reference/html/howto-database-initialization.html","title":"First response is slow Tomcat","body":"<p>ORM systems (like <a href=\"https://hibernate.org/orm/\" rel=\"nofollow noreferrer\">Hibernate</a>) can cause significantly slow startup if you forget to turn off the initial modell-schema sync option in production environment, for example in <a href=\"https://spring.io/projects/spring-boot\" rel=\"nofollow noreferrer\">Spring</a> -&gt; JPA -&gt; Hibernate -&gt; application-[server].yml-&gt;</p>\n<pre><code>spring:\n    jpa:\n        hibernate:\n            ddl-auto: update\n</code></pre>\n<p><strike>update</strike> none</p>\n<p><a href=\"https://docs.spring.io/spring-boot/docs/1.1.0.M1/reference/html/howto-database-initialization.html\" rel=\"nofollow noreferrer\">If your model didn't change, switch &quot;update&quot; to &quot;none&quot; in the production environment for faster startup.</a></p>\n"}],"owner":{"account_id":4352944,"reputation":4918,"user_id":3589625,"accept_rate":68,"display_name":"Ondrej Tokar"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1967,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":2,"score":-2,"last_activity_date":1671263557,"creation_date":1473932994,"question_id":39508026,"body_markdown":"I made a Java Web Application hosted by Tomcat. It can be found on this [URL][1].\r\n\r\nThe problem that I am experiencing is that whenever I visit the page the first time it takes about 10s while every time after it it takes only 100-500ms. I would say the speed improvement is due to browser caching, but not really, when I refresh cache too (`ctrl`+`shift`+`r`) I get the same quick response.\r\n\r\nThen after some time, about 5 minutes I visit the page again and it&#39;s slow again.\r\n\r\nYou may try some tests yourself on the URL provided by changing the search parameter value to e.g.: `1050`,`1051`,`1052`,`2670`,`4000`,`2300`,`2200`.\r\n\r\nAlso the interesting fact I have spotted is that no matter how big payload (compare 1050 with 2300) the time is almost always the same approx. 9-10s. So what I assume is that something like Java Server has got to get ready and that is what is taking time.\r\n\r\n  [1]: http://52.16.32.189/FIBIA_Autocomplete_v2/getData/?search=4760&amp;getFiberStatus=false&amp;prepopulateCity=true&amp;zip=null\r\n\r\n**EDIT:**\r\n\r\nI was first thinking it could be related to Java/Tomcat having to load some resources and then after some time +-3-5mins again because for some reason it unloaded it. But as I wrote above, even if I change the URL query string (that causes a different SQL query during execution), it again loads long. Can the issue be related to the DB? I am using MySQL.\r\n\r\n**EDIT2:**\r\n\r\nThe reason why it&#39;s faster is most likely the server caching. I am 95% sure and that is because I made couple of experiments such as trying it on 2 computers etc. (no it&#39;s not browser caching). Then I realized that if it&#39;s fast only when it&#39;s cached, what takes so long is the actual `.executeQuery` line of code. It takes 10s even though the exact same request through a client such as `WorkBench` takes only 0.285s. Therefore I am going to try to use a `PreparedStatement` or experiment further.","title":"First response is slow Tomcat","body":"<p>I made a Java Web Application hosted by Tomcat. It can be found on this <a href=\"http://52.16.32.189/FIBIA_Autocomplete_v2/getData/?search=4760&amp;getFiberStatus=false&amp;prepopulateCity=true&amp;zip=null\" rel=\"nofollow\">URL</a>.</p>\n\n<p>The problem that I am experiencing is that whenever I visit the page the first time it takes about 10s while every time after it it takes only 100-500ms. I would say the speed improvement is due to browser caching, but not really, when I refresh cache too (<code>ctrl</code>+<code>shift</code>+<code>r</code>) I get the same quick response.</p>\n\n<p>Then after some time, about 5 minutes I visit the page again and it's slow again.</p>\n\n<p>You may try some tests yourself on the URL provided by changing the search parameter value to e.g.: <code>1050</code>,<code>1051</code>,<code>1052</code>,<code>2670</code>,<code>4000</code>,<code>2300</code>,<code>2200</code>.</p>\n\n<p>Also the interesting fact I have spotted is that no matter how big payload (compare 1050 with 2300) the time is almost always the same approx. 9-10s. So what I assume is that something like Java Server has got to get ready and that is what is taking time.</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>I was first thinking it could be related to Java/Tomcat having to load some resources and then after some time +-3-5mins again because for some reason it unloaded it. But as I wrote above, even if I change the URL query string (that causes a different SQL query during execution), it again loads long. Can the issue be related to the DB? I am using MySQL.</p>\n\n<p><strong>EDIT2:</strong></p>\n\n<p>The reason why it's faster is most likely the server caching. I am 95% sure and that is because I made couple of experiments such as trying it on 2 computers etc. (no it's not browser caching). Then I realized that if it's fast only when it's cached, what takes so long is the actual <code>.executeQuery</code> line of code. It takes 10s even though the exact same request through a client such as <code>WorkBench</code> takes only 0.285s. Therefore I am going to try to use a <code>PreparedStatement</code> or experiment further.</p>\n"},{"tags":["java","ssl","ssh","identity","keystore"],"comments":[{"owner":{"account_id":11042,"reputation":7158,"user_id":3540161,"accept_rate":56,"display_name":"Rolf"},"score":0,"creation_date":1436800854,"post_id":31385944,"comment_id":50751177,"body_markdown":"I found this related question, but I don&#39;t want to store it as a password string, that feels funny. https://stackoverflow.com/questions/6243446/how-to-store-a-simple-key-string-inside-java-keystore#6243755","body":"I found this related question, but I don&#39;t want to store it as a password string, that feels funny. <a href=\"https://stackoverflow.com/questions/6243446/how-to-store-a-simple-key-string-inside-java-keystore#6243755\" title=\"how to store a simple key string inside java keystore%236243755\">stackoverflow.com/questions/6243446/&hellip;</a>"},{"owner":{"account_id":2325310,"reputation":384,"user_id":2039966,"display_name":"Francois Gergaud"},"score":0,"creation_date":1436801375,"post_id":31385944,"comment_id":50751558,"body_markdown":"I am not really sure here, but I think the java&#39;s keystores (either in PKCS12 or JKS format) are meant to be used for SSL communications. The SSL communication used something more complete than a public-key, called certificate, to authenticate entities. The certificate embed a Distinguish Name  and other stuff to initialize a SSL communication between 2 entities. I think there is a confusion between SSL and SSH, and I am note sure it is possible that information stored in a keystore may be used for an SSH communication.","body":"I am not really sure here, but I think the java&#39;s keystores (either in PKCS12 or JKS format) are meant to be used for SSL communications. The SSL communication used something more complete than a public-key, called certificate, to authenticate entities. The certificate embed a Distinguish Name  and other stuff to initialize a SSL communication between 2 entities. I think there is a confusion between SSL and SSH, and I am note sure it is possible that information stored in a keystore may be used for an SSH communication."},{"owner":{"account_id":916980,"reputation":8820,"user_id":2580516,"display_name":"Warren Dew"},"score":0,"creation_date":1436802093,"post_id":31385944,"comment_id":50752055,"body_markdown":"Are you trying to use an existing private key, or is it okay to generate a new one?","body":"Are you trying to use an existing private key, or is it okay to generate a new one?"}],"answers":[{"tags":[],"owner":{"account_id":40735,"reputation":13496,"user_id":118098,"accept_rate":73,"display_name":"maxwellb"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1436804319,"creation_date":1436804319,"answer_id":31388440,"question_id":31385944,"body_markdown":"Supposing you have a private key that looks like this:\r\n\r\n*id_rsa*\r\n&lt;pre&gt;\r\n-----BEGIN RSA PRIVATE KEY-----\r\nMIICWgIBAAKBgQCh3czej+KeEraesxts3xP6kx+cO/Fu8ROc/k4hSl7fO9jFZ6Lm\r\nOsGlzsRsi8VDg9n/fh6iFng/Umgnfd4J0IiLQihSRYnvyOsqqXbIJ8mBtydqO4s+\r\nCjZLLDRSEMx3dw6GhFOcQ7xYYOeUMNY8QFidPn2LjURfMxG9XWOrCww8rwIBJQKB\r\ngGA+sSpjZCajV9P7yx4jxrCqgX99lnlREpSy4lj7ybUqgOQUG6t84dg1wOaYS8dH\r\nerOXGSIbMr3d+L2JHD0v4ntcKqzJm6Nf1FE27V0hvpzZl3fNax4NI/cIXM78zBx4\r\nlBblr5QMYnTSd5eADIcDy7TZHuScRPkPViQ2x9QPayQ9AkEA67lfOXFEJ8iTYHdu\r\nykvj0Xqcs/peDX5nYXCEJ2XECxgxfKYVbQPazO5ACgp1VsgFMCsd4rDSwahOAgkE\r\nrGfgCwJBAK/KFkSqMCLga8m19uqOftTQ+GhFc0O1lchWQ0A99+b9Rcs0yAe10GCN\r\nSbgrEmMuXEQS1emT6ZHM7KIh2P7kiG0CQQDSPYxH/TzJiWDZf0cjIRdMIT+ncJkS\r\n9DKw2flTkh2NWsRaap1858MleowkoYs/j81Gov76nbUNlhwPpy2uhiivAkByBor8\r\nG11+aA6QrWHkQMD4vuZReSgr62gTPt+DndE74o4i8c3bfNowyllU3asP5rhjgdbc\r\nsvheksMBYhA2ohNNAkAiKQdv08UAG77piJi09OFIEcetTiq/wy9Zeb6fmEuMFzsT\r\n2aR6x0d43OXqAgcKFgFuzqdXgxqhP/n9/eIqXdVA\r\n-----END RSA PRIVATE KEY-----\r\n&lt;/pre&gt;\r\n\r\nDo two things:\r\n\r\n1) Create a certificate to wrap the key and expose the public key as a certificate, so that `keytool` understands it.\r\n\r\n    openssl x509 -signkey id_rsa -req -in example.req\r\n\r\n2) Create a self-signed certificate from your new request.\r\n\r\n    openssl x509 -signkey id_rsa -req -in example.req -out example.cer\r\n\r\nThen, [combine the certificate and private key][1], and import into `keytool`.\r\n\r\n    cat example.cer id_rsa &gt; example.full\r\n    keytool -import -keystore example.jks -file example.full\r\n\r\nThis will get the keys in there. Utilizing the private and public keys and interacting with the SSH/SFTP library of your choice is left as an exercise.\r\n\r\n  [1]: https://stackoverflow.com/questions/991758/how-to-get-an-openssl-pem-file-from-key-and-crt-files/991772#991772","title":"How to add SSH identity file keypair to JKS keystore","body":"<p>Supposing you have a private key that looks like this:</p>\n\n<p><em>id_rsa</em></p>\n\n<pre>\n-----BEGIN RSA PRIVATE KEY-----\nMIICWgIBAAKBgQCh3czej+KeEraesxts3xP6kx+cO/Fu8ROc/k4hSl7fO9jFZ6Lm\nOsGlzsRsi8VDg9n/fh6iFng/Umgnfd4J0IiLQihSRYnvyOsqqXbIJ8mBtydqO4s+\nCjZLLDRSEMx3dw6GhFOcQ7xYYOeUMNY8QFidPn2LjURfMxG9XWOrCww8rwIBJQKB\ngGA+sSpjZCajV9P7yx4jxrCqgX99lnlREpSy4lj7ybUqgOQUG6t84dg1wOaYS8dH\nerOXGSIbMr3d+L2JHD0v4ntcKqzJm6Nf1FE27V0hvpzZl3fNax4NI/cIXM78zBx4\nlBblr5QMYnTSd5eADIcDy7TZHuScRPkPViQ2x9QPayQ9AkEA67lfOXFEJ8iTYHdu\nykvj0Xqcs/peDX5nYXCEJ2XECxgxfKYVbQPazO5ACgp1VsgFMCsd4rDSwahOAgkE\nrGfgCwJBAK/KFkSqMCLga8m19uqOftTQ+GhFc0O1lchWQ0A99+b9Rcs0yAe10GCN\nSbgrEmMuXEQS1emT6ZHM7KIh2P7kiG0CQQDSPYxH/TzJiWDZf0cjIRdMIT+ncJkS\n9DKw2flTkh2NWsRaap1858MleowkoYs/j81Gov76nbUNlhwPpy2uhiivAkByBor8\nG11+aA6QrWHkQMD4vuZReSgr62gTPt+DndE74o4i8c3bfNowyllU3asP5rhjgdbc\nsvheksMBYhA2ohNNAkAiKQdv08UAG77piJi09OFIEcetTiq/wy9Zeb6fmEuMFzsT\n2aR6x0d43OXqAgcKFgFuzqdXgxqhP/n9/eIqXdVA\n-----END RSA PRIVATE KEY-----\n</pre>\n\n<p>Do two things:</p>\n\n<p>1) Create a certificate to wrap the key and expose the public key as a certificate, so that <code>keytool</code> understands it.</p>\n\n<pre><code>openssl x509 -signkey id_rsa -req -in example.req\n</code></pre>\n\n<p>2) Create a self-signed certificate from your new request.</p>\n\n<pre><code>openssl x509 -signkey id_rsa -req -in example.req -out example.cer\n</code></pre>\n\n<p>Then, <a href=\"https://stackoverflow.com/questions/991758/how-to-get-an-openssl-pem-file-from-key-and-crt-files/991772#991772\">combine the certificate and private key</a>, and import into <code>keytool</code>.</p>\n\n<pre><code>cat example.cer id_rsa &gt; example.full\nkeytool -import -keystore example.jks -file example.full\n</code></pre>\n\n<p>This will get the keys in there. Utilizing the private and public keys and interacting with the SSH/SFTP library of your choice is left as an exercise.</p>\n"}],"owner":{"account_id":11042,"reputation":7158,"user_id":3540161,"accept_rate":56,"display_name":"Rolf"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12584,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"answer_count":1,"score":7,"last_activity_date":1671262888,"creation_date":1436797342,"question_id":31385944,"body_markdown":"One of the tasks of a Java application I am building is to connect to a remote SFTP server. In order to do that I have the certificate of the remote machine and a local identity (`id_rsa` and `id_rsa.pub` in the `.ssh` folder). This is working fine.\r\n\r\nI&#39;d like to put the certificate and the identity in a password protected java keystore for easier and more secure configuration. I have this working for the certificate, but I am having problems storing the SSH identity in a JKS or PKCS12 keystore (either one would work).\r\n\r\nTo isolate the problem I have tried the following steps:\r\n\r\nI use `ssh-keygen -b 2048` to create the two identity files `id_rsa_demo` and `id_rsa_demo.pub` in te local directory. As I understand these are the private and public keys of the identity, so I try to combine those into an `identity.p12` file:\r\n\r\n    openssl pkcs12 -export \\\r\n                   -inkey &quot;id_rsa_demo&quot; \\\r\n                   -in &quot;id_rsa_demo.pub&quot; \\\r\n                   -out &quot;identity.p12&quot; \\\r\n                   -password &quot;pass:topsecret&quot; \\\r\n                   -name &quot;demoalias&quot;\r\n\r\nThis gives me the error `unable to load certificates`. I searched around and it seems that openssl expects a certificate with a complete chain for the `-in` parameter. Since my generated identity does not have that, I tried the `-nocerts` option, like so:\r\n\r\n    openssl pkcs12 -export \\\r\n                   -inkey &quot;id_rsa_demo&quot; \\\r\n                   -in &quot;id_rsa_demo.pub&quot; \\\r\n                   -out &quot;identity.p12&quot; \\\r\n                   -password &quot;pass:topsecret&quot; \\\r\n                   -name &quot;demoalias&quot; \\\r\n                   -nocerts\r\n\r\nI get no errors, but the `-nocerts` option lives up to its promise and does not add my public key to the pkcs12 file:\r\n\r\n    openssl pkcs12 -info -in identity.p12 \r\n    \r\n    Enter Import Password:\r\n    MAC Iteration 2048\r\n    MAC verified OK\r\n    PKCS7 Data\r\n    Shrouded Keybag: pbeWithSHA1And3-KeyTripleDES-CBC, Iteration 2048\r\n    Bag Attributes\r\n        friendlyName: demoalias\r\n    Key Attributes: &lt;No Attributes&gt;\r\n    Enter PEM pass phrase:\r\n    Verifying - Enter PEM pass phrase:\r\n    -----BEGIN ENCRYPTED PRIVATE KEY-----\r\n    MIIFDjBABgkqhkiG9w0BBQ0wMzAbBgkqhkiG9w0BBQwwDgQIAOXpzckBb28CAggA\r\n    MBQGCCqGSIb3DQMHBAjPq9ibr445xQSCBMi5IlOk5F28kQPB5D97afiUb5d3It46\r\n    ...\r\n    ejwYfHTj6bm+dEOUk68zNrWwKqwuJx5AZv3U8sm1cicVmh9W0HpL5tSmMMpDS1ey\r\n    Uos=\r\n    -----END ENCRYPTED PRIVATE KEY-----\r\n\r\nIs there a way to store an SSH identity into a PKCS12 or JKS keystore?","title":"How to add SSH identity file keypair to JKS keystore","body":"<p>One of the tasks of a Java application I am building is to connect to a remote SFTP server. In order to do that I have the certificate of the remote machine and a local identity (<code>id_rsa</code> and <code>id_rsa.pub</code> in the <code>.ssh</code> folder). This is working fine.</p>\n\n<p>I'd like to put the certificate and the identity in a password protected java keystore for easier and more secure configuration. I have this working for the certificate, but I am having problems storing the SSH identity in a JKS or PKCS12 keystore (either one would work).</p>\n\n<p>To isolate the problem I have tried the following steps:</p>\n\n<p>I use <code>ssh-keygen -b 2048</code> to create the two identity files <code>id_rsa_demo</code> and <code>id_rsa_demo.pub</code> in te local directory. As I understand these are the private and public keys of the identity, so I try to combine those into an <code>identity.p12</code> file:</p>\n\n<pre><code>openssl pkcs12 -export \\\n               -inkey \"id_rsa_demo\" \\\n               -in \"id_rsa_demo.pub\" \\\n               -out \"identity.p12\" \\\n               -password \"pass:topsecret\" \\\n               -name \"demoalias\"\n</code></pre>\n\n<p>This gives me the error <code>unable to load certificates</code>. I searched around and it seems that openssl expects a certificate with a complete chain for the <code>-in</code> parameter. Since my generated identity does not have that, I tried the <code>-nocerts</code> option, like so:</p>\n\n<pre><code>openssl pkcs12 -export \\\n               -inkey \"id_rsa_demo\" \\\n               -in \"id_rsa_demo.pub\" \\\n               -out \"identity.p12\" \\\n               -password \"pass:topsecret\" \\\n               -name \"demoalias\" \\\n               -nocerts\n</code></pre>\n\n<p>I get no errors, but the <code>-nocerts</code> option lives up to its promise and does not add my public key to the pkcs12 file:</p>\n\n<pre><code>openssl pkcs12 -info -in identity.p12 \n\nEnter Import Password:\nMAC Iteration 2048\nMAC verified OK\nPKCS7 Data\nShrouded Keybag: pbeWithSHA1And3-KeyTripleDES-CBC, Iteration 2048\nBag Attributes\n    friendlyName: demoalias\nKey Attributes: &lt;No Attributes&gt;\nEnter PEM pass phrase:\nVerifying - Enter PEM pass phrase:\n-----BEGIN ENCRYPTED PRIVATE KEY-----\nMIIFDjBABgkqhkiG9w0BBQ0wMzAbBgkqhkiG9w0BBQwwDgQIAOXpzckBb28CAggA\nMBQGCCqGSIb3DQMHBAjPq9ibr445xQSCBMi5IlOk5F28kQPB5D97afiUb5d3It46\n...\nejwYfHTj6bm+dEOUk68zNrWwKqwuJx5AZv3U8sm1cicVmh9W0HpL5tSmMMpDS1ey\nUos=\n-----END ENCRYPTED PRIVATE KEY-----\n</code></pre>\n\n<p>Is there a way to store an SSH identity into a PKCS12 or JKS keystore?</p>\n"},{"tags":["java","android","android-studio","android-emulator","apk"],"comments":[{"owner":{"account_id":10814854,"reputation":4137,"user_id":7954210,"accept_rate":73,"display_name":"Mouaad Abdelghafour AITALI"},"score":0,"creation_date":1671227174,"post_id":74830018,"comment_id":132061828,"body_markdown":"Where&#39;s the error you got? Please add it to your post","body":"Where&#39;s the error you got? Please add it to your post"},{"owner":{"account_id":10814854,"reputation":4137,"user_id":7954210,"accept_rate":73,"display_name":"Mouaad Abdelghafour AITALI"},"score":0,"creation_date":1671228681,"post_id":74830018,"comment_id":132062138,"body_markdown":"Are sure you added the app-id into your AndroidManifest ?","body":"Are sure you added the app-id into your AndroidManifest ?"},{"owner":{"account_id":23943944,"reputation":17,"user_id":17936566,"display_name":"Swyzax"},"score":0,"creation_date":1671230103,"post_id":74830018,"comment_id":132062382,"body_markdown":"Hello @MouaadAbdelghafourAITALI . Thanks you for helping . I&#39;ve added picture of my manifest","body":"Hello @MouaadAbdelghafourAITALI . Thanks you for helping . I&#39;ve added picture of my manifest"},{"owner":{"account_id":3212023,"reputation":1016,"user_id":17856705,"display_name":"Computable"},"score":0,"creation_date":1671234561,"post_id":74830018,"comment_id":132063090,"body_markdown":"Note the `meta-data` tags need to be a direct descendant of the `application` tag as in https://stackoverflow.com/a/57184985/17856705.","body":"Note the <code>meta-data</code> tags need to be a direct descendant of the <code>application</code> tag as in <a href=\"https://stackoverflow.com/a/57184985/17856705\">stackoverflow.com/a/57184985/17856705</a>."}],"answers":[{"tags":[],"owner":{"account_id":26359116,"reputation":585,"user_id":20015640,"display_name":"Urvish Shiroya"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671262728,"creation_date":1671262728,"answer_id":74832502,"question_id":74830018,"body_markdown":"This documentation will help you according to your problem.\r\nhttps://developers.google.com/admob/android/quick-start\r\n\r\nYou should add this code to your `manifest.xml` file.\r\n\r\n```xml\r\n&lt;application\r\n        ...&gt;\r\n\r\n        &lt;meta-data\r\n            android:name=&quot;com.google.android.gms.ads.APPLICATION_ID&quot;\r\n            android:value=&quot;ca-app-pub-3940256099942544~3347511713&quot;/&gt;\r\n\r\n&lt;/application&gt;\r\n```","title":"Android studio and emulator","body":"<p>This documentation will help you according to your problem.\n<a href=\"https://developers.google.com/admob/android/quick-start\" rel=\"nofollow noreferrer\">https://developers.google.com/admob/android/quick-start</a></p>\n<p>You should add this code to your <code>manifest.xml</code> file.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;application\n        ...&gt;\n\n        &lt;meta-data\n            android:name=&quot;com.google.android.gms.ads.APPLICATION_ID&quot;\n            android:value=&quot;ca-app-pub-3940256099942544~3347511713&quot;/&gt;\n\n&lt;/application&gt;\n</code></pre>\n"}],"owner":{"account_id":23943944,"reputation":17,"user_id":17936566,"display_name":"Swyzax"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":178,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1671262728,"creation_date":1671226904,"question_id":74830018,"body_markdown":"[![enter image description here][1]][1][![enter image description here][2]][2][![enter image description here][3]][3]Hello i&#39;m trying to add ad to my android studio project but when I start my emulator , the application keeps stopping . I did everything like I have to do it , 5 times I restarted but always an error . Please help me thanks \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/wSou2.png\r\n  [2]: https://i.stack.imgur.com/ORbiY.png\r\n  [3]: https://i.stack.imgur.com/RILuC.png","title":"Android studio and emulator","body":"<p><a href=\"https://i.stack.imgur.com/wSou2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wSou2.png\" alt=\"enter image description here\" /></a><a href=\"https://i.stack.imgur.com/ORbiY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ORbiY.png\" alt=\"enter image description here\" /></a><a href=\"https://i.stack.imgur.com/RILuC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RILuC.png\" alt=\"enter image description here\" /></a>Hello i'm trying to add ad to my android studio project but when I start my emulator , the application keeps stopping . I did everything like I have to do it , 5 times I restarted but always an error . Please help me thanks</p>\n"},{"tags":["java","arrays","byte","inputstream"],"comments":[{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":2,"creation_date":1671253719,"post_id":74831873,"comment_id":132064833,"body_markdown":"`bytes = resourceAsStream.readAllBytes();` is somewhat important. That byte variable is now being assigned an array of bytes with significant length.","body":"<code>bytes = resourceAsStream.readAllBytes();</code> is somewhat important. That byte variable is now being assigned an array of bytes with significant length."}],"answers":[{"tags":[],"owner":{"account_id":18608321,"reputation":2964,"user_id":13561410,"display_name":"Oskar Grosser"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671260365,"creation_date":1671260365,"answer_id":74832318,"question_id":74831873,"body_markdown":"Your variable `bytes` only references an array initialized to length 0 _at the beginning_.\r\n\r\nBut in your `try`-block, you reassign a _new_ array to `bytes`: The new (and already populated) array _of appropriate length_ is now referenced by `bytes`.\r\n\r\nWith that reassignment, we essentially discard the zero-length array.\r\n\r\n```java\r\nbyte[] bytes = new byte[0];\r\ntry {\r\n  // ...\r\n  bytes = resourceAsStream.readAllBytes();\r\n}\r\n```\r\n\r\n---\r\n\r\nNo copying into the array first referenced by `bytes` is happening! In fact, if `bytes` is never read before its assignment in the `try`-block, then that assignment may even be its first:\r\n```java\r\nbyte[] bytes; // Declaration of variable `bytes`\r\ntry {\r\n  // ...\r\n  bytes = resourceAsStream.readAllBytes(); // First initialization of `bytes`!\r\n}\r\n```","title":"How is the byte[] array with 0 element allocation working with InputStream (readAllBytes)","body":"<p>Your variable <code>bytes</code> only references an array initialized to length 0 <em>at the beginning</em>.</p>\n<p>But in your <code>try</code>-block, you reassign a <em>new</em> array to <code>bytes</code>: The new (and already populated) array <em>of appropriate length</em> is now referenced by <code>bytes</code>.</p>\n<p>With that reassignment, we essentially discard the zero-length array.</p>\n<pre class=\"lang-java prettyprint-override\"><code>byte[] bytes = new byte[0];\ntry {\n  // ...\n  bytes = resourceAsStream.readAllBytes();\n}\n</code></pre>\n<hr />\n<p>No copying into the array first referenced by <code>bytes</code> is happening! In fact, if <code>bytes</code> is never read before its assignment in the <code>try</code>-block, then that assignment may even be its first:</p>\n<pre class=\"lang-java prettyprint-override\"><code>byte[] bytes; // Declaration of variable `bytes`\ntry {\n  // ...\n  bytes = resourceAsStream.readAllBytes(); // First initialization of `bytes`!\n}\n</code></pre>\n"}],"owner":{"account_id":10585944,"reputation":1,"user_id":7798303,"display_name":"priSim"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":147,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1671260365,"creation_date":1671252645,"question_id":74831873,"body_markdown":"How can a byte array with 0 memory allocation (byte[] arr = new byte[0]) take bytes read from InputStream?\r\n\r\nBelow is my code \r\n```\r\nbyte[] bytes = new byte[0];\r\n\t\ttry {\r\n\t\tInputStream resourceAsStream = ArrayBasics.class.getResourceAsStream(&quot;/test.json&quot;);\r\n\t    bytes = resourceAsStream.readAllBytes();\t\t\r\n\t    System.out.println(Arrays.toString(bytes));\r\n\t\t} catch (Exception noSuchFileException) {\r\n\t\t\t System.out.println(&quot;Some exception&quot;);\r\n\t\t}\r\n```\r\nI would expect the code to fail and throw out of bounds error (as it would do if I try bytes[0] = 100;) But the &quot;bytes&quot; actually show the contents in the console without any error or warnings","title":"How is the byte[] array with 0 element allocation working with InputStream (readAllBytes)","body":"<p>How can a byte array with 0 memory allocation (byte[] arr = new byte[0]) take bytes read from InputStream?</p>\n<p>Below is my code</p>\n<pre><code>byte[] bytes = new byte[0];\n        try {\n        InputStream resourceAsStream = ArrayBasics.class.getResourceAsStream(&quot;/test.json&quot;);\n        bytes = resourceAsStream.readAllBytes();        \n        System.out.println(Arrays.toString(bytes));\n        } catch (Exception noSuchFileException) {\n             System.out.println(&quot;Some exception&quot;);\n        }\n</code></pre>\n<p>I would expect the code to fail and throw out of bounds error (as it would do if I try bytes[0] = 100;) But the &quot;bytes&quot; actually show the contents in the console without any error or warnings</p>\n"},{"tags":["java","android","database","firebase","android-studio"],"answers":[{"tags":[],"owner":{"account_id":17301412,"reputation":189,"user_id":12531078,"display_name":"Justin"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1671260035,"creation_date":1671260035,"answer_id":74832301,"question_id":74832020,"body_markdown":"If I&#39;m right, your `getKey` variable in `updateLaundry()` method is nullable, since your are setting the value of the intent key `getPrimaryKey` to this variable. So whenever you dont pass the value for `getPrimaryKey` via the intent then `getKey` will be set as null and this NPE can occur.\r\n\r\nTherefore, either do a null check for `getkey` before you use it or make sure you are passing the key via the intent from the previous activity.","title":"Error When Updating Data : java.lang.NullPointerException: Can&#39;t pass null for argument &#39;pathString&#39; in child()","body":"<p>If I'm right, your <code>getKey</code> variable in <code>updateLaundry()</code> method is nullable, since your are setting the value of the intent key <code>getPrimaryKey</code> to this variable. So whenever you dont pass the value for <code>getPrimaryKey</code> via the intent then <code>getKey</code> will be set as null and this NPE can occur.</p>\n<p>Therefore, either do a null check for <code>getkey</code> before you use it or make sure you are passing the key via the intent from the previous activity.</p>\n"}],"owner":{"account_id":25348036,"reputation":11,"user_id":19165334,"display_name":"M. Syahri"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1671260744,"answer_count":1,"score":-1,"last_activity_date":1671260035,"creation_date":1671255441,"question_id":74832020,"body_markdown":"This is a simple sample of a crud function with Firebase via Android Studio. I found several obstacles in the update process, along with errors that appeared when updating.\r\n\r\n&gt; java.lang.NullPointerException: Can&#39;t pass null for argument &#39;pathString&#39; in child()\r\n\r\nIs there a simple solution to overcome this? Here is the complete code for the update activity.\r\n\r\n        import static android.text.TextUtils.isEmpty;\r\n        import android.annotation.SuppressLint;\r\n        import android.app.DatePickerDialog;\r\n        import android.os.Bundle;\r\n        import android.text.TextUtils;\r\n        import android.view.View;\r\n        import android.widget.Button;\r\n        import android.widget.EditText;\r\n        import android.widget.RadioButton;\r\n        import android.widget.RadioGroup;\r\n        import android.widget.Spinner;\r\n        import android.widget.Toast;\r\n        import androidx.appcompat.app.AppCompatActivity;\r\n        \r\n        //import com.bumptech.glide.Glide;\r\n        import com.google.android.gms.tasks.OnSuccessListener;\r\n        import com.google.firebase.database.DatabaseReference;\r\n        import com.google.firebase.database.FirebaseDatabase;\r\n        \r\n        import java.text.SimpleDateFormat;\r\n        \r\n        public class UpdateLaundry extends AppCompatActivity {\r\n        //deklarasi variable\r\n        private EditText namaBaru, tempatBaru;\r\n        private Spinner jenisBaru;\r\n        private RadioButton ktgBaru, new_Rb1, new_Rb2, new_Rb3;\r\n        private Button update;\r\n        private DatabaseReference database;\r\n        private RadioGroup rgkategoriBaru;\r\n        private String cekNama, cekTempat, cekJenis, cekKategori;\r\n    \r\n        @SuppressLint(&quot;WrongViewCast&quot;)\r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_updatelaundry);\r\n    \r\n            namaBaru = findViewById(R.id.new_nama);\r\n            tempatBaru = findViewById(R.id.new_lokasi);\r\n            jenisBaru = findViewById(R.id.newspinner_jenis);\r\n            update = findViewById(R.id.btn_update);\r\n            new_Rb1 = findViewById(R.id.new_rb1);\r\n            new_Rb2 = findViewById(R.id.new_rb2);\r\n            new_Rb3 = findViewById(R.id.new_rb3);\r\n            rgkategoriBaru = findViewById(R.id.new_rg_ktg);\r\n    \r\n            final String getKategori = getIntent().getExtras().getString(&quot;dataKategori&quot;);\r\n    \r\n            if (getKategori.equals(&quot;Cuci&quot;)) {\r\n                new_Rb1.setChecked(true);\r\n            } else if (getKategori.equals(&quot;Setrika&quot;)) {\r\n                new_Rb2.setChecked(true);\r\n            } else if (getKategori.equals(&quot;Cuci dan Setrika&quot;)) {\r\n                new_Rb3.setChecked(true);\r\n            }\r\n    \r\n            database= FirebaseDatabase.getInstance().getReference();\r\n            getData();\r\n    \r\n    \r\n            update.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n    \r\n                    int pilihKtgBaru = rgkategoriBaru.getCheckedRadioButtonId();\r\n                    ktgBaru = findViewById(pilihKtgBaru);\r\n                    cekNama = namaBaru.getText().toString();\r\n                    cekTempat = tempatBaru.getText().toString();\r\n                    cekJenis = jenisBaru.getSelectedItem().toString();\r\n    \r\n    \r\n    //mengubah data databse menggunakan data yang baru di inputkan\r\n                    if (isEmpty(cekNama) || isEmpty(cekTempat)) {\r\n                        Toast.makeText(UpdateLaundry.this, &quot;Data tidak boleh kosong&quot;, Toast.LENGTH_SHORT).show();\r\n                    } else {\r\n                                        /*Processing Update Data\r\n                                        Reload setter recomended to get new data from user*/\r\n    \r\n                        Laundry setLaundry = new Laundry();\r\n                        setLaundry.setNama(namaBaru.getText().toString());\r\n                        setLaundry.setJenis(jenisBaru.getSelectedItem().toString());\r\n                        setLaundry.setTempat(tempatBaru.getText().toString());\r\n                        setLaundry.setKategori(ktgBaru.getText().toString());\r\n                        updateLaundry(setLaundry);\r\n    \r\n                    }\r\n                }\r\n            });\r\n        }\r\n    \r\n        private boolean isEmpty(String s){\r\n            return TextUtils.isEmpty(s);\r\n        }\r\n    \r\n        //mengambil data dari database ke form update\r\n        private void getData() {\r\n    \r\n            final String getNama = getIntent().getExtras().getString(&quot;dataNama&quot;);\r\n            final String getTempat = getIntent().getExtras().getString(&quot;dataTempat&quot;);\r\n            final String getKategori = getIntent().getExtras().getString(&quot;dataKategori&quot;);\r\n            final String getJenis = getIntent().getExtras().getString(&quot;dataJenis&quot;);\r\n    \r\n    \r\n            namaBaru.setText(getNama);\r\n            tempatBaru.setText(getTempat);\r\n    \r\n    \r\n        }\r\n        private void updateLaundry(Laundry ldry) {\r\n    \r\n            String getKey = getIntent().getExtras().getString(&quot;getPrimaryKey&quot;);\r\n            database.child(&quot;Admin&quot;)\r\n                    .child(&quot;Laundry&quot;)\r\n                    .child(getKey)\r\n                    .setValue(ldry)\r\n                    .addOnSuccessListener(new OnSuccessListener&lt;Void&gt;() {\r\n                        @Override\r\n                        public void onSuccess(Void aVoid) {\r\n                            namaBaru.setText(&quot;&quot;);\r\n                            tempatBaru.setText(&quot;&quot;);\r\n    \r\n                            Toast.makeText(UpdateLaundry.this, &quot;Data Berhasil diubah&quot;, Toast.LENGTH_SHORT).show();\r\n                            finish();\r\n                        }\r\n                    });\r\n        }\r\n\r\n","title":"Error When Updating Data : java.lang.NullPointerException: Can&#39;t pass null for argument &#39;pathString&#39; in child()","body":"<p>This is a simple sample of a crud function with Firebase via Android Studio. I found several obstacles in the update process, along with errors that appeared when updating.</p>\n<blockquote>\n<p>java.lang.NullPointerException: Can't pass null for argument 'pathString' in child()</p>\n</blockquote>\n<p>Is there a simple solution to overcome this? Here is the complete code for the update activity.</p>\n<pre><code>    import static android.text.TextUtils.isEmpty;\n    import android.annotation.SuppressLint;\n    import android.app.DatePickerDialog;\n    import android.os.Bundle;\n    import android.text.TextUtils;\n    import android.view.View;\n    import android.widget.Button;\n    import android.widget.EditText;\n    import android.widget.RadioButton;\n    import android.widget.RadioGroup;\n    import android.widget.Spinner;\n    import android.widget.Toast;\n    import androidx.appcompat.app.AppCompatActivity;\n    \n    //import com.bumptech.glide.Glide;\n    import com.google.android.gms.tasks.OnSuccessListener;\n    import com.google.firebase.database.DatabaseReference;\n    import com.google.firebase.database.FirebaseDatabase;\n    \n    import java.text.SimpleDateFormat;\n    \n    public class UpdateLaundry extends AppCompatActivity {\n    //deklarasi variable\n    private EditText namaBaru, tempatBaru;\n    private Spinner jenisBaru;\n    private RadioButton ktgBaru, new_Rb1, new_Rb2, new_Rb3;\n    private Button update;\n    private DatabaseReference database;\n    private RadioGroup rgkategoriBaru;\n    private String cekNama, cekTempat, cekJenis, cekKategori;\n\n    @SuppressLint(&quot;WrongViewCast&quot;)\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_updatelaundry);\n\n        namaBaru = findViewById(R.id.new_nama);\n        tempatBaru = findViewById(R.id.new_lokasi);\n        jenisBaru = findViewById(R.id.newspinner_jenis);\n        update = findViewById(R.id.btn_update);\n        new_Rb1 = findViewById(R.id.new_rb1);\n        new_Rb2 = findViewById(R.id.new_rb2);\n        new_Rb3 = findViewById(R.id.new_rb3);\n        rgkategoriBaru = findViewById(R.id.new_rg_ktg);\n\n        final String getKategori = getIntent().getExtras().getString(&quot;dataKategori&quot;);\n\n        if (getKategori.equals(&quot;Cuci&quot;)) {\n            new_Rb1.setChecked(true);\n        } else if (getKategori.equals(&quot;Setrika&quot;)) {\n            new_Rb2.setChecked(true);\n        } else if (getKategori.equals(&quot;Cuci dan Setrika&quot;)) {\n            new_Rb3.setChecked(true);\n        }\n\n        database= FirebaseDatabase.getInstance().getReference();\n        getData();\n\n\n        update.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n\n                int pilihKtgBaru = rgkategoriBaru.getCheckedRadioButtonId();\n                ktgBaru = findViewById(pilihKtgBaru);\n                cekNama = namaBaru.getText().toString();\n                cekTempat = tempatBaru.getText().toString();\n                cekJenis = jenisBaru.getSelectedItem().toString();\n\n\n//mengubah data databse menggunakan data yang baru di inputkan\n                if (isEmpty(cekNama) || isEmpty(cekTempat)) {\n                    Toast.makeText(UpdateLaundry.this, &quot;Data tidak boleh kosong&quot;, Toast.LENGTH_SHORT).show();\n                } else {\n                                    /*Processing Update Data\n                                    Reload setter recomended to get new data from user*/\n\n                    Laundry setLaundry = new Laundry();\n                    setLaundry.setNama(namaBaru.getText().toString());\n                    setLaundry.setJenis(jenisBaru.getSelectedItem().toString());\n                    setLaundry.setTempat(tempatBaru.getText().toString());\n                    setLaundry.setKategori(ktgBaru.getText().toString());\n                    updateLaundry(setLaundry);\n\n                }\n            }\n        });\n    }\n\n    private boolean isEmpty(String s){\n        return TextUtils.isEmpty(s);\n    }\n\n    //mengambil data dari database ke form update\n    private void getData() {\n\n        final String getNama = getIntent().getExtras().getString(&quot;dataNama&quot;);\n        final String getTempat = getIntent().getExtras().getString(&quot;dataTempat&quot;);\n        final String getKategori = getIntent().getExtras().getString(&quot;dataKategori&quot;);\n        final String getJenis = getIntent().getExtras().getString(&quot;dataJenis&quot;);\n\n\n        namaBaru.setText(getNama);\n        tempatBaru.setText(getTempat);\n\n\n    }\n    private void updateLaundry(Laundry ldry) {\n\n        String getKey = getIntent().getExtras().getString(&quot;getPrimaryKey&quot;);\n        database.child(&quot;Admin&quot;)\n                .child(&quot;Laundry&quot;)\n                .child(getKey)\n                .setValue(ldry)\n                .addOnSuccessListener(new OnSuccessListener&lt;Void&gt;() {\n                    @Override\n                    public void onSuccess(Void aVoid) {\n                        namaBaru.setText(&quot;&quot;);\n                        tempatBaru.setText(&quot;&quot;);\n\n                        Toast.makeText(UpdateLaundry.this, &quot;Data Berhasil diubah&quot;, Toast.LENGTH_SHORT).show();\n                        finish();\n                    }\n                });\n    }\n</code></pre>\n"},{"tags":["java","generics","overloading"],"comments":[{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":3,"creation_date":1671244142,"post_id":74831327,"comment_id":132064066,"body_markdown":"Why not make the methods be declared to use generic types?","body":"Why not make the methods be declared to use generic types?"}],"answers":[{"tags":[],"owner":{"account_id":18608321,"reputation":2964,"user_id":13561410,"display_name":"Oskar Grosser"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1671258909,"creation_date":1671258909,"answer_id":74832241,"question_id":74831327,"body_markdown":"At compilation, Java performs [Type Erasure][1]. During that process, your parameters become plain `ArrayList` types. As such, their erasure is the same, hence your error.\r\n\r\nIn my limited experience, solutions to avoid clashes could be to:\r\n1. Use different (e.g. custom) classes, or\r\n2. Change the method names.\r\n\r\n\r\n# 1. Use different classes\r\nYou can define custom classes that extend `HashMap`:\r\n```java\r\npublic class ArrayKeyHashMap&lt;K, V&gt; extends HashMap&lt;ArrayList&lt;K&gt;, V&gt; {\r\n  // Constructors ...\r\n}\r\npublic class StringKeyHashMap&lt;V&gt; extends HashMap&lt;String, V&gt; {\r\n  // Constructors ...\r\n}\r\n\r\npublic class Example {\r\n  public static void printMap(ArrayKeyHashMap&lt;String, ArrayList&lt;String&gt;&gt; thisMap) {\r\n    // ...\r\n  }\r\n  public static void printMap(StringKeyHashMap&lt;ArrayList&lt;String&gt;&gt; thisMap) {\r\n    // ...\r\n  }\r\n}\r\n```\r\n\r\nThis way, your method signatures will differ even after type erasure, since literally different classes are used.\r\n\r\n# 2. Change method names\r\nBy changing the method names you unfortunately do not overload the methods anymore, but you avoid the issue of having clashes after type erasure:\r\n```java\r\npublic class Example {\r\n  public static void printArrayArrayMap(HashMap&lt;ArrayList&lt;String&gt;, ArrayList&lt;String&gt;&gt; thisMap) {\r\n    // ...\r\n  }\r\n  public static void printStringArrayMap(HashMap&lt;String, ArrayList&lt;String&gt;&gt; thisMap) {\r\n    // ...\r\n  }\r\n}\r\n```\r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/java/generics/erasure.html","title":"Is it possible to overload a method that takes the same data structure but different data types?","body":"<p>At compilation, Java performs <a href=\"https://docs.oracle.com/javase/tutorial/java/generics/erasure.html\" rel=\"nofollow noreferrer\">Type Erasure</a>. During that process, your parameters become plain <code>ArrayList</code> types. As such, their erasure is the same, hence your error.</p>\n<p>In my limited experience, solutions to avoid clashes could be to:</p>\n<ol>\n<li>Use different (e.g. custom) classes, or</li>\n<li>Change the method names.</li>\n</ol>\n<h1>1. Use different classes</h1>\n<p>You can define custom classes that extend <code>HashMap</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class ArrayKeyHashMap&lt;K, V&gt; extends HashMap&lt;ArrayList&lt;K&gt;, V&gt; {\n  // Constructors ...\n}\npublic class StringKeyHashMap&lt;V&gt; extends HashMap&lt;String, V&gt; {\n  // Constructors ...\n}\n\npublic class Example {\n  public static void printMap(ArrayKeyHashMap&lt;String, ArrayList&lt;String&gt;&gt; thisMap) {\n    // ...\n  }\n  public static void printMap(StringKeyHashMap&lt;ArrayList&lt;String&gt;&gt; thisMap) {\n    // ...\n  }\n}\n</code></pre>\n<p>This way, your method signatures will differ even after type erasure, since literally different classes are used.</p>\n<h1>2. Change method names</h1>\n<p>By changing the method names you unfortunately do not overload the methods anymore, but you avoid the issue of having clashes after type erasure:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Example {\n  public static void printArrayArrayMap(HashMap&lt;ArrayList&lt;String&gt;, ArrayList&lt;String&gt;&gt; thisMap) {\n    // ...\n  }\n  public static void printStringArrayMap(HashMap&lt;String, ArrayList&lt;String&gt;&gt; thisMap) {\n    // ...\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":27277940,"reputation":11,"user_id":20798258,"display_name":"kid"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1671258909,"creation_date":1671242643,"question_id":74831327,"body_markdown":"Is it possible to overload a method that takes a particular data structure with different types? For example first a string array, then an int array?\r\n\r\nI have two hashmaps in my code and I am trying to print out their key, value pairs. The first hashmap takes string arraylists as both its key and value. The second one takes strings as keys and string arraylists as values:\r\n\r\n```\r\npublic static void printMap(HashMap&lt;ArrayList&lt;String&gt;, ArrayList&lt;String&gt;&gt; thisMap){\r\n    int i = 0;\r\n    for(ArrayList&lt;String&gt; key : thisMap.keySet()){\r\n        System.out.println(i + &quot; &quot; + key + &quot; &gt;&gt; &quot; + thisMap.get(key).toString());\r\n        System.out.println(&quot; &quot;);\r\n        i++;\r\n    }\r\n}\r\n\r\npublic static void printMap(HashMap&lt;String, ArrayList&lt;String&gt;&gt; thisMap){\r\n    int i = 0;\r\n    for(String key : thisMap.keySet()){\r\n        System.out.println(i + &quot; &quot; + key + &quot; &gt;&gt; &quot; + thisMap.get(key));\r\n        System.out.println(&quot; &quot;);\r\n        i++;\r\n    }\r\n}\r\n```\r\n\r\nI tried to overload a single method to print both maps but keep getting this error:\r\n\r\n```\r\njava: name clash: printMap(java.util.HashMap&lt;java.util.ArrayList&lt;java.lang.String&gt;,java.util.ArrayList&lt;java.lang.String&gt;&gt;) \r\nand printMap(java.util.HashMap&lt;java.lang.String,java.util.ArrayList&lt;java.lang.String&gt;&gt;) \r\nhave the same erasure.\r\n```\r\n\r\nwhat am I doing wrong?\r\n\r\n","title":"Is it possible to overload a method that takes the same data structure but different data types?","body":"<p>Is it possible to overload a method that takes a particular data structure with different types? For example first a string array, then an int array?</p>\n<p>I have two hashmaps in my code and I am trying to print out their key, value pairs. The first hashmap takes string arraylists as both its key and value. The second one takes strings as keys and string arraylists as values:</p>\n<pre><code>public static void printMap(HashMap&lt;ArrayList&lt;String&gt;, ArrayList&lt;String&gt;&gt; thisMap){\n    int i = 0;\n    for(ArrayList&lt;String&gt; key : thisMap.keySet()){\n        System.out.println(i + &quot; &quot; + key + &quot; &gt;&gt; &quot; + thisMap.get(key).toString());\n        System.out.println(&quot; &quot;);\n        i++;\n    }\n}\n\npublic static void printMap(HashMap&lt;String, ArrayList&lt;String&gt;&gt; thisMap){\n    int i = 0;\n    for(String key : thisMap.keySet()){\n        System.out.println(i + &quot; &quot; + key + &quot; &gt;&gt; &quot; + thisMap.get(key));\n        System.out.println(&quot; &quot;);\n        i++;\n    }\n}\n</code></pre>\n<p>I tried to overload a single method to print both maps but keep getting this error:</p>\n<pre><code>java: name clash: printMap(java.util.HashMap&lt;java.util.ArrayList&lt;java.lang.String&gt;,java.util.ArrayList&lt;java.lang.String&gt;&gt;) \nand printMap(java.util.HashMap&lt;java.lang.String,java.util.ArrayList&lt;java.lang.String&gt;&gt;) \nhave the same erasure.\n</code></pre>\n<p>what am I doing wrong?</p>\n"},{"tags":["java","json","serialization","gson"],"answers":[{"tags":[],"owner":{"account_id":27220217,"reputation":11,"user_id":20749626,"display_name":"h3y"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671255078,"creation_date":1671255078,"answer_id":74832000,"question_id":74831501,"body_markdown":"Your JSON file is not formatted properly to map correctly to your POJO&#39;s.\r\n\r\n```\r\npublic class Chunk {\r\nprivate final String worldName;\r\nprivate final int x;\r\nprivate final int z;\r\n```\r\n\r\nYour ```Chunk``` class has a String and two int values.\r\n\r\nThis is the ```Chunk``` object in your JSON file.\r\n\r\n```\r\n&quot;WorldName:world X:-3 Z:-64&quot;: \r\n```\r\n\r\nGson is looking for your ```Chunk``` POJO, but the entire line is just one String. You need to wrap quotation marks around each set of keys (and values if they are Strings), along with commas as separators. \r\n\r\n\r\n```\r\n&quot;WorldName&quot;:&quot;world&quot;, &quot;X&quot;:-3, &quot;Z&quot;:-64 \r\n```\r\nThese will have to be corrected throughout the rest of the JSON as well. ","title":"Json error when restoring saved objects from file","body":"<p>Your JSON file is not formatted properly to map correctly to your POJO's.</p>\n<pre><code>public class Chunk {\nprivate final String worldName;\nprivate final int x;\nprivate final int z;\n</code></pre>\n<p>Your <code>Chunk</code> class has a String and two int values.</p>\n<p>This is the <code>Chunk</code> object in your JSON file.</p>\n<pre><code>&quot;WorldName:world X:-3 Z:-64&quot;: \n</code></pre>\n<p>Gson is looking for your <code>Chunk</code> POJO, but the entire line is just one String. You need to wrap quotation marks around each set of keys (and values if they are Strings), along with commas as separators.</p>\n<pre><code>&quot;WorldName&quot;:&quot;world&quot;, &quot;X&quot;:-3, &quot;Z&quot;:-64 \n</code></pre>\n<p>These will have to be corrected throughout the rest of the JSON as well.</p>\n"}],"owner":{"account_id":26923532,"reputation":33,"user_id":20497135,"display_name":"HowDoISolveThis"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1671256936,"creation_date":1671245862,"question_id":74831501,"body_markdown":"I have a LinkedHashMap that contains two objects which both reside inside a normal HashMap. All 3 objects inside these maps have hashCode, equals, and toString methods. The &quot;Chunk&quot; object contains 3 variables a string and 2 integers all are final. The Location object only contains a string and 3 integers which are also final. Lastly, the ChestObject contains an enum and a list of other enums.\r\n\r\n```\r\npublic static Map&lt;Chunk, LinkedHashMap&lt;Location, ChestObject&gt;&gt; CHEST_MAP = new HashMap&lt;&gt;();\r\n\r\npublic class Location {\r\nprivate final String worldName;\r\nprivate final int x;\r\nprivate final int y;\r\nprivate final int z;\r\n\r\npublic class Chunk {\r\nprivate final String worldName;\r\nprivate final int x;\r\nprivate final int z;\r\n\r\npublic class ChestObject {\r\npublic List&lt;Material&gt; filteredMaterials = new ArrayList&lt;&gt;();\r\nprivate ChestType chestType;\r\n```\r\n\r\nSaving the map works perfectly but retrieving the info throws the following error.\r\n\r\n```\r\n[17:17:53 WARN]: com.google.gson.JsonSyntaxException: java.lang.IllegalStateException: Expected BEGIN_OBJECT but was STRING at line 2 column 4 [17:17:53 WARN]:        at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.read(ReflectiveTypeAdapterFactory.java:176) [17:17:53 WARN]:        at com.google.gson.internal.bind.TypeAdapterRuntimeTypeWrapper.read(TypeAdapterRuntimeTypeWrapper.java:40) [17:17:53 WARN]:        at com.google.gson.internal.bind.MapTypeAdapterFactory$Adapter.read(MapTypeAdapterFactory.java:186) [17:17:53 WARN]:        at com.google.gson.internal.bind.MapTypeAdapterFactory$Adapter.read(MapTypeAdapterFactory.java:145) [17:17:53 WARN]:        at com.google.gson.Gson.fromJson(Gson.java:803) [17:17:53 WARN]:        at com.google.gson.Gson.fromJson(Gson.java:768) [17:17:53 WARN]:  \r\nCaused by: java.lang.IllegalStateException: Expected BEGIN_OBJECT but was STRING at line 2 column 4 [17:17:53 WARN]:        at com.google.gson.stream.JsonReader.beginObject(JsonReader.java:374) [17:17:53 WARN]:        at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.read(ReflectiveTypeAdapterFactory.java:165) [17:17:53 WARN]:        ... 18 more\r\n```\r\n\r\nThe file it attempts to read is the following...\r\n\r\n```\r\n{\r\n  &quot;WorldName:world X:-3 Z:-64&quot;: {\r\n    &quot;WorldName:world X:-39 Y:63 Z:-1016&quot;: {\r\n      &quot;filteredMaterials&quot;: [\r\n        &quot;ROTTEN_FLESH&quot;\r\n      ],\r\n      &quot;chestType&quot;: &quot;DOUBLE&quot;\r\n    },\r\n    &quot;WorldName:world X:-40 Y:63 Z:-1016&quot;: {\r\n      &quot;filteredMaterials&quot;: [\r\n        &quot;ROTTEN_FLESH&quot;\r\n      ],\r\n      &quot;chestType&quot;: &quot;DOUBLE&quot;\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nThe last bit of useful info is my recovery method which at this moment just attempts to print the map instead of assigning it to CHEST_MAP.\r\n\r\n```\r\nprivate void recoverCollectionChests() {\r\n    final File file = new File(getDataFolder(), &quot;chests.json&quot;);\r\n\r\n    if(file.exists() &amp;&amp; file.length() &gt; 2) {\r\n        try {\r\n            final Gson gson = new GsonBuilder().setPrettyPrinting().create();\r\n            final Type type = new TypeToken&lt;Map&lt;Chunk, LinkedHashMap&lt;Location, ChestObject&gt;&gt;&gt;() {}.getType();\r\n            final Map&lt;Chunk, LinkedHashMap&lt;Location, ChestObject&gt;&gt; map = gson.fromJson(new FileReader(file), type);\r\n            System.out.println(&quot;Map: &quot; + map);\r\n        } catch (IllegalStateException | JsonSyntaxException | IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nSo what exactly is the problem here? I do have pretty printing enabled but I have done this many times without ever have any issues so what exactly is it complaining about here? I also confirmed that all objects are of the same / correct type.\r\n\r\n```\r\n private void saveChests() {\r\n        try {\r\n            if(!CHEST_MAP.isEmpty()) {\r\n                final File file = new File(this.getDataFolder(), &quot;chests.json&quot;);\r\n                final Gson gson = new GsonBuilder().setPrettyPrinting().create();\r\n                final Writer writer = new FileWriter(file);\r\n\r\n                gson.toJson(CHEST_MAP, writer);\r\n                writer.flush();\r\n                writer.close();\r\n            }\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n```","title":"Json error when restoring saved objects from file","body":"<p>I have a LinkedHashMap that contains two objects which both reside inside a normal HashMap. All 3 objects inside these maps have hashCode, equals, and toString methods. The &quot;Chunk&quot; object contains 3 variables a string and 2 integers all are final. The Location object only contains a string and 3 integers which are also final. Lastly, the ChestObject contains an enum and a list of other enums.</p>\n<pre><code>public static Map&lt;Chunk, LinkedHashMap&lt;Location, ChestObject&gt;&gt; CHEST_MAP = new HashMap&lt;&gt;();\n\npublic class Location {\nprivate final String worldName;\nprivate final int x;\nprivate final int y;\nprivate final int z;\n\npublic class Chunk {\nprivate final String worldName;\nprivate final int x;\nprivate final int z;\n\npublic class ChestObject {\npublic List&lt;Material&gt; filteredMaterials = new ArrayList&lt;&gt;();\nprivate ChestType chestType;\n</code></pre>\n<p>Saving the map works perfectly but retrieving the info throws the following error.</p>\n<pre><code>[17:17:53 WARN]: com.google.gson.JsonSyntaxException: java.lang.IllegalStateException: Expected BEGIN_OBJECT but was STRING at line 2 column 4 [17:17:53 WARN]:        at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.read(ReflectiveTypeAdapterFactory.java:176) [17:17:53 WARN]:        at com.google.gson.internal.bind.TypeAdapterRuntimeTypeWrapper.read(TypeAdapterRuntimeTypeWrapper.java:40) [17:17:53 WARN]:        at com.google.gson.internal.bind.MapTypeAdapterFactory$Adapter.read(MapTypeAdapterFactory.java:186) [17:17:53 WARN]:        at com.google.gson.internal.bind.MapTypeAdapterFactory$Adapter.read(MapTypeAdapterFactory.java:145) [17:17:53 WARN]:        at com.google.gson.Gson.fromJson(Gson.java:803) [17:17:53 WARN]:        at com.google.gson.Gson.fromJson(Gson.java:768) [17:17:53 WARN]:  \nCaused by: java.lang.IllegalStateException: Expected BEGIN_OBJECT but was STRING at line 2 column 4 [17:17:53 WARN]:        at com.google.gson.stream.JsonReader.beginObject(JsonReader.java:374) [17:17:53 WARN]:        at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.read(ReflectiveTypeAdapterFactory.java:165) [17:17:53 WARN]:        ... 18 more\n</code></pre>\n<p>The file it attempts to read is the following...</p>\n<pre><code>{\n  &quot;WorldName:world X:-3 Z:-64&quot;: {\n    &quot;WorldName:world X:-39 Y:63 Z:-1016&quot;: {\n      &quot;filteredMaterials&quot;: [\n        &quot;ROTTEN_FLESH&quot;\n      ],\n      &quot;chestType&quot;: &quot;DOUBLE&quot;\n    },\n    &quot;WorldName:world X:-40 Y:63 Z:-1016&quot;: {\n      &quot;filteredMaterials&quot;: [\n        &quot;ROTTEN_FLESH&quot;\n      ],\n      &quot;chestType&quot;: &quot;DOUBLE&quot;\n    }\n  }\n}\n</code></pre>\n<p>The last bit of useful info is my recovery method which at this moment just attempts to print the map instead of assigning it to CHEST_MAP.</p>\n<pre><code>private void recoverCollectionChests() {\n    final File file = new File(getDataFolder(), &quot;chests.json&quot;);\n\n    if(file.exists() &amp;&amp; file.length() &gt; 2) {\n        try {\n            final Gson gson = new GsonBuilder().setPrettyPrinting().create();\n            final Type type = new TypeToken&lt;Map&lt;Chunk, LinkedHashMap&lt;Location, ChestObject&gt;&gt;&gt;() {}.getType();\n            final Map&lt;Chunk, LinkedHashMap&lt;Location, ChestObject&gt;&gt; map = gson.fromJson(new FileReader(file), type);\n            System.out.println(&quot;Map: &quot; + map);\n        } catch (IllegalStateException | JsonSyntaxException | IOException e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n<p>So what exactly is the problem here? I do have pretty printing enabled but I have done this many times without ever have any issues so what exactly is it complaining about here? I also confirmed that all objects are of the same / correct type.</p>\n<pre><code> private void saveChests() {\n        try {\n            if(!CHEST_MAP.isEmpty()) {\n                final File file = new File(this.getDataFolder(), &quot;chests.json&quot;);\n                final Gson gson = new GsonBuilder().setPrettyPrinting().create();\n                final Writer writer = new FileWriter(file);\n\n                gson.toJson(CHEST_MAP, writer);\n                writer.flush();\n                writer.close();\n            }\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n</code></pre>\n"},{"tags":["java","json","spring","jackson","object-object-mapping"],"answers":[{"tags":[],"owner":{"account_id":429950,"reputation":1793,"user_id":813118,"accept_rate":82,"display_name":"Steve Eastwood"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1320052884,"creation_date":1320052884,"answer_id":7951770,"question_id":7854030,"body_markdown":"I found the solution now based on https://github.com/FasterXML/jackson-module-hibernate\r\n\r\nI extended the object mapper and added the attributes in the inherited constructor.\r\n\r\nThen the new object mapper is registered as a bean.\r\n\r\n\t&lt;!-- https://github.com/FasterXML/jackson-module-hibernate --&gt;\r\n    &lt;bean class=&quot;org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter&quot;&gt;\r\n        &lt;property name=&quot;messageConverters&quot;&gt;\r\n            &lt;array&gt;\r\n                &lt;bean id=&quot;jsonConverter&quot;\r\n                class=&quot;org.springframework.http.converter.json.MappingJacksonHttpMessageConverter&quot;&gt;\r\n                    &lt;property name=&quot;objectMapper&quot;&gt;\r\n                        &lt;bean class=&quot;de.company.backend.spring.PtxObjectMapper&quot;/&gt;\r\n                    &lt;/property&gt;\r\n                &lt;/bean&gt;\r\n            &lt;/array&gt;\r\n        &lt;/property&gt;\r\n    &lt;/bean&gt;   ","title":"Configuring ObjectMapper in Spring","body":"<p>I found the solution now based on <a href=\"https://github.com/FasterXML/jackson-module-hibernate\" rel=\"noreferrer\">https://github.com/FasterXML/jackson-module-hibernate</a></p>\n\n<p>I extended the object mapper and added the attributes in the inherited constructor.</p>\n\n<p>Then the new object mapper is registered as a bean.</p>\n\n<pre><code>&lt;!-- https://github.com/FasterXML/jackson-module-hibernate --&gt;\n&lt;bean class=\"org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter\"&gt;\n    &lt;property name=\"messageConverters\"&gt;\n        &lt;array&gt;\n            &lt;bean id=\"jsonConverter\"\n            class=\"org.springframework.http.converter.json.MappingJacksonHttpMessageConverter\"&gt;\n                &lt;property name=\"objectMapper\"&gt;\n                    &lt;bean class=\"de.company.backend.spring.PtxObjectMapper\"/&gt;\n                &lt;/property&gt;\n            &lt;/bean&gt;\n        &lt;/array&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;   \n</code></pre>\n"},{"tags":[],"owner":{"account_id":20832,"reputation":6065,"user_id":50131,"accept_rate":100,"display_name":"Andrew Newdigate"},"down_vote_count":0,"up_vote_count":27,"is_accepted":false,"score":27,"last_activity_date":1324568658,"creation_date":1324568658,"answer_id":8606225,"question_id":7854030,"body_markdown":"It may be because I&#39;m using Spring 3.1 (instead of Spring 3.0.5 as your question specified), but Steve Eastwood&#39;s answer didn&#39;t work for me. This solution works for Spring 3.1:\r\n\r\n**In your spring xml context:**\r\n\r\n   \t&lt;mvc:annotation-driven&gt;\r\n        &lt;mvc:message-converters&gt;\r\n            &lt;bean class=&quot;org.springframework.http.converter.StringHttpMessageConverter&quot;/&gt;\r\n            &lt;bean class=&quot;org.springframework.http.converter.ByteArrayHttpMessageConverter&quot;/&gt;\r\n            &lt;bean class=&quot;org.springframework.http.converter.json.MappingJacksonHttpMessageConverter&quot;&gt;\r\n                &lt;property name=&quot;objectMapper&quot; ref=&quot;jacksonObjectMapper&quot; /&gt;\r\n            &lt;/bean&gt;        \r\n        &lt;/mvc:message-converters&gt;\r\n    &lt;/mvc:annotation-driven&gt;\r\n\r\n    &lt;bean id=&quot;jacksonObjectMapper&quot; class=&quot;de.Company.backend.web.CompanyObjectMapper&quot; /&gt;\r\n   \r\n","title":"Configuring ObjectMapper in Spring","body":"<p>It may be because I'm using Spring 3.1 (instead of Spring 3.0.5 as your question specified), but Steve Eastwood's answer didn't work for me. This solution works for Spring 3.1:</p>\n\n<p><strong>In your spring xml context:</strong></p>\n\n<pre><code>&lt;mvc:annotation-driven&gt;\n    &lt;mvc:message-converters&gt;\n        &lt;bean class=\"org.springframework.http.converter.StringHttpMessageConverter\"/&gt;\n        &lt;bean class=\"org.springframework.http.converter.ByteArrayHttpMessageConverter\"/&gt;\n        &lt;bean class=\"org.springframework.http.converter.json.MappingJacksonHttpMessageConverter\"&gt;\n            &lt;property name=\"objectMapper\" ref=\"jacksonObjectMapper\" /&gt;\n        &lt;/bean&gt;        \n    &lt;/mvc:message-converters&gt;\n&lt;/mvc:annotation-driven&gt;\n\n&lt;bean id=\"jacksonObjectMapper\" class=\"de.Company.backend.web.CompanyObjectMapper\" /&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":263936,"reputation":20265,"user_id":549848,"accept_rate":74,"display_name":"Aram Kocharyan"},"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1348737099,"creation_date":1348737099,"answer_id":12617890,"question_id":7854030,"body_markdown":"I&#39;ve used this with Jackson **2.x** and Spring **3.1.2+**\r\n\r\n**servlet-context.xml:**\r\n\r\nNote that the root element is `&lt;beans:beans&gt;`, so you may need to remove `beans` and add `mvc` to some of these elements depending on your setup.\r\n\r\n    \t&lt;annotation-driven&gt;\r\n    \t\t&lt;message-converters&gt;\r\n    \t\t\t&lt;beans:bean\r\n    \t\t\t\tclass=&quot;org.springframework.http.converter.StringHttpMessageConverter&quot; /&gt;\r\n    \t\t\t&lt;beans:bean\r\n    \t\t\t\tclass=&quot;org.springframework.http.converter.ResourceHttpMessageConverter&quot; /&gt;\r\n    \t\t\t&lt;beans:bean\r\n    \t\t\t\tclass=&quot;org.springframework.http.converter.json.MappingJackson2HttpMessageConverter&quot;&gt;\r\n    \t\t\t\t&lt;beans:property name=&quot;objectMapper&quot; ref=&quot;jacksonObjectMapper&quot; /&gt;\r\n    \t\t\t&lt;/beans:bean&gt;\r\n    \t\t&lt;/message-converters&gt;\r\n    \t&lt;/annotation-driven&gt;\r\n    \r\n    \t&lt;beans:bean id=&quot;jacksonObjectMapper&quot;\r\n    \t\tclass=&quot;au.edu.unimelb.atcom.transfer.json.mappers.JSONMapper&quot; /&gt;\r\n\r\n**au.edu.unimelb.atcom.transfer.json.mappers.JSONMapper.java:**\r\n\r\n    public class JSONMapper extends ObjectMapper {\r\n    \r\n    \tpublic JSONMapper() {\r\n    \t\tSimpleModule module = new SimpleModule(&quot;JSONModule&quot;, new Version(2, 0, 0, null, null, null));\r\n    \t\tmodule.addSerializer(Date.class, new DateSerializer());\r\n    \t\tmodule.addDeserializer(Date.class, new DateDeserializer());\r\n    \t\t// Add more here ...\r\n    \t\tregisterModule(module);\r\n    \t}\r\n    \r\n    }\r\n\r\n**DateSerializer.java:**\r\n\r\n    public class DateSerializer extends StdSerializer&lt;Date&gt; {\r\n    \r\n    \tpublic DateSerializer() {\r\n    \t\tsuper(Date.class);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void serialize(Date date, JsonGenerator json,\r\n    \t\t\tSerializerProvider provider) throws IOException,\r\n    \t\t\tJsonGenerationException {\r\n    \t\t// The client side will handle presentation, we just want it accurate\r\n    \t\tDateFormat df = StdDateFormat.getBlueprintISO8601Format();\r\n    \t\tString out = df.format(date);\r\n    \t\tjson.writeString(out);\r\n    \t}\r\n    \r\n    }\r\n\r\n**DateDeserializer.java:**\r\n\r\n    public class DateDeserializer extends StdDeserializer&lt;Date&gt; {\r\n    \r\n    \tpublic DateDeserializer() {\r\n    \t\tsuper(Date.class);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic Date deserialize(JsonParser json, DeserializationContext context)\r\n    \t\t\tthrows IOException, JsonProcessingException {\r\n    \t\ttry {\r\n    \t\t\tDateFormat df = StdDateFormat.getBlueprintISO8601Format();\r\n    \t\t\treturn df.parse(json.getText());\r\n    \t\t} catch (ParseException e) {\r\n    \t\t\treturn null;\r\n    \t\t}\r\n    \t}\r\n    \r\n    }\r\n\r\n","title":"Configuring ObjectMapper in Spring","body":"<p>I've used this with Jackson <strong>2.x</strong> and Spring <strong>3.1.2+</strong></p>\n\n<p><strong>servlet-context.xml:</strong></p>\n\n<p>Note that the root element is <code>&lt;beans:beans&gt;</code>, so you may need to remove <code>beans</code> and add <code>mvc</code> to some of these elements depending on your setup.</p>\n\n<pre><code>    &lt;annotation-driven&gt;\n        &lt;message-converters&gt;\n            &lt;beans:bean\n                class=\"org.springframework.http.converter.StringHttpMessageConverter\" /&gt;\n            &lt;beans:bean\n                class=\"org.springframework.http.converter.ResourceHttpMessageConverter\" /&gt;\n            &lt;beans:bean\n                class=\"org.springframework.http.converter.json.MappingJackson2HttpMessageConverter\"&gt;\n                &lt;beans:property name=\"objectMapper\" ref=\"jacksonObjectMapper\" /&gt;\n            &lt;/beans:bean&gt;\n        &lt;/message-converters&gt;\n    &lt;/annotation-driven&gt;\n\n    &lt;beans:bean id=\"jacksonObjectMapper\"\n        class=\"au.edu.unimelb.atcom.transfer.json.mappers.JSONMapper\" /&gt;\n</code></pre>\n\n<p><strong>au.edu.unimelb.atcom.transfer.json.mappers.JSONMapper.java:</strong></p>\n\n<pre><code>public class JSONMapper extends ObjectMapper {\n\n    public JSONMapper() {\n        SimpleModule module = new SimpleModule(\"JSONModule\", new Version(2, 0, 0, null, null, null));\n        module.addSerializer(Date.class, new DateSerializer());\n        module.addDeserializer(Date.class, new DateDeserializer());\n        // Add more here ...\n        registerModule(module);\n    }\n\n}\n</code></pre>\n\n<p><strong>DateSerializer.java:</strong></p>\n\n<pre><code>public class DateSerializer extends StdSerializer&lt;Date&gt; {\n\n    public DateSerializer() {\n        super(Date.class);\n    }\n\n    @Override\n    public void serialize(Date date, JsonGenerator json,\n            SerializerProvider provider) throws IOException,\n            JsonGenerationException {\n        // The client side will handle presentation, we just want it accurate\n        DateFormat df = StdDateFormat.getBlueprintISO8601Format();\n        String out = df.format(date);\n        json.writeString(out);\n    }\n\n}\n</code></pre>\n\n<p><strong>DateDeserializer.java:</strong></p>\n\n<pre><code>public class DateDeserializer extends StdDeserializer&lt;Date&gt; {\n\n    public DateDeserializer() {\n        super(Date.class);\n    }\n\n    @Override\n    public Date deserialize(JsonParser json, DeserializationContext context)\n            throws IOException, JsonProcessingException {\n        try {\n            DateFormat df = StdDateFormat.getBlueprintISO8601Format();\n            return df.parse(json.getText());\n        } catch (ParseException e) {\n            return null;\n        }\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2004750,"reputation":8566,"user_id":1795426,"display_name":"user11153"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1392204279,"creation_date":1392204279,"answer_id":21726601,"question_id":7854030,"body_markdown":"If you want to add custom ObjectMapper for registering custom serializers, try my answer.\r\n\r\nIn my case (Spring 3.2.4 and Jackson 2.3.1), XML configuration for custom serializer:\r\n\r\n&lt;!-- language: lang-xml--&gt;\r\n\r\n\t&lt;mvc:annotation-driven&gt;\r\n\t\t&lt;mvc:message-converters register-defaults=&quot;false&quot;&gt;\r\n\t\t\t&lt;bean class=&quot;org.springframework.http.converter.json.MappingJackson2HttpMessageConverter&quot;&gt;\r\n\t\t\t\t&lt;property name=&quot;objectMapper&quot;&gt;\r\n\t\t\t\t\t&lt;bean class=&quot;org.springframework.http.converter.json.Jackson2ObjectMapperFactoryBean&quot;&gt;\r\n\t\t\t\t\t\t&lt;property name=&quot;serializers&quot;&gt;\r\n\t\t\t\t\t\t\t&lt;array&gt;\r\n\t\t\t\t\t\t\t\t&lt;bean class=&quot;com.example.business.serializer.json.CustomObjectSerializer&quot;/&gt;\r\n\t\t\t\t\t\t\t&lt;/array&gt;\r\n\t\t\t\t\t\t&lt;/property&gt;\r\n\t\t\t\t\t&lt;/bean&gt;\r\n\t\t\t\t&lt;/property&gt;\r\n\t\t\t&lt;/bean&gt;\r\n\t\t&lt;/mvc:message-converters&gt;\r\n\t&lt;/mvc:annotation-driven&gt;\r\n\r\nwas in unexplained way overwritten back to default by something.\r\n\r\nThis worked for me:\r\n\r\nCustomObject.java\r\n---\r\n&lt;!-- language: lang-java--&gt;\r\n\r\n\t@JsonSerialize(using = CustomObjectSerializer.class)\r\n\tpublic class CustomObject {\r\n\r\n\t\tprivate Long value;\r\n\r\n\t\tpublic Long getValue() {\r\n\t\t\treturn value;\r\n\t\t}\r\n\r\n\t\tpublic void setValue(Long value) {\r\n\t\t\tthis.value = value;\r\n\t\t}\r\n\t}\r\n\r\nCustomObjectSerializer.java\r\n---\r\n&lt;!-- language: lang-java--&gt;\r\n\r\n\tpublic class CustomObjectSerializer extends JsonSerializer&lt;CustomObject&gt; {\r\n\r\n\t\t@Override\r\n\t\tpublic void serialize(CustomObject value, JsonGenerator jgen,\r\n\t\t\tSerializerProvider provider) throws IOException,JsonProcessingException {\r\n\t\t\tjgen.writeStartObject();\r\n\t\t\tjgen.writeNumberField(&quot;y&quot;, value.getValue());\r\n\t\t\tjgen.writeEndObject();\r\n\t\t}\r\n\r\n\t\t@Override\r\n\t\tpublic Class&lt;CustomObject&gt; handledType() {\r\n\t\t\treturn CustomObject.class;\r\n\t\t}\r\n\t}\r\n\r\nNo XML configuration (`&lt;mvc:message-converters&gt;(...)&lt;/mvc:message-converters&gt;`) is needed in my solution.","title":"Configuring ObjectMapper in Spring","body":"<p>If you want to add custom ObjectMapper for registering custom serializers, try my answer.</p>\n\n<p>In my case (Spring 3.2.4 and Jackson 2.3.1), XML configuration for custom serializer:</p>\n\n\n\n<pre><code>&lt;mvc:annotation-driven&gt;\n    &lt;mvc:message-converters register-defaults=\"false\"&gt;\n        &lt;bean class=\"org.springframework.http.converter.json.MappingJackson2HttpMessageConverter\"&gt;\n            &lt;property name=\"objectMapper\"&gt;\n                &lt;bean class=\"org.springframework.http.converter.json.Jackson2ObjectMapperFactoryBean\"&gt;\n                    &lt;property name=\"serializers\"&gt;\n                        &lt;array&gt;\n                            &lt;bean class=\"com.example.business.serializer.json.CustomObjectSerializer\"/&gt;\n                        &lt;/array&gt;\n                    &lt;/property&gt;\n                &lt;/bean&gt;\n            &lt;/property&gt;\n        &lt;/bean&gt;\n    &lt;/mvc:message-converters&gt;\n&lt;/mvc:annotation-driven&gt;\n</code></pre>\n\n<p>was in unexplained way overwritten back to default by something.</p>\n\n<p>This worked for me:</p>\n\n<h2>CustomObject.java</h2>\n\n\n\n<pre><code>@JsonSerialize(using = CustomObjectSerializer.class)\npublic class CustomObject {\n\n    private Long value;\n\n    public Long getValue() {\n        return value;\n    }\n\n    public void setValue(Long value) {\n        this.value = value;\n    }\n}\n</code></pre>\n\n<h2>CustomObjectSerializer.java</h2>\n\n\n\n<pre><code>public class CustomObjectSerializer extends JsonSerializer&lt;CustomObject&gt; {\n\n    @Override\n    public void serialize(CustomObject value, JsonGenerator jgen,\n        SerializerProvider provider) throws IOException,JsonProcessingException {\n        jgen.writeStartObject();\n        jgen.writeNumberField(\"y\", value.getValue());\n        jgen.writeEndObject();\n    }\n\n    @Override\n    public Class&lt;CustomObject&gt; handledType() {\n        return CustomObject.class;\n    }\n}\n</code></pre>\n\n<p>No XML configuration (<code>&lt;mvc:message-converters&gt;(...)&lt;/mvc:message-converters&gt;</code>) is needed in my solution.</p>\n"},{"tags":[],"owner":{"account_id":1116458,"reputation":1088,"user_id":1105677,"accept_rate":0,"display_name":"Carlos AG"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1395141870,"creation_date":1395141870,"answer_id":22477901,"question_id":7854030,"body_markdown":"I am using Spring 3.2.4 and Jackson FasterXML 2.1.1.\r\n\r\nI have created a **custom JacksonObjectMapper** that works with explicit annotations for each attribute of the Objects mapped:\r\n\r\n\r\n    package com.test;\r\n    import com.fasterxml.jackson.annotation.JsonAutoDetect;\r\n    import com.fasterxml.jackson.annotation.PropertyAccessor;\r\n    import com.fasterxml.jackson.databind.ObjectMapper;\r\n    import com.fasterxml.jackson.databind.SerializationFeature;\r\n    \r\n    public class MyJaxbJacksonObjectMapper extends ObjectMapper {\r\n    \r\n    public MyJaxbJacksonObjectMapper() {\r\n\r\n        this.setVisibility(PropertyAccessor.FIELD, JsonAutoDetect.Visibility.ANY)\r\n\t\t\t\t.setVisibility(PropertyAccessor.CREATOR, JsonAutoDetect.Visibility.ANY)\r\n\t\t\t\t.setVisibility(PropertyAccessor.SETTER, JsonAutoDetect.Visibility.NONE)\r\n\t\t\t\t.setVisibility(PropertyAccessor.GETTER, JsonAutoDetect.Visibility.NONE)\r\n\t\t\t\t.setVisibility(PropertyAccessor.IS_GETTER, JsonAutoDetect.Visibility.NONE);\r\n\r\n        this.configure(SerializationFeature.FAIL_ON_EMPTY_BEANS, false);\r\n        }\r\n    }\r\n\r\n\r\nThen this is instantiated in the context-configuration (**servlet-context.xml**):\r\n\r\n    &lt;mvc:annotation-driven&gt;\r\n        &lt;mvc:message-converters&gt;\r\n    \r\n            &lt;beans:bean class=&quot;org.springframework.http.converter.json.MappingJackson2HttpMessageConverter&quot;&gt;\r\n                &lt;beans:property name=&quot;objectMapper&quot;&gt;\r\n                    &lt;beans:bean class=&quot;com.test.MyJaxbJacksonObjectMapper&quot; /&gt;\r\n                &lt;/beans:property&gt;\r\n            &lt;/beans:bean&gt;\r\n\r\n        &lt;/mvc:message-converters&gt;\r\n    &lt;/mvc:annotation-driven&gt;\r\n\r\n\r\nThis works fine!\r\n","title":"Configuring ObjectMapper in Spring","body":"<p>I am using Spring 3.2.4 and Jackson FasterXML 2.1.1.</p>\n\n<p>I have created a <strong>custom JacksonObjectMapper</strong> that works with explicit annotations for each attribute of the Objects mapped:</p>\n\n<pre><code>package com.test;\nimport com.fasterxml.jackson.annotation.JsonAutoDetect;\nimport com.fasterxml.jackson.annotation.PropertyAccessor;\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport com.fasterxml.jackson.databind.SerializationFeature;\n\npublic class MyJaxbJacksonObjectMapper extends ObjectMapper {\n\npublic MyJaxbJacksonObjectMapper() {\n\n    this.setVisibility(PropertyAccessor.FIELD, JsonAutoDetect.Visibility.ANY)\n            .setVisibility(PropertyAccessor.CREATOR, JsonAutoDetect.Visibility.ANY)\n            .setVisibility(PropertyAccessor.SETTER, JsonAutoDetect.Visibility.NONE)\n            .setVisibility(PropertyAccessor.GETTER, JsonAutoDetect.Visibility.NONE)\n            .setVisibility(PropertyAccessor.IS_GETTER, JsonAutoDetect.Visibility.NONE);\n\n    this.configure(SerializationFeature.FAIL_ON_EMPTY_BEANS, false);\n    }\n}\n</code></pre>\n\n<p>Then this is instantiated in the context-configuration (<strong>servlet-context.xml</strong>):</p>\n\n<pre><code>&lt;mvc:annotation-driven&gt;\n    &lt;mvc:message-converters&gt;\n\n        &lt;beans:bean class=\"org.springframework.http.converter.json.MappingJackson2HttpMessageConverter\"&gt;\n            &lt;beans:property name=\"objectMapper\"&gt;\n                &lt;beans:bean class=\"com.test.MyJaxbJacksonObjectMapper\" /&gt;\n            &lt;/beans:property&gt;\n        &lt;/beans:bean&gt;\n\n    &lt;/mvc:message-converters&gt;\n&lt;/mvc:annotation-driven&gt;\n</code></pre>\n\n<p>This works fine!</p>\n"},{"tags":[],"owner":{"account_id":5765593,"reputation":1664,"user_id":4550654,"display_name":"Alex"},"down_vote_count":1,"up_vote_count":161,"is_accepted":true,"score":160,"last_activity_date":1443526763,"creation_date":1443526763,"answer_id":32842962,"question_id":7854030,"body_markdown":"Using Spring Boot (1.2.4) and Jackson (2.4.6) the following annotation based configuration worked for me.\r\n\r\n    @Configuration\r\n    public class JacksonConfiguration {\r\n\r\n        @Bean\r\n        public ObjectMapper objectMapper() {\r\n            ObjectMapper mapper = new ObjectMapper();\r\n            mapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);\r\n            mapper.configure(MapperFeature.DEFAULT_VIEW_INCLUSION, true);\r\n\r\n            return mapper;\r\n        }\r\n    }","title":"Configuring ObjectMapper in Spring","body":"<p>Using Spring Boot (1.2.4) and Jackson (2.4.6) the following annotation based configuration worked for me.</p>\n\n<pre><code>@Configuration\npublic class JacksonConfiguration {\n\n    @Bean\n    public ObjectMapper objectMapper() {\n        ObjectMapper mapper = new ObjectMapper();\n        mapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);\n        mapper.configure(MapperFeature.DEFAULT_VIEW_INCLUSION, true);\n\n        return mapper;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7693974,"reputation":141,"user_id":5829185,"display_name":"jecyhw"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1463048588,"creation_date":1463048588,"answer_id":37184105,"question_id":7854030,"body_markdown":"I am using Spring 4.1.6 and Jackson FasterXML 2.1.4.\r\n\r\n        &lt;mvc:annotation-driven&gt;\r\n            &lt;mvc:message-converters&gt;\r\n                &lt;bean class=&quot;org.springframework.http.converter.json.MappingJackson2HttpMessageConverter&quot;&gt;\r\n                    &lt;property name=&quot;objectMapper&quot;&gt;\r\n                        &lt;bean class=&quot;com.fasterxml.jackson.databind.ObjectMapper&quot;&gt;\r\n                            &lt;!-- 设置不输出null字段--&gt;\r\n                            &lt;property name=&quot;serializationInclusion&quot; value=&quot;NON_NULL&quot;/&gt;\r\n                        &lt;/bean&gt;\r\n                    &lt;/property&gt;\r\n                &lt;/bean&gt;\r\n            &lt;/mvc:message-converters&gt;\r\n        &lt;/mvc:annotation-driven&gt;\r\n\r\nthis works at my applicationContext.xml configration","title":"Configuring ObjectMapper in Spring","body":"<p>I am using Spring 4.1.6 and Jackson FasterXML 2.1.4.</p>\n\n<pre><code>    &lt;mvc:annotation-driven&gt;\n        &lt;mvc:message-converters&gt;\n            &lt;bean class=\"org.springframework.http.converter.json.MappingJackson2HttpMessageConverter\"&gt;\n                &lt;property name=\"objectMapper\"&gt;\n                    &lt;bean class=\"com.fasterxml.jackson.databind.ObjectMapper\"&gt;\n                        &lt;!-- 设置不输出null字段--&gt;\n                        &lt;property name=\"serializationInclusion\" value=\"NON_NULL\"/&gt;\n                    &lt;/bean&gt;\n                &lt;/property&gt;\n            &lt;/bean&gt;\n        &lt;/mvc:message-converters&gt;\n    &lt;/mvc:annotation-driven&gt;\n</code></pre>\n\n<p>this works at my applicationContext.xml configration</p>\n"},{"tags":[],"owner":{"account_id":57788,"reputation":46110,"user_id":173149,"accept_rate":62,"display_name":"gavenkoa"},"down_vote_count":0,"up_vote_count":23,"is_accepted":false,"score":23,"last_activity_date":1491315997,"creation_date":1489390390,"answer_id":42758436,"question_id":7854030,"body_markdown":"There is `org.springframework.http.converter.json.Jackson2ObjectMapperFactoryBean` for a long time. Starting from 1.2 release of Spring Boot there is `org.springframework.http.converter.json.Jackson2ObjectMapperBuilder` for Java Config.\r\n\r\nIn String Boot configuration can be as simple as:\r\n\r\n    spring.jackson.deserialization.&lt;feature_name&gt;=true|false\r\n    spring.jackson.generator.&lt;feature_name&gt;=true|false\r\n    spring.jackson.mapper.&lt;feature_name&gt;=true|false\r\n    spring.jackson.parser.&lt;feature_name&gt;=true|false\r\n    spring.jackson.serialization.&lt;feature_name&gt;=true|false\r\n    spring.jackson.default-property-inclusion=always|non_null|non_absent|non_default|non_empty\r\n\r\nin `classpath:application.properties` or some Java code in `@Configuration` class:\r\n\r\n    @Bean\r\n    public Jackson2ObjectMapperBuilder jacksonBuilder() {\r\n        Jackson2ObjectMapperBuilder builder = new Jackson2ObjectMapperBuilder();\r\n        builder.indentOutput(true).dateFormat(new SimpleDateFormat(&quot;yyyy-MM-dd&quot;));\r\n        return builder;\r\n    }\r\n\r\nSee:\r\n\r\n* Official docs [74.3 Customize the Jackson ObjectMapper](http://docs.spring.io/spring-boot/docs/current/reference/html/howto-spring-mvc.html#howto-customize-the-jackson-objectmapper)\r\n* https://dzone.com/articles/latest-jackson-integration\r\n* https://stackoverflow.com/questions/14343477/how-do-you-globally-set-jackson-to-ignore-unknown-properties-within-spring\r\n* http://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/converter/json/Jackson2ObjectMapperFactoryBean.html\r\n","title":"Configuring ObjectMapper in Spring","body":"<p>There is <code>org.springframework.http.converter.json.Jackson2ObjectMapperFactoryBean</code> for a long time. Starting from 1.2 release of Spring Boot there is <code>org.springframework.http.converter.json.Jackson2ObjectMapperBuilder</code> for Java Config.</p>\n\n<p>In String Boot configuration can be as simple as:</p>\n\n<pre><code>spring.jackson.deserialization.&lt;feature_name&gt;=true|false\nspring.jackson.generator.&lt;feature_name&gt;=true|false\nspring.jackson.mapper.&lt;feature_name&gt;=true|false\nspring.jackson.parser.&lt;feature_name&gt;=true|false\nspring.jackson.serialization.&lt;feature_name&gt;=true|false\nspring.jackson.default-property-inclusion=always|non_null|non_absent|non_default|non_empty\n</code></pre>\n\n<p>in <code>classpath:application.properties</code> or some Java code in <code>@Configuration</code> class:</p>\n\n<pre><code>@Bean\npublic Jackson2ObjectMapperBuilder jacksonBuilder() {\n    Jackson2ObjectMapperBuilder builder = new Jackson2ObjectMapperBuilder();\n    builder.indentOutput(true).dateFormat(new SimpleDateFormat(\"yyyy-MM-dd\"));\n    return builder;\n}\n</code></pre>\n\n<p>See:</p>\n\n<ul>\n<li>Official docs <a href=\"http://docs.spring.io/spring-boot/docs/current/reference/html/howto-spring-mvc.html#howto-customize-the-jackson-objectmapper\" rel=\"noreferrer\">74.3 Customize the Jackson ObjectMapper</a></li>\n<li><a href=\"https://dzone.com/articles/latest-jackson-integration\" rel=\"noreferrer\">https://dzone.com/articles/latest-jackson-integration</a></li>\n<li><a href=\"https://stackoverflow.com/questions/14343477/how-do-you-globally-set-jackson-to-ignore-unknown-properties-within-spring\">How do you globally set Jackson to ignore unknown properties within Spring?</a></li>\n<li><a href=\"http://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/converter/json/Jackson2ObjectMapperFactoryBean.html\" rel=\"noreferrer\">http://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/converter/json/Jackson2ObjectMapperFactoryBean.html</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":1677099,"reputation":10905,"user_id":1542363,"accept_rate":92,"display_name":"Sam YC"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1508395270,"creation_date":1508395270,"answer_id":46824039,"question_id":7854030,"body_markdown":"Above Spring 4, there is no need to configure `MappingJacksonHttpMessageConverter` if you only intend to configure `ObjectMapper`.\r\n\r\n(configure `MappingJacksonHttpMessageConverter` will cause you to lose other MessageConverter)\r\n\r\nYou just need to do:\r\n\r\n    public class MyObjectMapper extends ObjectMapper {\r\n    \r\n    \tprivate static final long serialVersionUID = 4219938065516862637L;\r\n    \r\n    \tpublic MyObjectMapper() {\r\n    \t\tsuper();\r\n    \t\tenable(SerializationFeature.INDENT_OUTPUT);\r\n    \t}\t\t\r\n    }\r\n\r\nAnd in your Spring configuration, create this bean:\r\n\r\n    @Bean \r\n    public MyObjectMapper myObjectMapper() {    \t\r\n        return new MyObjectMapper();\r\n    }","title":"Configuring ObjectMapper in Spring","body":"<p>Above Spring 4, there is no need to configure <code>MappingJacksonHttpMessageConverter</code> if you only intend to configure <code>ObjectMapper</code>.</p>\n\n<p>(configure <code>MappingJacksonHttpMessageConverter</code> will cause you to lose other MessageConverter)</p>\n\n<p>You just need to do:</p>\n\n<pre><code>public class MyObjectMapper extends ObjectMapper {\n\n    private static final long serialVersionUID = 4219938065516862637L;\n\n    public MyObjectMapper() {\n        super();\n        enable(SerializationFeature.INDENT_OUTPUT);\n    }       \n}\n</code></pre>\n\n<p>And in your Spring configuration, create this bean:</p>\n\n<pre><code>@Bean \npublic MyObjectMapper myObjectMapper() {        \n    return new MyObjectMapper();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":474122,"reputation":1627,"user_id":883603,"accept_rate":75,"display_name":"Dormouse"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1521654118,"creation_date":1521629837,"answer_id":49404496,"question_id":7854030,"body_markdown":"To configure a message converter in plain spring-web, in this case to enable the Java 8 JSR-310 JavaTimeModule, you first need to implement `WebMvcConfigurer` in your `@Configuration` class and then override the `configureMessageConverters` method:\r\n\r\n    @Override\r\n    public void configureMessageConverters(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters) {\r\n        ObjectMapper objectMapper = Jackson2ObjectMapperBuilder.json().modules(new JavaTimeModule(), new Jdk8Module()).build()\r\n                .configure(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS, false);\r\n        converters.add(new MappingJackson2HttpMessageConverter(objectMapper));\r\n    }\r\nLike this you can register any custom defined `ObjectMapper` in a Java-based Spring configuration.","title":"Configuring ObjectMapper in Spring","body":"<p>To configure a message converter in plain spring-web, in this case to enable the Java 8 JSR-310 JavaTimeModule, you first need to implement <code>WebMvcConfigurer</code> in your <code>@Configuration</code> class and then override the <code>configureMessageConverters</code> method:</p>\n\n<pre><code>@Override\npublic void configureMessageConverters(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters) {\n    ObjectMapper objectMapper = Jackson2ObjectMapperBuilder.json().modules(new JavaTimeModule(), new Jdk8Module()).build()\n            .configure(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS, false);\n    converters.add(new MappingJackson2HttpMessageConverter(objectMapper));\n}\n</code></pre>\n\n<p>Like this you can register any custom defined <code>ObjectMapper</code> in a Java-based Spring configuration.</p>\n"},{"tags":[],"owner":{"account_id":5954045,"reputation":3379,"user_id":4681265,"display_name":"Adrian"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1640179750,"creation_date":1556824761,"answer_id":55958912,"question_id":7854030,"body_markdown":"**SOLUTION 1**  \r\n\r\nFirst (tested) working solution useful especially when using `@EnableWebMvc`:  \r\n\r\n    @Configuration\r\n    @EnableWebMvc\r\n    public class WebConfig implements WebMvcConfigurer {\r\n    \t@Autowired\r\n    \tprivate ObjectMapper objectMapper;// created elsewhere\r\n    \t@Override\r\n    \tpublic void extendMessageConverters(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters) {\r\n    \t\t// this won&#39;t add a 2nd MappingJackson2HttpMessageConverter \r\n    \t\t// as the SOLUTION 2 is doing but also might seem complicated\r\n    \t\tconverters.stream().filter(c -&gt; c instanceof MappingJackson2HttpMessageConverter).forEach(c -&gt; {\r\n    \t\t\t// check default included objectMapper._registeredModuleTypes,\r\n    \t\t\t// e.g. Jdk8Module, JavaTimeModule when creating the ObjectMapper\r\n    \t\t\t// without Jackson2ObjectMapperBuilder\r\n    \t\t\t((MappingJackson2HttpMessageConverter) c).setObjectMapper(this.objectMapper);\r\n    \t\t});\r\n    \t}\r\n\r\n**SOLUTION 2**  \r\n\r\nOf course the common approach below works too (also working with `@EnableWebMvc`):\r\n\r\n    @Configuration\r\n    @EnableWebMvc\r\n    public class WebConfig implements WebMvcConfigurer {\r\n    \t@Autowired\r\n    \tprivate ObjectMapper objectMapper;// created elsewhere\r\n        @Override\r\n        public void extendMessageConverters(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters) {\r\n        \t// this will add a 2nd MappingJackson2HttpMessageConverter \r\n        \t// (additional to the default one) but will work and you \r\n        \t// won&#39;t lose the default converters as you&#39;ll do when overwriting\r\n         \t// configureMessageConverters(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters)\r\n            // \r\n            // you still have to check default included\r\n            // objectMapper._registeredModuleTypes, e.g.\r\n            // Jdk8Module, JavaTimeModule when creating the ObjectMapper\r\n            // without Jackson2ObjectMapperBuilder\r\n        \tconverters.add(new MappingJackson2HttpMessageConverter(this.objectMapper));\r\n        }\r\n\r\n*Why @EnableWebMvc usage is a problem?*\r\n\r\n`@EnableWebMvc` is using `DelegatingWebMvcConfiguration` which extends `WebMvcConfigurationSupport` which does this:  \r\n\r\n\tif (jackson2Present) {\r\n\t\tJackson2ObjectMapperBuilder builder = Jackson2ObjectMapperBuilder.json();\r\n\t\tif (this.applicationContext != null) {\r\n\t\t\tbuilder.applicationContext(this.applicationContext);\r\n\t\t}\r\n\t\tmessageConverters.add(new MappingJackson2HttpMessageConverter(builder.build()));\r\n\t}\r\nwhich means that there&#39;s no way of injecting your own `ObjectMapper` with the purpose of preparing it to be used for creating the default `MappingJackson2HttpMessageConverter` when using `@EnableWebMvc`.\r\n\r\n","title":"Configuring ObjectMapper in Spring","body":"<p><strong>SOLUTION 1</strong></p>\n<p>First (tested) working solution useful especially when using <code>@EnableWebMvc</code>:</p>\n<pre><code>@Configuration\n@EnableWebMvc\npublic class WebConfig implements WebMvcConfigurer {\n    @Autowired\n    private ObjectMapper objectMapper;// created elsewhere\n    @Override\n    public void extendMessageConverters(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters) {\n        // this won't add a 2nd MappingJackson2HttpMessageConverter \n        // as the SOLUTION 2 is doing but also might seem complicated\n        converters.stream().filter(c -&gt; c instanceof MappingJackson2HttpMessageConverter).forEach(c -&gt; {\n            // check default included objectMapper._registeredModuleTypes,\n            // e.g. Jdk8Module, JavaTimeModule when creating the ObjectMapper\n            // without Jackson2ObjectMapperBuilder\n            ((MappingJackson2HttpMessageConverter) c).setObjectMapper(this.objectMapper);\n        });\n    }\n</code></pre>\n<p><strong>SOLUTION 2</strong></p>\n<p>Of course the common approach below works too (also working with <code>@EnableWebMvc</code>):</p>\n<pre><code>@Configuration\n@EnableWebMvc\npublic class WebConfig implements WebMvcConfigurer {\n    @Autowired\n    private ObjectMapper objectMapper;// created elsewhere\n    @Override\n    public void extendMessageConverters(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters) {\n        // this will add a 2nd MappingJackson2HttpMessageConverter \n        // (additional to the default one) but will work and you \n        // won't lose the default converters as you'll do when overwriting\n        // configureMessageConverters(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters)\n        // \n        // you still have to check default included\n        // objectMapper._registeredModuleTypes, e.g.\n        // Jdk8Module, JavaTimeModule when creating the ObjectMapper\n        // without Jackson2ObjectMapperBuilder\n        converters.add(new MappingJackson2HttpMessageConverter(this.objectMapper));\n    }\n</code></pre>\n<p><em>Why @EnableWebMvc usage is a problem?</em></p>\n<p><code>@EnableWebMvc</code> is using <code>DelegatingWebMvcConfiguration</code> which extends <code>WebMvcConfigurationSupport</code> which does this:</p>\n<pre><code>if (jackson2Present) {\n    Jackson2ObjectMapperBuilder builder = Jackson2ObjectMapperBuilder.json();\n    if (this.applicationContext != null) {\n        builder.applicationContext(this.applicationContext);\n    }\n    messageConverters.add(new MappingJackson2HttpMessageConverter(builder.build()));\n}\n</code></pre>\n<p>which means that there's no way of injecting your own <code>ObjectMapper</code> with the purpose of preparing it to be used for creating the default <code>MappingJackson2HttpMessageConverter</code> when using <code>@EnableWebMvc</code>.</p>\n"},{"tags":[],"owner":{"account_id":1380055,"reputation":17338,"user_id":1313268,"accept_rate":88,"display_name":"CorayThan"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1585305592,"creation_date":1585305592,"answer_id":60884340,"question_id":7854030,"body_markdown":"In Spring Boot `2.2.x` you need to configure it like this:\r\n\r\n    @Bean\r\n    public ObjectMapper objectMapper(Jackson2ObjectMapperBuilder builder) {\r\n        return builder.build()\r\n    }\r\n\r\nKotlin: \r\n\r\n    @Bean\r\n    fun objectMapper(builder: Jackson2ObjectMapperBuilder) = builder.build()","title":"Configuring ObjectMapper in Spring","body":"<p>In Spring Boot <code>2.2.x</code> you need to configure it like this:</p>\n\n<pre><code>@Bean\npublic ObjectMapper objectMapper(Jackson2ObjectMapperBuilder builder) {\n    return builder.build()\n}\n</code></pre>\n\n<p>Kotlin: </p>\n\n<pre><code>@Bean\nfun objectMapper(builder: Jackson2ObjectMapperBuilder) = builder.build()\n</code></pre>\n"}],"owner":{"account_id":429950,"reputation":1793,"user_id":813118,"accept_rate":82,"display_name":"Steve Eastwood"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":340905,"favorite_count":0,"down_vote_count":0,"up_vote_count":114,"accepted_answer_id":32842962,"answer_count":12,"score":114,"last_activity_date":1671255358,"creation_date":1319223562,"question_id":7854030,"body_markdown":"My goal is to configure the `objectMapper` in the way that it only serialises element which are annotated with `@JsonProperty`.\r\n\r\nIn order to do so I followed this [explanation][1] which says how to configurate the objectmapper.\r\n\r\nI included the custom objectmapper as described [here][2].\r\n\r\nHowever, when the class `NumbersOfNewEvents` is serialized it still contains all attributes in the json.\r\n\r\nWhy is this happening, and how can I get the desired result?\r\n\r\nJackson 1.8.0\r\nspring 3.0.5\r\n\r\n**CustomObjectMapper**\r\n\r\n    public class CompanyObjectMapper extends ObjectMapper {\r\n    \tpublic CompanyObjectMapper() {\r\n    \t\tsuper();\r\n    \t\tsetVisibilityChecker(getSerializationConfig()\r\n    \t\t\t\t.getDefaultVisibilityChecker()\r\n    \t\t\t\t.withCreatorVisibility(JsonAutoDetect.Visibility.NONE)\r\n    \t\t\t\t.withFieldVisibility(JsonAutoDetect.Visibility.NONE)\r\n    \t\t\t\t.withGetterVisibility(JsonAutoDetect.Visibility.NONE)\r\n    \t\t\t\t.withIsGetterVisibility(JsonAutoDetect.Visibility.NONE)\r\n    \t\t\t\t.withSetterVisibility(JsonAutoDetect.Visibility.DEFAULT));\r\n    \t}\r\n    }\r\n\r\n\r\n**servlet.xml**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n    \txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txmlns:context=&quot;http://www.springframework.org/schema/context&quot;\r\n    \txmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot;\r\n    \txsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\r\n    \t\thttp://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd\r\n    \t\thttp://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd&quot;&gt;\r\n    \r\n    \t&lt;context:component-scan base-package=&quot;de.Company.backend.web&quot; /&gt;\r\n     \r\n    \t&lt;mvc:annotation-driven /&gt;\r\n    \t\r\n    \t&lt;bean\r\n    \t\tclass=&quot;org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter&quot;&gt;\r\n    \t\t&lt;property name=&quot;messageConverters&quot;&gt;\r\n    \t\t\t&lt;list&gt;\r\n    \t\t\t\t&lt;bean class=&quot;org.springframework.http.converter.json.MappingJacksonHttpMessageConverter&quot;&gt;\r\n    \t\t\t\t\t&lt;property name=&quot;objectMapper&quot; ref=&quot;jacksonObjectMapper&quot; /&gt;\r\n    \t\t\t\t&lt;/bean&gt;\r\n    \t\t\t&lt;/list&gt;\r\n    \t\t&lt;/property&gt;\r\n    \t&lt;/bean&gt;\r\n    \t\r\n    \t&lt;bean id=&quot;jacksonObjectMapper&quot; class=&quot;de.Company.backend.web.CompanyObjectMapper&quot; /&gt;\r\n    &lt;/beans&gt;\r\n\r\n**NumbersOfNewEvents**\r\n\r\n    public class NumbersOfNewEvents implements StatusAttribute {\r\n    \r\n    \tpublic Integer newAccepts;\r\n    \tpublic Integer openRequests;\r\n    \t\r\n    \tpublic NumbersOfNewEvents() {\r\n    \t\tsuper();\r\n    \t}\r\n    }\r\n\r\n  [1]: http://wiki.fasterxml.com/JacksonFeatureAutoDetect &quot;explanation&quot;\r\n  [2]: https://stackoverflow.com/questions/3591291/spring-jackson-and-customization-e-g-customdeserializer\r\n","title":"Configuring ObjectMapper in Spring","body":"<p>My goal is to configure the <code>objectMapper</code> in the way that it only serialises element which are annotated with <code>@JsonProperty</code>.</p>\n<p>In order to do so I followed this <a href=\"http://wiki.fasterxml.com/JacksonFeatureAutoDetect\" rel=\"noreferrer\" title=\"explanation\">explanation</a> which says how to configurate the objectmapper.</p>\n<p>I included the custom objectmapper as described <a href=\"https://stackoverflow.com/questions/3591291/spring-jackson-and-customization-e-g-customdeserializer\">here</a>.</p>\n<p>However, when the class <code>NumbersOfNewEvents</code> is serialized it still contains all attributes in the json.</p>\n<p>Why is this happening, and how can I get the desired result?</p>\n<p>Jackson 1.8.0\nspring 3.0.5</p>\n<p><strong>CustomObjectMapper</strong></p>\n<pre><code>public class CompanyObjectMapper extends ObjectMapper {\n    public CompanyObjectMapper() {\n        super();\n        setVisibilityChecker(getSerializationConfig()\n                .getDefaultVisibilityChecker()\n                .withCreatorVisibility(JsonAutoDetect.Visibility.NONE)\n                .withFieldVisibility(JsonAutoDetect.Visibility.NONE)\n                .withGetterVisibility(JsonAutoDetect.Visibility.NONE)\n                .withIsGetterVisibility(JsonAutoDetect.Visibility.NONE)\n                .withSetterVisibility(JsonAutoDetect.Visibility.DEFAULT));\n    }\n}\n</code></pre>\n<p><strong>servlet.xml</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xmlns:context=&quot;http://www.springframework.org/schema/context&quot;\n    xmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot;\n    xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\n        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd\n        http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd&quot;&gt;\n\n    &lt;context:component-scan base-package=&quot;de.Company.backend.web&quot; /&gt;\n \n    &lt;mvc:annotation-driven /&gt;\n    \n    &lt;bean\n        class=&quot;org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter&quot;&gt;\n        &lt;property name=&quot;messageConverters&quot;&gt;\n            &lt;list&gt;\n                &lt;bean class=&quot;org.springframework.http.converter.json.MappingJacksonHttpMessageConverter&quot;&gt;\n                    &lt;property name=&quot;objectMapper&quot; ref=&quot;jacksonObjectMapper&quot; /&gt;\n                &lt;/bean&gt;\n            &lt;/list&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n    \n    &lt;bean id=&quot;jacksonObjectMapper&quot; class=&quot;de.Company.backend.web.CompanyObjectMapper&quot; /&gt;\n&lt;/beans&gt;\n</code></pre>\n<p><strong>NumbersOfNewEvents</strong></p>\n<pre><code>public class NumbersOfNewEvents implements StatusAttribute {\n\n    public Integer newAccepts;\n    public Integer openRequests;\n    \n    public NumbersOfNewEvents() {\n        super();\n    }\n}\n</code></pre>\n"},{"tags":["java","spring-boot","spring-security","spring-webflux"],"comments":[{"owner":{"account_id":2064278,"reputation":13129,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1671003248,"post_id":74793387,"comment_id":132000698,"body_markdown":"Access denied is not a 500 and why would you want a 301 MOVED PERMANENTLY?","body":"Access denied is not a 500 and why would you want a 301 MOVED PERMANENTLY?"},{"owner":{"account_id":12652413,"reputation":57,"user_id":9196033,"display_name":"Ant Oleyhoo"},"score":0,"creation_date":1671029401,"post_id":74793387,"comment_id":132009456,"body_markdown":"@Toerktumlare right - access denied should not cause a 500, it should case a 403. Sorry about accidentally saying 301 I got my status code mixed up :)","body":"@Toerktumlare right - access denied should not cause a 500, it should case a 403. Sorry about accidentally saying 301 I got my status code mixed up :)"}],"answers":[{"tags":[],"owner":{"account_id":12652413,"reputation":57,"user_id":9196033,"display_name":"Ant Oleyhoo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1671255040,"creation_date":1671255040,"answer_id":74831997,"question_id":74793387,"body_markdown":"This is now a known bug; please check for updates here: https://github.com/spring-projects/spring-security/issues/12374","title":"Spring Reactive Security: adding `SecurityWebFilterChain` causes 500 error for AccessDeniedException","body":"<p>This is now a known bug; please check for updates here: <a href=\"https://github.com/spring-projects/spring-security/issues/12374\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/spring-security/issues/12374</a></p>\n"}],"owner":{"account_id":12652413,"reputation":57,"user_id":9196033,"display_name":"Ant Oleyhoo"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":742,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74831997,"answer_count":1,"score":0,"last_activity_date":1671255040,"creation_date":1670989939,"question_id":74793387,"body_markdown":"Note that I am using Spring security 5.7.4.\r\n\r\nI have a `RestController`:\r\n```java\r\n@RestController\r\npublic class StandardController {\r\n    @PreAuthorize(&quot;hasRole(&#39;ADMIN&#39;)&quot;)\r\n    @GetMapping(&quot;/hello&quot;)\r\n    public Mono&lt;Map&lt;String, String&gt;&gt; hello() {\r\n        final Map&lt;String, String&gt; map = new HashMap&lt;&gt;();\r\n        map.put(&quot;hi&quot;, &quot;hi&quot;);\r\n        return Mono.just(map);\r\n    }\r\n\r\n}\r\n```\r\n\r\nand a `Security Config`:\r\n\r\n```java\r\n@Configuration\r\n@EnableWebFluxSecurity\r\n@EnableReactiveMethodSecurity\r\npublic class SecurityConfig {\r\n    @Bean\r\n    public MapReactiveUserDetailsService userDetailsService() {\r\n        User.UserBuilder userBuilder = User.withDefaultPasswordEncoder();\r\n        UserDetails rob = userBuilder.username(&quot;rob&quot;)\r\n                .password(&quot;rob&quot;)\r\n                .roles(&quot;USER&quot;)\r\n                .build();\r\n        UserDetails admin = userBuilder.username(&quot;admin&quot;)\r\n                .password(&quot;admin&quot;)\r\n                .roles(&quot;USER&quot;,&quot;ADMIN&quot;)\r\n                .build();\r\n        return new MapReactiveUserDetailsService(rob, admin);\r\n    }\r\n}\r\n```\r\n\r\nEverything works fine until I try to disable `CSRF` by adding `SecurityWebFilterChain` to my security config. \r\n\r\n```java\r\npublic class SecurityConfig {\r\n    @Bean\r\n    public SecurityWebFilterChain springSecurityFilterChain(ServerHttpSecurity http) {\r\n       return http\r\n                .httpBasic()\r\n                .and()\r\n                .csrf()\r\n                .disable()\r\n                .build();\r\n    }\r\n\r\n\r\n /// ... user details service\r\n}\r\n```\r\n\r\nNow, when I try to hit any endpoint UNAUTHENTICATED (including ones unaffected by CSRF like the `hello` GET route) I get the following stack trace:\r\n\r\n```\r\n2022-12-13T21:50:04.846-06:00 DEBUG 70978 --- [ctor-http-nio-2] o.s.w.s.adapter.HttpWebHandlerAdapter    : [1b6ff9fc-2] HTTP GET &quot;/hello&quot;\r\n2022-12-13T21:50:04.851-06:00 DEBUG 70978 --- [     parallel-2] o.s.w.s.s.DefaultWebSessionManager       : Created new WebSession.\r\n2022-12-13T21:50:04.852-06:00 DEBUG 70978 --- [     parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern=&#39;/logout&#39;, method=POST}\r\n2022-12-13T21:50:04.852-06:00 DEBUG 70978 --- [     parallel-2] athPatternParserServerWebExchangeMatcher : Request &#39;GET /hello&#39; doesn&#39;t match &#39;POST /logout&#39;\r\n2022-12-13T21:50:04.852-06:00 DEBUG 70978 --- [     parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found\r\n2022-12-13T21:50:04.853-06:00 DEBUG 70978 --- [     parallel-2] s.w.r.r.m.a.RequestMappingHandlerMapping : [1b6ff9fc-2] Mapped to com.example.demo.StandardController#hello()\r\n2022-12-13T21:50:04.856-06:00 DEBUG 70978 --- [     parallel-2] o.s.w.r.r.m.a.ResponseBodyResultHandler  : [1b6ff9fc-2] Using &#39;application/json&#39; given [*/*] and supported [application/json, application/*+json, application/x-ndjson, text/event-stream]\r\n2022-12-13T21:50:04.856-06:00 DEBUG 70978 --- [     parallel-2] o.s.w.r.r.m.a.ResponseBodyResultHandler  : [1b6ff9fc-2] 0..1 [java.util.Map&lt;java.lang.String, java.lang.String&gt;]\r\n2022-12-13T21:50:04.856-06:00 DEBUG 70978 --- [     parallel-2] ebSessionServerSecurityContextRepository : No SecurityContext found in WebSession: &#39;org.springframework.web.server.session.InMemoryWebSessionStore$InMemoryWebSession@4f4ffd93&#39;\r\n2022-12-13T21:50:04.858-06:00 DEBUG 70978 --- [     parallel-2] a.w.r.e.AbstractErrorWebExceptionHandler : [1b6ff9fc-2] Resolved [AccessDeniedException: Access Denied] for HTTP GET /hello\r\n2022-12-13T21:50:04.859-06:00 ERROR 70978 --- [     parallel-2] a.w.r.e.AbstractErrorWebExceptionHandler : [1b6ff9fc-2]  500 Server Error for HTTP GET &quot;/hello&quot;\r\n\r\norg.springframework.security.access.AccessDeniedException: Access Denied\r\n\tat org.springframework.security.authorization.ReactiveAuthorizationManager.lambda$verify$0(ReactiveAuthorizationManager.java:53) ~[spring-security-core-6.0.0.jar:6.0.0]\r\n\tSuppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException: \r\nError has been observed at the following site(s):\r\n\t*__checkpoint ⇢ Handler com.example.demo.StandardController#hello() [DispatcherHandler]\r\n\t*__checkpoint ⇢ org.springframework.security.web.server.authentication.logout.LogoutWebFilter [DefaultWebFilterChain]\r\n\t*__checkpoint ⇢ org.springframework.security.web.server.savedrequest.ServerRequestCacheWebFilter [DefaultWebFilterChain]\r\n\t*__checkpoint ⇢ org.springframework.security.web.server.context.SecurityContextServerWebExchangeWebFilter [DefaultWebFilterChain]\r\n\t*__checkpoint ⇢ org.springframework.security.web.server.context.ReactorContextWebFilter [DefaultWebFilterChain]\r\n\t*__checkpoint ⇢ org.springframework.security.web.server.header.HttpHeaderWriterWebFilter [DefaultWebFilterChain]\r\n\t*__checkpoint ⇢ org.springframework.security.config.web.server.ServerHttpSecurity$ServerWebExchangeReactorContextWebFilter [DefaultWebFilterChain]\r\n\t*__checkpoint ⇢ org.springframework.security.web.server.WebFilterChainProxy [DefaultWebFilterChain]\r\n\t*__checkpoint ⇢ HTTP GET &quot;/hello&quot; [ExceptionHandlingWebHandler]\r\nOriginal Stack Trace:\r\n\t\tat org.springframework.security.authorization.ReactiveAuthorizationManager.lambda$verify$0(ReactiveAuthorizationManager.java:53) ~[spring-security-core-6.0.0.jar:6.0.0]\r\n\t\tat reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:44) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.Mono.subscribe(Mono.java:4444) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onComplete(FluxSwitchIfEmpty.java:82) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxFilterFuseable$FilterFuseableSubscriber.onComplete(FluxFilterFuseable.java:171) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxMapFuseable$MapFuseableConditionalSubscriber.onComplete(FluxMapFuseable.java:350) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoFlatMap$FlatMapMain.secondComplete(MonoFlatMap.java:246) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoFlatMap$FlatMapInner.onNext(MonoFlatMap.java:305) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.Operators$ScalarSubscription.request(Operators.java:2508) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoFlatMap$FlatMapInner.onSubscribe(MonoFlatMap.java:291) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoJust.subscribe(MonoJust.java:55) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:52) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:165) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxMap$MapSubscriber.onNext(FluxMap.java:122) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.Operators$BaseFluxToMonoOperator.completePossiblyEmpty(Operators.java:2034) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxDefaultIfEmpty$DefaultIfEmptySubscriber.onComplete(FluxDefaultIfEmpty.java:134) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onComplete(FluxMapFuseable.java:152) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoFlatMap$FlatMapMain.secondComplete(MonoFlatMap.java:250) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoFlatMap$FlatMapInner.onComplete(MonoFlatMap.java:324) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:155) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.Operators$MonoSubscriber.complete(Operators.java:1802) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoCacheTime.subscribeOrReturn(MonoCacheTime.java:151) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:57) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:165) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxFilter$FilterSubscriber.onNext(FluxFilter.java:113) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxMap$MapConditionalSubscriber.onNext(FluxMap.java:224) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.Operators$ScalarSubscription.request(Operators.java:2508) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxMap$MapConditionalSubscriber.request(FluxMap.java:295) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxFilter$FilterSubscriber.request(FluxFilter.java:186) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoFlatMap$FlatMapMain.request(MonoFlatMap.java:194) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.request(FluxMapFuseable.java:171) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxDefaultIfEmpty$DefaultIfEmptySubscriber.request(FluxDefaultIfEmpty.java:98) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxMap$MapSubscriber.request(FluxMap.java:164) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoFlatMap$FlatMapMain.request(MonoFlatMap.java:194) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxMapFuseable$MapFuseableConditionalSubscriber.request(FluxMapFuseable.java:360) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxFilterFuseable$FilterFuseableSubscriber.request(FluxFilterFuseable.java:191) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.Operators$MultiSubscriptionSubscriber.set(Operators.java:2304) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onSubscribe(Operators.java:2178) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxFilterFuseable$FilterFuseableSubscriber.onSubscribe(FluxFilterFuseable.java:87) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxMapFuseable$MapFuseableConditionalSubscriber.onSubscribe(FluxMapFuseable.java:265) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoFlatMap$FlatMapMain.onSubscribe(MonoFlatMap.java:117) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxMap$MapSubscriber.onSubscribe(FluxMap.java:92) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.Operators$BaseFluxToMonoOperator.onSubscribe(Operators.java:1988) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onSubscribe(FluxMapFuseable.java:96) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoFlatMap$FlatMapMain.onSubscribe(MonoFlatMap.java:117) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxFilter$FilterSubscriber.onSubscribe(FluxFilter.java:85) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxMap$MapConditionalSubscriber.onSubscribe(FluxMap.java:194) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoJust.subscribe(MonoJust.java:55) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoDeferContextual.subscribe(MonoDeferContextual.java:55) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.Mono.subscribe(Mono.java:4444) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.subscribeNext(MonoIgnoreThen.java:263) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoIgnoreThen.subscribe(MonoIgnoreThen.java:51) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxFromMonoOperator.subscribe(FluxFromMonoOperator.java:83) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxDeferContextual.subscribe(FluxDeferContextual.java:57) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:64) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:165) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onNext(FluxOnErrorResume.java:79) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxPeek$PeekSubscriber.onNext(FluxPeek.java:200) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxPeek$PeekSubscriber.onNext(FluxPeek.java:200) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.complete(MonoIgnoreThen.java:292) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.onNext(MonoIgnoreThen.java:187) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.Operators$ScalarSubscription.request(Operators.java:2508) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.onSubscribe(MonoIgnoreThen.java:134) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxFlatMap.trySubscribeScalarMap(FluxFlatMap.java:192) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoFlatMap.subscribeOrReturn(MonoFlatMap.java:53) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:57) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:52) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.subscribeNext(MonoIgnoreThen.java:240) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.onComplete(MonoIgnoreThen.java:203) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoFlatMap$FlatMapMain.onComplete(MonoFlatMap.java:189) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.Operators.complete(Operators.java:137) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoZip.subscribe(MonoZip.java:121) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.Mono.subscribe(Mono.java:4444) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.subscribeNext(MonoIgnoreThen.java:263) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoIgnoreThen.subscribe(MonoIgnoreThen.java:51) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:64) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:165) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onNext(FluxOnErrorResume.java:79) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onNext(FluxSwitchIfEmpty.java:74) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoNext$NextSubscriber.onNext(MonoNext.java:82) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.innerNext(FluxConcatMapNoPrefetch.java:258) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxConcatMap$ConcatMapInner.onNext(FluxConcatMap.java:863) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:129) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.onNext(MonoPeekTerminal.java:180) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.Operators$ScalarSubscription.request(Operators.java:2508) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.request(MonoPeekTerminal.java:139) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.request(FluxMapFuseable.java:171) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.Operators$MultiSubscriptionSubscriber.request(Operators.java:2268) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.request(FluxConcatMapNoPrefetch.java:338) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoNext$NextSubscriber.request(MonoNext.java:108) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.Operators$MultiSubscriptionSubscriber.set(Operators.java:2304) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onSubscribe(Operators.java:2178) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoNext$NextSubscriber.onSubscribe(MonoNext.java:70) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.onSubscribe(FluxConcatMapNoPrefetch.java:164) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:165) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:87) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:64) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:52) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:52) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.Mono.subscribe(Mono.java:4444) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.subscribeNext(MonoIgnoreThen.java:263) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoIgnoreThen.subscribe(MonoIgnoreThen.java:51) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.Mono.subscribe(Mono.java:4444) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onComplete(FluxSwitchIfEmpty.java:82) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxFilter$FilterSubscriber.onComplete(FluxFilter.java:166) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxPeekFuseable$PeekConditionalSubscriber.onComplete(FluxPeekFuseable.java:940) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onComplete(FluxSwitchIfEmpty.java:85) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.Operators$ScalarSubscription.request(Operators.java:2510) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.Operators$MultiSubscriptionSubscriber.set(Operators.java:2304) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onSubscribe(Operators.java:2178) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoJust.subscribe(MonoJust.java:55) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.Mono.subscribe(Mono.java:4444) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onComplete(FluxSwitchIfEmpty.java:82) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoNext$NextSubscriber.onComplete(MonoNext.java:102) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxFilter$FilterSubscriber.onComplete(FluxFilter.java:166) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxFlatMap$FlatMapMain.checkTerminated(FluxFlatMap.java:846) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxFlatMap$FlatMapMain.drainLoop(FluxFlatMap.java:608) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxFlatMap$FlatMapMain.drain(FluxFlatMap.java:588) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxFlatMap$FlatMapMain.onComplete(FluxFlatMap.java:465) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxPeekFuseable$PeekFuseableSubscriber.onComplete(FluxPeekFuseable.java:277) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxIterable$IterableSubscription.slowPath(FluxIterable.java:294) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxIterable$IterableSubscription.request(FluxIterable.java:230) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxPeekFuseable$PeekFuseableSubscriber.request(FluxPeekFuseable.java:144) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxFlatMap$FlatMapMain.onSubscribe(FluxFlatMap.java:371) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxPeekFuseable$PeekFuseableSubscriber.onSubscribe(FluxPeekFuseable.java:178) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:165) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:87) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:64) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:52) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:165) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.Operators$BaseFluxToMonoOperator.completePossiblyEmpty(Operators.java:2034) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxDefaultIfEmpty$DefaultIfEmptySubscriber.onComplete(FluxDefaultIfEmpty.java:134) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxMap$MapSubscriber.onComplete(FluxMap.java:144) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxMap$MapSubscriber.onComplete(FluxMap.java:144) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxFilter$FilterSubscriber.onComplete(FluxFilter.java:166) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxMap$MapConditionalSubscriber.onComplete(FluxMap.java:275) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.Operators$MonoSubscriber.complete(Operators.java:1803) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoCacheTime$CoordinatorSubscriber.signalCached(MonoCacheTime.java:337) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoCacheTime$CoordinatorSubscriber.onNext(MonoCacheTime.java:354) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxPeek$PeekSubscriber.onNext(FluxPeek.java:200) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onNext(FluxSwitchIfEmpty.java:74) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.FluxPeekFuseable$PeekFuseableSubscriber.onNext(FluxPeekFuseable.java:210) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.onNext(MonoPeekTerminal.java:180) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.publisher.MonoPublishOn$PublishOnSubscriber.run(MonoPublishOn.java:181) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:68) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:28) ~[reactor-core-3.5.0.jar:3.5.0]\r\n\t\tat java.base/java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:264) ~[na:na]\r\n\t\tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java) ~[na:na]\r\n\t\tat java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304) ~[na:na]\r\n\t\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136) ~[na:na]\r\n\t\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635) ~[na:na]\r\n\t\tat java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\r\n\r\n2022-12-13T21:50:04.863-06:00 DEBUG 70978 --- [     parallel-2] o.s.http.codec.json.Jackson2JsonEncoder  : [1b6ff9fc-2] Encoding [{timestamp=Tue Dec 13 21:50:04 CST 2022, path=/hello, status=500, error=Internal Server Error, reque (truncated)...]\r\n2022-12-13T21:50:04.870-06:00 DEBUG 70978 --- [ctor-http-nio-2] o.s.w.s.adapter.HttpWebHandlerAdapter    : [1b6ff9fc-2] Completed 500 INTERNAL_SERVER_ERROR\r\n```\r\n\r\nIf I hit the endpoint authenticated, I get the valid response. Is there some mapper I am missing to map this 500 error to a 403 or similar?","title":"Spring Reactive Security: adding `SecurityWebFilterChain` causes 500 error for AccessDeniedException","body":"<p>Note that I am using Spring security 5.7.4.</p>\n<p>I have a <code>RestController</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RestController\npublic class StandardController {\n    @PreAuthorize(&quot;hasRole('ADMIN')&quot;)\n    @GetMapping(&quot;/hello&quot;)\n    public Mono&lt;Map&lt;String, String&gt;&gt; hello() {\n        final Map&lt;String, String&gt; map = new HashMap&lt;&gt;();\n        map.put(&quot;hi&quot;, &quot;hi&quot;);\n        return Mono.just(map);\n    }\n\n}\n</code></pre>\n<p>and a <code>Security Config</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableWebFluxSecurity\n@EnableReactiveMethodSecurity\npublic class SecurityConfig {\n    @Bean\n    public MapReactiveUserDetailsService userDetailsService() {\n        User.UserBuilder userBuilder = User.withDefaultPasswordEncoder();\n        UserDetails rob = userBuilder.username(&quot;rob&quot;)\n                .password(&quot;rob&quot;)\n                .roles(&quot;USER&quot;)\n                .build();\n        UserDetails admin = userBuilder.username(&quot;admin&quot;)\n                .password(&quot;admin&quot;)\n                .roles(&quot;USER&quot;,&quot;ADMIN&quot;)\n                .build();\n        return new MapReactiveUserDetailsService(rob, admin);\n    }\n}\n</code></pre>\n<p>Everything works fine until I try to disable <code>CSRF</code> by adding <code>SecurityWebFilterChain</code> to my security config.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class SecurityConfig {\n    @Bean\n    public SecurityWebFilterChain springSecurityFilterChain(ServerHttpSecurity http) {\n       return http\n                .httpBasic()\n                .and()\n                .csrf()\n                .disable()\n                .build();\n    }\n\n\n /// ... user details service\n}\n</code></pre>\n<p>Now, when I try to hit any endpoint UNAUTHENTICATED (including ones unaffected by CSRF like the <code>hello</code> GET route) I get the following stack trace:</p>\n<pre><code>2022-12-13T21:50:04.846-06:00 DEBUG 70978 --- [ctor-http-nio-2] o.s.w.s.adapter.HttpWebHandlerAdapter    : [1b6ff9fc-2] HTTP GET &quot;/hello&quot;\n2022-12-13T21:50:04.851-06:00 DEBUG 70978 --- [     parallel-2] o.s.w.s.s.DefaultWebSessionManager       : Created new WebSession.\n2022-12-13T21:50:04.852-06:00 DEBUG 70978 --- [     parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : Trying to match using PathMatcherServerWebExchangeMatcher{pattern='/logout', method=POST}\n2022-12-13T21:50:04.852-06:00 DEBUG 70978 --- [     parallel-2] athPatternParserServerWebExchangeMatcher : Request 'GET /hello' doesn't match 'POST /logout'\n2022-12-13T21:50:04.852-06:00 DEBUG 70978 --- [     parallel-2] o.s.s.w.s.u.m.OrServerWebExchangeMatcher : No matches found\n2022-12-13T21:50:04.853-06:00 DEBUG 70978 --- [     parallel-2] s.w.r.r.m.a.RequestMappingHandlerMapping : [1b6ff9fc-2] Mapped to com.example.demo.StandardController#hello()\n2022-12-13T21:50:04.856-06:00 DEBUG 70978 --- [     parallel-2] o.s.w.r.r.m.a.ResponseBodyResultHandler  : [1b6ff9fc-2] Using 'application/json' given [*/*] and supported [application/json, application/*+json, application/x-ndjson, text/event-stream]\n2022-12-13T21:50:04.856-06:00 DEBUG 70978 --- [     parallel-2] o.s.w.r.r.m.a.ResponseBodyResultHandler  : [1b6ff9fc-2] 0..1 [java.util.Map&lt;java.lang.String, java.lang.String&gt;]\n2022-12-13T21:50:04.856-06:00 DEBUG 70978 --- [     parallel-2] ebSessionServerSecurityContextRepository : No SecurityContext found in WebSession: 'org.springframework.web.server.session.InMemoryWebSessionStore$InMemoryWebSession@4f4ffd93'\n2022-12-13T21:50:04.858-06:00 DEBUG 70978 --- [     parallel-2] a.w.r.e.AbstractErrorWebExceptionHandler : [1b6ff9fc-2] Resolved [AccessDeniedException: Access Denied] for HTTP GET /hello\n2022-12-13T21:50:04.859-06:00 ERROR 70978 --- [     parallel-2] a.w.r.e.AbstractErrorWebExceptionHandler : [1b6ff9fc-2]  500 Server Error for HTTP GET &quot;/hello&quot;\n\norg.springframework.security.access.AccessDeniedException: Access Denied\n    at org.springframework.security.authorization.ReactiveAuthorizationManager.lambda$verify$0(ReactiveAuthorizationManager.java:53) ~[spring-security-core-6.0.0.jar:6.0.0]\n    Suppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException: \nError has been observed at the following site(s):\n    *__checkpoint ⇢ Handler com.example.demo.StandardController#hello() [DispatcherHandler]\n    *__checkpoint ⇢ org.springframework.security.web.server.authentication.logout.LogoutWebFilter [DefaultWebFilterChain]\n    *__checkpoint ⇢ org.springframework.security.web.server.savedrequest.ServerRequestCacheWebFilter [DefaultWebFilterChain]\n    *__checkpoint ⇢ org.springframework.security.web.server.context.SecurityContextServerWebExchangeWebFilter [DefaultWebFilterChain]\n    *__checkpoint ⇢ org.springframework.security.web.server.context.ReactorContextWebFilter [DefaultWebFilterChain]\n    *__checkpoint ⇢ org.springframework.security.web.server.header.HttpHeaderWriterWebFilter [DefaultWebFilterChain]\n    *__checkpoint ⇢ org.springframework.security.config.web.server.ServerHttpSecurity$ServerWebExchangeReactorContextWebFilter [DefaultWebFilterChain]\n    *__checkpoint ⇢ org.springframework.security.web.server.WebFilterChainProxy [DefaultWebFilterChain]\n    *__checkpoint ⇢ HTTP GET &quot;/hello&quot; [ExceptionHandlingWebHandler]\nOriginal Stack Trace:\n        at org.springframework.security.authorization.ReactiveAuthorizationManager.lambda$verify$0(ReactiveAuthorizationManager.java:53) ~[spring-security-core-6.0.0.jar:6.0.0]\n        at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:44) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.Mono.subscribe(Mono.java:4444) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onComplete(FluxSwitchIfEmpty.java:82) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxFilterFuseable$FilterFuseableSubscriber.onComplete(FluxFilterFuseable.java:171) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxMapFuseable$MapFuseableConditionalSubscriber.onComplete(FluxMapFuseable.java:350) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoFlatMap$FlatMapMain.secondComplete(MonoFlatMap.java:246) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoFlatMap$FlatMapInner.onNext(MonoFlatMap.java:305) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.Operators$ScalarSubscription.request(Operators.java:2508) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoFlatMap$FlatMapInner.onSubscribe(MonoFlatMap.java:291) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoJust.subscribe(MonoJust.java:55) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:52) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:165) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxMap$MapSubscriber.onNext(FluxMap.java:122) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.Operators$BaseFluxToMonoOperator.completePossiblyEmpty(Operators.java:2034) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxDefaultIfEmpty$DefaultIfEmptySubscriber.onComplete(FluxDefaultIfEmpty.java:134) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onComplete(FluxMapFuseable.java:152) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoFlatMap$FlatMapMain.secondComplete(MonoFlatMap.java:250) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoFlatMap$FlatMapInner.onComplete(MonoFlatMap.java:324) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:155) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.Operators$MonoSubscriber.complete(Operators.java:1802) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoCacheTime.subscribeOrReturn(MonoCacheTime.java:151) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:57) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:165) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxFilter$FilterSubscriber.onNext(FluxFilter.java:113) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxMap$MapConditionalSubscriber.onNext(FluxMap.java:224) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.Operators$ScalarSubscription.request(Operators.java:2508) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxMap$MapConditionalSubscriber.request(FluxMap.java:295) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxFilter$FilterSubscriber.request(FluxFilter.java:186) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoFlatMap$FlatMapMain.request(MonoFlatMap.java:194) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.request(FluxMapFuseable.java:171) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxDefaultIfEmpty$DefaultIfEmptySubscriber.request(FluxDefaultIfEmpty.java:98) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxMap$MapSubscriber.request(FluxMap.java:164) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoFlatMap$FlatMapMain.request(MonoFlatMap.java:194) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxMapFuseable$MapFuseableConditionalSubscriber.request(FluxMapFuseable.java:360) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxFilterFuseable$FilterFuseableSubscriber.request(FluxFilterFuseable.java:191) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.set(Operators.java:2304) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onSubscribe(Operators.java:2178) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxFilterFuseable$FilterFuseableSubscriber.onSubscribe(FluxFilterFuseable.java:87) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxMapFuseable$MapFuseableConditionalSubscriber.onSubscribe(FluxMapFuseable.java:265) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoFlatMap$FlatMapMain.onSubscribe(MonoFlatMap.java:117) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxMap$MapSubscriber.onSubscribe(FluxMap.java:92) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.Operators$BaseFluxToMonoOperator.onSubscribe(Operators.java:1988) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onSubscribe(FluxMapFuseable.java:96) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoFlatMap$FlatMapMain.onSubscribe(MonoFlatMap.java:117) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxFilter$FilterSubscriber.onSubscribe(FluxFilter.java:85) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxMap$MapConditionalSubscriber.onSubscribe(FluxMap.java:194) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoJust.subscribe(MonoJust.java:55) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoDeferContextual.subscribe(MonoDeferContextual.java:55) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.Mono.subscribe(Mono.java:4444) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.subscribeNext(MonoIgnoreThen.java:263) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoIgnoreThen.subscribe(MonoIgnoreThen.java:51) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxFromMonoOperator.subscribe(FluxFromMonoOperator.java:83) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxDeferContextual.subscribe(FluxDeferContextual.java:57) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:64) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:165) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onNext(FluxOnErrorResume.java:79) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxPeek$PeekSubscriber.onNext(FluxPeek.java:200) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxPeek$PeekSubscriber.onNext(FluxPeek.java:200) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.complete(MonoIgnoreThen.java:292) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.onNext(MonoIgnoreThen.java:187) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.Operators$ScalarSubscription.request(Operators.java:2508) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.onSubscribe(MonoIgnoreThen.java:134) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxFlatMap.trySubscribeScalarMap(FluxFlatMap.java:192) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoFlatMap.subscribeOrReturn(MonoFlatMap.java:53) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:57) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:52) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.subscribeNext(MonoIgnoreThen.java:240) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.onComplete(MonoIgnoreThen.java:203) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoFlatMap$FlatMapMain.onComplete(MonoFlatMap.java:189) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.Operators.complete(Operators.java:137) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoZip.subscribe(MonoZip.java:121) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.Mono.subscribe(Mono.java:4444) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.subscribeNext(MonoIgnoreThen.java:263) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoIgnoreThen.subscribe(MonoIgnoreThen.java:51) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:64) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:165) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onNext(FluxOnErrorResume.java:79) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onNext(FluxSwitchIfEmpty.java:74) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoNext$NextSubscriber.onNext(MonoNext.java:82) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.innerNext(FluxConcatMapNoPrefetch.java:258) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxConcatMap$ConcatMapInner.onNext(FluxConcatMap.java:863) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:129) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.onNext(MonoPeekTerminal.java:180) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.Operators$ScalarSubscription.request(Operators.java:2508) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.request(MonoPeekTerminal.java:139) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.request(FluxMapFuseable.java:171) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.request(Operators.java:2268) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.request(FluxConcatMapNoPrefetch.java:338) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoNext$NextSubscriber.request(MonoNext.java:108) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.set(Operators.java:2304) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onSubscribe(Operators.java:2178) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoNext$NextSubscriber.onSubscribe(MonoNext.java:70) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.onSubscribe(FluxConcatMapNoPrefetch.java:164) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:165) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:87) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:64) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:52) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:52) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.Mono.subscribe(Mono.java:4444) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.subscribeNext(MonoIgnoreThen.java:263) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoIgnoreThen.subscribe(MonoIgnoreThen.java:51) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.Mono.subscribe(Mono.java:4444) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onComplete(FluxSwitchIfEmpty.java:82) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxFilter$FilterSubscriber.onComplete(FluxFilter.java:166) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxPeekFuseable$PeekConditionalSubscriber.onComplete(FluxPeekFuseable.java:940) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onComplete(FluxSwitchIfEmpty.java:85) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.Operators$ScalarSubscription.request(Operators.java:2510) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.set(Operators.java:2304) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onSubscribe(Operators.java:2178) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoJust.subscribe(MonoJust.java:55) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.Mono.subscribe(Mono.java:4444) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onComplete(FluxSwitchIfEmpty.java:82) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoNext$NextSubscriber.onComplete(MonoNext.java:102) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxFilter$FilterSubscriber.onComplete(FluxFilter.java:166) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxFlatMap$FlatMapMain.checkTerminated(FluxFlatMap.java:846) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxFlatMap$FlatMapMain.drainLoop(FluxFlatMap.java:608) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxFlatMap$FlatMapMain.drain(FluxFlatMap.java:588) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxFlatMap$FlatMapMain.onComplete(FluxFlatMap.java:465) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxPeekFuseable$PeekFuseableSubscriber.onComplete(FluxPeekFuseable.java:277) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxIterable$IterableSubscription.slowPath(FluxIterable.java:294) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxIterable$IterableSubscription.request(FluxIterable.java:230) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxPeekFuseable$PeekFuseableSubscriber.request(FluxPeekFuseable.java:144) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxFlatMap$FlatMapMain.onSubscribe(FluxFlatMap.java:371) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxPeekFuseable$PeekFuseableSubscriber.onSubscribe(FluxPeekFuseable.java:178) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:165) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:87) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:64) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:52) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:165) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.Operators$BaseFluxToMonoOperator.completePossiblyEmpty(Operators.java:2034) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxDefaultIfEmpty$DefaultIfEmptySubscriber.onComplete(FluxDefaultIfEmpty.java:134) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxMap$MapSubscriber.onComplete(FluxMap.java:144) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxMap$MapSubscriber.onComplete(FluxMap.java:144) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxFilter$FilterSubscriber.onComplete(FluxFilter.java:166) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxMap$MapConditionalSubscriber.onComplete(FluxMap.java:275) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.Operators$MonoSubscriber.complete(Operators.java:1803) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoCacheTime$CoordinatorSubscriber.signalCached(MonoCacheTime.java:337) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoCacheTime$CoordinatorSubscriber.onNext(MonoCacheTime.java:354) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxPeek$PeekSubscriber.onNext(FluxPeek.java:200) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onNext(FluxSwitchIfEmpty.java:74) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.FluxPeekFuseable$PeekFuseableSubscriber.onNext(FluxPeekFuseable.java:210) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.onNext(MonoPeekTerminal.java:180) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.publisher.MonoPublishOn$PublishOnSubscriber.run(MonoPublishOn.java:181) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:68) ~[reactor-core-3.5.0.jar:3.5.0]\n        at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:28) ~[reactor-core-3.5.0.jar:3.5.0]\n        at java.base/java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:264) ~[na:na]\n        at java.base/java.util.concurrent.FutureTask.run(FutureTask.java) ~[na:na]\n        at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304) ~[na:na]\n        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136) ~[na:na]\n        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635) ~[na:na]\n        at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\n\n2022-12-13T21:50:04.863-06:00 DEBUG 70978 --- [     parallel-2] o.s.http.codec.json.Jackson2JsonEncoder  : [1b6ff9fc-2] Encoding [{timestamp=Tue Dec 13 21:50:04 CST 2022, path=/hello, status=500, error=Internal Server Error, reque (truncated)...]\n2022-12-13T21:50:04.870-06:00 DEBUG 70978 --- [ctor-http-nio-2] o.s.w.s.adapter.HttpWebHandlerAdapter    : [1b6ff9fc-2] Completed 500 INTERNAL_SERVER_ERROR\n</code></pre>\n<p>If I hit the endpoint authenticated, I get the valid response. Is there some mapper I am missing to map this 500 error to a 403 or similar?</p>\n"},{"tags":["java","spring","jdbctemplate"],"answers":[{"tags":[],"owner":{"account_id":266102,"reputation":3853,"user_id":553486,"accept_rate":80,"display_name":"Byron"},"down_vote_count":4,"up_vote_count":20,"is_accepted":false,"score":16,"last_activity_date":1337105518,"creation_date":1337105518,"answer_id":10606477,"question_id":10606229,"body_markdown":"Ok, I figured it out.  I just wrapped it in a try catch and send back null.\r\n\r\n        public String test() {\r\n        \t\tString cert=null;\r\n        \t\tString sql = &quot;select ID_NMB_SRZ from codb_owner.TR_LTM_SLS_RTN \r\n                         where id_str_rt = &#39;999&#39; and ID_NMB_SRZ = &#39;60230009999999&#39;&quot;;\r\n        \t\ttry {\r\n        \t\t\tObject o = (String) jdbc.queryForObject(sql, String.class);\r\n        \t\t\tcert = (String) o;\r\n        \t\t} catch (EmptyResultDataAccessException e) {\r\n        \t\t\te.printStackTrace();\r\n        \t\t}\r\n        \t\treturn cert;\r\n        }","title":"Jdbctemplate query for string: EmptyResultDataAccessException: Incorrect result size: expected 1, actual 0","body":"<p>Ok, I figured it out.  I just wrapped it in a try catch and send back null.</p>\n\n<pre><code>    public String test() {\n            String cert=null;\n            String sql = \"select ID_NMB_SRZ from codb_owner.TR_LTM_SLS_RTN \n                     where id_str_rt = '999' and ID_NMB_SRZ = '60230009999999'\";\n            try {\n                Object o = (String) jdbc.queryForObject(sql, String.class);\n                cert = (String) o;\n            } catch (EmptyResultDataAccessException e) {\n                e.printStackTrace();\n            }\n            return cert;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1426258,"reputation":4514,"user_id":1349691,"accept_rate":72,"display_name":"Philippe Marschall"},"down_vote_count":0,"up_vote_count":25,"is_accepted":false,"score":25,"last_activity_date":1337146038,"creation_date":1337112446,"answer_id":10608054,"question_id":10606229,"body_markdown":"That&#39;s not a good solution because you&#39;re relying on exceptions for control flow. In your solution it&#39;s normal to get exceptions, it&#39;s normal to have them in the log.\r\n\r\n    public String test() {\r\n        String sql = &quot;select ID_NMB_SRZ from codb_owner.TR_LTM_SLS_RTN where id_str_rt = &#39;999&#39; and ID_NMB_SRZ = &#39;60230009999999&#39;&quot;;\r\n        List&lt;String&gt; certs = jdbc.queryForList(sql, String.class); \r\n        if (certs.isEmpty()) {\r\n            return null;\r\n        } else {\r\n            return certs.get(0);\r\n        }\r\n    }","title":"Jdbctemplate query for string: EmptyResultDataAccessException: Incorrect result size: expected 1, actual 0","body":"<p>That's not a good solution because you're relying on exceptions for control flow. In your solution it's normal to get exceptions, it's normal to have them in the log.</p>\n\n<pre><code>public String test() {\n    String sql = \"select ID_NMB_SRZ from codb_owner.TR_LTM_SLS_RTN where id_str_rt = '999' and ID_NMB_SRZ = '60230009999999'\";\n    List&lt;String&gt; certs = jdbc.queryForList(sql, String.class); \n    if (certs.isEmpty()) {\n        return null;\n    } else {\n        return certs.get(0);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":33759,"reputation":36049,"user_id":94813,"accept_rate":70,"display_name":"Rakesh Juyal"},"down_vote_count":1,"up_vote_count":216,"is_accepted":true,"score":215,"last_activity_date":1636548672,"creation_date":1337147171,"answer_id":10612703,"question_id":10606229,"body_markdown":"In JdbcTemplate , `queryForInt`, `queryForLong`, `queryForObject` all such methods expects that executed query will return one and only one row. If you get no rows or more than one row that will result in `IncorrectResultSizeDataAccessException` . Now the correct way is not to catch this exception or `EmptyResultDataAccessException`, but make sure the query you are using should return only one row.  If at all it is not possible then use `query` method instead.\r\n\r\n    List&lt;String&gt; strLst = getJdbcTemplate().query(sql, new RowMapper&lt;String&gt;() {\r\n        public String mapRow(ResultSet rs, int rowNum) throws SQLException {\r\n            return rs.getString(1);\r\n        }\r\n    });\r\n\r\n    if (strLst.isEmpty()) {\r\n        return null;\r\n    } else if (strLst.size() == 1) { // list contains exactly 1 element\r\n        return strLst.get(0);\r\n    } else { // list contains more than 1 element\r\n             // either return 1st element or throw an exception\r\n    }\r\n\r\n","title":"Jdbctemplate query for string: EmptyResultDataAccessException: Incorrect result size: expected 1, actual 0","body":"<p>In JdbcTemplate , <code>queryForInt</code>, <code>queryForLong</code>, <code>queryForObject</code> all such methods expects that executed query will return one and only one row. If you get no rows or more than one row that will result in <code>IncorrectResultSizeDataAccessException</code> . Now the correct way is not to catch this exception or <code>EmptyResultDataAccessException</code>, but make sure the query you are using should return only one row.  If at all it is not possible then use <code>query</code> method instead.</p>\n<pre><code>List&lt;String&gt; strLst = getJdbcTemplate().query(sql, new RowMapper&lt;String&gt;() {\n    public String mapRow(ResultSet rs, int rowNum) throws SQLException {\n        return rs.getString(1);\n    }\n});\n\nif (strLst.isEmpty()) {\n    return null;\n} else if (strLst.size() == 1) { // list contains exactly 1 element\n    return strLst.get(0);\n} else { // list contains more than 1 element\n         // either return 1st element or throw an exception\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1577966,"reputation":602,"user_id":1463974,"accept_rate":50,"display_name":"DS."},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1340030501,"creation_date":1340030077,"answer_id":11085080,"question_id":10606229,"body_markdown":"You could use a group function so that your query always returns a result.\r\nie\r\n\r\n    MIN(ID_NMB_SRZ)","title":"Jdbctemplate query for string: EmptyResultDataAccessException: Incorrect result size: expected 1, actual 0","body":"<p>You could use a group function so that your query always returns a result.\nie</p>\n\n<pre><code>MIN(ID_NMB_SRZ)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":47296,"reputation":27247,"user_id":140037,"accept_rate":74,"display_name":"Brett Ryan"},"down_vote_count":1,"up_vote_count":59,"is_accepted":false,"score":58,"last_activity_date":1546613065,"creation_date":1367801093,"answer_id":16390624,"question_id":10606229,"body_markdown":"You may also use a [`ResultSetExtractor`][1] instead of a [`RowMapper`][2]. Both are just as easy as one another, the only difference is you call [`ResultSet.next()`][3].\r\n\r\n    public String test() {\r\n        String sql = &quot;select ID_NMB_SRZ from codb_owner.TR_LTM_SLS_RTN &quot;\r\n                     + &quot; where id_str_rt = &#39;999&#39; and ID_NMB_SRZ = &#39;60230009999999&#39;&quot;;\r\n        return jdbc.query(sql, new ResultSetExtractor&lt;String&gt;() {\r\n            @Override\r\n            public String extractData(ResultSet rs) throws SQLException,\r\n                                                           DataAccessException {\r\n                return rs.next() ? rs.getString(&quot;ID_NMB_SRZ&quot;) : null;\r\n            }\r\n        });\r\n    }\r\n\r\nThe [`ResultSetExtractor`][1] has the added benefit that you can handle all cases where there are more than one row or no rows returned.\r\n\r\n**UPDATE**: Several years on and I have a few tricks to share. [`JdbcTemplate`][4] works superbly with java 8 lambdas which the following examples are designed for but you can quite easily use a static class to achieve the same.\r\n\r\nWhile the question is about simple types, these examples serve as a guide for the common case of extracting domain objects.\r\n\r\nFirst off. Let&#39;s suppose that you have an account object with two properties for simplicity `Account(Long id, String name)`. You would likely wish to have a `RowMapper` for this domain object.\r\n\r\n    private static final RowMapper&lt;Account&gt; MAPPER_ACCOUNT =\r\n            (rs, i) -&gt; new Account(rs.getLong(&quot;ID&quot;),\r\n                                   rs.getString(&quot;NAME&quot;));\r\n\r\nYou may now use this mapper directly within a method to map `Account` domain objects from a query (`jt` is a `JdbcTemplate` instance).\r\n\r\n    public List&lt;Account&gt; getAccounts() {\r\n        return jt.query(SELECT_ACCOUNT, MAPPER_ACCOUNT);\r\n    }\r\n\r\nGreat, but now we want our original problem and we use my original solution reusing the [`RowMapper`][5] to perform the mapping for us.\r\n\r\n    public Account getAccount(long id) {\r\n        return jt.query(\r\n                SELECT_ACCOUNT,\r\n                rs -&gt; rs.next() ? MAPPER_ACCOUNT.mapRow(rs, 1) : null,\r\n                id);\r\n    }\r\n\r\nGreat, but this is a pattern you may and will wish to repeat. So you can create a generic factory method to create a new [`ResultSetExtractor`][1] for the task.\r\n\r\n    public static &lt;T&gt; ResultSetExtractor singletonExtractor(\r\n            RowMapper&lt;? extends T&gt; mapper) {\r\n        return rs -&gt; rs.next() ? mapper.mapRow(rs, 1) : null;\r\n    }\r\n\r\nCreating a [`ResultSetExtractor`][1] now becomes trivial.\r\n\r\n    private static final ResultSetExtractor&lt;Account&gt; EXTRACTOR_ACCOUNT =\r\n            singletonExtractor(MAPPER_ACCOUNT);\r\n\r\n    public Account getAccount(long id) {\r\n        return jt.query(SELECT_ACCOUNT, EXTRACTOR_ACCOUNT, id);\r\n    }\r\n\r\nI hope this helps to show that you can now quite easily combine parts in a powerful way to make your domain simpler.\r\n\r\n**UPDATE 2**: Combine with an [Optional&lt;T&gt;][6] for optional values instead of null.\r\n\r\n    public static &lt;T&gt; ResultSetExtractor&lt;Optional&lt;T&gt;&gt; singletonOptionalExtractor(\r\n            RowMapper&lt;? extends T&gt; mapper) {\r\n        return rs -&gt; rs.next() ? Optional.of(mapper.mapRow(rs, 1)) : Optional.empty();\r\n    }\r\n\r\nWhich now when used could have the following:\r\n\r\n    private static final ResultSetExtractor&lt;Optional&lt;Double&gt;&gt; EXTRACTOR_DISCOUNT =\r\n            singletonOptionalExtractor(MAPPER_DISCOUNT);\r\n\r\n    public double getDiscount(long accountId) {\r\n        return jt.query(SELECT_DISCOUNT, EXTRACTOR_DISCOUNT, accountId)\r\n                .orElse(0.0);\r\n    }\r\n\r\n\r\n\r\n  [1]: http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/jdbc/core/ResultSetExtractor.html\r\n  [2]: http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/jdbc/core/RowMapper.html\r\n  [3]: https://docs.oracle.com/javase/8/docs/api/java/sql/ResultSet.html#next--\r\n  [4]: http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/jdbc/core/JdbcTemplate.html\r\n  [5]: http://[%60RowMapper%60][2]\r\n  [6]: https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html","title":"Jdbctemplate query for string: EmptyResultDataAccessException: Incorrect result size: expected 1, actual 0","body":"<p>You may also use a <a href=\"http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/jdbc/core/ResultSetExtractor.html\" rel=\"noreferrer\"><code>ResultSetExtractor</code></a> instead of a <a href=\"http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/jdbc/core/RowMapper.html\" rel=\"noreferrer\"><code>RowMapper</code></a>. Both are just as easy as one another, the only difference is you call <a href=\"https://docs.oracle.com/javase/8/docs/api/java/sql/ResultSet.html#next--\" rel=\"noreferrer\"><code>ResultSet.next()</code></a>.</p>\n\n<pre><code>public String test() {\n    String sql = \"select ID_NMB_SRZ from codb_owner.TR_LTM_SLS_RTN \"\n                 + \" where id_str_rt = '999' and ID_NMB_SRZ = '60230009999999'\";\n    return jdbc.query(sql, new ResultSetExtractor&lt;String&gt;() {\n        @Override\n        public String extractData(ResultSet rs) throws SQLException,\n                                                       DataAccessException {\n            return rs.next() ? rs.getString(\"ID_NMB_SRZ\") : null;\n        }\n    });\n}\n</code></pre>\n\n<p>The <a href=\"http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/jdbc/core/ResultSetExtractor.html\" rel=\"noreferrer\"><code>ResultSetExtractor</code></a> has the added benefit that you can handle all cases where there are more than one row or no rows returned.</p>\n\n<p><strong>UPDATE</strong>: Several years on and I have a few tricks to share. <a href=\"http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/jdbc/core/JdbcTemplate.html\" rel=\"noreferrer\"><code>JdbcTemplate</code></a> works superbly with java 8 lambdas which the following examples are designed for but you can quite easily use a static class to achieve the same.</p>\n\n<p>While the question is about simple types, these examples serve as a guide for the common case of extracting domain objects.</p>\n\n<p>First off. Let's suppose that you have an account object with two properties for simplicity <code>Account(Long id, String name)</code>. You would likely wish to have a <code>RowMapper</code> for this domain object.</p>\n\n<pre><code>private static final RowMapper&lt;Account&gt; MAPPER_ACCOUNT =\n        (rs, i) -&gt; new Account(rs.getLong(\"ID\"),\n                               rs.getString(\"NAME\"));\n</code></pre>\n\n<p>You may now use this mapper directly within a method to map <code>Account</code> domain objects from a query (<code>jt</code> is a <code>JdbcTemplate</code> instance).</p>\n\n<pre><code>public List&lt;Account&gt; getAccounts() {\n    return jt.query(SELECT_ACCOUNT, MAPPER_ACCOUNT);\n}\n</code></pre>\n\n<p>Great, but now we want our original problem and we use my original solution reusing the <a href=\"http://[%60RowMapper%60][2]\" rel=\"noreferrer\"><code>RowMapper</code></a> to perform the mapping for us.</p>\n\n<pre><code>public Account getAccount(long id) {\n    return jt.query(\n            SELECT_ACCOUNT,\n            rs -&gt; rs.next() ? MAPPER_ACCOUNT.mapRow(rs, 1) : null,\n            id);\n}\n</code></pre>\n\n<p>Great, but this is a pattern you may and will wish to repeat. So you can create a generic factory method to create a new <a href=\"http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/jdbc/core/ResultSetExtractor.html\" rel=\"noreferrer\"><code>ResultSetExtractor</code></a> for the task.</p>\n\n<pre><code>public static &lt;T&gt; ResultSetExtractor singletonExtractor(\n        RowMapper&lt;? extends T&gt; mapper) {\n    return rs -&gt; rs.next() ? mapper.mapRow(rs, 1) : null;\n}\n</code></pre>\n\n<p>Creating a <a href=\"http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/jdbc/core/ResultSetExtractor.html\" rel=\"noreferrer\"><code>ResultSetExtractor</code></a> now becomes trivial.</p>\n\n<pre><code>private static final ResultSetExtractor&lt;Account&gt; EXTRACTOR_ACCOUNT =\n        singletonExtractor(MAPPER_ACCOUNT);\n\npublic Account getAccount(long id) {\n    return jt.query(SELECT_ACCOUNT, EXTRACTOR_ACCOUNT, id);\n}\n</code></pre>\n\n<p>I hope this helps to show that you can now quite easily combine parts in a powerful way to make your domain simpler.</p>\n\n<p><strong>UPDATE 2</strong>: Combine with an <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html\" rel=\"noreferrer\">Optional</a> for optional values instead of null.</p>\n\n<pre><code>public static &lt;T&gt; ResultSetExtractor&lt;Optional&lt;T&gt;&gt; singletonOptionalExtractor(\n        RowMapper&lt;? extends T&gt; mapper) {\n    return rs -&gt; rs.next() ? Optional.of(mapper.mapRow(rs, 1)) : Optional.empty();\n}\n</code></pre>\n\n<p>Which now when used could have the following:</p>\n\n<pre><code>private static final ResultSetExtractor&lt;Optional&lt;Double&gt;&gt; EXTRACTOR_DISCOUNT =\n        singletonOptionalExtractor(MAPPER_DISCOUNT);\n\npublic double getDiscount(long accountId) {\n    return jt.query(SELECT_DISCOUNT, EXTRACTOR_DISCOUNT, accountId)\n            .orElse(0.0);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2222173,"reputation":126,"user_id":1961316,"display_name":"Alex"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1373620531,"creation_date":1373619246,"answer_id":17611061,"question_id":10606229,"body_markdown":"Actually, You can play with `JdbcTemplate` and customize your own method as you prefer. My suggestion is to make something like this:\r\n\r\n    public String test() {\r\n        String cert = null;\r\n        String sql = &quot;select ID_NMB_SRZ from codb_owner.TR_LTM_SLS_RTN\r\n            where id_str_rt = &#39;999&#39; and ID_NMB_SRZ = &#39;60230009999999&#39;&quot;;\r\n        ArrayList&lt;String&gt; certList = (ArrayList&lt;String&gt;) jdbc.query(\r\n            sql, new RowMapperResultSetExtractor(new UserMapper()));\r\n        cert =  DataAccessUtils.singleResult(certList);\r\n        \r\n        return cert;\r\n    }\r\n\r\nIt works as the original `jdbc.queryForObject`, but without `throw new EmptyResultDataAccessException` when `size == 0`.  ","title":"Jdbctemplate query for string: EmptyResultDataAccessException: Incorrect result size: expected 1, actual 0","body":"<p>Actually, You can play with <code>JdbcTemplate</code> and customize your own method as you prefer. My suggestion is to make something like this:</p>\n\n<pre><code>public String test() {\n    String cert = null;\n    String sql = \"select ID_NMB_SRZ from codb_owner.TR_LTM_SLS_RTN\n        where id_str_rt = '999' and ID_NMB_SRZ = '60230009999999'\";\n    ArrayList&lt;String&gt; certList = (ArrayList&lt;String&gt;) jdbc.query(\n        sql, new RowMapperResultSetExtractor(new UserMapper()));\n    cert =  DataAccessUtils.singleResult(certList);\n\n    return cert;\n}\n</code></pre>\n\n<p>It works as the original <code>jdbc.queryForObject</code>, but without <code>throw new EmptyResultDataAccessException</code> when <code>size == 0</code>.  </p>\n"},{"tags":[],"owner":{"account_id":2587731,"reputation":1446,"user_id":2243033,"display_name":"Stewart Evans"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1393307176,"creation_date":1393307176,"answer_id":22005648,"question_id":10606229,"body_markdown":"Since returning a null when there is no data is something I want to do often when using queryForObject I have found it useful to extend JdbcTemplate and add a queryForNullableObject method similar to below.\r\n\r\n    public class JdbcTemplateExtended extends JdbcTemplate {\r\n\r\n        public JdbcTemplateExtended(DataSource datasource){\r\n            super(datasource);\r\n        }\r\n\r\n        public &lt;T&gt; T queryForNullableObject(String sql, RowMapper&lt;T&gt; rowMapper) throws DataAccessException {\r\n            List&lt;T&gt; results = query(sql, rowMapper);\r\n\r\n            if (results == null || results.isEmpty()) {\r\n                return null;\r\n            }\r\n            else if (results.size() &gt; 1) {\r\n                throw new IncorrectResultSizeDataAccessException(1, results.size());\r\n            }\r\n            else{\r\n                return results.iterator().next();\r\n            }\r\n        }\r\n\r\n        public &lt;T&gt; T queryForNullableObject(String sql, Class&lt;T&gt; requiredType) throws DataAccessException {\r\n            return queryForObject(sql, getSingleColumnRowMapper(requiredType));\r\n        }\r\n\r\n    }\r\n\r\nYou can now use this in your code the same way you used queryForObject\r\n\r\n    String result = queryForNullableObject(queryString, String.class);\r\n\r\nI would be interested to know if anyone else thinks this is a good idea?","title":"Jdbctemplate query for string: EmptyResultDataAccessException: Incorrect result size: expected 1, actual 0","body":"<p>Since returning a null when there is no data is something I want to do often when using queryForObject I have found it useful to extend JdbcTemplate and add a queryForNullableObject method similar to below.</p>\n\n<pre><code>public class JdbcTemplateExtended extends JdbcTemplate {\n\n    public JdbcTemplateExtended(DataSource datasource){\n        super(datasource);\n    }\n\n    public &lt;T&gt; T queryForNullableObject(String sql, RowMapper&lt;T&gt; rowMapper) throws DataAccessException {\n        List&lt;T&gt; results = query(sql, rowMapper);\n\n        if (results == null || results.isEmpty()) {\n            return null;\n        }\n        else if (results.size() &gt; 1) {\n            throw new IncorrectResultSizeDataAccessException(1, results.size());\n        }\n        else{\n            return results.iterator().next();\n        }\n    }\n\n    public &lt;T&gt; T queryForNullableObject(String sql, Class&lt;T&gt; requiredType) throws DataAccessException {\n        return queryForObject(sql, getSingleColumnRowMapper(requiredType));\n    }\n\n}\n</code></pre>\n\n<p>You can now use this in your code the same way you used queryForObject</p>\n\n<pre><code>String result = queryForNullableObject(queryString, String.class);\n</code></pre>\n\n<p>I would be interested to know if anyone else thinks this is a good idea?</p>\n"},{"tags":[],"owner":{"account_id":141800,"reputation":609,"user_id":349091,"accept_rate":17,"display_name":"grbonk"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1395772082,"creation_date":1395772082,"answer_id":22643285,"question_id":10606229,"body_markdown":"I dealt with this before &amp; had posted in the spring forums.  \r\n\r\nhttp://forum.spring.io/forum/spring-projects/data/123129-frustrated-with-emptyresultdataaccessexception\r\n\r\nThe advice we received was to use a type of SQlQuery.  Here&#39;s an example of what we did when trying to get a value out of a DB that might not be there.\r\n\r\n    @Component\r\n    public class FindID extends MappingSqlQuery&lt;Long&gt; {\r\n     \r\n            @Autowired\r\n            public void setDataSource(DataSource dataSource) {\r\n     \r\n                    String sql = &quot;Select id from address where id = ?&quot;;\r\n     \r\n                    super.setDataSource(dataSource);\r\n     \r\n                    super.declareParameter(new SqlParameter(Types.VARCHAR));\r\n     \r\n                    super.setSql(sql);\r\n     \r\n                    compile();\r\n            }\r\n     \r\n            @Override\r\n            protected Long mapRow(ResultSet rs, int rowNum) throws SQLException {\r\n                    return rs.getLong(1);\r\n            }\r\n\r\n \r\nIn the DAO then we just call...\r\n\r\n    Long id = findID.findObject(id);\r\n\r\nNot clear on performance, but it works and is neat.","title":"Jdbctemplate query for string: EmptyResultDataAccessException: Incorrect result size: expected 1, actual 0","body":"<p>I dealt with this before &amp; had posted in the spring forums.  </p>\n\n<p><a href=\"http://forum.spring.io/forum/spring-projects/data/123129-frustrated-with-emptyresultdataaccessexception\" rel=\"nofollow\">http://forum.spring.io/forum/spring-projects/data/123129-frustrated-with-emptyresultdataaccessexception</a></p>\n\n<p>The advice we received was to use a type of SQlQuery.  Here's an example of what we did when trying to get a value out of a DB that might not be there.</p>\n\n<pre><code>@Component\npublic class FindID extends MappingSqlQuery&lt;Long&gt; {\n\n        @Autowired\n        public void setDataSource(DataSource dataSource) {\n\n                String sql = \"Select id from address where id = ?\";\n\n                super.setDataSource(dataSource);\n\n                super.declareParameter(new SqlParameter(Types.VARCHAR));\n\n                super.setSql(sql);\n\n                compile();\n        }\n\n        @Override\n        protected Long mapRow(ResultSet rs, int rowNum) throws SQLException {\n                return rs.getLong(1);\n        }\n</code></pre>\n\n<p>In the DAO then we just call...</p>\n\n<pre><code>Long id = findID.findObject(id);\n</code></pre>\n\n<p>Not clear on performance, but it works and is neat.</p>\n"},{"tags":[],"owner":{"account_id":3042335,"reputation":119,"user_id":2579014,"display_name":"Mahesh Jayachandran"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1440966864,"creation_date":1400648500,"answer_id":23774316,"question_id":10606229,"body_markdown":"Since getJdbcTemplate().queryForMap expects minimum size of one but when it returns null it shows EmptyResultDataAccesso fix dis when can use below logic\r\n\r\n    Map&lt;String, String&gt; loginMap =null;\r\n    try{\r\n    \tloginMap = getJdbcTemplate().queryForMap(sql, new Object[] {CustomerLogInInfo.getCustLogInEmail()});\r\n    }\r\n    catch(EmptyResultDataAccessException ex){\r\n    \tSystem.out.println(&quot;Exception.......&quot;);\r\n    \tloginMap =null;\r\n    }\r\n    if(loginMap==null || loginMap.isEmpty()){\r\n    \treturn null;\r\n    }\r\n    else{\r\n    \treturn loginMap;\r\n    }","title":"Jdbctemplate query for string: EmptyResultDataAccessException: Incorrect result size: expected 1, actual 0","body":"<p>Since getJdbcTemplate().queryForMap expects minimum size of one but when it returns null it shows EmptyResultDataAccesso fix dis when can use below logic</p>\n\n<pre><code>Map&lt;String, String&gt; loginMap =null;\ntry{\n    loginMap = getJdbcTemplate().queryForMap(sql, new Object[] {CustomerLogInInfo.getCustLogInEmail()});\n}\ncatch(EmptyResultDataAccessException ex){\n    System.out.println(\"Exception.......\");\n    loginMap =null;\n}\nif(loginMap==null || loginMap.isEmpty()){\n    return null;\n}\nelse{\n    return loginMap;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":376644,"reputation":895,"user_id":728232,"display_name":"Rich"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1404535390,"creation_date":1404535390,"answer_id":24583049,"question_id":10606229,"body_markdown":"In Postgres, you can make almost any single value query return a value or null by wrapping it:\r\n\r\n    SELECT (SELECT &lt;query&gt;) AS value\r\n\r\nand hence avoid complexity in the caller.\r\n","title":"Jdbctemplate query for string: EmptyResultDataAccessException: Incorrect result size: expected 1, actual 0","body":"<p>In Postgres, you can make almost any single value query return a value or null by wrapping it:</p>\n\n<pre><code>SELECT (SELECT &lt;query&gt;) AS value\n</code></pre>\n\n<p>and hence avoid complexity in the caller.</p>\n"},{"tags":[],"owner":{"account_id":6060942,"reputation":11,"user_id":4732683,"display_name":"Mohan Kumar Dg"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1438924737,"creation_date":1438924737,"answer_id":31870201,"question_id":10606229,"body_markdown":" For Byron, you can try this..\r\n\r\n    public String test(){\r\n                \tString sql = &quot;select ID_NMB_SRZ from codb_owner.TR_LTM_SLS_RTN \r\n                         where id_str_rt = &#39;999&#39; and ID_NMB_SRZ = &#39;60230009999999&#39;&quot;;\r\n                \tList&lt;String&gt; li = jdbcTemplate.queryForList(sql,String.class);\r\n                \treturn li.get(0).toString();\r\n            }\r\n\r\n","title":"Jdbctemplate query for string: EmptyResultDataAccessException: Incorrect result size: expected 1, actual 0","body":"<p>For Byron, you can try this..</p>\n\n<pre><code>public String test(){\n                String sql = \"select ID_NMB_SRZ from codb_owner.TR_LTM_SLS_RTN \n                     where id_str_rt = '999' and ID_NMB_SRZ = '60230009999999'\";\n                List&lt;String&gt; li = jdbcTemplate.queryForList(sql,String.class);\n                return li.get(0).toString();\n        }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":175796,"reputation":557,"user_id":406065,"accept_rate":40,"display_name":"Dmitry"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1439991914,"creation_date":1439991914,"answer_id":32097340,"question_id":10606229,"body_markdown":"to make \r\n\r\n        jdbcTemplate.queryForList(sql, String.class)\r\n\r\nwork, make sure your jdbcTemplate is of type \r\n    \r\n        org.springframework.jdbc.core.JdbcTemplate","title":"Jdbctemplate query for string: EmptyResultDataAccessException: Incorrect result size: expected 1, actual 0","body":"<p>to make </p>\n\n<pre><code>    jdbcTemplate.queryForList(sql, String.class)\n</code></pre>\n\n<p>work, make sure your jdbcTemplate is of type </p>\n\n<pre><code>    org.springframework.jdbc.core.JdbcTemplate\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3454239,"reputation":3653,"user_id":2893073,"accept_rate":67,"display_name":"Eddy"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1479303550,"creation_date":1479303550,"answer_id":40633609,"question_id":10606229,"body_markdown":"I just catch this &quot;EmptyResultDataAccessException&quot;&lt;br/&gt;\r\n\r\n    public Myclass findOne(String id){\r\n        try {\r\n            Myclass m = this.jdbcTemplate.queryForObject(\r\n                    &quot;SELECT * FROM tb_t WHERE id = ?&quot;,\r\n                    new Object[]{id},\r\n                    new RowMapper&lt;Myclass&gt;() {\r\n                        public Myclass mapRow(ResultSet rs, int rowNum) throws SQLException {\r\n                            Myclass m = new Myclass();\r\n                            m.setName(rs.getString(&quot;name&quot;));\r\n                            return m;\r\n                        }\r\n                    });\r\n            return m;\r\n        } catch (EmptyResultDataAccessException e) { // result.size() == 0;\r\n            return null;\r\n        }\r\n    }\r\n\r\nthen you can check: \r\n\r\n    if(m == null){\r\n        // insert operation.\r\n    }else{\r\n        // update operation.\r\n    }","title":"Jdbctemplate query for string: EmptyResultDataAccessException: Incorrect result size: expected 1, actual 0","body":"<p>I just catch this \"EmptyResultDataAccessException\"<br/></p>\n\n<pre><code>public Myclass findOne(String id){\n    try {\n        Myclass m = this.jdbcTemplate.queryForObject(\n                \"SELECT * FROM tb_t WHERE id = ?\",\n                new Object[]{id},\n                new RowMapper&lt;Myclass&gt;() {\n                    public Myclass mapRow(ResultSet rs, int rowNum) throws SQLException {\n                        Myclass m = new Myclass();\n                        m.setName(rs.getString(\"name\"));\n                        return m;\n                    }\n                });\n        return m;\n    } catch (EmptyResultDataAccessException e) { // result.size() == 0;\n        return null;\n    }\n}\n</code></pre>\n\n<p>then you can check: </p>\n\n<pre><code>if(m == null){\n    // insert operation.\n}else{\n    // update operation.\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9959452,"reputation":2037,"user_id":7369238,"display_name":"ABHAY JOHRI"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1510039592,"creation_date":1510039592,"answer_id":47152165,"question_id":10606229,"body_markdown":"We can use query instead of queryForObject,  major difference between query and queryForObject is that query return list of Object(based on Row mapper return type) and that list can be empty if no data is received from database while queryForObject always expect only single object be fetched from db neither null nor multiple rows and in case if result is empty then queryForObject throws EmptyResultDataAccessException, I had written one code using query that will overcome the problem of EmptyResultDataAccessException in case of null result.\r\n\r\n\r\n&gt;     ----------\r\n&gt;     \r\n&gt;     \r\n&gt;     public UserInfo getUserInfo(String username, String password) {\r\n&gt;     \t\tString sql = &quot;SELECT firstname, lastname,address,city FROM users WHERE id=? and pass=?&quot;;\r\n&gt;     \t\tList&lt;UserInfo&gt; userInfoList = jdbcTemplate.query(sql, new Object[] { username, password },\r\n&gt;     \t\t\t\tnew RowMapper&lt;UserInfo&gt;() {\r\n&gt;     \t\t\t\t\tpublic UserInfo mapRow(ResultSet rs, int rowNum) throws SQLException {\r\n&gt;     \t\t\t\t\t\tUserInfo user = new UserInfo();\r\n&gt;     \t\t\t\t\t\tuser.setFirstName(rs.getString(&quot;firstname&quot;));\r\n&gt;     \t\t\t\t\t\tuser.setLastName(rs.getString(&quot;lastname&quot;));\r\n&gt;     \t\t\t\t\t\tuser.setAddress(rs.getString(&quot;address&quot;));\r\n&gt;     \t\t\t\t\t\tuser.setCity(rs.getString(&quot;city&quot;));\r\n&gt;     \r\n&gt;     \t\t\t\t\t\treturn user;\r\n&gt;     \t\t\t\t\t}\r\n&gt;     \t\t\t\t});\r\n&gt;     \r\n&gt;     \t\tif (userInfoList.isEmpty()) {\r\n&gt;     \t\t\treturn null;\r\n&gt;     \t\t} else {\r\n&gt;     \t\t\treturn userInfoList.get(0);\r\n&gt;     \t\t}\r\n&gt;     \t}","title":"Jdbctemplate query for string: EmptyResultDataAccessException: Incorrect result size: expected 1, actual 0","body":"<p>We can use query instead of queryForObject,  major difference between query and queryForObject is that query return list of Object(based on Row mapper return type) and that list can be empty if no data is received from database while queryForObject always expect only single object be fetched from db neither null nor multiple rows and in case if result is empty then queryForObject throws EmptyResultDataAccessException, I had written one code using query that will overcome the problem of EmptyResultDataAccessException in case of null result.</p>\n\n<blockquote>\n<pre><code>----------\n\n\npublic UserInfo getUserInfo(String username, String password) {\n      String sql = \"SELECT firstname, lastname,address,city FROM users WHERE id=? and pass=?\";\n      List&lt;UserInfo&gt; userInfoList = jdbcTemplate.query(sql, new Object[] { username, password },\n              new RowMapper&lt;UserInfo&gt;() {\n                  public UserInfo mapRow(ResultSet rs, int rowNum) throws SQLException {\n                      UserInfo user = new UserInfo();\n                      user.setFirstName(rs.getString(\"firstname\"));\n                      user.setLastName(rs.getString(\"lastname\"));\n                      user.setAddress(rs.getString(\"address\"));\n                      user.setCity(rs.getString(\"city\"));\n\n                      return user;\n                  }\n              });\n\n      if (userInfoList.isEmpty()) {\n          return null;\n      } else {\n          return userInfoList.get(0);\n      }\n  }\n</code></pre>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":13389989,"reputation":10689,"user_id":9662601,"display_name":"Samuel Philipp"},"down_vote_count":1,"up_vote_count":10,"is_accepted":false,"score":9,"last_activity_date":1566843770,"creation_date":1566843770,"answer_id":57663002,"question_id":10606229,"body_markdown":"Using Java 8 or above you can use an [`Optional`](https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html) and Java Streams.\r\n\r\nSo you can simply use the `JdbcTemplate.queryForList()` method, create a Stream and use [`Stream.findFirst()`](https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#findFirst--) which will return the first value of the Stream or an empty `Optional`:\r\n\r\n    public Optional&lt;String&gt; test() {\r\n        String sql = &quot;select ID_NMB_SRZ from codb_owner.TR_LTM_SLS_RTN where id_str_rt = &#39;999&#39; and ID_NMB_SRZ = &#39;60230009999999&#39;&quot;;\r\n        return jdbc.queryForList(sql, String.class)\r\n                .stream().findFirst();\r\n    }\r\n\r\nTo improve the performance of the query you can append `LIMIT 1` to your query, so not more than 1 item is transferred from the database.","title":"Jdbctemplate query for string: EmptyResultDataAccessException: Incorrect result size: expected 1, actual 0","body":"<p>Using Java 8 or above you can use an <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html\" rel=\"noreferrer\"><code>Optional</code></a> and Java Streams.</p>\n\n<p>So you can simply use the <code>JdbcTemplate.queryForList()</code> method, create a Stream and use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#findFirst--\" rel=\"noreferrer\"><code>Stream.findFirst()</code></a> which will return the first value of the Stream or an empty <code>Optional</code>:</p>\n\n<pre><code>public Optional&lt;String&gt; test() {\n    String sql = \"select ID_NMB_SRZ from codb_owner.TR_LTM_SLS_RTN where id_str_rt = '999' and ID_NMB_SRZ = '60230009999999'\";\n    return jdbc.queryForList(sql, String.class)\n            .stream().findFirst();\n}\n</code></pre>\n\n<p>To improve the performance of the query you can append <code>LIMIT 1</code> to your query, so not more than 1 item is transferred from the database.</p>\n"},{"tags":[],"owner":{"account_id":171134,"reputation":3434,"user_id":398348,"accept_rate":67,"display_name":"likejudo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1579636555,"creation_date":1579630439,"answer_id":59846947,"question_id":10606229,"body_markdown":"IMHO returning a `null` is a bad solution because now you have the problem of sending and interpreting it at the (likely) front end client.\r\nI had the same error and I solved it by simply returning a `List&lt;FooObject&gt;`.\r\nI used `JDBCTemplate.query()`.\r\n\r\nAt the front end (Angular web client), I simply examine the list and if it is empty (of zero length), treat it as no records found.","title":"Jdbctemplate query for string: EmptyResultDataAccessException: Incorrect result size: expected 1, actual 0","body":"<p>IMHO returning a <code>null</code> is a bad solution because now you have the problem of sending and interpreting it at the (likely) front end client.\nI had the same error and I solved it by simply returning a <code>List&lt;FooObject&gt;</code>.\nI used <code>JDBCTemplate.query()</code>.</p>\n\n<p>At the front end (Angular web client), I simply examine the list and if it is empty (of zero length), treat it as no records found.</p>\n"},{"tags":[],"owner":{"account_id":2054137,"reputation":580,"user_id":1832387,"display_name":"Anton Yuriev"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1600763594,"creation_date":1600763594,"answer_id":64005938,"question_id":10606229,"body_markdown":"You can do this way:\r\n\r\n\r\n    String cert = DataAccessUtils.singleResult(\r\n        jdbcTemplate.queryForList(\r\n            &quot;select ID_NMB_SRZ from codb_owner.TR_LTM_SLS_RTN where ID_STR_RT = :id_str_rt and ID_NMB_SRZ = :id_nmb_srz&quot;,\r\n            new MapSqlParameterSource()\r\n                .addValue(&quot;id_str_rt&quot;, &quot;999&quot;)\r\n                .addValue(&quot;id_nmb_srz&quot;, &quot;60230009999999&quot;),\r\n            String.class\r\n        )\r\n    )\r\n\r\n\r\n**DataAccessUtils.singleResult** + **queryForList**:\r\n- returns null for empty result\r\n- returns single result if exactly 1 row found\r\n- throws exception if more then 1 rows found. Should not happen for primary key / unique index search\r\n\r\n[DataAccessUtils.singleResult][1]\r\n\r\n\r\n  [1]: https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/dao/support/DataAccessUtils.html#singleResult-java.util.Collection-","title":"Jdbctemplate query for string: EmptyResultDataAccessException: Incorrect result size: expected 1, actual 0","body":"<p>You can do this way:</p>\n<pre><code>String cert = DataAccessUtils.singleResult(\n    jdbcTemplate.queryForList(\n        &quot;select ID_NMB_SRZ from codb_owner.TR_LTM_SLS_RTN where ID_STR_RT = :id_str_rt and ID_NMB_SRZ = :id_nmb_srz&quot;,\n        new MapSqlParameterSource()\n            .addValue(&quot;id_str_rt&quot;, &quot;999&quot;)\n            .addValue(&quot;id_nmb_srz&quot;, &quot;60230009999999&quot;),\n        String.class\n    )\n)\n</code></pre>\n<p><strong>DataAccessUtils.singleResult</strong> + <strong>queryForList</strong>:</p>\n<ul>\n<li>returns null for empty result</li>\n<li>returns single result if exactly 1 row found</li>\n<li>throws exception if more then 1 rows found. Should not happen for primary key / unique index search</li>\n</ul>\n<p><a href=\"https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/dao/support/DataAccessUtils.html#singleResult-java.util.Collection-\" rel=\"noreferrer\">DataAccessUtils.singleResult</a></p>\n"},{"tags":[],"owner":{"account_id":6010289,"reputation":876,"user_id":4720950,"display_name":"Parameshwar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1617292329,"creation_date":1617292329,"answer_id":66907789,"question_id":10606229,"body_markdown":"I got same exception while using \r\n\r\n    if(jdbcTemplate.queryForMap(&quot;select * from table&quot;).size() &gt; 0 ) /* resulted exception */ \r\n\r\nwhen changed to list it resolved\r\n\r\n    if(jdbcTemplate.queryForList(&quot;select * from table&quot;).size() &gt; 0) /* no exception */\r\n\r\n\r\n\r\n  ","title":"Jdbctemplate query for string: EmptyResultDataAccessException: Incorrect result size: expected 1, actual 0","body":"<p>I got same exception while using</p>\n<pre><code>if(jdbcTemplate.queryForMap(&quot;select * from table&quot;).size() &gt; 0 ) /* resulted exception */ \n</code></pre>\n<p>when changed to list it resolved</p>\n<pre><code>if(jdbcTemplate.queryForList(&quot;select * from table&quot;).size() &gt; 0) /* no exception */\n</code></pre>\n"}],"owner":{"account_id":266102,"reputation":3853,"user_id":553486,"accept_rate":80,"display_name":"Byron"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":324019,"favorite_count":0,"down_vote_count":0,"up_vote_count":129,"accepted_answer_id":10612703,"answer_count":18,"score":129,"last_activity_date":1671254835,"creation_date":1337104557,"question_id":10606229,"body_markdown":"I am using Jdbctemplate to retrieve a single String value from the db.  Here is my method.\r\n\r\n\t\r\n\r\n        public String test() {\r\n        \tString cert=null;\r\n        \tString sql = &quot;select ID_NMB_SRZ from codb_owner.TR_LTM_SLS_RTN \r\n                 where id_str_rt = &#39;999&#39; and ID_NMB_SRZ = &#39;60230009999999&#39;&quot;;\r\n        \tcert = (String) jdbc.queryForObject(sql, String.class); \r\n       \t\treturn cert;\r\n       \t}\r\n\r\nIn my scenario it is complete possible to NOT get a hit on my query so my question is how do I get around the following error message.\r\n\r\n    EmptyResultDataAccessException: Incorrect result size: expected 1, actual 0\r\n\r\nIt would seem to me that I should just get back a null instead of throwing an exception.  How can I fix this?","title":"Jdbctemplate query for string: EmptyResultDataAccessException: Incorrect result size: expected 1, actual 0","body":"<p>I am using Jdbctemplate to retrieve a single String value from the db.  Here is my method.</p>\n<pre><code>    public String test() {\n        String cert=null;\n        String sql = &quot;select ID_NMB_SRZ from codb_owner.TR_LTM_SLS_RTN \n             where id_str_rt = '999' and ID_NMB_SRZ = '60230009999999'&quot;;\n        cert = (String) jdbc.queryForObject(sql, String.class); \n        return cert;\n    }\n</code></pre>\n<p>In my scenario it is complete possible to NOT get a hit on my query so my question is how do I get around the following error message.</p>\n<pre><code>EmptyResultDataAccessException: Incorrect result size: expected 1, actual 0\n</code></pre>\n<p>It would seem to me that I should just get back a null instead of throwing an exception.  How can I fix this?</p>\n"},{"tags":["java","json"],"comments":[{"owner":{"account_id":15237737,"reputation":484,"user_id":10994912,"display_name":"George R"},"score":0,"creation_date":1671255675,"post_id":74831744,"comment_id":132065006,"body_markdown":"what happens if use js_ActualFixMessage.get instead of getString?","body":"what happens if use js_ActualFixMessage.get instead of getString?"}],"owner":{"account_id":26233332,"reputation":1,"user_id":19908884,"display_name":"Vipin"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":73,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671254349,"creation_date":1671250408,"question_id":74831744,"body_markdown":"I have Array of JSON and wanted to print value of tag 20029 as TEST but getting value as [TEST] in array. I just need a string value.\r\n\r\n\r\n&gt; [{&quot;FixJson&quot;:{&quot;11&quot;:&quot;1734&quot;,&quot;12&quot;:&quot;REPOFIXUAT&quot;,&quot;13&quot;:&quot;20140402-11:38:34&quot;,&quot;14&quot;:&quot;TR_VENDOR&quot;,&quot;15&quot;:&quot;8&quot;,&quot;16&quot;:&quot;GBP&quot;,&quot;17&quot;:&quot;Price&quot;,&quot;20029&quot;:&quot;TEST&quot;,&quot;8&quot;:&quot;FIXT.1.1&quot;,&quot;9&quot;:&quot;449&quot;,&quot;10&quot;:&quot;AE&quot;}}]\r\n\r\nCode:\r\n\r\n    public void fixtoJSON() throws SerializeException, JsonProcessingException, ParseException {\r\n    \t    \r\n    \t\tList&lt;HashMap&lt;String,Object&gt;&gt; list = new ArrayList&lt;HashMap&lt;String, Object&gt;&gt;();\r\n    \t\tmap = new HashMap&lt;String, Object&gt;();\r\n    \t\tmap1 = new HashMap&lt;String,Object&gt;();\r\n    \t\t\r\n    \t\tresult = fixmessage.split(&quot;\\\\|&quot;);\r\n    \t\t\r\n        \t// iterate the result and add them to a HashMap \r\n            for (String fixoutcome : result) { \r\n            \t\r\n                String[] fix1 = fixoutcome.split(&quot;=&quot;); \r\n                //System.out.println(&quot; this is fix1 &quot;+fix1);\r\n                \r\n                String key = fix1[0].trim().toString(); \r\n                String value = fix1[1].trim().toString(); \r\n                map.put(key, value);\r\n                \r\n               \r\n            }\r\n    \t        map1.put(&quot;FixJson&quot;, map);\r\n    \t   \t \tlist.add(map1);\r\n            \t \r\n                ObjectMapper mapper = new ObjectMapper();\r\n                jsonstring =  mapper.writeValueAsString(list);\r\n                                      \r\n                js_ActualFixMessage = new JsonPath(jsonstring);\r\n                \r\n                System.out.println(js_ActualFixMessage.getString(&quot;FixJson.20029&quot;));\r\n\r\nExpected Outcome \r\n`TEST`\r\n\r\nBut getting as `[TEST]`\r\n\r\nany help please !\r\n","title":"print json array value as string using java","body":"<p>I have Array of JSON and wanted to print value of tag 20029 as TEST but getting value as [TEST] in array. I just need a string value.</p>\n<blockquote>\n<p>[{&quot;FixJson&quot;:{&quot;11&quot;:&quot;1734&quot;,&quot;12&quot;:&quot;REPOFIXUAT&quot;,&quot;13&quot;:&quot;20140402-11:38:34&quot;,&quot;14&quot;:&quot;TR_VENDOR&quot;,&quot;15&quot;:&quot;8&quot;,&quot;16&quot;:&quot;GBP&quot;,&quot;17&quot;:&quot;Price&quot;,&quot;20029&quot;:&quot;TEST&quot;,&quot;8&quot;:&quot;FIXT.1.1&quot;,&quot;9&quot;:&quot;449&quot;,&quot;10&quot;:&quot;AE&quot;}}]</p>\n</blockquote>\n<p>Code:</p>\n<pre><code>public void fixtoJSON() throws SerializeException, JsonProcessingException, ParseException {\n        \n        List&lt;HashMap&lt;String,Object&gt;&gt; list = new ArrayList&lt;HashMap&lt;String, Object&gt;&gt;();\n        map = new HashMap&lt;String, Object&gt;();\n        map1 = new HashMap&lt;String,Object&gt;();\n        \n        result = fixmessage.split(&quot;\\\\|&quot;);\n        \n        // iterate the result and add them to a HashMap \n        for (String fixoutcome : result) { \n            \n            String[] fix1 = fixoutcome.split(&quot;=&quot;); \n            //System.out.println(&quot; this is fix1 &quot;+fix1);\n            \n            String key = fix1[0].trim().toString(); \n            String value = fix1[1].trim().toString(); \n            map.put(key, value);\n            \n           \n        }\n            map1.put(&quot;FixJson&quot;, map);\n            list.add(map1);\n             \n            ObjectMapper mapper = new ObjectMapper();\n            jsonstring =  mapper.writeValueAsString(list);\n                                  \n            js_ActualFixMessage = new JsonPath(jsonstring);\n            \n            System.out.println(js_ActualFixMessage.getString(&quot;FixJson.20029&quot;));\n</code></pre>\n<p>Expected Outcome\n<code>TEST</code></p>\n<p>But getting as <code>[TEST]</code></p>\n<p>any help please !</p>\n"},{"tags":["java","cdi","maven-dependency"],"comments":[{"owner":{"account_id":5660163,"reputation":12260,"user_id":4478047,"display_name":"Kukeltje"},"score":0,"creation_date":1587374452,"post_id":61316069,"comment_id":108476574,"body_markdown":"Out of curiosity, what did you try in search engines? And the javaee-api should have it, so most likely you have other problems.","body":"Out of curiosity, what did you try in search engines? And the javaee-api should have it, so most likely you have other problems."},{"owner":{"account_id":4904476,"reputation":4812,"user_id":3951576,"accept_rate":50,"display_name":"eastwater"},"score":0,"creation_date":1587422046,"post_id":61316069,"comment_id":108501455,"body_markdown":"&#39;javax.inject:javax.inject:1&#39; is required to resolve @Inject. If it is removed, compiler error.","body":"&#39;javax.inject:javax.inject:1&#39; is required to resolve @Inject. If it is removed, compiler error."}],"answers":[{"tags":[],"owner":{"account_id":6325048,"reputation":3074,"user_id":4911775,"display_name":"CodeScale"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1587363563,"creation_date":1587363563,"answer_id":61316207,"question_id":61316069,"body_markdown":"You can configure CDI in standalone mode by using `Weld` reference implementation.\r\n\r\nExample:\r\n\r\n```java\r\nWeld weld = new Weld();\r\nWeldContainer container = weld.initialize();\r\nFooProcessor fooProcessor = container.instance().select(FooProcessor.class).get();\r\nweld.shutdown();\r\n```\r\nand weld dependency\r\n\r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.jboss.weld.se&lt;/groupId&gt;\r\n    &lt;artifactId&gt;weld-se-core&lt;/artifactId&gt;\r\n    &lt;version&gt;3.1.4.Final&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nRegarding `@Inject` it coming from \r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;javax.inject&lt;/groupId&gt;\r\n    &lt;artifactId&gt;javax.inject&lt;/artifactId&gt;\r\n    &lt;version&gt;1&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\nand this coming from `JSR 330: Dependency Injection For Java` that introduces a standard set of annotations that can be used for dependency injection.\r\n\r\n","title":"Java SE CDI maven dependencies?","body":"<p>You can configure CDI in standalone mode by using <code>Weld</code> reference implementation.</p>\n\n<p>Example:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>Weld weld = new Weld();\nWeldContainer container = weld.initialize();\nFooProcessor fooProcessor = container.instance().select(FooProcessor.class).get();\nweld.shutdown();\n</code></pre>\n\n<p>and weld dependency</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.jboss.weld.se&lt;/groupId&gt;\n    &lt;artifactId&gt;weld-se-core&lt;/artifactId&gt;\n    &lt;version&gt;3.1.4.Final&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>Regarding <code>@Inject</code> it coming from </p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;javax.inject&lt;/groupId&gt;\n    &lt;artifactId&gt;javax.inject&lt;/artifactId&gt;\n    &lt;version&gt;1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>and this coming from <code>JSR 330: Dependency Injection For Java</code> that introduces a standard set of annotations that can be used for dependency injection.</p>\n"},{"tags":[],"owner":{"account_id":2253730,"reputation":51,"user_id":1985403,"display_name":"KDV"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671252529,"creation_date":1671252223,"answer_id":74831854,"question_id":61316069,"body_markdown":"nowadays the annotation(s) mostly can come from &#39;javax.inject&#39; and &#39;jakarta.inject&#39; packages.\r\n\r\nwhen starting sample within e.g. Weld 5.1.0 it is &#39;jakarta.inject&#39;, bundled into Weld itself\r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.jboss.weld.se&lt;/groupId&gt;\r\n    &lt;artifactId&gt;weld-se-shaded&lt;/artifactId&gt;\r\n    &lt;version&gt;5.1.0.Final&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\nalso you NEED your class to be annotated with e.g. &#39;@ApplicationScoped&#39; - to be recognized by Weld as Weld-managed bean, and you NEED beans.xml\r\n(can set only &#39;bean-discovery-mode&#39; value and define no beans, btw):\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;beans xmlns=&quot;http://xmlns.jcp.org/xml/ns/javaee&quot; bean-discovery-mode=&quot;annotated&quot;/&gt;\r\n```\r\n... in /META-INF of your classpath for Weld to init successfully.\r\n\r\nthis is enough to make the sample take off. you can optionally add\r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;io.smallrye&lt;/groupId&gt;\r\n    &lt;artifactId&gt;jandex&lt;/artifactId&gt;\r\n    &lt;version&gt;3.0.5&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n... for your Weld to start up (a little) faster.\r\n\r\np.s. and forget about ```@Inject static Logger log``` with Weld - even if strongly used in SE context, Weld(5.1.0) DOESN&#39;T support it.","title":"Java SE CDI maven dependencies?","body":"<p>nowadays the annotation(s) mostly can come from 'javax.inject' and 'jakarta.inject' packages.</p>\n<p>when starting sample within e.g. Weld 5.1.0 it is 'jakarta.inject', bundled into Weld itself</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.jboss.weld.se&lt;/groupId&gt;\n    &lt;artifactId&gt;weld-se-shaded&lt;/artifactId&gt;\n    &lt;version&gt;5.1.0.Final&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>also you NEED your class to be annotated with e.g. '@ApplicationScoped' - to be recognized by Weld as Weld-managed bean, and you NEED beans.xml\n(can set only 'bean-discovery-mode' value and define no beans, btw):</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;beans xmlns=&quot;http://xmlns.jcp.org/xml/ns/javaee&quot; bean-discovery-mode=&quot;annotated&quot;/&gt;\n</code></pre>\n<p>... in /META-INF of your classpath for Weld to init successfully.</p>\n<p>this is enough to make the sample take off. you can optionally add</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;io.smallrye&lt;/groupId&gt;\n    &lt;artifactId&gt;jandex&lt;/artifactId&gt;\n    &lt;version&gt;3.0.5&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>... for your Weld to start up (a little) faster.</p>\n<p>p.s. and forget about <code>@Inject static Logger log</code> with Weld - even if strongly used in SE context, Weld(5.1.0) DOESN'T support it.</p>\n"}],"owner":{"account_id":4904476,"reputation":4812,"user_id":3951576,"accept_rate":50,"display_name":"eastwater"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":958,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":61316207,"answer_count":2,"score":0,"last_activity_date":1671252529,"creation_date":1587362845,"question_id":61316069,"body_markdown":"Java SE CDI maven dependencies?\r\n\r\n    public class FooProcessor {\r\n    \t\r\n    \tprivate FooService fooService;\r\n    \t\r\n    \t@Inject\r\n    \tpublic FooProcessor(FooService fooService) {\r\n    \t\tthis.fooService = fooService;\r\n    \t}\r\n    }\r\n\r\nWhat are the jar dependencies for CDI for Java SE?\r\n\r\nWhich jar dependency has @Inject? Tried \r\n\r\n\r\n    compile &quot;org.jboss.weld.se:weld-se-core:3.0.2.Final&quot;\r\n    compile &#39;org.apache.deltaspike.cdictrl:deltaspike-cdictrl-api&#39;\r\n    compile group: &#39;javax.enterprise&#39;, name: &#39;cdi-api&#39;, version: &#39;2.0.SP1&#39;\r\n    compile group: &#39;javax&#39;, name: &#39;javaee-api&#39;, version: &#39;7.0&#39;","title":"Java SE CDI maven dependencies?","body":"<p>Java SE CDI maven dependencies?</p>\n\n<pre><code>public class FooProcessor {\n\n    private FooService fooService;\n\n    @Inject\n    public FooProcessor(FooService fooService) {\n        this.fooService = fooService;\n    }\n}\n</code></pre>\n\n<p>What are the jar dependencies for CDI for Java SE?</p>\n\n<p>Which jar dependency has @Inject? Tried </p>\n\n<pre><code>compile \"org.jboss.weld.se:weld-se-core:3.0.2.Final\"\ncompile 'org.apache.deltaspike.cdictrl:deltaspike-cdictrl-api'\ncompile group: 'javax.enterprise', name: 'cdi-api', version: '2.0.SP1'\ncompile group: 'javax', name: 'javaee-api', version: '7.0'\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-webflux","lombok"],"answers":[{"tags":[],"owner":{"account_id":6710900,"reputation":1617,"user_id":5174385,"display_name":"Ankit Rai"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1624133161,"creation_date":1624133161,"answer_id":68050350,"question_id":68049222,"body_markdown":"This is not because of Lombok. Spring injects dependencies when they exist within the application context. Spring will create instances only when they are annotated with Spring stereotypes or are created via `@Bean` annotation or are part of Auto-Configuration. The `Webclient` instance needs to exist within the application context to be injected. \r\n\r\nTo inject `WebClient` you can create the same as below in your configuration class.\r\n\r\n```\r\n@Configuration\r\npublic class Config {\r\n\r\n    @Bean\r\n    public WebClient webClient(){\r\n        return WebClient.builder().build();\r\n    }\r\n}\r\n```\r\n\r\n\r\n","title":"Can Lombok&#39;s @RequiredArgsConstructor initialize a Spring-Webflux WebClient?","body":"<p>This is not because of Lombok. Spring injects dependencies when they exist within the application context. Spring will create instances only when they are annotated with Spring stereotypes or are created via <code>@Bean</code> annotation or are part of Auto-Configuration. The <code>Webclient</code> instance needs to exist within the application context to be injected.</p>\n<p>To inject <code>WebClient</code> you can create the same as below in your configuration class.</p>\n<pre><code>@Configuration\npublic class Config {\n\n    @Bean\n    public WebClient webClient(){\n        return WebClient.builder().build();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":428762,"reputation":1481,"user_id":811293,"accept_rate":30,"display_name":"joseluisbz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671252417,"creation_date":1671252417,"answer_id":74831863,"question_id":68049222,"body_markdown":"for me, previous response wasn&#39;t working, but is base for my response.\r\n\r\n\r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.web.reactive.function.client.WebClient;\r\n    \r\n    @Configuration\r\n    public class WebClientConfiguration {\r\n        \r\n        @Bean\r\n        public WebClient webClient(WebClient.Builder webClientBuilder){\r\n            return webClientBuilder.build();\r\n        }\r\n    }","title":"Can Lombok&#39;s @RequiredArgsConstructor initialize a Spring-Webflux WebClient?","body":"<p>for me, previous response wasn't working, but is base for my response.</p>\n<pre><code>import org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.web.reactive.function.client.WebClient;\n\n@Configuration\npublic class WebClientConfiguration {\n    \n    @Bean\n    public WebClient webClient(WebClient.Builder webClientBuilder){\n        return webClientBuilder.build();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":15424529,"reputation":474,"user_id":11127623,"display_name":"Guilty"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1362,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":68050350,"answer_count":2,"score":0,"last_activity_date":1671252417,"creation_date":1624123397,"question_id":68049222,"body_markdown":"I have a controller class with a `private final WebClient webClient`.\r\nWhile the rest of the private final fields can be initialized with the @RequiredArgsConstructor provided by Lombok. A Spring-Webflux WebClient object seems to only be able to be initialized like this: `this.webClient = WebClientBuilder.build()` and thus the lombok generated constructor doesn&#39;t work.  \r\nIs there a way around this?\r\n\r\nSample code:\r\n```\r\n@RequiredArgsConstructor\r\n@Controller\r\npublic class SomeController {\r\n  private final SomeService someService;\r\n\r\n  private final SomeConfig someConfig;\r\n\r\n  private final SomeOtherConfig someOtherConfig;\r\n\r\n  private final WebClient webClient;\r\n\r\n  // etc.\r\n}\r\n```","title":"Can Lombok&#39;s @RequiredArgsConstructor initialize a Spring-Webflux WebClient?","body":"<p>I have a controller class with a <code>private final WebClient webClient</code>.\nWhile the rest of the private final fields can be initialized with the @RequiredArgsConstructor provided by Lombok. A Spring-Webflux WebClient object seems to only be able to be initialized like this: <code>this.webClient = WebClientBuilder.build()</code> and thus the lombok generated constructor doesn't work.<br />\nIs there a way around this?</p>\n<p>Sample code:</p>\n<pre><code>@RequiredArgsConstructor\n@Controller\npublic class SomeController {\n  private final SomeService someService;\n\n  private final SomeConfig someConfig;\n\n  private final SomeOtherConfig someOtherConfig;\n\n  private final WebClient webClient;\n\n  // etc.\n}\n</code></pre>\n"},{"tags":["java","android","kotlin","p2p","wifi-direct"],"comments":[{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1671221401,"post_id":74828523,"comment_id":132060513,"body_markdown":"Being a receiver or sender does not depend on being group owner or not. Both can send an receive. They can communicate. So i do not understand why you would change groupowner or else. Well just my thoughts.","body":"Being a receiver or sender does not depend on being group owner or not. Both can send an receive. They can communicate. So i do not understand why you would change groupowner or else. Well just my thoughts."},{"owner":{"account_id":27275499,"reputation":11,"user_id":20796190,"display_name":"Bebikananda Waikhom"},"score":0,"creation_date":1671250938,"post_id":74828523,"comment_id":132064584,"body_markdown":"I was following this documentation (https://developer.android.com/training/connect-devices-wirelessly/wifi-direct). Here, files are transferred by using Socket.\n\nAfter the device connection, only the group owner&#39;s address is available on both devices, so I make that a receiver so that the sender can create a Socket object and send the files to that address.\n\nI have added a few more codes, please check. And if you know of any other approach I can follow, please let me know.","body":"I was following this documentation (<a href=\"https://developer.android.com/training/connect-devices-wirelessly/wifi-direct\" rel=\"nofollow noreferrer\">developer.android.com/training/connect-devices-wirelessly/&hellip;</a>&zwnj;&#8203;). Here, files are transferred by using Socket.  After the device connection, only the group owner&#39;s address is available on both devices, so I make that a receiver so that the sender can create a Socket object and send the files to that address.  I have added a few more codes, please check. And if you know of any other approach I can follow, please let me know."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":1,"creation_date":1671261867,"post_id":74828523,"comment_id":132065652,"body_markdown":"A server socket can send and receive data. A client socket can send and receive data. Dont say: i make that one a receiver as both socket types can send and receive. You only can say: i make that one the server and that one the client.","body":"A server socket can send and receive data. A client socket can send and receive data. Dont say: i make that one a receiver as both socket types can send and receive. You only can say: i make that one the server and that one the client."},{"owner":{"account_id":27275499,"reputation":11,"user_id":20796190,"display_name":"Bebikananda Waikhom"},"score":1,"creation_date":1671305665,"post_id":74828523,"comment_id":132072751,"body_markdown":"Right. I wasn&#39;t aware of this. I thought one has to be the sender and the other one has to be the receiver. I&#39;m able to fix it now. Thanks for the help &#128522;.","body":"Right. I wasn&#39;t aware of this. I thought one has to be the sender and the other one has to be the receiver. I&#39;m able to fix it now. Thanks for the help 😊."},{"owner":{"account_id":3243794,"reputation":4776,"user_id":2736039,"accept_rate":93,"display_name":"Ultimo_m"},"score":0,"creation_date":1673625698,"post_id":74828523,"comment_id":132548426,"body_markdown":"I dont know what you want to achieve, but even if you solve it, wi-fi direct is not stable across different android devices, I would suggest using Wi-Fi hotspot or Wi-Fi router, keep in mind android devices have a limit on how many devices can connect to their hotspot at same time","body":"I dont know what you want to achieve, but even if you solve it, wi-fi direct is not stable across different android devices, I would suggest using Wi-Fi hotspot or Wi-Fi router, keep in mind android devices have a limit on how many devices can connect to their hotspot at same time"}],"owner":{"account_id":27275499,"reputation":11,"user_id":20796190,"display_name":"Bebikananda Waikhom"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":217,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1671250907,"creation_date":1671215689,"question_id":74828523,"body_markdown":"I am developing an Android app to share files using Wi-Fi Direct. The app works, but I am unable to switch between being a sender and a receiver without closing the app. When I try to switch roles, the group owner is not updated and remains the same as the previous transfer. How can I update the group owner and switch roles correctly?\r\n\r\nI do disconnect and reinitialize after every file transfer session. But it doesn&#39;t create a new group.\r\n\r\nHere is my initialization code:\r\n\r\n\r\n```\r\nmanager = getSystemService(Context.WIFI_P2P_SERVICE) as WifiP2pManager?\r\nchannel = manager?.initialize(this, mainLooper, null)?.also {\r\n     receiver = P2pBroadcastReceiver(this)\r\n}\r\n\r\n```\r\n\r\nAnd here is the code for connecting to a peer and switching roles:\r\n\r\n\r\n```\r\nfun connectToPeer(device: WifiP2pDevice, isSender: Boolean) {\r\n    val config = WifiP2pConfig().apply {\r\n        deviceAddress = device.deviceAddress\r\n        groupOwnerIntent = if (isSender) WifiP2pConfig.GROUP_OWNER_INTENT_MIN else WifiP2pConfig.GROUP_OWNER_INTENT_MAX\r\n    }\r\n        \r\n    channel?.also { channel -&gt;\r\n        manager?.connect(channel, config, object : WifiP2pManager.ActionListener {\r\n            override fun onSuccess() {\r\n                context.apply {\r\n                    toast(&quot;${getString(R.string.connecting_to)} ${device.deviceName}&quot;)\r\n                }\r\n            }\r\n\r\n            override fun onFailure(reasonCode: Int) = onP2POperationFailed(reasonCode)\r\n        })\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\nAnd here is the code for disconnecting from the group:\r\n\r\n\r\n```\r\nfun disconnect() {\r\n    manager?.apply {\r\n        cancelConnect(channel, null)\r\n        removeGroup(channel, null)\r\n        stopPeerDiscovery(channel, null)\r\n        deletePersistentGroups()\r\n    }\r\n    try {\r\n        if (::serverSocket.isInitialized) serverSocket.close()\r\n        if (::clientSocket.isInitialized) clientSocket.close()\r\n    } catch (e: IOException) {}\r\n}\r\n\r\nprivate fun deletePersistentGroups() {\r\n    try {\r\n        val methods = WifiP2pManager::class.java.methods\r\n        for (method in methods) {\r\n            if (method.name == &quot;deletePersistentGroup&quot;) {\r\n                for (networkId in 0..31) {\r\n                    method.invoke(manager, channel, networkId, null)\r\n                }\r\n            }\r\n        }\r\n    } catch (e: Exception) {}\r\n}\r\n\r\n```\r\n\r\nAny help would be greatly appreciated. Thank you!\r\n\r\nI would like for devices d1 and d2 to have the ability to switch roles without closing the app. Currently, d1 is set up to receive files and d2 is set up to send them. However, if d1 needs to send files without closing the app after d2 has finished sending its files, I would like for them to be able to easily reestablish the connection and initiate the transfer.\r\n\r\n**Edit 2:**\r\n\r\nHow I initiate the file transferring or sending process:\r\n\r\n```\r\nprivate fun onConnectionInfoChanged(info: WifiP2pInfo?) {\r\n    if (isDeviceConnected) {\r\n        if (info!!.isGroupOwner) { // receiver || server || group owner\r\n            startReceiverServer()\r\n        } else { // sender || client\r\n            startSenderClient(info.groupOwnerAddress)\r\n        }\r\n    }\r\n}\r\n\r\nprivate fun startReceiverServer() {\r\n    runOnBg {\r\n        serverSocket = ServerSocket(P2pFileTransferHelper.PORT)\r\n        P2pFileTransferHelper.receiveFiles(serverSocket, context.contentResolver) { fileTransferInfoLiveData.postValue(it) }\r\n    }\r\n}\r\n\r\nprivate fun startSenderClient(serverAddress: InetAddress) {\r\n    runOnBg {\r\n        clientSocket = Socket()\r\n        P2pFileTransferHelper.sendFiles(clientSocket, serverAddress, selectedFilePaths) { fileTransferInfoLiveData.postValue(it) }\r\n    }\r\n}\r\n```","title":"Switching between sender and receiver in Android Wi-Fi Direct app","body":"<p>I am developing an Android app to share files using Wi-Fi Direct. The app works, but I am unable to switch between being a sender and a receiver without closing the app. When I try to switch roles, the group owner is not updated and remains the same as the previous transfer. How can I update the group owner and switch roles correctly?</p>\n<p>I do disconnect and reinitialize after every file transfer session. But it doesn't create a new group.</p>\n<p>Here is my initialization code:</p>\n<pre><code>manager = getSystemService(Context.WIFI_P2P_SERVICE) as WifiP2pManager?\nchannel = manager?.initialize(this, mainLooper, null)?.also {\n     receiver = P2pBroadcastReceiver(this)\n}\n\n</code></pre>\n<p>And here is the code for connecting to a peer and switching roles:</p>\n<pre><code>fun connectToPeer(device: WifiP2pDevice, isSender: Boolean) {\n    val config = WifiP2pConfig().apply {\n        deviceAddress = device.deviceAddress\n        groupOwnerIntent = if (isSender) WifiP2pConfig.GROUP_OWNER_INTENT_MIN else WifiP2pConfig.GROUP_OWNER_INTENT_MAX\n    }\n        \n    channel?.also { channel -&gt;\n        manager?.connect(channel, config, object : WifiP2pManager.ActionListener {\n            override fun onSuccess() {\n                context.apply {\n                    toast(&quot;${getString(R.string.connecting_to)} ${device.deviceName}&quot;)\n                }\n            }\n\n            override fun onFailure(reasonCode: Int) = onP2POperationFailed(reasonCode)\n        })\n    }\n}\n\n</code></pre>\n<p>And here is the code for disconnecting from the group:</p>\n<pre><code>fun disconnect() {\n    manager?.apply {\n        cancelConnect(channel, null)\n        removeGroup(channel, null)\n        stopPeerDiscovery(channel, null)\n        deletePersistentGroups()\n    }\n    try {\n        if (::serverSocket.isInitialized) serverSocket.close()\n        if (::clientSocket.isInitialized) clientSocket.close()\n    } catch (e: IOException) {}\n}\n\nprivate fun deletePersistentGroups() {\n    try {\n        val methods = WifiP2pManager::class.java.methods\n        for (method in methods) {\n            if (method.name == &quot;deletePersistentGroup&quot;) {\n                for (networkId in 0..31) {\n                    method.invoke(manager, channel, networkId, null)\n                }\n            }\n        }\n    } catch (e: Exception) {}\n}\n\n</code></pre>\n<p>Any help would be greatly appreciated. Thank you!</p>\n<p>I would like for devices d1 and d2 to have the ability to switch roles without closing the app. Currently, d1 is set up to receive files and d2 is set up to send them. However, if d1 needs to send files without closing the app after d2 has finished sending its files, I would like for them to be able to easily reestablish the connection and initiate the transfer.</p>\n<p><strong>Edit 2:</strong></p>\n<p>How I initiate the file transferring or sending process:</p>\n<pre><code>private fun onConnectionInfoChanged(info: WifiP2pInfo?) {\n    if (isDeviceConnected) {\n        if (info!!.isGroupOwner) { // receiver || server || group owner\n            startReceiverServer()\n        } else { // sender || client\n            startSenderClient(info.groupOwnerAddress)\n        }\n    }\n}\n\nprivate fun startReceiverServer() {\n    runOnBg {\n        serverSocket = ServerSocket(P2pFileTransferHelper.PORT)\n        P2pFileTransferHelper.receiveFiles(serverSocket, context.contentResolver) { fileTransferInfoLiveData.postValue(it) }\n    }\n}\n\nprivate fun startSenderClient(serverAddress: InetAddress) {\n    runOnBg {\n        clientSocket = Socket()\n        P2pFileTransferHelper.sendFiles(clientSocket, serverAddress, selectedFilePaths) { fileTransferInfoLiveData.postValue(it) }\n    }\n}\n</code></pre>\n"},{"tags":["java","performance","sorting","testing"],"answers":[{"tags":[],"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1590533316,"creation_date":1590533149,"answer_id":62032609,"question_id":62032327,"body_markdown":"Using a loop is brute-force, and challenges like this cannot be done with brute-force.\r\n\r\nWhich means you have to **calculate** the result. Challenges like this are more often a *math* question more than a *programming* question, so put you math hat on.\r\n\r\nSo think about it. In a range of integers, *calculate* how many are divisible by K. If I asked you to do this manually *(using a simple calculator is allowed)*, without using a computer to brute-force it, how would you doing it? E.g. find how many integers between `111` and `999` that are divisible by `13`\r\n\r\n*Hint*\r\n\r\nFind the first number in the range that is divisible by K, and the last number in the range that is divisible by K. For the example above, that would be `117` and `988`.\r\n\r\nNow calculate how many integers are divisible by K from first to last integer, remembering to count both of them. So, how many integers between `117` and `988` are divisible by `13`?\r\n\r\n&gt;! Answer: (988 - 117) / 13 + 1 = 871 / 13 + 1 = 67 + 1 = **68**","title":"Performance issue with CountDiv (Codility) challenge algorithm","body":"<p>Using a loop is brute-force, and challenges like this cannot be done with brute-force.</p>\n\n<p>Which means you have to <strong>calculate</strong> the result. Challenges like this are more often a <em>math</em> question more than a <em>programming</em> question, so put you math hat on.</p>\n\n<p>So think about it. In a range of integers, <em>calculate</em> how many are divisible by K. If I asked you to do this manually <em>(using a simple calculator is allowed)</em>, without using a computer to brute-force it, how would you doing it? E.g. find how many integers between <code>111</code> and <code>999</code> that are divisible by <code>13</code></p>\n\n<p><em>Hint</em></p>\n\n<p>Find the first number in the range that is divisible by K, and the last number in the range that is divisible by K. For the example above, that would be <code>117</code> and <code>988</code>.</p>\n\n<p>Now calculate how many integers are divisible by K from first to last integer, remembering to count both of them. So, how many integers between <code>117</code> and <code>988</code> are divisible by <code>13</code>?</p>\n\n<blockquote class=\"spoiler\">\n  <p> Answer: (988 - 117) / 13 + 1 = 871 / 13 + 1 = 67 + 1 = <strong>68</strong></p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1590594246,"creation_date":1590591089,"answer_id":62046069,"question_id":62032327,"body_markdown":"One possibility is to take advantage of integer arithmetic to get rid of some edge cases.  Sometimes `A` and `B` are both, neither, or one or the other is divisible by `k`.  And just subtracting them won&#39;t really help solve the problem. So one solution is to divide each by `k` before subtracting them.\r\n\r\nSay `k = 7, A = 12, and B = 54`.\r\n`54/7 - 12/7 = 7 - 1 = 6  (14,21,28,35,42,49)`\r\n\r\nBut what if `A` was `14`?\r\n\r\n`54/7 - 14/7 = 7 - 2 = 5  (14,21,28,35,42,49)`  The answer is one off. So when `A` is divisible by `k`, `1` needs to be added.\r\n\r\nWhat if `A` and `B` are both divisible by `k`?\r\n\r\n`56/7 - 14/7 = 8 - 2 = 6 = (14,21,28,34,42,49,56)`.  The answer is again, one off, so the special case of `A` being divisible by `k` takes care of it by adding `1`\r\n\r\n```\r\nint result = (B/k - A/k) + ((A%k == 0) ? 1 : 0);\r\n\r\n","title":"Performance issue with CountDiv (Codility) challenge algorithm","body":"<p>One possibility is to take advantage of integer arithmetic to get rid of some edge cases.  Sometimes <code>A</code> and <code>B</code> are both, neither, or one or the other is divisible by <code>k</code>.  And just subtracting them won't really help solve the problem. So one solution is to divide each by <code>k</code> before subtracting them.</p>\n\n<p>Say <code>k = 7, A = 12, and B = 54</code>.\n<code>54/7 - 12/7 = 7 - 1 = 6  (14,21,28,35,42,49)</code></p>\n\n<p>But what if <code>A</code> was <code>14</code>?</p>\n\n<p><code>54/7 - 14/7 = 7 - 2 = 5  (14,21,28,35,42,49)</code>  The answer is one off. So when <code>A</code> is divisible by <code>k</code>, <code>1</code> needs to be added.</p>\n\n<p>What if <code>A</code> and <code>B</code> are both divisible by <code>k</code>?</p>\n\n<p><code>56/7 - 14/7 = 8 - 2 = 6 = (14,21,28,34,42,49,56)</code>.  The answer is again, one off, so the special case of <code>A</code> being divisible by <code>k</code> takes care of it by adding <code>1</code></p>\n\n<pre><code>int result = (B/k - A/k) + ((A%k == 0) ? 1 : 0);\n\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4234641,"reputation":613,"user_id":3466155,"display_name":"Karl Hoaglund"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637598366,"creation_date":1637598027,"answer_id":70069040,"question_id":62032327,"body_markdown":"My C# solution, based on @Andreas&#39; brilliant one.  This eventually got me to 100%.  Most surprising (and perhaps wrong?) is that [0, 0, 11] needs to produce a result of 1, meaning that 0 is considered divisible by 11.  You&#39;ll see I had to comment out an error catcher to allow B to be zero and get me to the &quot;expected&quot; answer.  I was surprised that (0-0)/11 didn&#39;t produce a runtime error, but it didn&#39;t.\r\n\r\n        public int solutionCountDiv4(int A, int B, int K)\r\n        {\r\n            //Errors\r\n            if (K == 0)\r\n                return 0;\r\n\r\n            //if (B == 0)\r\n            //    return 0;\r\n\r\n            if (A &gt; B)\r\n                return 0;\r\n\r\n            var first = 0;\r\n            var last = 0;\r\n\r\n            for (first = A; first &lt;= B; first++)\r\n            {\r\n                if (first % K == 0)\r\n                    break;\r\n            }\r\n            for (last = B; last &gt;= A; last--)\r\n            {\r\n                if (last % K == 0)\r\n                    break;\r\n            }\r\n\r\n            if (first &gt; last)\r\n                return 0;\r\n\r\n            var result = (last - first) / K + 1;\r\n            return result;\r\n        }\r\n\r\n\r\n\r\n  ","title":"Performance issue with CountDiv (Codility) challenge algorithm","body":"<p>My C# solution, based on @Andreas' brilliant one.  This eventually got me to 100%.  Most surprising (and perhaps wrong?) is that [0, 0, 11] needs to produce a result of 1, meaning that 0 is considered divisible by 11.  You'll see I had to comment out an error catcher to allow B to be zero and get me to the &quot;expected&quot; answer.  I was surprised that (0-0)/11 didn't produce a runtime error, but it didn't.</p>\n<pre><code>    public int solutionCountDiv4(int A, int B, int K)\n    {\n        //Errors\n        if (K == 0)\n            return 0;\n\n        //if (B == 0)\n        //    return 0;\n\n        if (A &gt; B)\n            return 0;\n\n        var first = 0;\n        var last = 0;\n\n        for (first = A; first &lt;= B; first++)\n        {\n            if (first % K == 0)\n                break;\n        }\n        for (last = B; last &gt;= A; last--)\n        {\n            if (last % K == 0)\n                break;\n        }\n\n        if (first &gt; last)\n            return 0;\n\n        var result = (last - first) / K + 1;\n        return result;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10528983,"reputation":1,"user_id":7759044,"display_name":"TGA"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671250422,"creation_date":1671250422,"answer_id":74831747,"question_id":62032327,"body_markdown":"Small correction to @[Ersin&#39;s solution][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/72296476/7759044\r\n\r\n    int solution(int A, int B, int K)\r\n    {\r\n      auto result =  B / K - (A - 1) / K;\r\n      if (A == 0 and K &gt; 1)\r\n        result++;\r\n      return result;\r\n    }","title":"Performance issue with CountDiv (Codility) challenge algorithm","body":"<p>Small correction to @<a href=\"https://stackoverflow.com/a/72296476/7759044\">Ersin's solution</a></p>\n<pre><code>int solution(int A, int B, int K)\n{\n  auto result =  B / K - (A - 1) / K;\n  if (A == 0 and K &gt; 1)\n    result++;\n  return result;\n}\n</code></pre>\n"}],"owner":{"account_id":18001860,"reputation":293,"user_id":13499542,"display_name":"Gabriel Pulga"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1068,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"accepted_answer_id":62032609,"answer_count":4,"score":2,"last_activity_date":1671250422,"creation_date":1590531497,"question_id":62032327,"body_markdown":"Needing some help with the algorithm i made to solve this codility challenge :\r\n\r\n*Write a function that, given three integers A, B and K, returns the number of integers within the range [A..B] that are divisible by K. \r\nFor example, for A = 6, B = 11 and K = 2, your function should return 3, because there are three numbers divisible by 2 within the range [6..11], namely 6, 8 and 10.   \r\nA and B are integers within the range [0..2,000,000,000];\r\nK is an integer within the range [1..2,000,000,000];\r\nA ≤ B.*\r\n \r\n\r\n    public class Solution {\r\n            public int solution(int A, int B, int K) {\r\n        \r\n                int counter = 0;\r\n                ArrayList&lt;Integer&gt; listOfNumbersInBetween = new ArrayList&lt;&gt;();\r\n        \r\n                for (int i = A; i &lt;= B; i++) {\r\n                    listOfNumbersInBetween.add(i);\r\n                }\r\n        \r\n                for (int arrayElement : listOfNumbersInBetween) {\r\n                    if (arrayElement % K == 0) {\r\n                        counter++;\r\n                    }\r\n                }\r\n        \r\n                return counter;\r\n        \r\n            }}\r\n\r\nAs you can see, my solution works perfectly but performance wise it&#39;s scoring 0% due to the time complexity O(B-A).\r\n\r\nHow can i improve this code to make it score 100%?","title":"Performance issue with CountDiv (Codility) challenge algorithm","body":"<p>Needing some help with the algorithm i made to solve this codility challenge :</p>\n\n<p><em>Write a function that, given three integers A, B and K, returns the number of integers within the range [A..B] that are divisible by K. \nFor example, for A = 6, B = 11 and K = 2, your function should return 3, because there are three numbers divisible by 2 within the range [6..11], namely 6, 8 and 10.<br>\nA and B are integers within the range [0..2,000,000,000];\nK is an integer within the range [1..2,000,000,000];\nA ≤ B.</em></p>\n\n<pre><code>public class Solution {\n        public int solution(int A, int B, int K) {\n\n            int counter = 0;\n            ArrayList&lt;Integer&gt; listOfNumbersInBetween = new ArrayList&lt;&gt;();\n\n            for (int i = A; i &lt;= B; i++) {\n                listOfNumbersInBetween.add(i);\n            }\n\n            for (int arrayElement : listOfNumbersInBetween) {\n                if (arrayElement % K == 0) {\n                    counter++;\n                }\n            }\n\n            return counter;\n\n        }}\n</code></pre>\n\n<p>As you can see, my solution works perfectly but performance wise it's scoring 0% due to the time complexity O(B-A).</p>\n\n<p>How can i improve this code to make it score 100%?</p>\n"},{"tags":["java","string","algorithm","time-complexity","big-o"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1671232372,"post_id":74830541,"comment_id":132062764,"body_markdown":"Do you mean O(1) when the time taken to preprocess the string is amortized over many `freq` operations?","body":"Do you mean O(1) when the time taken to preprocess the string is amortized over many <code>freq</code> operations?"},{"owner":{"account_id":27277160,"reputation":31,"user_id":20797589,"display_name":"R0bin_0"},"score":0,"creation_date":1671232457,"post_id":74830541,"comment_id":132062774,"body_markdown":"@tgdavies that is correct.","body":"@tgdavies that is correct."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":2,"creation_date":1671233035,"post_id":74830541,"comment_id":132062856,"body_markdown":"Pretend we&#39;re only interested in &#39;c&#39;. Make an array with the count of the times &#39;c&#39; appears *after* this position, i.e. 2,2,1,1,0. Then the string from 1 to 4 contains 2 - 0 &#39;c&#39;s, and the string from 0 to 2 contains 2 - 1 &#39;c&#39;s.","body":"Pretend we&#39;re only interested in &#39;c&#39;. Make an array with the count of the times &#39;c&#39; appears <i>after</i> this position, i.e. 2,2,1,1,0. Then the string from 1 to 4 contains 2 - 0 &#39;c&#39;s, and the string from 0 to 2 contains 2 - 1 &#39;c&#39;s."},{"owner":{"account_id":27277160,"reputation":31,"user_id":20797589,"display_name":"R0bin_0"},"score":0,"creation_date":1671233369,"post_id":74830541,"comment_id":132062905,"body_markdown":"@tgdavies can you elaborate what you mean by &quot;after this position&quot;.","body":"@tgdavies can you elaborate what you mean by &quot;after this position&quot;."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1671236837,"post_id":74830541,"comment_id":132063377,"body_markdown":"for each index in the string, traverse the remainder of the string and count the number of times &#39;c&#39; appears.","body":"for each index in the string, traverse the remainder of the string and count the number of times &#39;c&#39; appears."}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1671234740,"creation_date":1671234353,"answer_id":74830806,"question_id":74830541,"body_markdown":"First, convert your input string into a map that maps characters onto a __sorted__ list of indices. For example:\r\n\r\n```\r\nString input = &quot;abcnc&quot;;\r\nvar store = new HashMap&lt;Character, TreeSet&lt;Integer&gt;&gt;();\r\nfor (int i = 0; i &lt; input.length(); i++) {\r\n  store.computeIfAbsent(input.charAt(i), k -&gt; new TreeSet&lt;Integer&gt;()).add(i);\r\n}\r\n\r\nSystem.out.println(store);\r\n```\r\n\r\nThis makes: `{a=[0], b=[1], c=[2, 4], n=[3]}`\r\n\r\nAnd the cost for making this thing can be written off as &#39;preprocessing&#39;, but if it matters, O(nlogn).\r\n\r\nArmed with `store`, you can do the job in `O(log n)` time. For example, if I want to know how many `c`s are in the 3-5 range, I for ask for the TreeSet match c (getting me the `[2, 4]` treeset). Then I can use treeset&#39;s headSet and tailSet methods to figure it out, which are each O(logn) operations.\r\n\r\nThis gives me a total runtime of `O(logn)` which is as near to `O(1)` as makes it irrelevant (in the sense that practical concerns about how modern computer architecture works will dwarf this). If an interviewer does not accept that answer, the are either needlessly pedantic or wildly misguided about how modern computers work, so now we delve into a purely academic exercise to knock it down to an `O(1)`.\r\n\r\n## O(1)\r\n\r\ninstead of mapping the character to a TreeSet&lt;Integer&gt;, we instead map it to an `int[]`. This int array is as large as the entire input (so in this case, the 4 int[] arrays for keys &#39;a&#39;, &#39;b&#39;, &#39;c&#39;, and &#39;n&#39; are all 5 large because the input is 5 large). This int array answers the question: If you asked me for the answer from THIS position to the end of the string, what is the correct answer? So, for c it would be: [2, 2, 2, 1, 1]. Note that the last number (0) is missing as we don&#39;t need it (the amount of Xs from the end of the string to the end of the string is.. of course, 0, always, regardless of what character we are talkkng about). Had the string input been abcnca, then the int arrays are 6 large and for c, would contain [2, 2, 2, 1, 1, 0].\r\n\r\nArmed with this array, the answer can be provided in `O(1)` time: It&#39;s &#39;the answer I would give if you asked me to go from start index to the end-of-string&#39;, minus &#39;the answer I would give if you asked me to go from end index to the end-of-string&#39;. Taking into account, of course, that if the question&#39;s end index matches end-of-string, just look up the answer in the int array (don&#39;t subtract anything).\r\n\r\nThis means the time taken after preprocessing is O(1), but the size of the &#39;preprocessed&#39; data structure is now considerable. For example, if the input string is 1 MB large and contains 5000 different characters, it&#39;s a 20GB table (4 bytes per number, 5000 entries in the map, each entry mapping to an array with a million entries, at 4 bytes a pop, is `5000*1000000*4 = 20GB`).\r\n","title":"Count character occurrences in a substring in O(1) time with preprocessing","body":"<p>First, convert your input string into a map that maps characters onto a <strong>sorted</strong> list of indices. For example:</p>\n<pre><code>String input = &quot;abcnc&quot;;\nvar store = new HashMap&lt;Character, TreeSet&lt;Integer&gt;&gt;();\nfor (int i = 0; i &lt; input.length(); i++) {\n  store.computeIfAbsent(input.charAt(i), k -&gt; new TreeSet&lt;Integer&gt;()).add(i);\n}\n\nSystem.out.println(store);\n</code></pre>\n<p>This makes: <code>{a=[0], b=[1], c=[2, 4], n=[3]}</code></p>\n<p>And the cost for making this thing can be written off as 'preprocessing', but if it matters, O(nlogn).</p>\n<p>Armed with <code>store</code>, you can do the job in <code>O(log n)</code> time. For example, if I want to know how many <code>c</code>s are in the 3-5 range, I for ask for the TreeSet match c (getting me the <code>[2, 4]</code> treeset). Then I can use treeset's headSet and tailSet methods to figure it out, which are each O(logn) operations.</p>\n<p>This gives me a total runtime of <code>O(logn)</code> which is as near to <code>O(1)</code> as makes it irrelevant (in the sense that practical concerns about how modern computer architecture works will dwarf this). If an interviewer does not accept that answer, the are either needlessly pedantic or wildly misguided about how modern computers work, so now we delve into a purely academic exercise to knock it down to an <code>O(1)</code>.</p>\n<h2>O(1)</h2>\n<p>instead of mapping the character to a TreeSet, we instead map it to an <code>int[]</code>. This int array is as large as the entire input (so in this case, the 4 int[] arrays for keys 'a', 'b', 'c', and 'n' are all 5 large because the input is 5 large). This int array answers the question: If you asked me for the answer from THIS position to the end of the string, what is the correct answer? So, for c it would be: [2, 2, 2, 1, 1]. Note that the last number (0) is missing as we don't need it (the amount of Xs from the end of the string to the end of the string is.. of course, 0, always, regardless of what character we are talkkng about). Had the string input been abcnca, then the int arrays are 6 large and for c, would contain [2, 2, 2, 1, 1, 0].</p>\n<p>Armed with this array, the answer can be provided in <code>O(1)</code> time: It's 'the answer I would give if you asked me to go from start index to the end-of-string', minus 'the answer I would give if you asked me to go from end index to the end-of-string'. Taking into account, of course, that if the question's end index matches end-of-string, just look up the answer in the int array (don't subtract anything).</p>\n<p>This means the time taken after preprocessing is O(1), but the size of the 'preprocessed' data structure is now considerable. For example, if the input string is 1 MB large and contains 5000 different characters, it's a 20GB table (4 bytes per number, 5000 entries in the map, each entry mapping to an array with a million entries, at 4 bytes a pop, is <code>5000*1000000*4 = 20GB</code>).</p>\n"},{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1671239533,"creation_date":1671238734,"answer_id":74831092,"question_id":74830541,"body_markdown":"&gt; This question has not been asked before since I am specifically asking O(1) constant time after the time taken to preprocess the string is amortized over many freq operations.\r\n\r\nTo achieve an amortized constant time for this method, you can generate a `HashMap`, associating each character with an array of length equal to the length of the given String, where every array element represents the number of occurrences of a particular character from the beginning of the String up to a particular index.\r\n\r\nThe first call of the `freq()` would populate the `Map` and would run in **O(n)**, subsequent calls would execute in constant time **O(1)**.\r\n\r\nTherefore, so-called [amortized time Complexity](http://www.cs.cornell.edu/courses/cs3110/2011sp/Lectures/lec20-amortized/amortized.htm), which considers the upper bound of the total cost of `N` invocations of the operation, would be **O(1)**.\r\n\r\nThe algorithm of populating the Map resembles the [Counting sort algorithm](https://en.wikipedia.org/wiki/Counting_sort#Pseudocode) (we need to perform the steps, represented by the two firsts `for`-loop in the pseudocode available via the link).\r\n\r\nIn order to populate the Map, every unique character encountered in the string needs to be associated with an array `int[]` having the length of the given string. And during the iteration, an element under the current index in the array that corresponds to the current character should be incremented (*that&#39;s basically the first phase in the Counting sort*).\r\n\r\nThe next step is to iterate over the Values of the Map and calculate the cumulative frequency for each array of frequencies, so that every element would represent the total number of occurrences of a certain character from the very beginning of the String up to a particular index (*this step is identical to the second phase in the Counting sort*).\r\n\r\nThat&#39;s how implementation might look like:\r\n\r\n    public static final Map&lt;Character, int[]&gt; FREQ_BY_CHAR = new HashMap&lt;&gt;();\r\n    \r\n    public static int freq(String s, char c, int start, int end) {\r\n        \r\n        if (FREQ_BY_CHAR.isEmpty()) populate(s);\r\n    \r\n        int[] frequencies = FREQ_BY_CHAR.get(c);\r\n        \r\n        return frequencies[end] - frequencies[start];\r\n    }\r\n    \r\n    public static void populate(String s) {\r\n        countFrequencies(s);\r\n        calculateCumulativeFrequencies();\r\n    }\r\n    \r\n    public static void countFrequencies(String s) {\r\n        for (int i = 0; i &lt; s.length(); i++) {\r\n            char next = s.charAt(i);\r\n            int[] frequencies = FREQ_BY_CHAR.computeIfAbsent(next, k -&gt; new int[s.length()]);\r\n            frequencies[i]++;\r\n        }\r\n    }\r\n    \r\n    public static void calculateCumulativeFrequencies() {\r\n        FREQ_BY_CHAR.values().forEach(freq -&gt; accumulate(freq));\r\n    }\r\n    \r\n    public static void accumulate(int[] freq) {\r\n        for (int i = 1; i &lt; freq.length; i++) freq[i] += freq[i - 1];\r\n    }\r\n\r\n`main()`\r\n\r\n    public static void main(String[] args) {\r\n        String s = &quot;abcnc&quot;;\r\n        char find = &#39;c&#39;;\r\n        int start = 1;\r\n        int end = 4;\r\n    \r\n        System.out.println(freq(s, find, start, end));\r\n    \r\n        FREQ_BY_CHAR.forEach((ch, arr1) -&gt; System.out.println(ch + &quot; -&gt; &quot; + Arrays.toString(arr1))); \r\n    }\r\n\r\n*Output:*\r\n\r\n```\r\n2\r\n// contents of the Map\r\n//    a  b  c  n  c\r\na -&gt; [1, 1, 1, 1, 1]\r\nb -&gt; [0, 1, 1, 1, 1]\r\nc -&gt; [0, 0, 1, 1, 2]\r\nn -&gt; [0, 0, 0, 1, 1] \r\n```","title":"Count character occurrences in a substring in O(1) time with preprocessing","body":"<blockquote>\n<p>This question has not been asked before since I am specifically asking O(1) constant time after the time taken to preprocess the string is amortized over many freq operations.</p>\n</blockquote>\n<p>To achieve an amortized constant time for this method, you can generate a <code>HashMap</code>, associating each character with an array of length equal to the length of the given String, where every array element represents the number of occurrences of a particular character from the beginning of the String up to a particular index.</p>\n<p>The first call of the <code>freq()</code> would populate the <code>Map</code> and would run in <strong>O(n)</strong>, subsequent calls would execute in constant time <strong>O(1)</strong>.</p>\n<p>Therefore, so-called <a href=\"http://www.cs.cornell.edu/courses/cs3110/2011sp/Lectures/lec20-amortized/amortized.htm\" rel=\"nofollow noreferrer\">amortized time Complexity</a>, which considers the upper bound of the total cost of <code>N</code> invocations of the operation, would be <strong>O(1)</strong>.</p>\n<p>The algorithm of populating the Map resembles the <a href=\"https://en.wikipedia.org/wiki/Counting_sort#Pseudocode\" rel=\"nofollow noreferrer\">Counting sort algorithm</a> (we need to perform the steps, represented by the two firsts <code>for</code>-loop in the pseudocode available via the link).</p>\n<p>In order to populate the Map, every unique character encountered in the string needs to be associated with an array <code>int[]</code> having the length of the given string. And during the iteration, an element under the current index in the array that corresponds to the current character should be incremented (<em>that's basically the first phase in the Counting sort</em>).</p>\n<p>The next step is to iterate over the Values of the Map and calculate the cumulative frequency for each array of frequencies, so that every element would represent the total number of occurrences of a certain character from the very beginning of the String up to a particular index (<em>this step is identical to the second phase in the Counting sort</em>).</p>\n<p>That's how implementation might look like:</p>\n<pre><code>public static final Map&lt;Character, int[]&gt; FREQ_BY_CHAR = new HashMap&lt;&gt;();\n\npublic static int freq(String s, char c, int start, int end) {\n    \n    if (FREQ_BY_CHAR.isEmpty()) populate(s);\n\n    int[] frequencies = FREQ_BY_CHAR.get(c);\n    \n    return frequencies[end] - frequencies[start];\n}\n\npublic static void populate(String s) {\n    countFrequencies(s);\n    calculateCumulativeFrequencies();\n}\n\npublic static void countFrequencies(String s) {\n    for (int i = 0; i &lt; s.length(); i++) {\n        char next = s.charAt(i);\n        int[] frequencies = FREQ_BY_CHAR.computeIfAbsent(next, k -&gt; new int[s.length()]);\n        frequencies[i]++;\n    }\n}\n\npublic static void calculateCumulativeFrequencies() {\n    FREQ_BY_CHAR.values().forEach(freq -&gt; accumulate(freq));\n}\n\npublic static void accumulate(int[] freq) {\n    for (int i = 1; i &lt; freq.length; i++) freq[i] += freq[i - 1];\n}\n</code></pre>\n<p><code>main()</code></p>\n<pre><code>public static void main(String[] args) {\n    String s = &quot;abcnc&quot;;\n    char find = 'c';\n    int start = 1;\n    int end = 4;\n\n    System.out.println(freq(s, find, start, end));\n\n    FREQ_BY_CHAR.forEach((ch, arr1) -&gt; System.out.println(ch + &quot; -&gt; &quot; + Arrays.toString(arr1))); \n}\n</code></pre>\n<p><em>Output:</em></p>\n<pre><code>2\n// contents of the Map\n//    a  b  c  n  c\na -&gt; [1, 1, 1, 1, 1]\nb -&gt; [0, 1, 1, 1, 1]\nc -&gt; [0, 0, 1, 1, 2]\nn -&gt; [0, 0, 0, 1, 1] \n</code></pre>\n"},{"tags":[],"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1671238907,"creation_date":1671238907,"answer_id":74831101,"question_id":74830541,"body_markdown":"You can do it in O(1) (constant time) using O(N) space and O(N) pre-processing time, *and* without the use of maps or anything else other than basic java, as follows:\r\n\r\nMake a single pass over the string and keep a cumulative count of each letter seen so far:\r\n\r\n    int[][] counts;\r\n\r\n    public void process(String input) {\r\n        counts = new int[input.length()][];\r\n        for (int i = 0; i &lt; input.length(); i++) {\r\n            counts[i] = i == 0 ? new int[26] : Arrays.copyOf(counts[i - 1], 26);\r\n            counts[i][input.charAt(i) - &#39;a&#39;]++;\r\n        }\r\n    }\r\n\r\nThen return the difference between the counts at start and end:\r\n\r\n    public int count( char c, int start, int end) {\r\n        return counts[end][c - &#39;a&#39;] - counts[start][c - &#39;a&#39;];\r\n    }\r\n","title":"Count character occurrences in a substring in O(1) time with preprocessing","body":"<p>You can do it in O(1) (constant time) using O(N) space and O(N) pre-processing time, <em>and</em> without the use of maps or anything else other than basic java, as follows:</p>\n<p>Make a single pass over the string and keep a cumulative count of each letter seen so far:</p>\n<pre><code>int[][] counts;\n\npublic void process(String input) {\n    counts = new int[input.length()][];\n    for (int i = 0; i &lt; input.length(); i++) {\n        counts[i] = i == 0 ? new int[26] : Arrays.copyOf(counts[i - 1], 26);\n        counts[i][input.charAt(i) - 'a']++;\n    }\n}\n</code></pre>\n<p>Then return the difference between the counts at start and end:</p>\n<pre><code>public int count( char c, int start, int end) {\n    return counts[end][c - 'a'] - counts[start][c - 'a'];\n}\n</code></pre>\n"}],"owner":{"account_id":27277160,"reputation":31,"user_id":20797589,"display_name":"R0bin_0"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":375,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"accepted_answer_id":74831101,"answer_count":3,"score":2,"last_activity_date":1671249504,"creation_date":1671231421,"question_id":74830541,"body_markdown":"*This question has not been asked before, since I am specifically asking **O(1)** constant time after the time taken to preprocess the string is amortized over many freq operations.*\r\n\r\nAn interviewer asked me to find the total count of a character appearing in a substring. For example, if you are given a string, the character to find, and the start and end index of the positions you want to search in, I am supposed to find the most optimized way e.g.:\r\n\r\n    String s = &quot;abcnc&quot;;\r\n    char find = &quot;c&quot;\r\n    int start = 1;\r\n    int end = 4;\r\n\r\nthat should return a result of 2 since `&#39;c&#39;` appears twice in the specified substring of `&#39;bcnc&#39;`.\r\n\r\nWhat I did was straightforward, which was\r\n\r\n    int freq(String s, char c, int start, int end) {\r\n    \tint result = 0;\t\r\n    \tfor(int i = start, i &lt; end; i++) {\r\n    \t\tif(s.charAt(i) == c) {\r\n    \t\t\tresult++;\r\n    \t\t}\r\n    \t}\r\n    \t\r\n    \treturn result;\r\n    }\r\n\r\nWhich has an **O(N)** time complexity.\r\n\r\nHowever, the interviewer said it can be more optimized by first preprocessing the string, where the `freq()` method can have **O(1)** complexity. I was stumped because I don&#39;t know how it can be more optimized other than **O(N)**. The interviewer told me I should use a map or list or both and to first find the index those characters are positioned and that will give me a more optimized solution.","title":"Count character occurrences in a substring in O(1) time with preprocessing","body":"<p><em>This question has not been asked before, since I am specifically asking <strong>O(1)</strong> constant time after the time taken to preprocess the string is amortized over many freq operations.</em></p>\n<p>An interviewer asked me to find the total count of a character appearing in a substring. For example, if you are given a string, the character to find, and the start and end index of the positions you want to search in, I am supposed to find the most optimized way e.g.:</p>\n<pre><code>String s = &quot;abcnc&quot;;\nchar find = &quot;c&quot;\nint start = 1;\nint end = 4;\n</code></pre>\n<p>that should return a result of 2 since <code>'c'</code> appears twice in the specified substring of <code>'bcnc'</code>.</p>\n<p>What I did was straightforward, which was</p>\n<pre><code>int freq(String s, char c, int start, int end) {\n    int result = 0; \n    for(int i = start, i &lt; end; i++) {\n        if(s.charAt(i) == c) {\n            result++;\n        }\n    }\n    \n    return result;\n}\n</code></pre>\n<p>Which has an <strong>O(N)</strong> time complexity.</p>\n<p>However, the interviewer said it can be more optimized by first preprocessing the string, where the <code>freq()</code> method can have <strong>O(1)</strong> complexity. I was stumped because I don't know how it can be more optimized other than <strong>O(N)</strong>. The interviewer told me I should use a map or list or both and to first find the index those characters are positioned and that will give me a more optimized solution.</p>\n"},{"tags":["java","djl"],"comments":[{"owner":{"account_id":2161850,"reputation":766,"user_id":1915846,"accept_rate":0,"display_name":"cserpell"},"score":0,"creation_date":1666142065,"post_id":72075392,"comment_id":130863851,"body_markdown":"Your code has several different functionalities. I suggest you to reduce your code to the minimum necessary to reproduce the error. For example, the error shows that the training step of a neural network is failing, when calling to the mxnet library that is used behind the scenes. Try to write a short piece of code that has the same error message with known inputs.","body":"Your code has several different functionalities. I suggest you to reduce your code to the minimum necessary to reproduce the error. For example, the error shows that the training step of a neural network is failing, when calling to the mxnet library that is used behind the scenes. Try to write a short piece of code that has the same error message with known inputs."}],"answers":[{"tags":[],"owner":{"account_id":8940317,"reputation":46,"user_id":10764959,"display_name":"Kx13739240386"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671249036,"creation_date":1671249036,"answer_id":74831670,"question_id":72075392,"body_markdown":"This problem is reported from MXNet engine when invoking the forward function call on the `Linear` block. And data type mismatch is found. But the `Linear` block should be rather mature in DJL. There are many test already. \r\n\r\nMaybe you can set break point to check the dataType of the NDArray, right before the JNA is called, for example, somewhere around\r\n`at ai.djl.mxnet.engine.MxNDArrayEx.linear(MxNDArrayEx.java:597)`, to see if they are as expected. On the other hand, you can take a look at `integration/src/main/java/ai/djl/integration/tests/nn/BlockCoreTest.java` to see successful application of Linear block forward call. Use it as a benchmark on the dataType issue.\r\n","title":"How to fix ai.djl.engine.EngineException incompatible attr in node at 1-th input: expected int32, got float32","body":"<p>This problem is reported from MXNet engine when invoking the forward function call on the <code>Linear</code> block. And data type mismatch is found. But the <code>Linear</code> block should be rather mature in DJL. There are many test already.</p>\n<p>Maybe you can set break point to check the dataType of the NDArray, right before the JNA is called, for example, somewhere around\n<code>at ai.djl.mxnet.engine.MxNDArrayEx.linear(MxNDArrayEx.java:597)</code>, to see if they are as expected. On the other hand, you can take a look at <code>integration/src/main/java/ai/djl/integration/tests/nn/BlockCoreTest.java</code> to see successful application of Linear block forward call. Use it as a benchmark on the dataType issue.</p>\n"}],"owner":{"account_id":22918043,"reputation":1,"user_id":17054343,"display_name":"Judica&#235;l Ngandji Ted"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":466,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1671249036,"creation_date":1651396130,"question_id":72075392,"body_markdown":"I started to Deep learning with Deep Java Library (DJL) and Spring boot. When I train my dataset I got this error \r\n```\r\nai.djl.engine.EngineException: MXNet engine call failed: MXNetError: Check failed: assign(&amp;dattr, vec.at(i)): Incompatible attr in node  at 1-th input: expected int32, got float32\r\n```\r\nmy full code his her [github][1]\r\nMy implementation of RandomAccessDataset lool like this [code online][2]\r\nthat is my code\r\n\r\n```\r\npackage com.anthill.OptimumBet.basic;\r\n\r\nimport ai.djl.ndarray.NDArray;\r\nimport ai.djl.ndarray.NDList;\r\nimport ai.djl.ndarray.NDManager;\r\nimport ai.djl.training.dataset.RandomAccessDataset;\r\nimport ai.djl.training.dataset.Record;\r\nimport ai.djl.util.Progress;\r\nimport com.anthill.OptimumBet.util.Utils;\r\nimport java.io.IOException;\r\nimport java.io.Reader;\r\nimport java.nio.file.Files;\r\nimport java.nio.file.Paths;\r\nimport java.util.List;\r\nimport org.apache.commons.csv.CSVFormat;\r\nimport org.apache.commons.csv.CSVParser;\r\nimport org.apache.commons.csv.CSVRecord;\r\n\r\n/**\r\n *\r\n * @author truth\r\n */\r\npublic class CSVDataset extends RandomAccessDataset {\r\n\r\n    private final List&lt;CSVRecord&gt; csvRecords;\r\n\r\n    private CSVDataset(Builder builder) {\r\n        super(builder);\r\n        this.csvRecords = builder.dataset;\r\n    }\r\n\r\n    @Override\r\n    public Record get(NDManager manager, long index) {\r\n        CSVRecord record = csvRecords.get(Math.toIntExact(index));\r\n        NDArray datum = manager.create(\r\n                encode(record.get(Utils.QUESTION_MALICIOUS_URL)));\r\n        NDArray label = manager.create(\r\n                Float.parseFloat(record.get(Utils.ANSWER_MALICIOUS_URL)));\r\n\r\n        return new Record(new NDList(datum), new NDList(label));\r\n    }\r\n\r\n    @Override\r\n    protected long availableSize() {\r\n        return this.csvRecords.size();\r\n    }\r\n\r\n    private int[] encode(String url) {\r\n        url = url.toLowerCase();\r\n        int[] encoding = new int[26];\r\n        for (char ch : url.toCharArray()) {\r\n            int index = ch - &#39;a&#39;;\r\n            if (index &lt; 26 &amp;&amp; index &gt;= 0) {\r\n                encoding[ch - &#39;a&#39;]++;\r\n            }\r\n        }\r\n        return encoding;\r\n    }\r\n    \r\n    @Override\r\n    public void prepare(Progress prgrs) {}\r\n\r\n    public static Builder builder(String csvFilePath) {\r\n        return new Builder(csvFilePath);\r\n    }\r\n\r\n    public static final class Builder extends BaseBuilder&lt;Builder&gt; {\r\n\r\n        List&lt;CSVRecord&gt; dataset;\r\n        private final String csvFilePath;\r\n        private Usage usage;\r\n\r\n        Builder(String csvFilePath) {\r\n            this.csvFilePath = csvFilePath;\r\n            this.usage = Usage.TRAIN;\r\n        }\r\n\r\n        @Override\r\n        protected Builder self() {\r\n            return this;\r\n        }\r\n\r\n        public Builder optUsage(Usage usage) {\r\n            this.usage = usage;\r\n            return this;\r\n        }\r\n\r\n        public CSVDataset build() throws IOException {\r\n\r\n            try ( Reader reader = Files.newBufferedReader(Paths.get(csvFilePath));\r\n                    CSVParser csvParser = new CSVParser(\r\n                    reader,\r\n                    CSVFormat.DEFAULT.builder()\r\n                        .setHeader(Utils.QUESTION_MALICIOUS_URL, Utils.ANSWER_MALICIOUS_URL)\r\n                        .setSkipHeaderRecord(true)\r\n                        .setIgnoreHeaderCase(true)\r\n                        .setTrim(true)\r\n                        .build())) {\r\n                List&lt;CSVRecord&gt; csvRecords = csvParser.getRecords();\r\n                int index = (int) (csvRecords.size() * 0.8);\r\n                switch (usage) {\r\n                    case TRAIN: {\r\n                        dataset = csvRecords.subList(0, index);\r\n                        break;\r\n                    }\r\n                    case TEST: {\r\n                        dataset = csvRecords.subList(index, csvRecords.size());\r\n                        break;\r\n                    }\r\n                    default:{\r\n                        dataset = csvRecords;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            return new CSVDataset(this);\r\n        }\r\n    }\r\n}\r\n```\r\nand that is my training\r\n\r\n```\r\npublic TrainingResult trainCSVDataset() throws IOException, TranslateException {\r\n\r\n        try ( Model model = Model.newInstance(Utils.MODEL_NAME_MALICIOUS_URL)) {\r\n            model.setBlock(\r\n                    new Mlp(\r\n                            Utils.INPUT_MALICIOUS_URL,\r\n                            Utils.OUTPUT_MALICIOUS_URL,\r\n                            new int[]{128, 64}));\r\n\r\n            //get training and validation dataset\r\n            \r\n            RandomAccessDataset trainingSet = this.getCSVDataSet(\r\n                    Dataset.Usage.TRAIN,\r\n                    Utils.BATCH_SIZE,\r\n                    Utils.LIMIT);\r\n            RandomAccessDataset validateSet = this.getCSVDataSet(\r\n                    Dataset.Usage.TEST,\r\n                    Utils.BATCH_SIZE,\r\n                    Utils.LIMIT);\r\n            \r\n            //set training configuration\r\n            try ( Trainer trainer = model.newTrainer(\r\n                    this.setupTrainingConfig(Utils.MODEL_NAME_MALICIOUS_URL,\r\n                            this.getGpus()))) {\r\n                            \r\n                trainer.setMetrics(new Metrics());\r\n\r\n                trainer.initialize(new Shape(1, Utils.INPUT_MALICIOUS_URL));\r\n                System.out.println(&quot;trainingDataset size :&quot;+ trainingSet.size());\r\n\r\n                EasyTrain.fit(trainer, Utils.EPOCH, trainingSet, validateSet);\r\n\r\n                Path modelDire = Paths.get(Utils.MODEL_DIRE);\r\n                Files.createDirectories(modelDire);\r\n\r\n                model.setProperty(&quot;Epoch&quot;, String.valueOf(Utils.EPOCH));\r\n                model.save(modelDire, Utils.MODEL_NAME_MALICIOUS_URL);\r\n\r\n                return trainer.getTrainingResult();\r\n            }\r\n\r\n        }\r\n    }\r\n    \r\n    private DefaultTrainingConfig setupTrainingConfig(\r\n            String outputDire,\r\n            int maxGpus) {\r\n        \r\n        SaveModelTrainingListener listener = \r\n                new SaveModelTrainingListener(outputDire);\r\n        listener.setSaveModelCallback(\r\n                trainer -&gt; {\r\n                    TrainingResult result = trainer.getTrainingResult();\r\n                    Model model = trainer.getModel();\r\n                    model.setProperty(\r\n                            &quot;Accuracy&quot;,\r\n                            String.format(\r\n                                    &quot;%.5f&quot;,\r\n                                    result.getTrainEvaluation(&quot;Accuracy&quot;)));\r\n                    model.setProperty(\r\n                            &quot;Loss&quot;,\r\n                            String.format(&quot;%.5f&quot;, result.getValidateLoss()));\r\n                });\r\n\r\n        return new DefaultTrainingConfig(Loss.softmaxCrossEntropyLoss())\r\n                .addEvaluator(new Accuracy())\r\n                .optDevices(Engine.getInstance().getDevices(maxGpus))\r\n                .addTrainingListeners(\r\n                        TrainingListener.Defaults.logging(outputDire))\r\n                .addTrainingListeners(listener);\r\n    }\r\n    \r\n    private RandomAccessDataset getDataSet(\r\n            Dataset.Usage usage,\r\n            int batchSize,\r\n            int limit) throws IOException {\r\n        \r\n        Mnist mnist = Mnist.builder()\r\n                .optUsage(usage)\r\n                .setSampling(batchSize, true)\r\n                .optLimit(limit)\r\n                .build();\r\n        mnist.prepare(new ProgressBar());\r\n        return mnist;\r\n    }\r\n    \r\n    private RandomAccessDataset getCSVDataSet(Dataset.Usage usage, int batchSize, int limit) throws IOException, TranslateException {\r\n        \r\n        RandomAccessDataset csvDataset = CSVDataset.builder(Utils.MALICIOUS_URL_DATA_IN_PATH_SYSTEM)\r\n                .optUsage(usage)\r\n                .setSampling(batchSize, true)\r\n                .optLimit(limit)\r\n                .build();\r\n\r\n//        csvDataset.prepare(new ProgressBar());\r\n        return csvDataset;\r\n    }\r\n    \r\n    private int getGpus() {\r\n        return Engine.getInstance().getGpuCount();\r\n    }\r\n```\r\n\r\nplease someone can help me to fix my error?\r\n\r\nthat is the full message error\r\n\r\n```\r\nSun May 01 07:47:06 WAT 2022\r\nThere was an unexpected error (type=Internal Server Error, status=500).\r\nMXNet engine call failed: MXNetError: Check failed: assign(&amp;dattr, vec.at(i)): Incompatible attr in node at 1-th input: expected int32, got float32 Stack trace: File &quot;../src/io/../operator/elemwise_op_common.h&quot;, line 135\r\nai.djl.engine.EngineException: MXNet engine call failed: MXNetError: Check failed: assign(&amp;dattr, vec.at(i)): Incompatible attr in node  at 1-th input: expected int32, got float32\r\nStack trace:\r\n  File &quot;../src/io/../operator/elemwise_op_common.h&quot;, line 135\r\n\r\n\tat ai.djl.mxnet.jna.JnaUtils.checkCall(JnaUtils.java:1930)\r\n\tat ai.djl.mxnet.jna.JnaUtils.imperativeInvoke(JnaUtils.java:519)\r\n\tat ai.djl.mxnet.jna.FunctionInfo.invoke(FunctionInfo.java:72)\r\n\tat ai.djl.mxnet.engine.MxNDManager.invoke(MxNDManager.java:294)\r\n\tat ai.djl.mxnet.engine.MxNDArrayEx.linear(MxNDArrayEx.java:597)\r\n\tat ai.djl.nn.core.Linear.linear(Linear.java:182)\r\n\tat ai.djl.nn.core.Linear.forwardInternal(Linear.java:87)\r\n\tat ai.djl.nn.AbstractBaseBlock.forwardInternal(AbstractBaseBlock.java:125)\r\n\tat ai.djl.nn.AbstractBaseBlock.forward(AbstractBaseBlock.java:90)\r\n\tat ai.djl.nn.SequentialBlock.forwardInternal(SequentialBlock.java:147)\r\n\tat ai.djl.nn.AbstractBaseBlock.forward(AbstractBaseBlock.java:90)\r\n\tat ai.djl.training.Trainer.forward(Trainer.java:173)\r\n\tat ai.djl.training.EasyTrain.trainSplit(EasyTrain.java:120)\r\n\tat ai.djl.training.EasyTrain.trainBatch(EasyTrain.java:108)\r\n\tat ai.djl.training.EasyTrain.fit(EasyTrain.java:57)\r\n\tat com.anthill.OptimumBet.service.TrainModelService.trainCSVDataset(TrainModelService.java:108)\r\n\tat com.anthill.OptimumBet.controller.OptimumBetController.trainCSVDataSet(OptimumBetController.java:48)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:655)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:764)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:889)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:829)\r\n```\r\nsorry for my english! I&#39;m still learning.\r\n\r\n\r\n  [1]: https://github.com/ngandji/optimumbed.git\r\n  [2]: https://github.com/deepjavalibrary/djl/blob/master/docs/development/CSVDataset.java","title":"How to fix ai.djl.engine.EngineException incompatible attr in node at 1-th input: expected int32, got float32","body":"<p>I started to Deep learning with Deep Java Library (DJL) and Spring boot. When I train my dataset I got this error</p>\n<pre><code>ai.djl.engine.EngineException: MXNet engine call failed: MXNetError: Check failed: assign(&amp;dattr, vec.at(i)): Incompatible attr in node  at 1-th input: expected int32, got float32\n</code></pre>\n<p>my full code his her <a href=\"https://github.com/ngandji/optimumbed.git\" rel=\"nofollow noreferrer\">github</a>\nMy implementation of RandomAccessDataset lool like this <a href=\"https://github.com/deepjavalibrary/djl/blob/master/docs/development/CSVDataset.java\" rel=\"nofollow noreferrer\">code online</a>\nthat is my code</p>\n<pre><code>package com.anthill.OptimumBet.basic;\n\nimport ai.djl.ndarray.NDArray;\nimport ai.djl.ndarray.NDList;\nimport ai.djl.ndarray.NDManager;\nimport ai.djl.training.dataset.RandomAccessDataset;\nimport ai.djl.training.dataset.Record;\nimport ai.djl.util.Progress;\nimport com.anthill.OptimumBet.util.Utils;\nimport java.io.IOException;\nimport java.io.Reader;\nimport java.nio.file.Files;\nimport java.nio.file.Paths;\nimport java.util.List;\nimport org.apache.commons.csv.CSVFormat;\nimport org.apache.commons.csv.CSVParser;\nimport org.apache.commons.csv.CSVRecord;\n\n/**\n *\n * @author truth\n */\npublic class CSVDataset extends RandomAccessDataset {\n\n    private final List&lt;CSVRecord&gt; csvRecords;\n\n    private CSVDataset(Builder builder) {\n        super(builder);\n        this.csvRecords = builder.dataset;\n    }\n\n    @Override\n    public Record get(NDManager manager, long index) {\n        CSVRecord record = csvRecords.get(Math.toIntExact(index));\n        NDArray datum = manager.create(\n                encode(record.get(Utils.QUESTION_MALICIOUS_URL)));\n        NDArray label = manager.create(\n                Float.parseFloat(record.get(Utils.ANSWER_MALICIOUS_URL)));\n\n        return new Record(new NDList(datum), new NDList(label));\n    }\n\n    @Override\n    protected long availableSize() {\n        return this.csvRecords.size();\n    }\n\n    private int[] encode(String url) {\n        url = url.toLowerCase();\n        int[] encoding = new int[26];\n        for (char ch : url.toCharArray()) {\n            int index = ch - 'a';\n            if (index &lt; 26 &amp;&amp; index &gt;= 0) {\n                encoding[ch - 'a']++;\n            }\n        }\n        return encoding;\n    }\n    \n    @Override\n    public void prepare(Progress prgrs) {}\n\n    public static Builder builder(String csvFilePath) {\n        return new Builder(csvFilePath);\n    }\n\n    public static final class Builder extends BaseBuilder&lt;Builder&gt; {\n\n        List&lt;CSVRecord&gt; dataset;\n        private final String csvFilePath;\n        private Usage usage;\n\n        Builder(String csvFilePath) {\n            this.csvFilePath = csvFilePath;\n            this.usage = Usage.TRAIN;\n        }\n\n        @Override\n        protected Builder self() {\n            return this;\n        }\n\n        public Builder optUsage(Usage usage) {\n            this.usage = usage;\n            return this;\n        }\n\n        public CSVDataset build() throws IOException {\n\n            try ( Reader reader = Files.newBufferedReader(Paths.get(csvFilePath));\n                    CSVParser csvParser = new CSVParser(\n                    reader,\n                    CSVFormat.DEFAULT.builder()\n                        .setHeader(Utils.QUESTION_MALICIOUS_URL, Utils.ANSWER_MALICIOUS_URL)\n                        .setSkipHeaderRecord(true)\n                        .setIgnoreHeaderCase(true)\n                        .setTrim(true)\n                        .build())) {\n                List&lt;CSVRecord&gt; csvRecords = csvParser.getRecords();\n                int index = (int) (csvRecords.size() * 0.8);\n                switch (usage) {\n                    case TRAIN: {\n                        dataset = csvRecords.subList(0, index);\n                        break;\n                    }\n                    case TEST: {\n                        dataset = csvRecords.subList(index, csvRecords.size());\n                        break;\n                    }\n                    default:{\n                        dataset = csvRecords;\n                        break;\n                    }\n                }\n            }\n            return new CSVDataset(this);\n        }\n    }\n}\n</code></pre>\n<p>and that is my training</p>\n<pre><code>public TrainingResult trainCSVDataset() throws IOException, TranslateException {\n\n        try ( Model model = Model.newInstance(Utils.MODEL_NAME_MALICIOUS_URL)) {\n            model.setBlock(\n                    new Mlp(\n                            Utils.INPUT_MALICIOUS_URL,\n                            Utils.OUTPUT_MALICIOUS_URL,\n                            new int[]{128, 64}));\n\n            //get training and validation dataset\n            \n            RandomAccessDataset trainingSet = this.getCSVDataSet(\n                    Dataset.Usage.TRAIN,\n                    Utils.BATCH_SIZE,\n                    Utils.LIMIT);\n            RandomAccessDataset validateSet = this.getCSVDataSet(\n                    Dataset.Usage.TEST,\n                    Utils.BATCH_SIZE,\n                    Utils.LIMIT);\n            \n            //set training configuration\n            try ( Trainer trainer = model.newTrainer(\n                    this.setupTrainingConfig(Utils.MODEL_NAME_MALICIOUS_URL,\n                            this.getGpus()))) {\n                            \n                trainer.setMetrics(new Metrics());\n\n                trainer.initialize(new Shape(1, Utils.INPUT_MALICIOUS_URL));\n                System.out.println(&quot;trainingDataset size :&quot;+ trainingSet.size());\n\n                EasyTrain.fit(trainer, Utils.EPOCH, trainingSet, validateSet);\n\n                Path modelDire = Paths.get(Utils.MODEL_DIRE);\n                Files.createDirectories(modelDire);\n\n                model.setProperty(&quot;Epoch&quot;, String.valueOf(Utils.EPOCH));\n                model.save(modelDire, Utils.MODEL_NAME_MALICIOUS_URL);\n\n                return trainer.getTrainingResult();\n            }\n\n        }\n    }\n    \n    private DefaultTrainingConfig setupTrainingConfig(\n            String outputDire,\n            int maxGpus) {\n        \n        SaveModelTrainingListener listener = \n                new SaveModelTrainingListener(outputDire);\n        listener.setSaveModelCallback(\n                trainer -&gt; {\n                    TrainingResult result = trainer.getTrainingResult();\n                    Model model = trainer.getModel();\n                    model.setProperty(\n                            &quot;Accuracy&quot;,\n                            String.format(\n                                    &quot;%.5f&quot;,\n                                    result.getTrainEvaluation(&quot;Accuracy&quot;)));\n                    model.setProperty(\n                            &quot;Loss&quot;,\n                            String.format(&quot;%.5f&quot;, result.getValidateLoss()));\n                });\n\n        return new DefaultTrainingConfig(Loss.softmaxCrossEntropyLoss())\n                .addEvaluator(new Accuracy())\n                .optDevices(Engine.getInstance().getDevices(maxGpus))\n                .addTrainingListeners(\n                        TrainingListener.Defaults.logging(outputDire))\n                .addTrainingListeners(listener);\n    }\n    \n    private RandomAccessDataset getDataSet(\n            Dataset.Usage usage,\n            int batchSize,\n            int limit) throws IOException {\n        \n        Mnist mnist = Mnist.builder()\n                .optUsage(usage)\n                .setSampling(batchSize, true)\n                .optLimit(limit)\n                .build();\n        mnist.prepare(new ProgressBar());\n        return mnist;\n    }\n    \n    private RandomAccessDataset getCSVDataSet(Dataset.Usage usage, int batchSize, int limit) throws IOException, TranslateException {\n        \n        RandomAccessDataset csvDataset = CSVDataset.builder(Utils.MALICIOUS_URL_DATA_IN_PATH_SYSTEM)\n                .optUsage(usage)\n                .setSampling(batchSize, true)\n                .optLimit(limit)\n                .build();\n\n//        csvDataset.prepare(new ProgressBar());\n        return csvDataset;\n    }\n    \n    private int getGpus() {\n        return Engine.getInstance().getGpuCount();\n    }\n</code></pre>\n<p>please someone can help me to fix my error?</p>\n<p>that is the full message error</p>\n<pre><code>Sun May 01 07:47:06 WAT 2022\nThere was an unexpected error (type=Internal Server Error, status=500).\nMXNet engine call failed: MXNetError: Check failed: assign(&amp;dattr, vec.at(i)): Incompatible attr in node at 1-th input: expected int32, got float32 Stack trace: File &quot;../src/io/../operator/elemwise_op_common.h&quot;, line 135\nai.djl.engine.EngineException: MXNet engine call failed: MXNetError: Check failed: assign(&amp;dattr, vec.at(i)): Incompatible attr in node  at 1-th input: expected int32, got float32\nStack trace:\n  File &quot;../src/io/../operator/elemwise_op_common.h&quot;, line 135\n\n    at ai.djl.mxnet.jna.JnaUtils.checkCall(JnaUtils.java:1930)\n    at ai.djl.mxnet.jna.JnaUtils.imperativeInvoke(JnaUtils.java:519)\n    at ai.djl.mxnet.jna.FunctionInfo.invoke(FunctionInfo.java:72)\n    at ai.djl.mxnet.engine.MxNDManager.invoke(MxNDManager.java:294)\n    at ai.djl.mxnet.engine.MxNDArrayEx.linear(MxNDArrayEx.java:597)\n    at ai.djl.nn.core.Linear.linear(Linear.java:182)\n    at ai.djl.nn.core.Linear.forwardInternal(Linear.java:87)\n    at ai.djl.nn.AbstractBaseBlock.forwardInternal(AbstractBaseBlock.java:125)\n    at ai.djl.nn.AbstractBaseBlock.forward(AbstractBaseBlock.java:90)\n    at ai.djl.nn.SequentialBlock.forwardInternal(SequentialBlock.java:147)\n    at ai.djl.nn.AbstractBaseBlock.forward(AbstractBaseBlock.java:90)\n    at ai.djl.training.Trainer.forward(Trainer.java:173)\n    at ai.djl.training.EasyTrain.trainSplit(EasyTrain.java:120)\n    at ai.djl.training.EasyTrain.trainBatch(EasyTrain.java:108)\n    at ai.djl.training.EasyTrain.fit(EasyTrain.java:57)\n    at com.anthill.OptimumBet.service.TrainModelService.trainCSVDataset(TrainModelService.java:108)\n    at com.anthill.OptimumBet.controller.OptimumBetController.trainCSVDataSet(OptimumBetController.java:48)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n    at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067)\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)\n    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:655)\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360)\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:889)\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n    at java.base/java.lang.Thread.run(Thread.java:829)\n</code></pre>\n<p>sorry for my english! I'm still learning.</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9192,"page":800,"page_size":100}
